{"version":3,"sources":["components/user-settings/side-nav.js","components/user-settings/user-avatar-form.js","components/user-settings/user-basic-info-form.js","components/user-settings/web-api-auth-token.js","components/dialog/set-webdav-password.js","components/dialog/reset-webdav-password.js","components/dialog/remove-webdav-password.js","components/user-settings/webdav-password.js","components/user-settings/language-setting.js","components/user-settings/list-in-address-book.js","components/user-settings/email-notice.js","components/user-settings/two-factor-auth.js","components/dialog/confirm-disconnect-wechat.js","components/user-settings/social-login.js","components/dialog/confirm-disconnect-dingtalk.js","components/user-settings/social-login-dingtalk.js","components/dialog/confirm-delete-account.js","components/user-settings/delete-account.js","settings.js"],"names":["SideNav","props","className","this","data","map","item","index","show","curItemID","href","substr","text","React","Component","window","app","pageOptions","avatarURL","csrfToken","UserAvatarForm","fileInputChange","fileInput","current","files","length","file","fileName","name","lastIndexOf","toaster","danger","gettext","duration","fileExt","toLowerCase","allowedExt","indexOf","errorMsg","replace","join","size","seafileAPI","updateUserAvatar","then","res","setState","avatarSrc","avatar_url","success","catch","error","Utils","getErrorMsg","openFileInput","click","handleMouseOver","isEditShown","handleMouseOut","onEditIconKeyDown","e","key","target","state","createRef","form","ref","encType","method","action","siteRoot","type","value","onMouseOver","onMouseOut","onFocus","tabIndex","src","width","height","alt","onChange","onClick","role","onKeyDown","nameLabel","enableUpdateUserInfo","enableUserSetContactEmail","UserBasicInfoForm","handleNameInputChange","handleContactEmailInputChange","contactEmail","handleSubmit","preventDefault","contact_email","updateUserInfo","userInfo","login_id","loginID","onSubmit","htmlFor","id","disabled","readOnly","WebAPIAuthToken","getAuthToken","getAuthTokenBySession","authToken","token","errMessage","createAuthToken","createAuthTokenBySession","isAuthTokenVisible","deleteAuthToken","deleteAuthTokenBySession","toggleAuthTokenVisible","onIconKeyDown","Fragment","Math","max","webdavSecretMinLength","webdavSecretStrengthLevel","SetWebdavPassword","submit","password","errMsg","getStrengthLevel","btnDisabled","setPassword","trim","handleInputChange","togglePasswordVisible","isPasswordVisible","generatePassword","randomPassword","toggle","passwordTip","Modal","centered","isOpen","ModalHeader","ModalBody","InputGroup","Input","autoComplete","InputGroupAddon","addonType","Button","Alert","color","ModalFooter","ResetWebdavPassword","resetPassword","RemoveWebdavPassword","removePassword","username","webdavUrl","webdavPasswordSetted","WebdavPassword","toggleSetPasswordDialog","isSetPasserdDialogOpen","updateWebdavSecret","isWebdavPasswordSetted","toggleResetPasswordDialog","isResetPasswordDialogOpen","toggleRemovePasswordDialog","isRemovePasswordDialogOpen","isResetPasserdDialogOpen","isRemovePasserdDialogOpen","currentLang","langList","LanguageSetting","onSelectChange","selectedItem","location","options","langCode","label","langName","defaultValue","ListInAddressBook","checked","inputChecked","list_in_address_book","toString","fileUpdatesEmailInterval","collaborateEmailInterval","EmailNotice","inputFileUpdatesEmailIntervalChange","parseInt","inputCollaborateEmailIntervalChange","formSubmit","updateEmailNotificationInterval","fileUpdatesOptions","interval","collaborateOptions","defaultDevice","backupTokens","TwoFactorAuthentication","renderEnabled","renderDisabled","ConfirmDisconnectWechat","disconnect","formActionURL","socialConnected","socialNextPage","SocialLogin","confirmDisconnect","isConfirmDialogOpen","toggleDialog","encodeURIComponent","ConfirmDisconnectDingtalk","socialConnectedDingtalk","SocialLoginDintalk","ConfirmDeleteAccount","DeleteAccount","confirmDelete","canUpdatePassword","passwordOperationText","enableGetAuthToken","enableWebdavSecret","enableAddressBook","twoFactorAuthEnabled","enableWechatWork","enableDingtalk","enableDeleteAccount","Settings","onSearchedClick","is_dir","url","repo_id","repo_name","path","navigate","repalce","encodePath","open","handleContentScroll","scrollTop","scrolled","sideNavItems","filter","document","getElementById","offsetTop","isPro","getUserInfo","mediaUrl","logoPath","logoHeight","logoWidth","title","siteTitle","onScroll","ReactDom","render"],"mappings":"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","file":"static/js/settings.chunk.js","sourcesContent":["import React from 'react';\n\nclass SideNav extends React.Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    return (\n      <ul className=\"nav flex-column user-setting-nav\">\n        {this.props.data.map((item, index) => {\n          return item.show ?\n            <li key={index} className={`nav-item${this.props.curItemID == item.href.substr(1) ? ' active' : ''}`}><a className=\"nav-link\" href={item.href}>{item.text}</a></li> : null;\n        })}\n      </ul>\n    );\n  }\n}\n\nexport default SideNav;\n","import React from 'react';\nimport { gettext, siteRoot } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport toaster from '../toast';\nimport { Utils } from '../../utils/utils';\n\nconst { avatarURL, csrfToken } = window.app.pageOptions;\n\nclass UserAvatarForm extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      avatarSrc: avatarURL,\n      isEditShown: false\n    };\n    this.fileInput = React.createRef();\n    this.form = React.createRef();\n  }\n\n  fileInputChange = () => {\n\n    // no file selected\n    if (!this.fileInput.current.files.length) {\n      return;\n    }\n\n    const file = this.fileInput.current.files[0];\n    const fileName = file.name;\n\n    // no file extension\n    if (fileName.lastIndexOf('.') == -1) {\n      toaster.danger(gettext('Please choose an image file.'), {\n        duration: 5\n      });\n      return false;\n    }\n\n    const fileExt = fileName.substr((fileName.lastIndexOf('.') + 1)).toLowerCase();\n    const allowedExt = ['jpg','jpeg', 'png', 'gif'];\n    if (allowedExt.indexOf(fileExt) == -1) {\n      const errorMsg = gettext('File extensions can only be {placeholder}.')\n        .replace('{placeholder}', allowedExt.join(', '));\n      toaster.danger(errorMsg, {duration: 5});\n      return false;\n    }\n\n    // file size should be less than 1MB\n    if (file.size > 1024*1024) {\n      const errorMsg = gettext('The file is too large. Allowed maximum size is 1MB.');\n      toaster.danger(errorMsg, {duration: 5});\n      return false;\n    }\n\n    //this.form.current.submit();\n    seafileAPI.updateUserAvatar(file, 160).then((res) => {\n      this.setState({\n        avatarSrc: res.data.avatar_url\n      });\n      toaster.success(gettext('Success'));\n    }).catch((error) => {\n      let errorMsg = Utils.getErrorMsg(error);\n      toaster.danger(errorMsg);\n    });\n  }\n\n  openFileInput = () => {\n    this.fileInput.current.click();\n  }\n\n  handleMouseOver = () => {\n    this.setState({\n      isEditShown: true\n    });\n  }\n\n  handleMouseOut = () => {\n    this.setState({\n      isEditShown: false\n    });\n  }\n\n  onEditIconKeyDown = (e) => {\n    if (e.key == 'Enter' || e.key == 'Space') {\n      e.target.click();\n    }\n  }\n\n  render() {\n    return (\n      <form ref={this.form} className=\"form-group row\" encType=\"multipart/form-data\" method=\"post\" action={`${siteRoot}avatar/add/`}>\n        <input type=\"hidden\" name=\"csrfmiddlewaretoken\" value={csrfToken} />\n        <label className=\"col-sm-1 col-form-label\">{gettext('Avatar:')}</label>\n        <div className=\"col-auto position-relative\" onMouseOver={this.handleMouseOver} onMouseOut={this.handleMouseOut} onFocus={this.handleMouseOver} tabIndex=\"0\">\n          <img src={this.state.avatarSrc} width=\"80\" height=\"80\" alt=\"\" className=\"user-avatar\" />\n          <input type=\"file\" name=\"avatar\" className=\"d-none\" onChange={this.fileInputChange} ref={this.fileInput} />\n          <span className={`avatar-edit fas fa-edit ${!this.state.isEditShown && 'd-none'}`} onClick={this.openFileInput} role=\"button\" aria-label={gettext('Edit')} tabIndex=\"0\" onKeyDown={this.onEditIconKeyDown}></span>\n        </div>\n      </form>\n    );\n  }\n}\n\nexport default UserAvatarForm;\n","import React from 'react';\nimport { gettext } from '../../utils/constants';\n\nconst {\n  nameLabel,\n  enableUpdateUserInfo,\n  enableUserSetContactEmail\n} = window.app.pageOptions;\n\nclass UserBasicInfoForm extends React.Component {\n\n  constructor(props) {\n    super(props);\n    const {\n      contact_email,\n      login_id,\n      name\n    } = this.props.userInfo;\n    this.state = {\n      contactEmail: contact_email,\n      loginID: login_id,\n      name: name\n    };\n  }\n\n  handleNameInputChange = (e) => {\n    this.setState({\n      name: e.target.value\n    });\n  }\n\n  handleContactEmailInputChange = (e) => {\n    this.setState({\n      contactEmail: e.target.value\n    });\n  }\n\n  handleSubmit = (e) => {\n    e.preventDefault();\n    let data = {\n      name: this.state.name\n    };\n    if (enableUserSetContactEmail) {\n      data.contact_email = this.state.contactEmail;\n    }\n    this.props.updateUserInfo(data);\n  }\n\n  render() {\n    const {\n      contactEmail,\n      loginID,\n      name\n    } = this.state;\n\n    return (\n      <form action=\"\" method=\"post\" onSubmit={this.handleSubmit}>\n\n        <div className=\"form-group row\">\n          <label className=\"col-sm-1 col-form-label\" htmlFor=\"name\">{nameLabel}</label>\n          <div className=\"col-sm-5\">\n            <input className=\"form-control\" id=\"name\" type=\"text\" name=\"nickname\" value={name} disabled={!enableUpdateUserInfo} onChange={this.handleNameInputChange} />\n          </div>\n        </div>\n\n        {loginID && (\n          <div className=\"form-group row\">\n            <label className=\"col-sm-1 col-form-label\" htmlFor=\"user-name\">{gettext('Username:')}</label>\n            <div className=\"col-sm-5\">\n              <input className=\"form-control\" id=\"user-name\" type=\"text\" name=\"username\" value={loginID} disabled={true} readOnly={true} />\n            </div>\n            <p className=\"col-sm-5 m-0 input-tip\">{gettext('You can use this field at login.')}</p>\n          </div>\n        )}\n\n        {(contactEmail || enableUserSetContactEmail) && (\n          <div className=\"form-group row\">\n            <label className=\"col-sm-1 col-form-label\" htmlFor=\"contact-email\">{gettext('Contact Email:')}</label>\n            <div className=\"col-sm-5\">\n              <input className=\"form-control\" id=\"contact-email\" type=\"text\" name=\"contact_email\" value={contactEmail} disabled={!enableUserSetContactEmail} readOnly={!enableUserSetContactEmail} onChange={this.handleContactEmailInputChange} />\n            </div>\n            <p className=\"col-sm-5 m-0 input-tip\">{gettext('Your notifications will be sent to this email.')}</p>\n          </div>\n        )}\n\n        <button type=\"submit\" className=\"btn btn-outline-primary offset-sm-1\" disabled={!enableUpdateUserInfo}>{gettext('Submit')}</button>\n      </form>\n    );\n  }\n}\n\nexport default UserBasicInfoForm;\n","import React from 'react';\nimport ModalPortal from '../modal-portal';\nimport { gettext } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../toast';\n\nclass WebAPIAuthToken extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      authToken: '',\n      isAuthTokenVisible: false,\n    };\n  }\n\n  componentDidMount() {\n    this.getAuthToken();\n  }\n\n  getAuthToken = () => {\n    seafileAPI.getAuthTokenBySession().then((res) => {\n      this.setState({\n        authToken: res.data.token\n      });\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  createAuthToken = () => {\n    seafileAPI.createAuthTokenBySession().then((res) => {\n      this.setState({\n        authToken: res.data.token,\n        isAuthTokenVisible: false\n      });\n      toaster.success(gettext('Success'));\n    }).catch((error) => {\n      let errorMsg = Utils.getErrorMsg(error);\n      toaster.danger(errorMsg);\n    });\n  }\n\n  deleteAuthToken = () => {\n    seafileAPI.deleteAuthTokenBySession().then((res) => {\n      this.setState({\n        authToken: '',\n        isAuthTokenVisible: false\n      });\n      toaster.success(gettext('Success'));\n    }).catch((error) => {\n      let errorMsg = Utils.getErrorMsg(error);\n      toaster.danger(errorMsg);\n    });\n  }\n\n  toggleAuthTokenVisible = () => {\n    this.setState({\n      isAuthTokenVisible: !this.state.isAuthTokenVisible\n    });\n  }\n\n  onIconKeyDown = (e) => {\n    if (e.key == 'Enter' || e.key == 'Space') {\n      e.target.click();\n    }\n  }\n\n  render() {\n    const { authToken, isAuthTokenVisible } = this.state;\n    return (\n      <React.Fragment>\n        <div id=\"get-auth-token\" className=\"setting-item\">\n          <h3 className=\"setting-item-heading\">{gettext('Web API Auth Token')}</h3>\n          {authToken ? (\n            <React.Fragment>\n              <div className=\"d-flex align-items-center\">\n                <label className=\"m-0 mr-2\" htmlFor=\"token\">{gettext('Token:')}</label>\n                <input id=\"token\" className=\"border-0 mr-1\" type=\"text\" value={isAuthTokenVisible ? authToken : '****************************************'} readOnly={true} size={Math.max(authToken.length, 10)} />\n                <span tabIndex=\"0\" role=\"button\" aria-label={isAuthTokenVisible ? gettext('Hide') : gettext('Show')} onKeyDown={this.onIconKeyDown} onClick={this.toggleAuthTokenVisible} className={`eye-icon fas ${this.state.isAuthTokenVisible ? 'fa-eye': 'fa-eye-slash'}`}></span>\n              </div>\n              <button className=\"btn btn-outline-primary mt-2\" onClick={this.deleteAuthToken}>{gettext('Delete')}</button>\n            </React.Fragment>\n          ) : (\n            <button className=\"btn btn-outline-primary\" onClick={this.createAuthToken}>{gettext('Generate')}</button>\n          )}\n        </div>\n      </React.Fragment>\n    );\n  }\n}\n\nexport default WebAPIAuthToken;\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { Modal, ModalHeader, ModalBody, ModalFooter, Alert, Button, Input, InputGroup, InputGroupAddon } from 'reactstrap';\nimport { gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\n\nconst propTypes = {\n  setPassword: PropTypes.func.isRequired,\n  toggle: PropTypes.func.isRequired\n};\n\nconst { webdavSecretMinLength, webdavSecretStrengthLevel } = window.app.pageOptions;\n\nclass SetWebdavPassword extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      password: '',\n      isPasswordVisible: false,\n      btnDisabled: false,\n      errMsg: ''\n    };\n  }\n\n  submit = () => {\n\n    if (this.state.password.length === 0) {\n      this.setState({errMsg: gettext('Please enter a password.')});\n      return false;\n    }\n    if (this.state.password.length < webdavSecretMinLength) {\n      this.setState({errMsg: gettext('The password is too short.')});\n      return false;\n    }\n\n    if (Utils.getStrengthLevel(this.state.password) < webdavSecretStrengthLevel) {\n      this.setState({errMsg: gettext('The password is too weak. It should include at least {passwordStrengthLevel} of the following: number, upper letter, lower letter and other symbols.').replace('{passwordStrengthLevel}', webdavSecretStrengthLevel)});\n      return false;\n    }\n\n    this.setState({\n      btnDisabled: true\n    });\n\n    this.props.setPassword(this.state.password.trim());\n  }\n\n  handleInputChange = (e) => {\n    this.setState({password: e.target.value});\n  }\n\n  togglePasswordVisible = () => {\n    this.setState({\n      isPasswordVisible: !this.state.isPasswordVisible\n    });\n  }\n\n  generatePassword = () => {\n    let randomPassword = Utils.generatePassword(webdavSecretMinLength);\n    this.setState({\n      password: randomPassword\n    });\n  }\n\n  render() {\n    const { toggle } = this.props;\n    const passwordTip = gettext('(at least {passwordMinLength} characters and includes {passwordStrengthLevel} of the following: number, upper letter, lower letter and other symbols)').replace('{passwordMinLength}', webdavSecretMinLength).replace('{passwordStrengthLevel}', webdavSecretStrengthLevel);\n\n    return (\n      <Modal centered={true} isOpen={true} toggle={toggle}>\n        <ModalHeader toggle={toggle}>{gettext('Set WebDAV Password')}</ModalHeader>\n        <ModalBody>\n          <InputGroup>\n            <Input type={this.state.isPasswordVisible ? 'text' : 'password'} value={this.state.password} onChange={this.handleInputChange} autoComplete=\"new-password\"/>\n            <InputGroupAddon addonType=\"append\">\n              <Button onClick={this.togglePasswordVisible}><i className={`fas ${this.state.isPasswordVisible ? 'fa-eye': 'fa-eye-slash'}`}></i></Button>\n              <Button onClick={this.generatePassword}><i className=\"fas fa-magic\"></i></Button>\n            </InputGroupAddon>\n          </InputGroup>\n          <p className=\"form-text text-muted m-0\">{passwordTip}</p>\n          {this.state.errMsg && <Alert color=\"danger\" className=\"m-0 mt-2\">{gettext(this.state.errMsg)}</Alert>}\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={toggle}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.submit} disabled={this.state.btnDisabled}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nSetWebdavPassword.propTypes = propTypes;\n\nexport default SetWebdavPassword;\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { Modal, ModalHeader, ModalBody, ModalFooter, Alert, Button, Input, InputGroup, InputGroupAddon } from 'reactstrap';\nimport { gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\n\nconst propTypes = {\n  resetPassword: PropTypes.func.isRequired,\n  toggle: PropTypes.func.isRequired\n};\n\nconst { webdavSecretMinLength, webdavSecretStrengthLevel } = window.app.pageOptions;\n\nclass ResetWebdavPassword extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      password: '',\n      isPasswordVisible: false,\n      btnDisabled: false,\n      errMsg: ''\n    };\n  }\n\n  submit = () => {\n\n    if (this.state.password.length === 0) {\n      this.setState({errMsg: gettext('Please enter a password.')});\n      return false;\n    }\n    if (this.state.password.length < webdavSecretMinLength) {\n      this.setState({errMsg: gettext('The password is too short.')});\n      return false;\n    }\n\n    if (Utils.getStrengthLevel(this.state.password) < webdavSecretStrengthLevel) {\n      this.setState({errMsg: gettext('The password is too weak. It should include at least {passwordStrengthLevel} of the following: number, upper letter, lower letter and other symbols.').replace('{passwordStrengthLevel}', webdavSecretStrengthLevel)});\n      return false;\n    }\n\n    this.setState({\n      btnDisabled: true\n    });\n\n    this.props.resetPassword(this.state.password.trim());\n  }\n\n  handleInputChange = (e) => {\n    this.setState({password: e.target.value});\n  }\n\n  togglePasswordVisible = () => {\n    this.setState({\n      isPasswordVisible: !this.state.isPasswordVisible\n    });\n  }\n\n  generatePassword = () => {\n    let randomPassword = Utils.generatePassword(webdavSecretMinLength);\n    this.setState({\n      password: randomPassword\n    });\n  }\n\n  render() {\n    const { toggle } = this.props;\n    const passwordTip = gettext('(at least {passwordMinLength} characters and includes {passwordStrengthLevel} of the following: number, upper letter, lower letter and other symbols)').replace('{passwordMinLength}', webdavSecretMinLength).replace('{passwordStrengthLevel}', webdavSecretStrengthLevel);\n\n    return (\n      <Modal centered={true} isOpen={true} toggle={toggle}>\n        <ModalHeader toggle={toggle}>{gettext('Reset WebDAV Password')}</ModalHeader>\n        <ModalBody>\n          <InputGroup>\n            <Input type={this.state.isPasswordVisible ? 'text' : 'password'} value={this.state.password} onChange={this.handleInputChange} autoComplete=\"new-password\"/>\n            <InputGroupAddon addonType=\"append\">\n              <Button onClick={this.togglePasswordVisible}><i className={`fas ${this.state.isPasswordVisible ? 'fa-eye': 'fa-eye-slash'}`}></i></Button>\n              <Button onClick={this.generatePassword}><i className=\"fas fa-magic\"></i></Button>\n            </InputGroupAddon>\n          </InputGroup>\n          <p className=\"form-text text-muted m-0\">{passwordTip}</p>\n          {this.state.errMsg && <Alert color=\"danger\" className=\"m-0 mt-2\">{gettext(this.state.errMsg)}</Alert>}\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={toggle}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.submit} disabled={this.state.btnDisabled}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nResetWebdavPassword.propTypes = propTypes;\n\nexport default ResetWebdavPassword;\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { Modal, ModalHeader, ModalBody, ModalFooter, Button } from 'reactstrap';\nimport { gettext } from '../../utils/constants';\n\nconst propTypes = {\n  removePassword: PropTypes.func.isRequired,\n  toggle: PropTypes.func.isRequired\n};\n\nclass RemoveWebdavPassword extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      btnDisabled: false\n    };\n  }\n\n  submit = () => {\n    this.setState({\n      btnDisabled: true\n    });\n\n    this.props.removePassword();\n  }\n\n  render() {\n    const { toggle } = this.props;\n\n    return (\n      <Modal centered={true} isOpen={true} toggle={toggle}>\n        <ModalHeader toggle={toggle}>{gettext('Delete WebDAV Password')}</ModalHeader>\n        <ModalBody>\n          <p>{gettext('Are you sure you want to delete WebDAV password?')}</p>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={toggle}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.submit} disabled={this.state.btnDisabled}>{gettext('Delete')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nRemoveWebdavPassword.propTypes = propTypes;\n\nexport default RemoveWebdavPassword;\n","import React from 'react';\nimport ModalPortal from '../modal-portal';\nimport { gettext } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../toast';\nimport SetWebdavPassword from '../dialog/set-webdav-password';\nimport ResetWebdavPassword from '../dialog/reset-webdav-password';\nimport RemoveWebdavPassword from '../dialog/remove-webdav-password';\n\nconst { username, webdavUrl, webdavPasswordSetted } = window.app.pageOptions;\n\nclass WebdavPassword extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isWebdavPasswordSetted: webdavPasswordSetted,\n      isSetPasserdDialogOpen: false,\n      isResetPasserdDialogOpen: false,\n      isRemovePasserdDialogOpen: false,\n    };\n  }\n\n  toggleSetPasswordDialog = () => {\n    this.setState({\n      isSetPasserdDialogOpen: !this.state.isSetPasserdDialogOpen,\n    });\n  }\n\n  setPassword = (password) => {\n    seafileAPI.updateWebdavSecret(password).then((res) => {\n      this.toggleSetPasswordDialog();\n      this.setState({\n        isWebdavPasswordSetted: !this.state.isWebdavPasswordSetted,\n      });\n      toaster.success(gettext('Success'));\n    }).catch((error) => {\n      let errorMsg = Utils.getErrorMsg(error);\n      this.toggleSetPasswordDialog();\n      toaster.danger(errorMsg);\n    });\n  }\n\n  toggleResetPasswordDialog = () => {\n    this.setState({\n      isResetPasswordDialogOpen: !this.state.isResetPasswordDialogOpen,\n    });\n  }\n\n  resetPassword = (password) => {\n    seafileAPI.updateWebdavSecret(password).then((res) => {\n      this.toggleResetPasswordDialog();\n      toaster.success(gettext('Success'));\n    }).catch((error) => {\n      let errorMsg = Utils.getErrorMsg(error);\n      this.toggleResetPasswordDialog();\n      toaster.danger(errorMsg);\n    });\n  }\n\n  toggleRemovePasswordDialog = () => {\n    this.setState({\n      isRemovePasswordDialogOpen: !this.state.isRemovePasswordDialogOpen,\n    });\n  }\n\n  removePassword = () => {\n    seafileAPI.updateWebdavSecret().then((res) => {\n      this.toggleRemovePasswordDialog();\n      this.setState({\n        isWebdavPasswordSetted: !this.state.isWebdavPasswordSetted,\n      });\n      toaster.success(gettext('Success'));\n    }).catch((error) => {\n      let errorMsg = Utils.getErrorMsg(error);\n      this.toggleRemovePasswordDialog();\n      toaster.danger(errorMsg);\n    });\n  }\n\n  onIconKeyDown = (e) => {\n    if (e.key == 'Enter' || e.key == 'Space') {\n      e.target.click();\n    }\n  }\n\n  render() {\n    const { isWebdavPasswordSetted } = this.state;\n    return (\n      <React.Fragment>\n        <div id=\"update-webdav-passwd\" className=\"setting-item\">\n          <h3 className=\"setting-item-heading\">{gettext('WebDAV Password')}</h3>\n          <p>WebDAV URL: <a href={webdavUrl}>{webdavUrl}</a></p>\n          <p>{gettext('WebDAV username:')} {username}</p>\n          {!isWebdavPasswordSetted ?\n            <React.Fragment>\n              <p>{gettext('WebDAV password:')} {gettext('not set')}</p>\n              <button className=\"btn btn-outline-primary\" onClick={this.toggleSetPasswordDialog}>{gettext('Set Password')}</button>\n            </React.Fragment>\n            :\n            <React.Fragment>\n              <p>{gettext('WebDAV password:')} ***</p>\n              <button className=\"btn btn-outline-primary mr-2\" onClick={this.toggleResetPasswordDialog}>{gettext('Reset Password')}</button>\n              <button className=\"btn btn-outline-primary\" onClick={this.toggleRemovePasswordDialog}>{gettext('Delete Password')}</button>\n            </React.Fragment>\n          }\n        </div>\n        {this.state.isSetPasserdDialogOpen && (\n          <ModalPortal>\n            <SetWebdavPassword\n              setPassword={this.setPassword}\n              toggle={this.toggleSetPasswordDialog}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isResetPasswordDialogOpen && (\n          <ModalPortal>\n            <ResetWebdavPassword\n              resetPassword={this.resetPassword}\n              toggle={this.toggleResetPasswordDialog}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isRemovePasswordDialogOpen && (\n          <ModalPortal>\n            <RemoveWebdavPassword\n              removePassword={this.removePassword}\n              toggle={this.toggleRemovePasswordDialog}\n            />\n          </ModalPortal>\n        )}\n      </React.Fragment>\n    );\n  }\n}\n\nexport default WebdavPassword;\n","import React from 'react';\nimport Select from 'react-select';\nimport { gettext, siteRoot } from '../../utils/constants';\n\nconst {\n  currentLang, langList\n} = window.app.pageOptions;\n\nclass LanguageSetting extends React.Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  onSelectChange = (selectedItem) => {\n    // selectedItem: {value: '...', label: '...'}\n    location.href = `${siteRoot}i18n/?lang=${selectedItem.value}`;\n  }\n\n  render() {\n    const options = langList.map((item, index) => {\n      return {\n        value: item.langCode,\n        label: item.langName\n      };\n    });\n\n    return (\n      <div className=\"setting-item\" id=\"lang-setting\">\n        <h3 className=\"setting-item-heading\">{gettext('Language Setting')}</h3>\n        <Select\n          className='language-selector'\n          defaultValue={{value: currentLang.langCode, label: currentLang.langName}}\n          options={options}\n          onChange={this.onSelectChange}\n        />\n      </div>\n    );\n  }\n}\n\nexport default LanguageSetting;\n","import React from 'react';\nimport { gettext } from '../../utils/constants';\n\nclass ListInAddressBook extends React.Component {\n\n  constructor(props) {\n    super(props);\n    const { list_in_address_book } = this.props.userInfo;\n    this.state = {\n      inputChecked: list_in_address_book\n    };\n  }\n\n  handleInputChange = (e) => {\n    const checked = e.target.checked;\n    this.setState({\n      inputChecked: checked\n    });\n    this.props.updateUserInfo({\n      list_in_address_book: checked.toString()\n    });\n  }\n\n  render() {\n    const { inputChecked } = this.state;\n\n    return (\n      <div className=\"setting-item\" id=\"list-in-address-book\">\n        <h3 className=\"setting-item-heading\">{gettext('Global Address Book')}</h3>\n        <div className=\"d-flex align-items-center\">\n          <input type=\"checkbox\" id=\"list-in-address-book\" name=\"list_in_address_book\" className=\"mr-1\" checked={inputChecked} onChange={this.handleInputChange} />\n          <label htmlFor=\"list-in-address-book\" className=\"m-0\">{gettext('List your account in global address book, so that others can find you by typing your name.')}</label>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default ListInAddressBook;\n","import React from 'react';\nimport { gettext } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../toast';\n\nconst {\n  fileUpdatesEmailInterval,\n  collaborateEmailInterval\n} = window.app.pageOptions;\n\nclass EmailNotice extends React.Component {\n\n  constructor(props) {\n    super(props);\n\n    // interval: in seconds\n    this.fileUpdatesOptions = [\n      {interval: 0, text: gettext('Don\\'t send emails')},\n      {interval: 3600, text: gettext('Per hour')},\n      {interval: 14400, text: gettext('Per 4 hours')},\n      {interval: 86400, text: gettext('Per day')},\n      {interval: 604800, text: gettext('Per week')}\n    ];\n\n    this.collaborateOptions = [\n      {interval: 0, text: gettext('Don\\'t send emails')},\n      {interval: 3600, text: gettext('Per hour') + ' (' + gettext('If notifications have not been read within one hour, they will be sent to your mailbox.') + ')'}\n    ];\n\n    this.state = {\n      fileUpdatesEmailInterval: fileUpdatesEmailInterval,\n      collaborateEmailInterval: collaborateEmailInterval\n    };\n  }\n\n  inputFileUpdatesEmailIntervalChange = (e) => {\n    if (e.target.checked) {\n      this.setState({\n        fileUpdatesEmailInterval: parseInt(e.target.value)\n      });\n    }\n  }\n\n  inputCollaborateEmailIntervalChange = (e) => {\n    if (e.target.checked) {\n      this.setState({\n        collaborateEmailInterval: parseInt(e.target.value)\n      });\n    }\n  }\n\n  formSubmit = (e) => {\n    e.preventDefault();\n    let { fileUpdatesEmailInterval, collaborateEmailInterval } = this.state;\n    seafileAPI.updateEmailNotificationInterval(fileUpdatesEmailInterval, collaborateEmailInterval).then((res) => {\n      toaster.success(gettext('Success'));\n    }).catch((error) => {\n      let errorMsg = Utils.getErrorMsg(error);\n      toaster.danger(errorMsg);\n    });\n  }\n\n  render() {\n    const { fileUpdatesEmailInterval, collaborateEmailInterval } = this.state;\n    return (\n      <div className=\"setting-item\" id=\"email-notice\">\n        <h3 className=\"setting-item-heading\">{gettext('Email Notification')}</h3>\n        <h6 className=\"\">{gettext('Notifications of file changes')}</h6>\n        <p className=\"mb-1\">{gettext('The list of added, deleted and modified files will be sent to your mailbox.')}</p>\n        <form method=\"post\" action=\"\" id=\"set-email-notice-interval-form\" onSubmit={this.formSubmit}>\n          {this.fileUpdatesOptions.map((item, index) => {\n            return (\n              <React.Fragment key={`file-updates-${index}`}>\n                <input type=\"radio\" name=\"interval\" value={item.interval} className=\"align-middle\" id={`file-updates-interval-option${index + 1}`} checked={fileUpdatesEmailInterval == item.interval} onChange={this.inputFileUpdatesEmailIntervalChange} />\n                <label className=\"align-middle m-0 ml-2\" htmlFor={`interval-option${index + 1}`}>{item.text}</label>\n                <br />\n              </React.Fragment>\n            );\n          })}\n        </form>\n\n        <h6 className=\"mt-4\">{gettext('Notifications of collaboration')}</h6>\n        <p className=\"mb-1\">{gettext('Whether the notifications of collaboration such as sharing library or joining group should be sent to your mailbox.')}</p>\n        <form method=\"post\" action=\"\" id=\"set-email-notice-interval-form\" onSubmit={this.formSubmit}>\n          {this.collaborateOptions.map((item, index) => {\n            return (\n              <React.Fragment key={`collaborate-${index}`}>\n                <input type=\"radio\" name=\"interval\" value={item.interval} className=\"align-middle\" id={`collaborate-interval-option${index + 1}`} checked={collaborateEmailInterval == item.interval} onChange={this.inputCollaborateEmailIntervalChange} />\n                <label className=\"align-middle m-0 ml-2\" htmlFor={`interval-option${index + 1}`}>{item.text}</label>\n                <br />\n              </React.Fragment>\n            );\n          })}\n        </form>\n        <button type=\"submit\" className=\"btn btn-outline-primary mt-2\" onClick={this.formSubmit}>{gettext('Submit')}</button>\n      </div>\n    );\n  }\n}\n\nexport default EmailNotice;\n","import React from 'react';\nimport { gettext, siteRoot } from '../../utils/constants';\n\nconst {\n  defaultDevice,\n  backupTokens\n} = window.app.pageOptions;\n\nclass TwoFactorAuthentication extends React.Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  renderEnabled = () => {\n    return (\n      <React.Fragment>\n        <p className=\"mb-2\">{gettext('Status: enabled')}</p>\n        <a className=\"btn btn-outline-primary mb-4\" href={`${siteRoot}profile/two_factor_authentication/disable/`}>\n          {gettext('Disable Two-Factor Authentication')}</a>\n        <p className=\"mb-2\">\n          {gettext('If you don\\'t have any device with you, you can access your account using backup codes.')}\n          {backupTokens == 1 ? gettext('You have only one backup code remaining.') :\n            gettext('You have {num} backup codes remaining.').replace('{num}', backupTokens)}\n        </p>\n        <a href={`${siteRoot}profile/two_factor_authentication/backup/tokens/`}\n          className=\"btn btn-outline-primary\">{gettext('Show Codes')}</a>\n      </React.Fragment>\n    );\n  }\n\n  renderDisabled = () => {\n    return (\n      <React.Fragment>\n        <p className=\"mb-2\">{gettext('Two-factor authentication is not enabled for your account. Enable two-factor authentication for enhanced account security.')}</p>\n        <a href={`${siteRoot}profile/two_factor_authentication/setup/`} className=\"btn btn-outline-primary\">\n          {gettext('Enable Two-Factor Authentication')}</a>\n      </React.Fragment>\n    );\n  }\n\n  render() {\n    return (\n      <div className=\"setting-item\" id=\"two-factor-auth\">\n        <h3 className=\"setting-item-heading\">{gettext('Two-Factor Authentication')}</h3>\n        {defaultDevice ? this.renderEnabled() : this.renderDisabled()}\n      </div>\n    );\n  }\n}\n\nexport default TwoFactorAuthentication;\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { Modal, ModalHeader, ModalBody, ModalFooter, Button } from 'reactstrap';\nimport { gettext } from '../../utils/constants';\n\nconst propTypes = {\n  formActionURL: PropTypes.string.isRequired,\n  csrfToken: PropTypes.string.isRequired,\n  toggle: PropTypes.func.isRequired\n};\n\nclass ConfirmDisconnectWechat extends Component {\n\n  constructor(props) {\n    super(props);\n    this.form = React.createRef();\n  }\n\n  disconnect = () => {\n    this.form.current.submit();\n  }\n\n  render() {\n    const {formActionURL, csrfToken, toggle} = this.props;\n    return (\n      <Modal centered={true} isOpen={true} toggle={toggle}>\n        <ModalHeader toggle={toggle}>{gettext('Disconnect')}</ModalHeader>\n        <ModalBody>\n          <p>{gettext('Are you sure you want to disconnect?')}</p>\n          <form ref={this.form} className=\"d-none\" method=\"post\" action={formActionURL}>\n            <input type=\"hidden\" name=\"csrfmiddlewaretoken\" value={csrfToken} />\n          </form>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={toggle}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.disconnect}>{gettext('Disconnect')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nConfirmDisconnectWechat.propTypes = propTypes;\n\nexport default ConfirmDisconnectWechat;\n","import React from 'react';\nimport { gettext, siteRoot } from '../../utils/constants';\nimport ModalPortal from '../modal-portal';\nimport ConfirmDisconnectWechat from '../dialog/confirm-disconnect-wechat';\n\nconst {\n  csrfToken,\n  langCode,\n  socialConnected,\n  socialNextPage\n} = window.app.pageOptions;\n\nclass SocialLogin extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isConfirmDialogOpen: false\n    };\n  }\n\n  confirmDisconnect = () => {\n    this.setState({\n      isConfirmDialogOpen: true\n    });\n  }\n\n  toggleDialog = () => {\n    this.setState({\n      isConfirmDialogOpen: !this.state.isConfirmDialogOpen\n    });\n  }\n\n  render() {\n    return (\n      <React.Fragment>\n        <div className=\"setting-item\" id=\"social-auth\">\n          <h3 className=\"setting-item-heading\">{gettext('Social Login')}</h3>\n          <p className=\"mb-2\">{langCode == 'zh-cn' ? '': 'WeChat Work'}</p>\n          {socialConnected ?\n            <button className=\"btn btn-outline-primary\" onClick={this.confirmDisconnect}>{gettext('Disconnect')}</button> :\n            <a href={`${siteRoot}work-weixin/oauth-connect/?next=${encodeURIComponent(socialNextPage)}`} className=\"btn btn-outline-primary\">{gettext('Connect')}</a>\n          }\n        </div>\n        {this.state.isConfirmDialogOpen && (\n          <ModalPortal>\n            <ConfirmDisconnectWechat\n              formActionURL={`${siteRoot}work-weixin/oauth-disconnect/?next=${encodeURIComponent(socialNextPage)}`}\n              csrfToken={csrfToken}\n              toggle={this.toggleDialog}\n            />\n          </ModalPortal>\n        )}\n      </React.Fragment>\n    );\n  }\n}\n\nexport default SocialLogin;\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { Modal, ModalHeader, ModalBody, ModalFooter, Button } from 'reactstrap';\nimport { gettext } from '../../utils/constants';\n\nconst propTypes = {\n  formActionURL: PropTypes.string.isRequired,\n  csrfToken: PropTypes.string.isRequired,\n  toggle: PropTypes.func.isRequired\n};\n\nclass ConfirmDisconnectDingtalk extends Component {\n\n  constructor(props) {\n    super(props);\n    this.form = React.createRef();\n  }\n\n  disconnect = () => {\n    this.form.current.submit();\n  }\n\n  render() {\n    const {formActionURL, csrfToken, toggle} = this.props;\n    return (\n      <Modal centered={true} isOpen={true} toggle={toggle}>\n        <ModalHeader toggle={toggle}>{gettext('Disconnect')}</ModalHeader>\n        <ModalBody>\n          <p>{gettext('Are you sure you want to disconnect?')}</p>\n          <form ref={this.form} className=\"d-none\" method=\"post\" action={formActionURL}>\n            <input type=\"hidden\" name=\"csrfmiddlewaretoken\" value={csrfToken} />\n          </form>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={toggle}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.disconnect}>{gettext('Disconnect')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nConfirmDisconnectDingtalk.propTypes = propTypes;\n\nexport default ConfirmDisconnectDingtalk;\n","import React from 'react';\nimport { gettext, siteRoot } from '../../utils/constants';\nimport ModalPortal from '../modal-portal';\nimport ConfirmDisconnectDingtalk from '../dialog/confirm-disconnect-dingtalk';\n\nconst {\n  csrfToken,\n  langCode,\n  socialConnectedDingtalk,\n  socialNextPage\n} = window.app.pageOptions;\n\nclass SocialLoginDintalk extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isConfirmDialogOpen: false\n    };\n  }\n\n  confirmDisconnect = () => {\n    this.setState({\n      isConfirmDialogOpen: true\n    });\n  }\n\n  toggleDialog = () => {\n    this.setState({\n      isConfirmDialogOpen: !this.state.isConfirmDialogOpen\n    });\n  }\n\n  render() {\n    return (\n      <React.Fragment>\n        <div className=\"setting-item\" id=\"social-auth\">\n          <h3 className=\"setting-item-heading\">{gettext('Social Login')}</h3>\n          <p className=\"mb-2\">{langCode == 'zh-cn' ? '': 'Dingtalk'}</p>\n          {socialConnectedDingtalk ?\n            <button className=\"btn btn-outline-primary\" onClick={this.confirmDisconnect}>{gettext('Disconnect')}</button> :\n            <a href={`${siteRoot}dingtalk/connect/?next=${encodeURIComponent(socialNextPage)}`} className=\"btn btn-outline-primary\">{gettext('Connect')}</a>\n          }\n        </div>\n        {this.state.isConfirmDialogOpen && (\n          <ModalPortal>\n            <ConfirmDisconnectDingtalk\n              formActionURL={`${siteRoot}dingtalk/disconnect/?next=${encodeURIComponent(socialNextPage)}`}\n              csrfToken={csrfToken}\n              toggle={this.toggleDialog}\n            />\n          </ModalPortal>\n        )}\n      </React.Fragment>\n    );\n  }\n}\n\nexport default SocialLoginDintalk;\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { Modal, ModalHeader, ModalBody, ModalFooter, Button } from 'reactstrap';\nimport { gettext } from '../../utils/constants';\n\nconst propTypes = {\n  formActionURL: PropTypes.string.isRequired,\n  csrfToken: PropTypes.string.isRequired,\n  toggle: PropTypes.func.isRequired\n};\n\nclass ConfirmDeleteAccount extends Component {\n\n  constructor(props) {\n    super(props);\n    this.form = React.createRef();\n  }\n\n  action = () => {\n    this.form.current.submit();\n  }\n\n  render() {\n    const {formActionURL, csrfToken, toggle} = this.props;\n    return (\n      <Modal centered={true} isOpen={true} toggle={toggle}>\n        <ModalHeader toggle={toggle}>{gettext('Delete Account')}</ModalHeader>\n        <ModalBody>\n          <p>{gettext('Really want to delete your account?')}</p>\n          <form ref={this.form} className=\"d-none\" method=\"post\" action={formActionURL}>\n            <input type=\"hidden\" name=\"csrfmiddlewaretoken\" value={csrfToken} />\n          </form>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={toggle}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.action}>{gettext('Delete')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nConfirmDeleteAccount.propTypes = propTypes;\n\nexport default ConfirmDeleteAccount;\n","import React from 'react';\nimport { gettext, siteRoot } from '../../utils/constants';\nimport ModalPortal from '../modal-portal';\nimport ConfirmDeleteAccount from '../dialog/confirm-delete-account';\n\nconst {\n  csrfToken\n} = window.app.pageOptions;\n\nclass DeleteAccount extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isConfirmDialogOpen: false\n    };\n  }\n\n  confirmDelete = (e) => {\n    e.preventDefault();\n    this.setState({\n      isConfirmDialogOpen: true\n    });\n  }\n\n  toggleDialog = () => {\n    this.setState({\n      isConfirmDialogOpen: !this.state.isConfirmDialogOpen\n    });\n  }\n\n  render() {\n    return (\n      <React.Fragment>\n        <div className=\"setting-item\" id=\"del-account\">\n          <h3 className=\"setting-item-heading\">{gettext('Delete Account')}</h3>\n          <p className=\"mb-2\">{gettext('This operation will not be reverted. Please think twice!')}</p>\n          <button type=\"button\" className=\"btn btn-outline-primary\" onClick={this.confirmDelete}>{gettext('Delete')}</button>\n        </div>\n        {this.state.isConfirmDialogOpen && (\n          <ModalPortal>\n            <ConfirmDeleteAccount\n              formActionURL={`${siteRoot}profile/delete/`}\n              csrfToken={csrfToken}\n              toggle={this.toggleDialog}\n            />\n          </ModalPortal>\n        )}\n      </React.Fragment>\n    );\n  }\n}\n\nexport default DeleteAccount;\n","import React from 'react';\nimport ReactDom from 'react-dom';\nimport { navigate } from '@gatsbyjs/reach-router';\nimport { Utils } from './utils/utils';\nimport { isPro, gettext, siteRoot, mediaUrl, logoPath, logoWidth, logoHeight, siteTitle } from './utils/constants';\nimport { seafileAPI } from './utils/seafile-api';\nimport toaster from './components/toast';\nimport CommonToolbar from './components/toolbar/common-toolbar';\nimport SideNav from './components/user-settings/side-nav';\nimport UserAvatarForm from './components/user-settings/user-avatar-form';\nimport UserBasicInfoForm from './components/user-settings/user-basic-info-form';\nimport WebAPIAuthToken from './components/user-settings/web-api-auth-token';\nimport WebdavPassword from './components/user-settings/webdav-password';\nimport LanguageSetting from './components/user-settings/language-setting';\nimport ListInAddressBook from './components/user-settings/list-in-address-book';\nimport EmailNotice from './components/user-settings/email-notice';\nimport TwoFactorAuthentication from './components/user-settings/two-factor-auth';\nimport SocialLogin from './components/user-settings/social-login';\nimport SocialLoginDingtalk from './components/user-settings/social-login-dingtalk';\nimport DeleteAccount from './components/user-settings/delete-account';\n\nimport './css/toolbar.css';\nimport './css/search.css';\n\nimport './css/user-settings.css';\n\nconst {\n  canUpdatePassword, passwordOperationText,\n  enableGetAuthToken,\n  enableWebdavSecret,\n  enableAddressBook,\n  twoFactorAuthEnabled,\n  enableWechatWork,\n  enableDingtalk,\n  enableDeleteAccount\n} = window.app.pageOptions;\n\nclass Settings extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.sideNavItems = [\n      {show: true, href: '#user-basic-info', text: gettext('Profile')},\n      {show: canUpdatePassword, href: '#update-user-passwd', text: gettext('Password')},\n      {show: enableGetAuthToken, href: '#get-auth-token', text: gettext('Web API Auth Token')},\n      {show: enableWebdavSecret, href: '#update-webdav-passwd', text: gettext('WebDav Password')},\n      {show: enableAddressBook, href: '#list-in-address-book', text: gettext('Global Address Book')},\n      {show: true, href: '#lang-setting', text: gettext('Language')},\n      {show: isPro, href: '#email-notice', text: gettext('Email Notification')},\n      {show: twoFactorAuthEnabled, href: '#two-factor-auth', text: gettext('Two-Factor Authentication')},\n      {show: enableWechatWork, href: '#social-auth', text: gettext('Social Login')},\n      {show: enableDingtalk, href: '#social-auth', text: gettext('Social Login')},\n      {show: enableDeleteAccount, href: '#del-account', text: gettext('Delete Account')},\n    ];\n\n    this.state = {\n      curItemID: this.sideNavItems[0].href.substr(1)\n    };\n  }\n\n  componentDidMount() {\n    seafileAPI.getUserInfo().then((res) => {\n      this.setState({\n        userInfo: res.data\n      });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  updateUserInfo = (data) => {\n    seafileAPI.updateUserInfo(data).then((res) => {\n      this.setState({\n        userInfo: res.data\n      });\n      toaster.success(gettext('Success'));\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  onSearchedClick = (selectedItem) => {\n    if (selectedItem.is_dir === true) {\n      let url = siteRoot + 'library/' + selectedItem.repo_id + '/' + selectedItem.repo_name + selectedItem.path;\n      navigate(url, {repalce: true});\n    } else {\n      let url = siteRoot + 'lib/' + selectedItem.repo_id + '/file' + Utils.encodePath(selectedItem.path);\n      let newWindow = window.open('about:blank');\n      newWindow.location.href = url;\n    }\n  }\n\n  handleContentScroll = (e) => {\n    const scrollTop = e.target.scrollTop;\n    const scrolled = this.sideNavItems.filter((item, index) => {\n      return item.show && document.getElementById(item.href.substr(1)).offsetTop - 45 < scrollTop;\n    });\n    if (scrolled.length) {\n      this.setState({\n        curItemID: scrolled[scrolled.length -1].href.substr(1)\n      });\n    }\n  }\n\n  render() {\n    return (\n      <React.Fragment>\n        <div className=\"h-100 d-flex flex-column\">\n          <div className=\"top-header d-flex justify-content-between\">\n            <a href={siteRoot}>\n              <img src={mediaUrl + logoPath} height={logoHeight} width={logoWidth} title={siteTitle} alt=\"logo\" />\n            </a>\n            <CommonToolbar onSearchedClick={this.onSearchedClick} />\n          </div>\n          <div className=\"flex-auto d-flex o-hidden\">\n            <div className=\"side-panel o-auto\">\n              <SideNav data={this.sideNavItems} curItemID={this.state.curItemID} />\n            </div>\n            <div className=\"main-panel d-flex flex-column\">\n              <h2 className=\"heading\">{gettext('Settings')}</h2>\n              <div className=\"content position-relative\" onScroll={this.handleContentScroll}>\n                <div id=\"user-basic-info\" className=\"setting-item\">\n                  <h3 className=\"setting-item-heading\">{gettext('Profile Setting')}</h3>\n                  <UserAvatarForm  />\n                  {this.state.userInfo && <UserBasicInfoForm userInfo={this.state.userInfo} updateUserInfo={this.updateUserInfo} />}\n                </div>\n                {canUpdatePassword &&\n                <div id=\"update-user-passwd\" className=\"setting-item\">\n                  <h3 className=\"setting-item-heading\">{gettext('Password')}</h3>\n                  <a href={`${siteRoot}accounts/password/change/`} className=\"btn btn-outline-primary\">{passwordOperationText}</a>\n                </div>\n                }\n\n                {enableGetAuthToken && <WebAPIAuthToken />}\n                {enableWebdavSecret && <WebdavPassword />}\n                {enableAddressBook && this.state.userInfo &&\n                  <ListInAddressBook userInfo={this.state.userInfo} updateUserInfo={this.updateUserInfo} />}\n                <LanguageSetting />\n                {isPro && <EmailNotice />}\n                {twoFactorAuthEnabled && <TwoFactorAuthentication />}\n                {enableWechatWork && <SocialLogin />}\n                {enableDingtalk && <SocialLoginDingtalk />}\n                {enableDeleteAccount && <DeleteAccount />}\n              </div>\n            </div>\n          </div>\n        </div>\n      </React.Fragment>\n    );\n  }\n}\n\nReactDom.render(<Settings />, document.getElementById('wrapper'));\n"],"sourceRoot":""}