{"version":3,"sources":["pages/org-admin/side-panel.js","pages/org-admin/org-users-nav.js","components/select-editor/user-status-editor.js","pages/org-admin/org-user-item.js","pages/org-admin/org-users-list.js","pages/org-admin/main-panel-topbar.js","components/dialog/org-add-user-dialog.js","components/dialog/org-admin-invite-user-dialog.js","models/org-user.js","pages/org-admin/org-users-users.js","pages/org-admin/org-admin-list.js","components/dialog/org-add-admin-dialog.js","pages/org-admin/org-users-admins.js","components/org-admin-user-nav.js","components/dialog/set-org-user-name.js","components/dialog/set-org-user-contact-email.js","components/dialog/set-org-user-quota.js","pages/org-admin/org-user-profile.js","pages/org-admin/org-user-repos.js","pages/org-admin/org-user-shared-repos.js","models/org-group.js","pages/org-admin/org-groups.js","components/org-admin-group-nav.js","pages/org-admin/org-group-info.js","pages/org-admin/org-group-repos.js","pages/org-admin/org-group-members.js","models/org-admin-repo.js","pages/org-admin/org-libraries.js","pages/org-admin/org-info.js","components/dialog/view-link-dialog.js","pages/org-admin/org-links.js","pages/org-admin/org-departments.js","components/dialog/org-add-department-dialog.js","components/dialog/org-delete-department-dialog.js","components/dialog/org-set-group-quota-dialog.js","pages/org-admin/org-departments-list.js","components/dialog/org-add-member-dialog.js","components/dialog/org-delete-member-dialog.js","components/dialog/org-add-repo-dialog.js","components/dialog/org-delete-repo-dialog.js","pages/org-admin/org-department-item.js","pages/org-admin/org-logs.js","models/org-logs-file-audit.js","pages/org-admin/org-logs-file-audit.js","models/org-logs-file-update.js","components/dialog/org-logs-file-update-detail.js","pages/org-admin/org-logs-file-update.js","models/org-logs-perm-audit.js","pages/org-admin/org-logs-perm-audit.js","pages/org-admin/index.js"],"names":["SidePanel","getActiveClass","tab","props","currentTab","tabItemClick","className","this","isSidePanelClosed","onCloseSidePanel","style","gettext","to","siteRoot","onClick","React","Component","Nav","navItems","name","urlPart","text","currentItem","map","item","index","key","UserStatusEditor","translateStatus","userStatus","isTextMode","isEditIconShow","options","statusArray","currentOption","currentStatus","onOptionChanged","onStatusChanged","translateOption","UserItem","onMouseEnter","isItemFreezed","setState","showMenu","highlight","onMouseLeave","toggleDelete","email","user","toggleResetPW","toaster","success","seafileAPI","orgAdminResetOrgUserPassword","orgID","then","res","msg","replace","data","new_password","duration","catch","error","errMessage","Utils","getErrorMsg","danger","toggleRevokeAdmin","changeStatus","st","isActive","orgAdminChangeOrgUserStatus","onDropdownToggleClick","e","preventDefault","toggleOperationMenu","stopPropagation","isItemMenuShow","state","onFreezedItem","onUnfreezedItem","getQuotaTotal","formatSize","bytes","is_active","href","encodeURIComponent","isOperationMenuShow","username","quota_usage","quota_total","ctime","last_login","isOpen","toggle","tag","title","data-toggle","aria-expanded","OrgUsersList","onChangePageNum","num","page","initOrgUsersData","sortByQuotaUsage","sortIcon","sortBy","sortOrder","orgUsers","pageNext","width","MainPanelTopbar","children","isAdminPanel","AddOrgUserDialog","handleSubmit","validateInputParams","password","isAddingUser","trim","handleKeyPress","togglePasswordVisible","isPasswordVisible","passwdInput","type","passwdNewInput","generatePassword","val","Math","random","toString","substr","passwdnew","inputEmail","target","value","inputName","inputPassword","passwd","inputPasswordNew","createRef","length","password1","password2","for","id","onChange","innerRef","input","addonType","color","disabled","InviteUserDialog","copyLink","copy","invitationLink","message","moment","locale","lang","OrgUserInfo","object","contact_email","owner_contact_email","fromNow","format","OrgUsers","url","URL","location","searchParams","URLSearchParams","search","set","navigate","toggleAddOrgUser","isShowAddOrgUserDialog","toggleInviteUserDialog","isInviteUserDialogOpen","orgAdminListOrgUsers","userList","user_list","page_next","addOrgUser","orgAdminAddOrgUser","userInfo","unshift","toggleOrgUsersDelete","orgAdminDeleteOrgUser","users","filter","urlParams","window","parseInt","get","topbarChildren","topBtn","OrgAdminList","initOrgAdmin","orgAdminUsers","AddOrgAdminDialog","handleSelectChange","option","selectedOption","addOrgAdmin","userEmail","orgAdminSetOrgAdmin","onAddedOrgAdmin","ref","isMulti","placeholder","onSelectChange","toggleAddOrgAdmin","isShowAddOrgAdminDialog","toggleOrgAdminDelete","OrgAdminUserNav","urlBase","SetOrgUserName","handleInputChange","inputValue","formSubmit","submitBtnDisabled","orgAdminSetOrgUserName","newName","updateName","toggleDialog","errorMsg","formErrorMsg","centered","Fragment","SetOrgUserContactEmail","contactEmail","orgAdminSetOrgUserContactEmail","newContactEmail","updateContactEmail","SetOrgUserQuota","quota","orgAdminSetOrgUserQuota","updateQuota","initialQuota","quotaTotal","org","pageOptions","orgName","OrgUserProfile","loading","orgAdminGetOrgUserInfo","Object","assign","Content","toggleSetNameDialog","isSetNameDialogOpen","toggleSetContactEmailDialog","isSetContactEmailDialogOpen","toggleSetQuotaDialog","isSetQuotaDialogOpen","avatar_url","src","height","alt","bytesToSize","OrgUserOwnedRepos","orgAdminGetOrgUserOwnedRepos","repo_list","Item","handleMouseOver","isOpIconShown","handleMouseOut","handleDeleteIconClick","toggleDeleteRepoDialog","isDeleteRepoDialogOpen","deleteRepo","repo","orgAdminDeleteOrgRepo","repo_id","deleted","isRepoDeleted","repo_name","onMouseOver","onMouseOut","getLibIconUrl","getLibIconTitle","size","last_modified","onDeleteRepo","OrgUserSharedRepos","orgAdminGetOrgUserBesharedRepos","owner_name","OrgGroupInfo","groupName","group_name","creatorName","creator_name","creatorEmail","creator_email","creatorContactEmail","creator_contact_email","OrgGroups","initData","orgAdminListOrgGroups","orgGroups","groups","deleteGroupItem","group","orgAdminDeleteOrgGroup","GroupItem","renderGroupHref","renderGroupCreator","userInfoHref","OrgAdminGroupNav","groupID","orgAdminGetGroup","OrgGroupRepos","orgAdminListGroupRepos","libraries","shared_by","shared_by_name","OrgGroupMembers","orgAdminListGroupMembers","members","role","getRoleText","OrgAdminRepo","repoID","repoName","ownerName","ownerEmail","owner_email","file_count","encrypted","isDepartmentRepo","is_department_repo","group_id","OrgLibraries","listRepos","orgAdminListOrgRepos","orgRepos","deleteRepoItem","transferRepoItem","sortItems","sortByFileCount","sortBySize","initialSortIcon","RepoItem","toggleTransfer","renderLibIcon","iconTitle","mediaUrl","renderRepoOwnerHref","isTransferDialogShow","onTransferRepo","orgAdminTransferOrgRepo","itemName","submit","OrgInfo","storage_quota","storage_usage","member_quota","member_usage","active_members","orgAdminGetOrgInfo","orgMemberQuotaEnabled","ViewLinkDialog","copyToClipBoard","currentLinkHref","OrgLinks","listOrgLinks","orgAdminListOrgLinks","linkList","link_list","event","deleteOrgLink","token","orgAdminDeleteOrgLink","openLinkDialog","link","indexOf","serviceURL","toggleLinkDialog","isShowLinkDialog","created_time","view_count","bind","OrgDepartments","AddDepartDialog","validateName","parentGroup","parentGroupID","orgAdminAddDepartGroup","departName","onDepartChanged","response","error_msg","handleChange","newInput","focus","setSelectionRange","header","onKeyPress","DeleteDepartDialog","deleteDepart","orgAdminDeleteDepartGroup","subtitle","HTMLescape","dangerouslySetInnerHTML","__html","SetGroupQuotaDialog","setGroupQuota","test","newQuota","orgAdminSetGroupQuota","err","OrgDepartmentsList","listDepartGroups","orgAdminListDepartGroups","showDeleteDepartDialog","showSetGroupQuotaDialog","toggleAddDepartDialog","isShowAddDepartDialog","toggleCancel","newHref","created_at","AddMemberDialog","Options","refs","orgSelect","clearSelect","orgAdminAddGroupMember","failed","onMemberChanged","DeleteMemberDialog","deleteMember","member","orgAdminDeleteGroupMember","AddRepoDialog","orgAdminAddDepartmentRepo","onRepoChanged","DeleteRepoDialog","orgAdminDeleteDepartmentRepo","OrgDepartmentItem","listOrgGroupRepo","repos","listOrgMembers","orgAdminListGroupInfo","ancestorGroups","ancestor_groups","listSubDepartGroups","showDeleteMemberDialog","showDeleteRepoDialog","onSubDepartChanged","toggleItemFreezed","isFreezed","deletedMember","deletedRepo","toggleAddRepoDialog","isShowAddRepoDialog","toggleAddMemberDialog","isShowAddMemberDialog","subGroup","subGroupID","subGroupName","nextProps","ancestor","MemberItem","toggleMemberRoleMenu","showRoleMenu","onChangeUserRole","isAdmin","orgAdminSetGroupMemberRole","roles","memberLink","currentRole","onRoleChanged","iconUrl","OrgLogs","param","OrgLogsFileAuditEvent","ip","device","file_name","file_path","user_name","user_email","user_contact_email","time","OrgLogsFileAudit","orgAdminListFileAudit","eventList","log_list","userSelected","user_selected","repoSelected","repo_selected","filterUser","filterRepo","fileEvent","FileAuditItem","toggleUserDropdown","userDropdownOpen","renderUser","renderType","toggleRepoDropdown","repoDropdownOpen","renderRepo","OrgLogsFileUpdateEvent","description","repo_encrypted","repo_commit_id","FileUpdateDetailDialog","renderContentItem","items","con","i","len","renderContent","newfile","removed","renamed","modified","newdir","deldir","orgAdminGetFileUpdateDetail","commitID","date_time","concat","new","OrgLogsFileUpdate","orgAdminListFileUpdate","toggleCancelDetail","showDetails","onDetails","FileUpdateItem","renderAction","OrgLogsPermAuditEvent","from_user_name","from_user_email","from_user_contact_email","to_user_email","to_user_name","to_user_contact_email","to_group_name","to_group_id","folder_name","folder_path","permission","orgAdminListPermAudit","OrgLogsFilePermEvent","permEvent","PermAuditItem","renderFromUser","renderToUser","renderFolder","folderName","sharePerms","Org","split","path","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/orgAdmin.chunk.js","sourcesContent":["import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Link } from '@reach/router';\nimport Logo from '../../components/logo';\nimport { gettext, siteRoot } from '../../utils/constants';\n\nconst propTypes = {\n  isSidePanelClosed: PropTypes.bool.isRequired,\n  onCloseSidePanel: PropTypes.func.isRequired,\n  currentTab: PropTypes.string.isRequired,\n  tabItemClick: PropTypes.func.isRequired\n};\n\nclass SidePanel extends React.Component {\n\n  getActiveClass = (tab) => {\n    return this.props.currentTab == tab ? 'active' : '';\n  }\n\n  tabItemClick = (tab) => {\n    this.props.tabItemClick(tab);\n  }\n\n  render() {\n    return (\n      <div className={`side-panel ${this.props.isSidePanelClosed ? '' : 'left-zero'}`}>\n        <div className=\"side-panel-north\">\n          <Logo onCloseSidePanel={this.props.onCloseSidePanel}/>\n        </div>\n        <div className=\"side-panel-center\">\n          <div className=\"side-nav\">\n            <div className=\"side-nav-con\">\n              <h3 className=\"sf-heading\" style={{ 'color': '#f7941d' }}>{gettext('Admin')}</h3>\n              <ul className=\"nav nav-pills flex-column nav-container\">\n                <li className=\"nav-item\">\n                  <Link className={`nav-link ellipsis ${this.getActiveClass('orgmanage')}`} to={siteRoot + 'org/orgmanage/'} onClick={() => this.tabItemClick('orgmanage')} >\n                    <span className=\"sf2-icon-info\"></span>\n                    <span className=\"nav-text\">{gettext('Info')}</span>\n                  </Link>\n                </li>\n                <li className=\"nav-item\">\n                  <Link className={`nav-link ellipsis ${this.getActiveClass('repoadmin')}`} to={siteRoot + 'org/repoadmin/'} onClick={() => this.tabItemClick('repoadmin')} >\n                    <span className=\"sf2-icon-library\"></span>\n                    <span className=\"nav-text\">{gettext('Libraries')}</span>\n                  </Link>\n                </li>\n                <li className=\"nav-item\">\n                  <Link className={`nav-link ellipsis ${this.getActiveClass('users') || this.getActiveClass('admins')}`} to={siteRoot + 'org/useradmin/'} onClick={() => this.tabItemClick('users')} >\n                    <span className=\"sf2-icon-user\"></span>\n                    <span className=\"nav-text\">{gettext('Users')}</span>\n                  </Link>\n                </li>\n                <li className=\"nav-item\">\n                  <Link className={`nav-link ellipsis ${this.getActiveClass('groupadmin')}`} to={siteRoot + 'org/groupadmin/'} onClick={() => this.tabItemClick('groupadmin')}>\n                    <span className=\"sf2-icon-group\"></span>\n                    <span className=\"nav-text\">{gettext('Groups')}</span>\n                  </Link>\n                </li>\n                <li className=\"nav-item\">\n                  <Link className={`nav-link ellipsis ${this.getActiveClass('departmentadmin')}`} to={siteRoot + 'org/departmentadmin/'} onClick={() => this.tabItemClick('departmentadmin')} >\n                    <span className=\"sf2-icon-organization\"></span>\n                    <span className=\"nav-text\">{gettext('Departments')}</span>\n                  </Link>\n                </li>\n                <li className=\"nav-item\">\n                  <Link className={`nav-link ellipsis ${this.getActiveClass('publinkadmin')}`} to={siteRoot + 'org/publinkadmin/'} onClick={() => this.tabItemClick('publinkadmin')} >\n                    <span className=\"sf2-icon-link\"></span>\n                    <span className=\"nav-text\">{gettext('Links')}</span>\n                  </Link>\n                </li>\n                <li className=\"nav-item\">\n                  <Link className={`nav-link ellipsis ${this.getActiveClass('logadmin') || this.getActiveClass('file-update') || this.getActiveClass('perm-audit')}`} to={siteRoot + 'org/logadmin/'} onClick={() => this.tabItemClick('logadmin')} >\n                    <span className=\"sf2-icon-clock\"></span>\n                    <span className=\"nav-text\">{gettext('Logs')}</span>\n                  </Link>\n                </li>\n              </ul>\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nSidePanel.propTypes = propTypes;\n\nexport default SidePanel;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Link } from '@reach/router';\nimport { siteRoot, gettext } from '../../utils/constants';\n\nconst propTypes = {\n  currentItem: PropTypes.string.isRequired\n};\n\nclass Nav extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.navItems = [\n      {name: 'all', urlPart: 'useradmin', text: gettext('All')},\n      {name: 'admins', urlPart: 'useradmin/admins', text: gettext('Admin')}\n    ];\n  }\n\n  render() {\n    const { currentItem } = this.props;\n    return (\n      <div className=\"cur-view-path tab-nav-container\">\n        <ul className=\"nav\">\n          {this.navItems.map((item, index) => {\n            return (\n              <li className=\"nav-item\" key={index}>\n                <Link to={`${siteRoot}org/${item.urlPart}/`} className={`nav-link${currentItem == item.name ? ' active' : ''}`}>{item.text}</Link>\n              </li>\n            );\n          })}\n        </ul>\n      </div>\n    );\n  }\n}\n\nNav.propTypes = propTypes;\n\nexport default Nav;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../../utils/constants';\nimport SelectEditor from './select-editor';\n\nconst propTypes = {\n  isTextMode: PropTypes.bool.isRequired,\n  isEditIconShow: PropTypes.bool.isRequired,\n  statusArray: PropTypes.array.isRequired,\n  currentStatus: PropTypes.string.isRequired,\n  onStatusChanged: PropTypes.func.isRequired\n};\n\nclass UserStatusEditor extends React.Component {\n\n  translateStatus = (userStatus) => {\n    if (userStatus === 'active') {\n      return gettext('Active');\n    }\n\n    if (userStatus === 'inactive') {\n      return gettext('Inactive');\n    }\n  }\n\n  render() {\n    return (\n      <SelectEditor\n        isTextMode={this.props.isTextMode}\n        isEditIconShow={this.props.isEditIconShow}\n        options={this.props.statusArray}\n        currentOption={this.props.currentStatus}\n        onOptionChanged={this.props.onStatusChanged}\n        translateOption={this.translateStatus}\n      />\n    );\n  }\n\n}\n\nUserStatusEditor.propTypes = propTypes;\n\nexport default UserStatusEditor;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Dropdown, DropdownToggle, DropdownMenu, DropdownItem } from 'reactstrap';\nimport { gettext, siteRoot, orgID, username } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../../components/toast';\nimport UserStatusEditor from '../../components/select-editor/user-status-editor';\n\nconst propTypes = {\n  user: PropTypes.object,\n  currentTab: PropTypes.string,\n  toggleRevokeAdmin: PropTypes.func,\n  isItemFreezed: PropTypes.bool.isRequired,\n  toggleDelete: PropTypes.func.isRequired,\n  onFreezedItem: PropTypes.func.isRequired,\n  onUnfreezedItem: PropTypes.func.isRequired,\n};\n\nclass UserItem extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      highlight: false,\n      showMenu: false,\n      currentStatus: this.props.user.is_active ? 'active' : 'inactive',\n      isItemMenuShow: false\n    };\n\n    this.statusArray = ['active', 'inactive'];\n  }\n\n  onMouseEnter = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        showMenu: true,\n        highlight: true,\n      });\n    }\n  }\n\n  onMouseLeave = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        showMenu: false,\n        highlight: false\n      });\n    }\n  }\n\n  toggleDelete = () => {\n    const email = this.props.user.email;\n    this.props.toggleDelete(email);\n  }\n\n  toggleResetPW = () => {\n    const { email, name } = this.props.user;\n    toaster.success(gettext('Resetting user\\'s password, please wait for a moment.'));\n    seafileAPI.orgAdminResetOrgUserPassword(orgID, email).then(res => {\n      let msg;\n      msg = gettext('Successfully reset password to %(passwd)s for user %(user)s.');\n      msg = msg.replace('%(passwd)s', res.data.new_password);\n      msg = msg.replace('%(user)s', name);\n      toaster.success(msg, {\n        duration: 15\n      });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  toggleRevokeAdmin = () => {\n    const email = this.props.user.email;\n    this.props.toggleRevokeAdmin(email);\n  }\n\n  changeStatus = (st) => {\n    let isActive;\n    if (st == 'active') {\n      isActive = 'true';\n    } else {\n      isActive = 'false';\n    }\n\n    seafileAPI.orgAdminChangeOrgUserStatus(orgID, this.props.user.email, isActive).then(res => {\n      this.setState({\n        currentStatus: isActive == 'true' ? 'active' : 'inactive',\n        highlight: false,\n        showMenu: false,\n      });\n      toaster.success(gettext('Edit succeeded.'));\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      if (errMessage === gettext('Error')) {\n        errMessage = gettext('Edit failed.');\n      }\n      toaster.danger(errMessage);\n    });\n  }\n\n  onDropdownToggleClick = (e) => {\n    e.preventDefault();\n    this.toggleOperationMenu(e);\n  }\n\n  toggleOperationMenu = (e) => {\n    e.stopPropagation();\n    this.setState(\n      {isItemMenuShow: !this.state.isItemMenuShow }, () => {\n        if (this.state.isItemMenuShow) {\n          this.props.onFreezedItem();\n        } else {\n          this.setState({\n            highlight: false,\n            showMenu: false,\n          });\n          this.props.onUnfreezedItem();\n        }\n      }\n    );\n  }\n\n  getQuotaTotal = (data) => {\n    switch (data) {\n      case -1: // failed to fetch quota\n        return gettext('Failed');\n      case -2:\n        return '--';\n      default: // data > 0\n        return Utils.formatSize({bytes: data});\n    }\n  }\n\n  render() {\n    let { user, currentTab } = this.props;\n    let href = siteRoot + 'org/useradmin/info/' + encodeURIComponent(user.email) + '/';\n    let isOperationMenuShow = (user.email !== username)  && this.state.showMenu;\n    let isEditIconShow = isOperationMenuShow;\n    return (\n      <tr className={this.state.highlight ? 'tr-highlight' : ''} onMouseEnter={this.onMouseEnter} onMouseLeave={this.onMouseLeave}>\n        <td>\n          <a href={href}>{user.name}</a>\n        </td>\n        <td>\n          <UserStatusEditor\n            isTextMode={true}\n            isEditIconShow={isEditIconShow}\n            currentStatus={this.state.currentStatus}\n            statusArray={this.statusArray}\n            onStatusChanged={this.changeStatus}\n          />\n        </td>\n        <td>{`${Utils.formatSize({bytes: user.quota_usage})} / ${this.getQuotaTotal(user.quota_total)}`}</td>\n        <td>\n          {user.ctime} /\n          <br />\n          {user.last_login ? user.last_login : '--'}\n        </td>\n        <td className=\"text-center cursor-pointer\">\n          {isOperationMenuShow && (\n            <Dropdown isOpen={this.state.isItemMenuShow} toggle={this.toggleOperationMenu}>\n              <DropdownToggle\n                tag=\"a\"\n                className=\"attr-action-icon fas fa-ellipsis-v\"\n                title={gettext('More Operations')}\n                data-toggle=\"dropdown\"\n                aria-expanded={this.state.isItemMenuShow}\n                onClick={this.onDropdownToggleClick}\n              />\n              <DropdownMenu>\n                <DropdownItem onClick={this.toggleDelete}>{gettext('Delete')}</DropdownItem>\n                <DropdownItem onClick={this.toggleResetPW}>{gettext('ResetPwd')}</DropdownItem>\n                {currentTab == 'admins' && <DropdownItem onClick={this.toggleRevokeAdmin}>{gettext('Revoke Admin')}</DropdownItem>}\n              </DropdownMenu>\n            </Dropdown>\n          )}\n        </td>\n      </tr>\n    );\n  }\n}\n\nUserItem.propTypes = propTypes;\n\nexport default UserItem;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../../utils/constants';\nimport UserItem from './org-user-item';\n\nconst propTypes = {\n  initOrgUsersData: PropTypes.func.isRequired,\n  toggleDelete: PropTypes.func.isRequired,\n  orgUsers: PropTypes.array.isRequired,\n  page: PropTypes.number.isRequired,\n  pageNext: PropTypes.bool.isRequired,\n};\n\nclass OrgUsersList extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isItemFreezed: false\n    };\n  }\n\n  onFreezedItem = () => {\n    this.setState({isItemFreezed: true});\n  }\n\n  onUnfreezedItem = () => {\n    this.setState({isItemFreezed: false});\n  }\n\n  onChangePageNum = (e, num) => {\n    e.preventDefault();\n    let page = this.props.page;\n\n    if (num == 1) {\n      page = page + 1;\n    } else {\n      page = page - 1;\n    }\n\n    this.props.initOrgUsersData(page);\n  }\n\n  sortByQuotaUsage = (e) => {\n    e.preventDefault();\n    this.props.sortByQuotaUsage();\n  }\n\n  render() {\n    const { sortBy, sortOrder } = this.props;\n    let sortIcon;\n    if (sortBy == '') {\n      // initial sort icon\n      sortIcon = <span className=\"fas fa-sort\"></span>;\n    } else {\n      sortIcon = <span className={`fas ${sortOrder == 'asc' ? 'fa-caret-up' : 'fa-caret-down'}`}></span>;\n    }\n    let { orgUsers, page, pageNext } = this.props;\n    return (\n      <div className=\"cur-view-content\">\n        <table>\n          <thead>\n            <tr>\n              <th width=\"30%\">{gettext('Name')}</th>\n              <th width=\"15%\">{gettext('Status')}</th>\n              <th width=\"20%\">\n                <a className=\"d-inline-block table-sort-op\" href=\"#\" onClick={this.sortByQuotaUsage}>{gettext('Space Used')} {sortIcon}</a> / {gettext('Quota')}\n              </th>\n              <th width=\"25%\">{gettext('Created At')} / {gettext('Last Login')}</th>\n              <th width=\"10%\">{/*Operations*/}</th>\n            </tr>\n          </thead>\n          <tbody>\n            {orgUsers.map((item, index) => {\n              return (\n                <UserItem\n                  key={index}\n                  user={item}\n                  currentTab=\"users\"\n                  isItemFreezed={this.state.isItemFreezed}\n                  toggleDelete={this.props.toggleDelete}\n                  onFreezedItem={this.onFreezedItem}\n                  onUnfreezedItem={this.onUnfreezedItem}\n                />\n              );})}\n          </tbody>\n        </table>\n        <div className=\"paginator\">\n          {page !=1 && <a href=\"#\" onClick={(e) => this.onChangePageNum(e, -1)}>{gettext('Previous')}</a>}\n          {(page != 1 && pageNext) && <span> | </span>}\n          {pageNext && <a href=\"#\" onClick={(e) => this.onChangePageNum(e, 1)}>{gettext('Next')}</a>}\n        </div>\n      </div>\n    );\n  }\n}\n\nOrgUsersList.propTypes = propTypes;\n\nexport default OrgUsersList;\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport Account from '../../components/common/account';\n\nconst propTypes = {\n  children: PropTypes.object,\n};\n\nclass MainPanelTopbar extends Component {\n\n  render() {\n    return (\n      <div className={`main-panel-north ${this.props.children ? 'border-left-show' : ''}`}>\n        <div className=\"cur-view-toolbar\">\n          <span className=\"sf2-icon-menu side-nav-toggle hidden-md-up d-md-none\" title=\"Side Nav Menu\"></span>\n          <div className=\"operation\">\n            {this.props.children}\n          </div>\n        </div>\n        <div className=\"common-toolbar\">\n          <Account isAdminPanel={true}/>\n        </div>\n      </div>\n    );\n  }\n}\n\nMainPanelTopbar.propTypes = propTypes;\n\nexport default MainPanelTopbar;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Modal, Input, ModalHeader, ModalBody, ModalFooter, Label, Form, InputGroup, InputGroupAddon, FormGroup } from 'reactstrap';\nimport { gettext } from '../../utils/constants';\n\nconst propTypes = {\n  toggle: PropTypes.func.isRequired,\n  handleSubmit: PropTypes.func.isRequired,\n};\n\nclass AddOrgUserDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isPasswordVisible: true,\n      email: '',\n      name: '',\n      password: '',\n      passwdnew: '',\n      errMessage: '',\n      isAddingUser: false,\n    };\n    this.passwdInput = React.createRef();\n    this.passwdNewInput = React.createRef();\n  }\n\n  handleSubmit = () => {\n    let isValid = this.validateInputParams();\n    if (isValid) {\n      let { email, name, password } = this.state;\n      this.setState({isAddingUser: true});\n      this.props.handleSubmit(email, name.trim(), password);\n    }\n  }\n\n  handleKeyPress = (e) => {\n    e.preventDefault();\n    if (e.key == 'Enter') {\n      this.handleSubmit(e);\n    }\n  };\n\n  togglePasswordVisible = () => {\n    this.setState({isPasswordVisible: !this.state.isPasswordVisible}, () => {\n      if (this.state.isPasswordVisible) {\n        this.passwdInput.type = 'password';\n        this.passwdNewInput.type = 'password';\n      } else {\n        this.passwdInput.type = 'text';\n        this.passwdNewInput.type = 'text';\n      }\n    });\n  }\n\n  generatePassword = () => {\n    let val = Math.random().toString(36).substr(5);\n    this.setState({\n      password: val,\n      passwdnew: val,\n      isPasswordVisible: false\n    }, () => {\n      this.passwdInput.type = 'text';\n      this.passwdNewInput.type = 'text';\n    });\n  }\n\n  inputEmail = (e) => {\n    let email = e.target.value.trim();\n    this.setState({email: email});\n  }\n\n  inputName = (e) => {\n    let name = e.target.value;\n    this.setState({name: name});\n  }\n\n  inputPassword = (e) => {\n    let passwd = e.target.value.trim();\n    this.setState({password: passwd}, () => {\n      if (this.state.isPasswordVisible) {\n        this.passwdInput.type = 'password';\n        this.passwdNewInput.type = 'password';\n      }\n    });\n  }\n\n  inputPasswordNew = (e) => {\n    let passwd = e.target.value.trim();\n    this.setState({passwdnew: passwd}, () => {\n      if (this.state.isPasswordVisible) {\n        this.passwdInput.type = 'password';\n        this.passwdNewInput.type = 'password';\n      }\n    });\n  }\n\n  toggle = () => {\n    this.props.toggle();\n  }\n\n  validateInputParams() {\n    let errMessage;\n    let email = this.state.email;\n    if (!email.length) {\n      errMessage = gettext('email is required');\n      this.setState({errMessage: errMessage});\n      return false;\n    }\n    let name = this.state.name.trim();\n    if (!name.length) {\n      errMessage = gettext('Name is required');\n      this.setState({errMessage: errMessage});\n      return false;\n    }\n\n    let password1 = this.state.password;\n    let password2 = this.state.passwdnew;\n    if (!password1.length) {\n      errMessage = gettext('Please enter password');\n      this.setState({errMessage: errMessage});\n      return false;\n    }\n    if (!password2.length) {\n      errMessage = gettext('Please enter the password again');\n      this.setState({errMessage: errMessage});\n      return false;\n    }\n    if (password1 !== password2) {\n      errMessage = gettext('Passwords don\\'t match');\n      this.setState({errMessage: errMessage});\n      return false;\n    }\n    return true;\n  }\n\n  render() {\n    return (\n      <Modal isOpen={true} toggle={this.toggle}>\n        <ModalHeader toggle={this.toggle}>{gettext('Add User')}</ModalHeader>\n        <ModalBody>\n          <Form>\n            <FormGroup>\n              <Label for=\"userEmail\">{gettext('Email')}</Label>\n              <Input id=\"userEmail\"  value={this.state.email || ''} onChange={this.inputEmail} />\n            </FormGroup>\n            <FormGroup>\n              <Label for=\"userName\">{gettext('Name')}</Label>\n              <Input id=\"userName\" value={this.state.name || ''} onChange={this.inputName} />\n            </FormGroup>\n            <FormGroup>\n              <Label for=\"userPwd\">{gettext('Password')}</Label>\n              <InputGroup className=\"passwd\">\n                <Input id=\"userPwd\" innerRef={input => {this.passwdInput = input;}} value={this.state.password || ''} onChange={this.inputPassword} />\n                <InputGroupAddon addonType=\"append\">\n                  <Button onClick={this.togglePasswordVisible}><i className={`link-operation-icon fas ${this.state.isPasswordVisible ? 'fa-eye-slash' : 'fa-eye'}`}></i></Button>\n                  <Button onClick={this.generatePassword}><i className=\"link-operation-icon fas fa-magic\"></i></Button>\n                </InputGroupAddon>\n              </InputGroup>\n            </FormGroup>\n            <FormGroup>\n              <Label for=\"userPwdNew\">{gettext('Confirm Password')}</Label>\n              <Input id=\"userPwdNew\" innerRef={input => {this.passwdNewInput = input;}}  className=\"passwd\"   value={this.state.passwdnew || ''} onChange={this.inputPasswordNew} />\n            </FormGroup>\n          </Form>\n          {this.state.errMessage && <Label className=\"err-message\">{this.state.errMessage}</Label>}\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"primary\" disabled={this.state.isAddingUser} onClick={this.handleSubmit} className={this.state.isAddingUser ? 'btn-loading' : ''}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nAddOrgUserDialog.propTypes = propTypes;\n\nexport default AddOrgUserDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter } from 'reactstrap';\nimport { gettext } from '../../utils/constants';\nimport toaster from '../toast';\nimport copy from '../copy-to-clipboard';\n\nconst propTypes = {\n  toggle: PropTypes.func.isRequired,\n  invitationLink: PropTypes.string.isRequired\n};\n\nclass InviteUserDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  copyLink = () => {\n    copy(this.props.invitationLink);\n    this.props.toggle();\n    const message = gettext('Internal link has been copied to clipboard');\n    toaster.success(message), {\n      duration: 2\n    };\n  }\n\n  render() {\n    return (\n      <Modal isOpen={true}>\n        <ModalHeader toggle={this.props.toggle}>{gettext('Invite user')}</ModalHeader>\n        <ModalBody>\n          <p>{gettext('Send the invitation link to the others, and they will be able to join the organization via scanning the QR code.')}</p>\n          <p>{this.props.invitationLink}</p>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"primary\" onClick={this.copyLink}>{gettext('Copy')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nInviteUserDialog.propTypes = propTypes;\n\nexport default InviteUserDialog;\n","import { Utils } from '../utils/utils';\nimport { lang } from '../utils/constants';\nimport moment from 'moment';\n\nmoment.locale(lang);\n\nclass OrgUserInfo {\n  constructor(object) {\n    this.id = object.id;\n    this.name = object.name;\n    this.email = object.email;\n    this.contact_email = object.owner_contact_email;\n    this.is_active = object.is_active;\n    this.quota_usage = object.quota_usage;\n    this.quota_total = object.quota_total;\n    this.last_login = object.last_login ? moment(object.last_login).fromNow() : '--';\n    this.ctime = moment(object.ctime).format('YYYY-MM-DD HH:mm:ss');\n  }\n}\n\nexport default OrgUserInfo;\n","import React, { Component, Fragment } from 'react';\nimport { navigate } from '@reach/router';\nimport Nav from './org-users-nav';\nimport OrgUsersList from './org-users-list';\nimport MainPanelTopbar from './main-panel-topbar';\nimport ModalPortal from '../../components/modal-portal';\nimport AddOrgUserDialog from '../../components/dialog/org-add-user-dialog';\nimport InviteUserDialog from '../../components/dialog/org-admin-invite-user-dialog';\nimport toaster from '../../components/toast';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport OrgUserInfo from '../../models/org-user';\nimport { gettext, invitationLink, orgID } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\n\nclass OrgUsers extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      orgUsers: [],\n      page: 1,\n      pageNext: false,\n      sortBy: '',\n      sortOrder: 'asc',\n      isShowAddOrgUserDialog: false,\n      isInviteUserDialogOpen: false\n    };\n  }\n\n  componentDidMount() {\n    let urlParams = (new URL(window.location)).searchParams;\n    const { page, sortBy, sortOrder } = this.state;\n    this.setState({\n      /*\n        perPage: parseInt(urlParams.get('per_page') || perPage),\n        currentPage: parseInt(urlParams.get('page') || currentPage),\n        */\n      page: parseInt(urlParams.get('page') || page),\n      sortBy: urlParams.get('order_by') || sortBy,\n      sortOrder: urlParams.get('direction') || sortOrder\n    }, () => {\n      this.initOrgUsersData(this.state.page);\n    });\n  }\n\n  sortByQuotaUsage = () => {\n    this.setState({\n      sortBy: 'quota_usage',\n      sortOrder: this.state.sortOrder == 'asc' ? 'desc' : 'asc',\n      page: 1\n    }, () => {\n      let url = new URL(location.href);\n      let searchParams = new URLSearchParams(url.search);\n      const { page, sortBy, sortOrder } = this.state;\n      searchParams.set('page', page);\n      searchParams.set('order_by', sortBy);\n      searchParams.set('direction', sortOrder);\n      url.search = searchParams.toString();\n      navigate(url.toString());\n      this.initOrgUsersData(page);\n    });\n  }\n\n  toggleAddOrgUser = () => {\n    this.setState({isShowAddOrgUserDialog: !this.state.isShowAddOrgUserDialog});\n  }\n\n  toggleInviteUserDialog = () => {\n    this.setState({isInviteUserDialogOpen: !this.state.isInviteUserDialogOpen});\n  }\n\n  initOrgUsersData = (page) => {\n    const { sortBy, sortOrder } = this.state;\n    seafileAPI.orgAdminListOrgUsers(orgID, '', page, sortBy, sortOrder).then(res => {\n      let userList = res.data.user_list.map(item => {\n        return new OrgUserInfo(item);\n      });\n      this.setState({\n        orgUsers: userList,\n        pageNext: res.data.page_next,\n        page: res.data.page,\n      });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  addOrgUser = (email, name, password) => {\n    seafileAPI.orgAdminAddOrgUser(orgID, email, name, password).then(res => {\n      let userInfo = new OrgUserInfo(res.data);\n      this.state.orgUsers.unshift(userInfo);\n      this.setState({\n        orgUsers: this.state.orgUsers\n      });\n      this.toggleAddOrgUser();\n      let msg = gettext('successfully added user %s.');\n      msg = msg.replace('%s', email);\n      toaster.success(msg);\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n      this.toggleAddOrgUser();\n    });\n  }\n\n  toggleOrgUsersDelete = (email) => {\n    seafileAPI.orgAdminDeleteOrgUser(orgID, email).then(res => {\n      let users = this.state.orgUsers.filter(item => item.email != email);\n      this.setState({orgUsers: users});\n      let msg = gettext('Successfully deleted %s');\n      msg = msg.replace('%s', email);\n      toaster.success(msg);\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  render() {\n    const topBtn = 'btn btn-secondary operation-item';\n    let topbarChildren;\n    topbarChildren = (\n      <Fragment>\n        <button className={topBtn} title={gettext('Add user')} onClick={this.toggleAddOrgUser}>\n          <i className=\"fas fa-plus-square text-secondary mr-1\"></i>{gettext('Add user')}</button>\n        {invitationLink &&\n        <button className={topBtn} title={gettext('Invite user')} onClick={this.toggleInviteUserDialog}>\n          <i className=\"fas fa-plus-square text-secondary mr-1\"></i>{gettext('Invite user')}</button>\n        }\n        {this.state.isShowAddOrgUserDialog &&\n        <ModalPortal>\n          <AddOrgUserDialog handleSubmit={this.addOrgUser} toggle={this.toggleAddOrgUser}/>\n        </ModalPortal>\n        }\n        {this.state.isInviteUserDialogOpen &&\n        <ModalPortal>\n          <InviteUserDialog invitationLink={invitationLink} toggle={this.toggleInviteUserDialog}/>\n        </ModalPortal>\n        }\n      </Fragment>\n    );\n\n    return (\n      <Fragment>\n        <MainPanelTopbar children={topbarChildren}/>\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <Nav currentItem=\"all\" />\n            <OrgUsersList\n              initOrgUsersData={this.initOrgUsersData}\n              toggleDelete={this.toggleOrgUsersDelete}\n              orgUsers={this.state.orgUsers}\n              page={this.state.page}\n              pageNext={this.state.pageNext}\n              sortBy={this.state.sortBy}\n              sortOrder={this.state.sortOrder}\n              sortByQuotaUsage={this.sortByQuotaUsage}\n            />\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nexport default OrgUsers;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../../utils/constants';\nimport UserItem from './org-user-item';\n\nimport '../../css/org-admin-paginator.css';\n\nconst propTypes = {\n  currentTab: PropTypes.string.isRequired,\n  toggleDelete: PropTypes.func.isRequired,\n  toggleRevokeAdmin: PropTypes.func.isRequired,\n  orgAdminUsers: PropTypes.array.isRequired,\n  initOrgAdmin: PropTypes.func.isRequired\n};\n\nclass OrgAdminList extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isItemFreezed: false\n    };\n  }\n\n  componentDidMount() {\n    this.props.initOrgAdmin();\n  }\n\n  onFreezedItem = () => {\n    this.setState({isItemFreezed: true});\n  }\n\n  onUnfreezedItem = () => {\n    this.setState({isItemFreezed: false});\n  }\n\n  render() {\n    let orgAdminUsers = this.props.orgAdminUsers;\n\n    return (\n      <div className=\"cur-view-content\">\n        <table>\n          <thead>\n            <tr>\n              <th width=\"30%\">{gettext('Name')}</th>\n              <th width=\"15%\">{gettext('Status')}</th>\n              <th width=\"20%\">{gettext('Space Used')} / {gettext('Quota')}</th>\n              <th width=\"25%\">{gettext('Created At')} / {gettext('Last Login')}</th>\n              <th width=\"10%\">{/*Operations*/}</th>\n            </tr>\n          </thead>\n          <tbody>\n            {orgAdminUsers.map(item => {\n              return (\n                <UserItem\n                  key={item.index}\n                  user={item}\n                  currentTab=\"admins\"\n                  isItemFreezed={this.state.isItemFreezed}\n                  toggleDelete={this.props.toggleDelete}\n                  toggleRevokeAdmin={this.props.toggleRevokeAdmin}\n                  onFreezedItem={this.onFreezedItem}\n                  onUnfreezedItem={this.onUnfreezedItem}\n                />\n              );\n            })}\n          </tbody>\n        </table>\n      </div>\n    );\n  }\n}\n\nOrgAdminList.propTypes = propTypes;\n\nexport default OrgAdminList;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter, Alert } from 'reactstrap';\nimport { gettext, orgID } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../toast';\nimport UserSelect from '../user-select';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport OrgUserInfo from '../../models/org-user';\n\nconst propTypes = {\n  toggle: PropTypes.func.isRequired,\n  onAddedOrgAdmin: PropTypes.func.isRequired,\n};\n\nclass AddOrgAdminDialog extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      selectedOption: null,\n      errMessage: '',\n    };\n    this.options = [];\n  }\n\n  handleSelectChange = (option) => {\n    this.setState({\n      selectedOption: option,\n      errMessage: ''\n    });\n    this.options = [];\n  }\n\n  addOrgAdmin = () => {\n    if (!this.state.selectedOption) return;\n    const userEmail = this.state.selectedOption.email;\n    seafileAPI.orgAdminSetOrgAdmin(orgID, userEmail, true).then(res => {\n      let userInfo = new OrgUserInfo(res.data);\n      this.props.onAddedOrgAdmin(userInfo);\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  toggle = () => {\n    this.props.toggle();\n  }\n\n  render() {\n    return (\n      <Modal isOpen={true} toggle={this.toggle}>\n        <ModalHeader toggle={this.toggle}>{gettext('Add Admins')}</ModalHeader>\n        <ModalBody>\n          <UserSelect\n            ref=\"userSelect\"\n            isMulti={false}\n            className=\"reviewer-select\"\n            placeholder={gettext('Select a user as admin...')}\n            onSelectChange={this.handleSelectChange}\n          />\n          {this.state.errMessage && <Alert color=\"danger\" className=\"mt-2\">{this.state.errMessage}</Alert>}\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.toggle}>{gettext('Close')}</Button>\n          <Button color=\"primary\" onClick={this.addOrgAdmin}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nAddOrgAdminDialog.propTypes = propTypes;\n\nexport default AddOrgAdminDialog;\n","import React, { Component, Fragment } from 'react';\nimport Nav from './org-users-nav';\nimport OrgAdminList from './org-admin-list';\nimport MainPanelTopbar from './main-panel-topbar';\nimport AddOrgAdminDialog from '../../components/dialog/org-add-admin-dialog';\nimport ModalPortal from '../../components/modal-portal';\nimport toaster from '../../components/toast';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport OrgUserInfo from '../../models/org-user';\nimport { gettext, orgID } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\n\nclass OrgUsers extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      orgAdminUsers: [],\n      isShowAddOrgAdminDialog: false\n    };\n  }\n\n  toggleAddOrgAdmin = () => {\n    this.setState({isShowAddOrgAdminDialog: !this.state.isShowAddOrgAdminDialog});\n  }\n\n  initOrgAdmin = () => {\n    seafileAPI.orgAdminListOrgUsers(orgID, true).then(res => {\n      let userList = res.data.user_list.map(item => {\n        return new OrgUserInfo(item);\n      });\n      this.setState({orgAdminUsers: userList});\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  toggleOrgAdminDelete = (email) => {\n    seafileAPI.orgAdminDeleteOrgUser(orgID, email).then(res => {\n      this.setState({\n        orgAdminUsers: this.state.orgAdminUsers.filter(item => item.email != email)\n      });\n      let msg = gettext('Successfully deleted %s');\n      msg = msg.replace('%s', email);\n      toaster.success(msg);\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  toggleRevokeAdmin = (email) => {\n    seafileAPI.orgAdminSetOrgAdmin(orgID, email, false).then(res => {\n      this.setState({\n        orgAdminUsers: this.state.orgAdminUsers.filter(item => item.email != email)\n      });\n      let msg = gettext('Successfully revoke the admin permission of %s');\n      msg = msg.replace('%s', res.data.name);\n      toaster.success(msg);\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  onAddedOrgAdmin = (userInfo) => {\n    this.state.orgAdminUsers.unshift(userInfo);\n    this.setState({\n      orgAdminUsers: this.state.orgAdminUsers\n    });\n    let msg = gettext('Successfully set %s as admin.');\n    msg = msg.replace('%s', userInfo.email);\n    toaster.success(msg);\n    this.toggleAddOrgAdmin();\n  }\n\n  render() {\n    const topBtn = 'btn btn-secondary operation-item';\n    let topbarChildren;\n    topbarChildren = (\n      <Fragment>\n        <button className={topBtn} title={gettext('Add admin')} onClick={this.toggleAddOrgAdmin}>\n          <i className=\"fas fa-plus-square text-secondary mr-1\"></i>{gettext('Add admin')}\n        </button>\n        {this.state.isShowAddOrgAdminDialog &&\n        <ModalPortal>\n          <AddOrgAdminDialog toggle={this.toggleAddOrgAdmin} onAddedOrgAdmin={this.onAddedOrgAdmin}/>\n        </ModalPortal>\n        }\n      </Fragment>\n    );\n\n    return (\n      <Fragment>\n        <MainPanelTopbar children={topbarChildren}/>\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <Nav currentItem=\"admins\" />\n            <OrgAdminList\n              currentTab=\"admins\"\n              toggleDelete={this.toggleOrgAdminDelete}\n              toggleRevokeAdmin={this.toggleRevokeAdmin}\n              orgAdminUsers={this.state.orgAdminUsers}\n              initOrgAdmin={this.initOrgAdmin}\n            />\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nexport default OrgUsers;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Link } from '@reach/router';\nimport { siteRoot, gettext } from '../utils/constants';\n\nconst propTypes = {\n  email: PropTypes.string.isRequired,\n  currentItem: PropTypes.string.isRequired\n};\n\nclass OrgAdminUserNav extends React.Component {\n\n  render() {\n    const { email, currentItem } = this.props;\n    const urlBase = `${siteRoot}org/useradmin/info/${encodeURIComponent(email)}/`;\n    return (\n      <div className=\"cur-view-path org-admin-user-nav\">\n        <ul className=\"nav\">\n          <li className=\"nav-item\">\n            <Link to={urlBase} className={`nav-link${currentItem == 'profile' ? ' active' : ''}`}>{gettext('Profile')}</Link>\n          </li>\n          <li className=\"nav-item\">\n            <Link to={`${urlBase}repos/`} className={`nav-link${currentItem == 'owned-repos' ? ' active' : ''}`}>{gettext('Owned Libraries')}</Link>\n          </li>\n          <li className=\"nav-item\">\n            <Link to={`${urlBase}shared-repos/`} className={`nav-link${currentItem == 'shared-repos' ? ' active' : ''}`}>{gettext('Shared Libraries')}</Link>\n          </li>\n        </ul>\n      </div>\n    );\n  }\n}\n\nOrgAdminUserNav.propTypes = propTypes;\n\nexport default OrgAdminUserNav;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Modal, ModalHeader, ModalBody, ModalFooter } from 'reactstrap';\nimport { gettext } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\n\nconst propTypes = {\n  orgID: PropTypes.string.isRequired,\n  email: PropTypes.string.isRequired,\n  name: PropTypes.string.isRequired,\n  updateName: PropTypes.func.isRequired,\n  toggleDialog: PropTypes.func.isRequired\n};\n\nclass SetOrgUserName extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      inputValue: this.props.name,\n      submitBtnDisabled: false\n    };\n  }\n\n  handleInputChange = (e) => {\n    this.setState({\n      inputValue: e.target.value\n    });\n  }\n\n  formSubmit = () => {\n    const { orgID, email } = this.props;\n    const name = this.state.inputValue.trim();\n\n    this.setState({\n      submitBtnDisabled: true\n    });\n\n    // when name is '', api returns the previous name\n    // but newName needs to be ''\n    seafileAPI.orgAdminSetOrgUserName(orgID, email, name).then((res) => {\n      const newName = name ? res.data.name : '';\n      this.props.updateName(newName);\n      this.props.toggleDialog();\n    }).catch((error) => {\n      let errorMsg = Utils.getErrorMsg(error);\n      this.setState({\n        formErrorMsg: errorMsg,\n        submitBtnDisabled: false\n      });\n    });\n  }\n\n  render() {\n    const { inputValue, formErrorMsg, submitBtnDisabled } = this.state;\n    return (\n      <Modal isOpen={true} centered={true} toggle={this.props.toggleDialog}>\n        <ModalHeader toggle={this.props.toggleDialog}>{gettext('Set user name')}</ModalHeader>\n        <ModalBody>\n          <React.Fragment>\n            <input type=\"text\" className=\"form-control\" value={inputValue} onChange={this.handleInputChange} />\n            {formErrorMsg && <p className=\"error m-0 mt-2\">{formErrorMsg}</p>}\n          </React.Fragment>\n        </ModalBody>\n        <ModalFooter>\n          <button className=\"btn btn-secondary\" onClick={this.props.toggleDialog}>{gettext('Cancel')}</button>\n          <button className=\"btn btn-primary\" disabled={submitBtnDisabled} onClick={this.formSubmit}>{gettext('Submit')}</button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nSetOrgUserName.propTypes = propTypes;\n\nexport default SetOrgUserName;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Modal, ModalHeader, ModalBody, ModalFooter } from 'reactstrap';\nimport { gettext } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\n\nconst propTypes = {\n  orgID: PropTypes.string.isRequired,\n  email: PropTypes.string.isRequired,\n  contactEmail: PropTypes.string.isRequired,\n  updateContactEmail: PropTypes.func.isRequired,\n  toggleDialog: PropTypes.func.isRequired\n};\n\nclass SetOrgUserContactEmail extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      inputValue: this.props.contactEmail,\n      submitBtnDisabled: false\n    };\n  }\n\n  handleInputChange = (e) => {\n    this.setState({\n      inputValue: e.target.value\n    });\n  }\n\n  formSubmit = () => {\n    const { orgID, email } = this.props;\n    const contactEmail = this.state.inputValue.trim();\n\n    this.setState({\n      submitBtnDisabled: true\n    });\n\n    seafileAPI.orgAdminSetOrgUserContactEmail(orgID, email, contactEmail).then((res) => {\n      const newContactEmail = contactEmail ? res.data.contact_email : '';\n      this.props.updateContactEmail(newContactEmail);\n      this.props.toggleDialog();\n    }).catch((error) => {\n      let errorMsg = Utils.getErrorMsg(error);\n      this.setState({\n        formErrorMsg: errorMsg,\n        submitBtnDisabled: false\n      });\n    });\n  }\n\n  render() {\n    const { inputValue, formErrorMsg, submitBtnDisabled } = this.state;\n    return (\n      <Modal isOpen={true} centered={true} toggle={this.props.toggleDialog}>\n        <ModalHeader toggle={this.props.toggleDialog}>{gettext('Set user contact email')}</ModalHeader>\n        <ModalBody>\n          <React.Fragment>\n            <input type=\"text\" className=\"form-control\" value={inputValue} onChange={this.handleInputChange} />\n            {formErrorMsg && <p className=\"error m-0 mt-2\">{formErrorMsg}</p>}\n          </React.Fragment>\n        </ModalBody>\n        <ModalFooter>\n          <button className=\"btn btn-secondary\" onClick={this.props.toggleDialog}>{gettext('Cancel')}</button>\n          <button className=\"btn btn-primary\" disabled={submitBtnDisabled} onClick={this.formSubmit}>{gettext('Submit')}</button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nSetOrgUserContactEmail.propTypes = propTypes;\n\nexport default SetOrgUserContactEmail;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Modal, ModalHeader, ModalBody, ModalFooter, InputGroup, InputGroupAddon, InputGroupText } from 'reactstrap';\nimport { gettext } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\n\nconst propTypes = {\n  orgID: PropTypes.string.isRequired,\n  email: PropTypes.string.isRequired,\n  quotaTotal: PropTypes.string.isRequired,\n  updateQuota: PropTypes.func.isRequired,\n  toggleDialog: PropTypes.func.isRequired\n};\n\nclass SetOrgUserQuota extends React.Component {\n\n  constructor(props) {\n    super(props);\n    const initialQuota = this.props.quotaTotal < 0 ? '' :\n      this.props.quotaTotal / (1000 * 1000);\n    this.state = {\n      inputValue: initialQuota,\n      submitBtnDisabled: false\n    };\n  }\n\n  handleInputChange = (e) => {\n    this.setState({\n      inputValue: e.target.value\n    });\n  }\n\n  formSubmit = () => {\n    const { orgID, email } = this.props;\n    const quota = this.state.inputValue.trim();\n\n    if (!quota) {\n      this.setState({\n        formErrorMsg: gettext('It is required.')\n      });\n      return false;\n    }\n\n    this.setState({\n      submitBtnDisabled: true\n    });\n\n    seafileAPI.orgAdminSetOrgUserQuota(orgID, email, quota).then((res) => {\n      this.props.updateQuota(res.data.quota_total);\n      this.props.toggleDialog();\n    }).catch((error) => {\n      let errorMsg = Utils.getErrorMsg(error);\n      this.setState({\n        formErrorMsg: errorMsg,\n        submitBtnDisabled: false\n      });\n    });\n  }\n\n  render() {\n    const { inputValue, formErrorMsg, submitBtnDisabled } = this.state;\n    return (\n      <Modal isOpen={true} centered={true} toggle={this.props.toggleDialog}>\n        <ModalHeader toggle={this.props.toggleDialog}>{gettext('Set user quota')}</ModalHeader>\n        <ModalBody>\n          <React.Fragment>\n            <InputGroup>\n              <input type=\"text\" className=\"form-control\" value={inputValue} onChange={this.handleInputChange} />\n              <InputGroupAddon addonType=\"append\">\n                <InputGroupText>MB</InputGroupText>\n              </InputGroupAddon>\n            </InputGroup>\n            <p className=\"small text-secondary mt-2 mb-2\">{gettext('Tip: 0 means default limit')}</p>\n            {formErrorMsg && <p className=\"error m-0 mt-2\">{formErrorMsg}</p>}\n          </React.Fragment>\n        </ModalBody>\n        <ModalFooter>\n          <button className=\"btn btn-secondary\" onClick={this.props.toggleDialog}>{gettext('Cancel')}</button>\n          <button className=\"btn btn-primary\" disabled={submitBtnDisabled} onClick={this.formSubmit}>{gettext('Submit')}</button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nSetOrgUserQuota.propTypes = propTypes;\n\nexport default SetOrgUserQuota;\n","import React, { Component, Fragment } from 'react';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport Loading from '../../components/loading';\nimport OrgAdminUserNav from '../../components/org-admin-user-nav';\nimport SetOrgUserName from '../../components/dialog/set-org-user-name';\nimport SetOrgUserContactEmail from '../../components/dialog/set-org-user-contact-email';\nimport SetOrgUserQuota from '../../components/dialog/set-org-user-quota';\nimport MainPanelTopbar from './main-panel-topbar';\n\nimport '../../css/org-admin-user.css';\n\nconst { orgID, orgName } = window.org.pageOptions;\n\nclass OrgUserProfile extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: ''\n    };\n  }\n\n  componentDidMount() {\n    seafileAPI.orgAdminGetOrgUserInfo(orgID, this.props.email).then((res) => {\n      this.setState(Object.assign({\n        loading: false\n      }, res.data));\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  updateName = (name) => {\n    this.setState({\n      name: name\n    });\n  }\n\n  updateContactEmail = (contactEmail) => {\n    this.setState({\n      contact_email: contactEmail\n    });\n  }\n\n  updateQuota = (quota) => {\n    this.setState({\n      quota_total: quota\n    });\n  }\n\n  render() {\n    return (\n      <Fragment>\n        <MainPanelTopbar/>\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <OrgAdminUserNav email={this.props.email} currentItem='profile' />\n            <div className=\"cur-view-content\">\n              <Content\n                data={this.state}\n                updateName={this.updateName}\n                updateContactEmail={this.updateContactEmail}\n                updateQuota={this.updateQuota}\n              />\n            </div>\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nclass Content extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isSetNameDialogOpen: false,\n      isSetContactEmailDialogOpen: false,\n      isSetQuotaDialogOpen: false\n    };\n  }\n\n  toggleSetNameDialog = () => {\n    this.setState({\n      isSetNameDialogOpen: !this.state.isSetNameDialogOpen\n    });\n  }\n\n  toggleSetContactEmailDialog = () => {\n    this.setState({\n      isSetContactEmailDialogOpen: !this.state.isSetContactEmailDialogOpen\n    });\n  }\n\n  toggleSetQuotaDialog = () => {\n    this.setState({\n      isSetQuotaDialogOpen: !this.state.isSetQuotaDialogOpen\n    });\n  }\n\n  render() {\n    const {\n      loading, errorMsg,\n      avatar_url, email, contact_email,\n      name, quota_total, quota_usage\n    } = this.props.data;\n    const { isSetNameDialogOpen, isSetContactEmailDialogOpen, isSetQuotaDialogOpen } = this.state;\n\n    if (loading) {\n      return <Loading />;\n    }\n    if (errorMsg) {\n      return <p className=\"error text-center\">{errorMsg}</p>;\n    }\n\n    return (\n      <Fragment>\n        <dl>\n          <dt>{gettext('Avatar')}</dt>\n          <dd>\n            <img src={avatar_url} width=\"48\" height=\"48\" className=\"rounded\" alt=\"\" />\n          </dd>\n\n          <dt>ID</dt>\n          <dd>{email}</dd>\n\n          <dt>{gettext('Name')}</dt>\n          <dd>\n            {name || '--'}\n            <span title={gettext('Edit')} className=\"attr-action-icon fa fa-pencil-alt\" onClick={this.toggleSetNameDialog}></span>\n          </dd>\n\n          <dt>{gettext('Contact Email')}</dt>\n          <dd>\n            {contact_email || '--'}\n            <span title={gettext('Edit')} className=\"attr-action-icon fa fa-pencil-alt\" onClick={this.toggleSetContactEmailDialog}></span>\n          </dd>\n\n          <dt>{gettext('Organization')}</dt>\n          <dd>{orgName}</dd>\n\n          <dt>{gettext('Space Used / Quota')}</dt>\n          <dd>\n            {`${Utils.bytesToSize(quota_usage)}${quota_total > 0 ? ' / ' + Utils.bytesToSize(quota_total) : ''}`}\n            <span title={gettext('Edit')} className=\"attr-action-icon fa fa-pencil-alt\" onClick={this.toggleSetQuotaDialog}></span>\n          </dd>\n        </dl>\n        {isSetNameDialogOpen &&\n        <SetOrgUserName\n          orgID={orgID}\n          email={email}\n          name={name}\n          updateName={this.props.updateName}\n          toggleDialog={this.toggleSetNameDialog}\n        />\n        }\n        {isSetContactEmailDialogOpen &&\n        <SetOrgUserContactEmail\n          orgID={orgID}\n          email={email}\n          contactEmail={contact_email}\n          updateContactEmail={this.props.updateContactEmail}\n          toggleDialog={this.toggleSetContactEmailDialog}\n        />\n        }\n        {isSetQuotaDialogOpen &&\n        <SetOrgUserQuota\n          orgID={orgID}\n          email={email}\n          quotaTotal={quota_total}\n          updateQuota={this.props.updateQuota}\n          toggleDialog={this.toggleSetQuotaDialog}\n        />\n        }\n      </Fragment>\n    );\n  }\n}\n\nexport default OrgUserProfile;\n","import React, { Component, Fragment } from 'react';\nimport moment from 'moment';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport Loading from '../../components/loading';\nimport toaster from '../../components/toast';\nimport OrgAdminUserNav from '../../components/org-admin-user-nav';\nimport DeleteRepoDialog from '../../components/dialog/delete-repo-dialog';\nimport MainPanelTopbar from './main-panel-topbar';\n\nimport '../../css/org-admin-user.css';\n\nconst { orgID } = window.org.pageOptions;\n\nclass OrgUserOwnedRepos extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: ''\n    };\n  }\n\n  componentDidMount() {\n    seafileAPI.orgAdminGetOrgUserOwnedRepos(orgID, this.props.email).then((res) => {\n      this.setState(Object.assign({\n        loading: false\n      }, res.data));\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  render() {\n    return (\n      <Fragment>\n        <MainPanelTopbar/>\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <OrgAdminUserNav email={this.props.email} currentItem='owned-repos' />\n            <div className=\"cur-view-content\">\n              <Content\n                data={this.state}\n              />\n            </div>\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nclass Content extends Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    const {\n      loading, errorMsg, repo_list\n    } = this.props.data;\n\n    if (loading) {\n      return <Loading />;\n    }\n    if (errorMsg) {\n      return <p className=\"error text-center\">{errorMsg}</p>;\n    }\n\n    return (\n      <Fragment>\n        <table className=\"table-hover\">\n          <thead>\n            <tr>\n              <th width=\"4%\">{/*icon*/}</th>\n              <th width=\"35%\">{gettext('Name')}</th>\n              <th width=\"16%\">{gettext('Size')}</th>\n              <th width=\"25%\">{gettext('Last Update')}</th>\n              <th width=\"20%\"></th>\n            </tr>\n          </thead>\n          <tbody>\n            {repo_list.map((item, index) => {\n              return <Item key={index} data={item} />;\n            })}\n          </tbody>\n        </table>\n      </Fragment>\n    );\n  }\n}\n\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOpIconShown: false,\n      deleted: false,\n      isDeleteRepoDialogOpen: false,\n      isRepoDeleted: false,\n    };\n  }\n\n  handleMouseOver = () => {\n    this.setState({\n      isOpIconShown: true\n    });\n  }\n\n  handleMouseOut = () => {\n    this.setState({\n      isOpIconShown: false\n    });\n  }\n\n  handleDeleteIconClick = (e) => {\n    e.preventDefault();\n    this.toggleDeleteRepoDialog();\n  }\n\n  toggleDeleteRepoDialog = () => {\n    this.setState({\n      isDeleteRepoDialogOpen: !this.state.isDeleteRepoDialogOpen\n    });\n  }\n\n  deleteRepo = () => {\n    const repo = this.props.data;\n    seafileAPI.orgAdminDeleteOrgRepo(orgID, repo.repo_id).then((res) => {\n      this.setState({\n        deleted: true,\n        isRepoDeleted: true,\n      });\n      const msg = gettext('Successfully deleted {name}.').replace('{name}', repo.repo_name);\n      toaster.success(msg);\n    }).catch((error) => {\n      const errorMsg = Utils.getErrorMsg(error);\n      toaster.danger(errorMsg);\n\n      this.setState({isRepoDeleted: false});\n    });\n  }\n\n  render() {\n    const { deleted, isOpIconShown, isDeleteRepoDialogOpen } = this.state;\n    const repo = this.props.data;\n\n    if (deleted) {\n      return null;\n    }\n\n    return (\n      <Fragment>\n        <tr onMouseOver={this.handleMouseOver} onMouseOut={this.handleMouseOut}>\n          <td>\n            <img src={Utils.getLibIconUrl(repo, false)} alt={Utils.getLibIconTitle(repo)} title={Utils.getLibIconTitle(repo)} width=\"24\" />\n          </td>\n          <td>{repo.repo_name}</td>\n          <td>{Utils.bytesToSize(repo.size)}</td>\n          <td title={moment(repo.last_modified).format('LLLL')}>{moment(repo.last_modified).format('YYYY-MM-DD')}</td>\n          <td>\n            <a href=\"#\" className={`action-icon sf2-icon-delete${isOpIconShown ? '' : ' invisible'}`} title={gettext('Delete')} onClick={this.handleDeleteIconClick}></a>\n          </td>\n        </tr>\n        {isDeleteRepoDialogOpen && (\n          <DeleteRepoDialog\n            repo={repo}\n            isRepoDeleted={this.state.isRepoDeleted}\n            onDeleteRepo={this.deleteRepo}\n            toggle={this.toggleDeleteRepoDialog}\n          />\n        )}\n      </Fragment>\n    );\n  }\n}\n\nexport default OrgUserOwnedRepos;\n","import React, { Component, Fragment } from 'react';\nimport moment from 'moment';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport Loading from '../../components/loading';\nimport OrgAdminUserNav from '../../components/org-admin-user-nav';\nimport MainPanelTopbar from './main-panel-topbar';\n\nimport '../../css/org-admin-user.css';\n\nconst { orgID } = window.org.pageOptions;\n\nclass OrgUserSharedRepos extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: ''\n    };\n  }\n\n  componentDidMount() {\n    seafileAPI.orgAdminGetOrgUserBesharedRepos(orgID, this.props.email).then((res) => {\n      this.setState(Object.assign({\n        loading: false\n      }, res.data));\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  render() {\n    return (\n      <Fragment>\n        <MainPanelTopbar/>\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <OrgAdminUserNav email={this.props.email} currentItem='shared-repos' />\n            <div className=\"cur-view-content\">\n              <Content\n                data={this.state}\n              />\n            </div>\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nclass Content extends Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    const {\n      loading, errorMsg, repo_list\n    } = this.props.data;\n\n    if (loading) {\n      return <Loading />;\n    }\n    if (errorMsg) {\n      return <p className=\"error text-center\">{errorMsg}</p>;\n    }\n\n    return (\n      <table className=\"table-hover\">\n        <thead>\n          <tr>\n            <th width=\"4%\">{/*icon*/}</th>\n            <th width=\"30%\">{gettext('Name')}</th>\n            <th width=\"26%\">{gettext('Owner')}</th>\n            <th width=\"15%\">{gettext('Size')}</th>\n            <th width=\"25%\">{gettext('Last Update')}</th>\n          </tr>\n        </thead>\n        <tbody>\n          {repo_list.map((item, index) => {\n            return <Item key={index} data={item} />;\n          })}\n        </tbody>\n      </table>\n    );\n  }\n}\n\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    const repo = this.props.data;\n    return (\n      <tr>\n        <td>\n          <img src={Utils.getLibIconUrl(repo, false)} alt={Utils.getLibIconTitle(repo)} title={Utils.getLibIconTitle(repo)} width=\"24\" />\n        </td>\n        <td>{repo.repo_name}</td>\n        <td>{repo.owner_name}</td>\n        <td>{Utils.bytesToSize(repo.size)}</td>\n        <td title={moment(repo.last_modified).format('LLLL')}>{moment(repo.last_modified).format('YYYY-MM-DD')}</td>\n      </tr>\n    );\n  }\n}\n\nexport default OrgUserSharedRepos;\n","import { lang } from '../utils/constants';\nimport moment from 'moment';\n\nmoment.locale(lang);\n\nclass OrgGroupInfo {\n  constructor(object) {\n    this.id = object.id;\n    this.groupName = object.group_name;\n    this.creatorName = object.creator_name;\n    this.creatorEmail = object.creator_email;\n    this.creatorContactEmail = object.creator_contact_email;\n    this.ctime = moment(object.ctime).format('YYYY-MM-DD HH:mm:ss');\n  }\n}\n\nexport default OrgGroupInfo;\n","import React, { Component, Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Dropdown, DropdownToggle, DropdownMenu, DropdownItem } from 'reactstrap';\nimport { siteRoot, gettext, orgID } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../../components/toast';\nimport OrgGroupInfo from '../../models/org-group';\nimport MainPanelTopbar from './main-panel-topbar';\n\nclass OrgGroups extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      page: 1,\n      pageNext: false,\n      orgGroups: [],\n      isItemFreezed: false\n    };\n  }\n\n  componentDidMount() {\n    let page = this.state.page;\n    this.initData(page);\n  }\n\n  initData = (page) => {\n    seafileAPI.orgAdminListOrgGroups(orgID, page).then(res => {\n      let orgGroups = res.data.groups.map(item => {\n        return new OrgGroupInfo(item);\n      });\n\n      this.setState({\n        orgGroups: orgGroups,\n        pageNext: res.data.page_next,\n        page: res.data.page,\n      });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n\n  onChangePageNum = (e, num) => {\n    e.preventDefault();\n    let page = this.state.page;\n\n    if (num == 1) {\n      page = page + 1;\n    } else {\n      page = page - 1;\n    }\n    this.initData(page);\n  }\n\n  onFreezedItem = () => {\n    this.setState({isItemFreezed: true});\n  }\n\n  onUnfreezedItem = () => {\n    this.setState({isItemFreezed: false});\n  }\n\n  deleteGroupItem = (group) => {\n    seafileAPI.orgAdminDeleteOrgGroup(orgID, group.id).then(res => {\n      this.setState({\n        orgGroups: this.state.orgGroups.filter(item => item.id != group.id)\n      });\n      let msg = gettext('Successfully deleted {name}');\n      msg = msg.replace('{name}', group.groupName);\n      toaster.success(msg);\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  render() {\n    let groups = this.state.orgGroups;\n    return (\n      <Fragment>\n        <MainPanelTopbar/>\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <div className=\"cur-view-path\">\n              <h3 className=\"sf-heading\">{gettext('All Groups')}</h3>\n            </div>\n            <div className=\"cur-view-content\">\n              <table>\n                <thead>\n                  <tr>\n                    <th width=\"30%\">{gettext('Name')}</th>\n                    <th width=\"35%\">{gettext('Creator')}</th>\n                    <th width=\"23%\">{gettext('Created At')}</th>\n                    <th width=\"12%\" className=\"text-center\">{gettext('Operations')}</th>\n                  </tr>\n                </thead>\n                <tbody>\n                  {groups.map(item => {\n                    return (\n                      <GroupItem\n                        key={item.id}\n                        group={item}\n                        isItemFreezed={this.state.isItemFreezed}\n                        onFreezedItem={this.onFreezedItem}\n                        onUnfreezedItem={this.onUnfreezedItem}\n                        deleteGroupItem={this.deleteGroupItem}\n                      />\n                    );\n                  })}\n                </tbody>\n              </table>\n              <div className=\"paginator\">\n                {this.state.page != 1 && <a href=\"#\" onClick={(e) => this.onChangePageNum(e, -1)}>{gettext('Previous')}</a>}\n                {(this.state.page != 1 && this.state.pageNext) && <span> | </span>}\n                {this.state.pageNext && <a href=\"#\" onClick={(e) => this.onChangePageNum(e, 1)}>{gettext('Next')}</a>}\n              </div>\n            </div>\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nconst GroupItemPropTypes = {\n  group: PropTypes.object.isRequired,\n  isItemFreezed: PropTypes.bool.isRequired,\n  onFreezedItem: PropTypes.func.isRequired,\n  onUnfreezedItem: PropTypes.func.isRequired,\n  deleteGroupItem: PropTypes.func.isRequired,\n};\n\nclass GroupItem extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      highlight: false,\n      showMenu: false,\n      isItemMenuShow: false\n    };\n  }\n\n  onMouseEnter = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        showMenu: true,\n        highlight: true,\n      });\n    }\n  }\n\n  onMouseLeave = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        showMenu: false,\n        highlight: false\n      });\n    }\n  }\n\n  onDropdownToggleClick = (e) => {\n    e.preventDefault();\n    this.toggleOperationMenu(e);\n  }\n\n  toggleOperationMenu = (e) => {\n    e.stopPropagation();\n    this.setState(\n      {isItemMenuShow: !this.state.isItemMenuShow }, () => {\n        if (this.state.isItemMenuShow) {\n          this.props.onFreezedItem();\n        } else {\n          this.setState({\n            highlight: false,\n            showMenu: false,\n          });\n          this.props.onUnfreezedItem();\n        }\n      }\n    );\n  }\n\n  toggleDelete = () => {\n    this.props.deleteGroupItem(this.props.group);\n  }\n\n  renderGroupHref = (group) => {\n    let groupInfoHref;\n    if (group.creatorName == 'system admin') {\n      groupInfoHref = siteRoot + 'org/departmentadmin/groups/' + group.id + '/';\n    } else {\n      groupInfoHref = siteRoot + 'org/groupadmin/' + group.id + '/';\n    }\n\n    return groupInfoHref;\n  }\n\n  renderGroupCreator = (group) => {\n    let userInfoHref = siteRoot + 'org/useradmin/info/' + group.creatorEmail + '/';\n    if (group.creatorName == 'system admin') {\n      return (\n        <td> -- </td>\n      );\n    } else {\n      return(\n        <td>\n          <a href={userInfoHref} className=\"font-weight-normal\">{group.creatorName}</a>\n        </td>\n      );\n    }\n  }\n\n  render() {\n    let { group } = this.props;\n    let isOperationMenuShow = (group.creatorName != 'system admin') && this.state.showMenu;\n    return (\n      <tr className={this.state.highlight ? 'tr-highlight' : ''} onMouseEnter={this.onMouseEnter} onMouseLeave={this.onMouseLeave}>\n        <td>\n          <a href={this.renderGroupHref(group)} className=\"font-weight-normal\">{group.groupName}</a>\n        </td>\n        {this.renderGroupCreator(group)}\n        <td>{group.ctime}</td>\n        <td className=\"text-center cursor-pointer\">\n          {isOperationMenuShow &&\n            <Dropdown isOpen={this.state.isItemMenuShow} toggle={this.toggleOperationMenu}>\n              <DropdownToggle\n                tag=\"a\"\n                className=\"attr-action-icon fas fa-ellipsis-v\"\n                title={gettext('More Operations')}\n                data-toggle=\"dropdown\"\n                aria-expanded={this.state.isItemMenuShow}\n                onClick={this.onDropdownToggleClick}\n              />\n              <DropdownMenu>\n                <DropdownItem onClick={this.toggleDelete}>{gettext('Delete')}</DropdownItem>\n              </DropdownMenu>\n            </Dropdown>\n          }\n        </td>\n      </tr>\n    );\n  }\n\n}\n\nGroupItem.propTypes = GroupItemPropTypes;\n\nexport default OrgGroups;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Link } from '@reach/router';\nimport { siteRoot, gettext } from '../utils/constants';\n\nconst propTypes = {\n  groupID: PropTypes.string.isRequired,\n  currentItem: PropTypes.string.isRequired\n};\n\nclass OrgAdminGroupNav extends React.Component {\n\n  render() {\n    const { groupID, currentItem } = this.props;\n    const urlBase = `${siteRoot}org/groupadmin/${groupID}/`;\n    return (\n      <div className=\"cur-view-path org-admin-user-nav\">\n        <ul className=\"nav\">\n          <li className=\"nav-item\">\n            <Link to={urlBase} className={`nav-link${currentItem == 'info' ? ' active' : ''}`}>{gettext('Group Info')}</Link>\n          </li>\n          <li className=\"nav-item\">\n            <Link to={`${urlBase}repos/`} className={`nav-link${currentItem == 'repos' ? ' active' : ''}`}>{gettext('Libraries')}</Link>\n          </li>\n          <li className=\"nav-item\">\n            <Link to={`${urlBase}members/`} className={`nav-link${currentItem == 'members' ? ' active' : ''}`}>{gettext('Members')}</Link>\n          </li>\n        </ul>\n      </div>\n    );\n  }\n}\n\nOrgAdminGroupNav.propTypes = propTypes;\n\nexport default OrgAdminGroupNav;\n","import React, { Component, Fragment } from 'react';\nimport { Link } from '@reach/router';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { gettext, siteRoot } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport Loading from '../../components/loading';\nimport OrgAdminGroupNav from '../../components/org-admin-group-nav';\nimport MainPanelTopbar from './main-panel-topbar';\n\nimport '../../css/org-admin-user.css';\n\nconst { orgID } = window.org.pageOptions;\n\nclass OrgGroupInfo extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: ''\n    };\n  }\n\n  componentDidMount() {\n    seafileAPI.orgAdminGetGroup(orgID, this.props.groupID).then((res) => {\n      this.setState(Object.assign({\n        loading: false\n      }, res.data));\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  render() {\n    return (\n      <Fragment>\n        <MainPanelTopbar/>\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <OrgAdminGroupNav groupID={this.props.groupID} currentItem='info' />\n            <div className=\"cur-view-content\">\n              <Content\n                data={this.state}\n              />\n            </div>\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nclass Content extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n    };\n  }\n\n  render() {\n    const {\n      loading, errorMsg,\n      group_name, creator_email, creator_name\n    } = this.props.data;\n\n    if (loading) {\n      return <Loading />;\n    }\n    if (errorMsg) {\n      return <p className=\"error text-center mt-2\">{errorMsg}</p>;\n    }\n\n    return (\n      <dl>\n        <dt>{gettext('Name')}</dt>\n        <dd>{group_name}</dd>\n\n        <dt>{gettext('Creator')}</dt>\n        <dd>\n          <Link to={`${siteRoot}org/useradmin/info/${encodeURIComponent(creator_email)}/`}>{creator_name}</Link>\n        </dd>\n      </dl>\n    );\n  }\n}\n\nexport default OrgGroupInfo;\n","import React, { Component, Fragment } from 'react';\nimport { Link } from '@reach/router';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { gettext, siteRoot } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport Loading from '../../components/loading';\nimport toaster from '../../components/toast';\nimport OrgAdminGroupNav from '../../components/org-admin-group-nav';\nimport DeleteRepoDialog from '../../components/dialog/delete-repo-dialog';\nimport MainPanelTopbar from './main-panel-topbar';\n\nimport '../../css/org-admin-user.css';\n\nconst { orgID } = window.org.pageOptions;\n\nclass OrgGroupRepos extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: ''\n    };\n  }\n\n  componentDidMount() {\n    seafileAPI.orgAdminListGroupRepos(orgID, this.props.groupID).then((res) => {\n      this.setState(Object.assign({\n        loading: false\n      }, res.data));\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  render() {\n    return (\n      <Fragment>\n        <MainPanelTopbar/>\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <OrgAdminGroupNav groupID={this.props.groupID} currentItem='repos' />\n            <div className=\"cur-view-content\">\n              <Content\n                data={this.state}\n              />\n            </div>\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nclass Content extends Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    const {\n      loading, errorMsg, libraries\n    } = this.props.data;\n\n    if (loading) {\n      return <Loading />;\n    }\n    if (errorMsg) {\n      return <p className=\"error text-center mt-2\">{errorMsg}</p>;\n    }\n\n    return (\n      <Fragment>\n        <table className=\"table-hover\">\n          <thead>\n            <tr>\n              <th width=\"4%\">{/*icon*/}</th>\n              <th width=\"35%\">{gettext('Name')}</th>\n              <th width=\"20%\">{gettext('Size')}</th>\n              <th width=\"26%\">{gettext('Shared By')}</th>\n              <th width=\"15%\"></th>\n            </tr>\n          </thead>\n          <tbody>\n            {libraries.map((item, index) => {\n              return <Item key={index} data={item} />;\n            })}\n          </tbody>\n        </table>\n      </Fragment>\n    );\n  }\n}\n\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOpIconShown: false,\n      deleted: false,\n      isDeleteRepoDialogOpen: false,\n      isRepoDeleted: false,\n    };\n  }\n\n  handleMouseOver = () => {\n    this.setState({\n      isOpIconShown: true\n    });\n  }\n\n  handleMouseOut = () => {\n    this.setState({\n      isOpIconShown: false\n    });\n  }\n\n  handleDeleteIconClick = (e) => {\n    e.preventDefault();\n    this.toggleDeleteRepoDialog();\n  }\n\n  toggleDeleteRepoDialog = () => {\n    this.setState({\n      isDeleteRepoDialogOpen: !this.state.isDeleteRepoDialogOpen\n    });\n  }\n\n  deleteRepo = () => {\n    const repo = this.props.data;\n    seafileAPI.orgAdminDeleteOrgRepo(orgID, repo.repo_id).then((res) => {\n      this.setState({\n        deleted: true,\n        isRepoDeleted: true,\n      });\n      const msg = gettext('Successfully deleted {name}.').replace('{name}', repo.name);\n      toaster.success(msg);\n    }).catch((error) => {\n      const errorMsg = Utils.getErrorMsg(error);\n      toaster.danger(errorMsg);\n\n      this.setState({isRepoDeleted: false});\n    });\n  }\n\n  render() {\n    const { deleted, isOpIconShown, isDeleteRepoDialogOpen } = this.state;\n    const repo = this.props.data;\n\n    if (deleted) {\n      return null;\n    }\n\n    return (\n      <Fragment>\n        <tr onMouseOver={this.handleMouseOver} onMouseOut={this.handleMouseOut}>\n          <td>\n            <img src={Utils.getLibIconUrl(repo, false)} alt={Utils.getLibIconTitle(repo)} title={Utils.getLibIconTitle(repo)} width=\"24\" />\n          </td>\n          <td>{repo.name}</td>\n          <td>{Utils.bytesToSize(repo.size)}</td>\n          <td><Link to={`${siteRoot}org/useradmin/info/${encodeURIComponent(repo.shared_by)}/`}>{repo.shared_by_name}</Link></td>\n          <td>\n            <a href=\"#\" className={`action-icon sf2-icon-delete${isOpIconShown ? '' : ' invisible'}`} title={gettext('Delete')} onClick={this.handleDeleteIconClick}></a>\n          </td>\n        </tr>\n        {isDeleteRepoDialogOpen && (\n          <DeleteRepoDialog\n            repo={repo}\n            isRepoDeleted={this.state.isRepoDeleted}\n            onDeleteRepo={this.deleteRepo}\n            toggle={this.toggleDeleteRepoDialog}\n          />\n        )}\n      </Fragment>\n    );\n  }\n}\n\nexport default OrgGroupRepos;\n","import React, { Component, Fragment } from 'react';\nimport { Link } from '@reach/router';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { gettext, siteRoot } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport Loading from '../../components/loading';\nimport OrgAdminGroupNav from '../../components/org-admin-group-nav';\nimport MainPanelTopbar from './main-panel-topbar';\n\nimport '../../css/org-admin-user.css';\n\nconst { orgID } = window.org.pageOptions;\n\nclass OrgGroupMembers extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: ''\n    };\n  }\n\n  componentDidMount() {\n    seafileAPI.orgAdminListGroupMembers(orgID, this.props.groupID).then((res) => {\n      this.setState(Object.assign({\n        loading: false\n      }, res.data));\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  render() {\n    return (\n      <Fragment>\n        <MainPanelTopbar/>\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <OrgAdminGroupNav groupID={this.props.groupID} currentItem='members' />\n            <div className=\"cur-view-content\">\n              <Content\n                data={this.state}\n              />\n            </div>\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nclass Content extends Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    const {\n      loading, errorMsg, members\n    } = this.props.data;\n\n    if (loading) {\n      return <Loading />;\n    }\n    if (errorMsg) {\n      return <p className=\"error text-center mt-2\">{errorMsg}</p>;\n    }\n\n    return (\n      <Fragment>\n        <table className=\"table-hover\">\n          <thead>\n            <tr>\n              <th width=\"10%\"></th>\n              <th width=\"50%\">{gettext('Name')}</th>\n              <th width=\"40%\">{gettext('Role')}</th>\n            </tr>\n          </thead>\n          <tbody>\n            {members.map((item, index) => {\n              return <Item key={index} data={item} />;\n            })}\n          </tbody>\n        </table>\n      </Fragment>\n    );\n  }\n}\n\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  getRoleText() {\n    switch (this.props.data.role) {\n      case 'Owner':\n        return gettext('Owner');\n      case 'Admin':\n        return gettext('Admin');\n      case 'Member':\n        return gettext('Member');\n    }\n  }\n\n  render() {\n    const item = this.props.data;\n    return (\n      <Fragment>\n        <tr>\n          <td className=\"text-center\">\n            <img src={item.avatar_url} alt=\"\" className=\"avatar\" width=\"32\" />\n          </td>\n          <td>\n            <Link to={`${siteRoot}org/useradmin/info/${encodeURIComponent(item.email)}/`}>{item.name}</Link>\n          </td>\n          <td>\n            {this.getRoleText()}\n          </td>\n        </tr>\n      </Fragment>\n    );\n  }\n}\n\nexport default OrgGroupMembers;\n","class OrgAdminRepo {\n  constructor(object) {\n    this.repoID = object.repo_id;\n    this.repoName = object.repo_name;\n    this.ownerName = object.owner_name;\n    this.ownerEmail = object.owner_email;\n    this.size = object.size;\n    this.file_count = object.file_count;\n    this.encrypted = object.encrypted;\n    this.isDepartmentRepo = object.is_department_repo;\n    this.groupID = object.group_id;\n  }\n}\n\nexport default OrgAdminRepo;\n","import React, { Fragment, Component } from 'react';\nimport { navigate } from '@reach/router';\nimport PropTypes from 'prop-types';\nimport { Dropdown, DropdownToggle, DropdownMenu, DropdownItem } from 'reactstrap';\nimport MainPanelTopbar from './main-panel-topbar';\nimport OrgAdminRepo from '../../models/org-admin-repo';\nimport toaster from '../../components/toast';\nimport TransferDialog from '../../components/dialog/transfer-dialog';\nimport ModalPortal from '../../components/modal-portal';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport { mediaUrl, siteRoot, gettext, orgID } from '../../utils/constants';\n\nclass OrgLibraries extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      page: 1,\n      pageNext: false,\n      orgRepos: [],\n      sortBy: '',\n      isItemFreezed: false\n    };\n  }\n\n  componentDidMount() {\n    let urlParams = (new URL(window.location)).searchParams;\n    const { page, /*currentPage = 1, perPage, */sortBy } = this.state;\n    this.setState({\n      sortBy: urlParams.get('order_by') || sortBy,\n      //perPage: parseInt(urlParams.get('per_page') || perPage),\n      //currentPage: parseInt(urlParams.get('page') || currentPage)\n      page: parseInt(urlParams.get('page') || page)\n    }, () => {\n      this.listRepos(this.state.page);\n    });\n  }\n\n  listRepos = (page) => {\n    seafileAPI.orgAdminListOrgRepos(orgID, page, this.state.sortBy).then(res => {\n      let orgRepos = res.data.repo_list.map(item => {\n        return new OrgAdminRepo(item);\n      });\n\n      this.setState({\n        orgRepos: orgRepos,\n        pageNext: res.data.page_next,\n        page: res.data.page,\n      });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n\n  onChangePageNum = (e, num) => {\n    e.preventDefault();\n    let page = this.state.page;\n\n    if (num == 1) {\n      page = page + 1;\n    } else {\n      page = page - 1;\n    }\n    this.listRepos(page);\n  }\n\n  onFreezedItem = () => {\n    this.setState({isItemFreezed: true});\n  }\n\n  onUnfreezedItem = () => {\n    this.setState({isItemFreezed: false});\n  }\n\n  deleteRepoItem = (repo) => {\n    seafileAPI.orgAdminDeleteOrgRepo(orgID, repo.repoID).then(res => {\n      this.setState({\n        orgRepos: this.state.orgRepos.filter(item => item.repoID != repo.repoID)\n      });\n      let msg = gettext('Successfully deleted {name}');\n      msg = msg.replace('{name}', repo.repoName);\n      toaster.success(msg);\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  transferRepoItem = (repoID, user) => {\n    this.setState({\n      orgRepos: this.state.orgRepos.map(item =>{\n        if (item.repoID == repoID) {\n          item.ownerEmail = user.email;\n          item.ownerName = user.value;\n        }\n        return item;\n      })\n    });\n  }\n\n  sortItems = (sortBy) => {\n    this.setState({\n      page: 1,\n      sortBy: sortBy\n    }, () => {\n      let url = new URL(location.href);\n      let searchParams = new URLSearchParams(url.search);\n      const { page, sortBy } = this.state;\n      searchParams.set('page', page);\n      searchParams.set('order_by', sortBy);\n      url.search = searchParams.toString();\n      navigate(url.toString());\n      this.listRepos(page);\n    });\n  }\n\n  sortByFileCount = (e) => {\n    e.preventDefault();\n    this.sortItems('file_count');\n  }\n\n  sortBySize = (e) => {\n    e.preventDefault();\n    this.sortItems('size');\n  }\n\n  render() {\n    const { orgRepos, sortBy } = this.state;\n    const initialSortIcon = <span className=\"fas fa-sort\"></span>;\n    const sortIcon = <span className=\"fas fa-caret-down\"></span>;\n    return (\n      <Fragment>\n        <MainPanelTopbar />\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <div className=\"cur-view-path\">\n              <h3 className=\"sf-heading\">{gettext('All Libraries')}</h3>\n            </div>\n            <div className=\"cur-view-content\">\n              <table>\n                <thead>\n                  <tr>\n                    <th width=\"5%\">{/*icon*/}</th>\n                    <th width=\"25%\">{gettext('Name')}</th>\n                    <th width=\"15%\">\n                      <a className=\"d-inline-block table-sort-op\" href=\"#\" onClick={this.sortByFileCount}>{gettext('Files')} {sortBy == 'file_count' ? sortIcon : initialSortIcon}</a>{' / '}\n                      <a className=\"d-inline-block table-sort-op\" href=\"#\" onClick={this.sortBySize}>{gettext('Size')} {sortBy == 'size' ? sortIcon : initialSortIcon}</a>\n                    </th>\n                    <th width=\"32%\">ID</th>\n                    <th width=\"18%\">{gettext('Owner')}</th>\n                    <th width=\"5%\">{/*Operations*/}</th>\n                  </tr>\n                </thead>\n                <tbody>\n                  {orgRepos.map(item => {\n                    return (\n                      <RepoItem\n                        key={item.repoID}\n                        repo={item}\n                        isItemFreezed={this.state.isItemFreezed}\n                        onFreezedItem={this.onFreezedItem}\n                        onUnfreezedItem={this.onUnfreezedItem}\n                        deleteRepoItem={this.deleteRepoItem}\n                        transferRepoItem={this.transferRepoItem}\n                      />\n                    );}\n                  )}\n                </tbody>\n              </table>\n              <div className=\"paginator\">\n                {this.state.page != 1 && <a href=\"#\" onClick={(e) => this.onChangePageNum(e, -1)}>{gettext('Previous')}</a>}\n                {(this.state.page != 1 && this.state.pageNext) && <span> | </span>}\n                {this.state.pageNext && <a href=\"#\" onClick={(e) => this.onChangePageNum(e, 1)}>{gettext('Next')}</a>}\n              </div>\n            </div>\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nconst propTypes = {\n  repo: PropTypes.object.isRequired,\n  isItemFreezed: PropTypes.bool,\n  onFreezedItem: PropTypes.func.isRequired,\n  onUnfreezedItem: PropTypes.func.isRequired,\n  deleteRepoItem: PropTypes.func.isRequired,\n  transferRepoItem: PropTypes.func.isRequired,\n};\n\nclass RepoItem extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      highlight: false,\n      showMenu: false,\n      isItemMenuShow: false,\n      isTransferDialogShow: false\n    };\n  }\n\n  onMouseEnter = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        showMenu: true,\n        highlight: true,\n      });\n    }\n  }\n\n  onMouseLeave = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        showMenu: false,\n        highlight: false\n      });\n    }\n  }\n\n  onDropdownToggleClick = (e) => {\n    e.preventDefault();\n    this.toggleOperationMenu(e);\n  }\n\n  toggleOperationMenu = (e) => {\n    e.stopPropagation();\n    this.setState(\n      {isItemMenuShow: !this.state.isItemMenuShow }, () => {\n        if (this.state.isItemMenuShow) {\n          this.props.onFreezedItem();\n        } else {\n          this.setState({\n            highlight: false,\n            showMenu: false,\n          });\n          this.props.onUnfreezedItem();\n        }\n      }\n    );\n  }\n\n  toggleDelete = () => {\n    this.props.deleteRepoItem(this.props.repo);\n  }\n\n  toggleTransfer = () => {\n    this.props.transferRepoItem(this.props.repo);\n  }\n\n  renderLibIcon = (repo) => {\n    let href;\n    let iconTitle;\n    if (repo.encrypted) {\n      href = mediaUrl + 'img/lib/48/lib-encrypted.png';\n      iconTitle = gettext('Encrypted library');\n    } else {\n      href = mediaUrl + 'img/lib/48/lib.png';\n      iconTitle = gettext('Read-Write library');\n    }\n    return <img src={href} title={iconTitle} alt={iconTitle} width=\"24\" />;\n  }\n\n  renderRepoOwnerHref = (repo) => {\n    let href;\n    if (repo.isDepartmentRepo) {\n      href = siteRoot + 'org/admin/#address-book/groups/' + repo.groupID + '/';\n    } else {\n      href = siteRoot + 'org/useradmin/info/' + repo.ownerEmail + '/';\n    }\n    return href;\n  }\n\n  toggleTransfer = () => {\n    this.setState({isTransferDialogShow: !this.state.isTransferDialogShow});\n  }\n\n  onTransferRepo = (user) => {\n    let repo = this.props.repo;\n    seafileAPI.orgAdminTransferOrgRepo(orgID, repo.repoID, user.email).then(res => {\n      this.props.transferRepoItem(repo.repoID, user);\n      let msg = gettext('Successfully transferred the library.');\n      toaster.success(msg);\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n    this.toggleTransfer();\n  }\n\n  render() {\n    let { repo } = this.props;\n\n    let isOperationMenuShow = this.state.showMenu && !repo.isDepartmentRepo;\n    return (\n      <Fragment>\n        <tr className={this.state.highlight ? 'tr-highlight' : ''} onMouseEnter={this.onMouseEnter} onMouseLeave={this.onMouseLeave}>\n          <td>{this.renderLibIcon(repo)}</td>\n          <td>{repo.repoName}</td>\n          <td>{`${repo.file_count} / ${Utils.bytesToSize(repo.size)}`}</td>\n          <td>{repo.repoID}</td>\n          <td><a href={this.renderRepoOwnerHref(repo)}>{repo.ownerName}</a></td>\n          <td className=\"text-center cursor-pointer\">\n            {isOperationMenuShow &&\n              <Dropdown isOpen={this.state.isItemMenuShow} toggle={this.toggleOperationMenu}>\n                <DropdownToggle\n                  tag=\"a\"\n                  className=\"attr-action-icon fas fa-ellipsis-v\"\n                  title={gettext('More Operations')}\n                  data-toggle=\"dropdown\"\n                  aria-expanded={this.state.isItemMenuShow}\n                  onClick={this.onDropdownToggleClick}\n                />\n                <DropdownMenu>\n                  <DropdownItem onClick={this.toggleDelete}>{gettext('Delete')}</DropdownItem>\n                  <DropdownItem onClick={this.toggleTransfer}>{gettext('Transfer')}</DropdownItem>\n                </DropdownMenu>\n              </Dropdown>\n            }\n          </td>\n        </tr>\n        {this.state.isTransferDialogShow && (\n          <ModalPortal>\n            <TransferDialog\n              itemName={repo.repoName}\n              submit={this.onTransferRepo}\n              toggleDialog={this.toggleTransfer}\n            />\n          </ModalPortal>\n        )}\n      </Fragment>\n    );\n  }\n}\n\nRepoItem.propTypes = propTypes;\n\nexport default OrgLibraries;\n","import React, { Component, Fragment } from 'react';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { gettext, orgMemberQuotaEnabled} from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport MainPanelTopbar from './main-panel-topbar';\n\nclass OrgInfo extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      storage_quota: 0,\n      storage_usage: 0,\n      member_quota: 0,\n      member_usage: 0,\n      active_members: 0\n    };\n  }\n\n  componentDidMount() {\n    seafileAPI.orgAdminGetOrgInfo().then(res => {\n      this.setState({\n        storage_quota: res.data.storage_quota,\n        storage_usage: res.data.storage_usage,\n        member_quota: res.data.member_quota,\n        member_usage: res.data.member_usage,\n        active_members: res.data.active_members\n      });\n    });\n  }\n\n  render() {\n    return (\n      <Fragment>\n        <MainPanelTopbar/>\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <div className=\"cur-view-path\">\n              <h3 className=\"sf-heading\">{gettext('Info')}</h3>\n            </div>\n            <div className=\"cur-view-content\">\n              <dl>\n                <dt>{gettext('Space Used')}</dt>\n\n                {(this.state.storage_quota > 0) ? <dd>{Utils.bytesToSize(this.state.storage_usage)} / {Utils.bytesToSize(this.state.storage_quota)}</dd> : <dd>{Utils.bytesToSize(this.state.storage_usage)}</dd>}\n\n                {orgMemberQuotaEnabled ? <dt>{gettext('Active Users')} / {gettext('Total Users')} / {gettext('Limits')}</dt> : <dt>{gettext('Active Users')} / {gettext('Total Users')}</dt>}\n\n                {orgMemberQuotaEnabled ? <dd>{(this.state.active_members > 0) ? this.state.active_members : '--'} / {(this.state.member_usage > 0) ? this.state.member_usage : '--'} / {(this.state.member_quota > 0) ? this.state.member_quota : '--'}</dd> : <dd>{this.state.active_members > 0 ? this.state.active_members : '--'} / {this.state.member_usage > 0 ? this.state.member_usage : '--'}</dd>}\n\n              </dl>\n            </div>\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nexport default OrgInfo;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter } from 'reactstrap';\nimport toaster from '../toast';\nimport copy from '../copy-to-clipboard';\nimport { gettext } from '../../utils/constants';\n\nconst propTypes = {\n  currentLinkHref: PropTypes.string.isRequired,\n  toggle: PropTypes.func.isRequired,\n};\n\nclass ViewLinkDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  copyToClipBoard = () => {\n    copy(this.props.currentLinkHref);\n    let message = gettext('Link has been copied to clipboard');\n    toaster.success(message), {\n      duration: 2\n    };\n    this.props.toggle();\n  }\n\n  render() {\n    const href = this.props.currentLinkHref;\n    return (\n      <Modal isOpen={true} toggle={this.props.toggle}>\n        <ModalHeader toggle={this.props.toggle}>{gettext('Link')}</ModalHeader>\n        <ModalBody>\n          <p><a target=\"_blank\" href={href}>{href}</a></p>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.props.toggle}>{gettext('Cancel')}</Button>{' '}\n          <Button color=\"primary\" onClick={this.copyToClipBoard}>{gettext('Copy')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nViewLinkDialog.propTypes = propTypes;\n\nexport default ViewLinkDialog;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport moment from 'moment';\nimport { Dropdown, DropdownToggle, DropdownMenu, DropdownItem } from 'reactstrap';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { siteRoot, gettext, serviceURL } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../../components/toast';\nimport MainPanelTopbar from './main-panel-topbar';\nimport ViewLinkDialog from '../../components/dialog/view-link-dialog';\n\nclass OrgLinks extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      linkList: null,\n      page: 1,\n      pageNext: false,\n      isItemFreezed: false,\n      isShowLinkDialog: false,\n      currentLinkHref: '',\n    };\n  }\n\n  listOrgLinks = (page) => {\n    seafileAPI.orgAdminListOrgLinks(this.state.page).then(res => {\n      const data = res.data;\n      this.setState({\n        linkList: data.link_list,\n        page: data.page,\n        pageNext: data.page_next,\n      });\n    });\n  }\n\n  onFreezedItem = () => {\n    this.setState({isItemFreezed: true});\n  }\n\n  onUnfreezedItem = () => {\n    this.setState({isItemFreezed: false});\n  }\n\n  onChangePageNum = (event, num) => {\n    event.preventDefault();\n    let page = this.state.page;\n    if (num == 1) {\n      page = page + 1;\n    } else {\n      page = page - 1;\n    }\n    this.listOrgLinks(page);\n  }\n\n  deleteOrgLink = (token) => {\n    seafileAPI.orgAdminDeleteOrgLink(token).then(res => {\n      if (res.data.success === true) {\n        this.listOrgLinks(this.state.page);\n      }\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  openLinkDialog = (link) => {\n    let href;\n    if (link.name.indexOf('/') > -1) {\n      href = serviceURL + '/d/' + link.token + '/';\n    } else {\n      href = serviceURL + '/f/' + link.token + '/';\n    }\n    this.setState({ currentLinkHref: href });\n    this.toggleLinkDialog();\n  }\n\n  toggleLinkDialog = () => {\n    this.setState({isShowLinkDialog: !this.state.isShowLinkDialog});\n  }\n\n  componentDidMount() {\n    this.listOrgLinks(this.state.page);\n  }\n\n  render() {\n    const linkList = this.state.linkList;\n    return (\n      <Fragment>\n        <MainPanelTopbar/>\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <div className=\"cur-view-path\">\n              <h3 className=\"sf-heading\">{gettext('All Public Links')}</h3>\n            </div>\n            <div className=\"cur-view-content\">\n              <table>\n                <thead>\n                  <tr>\n                    <th width=\"50%\">{gettext('Name')}</th>\n                    <th width=\"15%\">{gettext('Owner')}</th>\n                    <th width=\"15%\">{gettext('Created At')}</th>\n                    <th width=\"10%\">{gettext('Count')}</th>\n                    <th width=\"10%\"></th>\n                  </tr>\n                </thead>\n                <tbody>\n                  {linkList && linkList.map((item, index) => {\n                    return(\n                      <React.Fragment key={index}>\n                        <RepoItem\n                          link={item}\n                          isItemFreezed={this.state.isItemFreezed}\n                          onFreezedItem={this.onFreezedItem}\n                          onUnfreezedItem={this.onUnfreezedItem}\n                          deleteOrgLink={this.deleteOrgLink}\n                          openLinkDialog={this.openLinkDialog}\n                        />\n                      </React.Fragment>\n                    );\n                  })}\n                </tbody>\n              </table>\n              <div className=\"paginator\">\n                {this.state.page != 1 && <a href=\"#\" onClick={(e) => this.onChangePageNum(e, -1)}>{gettext('Previous')}</a>}\n                {(this.state.page != 1 && this.state.pageNext) && <span> | </span>}\n                {this.state.pageNext && <a href=\"#\" onClick={(e) => this.onChangePageNum(e, 1)}>{gettext('Next')}</a>}\n              </div>\n            </div>\n          </div>\n        </div>\n        {this.state.isShowLinkDialog &&\n          <ViewLinkDialog currentLinkHref={this.state.currentLinkHref} toggle={this.toggleLinkDialog}/>\n        }\n      </Fragment>\n    );\n  }\n}\n\nconst propTypes = {\n  link: PropTypes.object.isRequired,\n  isItemFreezed: PropTypes.bool.isRequired,\n  onFreezedItem: PropTypes.func.isRequired,\n  onUnfreezedItem: PropTypes.func.isRequired,\n  deleteOrgLink: PropTypes.func.isRequired,\n  openLinkDialog: PropTypes.func.isRequired,\n};\n\nclass RepoItem extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      highlight: false,\n      showMenu: false,\n      isItemMenuShow: false,\n    };\n  }\n\n  onMouseEnter = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({ showMenu: true, highlight: true });\n    }\n  }\n\n  onMouseLeave = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({ showMenu: false, highlight: false });\n    }\n  }\n\n  onDropdownToggleClick = (e) => {\n    e.preventDefault();\n    this.toggleOperationMenu(e);\n  }\n\n  toggleOperationMenu = (e) => {\n    e.stopPropagation();\n    this.setState(\n      {isItemMenuShow: !this.state.isItemMenuShow }, () => {\n        if (this.state.isItemMenuShow) {\n          this.props.onFreezedItem();\n        } else {\n          this.setState({\n            highlight: false,\n            showMenu: false,\n          });\n          this.props.onUnfreezedItem();\n        }\n      }\n    );\n  }\n\n  render() {\n    const { link, deleteOrgLink } = this.props;\n    const href = siteRoot + 'org/useradmin/info/' + encodeURIComponent(link.owner_email) + '/';\n    return (\n      <tr className={this.state.highlight ? 'tr-highlight' : ''} onMouseEnter={this.onMouseEnter} onMouseLeave={this.onMouseLeave} >\n        <td>{link.name}</td>\n        <td><a href={href}>{link.owner_name}</a></td>\n        <td>{moment(link.created_time).fromNow()}</td>\n        <td>{link.view_count}</td>\n        <td className=\"cursor-pointer text-center\">\n          {this.state.showMenu &&\n            <Dropdown isOpen={this.state.isItemMenuShow} toggle={this.toggleOperationMenu}>\n              <DropdownToggle\n                tag=\"a\"\n                className=\"attr-action-icon fas fa-ellipsis-v\"\n                title={gettext('More Operations')}\n                data-toggle=\"dropdown\"\n                aria-expanded={this.state.isItemMenuShow}\n                onClick={this.onDropdownToggleClick}\n              />\n              <DropdownMenu>\n                <DropdownItem onClick={deleteOrgLink.bind(this, link.token)}>{gettext('Delete')}</DropdownItem>\n                <DropdownItem onClick={this.props.openLinkDialog.bind(this, link)}>{gettext('View Link')}</DropdownItem>\n              </DropdownMenu>\n            </Dropdown>\n          }\n        </td>\n      </tr>\n    );\n  }\n}\n\nRepoItem.propTypes = propTypes;\n\nexport default OrgLinks;\n","import React from 'react';\nimport '../../css/org-department-item.css';\n\nclass OrgDepartments extends React.Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    return (\n      <div className=\"h-100 org-departments\">\n        {this.props.children}\n      </div>\n    );\n  }\n}\n\nexport default OrgDepartments;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter, Input, Form, FormGroup, Label } from 'reactstrap';\nimport { gettext, orgID } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\n\nconst propTypes = {\n  groupID: PropTypes.string,\n  parentGroupID: PropTypes.string,\n  toggle: PropTypes.func.isRequired,\n  onDepartChanged: PropTypes.func.isRequired,\n};\n\nclass AddDepartDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      departName: '',\n      errMessage: '',\n    };\n    this.newInput = React.createRef();\n  }\n\n  componentDidMount() {\n    this.newInput.focus();\n    this.newInput.setSelectionRange(0, 0);\n  }\n\n  handleSubmit = () => {\n    let isValid = this.validateName();\n    if (isValid) {\n      let parentGroup = -1;\n      if (this.props.parentGroupID) {\n        parentGroup = this.props.parentGroupID;\n      }\n      seafileAPI.orgAdminAddDepartGroup(orgID, parentGroup, this.state.departName.trim()).then((res) => {\n        this.props.toggle();\n        this.props.onDepartChanged();\n      }).catch(error => {\n        let errorMsg = gettext(error.response.data.error_msg);\n        this.setState({ errMessage: errorMsg });\n      });\n    }\n  }\n\n  validateName = () => {\n    let errMessage = '';\n    const name = this.state.departName.trim();\n    if (!name.length) {\n      errMessage = gettext('Name is required');\n      this.setState({ errMessage: errMessage });\n      return false;\n    }\n    return true;\n  }\n\n  handleChange = (e) => {\n    this.setState({\n      departName: e.target.value,\n    });\n  }\n\n  handleKeyPress = (e) => {\n    if (e.key === 'Enter') {\n      this.handleSubmit();\n      e.preventDefault();\n    }\n  }\n\n  render() {\n    let header = this.props.parentGroupID ? gettext('New Sub-department') : gettext('New Department');\n    return (\n      <Modal isOpen={true} toggle={this.props.toggle}>\n        <ModalHeader toggle={this.props.toggle}>{header}</ModalHeader>\n        <ModalBody>\n          <Form>\n            <FormGroup>\n              <Label for=\"departName\">{gettext('Name')}</Label>\n              <Input\n                id=\"departName\"\n                onKeyPress={this.handleKeyPress}\n                value={this.state.departName}\n                onChange={this.handleChange}\n                innerRef={input => {this.newInput = input;}}\n              />\n            </FormGroup>\n          </Form>\n          { this.state.errMessage && <p className=\"error\">{this.state.errMessage}</p> }\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"primary\" onClick={this.handleSubmit}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nAddDepartDialog.propTypes = propTypes;\n\nexport default AddDepartDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter } from 'reactstrap';\nimport { gettext, orgID } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../../components/toast';\n\nconst propTypes = {\n  groupName: PropTypes.string,\n  groupID: PropTypes.number.isRequired,\n  toggle: PropTypes.func.isRequired,\n  onDepartChanged: PropTypes.func.isRequired\n};\n\nclass DeleteDepartDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  deleteDepart = () => {\n    this.props.toggle();\n    seafileAPI.orgAdminDeleteDepartGroup(orgID, this.props.groupID).then((res) => {\n      this.props.onDepartChanged();\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  render() {\n    let subtitle = gettext('Are you sure you want to delete {placeholder} ?');\n    subtitle = subtitle.replace('{placeholder}', '<span class=\"op-target\">' + Utils.HTMLescape(this.props.groupName) + '</span>');\n    return (\n      <Modal isOpen={true} toggle={this.props.toggle}>\n        <ModalHeader toggle={this.props.toggle}>{gettext('Delete Department')}</ModalHeader>\n        <ModalBody>\n          <p dangerouslySetInnerHTML={{__html: subtitle}}></p>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.props.toggle}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.deleteDepart}>{gettext('Delete')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nDeleteDepartDialog.propTypes = propTypes;\n\nexport default DeleteDepartDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter, Input, InputGroupAddon, InputGroup } from 'reactstrap';\nimport { gettext, orgID } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../toast';\n\nconst propTypes = {\n  toggle: PropTypes.func.isRequired,\n  groupID: PropTypes.number.isRequired,\n  onDepartChanged: PropTypes.func.isRequired,\n};\n\nclass SetGroupQuotaDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      quota: '',\n      errMessage: '',\n    };\n    this.newInput = React.createRef();\n  }\n\n  componentDidMount() {\n    this.newInput.focus();\n    this.newInput.setSelectionRange(0, 0);\n  }\n\n  setGroupQuota = () => {\n    const myReg = /^[1-9]\\d*$/im;\n    let quota = this.state.quota;\n    if ((quota.length && myReg.test(quota)) || quota == -2) {\n      this.setState({ errMessage: '' });\n      let newQuota = this.state.quota == -2 ? this.state.quota : this.state.quota * 1000000;\n      seafileAPI.orgAdminSetGroupQuota(orgID, this.props.groupID, newQuota).then((res) => {\n        this.props.toggle();\n        this.props.onDepartChanged();\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    } else {\n      const err = gettext('Quota is invalid.');\n      this.setState({ errMessage: err });\n    }\n  }\n\n  handleChange = (e) => {\n    const quota = e.target.value.trim();\n    this.setState({ quota: quota });\n  }\n\n  handleKeyPress = (e) => {\n    if (e.key === 'Enter') {\n      this.setGroupQuota();\n      e.preventDefault();\n    }\n  }\n\n  render() {\n    return (\n      <Modal isOpen={true} toggle={this.props.toggle}>\n        <ModalHeader toggle={this.props.toggle}>{gettext('Set Quota')}</ModalHeader>\n        <ModalBody>\n          <InputGroup>\n            <Input\n              onKeyPress={this.handleKeyPress}\n              value={this.state.quota}\n              onChange={this.handleChange}\n              innerRef={input => {this.newInput = input;}}\n            />\n            <InputGroupAddon addonType=\"append\">{'MB'}</InputGroupAddon>\n          </InputGroup>\n          <p className=\"tip\">\n            <br/><span>{gettext('An integer that is greater than 0 or equal to -2.')}</span><br/>\n            <span>{gettext('Tip: -2 means no limit.')}</span>\n          </p>\n          { this.state.errMessage && <p className=\"error\">{this.state.errMessage}</p> }\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"primary\" onClick={this.setGroupQuota}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nSetGroupQuotaDialog.propTypes = propTypes;\n\nexport default SetGroupQuotaDialog;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport moment from 'moment';\nimport { Link } from '@reach/router';\nimport { Utils } from '../../utils/utils.js';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport MainPanelTopbar from './main-panel-topbar';\nimport ModalPortal from '../../components/modal-portal';\nimport AddDepartDialog from '../../components/dialog/org-add-department-dialog';\nimport DeleteDepartDialog from '../../components/dialog/org-delete-department-dialog';\nimport SetGroupQuotaDialog from '../../components/dialog/org-set-group-quota-dialog';\nimport { siteRoot, gettext, orgID, lang } from '../../utils/constants';\nimport '../../css/org-department-item.css';\n\nmoment.locale(lang);\n\nclass OrgDepartmentsList extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      groups: null,\n      groupID: '',\n      groupName: '',\n      showDeleteDepartDialog: false,\n      showSetGroupQuotaDialog: false,\n      isShowAddDepartDialog: false,\n    };\n  }\n\n  componentDidMount() {\n    this.listDepartGroups();\n  }\n\n  listDepartGroups = () => {\n    seafileAPI.orgAdminListDepartGroups(orgID).then(res => {\n      this.setState({ groups: res.data.data });\n    });\n  }\n\n  showDeleteDepartDialog = (group) => {\n    this.setState({ showDeleteDepartDialog: true, groupID: group.id, groupName: group.name });\n  }\n\n  showSetGroupQuotaDialog = (groupID) => {\n    this.setState({ showSetGroupQuotaDialog: true, groupID: groupID });\n  }\n\n  toggleAddDepartDialog = () => {\n    this.setState({ isShowAddDepartDialog: !this.state.isShowAddDepartDialog});\n  }\n\n  toggleCancel = () => {\n    this.setState({\n      showDeleteDepartDialog: false,\n      showSetGroupQuotaDialog: false,\n    });\n  }\n\n  onDepartChanged = () => {\n    this.listDepartGroups();\n  }\n\n  render() {\n    const groups = this.state.groups;\n    const topbarChildren = (\n      <Fragment>\n        <button className='btn btn-secondary operation-item' title={gettext('New Department')} onClick={this.toggleAddDepartDialog}>{gettext('New Department')}\n        </button>\n        {this.state.isShowAddDepartDialog && (\n          <ModalPortal>\n            <AddDepartDialog\n              onDepartChanged={this.onDepartChanged}\n              groupID={this.state.groupID}\n              toggle={this.toggleAddDepartDialog}\n            />\n          </ModalPortal>\n        )}\n      </Fragment>\n    );\n    return (\n      <Fragment>\n        <MainPanelTopbar children={topbarChildren}/>\n        <div className=\"main-panel-center flex-row h-100\">\n          <div className=\"cur-view-container o-auto\">\n            <div className=\"cur-view-path\">\n              <div className=\"fleft\">\n                <h3 className=\"sf-heading\">{gettext('Departments')}</h3>\n              </div>\n            </div>\n            <div className=\"cur-view-content\">\n              {groups && groups.length > 0 ?\n                <table>\n                  <thead>\n                    <tr>\n                      <th width=\"40%\">{gettext('Name')}</th>\n                      <th width=\"25%\">{gettext('Created At')}</th>\n                      <th width=\"20%\">{gettext('Quota')}</th>\n                      <th width=\"15%\"></th>\n                    </tr>\n                  </thead>\n                  <tbody>\n                    {groups.map((group, index) => {\n                      return(\n                        <React.Fragment key={group.id}>\n                          <GroupItem\n                            group={group}\n                            showDeleteDepartDialog={this.showDeleteDepartDialog}\n                            showSetGroupQuotaDialog={this.showSetGroupQuotaDialog}\n                          />\n                        </React.Fragment>\n                      );\n                    })}\n                  </tbody>\n                </table>\n                :\n                <p className=\"no-group\">{gettext('No departments')}</p>\n              }\n            </div>\n            <React.Fragment>\n              {this.state.showDeleteDepartDialog && (\n                <ModalPortal>\n                  <DeleteDepartDialog\n                    toggle={this.toggleCancel}\n                    groupID={this.state.groupID}\n                    groupName={this.state.groupName}\n                    onDepartChanged={this.onDepartChanged}\n                  />\n                </ModalPortal>\n              )}\n              {this.state.showSetGroupQuotaDialog && (\n                <ModalPortal>\n                  <SetGroupQuotaDialog\n                    toggle={this.toggleCancel}\n                    groupID={this.state.groupID}\n                    onDepartChanged={this.onDepartChanged}\n                  />\n                </ModalPortal>\n              )}\n            </React.Fragment>\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nclass GroupItem extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      highlight: false,\n    };\n  }\n\n  onMouseEnter = () => {\n    this.setState({ highlight: true });\n  }\n\n  onMouseLeave = () => {\n    this.setState({ highlight: false });\n  }\n\n  render() {\n    const group = this.props.group;\n    const highlight = this.state.highlight;\n    const newHref = siteRoot+ 'org/departmentadmin/groups/' + group.id + '/';\n    return (\n      <tr className={highlight ? 'tr-highlight' : ''} onMouseEnter={this.onMouseEnter} onMouseLeave={this.onMouseLeave}>\n        <td><Link to={newHref}>{group.name}</Link></td>\n        <td>{moment(group.created_at).fromNow()}</td>\n        <td onClick={this.props.showSetGroupQuotaDialog.bind(this, group.id)}>\n          {Utils.bytesToSize(group.quota)}{' '}\n          <span title=\"Edit Quota\" className={`fa fa-pencil-alt attr-action-icon ${highlight ? '' : 'vh'}`}></span>\n        </td>\n        <td className=\"cursor-pointer text-center\" onClick={this.props.showDeleteDepartDialog.bind(this, group)}>\n          <span className={`sf2-icon-delete action-icon  ${highlight ? '' : 'vh'}`} title=\"Delete\"></span>\n        </td>\n      </tr>\n    );\n  }\n}\n\nconst GroupItemPropTypes = {\n  group: PropTypes.object.isRequired,\n  showSetGroupQuotaDialog: PropTypes.func.isRequired,\n  showDeleteDepartDialog: PropTypes.func.isRequired,\n};\n\nGroupItem.propTypes = GroupItemPropTypes;\n\nexport default OrgDepartmentsList;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter } from 'reactstrap';\nimport { gettext, orgID } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../toast';\nimport UserSelect from '../user-select.js';\n\nconst propTypes = {\n  toggle: PropTypes.func.isRequired,\n  groupID:  PropTypes.string.isRequired,\n  onMemberChanged: PropTypes.func.isRequired\n};\n\nclass AddMemberDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      selectedOption: null,\n      errMessage: '',\n    };\n    this.Options = [];\n  }\n\n  handleSelectChange = (option) => {\n    this.setState({ selectedOption: option });\n    this.Options = [];\n  }\n\n  handleSubmit = () => {\n    if (!this.state.selectedOption) return;\n    const email = this.state.selectedOption.email;\n    this.refs.orgSelect.clearSelect();\n    this.setState({ errMessage: [] });\n    seafileAPI.orgAdminAddGroupMember(orgID, this.props.groupID, email).then((res) => {\n      this.setState({ selectedOption: null });\n      if (res.data.failed.length > 0) {\n        this.setState({ errMessage: res.data.failed[0].error_msg });\n      }\n      if (res.data.success.length > 0) {\n        this.props.onMemberChanged();\n        this.props.toggle();\n      }\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  render() {\n    return (\n      <Modal isOpen={true} toggle={this.props.toggle}>\n        <ModalHeader toggle={this.props.toggle}>{gettext('Add Member')}</ModalHeader>\n        <ModalBody>\n          <UserSelect\n            placeholder={gettext('Search users...')}\n            onSelectChange={this.handleSelectChange}\n            ref=\"orgSelect\"\n            isMulti={false}\n            className='org-add-member-select'\n          />\n          { this.state.errMessage && <p className=\"error\">{this.state.errMessage}</p> }\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"primary\" onClick={this.handleSubmit}>{gettext('Submit')}</Button>\n          <Button color=\"secondary\" onClick={this.props.toggle}>{gettext('Cancel')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nAddMemberDialog.propTypes = propTypes;\n\nexport default AddMemberDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter } from 'reactstrap';\nimport { gettext, orgID } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../toast';\n\nconst propTypes = {\n  member: PropTypes.object.isRequired,\n  groupID: PropTypes.string.isRequired,\n  toggle: PropTypes.func.isRequired,\n  onMemberChanged: PropTypes.func.isRequired\n};\n\nclass DeleteMemberDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  deleteMember = () => {\n    const userEmail = this.props.member.email;\n    seafileAPI.orgAdminDeleteGroupMember(orgID, this.props.groupID, userEmail).then((res) => {\n      if (res.data.success) {\n        this.props.onMemberChanged();\n        this.props.toggle();\n      }\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  render() {\n    let subtitle = gettext('Are you sure you want to delete {placeholder} ?');\n    subtitle = subtitle.replace('{placeholder}', '<span class=\"op-target\">' + Utils.HTMLescape(this.props.member.name) + '</span>');\n    return (\n      <Modal isOpen={true} toggle={this.props.toggle}>\n        <ModalHeader toggle={this.props.toggle}>{gettext('Delete Member')}</ModalHeader>\n        <ModalBody>\n          <div dangerouslySetInnerHTML={{__html: subtitle}}></div>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"primary\" onClick={this.deleteMember}>{gettext('Delete')}</Button>\n          <Button color=\"secondary\" onClick={this.props.toggle}>{gettext('Cancel')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nDeleteMemberDialog.propTypes = propTypes;\n\nexport default DeleteMemberDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter, Input, Form, FormGroup, Label } from 'reactstrap';\nimport { gettext, orgID } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\n\nconst propTypes = {\n  toggle: PropTypes.func.isRequired,\n  groupID: PropTypes.string.isRequired,\n  onRepoChanged: PropTypes.func.isRequired,\n};\n\nclass AddRepoDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      repoName: '',\n      errMessage: '',\n    };\n    this.newInput = React.createRef();\n  }\n\n  componentDidMount() {\n    this.newInput.focus();\n    this.newInput.setSelectionRange(0, 0);\n  }\n\n  handleSubmit = () => {\n    let isValid = this.validateName();\n    if (isValid) {\n      seafileAPI.orgAdminAddDepartmentRepo(orgID, this.props.groupID, this.state.repoName.trim()).then((res) => {\n        this.props.toggle();\n        this.props.onRepoChanged();\n      }).catch(error => {\n        let errorMsg = Utils.getErrorMsg(error);\n        this.setState({ errMessage: errorMsg });\n      });\n    }\n  }\n\n  validateName = () => {\n    let errMessage = '';\n    const name = this.state.repoName.trim();\n    if (!name.length) {\n      errMessage = gettext('Name is required');\n      this.setState({ errMessage: errMessage });\n      return false;\n    }\n    return true;\n  }\n\n  handleChange = (e) => {\n    this.setState({\n      repoName: e.target.value,\n    });\n  }\n\n  handleKeyPress = (e) => {\n    if (e.key === 'Enter') {\n      this.handleSubmit();\n      e.preventDefault();\n    }\n  }\n\n  render() {\n    return (\n      <Modal isOpen={true} toggle={this.props.toggle}>\n        <ModalHeader toggle={this.props.toggle}>{gettext('New Library')}</ModalHeader>\n        <ModalBody>\n          <Form>\n            <FormGroup>\n              <Label for=\"repoName\">{gettext('Name')}</Label>\n              <Input\n                id=\"repoName\"\n                onKeyPress={this.handleKeyPress}\n                value={this.state.repoName}\n                onChange={this.handleChange}\n                innerRef={input => {this.newInput = input;}}\n              />\n            </FormGroup>\n          </Form>\n          { this.state.errMessage && <p className=\"error\">{this.state.errMessage}</p> }\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"primary\" onClick={this.handleSubmit}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nAddRepoDialog.propTypes = propTypes;\n\nexport default AddRepoDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter } from 'reactstrap';\nimport { gettext, orgID } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../toast';\n\nclass DeleteRepoDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  deleteRepo = () => {\n    seafileAPI.orgAdminDeleteDepartmentRepo(orgID, this.props.groupID, this.props.repo.repo_id).then((res) => {\n      if (res.data.success) {\n        this.props.onRepoChanged();\n        this.props.toggle();\n      }\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  render() {\n    let subtitle = gettext('Are you sure you want to delete {placeholder} ?');\n    subtitle = subtitle.replace('{placeholder}', '<span class=\"op-target\">' + Utils.HTMLescape(this.props.repo.name) + '</span>');\n    return (\n      <Modal isOpen={true} toggle={this.props.toggle}>\n        <ModalHeader toggle={this.props.toggle}>{gettext('Delete Library')}</ModalHeader>\n        <ModalBody>\n          <div dangerouslySetInnerHTML={{__html: subtitle}}></div>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"primary\" onClick={this.deleteRepo}>{gettext('Delete')}</Button>\n          <Button color=\"secondary\" onClick={this.props.toggle}>{gettext('Cancel')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nconst propTypes = {\n  repo: PropTypes.object.isRequired,\n  toggle: PropTypes.func.isRequired,\n  groupID: PropTypes.string.isRequired,\n  onRepoChanged: PropTypes.func.isRequired\n};\n\nDeleteRepoDialog.propTypes = propTypes;\n\nexport default DeleteRepoDialog;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport moment from 'moment';\nimport { Link } from '@reach/router';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils.js';\nimport toaster from '../../components/toast';\nimport MainPanelTopbar from './main-panel-topbar';\nimport ModalPortal from '../../components/modal-portal';\nimport RoleEditor from '../../components/select-editor/role-editor';\nimport AddDepartDialog from '../../components/dialog/org-add-department-dialog';\nimport AddMemberDialog from '../../components/dialog/org-add-member-dialog';\nimport DeleteMemberDialog from '../../components/dialog/org-delete-member-dialog';\nimport AddRepoDialog from '../../components/dialog/org-add-repo-dialog';\nimport DeleteRepoDialog from '../../components/dialog/org-delete-repo-dialog';\nimport DeleteDepartDialog from '../../components/dialog/org-delete-department-dialog';\nimport SetGroupQuotaDialog from '../../components/dialog/org-set-group-quota-dialog';\nimport { serviceURL, siteRoot, gettext, orgID, lang } from '../../utils/constants';\nimport '../../css/org-department-item.css';\n\nmoment.locale(lang);\n\nclass OrgDepartmentItem extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      groupName: '',\n      isItemFreezed: false,\n      ancestorGroups: [],\n      members: [],\n      deletedMember: {},\n      isShowAddMemberDialog: false,\n      showDeleteMemberDialog: false,\n      repos: [],\n      deletedRepo: {},\n      isShowAddRepoDialog: false,\n      showDeleteRepoDialog: false,\n      groups: [],\n      subGroupID: '',\n      subGroupName: '',\n      isShowAddDepartDialog: false,\n      showDeleteDepartDialog: false,\n      showSetGroupQuotaDialog: false,\n    };\n  }\n\n  componentDidMount() {\n    const groupID = this.props.groupID;\n    this.listOrgGroupRepo(groupID);\n    this.listOrgMembers(groupID);\n  }\n\n  componentWillReceiveProps(nextProps) {\n    if (this.props.groupID !== nextProps.groupID) {\n      this.listOrgGroupRepo(nextProps.groupID);\n      this.listOrgMembers(nextProps.groupID);\n    }\n  }\n\n  listOrgGroupRepo = (groupID) => {\n    seafileAPI.orgAdminListGroupRepos(orgID, groupID).then(res => {\n      this.setState({ repos: res.data.libraries });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  listOrgMembers = (groupID) => {\n    seafileAPI.orgAdminListGroupInfo(orgID, groupID, true).then(res => {\n      this.setState({\n        members: res.data.members,\n        groups: res.data.groups,\n        ancestorGroups: res.data.ancestor_groups,\n        groupName: res.data.name,\n      });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  listSubDepartGroups = (groupID) => {\n    seafileAPI.orgAdminListGroupInfo(orgID, groupID, true).then(res => {\n      this.setState({ groups: res.data.groups });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  toggleCancel = () => {\n    this.setState({\n      showDeleteMemberDialog: false,\n      showDeleteRepoDialog: false,\n      showDeleteDepartDialog: false,\n      showSetGroupQuotaDialog: false,\n    });\n  }\n\n  onSubDepartChanged = () => {\n    this.listSubDepartGroups(this.props.groupID);\n  }\n\n  onRepoChanged = () => {\n    this.listOrgGroupRepo(this.props.groupID);\n  }\n\n  onMemberChanged = () => {\n    this.listOrgMembers(this.props.groupID);\n  }\n\n  toggleItemFreezed = (isFreezed) => {\n    this.setState({ isItemFreezed: isFreezed });\n  }\n\n  showDeleteMemberDialog = (member) => {\n    this.setState({ showDeleteMemberDialog: true, deletedMember: member });\n  }\n\n  showDeleteRepoDialog = (repo) => {\n    this.setState({ showDeleteRepoDialog: true, deletedRepo: repo });\n  }\n\n  toggleAddRepoDialog = () => {\n    this.setState({ isShowAddRepoDialog: !this.state.isShowAddRepoDialog });\n  }\n\n  toggleAddMemberDialog = () => {\n    this.setState({ isShowAddMemberDialog: !this.state.isShowAddMemberDialog });\n  }\n\n  toggleAddDepartDialog = () => {\n    this.setState({ isShowAddDepartDialog: !this.state.isShowAddDepartDialog});\n  }\n\n  showDeleteDepartDialog = (subGroup) => {\n    this.setState({\n      showDeleteDepartDialog: true,\n      subGroupID: subGroup.id,\n      subGroupName: subGroup.name\n    });\n  }\n\n  showSetGroupQuotaDialog = (subGroupID) => {\n    this.setState({\n      showSetGroupQuotaDialog: true,\n      subGroupID: subGroupID\n    });\n  }\n\n  render() {\n    const { members, repos, groups } = this.state;\n    const groupID = this.props.groupID;\n    const topBtn = 'btn btn-secondary operation-item';\n    const topbarChildren = (\n      <Fragment>\n        {groupID &&\n          <button className={topBtn} title={gettext('New Sub-department')} onClick={this.toggleAddDepartDialog}>{gettext('New Sub-department')}</button>\n        }\n        {groupID &&\n          <button className={topBtn} title={gettext('Add Member')} onClick={this.toggleAddMemberDialog}>{gettext('Add Member')}</button>\n        }\n        {groupID &&\n          <button className={topBtn} onClick={this.toggleAddRepoDialog} title={gettext('New Library')}>{gettext('New Library')}</button>\n        }\n        {this.state.isShowAddMemberDialog && (\n          <ModalPortal>\n            <AddMemberDialog\n              toggle={this.toggleAddMemberDialog}\n              onMemberChanged={this.onMemberChanged}\n              groupID={groupID}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isShowAddRepoDialog && (\n          <ModalPortal>\n            <AddRepoDialog\n              toggle={this.toggleAddRepoDialog}\n              onRepoChanged={this.onRepoChanged}\n              groupID={groupID}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isShowAddDepartDialog && (\n          <ModalPortal>\n            <AddDepartDialog\n              onDepartChanged={this.onSubDepartChanged}\n              parentGroupID={groupID}\n              toggle={this.toggleAddDepartDialog}\n            />\n          </ModalPortal>\n        )}\n      </Fragment>\n    );\n\n    return (\n      <Fragment>\n        <MainPanelTopbar children={topbarChildren} />\n        <div className=\"main-panel-center flex-row h-100\">\n          <div className=\"cur-view-container o-auto\">\n            <div className=\"cur-view-path\">\n              <div className=\"fleft\">\n                <h3 className=\"sf-heading\">\n                  {groupID ?\n                    <Link to={siteRoot + 'org/departmentadmin/'}>{gettext('Departments')}</Link>\n                    : <span>{gettext('Departments')}</span>\n                  }\n                  {this.state.ancestorGroups.map(ancestor => {\n                    let newHref = siteRoot + 'org/departmentadmin/groups/' + ancestor.id + '/';\n                    return <span key={ancestor.id}>{' / '}<Link to={newHref}>{ancestor.name}</Link></span>;\n                  })}\n                  {groupID && <span>{' / '}{this.state.groupName}</span>}\n                </h3>\n              </div>\n            </div>\n\n            <div className=\"cur-view-subcontainer org-groups\">\n              <div className=\"cur-view-path\">\n                <div className=\"fleft\"><h3 className=\"sf-heading\">{gettext('Sub-departments')}</h3></div>\n              </div>\n              <div className=\"cur-view-content\">\n                {groups && groups.length > 0 ?\n                  <table>\n                    <thead>\n                      <tr>\n                        <th width=\"40%\">{gettext('Name')}</th>\n                        <th width=\"25%\">{gettext('Created At')}</th>\n                        <th width=\"20%\">{gettext('Quota')}</th>\n                        <th width=\"15%\"></th>\n                      </tr>\n                    </thead>\n                    <tbody>\n                      {groups.map((group, index) => {\n                        return(\n                          <React.Fragment key={group.id}>\n                            <GroupItem\n                              group={group}\n                              showDeleteDepartDialog={this.showDeleteDepartDialog}\n                              showSetGroupQuotaDialog={this.showSetGroupQuotaDialog}\n                            />\n                          </React.Fragment>\n                        );\n                      })}\n                    </tbody>\n                  </table>\n                  : <p className=\"no-group\">{gettext('No sub-departments')}</p>\n                }\n              </div>\n            </div>\n\n            <div className=\"cur-view-subcontainer org-members\">\n              <div className=\"cur-view-path\">\n                <div className=\"fleft\"><h3 className=\"sf-heading\">{gettext('Members')}</h3></div>\n              </div>\n              <div className=\"cur-view-content\">\n                {(!members || members.length === 0) ?\n                  <p className=\"no-member\">{gettext('No members')}</p> :\n                  <table>\n                    <thead>\n                      <tr>\n                        <th width=\"5%\"></th>\n                        <th width=\"50%\">{gettext('Name')}</th>\n                        <th width=\"15%\">{gettext('Role')}</th>\n                        <th width=\"30%\"></th>\n                      </tr>\n                    </thead>\n                    <tbody>\n                      {members.map((member, index) => {\n                        return (\n                          <React.Fragment key={index}>\n                            <MemberItem\n                              member={member}\n                              showDeleteMemberDialog={this.showDeleteMemberDialog}\n                              isItemFreezed={this.state.isItemFreezed}\n                              onMemberChanged={this.onMemberChanged}\n                              toggleItemFreezed={this.toggleItemFreezed}\n                              groupID={groupID}\n                            />\n                          </React.Fragment>\n                        );\n                      })}\n                    </tbody>\n                  </table>\n                }\n              </div>\n            </div>\n\n            <div className=\"cur-view-subcontainer org-libriries\">\n              <div className=\"cur-view-path\">\n                <div className=\"fleft\"><h3 className=\"sf-heading\">{gettext('Libraries')}</h3></div>\n              </div>\n              { repos.length > 0 ?\n                <div className=\"cur-view-content\">\n                  <table>\n                    <thead>\n                      <tr>\n                        <th width=\"5%\"></th>\n                        <th width=\"50%\">{gettext('Name')}</th>\n                        <th width=\"30%\">{gettext('Size')}</th>\n                        <th width=\"15%\"></th>\n                      </tr>\n                    </thead>\n                    <tbody>\n                      {repos.map((repo, index) => {\n                        return(\n                          <React.Fragment key={index}>\n                            <RepoItem repo={repo} showDeleteRepoDialog={this.showDeleteRepoDialog}/>\n                          </React.Fragment>\n                        );\n                      })}\n                    </tbody>\n                  </table>\n                </div>\n                : <p className=\"no-libraty\">{gettext('No libraries')}</p>\n              }\n            </div>\n\n          </div>\n          <React.Fragment>\n            {this.state.showDeleteMemberDialog && (\n              <ModalPortal>\n                <DeleteMemberDialog\n                  toggle={this.toggleCancel}\n                  onMemberChanged={this.onMemberChanged}\n                  member={this.state.deletedMember}\n                  groupID={groupID}\n                />\n              </ModalPortal>\n            )}\n            {this.state.showDeleteRepoDialog && (\n              <ModalPortal>\n                <DeleteRepoDialog\n                  toggle={this.toggleCancel}\n                  onRepoChanged={this.onRepoChanged}\n                  repo={this.state.deletedRepo}\n                  groupID={groupID}\n                />\n              </ModalPortal>\n            )}\n            {this.state.showDeleteDepartDialog && (\n              <ModalPortal>\n                <DeleteDepartDialog\n                  toggle={this.toggleCancel}\n                  groupID={this.state.subGroupID}\n                  groupName={this.state.subGroupName}\n                  onDepartChanged={this.onSubDepartChanged}\n                />\n              </ModalPortal>\n            )}\n            {this.state.showSetGroupQuotaDialog && (\n              <ModalPortal>\n                <SetGroupQuotaDialog\n                  toggle={this.toggleCancel}\n                  groupID={this.state.subGroupID}\n                  onDepartChanged={this.onSubDepartChanged}\n                />\n              </ModalPortal>\n            )}\n          </React.Fragment>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nclass MemberItem extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      highlight: false,\n      showRoleMenu: false,\n    };\n    this.roles = ['Admin', 'Member'];\n  }\n\n  onMouseEnter = () => {\n    if (this.props.isItemFreezed) return;\n    this.setState({ highlight: true });\n  }\n\n  onMouseLeave = () => {\n    if (this.props.isItemFreezed) return;\n    this.setState({ highlight: false });\n  }\n\n  toggleMemberRoleMenu = () => {\n    this.setState({ showRoleMenu: !this.state.showRoleMenu });\n  }\n\n  onChangeUserRole = (role) => {\n    let isAdmin = role === 'Admin' ? true : false;\n    seafileAPI.orgAdminSetGroupMemberRole(orgID, this.props.groupID, this.props.member.email, isAdmin).then((res) => {\n      this.props.onMemberChanged();\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n    this.setState({\n      highlight: false,\n    });\n  }\n\n  render() {\n    const member = this.props.member;\n    const highlight = this.state.highlight;\n    let memberLink = serviceURL + '/org/useradmin/info/' + member.email + '/';\n    if (member.role === 'Owner') return null;\n    return (\n      <tr className={highlight ? 'tr-highlight' : ''} onMouseEnter={this.onMouseEnter} onMouseLeave={this.onMouseLeave}>\n        <td><img src={member.avatar_url} alt=\"member-header\" width=\"24\" className=\"avatar\"/></td>\n        <td><a href={memberLink}>{member.name}</a></td>\n        <td>\n          <RoleEditor\n            isTextMode={true}\n            isEditIconShow={highlight}\n            currentRole={member.role}\n            roles={this.roles}\n            onRoleChanged={this.onChangeUserRole}\n            toggleItemFreezed={this.props.toggleItemFreezed}\n          />\n        </td>\n        {!this.props.isItemFreezed ?\n          <td className=\"cursor-pointer text-center\" onClick={this.props.showDeleteMemberDialog.bind(this, member)}>\n            <span className={`sf2-icon-x3 action-icon ${highlight ? '' : 'vh'}`} title=\"Delete\"></span>\n          </td> : <td></td>\n        }\n      </tr>\n    );\n  }\n}\n\nconst MemberItemPropTypes = {\n  groupID: PropTypes.string.isRequired,\n  member: PropTypes.object.isRequired,\n  isItemFreezed: PropTypes.bool.isRequired,\n  onMemberChanged: PropTypes.func.isRequired,\n  showDeleteMemberDialog: PropTypes.func.isRequired,\n  toggleItemFreezed: PropTypes.func.isRequired,\n};\n\nMemberItem.propTypes = MemberItemPropTypes;\n\nclass RepoItem extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      highlight: false,\n    };\n  }\n\n  onMouseEnter = () => {\n    this.setState({ highlight: true });\n  }\n\n  onMouseLeave = () => {\n    this.setState({ highlight: false });\n  }\n\n  render() {\n    const repo = this.props.repo;\n    const highlight = this.state.highlight;\n    let iconUrl = Utils.getLibIconUrl(repo);\n    return (\n      <tr className={highlight ? 'tr-highlight' : ''} onMouseEnter={this.onMouseEnter} onMouseLeave={this.onMouseLeave}>\n        <td><img src={iconUrl} width=\"24\" alt={gettext('icon')}/></td>\n        <td>{repo.name}</td>\n        <td>{Utils.bytesToSize(repo.size)}{' '}</td>\n        <td className=\"cursor-pointer text-center\" onClick={this.props.showDeleteRepoDialog.bind(this, repo)}>\n          <span className={`sf2-icon-delete action-icon ${highlight ? '' : 'vh'}`} title=\"Delete\"></span>\n        </td>\n      </tr>\n    );\n  }\n}\n\nconst RepoItemPropTypes = {\n  repo: PropTypes.object.isRequired,\n  showDeleteRepoDialog: PropTypes.func.isRequired,\n};\n\nRepoItem.propTypes = RepoItemPropTypes;\n\nclass GroupItem extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      highlight: false,\n    };\n  }\n\n  onMouseEnter = () => {\n    this.setState({ highlight: true });\n  }\n\n  onMouseLeave = () => {\n    this.setState({ highlight: false });\n  }\n\n  render() {\n    const group = this.props.group;\n    const highlight = this.state.highlight;\n    const newHref = siteRoot+ 'org/departmentadmin/groups/' + group.id + '/';\n    return (\n      <tr className={highlight ? 'tr-highlight' : ''} onMouseEnter={this.onMouseEnter} onMouseLeave={this.onMouseLeave}>\n        <td><Link to={newHref}>{group.name}</Link></td>\n        <td>{moment(group.created_at).fromNow()}</td>\n        <td onClick={this.props.showSetGroupQuotaDialog.bind(this, group.id)}>\n          {Utils.bytesToSize(group.quota)}{' '}\n          <span title=\"Edit Quota\" className={`fa fa-pencil-alt attr-action-icon ${highlight ? '' : 'vh'}`}></span>\n        </td>\n        <td className=\"cursor-pointer text-center\" onClick={this.props.showDeleteDepartDialog.bind(this, group)}>\n          <span className={`sf2-icon-delete action-icon ${highlight ? '' : 'vh'}`} title=\"Delete\"></span>\n        </td>\n      </tr>\n    );\n  }\n}\n\nconst GroupItemPropTypes = {\n  group: PropTypes.object.isRequired,\n  groupID: PropTypes.string,\n  showSetGroupQuotaDialog: PropTypes.func.isRequired,\n  showDeleteDepartDialog: PropTypes.func.isRequired,\n  isSubdepartChanged: PropTypes.bool,\n};\n\nGroupItem.propTypes = GroupItemPropTypes;\n\n\nconst OrgDepartmentItemPropTypes = {\n  groupID: PropTypes.string,\n};\n\nOrgDepartmentItem.propTypes = OrgDepartmentItemPropTypes;\n\nexport default OrgDepartmentItem;\n","import React, { Component, Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Link } from '@reach/router';\nimport { siteRoot, gettext } from '../../utils/constants';\nimport MainPanelTopbar from './main-panel-topbar';\n\nclass OrgLogs extends Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  tabItemClick = (param) => {\n    this.props.tabItemClick(param);\n  }\n\n  render() {\n    return (\n      <Fragment>\n        <MainPanelTopbar/>\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <div className=\"cur-view-path org-user-nav\">\n              <ul className=\"nav\">\n                <li className=\"nav-item\" onClick={() => this.tabItemClick('logadmin')}>\n                  <Link\n                    className={`nav-link ${this.props.currentTab === 'logadmin' ? 'active': ''}`}\n                    to={siteRoot + 'org/logadmin/'} title={gettext('File Access')}>{gettext('File Access')}\n                  </Link>\n                </li>\n                <li className=\"nav-item\" onClick={() => this.tabItemClick('file-update')}>\n                  <Link\n                    className={`nav-link ${this.props.currentTab === 'file-update' ? 'active': ''}`}\n                    to={siteRoot + 'org/logadmin/file-update/'} title={gettext('File Update')}>{gettext('File Update')}\n                  </Link>\n                </li>\n                <li className=\"nav-item\" onClick={() => this.tabItemClick('perm-audit')}>\n                  <Link\n                    className={`nav-link ${this.props.currentTab === 'perm-audit' ? 'active': ''}`}\n                    to={siteRoot + 'org/logadmin/perm-audit/'} title={gettext('Permission')}>{gettext('Permission')}\n                  </Link>\n                </li>\n              </ul>\n            </div>\n            {this.props.children}\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nconst propTypes = {\n  currentTab: PropTypes.string.isRequired,\n  tabItemClick: PropTypes.func.isRequired,\n};\n\nOrgLogs.propTypes = propTypes;\n\nexport default OrgLogs;\n","import { lang } from '../utils/constants';\nimport moment from 'moment';\n\nmoment.locale(lang);\n\nclass OrgLogsFileAuditEvent {\n  constructor(object) {\n    this.ip = object.ip;\n    this.type = object.type;\n    this.device = object.device;\n    this.repo_id = object.repo_id;\n    this.repo_name = object.repo_name;\n    this.file_name = object.file_name;\n    this.file_path = object.file_path;\n    this.user_name = object.user_name;\n    this.user_email = object.user_email;\n    this.user_contact_email = object.user_contact_email;\n    this.time = moment(object.time).format('YYYY-MM-DD HH:mm:ss');\n  }\n}\n\nexport default OrgLogsFileAuditEvent;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport moment from 'moment';\nimport { Dropdown, DropdownToggle, DropdownMenu, DropdownItem } from 'reactstrap';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { siteRoot, gettext, lang } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../../components/toast';\nimport OrgLogsFileAuditEvent from '../../models/org-logs-file-audit';\nimport '../../css/org-logs.css';\n\nmoment.locale(lang);\n\nclass OrgLogsFileAudit extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      page: 1,\n      pageNext: false,\n      eventList: [],\n      userSelected: '',\n      repoSelected: '',\n      isItemFreezed: false\n    };\n  }\n\n  componentDidMount() {\n    let page = this.state.page;\n    let email = this.state.userSelected;\n    let repoID = this.state.repoSelected;\n    this.initData(email, repoID, page);\n  }\n\n  initData = (email, repoID, page) => {\n    seafileAPI.orgAdminListFileAudit(email, repoID, page).then(res => {\n      let eventList = res.data.log_list.map(item => {\n        return new OrgLogsFileAuditEvent(item);\n      });\n\n      this.setState({\n        eventList: eventList,\n        pageNext: res.data.page_next,\n        page: res.data.page,\n        userSelected: res.data.user_selected,\n        repoSelected: res.data.repo_selected\n      });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n\n  onChangePageNum = (e, num) => {\n    e.preventDefault();\n    let page = this.state.page;\n\n    if (num == 1) {\n      page = page + 1;\n    } else {\n      page = page - 1;\n    }\n    let email = this.state.userSelected;\n    let repoID = this.state.repoSelected;\n    this.initData(email, repoID, page);\n  }\n\n  filterUser = (userSelected) => {\n    this.setState({ userSelected: userSelected });\n  }\n\n  filterRepo = (repoSelected) => {\n    this.setState({ repoSelected: repoSelected });\n  }\n\n  render() {\n    let eventList = this.state.eventList;\n    return (\n      <div className=\"cur-view-content\">\n        {\n          (this.state.userSelected || this.state.repoSelected) &&\n          <React.Fragment>\n            {this.state.userSelected &&\n              <span className=\"audit-unselect-item\" onClick={this.filterUser.bind(this, null)}>\n                <span className=\"no-deco\">{this.state.userSelected}</span>{' '}\n              </span>\n            }\n            {this.state.repoSelected &&\n              <span className=\"audit-unselect-item\" onClick={this.filterRepo.bind(this, null)}>\n                <span className=\"no-deco\">{this.state.repoSelected}</span>{' '}\n              </span>\n            }\n          </React.Fragment>\n        }\n        <table>\n          <thead>\n            <tr>\n              <th width=\"24%\">{gettext('User')}</th>\n              <th width=\"10%\">{gettext('Type')}</th>\n              <th width=\"13%\">{gettext('IP')}</th>\n              <th width=\"17%\">{gettext('Date')}</th>\n              <th width=\"18%\">{gettext('Library')}</th>\n              <th width=\"18%\">{gettext('File')}</th>\n            </tr>\n          </thead>\n          <tbody>\n            {eventList.map((item, index) => {\n              return (\n                <FileAuditItem\n                  key={index}\n                  fileEvent={item}\n                  isItemFreezed={this.state.isItemFreezed}\n                  filterUser={this.filterUser}\n                  filterRepo={this.filterRepo}\n                  userSelected={this.state.userSelected}\n                  repoSelected={this.state.repoSelected}\n                />\n              );\n            })}\n          </tbody>\n        </table>\n        <div className=\"paginator\">\n          {this.state.page != 1 && <a href=\"#\" onClick={(e) => this.onChangePageNum(e, -1)}>{gettext('Previous')}</a>}\n          {(this.state.page != 1 && this.state.pageNext) && <span> | </span>}\n          {this.state.pageNext && <a href=\"#\" onClick={(e) => this.onChangePageNum(e, 1)}>{gettext('Next')}</a>}\n        </div>\n      </div>\n    );\n  }\n}\n\nconst propTypes = {\n  filterUser: PropTypes.func.isRequired,\n  filterRepo: PropTypes.func.isRequired,\n  isItemFreezed: PropTypes.bool.isRequired,\n  fileEvent: PropTypes.object.isRequired,\n  userSelected: PropTypes.string,\n  repoSelected: PropTypes.string,\n};\n\nclass FileAuditItem extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      highlight: false,\n      showMenu: false,\n      isItemMenuShow: false,\n      userDropdownOpen: false,\n      repoDropdownOpen: false,\n    };\n  }\n\n  onMouseEnter = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        showMenu: true,\n        highlight: true,\n      });\n    }\n  }\n\n  onMouseLeave = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        showMenu: false,\n        highlight: false\n      });\n    }\n  }\n\n  toggleUserDropdown = () => {\n    this.setState({ userDropdownOpen: !this.state.userDropdownOpen });\n  }\n\n  renderUser = (fileEvent) => {\n    if (!fileEvent.user_email) {\n      return gettext('Anonymous User');\n    }\n\n    return (\n      <span>\n        <a href={siteRoot + 'org/useradmin/info/' + fileEvent.user_email + '/'}>{fileEvent.user_name}</a>{' '}\n        <Dropdown size='sm' isOpen={this.state.userDropdownOpen} toggle={this.toggleUserDropdown}\n          className={this.state.highlight ? '' : 'vh'} tag=\"span\">\n          <DropdownToggle tag=\"i\" className=\"sf-dropdown-toggle sf2-icon-caret-down\"></DropdownToggle>\n          <DropdownMenu>\n            <DropdownItem onClick={this.props.filterUser.bind(this, fileEvent.user_email)}>\n              {gettext('Only Show')}{' '}\n              <span className=\"font-weight-bold\">{fileEvent.user_name}</span>\n            </DropdownItem>\n          </DropdownMenu>\n        </Dropdown>\n      </span>\n    );\n\n  }\n\n  renderType = (type) => {\n    if (type.indexOf('web') != -1) {\n      type = 'web';\n    }\n    if (type.indexOf('api') != -1) {\n      type = 'api';\n    }\n    if (type.indexOf('share-link') != -1) {\n      type = 'share link';\n    }\n    return type;\n  }\n\n  toggleRepoDropdown = () => {\n    this.setState({ repoDropdownOpen: !this.state.repoDropdownOpen });\n  }\n\n  renderRepo = (fileEvent) => {\n    let repoName = 'Deleted';\n    if (fileEvent.repo_name) {\n      repoName = fileEvent.repo_name;\n    }\n    return (\n      <span>\n        <span>{repoName}</span>\n        { fileEvent.repo_name &&\n          <Dropdown size='sm' isOpen={this.state.repoDropdownOpen} toggle={this.toggleRepoDropdown}\n            className={this.state.highlight ? '' : 'vh'} >\n            <DropdownToggle tag=\"i\" className=\"sf-dropdown-toggle sf2-icon-caret-down\"></DropdownToggle>\n            <DropdownMenu>\n              <DropdownItem size='sm' onClick={this.props.filterRepo.bind(this, fileEvent.repo_name)}>\n                {gettext('Only Show')}{' '}<span className=\"font-weight-bold\">{fileEvent.repo_name}</span></DropdownItem>\n            </DropdownMenu>\n          </Dropdown>\n        }\n      </span>\n    );\n  }\n\n  render() {\n    let { fileEvent } = this.props;\n    if (this.props.userSelected && fileEvent.user_email !== this.props.userSelected ) {\n      return null;\n    } else if (this.props.repoSelected && fileEvent.repo_name !== this.props.repoSelected) {\n      return null;\n    } else {\n      return (\n        <tr className={this.state.highlight ? 'tr-highlight' : ''}\n          onMouseEnter={this.onMouseEnter} onMouseLeave={this.onMouseLeave}>\n          <td>{this.renderUser(fileEvent)}</td>\n          <td>{this.renderType(fileEvent.type)}</td>\n          <td>{fileEvent.ip}</td>\n          <td>{moment(fileEvent.time).format('YYYY-MM-DD HH:mm:ss')}</td>\n          <td>{this.renderRepo(fileEvent)}</td>\n          <td><span title={fileEvent.file_path}>{fileEvent.file_name}</span></td>\n        </tr>\n      );\n    }\n  }\n}\n\nFileAuditItem.propTypes = propTypes;\n\nexport default OrgLogsFileAudit;\n","import { lang } from '../utils/constants';\nimport moment from 'moment';\n\nmoment.locale(lang);\n\nclass OrgLogsFileUpdateEvent {\n  constructor(object) {\n    this.repo_id = object.repo_id;\n    this.description = object.description;\n    this.repo_name = object.repo_name;\n    this.user_name = object.user_name;\n    this.user_email = object.user_email;\n    this.repo_encrypted = object.repo_encrypted;\n    this.repo_commit_id = object.repo_commit_id;\n    this.user_contact_email = object.user_contact_email;\n    this.time = moment(object.time).format('YYYY-MM-DD HH:mm:ss');\n  }\n}\n\nexport default OrgLogsFileUpdateEvent;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Modal, ModalHeader, ModalBody } from 'reactstrap';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../toast';\n\nconst propTypes = {\n  repoID: PropTypes.string.isRequired,\n  commitID: PropTypes.string.isRequired,\n  toggleCancel: PropTypes.func.isRequired,\n};\n\nclass FileUpdateDetailDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      time: '',\n      renamed: [],\n      deldir: [],\n      modified: [],\n      newdir: [],\n      newfile: [],\n      removed: [],\n    };\n  }\n\n  componentDidMount() {\n    seafileAPI.orgAdminGetFileUpdateDetail(this.props.repoID, this.props.commitID).then(res => {\n      this.setState({\n        time: res.data.date_time,\n        renamed: this.state.renamed.concat(res.data.renamed),\n        deldir: this.state.deldir.concat(res.data.deldir),\n        modified: this.state.modified.concat(res.data.modified),\n        newdir: this.state.newdir.concat(res.data.newdir),\n        newfile: this.state.newfile.concat(res.data.new),\n        removed: this.state.removed.concat(res.data.removed),\n      });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  renderContentItem = (items) => {\n    let con = '';\n    con += '<ul class=\"list-group list-group-flush\">';\n    for (var i = 0, len = items.length; i < len; i++) {\n      con += '<li class=\"list-group-item\">' + items[i] + '</li>';\n    }\n    con += '</ul>';\n    return {__html: con};\n  }\n\n  renderContent = () => {\n    if (this.state.newfile.length > 0) {\n      return (\n        <div>\n          <h4>{gettext('New files')}</h4>\n          <p>{this.state.time}</p>\n          <div dangerouslySetInnerHTML= {this.renderContentItem(this.state.newfile)} />\n        </div>\n      );\n    }\n\n    if (this.state.removed.length > 0) {\n      return (\n        <div>\n          <h4>{gettext('Deleted files')}</h4>\n          <p>{this.state.time}</p>\n          <div dangerouslySetInnerHTML= {this.renderContentItem(this.state.removed)} />\n        </div>\n      );\n    }\n\n    if (this.state.renamed.length > 0) {\n      return (\n        <div>\n          <h4>{gettext('Renamed or Moved files')}</h4>\n          <p>{this.state.time}</p>\n          <div dangerouslySetInnerHTML= {this.renderContentItem(this.state.renamed)} />\n        </div>\n      );\n    }\n\n    if (this.state.modified.length > 0) {\n      return (\n        <div>\n          <h4>{gettext('Modified files')}</h4>\n          <p>{this.state.time}</p>\n          <div dangerouslySetInnerHTML= {this.renderContentItem(this.state.modified)} />\n        </div>\n      );\n    }\n\n    if (this.state.newdir.length > 0) {\n      return (\n        <div>\n          <h4>{gettext('New directories')}</h4>\n          <p>{this.state.time}</p>\n          <div dangerouslySetInnerHTML= {this.renderContentItem(this.state.newdir)} />\n        </div>\n      );\n    }\n\n    if (this.state.deldir.length > 0) {\n      return (\n        <div>\n          <h4>{gettext('Deleted directories')}</h4>\n          <p>{this.state.time}</p>\n          <div dangerouslySetInnerHTML= {this.renderContentItem(this.state.deldir)} />\n        </div>\n      );\n    }\n  }\n\n  render() {\n    return (\n      <Modal isOpen={true} toggle={this.props.toggleCancel}>\n        <ModalHeader toggle={this.props.toggleCancel}>\n          {gettext('Modification Details')}\n        </ModalHeader>\n        <ModalBody>\n          {this.renderContent()}\n        </ModalBody>\n      </Modal>\n    );\n  }\n}\n\nFileUpdateDetailDialog.propTypes = propTypes;\n\nexport default FileUpdateDetailDialog;\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport moment from 'moment';\nimport { Dropdown, DropdownToggle, DropdownMenu, DropdownItem } from 'reactstrap';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { siteRoot, gettext, lang } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../../components/toast';\nimport OrgLogsFileUpdateEvent from '../../models/org-logs-file-update';\nimport ModalPortal from '../../components/modal-portal';\nimport FileUpdateDetailDialog from '../../components/dialog/org-logs-file-update-detail';\nimport '../../css/org-logs.css';\n\nmoment.locale(lang);\n\nclass OrgLogsFileUpdate extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      page: 1,\n      pageNext: false,\n      eventList: [],\n      userSelected: '',\n      repoSelected: '',\n      isItemFreezed: false,\n      showDetails: false,\n      repoID: '',\n      commitID: ''\n    };\n  }\n\n  componentDidMount() {\n    let page = this.state.page;\n    let email = this.state.userSelected;\n    let repoID = this.state.repoSelected;\n    this.initData(email, repoID, page);\n  }\n\n  initData = (email, repoID, page) => {\n    seafileAPI.orgAdminListFileUpdate(email, repoID, page).then(res => {\n      let eventList = res.data.log_list.map(item => {\n        return new OrgLogsFileUpdateEvent(item);\n      });\n      this.setState({\n        eventList: eventList,\n        pageNext: res.data.page_next,\n        page: res.data.page,\n      });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  onChangePageNum = (e, num) => {\n    e.preventDefault();\n    let page = this.state.page;\n\n    if (num == 1) {\n      page = page + 1;\n    } else {\n      page = page - 1;\n    }\n    let email = this.state.userSelected;\n    let repoID = this.state.repoSelected;\n    this.initData(email, repoID, page);\n  }\n\n  toggleCancelDetail = () => {\n    this.setState({\n      showDetails: !this.state.showDetails\n    });\n  }\n\n  onDetails = (e, fileEvent) => {\n    e.preventDefault();\n    this.setState({\n      showDetails: !this.state.showDetails,\n      repoID: fileEvent.repo_id,\n      commitID: fileEvent.repo_commit_id\n    });\n  }\n\n  filterUser = (userSelected) => {\n    this.setState({ userSelected: userSelected });\n  }\n\n  filterRepo = (repoSelected) => {\n    this.setState({ repoSelected: repoSelected });\n  }\n\n  render() {\n    let eventList = this.state.eventList;\n    return (\n      <div className=\"cur-view-content\">\n        {\n          (this.state.userSelected || this.state.repoSelected) &&\n          <React.Fragment>\n            {this.state.userSelected &&\n              <span className=\"audit-unselect-item\" onClick={this.filterUser.bind(this, null)}>\n                <span className=\"no-deco\">{this.state.userSelected}</span>{' '}\n              </span>\n            }\n            {this.state.repoSelected &&\n              <span className=\"audit-unselect-item\" onClick={this.filterRepo.bind(this, null)}>\n                <span className=\"no-deco\">{this.state.repoSelected}</span>{' '}\n              </span>\n            }\n          </React.Fragment>\n        }\n        <table>\n          <thead>\n            <tr>\n              <th width=\"25%\">{gettext('User')}</th>\n              <th width=\"17%\">{gettext('Date')}</th>\n              <th width=\"25%\">{gettext('Library')}</th>\n              <th width=\"33%\">{gettext('Action')}</th>\n            </tr>\n          </thead>\n          <tbody>\n            {eventList.map((item, index) => {\n              return (\n                <FileUpdateItem\n                  key={index}\n                  fileEvent={item}\n                  isItemFreezed={this.state.isItemFreezed}\n                  onDetails={this.onDetails}\n                  filterUser={this.filterUser}\n                  filterRepo={this.filterRepo}\n                  userSelected={this.state.userSelected}\n                  repoSelected={this.state.repoSelected}\n                />\n              );\n            })}\n          </tbody>\n        </table>\n        <div className=\"paginator\">\n          {this.state.page != 1 && <a href=\"#\" onClick={(e) => this.onChangePageNum(e, -1)}>{gettext('Previous')}</a>}\n          {(this.state.page != 1 && this.state.pageNext) && <span> | </span>}\n          {this.state.pageNext && <a href=\"#\" onClick={(e) => this.onChangePageNum(e, 1)}>{gettext('Next')}</a>}\n        </div>\n        {this.state.showDetails &&\n          <ModalPortal>\n            <FileUpdateDetailDialog\n              repoID={this.state.repoID}\n              commitID={this.state.commitID}\n              toggleCancel={this.toggleCancelDetail}\n            />\n          </ModalPortal>\n        }\n      </div>\n    );\n  }\n}\n\nconst propTypes = {\n  filterUser: PropTypes.func.isRequired,\n  filterRepo: PropTypes.func.isRequired,\n  onDetails: PropTypes.func.isRequired,\n  userSelected: PropTypes.string.isRequired,\n  repoSelected: PropTypes.string.isRequired,\n  isItemFreezed: PropTypes.bool.isRequired,\n};\n\n\nclass FileUpdateItem extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      highlight: false,\n      showMenu: false,\n      isItemMenuShow: false,\n      userDropdownOpen: false,\n      repoDropdownOpen: false,\n    };\n  }\n\n  onMouseEnter = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        showMenu: true,\n        highlight: true,\n      });\n    }\n  }\n\n  onMouseLeave = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        showMenu: false,\n        highlight: false\n      });\n    }\n  }\n\n  toggleUserDropdown = () => {\n    this.setState({ userDropdownOpen: !this.state.userDropdownOpen });\n  }\n\n  renderUser = (fileEvent) => {\n    if (!fileEvent.user_email) {\n      return gettext('Anonymous User');\n    }\n\n    return (\n      <span>\n        <a href={siteRoot + 'org/useradmin/info/' + fileEvent.user_email + '/'}>{fileEvent.user_name}</a>{' '}\n        <Dropdown size='sm' isOpen={this.state.userDropdownOpen} toggle={this.toggleUserDropdown}\n          className={this.state.highlight ? '' : 'vh'} tag=\"span\">\n          <DropdownToggle tag=\"i\" className=\"sf-dropdown-toggle sf2-icon-caret-down\"></DropdownToggle>\n          <DropdownMenu>\n            <DropdownItem onClick={this.props.filterUser.bind(this, fileEvent.user_email)}>\n              {gettext('Only Show')}{' '}<span className=\"font-weight-bold\">{fileEvent.user_name}</span>\n            </DropdownItem>\n          </DropdownMenu>\n        </Dropdown>\n      </span>\n    );\n  }\n\n  toggleRepoDropdown = () => {\n    this.setState({ repoDropdownOpen: !this.state.repoDropdownOpen });\n  }\n\n  renderRepo = (fileEvent) => {\n    let repoName = 'Deleted';\n    if (fileEvent.repo_name) {\n      repoName = fileEvent.repo_name;\n    }\n    return (\n      <span>\n        <span>{repoName}</span>\n        { fileEvent.repo_name &&\n          <Dropdown size='sm' isOpen={this.state.repoDropdownOpen} toggle={this.toggleRepoDropdown}\n            className={this.state.highlight ? '' : 'vh'} >\n            <DropdownToggle tag=\"i\" className=\"sf-dropdown-toggle sf2-icon-caret-down\"></DropdownToggle>\n            <DropdownMenu>\n              <DropdownItem size='sm' onClick={this.props.filterRepo.bind(this, fileEvent.repo_name)}>\n                {gettext('Only Show')}{' '}\n                <span className=\"font-weight-bold\">{fileEvent.repo_name}</span>\n              </DropdownItem>\n            </DropdownMenu>\n          </Dropdown>\n        }\n      </span>\n    );\n  }\n\n  renderAction = (fileEvent) => {\n    if (fileEvent.repo_encrypted || !fileEvent.repo_id) {\n      return <td>{fileEvent.description}</td>;\n    }\n\n    return (\n      <td>{fileEvent.description}\n        <a className=\"font-weight-normal text-muted ml-1\" href='#'\n          onClick={(e) => this.props.onDetails(e, fileEvent)}>{gettext('Details')}</a>\n      </td>\n    );\n  }\n\n  render() {\n    let { fileEvent } = this.props;\n    if (this.props.userSelected && fileEvent.user_email !== this.props.userSelected ) {\n      return null;\n    } else if (this.props.repoSelected && fileEvent.repo_name !== this.props.repoSelected) {\n      return null;\n    } else {\n      return (\n        <tr className={this.state.highlight ? 'tr-highlight' : ''}\n          onMouseEnter={this.onMouseEnter} onMouseLeave={this.onMouseLeave}>\n          <td>{this.renderUser(fileEvent)}</td>\n          <td>{moment(fileEvent.time).format('YYYY-MM-DD HH:mm:ss')}</td>\n          <td>{this.renderRepo(fileEvent)}</td>\n          {this.renderAction(fileEvent)}\n        </tr>\n      );\n    }\n  }\n}\n\nFileUpdateItem.propTypes = propTypes;\n\nexport default OrgLogsFileUpdate;\n","import { lang } from '../utils/constants';\nimport moment from 'moment';\n\nmoment.locale(lang);\n\nclass OrgLogsPermAuditEvent {\n  constructor(object) {\n    this.from_user_name = object.from_user_name;\n    this.from_user_email = object.from_user_email;\n    this.from_user_contact_email = object.from_user_contact_email;\n    this.to_user_email = object.to_user_email;\n    this.to_user_name = object.to_user_name;\n    this.to_user_contact_email = object.to_user_contact_email;\n    this.to_group_name = object.to_group_name;\n    this.to_group_id = object.to_group_id;\n    this.type = object.type;\n    this.repo_id = object.repo_id;\n    this.repo_name = object.repo_name;\n    this.folder_name = object.folder_name;\n    this.folder_path = object.folder_path;\n    this.time = moment(object.time).format('YYYY-MM-DD HH:mm:ss');\n    this.permission = object.permission;\n  }\n}\n\nexport default OrgLogsPermAuditEvent;\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport moment from 'moment';\nimport { Dropdown, DropdownToggle, DropdownMenu, DropdownItem } from 'reactstrap';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { siteRoot, gettext, lang } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../../components/toast';\nimport OrgLogsFilePermEvent from '../../models/org-logs-perm-audit';\nimport '../../css/org-logs.css';\n\nmoment.locale(lang);\n\nclass OrgLogsFileUpdate extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      page: 1,\n      pageNext: false,\n      eventList: [],\n      userSelected: '',\n      repoSelected: '',\n      isItemFreezed: false\n    };\n  }\n\n  componentDidMount() {\n    let page = this.state.page;\n    let email = this.state.userSelected;\n    let repoID = this.state.repoSelected;\n    this.initData(email, repoID, page);\n  }\n\n  initData = (email, repoID, page) => {\n    seafileAPI.orgAdminListPermAudit(email, repoID, page).then(res => {\n      let eventList = res.data.log_list.map(item => {\n        return new OrgLogsFilePermEvent(item);\n      });\n\n      this.setState({\n        eventList: eventList,\n        pageNext: res.data.page_next,\n        page: res.data.page,\n      });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  onChangePageNum = (e, num) => {\n    e.preventDefault();\n    let page = this.state.page;\n\n    if (num == 1) {\n      page = page + 1;\n    } else {\n      page = page - 1;\n    }\n    this.initData(page);\n  }\n\n  filterUser = (userSelected) => {\n    this.setState({ userSelected: userSelected });\n  }\n\n  render() {\n    let eventList = this.state.eventList;\n    return (\n      <div className=\"cur-view-content\">\n        {this.state.userSelected &&\n          <span className=\"audit-unselect-item\" onClick={this.filterUser.bind(this, null)}>\n            <span className=\"no-deco\">{this.state.userSelected}</span>{' '}\n          </span>\n        }\n        <table>\n          <thead>\n            <tr>\n              <th width=\"18%\">{gettext('Share From')}</th>\n              <th width=\"15%\">{gettext('Share To')}</th>\n              <th width=\"8%\">{gettext('Actions')}</th>\n              <th width=\"13%\">{gettext('Permission')}</th>\n              <th width=\"15%\">{gettext('Library')}</th>\n              <th width=\"15%\">{gettext('Folder')}</th>\n              <th width=\"16%\">{gettext('Date')}</th>\n            </tr>\n          </thead>\n          <tbody>\n            {eventList.map((item, index) => {\n              return (\n                <PermAuditItem\n                  key={index}\n                  permEvent={item}\n                  isItemFreezed={this.state.isItemFreezed}\n                  filterUser={this.filterUser}\n                  userSelected={this.state.userSelected}\n                />\n              );\n            })}\n          </tbody>\n        </table>\n        <div className=\"paginator\">\n          {this.state.page != 1 && <a href=\"#\" onClick={(e) => this.onChangePageNum(e, -1)}>{gettext('Previous')}</a>}\n          {(this.state.page != 1 && this.state.pageNext) && <span> | </span>}\n          {this.state.pageNext && <a href=\"#\" onClick={(e) => this.onChangePageNum(e, 1)}>{gettext('Next')}</a>}\n        </div>\n      </div>\n    );\n  }\n}\n\n\nconst propTypes = {\n  filterUser: PropTypes.func.isRequired,\n  isItemFreezed: PropTypes.bool.isRequired,\n  userSelected: PropTypes.string.isRequired,\n  permEvent: PropTypes.object.isRequired,\n};\n\nclass PermAuditItem extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      highlight: false,\n      showMenu: false,\n      isItemMenuShow: false,\n      userDropdownOpen: false,\n    };\n  }\n\n  onMouseEnter = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        showMenu: true,\n        highlight: true,\n      });\n    }\n  }\n\n  onMouseLeave = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        showMenu: false,\n        highlight: false\n      });\n    }\n  }\n\n  renderFromUser = (permEvent) => {\n    if (!permEvent.from_user_email) {\n      return gettext('Anonymous User');\n    }\n    return (\n      <span>\n        <a href={siteRoot + 'org/useradmin/info/' + permEvent.from_user_email + '/'}>{permEvent.from_user_name}</a>{' '}\n        <Dropdown size='sm' isOpen={this.state.userDropdownOpen} toggle={this.toggleUserDropdown}\n          className={this.state.highlight ? '' : 'vh'} tag=\"span\">\n          <DropdownToggle tag=\"i\" className=\"sf-dropdown-toggle sf2-icon-caret-down\"></DropdownToggle>\n          <DropdownMenu>\n            <DropdownItem onClick={this.props.filterUser.bind(this, permEvent.from_user_email)}>\n              {gettext('Only Show')}{' '}\n              <span className=\"font-weight-bold\">{permEvent.from_user_name}</span>\n            </DropdownItem>\n          </DropdownMenu>\n        </Dropdown>\n      </span>\n    );\n  }\n\n  toggleUserDropdown = () => {\n    this.setState({ userDropdownOpen: !this.state.userDropdownOpen });\n  }\n\n  renderToUser = (permEvent) => {\n    if (permEvent.type.indexOf('public') != -1) {\n      return <a href={siteRoot + 'org/'}>{gettext('Organization')}</a>;\n    }\n\n    if (permEvent.type.indexOf('group') != -1) {\n      if (permEvent.to_group_name) {\n        return <a href={siteRoot + 'org/groupadmin/' + permEvent.to_group_id + '/'}>{permEvent.to_group_name}</a>;\n      }\n      return 'Deleted';\n    }\n\n    if (permEvent.type.indexOf('user') != -1) {\n      return <a href={siteRoot + 'org/useradmin/info/' + permEvent.to_user_email + '/'}>{permEvent.to_user_name}</a>;\n    }\n\n  }\n\n  renderType = (type) => {\n    if (type.indexOf('add') != -1) {\n      type = 'Add';\n    }\n    if (type.indexOf('modify') != -1) {\n      type = 'Modify';\n    }\n    if (type.indexOf('delete') != -1) {\n      type = 'Delete';\n    }\n    return type;\n  }\n\n  renderRepo = (permEvent) => {\n    let repoName = 'Deleted';\n    if (permEvent.repo_name) {\n      repoName = permEvent.repo_name;\n    }\n    return repoName;\n  }\n\n  renderFolder = (name) => {\n    let folderName = '/';\n    if (name) {\n      folderName = name;\n    }\n    return folderName;\n  }\n\n  render() {\n    let { permEvent } = this.props;\n    if (this.props.userSelected && permEvent.from_user_email !== this.props.userSelected ) {\n      return null;\n    } else {\n      return (\n        <tr className={this.state.highlight ? 'tr-highlight' : ''} onMouseEnter={this.onMouseEnter} onMouseLeave={this.onMouseLeave}>\n          <td>{this.renderFromUser(permEvent)}</td>\n          <td>{this.renderToUser(permEvent)}</td>\n          <td>{this.renderType(permEvent.type)}</td>\n          <td>{Utils.sharePerms(permEvent.permission)}</td>\n          <td>{this.renderRepo(permEvent)}</td>\n          <td>{this.renderFolder(permEvent.folder_name)}</td>\n          <td>{moment(permEvent.time).format('YYYY-MM-DD HH:mm:ss')}</td>\n        </tr>\n      );\n    }\n  }\n}\n\nPermAuditItem.propTypes = propTypes;\n\nexport default OrgLogsFileUpdate;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { Router } from '@reach/router';\nimport { siteRoot } from '../../utils/constants';\nimport SidePanel from './side-panel';\nimport OrgUsers from './org-users-users';\nimport OrgAdmins from './org-users-admins';\nimport OrgUserProfile from './org-user-profile';\nimport OrgUserRepos from './org-user-repos';\nimport OrgUserSharedRepos from './org-user-shared-repos';\nimport OrgGroups from './org-groups';\nimport OrgGroupInfo from './org-group-info';\nimport OrgGroupRepos from './org-group-repos';\nimport OrgGroupMembers from './org-group-members';\nimport OrgLibraries from './org-libraries';\nimport OrgInfo from './org-info';\nimport OrgLinks from './org-links';\nimport OrgDepartments from './org-departments';\nimport OrgDepartmentsList from './org-departments-list';\nimport OrgDepartmentItem from './org-department-item';\nimport OrgLogs from './org-logs';\nimport OrgLogsFileAudit from './org-logs-file-audit';\nimport OrgLogsFileUpdate from './org-logs-file-update';\nimport OrgLogsPermAudit from './org-logs-perm-audit';\n\nimport '../../css/layout.css';\nimport '../../css/toolbar.css';\n\nclass Org extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      isSidePanelClosed: false,\n      currentTab: 'users'\n    };\n  }\n\n  componentDidMount() {\n    let href = window.location.href.split('/');\n    let currentTab = href[href.length - 2];\n\n    if (location.href.indexOf(`${siteRoot}org/useradmin`) != -1) {\n      currentTab = 'users';\n    }\n    if (location.href.indexOf(`${siteRoot}org/groupadmin`) != -1) {\n      currentTab = 'groupadmin';\n    }\n    if (location.href.indexOf(`${siteRoot}org/departmentadmin`) != -1) {\n      currentTab = 'departmentadmin';\n    }\n    this.setState({currentTab: currentTab});\n  }\n\n  onCloseSidePanel = () => {\n    this.setState({isSidePanelClosed: !this.state.isSidePanelClosed});\n  }\n\n  tabItemClick = (param) => {\n    this.setState({currentTab: param});\n  }\n\n  render() {\n    let { isSidePanelClosed, currentTab } = this.state;\n    return (\n      <div id=\"main\">\n        <SidePanel isSidePanelClosed={isSidePanelClosed} onCloseSidePanel={this.onCloseSidePanel} currentTab={currentTab} tabItemClick={this.tabItemClick}/>\n        <div className=\"main-panel o-hidden\">\n          <Router className=\"reach-router\">\n            <OrgInfo path={siteRoot + 'org/orgmanage'}/>\n            <OrgUsers path={siteRoot + 'org/useradmin'} />\n            <OrgAdmins path={siteRoot + 'org/useradmin/admins/'} />\n            <OrgUserProfile path={siteRoot + 'org/useradmin/info/:email/'} />\n            <OrgUserRepos path={siteRoot + 'org/useradmin/info/:email/repos/'} />\n            <OrgUserSharedRepos path={siteRoot + 'org/useradmin/info/:email/shared-repos/'} />\n            <OrgGroups path={siteRoot + 'org/groupadmin'} />\n            <OrgGroupInfo path={siteRoot + 'org/groupadmin/:groupID/'} />\n            <OrgGroupRepos path={siteRoot + 'org/groupadmin/:groupID/repos/'} />\n            <OrgGroupMembers path={siteRoot + 'org/groupadmin/:groupID/members/'} />\n            <OrgLibraries path={siteRoot + 'org/repoadmin'}/>\n            <OrgLinks path={siteRoot + 'org/publinkadmin'}/>\n            <OrgDepartments path={siteRoot + 'org/departmentadmin'}>\n              <OrgDepartmentsList path='/'/>\n              <OrgDepartmentItem path='groups/:groupID'/>\n            </OrgDepartments>\n            <OrgLogs path={siteRoot + 'org/logadmin'} currentTab={currentTab} tabItemClick={this.tabItemClick}>\n              <OrgLogsFileAudit path='/' />\n              <OrgLogsFileUpdate path='file-update' />\n              <OrgLogsPermAudit path='perm-audit' />\n            </OrgLogs>\n          </Router>\n        </div>\n      </div>\n    );\n  }\n}\n\nReactDOM.render(\n  <Org />,\n  document.getElementById('wrapper')\n);\n"],"sourceRoot":""}