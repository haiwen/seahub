"use strict";(self.webpackChunkseahub_frontend=self.webpackChunkseahub_frontend||[]).push([[6036],{32781:function(e,a,l){var t=l(23029),r=l(92901),i=l(39874),s=l(85501),n=l(9950),o=l(1352),d=l(65604),p=l(97011),u=l(40326),c=l(49403),m=l(51925),f=l(68238),h=l.n(f),g=l(72517),b=l.n(g),x=l(83891),U=l(69123),v=l(65276),F=l(34940),j=l(34322),N=l(95754),A=l(44414),k="uploading",y="error",S="isSaving",P="uploaded",C=function(e){function a(e){var l;return(0,t.default)(this,a),(l=(0,i.default)(this,a,[e])).onUploadCancel=function(e){e.preventDefault(),l.props.onUploadCancel(l.props.resumableFile)},l.onUploadRetry=function(e){e.preventDefault(),l.props.onUploadRetry(l.props.resumableFile)},l.formatFileSize=function(e){return"number"!==typeof e?"":e>=1e9?(e/1e9).toFixed(1)+" G":e>=1e6?(e/1e6).toFixed(1)+" M":e>=1e3?(e/1e3).toFixed(1)+" K":e.toFixed(1)+" B"},l.state={uploadState:k},l}return(0,s.default)(a,e),(0,r.default)(a,[{key:"UNSAFE_componentWillReceiveProps",value:function(e){var a=e.resumableFile,l=k;a.error?l=y:(0!==a.remainingTime||a.isSaved||(l=S),a.isSaved&&(l=P)),this.setState({uploadState:l})}},{key:"render",value:function(){var e=this.props.resumableFile,a=Math.round(100*e.progress()),l=e.error;return(0,A.jsxs)("tr",{className:"file-upload-item",children:[(0,A.jsx)("td",{className:"upload-name",children:(0,A.jsx)("div",{className:"ellipsis",children:e.newFileName})}),(0,A.jsx)("td",{children:(0,A.jsx)("span",{className:"file-size",children:this.formatFileSize(e.size)})}),(0,A.jsxs)("td",{className:"upload-progress",children:[(this.state.uploadState===k||this.state.uploadState===S)&&(0,A.jsxs)(n.Fragment,{children:[e.size>=1e8&&(0,A.jsxs)(n.Fragment,{children:[e.isUploading()&&(0,A.jsxs)("div",{className:"progress-container",children:[(0,A.jsx)("div",{className:"progress",children:(0,A.jsx)("div",{className:"progress-bar",role:"progressbar",style:{width:"".concat(a,"%")},"aria-valuenow":a,"aria-valuemin":"0","aria-valuemax":"100"})}),-1===e.remainingTime&&(0,A.jsx)("div",{className:"progress-text",children:(0,u.APU)("Preparing to upload...")}),e.remainingTime>0&&(0,A.jsxs)("div",{className:"progress-text",children:[(0,u.APU)("Remaining")," ",d.Aq.formatTime(e.remainingTime)]}),0===e.remainingTime&&(0,A.jsx)("div",{className:"progress-text",children:(0,u.APU)("Saving...")})]}),!e.isUploading()&&(0,A.jsx)("div",{className:"progress-container d-flex align-items-center",children:(0,A.jsx)("div",{className:"progress",children:(0,A.jsx)("div",{className:"progress-bar",role:"progressbar",style:{width:"".concat(a,"%")},"aria-valuenow":a,"aria-valuemin":"0","aria-valuemax":"100"})})})]}),e.size<1e8&&(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)("div",{className:"progress-container d-flex align-items-center",children:(0,A.jsx)("div",{className:"progress",children:(0,A.jsx)("div",{className:"progress-bar",role:"progressbar",style:{width:"".concat(a,"%")},"aria-valuenow":a,"aria-valuemin":"0","aria-valuemax":"100"})})}),this.state.uploadState===k&&(0,A.jsxs)(A.Fragment,{children:[0==a&&(0,A.jsx)("p",{className:"progress-text mb-0",children:(0,u.APU)("Waiting...")}),a>0&&(0,A.jsx)("p",{className:"progress-text mb-0",children:"".concat((0,u.APU)("Uploading...")," ").concat(a,"%")})]}),this.state.uploadState===S&&(0,A.jsx)("p",{className:"progress-text mb-0",children:(0,u.APU)("Saving...")})]})]}),this.state.uploadState===P&&(0,A.jsxs)("div",{className:"d-flex align-items-center",children:[(0,A.jsx)("span",{className:"upload-success-icon mr-2",children:(0,A.jsx)(N.A,{symbol:"tick1"})}),(0,A.jsx)("span",{className:"upload-success-msg",children:(0,u.APU)("Uploaded")})]}),this.state.uploadState===y&&(0,A.jsxs)("div",{className:"d-flex align-items-center","aria-label":(0,u.APU)("Upload failed"),title:(0,u.APU)("Upload failed"),role:"button",tabIndex:0,children:[(0,A.jsx)("span",{className:"upload-failure-icon mr-2","aria-hidden":"true",children:(0,A.jsx)(N.A,{symbol:"info"})}),(0,A.jsx)("span",{className:"upload-failure-msg",dangerouslySetInnerHTML:{__html:l}})]})]}),(0,A.jsx)("td",{className:"upload-operation",children:(0,A.jsxs)(n.Fragment,{children:[this.state.uploadState===k&&(0,A.jsx)("a",{href:"#",onClick:this.onUploadCancel,role:"button",children:(0,u.APU)("Cancel")}),this.state.uploadState===y&&(0,A.jsx)("a",{href:"#",onClick:this.onUploadRetry,role:"button",children:(0,u.APU)("Retry")})]})})]})}}])}(n.Component),w=function(e){function a(){return(0,t.default)(this,a),(0,i.default)(this,a,arguments)}return(0,s.default)(a,e),(0,r.default)(a,[{key:"render",value:function(){var e=this.props.file;return(0,A.jsxs)("tr",{className:"file-upload-item",children:[(0,A.jsx)("td",{className:"upload-name",children:(0,A.jsx)("div",{className:"ellipsis",children:e.name})}),(0,A.jsx)("td",{children:d.Aq.bytesToSize(e.size)}),(0,A.jsx)("td",{children:(0,A.jsxs)("div",{className:"d-flex align-items-center","aria-label":(0,u.APU)("File too large"),title:(0,u.APU)("File too large"),role:"button",tabIndex:0,children:[(0,A.jsx)("span",{className:"d-flex align-items-center upload-failure-icon mr-2","aria-hidden":"true",children:(0,A.jsx)(N.A,{symbol:"info"})}),(0,A.jsx)("span",{className:"upload-failure-msg",children:(0,u.APU)("File too large")})]})}),(0,A.jsx)("td",{})]})}}])}(n.Component),L=w,I=function(e){function a(e){var l;return(0,t.default)(this,a),(l=(0,i.default)(this,a,[e])).toggleDropdown=function(){l.setState({dropdownOpen:!l.state.dropdownOpen})},l.state={dropdownOpen:!1},l}return(0,s.default)(a,e),(0,r.default)(a,[{key:"render",value:function(){var e,a=this,l=this.props,t=l.totalProgress,r=l.uploadBitrate,i=l.uploadFileList,s=l.forbidUploadFileList,o=l.isUploading,p=l.filesUploadedNum,c=l.allFilesNum,m="number"===typeof p?p:i.filter((function(e){return e.isSaved})).length,f="number"===typeof c?c:i.length,h=(0,u.APU)("{uploaded_files_num}/{all_files_num} Files").replace("{uploaded_files_num}",m).replace("{all_files_num}",f);if(!o){var g=i.filter((function(e){return e.error})).length+s.length;g>0&&(e=(0,u.APU)("{failed_files_num} file(s) failed to upload").replace("{failed_files_num}",g))}return(0,A.jsxs)(n.Fragment,{children:[(0,A.jsxs)("div",{className:"text-center",children:[(0,A.jsxs)(x.A,{isOpen:this.state.dropdownOpen,toggle:this.toggleDropdown,children:[(0,A.jsx)(U.A,{color:"primary",caret:!0,children:(0,u.APU)("Upload")}),(0,A.jsxs)(v.A,{children:[(0,A.jsx)(F.A,{onClick:this.props.onFileUpload,children:(0,u.APU)("Upload Files")}),(0,A.jsx)(F.A,{onClick:this.props.onFolderUpload,children:(0,u.APU)("Upload Folder")})]})]}),(0,A.jsx)(j.A,{color:"primary",outline:!0,className:"ml-4",onClick:this.props.onCancelAllUploading,disabled:!o,children:(0,u.APU)("Cancel All")})]}),t>0&&(0,A.jsxs)("div",{id:"upload-link-total-progress-container",className:"".concat(o?"":"d-flex align-items-center"," px-6 py-2"),children:[(0,A.jsxs)("div",{className:"d-flex align-items-center flex-fill",children:[o?(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)("span",{children:(0,u.APU)("File Uploading...")}),(0,A.jsx)("span",{className:"ml-2",children:"".concat(t,"% (").concat(d.Aq.formatBitRate(r),")")})]}):(0,A.jsx)(A.Fragment,{children:e?(0,A.jsx)("p",{className:"m-0 error",children:e}):(0,A.jsx)("p",{className:"m-0",children:(0,u.APU)("All files uploaded")})}),i.length>0&&(0,A.jsx)("span",{className:"ml-auto",children:h})]}),o&&(0,A.jsx)("div",{className:"progress",children:(0,A.jsx)("div",{className:"progress-bar",role:"progressbar",style:{width:"".concat(t,"%")},"aria-valuenow":t,"aria-valuemin":"0","aria-valuemax":"100"})})]}),(0,A.jsx)("div",{className:"mh-2",children:(0,A.jsxs)("table",{className:"table-thead-hidden",children:[(0,A.jsx)("thead",{children:(0,A.jsxs)("tr",{children:[(0,A.jsx)("th",{width:"40%",scope:"col",children:(0,u.APU)("name")}),(0,A.jsx)("th",{width:"15%",scope:"col",children:(0,u.APU)("size")}),(0,A.jsx)("th",{width:"30%",scope:"col",children:(0,u.APU)("progress")}),(0,A.jsx)("th",{width:"15%",scope:"col",children:(0,u.APU)("state")})]})}),(0,A.jsxs)("tbody",{children:[this.props.forbidUploadFileList.map((function(e,a){return(0,A.jsx)(L,{file:e},a)})),this.props.uploadFileList.map((function(e,l){return(0,A.jsx)(C,{resumableFile:e,onUploadCancel:a.props.onUploadCancel,onUploadRetry:a.props.onUploadRetry},l)})).reverse()]})]})})]})}}])}(n.Component),D=l(4086),q=(l(89183),function(e){function a(e){var l;return(0,t.default)(this,a),(l=(0,i.default)(this,a,[e])).componentWillUnmount=function(){window.onbeforeunload=null,!0===l.props.dragAndDrop&&l.resumable.disableDropOnDocument()},l.onbeforeunload=function(){if(window.uploader&&window.uploader.isUploadProgressDialogShow&&100!==window.uploader.totalProgress)return""},l.bindCallbackHandler=function(){var e=l.props,a=e.minFileSizeErrorCallback,t=e.fileTypeErrorCallback;l.maxFilesErrorCallback&&(l.resumable.opts.maxFilesErrorCallback=l.maxFilesErrorCallback),a&&(l.resumable.opts.minFileSizeErrorCallback=l.props.minFileSizeErrorCallback),l.maxFileSizeErrorCallback&&(l.resumable.opts.maxFileSizeErrorCallback=l.maxFileSizeErrorCallback),t&&(l.resumable.opts.fileTypeErrorCallback=l.props.fileTypeErrorCallback)},l.bindEventHandler=function(){l.resumable.on("chunkingComplete",l.onChunkingComplete.bind(l)),l.resumable.on("fileAdded",l.onFileAdded.bind(l)),l.resumable.on("filesAddedComplete",l.filesAddedComplete.bind(l)),l.resumable.on("fileProgress",l.onFileProgress.bind(l)),l.resumable.on("fileSuccess",l.onFileUploadSuccess.bind(l)),l.resumable.on("fileError",l.onFileError.bind(l)),l.resumable.on("uploadStart",l.onUploadStart.bind(l)),l.resumable.on("progress",l.onProgress.bind(l)),l.resumable.on("complete",l.onComplete.bind(l)),l.resumable.on("error",l.onError.bind(l)),l.resumable.on("dragstart",l.onDragStart.bind(l))},l.maxFilesErrorCallback=function(e,a){var l=u.YX7,t=(0,u.APU)("Please upload no more than {maxFiles} files at a time.");t=t.replace("{maxFiles}",l),D.A.danger(t)},l.maxFileSizeErrorCallback=function(e){var a=l.state.forbidUploadFileList;a.push(e),l.setState({forbidUploadFileList:a})},l.onChunkingComplete=function(e){var a=l.props.path,t=e.fileName,r=e.relativePath,i=t===r;if(e.formData={},i)e.formData={parent_dir:a};else{var s=r.slice(0,r.lastIndexOf("/")+1);e.formData={parent_dir:a,relative_path:s}}},l.onFileAdded=function(e,a){if(e.fileName===e.relativePath&&1===a.length){l.setUploadFileList(),p.e.sharedUploadLinkGetFileUploadUrl(l.props.token).then((function(a){l.resumable.opts.target=a.data.upload_link+"?ret-json=1",l.isUploadLinkLoaded=!0,l.resumableUpload(e)})).catch((function(e){var a=d.Aq.getErrorMsg(e);D.A.danger(a)}))}},l.resumableUpload=function(e){var a=l.props,t=a.repoID,r=a.path;p.e.getFileUploadedBytes(t,r,e.fileName).then((function(a){var t=a.data.uploadedBytes,r=1024*parseInt(u.QVk)*1024||1048576,i=Math.floor(t/r);e.markChunksCompleted(i),l.resumable.upload()})).catch((function(e){var a=d.Aq.getErrorMsg(e);D.A.danger(a)}))},l.filesAddedComplete=function(e,a){l.state.forbidUploadFileList.length>0&&0===a.length&&l.setState({isUploadProgressDialogShow:!0,totalProgress:100});var t="number"===typeof u.YX7?u.YX7:null;if(t&&a&&a.length>t){try{(a||[]).forEach((function(e){e&&"function"===typeof e.cancel&&e.cancel()}))}catch(i){}var r=(0,u.APU)("Please upload no more than {maxFiles} files at a time.");return r=r.replace("{maxFiles}",t),void D.A.danger(r)}a&&a.length>0&&(l.setUploadFileList(),l.isUploadLinkLoaded?l.resumable.upload():(l.isUploadLinkLoaded=!0,p.e.sharedUploadLinkGetFileUploadUrl(l.props.token).then((function(e){l.resumable.opts.target=e.data.upload_link+"?ret-json=1",l.resumable.upload()})).catch((function(e){var a=d.Aq.getErrorMsg(e);D.A.danger(a)}))))},l.setUploadFileList=function(){var e=Array.isArray(l.resumable.files)?l.resumable.files.slice():[];e=e.map((function(e){if(!e.newFileName){var a=e.relativePath||e.fileName||e.name;e.newFileName=a||""}return e})),l.setState({uploadFileList:e,isUploadProgressDialogShow:!0,allFilesNum:e.length,filesUploadedNum:e.reduce((function(e,a){return e+(a.isSaved?1:0)}),0)}),d.Aq.registerGlobalVariable("uploader","isUploadProgressDialogShow",!0)},l.onFileProgress=function(e){var a=l.getBitrate(),t=l.state.uploadFileList.map((function(l){if(l.uniqueIdentifier===e.uniqueIdentifier&&a){var t=8*(l.size-l.size*l.progress()),r=Math.floor(t/a);l.remainingTime=r}return l}));l.setState({uploadBitrate:a,uploadFileList:t})},l.getBitrate=function(){var e=0,a=0,t=(new Date).getTime();if(l.resumable.files.forEach((function(a){e+=a.progress()*a.size})),l.timestamp){var r=t-l.timestamp;if(r<l.bitrateInterval)return l.state.uploadBitrate;(e<l.loaded||0===l.loaded)&&(l.loaded=e),a=(e-l.loaded)*(1e3/r)*8}return l.timestamp=t,l.loaded=e,a},l.onUploadStart=function(){},l.onProgress=function(){var e=Math.round(100*l.resumable.progress());l.setState({totalProgress:e}),d.Aq.registerGlobalVariable("uploader","totalProgress",e)},l.onFileUploadSuccess=function(e,a){var t=e.formData,r=(new Date).getTime()/1e3;if(a=t.replace?a:JSON.parse(a)[0],t.relative_path){var i=t.relative_path,s=i.slice(0,i.indexOf("/")),n={id:a.id,name:s,type:"dir",mtime:r};l.notifiedFolders.some((function(e){return e.name===n.name}))||(l.notifiedFolders.push(n),l.props.onFileUploadSuccess(n));var o=l.state.uploadFileList.map((function(l){return l.uniqueIdentifier===e.uniqueIdentifier&&(l.newFileName=i+a.name,l.isSaved=!0),l}));l.setState((function(e){return{uploadFileList:o,filesUploadedNum:e.filesUploadedNum+1}}))}else if(t.replace){var d=e.fileName,p={id:a,name:d,type:"file",mtime:r};l.props.onFileUploadSuccess(p);var u=l.state.uploadFileList.map((function(a){return a.uniqueIdentifier===e.uniqueIdentifier&&(a.newFileName=d,a.isSaved=!0),a}));l.setState((function(e){return{uploadFileList:u,filesUploadedNum:e.filesUploadedNum+1}}))}else{var c={id:a.id,type:"file",name:a.name,size:a.size,mtime:r};l.props.onFileUploadSuccess(c);var m=l.state.uploadFileList.map((function(l){return l.uniqueIdentifier===e.uniqueIdentifier&&(l.newFileName=a.name,l.isSaved=!0),l}));l.setState((function(e){return{uploadFileList:m,filesUploadedNum:e.filesUploadedNum+1}}))}},l.onFileError=function(e,a){var t="";if(a){var r=a.replace(/\n/g,"");r=JSON.parse(r),"File locked by others."===(t=r.error)&&(t=(0,u.APU)("File is locked by others.")),"Internal error."===t&&(t=(0,u.APU)("Internal Server Error"))}else t=(0,u.APU)("Network error");var i=l.state.uploadFileList.map((function(a){return a.uniqueIdentifier===e.uniqueIdentifier&&(l.state.retryFileList.push(a),a.error=t),a}));l.loaded=0,l.setState({retryFileList:l.state.retryFileList,uploadFileList:i})},l.onComplete=function(){l.error=!1,l.notifiedFolders=[],l.isUploadLinkLoaded=!1},l.onError=function(e,a){var t=(0,u.APU)("Error");a&&a.fileName&&(t=(0,u.APU)("Failed to upload {file_name}.").replace("{file_name}",a.fileName)),D.A.danger(t,{id:"file-error-msg"}),l.error=!0,l.isUploadLinkLoaded=!1,d.Aq.registerGlobalVariable("uploader","totalProgress",100)},l.setHeaders=function(e,a){var l=a.offset,t=a.getOpt("chunkSize"),r=0===e.size?1:e.size,i=0!==l?l*t:0,s=Math.min(r,(l+1)*t)-1;return r-a.endByte<t&&!a.getOpt("forceChunkSize")&&(s=r),{Accept:"application/json; text/javascript, */*; q=0.01","Content-Disposition":'attachment; filename="'+encodeURI(e.fileName)+'"',"Content-Range":"bytes "+i+"-"+s+"/"+r}},l.setQuery=function(e){return e.formData},l.generateUniqueIdentifier=function(e){var a=e.webkitRelativePath||e.relativePath||e.fileName||e.name;return b()(a+new Date)+a},l.onClick=function(e){e.nativeEvent.stopImmediatePropagation(),e.stopPropagation()},l.onFileUpload=function(){l.uploadInput.current.removeAttribute("webkitdirectory"),l.uploadInput.current.click()},l.onFolderUpload=function(){l.uploadInput.current.setAttribute("webkitdirectory","webkitdirectory"),l.uploadInput.current.click()},l.onDragStart=function(){l.uploadInput.current.setAttribute("webkitdirectory","webkitdirectory")},l.onCloseUploadDialog=function(){l.loaded=0,l.resumable.files=[],l.isUploadLinkLoaded=!1,l.setState({isUploadProgressDialogShow:!1,uploadFileList:[],forbidUploadFileList:[],filesUploadedNum:0,allFilesNum:0}),d.Aq.registerGlobalVariable("uploader","isUploadProgressDialogShow",!1)},l.onUploadCancel=function(e){var a=l.state.uploadFileList.filter((function(a){return a.uniqueIdentifier!==e.uniqueIdentifier||(a.cancel(),!1)}));l.resumable.isUploading()||(l.setState({totalProgress:100}),l.loaded=0),l.setState({uploadFileList:a,allFilesNum:a.length,filesUploadedNum:a.reduce((function(e,a){return e+(a.isSaved?1:0)}),0)})},l.onCancelAllUploading=function(){var e=l.state.uploadFileList.filter((function(e){return!Math.round(1!==e.progress())||(e.cancel(),!1)}));l.loaded=0,l.setState({totalProgress:100,uploadFileList:e,allFilesNum:e.length,filesUploadedNum:e.reduce((function(e,a){return e+(a.isSaved?1:0)}),0)}),l.isUploadLinkLoaded=!1},l.onUploadRetry=function(e){p.e.sharedUploadLinkGetFileUploadUrl(l.props.token).then((function(a){l.resumable.opts.target=a.data.upload_link+"?ret-json=1";var t=l.state.retryFileList.filter((function(a){return a.uniqueIdentifier!==e.uniqueIdentifier})),r=l.state.uploadFileList.map((function(a){return a.uniqueIdentifier===e.uniqueIdentifier&&(a.error=null,l.retryUploadFile(a)),a}));l.setState({retryFileList:t,uploadFileList:r})})).catch((function(e){var a=d.Aq.getErrorMsg(e);D.A.danger(a)}))},l.retryUploadFile=function(e){var a=l.props,t=a.repoID,r=a.path,i=e.fileName;if(!(e.fileName===e.relativePath)){var s=e.formData.relative_path;i=("/"===r?r+s:r+"/"+s)+i}e.bootstrap();var n=!1;e.resumableObj.on("chunkingComplete",(function(){n||p.e.getFileUploadedBytes(t,r,i).then((function(a){var l=a.data.uploadedBytes,t=1024*parseInt(u.QVk)*1024||1048576,r=Math.floor(l/t);e.markChunksCompleted(r),e.resumableObj.upload()})).catch((function(e){var a=d.Aq.getErrorMsg(e);D.A.danger(a)})),n=!0}))},l.replaceRepetitionFile=function(){var e=l.props,a=e.repoID,t=e.path;p.e.getUpdateLink(a,t).then((function(e){l.resumable.opts.target=e.data;var a=l.resumable.files[l.resumable.files.length-1];a.formData.replace=1,a.formData.target_file=a.formData.parent_dir+a.fileName,l.setUploadFileList(l.resumable.files),l.resumable.upload()})).catch((function(e){var a=d.Aq.getErrorMsg(e);D.A.danger(a)}))},l.cancelFileUpload=function(){l.resumable.files.pop()},l.state={retryFileList:[],uploadFileList:[],forbidUploadFileList:[],totalProgress:0,isUploadProgressDialogShow:!1,currentResumableFile:null,uploadBitrate:0,filesUploadedNum:0,allFilesNum:0},l.uploadInput=n.createRef(),l.notifiedFolders=[],l.timestamp=null,l.loaded=0,l.bitrateInterval=500,l.isUploadLinkLoaded=!1,window.onbeforeunload=l.onbeforeunload,l}return(0,s.default)(a,e),(0,r.default)(a,[{key:"componentDidMount",value:function(){this.resumable=new(h())({target:"",query:this.setQuery||{},fileType:this.props.filetypes,maxFiles:void 0,maxFileSize:1e3*u.hnv*1e3||void 0,testMethod:this.props.testMethod||"post",testChunks:this.props.testChunks||!1,headers:this.setHeaders||{},withCredentials:this.props.withCredentials||!1,chunkSize:1024*parseInt(u.QVk)*1024||1048576,simultaneousUploads:this.props.simultaneousUploads||1,fileParameterName:this.props.fileParameterName,generateUniqueIdentifier:this.generateUniqueIdentifier,forceChunkSize:!0,maxChunkRetries:3,minFileSize:0}),this.resumable.assignBrowse(this.uploadInput.current,!0),this.props.dragAndDrop&&this.resumable.assignDrop(document.getElementById("upload-link-drop-zone")),this.bindCallbackHandler(),this.bindEventHandler()}},{key:"render",value:function(){return(0,A.jsxs)(n.Fragment,{children:[(0,A.jsx)("div",{className:"file-uploader-container",children:(0,A.jsx)("div",{className:"file-uploader",children:(0,A.jsx)("input",{className:"upload-input",type:"file",ref:this.uploadInput,onClick:this.onClick,"aria-label":(0,u.APU)("Upload")})})}),(0,A.jsx)(I,{retryFileList:this.state.retryFileList,uploadFileList:this.state.uploadFileList,forbidUploadFileList:this.state.forbidUploadFileList,totalProgress:this.state.totalProgress,uploadBitrate:this.state.uploadBitrate,filesUploadedNum:this.state.filesUploadedNum,allFilesNum:this.state.allFilesNum,onCloseUploadDialog:this.onCloseUploadDialog,onCancelAllUploading:this.onCancelAllUploading,onUploadCancel:this.onUploadCancel,onUploadRetry:this.onUploadRetry,onFileUpload:this.onFileUpload,onFolderUpload:this.onFolderUpload,isUploading:!!this.resumable&&this.resumable.isUploading()})]})}}])}(n.Component)),z=q,E=window.app.pageOptions.username,_=window.uploadLink,B=_.dirName,R=_.sharedByName,M=_.sharedByAvatar,O=_.noQuota,T=_.maxUploadFileSize,G=_.token,H=_.repoID,V=_.path,Q=function(e){function a(){var e;(0,t.default)(this,a);for(var l=arguments.length,r=new Array(l),s=0;s<l;s++)r[s]=arguments[s];return(e=(0,i.default)(this,a,[].concat(r))).onFileUploadSuccess=function(e){var a=e.name,l="dir"===e.type;p.e.shareLinksUploadDone(G,d.Aq.joinPath(V,a),l)},e}return(0,s.default)(a,e),(0,r.default)(a,[{key:"render",value:function(){var e=this;return(0,A.jsxs)("div",{className:"h-100 d-flex flex-column",children:[(0,A.jsxs)("div",{className:"top-header d-flex justify-content-between",children:[(0,A.jsx)(c.A,{}),E&&(0,A.jsx)(m.A,{})]}),(0,A.jsx)("div",{className:"o-auto",children:(0,A.jsxs)("div",{className:"py-4 px-6 mx-auto rounded",id:"upload-link-panel",children:[(0,A.jsxs)("h3",{className:"h5 d-flex text-nowrap",children:[(0,u.APU)("Upload files to"),(0,A.jsx)("span",{className:"op-target text-truncate mx-1",children:B})]}),(0,A.jsxs)("p",{className:"small shared-by",children:[(0,u.APU)("Shared by:"),(0,A.jsx)("img",{src:M,width:16,height:16,className:"avatar mx-1",alt:(0,u.APU)("Avatar")}),R]}),O?(0,A.jsxs)("div",{className:"py-6 text-center",children:[(0,A.jsx)("span",{className:"warning-icon","aria-hidden":"true",children:(0,A.jsx)(N.A,{symbol:"about"})}),(0,A.jsx)("p",{children:(0,u.APU)("The owner of this library has run out of space.")})]}):(0,A.jsxs)(n.Fragment,{children:[T&&(0,A.jsx)("p",{className:"small text-gray m-0",children:(0,u.APU)("File size should be smaller than {max_size_placeholder}.").replace("{max_size_placeholder}",d.Aq.bytesToSize(1e3*T*1e3))}),(0,A.jsxs)("div",{id:"upload-link-drop-zone",className:"text-center mt-2 mb-4",children:[(0,A.jsx)("span",{className:"upload-icon","aria-hidden":"true",children:(0,A.jsx)(N.A,{symbol:"upload"})}),(0,A.jsx)("p",{className:"small text-gray mb-0",children:(0,u.APU)("Drag and drop files or folders here.")})]}),(0,A.jsx)(z,{ref:function(a){return e.uploader=a},dragAndDrop:!0,token:G,repoID:H,path:V,onFileUploadSuccess:this.onFileUploadSuccess})]})]})})]})}}])}(n.Component);(0,o.createRoot)(document.getElementById("wrapper")).render((0,A.jsx)(Q,{}))}},function(e){e.O(0,[4223],(function(){return a=32781,e(e.s=a);var a}));e.O()}]);