"use strict";(self.webpackChunkseahub_frontend=self.webpackChunkseahub_frontend||[]).push([[709],{96893:function(e,a,i){var r=i(15671),t=i(43144),l=i(60136),s=i(29388),n=i(47313),o=i(1168),d=i(83854),p=i(4514),c=i(61805),u=i(93564),m=i(93190),h=i(97326),f=i(57313),g=i.n(f),x=i(92534),b=i.n(x),v=i(16614),F=i(25417),U=i(72611),j=i(57124),k=i(21303),y=i(46417),S="uploading",N="error",w="isSaving",L="uploaded",C=function(e){(0,l.Z)(i,e);var a=(0,s.Z)(i);function i(e){var t;return(0,r.Z)(this,i),(t=a.call(this,e)).onUploadCancel=function(e){e.preventDefault(),t.props.onUploadCancel(t.props.resumableFile)},t.onUploadRetry=function(e){e.preventDefault(),t.props.onUploadRetry(t.props.resumableFile)},t.formatFileSize=function(e){return"number"!==typeof e?"":e>=1e9?(e/1e9).toFixed(1)+" G":e>=1e6?(e/1e6).toFixed(1)+" M":e>=1e3?(e/1e3).toFixed(1)+" K":e.toFixed(1)+" B"},t.state={uploadState:S},t}return(0,t.Z)(i,[{key:"UNSAFE_componentWillReceiveProps",value:function(e){var a=e.resumableFile,i=S;a.error?i=N:(0!==a.remainingTime||a.isSaved||(i=w),a.isSaved&&(i=L)),this.setState({uploadState:i})}},{key:"render",value:function(){var e=this.props.resumableFile,a=Math.round(100*e.progress()),i=e.error;return(0,y.jsxs)("tr",{className:"file-upload-item",children:[(0,y.jsx)("td",{className:"upload-name",children:(0,y.jsx)("div",{className:"ellipsis",children:e.newFileName})}),(0,y.jsx)("td",{children:(0,y.jsx)("span",{className:"file-size",children:this.formatFileSize(e.size)})}),(0,y.jsxs)("td",{className:"upload-progress",children:[(this.state.uploadState===S||this.state.uploadState===w)&&(0,y.jsxs)(n.Fragment,{children:[e.size>=1e8&&(0,y.jsxs)(n.Fragment,{children:[e.isUploading()&&(0,y.jsxs)("div",{className:"progress-container",children:[(0,y.jsx)("div",{className:"progress",children:(0,y.jsx)("div",{className:"progress-bar",role:"progressbar",style:{width:"".concat(a,"%")},"aria-valuenow":a,"aria-valuemin":"0","aria-valuemax":"100"})}),-1===e.remainingTime&&(0,y.jsx)("div",{className:"progress-text",children:(0,c.ih)("Preparing to upload...")}),e.remainingTime>0&&(0,y.jsxs)("div",{className:"progress-text",children:[(0,c.ih)("Remaining")," ",d.cQ.formatTime(e.remainingTime)]}),0===e.remainingTime&&(0,y.jsx)("div",{className:"progress-text",children:(0,c.ih)("Saving...")})]}),!e.isUploading()&&(0,y.jsx)("div",{className:"progress-container d-flex align-items-center",children:(0,y.jsx)("div",{className:"progress",children:(0,y.jsx)("div",{className:"progress-bar",role:"progressbar",style:{width:"".concat(a,"%")},"aria-valuenow":a,"aria-valuemin":"0","aria-valuemax":"100"})})})]}),e.size<1e8&&(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)("div",{className:"progress-container d-flex align-items-center",children:(0,y.jsx)("div",{className:"progress",children:(0,y.jsx)("div",{className:"progress-bar",role:"progressbar",style:{width:"".concat(a,"%")},"aria-valuenow":a,"aria-valuemin":"0","aria-valuemax":"100"})})}),this.state.uploadState===S&&(0,y.jsxs)(y.Fragment,{children:[0==a&&(0,y.jsx)("p",{className:"progress-text mb-0",children:(0,c.ih)("Waiting...")}),a>0&&(0,y.jsx)("p",{className:"progress-text mb-0",children:"".concat((0,c.ih)("Uploading...")," ").concat(a,"%")})]}),this.state.uploadState===w&&(0,y.jsx)("p",{className:"progress-text mb-0",children:(0,c.ih)("Saving...")})]})]}),this.state.uploadState===L&&(0,y.jsxs)("div",{className:"d-flex align-items-center",children:[(0,y.jsx)("span",{className:"upload-success-icon sf2-icon-tick mr-2"}),(0,y.jsx)("span",{className:"upload-success-msg",children:(0,c.ih)("Uploaded")})]}),this.state.uploadState===N&&(0,y.jsxs)("div",{className:"d-flex align-items-center",children:[(0,y.jsx)("span",{className:"upload-failure-icon fas fa-exclamation mr-2"}),(0,y.jsx)("span",{className:"upload-failure-msg",dangerouslySetInnerHTML:{__html:i}})]})]}),(0,y.jsx)("td",{className:"upload-operation",children:(0,y.jsxs)(n.Fragment,{children:[this.state.uploadState===S&&(0,y.jsx)("a",{href:"#",onClick:this.onUploadCancel,role:"button",children:(0,c.ih)("Cancel")}),this.state.uploadState===N&&(0,y.jsx)("a",{href:"#",onClick:this.onUploadRetry,role:"button",children:(0,c.ih)("Retry")})]})})]})}}]),i}(n.Component),I=function(e){(0,l.Z)(i,e);var a=(0,s.Z)(i);function i(){return(0,r.Z)(this,i),a.apply(this,arguments)}return(0,t.Z)(i,[{key:"render",value:function(){var e=this.props.file;return(0,y.jsxs)("tr",{className:"file-upload-item",children:[(0,y.jsx)("td",{className:"upload-name",children:(0,y.jsx)("div",{className:"ellipsis",children:e.name})}),(0,y.jsx)("td",{children:d.cQ.bytesToSize(e.size)}),(0,y.jsx)("td",{children:(0,y.jsxs)("div",{className:"d-flex align-items-center",children:[(0,y.jsx)("span",{className:"upload-failure-icon fas fa-exclamation mr-2"}),(0,y.jsx)("span",{className:"upload-failure-msg",children:(0,c.ih)("File too large")})]})}),(0,y.jsx)("td",{})]})}}]),i}(n.Component),D=I,Z=function(e){(0,l.Z)(i,e);var a=(0,s.Z)(i);function i(e){var t;return(0,r.Z)(this,i),(t=a.call(this,e)).toggleDropdown=function(){t.setState({dropdownOpen:!t.state.dropdownOpen})},t.onDropdownToggleKeyDown=function(e){"Enter"!=e.key&&"Space"!=e.key||t.toggleDropdown()},t.onMenuItemKeyDown=function(e){"Enter"!=e.key&&"Space"!=e.key||e.target.click()},t.state={dropdownOpen:!1},t}return(0,t.Z)(i,[{key:"render",value:function(){var e,a=this,i=this.props,r=i.totalProgress,t=i.uploadBitrate,l=i.uploadFileList,s=i.forbidUploadFileList,o=i.isUploading,p=(0,c.ih)("{uploaded_files_num}/{all_files_num} Files").replace("{uploaded_files_num}",l.filter((function(e){return e.isSaved})).length).replace("{all_files_num}",l.length);if(!o){var u=l.filter((function(e){return e.error})).length+s.length;u>0&&(e=(0,c.ih)("{failed_files_num} file(s) failed to upload").replace("{failed_files_num}",u))}return(0,y.jsxs)(n.Fragment,{children:[(0,y.jsxs)("div",{className:"text-center",children:[(0,y.jsxs)(v.Z,{isOpen:this.state.dropdownOpen,toggle:this.toggleDropdown,children:[(0,y.jsx)(F.Z,{color:"primary",caret:!0,onKeyDown:this.onDropdownToggleKeyDown,children:(0,c.ih)("Upload")}),(0,y.jsxs)(U.Z,{children:[(0,y.jsx)(j.Z,{onClick:this.props.onFileUpload,onKeyDown:this.onMenuItemKeyDown,children:(0,c.ih)("Upload Files")}),(0,y.jsx)(j.Z,{onClick:this.props.onFolderUpload,onKeyDown:this.onMenuItemKeyDown,children:(0,c.ih)("Upload Folder")})]})]}),(0,y.jsx)(k.Z,{color:"primary",outline:!0,className:"ml-4",onClick:this.props.onCancelAllUploading,disabled:!o,children:(0,c.ih)("Cancel All")})]}),r>0&&(0,y.jsxs)("div",{id:"upload-link-total-progress-container",className:"".concat(o?"":"d-flex align-items-center"," px-6 py-2"),children:[(0,y.jsxs)("div",{className:"d-flex align-items-center flex-fill",children:[o?(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)("span",{children:(0,c.ih)("File Uploading...")}),(0,y.jsx)("span",{className:"ml-2",children:"".concat(r,"% (").concat(d.cQ.formatBitRate(t),")")})]}):(0,y.jsx)(y.Fragment,{children:e?(0,y.jsx)("p",{className:"m-0 error",children:e}):(0,y.jsx)("p",{className:"m-0",children:(0,c.ih)("All files uploaded")})}),l.length>0&&(0,y.jsx)("span",{className:"ml-auto",children:p})]}),o&&(0,y.jsx)("div",{className:"progress",children:(0,y.jsx)("div",{className:"progress-bar",role:"progressbar",style:{width:"".concat(r,"%")},"aria-valuenow":r,"aria-valuemin":"0","aria-valuemax":"100"})})]}),(0,y.jsx)("div",{className:"mh-2",children:(0,y.jsxs)("table",{className:"table-thead-hidden",children:[(0,y.jsx)("thead",{children:(0,y.jsxs)("tr",{children:[(0,y.jsx)("th",{width:"40%",scope:"col",children:(0,c.ih)("name")}),(0,y.jsx)("th",{width:"15%",scope:"col",children:(0,c.ih)("size")}),(0,y.jsx)("th",{width:"30%",scope:"col",children:(0,c.ih)("progress")}),(0,y.jsx)("th",{width:"15%",scope:"col",children:(0,c.ih)("state")})]})}),(0,y.jsxs)("tbody",{children:[this.props.forbidUploadFileList.map((function(e,a){return(0,y.jsx)(D,{file:e},a)})),this.props.uploadFileList.map((function(e,i){return(0,y.jsx)(C,{resumableFile:e,onUploadCancel:a.props.onUploadCancel,onUploadRetry:a.props.onUploadRetry},i)})).reverse()]})]})})]})}}]),i}(n.Component),_=i(68396),z=(i(87575),function(e){(0,l.Z)(i,e);var a=(0,s.Z)(i);function i(e){var t;return(0,r.Z)(this,i),(t=a.call(this,e)).componentWillUnmount=function(){window.onbeforeunload=null,!0===t.props.dragAndDrop&&t.resumable.disableDropOnDocument()},t.onbeforeunload=function(){if(window.uploader&&window.uploader.isUploadProgressDialogShow&&100!==window.uploader.totalProgress)return""},t.bindCallbackHandler=function(){var e=t.props,a=e.minFileSizeErrorCallback,i=e.fileTypeErrorCallback;t.maxFilesErrorCallback&&(t.resumable.opts.maxFilesErrorCallback=t.maxFilesErrorCallback),a&&(t.resumable.opts.minFileSizeErrorCallback=t.props.minFileSizeErrorCallback),t.maxFileSizeErrorCallback&&(t.resumable.opts.maxFileSizeErrorCallback=t.maxFileSizeErrorCallback),i&&(t.resumable.opts.fileTypeErrorCallback=t.props.fileTypeErrorCallback)},t.bindEventHandler=function(){t.resumable.on("chunkingComplete",t.onChunkingComplete.bind((0,h.Z)(t))),t.resumable.on("fileAdded",t.onFileAdded.bind((0,h.Z)(t))),t.resumable.on("fileProgress",t.onFileProgress.bind((0,h.Z)(t))),t.resumable.on("fileSuccess",t.onFileUploadSuccess.bind((0,h.Z)(t))),t.resumable.on("fileError",t.onFileError.bind((0,h.Z)(t))),t.resumable.on("uploadStart",t.onUploadStart.bind((0,h.Z)(t))),t.resumable.on("progress",t.onProgress.bind((0,h.Z)(t))),t.resumable.on("complete",t.onComplete.bind((0,h.Z)(t))),t.resumable.on("error",t.onError.bind((0,h.Z)(t))),t.resumable.on("dragstart",t.onDragStart.bind((0,h.Z)(t)))},t.maxFilesErrorCallback=function(e,a){var i=c.dd,r=(0,c.ih)("Please upload no more than {maxFiles} files at a time.");r=r.replace("{maxFiles}",i),_.Z.danger(r)},t.maxFileSizeErrorCallback=function(e){var a=t.state.forbidUploadFileList;a.push(e),t.setState({forbidUploadFileList:a})},t.onChunkingComplete=function(e){var a=t.props.path,i=e.fileName,r=e.relativePath,l=i===r;if(e.formData={},l)e.formData={parent_dir:a};else{var s=r.slice(0,r.lastIndexOf("/")+1);e.formData={parent_dir:a,relative_path:s}}},t.onFileAdded=function(e,a){if(e.fileName===e.relativePath&&1===a.length){t.setUploadFileList(t.resumable.files),p.I.sharedUploadLinkGetFileUploadUrl(t.props.token).then((function(a){t.resumable.opts.target=a.data.upload_link+"?ret-json=1",t.resumableUpload(e)})).catch((function(e){var a=d.cQ.getErrorMsg(e);_.Z.danger(a)}))}else t.setUploadFileList(t.resumable.files),t.isUploadLinkLoaded||(t.isUploadLinkLoaded=!0,p.I.sharedUploadLinkGetFileUploadUrl(t.props.token).then((function(e){t.resumable.opts.target=e.data.upload_link+"?ret-json=1",t.resumable.upload()})).catch((function(e){var a=d.cQ.getErrorMsg(e);_.Z.danger(a)})))},t.resumableUpload=function(e){var a=t.props,i=a.repoID,r=a.path;p.I.getFileUploadedBytes(i,r,e.fileName).then((function(a){var i=a.data.uploadedBytes,r=1024*parseInt(c.pL)*1024||1048576,l=Math.floor(i/r);e.markChunksCompleted(l),t.resumable.upload()})).catch((function(e){var a=d.cQ.getErrorMsg(e);_.Z.danger(a)}))},t.filesAddedComplete=function(e,a){t.state.forbidUploadFileList.length>0&&0===a.length&&t.setState({isUploadProgressDialogShow:!0,totalProgress:100})},t.setUploadFileList=function(){var e=t.resumable.files;t.setState({uploadFileList:e,isUploadProgressDialogShow:!0}),d.cQ.registerGlobalVariable("uploader","isUploadProgressDialogShow",!0)},t.onFileProgress=function(e){var a=t.getBitrate(),i=t.state.uploadFileList.map((function(i){if(i.uniqueIdentifier===e.uniqueIdentifier&&a){var r=8*(i.size-i.size*i.progress()),t=Math.floor(r/a);i.remainingTime=t}return i}));t.setState({uploadBitrate:a,uploadFileList:i})},t.getBitrate=function(){var e=0,a=0,i=(new Date).getTime();if(t.resumable.files.forEach((function(a){e+=a.progress()*a.size})),t.timestamp){var r=i-t.timestamp;if(r<t.bitrateInterval)return t.state.uploadBitrate;(e<t.loaded||0===t.loaded)&&(t.loaded=e),a=(e-t.loaded)*(1e3/r)*8}return t.timestamp=i,t.loaded=e,a},t.onUploadStart=function(){},t.onProgress=function(){var e=Math.round(100*t.resumable.progress());t.setState({totalProgress:e}),d.cQ.registerGlobalVariable("uploader","totalProgress",e)},t.onFileUploadSuccess=function(e,a){var i=e.formData,r=(new Date).getTime()/1e3;if(a=i.replace?a:JSON.parse(a)[0],i.relative_path){var l=i.relative_path,s=l.slice(0,l.indexOf("/")),n={id:a.id,name:s,type:"dir",mtime:r};t.notifiedFolders.some((function(e){return e.name===n.name}))||(t.notifiedFolders.push(n),t.props.onFileUploadSuccess(n));var o=t.state.uploadFileList.map((function(i){return i.uniqueIdentifier===e.uniqueIdentifier&&(i.newFileName=l+a.name,i.isSaved=!0),i}));t.setState({uploadFileList:o})}else if(i.replace){var d=e.fileName,p={id:a,name:d,type:"file",mtime:r};t.props.onFileUploadSuccess(p);var c=t.state.uploadFileList.map((function(a){return a.uniqueIdentifier===e.uniqueIdentifier&&(a.newFileName=d,a.isSaved=!0),a}));t.setState({uploadFileList:c})}else{var u={id:a.id,type:"file",name:a.name,size:a.size,mtime:r};t.props.onFileUploadSuccess(u);var m=t.state.uploadFileList.map((function(i){return i.uniqueIdentifier===e.uniqueIdentifier&&(i.newFileName=a.name,i.isSaved=!0),i}));t.setState({uploadFileList:m})}},t.onFileError=function(e,a){var i="";if(a){var r=a.replace(/\n/g,"");r=JSON.parse(r),"File locked by others."===(i=r.error)&&(i=(0,c.ih)("File is locked by others.")),"Internal error."===i&&(i=(0,c.ih)("Internal Server Error"))}else i=(0,c.ih)("Network error");var l=t.state.uploadFileList.map((function(a){return a.uniqueIdentifier===e.uniqueIdentifier&&(t.state.retryFileList.push(a),a.error=i),a}));t.loaded=0,t.setState({retryFileList:t.state.retryFileList,uploadFileList:l})},t.onComplete=function(){t.error=!1,t.notifiedFolders=[],t.isUploadLinkLoaded=!1},t.onError=function(e,a){var i=(0,c.ih)("Error");a&&a.fileName&&(i=(0,c.ih)("Failed to upload {file_name}.").replace("{file_name}",a.fileName)),_.Z.danger(i,{id:"file-error-msg"}),t.error=!0,t.isUploadLinkLoaded=!1,d.cQ.registerGlobalVariable("uploader","totalProgress",100)},t.setHeaders=function(e,a){var i=a.offset,r=a.getOpt("chunkSize"),t=0===e.size?1:e.size,l=0!==i?i*r:0,s=Math.min(t,(i+1)*r)-1;return t-a.endByte<r&&!a.getOpt("forceChunkSize")&&(s=t),{Accept:"application/json; text/javascript, */*; q=0.01","Content-Disposition":'attachment; filename="'+encodeURI(e.fileName)+'"',"Content-Range":"bytes "+l+"-"+s+"/"+t}},t.setQuery=function(e){return e.formData},t.generateUniqueIdentifier=function(e){var a=e.webkitRelativePath||e.relativePath||e.fileName||e.name;return b()(a+new Date)+a},t.onClick=function(e){e.nativeEvent.stopImmediatePropagation(),e.stopPropagation()},t.onFileUpload=function(){t.uploadInput.current.removeAttribute("webkitdirectory"),t.uploadInput.current.click()},t.onFolderUpload=function(){t.uploadInput.current.setAttribute("webkitdirectory","webkitdirectory"),t.uploadInput.current.click()},t.onDragStart=function(){t.uploadInput.current.setAttribute("webkitdirectory","webkitdirectory")},t.onCloseUploadDialog=function(){t.loaded=0,t.resumable.files=[],t.isUploadLinkLoaded=!1,t.setState({isUploadProgressDialogShow:!1,uploadFileList:[],forbidUploadFileList:[]}),d.cQ.registerGlobalVariable("uploader","isUploadProgressDialogShow",!1)},t.onUploadCancel=function(e){var a=t.state.uploadFileList.filter((function(a){return a.uniqueIdentifier!==e.uniqueIdentifier||(a.cancel(),!1)}));t.resumable.isUploading()||(t.setState({totalProgress:100}),t.loaded=0),t.setState({uploadFileList:a})},t.onCancelAllUploading=function(){var e=t.state.uploadFileList.filter((function(e){return!Math.round(1!==e.progress())||(e.cancel(),!1)}));t.loaded=0,t.setState({totalProgress:100,uploadFileList:e}),t.isUploadLinkLoaded=!1},t.onUploadRetry=function(e){p.I.sharedUploadLinkGetFileUploadUrl(t.props.token).then((function(a){t.resumable.opts.target=a.data.upload_link+"?ret-json=1";var i=t.state.retryFileList.filter((function(a){return a.uniqueIdentifier!==e.uniqueIdentifier})),r=t.state.uploadFileList.map((function(a){return a.uniqueIdentifier===e.uniqueIdentifier&&(a.error=null,t.retryUploadFile(a)),a}));t.setState({retryFileList:i,uploadFileList:r})})).catch((function(e){var a=d.cQ.getErrorMsg(e);_.Z.danger(a)}))},t.retryUploadFile=function(e){var a=t.props,i=a.repoID,r=a.path,l=e.fileName;if(!(e.fileName===e.relativePath)){var s=e.formData.relative_path;l=("/"===r?r+s:r+"/"+s)+l}e.bootstrap();var n=!1;e.resumableObj.on("chunkingComplete",(function(){n||p.I.getFileUploadedBytes(i,r,l).then((function(a){var i=a.data.uploadedBytes,r=1024*parseInt(c.pL)*1024||1048576,t=Math.floor(i/r);e.markChunksCompleted(t),e.resumableObj.upload()})).catch((function(e){var a=d.cQ.getErrorMsg(e);_.Z.danger(a)})),n=!0}))},t.replaceRepetitionFile=function(){var e=t.props,a=e.repoID,i=e.path;p.I.getUpdateLink(a,i).then((function(e){t.resumable.opts.target=e.data;var a=t.resumable.files[t.resumable.files.length-1];a.formData.replace=1,a.formData.target_file=a.formData.parent_dir+a.fileName,t.setUploadFileList(t.resumable.files),t.resumable.upload()})).catch((function(e){var a=d.cQ.getErrorMsg(e);_.Z.danger(a)}))},t.cancelFileUpload=function(){t.resumable.files.pop()},t.state={retryFileList:[],uploadFileList:[],forbidUploadFileList:[],totalProgress:0,isUploadProgressDialogShow:!1,currentResumableFile:null,uploadBitrate:0},t.uploadInput=n.createRef(),t.notifiedFolders=[],t.timestamp=null,t.loaded=0,t.bitrateInterval=500,t.isUploadLinkLoaded=!1,window.onbeforeunload=t.onbeforeunload,t}return(0,t.Z)(i,[{key:"componentDidMount",value:function(){this.resumable=new(g())({target:"",query:this.setQuery||{},fileType:this.props.filetypes,maxFiles:c.dd||void 0,maxFileSize:1e3*c.Og*1e3||void 0,testMethod:this.props.testMethod||"post",testChunks:this.props.testChunks||!1,headers:this.setHeaders||{},withCredentials:this.props.withCredentials||!1,chunkSize:1024*parseInt(c.pL)*1024||1048576,simultaneousUploads:this.props.simultaneousUploads||1,fileParameterName:this.props.fileParameterName,generateUniqueIdentifier:this.generateUniqueIdentifier,forceChunkSize:!0,maxChunkRetries:3,minFileSize:0}),this.resumable.assignBrowse(this.uploadInput.current,!0),this.props.dragAndDrop&&this.resumable.assignDrop(document.getElementById("upload-link-drop-zone")),this.bindCallbackHandler(),this.bindEventHandler()}},{key:"render",value:function(){return(0,y.jsxs)(n.Fragment,{children:[(0,y.jsx)("div",{className:"file-uploader-container",children:(0,y.jsx)("div",{className:"file-uploader",children:(0,y.jsx)("input",{className:"upload-input",type:"file",ref:this.uploadInput,onClick:this.onClick,"aria-label":(0,c.ih)("Upload")})})}),(0,y.jsx)(Z,{retryFileList:this.state.retryFileList,uploadFileList:this.state.uploadFileList,forbidUploadFileList:this.state.forbidUploadFileList,totalProgress:this.state.totalProgress,uploadBitrate:this.state.uploadBitrate,onCloseUploadDialog:this.onCloseUploadDialog,onCancelAllUploading:this.onCancelAllUploading,onUploadCancel:this.onUploadCancel,onUploadRetry:this.onUploadRetry,onFileUpload:this.onFileUpload,onFolderUpload:this.onFolderUpload,isUploading:!!this.resumable&&this.resumable.isUploading()})]})}}]),i}(n.Component)),E=z,P=window.app.pageOptions.username,M=window.uploadLink,T=M.dirName,q=M.sharedBy,A=M.noQuota,B=M.maxUploadFileSize,Q=M.token,R=M.repoID,O=M.path,H=function(e){(0,l.Z)(i,e);var a=(0,s.Z)(i);function i(){var e;(0,r.Z)(this,i);for(var t=arguments.length,l=new Array(t),s=0;s<t;s++)l[s]=arguments[s];return(e=a.call.apply(a,[this].concat(l))).onFileUploadSuccess=function(e){var a=e.name,i="dir"===e.type;p.I.shareLinksUploadDone(Q,d.cQ.joinPath(O,a),i)},e}return(0,t.Z)(i,[{key:"render",value:function(){var e=this;return(0,y.jsxs)("div",{className:"h-100 d-flex flex-column",children:[(0,y.jsxs)("div",{className:"top-header d-flex justify-content-between",children:[(0,y.jsx)(u.Z,{}),P&&(0,y.jsx)(m.Z,{})]}),(0,y.jsx)("div",{className:"o-auto",children:(0,y.jsxs)("div",{className:"py-4 px-6 mx-auto rounded",id:"upload-link-panel",children:[(0,y.jsx)("h3",{className:"h5 d-flex text-nowrap",dangerouslySetInnerHTML:{__html:(0,c.ih)("Upload files to {folder_name_placeholder}").replace("{folder_name_placeholder}",'<span class="op-target text-truncate mx-1">'.concat(d.cQ.HTMLescape(T),"</span>"))}}),(0,y.jsx)("p",{className:"small shared-by",dangerouslySetInnerHTML:{__html:"".concat((0,c.ih)("shared by:")," ").concat(q.avatar," ").concat(q.name)}}),A?(0,y.jsxs)("div",{className:"py-6 text-center",children:[(0,y.jsx)("span",{className:"sf3-font sf3-font-tips warning-icon"}),(0,y.jsx)("p",{children:(0,c.ih)("The owner of this library has run out of space.")})]}):(0,y.jsxs)(n.Fragment,{children:[B&&(0,y.jsx)("p",{className:"small text-gray m-0",children:(0,c.ih)("File size should be smaller than {max_size_placeholder}.").replace("{max_size_placeholder}",d.cQ.bytesToSize(1e3*B*1e3))}),(0,y.jsxs)("div",{id:"upload-link-drop-zone",className:"text-center mt-2 mb-4",children:[(0,y.jsx)("span",{className:"sf3-font sf3-font-upload upload-icon"}),(0,y.jsx)("p",{className:"small text-gray mb-0",children:(0,c.ih)("Drag and drop files or folders here.")})]}),(0,y.jsx)(E,{ref:function(a){return e.uploader=a},dragAndDrop:!0,token:Q,repoID:R,path:O,onFileUploadSuccess:this.onFileUploadSuccess})]})]})})]})}}]),i}(n.Component);o.render((0,y.jsx)(H,{}),document.getElementById("wrapper"))}},function(e){e.O(0,[351],(function(){return a=96893,e(e.s=a);var a}));e.O()}]);