{"version":3,"file":"static/js/app.97f02a7c.js","mappings":"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","sources":["components/system-notification.js","models/group.js","components/main-side-nav.js","components/dialog/about-dialog.js","components/side-nav-footer.js","components/side-panel.js","components/main-panel.js","pages/drafts/drafts-view.js","components/draft-list-view/draft-list-item.js","components/draft-list-view/draft-list-view.js","pages/drafts/draft-content.js","models/activity.js","components/dialog/list-created-files-dialog.js","pages/dashboard/files-activities.js","pages/starred/starred.js","components/dialog/confirm-unlink-device.js","pages/linked-devices/linked-devices.js","models/shared-repo-info.js","components/dialog/perm-select.js","pages/share-admin/libraries.js","models/shared-folder-info.js","pages/share-admin/folders.js","components/dialog/share-link-permission-select.js","components/dialog/sort-options.js","components/toolbar/top-toolbar.js","pages/share-admin/share-links.js","pages/share-admin/upload-links.js","models/repo.js","components/libs-mobile-thead.js","components/icon.js","components/repo-monitored-icon.js","pages/shared-libs/shared-libs.js","pages/share-with-ocm/shared-with-ocm.js","pages/ocm-via-webdav/ocm-via-webdav.js","pages/share-with-ocm/remote-dir-topbar.js","pages/share-with-ocm/remote-dir-path.js","pages/share-with-ocm/remote-dir-content.js","pages/share-with-ocm/remote-dir-view.js","components/dialog/create-repo-dialog.js","components/toolbar/repo-view-toobar.js","components/dirent-detail/lib-details.js","components/dialog/lib-history-setting-dialog.js","components/dialog/change-repo-password-dialog.js","components/dialog/reset-encrypted-repo-password-dialog.js","components/dialog/label-repo-state-dialog.js","components/dialog/lib-sub-folder-set-user-permission-dialog.js","components/dialog/lib-sub-folder-set-group-permission-dialog.js","components/dialog/lib-sub-folder-permission-dialog.js","pages/my-libs/mylib-repo-menu.js","components/select-editor/repo-api-token-permission-editor.js","components/dialog/repo-api-token-dialog.js","components/dialog/repo-share-admin/share-links.js","components/dialog/repo-share-admin/upload-links.js","components/dialog/repo-share-admin/user-shares.js","components/dialog/repo-share-admin/group-shares.js","components/dialog/repo-share-admin-dialog.js","components/dialog/lib-old-files-auto-del-dialog.js","pages/my-libs/mylib-repo-list-item.js","pages/my-libs/mylib-repo-list-view.js","components/dialog/guide-for-new-dialog.js","pages/my-libs/my-libs.js","pages/my-libs/my-libs-deleted.js","components/dialog/share-repo-dialog.js","components/shared-repo-list-view/shared-repo-list-item.js","components/shared-repo-list-view/shared-repo-list-view.js","pages/shared-with-all/public-shared-view.js","utils/collab-server.js","components/dialog/lib-decrypt-dialog.js","components/toolbar/view-mode-toolbar.js","components/dialog/create-file-dialog.js","components/toolbar/dir-operation-toolbar.js","components/dialog/move-dirent-dialog.js","components/dialog/copy-dirent-dialog.js","components/dialog/rename-dirent.js","components/toolbar/multiple-dir-operation-toolbar.js","components/toolbar/view-file-toolbar.js","pages/lib-content-view/lib-content-toolbar.js","components/cur-dir-path/dir-path.js","components/dialog/tag-color.js","components/dialog/tag-name.js","components/dialog/list-tag-dialog.js","components/cur-dir-path/dir-tool.js","components/cur-dir-path/index.js","components/dirent-detail/detail-comments-list.js","constants/keyCodes.js","constants/index.js","utils/number-precision.js","utils/extra-attributes.js","components/dialog/extra-attributes-dialog/column/column-name.js","components/dialog/extra-attributes-dialog/editor/simple-text.js","components/dialog/extra-attributes-dialog/editor/formula-formatter.js","components/dialog/extra-attributes-dialog/editor/search-input.js","components/dialog/extra-attributes-dialog/editor/single-select/single-select-editor.js","components/dialog/extra-attributes-dialog/editor/single-select/index.js","components/dialog/extra-attributes-dialog/editor/number-editor.js","components/dialog/extra-attributes-dialog/editor/date-editor.js","components/dialog/extra-attributes-dialog/editor/ctime-formatter.js","components/dialog/extra-attributes-dialog/editor/index.js","components/dialog/extra-attributes-dialog/column/index.js","components/dialog/extra-attributes-dialog/index.js","constants/zIndexes.js","components/dirent-detail/detail-list-view.js","components/dirent-detail/dirent-details.js","components/dirent-list-view/dirent-none-view.js","components/dirent-list-view/dirent-list-item.js","components/draggable/dirents-dragged-preview.js","components/dirent-list-view/dirent-list-view.js","components/dir-view-mode/dir-list-view.js","components/dirent-grid-view/dirent-grid-item.js","components/dirent-grid-view/dirent-grid-view.js","components/dir-view-mode/dir-grid-view.js","components/dialog/rename-dialog.js","components/dir-view-mode/dir-column-nav.js","components/dir-view-mode/dir-column-file.js","components/dir-view-mode/dir-column-view.js","pages/lib-content-view/lib-content-container.js","components/file-uploader/upload-list-item.js","components/file-uploader/forbid-upload-list-item.js","components/file-uploader/upload-progress-dialog.js","components/dialog/upload-remind-dialog.js","components/file-uploader/file-uploader.js","components/dialog/delete-folder-dialog.js","pages/lib-content-view/lib-content-view.js","components/dialog/dismiss-group-dialog.js","components/dialog/create-department-repo-dialog.js","components/dialog/rename-group-dialog.js","components/dialog/transfer-group-dialog.js","components/dialog/import-members-dialog.js","components/group-members.js","components/list-and-add-group-members.js","components/dialog/manage-members-dialog.js","components/dialog/leave-group-dialog.js","pages/groups/group-view.js","components/toolbar/groups-toolbar.js","components/dialog/create-group-dialog.js","pages/groups/groups-view.js","components/toolbar/invitations-toolbar.js","components/dialog/invite-people-dialog.js","components/dialog/invitation-revoke-dialog.js","pages/invitations/invitations-view.js","components/dialog/new-wiki-dialog.js","components/dialog/wiki-select-dialog.js","components/dialog/wiki-delete-dialog.js","components/wiki-list-view/wiki-list-item.js","components/wiki-list-view/wiki-list-view.js","pages/wikis/wikis.js","components/toolbar/general-toolbar.js","components/main-content-wrapper.js","app.js","components/context-menu/actions.js","components/context-menu/context-menu.js","components/context-menu/globalEventListener.js","components/context-menu/helpers.js","components/dialog/copy-move-dirent-progress-dialog.js","components/dialog/create-folder-dialog.js","components/dialog/create-tag-dialog.js","components/dialog/edit-filetag-dialog.js","components/dialog/image-dialog.js","components/dialog/list-taggedfiles-dialog.js","components/dialog/share-admin-link.js","components/dialog/zip-download-dialog.js","components/dropdown-menu/item-dropdown-menu.js","components/rename.js","models/draft.js","components/dialog/list-repo-drafts-dialog.js","components/dialog/readme-dialog.js","components/repo-info-bar.js","components/tree-view/tree-node-view.js","components/tree-view/tree-view.js","components/wiki-markdown-viewer.js","../node_modules/after/index.js","../node_modules/arraybuffer.slice/index.js","../node_modules/backo2/index.js","../node_modules/base64-arraybuffer/lib/base64-arraybuffer.js","../node_modules/blob/index.js","../node_modules/component-bind/index.js","../node_modules/component-emitter/index.js","../node_modules/component-inherit/index.js","../node_modules/engine.io-client/lib/globalThis.browser.js","../node_modules/engine.io-client/lib/index.js","../node_modules/engine.io-client/lib/socket.js","../node_modules/engine.io-client/lib/transport.js","../node_modules/engine.io-client/lib/transports/index.js","../node_modules/engine.io-client/lib/transports/polling-jsonp.js","../node_modules/engine.io-client/lib/transports/polling-xhr.js","../node_modules/engine.io-client/lib/transports/polling.js","../node_modules/engine.io-client/lib/transports/websocket.js","../node_modules/engine.io-client/lib/transports/xmlhttprequest.browser.js","../node_modules/engine.io-client/node_modules/debug/src/browser.js","../node_modules/engine.io-client/node_modules/debug/src/debug.js","../node_modules/engine.io-client/node_modules/ms/index.js","../node_modules/engine.io-parser/lib/browser.js","../node_modules/engine.io-parser/lib/keys.js","../node_modules/engine.io-parser/lib/utf8.js","../node_modules/has-binary2/index.js","../node_modules/has-binary2/node_modules/isarray/index.js","../node_modules/has-cors/index.js","../node_modules/indexof/index.js","../node_modules/parseqs/index.js","../node_modules/parseuri/index.js","../node_modules/reactstrap/es/Table.js","../node_modules/socket.io-client/lib/index.js","../node_modules/socket.io-client/lib/manager.js","../node_modules/socket.io-client/lib/on.js","../node_modules/socket.io-client/lib/socket.js","../node_modules/socket.io-client/lib/url.js","../node_modules/socket.io-client/node_modules/debug/src/browser.js","../node_modules/socket.io-client/node_modules/debug/src/debug.js","../node_modules/socket.io-client/node_modules/ms/index.js","../node_modules/socket.io-parser/binary.js","../node_modules/socket.io-parser/index.js","../node_modules/socket.io-parser/is-buffer.js","../node_modules/socket.io-parser/node_modules/debug/src/browser.js","../node_modules/socket.io-parser/node_modules/debug/src/debug.js","../node_modules/socket.io-parser/node_modules/isarray/index.js","../node_modules/socket.io-parser/node_modules/ms/index.js","../node_modules/svg-baker-runtime/browser-symbol.js","../node_modules/svg-sprite-loader/runtime/browser-sprite.build.js","../node_modules/to-array/index.js","../node_modules/yeast/index.js","webpack://seahub-frontend/./src/css/repo-tag.css?ecda","assets/icons/monitor.svg","assets/icons|sync|//.svg$"],"sourcesContent":["import React from 'react';\nimport { curNoteMsg, curNoteID, siteRoot, gettext } from '../utils/constants';\n\nimport '../css/system-notification.css';\n\nclass SystemNotification extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isClosed: false\n    };\n  }\n\n  close = () => {\n    this.setState({isClosed: true});\n\n    if (navigator.cookieEnabled) {\n      let date = new Date(),\n        cookies = document.cookie.split('; '),\n        infoIDExist = false,\n        newInfoID = curNoteID + '_';\n      date.setTime(date.getTime() + 14*24*60*60*1000);\n      newInfoID += '; expires=' + date.toGMTString() + '; path=' + siteRoot;\n      for (var i = 0, len = cookies.length; i < len; i++) {\n        if (cookies[i].split('=')[0] == 'info_id') {\n          infoIDExist = true;\n          document.cookie = 'info_id=' + cookies[i].split('=')[1] + newInfoID;\n          break;\n        }\n      }\n      if (!infoIDExist) {\n        document.cookie = 'info_id=' + newInfoID;\n      }\n    }\n  }\n\n  render() {\n    if (!curNoteMsg || this.state.isClosed) {\n      return null;\n    }\n\n    return (\n      <div id=\"info-bar\" className=\"d-flex justify-content-between\">\n        <p id=\"info-bar-info\" className=\"m-0\" dangerouslySetInnerHTML={{__html: curNoteMsg}}></p>\n        <button className=\"close sf2-icon-x1\" title={gettext('Close')} aria-label={gettext('Close')} onClick={this.close}></button>\n      </div>\n    );\n  }\n}\n\nexport default SystemNotification;\n","class Group {\n  constructor(object) {\n    this.id= object.id;\n    this.name = object.name;\n    this.owner = object.owner;\n    this.admins = object.admins || [];\n    this.avatar_url = object.avatar_url;\n    this.created_at = object.created_at;\n    this.parent_group_id = object.parent_group_id;\n    this.wiki_enabled = object.wiki_enabled;\n    this.repos = object.repos || [];\n    this.group_quota = object.group_quota;\n    this.group_quota_usage = object.group_quota_usage;\n  }\n}\n\nexport default Group;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Link } from '@gatsbyjs/reach-router';\nimport { Badge } from 'reactstrap';\nimport { gettext, siteRoot, canAddRepo, canGenerateShareLink, canGenerateUploadLink, canInvitePeople, dtableWebServer, enableOCM, enableOCMViaWebdav } from '../utils/constants';\nimport { seafileAPI } from '../utils/seafile-api';\nimport { Utils } from '../utils/utils';\nimport toaster from './toast';\nimport Group from '../models/group';\n\nimport { canViewOrg, isDocs, isPro, isDBSqlite3, customNavItems } from '../utils/constants';\n\nconst propTypes = {\n  currentTab: PropTypes.oneOfType([PropTypes.string, PropTypes.number]).isRequired,\n  tabItemClick: PropTypes.func.isRequired,\n  draftCounts: PropTypes.number,\n};\n\nclass MainSideNav extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      groupsExtended: false,\n      sharedExtended: false,\n      closeSideBar:false,\n      groupItems: [],\n    };\n\n    this.listHeight = 24; //for caculate tabheight\n    this.groupsHeight = 0;\n    this.adminHeight = 0;\n  }\n\n  grpsExtend = () => {\n    this.setState({\n      groupsExtended: !this.state.groupsExtended,\n    });\n    this.loadGroups();\n  }\n\n  shExtend = () => {\n    this.setState({\n      sharedExtended: !this.state.sharedExtended,\n    });\n  }\n\n  loadGroups = () => {\n    let _this = this;\n    seafileAPI.listGroups().then(res =>{\n      let groupList = res.data.map(item => {\n        let group = new Group(item);\n        return group;\n      });\n\n      this.groupsHeight = (groupList.length + 1) * _this.listHeight;\n      _this.setState({\n        groupItems: groupList.sort((a, b) => {\n          return a.name.toLowerCase() < b.name.toLowerCase() ? -1 : 1;\n        })\n      });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  tabItemClick = (e, param, id) => {\n    if (window.uploader &&\n      window.uploader.isUploadProgressDialogShow &&\n      window.uploader.totalProgress !== 100) {\n      if (!window.confirm(gettext('A file is being uploaded. Are you sure you want to leave this page?'))) {\n        e.preventDefault();\n        return false;\n      }\n      window.uploader.isUploadProgressDialogShow = false;\n    }\n    this.props.tabItemClick(param, id);\n  }\n\n  onDTableClick = () => {\n    let url = dtableWebServer;\n    window.open(url);\n  }\n\n  getActiveClass = (tab) => {\n    return this.props.currentTab === tab ? 'active' : '';\n  }\n\n  renderSharedGroups() {\n    let style = {height: 0};\n    if (this.state.groupsExtended) {\n      style = {height: this.groupsHeight};\n    }\n    return (\n      <ul className={`nav sub-nav nav-pills flex-column grp-list ${this.state.groupsExtended ? 'side-panel-slide' : 'side-panel-slide-up'}`} style={style}>\n        <li className=\"nav-item\">\n          <Link to={siteRoot + 'groups/'}  className={`nav-link ellipsis ${this.getActiveClass('groups')}`} onClick={(e) => this.tabItemClick(e, 'groups')}>\n            <span className=\"sharp\" aria-hidden=\"true\">#</span>\n            <span className=\"nav-text\">{gettext('All Groups')}</span>\n          </Link>\n        </li>\n        {this.state.groupItems.map(item => {\n          return (\n            <li key={item.id} className=\"nav-item\">\n              <Link to={siteRoot + 'group/' + item.id + '/'} className={`nav-link ellipsis ${this.getActiveClass(item.name)}`} onClick={(e) => this.tabItemClick(e, item.name, item.id)}>\n                <span className=\"sharp\" aria-hidden=\"true\">#</span>\n                <span className=\"nav-text\">{item.name}</span>\n              </Link>\n            </li>\n          );\n        })}\n      </ul>\n    );\n  }\n\n  renderSharedAdmin() {\n    let height = 0;\n    if (this.state.sharedExtended) {\n      if (!this.adminHeight) {\n        this.adminHeight = 3 * this.listHeight;\n      }\n      height = this.adminHeight;\n    }\n    let style = {height: height};\n\n    let linksNavItem = null;\n    if (canGenerateShareLink) {\n      linksNavItem = (\n        <li className=\"nav-item\">\n          <Link to={siteRoot + 'share-admin-share-links/'} className={`nav-link ellipsis ${this.getActiveClass('share-admin-share-links')}`} title={gettext('Links')} onClick={(e) => this.tabItemClick(e, 'share-admin-share-links')}>\n            <span aria-hidden=\"true\" className=\"sharp\">#</span>\n            <span className=\"nav-text\">{gettext('Links')}</span>\n          </Link>\n        </li>\n      );\n    } else if (canGenerateUploadLink) {\n      linksNavItem = (\n        <li className=\"nav-item\">\n          <Link to={siteRoot + 'share-admin-upload-links/'} className={`nav-link ellipsis ${this.getActiveClass('share-admin-upload-links')}`} title={gettext('Links')} onClick={(e) => this.tabItemClick(e, 'share-admin-upload-links')}>\n            <span aria-hidden=\"true\" className=\"sharp\">#</span>\n            <span className=\"nav-text\">{gettext('Links')}</span>\n          </Link>\n        </li>\n      );\n    }\n    return (\n      <ul className={`nav sub-nav nav-pills flex-column ${this.state.sharedExtended ? 'side-panel-slide' : 'side-panel-slide-up'}`} style={style} >\n        {canAddRepo && (\n          <li className=\"nav-item\">\n            <Link to={siteRoot + 'share-admin-libs/'} className={`nav-link ellipsis ${this.getActiveClass('share-admin-libs')}`} title={gettext('Libraries')} onClick={(e) => this.tabItemClick(e, 'share-admin-libs')}>\n              <span aria-hidden=\"true\" className=\"sharp\">#</span>\n              <span className=\"nav-text\">{gettext('Libraries')}</span>\n            </Link>\n          </li>\n        )}\n        <li className=\"nav-item\">\n          <Link to={siteRoot + 'share-admin-folders/'} className={`nav-link ellipsis ${this.getActiveClass('share-admin-folders')}`} title={gettext('Folders')} onClick={(e) => this.tabItemClick(e, 'share-admin-folders')}>\n            <span aria-hidden=\"true\" className=\"sharp\">#</span>\n            <span className=\"nav-text\">{gettext('Folders')}</span>\n          </Link>\n        </li>\n        {linksNavItem}\n      </ul>\n    );\n  }\n\n  renderCustomNavItems() {\n    return (\n      customNavItems.map((item, idx) => {\n        return (\n          <li key={idx} className=\"nav-item\">\n            <a href={item.link} className=\"nav-link ellipsis\" title={item.desc}>\n              <span className={item.icon} aria-hidden=\"true\"></span>\n              <span className=\"nav-text\">{item.desc}</span>\n            </a>\n          </li>\n        );\n      })\n    );\n  }\n\n  render() {\n    let showActivity = isDocs || isPro || !isDBSqlite3;\n    return (\n      <div className=\"side-nav\">\n        <div className=\"side-nav-con\">\n          <h3 className=\"sf-heading\">{gettext('Files')}</h3>\n          <ul className=\"nav nav-pills flex-column nav-container\">\n            {canAddRepo && (\n              <li className=\"nav-item\">\n                <Link to={ siteRoot + 'my-libs/' } className={`nav-link ellipsis ${this.getActiveClass('my-libs') || this.getActiveClass('deleted') }`} title={gettext('My Libraries')} onClick={(e) => this.tabItemClick(e, 'my-libs')}>\n                  <span className=\"sf2-icon-user\" aria-hidden=\"true\"></span>\n                  <span className=\"nav-text\">{gettext('My Libraries')}</span>\n                </Link>\n              </li>\n            )}\n            <li className=\"nav-item\">\n              <Link to={siteRoot + 'shared-libs/'} className={`nav-link ellipsis ${this.getActiveClass('shared-libs')}`} title={gettext('Shared with me')} onClick={(e) => this.tabItemClick(e, 'shared-libs')}>\n                <span className=\"sf2-icon-share\" aria-hidden=\"true\"></span>\n                <span className=\"nav-text\">{gettext('Shared with me')}</span>\n              </Link>\n            </li>\n            { canViewOrg &&\n              <li className=\"nav-item\" onClick={(e) => this.tabItemClick(e, 'org')}>\n                <Link to={ siteRoot + 'org/' } className={`nav-link ellipsis ${this.getActiveClass('org')}`} title={gettext('Shared with all')}>\n                  <span className=\"sf2-icon-organization\" aria-hidden=\"true\"></span>\n                  <span className=\"nav-text\">{gettext('Shared with all')}</span>\n                </Link>\n              </li>\n            }\n            <li className=\"nav-item flex-column\" id=\"group-nav\">\n              <a className=\"nav-link ellipsis\" title={gettext('Shared with groups')} onClick={this.grpsExtend}>\n                <span className=\"sf2-icon-group\" aria-hidden=\"true\"></span>\n                <span className=\"nav-text\">{gettext('Shared with groups')}</span>\n                <span className={`toggle-icon fas ${this.state.groupsExtended ?'fa-caret-down':'fa-caret-left'}`} aria-hidden=\"true\"></span>\n              </a>\n              {this.renderSharedGroups()}\n            </li>\n            {enableOCM &&\n              <li className=\"nav-item\">\n                <Link to={siteRoot + 'shared-with-ocm/'} className={`nav-link ellipsis ${this.getActiveClass('shared-with-ocm')}`} title={gettext('Shared from other servers')} onClick={(e) => this.tabItemClick(e, 'shared-with-ocm')}>\n                  <span className=\"sf3-font-share-from-other-servers sf3-font\" aria-hidden=\"true\"></span>\n                  <span className=\"nav-text\">{gettext('Shared from other servers')}</span>\n                </Link>\n              </li>\n            }\n            {enableOCMViaWebdav &&\n              <li className=\"nav-item\">\n                <Link to={siteRoot + 'ocm-via-webdav/'} className={`nav-link ellipsis ${this.getActiveClass('ocm-via-webdav')}`} title={gettext('Shared from other servers')} onClick={(e) => this.tabItemClick(e, 'ocm-via-webdav')}>\n                  <span className=\"sf3-font-share-from-other-servers sf3-font\" aria-hidden=\"true\"></span>\n                  <span className=\"nav-text\">{gettext('Shared from other servers')}</span>\n                </Link>\n              </li>\n            }\n          </ul>\n\n\n          <h3 className=\"sf-heading\">{gettext('Tools')}</h3>\n          <ul className=\"nav nav-pills flex-column nav-container\">\n            <li className=\"nav-item\">\n              <Link className={`nav-link ellipsis ${this.getActiveClass('starred')}`} to={siteRoot + 'starred/'} title={gettext('Favorites')} onClick={(e) => this.tabItemClick(e, 'starred')}>\n                <span className=\"sf2-icon-star\" aria-hidden=\"true\"></span>\n                <span className=\"nav-text\">{gettext('Favorites')}</span>\n              </Link>\n            </li>\n            {showActivity &&\n              <li className=\"nav-item\">\n                <Link className={`nav-link ellipsis ${this.getActiveClass('dashboard')}`} to={siteRoot + 'dashboard/'} title={gettext('Activities')} onClick={(e) => this.tabItemClick(e, 'dashboard')}>\n                  <span className=\"sf2-icon-clock\" aria-hidden=\"true\"></span>\n                  <span className=\"nav-text\">{gettext('Activities')}</span>\n                </Link>\n              </li>\n            }\n              <li className=\"nav-item\">\n                <Link className={`nav-link ellipsis ${this.getActiveClass('published')}`} to={siteRoot + 'published/'} title={gettext('Published Libraries')} onClick={(e) => this.tabItemClick(e, 'published')}>\n                  <span className=\"sf2-icon-wiki-view\" aria-hidden=\"true\"></span>\n                  <span className=\"nav-text\">{gettext('Published Libraries')}</span>\n                </Link>\n              </li>\n            {isDocs &&\n              <li className=\"nav-item\" onClick={(e) => this.tabItemClick(e, 'drafts')}>\n                <Link className={`nav-link ellipsis ${this.getActiveClass('drafts')}`} to={siteRoot + 'drafts/'} title={gettext('Drafts')}>\n                  <span className=\"sf2-icon-edit\" aria-hidden=\"true\"></span>\n                  <span className=\"nav-text\">{gettext('Drafts')}</span>\n                  {this.props.draftCounts > 0 && <span id=\"draft-num\">{this.props.draftCounts}</span>}\n                </Link>\n              </li>\n            }\n            <li className=\"nav-item\">\n              <Link className={`nav-link ellipsis ${this.getActiveClass('linked-devices')}`} to={siteRoot + 'linked-devices/'} title={gettext('Linked Devices')} onClick={(e) => this.tabItemClick(e, 'linked-devices')}>\n                <span className=\"sf2-icon-monitor\" aria-hidden=\"true\"></span>\n                <span className=\"nav-text\">{gettext('Linked Devices')}</span>\n              </Link>\n            </li>\n            {canInvitePeople &&\n              <li className=\"nav-item\">\n                <Link className={`nav-link ellipsis ${this.getActiveClass('invitations')}`} to={siteRoot + 'invitations/'} title={gettext('Invite Guest')} onClick={(e) => this.tabItemClick(e, 'invitations')}>\n                  <span className=\"sf2-icon-invite\" aria-hidden=\"true\"></span>\n                  <span className=\"nav-text\">{gettext('Invite Guest')}</span>\n                </Link>\n              </li>\n            }\n            <li className=\"nav-item flex-column\" id=\"share-admin-nav\">\n              <a className=\"nav-link ellipsis\" title={gettext('Share Admin')} onClick={this.shExtend}>\n                <span className=\"sf2-icon-wrench\" aria-hidden=\"true\"></span>\n                <span className=\"nav-text\">{gettext('Share Admin')}</span>\n                <span className={`toggle-icon fas ${this.state.sharedExtended ? 'fa-caret-down':'fa-caret-left'}`} aria-hidden=\"true\"></span>\n              </a>\n              {this.renderSharedAdmin()}\n            </li>\n            {customNavItems && this.renderCustomNavItems()}\n          </ul>\n        </div>\n\n        {dtableWebServer &&\n          <div className=\"side-nav-link\" onClick={this.onDTableClick}>\n            <span className=\"link-icon icon-left sf3-font sf3-font-dtable-logo\" aria-hidden=\"true\"></span>\n            <span className=\"link-text\">SeaTable</span>\n            <span className=\"link-icon icon-right sf3-font sf3-font-arrow\"></span>\n          </div>\n        }\n      </div>\n    );\n  }\n}\n\nMainSideNav.propTypes = propTypes;\n\nexport default MainSideNav;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Modal, ModalBody } from 'reactstrap';\nimport { gettext, lang, mediaUrl, logoPath, logoWidth, logoHeight, siteTitle, seafileVersion, additionalAboutDialogLinks, aboutDialogCustomHtml } from '../../utils/constants';\n\nconst propTypes = {\n  onCloseAboutDialog: PropTypes.func.isRequired,\n};\n\nclass AboutDialog extends React.Component {\n\n  renderExternalAboutLinks = () => {\n    if (additionalAboutDialogLinks && (typeof additionalAboutDialogLinks) === 'object') {\n      let keys = Object.keys(additionalAboutDialogLinks);\n      return keys.map((key, index) => {\n        return <a key={index} className=\"d-block\" href={additionalAboutDialogLinks[key]}>{key}</a>;\n      });\n    }\n    return null;\n  }\n\n  render() {\n\n    let href = lang === lang == 'zh-cn' ? 'http://seafile.com/about/' : 'http://seafile.com/en/about/';\n    const { onCloseAboutDialog: toggleDialog } = this.props;\n\n    if (aboutDialogCustomHtml) {\n      return (\n        <Modal isOpen={true} toggle={toggleDialog}>\n          <ModalBody>\n            <button type=\"button\" className=\"close\" onClick={toggleDialog}><span aria-hidden=\"true\"></span></button>\n            <div className=\"about-content\" dangerouslySetInnerHTML={{__html: aboutDialogCustomHtml}}></div>\n          </ModalBody>\n        </Modal>\n      );\n    } else {\n      return (\n        <Modal isOpen={true} toggle={toggleDialog}>\n          <ModalBody>\n            <button type=\"button\" className=\"close\" onClick={toggleDialog}><span aria-hidden=\"true\"></span></button>\n            <div className=\"about-content\">\n              <p><img src={mediaUrl + logoPath} height={logoHeight} width={logoWidth} title={siteTitle} alt=\"logo\" /></p>\n              <p>{gettext('Server Version: ')}{seafileVersion}<br /> {(new Date()).getFullYear()} {gettext('Seafile')}</p>\n              <p>{this.renderExternalAboutLinks()}</p>\n              <p><a href={href} target=\"_blank\">{gettext('About Us')}</a></p>\n            </div>\n          </ModalBody>\n        </Modal>\n      );\n    }\n  }\n}\n\nAboutDialog.propTypes = propTypes;\n\nexport default AboutDialog;\n","import React, { Fragment } from 'react';\nimport { gettext, siteRoot, enableTC, sideNavFooterCustomHtml, additionalAppBottomLinks } from '../utils/constants';\nimport ModalPortal from './modal-portal';\nimport AboutDialog from './dialog/about-dialog';\n\nclass SideNavFooter extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isAboutDialogShow: false,\n    };\n  }\n\n  onAboutDialogToggle = (e) => {\n    e.preventDefault();\n    this.setState({isAboutDialogShow: !this.state.isAboutDialogShow});\n  }\n\n  renderExternalAppLinks = () => {\n    if (additionalAppBottomLinks && (typeof additionalAppBottomLinks) === 'object') {\n      let keys = Object.keys(additionalAppBottomLinks);\n      return keys.map((key, index) => {\n        return <a key={index} className=\"item\" href={additionalAppBottomLinks[key]}>{key}</a>;\n      });\n    }\n    return null;\n  }\n\n  render() {\n\n    if (sideNavFooterCustomHtml) {\n      return (<div className='side-nav-footer' dangerouslySetInnerHTML={{__html: sideNavFooterCustomHtml}}></div>);\n    }\n    return (\n      <Fragment>\n        <div className=\"side-nav-footer flex-wrap\">\n          <a href={siteRoot + 'help/'} target=\"_blank\" rel=\"noopener noreferrer\" className=\"item\">{gettext('Help')}</a>\n          <a href=\"#\" className=\"item\" onClick={this.onAboutDialogToggle}>{gettext('About')}</a>\n          {enableTC && <a href={`${siteRoot}terms/`} className=\"item\">{gettext('Terms')}</a>}\n          {this.renderExternalAppLinks()}\n          <a href={siteRoot + 'download_client_program/'} className={`item ${additionalAppBottomLinks ? '' : 'last-item'}`}>\n            <span aria-hidden=\"true\" className=\"sf2-icon-monitor vam\"></span>{' '}\n            <span className=\"vam\">{gettext('Clients')}</span>\n          </a>\n        </div>\n        {this.state.isAboutDialogShow && (\n          <ModalPortal>\n            <AboutDialog onCloseAboutDialog={this.onAboutDialogToggle} />\n          </ModalPortal>\n        )}\n      </Fragment>\n    );\n  }\n}\n\nexport default SideNavFooter;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport Logo from './logo';\nimport MainSideNav from './main-side-nav';\nimport SideNavFooter from './side-nav-footer';\n\nconst propTypes = {\n  isSidePanelClosed: PropTypes.bool.isRequired,\n  currentTab: PropTypes.oneOfType([PropTypes.string, PropTypes.number]).isRequired,\n  onCloseSidePanel: PropTypes.func.isRequired,\n  tabItemClick: PropTypes.func.isRequired,\n  draftCounts: PropTypes.number,\n};\n\nclass SidePanel extends React.Component {\n\n  render() {\n    return (\n      <div className={`side-panel ${this.props.isSidePanelClosed ? '' : 'left-zero'}`}>\n        <div className=\"side-panel-north\">\n          <Logo onCloseSidePanel={this.props.onCloseSidePanel}/>\n        </div>\n        <div className=\"side-panel-center\">\n          <MainSideNav tabItemClick={this.props.tabItemClick} currentTab={this.props.currentTab} draftCounts={this.props.draftCounts}/>\n        </div>\n        <div className=\"side-panel-footer\">\n          <SideNavFooter />\n        </div>\n      </div>\n    );\n  }\n}\n\nSidePanel.propTypes = propTypes;\n\nexport default SidePanel;\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\n\nconst propTypes = {\n  children: PropTypes.object.isRequired,\n};\n\nclass MainPanel extends Component {\n\n  render() {\n    return (\n      <div className=\"main-panel\">\n        {this.props.children}\n      </div>\n    );\n  }\n}\n\nMainPanel.propTypes = propTypes;\n\nexport default MainPanel;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../../utils/constants';\n\nconst propTypes = {\n  children: PropTypes.oneOfType([\n    PropTypes.array,\n    PropTypes.object\n  ]).isRequired,\n};\n\nclass DraftsView extends React.Component {\n  render() {\n    return (\n      <div className=\"main-panel-center\">\n        <div className=\"cur-view-container\">\n          <div className=\"cur-view-path\">\n            <div className=\"path-container\">\n              <h3 className=\"sf-heading\">{gettext('Drafts')}</h3>\n            </div>\n          </div>\n          {this.props.children}\n        </div>\n      </div>\n    );\n  }\n}\n\nDraftsView.propTypes = propTypes;\n\nexport default DraftsView;\n","import React from 'react';\nimport moment from 'moment';\nimport PropTypes from 'prop-types';\nimport { Dropdown, DropdownMenu, DropdownToggle, DropdownItem } from 'reactstrap';\nimport { gettext, siteRoot, lang } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\n\nmoment.locale(lang);\nconst propTypes = {\n  draft: PropTypes.object.isRequired,\n  isItemFreezed: PropTypes.bool.isRequired,\n  onFreezedItem: PropTypes.func.isRequired,\n  onUnfreezedItem: PropTypes.func.isRequired,\n  onDeleteHandler: PropTypes.func.isRequired,\n  onPublishHandler: PropTypes.func.isRequired,\n};\n\nclass DraftListItem extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isMenuIconShow: false,\n      isItemMenuShow: false,\n      highlight: false,\n    };\n  }\n\n  onMouseEnter = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        isMenuIconShow: true,\n        highlight: true,\n      });\n    }\n  }\n\n  onMouseLeave = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        isMenuIconShow: false,\n        highlight: false,\n      });\n    }\n  }\n\n  onDropdownToggleClick = (e) => {\n    e.preventDefault();\n    this.toggleOperationMenu(e);\n  }\n\n  toggleOperationMenu = (e) => {\n    e.stopPropagation();\n    this.setState(\n      {isItemMenuShow: !this.state.isItemMenuShow }, () => {\n        if (this.state.isItemMenuShow) {\n          this.props.onFreezedItem();\n        } else {\n          this.setState({\n            highlight: false,\n            isMenuIconShow: false,\n          });\n          this.props.onUnfreezedItem();\n        }\n      }\n    );\n  }\n\n  onDeleteHandler = () => {\n    this.props.onDeleteHandler(this.props.draft);\n  }\n\n  onPublishHandler = () => {\n    this.props.onPublishHandler(this.props.draft);\n  }\n\n  render() {\n    let draft = this.props.draft;\n    let repoID = draft.origin_repo_id;\n    let filePath = draft.draft_file_path;\n    let fileName = Utils.getFileName(filePath);\n    let draftUrl = siteRoot + 'drafts/' + draft.id + '/';\n    let libraryUrl = siteRoot + 'library/' + repoID + '/' + encodeURIComponent(draft.repo_name) + '/' ;\n    let localTime = moment.utc(draft.updated_at).toDate();\n    localTime = moment(localTime).fromNow();\n\n    let iconUrl = Utils.getFileIconUrl(fileName);\n    return (\n      <tr className={this.state.highlight ? 'tr-highlight' : ''} onMouseEnter={this.onMouseEnter} onMouseLeave={this.onMouseLeave}>\n        <td className=\"text-center\"><img src={iconUrl} width=\"24\" alt='' /></td>\n        <td className=\"name\" >\n          <a href={draftUrl} target=\"_blank\">{fileName}</a>\n        </td>\n        <td className=\"library\">\n          <a href={libraryUrl} target=\"_blank\">{draft.repo_name}</a>\n        </td>\n        <td className=\"update\">{localTime}</td>\n        <td className=\"text-center\">\n          {this.state.isMenuIconShow && (\n            <Dropdown isOpen={this.state.isItemMenuShow} toggle={this.toggleOperationMenu}>\n              <DropdownToggle\n                tag=\"i\"\n                className=\"fas fa-ellipsis-v attr-action-icon\"\n                title={gettext('More Operations')}\n                onClick={this.onDropdownToggleClick}\n                data-toggle=\"dropdown\"\n                aria-expanded={this.state.isItemMenuShow}\n              />\n              <DropdownMenu>\n                <DropdownItem onClick={this.onDeleteHandler}>{gettext('Delete')}</DropdownItem>\n                {draft.status == 'open' &&\n                  <DropdownItem onClick={this.onPublishHandler}>{gettext('Publish')}</DropdownItem>\n                }\n              </DropdownMenu>\n            </Dropdown>\n          )}\n        </td>\n      </tr>\n    );\n  }\n}\n\nDraftListItem.propTypes = propTypes;\n\nexport default DraftListItem;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../../utils/constants';\nimport DraftListItem from './draft-list-item';\n\nconst propTypes = {\n  draftList: PropTypes.array.isRequired,\n  onDeleteHandler: PropTypes.func.isRequired,\n  onPublishHandler: PropTypes.func.isRequired,\n};\n\nclass DraftListView extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isItemFreezed: false,\n    };\n  }\n\n  onFreezedItem = () => {\n    this.setState({isItemFreezed: true});\n  }\n\n  onUnfreezedItem = () => {\n    this.setState({isItemFreezed: false});\n  }\n\n  render() {\n    let drafts = this.props.draftList;\n    return (\n      <table>\n        <thead>\n          <tr>\n            <th style={{width: '4%'}}>{/*img*/}</th>\n            <th style={{width: '46%'}}>{gettext('Name')}</th>\n            <th style={{width: '30%'}}>{gettext('Library')}</th>\n            <th style={{width: '10%'}}>{gettext('Last Update')}</th>\n            <th style={{width: '10%'}}></th>\n          </tr>\n        </thead>\n        <tbody>\n          { drafts && drafts.map((draft) => {\n            return (\n              <DraftListItem\n                key={draft.id}\n                draft={draft}\n                isItemFreezed={this.state.isItemFreezed}\n                onFreezedItem={this.onFreezedItem}\n                onUnfreezedItem={this.onUnfreezedItem}\n                onDeleteHandler={this.props.onDeleteHandler}\n                onPublishHandler={this.props.onPublishHandler}\n              />\n            );\n          })}\n        </tbody>\n      </table>\n    );\n  }\n}\n\nDraftListView.propTypes = propTypes;\n\nexport default DraftListView;\n","import React, { Fragment } from 'react';\nimport { gettext } from '../../utils/constants';\nimport editUtilities from '../../utils/editor-utilities';\nimport { Utils } from '../../utils/utils';\nimport PropTypes from 'prop-types';\nimport toaster from '../../components/toast';\nimport EmptyTip from '../../components/empty-tip';\nimport Loading from '../../components/loading';\nimport DraftListView from '../../components/draft-list-view/draft-list-view';\n\nconst propTypes = {\n  isLoadingDraft: PropTypes.bool.isRequired,\n  updateDraftsList: PropTypes.func.isRequired,\n  draftList: PropTypes.array.isRequired,\n  getDrafts: PropTypes.func.isRequired,\n};\n\nclass DraftContent extends React.Component {\n\n  componentDidMount() {\n    this.props.getDrafts();\n  }\n\n  onDeleteHandler = (draft) => {\n    // let draft = this.state.currentDraft;\n    let draft_name = Utils.getFileName(draft.draft_file_path);\n    editUtilities.deleteDraft(draft.id).then(res => {\n      this.props.updateDraftsList(draft.id);\n      let msg_s = gettext('Successfully deleted draft %(draft)s.');\n      msg_s = msg_s.replace('%(draft)s', draft_name);\n      toaster.success(msg_s);\n    }).catch(() => {\n      let msg_s = gettext('Failed to delete draft %(draft)s.');\n      msg_s = msg_s.replace('%(draft)s', draft_name);\n      toaster.danger(msg_s);\n    });\n  }\n\n  onPublishHandler = (draft) => {\n    // let draft = this.state.currentDraft;\n    let draft_name = Utils.getFileName(draft.draft_file_path);\n    editUtilities.publishDraft(draft.id).then(res => {\n      this.props.updateDraftsList(draft.id);\n      let msg_s = gettext('Successfully published draft %(draft)s.');\n      msg_s = msg_s.replace('%(draft)s', draft_name);\n      toaster.success(msg_s);\n    }).catch(() => {\n      let msg_s = gettext('Failed to publish draft %(draft)s.');\n      msg_s = msg_s.replace('%(draft)s', draft_name);\n      toaster.danger(msg_s);\n    });\n  }\n\n  render() {\n    return (\n      <div className=\"cur-view-content\">\n        {this.props.isLoadingDraft && <Loading />}\n        {!this.props.isLoadingDraft && (\n          <Fragment>\n            {this.props.draftList.length === 0 && (\n              <EmptyTip>\n                <h2>{gettext('No draft yet')}</h2>\n                <p>{gettext('Draft is a way to let you collaborate with others on files. You can create a draft from a file, edit the draft and then ask for a review. The original file will be updated only after the draft has been reviewed.')}</p>\n              </EmptyTip>\n            )}\n            {this.props.draftList.length !==0 && (\n              <DraftListView\n                draftList={this.props.draftList}\n                onDeleteHandler={this.onDeleteHandler}\n                onPublishHandler={this.onPublishHandler}\n              />\n            )}\n          </Fragment>\n        )}\n      </div>\n    );\n  }\n}\n\nDraftContent.propTypes = propTypes;\n\nexport default DraftContent;\n","class Acticity {\n  constructor(json) {\n    this.repo_id = json.repo_id;\n    this.repo_name = json.repo_name;\n    this.obj_type = json.obj_type;\n    this.commit_id = json.commit_id;\n    this.path = json.path;\n    this.name = json.name;\n    this.author_email = json.author_email;\n    this.author_name = json.author_name;\n    this.author_contact_email = json.author_contact_email;\n    this.avatar_url = json.avatar_url;\n    this.time = json.time;\n    this.op_type = json.op_type;\n    this.createdFilesCount = 0;\n    this.createdFilesList = [];\n    if (json.op_type === 'clean-up-trash') {\n      this.days = json.days;\n    } else if (json.op_type === 'rename' && json.obj_type === 'repo') {\n      this.old_repo_name = json.old_repo_name;\n    } else if (json.op_type === 'move' && ['dir', 'file'].includes(json.obj_type)) {\n      this.old_path = json.old_path;\n    } else if (json.op_type === 'rename' && ['dir', 'file'].includes(json.obj_type)) {\n      this.old_path = json.old_path;\n      this.old_name = json.old_name;\n    } else if (json.op_type === 'publish') {\n      this.old_path = json.old_path;\n    } else if (json.name.endsWith('(draft).md')) {\n      this.draft_id = json.draft_id;\n    }\n  }\n}\n\nexport default Acticity;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport moment from 'moment';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter, Table } from 'reactstrap';\nimport { gettext, siteRoot, serviceURL } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\n\nconst propTypes = {\n  activity: PropTypes.object.isRequired,\n  toggleCancel: PropTypes.func.isRequired,\n};\n\nclass ListCreatedFileDialog extends React.Component {\n\n  toggle = (activity) => {\n    this.props.toggleCancel(activity);\n  }\n\n  render() {\n    let activity = this.props.activity;\n    return (\n      <Modal isOpen={true}>\n        <ModalHeader toggle={this.toggle}>{gettext('Created Files')}</ModalHeader>\n        <ModalBody>\n          <Table>\n            <thead>\n              <tr>\n                <th width='75%'>{gettext('Name')}</th>\n                <th width='25%'>{gettext('Time')}</th>\n              </tr>\n            </thead>\n            <tbody>\n              {\n                activity.createdFilesList.map((item, index) => {\n                  let fileURL = `${siteRoot}lib/${item.repo_id}/file${Utils.encodePath(item.path)}`;\n                  if (item.name.endsWith('(draft).md')) {\n                    fileURL = serviceURL + '/drafts/' + item.draft_id + '/';\n                  }\n                  let fileLink = <a href={fileURL} target='_blank'>{item.name}</a>;\n                  if (item.name.endsWith('(draft).md') && !item.draft_id) {\n                    fileLink = item.name;\n                  }\n                  return (\n                    <tr key={index}>\n                      <td>{fileLink}</td>\n                      <td>{moment(item.time).fromNow()}</td>\n                    </tr>\n                  );\n                })\n              }\n            </tbody>\n          </Table>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.toggle.bind(this, activity)}>{gettext('Close')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nListCreatedFileDialog.propTypes = propTypes;\n\nexport default ListCreatedFileDialog;\n","import React, { Component, Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport moment from 'moment';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { gettext, siteRoot, serviceURL } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport Loading from '../../components/loading';\nimport Activity from '../../models/activity';\nimport ListCreatedFileDialog from '../../components/dialog/list-created-files-dialog';\nimport ModalPortal from '../../components/modal-portal';\n\nimport '../../css/files-activities.css';\n\nmoment.locale(window.app.config.lang);\n\nconst contentPropTypes = {\n  isLoadingMore: PropTypes.bool.isRequired,\n  items: PropTypes.array.isRequired,\n};\n\nclass FileActivitiesContent extends Component {\n\n  render() {\n    const isDesktop = Utils.isDesktop();\n    let { items, isLoadingMore } = this.props;\n\n    const desktopThead = (\n      <thead>\n        <tr>\n          <th width=\"8%\">{/* avatar */}</th>\n          <th width=\"15%\">{gettext('User')}</th>\n          <th width=\"20%\">{gettext('Operation')}</th>\n          <th width=\"37%\">{gettext('File')} / {gettext('Library')}</th>\n          <th width=\"20%\">{gettext('Time')}</th>\n        </tr>\n      </thead>\n    );\n\n    const mobileThead = (\n      <thead>\n        <tr>\n          <th width=\"15%\"></th>\n          <th width=\"53%\"></th>\n          <th width=\"32%\"></th>\n        </tr>\n      </thead>\n    );\n\n    return (\n      <Fragment>\n        <table className=\"table-hover table-thead-hidden\">\n          {isDesktop ? desktopThead : mobileThead}\n          <tbody>\n            {items.map((item, index) => {\n              return (\n                <ActivityItem\n                  key={index}\n                  isDesktop={isDesktop}\n                  item={item}\n                  index={index}\n                  items={items}\n                />\n              );\n            })}\n          </tbody>\n        </table>\n        {isLoadingMore ? <span className=\"loading-icon loading-tip\"></span> : ''}\n      </Fragment>\n    );\n  }\n}\n\nFileActivitiesContent.propTypes = contentPropTypes;\n\nconst activityPropTypes = {\n  item: PropTypes.object.isRequired,\n  index: PropTypes.number.isRequired,\n  items: PropTypes.array.isRequired,\n};\n\nclass ActivityItem extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isListCreatedFiles: false,\n    };\n  }\n\n  onListCreatedFilesToggle = () => {\n    this.setState({\n      isListCreatedFiles: !this.state.isListCreatedFiles,\n    });\n  }\n\n  render() {\n    const isDesktop = this.props.isDesktop;\n    let {item, index, items} = this.props;\n    let op, details, moreDetails = false;\n    let userProfileURL = `${siteRoot}profile/${encodeURIComponent(item.author_email)}/`;\n\n    let libURL = siteRoot + 'library/' + item.repo_id + '/' + encodeURIComponent(item.repo_name) + '/';\n    let libLink = <a href={libURL}>{item.repo_name}</a>;\n    let smallLibLink = <a className=\"small text-secondary\" href={libURL}>{item.repo_name}</a>;\n\n    if (item.obj_type == 'repo') {\n      switch(item.op_type) {\n        case 'create':\n          op = gettext('Created library');\n          details = libLink;\n          break;\n        case 'rename':\n          op = gettext('Renamed library');\n          details = <span>{item.old_repo_name} => {libLink}</span>;\n          break;\n        case 'delete':\n          op = gettext('Deleted library');\n          details = item.repo_name;\n          break;\n        case 'recover':\n          op = gettext('Restored library');\n          details = libLink;\n          break;\n        case 'clean-up-trash':\n          op = gettext('Cleaned trash');\n          if (item.days == 0) {\n            details = gettext('Removed all items from trash.');\n          } else {\n            details = gettext('Removed items older than {n} days from trash.').replace('{n}', item.days);\n          }\n          moreDetails = true;\n          break;\n      }\n    } else if (item.obj_type == 'draft') {\n      let fileURL = `${siteRoot}lib/${item.repo_id}/file${Utils.encodePath(item.path)}`;\n      let fileLink = <a href={fileURL} target=\"_blank\">{item.name}</a>;\n      op = gettext('Publish draft');\n      details = fileLink;\n      moreDetails = true;\n    } else if (item.obj_type == 'files') {\n      let fileURL = `${siteRoot}lib/${item.repo_id}/file${Utils.encodePath(item.path)}`;\n      if (item.name.endsWith('(draft).md')) {\n        fileURL = serviceURL + '/drafts/' + item.draft_id + '/';\n      }\n      let fileLink = `<a href=${fileURL} target=\"_blank\">${item.name}</a>`;\n      if (item.name.endsWith('(draft).md') && !item.draft_id) {\n        fileLink = item.name;\n      }\n      let fileCount = item.createdFilesCount - 1;\n      let firstLine = gettext('{file} and {n} other files')\n        .replace('{file}', fileLink)\n        .replace('{n}', fileCount);\n      op = gettext('Created {n} files').replace('{n}', item.createdFilesCount);\n      details = (\n        <Fragment>\n          <p className=\"m-0 d-inline\" dangerouslySetInnerHTML={{__html: firstLine}}></p>\n          {isDesktop && <button type=\"button\" onClick={this.onListCreatedFilesToggle} className=\"activity-details text-secondary ml-2 border-0 p-0 bg-transparent\">{gettext('details')}</button>}\n        </Fragment>\n      );\n      moreDetails = true;\n    } else if (item.obj_type == 'file') {\n      const isDraft = item.name.endsWith('(draft).md');\n      const fileURL = isDraft ? serviceURL + '/drafts/' + item.draft_id + '/' :\n        `${siteRoot}lib/${item.repo_id}/file${Utils.encodePath(item.path)}`;\n      let fileLink = <a href={fileURL} target=\"_blank\">{item.name}</a>;\n      if (isDraft && !item.draft_id) {\n        fileLink = item.name;\n      }\n      switch (item.op_type) {\n        case 'create':\n          op = isDraft ? gettext('Created draft') : gettext('Created file');\n          details = fileLink;\n          moreDetails = true;\n          break;\n        case 'delete':\n          op = isDraft ? gettext('Deleted draft') : gettext('Deleted file');\n          details = item.name;\n          moreDetails = true;\n          break;\n        case 'recover':\n          op = gettext('Restored file');\n          details = fileLink;\n          moreDetails = true;\n          break;\n        case 'rename':\n          op = gettext('Renamed file');\n          details = <span>{item.old_name} => {fileLink}</span>;\n          moreDetails = true;\n          break;\n        case 'move':\n          const filePathLink = <a href={fileURL}>{item.path}</a>;\n          op = gettext('Moved file');\n          details = <span>{item.old_path} => {filePathLink}</span>;\n          moreDetails = true;\n          break;\n        case 'edit': // update\n          op = isDraft ? gettext('Updated draft') : gettext('Updated file');\n          details = fileLink;\n          moreDetails = true;\n          break;\n      }\n    } else { // dir\n      let dirURL = siteRoot + 'library/' + item.repo_id + '/' + encodeURIComponent(item.repo_name) + Utils.encodePath(item.path);\n      let dirLink = <a href={dirURL} target=\"_blank\">{item.name}</a>;\n      switch (item.op_type) {\n        case 'create':\n          op = gettext('Created folder');\n          details = dirLink;\n          moreDetails = true;\n          break;\n        case 'delete':\n          op = gettext('Deleted folder');\n          details = item.name;\n          moreDetails = true;\n          break;\n        case 'recover':\n          op = gettext('Restored folder');\n          details = dirLink;\n          moreDetails = true;\n          break;\n        case 'rename':\n          op = gettext('Renamed folder');\n          details = <span>{item.old_name} => {dirLink}</span>;\n          moreDetails = true;\n          break;\n        case 'move':\n          const dirPathLink = <a href={dirURL}>{item.path}</a>;\n          op = gettext('Moved folder');\n          details = <span>{item.old_path} => {dirPathLink}</span>;\n          moreDetails = true;\n          break;\n      }\n    }\n\n    let isShowDate = true;\n    if (index > 0) {\n      let lastEventTime = items[index - 1].time;\n      isShowDate = moment(item.time).isSame(lastEventTime, 'day') ? false : true;\n    }\n\n    return (\n      <Fragment>\n        {isShowDate &&\n          <tr>\n            <td colSpan={isDesktop ? 5 : 3} className=\"border-top-0\">{moment(item.time).format('YYYY-MM-DD')}</td>\n          </tr>\n        }\n        {isDesktop ? (\n          <tr>\n            <td className=\"text-center\">\n              <img src={item.avatar_url} alt=\"\" width=\"32\" height=\"32\" className=\"avatar\" />\n            </td>\n            <td>\n              <a href={userProfileURL}>{item.author_name}</a>\n            </td>\n            <td>{op}</td>\n            <td>\n              {details}\n              {moreDetails && <br /> }\n              {moreDetails && smallLibLink}\n            </td>\n            <td className=\"text-secondary\">\n              <time datetime={item.time} is=\"relative-time\" title={moment(item.time).format('llll')}>{moment(item.time).fromNow()}</time>\n            </td>\n          </tr>\n        ) : (\n          <tr>\n            <td className=\"text-center align-top\">\n              <img src={item.avatar_url} alt=\"\" width=\"32\" height=\"32\" className=\"avatar\" />\n            </td>\n            <td>\n              <a href={userProfileURL}>{item.author_name}</a>\n              <p className=\"m-0 text-secondary\">{op}</p>\n              {details}\n            </td>\n            <td className=\"text-right align-top\">\n              <span className=\"text-secondary mobile-activity-time\">\n                <time datetime={item.time} is=\"relative-time\" title={moment(item.time).format('llll')}>{moment(item.time).fromNow()}</time>\n              </span>\n              {moreDetails && <br /> }\n              {moreDetails && libLink}\n            </td>\n          </tr>\n        )}\n        {this.state.isListCreatedFiles &&\n          <ModalPortal>\n            <ListCreatedFileDialog\n              activity={item}\n              toggleCancel={this.onListCreatedFilesToggle}\n            />\n          </ModalPortal>\n        }\n      </Fragment>\n    );\n  }\n}\n\nActivityItem.propTypes = activityPropTypes;\n\nclass FilesActivities extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      errorMsg: '',\n      isFirstLoading: true,\n      isLoadingMore: false,\n      currentPage: 1,\n      hasMore: true,\n      items: [],\n    };\n    this.avatarSize = 72;\n    this.curPathList = [];\n    this.oldPathList = [];\n  }\n\n  componentDidMount() {\n    let currentPage = this.state.currentPage;\n    seafileAPI.listActivities(currentPage, this.avatarSize).then(res => {\n      // {\"events\":[...]}\n      let events = this.mergePublishEvents(res.data.events);\n      events = this.mergeFileCreateEvents(events);\n      this.setState({\n        items: events,\n        currentPage: currentPage + 1,\n        isFirstLoading: false,\n        hasMore: true,\n      });\n      if (this.state.items.length < 25) {\n        this.getMore();\n      }\n    }).catch(error => {\n      this.setState({\n        isFirstLoading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  mergePublishEvents = (events) => {\n    events.map((item) => {\n      if (item.op_type === 'publish') {\n        this.curPathList.push(item.path);\n        this.oldPathList.push(item.old_path);\n      }\n    });\n    let actuallyEvents = [];\n    for (var i = 0; i < events.length; i++) {\n      if (events[i].obj_type === 'file') {\n        if (events[i].op_type === 'delete' && this.oldPathList.includes(events[i].path)) {\n          this.oldPathList.splice(this.oldPathList.indexOf(events[i].path), 1);\n        } else if (events[i].op_type === 'edit' && this.curPathList.includes(events[i].path)) {\n          this.curPathList.splice(this.curPathList.indexOf(events[i].path), 1);\n        } else if (events[i].op_type === 'rename' && this.oldPathList.includes(events[i].old_path)) {\n          this.oldPathList.splice(this.oldPathList.indexOf(events[i].old_path), 1);\n        } else {\n          actuallyEvents.push(events[i]);\n        }\n      } else {\n        actuallyEvents.push(events[i]);\n      }\n    }\n    return actuallyEvents;\n  }\n\n  mergeFileCreateEvents = (events) => {\n    let actuallyEvents = [];\n    let multiFilesActivity = null;\n    for (var i = 0; i < events.length; i++) {\n      let isFulfilCondition = events[i].obj_type === 'file' &&\n                              events[i].op_type === 'create' &&\n                              events[i + 1] &&\n                              events[i + 1].obj_type === 'file' &&\n                              events[i + 1].op_type === 'create' &&\n                              events[i + 1].repo_name === events[i].repo_name &&\n                              events[i + 1].author_email === events[i].author_email;\n      if (multiFilesActivity != null) {\n        multiFilesActivity.createdFilesCount++;\n        multiFilesActivity.createdFilesList.push(events[i]);\n        if (isFulfilCondition) {\n          continue;\n        } else {\n          actuallyEvents.push(multiFilesActivity);\n          multiFilesActivity = null;\n        }\n      } else {\n        if (isFulfilCondition) {\n          multiFilesActivity = new Activity(events[i]);\n          multiFilesActivity.obj_type = 'files';\n          multiFilesActivity.createdFilesCount++;\n          multiFilesActivity.createdFilesList.push(events[i]);\n        } else {\n          actuallyEvents.push(events[i]);\n        }\n      }\n    }\n    return actuallyEvents;\n  }\n\n  getMore() {\n    let currentPage = this.state.currentPage;\n    seafileAPI.listActivities(currentPage, this.avatarSize).then(res => {\n      // {\"events\":[...]}\n      let events = this.mergePublishEvents(res.data.events);\n      events = this.mergeFileCreateEvents(events);\n      this.setState({\n        isLoadingMore: false,\n        items: [...this.state.items, ...events],\n        currentPage: currentPage + 1,\n        hasMore: res.data.events.length === 0 ? false : true\n      });\n      if (this.state.items.length < 25 && this.state.hasMore) {\n        this.getMore();\n      }\n    }).catch(error => {\n      this.setState({\n        isLoadingMore: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  handleScroll = (event) => {\n    if (!this.state.isLoadingMore && this.state.hasMore) {\n      const clientHeight = event.target.clientHeight;\n      const scrollHeight = event.target.scrollHeight;\n      const scrollTop    = event.target.scrollTop;\n      const isBottom = (clientHeight + scrollTop + 1 >= scrollHeight);\n      if (isBottom) { // scroll to the bottom\n        this.setState({isLoadingMore: true}, () => {\n          this.getMore();\n        });\n      }\n    }\n  }\n\n  render() {\n    return (\n      <div className=\"main-panel-center\">\n        <div className=\"cur-view-container\" id=\"activities\">\n          <div className=\"cur-view-path\">\n            <h3 className=\"sf-heading\">{gettext('Activities')}</h3>\n          </div>\n          <div className=\"cur-view-content d-block\" onScroll={this.handleScroll}>\n            {this.state.isFirstLoading && <Loading />}\n            {(!this.state.isFirstLoading && this.state.errorMsg) &&\n              <p className=\"error text-center\">{this.state.errorMsg}</p>\n            }\n            {!this.state.isFirstLoading &&\n              <FileActivitiesContent items={this.state.items} isLoadingMore={this.state.isLoadingMore}/>\n            }\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default FilesActivities;\n","import React, { Component } from 'react';\nimport { Dropdown, DropdownToggle, DropdownItem } from 'reactstrap';\nimport { Link, navigate } from '@gatsbyjs/reach-router';\nimport moment from 'moment';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport { gettext, siteRoot, enableVideoThumbnail } from '../../utils/constants';\nimport EmptyTip from '../../components/empty-tip';\nimport Loading from '../../components/loading';\nimport toaster from '../../components/toast';\n\nclass Content extends Component {\n\n  render() {\n    const {loading, errorMsg, items} = this.props.data;\n\n    if (loading) {\n      return <Loading />;\n    } else if (errorMsg) {\n      return <p className=\"error text-center\">{errorMsg}</p>;\n    } else {\n      const emptyTip = (\n        <EmptyTip>\n          <h2>{gettext('No favorites')}</h2>\n          <p>{gettext('You have not added any libraries, folders or files to your favorites yet. A favorite gives you quick access to your most frequently used objects. You can add a library, folder or file to your favorites by clicking the star to the left of its name.')}</p>\n        </EmptyTip>\n      );\n\n      const desktopThead = (\n        <thead>\n          <tr>\n            <th width=\"4%\"></th>\n            <th width=\"40%\">{gettext('Name')}</th>\n            <th width=\"32%\">{gettext('Library')}</th>\n            <th width=\"18%\">{gettext('Last Update')}</th>\n            <th width=\"6%\"></th>\n          </tr>\n        </thead>\n      );\n      const mobileThead = (\n        <thead>\n          <tr>\n            <th width=\"12%\"></th>\n            <th width=\"80%\"></th>\n            <th width=\"8%\"></th>\n          </tr>\n        </thead>\n      );\n\n      const isDesktop = Utils.isDesktop();\n      return items.length ? (\n        <table className={`table-hover ${isDesktop ? '': 'table-thead-hidden'}`}>\n          {isDesktop ? desktopThead : mobileThead}\n          <TableBody items={items} />\n        </table>\n      ) : emptyTip;\n    }\n  }\n}\n\nclass TableBody extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      items: this.props.items\n    };\n  }\n\n  componentDidMount() {\n    this.getThumbnails();\n  }\n\n  getThumbnails() {\n    let items = this.state.items.filter((item) => {\n      return (Utils.imageCheck(item.obj_name) || (enableVideoThumbnail && Utils.videoCheck(item.obj_name))) && !item.repo_encrypted;\n    });\n    if (items.length == 0) {\n      return ;\n    }\n\n    const len = items.length;\n    const thumbnailSize = 48;\n    const _this = this;\n    let getThumbnail = function(i) {\n      const curItem = items[i];\n      seafileAPI.createThumbnail(curItem.repo_id, curItem.path, thumbnailSize).then((res) => {\n        curItem.encoded_thumbnail_src = res.data.encoded_thumbnail_src;\n      }).catch((error) => {\n        // do nothing\n      }).then(() => {\n        if (i < len - 1) {\n          getThumbnail(++i);\n        } else {\n          // when done, `setState()`\n          _this.setState({\n            items: _this.state.items\n          });\n        }\n      });\n    };\n    getThumbnail(0);\n  }\n\n  render() {\n\n    let listItems = this.state.items.map(function(item, index) {\n\n      if (item.path === '/') {\n        item.item_icon_url = Utils.getDefaultLibIconUrl(false);\n      } else {\n        item.item_icon_url = item.is_dir ? Utils.getFolderIconUrl(false) : Utils.getFileIconUrl(item.obj_name);\n      }\n\n      item.encoded_path = Utils.encodePath(item.path);\n\n      item.thumbnail_url = item.encoded_thumbnail_src ? `${siteRoot}${item.encoded_thumbnail_src}` : '';\n      item.dirent_view_url = item.is_dir ? `${siteRoot}library/${item.repo_id}/${item.repo_name}${item.encoded_path}` : `${siteRoot}lib/${item.repo_id}/file${item.encoded_path}`;\n      // item is folder or file\n      if (item.encoded_path !== '/') {\n        item.dirent_view_url = item.dirent_view_url.replace(/\\/+$/, '');\n      }\n\n      item.mtime_relative = moment(item.mtime).fromNow();\n\n\n      return <Item key={index} data={item} />;\n    }, this);\n\n    return (\n      <tbody>{listItems}</tbody>\n    );\n  }\n}\n\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      showOpIcon: false,\n      unstarred: false,\n      isOpMenuOpen: false // for mobile\n    };\n  }\n\n  toggleOpMenu = () => {\n    this.setState({\n      isOpMenuOpen: !this.state.isOpMenuOpen\n    });\n  }\n\n  handleMouseOver = () => {\n    this.setState({\n      showOpIcon: true\n    });\n  }\n\n  handleMouseOut = () => {\n    this.setState({\n      showOpIcon: false\n    });\n  }\n\n  unstar = (e) => {\n    e.preventDefault();\n\n    const data = this.props.data;\n    seafileAPI.unstarItem(data.repo_id, data.path).then((res) => {\n      this.setState({unstarred: true});\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  visitItem = () => {\n    const data = this.props.data;\n    if (data.is_dir) {\n      navigate(data.dirent_view_url);\n    } else {\n      window.open(data.dirent_view_url);\n    }\n  }\n\n  render() {\n\n    if (this.state.unstarred) {\n      return null;\n    }\n\n    const data = this.props.data;\n\n    let opClasses = 'sf2-icon-x3 unstar action-icon';\n    opClasses += this.state.showOpIcon ? '' : ' invisible';\n    const linkUrl = data.dirent_view_url;\n\n    const desktopItem = (\n      <tr onMouseOver={this.handleMouseOver} onMouseOut={this.handleMouseOut} onFocus={this.handleMouseOver}>\n        <td className=\"text-center\">\n          {\n            data.thumbnail_url ?\n              <img className=\"thumbnail\" src={data.thumbnail_url} alt=\"\" /> :\n              <img src={data.item_icon_url} alt={gettext('icon')} width=\"24\" />\n          }\n        </td>\n        <td>\n          { data.is_dir ?\n            <Link to={linkUrl}>{data.obj_name}</Link> :\n            <a className=\"normal\" href={data.dirent_view_url} target=\"_blank\">{data.obj_name}</a>\n          }\n        </td>\n        <td>{data.repo_name}</td>\n        <td dangerouslySetInnerHTML={{__html:data.mtime_relative}}></td>\n        <td>\n          <a href=\"#\" role=\"button\" className={opClasses} title={gettext('Unstar')} aria-label={gettext('Unstar')} onClick={this.unstar}></a>\n        </td>\n      </tr>\n    );\n\n    const mobileItem = (\n      <tr>\n        <td className=\"text-center\" onClick={this.visitItem}>\n          {\n            data.thumbnail_url ?\n              <img className=\"thumbnail\" src={data.thumbnail_url} alt=\"\" /> :\n              <img src={data.item_icon_url} alt={gettext('icon')} width=\"24\" />\n          }\n        </td>\n        <td onClick={this.visitItem}>\n          { data.is_dir ?\n            <Link to={linkUrl}>{data.obj_name}</Link> :\n            <a className=\"normal\" href={data.dirent_view_url} target=\"_blank\">{data.obj_name}</a>\n          }\n          <br />\n          <span className=\"item-meta-info\">{data.repo_name}</span>\n          <span className=\"item-meta-info\" dangerouslySetInnerHTML={{__html:data.mtime_relative}}></span>\n        </td>\n        <td>\n          <Dropdown isOpen={this.state.isOpMenuOpen} toggle={this.toggleOpMenu}>\n            <DropdownToggle\n              tag=\"i\"\n              className=\"sf-dropdown-toggle fa fa-ellipsis-v ml-0\"\n              title={gettext('More Operations')}\n              data-toggle=\"dropdown\"\n              aria-expanded={this.state.isOpMenuOpen}\n            />\n            <div className={this.state.isOpMenuOpen ? '' : 'd-none'} onClick={this.toggleOpMenu}>\n              <div className=\"mobile-operation-menu-bg-layer\"></div>\n              <div className=\"mobile-operation-menu\">\n                <DropdownItem className=\"mobile-menu-item\" onClick={this.unstar}>{gettext('Unstar')}</DropdownItem>\n              </div>\n            </div>\n          </Dropdown>\n        </td>\n      </tr>\n    );\n\n    return Utils.isDesktop() ? desktopItem : mobileItem;\n  }\n}\n\nclass Starred extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      items: []\n    };\n  }\n\n  componentDidMount() {\n    seafileAPI.listStarredItems().then((res) => {\n      this.setState({\n        loading: false,\n        items: res.data.starred_item_list\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  render() {\n    return (\n      <div className=\"main-panel-center\">\n        <div className=\"cur-view-container\" id=\"starred\">\n          <div className=\"cur-view-path\">\n            <h3 className=\"sf-heading\">{gettext('Favorites')}</h3>\n          </div>\n          <div className=\"cur-view-content\">\n            <Content data={this.state} />\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default Starred;\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { Modal, ModalHeader, ModalBody, ModalFooter, Button, FormGroup, Label, Input } from 'reactstrap';\nimport { gettext } from '../../utils/constants';\n\nconst propTypes = {\n  executeOperation: PropTypes.func.isRequired,\n  toggleDialog: PropTypes.func.isRequired\n};\n\nclass ConfirmUnlinkDevice extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isChecked: false\n    };\n  }\n\n  toggle = () => {\n    this.props.toggleDialog();\n  }\n\n  executeOperation = () => {\n    this.toggle();\n    this.props.executeOperation(this.state.isChecked);\n  }\n\n  onInputChange = (e) => {\n    this.setState({\n      isChecked: e.target.checked\n    });\n  }\n\n  render() {\n    return (\n      <Modal isOpen={true} toggle={this.toggle}>\n        <ModalHeader toggle={this.toggle}>{gettext('Unlink device')}</ModalHeader>\n        <ModalBody>\n          <p>{gettext('Are you sure you want to unlink this device?')}</p>\n          <FormGroup check>\n            <Label check>\n              <Input type=\"checkbox\" checked={this.state.isChecked} onChange={this.onInputChange} />\n              <span>{gettext('Delete files from this device the next time it comes online.')}</span>\n            </Label>\n          </FormGroup>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.toggle}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.executeOperation}>{gettext('Unlink')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nConfirmUnlinkDevice.propTypes = propTypes;\n\nexport default ConfirmUnlinkDevice;\n","import React, { Component } from 'react';\nimport { Dropdown, DropdownToggle, DropdownItem } from 'reactstrap';\nimport moment from 'moment';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { gettext } from '../../utils/constants';\nimport toaster from '../../components/toast';\nimport EmptyTip from '../../components/empty-tip';\nimport ConfirmUnlinkDeviceDialog from '../../components/dialog/confirm-unlink-device';\nimport { Utils } from '../../utils/utils';\n\nclass Content extends Component {\n\n  render() {\n    const {loading, errorMsg, items} = this.props.data;\n\n    if (loading) {\n      return <span className=\"loading-icon loading-tip\"></span>;\n    } else if (errorMsg) {\n      return <p className=\"error text-center\">{errorMsg}</p>;\n    } else {\n      const emptyTip = (\n        <EmptyTip>\n          <h2>{gettext('No linked devices')}</h2>\n          <p>{gettext('You have not accessed your files with any client (desktop or mobile) yet. Configure clients on your devices to access your data more comfortably.')}</p>\n        </EmptyTip>\n      );\n\n      const desktopThead = (\n        <thead>\n          <tr>\n            <th width=\"13%\">{gettext('Platform')}</th>\n            <th width=\"30%\">{gettext('Device Name')}</th>\n            <th width=\"30%\">{gettext('IP')}</th>\n            <th width=\"17%\">{gettext('Last Access')}</th>\n            <th width=\"10%\"></th>\n          </tr>\n        </thead>\n      );\n      const mobileThead = (\n        <thead>\n          <tr>\n            <th width=\"92%\"></th>\n            <th width=\"8%\"></th>\n          </tr>\n        </thead>\n      );\n\n      const isDesktop = Utils.isDesktop();\n      return items.length ? (\n        <table className={`table-hover ${isDesktop ? '': 'table-thead-hidden'}`}>\n          {isDesktop ? desktopThead : mobileThead}\n          <tbody>\n            {items.map((item, index) => {\n              return <Item key={index} data={item} isDesktop={isDesktop} />;\n            })}\n          </tbody>\n        </table>\n      ): emptyTip;\n    }\n  }\n}\n\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOpMenuOpen: false, // for mobile\n      isOpIconShown: false,\n      unlinked: false,\n      isConfirmUnlinkDialogOpen: false\n    };\n  }\n\n  toggleOpMenu = () => {\n    this.setState({\n      isOpMenuOpen: !this.state.isOpMenuOpen\n    });\n  }\n\n  handleMouseOver = () => {\n    this.setState({\n      isOpIconShown: true\n    });\n  }\n\n  handleMouseOut = () => {\n    this.setState({\n      isOpIconShown: false\n    });\n  }\n\n  toggleDialog = () => {\n    this.setState({\n      isConfirmUnlinkDialogOpen: !this.state.isConfirmUnlinkDialogOpen\n    });\n  }\n\n  handleClick = (e) => {\n    e.preventDefault();\n\n    const data = this.props.data;\n    if (data.is_desktop_client) {\n      this.toggleDialog();\n    } else {\n      const wipeDevice = true;\n      this.unlinkDevice(wipeDevice);\n    }\n  }\n\n  unlinkDevice = (wipeDevice) => {\n    const data = this.props.data;\n    seafileAPI.unlinkDevice(data.platform, data.device_id, wipeDevice).then((res) => {\n      this.setState({\n        unlinked: true\n      });\n      let msg = gettext('Successfully unlinked %(name)s.');\n      msg = msg.replace('%(name)s', data.device_name);\n      toaster.success(msg);\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  render() {\n    if (this.state.unlinked) {\n      return null;\n    }\n\n    const data = this.props.data;\n\n    let opClasses = 'sf2-icon-delete unlink-device action-icon';\n    opClasses += this.state.isOpIconShown ? '' : ' invisible';\n\n    const desktopItem = (\n      <tr onMouseOver={this.handleMouseOver} onMouseOut={this.handleMouseOut} onFocus={this.handleMouseOver}>\n        <td>{data.platform}</td>\n        <td>{data.device_name}</td>\n        <td>{data.last_login_ip}</td>\n        <td>{moment(data.last_accessed).fromNow()}</td>\n        <td>\n          <a href=\"#\" className={opClasses} title={gettext('Unlink')} role=\"button\" aria-label={gettext('Unlink')} onClick={this.handleClick}></a>\n        </td>\n      </tr>\n    );\n\n    const mobileItem = (\n      <tr>\n        <td>\n          {data.device_name}<br />\n          <span className=\"item-meta-info\">{data.last_login_ip}</span>\n          <span className=\"item-meta-info\">{moment(data.last_accessed).fromNow()}</span>\n          <span className=\"item-meta-info\">{data.platform}</span>\n        </td>\n        <td>\n          <Dropdown isOpen={this.state.isOpMenuOpen} toggle={this.toggleOpMenu}>\n            <DropdownToggle\n              tag=\"i\"\n              className=\"sf-dropdown-toggle fa fa-ellipsis-v ml-0\"\n              title={gettext('More Operations')}\n              data-toggle=\"dropdown\"\n              aria-expanded={this.state.isOpMenuOpen}\n            />\n            <div className={this.state.isOpMenuOpen ? '' : 'd-none'} onClick={this.toggleOpMenu}>\n              <div className=\"mobile-operation-menu-bg-layer\"></div>\n              <div className=\"mobile-operation-menu\">\n                <DropdownItem className=\"mobile-menu-item\" onClick={this.handleClick}>{gettext('Unlink')}</DropdownItem>\n              </div>\n            </div>\n          </Dropdown>\n        </td>\n      </tr>\n    );\n\n    return (\n      <React.Fragment>\n        {this.props.isDesktop ? desktopItem : mobileItem}\n        {this.state.isConfirmUnlinkDialogOpen &&\n        <ConfirmUnlinkDeviceDialog\n          executeOperation={this.unlinkDevice}\n          toggleDialog={this.toggleDialog}\n        />\n        }\n      </React.Fragment>\n    );\n  }\n}\n\nclass LinkedDevices extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      items: []\n    };\n  }\n\n  componentDidMount() {\n    seafileAPI.listLinkedDevices().then((res) => {\n      this.setState({\n        loading: false,\n        items: res.data\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  render() {\n    return (\n      <div className=\"main-panel-center\">\n        <div className=\"cur-view-container\" id=\"linked-devices\">\n          <div className=\"cur-view-path\">\n            <h3 className=\"sf-heading\">{gettext('Linked Devices')}</h3>\n          </div>\n          <div className=\"cur-view-content\">\n            <Content data={this.state} />\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default LinkedDevices;\n","class SharedRepoInfo {\n\n  constructor(object) {\n    this.repo_id = object.repo_id;\n    this.repo_name = object.repo_name;\n    this.share_type = object.share_type;\n    this.share_permission = object.share_permission;\n    this.share_permission_name = object.share_permission_name;\n    this.modifier_name = object.modifier_name;\n    this.modifier_email = object.modifier_email;\n    this.modifier_contact_email = object.modifier_contact_email;\n    this.encrypted = object.encrypted;\n    if (this.share_type === 'personal') {\n      this.is_admin = object.is_admin;\n      this.user_name = object.user_name;\n      this.user_email = object.user_email;\n      this.contact_email = object.contact_email;\n    } else if (this.share_type === 'group') {\n      this.is_admin = object.is_admin;\n      this.group_id = object.group_id;\n      this.group_name = object.group_name;\n    }\n  }\n\n}\n\nexport default SharedRepoInfo;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Modal, ModalBody } from 'reactstrap';\nimport { Utils } from '../../utils/utils';\nimport CustomPermission from '../../models/custom-permission';\nimport Loading from '../loading';\nimport toaster from '../toast';\nimport { seafileAPI } from '../../utils/seafile-api';\n\nconst propTypes = {\n  repoID: PropTypes.string,\n  currentPerm: PropTypes.string.isRequired,\n  permissions: PropTypes.array.isRequired,\n  changePerm: PropTypes.func.isRequired,\n  toggleDialog: PropTypes.func.isRequired\n};\n\nclass PermSelect extends React.Component {\n\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      isLoading: true,\n      currentOption: this.props.currentPerm,\n      customPermissions: []\n    };\n\n    this.customPermissions = null;\n  }\n\n  componentDidMount() {\n    if (this.props.repoID) {\n      this.listCustomPermissions();\n    } else {\n      this.setState({isLoading: false});\n    }\n  }\n\n  listCustomPermissions = () => {\n    const { repoID } = this.props;\n    seafileAPI.listCustomPermissions(repoID).then(res => {\n      const { permission_list: permissions } = res.data;\n      const customPermissions = permissions.map(item => new CustomPermission(item));\n      this.setState({\n        isLoading: false,\n        customPermissions: customPermissions\n      });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n      this.setState({isLoading: false});\n    });\n  }\n\n  switchOption = (e) => {\n    if (!e.target.checked) {\n      return;\n    }\n\n    const currentOption = e.target.value;\n    this.setState({\n      currentOption: currentOption\n    });\n\n    this.props.changePerm(currentOption);\n    this.props.toggleDialog();\n  }\n\n  translatePermission = (permission) => {\n    let value = Utils.sharePerms(permission);\n    if (!value) {\n      const { customPermissions } = this.state;\n      const item = customPermissions.find(item => item.id + '' === permission);\n      value = item && item.name;\n    }\n    return value;\n    \n  }\n  \n  translateExplanation = (explanation) => {\n    let value = Utils.sharePermsExplanation(explanation);\n    if (!value) {\n      const { customPermissions } = this.state;\n      const item = customPermissions.find(item => item.id + '' === explanation);\n      value = item && item.description;\n    }\n    return value;\n  }\n\n  getPermissions = () => {\n    const { permissions } = this.props;\n    let newPermissions = permissions.slice();\n    const { customPermissions } = this.state;\n    if (!this.customPermissions) {\n      if (customPermissions.length > 0) {\n        customPermissions.forEach(item => {\n          newPermissions.push(item.id + '');\n        });\n      }\n      this.customPermissions = newPermissions;\n    }\n    return this.customPermissions;\n  }\n\n\n  render() {\n    const { isLoading, currentOption } = this.state;\n    let permissions = [];\n    if (!isLoading) {\n      permissions = this.getPermissions();\n    }\n\n    return (\n      <Modal isOpen={true} toggle={this.props.toggleDialog}>\n        <ModalBody style={{maxHeight: '400px', overflow: 'auto'}}>\n          {isLoading && <Loading />}\n          {!isLoading && permissions.map((item, index) => {\n            return (\n              <div className=\"d-flex\" key={index}>\n                <input id={`option-${index}`} className=\"mt-1\" type=\"radio\" name=\"permission\" value={item} checked={currentOption == item} onChange={this.switchOption} />\n                <label htmlFor={`option-${index}`} className=\"ml-2\">\n                  {this.translatePermission(item)}\n                  <p className=\"text-secondary small m-0\">\n                    {this.translateExplanation(item)}\n                  </p>\n                </label>\n              </div>\n            );\n          })}\n        </ModalBody>\n      </Modal>\n    );\n  }\n}\n\nPermSelect.propTypes = propTypes;\n\nexport default PermSelect;\n","import React, { Fragment, Component } from 'react';\nimport { Link } from '@gatsbyjs/reach-router';\nimport { Dropdown, DropdownToggle, DropdownItem } from 'reactstrap';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { gettext, siteRoot, isPro } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../../components/toast';\nimport EmptyTip from '../../components/empty-tip';\nimport SharePermissionEditor from '../../components/select-editor/share-permission-editor';\nimport SharedRepoInfo from '../../models/shared-repo-info';\nimport PermSelect from '../../components/dialog/perm-select';\n\nclass Content extends Component {\n\n  sortByName = (e) => {\n    e.preventDefault();\n    const sortBy = 'name';\n    const sortOrder = this.props.sortOrder == 'asc' ? 'desc' : 'asc';\n    this.props.sortItems(sortBy, sortOrder);\n  }\n\n  render() {\n    const { loading, errorMsg, items, sortBy, sortOrder } = this.props;\n\n    if (loading) {\n      return <span className=\"loading-icon loading-tip\"></span>;\n    } else if (errorMsg) {\n      return <p className=\"error text-center\">{errorMsg}</p>;\n    } else {\n      const emptyTip = (\n        <EmptyTip>\n          <h2>{gettext('No libraries shared')}</h2>\n          <p>{gettext('You have not shared any libraries with other users yet. You can share a library with other users by clicking the share icon to the right of a library\\'s name in \"My Libraries\".')}</p>\n        </EmptyTip>\n      );\n\n      // sort\n      const sortByName = sortBy == 'name';\n      const sortIcon = sortOrder == 'asc' ? <span className=\"fas fa-caret-up\"></span> : <span className=\"fas fa-caret-down\"></span>;\n\n      const isDesktop = Utils.isDesktop();\n      const table = (\n        <table className={`table-hover ${isDesktop ? '': 'table-thead-hidden'}`}>\n          <thead>\n            {isDesktop ? (\n              <tr>\n                <th width=\"4%\">{/*icon*/}</th>\n                <th width=\"34%\"><a className=\"d-block table-sort-op\" href=\"#\" onClick={this.sortByName}>{gettext('Name')} {sortByName && sortIcon}</a></th>\n                <th width=\"30%\">{gettext('Share To')}</th>\n                <th width=\"24%\">{gettext('Permission')}</th>\n                <th width=\"8%\"></th>\n              </tr>\n            ) : (\n              <tr>\n                <th width=\"12%\"></th>\n                <th width=\"80%\"></th>\n                <th width=\"8%\"></th>\n              </tr>\n            )}\n          </thead>\n          <tbody>\n            {items.map((item, index) => {\n              return (<Item\n                key={index}\n                isDesktop={isDesktop}\n                item={item}\n              />);\n            })}\n          </tbody>\n        </table>\n      );\n\n      return items.length ? table : emptyTip;\n    }\n  }\n}\n\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n\n    let item = this.props.item;\n    this.state = {\n      share_permission: item.share_permission,\n      share_permission_name: item.share_permission_name,\n      is_admin: item.is_admin,\n      isOpIconShown: false,\n      isOpMenuOpen: false, // for mobile\n      isPermSelectDialogOpen: false, // for mobile\n      unshared: false,\n      isShowPermEditor: false,\n    };\n    let permissions = ['rw', 'r'];\n    this.permissions = permissions;\n    this.showAdmin = isPro && (item.share_type !== 'public');\n    if (this.showAdmin) {\n      permissions.push('admin');\n    }\n    if (isPro) {\n      permissions.push('cloud-edit', 'preview');\n    }\n  }\n\n  toggleOpMenu = () => {\n    this.setState({\n      isOpMenuOpen: !this.state.isOpMenuOpen\n    });\n  }\n\n  togglePermSelectDialog = () => {\n    this.setState({\n      isPermSelectDialogOpen: !this.state.isPermSelectDialogOpen\n    });\n  }\n\n  onMouseEnter = () => {\n    this.setState({isOpIconShown: true});\n  }\n\n  onMouseLeave = () => {\n    this.setState({isOpIconShown: false});\n  }\n\n  changePerm = (permission) => {\n    const item = this.props.item;\n    const share_type = item.share_type;\n    let options = {\n      'share_type': share_type,\n      'permission': permission\n    };\n    if (share_type == 'personal') {\n      options.user = item.user_email;\n    } else if (share_type == 'group') {\n      options.group_id = item.group_id;\n    }\n\n    seafileAPI.updateRepoSharePerm(item.repo_id, options).then(() => {\n      this.setState({\n        share_permission: permission == 'admin' ? 'rw' : permission,\n        is_admin: permission == 'admin',\n      });\n      toaster.success(gettext('Successfully modified permission.'));\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  unshare = (e) => {\n    e.preventDefault();\n\n    const item = this.props.item;\n    const share_type = item.share_type;\n    let options = {\n      'share_type': share_type\n    };\n    if (share_type == 'personal') {\n      options.user = item.user_email;\n    } else if (share_type == 'group') {\n      options.group_id = item.group_id;\n    }\n\n    seafileAPI.unshareRepo(item.repo_id, options).then((res) => {\n      this.setState({\n        unshared: true\n      });\n      let message = gettext('Successfully unshared {name}').replace('{name}', item.repo_name);\n      toaster.success(message);\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster(errMessage);\n    });\n  }\n\n  onEditPermission = (event) => {\n    event.nativeEvent.stopImmediatePropagation();\n    this.setState({isShowPermEditor: true});\n  }\n\n  render() {\n    if (this.state.unshared) {\n      return null;\n    }\n\n    let { share_permission, share_permission_name, is_admin, isOpIconShown, isPermSelectDialogOpen, isShowPermEditor } = this.state;\n    let item = this.props.item;\n    Object.assign(item, {\n      share_permission: share_permission,\n      is_admin: is_admin\n    });\n\n    let iconUrl = Utils.getLibIconUrl(item);\n    let iconTitle = Utils.getLibIconTitle(item);\n    let repoUrl = `${siteRoot}library/${item.repo_id}/${encodeURIComponent(item.repo_name)}/`;\n\n\n    let shareTo;\n    const shareType = item.share_type;\n    if (shareType == 'personal') {\n      shareTo = item.user_name;\n    } else if (shareType == 'group') {\n      shareTo = item.group_name;\n    } else if (shareType == 'public') {\n      shareTo = gettext('all members');\n    }\n\n    if (this.showAdmin && is_admin) {\n      share_permission = 'admin';\n    }\n\n    // custom defined permission\n    if (share_permission.startsWith('custom-')) {\n      share_permission = share_permission.slice(7);\n    }\n\n    const desktopItem = (\n      <tr onMouseEnter={this.onMouseEnter} onMouseLeave={this.onMouseLeave} onFocus={this.onMouseEnter}>\n        <td><img src={iconUrl} title={iconTitle} alt={iconTitle} width=\"24\" /></td>\n        <td><Link to={repoUrl}>{item.repo_name}</Link></td>\n        <td>\n          {item.share_type == 'personal' ? <span title={item.contact_email}>{shareTo}</span> : shareTo}\n        </td>\n        <td>\n          {!isShowPermEditor && (\n            <div>\n              <span>{Utils.sharePerms(share_permission) || share_permission_name}</span>\n              {isOpIconShown && (\n                <a href=\"#\"\n                  role=\"button\"\n                  aria-label={gettext('Edit')}\n                  title={gettext('Edit')}\n                  className=\"fa fa-pencil-alt attr-action-icon\"\n                  onClick={this.onEditPermission}>\n                </a>\n              )}\n            </div>\n          )}\n          {isShowPermEditor && (\n            <SharePermissionEditor\n              repoID={item.repo_id}\n              isTextMode={true}\n              isEditing={true}\n              autoFocus={true}\n              isEditIconShow={this.state.isOpIconShown}\n              currentPermission={share_permission}\n              permissions={this.permissions}\n              onPermissionChanged={this.changePerm}\n            />\n          )}\n        </td>\n        <td><a href=\"#\" role=\"button\" aria-label={gettext('Unshare')} className={`action-icon sf2-icon-x3 ${isOpIconShown ? '': 'invisible'}`} title={gettext('Unshare')} onClick={this.unshare}></a></td>\n      </tr>\n    );\n\n    const mobileItem = (\n      <Fragment>\n        <tr>\n          <td><img src={iconUrl} title={iconTitle} alt={iconTitle} width=\"24\" /></td>\n          <td>\n            <Link to={repoUrl}>{item.repo_name}</Link>\n            <span className=\"item-meta-info-highlighted\">{Utils.sharePerms(share_permission)}</span>\n            <br />\n            <span className=\"item-meta-info\">{`${gettext('Share To:')} ${shareTo}`}</span>\n          </td>\n          <td>\n            <Dropdown isOpen={this.state.isOpMenuOpen} toggle={this.toggleOpMenu}>\n              <DropdownToggle\n                tag=\"i\"\n                className=\"sf-dropdown-toggle fa fa-ellipsis-v ml-0\"\n                title={gettext('More Operations')}\n                data-toggle=\"dropdown\"\n                aria-expanded={this.state.isOpMenuOpen}\n              />\n              <div className={this.state.isOpMenuOpen ? '' : 'd-none'} onClick={this.toggleOpMenu}>\n                <div className=\"mobile-operation-menu-bg-layer\"></div>\n                <div className=\"mobile-operation-menu\">\n                  <DropdownItem className=\"mobile-menu-item\" onClick={this.togglePermSelectDialog}>{gettext('Permission')}</DropdownItem>\n                  <DropdownItem className=\"mobile-menu-item\" onClick={this.unshare}>{gettext('Unshare')}</DropdownItem>\n                </div>\n              </div>\n            </Dropdown>\n          </td>\n        </tr>\n        {isPermSelectDialogOpen && (\n          <PermSelect\n            repoID={item.repo_id}\n            currentPerm={share_permission}\n            permissions={this.permissions}\n            changePerm={this.changePerm}\n            toggleDialog={this.togglePermSelectDialog}\n          />\n        )}\n      </Fragment>\n    );\n\n    return this.props.isDesktop ? desktopItem : mobileItem;\n  }\n}\n\nclass ShareAdminLibraries extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      items: [],\n      sortBy: 'name', // 'name' or 'time'\n      sortOrder: 'asc' // 'asc' or 'desc'\n    };\n  }\n\n  componentDidMount() {\n    seafileAPI.listSharedRepos().then((res) => {\n      // res: {data: Array(2), status: 200, statusText: \"OK\", headers: {}, config: {},}\n      let items = res.data.map(item => {\n        return new SharedRepoInfo(item);\n      });\n      this.setState({\n        loading: false,\n        items: Utils.sortRepos(items, this.state.sortBy, this.state.sortOrder)\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  sortItems = (sortBy, sortOrder) => {\n    this.setState({\n      sortBy: sortBy,\n      sortOrder: sortOrder,\n      items: Utils.sortRepos(this.state.items, sortBy, sortOrder)\n    });\n  }\n\n  render() {\n    return (\n      <div className=\"main-panel-center\">\n        <div className=\"cur-view-container\" id=\"share-admin-libs\">\n          <div className=\"cur-view-path\">\n            <h3 className=\"sf-heading\">{gettext('Libraries')}</h3>\n          </div>\n          <div className=\"cur-view-content\">\n            <Content\n              errorMsg={this.state.errorMsg}\n              loading={this.state.loading}\n              items={this.state.items}\n              sortBy={this.state.sortBy}\n              sortOrder={this.state.sortOrder}\n              sortItems={this.sortItems}\n            />\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default ShareAdminLibraries;\n","class SharedFolderInfo {\n\n  constructor(object) {\n    this.path = object.path;\n    this.folder_name = object.folder_name;\n    this.repo_id = object.repo_id;\n    this.repo_name = object.repo_name;\n    this.share_type = object.share_type;\n    this.share_permission = object.share_permission;\n    this.share_permission_name = object.share_permission_name;\n    if (object.share_type === 'group') {\n      this.group_id = object.group_id;\n      this.group_name = object.group_name;\n    } else {\n      this.user_name = object.user_name;\n      this.user_email = object.user_email;\n      this.contact_email = object.contact_email;\n    }\n  }\n\n}\n\nexport default SharedFolderInfo;\n","import React, { Fragment, Component } from 'react';\nimport { Link } from '@gatsbyjs/reach-router';\nimport { Dropdown, DropdownToggle, DropdownItem } from 'reactstrap';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport { gettext, siteRoot, isPro } from '../../utils/constants';\nimport Loading from '../../components/loading';\nimport EmptyTip from '../../components/empty-tip';\nimport toaster from '../../components/toast';\nimport SharePermissionEditor from '../../components/select-editor/share-permission-editor';\nimport SharedFolderInfo from '../../models/shared-folder-info';\nimport PermSelect from '../../components/dialog/perm-select';\n\nclass Content extends Component {\n\n  sortByName = (e) => {\n    e.preventDefault();\n    const sortBy = 'name';\n    const sortOrder = this.props.sortOrder == 'asc' ? 'desc' : 'asc';\n    this.props.sortItems(sortBy, sortOrder);\n  }\n\n  render() {\n    const { loading, errorMsg, items, sortBy, sortOrder } = this.props;\n\n    if (loading) {\n      return <Loading />;\n    } else if (errorMsg) {\n      return <p className=\"error text-center\">{errorMsg}</p>;\n    } else {\n      const emptyTip = (\n        <EmptyTip>\n          <h2>{gettext('No folders shared')}</h2>\n          <p>{gettext('You have not shared any folders with other users yet. You can share a folder with other users by clicking the share icon to the right of a folder\\'s name.')}</p>\n        </EmptyTip>\n      );\n\n      // sort\n      const sortByName = sortBy == 'name';\n      const sortIcon = sortOrder == 'asc' ? <span className=\"fas fa-caret-up\"></span> : <span className=\"fas fa-caret-down\"></span>;\n\n      const isDesktop = Utils.isDesktop();\n      const table = (\n        <table className={`table-hover ${isDesktop ? '': 'table-thead-hidden'}`}>\n          <thead>\n            {isDesktop ? (\n              <tr>\n                <th width=\"4%\">{/*icon*/}</th>\n                <th width=\"34%\"><a className=\"d-block table-sort-op\" href=\"#\" onClick={this.sortByName}>{gettext('Name')} {sortByName && sortIcon}</a></th>\n                <th width=\"30%\">{gettext('Share To')}</th>\n                <th width=\"24%\">{gettext('Permission')}</th>\n                <th width=\"8%\"></th>\n              </tr>\n            ) : (\n              <tr>\n                <th width=\"12%\"></th>\n                <th width=\"80%\"></th>\n                <th width=\"8%\"></th>\n              </tr>\n            )}\n          </thead>\n          <tbody>\n            {items.map((item, index) => {\n              return (<Item key={index} isDesktop={isDesktop} item={item} />);\n            })}\n          </tbody>\n        </table>\n      );\n\n      return items.length ? table : emptyTip;\n    }\n  }\n}\n\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      share_permission: this.props.item.share_permission,\n      share_permission_name: this.props.item.share_permission_name,\n      isOpIconShown: false,\n      isOpMenuOpen: false, // for mobile\n      isPermSelectDialogOpen: false, // for mobile\n      unshared: false,\n      isShowPermEditor: false,\n    };\n\n    this.permissions = ['rw', 'r'];\n    if (isPro) {\n      this.permissions.push('cloud-edit', 'preview');\n    }\n  }\n\n  toggleOpMenu = () => {\n    this.setState({\n      isOpMenuOpen: !this.state.isOpMenuOpen\n    });\n  }\n\n  togglePermSelectDialog = () => {\n    this.setState({\n      isPermSelectDialogOpen: !this.state.isPermSelectDialogOpen\n    });\n  }\n\n  onMouseEnter = () => {\n    this.setState({isOpIconShown: true});\n  }\n\n  onMouseLeave = () => {\n    this.setState({isOpIconShown: false});\n  }\n\n  unshare = (e) => {\n    e.preventDefault();\n\n    const item = this.props.item;\n    let options = {\n      'p': item.path\n    };\n    if (item.share_type == 'personal') {\n      Object.assign(options, {\n        'share_type': 'user',\n        'username': item.user_email\n      });\n    } else {\n      Object.assign(options, {\n        'share_type': item.share_type, // 'group'\n        'group_id': item.group_id\n      });\n    }\n\n    seafileAPI.unshareFolder(item.repo_id, options).then((res) => {\n      this.setState({\n        unshared: true\n      });\n      let message = gettext('Successfully unshared {name}').replace('{name}', item.folder_name);\n      toaster.success(message);\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster(errMessage);\n    });\n  }\n\n  changePerm = (permission) => {\n    const item = this.props.item;\n    const postData = {\n      'permission': permission\n    };\n    let options = {\n      'p': item.path\n    };\n    if (item.share_type == 'personal') {\n      Object.assign(options, {\n        'share_type': 'user',\n        'username': item.user_email\n      });\n    } else {\n      Object.assign(options, {\n        'share_type': item.share_type, // 'group'\n        'group_id': item.group_id\n      });\n    }\n\n    seafileAPI.updateFolderSharePerm(item.repo_id, postData, options).then((res) => {\n      this.setState({share_permission: permission});\n      toaster.success(gettext('Successfully modified permission.'));\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  onEditPermission = (event) => {\n    event.nativeEvent.stopImmediatePropagation();\n    this.setState({isShowPermEditor: true});\n  }\n\n  render() {\n    if (this.state.unshared) {\n      return null;\n    }\n\n    const item = this.props.item;\n    let { share_permission, share_permission_name, isOpIconShown, isPermSelectDialogOpen, isShowPermEditor } = this.state;\n\n    let is_readonly = false;\n    if (share_permission == 'r' || share_permission == 'preview') {\n      is_readonly = true;\n    }\n    let iconUrl = Utils.getFolderIconUrl(is_readonly);\n    let iconTitle = Utils.getFolderIconTitle({\n      'permission': share_permission\n    });\n    let folderUrl = `${siteRoot}library/${item.repo_id}/${encodeURIComponent(item.repo_name)}${Utils.encodePath(item.path)}`;\n\n    // custom defined permission\n    if (share_permission.startsWith('custom-')) {\n      share_permission = share_permission.slice(7);\n    }\n    const desktopItem = (\n      <tr onMouseEnter={this.onMouseEnter} onMouseLeave={this.onMouseLeave} onFocus={this.onMouseEnter}>\n        <td><img src={iconUrl} title={iconTitle} alt={iconTitle} width=\"24\" /></td>\n        <td><Link to={folderUrl}>{item.folder_name}</Link></td>\n        <td>\n          {item.share_type == 'personal' ?\n            <span title={item.contact_email}>{item.user_name}</span> : item.group_name}\n        </td>\n        <td>\n          {!isShowPermEditor && (\n            <div>\n              <span>{Utils.sharePerms(share_permission) || share_permission_name}</span>\n              {isOpIconShown && (\n                <a href=\"#\"\n                  role=\"button\"\n                  aria-label={gettext('Edit')}\n                  title={gettext('Edit')}\n                  className=\"fa fa-pencil-alt attr-action-icon\"\n                  onClick={this.onEditPermission}>\n                </a>\n              )}\n            </div>\n          )}\n          {isShowPermEditor && (\n            <SharePermissionEditor\n              repoID={item.repo_id}\n              isTextMode={true}\n              isEditIconShow={isOpIconShown}\n              isEditing={true}\n              autoFocus={true}\n              currentPermission={share_permission}\n              permissions={this.permissions}\n              onPermissionChanged={this.changePerm}\n            />\n          )}\n        </td>\n        <td><a href=\"#\" role=\"button\" aria-label={gettext('Unshare')} className={`action-icon sf2-icon-x3 ${isOpIconShown ? '': 'invisible'}`} title={gettext('Unshare')} onClick={this.unshare}></a></td>\n      </tr>\n    );\n\n    const mobileItem = (\n      <Fragment>\n        <tr>\n          <td><img src={iconUrl} title={iconTitle} alt={iconTitle} width=\"24\" /></td>\n          <td>\n            <Link to={folderUrl}>{item.folder_name}</Link>\n            <span className=\"item-meta-info-highlighted\">{Utils.sharePerms(share_permission)}</span>\n            <br />\n            <span className=\"item-meta-info\">{`${gettext('Share To:')} ${item.share_type == 'personal' ? item.user_name : item.group_name}`}</span>\n          </td>\n          <td>\n            <Dropdown isOpen={this.state.isOpMenuOpen} toggle={this.toggleOpMenu}>\n              <DropdownToggle\n                tag=\"i\"\n                className=\"sf-dropdown-toggle fa fa-ellipsis-v ml-0\"\n                title={gettext('More Operations')}\n                data-toggle=\"dropdown\"\n                aria-expanded={this.state.isOpMenuOpen}\n              />\n              <div className={this.state.isOpMenuOpen ? '' : 'd-none'} onClick={this.toggleOpMenu}>\n                <div className=\"mobile-operation-menu-bg-layer\"></div>\n                <div className=\"mobile-operation-menu\">\n                  <DropdownItem className=\"mobile-menu-item\" onClick={this.togglePermSelectDialog}>{gettext('Permission')}</DropdownItem>\n                  <DropdownItem className=\"mobile-menu-item\" onClick={this.unshare}>{gettext('Unshare')}</DropdownItem>\n                </div>\n              </div>\n            </Dropdown>\n          </td>\n        </tr>\n        {isPermSelectDialogOpen &&(\n          <PermSelect\n            repoID={item.repo_id}\n            currentPerm={share_permission}\n            permissions={this.permissions}\n            changePerm={this.changePerm}\n            toggleDialog={this.togglePermSelectDialog}\n          />\n        )}\n      </Fragment>\n    );\n\n    return this.props.isDesktop ? desktopItem : mobileItem;\n  }\n}\n\nclass ShareAdminFolders extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      items: [],\n      sortBy: 'name',\n      sortOrder: 'asc' // 'asc' or 'desc'\n    };\n  }\n\n  _sortItems = (items, sortBy, sortOrder) => {\n    let comparator;\n\n    switch (`${sortBy}-${sortOrder}`) {\n      case 'name-asc':\n        comparator = function(a, b) {\n          var result = Utils.compareTwoWord(a.folder_name, b.folder_name);\n          return result;\n        };\n        break;\n      case 'name-desc':\n        comparator = function(a, b) {\n          var result = Utils.compareTwoWord(a.folder_name, b.folder_name);\n          return -result;\n        };\n        break;\n    }\n\n    items.sort(comparator);\n    return items;\n  }\n\n  sortItems = (sortBy, sortOrder) => {\n    this.setState({\n      sortBy: sortBy,\n      sortOrder: sortOrder,\n      items: this._sortItems(this.state.items, sortBy, sortOrder)\n    });\n  }\n\n  componentDidMount() {\n    seafileAPI.listSharedFolders().then((res) => {\n      let items = res.data.map(item => {\n        return new SharedFolderInfo(item);\n      });\n      this.setState({\n        loading: false,\n        items: this._sortItems(items, this.state.sortBy, this.state.sortOrder)\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  render() {\n    return (\n      <div className=\"main-panel-center\">\n        <div className=\"cur-view-container\" id=\"share-admin-libs\">\n          <div className=\"cur-view-path\">\n            <h3 className=\"sf-heading\">{gettext('Folders')}</h3>\n          </div>\n          <div className=\"cur-view-content\">\n            <Content\n              errorMsg={this.state.errorMsg}\n              loading={this.state.loading}\n              items={this.state.items}\n              sortBy={this.state.sortBy}\n              sortOrder={this.state.sortOrder}\n              sortItems={this.sortItems}\n            />\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default ShareAdminFolders;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Modal, ModalBody } from 'reactstrap';\nimport { Utils } from '../../utils/utils';\n\nconst propTypes = {\n  currentPerm: PropTypes.string.isRequired,\n  permissions: PropTypes.array.isRequired,\n  changePerm: PropTypes.func.isRequired,\n  toggleDialog: PropTypes.func.isRequired\n};\n\nclass ShareLinkPermissionSelect extends React.Component {\n\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      currentOption: this.props.currentPerm\n    };\n  }\n\n  switchOption = (e) => {\n    if (!e.target.checked) {\n      return;\n    }\n\n    const currentOption = e.target.value;\n    this.setState({\n      currentOption: currentOption\n    });\n\n    this.props.changePerm(currentOption);\n    this.props.toggleDialog();\n  }\n\n  render() {\n    const options = this.props.permissions;\n    const { currentOption } = this.state;\n\n    return (\n      <Modal isOpen={true} toggle={this.props.toggleDialog}>\n        <ModalBody>\n          {options.map((item, index) => {\n            return (\n              <div className=\"d-flex\" key={index}>\n                <input id={`option-${index}`} className=\"mt-1\" type=\"radio\" name=\"permission\" value={item} checked={currentOption == item} onChange={this.switchOption} />\n                <label htmlFor={`option-${index}`} className=\"ml-2\">\n                  {Utils.getShareLinkPermissionObject(item).text}\n                </label>\n              </div>\n            );\n          })}\n        </ModalBody>\n      </Modal>\n    );\n  }\n}\n\nShareLinkPermissionSelect.propTypes = propTypes;\n\nexport default ShareLinkPermissionSelect;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Modal, ModalBody } from 'reactstrap';\nimport { gettext } from '../../utils/constants';\n\nconst propTypes = {\n  toggleDialog: PropTypes.func.isRequired,\n  sortBy: PropTypes.string.isRequired,\n  sortOrder: PropTypes.string.isRequired,\n  sortOptions: PropTypes.array,\n  sortItems: PropTypes.func.isRequired\n};\n\nclass SortOptions extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.sortOptions = this.props.sortOptions || [\n      {value: 'name-asc', text: gettext('By name ascending')},\n      {value: 'name-desc', text: gettext('By name descending')},\n      {value: 'size-asc', text: gettext('By size ascending')},\n      {value: 'size-desc', text: gettext('By size descending')},\n      {value: 'time-asc', text: gettext('By time ascending')},\n      {value: 'time-desc', text: gettext('By time descending')}\n    ];\n    const { sortBy, sortOrder } = this.props;\n    this.state = {\n      currentOption: `${sortBy}-${sortOrder}`\n    };\n  }\n\n  switchOption = (e) => {\n    if (!e.target.checked) {\n      return;\n    }\n\n    this.setState({\n      currentOption: e.target.value\n    });\n\n    const [sortBy, sortOrder] = e.target.value.split('-');\n    this.props.sortItems(sortBy, sortOrder);\n    this.props.toggleDialog();\n  }\n\n  render() {\n    return (\n      <Modal isOpen={true} toggle={this.props.toggleDialog}>\n        <ModalBody>\n          {this.sortOptions.map((item, index) => {\n            return (\n              <Fragment key={index}>\n                <input id={`option-${index}`} className=\"align-middle\" type=\"radio\" name=\"sort-option\" value={item.value} checked={this.state.currentOption == item.value} onChange={this.switchOption} />\n                <label htmlFor={`option-${index}`} className=\"align-middle m-2\">{item.text}</label><br />\n              </Fragment>\n            );\n          })}\n        </ModalBody>\n      </Modal>\n    );\n  }\n}\n\nSortOptions.propTypes = propTypes;\n\nexport default SortOptions;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport CommonToolbar from './common-toolbar';\n\nconst propTypes = {\n  onShowSidePanel: PropTypes.func.isRequired,\n  onSearchedClick: PropTypes.func.isRequired,\n  searchPlaceholder: PropTypes.string,\n  children: PropTypes.object\n};\n\nclass TopToolbar extends React.Component {\n\n  render() {\n    const { onShowSidePanel, onSearchedClick } = this.props;\n    return (\n      <div className=\"main-panel-north border-left-show\">\n        <div className=\"cur-view-toolbar\">\n          <span title=\"Side Nav Menu\" onClick={onShowSidePanel} className=\"sf2-icon-menu side-nav-toggle hidden-md-up d-md-none\">\n          </span>\n          {this.props.children}\n        </div>\n        <CommonToolbar searchPlaceholder={this.props.searchPlaceholder} onSearchedClick={onSearchedClick} />\n      </div>\n    );\n  }\n}\n\nTopToolbar.propTypes = propTypes;\n\nexport default TopToolbar;\n","import React, { Component, Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Link } from '@gatsbyjs/reach-router';\nimport moment from 'moment';\nimport { Dropdown, DropdownToggle, DropdownItem, Button } from 'reactstrap';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport { isPro, gettext, siteRoot, canGenerateUploadLink } from '../../utils/constants';\nimport ShareLink from '../../models/share-link';\nimport ShareLinkPermissionEditor from '../../components/select-editor/share-link-permission-editor';\nimport Loading from '../../components/loading';\nimport toaster from '../../components/toast';\nimport EmptyTip from '../../components/empty-tip';\nimport ShareLinkPermissionSelect from '../../components/dialog/share-link-permission-select';\nimport ShareAdminLink from '../../components/dialog/share-admin-link';\nimport SortOptionsDialog from '../../components/dialog/sort-options';\nimport CommonOperationConfirmationDialog from '../../components/dialog/common-operation-confirmation-dialog';\nimport TopToolbar from '../../components/toolbar/top-toolbar';\n\nconst contentPropTypes = {\n  loading: PropTypes.bool.isRequired,\n  errorMsg: PropTypes.string.isRequired,\n  items: PropTypes.array.isRequired,\n  sortBy: PropTypes.string.isRequired,\n  sortOrder: PropTypes.string.isRequired,\n  sortItems: PropTypes.func.isRequired,\n  onRemoveLink: PropTypes.func.isRequired\n};\n\nclass Content extends Component {\n\n  sortByName = (e) => {\n    e.preventDefault();\n    const sortBy = 'name';\n    const sortOrder = this.props.sortOrder == 'asc' ? 'desc' : 'asc';\n    this.props.sortItems(sortBy, sortOrder);\n  }\n\n  sortByTime = (e) => {\n    e.preventDefault();\n    const sortBy = 'time';\n    const sortOrder = this.props.sortOrder == 'asc' ? 'desc' : 'asc';\n    this.props.sortItems(sortBy, sortOrder);\n  }\n\n  render() {\n    const { loading, errorMsg, items, sortBy, sortOrder } = this.props;\n\n    if (loading) {\n      return <Loading />;\n    } else if (errorMsg) {\n      return <p className=\"error text-center\">{errorMsg}</p>;\n    } else {\n      const emptyTip = (\n        <EmptyTip>\n          <h2>{gettext('No share links')}</h2>\n          <p>{gettext('You have not created any share links yet. A share link can be used to share files and folders with anyone. You can create a share link for a file or folder by clicking the share icon to the right of its name.')}</p>\n        </EmptyTip>\n      );\n\n      // sort\n      const sortByName = sortBy == 'name';\n      const sortByTime = sortBy == 'time';\n      const sortIcon = sortOrder == 'asc' ? <span className=\"fas fa-caret-up\"></span> : <span className=\"fas fa-caret-down\"></span>;\n\n      const isDesktop = Utils.isDesktop();\n      // only for some columns\n      const columnWidths = isPro ? ['14%', '7%', '14%'] : ['21%', '14%', '20%'];\n      const table = (\n        <table className={`table-hover ${isDesktop ? '': 'table-thead-hidden'}`}>\n          <thead>\n            {isDesktop ? (\n              <tr>\n                <th width=\"4%\">{/*icon*/}</th>\n                <th width=\"31%\"><a className=\"d-block table-sort-op\" href=\"#\" onClick={this.sortByName}>{gettext('Name')} {sortByName && sortIcon}</a></th>\n                <th width={columnWidths[0]}>{gettext('Library')}</th>\n                {isPro && <th width=\"20%\">{gettext('Permission')}</th>}\n                <th width={columnWidths[1]}>{gettext('Visits')}</th>\n                <th width={columnWidths[2]}><a className=\"d-block table-sort-op\" href=\"#\" onClick={this.sortByTime}>{gettext('Expiration')} {sortByTime && sortIcon}</a></th>\n                <th width=\"10%\">{/*Operations*/}</th>\n              </tr>\n            ) : (\n              <tr>\n                <th width=\"12%\"></th>\n                <th width=\"80%\"></th>\n                <th width=\"8%\"></th>\n              </tr>\n            )}\n          </thead>\n          <tbody>\n            {items.map((item, index) => {\n              return (<Item key={index} isDesktop={isDesktop} item={item} onRemoveLink={this.props.onRemoveLink} />);\n            })}\n          </tbody>\n        </table>\n      );\n\n      return items.length ? table : emptyTip;\n    }\n  }\n}\n\nContent.propTypes = contentPropTypes;\n\nconst itemPropTypes = {\n  item: PropTypes.object.isRequired,\n  isDesktop: PropTypes.bool.isRequired,\n  onRemoveLink: PropTypes.func.isRequired\n};\n\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      isOpIconShown: false,\n      isOpMenuOpen: false, // for mobile\n      isPermSelectDialogOpen: false, // for mobile\n      isLinkDialogOpen: false,\n      permissionOptions: [],\n      currentPermission: '',\n    };\n  }\n\n  componentDidMount() {\n    if (isPro) {\n      this.updatePermissionOptions();\n    }\n  }\n\n  updatePermissionOptions = () => {\n    const item = this.props.item;\n    let itemType = item.is_dir ? (item.path === '/' ? 'library' : 'dir') : 'file';\n    let permission = item.repo_folder_permission;\n    let permissionOptions = Utils.getShareLinkPermissionList(itemType, permission, item.path, item.can_edit);\n    let currentPermission = Utils.getShareLinkPermissionStr(this.props.item.permissions);\n    this.setState({\n      permissionOptions: permissionOptions,\n      currentPermission: currentPermission\n    });\n  }\n\n  toggleOpMenu = () => {\n    this.setState({\n      isOpMenuOpen: !this.state.isOpMenuOpen\n    });\n  }\n\n  togglePermSelectDialog = () => {\n    this.setState({\n      isPermSelectDialogOpen: !this.state.isPermSelectDialogOpen\n    });\n  }\n\n  toggleLinkDialog = () => {\n    this.setState({\n      isLinkDialogOpen: !this.state.isLinkDialogOpen\n    });\n  }\n\n  handleMouseOver = () => {\n    this.setState({isOpIconShown: true});\n  }\n\n  handleMouseOut = () => {\n    this.setState({isOpIconShown: false});\n  }\n\n  viewLink = (e) => {\n    e.preventDefault();\n    this.toggleLinkDialog();\n  }\n\n  removeLink = (e) => {\n    e.preventDefault();\n    this.props.onRemoveLink(this.props.item);\n  }\n\n  renderExpiration = () => {\n    const item = this.props.item;\n    if (!item.expire_date) {\n      return '--';\n    }\n    const expire_date = moment(item.expire_date).format('YYYY-MM-DD');\n    const expire_time = moment(item.expire_date).format('YYYY-MM-DD HH:mm:ss');\n    return (<span className={item.is_expired ? 'error' : ''} title={expire_time}>{expire_date}</span>);\n  }\n\n  changePerm = (permission) => {\n    const item = this.props.item;\n    const permissionDetails = Utils.getShareLinkPermissionObject(permission).permissionDetails;\n    seafileAPI.updateShareLink(item.token, JSON.stringify(permissionDetails)).then(() => {\n      this.setState({\n        currentPermission: permission\n      });\n      let message = gettext('Successfully modified permission.');\n      toaster.success(message);\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  render() {\n    const item = this.props.item;\n    const { currentPermission, permissionOptions , isOpIconShown, isPermSelectDialogOpen, isLinkDialogOpen } = this.state;\n\n    let iconUrl, objUrl;\n    if (item.is_dir) {\n      let path = item.path === '/' ? '/' : item.path.slice(0, item.path.length - 1);\n      iconUrl = Utils.getFolderIconUrl(false);\n      objUrl = `${siteRoot}library/${item.repo_id}/${encodeURIComponent(item.repo_name)}${Utils.encodePath(path)}`;\n    } else {\n      iconUrl = Utils.getFileIconUrl(item.obj_name);\n      objUrl = `${siteRoot}lib/${item.repo_id}/file${Utils.encodePath(item.path)}`;\n    }\n\n    const deletedTip = item.obj_id === '' ? <span style={{color:'red'}}>{gettext('(deleted)')}</span> : null;\n    const desktopItem = (\n      <tr onMouseEnter={this.handleMouseOver} onMouseLeave={this.handleMouseOut} onFocus={this.handleMouseOver}>\n        <td><img src={iconUrl} width=\"24\" alt=\"\" /></td>\n        <td>\n          {item.is_dir ?\n            <Link to={objUrl}>{item.obj_name}</Link> :\n            <a href={objUrl} target=\"_blank\" rel=\"noreferrer\">{item.obj_name}</a>\n          }\n          {deletedTip}\n        </td>\n        <td><Link to={`${siteRoot}library/${item.repo_id}/${encodeURIComponent(item.repo_name)}/`}>{item.repo_name}</Link></td>\n        {isPro &&\n        <td>\n          <ShareLinkPermissionEditor\n            isTextMode={true}\n            isEditIconShow={isOpIconShown && !item.is_expired}\n            currentPermission={currentPermission}\n            permissionOptions={permissionOptions}\n            onPermissionChanged={this.changePerm}\n          />\n        </td>\n        }\n        <td>{item.view_cnt}</td>\n        <td>{this.renderExpiration()}</td>\n        <td>\n          {!item.is_expired && <a href=\"#\" className={`sf2-icon-link action-icon ${isOpIconShown ? '': 'invisible'}`} title={gettext('View')} aria-label={gettext('View')} role=\"button\" onClick={this.viewLink}></a>}\n          <a href=\"#\" className={`sf2-icon-delete action-icon ${isOpIconShown ? '': 'invisible'}`} title={gettext('Remove')} aria-label={gettext('Remove')} role=\"button\" onClick={this.removeLink}></a>\n        </td>\n      </tr>\n    );\n\n    const mobileItem = (\n      <Fragment>\n        <tr>\n          <td><img src={iconUrl} alt=\"\" width=\"24\" /></td>\n          <td>\n            {item.is_dir ?\n              <Link to={objUrl}>{item.obj_name}</Link> :\n              <a href={objUrl} target=\"_blank\" rel=\"noreferrer\">{item.obj_name}</a>\n            }\n            {isPro && <span className=\"item-meta-info-highlighted\">{Utils.getShareLinkPermissionObject(currentPermission).text}</span>}\n            <br />\n            <span>{item.repo_name}</span><br />\n            <span className=\"item-meta-info\">{gettext('Visits')}: {item.view_cnt}</span>\n            <span className=\"item-meta-info\">{gettext('Expiration')}: {this.renderExpiration()}</span>\n          </td>\n          <td>\n            <Dropdown isOpen={this.state.isOpMenuOpen} toggle={this.toggleOpMenu}>\n              <DropdownToggle\n                tag=\"i\"\n                className=\"sf-dropdown-toggle fa fa-ellipsis-v ml-0\"\n                title={gettext('More Operations')}\n                data-toggle=\"dropdown\"\n                aria-expanded={this.state.isOpMenuOpen}\n              />\n              <div className={this.state.isOpMenuOpen ? '' : 'd-none'} onClick={this.toggleOpMenu}>\n                <div className=\"mobile-operation-menu-bg-layer\"></div>\n                <div className=\"mobile-operation-menu\">\n                  {(isPro && !item.is_expired) && <DropdownItem className=\"mobile-menu-item\" onClick={this.togglePermSelectDialog}>{gettext('Permission')}</DropdownItem>}\n                  {!item.is_expired && <DropdownItem className=\"mobile-menu-item\" onClick={this.viewLink}>{gettext('View')}</DropdownItem>}\n                  <DropdownItem className=\"mobile-menu-item\" onClick={this.removeLink}>{gettext('Remove')}</DropdownItem>\n                </div>\n              </div>\n            </Dropdown>\n          </td>\n        </tr>\n        {isPermSelectDialogOpen &&\n        <ShareLinkPermissionSelect\n          currentPerm={currentPermission}\n          permissions={permissionOptions}\n          changePerm={this.changePerm}\n          toggleDialog={this.togglePermSelectDialog}\n        />\n        }\n      </Fragment>\n    );\n\n    return (\n      <Fragment>\n        {this.props.isDesktop ? desktopItem : mobileItem}\n        {isLinkDialogOpen &&\n        <ShareAdminLink\n          link={item.link}\n          toggleDialog={this.toggleLinkDialog}\n        />\n        }\n      </Fragment>\n    );\n  }\n}\n\nItem.propTypes = itemPropTypes;\n\nconst propTypes = {\n  onShowSidePanel: PropTypes.func.isRequired,\n  onSearchedClick: PropTypes.func.isRequired\n};\n\nclass ShareAdminShareLinks extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isCleanInvalidShareLinksDialogOpen: false,\n      loading: true,\n      errorMsg: '',\n      items: [],\n      sortBy: 'name', // 'name' or 'time'\n      sortOrder: 'asc' // 'asc' or 'desc'\n    };\n\n    // for mobile\n    this.sortOptions = [\n      {value: 'name-asc', text: gettext('By name ascending')},\n      {value: 'name-desc', text: gettext('By name descending')},\n      {value: 'time-asc', text: gettext('By expiration ascending')},\n      {value: 'time-desc', text: gettext('By expiration descending')}\n    ];\n  }\n\n  _sortItems = (items, sortBy, sortOrder) => {\n    let comparator;\n\n    switch (`${sortBy}-${sortOrder}`) {\n      case 'name-asc':\n        comparator = function(a, b) {\n          var result = Utils.compareTwoWord(a.obj_name, b.obj_name);\n          return result;\n        };\n        break;\n      case 'name-desc':\n        comparator = function(a, b) {\n          var result = Utils.compareTwoWord(a.obj_name, b.obj_name);\n          return -result;\n        };\n        break;\n      case 'time-asc':\n        comparator = function(a, b) {\n          return a.expire_date < b.expire_date ? -1 : 1;\n        };\n        break;\n      case 'time-desc':\n        comparator = function(a, b) {\n          return a.expire_date < b.expire_date ? 1 : -1;\n        };\n        break;\n\n      // no default\n    }\n\n    items.sort((a, b) => {\n      if (a.is_dir && !b.is_dir) {\n        return -1;\n      } else if (!a.is_dir && b.is_dir) {\n        return 1;\n      } else {\n        return comparator(a, b);\n      }\n    });\n    return items;\n  }\n\n  sortItems = (sortBy, sortOrder) => {\n    this.setState({\n      sortBy: sortBy,\n      sortOrder: sortOrder,\n      items: this._sortItems(this.state.items, sortBy, sortOrder)\n    });\n  }\n\n  componentDidMount() {\n    this.listUserShareLinks();\n  }\n\n  listUserShareLinks() {\n    seafileAPI.listUserShareLinks().then((res) => {\n      let items = res.data.map(item => {\n        return new ShareLink(item);\n      });\n      this.setState({\n        loading: false,\n        items: this._sortItems(items, this.state.sortBy, this.state.sortOrder)\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  onRemoveLink = (item) => {\n    seafileAPI.deleteShareLink(item.token).then(() => {\n      let items = this.state.items.filter(uploadItem => {\n        return uploadItem.token !== item.token;\n      });\n      this.setState({items: items});\n      let message = gettext('Successfully deleted 1 item.');\n      toaster.success(message);\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  toggleSortOptionsDialog = () => {\n    this.setState({\n      isSortOptionsDialogOpen: !this.state.isSortOptionsDialogOpen\n    });\n  }\n\n  toggleCleanInvalidShareLinksDialog = () => {\n    this.setState({isCleanInvalidShareLinksDialogOpen: !this.state.isCleanInvalidShareLinksDialogOpen});\n  }\n\n  cleanInvalidShareLinks = () => {\n    seafileAPI.cleanInvalidShareLinks().then(res => {\n      const newItems = this.state.items.filter(item => item.obj_id !== '').filter(item => !item.is_expired);\n      this.setState({items: newItems});\n      toaster.success(gettext('Successfully cleaned invalid share links.'));\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  render() {\n    return (\n      <Fragment>\n        <TopToolbar\n          onShowSidePanel={this.props.onShowSidePanel}\n          onSearchedClick={this.props.onSearchedClick}\n        >\n\n          <Button className=\"operation-item d-none d-md-block\" onClick={this.toggleCleanInvalidShareLinksDialog}>{gettext('Clean invalid share links')}</Button>\n        </TopToolbar>\n        <div className=\"main-panel-center\">\n          <div className=\"cur-view-container\">\n            <div className=\"cur-view-path share-upload-nav\">\n              <ul className=\"nav\">\n                <li className=\"nav-item\">\n                  <Link to={`${siteRoot}share-admin-share-links/`} className=\"nav-link active\">{gettext('Share Links')}</Link>\n                </li>\n                {canGenerateUploadLink && (\n                  <li className=\"nav-item\"><Link to={`${siteRoot}share-admin-upload-links/`} className=\"nav-link\">{gettext('Upload Links')}</Link></li>\n                )}\n              </ul>\n              {(!Utils.isDesktop() && this.state.items.length > 0) && <span className=\"sf3-font sf3-font-sort action-icon\" onClick={this.toggleSortOptionsDialog}></span>}\n            </div>\n            <div className=\"cur-view-content\">\n              <Content\n                loading={this.state.loading}\n                errorMsg={this.state.errorMsg}\n                items={this.state.items}\n                sortBy={this.state.sortBy}\n                sortOrder={this.state.sortOrder}\n                sortItems={this.sortItems}\n                onRemoveLink={this.onRemoveLink}\n              />\n            </div>\n          </div>\n        </div>\n        {this.state.isSortOptionsDialogOpen &&\n        <SortOptionsDialog\n          toggleDialog={this.toggleSortOptionsDialog}\n          sortBy={this.state.sortBy}\n          sortOrder={this.state.sortOrder}\n          sortOptions={this.sortOptions}\n          sortItems={this.sortItems}\n        />\n        }\n        {this.state.isCleanInvalidShareLinksDialogOpen &&\n          <CommonOperationConfirmationDialog\n            title={gettext('Clean invalid share links')}\n            message={gettext('Are you sure you want to clean invalid share links?')}\n            executeOperation={this.cleanInvalidShareLinks}\n            confirmBtnText={gettext('Clean')}\n            toggleDialog={this.toggleCleanInvalidShareLinksDialog}\n          />\n        }\n      </Fragment>\n    );\n  }\n}\n\nShareAdminShareLinks.propTypes = propTypes;\n\nexport default ShareAdminShareLinks;\n","import React, { Component, Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Link } from '@gatsbyjs/reach-router';\nimport moment from 'moment';\nimport { Dropdown, DropdownToggle, DropdownItem, Button } from 'reactstrap';\nimport { gettext, siteRoot, canGenerateShareLink } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../../components/toast';\nimport Loading from '../../components/loading';\nimport EmptyTip from '../../components/empty-tip';\nimport UploadLink from '../../models/upload-link';\nimport ShareAdminLink from '../../components/dialog/share-admin-link';\nimport CommonOperationConfirmationDialog from '../../components/dialog/common-operation-confirmation-dialog';\nimport TopToolbar from '../../components/toolbar/top-toolbar';\n\nconst contentPropTypes = {\n  loading: PropTypes.bool.isRequired,\n  errorMsg: PropTypes.string.isRequired,\n  items: PropTypes.array.isRequired,\n  onRemoveLink: PropTypes.func.isRequired\n};\n\nclass Content extends Component {\n\n  render() {\n    const { loading, errorMsg, items } = this.props;\n\n    if (loading) {\n      return <Loading />;\n    }\n    if (errorMsg) {\n      return <p className=\"error text-center\">{errorMsg}</p>;\n    }\n\n    const emptyTip = (\n      <EmptyTip>\n        <h2>{gettext('No upload links')}</h2>\n        <p>{gettext('You have not created any upload links yet. An upload link allows anyone to upload files to a folder or library. You can create an upload link for a folder or library by clicking the share icon to the right of its name.')}</p>\n      </EmptyTip>\n    );\n\n    const isDesktop = Utils.isDesktop();\n    const table = (\n      <table className={`table-hover ${isDesktop ? '': 'table-thead-hidden'}`}>\n        <thead>\n          {isDesktop ? (\n            <tr>\n              <th width=\"4%\">{/*icon*/}</th>\n              <th width=\"30%\">{gettext('Name')}</th>\n              <th width=\"24%\">{gettext('Library')}</th>\n              <th width=\"16%\">{gettext('Visits')}</th>\n              <th width=\"16%\">{gettext('Expiration')}</th>\n              <th width=\"10%\">{/*Operations*/}</th>\n            </tr>\n          ) : (\n            <tr>\n              <th width=\"12%\"></th>\n              <th width=\"80%\"></th>\n              <th width=\"8%\"></th>\n            </tr>\n          )}\n        </thead>\n        <tbody>\n          {items.map((item, index) => {\n            return (<Item key={index} isDesktop={isDesktop} item={item} onRemoveLink={this.props.onRemoveLink}/>);\n          })}\n        </tbody>\n      </table>\n    );\n\n    return items.length ? table : emptyTip;\n  }\n}\n\nContent.propTypes = contentPropTypes;\n\nconst itemPropTypes = {\n  isDesktop: PropTypes.bool.isRequired,\n  item: PropTypes.object.isRequired,\n  onRemoveLink: PropTypes.func.isRequired\n};\n\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOpIconShown: false,\n      isOpMenuOpen: false, // for mobile\n      isLinkDialogOpen: false\n    };\n  }\n\n toggleOpMenu = () => {\n   this.setState({\n     isOpMenuOpen: !this.state.isOpMenuOpen\n   });\n }\n\n  toggleLinkDialog = () => {\n    this.setState({\n      isLinkDialogOpen: !this.state.isLinkDialogOpen\n    });\n  }\n\n  handleMouseOver = () => {\n    this.setState({isOpIconShown: true});\n  }\n\n  handleMouseOut = () => {\n    this.setState({isOpIconShown: false});\n  }\n\n  viewLink = (e) => {\n    e.preventDefault();\n    this.toggleLinkDialog();\n  }\n\n  removeLink = (e) => {\n    e.preventDefault();\n    this.props.onRemoveLink(this.props.item);\n  }\n\n  renderExpiration = () => {\n    const item = this.props.item;\n    if (!item.expire_date) {\n      return '--';\n    }\n    const expire_date = moment(item.expire_date).format('YYYY-MM-DD');\n    const expire_time = moment(item.expire_date).format('YYYY-MM-DD HH:mm:ss');\n    return (<span className={item.is_expired ? 'error' : ''} title={expire_time}>{expire_date}</span>);\n  }\n\n  render() {\n    let item = this.props.item;\n    const { isOpIconShown, isLinkDialogOpen } = this.state;\n\n    const iconUrl = Utils.getFolderIconUrl(false);\n    const repoUrl = `${siteRoot}library/${item.repo_id}/${encodeURIComponent(item.repo_name)}`;\n    const objUrl = `${repoUrl}${Utils.encodePath(item.path)}`;\n\n    const deletedTip = item.obj_id === '' ? <span style={{color:'red'}}>{gettext('(deleted)')}</span> : null;\n    const desktopItem = (\n      <tr onMouseOver={this.handleMouseOver} onMouseOut={this.handleMouseOut} onFocus={this.handleMouseOver}>\n        <td><img src={iconUrl} alt=\"\" width=\"24\" /></td>\n        <td><Link to={objUrl}>{item.obj_name}</Link>{deletedTip}</td>\n        <td><Link to={repoUrl}>{item.repo_name}</Link></td>\n        <td>{item.view_cnt}</td>\n        <td>{this.renderExpiration()}</td>\n        <td>\n          {!item.is_expired && <a href=\"#\" className={`sf2-icon-link action-icon ${isOpIconShown ? '' : 'invisible'}`} title={gettext('View')} aria-label={gettext('View')} role=\"button\" onClick={this.viewLink}></a>}\n          <a href=\"#\" className={`sf2-icon-delete action-icon ${isOpIconShown ? '' : 'invisible'}`} title={gettext('Remove')} aria-label={gettext('Remove')} role=\"button\" onClick={this.removeLink}></a>\n        </td>\n      </tr>\n    );\n\n    const mobileItem = (\n      <tr>\n        <td><img src={iconUrl} alt=\"\" width=\"24\" /></td>\n        <td>\n          <Link to={objUrl}>{item.obj_name}</Link>\n          <br />\n          <span>{item.repo_name}</span><br />\n          <span className=\"item-meta-info\">{gettext('Visits')}: {item.view_cnt}</span>\n          <span className=\"item-meta-info\">{gettext('Expiration')}: {this.renderExpiration()}</span>\n        </td>\n        <td>\n          <Dropdown isOpen={this.state.isOpMenuOpen} toggle={this.toggleOpMenu}>\n            <DropdownToggle\n              tag=\"i\"\n              className=\"sf-dropdown-toggle fa fa-ellipsis-v ml-0\"\n              title={gettext('More Operations')}\n              data-toggle=\"dropdown\"\n              aria-expanded={this.state.isOpMenuOpen}\n            />\n            <div className={this.state.isOpMenuOpen ? '' : 'd-none'} onClick={this.toggleOpMenu}>\n              <div className=\"mobile-operation-menu-bg-layer\"></div>\n              <div className=\"mobile-operation-menu\">\n                {!item.is_expired && <DropdownItem className=\"mobile-menu-item\" onClick={this.viewLink}>{gettext('View')}</DropdownItem>}\n                <DropdownItem className=\"mobile-menu-item\" onClick={this.removeLink}>{gettext('Remove')}</DropdownItem>\n              </div>\n            </div>\n          </Dropdown>\n        </td>\n      </tr>\n    );\n    return (\n      <Fragment>\n        {this.props.isDesktop ? desktopItem : mobileItem}\n        {isLinkDialogOpen &&\n        <ShareAdminLink\n          link={item.link}\n          toggleDialog={this.toggleLinkDialog}\n        />\n        }\n      </Fragment>\n    );\n  }\n}\n\nItem.propTypes = itemPropTypes;\n\nconst propTypes = {\n  onShowSidePanel: PropTypes.func.isRequired,\n  onSearchedClick: PropTypes.func.isRequired\n};\n\nclass ShareAdminUploadLinks extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isCleanInvalidUploadLinksDialogOpen: false,\n      loading: true,\n      errorMsg: '',\n      items: []\n    };\n  }\n\n  componentDidMount() {\n    this.listUserUploadLinks();\n  }\n\n  listUserUploadLinks() {\n    seafileAPI.listUserUploadLinks().then((res) => {\n      let items = res.data.map(item => {\n        return new UploadLink(item);\n      });\n      this.setState({\n        loading: false,\n        items: items\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  onRemoveLink = (item) => {\n    seafileAPI.deleteUploadLink(item.token).then(() => {\n      let items = this.state.items.filter(uploadItem => {\n        return uploadItem.token !== item.token;\n      });\n      this.setState({items: items});\n      const message = gettext('Successfully deleted 1 item.');\n      toaster.success(message);\n    }).catch((error) => {\n      const errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  toggleCleanInvalidUploadLinksDialog = () => {\n    this.setState({isCleanInvalidUploadLinksDialogOpen: !this.state.isCleanInvalidUploadLinksDialogOpen});\n  }\n\n  cleanInvalidUploadLinks = () => {\n    seafileAPI.cleanInvalidUploadLinks().then(res => {\n      const newItems = this.state.items.filter(item => item.obj_id !== '').filter(item => !item.is_expired);\n      this.setState({items: newItems});\n      toaster.success(gettext('Successfully cleaned invalid upload links.'));\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  render() {\n    return (\n      <Fragment>\n        <TopToolbar\n          onShowSidePanel={this.props.onShowSidePanel}\n          onSearchedClick={this.props.onSearchedClick}\n        >\n          <Button className=\"operation-item d-none d-md-block\" onClick={this.toggleCleanInvalidUploadLinksDialog}>{gettext('Clean invalid upload links')}</Button>\n        </TopToolbar>\n        <div className=\"main-panel-center\">\n          <div className=\"cur-view-container\">\n            <div className=\"cur-view-path share-upload-nav\">\n              <ul className=\"nav\">\n                {canGenerateShareLink && (\n                  <li className=\"nav-item\"><Link to={`${siteRoot}share-admin-share-links/`} className=\"nav-link\">{gettext('Share Links')}</Link></li>\n                )}\n                <li className=\"nav-item\"><Link to={`${siteRoot}share-admin-upload-links/`} className=\"nav-link active\">{gettext('Upload Links')}</Link></li>\n              </ul>\n            </div>\n            <div className=\"cur-view-content\">\n              <Content\n                loading={this.state.loading}\n                errorMsg={this.state.errorMsg}\n                items={this.state.items}\n                onRemoveLink={this.onRemoveLink}\n              />\n            </div>\n          </div>\n        </div>\n        {this.state.isCleanInvalidUploadLinksDialogOpen &&\n        <CommonOperationConfirmationDialog\n          title={gettext('Clean invalid upload links')}\n          message={gettext('Are you sure you want to clean invalid upload links?')}\n          executeOperation={this.cleanInvalidUploadLinks}\n          confirmBtnText={gettext('Clean')}\n          toggleDialog={this.toggleCleanInvalidUploadLinksDialog}\n        />\n        }\n      </Fragment>\n    );\n  }\n}\n\nShareAdminUploadLinks.propTypes = propTypes;\n\nexport default ShareAdminUploadLinks;\n","import { Utils } from '../utils/utils';\n\nclass Repo {\n  constructor(object) {\n    this.repo_id = object.repo_id;\n    this.repo_name = object.repo_name;\n    this.permission = object.permission;\n    this.size_original = object.size;\n    this.size = Utils.bytesToSize(object.size);\n    this.owner_name = object.owner_name;\n    this.owner_email = object.owner_email;\n    this.owner_contact_email = object.owner_contact_email;\n    this.encrypted = object.encrypted;\n    this.last_modified = object.last_modified;\n    this.modifier_contact_email = object.modifier_contact_email;\n    this.modifier_email = object.modifier_email;\n    this.modifier_name = object.modifier_name;\n    this.type = object.type;\n    this.starred = object.starred;\n    this.monitored = object.monitored;\n    this.status = object.status;\n    this.storage_name = object.storage_name;\n    if (object.is_admin != undefined) {\n      this.is_admin = object.is_admin;\n    }\n  }\n}\n\nexport default Repo;\n","import React from 'react';\nimport { gettext } from '../utils/constants';\n\nfunction LibsMobileThead() {\n  return (\n    <thead>\n      <tr>\n        <th width=\"12%\"><span className=\"sr-only\">{gettext('Library Type')}</span></th>\n        <th width=\"80%\"></th>\n        <th width=\"8%\"><span className=\"sr-only\">{gettext('Actions')}</span></th>\n      </tr>\n    </thead>\n  );\n}\n\nexport default LibsMobileThead;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport '../css/icon.css';\n\nconst importAll = (requireContext) => {\n  requireContext.keys().forEach(requireContext);\n};\ntry {\n  importAll(require.context('../assets/icons', true, /\\.svg$/));\n} catch (error) {\n  // eslint-disable-next-line no-console\n  console.log(error);\n}\n\nconst Icon = (props) => {\n  const { className, symbol } = props;\n  const iconClass = `seafile-multicolor-icon seafile-multicolor-icon-${symbol} ${className || ''}`;\n  return (\n    <svg className={iconClass}>\n      <use xlinkHref={`#${symbol}`} />\n    </svg>\n  );\n};\n\nIcon.propTypes = {\n  symbol: PropTypes.string.isRequired,\n  className: PropTypes.string,\n};\n\nexport default Icon;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { UncontrolledTooltip } from 'reactstrap';\nimport Icon from '../components/icon';\nimport { gettext } from '../utils/constants';\n\nconst propTypes = {\n  repoID: PropTypes.string.isRequired\n};\n\nclass RepoMonitoredIcon extends React.Component {\n\n  render() {\n    const { repoID } = this.props;\n    return (\n      <Fragment>\n        <span id={`watching-${repoID}`} className=\"ml-1\">\n          <Icon symbol='monitor' />\n        </span>\n        <UncontrolledTooltip\n          placement=\"bottom\"\n          target={`#watching-${repoID}`}\n        >\n          {gettext('You are watching file changes of this library.')}\n        </UncontrolledTooltip>\n      </Fragment>\n    );\n  }\n}\n\nRepoMonitoredIcon.propTypes = propTypes;\n\nexport default RepoMonitoredIcon;\n","import React, { Component, Fragment } from 'react';\nimport { Dropdown, DropdownToggle, DropdownMenu, DropdownItem } from 'reactstrap';\nimport PropTypes from 'prop-types';\nimport moment from 'moment';\nimport cookie from 'react-cookies';\nimport { Link, navigate } from '@gatsbyjs/reach-router';\nimport { gettext, siteRoot, isPro } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../../components/toast';\nimport Repo from '../../models/repo';\nimport Loading from '../../components/loading';\nimport EmptyTip from '../../components/empty-tip';\nimport LibsMobileThead from '../../components/libs-mobile-thead';\nimport ModalPotal from '../../components/modal-portal';\nimport ShareDialog from '../../components/dialog/share-dialog';\nimport SortOptionsDialog from '../../components/dialog/sort-options';\nimport RepoMonitoredIcon from '../../components/repo-monitored-icon';\n\nclass Content extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isItemFreezed: false\n    };\n  }\n\n  freezeItem = (freezed) => {\n    this.setState({\n      isItemFreezed: freezed\n    });\n  }\n\n  sortByName = (e) => {\n    e.preventDefault();\n    const sortBy = 'name';\n    const sortOrder = this.props.sortOrder == 'asc' ? 'desc' : 'asc';\n    this.props.sortItems(sortBy, sortOrder);\n  }\n\n  sortByTime = (e) => {\n    e.preventDefault();\n    const sortBy = 'time';\n    const sortOrder = this.props.sortOrder == 'asc' ? 'desc' : 'asc';\n    this.props.sortItems(sortBy, sortOrder);\n  }\n\n  sortBySize = (e) => {\n    e.preventDefault();\n    const sortBy = 'size';\n    const sortOrder = this.props.sortOrder == 'asc' ? 'desc' : 'asc';\n    this.props.sortItems(sortBy, sortOrder);\n  }\n\n  render() {\n    const { loading, errorMsg, items, sortBy, sortOrder } = this.props;\n\n    const emptyTip = (\n      <EmptyTip>\n        <h2>{gettext('No shared libraries')}</h2>\n        <p>{gettext('No libraries have been shared directly with you. A shared library can be shared with full or restricted permission. If you need access to a library owned by another user, ask the user to share the library with you.')}</p>\n      </EmptyTip>\n    );\n\n    if (loading) {\n      return <Loading />;\n    } else if (errorMsg) {\n      return <p className=\"error text-center\">{errorMsg}</p>;\n    } else {\n      // sort\n      const sortByName = sortBy == 'name';\n      const sortByTime = sortBy == 'time';\n      const sortBySize = sortBy == 'size';\n      const sortIcon = sortOrder == 'asc' ? <span className=\"fas fa-caret-up\"></span> : <span className=\"fas fa-caret-down\"></span>;\n\n      const desktopThead = (\n        <thead>\n          <tr>\n            <th width=\"4%\"></th>\n            <th width=\"4%\"><span className=\"sr-only\">{gettext('Library Type')}</span></th>\n            <th width=\"34%\"><a className=\"d-block table-sort-op\" href=\"#\" onClick={this.sortByName}>{gettext('Name')} {sortByName && sortIcon}</a></th>\n            <th width=\"10%\"><span className=\"sr-only\">{gettext('Actions')}</span></th>\n            <th width=\"14%\"><a className=\"d-block table-sort-op\" href=\"#\" onClick={this.sortBySize}>{gettext('Size')} {sortBySize && sortIcon}</a></th>\n            <th width=\"18%\"><a className=\"d-block table-sort-op\" href=\"#\" onClick={this.sortByTime}>{gettext('Last Update')} {sortByTime && sortIcon}</a></th>\n            <th width=\"16%\">{gettext('Owner')}</th>\n          </tr>\n        </thead>\n      );\n\n      const isDesktop = Utils.isDesktop();\n      const table = (\n        <table className={isDesktop ? '' : 'table-thead-hidden'}>\n          {isDesktop ? desktopThead : <LibsMobileThead />}\n          <tbody>\n            {items.map((item, index) => {\n              return <Item\n                key={index}\n                data={item}\n                isDesktop={isDesktop}\n                isItemFreezed={this.state.isItemFreezed}\n                freezeItem={this.freezeItem}\n                onMonitorRepo={this.props.onMonitorRepo}\n              />;\n            })}\n          </tbody>\n        </table>\n      );\n\n      return items.length ? table : emptyTip;\n    }\n  }\n}\n\nContent.propTypes = {\n  loading: PropTypes.bool.isRequired,\n  errorMsg: PropTypes.string.isRequired,\n  items: PropTypes.array.isRequired,\n  sortBy: PropTypes.string.isRequired,\n  sortOrder: PropTypes.string.isRequired,\n  sortItems: PropTypes.func.isRequired,\n  onMonitorRepo: PropTypes.func.isRequired\n};\n\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      highlight: false,\n      showOpIcon: false,\n      unshared: false,\n      isShowSharedDialog: false,\n      isStarred: this.props.data.starred,\n      isOpMenuOpen: false\n    };\n  }\n\n  toggleOpMenu = () => {\n    this.setState({\n      isOpMenuOpen: !this.state.isOpMenuOpen\n    }, () => {\n      this.props.freezeItem(this.state.isOpMenuOpen);\n    });\n  }\n\n  handleMouseOver = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        highlight: true,\n        showOpIcon: true\n      });\n    }\n  }\n\n  handleMouseOut = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        highlight: false,\n        showOpIcon: false\n      });\n    }\n  }\n\n  share = (e) => {\n    e.preventDefault();\n    this.setState({isShowSharedDialog: true});\n  }\n\n  leaveShare = (e) => {\n    e.preventDefault();\n\n    const data = this.props.data;\n\n    let request;\n    if (data.owner_email.indexOf('@seafile_group') == -1) {\n      let options = {\n        'share_type': 'personal',\n        'from': data.owner_email\n      };\n      request = seafileAPI.leaveShareRepo(data.repo_id, options);\n    } else {\n      request = seafileAPI.leaveShareGroupOwnedRepo(data.repo_id);\n    }\n\n    request.then((res) => {\n      this.setState({unshared: true});\n      let message = gettext('Successfully unshared {name}').replace('{name}', data.repo_name);\n      toaster.success(message);\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      if (errMessage === gettext('Error')) {\n        errMessage = gettext('Failed to unshare {name}').replace('{name}', data.repo_name);\n      }\n      toaster(errMessage);\n    });\n  }\n\n  toggleShareDialog = () => {\n    this.setState({isShowSharedDialog: false});\n  }\n\n  onToggleStarRepo = (e) => {\n    e.preventDefault();\n    const repoName = this.props.data.repo_name;\n    if (this.state.isStarred) {\n      seafileAPI.unstarItem(this.props.data.repo_id, '/').then(() => {\n        this.setState({isStarred: !this.state.isStarred});\n        const msg = gettext('Successfully unstarred {library_name_placeholder}.')\n          .replace('{library_name_placeholder}', repoName);\n        toaster.success(msg);\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    } else {\n      seafileAPI.starItem(this.props.data.repo_id, '/').then(() => {\n        this.setState({isStarred: !this.state.isStarred});\n        const msg = gettext('Successfully starred {library_name_placeholder}.')\n          .replace('{library_name_placeholder}', repoName);\n        toaster.success(msg);\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    }\n  }\n\n  visitRepo = () => {\n    navigate(this.repoURL);\n  }\n\n  watchFileChanges = () => {\n    const { data: repo } = this.props;\n    seafileAPI.monitorRepo(repo.repo_id).then(() => {\n      this.props.onMonitorRepo(repo, true);\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  unwatchFileChanges = () => {\n    const { data: repo } = this.props;\n    seafileAPI.unMonitorRepo(repo.repo_id).then(() => {\n      this.props.onMonitorRepo(repo, false);\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  render() {\n    if (this.state.unshared) {\n      return null;\n    }\n\n    const data = this.props.data;\n\n    data.icon_url = Utils.getLibIconUrl(data);\n    data.icon_title = Utils.getLibIconTitle(data);\n\n    let iconVisibility = this.state.showOpIcon ? '' : ' invisible';\n    let shareIconClassName = 'op-icon sf2-icon-share repo-share-btn' + iconVisibility;\n    let leaveShareIconClassName = 'op-icon sf2-icon-x3' + iconVisibility;\n    let shareRepoUrl = this.repoURL = `${siteRoot}library/${data.repo_id}/${Utils.encodePath(data.repo_name)}/`;\n\n    // at present, only repo shared with 'r', 'rw' can be monitored.(Fri Feb 10 16:24:49 CST 2023)\n    const enableMonitorRepo = isPro && (data.permission == 'r' || data.permission == 'rw');\n\n    const desktopItem = (\n      <Fragment>\n        <tr className={this.state.highlight ? 'tr-highlight' : ''} onMouseOver={this.handleMouseOver} onMouseOut={this.handleMouseOut} onFocus={this.handleMouseOver}>\n          <td className=\"text-center\">\n            <a href=\"#\" role=\"button\" aria-label={this.state.isStarred ? gettext('Unstar') : gettext('Star')} onClick={this.onToggleStarRepo}>\n              <i className={`fa-star ${this.state.isStarred ? 'fas' : 'far star-empty'}`}></i>\n            </a>\n          </td>\n          <td><img src={data.icon_url} title={data.icon_title} alt={data.icon_title} width=\"24\" /></td>\n          <td>\n            <Fragment>\n              <Link to={shareRepoUrl}>{data.repo_name}</Link>\n              {data.monitored && <RepoMonitoredIcon repoID={data.repo_id} />}\n            </Fragment>\n          </td>\n          <td>\n            {(isPro && data.is_admin) &&\n              <a href=\"#\" className={shareIconClassName} title={gettext('Share')} role=\"button\" aria-label={gettext('Share')} onClick={this.share}></a>\n            }\n            <a href=\"#\" className={leaveShareIconClassName} title={gettext('Leave Share')} role=\"button\" aria-label={gettext('Leave Share')} onClick={this.leaveShare}></a>\n            {enableMonitorRepo &&\n            <Dropdown isOpen={this.state.isOpMenuOpen} toggle={this.toggleOpMenu}>\n              <DropdownToggle\n                tag=\"i\"\n                role=\"button\"\n                tabIndex=\"0\"\n                className={`sf-dropdown-toggle sf2-icon-caret-down${iconVisibility}`}\n                title={gettext('More Operations')}\n                aria-label={gettext('More Operations')}\n                data-toggle=\"dropdown\"\n                aria-expanded={this.state.isOpMenuOpen}\n              />\n              <DropdownMenu>\n                <DropdownItem onClick={data.monitored ? this.unwatchFileChanges : this.watchFileChanges}>{data.monitored ? gettext('Unwatch File Changes') : gettext('Watch File Changes')}</DropdownItem>\n              </DropdownMenu>\n            </Dropdown>\n            }\n          </td>\n          <td>{data.size}</td>\n          <td title={moment(data.last_modified).format('llll')}>{moment(data.last_modified).fromNow()}</td>\n          <td title={data.owner_contact_email}>{data.owner_name}</td>\n        </tr>\n        {this.state.isShowSharedDialog && (\n          <ModalPotal>\n            <ShareDialog\n              itemType={'library'}\n              itemName={data.repo_name}\n              itemPath={'/'}\n              repoID={data.repo_id}\n              repoEncrypted={data.encrypted}\n              enableDirPrivateShare={true}\n              userPerm={data.permission}\n              isAdmin={true}\n              toggleDialog={this.toggleShareDialog}\n            />\n          </ModalPotal>\n        )}\n      </Fragment>\n    );\n\n    const mobileItem = (\n      <Fragment>\n        <tr onMouseOver={this.handleMouseOver} onMouseOut={this.handleMouseOut}>\n          <td onClick={this.visitRepo}><img src={data.icon_url} title={data.icon_title} alt={data.icon_title} width=\"24\" /></td>\n          <td onClick={this.visitRepo}>\n            <Link to={shareRepoUrl}>{data.repo_name}</Link>\n            {data.monitored && <RepoMonitoredIcon repoID={data.repo_id} />}\n            <br />\n            <span className=\"item-meta-info\" title={data.owner_contact_email}>{data.owner_name}</span>\n            <span className=\"item-meta-info\">{data.size}</span>\n            <span className=\"item-meta-info\" title={moment(data.last_modified).format('llll')}>{moment(data.last_modified).fromNow()}</span>\n          </td>\n          <td>\n            <Dropdown isOpen={this.state.isOpMenuOpen} toggle={this.toggleOpMenu}>\n              <DropdownToggle\n                tag=\"i\"\n                className=\"sf-dropdown-toggle fa fa-ellipsis-v ml-0\"\n                title={gettext('More Operations')}\n                data-toggle=\"dropdown\"\n                aria-expanded={this.state.isOpMenuOpen}\n              />\n              <div className={this.state.isOpMenuOpen ? '' : 'd-none'} onClick={this.toggleOpMenu}>\n                <div className=\"mobile-operation-menu-bg-layer\"></div>\n                <div className=\"mobile-operation-menu\">\n                  <DropdownItem className=\"mobile-menu-item\" onClick={this.onToggleStarRepo}>{this.state.isStarred ? gettext('Unstar') : gettext('Star')}</DropdownItem>\n                  {(isPro && data.is_admin) && <DropdownItem className=\"mobile-menu-item\" onClick={this.share}>{gettext('Share')}</DropdownItem>}\n                  <DropdownItem className=\"mobile-menu-item\" onClick={this.leaveShare}>{gettext('Leave Share')}</DropdownItem>\n                  {enableMonitorRepo && <DropdownItem className=\"mobile-menu-item\" onClick={data.monitored ? this.unwatchFileChanges : this.watchFileChanges}>{data.monitored ? gettext('Unwatch File Changes') : gettext('Watch File Changes')}</DropdownItem>}\n                </div>\n              </div>\n            </Dropdown>\n          </td>\n        </tr>\n        {this.state.isShowSharedDialog && (\n          <ModalPotal>\n            <ShareDialog\n              itemType={'library'}\n              itemName={data.repo_name}\n              itemPath={'/'}\n              repoID={data.repo_id}\n              repoEncrypted={data.encrypted}\n              enableDirPrivateShare={true}\n              userPerm={data.permission}\n              isAdmin={true}\n              toggleDialog={this.toggleShareDialog}\n            />\n          </ModalPotal>\n        )}\n      </Fragment>\n    );\n\n    return this.props.isDesktop ? desktopItem : mobileItem;\n  }\n}\n\nItem.propTypes = {\n  isDesktop: PropTypes.bool.isRequired,\n  data: PropTypes.object.isRequired,\n  isItemFreezed: PropTypes.bool.isRequired,\n  freezeItem: PropTypes.func.isRequired,\n  onMonitorRepo: PropTypes.func.isRequired\n};\n\nclass SharedLibraries extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      items: [],\n      sortBy: cookie.load('seafile-repo-dir-sort-by') || 'name', // 'name' or 'time' or 'size'\n      sortOrder: cookie.load('seafile-repo-dir-sort-order') || 'asc', // 'asc' or 'desc'\n      isSortOptionsDialogOpen: false\n    };\n  }\n\n  componentDidMount() {\n    seafileAPI.listRepos({type:'shared'}).then((res) => {\n      let repoList = res.data.repos.map((item) => {\n        return new Repo(item);\n      });\n      this.setState({\n        loading: false,\n        items: Utils.sortRepos(repoList, this.state.sortBy, this.state.sortOrder)\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  sortItems = (sortBy, sortOrder) => {\n    cookie.save('seafile-repo-dir-sort-by', sortBy);\n    cookie.save('seafile-repo-dir-sort-order', sortOrder);\n    this.setState({\n      sortBy: sortBy,\n      sortOrder: sortOrder,\n      items: Utils.sortRepos(this.state.items, sortBy, sortOrder)\n    });\n  }\n\n  toggleSortOptionsDialog = () => {\n    this.setState({\n      isSortOptionsDialogOpen: !this.state.isSortOptionsDialogOpen\n    });\n  }\n\n  onMonitorRepo = (repo, monitored) => {\n    let items = this.state.items.map(item => {\n      if (item.repo_id === repo.repo_id) {\n        item.monitored = monitored;\n      }\n      return item;\n    });\n    this.setState({items: items});\n  }\n\n  render() {\n    return (\n      <Fragment>\n        <div className=\"main-panel-center\">\n          <div className=\"cur-view-container\">\n            <div className=\"cur-view-path\">\n              <h3 className=\"sf-heading m-0\">{gettext('Shared with me')}</h3>\n              {(!Utils.isDesktop() && this.state.items.length > 0) && <span className=\"sf3-font sf3-font-sort action-icon\" onClick={this.toggleSortOptionsDialog}></span>}\n            </div>\n            <div className=\"cur-view-content\">\n              <Content\n                loading={this.state.loading}\n                errorMsg={this.state.errorMsg}\n                items={this.state.items}\n                sortBy={this.state.sortBy}\n                sortOrder={this.state.sortOrder}\n                sortItems={this.sortItems}\n                onMonitorRepo={this.onMonitorRepo}\n              />\n            </div>\n          </div>\n        </div>\n        {this.state.isSortOptionsDialogOpen &&\n        <SortOptionsDialog\n          toggleDialog={this.toggleSortOptionsDialog}\n          sortBy={this.state.sortBy}\n          sortOrder={this.state.sortOrder}\n          sortItems={this.sortItems}\n        />\n        }\n      </Fragment>\n    );\n  }\n}\n\nexport default SharedLibraries;\n","import React, { Component, Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport moment from 'moment';\nimport { Link } from '@gatsbyjs/reach-router';\nimport { gettext, siteRoot } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../../components/toast';\nimport Loading from '../../components/loading';\nimport EmptyTip from '../../components/empty-tip';\n\nclass Content extends Component {\n\n  render() {\n    const { loading, errorMsg, items } = this.props;\n\n    const emptyTip = (\n      <EmptyTip>\n        <h2>{gettext('No libraries have been shared with you')}</h2>\n        <p>{gettext('No libraries have been shared with you from other servers.')}</p>\n      </EmptyTip>\n    );\n\n    if (loading) {\n      return <Loading />;\n    } else if (errorMsg) {\n      return <p className=\"error text-center\">{errorMsg}</p>;\n    } else {\n      const table = (\n        <table>\n          <thead>\n            <tr>\n              <th width=\"4%\"></th>\n              <th width=\"20%\">{gettext('Name')}</th>\n              <th width=\"20%\">{gettext('Shared by')}</th>\n              <th width=\"26%\">{gettext('At server')}</th>\n              <th width=\"20%\">{gettext('Time')}</th>\n              <th width=\"10%\">{/* operations */}</th>\n            </tr>\n          </thead>\n          <tbody>\n            {items.map((item, index) => {\n              return <Item\n                key={index}\n                item={item}\n                leaveShare={this.props.leaveShare}\n              />;\n            })}\n          </tbody>\n        </table>\n      );\n\n      return items.length ? table : emptyTip;\n    }\n  }\n}\n\nContent.propTypes = {\n  loading: PropTypes.bool.isRequired,\n  errorMsg: PropTypes.string.isRequired,\n  items: PropTypes.array.isRequired,\n};\n\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOpIconShown: false\n    };\n  }\n\n  handleMouseOver = () => {\n    this.setState({\n      isOpIconShown: true\n    });\n  }\n\n  handleMouseOut = () => {\n    this.setState({\n      isOpIconShown: false\n    });\n  }\n\n  leaveShare = (e) => {\n    e.preventDefault();\n    this.props.leaveShare(this.props.item);\n  }\n\n  render() {\n    const item = this.props.item;\n    const { isOpIconShown } = this.state;\n\n    item.icon_url = Utils.getLibIconUrl(item);\n    item.icon_title = Utils.getLibIconTitle(item);\n\n    let shareRepoUrl =`${siteRoot}remote-library/${this.props.item.provider_id}/${this.props.item.repo_id}/${Utils.encodePath(this.props.item.repo_name)}/`;\n    return (\n      <tr onMouseOver={this.handleMouseOver} onMouseOut={this.handleMouseOut} onFocus={this.handleMouseOver}>\n        <td><img src={item.icon_url} title={item.icon_title} alt={item.icon_title} width=\"24\" /></td>\n        <td><Link to={shareRepoUrl}>{item.repo_name}</Link></td>\n        <td>{item.from_user}</td>\n        <td>{item.from_server_url}</td>\n        <td title={moment(item.last_modified).format('llll')}>{moment(item.ctime).fromNow()}</td>\n        <td>\n          <a href=\"#\" role=\"button\" className={`action-icon sf2-icon-x3 ${isOpIconShown ? '' : 'invisible'}`} title={gettext('Leave Share')} aria-label={gettext('Leave Share')} onClick={this.leaveShare}></a>\n        </td>\n      </tr>\n    );\n  }\n}\n\nItem.propTypes = {\n  item: PropTypes.object.isRequired\n};\n\nclass SharedWithOCM extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      items: []\n    };\n  }\n\n  componentDidMount() {\n    seafileAPI.listOCMSharesReceived().then((res) => {\n      this.setState({\n        loading: false,\n        items: res.data.ocm_share_received_list\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  leaveShare = (item) => {\n    const { id, repo_name } = item;\n    seafileAPI.deleteOCMShareReceived(id).then((res) => {\n      let items = this.state.items.filter(item => {\n        return item.id != id;\n      });\n      this.setState({items: items});\n      toaster.success(gettext('Successfully unshared {name}').replace('{name}', repo_name));\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  render() {\n    return (\n      <Fragment>\n        <div className=\"main-panel-center\">\n          <div className=\"cur-view-container\">\n            <div className=\"cur-view-path\">\n              <h3 className=\"sf-heading m-0\">{gettext('Shared from other servers')}</h3>\n            </div>\n            <div className=\"cur-view-content\">\n              <Content\n                loading={this.state.loading}\n                errorMsg={this.state.errorMsg}\n                items={this.state.items}\n                leaveShare={this.leaveShare}\n              />\n            </div>\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nexport default SharedWithOCM;\n","import React, { Component, Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport moment from 'moment';\nimport { Link } from '@gatsbyjs/reach-router';\nimport { gettext, siteRoot } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../../components/toast';\nimport Loading from '../../components/loading';\nimport EmptyTip from '../../components/empty-tip';\n\nclass OCMViaWebdav extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      shareID: '',\n      path: '',\n      items: [],\n      errorMsg: '',\n    };\n  }\n\n  componentDidMount() {\n    this.getAllReceivedShares()\n  }\n\n  getAllReceivedShares = () => {\n    const url = seafileAPI.server + '/ocm-via-webdav/received-shares/';\n    seafileAPI.req.get(url).then((res) => {\n      this.setState({\n        loading: false,\n        shareID: '',\n        path: '',\n        items: res.data.received_share_list,\n      });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  leaveShare = (item) => {\n    const { id, name } = item;\n    const url = seafileAPI.server + '/ocm-via-webdav/received-shares/' + id + '/';\n    seafileAPI.req.delete(url).then((res) => {\n      let items = this.state.items.filter(item => {\n        return item.id != id;\n      });\n      this.setState({items: items});\n      toaster.success(gettext('Successfully unshared {name}').replace('{name}', name));\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  openFolder = (item) => {\n\n    this.setState({\n      loading: true,\n    });\n\n    const url = seafileAPI.server + '/ocm-via-webdav/received-shares/' + item.id + '/?path=' + item.path;\n    seafileAPI.req.get(url).then((res) => {\n      this.setState({\n        loading: false,\n        shareID: item.id,\n        path: res.data.parent_dir,\n        items: res.data.received_share_list,\n      });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  onPathClick = (path) => {\n\n    this.setState({\n      loading: true,\n    });\n\n    const url = seafileAPI.server + '/ocm-via-webdav/received-shares/' + this.state.shareID + '/?path=' + path;\n    seafileAPI.req.get(url).then((res) => {\n      this.setState({\n        loading: false,\n        items: res.data.received_share_list,\n        path: res.data.parent_dir,\n      });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  render() {\n    return (\n      <Fragment>\n        <div className=\"main-panel-center\">\n          <div className=\"cur-view-container\">\n            <div className=\"cur-view-path align-items-center\">\n              <DirPath\n                shareID={this.state.shareID}\n                currentPath={this.state.path}\n                onPathClick={this.onPathClick}\n                getAllReceivedShares={this.getAllReceivedShares}\n              />\n            </div>\n            <div className=\"cur-view-content\">\n              <Content\n                loading={this.state.loading}\n                errorMsg={this.state.errorMsg}\n                items={this.state.items}\n                path={this.state.path}\n                leaveShare={this.leaveShare}\n                openFolder={this.openFolder}\n              />\n            </div>\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\n\nclass Content extends Component {\n\n  static propTypes = {\n    loading: PropTypes.bool.isRequired,\n    errorMsg: PropTypes.string.isRequired,\n    items: PropTypes.array.isRequired,\n    path: PropTypes.string.isRequired,\n  }\n\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    const { loading, errorMsg, items, path } = this.props;\n    const emptyTip = (\n      <EmptyTip>\n        <h2>{gettext('No libraries have been shared with you')}</h2>\n        <p>{gettext('No libraries have been shared with you from other servers.')}</p>\n      </EmptyTip>\n    );\n\n    if (loading) {\n      return <Loading />;\n    } else if (errorMsg) {\n      return <p className=\"error text-center\">{errorMsg}</p>;\n    } else {\n      const table = (\n        <table>\n          <thead>\n            <tr>\n              <th width=\"5%\"></th>\n              <th width=\"30%\">{gettext('Name')}</th>\n              <th width=\"35%\">{gettext('Shared By')}</th>\n              <th width=\"20%\">{gettext('Time')}</th>\n              <th width=\"5%\">{/* operations */}</th>\n              <th width=\"5%\">{/* operations */}</th>\n            </tr>\n          </thead>\n          <tbody>\n            {items.map((item, index) => {\n              return <Item\n                key={index}\n                item={item}\n                path={path}\n                leaveShare={this.props.leaveShare}\n                openFolder={this.props.openFolder}\n              />;\n            })}\n          </tbody>\n        </table>\n      );\n\n      return items.length ? table : emptyTip;\n    }\n  }\n}\n\nclass Item extends Component {\n\n  static propTypes = {\n    item: PropTypes.object.isRequired\n  }\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOpIconShown: false\n    };\n  }\n\n  handleMouseOver = () => {\n    this.setState({\n      isOpIconShown: true\n    });\n  }\n\n  handleMouseOut = () => {\n    this.setState({\n      isOpIconShown: false\n    });\n  }\n\n  downloadFile = () => {\n    let downloadUrl = siteRoot + 'ocm-via-webdav/download-received-file/?share_id=' + this.props.item.id + '&path=' + this.props.item.path;\n    window.location.href = downloadUrl;\n  }\n\n  leaveShare = (e) => {\n    e.preventDefault();\n    this.props.leaveShare(this.props.item);\n  }\n\n  openFolder = (e) => {\n    e.preventDefault();\n    this.props.openFolder(this.props.item);\n  }\n\n  render() {\n    const item = this.props.item;\n    const { isOpIconShown } = this.state;\n\n    if (item.is_dir) {\n      item.icon_url = Utils.getFolderIconUrl();\n    } else {\n      item.icon_url = Utils.getFileIconUrl(item.name);\n    }\n    return (\n      <tr onMouseOver={this.handleMouseOver} onMouseOut={this.handleMouseOut}>\n        <td><img src={item.icon_url} width=\"24\" /></td>\n        <td>\n          {item.is_dir ? <a href=\"#\" onClick={this.openFolder}>{item.name}</a> : item.name}\n\t</td>\n        <td>{item.shared_by}</td>\n        <td title={moment(item.last_modified).format('llll')}>{moment(item.ctime).fromNow()}</td>\n        <td>{item.is_dir ? \"\" : <a href=\"#\" className={`action-icon sf2-icon-download ${isOpIconShown ? '' : 'invisible'}`} title={gettext('Download')} onClick={this.downloadFile}></a>}\n        </td>\n        <td>{this.props.path ? \"\" : <a href=\"#\" className={`action-icon sf2-icon-x3 ${isOpIconShown ? '' : 'invisible'}`} title={gettext('Leave Share')} onClick={this.leaveShare}></a>}\n        </td>\n      </tr>\n    );\n  }\n}\n\nclass DirPath extends React.Component {\n\n  static propTypes = {\n    currentPath: PropTypes.string.isRequired,\n    onPathClick: PropTypes.func.isRequired,\n    getAllReceivedShares: PropTypes.func.isRequired,\n  }\n\n  constructor(props) {\n    super(props);\n    this.state = {\n    };\n  }\n\n  onPathClick = (e) => {\n    let path = Utils.getEventData(e, 'path');\n    this.props.onPathClick(path);\n  }\n\n  turnPathToLink = (path) => {\n    path = path.slice(1, path.length - 1);\n    let pathList = path.split('/');\n    let nodePath = '';\n    let pathElem = pathList.map((item, index) => {\n      if (index === (pathList.length - 1)) {\n        return (\n          <Fragment key={index}>\n            <span className=\"path-split\">/</span>\n            <span className=\"path-file-name\">{item}</span>\n          </Fragment>\n        );\n      } else {\n\tif (index === 0) {\n          nodePath = '/';\n\t} else {\n          nodePath += item + '/';\n\t}\n        return (\n          <Fragment key={index} >\n            <span className=\"path-split\">/</span>\n            <a className=\"path-link\" data-path={nodePath} onClick={this.onPathClick}>{item}</a>\n          </Fragment>\n        );\n      }\n    });\n    return pathElem;\n  }\n\n  render() {\n    let pathElem = this.turnPathToLink(this.props.currentPath);\n    return (\n      <div className=\"path-container\">\n        <a href=\"#\" onClick={this.props.getAllReceivedShares}>{gettext('All')}</a>\n        {pathElem}\n      </div>\n    );\n  }\n}\n\nexport default OCMViaWebdav;\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport Account from '../../components/common/account';\n\nconst propTypes = {\n  children: PropTypes.object\n};\n\nclass MainPanelTopbar extends Component {\n\n  render() {\n    return (\n      <div className={`main-panel-north ${this.props.children ? 'border-left-show' : ''}`}>\n        <div className=\"cur-view-toolbar\">\n          <span className=\"sf2-icon-menu side-nav-toggle hidden-md-up d-md-none\" title=\"Side Nav Menu\"></span>\n          <div className=\"operation\">\n            {this.props.children}\n          </div>\n        </div>\n        <div className=\"common-toolbar\">\n          <Account isAdminPanel={false} />\n        </div>\n      </div>\n    );\n  }\n}\n\nMainPanelTopbar.propTypes = propTypes;\n\nexport default MainPanelTopbar;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Link } from '@gatsbyjs/reach-router';\nimport { siteRoot, gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\n\nconst propTypes = {\n  repoName: PropTypes.string.isRequired,\n  currentPath: PropTypes.string.isRequired,\n  onPathClick: PropTypes.func.isRequired,\n  onTabNavClick: PropTypes.func.isRequired,\n  repoID: PropTypes.string.isRequired,\n};\n\nclass DirPath extends React.Component {\n\n  onPathClick = (e) => {\n    let path = Utils.getEventData(e, 'path');\n    this.props.onPathClick(path);\n  }\n\n  turnPathToLink = (path) => {\n    path = path[path.length - 1] === '/' ? path.slice(0, path.length - 1) : path;\n    let pathList = path.split('/');\n    let nodePath = '';\n    let pathElem = pathList.map((item, index) => {\n      if (item === '') {\n        return;\n      }\n      if (index === (pathList.length - 1)) {\n        return (\n          <Fragment key={index}>\n            <span className=\"path-split\">/</span>\n            <span className=\"path-file-name\">{item}</span>\n          </Fragment>\n        );\n      } else {\n        nodePath += '/' + item;\n        return (\n          <Fragment key={index} >\n            <span className=\"path-split\">/</span>\n            <a className=\"path-link\" data-path={nodePath} onClick={this.onPathClick}>{item}</a>\n          </Fragment>\n        );\n      }\n    });\n    return pathElem;\n  }\n\n  render() {\n    let { currentPath, repoName } = this.props;\n    let pathElem = this.turnPathToLink(currentPath);\n\n    return (\n      <div className=\"path-container\">\n        <Link to={siteRoot + 'shared-with-ocm/'} className=\"normal\" onClick={(e) => this.props.onTabNavClick('shared-with-ocm')}>{gettext('All')}</Link>\n        <span className=\"path-split\">/</span>\n        {(currentPath === '/' || currentPath === '') ?\n          <span className=\"path-repo-name\">{repoName}</span>:\n          <a className=\"path-link\" data-path=\"/\" onClick={this.onPathClick}>{repoName}</a>\n        }\n        {pathElem}\n      </div>\n    );\n  }\n}\n\nDirPath.propTypes = propTypes;\n\nexport default DirPath;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Link } from '@gatsbyjs/reach-router';\nimport moment from 'moment';\nimport { gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport Loading from '../../components/loading';\n\nclass DirentItem extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOpIconShown: false\n    };\n  }\n\n  handleMouseOver = () => {\n    this.setState({\n      isOpIconShown: true\n    });\n  }\n\n  handleMouseOut = () => {\n    this.setState({\n      isOpIconShown: false\n    });\n  }\n\n  openFolder = () => {\n    this.props.openFolder(this.props.dirent);\n  }\n\n  downloadDirent = (e) => {\n    e.preventDefault();\n    this.props.downloadDirent(this.props.dirent);\n  }\n\n  render () {\n    let { isOpIconShown } = this.state;\n    let { dirent } = this.props;\n    let iconUrl = Utils.getDirentIcon(dirent);\n\n    return (\n      <Fragment>\n        <tr onMouseEnter={this.handleMouseOver} onMouseLeave={this.handleMouseOut}>\n          <td className=\"text-center\"><img src={iconUrl} width=\"24\" alt='' /></td>\n          <td>\n            {dirent.is_file ?\n              dirent.name :\n              <Link to=\"#\" onClick={this.openFolder}>{dirent.name}</Link>\n            }\n          </td>\n          <td>\n            {isOpIconShown && dirent.is_file &&\n            <a href=\"#\" className=\"op-icon sf2-icon-download\" title={gettext('Download')} onClick={this.downloadDirent}></a>\n            }\n          </td>\n          <td>{Utils.bytesToSize(dirent.size)}</td>\n          <td>{moment(dirent.mtime).fromNow()}</td>\n        </tr>\n      </Fragment>\n    );\n  }\n}\n\n\nconst propTypes = {\n  direntList: PropTypes.array.isRequired\n};\n\nclass DirContent extends React.Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    let { loading, errorMsg, direntList } = this.props;\n\n    if (loading) {\n      return <Loading />;\n    }\n\n    if (errorMsg) {\n      return <p className=\"error text-center mt-4\">{errorMsg}</p>;\n    }\n\n    return (\n      <Fragment>\n        <table className=\"table-hover\">\n          <thead>\n            <tr>\n              <th width=\"5%\">{/*icon*/}</th>\n              <th width=\"55%\">{gettext('Name')}</th>\n              <th width=\"10%\">{/*operation*/}</th>\n              <th width=\"15%\">{gettext('Size')}</th>\n              <th width=\"15%\">{gettext('Last Update')}</th>\n            </tr>\n          </thead>\n          <tbody>\n            {direntList.map((dirent, index) => {\n              return <DirentItem\n                key={index}\n                dirent={dirent}\n                openFolder={this.props.openFolder}\n                deleteDirent={this.props.deleteDirent}\n                downloadDirent={this.props.downloadDirent}\n                fromSystemRepo={this.props.fromSystemRepo}\n              />;\n            })}\n          </tbody>\n        </table>\n      </Fragment>\n    );\n  }\n}\n\nDirContent.propTypes = propTypes;\n\nexport default DirContent;\n","import React, { Component, Fragment } from 'react';\nimport { Button } from 'reactstrap';\nimport axios from 'axios';\nimport { Utils } from '../../utils/utils';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { loginUrl, siteRoot, gettext } from '../../utils/constants';\nimport toaster from '../../components/toast';\nimport MainPanelTopbar from './remote-dir-topbar';\nimport DirPathBar from './remote-dir-path';\nimport DirContent from './remote-dir-content';\n\nclass Dirent {\n  constructor(obj) {\n    this.name = obj.name;\n    this.mtime = obj.mtime;\n    this.size = obj.size;\n    this.is_file = obj.type === 'file';\n  }\n\n  isDir() {\n    return !this.is_file;\n  }\n}\n\nclass DirView extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      repoName: '',\n      path: '',\n      direntList: [],\n      isNewFolderDialogOpen: false,\n      userPerm: '',\n    };\n    this.fileInput = React.createRef();\n  }\n\n  componentDidMount () {\n    this.loadDirentList('/');\n  }\n\n  onPathClick = (path) => {\n    this.loadDirentList(path);\n  }\n\n  openFolder = (dirent) => {\n    let direntPath = Utils.joinPath(this.state.path, dirent.name);\n    if (!dirent.is_file) {\n      this.loadDirentList(direntPath);\n    }\n  }\n\n  loadDirentList = (path) => {\n    const { providerID, repoID } = this.props;\n    seafileAPI.listOCMRepoDir(providerID, repoID, path).then(res => {\n      const { repo_name: repoName, dirent_list, user_perm } = res.data;\n      let direntList = [];\n      dirent_list.forEach(item => {\n        let dirent = new Dirent(item);\n        direntList.push(dirent);\n      });\n      this.setState({\n        loading: false,\n        repoName: repoName,\n        direntList: direntList,\n        path: path,\n        userPerm: user_perm,\n      }, () => {\n        let url =`${siteRoot}remote-library/${providerID}/${repoID}/${repoName}${Utils.encodePath(path)}`;\n        window.history.replaceState({url: url, path: path}, path, url);\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  downloadDirent = (dirent) => {\n    let path = Utils.joinPath(this.state.path, dirent.name);\n    seafileAPI.getOCMRepoDownloadURL(this.props.providerID, this.props.repoID, path).then(res => {\n      location.href = res.data;\n    }).catch((err) => {\n      let errMessage = Utils.getErrorMsg(err);\n      toaster.danger(errMessage);\n    });\n  }\n\n  openFileInput = () => {\n    this.fileInput.current.click();\n  }\n\n  onFileInputChange = () => {\n    if (!this.fileInput.current.files.length) {\n      return;\n    }\n    const file = this.fileInput.current.files[0];\n\n    let { path } = this.state;\n    let { providerID, repoID } = this.props;\n    seafileAPI.getOCMRepoUploadURL(providerID, repoID, path).then(res => {\n      let formData = new FormData();\n      formData.append('parent_dir', path);\n      formData.append('file', file);\n      axios.post(res.data, formData).then(res => {\n        const fileObj = res.data[0];\n        let newDirent = new Dirent({\n          'type': 'file',\n          'name': fileObj.name,\n          'size': fileObj.size,\n          'mtime': (new Date()).getTime()\n        });\n        let direntList = this.state.direntList;\n        const dirs = direntList.filter(item => { return !item.is_file; });\n        direntList.splice(dirs.length, 0, newDirent);\n        this.setState({\n          direntList: direntList\n        });\n      });\n    }).catch((err) => {\n      let errMessage = Utils.getErrorMsg(err);\n      toaster.danger(errMessage);\n    });\n  }\n\n  render() {\n    const { loading, errorMsg,\n      repoName, direntList, path, userPerm } = this.state;\n    const { repoID } = this.props;\n\n    return (\n      <Fragment>\n        <MainPanelTopbar>\n          <Fragment>\n            <input className=\"d-none\" type=\"file\" onChange={this.onFileInputChange} ref={this.fileInput} />\n            {userPerm === 'rw' &&\n              <Button className=\"operation-item\" onClick={this.openFileInput}>{gettext('Upload')}</Button>\n            }\n          </Fragment>\n        </MainPanelTopbar>\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <div className=\"cur-view-path align-items-center\">\n              <DirPathBar\n                repoID={repoID}\n                repoName={repoName}\n                currentPath={path}\n                onPathClick={this.onPathClick}\n                onTabNavClick={this.props.onTabNavClick}\n              />\n            </div>\n            <div className=\"cur-view-content\">\n              <DirContent\n                loading={loading}\n                errorMsg={errorMsg}\n                direntList={direntList}\n                openFolder={this.openFolder}\n                deleteDirent={this.deleteDirent}\n                downloadDirent={this.downloadDirent}\n              />\n            </div>\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nexport default DirView;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport Select from 'react-select';\nimport { Button, Modal, ModalHeader, Input, ModalBody, ModalFooter, Form, FormGroup, Label, Alert } from 'reactstrap';\nimport { gettext, enableEncryptedLibrary, repoPasswordMinLength, storages, libraryTemplates } from '../../utils/constants';\n\nconst propTypes = {\n  libraryType: PropTypes.string.isRequired,\n  onCreateRepo: PropTypes.func.isRequired,\n  onCreateToggle: PropTypes.func.isRequired,\n};\n\nclass CreateRepoDialog extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      repoName: '',\n      disabled: true,\n      encrypt: false,\n      password1: '',\n      password2: '',\n      errMessage: '',\n      permission: 'rw',\n      storage_id: storages.length ? storages[0].id : '',\n      library_template: libraryTemplates.length ? libraryTemplates[0] : '',\n      isSubmitBtnActive: false,\n    };\n  }\n\n  handleRepoNameChange = (e) => {\n    if (!e.target.value.trim()) {\n      this.setState({isSubmitBtnActive: false});\n    } else {\n      this.setState({isSubmitBtnActive: true});\n    }\n\n    this.setState({repoName: e.target.value});\n  }\n\n  handlePassword1Change = (e) => {\n    this.setState({password1: e.target.value});\n  }\n\n  handlePassword2Change = (e) => {\n    this.setState({password2: e.target.value});\n  }\n\n  handleSubmit = () => {\n    let isValid = this.validateInputParams();\n    if (isValid) {\n      let repoData = this.prepareRepoData();\n      if (this.props.libraryType === 'department') {\n        this.props.onCreateRepo(repoData, 'department');\n        return;\n      }\n      this.props.onCreateRepo(repoData);\n    }\n  }\n\n  handleKeyPress = (e) => {\n    if (e.key === 'Enter') {\n      this.handleSubmit();\n      e.preventDefault();\n    }\n  }\n\n  toggle = () => {\n    this.props.onCreateToggle();\n  }\n\n  validateInputParams() {\n    let errMessage = '';\n    let repoName = this.state.repoName.trim();\n    if (!repoName.length) {\n      errMessage = gettext('Name is required');\n      this.setState({errMessage: errMessage});\n      return false;\n    }\n    if (repoName.indexOf('/') > -1) {\n      errMessage = gettext('Name should not include \\'/\\'.');\n      this.setState({errMessage: errMessage});\n      return false;\n    }\n    if (this.state.encrypt) {\n      let password1 = this.state.password1.trim();\n      let password2 = this.state.password2.trim();\n      if (!password1.length) {\n        errMessage = gettext('Please enter password');\n        this.setState({errMessage: errMessage});\n        return false;\n      }\n      if (!password2.length) {\n        errMessage = gettext('Please enter the password again');\n        this.setState({errMessage: errMessage});\n        return false;\n      }\n      if (password1.length < repoPasswordMinLength) {\n        errMessage = gettext('Password is too short');\n        this.setState({errMessage: errMessage});\n        return false;\n      }\n      if (password1 !== password2) {\n        errMessage = gettext('Passwords don\\'t match');\n        this.setState({errMessage: errMessage});\n        return false;\n      }\n    }\n    return true;\n  }\n\n  onPermissionChange = (e) => {\n    let permission = e.target.value;\n    this.setState({permission: permission});\n  }\n\n  handleStorageInputChange = (selectedItem) => {\n    this.setState({storage_id: selectedItem.value});\n  }\n\n  handlelibraryTemplatesInputChange = (selectedItem) => {\n    this.setState({library_template: selectedItem.value});\n  }\n\n  onEncrypted = (e) => {\n    let isChecked = e.target.checked;\n    this.setState({\n      encrypt: isChecked,\n      disabled: !isChecked\n    });\n  }\n\n  prepareRepoData = () => {\n    let libraryType = this.props.libraryType;\n\n    let repoName = this.state.repoName.trim();\n    let password = this.state.encrypt ? this.state.password1 : '';\n    let permission = this.state.permission;\n\n    let repo = null;\n    if (libraryType === 'mine' || libraryType === 'public') {\n      repo = {\n        name: repoName,\n        passwd: password\n      };\n    }\n    if (libraryType === 'group') {\n      repo = {\n        repo_name: repoName,\n        password: password,\n        permission: permission,\n      };\n    }\n    if (libraryType === 'department') {\n      repo = {\n        repo_name: repoName,\n        passwd: password,\n      };\n    }\n\n    const storage_id = this.state.storage_id;\n    if (storage_id) {\n      repo.storage_id = storage_id;\n    }\n\n    const library_template = this.state.library_template;\n    if (library_template) {\n      repo.library_template = library_template;\n    }\n\n    return repo;\n  }\n\n  render() {\n    return (\n      <Modal isOpen={true} toggle={this.toggle} autoFocus={false}>\n        <ModalHeader toggle={this.toggle}>{gettext('New Library')}</ModalHeader>\n        <ModalBody>\n          <Form>\n            <FormGroup>\n              <Label for=\"repoName\">{gettext('Name')}</Label>\n              <Input\n                id=\"repoName\"\n                onKeyPress={this.handleKeyPress}\n                value={this.state.repoName}\n                onChange={this.handleRepoNameChange}\n                autoFocus={true}\n              />\n            </FormGroup>\n\n            {libraryTemplates.length > 0 && (\n              <FormGroup>\n                <Label for=\"library-template\">{gettext('Template')}</Label>\n                <Select\n                  id=\"library-template\"\n                  defaultValue={{value: libraryTemplates[0], label: libraryTemplates[0]}}\n                  options={libraryTemplates.map((item, index) => { return {value: item, label: item}; })}\n                  onChange={this.handlelibraryTemplatesInputChange}\n                /> \n              </FormGroup>\n            )}\n\n            {storages.length > 0 && (\n              <FormGroup>\n                <Label for=\"storage-backend\">{gettext('Storage Backend')}</Label>\n                <Select\n                  id=\"storage-backend\"\n                  defaultValue={{value: storages[0].id, label: storages[0].name}}\n                  options={storages.map((item, index) => { return {value: item.id, label: item.name}; })}\n                  onChange={this.handleStorageInputChange}\n                />\n              </FormGroup>\n            )}\n\n            {this.props.libraryType === 'group' && (\n              <FormGroup>\n                <Label for=\"exampleSelect\">{gettext('Permission')}</Label>\n                <Input type=\"select\" name=\"select\" id=\"exampleSelect\" onChange={this.onPermissionChange} value={this.state.permission}>\n                  <option value='rw'>{gettext('Read-Write')}</option>\n                  <option value='r'>{gettext('Read-Only')}</option>\n                </Input>\n              </FormGroup>\n            )}\n            {enableEncryptedLibrary &&\n              <div>\n                <FormGroup check>\n                  <Input type=\"checkbox\" id=\"encrypt\" onChange={this.onEncrypted} />\n                  <Label for=\"encrypt\">{gettext('Encrypt')}</Label>\n                </FormGroup>\n                {!this.state.disabled &&\n                  <FormGroup>\n                    {/* todo translate */}\n                    <Label for=\"passwd1\">{gettext('Password')}</Label><span className=\"tip\">{' '}{gettext('(at least {placeholder} characters)').replace('{placeholder}', repoPasswordMinLength)}</span>\n                    <Input\n                      id=\"passwd1\"\n                      type=\"password\"\n                      disabled={this.state.disabled}\n                      value={this.state.password1}\n                      onChange={this.handlePassword1Change}\n                      autoComplete=\"new-password\"\n                    />\n                  </FormGroup>\n                }\n                {!this.state.disabled &&\n                  <FormGroup>\n                    <Label for=\"passwd2\">{gettext('Password again')}</Label>\n                    <Input\n                      id=\"passwd2\"\n                      type=\"password\"\n                      disabled={this.state.disabled}\n                      value={this.state.password2}\n                      onChange={this.handlePassword2Change}\n                      autoComplete=\"new-password\"\n                    />\n                  </FormGroup>\n                }\n              </div>\n            }\n          </Form>\n          {this.state.errMessage && <Alert color=\"danger\">{this.state.errMessage}</Alert>}\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.toggle}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.handleSubmit} disabled={!this.state.isSubmitBtnActive}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nCreateRepoDialog.propTypes = propTypes;\n\nexport default CreateRepoDialog;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Utils } from '../../utils/utils';\nimport { Link, navigate } from '@gatsbyjs/reach-router';\nimport { siteRoot, gettext } from '../../utils/constants';\nimport ModalPortal from '../modal-portal';\nimport CreateRepoDialog from '../dialog/create-repo-dialog';\nimport { DropdownToggle, Dropdown, DropdownMenu, DropdownItem } from 'reactstrap';\n\nconst propTypes = {\n  libraryType: PropTypes.string.isRequired,\n  onCreateRepo: PropTypes.func.isRequired,\n  onShowSidePanel: PropTypes.func.isRequired,\n};\n\nclass RepoViewToolbar extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isCreateRepoDialogShow: false,\n      isOpen: false,\n    };\n  }\n\n  onCreateRepo = (repo) => {\n    this.props.onCreateRepo(repo);\n    this.onCreateToggle();\n  }\n\n  onCreateToggle = () => {\n    this.setState({isCreateRepoDialogShow: !this.state.isCreateRepoDialogShow});\n  }\n\n  toggleMore = () => {\n    this.setState({ isOpen: !this.state.isOpen });\n  }\n\n  onDropdownToggleKeyDown = (e) => {\n    if (e.key == 'Enter' || e.key == 'Space') {\n      this.toggleMore();\n    }\n  }\n\n  visitDeletedviaKey = (e) => {\n    if (e.key == 'Enter' || e.key == 'Space') {\n      navigate(`${siteRoot}my-libs/deleted/`);\n    }\n  }\n\n  render() {\n    return (\n      <Fragment>\n        <div className=\"cur-view-toolbar\">\n          <span className=\"sf2-icon-menu side-nav-toggle hidden-md-up d-md-none\" title=\"Side Nav Menu\" onClick={this.props.onShowSidePanel}></span>\n          {Utils.isDesktop() ? (\n            <div className=\"operation\">\n              <button className=\"btn btn-secondary operation-item\" title={gettext('New Library')} onClick={this.onCreateToggle}>\n                <i className=\"fas fa-plus-square text-secondary mr-1\"></i>{gettext('New Library')}\n              </button>\n              <Dropdown isOpen={this.state.isOpen} toggle={this.toggleMore}>\n                <DropdownToggle className='btn btn-secondary operation-item' onKeyDown={this.onDropdownToggleKeyDown}>\n                  {gettext('More')}\n                </DropdownToggle>\n                <DropdownMenu>\n                  <DropdownItem className=\"link-dropdown-container\" onKeyDown={this.visitDeletedviaKey}>\n                    <Link className=\"link-dropdown-item\" to={siteRoot + 'my-libs/deleted/'}>{gettext('Deleted Libraries')}</Link>\n                  </DropdownItem>\n                </DropdownMenu>\n              </Dropdown>\n            </div>\n          ) : (\n            <span className=\"sf2-icon-plus mobile-toolbar-icon\" title={gettext('New Library')} onClick={this.onCreateToggle}></span>\n          )}\n        </div>\n        {this.state.isCreateRepoDialogShow && (\n          <ModalPortal>\n            <CreateRepoDialog\n              libraryType={this.props.libraryType}\n              onCreateRepo={this.onCreateRepo}\n              onCreateToggle={this.onCreateToggle}\n            />\n          </ModalPortal>\n        )}\n      </Fragment>\n    );\n  }\n}\n\nRepoViewToolbar.propTypes = propTypes;\n\nexport default RepoViewToolbar;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport moment from 'moment';\nimport { Utils } from '../../utils/utils';\nimport { gettext } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport toaster from '../toast';\nimport '../../css/dirent-detail.css';\n\nconst propTypes = {\n  currentRepo: PropTypes.object.isRequired,\n  closeDetails: PropTypes.func.isRequired,\n};\n\nclass LibDetail extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      fileCount: 0,\n    };\n  }\n\n  componentDidMount() {\n    let repo = this.props.currentRepo;\n    this.getFileCounts(repo);\n  }\n\n  componentWillReceiveProps(nextProps) {\n    if (nextProps.currentRepo.repo_id !== this.props.currentRepo.repo_id) {\n      this.getFileCounts(nextProps.currentRepo);\n    }\n  }\n\n  getFileCounts = (repo) => {\n    seafileAPI.getRepoInfo(repo.repo_id).then(res => {\n      this.setState({fileCount: res.data.file_count});\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  render() {\n    let repo = this.props.currentRepo;\n    let smallIconUrl = Utils.getLibIconUrl(repo);\n    let bigIconUrl = Utils.getLibIconUrl(repo, true);\n\n    return (\n      <div className=\"detail-container\">\n        <div className=\"detail-header\">\n          <div className=\"detail-control sf2-icon-x1\" onClick={this.props.closeDetails}></div>\n          <div className=\"detail-title dirent-title\">\n            <img src={smallIconUrl} width=\"24\" height=\"24\" alt=\"\" />{'  '}\n            <span className=\"name ellipsis\" title={repo.repo_name}>{repo.repo_name}</span>\n          </div>\n        </div>\n        <div className=\"detail-body dirent-info\">\n          <div className=\"img\">\n            <img src={bigIconUrl} height=\"96\"  alt=\"\" />\n          </div>\n          <div className=\"dirent-table-container\">\n            <table className=\"table-thead-hidden\">\n              <thead>\n                <tr><th width=\"35%\"></th><th width=\"65%\"></th></tr>\n              </thead>\n              <tbody>\n                <tr><th>{gettext('Files')}</th><td>{this.state.fileCount}</td></tr>\n                <tr><th>{gettext('Size')}</th><td>{repo.size}</td></tr>\n                <tr><th>{gettext('Last Update')}</th><td>{ moment(repo.last_modified).fromNow()}</td></tr>\n              </tbody>\n            </table>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nLibDetail.propTypes = propTypes;\n\nexport default LibDetail;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter, Form, FormGroup, Label, Input, Alert } from 'reactstrap';\nimport { gettext, enableRepoHistorySetting } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../toast';\n\nconst propTypes = {\n  itemName: PropTypes.string.isRequired,\n  toggleDialog: PropTypes.func.isRequired,\n  repoID: PropTypes.string.isRequired,\n};\n\nclass LibHistorySetting extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      keepDays: -1,\n      expireDays: 30,\n      disabled: true,\n      allHistory: true,\n      noHistory: false,\n      autoHistory: false,\n      errorInfo: ''\n    };\n  }\n\n  componentDidMount() {\n    seafileAPI.getRepoHistoryLimit(this.props.repoID).then(res => {\n      this.setState({\n        keepDays: res.data.keep_days,\n        allHistory: res.data.keep_days < 0 ? true : false,\n        noHistory: res.data.keep_days === 0 ? true : false,\n        autoHistory: res.data.keep_days > 0 ? true : false,\n        disabled: res.data.keep_days > 0 ? false : true,\n        expireDays: res.data.keep_days > 0 ? res.data.keep_days : 30,\n      });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  submit = () => {\n    let days = this.state.keepDays;\n    if (this.state.autoHistory) {\n      days = this.state.expireDays;\n    }\n    let repoID = this.props.repoID;\n    let reg = /^-?\\d+$/;\n    let flag = reg.test(days);\n    if (flag) {\n      let message = gettext('Successfully set library history.');\n      seafileAPI.setRepoHistoryLimit(repoID, days).then(res => {\n        toaster.success(message);\n        this.setState({keepDays: res.data.keep_days});\n        this.props.toggleDialog();\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    } else {\n      this.setState({\n        errorInfo: gettext('Please enter a non-negative integer'),\n      });\n    }\n  }\n\n  handleKeyPress = (e) => {\n    if (e.key === 'Enter') {\n      this.submit();\n      e.preventDefault();\n    }\n  }\n\n  onChange = (e) => {\n    let num = e.target.value;\n    this.setState({\n      keepDays: num,\n      expireDays: num,\n    });\n  }\n\n  setLimitDays = (type) => {\n    if (type === 'allHistory') {\n      this.setState({\n        keepDays: -1,\n        disabled: true\n      });\n    } else if (type === 'noHistory') {\n      this.setState({\n        keepDays: 0,\n        disabled: true\n      });\n    } else {\n      this.setState({\n        disabled: false\n      });\n    }\n\n    this.setState({\n      allHistory: type === 'allHistory' ? true : false,\n      noHistory: type === 'noHistory' ? true : false,\n      autoHistory: type === 'autoHistory' ? true : false,\n    });\n  }\n\n  render() {\n    const itemName = this.props.itemName;\n    return (\n      <Modal isOpen={true}>\n        <ModalHeader toggle={this.props.toggleDialog}>\n          <span className=\"op-target\" title={itemName}>{itemName}</span>{' '}\n          {gettext('History Setting')}\n        </ModalHeader>\n        <ModalBody>\n          <Form>\n            {!enableRepoHistorySetting &&\n              <FormGroup>\n                <Label className=\"error\">{gettext('Setting library history is disabled by Admin.')}</Label>\n              </FormGroup>\n            }\n            <FormGroup check>\n              <Input type=\"radio\" name=\"radio1\" checked={this.state.allHistory} disabled={!enableRepoHistorySetting} onChange={() => {this.setLimitDays('allHistory');}}/>{' '}\n              <Label>{gettext('Keep full history')}</Label>\n            </FormGroup>\n            <FormGroup check>\n              <Input type=\"radio\" name=\"radio1\" checked={this.state.noHistory} disabled={!enableRepoHistorySetting} onChange={() =>{this.setLimitDays('noHistory');}}/>{' '}\n              <Label>{gettext('Don\\'t keep history')}</Label>\n            </FormGroup>\n            <FormGroup check>\n              <Input type=\"radio\" name=\"radio1\" checked={this.state.autoHistory} disabled={!enableRepoHistorySetting} onChange={() =>{this.setLimitDays('autoHistory');}}/>{' '}\n              <Label>{gettext('Only keep a period of history:')}</Label>\n              <Input\n                type=\"text\"\n                className=\"expire-input\"\n                value={this.state.expireDays}\n                onChange={this.onChange}\n                disabled={this.state.disabled}\n                onKeyDown={this.handleKeyPress}\n              />{' '}\n              <Label><span>{gettext('days')}</span></Label>\n            </FormGroup>\n            {this.state.errorInfo && <Alert color=\"danger\">{this.state.errorInfo}</Alert>}\n          </Form>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.props.toggleDialog}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.submit}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nLibHistorySetting.propTypes = propTypes;\n\nexport default LibHistorySetting;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Modal, ModalHeader, ModalBody, ModalFooter, Alert } from 'reactstrap';\nimport { gettext, repoPasswordMinLength } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport toaster from '../toast';\n\nconst propTypes = {\n  repoID: PropTypes.string.isRequired,\n  repoName: PropTypes.string.isRequired,\n  toggleDialog: PropTypes.func.isRequired\n};\n\nclass ChangeRepoPasswordDialog extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      oldPassword: '',\n      newPassword: '',\n      newPasswordAgain: '',\n      submitBtnDisabled: false,\n      errorMsg: ''\n    };\n  }\n\n  handleOldPasswordInputChange = (e) => {\n    this.setState({\n      oldPassword: e.target.value\n    });\n  }\n\n  handleNewPasswordInputChange = (e) => {\n    this.setState({\n      newPassword: e.target.value\n    });\n  }\n\n  handleNewPasswordAgainInputChange = (e) => {\n    this.setState({\n      newPasswordAgain: e.target.value\n    });\n  }\n\n  formSubmit = (e) => {\n    const { oldPassword, newPassword, newPasswordAgain } = this.state;\n    if (!oldPassword) {\n      this.setState({\n        errorMsg: gettext('Please enter the old password')\n      });\n      return false;\n    }\n    if (!newPassword) {\n      this.setState({\n        errorMsg: gettext('Please enter a new password')\n      });\n      return false;\n    }\n    if (newPassword.length < repoPasswordMinLength) {\n      this.setState({\n        errorMsg: gettext('New password is too short')\n      });\n      return false;\n    }\n    if (!newPasswordAgain) {\n      this.setState({\n        errorMsg: gettext('Please enter the new password again')\n      });\n      return false;\n    }\n    if (newPassword != newPasswordAgain) {\n      this.setState({\n        errorMsg: gettext('New passwords don\\'t match')\n      });\n      return false;\n    }\n\n    this.setState({\n      submitBtnDisabled: true\n    });\n    seafileAPI.changeEncryptedRepoPassword(this.props.repoID, oldPassword, newPassword)\n      .then(() => {\n        this.props.toggleDialog();\n        toaster.success(gettext('Successfully changed library password.'));\n      }).catch((error) => {\n        let errorMsg = Utils.getErrorMsg(error);\n        this.setState({\n          errorMsg: errorMsg,\n          submitBtnDisabled: false\n        });\n      });\n  }\n\n\n  render() {\n    const { repoName, toggleDialog } = this.props;\n\n    return (\n      <Modal isOpen={true} centered={true} style={{height: 'auto'}}>\n        <ModalHeader toggle={toggleDialog}>\n          <span>\n            {Utils.generateDialogTitle(gettext('Change Password of Library {placeholder}'), repoName)}\n          </span>\n        </ModalHeader>\n        <ModalBody>\n          <form id=\"repo-change-passwd-form\" action=\"\" method=\"post\">\n            <label htmlFor=\"passwd\">{gettext('Old Password')}</label><br />\n            <input type=\"password\" name=\"old_passwd\" className=\"form-control\" id=\"passwd\" value={this.state.oldPassword} onChange={this.handleOldPasswordInputChange} /><br />\n            <label htmlFor=\"new-passwd\">{gettext('New Password')}</label><span className=\"tip\">{gettext('(at least {placeholder} characters)').replace('{placeholder}', repoPasswordMinLength)}</span><br />\n            <input type=\"password\" name=\"new_passwd\" className=\"form-control\" id=\"new-passwd\" value={this.state.newPassword} onChange={this.handleNewPasswordInputChange} /><br />\n            <label htmlFor=\"new-passwd-again\">{gettext('New Password Again')}</label><br />\n            <input type=\"password\" name=\"new_passwd_again\" className=\"form-control\" id=\"new-passwd-again\" value={this.state.newPasswordAgain} onChange={this.handleNewPasswordAgainInputChange} /><br />\n            {this.state.errorMsg && <Alert color=\"danger\">{this.state.errorMsg}</Alert>}\n          </form>\n        </ModalBody>\n        <ModalFooter>\n          <button className=\"btn btn-primary\" disabled={this.state.submitBtnDisabled} onClick={this.formSubmit}>{gettext('Submit')}</button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nChangeRepoPasswordDialog.propTypes = propTypes;\n\nexport default ChangeRepoPasswordDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport toaster from '../../components/toast';\nimport { Button, Form, FormGroup, Label, Input, Modal, ModalHeader, ModalBody, ModalFooter, Alert } from 'reactstrap';\nimport { gettext, contactEmail } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport { seafileAPI } from '../../utils/seafile-api';\n\nconst propTypes = {\n  repoID: PropTypes.string.isRequired,\n  toggleDialog: PropTypes.func.isRequired,\n};\n\nclass ResetEncryptedRepoPasswordDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      errMessage: '',\n      showLoading: true,\n      showSuccess: false,\n      showError: false,\n    };\n  }\n\n  componentDidMount() {\n    seafileAPI.resetAndSendEncryptedRepoPassword(this.props.repoID).then((res) => {\n      this.setState({showLoading: false});\n      this.setState({showSuccess: true});\n    }).catch((error) => {\n      if (error.response) {\n        this.setState({\n          errMessage: error.response.data.error_msg\n        });\n        this.setState({showLoading: false});\n        this.setState({showError: true});\n      }\n    });\n  }\n\n  render() {\n\n    let user_email = '<strong>' + contactEmail + '</strong>';\n    let message = gettext('New password has been sent to your email {mail}. Please check your mailbox. If you dont receive the password, please check if your email address is properly configured.').replace('{mail}', user_email);\n\n    return (\n      <Modal isOpen={true}  centered={true}>\n        <ModalHeader toggle={this.props.toggleDialog}>\n          {gettext('Reset library password')}\n        </ModalHeader>\n        <ModalBody>\n          {this.state.showLoading && (\n            <span>{gettext('Sending new password...')}</span>\n          )}\n          {this.state.showSuccess && (\n            <div dangerouslySetInnerHTML={{__html:message}} />\n          )}\n          {this.state.showError && (\n            <span className=\"err-message\">{this.state.errMessage}</span>\n          )}\n        </ModalBody>\n      </Modal>\n    );\n  }\n}\n\nResetEncryptedRepoPasswordDialog.propTypes = propTypes;\n\nexport default ResetEncryptedRepoPasswordDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Modal, ModalHeader, ModalBody, ModalFooter } from 'reactstrap';\nimport CreatableSelect from 'react-select/creatable';\nimport { gettext } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport Loading from '../loading';\nimport toaster from '../toast';\n\nconst propTypes = {\n  repoID: PropTypes.string.isRequired,\n  repoName: PropTypes.string.isRequired,\n  toggleDialog: PropTypes.func.isRequired\n};\n\nclass LabelRepoStateDialog extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      isLoading: true,\n      existingLabels: null,\n      errorMsg: '',\n      submitBtnDisabled: false\n    };\n  }\n\n  componentDidMount() {\n    seafileAPI.getAllRepoSnapshotLabels().then((res) => {\n      this.setState({\n        isLoading: false,\n        existingLabels: res.data,\n        errorMsg: ''\n      });\n    }).catch((error) => {\n      let errorMsg = Utils.getErrorMsg(error);\n      this.setState({\n        isLoading: false,\n        errorMsg: errorMsg\n      });\n    });\n  }\n\n  handleInputChange = (value) => {\n    this.setState({\n      inputValue: value\n    });\n  }\n\n  formSubmit = () => {\n    const inputValue = this.state.inputValue;\n\n    if (!inputValue || !inputValue.length) { // undefined or []\n      this.setState({\n        formErrorMsg: gettext('It is required.')\n      });\n      return;\n    }\n\n    this.setState({\n      submitBtnDisabled: true\n    });\n\n    const {repoID, repoName} = this.props;\n    const labels = inputValue.map((item, index) => item.value).join(',');\n    seafileAPI.addNewRepoLabels(repoID, labels).then((res) => {\n      const msg = gettext('Successfully added label(s) for library {placeholder}').replace('{placeholder}', repoName);\n      toaster.success(msg);\n      this.props.toggleDialog();\n    }).catch((error) => {\n      let errorMsg = Utils.getErrorMsg(error);\n      this.setState({\n        formErrorMsg: errorMsg,\n        submitBtnDisabled: false\n      });\n    });\n  }\n\n  render() {\n    return (\n      <Modal isOpen={true} toggle={this.props.toggleDialog}>\n        <ModalHeader toggle={this.props.toggleDialog}>{gettext('Label Current State')}</ModalHeader>\n        <ModalBody>\n          <Content data={this.state} handleChange={this.handleInputChange} />\n        </ModalBody>\n        {this.state.existingLabels && (\n          <ModalFooter>\n            <button className=\"btn btn-secondary\" onClick={this.props.toggleDialog}>{gettext('Cancel')}</button>\n            <button className=\"btn btn-primary\" disabled={this.state.submitBtnDisabled} onClick={this.formSubmit}>{gettext('Submit')}</button>\n          </ModalFooter>\n        )}\n      </Modal>\n    );\n  }\n}\n\nclass Content extends React.Component {\n\n  render() {\n    const { isLoading, errorMsg, existingLabels, formErrorMsg } = this.props.data;\n\n    if (isLoading) {\n      return <Loading />;\n    }\n\n    if (errorMsg) {\n      return <p className=\"error mt-4 text-center\">{errorMsg}</p>;\n    }\n\n    return (\n      <React.Fragment>\n        <CreatableSelect\n          isMulti={true}\n          onChange={this.props.handleChange}\n          placeholder=''\n          options={existingLabels.map((item, index) => { return {label: item, value: item}; })}\n        />\n        {formErrorMsg && <p className=\"error m-0 mt-2\">{formErrorMsg}</p>}\n      </React.Fragment>\n    );\n  }\n}\n\nLabelRepoStateDialog.propTypes = propTypes;\n\nexport default LabelRepoStateDialog;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext, isPro, siteRoot } from '../../utils/constants';\nimport { Button, Input, InputGroup, InputGroupAddon } from 'reactstrap';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport UserSelect from '../user-select';\nimport SharePermissionEditor from '../select-editor/share-permission-editor';\nimport FileChooser from '../file-chooser/file-chooser';\n\nclass UserItem extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOperationShow: false\n    };\n  }\n\n  onMouseEnter = () => {\n    this.setState({isOperationShow: true});\n  }\n\n  onMouseLeave = () => {\n    this.setState({isOperationShow: false});\n  }\n\n  deleteUserFolderPermission = () => {\n    let item = this.props.item;\n    this.props.deleteUserFolderPermission(item);\n  }\n\n  onChangeUserFolderPerm = (permission) => {\n    let item = this.props.item;\n    this.props.onChangeUserFolderPerm(item.repo_id, permission, item.folder_path, item.user_email);\n  }\n\n  render() {\n    let item = this.props.item;\n    let currentPermission = item.permission;\n    return (\n      <tr onMouseEnter={this.onMouseEnter} onMouseLeave={this.onMouseLeave} onFocus={this.onMouseEnter}>\n        <td>\n          <a href={`${siteRoot}profile/${encodeURIComponent(item.user_email)}/`} target=\"_blank\">{item.user_name}</a>\n        </td>\n        {this.props.showPath &&\n          <td>\n            <a href={`${siteRoot}library/${item.repo_id}/${Utils.encodePath(this.props.repoName + item.folder_path)}`}>{item.folder_name}</a>\n          </td>\n        }\n        <td>\n          <SharePermissionEditor\n            isTextMode={true}\n            autoFocus={true}\n            isEditIconShow={this.state.isOperationShow}\n            currentPermission={currentPermission}\n            permissions={this.props.permissions}\n            onPermissionChanged={this.onChangeUserFolderPerm}\n          />\n        </td>\n        <td>\n          <span\n            tabIndex=\"0\"\n            role=\"button\"\n            className={`sf2-icon-x3 action-icon ${this.state.isOperationShow ? '' : 'hide'}`}\n            onClick={this.deleteUserFolderPermission}\n            onKeyDown={Utils.onKeyDown}\n            title={gettext('Delete')}\n            aria-label={gettext('Delete')}\n          >\n          </span>\n        </td>\n      </tr>\n    );\n  }\n}\n\n\nconst propTypes = {\n  repoID: PropTypes.string.isRequired,\n  isDepartmentRepo: PropTypes.bool\n};\n\n\nclass LibSubFolderSetUserPermissionDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      selectedUsers: null,\n      errorMsg: [],\n      permission: 'rw',\n      userFolderPermItems: [],\n      folderPath: '',\n      showFileChooser: false\n    };\n    if (!isPro) {\n      this.permissions = ['r', 'rw'];\n    } else {\n      this.permissions = ['r', 'rw', 'cloud-edit', 'preview', 'invisible'];\n    }\n  }\n\n  handleUserSelectChange = (option) => {\n    this.setState({selectedUsers: option});\n  }\n\n  componentDidMount() {\n    const {repoID, folderPath, isDepartmentRepo} = this.props;\n    const request = isDepartmentRepo ?\n      seafileAPI.listDepartmentRepoUserFolderPerm(repoID, folderPath) :\n      seafileAPI.listUserFolderPerm(repoID, folderPath);\n    request.then((res) => {\n      if (res.data.length !== 0) {\n        this.setState({userFolderPermItems: res.data});\n      }\n    });\n  }\n\n  setPermission = (permission) => {\n    this.setState({permission: permission});\n  }\n\n  addUserFolderPerm = () => {\n    const { selectedUsers } = this.state;\n    const folderPath = this.props.folderPath || this.state.folderPath;\n    if (!selectedUsers || !selectedUsers.length || !folderPath) { // selectedUsers: null or []\n      return false;\n    }\n\n    const users = selectedUsers.map((item, index) => item.email);\n\n    const request = this.props.isDepartmentRepo ?\n      seafileAPI.addDepartmentRepoUserFolderPerm(this.props.repoID, this.state.permission, folderPath, users) :\n      seafileAPI.addUserFolderPerm(this.props.repoID, this.state.permission, folderPath, users);\n    request.then(res => {\n      let errorMsg = [];\n      if (res.data.failed.length > 0) {\n        for (let i = 0; i < res.data.failed.length; i++) {\n          errorMsg[i] = res.data.failed[i];\n        }\n      }\n      this.setState({\n        errorMsg: errorMsg,\n        userFolderPermItems: this.state.userFolderPermItems.concat(res.data.success),\n        selectedUsers: null,\n        permission: 'rw',\n        folderPath: '',\n      });\n      this.refs.userSelect.clearSelect();\n    }).catch((error) => {\n      let errorMsg = '';\n      if (error.response) {\n        if (error.response.data && error.response.data['error_msg']) {\n          errorMsg = error.response.data['error_msg'];\n        } else {\n          errorMsg = gettext('Error');\n        }\n      } else {\n        errorMsg = gettext('Please check the network.');\n      }\n      this.setState({\n        errorMsg: [errorMsg]\n      });\n    });\n  }\n\n  deleteUserFolderPermItem = (item) => {\n    const request = this.props.isDepartmentRepo ?\n      seafileAPI.deleteDepartmentRepoUserFolderPerm(item.repo_id, item.permission, item.folder_path, item.user_email) :\n      seafileAPI.deleteUserFolderPerm(item.repo_id, item.permission, item.folder_path, item.user_email);\n    request.then(res => {\n      this.setState({\n        userFolderPermItems: this.state.userFolderPermItems.filter(deletedItem => {\n          return deletedItem != item;\n        })\n      });\n    });\n  }\n\n  onChangeUserFolderPerm = (repoID, permission, folderPath, userEmail) => {\n    const request = this.props.isDepartmentRepo ?\n      seafileAPI.updateDepartmentRepoUserFolderPerm(repoID, permission, folderPath, userEmail) :\n      seafileAPI.updateUserFolderPerm(repoID, permission, folderPath, userEmail);\n    request.then(res => {\n      let userFolderPermItems = this.state.userFolderPermItems.map(item => {\n        if (item.user_email === userEmail && item.folder_path === folderPath) {\n          item.permission = permission;\n        }\n        return item;\n      });\n      this.setState({userFolderPermItems: userFolderPermItems});\n    });\n  }\n\n  onSetSubFolder = (e) => {\n    this.setState({\n      folderPath: e.target.value\n    });\n  }\n\n  toggleFileChooser = () => {\n    this.setState({\n      showFileChooser: !this.state.showFileChooser,\n      folderPath: ''\n    });\n  }\n\n  toggleSubFolder = (repo, path, item) => {\n    this.setState({\n      folderPath: path,\n    });\n  }\n\n  handleFileChooserSubmit = () => {\n    this.setState({\n      showFileChooser: !this.state.showFileChooser\n    });\n  }\n\n  onRepoItemClick = () => {\n    this.setState({\n      folderPath: '/'\n    });\n  }\n\n  render() {\n    let showPath = this.props.folderPath ? false : true;\n    let { userFolderPermItems } = this.state;\n\n    if (this.state.showFileChooser) {\n      return (\n        <div>\n          <FileChooser\n            repoID={this.props.repoID}\n            mode={'only_current_library'}\n            onDirentItemClick={this.toggleSubFolder}\n            onRepoItemClick={this.onRepoItemClick}\n          />\n          <div className=\"modal-footer\">\n            <Button color=\"secondary\" onClick={this.toggleFileChooser}>{gettext('Cancel')}</Button>\n            <Button color=\"primary\" onClick={this.handleFileChooserSubmit}>{gettext('Submit')}</Button>\n          </div>\n        </div>\n      );\n    }\n\n    const thead = (\n      <thead>\n        <tr>\n          <th width={showPath ? '32%': '55%'}>{gettext('User')}</th>\n          {showPath &&\n          <th width=\"32%\">{gettext('Folder')}</th>\n          }\n          <th width={showPath ? '24%': '30%'}>{gettext('Permission')}</th>\n          <th width={showPath ? '12%' : '15%'}></th>\n        </tr>\n      </thead>\n    );\n    return (\n      <Fragment>\n        <table className=\"w-xs-250\">\n          {thead}\n          <tbody>\n            <tr>\n              <td>\n                <UserSelect\n                  ref=\"userSelect\"\n                  isMulti={true}\n                  className=\"reviewer-select\"\n                  placeholder={gettext('Search users...')}\n                  onSelectChange={this.handleUserSelectChange}\n                  value={this.state.selectedUsers}\n                />\n              </td>\n              {showPath &&\n                <td>\n                  <InputGroup>\n                    <Input value={this.state.folderPath} onChange={this.onSetSubFolder} />\n                    <InputGroupAddon addonType=\"append\"><Button className=\"sf2-icon-plus\" onClick={this.toggleFileChooser}></Button></InputGroupAddon>\n                  </InputGroup>\n                </td>\n              }\n              <td>\n                <SharePermissionEditor\n                  isTextMode={false}\n                  isEditIconShow={false}\n                  currentPermission={this.state.permission}\n                  permissions={this.permissions}\n                  onPermissionChanged={this.setPermission}\n                />\n              </td>\n              <td>\n                <Button onClick={this.addUserFolderPerm}>{gettext('Submit')}</Button>\n              </td>\n            </tr>\n            {this.state.errorMsg.length > 0 &&\n              this.state.errorMsg.map((item, index) => {\n                let errMessage = '';\n                if (item.user_email) {\n                  errMessage = item.user_email + ': ' + item.error_msg;\n                } else {\n                  errMessage = item;\n                }\n                return (\n                  <tr key={index}>\n                    <td colSpan={3}><p className=\"error\">{errMessage}</p></td>\n                  </tr>\n                );\n              })\n            }\n          </tbody>\n        </table>\n        <div className=\"share-list-container\">\n          <table className=\"table-thead-hidden w-xs-250\">\n            {thead}\n            <tbody>\n              {userFolderPermItems.map((item, index) => {\n                return (\n                  <UserItem\n                    key={index}\n                    item={item}\n                    permissions={this.permissions}\n                    deleteUserFolderPermission={this.deleteUserFolderPermItem}\n                    onChangeUserFolderPerm={this.onChangeUserFolderPerm}\n                    showPath={showPath}\n                    repoName={this.props.repoName}\n                  />\n                );\n              })}\n            </tbody>\n          </table>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nLibSubFolderSetUserPermissionDialog.propTypes = propTypes;\n\nexport default LibSubFolderSetUserPermissionDialog;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Input, InputGroup, InputGroupAddon } from 'reactstrap';\nimport Select from 'react-select';\nimport { gettext, isPro, siteRoot } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport SharePermissionEditor from '../select-editor/share-permission-editor';\nimport FileChooser from '../file-chooser/file-chooser';\n\nclass GroupItem extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOperationShow: false\n    };\n  }\n\n  onMouseEnter = () => {\n    this.setState({isOperationShow: true});\n  }\n\n  onMouseLeave = () => {\n    this.setState({isOperationShow: false});\n  }\n\n  deleteGroupPermissionItem = () => {\n    let item = this.props.item;\n    this.props.deleteGroupPermissionItem(item);\n  }\n\n  onChangeGroupPermission = (permission) => {\n    let item = this.props.item;\n    this.props.onChangeGroupPermission(item, permission);\n  }\n\n  render() {\n    let item = this.props.item;\n    return (\n      <tr onMouseEnter={this.onMouseEnter} onMouseLeave={this.onMouseLeave} onFocus={this.onMouseEnter}>\n        <td>\n          <a href={`${siteRoot}group/${item.group_id}/`} target=\"_blank\">{item.group_name}</a>\n        </td>\n        {this.props.showPath &&\n          <td>\n            <a href={`${siteRoot}library/${item.repo_id}/${Utils.encodePath(this.props.repoName + item.folder_path)}`}>{item.folder_name}</a>\n          </td>\n        }\n        <td>\n          <SharePermissionEditor\n            isTextMode={true}\n            autoFocus={true}\n            isEditIconShow={this.state.isOperationShow}\n            currentPermission={item.permission}\n            permissions={this.props.permissions}\n            onPermissionChanged={this.onChangeGroupPermission}\n          />\n        </td>\n        <td>\n          <span\n            tabIndex=\"0\"\n            role=\"button\"\n            className={`sf2-icon-x3 action-icon ${this.state.isOperationShow ? '' : 'hide'}`}\n            onClick={this.deleteGroupPermissionItem}\n            onKeyDown={Utils.onKeyDown}\n            title={gettext('Delete')}\n            aria-label={gettext('Delete')}\n          >\n          </span>\n        </td>\n      </tr>\n    );\n  }\n}\n\nconst propTypes = {\n  repoID: PropTypes.string.isRequired,\n  isDepartmentRepo: PropTypes.bool\n};\n\nconst NoOptionsMessage = (props) => {\n  return (\n    <div {...props.innerProps} style={{margin: '6px 10px', textAlign: 'center', color: 'hsl(0,0%,50%)'}}>{gettext('Group not found')}</div>\n  );\n};\n\nclass LibSubFolderSerGroupPermissionDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      selectedOption: null,\n      errorMsg: [],\n      permission: 'rw',\n      groupPermissionItems: [],\n      folderPath: '',\n      showFileChooser: false\n    };\n    this.options = [];\n    if (!isPro) {\n      this.permissions = ['r', 'rw'];\n    } else {\n      this.permissions = ['r', 'rw', 'cloud-edit', 'preview', 'invisible'];\n    }\n  }\n\n  handleSelectChange = (option) => {\n    this.setState({selectedOption: option});\n  }\n\n  componentDidMount() {\n    this.loadOptions();\n    this.listGroupPermissionItems();\n  }\n\n  loadOptions = () => {\n    seafileAPI.shareableGroups().then((res) => {\n      this.options = res.data.map((item, index) => {\n        return {\n          id: item.id,\n          label: item.name,\n          value: item.name\n        };\n      });\n    });\n  }\n\n  listGroupPermissionItems = () => {\n    const { isDepartmentRepo, repoID, folderPath } = this.props;\n    const request = isDepartmentRepo ?\n      seafileAPI.listDepartmentRepoGroupFolderPerm(repoID, folderPath) :\n      seafileAPI.listGroupFolderPerm(repoID, folderPath);\n    request.then((res) => {\n      if (res.data.length !== 0) {\n        this.setState({\n          groupPermissionItems: res.data\n        });\n      }\n    });\n  }\n\n  setPermission = (permission) => {\n    this.setState({permission: permission});\n  }\n\n  addGroupFolderPerm = () => {\n    const { selectedOption } = this.state;\n    const folderPath = this.props.folderPath || this.state.folderPath;\n    if (!selectedOption || !folderPath) {\n      return false;\n    }\n\n    const request = this.props.isDepartmentRepo ?\n      seafileAPI.addDepartmentRepoGroupFolderPerm(this.props.repoID, this.state.permission, folderPath, selectedOption.id) :\n      seafileAPI.addGroupFolderPerm(this.props.repoID, this.state.permission, folderPath, selectedOption.id);\n    request.then(res => {\n      let errorMsg = [];\n      if (res.data.failed.length > 0) {\n        for (let i = 0; i < res.data.failed.length; i++) {\n          errorMsg[i] = res.data.failed[i];\n        }\n      }\n\n      this.setState({\n        errorMsg: errorMsg,\n        groupPermissionItems: this.state.groupPermissionItems.concat(res.data.success),\n        selectedOption: null,\n        permission: 'rw',\n        folderPath: ''\n      });\n    }).catch((error) => {\n      let errorMsg = '';\n      if (error.response) {\n        if (error.response.data && error.response.data['error_msg']) {\n          errorMsg = error.response.data['error_msg'];\n        } else {\n          errorMsg = gettext('Error');\n        }\n      } else {\n        errorMsg = gettext('Please check the network.');\n      }\n      this.setState({\n        errorMsg: [errorMsg]\n      });\n    });\n  }\n\n  deleteGroupPermissionItem = (item) => {\n    const request = this.props.isDepartmentRepo ?\n      seafileAPI.deleteDepartmentRepoGroupFolderPerm(item.repo_id, item.permission, item.folder_path, item.group_id) :\n      seafileAPI.deleteGroupFolderPerm(item.repo_id, item.permission, item.folder_path, item.group_id);\n    request.then(() => {\n      this.setState({\n        groupPermissionItems: this.state.groupPermissionItems.filter(deletedItem => { return deletedItem != item; })\n      });\n    });\n  }\n\n  onChangeGroupPermission = (item, permission) => {\n    const request = this.props.isDepartmentRepo ?\n      seafileAPI.updateDepartmentRepoGroupFolderPerm(item.repo_id, permission, item.folder_path, item.group_id) :\n      seafileAPI.updateGroupFolderPerm(item.repo_id, permission, item.folder_path, item.group_id);\n    request.then(() => {\n      this.updateGroupPermission(item, permission);\n    });\n  }\n\n  updateGroupPermission = (item, permission) => {\n    let groupID = item.group_id;\n    let groupPermissionItems = this.state.groupPermissionItems.map(sharedItem => {\n      let sharedItemGroupID = sharedItem.group_id;\n      if (groupID === sharedItemGroupID && item.folder_path === sharedItem.folder_path) {\n        sharedItem.permission = permission;\n      }\n      return sharedItem;\n    });\n    this.setState({groupPermissionItems: groupPermissionItems});\n  }\n\n  onSetSubFolder = (e) => {\n    this.setState({\n      folderPath: e.target.value\n    });\n  }\n\n  toggleFileChooser = () => {\n    this.setState({\n      showFileChooser: !this.state.showFileChooser,\n      folderPath: ''\n    });\n  }\n\n  toggleSubFolder = (repo, path, item) => {\n    this.setState({\n      folderPath: path,\n    });\n  }\n\n  handleSubmit = () => {\n    this.setState({\n      showFileChooser: !this.state.showFileChooser\n    });\n  }\n\n  onRepoItemClick = () => {\n    this.setState({\n      folderPath: '/'\n    });\n  }\n\n  render() {\n    let showPath = this.props.folderPath ? false : true;\n\n    if (this.state.showFileChooser) {\n      return (\n        <div>\n          <FileChooser\n            repoID={this.props.repoID}\n            mode={'only_current_library'}\n            onDirentItemClick={this.toggleSubFolder}\n            onRepoItemClick={this.onRepoItemClick}\n          />\n          <div className=\"modal-footer\">\n            <Button color=\"secondary\" onClick={this.toggleFileChooser}>{gettext('Cancel')}</Button>\n            <Button color=\"primary\" onClick={this.handleSubmit}>{gettext('Submit')}</Button>\n          </div>\n        </div>\n      );\n    }\n\n    const thead = (\n      <thead>\n        <tr>\n          <th width={showPath ? '32%' : '55%'}>{gettext('Group')}</th>\n          {showPath &&\n          <th width=\"32%\">{gettext('Folder')}</th>\n          }\n          <th width={showPath ? '24%' : '30%'}>{gettext('Permission')}</th>\n          <th width={showPath ? '12%' : '15%'}></th>\n        </tr>\n      </thead>\n    );\n    return (\n      <Fragment>\n        <table className=\"w-xs-250\">\n          {thead}\n          <tbody>\n            <tr>\n              <td>\n                <Select\n                  onChange={this.handleSelectChange}\n                  options={this.options}\n                  placeholder={gettext('Select a group')}\n                  maxMenuHeight={200}\n                  inputId={'react-select-2-input'}\n                  value={this.state.selectedOption}\n                  components={{ NoOptionsMessage }}\n                />\n              </td>\n              {showPath &&\n                <td>\n                  <InputGroup>\n                    <Input value={this.state.folderPath} onChange={this.onSetSubFolder} />\n                    <InputGroupAddon addonType=\"append\"><Button className=\"sf2-icon-plus\" onClick={this.toggleFileChooser}></Button></InputGroupAddon>\n                  </InputGroup>\n                </td>\n              }\n              <td>\n                <SharePermissionEditor\n                  isTextMode={false}\n                  isEditIconShow={false}\n                  currentPermission={this.state.permission}\n                  permissions={this.permissions}\n                  onPermissionChanged={this.setPermission}\n                />\n              </td>\n              <td>\n                <Button onClick={this.addGroupFolderPerm}>{gettext('Submit')}</Button>\n              </td>\n            </tr>\n            {this.state.errorMsg.length > 0 &&\n              this.state.errorMsg.map((item, index) => {\n                let errMessage = item.group_id + ': ' + item.error_msg;\n                return (\n                  <tr key={index}>\n                    <td colSpan={3}><p className=\"error\">{errMessage}</p></td>\n                  </tr>\n                );\n              })\n            }\n          </tbody>\n        </table>\n        <div className=\"share-list-container\">\n          <table className=\"table-thead-hidden w-xs-250\">\n            {thead}\n            <tbody>\n              {this.state.groupPermissionItems.map((item, index) => {\n                return (\n                  <GroupItem\n                    key={index}\n                    item={item}\n                    permissions={this.permissions}\n                    deleteGroupPermissionItem={this.deleteGroupPermissionItem}\n                    onChangeGroupPermission={this.onChangeGroupPermission}\n                    showPath={showPath}\n                    repoName={this.props.repoName}\n                  />\n                );\n              })}\n            </tbody>\n          </table>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nLibSubFolderSerGroupPermissionDialog.propTypes = propTypes;\n\nexport default LibSubFolderSerGroupPermissionDialog;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Modal, ModalHeader, ModalBody, TabContent, TabPane, Nav, NavItem, NavLink } from 'reactstrap';\nimport { gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport LibSubFolderSetUserPermissionDialog from './lib-sub-folder-set-user-permission-dialog';\nimport LibSubFolderSetGroupPermissionDialog from './lib-sub-folder-set-group-permission-dialog';\nimport '../../css/share-link-dialog.css';\nimport '../../css/sub-folder-permission.css';\n\nconst propTypes = {\n  repoID: PropTypes.string.isRequired,\n  repoName: PropTypes.string,\n  isDepartmentRepo: PropTypes.bool,\n  folderPath: PropTypes.string,\n  folderName: PropTypes.string,\n  toggleDialog: PropTypes.func.isRequired\n};\n\nclass LibSubFolderPermissionDialog extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      activeTab: 'userPermission'\n    };\n  }\n\n  toggle = (tab) => {\n    if (this.state.activeTab !== tab) {\n      this.setState({activeTab: tab});\n    }\n  }\n\n  renderContent = () => {\n    const activeTab = this.state.activeTab;\n\n    return (\n      <Fragment>\n        <div className=\"share-dialog-side\">\n          <Nav pills>\n            <NavItem role=\"tab\" aria-selected={activeTab === 'userPermission'} aria-controls=\"user-perm-panel\">\n              <NavLink className={activeTab === 'userPermission' ? 'active' : ''} onClick={this.toggle.bind(this, 'userPermission')} tabIndex=\"0\" onKeyDown={Utils.onKeyDown}>\n                {gettext('User Permission')}\n              </NavLink>\n            </NavItem>\n            <NavItem role=\"tab\" aria-selected={activeTab === 'groupPermission'} aria-controls=\"group-perm-panel\">\n              <NavLink className={activeTab === 'groupPermission' ? 'active' : ''} onClick={this.toggle.bind(this, 'groupPermission')} tabIndex=\"0\" onKeyDown={Utils.onKeyDown}>\n                {gettext('Group Permission')}\n              </NavLink>\n            </NavItem>\n          </Nav>\n        </div>\n        <div className=\"share-dialog-main\">\n          <TabContent activeTab={this.state.activeTab}>\n            <TabPane tabId=\"userPermission\" role=\"tabpanel\" id=\"user-perm-panel\">\n              <LibSubFolderSetUserPermissionDialog repoID={this.props.repoID} repoName={this.props.repoName} folderPath={this.props.folderPath} isDepartmentRepo={this.props.isDepartmentRepo} />\n            </TabPane>\n            <TabPane tabId=\"groupPermission\" role=\"tabpanel\" id=\"group-perm-panel\">\n              <LibSubFolderSetGroupPermissionDialog repoID={this.props.repoID} repoName={this.props.repoName} folderPath={this.props.folderPath} isDepartmentRepo={this.props.isDepartmentRepo} />\n            </TabPane>\n          </TabContent>\n        </div>\n      </Fragment>\n    );\n  }\n\n  render() {\n    const { repoName, folderName } = this.props;\n    return (\n      <div>\n        <Modal isOpen={true} style={{maxWidth: '980px'}} className=\"share-dialog\" toggle={this.props.toggleDialog}>\n          <ModalHeader toggle={this.props.toggleDialog}>\n            <span>{repoName ? Utils.generateDialogTitle(gettext('{placeholder} Folder Permission'), repoName) : Utils.generateDialogTitle(gettext('Set {placeholder}\\'s permission'), folderName)}</span>\n          </ModalHeader>\n          <ModalBody className=\"dialog-list-container share-dialog-content\" role=\"tablist\">\n            {this.renderContent()}\n          </ModalBody>\n        </Modal>\n      </div>\n    );\n  }\n}\n\nLibSubFolderPermissionDialog.propTypes = propTypes;\n\nexport default LibSubFolderPermissionDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Dropdown, DropdownMenu, DropdownToggle, DropdownItem } from 'reactstrap';\nimport { gettext, isPro, folderPermEnabled, enableRepoSnapshotLabel, enableResetEncryptedRepoPassword, isEmailConfigured, enableRepoAutoDel } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\n\nconst propTypes = {\n  isPC: PropTypes.bool,\n  repo: PropTypes.object.isRequired,\n  isStarred: PropTypes.bool,\n  onFreezedItem: PropTypes.func.isRequired,\n  onUnfreezedItem: PropTypes.func.isRequired,\n  onMenuItemClick: PropTypes.func.isRequired,\n};\n\nclass MylibRepoMenu extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isItemMenuShow: false,\n    };\n  }\n\n  onMenuItemClick = (e) => {\n    let operation = Utils.getEventData(e, 'toggle');\n    this.props.onMenuItemClick(operation);\n  }\n\n  onMenuItemKeyDown = (e) => {\n    if (e.key == 'Enter' || e.key == 'Space') {\n      this.onMenuItemClick(e);\n    }\n  }\n\n  onDropdownToggleClick = (e) => {\n    this.toggleOperationMenu(e);\n  }\n\n  onDropdownToggleKeyDown = (e) => {\n    if (e.key == 'Enter' || e.key == 'Space') {\n      this.onDropdownToggleClick(e);\n    }\n  }\n\n  toggleOperationMenu = (e) => {\n    let dataset = e.target ? e.target.dataset : null;\n    if (dataset && dataset.toggle && dataset.toggle === 'Rename') {\n      this.setState({isItemMenuShow: !this.state.isItemMenuShow});\n      return;\n    }\n\n    this.setState(\n      {isItemMenuShow: !this.state.isItemMenuShow},\n      () => {\n        if (this.state.isItemMenuShow) {\n          this.props.onFreezedItem();\n        } else {\n          this.props.onUnfreezedItem();\n        }\n      }\n    );\n  }\n\n  generatorOperations = () => {\n    let repo = this.props.repo;\n    let showResetPasswordMenuItem = isPro && repo.encrypted && enableResetEncryptedRepoPassword && isEmailConfigured;\n    let operations = ['Rename', 'Transfer'];\n    if (folderPermEnabled) {\n      operations.push('Folder Permission');\n    }\n    operations.push('Share Admin', 'Divider');\n\n    if (repo.encrypted) {\n      operations.push('Change Password');\n    }\n    if (showResetPasswordMenuItem) {\n      operations.push('Reset Password');\n    }\n\n    if (isPro) {\n      const monitorOp = repo.monitored ? 'Unwatch File Changes' : 'Watch File Changes';\n      operations.push(monitorOp);\n    }\n\n    operations.push('API Token');\n    if (this.props.isPC && enableRepoSnapshotLabel) {\n      operations.push('Label Current State');\n    }\n    operations.push('Divider', 'History Setting');\n    if (enableRepoAutoDel) {\n      operations.push('Old Files Auto Delete');\n    }\n    return operations;\n  }\n\n  translateOperations = (item) => {\n    let translateResult = '';\n    switch(item) {\n      case 'Star':\n        translateResult = gettext('Star');\n        break;\n      case 'Unstar':\n        translateResult = gettext('Unstar');\n        break;\n      case 'Share':\n        translateResult = gettext('Share');\n        break;\n      case 'Delete':\n        translateResult = gettext('Delete');\n        break;\n      case 'Rename':\n        translateResult = gettext('Rename');\n        break;\n      case 'Transfer':\n        translateResult = gettext('Transfer');\n        break;\n      case 'History Setting':\n        translateResult = gettext('History Setting');\n        break;\n      case 'Change Password':\n        translateResult = gettext('Change Password');\n        break;\n      case 'Reset Password':\n        translateResult = gettext('Reset Password');\n        break;\n      case 'Watch File Changes':\n        translateResult = gettext('Watch File Changes');\n        break;\n      case 'Unwatch File Changes':\n        translateResult = gettext('Unwatch File Changes');\n        break;\n      case 'Folder Permission':\n        translateResult = gettext('Folder Permission');\n        break;\n      case 'Label Current State':\n        translateResult = gettext('Label Current State');\n        break;\n      case 'API Token':\n        translateResult = 'API Token'; // translation is not needed here\n        break;\n      case 'Share Admin':\n        translateResult = gettext('Share Admin');\n        break;\n      case 'Old Files Auto Delete':\n        translateResult = gettext('Auto Deletion Setting');\n        break;\n      default:\n        break;\n    }\n\n    return translateResult;\n  }\n\n  render() {\n    let operations = this.generatorOperations();\n\n    // pc menu\n    if (this.props.isPC) {\n      return (\n        <Dropdown isOpen={this.state.isItemMenuShow} toggle={this.toggleOperationMenu}>\n          <DropdownToggle\n            tag=\"i\"\n            role=\"button\"\n            tabIndex=\"0\"\n            className=\"sf-dropdown-toggle sf2-icon-caret-down\"\n            title={gettext('More Operations')}\n            aria-label={gettext('More Operations')}\n            onClick={this.onDropdownToggleClick}\n            onKeyDown={this.onDropdownToggleKeyDown}\n            data-toggle=\"dropdown\"\n          />\n          <DropdownMenu>\n            {operations.map((item, index)=> {\n              if (item == 'Divider') {\n                return <DropdownItem key={index} divider />;\n              } else {\n                return (<DropdownItem key={index} data-toggle={item} onClick={this.onMenuItemClick} onKeyDown={this.onMenuItemKeyDown}>{this.translateOperations(item)}</DropdownItem>);\n              }\n            })}\n          </DropdownMenu>\n        </Dropdown>\n      );\n    }\n\n    // mobile menu\n    operations.unshift('Delete');\n    operations.unshift('Share');\n    this.props.isStarred ? operations.unshift('Unstar') : operations.unshift('Star');\n\n    return (\n      <Dropdown isOpen={this.state.isItemMenuShow} toggle={this.toggleOperationMenu}>\n        <DropdownToggle\n          tag=\"i\"\n          className=\"sf-dropdown-toggle fa fa-ellipsis-v ml-0\"\n          title={gettext('More Operations')}\n          // onClick={this.clickOperationMenuToggle}\n          data-toggle=\"dropdown\"\n          aria-expanded={this.state.isItemMenuShow}\n        />\n        <div className={`${this.state.isItemMenuShow ? '' : 'd-none'}`} onClick={this.toggleOperationMenu}>\n          <div className=\"mobile-operation-menu-bg-layer\"></div>\n          <div className=\"mobile-operation-menu\">\n            {operations.map((item, index) => {\n              if (item != 'Divider') {\n                return (<DropdownItem key={index} className=\"mobile-menu-item\" data-toggle={item} onClick={this.onMenuItemClick}>{this.translateOperations(item)}</DropdownItem>);\n              }\n            })}\n          </div>\n        </div>\n      </Dropdown>\n    );\n  }\n}\n\nMylibRepoMenu.propTypes = propTypes;\n\nexport default MylibRepoMenu;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport Select from 'react-select';\nimport { gettext } from '../../utils/constants';\nimport OpIcon from '../op-icon';\n\nconst propTypes = {\n  isTextMode: PropTypes.bool.isRequired,\n  isEditIconShow: PropTypes.bool.isRequired,\n  currentPermission: PropTypes.string.isRequired,\n  onPermissionChanged: PropTypes.func.isRequired,\n};\n\nclass RepoAPITokenPermissionEditor extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isEditing: false,\n    };\n    this.options = [\n      { value: 'rw', label: <div>{gettext('Read-Write')}</div> },\n      { value: 'r', label: <div>{gettext('Read-Only')}</div> }\n    ];\n  }\n\n  componentDidMount() {\n    document.addEventListener('click', this.onHideSelect);\n  }\n\n  componentWillUnmount() {\n    document.removeEventListener('click', this.onHideSelect);\n  }\n\n  onHideSelect = () => {\n    this.setState({ isEditing: false });\n  }\n\n  onEditPermission = (e) => {\n    e.nativeEvent.stopImmediatePropagation();\n    this.setState({ isEditing: true });\n  }\n\n  onPermissionChanged = (e) => {\n    if (e.value !== this.props.currentPermission) {\n      this.props.onPermissionChanged(e.value);\n    }\n    this.setState({ isEditing: false });\n  }\n\n  onSelectHandler = (e) => {\n    e.nativeEvent.stopImmediatePropagation();\n  }\n\n  render() {\n    const { currentPermission, isTextMode } = this.props;\n    let optionTranslation = currentPermission === 'rw' ? gettext('Read-Write') : gettext('Read-Only');\n    return (\n      <div onClick={this.onSelectHandler}>\n        {(isTextMode && !this.state.isEditing) ?\n          <Fragment>\n            <span>{optionTranslation}</span>\n            {this.props.isEditIconShow &&\n              <OpIcon title={gettext('Edit')} className=\"fa fa-pencil-alt attr-action-icon\" op={this.onEditPermission} />\n            }\n          </Fragment>\n          :\n          <Select\n            options={this.options}\n            placeholder={optionTranslation}\n            onChange={this.onPermissionChanged}\n            captureMenuScroll={false}\n          />\n        }\n      </div>\n    );\n  }\n}\n\nRepoAPITokenPermissionEditor.propTypes = propTypes;\n\nexport default RepoAPITokenPermissionEditor;\n","import React, {Fragment} from 'react';\nimport PropTypes from 'prop-types';\nimport {gettext} from '../../utils/constants';\nimport {Modal, ModalHeader, ModalBody, Button, Input} from 'reactstrap';\nimport RepoAPITokenPermissionEditor from '../select-editor/repo-api-token-permission-editor';\nimport {seafileAPI} from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../toast';\nimport copy from 'copy-to-clipboard';\nimport Loading from '../loading';\nimport OpIcon from '../op-icon';\n\nconst apiTokenItemPropTypes = {\n  item: PropTypes.object.isRequired,\n  deleteAPIToken: PropTypes.func.isRequired,\n  updateAPIToken: PropTypes.func.isRequired,\n};\n\nclass APITokenItem extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOperationShow: false,\n    };\n  }\n\n  onMouseEnter = () => {\n    this.setState({isOperationShow: true});\n  };\n\n  onMouseLeave = () => {\n    this.setState({isOperationShow: false});\n  };\n\n  onDeleteAPIToken = () => {\n    this.props.deleteAPIToken(this.props.item.app_name);\n  };\n\n  onUpdateAPIToken = (permission) => {\n    this.props.updateAPIToken(this.props.item.app_name, permission);\n  };\n\n  onCopyAPIToken = () => {\n    let api_token = this.props.item.api_token;\n    copy(api_token);\n    toaster.success(gettext('API token is copied to the clipboard.'));\n  };\n\n  render() {\n    let item = this.props.item;\n\n    return (\n      <tr onMouseEnter={this.onMouseEnter} onMouseLeave={this.onMouseLeave} tabIndex=\"0\" onFocus={this.onMouseEnter}>\n        <td className=\"name\">{item.app_name}</td>\n        <td>\n          <RepoAPITokenPermissionEditor\n            isTextMode={true}\n            isEditIconShow={this.state.isOperationShow}\n            currentPermission={item.permission}\n            onPermissionChanged={this.onUpdateAPIToken}\n          />\n        </td>\n        <td>\n          <span>{item.api_token}</span>\n          {this.state.isOperationShow &&\n            <OpIcon\n              className=\"far fa-copy action-icon\"\n              op={this.onCopyAPIToken}\n              title={gettext('Copy')}\n            />\n          }\n        </td>\n        <td>\n          <OpIcon\n            className={`sf2-icon-x3 action-icon ${this.state.isOperationShow ? '' : 'hide'}`}\n            op={this.onDeleteAPIToken}\n            title={gettext('Delete')}\n          />\n        </td>\n      </tr>\n    );\n  }\n}\n\nAPITokenItem.propTypes = apiTokenItemPropTypes;\n\nconst propTypes = {\n  repo: PropTypes.object.isRequired,\n  onRepoAPITokenToggle: PropTypes.func.isRequired,\n};\n\nclass RepoAPITokenDialog extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      apiTokenList: [],\n      permission: 'rw',\n      appName: '',\n      errorMsg: '',\n      loading: true,\n      isSubmitBtnActive: true,\n    };\n    this.repo = this.props.repo;\n  }\n\n  listAPITokens = () => {\n    seafileAPI.listRepoAPITokens(this.repo.repo_id).then((res) => {\n      this.setState({\n        apiTokenList: res.data.repo_api_tokens,\n        loading: false,\n      });\n    }).catch(error => {\n      if (error.response.status === 403) {\n        this.setState({\n          errorMsg: gettext('Permission denied'),\n        });\n      } else {\n        this.handleError(error);\n      }\n    });\n  };\n\n  onInputChange = (e) => {\n    let appName = e.target.value;\n    this.setState({\n      appName: appName,\n    });\n  };\n\n  onKeyDown = (e) => {\n    if (e.keyCode === 13) {\n      e.preventDefault();\n      this.addAPIToken();\n    }\n  };\n\n  setPermission = (permission) => {\n    this.setState({permission: permission});\n  };\n\n  addAPIToken = () => {\n    if (!this.state.appName) {\n      return;\n    }\n\n    this.setState({\n      isSubmitBtnActive: false,\n    });\n    const {appName, permission, apiTokenList} = this.state;\n\n    seafileAPI.addRepoAPIToken(this.repo.repo_id, appName, permission).then((res) => {\n      apiTokenList.push(res.data);\n      this.setState({\n        apiTokenList: apiTokenList,\n        isSubmitBtnActive: true,\n      });\n    }).catch(error => {\n      this.handleError(error);\n      this.setState({\n        isSubmitBtnActive: true,\n      });\n    });\n  };\n\n  deleteAPIToken = (appName) => {\n    seafileAPI.deleteRepoAPIToken(this.repo.repo_id, appName).then((res) => {\n      const apiTokenList = this.state.apiTokenList.filter(item => {\n        return item.app_name !== appName;\n      });\n      this.setState({\n        apiTokenList: apiTokenList,\n      });\n    }).catch(error => {\n      this.handleError(error);\n    });\n  };\n\n  updateAPIToken = (appName, permission) => {\n    seafileAPI.updateRepoAPIToken(this.repo.repo_id, appName, permission).then((res) => {\n      let apiTokenList = this.state.apiTokenList.filter(item => {\n        if (item.app_name === appName) {\n          item.permission = permission;\n        }\n        return item;\n      });\n      this.setState({\n        apiTokenList: apiTokenList,\n      });\n    }).catch(error => {\n      this.handleError(error);\n    });\n  };\n\n  handleError = (e) => {\n    if (e.response) {\n      toaster.danger(e.response.data.error_msg || e.response.data.detail || gettext('Error'), {duration: 3});\n    } else {\n      toaster.danger(gettext('Please check the network.'), {duration: 3});\n    }\n  };\n\n  componentDidMount() {\n    this.listAPITokens();\n  }\n\n  renderContent = () => {\n    const renderAPITokenList = this.state.apiTokenList.map((item, index) => {\n      return (\n        <APITokenItem\n          key={index}\n          item={item}\n          deleteAPIToken={this.deleteAPIToken}\n          updateAPIToken={this.updateAPIToken}\n        />\n      );\n    });\n\n    const thead = (\n      <thead>\n        <tr>\n          <th width=\"20%\">{gettext('App Name')}</th>\n          <th width=\"20%\">{gettext('Permission')}</th>\n          <th width=\"48%\">API Token</th>\n          <th width=\"12%\"></th>\n        </tr>\n      </thead>\n    );\n    return (\n      <Fragment>\n        {this.state.errorMsg &&\n          <p className=\"error text-center\">{this.state.errorMsg}</p>\n        }\n        {!this.state.errorMsg &&\n        <Fragment>\n          <table className=\"w-xs-250\">\n            {thead}\n            <tbody>\n              <tr>\n                <td>\n                  <Input\n                    type=\"text\"\n                    id=\"appName\"\n                    value={this.state.appName}\n                    onChange={this.onInputChange}\n                    onKeyDown={this.onKeyDown}\n                  />\n                </td>\n                <td>\n                  <RepoAPITokenPermissionEditor\n                    isTextMode={false}\n                    isEditIconShow={false}\n                    currentPermission={this.state.permission}\n                    onPermissionChanged={this.setPermission}\n                  />\n                </td>\n                <td><span className=\"text-secondary\">--</span></td>\n                <td>\n                  <Button onClick={this.addAPIToken} disabled={!this.state.isSubmitBtnActive}>{gettext('Submit')}</Button>\n                </td>\n              </tr>\n            </tbody>\n          </table>\n          <div style={{minHeight: '10rem', maxHeight: '18rem'}}>\n            {this.state.apiTokenList.length !== 0 &&\n            <table className=\"table-thead-hidden w-xs-250\">\n              {thead}\n              <tbody>\n                {renderAPITokenList}\n              </tbody>\n            </table>\n            }\n          </div>\n          {this.state.loading && <Loading/>}\n        </Fragment>\n        }\n      </Fragment>\n    );\n  };\n\n  render() {\n    let repo = this.repo;\n\n    const itemName = '<span class=\"op-target\">' + Utils.HTMLescape(repo.repo_name) + '</span>';\n    const title = gettext('{placeholder} API Token').replace('{placeholder}', itemName);\n    return (\n      <Modal\n        isOpen={true} style={{maxWidth: '800px'}}\n        toggle={this.props.onRepoAPITokenToggle}\n      >\n        <ModalHeader toggle={this.props.onRepoAPITokenToggle}>\n          <p dangerouslySetInnerHTML={{__html: title}} className=\"m-0\"></p>\n        </ModalHeader>\n        <ModalBody>\n          <div className=\"o-auto\">\n            {this.renderContent()}\n          </div>\n        </ModalBody>\n      </Modal>\n    );\n  }\n}\n\nRepoAPITokenDialog.propTypes = propTypes;\n\nexport default RepoAPITokenDialog;\n","import React, { Component, Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Link } from '@gatsbyjs/reach-router';\nimport { Utils } from '../../../utils/utils';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { gettext, siteRoot } from '../../../utils/constants';\nimport Loading from '../../../components/loading';\nimport toaster from '../../../components/toast';\nimport EmptyTip from '../../../components/empty-tip';\n\nconst itemPropTypes = {\n  item: PropTypes.object.isRequired,\n  deleteItem: PropTypes.func.isRequired\n};\n\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOperationShow: false\n    };\n  }\n\n  onMouseEnter = () => {\n    this.setState({isOperationShow: true});\n  };\n\n  onMouseLeave = () => {\n    this.setState({isOperationShow: false});\n  };\n\n  onDeleteLink = (e) => {\n    e.preventDefault();\n    this.props.deleteItem(this.props.item);\n  };\n\n  render() {\n    let objUrl;\n    let item = this.props.item;\n    let path = item.path === '/' ? '/' : item.path.slice(0, item.path.length - 1);\n\n    if (item.is_dir) {\n      objUrl = `${siteRoot}library/${item.repo_id}/${encodeURIComponent(item.repo_name)}${Utils.encodePath(path)}`;\n    } else {\n      objUrl = `${siteRoot}lib/${item.repo_id}/file${Utils.encodePath(item.path)}`;\n    }\n\n    return (\n      <tr onMouseEnter={this.onMouseEnter} onMouseLeave={this.onMouseLeave} onFocus={this.onMouseEnter}>\n        <td className=\"name\">{item.creator_name}</td>\n        <td>\n          {item.is_dir ? <Link to={objUrl}>{item.obj_name}</Link> :\n            <a href={objUrl} target=\"_blank\" rel=\"noreferrer\">{item.obj_name}</a>}\n        </td>\n        <td>\n          <a href={item.link} target=\"_blank\" rel=\"noreferrer\">{item.link}</a>\n        </td>\n        <td>\n          <span\n            tabIndex=\"0\"\n            role=\"button\"\n            className={`sf2-icon-x3 action-icon ${this.state.isOperationShow ? '' : 'invisible'}`}\n            onClick={this.onDeleteLink}\n            onKeyDown={Utils.onKeyDown}\n            title={gettext('Delete')}\n            aria-label={gettext('Delete')}\n          >\n          </span>\n        </td>\n      </tr>\n    );\n  }\n}\n\nItem.propTypes = itemPropTypes;\n\nconst propTypes = {\n  repo: PropTypes.object.isRequired,\n};\n\nclass RepoShareAdminShareLinks extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      items: []\n    };\n  }\n\n  componentDidMount() {\n    seafileAPI.listRepoShareLinks(this.props.repo.repo_id).then((res) => {\n      this.setState({\n        loading: false,\n        items: res.data,\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  deleteItem = (item) => {\n    seafileAPI.deleteRepoShareLink(this.props.repo.repo_id, item.token).then(() => {\n      let items = this.state.items.filter(linkItem => {\n        return linkItem.token !== item.token;\n      });\n      this.setState({items: items});\n      let message = gettext('Successfully deleted 1 item');\n      toaster.success(message);\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  render() {\n    const { loading, errorMsg, items } = this.state;\n    return (\n      <Fragment>\n        {loading && <Loading />}\n        {!loading && errorMsg && <p className=\"error text-center mt-8\">{errorMsg}</p>}\n        {!loading && !errorMsg && !items.length &&\n        <EmptyTip forDialog={true}>\n          <p className=\"text-secondary\">{gettext('No share links')}</p>\n        </EmptyTip>\n        }\n        {!loading && !errorMsg && items.length > 0 &&\n        <table className=\"table-hover\">\n          <thead>\n            <tr>\n              <th width=\"22%\">{gettext('Creator')}</th>\n              <th width=\"20%\">{gettext('Name')}</th>\n              <th width=\"50%\">{gettext('Link')}</th>\n              <th width=\"8%\"></th>\n            </tr>\n          </thead>\n          <tbody>\n            {items.map((item, index) => {\n              return (\n                <Item\n                  key={index}\n                  item={item}\n                  deleteItem={this.deleteItem}\n                />\n              );\n            })}\n          </tbody>\n        </table>\n        }\n      </Fragment>\n    );\n  }\n}\n\nRepoShareAdminShareLinks.propTypes = propTypes;\n\nexport default RepoShareAdminShareLinks;\n","import React, { Component, Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Link } from '@gatsbyjs/reach-router';\nimport { Utils } from '../../../utils/utils';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { gettext, siteRoot } from '../../../utils/constants';\nimport Loading from '../../../components/loading';\nimport toaster from '../../../components/toast';\nimport EmptyTip from '../../../components/empty-tip';\n\nconst itemPropTypes = {\n  item: PropTypes.object.isRequired,\n  deleteItem: PropTypes.func.isRequired\n};\n\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOperationShow: false\n    };\n  }\n\n  onMouseEnter = () => {\n    this.setState({isOperationShow: true});\n  };\n\n  onMouseLeave = () => {\n    this.setState({isOperationShow: false});\n  };\n\n  onDeleteLink = (e) => {\n    e.preventDefault();\n    this.props.deleteItem(this.props.item);\n  };\n\n  render() {\n    let item = this.props.item;\n    let path = item.path === '/' ? '/' : item.path.slice(0, item.path.length - 1);\n    let objUrl = `${siteRoot}library/${item.repo_id}/${encodeURIComponent(item.repo_name)}${Utils.encodePath(path)}`;\n\n    return (\n      <tr onMouseEnter={this.onMouseEnter} onMouseLeave={this.onMouseLeave} onFocus={this.onMouseEnter}>\n        <td className=\"name\">{item.creator_name}</td>\n        <td>\n          <Link to={objUrl}>{item.obj_name}</Link>\n        </td>\n        <td>\n          <a href={item.link} target=\"_blank\" rel=\"noreferrer\">{item.link}</a>\n        </td>\n        <td>\n          <span\n            tabIndex=\"0\"\n            role=\"button\"\n            className={`sf2-icon-x3 action-icon ${this.state.isOperationShow ? '' : 'invisible'}`}\n            onClick={this.onDeleteLink}\n            onKeyDown={Utils.onKeyDown}\n            title={gettext('Delete')}\n            aria-label={gettext('Delete')}\n          >\n          </span>\n        </td>\n      </tr>\n    );\n  }\n}\n\nItem.propTypes = itemPropTypes;\n\nconst propTypes = {\n  repo: PropTypes.object.isRequired,\n};\n\nclass RepoShareAdminUploadLinks extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      items: [],\n    };\n  }\n\n  componentDidMount() {\n    seafileAPI.listRepoUploadLinks(this.props.repo.repo_id).then((res) => {\n      this.setState({\n        loading: false,\n        items: res.data,\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  deleteItem = (item) => {\n    seafileAPI.deleteRepoUploadLink(this.props.repo.repo_id, item.token).then(() => {\n      let items = this.state.items.filter(linkItem => {\n        return linkItem.token !== item.token;\n      });\n      this.setState({items: items});\n      let message = gettext('Successfully deleted 1 item');\n      toaster.success(message);\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  render() {\n    const { loading, errorMsg, items } = this.state;\n    return (\n      <Fragment>\n        {loading && <Loading />}\n        {!loading && errorMsg && <p className=\"error text-center mt-8\">{errorMsg}</p>}\n        {!loading && !errorMsg && !items.length &&\n        <EmptyTip forDialog={true}>\n          <p className=\"text-secondary\">{gettext('No upload links')}</p>\n        </EmptyTip>\n        }\n        {!loading && !errorMsg && items.length > 0 &&\n        <table className=\"table-hover\">\n          <thead>\n            <tr>\n              <th width=\"22%\">{gettext('Creator')}</th>\n              <th width=\"20%\">{gettext('Name')}</th>\n              <th width=\"50%\">{gettext('Link')}</th>\n              <th width=\"8%\"></th>\n            </tr>\n          </thead>\n          <tbody>\n            {items.map((item, index) => {\n              return (\n                <Item\n                  key={index}\n                  item={item}\n                  deleteItem={this.deleteItem}\n                />\n              );\n            })}\n          </tbody>\n        </table>\n        }\n      </Fragment>\n    );\n  }\n}\n\nRepoShareAdminUploadLinks.propTypes = propTypes;\n\nexport default RepoShareAdminUploadLinks;\n","import React, { Component, Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Link } from '@gatsbyjs/reach-router';\nimport { Utils } from '../../../utils/utils';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { gettext, siteRoot, isPro, username } from '../../../utils/constants';\nimport Loading from '../../../components/loading';\nimport toaster from '../../../components/toast';\nimport EmptyTip from '../../../components/empty-tip';\nimport SharePermissionEditor from '../../../components/select-editor/share-permission-editor';\n\nconst itemPropTypes = {\n  item: PropTypes.object.isRequired,\n  deleteItem: PropTypes.func.isRequired,\n  isRepoOwner: PropTypes.bool.isRequired\n};\n\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      permission: this.props.item.permission,\n      isOperationShow: false,\n      isShowPermEditor: false,\n    };\n    this.permissions = ['rw', 'r'];\n    if (isPro) {\n      if (this.props.item.path === '/' && this.props.isRepoOwner) {\n        this.permissions.push('admin');\n      }\n      this.permissions.push('cloud-edit', 'preview');\n    }\n  }\n\n  onMouseEnter = () => {\n    this.setState({isOperationShow: true});\n  };\n\n  onMouseLeave = () => {\n    this.setState({isOperationShow: false});\n  };\n\n  onDeleteLink = (e) => {\n    e.preventDefault();\n    this.props.deleteItem(this.props.item);\n  };\n\n  changePerm = (permission) => {\n    const item = this.props.item;\n    seafileAPI.updateShareToUserItemPermission(item.repo_id, item.path, 'user', item.share_to, permission).then(() => {\n      this.setState({\n        permission: permission,\n      });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  onEditPermission = (event) => {\n    event.nativeEvent.stopImmediatePropagation();\n    this.setState({isShowPermEditor: true});\n  }\n\n  render() {\n\n    let objUrl;\n    let item = this.props.item;\n    let path = item.path === '/' ? '/' : item.path.slice(0, item.path.length - 1);\n\n    objUrl = `${siteRoot}library/${item.repo_id}/${encodeURIComponent(item.repo_name)}${Utils.encodePath(path)}`;\n\n    return (\n      <tr onMouseEnter={this.onMouseEnter} onMouseLeave={this.onMouseLeave} onFocus={this.onMouseEnter}>\n        <td>\n          <Link to={objUrl}>{Utils.getFolderName(item.path)}</Link>\n        </td>\n        <td className=\"name\">{item.share_to_name}</td>\n        <td>\n          {!this.state.isShowPermEditor && (\n            <div>\n              <span>{item.permission_name || Utils.sharePerms(this.state.permission)}</span>\n              {this.state.isOperationShow && (\n                <a href=\"#\"\n                  role=\"button\"\n                  aria-label={gettext('Edit')}\n                  title={gettext('Edit')}\n                  className=\"fa fa-pencil-alt attr-action-icon\"\n                  onClick={this.onEditPermission}>\n                </a>\n              )}\n            </div>\n          )}\n          {this.state.isShowPermEditor && (\n            <SharePermissionEditor\n              repoID={item.repo_id}\n              isTextMode={true}\n              isEditIconShow={this.state.isOperationShow}\n              isEditing={true}\n              currentPermission={this.state.permission}\n              permissions={this.permissions}\n              onPermissionChanged={this.changePerm}\n            />\n          )}\n        </td>\n        <td>\n          <span\n            tabIndex=\"0\"\n            role=\"button\"\n            className={`sf2-icon-x3 action-icon ${this.state.isOperationShow ? '' : 'invisible'}`}\n            onClick={this.onDeleteLink}\n            onKeyDown={Utils.onKeyDown}\n            title={gettext('Delete')}\n            aria-label={gettext('Delete')}\n          >\n          </span>\n        </td>\n      </tr>\n    );\n  }\n}\n\nItem.propTypes = itemPropTypes;\n\nconst propTypes = {\n  repo: PropTypes.object.isRequired,\n};\n\nclass RepoShareAdminUserShares extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      items: [],\n    };\n  }\n\n  componentDidMount() {\n    seafileAPI.getAllRepoFolderShareInfo(this.props.repo.repo_id, 'user').then((res) => {\n      this.setState({\n        loading: false,\n        items: res.data.share_info_list,\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  deleteItem = (item) => {\n    seafileAPI.deleteShareToUserItem(item.repo_id, item.path, 'user', item.share_to).then(res => {\n      let items = this.state.items.filter(shareItem => {\n        return shareItem.path + shareItem.share_to !== item.path + item.share_to;\n      });\n      this.setState({items: items});\n      let message = gettext('Successfully deleted 1 item');\n      toaster.success(message);\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  render() {\n    const { loading, errorMsg, items } = this.state;\n    const { repo } = this.props;\n    const isRepoOwner = repo.owner_email === username;\n    return (\n      <Fragment>\n        {loading && <Loading />}\n        {!loading && errorMsg && <p className=\"error text-center mt-8\">{errorMsg}</p>}\n        {!loading && !errorMsg && !items.length &&\n        <EmptyTip forDialog={true}>\n          <p className=\"text-secondary\">{gettext('No user shares')}</p>\n        </EmptyTip>\n        }\n        {!loading && !errorMsg && items.length > 0 &&\n        <table className=\"table-hover\">\n          <thead>\n            <tr>\n              <th width=\"30%\">{gettext('Name')}</th>\n              <th width=\"30%\">{gettext('User')}</th>\n              <th width=\"30%\">{gettext('Permission')}</th>\n              <th width=\"10%\"></th>\n            </tr>\n          </thead>\n          <tbody>\n            {items.map((item, index) => {\n              return (\n                <Item\n                  key={index}\n                  item={item}\n                  deleteItem={this.deleteItem}\n                  isRepoOwner={isRepoOwner}\n                />\n              );\n            })}\n          </tbody>\n        </table>\n        }\n      </Fragment>\n    );\n  }\n}\n\nRepoShareAdminUserShares.propTypes = propTypes;\n\nexport default RepoShareAdminUserShares;\n","import React, { Component, Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Link } from '@gatsbyjs/reach-router';\nimport { Utils } from '../../../utils/utils';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { gettext, siteRoot, isPro, username } from '../../../utils/constants';\nimport Loading from '../../../components/loading';\nimport toaster from '../../../components/toast';\nimport EmptyTip from '../../../components/empty-tip';\nimport SharePermissionEditor from '../../../components/select-editor/share-permission-editor';\n\nconst itemPropTypes = {\n  item: PropTypes.object.isRequired,\n  deleteItem: PropTypes.func.isRequired,\n  isRepoOwner: PropTypes.bool.isRequired\n};\n\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      permission: this.props.item.permission,\n      isOperationShow: false,\n      isShowPermEditor: false,\n    };\n    this.permissions = ['rw', 'r'];\n    if (isPro) {\n      if (this.props.item.path === '/' && this.props.isRepoOwner) {\n        this.permissions.push('admin');\n      }\n      this.permissions.push('cloud-edit', 'preview');\n    }\n  }\n\n  onMouseEnter = () => {\n    this.setState({isOperationShow: true});\n  };\n\n  onMouseLeave = () => {\n    this.setState({isOperationShow: false});\n  };\n\n  onDeleteLink = (e) => {\n    e.preventDefault();\n    this.props.deleteItem(this.props.item);\n  };\n\n  changePerm = (permission) => {\n    const item = this.props.item;\n    seafileAPI.updateShareToGroupItemPermission(item.repo_id, item.path, 'group', item.share_to, permission).then(() => {\n      this.setState({\n        permission: permission,\n      });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  onEditPermission = (event) => {\n    event.nativeEvent.stopImmediatePropagation();\n    this.setState({isShowPermEditor: true});\n  }\n\n  render() {\n\n    let objUrl;\n    let item = this.props.item;\n    let path = item.path === '/' ? '/' : item.path.slice(0, item.path.length - 1);\n\n    objUrl = `${siteRoot}library/${item.repo_id}/${encodeURIComponent(item.repo_name)}${Utils.encodePath(path)}`;\n\n    return (\n      <tr onMouseEnter={this.onMouseEnter} onMouseLeave={this.onMouseLeave} onFocus={this.onMouseEnter}>\n        <td>\n          <Link to={objUrl}>{Utils.getFolderName(item.path)}</Link>\n        </td>\n        <td className=\"name\">{item.share_to_name}</td>\n        <td>\n          {!this.state.isShowPermEditor && (\n            <div>\n              <span>{item.permission_name || Utils.sharePerms(this.state.permission)}</span>\n              {this.state.isOperationShow && (\n                <a href=\"#\"\n                  role=\"button\"\n                  aria-label={gettext('Edit')}\n                  title={gettext('Edit')}\n                  className=\"fa fa-pencil-alt attr-action-icon\"\n                  onClick={this.onEditPermission}>\n                </a>\n              )}\n            </div>\n          )}\n          {this.state.isShowPermEditor && (\n            <SharePermissionEditor\n              repoID={item.repo_id}\n              isTextMode={true}\n              isEditIconShow={this.state.isOperationShow}\n              isEditing={true}\n              currentPermission={this.state.permission}\n              permissions={this.permissions}\n              onPermissionChanged={this.changePerm}\n            />\n          )}\n        </td>\n        <td>\n          <span\n            tabIndex=\"0\"\n            role=\"button\"\n            className={`sf2-icon-x3 action-icon ${this.state.isOperationShow ? '' : 'invisible'}`}\n            onClick={this.onDeleteLink}\n            onKeyDown={Utils.onKeyDown}\n            title={gettext('Delete')}\n            aria-label={gettext('Delete')}\n          >\n          </span>\n        </td>\n      </tr>\n    );\n  }\n}\n\nItem.propTypes = itemPropTypes;\n\nconst propTypes = {\n  repo: PropTypes.object.isRequired,\n};\n\nclass RepoShareAdminGroupShares extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      items: [],\n    };\n  }\n\n  componentDidMount() {\n    seafileAPI.getAllRepoFolderShareInfo(this.props.repo.repo_id, 'group').then((res) => {\n      this.setState({\n        loading: false,\n        items: res.data.share_info_list,\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  deleteItem = (item) => {\n    seafileAPI.deleteShareToGroupItem(item.repo_id, item.path, 'group', item.share_to).then(res => {\n      let items = this.state.items.filter(shareItem => {\n        return shareItem.path + shareItem.share_to !== item.path + item.share_to;\n      });\n      this.setState({items: items});\n      let message = gettext('Successfully deleted 1 item');\n      toaster.success(message);\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  render() {\n    const { loading, errorMsg, items } = this.state;\n    const { repo } = this.props;\n    const isRepoOwner = repo.owner_email === username;\n    return (\n      <Fragment>\n        {loading && <Loading />}\n        {!loading && errorMsg && <p className=\"error text-center mt-8\">{errorMsg}</p>}\n        {!loading && !errorMsg && !items.length &&\n        <EmptyTip forDialog={true}>\n          <p className=\"text-secondary\">{gettext('No group shares')}</p>\n        </EmptyTip>\n        }\n        {!loading && !errorMsg && items.length > 0 &&\n        <table className=\"table-hover\">\n          <thead>\n            <tr>\n              <th width=\"30%\">{gettext('Name')}</th>\n              <th width=\"30%\">{gettext('Group')}</th>\n              <th width=\"30%\">{gettext('Permission')}</th>\n              <th width=\"10%\"></th>\n            </tr>\n          </thead>\n          <tbody>\n            {items.map((item, index) => {\n              return (\n                <Item\n                  key={index}\n                  item={item}\n                  deleteItem={this.deleteItem}\n                  isRepoOwner={isRepoOwner}\n                />\n              );\n            })}\n          </tbody>\n        </table>\n        }\n      </Fragment>\n    );\n  }\n}\n\nRepoShareAdminGroupShares.propTypes = propTypes;\n\nexport default RepoShareAdminGroupShares;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Modal, ModalHeader, ModalBody, TabContent, TabPane, Nav, NavItem, NavLink } from 'reactstrap';\nimport { gettext, canGenerateShareLink, canGenerateUploadLink } from '../../utils/constants';\nimport RepoShareAdminShareLinks from './repo-share-admin/share-links';\nimport RepoShareAdminUploadLinks from './repo-share-admin/upload-links';\nimport RepoShareAdminUserShares from './repo-share-admin/user-shares';\nimport RepoShareAdminGroupShares from './repo-share-admin/group-shares';\n\nconst propTypes = {\n  repo: PropTypes.object.isRequired,\n  toggleDialog: PropTypes.func.isRequired,\n};\n\nclass RepoShareAdminDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.enableShareLink = !this.props.repo.encrypted && canGenerateShareLink;\n    this.enableUploadLink = !this.props.repo.encrypted && canGenerateUploadLink;\n    this.state = {\n      activeTab: this.getInitialActiveTab()\n    };\n  }\n\n  getInitialActiveTab = () => {\n    if (this.enableShareLink) {\n      return 'shareLink';\n    } else if (this.enableUploadLink) {\n      return 'uploadLink';\n    } else {\n      return 'shareToUser';\n    }\n  }\n\n  toggle = (tab) => {\n    if (this.state.activeTab !== tab) {\n      this.setState({ activeTab: tab });\n    }\n  }\n\n  onTabKeyDown = (e) => {\n    if (e.key == 'Enter' || e.key == 'Space') {\n      e.target.click();\n    }\n  }\n\n  render() {\n    const { activeTab } = this.state;\n    const { repo_name: repoName } = this.props.repo;\n\n    return (\n      <div>\n        <Modal isOpen={true} style={{maxWidth: '760px'}} className=\"share-dialog\" toggle={this.props.toggleDialog}>\n          <ModalHeader toggle={this.props.toggleDialog}>\n            <span className=\"op-target\" title={repoName}>{repoName}</span> {gettext('Share Admin')}\n          </ModalHeader>\n          <ModalBody className=\"dialog-list-container share-dialog-content\" role=\"tablist\">\n            <Fragment>\n              <div className=\"share-dialog-side\">\n                <Nav pills>\n                  {this.enableShareLink &&\n                  <NavItem role=\"tab\" aria-selected={activeTab === 'shareLink'} aria-controls=\"share-link-panel\">\n                    <NavLink className={activeTab === 'shareLink' ? 'active' : ''} onClick={(this.toggle.bind(this, 'shareLink'))} tabIndex=\"0\" onKeyDown={this.onTabKeyDown}>\n                      {gettext('Share Links')}\n                    </NavLink>\n                  </NavItem>\n                  }\n                  {this.enableUploadLink &&\n                    <NavItem role=\"tab\" aria-selected={activeTab === 'uploadLink'} aria-controls=\"upload-link-panel\">\n                      <NavLink className={activeTab === 'uploadLink' ? 'active' : ''} onClick={this.toggle.bind(this, 'uploadLink')} tabIndex=\"0\" onKeyDown={this.onTabKeyDown}>\n                        {gettext('Upload Links')}\n                      </NavLink>\n                    </NavItem>\n                  }\n                  <NavItem role=\"tab\" aria-selected={activeTab === 'shareToUser'} aria-controls=\"share-to-user-panel\">\n                    <NavLink className={activeTab === 'shareToUser' ? 'active' : ''} onClick={this.toggle.bind(this, 'shareToUser')} tabIndex=\"0\" onKeyDown={this.onTabKeyDown}>\n                      {gettext('User Shares')}\n                    </NavLink>\n                  </NavItem>\n                  <NavItem role=\"tab\" aria-selected={activeTab === 'shareToGroup'} aria-controls=\"share-to-group-panel\">\n                    <NavLink className={activeTab === 'shareToGroup' ? 'active' : ''} onClick={this.toggle.bind(this, 'shareToGroup')} tabIndex=\"0\" onKeyDown={this.onTabKeyDown}>\n                      {gettext('Group Shares')}\n                    </NavLink>\n                  </NavItem>\n                </Nav>\n              </div>\n              <div className=\"share-dialog-main\">\n                <TabContent activeTab={this.state.activeTab}>\n                  {(this.enableShareLink && activeTab === 'shareLink') &&\n                    <TabPane tabId=\"shareLink\" role=\"tabpanel\" id=\"share-link-panel\">\n                      <RepoShareAdminShareLinks\n                        repo={this.props.repo}\n                      />\n                    </TabPane>\n                  }\n                  {(this.enableUploadLink && activeTab === 'uploadLink') &&\n                    <TabPane tabId=\"uploadLink\" role=\"tabpanel\" id=\"upload-link-panel\">\n                      <RepoShareAdminUploadLinks\n                        repo={this.props.repo}\n                      />\n                    </TabPane>\n                  }\n                  {activeTab === 'shareToUser' &&\n                    <TabPane tabId=\"shareToUser\" role=\"tabpanel\" id=\"share-to-user-panel\">\n                      <RepoShareAdminUserShares\n                        repo={this.props.repo}\n                      />\n                    </TabPane>\n                  }\n                  {activeTab === 'shareToGroup' &&\n                    <TabPane tabId=\"shareToGroup\" role=\"tabpanel\" id=\"share-to-group-panel\">\n                      <RepoShareAdminGroupShares\n                        repo={this.props.repo}\n                      />\n                    </TabPane>\n                  }\n                </TabContent>\n              </div>\n            </Fragment>\n          </ModalBody>\n        </Modal>\n      </div>\n    );\n  }\n}\n\nRepoShareAdminDialog.propTypes = propTypes;\n\nexport default RepoShareAdminDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter, Form, FormGroup, Label, Input, Alert } from 'reactstrap';\nimport { gettext } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../toast';\n\nconst propTypes = {\n  toggleDialog: PropTypes.func.isRequired,\n  repoID: PropTypes.string.isRequired,\n};\n\nclass LibOldFilesAutoDelDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      autoDelDays: 0,\n      isAutoDel: false,\n      errorInfo: '',\n    };\n  }\n\n  componentDidMount() {\n    seafileAPI.getRepoOldFilesAutoDelDays(this.props.repoID).then(res => {\n      this.setState({\n        autoDelDays: res.data.auto_delete_days,\n        isAutoDel: res.data.auto_delete_days > 0,\n      });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  submit = () => {\n    let daysNeedTobeSet;\n\n    if (this.state.isAutoDel) {\n      daysNeedTobeSet = this.state.autoDelDays;\n\n      let reg = /^-?\\d+$/;\n      let isvalid_days = reg.test(daysNeedTobeSet);\n      if (!isvalid_days || daysNeedTobeSet <= 0) {\n        this.setState({\n          errorInfo: gettext('Please enter a positive integer'),\n        });\n        return;\n      }\n\n    } else {\n      daysNeedTobeSet = 0;    // if no auto del, give 0 to server\n    }\n\n\n    let repoID = this.props.repoID;\n\n    seafileAPI.setRepoOldFilesAutoDelDays(repoID, daysNeedTobeSet).then(res => {\n      this.props.toggleDialog();\n      toaster.success(gettext('Successfully set it.'));\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  handleKeyPress = (e) => {\n    if (e.key === 'Enter') {\n      this.submit();\n      e.preventDefault();\n    }\n  }\n\n  onChange = (e) => {\n    let days = e.target.value;\n    this.setState({\n      autoDelDays: days,\n    });\n  }\n\n  updateRadioCheck = (type) => {\n    if (type === 'noAutoDel') {\n      this.setState({\n        isAutoDel: false,\n      });\n    } else if (type === 'autoDel') {\n      this.setState({\n        isAutoDel: true,\n      });\n    }\n  }\n\n  render() {\n    return (\n      <Modal isOpen={true}>\n        <ModalHeader toggle={this.props.toggleDialog}>\n          {gettext('Auto deletion')}\n        </ModalHeader>\n        <ModalBody>\n          <Form>\n            <FormGroup check>\n              <Input type=\"radio\" name=\"radio1\" checked={!this.state.isAutoDel} onChange={() =>{this.updateRadioCheck('noAutoDel');}}/>{' '}\n              <Label>{gettext('Do not automatically delete files')}</Label>\n            </FormGroup>\n            <FormGroup check>\n              <Input type=\"radio\" name=\"radio1\" checked={this.state.isAutoDel} onChange={() =>{this.updateRadioCheck('autoDel');}}/>{' '}\n              <Label>{gettext('Automatically delete files that are not modified within certain days:')}</Label>\n              <Input\n                type=\"text\"\n                className=\"expire-input\"\n                value={this.state.autoDelDays}\n                disabled={!this.state.isAutoDel}\n                onChange={this.onChange}\n                onKeyDown={this.handleKeyPress}\n              />{' '}\n              <Label><span>{gettext('days')}</span></Label>\n            </FormGroup>\n            {this.state.errorInfo && <Alert color=\"danger\">{this.state.errorInfo}</Alert>}\n          </Form>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.props.toggleDialog}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.submit}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nLibOldFilesAutoDelDialog.propTypes = propTypes;\n\nexport default LibOldFilesAutoDelDialog;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport MediaQuery from 'react-responsive';\nimport moment from 'moment';\nimport { Link, navigate } from '@gatsbyjs/reach-router';\nimport { Utils } from '../../utils/utils';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { gettext, siteRoot, storages } from '../../utils/constants';\nimport ModalPortal from '../../components/modal-portal';\nimport ShareDialog from '../../components/dialog/share-dialog';\nimport toaster from '../../components/toast';\nimport DeleteRepoDialog from '../../components/dialog/delete-repo-dialog';\nimport TransferDialog from '../../components/dialog/transfer-dialog';\nimport LibHistorySettingDialog from '../../components/dialog/lib-history-setting-dialog';\nimport ChangeRepoPasswordDialog from '../../components/dialog/change-repo-password-dialog';\nimport ResetEncryptedRepoPasswordDialog from '../../components/dialog/reset-encrypted-repo-password-dialog';\nimport LabelRepoStateDialog from '../../components/dialog/label-repo-state-dialog';\nimport LibSubFolderPermissionDialog from '../../components/dialog/lib-sub-folder-permission-dialog';\nimport Rename from '../../components/rename';\nimport MylibRepoMenu from './mylib-repo-menu';\nimport RepoAPITokenDialog from '../../components/dialog/repo-api-token-dialog';\nimport RepoShareAdminDialog from '../../components/dialog/repo-share-admin-dialog';\nimport LibOldFilesAutoDelDialog from '../../components/dialog/lib-old-files-auto-del-dialog';\nimport RepoMonitoredIcon from '../../components/repo-monitored-icon';\n\nconst propTypes = {\n  repo: PropTypes.object.isRequired,\n  isItemFreezed: PropTypes.bool.isRequired,\n  onFreezedItem: PropTypes.func.isRequired,\n  onUnfreezedItem: PropTypes.func.isRequired,\n  onRenameRepo: PropTypes.func.isRequired,\n  onDeleteRepo: PropTypes.func.isRequired,\n  onTransferRepo: PropTypes.func.isRequired,\n  onRepoClick: PropTypes.func.isRequired,\n};\n\nclass MylibRepoListItem extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOpIconShow: false,\n      isStarred: this.props.repo.starred,\n      isRenaming: false,\n      isShareDialogShow: false,\n      isDeleteDialogShow: false,\n      isTransferDialogShow: false,\n      isHistorySettingDialogShow: false,\n      isChangePasswordDialogShow: false,\n      isResetPasswordDialogShow: false,\n      isLabelRepoStateDialogOpen: false,\n      isFolderPermissionDialogShow: false,\n      isAPITokenDialogShow: false,\n      isRepoShareAdminDialogOpen: false,\n      isRepoDeleted: false,\n      isOldFilesAutoDelDialogOpen: false,\n    };\n  }\n\n  onFocus = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        isOpIconShow: true\n      });\n    }\n  }\n\n  onMouseEnter = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        isOpIconShow: true,\n        highlight: true,\n      });\n    }\n  }\n\n  onMouseLeave = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        isOpIconShow: false,\n        highlight: false\n      });\n    }\n  }\n\n  onMenuItemClick = (item) => {\n    switch(item) {\n      case 'Star':\n      case 'Unstar':\n        this.onToggleStarRepo();\n        break;\n      case 'Share':\n        this.onShareToggle();\n        break;\n      case 'Delete':\n        this.onDeleteToggle();\n        break;\n      case 'Rename':\n        this.onRenameToggle();\n        break;\n      case 'Transfer':\n        this.onTransferToggle();\n        break;\n      case 'History Setting':\n        this.onHistorySettingToggle();\n        break;\n      case 'Change Password':\n        this.onChangePasswordToggle();\n        break;\n      case 'Reset Password':\n        this.onResetPasswordToggle();\n        break;\n      case 'Watch File Changes':\n        this.watchFileChanges();\n        break;\n      case 'Unwatch File Changes':\n        this.unwatchFileChanges();\n        break;\n      case 'Folder Permission':\n        this.onFolderPermissionToggle();\n        break;\n      case 'Label Current State':\n        this.onLabelToggle();\n        break;\n      case 'API Token':\n        this.onAPITokenToggle();\n        break;\n      case 'Share Admin':\n        this.toggleRepoShareAdminDialog();\n        break;\n      case 'Old Files Auto Delete':\n        this.toggleOldFilesAutoDelDialog();\n        break;\n      default:\n        break;\n    }\n  }\n\n  visitRepo = () => {\n    if (!this.state.isRenaming && this.props.repo.repo_name) {\n      navigate(this.repoURL);\n    }\n  }\n\n  onRepoClick = () => {\n    this.props.onRepoClick(this.props.repo);\n  }\n\n  onToggleStarRepo = (e) => {\n    e.preventDefault();\n    const repoName = this.props.repo.repo_name;\n    if (this.state.isStarred) {\n      seafileAPI.unstarItem(this.props.repo.repo_id, '/').then(() => {\n        this.setState({isStarred: !this.state.isStarred});\n        const msg = gettext('Successfully unstarred {library_name_placeholder}.')\n          .replace('{library_name_placeholder}', repoName);\n        toaster.success(msg);\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    } else {\n      seafileAPI.starItem(this.props.repo.repo_id, '/').then(() => {\n        this.setState({isStarred: !this.state.isStarred});\n        const msg = gettext('Successfully starred {library_name_placeholder}.')\n          .replace('{library_name_placeholder}', repoName);\n        toaster.success(msg);\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    }\n  }\n\n  watchFileChanges = () => {\n    const { repo } = this.props;\n    seafileAPI.monitorRepo(repo.repo_id).then(() => {\n      this.props.onMonitorRepo(repo, true);\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  unwatchFileChanges = () => {\n    const { repo } = this.props;\n    seafileAPI.unMonitorRepo(repo.repo_id).then(() => {\n      this.props.onMonitorRepo(repo, false);\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  onShareToggle = (e) => {\n    // when close share dialog after send share link email,\n    // there is no event\n    if (e != undefined) {\n      e.preventDefault();\n    }\n    this.setState({isShareDialogShow: !this.state.isShareDialogShow});\n  }\n\n  onDeleteToggle = (e) => {\n    e.preventDefault();\n    this.setState({isDeleteDialogShow: !this.state.isDeleteDialogShow});\n  }\n\n  onRenameToggle = () => {\n    this.props.onFreezedItem();\n    this.setState({isRenaming: !this.state.isRenaming});\n  }\n\n  onTransferToggle = () => {\n    this.setState({isTransferDialogShow: !this.state.isTransferDialogShow});\n  }\n\n  onHistorySettingToggle = () => {\n    this.setState({isHistorySettingDialogShow: !this.state.isHistorySettingDialogShow});\n  }\n\n  onChangePasswordToggle = () => {\n    this.setState({isChangePasswordDialogShow: !this.state.isChangePasswordDialogShow});\n  }\n\n  onResetPasswordToggle = () => {\n    this.setState({isResetPasswordDialogShow: !this.state.isResetPasswordDialogShow});\n  }\n\n  onLabelToggle = () => {\n    this.setState({isLabelRepoStateDialogOpen: !this.state.isLabelRepoStateDialogOpen});\n  }\n\n  onFolderPermissionToggle = () => {\n    this.setState({isFolderPermissionDialogShow: !this.state.isFolderPermissionDialogShow});\n  }\n\n  onAPITokenToggle = () => {\n    this.setState({isAPITokenDialogShow: !this.state.isAPITokenDialogShow});\n  }\n\n  toggleRepoShareAdminDialog = () => {\n    this.setState({isRepoShareAdminDialogOpen: !this.state.isRepoShareAdminDialogOpen});\n  }\n\n  toggleOldFilesAutoDelDialog = () => {\n    this.setState({isOldFilesAutoDelDialogOpen: !this.state.isOldFilesAutoDelDialogOpen});\n  }\n\n  onUnfreezedItem = () => {\n    this.setState({\n      highlight: false,\n      isOpIconShow: false,\n    });\n    this.props.onUnfreezedItem();\n  }\n\n  onRenameConfirm = (newName) => {\n    let repo = this.props.repo;\n    let repoID = repo.repo_id;\n    seafileAPI.renameRepo(repoID, newName).then(() => {\n      this.props.onRenameRepo(repo, newName);\n      this.onRenameCancel();\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  onRenameCancel = () => {\n    this.props.onUnfreezedItem();\n    this.setState({isRenaming: !this.state.isRenaming});\n  }\n\n  onTransferRepo = (user) => {\n    let repoID = this.props.repo.repo_id;\n    seafileAPI.transferRepo(repoID, user.email).then(res => {\n      this.props.onTransferRepo(repoID);\n      let message = gettext('Successfully transferred the library.');\n      toaster.success(message);\n    }).catch(error => {\n      if (error.response){\n        toaster.danger(error.response.data.error_msg || gettext('Error'), {duration: 3});\n      } else {\n        toaster.danger(gettext('Failed. Please check the network.'), {duration: 3});\n      }\n    });\n    this.onTransferToggle();\n  }\n\n  onDeleteRepo = (repo) => {\n    seafileAPI.deleteRepo(repo.repo_id).then((res) => {\n\n      this.setState({\n        isRepoDeleted: true,\n        isDeleteDialogShow: false,\n      });\n\n      this.props.onDeleteRepo(repo);\n      let name = repo.repo_name;\n      var msg = gettext('Successfully deleted {name}.').replace('{name}', name);\n      toaster.success(msg);\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      if (errMessage === gettext('Error')) {\n        let name = repo.repo_name;\n        errMessage = gettext('Failed to delete {name}.').replace('{name}', name);\n      }\n      toaster.danger(errMessage);\n\n      this.setState({isRepoDeleted: false});\n    });\n  }\n\n  renderPCUI = () => {\n    let repo = this.props.repo;\n    let iconUrl = Utils.getLibIconUrl(repo);\n    let iconTitle = Utils.getLibIconTitle(repo);\n    let repoURL = `${siteRoot}library/${repo.repo_id}/${Utils.encodePath(repo.repo_name)}/`;\n    return (\n      <tr className={this.state.highlight ? 'tr-highlight' : ''} onMouseEnter={this.onMouseEnter} onMouseLeave={this.onMouseLeave} onClick={this.onRepoClick} onFocus={this.onFocus}>\n        <td className=\"text-center\">\n          <a href=\"#\" role=\"button\" aria-label={this.state.isStarred ? gettext('Unstar') : gettext('Star')} onClick={this.onToggleStarRepo}>\n            <i className={`fa-star ${this.state.isStarred ? 'fas' : 'far star-empty'}`}></i>\n          </a>\n        </td>\n        <td><img src={iconUrl} title={iconTitle} alt={iconTitle} width=\"24\" /></td>\n        <td>\n          {this.state.isRenaming && (\n            <Rename\n              name={repo.repo_name}\n              onRenameConfirm={this.onRenameConfirm}\n              onRenameCancel={this.onRenameCancel}\n            />\n          )}\n          {!this.state.isRenaming && repo.repo_name && (\n            <Fragment>\n              <Link to={repoURL}>{repo.repo_name}</Link>\n              {repo.monitored && <RepoMonitoredIcon repoID={repo.repo_id} />}\n            </Fragment>\n          )}\n          {!this.state.isRenaming && !repo.repo_name &&\n            (gettext('Broken (please contact your administrator to fix this library)'))\n          }\n        </td>\n        <td>\n          {(repo.repo_name && this.state.isOpIconShow) && (\n            <div>\n              <a href=\"#\" className=\"op-icon sf2-icon-share\" title={gettext('Share')} role=\"button\" aria-label={gettext('Share')} onClick={this.onShareToggle}></a>\n              <a href=\"#\" className=\"op-icon sf2-icon-delete\" title={gettext('Delete')} role=\"button\" aria-label={gettext('Delete')} onClick={this.onDeleteToggle}></a>\n              <MylibRepoMenu\n                isPC={true}\n                repo={this.props.repo}\n                onMenuItemClick={this.onMenuItemClick}\n                onFreezedItem={this.props.onFreezedItem}\n                onUnfreezedItem={this.onUnfreezedItem}\n              />\n            </div>\n          )}\n        </td>\n        <td>{repo.size}</td>\n        {storages.length > 0 && <td>{repo.storage_name}</td>}\n        <td title={moment(repo.last_modified).format('llll')}>{moment(repo.last_modified).fromNow()}</td>\n      </tr>\n    );\n  }\n\n  renderMobileUI = () => {\n    let repo = this.props.repo;\n    let iconUrl = Utils.getLibIconUrl(repo);\n    let iconTitle = Utils.getLibIconTitle(repo);\n    let repoURL = this.repoURL = `${siteRoot}library/${repo.repo_id}/${Utils.encodePath(repo.repo_name)}/`;\n\n    return (\n      <tr className={this.state.highlight ? 'tr-highlight' : ''}  onMouseEnter={this.onMouseEnter} onMouseLeave={this.onMouseLeave} onClick={this.onRepoClick}>\n        <td onClick={this.visitRepo}><img src={iconUrl} title={iconTitle} alt={iconTitle} width=\"24\" /></td>\n        <td onClick={this.visitRepo}>\n          {this.state.isRenaming && (\n            <Rename\n              name={repo.repo_name}\n              onRenameConfirm={this.onRenameConfirm}\n              onRenameCancel={this.onRenameCancel}\n            />\n          )}\n          {!this.state.isRenaming && repo.repo_name && (\n            <div>\n              <Link to={repoURL}>{repo.repo_name}</Link>\n              {repo.monitored && <RepoMonitoredIcon repoID={repo.repo_id} />}\n            </div>\n          )}\n          {!this.state.isRenaming && !repo.repo_name &&\n            <div>(gettext('Broken (please contact your administrator to fix this library)'))</div>\n          }\n          <span className=\"item-meta-info\">{repo.size}</span>\n          <span className=\"item-meta-info\" title={moment(repo.last_modified).format('llll')}>{moment(repo.last_modified).fromNow()}</span>\n        </td>\n        <td>\n          {repo.repo_name && (\n            <MylibRepoMenu\n              repo={this.props.repo}\n              isStarred={this.state.isStarred}\n              onMenuItemClick={this.onMenuItemClick}\n              onFreezedItem={this.props.onFreezedItem}\n              onUnfreezedItem={this.onUnfreezedItem}\n            />\n          )}\n        </td>\n      </tr>\n    );\n  }\n\n  render() {\n    let repo = this.props.repo;\n    return (\n      <Fragment>\n        <MediaQuery query=\"(min-width: 768px)\">\n          {this.renderPCUI()}\n        </MediaQuery>\n        <MediaQuery query=\"(max-width: 767.8px)\">\n          {this.renderMobileUI()}\n        </MediaQuery>\n        {this.state.isShareDialogShow && (\n          <ModalPortal>\n            <ShareDialog\n              itemType={'library'}\n              itemName={repo.repo_name}\n              itemPath={'/'}\n              repoID={repo.repo_id}\n              repoEncrypted={repo.encrypted}\n              enableDirPrivateShare={true}\n              userPerm={repo.permission}\n              toggleDialog={this.onShareToggle}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isDeleteDialogShow && (\n          <ModalPortal>\n            <DeleteRepoDialog\n              repo={repo}\n              isRepoDeleted={this.state.isRepoDeleted}\n              onDeleteRepo={this.onDeleteRepo}\n              toggle={this.onDeleteToggle}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isTransferDialogShow && (\n          <ModalPortal>\n            <TransferDialog\n              itemName={repo.repo_name}\n              submit={this.onTransferRepo}\n              toggleDialog={this.onTransferToggle}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isHistorySettingDialogShow && (\n          <ModalPortal>\n            <LibHistorySettingDialog\n              repoID={repo.repo_id}\n              itemName={repo.repo_name}\n              toggleDialog={this.onHistorySettingToggle}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isChangePasswordDialogShow && (\n          <ModalPortal>\n            <ChangeRepoPasswordDialog\n              repoID={repo.repo_id}\n              repoName={repo.repo_name}\n              toggleDialog={this.onChangePasswordToggle}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isResetPasswordDialogShow && (\n          <ModalPortal>\n            <ResetEncryptedRepoPasswordDialog\n              repoID={repo.repo_id}\n              toggleDialog={this.onResetPasswordToggle}\n            />\n          </ModalPortal>\n        )}\n\n        {this.state.isLabelRepoStateDialogOpen && (\n          <ModalPortal>\n            <LabelRepoStateDialog\n              repoID={repo.repo_id}\n              repoName={repo.repo_name}\n              toggleDialog={this.onLabelToggle}\n            />\n          </ModalPortal>\n        )}\n\n        {this.state.isFolderPermissionDialogShow && (\n          <ModalPortal>\n            <LibSubFolderPermissionDialog\n              toggleDialog={this.onFolderPermissionToggle}\n              repoID={repo.repo_id}\n              repoName={repo.repo_name}\n            />\n          </ModalPortal>\n        )}\n\n        {this.state.isAPITokenDialogShow && (\n          <ModalPortal>\n            <RepoAPITokenDialog\n              repo={repo}\n              onRepoAPITokenToggle={this.onAPITokenToggle}\n            />\n          </ModalPortal>\n        )}\n\n        {this.state.isRepoShareAdminDialogOpen && (\n          <ModalPortal>\n            <RepoShareAdminDialog\n              repo={repo}\n              toggleDialog={this.toggleRepoShareAdminDialog}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isOldFilesAutoDelDialogOpen && (\n          <ModalPortal>\n            <LibOldFilesAutoDelDialog\n              repoID={repo.repo_id}\n              toggleDialog={this.toggleOldFilesAutoDelDialog}\n            />\n          </ModalPortal>\n        )}\n\n      </Fragment>\n    );\n  }\n}\n\nMylibRepoListItem.propTypes = propTypes;\n\nexport default MylibRepoListItem;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport MediaQuery from 'react-responsive';\nimport { gettext, storages } from '../../utils/constants';\nimport MylibRepoListItem from './mylib-repo-list-item';\nimport LibsMobileThead from '../../components/libs-mobile-thead';\n\nconst propTypes = {\n  sortBy: PropTypes.string.isRequired,\n  sortOrder: PropTypes.string.isRequired,\n  repoList: PropTypes.array.isRequired,\n  sortRepoList: PropTypes.func.isRequired,\n  onRenameRepo: PropTypes.func.isRequired,\n  onDeleteRepo: PropTypes.func.isRequired,\n  onTransferRepo: PropTypes.func.isRequired,\n  onRepoClick: PropTypes.func.isRequired,\n};\n\nclass MylibRepoListView extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isItemFreezed: false,\n    };\n  }\n\n  onFreezedItem = () => {\n    this.setState({isItemFreezed: true});\n  }\n\n  onUnfreezedItem = () => {\n    this.setState({isItemFreezed: false});\n  }\n\n  sortByName = (e) => {\n    e.preventDefault();\n    const sortBy = 'name';\n    const sortOrder = this.props.sortOrder == 'asc' ? 'desc' : 'asc';\n    this.props.sortRepoList(sortBy, sortOrder);\n  }\n\n  sortByTime = (e) => {\n    e.preventDefault();\n    const sortBy = 'time';\n    const sortOrder = this.props.sortOrder == 'asc' ? 'desc' : 'asc';\n    this.props.sortRepoList(sortBy, sortOrder);\n  }\n\n  sortBySize = (e) => {\n    e.preventDefault();\n    const sortBy = 'size';\n    const sortOrder = this.props.sortOrder == 'asc' ? 'desc' : 'asc';\n    this.props.sortRepoList(sortBy, sortOrder);\n  }\n\n  renderRepoListView = () => {\n    return (\n      <Fragment>\n        {this.props.repoList.map(item => {\n          return (\n            <MylibRepoListItem\n              key={item.repo_id}\n              repo={item}\n              isItemFreezed={this.state.isItemFreezed}\n              onFreezedItem={this.onFreezedItem}\n              onUnfreezedItem={this.onUnfreezedItem}\n              onRenameRepo={this.props.onRenameRepo}\n              onDeleteRepo={this.props.onDeleteRepo}\n              onTransferRepo={this.props.onTransferRepo}\n              onMonitorRepo={this.props.onMonitorRepo}\n              onRepoClick={this.props.onRepoClick}\n            />\n          );\n        })}\n      </Fragment>\n    );\n  }\n\n  renderPCUI = () => {\n    const showStorageBackend = storages.length > 0;\n    const sortIcon = this.props.sortOrder === 'asc' ? <span className=\"fas fa-caret-up\"></span> : <span className=\"fas fa-caret-down\"></span>;\n    return (\n      <table>\n        <thead>\n          <tr>\n            <th width=\"4%\"></th>\n            <th width=\"4%\"><span className=\"sr-only\">{gettext('Library Type')}</span></th>\n            <th width={showStorageBackend ? '33%' : '38%'}><a className=\"d-block table-sort-op\" href=\"#\" onClick={this.sortByName}>{gettext('Name')} {this.props.sortBy === 'name' && sortIcon}</a></th>\n            <th width=\"14%\"><span className=\"sr-only\">{gettext('Actions')}</span></th>\n            <th width={showStorageBackend ? '15%' : '20%'}><a className=\"d-block table-sort-op\" href=\"#\" onClick={this.sortBySize}>{gettext('Size')} {this.props.sortBy === 'size' && sortIcon}</a></th>\n            {showStorageBackend ? <th width=\"15%\">{gettext('Storage Backend')}</th> : null}\n            <th width={showStorageBackend ? '15%' : '20%'}><a className=\"d-block table-sort-op\" href=\"#\" onClick={this.sortByTime}>{gettext('Last Update')} {this.props.sortBy === 'time' && sortIcon}</a></th>\n          </tr>\n        </thead>\n        <tbody>\n          {this.renderRepoListView()}\n        </tbody>\n      </table>\n    );\n  }\n\n  renderMobileUI = () => {\n    return (\n      <table className=\"table-thead-hidden\">\n        <LibsMobileThead />\n        <tbody>\n          {this.renderRepoListView()}\n        </tbody>\n      </table>\n    );\n  }\n\n  render() {\n    return (\n      <Fragment>\n        <MediaQuery query=\"(min-width: 768px)\">\n          {this.renderPCUI()}\n        </MediaQuery>\n        <MediaQuery query=\"(max-width: 767.8px)\">\n          {this.renderMobileUI()}\n        </MediaQuery>\n      </Fragment>\n    );\n  }\n}\n\nMylibRepoListView.propTypes = propTypes;\n\nexport default MylibRepoListView;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Modal, ModalBody } from 'reactstrap';\nimport { gettext, mediaUrl, siteName, canAddRepo } from '../../utils/constants';\n\nconst propTypes = {\n  toggleDialog: PropTypes.func.isRequired\n};\n\nclass GuideForNewDialog extends React.Component {\n\n  toggle = () => {\n    this.props.toggleDialog();\n  }\n\n  render() {\n    return (\n      <Modal isOpen={true} toggle={this.toggle}>\n        <ModalBody>\n          <button type=\"button\" className=\"close text-gray\" onClick={this.toggle}><span aria-hidden=\"true\"></span></button>\n          <div className=\"p-2 text-center\">\n            <img src={`${mediaUrl}img/welcome.png`} width=\"180\" alt=\"\" />\n            <h3 id=\"dialogTitle\">{gettext('Welcome to {site_name_placeholder}').replace('{site_name_placeholder}', siteName)}</h3>\n            {canAddRepo ?\n              <p>{gettext('{site_name_placeholder} organizes files into libraries. Each library can be synced and shared separately. We have created a personal library for you. You can create more libraries later.').replace('{site_name_placeholder}', siteName)}</p> :\n              <p>{gettext('{site_name_placeholder} organizes files into libraries. Each library can be synced and shared separately. However, since you are a guest user now, you can not create libraries.').replace('{site_name_placeholder}', siteName)}</p>\n            }\n          </div>\n        </ModalBody>\n      </Modal>\n    );\n  }\n}\n\nGuideForNewDialog.propTypes = propTypes;\n\nexport default GuideForNewDialog;\n","import React, { Component, Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport cookie from 'react-cookies';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../../components/toast';\nimport Repo from '../../models/repo';\nimport Loading from '../../components/loading';\nimport EmptyTip from '../../components/empty-tip';\nimport CommonToolbar from '../../components/toolbar/common-toolbar';\nimport RepoViewToolbar from '../../components/toolbar/repo-view-toobar';\nimport LibDetail from '../../components/dirent-detail/lib-details';\nimport MylibRepoListView from './mylib-repo-list-view';\nimport SortOptionsDialog from '../../components/dialog/sort-options';\nimport GuideForNewDialog from '../../components/dialog/guide-for-new-dialog';\n\nconst propTypes = {\n  onShowSidePanel: PropTypes.func.isRequired,\n  onSearchedClick: PropTypes.func.isRequired,\n};\n\nclass MyLibraries extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      errorMsg: '',\n      isLoading: true,\n      repoList: [],\n      isShowDetails: false,\n      isSortOptionsDialogOpen: false,\n      isGuideForNewDialogOpen: window.app.pageOptions.guideEnabled,\n      sortBy: cookie.load('seafile-repo-dir-sort-by') || 'name', // 'name' or 'time' or 'size'\n      sortOrder: cookie.load('seafile-repo-dir-sort-order') || 'asc', // 'asc' or 'desc'\n    };\n\n    this.emptyTip = (\n      <EmptyTip>\n        <h2>{gettext('No libraries')}</h2>\n        <p>{gettext('You have not created any libraries yet. A library is a container to organize your files and folders. A library can also be shared with others and synced to your connected devices. You can create a library by clicking the \"New Library\" button in the menu bar.')}</p>\n      </EmptyTip>\n    );\n  }\n\n  componentDidMount() {\n    seafileAPI.listRepos({type: 'mine'}).then((res) => {\n      let repoList = res.data.repos.map((item) => {\n        return new Repo(item);\n      });\n      this.setState({\n        isLoading: false,\n        repoList: Utils.sortRepos(repoList, this.state.sortBy, this.state.sortOrder)\n      });\n    }).catch((error) => {\n      this.setState({\n        isLoading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  toggleSortOptionsDialog = () => {\n    this.setState({\n      isSortOptionsDialogOpen: !this.state.isSortOptionsDialogOpen\n    });\n  }\n\n  onCreateRepo = (repo) => {\n    seafileAPI.createMineRepo(repo).then((res) => {\n      const newRepo = new Repo({\n        repo_id: res.data.repo_id,\n        repo_name: res.data.repo_name,\n        size: res.data.repo_size,\n        mtime: res.data.mtime,\n        owner_email: res.data.email,\n        encrypted: res.data.encrypted,\n        permission: res.data.permission,\n        storage_name: res.data.storage_name\n      });\n      this.state.repoList.unshift(newRepo);\n      this.setState({repoList: this.state.repoList});\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  sortRepoList = (sortBy, sortOrder) => {\n    cookie.save('seafile-repo-dir-sort-by', sortBy);\n    cookie.save('seafile-repo-dir-sort-order', sortOrder);\n    this.setState({\n      sortBy: sortBy,\n      sortOrder: sortOrder,\n      repoList: Utils.sortRepos(this.state.repoList, sortBy, sortOrder)\n    });\n  }\n\n  onTransferRepo = (repoID) => {\n    let repoList = this.state.repoList.filter(item => {\n      return item.repo_id !== repoID;\n    });\n    this.setState({repoList: repoList});\n  }\n\n  onRenameRepo = (repo, newName) => {\n    let repoList = this.state.repoList.map(item => {\n      if (item.repo_id === repo.repo_id) {\n        item.repo_name = newName;\n      }\n      return item;\n    });\n    this.setState({repoList: repoList});\n  }\n\n  onMonitorRepo = (repo, monitored) => {\n    let repoList = this.state.repoList.map(item => {\n      if (item.repo_id === repo.repo_id) {\n        item.monitored = monitored;\n      }\n      return item;\n    });\n    this.setState({repoList: repoList});\n  }\n\n  onDeleteRepo = (repo) => {\n    let repoList = this.state.repoList.filter(item => {\n      return item.repo_id !== repo.repo_id;\n    });\n    this.setState({repoList: repoList});\n  }\n\n  onRepoClick = (repo) => {\n    if (this.state.isShowDetails) {\n      this.onRepoDetails(repo);\n    }\n  }\n\n  onRepoDetails = (repo) => {\n    this.setState({\n      currentRepo: repo,\n      isShowDetails: true,\n    });\n  }\n\n  closeDetails = () => {\n    this.setState({isShowDetails: !this.state.isShowDetails});\n  }\n\n  toggleGuideForNewDialog = () => {\n    window.app.pageOptions.guideEnabled = false;\n    this.setState({\n      isGuideForNewDialogOpen: false\n    });\n  }\n\n  render() {\n    return (\n      <Fragment>\n        <div className=\"main-panel-north border-left-show\">\n          <RepoViewToolbar onShowSidePanel={this.props.onShowSidePanel} onCreateRepo={this.onCreateRepo} libraryType={'mine'}/>\n          <CommonToolbar onSearchedClick={this.props.onSearchedClick} />\n        </div>\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <div className=\"cur-view-path\">\n              <h3 className=\"sf-heading m-0\">{gettext('My Libraries')}</h3>\n              {(!Utils.isDesktop() && this.state.repoList.length > 0) && <span className=\"sf3-font sf3-font-sort action-icon\" onClick={this.toggleSortOptionsDialog}></span>}\n            </div>\n            <div className=\"cur-view-content\">\n              {this.state.isLoading && <Loading />}\n              {!this.state.isLoading && this.state.errorMsg && <p className=\"error text-center mt-8\">{this.state.errorMsg}</p>}\n              {!this.state.isLoading && !this.state.errorMsg && this.state.repoList.length === 0 && this.emptyTip}\n              {!this.state.isLoading && !this.state.errorMsg && this.state.repoList.length > 0 &&\n                <MylibRepoListView\n                  sortBy={this.state.sortBy}\n                  sortOrder={this.state.sortOrder}\n                  repoList={this.state.repoList}\n                  onRenameRepo={this.onRenameRepo}\n                  onDeleteRepo={this.onDeleteRepo}\n                  onTransferRepo={this.onTransferRepo}\n                  onMonitorRepo={this.onMonitorRepo}\n                  onRepoClick={this.onRepoClick}\n                  sortRepoList={this.sortRepoList}\n                />\n              }\n            </div>\n          </div>\n          {!this.state.isLoading && !this.state.errorMsg && this.state.isGuideForNewDialogOpen &&\n            <GuideForNewDialog\n              toggleDialog={this.toggleGuideForNewDialog}\n            />\n          }\n          {this.state.isSortOptionsDialogOpen &&\n            <SortOptionsDialog\n              toggleDialog={this.toggleSortOptionsDialog}\n              sortBy={this.state.sortBy}\n              sortOrder={this.state.sortOrder}\n              sortItems={this.sortRepoList}\n            />\n          }\n          {this.state.isShowDetails && (\n            <div className=\"cur-view-detail\">\n              <LibDetail\n                currentRepo={this.state.currentRepo}\n                closeDetails={this.closeDetails}\n              />\n            </div>\n          )}\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nMyLibraries.propTypes = propTypes;\n\nexport default MyLibraries;\n","import React, { Component, Fragment } from 'react';\nimport { Link } from '@gatsbyjs/reach-router';\nimport moment from 'moment';\nimport { gettext, siteRoot, lang, trashReposExpireDays } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../../components/toast';\nimport Loading from '../../components/loading';\nimport EmptyTip from '../../components/empty-tip';\nimport CommonToolbar from '../../components/toolbar/common-toolbar';\n\nmoment.locale(lang);\n\nclass MyLibsDeleted extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      deletedRepoList: [],\n      isLoading: true,\n    };\n  }\n\n  componentDidMount() {\n    seafileAPI.listDeletedRepo().then(res => {\n      this.setState({\n        deletedRepoList: res.data,\n        isLoading: false,\n      });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  refreshDeletedRepoList = (repoID) => {\n    let deletedRepoList = this.state.deletedRepoList.filter(item => {\n      return item.repo_id !== repoID;\n    });\n    this.setState({deletedRepoList: deletedRepoList});\n  }\n\n  render() {\n    return (\n      <Fragment>\n        <div className=\"main-panel-north\">\n          <CommonToolbar onSearchedClick={this.props.onSearchedClick} />\n        </div>\n        <div className=\"main-panel-center\">\n          <div className=\"cur-view-container\">\n            <div className=\"cur-view-path\">\n              <div className=\"path-container\">\n                <Link to={ siteRoot + 'my-libs/' }>{gettext('My Libraries')}</Link>\n                <span className=\"path-split\">/</span>\n                <span>{gettext('Deleted Libraries')}</span>\n              </div>\n            </div>\n            <div className=\"cur-view-content\">\n              {this.state.isLoading && <Loading />}\n              {(!this.state.isLoading && this.state.deletedRepoList.length === 0) &&\n              <EmptyTip>\n                <h2>{gettext('No deleted libraries')}</h2>\n                <p>{gettext('You have not deleted any libraries in the last {placeholder} days. A deleted library will be cleaned automatically after this period.').replace('{placeholder}', trashReposExpireDays)}</p>\n              </EmptyTip>\n              }\n              {this.state.deletedRepoList.length !== 0 &&\n                <div>\n                  <p className=\"tip mt-2\">{gettext('Tip: libraries deleted {placeholder} days ago will be cleaned automatically.').replace('{placeholder}', trashReposExpireDays)}</p>\n                  <DeletedRepoTable\n                    deletedRepoList={this.state.deletedRepoList}\n                    refreshDeletedRepoList={this.refreshDeletedRepoList}\n                  />\n                </div>\n              }\n            </div>\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nclass DeletedRepoTable extends Component {\n\n  render() {\n    let deletedRepos = this.props.deletedRepoList;\n    return (\n      <table>\n        <thead>\n          <tr>\n            <th style={{width: '4%'}}>{/*img*/}</th>\n            <th style={{width: '52%'}}>{gettext('Name')}</th>\n            <th style={{width: '30%'}}>{gettext('Deleted Time')}</th>\n            <th style={{width: '14%'}}></th>\n          </tr>\n        </thead>\n        <tbody>\n          { deletedRepos && deletedRepos.map((item) => {\n            return (\n              <DeletedRepoItem\n                key={item.repo_id}\n                repo={item}\n                refreshDeletedRepoList={this.props.refreshDeletedRepoList}\n              />\n            );\n          })}\n        </tbody>\n      </table>\n    );\n  }\n}\n\nclass DeletedRepoItem extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      hideRestoreMenu: true,\n      highlight: false,\n    };\n  }\n\n  onMouseEnter = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        hideRestoreMenu: false,\n        highlight: true,\n      });\n    }\n  }\n\n  onMouseLeave = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        hideRestoreMenu: true,\n        highlight: false,\n      });\n    }\n  }\n\n  restoreDeletedRepo = (e) => {\n    e.preventDefault();\n    let repoID = this.props.repo.repo_id;\n    let repoName = this.props.repo.repo_name;\n    seafileAPI.restoreDeletedRepo(repoID).then(res => {\n      let message = gettext('Successfully restored the library.') + '  ' + repoName;\n      toaster.success(message);\n      this.props.refreshDeletedRepoList(repoID);\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      if (errMessage === gettext('Error')) {\n        errMessage = gettext('Failed. Please check the network.');\n      }\n      toaster.danger(errMessage);\n    });\n  }\n\n  render() {\n    let localTime = moment.utc(this.props.repo.del_time).toDate();\n    localTime = moment(localTime).fromNow();\n    let iconUrl = Utils.getLibIconUrl(this.props.repo);\n\n    return (\n      <tr\n        className={this.state.highlight ? 'tr-highlight' : ''}\n        onMouseEnter={this.onMouseEnter}\n        onMouseLeave={this.onMouseLeave}\n        tabIndex=\"0\"\n        onFocus={this.onMouseEnter}\n      >\n        <td className=\"text-center\"><img src={iconUrl} alt='' width=\"24\" /></td>\n        <td className=\"name\">{this.props.repo.repo_name}</td>\n        <td className=\"update\">{localTime}</td>\n        <td>\n          <a href=\"#\" onClick={this.restoreDeletedRepo} title={gettext('Restore')}\n            role=\"button\" aria-label={gettext('Restore')}\n            className={`sf2-icon-reply action-icon ${this.state.highlight ? '' : 'vh'}`}></a>\n        </td>\n      </tr>\n    );\n  }\n}\n\nexport default MyLibsDeleted;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport moment from 'moment';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter, Input, Alert } from 'reactstrap';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport Repo from '../../models/repo';\n\nconst shareRepoListItemProps = {\n  repo: PropTypes.object.isRequired,\n  onRepoSelect: PropTypes.func.isRequired,\n  onPermissionChange: PropTypes.func.isRequired,\n};\n\nclass ShareRepoListItem extends React.Component {\n\n  onRepoSelect = (e) => {\n    let isChecked = e.target.checked;\n    this.props.onRepoSelect(this.props.repo, isChecked);\n  }\n\n  onPermissionChange = (e) => {\n    let permission = e.target.value;\n    let repo = this.props.repo;\n    this.props.onPermissionChange(repo, permission);\n  }\n\n  render() {\n    let repo = this.props.repo;\n    let iconUrl = Utils.getLibIconUrl(repo);\n    return (\n      <tr>\n        <td className=\"text-center\"><input type=\"checkbox\" className=\"vam\" name=\"repo\" onChange={this.onRepoSelect} /></td>\n        <td className=\"text-center\"><img src={iconUrl} width=\"24\" alt={gettext('icon')} /></td>\n        <td className=\"name\">{repo.repo_name}</td>\n        <td>{moment(repo.last_modified).fromNow()}</td>\n        <td>\n          <Input style={{height: '1.5rem', padding: 0}} type=\"select\" name=\"select\" onChange={this.onPermissionChange} value={repo.sharePermission}>\n            <option value='rw'>{gettext('Read-Write')}</option>\n            <option value='r'>{gettext('Read-Only')}</option>\n          </Input>\n        </td>\n      </tr>\n    );\n  }\n}\n\nShareRepoListItem.propTypes = shareRepoListItemProps;\n\nconst propTypes = {\n  onRepoSelectedHandler: PropTypes.func.isRequired,\n  onShareRepoDialogClose: PropTypes.func.isRequired,\n};\n\nclass ShareRepoDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      repoList: [],\n      currentRepo: null,\n      permission: 'rw',\n      selectedRepoList: [],\n      errMessage: '',\n    };\n  }\n\n  componentDidMount() {\n    seafileAPI.listRepos({type: 'mine'}).then(res => {\n      let repoList = res.data.repos.map(item => {\n        let repo = new Repo(item);\n        repo.sharePermission = 'rw';\n        return repo;\n      });\n      this.setState({repoList: repoList});\n    });\n  }\n\n  onRepoSelect = (repo, isChecked) => {\n    let selectedRepoList = [];\n    if (isChecked) {\n      this.state.selectedRepoList.push(repo);\n      selectedRepoList = this.state.selectedRepoList;\n    } else {\n      selectedRepoList = this.state.selectedRepoList.filter(item => {\n        return item.repo_id !== repo.repo_id;\n      });\n    }\n    this.setState({selectedRepoList: selectedRepoList});\n  }\n\n  onPermissionChange = (repo, permission) => {\n    let repoList = this.state.repoList.map(item => {\n      if (item.repo_id === repo.repo_id) {\n        item.sharePermission = permission;\n      }\n      return item;\n    });\n    this.setState({repoList: repoList});\n  }\n\n  handleSubmit = () => {\n    if (this.state.selectedRepoList.length === 0) {\n      let errMessage = gettext('Please select a library to share.');\n      this.setState({errMessage: errMessage});\n      return;\n    }\n\n    this.props.onRepoSelectedHandler(this.state.selectedRepoList);\n    this.onCloseDialog();\n  }\n\n  onCloseDialog = () => {\n    this.props.onShareRepoDialogClose();\n  }\n\n  render() {\n    return (\n      <Modal isOpen={true}>\n        <ModalHeader toggle={this.toggle}>{gettext('Select libraries to share')}</ModalHeader>\n        <ModalBody className=\"dialog-list-container\">\n          <table>\n            <thead>\n              <tr>\n                <th width='4%'>{/* select */}</th>\n                <th width='6%'>{/* icon */}</th>\n                <th width='35%'>{gettext('Name')}</th>\n                <th width='25%'>{gettext('Last Update')}</th>\n                <th width='30%'>{gettext('Permission')}</th>\n              </tr>\n            </thead>\n            <tbody>\n              {this.state.repoList.map((repo, index) => {\n                return (\n                  <ShareRepoListItem\n                    key={index}\n                    repo={repo}\n                    onRepoSelect={this.onRepoSelect}\n                    onPermissionChange={this.onPermissionChange}\n                  />\n                );\n              })}\n            </tbody>\n          </table>\n        </ModalBody>\n        {this.state.errMessage && <Alert color=\"danger\" className=\"mt-2\">{this.state.errMessage}</Alert>}\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.onCloseDialog}>{gettext('Close')}</Button>\n          <Button color=\"primary\" onClick={this.handleSubmit}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nShareRepoDialog.propTypes = propTypes;\n\nexport default ShareRepoDialog;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport moment from 'moment';\nimport { Dropdown, DropdownMenu, DropdownToggle, DropdownItem } from 'reactstrap';\nimport { Link, navigate } from '@gatsbyjs/reach-router';\nimport { Utils } from '../../utils/utils';\nimport { gettext, siteRoot, isPro, username, folderPermEnabled, isSystemStaff, enableResetEncryptedRepoPassword, isEmailConfigured } from '../../utils/constants';\nimport ModalPortal from '../../components/modal-portal';\nimport ShareDialog from '../../components/dialog/share-dialog';\nimport LibSubFolderPermissionDialog from '../../components/dialog/lib-sub-folder-permission-dialog';\nimport DeleteRepoDialog from '../../components/dialog/delete-repo-dialog';\nimport ChangeRepoPasswordDialog from '../../components/dialog/change-repo-password-dialog';\nimport ResetEncryptedRepoPasswordDialog from '../../components/dialog/reset-encrypted-repo-password-dialog';\nimport Rename from '../rename';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport LibHistorySettingDialog from '../dialog/lib-history-setting-dialog';\nimport toaster from '../toast';\nimport RepoAPITokenDialog from '../dialog/repo-api-token-dialog';\nimport RepoShareAdminDialog from '../dialog/repo-share-admin-dialog';\nimport RepoMonitoredIcon from '../../components/repo-monitored-icon';\n\nconst propTypes = {\n  currentGroup: PropTypes.object,\n  libraryType: PropTypes.string,\n  repo: PropTypes.object.isRequired,\n  isItemFreezed: PropTypes.bool.isRequired,\n  onFreezedItem: PropTypes.func.isRequired,\n  onUnfreezedItem: PropTypes.func.isRequired,\n  onItemUnshare: PropTypes.func.isRequired,\n  onItemDetails: PropTypes.func,\n  onItemRename: PropTypes.func,\n  onItemDelete: PropTypes.func,\n  onMonitorRepo: PropTypes.func\n};\n\nclass SharedRepoListItem extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      highlight: false,\n      isOperationShow: false,\n      isItemMenuShow: false,\n      isShowSharedDialog: false,\n      isRenaming: false,\n      isStarred: this.props.repo.starred,\n      isFolderPermissionDialogOpen: false,\n      isHistorySettingDialogShow: false,\n      isDeleteDialogShow: false,\n      isAPITokenDialogShow: false,\n      isRepoShareAdminDialogOpen: false,\n      isRepoDeleted: false,\n      isChangePasswordDialogShow: false,\n      isResetPasswordDialogShow: false\n    };\n    this.isDeparementOnwerGroupMember = false;\n  }\n\n  onMouseEnter = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        highlight: true,\n        isOperationShow: true,\n      });\n    }\n  }\n\n  onMouseOver = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        highlight: true,\n        isOperationShow: true,\n      });\n    }\n  }\n\n  onMouseLeave = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        highlight: false,\n        isOperationShow: false,\n      });\n    }\n  }\n\n  clickOperationMenuToggle = (e) => {\n    this.toggleOperationMenu(e);\n  }\n\n  onDropdownToggleKeyDown = (e) => {\n    if (e.key == 'Enter' || e.key == 'Space') {\n      this.clickOperationMenuToggle(e);\n    }\n  }\n\n  toggleOperationMenu = (e) => {\n    let dataset = e.target ? e.target.dataset : null;\n    if (dataset && dataset.toggle && dataset.toggle === 'Rename') {\n      this.setState({isItemMenuShow: !this.state.isItemMenuShow});\n      return;\n    }\n\n    this.setState(\n      {isItemMenuShow: !this.state.isItemMenuShow},\n      () => {\n        if (this.state.isItemMenuShow) {\n          this.props.onFreezedItem();\n        } else {\n          this.props.onUnfreezedItem();\n          this.setState({\n            highlight: false,\n            isOperationShow: false,\n          });\n        }\n      }\n    );\n  }\n\n  getRepoComputeParams = () => {\n    let repo = this.props.repo;\n\n    let iconUrl = Utils.getLibIconUrl(repo);\n    let iconTitle = Utils.getLibIconTitle(repo);\n    let libPath = `${siteRoot}library/${repo.repo_id}/${Utils.encodePath(repo.repo_name)}/`;\n\n    return { iconUrl, iconTitle, libPath };\n  }\n\n  onMenuItemKeyDown = (e) => {\n    if (e.key == 'Enter' || e.key == 'Space') {\n      this.onMenuItemClick(e);\n    }\n  }\n\n  onMenuItemClick = (e) => {\n    let operation = e.target.dataset.toggle;\n    switch(operation) {\n      case 'Rename':\n        this.onItemRenameToggle();\n        break;\n      case 'Folder Permission':\n        this.onItemFolderPermissionToggle();\n        break;\n      case 'Details':\n        this.onItemDetails();\n        break;\n      case 'Share':\n        this.onItemShare();\n        break;\n      case 'Unshare':\n        this.onItemUnshare();\n        break;\n      case 'History Setting':\n        this.onHistorySettingToggle();\n        break;\n      case 'API Token':\n        this.onAPITokenToggle();\n        break;\n      case 'Share Admin':\n        this.toggleRepoShareAdminDialog();\n        break;\n      case 'Change Password':\n        this.onChangePasswordToggle();\n        break;\n      case 'Reset Password':\n        this.onResetPasswordToggle();\n        break;\n      case 'Watch File Changes':\n        this.watchFileChanges();\n        break;\n      case 'Unwatch File Changes':\n        this.unwatchFileChanges();\n        break;\n      // no default\n    }\n  }\n\n  watchFileChanges = () => {\n    const { repo } = this.props;\n    seafileAPI.monitorRepo(repo.repo_id).then(() => {\n      this.props.onMonitorRepo(repo, true);\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  unwatchFileChanges = () => {\n    const { repo } = this.props;\n    seafileAPI.unMonitorRepo(repo.repo_id).then(() => {\n      this.props.onMonitorRepo(repo, false);\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  onItemRenameToggle = () => {\n    this.props.onFreezedItem();\n    this.setState({\n      isRenaming: !this.state.isRenaming,\n      isOperationShow: !this.state.isOperationShow\n    });\n  }\n\n  onRenameConfirm = (name) => {\n    this.props.onItemRename(this.props.repo, name);\n    this.onRenameCancel();\n  }\n\n  onRenameCancel = () => {\n    this.props.onUnfreezedItem();\n    this.setState({isRenaming: !this.state.isRenaming});\n  }\n\n  onItemFolderPermissionToggle = () => {\n    this.setState({isFolderPermissionDialogOpen: !this.state.isFolderPermissionDialogOpen});\n  }\n\n  onHistorySettingToggle = () => {\n    this.setState({isHistorySettingDialogShow: !this.state.isHistorySettingDialogShow});\n  }\n\n  onItemDetails = () => {\n    this.props.onItemDetails(this.props.repo);\n  }\n\n  onItemShare = (e) => {\n    e.preventDefault();\n    this.setState({isShowSharedDialog: true});\n  }\n\n  onItemUnshare = (e) => {\n    e.preventDefault();\n    this.props.onItemUnshare(this.props.repo);\n  }\n\n  onItemDeleteToggle = (e) => {\n    e.preventDefault();\n    this.setState({isDeleteDialogShow: !this.state.isDeleteDialogShow});\n  }\n\n  onItemDelete = () => {\n    const { currentGroup, repo } = this.props;\n    if (!currentGroup) {  // repo can not be deleted in share all module\n      return;\n    }\n\n    const groupID = currentGroup.id;\n\n    seafileAPI.deleteGroupOwnedLibrary(groupID, repo.repo_id).then(() => {\n\n      this.setState({\n        isRepoDeleted: true,\n        isDeleteDialogShow: false,\n      });\n\n      this.props.onItemDelete(repo);\n      let name = repo.repo_name;\n      var msg = gettext('Successfully deleted {name}.').replace('{name}', name);\n      toaster.success(msg);\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      if (errMessage === gettext('Error')) {\n        let name = repo.repo_name;\n        errMessage = gettext('Failed to delete {name}.').replace('{name}', name);\n      }\n      toaster.danger(errMessage);\n\n      this.setState({isRepoDeleted: false});\n    });\n  }\n\n  toggleShareDialog = () => {\n    this.setState({isShowSharedDialog: false});\n  }\n\n  toggleRepoShareAdminDialog = () => {\n    this.setState({isRepoShareAdminDialogOpen: !this.state.isRepoShareAdminDialogOpen});\n  }\n\n  onAPITokenToggle = () => {\n    this.setState({isAPITokenDialogShow: !this.state.isAPITokenDialogShow});\n  }\n\n  onChangePasswordToggle = () => {\n    this.setState({isChangePasswordDialogShow: !this.state.isChangePasswordDialogShow});\n  }\n\n  onResetPasswordToggle = () => {\n    this.setState({isResetPasswordDialogShow: !this.state.isResetPasswordDialogShow});\n  }\n\n  translateMenuItem = (menuItem) => {\n    let translateResult = '';\n    switch(menuItem) {\n      case 'Rename':\n        translateResult = gettext('Rename');\n        break;\n      case 'Folder Permission':\n        translateResult = gettext('Folder Permission');\n        break;\n      case 'Details':\n        translateResult = gettext('Details');\n        break;\n      case 'Unshare':\n        translateResult = gettext('Unshare');\n        break;\n      case 'Share':\n        translateResult = gettext('Share');\n        break;\n      case 'History Setting':\n        translateResult = gettext('History Setting');\n        break;\n      case 'Share Admin':\n        translateResult = gettext('Share Admin');\n        break;\n      case 'Change Password':\n        translateResult = gettext('Change Password');\n        break;\n      case 'Reset Password':\n        translateResult = gettext('Reset Password');\n        break;\n      case 'Watch File Changes':\n        translateResult = gettext('Watch File Changes');\n        break;\n      case 'Unwatch File Changes':\n        translateResult = gettext('Unwatch File Changes');\n        break;\n      case 'API Token':\n        translateResult = 'API Token'; // translation is not needed here\n        break;\n      default:\n        break;\n    }\n    return translateResult;\n  }\n\n  generatorOperations = () => {\n    let { repo, currentGroup } = this.props;\n    //todo this have a bug; use current api is not return admins param;\n    let isStaff = currentGroup && currentGroup.admins && currentGroup.admins.indexOf(username) > -1; //for group repolist;\n    let isRepoOwner = repo.owner_email === username;\n    let isAdmin = repo.is_admin;\n    let operations = [];\n    if (isPro) {\n      if (repo.owner_email.indexOf('@seafile_group') != -1) {\n        if (isStaff) {\n          if (repo.owner_email == currentGroup.id + '@seafile_group') {\n            this.isDeparementOnwerGroupMember = true;\n            operations = ['Rename'];\n            if (folderPermEnabled) {\n              operations.push('Folder Permission');\n            }\n            operations.push('Share Admin');\n            if (repo.encrypted) {\n              operations.push('Change Password');\n            }\n            if (repo.encrypted && enableResetEncryptedRepoPassword && isEmailConfigured) {\n              operations.push('Reset Password');\n            }\n            operations.push('History Setting', 'API Token', 'Details');\n          } else {\n            operations.push('Unshare');\n          }\n        }\n      } else {\n        if (isRepoOwner || isAdmin) {\n          operations.push('Share');\n        }\n        if (isStaff || isRepoOwner || isAdmin) {\n          operations.push('Unshare');\n        }\n      }\n      if (repo.permission == 'r' || repo.permission == 'rw') {\n        const monitorOp = repo.monitored ? 'Unwatch File Changes' : 'Watch File Changes';\n        operations.push(monitorOp);\n      }\n    } else {\n      if (isRepoOwner) {\n        operations.push('Share');\n      }\n      if (isStaff || isRepoOwner) {\n        operations.push('Unshare');\n      }\n    }\n    return operations;\n  }\n\n  generatorMobileMenu = () => {\n    let operations = [];\n    if (this.props.libraryType && this.props.libraryType === 'public') {\n      let isRepoOwner = this.props.repo.owner_email === username;\n      if (isSystemStaff || isRepoOwner) {\n        operations.push('Unshare');\n      }\n    } else {\n      operations = this.generatorOperations();\n      if (this.isDeparementOnwerGroupMember) {\n        operations.unshift('Unshare');\n        operations.unshift('Share');\n      }\n    }\n\n    if (!operations.length) {\n      return null;\n    }\n    return (\n      <Dropdown isOpen={this.state.isItemMenuShow} toggle={this.toggleOperationMenu}>\n        <DropdownToggle\n          tag=\"i\"\n          className=\"sf-dropdown-toggle fa fa-ellipsis-v ml-0\"\n          title={gettext('More Operations')}\n          data-toggle=\"dropdown\"\n          aria-expanded={this.state.isItemMenuShow}\n          onClick={this.clickOperationMenuToggle}\n        />\n        <div className={`${this.state.isItemMenuShow?'':'d-none'}`} onClick={this.toggleOperationMenu}>\n          <div className=\"mobile-operation-menu-bg-layer\"></div>\n          <div className=\"mobile-operation-menu\">\n            {operations.map((item, index) => {\n              return (\n                <DropdownItem key={index} data-toggle={item} onClick={this.onMenuItemClick}>{this.translateMenuItem(item)}</DropdownItem>\n              );\n            })}\n          </div>\n        </div>\n      </Dropdown>\n    );\n  }\n\n  generatorPCMenu = () => {\n    let operations = [];\n    if (this.props.libraryType && this.props.libraryType === 'public') {\n      let isRepoOwner = this.props.repo.owner_email === username;\n      if (isSystemStaff || isRepoOwner) {\n        operations.push('Unshare');\n      }\n    } else {\n      operations = this.generatorOperations();\n    }\n    const shareOperation   = <a href=\"#\" className=\"op-icon sf2-icon-share\" title={gettext('Share')} role=\"button\" aria-label={gettext('Share')} onClick={this.onItemShare}></a>;\n    const unshareOperation = <a href=\"#\" className=\"op-icon sf2-icon-x3\" title={gettext('Unshare')} role=\"button\" aria-label={gettext('Unshare')} onClick={this.onItemUnshare}></a>;\n    const deleteOperation  = <a href=\"#\" className=\"op-icon sf2-icon-delete\" title={gettext('Delete')} role=\"button\" aria-label={gettext('Delete')} onClick={this.onItemDeleteToggle}></a>;\n\n    if (this.isDeparementOnwerGroupMember) {\n      return (\n        <Fragment>\n          {shareOperation}\n          {deleteOperation}\n          <Dropdown isOpen={this.state.isItemMenuShow} toggle={this.toggleOperationMenu}>\n            <DropdownToggle\n              className=\"sf-dropdown-toggle sf2-icon-caret-down border-0 p-0\"\n              title={gettext('More Operations')}\n              data-toggle=\"dropdown\"\n              aria-expanded={this.state.isItemMenuShow}\n              aria-haspopup={true}\n              style={{'minWidth': '0'}}\n              onClick={this.clickOperationMenuToggle}\n              onKeyDown={this.onDropdownToggleKeyDown}\n            />\n            <DropdownMenu>\n              {operations.map((item, index) => {\n                return <DropdownItem key={index} data-toggle={item} onClick={this.onMenuItemClick} onKeyDown={this.onMenuItemKeyDown}>{this.translateMenuItem(item)}</DropdownItem>;\n              })}\n            </DropdownMenu>\n          </Dropdown>\n        </Fragment>\n      );\n    } else {\n      return (\n        <Fragment>\n          {operations.map(item => {\n            switch (item) {\n              case 'Share':\n                return <Fragment key={item}>{shareOperation}</Fragment>;\n              case 'Unshare':\n                return <Fragment key={item}>{unshareOperation}</Fragment>;\n              case 'Watch File Changes':\n              case 'Unwatch File Changes':\n                return (\n                  <Dropdown isOpen={this.state.isItemMenuShow} toggle={this.toggleOperationMenu} key={item}>\n                    <DropdownToggle\n                      className=\"sf-dropdown-toggle sf2-icon-caret-down border-0 p-0\"\n                      title={gettext('More Operations')}\n                      data-toggle=\"dropdown\"\n                      aria-expanded={this.state.isItemMenuShow}\n                      aria-haspopup={true}\n                      style={{'minWidth': '0'}}\n                      onClick={this.clickOperationMenuToggle}\n                      onKeyDown={this.onDropdownToggleKeyDown}\n                    />\n                    <DropdownMenu>\n                      {[item].map((item, index) => {\n                        return <DropdownItem key={index} data-toggle={item} onClick={this.onMenuItemClick} onKeyDown={this.onMenuItemKeyDown}>{this.translateMenuItem(item)}</DropdownItem>;\n                      })}\n                    </DropdownMenu>\n                  </Dropdown>\n                );\n              // no default\n            }\n          })}\n        </Fragment>\n      );\n    }\n  }\n\n  onToggleStarRepo = (e) => {\n    e.preventDefault();\n    const { repo_name: repoName } = this.props.repo;\n    if (this.state.isStarred) {\n      seafileAPI.unstarItem(this.props.repo.repo_id, '/').then(() => {\n        this.setState({isStarred: !this.state.isStarred});\n        const msg = gettext('Successfully unstarred {library_name_placeholder}.')\n          .replace('{library_name_placeholder}', repoName);\n        toaster.success(msg);\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    } else {\n      seafileAPI.starItem(this.props.repo.repo_id, '/').then(() => {\n        this.setState({isStarred: !this.state.isStarred});\n        const msg = gettext('Successfully starred {library_name_placeholder}.')\n          .replace('{library_name_placeholder}', repoName);\n        toaster.success(msg);\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    }\n  }\n\n  renderPCUI = () => {\n    let { iconUrl, iconTitle, libPath } = this.getRepoComputeParams();\n    let { repo } = this.props;\n    return (\n      <Fragment>\n        <tr className={this.state.highlight ? 'tr-highlight' : ''} onMouseEnter={this.onMouseEnter} onMouseOver={this.onMouseOver} onMouseLeave={this.onMouseLeave} onFocus={this.onMouseEnter}>\n          <td className=\"text-center\">\n            <a href=\"#\" role=\"button\" aria-label={this.state.isStarred ? gettext('Unstar') : gettext('Star')} onClick={this.onToggleStarRepo}>\n              <i className={`fa-star ${this.state.isStarred ? 'fas' : 'far star-empty'}`}></i>\n            </a>\n          </td>\n          <td><img src={iconUrl} title={iconTitle} alt={iconTitle} width=\"24\" /></td>\n          <td>\n            {this.state.isRenaming ?\n              <Rename name={repo.repo_name} onRenameConfirm={this.onRenameConfirm} onRenameCancel={this.onRenameCancel}/> :\n              <Fragment>\n                <Link to={libPath}>{repo.repo_name}</Link>\n                {repo.monitored && <RepoMonitoredIcon repoID={repo.repo_id} />}\n              </Fragment>\n            }\n          </td>\n          <td>{this.state.isOperationShow && this.generatorPCMenu()}</td>\n          <td>{repo.size}</td>\n          <td title={moment(repo.last_modified).format('llll')}>{moment(repo.last_modified).fromNow()}</td>\n          <td title={repo.owner_contact_email}>{repo.owner_name}</td>\n        </tr>\n      </Fragment>\n    );\n  }\n\n  visitRepo = () => {\n    if (!this.state.isRenaming) {\n      navigate(this.repoURL);\n    }\n  }\n\n  renderMobileUI = () => {\n    let { iconUrl, iconTitle, libPath } = this.getRepoComputeParams();\n    let { repo } = this.props;\n    this.repoURL = libPath;\n    return (\n      <Fragment>\n        <tr className={this.state.highlight ? 'tr-highlight' : ''}  onMouseEnter={this.onMouseEnter} onMouseOver={this.onMouseOver} onMouseLeave={this.onMouseLeave}>\n          <td onClick={this.visitRepo}><img src={iconUrl} title={iconTitle} width=\"24\" alt={iconTitle}/></td>\n          <td onClick={this.visitRepo}>\n            {this.state.isRenaming ?\n              <Rename name={repo.repo_name} onRenameConfirm={this.onRenameConfirm} onRenameCancel={this.onRenameCancel} /> :\n              <Fragment>\n                <Link to={libPath}>{repo.repo_name}</Link>\n                {repo.monitored && <RepoMonitoredIcon repoID={repo.repo_id} />}\n              </Fragment>\n            }\n            <br />\n            <span className=\"item-meta-info\" title={repo.owner_contact_email}>{repo.owner_name}</span>\n            <span className=\"item-meta-info\">{repo.size}</span>\n            <span className=\"item-meta-info\" title={moment(repo.last_modified).format('llll')}>{moment(repo.last_modified).fromNow()}</span>\n          </td>\n          <td>{this.generatorMobileMenu()}</td>\n        </tr>\n      </Fragment>\n    );\n  }\n\n  render() {\n    let { repo } = this.props;\n    let isGroupOwnedRepo = repo.owner_email.indexOf('@seafile_group') > -1;\n    return (\n      <Fragment>\n        {Utils.isDesktop() ? this.renderPCUI() : this.renderMobileUI()}\n        {this.state.isShowSharedDialog && (\n          <ModalPortal>\n            <ShareDialog\n              itemType={'library'}\n              itemName={repo.repo_name}\n              itemPath={'/'}\n              repoID={repo.repo_id}\n              repoEncrypted={repo.encrypted}\n              enableDirPrivateShare={true}\n              userPerm={repo.permission}\n              isAdmin={repo.is_admin}\n              isGroupOwnedRepo={isGroupOwnedRepo}\n              toggleDialog={this.toggleShareDialog}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isFolderPermissionDialogOpen && (\n          <ModalPortal>\n            <LibSubFolderPermissionDialog\n              toggleDialog={this.onItemFolderPermissionToggle}\n              repoID={repo.repo_id}\n              repoName={repo.repo_name}\n              isDepartmentRepo={true}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isDeleteDialogShow &&\n          <ModalPortal>\n            <DeleteRepoDialog\n              repo={this.props.repo}\n              isRepoDeleted={this.state.isRepoDeleted}\n              onDeleteRepo={this.onItemDelete}\n              toggle={this.onItemDeleteToggle}\n            />\n          </ModalPortal>\n        }\n        {this.state.isHistorySettingDialogShow && (\n          <ModalPortal>\n            <LibHistorySettingDialog\n              repoID={repo.repo_id}\n              itemName={repo.repo_name}\n              toggleDialog={this.onHistorySettingToggle}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isAPITokenDialogShow && (\n          <ModalPortal>\n            <RepoAPITokenDialog\n              repo={repo}\n              onRepoAPITokenToggle={this.onAPITokenToggle}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isRepoShareAdminDialogOpen && (\n          <ModalPortal>\n            <RepoShareAdminDialog\n              repo={repo}\n              toggleDialog={this.toggleRepoShareAdminDialog}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isChangePasswordDialogShow && (\n          <ModalPortal>\n            <ChangeRepoPasswordDialog\n              repoID={repo.repo_id}\n              repoName={repo.repo_name}\n              toggleDialog={this.onChangePasswordToggle}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isResetPasswordDialogShow && (\n          <ModalPortal>\n            <ResetEncryptedRepoPasswordDialog\n              repoID={repo.repo_id}\n              toggleDialog={this.onResetPasswordToggle}\n            />\n          </ModalPortal>\n        )}\n      </Fragment>\n    );\n  }\n}\n\nSharedRepoListItem.propTypes = propTypes;\n\nexport default SharedRepoListItem;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport SharedRepoListItem from './shared-repo-list-item';\nimport toaster from '../toast';\nimport LibsMobileThead from '../libs-mobile-thead';\nimport Loading from '../loading';\n\nconst propTypes = {\n  libraryType: PropTypes.string,\n  currentGroup: PropTypes.object,\n  isShowTableThread: PropTypes.bool,\n  sortBy: PropTypes.string,\n  sortOrder: PropTypes.string,\n  sortItems: PropTypes.func,\n  repoList: PropTypes.array.isRequired,\n  onItemUnshare: PropTypes.func.isRequired,\n  onItemDelete: PropTypes.func,\n  onItemDetails: PropTypes.func,\n  onItemRename: PropTypes.func,\n  hasNextPage: PropTypes.bool\n};\n\nclass SharedRepoListView extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isItemFreezed: false,\n    };\n  }\n\n  sortByName = (e) => {\n    e.preventDefault();\n    const sortBy = 'name';\n    const sortOrder = this.props.sortOrder == 'asc' ? 'desc' : 'asc';\n    this.props.sortItems(sortBy, sortOrder);\n  }\n\n  sortByTime = (e) => {\n    e.preventDefault();\n    const sortBy = 'time';\n    const sortOrder = this.props.sortOrder == 'asc' ? 'desc' : 'asc';\n    this.props.sortItems(sortBy, sortOrder);\n  }\n\n  sortBySize = (e) => {\n    e.preventDefault();\n    const sortBy = 'size';\n    const sortOrder = this.props.sortOrder == 'asc' ? 'desc' : 'asc';\n    this.props.sortItems(sortBy, sortOrder);\n  }\n\n  getSortMetaData = () => {\n    return {\n      sortByName: this.props.sortBy == 'name',\n      sortByTime: this.props.sortBy == 'time',\n      sortBySize: this.props.sortBy == 'size',\n      sortIcon: this.props.sortOrder == 'asc' ? <span className=\"fas fa-caret-up\"></span> : <span className=\"fas fa-caret-down\"></span>\n    };\n  }\n\n  onFreezedItem = () => {\n    this.setState({isItemFreezed: true});\n  }\n\n  onUnfreezedItem = () => {\n    this.setState({isItemFreezed: false});\n  }\n\n  onItemRename = (repo, newName) => {\n    let isDuplicated = this.props.repoList.some(item => {\n      return item.name === newName;\n    });\n    if (isDuplicated) {\n      let errMessage = gettext('The name \"{name}\" is already taken. Please choose a different name.');\n      errMessage = errMessage.replace('{name}', Utils.HTMLescape(newName));\n      toaster.danger(errMessage);\n      return false;\n    }\n    this.props.onItemRename(repo, newName);\n  }\n\n  renderRepoListView = () => {\n    return (\n      <Fragment>\n        {this.props.repoList.map(repo => {\n          return (\n            <SharedRepoListItem\n              key={repo.repo_id}\n              repo={repo}\n              libraryType={this.props.libraryType}\n              currentGroup={this.props.currentGroup}\n              isItemFreezed={this.state.isItemFreezed}\n              onFreezedItem={this.onFreezedItem}\n              onUnfreezedItem={this.onUnfreezedItem}\n              onItemUnshare={this.props.onItemUnshare}\n              onItemDelete={this.props.onItemDelete}\n              onItemDetails={this.props.onItemDetails}\n              onItemRename={this.props.onItemRename}\n              onMonitorRepo={this.props.onMonitorRepo}\n            />\n          );\n        })}\n      </Fragment>\n    );\n  }\n\n  renderPCUI = () => {\n    let isShowTableThread = this.props.isShowTableThread !== undefined ? this.props.isShowTableThread : true;\n\n    const { sortByName, sortByTime, sortBySize, sortIcon } = this.getSortMetaData();\n\n    return (\n      <table className={isShowTableThread ? '' : 'table-thead-hidden'}>\n        <thead>\n          <tr>\n            <th width=\"4%\"></th>\n            <th width=\"4%\"><span className=\"sr-only\">{gettext('Library Type')}</span></th>\n            <th width=\"36%\"><a className=\"d-block table-sort-op\" href=\"#\" onClick={this.sortByName}>{gettext('Name')} {sortByName && sortIcon}</a></th>\n            <th width=\"12%\"><span className=\"sr-only\">{gettext('Actions')}</span></th>\n            <th width={'14%'}><a className=\"d-block table-sort-op\" href=\"#\" onClick={this.sortBySize}>{gettext('Size')} {sortBySize && sortIcon}</a></th>\n            <th width={'14%'}><a className=\"d-block table-sort-op\" href=\"#\" onClick={this.sortByTime}>{gettext('Last Update')} {sortByTime && sortIcon}</a></th>\n            <th width=\"16%\">{gettext('Owner')}</th>\n          </tr>\n        </thead>\n        <tbody>\n          {this.renderRepoListView()}\n        </tbody>\n      </table>\n    );\n  }\n\n  renderMobileUI = () => {\n    return (\n      <table className=\"table-thead-hidden\">\n        <LibsMobileThead />\n        <tbody>\n          {this.renderRepoListView()}\n        </tbody>\n      </table>\n    );\n  }\n\n  render() {\n    const table = Utils.isDesktop() ? this.renderPCUI() : this.renderMobileUI();\n    if (this.props.hasNextPage) {\n      return (\n        <Fragment>\n          {table}\n          <Loading />\n        </Fragment>\n      );\n    } else {\n      return table;\n    }\n  }\n}\n\nSharedRepoListView.propTypes = propTypes;\n\nexport default SharedRepoListView;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport cookie from 'react-cookies';\nimport MediaQuery from 'react-responsive';\nimport { Dropdown, DropdownToggle, DropdownMenu, DropdownItem } from 'reactstrap';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { gettext, canAddPublicRepo } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport Repo from '../../models/repo';\nimport toaster from '../../components/toast';\nimport Loading from '../../components/loading';\nimport EmptyTip from '../../components/empty-tip';\nimport ModalPortal from '../../components/modal-portal';\nimport CommonToolbar from '../../components/toolbar/common-toolbar';\nimport CreateRepoDialog from '../../components/dialog/create-repo-dialog';\nimport ShareRepoDialog from '../../components/dialog/share-repo-dialog';\nimport SharedRepoListView from '../../components/shared-repo-list-view/shared-repo-list-view';\nimport SortOptionsDialog from '../../components/dialog/sort-options';\n\nconst propTypes = {\n  onShowSidePanel: PropTypes.func.isRequired,\n  onSearchedClick: PropTypes.func.isRequired,\n};\n\nclass PublicSharedView extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isLoading: true,\n      errMessage: '',\n      emptyTip: '',\n      repoList: [],\n      sortBy: cookie.load('seafile-repo-dir-sort-by') || 'name', // 'name' or 'time' or 'size'\n      sortOrder: cookie.load('seafile-repo-dir-sort-order') || 'asc', // 'asc' or 'desc'\n      isSortOptionsDialogOpen: false,\n      libraryType: 'public',\n      isCreateMenuShow: false,\n      isCreateRepoDialogShow: false,\n      isSelectRepoDialpgShow: false,\n    };\n  }\n\n  componentDidMount() {\n    seafileAPI.listRepos({type: 'public'}).then((res) => {\n      let repoList = res.data.repos.map(item => {\n        let repo = new Repo(item);\n        return repo;\n      });\n      this.setState({\n        isLoading: false,\n        repoList: Utils.sortRepos(repoList, this.state.sortBy, this.state.sortOrder)\n      });\n    }).catch((error) => {\n      this.setState({\n        isLoading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  onCreateRepo = (repo) => {\n    seafileAPI.createPublicRepo(repo).then(res => {\n      let object = {  // need modify api return value\n        repo_id: res.data.id,\n        repo_name: res.data.name,\n        permission: res.data.permission,\n        size: res.data.size,\n        owner_name: res.data.owner_name,\n        owner_email: res.data.owner,\n        mtime: res.data.mtime,\n        encrypted: res.data.encrypted,\n      };\n      let repo = new Repo(object);\n      let repoList = this.addRepoItem(repo);\n      this.setState({repoList: repoList});\n      this.onCreateRepoToggle();\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  onRepoSelectedHandler = (selectedRepoList) => {\n    selectedRepoList.forEach(repo => {\n      seafileAPI.selectOwnedRepoToPublic(repo.repo_id, {share_type: 'public', permission: repo.sharePermission}).then(() => {\n        let repoList = this.addRepoItem(repo);\n        this.setState({repoList: repoList});\n      }).catch((error) => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    });\n  }\n\n  onItemUnshare = (repo) => {\n    seafileAPI.unshareRepo(repo.repo_id, {share_type: 'public'}).then(() => {\n      let repoList = this.state.repoList.filter(item => {\n        return item.repo_id !== repo.repo_id;\n      });\n      this.setState({repoList: repoList});\n      let message = gettext('Successfully unshared {name}').replace('{name}', repo.repo_name);\n      toaster.success(message);\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      if (errMessage === gettext('Error')) {\n        errMessage = gettext('Failed to unshare {name}').replace('{name}', repo.repo_name);\n      }\n      toaster(errMessage);\n    });\n  }\n\n  onItemDelete = () => {\n    // todo need to optimized\n  }\n\n  addRepoItem = (repo) => {\n    let isExist = false;\n    let repoIndex = 0;\n    let repoList = this.state.repoList;\n    for (let i = 0; i < repoList.length; i ++) {\n      if (repo.repo_id === repoList[i].repo_id) {\n        isExist = true;\n        repoIndex = i;\n        break;\n      }\n    }\n    if (isExist) {\n      this.state.repoList.splice(repoIndex, 1);\n    }\n\n    let newRepoList = this.state.repoList.map(item => {return item;});\n    newRepoList.unshift(repo);\n    return newRepoList;\n  }\n\n  onAddRepoToggle = () => {\n    this.setState({isCreateMenuShow: !this.state.isCreateMenuShow});\n  }\n\n  onCreateRepoToggle = () => {\n    this.setState({isCreateRepoDialogShow: !this.state.isCreateRepoDialogShow});\n  }\n\n  onSelectRepoToggle = () => {\n    this.setState({isSelectRepoDialpgShow: !this.state.isSelectRepoDialpgShow});\n  }\n\n  sortItems = (sortBy, sortOrder) => {\n    cookie.save('seafile-repo-dir-sort-by', sortBy);\n    cookie.save('seafile-repo-dir-sort-order', sortOrder);\n    this.setState({\n      sortBy: sortBy,\n      sortOrder: sortOrder,\n      repoList: Utils.sortRepos(this.state.repoList, sortBy, sortOrder)\n    });\n  }\n\n  toggleSortOptionsDialog = () => {\n    this.setState({\n      isSortOptionsDialogOpen: !this.state.isSortOptionsDialogOpen\n    });\n  }\n\n  render() {\n    let errMessage = this.state.errMessage;\n    let emptyTip = (\n      <EmptyTip>\n        <h2>{gettext('No public libraries')}</h2>\n        <p>{gettext('No public libraries have been created yet. A public library is accessible by all users. You can create a public library by clicking the \"Add Library\" button in the menu bar.')}</p>\n      </EmptyTip>\n    );\n    return (\n      <Fragment>\n        <div className=\"main-panel-north border-left-show\">\n          {canAddPublicRepo &&\n            <div className=\"cur-view-toolbar\">\n              <span className=\"sf2-icon-menu side-nav-toggle hidden-md-up d-md-none\" title=\"Side Nav Menu\" onClick={this.props.onShowSidePanel}></span>\n              <div className=\"operation\">\n                <Dropdown isOpen={this.state.isCreateMenuShow} toggle={this.onAddRepoToggle}>\n                  <MediaQuery query=\"(min-width: 768px)\">\n                    <DropdownToggle className='btn btn-secondary operation-item'>\n                      <i className=\"fas fa-plus-square text-secondary mr-1\"></i>{gettext('Add Library')}\n                    </DropdownToggle>\n                  </MediaQuery>\n                  <MediaQuery query=\"(max-width: 767.8px)\">\n                    <DropdownToggle\n                      tag=\"span\"\n                      className=\"sf2-icon-plus mobile-toolbar-icon\"\n                      title={gettext('Add Library')}\n                    />\n                  </MediaQuery>\n                  <DropdownMenu>\n                    <DropdownItem onClick={this.onSelectRepoToggle}>{gettext('Share existing libraries')}</DropdownItem>\n                    <DropdownItem onClick={this.onCreateRepoToggle}>{gettext('New Library')}</DropdownItem>\n                  </DropdownMenu>\n                </Dropdown>\n              </div>\n            </div>\n          }\n          <CommonToolbar onSearchedClick={this.props.onSearchedClick} />\n        </div>\n        <div className=\"main-panel-center\">\n          <div className=\"cur-view-container\">\n            <div className=\"cur-view-path\">\n              <h3 className=\"sf-heading m-0\">{gettext('Shared with all')}</h3>\n              {(!Utils.isDesktop() && this.state.repoList.length > 0) && <span className=\"sf3-font sf3-font-sort action-icon\" onClick={this.toggleSortOptionsDialog}></span>}\n            </div>\n            <div className=\"cur-view-content\">\n              {this.state.isLoading && <Loading />}\n              {(!this.state.isLoading && errMessage) && errMessage}\n              {(!this.state.isLoading && this.state.repoList.length === 0) && emptyTip}\n              {(!this.state.isLoading && this.state.repoList.length > 0) &&\n                <SharedRepoListView\n                  libraryType={this.state.libraryType}\n                  repoList={this.state.repoList}\n                  sortBy={this.state.sortBy}\n                  sortOrder={this.state.sortOrder}\n                  sortItems={this.sortItems}\n                  onItemUnshare={this.onItemUnshare}\n                  onItemDelete={this.onItemDelete}\n                />\n              }\n            </div>\n          </div>\n        </div>\n        {this.state.isSortOptionsDialogOpen &&\n        <SortOptionsDialog\n          toggleDialog={this.toggleSortOptionsDialog}\n          sortBy={this.state.sortBy}\n          sortOrder={this.state.sortOrder}\n          sortItems={this.sortItems}\n        />\n        }\n        {this.state.isCreateRepoDialogShow && (\n          <ModalPortal>\n            <CreateRepoDialog\n              libraryType={this.state.libraryType}\n              onCreateToggle={this.onCreateRepoToggle}\n              onCreateRepo={this.onCreateRepo}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isSelectRepoDialpgShow && (\n          <ModalPortal>\n            <ShareRepoDialog\n              onRepoSelectedHandler={this.onRepoSelectedHandler}\n              onShareRepoDialogClose={this.onSelectRepoToggle}\n            />\n          </ModalPortal>\n        )}\n      </Fragment>\n    );\n  }\n}\n\nPublicSharedView.propTypes = propTypes;\n\nexport default PublicSharedView;\n","import io from 'socket.io-client';\nimport { name, username, contactEmail, seafileCollabServer } from './constants';\n\nconst socket = (seafileCollabServer !== '') ? io(seafileCollabServer) : undefined;\n\nclass CollabServer {\n\n  watchRepo(repoID, fn) {\n    if (!socket) {\n      return;\n    }\n    socket.emit('repo_update', {\n      request: 'watch_update',\n      repo_id: repoID,\n      user: {\n        name: name,\n        username: username,\n        contact_email: contactEmail,\n      },\n    });\n    socket.on('repo_update', fn);\n  }\n\n  unwatchRepo(repoID, fn) {\n    if (!socket) {\n      return;\n    }\n    socket.emit('repo_update', {\n      request: 'unwatch_update',\n      repo_id: repoID,\n      user: {\n        name: name,\n        username: username,\n        contact_email: contactEmail,\n      },\n    });\n    socket.off('repo_update', fn);\n  }\n}\n\nconst collabServer = new CollabServer();\n\nexport default collabServer;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Modal, ModalBody, Form } from 'reactstrap';\nimport { gettext, siteRoot, mediaUrl } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\n\nimport '../../css/lib-decrypt.css';\n\nconst propTypes = {\n  repoID: PropTypes.string.isRequired,\n  onLibDecryptDialog: PropTypes.func.isRequired\n};\n\n\nclass LibDecryptDialog extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      password: '',\n      showError: false,\n    };\n  }\n\n  handleSubmit = (e) => {\n    let repoID = this.props.repoID;\n    let password = this.state.password;\n    seafileAPI.setRepoDecryptPassword(repoID, password).then(res => {\n      this.props.onLibDecryptDialog();\n    }).catch(res => {\n      this.setState({\n        showError: true\n      });\n    });\n\n    e.preventDefault();\n  }\n\n  handleKeyPress = (e) => {\n    if (e.key == 'Enter') {\n      this.handleSubmit(e);\n    }\n  };\n\n  handleChange = (e) => {\n    this.setState({\n      password: e.target.value,\n      showError: false\n    });\n  }\n\n  toggle = () => {\n    window.location.href = siteRoot;\n  };\n\n  render() {\n    return (\n      <Modal isOpen={true}>\n        <ModalBody>\n          <button type=\"button\" className=\"close\" onClick={this.toggle}><span aria-hidden=\"true\"></span></button>\n          <Form className=\"lib-decrypt-form text-center\">\n            <img src={`${mediaUrl}img/lock.png`} alt=\"\" aria-hidden=\"true\" />\n            <p className=\"intro\">{gettext('This library is password protected')}</p>\n            {this.state.showError &&\n              <p className=\"error\">{gettext('Wrong password')}</p>\n            }\n            <input type=\"password\" name=\"password\" className=\"form-control password-input\" autoComplete=\"off\" onKeyPress={this.handleKeyPress} placeholder={gettext('Password')} onChange={this.handleChange} />\n            <button type=\"submit\" className=\"btn btn-primary submit\" onClick={this.handleSubmit}>{gettext('Submit')}</button>\n            <p className=\"tip\">{'* '}{gettext('The password will be kept in the server for only 1 hour.')}</p>\n          </Form>\n        </ModalBody>\n      </Modal>\n    );\n  }\n}\n\nLibDecryptDialog.propTypes = propTypes;\n\nexport default LibDecryptDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../../utils/constants';\n\nconst propTypes = {\n  currentMode: PropTypes.string.isRequired,\n  switchViewMode: PropTypes.func.isRequired,\n  isCustomPermission: PropTypes.bool,\n};\n\nclass ViewModeToolbar extends React.Component {\n\n  static defaultProps = {\n    isCustomPermission: false,\n  }\n\n  switchViewMode = (e) => {\n    e.preventDefault();\n    let id = e.target.id;\n    if (id === this.props.currentMode) {\n      return;\n    }\n    this.props.switchViewMode(id);\n  }\n\n  render() {\n    let baseClass = 'btn btn-secondary btn-icon sf-view-mode-btn ';\n    return (\n      <React.Fragment>\n        <div className=\"view-mode btn-group\">\n          <button className={`${baseClass} sf2-icon-list-view ${this.props.currentMode === 'list' ? 'current-mode' : ''}`} id='list' title={gettext('List')} aria-label={gettext('List')} onClick={this.switchViewMode}></button>\n          <button className={`${baseClass} sf2-icon-grid-view ${this.props.currentMode === 'grid' ? 'current-mode' : ''}`} id='grid' title={gettext('Grid')} aria-label={gettext('Grid')} onClick={this.switchViewMode}></button>\n          <button className={`${baseClass} sf2-icon-two-columns ${this.props.currentMode === 'column' ? 'current-mode' : ''}`} id='column' title={gettext('Column')} aria-label={gettext('Column')} onClick={this.switchViewMode}></button>\n        </div>\n        {!this.props.isCustomPermission && (\n          <div className=\"detail-btn btn-group\">\n            <button className=\"btn btn-secondary btn-icon ml-1 fas fa-info\" id='detail' title={gettext('Properties')} aria-label={gettext('Properties')} onClick={this.switchViewMode}></button>\n          </div>\n        )}\n      </React.Fragment>\n    );\n  }\n}\n\nViewModeToolbar.propTypes = propTypes;\n\nexport default ViewModeToolbar;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Modal, ModalHeader, Input, ModalBody, ModalFooter, Form, FormGroup, Label, Alert } from 'reactstrap';\nimport { gettext, isDocs } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\n\nconst propTypes = {\n  fileType: PropTypes.string,\n  parentPath: PropTypes.string.isRequired,\n  onAddFile: PropTypes.func.isRequired,\n  checkDuplicatedName: PropTypes.func.isRequired,\n  toggleDialog: PropTypes.func.isRequired,\n};\n\nclass CreateFile extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      parentPath: '',\n      childName: props.fileType || '',\n      isMarkdownDraft: false,\n      isSdocDraft: false,\n      errMessage: '',\n      isSubmitBtnActive: false,\n    };\n    this.newInput = React.createRef();\n  }\n\n  componentDidMount() {\n    let parentPath = this.props.parentPath;\n    if (parentPath[parentPath.length - 1] === '/') {  // mainPanel\n      this.setState({parentPath: parentPath});\n    } else {\n      this.setState({parentPath: parentPath + '/'}); // sidePanel\n    }\n  }\n\n  handleChange = (e) => {\n    if (!e.target.value.trim()) {\n      this.setState({isSubmitBtnActive: false});\n    } else {\n      this.setState({isSubmitBtnActive: true});\n    }\n\n    this.setState({\n      childName: e.target.value,\n    }) ;\n  }\n\n  handleSubmit = () => {\n    if (!this.state.isSubmitBtnActive) {\n      return;\n    }\n\n    let isDuplicated = this.checkDuplicatedName();\n    let newName = this.state.childName;\n\n    if (isDuplicated) {\n      let errMessage = gettext('The name \"{name}\" is already taken. Please choose a different name.');\n      errMessage = errMessage.replace('{name}', Utils.HTMLescape(newName));\n      this.setState({errMessage: errMessage});\n    } else {\n      let path = this.state.parentPath + newName;\n      const { isMarkdownDraft, isSdocDraft } = this.state;\n      this.props.onAddFile(path, isMarkdownDraft, isSdocDraft);\n      this.props.toggleDialog();\n    }\n  }\n\n  handleKeyPress = (e) => {\n    if (e.key === 'Enter') {\n      this.handleSubmit();\n      e.preventDefault();\n    }\n  }\n\n  handleCheck = () => {\n    let pos = this.state.childName.lastIndexOf('.');\n\n    if (this.state.isMarkdownDraft) {\n      // from draft to not draft\n      // case 1, normally, the file name is ended with `(draft)`, like `test(draft).md`\n      // case 2, the file name is not ended with `(draft)`, the user has deleted some characters, like `test(dra.md`\n      let p = this.state.childName.substring(pos-7, pos);\n      let fileName = this.state.childName.substring(0, pos-7);\n      let fileType = this.state.childName.substring(pos);\n      if (p === '(draft)') {\n        // remove `(draft)` from file name\n        this.setState({\n          childName: fileName + fileType,\n          isMarkdownDraft: !this.state.isMarkdownDraft\n        });\n      } else {\n        // don't change file name\n        this.setState({\n          isMarkdownDraft: !this.state.isMarkdownDraft\n        });\n      }\n    }\n\n    if (!this.state.isMarkdownDraft) {\n      // from not draft to draft\n      // case 1, test.md  ===> test(draft).md\n      // case 2, .md ===> (draft).md\n      // case 3, no '.' in the file name, don't change the file name\n      if (pos > 0) {\n        let fileName = this.state.childName.substring(0, pos);\n        let fileType = this.state.childName.substring(pos);\n        this.setState({\n          childName: fileName + '(draft)' + fileType,\n          isMarkdownDraft: !this.state.isMarkdownDraft\n        });\n      } else if (pos === 0 ) {\n        this.setState({\n          childName: '(draft)' + this.state.childName,\n          isMarkdownDraft: !this.state.isMarkdownDraft\n        });\n      } else {\n        this.setState({\n          isMarkdownDraft: !this.state.isMarkdownDraft\n        });\n      }\n    }\n  }\n\n  checkDuplicatedName = () => {\n    let isDuplicated = this.props.checkDuplicatedName(this.state.childName);\n    return isDuplicated;\n  }\n\n  onAfterModelOpened = () => {\n    if (!this.newInput.current) return;\n    this.newInput.current.focus();\n    this.newInput.current.setSelectionRange(0,0);\n  }\n\n  toggleMarkSdocDraft = (e) => {\n    this.setState({\n      isSdocDraft: e.target.checked\n    });\n  }\n\n  render() {\n    const { isSdocDraft } = this.state;\n    const { toggleDialog } = this.props;\n    return (\n      <Modal isOpen={true} toggle={toggleDialog} onOpened={this.onAfterModelOpened}>\n        <ModalHeader toggle={toggleDialog}>{gettext('New File')}</ModalHeader>\n        <ModalBody>\n          <Form>\n            <FormGroup>\n              <Label for=\"fileName\">{gettext('Name')}</Label>\n              <Input\n                id=\"fileName\"\n                onKeyPress={this.handleKeyPress}\n                innerRef={this.newInput}\n                value={this.state.childName}\n                onChange={this.handleChange}\n              />\n            </FormGroup>\n            {this.props.fileType == '.md' && isDocs && (\n              <FormGroup check>\n                <Label check>\n                  <Input type=\"checkbox\" onChange={this.handleCheck}/>{'  '}{gettext('This is a draft')}\n                </Label>\n              </FormGroup>\n            )}\n            {this.props.fileType == '.sdoc' && (\n              <FormGroup check>\n                <Label check>\n                  <Input type=\"checkbox\" checked={isSdocDraft} onChange={this.toggleMarkSdocDraft}/>\n                  <span>{gettext('Mark as draft')}</span>\n                </Label>\n              </FormGroup>\n            )}\n          </Form>\n          {this.state.errMessage && <Alert color=\"danger\" className=\"mt-2\">{this.state.errMessage}</Alert>}\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={toggleDialog}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.handleSubmit} disabled={!this.state.isSubmitBtnActive}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nCreateFile.propTypes = propTypes;\n\nexport default CreateFile;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Dropdown, DropdownToggle, DropdownMenu, DropdownItem } from 'reactstrap';\nimport { Utils } from '../../utils/utils';\nimport { enableSeadoc, gettext } from '../../utils/constants';\nimport ModalPortal from '../modal-portal';\nimport CreateFolder from '../../components/dialog/create-folder-dialog';\nimport CreateFile from '../../components/dialog/create-file-dialog';\nimport ShareDialog from '../../components/dialog/share-dialog';\nimport ViewModeToolbar from './view-mode-toolbar';\n\nconst propTypes = {\n  path: PropTypes.string.isRequired,\n  repoID: PropTypes.string.isRequired,\n  repoName: PropTypes.string.isRequired,\n  repoEncrypted: PropTypes.bool.isRequired,\n  enableDirPrivateShare: PropTypes.bool.isRequired,\n  userPerm: PropTypes.string.isRequired,\n  isGroupOwnedRepo: PropTypes.bool.isRequired,\n  showShareBtn: PropTypes.bool.isRequired,\n  onAddFile: PropTypes.func.isRequired,\n  onAddFolder: PropTypes.func.isRequired,\n  onUploadFile: PropTypes.func.isRequired,\n  onUploadFolder: PropTypes.func.isRequired,\n  direntList: PropTypes.array.isRequired,\n  currentMode: PropTypes.string.isRequired,\n  switchViewMode: PropTypes.func.isRequired,\n};\n\nclass DirOperationToolbar extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      fileType: '.md',\n      isCreateFileDialogShow: false,\n      isCreateFolderDialogShow: false,\n      isUploadMenuShow: false,\n      isCreateMenuShow: false,\n      isShareDialogShow: false,\n      operationMenuStyle: '',\n      isMobileOpMenuOpen: false\n    };\n  }\n\n  componentDidMount() {\n    document.addEventListener('click', this.hideOperationMenu);\n  }\n\n  componentWillUnmount() {\n    document.removeEventListener('click', this.hideOperationMenu);\n  }\n\n  toggleMobileOpMenu = () => {\n    this.setState({isMobileOpMenuOpen: !this.state.isMobileOpMenuOpen});\n  }\n\n  hideOperationMenu = () => {\n    this.setState({\n      isUploadMenuShow: false,\n      isCreateMenuShow: false,\n    });\n  }\n\n  toggleOperationMenu = (e) => {\n    e.nativeEvent.stopImmediatePropagation();\n    let targetRect = e.target.getBoundingClientRect();\n    let left = targetRect.left;\n    let top  = targetRect.bottom;\n    let style = {position: 'fixed', display: 'block', left: left, top: top};\n    this.setState({operationMenuStyle: style});\n  }\n\n  onUploadClick = (e) => {\n    this.toggleOperationMenu(e);\n    this.setState({\n      isUploadMenuShow: !this.state.isUploadMenuShow,\n      isCreateMenuShow: false,\n    });\n  }\n\n  onUploadFile = (e) => {\n    this.setState({isUploadMenuShow: false});\n    this.props.onUploadFile(e);\n  }\n\n  onUploadFolder = (e) => {\n    this.setState({isUploadMenuShow: false});\n    this.props.onUploadFolder(e);\n  }\n\n  onCreateClick = (e) => {\n    this.toggleOperationMenu(e);\n    this.setState({\n      isCreateMenuShow: !this.state.isCreateMenuShow,\n      isUploadMenuShow: false,\n    });\n  }\n\n  onShareClick = () => {\n    this.setState({\n      isShareDialogShow: !this.state.isShareDialogShow\n    });\n  }\n\n  onCreateFolderToggle = () => {\n    this.setState({isCreateFolderDialogShow: !this.state.isCreateFolderDialogShow});\n  }\n\n  onCreateFileToggle = () => {\n    this.setState({\n      isCreateFileDialogShow: !this.state.isCreateFileDialogShow,\n      fileType: ''\n    });\n  }\n\n  onCreateMarkdownToggle = () => {\n    this.setState({\n      isCreateFileDialogShow: !this.state.isCreateFileDialogShow,\n      fileType: '.md'\n    });\n  }\n\n  onCreateExcelToggle = () => {\n    this.setState({\n      isCreateFileDialogShow: !this.state.isCreateFileDialogShow,\n      fileType: '.xlsx'\n    });\n  }\n\n  onCreatePPTToggle = () => {\n    this.setState({\n      isCreateFileDialogShow: !this.state.isCreateFileDialogShow,\n      fileType: '.pptx'\n    });\n  }\n\n  onCreateWordToggle = () => {\n    this.setState({\n      isCreateFileDialogShow: !this.state.isCreateFileDialogShow,\n      fileType: '.docx'\n    });\n  }\n\n  onCreateSeaDocToggle = () => {\n    this.setState({\n      isCreateFileDialogShow: !this.state.isCreateFileDialogShow,\n      fileType: '.sdoc'\n    });\n  }\n\n  onAddFolder = (dirPath) => {\n    this.setState({isCreateFolderDialogShow: false});\n    this.props.onAddFolder(dirPath);\n  }\n\n  checkDuplicatedName = (newName) => {\n    let direntList = this.props.direntList;\n    let isDuplicated = direntList.some(object => {\n      return object.name === newName;\n    });\n    return isDuplicated;\n  }\n\n  render() {\n    let { path, repoName, userPerm } = this.props;\n\n    let itemType = path === '/' ? 'library' : 'dir';\n    let itemName = path == '/' ? repoName : Utils.getFolderName(path);\n\n    const { isCustomPermission, customPermission } = Utils.getUserPermission(userPerm);\n    let canUpload = true;\n    let canCreate = true;\n    if (isCustomPermission) {\n      const { permission } = customPermission;\n      canUpload = permission.upload;\n      canCreate = permission.create;\n    }\n\n    let content = null;\n    if (Utils.isDesktop()) {\n      let { showShareBtn } = this.props;\n      content = (\n        <Fragment>\n          {canUpload && (\n            <Fragment>\n              {Utils.isSupportUploadFolder() ?\n                <Fragment>\n                  <button className=\"btn btn-secondary operation-item\" onClick={this.onUploadClick} aria-haspopup=\"true\" aria-expanded={this.state.isUploadMenuShow} aria-controls=\"upload-menu\">{gettext('Upload')}</button>\n                  {this.state.isUploadMenuShow && (\n                    <div className=\"menu dropdown-menu\" style={this.state.operationMenuStyle} role=\"menu\" id=\"upload-menu\">\n                      <button type=\"button\" className=\"dropdown-item\" onClick={this.onUploadFile} role=\"menuitem\">{gettext('Upload Files')}</button>\n                      <button type=\"button\" className=\"dropdown-item\" onClick={this.onUploadFolder} role=\"menuitem\">{gettext('Upload Folder')}</button>\n                    </div>\n                  )}\n                </Fragment>\n                :\n                <button className=\"btn btn-secondary operation-item\" title={gettext('Upload')} onClick={this.onUploadFile}>{gettext('Upload')}</button>}\n            </Fragment>\n          )}\n          {canCreate &&\n          <Fragment>\n            <button className=\"btn btn-secondary operation-item\" onClick={this.onCreateClick} aria-haspopup=\"true\" aria-expanded={this.state.isUploadMenuShow} aria-controls=\"new-menu\">{gettext('New')}</button>\n            {this.state.isCreateMenuShow && (\n              <div className=\"menu dropdown-menu\" style={this.state.operationMenuStyle} role=\"menu\" id=\"new-menu\">\n                <button className=\"dropdown-item\" onClick={this.onCreateFolderToggle} role=\"menuitem\">{gettext('New Folder')}</button>\n                <button className=\"dropdown-item\" onClick={this.onCreateFileToggle}>{gettext('New File')}</button>\n                <div className=\"dropdown-divider\"></div>\n                <button className=\"dropdown-item\" onClick={this.onCreateMarkdownToggle} role=\"menuitem\">{gettext('New Markdown File')}</button>\n                <button className=\"dropdown-item\" onClick={this.onCreateExcelToggle} role=\"menuitem\">{gettext('New Excel File')}</button>\n                <button className=\"dropdown-item\" onClick={this.onCreatePPTToggle} role=\"menuitem\">{gettext('New PowerPoint File')}</button>\n                <button className=\"dropdown-item\" onClick={this.onCreateWordToggle} role=\"menuitem\">{gettext('New Word File')}</button>\n                {enableSeadoc && <button className=\"dropdown-item\" onClick={this.onCreateSeaDocToggle} role=\"menuitem\">{gettext('New SeaDoc File')} (beta)</button>}\n              </div>\n            )}\n          </Fragment>\n          }\n          {showShareBtn && <button className=\"btn btn-secondary operation-item\" title={gettext('Share')} onClick={this.onShareClick}>{gettext('Share')}</button>}\n        </Fragment>\n      );\n    } else {\n      content = (\n        <Dropdown isOpen={this.state.isMobileOpMenuOpen} toggle={this.toggleMobileOpMenu}>\n          <DropdownToggle tag=\"span\" className=\"sf2-icon-plus mobile-toolbar-icon\" />\n          <DropdownMenu>\n            {canUpload && (\n              <DropdownItem onClick={this.onUploadFile}>{gettext('Upload')}</DropdownItem>\n            )}\n            {canCreate && (\n              <Fragment>\n                <DropdownItem onClick={this.onCreateFolderToggle}>{gettext('New Folder')}</DropdownItem>\n                <DropdownItem onClick={this.onCreateFileToggle}>{gettext('New File')}</DropdownItem>\n              </Fragment>\n            )}\n          </DropdownMenu>\n        </Dropdown>\n      );\n    }\n\n    return (\n      <Fragment>\n        {(userPerm === 'rw' || userPerm === 'admin' || userPerm === 'cloud-edit' || isCustomPermission) && (\n          <div className=\"dir-operation\">\n            {content}\n          </div>\n        )}\n        {Utils.isDesktop() && <ViewModeToolbar currentMode={this.props.currentMode} switchViewMode={this.props.switchViewMode} isCustomPermission={isCustomPermission} />}\n        {this.state.isCreateFileDialogShow && (\n          <ModalPortal>\n            <CreateFile\n              parentPath={this.props.path}\n              fileType={this.state.fileType}\n              onAddFile={this.props.onAddFile}\n              checkDuplicatedName={this.checkDuplicatedName}\n              toggleDialog={this.onCreateFileToggle}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isCreateFolderDialogShow && (\n          <ModalPortal>\n            <CreateFolder\n              parentPath={this.props.path}\n              onAddFolder={this.onAddFolder}\n              checkDuplicatedName={this.checkDuplicatedName}\n              addFolderCancel={this.onCreateFolderToggle}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isShareDialogShow &&\n          <ModalPortal>\n            <ShareDialog\n              itemType={itemType}\n              itemName={itemName}\n              itemPath={this.props.path}\n              repoID={this.props.repoID}\n              repoEncrypted={this.props.repoEncrypted}\n              enableDirPrivateShare={this.props.enableDirPrivateShare}\n              userPerm={this.props.userPerm}\n              isGroupOwnedRepo={this.props.isGroupOwnedRepo}\n              toggleDialog={this.onShareClick}\n            />\n          </ModalPortal>\n        }\n      </Fragment>\n    );\n  }\n}\n\nDirOperationToolbar.propTypes = propTypes;\n\nexport default DirOperationToolbar;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Modal, ModalHeader, ModalFooter, ModalBody, Alert } from 'reactstrap';\nimport { gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport FileChooser from '../file-chooser/file-chooser';\n\nconst propTypes = {\n  path: PropTypes.string.isRequired,\n  repoID: PropTypes.string.isRequired,\n  dirent: PropTypes.object,\n  selectedDirentList: PropTypes.array,\n  isMutipleOperation: PropTypes.bool.isRequired,\n  onItemMove: PropTypes.func,\n  onItemsMove: PropTypes.func,\n  onCancelMove: PropTypes.func.isRequired,\n  repoEncrypted: PropTypes.bool.isRequired,\n};\n\n// need dirent file Path\nclass MoveDirent extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      repo: { repo_id: this.props.repoID },\n      selectedPath: this.props.path,\n      errMessage: ''\n    };\n  }\n\n  shouldComponentUpdate(nextProps, nextState) {\n    if (this.state.errMessage === nextState.errMessage) {\n      return false;\n    }\n    return true;\n  }\n\n  handleSubmit = () => {\n    if (this.props.isMutipleOperation) {\n      this.moveItems();\n    } else {\n      this.moveItem();\n    }\n  }\n\n  moveItems = () => {\n    let { repoID } = this.props;\n    let { repo, selectedPath } = this.state;\n    let message = gettext('Invalid destination path');\n\n    if (!repo || selectedPath === '') {\n      this.setState({errMessage: message});\n      return;\n    }\n\n    let selectedDirentList = this.props.selectedDirentList;\n    let direntPaths = [];\n    selectedDirentList.forEach(dirent => {\n      let path = Utils.joinPath(this.props.path, dirent.name);\n      direntPaths.push(path);\n    });\n\n    // move dirents to one of them. eg: A/B, A/C -> A/B\n    if (direntPaths.some(direntPath => { return direntPath === selectedPath;})) {\n      this.setState({errMessage: message});\n      return;\n    }\n\n    // move dirents to current path\n    if (selectedPath && selectedPath === this.props.path && (repo.repo_id === repoID)) {\n      this.setState({errMessage: message});\n      return;\n    }\n\n    // move dirents to one of their child. eg: A/B, A/D -> A/B/C\n    let moveDirentPath = '';\n    let isChildPath = direntPaths.some(direntPath => {\n      let flag = selectedPath.length > direntPath.length && selectedPath.indexOf(direntPath) > -1;\n      if (flag) {\n        moveDirentPath = direntPath;\n      }\n      return flag;\n    });\n\n    if (isChildPath) {\n      message = gettext('Can not move directory %(src)s to its subdirectory %(des)s');\n      message = message.replace('%(src)s', moveDirentPath);\n      message = message.replace('%(des)s', selectedPath);\n      this.setState({errMessage: message});\n      return;\n    }\n\n    this.props.onItemsMove(repo, selectedPath);\n    this.toggle();\n  }\n\n  moveItem = () => {\n    let { repoID } = this.props;\n    let { repo, selectedPath } = this.state;\n    let direntPath = Utils.joinPath(this.props.path, this.props.dirent.name);\n    let message = gettext('Invalid destination path');\n\n    if (!repo || (repo.repo_id === repoID && selectedPath === '')) {\n      this.setState({errMessage: message});\n      return;\n    }\n\n    // copy the dirent to itself. eg: A/B -> A/B\n    if (selectedPath && direntPath === selectedPath) {\n      this.setState({errMessage: message});\n      return;\n    }\n\n    // copy the dirent to current path\n    if (selectedPath && this.props.path === selectedPath && repo.repo_id === repoID) {\n      this.setState({errMessage: message});\n      return;\n    }\n\n    // copy the dirent to it's child. eg: A/B -> A/B/C\n    if ( selectedPath && selectedPath.length > direntPath.length && selectedPath.indexOf(direntPath) > -1) {\n      message = gettext('Can not move directory %(src)s to its subdirectory %(des)s');\n      message = message.replace('%(src)s', direntPath);\n      message = message.replace('%(des)s', selectedPath);\n      this.setState({errMessage: message});\n      return;\n    }\n\n    this.props.onItemMove(repo, this.props.dirent, selectedPath, this.props.path);\n    this.toggle();\n  }\n\n  toggle = () => {\n    this.props.onCancelMove();\n  }\n\n  onDirentItemClick = (repo, selectedPath) => {\n    this.setState({\n      repo: repo,\n      selectedPath: selectedPath,\n      errMessage: ''\n    });\n  }\n\n  onRepoItemClick = (repo) => {\n    this.setState({\n      repo: repo,\n      selectedPath: '/',\n      errMessage: ''\n    });\n  }\n\n  render() {\n    let title = gettext('Move {placeholder} to');\n    if (!this.props.isMutipleOperation) {\n      title = title.replace('{placeholder}', '<span class=\"op-target\">' + Utils.HTMLescape(this.props.dirent.name) + '</span>');\n    } else {\n      title = gettext('Move selected item(s) to:');\n    }\n    let mode = this.props.repoEncrypted ? 'only_current_library':'current_repo_and_other_repos';\n    const { dirent, selectedDirentList } = this.props;\n    const movedDirent = dirent ? dirent : selectedDirentList[0];\n    const { permission } = movedDirent;\n    const { isCustomPermission } = Utils.getUserPermission(permission);\n    if (isCustomPermission) {\n      mode = 'only_current_library';\n    }\n    return (\n      <Modal isOpen={true} toggle={this.toggle}>\n        <ModalHeader toggle={this.toggle}><div dangerouslySetInnerHTML={{__html: title}}></div></ModalHeader>\n        <ModalBody>\n          <FileChooser\n            repoID={this.props.repoID}\n            currentPath={this.props.path}\n            onDirentItemClick={this.onDirentItemClick}\n            onRepoItemClick={this.onRepoItemClick}\n            mode={mode}\n          />\n          {this.state.errMessage && <Alert color=\"danger\" className=\"mt-2\">{this.state.errMessage}</Alert>}\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.toggle}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.handleSubmit}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nMoveDirent.propTypes = propTypes;\n\nexport default MoveDirent;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Modal, ModalHeader, ModalFooter, ModalBody, Alert } from 'reactstrap';\nimport { gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport FileChooser from '../file-chooser/file-chooser';\n\nconst propTypes = {\n  path: PropTypes.string.isRequired,\n  repoID: PropTypes.string.isRequired,\n  dirent: PropTypes.object,\n  selectedDirentList: PropTypes.array,\n  isMutipleOperation: PropTypes.bool.isRequired,\n  onItemCopy: PropTypes.func,\n  onItemsCopy: PropTypes.func,\n  onCancelCopy: PropTypes.func.isRequired,\n  repoEncrypted: PropTypes.bool.isRequired,\n};\n\n// need dirent file Path\nclass CopyDirent extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      repo: { repo_id: this.props.repoID },\n      selectedPath: this.props.path,\n      errMessage: ''\n    };\n  }\n\n  shouldComponentUpdate(nextProps, nextState) {\n    if (this.state.errMessage === nextState.errMessage) {\n      return false;\n    }\n    return true;\n  }\n\n  handleSubmit = () => {\n    if (this.props.isMutipleOperation) {\n      this.copyItems();\n    } else {\n      this.copyItem();\n    }\n  }\n\n  copyItems = () => {\n    let { repoID } = this.props;\n    let { repo, selectedPath } = this.state;\n    let message = gettext('Invalid destination path');\n\n    if (!repo || selectedPath === '') {\n      this.setState({errMessage: message});\n      return;\n    }\n\n    let selectedDirentList = this.props.selectedDirentList;\n    let direntPaths = [];\n    selectedDirentList.forEach(dirent => {\n      let path = Utils.joinPath(this.props.path, dirent.name);\n      direntPaths.push(path);\n    });\n\n    // copy dirents to one of them. eg: A/B, A/C -> A/B\n    if (direntPaths.some(direntPath => { return direntPath === selectedPath;})) {\n      this.setState({errMessage: message});\n      return;\n    }\n\n    // copy dirents to one of their child. eg: A/B, A/D -> A/B/C\n    let copyDirentPath = '';\n    let isChildPath = direntPaths.some(direntPath => {\n      let flag = selectedPath.length > direntPath.length && selectedPath.indexOf(direntPath) > -1;\n      if (flag) {\n        copyDirentPath = direntPath;\n      }\n      return flag;\n    });\n\n    if (isChildPath) {\n      message = gettext('Can not move directory %(src)s to its subdirectory %(des)s');\n      message = message.replace('%(src)s', copyDirentPath);\n      message = message.replace('%(des)s', selectedPath);\n      this.setState({errMessage: message});\n      return;\n    }\n\n    this.props.onItemsCopy(repo, selectedPath);\n    this.toggle();\n  }\n\n  copyItem = () => {\n    let { repo, repoID, selectedPath } = this.state;\n    let direntPath = Utils.joinPath(this.props.path, this.props.dirent.name);\n    let message = gettext('Invalid destination path');\n\n    if (!repo || (repo.repo_id === repoID && selectedPath === '')) {\n      this.setState({errMessage: message});\n      return;\n    }\n\n    // copy the dirent to itself. eg: A/B -> A/B\n    if (selectedPath && direntPath === selectedPath) {\n      this.setState({errMessage: message});\n      return;\n    }\n\n    // copy the dirent to it's child. eg: A/B -> A/B/C\n    if ( selectedPath && selectedPath.length > direntPath.length && selectedPath.indexOf(direntPath) > -1) {\n      message = gettext('Can not copy directory %(src)s to its subdirectory %(des)s');\n      message = message.replace('%(src)s', direntPath);\n      message = message.replace('%(des)s', selectedPath);\n      this.setState({errMessage: message});\n      return;\n    }\n\n    this.props.onItemCopy(repo, this.props.dirent, selectedPath, this.props.path);\n    this.toggle();\n  }\n\n  toggle = () => {\n    this.props.onCancelCopy();\n  }\n\n  onDirentItemClick = (repo, selectedPath) => {\n    this.setState({\n      repo: repo,\n      selectedPath: selectedPath,\n      errMessage: ''\n    });\n  }\n\n  onRepoItemClick = (repo) => {\n    this.setState({\n      repo: repo,\n      selectedPath: '/',\n      errMessage: ''\n    });\n  }\n\n  render() {\n    let title = gettext('Copy {placeholder} to');\n    if (!this.props.isMutipleOperation) {\n      title = title.replace('{placeholder}', '<span class=\"op-target\">' + Utils.HTMLescape(this.props.dirent.name) + '</span>');\n    } else {\n      title = gettext('Copy selected item(s) to:');\n    }\n    let mode = this.props.repoEncrypted ? 'only_current_library':'current_repo_and_other_repos';\n    return (\n      <Modal isOpen={true} toggle={this.toggle}>\n        <ModalHeader toggle={this.toggle}><div dangerouslySetInnerHTML={{__html: title}}></div></ModalHeader>\n        <ModalBody>\n          <FileChooser\n            repoID={this.props.repoID}\n            currentPath={this.props.path}\n            onDirentItemClick={this.onDirentItemClick}\n            onRepoItemClick={this.onRepoItemClick}\n            mode={mode}\n          />\n          {this.state.errMessage && <Alert color=\"danger\" className=\"mt-2\">{this.state.errMessage}</Alert>}\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.toggle}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.handleSubmit}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nCopyDirent.propTypes = propTypes;\n\nexport default CopyDirent;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport { Button, Modal, ModalHeader, Input, ModalBody, ModalFooter, Alert } from 'reactstrap';\n\nconst propTypes = {\n  onRename: PropTypes.func.isRequired,\n  toggleCancel: PropTypes.func.isRequired,\n  checkDuplicatedName: PropTypes.func.isRequired,\n  dirent: PropTypes.object,\n};\n\nclass Rename extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      newName: '',\n      errMessage: '',\n      isSubmitBtnActive: false,\n    };\n    this.newInput = React.createRef();\n  }\n\n  componentWillMount() {\n    this.setState({newName: this.props.dirent.name});\n  }\n\n  componentDidMount() {\n    let { dirent } = this.props;\n    this.changeState(dirent);\n  }\n\n  componentWillReceiveProps(nextProps) {\n    this.changeState(nextProps.dirent);\n  }\n\n  handleChange = (e) => {\n    if (!e.target.value.trim()) {\n      this.setState({isSubmitBtnActive: false});\n    } else {\n      this.setState({isSubmitBtnActive: true});\n    }\n\n    this.setState({newName: e.target.value});\n  }\n\n  handleSubmit = () => {\n    let { isValid, errMessage } = this.validateInput();\n    if (!isValid) {\n      this.setState({errMessage : errMessage});\n    } else {\n      let isDuplicated = this.checkDuplicatedName();\n      if (isDuplicated) {\n        let errMessage = gettext('The name \"{name}\" is already taken. Please choose a different name.');\n        errMessage = errMessage.replace('{name}', Utils.HTMLescape(this.state.newName));\n        this.setState({errMessage: errMessage});\n      } else {\n        this.props.onRename(this.state.newName);\n        this.props.toggleCancel();\n      }\n    }\n  }\n\n  handleKeyPress = (e) => {\n    if (e.key === 'Enter') {\n      this.handleSubmit();\n    }\n  }\n\n  toggle = () => {\n    this.props.toggleCancel();\n  }\n\n  changeState = (dirent) => {\n    let name = dirent.name;\n    this.setState({newName: name});\n  }\n\n  validateInput = () => {\n    let newName = this.state.newName.trim();\n    let isValid = true;\n    let errMessage = '';\n    if (!newName) {\n      isValid = false;\n      errMessage = gettext('Name is required.');\n      return { isValid, errMessage };\n    }\n\n    if (newName.indexOf('/') > -1) {\n      isValid = false;\n      errMessage = gettext('Name should not include ' + '\\'/\\'' + '.');\n      return { isValid, errMessage };\n    }\n\n    return { isValid, errMessage };\n  }\n\n  checkDuplicatedName = () => {\n    let isDuplicated = this.props.checkDuplicatedName(this.state.newName);\n    return isDuplicated;\n  }\n\n  onAfterModelOpened = () => {\n    if (!this.newInput.current) return;\n    this.newInput.current.focus();\n\n    let { dirent } = this.props;\n    let type = dirent.type;\n    if (type === 'file') {\n      var endIndex = dirent.name.lastIndexOf('.md');\n      this.newInput.current.setSelectionRange(0, endIndex, 'forward');\n    } else {\n      this.newInput.current.setSelectionRange(0, -1);\n    }\n  }\n\n  render() {\n    let type = this.props.dirent.type;\n    return (\n      <Modal isOpen={true} toggle={this.toggle} onOpened={this.onAfterModelOpened}>\n        <ModalHeader toggle={this.toggle}>{type === 'file' ? gettext('Rename File') : gettext('Rename Folder') }</ModalHeader>\n        <ModalBody>\n          <p>{type === 'file' ? gettext('New file name'): gettext('New folder name')}</p>\n          <Input onKeyPress={this.handleKeyPress} innerRef={this.newInput} value={this.state.newName} onChange={this.handleChange} />\n          {this.state.errMessage && <Alert color=\"danger\" className=\"mt-2\">{this.state.errMessage}</Alert>}\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.toggle}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.handleSubmit} disabled={!this.state.isSubmitBtnActive}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nRename.propTypes = propTypes;\n\nexport default Rename;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, ButtonGroup } from 'reactstrap';\nimport { gettext, siteRoot, name, fileServerRoot, useGoFileserver } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport URLDecorator from '../../utils/url-decorator';\nimport MoveDirentDialog from '../dialog/move-dirent-dialog';\nimport CopyDirentDialog from '../dialog/copy-dirent-dialog';\nimport ShareDialog from '../dialog/share-dialog';\nimport EditFileTagDialog from '../dialog/edit-filetag-dialog';\nimport ZipDownloadDialog from '../dialog/zip-download-dialog';\nimport Rename from '../dialog/rename-dirent';\nimport LibSubFolderPermissionDialog from '../dialog/lib-sub-folder-permission-dialog';\nimport ViewModeToolbar from './view-mode-toolbar';\n\nimport ModalPortal from '../modal-portal';\nimport ItemDropdownMenu from '../dropdown-menu/item-dropdown-menu';\nimport toaster from '../toast';\n\nimport '../../css/dirents-menu.css';\n\nconst propTypes = {\n  path: PropTypes.string.isRequired,\n  userPerm: PropTypes.string.isRequired,\n  repoID: PropTypes.string.isRequired,\n  repoEncrypted: PropTypes.bool.isRequired,\n  selectedDirentList: PropTypes.array.isRequired,\n  onItemsMove: PropTypes.func.isRequired,\n  onItemsCopy: PropTypes.func.isRequired,\n  onItemsDelete: PropTypes.func.isRequired,\n  isRepoOwner: PropTypes.bool.isRequired,\n  enableDirPrivateShare: PropTypes.bool.isRequired,\n  currentRepoInfo: PropTypes.object.isRequired,\n  onFilesTagChanged: PropTypes.func.isRequired,\n  unSelectDirent: PropTypes.func.isRequired,\n  updateDirent: PropTypes.func.isRequired,\n  currentMode: PropTypes.string.isRequired,\n  switchViewMode: PropTypes.func.isRequired,\n};\n\nclass MultipleDirOperationToolbar extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isZipDialogOpen: false,\n      isMoveDialogShow: false,\n      isCopyDialogShow: false,\n      isMutipleOperation: true,\n      showLibContentViewDialogs: false,\n      showShareDialog: false,\n      showEditFileTagDialog: false,\n      fileTagList: [],\n      multiFileTagList: [],\n      isRenameDialogOpen: false,\n      isPermissionDialogOpen: false\n    };\n  }\n\n  onMoveToggle = () => {\n    this.setState({isMoveDialogShow: !this.state.isMoveDialogShow});\n  }\n\n  onCopyToggle = () => {\n    this.setState({isCopyDialogShow: !this.state.isCopyDialogShow});\n  }\n\n  onItemsDelete = () => {\n    this.props.onItemsDelete();\n  }\n\n  onItemsDownload = () => {\n    let { path, repoID, selectedDirentList } = this.props;\n    if (selectedDirentList.length) {\n      if (selectedDirentList.length === 1 && !selectedDirentList[0].isDir()) {\n        let direntPath = Utils.joinPath(path, selectedDirentList[0].name);\n        let url = URLDecorator.getUrl({type: 'download_file_url', repoID: repoID, filePath: direntPath});\n        location.href= url;\n        return;\n      }\n      if (!useGoFileserver) {\n        this.setState({\n          isZipDialogOpen: true\n        });\n      } else {\n        const target = this.props.selectedDirentList.map(dirent => dirent.name);\n        seafileAPI.zipDownload(repoID, path, target).then((res) => {\n          const zipToken = res.data['zip_token'];\n          location.href = `${fileServerRoot}zip/${zipToken}`;\n        }).catch((error) => {\n          let errorMsg = Utils.getErrorMsg(error);\n          this.setState({\n            isLoading: false,\n            errorMsg: errorMsg\n          });\n        });\n      }\n    }\n  }\n\n  closeZipDialog = () => {\n    this.setState({\n      isZipDialogOpen: false\n    });\n  }\n\n  checkDuplicatedName = (newName) => {\n    return Utils.checkDuplicatedNameInList(this.props.direntList, newName);\n  }\n\n  onItemRename = (newName) => {\n    const dirent = this.props.selectedDirentList[0];\n    this.props.onItemRename(dirent, newName);\n  }\n\n  onPermissionItem = () => {\n    this.setState({\n      showLibContentViewDialogs: !this.state.showLibContentViewDialogs,\n      isPermissionDialogOpen: !this.state.isPermissionDialogOpen\n    });\n  }\n\n  onMarkAsDraft = (dirent) => {\n    let repoID = this.props.repoID;\n    let filePath = this.getDirentPath(dirent);\n    seafileAPI.sdocMarkAsDraft(repoID, filePath).then((res) => {\n      this.props.updateDirent(dirent, 'is_sdoc_draft', true);\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  onUnmarkAsDraft = (dirent) => {\n    let repoID = this.props.repoID;\n    let filePath = this.getDirentPath(dirent);\n    seafileAPI.sdocUnmarkAsDraft(repoID, filePath).then((res) => {\n      this.props.updateDirent(dirent, 'is_sdoc_draft', false);\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  onStartRevise = (dirent) => {\n    let repoID = this.props.repoID;\n    let filePath = this.getDirentPath(dirent);\n    seafileAPI.sdocStartRevise(repoID, filePath).then((res) => {\n      let url = siteRoot + 'lib/' + repoID + '/file' + Utils.encodePath(res.data.file_path);\n      window.open(url);\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  onCommentItem = () => {\n    this.props.showDirentDetail('comments');\n  }\n\n  getDirentMenuList = (dirent) => {\n    const isRepoOwner = this.props.isRepoOwner;\n    const currentRepoInfo = this.props.currentRepoInfo;\n    const isContextmenu = true;\n    let opList = Utils.getDirentOperationList(isRepoOwner, currentRepoInfo, dirent, isContextmenu);\n    const list = ['Move', 'Copy', 'Delete', 'Download'];\n    if (dirent.type == 'dir') {\n      opList = opList.filter((item, index) => {\n        return list.indexOf(item.key) == -1 && item != 'Divider';\n      });\n    } else {\n      opList = opList.filter((item, index) => {\n        return list.indexOf(item.key) == -1;\n      });\n    }\n    return opList;\n  }\n\n  onMenuItemClick = (operation) => {\n    const dirents = this.props.selectedDirentList;\n    const dirent = dirents[0];\n    switch (operation) {\n      case 'Share':\n        this.setState({\n          showLibContentViewDialogs: true,\n          showShareDialog: true,\n        });\n        break;\n      case 'Rename':\n        this.setState({\n          showLibContentViewDialogs: true,\n          isRenameDialogOpen: true\n        });\n        break;\n      case 'Permission':\n        this.onPermissionItem();\n        break;\n      case 'Tags':\n        this.listFileTags(dirent);\n        break;\n      case 'Lock':\n        this.lockFile(dirent);\n        break;\n      case 'Unlock':\n        this.unlockFile(dirent);\n        break;\n      case 'Mark as draft':\n        this.onMarkAsDraft(dirent);\n        break;\n      case 'Unmark as draft':\n        this.onUnmarkAsDraft(dirent);\n        break;\n      case 'Comment':\n        this.onCommentItem();\n        break;\n      case 'History':\n        this.onHistory(dirent);\n        break;\n      case 'Access Log':\n        this.onAccessLog(dirent);\n        break;\n      case 'Properties':\n        this.props.showDirentDetail('info');\n        break;\n      case 'Open via Client':\n        this.onOpenViaClient(dirent);\n        break;\n      default:\n        break;\n    }\n  }\n\n  lockFile = (dirent) => {\n    const filePath = this.getDirentPath(dirent);\n    seafileAPI.lockfile(this.props.repoID, filePath).then((res) => {\n      if (res.data.is_locked) {\n        this.props.updateDirent(dirent, 'is_locked', true);\n        this.props.updateDirent(dirent, 'locked_by_me', true);\n        this.props.updateDirent(dirent, 'lock_owner_name', name);\n        this.props.unSelectDirent();\n      }\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  unlockFile = (dirent) => {\n    const filePath = this.getDirentPath(dirent);\n    seafileAPI.unlockfile(this.props.repoID, filePath).then((res) => {\n      if (!res.data.is_locked) {\n        this.props.updateDirent(dirent, 'is_locked', false);\n        this.props.updateDirent(dirent, 'locked_by_me', false);\n        this.props.updateDirent(dirent, 'lock_owner_name', '');\n        this.props.unSelectDirent();\n      }\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  onOpenViaClient = (dirent) => {\n    const filePath = this.getDirentPath(dirent);\n    let url = URLDecorator.getUrl({\n      type: 'open_via_client',\n      repoID: this.props.repoID,\n      filePath: filePath\n    });\n    location.href = url;\n  }\n\n  onHistory = (dirent) => {\n    let filePath = this.getDirentPath(dirent);\n    let url = URLDecorator.getUrl({\n      type: 'file_revisions',\n      repoID: this.props.repoID,\n      filePath: filePath\n    });\n    location.href = url;\n  }\n\n  onAccessLog = (dirent) => {\n    let filePath = this.getDirentPath(dirent);\n    let path = siteRoot + 'repo/file-access/' + this.props.repoID + '/?p=' + encodeURIComponent(filePath) ;\n    window.open(path);\n  }\n\n  toggleCancel = () => {\n    this.setState({\n      showLibContentViewDialogs: false,\n      showShareDialog: false,\n      showEditFileTagDialog: false,\n      isRenameDialogOpen: false,\n      isPermissionDialogOpen: false,\n    });\n  }\n\n  listFileTags = (dirent) => {\n    let filePath = this.getDirentPath(dirent);\n    seafileAPI.listFileTags(this.props.repoID, filePath).then(res => {\n      let fileTagList = res.data.file_tags;\n      for (let i = 0, length = fileTagList.length; i < length; i++) {\n        fileTagList[i].id = fileTagList[i].file_tag_id;\n      }\n      this.setState({\n        fileTagList: fileTagList,\n        showLibContentViewDialogs: true,\n        showEditFileTagDialog: true,\n      });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  onMenuFileTagChanged = () => {\n    this.listFileTags(this.props.selectedDirentList[0]);\n    let length = this.props.selectedDirentList.length;\n    for (let i = 0; i < length; i++) {\n      const dirent = this.props.selectedDirentList[i];\n      const direntPath = this.getDirentPath(dirent);\n      this.props.onFilesTagChanged(dirent, direntPath);\n    }\n  }\n\n  getDirentPath = (dirent) => {\n    if (dirent) return Utils.joinPath(this.props.path, dirent.name);\n  }\n\n  render() {\n\n    const { repoID, userPerm } = this.props;\n    const dirent = this.props.selectedDirentList[0];\n    const direntPath = this.getDirentPath(dirent);\n\n    const { isCustomPermission, customPermission } = Utils.getUserPermission(userPerm);\n    let canDelete = true;\n    let canDownload = true;\n    let canCopy = true;\n    let canModify = true;\n    if (isCustomPermission) {\n      const { permission } = customPermission;\n      canDelete = permission.delete;\n      canDownload = permission.download;\n      canCopy = permission.copy;\n      canModify = permission.modify;\n    }\n\n    return (\n      <Fragment>\n        <div className=\"dir-operation\">\n          <div className=\"d-flex\">\n            <ButtonGroup className=\"flex-row group-operations\">\n              {(userPerm === 'rw' || userPerm === 'admin' || isCustomPermission) && (\n                <Fragment>\n                  {canModify && <Button className=\"secondary group-op-item action-icon sf2-icon-move\" title={gettext('Move')} aria-label={gettext('Move')} onClick={this.onMoveToggle}></Button>}\n                  {canCopy && <Button className=\"secondary group-op-item action-icon sf2-icon-copy\" title={gettext('Copy')} aria-label={gettext('Copy')} onClick={this.onCopyToggle}></Button>}\n                  {canDelete && <Button className=\"secondary group-op-item action-icon sf2-icon-delete\" title={gettext('Delete')} aria-label={gettext('Delete')} onClick={this.onItemsDelete}></Button>}\n                  {canDownload && <Button className=\"secondary group-op-item action-icon sf2-icon-download\" title={gettext('Download')} aria-label={gettext('Download')} onClick={this.onItemsDownload}></Button>}\n                </Fragment>\n              )}\n              {userPerm === 'cloud-edit' && (\n                <Fragment>\n                  {canModify && <Button className=\"secondary group-op-item action-icon sf2-icon-move\" title={gettext('Move')} aria-label={gettext('Move')} onClick={this.onMoveToggle}></Button>}\n                  {canCopy && <Button className=\"secondary group-op-item action-icon sf2-icon-copy\" title={gettext('Copy')} aria-label={gettext('Copy')} onClick={this.onCopyToggle}></Button>}\n                  {canDelete && <Button className=\"secondary group-op-item action-icon sf2-icon-delete\" title={gettext('Delete')} aria-label={gettext('Delete')} onClick={this.onItemsDelete}></Button>}\n                </Fragment>\n              )}\n              {userPerm === 'r' && (\n                <Fragment>\n                  <Button className=\"secondary group-op-item action-icon sf2-icon-copy\" title={gettext('Copy')} aria-label={gettext('Copy')} onClick={this.onCopyToggle}></Button>\n                  <Button className=\"secondary group-op-item action-icon sf2-icon-download\" title={gettext('Download')} aria-label={gettext('Download')} onClick={this.onItemsDownload}></Button>\n                </Fragment>\n              )}\n              {this.props.selectedDirentList.length === 1 &&\n                <ItemDropdownMenu\n                  tagName={'button'}\n                  item={this.props.selectedDirentList[0]}\n                  toggleClass={'fas fa-ellipsis-v dirents-more-menu'}\n                  onMenuItemClick={this.onMenuItemClick}\n                  getMenuList={this.getDirentMenuList}\n                />\n              }\n            </ButtonGroup>\n          </div>\n        </div>\n        {Utils.isDesktop() && <ViewModeToolbar currentMode={this.props.currentMode} switchViewMode={this.props.switchViewMode} isCustomPermission={isCustomPermission} />}\n        {this.state.isMoveDialogShow &&\n          <MoveDirentDialog\n            path={this.props.path}\n            repoID={this.props.repoID}\n            repoEncrypted={this.props.repoEncrypted}\n            isMutipleOperation={this.state.isMutipleOperation}\n            selectedDirentList={this.props.selectedDirentList}\n            onItemsMove={this.props.onItemsMove}\n            onCancelMove={this.onMoveToggle}\n          />\n        }\n        {this.state.isCopyDialogShow &&\n          <CopyDirentDialog\n            path={this.props.path}\n            repoID={this.props.repoID}\n            repoEncrypted={this.props.repoEncrypted}\n            selectedDirentList={this.props.selectedDirentList}\n            isMutipleOperation={this.state.isMutipleOperation}\n            onItemsCopy={this.props.onItemsCopy}\n            onCancelCopy={this.onCopyToggle}\n          />\n        }\n        {this.state.isZipDialogOpen &&\n        <ModalPortal>\n          <ZipDownloadDialog\n            repoID={this.props.repoID}\n            path={this.props.path}\n            target={this.props.selectedDirentList.map(dirent => dirent.name)}\n            toggleDialog={this.closeZipDialog}\n          />\n        </ModalPortal>\n        }\n        {this.state.showLibContentViewDialogs && (\n          <Fragment>\n            {this.state.showShareDialog &&\n              <ModalPortal>\n                <ShareDialog\n                  itemType={dirent.type}\n                  itemName={dirent.name}\n                  itemPath={direntPath}\n                  userPerm={dirent.permission}\n                  repoID={repoID}\n                  repoEncrypted={this.props.repoEncrypted}\n                  enableDirPrivateShare={this.props.enableDirPrivateShare}\n                  isGroupOwnedRepo={this.props.isGroupOwnedRepo}\n                  toggleDialog={this.toggleCancel}\n                />\n              </ModalPortal>\n            }\n            {this.state.isRenameDialogOpen &&\n              <ModalPortal>\n                <Rename\n                  dirent={dirent}\n                  onRename={this.onItemRename}\n                  checkDuplicatedName={this.checkDuplicatedName}\n                  toggleCancel={this.toggleCancel}\n                />\n              </ModalPortal>\n            }\n            {this.state.isPermissionDialogOpen &&\n              <ModalPortal>\n                <LibSubFolderPermissionDialog\n                  toggleDialog={this.toggleCancel}\n                  repoID={repoID}\n                  folderPath={direntPath}\n                  folderName={dirent.name}\n                  isDepartmentRepo={this.props.isGroupOwnedRepo}\n                />\n              </ModalPortal>\n            }\n            {this.state.showEditFileTagDialog &&\n              <ModalPortal>\n                <EditFileTagDialog\n                  repoID={repoID}\n                  filePath={direntPath}\n                  fileTagList={this.state.fileTagList}\n                  toggleCancel={this.toggleCancel}\n                  onFileTagChanged={this.onMenuFileTagChanged}\n                />\n              </ModalPortal>\n            }\n          </Fragment>\n        )}\n      </Fragment>\n    );\n  }\n}\n\nMultipleDirOperationToolbar.propTypes = propTypes;\n\nexport default MultipleDirOperationToolbar;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { DropdownToggle, Dropdown, DropdownMenu, DropdownItem, Tooltip} from 'reactstrap';\nimport { gettext, siteRoot, canGenerateShareLink, isDocs } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../toast';\nimport ModalPotal from '../modal-portal';\nimport ShareDialog from '../dialog/share-dialog';\nimport EditFileTagDialog from '../dialog/edit-filetag-dialog';\n\nconst propTypes = {\n  path: PropTypes.string.isRequired,\n  repoID: PropTypes.string.isRequired,\n  userPerm: PropTypes.string.isRequired,\n  repoEncrypted: PropTypes.bool.isRequired,\n  enableDirPrivateShare: PropTypes.bool.isRequired,\n  isGroupOwnedRepo: PropTypes.bool.isRequired,\n  filePermission: PropTypes.string,\n  isDraft: PropTypes.bool.isRequired,\n  hasDraft: PropTypes.bool.isRequired,\n  fileTags: PropTypes.array.isRequired,\n  onFileTagChanged: PropTypes.func.isRequired,\n  showShareBtn: PropTypes.bool.isRequired,\n};\n\nclass ViewFileToolbar extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isDraftMessageShow: false,\n      isMoreMenuShow: false,\n      isShareDialogShow: false,\n      isEditTagDialogShow: false,\n    };\n  }\n\n  onEditClick = (e) => {\n    e.preventDefault();\n    let { path, repoID } = this.props;\n    let url = siteRoot + 'lib/' + repoID + '/file' + Utils.encodePath(path) + '?mode=edit';\n    window.open(url);\n  }\n\n  onNewDraft = (e) => {\n    e.preventDefault();\n    let { path, repoID } = this.props;\n    seafileAPI.createDraft(repoID, path).then(res => {\n      window.location.href = siteRoot + 'lib/' + res.data.origin_repo_id + '/file' + res.data.draft_file_path + '?mode=edit';\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  onDraftHover = () => {\n    this.setState({isDraftMessageShow: !this.state.isDraftMessageShow});\n  }\n\n  toggleMore = () => {\n    this.setState({isMoreMenuShow: !this.state.isMoreMenuShow});\n  }\n\n  onShareToggle = () => {\n    this.setState({isShareDialogShow: !this.state.isShareDialogShow});\n  }\n\n  onEditFileTagToggle = () => {\n    this.setState({isEditTagDialogShow: !this.state.isEditTagDialogShow});\n  }\n\n  onHistoryClick = () => {\n    let historyUrl = siteRoot + 'repo/file_revisions/' + this.props.repoID + '/?p=' + Utils.encodePath(this.props.path);\n    location.href = historyUrl;\n  }\n\n  render() {\n    let { filePermission } = this.props;\n    let name = Utils.getFileName(this.props.path);\n    let dirent = { name: name };\n    return (\n      <Fragment>\n        <div className=\"dir-operation\">\n          {((filePermission === 'rw' || filePermission === 'cloud-edit') && !this.props.hasDraft) && (\n            <Fragment>\n              <button className=\"btn btn-secondary operation-item\" title={gettext('Edit File')} onClick={this.onEditClick}>{gettext('Edit')}</button>\n            </Fragment>\n          )}\n          {(filePermission === 'rw' && !this.props.isDraft && !this.props.hasDraft && isDocs) && (\n            <Fragment>\n              <button id=\"new-draft\" className=\"btn btn-secondary operation-item\" onClick={this.onNewDraft}>{gettext('New Draft')}</button>\n              <Tooltip target=\"new-draft\" placement=\"bottom\" isOpen={this.state.isDraftMessageShow} toggle={this.onDraftHover}>{gettext('Create a draft from this file, instead of editing it directly.')}</Tooltip>\n            </Fragment>\n          )}\n          {filePermission === 'rw' && (\n            <Dropdown isOpen={this.state.isMoreMenuShow} toggle={this.toggleMore}>\n              <DropdownToggle className='btn btn-secondary operation-item'>\n                {gettext('More')}\n              </DropdownToggle>\n              <DropdownMenu>\n                {this.props.showShareBtn &&\n                  <DropdownItem onClick={this.onShareToggle}>{gettext('Share')}</DropdownItem>\n                }\n                <DropdownItem onClick={this.onEditFileTagToggle}>{gettext('Tags')}</DropdownItem>\n                <DropdownItem onClick={this.onHistoryClick}>{gettext('History')}</DropdownItem>\n              </DropdownMenu>\n            </Dropdown>\n          )}\n        </div>\n        {this.state.isShareDialogShow && (\n          <ModalPotal>\n            <ShareDialog\n              itemType={'file'}\n              itemName={Utils.getFileName(this.props.path)}\n              itemPath={this.props.path}\n              repoID={this.props.repoID}\n              repoEncrypted={this.props.repoEncrypted}\n              enableDirPrivateShare={this.props.enableDirPrivateShare}\n              userPerm={this.props.userPerm}\n              isGroupOwnedRepo={this.props.isGroupOwnedRepo}\n              toggleDialog={this.onShareToggle}\n            />\n          </ModalPotal>\n        )}\n        {this.state.isEditTagDialogShow && (\n          <ModalPotal>\n            <EditFileTagDialog\n              filePath={this.props.path}\n              repoID={this.props.repoID}\n              fileTagList={this.props.fileTags}\n              toggleCancel={this.onEditFileTagToggle}\n              onFileTagChanged={this.props.onFileTagChanged}\n            />\n          </ModalPotal>\n        )}\n      </Fragment>\n    );\n  }\n}\n\nViewFileToolbar.propTypes = propTypes;\n\nexport default ViewFileToolbar;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../../utils/constants';\nimport CommonToolbar from '../../components/toolbar/common-toolbar';\nimport ViewModeToolbar from '../../components/toolbar/view-mode-toolbar';\nimport DirOperationToolBar from '../../components/toolbar/dir-operation-toolbar';\nimport MultipleDirOperationToolbar from '../../components/toolbar/multiple-dir-operation-toolbar';\nimport ViewFileToolbar from '../../components/toolbar/view-file-toolbar';\nimport { Utils } from '../../utils/utils';\n\nconst propTypes = {\n  isViewFile: PropTypes.bool.isRequired,\n  filePermission: PropTypes.string,\n  isDraft: PropTypes.bool.isRequired,\n  hasDraft: PropTypes.bool.isRequired,\n  fileTags: PropTypes.array.isRequired,\n  onFileTagChanged: PropTypes.func.isRequired,  // for file-view-toolbar\n  // side-panel\n  onSideNavMenuClick: PropTypes.func.isRequired,\n  // mutiple-dir\n  isDirentSelected: PropTypes.bool.isRequired,\n  repoID: PropTypes.string.isRequired,\n  path: PropTypes.string.isRequired,\n  selectedDirentList: PropTypes.array.isRequired,\n  onItemsMove: PropTypes.func.isRequired,\n  onItemsCopy: PropTypes.func.isRequired,\n  onItemsDelete: PropTypes.func.isRequired,\n  // dir\n  direntList: PropTypes.array.isRequired,\n  repoName: PropTypes.string.isRequired,\n  repoEncrypted: PropTypes.bool.isRequired,\n  isGroupOwnedRepo: PropTypes.bool.isRequired,\n  userPerm: PropTypes.string.isRequired,\n  showShareBtn: PropTypes.bool.isRequired,\n  enableDirPrivateShare: PropTypes.bool.isRequired,\n  onAddFile: PropTypes.func.isRequired,\n  onAddFolder: PropTypes.func.isRequired,\n  onUploadFile: PropTypes.func.isRequired,\n  onUploadFolder: PropTypes.func.isRequired,\n  // view-mode\n  currentMode: PropTypes.string.isRequired,\n  switchViewMode: PropTypes.func.isRequired,\n  // search\n  onSearchedClick: PropTypes.func.isRequired,\n  isRepoOwner: PropTypes.bool.isRequired,\n  // selected menu\n  onFilesTagChanged: PropTypes.func.isRequired, // for mutiple select toolbar\n  updateDirent: PropTypes.func.isRequired,\n  unSelectDirent: PropTypes.func,\n  currentRepoInfo: PropTypes.object,\n};\n\nclass LibContentToolbar extends React.Component {\n\n  render() {\n\n    const { userPerm } = this.props;\n    const { isCustomPermission } = Utils.getUserPermission(userPerm);\n\n    if (this.props.isViewFile) {\n      return (\n        <Fragment>\n          <div className=\"cur-view-toolbar\">\n            <span className=\"sf2-icon-menu hidden-md-up d-md-none side-nav-toggle\" title={gettext('Side Nav Menu')} onClick={this.props.onSideNavMenuClick}></span>\n            <ViewFileToolbar\n              path={this.props.path}\n              repoID={this.props.repoID}\n              userPerm={this.props.userPerm}\n              repoEncrypted={this.props.repoEncrypted}\n              enableDirPrivateShare={this.props.enableDirPrivateShare}\n              isGroupOwnedRepo={this.props.isGroupOwnedRepo}\n              filePermission={this.props.filePermission}\n              isDraft={this.props.isDraft}\n              hasDraft={this.props.hasDraft}\n              fileTags={this.props.fileTags}\n              onFileTagChanged={this.props.onFileTagChanged}\n              showShareBtn={this.props.showShareBtn}\n            />\n            <ViewModeToolbar currentMode={this.props.currentMode} switchViewMode={this.props.switchViewMode} isCustomPermission={isCustomPermission} />\n          </div>\n          <CommonToolbar isLibView={true} repoID={this.props.repoID} repoName={this.props.repoName} onSearchedClick={this.props.onSearchedClick} searchPlaceholder={gettext('Search files in this library')}/>\n        </Fragment>\n      );\n    }\n\n    return (\n      <Fragment>\n        <div className=\"cur-view-toolbar\">\n          <span className=\"sf2-icon-menu hidden-md-up d-md-none side-nav-toggle\" title={gettext('Side Nav Menu')} onClick={this.props.onSideNavMenuClick}></span>\n          {this.props.isDirentSelected ?\n            <MultipleDirOperationToolbar\n              repoID={this.props.repoID}\n              path={this.props.path}\n              userPerm={this.props.userPerm}\n              repoEncrypted={this.props.repoEncrypted}\n              selectedDirentList={this.props.selectedDirentList}\n              direntList={this.props.direntList}\n              onItemsMove={this.props.onItemsMove}\n              onItemsCopy={this.props.onItemsCopy}\n              onItemsDelete={this.props.onItemsDelete}\n              onItemRename={this.props.onItemRename}\n              isRepoOwner={this.props.isRepoOwner}\n              currentRepoInfo={this.props.currentRepoInfo}\n              enableDirPrivateShare={this.props.enableDirPrivateShare}\n              updateDirent={this.props.updateDirent}\n              unSelectDirent={this.props.unSelectDirent}\n              onFilesTagChanged={this.props.onFilesTagChanged}\n              showShareBtn={this.props.showShareBtn}\n              isGroupOwnedRepo={this.props.isGroupOwnedRepo}\n              showDirentDetail={this.props.showDirentDetail}\n              currentMode={this.props.currentMode}\n              switchViewMode={this.props.switchViewMode}\n            /> :\n            <DirOperationToolBar\n              path={this.props.path}\n              repoID={this.props.repoID}\n              repoName={this.props.repoName}\n              repoEncrypted={this.props.repoEncrypted}\n              direntList={this.props.direntList}\n              showShareBtn={this.props.showShareBtn}\n              enableDirPrivateShare={this.props.enableDirPrivateShare}\n              userPerm={this.props.userPerm}\n              isGroupOwnedRepo={this.props.isGroupOwnedRepo}\n              onAddFile={this.props.onAddFile}\n              onAddFolder={this.props.onAddFolder}\n              onUploadFile={this.props.onUploadFile}\n              onUploadFolder={this.props.onUploadFolder}\n              currentMode={this.props.currentMode}\n              switchViewMode={this.props.switchViewMode}\n            />\n          }\n        </div>\n        <CommonToolbar isLibView={true} repoID={this.props.repoID} repoName={this.props.repoName} onSearchedClick={this.props.onSearchedClick} searchPlaceholder={gettext('Search files in this library')}/>\n      </Fragment>\n    );\n  }\n}\n\nLibContentToolbar.propTypes = propTypes;\n\nexport default LibContentToolbar;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Link } from '@gatsbyjs/reach-router';\nimport { UncontrolledTooltip } from 'reactstrap';\nimport { siteRoot, gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport { InternalLinkOperation } from '../operations';\n\nconst propTypes = {\n  repoName: PropTypes.string.isRequired,\n  currentPath: PropTypes.string.isRequired,\n  onPathClick: PropTypes.func.isRequired,\n  onTabNavClick: PropTypes.func,\n  pathPrefix: PropTypes.array,\n  repoID: PropTypes.string.isRequired,\n  isViewFile: PropTypes.bool,\n  fileTags: PropTypes.array.isRequired,\n};\n\nclass DirPath extends React.Component {\n\n  onPathClick = (e) => {\n    let path = Utils.getEventData(e, 'path');\n    this.props.onPathClick(path);\n  }\n\n  onTabNavClick = (e, tabName, id) => {\n    if (window.uploader &&\n      window.uploader.isUploadProgressDialogShow &&\n      window.uploader.totalProgress !== 100) {\n      if (!window.confirm(gettext('A file is being uploaded. Are you sure you want to leave this page?'))) {\n        e.preventDefault();\n        return false;\n      }\n      window.uploader.isUploadProgressDialogShow = false;\n    }\n    this.props.onTabNavClick(tabName, id);\n  }\n\n  turnPathToLink = (path) => {\n    path = path[path.length - 1] === '/' ? path.slice(0, path.length - 1) : path;\n    let pathList = path.split('/');\n    let nodePath = '';\n    let pathElem = pathList.map((item, index) => {\n      if (item === '') {\n        return;\n      }\n      if (index === (pathList.length - 1)) {\n        return (\n          <Fragment key={index}>\n            <span className=\"path-split\">/</span>\n            <span className=\"path-file-name\">{item}</span>\n          </Fragment>\n        );\n      } else {\n        nodePath += '/' + item;\n        return (\n          <Fragment key={index} >\n            <span className=\"path-split\">/</span>\n            <a className=\"path-link\" data-path={nodePath} onClick={this.onPathClick}>{item}</a>\n          </Fragment>\n        );\n      }\n    });\n    return pathElem;\n  }\n\n  render() {\n    let { currentPath, repoName, fileTags } = this.props;\n    let pathElem = this.turnPathToLink(currentPath);\n\n    let tagTitle = '';\n    if (fileTags.length > 0) {\n      fileTags.forEach(item => {\n        tagTitle += item.name + ' ';\n      });\n    }\n\n    return (\n      <div className=\"path-container\">\n        {this.props.pathPrefix && this.props.pathPrefix.map((item, index) => {\n          return (\n            <Fragment key={index}>\n              <Link to={item.url} className=\"normal\" onClick={(e) => this.onTabNavClick(e, item.name, item.id)}>{gettext(item.showName)}</Link>\n              <span className=\"path-split\">/</span>\n            </Fragment>\n          );\n        })}\n        {this.props.pathPrefix && this.props.pathPrefix.length === 0 && (\n          <Fragment>\n            <Link to={siteRoot + 'my-libs/'} className=\"normal\" onClick={(e) => this.onTabNavClick(e, 'my-libs')}>{gettext('Libraries')}</Link>\n            <span className=\"path-split\">/</span>\n          </Fragment>\n        )}\n        {!this.props.pathPrefix && (\n          <Fragment>\n            <Link href={siteRoot + 'my-libs/'} className=\"normal\" onClick={(e) => this.onTabNavClick(e, 'my-libs')}>{gettext('Libraries')}</Link>\n            <span className=\"path-split\">/</span>\n          </Fragment>\n        )}\n        {(currentPath === '/' || currentPath === '') ?\n          <span className=\"path-repo-name\">{repoName}</span>:\n          <a className=\"path-link\" data-path=\"/\" onClick={this.onPathClick}>{repoName}</a>\n        }\n        {pathElem}\n        {this.props.isViewFile && (\n          <InternalLinkOperation repoID={this.props.repoID} path={this.props.currentPath}/>\n        )}\n        {(this.props.isViewFile && fileTags.length !== 0) &&\n          <span id='column-mode-file-tags' className=\"tag-list tag-list-stacked align-middle ml-1 d-flex align-items-center\">\n            {fileTags.map((fileTag, index) => {\n              return (<span className=\"file-tag\" key={fileTag.id} style={{zIndex: index, backgroundColor: fileTag.color}}></span>);\n            })}\n            <UncontrolledTooltip target=\"column-mode-file-tags\" placement=\"bottom\">\n              {tagTitle}\n            </UncontrolledTooltip>\n          </span>\n        }\n      </div>\n    );\n  }\n}\n\nDirPath.propTypes = propTypes;\n\nexport default DirPath;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Popover, PopoverBody } from 'reactstrap';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../toast';\n\nimport '../../css/repo-tag.css';\n\nconst tagColorPropTypes = {\n  tag: PropTypes.object.isRequired,\n  repoID: PropTypes.string.isRequired\n};\n\nclass TagColor extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      tagColor: this.props.tag.color,\n      isPopoverOpen: false\n    };\n  }\n\n  togglePopover = () => {\n    this.setState({\n      isPopoverOpen: !this.state.isPopoverOpen\n    });\n  }\n\n  selectTagColor = (e) => {\n    const newColor = e.target.value;\n    const { repoID, tag } = this.props;\n    const { id, name } = tag;\n    seafileAPI.updateRepoTag(repoID, id, name, newColor).then(() => {\n      this.setState({\n        tagColor: newColor,\n        isPopoverOpen: !this.state.isPopoverOpen\n      });\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  render() {\n    const { isPopoverOpen, tagColor } = this.state;\n    const { tag } = this.props;\n    const { id, color } = tag;\n\n    let colorList = ['#FBD44A', '#EAA775', '#F4667C', '#DC82D2', '#9860E5', '#9F8CF1', '#59CB74', '#ADDF84', '#89D2EA', '#4ECCCB', '#46A1FD', '#C2C2C2'];\n    // for color from previous color options\n    if (colorList.indexOf(color) == -1) {\n      colorList.unshift(color);\n    }\n\n    return (\n      <div>\n        <span\n          id={`tag-${id}-color`}\n          className=\"tag-color cursor-pointer w-4 h-4 rounded-circle d-flex align-items-center justify-content-center\"\n          style={{backgroundColor: tagColor}}\n          onClick={this.togglePopover}\n        >\n          <i className=\"fas fa-caret-down text-white\"></i>\n        </span>\n        <Popover\n          target={`tag-${id}-color`}\n          isOpen={isPopoverOpen}\n          placement=\"bottom\"\n          toggle={this.togglePopover}\n          className=\"mw-100\"\n        >\n          <PopoverBody className=\"p-2\">\n            <div className=\"d-flex justify-content-between\">\n              {colorList.map((item, index)=>{\n                return (\n                  <div key={index} className=\"tag-color-option mx-1\">\n                    <label className=\"colorinput\">\n                      <input name=\"color\" type=\"radio\" value={item} className=\"colorinput-input\" defaultChecked={item == tagColor} onClick={this.selectTagColor} />\n                      <span className=\"colorinput-color rounded-circle d-flex align-items-center justify-content-center\" style={{backgroundColor: item}}>\n                        <i className=\"fas fa-check color-selected\"></i>\n                      </span>\n                    </label>\n                  </div>\n                );\n              })\n              }\n            </div>\n          </PopoverBody>\n        </Popover>\n      </div>\n    );\n  }\n}\n\nTagColor.propTypes = tagColorPropTypes;\n\nexport default TagColor;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../toast';\n\nimport '../../css/repo-tag.css';\n\nconst tagNamePropTypes = {\n  tag: PropTypes.object.isRequired,\n  repoID: PropTypes.string.isRequired\n};\n\nclass TagName extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      tagName: this.props.tag.name,\n      isEditing: false\n    };\n    this.input = React.createRef();\n  }\n\n  toggleMode = () => {\n    this.setState({\n      isEditing: !this.state.isEditing\n    }, () => {\n      if (this.state.isEditing) {\n        this.input.current.focus();\n      }\n    });\n  }\n\n  updateTagName = (e) => {\n    const newName = e.target.value;\n    const { repoID, tag } = this.props;\n    const { id, color } = tag;\n    seafileAPI.updateRepoTag(repoID, id, newName, color).then(() => {\n      this.setState({\n        tagName: newName\n      });\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  onInputKeyDown = (e) => {\n    if (e.key == 'Enter') {\n      this.toggleMode();\n      this.updateTagName(e);\n    }\n  }\n\n  onInputBlur = (e) => {\n    this.toggleMode();\n    this.updateTagName(e);\n  }\n\n  render() {\n    const { isEditing, tagName } = this.state;\n    return (\n      <div className=\"mx-2 flex-fill d-flex\">\n        {isEditing ?\n          <input\n            type=\"text\"\n            ref={this.input}\n            defaultValue={tagName}\n            onBlur={this.onInputBlur}\n            onKeyDown={this.onInputKeyDown}\n            className=\"flex-fill form-control-sm form-control\"\n          /> :\n          <span\n            onClick={this.toggleMode}\n            className=\"cursor-pointer flex-fill\"\n          >{tagName}</span>\n        }\n      </div>\n    );\n  }\n}\n\nTagName.propTypes = tagNamePropTypes;\n\nexport default TagName;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, ModalHeader, ModalBody, ModalFooter } from 'reactstrap';\nimport { gettext } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../toast';\nimport RepoTag from '../../models/repo-tag';\nimport TagColor from './tag-color';\nimport TagName from './tag-name';\n\nimport '../../css/repo-tag.css';\n\nconst tagListItemPropTypes = {\n  item: PropTypes.object.isRequired,\n  repoID: PropTypes.string.isRequired,\n  onDeleteTag : PropTypes.func.isRequired\n};\n\nclass TagListItem extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isTagHighlighted: false\n    };\n  }\n\n  onMouseOver = () => {\n    this.setState({\n      isTagHighlighted: true\n    });\n  }\n\n  onMouseOut = () => {\n    this.setState({\n      isTagHighlighted: false\n    });\n  }\n\n  deleteTag = () => {\n    this.props.onDeleteTag(this.props.item);\n  }\n\n  render() {\n    const { isTagHighlighted } = this.state;\n    const { item, repoID } = this.props;\n    return (\n      <li\n        className={`tag-list-item px-4 d-flex justify-content-between align-items-center ${isTagHighlighted ? 'hl' : ''}`}\n        onMouseOver={this.onMouseOver}\n        onMouseOut={this.onMouseOut}\n      >\n        <TagColor repoID={repoID} tag={item} />\n        <TagName repoID={repoID} tag={item} />\n        <button\n          className={`tag-delete-icon sf2-icon-delete border-0 px-0 bg-transparent cursor-pointer ${isTagHighlighted ? '' : 'invisible'}`}\n          onClick={this.deleteTag}\n          aria-label={gettext('Delete')}\n          title={gettext('Delete')}\n        ></button>\n      </li>\n    );\n  }\n}\n\nTagListItem.propTypes = tagListItemPropTypes;\n\nconst listTagPropTypes = {\n  repoID: PropTypes.string.isRequired,\n  onListTagCancel: PropTypes.func.isRequired,\n  onCreateRepoTag: PropTypes.func.isRequired\n};\n\nclass ListTagDialog extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      repotagList: []\n    };\n  }\n\n  componentDidMount() {\n    let repoID = this.props.repoID;\n    seafileAPI.listRepoTags(repoID).then(res => {\n      let repotagList = [];\n      res.data.repo_tags.forEach(item => {\n        let repo_tag = new RepoTag(item);\n        repotagList.push(repo_tag);\n      });\n      this.setState({\n        repotagList: repotagList\n      });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  toggle = () => {\n    this.props.onListTagCancel();\n  }\n\n  createNewTag = (e) => {\n    e.preventDefault();\n    this.props.onCreateRepoTag();\n  }\n\n  onDeleteTag = (tag) => {\n    const { repoID } = this.props;\n    const { id: targetTagID } = tag;\n    seafileAPI.deleteRepoTag(repoID, targetTagID).then((res) => {\n      this.setState({\n        repotagList: this.state.repotagList.filter(tag => tag.id != targetTagID)\n      });\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  render() {\n    return (\n      <Fragment>\n        <ModalHeader toggle={this.toggle}>{gettext('Tags')}</ModalHeader>\n        <ModalBody className=\"px-0\">\n          <ul className=\"tag-list tag-list-container\">\n            {this.state.repotagList.map((repoTag, index) => {\n              return (\n                <TagListItem\n                  key={index}\n                  item={repoTag}\n                  repoID={this.props.repoID}\n                  onDeleteTag={this.onDeleteTag}\n                />\n              );\n            })}\n          </ul>\n          <a\n            href=\"#\"\n            className=\"add-tag-link px-4 py-2 d-flex align-items-center\"\n            onClick={this.createNewTag}\n          >\n            <span className=\"sf2-icon-plus mr-2\"></span>\n            {gettext('Create a new tag')}\n          </a>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.toggle}>{gettext('Close')}</Button>\n        </ModalFooter>\n      </Fragment>\n    );\n  }\n}\n\nListTagDialog.propTypes = listTagPropTypes;\n\nexport default ListTagDialog;\n","import React, { Fragment } from 'react';\nimport { gettext, siteRoot } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport PropTypes from 'prop-types';\nimport ModalPortal from '../modal-portal';\nimport { Modal } from 'reactstrap';\nimport ListTagDialog from '../dialog/list-tag-dialog';\nimport CreateTagDialog from '../dialog/create-tag-dialog';\nimport ListTaggedFilesDialog from '../dialog/list-taggedfiles-dialog';\n\nconst propTypes = {\n  repoID: PropTypes.string.isRequired,\n  userPerm: PropTypes.string,\n  currentPath: PropTypes.string.isRequired,\n  updateUsedRepoTags: PropTypes.func.isRequired,\n  onDeleteRepoTag: PropTypes.func.isRequired,\n};\n\nclass DirTool extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isRepoTagDialogShow: false,\n      currentTag: null,\n      isListRepoTagShow: false,\n      isCreateRepoTagShow: false,\n      isListTaggedFileShow: false,\n    };\n  }\n\n  onShowListRepoTag = (e) => {\n    e.preventDefault();\n    this.setState({\n      isRepoTagDialogShow: true,\n      isListRepoTagShow: true,\n      isCreateRepoTagShow: false,\n      isListTaggedFileShow: false\n    });\n  }\n\n  onCloseRepoTagDialog = () => {\n    this.setState({\n      isRepoTagDialogShow: false,\n      isListRepoTagShow: false,\n      isCreateRepoTagShow: false,\n      isListTaggedFileShow: false\n    });\n  }\n\n  onCreateRepoTagToggle = () => {\n    this.setState({\n      isCreateRepoTagShow: !this.state.isCreateRepoTagShow,\n      isListRepoTagShow: !this.state.isListRepoTagShow,\n    });\n  }\n\n  onListTaggedFileToggle = (currentTag) => {\n    this.setState({\n      currentTag: currentTag,\n      isListRepoTagShow: !this.state.isListRepoTagShow,\n      isListTaggedFileShow: !this.state.isListTaggedFileShow,\n    });\n  }\n\n  isMarkdownFile(filePath) {\n    let name = Utils.getFileName(filePath);\n    return name.indexOf('.md') > -1 ? true : false;\n  }\n\n  render() {\n    let { repoID, userPerm, currentPath } = this.props;\n    let isFile = this.isMarkdownFile(currentPath);\n    let name = Utils.getFileName(currentPath);\n    let trashUrl = siteRoot + 'repo/' + repoID + '/trash/';\n    let historyUrl = siteRoot + 'repo/history/' + repoID + '/';\n    if (userPerm === 'rw') {\n      if (!isFile) {\n        if (name) { // name not '' is not root path\n          trashUrl = siteRoot + 'repo/' + repoID + '/trash/?path=' + encodeURIComponent(currentPath);\n          return (\n            <ul className=\"path-toolbar\">\n              <li className=\"toolbar-item\"><a className=\"op-link sf2-icon-recycle\" href={trashUrl} title={gettext('Trash')} aria-label={gettext('Trash')}></a></li>\n            </ul>\n          );\n        } else { // currentPath === '/' is root path\n          return (\n            <Fragment>\n              <ul className=\"path-toolbar\">\n                <li className=\"toolbar-item\"><a className=\"op-link sf2-icon-tag\" href=\"#\" role=\"button\" onClick={this.onShowListRepoTag} title={gettext('Tags')} aria-label={gettext('Tags')}></a></li>\n                <li className=\"toolbar-item\"><a className=\"op-link sf2-icon-recycle\" href={trashUrl} title={gettext('Trash')} aria-label={gettext('Trash')}></a></li>\n                <li className=\"toolbar-item\"><a className=\"op-link sf2-icon-history\" href={historyUrl} title={gettext('History')} aria-label={gettext('History')}></a></li>\n              </ul>\n\n              {this.state.isRepoTagDialogShow && (\n                <ModalPortal>\n                  <Modal isOpen={true} autoFocus={false}>\n                    {this.state.isListRepoTagShow && (\n                      <ListTagDialog\n                        repoID={repoID}\n                        onListTagCancel={this.onCloseRepoTagDialog}\n                        onCreateRepoTag={this.onCreateRepoTagToggle}\n                      />\n                    )}\n                    {this.state.isCreateRepoTagShow && (\n                      <CreateTagDialog\n                        repoID={repoID}\n                        onClose={this.onCloseRepoTagDialog}\n                        toggleCancel={this.onCreateRepoTagToggle}\n                      />\n                    )}\n                    {this.state.isListTaggedFileShow && (\n                      <ListTaggedFilesDialog\n                        repoID={this.props.repoID}\n                        currentTag={this.state.currentTag}\n                        onClose={this.onCloseRepoTagDialog}\n                        toggleCancel={this.onListTaggedFileToggle}\n                        updateUsedRepoTags={this.props.updateUsedRepoTags}\n                      />\n                    )}\n                  </Modal>\n                </ModalPortal>\n              )}\n            </Fragment>\n          );\n        }\n      }\n    }\n    return '';\n  }\n}\n\nDirTool.propTypes = propTypes;\n\nexport default DirTool;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Utils } from '../../utils/utils';\nimport SortOptionsDialog from '../../components/dialog/sort-options';\nimport DirPath from './dir-path';\nimport DirTool from './dir-tool';\n\nconst propTypes = {\n  repoID: PropTypes.string.isRequired,\n  repoName: PropTypes.string.isRequired,\n  userPerm: PropTypes.string,\n  currentPath: PropTypes.string.isRequired,\n  onPathClick: PropTypes.func.isRequired,\n  onTabNavClick: PropTypes.func,\n  pathPrefix: PropTypes.array,\n  isViewFile: PropTypes.bool,\n  updateUsedRepoTags: PropTypes.func.isRequired,\n  fileTags: PropTypes.array.isRequired,\n  onDeleteRepoTag: PropTypes.func.isRequired,\n};\n\nclass CurDirPath extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isSortOptionsDialogOpen: false\n    };\n  }\n\n  toggleSortOptionsDialog = () => {\n    this.setState({\n      isSortOptionsDialogOpen: !this.state.isSortOptionsDialogOpen\n    });\n  }\n\n  render() {\n    const isDesktop = Utils.isDesktop();\n    return (\n      <Fragment>\n        <DirPath\n          repoName={this.props.repoName}\n          pathPrefix={this.props.pathPrefix}\n          currentPath={this.props.currentPath}\n          onPathClick={this.props.onPathClick}\n          onTabNavClick={this.props.onTabNavClick}\n          repoID={this.props.repoID}\n          isViewFile={this.props.isViewFile}\n          fileTags={this.props.fileTags}\n        />\n        {isDesktop &&\n        <DirTool\n          repoID={this.props.repoID}\n          repoName={this.props.repoName}\n          userPerm={this.props.userPerm}\n          currentPath={this.props.currentPath}\n          updateUsedRepoTags={this.props.updateUsedRepoTags}\n          onDeleteRepoTag={this.props.onDeleteRepoTag}\n        />}\n        {!isDesktop && this.props.direntList.length > 0 &&\n        <span className=\"sf3-font sf3-font-sort action-icon\" onClick={this.toggleSortOptionsDialog}></span>}\n        {this.state.isSortOptionsDialogOpen &&\n        <SortOptionsDialog\n          toggleDialog={this.toggleSortOptionsDialog}\n          sortBy={this.props.sortBy}\n          sortOrder={this.props.sortOrder}\n          sortItems={this.props.sortItems}\n        />\n        }\n      </Fragment>\n    );\n  }\n}\n\nCurDirPath.propTypes = propTypes;\n\nexport default CurDirPath;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport moment from 'moment';\nimport { processor } from '@seafile/seafile-editor';\nimport { Button, Dropdown, DropdownToggle, DropdownMenu, DropdownItem } from 'reactstrap';\nimport { gettext, username, siteRoot } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../toast';\nimport { MentionsInput, Mention } from 'react-mentions';\nimport { defaultStyle, defaultMentionStyle } from '../../css/react-mentions-default-style';\nimport '../../css/comments-list.css';\n\nconst DetailCommentListPropTypes = {\n  repoID: PropTypes.string.isRequired,\n  filePath: PropTypes.string.isRequired,\n  onParticipantsChange: PropTypes.func.isRequired,\n  fileParticipantList: PropTypes.array.isRequired,\n};\n\nclass DetailCommentList extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      commentsList: [],\n      relatedUsers: null,\n      comment: '',\n    };\n    this.toBeAddedParticipant = [];\n  }\n\n  componentDidMount() {\n    this.listComments();\n    this.checkParticipant();\n    this.listRepoRelatedUsers();\n  }\n\n  componentWillReceiveProps(nextProps) {\n    if (nextProps.filePath !== this.props.filePath) {\n      this.listComments(nextProps.filePath);\n    }\n  }\n\n  handleCommentChange = (event) => {\n    this.setState({ comment: event.target.value });\n  }\n\n  listComments = (filePath) => {\n    seafileAPI.listComments(this.props.repoID, (filePath || this.props.filePath)).then((res) => {\n      this.setState({ commentsList: res.data.comments });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  addComment = () => {\n    const { repoID, filePath } = this.props;\n    if (!this.state.comment.trim()) return;\n    seafileAPI.postComment(repoID, filePath, this.state.comment.trim()).then(() => {\n      this.listComments();\n    }).catch(err => {\n      toaster.danger(Utils.getErrorMsg(err));\n    });\n    this.setState({ comment: '' });\n  }\n\n  onSubmit = () => {\n    this.addParticipant(username);\n    if (this.toBeAddedParticipant.length === 0) {\n      this.addComment();\n    } else {\n      const { repoID, filePath } = this.props;\n      seafileAPI.addFileParticipants(repoID, filePath, this.toBeAddedParticipant).then((res) => {\n        this.props.onParticipantsChange(repoID, filePath);\n        this.toBeAddedParticipant = [];\n        this.addComment();\n      }).catch((err) => {\n        toaster.danger(Utils.getErrorMsg(err));\n      });\n    }\n  }\n\n  resolveComment = (event) => {\n    const { repoID } = this.props;\n    seafileAPI.updateComment(repoID, event.target.id, 'true').then(() => {\n      this.listComments();\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  deleteComment = (event) => {\n    const { repoID } = this.props;\n    seafileAPI.deleteComment(repoID, event.target.id).then(() => {\n      this.listComments();\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  editComment = (commentID, newComment) => {\n    const { repoID } = this.props;\n    seafileAPI.updateComment(repoID, commentID, null, null, newComment).then(() => {\n      this.listComments();\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  listRepoRelatedUsers = () => {\n    const { repoID } = this.props;\n    seafileAPI.listRepoRelatedUsers(repoID).then((res) => {\n      let users = res.data.user_list.map((item) => {\n        return { id: item.email, display: item.name};\n      });\n      this.setState({ relatedUsers: users });\n    });\n  }\n\n  checkParticipant = (email) => {\n    return this.props.fileParticipantList.map((participant) => {return participant.email;}).includes(email);\n  }\n\n  addParticipant = (email) => {\n    if (this.checkParticipant(email)) return;\n    this.toBeAddedParticipant.push(email);\n  }\n\n  renderUserSuggestion = (entry, search, highlightedDisplay, index, focused) => {\n    return <div className={`user ${focused ? 'focused' : ''}`}>{highlightedDisplay}</div>;\n  }\n\n  render() {\n    const { repoID, filePath } = this.props;\n    const { commentsList } = this.state;\n    return (\n      <div className=\"seafile-comment detail-comments h-100\">\n        <div className=\"flex-fill o-auto\">\n          {commentsList.length > 0 ? (\n            <ul className=\"seafile-comment-list\">\n              {commentsList.map((item, index = 0, arr) => {\n                let oldTime = (new Date(item.created_at)).getTime();\n                let time = moment(oldTime).format('YYYY-MM-DD HH:mm');\n                return (\n                  <CommentItem\n                    key={item.id}\n                    item={item}\n                    time={time}\n                    deleteComment={this.deleteComment}\n                    resolveComment={this.resolveComment}\n                    editComment={this.editComment}\n                  />\n                );\n              })\n              }\n            </ul>) :\n            <p className=\"text-center my-4\">{gettext('No comment yet.')}</p>\n          }\n        </div>\n        <div className=\"seafile-comment-footer flex-shrink-0\">\n          <MentionsInput\n            value={this.state.comment}\n            onChange={this.handleCommentChange}\n            placeholder={gettext('Add a comment...')}\n            style={defaultStyle}\n          >\n            <Mention\n              trigger=\"@\"\n              displayTransform={(username, display) => `@${display}`}\n              data={this.state.relatedUsers}\n              renderSuggestion={this.renderUserSuggestion}\n              style={defaultMentionStyle}\n              onAdd={(id, display) => {this.addParticipant(id);}}\n              appendSpaceOnAdd={true}\n            />\n          </MentionsInput>\n          <div className=\"comment-submit-container\">\n            <Button className=\"submit-comment\" color=\"primary\" size=\"sm\" onClick={this.onSubmit}>{gettext('Submit')}</Button>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nDetailCommentList.propTypes = DetailCommentListPropTypes;\n\nconst commentItemPropTypes = {\n  time: PropTypes.string.isRequired,\n  item: PropTypes.object.isRequired,\n  deleteComment: PropTypes.func.isRequired,\n  resolveComment: PropTypes.func.isRequired,\n  editComment: PropTypes.func.isRequired,\n};\n\nclass CommentItem extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      dropdownOpen: false,\n      html: '',\n      newComment: this.props.item.comment,\n      editable: false,\n    };\n  }\n\n  componentWillMount() {\n    this.convertComment(this.props.item.comment);\n  }\n\n  componentWillReceiveProps(nextProps) {\n    this.convertComment(nextProps.item.comment);\n  }\n\n  convertComment = (mdFile) => {\n    processor.process(mdFile).then((result) => {\n      let html = String(result);\n      this.setState({ html: html });\n    });\n  }\n\n  toggleDropDownMenu = () => {\n    this.setState({ dropdownOpen: !this.state.dropdownOpen });\n  }\n\n  toggleEditComment = () => {\n    this.setState({ editable: !this.state.editable });\n  }\n\n  updateComment = (event) => {\n    const newComment = this.state.newComment;\n    if (this.props.item.comment !== newComment) {\n      this.props.editComment(event.target.id, newComment);\n    }\n    this.toggleEditComment();\n  }\n\n  handleCommentChange = (event) => {\n    this.setState({ newComment: event.target.value });\n  }\n\n  onCommentClick = (e) => {\n    // click participant link, page shouldn't jump\n    if (e.target.nodeName !== 'A') return;\n    const preNode = e.target.previousSibling;\n    if (preNode && preNode.nodeType === 3 && preNode.nodeValue.slice(-1) === '@') {\n      e.preventDefault();\n    }\n  }\n\n  renderInfo = (item) => {\n    return (\n      <Fragment>\n        <img className=\"avatar\" src={item.avatar_url} alt=\"\"/>\n        <div className=\"reviewer-info\">\n          <div className=\"reviewer-name ellipsis\">{item.user_name}</div>\n          <div className=\"review-time\">{this.props.time}</div>\n        </div>\n      </Fragment>\n    );\n  }\n\n  render() {\n    const item = this.props.item;\n    if (this.state.editable) {\n      return(\n        <li className=\"seafile-comment-item\" id={item.id}>\n          <div className=\"seafile-comment-info\">\n            {this.renderInfo(item)}\n          </div>\n          <div className=\"seafile-edit-comment\">\n            <textarea className=\"edit-comment-input\" value={this.state.newComment}\n              onChange={this.handleCommentChange} clos=\"100\" rows=\"3\" warp=\"virtual\"\n            ></textarea>\n            <Button className=\"comment-btn\" color=\"primary\" size=\"sm\" onClick={this.updateComment} id={item.id}>{gettext('Update')}</Button>{' '}\n            <Button className=\"comment-btn\" color=\"secondary\" size=\"sm\" onClick={this.toggleEditComment}> {gettext('Cancel')}</Button>\n          </div>\n        </li>\n      );\n    }\n    return (\n      <li className={item.resolved ? 'seafile-comment-item seafile-comment-item-resolved' : 'seafile-comment-item'} id={item.id}>\n        <div className=\"seafile-comment-info\">\n          {this.renderInfo(item)}\n          <Dropdown isOpen={this.state.dropdownOpen} size=\"sm\" className=\"seafile-comment-dropdown\" toggle={this.toggleDropDownMenu}>\n            <DropdownToggle className=\"seafile-comment-dropdown-btn\"><i className=\"fas fa-ellipsis-v\"></i></DropdownToggle>\n            <DropdownMenu>\n              {item.user_email === username &&\n                <DropdownItem onClick={this.props.deleteComment} className=\"delete-comment\" id={item.id}>{gettext('Delete')}</DropdownItem>\n              }\n              {item.user_email === username &&\n                <DropdownItem onClick={this.toggleEditComment} className=\"edit-comment\" id={item.id}>{gettext('Edit')}</DropdownItem>\n              }\n              {!item.resolved &&\n                <DropdownItem onClick={this.props.resolveComment} className=\"seafile-comment-resolved\"\n                  id={item.id}>{gettext('Mark as resolved')}</DropdownItem>\n              }\n            </DropdownMenu>\n          </Dropdown>\n        </div>\n        <div\n          className=\"seafile-comment-content\"\n          dangerouslySetInnerHTML={{ __html: this.state.html }}\n          onClick={e => this.onCommentClick(e)}\n        ></div>\n      </li>\n    );\n  }\n}\n\nCommentItem.propTypes = commentItemPropTypes;\n\nexport default DetailCommentList;\n","const KeyCodes = {\n  Backspace: 8,\n  Tab: 9,\n  Enter: 13,\n  Shift: 16,\n  Ctrl: 17,\n  Alt: 18,\n  PauseBreak: 19,\n  CapsLock: 20,\n  Escape: 27,\n  Esc: 27,\n  Space: 32,\n  PageUp: 33,\n  PageDown: 34,\n  End: 35,\n  Home: 36,\n  LeftArrow: 37,\n  UpArrow: 38,\n  RightArrow: 39,\n  DownArrow: 40,\n  Insert: 45,\n  Delete: 46,\n  0: 48,\n  1: 49,\n  2: 50,\n  3: 51,\n  4: 52,\n  5: 53,\n  6: 54,\n  7: 55,\n  8: 56,\n  9: 57,\n  a: 65,\n  b: 66,\n  c: 67,\n  d: 68,\n  e: 69,\n  f: 70,\n  g: 71,\n  h: 72,\n  i: 73,\n  j: 74,\n  k: 75,\n  l: 76,\n  m: 77,\n  n: 78,\n  o: 79,\n  p: 80,\n  q: 81,\n  r: 82,\n  s: 83,\n  t: 84,\n  u: 85,\n  v: 86,\n  w: 87,\n  x: 88,\n  y: 89,\n  z: 90,\n  LeftWindowKey: 91,\n  RightWindowKey: 92,\n  SelectKey: 93,\n  NumPad0: 96,\n  NumPad1: 97,\n  NumPad2: 98,\n  NumPad3: 99,\n  NumPad4: 100,\n  NumPad5: 101,\n  NumPad6: 102,\n  NumPad7: 103,\n  NumPad8: 104,\n  NumPad9: 105,\n  Multiply: 106,\n  Add: 107,\n  Subtract: 109,\n  DecimalPoint: 110,\n  Divide: 111,\n  F1: 112,\n  F2: 113,\n  F3: 114,\n  F4: 115,\n  F5: 116,\n  F6: 117,\n  F7: 118,\n  F8: 119,\n  F9: 120,\n  F10: 121,\n  F12: 123,\n  NumLock: 144,\n  ScrollLock: 145,\n  SemiColon: 186,\n  EqualSign: 187,\n  Comma: 188,\n  Dash: 189,\n  Period: 190,\n  ForwardSlash: 191,\n  GraveAccent: 192,\n  OpenBracket: 219,\n  BackSlash: 220,\n  CloseBracket: 221,\n  SingleQuote: 222,\n  ChineseInputMethod: 229,\n};\n\nexport default KeyCodes;\n","import * as zIndexes from './zIndexes';\nimport KeyCodes from './keyCodes';\n\nexport const DIALOG_MAX_HEIGHT = window.innerHeight - 56; // Dialog margin is 3.5rem (56px)\n\nexport const EXTRA_ATTRIBUTES_COLUMN_TYPE = {\n  TEXT: 'text',\n  NUMBER: 'number',\n  DATE: 'date',\n  FORMULA: 'formula',\n  SINGLE_SELECT: 'single-select',\n  CTIME: 'ctime',\n  MTIME: 'mtime'\n};\n\nexport const EXTRA_ATTRIBUTES_NOT_DISPLAY_COLUMN_KEY = [\n  '_id',\n  '_locked',\n  '_locked_by',\n  '_archived',\n  '_creator',\n  '_last_modifier',\n  '_ctime',\n  '_mtime',\n];\n\nexport const EXTRA_ATTRIBUTES_NOT_DISPLAY_COLUMN_NAME = [\n  'Repo ID',\n  'UUID',\n];\n\nexport const FORMULA_RESULT_TYPE = {\n  NUMBER: 'number',\n  STRING: 'string',\n  DATE: 'date',\n  BOOL: 'bool',\n  ARRAY: 'array',\n};\n\nexport const DELETED_OPTION_BACKGROUND_COLOR = '#eaeaea';\n\nexport const DELETED_OPTION_TIPS = 'Deleted option';\n\nexport const DEFAULT_NUMBER_FORMAT = 'number';\n\nexport const ERROR = 'ERROR';\nexport const ERROR_DIV_ZERO = 'DIV/0';\nexport const ERROR_NAME = 'NAME';\nexport const ERROR_NOT_AVAILABLE = 'N/A';\nexport const ERROR_NULL = 'NULL';\nexport const ERROR_NUM = 'NUM';\nexport const ERROR_REF = 'REF';\nexport const ERROR_VALUE = 'VALUE';\nexport const GETTING_DATA = 'GETTING_DATA';\n\nconst errors = {\n  [ERROR]: '#ERROR!',\n  [ERROR_DIV_ZERO]: '#DIV/0!',\n  [ERROR_NAME]: '#NAME?',\n  [ERROR_NOT_AVAILABLE]: '#N/A',\n  [ERROR_NULL]: '#NULL!',\n  [ERROR_NUM]: '#NUM!',\n  [ERROR_REF]: '#REF!',\n  [ERROR_VALUE]: '#VALUE!',\n  [GETTING_DATA]: '#GETTING_DATA',\n};\n\nexport const DISPLAY_INTERNAL_ERRORS = [\n  errors[ERROR],\n  errors[ERROR_DIV_ZERO],\n  errors[ERROR_NAME],\n  errors[ERROR_NOT_AVAILABLE],\n  errors[ERROR_NULL],\n  errors[ERROR_NUM],\n  errors[ERROR_REF],\n  errors[ERROR_VALUE],\n  errors[GETTING_DATA],\n];\n\nexport const DURATION_FORMATS_MAP = {\n  H_MM: 'h:mm',\n  H_MM_SS: 'h:mm:ss',\n  H_MM_SS_S: 'h:mm:ss.s',\n  H_MM_SS_SS: 'h:mm:ss.ss',\n  H_MM_SS_SSS: 'h:mm:ss.sss'\n};\n\nexport const DURATION_FORMATS = [\n  { name: DURATION_FORMATS_MAP.H_MM, type: DURATION_FORMATS_MAP.H_MM },\n  { name: DURATION_FORMATS_MAP.H_MM_SS, type: DURATION_FORMATS_MAP.H_MM_SS }\n];\n\nexport const DURATION_ZERO_DISPLAY = {\n  [DURATION_FORMATS_MAP.H_MM]: '0:00',\n  [DURATION_FORMATS_MAP.H_MM_SS]: '0:00',\n  [DURATION_FORMATS_MAP.H_MM_SS_S]: '0:00.0',\n  [DURATION_FORMATS_MAP.H_MM_SS_SS]: '0:00.00',\n  [DURATION_FORMATS_MAP.H_MM_SS_SSS]: '0:00.000',\n};\n\nexport const DURATION_DECIMAL_DIGITS = {\n  [DURATION_FORMATS_MAP.H_MM]: 0,\n  [DURATION_FORMATS_MAP.H_MM_SS]: 0,\n  [DURATION_FORMATS_MAP.H_MM_SS_S]: 1,\n  [DURATION_FORMATS_MAP.H_MM_SS_SS]: 2,\n  [DURATION_FORMATS_MAP.H_MM_SS_SSS]: 3,\n};\n\nexport {\n  KeyCodes,\n  zIndexes,\n};\n","/**\n * @desc Solve the problem of floating calculation, avoid multiple digits after the decimal point and loss of calculation accuracy.\n * example: 3 + 2.4 = 4.6999999999999991.0 - 0.9 = 0.09999999999999998\n */\n\n/**\n * Correct wrong data\n * strip(0.09999999999999998)=0.1\n */\nfunction strip(num, precision = 12) {\n  return +parseFloat(num.toPrecision(precision));\n}\n\n/**\n * Return digits length of a number\n * @param {*number} num Input number\n */\nfunction digitLength(num) {\n  // Get digit length of e\n  const eSplit = num.toString().split(/[eE]/);\n  const len = (eSplit[0].split('.')[1] || '').length - (+(eSplit[1] || 0));\n  return len > 0 ? len : 0;\n}\n\n/**\n * Convert decimals to integers and support scientific notation. If it is a decimal, it is enlarged to an integer\n * @param {*number} num Number of inputs\n */\nfunction float2Fixed(num) {\n  if (num.toString().indexOf('e') === -1) {\n    return Number(num.toString().replace('.', ''));\n  }\n  const dLen = digitLength(num);\n  return dLen > 0 ? strip(num * Math.pow(10, dLen)) : num;\n}\n\n/**\n * Check whether the number is out of range, and give a prompt if it is out of range\n * @param {*number} num Number of inputs\n */\nfunction checkBoundary(num) {\n  if (_boundaryCheckingState) {\n    if (num > Number.MAX_SAFE_INTEGER || num < Number.MIN_SAFE_INTEGER) {\n      // eslint-disable-next-line no-console\n      console.warn(`${num} is beyond boundary when transfer to integer, the results may not be accurate`);\n    }\n  }\n}\n\n/**\n * Exact multiplication\n */\nfunction times(num1, num2, ...others) {\n  if (others.length > 0) {\n    return times(times(num1, num2), others[0], ...others.slice(1));\n  }\n  const num1Changed = float2Fixed(num1);\n  const num2Changed = float2Fixed(num2);\n  const baseNum = digitLength(num1) + digitLength(num2);\n  const leftValue = num1Changed * num2Changed;\n\n  checkBoundary(leftValue);\n\n  return leftValue / Math.pow(10, baseNum);\n}\n\n/**\n * Exact addition\n */\nfunction plus(num1, num2, ...others) {\n  if (others.length > 0) {\n    return plus(plus(num1, num2), others[0], ...others.slice(1));\n  }\n  const baseNum = Math.pow(10, Math.max(digitLength(num1), digitLength(num2)));\n  return (times(num1, baseNum) + times(num2, baseNum)) / baseNum;\n}\n\n/**\n * Exact subtraction\n */\nfunction minus(num1, num2, ...others) {\n  if (others.length > 0) {\n    return minus(minus(num1, num2), others[0], ...others.slice(1));\n  }\n  const baseNum = Math.pow(10, Math.max(digitLength(num1), digitLength(num2)));\n  return (times(num1, baseNum) - times(num2, baseNum)) / baseNum;\n}\n\n/**\n * Exact division\n */\nfunction divide(num1, num2, ...others) {\n  if (others.length > 0) {\n    return divide(divide(num1, num2), others[0], ...others.slice(1));\n  }\n  const num1Changed = float2Fixed(num1);\n  const num2Changed = float2Fixed(num2);\n  checkBoundary(num1Changed);\n  checkBoundary(num2Changed);\n  // fix: Similar to 10 ** -4 is 0.00009999999999999999, strip correction\n  return times((num1Changed / num2Changed), strip(Math.pow(10, digitLength(num2) - digitLength(num1))));\n}\n\n/**\n * rounding\n */\nfunction round(num, ratio) {\n  const base = Math.pow(10, ratio);\n  return divide(Math.round(times(num, base)), base);\n}\n\nlet _boundaryCheckingState = true;\n/**\n * Whether to perform boundary check, default true\n * @param flag Mark switch, true is on, false is off, default is true\n */\nfunction enableBoundaryChecking(flag = true) {\n  _boundaryCheckingState = flag;\n}\nexport { strip, plus, minus, times, divide, round, digitLength, float2Fixed, enableBoundaryChecking };\nexport default { strip, plus, minus, times, divide, round, digitLength, float2Fixed, enableBoundaryChecking };\n\n","import moment from 'moment';\nimport { EXTRA_ATTRIBUTES_NOT_DISPLAY_COLUMN_KEY, DEFAULT_NUMBER_FORMAT, DISPLAY_INTERNAL_ERRORS, DURATION_FORMATS_MAP,\n  DURATION_FORMATS, DURATION_ZERO_DISPLAY, DURATION_DECIMAL_DIGITS, EXTRA_ATTRIBUTES_NOT_DISPLAY_COLUMN_NAME } from '../constants';\nimport NP from './number-precision';\n\nNP.enableBoundaryChecking(false);\n\nexport const getValidColumns = (columns, editableColumns = [], isEmptyFile = false) => {\n  if (!Array.isArray(columns) || columns.length === 0) return [];\n  return columns\n    .map(column => {\n      let validColumn = column;\n      const canEdit = isEmptyFile ? false : editableColumns.includes(column.name);\n      if (column.type === 'single-select') {\n        if (!(column.data && column.data.options)) {\n          validColumn.data = { options: [] };\n        }\n      }\n      validColumn.editable = canEdit;\n      return validColumn;\n    })\n    .filter(column => !EXTRA_ATTRIBUTES_NOT_DISPLAY_COLUMN_KEY.includes(column.key))\n    .filter(column => !EXTRA_ATTRIBUTES_NOT_DISPLAY_COLUMN_NAME.includes(column.name));\n};\n\nexport const getDateDisplayString = (value, format) => {\n  if (value === '' || !value || typeof value !== 'string') {\n    return '';\n  }\n  // Compatible with older versions: if format is null, use defaultFormat\n  const validValue = value.replace(/-/g, '/').replace('T', ' ').replace('Z', '');\n  const date = moment(validValue);\n\n  if (!date.isValid()) return value;\n  switch(format) {\n    case 'D/M/YYYY':\n    case 'DD/MM/YYYY': {\n      const formatValue = date.format('YYYY-MM-DD');\n      const formatValueList = formatValue.split('-');\n      return `${formatValueList[2]}/${formatValueList[1]}/${formatValueList[0]}`;\n    }\n    case 'D/M/YYYY HH:mm':\n    case 'DD/MM/YYYY HH:mm': {\n      const formatValues = date.format('YYYY-MM-DD HH:mm');\n      const formatValuesList = formatValues.split(' ');\n      const formatDateList = formatValuesList[0].split('-');\n      return `${formatDateList[2]}/${formatDateList[1]}/${formatDateList[0]} ${formatValuesList[1]}`;\n    }\n    case 'M/D/YYYY':\n      return date.format('M/D/YYYY');\n    case 'M/D/YYYY HH:mm':\n      return date.format('M/D/YYYY HH:mm');\n    case 'YYYY-MM-DD':\n      return date.format('YYYY-MM-DD');\n    case 'YYYY-MM-DD HH:mm':\n      return date.format('YYYY-MM-DD HH:mm');\n    case 'YYYY-MM-DD HH:mm:ss': {\n      return date.format('YYYY-MM-DD HH:mm:ss');\n    }\n    case 'DD.MM.YYYY':\n      return date.format('DD.MM.YYYY');\n    case 'DD.MM.YYYY HH:mm':\n      return date.format('DD.MM.YYYY HH:mm');\n    default:\n      return date.format('YYYY-MM-DD');\n  }\n};\n\nexport const getSelectColumnOptions = (column) => {\n  if (!column || !column.data || !Array.isArray(column.data.options)) {\n    return [];\n  }\n  return column.data.options;\n};\n\nconst _getMathRoundedDuration = (num, duration_format) => {\n  const decimalDigits = DURATION_DECIMAL_DIGITS[duration_format];\n  if (decimalDigits < 1) {\n    return num;\n  }\n  const ratio = Math.pow(10, decimalDigits);\n  return Math.round(num * ratio) / ratio;\n};\n\nconst _getDurationDecimalSuffix = (duration_format, decimal) => {\n  if (duration_format === DURATION_FORMATS_MAP.H_MM_SS_S) {\n    return decimal === 0 ? '.0' : '';\n  } else if (duration_format === DURATION_FORMATS_MAP.H_MM_SS_SS) {\n    if (decimal === 0) {\n      return '.00';\n    } else if (decimal < 10) {\n      return '0';\n    }\n  } else if (duration_format === DURATION_FORMATS_MAP.H_MM_SS_SSS) {\n    if (decimal === 0) {\n      return '.000';\n    } else if (decimal < 10) {\n      return '00';\n    } else if (decimal < 100) {\n      return '0';\n    }\n  }\n  return '';\n};\n\nexport const getDurationDisplayString = (value, data) => {\n  if (!value && value !== 0) return '';\n  let { duration_format } = data || {};\n  duration_format = duration_format || DURATION_FORMATS_MAP.H_MM;\n  if (DURATION_FORMATS.findIndex((format) => format.type === duration_format) < 0) {\n    return '';\n  }\n  if (value === 0) {\n    return DURATION_ZERO_DISPLAY[duration_format];\n  }\n  const includeDecimal = duration_format.indexOf('.') > -1;\n  let positiveValue = Math.abs(value);\n  if (!includeDecimal) {\n    positiveValue = Math.round(positiveValue);\n  }\n\n  positiveValue = _getMathRoundedDuration(positiveValue, duration_format);\n  const decimalParts = (positiveValue + '').split('.');\n  const decimalPartsLen = decimalParts.length;\n  let decimal = 0;\n  if (decimalPartsLen > 1) {\n    decimal = decimalParts[decimalPartsLen - 1];\n    decimal = decimal ? decimal - 0 : 0;\n  }\n  const decimalDigits = DURATION_DECIMAL_DIGITS[duration_format];\n  const decimalSuffix = _getDurationDecimalSuffix(duration_format, decimal);\n  let displayString = value < 0 ? '-' : '';\n  let hours = parseInt(positiveValue / 3600);\n  let minutes = parseInt((positiveValue - hours * 3600) / 60);\n  if (duration_format === DURATION_FORMATS_MAP.H_MM) {\n    displayString += `${hours}:${minutes > 9 ? minutes : '0' + minutes}`;\n    return displayString;\n  }\n  let seconds = Number.parseFloat((positiveValue - hours * 3600 - minutes * 60).toFixed(decimalDigits));\n  minutes = minutes > 9 ? minutes : `0${minutes}`;\n  seconds = seconds > 9 ? seconds : `0${seconds}`;\n  displayString += `${hours}:${minutes}:${seconds}${decimalSuffix}`;\n  return displayString;\n};\n\nconst _separatorMap = {\n  'comma': ',',\n  'dot': '.',\n  'no': '',\n  'space': ' ',\n};\n\nconst _toThousands = (num, isCurrency, formatData) => {\n  let { decimal = 'dot', thousands = 'no', precision = 2, enable_precision = false } = formatData || {};\n  const decimalString = _separatorMap[decimal];\n  const thousandsString = _separatorMap[thousands];\n  if ((num + '').indexOf('e') > -1) {\n    if (num < 1 && num > -1) {\n      // 1.convert to non-scientific number\n      let numericString = num.toFixed(enable_precision ? precision : 8);\n\n      // 2.remove 0 from end of the number which not set precision. e.g. 0.100000\n      if (!enable_precision) {\n        numericString = removeZerosFromEnd(numericString);\n      }\n\n      // 3.remove minus from number which equal to 0. e.g. '-0.00'\n      if (parseFloat(numericString) === 0) {\n        return numericString.startsWith('-') ? numericString.substring(1) : numericString;\n      }\n      return numericString;\n    }\n    return num;\n  }\n  const decimalDigits = enable_precision ? precision : _getDecimalDigits(num);\n  let value = parseFloat(num.toFixed(decimalDigits));\n  const isMinus = value < 0;\n  let integer = Math.trunc(value);\n  // format decimal value\n  let decimalValue = String(Math.abs(NP.minus(value, integer)).toFixed(decimalDigits)).slice(1);\n  if (!enable_precision) {\n    decimalValue = removeZerosFromEnd(decimalValue);\n  }\n  if (isCurrency) {\n    if (!enable_precision) {\n      if (decimalValue.length === 2) {\n        decimalValue = decimalValue.padEnd(3, '0');\n      } else {\n        decimalValue = (decimalValue.substring(0, 3) || '.').padEnd(3, '0');\n      }\n    }\n  }\n  decimalValue = decimalValue.replace(/./, decimalString);\n  // format integer value\n  let result = [], counter = 0;\n  integer = Math.abs(integer).toString();\n  for (var i = integer.length - 1; i >= 0; i--) {\n    counter++;\n    result.unshift(integer[i]);\n    if (!(counter % 3) && i !== 0) {\n      result.unshift(thousandsString);\n    }\n  }\n  return (isMinus ? '-' : '') + result.join('') + decimalValue;\n};\n\nconst _getDecimalDigits = (num) => {\n  if (Number.isInteger(num)) {\n    return 0;\n  }\n  let valueArr = (num + '').split('.');\n  let digitsLength = valueArr[1] ? valueArr[1].length : 8;\n  return digitsLength > 8 ? 8 : digitsLength;\n};\n\n/**\n * @param {string} value\n * e.g. removeZerosFromEnd('0.0100') // '0.01'\n */\nconst removeZerosFromEnd = (value) => {\n  if (value.endsWith('0')) {\n    return value.replace(/(?:\\.0*|(\\.\\d+?)0+)$/, '$1');\n  }\n  return value;\n};\n\nexport const getPrecisionNumber = (num, formatData) => {\n  let { precision = 2, enable_precision = false } = formatData || {};\n  let type = Object.prototype.toString.call(num);\n  if (type !== '[object Number]') {\n    if (type === '[object String]' && DISPLAY_INTERNAL_ERRORS.includes(num)) {\n      return num;\n    }\n    return null;\n  }\n  let decimalDigits = enable_precision ? precision : _getDecimalDigits(num);\n  return num.toFixed(decimalDigits);\n};\n\nexport const getNumberDisplayString = (value, formatData) => {\n  // formatData: old version maybe 'null'\n  const type = Object.prototype.toString.call(value);\n  if (type !== '[object Number]') {\n    // return formula internal errors directly.\n    if (type === '[object String]' && value.startsWith('#')) {\n      return value;\n    }\n    return '';\n  }\n  if (isNaN(value) || value === Infinity || value === -Infinity) return value + '';\n  const { format = DEFAULT_NUMBER_FORMAT } = formatData || {};\n  switch(format) {\n    case 'number': {\n      return _toThousands(value, false, formatData);\n    }\n    case 'percent': {\n      return `${_toThousands(Number.parseFloat((value * 100).toFixed(8)), false, formatData)}%`;\n    }\n    case 'yuan': {\n      return `${_toThousands(value, true, formatData)}`;\n    }\n    case 'dollar': {\n      return `$${_toThousands(value, true, formatData)}`;\n    }\n    case 'euro': {\n      return `${_toThousands(value, true, formatData)}`;\n    }\n    case 'duration': {\n      return getDurationDisplayString(value, formatData);\n    }\n    case 'custom_currency': {\n      if (formatData.currency_symbol_position === 'after') {\n        return `${_toThousands(value, true, formatData)}${formatData.currency_symbol || ''}`;\n      } else {\n        return `${formatData.currency_symbol || ''}${_toThousands(value, true, formatData)}`;\n      }\n    }\n    default:\n      return '' + value;\n  }\n};\n\nexport const replaceNumberNotAllowInput = (value, format = DEFAULT_NUMBER_FORMAT, currency_symbol = null) => {\n  if (!value) {\n    return '';\n  }\n  value = value.replace(//g, '.');\n  switch(format) {\n    case 'number': {\n      return value.replace(/[^.-\\d,]/g,'');\n    }\n    case 'percent': {\n      return value.replace(/[^.-\\d,%]/g, '');\n    }\n    case 'yuan': {\n      return value.replace(/[^.-\\d,]/g, '');\n    }\n    case 'dollar': {\n      return value.replace(/[^.-\\d$,]/g, '');\n    }\n    case 'euro': {\n      return value.replace(/[^.-\\d,]/g, '');\n    }\n    case 'custom_currency': {\n      // eslint-disable-next-line\n      const reg = new RegExp('[^.-\\d' + currency_symbol + ',]', 'g');\n      return value.replace(reg, '');\n    }\n    default:\n      return value.replace(/[^.-\\d,]/g, '');\n  }\n};\n\nexport const getFloatNumber = (data, format) =>  {\n  if (!data && data !== 0) {\n    return null;\n  }\n  let newData = parseFloat(data.replace(/[^.-\\d]/g, ''));\n  if (format === 'percent' && !isNaN(newData)) {\n    return NP.divide(newData, 100);\n  }\n  return isNaN(newData) ? null : newData;\n};\n\nexport const formatStringToNumber = (numberString, formatData) => {\n  let { format, decimal, thousands, enable_precision, precision } = formatData || {};\n  let value = numberString;\n  if (decimal && thousands && decimal === 'comma') {\n    if (thousands === 'dot') {\n      value = value.replace(/,/, '@');\n      value = value.replace(/\\./g, ',');\n      value = value.replace(/@/, '.');\n    } else {\n      value = value.replace(/\\./g, '');\n      value = value.replace(/,/, '.');\n    }\n  }\n  value = getFloatNumber(value, format);\n  if (enable_precision && value) {\n    if (format === 'percent') {\n      precision += 2;\n    }\n    value = Number(parseFloat(value).toFixed(precision));\n  }\n  return value;\n};\n\nexport const isMac = () => {\n  const platform = navigator.platform;\n  return (platform == 'Mac68K') || (platform == 'MacPPC') || (platform == 'Macintosh') || (platform == 'MacIntel');\n};\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Col } from 'reactstrap';\n\nfunction ColumnName(props) {\n  const { column } = props;\n  const { name } = column;\n\n  return (\n    <Col md={3} className=\"d-flex column-name\">\n      <div className=\"w-100 text-truncate\">\n        {name || ''}\n      </div>\n    </Col>\n  );\n}\n\nColumnName.propTypes = {\n  column: PropTypes.object.isRequired,\n};\n\nexport default ColumnName;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { KeyCodes } from '../../../../constants';\n\nclass SimpleText extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      value: props.row[props.column.key] || '',\n    };\n    this.inputRef = React.createRef();\n  }\n\n  UNSAFE_componentWillReceiveProps(nextProps) {\n    const nextValue = nextProps.row[nextProps.column.key];\n    if (nextValue !== this.state.value) {\n      this.setState({ value: nextValue });\n    }\n  }\n\n  blurInput = () => {\n    setTimeout(() => {\n      this.inputRef.current && this.inputRef.current.blur();\n    }, 1);\n  }\n\n  onBlur = () => {\n    let { column, onCommit } = this.props;\n    const updated = {};\n    updated[column.key] = this.state.value.trim();\n    onCommit(updated, column);\n  }\n\n  onChange = (e) => {\n    let value = e.target.value;\n    if (value === this.state.value) return;\n    this.setState({value});\n  }\n\n  onCut = (e) => {\n    e.stopPropagation();\n  }\n\n  onPaste = (e) => {\n    e.stopPropagation();\n  }\n\n  onKeyDown = (e) => {\n    if (e.keyCode === KeyCodes.Esc) {\n      e.stopPropagation();\n      this.blurInput();\n      return;\n    }\n    let { selectionStart, selectionEnd, value } = e.currentTarget;\n    if (\n      (e.keyCode === KeyCodes.ChineseInputMethod) ||\n      (e.keyCode === KeyCodes.LeftArrow && selectionStart === 0) ||\n      (e.keyCode === KeyCodes.RightArrow && selectionEnd === value.length)\n    ) {\n      e.stopPropagation();\n    }\n  }\n\n  render() {\n    const { column } = this.props;\n    const { value } = this.state;\n\n    return (\n      <input\n        type=\"text\"\n        onBlur={this.onBlur}\n        onCut={this.onCut}\n        onPaste={this.onPaste}\n        onChange={this.onChange}\n        className=\"form-control\"\n        value={value || ''}\n        onKeyDown={this.onKeyDown}\n        disabled={!column.editable}\n        ref={this.inputRef}\n      />\n    );\n  }\n}\n\nSimpleText.propTypes = {\n  column: PropTypes.object,\n  row: PropTypes.object,\n  onCommit: PropTypes.func.isRequired,\n};\n\nexport default SimpleText;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { FORMULA_RESULT_TYPE } from '../../../../constants';\nimport { getDateDisplayString } from '../../../../utils/extra-attributes';\n\nfunction FormulaFormatter(props) {\n  const { column, row } = props;\n  const value = row[column.key];\n\n  const { data } = column;\n  const { result_type, format } = data || {};\n  if (result_type === FORMULA_RESULT_TYPE.DATE) {\n    return (\n      <div className=\"form-control disabled\">{getDateDisplayString(value, format)}</div>\n    );\n  }\n  if (result_type === FORMULA_RESULT_TYPE.STRING) {\n    return value;\n  }\n  if (typeof value === 'object') {\n    return null;\n  }\n  return <></>;\n}\n\nFormulaFormatter.propTypes = {\n  column: PropTypes.object,\n  row: PropTypes.object,\n};\n\nexport default FormulaFormatter;\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport classnames from 'classnames';\n\nclass SearchInput extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      searchValue: props.value,\n    };\n    this.isInputtingChinese = false;\n    this.timer = null;\n    this.inputRef = null;\n  }\n\n  componentDidMount() {\n    if (this.props.autoFocus && this.inputRef && this.inputRef !== document.activeElement) {\n      setTimeout(() => {\n        this.inputRef.focus();\n      }, 0);\n    }\n  }\n\n  componentWillReceiveProps(nextProps) {\n    if (nextProps.value !== this.props.value) {\n      this.setState({searchValue: nextProps.value});\n    }\n  }\n\n  componentWillUnmount() {\n    this.timer && clearTimeout(this.timer);\n    this.timer = null;\n    this.inputRef = null;\n  }\n\n  onCompositionStart = () => {\n    this.isInputtingChinese = true;\n  }\n\n  onChange = (e) => {\n    this.timer && clearTimeout(this.timer);\n    const { onChange, wait } = this.props;\n    let text = e.target.value;\n    this.setState({searchValue: text || ''}, () => {\n      if (this.isInputtingChinese) return;\n      this.timer = setTimeout(() => {\n        onChange && onChange(this.state.searchValue.trim());\n      }, wait);\n    });\n  }\n\n  onCompositionEnd = (e) => {\n    this.isInputtingChinese = false;\n    this.onChange(e);\n  }\n\n  setFocus = (isSelectAllText) => {\n    if (this.inputRef === document.activeElement) return;\n    this.inputRef.focus();\n    if (isSelectAllText) {\n      const txtLength = this.state.searchValue.length;\n      this.inputRef.setSelectionRange(0, txtLength);\n    }\n  }\n\n  render() {\n    const { placeholder, autoFocus, className, onKeyDown, disabled, style } = this.props;\n    const { searchValue } = this.state;\n\n    return (\n      <input\n        type=\"text\"\n        value={searchValue}\n        className={classnames('form-control', className)}\n        onChange={this.onChange}\n        autoFocus={autoFocus}\n        placeholder={placeholder}\n        onCompositionStart={this.onCompositionStart}\n        onCompositionEnd={this.onCompositionEnd}\n        onKeyDown={onKeyDown}\n        disabled={disabled}\n        style={style}\n        ref={ref => this.inputRef = ref}\n      />\n    );\n  }\n}\n\nSearchInput.propTypes = {\n  placeholder: PropTypes.string,\n  autoFocus: PropTypes.bool,\n  className: PropTypes.string,\n  onChange: PropTypes.func.isRequired,\n  onKeyDown: PropTypes.func,\n  wait: PropTypes.number,\n  disabled: PropTypes.bool,\n  style: PropTypes.object,\n  value: PropTypes.string,\n};\n\nSearchInput.defaultProps = {\n  wait: 100,\n  disabled: false,\n  value: '',\n};\n\nexport default SearchInput;\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { UncontrolledPopover } from 'reactstrap';\nimport { gettext } from '../../../../../utils/constants';\nimport SearchInput from '../search-input';\nimport { getSelectColumnOptions } from '../../../../../utils/extra-attributes';\n\nclass SingleSelectEditor extends Component {\n\n  constructor(props) {\n    super(props);\n    const options = this.getSelectColumnOptions(props);\n    this.state = {\n      value: props.row[props.column.key],\n      searchVal: '',\n      highlightIndex: -1,\n      maxItemNum: 0,\n      itemHeight: 0,\n      filteredOptions: options,\n    };\n    this.options = options;\n    this.timer = null;\n    this.editorKey = `single-select-editor-${props.column.key}`;\n  }\n\n  UNSAFE_componentWillReceiveProps(nextProps) {\n    const currentCascadeColumnValue = this.getCascadeColumnValue(this.props);\n    const nextCascadeColumnValue = this.getCascadeColumnValue(nextProps);\n    if (currentCascadeColumnValue !== nextCascadeColumnValue) {\n      this.options = this.getSelectColumnOptions(nextProps);\n      this.setState({ filteredOptions: this.options });\n    }\n  }\n\n  getCascadeColumnValue = (props) => {\n    const { column, row, columns } = props;\n    const { data } = column;\n    const { cascade_column_key } = data || {};\n    if (!cascade_column_key) return '';\n    const cascadeColumn = columns.find(item => item.key === cascade_column_key);\n    if (!cascadeColumn) return '';\n    return row[cascade_column_key];\n  }\n\n  getSelectColumnOptions = (props) => {\n    const { column, row, columns } = props;\n    let options = getSelectColumnOptions(column);\n    const { data } = column;\n    const { cascade_column_key, cascade_settings } = data || {};\n    if (cascade_column_key) {\n      const cascadeColumn = columns.find(item => item.key === cascade_column_key);\n      if (cascadeColumn) {\n        const cascadeColumnValue = row[cascade_column_key];\n        if (!cascadeColumnValue) return [];\n        const cascadeSetting = cascade_settings[cascadeColumnValue];\n        if (!cascadeSetting || !Array.isArray(cascadeSetting) || cascadeSetting.length === 0) return [];\n        return options.filter(option => cascadeSetting.includes(option.id));\n      }\n    }\n    return options;\n  }\n\n  toggle = () => {\n    this.ref.toggle();\n    this.props.onUpdateState();\n  }\n\n  onChangeSearch = (searchVal) => {\n    const { searchVal: oldSearchVal } = this.state;\n    if (oldSearchVal === searchVal) return;\n    const val = searchVal.toLowerCase();\n    const filteredOptions = val ?\n      this.options.filter((item) => item.name && item.name.toLowerCase().indexOf(val) > -1) : this.options;\n    this.setState({ searchVal, filteredOptions });\n  }\n\n  onSelectOption = (optionID) => {\n    const { column } = this.props;\n    this.setState({ value: optionID }, () => {\n      this.props.onCommit({ [column.key]: optionID }, column);\n      this.toggle();\n    });\n  }\n\n  render() {\n    const { value, filteredOptions } = this.state;\n    const { column } = this.props;\n\n    return (\n      <UncontrolledPopover\n        target={this.editorKey}\n        className=\"single-select-editor-popover\"\n        trigger=\"legacy\"\n        placement=\"bottom-start\"\n        hideArrow={true}\n        toggle={this.toggle}\n        ref={ref => this.ref = ref}\n      >\n        <div className=\"single-select-editor-container\">\n          <div className=\"search-single-selects\">\n            <SearchInput\n              placeholder={gettext('Find an option')}\n              onKeyDown={this.onKeyDown}\n              onChange={this.onChangeSearch}\n              autoFocus={true}\n            />\n          </div>\n          <div className=\"single-select-editor-content\">\n            {filteredOptions.map(option => {\n              const isSelected = value === option.id;\n              const style = {\n                backgroundColor: option.color,\n                color: option.textColor || null,\n                maxWidth: Math.max(200 - 62,  column.width ? column.width  -62 : 0)\n              };\n              return (\n                <div className=\"single-select-option-container\" key={option.id} onClick={this.onSelectOption.bind(this, isSelected ? null : option.id)}>\n                  <div className=\"single-select-option\" style={style}>{option.name}</div>\n                  <div className=\"single-select-option-selected\">\n                    {isSelected && (<i ></i>)}\n                  </div>\n                </div>\n              );\n            })}\n          </div>\n        </div>\n      </UncontrolledPopover>\n    );\n  }\n}\n\nSingleSelectEditor.propTypes = {\n  value: PropTypes.string,\n  row: PropTypes.object,\n  column: PropTypes.object,\n  columns: PropTypes.array,\n  onUpdateState: PropTypes.func,\n  onCommit: PropTypes.func,\n};\n\nexport default SingleSelectEditor;\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport classnames from 'classnames';\nimport { DELETED_OPTION_BACKGROUND_COLOR, DELETED_OPTION_TIPS } from '../../../../../constants';\nimport { gettext } from '../../../../../utils/constants';\nimport SingleSelectEditor from './single-select-editor';\nimport { getSelectColumnOptions } from '../../../../../utils/extra-attributes';\n\nimport './index.css';\n\nclass SingleSelect extends Component {\n\n  constructor(props) {\n    super(props);\n    const { column } = props;\n    this.options = getSelectColumnOptions(column);\n    this.state = {\n      isShowSingleSelect: false,\n    };\n    this.editorKey = `single-select-editor-${column.key}`;\n  }\n\n  updateState = () => {\n    this.setState({ isShowSingleSelect: !this.state.isShowSingleSelect });\n  }\n\n  onCommit = (value, column) => {\n    this.props.onCommit(value, column);\n  }\n\n  render() {\n    const { isShowSingleSelect } = this.state;\n    const { column, row } = this.props;\n    const currentOptionID = row[column.key];\n    const option = this.options.find(option => option.id === currentOptionID);\n    const optionStyle = option ?\n      { backgroundColor: option.color, color: option.textColor || null } :\n      { backgroundColor: DELETED_OPTION_BACKGROUND_COLOR };\n    const optionName = option ? option.name : gettext(DELETED_OPTION_TIPS);\n\n    return (\n      <>\n        <div\n          id={this.editorKey}\n          className={classnames('selected-single-select-container', { 'disable': !column.editable, 'focus': isShowSingleSelect })}\n        >\n          <div className=\"single-select-inner w-100 h-100 d-flex align-items-center justify-content-between\">\n            <div>\n              {currentOptionID && (\n                <div\n                  className=\"single-select-option\"\n                  style={optionStyle}\n                  title={optionName}\n                >{optionName}</div>\n              )}\n            </div>\n            {column.editable && (\n              <i className=\"fas fa-caret-down\"></i>\n            )}\n          </div>\n        </div>\n        {column.editable && (\n          <SingleSelectEditor\n            column={column}\n            row={this.props.row}\n            columns={this.props.columns}\n            onCommit={this.onCommit}\n            onUpdateState={this.updateState}\n          />\n        )}\n      </>\n    );\n  }\n}\n\nSingleSelect.propTypes = {\n  column: PropTypes.object,\n  row: PropTypes.object,\n  columns: PropTypes.array,\n  onCommit: PropTypes.func,\n};\n\nexport default SingleSelect;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { getNumberDisplayString, replaceNumberNotAllowInput, formatStringToNumber, isMac } from '../../../../utils/extra-attributes';\nimport { KeyCodes, DEFAULT_NUMBER_FORMAT } from '../../../../constants';\n\nclass NumberEditor extends React.Component {\n\n  constructor(props) {\n    super(props);\n    const { row, column } = props;\n    const value = row[column.key];\n    this.state = {\n      value: getNumberDisplayString(value, column.data),\n    };\n  }\n\n  onChange = (event) => {\n    const { data } = this.props.column; // data maybe 'null'\n    const format = (data && data.format) ? data.format : DEFAULT_NUMBER_FORMAT;\n    let currency_symbol = null;\n    if (data && data.format === 'custom_currency') {\n      currency_symbol = data['currency_symbol'];\n    }\n    const initValue = event.target.value.trim();\n\n    //Prevent the repetition of periods bug in the Chinese input method of the Windows system\n    if (!isMac() && initValue.indexOf('.') > -1) return;\n    let value = replaceNumberNotAllowInput(initValue, format, currency_symbol);\n    if (value === this.state.value) return;\n    this.setState({ value });\n  }\n\n  onKeyDown = (event) => {\n    let { selectionStart, selectionEnd, value } = event.currentTarget;\n    if (event.keyCode === KeyCodes.Enter || event.keyCode === KeyCodes.Esc) {\n      event.preventDefault();\n      this.input.blur();\n    } else if ((event.keyCode === KeyCodes.LeftArrow && selectionStart === 0) ||\n      (event.keyCode === KeyCodes.RightArrow && selectionEnd === value.length)\n    ) {\n      event.stopPropagation();\n    }\n  }\n\n  onBlur = () => {\n    const { value } = this.state;\n    const { column } = this.props;\n    this.props.onCommit({ [column.key]: formatStringToNumber(value, column.data) }, column);\n  }\n\n  setInputRef = (input) => {\n    this.input = input;\n    return this.input;\n  };\n\n  onPaste = (e) => {\n    e.stopPropagation();\n  }\n\n  onCut = (e) => {\n    e.stopPropagation();\n  }\n\n  render() {\n    const { column } = this.props;\n\n    return (\n      <input\n        ref={this.setInputRef}\n        type=\"text\"\n        className=\"form-control\"\n        value={this.state.value}\n        onBlur={this.onBlur}\n        onPaste={this.onPaste}\n        onCut={this.onCut}\n        onKeyDown={this.onKeyDown}\n        onChange={this.onChange}\n        disabled={!column.editable}\n      />\n    );\n  }\n}\n\nNumberEditor.propTypes = {\n  column: PropTypes.object,\n  row: PropTypes.object,\n  onCommit: PropTypes.func,\n};\n\nexport default NumberEditor;\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { getDateDisplayString } from '../../../../utils/extra-attributes';\n\n\nclass DateEditor extends Component {\n  render() {\n    const { column, row } = this.props;\n    const { data, key } = column;\n    const value = getDateDisplayString(row[key], data ? data.format : '');\n\n    return (\n      <input\n        type=\"text\"\n        className=\"form-control\"\n        value={value}\n        disabled={true}\n      />\n    );\n  }\n}\n\nDateEditor.propTypes = {\n  column: PropTypes.object,\n  row: PropTypes.object,\n};\n\nexport default DateEditor;\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { getDateDisplayString } from '../../../../utils/extra-attributes';\n\nclass CtimeFormatter extends Component {\n  render() {\n    const { column, row } = this.props;\n    const { key } = column;\n    const value = getDateDisplayString(row[key], 'YYYY-MM-DD HH:mm:ss') || '';\n\n    return (\n      <div className=\"form-control\" style={{ width: 320 }}>{value}</div>\n    );\n  }\n}\n\nCtimeFormatter.propTypes = {\n  column: PropTypes.object,\n  row: PropTypes.object,\n};\n\nexport default CtimeFormatter;\n","import SimpleText from './simple-text';\nimport FormulaFormatter from './formula-formatter';\nimport SingleSelect from './single-select';\nimport NumberEditor from './number-editor';\nimport DateEditor from './date-editor';\nimport CtimeFormatter from './ctime-formatter';\nimport { EXTRA_ATTRIBUTES_COLUMN_TYPE } from '../../../../constants';\n\n\nconst CONFIG = {\n  [EXTRA_ATTRIBUTES_COLUMN_TYPE.TEXT]: SimpleText,\n  [EXTRA_ATTRIBUTES_COLUMN_TYPE.FORMULA]: FormulaFormatter,\n  [EXTRA_ATTRIBUTES_COLUMN_TYPE.SINGLE_SELECT]: SingleSelect,\n  [EXTRA_ATTRIBUTES_COLUMN_TYPE.NUMBER]: NumberEditor,\n  [EXTRA_ATTRIBUTES_COLUMN_TYPE.DATE]: DateEditor,\n  [EXTRA_ATTRIBUTES_COLUMN_TYPE.CTIME]: CtimeFormatter,\n  [EXTRA_ATTRIBUTES_COLUMN_TYPE.MTIME]: CtimeFormatter,\n};\n\nexport default CONFIG;\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { Col } from 'reactstrap';\nimport ColumnName from './column-name';\nimport CONFIG from '../editor';\n\nimport './index.css';\n\nclass Column extends Component {\n  render() {\n    const { column, row, columns } = this.props;\n    const Editor = CONFIG[column.type] || CONFIG['text'];\n\n    return (\n      <div className=\"pb-4 row column-item\">\n        <ColumnName column={column} />\n        <Col md={9} className='d-flex align-items-center extra-attribute-item-info'>\n          <Editor\n            column={column}\n            row={row}\n            columns={columns}\n            onCommit={this.props.onCommit}\n          />\n        </Col>\n      </div>\n    );\n  }\n}\n\nColumn.propTypes = {\n  column: PropTypes.object,\n  row: PropTypes.object,\n  columns: PropTypes.array,\n  onCommit: PropTypes.func,\n};\n\nexport default Column;\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { Modal, ModalHeader, ModalBody } from 'reactstrap';\nimport isHotkey from 'is-hotkey';\nimport { zIndexes, DIALOG_MAX_HEIGHT, EXTRA_ATTRIBUTES_COLUMN_TYPE } from '../../../constants';\nimport { gettext } from '../../../utils/constants';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { Utils } from '../../../utils/utils';\nimport { getSelectColumnOptions, getValidColumns } from '../../../utils/extra-attributes';\nimport Column from './column';\nimport Loading from '../../loading';\nimport toaster from '../../toast';\n\nimport './index.css';\n\nclass ExtraAttributesDialog extends Component {\n\n  constructor(props) {\n    super(props);\n    const { direntDetail, direntType } = props;\n    this.state = {\n      animationEnd: false,\n      isLoading: true,\n      update: {},\n      row: {},\n      columns: [],\n      errorMsg: '',\n    };\n    if (direntType === 'dir') {\n      this.isEmptyFile = false;\n    } else {\n      const direntDetailId = direntDetail?.id || '';\n      this.isEmptyFile = direntDetailId === '0'.repeat(direntDetailId.length);\n    }\n    this.isExist = false;\n    this.modalRef = React.createRef();\n  }\n\n  componentDidMount() {\n    this.startAnimation(this.getData);\n    window.addEventListener('keydown', this.onHotKey);\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener('keydown', this.onHotKey);\n  }\n\n  startAnimation = (callback) => {\n    if (this.state.animationEnd === true) {\n      callback && callback();\n    }\n\n    // use setTimeout to make sure real dom rendered\n    setTimeout(() => {\n      let dom = this.modalRef.current.firstChild;\n      const { width, maxWidth, marginLeft, height } = this.getDialogStyle();\n      dom.style.width = `${width}px`;\n      dom.style.maxWidth = `${maxWidth}px`;\n      dom.style.marginLeft = `${marginLeft}px`;\n      dom.style.height = `${height}px`;\n      dom.style.marginRight = 'unset';\n      dom.style.marginTop = '28px';\n\n      // after animation, change style and run callback\n      setTimeout(() => {\n        this.setState({ animationEnd: true }, () => {\n          dom.style.transition = 'none';\n          callback && callback();\n        });\n      }, 280);\n    }, 1);\n  }\n\n  getFormatUpdateData = (update = {}) => {\n    const { columns } = this.state;\n    const updateData = {};\n    for (let key in update) {\n      const column = columns.find(column => column.key === key);\n      if (column && column.editable) {\n        const { type, name } = column;\n        const value = update[key];\n        if (type === EXTRA_ATTRIBUTES_COLUMN_TYPE.SINGLE_SELECT) {\n          const options = getSelectColumnOptions(column);\n          const option = options.find(item => item.id === value);\n          updateData[name] = option ? option.name : '';\n        } else {\n          updateData[column.name] = update[key];\n        }\n      }\n    }\n    return updateData;\n  }\n\n  getData = () => {\n    const { repoID, filePath } = this.props;\n    seafileAPI.getFileExtendedProperties(repoID, filePath).then(res => {\n      const { row, metadata, editable_columns } = res.data;\n      this.isExist = Boolean(row._id);\n      this.setState({ row: row, columns: getValidColumns(metadata, editable_columns, this.isEmptyFile), isLoading: false, errorMsg: '' });\n    }).catch(error => {\n      const errorMsg =Utils.getErrorMsg(error);\n      this.setState({ isLoading: false, errorMsg });\n    });\n  }\n\n  createData = (data) => {\n    const { repoID, filePath } = this.props;\n    seafileAPI.newFileExtendedProperties(repoID, filePath, data).then(res => {\n      this.isExist = true;\n      const { row } = res.data;\n      this.setState({ row: row, isLoading: false, errorMsg: '' });\n    }).catch(error => {\n      const errorMsg =Utils.getErrorMsg(error);\n      toaster.danger(gettext(errorMsg));\n    });\n  };\n\n  updateData = (update, column) => {\n    const newRow = { ...this.state.row, ...update };\n    this.setState({ row: newRow }, () => {\n      const data = this.getFormatUpdateData(update);\n      const { repoID, filePath } = this.props;\n      if (this.isExist) {\n        seafileAPI.updateFileExtendedProperties(repoID, filePath, data).then(res => {\n          this.setState({ update: {}, row: res.data.row });\n        }).catch(error => {\n          const errorMsg = Utils.getErrorMsg(error);\n          toaster.danger(gettext(errorMsg));\n        });\n      } else {\n        this.createData(data);\n      }\n    });\n  }\n\n  onHotKey = (event) => {\n    if (isHotkey('esc', event)) {\n      this.onToggle();\n      return;\n    }\n  }\n\n  onToggle = () => {\n    this.props.onToggle();\n  }\n\n  getDialogStyle = () => {\n    const width = 800;\n    return {\n      width,\n      maxWidth: width,\n      marginLeft: (window.innerWidth - width) / 2,\n      height: DIALOG_MAX_HEIGHT,\n    };\n  }\n\n  getInitStyle = () => {\n    const transition = 'all .3s';\n    const defaultMargin = 80; // sequence cell width\n    const defaultHeight = 100;\n    const marginTop = '30%';\n    const width = window.innerWidth;\n    return {\n      width: `${width - defaultMargin}px`,\n      maxWidth: `${width - defaultMargin}px`,\n      marginLeft: `${defaultMargin}px`,\n      height: `${defaultHeight}px`,\n      marginRight: `${defaultMargin}px`,\n      marginTop,\n      transition,\n    };\n  }\n\n  renderColumns = () => {\n    const { isLoading, errorMsg, columns, row, update } = this.state;\n    if (isLoading) {\n      return (\n        <div className=\"w-100 h-100 d-flex align-items-center justify-content-center\">\n          <Loading />\n        </div>\n      );\n    }\n\n    if (errorMsg) {\n      return (\n        <div className=\"w-100 h-100 d-flex align-items-center justify-content-center error-message\">\n          {gettext(errorMsg)}\n        </div>\n      );\n    }\n\n    const newRow = { ...row, ...update };\n\n    return (\n      <>\n        {columns.map(column => {\n          return (\n            <Column\n              key={column.key}\n              column={column}\n              row={newRow}\n              columns={columns}\n              onCommit={this.updateData}\n            />\n          );\n        })}\n      </>\n    );\n\n  }\n\n  renderContent = () => {\n    if (!this.state.animationEnd) return null;\n\n    return (\n      <>\n        <ModalHeader toggle={this.onToggle}>{gettext('Edit extra properties')}</ModalHeader>\n        <ModalBody>\n          {this.renderColumns()}\n        </ModalBody>\n      </>\n    );\n  }\n\n  render() {\n    const { animationEnd } = this.state;\n\n    return (\n      <Modal\n        isOpen={true}\n        className=\"extra-attributes-dialog\"\n        style={animationEnd ? this.getDialogStyle() : this.getInitStyle()}\n        zIndex={zIndexes.EXTRA_ATTRIBUTES_DIALOG_MODAL}\n        contentClassName=\"extra-attributes-content-container\"\n        modalClassName=\"extra-attributes-modal\"\n        wrapClassName=\"extra-attributes\"\n        fade={false}\n        innerRef={this.modalRef}\n        toggle={this.onToggle}\n      >\n        {this.renderContent()}\n      </Modal>\n    );\n  }\n}\n\nExtraAttributesDialog.propTypes = {\n  repoID: PropTypes.string,\n  filePath: PropTypes.string,\n  direntType: PropTypes.string,\n  direntDetail: PropTypes.object,\n  onToggle: PropTypes.func,\n};\n\nexport default ExtraAttributesDialog;\n","export const EXTRA_ATTRIBUTES_DIALOG_MODAL = 1048;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport moment from 'moment';\nimport { gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport EditFileTagDialog from '../dialog/edit-filetag-dialog';\nimport ModalPortal from '../modal-portal';\nimport ExtraAttributesDialog from '../dialog/extra-attributes-dialog';\n\nconst propTypes = {\n  repoInfo: PropTypes.object.isRequired,\n  repoID: PropTypes.string.isRequired,\n  dirent: PropTypes.object.isRequired,\n  direntType: PropTypes.string.isRequired,\n  direntDetail: PropTypes.object.isRequired,\n  path: PropTypes.string.isRequired,\n  fileTagList: PropTypes.array.isRequired,\n  onFileTagChanged: PropTypes.func.isRequired,\n};\n\nclass DetailListView extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isEditFileTagShow: false,\n      isShowExtraAttributes: false,\n    };\n  }\n\n  getDirentPosition = () => {\n    let { repoInfo } = this.props;\n    let direntPath = this.getDirentPath();\n    let position = repoInfo.repo_name;\n    if (direntPath !== '/') {\n      let index = direntPath.lastIndexOf('/');\n      let path = direntPath.slice(0, index);\n      position = position + path;\n    }\n    return position;\n  }\n\n  onEditFileTagToggle = () => {\n    this.setState({\n      isEditFileTagShow: !this.state.isEditFileTagShow\n    });\n  }\n\n  onFileTagChanged = () => {\n    let direntPath = this.getDirentPath();\n    this.props.onFileTagChanged(this.props.dirent, direntPath);\n  }\n\n  getDirentPath = () => {\n    if (Utils.isMarkdownFile(this.props.path)) {\n      return this.props.path; // column mode: view file\n    }\n    let { dirent, path } = this.props;\n    return Utils.joinPath(path, dirent.name);\n  }\n\n  toggleExtraAttributesDialog = () => {\n    this.setState({ isShowExtraAttributes: !this.state.isShowExtraAttributes });\n  }\n\n  renderTags = () => {\n    const { direntType, direntDetail, fileTagList } = this.props;\n    const position = this.getDirentPosition();\n    if (direntType === 'dir') {\n      return (\n        <table className=\"table-thead-hidden\">\n          <thead>\n            <tr><th width=\"35%\"></th><th width=\"65%\"></th></tr>\n          </thead>\n          <tbody>\n            <tr><th>{gettext('Location')}</th><td>{position}</td></tr>\n            <tr><th>{gettext('Last Update')}</th><td>{moment(direntDetail.mtime).format('YYYY-MM-DD')}</td></tr>\n            {direntDetail.permission === 'rw' && (\n              <tr className=\"file-extra-attributes\">\n                <th colSpan={2}>\n                  <div className=\"edit-file-extra-attributes-btn\" onClick={this.toggleExtraAttributesDialog}>\n                    {gettext('Edit extra properties')}\n                  </div>\n                </th>\n              </tr>\n            )}\n          </tbody>\n        </table>\n      );\n    }\n    return (\n      <table className=\"table-thead-hidden\">\n        <thead>\n          <tr><th width=\"35%\"></th><th width=\"65%\"></th></tr>\n        </thead>\n        <tbody>\n          <tr><th>{gettext('Size')}</th><td>{Utils.bytesToSize(direntDetail.size)}</td></tr>\n          <tr><th>{gettext('Location')}</th><td>{position}</td></tr>\n          <tr><th>{gettext('Last Update')}</th><td>{moment(direntDetail.last_modified).fromNow()}</td></tr>\n          <tr className=\"file-tag-container\">\n            <th>{gettext('Tags')}</th>\n            <td>\n              <ul className=\"file-tag-list\">\n                {Array.isArray(fileTagList) && fileTagList.map((fileTag) => {\n                  return (\n                    <li key={fileTag.id} className=\"file-tag-item\">\n                      <span className=\"file-tag\" style={{backgroundColor:fileTag.color}}></span>\n                      <span className=\"tag-name\" title={fileTag.name}>{fileTag.name}</span>\n                    </li>\n                  );\n                })}\n              </ul>\n              <i className='fa fa-pencil-alt attr-action-icon' onClick={this.onEditFileTagToggle}></i>\n            </td>\n          </tr>\n          {direntDetail.permission === 'rw' && (\n            <tr className=\"file-extra-attributes\">\n              <th colSpan={2}>\n                <div className=\"edit-file-extra-attributes-btn\" onClick={this.toggleExtraAttributesDialog}>\n                  {gettext('Edit extra properties')}\n                </div>\n              </th>\n            </tr>\n          )}\n        </tbody>\n      </table>\n    );\n  }\n\n  render() {\n    const { direntType, direntDetail, fileTagList } = this.props;\n    const direntPath = this.getDirentPath();\n\n    return (\n      <Fragment>\n        {this.renderTags()}\n        {this.state.isEditFileTagShow &&\n          <ModalPortal>\n            <EditFileTagDialog\n              repoID={this.props.repoID}\n              fileTagList={fileTagList}\n              filePath={direntPath}\n              toggleCancel={this.onEditFileTagToggle}\n              onFileTagChanged={this.onFileTagChanged}\n            />\n          </ModalPortal>\n        }\n        {this.state.isShowExtraAttributes && (\n          <ExtraAttributesDialog\n            repoID={this.props.repoID}\n            filePath={direntPath}\n            direntType={direntType}\n            direntDetail={direntDetail}\n            onToggle={this.toggleExtraAttributesDialog}\n          />\n        )}\n      </Fragment>\n    );\n  }\n}\n\nDetailListView.defaultProps = {\n  fileTagList: [],\n};\n\nDetailListView.propTypes = propTypes;\n\nexport default DetailListView;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport classnames from 'classnames';\nimport { Nav, NavItem, NavLink, TabContent, TabPane } from 'reactstrap';\nimport DetailCommentList from './detail-comments-list';\nimport { siteRoot, enableVideoThumbnail } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../toast';\nimport Dirent from '../../models/dirent';\nimport DetailListView from './detail-list-view';\n\nimport '../../css/dirent-detail.css';\n\nconst propTypes = {\n  repoID: PropTypes.string.isRequired,\n  dirent: PropTypes.object,\n  path: PropTypes.string.isRequired,\n  currentRepoInfo: PropTypes.object.isRequired,\n  onItemDetailsClose: PropTypes.func.isRequired,\n  onFileTagChanged: PropTypes.func.isRequired,\n  direntDetailPanelTab: PropTypes.string,\n};\n\nclass DirentDetail extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      direntType: '',\n      direntDetail: '',\n      folderDirent: null,\n      activeTab: 'info',\n      fileParticipantList: [],\n    };\n  }\n\n  componentWillMount() {\n    if (this.props.direntDetailPanelTab) {\n      this.tabItemClick(this.props.direntDetailPanelTab);\n    }\n  }\n\n  componentDidMount() {\n    let { dirent, path, repoID } = this.props;\n    this.loadDirentInfo(dirent, path, repoID);\n  }\n\n  componentWillReceiveProps(nextProps) {\n    let { dirent, path, repoID } = nextProps;\n    if (this.props.dirent !== nextProps.dirent) {\n      this.loadDirentInfo(dirent, path, repoID);\n    }\n    if (this.props.direntDetailPanelTab) {\n      this.tabItemClick(this.props.direntDetailPanelTab);\n    }\n  }\n\n  loadDirentInfo = (dirent, path, repoID) => {\n    if (dirent) {\n      let direntPath = Utils.joinPath(path, dirent.name);\n      this.updateDetailView(dirent, direntPath);\n    } else {\n      let dirPath = Utils.getDirName(path);\n      seafileAPI.listDir(repoID, dirPath).then(res => {\n        let direntList = res.data.dirent_list;\n        let folderDirent = null;\n        for (let i = 0; i < direntList.length; i++) {\n          let dirent = direntList[i];\n          if (dirent.parent_dir + dirent.name === path) {\n            folderDirent = new Dirent(dirent);\n            break;\n          }\n        }\n        this.setState({folderDirent: folderDirent});\n        this.updateDetailView(folderDirent, path);\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    }\n  }\n\n  updateDetailView = (dirent, direntPath) => {\n    let repoID = this.props.repoID;\n    if (dirent.type === 'file') {\n      seafileAPI.getFileInfo(repoID, direntPath).then(res => {\n        this.setState({\n          direntType: 'file',\n          direntDetail: res.data,\n        });\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n      this.listParticipants(repoID, direntPath);\n    } else {\n      seafileAPI.getDirInfo(repoID, direntPath).then(res => {\n        this.setState({\n          direntType: 'dir',\n          direntDetail: res.data\n        });\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    }\n  }\n\n  listParticipants = (repoID, filePath) => {\n    seafileAPI.listFileParticipants(repoID, filePath).then((res) => {\n      this.setState({ fileParticipantList: res.data.participant_list });\n    });\n  }\n\n  onParticipantsChange = (repoID, filePath) => {\n    this.listParticipants(repoID, filePath);\n  }\n\n  tabItemClick = (tab) => {\n    if (this.state.activeTab !== tab) {\n      this.setState({ activeTab: tab });\n    }\n  }\n\n  renderNavItem = (showTab) => {\n    switch(showTab) {\n      case 'info':\n        return (\n          <NavItem className=\"nav-item w-50\">\n            <NavLink className={classnames({ active: this.state.activeTab === 'info' })} onClick={() => { this.tabItemClick('info');}}>\n              <i className=\"fas fa-info-circle\"></i>\n            </NavLink>\n          </NavItem>\n        );\n      case 'comments':\n        return (\n          <NavItem className=\"nav-item w-50\">\n            <NavLink className={classnames({ active: this.state.activeTab === 'comments' })} onClick={() => {this.tabItemClick('comments');}}>\n              <i className=\"fa fa-comments\"></i>\n            </NavLink>\n          </NavItem>\n        );\n    }\n  }\n\n  renderHeader = (smallIconUrl, direntName) => {\n    return (\n      <div className=\"detail-header\">\n        <div className=\"detail-control sf2-icon-x1\" onClick={this.props.onItemDetailsClose}></div>\n        <div className=\"detail-title dirent-title\">\n          <img src={smallIconUrl} width=\"24\" height=\"24\" alt=\"\" />{' '}\n          <span className=\"name ellipsis\" title={direntName}>{direntName}</span>\n        </div>\n      </div>\n    );\n  }\n\n  renderDetailBody = (bigIconUrl, folderDirent) => {\n    const { dirent, fileTags } = this.props;\n    return (\n      <Fragment>\n        <div className=\"detail-body dirent-info\">\n          <div className=\"img\"><img src={bigIconUrl} className=\"thumbnail\" alt=\"\" /></div>\n          {this.state.direntDetail &&\n            <div className=\"dirent-table-container\">\n              <DetailListView\n                repoInfo={this.props.currentRepoInfo}\n                path={this.props.path}\n                repoID={this.props.repoID}\n                dirent={this.props.dirent || folderDirent}\n                direntType={this.state.direntType}\n                direntDetail={this.state.direntDetail}\n                fileTagList={dirent ? dirent.file_tags : fileTags}\n                onFileTagChanged={this.props.onFileTagChanged}\n              />\n            </div>\n          }\n        </div>\n      </Fragment>\n    );\n  }\n\n  render() {\n    let { dirent, repoID, path } = this.props;\n    let { folderDirent } = this.state;\n    if (!dirent && !folderDirent) {\n      return '';\n    }\n    let smallIconUrl = dirent ? Utils.getDirentIcon(dirent) : Utils.getDirentIcon(folderDirent);\n    let bigIconUrl = dirent ? Utils.getDirentIcon(dirent, true) : Utils.getDirentIcon(folderDirent, true);\n    const isImg = dirent ? Utils.imageCheck(dirent.name) : Utils.imageCheck(folderDirent.name);\n    const isVideo = dirent ? Utils.videoCheck(dirent.name) : Utils.videoCheck(folderDirent.name);\n    if (isImg || (enableVideoThumbnail && isVideo)) {\n      bigIconUrl = `${siteRoot}thumbnail/${repoID}/1024` + Utils.encodePath(`${path === '/' ? '' : path}/${dirent.name}`);\n    }\n    let direntName = dirent ? dirent.name : folderDirent.name;\n\n    if ((dirent && dirent.type === 'file') || path.lastIndexOf('.') > -1) {\n      return (\n        <div className=\"detail-container\">\n          {this.renderHeader(smallIconUrl, direntName)}\n          <Nav tabs className=\"mx-0\">{this.renderNavItem('info')}{this.renderNavItem('comments')}</Nav>\n          <TabContent activeTab={this.state.activeTab} className=\"flex-fill o-auto\">\n            <TabPane tabId=\"info\">{this.renderDetailBody(bigIconUrl, folderDirent)}</TabPane>\n            <TabPane tabId=\"comments\" className=\"comments h-100\">\n              <DetailCommentList\n                repoID={this.props.repoID}\n                filePath={(dirent && dirent.type === 'file') ? Utils.joinPath(path, dirent.name) : path}\n                fileParticipantList={this.state.fileParticipantList}\n                onParticipantsChange={this.onParticipantsChange}\n              />\n            </TabPane>\n          </TabContent>\n        </div>\n      );\n    } else {\n      return (\n        <div className=\"detail-container\">\n          {this.renderHeader(smallIconUrl, direntName)}\n          {this.renderDetailBody(bigIconUrl, folderDirent)}\n        </div>\n      );\n    }\n  }\n}\n\nDirentDetail.propTypes = propTypes;\n\nexport default DirentDetail;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { enableSeadoc, gettext } from '../../utils/constants';\nimport Loading from '../loading';\nimport ModalPortal from '../modal-portal';\nimport CreateFile from '../../components/dialog/create-file-dialog';\n\nimport '../../css/tip-for-new-file.css';\n\nconst propTypes = {\n  path: PropTypes.string.isRequired,\n  isDirentListLoading: PropTypes.bool.isRequired,\n  onAddFile: PropTypes.func.isRequired\n};\n\nclass DirentNodeView extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      fileType: '',\n      isCreateFileDialogShow: false,\n    };\n  }\n\n  onCreateNewFile = (type) => {\n    this.setState({\n      fileType: type,\n      isCreateFileDialogShow: !this.state.isCreateFileDialogShow,\n    });\n  }\n\n  onCreateFileToggle = () => {\n    this.setState({\n      fileType: '',\n      isCreateFileDialogShow: !this.state.isCreateFileDialogShow,\n    });\n  }\n\n  checkDuplicatedName = () => {\n    return false; // current repo is null, and unnecessary to check duplicated name\n  }\n\n  render() {\n    if (this.props.isDirentListLoading) {\n      return (<Loading />);\n    }\n\n    return (\n      <Fragment>\n        <div className=\"tip-for-new-file\">\n          <p className=\"text-secondary text-center\">{gettext('This folder has no content at this time.')}</p>\n          <p className=\"text-secondary text-center\">{gettext('You can create files quickly')}{' +'}</p>\n          <button className=\"big-new-file-button\" onClick={this.onCreateNewFile.bind(this, '.md')}>\n            {'+ Markdown'}</button>\n          <button className=\"big-new-file-button\" onClick={this.onCreateNewFile.bind(this, '.pptx')}>\n            {'+ PPT'}</button>\n          <br />\n          <button className=\"big-new-file-button\" onClick={this.onCreateNewFile.bind(this, '.docx')}>\n            {'+ Word'}</button>\n          <button className=\"big-new-file-button\" onClick={this.onCreateNewFile.bind(this, '.xlsx')}>\n            {'+ Excel'}</button>\n          <br />\n          {enableSeadoc && <button className=\"big-new-file-button\" onClick={this.onCreateNewFile.bind(this, '.sdoc')}>\n            {'+ SeaDoc'}</button>}\n        </div>\n        {this.state.isCreateFileDialogShow && (\n          <ModalPortal>\n            <CreateFile\n              parentPath={this.props.path}\n              fileType={this.state.fileType}\n              onAddFile={this.props.onAddFile}\n              toggleDialog={this.onCreateFileToggle}\n              checkDuplicatedName={this.checkDuplicatedName}\n            />\n          </ModalPortal>\n        )}\n      </Fragment>\n    );\n  }\n}\n\nDirentNodeView.propTypes = propTypes;\n\nexport default DirentNodeView;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport MD5 from 'MD5';\nimport moment from 'moment';\nimport { UncontrolledTooltip } from 'reactstrap';\nimport { Dropdown, DropdownToggle, DropdownItem } from 'reactstrap';\nimport { gettext, siteRoot, mediaUrl, username, useGoFileserver, fileServerRoot } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport URLDecorator from '../../utils/url-decorator';\nimport ItemDropdownMenu from '../dropdown-menu/item-dropdown-menu';\nimport Rename from '../rename';\nimport ModalPortal from '../modal-portal';\nimport MoveDirentDialog from '../dialog/move-dirent-dialog';\nimport CopyDirentDialog from '../dialog/copy-dirent-dialog';\nimport ShareDialog from '../dialog/share-dialog';\nimport ZipDownloadDialog from '../dialog/zip-download-dialog';\nimport EditFileTagDialog from '../dialog/edit-filetag-dialog';\nimport LibSubFolderPermissionDialog from '../dialog/lib-sub-folder-permission-dialog';\n\nimport '../../css/dirent-list-item.css';\nimport toaster from '../toast';\n\nconst propTypes = {\n  path: PropTypes.string.isRequired,\n  repoID: PropTypes.string.isRequired,\n  isItemFreezed: PropTypes.bool.isRequired,\n  dirent: PropTypes.object.isRequired,\n  onItemClick: PropTypes.func.isRequired,\n  freezeItem: PropTypes.func.isRequired,\n  unfreezeItem: PropTypes.func.isRequired,\n  onItemRenameToggle: PropTypes.func.isRequired,\n  onItemSelected: PropTypes.func.isRequired,\n  onItemDelete: PropTypes.func.isRequired,\n  onItemRename: PropTypes.func.isRequired,\n  onItemMove: PropTypes.func.isRequired,\n  onItemCopy: PropTypes.func.isRequired,\n  onDirentClick: PropTypes.func.isRequired,\n  updateDirent: PropTypes.func.isRequired,\n  showImagePopup: PropTypes.func.isRequired,\n  currentRepoInfo: PropTypes.object,\n  isRepoOwner: PropTypes.bool,\n  isAdmin: PropTypes.bool.isRequired,\n  repoEncrypted: PropTypes.bool.isRequired,\n  isGroupOwnedRepo: PropTypes.bool.isRequired,\n  onItemMouseDown: PropTypes.func.isRequired,\n  onItemContextMenu: PropTypes.func.isRequired,\n  selectedDirentList: PropTypes.array.isRequired,\n  activeDirent: PropTypes.object,\n  getDirentItemMenuList: PropTypes.func.isRequired,\n  onFileTagChanged: PropTypes.func,\n  enableDirPrivateShare: PropTypes.bool.isRequired,\n  showDirentDetail: PropTypes.func.isRequired,\n  onItemsMove: PropTypes.func.isRequired,\n  onShowDirentsDraggablePreview: PropTypes.func,\n};\n\nclass DirentListItem extends React.Component {\n\n  constructor(props) {\n    super(props);\n\n    const { dirent } = this.props;\n    const { isCustomPermission, customPermission } = Utils.getUserPermission(dirent.permission);\n    this.isCustomPermission = isCustomPermission;\n    this.customPermission = customPermission;\n    this.canPreview = true;\n    this.canDrag = dirent.permission === 'rw';\n    if (isCustomPermission) {\n      const { preview, modify } = customPermission.permission;\n      this.canPreview = preview || modify;\n      this.canDrag = modify;\n    }\n\n    this.state = {\n      isOperationShow: false,\n      highlight: false,\n      isZipDialogOpen: false,\n      isMoveDialogShow: false,\n      isCopyDialogShow: false,\n      isShareDialogShow: false,\n      isMutipleOperation: false,\n      canDrag: this.canDrag,\n      isShowTagTooltip: false,\n      isDragTipShow: false,\n      isDropTipshow: false,\n      isEditFileTagShow: false,\n      isPermissionDialogOpen: false,\n      isOpMenuOpen: false // for mobile\n    };\n  }\n\n  componentWillReceiveProps(nextProps) {\n    if (nextProps.isItemFreezed !== this.props.isItemFreezed && !nextProps.isItemFreezed) {\n      this.setState({\n        highlight: false,\n        isOperationShow: false,\n      }, () => {\n        if (nextProps.activeDirent && nextProps.activeDirent.name === nextProps.dirent.name) {\n          this.setState({isOperationShow: true});\n        }\n      });\n    }\n  }\n\n  toggleOpMenu = () => {\n    this.setState({\n      isOpMenuOpen: !this.state.isOpMenuOpen\n    });\n  }\n\n  //UI Interactive\n  onMouseEnter = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        highlight: true,\n        isOperationShow: true,\n      });\n    }\n    if (this.state.canDrag) {\n      this.setState({isDragTipShow: true});\n    }\n  }\n\n  onMouseOver = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        highlight: true,\n        isOperationShow: true,\n      });\n    }\n    if (this.state.canDrag) {\n      this.setState({isDragTipShow: true});\n    }\n  }\n\n  onMouseLeave = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        highlight: false,\n        isOperationShow: false,\n      });\n    }\n    this.setState({isDragTipShow: false});\n  }\n\n  unfreezeItem = () => {\n    this.setState({\n      highlight: false,\n      isOperationShow: false,\n    });\n    this.props.unfreezeItem();\n  }\n\n  //buiness handler\n  onItemSelected = () => {\n    this.props.onItemSelected(this.props.dirent);\n  }\n\n  onItemStarred = (e) => {\n    let dirent = this.props.dirent;\n    let repoID = this.props.repoID;\n    let filePath = this.getDirentPath(dirent);\n\n    e.preventDefault();\n\n    if (dirent.starred) {\n      seafileAPI.unstarItem(repoID, filePath).then(() => {\n        this.props.updateDirent(this.props.dirent, 'starred', false);\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    } else {\n      seafileAPI.starItem(repoID, filePath).then(() => {\n        this.props.updateDirent(this.props.dirent, 'starred', true);\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    }\n  }\n\n  // on '<tr>'\n  onDirentClick = (e) => {\n    // '<td>' is clicked\n    e.stopPropagation();\n    if (e.target.tagName == 'TD') {\n      this.props.onDirentClick(this.props.dirent);\n    }\n  }\n\n  onItemClick = (e) => {\n    e.preventDefault();\n    const dirent = this.props.dirent;\n    if (this.state.isRenameing) {\n      return;\n    }\n\n    if (dirent.isDir()) {\n      this.props.onItemClick(dirent);\n      return;\n    }\n\n    if (!this.canPreview) {\n      return;\n    }\n\n    if (Utils.imageCheck(dirent.name)) {\n      this.props.showImagePopup(dirent);\n    } else {\n      this.props.onItemClick(dirent);\n    }\n  }\n\n  onItemDelete = (e) => {\n    e.preventDefault();\n    e.nativeEvent.stopImmediatePropagation(); //for document event\n    this.props.onItemDelete(this.props.dirent);\n  }\n\n  onItemShare = (e) => {\n    e.preventDefault();\n    e.nativeEvent.stopImmediatePropagation(); //for document event\n    this.setState({isShareDialogShow: !this.state.isShareDialogShow});\n  }\n\n  closeSharedDialog = () => {\n    this.setState({isShareDialogShow: !this.state.isShareDialogShow});\n  }\n\n  onMobileMenuItemClick = (e) => {\n    const operation = e.target.getAttribute('data-op');\n    this.onMenuItemClick(operation, e);\n  }\n\n  onMenuItemClick = (operation, event) => {\n    switch(operation) {\n      case 'Download':\n        this.onItemDownload(event);\n        break;\n      case 'Share':\n        this.onItemShare(event);\n        break;\n      case 'Delete':\n        this.onItemDelete(event);\n        break;\n      case 'Rename':\n        this.onItemRenameToggle();\n        break;\n      case 'Move':\n        this.onItemMoveToggle();\n        break;\n      case 'Copy':\n        this.onItemCopyToggle();\n        break;\n      case 'Tags':\n        this.onEditFileTagToggle();\n        break;\n      case 'Permission':\n        this.onPermissionItem();\n        break;\n      case 'Unlock':\n        this.onUnlockItem();\n        break;\n      case 'Lock':\n        this.onLockItem();\n        break;\n      case 'Mark as draft':\n        this.onMarkAsDraft();\n        break;\n      case 'Unmark as draft':\n        this.onUnmarkAsDraft();\n        break;\n      case 'Comment':\n        this.props.onDirentClick(this.props.dirent);\n        this.props.showDirentDetail('comments');\n        break;\n      case 'History':\n        this.onHistory();\n        break;\n      case 'Access Log':\n        this.onAccessLog();\n        break;\n      case 'Properties':\n        this.props.onDirentClick(this.props.dirent);\n        this.props.showDirentDetail('info');\n        break;\n      case 'Open via Client':\n        this.onOpenViaClient();\n        break;\n      case 'Convert with ONLYOFFICE':\n        this.onConvertWithONLYOFFICE();\n        break;\n      default:\n        break;\n    }\n  }\n\n  onEditFileTagToggle = () => {\n    this.setState({\n      isEditFileTagShow: !this.state.isEditFileTagShow\n    });\n  }\n\n  onFileTagChanged = () => {\n    let direntPath = this.getDirentPath(this.props.dirent);\n    this.props.onFileTagChanged(this.props.dirent, direntPath);\n  }\n\n  onItemRenameToggle = () => {\n    this.props.onItemRenameToggle(this.props.dirent);\n    this.setState({\n      isOperationShow: false,\n      isRenameing: true,\n      canDrag: false\n    });\n  }\n\n  onRenameConfirm = (newName) => {\n    this.props.onItemRename(this.props.dirent, newName);\n    this.onRenameCancel();\n  }\n\n  onRenameCancel = () => {\n    this.setState({\n      isRenameing: false,\n      canDrag: this.canDrag // set it back to the initial value\n    });\n    this.unfreezeItem();\n  }\n\n  onItemMoveToggle = () => {\n    this.setState({isMoveDialogShow: !this.state.isMoveDialogShow});\n  }\n\n  onItemCopyToggle = () => {\n    this.setState({isCopyDialogShow: !this.state.isCopyDialogShow});\n  }\n\n  onPermissionItem = () => {\n    this.setState({isPermissionDialogOpen: !this.state.isPermissionDialogOpen});\n  }\n\n  onLockItem = () => {\n    let repoID = this.props.repoID;\n    let filePath = this.getDirentPath(this.props.dirent);\n    seafileAPI.lockfile(repoID, filePath).then(() => {\n      this.props.updateDirent(this.props.dirent, 'is_locked', true);\n      this.props.updateDirent(this.props.dirent, 'locked_by_me', true);\n      let lockName = username.split('@');\n      this.props.updateDirent(this.props.dirent, 'lock_owner_name', lockName[0]);\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  onUnlockItem = () => {\n    let repoID = this.props.repoID;\n    let filePath = this.getDirentPath(this.props.dirent);\n    seafileAPI.unlockfile(repoID, filePath).then(() => {\n      this.props.updateDirent(this.props.dirent, 'is_locked', false);\n      this.props.updateDirent(this.props.dirent, 'locked_by_me', false);\n      this.props.updateDirent(this.props.dirent, 'lock_owner_name', '');\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  onMarkAsDraft = () => {\n    let repoID = this.props.repoID;\n    let filePath = this.getDirentPath(this.props.dirent);\n    seafileAPI.sdocMarkAsDraft(repoID, filePath).then((res) => {\n      this.props.updateDirent(this.props.dirent, 'is_sdoc_draft', true);\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  onUnmarkAsDraft = () => {\n    let repoID = this.props.repoID;\n    let filePath = this.getDirentPath(this.props.dirent);\n    seafileAPI.sdocUnmarkAsDraft(repoID, filePath).then((res) => {\n      this.props.updateDirent(this.props.dirent, 'is_sdoc_draft', false);\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  onHistory = () => {\n    let repoID = this.props.repoID;\n    let filePath = this.getDirentPath(this.props.dirent);\n    let url = URLDecorator.getUrl({type: 'file_revisions', repoID: repoID, filePath: filePath});\n    location.href = url;\n  }\n\n  onAccessLog = () => {\n    let filePath = this.getDirentPath(this.props.dirent);\n    let path = siteRoot + 'repo/file-access/' + this.props.repoID + '/?p=' + encodeURIComponent(filePath) ;\n    window.open(path);\n  }\n\n  onOpenViaClient = () => {\n    let repoID = this.props.repoID;\n    let filePath = this.getDirentPath(this.props.dirent);\n    let url = URLDecorator.getUrl({type: 'open_via_client', repoID: repoID, filePath: filePath});\n    location.href = url;\n  }\n\n  onConvertWithONLYOFFICE = ()=> {\n\n    let repoID = this.props.repoID;\n    let filePath = this.getDirentPath(this.props.dirent)\n\n    seafileAPI.onlyofficeConvert(repoID, filePath).then(res => {\n      this.props.loadDirentList(res.data.parent_dir)\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  onItemDownload = (e) => {\n    e.preventDefault();\n    e.nativeEvent.stopImmediatePropagation();\n    let dirent = this.props.dirent;\n    let repoID = this.props.repoID;\n    let direntPath = this.getDirentPath(dirent);\n    if (dirent.type === 'dir') {\n      if (!useGoFileserver) {\n        this.setState({\n          isZipDialogOpen: true\n        });\n      } else {\n        seafileAPI.zipDownload(repoID, this.props.path, this.props.dirent.name).then((res) => {\n          const zipToken = res.data['zip_token'];\n          location.href = `${fileServerRoot}zip/${zipToken}`;\n        }).catch((error) => {\n          let errorMsg = Utils.getErrorMsg(error);\n          this.setState({\n            isLoading: false,\n            errorMsg: errorMsg\n          });\n        });\n      }\n    } else {\n      let url = URLDecorator.getUrl({type: 'download_file_url', repoID: repoID, filePath: direntPath});\n      location.href = url;\n    }\n  }\n\n  closeZipDialog = () => {\n    this.setState({\n      isZipDialogOpen: false\n    });\n  }\n\n  getDirentPath = (dirent) => {\n    let path = this.props.path;\n    return path === '/' ? path + dirent.name : path + '/' + dirent.name;\n  }\n\n  onTagTooltipToggle = (e) => {\n    e.stopPropagation();\n    this.setState({isShowTagTooltip: !this.state.isShowTagTooltip});\n  }\n\n  onItemMove = (destRepo, dirent, selectedPath, currentPath) => {\n    this.props.onItemMove(destRepo, dirent, selectedPath, currentPath);\n  }\n\n  onItemDragStart = (e) => {\n    if (Utils.isIEBrower() || !this.state.canDrag) {\n      return false;\n    }\n    e.dataTransfer.effectAllowed = 'move';\n    let { selectedDirentList } = this.props;\n    if (selectedDirentList.length > 0 && selectedDirentList.includes(this.props.dirent)) { // drag items and selectedDirentList include item\n      this.props.onShowDirentsDraggablePreview();\n      e.dataTransfer.setDragImage(this.refs.empty_content, 0, 0); // Show an empty content\n      let selectedList =  selectedDirentList.map(item => {\n        let nodeRootPath = this.getDirentPath(item);\n        let dragStartItemData = {nodeDirent: item, nodeParentPath: this.props.path, nodeRootPath: nodeRootPath};\n        return dragStartItemData;\n      });\n      selectedList = JSON.stringify(selectedList);\n      e.dataTransfer.setData('applicaiton/drag-item-info', selectedList);\n      return ;\n    }\n\n    if (e.dataTransfer && e.dataTransfer.setDragImage) {\n      e.dataTransfer.setDragImage(this.refs.drag_icon, 15, 15);\n    }\n\n    let nodeRootPath = this.getDirentPath(this.props.dirent);\n    let dragStartItemData = {nodeDirent: this.props.dirent, nodeParentPath: this.props.path, nodeRootPath: nodeRootPath};\n    dragStartItemData = JSON.stringify(dragStartItemData);\n\n    e.dataTransfer.setData('applicaiton/drag-item-info', dragStartItemData);\n  }\n\n  onItemDragEnter = (e) => {\n    if (Utils.isIEBrower() || !this.state.canDrag) {\n      return false;\n    }\n    if (this.props.dirent.type === 'dir') {\n      e.stopPropagation();\n      this.setState({isDropTipshow: true});\n    }\n  }\n\n  onItemDragOver = (e) => {\n    if (Utils.isIEBrower() || !this.state.canDrag) {\n      return false;\n    }\n    if (e.dataTransfer.dropEffect === 'copy') {\n      return;\n    }\n    e.preventDefault();\n    e.dataTransfer.dropEffect = 'move';\n  }\n\n  onItemDragLeave = (e) => {\n    if (Utils.isIEBrower() || !this.state.canDrag) {\n      return false;\n    }\n\n    if (this.props.dirent.type === 'dir') {\n      e.stopPropagation();\n    }\n    this.setState({isDropTipshow: false});\n  }\n\n  onItemDragDrop = (e) => {\n    if (Utils.isIEBrower() || !this.state.canDrag) {\n      return false;\n    }\n    this.setState({isDropTipshow: false});\n    if (e.dataTransfer.files.length) { // uploaded files\n      return;\n    }\n    if (this.props.dirent.type === 'dir') {\n      e.stopPropagation();\n    } else {\n      return;\n    }\n    let dragStartItemData = e.dataTransfer.getData('applicaiton/drag-item-info');\n    dragStartItemData = JSON.parse(dragStartItemData);\n    if (Array.isArray(dragStartItemData)) { //move items\n      let direntPaths =  dragStartItemData.map(draggedItem => {\n        return draggedItem.nodeRootPath;\n      });\n\n      let selectedPath = Utils.joinPath(this.props.path, this.props.dirent.name);\n\n      if (direntPaths.some(direntPath => { return direntPath === selectedPath;})) { //eg; A/B, A/C --> A/B\n        return;\n      }\n\n      this.props.onItemsMove(this.props.currentRepoInfo, selectedPath);\n      return ;\n    }\n\n    let { nodeDirent, nodeParentPath, nodeRootPath } = dragStartItemData;\n    let dropItemData = this.props.dirent;\n\n    if (nodeDirent.name === dropItemData.name) {\n      return;\n    }\n\n    //  copy the dirent to it's child. eg: A/B -> A/B/C\n    if (dropItemData.type === 'dir' && nodeDirent.type === 'dir') {\n      if (nodeParentPath !== this.props.path) {\n        if (this.props.path.indexOf(nodeRootPath) !== -1) {\n          return;\n        }\n      }\n    }\n\n    let selectedPath = Utils.joinPath(this.props.path, this.props.dirent.name);\n    this.onItemMove(this.props.currentRepoInfo, nodeDirent, selectedPath, nodeParentPath);\n  }\n\n  onItemMouseDown = (event) => {\n    this.props.onItemMouseDown(event);\n  }\n\n  onItemContextMenu = (event) => {\n    let dirent = this.props.dirent;\n    this.props.onItemContextMenu(event, dirent);\n  }\n\n  renderItemOperation = () => {\n    let { dirent, currentRepoInfo, selectedDirentList } = this.props;\n    let canDownload = true;\n    let canDelete = true;\n    const { isCustomPermission, customPermission } = this;\n    if (isCustomPermission) {\n      const { permission } = customPermission;\n      canDownload = permission.download;\n      canDelete = permission.delete;\n    }\n\n    // https://dev.seafile.com/seahub/lib/d6f300e7-bb2b-4722-b83e-cf45e370bfbc/file/seaf-server%20%E5%8A%9F%E8%83%BD%E8%AE%BE%E8%AE%A1/%E6%9D%83%E9%99%90%E7%9B%B8%E5%85%B3/%E8%B5%84%E6%96%99%E5%BA%93%E6%9D%83%E9%99%90%E8%A7%84%E8%8C%83.md\n    let showShareBtn = Utils.isHasPermissionToShare(currentRepoInfo, dirent.permission, dirent);\n\n    return (\n      <Fragment>\n        {selectedDirentList.length > 1 ?\n          <Fragment>\n            {this.state.isOperationShow && !dirent.isSelected &&\n              <div className=\"operations\">\n                {(dirent.permission === 'rw' || dirent.permission === 'r' || (isCustomPermission && canDownload)) && (\n                  <a href=\"#\" className=\"op-icon sf2-icon-download\" title={gettext('Download')} role=\"button\" aria-label={gettext('Download')} onClick={this.onItemDownload}></a>\n                )}\n                {showShareBtn && (\n                  <a href=\"#\" className=\"op-icon sf2-icon-share\" title={gettext('Share')} role=\"button\" aria-label={gettext('Share')} onClick={this.onItemShare}></a>\n                )}\n                {(dirent.permission === 'rw' || dirent.permission === 'cloud-edit' || (isCustomPermission && canDelete)) && (\n                  <a href=\"#\" className=\"op-icon sf2-icon-delete\" title={gettext('Delete')} role=\"button\" aria-label={gettext('Delete')} onClick={this.onItemDelete}></a>\n                )}\n                <ItemDropdownMenu\n                  item={this.props.dirent}\n                  toggleClass={'sf2-icon-caret-down'}\n                  isHandleContextMenuEvent={true}\n                  getMenuList={this.props.getDirentItemMenuList}\n                  onMenuItemClick={this.onMenuItemClick}\n                  unfreezeItem={this.unfreezeItem}\n                  freezeItem={this.props.freezeItem}\n                />\n              </div>\n            }\n          </Fragment> :\n          <Fragment>\n            {this.state.isOperationShow &&\n              <div className=\"operations\">\n                {(dirent.permission === 'rw' || dirent.permission === 'r' || (isCustomPermission && canDownload)) && (\n                  <a href=\"#\" className=\"op-icon sf2-icon-download\" title={gettext('Download')} role=\"button\" aria-label={gettext('Download')} onClick={this.onItemDownload}></a>\n                )}\n                {showShareBtn && (\n                  <a href=\"#\" className=\"op-icon sf2-icon-share\" title={gettext('Share')} role=\"button\" aria-label={gettext('Share')} onClick={this.onItemShare}></a>\n                )}\n                {(dirent.permission === 'rw' || dirent.permission === 'cloud-edit' || (isCustomPermission && canDelete)) && (\n                  <a href=\"#\" className=\"op-icon sf2-icon-delete\" title={gettext('Delete')} role=\"button\" aria-label={gettext('Delete')} onClick={this.onItemDelete}></a>\n                )}\n                <ItemDropdownMenu\n                  item={this.props.dirent}\n                  toggleClass={'sf2-icon-caret-down'}\n                  isHandleContextMenuEvent={true}\n                  getMenuList={this.props.getDirentItemMenuList}\n                  onMenuItemClick={this.onMenuItemClick}\n                  unfreezeItem={this.unfreezeItem}\n                  freezeItem={this.props.freezeItem}\n                />\n              </div>\n            }\n          </Fragment>\n        }\n      </Fragment>\n    );\n  }\n\n  render() {\n    let { path, dirent, activeDirent } = this.props;\n    let direntPath = Utils.joinPath(path, dirent.name);\n    let dirHref = '';\n    if (this.props.currentRepoInfo) {\n      dirHref = siteRoot + 'library/' + this.props.repoID + '/' + this.props.currentRepoInfo.repo_name + Utils.encodePath(direntPath);\n    }\n    let fileHref = siteRoot + 'lib/' + this.props.repoID + '/file' + Utils.encodePath(direntPath);\n    if (dirent.is_sdoc_revision && dirent.revision_id) {\n      fileHref = siteRoot + 'lib/' + this.props.repoID + '/revisions/' + dirent.revision_id + '/';\n    }\n\n    let toolTipID = '';\n    let tagTitle = '';\n    if (dirent.file_tags && dirent.file_tags.length > 0) {\n      toolTipID = MD5(dirent.name).slice(0, 7);\n      tagTitle = dirent.file_tags.map(item => item.name).join(' ');\n    }\n\n    let iconUrl = Utils.getDirentIcon(dirent);\n\n    let trClass = this.state.highlight ? 'tr-highlight ' : '';\n    trClass += this.state.isDropTipshow ? 'tr-drop-effect' : '';\n    trClass += (activeDirent && activeDirent.name === dirent.name)  ? 'tr-active' : '';\n    trClass += dirent.isSelected? 'tr-active' : '';\n\n    let lockedInfo = gettext('locked by {name}').replace('{name}', dirent.lock_owner_name);\n\n    const isDesktop = Utils.isDesktop();\n    const { canDrag } = this.state;\n    const desktopItem = (\n      <tr\n        className={trClass}\n        draggable={canDrag}\n        onFocus={this.onMouseEnter}\n        onMouseEnter={this.onMouseEnter}\n        onMouseOver={this.onMouseOver}\n        onMouseLeave={this.onMouseLeave}\n        onClick={this.onDirentClick}\n        onDragStart={this.onItemDragStart}\n        onDragEnter={this.onItemDragEnter}\n        onDragOver={this.onItemDragOver}\n        onDragLeave={this.onItemDragLeave}\n        onDrop={this.onItemDragDrop}\n        onMouseDown={this.onItemMouseDown}\n        onContextMenu={this.onItemContextMenu}\n      >\n        <td className={`pl10 ${this.state.isDragTipShow ? 'tr-drag-effect' : ''}`}>\n          <input type=\"checkbox\" className=\"vam\" onChange={this.onItemSelected} checked={dirent.isSelected}/>\n        </td>\n        <td className=\"pl10\">\n          {dirent.starred !== undefined &&\n          <a href=\"#\" role=\"button\" aria-label={dirent.starred ? gettext('Unstar') : gettext('Star')} onClick={this.onItemStarred}>\n            <i className={`fa-star ${dirent.starred ? 'fas' : 'far star-empty'}`}></i>\n          </a>\n          }\n        </td>\n        <td className=\"pl10\">\n          <div className=\"dir-icon\">\n            {(this.canPreview && dirent.encoded_thumbnail_src) ?\n              <img ref='drag_icon' src={`${siteRoot}${dirent.encoded_thumbnail_src}`} className=\"thumbnail cursor-pointer\" onClick={this.onItemClick} alt=\"\" /> :\n              <img ref='drag_icon' src={iconUrl} width=\"24\" alt='' />\n            }\n            {dirent.is_locked && <img className=\"locked\" src={mediaUrl + 'img/file-locked-32.png'} alt={gettext('locked')} title={lockedInfo}/>}\n            <div ref=\"empty_content\" style={{position: 'absolute', width: '1px', height: '1px'}}></div>\n          </div>\n        </td>\n        <td className=\"name\">\n          {this.state.isRenameing && <Rename hasSuffix={dirent.type !== 'dir'} name={dirent.name} onRenameConfirm={this.onRenameConfirm} onRenameCancel={this.onRenameCancel} />}\n          {!this.state.isRenameing && (\n            <Fragment>\n              {(!dirent.isDir() && !this.canPreview) ? \n                <a className=\"sf-link\" onClick={this.onItemClick}>{dirent.name}</a> :\n                <a href={dirent.type === 'dir' ? dirHref : fileHref} onClick={this.onItemClick}>{dirent.name}</a>\n              }\n              {(Utils.isSdocFile(dirent.name) && dirent.is_sdoc_draft) &&\n                <span className=\"dirent-sdoc-draft-identifier\">{gettext('Draft')}</span>\n              }\n            </Fragment>\n          )}\n        </td>\n        <td className=\"tag-list-title\">\n          {(dirent.type !== 'dir' && dirent.file_tags && dirent.file_tags.length > 0) && (\n            <Fragment>\n              <div id={`tag-list-title-${toolTipID}`} className=\"dirent-item tag-list tag-list-stacked\">\n                {dirent.file_tags.map((fileTag, index) => {\n                  let length = dirent.file_tags.length;\n                  return (\n                    <span className=\"file-tag\" key={fileTag.id} style={{zIndex:length - index, backgroundColor:fileTag.color}}></span>\n                  );\n                })}\n              </div>\n              <UncontrolledTooltip target={`tag-list-title-${toolTipID}`} placement=\"bottom\">\n                {tagTitle}\n              </UncontrolledTooltip>\n            </Fragment>\n          )}\n        </td>\n        <td className=\"operation\">{this.renderItemOperation()}</td>\n        <td className=\"file-size\">{dirent.size && dirent.size}</td>\n        <td className=\"last-update\" title={moment.unix(dirent.mtime).format('llll')}>{dirent.mtime_relative}</td>\n      </tr>\n    );\n    const mobileItem = (\n      <tr>\n        <td onClick={this.onItemClick}>\n          <div className=\"dir-icon\">\n            {(this.canPreview && dirent.encoded_thumbnail_src) ?\n              <img src={`${siteRoot}${dirent.encoded_thumbnail_src}`} className=\"thumbnail cursor-pointer\" alt=\"\" /> :\n              <img src={iconUrl} width=\"24\" alt=\"\" />\n            }\n            {dirent.is_locked && <img className=\"locked\" src={mediaUrl + 'img/file-locked-32.png'} alt={gettext('locked')} title={lockedInfo}/>}\n          </div>\n        </td>\n        <td onClick={this.onItemClick}>\n          {this.state.isRenameing && <Rename hasSuffix={dirent.type !== 'dir'} name={dirent.name} onRenameConfirm={this.onRenameConfirm} onRenameCancel={this.onRenameCancel} /> }\n          {!this.state.isRenameing && (\n            <Fragment>\n              {(!dirent.isDir() && !this.canPreview) ?\n                <a className=\"sf-link\">{dirent.name}</a> :\n                <a href={dirent.type === 'dir' ? dirHref : fileHref}>{dirent.name}</a>\n              }\n            </Fragment>\n          )}\n          <br />\n          {dirent.size && <span className=\"item-meta-info\">{dirent.size}</span>}\n          <span className=\"item-meta-info\">{dirent.mtime_relative}</span>\n        </td>\n        <td>\n          <Dropdown isOpen={this.state.isOpMenuOpen} toggle={this.toggleOpMenu}>\n            <DropdownToggle\n              tag=\"i\"\n              className=\"sf-dropdown-toggle fa fa-ellipsis-v ml-0\"\n              title={gettext('More Operations')}\n              data-toggle=\"dropdown\"\n              aria-expanded={this.state.isOpMenuOpen}\n            />\n            <div className={this.state.isOpMenuOpen ? '' : 'd-none'} onClick={this.toggleOpMenu}>\n              <div className=\"mobile-operation-menu-bg-layer\"></div>\n              <div className=\"mobile-operation-menu\">\n                {dirent.starred !== undefined &&\n                <DropdownItem className=\"mobile-menu-item\" onClick={this.onItemStarred}>{dirent.starred ? gettext('Unstar') : gettext('Star')}</DropdownItem>}\n                {this.props.getDirentItemMenuList(dirent, true).map((item, index) => {\n                  if (item != 'Divider' && item.key != 'Open via Client') {\n                    return (\n                      <DropdownItem className=\"mobile-menu-item\" key={index} data-op={item.key} onClick={this.onMobileMenuItemClick}>{item.value}</DropdownItem>\n                    );\n                  } else {\n                    return null;\n                  }\n                })}\n              </div>\n            </div>\n          </Dropdown>\n        </td>\n      </tr>\n    );\n\n    return (\n      <Fragment>\n        {isDesktop ? desktopItem : mobileItem}\n        {this.state.isMoveDialogShow &&\n          <ModalPortal>\n            <MoveDirentDialog\n              path={this.props.path}\n              repoID={this.props.repoID}\n              dirent={this.props.dirent}\n              isMutipleOperation={this.state.isMutipleOperation}\n              onItemMove={this.props.onItemMove}\n              onCancelMove={this.onItemMoveToggle}\n              repoEncrypted={this.props.repoEncrypted}\n            />\n          </ModalPortal>\n        }\n        {this.state.isCopyDialogShow &&\n          <ModalPortal>\n            <CopyDirentDialog\n              path={this.props.path}\n              repoID={this.props.repoID}\n              dirent={this.props.dirent}\n              isMutipleOperation={this.state.isMutipleOperation}\n              onItemCopy={this.props.onItemCopy}\n              onCancelCopy={this.onItemCopyToggle}\n              repoEncrypted={this.props.repoEncrypted}\n            />\n          </ModalPortal>\n        }\n        {this.state.isEditFileTagShow &&\n          <EditFileTagDialog\n            repoID={this.props.repoID}\n            fileTagList={dirent.file_tags}\n            filePath={direntPath}\n            toggleCancel={this.onEditFileTagToggle}\n            onFileTagChanged={this.onFileTagChanged}\n          />\n        }\n        {this.state.isZipDialogOpen &&\n          <ModalPortal>\n            <ZipDownloadDialog\n              repoID={this.props.repoID}\n              path={this.props.path}\n              target={this.props.dirent.name}\n              toggleDialog={this.closeZipDialog}\n            />\n          </ModalPortal>\n        }\n        {this.state.isShareDialogShow &&\n          <ModalPortal>\n            <ShareDialog\n              itemType={dirent.type}\n              itemName={dirent.name}\n              itemPath={direntPath}\n              userPerm={dirent.permission}\n              repoID={this.props.repoID}\n              repoEncrypted={this.props.repoEncrypted}\n              enableDirPrivateShare={this.props.enableDirPrivateShare}\n              isGroupOwnedRepo={this.props.isGroupOwnedRepo}\n              toggleDialog={this.closeSharedDialog}\n            />\n          </ModalPortal>\n        }\n        {this.state.isPermissionDialogOpen &&\n          <ModalPortal>\n            <LibSubFolderPermissionDialog\n              toggleDialog={this.onPermissionItem}\n              repoID={this.props.repoID}\n              folderPath={direntPath}\n              folderName={dirent.name}\n              isDepartmentRepo={this.props.isGroupOwnedRepo}\n            />\n          </ModalPortal>\n        }\n      </Fragment>\n    );\n  }\n}\n\nDirentListItem.propTypes = propTypes;\n\nexport default DirentListItem;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { siteRoot } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\n\nconst propTypes = {\n  selectedDirentList: PropTypes.array,\n  onHideDirentsDraggablePreview: PropTypes.func\n};\n\nclass DirentsDraggedPreview extends React.Component {\n\n  componentDidMount() {\n    document.addEventListener('dragover', this.handleDragOver);\n    document.addEventListener('drop', this.handleDrop);\n    document.addEventListener('dragend', this.handleDragEnd);\n  }\n\n  componentWillUnmount() {\n    document.removeEventListener('dragover', this.handleDragOver);\n    document.removeEventListener('drop', this.handleDrop);\n    document.removeEventListener('dragend', this.handleDragEnd);\n  }\n\n  handleDragEnd = () => {\n    this.element.style.opacity = 0;\n    this.props.onHideDirentsDraggablePreview();\n  }\n\n  handleDragOver = (event) => {\n    if (Utils.isIEBrower()) {\n      return false;\n    }\n    event.preventDefault();\n    event.dataTransfer.dropEffect = 'move';\n\n    this.element.style.top = event.clientY + 'px';\n    this.element.style.left = event.clientX + 'px';\n  }\n\n  handleDrop = (event) => {\n    this.element.style.opacity = 0;\n    this.props.onHideDirentsDraggablePreview();\n  }\n\n  render() {\n    let{ selectedDirentList } = this.props;\n    const inlineStyle = {\n      position: 'absolute',\n      opacity: 1,\n      pointerEvents: 'none',\n      display: 'block',\n      left: '-9999px',\n      top: '-9999px',\n      zIndex: 101,\n      maxHeight: document.documentElement.clientHeight,\n      overflow: 'hidden'\n    };\n    return (\n      <div style={inlineStyle} ref={element => this.element = element}>\n        {selectedDirentList.map((dirent, index) => {\n          let iconUrl = Utils.getDirentIcon(dirent);\n          return (\n            <div key={index}>\n              {dirent.encoded_thumbnail_src ?\n                <img src={`${siteRoot}${dirent.encoded_thumbnail_src}`} className=\"thumbnail cursor-pointer\" alt=\"\" /> :\n                <img src={iconUrl} width=\"24\" alt='' />\n              }\n            </div>\n          );\n        })}\n      </div>\n    );\n  }\n}\n\nDirentsDraggedPreview.propTypes = propTypes;\n\nexport default DirentsDraggedPreview;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { siteRoot, gettext, thumbnailSizeForOriginal, username } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport TextTranslation from '../../utils/text-translation';\nimport URLDecorator from '../../utils/url-decorator';\nimport Loading from '../loading';\nimport toaster from '../toast';\nimport ModalPortal from '../modal-portal';\nimport CreateFile from '../dialog/create-file-dialog';\nimport CreateFolder from '../dialog/create-folder-dialog';\nimport ImageDialog from '../dialog/image-dialog';\nimport ZipDownloadDialog from '../dialog/zip-download-dialog';\nimport MoveDirentDialog from '../dialog/move-dirent-dialog';\nimport CopyDirentDialog from '../dialog/copy-dirent-dialog';\nimport DirentListItem from './dirent-list-item';\nimport ContextMenu from '../context-menu/context-menu';\nimport { hideMenu, showMenu } from '../context-menu/actions';\nimport DirentsDraggedPreview from '../draggable/dirents-dragged-preview';\n\nconst propTypes = {\n  path: PropTypes.string.isRequired,\n  repoID: PropTypes.string.isRequired,\n  currentRepoInfo: PropTypes.object,\n  isAllItemSelected: PropTypes.bool.isRequired,\n  isDirentListLoading: PropTypes.bool.isRequired,\n  direntList: PropTypes.array.isRequired,\n  sortBy: PropTypes.string.isRequired,\n  sortOrder: PropTypes.string.isRequired,\n  sortItems: PropTypes.func.isRequired,\n  onAddFile: PropTypes.func.isRequired,\n  onAddFolder: PropTypes.func.isRequired,\n  onItemDelete: PropTypes.func.isRequired,\n  onAllItemSelected: PropTypes.func.isRequired,\n  onItemSelected: PropTypes.func.isRequired,\n  onItemRename: PropTypes.func.isRequired,\n  onItemClick: PropTypes.func.isRequired,\n  onItemMove: PropTypes.func.isRequired,\n  onItemCopy: PropTypes.func.isRequired,\n  onDirentClick: PropTypes.func.isRequired,\n  updateDirent: PropTypes.func.isRequired,\n  selectedDirentList: PropTypes.array.isRequired,\n  onItemsMove: PropTypes.func.isRequired,\n  onItemsCopy: PropTypes.func.isRequired,\n  onItemsDelete: PropTypes.func.isRequired,\n  onFileTagChanged: PropTypes.func,\n  enableDirPrivateShare: PropTypes.bool.isRequired,\n  isGroupOwnedRepo: PropTypes.bool.isRequired,\n  userPerm: PropTypes.string,\n  showDirentDetail: PropTypes.func.isRequired,\n  loadDirentList: PropTypes.func,\n};\n\nclass DirentListView extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isItemFreezed: false,\n      isImagePopupOpen: false,\n      imageItems: [],\n      imageIndex: 0,\n      fileType: '',\n      isCreateFileDialogShow: false,\n      isCreateFolderDialogShow: false,\n      isMoveDialogShow: false,\n      isCopyDialogShow: false,\n      isProgressDialogShow: false,\n      downloadItems: [],\n      isMutipleOperation: true,\n      activeDirent: null,\n      isListDropTipShow: false,\n      isShowDirentsDraggablePreview: false,\n    };\n\n    this.enteredCounter = 0; // Determine whether to enter the child element to avoid dragging bubbling bugs\n    this.isRepoOwner = props.currentRepoInfo.owner_email === username;\n    this.isAdmin = props.currentRepoInfo.is_admin;\n    this.repoEncrypted = props.currentRepoInfo.encrypted;\n\n    this.clickedDirent = null;\n    this.direntItems = [];\n    this.currentItemRef = null;\n\n    this.zipToken = null;\n\n    const { userPerm } = props;\n    this.canDrop = userPerm === 'rw';\n    const { isCustomPermission, customPermission } = Utils.getUserPermission(userPerm);\n    if (isCustomPermission) {\n      const { modify } = customPermission.permission;\n      this.canDrop = modify;\n    }\n  }\n\n  freezeItem = () => {\n    this.setState({isItemFreezed: true});\n  }\n\n  unfreezeItem = () => {\n    this.setState({isItemFreezed: false});\n  }\n\n  onItemRename = (dirent, newName) => {\n    let isDuplicated = this.props.direntList.some(item => {\n      return item.name === newName;\n    });\n    if (isDuplicated) {\n      let errMessage = gettext('The name \"{name}\" is already taken. Please choose a different name.');\n      errMessage = errMessage.replace('{name}', Utils.HTMLescape(newName));\n      toaster.danger(errMessage);\n      return false;\n    }\n    this.props.onItemRename(dirent, newName);\n  }\n\n  onItemRenameToggle = () => {\n    this.freezeItem();\n  }\n\n  onItemSelected = (dirent) => {\n    this.setState({activeDirent: null});\n    this.props.onItemSelected(dirent);\n  }\n\n  onDirentClick = (dirent) => {\n    hideMenu();\n    if (this.props.selectedDirentList.length > 0 && !this.state.activeDirent ) {\n      return;\n    }\n    this.setState({activeDirent: dirent});\n    this.props.onDirentClick(dirent);\n  }\n\n  sortByName = (e) => {\n    e.preventDefault();\n    const sortBy = 'name';\n    const sortOrder = this.props.sortOrder == 'asc' ? 'desc' : 'asc';\n    this.props.sortItems(sortBy, sortOrder);\n  }\n\n  sortByTime = (e) => {\n    e.preventDefault();\n    const sortBy = 'time';\n    const sortOrder = this.props.sortOrder == 'asc' ? 'desc' : 'asc';\n    this.props.sortItems(sortBy, sortOrder);\n  }\n\n  sortBySize = (e) => {\n    e.preventDefault();\n    const sortBy = 'size';\n    const sortOrder = this.props.sortOrder == 'asc' ? 'desc' : 'asc';\n    this.props.sortItems(sortBy, sortOrder);\n  }\n\n  // for image popup\n  prepareImageItem = (item) => {\n    const useThumbnail = !this.repoEncrypted;\n    const name = item.name;\n\n    const fileExt = name.substr(name.lastIndexOf('.') + 1).toLowerCase();\n    const isGIF = fileExt == 'gif';\n\n    const path = Utils.encodePath(Utils.joinPath(this.props.path, name));\n    const repoID = this.props.repoID;\n    let src;\n    if (useThumbnail && !isGIF) {\n      src = `${siteRoot}thumbnail/${repoID}/${thumbnailSizeForOriginal}${path}`;\n    } else {\n      src = `${siteRoot}repo/${repoID}/raw${path}`;\n    }\n\n    return {\n      'name': name,\n      'url': `${siteRoot}lib/${repoID}/file${path}`,\n      'src': src\n    };\n  }\n\n  showImagePopup = (curItem) => {\n    let items = this.props.fullDirentList.filter((item) => {\n      return Utils.imageCheck(item.name);\n    });\n\n    const imageItems = items.map((item) => {\n      return this.prepareImageItem(item);\n    });\n\n    this.setState({\n      isImagePopupOpen: true,\n      imageItems: imageItems,\n      imageIndex: items.indexOf(curItem)\n    });\n  }\n\n  moveToPrevImage = () => {\n    const imageItemsLength = this.state.imageItems.length;\n    this.setState((prevState) => ({\n      imageIndex: (prevState.imageIndex + imageItemsLength - 1) % imageItemsLength\n    }));\n  }\n\n  moveToNextImage = () => {\n    const imageItemsLength = this.state.imageItems.length;\n    this.setState((prevState) => ({\n      imageIndex: (prevState.imageIndex + 1) % imageItemsLength\n    }));\n  }\n\n  closeImagePopup = () => {\n    this.setState({isImagePopupOpen: false});\n  }\n\n  onCreateFileToggle = () => {\n    this.setState({isCreateFileDialogShow: !this.state.isCreateFileDialogShow});\n  }\n\n  onCreateFolderToggle = () => {\n    this.setState({isCreateFolderDialogShow: !this.state.isCreateFolderDialogShow});\n  }\n\n  onAddFolder = (dirPath) => {\n    this.setState({isCreateFolderDialogShow: false});\n    this.props.onAddFolder(dirPath);\n  }\n\n  checkDuplicatedName = (newName) => {\n    let direntList = this.props.direntList;\n    let isDuplicated = direntList.some(object => {\n      return object.name === newName;\n    });\n    return isDuplicated;\n  }\n\n  onMoveToggle = () => {\n    this.setState({isMoveDialogShow: !this.state.isMoveDialogShow});\n  }\n\n  onCopyToggle = () => {\n    this.setState({isCopyDialogShow: !this.state.isCopyDialogShow});\n  }\n\n  onItemsDownload = () => {\n    let { path, repoID, selectedDirentList } = this.props;\n    if (selectedDirentList.length) {\n      if (selectedDirentList.length === 1 && !selectedDirentList[0].isDir()) {\n        let direntPath = Utils.joinPath(path, selectedDirentList[0].name);\n        let url = URLDecorator.getUrl({type: 'download_file_url', repoID: repoID, filePath: direntPath});\n        location.href= url;\n        return;\n      }\n\n      let selectedDirentNames = selectedDirentList.map(dirent => {\n        return dirent.name;\n      });\n\n      this.setState({\n        isProgressDialogShow: true,\n        downloadItems: selectedDirentNames\n      });\n    }\n  }\n\n  onCloseZipDownloadDialog = () => {\n    this.setState({isProgressDialogShow: false});\n  }\n\n  // common contextmenu handle\n  onMouseDown = (event) => {\n    event.stopPropagation();\n    if (event.button === 2) {\n      return;\n    }\n  }\n\n  handleContextClick = (event, id, menuList, currentObject = null) => {\n    event.preventDefault();\n    event.stopPropagation();\n\n    let x = event.clientX || (event.touches && event.touches[0].pageX);\n    let y = event.clientY || (event.touches && event.touches[0].pageY);\n\n    if (this.props.posX) {\n      x -= this.props.posX;\n    }\n    if (this.props.posY) {\n      y -= this.props.posY;\n    }\n\n    hideMenu();\n\n    let showMenuConfig = {\n      id: id,\n      position: { x, y },\n      target: event.target,\n      currentObject: currentObject,\n      menuList: menuList,\n    };\n\n    if (menuList.length === 0) {\n      return;\n    }\n\n    showMenu(showMenuConfig);\n  }\n\n  // table-container contextmenu handle\n  onContainerClick = () => {\n    hideMenu();\n    if (this.state.activeDirent) {\n      this.onDirentClick(null);\n    }\n  }\n\n  onContainerMouseDown = (event) => {\n    this.onMouseDown(event);\n  }\n\n  onContainerContextMenu = (event) => {\n    event.preventDefault();\n    // Display menu items based on the permissions of the current path\n    let permission = this.props.userPerm;\n\n    const { isCustomPermission, customPermission } = Utils.getUserPermission(this.props.userPerm);\n    if (permission !== 'admin' && permission !== 'rw' && !isCustomPermission) {\n      return;\n    }\n\n    if (this.props.selectedDirentList.length === 0) {\n      let id = 'dirent-container-menu';\n\n      // custom permission judgement\n      if (isCustomPermission) {\n        const { create: canCreate } = customPermission.permission;\n        if (!canCreate) return;\n      }\n\n      let menuList = [TextTranslation.NEW_FOLDER, TextTranslation.NEW_FILE];\n      this.handleContextClick(event, id, menuList);\n    } else {\n      if (this.props.selectedDirentList.length === 1) {\n        if (!this.state.activeDirent) {\n          let id = 'dirent-item-menu';\n          let dirent = this.props.selectedDirentList[0];\n          let menuList = this.getDirentItemMenuList(dirent, true);\n          this.handleContextClick(event, id, menuList, dirent);\n        } else {\n          this.onDirentClick(null);\n          event.preventDefault();\n          event.persist();\n\n          // custom permission judgement\n          if (isCustomPermission) {\n            const { modify } = customPermission.permission;\n            if (!modify) return;\n          }\n\n          setTimeout(() => {\n            let id = 'dirent-container-menu';\n            let menuList = [TextTranslation.NEW_FOLDER, TextTranslation.NEW_FILE];\n            this.handleContextClick(event, id, menuList);\n          }, 0);\n        }\n      } else {\n        let id = 'dirents-menu';\n        let menuList = [];\n        if (isCustomPermission) {\n          const { modify: canModify, copy: canCopy, download: canDownload, delete: canDelete } = customPermission.permission;\n          canModify && menuList.push(TextTranslation.MOVE);\n          canCopy && menuList.push(TextTranslation.COPY);\n          canDownload && menuList.push(TextTranslation.DOWNLOAD);\n          canDelete && menuList.push(TextTranslation.DELETE);\n        } else {\n          menuList = [TextTranslation.MOVE, TextTranslation.COPY, TextTranslation.DOWNLOAD, TextTranslation.DELETE];\n        }\n\n        this.handleContextClick(event, id, menuList);\n      }\n    }\n  }\n\n  onContainerMenuItemClick = (operation) => {\n    switch(operation) {\n      case 'New Folder':\n        this.onCreateFolderToggle();\n        break;\n      case 'New File':\n        this.onCreateFileToggle();\n        break;\n      default:\n        break;\n    }\n\n    hideMenu();\n  }\n\n  onDirentsMenuItemClick = (operation) => {\n    switch(operation) {\n      case 'Move':\n        this.onMoveToggle();\n        break;\n      case 'Copy':\n        this.onCopyToggle();\n        break;\n      case 'Download':\n        this.onItemsDownload();\n        break;\n      case 'Delete':\n        this.props.onItemsDelete();\n        break;\n      default:\n        break;\n    }\n\n    hideMenu();\n  }\n\n  // table-thread contextmenu handle -- Shield event\n  onThreadMouseDown = (event) => {\n    this.onMouseDown(event);\n  }\n\n  onThreadContextMenu = (event) => {\n    event.stopPropagation();\n  }\n\n  // table-dirent-item contextmenu handle\n  onItemMouseDown = (event) => {\n    this.onMouseDown(event);\n  }\n\n  onItemContextMenu = (event, dirent) => {\n    // Display menu items according to the current dirent permission\n    if (this.props.selectedDirentList.length > 1) {\n      return;\n    }\n    this.onDirentClick(dirent);\n    let id = 'dirent-item-menu';\n    let menuList = this.getDirentItemMenuList(dirent, true);\n    this.handleContextClick(event, id, menuList, dirent);\n  }\n\n  setDirentItemRef = (index) => item => {\n    this.direntItems[index] = item;\n  }\n\n  onMenuItemClick = (operation, currentObject, event) => {\n    let index = this.getDirentIndex(currentObject);\n    this.direntItems[index].onMenuItemClick(operation, event);\n\n    hideMenu();\n  }\n\n  onShowMenu = (e) => {\n    this.freezeItem();\n  }\n\n  onHideMenu = (e) => {\n    this.unfreezeItem();\n  }\n\n  // contextmenu utils\n  getDirentIndex = (dirent) => {\n    let direntList = this.props.direntList;\n    let index = 0;\n    for (let i = 0; i < direntList.length; i++) {\n      if (direntList[i].name === dirent.name) {\n        index = i;\n        break;\n      }\n    }\n    return index;\n  }\n\n  getDirentItemMenuList = (dirent, isContextmenu) => {\n    const isRepoOwner = this.isRepoOwner;\n    const currentRepoInfo = this.props.currentRepoInfo;\n    return Utils.getDirentOperationList(isRepoOwner, currentRepoInfo, dirent, isContextmenu);\n  }\n\n  onTableDragEnter = (e) => {\n    if (Utils.isIEBrower() || !this.canDrop) {\n      return false;\n    }\n    this.enteredCounter++;\n    if (this.enteredCounter !== 0) {\n      if (this.state.isListDropTipShow) {\n        return ;\n      }\n      this.setState({isListDropTipShow: true});\n    }\n  }\n\n  onTableDragOver = (e) => {\n    if (Utils.isIEBrower() || !this.canDrop) {\n      return false;\n    }\n    if (e.dataTransfer.dropEffect === 'copy') {\n      return;\n    }\n    e.preventDefault();\n    e.dataTransfer.dropEffect = 'move';\n  }\n\n  onTableDragLeave = (e) => {\n    if (Utils.isIEBrower() || !this.canDrop) {\n      return false;\n    }\n    this.enteredCounter--;\n    if (this.enteredCounter === 0) {\n      this.setState({isListDropTipShow: false});\n    }\n  }\n\n  tableDrop = (e) => {\n    if (Utils.isIEBrower() || !this.canDrop) {\n      return false;\n    }\n    e.persist();\n    this.enteredCounter = 0;\n    this.setState({isListDropTipShow: false});\n    if (e.dataTransfer.files.length) { // uploaded files\n      return;\n    }\n    let dragStartItemData = e.dataTransfer.getData('applicaiton/drag-item-info');\n    dragStartItemData = JSON.parse(dragStartItemData);\n\n    let {nodeDirent, nodeParentPath, nodeRootPath} = dragStartItemData;\n\n    if (Array.isArray(dragStartItemData)) { //selected items\n      return;\n    }\n\n    if (nodeRootPath === this.props.path || nodeParentPath === this.props.path) {\n      return;\n    }\n\n    if (this.props.path.indexOf(nodeRootPath) !== -1) {\n      return;\n    }\n\n    this.props.onItemMove(this.props.currentRepoInfo, nodeDirent, this.props.path, nodeParentPath);\n  }\n\n  onShowDirentsDraggablePreview = () => {\n    this.setState({\n      isShowDirentsDraggablePreview: true,\n    });\n  }\n\n  onHideDirentsDraggablePreview = () => {\n    this.setState({\n      isShowDirentsDraggablePreview: false\n    });\n  }\n\n  render() {\n    const { direntList, sortBy, sortOrder } = this.props;\n\n    if (this.props.isDirentListLoading) {\n      return (<Loading />);\n    }\n\n    // sort\n    const sortByName = sortBy == 'name';\n    const sortByTime = sortBy == 'time';\n    const sortBySize = sortBy == 'size';\n    const sortIcon = sortOrder == 'asc' ? <span className=\"fas fa-caret-up\"></span> : <span className=\"fas fa-caret-down\"></span>;\n\n    const isDesktop = Utils.isDesktop();\n\n    return (\n      <div\n        className={`table-container ${(this.state.isListDropTipShow && this.canDrop) ? 'table-drop-active' : ''}`}\n        onMouseDown={this.onContainerMouseDown}\n        onContextMenu={this.onContainerContextMenu}\n        onClick={this.onContainerClick}\n        onDragEnter={this.onTableDragEnter}\n        onDragOver={this.onTableDragOver}\n        onDragLeave={this.onTableDragLeave}\n        onDrop={this.tableDrop}\n      >\n        <table className={`table-hover ${isDesktop ? '': 'table-thead-hidden'}`}>\n          {isDesktop ? (\n            <thead onMouseDown={this.onThreadMouseDown} onContextMenu={this.onThreadContextMenu}>\n              <tr>\n                <th width=\"3%\" className=\"pl10\">\n                  <input type=\"checkbox\" className=\"vam\" onChange={this.props.onAllItemSelected} checked={this.props.isAllItemSelected} />\n                </th>\n                <th width=\"3%\" className=\"pl10\">{/*icon */}</th>\n                <th width=\"5%\" className=\"pl10\">{/*star */}</th>\n                <th width=\"39%\"><a className=\"d-block table-sort-op\" href=\"#\" onClick={this.sortByName}>{gettext('Name')} {sortByName && sortIcon}</a></th>\n                <th width=\"6%\">{/*tag */}</th>\n                <th width=\"18%\">{/*operation */}</th>\n                <th width=\"11%\"><a className=\"d-block table-sort-op\" href=\"#\" onClick={this.sortBySize}>{gettext('Size')} {sortBySize && sortIcon}</a></th>\n                <th width=\"15%\"><a className=\"d-block table-sort-op\" href=\"#\" onClick={this.sortByTime}>{gettext('Last Update')} {sortByTime && sortIcon}</a></th>\n              </tr>\n            </thead>\n          ) : (\n            <thead>\n              <tr>\n                <th width=\"12%\"></th>\n                <th width=\"80%\"></th>\n                <th width=\"8%\"></th>\n              </tr>\n            </thead>\n          )}\n          <tbody>\n            {direntList.map((dirent, index) => {\n              return (\n                <DirentListItem\n                  ref={this.setDirentItemRef(index)}\n                  key={index}\n                  dirent={dirent}\n                  path={this.props.path}\n                  repoID={this.props.repoID}\n                  currentRepoInfo={this.props.currentRepoInfo}\n                  isAdmin={this.isAdmin}\n                  isRepoOwner={this.isRepoOwner}\n                  repoEncrypted={this.repoEncrypted}\n                  enableDirPrivateShare={this.props.enableDirPrivateShare}\n                  isGroupOwnedRepo={this.props.isGroupOwnedRepo}\n                  onItemClick={this.props.onItemClick}\n                  onItemRenameToggle={this.onItemRenameToggle}\n                  onItemSelected={this.onItemSelected}\n                  onItemDelete={this.props.onItemDelete}\n                  onItemRename={this.onItemRename}\n                  onItemMove={this.props.onItemMove}\n                  onItemCopy={this.props.onItemCopy}\n                  updateDirent={this.props.updateDirent}\n                  isItemFreezed={this.state.isItemFreezed}\n                  freezeItem={this.freezeItem}\n                  unfreezeItem={this.unfreezeItem}\n                  onDirentClick={this.onDirentClick}\n                  showImagePopup={this.showImagePopup}\n                  onItemMouseDown={this.onItemMouseDown}\n                  onItemContextMenu={this.onItemContextMenu}\n                  selectedDirentList={this.props.selectedDirentList}\n                  activeDirent={this.state.activeDirent}\n                  onFileTagChanged={this.props.onFileTagChanged}\n                  getDirentItemMenuList={this.getDirentItemMenuList}\n                  showDirentDetail={this.props.showDirentDetail}\n                  onItemsMove={this.props.onItemsMove}\n                  onShowDirentsDraggablePreview={this.onShowDirentsDraggablePreview}\n                  loadDirentList={this.props.loadDirentList}\n                />\n              );\n            })}\n          </tbody>\n        </table>\n        <Fragment>\n          <ContextMenu\n            id={'dirent-container-menu'}\n            onMenuItemClick={this.onContainerMenuItemClick}\n          />\n          <ContextMenu\n            id={'dirent-item-menu'}\n            onMenuItemClick={this.onMenuItemClick}\n            onShowMenu={this.onShowMenu}\n            onHideMenu={this.onHideMenu}\n          />\n          <ContextMenu\n            id={'dirents-menu'}\n            onMenuItemClick={this.onDirentsMenuItemClick}\n          />\n          {this.state.isShowDirentsDraggablePreview &&\n            <ModalPortal>\n              <DirentsDraggedPreview\n                selectedDirentList={this.props.selectedDirentList}\n                onHideDirentsDraggablePreview={this.onHideDirentsDraggablePreview}\n                dragStartPosition={this.state.dragStartPosition}\n              />\n            </ModalPortal>\n          }\n          {this.state.isImagePopupOpen && (\n            <ModalPortal>\n              <ImageDialog\n                imageItems={this.state.imageItems}\n                imageIndex={this.state.imageIndex}\n                closeImagePopup={this.closeImagePopup}\n                moveToPrevImage={this.moveToPrevImage}\n                moveToNextImage={this.moveToNextImage}\n              />\n            </ModalPortal>\n          )}\n          {this.state.isCreateFolderDialogShow && (\n            <ModalPortal>\n              <CreateFolder\n                parentPath={this.props.path}\n                onAddFolder={this.onAddFolder}\n                checkDuplicatedName={this.checkDuplicatedName}\n                addFolderCancel={this.onCreateFolderToggle}\n              />\n            </ModalPortal>\n          )}\n          {this.state.isCreateFileDialogShow && (\n            <ModalPortal>\n              <CreateFile\n                parentPath={this.props.path}\n                fileType={this.state.fileType}\n                onAddFile={this.props.onAddFile}\n                checkDuplicatedName={this.checkDuplicatedName}\n                toggleDialog={this.onCreateFileToggle}\n              />\n            </ModalPortal>\n          )}\n          {this.state.isMoveDialogShow &&\n            <MoveDirentDialog\n              path={this.props.path}\n              repoID={this.props.repoID}\n              repoEncrypted={this.props.currentRepoInfo.encrypted}\n              isMutipleOperation={this.state.isMutipleOperation}\n              selectedDirentList={this.props.selectedDirentList}\n              onItemsMove={this.props.onItemsMove}\n              onCancelMove={this.onMoveToggle}\n            />\n          }\n          {this.state.isCopyDialogShow &&\n            <CopyDirentDialog\n              path={this.props.path}\n              repoID={this.props.repoID}\n              repoEncrypted={this.props.currentRepoInfo.encrypted}\n              selectedDirentList={this.props.selectedDirentList}\n              isMutipleOperation={this.state.isMutipleOperation}\n              onItemsCopy={this.props.onItemsCopy}\n              onCancelCopy={this.onCopyToggle}\n            />\n          }\n          {this.state.isProgressDialogShow &&\n            <ZipDownloadDialog\n              repoID={this.props.repoID}\n              path={this.props.path}\n              target={this.state.downloadItems}\n              toggleDialog={this.onCloseZipDownloadDialog}\n            />\n          }\n        </Fragment>\n      </div>\n    );\n  }\n}\n\nDirentListView.propTypes = propTypes;\n\nexport default DirentListView;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport DirentNoneView from '../../components/dirent-list-view/dirent-none-view';\nimport RepoInfoBar from '../../components/repo-info-bar';\nimport DirentListView from '../../components/dirent-list-view/dirent-list-view';\n\nconst propTypes = {\n  path: PropTypes.string.isRequired,\n  repoID: PropTypes.string.isRequired,\n  currentRepoInfo: PropTypes.object.isRequired,\n  isGroupOwnedRepo: PropTypes.bool.isRequired,\n  userPerm: PropTypes.string,\n  enableDirPrivateShare: PropTypes.bool.isRequired,\n  isRepoInfoBarShow: PropTypes.bool.isRequired,\n  usedRepoTags: PropTypes.array.isRequired,\n  readmeMarkdown: PropTypes.object,\n  draftCounts: PropTypes.number,\n  updateUsedRepoTags: PropTypes.func.isRequired,\n  isDirentListLoading: PropTypes.bool.isRequired,\n  direntList: PropTypes.array.isRequired,\n  sortBy: PropTypes.string.isRequired,\n  sortOrder: PropTypes.string.isRequired,\n  sortItems: PropTypes.func.isRequired,\n  onAddFolder: PropTypes.func.isRequired,\n  onAddFile: PropTypes.func.isRequired,\n  onItemClick: PropTypes.func.isRequired,\n  onItemSelected: PropTypes.func.isRequired,\n  onItemDelete: PropTypes.func.isRequired,\n  onItemRename: PropTypes.func.isRequired,\n  onItemMove: PropTypes.func.isRequired,\n  onItemCopy: PropTypes.func.isRequired,\n  onDirentClick: PropTypes.func.isRequired,\n  updateDirent: PropTypes.func.isRequired,\n  isAllItemSelected: PropTypes.bool.isRequired,\n  onAllItemSelected: PropTypes.func.isRequired,\n  selectedDirentList: PropTypes.array.isRequired,\n  onItemsMove: PropTypes.func.isRequired,\n  onItemsCopy: PropTypes.func.isRequired,\n  onItemsDelete: PropTypes.func.isRequired,\n  onFileTagChanged: PropTypes.func,\n  showDirentDetail: PropTypes.func.isRequired,\n  loadDirentList: PropTypes.func,\n};\n\nclass DirListView extends React.Component {\n\n  render() {\n\n    if (this.props.path === '/' && this.props.direntList.length === 0) {\n      return (\n        <DirentNoneView\n          path={this.props.path}\n          isDirentListLoading={this.props.isDirentListLoading}\n          onAddFile={this.props.onAddFile}\n        />\n      );\n    }\n\n    return (\n      <Fragment>\n        {this.props.isRepoInfoBarShow && (\n          <RepoInfoBar\n            repoID={this.props.repoID}\n            currentPath={this.props.path}\n            readmeMarkdown={this.props.readmeMarkdown}\n            draftCounts={this.props.draftCounts}\n            usedRepoTags={this.props.usedRepoTags}\n            updateUsedRepoTags={this.props.updateUsedRepoTags}\n            onFileTagChanged={this.props.onFileTagChanged}\n          />\n        )}\n        <DirentListView\n          path={this.props.path}\n          currentRepoInfo={this.props.currentRepoInfo}\n          repoID={this.props.repoID}\n          isGroupOwnedRepo={this.props.isGroupOwnedRepo}\n          userPerm={this.props.userPerm}\n          enableDirPrivateShare={this.props.enableDirPrivateShare}\n          direntList={this.props.direntList}\n          fullDirentList={this.props.fullDirentList}\n          sortBy={this.props.sortBy}\n          sortOrder={this.props.sortOrder}\n          sortItems={this.props.sortItems}\n          onItemClick={this.props.onItemClick}\n          onItemSelected={this.props.onItemSelected}\n          onItemDelete={this.props.onItemDelete}\n          onItemRename={this.props.onItemRename}\n          onItemMove={this.props.onItemMove}\n          onItemCopy={this.props.onItemCopy}\n          onDirentClick={this.props.onDirentClick}\n          isDirentListLoading={this.props.isDirentListLoading}\n          updateDirent={this.props.updateDirent}\n          isAllItemSelected={this.props.isAllItemSelected}\n          onAllItemSelected={this.props.onAllItemSelected}\n          selectedDirentList={this.props.selectedDirentList}\n          onItemsMove={this.props.onItemsMove}\n          onItemsCopy={this.props.onItemsCopy}\n          onItemsDelete={this.props.onItemsDelete}\n          onAddFile={this.props.onAddFile}\n          onAddFolder={this.props.onAddFolder}\n          onFileTagChanged={this.props.onFileTagChanged}\n          showDirentDetail={this.props.showDirentDetail}\n          loadDirentList={this.props.loadDirentList}\n        />\n      </Fragment>\n    );\n  }\n}\n\nDirListView.propTypes = propTypes;\n\nexport default DirListView;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport MD5 from 'MD5';\nimport { UncontrolledTooltip } from 'reactstrap';\nimport { gettext, siteRoot, mediaUrl } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\n\nconst propTypes = {\n  path: PropTypes.string.isRequired,\n  repoID: PropTypes.string.isRequired,\n  dirent: PropTypes.object.isRequired,\n  onItemClick: PropTypes.func.isRequired,\n  showImagePopup: PropTypes.func.isRequired,\n  onGridItemContextMenu: PropTypes.func.isRequired,\n  onGridItemClick: PropTypes.func.isRequired,\n  activeDirent: PropTypes.object,\n  onGridItemMouseDown: PropTypes.func,\n  currentRepoInfo: PropTypes.object,\n  onItemMove: PropTypes.func.isRequired,\n};\n\nclass DirentGridItem extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isGridSelected: false,\n      isGridDropTipShow: false,\n    };\n\n    const { dirent } = this.props;\n    const { isCustomPermission, customPermission } = Utils.getUserPermission(dirent.permission);\n    this.isCustomPermission = isCustomPermission;\n    this.customPermission = customPermission;\n    this.canPreview = true;\n    this.canDrag = dirent.permission === 'rw';\n    if (isCustomPermission) {\n      const { preview, modify } = customPermission.permission;\n      this.canPreview = preview || modify;\n      this.canDrag = modify;\n    }\n\n  }\n\n  componentWillReceiveProps(nextProps) {\n    this.setState({isGridSelected: false}, () => {\n      if (nextProps.activeDirent && nextProps.activeDirent.name === nextProps.dirent.name) {\n        this.setState({isGridSelected: true});\n      }\n    });\n  }\n\n  onItemMove = (destRepo, dirent, selectedPath, currentPath) => {\n    this.props.onItemMove(destRepo, dirent, selectedPath, currentPath);\n  }\n\n  onItemClick = (e) => {\n    e.preventDefault();\n    e.stopPropagation();\n\n    const { dirent, activeDirent } = this.props;\n    if (dirent.isDir()) {\n      this.props.onItemClick(dirent);\n      return;\n    }\n\n    // is have preview permission\n    if (!this.canPreview) {\n      return;\n    }\n\n    if (dirent === activeDirent) {\n      this.setState({isGridSelected: false});\n      if (Utils.imageCheck(dirent.name)) {\n        this.props.showImagePopup(dirent);\n      } else {\n        this.props.onItemClick(dirent);\n      }\n    } else {\n      this.setState({isGridSelected: false});\n      this.props.onGridItemClick(this.props.dirent);\n    }\n  }\n\n  onItemLinkClick = (e) => {\n    e.preventDefault();\n    const dirent = this.props.dirent;\n\n    if (dirent.isDir()) {\n      this.props.onItemClick(dirent);\n      return;\n    }\n\n    // is have preview permission\n    if (!this.canPreview) {\n      return;\n    }\n\n    if (Utils.imageCheck(dirent.name)) {\n      this.props.showImagePopup(dirent);\n    } else {\n      this.props.onItemClick(dirent);\n    }\n  }\n\n  onGridItemDragStart = (e) => {\n    if (Utils.isIEBrower() || !this.canDrag) {\n      return false;\n    }\n    let dragStartItemData = {nodeDirent: this.props.dirent, nodeParentPath: this.props.path};\n    dragStartItemData = JSON.stringify(dragStartItemData);\n\n    e.dataTransfer.effectAllowed = 'move';\n    e.dataTransfer.setData('applicaiton/drag-item-info', dragStartItemData);\n  }\n\n  onGridItemDragEnter = (e) => {\n    if (Utils.isIEBrower() || !this.canDrag) {\n      return false;\n    }\n    if (this.props.dirent.type === 'dir') {\n      this.setState({isGridDropTipShow: true});\n    }\n  }\n\n  onGridItemDragOver = (e) => {\n    if (Utils.isIEBrower() || !this.canDrag) {\n      return false;\n    }\n    e.preventDefault();\n    e.dataTransfer.dropEffect = 'move';\n  }\n\n  onGridItemDragLeave = (e) => {\n    if (Utils.isIEBrower() || !this.canDrag) {\n      return false;\n    }\n    this.setState({isGridDropTipShow: false});\n  }\n\n  onGridItemDragDrop = (e) => {\n    if (Utils.isIEBrower() || !this.canDrag) {\n      return false;\n    }\n    this.setState({isGridDropTipShow: false});\n    if (e.dataTransfer.files.length) { // uploaded files\n      return;\n    }\n    let dragStartItemData = e.dataTransfer.getData('applicaiton/drag-item-info');\n    dragStartItemData = JSON.parse(dragStartItemData);\n    let {nodeDirent, nodeParentPath} = dragStartItemData;\n    let dropItemData = this.props.dirent;\n\n    if (nodeDirent.name === dropItemData.name) {\n      return;\n    }\n\n    if (dropItemData.type !== 'dir') {\n      return;\n    }\n\n    let selectedPath = Utils.joinPath(this.props.path, this.props.dirent.name);\n    this.onItemMove(this.props.currentRepoInfo, nodeDirent, selectedPath, nodeParentPath);\n  }\n\n  onGridItemMouseDown = (event) =>{\n    this.props.onGridItemMouseDown(event);\n  }\n\n  getFileUrl = (url) => {\n    let fileUrlArr = url.split('/');\n    if (fileUrlArr.indexOf('48') !== -1) {\n      fileUrlArr.splice(fileUrlArr.indexOf('48'), 1, '192');\n    }\n    let fileUrl = fileUrlArr.join('/');\n    return fileUrl;\n  }\n\n  onGridItemContextMenu = (event) => {\n    let dirent = this.props.dirent;\n    this.props.onGridItemContextMenu(event, dirent);\n  }\n\n  render() {\n    let { dirent, path } = this.props;\n    let direntPath = Utils.joinPath(path, dirent.name);\n    let iconUrl = Utils.getDirentIcon(dirent, true);\n    let fileUrl = dirent.encoded_thumbnail_src ? this.getFileUrl(dirent.encoded_thumbnail_src) : '';\n\n    let toolTipID = '';\n    let tagTitle = '';\n    if (dirent.file_tags && dirent.file_tags.length > 0) {\n      toolTipID = MD5(dirent.name).slice(0, 7);\n      tagTitle = dirent.file_tags.map(item => item.name).join(' ');\n    }\n\n    let dirHref = '';\n    if (this.props.currentRepoInfo) {\n      dirHref = siteRoot + 'library/' + this.props.repoID + '/' + this.props.currentRepoInfo.repo_name + Utils.encodePath(direntPath);\n    }\n    let fileHref = siteRoot + 'lib/' + this.props.repoID + '/file' + Utils.encodePath(direntPath);\n    if (dirent.is_sdoc_revision && dirent.revision_id) {\n      fileHref = siteRoot + 'lib/' + this.props.repoID + '/revisions/' + dirent.revision_id + '/';\n    }\n\n    let gridClass = 'grid-file-img-link cursor-pointer';\n    gridClass += this.state.isGridSelected ? ' grid-selected-active' : ' ';\n    gridClass += this.state.isGridDropTipShow ? ' grid-drop-show' : ' ';\n\n    let lockedInfo = gettext('locked by {name}');\n    lockedInfo = lockedInfo.replace('{name}', dirent.lock_owner_name);\n\n    return (\n      <Fragment>\n        <li className=\"grid-item\" onContextMenu={this.onGridItemContextMenu} onMouseDown={this.onGridItemMouseDown}>\n          <div\n            className={gridClass}\n            draggable={this.canDrag}\n            onClick={this.onItemClick}\n            onDragStart={this.onGridItemDragStart}\n            onDragEnter={this.onGridItemDragEnter}\n            onDragOver={this.onGridItemDragOver}\n            onDragLeave={this.onGridItemDragLeave}\n            onDrop={this.onGridItemDragDrop}\n          >\n            {(this.canPreview && dirent.encoded_thumbnail_src) ?\n              <img src={`${siteRoot}${fileUrl}`} ref={this.gridIcon} className=\"thumbnail\" onClick={this.onItemClick} alt=\"\"/> :\n              <img src={iconUrl} ref={this.gridIcon} width=\"96\" alt='' />\n            }\n            {dirent.is_locked && <img className=\"grid-file-locked-icon\" src={mediaUrl + 'img/file-locked-32.png'} alt={gettext('locked')} title={lockedInfo}/>}\n          </div>\n          <div className=\"grid-file-name\" onDragStart={this.onGridItemDragStart} draggable={this.canDrag} >\n            {(dirent.type !== 'dir' && dirent.file_tags && dirent.file_tags.length > 0) && (\n              <Fragment>\n                <div id={`tag-list-title-${toolTipID}`} className=\"dirent-item tag-list tag-list-stacked d-inline-block align-middle\">\n                  {dirent.file_tags.map((fileTag, index) => {\n                    let length = dirent.file_tags.length;\n                    return (\n                      <span className=\"file-tag\" key={fileTag.id} style={{zIndex:length - index, backgroundColor:fileTag.color}}></span>\n                    );\n                  })}\n                </div>\n                <UncontrolledTooltip target={`tag-list-title-${toolTipID}`} placement=\"bottom\">\n                  {tagTitle}\n                </UncontrolledTooltip>\n              </Fragment>\n            )}\n            {(!dirent.isDir() && !this.canPreview) ? \n              <a className={`sf-link grid-file-name-link ${this.state.isGridSelected ? 'grid-link-selected-active' : ''}`} onClick={this.onItemLinkClick}>{dirent.name}</a> :\n              <a className={`grid-file-name-link ${this.state.isGridSelected ? 'grid-link-selected-active' : ''}`} href={dirent.type === 'dir' ? dirHref : fileHref} onClick={this.onItemLinkClick}>{dirent.name}</a>\n            }\n          </div>\n        </li>\n      </Fragment>\n    );\n  }\n}\n\nDirentGridItem.propTypes = propTypes;\nexport default DirentGridItem;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { siteRoot, thumbnailSizeForOriginal, username } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport URLDecorator from '../../utils/url-decorator';\nimport Loading from '../loading';\nimport ModalPortal from '../modal-portal';\nimport ImageDialog from '../../components/dialog/image-dialog';\nimport DirentGridItem from '../../components/dirent-grid-view/dirent-grid-item';\nimport ContextMenu from '../context-menu/context-menu';\nimport { hideMenu, showMenu } from '../context-menu/actions';\nimport TextTranslation from '../../utils/text-translation';\nimport MoveDirentDialog from '../dialog/move-dirent-dialog';\nimport CopyDirentDialog from '../dialog/copy-dirent-dialog';\nimport ShareDialog from '../dialog/share-dialog';\nimport ZipDownloadDialog from '../dialog/zip-download-dialog';\nimport EditFileTagDialog from '../dialog/edit-filetag-dialog';\nimport Rename from '../../components/dialog/rename-dirent';\nimport CreateFile from '../dialog/create-file-dialog';\nimport CreateFolder from '../dialog/create-folder-dialog';\nimport LibSubFolderPermissionDialog from '../dialog/lib-sub-folder-permission-dialog';\nimport toaster from '../toast';\n\nimport '../../css/grid-view.css';\n\nconst propTypes = {\n  path: PropTypes.string.isRequired,\n  repoID: PropTypes.string.isRequired,\n  currentRepoInfo: PropTypes.object,\n  direntList: PropTypes.array.isRequired,\n  fullDirentList: PropTypes.array,\n  onAddFile: PropTypes.func,\n  onItemDelete: PropTypes.func,\n  onItemCopy: PropTypes.func.isRequired,\n  onItemMove: PropTypes.func.isRequired,\n  onRenameNode: PropTypes.func.isRequired,\n  onItemClick: PropTypes.func.isRequired,\n  isDirentListLoading: PropTypes.bool.isRequired,\n  isGroupOwnedRepo: PropTypes.bool.isRequired,\n  userPerm: PropTypes.string, // current path's user permission\n  enableDirPrivateShare: PropTypes.bool.isRequired,\n  updateDirent: PropTypes.func.isRequired,\n  isDirentDetailShow: PropTypes.bool.isRequired,\n  onGridItemClick: PropTypes.func,\n  onFileTagChanged: PropTypes.func,\n  onAddFolder: PropTypes.func.isRequired,\n  showDirentDetail: PropTypes.func.isRequired,\n  onItemRename: PropTypes.func.isRequired,\n};\n\nclass DirentGridView extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      isImagePopupOpen: false,\n      imageItems: [],\n      imageIndex: 0,\n      // onmenuClick\n      isShareDialogShow: false,\n      isMoveDialogShow: false,\n      isCopyDialogShow: false,\n      isEditFileTagShow: false,\n      isZipDialogOpen: false,\n      isRenameDialogShow: false,\n      isCreateFolderDialogShow: false,\n      isCreateFileDialogShow: false,\n      isPermissionDialogOpen: false,\n\n      isMutipleOperation: false,\n      isGridItemFreezed: false,\n      activeDirent: null,\n    };\n    this.isRepoOwner = props.currentRepoInfo.owner_email === username;\n  }\n\n  onCreateFileToggle = () => {\n    this.setState({\n      isCreateFileDialogShow: !this.state.isCreateFileDialogShow,\n    });\n  }\n\n  onGridItemClick = (dirent) => {\n    hideMenu();\n    this.setState({activeDirent: dirent});\n    this.props.onGridItemClick(dirent);\n  }\n\n  onMoveToggle = () => {\n    this.setState({isMoveDialogShow: !this.state.isMoveDialogShow});\n  }\n\n  onCopyToggle = () => {\n    this.setState({isCopyDialogShow: !this.state.isCopyDialogShow});\n  }\n\n  onAddFolder = (dirPath) => {\n    this.setState({isCreateFolderDialogShow: false});\n    this.props.onAddFolder(dirPath);\n  }\n\n  onItemShare = (e) => {\n    e.nativeEvent.stopImmediatePropagation(); //for document event\n    this.setState({isShareDialogShow: !this.state.isShareDialogShow});\n  }\n\n  closeSharedDialog = () => {\n    this.setState({isShareDialogShow: !this.state.isShareDialogShow});\n  }\n\n  onItemDelete = (currentObject, e) => {\n    e.nativeEvent.stopImmediatePropagation(); //for document event\n    this.props.onItemDelete(currentObject);\n  }\n\n  onMenuItemClick = (operation, currentObject, event) => {\n    hideMenu();\n    switch(operation) {\n      case 'Download':\n        this.onItemDownload(currentObject, event);\n        break;\n      case 'Share':\n        this.onItemShare(event);\n        break;\n      case 'Delete':\n        this.onItemDelete(currentObject, event);\n        break;\n      case 'Rename':\n        this.onItemRenameToggle();\n        break;\n      case 'Move':\n        this.onItemMoveToggle();\n        break;\n      case 'Copy':\n        this.onItemCopyToggle();\n        break;\n      case 'Tags':\n        this.onEditFileTagToggle();\n        break;\n      case 'Permission':\n        this.onPermissionItem();\n        break;\n      case 'Unlock':\n        this.onUnlockItem(currentObject);\n        break;\n      case 'Lock':\n        this.onLockItem(currentObject);\n        break;\n      case 'Mark as draft':\n        this.onMarkAsDraft(currentObject);\n        break;\n      case 'Unmark as draft':\n        this.onUnmarkAsDraft(currentObject);\n        break;\n      case 'Comment':\n        this.onCommentItem();\n        break;\n      case 'History':\n        this.onHistory(currentObject);\n        break;\n      case 'New Folder':\n        this.onCreateFolderToggle(currentObject);\n        break;\n      case 'New File':\n        this.onCreateFileToggle();\n        break;\n      case 'Access Log':\n        this.onAccessLog(currentObject);\n        break;\n      case 'Properties':\n        this.props.showDirentDetail('info');\n        break;\n      case 'Open via Client':\n        this.onOpenViaClient(currentObject);\n        break;\n      default:\n        break;\n    }\n  }\n\n  onEditFileTagToggle = () => {\n    this.setState({\n      isEditFileTagShow: !this.state.isEditFileTagShow\n    });\n  }\n\n  onFileTagChanged = () => {\n    let dirent = this.state.activeDirent ? this.state.activeDirent : '';\n    let direntPath = Utils.joinPath(this.props.path, dirent.name);\n    this.props.onFileTagChanged(dirent, direntPath);\n  }\n\n  getDirentPath = (dirent) => {\n    let path = this.props.path;\n    return path === '/' ? path + dirent.name : path + '/' + dirent.name;\n  }\n\n  closeZipDialog = () => {\n    this.setState({\n      isZipDialogOpen: false\n    });\n  }\n\n  onItemDownload = (currentObject, e) => {\n    e.nativeEvent.stopImmediatePropagation();\n    let dirent = currentObject;\n    let repoID = this.props.repoID;\n    let direntPath = this.getDirentPath(dirent);\n    if (dirent.type === 'dir') {\n      this.setState({\n        isZipDialogOpen: true\n      });\n    } else {\n      let url = URLDecorator.getUrl({type: 'download_file_url', repoID: repoID, filePath: direntPath});\n      location.href = url;\n    }\n  }\n\n  onCreateFolderToggle = () => {\n    this.setState({\n      isCreateFolderDialogShow: !this.state.isCreateFolderDialogShow,\n    });\n  }\n\n  onItemRenameToggle = () => {\n    this.setState({\n      isRenameDialogShow: !this.state.isRenameDialogShow,\n    });\n  }\n\n  onItemMoveToggle = () => {\n    this.setState({isMoveDialogShow: !this.state.isMoveDialogShow});\n  }\n\n  onItemCopyToggle = () => {\n    this.setState({isCopyDialogShow: !this.state.isCopyDialogShow});\n  }\n\n  onPermissionItem = () => {\n    this.setState({isPermissionDialogOpen: !this.state.isPermissionDialogOpen});\n  }\n\n  onLockItem = (currentObject) => {\n    let repoID = this.props.repoID;\n    let filePath = this.getDirentPath(currentObject);\n    seafileAPI.lockfile(repoID, filePath).then(() => {\n      this.props.updateDirent(currentObject, 'is_locked', true);\n      this.props.updateDirent(currentObject, 'locked_by_me', true);\n      let lockName = username.split('@');\n      this.props.updateDirent(currentObject, 'lock_owner_name', lockName[0]);\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  onUnlockItem = (currentObject) => {\n    let repoID = this.props.repoID;\n    let filePath = this.getDirentPath(currentObject);\n    seafileAPI.unlockfile(repoID, filePath).then(() => {\n      this.props.updateDirent(currentObject, 'is_locked', false);\n      this.props.updateDirent(currentObject, 'locked_by_me', false);\n      this.props.updateDirent(currentObject, 'lock_owner_name', '');\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  onMarkAsDraft = (currentObject) => {\n    let repoID = this.props.repoID;\n    let filePath = this.getDirentPath(currentObject);\n    seafileAPI.sdocMarkAsDraft(repoID, filePath).then((res) => {\n      this.props.updateDirent(currentObject, 'is_sdoc_draft', true);\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  onUnmarkAsDraft = (currentObject) => {\n    let repoID = this.props.repoID;\n    let filePath = this.getDirentPath(currentObject);\n    seafileAPI.sdocUnmarkAsDraft(repoID, filePath).then((res) => {\n      this.props.updateDirent(currentObject, 'is_sdoc_draft', false);\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  onCommentItem = () => {\n    this.props.showDirentDetail('comments');\n  }\n\n  onHistory = (currentObject) => {\n    let repoID = this.props.repoID;\n    let filePath = this.getDirentPath(currentObject);\n    let url = URLDecorator.getUrl({type: 'file_revisions', repoID: repoID, filePath: filePath});\n    location.href = url;\n  }\n\n  onAccessLog = (currentObject) => {\n    let filePath = this.getDirentPath(currentObject);\n    let path = siteRoot + 'repo/file-access/' + this.props.repoID + '/?p=' + encodeURIComponent(filePath) ;\n    window.open(path);\n  }\n\n  onOpenViaClient = (currentObject) => {\n    let repoID = this.props.repoID;\n    let filePath = this.getDirentPath(currentObject);\n    let url = URLDecorator.getUrl({type: 'open_via_client', repoID: repoID, filePath: filePath});\n    location.href = url;\n  }\n\n  onItemRename = (newName) => {\n    this.props.onItemRename(this.state.activeDirent, newName);\n  }\n\n  prepareImageItem = (item) => {\n    const useThumbnail = !this.repoEncrypted;\n    const name = item.name;\n\n    const fileExt = name.substr(name.lastIndexOf('.') + 1).toLowerCase();\n    const isGIF = fileExt == 'gif';\n\n    const path = Utils.encodePath(Utils.joinPath(this.props.path, name));\n    const repoID = this.props.repoID;\n    let src;\n    if (useThumbnail && !isGIF) {\n      src = `${siteRoot}thumbnail/${repoID}/${thumbnailSizeForOriginal}${path}`;\n    } else {\n      src = `${siteRoot}repo/${repoID}/raw${path}`;\n    }\n\n    return {\n      'name': name,\n      'url': `${siteRoot}lib/${repoID}/file${path}`,\n      'src': src\n    };\n  }\n\n  showImagePopup = (curItem) => {\n    let items = this.props.fullDirentList.filter((item) => {\n      return Utils.imageCheck(item.name);\n    });\n\n    const imageItems = items.map((item) => {\n      return this.prepareImageItem(item);\n    });\n\n    this.setState({\n      isImagePopupOpen: true,\n      imageItems: imageItems,\n      imageIndex: items.indexOf(curItem)\n    });\n  }\n\n  closeImagePopup = () => {\n    this.setState({isImagePopupOpen: false});\n  }\n\n  moveToPrevImage = () => {\n    const imageItemsLength = this.state.imageItems.length;\n    this.setState((prevState) => ({\n      imageIndex: (prevState.imageIndex + imageItemsLength - 1) % imageItemsLength\n    }));\n  }\n\n  moveToNextImage = () => {\n    const imageItemsLength = this.state.imageItems.length;\n    this.setState((prevState) => ({\n      imageIndex: (prevState.imageIndex + 1) % imageItemsLength\n    }));\n  }\n\n  checkDuplicatedName = (newName) => {\n    return Utils.checkDuplicatedNameInList(this.props.direntList, newName);\n  }\n\n  // common contextmenu handle\n  onMouseDown = (event) => {\n    event.stopPropagation();\n    if (event.button === 2) {\n      return;\n    }\n  }\n\n  onGridContainerMouseDown = (event) => {\n    this.onMouseDown(event);\n  }\n\n  onGridItemMouseDown = (event) => {\n    this.onMouseDown(event);\n  }\n\n  gridContainerClick = () => {\n    hideMenu();\n    if (!this.props.isDirentDetailShow) {\n      this.onGridItemClick(null);\n    }\n  }\n\n  onGridContainerContextMenu = (event) => {\n    event.preventDefault();\n    // Display menu items based on the permissions of the current path\n    let permission = this.props.userPerm;\n    if (permission !== 'admin' && permission !== 'rw') {\n      return;\n    }\n    let id = 'dirent-grid-container-menu';\n    let menuList = [TextTranslation.NEW_FOLDER, TextTranslation.NEW_FILE];\n    this.handleContextClick(event, id, menuList);\n  }\n\n  onGridItemContextMenu = (event, dirent) => {\n    // Display menu items according to the current dirent permission\n    let id = 'grid-item-contextmenu';\n    let menuList = this.getDirentItemMenuList(dirent, true);\n    this.handleContextClick(event, id, menuList, dirent);\n    this.props.onGridItemClick && this.props.onGridItemClick(dirent);\n  }\n\n  handleContextClick = (event, id, menuList, currentObject = null) => {\n    event.preventDefault();\n    event.stopPropagation();\n\n    let x = event.clientX || (event.touches && event.touches[0].pageX);\n    let y = event.clientY || (event.touches && event.touches[0].pageY);\n\n    if (this.props.posX) {\n      x -= this.props.posX;\n    }\n    if (this.props.posY) {\n      y -= this.props.posY;\n    }\n\n    hideMenu();\n\n    this.setState({activeDirent: currentObject});\n\n    let showMenuConfig = {\n      id: id,\n      position: { x, y },\n      target: event.target,\n      currentObject: currentObject,\n      menuList: menuList,\n    };\n\n    if (menuList.length === 0) {\n      return;\n    }\n\n    showMenu(showMenuConfig);\n  }\n\n  getDirentItemMenuList = (dirent, isContextmenu) => {\n    const isRepoOwner = this.isRepoOwner;\n    const currentRepoInfo = this.props.currentRepoInfo;\n    return Utils.getDirentOperationList(isRepoOwner, currentRepoInfo, dirent, isContextmenu);\n  }\n\n  render() {\n    let {direntList, path} = this.props;\n    let dirent = this.state.activeDirent ? this.state.activeDirent : '';\n    let direntPath = Utils.joinPath(path, dirent.name);\n\n    if (this.props.isDirentListLoading) {\n      return (<Loading />);\n    }\n\n    return (\n      <Fragment>\n        <ul className=\"grid-view\" onClick={this.gridContainerClick} onContextMenu={this.onGridContainerContextMenu} onMouseDown={this.onGridContainerMouseDown}>\n          {\n            direntList.length !== 0 && direntList.map((dirent, index) => {\n              return (\n                <DirentGridItem\n                  key={index}\n                  dirent={dirent}\n                  repoID={this.props.repoID}\n                  path={this.props.path}\n                  onItemClick={this.props.onItemClick}\n                  currentRepoInfo={this.props.currentRepoInfo}\n                  showImagePopup={this.showImagePopup}\n                  onGridItemContextMenu={this.onGridItemContextMenu}\n                  onItemMove={this.props.onItemMove}\n                  onGridItemMouseDown={this.onGridItemMouseDown}\n                  onGridItemClick={this.onGridItemClick}\n                  activeDirent={this.state.activeDirent}\n                />\n              );\n            })\n          }\n        </ul>\n        <ContextMenu\n          id={'grid-item-contextmenu'}\n          onMenuItemClick={this.onMenuItemClick}\n        />\n        <ContextMenu\n          id={'dirent-grid-container-menu'}\n          onMenuItemClick={this.onMenuItemClick}\n        />\n        {this.state.isCreateFolderDialogShow && (\n          <ModalPortal>\n            <CreateFolder\n              parentPath={this.props.path}\n              onAddFolder={this.onAddFolder}\n              checkDuplicatedName={this.checkDuplicatedName}\n              addFolderCancel={this.onCreateFolderToggle}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isCreateFileDialogShow && (\n          <ModalPortal>\n            <CreateFile\n              parentPath={this.props.path}\n              onAddFile={this.props.onAddFile}\n              checkDuplicatedName={this.checkDuplicatedName}\n              toggleDialog={this.onCreateFileToggle}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isMoveDialogShow &&\n          <MoveDirentDialog\n            path={this.props.path}\n            repoID={this.props.repoID}\n            repoEncrypted={this.props.currentRepoInfo.encrypted}\n            isMutipleOperation={this.state.isMutipleOperation}\n            onItemMove={this.props.onItemMove}\n            onCancelMove={this.onMoveToggle}\n            dirent={this.state.activeDirent}\n          />\n        }\n        {this.state.isZipDialogOpen &&\n          <ModalPortal>\n            <ZipDownloadDialog\n              repoID={this.props.repoID}\n              path={this.props.path}\n              target={dirent.name}\n              toggleDialog={this.closeZipDialog}\n            />\n          </ModalPortal>\n        }\n        {this.state.isCopyDialogShow &&\n          <CopyDirentDialog\n            path={this.props.path}\n            repoID={this.props.repoID}\n            repoEncrypted={this.props.currentRepoInfo.encrypted}\n            isMutipleOperation={this.state.isMutipleOperation}\n            onItemCopy={this.props.onItemCopy}\n            onCancelCopy={this.onCopyToggle}\n            dirent={this.state.activeDirent}\n          />\n        }\n        {this.state.isEditFileTagShow &&\n          <EditFileTagDialog\n            repoID={this.props.repoID}\n            fileTagList={dirent.file_tags}\n            filePath={direntPath}\n            toggleCancel={this.onEditFileTagToggle}\n            onFileTagChanged={this.onFileTagChanged}\n          />\n        }\n        {this.state.isShareDialogShow &&\n          <ModalPortal>\n            <ShareDialog\n              itemType={dirent.type}\n              itemName={dirent.name}\n              itemPath={direntPath}\n              userPerm={dirent.permission}\n              repoID={this.props.repoID}\n              repoEncrypted={false}\n              enableDirPrivateShare={this.props.enableDirPrivateShare}\n              isGroupOwnedRepo={this.props.isGroupOwnedRepo}\n              toggleDialog={this.closeSharedDialog}\n            />\n          </ModalPortal>\n        }\n        {this.state.isRenameDialogShow && (\n          <ModalPortal>\n            <Rename\n              dirent={this.state.activeDirent}\n              onRename={this.onItemRename}\n              checkDuplicatedName={this.checkDuplicatedName}\n              toggleCancel={this.onItemRenameToggle}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isPermissionDialogOpen &&\n          <ModalPortal>\n            <LibSubFolderPermissionDialog\n              toggleDialog={this.onPermissionItem}\n              repoID={this.props.repoID}\n              folderPath={direntPath}\n              folderName={dirent.name}\n              isDepartmentRepo={this.props.isGroupOwnedRepo}\n            />\n          </ModalPortal>\n        }\n        {this.state.isImagePopupOpen && (\n          <ModalPortal>\n            <ImageDialog\n              imageItems={this.state.imageItems}\n              imageIndex={this.state.imageIndex}\n              closeImagePopup={this.closeImagePopup}\n              moveToPrevImage={this.moveToPrevImage}\n              moveToNextImage={this.moveToNextImage}\n            />\n          </ModalPortal>\n        )}\n      </Fragment>\n    );\n  }\n}\n\nDirentGridView.propTypes = propTypes;\n\nexport default DirentGridView;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport RepoInfoBar from '../../components/repo-info-bar';\nimport DirentGridView from '../../components/dirent-grid-view/dirent-grid-view';\nimport DirentNoneView from '../../components/dirent-list-view/dirent-none-view';\n\nconst propTypes = {\n  path: PropTypes.string.isRequired,\n  repoID: PropTypes.string.isRequired,\n  currentRepoInfo: PropTypes.object.isRequired,\n  readmeMarkdown: PropTypes.object,\n  draftCounts: PropTypes.number,\n  usedRepoTags: PropTypes.array.isRequired,\n  updateUsedRepoTags: PropTypes.func.isRequired,\n  direntList: PropTypes.array.isRequired,\n  onItemClick: PropTypes.func.isRequired,\n  onGridItemClick: PropTypes.func,\n  onAddFile: PropTypes.func.isRequired,\n  onItemDelete: PropTypes.func.isRequired,\n  onItemMove: PropTypes.func.isRequired,\n  onItemCopy: PropTypes.func.isRequired,\n  onRenameNode: PropTypes.func.isRequired,\n  isGroupOwnedRepo: PropTypes.bool.isRequired,\n  userPerm: PropTypes.string,\n  isRepoInfoBarShow: PropTypes.bool.isRequired,\n  isDirentListLoading: PropTypes.bool.isRequired,\n  isDirentDetailShow: PropTypes.bool.isRequired,\n  enableDirPrivateShare: PropTypes.bool.isRequired,\n  updateDirent: PropTypes.func.isRequired,\n  showDirentDetail: PropTypes.func.isRequired,\n  onAddFolder: PropTypes.func.isRequired,\n  onFileTagChanged: PropTypes.func,\n  onItemRename: PropTypes.func.isRequired,\n};\n\nclass DirGridView extends React.Component {\n\n  render() {\n    if (this.props.path === '/' && this.props.direntList.length === 0) {\n      return (\n        <DirentNoneView\n          path={this.props.path}\n          isDirentListLoading={this.props.isDirentListLoading}\n          onAddFile={this.props.onAddFile}\n        />\n      );\n    }\n    return (\n      <Fragment>\n        {this.props.isRepoInfoBarShow && (\n          <RepoInfoBar\n            repoID={this.props.repoID}\n            currentPath={this.props.path}\n            readmeMarkdown={this.props.readmeMarkdown}\n            draftCounts={this.props.draftCounts}\n            usedRepoTags={this.props.usedRepoTags}\n            updateUsedRepoTags={this.props.updateUsedRepoTags}\n            onFileTagChanged={this.props.onFileTagChanged}\n          />\n        )}\n        <DirentGridView\n          path={this.props.path}\n          repoID={this.props.repoID}\n          currentRepoInfo={this.props.currentRepoInfo}\n          isGroupOwnedRepo={this.props.isGroupOwnedRepo}\n          userPerm={this.props.userPerm}\n          enableDirPrivateShare={this.props.enableDirPrivateShare}\n          direntList={this.props.direntList}\n          fullDirentList={this.props.fullDirentList}\n          onAddFile={this.props.onAddFile}\n          onItemClick={this.props.onItemClick}\n          onItemDelete={this.props.onItemDelete}\n          onItemMove={this.props.onItemMove}\n          onItemCopy={this.props.onItemCopy}\n          isDirentListLoading={this.props.isDirentListLoading}\n          updateDirent={this.props.updateDirent}\n          onRenameNode={this.props.onRenameNode}\n          showDirentDetail={this.props.showDirentDetail}\n          onGridItemClick={this.props.onGridItemClick}\n          isDirentDetailShow={this.props.isDirentDetailShow}\n          onItemRename={this.props.onItemRename}\n          onAddFolder={this.props.onAddFolder}\n          onFileTagChanged={this.props.onFileTagChanged}\n        />\n      </Fragment>\n    );\n  }\n}\n\nDirGridView.propTypes = propTypes;\n\nexport default DirGridView;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport { Button, Modal, ModalHeader, Input, ModalBody, ModalFooter, Alert } from 'reactstrap';\n\nconst propTypes = {\n  currentNode: PropTypes.object,\n  onRename: PropTypes.func.isRequired,\n  toggleCancel: PropTypes.func.isRequired,\n  checkDuplicatedName: PropTypes.func.isRequired,\n};\n\nclass Rename extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      newName: '',\n      errMessage: '',\n      isSubmitBtnActive: false,\n    };\n    this.newInput = React.createRef();\n  }\n\n  componentWillMount() {\n    this.setState({newName: this.props.currentNode.object.name});\n  }\n\n  componentDidMount() {\n    const { currentNode } = this.props;\n    this.changeState(currentNode);\n  }\n\n  componentWillReceiveProps(nextProps) {\n    this.changeState(nextProps.currentNode);\n  }\n\n  handleChange = (e) => {\n    if (!e.target.value.trim()) {\n      this.setState({isSubmitBtnActive: false});\n    } else {\n      this.setState({isSubmitBtnActive: true});\n    }\n\n    this.setState({newName: e.target.value});\n  }\n\n  handleSubmit = () => {\n    let { isValid, errMessage } = this.validateInput();\n    if (!isValid) {\n      this.setState({errMessage : errMessage});\n    } else {\n      let isDuplicated = this.checkDuplicatedName();\n      if (isDuplicated) {\n        let errMessage = gettext('The name \"{name}\" is already taken. Please choose a different name.');\n        errMessage = errMessage.replace('{name}', Utils.HTMLescape(this.state.newName));\n        this.setState({errMessage: errMessage});\n      } else {\n        this.props.onRename(this.state.newName);\n      }\n    }\n  }\n\n  handleKeyPress = (e) => {\n    if (e.key === 'Enter') {\n      this.handleSubmit();\n    }\n  }\n\n  toggle = () => {\n    this.props.toggleCancel();\n  }\n\n  changeState = (currentNode) => {\n    let name = currentNode.object.name;\n    this.setState({newName: name});\n  }\n\n  validateInput = () => {\n    let newName = this.state.newName.trim();\n    let isValid = true;\n    let errMessage = '';\n    if (!newName) {\n      isValid = false;\n      errMessage = gettext('Name is required.');\n      return { isValid, errMessage };\n    }\n\n    if (newName.indexOf('/') > -1) {\n      isValid = false;\n      errMessage = gettext('Name should not include ' + '\\'/\\'' + '.');\n      return { isValid, errMessage };\n    }\n\n    return { isValid, errMessage };\n  }\n\n  checkDuplicatedName = () => {\n    let isDuplicated = this.props.checkDuplicatedName(this.state.newName);\n    return isDuplicated;\n  }\n\n  onAfterModelOpened = () => {\n    if (!this.newInput.current) return;\n    const { currentNode } = this.props;\n    let type = currentNode.object.type;\n    this.newInput.current.focus();\n    if (type === 'file') {\n      var endIndex = currentNode.object.name.lastIndexOf('.md');\n      this.newInput.current.setSelectionRange(0, endIndex, 'forward');\n    } else {\n      this.newInput.current.setSelectionRange(0, -1);\n    }\n  }\n\n  render() {\n    let type = this.props.currentNode.object.type;\n    return (\n      <Modal isOpen={true} toggle={this.toggle} onOpened={this.onAfterModelOpened}>\n        <ModalHeader toggle={this.toggle}>{type === 'file' ? gettext('Rename File') : gettext('Rename Folder') }</ModalHeader>\n        <ModalBody>\n          <p>{type === 'file' ? gettext('New file name'): gettext('New folder name')}</p>\n          <Input onKeyPress={this.handleKeyPress} innerRef={this.newInput} placeholder=\"newName\" value={this.state.newName} onChange={this.handleChange} />\n          {this.state.errMessage && <Alert color=\"danger\" className=\"mt-2\">{this.state.errMessage}</Alert>}\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.toggle}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.handleSubmit} disabled={!this.state.isSubmitBtnActive}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nRename.propTypes = propTypes;\n\nexport default Rename;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport TreeView from '../../components/tree-view/tree-view';\nimport Loading from '../../components/loading';\nimport ModalPortal from '../../components/modal-portal';\nimport Rename from '../../components/dialog/rename-dialog';\nimport Copy from '../../components/dialog/copy-dirent-dialog';\nimport Move from '../../components/dialog/move-dirent-dialog';\nimport CreateFolder from '../../components/dialog/create-folder-dialog';\nimport CreateFile from '../../components/dialog/create-file-dialog';\nimport ImageDialog from '../../components/dialog/image-dialog';\nimport { siteRoot, thumbnailSizeForOriginal } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\n\nconst propTypes = {\n  currentPath: PropTypes.string.isRequired,\n  userPerm: PropTypes.string.isRequired,\n  isTreeDataLoading: PropTypes.bool.isRequired,\n  treeData: PropTypes.object.isRequired,\n  currentNode: PropTypes.object,\n  onNodeClick: PropTypes.func.isRequired,\n  onNodeCollapse: PropTypes.func.isRequired,\n  onNodeExpanded: PropTypes.func.isRequired,\n  onRenameNode: PropTypes.func.isRequired,\n  onDeleteNode: PropTypes.func.isRequired,\n  onAddFileNode: PropTypes.func.isRequired,\n  onAddFolderNode: PropTypes.func.isRequired,\n  repoID: PropTypes.string.isRequired,\n  navRate: PropTypes.number,\n  inResizing: PropTypes.bool.isRequired,\n  currentRepoInfo: PropTypes.object.isRequired,\n  onItemMove: PropTypes.func.isRequired,\n  onItemCopy: PropTypes.func.isRequired,\n  selectedDirentList: PropTypes.array.isRequired,\n  onItemsMove: PropTypes.func.isRequired,\n};\n\nclass DirColumnNav extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      opNode: null,\n      isAddFileDialogShow: false,\n      isAddFolderDialogShow: false,\n      isRenameDialogShow: false,\n      isNodeImagePopupOpen: false,\n      imageNodeItems: [],\n      imageIndex: 0,\n      isCopyDialogShow: false,\n      isMoveDialogShow: false,\n      isMutipleOperation: false,\n    };\n    this.isNodeMenuShow = true;\n  }\n\n  componentWillReceiveProps(nextProps) {\n    this.setState({opNode: nextProps.currentNode});\n  }\n\n  onNodeClick = (node) => {\n    this.setState({opNode: node});\n    if (Utils.imageCheck(node.object.name)) {\n      this.showNodeImagePopup(node);\n      return;\n    }\n    this.props.onNodeClick(node);\n  }\n\n  onMenuItemClick = (operation, node) => {\n    this.setState({opNode: node});\n    switch (operation) {\n      case 'New Folder':\n        if (!node) {\n          this.onAddFolderToggle('root');\n        } else {\n          this.onAddFolderToggle();\n        }\n        break;\n      case 'New File':\n        if (!node) {\n          this.onAddFileToggle('root');\n        } else {\n          this.onAddFileToggle();\n        }\n        break;\n      case 'Rename':\n        this.onRenameToggle();\n        break;\n      case 'Delete':\n        this.onDeleteNode(node);\n        break;\n      case 'Copy':\n        this.onCopyToggle();\n        break;\n      case 'Move':\n        this.onMoveToggle();\n        break;\n      case 'Open in New Tab':\n        this.onOpenFile(node);\n        break;\n    }\n  }\n\n  onAddFileToggle = (type) => {\n    if (type === 'root') {\n      let root = this.props.treeData.root;\n      this.setState({\n        isAddFileDialogShow: !this.state.isAddFileDialogShow,\n        opNode: root,\n      });\n    } else {\n      this.setState({isAddFileDialogShow: !this.state.isAddFileDialogShow});\n    }\n  }\n\n  onAddFolderToggle = (type) => {\n    if (type === 'root') {\n      let root = this.props.treeData.root;\n      this.setState({\n        isAddFolderDialogShow: !this.state.isAddFolderDialogShow,\n        opNode: root,\n      });\n    } else {\n      this.setState({isAddFolderDialogShow: !this.state.isAddFolderDialogShow});\n    }\n  }\n\n  onRenameToggle = () => {\n    this.setState({isRenameDialogShow: !this.state.isRenameDialogShow});\n  }\n\n  onCopyToggle = () => {\n    this.setState({isCopyDialogShow: !this.state.isCopyDialogShow});\n  }\n\n  onMoveToggle = () => {\n    this.setState({isMoveDialogShow: !this.state.isMoveDialogShow});\n  }\n\n  onAddFolderNode = (dirPath) => {\n    this.setState({isAddFolderDialogShow: !this.state.isAddFolderDialogShow});\n    this.props.onAddFolderNode(dirPath);\n  }\n\n  onRenameNode = (newName) => {\n    this.setState({isRenameDialogShow: !this.state.isRenameDialogShow});\n    let node = this.state.opNode;\n    this.props.onRenameNode(node, newName);\n  }\n\n  onDeleteNode = (node) => {\n    this.props.onDeleteNode(node);\n  }\n\n  onOpenFile = (node) => {\n    let newUrl = siteRoot + 'lib/' + this.props.repoID + '/file' + Utils.encodePath(node.path);\n    window.open(newUrl, '_blank');\n  }\n\n  checkDuplicatedName = (newName) => {\n    let node = this.state.opNode;\n    // root node to new node conditions: parentNode is null,\n    let parentNode = node.parentNode ? node.parentNode : node;\n    let childrenObject = parentNode.children.map(item => {\n      return item.object;\n    });\n    let isDuplicated = childrenObject.some(object => {\n      return object.name === newName;\n    });\n    return isDuplicated;\n  }\n\n  showNodeImagePopup = (node) => {\n    let childrenNode = node.parentNode.children;\n    let items = childrenNode.filter((item) => {\n      return Utils.imageCheck(item.object.name);\n    });\n    let imageNames = items.map((item) => {\n      return item.object.name;\n    });\n    this.setState({\n      isNodeImagePopupOpen: true,\n      imageNodeItems: this.prepareImageItems(node),\n      imageIndex: imageNames.indexOf(node.object.name)\n    });\n  }\n\n  prepareImageItems = (node) => {\n    let childrenNode = node.parentNode.children;\n    let items = childrenNode.filter((item) => {\n      return Utils.imageCheck(item.object.name);\n    });\n\n    const useThumbnail = !this.props.currentRepoInfo.encrypted;\n    let prepareItem = (item) => {\n      const name = item.object.name;\n\n      const path = Utils.encodePath(Utils.joinPath(node.parentNode.path, name));\n      const fileExt = name.substr(name.lastIndexOf('.') + 1).toLowerCase();\n      const isGIF = fileExt === 'gif';\n\n      const repoID = this.props.repoID;\n      let src = '';\n      if (useThumbnail && !isGIF) {\n        src = `${siteRoot}thumbnail/${repoID}/${thumbnailSizeForOriginal}${path}`;\n      } else {\n        src = `${siteRoot}repo/${repoID}/raw${path}`;\n      }\n\n      return {\n        'name': name,\n        'url': `${siteRoot}lib/${repoID}/file${path}`,\n        'src': src\n      };\n    };\n\n    return items.map((item) => { return prepareItem(item); });\n  }\n\n  closeNodeImagePopup = () => {\n    this.setState({\n      isNodeImagePopupOpen: false\n    });\n  }\n\n  moveToPrevImage = () => {\n    const imageItemsLength = this.state.imageNodeItems.length;\n    this.setState((prevState) => ({\n      imageIndex: (prevState.imageIndex + imageItemsLength - 1) % imageItemsLength\n    }));\n  }\n\n  moveToNextImage = () => {\n    const imageItemsLength = this.state.imageNodeItems.length;\n    this.setState((prevState) => ({\n      imageIndex: (prevState.imageIndex + 1) % imageItemsLength\n    }));\n  }\n\n  stopTreeScrollPropagation = (e) => {\n    e.stopPropagation();\n  }\n\n  render() {\n    let flex = this.props.navRate ? '0 0 ' + this.props.navRate * 100 + '%' : '0 0 25%';\n    const select = this.props.inResizing ? 'none' : '';\n    return (\n      <Fragment>\n        <div className=\"dir-content-nav\" role=\"navigation\" style={{flex: (flex), userSelect: select}} onScroll={this.stopTreeScrollPropagation}>\n          {this.props.isTreeDataLoading ?\n            (<Loading/>) :\n            (<TreeView\n              userPerm={this.props.userPerm}\n              isNodeMenuShow={this.isNodeMenuShow}\n              treeData={this.props.treeData}\n              currentPath={this.props.currentPath}\n              onNodeClick={this.onNodeClick}\n              onNodeExpanded={this.props.onNodeExpanded}\n              onNodeCollapse={this.props.onNodeCollapse}\n              onMenuItemClick={this.onMenuItemClick}\n              onFreezedItem={this.onFreezedItem}\n              onUnFreezedItem={this.onUnFreezedItem}\n              onItemMove={this.props.onItemMove}\n              currentRepoInfo={this.props.currentRepoInfo}\n              selectedDirentList={this.props.selectedDirentList}\n              onItemsMove={this.props.onItemsMove}\n            />)\n          }\n        </div>\n        {this.state.isAddFolderDialogShow && (\n          <ModalPortal>\n            <CreateFolder\n              parentPath={this.state.opNode.path}\n              onAddFolder={this.onAddFolderNode}\n              checkDuplicatedName={this.checkDuplicatedName}\n              addFolderCancel={this.onAddFolderToggle}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isAddFileDialogShow && (\n          <ModalPortal>\n            <CreateFile\n              parentPath={this.state.opNode.path}\n              onAddFile={this.props.onAddFileNode}\n              checkDuplicatedName={this.checkDuplicatedName}\n              toggleDialog={this.onAddFileToggle}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isRenameDialogShow && (\n          <ModalPortal>\n            <Rename\n              currentNode={this.state.opNode}\n              onRename={this.onRenameNode}\n              checkDuplicatedName={this.checkDuplicatedName}\n              toggleCancel={this.onRenameToggle}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isCopyDialogShow && (\n          <ModalPortal>\n            <Copy\n              path={this.state.opNode.parentNode.path}\n              repoID={this.props.repoID}\n              dirent={this.state.opNode.object}\n              onItemCopy={this.props.onItemCopy}\n              repoEncrypted={this.props.currentRepoInfo.encrypted}\n              onCancelCopy={this.onCopyToggle}\n              isMutipleOperation={this.state.isMutipleOperation}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isMoveDialogShow && (\n          <ModalPortal>\n            <Move\n              path={this.state.opNode.parentNode.path}\n              repoID={this.props.repoID}\n              dirent={this.state.opNode.object}\n              onItemMove={this.props.onItemMove}\n              repoEncrypted={this.props.currentRepoInfo.encrypted}\n              onCancelMove={this.onMoveToggle}\n              isMutipleOperation={this.state.isMutipleOperation}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isNodeImagePopupOpen && (\n          <ModalPortal>\n            <ImageDialog\n              imageItems={this.state.imageNodeItems}\n              imageIndex={this.state.imageIndex}\n              closeImagePopup={this.closeNodeImagePopup}\n              moveToPrevImage={this.moveToPrevImage}\n              moveToNextImage={this.moveToNextImage}\n            />\n          </ModalPortal>\n        )}\n      </Fragment>\n    );\n  }\n}\n\nDirColumnNav.defaultProps={\n  navRate: 0.25\n};\n\nDirColumnNav.propTypes = propTypes;\n\nexport default DirColumnNav;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Utils } from '../../utils/utils';\nimport { gettext, siteRoot } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport toaster from '../toast';\nimport WikiMarkdownViewer from '../wiki-markdown-viewer';\n\nconst propTypes = {\n  path: PropTypes.string.isRequired,\n  repoID: PropTypes.string.isRequired,\n  hash: PropTypes.string,\n  isDraft: PropTypes.bool,\n  hasDraft: PropTypes.bool,\n  goDraftPage: PropTypes.func.isRequired,\n  isFileLoading: PropTypes.bool.isRequired,\n  isFileLoadedErr: PropTypes.bool.isRequired,\n  filePermission: PropTypes.string,\n  content: PropTypes.string,\n  lastModified: PropTypes.string,\n  latestContributor: PropTypes.string,\n  onLinkClick: PropTypes.func.isRequired,\n};\n\nclass DirColumnFile extends React.Component {\n\n  componentDidMount() {\n    if (this.props.hash) {\n      let hash = this.props.hash;\n      setTimeout(function() {\n        window.location.hash = hash;\n      }, 500);\n    }\n  }\n\n  onEditClick = (e) => {\n    e.preventDefault();\n    let { path, repoID } = this.props;\n    let url = siteRoot + 'lib/' + repoID + '/file' + Utils.encodePath(path) + '?mode=edit';\n    window.open(url);\n  }\n\n  onNewDraft = (e) => {\n    e.preventDefault();\n    let { path, repoID } = this.props;\n    seafileAPI.createDraft(repoID, path).then(res => {\n      window.location.href = siteRoot + 'lib/' + res.data.origin_repo_id + '/file' + res.data.draft_file_path + '?mode=edit';\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  onOpenFile = (e) => {\n    e.preventDefault();\n    let { path, repoID } = this.props;\n    let newUrl = siteRoot + 'lib/' + repoID + '/file' + Utils.encodePath(path);\n    window.open(newUrl, '_blank');\n  }\n\n  goDraftPage = (e) => {\n    e.preventDefault();\n    this.props.goDraftPage();\n  }\n\n  render() {\n    if (this.props.isFileLoadedErr) {\n      return (\n        <div className=\"message err-tip\">{gettext('File does not exist.')}</div>\n      );\n    }\n    return (\n      <WikiMarkdownViewer\n        isTOCShow={false}\n        isFileLoading={this.props.isFileLoading}\n        markdownContent={this.props.content}\n        lastModified = {this.props.lastModified}\n        latestContributor={this.props.latestContributor}\n        onLinkClick={this.props.onLinkClick}\n        repoID={this.props.repoID}\n        path={this.props.path}\n      >\n        <Fragment>\n          <span className='wiki-open-file position-fixed' onClick={this.onOpenFile}>\n            <i className=\"fas fa-expand-arrows-alt\"></i>\n          </span>\n          {(!this.props.isDraft && this.props.hasDraft) &&\n            <div className='seafile-btn-view-review text-center mt-2'>\n              <div className='tag tag-green'>\n                {gettext('This file is in draft stage.')}\n                <span className=\"ml-2\" onClick={this.goDraftPage}>{gettext('View Draft')}</span>\n              </div>\n            </div>\n          }\n        </Fragment>\n      </WikiMarkdownViewer>\n    );\n  }\n}\n\nDirColumnFile.propTypes = propTypes;\n\nexport default DirColumnFile;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport DirColumnNav from './dir-column-nav';\nimport DirColumnFile from './dir-column-file';\nimport DirListView from './dir-list-view';\n\nconst propTypes = {\n  path: PropTypes.string.isRequired,\n  repoID: PropTypes.string.isRequired,\n  // repoinfo\n  currentRepoInfo: PropTypes.object.isRequired,\n  enableDirPrivateShare: PropTypes.bool.isRequired,\n  userPerm: PropTypes.string,\n  isGroupOwnedRepo: PropTypes.bool.isRequired,\n  // tree\n  isTreeDataLoading: PropTypes.bool.isRequired,\n  treeData: PropTypes.object.isRequired,\n  currentNode: PropTypes.object,\n  onNodeClick: PropTypes.func.isRequired,\n  onNodeCollapse: PropTypes.func.isRequired,\n  onNodeExpanded: PropTypes.func.isRequired,\n  onRenameNode: PropTypes.func.isRequired,\n  onDeleteNode: PropTypes.func.isRequired,\n  onAddFileNode: PropTypes.func.isRequired,\n  onAddFolderNode: PropTypes.func.isRequired,\n  // file\n  isViewFile: PropTypes.bool.isRequired,\n  isFileLoading: PropTypes.bool.isRequired,\n  isFileLoadedErr: PropTypes.bool.isRequired,\n  hash: PropTypes.string,\n  isDraft: PropTypes.bool.isRequired,\n  hasDraft: PropTypes.bool.isRequired,\n  goDraftPage: PropTypes.func.isRequired,\n  filePermission: PropTypes.string,\n  content: PropTypes.string,\n  lastModified: PropTypes.string,\n  latestContributor: PropTypes.string,\n  onLinkClick: PropTypes.func.isRequired,\n  // repo content\n  isRepoInfoBarShow: PropTypes.bool.isRequired,\n  draftCounts: PropTypes.number.isRequired,\n  usedRepoTags: PropTypes.array.isRequired,\n  readmeMarkdown: PropTypes.object,\n  updateUsedRepoTags: PropTypes.func.isRequired,\n  // list\n  isDirentListLoading: PropTypes.bool.isRequired,\n  direntList: PropTypes.array.isRequired,\n  sortBy: PropTypes.string.isRequired,\n  sortOrder: PropTypes.string.isRequired,\n  sortItems: PropTypes.func.isRequired,\n  onAddFolder: PropTypes.func.isRequired,\n  onAddFile: PropTypes.func.isRequired,\n  updateDirent: PropTypes.func.isRequired,\n  onItemClick: PropTypes.func.isRequired,\n  onItemSelected: PropTypes.func.isRequired,\n  onItemDelete: PropTypes.func.isRequired,\n  onItemRename: PropTypes.func.isRequired,\n  onItemMove: PropTypes.func.isRequired,\n  onItemCopy: PropTypes.func.isRequired,\n  onDirentClick: PropTypes.func.isRequired,\n  isAllItemSelected: PropTypes.bool.isRequired,\n  onAllItemSelected: PropTypes.func.isRequired,\n  selectedDirentList: PropTypes.array.isRequired,\n  onItemsMove: PropTypes.func.isRequired,\n  onItemsCopy: PropTypes.func.isRequired,\n  onItemsDelete: PropTypes.func.isRequired,\n  onFileTagChanged: PropTypes.func,\n  showDirentDetail: PropTypes.func.isRequired,\n};\n\nclass DirColumnView extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      inResizing: false,\n      navRate: 0.25,\n    };\n    this.containerWidth = null;\n  }\n\n  onResizeMouseUp = () => {\n    if (this.state.inResizing) {\n      this.setState({\n        inResizing: false\n      });\n    }\n    this.setCookie('navRate', this.state.navRate);\n  }\n\n  onResizeMouseDown = () => {\n    this.containerWidth = this.refs.viewModeContainer.clientWidth;\n    this.setState({\n      inResizing: true\n    });\n  };\n\n  onResizeMouseMove = (e) => {\n    let sizeNavWidth = this.containerWidth / 0.78 * 0.22 + 3;\n    let rate = (e.nativeEvent.clientX - sizeNavWidth) / this.containerWidth;\n    if (rate < 0.1) {\n      this.setState({\n        inResizing: false,\n        navRate: 0.12,\n      });\n    }\n    else if (rate > 0.4) {\n      this.setState({\n        inResizing: false,\n        navRate: 0.38,\n      });\n    }\n    else {\n      this.setState({\n        navRate: rate\n      });\n    }\n  };\n\n  setCookie = (name, value) => {\n    let cookie = name + '=' + value + ';';\n    document.cookie = cookie;\n  }\n\n  getCookie = (cookiename) => {\n    let name = cookiename + '=';\n    let cookie = document.cookie.split(';');\n    for (let i = 0, len = cookie.length; i < len; i++) {\n      let c = cookie[i].trim();\n      if (c.indexOf(name) == 0) {\n        return c.substring(name.length, c.length) * 1;\n      }\n    }\n    return '';\n  }\n\n  componentWillMount() {\n    let rate = this.getCookie('navRate');\n    if (rate) {\n      this.setState({\n        navRate: rate,\n      });\n    }\n  }\n\n  render() {\n    const onResizeMove = this.state.inResizing ? this.onResizeMouseMove : null;\n    const select = this.state.inResizing ? 'none' : '';\n    const mainFlex = '1 0 ' + (1 - this.state.navRate - 0.05) * 100 + '%';\n    return (\n      <div className=\"dir-colunm-view\" onMouseMove={onResizeMove} onMouseUp={this.onResizeMouseUp} ref=\"viewModeContainer\">\n        <DirColumnNav\n          currentPath={this.props.path}\n          userPerm={this.props.userPerm}\n          isTreeDataLoading={this.props.isTreeDataLoading}\n          treeData={this.props.treeData}\n          currentNode={this.props.currentNode}\n          onNodeClick={this.props.onNodeClick}\n          onNodeCollapse={this.props.onNodeCollapse}\n          onNodeExpanded={this.props.onNodeExpanded}\n          onAddFolderNode={this.props.onAddFolderNode}\n          onAddFileNode={this.props.onAddFileNode}\n          onRenameNode={this.props.onRenameNode}\n          onDeleteNode={this.props.onDeleteNode}\n          repoID={this.props.repoID}\n          navRate={this.state.navRate}\n          inResizing={this.state.inResizing}\n          currentRepoInfo={this.props.currentRepoInfo}\n          onItemMove={this.props.onItemMove}\n          onItemCopy={this.props.onItemCopy}\n          selectedDirentList={this.props.selectedDirentList}\n          onItemsMove={this.props.onItemsMove}\n        />\n        <div className=\"dir-content-resize\" onMouseDown={this.onResizeMouseDown}></div>\n        <div className=\"dir-content-main\" style={{userSelect: select, flex: mainFlex}}>\n          {this.props.isViewFile ? (\n            <DirColumnFile\n              path={this.props.path}\n              repoID={this.props.repoID}\n              hash={this.props.hash}\n              isDraft={this.props.isDraft}\n              hasDraft={this.props.hasDraft}\n              goDraftPage={this.props.goDraftPage}\n              isFileLoading={this.props.isFileLoading}\n              isFileLoadedErr={this.props.isFileLoadedErr}\n              filePermission={this.props.filePermission}\n              content={this.props.content}\n              lastModified={this.props.lastModified}\n              latestContributor={this.props.latestContributor}\n              onLinkClick={this.props.onLinkClick}\n            />\n          ) : (\n            <DirListView\n              path={this.props.path}\n              repoID={this.props.repoID}\n              currentRepoInfo={this.props.currentRepoInfo}\n              isGroupOwnedRepo={this.props.isGroupOwnedRepo}\n              userPerm={this.props.userPerm}\n              enableDirPrivateShare={this.props.enableDirPrivateShare}\n              isRepoInfoBarShow={this.props.isRepoInfoBarShow}\n              usedRepoTags={this.props.usedRepoTags}\n              readmeMarkdown={this.props.readmeMarkdown}\n              draftCounts={this.props.draftCounts}\n              updateUsedRepoTags={this.props.updateUsedRepoTags}\n              isDirentListLoading={this.props.isDirentListLoading}\n              direntList={this.props.direntList}\n              fullDirentList={this.props.fullDirentList}\n              sortBy={this.props.sortBy}\n              sortOrder={this.props.sortOrder}\n              sortItems={this.props.sortItems}\n              onAddFolder={this.props.onAddFolder}\n              onAddFile={this.props.onAddFile}\n              onItemClick={this.props.onItemClick}\n              onItemSelected={this.props.onItemSelected}\n              onItemDelete={this.props.onItemDelete}\n              onItemRename={this.props.onItemRename}\n              onItemMove={this.props.onItemMove}\n              onItemCopy={this.props.onItemCopy}\n              onDirentClick={this.props.onDirentClick}\n              updateDirent={this.props.updateDirent}\n              isAllItemSelected={this.props.isAllItemSelected}\n              onAllItemSelected={this.props.onAllItemSelected}\n              selectedDirentList={this.props.selectedDirentList}\n              onItemsMove={this.props.onItemsMove}\n              onItemsCopy={this.props.onItemsCopy}\n              onItemsDelete={this.props.onItemsDelete}\n              onFileTagChanged={this.props.onFileTagChanged}\n              showDirentDetail={this.props.showDirentDetail}\n            />\n          )}\n        </div>\n      </div>\n    );\n  }\n}\n\nDirColumnView.propTypes = propTypes;\n\nexport default DirColumnView;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../../utils/constants';\nimport CurDirPath from '../../components/cur-dir-path';\nimport DirentDetail from '../../components/dirent-detail/dirent-details';\nimport LibDetail from '../../components/dirent-detail/lib-details';\nimport DirListView from '../../components/dir-view-mode/dir-list-view';\nimport DirGridView from '../../components/dir-view-mode/dir-grid-view';\nimport DirColumnView from '../../components/dir-view-mode/dir-column-view';\n\nimport '../../css/lib-content-view.css';\n\nconst propTypes = {\n  pathPrefix: PropTypes.array.isRequired,\n  currentMode: PropTypes.string.isRequired,\n  path: PropTypes.string.isRequired,\n  pathExist: PropTypes.bool.isRequired,\n  // repoinfo\n  currentRepoInfo: PropTypes.object.isRequired,\n  repoID: PropTypes.string.isRequired,\n  enableDirPrivateShare: PropTypes.bool.isRequired,\n  isGroupOwnedRepo: PropTypes.bool.isRequired,\n  userPerm: PropTypes.string,\n  // path func\n  onTabNavClick: PropTypes.func.isRequired,\n  onMainNavBarClick: PropTypes.func.isRequired,\n  // file\n  isViewFile: PropTypes.bool.isRequired,\n  isFileLoadedErr: PropTypes.bool.isRequired,\n  hash: PropTypes.string,\n  isDraft: PropTypes.bool.isRequired,\n  hasDraft: PropTypes.bool.isRequired,\n  fileTags: PropTypes.array.isRequired,\n  goDraftPage: PropTypes.func.isRequired,\n  isFileLoading: PropTypes.bool.isRequired,\n  filePermission: PropTypes.string,\n  content: PropTypes.string,\n  lastModified: PropTypes.string,\n  latestContributor: PropTypes.string,\n  onLinkClick: PropTypes.func.isRequired,\n  // tree\n  isTreeDataLoading: PropTypes.bool.isRequired,\n  treeData: PropTypes.object.isRequired,\n  currentNode: PropTypes.object,\n  onNodeClick: PropTypes.func.isRequired,\n  onNodeCollapse: PropTypes.func.isRequired,\n  onNodeExpanded: PropTypes.func.isRequired,\n  onRenameNode: PropTypes.func.isRequired,\n  onDeleteNode: PropTypes.func.isRequired,\n  onAddFileNode: PropTypes.func.isRequired,\n  onAddFolderNode: PropTypes.func.isRequired,\n  // repo content\n  draftCounts: PropTypes.number,\n  usedRepoTags: PropTypes.array.isRequired,\n  readmeMarkdown: PropTypes.object,\n  updateUsedRepoTags: PropTypes.func.isRequired,\n  // list\n  isDirentListLoading: PropTypes.bool.isRequired,\n  direntList: PropTypes.array.isRequired,\n  sortBy: PropTypes.string.isRequired,\n  sortOrder: PropTypes.string.isRequired,\n  sortItems: PropTypes.func.isRequired,\n  updateDirent: PropTypes.func.isRequired,\n  onItemClick: PropTypes.func.isRequired,\n  onItemSelected: PropTypes.func.isRequired,\n  onItemDelete: PropTypes.func.isRequired,\n  onItemRename: PropTypes.func.isRequired,\n  onItemMove: PropTypes.func.isRequired,\n  onItemCopy: PropTypes.func.isRequired,\n  onAddFolder: PropTypes.func.isRequired,\n  onAddFile: PropTypes.func.isRequired,\n  onFileTagChanged: PropTypes.func.isRequired,\n  isDirentSelected: PropTypes.bool.isRequired,\n  isAllDirentSelected: PropTypes.bool.isRequired,\n  onAllDirentSelected: PropTypes.func.isRequired,\n  isDirentDetailShow: PropTypes.bool.isRequired,\n  selectedDirent: PropTypes.object,\n  selectedDirentList: PropTypes.array.isRequired,\n  onItemsMove: PropTypes.func.isRequired,\n  onItemsCopy: PropTypes.func.isRequired,\n  onItemsDelete: PropTypes.func.isRequired,\n  closeDirentDetail: PropTypes.func.isRequired,\n  showDirentDetail: PropTypes.func.isRequired,\n  onDeleteRepoTag: PropTypes.func.isRequired,\n  updateDetail: PropTypes.bool.isRequired,\n  onListContainerScroll: PropTypes.func.isRequired,\n  onDirentClick: PropTypes.func.isRequired,\n  direntDetailPanelTab: PropTypes.string,\n  loadDirentList: PropTypes.func.isRequired,\n};\n\nclass LibContentContainer extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      currentDirent: null,\n    };\n\n    this.errMessage = (<div className=\"message err-tip\">{gettext('Folder does not exist.')}</div>);\n  }\n\n  componentWillReceiveProps(nextProps) {\n    if (nextProps.path !== this.props.path || nextProps.updateDetail !== this.props.updateDetail) {\n      this.setState({currentDirent: null});\n    }\n  }\n\n  onPathClick = (path) => {\n    this.props.onMainNavBarClick(path);\n    this.props.closeDirentDetail();\n  }\n\n  onItemClick = (dirent) => {\n    this.props.onItemClick(dirent);\n    this.props.closeDirentDetail();\n  }\n\n  onGridItemClick = (dirent) => {\n    this.setState({currentDirent: dirent});\n    this.props.onDirentClick(dirent);\n  }\n\n  // on '<tr>'\n  onDirentClick = (dirent) => {\n    this.setState({currentDirent: dirent});\n    this.props.onDirentClick(dirent);\n  }\n\n  onItemSelected = (dirent) => {\n    this.setState({currentDirent: dirent});\n    this.props.onItemSelected(dirent);\n  }\n\n  onItemDelete = (dirent) => {\n    this.checkCurrentDirent(dirent);\n    this.props.onItemDelete(dirent);\n  }\n\n  onItemMove = (destRepo, dirent, selectedPath, currentPath) => {\n    this.checkCurrentDirent(dirent);\n    this.props.onItemMove(destRepo, dirent, selectedPath, currentPath);\n  }\n\n  checkCurrentDirent = (deletedDirent) => {\n    let { currentDirent } = this.state;\n    if (currentDirent && deletedDirent.name === currentDirent.name) {\n      this.setState({currentDirent: null});\n    }\n  }\n\n  onItemsScroll = (e) => {\n    let target = e.target;\n\n    if (target.scrollTop === 0) {\n      return;\n    }\n\n    if (target.scrollTop + target.clientHeight + 1 >= target.scrollHeight) {\n      this.props.onListContainerScroll();\n    }\n  }\n\n  render() {\n    let { path, repoID, usedRepoTags, readmeMarkdown, draftCounts } = this.props;\n    let isRepoInfoBarShow = false;\n    if (path === '/') {\n      if (usedRepoTags.length !== 0 || readmeMarkdown !== null || draftCounts !== 0) {\n        isRepoInfoBarShow = true;\n      }\n    }\n\n    return (\n      <Fragment>\n        <div className=\"cur-view-container\">\n          {this.props.currentRepoInfo.status === 'read-only' &&\n            <div className=\"readonly-tip-message\">\n              {gettext('This library has been set to read-only by admin and cannot be updated.')}\n            </div>\n          }\n          <div className=\"cur-view-path\">\n            <CurDirPath\n              repoID={repoID}\n              repoName={this.props.currentRepoInfo.repo_name}\n              pathPrefix={this.props.pathPrefix}\n              currentPath={this.props.path}\n              userPerm={this.props.userPerm}\n              isViewFile={this.props.isViewFile}\n              onTabNavClick={this.props.onTabNavClick}\n              onPathClick={this.onPathClick}\n              updateUsedRepoTags={this.props.updateUsedRepoTags}\n              fileTags={this.props.fileTags}\n              onDeleteRepoTag={this.props.onDeleteRepoTag}\n              direntList={this.props.direntList}\n              sortBy={this.props.sortBy}\n              sortOrder={this.props.sortOrder}\n              sortItems={this.props.sortItems}\n            />\n          </div>\n          <div className={`cur-view-content lib-content-container ${this.props.currentMode === 'column' ? 'view-mode-container' : ''}`} onScroll={this.onItemsScroll}>\n            {!this.props.pathExist && this.errMessage}\n            {this.props.pathExist && (\n              <Fragment>\n                {this.props.currentMode === 'list' && (\n                  <DirListView\n                    path={this.props.path}\n                    repoID={repoID}\n                    currentRepoInfo={this.props.currentRepoInfo}\n                    isGroupOwnedRepo={this.props.isGroupOwnedRepo}\n                    userPerm={this.props.userPerm}\n                    enableDirPrivateShare={this.props.enableDirPrivateShare}\n                    isRepoInfoBarShow={isRepoInfoBarShow}\n                    usedRepoTags={this.props.usedRepoTags}\n                    readmeMarkdown={this.props.readmeMarkdown}\n                    draftCounts={this.props.draftCounts}\n                    updateUsedRepoTags={this.props.updateUsedRepoTags}\n                    isDirentListLoading={this.props.isDirentListLoading}\n                    direntList={this.props.direntList}\n                    fullDirentList={this.props.fullDirentList}\n                    sortBy={this.props.sortBy}\n                    sortOrder={this.props.sortOrder}\n                    sortItems={this.props.sortItems}\n                    onAddFolder={this.props.onAddFolder}\n                    onAddFile={this.props.onAddFile}\n                    onItemClick={this.onItemClick}\n                    onItemSelected={this.onItemSelected}\n                    onItemDelete={this.onItemDelete}\n                    onItemRename={this.props.onItemRename}\n                    onItemMove={this.onItemMove}\n                    onItemCopy={this.props.onItemCopy}\n                    onDirentClick={this.onDirentClick}\n                    updateDirent={this.props.updateDirent}\n                    isAllItemSelected={this.props.isAllDirentSelected}\n                    onAllItemSelected={this.props.onAllDirentSelected}\n                    selectedDirentList={this.props.selectedDirentList}\n                    onItemsMove={this.props.onItemsMove}\n                    onItemsCopy={this.props.onItemsCopy}\n                    onItemsDelete={this.props.onItemsDelete}\n                    onFileTagChanged={this.props.onFileTagChanged}\n                    showDirentDetail={this.props.showDirentDetail}\n                    loadDirentList={this.props.loadDirentList}\n                  />\n                )}\n                {this.props.currentMode === 'grid' && (\n                  <DirGridView\n                    path={this.props.path}\n                    repoID={repoID}\n                    currentRepoInfo={this.props.currentRepoInfo}\n                    isGroupOwnedRepo={this.props.isGroupOwnedRepo}\n                    userPerm={this.props.userPerm}\n                    enableDirPrivateShare={this.props.enableDirPrivateShare}\n                    onRenameNode={this.props.onRenameNode}\n                    isRepoInfoBarShow={isRepoInfoBarShow}\n                    usedRepoTags={this.props.usedRepoTags}\n                    readmeMarkdown={this.props.readmeMarkdown}\n                    draftCounts={this.props.draftCounts}\n                    updateUsedRepoTags={this.props.updateUsedRepoTags}\n                    isDirentListLoading={this.props.isDirentListLoading}\n                    direntList={this.props.direntList}\n                    fullDirentList={this.props.fullDirentList}\n                    onAddFile={this.props.onAddFile}\n                    onItemClick={this.onItemClick}\n                    onItemDelete={this.props.onItemDelete}\n                    onItemMove={this.onItemMove}\n                    onItemCopy={this.props.onItemCopy}\n                    updateDirent={this.props.updateDirent}\n                    onAddFolder={this.props.onAddFolder}\n                    showDirentDetail={this.props.showDirentDetail}\n                    onGridItemClick={this.onGridItemClick}\n                    isDirentDetailShow={this.props.isDirentDetailShow}\n                    onItemRename={this.props.onItemRename}\n                    onFileTagChanged={this.props.onFileTagChanged}\n                  />\n                )}\n                {this.props.currentMode === 'column' && (\n                  <DirColumnView\n                    path={this.props.path}\n                    repoID={repoID}\n                    currentRepoInfo={this.props.currentRepoInfo}\n                    isGroupOwnedRepo={this.props.isGroupOwnedRepo}\n                    userPerm={this.props.userPerm}\n                    enableDirPrivateShare={this.props.enableDirPrivateShare}\n                    isTreeDataLoading={this.props.isTreeDataLoading}\n                    treeData={this.props.treeData}\n                    currentNode={this.props.currentNode}\n                    onNodeClick={this.props.onNodeClick}\n                    onNodeCollapse={this.props.onNodeCollapse}\n                    onNodeExpanded={this.props.onNodeExpanded}\n                    onAddFolderNode={this.props.onAddFolder}\n                    onAddFileNode={this.props.onAddFile}\n                    onRenameNode={this.props.onRenameNode}\n                    onDeleteNode={this.props.onDeleteNode}\n                    isViewFile={this.props.isViewFile}\n                    isFileLoading={this.props.isFileLoading}\n                    isFileLoadedErr={this.props.isFileLoadedErr}\n                    hash={this.props.hash}\n                    isDraft={this.props.isDraft}\n                    hasDraft={this.props.hasDraft}\n                    goDraftPage={this.props.goDraftPage}\n                    filePermission={this.props.filePermission}\n                    content={this.props.content}\n                    lastModified={this.props.lastModified}\n                    latestContributor={this.props.latestContributor}\n                    onLinkClick={this.props.onLinkClick}\n                    isRepoInfoBarShow={isRepoInfoBarShow}\n                    usedRepoTags={this.props.usedRepoTags}\n                    readmeMarkdown={this.props.readmeMarkdown}\n                    draftCounts={this.props.draftCounts}\n                    updateUsedRepoTags={this.props.updateUsedRepoTags}\n                    isDirentListLoading={this.props.isDirentListLoading}\n                    direntList={this.props.direntList}\n                    fullDirentList={this.props.fullDirentList}\n                    sortBy={this.props.sortBy}\n                    sortOrder={this.props.sortOrder}\n                    sortItems={this.props.sortItems}\n                    onAddFolder={this.props.onAddFolder}\n                    onAddFile={this.props.onAddFile}\n                    onItemClick={this.onItemClick}\n                    onItemSelected={this.onItemSelected}\n                    onItemDelete={this.onItemDelete}\n                    onItemRename={this.props.onItemRename}\n                    onItemMove={this.onItemMove}\n                    onItemCopy={this.props.onItemCopy}\n                    onDirentClick={this.onDirentClick}\n                    updateDirent={this.props.updateDirent}\n                    isAllItemSelected={this.props.isAllDirentSelected}\n                    onAllItemSelected={this.props.onAllDirentSelected}\n                    selectedDirentList={this.props.selectedDirentList}\n                    onItemsMove={this.props.onItemsMove}\n                    onItemsCopy={this.props.onItemsCopy}\n                    onItemsDelete={this.props.onItemsDelete}\n                    onFileTagChanged={this.props.onFileTagChanged}\n                    showDirentDetail={this.props.showDirentDetail}\n                  />\n                )}\n              </Fragment>\n            )}\n          </div>\n        </div>\n        {this.props.isDirentDetailShow &&\n          <Fragment>\n            <div className=\"cur-view-detail\">\n              {(this.props.path === '/' && !this.state.currentDirent) ?\n                <LibDetail\n                  currentRepo={this.props.currentRepoInfo}\n                  closeDetails={this.props.closeDirentDetail}\n                /> :\n                <DirentDetail\n                  repoID={repoID}\n                  path={this.props.path}\n                  dirent={this.state.currentDirent}\n                  currentRepoInfo={this.props.currentRepoInfo}\n                  fileTags={this.props.isViewFile ? this.props.fileTags : []}\n                  onFileTagChanged={this.props.onFileTagChanged}\n                  onItemDetailsClose={this.props.closeDirentDetail}\n                  direntDetailPanelTab={this.props.direntDetailPanelTab}\n                />\n              }\n            </div>\n          </Fragment>\n        }\n      </Fragment>\n    );\n  }\n}\n\nLibContentContainer.propTypes = propTypes;\n\nexport default LibContentContainer;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\n\nconst propTypes = {\n  resumableFile: PropTypes.object.isRequired,\n  onUploadCancel: PropTypes.func.isRequired,\n  onUploadRetry: PropTypes.func.isRequired,\n};\n\nconst UPLOAD_UPLOADING = 'uploading';\nconst UPLOAD_ERROR = 'error';\nconst UPLOAD_ISSAVING = 'isSaving';\nconst UPLOAD_UPLOADED = 'uploaded';\n\nclass UploadListItem extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      uploadState: UPLOAD_UPLOADING\n    };\n  }\n\n  componentWillReceiveProps(nextProps) {\n    let { resumableFile } = nextProps;\n    let uploadState = UPLOAD_UPLOADING;\n\n    if (resumableFile.error) {\n      uploadState = UPLOAD_ERROR;\n    } else {\n      if (resumableFile.remainingTime === 0 && !resumableFile.isSaved) {\n        uploadState = UPLOAD_ISSAVING;\n      }\n\n      if (resumableFile.isSaved) {\n        uploadState = UPLOAD_UPLOADED;\n      }\n    }\n\n    this.setState({uploadState: uploadState});\n  }\n\n  onUploadCancel = (e) => {\n    e.preventDefault();\n    this.props.onUploadCancel(this.props.resumableFile);\n  }\n\n  onUploadRetry = (e) => {\n    e.preventDefault();\n    this.props.onUploadRetry(this.props.resumableFile);\n  }\n\n  formatFileSize = (size) => {\n    if (typeof size !== 'number') {\n      return '';\n    }\n    if (size >= 1000 * 1000 * 1000) {\n      return (size / (1000 * 1000 * 1000)).toFixed(1) + ' G';\n    }\n    if (size >= 1000 * 1000) {\n      return (size / (1000 * 1000)).toFixed(1) + ' M';\n    }\n    if (size >= 1000) {\n      return (size / 1000).toFixed(1) + ' K';\n    }\n    return size.toFixed(1) + ' B';\n  }\n\n  render() {\n    let { resumableFile } = this.props;\n    let progress = Math.round(resumableFile.progress() * 100);\n    let error = resumableFile.error;\n\n    const fileName = resumableFile.newFileName;\n    const size = this.formatFileSize(resumableFile.size);\n\n    return (\n      <tr className=\"file-upload-item\">\n        <td className=\"upload-name\">\n          <div className=\"ellipsis\" title={fileName}>{fileName}</div>\n        </td>\n        <td className=\"ellipsis\">\n          <span className=\"file-size\" title={size}>{size}</span>\n        </td>\n        <td className=\"upload-progress ellipsis\">\n          {(this.state.uploadState === UPLOAD_UPLOADING || this.state.uploadState === UPLOAD_ISSAVING) &&\n            <Fragment>\n              {resumableFile.size >= (100 * 1000 * 1000) &&\n                <Fragment>\n                  {resumableFile.isUploading() && (\n                    <div className=\"progress-container\">\n                      <div className=\"progress\">\n                        <div className=\"progress-bar\" role=\"progressbar\" style={{width: `${progress}%`}} aria-valuenow={progress} aria-valuemin=\"0\" aria-valuemax=\"100\"></div>\n                      </div>\n                      {(resumableFile.remainingTime === -1) && <div className=\"progress-text\">{gettext('Preparing to upload...')}</div>}\n                      {(resumableFile.remainingTime > 0) && <div className=\"progress-text\">{gettext('Remaining')}{' '}{Utils.formatTime(resumableFile.remainingTime)}</div>}\n                      {(resumableFile.remainingTime === 0) && <div className=\"progress-text\">{gettext('Indexing...')}</div>}\n                    </div>\n                  )}\n                  {!resumableFile.isUploading() && (\n                    <div className=\"progress-container d-flex align-items-center\">\n                      <div className=\"progress\">\n                        <div className=\"progress-bar\" role=\"progressbar\" style={{width: `${progress}%`}} aria-valuenow={progress} aria-valuemin=\"0\" aria-valuemax=\"100\"></div>\n                      </div>\n                    </div>\n                  )}\n                </Fragment>\n              }\n              {(resumableFile.size < (100 * 1000 * 1000)) &&\n                <div className=\"progress-container d-flex align-items-center\">\n                  <div className=\"progress\">\n                    <div className=\"progress-bar\" role=\"progressbar\" style={{width: `${progress}%`}} aria-valuenow={progress} aria-valuemin=\"0\" aria-valuemax=\"100\"></div>\n                  </div>\n                </div>\n              }\n            </Fragment>\n          }\n          {this.state.uploadState === UPLOAD_ERROR && (\n            <div className=\"message err-message ml-0\" dangerouslySetInnerHTML={{__html: error}}></div>\n          )}\n        </td>\n        <td className=\"upload-operation ellipsis\">\n          <Fragment>\n            {this.state.uploadState === UPLOAD_UPLOADING && (\n              <a href=\"#\" onClick={this.onUploadCancel}>{gettext('Cancel')}</a>\n            )}\n            {this.state.uploadState === UPLOAD_ERROR && (\n              <a href=\"#\" onClick={this.onUploadRetry}>{gettext('Retry')}</a>\n            )}\n            {this.state.uploadState === UPLOAD_ISSAVING && (\n              <span className=\"saving\">{gettext('Saving...')}</span>\n            )}\n            {this.state.uploadState === UPLOAD_UPLOADED && (\n              <span className=\"uploaded\">{gettext('Uploaded')}</span>\n            )}\n          </Fragment>\n        </td>\n      </tr>\n    );\n  }\n}\n\nUploadListItem.propTypes = propTypes;\n\nexport default UploadListItem;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext, maxUploadFileSize } from '../../utils/constants';\n\nconst propTypes = {\n  file: PropTypes.object,\n};\n\nclass ForbidUploadListItem extends React.Component {\n\n  render() {\n    let { file } = this.props;\n    let msg = gettext('Please upload files less than {placeholder}M').replace('{placeholder}', maxUploadFileSize);\n    return (\n      <tr className=\"file-upload-item\">\n        <td className=\"upload-name\">\n          <div className=\"ellipsis\" title={file.name}>{file.name}</div>\n        </td>\n\n        <td colSpan={3} className=\"error\">{msg}</td>\n      </tr>\n    );\n  }\n}\n\nForbidUploadListItem.propTypes = propTypes;\n\nexport default ForbidUploadListItem;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport UploadListItem from './upload-list-item';\nimport ForbidUploadListItem from './forbid-upload-list-item';\n\nconst propTypes = {\n  uploadBitrate: PropTypes.number.isRequired,\n  totalProgress: PropTypes.number.isRequired,\n  retryFileList: PropTypes.array.isRequired,\n  uploadFileList: PropTypes.array.isRequired,\n  forbidUploadFileList: PropTypes.array.isRequired,\n  onCloseUploadDialog: PropTypes.func.isRequired,\n  onCancelAllUploading: PropTypes.func.isRequired,\n  onUploadCancel: PropTypes.func.isRequired,\n  onUploadRetry: PropTypes.func.isRequired,\n  onUploadRetryAll: PropTypes.func.isRequired,\n  allFilesUploaded: PropTypes.bool.isRequired,\n};\n\nclass UploadProgressDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isMinimized: false\n    };\n  }\n\n  onCancelAllUploading = () => {\n    this.props.onCancelAllUploading();\n  }\n\n  onMinimizeUpload = (e) => {\n    e.nativeEvent.stopImmediatePropagation();\n    this.setState({isMinimized: !this.state.isMinimized});\n  }\n\n  onCloseUpload = (e) => {\n    e.nativeEvent.stopImmediatePropagation();\n    this.props.onCloseUploadDialog();\n  }\n\n  render() {\n\n    let uploadBitrate = Utils.formatBitRate(this.props.uploadBitrate);\n    let uploadedMessage = gettext('File Upload');\n    let uploadingMessage = gettext('File Uploading...') + ' ' + this.props.totalProgress + '% (' + uploadBitrate + ')';\n\n    let uploadingOptions = (<span className=\"sf2-icon-minus\" onClick={this.onMinimizeUpload}></span>);\n\n    let uploadedOptions = (\n      <Fragment>\n        <span className=\"sf2-icon-minus\" onClick={this.onMinimizeUpload}></span>\n        <span className=\"sf2-icon-x1\" onClick={this.onCloseUpload}></span>\n      </Fragment>\n    );\n\n    let { totalProgress, allFilesUploaded, retryFileList } = this.props;\n\n    return (\n      <div className=\"uploader-list-view mw-100\" style={{height: this.state.isMinimized ? '2.25rem' : '20rem'}}>\n        <div className=\"uploader-list-header\">\n          <div className=\"title\">\n            {totalProgress === 100 ? uploadedMessage : uploadingMessage}\n          </div>\n          <div className=\"uploader-options\">\n            {totalProgress === 100 ||  allFilesUploaded ? uploadedOptions : uploadingOptions}\n          </div>\n        </div>\n        <div className=\"uploader-list-content\">\n          <div className=\"text-right mt-2\">\n            {retryFileList.length > 0 ?\n              <span className=\"cursor-pointer\" onClick={this.props.onUploadRetryAll}>{gettext('Retry All')}</span>\n              :\n              <span className=\"cursor-pointer disabled-link\">{gettext('Retry All')}</span>\n            }\n            {!allFilesUploaded ?\n              <span className=\"cursor-pointer ml-3\" onClick={this.onCancelAllUploading}>{gettext('Cancel All')}</span>\n              :\n              <span className=\"cursor-pointer ml-3 disabled-link\" >{gettext('Cancel All')}</span>\n            }\n          </div>\n          <table className=\"table-thead-hidden\">\n            <thead>\n              <tr>\n                <th width=\"30%\">{gettext('name')}</th>\n                <th width=\"20%\">{gettext('size')}</th>\n                <th width=\"30%\">{gettext('progress')}</th>\n                <th width=\"20%\">{gettext('state')}</th>\n              </tr>\n            </thead>\n            <tbody>\n              {\n                this.props.forbidUploadFileList.map((file, index) => {\n                  return (<ForbidUploadListItem key={index} file={file} />);\n                })\n              }\n              {\n                this.props.uploadFileList.map((resumableFile, index) => {\n                  return (\n                    <UploadListItem\n                      key={index}\n                      resumableFile={resumableFile}\n                      onUploadCancel={this.props.onUploadCancel}\n                      onUploadRetry={this.props.onUploadRetry}\n                    />\n                  );\n                })\n              }\n            </tbody>\n          </table>\n        </div>\n      </div>\n    );\n  }\n}\n\nUploadProgressDialog.propTypes = propTypes;\n\nexport default UploadProgressDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../../utils/constants';\nimport { Modal, ModalHeader, ModalBody, ModalFooter, Button } from 'reactstrap';\n\nconst propTypes = {\n  currentResumableFile: PropTypes.object.isRequired,\n  replaceRepetitionFile: PropTypes.func.isRequired,\n  uploadFile: PropTypes.func.isRequired,\n  cancelFileUpload: PropTypes.func.isRequired,\n};\n\nclass UploadRemindDialog extends React.Component {\n\n  toggle = (e) => {\n    e.nativeEvent.stopImmediatePropagation();\n    this.props.cancelFileUpload();\n  }\n\n  replaceRepetitionFile = (e) => {\n    e.nativeEvent.stopImmediatePropagation();\n    this.props.replaceRepetitionFile();\n  }\n\n  uploadFile = (e) => {\n    e.nativeEvent.stopImmediatePropagation();\n    this.props.uploadFile();\n  }\n\n  render() {\n    const { fileName } = this.props.currentResumableFile;\n    return (\n      <Modal isOpen={true} toggle={this.toggle}>\n        <ModalHeader toggle={this.toggle}>\n          <span>{gettext('Replace file {filename}?').replace('{filename}', fileName)}</span>\n        </ModalHeader>\n        <ModalBody>\n          <p>{gettext('A file with the same name already exists in this folder.')}</p>\n          <p>{gettext('Replacing it will overwrite its content.')}</p>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"primary\" onClick={this.replaceRepetitionFile}>{gettext('Replace')}</Button>\n          <Button color=\"primary\" onClick={this.uploadFile}>{gettext('Don\\'t replace')}</Button>\n          <Button color=\"secondary\" onClick={this.toggle}>{gettext('Cancel')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nUploadRemindDialog.propTypes = propTypes;\n\nexport default UploadRemindDialog;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport Resumablejs from '@seafile/resumablejs';\nimport MD5 from 'MD5';\nimport { resumableUploadFileBlockSize, maxUploadFileSize, maxNumberOfFilesForFileupload } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport { gettext } from '../../utils/constants';\nimport UploadProgressDialog from './upload-progress-dialog';\nimport UploadRemindDialog from '../dialog/upload-remind-dialog';\nimport toaster from '../toast';\nimport '../../css/file-uploader.css';\n\nconst propTypes = {\n  repoID: PropTypes.string.isRequired,\n  direntList: PropTypes.array.isRequired,\n  filetypes: PropTypes.array,\n  chunkSize: PropTypes.number,\n  withCredentials: PropTypes.bool,\n  testMethod: PropTypes.string,\n  testChunks: PropTypes.number,\n  simultaneousUploads: PropTypes.number,\n  fileParameterName: PropTypes.string,\n  minFileSizeErrorCallback: PropTypes.func,\n  fileTypeErrorCallback: PropTypes.func,\n  dragAndDrop: PropTypes.bool.isRequired,\n  path: PropTypes.string.isRequired,\n  onFileUploadSuccess: PropTypes.func.isRequired,\n  isCustomPermission: PropTypes.bool,\n};\n\nclass FileUploader extends React.Component {\n\n  static defaultProps = {\n    isCustomPermission: false\n  }\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      retryFileList: [],\n      uploadFileList: [],\n      forbidUploadFileList: [],\n      totalProgress: 0,\n      isUploadProgressDialogShow: false,\n      isUploadRemindDialogShow: false,\n      currentResumableFile: null,\n      uploadBitrate: 0,\n      allFilesUploaded: false,\n    };\n\n    this.uploadInput = React.createRef();\n\n    this.notifiedFolders = [];\n\n    this.timestamp = null;\n    this.loaded = 0;\n    this.bitrateInterval = 500; // Interval in milliseconds to calculate the bitrate\n    window.onbeforeunload = this.onbeforeunload;\n    this.isUploadLinkLoaded = false;\n  }\n\n  componentDidMount() {\n    this.resumable = new Resumablejs({\n      target: '',\n      query: this.setQuery || {},\n      fileType: this.props.filetypes,\n      maxFiles: maxNumberOfFilesForFileupload || undefined,\n      maxFileSize: maxUploadFileSize * 1000 * 1000 || undefined,\n      testMethod: this.props.testMethod || 'post',\n      testChunks: this.props.testChunks || false,\n      headers: this.setHeaders || {},\n      withCredentials: this.props.withCredentials || false,\n      chunkSize: parseInt(resumableUploadFileBlockSize) * 1024 * 1024 || 1 * 1024 * 1024,\n      simultaneousUploads: this.props.simultaneousUploads || 1,\n      fileParameterName: this.props.fileParameterName,\n      generateUniqueIdentifier: this.generateUniqueIdentifier,\n      forceChunkSize: true,\n      maxChunkRetries: 3,\n      minFileSize: 0,\n    });\n\n    this.resumable.assignBrowse(this.uploadInput.current, true);\n\n    //Enable or Disable DragAnd Drop\n    if (this.props.dragAndDrop === true) {\n      this.resumable.enableDropOnDocument();\n    }\n\n    this.bindCallbackHandler();\n    this.bindEventHandler();\n  }\n\n  componentWillUnmount = () => {\n    window.onbeforeunload = null;\n    if (this.props.dragAndDrop === true) {\n      this.resumable.disableDropOnDocument();\n    }\n  }\n\n  onbeforeunload = () => {\n    if (window.uploader &&\n        window.uploader.isUploadProgressDialogShow &&\n        window.uploader.totalProgress !== 100) {\n      return '';\n    }\n  }\n\n  bindCallbackHandler = () => {\n    let { minFileSizeErrorCallback, fileTypeErrorCallback } = this.props;\n\n    if (this.maxFilesErrorCallback) {\n      this.resumable.opts.maxFilesErrorCallback = this.maxFilesErrorCallback;\n    }\n\n    if (minFileSizeErrorCallback) {\n      this.resumable.opts.minFileSizeErrorCallback = this.props.minFileSizeErrorCallback;\n    }\n\n    if (this.maxFileSizeErrorCallback) {\n      this.resumable.opts.maxFileSizeErrorCallback = this.maxFileSizeErrorCallback;\n    }\n\n    if (fileTypeErrorCallback) {\n      this.resumable.opts.fileTypeErrorCallback = this.props.fileTypeErrorCallback;\n    }\n\n  }\n\n  bindEventHandler = () => {\n    this.resumable.on('chunkingComplete', this.onChunkingComplete.bind(this));\n    this.resumable.on('fileAdded', this.onFileAdded.bind(this));\n    this.resumable.on('filesAddedComplete', this.filesAddedComplete.bind(this));\n    this.resumable.on('fileProgress', this.onFileProgress.bind(this));\n    this.resumable.on('fileSuccess', this.onFileUploadSuccess.bind(this));\n    this.resumable.on('progress', this.onProgress.bind(this));\n    this.resumable.on('complete', this.onComplete.bind(this));\n    this.resumable.on('pause', this.onPause.bind(this));\n    this.resumable.on('fileRetry', this.onFileRetry.bind(this));\n    this.resumable.on('fileError', this.onFileError.bind(this));\n    this.resumable.on('error', this.onError.bind(this));\n    this.resumable.on('beforeCancel', this.onBeforeCancel.bind(this));\n    this.resumable.on('cancel', this.onCancel.bind(this));\n    this.resumable.on('dragstart', this.onDragStart.bind(this));\n  }\n\n  maxFilesErrorCallback = (files, errorCount) => {\n    let maxFiles = maxNumberOfFilesForFileupload;\n    let message = gettext('Please upload no more than {maxFiles} files at a time.');\n    message = message.replace('{maxFiles}', maxFiles);\n    toaster.danger(message);\n  }\n\n  maxFileSizeErrorCallback = (file) => {\n    let { forbidUploadFileList } = this.state;\n    forbidUploadFileList.push(file);\n    this.setState({forbidUploadFileList: forbidUploadFileList});\n  }\n\n  onChunkingComplete = (resumableFile) => {\n\n    let allFilesUploaded = this.state.allFilesUploaded;\n    if (allFilesUploaded === true) {\n      this.setState({allFilesUploaded: false});\n    }\n\n    //get parent_dir relative_path\n    let path = this.props.path === '/' ? '/' : this.props.path + '/';\n    let fileName = resumableFile.fileName;\n    let relativePath = resumableFile.relativePath;\n    let isFile = fileName === relativePath;\n\n    //update formdata\n    resumableFile.formData = {};\n    if (isFile) { // upload file\n      resumableFile.formData  = {\n        parent_dir: path,\n      };\n    } else { // upload folder\n      let relative_path = relativePath.slice(0, relativePath.lastIndexOf('/') + 1);\n      resumableFile.formData  = {\n        parent_dir: path,\n        relative_path: relative_path\n      };\n    }\n  }\n\n  onFileAdded = (resumableFile, files) => {\n    const { isCustomPermission } = this.props;\n    let isFile = resumableFile.fileName === resumableFile.relativePath;\n    // uploading is file and only upload one file\n    if (isFile && files.length === 1) {\n      let hasRepetition = false;\n      if (!isCustomPermission) {\n        let direntList = this.props.direntList;\n        for (let i = 0; i < direntList.length; i++) {\n          if (direntList[i].type === 'file' && direntList[i].name === resumableFile.fileName) {\n            hasRepetition = true;\n            break;\n          }\n        }\n      }\n      if (hasRepetition) {\n        this.setState({\n          isUploadRemindDialogShow: true,\n          currentResumableFile: resumableFile,\n        });\n      } else {\n        this.setUploadFileList(this.resumable.files);\n        let { repoID, path } = this.props;\n        seafileAPI.getFileServerUploadLink(repoID, path).then(res => {\n          this.resumable.opts.target = res.data + '?ret-json=1';\n          this.resumableUpload(resumableFile);\n        }).catch(error => {\n          let errMessage = Utils.getErrorMsg(error);\n          toaster.danger(errMessage);\n        });\n      }\n    } else {\n      this.setUploadFileList(this.resumable.files);\n      if (!this.isUploadLinkLoaded) {\n        this.isUploadLinkLoaded = true;\n        let { repoID, path } = this.props;\n        seafileAPI.getFileServerUploadLink(repoID, path).then(res => {\n          this.resumable.opts.target = res.data + '?ret-json=1';\n          this.resumable.upload();\n        }).catch(error => {\n          let errMessage = Utils.getErrorMsg(error);\n          toaster.danger(errMessage);\n        });\n      }\n    }\n  }\n\n  resumableUpload = (resumableFile) => {\n    let { repoID, path } = this.props;\n    seafileAPI.getFileUploadedBytes(repoID, path, resumableFile.fileName).then(res => {\n      let uploadedBytes = res.data.uploadedBytes;\n      let blockSize = parseInt(resumableUploadFileBlockSize) * 1024 * 1024 || 1024 * 1024;\n      let offset = Math.floor(uploadedBytes / blockSize);\n      resumableFile.markChunksCompleted(offset);\n      this.resumable.upload();\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  filesAddedComplete = (resumable, files) => {\n    let { forbidUploadFileList } = this.state;\n    if (forbidUploadFileList.length > 0 && files.length === 0) {\n      this.setState({\n        isUploadProgressDialogShow: true,\n        totalProgress: 100\n      });\n    }\n  }\n\n  setUploadFileList = () => {\n    let uploadFileList = this.resumable.files;\n    this.setState({\n      uploadFileList: uploadFileList,\n      isUploadProgressDialogShow: true,\n    });\n    Utils.registerGlobalVariable('uploader', 'isUploadProgressDialogShow', true);\n  }\n\n  onFileProgress = (resumableFile) => {\n    let uploadBitrate = this.getBitrate();\n    let uploadFileList = this.state.uploadFileList.map(item => {\n      if (item.uniqueIdentifier === resumableFile.uniqueIdentifier) {\n        if (uploadBitrate) {\n          let lastSize = (item.size - (item.size * item.progress())) * 8;\n          let time = Math.floor(lastSize / uploadBitrate);\n          item.remainingTime = time;\n        }\n      }\n      return item;\n    });\n\n    this.setState({\n      uploadBitrate: uploadBitrate,\n      uploadFileList: uploadFileList\n    });\n  }\n\n  getBitrate = () => {\n    let loaded = 0;\n    let uploadBitrate = 0;\n    let now = new Date().getTime();\n\n    this.resumable.files.forEach(file => {\n      loaded += file.progress() * file.size;\n    });\n\n    if (this.timestamp) {\n      let timeDiff = (now - this.timestamp);\n      if (timeDiff < this.bitrateInterval) {\n        return this.state.uploadBitrate;\n      }\n\n      // 1. Cancel will produce loaded greater than this.loaded\n      // 2. reset can make this.loaded to be 0\n      if (loaded < this.loaded || this.loaded === 0) {\n        this.loaded = loaded; //\n      }\n\n      uploadBitrate = (loaded - this.loaded) * (1000 / timeDiff) * 8;\n    }\n\n    this.timestamp = now;\n    this.loaded = loaded;\n\n    return uploadBitrate;\n  }\n\n  onProgress = () => {\n    let progress = Math.round(this.resumable.progress() * 100);\n    this.setState({totalProgress: progress});\n    Utils.registerGlobalVariable('uploader', 'totalProgress', progress);\n  }\n\n  onFileUploadSuccess = (resumableFile, message) => {\n    let formData = resumableFile.formData;\n    let currentTime = new Date().getTime()/1000;\n    message = formData.replace ? message : JSON.parse(message)[0];\n    if (formData.relative_path) { // upload folder\n      let relative_path = formData.relative_path;\n      let dir_name = relative_path.slice(0, relative_path.indexOf('/'));\n      let dirent = {\n        id: message.id,\n        name: dir_name,\n        type: 'dir',\n        mtime: currentTime,\n      };\n\n      // update folders cache\n      let isExist = this.notifiedFolders.some(item => {return item.name === dirent.name;});\n      if (!isExist) {\n        this.notifiedFolders.push(dirent);\n        this.props.onFileUploadSuccess(dirent);\n      }\n\n      // update uploadFileList\n      let uploadFileList = this.state.uploadFileList.map(item => {\n        if (item.uniqueIdentifier === resumableFile.uniqueIdentifier) {\n          item.newFileName = relative_path + message.name;\n          item.isSaved = true;\n        }\n        return item;\n      });\n      this.setState({uploadFileList: uploadFileList});\n\n      return;\n    }\n\n    if (formData.replace) { // upload file -- replace exist file\n      let fileName = resumableFile.fileName;\n      let dirent = {\n        id: message,\n        name: fileName,\n        type: 'file',\n        mtime: currentTime\n      };\n      this.props.onFileUploadSuccess(dirent); // this contance: just one file\n\n      let uploadFileList = this.state.uploadFileList.map(item => {\n        if (item.uniqueIdentifier === resumableFile.uniqueIdentifier) {\n          item.newFileName = fileName;\n          item.isSaved = true;\n        }\n        return item;\n      });\n      this.setState({uploadFileList: uploadFileList});\n\n      return;\n    }\n\n    // upload file -- add files\n    let dirent = {\n      id: message.id,\n      type: 'file',\n      name: message.name,\n      size: message.size,\n      mtime: currentTime,\n    };\n    this.props.onFileUploadSuccess(dirent); // this contance:  no repetition file\n\n    let uploadFileList = this.state.uploadFileList.map(item => {\n      if (item.uniqueIdentifier === resumableFile.uniqueIdentifier) {\n        item.newFileName = message.name;\n        item.isSaved = true;\n      }\n      return item;\n    });\n    this.setState({uploadFileList: uploadFileList});\n  }\n\n  getFileServerErrorMessage = (key) => {\n    const errorMessage = {\n      'File locked by others.': gettext('File is locked by others.'),       // 403\n      'Invalid filename.': gettext('Invalid filename.'),                    // 440\n      'File already exists.': gettext('File already exists.'),              // 441\n      'File size is too large.': gettext('File size is too large.'),        // 442\n      'Out of quota.': gettext('Out of quota.'),                            // 443\n      'Internal error.': gettext('Internal Server Error'),                  // 500\n    };\n    return errorMessage[key] || key;\n  }\n\n  onFileError = (resumableFile, message) => {\n    let error = '';\n    if (!message) {\n      error = gettext('Network error');\n    } else {\n      // eg: '{\"error\": \"Internal error\" \\n }'\n      let errorMessage = message.replace(/\\n/g, '');\n      errorMessage  = JSON.parse(errorMessage);\n      error = this.getFileServerErrorMessage(errorMessage.error);\n    }\n\n    let uploadFileList = this.state.uploadFileList.map(item => {\n      if (item.uniqueIdentifier === resumableFile.uniqueIdentifier) {\n        this.state.retryFileList.push(item);\n        item.error = error;\n      }\n      return item;\n    });\n\n    this.loaded = 0;  // reset loaded data;\n    this.setState({\n      retryFileList: this.state.retryFileList,\n      uploadFileList: uploadFileList\n    });\n\n  }\n\n  onComplete = () => {\n    this.notifiedFolders = [];\n    // reset upload link loaded\n    this.isUploadLinkLoaded = false;\n    this.setState({allFilesUploaded: true});\n  }\n\n  onPause = () => {\n\n  }\n\n  onError = (message) => {\n    // reset upload link loaded\n    this.isUploadLinkLoaded = false;\n    // After the error, the user can switch windows\n    Utils.registerGlobalVariable('uploader', 'totalProgress', 100);\n  }\n\n  onFileRetry = () => {\n    // todo, cancel upload file, uploded again;\n  }\n\n  onBeforeCancel = () => {\n    // todo, giving a pop message ?\n  }\n\n  onCancel = () => {\n\n  }\n\n  setHeaders = (resumableFile, resumable) => {\n    let offset = resumable.offset;\n    let chunkSize = resumable.getOpt('chunkSize');\n    let fileSize = resumableFile.size === 0 ? 1 : resumableFile.size;\n    let startByte = offset !== 0 ? offset * chunkSize : 0;\n    let endByte = Math.min(fileSize, (offset + 1) * chunkSize) - 1;\n\n    if (fileSize - resumable.endByte < chunkSize && !resumable.getOpt('forceChunkSize')) {\n      endByte = fileSize;\n    }\n\n    let headers = {\n      'Accept': 'application/json; text/javascript, */*; q=0.01',\n      'Content-Disposition': 'attachment; filename=\"' + encodeURI(resumableFile.fileName) + '\"',\n      'Content-Range': 'bytes ' + startByte + '-' + endByte + '/' + fileSize,\n    };\n\n    return headers;\n  }\n\n  setQuery = (resumableFile) => {\n    let formData = resumableFile.formData;\n    return formData;\n  }\n\n  generateUniqueIdentifier = (file) => {\n    let relativePath = file.webkitRelativePath||file.relativePath||file.fileName||file.name;\n    return MD5(relativePath + new Date()) + relativePath;\n  }\n\n  onClick = (e) => {\n    e.nativeEvent.stopImmediatePropagation();\n    e.stopPropagation();\n  }\n\n  onFileUpload = () => {\n    this.uploadInput.current.removeAttribute('webkitdirectory');\n\n    this.uploadInput.current.click();\n  }\n\n  onFolderUpload = () => {\n    this.uploadInput.current.setAttribute('webkitdirectory', 'webkitdirectory');\n    this.uploadInput.current.click();\n  }\n\n  onDragStart = () => {\n    this.uploadInput.current.setAttribute('webkitdirectory', 'webkitdirectory');\n  }\n\n  onCloseUploadDialog = () => {\n    this.loaded = 0;\n    this.resumable.files = [];\n    // reset upload link loaded\n    this.isUploadLinkLoaded = false;\n    this.setState({isUploadProgressDialogShow: false, uploadFileList: [], forbidUploadFileList: []});\n    Utils.registerGlobalVariable('uploader', 'isUploadProgressDialogShow', false);\n  }\n\n  onUploadCancel = (uploadingItem) => {\n\n    let uploadFileList = this.state.uploadFileList.filter(item => {\n      if (item.uniqueIdentifier === uploadingItem.uniqueIdentifier) {\n        item.cancel(); // execute cancel function will delete the file at the same time\n        return false;\n      }\n      return true;\n    });\n\n    if (!this.resumable.isUploading()) {\n      this.setState({\n        totalProgress: '100',\n        allFilesUploaded: true,\n      });\n      this.loaded = 0;\n    }\n\n    this.setState({uploadFileList: uploadFileList});\n  }\n\n  onCancelAllUploading = () => {\n    let uploadFileList = this.state.uploadFileList.filter(item => {\n      if (Math.round(item.progress() !== 1)) {\n        item.cancel();\n        return false;\n      }\n      return true;\n    });\n\n    this.loaded = 0;\n\n    this.setState({\n      allFilesUploaded: true,\n      totalProgress: '100',\n      uploadFileList: uploadFileList\n    });\n    // reset upload link loaded\n    this.isUploadLinkLoaded = false;\n  }\n\n  onUploadRetry = (resumableFile) => {\n\n    seafileAPI.getFileServerUploadLink(this.props.repoID, this.props.path).then(res => {\n      this.resumable.opts.target = res.data + '?ret-json=1';\n\n      let retryFileList = this.state.retryFileList.filter(item => {\n        return item.uniqueIdentifier !== resumableFile.uniqueIdentifier;\n      });\n      let uploadFileList = this.state.uploadFileList.map(item => {\n        if (item.uniqueIdentifier === resumableFile.uniqueIdentifier) {\n          item.error = null;\n          this.retryUploadFile(item);\n        }\n        return item;\n      });\n\n      this.setState({\n        retryFileList: retryFileList,\n        uploadFileList: uploadFileList\n      });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  onUploadRetryAll = () => {\n\n    seafileAPI.getFileServerUploadLink(this.props.repoID, this.props.path).then(res => {\n      this.resumable.opts.target = res.data + '?ret-json=1';\n      this.state.retryFileList.forEach(item => {\n        item.error = false;\n        this.retryUploadFile(item);\n      });\n\n      let uploadFileList = this.state.uploadFileList.slice(0);\n      this.setState({\n        retryFileList: [],\n        uploadFileList: uploadFileList\n      });\n\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  retryUploadFile = (resumableFile) => {\n    let { repoID, path } = this.props;\n    let fileName = resumableFile.fileName;\n    let isFile = resumableFile.fileName === resumableFile.relativePath;\n    if (!isFile) {\n      let relative_path = resumableFile.formData.relative_path;\n      let prefix = path === '/' ? (path + relative_path) : (path + '/' + relative_path);\n      fileName = prefix + fileName;\n    }\n\n    resumableFile.bootstrap();\n    var firedRetry = false;\n    resumableFile.resumableObj.on('chunkingComplete', () => {\n      if(!firedRetry) {\n        seafileAPI.getFileUploadedBytes(repoID, path, fileName).then(res => {\n          let uploadedBytes = res.data.uploadedBytes;\n          let blockSize = parseInt(resumableUploadFileBlockSize) * 1024 * 1024 || 1024 * 1024;\n          let offset = Math.floor(uploadedBytes / blockSize);\n          resumableFile.markChunksCompleted(offset);\n\n          resumableFile.resumableObj.upload();\n\n        }).catch(error => {\n          let errMessage = Utils.getErrorMsg(error);\n          toaster.danger(errMessage);\n        });\n      }\n      firedRetry = true;\n    });\n\n  }\n\n  replaceRepetitionFile = () => {\n    let { repoID, path } = this.props;\n    seafileAPI.getUpdateLink(repoID, path).then(res => {\n      this.resumable.opts.target = res.data;\n\n      let resumableFile = this.resumable.files[this.resumable.files.length - 1];\n      resumableFile.formData['replace'] = 1;\n      resumableFile.formData['target_file'] = resumableFile.formData.parent_dir + resumableFile.fileName;\n      this.setState({isUploadRemindDialogShow: false});\n      this.setUploadFileList(this.resumable.files);\n      this.resumable.upload();\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  uploadFile = () => {\n    let resumableFile = this.resumable.files[this.resumable.files.length - 1];\n    let { repoID, path } = this.props;\n    seafileAPI.getFileServerUploadLink(repoID, path).then((res) => {  // get upload link\n      this.resumable.opts.target = res.data + '?ret-json=1';\n      this.setState({\n        isUploadRemindDialogShow: false,\n        isUploadProgressDialogShow: true,\n        uploadFileList: [...this.state.uploadFileList, resumableFile]\n      }, () => {\n        this.resumable.upload();\n      });\n      Utils.registerGlobalVariable('uploader', 'isUploadProgressDialogShow', true);\n\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  cancelFileUpload = () => {\n    this.resumable.files.pop(); //delete latest file\n    this.setState({isUploadRemindDialogShow: false});\n  }\n\n  render() {\n    return (\n      <Fragment>\n        <div className=\"file-uploader-container\">\n          <div className=\"file-uploader\">\n            <input className=\"upload-input\" type=\"file\" ref={this.uploadInput} onClick={this.onClick}/>\n          </div>\n        </div>\n        {this.state.isUploadRemindDialogShow &&\n          <UploadRemindDialog\n            currentResumableFile={this.state.currentResumableFile}\n            replaceRepetitionFile={this.replaceRepetitionFile}\n            uploadFile={this.uploadFile}\n            cancelFileUpload={this.cancelFileUpload}\n          />\n        }\n        {this.state.isUploadProgressDialogShow &&\n          <UploadProgressDialog\n            retryFileList={this.state.retryFileList}\n            uploadFileList={this.state.uploadFileList}\n            forbidUploadFileList={this.state.forbidUploadFileList}\n            totalProgress={this.state.totalProgress}\n            uploadBitrate={this.state.uploadBitrate}\n            allFilesUploaded={this.state.allFilesUploaded}\n            onCloseUploadDialog={this.onCloseUploadDialog}\n            onCancelAllUploading={this.onCancelAllUploading}\n            onUploadCancel={this.onUploadCancel}\n            onUploadRetry={this.onUploadRetry}\n            onUploadRetryAll={this.onUploadRetryAll}\n          />\n        }\n      </Fragment>\n    );\n  }\n}\n\nFileUploader.propTypes = propTypes;\n\nexport default FileUploader;\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Modal, ModalHeader, ModalBody, ModalFooter, Button } from 'reactstrap';\nimport { gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\n\nconst propTypes = {\n  repoID: PropTypes.string.isRequired,\n  path: PropTypes.string.isRequired,\n  deleteFolder: PropTypes.func.isRequired,\n  toggleDialog: PropTypes.func.isRequired\n};\n\nclass DeleteFolderDialog extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      sharedToUserCount: 0,\n      sharedToGroupCount: 0\n    };\n  }\n\n  componentDidMount() {\n    const { repoID, path } = this.props;\n    seafileAPI.getRepoFolderShareInfo(repoID, path).then((res) => {\n      this.setState({\n        sharedToUserCount: res.data['shared_user_emails'].length,\n        sharedToGroupCount: res.data['shared_group_ids'].length\n      });\n    });\n  }\n\n  deleteFolder = () => {\n    this.props.deleteFolder();\n    this.props.toggleDialog();\n  }\n\n  render() {\n    const { sharedToUserCount, sharedToGroupCount } = this.state;\n    const { path, toggleDialog } = this.props;\n    const folderName = Utils.getFileName(path);\n    const opTarget = '<span class=\"op-target\">' + Utils.HTMLescape(folderName) + '</span>';\n    const message = gettext('Are you sure you want to delete %s ?').replace('%s', opTarget);\n\n    let alert_message = '';\n    if (sharedToUserCount > 0 || sharedToGroupCount > 0) {\n      alert_message = gettext('This folder has been shared to {user_amount} user(s) and {group_amount} group(s).')\n        .replace('{user_amount}', sharedToUserCount)\n        .replace('{group_amount}', sharedToGroupCount);\n    }\n\n    return (\n      <Modal isOpen={true} toggle={toggleDialog}>\n        <ModalHeader toggle={toggleDialog}>{gettext('Delete Folder')}</ModalHeader>\n        <ModalBody>\n          <p dangerouslySetInnerHTML={{__html: message}}></p>\n          {alert_message && <p className=\"error\">{alert_message}</p>}\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={toggleDialog}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.deleteFolder}>{gettext('Delete')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nDeleteFolderDialog.propTypes = propTypes;\n\nexport default DeleteFolderDialog;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport cookie from 'react-cookies';\nimport moment from 'moment';\nimport { navigate } from '@gatsbyjs/reach-router';\nimport { gettext, siteRoot, username, isDocs, enableVideoThumbnail } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport collabServer from '../../utils/collab-server';\nimport Dirent from '../../models/dirent';\nimport FileTag from '../../models/file-tag';\nimport RepoTag from '../../models/repo-tag';\nimport RepoInfo from '../../models/repo-info';\nimport TreeNode from '../../components/tree-view/tree-node';\nimport treeHelper from '../../components/tree-view/tree-helper';\nimport toaster from '../../components/toast';\nimport ModalPortal from '../../components/modal-portal';\nimport LibDecryptDialog from '../../components/dialog/lib-decrypt-dialog';\nimport LibContentToolbar from './lib-content-toolbar';\nimport LibContentContainer from './lib-content-container';\nimport FileUploader from '../../components/file-uploader/file-uploader';\nimport CopyMoveDirentProgressDialog from '../../components/dialog/copy-move-dirent-progress-dialog';\nimport DeleteFolderDialog from '../../components/dialog/delete-folder-dialog';\n\nconst propTypes = {\n  pathPrefix: PropTypes.array.isRequired,\n  onTabNavClick: PropTypes.func.isRequired,\n  onMenuClick: PropTypes.func.isRequired,\n  repoID: PropTypes.string,\n};\n\nclass LibContentView extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      currentMode: cookie.load('seafile_view_mode') || 'list',\n      path: '',\n      pathExist: true,\n      isViewFile: false,\n      hash: '',\n      currentRepoInfo: null,\n      repoName: '',\n      repoEncrypted: false,\n      libNeedDecrypt: false,\n      isGroupOwnedRepo: false,\n      userPerm: '',\n      selectedDirentList: [],\n      isDraft: false,\n      hasDraft: false,\n      fileTags: [],\n      draftID: '',\n      draftCounts: 0,\n      usedRepoTags: [],\n      readmeMarkdown: null,\n      isTreeDataLoading: true,\n      treeData: treeHelper.buildTree(),\n      currentNode: null,\n      isFileLoading: true,\n      isFileLoadedErr: false,\n      filePermission: '',\n      content: '',\n      lastModified: '',\n      latestContributor: '',\n      isDirentListLoading: true,\n      direntList: [],\n      isDirentSelected: false,\n      sortBy: cookie.load('seafile-repo-dir-sort-by') || 'name', // 'name' or 'time' or 'size'\n      sortOrder: cookie.load('seafile-repo-dir-sort-order') || 'asc', // 'asc' or 'desc'\n      isAllDirentSelected: false,\n      dirID: '',  // for update dir list\n      errorMsg: '',\n      isDirentDetailShow: false,\n      direntDetailPanelTab: '',\n      updateDetail: false,\n      itemsShowLength: 100,\n      isSessionExpired: false,\n      isCopyMoveProgressDialogShow: false,\n      isDeleteFolderDialogOpen: false,\n      asyncCopyMoveTaskId: '',\n      asyncOperationType: 'move',\n      asyncOperationProgress: 0,\n      asyncOperatedFilesLength: 0,\n    };\n\n    this.oldonpopstate = window.onpopstate;\n    window.onpopstate = this.onpopstate;\n    this.lastModifyTime = new Date();\n    this.isNeedUpdateHistoryState = true; // Load, refresh page, switch mode for the first time, no need to set historyState\n    this.currentMoveItemName = '';\n    this.currentMoveItemPath = '';\n  }\n\n  showDirentDetail = (direntDetailPanelTab) => {\n    if (direntDetailPanelTab) {\n      this.setState({ direntDetailPanelTab: direntDetailPanelTab }, () => {\n        this.setState({ isDirentDetailShow: true });\n      });\n    } else {\n      this.setState({\n        direntDetailPanelTab: '',\n        isDirentDetailShow: true\n      });\n    }\n  }\n\n  toggleDirentDetail = () => {\n    this.setState({\n      direntDetailPanelTab: '',\n      isDirentDetailShow: !this.state.isDirentDetailShow\n    });\n  }\n\n  closeDirentDetail = () => {\n    this.setState({\n      isDirentDetailShow: false,\n      direntDetailPanelTab: '',\n    });\n  }\n\n  componentWillMount() {\n    const hash = window.location.hash;\n    if (hash.slice(0, 1) === '#') {\n      this.setState({hash: hash});\n    }\n  }\n\n  async componentDidMount() {\n    // eg: http://127.0.0.1:8000/library/repo_id/repo_name/**/**/\\\n    let repoID = this.props.repoID;\n    let location = window.location.href.split('#')[0];\n    location = decodeURIComponent(location);\n    let path = location.slice(location.indexOf(repoID) + repoID.length + 1); // get the string after repoID\n    path = path.slice(path.indexOf('/')); // get current path\n\n    try {\n      const repoRes = await seafileAPI.getRepoInfo(repoID);\n      const repoInfo = new RepoInfo(repoRes.data);\n      const isGroupOwnedRepo = repoInfo.owner_email.indexOf('@seafile_group') > -1;\n\n      this.setState({\n        currentRepoInfo: repoInfo,\n      });\n\n      if (repoInfo.permission.startsWith('custom-')) {\n        const permissionID = repoInfo.permission.split('-')[1];\n        const permissionRes = await seafileAPI.getCustomPermission(repoID, permissionID);\n        window.custom_permission = permissionRes.data.permission;\n      }\n\n      this.isNeedUpdateHistoryState = false;\n      this.setState({\n        repoName: repoInfo.repo_name,\n        libNeedDecrypt: repoInfo.lib_need_decrypt,\n        repoEncrypted: repoInfo.encrypted,\n        isGroupOwnedRepo: isGroupOwnedRepo,\n        path: path\n      });\n\n      if (!repoInfo.lib_need_decrypt) {\n        this.loadDirData(path);\n      }\n    } catch (error) {\n      if (error.response) {\n        if (error.response.status == 403) {\n          this.setState({\n            isDirentListLoading: false,\n            errorMsg: gettext('Permission denied')\n          });\n\n          let errorMsg = gettext('Permission denied');\n          toaster.danger(errorMsg);\n        } else if (error.response.status == 404) {\n          this.setState({\n            isDirentListLoading: false,\n            errorMsg: gettext('Library share permission not found.')\n          });\n        } else {\n          this.setState({\n            isDirentListLoading: false,\n            errorMsg: gettext('Error')\n          });\n        }\n      } else {\n        this.setState({\n          isDirentListLoading: false,\n          errorMsg: gettext('Please check the network.')\n        });\n      }\n    }\n  }\n\n  componentWillUnmount() {\n    window.onpopstate = this.oldonpopstate;\n    collabServer.unwatchRepo(this.props.repoID, this.onRepoUpdateEvent);\n  }\n\n  componentDidUpdate() {\n    this.lastModifyTime = new Date();\n  }\n\n  onpopstate = (event) => {\n    if (event.state && event.state.key) { // root path\n      if (this.state.path === '/') {\n        return;\n      } else {\n        let path = '/';\n        this.loadDirentList(path);\n        this.setState({\n          path: path,\n          isViewFile: false\n        });\n      }\n    } else if (event.state && event.state.path) { // file path\n      let path = event.state.path;\n      if (this.state.currentMode === 'column') {\n        if (Utils.isMarkdownFile(path)) { // Judging not strict\n          this.showFile(path);\n          return;\n        }\n      }\n      this.loadDirentList(path);\n      this.setState({\n        path: path,\n        isViewFile: false\n      });\n    }\n  }\n\n  onRepoUpdateEvent = () => {\n    let currentTime = new Date();\n    if ((parseFloat(currentTime - this.lastModifyTime)/1000) <= 5) {\n      return;\n    }\n    let repoID = this.props.repoID;\n    let { path, dirID } = this.state;\n\n    if (this.state.currentMode === 'column') {\n      if (this.state.isViewFile) {\n        this.updateColumnMarkdownData(path);\n      } else {\n        seafileAPI.dirMetaData(repoID, path).then((res) => {\n          if (res.data.id !== dirID) {\n            this.loadDirentList(path);\n          }\n        }).catch(error => {\n          let errMessage = Utils.getErrorMsg(error);\n          toaster.danger(errMessage);\n        });\n      }\n    } else {\n      seafileAPI.dirMetaData(repoID, path).then((res) => {\n        if (res.data.id !== dirID) {\n          this.loadDirentList(path);\n        }\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    }\n  }\n\n  updateUsedRepoTags = () => {\n    let repoID = this.props.repoID;\n    seafileAPI.listRepoTags(repoID).then(res => {\n      let usedRepoTags = [];\n      res.data.repo_tags.forEach(item => {\n        let usedRepoTag = new RepoTag(item);\n        if (usedRepoTag.fileCount > 0) {\n          usedRepoTags.push(usedRepoTag);\n        }\n      });\n      this.setState({usedRepoTags: usedRepoTags});\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  updateReadmeMarkdown = (direntList) => {\n    this.setState({readmeMarkdown: null});\n    direntList.some(item => {\n      let fileName = item.name.toLowerCase();\n      if (fileName === 'readme.md' || fileName === 'readme.markdown') {\n        this.setState({readmeMarkdown: item});\n        return true;\n      }\n    });\n  }\n\n  updateColumnMarkdownData = (filePath) => {\n    let repoID = this.props.repoID;\n    // update state\n    this.setState({\n      path: filePath,\n      isViewFile: true\n    });\n\n    // update data\n    seafileAPI.getFileInfo(repoID, filePath).then((res) => {\n      let { mtime, permission, last_modifier_name, is_draft, has_draft, draft_id } = res.data;\n      seafileAPI.getFileDownloadLink(repoID, filePath).then((res) => {\n        seafileAPI.getFileContent(res.data).then((res) => {\n          if (this.state.content !== res.data) {\n            this.setState({isFileLoading: true});\n          }\n          this.setState({\n            content: res.data,\n            filePermission: permission,\n            latestContributor: last_modifier_name,\n            lastModified: moment.unix(mtime).fromNow(),\n            isFileLoading: false,\n            isFileLoadedErr: false,\n            isDraft: is_draft,\n            hasDraft: has_draft,\n            draftID: draft_id\n          });\n        });\n      });\n    }).catch(() => {\n      this.setState({\n        isFileLoading: false,\n        isFileLoadedErr: true,\n      });\n    });\n  }\n\n  // load data\n  loadDirData = (path) => {\n    let repoID = this.props.repoID;\n\n    // listen current repo\n    collabServer.watchRepo(repoID, this.onRepoUpdateEvent);\n\n    // list used FileTags\n    this.updateUsedRepoTags();\n\n    // list draft counts and review counts\n    if (isDocs) {\n      seafileAPI.getRepoDraftCounts(repoID).then(res => {\n        this.setState({\n          draftCounts: res.data.draft_counts,\n        });\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    }\n\n    if (Utils.isMarkdownFile(path)) {\n      seafileAPI.getFileInfo(this.props.repoID, path).then(() => {\n        if (this.state.currentMode !== 'column') {\n          cookie.save('seafile_view_mode', 'column');\n          this.setState({currentMode: 'column'});\n        }\n        this.loadSidePanel(path);\n        this.showFile(path);\n      }).catch(() => {\n        if (this.state.currentMode === 'column') { // After an error occurs, follow dir\n          this.loadSidePanel(path);\n          this.showDir(path);\n        } else {\n          this.showDir(path);\n        }\n      });\n    } else {\n      if (this.state.currentMode === 'column') {\n        this.loadSidePanel(path);\n        this.showDir(path);\n      } else {\n        this.showDir(path);\n      }\n    }\n  }\n\n  loadSidePanel = (path) => {\n    let repoID = this.props.repoID;\n    if (path === '/') {\n      seafileAPI.listDir(repoID, '/').then(res => {\n        const { dirent_list, user_perm } = res.data;\n        let tree = this.state.treeData;\n        this.addResponseListToNode(dirent_list, tree.root);\n        this.setState({\n          isTreeDataLoading: false,\n          treeData: tree,\n          userPerm: user_perm,\n        });\n      }).catch(() => {\n        this.setState({isTreeDataLoading: false});\n      });\n    } else {\n      this.loadNodeAndParentsByPath(path);\n    }\n  }\n\n  showDir = (path) => {\n    let repoID = this.props.repoID;\n\n    if (!this.state.isSessionExpired) {\n      // update stste\n      this.setState({\n        isDirentListLoading: true,\n        isViewFile: false,\n        selectedDirentList: [],\n      });\n    }\n\n    // update data\n    this.loadDirentList(path);\n    this.resetShowLength();\n\n    if (!this.isNeedUpdateHistoryState) {\n      this.isNeedUpdateHistoryState = true;\n      return;\n    }\n    // update location\n    let repoInfo = this.state.currentRepoInfo;\n    let url = siteRoot + 'library/' + repoID + '/' + encodeURIComponent(repoInfo.repo_name) + Utils.encodePath(path);\n    window.history.pushState({url: url, path: path}, path, url);\n  }\n\n  showFile = (filePath) => {\n    let repoID = this.props.repoID;\n\n    if (this.state.currentMode === 'column') {\n      seafileAPI.listFileTags(repoID, filePath).then(res => {\n        let fileTags = res.data.file_tags.map(item => {\n          return new FileTag(item);\n        });\n        this.setState({fileTags: fileTags});\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    }\n\n    // update state\n    this.setState({\n      isFileLoading: true,\n      path: filePath,\n      isViewFile: true\n    });\n\n    // update data\n    seafileAPI.getFileInfo(repoID, filePath).then((res) => {\n      let { mtime, permission, last_modifier_name, is_draft, has_draft, draft_id } = res.data;\n      seafileAPI.getFileDownloadLink(repoID, filePath).then((res) => {\n        seafileAPI.getFileContent(res.data).then((res) => {\n          this.setState({\n            content: res.data,\n            filePermission: permission,\n            latestContributor: last_modifier_name,\n            lastModified: moment.unix(mtime).fromNow(),\n            isFileLoading: false,\n            isFileLoadedErr: false,\n            isDraft: is_draft,\n            hasDraft: has_draft,\n            draftID: draft_id\n          });\n        });\n      });\n    }).catch((err) => {\n      let errMsg = Utils.getErrorMsg(err, true);\n      if (!err.response || err.response.status !== 403) {\n        toaster.danger(errMsg);\n      }\n      this.setState({\n        isFileLoading: false,\n        isFileLoadedErr: true,\n      });\n    });\n\n    // update location\n    let repoInfo = this.state.currentRepoInfo;\n    let url = siteRoot + 'library/' + repoID + '/' + encodeURIComponent(repoInfo.repo_name) + Utils.encodePath(filePath);\n    window.history.pushState({url: url, path: filePath}, filePath, url);\n  }\n\n  loadDirentList = (path) => {\n    let repoID = this.props.repoID;\n    seafileAPI.listDir(repoID, path, {'with_thumbnail': true}).then(res => {\n      let direntList = [];\n      let markdownItem = null;\n      res.data.dirent_list.forEach(item => {\n        let fileName = item.name.toLowerCase();\n        if (fileName === 'readme.md' || fileName === 'readme.markdown') {\n          markdownItem = item;\n        }\n        let dirent = new Dirent(item);\n        direntList.push(dirent);\n      });\n\n      this.setState({\n        pathExist: true,\n        userPerm: res.data.user_perm,\n        isDirentListLoading: false,\n        direntList: Utils.sortDirents(direntList, this.state.sortBy, this.state.sortOrder),\n        dirID: res.data.dir_id,\n        readmeMarkdown: markdownItem,\n        path: path,\n        isSessionExpired: false,\n      });\n\n      if (!this.state.repoEncrypted && direntList.length) {\n        this.getThumbnails(repoID, path, this.state.direntList);\n      }\n    }).catch((err) => {\n      Utils.getErrorMsg(err, true);\n      if (err.response && err.response.status === 403) {\n        this.setState({isDirentListLoading: false});\n        return;\n      }\n      this.setState({\n        isDirentListLoading: false,\n        pathExist: false,\n      });\n    });\n  }\n\n  onListContainerScroll = () => {\n    let itemsShowLength = this.state.itemsShowLength + 100;\n    this.setState({itemsShowLength: itemsShowLength});\n  }\n\n  resetShowLength = () => {\n    this.setState({itemsShowLength: 100});\n  }\n\n  getThumbnails = (repoID, path, direntList) => {\n    let items = direntList.filter((item) => {\n      return (Utils.imageCheck(item.name) || (enableVideoThumbnail && Utils.videoCheck(item.name))) && !item.encoded_thumbnail_src;\n    });\n    if (items.length == 0) {\n      return ;\n    }\n\n    const _this = this;\n    const len = items.length;\n    const thumbnailSize = 48;\n    let getThumbnail = (i) => {\n      const curItem = items[i];\n      const curItemPath = [path, curItem.name].join('/');\n      seafileAPI.createThumbnail(repoID, curItemPath, thumbnailSize).then((res) => {\n        curItem.encoded_thumbnail_src = res.data.encoded_thumbnail_src;\n      }).catch((error) => {\n        // do nothing\n      }).then(() => {\n        if (i < len - 1) {\n          getThumbnail(++i);\n        } else {\n          _this.setState({\n            direntList: direntList\n          });\n        }\n      });\n    };\n    getThumbnail(0);\n  }\n\n  updateMoveCopyTreeNode = (path) => {\n    let repoID = this.props.repoID;\n\n    let tree = this.state.treeData.clone();\n    let node = tree.getNodeByPath(path);\n\n    let nodeChildren = node.children.map(item => item.object);\n    let nodeChildrenNames = nodeChildren.map(item => item.name);\n\n    seafileAPI.listDir(repoID, path).then(res => {\n      let newDirentList = res.data.dirent_list;\n      let newAddedDirents = newDirentList.filter(item => {\n        return !nodeChildrenNames.includes(item.name);\n      });\n      newAddedDirents.map(item => {\n        this.addNodeToTree(item.name, path, item.type);\n      });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  async getAsyncCopyMoveProgress() {\n    let { asyncOperationType, asyncCopyMoveTaskId } = this.state;\n    try {\n      let res = await seafileAPI.queryAsyncOperationProgress(asyncCopyMoveTaskId);\n      let data = res.data;\n      if (data.failed) {\n        let message = gettext('Failed to move files to another library.');\n        if (asyncOperationType === 'copy') {\n          message = gettext('Failed to copy files to another library.');\n        }\n        toaster.danger(message);\n        this.setState({\n          asyncOperationProgress: 0,\n          isCopyMoveProgressDialogShow: false,\n        });\n        return;\n      }\n\n      if (data.successful) {\n        if (asyncOperationType === 'move') {\n          if (this.currentMoveItemName && this.currentMoveItemPath) {\n            if (this.state.currentMode === 'column') {\n              this.deleteTreeNode(this.currentMoveItemPath);\n            }\n            this.moveDirent(this.currentMoveItemName);\n            this.currentMoveItemName = '';\n            this.currentMoveItemPath = '';\n          } else {\n            if (this.state.currentMode === 'column') {\n              let direntPaths = this.getSelectedDirentPaths();\n              this.deleteTreeNodes(direntPaths);\n            }\n            let direntNames = this.getSelectedDirentNames();\n            this.moveDirents(direntNames);\n          }\n        }\n\n        this.setState({isCopyMoveProgressDialogShow: false});\n        let message = gettext('Successfully moved files to another library.');\n        if (asyncOperationType === 'copy') {\n          message = gettext('Successfully copied files to another library.');\n        }\n        toaster.success(message);\n        return;\n      }\n      // init state: total is 0\n      let asyncOperationProgress = !data.total ? 0 : parseInt((data.done/data.total * 100).toFixed(2));\n\n      this.getAsyncCopyMoveProgress();\n      this.setState({asyncOperationProgress: asyncOperationProgress});\n    } catch (error) {\n      this.setState({\n        asyncOperationProgress: 0,\n        isCopyMoveProgressDialogShow: false,\n      });\n    }\n  }\n\n  cancelCopyMoveDirent = () => {\n    let taskId = this.state.asyncCopyMoveTaskId;\n    seafileAPI.cancelCopyMoveOperation(taskId);\n\n    this.currentMoveItemName = '';\n    this.currentMoveItemPath = '';\n    let direntList = this.state.direntList;\n    this.setState({direntList: direntList.slice(0)});\n  }\n\n  onMoveProgressDialogToggle = () => {\n    let { asyncOperationProgress } = this.state;\n    if (asyncOperationProgress !== 100) {\n      this.cancelCopyMoveDirent();\n    }\n\n    this.setState({\n      asyncOperationProgress: 0,\n      isCopyMoveProgressDialogShow: false,\n    });\n  }\n\n  // toolbar operations\n  onMoveItems = (destRepo, destDirentPath) => {\n    let repoID = this.props.repoID;\n    let selectedDirentList = this.state.selectedDirentList;\n    if (repoID !== destRepo.repo_id) {\n      this.setState(() => ({\n        asyncOperatedFilesLength: selectedDirentList.length,\n        asyncOperationProgress: 0,\n        asyncOperationType: 'move',\n        isCopyMoveProgressDialogShow: true\n      }));\n    }\n\n    let dirNames = this.getSelectedDirentNames();\n    let direntPaths = this.getSelectedDirentPaths();\n    seafileAPI.moveDir(repoID, destRepo.repo_id, destDirentPath, this.state.path, dirNames).then(res => {\n      if (repoID !== destRepo.repo_id) {\n        this.setState({\n          asyncCopyMoveTaskId: res.data.task_id,\n        }, () => {\n          // After moving successfully, delete related files\n          this.getAsyncCopyMoveProgress();\n        });\n      }\n\n      if (repoID === destRepo.repo_id) {\n        if (this.state.currentMode === 'column') {\n          this.deleteTreeNodes(direntPaths);\n        }\n\n        this.moveDirents(dirNames);\n\n        // 2. tow columns mode need update left tree\n        if (this.state.currentMode === 'column') {\n          this.updateMoveCopyTreeNode(destDirentPath);\n        }\n\n        // show tip message if move to current repo\n        let message =  Utils.getMoveSuccessMessage(dirNames);\n        toaster.success(message);\n      }\n\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      if (errMessage === gettext('Error')) {\n        errMessage = Utils.getMoveFailedMessage(dirNames);\n      }\n      this.setState({\n        asyncOperationProgress: 0,\n        isCopyMoveProgressDialogShow: false,\n      });\n      toaster.danger(errMessage);\n    });\n  }\n\n  onCopyItems = (destRepo, destDirentPath) => {\n    let repoID = this.props.repoID;\n    let selectedDirentList = this.state.selectedDirentList;\n\n    if (repoID !== destRepo.repo_id) {\n      this.setState({\n        asyncOperatedFilesLength: selectedDirentList.length,\n        asyncOperationProgress: 0,\n        asyncOperationType: 'copy',\n        isCopyMoveProgressDialogShow: true\n      });\n    }\n\n    let dirNames = this.getSelectedDirentNames();\n    seafileAPI.copyDir(repoID, destRepo.repo_id, destDirentPath, this.state.path, dirNames).then(res => {\n      if (repoID !== destRepo.repo_id) {\n        this.setState({\n          asyncCopyMoveTaskId: res.data.task_id,\n        }, () => {\n          this.getAsyncCopyMoveProgress();\n        });\n      }\n\n      if (repoID === destRepo.repo_id) {\n        if (this.state.currentMode === 'column') {\n          this.updateMoveCopyTreeNode(destDirentPath);\n        }\n\n        if (destDirentPath === this.state.path) {\n          this.loadDirentList(this.state.path);\n        }\n\n        // show tip message if copy to current repo\n        let message =  Utils.getCopySuccessfulMessage(dirNames);\n        toaster.success(message);\n      }\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      if (errMessage === gettext('Error')) {\n        errMessage = Utils.getCopyFailedMessage(dirNames);\n      }\n      toaster.danger(errMessage);\n    });\n  }\n\n  restoreDeletedDirents = (commitID, paths, e) => {\n    const { repoID } = this.props;\n    e.preventDefault();\n    toaster.closeAll();\n    seafileAPI.restoreDirents(repoID, commitID, paths).then(res => {\n      const { success, failed } = res.data;\n      success.forEach(dirent => {\n        let name = Utils.getFileName(dirent.path);\n        let parentPath = Utils.getDirName(dirent.path);\n        if (!dirent.is_dir) {\n          if (this.state.currentMode === 'column') {\n            this.addNodeToTree(name, parentPath, 'file');\n          }\n          if (parentPath === this.state.path && !this.state.isViewFile) {\n            this.addDirent(name, 'file');\n          }\n        } else {\n          if (this.state.currentMode === 'column') {\n            this.addNodeToTree(name, parentPath, 'dir');\n          }\n          if (parentPath === this.state.path && !this.state.isViewFile) {\n            this.addDirent(name, 'dir');\n          }\n        }\n      });\n\n      if (success.length) {\n        let msg = success.length > 1 ? gettext('Restored {name} and {n} other items') :\n          gettext('Restored {name}');\n        msg = msg.replace('{name}', success[0].path.split('/').pop())\n          .replace('{n}', success.length - 1);\n        toaster.success(msg);\n      }\n\n      if (failed.length) {\n        let msg = failed.length > 1 ? gettext('Failed to restore {name} and {n} other items') :\n          gettext('Failed to restore {name}');\n        msg = msg.replace('{name}', failed[0].path.split('/').pop())\n          .replace('{n}', failed.length - 1);\n        toaster.danger(msg);\n      }\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  onDeleteItems = () => {\n    let repoID = this.props.repoID;\n    let direntPaths = this.getSelectedDirentPaths();\n    let dirNames = this.getSelectedDirentNames();\n\n    this.setState({updateDetail: !this.state.updateDetail});\n    seafileAPI.deleteMutipleDirents(repoID, this.state.path, dirNames).then(res => {\n      if (this.state.currentMode === 'column') {\n        this.deleteTreeNodes(direntPaths);\n      }\n\n      this.deleteDirents(dirNames);\n\n      let msg = '';\n      if (direntPaths.length > 1) {\n        msg = gettext('Successfully deleted {name} and {n} other items.');\n        msg = msg.replace('{name}', dirNames[0]);\n        msg = msg.replace('{n}', dirNames.length - 1);\n      } else {\n        msg = gettext('Successfully deleted {name}.');\n        msg = msg.replace('{name}', dirNames[0]);\n      }\n      const successTipWithUndo = (\n        <>\n          <span>{msg}</span>\n          <a className=\"action-link p-0 ml-1\" href=\"#\" onClick={this.restoreDeletedDirents.bind(this, res.data.commit_id, direntPaths)}>{gettext('Undo')}</a>\n        </>\n      );\n      toaster.success(successTipWithUndo, {duration: 5});\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      if (errMessage === gettext('Error')) {\n        errMessage = gettext('Failed to delete {name} and {n} other items.');\n        errMessage = errMessage.replace('{name}', dirNames[0]);\n        errMessage = errMessage.replace('{n}', dirNames.length - 1);\n      }\n      toaster.danger(errMessage);\n    });\n  }\n\n  onAddFolder = (dirPath) => {\n    let repoID = this.props.repoID;\n    seafileAPI.createDir(repoID, dirPath).then(() => {\n      let name = Utils.getFileName(dirPath);\n      let parentPath = Utils.getDirName(dirPath);\n\n      if (this.state.currentMode === 'column') {\n        this.addNodeToTree(name, parentPath, 'dir');\n      }\n\n      if (parentPath === this.state.path && !this.state.isViewFile) {\n        this.addDirent(name, 'dir');\n      }\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  onAddFile = (filePath, isMarkdownDraft, isSdocDraft) => {\n    let repoID = this.props.repoID;\n    seafileAPI.createFile(repoID, filePath, isMarkdownDraft).then(res => {\n      let name = Utils.getFileName(filePath);\n      let parentPath = Utils.getDirName(filePath);\n      if (this.state.currentMode === 'column') {\n        this.addNodeToTree(name, parentPath, 'file');\n      }\n      if (parentPath === this.state.path && !this.state.isViewFile) {\n        if (isSdocDraft) { // the new file is marked to be draft\n          seafileAPI.sdocMarkAsDraft(repoID, filePath).then((res) => {\n            this.addDirent(name, 'file', res.data.size, isSdocDraft);\n          }).catch(error => {\n            let errMessage = Utils.getErrorMsg(error);\n            toaster.danger(errMessage);\n            this.addDirent(name, 'file', res.data.size);\n          });\n          return;\n        }\n\n        this.addDirent(name, 'file', res.data.size);\n      }\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  switchViewMode = (mode) => {\n    if (mode === this.state.currentMode) {\n      return;\n    }\n    if (mode === 'detail') {\n      this.toggleDirentDetail();\n      return;\n    }\n    cookie.save('seafile_view_mode', mode);\n    let path = this.state.path;\n    if (this.state.currentMode === 'column' && this.state.isViewFile) {\n      path = Utils.getDirName(path);\n      this.setState({\n        path: path,\n        isViewFile: false,\n      });\n      let repoInfo = this.state.currentRepoInfo;\n\n      let url = siteRoot + 'library/' + repoInfo.repo_id + '/' + encodeURIComponent(repoInfo.repo_name) + Utils.encodePath(path);\n      window.history.pushState({url: url, path: path}, path, url);\n    }\n\n    if (mode === 'column') {\n      this.loadSidePanel(this.state.path);\n    }\n    this.isNeedUpdateHistoryState = false;\n    this.setState({currentMode: mode});\n    this.showDir(path);\n  }\n\n  onSearchedClick = (item) => {\n    let path = item.is_dir ? item.path.slice(0, item.path.length - 1) : item.path;\n    if (this.state.currentPath === path) {\n      return;\n    }\n    if (this.state.currentMode === 'column') {\n      // load sidePanel\n      let index = -1;\n      let paths = Utils.getPaths(path);\n      for (let i = 0; i < paths.length; i++) {\n        let node = this.state.treeData.getNodeByPath(node);\n        if (!node) {\n          index = i;\n          break;\n        }\n      }\n      if (index === -1) { // all the data has been loaded already.\n        let node = this.state.treeData.getNodeByPath(path);\n        this.setState({currentNode: node});\n      } else {\n        this.loadNodeAndParentsByPath(path);\n      }\n\n      // load mainPanel\n      if (item.is_dir) {\n        this.showDir(path);\n      } else {\n        if (Utils.isMarkdownFile(path)) {\n          this.showFile(path);\n        } else {\n          let url = siteRoot + 'lib/' + item.repo_id + '/file' + Utils.encodePath(path);\n          let isWeChat = Utils.isWeChat();\n          if (!isWeChat) {\n            let newWindow = window.open('about:blank');\n            newWindow.location.href = url;\n          } else {\n            location.href = url;\n          }\n        }\n      }\n    } else {\n      if (item.is_dir) {\n        this.showDir(path);\n      } else {\n        let url = siteRoot + 'lib/' + item.repo_id + '/file' + Utils.encodePath(path);\n        let isWeChat = Utils.isWeChat();\n        if (!isWeChat) {\n          let newWindow = window.open('about:blank');\n          newWindow.location.href = url;\n        } else {\n          location.href = url;\n        }\n      }\n    }\n  }\n\n  onMainNavBarClick = (nodePath) => {\n    //just for dir\n    this.resetSelected();\n    if (this.state.currentMode === 'column') {\n      let tree = this.state.treeData.clone();\n      let node = tree.getNodeByPath(nodePath);\n      tree.expandNode(node);\n      this.setState({treeData: tree, currentNode: node});\n    }\n\n    this.showDir(nodePath);\n  }\n\n  onLinkClick = (link) => {\n    const url = link;\n    let repoID = this.props.repoID;\n    if (Utils.isInternalMarkdownLink(url, repoID)) {\n      let path = Utils.getPathFromInternalMarkdownLink(url, repoID);\n      this.showFile(path);\n    } else if (Utils.isInternalDirLink(url, repoID)) {\n      let path = Utils.getPathFromInternalDirLink(url, repoID);\n      this.showDir(path);\n    } else {\n      window.open(url);\n    }\n  }\n\n  // list&tree operations\n  onMainPanelItemRename = (dirent, newName) => {\n    let path = Utils.joinPath(this.state.path, dirent.name);\n    this.renameItem(path, dirent.isDir(), newName);\n  }\n\n  onMainPanelItemDelete = (dirent) => {\n    let path = Utils.joinPath(this.state.path, dirent.name);\n    this.deleteItem(path, dirent.isDir());\n  }\n\n  onRenameTreeNode = (node, newName) => {\n    this.renameItem(node.path, node.object.isDir(), newName);\n  }\n\n  onDeleteTreeNode = (node) => {\n    this.deleteItem(node.path, node.object.isDir());\n  }\n\n  renameItem = (path, isDir, newName) => {\n    let repoID = this.props.repoID;\n    if (isDir) {\n      seafileAPI.renameDir(repoID, path, newName).then(() => {\n        this.renameItemAjaxCallback(path, newName);\n      }).catch((error) => {\n        let errMessage = Utils.getErrorMsg(error);\n        if (errMessage === gettext('Error')) {\n          let name = Utils.getFileName(path);\n          errMessage = gettext('Renaming {name} failed').replace('{name}', name);\n        }\n        toaster.danger(errMessage);\n      });\n    } else {\n      seafileAPI.renameFile(repoID, path, newName).then(() => {\n        this.renameItemAjaxCallback(path, newName);\n      }).catch((error) => {\n        let errMessage = Utils.getErrorMsg(error);\n        if (errMessage === gettext('Error')) {\n          let name = Utils.getFileName(path);\n          errMessage = gettext('Renaming {name} failed').replace('{name}', name);\n        }\n        toaster.danger(errMessage);\n      });\n    }\n  }\n\n  renameItemAjaxCallback(path, newName) {\n    if (this.state.currentMode === 'column') {\n      this.renameTreeNode(path, newName);\n    }\n    this.renameDirent(path, newName);\n  }\n\n  toggleDeleteFolderDialog = () => {\n    this.setState({isDeleteFolderDialogOpen: !this.state.isDeleteFolderDialogOpen});\n  }\n\n  deleteFolder = () => {\n    const { repoID } = this.props;\n    const { folderToDelete: path } = this.state;\n    seafileAPI.deleteDir(repoID, path).then((res) => {\n      this.deleteItemAjaxCallback(path, true);\n      let name = Utils.getFileName(path);\n      var msg = gettext('Successfully deleted {name}').replace('{name}', name);\n      const successTipWithUndo = (\n        <>\n          <span>{msg}</span>\n          <a className=\"action-link p-0 ml-1\" href=\"#\" onClick={this.restoreDeletedDirents.bind(this, res.data.commit_id, [path])}>{gettext('Undo')}</a>\n        </>\n      );\n      toaster.success(successTipWithUndo, {duration: 5});\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      if (errMessage === gettext('Error')) {\n        let name = Utils.getFileName(path);\n        errMessage = gettext('Failed to delete {name}').replace('{name}', name);\n      }\n      toaster.danger(errMessage);\n    });\n  }\n\n  deleteItem(path, isDir) {\n    let repoID = this.props.repoID;\n    if (isDir) {\n      this.setState({ folderToDelete: path }, () => {\n        this.toggleDeleteFolderDialog();\n      });\n    } else {\n      seafileAPI.deleteFile(repoID, path).then((res) => {\n        this.deleteItemAjaxCallback(path, isDir);\n        let name = Utils.getFileName(path);\n        var msg = gettext('Successfully deleted {name}').replace('{name}', name);\n        const successTipWithUndo = (\n          <>\n            <span>{msg}</span>\n            <a className=\"action-link p-0 ml-1\" href=\"#\" onClick={this.restoreDeletedDirents.bind(this, res.data.commit_id, [path])}>{gettext('Undo')}</a>\n          </>\n        );\n        toaster.success(successTipWithUndo, {duration: 5});\n      }).catch((error) => {\n        let errMessage = Utils.getErrorMsg(error);\n        if (errMessage === gettext('Error')) {\n          let name = Utils.getFileName(path);\n          errMessage = gettext('Failed to delete {name}').replace('{name}', name);\n        }\n        toaster.danger(errMessage);\n      });\n    }\n  }\n\n  deleteItemAjaxCallback(path) {\n    if (this.state.currentMode === 'column') {\n      this.deleteTreeNode(path);\n    }\n    this.deleteDirent(path);\n  }\n\n  // list operations\n  onMoveItem = (destRepo, dirent, moveToDirentPath, nodeParentPath) => {\n    let repoID = this.props.repoID;\n    //just for view list state\n    let dirName = dirent.name;\n    if (!nodeParentPath) {\n      nodeParentPath = this.state.path;\n    }\n    let direntPath = Utils.joinPath(nodeParentPath, dirName);\n\n    if (repoID !== destRepo.repo_id) {\n      this.setState({\n        asyncOperatedFilesLength: 1,\n        asyncOperationProgress: 0,\n        asyncOperationType: 'move',\n        isCopyMoveProgressDialogShow: true,\n      });\n    }\n\n    seafileAPI.moveDir(repoID, destRepo.repo_id, moveToDirentPath, nodeParentPath, dirName).then(res => {\n      if (repoID !== destRepo.repo_id) {\n        this.setState({asyncCopyMoveTaskId: res.data.task_id}, () => {\n          this.currentMoveItemName = dirName;\n          this.currentMoveItemPath = direntPath;\n          this.getAsyncCopyMoveProgress(dirName, direntPath);\n        });\n      }\n\n      if (this.state.currentMode === 'column') {\n        this.deleteTreeNode(direntPath);\n      }\n\n      // 1. move to current repo\n      // 2. tow columns mode need update left tree\n      if (repoID === destRepo.repo_id && this.state.currentMode === 'column') {\n        this.updateMoveCopyTreeNode(moveToDirentPath);\n      }\n\n      this.moveDirent(direntPath, moveToDirentPath);\n\n      // show tip message if move to current repo\n      if (repoID === destRepo.repo_id) {\n        let message = gettext('Successfully moved {name}.');\n        message = message.replace('{name}', dirName);\n        toaster.success(message);\n      }\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      if (errMessage === gettext('Error')) {\n        errMessage = gettext('Failed to move {name}.');\n        errMessage = errMessage.replace('{name}', dirName);\n      }\n      toaster.danger(errMessage);\n    });\n  }\n\n  onCopyItem = (destRepo, dirent, copyToDirentPath, nodeParentPath) => {\n    let repoID = this.props.repoID;\n    //just for view list state\n    let dirName = dirent.name;\n    if (!nodeParentPath) {\n      nodeParentPath = this.state.path;\n    }\n\n    if (repoID !== destRepo.repo_id) {\n      this.setState({\n        asyncOperatedFilesLength: 1,\n        asyncOperationProgress: 0,\n        asyncOperationType: 'copy',\n        isCopyMoveProgressDialogShow: true\n      });\n    }\n\n    seafileAPI.copyDir(repoID, destRepo.repo_id, copyToDirentPath, nodeParentPath, dirName).then(res => {\n\n      if (repoID !== destRepo.repo_id) {\n        this.setState({\n          asyncCopyMoveTaskId: res.data.task_id,\n        }, () => {\n          this.getAsyncCopyMoveProgress();\n        });\n      }\n\n      if (repoID === destRepo.repo_id) {\n        if (this.state.currentMode === 'column') {\n          this.updateMoveCopyTreeNode(copyToDirentPath);\n        }\n\n        if (copyToDirentPath === nodeParentPath) {\n          this.loadDirentList(this.state.path);\n        }\n\n        let message = gettext('Successfully copied %(name)s.');\n        message = message.replace('%(name)s', dirName);\n        toaster.success(message);\n      }\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      if (errMessage === gettext('Error')) {\n        errMessage = gettext('Failed to copy %(name)s');\n        errMessage = errMessage.replace('%(name)s', dirName);\n      }\n      toaster.danger(errMessage);\n    });\n  }\n\n  onDirentClick = (dirent) => {\n    let direntList = this.state.direntList.map(dirent => {\n      dirent.isSelected = false;\n      return dirent;\n    });\n    if (dirent) {\n      // dirent.isSelected = true;\n      this.setState({\n        direntList: direntList,\n        isDirentSelected: true,\n        selectedDirentList: [dirent],\n      });\n    } else {\n      this.setState({\n        direntList: direntList,\n        isDirentSelected: false,\n        selectedDirentList: [],\n      });\n    }\n  }\n\n  onItemClick = (dirent) => {\n    this.resetSelected();\n    let repoID = this.props.repoID;\n    let direntPath = Utils.joinPath(this.state.path, dirent.name);\n    if (dirent.isDir()) {  // is dir\n      if (this.state.currentMode === 'column') {\n        this.loadTreeNodeByPath(direntPath);\n      }\n      this.showDir(direntPath);\n    } else {  // is file\n      if (this.state.currentMode === 'column' && Utils.isMarkdownFile(direntPath)) {\n        this.showColumnMarkdownFile(direntPath);\n      } else {\n        let url = siteRoot + 'lib/' + repoID + '/file' + Utils.encodePath(direntPath);\n        if (dirent.is_sdoc_revision && dirent.revision_id) {\n          url = siteRoot + 'lib/' + repoID + '/revisions/' + dirent.revision_id + '/';\n        }\n\n        let isWeChat = Utils.isWeChat();\n        if (!isWeChat) {\n          window.open(url);\n        } else {\n          location.href = url;\n        }\n      }\n    }\n  }\n\n  onDirentSelected = (dirent) => {\n    let direntList = this.state.direntList.map(item => {\n      if (item.name === dirent.name) {\n        item.isSelected = !item.isSelected;\n      }\n      return item;\n    });\n    let selectedDirentList = direntList.filter(item => {\n      return item.isSelected;\n    });\n\n    if (selectedDirentList.length) {\n      this.setState({isDirentSelected: true});\n      if (selectedDirentList.length === direntList.length) {\n        this.setState({\n          isAllDirentSelected: true,\n          direntList: direntList,\n          selectedDirentList: selectedDirentList,\n        });\n      } else {\n        this.setState({\n          isAllDirentSelected: false,\n          direntList: direntList,\n          selectedDirentList: selectedDirentList\n        });\n      }\n    } else {\n      this.setState({\n        isDirentSelected: false,\n        isAllDirentSelected: false,\n        direntList: direntList,\n        selectedDirentList: []\n      });\n    }\n  }\n\n  onAllDirentSelected = () => {\n    if (this.state.isAllDirentSelected) {\n      let direntList = this.state.direntList.map(item => {\n        item.isSelected = false;\n        return item;\n      });\n      this.setState({\n        isDirentSelected: false,\n        isAllDirentSelected: false,\n        direntList: direntList,\n        selectedDirentList: [],\n      });\n    } else {\n      let direntList = this.state.direntList.map(item => {\n        item.isSelected = true;\n        return item;\n      });\n      this.setState({\n        isDirentSelected: true,\n        isAllDirentSelected: true,\n        direntList: direntList,\n        selectedDirentList: direntList,\n      });\n    }\n  }\n\n  onFileTagChanged = (dirent, direntPath) => {\n    let repoID = this.props.repoID;\n    seafileAPI.listFileTags(repoID, direntPath).then(res => {\n      let fileTags = res.data.file_tags.map(item => {\n        return new FileTag(item);\n      });\n\n      if (this.state.isViewFile) {\n        this.setState({fileTags: fileTags});\n      } else {\n        this.updateDirent(dirent, 'file_tags', fileTags);\n      }\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n\n    this.updateUsedRepoTags();\n  }\n\n  onFileUploadSuccess = (direntObject) => {\n    let isExist = this.state.direntList.some(item => {\n      return item.name === direntObject.name && item.type === direntObject.type;\n    });\n    if (isExist) {\n      let direntList = this.state.direntList;\n      for (let i = 0; i < direntList.length; i++) {\n        let dirent = direntList[i];\n        if (dirent.name === direntObject.name && dirent.type === direntObject.type) {\n          let mtime = moment.unix(direntObject.mtime).fromNow();\n          this.updateDirent(dirent, 'mtime', mtime);  // todo file size is need update too, api is not return;\n          break;\n        }\n      }\n    } else {\n      // use current dirent parent's permission as it's permission\n      direntObject.permission = this.state.userPerm;\n      let dirent = new Dirent(direntObject);\n      if (this.state.currentMode === 'column') {\n        this.addNodeToTree(dirent.name, this.state.path, dirent.type);\n      }\n      if (direntObject.type === 'dir') {\n        this.setState({direntList: [dirent, ...this.state.direntList]});\n      } else {\n        this.setState({direntList: [...this.state.direntList, dirent]});\n        this.updateReadmeMarkdown(this.state.direntList);\n      }\n    }\n  }\n\n  addDirent = (name, type, size, isSdocDraft) => {\n    let item = this.createDirent(name, type, size, isSdocDraft);\n    let direntList = this.state.direntList;\n    if (type === 'dir') {\n      direntList.unshift(item);\n    } else {\n      // there will be there conditions;\n      // first: direntList.length === 0;\n      // second: all the direntList's items are dir;\n      // third: direntList has dir and file;\n      let length = direntList.length;\n      if (length === 0 || direntList[length - 1].type === 'dir') {\n        direntList.push(item);\n      } else {\n        let index = 0;\n        for (let i = 0; i <= length; i++) {\n          if (direntList[i].type === 'file') {\n            index = i;\n            break;\n          }\n        }\n        direntList.splice(index, 0, item);\n      }\n    }\n    this.setState({direntList: direntList});\n    this.updateReadmeMarkdown(direntList);\n  }\n\n  renameDirent = (direntPath, newName) => {\n    let repoID = this.props.repoID;\n    let parentPath = Utils.getDirName(direntPath);\n    let newDirentPath = Utils.joinPath(parentPath, newName);\n    if (direntPath === this.state.path) {\n      // the renamed item is current viewed item\n      // example: direntPath = /A/B/C, state.path = /A/B/C\n\n      this.setState({ path: newDirentPath });\n      let repoInfo = this.state.currentRepoInfo;\n      let url = siteRoot + 'library/' + repoID + '/' + encodeURIComponent(repoInfo.repo_name) + newDirentPath;\n      window.history.replaceState({ url: url, path: newDirentPath}, newDirentPath, url);\n    } else if (Utils.isChildPath(direntPath, this.state.path)) {\n      // example: direntPath = /A/B/C/D, state.path = /A/B/C\n      let oldName = Utils.getFileName(direntPath);\n      let direntList = this.state.direntList.map(item => {\n        if (item.name === oldName) {\n          item.name = newName;\n        }\n        return item;\n      });\n      this.setState({ direntList: direntList });\n      this.updateReadmeMarkdown(direntList);\n    } else if (Utils.isAncestorPath(direntPath, this.state.path)) {\n      // example: direntPath = /A/B, state.path = /A/B/C\n      let newPath = Utils.renameAncestorPath(this.state.path, direntPath, newDirentPath);\n      this.setState({ path: newPath });\n\n      let repoInfo = this.state.currentRepoInfo;\n      let url = siteRoot + 'library/' + repoID + '/' + encodeURIComponent(repoInfo.repo_name) + newPath;\n      window.history.replaceState({ url: url, path: newPath}, newPath, url);\n    }\n  }\n\n  deleteDirent(direntPath) {\n    if (direntPath === this.state.path) {\n      // The deleted item is current item\n      let parentPath = Utils.getDirName(direntPath);\n      this.showDir(parentPath);\n    } else if (Utils.isChildPath(direntPath, this.state.path)) {\n      // The deleted item is inside current path\n      let name = Utils.getFileName(direntPath);\n      let direntList = this.state.direntList.filter(item => {\n        return item.name !== name;\n      });\n\n      // Recalculate the state of the selection\n      this.recaculateSelectedStateAfterDirentDeleted(name, direntList);\n\n      this.setState({direntList: direntList});\n      this.updateReadmeMarkdown(direntList);\n    } else if (Utils.isAncestorPath(direntPath, this.state.path)) {\n      // the deleted item is ancester of the current item\n      let parentPath = Utils.getDirName(direntPath);\n      this.showDir(parentPath);\n    }\n    // else do nothing\n  }\n\n  // only one scence: The deleted items are inside current path\n  deleteDirents = (direntNames) => {\n    let direntList = this.state.direntList.filter(item => {\n      return direntNames.indexOf(item.name) === -1;\n    });\n\n    // Recalculate the state of the selection\n    this.recaculateSelectedStateAfterDirentDeleted(name, direntList);\n\n    this.setState({direntList: direntList});\n    this.updateReadmeMarkdown(direntList);\n  }\n\n  moveDirent = (direntPath, moveToDirentPath = null) => {\n    let name = Utils.getFileName(direntPath);\n    if (moveToDirentPath === this.state.path) {\n      this.loadDirentList(this.state.path);\n      return;\n    }\n    let direntList = this.state.direntList.filter(item => {\n      return item.name !== name;\n    });\n\n    // Recalculate the state of the selection\n    this.recaculateSelectedStateAfterDirentDeleted(name, direntList);\n\n    this.setState({direntList: direntList});\n    this.updateReadmeMarkdown(direntList);\n  }\n\n  // only one scence: The moved items are inside current path\n  moveDirents = (direntNames) => {\n    let direntList = this.state.direntList.filter(item => {\n      return direntNames.indexOf(item.name) === -1;\n    });\n\n    // Recalculate the state of the selection\n    this.recaculateSelectedStateAfterDirentDeleted(name, direntList);\n\n    this.setState({direntList: direntList});\n    this.updateReadmeMarkdown(direntList);\n  }\n\n  updateDirent = (dirent, paramKey, paramValue) => {\n    let newDirentList = this.state.direntList.map(item => {\n      if (item.name === dirent.name) {\n        item[paramKey] = paramValue;\n      }\n      return item;\n    });\n    this.setState({direntList: newDirentList});\n  }\n\n  // tree operations\n  loadTreeNodeByPath = (path) => {\n    let repoID = this.props.repoID;\n    let tree = this.state.treeData.clone();\n    let node = tree.getNodeByPath(path);\n    if (!node.isLoaded) {\n      seafileAPI.listDir(repoID, node.path).then(res => {\n        this.addResponseListToNode(res.data.dirent_list, node);\n        let parentNode = tree.getNodeByPath(node.parentNode.path);\n        parentNode.isExpanded = true;\n        this.setState({\n          treeData: tree,\n          currentNode: node\n        });\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    } else {\n      let parentNode = tree.getNodeByPath(node.parentNode.path);\n      parentNode.isExpanded = true;\n      this.setState({treeData: tree, currentNode: node}); //tree\n    }\n  }\n\n  loadNodeAndParentsByPath = (path) => {\n    let repoID = this.props.repoID;\n    let tree = this.state.treeData.clone();\n    if (Utils.isMarkdownFile(path)) {\n      path = Utils.getDirName(path);\n    }\n    seafileAPI.listDir(repoID, path, {with_parents: true}).then(res => {\n      const { dirent_list: direntList, user_perm } = res.data;\n      let results = {};\n      for (let i = 0; i < direntList.length; i++) {\n        let object = direntList[i];\n        let parentDir = object.parent_dir;\n        let key = parentDir === '/' ?  '/' : parentDir.slice(0, parentDir.length - 1);\n        if (!results[key]) {\n          results[key] = [];\n        }\n        results[key].push(object);\n      }\n      for (let key in results) {\n        let node = tree.getNodeByPath(key);\n        if (!node.isLoaded) {\n          this.addResponseListToNode(results[key], node);\n        }\n      }\n      this.setState({\n        isTreeDataLoading: false,\n        treeData: tree,\n        userPerm: user_perm,\n      });\n    }).catch(() => {\n      this.setState({isLoadFailed: true});\n    });\n  }\n\n  onTreeNodeClick = (node) => {\n    this.resetSelected();\n    let repoID = this.props.repoID;\n    if (!this.state.pathExist) {\n      this.setState({pathExist: true});\n    }\n\n    if (node.object.isDir()) {\n      let isLoaded = node.isLoaded;\n      if (!node.isLoaded) {\n        let tree = this.state.treeData.clone();\n        node = tree.getNodeByPath(node.path);\n        seafileAPI.listDir(repoID, node.path).then(res => {\n          this.addResponseListToNode(res.data.dirent_list, node);\n          tree.collapseNode(node);\n          this.setState({treeData: tree});\n        }).catch(error => {\n          let errMessage = Utils.getErrorMsg(error);\n          toaster.danger(errMessage);\n        });\n      }\n      if (isLoaded && node.path === this.state.path) {\n        if (node.isExpanded) {\n          let tree = treeHelper.collapseNode(this.state.treeData, node);\n          this.setState({treeData: tree});\n        } else {\n          let tree = this.state.treeData.clone();\n          node = tree.getNodeByPath(node.path);\n          tree.expandNode(node);\n          this.setState({treeData: tree});\n        }\n      }\n    }\n\n    if (node.path === this.state.path ) {\n      return;\n    }\n\n    if (node.object.isDir()) {  // isDir\n      this.showDir(node.path);\n    } else {\n      if (Utils.isMarkdownFile(node.path)) {\n        if (node.path !== this.state.path) {\n          this.showColumnMarkdownFile(node.path);\n        }\n      } else {\n        let url = siteRoot + 'lib/' + repoID + '/file' + Utils.encodePath(node.path);\n        let dirent = node.object;\n        if (dirent.is_sdoc_revision && dirent.revision_id) {\n          url = siteRoot + 'lib/' + repoID + '/revisions/' + dirent.revision_id + '/';\n        }\n        window.open(url);\n      }\n    }\n  }\n\n  showColumnMarkdownFile = (filePath) => {\n    let repoID = this.props.repoID;\n    seafileAPI.getFileInfo(repoID, filePath).then((res) => {\n      if (res.data.size === 0) {\n        // loading of asynchronously obtained data may be blocked\n        const w = window.open('about:blank');\n        const url = siteRoot + 'lib/' + repoID + '/file' + Utils.encodePath(filePath);\n        w.location.href = url;\n      } else {\n        this.showFile(filePath);\n      }\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  onTreeNodeCollapse = (node) => {\n    let tree = treeHelper.collapseNode(this.state.treeData, node);\n    this.setState({treeData: tree});\n  }\n\n  onTreeNodeExpanded = (node) => {\n    let repoID = this.props.repoID;\n    let tree = this.state.treeData.clone();\n    node = tree.getNodeByPath(node.path);\n    if (!node.isLoaded) {\n      seafileAPI.listDir(repoID, node.path).then(res => {\n        this.addResponseListToNode(res.data.dirent_list, node);\n        this.setState({treeData: tree});\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    } else {\n      tree.expandNode(node);\n      this.setState({treeData: tree});\n    }\n  }\n\n  addNodeToTree = (name, parentPath, type) => {\n    let node = this.createTreeNode(name, type);\n    let tree = treeHelper.addNodeToParentByPath(this.state.treeData, node, parentPath);\n    this.setState({treeData: tree});\n  }\n\n  renameTreeNode = (path, newName) => {\n    let tree = treeHelper.renameNodeByPath(this.state.treeData, path, newName);\n    this.setState({treeData: tree});\n  }\n\n  deleteTreeNode = (path) => {\n    let tree = treeHelper.deleteNodeByPath(this.state.treeData, path);\n    this.setState({treeData: tree});\n  }\n\n  deleteTreeNodes = (paths) => {\n    let tree = treeHelper.deleteNodeListByPaths(this.state.treeData, paths);\n    this.setState({treeData: tree});\n  }\n\n  moveTreeNode = (nodePath, moveToPath, moveToRepo, nodeName) => {\n    let repoID = this.props.repoID;\n    if (repoID !== moveToRepo.repo_id) {\n      let tree = treeHelper.deleteNodeByPath(this.state.treeData, nodePath);\n      this.setState({treeData: tree});\n      return;\n    }\n    let tree = treeHelper.moveNodeByPath(this.state.treeData, nodePath, moveToPath, nodeName);\n    this.setState({treeData: tree});\n  }\n\n  copyTreeNode = (nodePath, copyToPath, destRepo, nodeName) => {\n    let repoID = this.props.repoID;\n    if (repoID !== destRepo.repo_id) {\n      return;\n    }\n    let tree = treeHelper.copyNodeByPath(this.state.treeData, nodePath, copyToPath, nodeName);\n    this.setState({treeData: tree});\n  }\n\n  createTreeNode(name, type) {\n    let object = this.createDirent(name, type);\n    return new TreeNode({object});\n  }\n\n  createDirent(name, type, size, isSdocDraft) {\n    // use current dirent parent's permission as it's permission\n    const { userPerm: permission } = this.state;\n    const mtime = new Date().getTime()/1000;\n    const obj = { name, type, mtime, size, permission };\n    if (isSdocDraft) {\n      obj.is_sdoc_draft = isSdocDraft;\n    }\n    const dirent = new Dirent(obj);\n    return dirent;\n  }\n\n  addResponseListToNode = (list, node) => {\n    node.isLoaded = true;\n    node.isExpanded = true;\n    let direntList = list.map(item => {\n      return new Dirent(item);\n    });\n    direntList = Utils.sortDirents(direntList, 'name', 'asc');\n\n    let nodeList = direntList.map(object => {\n      return new TreeNode({object});\n    });\n    node.addChildren(nodeList);\n  }\n\n  getSelectedDirentPaths = () => {\n    let paths = [];\n    this.state.selectedDirentList.forEach(selectedDirent => {\n      paths.push(Utils.joinPath(this.state.path, selectedDirent.name));\n    });\n    return paths;\n  }\n\n  getSelectedDirentNames = () => {\n    let names = [];\n    this.state.selectedDirentList.forEach(selectedDirent => {\n      names.push(selectedDirent.name);\n    });\n    return names;\n  }\n\n  resetSelected = () => {\n    this.setState({\n      isDirentSelected: false,\n      isAllDirentSelected: false,\n    });\n  }\n\n  recaculateSelectedStateAfterDirentDeleted = (name, newDirentList) => {\n    let selectedDirentList = this.state.selectedDirentList.slice(0);\n    if (selectedDirentList.length > 0) {\n      selectedDirentList = selectedDirentList.filter(item => {\n        return item.name !== name;\n      });\n    }\n    this.setState({\n      selectedDirentList: selectedDirentList,\n      isDirentSelected: selectedDirentList.length > 0,\n      isAllDirentSelected: selectedDirentList.length === newDirentList.length,\n    });\n  }\n\n  onLibDecryptDialog = () => {\n    this.setState({libNeedDecrypt: false});\n    this.loadDirData(this.state.path);\n  }\n\n  goDraftPage = () => {\n    window.open(siteRoot + 'drafts/' + this.state.draftID + '/');\n  }\n\n  sortItems = (sortBy, sortOrder) => {\n    cookie.save('seafile-repo-dir-sort-by', sortBy);\n    cookie.save('seafile-repo-dir-sort-order', sortOrder);\n    this.setState({\n      sortBy: sortBy,\n      sortOrder: sortOrder,\n      items: Utils.sortDirents(this.state.direntList, sortBy, sortOrder)\n    });\n  }\n\n  onUploadFile = (e) => {\n    e.nativeEvent.stopImmediatePropagation();\n    this.uploader.onFileUpload();\n  }\n\n  onUploadFolder = (e) => {\n    e.nativeEvent.stopImmediatePropagation();\n    this.uploader.onFolderUpload();\n  }\n\n  onToolbarFileTagChanged = () => {\n    let repoID = this.props.repoID;\n    let filePath = this.state.path;\n    seafileAPI.listFileTags(repoID, filePath).then(res => {\n      let fileTags = res.data.file_tags.map(item => {\n        return new FileTag(item);\n      });\n\n      this.setState({fileTags: fileTags});\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  unSelectDirent = () => {\n    this.setState({\n      isDirentSelected: false,\n      selectedDirentList: []\n    });\n    const dirent = {};\n    this.onDirentSelected(dirent);\n  }\n\n  onDeleteRepoTag = (deletedTagID) => {\n    let direntList = this.state.direntList.map(dirent => {\n      if (dirent.file_tags) {\n        let fileTags = dirent.file_tags.filter(item => {\n          return item.repo_tag_id !== deletedTagID;\n        });\n        dirent.file_tags = fileTags;\n      }\n      return dirent;\n    });\n    this.setState({direntList: direntList});\n    this.updateUsedRepoTags();\n  }\n\n\n  handleSubmit = (e) => {\n    let options = {\n      'share_type': 'personal',\n      'from': this.state.currentRepoInfo.owner_email\n    };\n    seafileAPI.leaveShareRepo(this.props.repoID, options).then(res => {\n      navigate(siteRoot + 'shared-libs/');\n    }).catch((error) => {\n      let errorMsg = Utils.getErrorMsg(error, true);\n      toaster.danger(errorMsg);\n    });\n\n    e.preventDefault();\n  }\n\n  render() {\n    if (this.state.libNeedDecrypt) {\n      return (\n        <ModalPortal>\n          <LibDecryptDialog\n            repoID={this.props.repoID}\n            onLibDecryptDialog={this.onLibDecryptDialog}\n          />\n        </ModalPortal>\n      );\n    }\n\n    if (this.state.errorMsg) {\n      return (\n        <Fragment>\n          <p className=\"error mt-6 text-center\">{this.state.errorMsg}</p>\n          <button type=\"submit\" className=\"btn btn-primary submit\" onClick={this.handleSubmit}>{gettext('Leave Share')}</button>\n        </Fragment>\n      );\n    }\n\n    if (!this.state.currentRepoInfo) {\n      return '';\n    }\n\n    let enableDirPrivateShare = false;\n    let { currentRepoInfo, userPerm, isCopyMoveProgressDialogShow, isDeleteFolderDialogOpen } = this.state;\n    let showShareBtn = Utils.isHasPermissionToShare(currentRepoInfo, userPerm);\n    let isRepoOwner = currentRepoInfo.owner_email === username;\n    let isVirtual = currentRepoInfo.is_virtual;\n    let isAdmin = currentRepoInfo.is_admin;\n    if (!isVirtual && (isRepoOwner || isAdmin)) {\n      enableDirPrivateShare = true;\n    }\n    let direntItemsList = this.state.direntList.filter((item, index) => {\n      return index < this.state.itemsShowLength;\n    });\n\n    let canUpload = true;\n    const { isCustomPermission, customPermission } = Utils.getUserPermission(userPerm);\n    if (isCustomPermission) {\n      const { upload } = customPermission.permission;\n      canUpload = upload;\n    }\n\n    return (\n      <Fragment>\n        <div className=\"main-panel-north border-left-show\">\n          <LibContentToolbar\n            isViewFile={this.state.isViewFile}\n            filePermission={this.state.filePermission}\n            isDraft={this.state.isDraft}\n            hasDraft={this.state.hasDraft}\n            fileTags={this.state.fileTags}\n            onFileTagChanged={this.onToolbarFileTagChanged}\n            onSideNavMenuClick={this.props.onMenuClick}\n            repoID={this.props.repoID}\n            path={this.state.path}\n            isDirentSelected={this.state.isDirentSelected}\n            selectedDirentList={this.state.selectedDirentList}\n            onItemsMove={this.onMoveItems}\n            onItemsCopy={this.onCopyItems}\n            onItemsDelete={this.onDeleteItems}\n            onItemRename={this.onMainPanelItemRename}\n            direntList={this.state.direntList}\n            repoName={this.state.repoName}\n            repoEncrypted={this.state.repoEncrypted}\n            isGroupOwnedRepo={this.state.isGroupOwnedRepo}\n            userPerm={this.state.userPerm}\n            showShareBtn={showShareBtn}\n            enableDirPrivateShare={enableDirPrivateShare}\n            onAddFile={this.onAddFile}\n            onAddFolder={this.onAddFolder}\n            onUploadFile={this.onUploadFile}\n            onUploadFolder={this.onUploadFolder}\n            currentMode={this.state.currentMode}\n            switchViewMode={this.switchViewMode}\n            onSearchedClick={this.onSearchedClick}\n            isRepoOwner={isRepoOwner}\n            currentRepoInfo={this.state.currentRepoInfo}\n            updateDirent={this.updateDirent}\n            onDirentSelected={this.onDirentSelected}\n            showDirentDetail={this.showDirentDetail}\n            unSelectDirent={this.unSelectDirent}\n            onFilesTagChanged={this.onFileTagChanged}\n          />\n        </div>\n        <div className=\"main-panel-center flex-row\">\n          <LibContentContainer\n            pathPrefix={this.props.pathPrefix}\n            currentMode={this.state.currentMode}\n            path={this.state.path}\n            pathExist={this.state.pathExist}\n            currentRepoInfo={this.state.currentRepoInfo}\n            repoID={this.props.repoID}\n            enableDirPrivateShare={enableDirPrivateShare}\n            userPerm={userPerm}\n            isGroupOwnedRepo={this.state.isGroupOwnedRepo}\n            onTabNavClick={this.props.onTabNavClick}\n            onMainNavBarClick={this.onMainNavBarClick}\n            isViewFile={this.state.isViewFile}\n            hash={this.state.hash}\n            isDraft={this.state.isDraft}\n            hasDraft={this.state.hasDraft}\n            fileTags={this.state.fileTags}\n            goDraftPage={this.goDraftPage}\n            isFileLoading={this.state.isFileLoading}\n            isFileLoadedErr={this.state.isFileLoadedErr}\n            filePermission={this.state.filePermission}\n            content={this.state.content}\n            lastModified={this.state.lastModified}\n            latestContributor={this.state.latestContributor}\n            onLinkClick={this.onLinkClick}\n            isTreeDataLoading={this.state.isTreeDataLoading}\n            treeData={this.state.treeData}\n            currentNode={this.state.currentNode}\n            onNodeClick={this.onTreeNodeClick}\n            onNodeCollapse={this.onTreeNodeCollapse}\n            onNodeExpanded={this.onTreeNodeExpanded}\n            onAddFolderNode={this.onAddFolder}\n            onAddFileNode={this.onAddFile}\n            onRenameNode={this.onRenameTreeNode}\n            onDeleteNode={this.onDeleteTreeNode}\n            draftCounts={this.state.draftCounts}\n            usedRepoTags={this.state.usedRepoTags}\n            readmeMarkdown={this.state.readmeMarkdown}\n            updateUsedRepoTags={this.updateUsedRepoTags}\n            isDirentListLoading={this.state.isDirentListLoading}\n            direntList={direntItemsList}\n            fullDirentList={this.state.direntList}\n            sortBy={this.state.sortBy}\n            sortOrder={this.state.sortOrder}\n            sortItems={this.sortItems}\n            updateDirent={this.updateDirent}\n            onDirentClick={this.onDirentClick}\n            onItemClick={this.onItemClick}\n            onItemSelected={this.onDirentSelected}\n            onItemDelete={this.onMainPanelItemDelete}\n            onItemRename={this.onMainPanelItemRename}\n            onItemMove={this.onMoveItem}\n            onItemCopy={this.onCopyItem}\n            onAddFolder={this.onAddFolder}\n            onAddFile={this.onAddFile}\n            onFileTagChanged={this.onFileTagChanged}\n            isDirentSelected={this.state.isDirentSelected}\n            isAllDirentSelected={this.state.isAllDirentSelected}\n            onAllDirentSelected={this.onAllDirentSelected}\n            isDirentDetailShow={this.state.isDirentDetailShow}\n            selectedDirent={this.state.selectedDirentList && this.state.selectedDirentList[0]}\n            selectedDirentList={this.state.selectedDirentList}\n            onItemsMove={this.onMoveItems}\n            onItemsCopy={this.onCopyItems}\n            onItemsDelete={this.onDeleteItems}\n            closeDirentDetail={this.closeDirentDetail}\n            showDirentDetail={this.showDirentDetail}\n            direntDetailPanelTab={this.state.direntDetailPanelTab}\n            onDeleteRepoTag={this.onDeleteRepoTag}\n            onToolbarFileTagChanged={this.onToolbarFileTagChanged}\n            updateDetail={this.state.updateDetail}\n            onListContainerScroll={this.onListContainerScroll}\n            loadDirentList={this.loadDirentList}\n          />\n          {canUpload && this.state.pathExist && !this.state.isViewFile && (\n            <FileUploader\n              ref={uploader => this.uploader = uploader}\n              dragAndDrop={true}\n              path={this.state.path}\n              repoID={this.props.repoID}\n              direntList={this.state.direntList}\n              onFileUploadSuccess={this.onFileUploadSuccess}\n              isCustomPermission={isCustomPermission}\n            />\n          )}\n        </div>\n        {isCopyMoveProgressDialogShow && (\n          <CopyMoveDirentProgressDialog\n            type={this.state.asyncOperationType}\n            asyncOperatedFilesLength={this.state.asyncOperatedFilesLength}\n            asyncOperationProgress={this.state.asyncOperationProgress}\n            toggleDialog={this.onMoveProgressDialogToggle}\n          />\n        )}\n        {isDeleteFolderDialogOpen && (\n          <DeleteFolderDialog\n            repoID={this.props.repoID}\n            path={this.state.folderToDelete}\n            deleteFolder={this.deleteFolder}\n            toggleDialog={this.toggleDeleteFolderDialog}\n          />\n        )}\n      </Fragment>\n    );\n  }\n}\n\nLibContentView.propTypes = propTypes;\n\nexport default LibContentView;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Modal, ModalHeader, ModalBody, ModalFooter, Button } from 'reactstrap';\nimport { gettext } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../toast';\n\nclass DismissGroupDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  dismissGroup = () => {\n    let that = this;\n    seafileAPI.deleteGroup(this.props.groupID).then((res)=> {\n      that.props.onGroupChanged();\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  render() {\n    return(\n      <Modal isOpen={this.props.showDismissGroupDialog} toggle={this.props.toggleDismissGroupDialog}>\n        <ModalHeader>{gettext('Delete Group')}</ModalHeader>\n        <ModalBody>\n          <span>{gettext('Really want to delete this group?')}</span>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.props.toggleDismissGroupDialog}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.dismissGroup}>{gettext('Delete')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nconst DismissGroupDialogPropTypes = {\n  showDismissGroupDialog: PropTypes.bool.isRequired,\n  toggleDismissGroupDialog: PropTypes.func.isRequired,\n  loadGroup: PropTypes.func.isRequired,\n  groupID: PropTypes.string.isRequired,\n  onGroupChanged: PropTypes.func.isRequired,\n};\n\nDismissGroupDialog.propTypes = DismissGroupDialogPropTypes;\n\nexport default DismissGroupDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Modal, ModalHeader, Input, ModalBody, ModalFooter, Form, FormGroup, Label, Alert } from 'reactstrap';\nimport { gettext, maxFileName } from '../../utils/constants';\n\nconst propTypes = {\n  onCreateRepo: PropTypes.func.isRequired,\n  onCreateToggle: PropTypes.func.isRequired\n};\n\nclass CreateDepartmentRepoDialog extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      repoName: '',\n      errMessage: '',\n      isSubmitBtnActive: false,\n    };\n  }\n\n  handleChange = (e) => {\n    if (!e.target.value.trim()) {\n      this.setState({isSubmitBtnActive: false});\n    } else {\n      this.setState({isSubmitBtnActive: true});\n    }\n\n    this.setState({\n      repoName: e.target.value,\n    });\n  }\n\n  handleSubmit = () => {\n    let isValid = this.validateRepoName();\n    if (isValid) {\n      let repo = this.createRepo(this.state.repoName);\n      this.props.onCreateRepo(repo, 'department');\n    }\n  }\n\n  handleKeyPress = (e) => {\n    if (e.key === 'Enter') {\n      this.handleSubmit();\n      e.preventDefault();\n    }\n  }\n\n  toggle = () => {\n    this.props.onCreateToggle();\n  }\n\n  validateRepoName = () => {\n    let errMessage = '';\n    let repoName = this.state.repoName.trim();\n    if (!repoName.length) {\n      errMessage = gettext('Name is required');\n      this.setState({errMessage: errMessage});\n      return false;\n    }\n    if (repoName.indexOf('/') > -1) {\n      errMessage = gettext('Name should not include \\'/\\'.');\n      this.setState({errMessage: errMessage});\n      return false;\n    }\n\n    return true;\n  }\n\n  createRepo = (repoName) => {\n    let repo = { repo_name: repoName };\n    return repo;\n  }\n\n  render() {\n    return (\n      <Modal isOpen={true} toggle={this.toggle} autoFocus={false}>\n        <ModalHeader toggle={this.toggle}>{gettext('New Department Library')}</ModalHeader>\n        <ModalBody>\n          <Form>\n            <FormGroup>\n              <Label for=\"repo-name\">{gettext('Name')}</Label>\n              <Input\n                id=\"repo-name\"\n                onKeyPress={this.handleKeyPress}\n                value={this.state.repoName}\n                onChange={this.handleChange}\n                maxLength={maxFileName}\n                autoFocus={true}\n              />\n            </FormGroup>\n          </Form>\n          {this.state.errMessage && <Alert color=\"danger\">{this.state.errMessage}</Alert>}\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"primary\" onClick={this.handleSubmit} disabled={!this.state.isSubmitBtnActive}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nCreateDepartmentRepoDialog.propTypes = propTypes;\n\nexport default CreateDepartmentRepoDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport { Modal, ModalHeader, ModalBody, ModalFooter, Input, Button } from 'reactstrap';\nimport toaster from '../toast';\n\nclass RenameGroupDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      newGroupName: this.props.currentGroupName,\n      isSubmitBtnActive: false,\n    };\n  }\n\n  handleGroupNameChange = (event) => {\n    if (!event.target.value.trim()) {\n      this.setState({isSubmitBtnActive: false});\n    } else {\n      this.setState({isSubmitBtnActive: true});\n    }\n\n    let name = event.target.value;\n    this.setState({\n      newGroupName: name\n    });\n  }\n\n  renameGroup = () => {\n    let name = this.state.newGroupName.trim();\n    if (name) {\n      let that = this;\n      seafileAPI.renameGroup(this.props.groupID, name).then((res)=> {\n        that.props.loadGroup(this.props.groupID);\n        that.props.onGroupChanged(res.data.id);\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    }\n    this.setState({\n      newGroupName: '',\n    });\n    this.props.toggleRenameGroupDialog();\n  }\n\n  handleKeyDown = (event) => {\n    if (event.keyCode === 13) {\n      this.renameGroup();\n    }\n  }\n\n  render() {\n    return(\n      <Modal isOpen={this.props.showRenameGroupDialog} toggle={this.props.toggleRenameGroupDialog}>\n        <ModalHeader>{gettext('Rename Group')}</ModalHeader>\n        <ModalBody>\n          <label htmlFor=\"newGroupName\">{gettext('Rename group to')}</label>\n          <Input type=\"text\" id=\"newGroupName\" value={this.state.newGroupName}\n            onChange={this.handleGroupNameChange} onKeyDown={this.handleKeyDown}/>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.props.toggleRenameGroupDialog}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.renameGroup} disabled={!this.state.isSubmitBtnActive}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nconst RenameGroupDialogPropTypes = {\n  showRenameGroupDialog: PropTypes.bool.isRequired,\n  toggleRenameGroupDialog: PropTypes.func.isRequired,\n  loadGroup: PropTypes.func.isRequired,\n  groupID: PropTypes.string.isRequired,\n  onGroupChanged: PropTypes.func.isRequired,\n  currentGroupName: PropTypes.string.isRequired,\n};\n\nRenameGroupDialog.propTypes = RenameGroupDialogPropTypes;\n\nexport default RenameGroupDialog;","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter } from 'reactstrap';\nimport { gettext } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport UserSelect from '../user-select';\nimport { Utils } from '../../utils/utils';\n\nimport '../../css/transfer-group-dialog.css';\n\nconst propTypes = {\n  groupID: PropTypes.string.isRequired,\n  toggleTransferGroupDialog: PropTypes.func.isRequired,\n  onGroupChanged: PropTypes.func.isRequired\n};\n\nclass TransferGroupDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      selectedOption: null,\n      errMessage: '',\n    };\n    this.options = [];\n  }\n\n  handleSelectChange = (option) => {\n    this.setState({\n      selectedOption: option,\n      errMessage: '',\n    });\n    this.options = [];\n  }\n\n  transferGroup = () => {\n    const email = this.state.selectedOption && this.state.selectedOption.email;\n    if (email) {\n      seafileAPI.transferGroup(this.props.groupID, email).then((res) => {\n        this.props.toggleTransferGroupDialog();\n      }).catch((error) => {\n        let errMessage = Utils.getErrorMsg(error);\n        this.setState({errMessage: errMessage});\n      });\n    }\n  }\n\n  toggle = () => {\n    this.props.toggleTransferGroupDialog();\n  }\n\n  render() {\n    return (\n      <Modal isOpen={true} toggle={this.toggle}>\n        <ModalHeader toggle={this.toggle}>{gettext('Transfer Group')}</ModalHeader>\n        <ModalBody>\n          <p>{gettext('Transfer group to')}</p>\n          <UserSelect\n            ref=\"userSelect\"\n            isMulti={false}\n            className=\"reviewer-select\"\n            placeholder={gettext('Please enter 1 or more character')}\n            onSelectChange={this.handleSelectChange}\n          />\n          <div className=\"error\">{this.state.errMessage}</div>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.toggle}>{gettext('Close')}</Button>\n          <Button color=\"primary\" onClick={this.transferGroup}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nTransferGroupDialog.propTypes = propTypes;\n\nexport default TransferGroupDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Alert, Modal, ModalHeader, ModalBody, ModalFooter, Button } from 'reactstrap';\nimport { gettext, siteRoot, groupImportMembersExtraMsg } from '../../utils/constants';\n\nconst propTypes = {\n  toggleImportMembersDialog: PropTypes.func.isRequired,\n  importMembersInBatch: PropTypes.func.isRequired,\n};\n\nclass ImportMembersDialog extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      errorMsg: ''\n    };\n    this.fileInputRef = React.createRef();\n  }\n\n  toggle = () => {\n    this.props.toggleImportMembersDialog();\n  }\n\n  openFileInput = () => {\n    this.fileInputRef.current.click();\n  }\n\n  uploadFile = (e) => {\n    // no file selected\n    if (!this.fileInputRef.current.files.length) {\n      return;\n    }\n    // check file extension\n    let fileName = this.fileInputRef.current.files[0].name;\n    if(fileName.substr(fileName.lastIndexOf('.') + 1) != 'xlsx') {\n      this.setState({\n        errorMsg: gettext('Please choose a .xlsx file.')\n      });\n      return;\n    }\n    const file = this.fileInputRef.current.files[0];\n    this.props.importMembersInBatch(file);\n    this.toggle();\n  }\n\n  render() {\n    let { errorMsg } = this.state;\n    return (\n      <Modal isOpen={true} toggle={this.toggle}>\n        <ModalHeader toggle={this.toggle}>{gettext('Import members from a .xlsx file')}</ModalHeader>\n\n        <ModalBody>\n          <p>{groupImportMembersExtraMsg}</p>\n          <p><a className=\"text-secondary small\" href={`${siteRoot}api/v2.1/group-members-import-example/`}>{gettext('Download an example file')}</a></p>\n          <button className=\"btn btn-outline-primary\" onClick={this.openFileInput}>{gettext('Upload file')}</button>\n          <input className=\"d-none\" type=\"file\" onChange={this.uploadFile} ref={this.fileInputRef} />\n          {errorMsg && <Alert color=\"danger\">{errorMsg}</Alert>}\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.toggle}>{gettext('Cancel')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nImportMembersDialog.propTypes = propTypes;\n\nexport default ImportMembersDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Table } from 'reactstrap';\nimport { Utils } from '../utils/utils';\nimport { gettext } from '../utils/constants';\nimport { seafileAPI } from '../utils/seafile-api';\nimport RoleEditor from './select-editor/role-editor';\nimport toaster from './toast';\nimport OpIcon from './op-icon';\n\nconst propTypes = {\n  groupMembers: PropTypes.array.isRequired,\n  groupID: PropTypes.string.isRequired,\n  isOwner: PropTypes.bool.isRequired,\n  isItemFreezed: PropTypes.bool.isRequired,\n  toggleItemFreezed: PropTypes.func.isRequired,\n  changeMember: PropTypes.func.isRequired,\n  deleteMember: PropTypes.func.isRequired\n};\n\nclass GroupMembers extends React.Component {\n\n  render() {\n    const { groupMembers, changeMember, deleteMember, groupID, isOwner, isItemFreezed, toggleItemFreezed } = this.props;\n    return (\n      <Table size=\"sm\" className=\"manage-members-table\">\n        <thead>\n          <tr>\n            <th width=\"15%\"></th>\n            <th width=\"45%\">{gettext('Name')}</th>\n            <th width=\"30%\">{gettext('Role')}</th>\n            <th width=\"10%\"></th>\n          </tr>\n        </thead>\n        <tbody>\n          {groupMembers.map((item, index) => {\n            return (\n              <Member\n                key={index}\n                item={item}\n                changeMember={changeMember}\n                deleteMember={deleteMember}\n                groupID={groupID}\n                isOwner={isOwner}\n                isItemFreezed={isItemFreezed}\n                toggleItemFreezed={toggleItemFreezed}\n              />\n            );\n          })\n          }\n        </tbody>\n      </Table>\n    );\n  }\n}\n\nGroupMembers.propTypes = propTypes;\n\nconst MemberPropTypes = {\n  item: PropTypes.object.isRequired,\n  changeMember: PropTypes.func.isRequired,\n  deleteMember: PropTypes.func.isRequired,\n  toggleItemFreezed: PropTypes.func.isRequired,\n  groupID: PropTypes.string.isRequired,\n  isOwner: PropTypes.bool.isRequired,\n  isItemFreezed: PropTypes.bool.isRequired\n};\n\nclass Member extends React.PureComponent {\n\n  constructor(props) {\n    super(props);\n    this.roles = ['Admin', 'Member'];\n    this.state = ({\n      highlight: false,\n    });\n  }\n\n  onChangeUserRole = (role) => {\n    let isAdmin = role === 'Admin' ? 'True' : 'False';\n    seafileAPI.setGroupAdmin(this.props.groupID, this.props.item.email, isAdmin).then((res) => {\n      this.props.changeMember(res.data);\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  deleteMember = () => {\n    const { item } = this.props;\n    seafileAPI.deleteGroupMember(this.props.groupID, item.email).then((res) => {\n      this.props.deleteMember(item);\n      toaster.success(gettext('Successfully deleted {name}.').replace('{name}', item.name));\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  handleMouseOver = () => {\n    if (this.props.isItemFreezed) return;\n    this.setState({\n      highlight: true,\n    });\n  }\n\n  handleMouseLeave = () => {\n    if (this.props.isItemFreezed) return;\n    this.setState({\n      highlight: false,\n    });\n  }\n\n  translateRole = (role) => {\n    if (role === 'Admin') {\n      return gettext('Admin');\n    }\n    else if (role === 'Member') {\n      return gettext('Member');\n    }\n    else if (role === 'Owner') {\n      return gettext('Owner');\n    }\n  }\n\n  render() {\n    const { item, isOwner } = this.props;\n    const deleteAuthority = (item.role !== 'Owner' && isOwner === true) || (item.role === 'Member' && isOwner === false);\n    return(\n      <tr onMouseOver={this.handleMouseOver} onMouseLeave={this.handleMouseLeave} className={this.state.highlight ? 'tr-highlight' : ''} tabIndex=\"0\" onFocus={this.handleMouseOver}>\n        <th scope=\"row\"><img className=\"avatar\" src={item.avatar_url} alt=\"\"/></th>\n        <td>{item.name}</td>\n        <td>\n          {((isOwner === false) || (isOwner === true && item.role === 'Owner')) &&\n            <span className=\"group-admin\">{this.translateRole(item.role)}</span>\n          }\n          {(isOwner === true && item.role !== 'Owner') &&\n            <RoleEditor\n              isTextMode={true}\n              isEditIconShow={this.state.highlight}\n              currentRole={item.role}\n              roles={this.roles}\n              onRoleChanged={this.onChangeUserRole}\n              toggleItemFreezed={this.props.toggleItemFreezed}\n            />\n          }\n        </td>\n        <td>\n          {(deleteAuthority && this.state.highlight) &&\n          <OpIcon\n            className=\"action-icon sf2-icon-x3\"\n            title={gettext('Delete')}\n            op={this.deleteMember}\n          />\n          }\n        </td>\n      </tr>\n    );\n  }\n}\n\nMember.propTypes = MemberPropTypes;\n\n\nexport default GroupMembers;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, InputGroup, InputGroupText, Input } from 'reactstrap';\nimport { Utils } from '../utils/utils';\nimport { gettext } from '../utils/constants';\nimport { seafileAPI } from '../utils/seafile-api';\nimport UserSelect from './user-select';\nimport toaster from './toast';\nimport Loading from './loading';\nimport GroupMembers from './group-members';\n\nconst propTypes = {\n  groupID: PropTypes.string.isRequired,\n  isOwner: PropTypes.bool.isRequired\n};\n\nclass ManageMembersDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isLoading: true, // first loading\n      isLoadingMore: false,\n      groupMembers: [],\n      page: 1,\n      perPage: 100,\n      hasNextPage: false,\n      selectedOption: null,\n      errMessage: [],\n      isItemFreezed: false,\n      searchActive: false,\n      keyword: '',\n      membersFound: []\n    };\n  }\n\n  componentDidMount() {\n    this.listGroupMembers(this.state.page);\n  }\n\n  listGroupMembers = (page) => {\n    const { groupID } = this.props;\n    const { perPage, groupMembers } = this.state;\n    seafileAPI.listGroupMembers(groupID, page, perPage).then((res) => {\n      const members = res.data;\n      this.setState({\n        isLoading: false,\n        isLoadingMore: false,\n        page: page,\n        hasNextPage: members.length < perPage ? false : true,\n        groupMembers: groupMembers.concat(members)\n      });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n      this.setState({\n        isLoading: false,\n        isLoadingMore: false,\n        hasNextPage: false\n      });\n    });\n  }\n\n  onSelectChange = (option) => {\n    this.setState({\n      selectedOption: option,\n      errMessage: [],\n    });\n  }\n\n  addGroupMember = () => {\n    let emails = [];\n    for (let i = 0; i < this.state.selectedOption.length; i++) {\n      emails.push(this.state.selectedOption[i].email);\n    }\n    seafileAPI.addGroupMembers(this.props.groupID, emails).then((res) => {\n      const newMembers = res.data.success;\n      this.setState({\n        groupMembers: [].concat(newMembers, this.state.groupMembers),\n        selectedOption: null,\n      });\n      this.refs.userSelect.clearSelect();\n      if (res.data.failed.length > 0) {\n        this.setState({\n          errMessage: res.data.failed\n        });\n      }\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  toggleItemFreezed = (isFreezed) => {\n    this.setState({\n      isItemFreezed: isFreezed\n    });\n  }\n\n  handleScroll = (event) => {\n    // isLoadingMore: to avoid repeated request\n    const { page, hasNextPage, isLoadingMore } = this.state;\n    if (hasNextPage && !isLoadingMore) {\n      const clientHeight = event.target.clientHeight;\n      const scrollHeight = event.target.scrollHeight;\n      const scrollTop    = event.target.scrollTop;\n      const isBottom = (clientHeight + scrollTop + 1 >= scrollHeight);\n      if (isBottom) { // scroll to the bottom\n        this.setState({isLoadingMore: true}, () => {\n          this.listGroupMembers(page + 1);\n        });\n      }\n    }\n  }\n\n  changeMember = (targetMember) => {\n    this.setState({\n      groupMembers: this.state.groupMembers.map((item) => {\n        if (item.email == targetMember.email) {\n          item = targetMember;\n        }\n        return item;\n      })\n    });\n  }\n\n  deleteMember = (targetMember) => {\n    const groupMembers = this.state.groupMembers;\n    groupMembers.splice(groupMembers.indexOf(targetMember), 1);\n    this.setState({\n      groupMembers: groupMembers\n    });\n  }\n\n  searchMembers = (e) => {\n    const { groupMembers } = this.state;\n    const keyword = e.target.value;\n    const value = keyword.trim().toLowerCase();\n    const membersFound = groupMembers.filter(item => item.name.toLowerCase().indexOf(value) > -1);\n    this.setState({ keyword, membersFound });\n  }\n\n  clearSearch = () => {\n    this.setState({\n      keyword: '',\n      membersFound: []\n    });\n  }\n\n  onSearchInputFocus = () => {\n    this.setState({\n      searchActive: true\n    });\n  }\n\n  onSearchInputBlur = () => {\n    this.setState({\n      searchActive: false\n    });\n  }\n\n  render() {\n    const {\n      isLoading, hasNextPage, groupMembers,\n      keyword, membersFound,\n      searchActive\n    } = this.state;\n    return (\n      <Fragment>\n        <p className=\"mb-2\">{gettext('Add group member')}</p>\n        <div className='add-members'>\n          <UserSelect\n            placeholder={gettext('Search users...')}\n            onSelectChange={this.onSelectChange}\n            ref=\"userSelect\"\n            isMulti={true}\n            className=\"add-members-select\"\n          />\n          {this.state.selectedOption ?\n            <Button color=\"secondary\" onClick={this.addGroupMember}>{gettext('Submit')}</Button> :\n            <Button color=\"secondary\" disabled>{gettext('Submit')}</Button>\n          }\n        </div>\n        {\n          this.state.errMessage.length > 0 &&\n            this.state.errMessage.map((item, index = 0) => {\n              return (\n                <div className=\"group-error error\" key={index}>{item.error_msg}</div>\n              );\n            })\n        }\n        {groupMembers.length > 10 &&\n          <InputGroup className={`search-group-members rounded ${searchActive ? 'active' : ''}`}>\n            <InputGroupText>\n              <i className=\"fas fa-search\" aria-hidden={true}></i>\n            </InputGroupText>\n            <Input\n              type=\"text\"\n              className=\"input-group-input px-0\"\n              placeholder={gettext('Search group members')}\n              value={keyword}\n              onChange={this.searchMembers}\n              onFocus={this.onSearchInputFocus}\n              onBlur={this.onSearchInputBlur}\n            />\n            {keyword && (\n              <InputGroupText>\n                <i className=\"sf2-icon-x1\" aria-hidden={true} onClick={this.clearSearch}></i>\n              </InputGroupText>\n            )}\n          </InputGroup>\n        }\n        <div className=\"manage-members\" onScroll={keyword.trim() ? () => {} : this.handleScroll}>\n          {isLoading ? <Loading /> : (\n            <Fragment>\n              <GroupMembers\n                groupMembers={keyword.trim() ? membersFound : groupMembers}\n                changeMember={this.changeMember}\n                deleteMember={this.deleteMember}\n                groupID={this.props.groupID}\n                isOwner={this.props.isOwner}\n                isItemFreezed={this.state.isItemFreezed}\n                toggleItemFreezed={this.toggleItemFreezed}\n              />\n              {(!keyword.trim() && hasNextPage) && <Loading />}\n            </Fragment>\n          )}\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nManageMembersDialog.propTypes = propTypes;\n\nexport default ManageMembersDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Modal, ModalHeader, ModalBody } from 'reactstrap';\nimport { gettext } from '../../utils/constants';\nimport ListAndAddGroupMembers from '../list-and-add-group-members';\n\nimport '../../css/manage-members-dialog.css';\n\nconst propTypes = {\n  groupID: PropTypes.string.isRequired,\n  isOwner: PropTypes.bool.isRequired,\n  toggleManageMembersDialog: PropTypes.func.isRequired\n};\n\nclass ManageMembersDialog extends React.Component {\n\n  render() {\n    const { groupID, isOwner, toggleManageMembersDialog: toggle } = this.props;\n    return (\n      <Modal isOpen={true} toggle={toggle} className=\"group-manage-members-dialog\">\n        <ModalHeader toggle={toggle}>{gettext('Manage group members')}</ModalHeader>\n        <ModalBody className=\"pb-0\">\n          <ListAndAddGroupMembers\n            groupID={groupID}\n            isOwner={isOwner}\n          />\n        </ModalBody>\n      </Modal>\n    );\n  }\n}\n\nManageMembersDialog.propTypes = propTypes;\n\nexport default ManageMembersDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Modal, ModalHeader, ModalBody, ModalFooter, Button } from 'reactstrap';\nimport { gettext, username } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../toast';\n\nclass LeaveGroupDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  leaveGroup = () => {\n    seafileAPI.quitGroup(this.props.groupID, username).then((res)=> {\n      this.props.onGroupChanged();\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  render() {\n    return(\n      <Modal isOpen={true} toggle={this.props.toggleLeaveGroupDialog}>\n        <ModalHeader toggle={this.props.toggleLeaveGroupDialog}>{gettext('Leave Group')}</ModalHeader>\n        <ModalBody>\n          <p>{gettext('Really want to leave this group?')}</p>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.props.toggleLeaveGroupDialog}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.leaveGroup}>{gettext('Leave')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nconst LeaveGroupDialogPropTypes = {\n  toggleLeaveGroupDialog: PropTypes.func.isRequired,\n  groupID: PropTypes.string.isRequired,\n  onGroupChanged: PropTypes.func.isRequired,\n};\n\nLeaveGroupDialog.propTypes = LeaveGroupDialogPropTypes;\n\nexport default LeaveGroupDialog;\n","import React,{ Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport cookie from 'react-cookies';\nimport { gettext, siteRoot, username, canAddRepo } from '../../utils/constants';\nimport { Link } from '@gatsbyjs/reach-router';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport Loading from '../../components/loading';\nimport EmptyTip from '../../components/empty-tip';\nimport ModalPortal from '../../components/modal-portal';\nimport Group from '../../models/group';\nimport Repo from '../../models/repo';\nimport toaster from '../../components/toast';\nimport OpIcon from '../../components/op-icon';\nimport CommonToolbar from '../../components/toolbar/common-toolbar';\nimport CreateRepoDialog from '../../components/dialog/create-repo-dialog';\nimport CreateDepartmentRepoDialog from '../../components/dialog/create-department-repo-dialog';\nimport DismissGroupDialog from '../../components/dialog/dismiss-group-dialog';\nimport RenameGroupDialog from '../../components/dialog/rename-group-dialog';\nimport TransferGroupDialog from '../../components/dialog/transfer-group-dialog';\nimport ImportMembersDialog from '../../components/dialog/import-members-dialog';\nimport ManageMembersDialog from '../../components/dialog/manage-members-dialog';\nimport LeaveGroupDialog from '../../components/dialog/leave-group-dialog';\nimport SharedRepoListView from '../../components/shared-repo-list-view/shared-repo-list-view';\nimport LibDetail from '../../components/dirent-detail/lib-details';\nimport SortOptionsDialog from '../../components/dialog/sort-options';\n\nimport '../../css/group-view.css';\n\nconst propTypes = {\n  onShowSidePanel: PropTypes.func.isRequired,\n  onSearchedClick: PropTypes.func.isRequired,\n  onGroupChanged: PropTypes.func.isRequired,\n  onTabNavClick: PropTypes.func.isRequired,\n  groupID: PropTypes.string,\n};\n\nclass GroupView extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isLoading: true, // first loading\n      isLoadingMore: false,\n      errMessage: '',\n      emptyTip: null,\n      currentGroup: null,\n      currentRepo: null,\n      isStaff: false,\n      isOwner: false,\n      sortBy: cookie.load('seafile-repo-dir-sort-by') || 'name', // 'name' or 'time' or 'size'\n      sortOrder: cookie.load('seafile-repo-dir-sort-order') || 'asc', // 'asc' or 'desc'\n      isSortOptionsDialogOpen: false,\n      repoList: [],\n      currentPage: 1,\n      perPage: 300,\n      hasNextPage: false,\n      libraryType: 'group',\n      isCreateRepoDialogShow: false,\n      isDepartmentGroup: false,\n      showGroupDropdown: false,\n      showGroupMembersPopover: false,\n      showRenameGroupDialog: false,\n      showDismissGroupDialog: false,\n      showTransferGroupDialog: false,\n      showImportMembersDialog: false,\n      showManageMembersDialog: false,\n      groupMembers: [],\n      isShowDetails: false,\n      isLeaveGroupDialogOpen: false,\n    };\n  }\n\n  componentDidMount() {\n    let groupID = this.props.groupID;\n    this.loadGroup(groupID);\n  }\n\n  componentWillReceiveProps(nextProps) {\n    if (nextProps.groupID !== this.props.groupID) {\n      this.loadGroup(nextProps.groupID);\n    }\n  }\n\n  loadGroup = (groupID) => {\n    seafileAPI.getGroup(groupID).then((res) => {\n      let currentGroup = new Group(res.data);\n      let emptyTip = this.getEmptyTip(currentGroup);\n      let isStaff  = currentGroup.admins.indexOf(username) > -1;  //for item operations\n      let isOwner = currentGroup.owner === username ? true : false;\n      let isDepartmentGroup = currentGroup.parent_group_id !== 0;\n      this.setState({\n        emptyTip: emptyTip,\n        currentGroup: currentGroup,\n        isStaff: isStaff,\n        isDepartmentGroup: isDepartmentGroup,\n        isOwner: isOwner,\n        currentPage: 1,\n        repoList: []  // empty it for the current group\n      }, () => {\n        this.loadRepos(this.state.currentPage);\n      });\n    }).catch((error) => {\n      this.setState({\n        isLoading: false,\n        errMessage: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  loadRepos = (page) => {\n    const { perPage } = this.state;\n    seafileAPI.listGroupRepos(this.props.groupID, page, perPage).then((res) => {\n      let hasNextPage = true;\n      if (res.data.length < perPage) {\n        hasNextPage = false;\n      }\n      let repoList = this.state.repoList;\n      let newRepoList = res.data.map(item => {\n        let repo = new Repo(item);\n        return repo;\n      });\n      if (newRepoList.length) {\n        repoList = repoList.concat(newRepoList);\n      }\n      this.setState({\n        isLoading: false,\n        isLoadingMore: false,\n        currentPage: page,\n        hasNextPage: hasNextPage,\n        repoList: Utils.sortRepos(repoList, this.state.sortBy, this.state.sortOrder)\n      });\n    }).catch((error) => {\n      this.setState({\n        isLoading: false,\n        isLoadingMore: false,\n        errMessage: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  getEmptyTip = (currentGroup) => {\n    let emptyTip = null;\n    if (currentGroup) {\n      if (currentGroup.parent_group_id === 0) {\n        emptyTip = (\n          <EmptyTip>\n            <h2>{gettext('No libraries shared with this group')}</h2>\n            <p>{gettext('No libraries have been shared with this group yet. A library shared with a group can be accessed by all group members. You can share a library with a group in \"My Libraries\". You can also create a new library to be shared with this group by clicking the \"New Library\" button in the menu bar.')}</p>\n          </EmptyTip>\n        );\n      } else {\n        if (currentGroup.admins.indexOf(username) == -1) {  // is a member of this group\n          emptyTip = (\n            <EmptyTip>\n              <h2>{gettext('No libraries')}</h2>\n            </EmptyTip>\n          );\n        } else {\n          emptyTip = (\n            <EmptyTip>\n              <h2>{gettext('No libraries')}</h2>\n              <p>{gettext('You can create libraries by clicking the \"New Library\" button above.')}</p>\n            </EmptyTip>\n          );\n        }\n      }\n    }\n    return emptyTip;\n  }\n\n  onCreateRepoToggle = () => {\n    this.setState({isCreateRepoDialogShow: !this.state.isCreateRepoDialogShow});\n  }\n\n  onCreateRepo = (repo, groupOwnerType) => {\n    let groupId = this.props.groupID;\n    if (groupOwnerType && groupOwnerType === 'department') {\n      seafileAPI.createGroupOwnedLibrary(groupId, repo).then(res => { //need modify endpoint api\n        let object = {\n          repo_id: res.data.id,\n          repo_name: res.data.name,\n          owner_name: res.data.group_name,\n          owner_email: res.data.owner,\n          permission: res.data.permission,\n          mtime: res.data.mtime,\n          size: res.data.size,\n          encrypted: res.data.encrypted,\n        };\n        let repo = new Repo(object);\n        let repoList = this.addRepoItem(repo);\n        this.setState({repoList: repoList});\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n\n    } else {\n      seafileAPI.createGroupRepo(groupId, repo).then(res => {\n        let repo = new Repo(res.data);\n        let repoList = this.addRepoItem(repo);\n        this.setState({repoList: repoList});\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    }\n    this.onCreateRepoToggle();\n  }\n\n  onItemDelete = (repo) => {\n    let groupID = this.props.groupID;\n    let repoList = this.state.repoList.filter(item => {\n      return item.repo_id !== repo.repo_id;\n    });\n    this.setState({repoList: repoList});\n    this.loadGroup(groupID);\n  }\n\n  addRepoItem = (repo) => {\n    let newRepoList = this.state.repoList.map(item => {return item;});\n    newRepoList.unshift(repo);\n    return newRepoList;\n  }\n\n  onItemUnshare = (repo) => {\n    let group = this.state.currentGroup;\n    seafileAPI.unshareRepoToGroup(repo.repo_id, group.id).then(() => {\n      let repoList = this.state.repoList.filter(item => {\n        return item.repo_id !== repo.repo_id;\n      });\n      this.setState({repoList: repoList});\n      this.loadGroup(group.id);\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  onItemRename = (repo, newName) => {\n    seafileAPI.renameGroupOwnedLibrary(this.props.groupID, repo.repo_id, newName).then(res => {\n      let repoList = this.state.repoList.map(item => {\n        if (item.repo_id === repo.repo_id) {\n          item.repo_name = newName;\n        }\n        return item;\n      });\n      this.setState({repoList: repoList});\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  onMonitorRepo = (repo, monitored) => {\n    let repoList = this.state.repoList.map(item => {\n      if (item.repo_id === repo.repo_id) {\n        item.monitored = monitored;\n      }\n      return item;\n    });\n    this.setState({repoList: repoList});\n  }\n\n  onTabNavClick = (tabName) => {\n    this.props.onTabNavClick(tabName);\n  }\n\n  toggleGroupDropdown = () => {\n    this.setState({\n      showGroupDropdown: !this.state.showGroupDropdown\n    });\n  }\n\n  toggleDismissGroupDialog = () => {\n    this.setState({\n      showDismissGroupDialog: !this.state.showDismissGroupDialog,\n      showGroupDropdown: false,\n    });\n  }\n\n  toggleRenameGroupDialog = () => {\n    this.setState({\n      showRenameGroupDialog: !this.state.showRenameGroupDialog,\n      showGroupDropdown: false,\n    });\n  }\n\n  toggleTransferGroupDialog = () => {\n    this.setState({\n      showTransferGroupDialog: !this.state.showTransferGroupDialog,\n      showGroupDropdown: false,\n    });\n  }\n\n  toggleImportMembersDialog= () => {\n    this.setState({\n      showImportMembersDialog: !this.state.showImportMembersDialog\n    });\n  }\n\n  importMembersInBatch= (file) => {\n    toaster.notify(gettext('It may take some time, please wait.'));\n    seafileAPI.importGroupMembersViaFile(this.state.currentGroup.id, file).then((res) => {\n      res.data.failed.map(item => {\n        const msg = `${item.email}: ${item.error_msg}`;\n        toaster.danger(msg);\n      });\n    }).catch((error) => {\n      let errMsg = Utils.getErrorMsg(error);\n      toaster.danger(errMsg);\n    });\n  }\n\n  toggleManageMembersDialog = () => {\n    this.setState({\n      showManageMembersDialog: !this.state.showManageMembersDialog,\n      showGroupDropdown: false,\n    });\n  }\n\n  toggleLeaveGroupDialog = () => {\n    this.setState({\n      isLeaveGroupDialogOpen: !this.state.isLeaveGroupDialogOpen,\n      showGroupDropdown: false,\n    });\n  }\n\n  listGroupMembers = () => {\n    seafileAPI.listGroupMembers(this.props.groupID).then((res) => {\n      this.setState({\n        groupMembers: res.data\n      });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  toggleGroupMembersPopover = (state) => {\n    if (state === 'open') {\n      this.listGroupMembers();\n      this.setState({\n        showGroupMembersPopover: true\n      });\n    } else {\n      this.setState({\n        showGroupMembersPopover: false\n      });\n    }\n  }\n\n  onItemDetails = (repo) => {\n    this.setState({\n      isShowDetails: true,\n      currentRepo: repo,\n    });\n  }\n\n  closeDetails = () => {\n    this.setState({isShowDetails: false});\n  }\n\n  sortItems = (sortBy, sortOrder) => {\n    cookie.save('seafile-repo-dir-sort-by', sortBy);\n    cookie.save('seafile-repo-dir-sort-order', sortOrder);\n    this.setState({\n      sortBy: sortBy,\n      sortOrder: sortOrder,\n      repoList: Utils.sortRepos(this.state.repoList, sortBy, sortOrder)\n    });\n  }\n\n  translateRole = (role) => {\n    if (role === 'Admin') {\n      return gettext('Admin');\n    }\n    else if (role === 'Member') {\n      return gettext('Member');\n    }\n    else if (role === 'Owner') {\n      return gettext('Owner');\n    }\n  }\n\n  toggleSortOptionsDialog = () => {\n    this.setState({\n      isSortOptionsDialogOpen: !this.state.isSortOptionsDialogOpen\n    });\n  }\n\n  handleScroll = (event) => {\n    // isLoadingMore: to avoid repeated request\n    const { currentPage, hasNextPage, isLoadingMore } = this.state;\n    if (hasNextPage && !isLoadingMore) {\n      const clientHeight = event.target.clientHeight;\n      const scrollHeight = event.target.scrollHeight;\n      const scrollTop    = event.target.scrollTop;\n      const isBottom = (clientHeight + scrollTop + 1 >= scrollHeight);\n      if (isBottom) { // scroll to the bottom\n        this.setState({isLoadingMore: true}, () => {\n          this.loadRepos(currentPage + 1);\n        });\n      }\n    }\n  }\n\n  render() {\n    let { errMessage, emptyTip, currentGroup, isDepartmentGroup, isStaff } = this.state;\n    let isShowSettingIcon = false;\n    if (currentGroup) { // group message is loaded\n      if (currentGroup.parent_group_id === 0) {\n        isShowSettingIcon = true;\n      } else {\n        if (currentGroup.admins.indexOf(username) > -1) {\n          isShowSettingIcon = true;\n        }\n      }\n    }\n    let useRate = 0;\n    if (isDepartmentGroup && currentGroup.group_quota) {\n      useRate = currentGroup.group_quota_usage / currentGroup.group_quota * 100 + '%';\n    }\n    return (\n      <Fragment>\n        <div className=\"main-panel-north border-left-show\">\n          <div className=\"cur-view-toolbar\">\n            <span className=\"sf2-icon-menu side-nav-toggle hidden-md-up d-md-none\" title=\"Side Nav Menu\" onClick={this.props.onShowSidePanel}></span>\n            <div className=\"operation\">\n              {((!isDepartmentGroup && canAddRepo) || (isDepartmentGroup && isStaff)) && (\n                Utils.isDesktop() ? (\n                  <button className=\"btn btn-secondary operation-item\" title={gettext('New Library')} onClick={this.onCreateRepoToggle}>\n                    <i className=\"fas fa-plus-square text-secondary mr-1\"></i>{gettext('New Library')}\n                  </button>\n                ) : (\n                  <span className=\"sf2-icon-plus mobile-toolbar-icon\" title={gettext('New Library')} onClick={this.onCreateRepoToggle}></span>\n                )\n              )}\n            </div>\n          </div>\n          <CommonToolbar onSearchedClick={this.props.onSearchedClick} />\n        </div>\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <div className=\"cur-view-path\">\n              {currentGroup && (\n                <Fragment>\n                  <div className=\"path-container\">\n                    <Link to={`${siteRoot}groups/`} onClick={() => this.onTabNavClick('groups')}>{gettext('Groups')}</Link>\n                    <span className=\"path-split\">/</span>\n                    <span>{currentGroup.name}</span>\n                    {isDepartmentGroup && (\n                      <Fragment>\n                        <span className=\"department-group-icon fas fa-building\" title={gettext('This is a special group representing a department.')}></span>\n                        {currentGroup.group_quota > 0 &&\n                          <span className=\"department-usage-container\">\n                            <div className=\"department-usage\">\n                              <span id=\"quota-bar\" className=\"department-quota-bar\"><span id=\"quota-usage\" className=\"usage\" style={{width: useRate}}></span></span>\n                              <span className=\"department-quota-info\">{Utils.bytesToSize(currentGroup.group_quota_usage)} / {Utils.bytesToSize(currentGroup.group_quota)}</span>\n                            </div>\n                          </span>\n                        }\n                      </Fragment>\n                    )}\n                  </div>\n                  <div className=\"path-tool\">\n                    { isShowSettingIcon &&\n                    <React.Fragment>\n                      <OpIcon\n                        className=\"sf2-icon-cog1 action-icon group-top-action-icon\"\n                        title={gettext('Settings')}\n                        op={this.toggleGroupDropdown}\n                      />\n                      {this.state.showGroupDropdown &&\n                        <div className=\"sf-popover\" id=\"group-setting-popover\">\n                          <div className=\"sf-popover-hd sf-popover-title\">\n                            <span>{gettext('Settings')}</span>\n                            <a href=\"#\" className=\"sf-popover-close js-close sf2-icon-x1 action-icon\"\n                              role=\"button\"\n                              aria-label={gettext('Close')}\n                              onClick={this.toggleGroupDropdown}></a>\n                          </div>\n                          <div className=\"sf-popover-con\">\n                            {(this.state.isStaff || this.state.isOwner) &&\n                            <ul className=\"sf-popover-list\">\n                              <li><a href=\"#\" className=\"sf-popover-item\" onClick={this.toggleRenameGroupDialog}>{gettext('Rename')}</a></li>\n                              {\n                                this.state.isOwner &&\n                                <li><a href=\"#\" className=\"sf-popover-item\" onClick={this.toggleTransferGroupDialog} >{gettext('Transfer')}</a></li>\n                              }\n                            </ul>\n                            }\n                            {(this.state.isStaff || this.state.isOwner) &&\n                            <ul className=\"sf-popover-list\">\n                              <li><a href=\"#\" className=\"sf-popover-item\" onClick={this.toggleImportMembersDialog} >{gettext('Import Members')}</a></li>\n                              <li><a href=\"#\" className=\"sf-popover-item\" onClick={this.toggleManageMembersDialog} >{gettext('Manage Members')}</a></li>\n                            </ul>\n                            }\n                            {\n                              this.state.isOwner &&\n                              <ul className=\"sf-popover-list\">\n                                <li><a href=\"#\" className=\"sf-popover-item\" onClick={this.toggleDismissGroupDialog}>{gettext('Delete Group')}</a></li>\n                              </ul>\n                            }\n                            {/* gourp owner only can dissmiss group, admin could not quit, department member could not quit */}\n                            {(!this.state.isOwner && !isDepartmentGroup) &&\n                            <ul className=\"sf-popover-list\">\n                              <li><a href=\"#\" className=\"sf-popover-item\" onClick={this.toggleLeaveGroupDialog}>{gettext('Leave Group')}</a></li>\n                            </ul>\n                            }\n                          </div>\n                        </div>}\n                    </React.Fragment>\n                    }\n                    <a href=\"#\"\n                      className=\"sf2-icon-user2 action-icon group-top-action-icon\"\n                      title={gettext('Members')} id=\"groupMembers\"\n                      onClick={() => this.toggleGroupMembersPopover('open')}>\n                    </a>\n                    {this.state.showGroupMembersPopover &&\n                    <div className=\"sf-popover\" id=\"group-members-popover\">\n                      <div className=\"sf-popover-hd sf-popover-title group-member-list-header\">\n                        <span>{gettext('Members')}</span>\n                        <a href=\"#\" className=\"sf-popover-close js-close sf2-icon-x1 action-icon\"\n                          onClick={this.toggleGroupMembersPopover}></a>\n                      </div>\n                      <div className=\"sf-popover-con\">\n                        <ul className=\"sf-popover-list group-member-list\">\n                          {this.state.groupMembers.map((item, index) => {\n                            return (\n                              <li key={index}>\n                                <a href=\"#\" className=\"sf-popover-item user-item d-flex\">\n                                  <img src={item.avatar_url} alt=\"\" className=\"group-member-avatar avatar\"/>\n                                  <span className=\"txt-item ellipsis d-flex\">\n                                    <span className=\"group-member-name ellipsis\">{item.name}</span>\n                                    <span className=\"group-member-admin\">{this.translateRole(item.role)}</span>\n                                  </span>\n                                </a>\n                              </li>\n                            );\n                          })}\n                        </ul>\n                      </div>\n                    </div>}\n                    {(!Utils.isDesktop() && this.state.repoList.length > 0) && <span className=\"sf3-font sf3-font-sort action-icon\" onClick={this.toggleSortOptionsDialog}></span>}\n                    {this.state.isSortOptionsDialogOpen &&\n                    <SortOptionsDialog\n                      toggleDialog={this.toggleSortOptionsDialog}\n                      sortBy={this.state.sortBy}\n                      sortOrder={this.state.sortOrder}\n                      sortItems={this.sortItems}\n                    />\n                    }\n                  </div>\n                </Fragment>\n              )}\n            </div>\n            <div className=\"cur-view-content d-block\" onScroll={this.handleScroll}>\n              {this.state.isLoading && <Loading />}\n              {(!this.state.isLoading && errMessage) && <div className=\"error text-center mt-2\">{errMessage}</div>}\n              {(!this.state.isLoading && this.state.repoList.length === 0) && emptyTip}\n              {(!this.state.isLoading && this.state.repoList.length > 0) &&\n                <SharedRepoListView\n                  repoList={this.state.repoList}\n                  hasNextPage={this.state.hasNextPage}\n                  currentGroup={this.state.currentGroup}\n                  sortBy={this.state.sortBy}\n                  sortOrder={this.state.sortOrder}\n                  sortItems={this.sortItems}\n                  onItemUnshare={this.onItemUnshare}\n                  onItemDelete={this.onItemDelete}\n                  onItemDetails={this.onItemDetails}\n                  onItemRename={this.onItemRename}\n                  onMonitorRepo={this.onMonitorRepo}\n                />\n              }\n            </div>\n          </div>\n          {this.state.isShowDetails && (\n            <div className=\"cur-view-detail\">\n              <LibDetail currentRepo={this.state.currentRepo} closeDetails={this.closeDetails}/>\n            </div>\n          )}\n        </div>\n        {this.state.isCreateRepoDialogShow && !this.state.isDepartmentGroup && (\n          <ModalPortal>\n            <CreateRepoDialog\n              libraryType={this.state.libraryType}\n              onCreateToggle={this.onCreateRepoToggle}\n              onCreateRepo={this.onCreateRepo}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isCreateRepoDialogShow && this.state.isDepartmentGroup &&\n          <CreateRepoDialog\n            isAdmin={this.state.isAdmin}\n            onCreateToggle={this.onCreateRepoToggle}\n            onCreateRepo={this.onCreateRepo}\n            libraryType='department'\n          />\n        }\n        {this.state.showRenameGroupDialog &&\n          <RenameGroupDialog\n            showRenameGroupDialog={this.state.showRenameGroupDialog}\n            toggleRenameGroupDialog={this.toggleRenameGroupDialog}\n            loadGroup={this.loadGroup}\n            groupID={this.props.groupID}\n            onGroupChanged={this.props.onGroupChanged}\n            currentGroupName={currentGroup.name}\n          />\n        }\n        {this.state.showDismissGroupDialog &&\n          <DismissGroupDialog\n            showDismissGroupDialog={this.state.showDismissGroupDialog}\n            toggleDismissGroupDialog={this.toggleDismissGroupDialog}\n            loadGroup={this.loadGroup}\n            groupID={this.props.groupID}\n            onGroupChanged={this.props.onGroupChanged}\n          />\n        }\n        {this.state.showTransferGroupDialog &&\n          <TransferGroupDialog\n            toggleTransferGroupDialog={this.toggleTransferGroupDialog}\n            groupID={this.props.groupID}\n            onGroupChanged={this.props.onGroupChanged}\n          />\n        }\n        { this.state.showImportMembersDialog &&\n          <ImportMembersDialog\n            toggleImportMembersDialog={this.toggleImportMembersDialog}\n            importMembersInBatch={this.importMembersInBatch}\n          />\n        }\n        {this.state.showManageMembersDialog &&\n          <ManageMembersDialog\n            toggleManageMembersDialog={this.toggleManageMembersDialog}\n            groupID={this.props.groupID}\n            onGroupChanged={this.props.onGroupChanged}\n            isOwner={this.state.isOwner}\n          />\n        }\n        {this.state.isLeaveGroupDialogOpen &&\n          <LeaveGroupDialog\n            toggleLeaveGroupDialog={this.toggleLeaveGroupDialog}\n            groupID={this.props.groupID}\n            onGroupChanged={this.props.onGroupChanged}\n          />\n        }\n      </Fragment>\n    );\n  }\n}\n\nGroupView.propTypes = propTypes;\n\nexport default GroupView;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport MediaQuery from 'react-responsive';\nimport CommonToolbar from './common-toolbar';\nimport { Button } from 'reactstrap';\nimport { gettext, canAddGroup } from '../../utils/constants';\n\nconst propTypes = {\n  searchPlaceholder: PropTypes.string,\n  onShowSidePanel: PropTypes.func.isRequired,\n  onSearchedClick: PropTypes.func.isRequired,\n  toggleAddGroupModal: PropTypes.func.isRequired,\n};\n\nclass GroupsToolbar extends React.Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    let { onShowSidePanel, onSearchedClick } = this.props;\n    return (\n      <div className=\"main-panel-north border-left-show\">\n        <div className=\"cur-view-toolbar\">\n          <span title=\"Side Nav Menu\" onClick={onShowSidePanel} className=\"sf2-icon-menu side-nav-toggle hidden-md-up d-md-none\"></span>\n          {canAddGroup && (\n            <div className=\"operation\">\n              <MediaQuery query=\"(min-width: 768px)\">\n                <Button color=\"btn btn-secondary operation-item\" onClick={this.props.toggleAddGroupModal}>\n                  <i className=\"fas fa-plus-square text-secondary mr-1\"></i>{gettext('New Group')}\n                </Button>\n              </MediaQuery>\n              <MediaQuery query=\"(max-width: 767.8px)\">\n                <span className=\"sf2-icon-plus mobile-toolbar-icon\" title={gettext('New Group')} onClick={this.props.toggleAddGroupModal}></span>\n              </MediaQuery>\n            </div>\n          )}\n        </div>\n        <CommonToolbar searchPlaceholder={this.props.searchPlaceholder} onSearchedClick={onSearchedClick}/>\n      </div>\n    );\n  }\n}\n\nGroupsToolbar.propTypes = propTypes;\n\nexport default GroupsToolbar;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Modal, ModalHeader, ModalBody, ModalFooter, Input, Button } from 'reactstrap';\nimport { Utils } from '../../utils/utils';\n\nclass CreateGroupDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      groupName: '',\n      errorMsg: '',\n      isSubmitBtnActive: false,\n    };\n  }\n\n  handleGroupChange = (event) => {\n    let name = event.target.value;\n\n    if (!name.trim()) {\n      this.setState({isSubmitBtnActive: false});\n    } else {\n      this.setState({isSubmitBtnActive: true});\n    }\n    this.setState({\n      groupName: name\n    });\n    if (this.state.errorMsg) {\n      this.setState({\n        errorMsg: ''\n      });\n    }\n  }\n\n  handleSubmitGroup = () => {\n    let name = this.state.groupName.trim();\n    if (name) {\n      let that = this;\n      seafileAPI.createGroup(name).then((res)=> {\n        that.props.onCreateGroup();\n      }).catch((error) => {\n        let errorMsg = Utils.getErrorMsg(error);\n        this.setState({errorMsg: errorMsg});\n      });\n    } else {\n      this.setState({\n        errorMsg: gettext('Name is required')\n      });\n    }\n    this.setState({\n      groupName: '',\n    });\n  }\n\n  handleKeyDown = (e) => {\n    if (e.keyCode === 13) {\n      this.handleSubmitGroup();\n      e.preventDefault();\n    }\n  }\n\n  render() {\n    return(\n      <Modal isOpen={this.props.showAddGroupModal} toggle={this.props.toggleAddGroupModal} autoFocus={false}>\n        <ModalHeader toggle={this.props.toggleAddGroupModal}>{gettext('New Group')}</ModalHeader>\n        <ModalBody>\n          <label htmlFor=\"groupName\">{gettext('Name')}</label>\n          <Input\n            type=\"text\"\n            id=\"groupName\"\n            value={this.state.groupName}\n            onChange={this.handleGroupChange}\n            onKeyDown={this.handleKeyDown}\n            autoFocus={true}\n          />\n          <span className=\"error\">{this.state.errorMsg}</span>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.props.toggleAddGroupModal}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.handleSubmitGroup} disabled={!this.state.isSubmitBtnActive}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nconst CreateGroupDialogPropTypes = {\n  toggleAddGroupModal: PropTypes.func.isRequired,\n  onCreateGroup: PropTypes.func.isRequired,\n  showAddGroupModal: PropTypes.bool.isRequired,\n};\n\nCreateGroupDialog.propTypes = CreateGroupDialogPropTypes;\n\nexport default CreateGroupDialog;","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext, siteRoot, canAddGroup } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport Loading from '../../components/loading';\nimport Group from '../../models/group';\nimport Repo from '../../models/repo';\nimport toaster from '../../components/toast';\nimport GroupsToolbar from '../../components/toolbar/groups-toolbar';\nimport SharedRepoListView from '../../components/shared-repo-list-view/shared-repo-list-view';\nimport CreateGroupDialog from '../../components/dialog/create-group-dialog';\nimport LibDetail from '../../components/dirent-detail/lib-details';\nimport EmptyTip from '../../components/empty-tip';\n\nimport '../../css/groups.css';\n\nconst propTypes = {\n  group: PropTypes.object.isRequired,\n  onItemDetails: PropTypes.func.isRequired,\n};\n\n\nclass RepoListViewPanel extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      repoList: [],\n    };\n  }\n\n  componentDidMount() {\n    let group = this.props.group;\n    let repoList = group.repos.map(item => {\n      let repo = new Repo(item);\n      return repo;\n    });\n    this.setState({repoList: repoList});\n  }\n\n  onItemUnshare = (repo) => {\n    let group = this.props.group;\n    seafileAPI.unshareRepoToGroup(repo.repo_id, group.id).then(() => {\n      let repoList = this.state.repoList.filter(item => {\n        return item.repo_id !== repo.repo_id;\n      });\n      this.setState({repoList: repoList});\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  onItemDelete = (repo) => {\n    let repoList = this.state.repoList.filter(item => {\n      return item.repo_id !== repo.repo_id;\n    });\n    this.setState({repoList: repoList});\n  }\n\n  onItemRename = (repo, newName) => {\n    let group = this.props.group;\n    seafileAPI.renameGroupOwnedLibrary(group.id, repo.repo_id, newName).then(res => {\n      let repoList = this.state.repoList.map(item => {\n        if (item.repo_id === repo.repo_id) {\n          item.repo_name = newName;\n        }\n        return item;\n      });\n      this.setState({repoList: repoList});\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  onMonitorRepo = (repo, monitored) => {\n    let repoList = this.state.repoList.map(item => {\n      if (item.repo_id === repo.repo_id) {\n        item.monitored = monitored;\n      }\n      return item;\n    });\n    this.setState({repoList: repoList});\n  }\n\n  render() {\n    let group = this.props.group;\n    const emptyTip = <p className=\"group-item-empty-tip\">{gettext('No libraries')}</p>;\n    return (\n      <div className=\"group-list-panel\">\n        <h4 className=\"group-item-heading ellipsis\">\n          <a href={`${siteRoot}group/${group.id}/`} title={group.name}>{group.name}</a>\n        </h4>\n        {this.state.repoList.length === 0 ?\n          emptyTip :\n          <SharedRepoListView\n            isShowTableThread={false}\n            isShowRepoOwner={false}\n            currentGroup={this.props.group}\n            repoList={this.state.repoList}\n            onItemUnshare={this.onItemUnshare}\n            onItemDelete={this.onItemDelete}\n            onItemDetails={this.props.onItemDetails}\n            onItemRename={this.onItemRename}\n            onMonitorRepo={this.onMonitorRepo}\n          />\n        }\n      </div>\n    );\n  }\n}\n\nRepoListViewPanel.propTypes = propTypes;\n\nclass GroupsView extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isLoading: true,\n      errorMsg: '',\n      groupList: [],\n      showAddGroupModal: false,\n      isShowDetails: false,\n      currentRepo: null,\n    };\n  }\n\n  listGroups = () => {\n    seafileAPI.listGroups(true).then((res) => {\n      // `{'with_repos': 1}`: list repos of every group\n      // res: {data: [...], status: 200, statusText: \"OK\", headers: {}, config: {},}\n      let groupList = res.data.map(item => {\n        let group = new Group(item);\n        return group;\n      });\n      this.setState({\n        isLoading: false,\n        groupList: groupList.sort((a, b) => {\n          return a.name.toLowerCase() < b.name.toLowerCase() ? -1 : 1;\n        })\n      });\n    }).catch((error) => {\n      this.setState({\n        isLoading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  toggleAddGroupModal = () => {\n    this.setState({\n      showAddGroupModal: !this.state.showAddGroupModal\n    });\n  }\n\n  onCreateGroup = () => {\n    this.setState({\n      showAddGroupModal: false,\n      isLoading: true,\n      groupList: [],\n    });\n    this.listGroups();\n  }\n\n  componentDidMount() {\n    this.listGroups();\n  }\n\n  onItemDetails = (repo) => {\n    this.setState({\n      isShowDetails: true,\n      currentRepo: repo,\n    });\n  }\n\n  closeDetails = () => {\n    this.setState({isShowDetails: false});\n  }\n\n  render() {\n    const emptyTip = (\n      <EmptyTip>\n        <h2>{gettext('No groups')}</h2>\n        {canAddGroup ?\n          <p>{gettext('You are not in any groups. Groups allow multiple people to collaborate on libraries. You can create a group by clicking the \"New Group\" button in the menu bar.')}</p> :\n          <p>{gettext('You are not in any groups. Groups allow multiple people to collaborate on libraries. Groups you join will be listed here.')}</p>\n        }\n      </EmptyTip>\n    );\n\n    return (\n      <Fragment>\n        <GroupsToolbar\n          onShowSidePanel={this.props.onShowSidePanel}\n          onSearchedClick={this.props.onSearchedClick}\n          toggleAddGroupModal={this.toggleAddGroupModal}\n        />\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <div className=\"cur-view-path\">\n              <h3 className=\"sf-heading\">{gettext('My Groups')}</h3>\n            </div>\n            <div className=\"cur-view-content cur-view-content-groups\">\n              {this.state.isLoading && <Loading />}\n              {(!this.state.isLoading && this.state.errorMsg) && <div className=\"error text-center mt-2\">{this.state.errorMsg}</div>}\n              {(!this.state.isLoading && !this.state.errorMsg && this.state.groupList.length == 0) && emptyTip}\n              {!this.state.isLoading && this.state.groupList.map((group, index) => {\n                return (\n                  <RepoListViewPanel\n                    key={index}\n                    group={group}\n                    onItemDetails={this.onItemDetails}\n                  />\n                );\n              })}\n            </div>\n          </div>\n          {this.state.isShowDetails && (\n            <div className=\"cur-view-detail\">\n              <LibDetail currentRepo={this.state.currentRepo} closeDetails={this.closeDetails}/>\n            </div>\n          )}\n        </div>\n        { this.state.showAddGroupModal &&\n          <CreateGroupDialog\n            toggleAddGroupModal={this.toggleAddGroupModal}\n            onCreateGroup={this.onCreateGroup}\n            showAddGroupModal={this.state.showAddGroupModal}\n          />\n        }\n      </Fragment>\n    );\n  }\n}\n\nconst GroupsViewPropTypes = {\n  onShowSidePanel: PropTypes.func.isRequired,\n  onSearchedClick: PropTypes.func.isRequired,\n};\n\nGroupsView.propTypes = GroupsViewPropTypes;\n\nexport default GroupsView;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport CommonToolbar from './common-toolbar';\nimport { Button } from 'reactstrap';\nimport { gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\n\nconst propTypes = {\n  onShowSidePanel: PropTypes.func.isRequired,\n  onSearchedClick: PropTypes.func.isRequired,\n  toggleInvitePeopleDialog: PropTypes.func.isRequired,\n};\n\nclass InvitationsToolbar extends React.Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    let { onShowSidePanel, onSearchedClick, toggleInvitePeopleDialog } = this.props;\n    return (\n      <div className=\"main-panel-north border-left-show\">\n        <div className=\"cur-view-toolbar\">\n          <span title=\"Side Nav Menu\" onClick={onShowSidePanel} className=\"sf2-icon-menu side-nav-toggle hidden-md-up d-md-none\">\n          </span>\n          {Utils.isDesktop() ? (\n            <div className=\"operation\">\n              <Button color=\"btn btn-secondary operation-item\" onClick={toggleInvitePeopleDialog}>\n                <i className=\"fas fa-plus-square text-secondary mr-1\"></i>{gettext('Invite Guest')}\n              </Button>\n            </div>\n          ) : (\n            <span className=\"sf2-icon-plus mobile-toolbar-icon\" title={gettext('Invite Guest')} onClick={toggleInvitePeopleDialog}></span>\n          )}\n        </div>\n        <CommonToolbar searchPlaceholder={this.props.searchPlaceholder} onSearchedClick={onSearchedClick}/>\n      </div>\n    );\n  }\n}\n\nInvitationsToolbar.propTypes = propTypes;\n\nexport default InvitationsToolbar;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Utils } from '../../utils/utils';\nimport { gettext } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Modal, ModalHeader, ModalBody, ModalFooter, Input, Button } from 'reactstrap';\nimport toaster from '../toast';\nimport Loading from '../loading';\n\nconst InvitePeopleDialogPropTypes = {\n  onInvitePeople: PropTypes.func.isRequired,\n  toggleDialog: PropTypes.func.isRequired,\n};\n\nclass InvitePeopleDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      emails: '',\n      errorMsg: '',\n      isSubmitting: false\n    };\n  }\n\n  handleInputChange = (e) => {\n    let emails = e.target.value;\n    this.setState({\n      emails: emails\n    });\n    if (this.state.errorMsg) {\n      this.setState({\n        errorMsg: ''\n      });\n    }\n  }\n\n  handleKeyDown = (e) => {\n    if (e.keyCode === 13) {\n      e.preventDefault();\n      this.handleSubmitInvite();\n    }\n  }\n\n  handleSubmitInvite = () => {\n    let emails = this.state.emails.trim();\n    if (!emails) {\n      this.setState({\n        errorMsg: gettext('It is required.')\n      });\n      return false;\n    }\n\n    let emailsArray = [];\n    emails = emails.split(',');\n    for (let i = 0, len = emails.length; i < len; i++) {\n      let email = emails[i].trim();\n      if (email) {\n        emailsArray.push(email);\n      }\n    }\n\n    if (!emailsArray.length) {\n      this.setState({\n        errorMsg: gettext('Email is invalid.')\n      });\n      return false;\n    }\n\n    this.setState({\n      isSubmitting: true\n    });\n    seafileAPI.invitePeople(emailsArray).then((res) => {\n      this.props.toggleDialog();\n      const success = res.data.success;\n      if (success.length) {\n        let successMsg = '';\n        if (success.length == 1) {\n          successMsg = gettext('Successfully invited %(email).')\n            .replace('%(email)', success[0].accepter);\n        } else {\n          successMsg = gettext('Successfully invited %(email) and %(num) other people.')\n            .replace('%(email)', success[0].accepter)\n            .replace('%(num)', success.length - 1);\n        }\n        toaster.success(successMsg);\n        this.props.onInvitePeople(success);\n      }\n      const failed = res.data.failed;\n      if (failed.length) {\n        for (let i = 0, len = failed.length; i < len; i++) {\n          let failedMsg = failed[i].email + ': ' + failed[i].error_msg;\n          toaster.danger(failedMsg);\n        }\n      }\n    }).catch((error) => {\n      const errorMsg = Utils.getErrorMsg(error);\n      toaster.danger(errorMsg);\n      this.props.toggleDialog();\n    });\n  }\n\n  render() {\n    const { isSubmitting } = this.state;\n    return (\n      <Modal isOpen={true} toggle={this.props.toggleDialog}>\n        <ModalHeader toggle={this.props.toggleDialog}>{gettext('Invite Guest')}</ModalHeader>\n        <ModalBody>\n          <label htmlFor=\"emails\">{gettext('Emails')}</label>\n          <Input\n            type=\"text\"\n            id=\"emails\"\n            placeholder={gettext('Emails, separated by \\',\\'')}\n            value={this.state.emails}\n            onChange={this.handleInputChange}\n            onKeyDown={this.handleKeyDown}\n          />\n          <p className=\"error mt-2\">{this.state.errorMsg}</p>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.props.toggleDialog}>{gettext('Cancel')}</Button>\n          <Button className=\"submit-btn\" color=\"primary\" onClick={this.handleSubmitInvite} disabled={isSubmitting}>{isSubmitting ? <Loading /> : gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nInvitePeopleDialog.propTypes = InvitePeopleDialogPropTypes;\n\nexport default InvitePeopleDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../../utils/constants';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter } from 'reactstrap';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport Loading from '../loading';\nimport toaster from '../toast';\n\nconst propTypes = {\n  accepter: PropTypes.string.isRequired,\n  token: PropTypes.string.isRequired,\n  revokeInvitation: PropTypes.func.isRequired,\n  toggleDialog: PropTypes.func.isRequired\n};\n\nclass InvitationRevokeDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isSubmitting: false\n    };\n  }\n\n  onRevokeInvitation = () => {\n    this.setState({\n      isSubmitting: true,\n    });\n\n    seafileAPI.revokeInvitation(this.props.token).then((res) => {\n      this.props.revokeInvitation();\n      this.props.toggleDialog();\n      const msg = gettext('Successfully revoked access of user {placeholder}.').replace('{placeholder}', this.props.accepter);\n      toaster.success(msg);\n    }).catch((error) => {\n      const errorMsg = Utils.getErrorMsg(error);\n      toaster.danger(errorMsg);\n      this.props.toggleDialog();\n    });\n  };\n\n  render() {\n    const { accepter, toggleDialog } = this.props;\n    const { isSubmitting } = this.state;\n    const email = '<span class=\"op-target\">' + Utils.HTMLescape(this.props.accepter) + '</span>';\n    const content = gettext('Are you sure to revoke access of user {placeholder} ?').replace('{placeholder}', email);\n\n    return (\n      <Modal isOpen={true} toggle={toggleDialog}>\n        <ModalHeader toggle={toggleDialog}>{gettext('Revoke Access')}</ModalHeader>\n        <ModalBody>\n          <p dangerouslySetInnerHTML={{__html: content}}></p>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={toggleDialog}>{gettext('Cancel')}</Button>\n          <Button className=\"submit-btn\" color=\"primary\" onClick={this.onRevokeInvitation} disabled={isSubmitting}>{isSubmitting ? <Loading /> : gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nInvitationRevokeDialog.propTypes = propTypes;\n\nexport default InvitationRevokeDialog;\n","import React, { Component, Fragment } from 'react';\nimport { Dropdown, DropdownToggle, DropdownItem } from 'reactstrap';\nimport PropTypes from 'prop-types';\nimport moment from 'moment';\nimport { gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport InvitationsToolbar from '../../components/toolbar/invitations-toolbar';\nimport InvitePeopleDialog from '../../components/dialog/invite-people-dialog';\nimport InvitationRevokeDialog from '../../components/dialog/invitation-revoke-dialog';\nimport Loading from '../../components/loading';\nimport toaster from '../../components/toast';\nimport EmptyTip from '../../components/empty-tip';\n\nimport '../../css/invitations.css';\n\nclass Item extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOpIconShown: false,\n      isOpMenuOpen: false, // for mobile\n      isRevokeDialogOpen: false\n    };\n  }\n\n  toggleOpMenu = () => {\n    this.setState({\n      isOpMenuOpen: !this.state.isOpMenuOpen\n    });\n  }\n\n  onMouseEnter = () => {\n    this.setState({\n      isOpIconShown: true\n    });\n  }\n\n  onMouseLeave = () => {\n    this.setState({\n      isOpIconShown: false\n    });\n  }\n\n  deleteItem = (e) => {\n    e.preventDefault();\n    // make the icon avoid being clicked repeatedly\n    this.setState({\n      isOpIconShown: false\n    });\n    const token = this.props.invitation.token;\n    seafileAPI.deleteInvitation(token).then((res) => {\n      this.setState({deleted: true});\n      toaster.success(gettext('Successfully deleted 1 item.'));\n    }).catch((error) => {\n      const errorMsg = Utils.getErrorMsg(error);\n      toaster.danger(errorMsg);\n      this.setState({\n        isOpIconShown: true\n      });\n    });\n  }\n\n  revokeItem = () => {\n    this.setState({deleted: true});\n  }\n\n  toggleRevokeDialog = (e) => {\n    e.preventDefault();\n    this.setState({\n      isRevokeDialogOpen: !this.state.isRevokeDialogOpen\n    });\n  }\n\n  render() {\n    const { isOpIconShown, deleted, isRevokeDialogOpen } = this.state;\n\n    if (deleted) {\n      return null;\n    }\n\n    const item = this.props.invitation;\n\n    const desktopItem = (\n      <tr onMouseEnter={this.onMouseEnter} onMouseLeave={this.onMouseLeave} onFocus={this.onMouseEnter} tabIndex=\"0\">\n        <td>{item.accepter}</td>\n        <td>{moment(item.invite_time).format('YYYY-MM-DD')}</td>\n        <td>{moment(item.expire_time).format('YYYY-MM-DD')}</td>\n        <td>{item.accept_time && <i className=\"sf2-icon-tick invite-accept-icon\"></i>}</td>\n        <td>\n          {isOpIconShown && (\n            item.accept_time ?\n              <a href=\"#\"\n                role=\"button\"\n                className=\"action-icon sf3-font sf3-font-cancel-invitation\"\n                title={gettext('Revoke Access')}\n                aria-label={gettext('Revoke Access')}\n                onClick={this.toggleRevokeDialog}>\n              </a> :\n              <a href=\"#\"\n                role=\"button\"\n                className=\"action-icon sf2-icon-x3\"\n                title={gettext('Delete')}\n                aria-label={gettext('Delete')}\n                onClick={this.deleteItem}>\n              </a>\n          )}\n        </td>\n      </tr>\n    );\n\n    const mobileItem = (\n      <tr>\n        <td>\n          {item.accepter}<br />\n          <span className=\"item-meta-info\">{moment(item.invite_time).format('YYYY-MM-DD')}<span className=\"small\">({gettext('Invite Time')})</span></span>\n          <span className=\"item-meta-info\">{moment(item.expire_time).format('YYYY-MM-DD')}<span className=\"small\">({gettext('Expiration')})</span></span>\n          <span className=\"item-meta-info\">{item.accept_time && gettext('Accepted')}</span>\n        </td>\n        <td>\n          <Dropdown isOpen={this.state.isOpMenuOpen} toggle={this.toggleOpMenu}>\n            <DropdownToggle\n              tag=\"i\"\n              className=\"sf-dropdown-toggle fa fa-ellipsis-v ml-0\"\n              title={gettext('More Operations')}\n              data-toggle=\"dropdown\"\n              aria-expanded={this.state.isOpMenuOpen}\n            />\n            <div className={this.state.isOpMenuOpen ? '' : 'd-none'} onClick={this.toggleOpMenu}>\n              <div className=\"mobile-operation-menu-bg-layer\"></div>\n              <div className=\"mobile-operation-menu\">\n                {item.accept_time ?\n                  <DropdownItem className=\"mobile-menu-item\" onClick={this.toggleRevokeDialog}>{gettext('Revoke Access')}</DropdownItem> :\n                  <DropdownItem className=\"mobile-menu-item\" onClick={this.deleteItem}>{gettext('Delete')}</DropdownItem>\n                }\n              </div>\n            </div>\n          </Dropdown>\n        </td>\n      </tr>\n    );\n\n    return (\n      <Fragment>\n        {this.props.isDesktop ? desktopItem : mobileItem}\n        {isRevokeDialogOpen &&\n        <InvitationRevokeDialog\n          accepter={item.accepter}\n          token={item.token}\n          revokeInvitation={this.revokeItem}\n          toggleDialog={this.toggleRevokeDialog}\n        />\n        }\n      </Fragment>\n    );\n  }\n}\n\nconst ItemPropTypes = {\n  invitation: PropTypes.object.isRequired,\n};\n\nItem.propTypes = ItemPropTypes;\n\nclass Content extends Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    const {\n      loading, errorMsg, invitationsList\n    } = this.props.data;\n\n    if (loading) {\n      return <Loading />;\n    }\n\n    if (errorMsg) {\n      return <p className=\"error text-center mt-2\">{errorMsg}</p>;\n    }\n\n    if (!invitationsList.length) {\n      return (\n        <EmptyTip>\n          <h2>{gettext('No guest invitations')}</h2>\n          <p>{gettext('You have not invited any guests yet. A guest can access shared libraries through the web interface allowing more efficient ways to collaborate than through links. You can invite a guest by clicking the \"Invite Guest\" button in the menu bar.')}</p>\n        </EmptyTip>\n      );\n    }\n\n    const isDesktop = Utils.isDesktop();\n    return (\n      <table className={`table-hover${isDesktop ? '': ' table-thead-hidden'}`}>\n        <thead>\n          {isDesktop ?\n            <tr>\n              <th width=\"25%\">{gettext('Email')}</th>\n              <th width=\"20%\">{gettext('Invite Time')}</th>\n              <th width=\"20%\">{gettext('Expiration')}</th>\n              <th width=\"18%\">{gettext('Accepted')}</th>\n              <th width=\"7%\"></th>\n            </tr>\n            :\n            <tr>\n              <th width=\"92%\"></th>\n              <th width=\"8%\"></th>\n            </tr>\n          }\n        </thead>\n        <tbody>\n          {invitationsList.map((invitation, index) => {\n            return (\n              <Item\n                key={index}\n                isDesktop={isDesktop}\n                invitation={invitation}\n              />\n            );\n          })}\n        </tbody>\n      </table>\n    );\n  }\n}\n\nclass InvitationsView extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      invitationsList: [],\n      isInvitePeopleDialogOpen: false\n    };\n  }\n\n  componentDidMount() {\n    seafileAPI.listInvitations().then((res) => {\n      this.setState({\n        invitationsList: res.data,\n        loading: false\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  onInvitePeople = (invitationsArray) => {\n    invitationsArray.push.apply(invitationsArray, this.state.invitationsList);\n    this.setState({\n      invitationsList: invitationsArray,\n    });\n  }\n\n  toggleInvitePeopleDialog = () => {\n    this.setState({\n      isInvitePeopleDialogOpen: !this.state.isInvitePeopleDialogOpen\n    });\n  }\n\n  render() {\n    return (\n      <Fragment>\n        <InvitationsToolbar\n          onShowSidePanel={this.props.onShowSidePanel}\n          onSearchedClick={this.props.onSearchedClick}\n          toggleInvitePeopleDialog={this.toggleInvitePeopleDialog}\n        />\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <div className=\"cur-view-path\">\n              <h3 className=\"sf-heading\">{gettext('Invite Guest')}</h3>\n            </div>\n            <div className=\"cur-view-content\">\n              <Content data={this.state} />\n            </div>\n          </div>\n        </div>\n        {this.state.isInvitePeopleDialogOpen &&\n        <InvitePeopleDialog\n          onInvitePeople={this.onInvitePeople}\n          toggleDialog={this.toggleInvitePeopleDialog}\n        />\n        }\n      </Fragment>\n    );\n  }\n}\n\nconst InvitationsViewPropTypes = {\n  onShowSidePanel: PropTypes.func.isRequired,\n  onSearchedClick: PropTypes.func.isRequired,\n};\n\nInvitationsView.propTypes = InvitationsViewPropTypes;\n\nexport default InvitationsView;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../../utils/constants';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter, Input } from 'reactstrap';\n\nconst propTypes = {\n  toggleCancel: PropTypes.func.isRequired,\n  addWiki: PropTypes.func.isRequired,\n};\n\nclass NewWikiDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isExist: false,\n      name: '',\n      repoID: '',\n      isSubmitBtnActive: false,\n    };\n  }\n\n  inputNewName = (e) => {\n    if (!event.target.value.trim()) {\n      this.setState({isSubmitBtnActive: false});\n    } else {\n      this.setState({isSubmitBtnActive: true});\n    }\n\n    this.setState({\n      name: e.target.value,\n    });\n  }\n\n  handleKeyPress = (e) => {\n    if (e.key === 'Enter') {\n      this.handleSubmit();\n    }\n  }\n\n  handleSubmit = () => {\n    let { isExist, name, repoID } = this.state;\n    this.props.addWiki(isExist, name, repoID);\n    this.props.toggleCancel();\n  }\n\n  toggle = () => {\n    this.props.toggleCancel();\n  }\n\n  render() {\n    return (\n      <Modal isOpen={true} autoFocus={false}>\n        <ModalHeader toggle={this.toggle}>{gettext('New Wiki')}</ModalHeader>\n        <ModalBody>\n          <label className=\"form-label\">{gettext('Name')}</label>\n          <Input onKeyPress={this.handleKeyPress} autoFocus={true} value={this.state.name} onChange={this.inputNewName}/>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.toggle}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.handleSubmit} disabled={!this.state.isSubmitBtnActive}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nNewWikiDialog.propTypes = propTypes;\n\nexport default NewWikiDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../../utils/constants';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter } from 'reactstrap';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport moment from 'moment';\nimport Repo from '../../models/repo';\nimport { Utils } from '../../utils/utils';\n\nconst propTypes = {\n  toggleCancel: PropTypes.func.isRequired,\n  addWiki: PropTypes.func.isRequired\n};\n\nclass WikiSelectDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      repos: [],\n      repoID: '',\n    };\n  }\n\n  componentDidMount() {\n    seafileAPI.listRepos().then(res => {\n      let repoList = res.data.repos\n        .filter(item => {\n          switch (item.type) {\n            case 'mine': // my libraries\n              return !item.encrypted;\n            case 'shared': // libraries shared with me\n              // 'is_admin': the library is shared with 'admin' permission\n              return !item.encrypted && item.is_admin;\n            case 'group':\n            default:\n              return !item.encrypted && !res.data.repos.some(repo => {\n                // just remove the duplicated libraries\n                return repo.type != item.type && repo.repo_id == item.repo_id;\n              });\n          }\n        })\n        .map(item => {\n          let repo = new Repo(item);\n          return repo;\n        });\n      repoList = Utils.sortRepos(repoList, 'name', 'asc');\n      this.setState({repos: repoList});\n    });\n  }\n\n  onChange = (repo) => {\n    this.setState({\n      repoID: repo.repo_id,\n    });\n  }\n\n  handleSubmit = () => {\n    let { repoID } = this.state;\n    this.props.addWiki(repoID);\n    this.props.toggleCancel();\n  }\n\n  toggle = () => {\n    this.props.toggleCancel();\n  }\n\n  render() {\n    return (\n      <Modal isOpen={true}>\n        <ModalHeader toggle={this.toggle}>{gettext('Publish a Library')}</ModalHeader>\n        <ModalBody className=\"dialog-list-container\">\n          <table>\n            <thead>\n              <tr>\n                <th width='6%'>{/* select */}</th>\n                <th width='9%'>{/* icon */}</th>\n                <th width='55%'>{gettext('Name')}</th>\n                <th width='30%'>{gettext('Last Update')}</th>\n              </tr>\n            </thead>\n            <tbody>\n              {this.state.repos.map((repo, index) => {\n                return (\n                  <tr key={index}>\n                    <td className=\"text-center\"><input type=\"radio\" className=\"vam\" name=\"repo\" value={repo.repo_id} onChange={this.onChange.bind(this, repo)} /></td>\n                    <td className=\"text-center\"><img src={Utils.getLibIconUrl(repo, false)} width=\"24\" title={Utils.getLibIconTitle(repo)} alt={Utils.getLibIconTitle(repo)} /></td>\n                    <td>{repo.repo_name}</td>\n                    <td>{moment(repo.last_modified).fromNow()}</td>\n                  </tr>\n                );\n              })}\n            </tbody>\n          </table>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.toggle}>{gettext('Cancel')}</Button>\n          {this.state.repoID ?\n            <Button color=\"primary\" onClick={this.handleSubmit}>{gettext('Submit')}</Button>:\n            <Button color=\"primary\" disabled>{gettext('Submit')}</Button>\n          }\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nWikiSelectDialog.propTypes = propTypes;\n\nexport default WikiSelectDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../../utils/constants';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter } from 'reactstrap';\n\nconst propTypes = {\n  toggleCancel: PropTypes.func.isRequired,\n  handleSubmit: PropTypes.func.isRequired,\n};\n\nclass WikiDeleteDialog extends React.Component {\n\n  toggle = () => {\n    this.props.toggleCancel();\n  }\n\n  render() {\n    return (\n      <Modal isOpen={true} toggle={this.toggle}>\n        <ModalHeader toggle={this.toggle}>{gettext('Unpublish Library')}</ModalHeader>\n        <ModalBody>\n          <p>{gettext('Are you sure you want to unpublish this library?')}</p>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.toggle}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.props.handleSubmit}>{gettext('Unpublish')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nWikiDeleteDialog.propTypes = propTypes;\n\nexport default WikiDeleteDialog;\n","import React, { Component, Fragment } from 'react';\nimport { Dropdown, DropdownToggle, DropdownItem } from 'reactstrap';\nimport PropTypes from 'prop-types';\nimport moment from 'moment';\nimport { siteRoot, gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\n// import { seafileAPI } from '../../utils/seafile-api';\n// import Toast from '../toast';\nimport ModalPortal from '../modal-portal';\nimport WikiDeleteDialog from '../dialog/wiki-delete-dialog';\n// import Rename from '../rename';\n\nconst propTypes = {\n  wiki: PropTypes.object.isRequired,\n  // renameWiki: PropTypes.func.isRequired,\n  deleteWiki: PropTypes.func.isRequired,\n  isItemFreezed: PropTypes.bool.isRequired,\n  onFreezedItem: PropTypes.func.isRequired,\n  onUnfreezedItem: PropTypes.func.isRequired,\n};\n\nclass WikiListItem extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOpMenuOpen: false, // for mobile\n      isShowDeleteDialog: false,\n      // isRenameing: false,\n      highlight: false,\n      // permission: this.props.wiki.permission,\n    };\n  }\n\n  toggleOpMenu = () => {\n    this.setState({\n      isOpMenuOpen: !this.state.isOpMenuOpen\n    });\n  }\n\n  // clickMenuToggle = (e) => {\n  //   e.preventDefault();\n  //   this.onMenuToggle(e);\n  // }\n\n  // onMenuToggle = (e) => {\n  //   let targetType = e.target.dataset.toggle;\n  //   if (targetType !== 'item') {\n  //     if (this.props.isItemFreezed) {\n  //       this.setState({\n  //         highlight: false,\n  //         isShowMenuControl: false,\n  //         isShowWikiMenu: !this.state.isShowWikiMenu\n  //       });\n  //       this.props.onUnfreezedItem();\n  //     } else {\n  //       this.setState({\n  //         isShowWikiMenu: !this.state.isShowWikiMenu\n  //       });\n  //       this.props.onFreezedItem();\n  //     }\n  //   }\n  // }\n\n  onMouseEnter = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({ highlight: true });\n    }\n  }\n\n  onMouseLeave = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({ highlight: false });\n    }\n  }\n\n  // changePerm = (permission) => {\n  //   let wiki = this.props.wiki;\n  //   seafileAPI.updateWikiPermission(wiki.slug, permission).then(() => {\n  //     this.setState({permission: permission});\n  //   }).catch((error) => {\n  //     if(error.response) {\n  //       let errorMsg = error.response.data.error_msg;\n  //       Toast.danger(errorMsg);\n  //     }\n  //   });\n  // }\n\n  // onRenameToggle = (e) => {\n  //   this.props.onFreezedItem();\n  //   this.setState({\n  //     isShowWikiMenu: false,\n  //     isShowMenuControl: false,\n  //     isRenameing: true,\n  //   });\n  // }\n\n  // onRenameConfirm = (newName) => {\n  //   this.renameWiki(newName);\n  //   this.onRenameCancel();\n  // }\n\n  // onRenameCancel = () => {\n  //   this.props.onUnfreezedItem();\n  //   this.setState({isRenameing: false});\n  // }\n\n  onDeleteToggle = (e) => {\n    e.preventDefault();\n    this.props.onUnfreezedItem();\n    this.setState({\n      isShowDeleteDialog: !this.state.isShowDeleteDialog,\n    });\n  }\n\n  onDeleteCancel = () => {\n    this.props.onUnfreezedItem();\n    this.setState({\n      isShowDeleteDialog: !this.state.isShowDeleteDialog,\n    });\n  }\n\n  // renameWiki = (newName) => {\n  //   let wiki = this.props.wiki;\n  //   this.props.renameWiki(wiki, newName);\n  // }\n\n  deleteWiki = () => {\n    let wiki = this.props.wiki;\n    this.props.deleteWiki(wiki);\n    this.setState({\n      isShowDeleteDialog: !this.state.isShowDeleteDialog,\n    });\n  }\n\n  render() {\n    let wiki = this.props.wiki;\n    let userProfileURL = `${siteRoot}profile/${encodeURIComponent(wiki.owner)}/`;\n    let fileIconUrl = Utils.getDefaultLibIconUrl(false);\n    let deleteIcon = `action-icon sf2-icon-x3 ${this.state.highlight ? '' : 'invisible'}`;\n\n    const desktopItem = (\n      <tr className={this.state.highlight ? 'tr-highlight' : ''} onMouseEnter={this.onMouseEnter} onMouseLeave={this.onMouseLeave} onFocus={this.onMouseEnter}>\n        <td><img src={fileIconUrl} width=\"24\" alt=\"\" /></td>\n        <td className=\"name\">\n          <a href={wiki.link}>{wiki.name}</a>\n          {/*this.state.isRenameing ?\n              <Rename wiki={wiki} name={wiki.name} onRenameConfirm={this.onRenameConfirm} onRenameCancel={this.onRenameCancel}/> :\n              <a href={wiki.link}>{wiki.name}</a>\n            */}\n        </td>\n        <td><a href={userProfileURL} target='_blank'>{wiki.owner_nickname}</a></td>\n        <td>{moment(wiki.updated_at).fromNow()}</td>\n        <td className=\"text-center cursor-pointer\">\n          <a href=\"#\" role=\"button\" aria-label={gettext('Unpublish')} title={gettext('Unpublish')} className={deleteIcon} onClick={this.onDeleteToggle}></a>\n        </td>\n      </tr>\n    );\n\n    const mobileItem = (\n      <tr className={this.state.highlight ? 'tr-highlight' : ''} onMouseEnter={this.onMouseEnter} onMouseLeave={this.onMouseLeave}>\n        <td><img src={fileIconUrl} width=\"24\" alt=\"\" /></td>\n        <td>\n          <a href={wiki.link}>{wiki.name}</a><br />\n          <a href={userProfileURL} target='_blank' className=\"item-meta-info\">{wiki.owner_nickname}</a>\n          <span className=\"item-meta-info\">{moment(wiki.updated_at).fromNow()}</span>\n        </td>\n        <td>\n          <Dropdown isOpen={this.state.isOpMenuOpen} toggle={this.toggleOpMenu}>\n            <DropdownToggle\n              tag=\"i\"\n              className=\"sf-dropdown-toggle fa fa-ellipsis-v ml-0\"\n              title={gettext('More Operations')}\n              data-toggle=\"dropdown\"\n              aria-expanded={this.state.isOpMenuOpen}\n            />\n            <div className={this.state.isOpMenuOpen ? '' : 'd-none'} onClick={this.toggleOpMenu}>\n              <div className=\"mobile-operation-menu-bg-layer\"></div>\n              <div className=\"mobile-operation-menu\">\n                <DropdownItem className=\"mobile-menu-item\" onClick={this.onDeleteToggle}>{gettext('Unpublish')}</DropdownItem>\n              </div>\n            </div>\n          </Dropdown>\n        </td>\n      </tr>\n    );\n\n    return (\n      <Fragment>\n        {Utils.isDesktop() ? desktopItem : mobileItem}\n        {this.state.isShowDeleteDialog &&\n          <ModalPortal>\n            <WikiDeleteDialog\n              toggleCancel={this.onDeleteCancel}\n              handleSubmit={this.deleteWiki}\n            />\n          </ModalPortal>\n        }\n      </Fragment>\n    );\n  }\n}\n\nWikiListItem.propTypes = propTypes;\n\nexport default WikiListItem;\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport WikiListItem from './wiki-list-item';\nimport LibsMobileThead from '../libs-mobile-thead';\n\nconst propTypes = {\n  data: PropTypes.object.isRequired,\n  renameWiki: PropTypes.func.isRequired,\n  deleteWiki: PropTypes.func.isRequired,\n};\n\nclass WikiListView extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isItemFreezed: false,\n    };\n  }\n\n  onFreezedItem = () => {\n    this.setState({isItemFreezed: true});\n  }\n\n  onUnfreezedItem = () => {\n    this.setState({isItemFreezed: false});\n  }\n\n  render() {\n    let { loading, errorMsg, wikis } = this.props.data;\n\n    if (loading) {\n      return <span className=\"loading-icon loading-tip\"></span>;\n    } else if (errorMsg) {\n      return <p className=\"error text-center\">{errorMsg}</p>;\n    } else {\n      const isDesktop = Utils.isDesktop();\n      const desktopThead = (\n        <thead>\n          <tr>\n            <th width=\"4%\"></th>\n            <th width=\"36%\">{gettext('Name')}</th>\n            <th width=\"25%\">{gettext('Owner')}</th>\n            <th width=\"25%\">{gettext('Last Update')}</th>\n            <th width=\"10%\">{/* operation */}</th>\n          </tr>\n        </thead>\n      );\n      return (\n        <table className={isDesktop ? '' : 'table-thead-hidden'}>\n          {isDesktop ? desktopThead : <LibsMobileThead />}\n          <tbody>\n            {wikis.map((wiki, index) => {\n              return (\n                <WikiListItem\n                  key={index}\n                  wiki={wiki}\n                  renameWiki={this.props.renameWiki}\n                  deleteWiki={this.props.deleteWiki}\n                  isItemFreezed={this.state.isItemFreezed}\n                  onFreezedItem={this.onFreezedItem}\n                  onUnfreezedItem={this.onUnfreezedItem}\n                />\n              );\n            })}\n          </tbody>\n        </table>\n      );\n    }\n  }\n}\n\nWikiListView.propTypes = propTypes;\n\nexport default WikiListView;\n","import React, { Component, Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Button } from 'reactstrap';\nimport MediaQuery from 'react-responsive';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { gettext, canPublishRepo } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../../components/toast';\nimport ModalPortal from '../../components/modal-portal';\nimport EmptyTip from '../../components/empty-tip';\nimport CommonToolbar from '../../components/toolbar/common-toolbar';\nimport NewWikiDialog from '../../components/dialog/new-wiki-dialog';\nimport WikiSelectDialog from '../../components/dialog/wiki-select-dialog';\nimport WikiListView from '../../components/wiki-list-view/wiki-list-view';\n\nconst propTypes = {\n  onShowSidePanel: PropTypes.func.isRequired,\n  onSearchedClick: PropTypes.func.isRequired,\n};\n\nclass Wikis extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      wikis: [],\n      isShowAddWikiMenu: false,\n      isShowSelectDialog: false,\n      isShowCreateDialog: false,\n    };\n  }\n\n  componentDidMount() {\n    this.getWikis();\n  }\n\n  getWikis = () => {\n    seafileAPI.listWikis().then(res => {\n      this.setState({\n        loading: false,\n        wikis: res.data.data\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  clickMenuToggle = (e) => {\n    e.preventDefault();\n    this.onMenuToggle();\n  }\n\n  onMenuToggle = () => {\n    this.setState({isShowAddWikiMenu: !this.state.isShowAddWikiMenu});\n  }\n\n  onSelectToggle = () => {\n    this.setState({isShowSelectDialog: !this.state.isShowSelectDialog});\n  }\n\n  onCreateToggle = () => {\n    this.setState({isShowCreateDialog: !this.state.isShowCreateDialog});\n  }\n\n  addWiki = (repoID) => {\n    seafileAPI.addWiki(repoID).then((res) => {\n      this.state.wikis.push(res.data);\n      this.setState({wikis: this.state.wikis});\n    }).catch((error) => {\n      if(error.response) {\n        let errorMsg = error.response.data.error_msg;\n        toaster.danger(errorMsg);\n      }\n    });\n  }\n\n  renameWiki = (wiki, newName) => {\n    seafileAPI.renameWiki(wiki.slug, newName).then((res) => {\n      let wikis = this.state.wikis.map((item) => {\n        if (item.name === wiki.name) {\n          item = res.data;\n        }\n        return item;\n      });\n      this.setState({wikis: wikis});\n    }).catch((error) => {\n      if(error.response) {\n        let errorMsg = error.response.data.error_msg;\n        toaster.danger(errorMsg);\n      }\n    });\n  }\n\n  deleteWiki = (wiki) => {\n    seafileAPI.deleteWiki(wiki.slug).then(() => {\n      let wikis = this.state.wikis.filter(item => {\n        return item.name !== wiki.name;\n      });\n      this.setState({wikis: wikis});\n    }).catch((error) => {\n      if(error.response) {\n        let errorMsg = error.response.data.error_msg;\n        toaster.danger(errorMsg);\n      }\n    });\n  }\n\n  render() {\n    return (\n      <Fragment>\n        <div className=\"main-panel-north border-left-show\">\n          <div className=\"cur-view-toolbar\">\n            <span className=\"sf2-icon-menu side-nav-toggle hidden-md-up d-md-none\" title=\"Side Nav Menu\" onClick={this.props.onShowSidePanel}></span>\n            {canPublishRepo &&\n            <div className=\"operation\">\n              <Fragment>\n                <MediaQuery query=\"(min-width: 768px)\">\n                  <Button className=\"btn btn-secondary operation-item\" onClick={this.onSelectToggle}>{gettext('Publish a Library')}</Button>\n                </MediaQuery>\n                <MediaQuery query=\"(max-width: 767.8px)\">\n                  <span className=\"sf2-icon-plus mobile-toolbar-icon\" title={gettext('Publish a Library')} onClick={this.onSelectToggle}></span>\n                </MediaQuery>\n              </Fragment>\n            </div>\n            }\n          </div>\n          <CommonToolbar onSearchedClick={this.props.onSearchedClick} />\n        </div>\n        <div className=\"main-panel-center\">\n          <div className=\"cur-view-container\" id=\"wikis\">\n            <div className=\"cur-view-path\">\n              <div className=\"path-container\">\n                <h3 className=\"sf-heading m-0\">{gettext('Published Libraries')}</h3>\n              </div>\n            </div>\n            <div className=\"cur-view-content\">\n              {(this.state.loading || this.state.wikis.length !== 0) &&\n                <WikiListView\n                  data={this.state}\n                  renameWiki={this.renameWiki}\n                  deleteWiki={this.deleteWiki}\n                />\n              }\n              {(!this.state.loading && this.state.wikis.length === 0) &&\n                <EmptyTip>\n                  <h2>{gettext('No published libraries')}</h2>\n                  <p>{gettext('You have not published any libraries yet. A published library can be accessed by anyone, not only users, via its URL. You can publish a library by clicking the \"Publish a Library\" button in the menu bar.')}</p>\n                </EmptyTip>\n              }\n            </div>\n          </div>\n        </div>\n        {this.state.isShowCreateDialog && (\n          <ModalPortal>\n            <NewWikiDialog\n              toggleCancel={this.onCreateToggle}\n              addWiki={this.addWiki}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isShowSelectDialog && (\n          <ModalPortal>\n            <WikiSelectDialog\n              toggleCancel={this.onSelectToggle}\n              addWiki={this.addWiki}\n            />\n          </ModalPortal>\n        )}\n      </Fragment>\n    );\n  }\n}\n\nWikis.propTypes = propTypes;\n\nexport default Wikis;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport CommonToolbar from './common-toolbar';\n\nconst propTypes = {\n  searchPlaceholder: PropTypes.string,\n  onShowSidePanel: PropTypes.func.isRequired,\n  onSearchedClick: PropTypes.func.isRequired,\n};\n\nclass GeneralToolbar extends React.Component {\n\n  render() {\n    // todo get repoID?\n    let { onShowSidePanel, onSearchedClick } = this.props;\n    return (\n      <div className=\"main-panel-north\">\n        <div className=\"cur-view-toolbar\">\n          <span\n            className=\"sf2-icon-menu side-nav-toggle hidden-md-up d-md-none\"\n            title=\"Side Nav Menu\"\n            onClick={onShowSidePanel}>\n          </span>\n        </div>\n        <CommonToolbar\n          searchPlaceholder={this.props.searchPlaceholder}\n          onSearchedClick={onSearchedClick}\n        />\n      </div>\n    );\n  }\n}\n\nGeneralToolbar.propTypes = propTypes;\n\nexport default GeneralToolbar;\n","import React, { Fragment } from 'react';\nimport GeneralToolBar from './toolbar/general-toolbar';\n\nconst MainContentWrapper = (WrapperedComponent) => {\n  return class Wrapper extends React.Component {\n\n    constructor(props) {\n      super(props);\n    }\n\n    render() {\n      return (\n        <Fragment>\n          <GeneralToolBar {...this.props} />\n          <WrapperedComponent {...this.props} />\n        </Fragment>\n      );\n    }\n  };\n};\n\nexport default MainContentWrapper;\n","import React, { Component } from 'react';\nimport ReactDom from 'react-dom';\nimport { Router, navigate } from '@gatsbyjs/reach-router';\nimport MediaQuery from 'react-responsive';\nimport { Modal } from 'reactstrap';\nimport { siteRoot, canAddRepo, isDocs } from './utils/constants';\nimport { Utils } from './utils/utils';\nimport SystemNotification from './components/system-notification';\nimport SidePanel from './components/side-panel';\nimport MainPanel from './components/main-panel';\nimport DraftsView from './pages/drafts/drafts-view';\nimport DraftContent from './pages/drafts/draft-content';\nimport FilesActivities from './pages/dashboard/files-activities';\nimport Starred from './pages/starred/starred';\nimport LinkedDevices from './pages/linked-devices/linked-devices';\nimport editUtilities from './utils/editor-utilities';\nimport ShareAdminLibraries from './pages/share-admin/libraries';\nimport ShareAdminFolders from './pages/share-admin/folders';\nimport ShareAdminShareLinks from './pages/share-admin/share-links';\nimport ShareAdminUploadLinks from './pages/share-admin/upload-links';\nimport SharedLibraries from './pages/shared-libs/shared-libs';\nimport ShareWithOCM from './pages/share-with-ocm/shared-with-ocm';\nimport OCMViaWebdav from './pages/ocm-via-webdav/ocm-via-webdav';\nimport OCMRepoDir from './pages/share-with-ocm/remote-dir-view';\nimport MyLibraries from './pages/my-libs/my-libs';\nimport MyLibDeleted from './pages/my-libs/my-libs-deleted';\nimport PublicSharedView from './pages/shared-with-all/public-shared-view';\nimport LibContentView from './pages/lib-content-view/lib-content-view';\nimport Group from './pages/groups/group-view';\nimport Groups from './pages/groups/groups-view';\nimport InvitationsView from './pages/invitations/invitations-view';\nimport Wikis from './pages/wikis/wikis';\nimport MainContentWrapper from './components/main-content-wrapper';\n\nimport './css/layout.css';\nimport './css/toolbar.css';\nimport './css/search.css';\n\nconst FilesActivitiesWrapper = MainContentWrapper(FilesActivities);\nconst DraftsViewWrapper = MainContentWrapper(DraftsView);\nconst StarredWrapper = MainContentWrapper(Starred);\nconst LinkedDevicesWrapper = MainContentWrapper(LinkedDevices);\nconst SharedLibrariesWrapper = MainContentWrapper(SharedLibraries);\nconst SharedWithOCMWrapper = MainContentWrapper(ShareWithOCM);\nconst OCMViaWebdavWrapper = MainContentWrapper(OCMViaWebdav);\nconst ShareAdminLibrariesWrapper = MainContentWrapper(ShareAdminLibraries);\nconst ShareAdminFoldersWrapper = MainContentWrapper(ShareAdminFolders);\n\nclass App extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOpen: false,\n      isSidePanelClosed: false,\n      draftCounts: 0,\n      draftList:[],\n      isLoadingDraft: true,\n      currentTab: '/',\n      pathPrefix: [],\n    };\n    this.dirViewPanels = ['my-libs', 'shared-libs', 'org']; // and group\n    window.onpopstate = this.onpopstate;\n  }\n\n  onpopstate = (event) => {\n    if (event.state && event.state.currentTab && event.state.pathPrefix) {\n      let { currentTab, pathPrefix } = event.state;\n      this.setState({currentTab, pathPrefix});\n    }\n  }\n\n  componentWillMount() {\n    if (!Utils.isDesktop()) {\n      this.setState({\n        isSidePanelClosed: true\n      });\n    }\n  }\n\n  navigateClientUrlToLib = () =>{\n    if(window.location.hash && window.location.hash.indexOf('common/lib') != -1){\n      let splitUrlArray = window.location.hash.split('/');\n      let repoID = splitUrlArray[splitUrlArray.length - 2];\n      let url = siteRoot + 'library/' + repoID + '/';\n      navigate(url, {repalce: true});\n    }\n  }\n\n  componentDidMount() {\n    // url from client  e.g. http://127.0.0.1:8000/#common/lib/34e7fb92-e91d-499d-bcde-c30ea8af9828/\n    // navigate to library page http://127.0.0.1:8000/library/34e7fb92-e91d-499d-bcde-c30ea8af9828/\n    this.navigateClientUrlToLib();\n\n    // e.g.  from http://127.0.0.1:8000/drafts/reviews/\n    // get reviews\n    // TODO: need refactor later\n    let href = window.location.href.split('/');\n    if (isDocs) {\n      this.getDrafts();\n    }\n    this.setState({currentTab: href[href.length - 2]});\n  }\n\n  getDrafts = () => {\n    editUtilities.listDrafts().then(res => {\n      this.setState({\n        draftCounts: res.data.draft_counts,\n        draftList: res.data.data,\n        isLoadingDraft: false,\n      });\n    });\n  }\n\n  updateDraftsList = (draft_id) => {\n    this.setState({\n      draftCounts: this.state.draftCounts - 1,\n      draftList: this.state.draftList.filter(draft => draft.id != draft_id),\n    });\n  }\n\n  onCloseSidePanel = () => {\n    this.setState({\n      isSidePanelClosed: !this.state.isSidePanelClosed\n    });\n  }\n\n  onShowSidePanel = () => {\n    this.setState({\n      isSidePanelClosed: !this.state.isSidePanelClosed\n    });\n  }\n\n  onSearchedClick = (selectedItem) => {\n    if (selectedItem.is_dir === true) {\n      this.setState({currentTab: '', pathPrefix: []});\n      let url = siteRoot + 'library/' + selectedItem.repo_id + '/' + selectedItem.repo_name + selectedItem.path;\n      navigate(url, {repalce: true});\n    } else {\n      let url = siteRoot + 'lib/' + selectedItem.repo_id + '/file' + Utils.encodePath(selectedItem.path);\n      let isWeChat = Utils.isWeChat();\n      if (!isWeChat) {\n        let newWindow = window.open('about:blank');\n        newWindow.location.href = url;\n      } else {\n        location.href = url;\n      }\n    }\n  }\n\n  onGroupChanged = (groupID) => {\n    setTimeout(function(){\n      let url;\n      if (groupID) {\n        url = siteRoot + 'group/' + groupID + '/';\n      }\n      else {\n        url = siteRoot + 'groups/';\n      }\n      window.location = url.toString();\n    }, 1);\n  }\n\n  tabItemClick = (tabName, groupID) => {\n    let pathPrefix = [];\n    if (groupID || this.dirViewPanels.indexOf(tabName) > -1) {\n      pathPrefix = this.generatorPrefix(tabName, groupID);\n    }\n    this.setState({\n      currentTab: tabName,\n      pathPrefix: pathPrefix\n    }, () => {\n      let { currentTab, pathPrefix } = this.state;\n      window.history.replaceState({currentTab: currentTab, pathPrefix: pathPrefix}, null);\n    });\n    if (!Utils.isDesktop() && !this.state.isSidePanelClosed) {\n      this.setState({ isSidePanelClosed: true });\n    }\n  }\n\n  generatorPrefix = (tabName, groupID) => {\n    let pathPrefix = [];\n    if (groupID) {\n      let navTab1 = {\n        url: siteRoot + 'groups/',\n        showName: 'Groups',\n        name: 'groups',\n        id: null,\n      };\n      let navTab2 = {\n        url: siteRoot + 'group/' + groupID + '/',\n        showName: tabName,\n        name: tabName,\n        id: groupID,\n      };\n      pathPrefix.push(navTab1);\n      pathPrefix.push(navTab2);\n    } else {\n      let navTab = {\n        url: siteRoot + tabName + '/',\n        showName: this.getTabShowName(tabName),\n        name: tabName,\n        id: null,\n      };\n      pathPrefix.push(navTab);\n    }\n    return pathPrefix;\n  }\n\n  getTabShowName = (tabName) => {\n    if (tabName === 'my-libs') {\n      return 'Libraries';\n    }\n    if (tabName === 'shared-libs') {\n      return 'Shared with me';\n    }\n    if (tabName === 'org') {\n      return 'Shared with all';\n    }\n  }\n\n  toggleSidePanel = () => {\n    this.setState({\n      isSidePanelClosed: !this.state.isSidePanelClosed\n    });\n  }\n\n  render() {\n    let { currentTab, isSidePanelClosed } = this.state;\n\n    const home = canAddRepo ?\n      <MyLibraries path={ siteRoot } onShowSidePanel={this.onShowSidePanel} onSearchedClick={this.onSearchedClick} /> :\n      <SharedLibrariesWrapper path={ siteRoot } onShowSidePanel={this.onShowSidePanel} onSearchedClick={this.onSearchedClick} />;\n\n    return (\n      <React.Fragment>\n        <SystemNotification />\n        <div id=\"main\">\n          <SidePanel isSidePanelClosed={this.state.isSidePanelClosed} onCloseSidePanel={this.onCloseSidePanel} currentTab={currentTab} tabItemClick={this.tabItemClick} draftCounts={this.state.draftCounts} />\n          <MainPanel>\n            <Router className=\"reach-router\">\n              {home}\n              <FilesActivitiesWrapper path={siteRoot + 'dashboard'} onShowSidePanel={this.onShowSidePanel} onSearchedClick={this.onSearchedClick} />\n              <DraftsViewWrapper path={siteRoot + 'drafts'}\n                onShowSidePanel={this.onShowSidePanel}\n                onSearchedClick={this.onSearchedClick}\n              >\n                <DraftContent\n                  path='/'\n                  getDrafts={this.getDrafts}\n                  isLoadingDraft={this.state.isLoadingDraft}\n                  draftList={this.state.draftList}\n                  updateDraftsList={this.updateDraftsList}\n                />\n              </DraftsViewWrapper>\n              <StarredWrapper path={siteRoot + 'starred'} onShowSidePanel={this.onShowSidePanel} onSearchedClick={this.onSearchedClick} />\n              <LinkedDevicesWrapper path={siteRoot + 'linked-devices'} onShowSidePanel={this.onShowSidePanel} onSearchedClick={this.onSearchedClick} />\n              <ShareAdminLibrariesWrapper path={siteRoot + 'share-admin-libs'} onShowSidePanel={this.onShowSidePanel} onSearchedClick={this.onSearchedClick} />\n              <ShareAdminFoldersWrapper path={siteRoot + 'share-admin-folders'} onShowSidePanel={this.onShowSidePanel} onSearchedClick={this.onSearchedClick} />\n              <ShareAdminShareLinks path={siteRoot + 'share-admin-share-links'} onShowSidePanel={this.onShowSidePanel} onSearchedClick={this.onSearchedClick} />\n              <ShareAdminUploadLinks path={siteRoot + 'share-admin-upload-links'} onShowSidePanel={this.onShowSidePanel} onSearchedClick={this.onSearchedClick} />\n              <SharedLibrariesWrapper path={siteRoot + 'shared-libs'} onShowSidePanel={this.onShowSidePanel} onSearchedClick={this.onSearchedClick} />\n              <SharedWithOCMWrapper path={siteRoot + 'shared-with-ocm'} onShowSidePanel={this.onShowSidePanel} onSearchedClick={this.onSearchedClick} />\n              <OCMViaWebdavWrapper path={siteRoot + 'ocm-via-webdav'} onShowSidePanel={this.onShowSidePanel} onSearchedClick={this.onSearchedClick} />\n              <MyLibraries path={siteRoot + 'my-libs'} onShowSidePanel={this.onShowSidePanel} onSearchedClick={this.onSearchedClick} />\n              <MyLibDeleted path={siteRoot + 'my-libs/deleted/'} onSearchedClick={this.onSearchedClick} />\n              <LibContentView path={siteRoot + 'library/:repoID/*'} pathPrefix={this.state.pathPrefix} onMenuClick={this.onShowSidePanel} onTabNavClick={this.tabItemClick}/>\n              <OCMRepoDir path={siteRoot + 'remote-library/:providerID/:repoID/*'} pathPrefix={this.state.pathPrefix} onMenuClick={this.onShowSidePanel} onTabNavClick={this.tabItemClick}/>\n              <Groups path={siteRoot + 'groups'} onShowSidePanel={this.onShowSidePanel} onSearchedClick={this.onSearchedClick}/>\n              <Group\n                path={siteRoot + 'group/:groupID'}\n                onShowSidePanel={this.onShowSidePanel}\n                onSearchedClick={this.onSearchedClick}\n                onTabNavClick={this.tabItemClick}\n                onGroupChanged={this.onGroupChanged}\n              />\n              <Wikis path={siteRoot + 'published'} onShowSidePanel={this.onShowSidePanel} onSearchedClick={this.onSearchedClick}/>\n              <PublicSharedView path={siteRoot + 'org/'} onShowSidePanel={this.onShowSidePanel} onSearchedClick={this.onSearchedClick} onTabNavClick={this.tabItemClick}/>\n              <InvitationsView path={siteRoot + 'invitations/'} onShowSidePanel={this.onShowSidePanel} onSearchedClick={this.onSearchedClick} />\n            </Router>\n          </MainPanel>\n          <MediaQuery query=\"(max-width: 767.8px)\">\n            <Modal zIndex=\"1030\" isOpen={!isSidePanelClosed} toggle={this.toggleSidePanel} contentClassName=\"d-none\"></Modal>\n          </MediaQuery>\n        </div>\n      </React.Fragment>\n    );\n  }\n}\n\nReactDom.render(<App />, document.getElementById('wrapper'));\n","import assign from 'object-assign';\n\nimport { store } from './helpers';\n\nexport const MENU_SHOW = 'REACT_CONTEXTMENU_SHOW';\nexport const MENU_HIDE = 'REACT_CONTEXTMENU_HIDE';\n\n\nexport function dispatchGlobalEvent(eventName, opts, target = window) {\n  // Compatibale with IE\n  // @see http://stackoverflow.com/questions/26596123/internet-explorer-9-10-11-event-constructor-doesnt-work\n  let event;\n\n  if (typeof window.CustomEvent === 'function') {\n    event = new window.CustomEvent(eventName, { detail: opts });\n  } else {\n    event = document.createEvent('CustomEvent');\n    event.initCustomEvent(eventName, false, true, opts);\n  }\n\n  if (target) {\n    target.dispatchEvent(event);\n    assign(store, opts);\n  }\n}\n\nexport function showMenu(opts = {}, target) {\n  dispatchGlobalEvent(MENU_SHOW, assign({}, opts, { type: MENU_SHOW }), target);\n}\n\nexport function hideMenu(opts = {}, target) {\n  dispatchGlobalEvent(MENU_HIDE, assign({}, opts, { type: MENU_HIDE }), target);\n}\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport listener from './globalEventListener';\nimport { hideMenu } from './actions';\nimport { callIfExists } from './helpers';\nimport { Utils } from '../../utils/utils';\n\nconst propTypes = {\n  id: PropTypes.string.isRequired,\n  rtl: PropTypes.bool,\n  onMenuItemClick: PropTypes.func.isRequired,\n  onShowMenu: PropTypes.func,\n  onHideMenu: PropTypes.func,\n};\n\nclass ContextMenu extends React.Component {\n\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      x: 0,\n      y: 0,\n      isVisible: false,\n      currentObject: null,\n      menuList: [],\n    };\n  }\n\n  componentDidMount() {\n    this.listenId = listener.register(this.handleShow, this.handleHide);\n  }\n\n  componentDidUpdate () {\n    if (this.state.isVisible) {\n      const wrapper = window.requestAnimationFrame || setTimeout;\n\n      wrapper(() => {\n        const { x, y } = this.state;\n        const { top, left } = this.props.rtl ? this.getRTLMenuPosition(x, y) : this.getMenuPosition(x, y);\n\n        wrapper(() => {\n          if (!this.menu) return;\n          this.menu.style.top = `${top}px`;\n          this.menu.style.left = `${left}px`;\n          this.menu.style.opacity = 1;\n          this.menu.style.pointerEvents = 'auto';\n        });\n      });\n    } else {\n      if (!this.menu) return;\n      this.menu.style.opacity = 0;\n      this.menu.style.pointerEvents = 'none';\n    }\n  }\n\n  componentWillUnmount() {\n    if (this.listenId) {\n      listener.unregister(this.listenId);\n    }\n\n    this.unregisterHandlers();\n  }\n\n  registerHandlers = () => {\n    document.addEventListener('mousedown', this.handleOutsideClick);\n    document.addEventListener('touchstart', this.handleOutsideClick);\n    document.addEventListener('scroll', this.handleHide);\n    document.addEventListener('contextmenu', this.handleHide);\n    document.addEventListener('keydown', this.handleKeyNavigation);\n    window.addEventListener('resize', this.handleHide);\n  }\n\n  unregisterHandlers = () => {\n    document.removeEventListener('mousedown', this.handleOutsideClick);\n    document.removeEventListener('touchstart', this.handleOutsideClick);\n    document.removeEventListener('scroll', this.handleHide);\n    document.removeEventListener('contextmenu', this.handleHide);\n    document.removeEventListener('keydown', this.handleKeyNavigation);\n    window.removeEventListener('resize', this.handleHide);\n  }\n\n  handleShow = (e) => {\n    if (e.detail.id !== this.props.id) return;\n\n    const { x, y } = e.detail.position;\n    const { currentObject, menuList} = e.detail;\n\n    this.setState({ isVisible: true, x, y, currentObject, menuList });\n    this.registerHandlers();\n    callIfExists(this.props.onShowMenu, e);\n  }\n\n  handleHide = (e) => {\n    if (this.state.isVisible && (!e.detail || !e.detail.id || e.detail.id === this.props.id)) {\n      this.unregisterHandlers();\n      this.setState({ isVisible: false});\n      callIfExists(this.props.onHideMenu, e);\n    }\n  }\n\n  handleOutsideClick = (e) => {\n    if (!this.menu.contains(e.target)) hideMenu();\n  }\n\n  handleMouseLeave = (event) => {\n    event.preventDefault();\n\n    if (this.props.hideOnLeave) hideMenu();\n  }\n\n  handleContextMenu = (e) => {\n    this.handleHide(e);\n  }\n\n  handleKeyNavigation = (e) => {\n    if (this.state.isVisible === false) {\n      return;\n    }\n    e.preventDefault();\n    this.hideMenu(e);\n  }\n\n  hideMenu = (e) => {\n    if (e.keyCode === 27 || e.keyCode === 13) { // ECS or enter\n      hideMenu();\n    }\n  }\n\n  getMenuPosition = (x = 0, y = 0) => {\n    let menuStyles = {\n      top: y,\n      left: x\n    };\n\n    if (!this.menu) return menuStyles;\n\n    const { innerWidth, innerHeight } = window;\n    const rect = this.menu.getBoundingClientRect();\n\n    if (y + rect.height > innerHeight) {\n      menuStyles.top -= rect.height;\n    }\n\n    if (x + rect.width > innerWidth) {\n      menuStyles.left -= rect.width;\n    }\n\n    if (menuStyles.top < 0) {\n      menuStyles.top = rect.height < innerHeight ? (innerHeight - rect.height) / 2 : 0;\n    }\n\n    if (menuStyles.left < 0) {\n      menuStyles.left = rect.width < innerWidth ? (innerWidth - rect.width) / 2 : 0;\n    }\n\n    return menuStyles;\n  }\n\n  getRTLMenuPosition = (x = 0, y = 0) => {\n    let menuStyles = {\n      top: y,\n      left: x\n    };\n\n    if (!this.menu) return menuStyles;\n\n    const { innerWidth, innerHeight } = window;\n    const rect = this.menu.getBoundingClientRect();\n\n    // Try to position the menu on the left side of the cursor\n    menuStyles.left = x - rect.width;\n\n    if (y + rect.height > innerHeight) {\n      menuStyles.top -= rect.height;\n    }\n\n    if (menuStyles.left < 0) {\n      menuStyles.left += rect.width;\n    }\n\n    if (menuStyles.top < 0) {\n      menuStyles.top = rect.height < innerHeight ? (innerHeight - rect.height) / 2 : 0;\n    }\n\n    if (menuStyles.left + rect.width > innerWidth) {\n      menuStyles.left = rect.width < innerWidth ? (innerWidth - rect.width) / 2 : 0;\n    }\n\n    return menuStyles;\n  }\n\n\n  onMenuItemClick = (event) => {\n    event.stopPropagation();\n    let operation = Utils.getEventData(event, 'operation');\n    let currentObject = this.state.currentObject;\n    this.props.onMenuItemClick(operation, currentObject, event);\n  }\n\n  onContextMenu = (event) => {\n    event.stopPropagation();\n  }\n\n  render() {\n    const inlineStyle = { position: 'fixed', opacity: 0, pointerEvents: 'none', display: 'block' };\n    return (\n      <div role=\"menu\" className=\"seafile-contextmenu dropdown-menu\" style={inlineStyle} ref={menu => { this.menu = menu; }}>\n        {this.state.menuList.map((menuItem, index) => {\n          if (menuItem === 'Divider') {\n            return <div key={index} className=\"seafile-divider dropdown-divider\"></div>;\n          } else {\n            return (\n              <button\n                key={index}\n                className=\"seafile-contextmenu-item dropdown-item\"\n                data-operation={menuItem.key}\n                onClick={this.onMenuItemClick}\n                onContextMenu={this.onContextMenu}\n              >\n                {menuItem.value}\n              </button>\n            );\n          }\n        })}\n      </div>\n    );\n  }\n}\n\nContextMenu.propTypes = propTypes;\n\nexport default ContextMenu;\n","import { MENU_SHOW, MENU_HIDE } from './actions';\nimport { uniqueId, hasOwnProp, canUseDOM } from './helpers';\n\nclass GlobalEventListener {\n\n  constructor() {\n    this.callbacks = {};\n\n    if (canUseDOM) {\n      window.addEventListener(MENU_SHOW, this.handleShowEvent);\n      window.addEventListener(MENU_HIDE, this.handleHideEvent);\n    }\n  }\n\n  handleShowEvent = (event) => {\n    for (const id in this.callbacks) {\n      if (hasOwnProp(this.callbacks, id)) this.callbacks[id].show(event);\n    }\n  }\n\n  handleHideEvent = (event) => {\n    for (const id in this.callbacks) {\n      if (hasOwnProp(this.callbacks, id)) this.callbacks[id].hide(event);\n    }\n  }\n\n  register = (showCallback, hideCallback) => {\n    const id = uniqueId();\n\n    this.callbacks[id] = {\n      show: showCallback,\n      hide: hideCallback\n    };\n\n    return id;\n  }\n\n  unregister = (id) => {\n    if (id && this.callbacks[id]) {\n      delete this.callbacks[id];\n    }\n  }\n}\n\nexport default new GlobalEventListener();\n","export function callIfExists(func, ...args) {\n  return (typeof func === 'function') && func(...args);\n}\n\nexport function hasOwnProp(obj, prop) {\n  return Object.prototype.hasOwnProperty.call(obj, prop);\n}\n\nexport function uniqueId() {\n  return Math.random().toString(36).substring(7);\n}\n\nexport const store = {};\n\nexport const canUseDOM = Boolean(\n  typeof window !== 'undefined' && window.document && window.document.createElement\n);\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Modal, ModalHeader, ModalBody } from 'reactstrap';\nimport { gettext } from '../../utils/constants';\n\nconst propTypes = {\n  type: PropTypes.oneOf(['move', 'copy']).isRequired,\n  asyncOperatedFilesLength: PropTypes.number.isRequired,\n  asyncOperationProgress: PropTypes.oneOfType([PropTypes.string, PropTypes.number]).isRequired,\n  toggleDialog: PropTypes.func.isRequired,\n};\n\nclass CopyMoveDirentProgressDialog extends React.Component {\n\n  render() {\n\n    let { type , asyncOperationProgress, asyncOperatedFilesLength } = this.props;\n    let title = type === 'move' ? gettext('Move {num} items') : gettext('Copy {num} items');\n    title = title.replace('{num}', asyncOperatedFilesLength);\n    let progressStyle = {\n      width: asyncOperationProgress + '%',\n      lineHeight: '40px',\n      textAlign: 'left',\n    };\n    return (\n      <Modal isOpen={true}>\n        <ModalHeader toggle={this.props.toggleDialog}>{title}</ModalHeader>\n        <ModalBody style={{minHeight: '80px'}}>\n          <div className=\"progress\" style={{height: '40px'}}>\n            <div\n              className=\"progress-bar pl-2\"\n              role=\"progressbar\"\n              style={progressStyle}\n              aria-valuenow={asyncOperationProgress}\n              aria-valuemin=\"0\"\n              aria-valuemax=\"100\"\n            >\n              {asyncOperationProgress + '%'}\n            </div>\n          </div>\n        </ModalBody>\n      </Modal>\n    );\n  }\n}\n\nCopyMoveDirentProgressDialog.propTypes = propTypes;\n\nexport default CopyMoveDirentProgressDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Modal, ModalHeader, Input, ModalBody, ModalFooter, Form, FormGroup, Label, Alert } from 'reactstrap';\nimport { gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\n\nconst propTypes = {\n  fileType: PropTypes.string,\n  parentPath: PropTypes.string.isRequired,\n  onAddFolder: PropTypes.func.isRequired,\n  checkDuplicatedName: PropTypes.func.isRequired,\n  addFolderCancel: PropTypes.func.isRequired,\n};\n\nclass CreateForder extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      parentPath: '',\n      childName: '',\n      errMessage: '',\n      isSubmitBtnActive: false,\n    };\n  }\n\n  componentDidMount() {\n    let parentPath = this.props.parentPath;\n    if (parentPath[parentPath.length - 1] === '/') {  // mainPanel\n      this.setState({parentPath: parentPath});\n    } else {\n      this.setState({parentPath: parentPath + '/'}); // sidePanel\n    }\n  }\n\n  handleChange = (e) => {\n    if (!e.target.value.trim()) {\n      this.setState({isSubmitBtnActive: false});\n    } else {\n      this.setState({isSubmitBtnActive: true});\n    }\n\n    this.setState({childName: e.target.value});\n  }\n\n  handleSubmit = () => {\n    if (!this.state.isSubmitBtnActive) {\n      return;\n    }\n\n    let newName = this.state.childName;\n    let isDuplicated = this.checkDuplicatedName();\n\n    if (isDuplicated) {\n      let errMessage = gettext('The name \"{name}\" is already taken. Please choose a different name.');\n      errMessage = errMessage.replace('{name}', Utils.HTMLescape(newName));\n      this.setState({errMessage: errMessage});\n    } else {\n      let path = this.state.parentPath + newName;\n      this.props.onAddFolder(path);\n    }\n  }\n\n  handleKeyPress = (e) => {\n    if (e.key === 'Enter') {\n      this.handleSubmit();\n      e.preventDefault();\n    }\n  }\n\n  toggle = () => {\n    this.props.addFolderCancel();\n  }\n\n  checkDuplicatedName = () => {\n    let isDuplicated = this.props.checkDuplicatedName(this.state.childName);\n    return isDuplicated;\n  }\n\n  render() {\n    return (\n      <Modal isOpen={true} toggle={this.toggle} autoFocus={false}>\n        <ModalHeader toggle={this.toggle}>{gettext('New Folder')}</ModalHeader>\n        <ModalBody>\n          <Form>\n            <FormGroup>\n              <Label for=\"folderName\">{gettext('Name')}</Label>\n              <Input\n                id=\"folderName\"\n                value={this.state.childName}\n                onKeyPress={this.handleKeyPress}\n                onChange={this.handleChange}\n                autoFocus={true}\n              />\n            </FormGroup>\n          </Form>\n          {this.state.errMessage && <Alert color=\"danger\" className=\"mt-2\">{this.state.errMessage}</Alert>}\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.toggle}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.handleSubmit} disabled={!this.state.isSubmitBtnActive}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nCreateForder.propTypes = propTypes;\n\nexport default CreateForder;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, ModalHeader, ModalBody, ModalFooter, Input } from 'reactstrap';\nimport { gettext } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\n\nconst propTypes = {\n  repoID: PropTypes.string.isRequired,\n  onRepoTagCreated: PropTypes.func,\n  toggleCancel: PropTypes.func.isRequired,\n  onClose: PropTypes.func.isRequired\n};\n\nclass CreateTagDialog extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      tagName: '',\n      tagColor: '',\n      newTag: {},\n      errorMsg: '',\n      colorList: ['#FBD44A', '#EAA775', '#F4667C', '#DC82D2', '#9860E5', '#9F8CF1', '#59CB74', '#ADDF84', '#89D2EA', '#4ECCCB', '#46A1FD', '#C2C2C2'],\n    };\n  }\n\n  inputNewName = (e) => {\n    this.setState({\n      tagName: e.target.value,\n    });\n    if (this.state.errorMsg) {\n      this.setState({errorMsg: ''});\n    }\n  }\n\n  selectTagcolor = (e) => {\n    this.setState({\n      tagColor: e.target.value,\n    });\n  }\n\n  createTag = () => {\n    let name = this.state.tagName;\n    let color = this.state.tagColor;\n    let repoID = this.props.repoID;\n    seafileAPI.createRepoTag(repoID, name, color).then((res) => {\n      let repoTagID = res.data.repo_tag.repo_tag_id;\n      if (this.props.onRepoTagCreated) this.props.onRepoTagCreated(repoTagID);\n      this.props.toggleCancel();\n    }).catch((error) => {\n      let errMessage;\n      if (error.response.status === 500) {\n        errMessage = gettext('Internal Server Error');\n      } else if (error.response.status === 400) {\n        errMessage = gettext('Tag \"{name}\" already exists.');\n        errMessage = errMessage.replace('{name}', Utils.HTMLescape(name));\n      }\n      this.setState({errorMsg: errMessage});\n    });\n  }\n\n  handleKeyPress = (e) => {\n    if (e.key === 'Enter') {\n      this.createTag();\n    }\n  }\n\n  componentDidMount() {\n    this.setState({\n      tagColor: this.state.colorList[0]\n    });\n  }\n\n  render() {\n    let colorList = this.state.colorList;\n    let canSave = this.state.tagName.trim() ? true : false;\n    return (\n      <Fragment>\n        <ModalHeader toggle={this.props.onClose}>\n          <span className=\"tag-dialog-back fas fa-sm fa-arrow-left\" onClick={this.props.toggleCancel} aria-label={gettext('Back')}></span>\n          {gettext('New Tag')}\n        </ModalHeader>\n        <ModalBody>\n          <div role=\"form\" className=\"tag-create\">\n            <div className=\"form-group\">\n              <label className=\"form-label\">{gettext('Name')}</label>\n              <Input onKeyPress={this.handleKeyPress} autoFocus={true} value={this.state.tagName} onChange={this.inputNewName}/>\n              <div className=\"mt-2\"><span className=\"error\">{this.state.errorMsg}</span></div>\n            </div>\n            <div className=\"form-group\">\n              <label className=\"form-label\">{gettext('Select a color')}</label>\n              <div className=\"d-flex justify-content-between\">\n                {colorList.map((item, index)=>{\n                  return (\n                    <div key={index} className=\"tag-color-option\" onChange={this.selectTagcolor}>\n                      <label className=\"colorinput\">\n                        {index===0 ?\n                          <input name=\"color\" type=\"radio\" value={item} className=\"colorinput-input\" defaultChecked onClick={this.selectTagcolor}></input> :\n                          <input name=\"color\" type=\"radio\" value={item} className=\"colorinput-input\" onClick={this.selectTagcolor}></input>}\n                        <span className=\"colorinput-color rounded-circle d-flex align-items-center justify-content-center\" style={{backgroundColor:item}}>\n                          <i className=\"fas fa-check color-selected\"></i>\n                        </span>\n                      </label>\n                    </div>\n                  );\n                })\n                }\n              </div>\n            </div>\n          </div>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.props.toggleCancel}>{gettext('Cancel')}</Button>\n          {canSave ?\n            <Button color=\"primary\" onClick={this.createTag}>{gettext('Save')}</Button> :\n            <Button color=\"primary\" disabled>{gettext('Save')}</Button>\n          }\n        </ModalFooter>\n      </Fragment>\n    );\n  }\n}\n\nCreateTagDialog.propTypes = propTypes;\n\nexport default CreateTagDialog;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter } from 'reactstrap';\nimport { gettext } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport RepoTag from '../../models/repo-tag';\nimport CreateTagDialog from './create-tag-dialog';\nimport toaster from '../toast';\nrequire('../../css/repo-tag.css');\n\nconst TagItemPropTypes = {\n  repoID: PropTypes.string.isRequired,\n  repoTag: PropTypes.object.isRequired,\n  filePath: PropTypes.string.isRequired,\n  fileTagList: PropTypes.array.isRequired,\n  onFileTagChanged: PropTypes.func.isRequired,\n};\n\nclass TagItem extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isTagHighlighted: false\n    };\n  }\n\n  onMouseEnter = () => {\n    this.setState({\n      isTagHighlighted: true\n    });\n  }\n\n  onMouseLeave = () => {\n    this.setState({\n      isTagHighlighted: false\n    });\n  }\n\n  getRepoTagIdList = () => {\n    let repoTagIdList = [];\n    let fileTagList = this.props.fileTagList || [];\n    repoTagIdList = fileTagList.map((fileTag) => fileTag.repo_tag_id);\n    return repoTagIdList;\n  }\n\n  onEditFileTag = () => {\n    let { repoID, repoTag, filePath } = this.props;\n    let repoTagIdList = this.getRepoTagIdList();\n    if (repoTagIdList.indexOf(repoTag.id) === -1) {\n      let id = repoTag.id;\n      seafileAPI.addFileTag(repoID, filePath, id).then(() => {\n        repoTagIdList = this.getRepoTagIdList();\n        this.props.onFileTagChanged();\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    } else {\n      let fileTag = null;\n      let fileTagList = this.props.fileTagList;\n      for(let i = 0; i < fileTagList.length; i++) {\n        if (fileTagList[i].repo_tag_id === repoTag.id) {\n          fileTag = fileTagList[i];\n          break;\n        }\n      }\n      seafileAPI.deleteFileTag(repoID, fileTag.id).then(() => {\n        repoTagIdList = this.getRepoTagIdList();\n        this.props.onFileTagChanged();\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    }\n  }\n\n  render() {\n    const { isTagHighlighted } = this.state;\n    const { repoTag } = this.props;\n    const repoTagIdList = this.getRepoTagIdList();\n    const isTagSelected = repoTagIdList.indexOf(repoTag.id) != -1;\n    return (\n      <li\n        className={`tag-list-item cursor-pointer px-4 d-flex justify-content-between align-items-center ${isTagHighlighted ? 'hl' : ''}`}\n        onClick={this.onEditFileTag}\n        onMouseEnter={this.onMouseEnter}\n        onMouseLeave={this.onMouseLeave}\n      >\n        <div className=\"d-flex align-items-center\">\n          <span className=\"tag-color w-4 h-4 rounded-circle\" style={{backgroundColor: repoTag.color}}></span>\n          <span className=\"tag-name mx-2\">{repoTag.name}</span>\n        </div>\n        {isTagSelected && <i className=\"fas fa-check tag-selected-icon\"></i>}\n      </li>\n    );\n  }\n\n}\n\nTagItem.propTypes = TagItemPropTypes;\n\nconst TagListPropTypes = {\n  repoID: PropTypes.string.isRequired,\n  filePath: PropTypes.string.isRequired,\n  fileTagList: PropTypes.array.isRequired,\n  onFileTagChanged: PropTypes.func.isRequired,\n  toggleCancel: PropTypes.func.isRequired,\n  createNewTag: PropTypes.func.isRequired,\n};\n\nclass TagList extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      repotagList: [],\n    };\n  }\n\n  componentDidMount() {\n    this.getRepoTagList();\n  }\n\n  getRepoTagList = () => {\n    let repoID = this.props.repoID;\n    seafileAPI.listRepoTags(repoID).then(res => {\n      let repotagList = [];\n      res.data.repo_tags.forEach(item => {\n        let repoTag = new RepoTag(item);\n        repotagList.push(repoTag);\n      });\n      this.setState({repotagList: repotagList});\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  render() {\n    return (\n      <Fragment>\n        <ModalHeader toggle={this.props.toggleCancel}>{gettext('Select Tags')}</ModalHeader>\n        <ModalBody className=\"px-0\">\n          <ul className=\"tag-list tag-list-container\">\n            {this.state.repotagList.map((repoTag) => {\n              return (\n                <TagItem\n                  key={repoTag.id}\n                  repoTag={repoTag}\n                  repoID={this.props.repoID}\n                  filePath={this.props.filePath}\n                  fileTagList={this.props.fileTagList}\n                  onFileTagChanged={this.props.onFileTagChanged}\n                />\n              );\n            })}\n          </ul>\n          <a\n            href=\"#\"\n            className=\"add-tag-link px-4 py-2 d-flex align-items-center\"\n            onClick={this.props.createNewTag}\n          >\n            <span className=\"sf2-icon-plus mr-2\"></span>\n            {gettext('Create a new tag')}\n          </a>\n        </ModalBody>\n        <ModalFooter>\n          <Button onClick={this.props.toggleCancel}>{gettext('Close')}</Button>\n        </ModalFooter>\n      </Fragment>\n    );\n  }\n}\n\nTagList.propTypes = TagListPropTypes;\n\nconst propTypes = {\n  repoID: PropTypes.string.isRequired,\n  filePath: PropTypes.string.isRequired,\n  fileTagList: PropTypes.array.isRequired,\n  toggleCancel: PropTypes.func.isRequired,\n  onFileTagChanged: PropTypes.func.isRequired,\n};\n\nclass EditFileTagDialog extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      isCreateRepoTagShow: false,\n      isListRepoTagShow: true,\n    };\n  }\n\n  createNewTag = () => {\n    this.setState({\n      isCreateRepoTagShow: !this.state.isCreateRepoTagShow,\n      isListRepoTagShow: !this.state.isListRepoTagShow,\n    });\n  }\n\n  onRepoTagCreated = (repoTagID) => {\n    let {repoID, filePath} = this.props;\n    seafileAPI.addFileTag(repoID, filePath, repoTagID).then(() => {\n      this.props.onFileTagChanged();\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  render() {\n    return (\n      <Modal isOpen={true} toggle={this.props.toggleCancel} autoFocus={false}>\n        {this.state.isListRepoTagShow &&\n          <TagList\n            repoID={this.props.repoID}\n            filePath={this.props.filePath}\n            fileTagList={this.props.fileTagList}\n            onFileTagChanged={this.props.onFileTagChanged}\n            toggleCancel={this.props.toggleCancel}\n            createNewTag={this.createNewTag}\n          />\n        }\n        {this.state.isCreateRepoTagShow &&\n          <CreateTagDialog\n            repoID={this.props.repoID}\n            onClose={this.props.toggleCancel}\n            toggleCancel={this.createNewTag}\n            onRepoTagCreated={this.onRepoTagCreated}\n          />\n        }\n      </Modal>\n    );\n  }\n}\n\nEditFileTagDialog.propTypes = propTypes;\n\nexport default EditFileTagDialog;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../../utils/constants';\n\nimport Lightbox from '@seafile/react-image-lightbox';\nimport '@seafile/react-image-lightbox/style.css';\n\nconst propTypes = {\n  imageItems: PropTypes.array.isRequired,\n  imageIndex: PropTypes.number.isRequired,\n  closeImagePopup: PropTypes.func.isRequired,\n  moveToPrevImage: PropTypes.func.isRequired,\n  moveToNextImage: PropTypes.func.isRequired\n};\n\nclass ImageDialog extends React.Component {\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    const imageItems = this.props.imageItems;\n    const imageIndex = this.props.imageIndex;\n    const imageItemsLength = imageItems.length;\n    const name = imageItems[imageIndex].name;\n    const imageTitle = `${name} (${imageIndex + 1}/${imageItemsLength})`;\n\n    return (\n      <Lightbox\n        imageTitle={imageTitle}\n        mainSrc={imageItems[imageIndex].src}\n        nextSrc={imageItems[(imageIndex + 1) % imageItemsLength].src}\n        prevSrc={imageItems[(imageIndex + imageItemsLength - 1) % imageItemsLength].src}\n        onCloseRequest={this.props.closeImagePopup}\n        onMovePrevRequest={this.props.moveToPrevImage}\n        onMoveNextRequest={this.props.moveToNextImage}\n        imagePadding={70}\n        imageLoadErrorMessage={gettext('The image could not be loaded.')}\n        prevLabel={gettext('Previous (Left arrow key)')}\n        nextLabel={gettext('Next (Right arrow key)')}\n        closeLabel={gettext('Close (Esc)')}\n        zoomInLabel={gettext('Zoom in')}\n        zoomOutLabel={gettext('Zoom out')}\n      />\n    );\n  }\n}\n\nImageDialog.propTypes = propTypes;\n\nexport default ImageDialog;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter } from 'reactstrap';\nimport moment from 'moment';\nimport { gettext, siteRoot } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../toast';\n\nconst propTypes = {\n  repoID: PropTypes.string.isRequired,\n  currentTag: PropTypes.object.isRequired,\n  toggleCancel: PropTypes.func.isRequired,\n  onClose: PropTypes.func.isRequired,\n  updateUsedRepoTags: PropTypes.func,\n  onFileTagChanged: PropTypes.func,\n  shareLinkToken: PropTypes.string,\n  enableFileDownload: PropTypes.bool\n};\n\nclass ListTaggedFilesDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      taggedFileList: [],\n    };\n  }\n\n  onFileTagChanged = (TaggedFile) => {\n    const path = TaggedFile.parent_path;\n    const dirent = {name: TaggedFile.filename};\n    let direntPath = path === '/' ? path + TaggedFile.filename : path + '/' + TaggedFile.filename;\n    this.props.onFileTagChanged(dirent, direntPath);\n  }\n\n  onDeleteTaggedFile = (taggedFile) => {\n    let repoID = this.props.repoID;\n    let fileTagID = taggedFile.file_tag_id;\n    seafileAPI.deleteFileTag(repoID, fileTagID).then(res => {\n      this.getTaggedFiles();\n      this.props.updateUsedRepoTags();\n      if ((this.props.onFileTagChanged) && !taggedFile.file_deleted) this.onFileTagChanged(taggedFile);\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  componentDidMount() {\n    this.getTaggedFiles();\n  }\n\n  getTaggedFiles = () => {\n    let { repoID, currentTag, shareLinkToken } = this.props;\n    let request = shareLinkToken ?\n      seafileAPI.getShareLinkTaggedFiles(shareLinkToken, currentTag.id) :\n      seafileAPI.listTaggedFiles(repoID, currentTag.id);\n    request.then(res => {\n      let taggedFileList = [];\n      res.data.tagged_files !== undefined &&\n      res.data.tagged_files.forEach(file => {\n        let taggedFile = file;\n        taggedFileList.push(taggedFile);\n      });\n      this.setState({\n        taggedFileList: taggedFileList,\n      });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  render() {\n    let taggedFileList = this.state.taggedFileList;\n    return (\n      <Modal isOpen={true} style={{maxWidth: '678px'}}>\n        <ModalHeader toggle={this.props.onClose}>{gettext('Tagged Files')}</ModalHeader>\n        <ModalBody className=\"dialog-list-container\">\n          <table>\n            <thead>\n              <tr>\n                <th width='50%' className=\"ellipsis\">{gettext('Name')}</th>\n                <th width='20%'>{gettext('Size')}</th>\n                <th width='22%'>{gettext('Last Update')}</th>\n                <th width='8%'></th>\n              </tr>\n            </thead>\n            <tbody>\n              {taggedFileList.map((taggedFile, index) => {\n                return (\n                  <TaggedFile\n                    key={index}\n                    repoID={this.props.repoID}\n                    taggedFile={taggedFile}\n                    onDeleteTaggedFile={this.onDeleteTaggedFile}\n                    shareLinkToken={this.props.shareLinkToken}\n                    enableFileDownload={this.props.enableFileDownload}\n                  />\n                );\n              })}\n            </tbody>\n          </table>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.props.toggleCancel}>{gettext('Close')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nListTaggedFilesDialog.propTypes = propTypes;\n\nexport default ListTaggedFilesDialog;\n\nconst TaggedFilePropTypes = {\n  repoID: PropTypes.string.isRequired,\n  taggedFile: PropTypes.object,\n  onDeleteTaggedFile: PropTypes.func.isRequired,\n  shareLinkToken: PropTypes.string,\n  enableFileDownload: PropTypes.bool\n};\n\nclass TaggedFile extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = ({\n      active: false,\n    });\n  }\n\n  onMouseEnter = () => {\n    this.setState({\n      active: true\n    });\n  }\n\n  onMouseLeave = () => {\n    this.setState({\n      active: false\n    });\n  }\n\n  deleteFile = (e) => {\n    e.preventDefault();\n    this.props.onDeleteTaggedFile(this.props.taggedFile);\n  }\n\n  render() {\n    const { taggedFile, shareLinkToken, enableFileDownload } = this.props;\n\n    let path = taggedFile.parent_path ? Utils.joinPath(taggedFile.parent_path, taggedFile.filename) : '';\n    let href = shareLinkToken ?\n      siteRoot + 'd/' + shareLinkToken + '/files/?p=' + Utils.encodePath(path) :\n      siteRoot + 'lib/' + this.props.repoID + '/file' + Utils.encodePath(path);\n\n    return (\n      <tr onMouseEnter={this.onMouseEnter} onMouseLeave={this.onMouseLeave} onFocus={this.onMouseEnter}>\n        {taggedFile.file_deleted ?\n          <Fragment>\n            <td colSpan='3' className=\"name\">{taggedFile.filename}{' '}\n              <span style={{color:'red'}}>{gettext('deleted')}</span>\n            </td>\n          </Fragment>\n          :\n          <Fragment>\n            <td><a href={href} target='_blank' className=\"d-inline-block w-100 ellipsis\" title={taggedFile.filename} rel=\"noreferrer\">{taggedFile.filename}</a></td>\n            <td>{Utils.bytesToSize(taggedFile.size)}</td>\n            <td>{moment.unix(taggedFile.mtime).fromNow()}</td>\n          </Fragment>\n        }\n        <td>\n          {!shareLinkToken &&\n            <a href=\"#\" role=\"button\" aria-label={gettext('Delete')} title={gettext('Delete')} className={`action-icon sf2-icon-x3${this.state.active ? '' : ' invisible'}`} onClick={this.deleteFile}></a>\n          }\n          {(shareLinkToken && enableFileDownload) &&\n            <a className={`action-icon sf2-icon-download${this.state.active ? '' : ' invisible'}`} href={`${href}&dl=1`} title={gettext('Download')} aria-label={gettext('Download')}></a>\n          }\n        </td>\n      </tr>\n    );\n  }\n}\n\nTaggedFile.propTypes = TaggedFilePropTypes;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Modal, ModalHeader, ModalBody, ModalFooter, Button } from 'reactstrap';\nimport copy from '../copy-to-clipboard';\nimport { gettext } from '../../utils/constants';\nimport toaster from '../../components/toast';\n\nconst propTypes = {\n  link: PropTypes.string.isRequired,\n  toggleDialog: PropTypes.func.isRequired\n};\n\nclass ShareAdminLink extends React.Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n copyToClipboard = () => {\n   copy(this.props.link);\n   this.props.toggleDialog();\n   toaster.success(gettext('The link is copied to the clipboard.')), {duration: 2};\n }\n\n render() {\n   const { link, toggleDialog } = this.props;\n   return (\n     <Modal isOpen={true} toggle={toggleDialog}>\n       <ModalHeader toggle={toggleDialog}>{gettext('Link')}</ModalHeader>\n       <ModalBody>\n         <a href={link}>{link}</a>\n       </ModalBody>\n       <ModalFooter>\n         <Button color=\"primary\" onClick={this.copyToClipboard}>{gettext('Copy')}</Button>\n         <Button color=\"secondary\" onClick={toggleDialog}>{gettext('Close')}</Button>\n       </ModalFooter>\n     </Modal>\n   );\n }\n}\n\nShareAdminLink.propTypes = propTypes;\n\nexport default ShareAdminLink;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Modal, ModalHeader, ModalBody } from 'reactstrap';\nimport { gettext, fileServerRoot } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport Loading from '../loading';\n\nconst propTypes = {\n  token: PropTypes.string,\n  path: PropTypes.string.isRequired,\n  repoID: PropTypes.string,\n  target: PropTypes.oneOfType([\n    PropTypes.string,\n    PropTypes.array\n  ]),\n  toggleDialog: PropTypes.func.isRequired\n};\n\nlet interval;\n\nclass ZipDownloadDialog extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      isLoading: true,\n      errorMsg: '',\n      zipProgress: null\n    };\n  }\n\n  componentDidMount() {\n    const { token, path, repoID, target } = this.props;\n    let getZipTask;\n    if (token) {\n      getZipTask = target.length ?\n        seafileAPI.getShareLinkDirentsZipTask(token, path, target) :\n        seafileAPI.getShareLinkZipTask(token, path);\n    } else {\n      getZipTask = seafileAPI.zipDownload(repoID, path, target);\n    }\n    getZipTask.then((res) => {\n      const zipToken = res.data['zip_token'];\n      this.setState({\n        isLoading: false,\n        errorMsg: '',\n        zipToken: zipToken\n      });\n      this.queryZipProgress();\n      interval = setInterval(this.queryZipProgress, 1000);\n    }).catch((error) => {\n      let errorMsg = Utils.getErrorMsg(error);\n      this.setState({\n        isLoading: false,\n        errorMsg: errorMsg\n      });\n    });\n  }\n\n  queryZipProgress = () => {\n    const zipToken = this.state.zipToken;\n    seafileAPI.queryZipProgress(zipToken).then((res) => {\n      const data = res.data;\n      if (data.failed == 1) {\n        clearInterval(interval);\n        this.setState({\n          isLoading: false,\n          errorMsg: data.failed_reason\n        });\n      } else {\n        this.setState({\n          zipProgress: data.total == 0 ? '100%' : (data.zipped/data.total*100).toFixed(2) + '%'\n        });\n        if (data['total'] == data['zipped']) {\n          clearInterval(interval);\n          this.props.toggleDialog();\n          location.href = `${fileServerRoot}zip/${zipToken}`;\n        }\n      }\n    }).catch((error) => {\n      clearInterval(interval);\n      let errorMsg = Utils.getErrorMsg(error);\n      this.setState({\n        isLoading: false,\n        errorMsg: errorMsg\n      });\n    });\n  }\n\n  cancelZipTask = () => {\n    const zipToken = this.state.zipToken;\n    seafileAPI.cancelZipTask(zipToken).then((res) => {\n    // do nothing\n    }).catch((error) => {\n    // do nothing\n    });\n  }\n\n  toggleDialog = () => {\n    const zipProgress = this.state.zipProgress;\n    if (zipProgress && zipProgress != '100%') {\n      clearInterval(interval);\n      this.cancelZipTask();\n    }\n    this.props.toggleDialog();\n  }\n\n  render() {\n    return (\n      <Modal isOpen={true} toggle={this.toggleDialog}>\n        <ModalHeader toggle={this.toggleDialog}>{gettext('Download')}</ModalHeader>\n        <ModalBody>\n          <Content data={this.state} />\n        </ModalBody>\n      </Modal>\n    );\n  }\n}\n\nclass Content extends React.Component {\n\n  render() {\n    const {isLoading, errorMsg, zipProgress} = this.props.data;\n\n    if (isLoading) {\n      return <Loading />;\n    }\n\n    if (errorMsg) {\n      return <p className=\"error mt-4 text-center\">{errorMsg}</p>;\n    }\n\n    return <p className=\"mt-4 text-center\">{`${gettext('Packaging...')} ${zipProgress}`}</p>;\n  }\n}\n\nZipDownloadDialog.propTypes = propTypes;\n\nexport default ZipDownloadDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport listener from '../context-menu/globalEventListener';\nimport { Dropdown, ButtonDropdown, DropdownMenu, DropdownToggle, DropdownItem } from 'reactstrap';\nimport { gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\n\nconst propTypes = {\n  tagName: PropTypes.string,\n  item: PropTypes.object.isRequired,\n  toggleClass: PropTypes.string,\n  isHandleContextMenuEvent: PropTypes.bool,\n  getMenuList: PropTypes.func.isRequired,\n  onMenuItemClick: PropTypes.func.isRequired,\n  freezeItem: PropTypes.func,\n  unfreezeItem: PropTypes.func,\n};\n\nclass ItemDropdownMenu extends React.Component {\n\n  static defaultProps = {\n    isHandleContextMenuEvent: true,\n    toggleClass: 'sf2-icon-caret-down'\n  };\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      menuList: [],\n      isItemMenuShow: false,\n    };\n  }\n\n  componentDidMount() {\n    if (this.props.isHandleContextMenuEvent) {\n      this.listenerId = listener.register(this.onShowMenu, this.onHideMenu);\n    }\n    let { item } = this.props;\n    let menuList = this.props.getMenuList(item);\n    this.setState({menuList: menuList});\n  }\n\n  componentWillReceiveProps(nextProps) {  // for toolbar item operation\n    let { item } = nextProps;\n    if (item.name !== this.props.item.name) {\n      let menuList = this.props.getMenuList(item);\n      this.setState({menuList: menuList});\n    }\n  }\n\n  componentWillUnmount() {\n    if (this.props.isHandleContextMenuEvent && this.listenerId) {\n      listener.unregister(this.listenerId);\n    }\n  }\n\n  onShowMenu = () => {\n    // nothing todo\n  }\n\n  onHideMenu = () => {\n    if (this.state.isItemMenuShow) {\n      this.setState({isItemMenuShow: false});\n      if (typeof(this.props.unfreezeItem) === 'function') {\n        this.props.unfreezeItem();\n      }\n    }\n  }\n\n  onDropdownToggleKeyDown = (e) => {\n    if (e.key == 'Enter' || e.key == 'Space') {\n      this.onDropdownToggleClick(e);\n    }\n  }\n\n  onDropdownToggleClick = (e) => {\n    e.preventDefault();\n    e.stopPropagation();\n\n    this.toggleOperationMenu();\n  }\n\n  toggleOperationMenu = () => {\n    this.setState(\n      {isItemMenuShow: !this.state.isItemMenuShow},\n      () => {\n        if (this.state.isItemMenuShow && typeof(this.props.freezeItem) === 'function') {\n          this.props.freezeItem();\n        } else if (!this.state.isItemMenuShow && typeof(this.props.unfreezeItem) === 'function') {\n          this.props.unfreezeItem();\n        }\n      }\n    );\n  }\n\n  onMenuItemKeyDown = (e) => {\n    if (e.key == 'Enter' || e.key == 'Space') {\n      this.onMenuItemClick(e);\n    }\n  }\n\n  onMenuItemClick = (event) => {\n    let operation = Utils.getEventData(event, 'toggle');\n    let item = this.props.item;\n    this.props.onMenuItemClick(operation, event, item);\n  }\n\n  render() {\n    let menuList = this.state.menuList;\n    let { toggleClass, tagName } = this.props;\n    toggleClass = 'sf-dropdown-toggle ' + toggleClass;\n\n    if (!menuList.length) {\n      return '';\n    }\n\n    if (tagName && tagName === 'button') {\n      return (\n        <ButtonDropdown isOpen={this.state.isItemMenuShow} toggle={this.onDropdownToggleClick}>\n          <DropdownToggle\n            className={toggleClass}\n            data-toggle=\"dropdown\"\n            title={gettext('More Operations')}\n            aria-label={gettext('More Operations')}\n            aria-expanded={this.state.isItemMenuShow}\n            onKeyDown={this.onDropdownToggleKeyDown}\n            // onClick={this.onDropdownToggleClick}\n          >\n          </DropdownToggle>\n          <DropdownMenu>\n            {menuList.map((menuItem, index) => {\n              if (menuItem === 'Divider') {\n                return <DropdownItem key={index} divider />;\n              } else {\n                return (\n                  <DropdownItem key={index} data-toggle={menuItem.key} onClick={this.onMenuItemClick} onKeyDown={this.onMenuItemKeyDown}>{menuItem.value}</DropdownItem>\n                );\n              }\n            })}\n          </DropdownMenu>\n        </ButtonDropdown>\n      );\n    }\n\n    return (\n      <Dropdown isOpen={this.state.isItemMenuShow} toggle={this.onDropdownToggleClick} className=\"vam\">\n        <DropdownToggle\n          tag={tagName || 'i'}\n          role=\"button\"\n          tabIndex=\"0\"\n          className={toggleClass}\n          title={gettext('More Operations')}\n          data-toggle=\"dropdown\"\n          aria-expanded={this.state.isItemMenuShow}\n          aria-label={gettext('More Operations')}\n          onKeyDown={this.onDropdownToggleKeyDown}\n          // onClick={this.onDropdownToggleClick}\n        />\n        <DropdownMenu>\n          {menuList.map((menuItem, index) => {\n            if (menuItem === 'Divider') {\n              return <DropdownItem key={index} divider />;\n            } else {\n              return (\n                <DropdownItem key={index} data-toggle={menuItem.key} onClick={this.onMenuItemClick} onKeyDown={this.onMenuItemKeyDown}>{menuItem.value}</DropdownItem>\n              );\n            }\n          })}\n        </DropdownMenu>\n      </Dropdown>\n    );\n  }\n}\n\nItemDropdownMenu.propTypes = propTypes;\n\nexport default ItemDropdownMenu;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../utils/constants';\nimport { Utils } from '../utils/utils';\nimport toaster from './toast';\n\nconst propTypes = {\n  hasSuffix: PropTypes.bool,\n  name: PropTypes.string.isRequired,\n  onRenameConfirm: PropTypes.func.isRequired,\n  onRenameCancel: PropTypes.func.isRequired,\n};\n\nclass Rename extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      name: props.name\n    };\n    this.inputRef = React.createRef();\n  }\n\n  componentDidMount() {\n    this.inputRef.current.focus();\n    if (this.props.hasSuffix) {\n      var endIndex = this.props.name.lastIndexOf('.');\n      this.inputRef.current.setSelectionRange(0, endIndex, 'forward');\n    } else {\n      this.inputRef.current.setSelectionRange(0, -1);\n    }\n  }\n\n  onChange = (e) => {\n    this.setState({name: e.target.value});\n  }\n\n  onKeyDown = (e) => {\n    if (e.keyCode === Utils.keyCodes.enter) {\n      this.onRenameConfirm(e);\n    } else if (e.keyCode === Utils.keyCodes.esc) {\n      this.onRenameCancel(e);\n    }\n    e.nativeEvent.stopImmediatePropagation();\n  }\n\n  onRenameConfirm = (e) => {\n    e.nativeEvent.stopImmediatePropagation();\n    let newName = this.state.name.trim();\n    if (newName === this.props.name) {\n      this.props.onRenameCancel();\n      return;\n    }\n\n    let { isValid, errMessage } = this.validateInput();\n    if (!isValid) {\n      toaster.danger(errMessage);\n    } else {\n      this.props.onRenameConfirm(newName);\n    }\n  }\n\n  onRenameCancel = (e) => {\n    e.nativeEvent.stopImmediatePropagation();\n    this.props.onRenameCancel();\n  }\n\n  validateInput = () => {\n    let newName = this.state.name.trim();\n    let isValid = true;\n    let errMessage = '';\n    if (!newName) {\n      isValid = false;\n      errMessage = gettext('Name is required.');\n      return { isValid, errMessage };\n    }\n\n    if (newName.indexOf('/') > -1) {\n      isValid = false;\n      errMessage = gettext('Name should not include ' + '\\'/\\'' + '.');\n      return { isValid, errMessage };\n    }\n\n    return { isValid, errMessage };\n  }\n\n  render() {\n    return (\n      <div className=\"rename-container\">\n        <input\n          ref={this.inputRef}\n          value={this.state.name}\n          onChange={this.onChange}\n          onKeyDown={this.onKeyDown}\n        />\n      </div>\n    );\n  }\n}\n\nRename.propTypes = propTypes;\n\nexport default Rename;\n","import moment from 'moment';\n\nclass Draft {\n\n  constructor(item) {\n    this.created = item.created_at;\n    this.createdStr = moment((new Date(item.created_at)).getTime()).format('YYYY-MM-DD HH:mm');\n    this.id = item.id;\n    this.ownerNickname = item.owner_nickname;\n    this.originRepoID = item.origin_repo_id;\n    this.draftFilePath = item.draft_file_path;\n  }\n}\n\nexport default Draft;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter } from 'reactstrap';\nimport { gettext, siteRoot } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport moment from 'moment';\nimport editorUtilities from '../../utils/editor-utilities';\nimport toaster from '../../components/toast';\nimport { Utils } from '../../utils/utils';\nimport Draft from '../../models/draft';\n\nconst propTypes = {\n  repoID: PropTypes.string.isRequired,\n  toggle: PropTypes.func.isRequired,\n};\n\nclass ListRepoDraftsDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      drafts: [],\n    };\n  }\n\n  componentDidMount() {\n    seafileAPI.listRepoDrafts(this.props.repoID).then(res => {\n      let drafts = res.data.drafts.map(item => {\n        let draft = new Draft(item);\n        return draft;\n      });\n      this.setState({\n        drafts: drafts\n      });\n    });\n  }\n\n  onDeleteDraftItem = (draft) => {\n    editorUtilities.deleteDraft(draft.id).then(() => {\n      let drafts = this.state.drafts.filter(item => {\n        return item.id !== draft.id;\n      });\n      this.setState({drafts: drafts});\n      let msg = gettext('Successfully deleted draft %(draft)s.');\n      msg = msg.replace('%(draft)s', draft.draftFilePath);\n      toaster.success(msg);\n    }).catch(() => {\n      let msg = gettext('Failed to delete draft %(draft)s.');\n      msg = msg.replace('%(draft)s', draft.draftFilePath);\n      toaster.danger(msg);\n    });\n  }\n\n  toggle = () => {\n    this.props.toggle();\n  }\n\n  render() {\n    return (\n      <Modal isOpen={true}>\n        <ModalHeader toggle={this.toggle}>{gettext('Drafts')}</ModalHeader>\n        <ModalBody className=\"dialog-list-container\">\n          <table>\n            <thead>\n              <tr>\n                <th width='50%' className=\"ellipsis\">{gettext('Name')}</th>\n                <th width='20%'>{gettext('Owner')}</th>\n                <th width='20%'>{gettext('Last Update')}</th>\n                <th width='10%'></th>\n              </tr>\n            </thead>\n            <tbody>\n              {this.state.drafts.map((item, index) => {\n                return (\n                  <DraftItem\n                    key={index}\n                    draftItem={item}\n                    onDeleteDraftItem={this.onDeleteDraftItem}\n                  />\n                );\n              })}\n            </tbody>\n          </table>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.toggle}>{gettext('Close')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nListRepoDraftsDialog.propTypes = propTypes;\n\nexport default ListRepoDraftsDialog;\n\nconst DraftItemPropTypes = {\n  draftItem: PropTypes.object,\n  onDeleteDraftItem: PropTypes.func.isRequired,\n};\n\nclass DraftItem extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = ({\n      active: false,\n    });\n  }\n\n  onMouseEnter = () => {\n    this.setState({\n      active: true\n    });\n  }\n\n  onMouseLeave = () => {\n    this.setState({\n      active: false\n    });\n  }\n\n  render() {\n    const draftItem = this.props.draftItem;\n    let href = siteRoot + 'drafts/' + draftItem.id + '/';\n    let className = this.state.active ? 'action-icon sf2-icon-x3' : 'action-icon vh sf2-icon-x3';\n    return (\n      <tr onMouseEnter={this.onMouseEnter} onMouseLeave={this.onMouseLeave}>\n        <td className=\"name\">\n          <a href={href} target='_blank'>{Utils.getFileName(draftItem.draftFilePath)}</a>\n        </td>\n        <td>{draftItem.ownerNickname}</td>\n        <td>{moment(draftItem.createdStr).fromNow()}</td>\n        <td>\n          <i className={className} onClick={this.props.onDeleteDraftItem.bind(this, draftItem)}></i>\n        </td>\n      </tr>\n    );\n  }\n}\n\nDraftItem.propTypes = DraftItemPropTypes;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter } from 'reactstrap';\nimport { MarkdownViewer } from '@seafile/seafile-editor';\nimport Loading from '../../components/loading';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { gettext, mediaUrl } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../toast';\n\nconst propTypes = {\n  repoID: PropTypes.string.isRequired,\n  filePath: PropTypes.string.isRequired,\n  fileName: PropTypes.string.isRequired,\n  href: PropTypes.string,\n  toggleCancel: PropTypes.func.isRequired,\n};\n\nclass ReadmeDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      readmeContent: null,\n      isLoading: true,\n    };\n  }\n\n  componentDidMount() {\n    seafileAPI.getFileDownloadLink(this.props.repoID, this.props.filePath).then(res => {\n      seafileAPI.getFileContent(res.data).then(res => {\n        this.setState({\n          readmeContent: res.data,\n          isLoading: false,\n        });\n      });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  render() {\n    return (\n      <Modal isOpen={true} toggle={this.props.toggleCancel} className=\"readme-dialog\" size=\"lg\">\n        <ModalHeader>{this.props.fileName}\n          <a className=\"readme-dialog-edit\" href={this.props.href} target='_blank'><i className=\"fa fa-pencil-alt\"></i></a>\n        </ModalHeader>\n        <ModalBody>\n          {this.state.isLoading ?\n            <Loading />:\n            <MarkdownViewer\n              markdownContent={this.state.readmeContent}\n              showTOC={false}\n              scriptSource={mediaUrl + 'js/mathjax/tex-svg.js'}\n            />\n          }\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.props.toggleCancel}>{gettext('Close')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nReadmeDialog.propTypes = propTypes;\n\nexport default ReadmeDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport ModalPortal from './modal-portal';\nimport ListTaggedFilesDialog from './dialog/list-taggedfiles-dialog';\nimport ListRepoDraftsDialog from './dialog/list-repo-drafts-dialog';\nimport ReadmeDialog from './dialog/readme-dialog';\nimport { siteRoot, gettext } from '../utils/constants';\nimport { Utils } from '../utils/utils';\n\nimport '../css/repo-info-bar.css';\n\nconst propTypes = {\n  repoID: PropTypes.string.isRequired,\n  currentPath: PropTypes.string.isRequired,\n  usedRepoTags: PropTypes.array.isRequired,\n  readmeMarkdown: PropTypes.object,\n  draftCounts: PropTypes.number,\n  updateUsedRepoTags: PropTypes.func,\n  onFileTagChanged: PropTypes.func,\n  className: PropTypes.string,\n  shareLinkToken: PropTypes.string,\n  enableFileDownload: PropTypes.bool\n};\n\nclass RepoInfoBar extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      currentTag: null,\n      isListTaggedFileShow: false,\n      showRepoDrafts: false,\n      showReadmeDialog: false,\n    };\n  }\n\n  onListTaggedFiles = (currentTag) => {\n    this.setState({\n      currentTag: currentTag,\n      isListTaggedFileShow: !this.state.isListTaggedFileShow,\n    });\n  }\n\n  onCloseDialog = () => {\n    this.setState({\n      isListTaggedFileShow: false\n    });\n  }\n\n  toggleDrafts = () => {\n    this.setState({\n      showRepoDrafts: !this.state.showRepoDrafts\n    });\n  }\n\n  toggleReadme = () => {\n    this.setState({\n      showReadmeDialog: !this.state.showReadmeDialog\n    });\n  }\n\n  render() {\n    let { repoID, currentPath, usedRepoTags, readmeMarkdown, draftCounts, className } = this.props;\n\n    // to be compatible with the existing code\n    if (readmeMarkdown === undefined) {\n      readmeMarkdown = null;\n    }\n    if (draftCounts === undefined) {\n      draftCounts = 0;\n    }\n\n    let href = readmeMarkdown !== null ? siteRoot + 'lib/' + repoID + '/file' + Utils.joinPath(currentPath, readmeMarkdown.name) +  '?mode=edit' : '';\n    let filePath = readmeMarkdown !== null ? currentPath + readmeMarkdown.name : '';\n    return (\n      <div className={`repo-info-bar ${className ? className : ''}`}>\n        {usedRepoTags.length > 0 && (\n          <ul className=\"used-tag-list\">\n            {usedRepoTags.map((usedRepoTag) => {\n              return (\n                <li key={usedRepoTag.id} className=\"used-tag-item\">\n                  <span className=\"used-tag\" style={{backgroundColor:usedRepoTag.color}}></span>\n                  <span className=\"used-tag-name\" title={usedRepoTag.name}>{usedRepoTag.name}</span>\n                  <button type=\"button\" className=\"used-tag-files border-0 bg-transparent\" onClick={this.onListTaggedFiles.bind(this, usedRepoTag)}>\n                    {usedRepoTag.fileCount > 1 ? usedRepoTag.fileCount + ' files' : usedRepoTag.fileCount + ' file'}\n                  </button>\n                </li>\n              );\n            })}\n          </ul>\n        )}\n        <div className={(usedRepoTags.length > 0 && readmeMarkdown) ? 'file-info-list mt-1' : 'file-info-list'}>\n          {(readmeMarkdown !== null && parseInt(readmeMarkdown.size) > 1) &&\n            <span className=\"file-info\" onClick={this.toggleReadme}>\n              <span className=\"info-icon sf2-icon-readme\"></span>\n              <span className=\"used-tag-name\">{readmeMarkdown.name}</span>\n            </span>\n          }\n          {(readmeMarkdown !== null && parseInt(readmeMarkdown.size) < 2) &&\n            <span className=\"file-info\">\n              <span className=\"info-icon sf2-icon-readme\"></span>\n              <a className=\"used-tag-name\" href={href} target='_blank' rel=\"noreferrer\">{readmeMarkdown.name}</a>\n            </span>\n          }\n          {draftCounts > 0 &&\n            <span className=\"file-info\">\n              <span className=\"info-icon sf2-icon-drafts\"></span>\n              <span className=\"used-tag-name\">{gettext('draft')}</span>\n              <button type=\"button\" className=\"used-tag-files border-0 bg-transparent\" onClick={this.toggleDrafts}>\n                {draftCounts > 1 ? draftCounts + ' files' : draftCounts + ' file'}\n              </button>\n            </span>\n          }\n        </div>\n        {this.state.isListTaggedFileShow && (\n          <ModalPortal>\n            <ListTaggedFilesDialog\n              repoID={repoID}\n              currentTag={this.state.currentTag}\n              onClose={this.onCloseDialog}\n              toggleCancel={this.onListTaggedFiles}\n              updateUsedRepoTags={this.props.updateUsedRepoTags}\n              onFileTagChanged={this.props.onFileTagChanged}\n              shareLinkToken={this.props.shareLinkToken}\n              enableFileDownload={this.props.enableFileDownload}\n            />\n          </ModalPortal>\n        )}\n\n        {this.state.showRepoDrafts && (\n          <ModalPortal>\n            <ListRepoDraftsDialog\n              toggle={this.toggleDrafts}\n              repoID={this.props.repoID}\n            />\n          </ModalPortal>\n        )}\n\n        {this.state.showReadmeDialog && (\n          <ModalPortal>\n            <ReadmeDialog\n              toggleCancel={this.toggleReadme}\n              repoID={repoID}\n              filePath={filePath}\n              href={href}\n              fileName={readmeMarkdown.name}\n            />\n          </ModalPortal>\n        )}\n      </div>\n    );\n  }\n}\n\nRepoInfoBar.propTypes = propTypes;\n\nexport default RepoInfoBar;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { permission } from '../../utils/constants';\nimport TextTranslation from '../../utils/text-translation';\nimport ItemDropdownMenu from '../dropdown-menu/item-dropdown-menu';\nimport { Utils } from '../../utils/utils';\n\nconst propTypes = {\n  userPerm: PropTypes.string,\n  node: PropTypes.object.isRequired,\n  currentPath: PropTypes.string.isRequired,\n  paddingLeft: PropTypes.number.isRequired,\n  isNodeMenuShow: PropTypes.bool.isRequired,\n  isItemFreezed: PropTypes.bool.isRequired,\n  onNodeClick: PropTypes.func.isRequired,\n  onNodeExpanded: PropTypes.func.isRequired,\n  onNodeCollapse: PropTypes.func.isRequired,\n  onNodeDragStart: PropTypes.func.isRequired,\n  freezeItem: PropTypes.func.isRequired,\n  unfreezeItem: PropTypes.func.isRequired,\n  onMenuItemClick: PropTypes.func,\n  onNodeDragMove: PropTypes.func,\n  onNodeDrop: PropTypes.func,\n  handleContextClick: PropTypes.func.isRequired,\n  onNodeDragEnter: PropTypes.func.isRequired,\n  onNodeDragLeave:PropTypes.func.isRequired,\n};\n\nclass TreeNodeView extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isHighlight: false,\n      isShowOperationMenu: false,\n      isNodeDropShow: false,\n    };\n    const { userPerm } = props;\n    this.canDrag = userPerm === 'rw';\n    const { isCustomPermission, customPermission } = Utils.getUserPermission(userPerm);\n    if (isCustomPermission) {\n      const { modify } = customPermission.permission;\n      this.canDrag = modify;\n    }\n  }\n\n  componentWillReceiveProps(nextProps) {\n    if (!nextProps.isItemFreezed) {\n      this.setState({\n        isShowOperationMenu: false,\n        isHighlight: false,\n      });\n    }\n  }\n\n  onMouseEnter = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        isShowOperationMenu: true,\n        isHighlight: true,\n      });\n    }\n  }\n\n  onMouseOver = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        isShowOperationMenu: true,\n        isHighlight: true,\n      });\n    }\n  }\n\n  onMouseLeave = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        isShowOperationMenu: false,\n        isHighlight: false,\n      });\n    }\n  }\n\n  onNodeClick = () => {\n    const { node } = this.props;\n    const { object } = node;\n    if (object.isDir()) {\n      this.props.onNodeClick(this.props.node);\n      return;\n    }\n    const { isCustomPermission, customPermission } = Utils.getUserPermission(object.permission);\n    if (isCustomPermission) {\n      const { preview: canPreview, modify: canModify } = customPermission.permission;\n      if (!canPreview && !canModify) return;\n    } \n    this.props.onNodeClick(this.props.node);\n  }\n\n  onLoadToggle = (e) => {\n    e.stopPropagation();\n    let { node } = this.props;\n    if (node.isExpanded) {\n      this.props.onNodeCollapse(node);\n    } else {\n      this.props.onNodeExpanded(node);\n    }\n  }\n\n  onNodeDragStart = (e) => {\n    if (Utils.isIEBrower() || !this.canDrag) {\n      return false;\n    }\n    this.props.onNodeDragStart(e, this.props.node);\n  }\n\n  onNodeDragEnter = (e) => {\n    if (Utils.isIEBrower() || !this.canDrag) {\n      return false;\n    }\n    if (this.props.node.object.type === 'dir') {\n      this.setState({isNodeDropShow: true});\n    }\n    this.props.onNodeDragEnter(e, this.props.node);\n  }\n\n  onNodeDragMove = (e) => {\n    if (Utils.isIEBrower() || !this.canDrag) {\n      return false;\n    }\n    this.props.onNodeDragMove(e);\n  }\n\n  onNodeDragLeave = (e) => {\n    if (Utils.isIEBrower() || !this.canDrag) {\n      return false;\n    }\n    this.setState({isNodeDropShow: false});\n    this.props.onNodeDragLeave(e, this.props.node);\n  }\n\n  onNodeDrop = (e) => {\n    if (Utils.isIEBrower() || !this.canDrag) {\n      return false;\n    }\n    e.stopPropagation();\n    this.setState({isNodeDropShow: false});\n    this.props.onNodeDrop(e, this.props.node);\n  }\n\n  unfreezeItem = () => {\n    this.setState({isShowOperationMenu: false});\n    this.props.unfreezeItem();\n  }\n\n  onMenuItemClick = (operation, event, node) => {\n    this.props.onMenuItemClick(operation, node);\n  }\n\n  onItemMouseDown = (event) => {\n    event.stopPropagation();\n    if (event.button === 2) {\n      return;\n    }\n  }\n\n  onItemContextMenu = (event) => {\n    this.handleContextClick(event);\n  }\n\n  handleContextClick = (event) => {\n    this.props.handleContextClick(event, this.props.node);\n    this.setState({isShowOperationMenu: false});\n  }\n\n  getNodeTypeAndIcon = () => {\n    let { node } = this.props;\n    let icon = '';\n    let type = '';\n    if (node.object.type === 'dir') {\n      icon = <i className=\"far fa-folder\"></i>;\n      type = 'dir';\n    } else {\n      let index = node.object.name.lastIndexOf('.');\n      if (index === -1) {\n        icon = <i className=\"far fa-file\"></i>;\n        type = 'file';\n      } else {\n        let suffix = node.object.name.slice(index).toLowerCase();\n        if (suffix === '.png' || suffix === '.jpg' || suffix === '.jpeg' || suffix === '.gif' || suffix === '.bmp') {\n          icon = <i className=\"far fa-image\"></i>;\n          type = 'image';\n        }\n        else if (suffix === '.md' || suffix === '.markdown') {\n          icon = <i className=\"far fa-file-alt\"></i>;\n          type = 'file';\n        }\n        else {\n          icon = <i className=\"far fa-file\"></i>;\n          type = 'file';\n        }\n      }\n    }\n    return {icon, type};\n  }\n\n  calculateMenuList = (node) => {\n    let { NEW_FOLDER, NEW_FILE, COPY, MOVE, RENAME, DELETE, OPEN_VIA_CLIENT} =  TextTranslation;\n\n    let menuList = [RENAME, DELETE, COPY, MOVE, OPEN_VIA_CLIENT];\n    if (node.object.type === 'dir') {\n      menuList = [NEW_FOLDER, NEW_FILE, COPY, MOVE, RENAME, DELETE];\n    }\n\n    const { userPerm } = this.props;\n    const { isCustomPermission, customPermission } = Utils.getUserPermission(userPerm);\n    if (!isCustomPermission) {\n      return menuList;\n    }\n\n    menuList = [];\n    const { create: canCreate, modify: canModify, delete: canDelete, copy: canCopy } = customPermission.permission;\n    if (node.object.type === 'dir') {\n      canCreate && menuList.push(NEW_FOLDER, NEW_FILE);\n    }\n\n    canCopy && menuList.push(COPY);\n    canModify && menuList.push(MOVE, RENAME);\n    canDelete && menuList.push(DELETE);\n\n    if (node.object.type !== 'dir') { \n      menuList.push(OPEN_VIA_CLIENT);\n    }\n\n    return menuList;\n  }\n\n  renderChildren = () => {\n    let { node, paddingLeft } = this.props;\n    if (!node.hasChildren()) {\n      return '';\n    }\n    return (\n      <div className=\"children\" style={{paddingLeft: paddingLeft}}>\n        {node.children.map(item => {\n          return (\n            <TreeNodeView\n              key={item.path}\n              node={item}\n              paddingLeft={paddingLeft}\n              userPerm={this.props.userPerm}\n              currentPath={this.props.currentPath}\n              isNodeMenuShow={this.props.isNodeMenuShow}\n              isItemFreezed={this.props.isItemFreezed}\n              onNodeClick={this.props.onNodeClick}\n              onNodeCollapse={this.props.onNodeCollapse}\n              onNodeExpanded={this.props.onNodeExpanded}\n              freezeItem={this.props.freezeItem}\n              onMenuItemClick={this.props.onMenuItemClick}\n              unfreezeItem={this.unfreezeItem}\n              onNodeDragStart={this.props.onNodeDragStart}\n              onNodeDragMove={this.props.onNodeDragMove}\n              onNodeDrop={this.props.onNodeDrop}\n              onNodeDragEnter={this.props.onNodeDragEnter}\n              onNodeDragLeave={this.props.onNodeDragLeave}\n              handleContextClick={this.props.handleContextClick}\n            />\n          );\n        })}\n      </div>\n    );\n  }\n\n  render() {\n    let { currentPath, node, isNodeMenuShow, userPerm } = this.props;\n    let { type, icon } = this.getNodeTypeAndIcon();\n    let hlClass = this.state.isHighlight ? 'tree-node-inner-hover ' : '';\n    if (node.path === currentPath) {\n      hlClass = 'tree-node-hight-light';\n    }\n\n    const { isCustomPermission } = Utils.getUserPermission(userPerm)\n    return (\n      <div className=\"tree-node\">\n        <div\n          type={type}\n          className={`tree-node-inner text-nowrap ${hlClass} ${node.path === '/'? 'hide': ''} ${this.state.isNodeDropShow ? 'tree-node-drop' : ''}`}\n          title={node.object.name}\n          onMouseEnter={this.onMouseEnter}\n          onMouseOver={this.onMouseOver}\n          onMouseLeave={this.onMouseLeave}\n          onMouseDown={this.onItemMouseDown}\n          onContextMenu={this.onItemContextMenu}\n          onClick={this.onNodeClick}\n        >\n          <div className=\"tree-node-text\" draggable={this.canDrag} onDragStart={this.onNodeDragStart} onDragEnter={this.onNodeDragEnter} onDragLeave={this.onNodeDragLeave} onDragOver={this.onNodeDragMove} onDrop={this.onNodeDrop}>{node.object.name}</div>\n          <div className=\"left-icon\">\n            {type === 'dir' && (!node.isLoaded ||  (node.isLoaded && node.hasChildren())) && (\n              <i\n                className={`folder-toggle-icon fa ${node.isExpanded ? 'fa-caret-down' : 'fa-caret-right'}`}\n                onMouseDown={e => e.stopPropagation()}\n                onClick={this.onLoadToggle}\n              ></i>\n            )}\n            <i className=\"tree-node-icon\">{icon}</i>\n          </div>\n          {isNodeMenuShow && (\n            <div className=\"right-icon\">\n              {((userPerm === 'rw' || permission || isCustomPermission) && this.state.isShowOperationMenu) && (\n                <ItemDropdownMenu\n                  item={this.props.node}\n                  toggleClass={'fas fa-ellipsis-v'}\n                  getMenuList={this.calculateMenuList}\n                  onMenuItemClick={this.onMenuItemClick}\n                  freezeItem={this.props.freezeItem}\n                  unfreezeItem={this.unfreezeItem}\n                />\n              )}\n            </div>\n          )}\n        </div>\n        {node.isExpanded && this.renderChildren()}\n      </div>\n    );\n  }\n}\n\nTreeNodeView.propTypes = propTypes;\n\nexport default TreeNodeView;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport TextTranslation from '../../utils/text-translation';\nimport TreeNodeView from './tree-node-view';\nimport ContextMenu from '../context-menu/context-menu';\nimport { hideMenu, showMenu } from '../context-menu/actions';\nimport { Utils } from '../../utils/utils';\n\nconst propTypes = {\n  userPerm: PropTypes.string,\n  isNodeMenuShow: PropTypes.bool.isRequired,\n  treeData: PropTypes.object.isRequired,\n  currentPath: PropTypes.string.isRequired,\n  onMenuItemClick: PropTypes.func,\n  onNodeClick: PropTypes.func.isRequired,\n  onNodeExpanded: PropTypes.func.isRequired,\n  onNodeCollapse: PropTypes.func.isRequired,\n  onItemMove: PropTypes.func,\n  currentRepoInfo: PropTypes.object,\n  selectedDirentList: PropTypes.array,\n  onItemsMove: PropTypes.func,\n};\n\nconst PADDING_LEFT = 20;\n\nclass TreeView extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isItemFreezed: false,\n      isTreeViewDropTipShow: false,\n    };\n    const { userPerm } = props;\n    this.canDrop = userPerm === 'rw';\n    const { isCustomPermission, customPermission } = Utils.getUserPermission(userPerm);\n    if (isCustomPermission) {\n      const { modify } = customPermission.permission;\n      this.canDrop = modify;\n    }\n  }\n\n  onItemMove = (repo, dirent, selectedPath, currentPath) => {\n    this.props.onItemMove(repo, dirent, selectedPath, currentPath);\n  }\n\n  onNodeDragStart = (e, node) => {\n    if (Utils.isIEBrower()) {\n      return false;\n    }\n    let dragStartNodeData = {nodeDirent: node.object, nodeParentPath: node.parentNode.path, nodeRootPath: node.path};\n    dragStartNodeData = JSON.stringify(dragStartNodeData);\n\n    e.dataTransfer.effectAllowed = 'move';\n    e.dataTransfer.setData('applicaiton/drag-item-info', dragStartNodeData);\n  }\n\n  onNodeDragEnter = (e, node) => {\n    if (Utils.isIEBrower() || !this.canDrop) {\n      return false;\n    }\n    e.persist();\n    if (e.target.className === 'tree-view tree ') {\n      this.setState({\n        isTreeViewDropTipShow: true,\n      });\n    }\n  }\n\n  onNodeDragMove = (e) => {\n    if (Utils.isIEBrower() || !this.canDrop) {\n      return false;\n    }\n    e.preventDefault();\n    e.dataTransfer.dropEffect = 'move';\n  }\n\n  onNodeDragLeave = (e, node) => {\n    if (Utils.isIEBrower() || !this.canDrop) {\n      return false;\n    }\n    if (e.target.className === 'tree-view tree tree-view-drop') {\n      this.setState({\n        isTreeViewDropTipShow: false,\n      });\n    }\n  }\n\n  onContainerClick = (event) => {\n    hideMenu();\n  }\n\n  onNodeClick = (node) => {\n    hideMenu();\n    this.props.onNodeClick(node);\n  }\n\n  onNodeDrop = (e, node) => {\n    if (Utils.isIEBrower() || !this.canDrop) {\n      return false;\n    }\n    if (e.dataTransfer.files.length) { // uploaded files\n      return;\n    }\n    let dragStartNodeData = e.dataTransfer.getData('applicaiton/drag-item-info');\n    dragStartNodeData = JSON.parse(dragStartNodeData);\n\n    let {nodeDirent, nodeParentPath, nodeRootPath} = dragStartNodeData;\n    let dropNodeData = node;\n\n    if (Array.isArray(dragStartNodeData)) { //move items\n      if (!dropNodeData) { //move items to root\n        if (dragStartNodeData[0].nodeParentPath === '/') {\n          this.setState({isTreeViewDropTipShow: false});\n          return;\n        }\n        this.props.onItemsMove(this.props.currentRepoInfo, '/');\n        this.setState({isTreeViewDropTipShow: false});\n        return;\n      }\n      this.onMoveItems(dragStartNodeData, dropNodeData, this.props.currentRepoInfo, dropNodeData.path);\n      return;\n    }\n\n    if (!dropNodeData) {\n      if (nodeParentPath === '/') {\n        this.setState({isTreeViewDropTipShow: false});\n        return;\n      }\n      this.onItemMove(this.props.currentRepoInfo, nodeDirent, '/', nodeParentPath);\n      this.setState({isTreeViewDropTipShow: false});\n      return;\n    }\n\n    if (dropNodeData.object.type !== 'dir') {\n      return;\n    }\n\n    if (nodeParentPath === dropNodeData.path) {\n      return;\n    }\n\n    // copy the dirent to itself. eg: A/B -> A/B\n    if (nodeParentPath === dropNodeData.parentNode.path) {\n      if (dropNodeData.object.name === nodeDirent.name) {\n        return;\n      }\n    }\n\n    // copy the dirent to it's child. eg: A/B -> A/B/C\n    if (dropNodeData.object.type === 'dir' && nodeDirent.type === 'dir') {\n      if (dropNodeData.parentNode.path !== nodeParentPath) {\n        let paths = Utils.getPaths(dropNodeData.path);\n        if (paths.includes(nodeRootPath)) {\n          return;\n        }\n      }\n    }\n\n    this.onItemMove(this.props.currentRepoInfo, nodeDirent, dropNodeData.path, nodeParentPath);\n  }\n\n  onMoveItems = (dragStartNodeData, dropNodeData, destRepo, destDirentPath) => {\n    let direntPaths = [];\n    let paths = Utils.getPaths(destDirentPath);\n    dragStartNodeData.forEach(dirent => {\n      let path = dirent.nodeRootPath;\n      direntPaths.push(path);\n    });\n\n    if (dropNodeData.object.type !== 'dir') {\n      return;\n    }\n\n    // move dirents to one of them. eg: A/B, A/C -> A/B\n    if (direntPaths.some(direntPath => { return direntPath === destDirentPath;})) {\n      return;\n    }\n\n    // move dirents to current path\n    if (dragStartNodeData[0].nodeParentPath && dragStartNodeData[0].nodeParentPath === dropNodeData.path ) {\n      return;\n    }\n\n    // move dirents to one of their child. eg: A/B, A/D -> A/B/C\n    let isChildPath = direntPaths.some(direntPath => {\n      return paths.includes(direntPath);\n    });\n    if (isChildPath) {\n      return;\n    }\n\n    this.props.onItemsMove(destRepo, destDirentPath);\n  }\n\n  freezeItem = () => {\n    this.setState({isItemFreezed: true});\n  }\n\n  unfreezeItem = () => {\n    this.setState({isItemFreezed: false});\n  }\n\n  onMenuItemClick = (operation, node) => {\n    this.props.onMenuItemClick(operation, node);\n    hideMenu();\n  }\n\n  onMouseDown = (event) => {\n    event.stopPropagation();\n    if (event.button === 2) {\n      return;\n    }\n  }\n\n  onContextMenu = (event) => {\n    event.preventDefault();\n\n    let currentRepoInfo = this.props.currentRepoInfo;\n    if (currentRepoInfo.permission !== 'admin' && currentRepoInfo.permission !== 'rw') {\n      return '';\n    }\n    this.handleContextClick(event);\n  }\n\n  handleContextClick = (event, node) => {\n    event.preventDefault();\n    event.stopPropagation();\n\n    if (!this.props.isNodeMenuShow) {\n      return;\n    }\n\n    let x = event.clientX || (event.touches && event.touches[0].pageX);\n    let y = event.clientY || (event.touches && event.touches[0].pageY);\n\n    if (this.props.posX) {\n      x -= this.props.posX;\n    }\n    if (this.props.posY) {\n      y -= this.props.posY;\n    }\n\n    hideMenu();\n\n    let menuList = this.getMenuList(node);\n\n    let showMenuConfig = {\n      id: 'tree-node-contextmenu',\n      position: { x, y },\n      target: event.target,\n      currentObject: node,\n      menuList: menuList,\n    };\n\n    showMenu(showMenuConfig);\n  }\n\n  getMenuList = (node) => {\n    let menuList = [];\n\n    let { NEW_FOLDER, NEW_FILE, COPY, MOVE, RENAME, DELETE, OPEN_VIA_CLIENT } = TextTranslation;\n\n    if (!node) {\n      return [NEW_FOLDER, NEW_FILE];\n    }\n\n    if (node.object.type === 'dir') {\n      menuList = [NEW_FOLDER, NEW_FILE, COPY, MOVE, RENAME, DELETE];\n    } else {\n      menuList = [RENAME, DELETE, COPY, MOVE, OPEN_VIA_CLIENT];\n    }\n\n    const { userPerm } = this.props;\n    const { isCustomPermission, customPermission } = Utils.getUserPermission(userPerm);\n    if (!isCustomPermission) {\n      return menuList;\n    }\n\n    menuList = [];\n\n    const { create: canCreate, modify: canModify, delete: canDelete, copy: canCopy } = customPermission.permission;\n    if (!node) {\n      canCreate && menuList.push(NEW_FOLDER, NEW_FILE);\n      return menuList;\n    }\n\n    if (node.object.type === 'dir') {\n      canCreate && menuList.push(NEW_FOLDER, NEW_FILE);\n    }\n\n    canCopy && menuList.push(COPY);\n    canModify && menuList.push(MOVE, RENAME);\n    canDelete && menuList.push(DELETE);\n\n    if (node.object.type !== 'dir') { \n      menuList.push(OPEN_VIA_CLIENT);\n    }\n\n    return menuList;\n  }\n\n  onShowMenu = () => {\n    this.freezeItem();\n  }\n\n  onHideMenu = () => {\n    this.unfreezeItem();\n  }\n\n  render() {\n    return (\n      <div\n        className={`tree-view tree ${(this.state.isTreeViewDropTipShow && this.canDrop) ? 'tree-view-drop' : ''}`}\n        onDrop={this.onNodeDrop}\n        onDragEnter={this.onNodeDragEnter}\n        onDragLeave={this.onNodeDragLeave}\n        onMouseDown={this.onMouseDown}\n        onContextMenu={this.onContextMenu}\n        onClick={this.onContainerClick}\n      >\n        <TreeNodeView\n          userPerm={this.props.userPerm}\n          node={this.props.treeData.root}\n          currentPath={this.props.currentPath}\n          paddingLeft={PADDING_LEFT}\n          isNodeMenuShow={this.props.isNodeMenuShow}\n          isItemFreezed={this.state.isItemFreezed}\n          onNodeClick={this.onNodeClick}\n          onMenuItemClick={this.props.onMenuItemClick}\n          onNodeExpanded={this.props.onNodeExpanded}\n          onNodeCollapse={this.props.onNodeCollapse}\n          onNodeDragStart={this.onNodeDragStart}\n          freezeItem={this.freezeItem}\n          unfreezeItem={this.unfreezeItem}\n          onNodeDragMove={this.onNodeDragMove}\n          onNodeDrop={this.onNodeDrop}\n          onNodeDragEnter={this.onNodeDragEnter}\n          onNodeDragLeave={this.onNodeDragLeave}\n          handleContextClick={this.handleContextClick}\n        />\n        <ContextMenu\n          id={'tree-node-contextmenu'}\n          onMenuItemClick={this.onMenuItemClick}\n          onHideMenu={this.onHideMenu}\n          onShowMenu={this.onShowMenu}\n        />\n      </div>\n    );\n  }\n}\n\nTreeView.propTypes = propTypes;\n\nexport default TreeView;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { MarkdownViewer } from '@seafile/seafile-editor';\nimport { gettext, repoID, slug, serviceURL, isPublicWiki, sharedToken, mediaUrl } from '../utils/constants';\nimport Loading from './loading';\nimport { Utils } from '../utils/utils';\n\nconst propTypes = {\n  children: PropTypes.object,\n  isFileLoading: PropTypes.bool.isRequired,\n  markdownContent: PropTypes.string.isRequired,\n  latestContributor: PropTypes.string.isRequired,\n  lastModified: PropTypes.string.isRequired,\n  onLinkClick: PropTypes.func.isRequired,\n  isWiki: PropTypes.bool,\n  isTOCShow: PropTypes.bool,\n  // for dir-column-file component(import repoID is undefined)\n  repoID: PropTypes.string,\n  path: PropTypes.string,\n};\n\nconst contentClass = 'wiki-page-content';\n\nclass WikiMarkdownViewer extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      activeTitleIndex: 0,\n    };\n    this.markdownContainer = React.createRef();\n    this.links = [];\n    this.titlesInfo = [];\n  }\n\n  componentDidMount() {\n    // Bind event when first loaded\n    this.links = document.querySelectorAll(`.${contentClass} a`);\n    this.links.forEach(link => {\n      link.addEventListener('click', this.onLinkClick);\n    });\n\n    this.getTitlesInfo();\n  }\n\n  componentWillReceiveProps(nextProps) {\n    if (this.props.markdownContent === nextProps.markdownContent) {\n      return;\n    }\n    // Unbound event when updating\n    this.links.forEach(link => {\n      link.removeEventListener('click', this.onLinkClick);\n    });\n  }\n\n  componentDidUpdate() {\n    // Update completed, rebind event\n    this.links = document.querySelectorAll(`.${contentClass} a`);\n    this.links.forEach(link => {\n      link.addEventListener('click', this.onLinkClick);\n    });\n    if (this.titlesInfo.length === 0) {\n      this.getTitlesInfo();\n    }\n  }\n\n  componentWillUnmount() {\n    // Unbound events when the component is destroyed\n    this.links.forEach(link => {\n      link.removeEventListener('click', this.onLinkClick);\n    });\n  }\n\n  getTitlesInfo = () => {\n    let titlesInfo = [];\n    const titleDom = document.querySelectorAll('h1[id^=\"user-content\"]')[0];\n    if (titleDom) {\n      const id = titleDom.getAttribute('id');\n      let content = id && id.replace('user-content-', '');\n      content = content ? `${content} - ${slug}` : slug;\n      Utils.updateTabTitle(content);\n    }\n    let headingList = document.querySelectorAll('h2[id^=\"user-content\"], h3[id^=\"user-content\"]');\n    for (let i = 0; i < headingList.length; i++) {\n      titlesInfo.push(headingList[i].offsetTop);\n    }\n    this.titlesInfo = titlesInfo;\n  }\n\n  onLinkClick = (event) => {\n    event.preventDefault();\n    event.stopPropagation();\n    let link = '';\n    if (event.target.tagName !== 'A') {\n      let target = event.target.parentNode;\n      while (target.tagName !== 'A') {\n        target = target.parentNode;\n      }\n      link = target.href;\n    } else {\n      link = event.target.href;\n    }\n    this.props.onLinkClick(link);\n  }\n\n  onScrollHandler = () => {\n    const contentScrollTop = this.markdownContainer.current.scrollTop + 180;\n    let titlesLength = this.titlesInfo.length;\n    let activeTitleIndex;\n    if (contentScrollTop <= this.titlesInfo[0]) {\n      activeTitleIndex = 0;\n      this.setState({activeTitleIndex: activeTitleIndex});\n      return;\n    }\n    if (contentScrollTop > this.titlesInfo[titlesLength - 1]) {\n      activeTitleIndex = this.titlesInfo.length - 1;\n      this.setState({activeTitleIndex: activeTitleIndex});\n      return;\n    }\n    for (let i = 0; i < titlesLength; i++) {\n      if (contentScrollTop > this.titlesInfo[i]) {\n        continue;\n      } else {\n        activeTitleIndex = i - 1;\n        break;\n      }\n    }\n    this.setState({activeTitleIndex: activeTitleIndex});\n  }\n\n  changeInlineNode = (item) => {\n    let url, imagePath;\n\n    if (item.type == 'image' && isPublicWiki) { // change image url\n      url = item.data.src;\n      const re = new RegExp(serviceURL + '/lib/' + repoID +'/file.*raw=1');\n      // different repo\n      if (re.test(url)) {\n        // get image path\n        let index = url.indexOf('/file');\n        let index2 = url.indexOf('?');\n        imagePath = url.substring(index + 5, index2);\n      } else if (/^\\.\\.\\/*/.test(url) || /^\\.\\/*/.test(url)) {\n        const path = this.props.path;\n        const originalPath = path.slice(0, path.lastIndexOf('/')) + '/' + url;\n        imagePath = Utils.pathNormalize(originalPath);\n      } else {\n        return;\n      }\n      item.data.src = serviceURL + '/view-image-via-public-wiki/?slug=' + slug + '&path=' + imagePath;\n    } else if (item.type == 'link') { // change link url\n      url = item.data.href;\n      if (Utils.isInternalFileLink(url, repoID)) { // change file url\n        if (Utils.isInternalMarkdownLink(url, repoID)) {\n          let path = Utils.getPathFromInternalMarkdownLink(url, repoID);\n          // replace url\n          item.data.href = serviceURL + '/published/' + slug + path;\n        } else {\n          item.data.href = url.replace(/(.*)lib\\/([-0-9a-f]{36})\\/file(.*)/g, (match, p1, p2, p3) => {\n            return `${p1}d/${sharedToken}/files/?p=${p3}&dl=1`;\n          });\n        }\n      } else if (Utils.isInternalDirLink(url, repoID)) { // change dir url\n        let path = Utils.getPathFromInternalDirLink(url, repoID);\n        // replace url\n        item.data.href = serviceURL + '/published/' + slug + path;\n      }\n    }\n\n    return item;\n  }\n\n  modifyValueBeforeRender = (value) => {\n    let newNodes = Utils.changeMarkdownNodes(value, this.changeInlineNode);\n    return newNodes;\n  }\n\n  renderMarkdown = () => {\n    let isTOCShow = true;\n    if (this.props.isTOCShow === false) {\n      isTOCShow = false;\n    }\n    if (this.props.isWiki) {\n      return (\n        <MarkdownViewer\n          showTOC={isTOCShow}\n          scriptSource={mediaUrl + 'js/mathjax/tex-svg.js'}\n          markdownContent={this.props.markdownContent}\n          activeTitleIndex={this.state.activeTitleIndex}\n          modifyValueBeforeRender={this.modifyValueBeforeRender}\n        />\n      );\n    }\n\n    return (\n      <MarkdownViewer\n        showTOC={isTOCShow}\n        scriptSource={mediaUrl + 'js/mathjax/tex-svg.js'}\n        markdownContent={this.props.markdownContent}\n        activeTitleIndex={this.state.activeTitleIndex}\n      />\n    );\n  }\n\n  render() {\n    if (this.props.isFileLoading) {\n      return <Loading />;\n    }\n    // In dir-column-file repoID is one of props, width is 100%; In wiki-viewer repoID is not props, width isn't 100%\n    let contentClassName = `${this.props.repoID ? contentClass + ' w-100' : contentClass}`;\n    return (\n      <div ref={this.markdownContainer} className=\"wiki-page-container\" onScroll={this.onScrollHandler.bind(this)}>\n        <div className={contentClassName}>\n          {this.props.children}\n          {this.renderMarkdown()}\n          <p id=\"wiki-page-last-modified\">{gettext('Last modified by')} {this.props.latestContributor}, <span>{this.props.lastModified}</span></p>\n        </div>\n      </div>\n    );\n  }\n}\n\nconst defaultProps = {\n  isWiki: false,\n};\n\nWikiMarkdownViewer.propTypes = propTypes;\nMarkdownViewer.defaultProps = defaultProps;\n\nexport default WikiMarkdownViewer;\n","module.exports = after\n\nfunction after(count, callback, err_cb) {\n    var bail = false\n    err_cb = err_cb || noop\n    proxy.count = count\n\n    return (count === 0) ? callback() : proxy\n\n    function proxy(err, result) {\n        if (proxy.count <= 0) {\n            throw new Error('after called too many times')\n        }\n        --proxy.count\n\n        // after first error, rest are passed to err_cb\n        if (err) {\n            bail = true\n            callback(err)\n            // future error callbacks will go to error handler\n            callback = err_cb\n        } else if (proxy.count === 0 && !bail) {\n            callback(null, result)\n        }\n    }\n}\n\nfunction noop() {}\n","/**\n * An abstraction for slicing an arraybuffer even when\n * ArrayBuffer.prototype.slice is not supported\n *\n * @api public\n */\n\nmodule.exports = function(arraybuffer, start, end) {\n  var bytes = arraybuffer.byteLength;\n  start = start || 0;\n  end = end || bytes;\n\n  if (arraybuffer.slice) { return arraybuffer.slice(start, end); }\n\n  if (start < 0) { start += bytes; }\n  if (end < 0) { end += bytes; }\n  if (end > bytes) { end = bytes; }\n\n  if (start >= bytes || start >= end || bytes === 0) {\n    return new ArrayBuffer(0);\n  }\n\n  var abv = new Uint8Array(arraybuffer);\n  var result = new Uint8Array(end - start);\n  for (var i = start, ii = 0; i < end; i++, ii++) {\n    result[ii] = abv[i];\n  }\n  return result.buffer;\n};\n","\n/**\n * Expose `Backoff`.\n */\n\nmodule.exports = Backoff;\n\n/**\n * Initialize backoff timer with `opts`.\n *\n * - `min` initial timeout in milliseconds [100]\n * - `max` max timeout [10000]\n * - `jitter` [0]\n * - `factor` [2]\n *\n * @param {Object} opts\n * @api public\n */\n\nfunction Backoff(opts) {\n  opts = opts || {};\n  this.ms = opts.min || 100;\n  this.max = opts.max || 10000;\n  this.factor = opts.factor || 2;\n  this.jitter = opts.jitter > 0 && opts.jitter <= 1 ? opts.jitter : 0;\n  this.attempts = 0;\n}\n\n/**\n * Return the backoff duration.\n *\n * @return {Number}\n * @api public\n */\n\nBackoff.prototype.duration = function(){\n  var ms = this.ms * Math.pow(this.factor, this.attempts++);\n  if (this.jitter) {\n    var rand =  Math.random();\n    var deviation = Math.floor(rand * this.jitter * ms);\n    ms = (Math.floor(rand * 10) & 1) == 0  ? ms - deviation : ms + deviation;\n  }\n  return Math.min(ms, this.max) | 0;\n};\n\n/**\n * Reset the number of attempts.\n *\n * @api public\n */\n\nBackoff.prototype.reset = function(){\n  this.attempts = 0;\n};\n\n/**\n * Set the minimum duration\n *\n * @api public\n */\n\nBackoff.prototype.setMin = function(min){\n  this.ms = min;\n};\n\n/**\n * Set the maximum duration\n *\n * @api public\n */\n\nBackoff.prototype.setMax = function(max){\n  this.max = max;\n};\n\n/**\n * Set the jitter\n *\n * @api public\n */\n\nBackoff.prototype.setJitter = function(jitter){\n  this.jitter = jitter;\n};\n\n","/*\n * base64-arraybuffer\n * https://github.com/niklasvh/base64-arraybuffer\n *\n * Copyright (c) 2012 Niklas von Hertzen\n * Licensed under the MIT license.\n */\n(function(chars){\n  \"use strict\";\n\n  exports.encode = function(arraybuffer) {\n    var bytes = new Uint8Array(arraybuffer),\n    i, len = bytes.length, base64 = \"\";\n\n    for (i = 0; i < len; i+=3) {\n      base64 += chars[bytes[i] >> 2];\n      base64 += chars[((bytes[i] & 3) << 4) | (bytes[i + 1] >> 4)];\n      base64 += chars[((bytes[i + 1] & 15) << 2) | (bytes[i + 2] >> 6)];\n      base64 += chars[bytes[i + 2] & 63];\n    }\n\n    if ((len % 3) === 2) {\n      base64 = base64.substring(0, base64.length - 1) + \"=\";\n    } else if (len % 3 === 1) {\n      base64 = base64.substring(0, base64.length - 2) + \"==\";\n    }\n\n    return base64;\n  };\n\n  exports.decode =  function(base64) {\n    var bufferLength = base64.length * 0.75,\n    len = base64.length, i, p = 0,\n    encoded1, encoded2, encoded3, encoded4;\n\n    if (base64[base64.length - 1] === \"=\") {\n      bufferLength--;\n      if (base64[base64.length - 2] === \"=\") {\n        bufferLength--;\n      }\n    }\n\n    var arraybuffer = new ArrayBuffer(bufferLength),\n    bytes = new Uint8Array(arraybuffer);\n\n    for (i = 0; i < len; i+=4) {\n      encoded1 = chars.indexOf(base64[i]);\n      encoded2 = chars.indexOf(base64[i+1]);\n      encoded3 = chars.indexOf(base64[i+2]);\n      encoded4 = chars.indexOf(base64[i+3]);\n\n      bytes[p++] = (encoded1 << 2) | (encoded2 >> 4);\n      bytes[p++] = ((encoded2 & 15) << 4) | (encoded3 >> 2);\n      bytes[p++] = ((encoded3 & 3) << 6) | (encoded4 & 63);\n    }\n\n    return arraybuffer;\n  };\n})(\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\");\n","/**\r\n * Create a blob builder even when vendor prefixes exist\r\n */\r\n\r\nvar BlobBuilder = typeof BlobBuilder !== 'undefined' ? BlobBuilder :\r\n  typeof WebKitBlobBuilder !== 'undefined' ? WebKitBlobBuilder :\r\n  typeof MSBlobBuilder !== 'undefined' ? MSBlobBuilder :\r\n  typeof MozBlobBuilder !== 'undefined' ? MozBlobBuilder : \r\n  false;\r\n\r\n/**\r\n * Check if Blob constructor is supported\r\n */\r\n\r\nvar blobSupported = (function() {\r\n  try {\r\n    var a = new Blob(['hi']);\r\n    return a.size === 2;\r\n  } catch(e) {\r\n    return false;\r\n  }\r\n})();\r\n\r\n/**\r\n * Check if Blob constructor supports ArrayBufferViews\r\n * Fails in Safari 6, so we need to map to ArrayBuffers there.\r\n */\r\n\r\nvar blobSupportsArrayBufferView = blobSupported && (function() {\r\n  try {\r\n    var b = new Blob([new Uint8Array([1,2])]);\r\n    return b.size === 2;\r\n  } catch(e) {\r\n    return false;\r\n  }\r\n})();\r\n\r\n/**\r\n * Check if BlobBuilder is supported\r\n */\r\n\r\nvar blobBuilderSupported = BlobBuilder\r\n  && BlobBuilder.prototype.append\r\n  && BlobBuilder.prototype.getBlob;\r\n\r\n/**\r\n * Helper function that maps ArrayBufferViews to ArrayBuffers\r\n * Used by BlobBuilder constructor and old browsers that didn't\r\n * support it in the Blob constructor.\r\n */\r\n\r\nfunction mapArrayBufferViews(ary) {\r\n  return ary.map(function(chunk) {\r\n    if (chunk.buffer instanceof ArrayBuffer) {\r\n      var buf = chunk.buffer;\r\n\r\n      // if this is a subarray, make a copy so we only\r\n      // include the subarray region from the underlying buffer\r\n      if (chunk.byteLength !== buf.byteLength) {\r\n        var copy = new Uint8Array(chunk.byteLength);\r\n        copy.set(new Uint8Array(buf, chunk.byteOffset, chunk.byteLength));\r\n        buf = copy.buffer;\r\n      }\r\n\r\n      return buf;\r\n    }\r\n\r\n    return chunk;\r\n  });\r\n}\r\n\r\nfunction BlobBuilderConstructor(ary, options) {\r\n  options = options || {};\r\n\r\n  var bb = new BlobBuilder();\r\n  mapArrayBufferViews(ary).forEach(function(part) {\r\n    bb.append(part);\r\n  });\r\n\r\n  return (options.type) ? bb.getBlob(options.type) : bb.getBlob();\r\n};\r\n\r\nfunction BlobConstructor(ary, options) {\r\n  return new Blob(mapArrayBufferViews(ary), options || {});\r\n};\r\n\r\nif (typeof Blob !== 'undefined') {\r\n  BlobBuilderConstructor.prototype = Blob.prototype;\r\n  BlobConstructor.prototype = Blob.prototype;\r\n}\r\n\r\nmodule.exports = (function() {\r\n  if (blobSupported) {\r\n    return blobSupportsArrayBufferView ? Blob : BlobConstructor;\r\n  } else if (blobBuilderSupported) {\r\n    return BlobBuilderConstructor;\r\n  } else {\r\n    return undefined;\r\n  }\r\n})();\r\n","/**\n * Slice reference.\n */\n\nvar slice = [].slice;\n\n/**\n * Bind `obj` to `fn`.\n *\n * @param {Object} obj\n * @param {Function|String} fn or string\n * @return {Function}\n * @api public\n */\n\nmodule.exports = function(obj, fn){\n  if ('string' == typeof fn) fn = obj[fn];\n  if ('function' != typeof fn) throw new Error('bind() requires a function');\n  var args = slice.call(arguments, 2);\n  return function(){\n    return fn.apply(obj, args.concat(slice.call(arguments)));\n  }\n};\n","\r\n/**\r\n * Expose `Emitter`.\r\n */\r\n\r\nif (typeof module !== 'undefined') {\r\n  module.exports = Emitter;\r\n}\r\n\r\n/**\r\n * Initialize a new `Emitter`.\r\n *\r\n * @api public\r\n */\r\n\r\nfunction Emitter(obj) {\r\n  if (obj) return mixin(obj);\r\n};\r\n\r\n/**\r\n * Mixin the emitter properties.\r\n *\r\n * @param {Object} obj\r\n * @return {Object}\r\n * @api private\r\n */\r\n\r\nfunction mixin(obj) {\r\n  for (var key in Emitter.prototype) {\r\n    obj[key] = Emitter.prototype[key];\r\n  }\r\n  return obj;\r\n}\r\n\r\n/**\r\n * Listen on the given `event` with `fn`.\r\n *\r\n * @param {String} event\r\n * @param {Function} fn\r\n * @return {Emitter}\r\n * @api public\r\n */\r\n\r\nEmitter.prototype.on =\r\nEmitter.prototype.addEventListener = function(event, fn){\r\n  this._callbacks = this._callbacks || {};\r\n  (this._callbacks['$' + event] = this._callbacks['$' + event] || [])\r\n    .push(fn);\r\n  return this;\r\n};\r\n\r\n/**\r\n * Adds an `event` listener that will be invoked a single\r\n * time then automatically removed.\r\n *\r\n * @param {String} event\r\n * @param {Function} fn\r\n * @return {Emitter}\r\n * @api public\r\n */\r\n\r\nEmitter.prototype.once = function(event, fn){\r\n  function on() {\r\n    this.off(event, on);\r\n    fn.apply(this, arguments);\r\n  }\r\n\r\n  on.fn = fn;\r\n  this.on(event, on);\r\n  return this;\r\n};\r\n\r\n/**\r\n * Remove the given callback for `event` or all\r\n * registered callbacks.\r\n *\r\n * @param {String} event\r\n * @param {Function} fn\r\n * @return {Emitter}\r\n * @api public\r\n */\r\n\r\nEmitter.prototype.off =\r\nEmitter.prototype.removeListener =\r\nEmitter.prototype.removeAllListeners =\r\nEmitter.prototype.removeEventListener = function(event, fn){\r\n  this._callbacks = this._callbacks || {};\r\n\r\n  // all\r\n  if (0 == arguments.length) {\r\n    this._callbacks = {};\r\n    return this;\r\n  }\r\n\r\n  // specific event\r\n  var callbacks = this._callbacks['$' + event];\r\n  if (!callbacks) return this;\r\n\r\n  // remove all handlers\r\n  if (1 == arguments.length) {\r\n    delete this._callbacks['$' + event];\r\n    return this;\r\n  }\r\n\r\n  // remove specific handler\r\n  var cb;\r\n  for (var i = 0; i < callbacks.length; i++) {\r\n    cb = callbacks[i];\r\n    if (cb === fn || cb.fn === fn) {\r\n      callbacks.splice(i, 1);\r\n      break;\r\n    }\r\n  }\r\n\r\n  // Remove event specific arrays for event types that no\r\n  // one is subscribed for to avoid memory leak.\r\n  if (callbacks.length === 0) {\r\n    delete this._callbacks['$' + event];\r\n  }\r\n\r\n  return this;\r\n};\r\n\r\n/**\r\n * Emit `event` with the given args.\r\n *\r\n * @param {String} event\r\n * @param {Mixed} ...\r\n * @return {Emitter}\r\n */\r\n\r\nEmitter.prototype.emit = function(event){\r\n  this._callbacks = this._callbacks || {};\r\n\r\n  var args = new Array(arguments.length - 1)\r\n    , callbacks = this._callbacks['$' + event];\r\n\r\n  for (var i = 1; i < arguments.length; i++) {\r\n    args[i - 1] = arguments[i];\r\n  }\r\n\r\n  if (callbacks) {\r\n    callbacks = callbacks.slice(0);\r\n    for (var i = 0, len = callbacks.length; i < len; ++i) {\r\n      callbacks[i].apply(this, args);\r\n    }\r\n  }\r\n\r\n  return this;\r\n};\r\n\r\n/**\r\n * Return array of callbacks for `event`.\r\n *\r\n * @param {String} event\r\n * @return {Array}\r\n * @api public\r\n */\r\n\r\nEmitter.prototype.listeners = function(event){\r\n  this._callbacks = this._callbacks || {};\r\n  return this._callbacks['$' + event] || [];\r\n};\r\n\r\n/**\r\n * Check if this emitter has `event` handlers.\r\n *\r\n * @param {String} event\r\n * @return {Boolean}\r\n * @api public\r\n */\r\n\r\nEmitter.prototype.hasListeners = function(event){\r\n  return !! this.listeners(event).length;\r\n};\r\n","\nmodule.exports = function(a, b){\n  var fn = function(){};\n  fn.prototype = b.prototype;\n  a.prototype = new fn;\n  a.prototype.constructor = a;\n};","module.exports = (function () {\n  if (typeof self !== 'undefined') {\n    return self;\n  } else if (typeof window !== 'undefined') {\n    return window;\n  } else {\n    return Function('return this')(); // eslint-disable-line no-new-func\n  }\n})();\n","\nmodule.exports = require('./socket');\n\n/**\n * Exports parser\n *\n * @api public\n *\n */\nmodule.exports.parser = require('engine.io-parser');\n","/**\n * Module dependencies.\n */\n\nvar transports = require('./transports/index');\nvar Emitter = require('component-emitter');\nvar debug = require('debug')('engine.io-client:socket');\nvar index = require('indexof');\nvar parser = require('engine.io-parser');\nvar parseuri = require('parseuri');\nvar parseqs = require('parseqs');\n\n/**\n * Module exports.\n */\n\nmodule.exports = Socket;\n\n/**\n * Socket constructor.\n *\n * @param {String|Object} uri or options\n * @param {Object} options\n * @api public\n */\n\nfunction Socket (uri, opts) {\n  if (!(this instanceof Socket)) return new Socket(uri, opts);\n\n  opts = opts || {};\n\n  if (uri && 'object' === typeof uri) {\n    opts = uri;\n    uri = null;\n  }\n\n  if (uri) {\n    uri = parseuri(uri);\n    opts.hostname = uri.host;\n    opts.secure = uri.protocol === 'https' || uri.protocol === 'wss';\n    opts.port = uri.port;\n    if (uri.query) opts.query = uri.query;\n  } else if (opts.host) {\n    opts.hostname = parseuri(opts.host).host;\n  }\n\n  this.secure = null != opts.secure ? opts.secure\n    : (typeof location !== 'undefined' && 'https:' === location.protocol);\n\n  if (opts.hostname && !opts.port) {\n    // if no port is specified manually, use the protocol default\n    opts.port = this.secure ? '443' : '80';\n  }\n\n  this.agent = opts.agent || false;\n  this.hostname = opts.hostname ||\n    (typeof location !== 'undefined' ? location.hostname : 'localhost');\n  this.port = opts.port || (typeof location !== 'undefined' && location.port\n      ? location.port\n      : (this.secure ? 443 : 80));\n  this.query = opts.query || {};\n  if ('string' === typeof this.query) this.query = parseqs.decode(this.query);\n  this.upgrade = false !== opts.upgrade;\n  this.path = (opts.path || '/engine.io').replace(/\\/$/, '') + '/';\n  this.forceJSONP = !!opts.forceJSONP;\n  this.jsonp = false !== opts.jsonp;\n  this.forceBase64 = !!opts.forceBase64;\n  this.enablesXDR = !!opts.enablesXDR;\n  this.withCredentials = false !== opts.withCredentials;\n  this.timestampParam = opts.timestampParam || 't';\n  this.timestampRequests = opts.timestampRequests;\n  this.transports = opts.transports || ['polling', 'websocket'];\n  this.transportOptions = opts.transportOptions || {};\n  this.readyState = '';\n  this.writeBuffer = [];\n  this.prevBufferLen = 0;\n  this.policyPort = opts.policyPort || 843;\n  this.rememberUpgrade = opts.rememberUpgrade || false;\n  this.binaryType = null;\n  this.onlyBinaryUpgrades = opts.onlyBinaryUpgrades;\n  this.perMessageDeflate = false !== opts.perMessageDeflate ? (opts.perMessageDeflate || {}) : false;\n\n  if (true === this.perMessageDeflate) this.perMessageDeflate = {};\n  if (this.perMessageDeflate && null == this.perMessageDeflate.threshold) {\n    this.perMessageDeflate.threshold = 1024;\n  }\n\n  // SSL options for Node.js client\n  this.pfx = opts.pfx || undefined;\n  this.key = opts.key || undefined;\n  this.passphrase = opts.passphrase || undefined;\n  this.cert = opts.cert || undefined;\n  this.ca = opts.ca || undefined;\n  this.ciphers = opts.ciphers || undefined;\n  this.rejectUnauthorized = opts.rejectUnauthorized === undefined ? true : opts.rejectUnauthorized;\n  this.forceNode = !!opts.forceNode;\n\n  // detect ReactNative environment\n  this.isReactNative = (typeof navigator !== 'undefined' && typeof navigator.product === 'string' && navigator.product.toLowerCase() === 'reactnative');\n\n  // other options for Node.js or ReactNative client\n  if (typeof self === 'undefined' || this.isReactNative) {\n    if (opts.extraHeaders && Object.keys(opts.extraHeaders).length > 0) {\n      this.extraHeaders = opts.extraHeaders;\n    }\n\n    if (opts.localAddress) {\n      this.localAddress = opts.localAddress;\n    }\n  }\n\n  // set on handshake\n  this.id = null;\n  this.upgrades = null;\n  this.pingInterval = null;\n  this.pingTimeout = null;\n\n  // set on heartbeat\n  this.pingIntervalTimer = null;\n  this.pingTimeoutTimer = null;\n\n  this.open();\n}\n\nSocket.priorWebsocketSuccess = false;\n\n/**\n * Mix in `Emitter`.\n */\n\nEmitter(Socket.prototype);\n\n/**\n * Protocol version.\n *\n * @api public\n */\n\nSocket.protocol = parser.protocol; // this is an int\n\n/**\n * Expose deps for legacy compatibility\n * and standalone browser access.\n */\n\nSocket.Socket = Socket;\nSocket.Transport = require('./transport');\nSocket.transports = require('./transports/index');\nSocket.parser = require('engine.io-parser');\n\n/**\n * Creates transport of the given type.\n *\n * @param {String} transport name\n * @return {Transport}\n * @api private\n */\n\nSocket.prototype.createTransport = function (name) {\n  debug('creating transport \"%s\"', name);\n  var query = clone(this.query);\n\n  // append engine.io protocol identifier\n  query.EIO = parser.protocol;\n\n  // transport name\n  query.transport = name;\n\n  // per-transport options\n  var options = this.transportOptions[name] || {};\n\n  // session id if we already have one\n  if (this.id) query.sid = this.id;\n\n  var transport = new transports[name]({\n    query: query,\n    socket: this,\n    agent: options.agent || this.agent,\n    hostname: options.hostname || this.hostname,\n    port: options.port || this.port,\n    secure: options.secure || this.secure,\n    path: options.path || this.path,\n    forceJSONP: options.forceJSONP || this.forceJSONP,\n    jsonp: options.jsonp || this.jsonp,\n    forceBase64: options.forceBase64 || this.forceBase64,\n    enablesXDR: options.enablesXDR || this.enablesXDR,\n    withCredentials: options.withCredentials || this.withCredentials,\n    timestampRequests: options.timestampRequests || this.timestampRequests,\n    timestampParam: options.timestampParam || this.timestampParam,\n    policyPort: options.policyPort || this.policyPort,\n    pfx: options.pfx || this.pfx,\n    key: options.key || this.key,\n    passphrase: options.passphrase || this.passphrase,\n    cert: options.cert || this.cert,\n    ca: options.ca || this.ca,\n    ciphers: options.ciphers || this.ciphers,\n    rejectUnauthorized: options.rejectUnauthorized || this.rejectUnauthorized,\n    perMessageDeflate: options.perMessageDeflate || this.perMessageDeflate,\n    extraHeaders: options.extraHeaders || this.extraHeaders,\n    forceNode: options.forceNode || this.forceNode,\n    localAddress: options.localAddress || this.localAddress,\n    requestTimeout: options.requestTimeout || this.requestTimeout,\n    protocols: options.protocols || void (0),\n    isReactNative: this.isReactNative\n  });\n\n  return transport;\n};\n\nfunction clone (obj) {\n  var o = {};\n  for (var i in obj) {\n    if (obj.hasOwnProperty(i)) {\n      o[i] = obj[i];\n    }\n  }\n  return o;\n}\n\n/**\n * Initializes transport to use and starts probe.\n *\n * @api private\n */\nSocket.prototype.open = function () {\n  var transport;\n  if (this.rememberUpgrade && Socket.priorWebsocketSuccess && this.transports.indexOf('websocket') !== -1) {\n    transport = 'websocket';\n  } else if (0 === this.transports.length) {\n    // Emit error on next tick so it can be listened to\n    var self = this;\n    setTimeout(function () {\n      self.emit('error', 'No transports available');\n    }, 0);\n    return;\n  } else {\n    transport = this.transports[0];\n  }\n  this.readyState = 'opening';\n\n  // Retry with the next transport if the transport is disabled (jsonp: false)\n  try {\n    transport = this.createTransport(transport);\n  } catch (e) {\n    this.transports.shift();\n    this.open();\n    return;\n  }\n\n  transport.open();\n  this.setTransport(transport);\n};\n\n/**\n * Sets the current transport. Disables the existing one (if any).\n *\n * @api private\n */\n\nSocket.prototype.setTransport = function (transport) {\n  debug('setting transport %s', transport.name);\n  var self = this;\n\n  if (this.transport) {\n    debug('clearing existing transport %s', this.transport.name);\n    this.transport.removeAllListeners();\n  }\n\n  // set up transport\n  this.transport = transport;\n\n  // set up transport listeners\n  transport\n  .on('drain', function () {\n    self.onDrain();\n  })\n  .on('packet', function (packet) {\n    self.onPacket(packet);\n  })\n  .on('error', function (e) {\n    self.onError(e);\n  })\n  .on('close', function () {\n    self.onClose('transport close');\n  });\n};\n\n/**\n * Probes a transport.\n *\n * @param {String} transport name\n * @api private\n */\n\nSocket.prototype.probe = function (name) {\n  debug('probing transport \"%s\"', name);\n  var transport = this.createTransport(name, { probe: 1 });\n  var failed = false;\n  var self = this;\n\n  Socket.priorWebsocketSuccess = false;\n\n  function onTransportOpen () {\n    if (self.onlyBinaryUpgrades) {\n      var upgradeLosesBinary = !this.supportsBinary && self.transport.supportsBinary;\n      failed = failed || upgradeLosesBinary;\n    }\n    if (failed) return;\n\n    debug('probe transport \"%s\" opened', name);\n    transport.send([{ type: 'ping', data: 'probe' }]);\n    transport.once('packet', function (msg) {\n      if (failed) return;\n      if ('pong' === msg.type && 'probe' === msg.data) {\n        debug('probe transport \"%s\" pong', name);\n        self.upgrading = true;\n        self.emit('upgrading', transport);\n        if (!transport) return;\n        Socket.priorWebsocketSuccess = 'websocket' === transport.name;\n\n        debug('pausing current transport \"%s\"', self.transport.name);\n        self.transport.pause(function () {\n          if (failed) return;\n          if ('closed' === self.readyState) return;\n          debug('changing transport and sending upgrade packet');\n\n          cleanup();\n\n          self.setTransport(transport);\n          transport.send([{ type: 'upgrade' }]);\n          self.emit('upgrade', transport);\n          transport = null;\n          self.upgrading = false;\n          self.flush();\n        });\n      } else {\n        debug('probe transport \"%s\" failed', name);\n        var err = new Error('probe error');\n        err.transport = transport.name;\n        self.emit('upgradeError', err);\n      }\n    });\n  }\n\n  function freezeTransport () {\n    if (failed) return;\n\n    // Any callback called by transport should be ignored since now\n    failed = true;\n\n    cleanup();\n\n    transport.close();\n    transport = null;\n  }\n\n  // Handle any error that happens while probing\n  function onerror (err) {\n    var error = new Error('probe error: ' + err);\n    error.transport = transport.name;\n\n    freezeTransport();\n\n    debug('probe transport \"%s\" failed because of error: %s', name, err);\n\n    self.emit('upgradeError', error);\n  }\n\n  function onTransportClose () {\n    onerror('transport closed');\n  }\n\n  // When the socket is closed while we're probing\n  function onclose () {\n    onerror('socket closed');\n  }\n\n  // When the socket is upgraded while we're probing\n  function onupgrade (to) {\n    if (transport && to.name !== transport.name) {\n      debug('\"%s\" works - aborting \"%s\"', to.name, transport.name);\n      freezeTransport();\n    }\n  }\n\n  // Remove all listeners on the transport and on self\n  function cleanup () {\n    transport.removeListener('open', onTransportOpen);\n    transport.removeListener('error', onerror);\n    transport.removeListener('close', onTransportClose);\n    self.removeListener('close', onclose);\n    self.removeListener('upgrading', onupgrade);\n  }\n\n  transport.once('open', onTransportOpen);\n  transport.once('error', onerror);\n  transport.once('close', onTransportClose);\n\n  this.once('close', onclose);\n  this.once('upgrading', onupgrade);\n\n  transport.open();\n};\n\n/**\n * Called when connection is deemed open.\n *\n * @api public\n */\n\nSocket.prototype.onOpen = function () {\n  debug('socket open');\n  this.readyState = 'open';\n  Socket.priorWebsocketSuccess = 'websocket' === this.transport.name;\n  this.emit('open');\n  this.flush();\n\n  // we check for `readyState` in case an `open`\n  // listener already closed the socket\n  if ('open' === this.readyState && this.upgrade && this.transport.pause) {\n    debug('starting upgrade probes');\n    for (var i = 0, l = this.upgrades.length; i < l; i++) {\n      this.probe(this.upgrades[i]);\n    }\n  }\n};\n\n/**\n * Handles a packet.\n *\n * @api private\n */\n\nSocket.prototype.onPacket = function (packet) {\n  if ('opening' === this.readyState || 'open' === this.readyState ||\n      'closing' === this.readyState) {\n    debug('socket receive: type \"%s\", data \"%s\"', packet.type, packet.data);\n\n    this.emit('packet', packet);\n\n    // Socket is live - any packet counts\n    this.emit('heartbeat');\n\n    switch (packet.type) {\n      case 'open':\n        this.onHandshake(JSON.parse(packet.data));\n        break;\n\n      case 'pong':\n        this.setPing();\n        this.emit('pong');\n        break;\n\n      case 'error':\n        var err = new Error('server error');\n        err.code = packet.data;\n        this.onError(err);\n        break;\n\n      case 'message':\n        this.emit('data', packet.data);\n        this.emit('message', packet.data);\n        break;\n    }\n  } else {\n    debug('packet received with socket readyState \"%s\"', this.readyState);\n  }\n};\n\n/**\n * Called upon handshake completion.\n *\n * @param {Object} handshake obj\n * @api private\n */\n\nSocket.prototype.onHandshake = function (data) {\n  this.emit('handshake', data);\n  this.id = data.sid;\n  this.transport.query.sid = data.sid;\n  this.upgrades = this.filterUpgrades(data.upgrades);\n  this.pingInterval = data.pingInterval;\n  this.pingTimeout = data.pingTimeout;\n  this.onOpen();\n  // In case open handler closes socket\n  if ('closed' === this.readyState) return;\n  this.setPing();\n\n  // Prolong liveness of socket on heartbeat\n  this.removeListener('heartbeat', this.onHeartbeat);\n  this.on('heartbeat', this.onHeartbeat);\n};\n\n/**\n * Resets ping timeout.\n *\n * @api private\n */\n\nSocket.prototype.onHeartbeat = function (timeout) {\n  clearTimeout(this.pingTimeoutTimer);\n  var self = this;\n  self.pingTimeoutTimer = setTimeout(function () {\n    if ('closed' === self.readyState) return;\n    self.onClose('ping timeout');\n  }, timeout || (self.pingInterval + self.pingTimeout));\n};\n\n/**\n * Pings server every `this.pingInterval` and expects response\n * within `this.pingTimeout` or closes connection.\n *\n * @api private\n */\n\nSocket.prototype.setPing = function () {\n  var self = this;\n  clearTimeout(self.pingIntervalTimer);\n  self.pingIntervalTimer = setTimeout(function () {\n    debug('writing ping packet - expecting pong within %sms', self.pingTimeout);\n    self.ping();\n    self.onHeartbeat(self.pingTimeout);\n  }, self.pingInterval);\n};\n\n/**\n* Sends a ping packet.\n*\n* @api private\n*/\n\nSocket.prototype.ping = function () {\n  var self = this;\n  this.sendPacket('ping', function () {\n    self.emit('ping');\n  });\n};\n\n/**\n * Called on `drain` event\n *\n * @api private\n */\n\nSocket.prototype.onDrain = function () {\n  this.writeBuffer.splice(0, this.prevBufferLen);\n\n  // setting prevBufferLen = 0 is very important\n  // for example, when upgrading, upgrade packet is sent over,\n  // and a nonzero prevBufferLen could cause problems on `drain`\n  this.prevBufferLen = 0;\n\n  if (0 === this.writeBuffer.length) {\n    this.emit('drain');\n  } else {\n    this.flush();\n  }\n};\n\n/**\n * Flush write buffers.\n *\n * @api private\n */\n\nSocket.prototype.flush = function () {\n  if ('closed' !== this.readyState && this.transport.writable &&\n    !this.upgrading && this.writeBuffer.length) {\n    debug('flushing %d packets in socket', this.writeBuffer.length);\n    this.transport.send(this.writeBuffer);\n    // keep track of current length of writeBuffer\n    // splice writeBuffer and callbackBuffer on `drain`\n    this.prevBufferLen = this.writeBuffer.length;\n    this.emit('flush');\n  }\n};\n\n/**\n * Sends a message.\n *\n * @param {String} message.\n * @param {Function} callback function.\n * @param {Object} options.\n * @return {Socket} for chaining.\n * @api public\n */\n\nSocket.prototype.write =\nSocket.prototype.send = function (msg, options, fn) {\n  this.sendPacket('message', msg, options, fn);\n  return this;\n};\n\n/**\n * Sends a packet.\n *\n * @param {String} packet type.\n * @param {String} data.\n * @param {Object} options.\n * @param {Function} callback function.\n * @api private\n */\n\nSocket.prototype.sendPacket = function (type, data, options, fn) {\n  if ('function' === typeof data) {\n    fn = data;\n    data = undefined;\n  }\n\n  if ('function' === typeof options) {\n    fn = options;\n    options = null;\n  }\n\n  if ('closing' === this.readyState || 'closed' === this.readyState) {\n    return;\n  }\n\n  options = options || {};\n  options.compress = false !== options.compress;\n\n  var packet = {\n    type: type,\n    data: data,\n    options: options\n  };\n  this.emit('packetCreate', packet);\n  this.writeBuffer.push(packet);\n  if (fn) this.once('flush', fn);\n  this.flush();\n};\n\n/**\n * Closes the connection.\n *\n * @api private\n */\n\nSocket.prototype.close = function () {\n  if ('opening' === this.readyState || 'open' === this.readyState) {\n    this.readyState = 'closing';\n\n    var self = this;\n\n    if (this.writeBuffer.length) {\n      this.once('drain', function () {\n        if (this.upgrading) {\n          waitForUpgrade();\n        } else {\n          close();\n        }\n      });\n    } else if (this.upgrading) {\n      waitForUpgrade();\n    } else {\n      close();\n    }\n  }\n\n  function close () {\n    self.onClose('forced close');\n    debug('socket closing - telling transport to close');\n    self.transport.close();\n  }\n\n  function cleanupAndClose () {\n    self.removeListener('upgrade', cleanupAndClose);\n    self.removeListener('upgradeError', cleanupAndClose);\n    close();\n  }\n\n  function waitForUpgrade () {\n    // wait for upgrade to finish since we can't send packets while pausing a transport\n    self.once('upgrade', cleanupAndClose);\n    self.once('upgradeError', cleanupAndClose);\n  }\n\n  return this;\n};\n\n/**\n * Called upon transport error\n *\n * @api private\n */\n\nSocket.prototype.onError = function (err) {\n  debug('socket error %j', err);\n  Socket.priorWebsocketSuccess = false;\n  this.emit('error', err);\n  this.onClose('transport error', err);\n};\n\n/**\n * Called upon transport close.\n *\n * @api private\n */\n\nSocket.prototype.onClose = function (reason, desc) {\n  if ('opening' === this.readyState || 'open' === this.readyState || 'closing' === this.readyState) {\n    debug('socket close with reason: \"%s\"', reason);\n    var self = this;\n\n    // clear timers\n    clearTimeout(this.pingIntervalTimer);\n    clearTimeout(this.pingTimeoutTimer);\n\n    // stop event from firing again for transport\n    this.transport.removeAllListeners('close');\n\n    // ensure transport won't stay open\n    this.transport.close();\n\n    // ignore further transport communication\n    this.transport.removeAllListeners();\n\n    // set ready state\n    this.readyState = 'closed';\n\n    // clear session id\n    this.id = null;\n\n    // emit close event\n    this.emit('close', reason, desc);\n\n    // clean buffers after, so users can still\n    // grab the buffers on `close` event\n    self.writeBuffer = [];\n    self.prevBufferLen = 0;\n  }\n};\n\n/**\n * Filters upgrades, returning only those matching client transports.\n *\n * @param {Array} server upgrades\n * @api private\n *\n */\n\nSocket.prototype.filterUpgrades = function (upgrades) {\n  var filteredUpgrades = [];\n  for (var i = 0, j = upgrades.length; i < j; i++) {\n    if (~index(this.transports, upgrades[i])) filteredUpgrades.push(upgrades[i]);\n  }\n  return filteredUpgrades;\n};\n","/**\n * Module dependencies.\n */\n\nvar parser = require('engine.io-parser');\nvar Emitter = require('component-emitter');\n\n/**\n * Module exports.\n */\n\nmodule.exports = Transport;\n\n/**\n * Transport abstract constructor.\n *\n * @param {Object} options.\n * @api private\n */\n\nfunction Transport (opts) {\n  this.path = opts.path;\n  this.hostname = opts.hostname;\n  this.port = opts.port;\n  this.secure = opts.secure;\n  this.query = opts.query;\n  this.timestampParam = opts.timestampParam;\n  this.timestampRequests = opts.timestampRequests;\n  this.readyState = '';\n  this.agent = opts.agent || false;\n  this.socket = opts.socket;\n  this.enablesXDR = opts.enablesXDR;\n  this.withCredentials = opts.withCredentials;\n\n  // SSL options for Node.js client\n  this.pfx = opts.pfx;\n  this.key = opts.key;\n  this.passphrase = opts.passphrase;\n  this.cert = opts.cert;\n  this.ca = opts.ca;\n  this.ciphers = opts.ciphers;\n  this.rejectUnauthorized = opts.rejectUnauthorized;\n  this.forceNode = opts.forceNode;\n\n  // results of ReactNative environment detection\n  this.isReactNative = opts.isReactNative;\n\n  // other options for Node.js client\n  this.extraHeaders = opts.extraHeaders;\n  this.localAddress = opts.localAddress;\n}\n\n/**\n * Mix in `Emitter`.\n */\n\nEmitter(Transport.prototype);\n\n/**\n * Emits an error.\n *\n * @param {String} str\n * @return {Transport} for chaining\n * @api public\n */\n\nTransport.prototype.onError = function (msg, desc) {\n  var err = new Error(msg);\n  err.type = 'TransportError';\n  err.description = desc;\n  this.emit('error', err);\n  return this;\n};\n\n/**\n * Opens the transport.\n *\n * @api public\n */\n\nTransport.prototype.open = function () {\n  if ('closed' === this.readyState || '' === this.readyState) {\n    this.readyState = 'opening';\n    this.doOpen();\n  }\n\n  return this;\n};\n\n/**\n * Closes the transport.\n *\n * @api private\n */\n\nTransport.prototype.close = function () {\n  if ('opening' === this.readyState || 'open' === this.readyState) {\n    this.doClose();\n    this.onClose();\n  }\n\n  return this;\n};\n\n/**\n * Sends multiple packets.\n *\n * @param {Array} packets\n * @api private\n */\n\nTransport.prototype.send = function (packets) {\n  if ('open' === this.readyState) {\n    this.write(packets);\n  } else {\n    throw new Error('Transport not open');\n  }\n};\n\n/**\n * Called upon open\n *\n * @api private\n */\n\nTransport.prototype.onOpen = function () {\n  this.readyState = 'open';\n  this.writable = true;\n  this.emit('open');\n};\n\n/**\n * Called with data.\n *\n * @param {String} data\n * @api private\n */\n\nTransport.prototype.onData = function (data) {\n  var packet = parser.decodePacket(data, this.socket.binaryType);\n  this.onPacket(packet);\n};\n\n/**\n * Called with a decoded packet.\n */\n\nTransport.prototype.onPacket = function (packet) {\n  this.emit('packet', packet);\n};\n\n/**\n * Called upon close.\n *\n * @api private\n */\n\nTransport.prototype.onClose = function () {\n  this.readyState = 'closed';\n  this.emit('close');\n};\n","/**\n * Module dependencies\n */\n\nvar XMLHttpRequest = require('./xmlhttprequest');\nvar XHR = require('./polling-xhr');\nvar JSONP = require('./polling-jsonp');\nvar websocket = require('./websocket');\n\n/**\n * Export transports.\n */\n\nexports.polling = polling;\nexports.websocket = websocket;\n\n/**\n * Polling transport polymorphic constructor.\n * Decides on xhr vs jsonp based on feature detection.\n *\n * @api private\n */\n\nfunction polling (opts) {\n  var xhr;\n  var xd = false;\n  var xs = false;\n  var jsonp = false !== opts.jsonp;\n\n  if (typeof location !== 'undefined') {\n    var isSSL = 'https:' === location.protocol;\n    var port = location.port;\n\n    // some user agents have empty `location.port`\n    if (!port) {\n      port = isSSL ? 443 : 80;\n    }\n\n    xd = opts.hostname !== location.hostname || port !== opts.port;\n    xs = opts.secure !== isSSL;\n  }\n\n  opts.xdomain = xd;\n  opts.xscheme = xs;\n  xhr = new XMLHttpRequest(opts);\n\n  if ('open' in xhr && !opts.forceJSONP) {\n    return new XHR(opts);\n  } else {\n    if (!jsonp) throw new Error('JSONP disabled');\n    return new JSONP(opts);\n  }\n}\n","/**\n * Module requirements.\n */\n\nvar Polling = require('./polling');\nvar inherit = require('component-inherit');\nvar globalThis = require('../globalThis');\n\n/**\n * Module exports.\n */\n\nmodule.exports = JSONPPolling;\n\n/**\n * Cached regular expressions.\n */\n\nvar rNewline = /\\n/g;\nvar rEscapedNewline = /\\\\n/g;\n\n/**\n * Global JSONP callbacks.\n */\n\nvar callbacks;\n\n/**\n * Noop.\n */\n\nfunction empty () { }\n\n/**\n * JSONP Polling constructor.\n *\n * @param {Object} opts.\n * @api public\n */\n\nfunction JSONPPolling (opts) {\n  Polling.call(this, opts);\n\n  this.query = this.query || {};\n\n  // define global callbacks array if not present\n  // we do this here (lazily) to avoid unneeded global pollution\n  if (!callbacks) {\n    // we need to consider multiple engines in the same page\n    callbacks = globalThis.___eio = (globalThis.___eio || []);\n  }\n\n  // callback identifier\n  this.index = callbacks.length;\n\n  // add callback to jsonp global\n  var self = this;\n  callbacks.push(function (msg) {\n    self.onData(msg);\n  });\n\n  // append to query string\n  this.query.j = this.index;\n\n  // prevent spurious errors from being emitted when the window is unloaded\n  if (typeof addEventListener === 'function') {\n    addEventListener('beforeunload', function () {\n      if (self.script) self.script.onerror = empty;\n    }, false);\n  }\n}\n\n/**\n * Inherits from Polling.\n */\n\ninherit(JSONPPolling, Polling);\n\n/*\n * JSONP only supports binary as base64 encoded strings\n */\n\nJSONPPolling.prototype.supportsBinary = false;\n\n/**\n * Closes the socket.\n *\n * @api private\n */\n\nJSONPPolling.prototype.doClose = function () {\n  if (this.script) {\n    this.script.parentNode.removeChild(this.script);\n    this.script = null;\n  }\n\n  if (this.form) {\n    this.form.parentNode.removeChild(this.form);\n    this.form = null;\n    this.iframe = null;\n  }\n\n  Polling.prototype.doClose.call(this);\n};\n\n/**\n * Starts a poll cycle.\n *\n * @api private\n */\n\nJSONPPolling.prototype.doPoll = function () {\n  var self = this;\n  var script = document.createElement('script');\n\n  if (this.script) {\n    this.script.parentNode.removeChild(this.script);\n    this.script = null;\n  }\n\n  script.async = true;\n  script.src = this.uri();\n  script.onerror = function (e) {\n    self.onError('jsonp poll error', e);\n  };\n\n  var insertAt = document.getElementsByTagName('script')[0];\n  if (insertAt) {\n    insertAt.parentNode.insertBefore(script, insertAt);\n  } else {\n    (document.head || document.body).appendChild(script);\n  }\n  this.script = script;\n\n  var isUAgecko = 'undefined' !== typeof navigator && /gecko/i.test(navigator.userAgent);\n\n  if (isUAgecko) {\n    setTimeout(function () {\n      var iframe = document.createElement('iframe');\n      document.body.appendChild(iframe);\n      document.body.removeChild(iframe);\n    }, 100);\n  }\n};\n\n/**\n * Writes with a hidden iframe.\n *\n * @param {String} data to send\n * @param {Function} called upon flush.\n * @api private\n */\n\nJSONPPolling.prototype.doWrite = function (data, fn) {\n  var self = this;\n\n  if (!this.form) {\n    var form = document.createElement('form');\n    var area = document.createElement('textarea');\n    var id = this.iframeId = 'eio_iframe_' + this.index;\n    var iframe;\n\n    form.className = 'socketio';\n    form.style.position = 'absolute';\n    form.style.top = '-1000px';\n    form.style.left = '-1000px';\n    form.target = id;\n    form.method = 'POST';\n    form.setAttribute('accept-charset', 'utf-8');\n    area.name = 'd';\n    form.appendChild(area);\n    document.body.appendChild(form);\n\n    this.form = form;\n    this.area = area;\n  }\n\n  this.form.action = this.uri();\n\n  function complete () {\n    initIframe();\n    fn();\n  }\n\n  function initIframe () {\n    if (self.iframe) {\n      try {\n        self.form.removeChild(self.iframe);\n      } catch (e) {\n        self.onError('jsonp polling iframe removal error', e);\n      }\n    }\n\n    try {\n      // ie6 dynamic iframes with target=\"\" support (thanks Chris Lambacher)\n      var html = '<iframe src=\"javascript:0\" name=\"' + self.iframeId + '\">';\n      iframe = document.createElement(html);\n    } catch (e) {\n      iframe = document.createElement('iframe');\n      iframe.name = self.iframeId;\n      iframe.src = 'javascript:0';\n    }\n\n    iframe.id = self.iframeId;\n\n    self.form.appendChild(iframe);\n    self.iframe = iframe;\n  }\n\n  initIframe();\n\n  // escape \\n to prevent it from being converted into \\r\\n by some UAs\n  // double escaping is required for escaped new lines because unescaping of new lines can be done safely on server-side\n  data = data.replace(rEscapedNewline, '\\\\\\n');\n  this.area.value = data.replace(rNewline, '\\\\n');\n\n  try {\n    this.form.submit();\n  } catch (e) {}\n\n  if (this.iframe.attachEvent) {\n    this.iframe.onreadystatechange = function () {\n      if (self.iframe.readyState === 'complete') {\n        complete();\n      }\n    };\n  } else {\n    this.iframe.onload = complete;\n  }\n};\n","/* global attachEvent */\n\n/**\n * Module requirements.\n */\n\nvar XMLHttpRequest = require('./xmlhttprequest');\nvar Polling = require('./polling');\nvar Emitter = require('component-emitter');\nvar inherit = require('component-inherit');\nvar debug = require('debug')('engine.io-client:polling-xhr');\nvar globalThis = require('../globalThis');\n\n/**\n * Module exports.\n */\n\nmodule.exports = XHR;\nmodule.exports.Request = Request;\n\n/**\n * Empty function\n */\n\nfunction empty () {}\n\n/**\n * XHR Polling constructor.\n *\n * @param {Object} opts\n * @api public\n */\n\nfunction XHR (opts) {\n  Polling.call(this, opts);\n  this.requestTimeout = opts.requestTimeout;\n  this.extraHeaders = opts.extraHeaders;\n\n  if (typeof location !== 'undefined') {\n    var isSSL = 'https:' === location.protocol;\n    var port = location.port;\n\n    // some user agents have empty `location.port`\n    if (!port) {\n      port = isSSL ? 443 : 80;\n    }\n\n    this.xd = (typeof location !== 'undefined' && opts.hostname !== location.hostname) ||\n      port !== opts.port;\n    this.xs = opts.secure !== isSSL;\n  }\n}\n\n/**\n * Inherits from Polling.\n */\n\ninherit(XHR, Polling);\n\n/**\n * XHR supports binary\n */\n\nXHR.prototype.supportsBinary = true;\n\n/**\n * Creates a request.\n *\n * @param {String} method\n * @api private\n */\n\nXHR.prototype.request = function (opts) {\n  opts = opts || {};\n  opts.uri = this.uri();\n  opts.xd = this.xd;\n  opts.xs = this.xs;\n  opts.agent = this.agent || false;\n  opts.supportsBinary = this.supportsBinary;\n  opts.enablesXDR = this.enablesXDR;\n  opts.withCredentials = this.withCredentials;\n\n  // SSL options for Node.js client\n  opts.pfx = this.pfx;\n  opts.key = this.key;\n  opts.passphrase = this.passphrase;\n  opts.cert = this.cert;\n  opts.ca = this.ca;\n  opts.ciphers = this.ciphers;\n  opts.rejectUnauthorized = this.rejectUnauthorized;\n  opts.requestTimeout = this.requestTimeout;\n\n  // other options for Node.js client\n  opts.extraHeaders = this.extraHeaders;\n\n  return new Request(opts);\n};\n\n/**\n * Sends data.\n *\n * @param {String} data to send.\n * @param {Function} called upon flush.\n * @api private\n */\n\nXHR.prototype.doWrite = function (data, fn) {\n  var isBinary = typeof data !== 'string' && data !== undefined;\n  var req = this.request({ method: 'POST', data: data, isBinary: isBinary });\n  var self = this;\n  req.on('success', fn);\n  req.on('error', function (err) {\n    self.onError('xhr post error', err);\n  });\n  this.sendXhr = req;\n};\n\n/**\n * Starts a poll cycle.\n *\n * @api private\n */\n\nXHR.prototype.doPoll = function () {\n  debug('xhr poll');\n  var req = this.request();\n  var self = this;\n  req.on('data', function (data) {\n    self.onData(data);\n  });\n  req.on('error', function (err) {\n    self.onError('xhr poll error', err);\n  });\n  this.pollXhr = req;\n};\n\n/**\n * Request constructor\n *\n * @param {Object} options\n * @api public\n */\n\nfunction Request (opts) {\n  this.method = opts.method || 'GET';\n  this.uri = opts.uri;\n  this.xd = !!opts.xd;\n  this.xs = !!opts.xs;\n  this.async = false !== opts.async;\n  this.data = undefined !== opts.data ? opts.data : null;\n  this.agent = opts.agent;\n  this.isBinary = opts.isBinary;\n  this.supportsBinary = opts.supportsBinary;\n  this.enablesXDR = opts.enablesXDR;\n  this.withCredentials = opts.withCredentials;\n  this.requestTimeout = opts.requestTimeout;\n\n  // SSL options for Node.js client\n  this.pfx = opts.pfx;\n  this.key = opts.key;\n  this.passphrase = opts.passphrase;\n  this.cert = opts.cert;\n  this.ca = opts.ca;\n  this.ciphers = opts.ciphers;\n  this.rejectUnauthorized = opts.rejectUnauthorized;\n\n  // other options for Node.js client\n  this.extraHeaders = opts.extraHeaders;\n\n  this.create();\n}\n\n/**\n * Mix in `Emitter`.\n */\n\nEmitter(Request.prototype);\n\n/**\n * Creates the XHR object and sends the request.\n *\n * @api private\n */\n\nRequest.prototype.create = function () {\n  var opts = { agent: this.agent, xdomain: this.xd, xscheme: this.xs, enablesXDR: this.enablesXDR };\n\n  // SSL options for Node.js client\n  opts.pfx = this.pfx;\n  opts.key = this.key;\n  opts.passphrase = this.passphrase;\n  opts.cert = this.cert;\n  opts.ca = this.ca;\n  opts.ciphers = this.ciphers;\n  opts.rejectUnauthorized = this.rejectUnauthorized;\n\n  var xhr = this.xhr = new XMLHttpRequest(opts);\n  var self = this;\n\n  try {\n    debug('xhr open %s: %s', this.method, this.uri);\n    xhr.open(this.method, this.uri, this.async);\n    try {\n      if (this.extraHeaders) {\n        xhr.setDisableHeaderCheck && xhr.setDisableHeaderCheck(true);\n        for (var i in this.extraHeaders) {\n          if (this.extraHeaders.hasOwnProperty(i)) {\n            xhr.setRequestHeader(i, this.extraHeaders[i]);\n          }\n        }\n      }\n    } catch (e) {}\n\n    if ('POST' === this.method) {\n      try {\n        if (this.isBinary) {\n          xhr.setRequestHeader('Content-type', 'application/octet-stream');\n        } else {\n          xhr.setRequestHeader('Content-type', 'text/plain;charset=UTF-8');\n        }\n      } catch (e) {}\n    }\n\n    try {\n      xhr.setRequestHeader('Accept', '*/*');\n    } catch (e) {}\n\n    // ie6 check\n    if ('withCredentials' in xhr) {\n      xhr.withCredentials = this.withCredentials;\n    }\n\n    if (this.requestTimeout) {\n      xhr.timeout = this.requestTimeout;\n    }\n\n    if (this.hasXDR()) {\n      xhr.onload = function () {\n        self.onLoad();\n      };\n      xhr.onerror = function () {\n        self.onError(xhr.responseText);\n      };\n    } else {\n      xhr.onreadystatechange = function () {\n        if (xhr.readyState === 2) {\n          try {\n            var contentType = xhr.getResponseHeader('Content-Type');\n            if (self.supportsBinary && contentType === 'application/octet-stream' || contentType === 'application/octet-stream; charset=UTF-8') {\n              xhr.responseType = 'arraybuffer';\n            }\n          } catch (e) {}\n        }\n        if (4 !== xhr.readyState) return;\n        if (200 === xhr.status || 1223 === xhr.status) {\n          self.onLoad();\n        } else {\n          // make sure the `error` event handler that's user-set\n          // does not throw in the same tick and gets caught here\n          setTimeout(function () {\n            self.onError(typeof xhr.status === 'number' ? xhr.status : 0);\n          }, 0);\n        }\n      };\n    }\n\n    debug('xhr data %s', this.data);\n    xhr.send(this.data);\n  } catch (e) {\n    // Need to defer since .create() is called directly fhrom the constructor\n    // and thus the 'error' event can only be only bound *after* this exception\n    // occurs.  Therefore, also, we cannot throw here at all.\n    setTimeout(function () {\n      self.onError(e);\n    }, 0);\n    return;\n  }\n\n  if (typeof document !== 'undefined') {\n    this.index = Request.requestsCount++;\n    Request.requests[this.index] = this;\n  }\n};\n\n/**\n * Called upon successful response.\n *\n * @api private\n */\n\nRequest.prototype.onSuccess = function () {\n  this.emit('success');\n  this.cleanup();\n};\n\n/**\n * Called if we have data.\n *\n * @api private\n */\n\nRequest.prototype.onData = function (data) {\n  this.emit('data', data);\n  this.onSuccess();\n};\n\n/**\n * Called upon error.\n *\n * @api private\n */\n\nRequest.prototype.onError = function (err) {\n  this.emit('error', err);\n  this.cleanup(true);\n};\n\n/**\n * Cleans up house.\n *\n * @api private\n */\n\nRequest.prototype.cleanup = function (fromError) {\n  if ('undefined' === typeof this.xhr || null === this.xhr) {\n    return;\n  }\n  // xmlhttprequest\n  if (this.hasXDR()) {\n    this.xhr.onload = this.xhr.onerror = empty;\n  } else {\n    this.xhr.onreadystatechange = empty;\n  }\n\n  if (fromError) {\n    try {\n      this.xhr.abort();\n    } catch (e) {}\n  }\n\n  if (typeof document !== 'undefined') {\n    delete Request.requests[this.index];\n  }\n\n  this.xhr = null;\n};\n\n/**\n * Called upon load.\n *\n * @api private\n */\n\nRequest.prototype.onLoad = function () {\n  var data;\n  try {\n    var contentType;\n    try {\n      contentType = this.xhr.getResponseHeader('Content-Type');\n    } catch (e) {}\n    if (contentType === 'application/octet-stream' || contentType === 'application/octet-stream; charset=UTF-8') {\n      data = this.xhr.response || this.xhr.responseText;\n    } else {\n      data = this.xhr.responseText;\n    }\n  } catch (e) {\n    this.onError(e);\n  }\n  if (null != data) {\n    this.onData(data);\n  }\n};\n\n/**\n * Check if it has XDomainRequest.\n *\n * @api private\n */\n\nRequest.prototype.hasXDR = function () {\n  return typeof XDomainRequest !== 'undefined' && !this.xs && this.enablesXDR;\n};\n\n/**\n * Aborts the request.\n *\n * @api public\n */\n\nRequest.prototype.abort = function () {\n  this.cleanup();\n};\n\n/**\n * Aborts pending requests when unloading the window. This is needed to prevent\n * memory leaks (e.g. when using IE) and to ensure that no spurious error is\n * emitted.\n */\n\nRequest.requestsCount = 0;\nRequest.requests = {};\n\nif (typeof document !== 'undefined') {\n  if (typeof attachEvent === 'function') {\n    attachEvent('onunload', unloadHandler);\n  } else if (typeof addEventListener === 'function') {\n    var terminationEvent = 'onpagehide' in globalThis ? 'pagehide' : 'unload';\n    addEventListener(terminationEvent, unloadHandler, false);\n  }\n}\n\nfunction unloadHandler () {\n  for (var i in Request.requests) {\n    if (Request.requests.hasOwnProperty(i)) {\n      Request.requests[i].abort();\n    }\n  }\n}\n","/**\n * Module dependencies.\n */\n\nvar Transport = require('../transport');\nvar parseqs = require('parseqs');\nvar parser = require('engine.io-parser');\nvar inherit = require('component-inherit');\nvar yeast = require('yeast');\nvar debug = require('debug')('engine.io-client:polling');\n\n/**\n * Module exports.\n */\n\nmodule.exports = Polling;\n\n/**\n * Is XHR2 supported?\n */\n\nvar hasXHR2 = (function () {\n  var XMLHttpRequest = require('./xmlhttprequest');\n  var xhr = new XMLHttpRequest({ xdomain: false });\n  return null != xhr.responseType;\n})();\n\n/**\n * Polling interface.\n *\n * @param {Object} opts\n * @api private\n */\n\nfunction Polling (opts) {\n  var forceBase64 = (opts && opts.forceBase64);\n  if (!hasXHR2 || forceBase64) {\n    this.supportsBinary = false;\n  }\n  Transport.call(this, opts);\n}\n\n/**\n * Inherits from Transport.\n */\n\ninherit(Polling, Transport);\n\n/**\n * Transport name.\n */\n\nPolling.prototype.name = 'polling';\n\n/**\n * Opens the socket (triggers polling). We write a PING message to determine\n * when the transport is open.\n *\n * @api private\n */\n\nPolling.prototype.doOpen = function () {\n  this.poll();\n};\n\n/**\n * Pauses polling.\n *\n * @param {Function} callback upon buffers are flushed and transport is paused\n * @api private\n */\n\nPolling.prototype.pause = function (onPause) {\n  var self = this;\n\n  this.readyState = 'pausing';\n\n  function pause () {\n    debug('paused');\n    self.readyState = 'paused';\n    onPause();\n  }\n\n  if (this.polling || !this.writable) {\n    var total = 0;\n\n    if (this.polling) {\n      debug('we are currently polling - waiting to pause');\n      total++;\n      this.once('pollComplete', function () {\n        debug('pre-pause polling complete');\n        --total || pause();\n      });\n    }\n\n    if (!this.writable) {\n      debug('we are currently writing - waiting to pause');\n      total++;\n      this.once('drain', function () {\n        debug('pre-pause writing complete');\n        --total || pause();\n      });\n    }\n  } else {\n    pause();\n  }\n};\n\n/**\n * Starts polling cycle.\n *\n * @api public\n */\n\nPolling.prototype.poll = function () {\n  debug('polling');\n  this.polling = true;\n  this.doPoll();\n  this.emit('poll');\n};\n\n/**\n * Overloads onData to detect payloads.\n *\n * @api private\n */\n\nPolling.prototype.onData = function (data) {\n  var self = this;\n  debug('polling got data %s', data);\n  var callback = function (packet, index, total) {\n    // if its the first message we consider the transport open\n    if ('opening' === self.readyState && packet.type === 'open') {\n      self.onOpen();\n    }\n\n    // if its a close packet, we close the ongoing requests\n    if ('close' === packet.type) {\n      self.onClose();\n      return false;\n    }\n\n    // otherwise bypass onData and handle the message\n    self.onPacket(packet);\n  };\n\n  // decode payload\n  parser.decodePayload(data, this.socket.binaryType, callback);\n\n  // if an event did not trigger closing\n  if ('closed' !== this.readyState) {\n    // if we got data we're not polling\n    this.polling = false;\n    this.emit('pollComplete');\n\n    if ('open' === this.readyState) {\n      this.poll();\n    } else {\n      debug('ignoring poll - transport state \"%s\"', this.readyState);\n    }\n  }\n};\n\n/**\n * For polling, send a close packet.\n *\n * @api private\n */\n\nPolling.prototype.doClose = function () {\n  var self = this;\n\n  function close () {\n    debug('writing close packet');\n    self.write([{ type: 'close' }]);\n  }\n\n  if ('open' === this.readyState) {\n    debug('transport open - closing');\n    close();\n  } else {\n    // in case we're trying to close while\n    // handshaking is in progress (GH-164)\n    debug('transport not open - deferring close');\n    this.once('open', close);\n  }\n};\n\n/**\n * Writes a packets payload.\n *\n * @param {Array} data packets\n * @param {Function} drain callback\n * @api private\n */\n\nPolling.prototype.write = function (packets) {\n  var self = this;\n  this.writable = false;\n  var callbackfn = function () {\n    self.writable = true;\n    self.emit('drain');\n  };\n\n  parser.encodePayload(packets, this.supportsBinary, function (data) {\n    self.doWrite(data, callbackfn);\n  });\n};\n\n/**\n * Generates uri for connection.\n *\n * @api private\n */\n\nPolling.prototype.uri = function () {\n  var query = this.query || {};\n  var schema = this.secure ? 'https' : 'http';\n  var port = '';\n\n  // cache busting is forced\n  if (false !== this.timestampRequests) {\n    query[this.timestampParam] = yeast();\n  }\n\n  if (!this.supportsBinary && !query.sid) {\n    query.b64 = 1;\n  }\n\n  query = parseqs.encode(query);\n\n  // avoid port if default for schema\n  if (this.port && (('https' === schema && Number(this.port) !== 443) ||\n     ('http' === schema && Number(this.port) !== 80))) {\n    port = ':' + this.port;\n  }\n\n  // prepend ? to query\n  if (query.length) {\n    query = '?' + query;\n  }\n\n  var ipv6 = this.hostname.indexOf(':') !== -1;\n  return schema + '://' + (ipv6 ? '[' + this.hostname + ']' : this.hostname) + port + this.path + query;\n};\n","/**\n * Module dependencies.\n */\n\nvar Transport = require('../transport');\nvar parser = require('engine.io-parser');\nvar parseqs = require('parseqs');\nvar inherit = require('component-inherit');\nvar yeast = require('yeast');\nvar debug = require('debug')('engine.io-client:websocket');\n\nvar BrowserWebSocket, NodeWebSocket;\n\nif (typeof WebSocket !== 'undefined') {\n  BrowserWebSocket = WebSocket;\n} else if (typeof self !== 'undefined') {\n  BrowserWebSocket = self.WebSocket || self.MozWebSocket;\n}\n\nif (typeof window === 'undefined') {\n  try {\n    NodeWebSocket = require('ws');\n  } catch (e) { }\n}\n\n/**\n * Get either the `WebSocket` or `MozWebSocket` globals\n * in the browser or try to resolve WebSocket-compatible\n * interface exposed by `ws` for Node-like environment.\n */\n\nvar WebSocketImpl = BrowserWebSocket || NodeWebSocket;\n\n/**\n * Module exports.\n */\n\nmodule.exports = WS;\n\n/**\n * WebSocket transport constructor.\n *\n * @api {Object} connection options\n * @api public\n */\n\nfunction WS (opts) {\n  var forceBase64 = (opts && opts.forceBase64);\n  if (forceBase64) {\n    this.supportsBinary = false;\n  }\n  this.perMessageDeflate = opts.perMessageDeflate;\n  this.usingBrowserWebSocket = BrowserWebSocket && !opts.forceNode;\n  this.protocols = opts.protocols;\n  if (!this.usingBrowserWebSocket) {\n    WebSocketImpl = NodeWebSocket;\n  }\n  Transport.call(this, opts);\n}\n\n/**\n * Inherits from Transport.\n */\n\ninherit(WS, Transport);\n\n/**\n * Transport name.\n *\n * @api public\n */\n\nWS.prototype.name = 'websocket';\n\n/*\n * WebSockets support binary\n */\n\nWS.prototype.supportsBinary = true;\n\n/**\n * Opens socket.\n *\n * @api private\n */\n\nWS.prototype.doOpen = function () {\n  if (!this.check()) {\n    // let probe timeout\n    return;\n  }\n\n  var uri = this.uri();\n  var protocols = this.protocols;\n\n  var opts = {};\n\n  if (!this.isReactNative) {\n    opts.agent = this.agent;\n    opts.perMessageDeflate = this.perMessageDeflate;\n\n    // SSL options for Node.js client\n    opts.pfx = this.pfx;\n    opts.key = this.key;\n    opts.passphrase = this.passphrase;\n    opts.cert = this.cert;\n    opts.ca = this.ca;\n    opts.ciphers = this.ciphers;\n    opts.rejectUnauthorized = this.rejectUnauthorized;\n  }\n\n  if (this.extraHeaders) {\n    opts.headers = this.extraHeaders;\n  }\n  if (this.localAddress) {\n    opts.localAddress = this.localAddress;\n  }\n\n  try {\n    this.ws =\n      this.usingBrowserWebSocket && !this.isReactNative\n        ? protocols\n          ? new WebSocketImpl(uri, protocols)\n          : new WebSocketImpl(uri)\n        : new WebSocketImpl(uri, protocols, opts);\n  } catch (err) {\n    return this.emit('error', err);\n  }\n\n  if (this.ws.binaryType === undefined) {\n    this.supportsBinary = false;\n  }\n\n  if (this.ws.supports && this.ws.supports.binary) {\n    this.supportsBinary = true;\n    this.ws.binaryType = 'nodebuffer';\n  } else {\n    this.ws.binaryType = 'arraybuffer';\n  }\n\n  this.addEventListeners();\n};\n\n/**\n * Adds event listeners to the socket\n *\n * @api private\n */\n\nWS.prototype.addEventListeners = function () {\n  var self = this;\n\n  this.ws.onopen = function () {\n    self.onOpen();\n  };\n  this.ws.onclose = function () {\n    self.onClose();\n  };\n  this.ws.onmessage = function (ev) {\n    self.onData(ev.data);\n  };\n  this.ws.onerror = function (e) {\n    self.onError('websocket error', e);\n  };\n};\n\n/**\n * Writes data to socket.\n *\n * @param {Array} array of packets.\n * @api private\n */\n\nWS.prototype.write = function (packets) {\n  var self = this;\n  this.writable = false;\n\n  // encodePacket efficient as it uses WS framing\n  // no need for encodePayload\n  var total = packets.length;\n  for (var i = 0, l = total; i < l; i++) {\n    (function (packet) {\n      parser.encodePacket(packet, self.supportsBinary, function (data) {\n        if (!self.usingBrowserWebSocket) {\n          // always create a new object (GH-437)\n          var opts = {};\n          if (packet.options) {\n            opts.compress = packet.options.compress;\n          }\n\n          if (self.perMessageDeflate) {\n            var len = 'string' === typeof data ? Buffer.byteLength(data) : data.length;\n            if (len < self.perMessageDeflate.threshold) {\n              opts.compress = false;\n            }\n          }\n        }\n\n        // Sometimes the websocket has already been closed but the browser didn't\n        // have a chance of informing us about it yet, in that case send will\n        // throw an error\n        try {\n          if (self.usingBrowserWebSocket) {\n            // TypeError is thrown when passing the second argument on Safari\n            self.ws.send(data);\n          } else {\n            self.ws.send(data, opts);\n          }\n        } catch (e) {\n          debug('websocket closed before onclose event');\n        }\n\n        --total || done();\n      });\n    })(packets[i]);\n  }\n\n  function done () {\n    self.emit('flush');\n\n    // fake drain\n    // defer to next tick to allow Socket to clear writeBuffer\n    setTimeout(function () {\n      self.writable = true;\n      self.emit('drain');\n    }, 0);\n  }\n};\n\n/**\n * Called upon close\n *\n * @api private\n */\n\nWS.prototype.onClose = function () {\n  Transport.prototype.onClose.call(this);\n};\n\n/**\n * Closes socket.\n *\n * @api private\n */\n\nWS.prototype.doClose = function () {\n  if (typeof this.ws !== 'undefined') {\n    this.ws.close();\n  }\n};\n\n/**\n * Generates uri for connection.\n *\n * @api private\n */\n\nWS.prototype.uri = function () {\n  var query = this.query || {};\n  var schema = this.secure ? 'wss' : 'ws';\n  var port = '';\n\n  // avoid port if default for schema\n  if (this.port && (('wss' === schema && Number(this.port) !== 443) ||\n    ('ws' === schema && Number(this.port) !== 80))) {\n    port = ':' + this.port;\n  }\n\n  // append timestamp to URI\n  if (this.timestampRequests) {\n    query[this.timestampParam] = yeast();\n  }\n\n  // communicate binary support capabilities\n  if (!this.supportsBinary) {\n    query.b64 = 1;\n  }\n\n  query = parseqs.encode(query);\n\n  // prepend ? to query\n  if (query.length) {\n    query = '?' + query;\n  }\n\n  var ipv6 = this.hostname.indexOf(':') !== -1;\n  return schema + '://' + (ipv6 ? '[' + this.hostname + ']' : this.hostname) + port + this.path + query;\n};\n\n/**\n * Feature detection for WebSocket.\n *\n * @return {Boolean} whether this transport is available.\n * @api public\n */\n\nWS.prototype.check = function () {\n  return !!WebSocketImpl && !('__initialize' in WebSocketImpl && this.name === WS.prototype.name);\n};\n","// browser shim for xmlhttprequest module\n\nvar hasCORS = require('has-cors');\nvar globalThis = require('../globalThis');\n\nmodule.exports = function (opts) {\n  var xdomain = opts.xdomain;\n\n  // scheme must be same when usign XDomainRequest\n  // http://blogs.msdn.com/b/ieinternals/archive/2010/05/13/xdomainrequest-restrictions-limitations-and-workarounds.aspx\n  var xscheme = opts.xscheme;\n\n  // XDomainRequest has a flow of not sending cookie, therefore it should be disabled as a default.\n  // https://github.com/Automattic/engine.io-client/pull/217\n  var enablesXDR = opts.enablesXDR;\n\n  // XMLHttpRequest can be disabled on IE\n  try {\n    if ('undefined' !== typeof XMLHttpRequest && (!xdomain || hasCORS)) {\n      return new XMLHttpRequest();\n    }\n  } catch (e) { }\n\n  // Use XDomainRequest for IE8 if enablesXDR is true\n  // because loading bar keeps flashing when using jsonp-polling\n  // https://github.com/yujiosaka/socke.io-ie8-loading-example\n  try {\n    if ('undefined' !== typeof XDomainRequest && !xscheme && enablesXDR) {\n      return new XDomainRequest();\n    }\n  } catch (e) { }\n\n  if (!xdomain) {\n    try {\n      return new globalThis[['Active'].concat('Object').join('X')]('Microsoft.XMLHTTP');\n    } catch (e) { }\n  }\n};\n","/**\n * This is the web browser implementation of `debug()`.\n *\n * Expose `debug()` as the module.\n */\n\nexports = module.exports = require('./debug');\nexports.log = log;\nexports.formatArgs = formatArgs;\nexports.save = save;\nexports.load = load;\nexports.useColors = useColors;\nexports.storage = 'undefined' != typeof chrome\n               && 'undefined' != typeof chrome.storage\n                  ? chrome.storage.local\n                  : localstorage();\n\n/**\n * Colors.\n */\n\nexports.colors = [\n  '#0000CC', '#0000FF', '#0033CC', '#0033FF', '#0066CC', '#0066FF', '#0099CC',\n  '#0099FF', '#00CC00', '#00CC33', '#00CC66', '#00CC99', '#00CCCC', '#00CCFF',\n  '#3300CC', '#3300FF', '#3333CC', '#3333FF', '#3366CC', '#3366FF', '#3399CC',\n  '#3399FF', '#33CC00', '#33CC33', '#33CC66', '#33CC99', '#33CCCC', '#33CCFF',\n  '#6600CC', '#6600FF', '#6633CC', '#6633FF', '#66CC00', '#66CC33', '#9900CC',\n  '#9900FF', '#9933CC', '#9933FF', '#99CC00', '#99CC33', '#CC0000', '#CC0033',\n  '#CC0066', '#CC0099', '#CC00CC', '#CC00FF', '#CC3300', '#CC3333', '#CC3366',\n  '#CC3399', '#CC33CC', '#CC33FF', '#CC6600', '#CC6633', '#CC9900', '#CC9933',\n  '#CCCC00', '#CCCC33', '#FF0000', '#FF0033', '#FF0066', '#FF0099', '#FF00CC',\n  '#FF00FF', '#FF3300', '#FF3333', '#FF3366', '#FF3399', '#FF33CC', '#FF33FF',\n  '#FF6600', '#FF6633', '#FF9900', '#FF9933', '#FFCC00', '#FFCC33'\n];\n\n/**\n * Currently only WebKit-based Web Inspectors, Firefox >= v31,\n * and the Firebug extension (any Firefox version) are known\n * to support \"%c\" CSS customizations.\n *\n * TODO: add a `localStorage` variable to explicitly enable/disable colors\n */\n\nfunction useColors() {\n  // NB: In an Electron preload script, document will be defined but not fully\n  // initialized. Since we know we're in Chrome, we'll just detect this case\n  // explicitly\n  if (typeof window !== 'undefined' && window.process && window.process.type === 'renderer') {\n    return true;\n  }\n\n  // Internet Explorer and Edge do not support colors.\n  if (typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/(edge|trident)\\/(\\d+)/)) {\n    return false;\n  }\n\n  // is webkit? http://stackoverflow.com/a/16459606/376773\n  // document is undefined in react-native: https://github.com/facebook/react-native/pull/1632\n  return (typeof document !== 'undefined' && document.documentElement && document.documentElement.style && document.documentElement.style.WebkitAppearance) ||\n    // is firebug? http://stackoverflow.com/a/398120/376773\n    (typeof window !== 'undefined' && window.console && (window.console.firebug || (window.console.exception && window.console.table))) ||\n    // is firefox >= v31?\n    // https://developer.mozilla.org/en-US/docs/Tools/Web_Console#Styling_messages\n    (typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/firefox\\/(\\d+)/) && parseInt(RegExp.$1, 10) >= 31) ||\n    // double check webkit in userAgent just in case we are in a worker\n    (typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/applewebkit\\/(\\d+)/));\n}\n\n/**\n * Map %j to `JSON.stringify()`, since no Web Inspectors do that by default.\n */\n\nexports.formatters.j = function(v) {\n  try {\n    return JSON.stringify(v);\n  } catch (err) {\n    return '[UnexpectedJSONParseError]: ' + err.message;\n  }\n};\n\n\n/**\n * Colorize log arguments if enabled.\n *\n * @api public\n */\n\nfunction formatArgs(args) {\n  var useColors = this.useColors;\n\n  args[0] = (useColors ? '%c' : '')\n    + this.namespace\n    + (useColors ? ' %c' : ' ')\n    + args[0]\n    + (useColors ? '%c ' : ' ')\n    + '+' + exports.humanize(this.diff);\n\n  if (!useColors) return;\n\n  var c = 'color: ' + this.color;\n  args.splice(1, 0, c, 'color: inherit')\n\n  // the final \"%c\" is somewhat tricky, because there could be other\n  // arguments passed either before or after the %c, so we need to\n  // figure out the correct index to insert the CSS into\n  var index = 0;\n  var lastC = 0;\n  args[0].replace(/%[a-zA-Z%]/g, function(match) {\n    if ('%%' === match) return;\n    index++;\n    if ('%c' === match) {\n      // we only are interested in the *last* %c\n      // (the user may have provided their own)\n      lastC = index;\n    }\n  });\n\n  args.splice(lastC, 0, c);\n}\n\n/**\n * Invokes `console.log()` when available.\n * No-op when `console.log` is not a \"function\".\n *\n * @api public\n */\n\nfunction log() {\n  // this hackery is required for IE8/9, where\n  // the `console.log` function doesn't have 'apply'\n  return 'object' === typeof console\n    && console.log\n    && Function.prototype.apply.call(console.log, console, arguments);\n}\n\n/**\n * Save `namespaces`.\n *\n * @param {String} namespaces\n * @api private\n */\n\nfunction save(namespaces) {\n  try {\n    if (null == namespaces) {\n      exports.storage.removeItem('debug');\n    } else {\n      exports.storage.debug = namespaces;\n    }\n  } catch(e) {}\n}\n\n/**\n * Load `namespaces`.\n *\n * @return {String} returns the previously persisted debug modes\n * @api private\n */\n\nfunction load() {\n  var r;\n  try {\n    r = exports.storage.debug;\n  } catch(e) {}\n\n  // If debug isn't set in LS, and we're in Electron, try to load $DEBUG\n  if (!r && typeof process !== 'undefined' && 'env' in process) {\n    r = process.env.DEBUG;\n  }\n\n  return r;\n}\n\n/**\n * Enable namespaces listed in `localStorage.debug` initially.\n */\n\nexports.enable(load());\n\n/**\n * Localstorage attempts to return the localstorage.\n *\n * This is necessary because safari throws\n * when a user disables cookies/localstorage\n * and you attempt to access it.\n *\n * @return {LocalStorage}\n * @api private\n */\n\nfunction localstorage() {\n  try {\n    return window.localStorage;\n  } catch (e) {}\n}\n","\n/**\n * This is the common logic for both the Node.js and web browser\n * implementations of `debug()`.\n *\n * Expose `debug()` as the module.\n */\n\nexports = module.exports = createDebug.debug = createDebug['default'] = createDebug;\nexports.coerce = coerce;\nexports.disable = disable;\nexports.enable = enable;\nexports.enabled = enabled;\nexports.humanize = require('ms');\n\n/**\n * Active `debug` instances.\n */\nexports.instances = [];\n\n/**\n * The currently active debug mode names, and names to skip.\n */\n\nexports.names = [];\nexports.skips = [];\n\n/**\n * Map of special \"%n\" handling functions, for the debug \"format\" argument.\n *\n * Valid key names are a single, lower or upper-case letter, i.e. \"n\" and \"N\".\n */\n\nexports.formatters = {};\n\n/**\n * Select a color.\n * @param {String} namespace\n * @return {Number}\n * @api private\n */\n\nfunction selectColor(namespace) {\n  var hash = 0, i;\n\n  for (i in namespace) {\n    hash  = ((hash << 5) - hash) + namespace.charCodeAt(i);\n    hash |= 0; // Convert to 32bit integer\n  }\n\n  return exports.colors[Math.abs(hash) % exports.colors.length];\n}\n\n/**\n * Create a debugger with the given `namespace`.\n *\n * @param {String} namespace\n * @return {Function}\n * @api public\n */\n\nfunction createDebug(namespace) {\n\n  var prevTime;\n\n  function debug() {\n    // disabled?\n    if (!debug.enabled) return;\n\n    var self = debug;\n\n    // set `diff` timestamp\n    var curr = +new Date();\n    var ms = curr - (prevTime || curr);\n    self.diff = ms;\n    self.prev = prevTime;\n    self.curr = curr;\n    prevTime = curr;\n\n    // turn the `arguments` into a proper Array\n    var args = new Array(arguments.length);\n    for (var i = 0; i < args.length; i++) {\n      args[i] = arguments[i];\n    }\n\n    args[0] = exports.coerce(args[0]);\n\n    if ('string' !== typeof args[0]) {\n      // anything else let's inspect with %O\n      args.unshift('%O');\n    }\n\n    // apply any `formatters` transformations\n    var index = 0;\n    args[0] = args[0].replace(/%([a-zA-Z%])/g, function(match, format) {\n      // if we encounter an escaped % then don't increase the array index\n      if (match === '%%') return match;\n      index++;\n      var formatter = exports.formatters[format];\n      if ('function' === typeof formatter) {\n        var val = args[index];\n        match = formatter.call(self, val);\n\n        // now we need to remove `args[index]` since it's inlined in the `format`\n        args.splice(index, 1);\n        index--;\n      }\n      return match;\n    });\n\n    // apply env-specific formatting (colors, etc.)\n    exports.formatArgs.call(self, args);\n\n    var logFn = debug.log || exports.log || console.log.bind(console);\n    logFn.apply(self, args);\n  }\n\n  debug.namespace = namespace;\n  debug.enabled = exports.enabled(namespace);\n  debug.useColors = exports.useColors();\n  debug.color = selectColor(namespace);\n  debug.destroy = destroy;\n\n  // env-specific initialization logic for debug instances\n  if ('function' === typeof exports.init) {\n    exports.init(debug);\n  }\n\n  exports.instances.push(debug);\n\n  return debug;\n}\n\nfunction destroy () {\n  var index = exports.instances.indexOf(this);\n  if (index !== -1) {\n    exports.instances.splice(index, 1);\n    return true;\n  } else {\n    return false;\n  }\n}\n\n/**\n * Enables a debug mode by namespaces. This can include modes\n * separated by a colon and wildcards.\n *\n * @param {String} namespaces\n * @api public\n */\n\nfunction enable(namespaces) {\n  exports.save(namespaces);\n\n  exports.names = [];\n  exports.skips = [];\n\n  var i;\n  var split = (typeof namespaces === 'string' ? namespaces : '').split(/[\\s,]+/);\n  var len = split.length;\n\n  for (i = 0; i < len; i++) {\n    if (!split[i]) continue; // ignore empty strings\n    namespaces = split[i].replace(/\\*/g, '.*?');\n    if (namespaces[0] === '-') {\n      exports.skips.push(new RegExp('^' + namespaces.substr(1) + '$'));\n    } else {\n      exports.names.push(new RegExp('^' + namespaces + '$'));\n    }\n  }\n\n  for (i = 0; i < exports.instances.length; i++) {\n    var instance = exports.instances[i];\n    instance.enabled = exports.enabled(instance.namespace);\n  }\n}\n\n/**\n * Disable debug output.\n *\n * @api public\n */\n\nfunction disable() {\n  exports.enable('');\n}\n\n/**\n * Returns true if the given mode name is enabled, false otherwise.\n *\n * @param {String} name\n * @return {Boolean}\n * @api public\n */\n\nfunction enabled(name) {\n  if (name[name.length - 1] === '*') {\n    return true;\n  }\n  var i, len;\n  for (i = 0, len = exports.skips.length; i < len; i++) {\n    if (exports.skips[i].test(name)) {\n      return false;\n    }\n  }\n  for (i = 0, len = exports.names.length; i < len; i++) {\n    if (exports.names[i].test(name)) {\n      return true;\n    }\n  }\n  return false;\n}\n\n/**\n * Coerce `val`.\n *\n * @param {Mixed} val\n * @return {Mixed}\n * @api private\n */\n\nfunction coerce(val) {\n  if (val instanceof Error) return val.stack || val.message;\n  return val;\n}\n","/**\n * Helpers.\n */\n\nvar s = 1000;\nvar m = s * 60;\nvar h = m * 60;\nvar d = h * 24;\nvar y = d * 365.25;\n\n/**\n * Parse or format the given `val`.\n *\n * Options:\n *\n *  - `long` verbose formatting [false]\n *\n * @param {String|Number} val\n * @param {Object} [options]\n * @throws {Error} throw an error if val is not a non-empty string or a number\n * @return {String|Number}\n * @api public\n */\n\nmodule.exports = function(val, options) {\n  options = options || {};\n  var type = typeof val;\n  if (type === 'string' && val.length > 0) {\n    return parse(val);\n  } else if (type === 'number' && isNaN(val) === false) {\n    return options.long ? fmtLong(val) : fmtShort(val);\n  }\n  throw new Error(\n    'val is not a non-empty string or a valid number. val=' +\n      JSON.stringify(val)\n  );\n};\n\n/**\n * Parse the given `str` and return milliseconds.\n *\n * @param {String} str\n * @return {Number}\n * @api private\n */\n\nfunction parse(str) {\n  str = String(str);\n  if (str.length > 100) {\n    return;\n  }\n  var match = /^((?:\\d+)?\\.?\\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(\n    str\n  );\n  if (!match) {\n    return;\n  }\n  var n = parseFloat(match[1]);\n  var type = (match[2] || 'ms').toLowerCase();\n  switch (type) {\n    case 'years':\n    case 'year':\n    case 'yrs':\n    case 'yr':\n    case 'y':\n      return n * y;\n    case 'days':\n    case 'day':\n    case 'd':\n      return n * d;\n    case 'hours':\n    case 'hour':\n    case 'hrs':\n    case 'hr':\n    case 'h':\n      return n * h;\n    case 'minutes':\n    case 'minute':\n    case 'mins':\n    case 'min':\n    case 'm':\n      return n * m;\n    case 'seconds':\n    case 'second':\n    case 'secs':\n    case 'sec':\n    case 's':\n      return n * s;\n    case 'milliseconds':\n    case 'millisecond':\n    case 'msecs':\n    case 'msec':\n    case 'ms':\n      return n;\n    default:\n      return undefined;\n  }\n}\n\n/**\n * Short format for `ms`.\n *\n * @param {Number} ms\n * @return {String}\n * @api private\n */\n\nfunction fmtShort(ms) {\n  if (ms >= d) {\n    return Math.round(ms / d) + 'd';\n  }\n  if (ms >= h) {\n    return Math.round(ms / h) + 'h';\n  }\n  if (ms >= m) {\n    return Math.round(ms / m) + 'm';\n  }\n  if (ms >= s) {\n    return Math.round(ms / s) + 's';\n  }\n  return ms + 'ms';\n}\n\n/**\n * Long format for `ms`.\n *\n * @param {Number} ms\n * @return {String}\n * @api private\n */\n\nfunction fmtLong(ms) {\n  return plural(ms, d, 'day') ||\n    plural(ms, h, 'hour') ||\n    plural(ms, m, 'minute') ||\n    plural(ms, s, 'second') ||\n    ms + ' ms';\n}\n\n/**\n * Pluralization helper.\n */\n\nfunction plural(ms, n, name) {\n  if (ms < n) {\n    return;\n  }\n  if (ms < n * 1.5) {\n    return Math.floor(ms / n) + ' ' + name;\n  }\n  return Math.ceil(ms / n) + ' ' + name + 's';\n}\n","/**\n * Module dependencies.\n */\n\nvar keys = require('./keys');\nvar hasBinary = require('has-binary2');\nvar sliceBuffer = require('arraybuffer.slice');\nvar after = require('after');\nvar utf8 = require('./utf8');\n\nvar base64encoder;\nif (typeof ArrayBuffer !== 'undefined') {\n  base64encoder = require('base64-arraybuffer');\n}\n\n/**\n * Check if we are running an android browser. That requires us to use\n * ArrayBuffer with polling transports...\n *\n * http://ghinda.net/jpeg-blob-ajax-android/\n */\n\nvar isAndroid = typeof navigator !== 'undefined' && /Android/i.test(navigator.userAgent);\n\n/**\n * Check if we are running in PhantomJS.\n * Uploading a Blob with PhantomJS does not work correctly, as reported here:\n * https://github.com/ariya/phantomjs/issues/11395\n * @type boolean\n */\nvar isPhantomJS = typeof navigator !== 'undefined' && /PhantomJS/i.test(navigator.userAgent);\n\n/**\n * When true, avoids using Blobs to encode payloads.\n * @type boolean\n */\nvar dontSendBlobs = isAndroid || isPhantomJS;\n\n/**\n * Current protocol version.\n */\n\nexports.protocol = 3;\n\n/**\n * Packet types.\n */\n\nvar packets = exports.packets = {\n    open:     0    // non-ws\n  , close:    1    // non-ws\n  , ping:     2\n  , pong:     3\n  , message:  4\n  , upgrade:  5\n  , noop:     6\n};\n\nvar packetslist = keys(packets);\n\n/**\n * Premade error packet.\n */\n\nvar err = { type: 'error', data: 'parser error' };\n\n/**\n * Create a blob api even for blob builder when vendor prefixes exist\n */\n\nvar Blob = require('blob');\n\n/**\n * Encodes a packet.\n *\n *     <packet type id> [ <data> ]\n *\n * Example:\n *\n *     5hello world\n *     3\n *     4\n *\n * Binary is encoded in an identical principle\n *\n * @api private\n */\n\nexports.encodePacket = function (packet, supportsBinary, utf8encode, callback) {\n  if (typeof supportsBinary === 'function') {\n    callback = supportsBinary;\n    supportsBinary = false;\n  }\n\n  if (typeof utf8encode === 'function') {\n    callback = utf8encode;\n    utf8encode = null;\n  }\n\n  var data = (packet.data === undefined)\n    ? undefined\n    : packet.data.buffer || packet.data;\n\n  if (typeof ArrayBuffer !== 'undefined' && data instanceof ArrayBuffer) {\n    return encodeArrayBuffer(packet, supportsBinary, callback);\n  } else if (typeof Blob !== 'undefined' && data instanceof Blob) {\n    return encodeBlob(packet, supportsBinary, callback);\n  }\n\n  // might be an object with { base64: true, data: dataAsBase64String }\n  if (data && data.base64) {\n    return encodeBase64Object(packet, callback);\n  }\n\n  // Sending data as a utf-8 string\n  var encoded = packets[packet.type];\n\n  // data fragment is optional\n  if (undefined !== packet.data) {\n    encoded += utf8encode ? utf8.encode(String(packet.data), { strict: false }) : String(packet.data);\n  }\n\n  return callback('' + encoded);\n\n};\n\nfunction encodeBase64Object(packet, callback) {\n  // packet data is an object { base64: true, data: dataAsBase64String }\n  var message = 'b' + exports.packets[packet.type] + packet.data.data;\n  return callback(message);\n}\n\n/**\n * Encode packet helpers for binary types\n */\n\nfunction encodeArrayBuffer(packet, supportsBinary, callback) {\n  if (!supportsBinary) {\n    return exports.encodeBase64Packet(packet, callback);\n  }\n\n  var data = packet.data;\n  var contentArray = new Uint8Array(data);\n  var resultBuffer = new Uint8Array(1 + data.byteLength);\n\n  resultBuffer[0] = packets[packet.type];\n  for (var i = 0; i < contentArray.length; i++) {\n    resultBuffer[i+1] = contentArray[i];\n  }\n\n  return callback(resultBuffer.buffer);\n}\n\nfunction encodeBlobAsArrayBuffer(packet, supportsBinary, callback) {\n  if (!supportsBinary) {\n    return exports.encodeBase64Packet(packet, callback);\n  }\n\n  var fr = new FileReader();\n  fr.onload = function() {\n    exports.encodePacket({ type: packet.type, data: fr.result }, supportsBinary, true, callback);\n  };\n  return fr.readAsArrayBuffer(packet.data);\n}\n\nfunction encodeBlob(packet, supportsBinary, callback) {\n  if (!supportsBinary) {\n    return exports.encodeBase64Packet(packet, callback);\n  }\n\n  if (dontSendBlobs) {\n    return encodeBlobAsArrayBuffer(packet, supportsBinary, callback);\n  }\n\n  var length = new Uint8Array(1);\n  length[0] = packets[packet.type];\n  var blob = new Blob([length.buffer, packet.data]);\n\n  return callback(blob);\n}\n\n/**\n * Encodes a packet with binary data in a base64 string\n *\n * @param {Object} packet, has `type` and `data`\n * @return {String} base64 encoded message\n */\n\nexports.encodeBase64Packet = function(packet, callback) {\n  var message = 'b' + exports.packets[packet.type];\n  if (typeof Blob !== 'undefined' && packet.data instanceof Blob) {\n    var fr = new FileReader();\n    fr.onload = function() {\n      var b64 = fr.result.split(',')[1];\n      callback(message + b64);\n    };\n    return fr.readAsDataURL(packet.data);\n  }\n\n  var b64data;\n  try {\n    b64data = String.fromCharCode.apply(null, new Uint8Array(packet.data));\n  } catch (e) {\n    // iPhone Safari doesn't let you apply with typed arrays\n    var typed = new Uint8Array(packet.data);\n    var basic = new Array(typed.length);\n    for (var i = 0; i < typed.length; i++) {\n      basic[i] = typed[i];\n    }\n    b64data = String.fromCharCode.apply(null, basic);\n  }\n  message += btoa(b64data);\n  return callback(message);\n};\n\n/**\n * Decodes a packet. Changes format to Blob if requested.\n *\n * @return {Object} with `type` and `data` (if any)\n * @api private\n */\n\nexports.decodePacket = function (data, binaryType, utf8decode) {\n  if (data === undefined) {\n    return err;\n  }\n  // String data\n  if (typeof data === 'string') {\n    if (data.charAt(0) === 'b') {\n      return exports.decodeBase64Packet(data.substr(1), binaryType);\n    }\n\n    if (utf8decode) {\n      data = tryDecode(data);\n      if (data === false) {\n        return err;\n      }\n    }\n    var type = data.charAt(0);\n\n    if (Number(type) != type || !packetslist[type]) {\n      return err;\n    }\n\n    if (data.length > 1) {\n      return { type: packetslist[type], data: data.substring(1) };\n    } else {\n      return { type: packetslist[type] };\n    }\n  }\n\n  var asArray = new Uint8Array(data);\n  var type = asArray[0];\n  var rest = sliceBuffer(data, 1);\n  if (Blob && binaryType === 'blob') {\n    rest = new Blob([rest]);\n  }\n  return { type: packetslist[type], data: rest };\n};\n\nfunction tryDecode(data) {\n  try {\n    data = utf8.decode(data, { strict: false });\n  } catch (e) {\n    return false;\n  }\n  return data;\n}\n\n/**\n * Decodes a packet encoded in a base64 string\n *\n * @param {String} base64 encoded message\n * @return {Object} with `type` and `data` (if any)\n */\n\nexports.decodeBase64Packet = function(msg, binaryType) {\n  var type = packetslist[msg.charAt(0)];\n  if (!base64encoder) {\n    return { type: type, data: { base64: true, data: msg.substr(1) } };\n  }\n\n  var data = base64encoder.decode(msg.substr(1));\n\n  if (binaryType === 'blob' && Blob) {\n    data = new Blob([data]);\n  }\n\n  return { type: type, data: data };\n};\n\n/**\n * Encodes multiple messages (payload).\n *\n *     <length>:data\n *\n * Example:\n *\n *     11:hello world2:hi\n *\n * If any contents are binary, they will be encoded as base64 strings. Base64\n * encoded strings are marked with a b before the length specifier\n *\n * @param {Array} packets\n * @api private\n */\n\nexports.encodePayload = function (packets, supportsBinary, callback) {\n  if (typeof supportsBinary === 'function') {\n    callback = supportsBinary;\n    supportsBinary = null;\n  }\n\n  var isBinary = hasBinary(packets);\n\n  if (supportsBinary && isBinary) {\n    if (Blob && !dontSendBlobs) {\n      return exports.encodePayloadAsBlob(packets, callback);\n    }\n\n    return exports.encodePayloadAsArrayBuffer(packets, callback);\n  }\n\n  if (!packets.length) {\n    return callback('0:');\n  }\n\n  function setLengthHeader(message) {\n    return message.length + ':' + message;\n  }\n\n  function encodeOne(packet, doneCallback) {\n    exports.encodePacket(packet, !isBinary ? false : supportsBinary, false, function(message) {\n      doneCallback(null, setLengthHeader(message));\n    });\n  }\n\n  map(packets, encodeOne, function(err, results) {\n    return callback(results.join(''));\n  });\n};\n\n/**\n * Async array map using after\n */\n\nfunction map(ary, each, done) {\n  var result = new Array(ary.length);\n  var next = after(ary.length, done);\n\n  var eachWithIndex = function(i, el, cb) {\n    each(el, function(error, msg) {\n      result[i] = msg;\n      cb(error, result);\n    });\n  };\n\n  for (var i = 0; i < ary.length; i++) {\n    eachWithIndex(i, ary[i], next);\n  }\n}\n\n/*\n * Decodes data when a payload is maybe expected. Possible binary contents are\n * decoded from their base64 representation\n *\n * @param {String} data, callback method\n * @api public\n */\n\nexports.decodePayload = function (data, binaryType, callback) {\n  if (typeof data !== 'string') {\n    return exports.decodePayloadAsBinary(data, binaryType, callback);\n  }\n\n  if (typeof binaryType === 'function') {\n    callback = binaryType;\n    binaryType = null;\n  }\n\n  var packet;\n  if (data === '') {\n    // parser error - ignoring payload\n    return callback(err, 0, 1);\n  }\n\n  var length = '', n, msg;\n\n  for (var i = 0, l = data.length; i < l; i++) {\n    var chr = data.charAt(i);\n\n    if (chr !== ':') {\n      length += chr;\n      continue;\n    }\n\n    if (length === '' || (length != (n = Number(length)))) {\n      // parser error - ignoring payload\n      return callback(err, 0, 1);\n    }\n\n    msg = data.substr(i + 1, n);\n\n    if (length != msg.length) {\n      // parser error - ignoring payload\n      return callback(err, 0, 1);\n    }\n\n    if (msg.length) {\n      packet = exports.decodePacket(msg, binaryType, false);\n\n      if (err.type === packet.type && err.data === packet.data) {\n        // parser error in individual packet - ignoring payload\n        return callback(err, 0, 1);\n      }\n\n      var ret = callback(packet, i + n, l);\n      if (false === ret) return;\n    }\n\n    // advance cursor\n    i += n;\n    length = '';\n  }\n\n  if (length !== '') {\n    // parser error - ignoring payload\n    return callback(err, 0, 1);\n  }\n\n};\n\n/**\n * Encodes multiple messages (payload) as binary.\n *\n * <1 = binary, 0 = string><number from 0-9><number from 0-9>[...]<number\n * 255><data>\n *\n * Example:\n * 1 3 255 1 2 3, if the binary contents are interpreted as 8 bit integers\n *\n * @param {Array} packets\n * @return {ArrayBuffer} encoded payload\n * @api private\n */\n\nexports.encodePayloadAsArrayBuffer = function(packets, callback) {\n  if (!packets.length) {\n    return callback(new ArrayBuffer(0));\n  }\n\n  function encodeOne(packet, doneCallback) {\n    exports.encodePacket(packet, true, true, function(data) {\n      return doneCallback(null, data);\n    });\n  }\n\n  map(packets, encodeOne, function(err, encodedPackets) {\n    var totalLength = encodedPackets.reduce(function(acc, p) {\n      var len;\n      if (typeof p === 'string'){\n        len = p.length;\n      } else {\n        len = p.byteLength;\n      }\n      return acc + len.toString().length + len + 2; // string/binary identifier + separator = 2\n    }, 0);\n\n    var resultArray = new Uint8Array(totalLength);\n\n    var bufferIndex = 0;\n    encodedPackets.forEach(function(p) {\n      var isString = typeof p === 'string';\n      var ab = p;\n      if (isString) {\n        var view = new Uint8Array(p.length);\n        for (var i = 0; i < p.length; i++) {\n          view[i] = p.charCodeAt(i);\n        }\n        ab = view.buffer;\n      }\n\n      if (isString) { // not true binary\n        resultArray[bufferIndex++] = 0;\n      } else { // true binary\n        resultArray[bufferIndex++] = 1;\n      }\n\n      var lenStr = ab.byteLength.toString();\n      for (var i = 0; i < lenStr.length; i++) {\n        resultArray[bufferIndex++] = parseInt(lenStr[i]);\n      }\n      resultArray[bufferIndex++] = 255;\n\n      var view = new Uint8Array(ab);\n      for (var i = 0; i < view.length; i++) {\n        resultArray[bufferIndex++] = view[i];\n      }\n    });\n\n    return callback(resultArray.buffer);\n  });\n};\n\n/**\n * Encode as Blob\n */\n\nexports.encodePayloadAsBlob = function(packets, callback) {\n  function encodeOne(packet, doneCallback) {\n    exports.encodePacket(packet, true, true, function(encoded) {\n      var binaryIdentifier = new Uint8Array(1);\n      binaryIdentifier[0] = 1;\n      if (typeof encoded === 'string') {\n        var view = new Uint8Array(encoded.length);\n        for (var i = 0; i < encoded.length; i++) {\n          view[i] = encoded.charCodeAt(i);\n        }\n        encoded = view.buffer;\n        binaryIdentifier[0] = 0;\n      }\n\n      var len = (encoded instanceof ArrayBuffer)\n        ? encoded.byteLength\n        : encoded.size;\n\n      var lenStr = len.toString();\n      var lengthAry = new Uint8Array(lenStr.length + 1);\n      for (var i = 0; i < lenStr.length; i++) {\n        lengthAry[i] = parseInt(lenStr[i]);\n      }\n      lengthAry[lenStr.length] = 255;\n\n      if (Blob) {\n        var blob = new Blob([binaryIdentifier.buffer, lengthAry.buffer, encoded]);\n        doneCallback(null, blob);\n      }\n    });\n  }\n\n  map(packets, encodeOne, function(err, results) {\n    return callback(new Blob(results));\n  });\n};\n\n/*\n * Decodes data when a payload is maybe expected. Strings are decoded by\n * interpreting each byte as a key code for entries marked to start with 0. See\n * description of encodePayloadAsBinary\n *\n * @param {ArrayBuffer} data, callback method\n * @api public\n */\n\nexports.decodePayloadAsBinary = function (data, binaryType, callback) {\n  if (typeof binaryType === 'function') {\n    callback = binaryType;\n    binaryType = null;\n  }\n\n  var bufferTail = data;\n  var buffers = [];\n\n  while (bufferTail.byteLength > 0) {\n    var tailArray = new Uint8Array(bufferTail);\n    var isString = tailArray[0] === 0;\n    var msgLength = '';\n\n    for (var i = 1; ; i++) {\n      if (tailArray[i] === 255) break;\n\n      // 310 = char length of Number.MAX_VALUE\n      if (msgLength.length > 310) {\n        return callback(err, 0, 1);\n      }\n\n      msgLength += tailArray[i];\n    }\n\n    bufferTail = sliceBuffer(bufferTail, 2 + msgLength.length);\n    msgLength = parseInt(msgLength);\n\n    var msg = sliceBuffer(bufferTail, 0, msgLength);\n    if (isString) {\n      try {\n        msg = String.fromCharCode.apply(null, new Uint8Array(msg));\n      } catch (e) {\n        // iPhone Safari doesn't let you apply to typed arrays\n        var typed = new Uint8Array(msg);\n        msg = '';\n        for (var i = 0; i < typed.length; i++) {\n          msg += String.fromCharCode(typed[i]);\n        }\n      }\n    }\n\n    buffers.push(msg);\n    bufferTail = sliceBuffer(bufferTail, msgLength);\n  }\n\n  var total = buffers.length;\n  buffers.forEach(function(buffer, i) {\n    callback(exports.decodePacket(buffer, binaryType, true), i, total);\n  });\n};\n","\n/**\n * Gets the keys for an object.\n *\n * @return {Array} keys\n * @api private\n */\n\nmodule.exports = Object.keys || function keys (obj){\n  var arr = [];\n  var has = Object.prototype.hasOwnProperty;\n\n  for (var i in obj) {\n    if (has.call(obj, i)) {\n      arr.push(i);\n    }\n  }\n  return arr;\n};\n","/*! https://mths.be/utf8js v2.1.2 by @mathias */\n\nvar stringFromCharCode = String.fromCharCode;\n\n// Taken from https://mths.be/punycode\nfunction ucs2decode(string) {\n\tvar output = [];\n\tvar counter = 0;\n\tvar length = string.length;\n\tvar value;\n\tvar extra;\n\twhile (counter < length) {\n\t\tvalue = string.charCodeAt(counter++);\n\t\tif (value >= 0xD800 && value <= 0xDBFF && counter < length) {\n\t\t\t// high surrogate, and there is a next character\n\t\t\textra = string.charCodeAt(counter++);\n\t\t\tif ((extra & 0xFC00) == 0xDC00) { // low surrogate\n\t\t\t\toutput.push(((value & 0x3FF) << 10) + (extra & 0x3FF) + 0x10000);\n\t\t\t} else {\n\t\t\t\t// unmatched surrogate; only append this code unit, in case the next\n\t\t\t\t// code unit is the high surrogate of a surrogate pair\n\t\t\t\toutput.push(value);\n\t\t\t\tcounter--;\n\t\t\t}\n\t\t} else {\n\t\t\toutput.push(value);\n\t\t}\n\t}\n\treturn output;\n}\n\n// Taken from https://mths.be/punycode\nfunction ucs2encode(array) {\n\tvar length = array.length;\n\tvar index = -1;\n\tvar value;\n\tvar output = '';\n\twhile (++index < length) {\n\t\tvalue = array[index];\n\t\tif (value > 0xFFFF) {\n\t\t\tvalue -= 0x10000;\n\t\t\toutput += stringFromCharCode(value >>> 10 & 0x3FF | 0xD800);\n\t\t\tvalue = 0xDC00 | value & 0x3FF;\n\t\t}\n\t\toutput += stringFromCharCode(value);\n\t}\n\treturn output;\n}\n\nfunction checkScalarValue(codePoint, strict) {\n\tif (codePoint >= 0xD800 && codePoint <= 0xDFFF) {\n\t\tif (strict) {\n\t\t\tthrow Error(\n\t\t\t\t'Lone surrogate U+' + codePoint.toString(16).toUpperCase() +\n\t\t\t\t' is not a scalar value'\n\t\t\t);\n\t\t}\n\t\treturn false;\n\t}\n\treturn true;\n}\n/*--------------------------------------------------------------------------*/\n\nfunction createByte(codePoint, shift) {\n\treturn stringFromCharCode(((codePoint >> shift) & 0x3F) | 0x80);\n}\n\nfunction encodeCodePoint(codePoint, strict) {\n\tif ((codePoint & 0xFFFFFF80) == 0) { // 1-byte sequence\n\t\treturn stringFromCharCode(codePoint);\n\t}\n\tvar symbol = '';\n\tif ((codePoint & 0xFFFFF800) == 0) { // 2-byte sequence\n\t\tsymbol = stringFromCharCode(((codePoint >> 6) & 0x1F) | 0xC0);\n\t}\n\telse if ((codePoint & 0xFFFF0000) == 0) { // 3-byte sequence\n\t\tif (!checkScalarValue(codePoint, strict)) {\n\t\t\tcodePoint = 0xFFFD;\n\t\t}\n\t\tsymbol = stringFromCharCode(((codePoint >> 12) & 0x0F) | 0xE0);\n\t\tsymbol += createByte(codePoint, 6);\n\t}\n\telse if ((codePoint & 0xFFE00000) == 0) { // 4-byte sequence\n\t\tsymbol = stringFromCharCode(((codePoint >> 18) & 0x07) | 0xF0);\n\t\tsymbol += createByte(codePoint, 12);\n\t\tsymbol += createByte(codePoint, 6);\n\t}\n\tsymbol += stringFromCharCode((codePoint & 0x3F) | 0x80);\n\treturn symbol;\n}\n\nfunction utf8encode(string, opts) {\n\topts = opts || {};\n\tvar strict = false !== opts.strict;\n\n\tvar codePoints = ucs2decode(string);\n\tvar length = codePoints.length;\n\tvar index = -1;\n\tvar codePoint;\n\tvar byteString = '';\n\twhile (++index < length) {\n\t\tcodePoint = codePoints[index];\n\t\tbyteString += encodeCodePoint(codePoint, strict);\n\t}\n\treturn byteString;\n}\n\n/*--------------------------------------------------------------------------*/\n\nfunction readContinuationByte() {\n\tif (byteIndex >= byteCount) {\n\t\tthrow Error('Invalid byte index');\n\t}\n\n\tvar continuationByte = byteArray[byteIndex] & 0xFF;\n\tbyteIndex++;\n\n\tif ((continuationByte & 0xC0) == 0x80) {\n\t\treturn continuationByte & 0x3F;\n\t}\n\n\t// If we end up here, its not a continuation byte\n\tthrow Error('Invalid continuation byte');\n}\n\nfunction decodeSymbol(strict) {\n\tvar byte1;\n\tvar byte2;\n\tvar byte3;\n\tvar byte4;\n\tvar codePoint;\n\n\tif (byteIndex > byteCount) {\n\t\tthrow Error('Invalid byte index');\n\t}\n\n\tif (byteIndex == byteCount) {\n\t\treturn false;\n\t}\n\n\t// Read first byte\n\tbyte1 = byteArray[byteIndex] & 0xFF;\n\tbyteIndex++;\n\n\t// 1-byte sequence (no continuation bytes)\n\tif ((byte1 & 0x80) == 0) {\n\t\treturn byte1;\n\t}\n\n\t// 2-byte sequence\n\tif ((byte1 & 0xE0) == 0xC0) {\n\t\tbyte2 = readContinuationByte();\n\t\tcodePoint = ((byte1 & 0x1F) << 6) | byte2;\n\t\tif (codePoint >= 0x80) {\n\t\t\treturn codePoint;\n\t\t} else {\n\t\t\tthrow Error('Invalid continuation byte');\n\t\t}\n\t}\n\n\t// 3-byte sequence (may include unpaired surrogates)\n\tif ((byte1 & 0xF0) == 0xE0) {\n\t\tbyte2 = readContinuationByte();\n\t\tbyte3 = readContinuationByte();\n\t\tcodePoint = ((byte1 & 0x0F) << 12) | (byte2 << 6) | byte3;\n\t\tif (codePoint >= 0x0800) {\n\t\t\treturn checkScalarValue(codePoint, strict) ? codePoint : 0xFFFD;\n\t\t} else {\n\t\t\tthrow Error('Invalid continuation byte');\n\t\t}\n\t}\n\n\t// 4-byte sequence\n\tif ((byte1 & 0xF8) == 0xF0) {\n\t\tbyte2 = readContinuationByte();\n\t\tbyte3 = readContinuationByte();\n\t\tbyte4 = readContinuationByte();\n\t\tcodePoint = ((byte1 & 0x07) << 0x12) | (byte2 << 0x0C) |\n\t\t\t(byte3 << 0x06) | byte4;\n\t\tif (codePoint >= 0x010000 && codePoint <= 0x10FFFF) {\n\t\t\treturn codePoint;\n\t\t}\n\t}\n\n\tthrow Error('Invalid UTF-8 detected');\n}\n\nvar byteArray;\nvar byteCount;\nvar byteIndex;\nfunction utf8decode(byteString, opts) {\n\topts = opts || {};\n\tvar strict = false !== opts.strict;\n\n\tbyteArray = ucs2decode(byteString);\n\tbyteCount = byteArray.length;\n\tbyteIndex = 0;\n\tvar codePoints = [];\n\tvar tmp;\n\twhile ((tmp = decodeSymbol(strict)) !== false) {\n\t\tcodePoints.push(tmp);\n\t}\n\treturn ucs2encode(codePoints);\n}\n\nmodule.exports = {\n\tversion: '2.1.2',\n\tencode: utf8encode,\n\tdecode: utf8decode\n};\n","/* global Blob File */\n\n/*\n * Module requirements.\n */\n\nvar isArray = require('isarray');\n\nvar toString = Object.prototype.toString;\nvar withNativeBlob = typeof Blob === 'function' ||\n                        typeof Blob !== 'undefined' && toString.call(Blob) === '[object BlobConstructor]';\nvar withNativeFile = typeof File === 'function' ||\n                        typeof File !== 'undefined' && toString.call(File) === '[object FileConstructor]';\n\n/**\n * Module exports.\n */\n\nmodule.exports = hasBinary;\n\n/**\n * Checks for binary data.\n *\n * Supports Buffer, ArrayBuffer, Blob and File.\n *\n * @param {Object} anything\n * @api public\n */\n\nfunction hasBinary (obj) {\n  if (!obj || typeof obj !== 'object') {\n    return false;\n  }\n\n  if (isArray(obj)) {\n    for (var i = 0, l = obj.length; i < l; i++) {\n      if (hasBinary(obj[i])) {\n        return true;\n      }\n    }\n    return false;\n  }\n\n  if ((typeof Buffer === 'function' && Buffer.isBuffer && Buffer.isBuffer(obj)) ||\n    (typeof ArrayBuffer === 'function' && obj instanceof ArrayBuffer) ||\n    (withNativeBlob && obj instanceof Blob) ||\n    (withNativeFile && obj instanceof File)\n  ) {\n    return true;\n  }\n\n  // see: https://github.com/Automattic/has-binary/pull/4\n  if (obj.toJSON && typeof obj.toJSON === 'function' && arguments.length === 1) {\n    return hasBinary(obj.toJSON(), true);\n  }\n\n  for (var key in obj) {\n    if (Object.prototype.hasOwnProperty.call(obj, key) && hasBinary(obj[key])) {\n      return true;\n    }\n  }\n\n  return false;\n}\n","var toString = {}.toString;\n\nmodule.exports = Array.isArray || function (arr) {\n  return toString.call(arr) == '[object Array]';\n};\n","\n/**\n * Module exports.\n *\n * Logic borrowed from Modernizr:\n *\n *   - https://github.com/Modernizr/Modernizr/blob/master/feature-detects/cors.js\n */\n\ntry {\n  module.exports = typeof XMLHttpRequest !== 'undefined' &&\n    'withCredentials' in new XMLHttpRequest();\n} catch (err) {\n  // if XMLHttp support is disabled in IE then it will throw\n  // when trying to create\n  module.exports = false;\n}\n","\nvar indexOf = [].indexOf;\n\nmodule.exports = function(arr, obj){\n  if (indexOf) return arr.indexOf(obj);\n  for (var i = 0; i < arr.length; ++i) {\n    if (arr[i] === obj) return i;\n  }\n  return -1;\n};","/**\n * Compiles a querystring\n * Returns string representation of the object\n *\n * @param {Object}\n * @api private\n */\n\nexports.encode = function (obj) {\n  var str = '';\n\n  for (var i in obj) {\n    if (obj.hasOwnProperty(i)) {\n      if (str.length) str += '&';\n      str += encodeURIComponent(i) + '=' + encodeURIComponent(obj[i]);\n    }\n  }\n\n  return str;\n};\n\n/**\n * Parses a simple querystring into an object\n *\n * @param {String} qs\n * @api private\n */\n\nexports.decode = function(qs){\n  var qry = {};\n  var pairs = qs.split('&');\n  for (var i = 0, l = pairs.length; i < l; i++) {\n    var pair = pairs[i].split('=');\n    qry[decodeURIComponent(pair[0])] = decodeURIComponent(pair[1]);\n  }\n  return qry;\n};\n","/**\n * Parses an URI\n *\n * @author Steven Levithan <stevenlevithan.com> (MIT license)\n * @api private\n */\n\nvar re = /^(?:(?![^:@]+:[^:@\\/]*@)(http|https|ws|wss):\\/\\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\\/?#]*)(?::(\\d*))?)(((\\/(?:[^?#](?![^?#\\/]*\\.[^?#\\/.]+(?:[?#]|$)))*\\/?)?([^?#\\/]*))(?:\\?([^#]*))?(?:#(.*))?)/;\n\nvar parts = [\n    'source', 'protocol', 'authority', 'userInfo', 'user', 'password', 'host', 'port', 'relative', 'path', 'directory', 'file', 'query', 'anchor'\n];\n\nmodule.exports = function parseuri(str) {\n    var src = str,\n        b = str.indexOf('['),\n        e = str.indexOf(']');\n\n    if (b != -1 && e != -1) {\n        str = str.substring(0, b) + str.substring(b, e).replace(/:/g, ';') + str.substring(e, str.length);\n    }\n\n    var m = re.exec(str || ''),\n        uri = {},\n        i = 14;\n\n    while (i--) {\n        uri[parts[i]] = m[i] || '';\n    }\n\n    if (b != -1 && e != -1) {\n        uri.source = src;\n        uri.host = uri.host.substring(1, uri.host.length - 1).replace(/;/g, ':');\n        uri.authority = uri.authority.replace('[', '').replace(']', '').replace(/;/g, ':');\n        uri.ipv6uri = true;\n    }\n\n    uri.pathNames = pathNames(uri, uri['path']);\n    uri.queryKey = queryKey(uri, uri['query']);\n\n    return uri;\n};\n\nfunction pathNames(obj, path) {\n    var regx = /\\/{2,9}/g,\n        names = path.replace(regx, \"/\").split(\"/\");\n\n    if (path.substr(0, 1) == '/' || path.length === 0) {\n        names.splice(0, 1);\n    }\n    if (path.substr(path.length - 1, 1) == '/') {\n        names.splice(names.length - 1, 1);\n    }\n\n    return names;\n}\n\nfunction queryKey(uri, query) {\n    var data = {};\n\n    query.replace(/(?:^|&)([^&=]*)=?([^&]*)/g, function ($0, $1, $2) {\n        if ($1) {\n            data[$1] = $2;\n        }\n    });\n\n    return data;\n}\n","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport { mapToCssModules, tagPropType } from './utils';\nvar propTypes = {\n  className: PropTypes.string,\n  cssModule: PropTypes.object,\n  size: PropTypes.string,\n  bordered: PropTypes.bool,\n  borderless: PropTypes.bool,\n  striped: PropTypes.bool,\n  dark: PropTypes.bool,\n  hover: PropTypes.bool,\n  responsive: PropTypes.oneOfType([PropTypes.bool, PropTypes.string]),\n  tag: tagPropType,\n  responsiveTag: tagPropType,\n  innerRef: PropTypes.oneOfType([PropTypes.func, PropTypes.string, PropTypes.object])\n};\nvar defaultProps = {\n  tag: 'table',\n  responsiveTag: 'div'\n};\n\nvar Table = function Table(props) {\n  var className = props.className,\n      cssModule = props.cssModule,\n      size = props.size,\n      bordered = props.bordered,\n      borderless = props.borderless,\n      striped = props.striped,\n      dark = props.dark,\n      hover = props.hover,\n      responsive = props.responsive,\n      Tag = props.tag,\n      ResponsiveTag = props.responsiveTag,\n      innerRef = props.innerRef,\n      attributes = _objectWithoutPropertiesLoose(props, [\"className\", \"cssModule\", \"size\", \"bordered\", \"borderless\", \"striped\", \"dark\", \"hover\", \"responsive\", \"tag\", \"responsiveTag\", \"innerRef\"]);\n\n  var classes = mapToCssModules(classNames(className, 'table', size ? 'table-' + size : false, bordered ? 'table-bordered' : false, borderless ? 'table-borderless' : false, striped ? 'table-striped' : false, dark ? 'table-dark' : false, hover ? 'table-hover' : false), cssModule);\n  var table = /*#__PURE__*/React.createElement(Tag, _extends({}, attributes, {\n    ref: innerRef,\n    className: classes\n  }));\n\n  if (responsive) {\n    var responsiveClassName = mapToCssModules(responsive === true ? 'table-responsive' : \"table-responsive-\" + responsive, cssModule);\n    return /*#__PURE__*/React.createElement(ResponsiveTag, {\n      className: responsiveClassName\n    }, table);\n  }\n\n  return table;\n};\n\nTable.propTypes = propTypes;\nTable.defaultProps = defaultProps;\nexport default Table;","\n/**\n * Module dependencies.\n */\n\nvar url = require('./url');\nvar parser = require('socket.io-parser');\nvar Manager = require('./manager');\nvar debug = require('debug')('socket.io-client');\n\n/**\n * Module exports.\n */\n\nmodule.exports = exports = lookup;\n\n/**\n * Managers cache.\n */\n\nvar cache = exports.managers = {};\n\n/**\n * Looks up an existing `Manager` for multiplexing.\n * If the user summons:\n *\n *   `io('http://localhost/a');`\n *   `io('http://localhost/b');`\n *\n * We reuse the existing instance based on same scheme/port/host,\n * and we initialize sockets for each namespace.\n *\n * @api public\n */\n\nfunction lookup (uri, opts) {\n  if (typeof uri === 'object') {\n    opts = uri;\n    uri = undefined;\n  }\n\n  opts = opts || {};\n\n  var parsed = url(uri);\n  var source = parsed.source;\n  var id = parsed.id;\n  var path = parsed.path;\n  var sameNamespace = cache[id] && path in cache[id].nsps;\n  var newConnection = opts.forceNew || opts['force new connection'] ||\n                      false === opts.multiplex || sameNamespace;\n\n  var io;\n\n  if (newConnection) {\n    debug('ignoring socket cache for %s', source);\n    io = Manager(source, opts);\n  } else {\n    if (!cache[id]) {\n      debug('new io instance for %s', source);\n      cache[id] = Manager(source, opts);\n    }\n    io = cache[id];\n  }\n  if (parsed.query && !opts.query) {\n    opts.query = parsed.query;\n  }\n  return io.socket(parsed.path, opts);\n}\n\n/**\n * Protocol version.\n *\n * @api public\n */\n\nexports.protocol = parser.protocol;\n\n/**\n * `connect`.\n *\n * @param {String} uri\n * @api public\n */\n\nexports.connect = lookup;\n\n/**\n * Expose constructors for standalone build.\n *\n * @api public\n */\n\nexports.Manager = require('./manager');\nexports.Socket = require('./socket');\n","\n/**\n * Module dependencies.\n */\n\nvar eio = require('engine.io-client');\nvar Socket = require('./socket');\nvar Emitter = require('component-emitter');\nvar parser = require('socket.io-parser');\nvar on = require('./on');\nvar bind = require('component-bind');\nvar debug = require('debug')('socket.io-client:manager');\nvar indexOf = require('indexof');\nvar Backoff = require('backo2');\n\n/**\n * IE6+ hasOwnProperty\n */\n\nvar has = Object.prototype.hasOwnProperty;\n\n/**\n * Module exports\n */\n\nmodule.exports = Manager;\n\n/**\n * `Manager` constructor.\n *\n * @param {String} engine instance or engine uri/opts\n * @param {Object} options\n * @api public\n */\n\nfunction Manager (uri, opts) {\n  if (!(this instanceof Manager)) return new Manager(uri, opts);\n  if (uri && ('object' === typeof uri)) {\n    opts = uri;\n    uri = undefined;\n  }\n  opts = opts || {};\n\n  opts.path = opts.path || '/socket.io';\n  this.nsps = {};\n  this.subs = [];\n  this.opts = opts;\n  this.reconnection(opts.reconnection !== false);\n  this.reconnectionAttempts(opts.reconnectionAttempts || Infinity);\n  this.reconnectionDelay(opts.reconnectionDelay || 1000);\n  this.reconnectionDelayMax(opts.reconnectionDelayMax || 5000);\n  this.randomizationFactor(opts.randomizationFactor || 0.5);\n  this.backoff = new Backoff({\n    min: this.reconnectionDelay(),\n    max: this.reconnectionDelayMax(),\n    jitter: this.randomizationFactor()\n  });\n  this.timeout(null == opts.timeout ? 20000 : opts.timeout);\n  this.readyState = 'closed';\n  this.uri = uri;\n  this.connecting = [];\n  this.lastPing = null;\n  this.encoding = false;\n  this.packetBuffer = [];\n  var _parser = opts.parser || parser;\n  this.encoder = new _parser.Encoder();\n  this.decoder = new _parser.Decoder();\n  this.autoConnect = opts.autoConnect !== false;\n  if (this.autoConnect) this.open();\n}\n\n/**\n * Propagate given event to sockets and emit on `this`\n *\n * @api private\n */\n\nManager.prototype.emitAll = function () {\n  this.emit.apply(this, arguments);\n  for (var nsp in this.nsps) {\n    if (has.call(this.nsps, nsp)) {\n      this.nsps[nsp].emit.apply(this.nsps[nsp], arguments);\n    }\n  }\n};\n\n/**\n * Update `socket.id` of all sockets\n *\n * @api private\n */\n\nManager.prototype.updateSocketIds = function () {\n  for (var nsp in this.nsps) {\n    if (has.call(this.nsps, nsp)) {\n      this.nsps[nsp].id = this.generateId(nsp);\n    }\n  }\n};\n\n/**\n * generate `socket.id` for the given `nsp`\n *\n * @param {String} nsp\n * @return {String}\n * @api private\n */\n\nManager.prototype.generateId = function (nsp) {\n  return (nsp === '/' ? '' : (nsp + '#')) + this.engine.id;\n};\n\n/**\n * Mix in `Emitter`.\n */\n\nEmitter(Manager.prototype);\n\n/**\n * Sets the `reconnection` config.\n *\n * @param {Boolean} true/false if it should automatically reconnect\n * @return {Manager} self or value\n * @api public\n */\n\nManager.prototype.reconnection = function (v) {\n  if (!arguments.length) return this._reconnection;\n  this._reconnection = !!v;\n  return this;\n};\n\n/**\n * Sets the reconnection attempts config.\n *\n * @param {Number} max reconnection attempts before giving up\n * @return {Manager} self or value\n * @api public\n */\n\nManager.prototype.reconnectionAttempts = function (v) {\n  if (!arguments.length) return this._reconnectionAttempts;\n  this._reconnectionAttempts = v;\n  return this;\n};\n\n/**\n * Sets the delay between reconnections.\n *\n * @param {Number} delay\n * @return {Manager} self or value\n * @api public\n */\n\nManager.prototype.reconnectionDelay = function (v) {\n  if (!arguments.length) return this._reconnectionDelay;\n  this._reconnectionDelay = v;\n  this.backoff && this.backoff.setMin(v);\n  return this;\n};\n\nManager.prototype.randomizationFactor = function (v) {\n  if (!arguments.length) return this._randomizationFactor;\n  this._randomizationFactor = v;\n  this.backoff && this.backoff.setJitter(v);\n  return this;\n};\n\n/**\n * Sets the maximum delay between reconnections.\n *\n * @param {Number} delay\n * @return {Manager} self or value\n * @api public\n */\n\nManager.prototype.reconnectionDelayMax = function (v) {\n  if (!arguments.length) return this._reconnectionDelayMax;\n  this._reconnectionDelayMax = v;\n  this.backoff && this.backoff.setMax(v);\n  return this;\n};\n\n/**\n * Sets the connection timeout. `false` to disable\n *\n * @return {Manager} self or value\n * @api public\n */\n\nManager.prototype.timeout = function (v) {\n  if (!arguments.length) return this._timeout;\n  this._timeout = v;\n  return this;\n};\n\n/**\n * Starts trying to reconnect if reconnection is enabled and we have not\n * started reconnecting yet\n *\n * @api private\n */\n\nManager.prototype.maybeReconnectOnOpen = function () {\n  // Only try to reconnect if it's the first time we're connecting\n  if (!this.reconnecting && this._reconnection && this.backoff.attempts === 0) {\n    // keeps reconnection from firing twice for the same reconnection loop\n    this.reconnect();\n  }\n};\n\n/**\n * Sets the current transport `socket`.\n *\n * @param {Function} optional, callback\n * @return {Manager} self\n * @api public\n */\n\nManager.prototype.open =\nManager.prototype.connect = function (fn, opts) {\n  debug('readyState %s', this.readyState);\n  if (~this.readyState.indexOf('open')) return this;\n\n  debug('opening %s', this.uri);\n  this.engine = eio(this.uri, this.opts);\n  var socket = this.engine;\n  var self = this;\n  this.readyState = 'opening';\n  this.skipReconnect = false;\n\n  // emit `open`\n  var openSub = on(socket, 'open', function () {\n    self.onopen();\n    fn && fn();\n  });\n\n  // emit `connect_error`\n  var errorSub = on(socket, 'error', function (data) {\n    debug('connect_error');\n    self.cleanup();\n    self.readyState = 'closed';\n    self.emitAll('connect_error', data);\n    if (fn) {\n      var err = new Error('Connection error');\n      err.data = data;\n      fn(err);\n    } else {\n      // Only do this if there is no fn to handle the error\n      self.maybeReconnectOnOpen();\n    }\n  });\n\n  // emit `connect_timeout`\n  if (false !== this._timeout) {\n    var timeout = this._timeout;\n    debug('connect attempt will timeout after %d', timeout);\n\n    if (timeout === 0) {\n      openSub.destroy(); // prevents a race condition with the 'open' event\n    }\n\n    // set timer\n    var timer = setTimeout(function () {\n      debug('connect attempt timed out after %d', timeout);\n      openSub.destroy();\n      socket.close();\n      socket.emit('error', 'timeout');\n      self.emitAll('connect_timeout', timeout);\n    }, timeout);\n\n    this.subs.push({\n      destroy: function () {\n        clearTimeout(timer);\n      }\n    });\n  }\n\n  this.subs.push(openSub);\n  this.subs.push(errorSub);\n\n  return this;\n};\n\n/**\n * Called upon transport open.\n *\n * @api private\n */\n\nManager.prototype.onopen = function () {\n  debug('open');\n\n  // clear old subs\n  this.cleanup();\n\n  // mark as open\n  this.readyState = 'open';\n  this.emit('open');\n\n  // add new subs\n  var socket = this.engine;\n  this.subs.push(on(socket, 'data', bind(this, 'ondata')));\n  this.subs.push(on(socket, 'ping', bind(this, 'onping')));\n  this.subs.push(on(socket, 'pong', bind(this, 'onpong')));\n  this.subs.push(on(socket, 'error', bind(this, 'onerror')));\n  this.subs.push(on(socket, 'close', bind(this, 'onclose')));\n  this.subs.push(on(this.decoder, 'decoded', bind(this, 'ondecoded')));\n};\n\n/**\n * Called upon a ping.\n *\n * @api private\n */\n\nManager.prototype.onping = function () {\n  this.lastPing = new Date();\n  this.emitAll('ping');\n};\n\n/**\n * Called upon a packet.\n *\n * @api private\n */\n\nManager.prototype.onpong = function () {\n  this.emitAll('pong', new Date() - this.lastPing);\n};\n\n/**\n * Called with data.\n *\n * @api private\n */\n\nManager.prototype.ondata = function (data) {\n  this.decoder.add(data);\n};\n\n/**\n * Called when parser fully decodes a packet.\n *\n * @api private\n */\n\nManager.prototype.ondecoded = function (packet) {\n  this.emit('packet', packet);\n};\n\n/**\n * Called upon socket error.\n *\n * @api private\n */\n\nManager.prototype.onerror = function (err) {\n  debug('error', err);\n  this.emitAll('error', err);\n};\n\n/**\n * Creates a new socket for the given `nsp`.\n *\n * @return {Socket}\n * @api public\n */\n\nManager.prototype.socket = function (nsp, opts) {\n  var socket = this.nsps[nsp];\n  if (!socket) {\n    socket = new Socket(this, nsp, opts);\n    this.nsps[nsp] = socket;\n    var self = this;\n    socket.on('connecting', onConnecting);\n    socket.on('connect', function () {\n      socket.id = self.generateId(nsp);\n    });\n\n    if (this.autoConnect) {\n      // manually call here since connecting event is fired before listening\n      onConnecting();\n    }\n  }\n\n  function onConnecting () {\n    if (!~indexOf(self.connecting, socket)) {\n      self.connecting.push(socket);\n    }\n  }\n\n  return socket;\n};\n\n/**\n * Called upon a socket close.\n *\n * @param {Socket} socket\n */\n\nManager.prototype.destroy = function (socket) {\n  var index = indexOf(this.connecting, socket);\n  if (~index) this.connecting.splice(index, 1);\n  if (this.connecting.length) return;\n\n  this.close();\n};\n\n/**\n * Writes a packet.\n *\n * @param {Object} packet\n * @api private\n */\n\nManager.prototype.packet = function (packet) {\n  debug('writing packet %j', packet);\n  var self = this;\n  if (packet.query && packet.type === 0) packet.nsp += '?' + packet.query;\n\n  if (!self.encoding) {\n    // encode, then write to engine with result\n    self.encoding = true;\n    this.encoder.encode(packet, function (encodedPackets) {\n      for (var i = 0; i < encodedPackets.length; i++) {\n        self.engine.write(encodedPackets[i], packet.options);\n      }\n      self.encoding = false;\n      self.processPacketQueue();\n    });\n  } else { // add packet to the queue\n    self.packetBuffer.push(packet);\n  }\n};\n\n/**\n * If packet buffer is non-empty, begins encoding the\n * next packet in line.\n *\n * @api private\n */\n\nManager.prototype.processPacketQueue = function () {\n  if (this.packetBuffer.length > 0 && !this.encoding) {\n    var pack = this.packetBuffer.shift();\n    this.packet(pack);\n  }\n};\n\n/**\n * Clean up transport subscriptions and packet buffer.\n *\n * @api private\n */\n\nManager.prototype.cleanup = function () {\n  debug('cleanup');\n\n  var subsLength = this.subs.length;\n  for (var i = 0; i < subsLength; i++) {\n    var sub = this.subs.shift();\n    sub.destroy();\n  }\n\n  this.packetBuffer = [];\n  this.encoding = false;\n  this.lastPing = null;\n\n  this.decoder.destroy();\n};\n\n/**\n * Close the current socket.\n *\n * @api private\n */\n\nManager.prototype.close =\nManager.prototype.disconnect = function () {\n  debug('disconnect');\n  this.skipReconnect = true;\n  this.reconnecting = false;\n  if ('opening' === this.readyState) {\n    // `onclose` will not fire because\n    // an open event never happened\n    this.cleanup();\n  }\n  this.backoff.reset();\n  this.readyState = 'closed';\n  if (this.engine) this.engine.close();\n};\n\n/**\n * Called upon engine close.\n *\n * @api private\n */\n\nManager.prototype.onclose = function (reason) {\n  debug('onclose');\n\n  this.cleanup();\n  this.backoff.reset();\n  this.readyState = 'closed';\n  this.emit('close', reason);\n\n  if (this._reconnection && !this.skipReconnect) {\n    this.reconnect();\n  }\n};\n\n/**\n * Attempt a reconnection.\n *\n * @api private\n */\n\nManager.prototype.reconnect = function () {\n  if (this.reconnecting || this.skipReconnect) return this;\n\n  var self = this;\n\n  if (this.backoff.attempts >= this._reconnectionAttempts) {\n    debug('reconnect failed');\n    this.backoff.reset();\n    this.emitAll('reconnect_failed');\n    this.reconnecting = false;\n  } else {\n    var delay = this.backoff.duration();\n    debug('will wait %dms before reconnect attempt', delay);\n\n    this.reconnecting = true;\n    var timer = setTimeout(function () {\n      if (self.skipReconnect) return;\n\n      debug('attempting reconnect');\n      self.emitAll('reconnect_attempt', self.backoff.attempts);\n      self.emitAll('reconnecting', self.backoff.attempts);\n\n      // check again for the case socket closed in above events\n      if (self.skipReconnect) return;\n\n      self.open(function (err) {\n        if (err) {\n          debug('reconnect attempt error');\n          self.reconnecting = false;\n          self.reconnect();\n          self.emitAll('reconnect_error', err.data);\n        } else {\n          debug('reconnect success');\n          self.onreconnect();\n        }\n      });\n    }, delay);\n\n    this.subs.push({\n      destroy: function () {\n        clearTimeout(timer);\n      }\n    });\n  }\n};\n\n/**\n * Called upon successful reconnect.\n *\n * @api private\n */\n\nManager.prototype.onreconnect = function () {\n  var attempt = this.backoff.attempts;\n  this.reconnecting = false;\n  this.backoff.reset();\n  this.updateSocketIds();\n  this.emitAll('reconnect', attempt);\n};\n","\n/**\n * Module exports.\n */\n\nmodule.exports = on;\n\n/**\n * Helper for subscriptions.\n *\n * @param {Object|EventEmitter} obj with `Emitter` mixin or `EventEmitter`\n * @param {String} event name\n * @param {Function} callback\n * @api public\n */\n\nfunction on (obj, ev, fn) {\n  obj.on(ev, fn);\n  return {\n    destroy: function () {\n      obj.removeListener(ev, fn);\n    }\n  };\n}\n","\n/**\n * Module dependencies.\n */\n\nvar parser = require('socket.io-parser');\nvar Emitter = require('component-emitter');\nvar toArray = require('to-array');\nvar on = require('./on');\nvar bind = require('component-bind');\nvar debug = require('debug')('socket.io-client:socket');\nvar parseqs = require('parseqs');\nvar hasBin = require('has-binary2');\n\n/**\n * Module exports.\n */\n\nmodule.exports = exports = Socket;\n\n/**\n * Internal events (blacklisted).\n * These events can't be emitted by the user.\n *\n * @api private\n */\n\nvar events = {\n  connect: 1,\n  connect_error: 1,\n  connect_timeout: 1,\n  connecting: 1,\n  disconnect: 1,\n  error: 1,\n  reconnect: 1,\n  reconnect_attempt: 1,\n  reconnect_failed: 1,\n  reconnect_error: 1,\n  reconnecting: 1,\n  ping: 1,\n  pong: 1\n};\n\n/**\n * Shortcut to `Emitter#emit`.\n */\n\nvar emit = Emitter.prototype.emit;\n\n/**\n * `Socket` constructor.\n *\n * @api public\n */\n\nfunction Socket (io, nsp, opts) {\n  this.io = io;\n  this.nsp = nsp;\n  this.json = this; // compat\n  this.ids = 0;\n  this.acks = {};\n  this.receiveBuffer = [];\n  this.sendBuffer = [];\n  this.connected = false;\n  this.disconnected = true;\n  this.flags = {};\n  if (opts && opts.query) {\n    this.query = opts.query;\n  }\n  if (this.io.autoConnect) this.open();\n}\n\n/**\n * Mix in `Emitter`.\n */\n\nEmitter(Socket.prototype);\n\n/**\n * Subscribe to open, close and packet events\n *\n * @api private\n */\n\nSocket.prototype.subEvents = function () {\n  if (this.subs) return;\n\n  var io = this.io;\n  this.subs = [\n    on(io, 'open', bind(this, 'onopen')),\n    on(io, 'packet', bind(this, 'onpacket')),\n    on(io, 'close', bind(this, 'onclose'))\n  ];\n};\n\n/**\n * \"Opens\" the socket.\n *\n * @api public\n */\n\nSocket.prototype.open =\nSocket.prototype.connect = function () {\n  if (this.connected) return this;\n\n  this.subEvents();\n  if (!this.io.reconnecting) this.io.open(); // ensure open\n  if ('open' === this.io.readyState) this.onopen();\n  this.emit('connecting');\n  return this;\n};\n\n/**\n * Sends a `message` event.\n *\n * @return {Socket} self\n * @api public\n */\n\nSocket.prototype.send = function () {\n  var args = toArray(arguments);\n  args.unshift('message');\n  this.emit.apply(this, args);\n  return this;\n};\n\n/**\n * Override `emit`.\n * If the event is in `events`, it's emitted normally.\n *\n * @param {String} event name\n * @return {Socket} self\n * @api public\n */\n\nSocket.prototype.emit = function (ev) {\n  if (events.hasOwnProperty(ev)) {\n    emit.apply(this, arguments);\n    return this;\n  }\n\n  var args = toArray(arguments);\n  var packet = {\n    type: (this.flags.binary !== undefined ? this.flags.binary : hasBin(args)) ? parser.BINARY_EVENT : parser.EVENT,\n    data: args\n  };\n\n  packet.options = {};\n  packet.options.compress = !this.flags || false !== this.flags.compress;\n\n  // event ack callback\n  if ('function' === typeof args[args.length - 1]) {\n    debug('emitting packet with ack id %d', this.ids);\n    this.acks[this.ids] = args.pop();\n    packet.id = this.ids++;\n  }\n\n  if (this.connected) {\n    this.packet(packet);\n  } else {\n    this.sendBuffer.push(packet);\n  }\n\n  this.flags = {};\n\n  return this;\n};\n\n/**\n * Sends a packet.\n *\n * @param {Object} packet\n * @api private\n */\n\nSocket.prototype.packet = function (packet) {\n  packet.nsp = this.nsp;\n  this.io.packet(packet);\n};\n\n/**\n * Called upon engine `open`.\n *\n * @api private\n */\n\nSocket.prototype.onopen = function () {\n  debug('transport is open - connecting');\n\n  // write connect packet if necessary\n  if ('/' !== this.nsp) {\n    if (this.query) {\n      var query = typeof this.query === 'object' ? parseqs.encode(this.query) : this.query;\n      debug('sending connect packet with query %s', query);\n      this.packet({type: parser.CONNECT, query: query});\n    } else {\n      this.packet({type: parser.CONNECT});\n    }\n  }\n};\n\n/**\n * Called upon engine `close`.\n *\n * @param {String} reason\n * @api private\n */\n\nSocket.prototype.onclose = function (reason) {\n  debug('close (%s)', reason);\n  this.connected = false;\n  this.disconnected = true;\n  delete this.id;\n  this.emit('disconnect', reason);\n};\n\n/**\n * Called with socket packet.\n *\n * @param {Object} packet\n * @api private\n */\n\nSocket.prototype.onpacket = function (packet) {\n  var sameNamespace = packet.nsp === this.nsp;\n  var rootNamespaceError = packet.type === parser.ERROR && packet.nsp === '/';\n\n  if (!sameNamespace && !rootNamespaceError) return;\n\n  switch (packet.type) {\n    case parser.CONNECT:\n      this.onconnect();\n      break;\n\n    case parser.EVENT:\n      this.onevent(packet);\n      break;\n\n    case parser.BINARY_EVENT:\n      this.onevent(packet);\n      break;\n\n    case parser.ACK:\n      this.onack(packet);\n      break;\n\n    case parser.BINARY_ACK:\n      this.onack(packet);\n      break;\n\n    case parser.DISCONNECT:\n      this.ondisconnect();\n      break;\n\n    case parser.ERROR:\n      this.emit('error', packet.data);\n      break;\n  }\n};\n\n/**\n * Called upon a server event.\n *\n * @param {Object} packet\n * @api private\n */\n\nSocket.prototype.onevent = function (packet) {\n  var args = packet.data || [];\n  debug('emitting event %j', args);\n\n  if (null != packet.id) {\n    debug('attaching ack callback to event');\n    args.push(this.ack(packet.id));\n  }\n\n  if (this.connected) {\n    emit.apply(this, args);\n  } else {\n    this.receiveBuffer.push(args);\n  }\n};\n\n/**\n * Produces an ack callback to emit with an event.\n *\n * @api private\n */\n\nSocket.prototype.ack = function (id) {\n  var self = this;\n  var sent = false;\n  return function () {\n    // prevent double callbacks\n    if (sent) return;\n    sent = true;\n    var args = toArray(arguments);\n    debug('sending ack %j', args);\n\n    self.packet({\n      type: hasBin(args) ? parser.BINARY_ACK : parser.ACK,\n      id: id,\n      data: args\n    });\n  };\n};\n\n/**\n * Called upon a server acknowlegement.\n *\n * @param {Object} packet\n * @api private\n */\n\nSocket.prototype.onack = function (packet) {\n  var ack = this.acks[packet.id];\n  if ('function' === typeof ack) {\n    debug('calling ack %s with %j', packet.id, packet.data);\n    ack.apply(this, packet.data);\n    delete this.acks[packet.id];\n  } else {\n    debug('bad ack %s', packet.id);\n  }\n};\n\n/**\n * Called upon server connect.\n *\n * @api private\n */\n\nSocket.prototype.onconnect = function () {\n  this.connected = true;\n  this.disconnected = false;\n  this.emitBuffered();\n  this.emit('connect');\n};\n\n/**\n * Emit buffered events (received and emitted).\n *\n * @api private\n */\n\nSocket.prototype.emitBuffered = function () {\n  var i;\n  for (i = 0; i < this.receiveBuffer.length; i++) {\n    emit.apply(this, this.receiveBuffer[i]);\n  }\n  this.receiveBuffer = [];\n\n  for (i = 0; i < this.sendBuffer.length; i++) {\n    this.packet(this.sendBuffer[i]);\n  }\n  this.sendBuffer = [];\n};\n\n/**\n * Called upon server disconnect.\n *\n * @api private\n */\n\nSocket.prototype.ondisconnect = function () {\n  debug('server disconnect (%s)', this.nsp);\n  this.destroy();\n  this.onclose('io server disconnect');\n};\n\n/**\n * Called upon forced client/server side disconnections,\n * this method ensures the manager stops tracking us and\n * that reconnections don't get triggered for this.\n *\n * @api private.\n */\n\nSocket.prototype.destroy = function () {\n  if (this.subs) {\n    // clean subscriptions to avoid reconnections\n    for (var i = 0; i < this.subs.length; i++) {\n      this.subs[i].destroy();\n    }\n    this.subs = null;\n  }\n\n  this.io.destroy(this);\n};\n\n/**\n * Disconnects the socket manually.\n *\n * @return {Socket} self\n * @api public\n */\n\nSocket.prototype.close =\nSocket.prototype.disconnect = function () {\n  if (this.connected) {\n    debug('performing disconnect (%s)', this.nsp);\n    this.packet({ type: parser.DISCONNECT });\n  }\n\n  // remove socket from pool\n  this.destroy();\n\n  if (this.connected) {\n    // fire events\n    this.onclose('io client disconnect');\n  }\n  return this;\n};\n\n/**\n * Sets the compress flag.\n *\n * @param {Boolean} if `true`, compresses the sending data\n * @return {Socket} self\n * @api public\n */\n\nSocket.prototype.compress = function (compress) {\n  this.flags.compress = compress;\n  return this;\n};\n\n/**\n * Sets the binary flag\n *\n * @param {Boolean} whether the emitted data contains binary\n * @return {Socket} self\n * @api public\n */\n\nSocket.prototype.binary = function (binary) {\n  this.flags.binary = binary;\n  return this;\n};\n","\n/**\n * Module dependencies.\n */\n\nvar parseuri = require('parseuri');\nvar debug = require('debug')('socket.io-client:url');\n\n/**\n * Module exports.\n */\n\nmodule.exports = url;\n\n/**\n * URL parser.\n *\n * @param {String} url\n * @param {Object} An object meant to mimic window.location.\n *                 Defaults to window.location.\n * @api public\n */\n\nfunction url (uri, loc) {\n  var obj = uri;\n\n  // default to window.location\n  loc = loc || (typeof location !== 'undefined' && location);\n  if (null == uri) uri = loc.protocol + '//' + loc.host;\n\n  // relative path support\n  if ('string' === typeof uri) {\n    if ('/' === uri.charAt(0)) {\n      if ('/' === uri.charAt(1)) {\n        uri = loc.protocol + uri;\n      } else {\n        uri = loc.host + uri;\n      }\n    }\n\n    if (!/^(https?|wss?):\\/\\//.test(uri)) {\n      debug('protocol-less url %s', uri);\n      if ('undefined' !== typeof loc) {\n        uri = loc.protocol + '//' + uri;\n      } else {\n        uri = 'https://' + uri;\n      }\n    }\n\n    // parse\n    debug('parse %s', uri);\n    obj = parseuri(uri);\n  }\n\n  // make sure we treat `localhost:80` and `localhost` equally\n  if (!obj.port) {\n    if (/^(http|ws)$/.test(obj.protocol)) {\n      obj.port = '80';\n    } else if (/^(http|ws)s$/.test(obj.protocol)) {\n      obj.port = '443';\n    }\n  }\n\n  obj.path = obj.path || '/';\n\n  var ipv6 = obj.host.indexOf(':') !== -1;\n  var host = ipv6 ? '[' + obj.host + ']' : obj.host;\n\n  // define unique id\n  obj.id = obj.protocol + '://' + host + ':' + obj.port;\n  // define href\n  obj.href = obj.protocol + '://' + host + (loc && loc.port === obj.port ? '' : (':' + obj.port));\n\n  return obj;\n}\n","/**\n * This is the web browser implementation of `debug()`.\n *\n * Expose `debug()` as the module.\n */\n\nexports = module.exports = require('./debug');\nexports.log = log;\nexports.formatArgs = formatArgs;\nexports.save = save;\nexports.load = load;\nexports.useColors = useColors;\nexports.storage = 'undefined' != typeof chrome\n               && 'undefined' != typeof chrome.storage\n                  ? chrome.storage.local\n                  : localstorage();\n\n/**\n * Colors.\n */\n\nexports.colors = [\n  '#0000CC', '#0000FF', '#0033CC', '#0033FF', '#0066CC', '#0066FF', '#0099CC',\n  '#0099FF', '#00CC00', '#00CC33', '#00CC66', '#00CC99', '#00CCCC', '#00CCFF',\n  '#3300CC', '#3300FF', '#3333CC', '#3333FF', '#3366CC', '#3366FF', '#3399CC',\n  '#3399FF', '#33CC00', '#33CC33', '#33CC66', '#33CC99', '#33CCCC', '#33CCFF',\n  '#6600CC', '#6600FF', '#6633CC', '#6633FF', '#66CC00', '#66CC33', '#9900CC',\n  '#9900FF', '#9933CC', '#9933FF', '#99CC00', '#99CC33', '#CC0000', '#CC0033',\n  '#CC0066', '#CC0099', '#CC00CC', '#CC00FF', '#CC3300', '#CC3333', '#CC3366',\n  '#CC3399', '#CC33CC', '#CC33FF', '#CC6600', '#CC6633', '#CC9900', '#CC9933',\n  '#CCCC00', '#CCCC33', '#FF0000', '#FF0033', '#FF0066', '#FF0099', '#FF00CC',\n  '#FF00FF', '#FF3300', '#FF3333', '#FF3366', '#FF3399', '#FF33CC', '#FF33FF',\n  '#FF6600', '#FF6633', '#FF9900', '#FF9933', '#FFCC00', '#FFCC33'\n];\n\n/**\n * Currently only WebKit-based Web Inspectors, Firefox >= v31,\n * and the Firebug extension (any Firefox version) are known\n * to support \"%c\" CSS customizations.\n *\n * TODO: add a `localStorage` variable to explicitly enable/disable colors\n */\n\nfunction useColors() {\n  // NB: In an Electron preload script, document will be defined but not fully\n  // initialized. Since we know we're in Chrome, we'll just detect this case\n  // explicitly\n  if (typeof window !== 'undefined' && window.process && window.process.type === 'renderer') {\n    return true;\n  }\n\n  // Internet Explorer and Edge do not support colors.\n  if (typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/(edge|trident)\\/(\\d+)/)) {\n    return false;\n  }\n\n  // is webkit? http://stackoverflow.com/a/16459606/376773\n  // document is undefined in react-native: https://github.com/facebook/react-native/pull/1632\n  return (typeof document !== 'undefined' && document.documentElement && document.documentElement.style && document.documentElement.style.WebkitAppearance) ||\n    // is firebug? http://stackoverflow.com/a/398120/376773\n    (typeof window !== 'undefined' && window.console && (window.console.firebug || (window.console.exception && window.console.table))) ||\n    // is firefox >= v31?\n    // https://developer.mozilla.org/en-US/docs/Tools/Web_Console#Styling_messages\n    (typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/firefox\\/(\\d+)/) && parseInt(RegExp.$1, 10) >= 31) ||\n    // double check webkit in userAgent just in case we are in a worker\n    (typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/applewebkit\\/(\\d+)/));\n}\n\n/**\n * Map %j to `JSON.stringify()`, since no Web Inspectors do that by default.\n */\n\nexports.formatters.j = function(v) {\n  try {\n    return JSON.stringify(v);\n  } catch (err) {\n    return '[UnexpectedJSONParseError]: ' + err.message;\n  }\n};\n\n\n/**\n * Colorize log arguments if enabled.\n *\n * @api public\n */\n\nfunction formatArgs(args) {\n  var useColors = this.useColors;\n\n  args[0] = (useColors ? '%c' : '')\n    + this.namespace\n    + (useColors ? ' %c' : ' ')\n    + args[0]\n    + (useColors ? '%c ' : ' ')\n    + '+' + exports.humanize(this.diff);\n\n  if (!useColors) return;\n\n  var c = 'color: ' + this.color;\n  args.splice(1, 0, c, 'color: inherit')\n\n  // the final \"%c\" is somewhat tricky, because there could be other\n  // arguments passed either before or after the %c, so we need to\n  // figure out the correct index to insert the CSS into\n  var index = 0;\n  var lastC = 0;\n  args[0].replace(/%[a-zA-Z%]/g, function(match) {\n    if ('%%' === match) return;\n    index++;\n    if ('%c' === match) {\n      // we only are interested in the *last* %c\n      // (the user may have provided their own)\n      lastC = index;\n    }\n  });\n\n  args.splice(lastC, 0, c);\n}\n\n/**\n * Invokes `console.log()` when available.\n * No-op when `console.log` is not a \"function\".\n *\n * @api public\n */\n\nfunction log() {\n  // this hackery is required for IE8/9, where\n  // the `console.log` function doesn't have 'apply'\n  return 'object' === typeof console\n    && console.log\n    && Function.prototype.apply.call(console.log, console, arguments);\n}\n\n/**\n * Save `namespaces`.\n *\n * @param {String} namespaces\n * @api private\n */\n\nfunction save(namespaces) {\n  try {\n    if (null == namespaces) {\n      exports.storage.removeItem('debug');\n    } else {\n      exports.storage.debug = namespaces;\n    }\n  } catch(e) {}\n}\n\n/**\n * Load `namespaces`.\n *\n * @return {String} returns the previously persisted debug modes\n * @api private\n */\n\nfunction load() {\n  var r;\n  try {\n    r = exports.storage.debug;\n  } catch(e) {}\n\n  // If debug isn't set in LS, and we're in Electron, try to load $DEBUG\n  if (!r && typeof process !== 'undefined' && 'env' in process) {\n    r = process.env.DEBUG;\n  }\n\n  return r;\n}\n\n/**\n * Enable namespaces listed in `localStorage.debug` initially.\n */\n\nexports.enable(load());\n\n/**\n * Localstorage attempts to return the localstorage.\n *\n * This is necessary because safari throws\n * when a user disables cookies/localstorage\n * and you attempt to access it.\n *\n * @return {LocalStorage}\n * @api private\n */\n\nfunction localstorage() {\n  try {\n    return window.localStorage;\n  } catch (e) {}\n}\n","\n/**\n * This is the common logic for both the Node.js and web browser\n * implementations of `debug()`.\n *\n * Expose `debug()` as the module.\n */\n\nexports = module.exports = createDebug.debug = createDebug['default'] = createDebug;\nexports.coerce = coerce;\nexports.disable = disable;\nexports.enable = enable;\nexports.enabled = enabled;\nexports.humanize = require('ms');\n\n/**\n * Active `debug` instances.\n */\nexports.instances = [];\n\n/**\n * The currently active debug mode names, and names to skip.\n */\n\nexports.names = [];\nexports.skips = [];\n\n/**\n * Map of special \"%n\" handling functions, for the debug \"format\" argument.\n *\n * Valid key names are a single, lower or upper-case letter, i.e. \"n\" and \"N\".\n */\n\nexports.formatters = {};\n\n/**\n * Select a color.\n * @param {String} namespace\n * @return {Number}\n * @api private\n */\n\nfunction selectColor(namespace) {\n  var hash = 0, i;\n\n  for (i in namespace) {\n    hash  = ((hash << 5) - hash) + namespace.charCodeAt(i);\n    hash |= 0; // Convert to 32bit integer\n  }\n\n  return exports.colors[Math.abs(hash) % exports.colors.length];\n}\n\n/**\n * Create a debugger with the given `namespace`.\n *\n * @param {String} namespace\n * @return {Function}\n * @api public\n */\n\nfunction createDebug(namespace) {\n\n  var prevTime;\n\n  function debug() {\n    // disabled?\n    if (!debug.enabled) return;\n\n    var self = debug;\n\n    // set `diff` timestamp\n    var curr = +new Date();\n    var ms = curr - (prevTime || curr);\n    self.diff = ms;\n    self.prev = prevTime;\n    self.curr = curr;\n    prevTime = curr;\n\n    // turn the `arguments` into a proper Array\n    var args = new Array(arguments.length);\n    for (var i = 0; i < args.length; i++) {\n      args[i] = arguments[i];\n    }\n\n    args[0] = exports.coerce(args[0]);\n\n    if ('string' !== typeof args[0]) {\n      // anything else let's inspect with %O\n      args.unshift('%O');\n    }\n\n    // apply any `formatters` transformations\n    var index = 0;\n    args[0] = args[0].replace(/%([a-zA-Z%])/g, function(match, format) {\n      // if we encounter an escaped % then don't increase the array index\n      if (match === '%%') return match;\n      index++;\n      var formatter = exports.formatters[format];\n      if ('function' === typeof formatter) {\n        var val = args[index];\n        match = formatter.call(self, val);\n\n        // now we need to remove `args[index]` since it's inlined in the `format`\n        args.splice(index, 1);\n        index--;\n      }\n      return match;\n    });\n\n    // apply env-specific formatting (colors, etc.)\n    exports.formatArgs.call(self, args);\n\n    var logFn = debug.log || exports.log || console.log.bind(console);\n    logFn.apply(self, args);\n  }\n\n  debug.namespace = namespace;\n  debug.enabled = exports.enabled(namespace);\n  debug.useColors = exports.useColors();\n  debug.color = selectColor(namespace);\n  debug.destroy = destroy;\n\n  // env-specific initialization logic for debug instances\n  if ('function' === typeof exports.init) {\n    exports.init(debug);\n  }\n\n  exports.instances.push(debug);\n\n  return debug;\n}\n\nfunction destroy () {\n  var index = exports.instances.indexOf(this);\n  if (index !== -1) {\n    exports.instances.splice(index, 1);\n    return true;\n  } else {\n    return false;\n  }\n}\n\n/**\n * Enables a debug mode by namespaces. This can include modes\n * separated by a colon and wildcards.\n *\n * @param {String} namespaces\n * @api public\n */\n\nfunction enable(namespaces) {\n  exports.save(namespaces);\n\n  exports.names = [];\n  exports.skips = [];\n\n  var i;\n  var split = (typeof namespaces === 'string' ? namespaces : '').split(/[\\s,]+/);\n  var len = split.length;\n\n  for (i = 0; i < len; i++) {\n    if (!split[i]) continue; // ignore empty strings\n    namespaces = split[i].replace(/\\*/g, '.*?');\n    if (namespaces[0] === '-') {\n      exports.skips.push(new RegExp('^' + namespaces.substr(1) + '$'));\n    } else {\n      exports.names.push(new RegExp('^' + namespaces + '$'));\n    }\n  }\n\n  for (i = 0; i < exports.instances.length; i++) {\n    var instance = exports.instances[i];\n    instance.enabled = exports.enabled(instance.namespace);\n  }\n}\n\n/**\n * Disable debug output.\n *\n * @api public\n */\n\nfunction disable() {\n  exports.enable('');\n}\n\n/**\n * Returns true if the given mode name is enabled, false otherwise.\n *\n * @param {String} name\n * @return {Boolean}\n * @api public\n */\n\nfunction enabled(name) {\n  if (name[name.length - 1] === '*') {\n    return true;\n  }\n  var i, len;\n  for (i = 0, len = exports.skips.length; i < len; i++) {\n    if (exports.skips[i].test(name)) {\n      return false;\n    }\n  }\n  for (i = 0, len = exports.names.length; i < len; i++) {\n    if (exports.names[i].test(name)) {\n      return true;\n    }\n  }\n  return false;\n}\n\n/**\n * Coerce `val`.\n *\n * @param {Mixed} val\n * @return {Mixed}\n * @api private\n */\n\nfunction coerce(val) {\n  if (val instanceof Error) return val.stack || val.message;\n  return val;\n}\n","/**\n * Helpers.\n */\n\nvar s = 1000;\nvar m = s * 60;\nvar h = m * 60;\nvar d = h * 24;\nvar y = d * 365.25;\n\n/**\n * Parse or format the given `val`.\n *\n * Options:\n *\n *  - `long` verbose formatting [false]\n *\n * @param {String|Number} val\n * @param {Object} [options]\n * @throws {Error} throw an error if val is not a non-empty string or a number\n * @return {String|Number}\n * @api public\n */\n\nmodule.exports = function(val, options) {\n  options = options || {};\n  var type = typeof val;\n  if (type === 'string' && val.length > 0) {\n    return parse(val);\n  } else if (type === 'number' && isNaN(val) === false) {\n    return options.long ? fmtLong(val) : fmtShort(val);\n  }\n  throw new Error(\n    'val is not a non-empty string or a valid number. val=' +\n      JSON.stringify(val)\n  );\n};\n\n/**\n * Parse the given `str` and return milliseconds.\n *\n * @param {String} str\n * @return {Number}\n * @api private\n */\n\nfunction parse(str) {\n  str = String(str);\n  if (str.length > 100) {\n    return;\n  }\n  var match = /^((?:\\d+)?\\.?\\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(\n    str\n  );\n  if (!match) {\n    return;\n  }\n  var n = parseFloat(match[1]);\n  var type = (match[2] || 'ms').toLowerCase();\n  switch (type) {\n    case 'years':\n    case 'year':\n    case 'yrs':\n    case 'yr':\n    case 'y':\n      return n * y;\n    case 'days':\n    case 'day':\n    case 'd':\n      return n * d;\n    case 'hours':\n    case 'hour':\n    case 'hrs':\n    case 'hr':\n    case 'h':\n      return n * h;\n    case 'minutes':\n    case 'minute':\n    case 'mins':\n    case 'min':\n    case 'm':\n      return n * m;\n    case 'seconds':\n    case 'second':\n    case 'secs':\n    case 'sec':\n    case 's':\n      return n * s;\n    case 'milliseconds':\n    case 'millisecond':\n    case 'msecs':\n    case 'msec':\n    case 'ms':\n      return n;\n    default:\n      return undefined;\n  }\n}\n\n/**\n * Short format for `ms`.\n *\n * @param {Number} ms\n * @return {String}\n * @api private\n */\n\nfunction fmtShort(ms) {\n  if (ms >= d) {\n    return Math.round(ms / d) + 'd';\n  }\n  if (ms >= h) {\n    return Math.round(ms / h) + 'h';\n  }\n  if (ms >= m) {\n    return Math.round(ms / m) + 'm';\n  }\n  if (ms >= s) {\n    return Math.round(ms / s) + 's';\n  }\n  return ms + 'ms';\n}\n\n/**\n * Long format for `ms`.\n *\n * @param {Number} ms\n * @return {String}\n * @api private\n */\n\nfunction fmtLong(ms) {\n  return plural(ms, d, 'day') ||\n    plural(ms, h, 'hour') ||\n    plural(ms, m, 'minute') ||\n    plural(ms, s, 'second') ||\n    ms + ' ms';\n}\n\n/**\n * Pluralization helper.\n */\n\nfunction plural(ms, n, name) {\n  if (ms < n) {\n    return;\n  }\n  if (ms < n * 1.5) {\n    return Math.floor(ms / n) + ' ' + name;\n  }\n  return Math.ceil(ms / n) + ' ' + name + 's';\n}\n","/*global Blob,File*/\n\n/**\n * Module requirements\n */\n\nvar isArray = require('isarray');\nvar isBuf = require('./is-buffer');\nvar toString = Object.prototype.toString;\nvar withNativeBlob = typeof Blob === 'function' || (typeof Blob !== 'undefined' && toString.call(Blob) === '[object BlobConstructor]');\nvar withNativeFile = typeof File === 'function' || (typeof File !== 'undefined' && toString.call(File) === '[object FileConstructor]');\n\n/**\n * Replaces every Buffer | ArrayBuffer in packet with a numbered placeholder.\n * Anything with blobs or files should be fed through removeBlobs before coming\n * here.\n *\n * @param {Object} packet - socket.io event packet\n * @return {Object} with deconstructed packet and list of buffers\n * @api public\n */\n\nexports.deconstructPacket = function(packet) {\n  var buffers = [];\n  var packetData = packet.data;\n  var pack = packet;\n  pack.data = _deconstructPacket(packetData, buffers);\n  pack.attachments = buffers.length; // number of binary 'attachments'\n  return {packet: pack, buffers: buffers};\n};\n\nfunction _deconstructPacket(data, buffers) {\n  if (!data) return data;\n\n  if (isBuf(data)) {\n    var placeholder = { _placeholder: true, num: buffers.length };\n    buffers.push(data);\n    return placeholder;\n  } else if (isArray(data)) {\n    var newData = new Array(data.length);\n    for (var i = 0; i < data.length; i++) {\n      newData[i] = _deconstructPacket(data[i], buffers);\n    }\n    return newData;\n  } else if (typeof data === 'object' && !(data instanceof Date)) {\n    var newData = {};\n    for (var key in data) {\n      newData[key] = _deconstructPacket(data[key], buffers);\n    }\n    return newData;\n  }\n  return data;\n}\n\n/**\n * Reconstructs a binary packet from its placeholder packet and buffers\n *\n * @param {Object} packet - event packet with placeholders\n * @param {Array} buffers - binary buffers to put in placeholder positions\n * @return {Object} reconstructed packet\n * @api public\n */\n\nexports.reconstructPacket = function(packet, buffers) {\n  packet.data = _reconstructPacket(packet.data, buffers);\n  packet.attachments = undefined; // no longer useful\n  return packet;\n};\n\nfunction _reconstructPacket(data, buffers) {\n  if (!data) return data;\n\n  if (data && data._placeholder === true) {\n    var isIndexValid =\n      typeof data.num === \"number\" &&\n      data.num >= 0 &&\n      data.num < buffers.length;\n    if (isIndexValid) {\n      return buffers[data.num]; // appropriate buffer (should be natural order anyway)\n    } else {\n      throw new Error(\"illegal attachments\");\n    }\n  } else if (isArray(data)) {\n    for (var i = 0; i < data.length; i++) {\n      data[i] = _reconstructPacket(data[i], buffers);\n    }\n  } else if (typeof data === 'object') {\n    for (var key in data) {\n      data[key] = _reconstructPacket(data[key], buffers);\n    }\n  }\n\n  return data;\n}\n\n/**\n * Asynchronously removes Blobs or Files from data via\n * FileReader's readAsArrayBuffer method. Used before encoding\n * data as msgpack. Calls callback with the blobless data.\n *\n * @param {Object} data\n * @param {Function} callback\n * @api private\n */\n\nexports.removeBlobs = function(data, callback) {\n  function _removeBlobs(obj, curKey, containingObject) {\n    if (!obj) return obj;\n\n    // convert any blob\n    if ((withNativeBlob && obj instanceof Blob) ||\n        (withNativeFile && obj instanceof File)) {\n      pendingBlobs++;\n\n      // async filereader\n      var fileReader = new FileReader();\n      fileReader.onload = function() { // this.result == arraybuffer\n        if (containingObject) {\n          containingObject[curKey] = this.result;\n        }\n        else {\n          bloblessData = this.result;\n        }\n\n        // if nothing pending its callback time\n        if(! --pendingBlobs) {\n          callback(bloblessData);\n        }\n      };\n\n      fileReader.readAsArrayBuffer(obj); // blob -> arraybuffer\n    } else if (isArray(obj)) { // handle array\n      for (var i = 0; i < obj.length; i++) {\n        _removeBlobs(obj[i], i, obj);\n      }\n    } else if (typeof obj === 'object' && !isBuf(obj)) { // and object\n      for (var key in obj) {\n        _removeBlobs(obj[key], key, obj);\n      }\n    }\n  }\n\n  var pendingBlobs = 0;\n  var bloblessData = data;\n  _removeBlobs(bloblessData);\n  if (!pendingBlobs) {\n    callback(bloblessData);\n  }\n};\n","\n/**\n * Module dependencies.\n */\n\nvar debug = require('debug')('socket.io-parser');\nvar Emitter = require('component-emitter');\nvar binary = require('./binary');\nvar isArray = require('isarray');\nvar isBuf = require('./is-buffer');\n\n/**\n * Protocol version.\n *\n * @api public\n */\n\nexports.protocol = 4;\n\n/**\n * Packet types.\n *\n * @api public\n */\n\nexports.types = [\n  'CONNECT',\n  'DISCONNECT',\n  'EVENT',\n  'ACK',\n  'ERROR',\n  'BINARY_EVENT',\n  'BINARY_ACK'\n];\n\n/**\n * Packet type `connect`.\n *\n * @api public\n */\n\nexports.CONNECT = 0;\n\n/**\n * Packet type `disconnect`.\n *\n * @api public\n */\n\nexports.DISCONNECT = 1;\n\n/**\n * Packet type `event`.\n *\n * @api public\n */\n\nexports.EVENT = 2;\n\n/**\n * Packet type `ack`.\n *\n * @api public\n */\n\nexports.ACK = 3;\n\n/**\n * Packet type `error`.\n *\n * @api public\n */\n\nexports.ERROR = 4;\n\n/**\n * Packet type 'binary event'\n *\n * @api public\n */\n\nexports.BINARY_EVENT = 5;\n\n/**\n * Packet type `binary ack`. For acks with binary arguments.\n *\n * @api public\n */\n\nexports.BINARY_ACK = 6;\n\n/**\n * Encoder constructor.\n *\n * @api public\n */\n\nexports.Encoder = Encoder;\n\n/**\n * Decoder constructor.\n *\n * @api public\n */\n\nexports.Decoder = Decoder;\n\n/**\n * A socket.io Encoder instance\n *\n * @api public\n */\n\nfunction Encoder() {}\n\nvar ERROR_PACKET = exports.ERROR + '\"encode error\"';\n\n/**\n * Encode a packet as a single string if non-binary, or as a\n * buffer sequence, depending on packet type.\n *\n * @param {Object} obj - packet object\n * @param {Function} callback - function to handle encodings (likely engine.write)\n * @return Calls callback with Array of encodings\n * @api public\n */\n\nEncoder.prototype.encode = function(obj, callback){\n  debug('encoding packet %j', obj);\n\n  if (exports.BINARY_EVENT === obj.type || exports.BINARY_ACK === obj.type) {\n    encodeAsBinary(obj, callback);\n  } else {\n    var encoding = encodeAsString(obj);\n    callback([encoding]);\n  }\n};\n\n/**\n * Encode packet as string.\n *\n * @param {Object} packet\n * @return {String} encoded\n * @api private\n */\n\nfunction encodeAsString(obj) {\n\n  // first is type\n  var str = '' + obj.type;\n\n  // attachments if we have them\n  if (exports.BINARY_EVENT === obj.type || exports.BINARY_ACK === obj.type) {\n    str += obj.attachments + '-';\n  }\n\n  // if we have a namespace other than `/`\n  // we append it followed by a comma `,`\n  if (obj.nsp && '/' !== obj.nsp) {\n    str += obj.nsp + ',';\n  }\n\n  // immediately followed by the id\n  if (null != obj.id) {\n    str += obj.id;\n  }\n\n  // json data\n  if (null != obj.data) {\n    var payload = tryStringify(obj.data);\n    if (payload !== false) {\n      str += payload;\n    } else {\n      return ERROR_PACKET;\n    }\n  }\n\n  debug('encoded %j as %s', obj, str);\n  return str;\n}\n\nfunction tryStringify(str) {\n  try {\n    return JSON.stringify(str);\n  } catch(e){\n    return false;\n  }\n}\n\n/**\n * Encode packet as 'buffer sequence' by removing blobs, and\n * deconstructing packet into object with placeholders and\n * a list of buffers.\n *\n * @param {Object} packet\n * @return {Buffer} encoded\n * @api private\n */\n\nfunction encodeAsBinary(obj, callback) {\n\n  function writeEncoding(bloblessData) {\n    var deconstruction = binary.deconstructPacket(bloblessData);\n    var pack = encodeAsString(deconstruction.packet);\n    var buffers = deconstruction.buffers;\n\n    buffers.unshift(pack); // add packet info to beginning of data list\n    callback(buffers); // write all the buffers\n  }\n\n  binary.removeBlobs(obj, writeEncoding);\n}\n\n/**\n * A socket.io Decoder instance\n *\n * @return {Object} decoder\n * @api public\n */\n\nfunction Decoder() {\n  this.reconstructor = null;\n}\n\n/**\n * Mix in `Emitter` with Decoder.\n */\n\nEmitter(Decoder.prototype);\n\n/**\n * Decodes an encoded packet string into packet JSON.\n *\n * @param {String} obj - encoded packet\n * @return {Object} packet\n * @api public\n */\n\nDecoder.prototype.add = function(obj) {\n  var packet;\n  if (typeof obj === 'string') {\n    if (this.reconstructor) {\n      throw new Error(\"got plaintext data when reconstructing a packet\");\n    }\n    packet = decodeString(obj);\n    if (exports.BINARY_EVENT === packet.type || exports.BINARY_ACK === packet.type) { // binary packet's json\n      this.reconstructor = new BinaryReconstructor(packet);\n\n      // no attachments, labeled binary but no binary data to follow\n      if (this.reconstructor.reconPack.attachments === 0) {\n        this.emit('decoded', packet);\n      }\n    } else { // non-binary full packet\n      this.emit('decoded', packet);\n    }\n  } else if (isBuf(obj) || obj.base64) { // raw binary data\n    if (!this.reconstructor) {\n      throw new Error('got binary data when not reconstructing a packet');\n    } else {\n      packet = this.reconstructor.takeBinaryData(obj);\n      if (packet) { // received final buffer\n        this.reconstructor = null;\n        this.emit('decoded', packet);\n      }\n    }\n  } else {\n    throw new Error('Unknown type: ' + obj);\n  }\n};\n\n/**\n * Decode a packet String (JSON data)\n *\n * @param {String} str\n * @return {Object} packet\n * @api private\n */\n\nfunction decodeString(str) {\n  var i = 0;\n  // look up type\n  var p = {\n    type: Number(str.charAt(0))\n  };\n\n  if (null == exports.types[p.type]) {\n    return error('unknown packet type ' + p.type);\n  }\n\n  // look up attachments if type binary\n  if (exports.BINARY_EVENT === p.type || exports.BINARY_ACK === p.type) {\n    var start = i + 1;\n    while (str.charAt(++i) !== '-' && i != str.length) {}\n    var buf = str.substring(start, i);\n    if (buf != Number(buf) || str.charAt(i) !== '-') {\n      throw new Error('Illegal attachments');\n    }\n    p.attachments = Number(buf);\n  }\n\n  // look up namespace (if any)\n  if ('/' === str.charAt(i + 1)) {\n    var start = i + 1;\n    while (++i) {\n      var c = str.charAt(i);\n      if (',' === c) break;\n      if (i === str.length) break;\n    }\n    p.nsp = str.substring(start, i);\n  } else {\n    p.nsp = '/';\n  }\n\n  // look up id\n  var next = str.charAt(i + 1);\n  if ('' !== next && Number(next) == next) {\n    var start = i + 1;\n    while (++i) {\n      var c = str.charAt(i);\n      if (null == c || Number(c) != c) {\n        --i;\n        break;\n      }\n      if (i === str.length) break;\n    }\n    p.id = Number(str.substring(start, i + 1));\n  }\n\n  // look up json data\n  if (str.charAt(++i)) {\n    var payload = tryParse(str.substr(i));\n    var isPayloadValid = payload !== false && (p.type === exports.ERROR || isArray(payload));\n    if (isPayloadValid) {\n      p.data = payload;\n    } else {\n      return error('invalid payload');\n    }\n  }\n\n  debug('decoded %s as %j', str, p);\n  return p;\n}\n\nfunction tryParse(str) {\n  try {\n    return JSON.parse(str);\n  } catch(e){\n    return false;\n  }\n}\n\n/**\n * Deallocates a parser's resources\n *\n * @api public\n */\n\nDecoder.prototype.destroy = function() {\n  if (this.reconstructor) {\n    this.reconstructor.finishedReconstruction();\n  }\n};\n\n/**\n * A manager of a binary event's 'buffer sequence'. Should\n * be constructed whenever a packet of type BINARY_EVENT is\n * decoded.\n *\n * @param {Object} packet\n * @return {BinaryReconstructor} initialized reconstructor\n * @api private\n */\n\nfunction BinaryReconstructor(packet) {\n  this.reconPack = packet;\n  this.buffers = [];\n}\n\n/**\n * Method to be called when binary data received from connection\n * after a BINARY_EVENT packet.\n *\n * @param {Buffer | ArrayBuffer} binData - the raw binary data received\n * @return {null | Object} returns null if more binary data is expected or\n *   a reconstructed packet object if all buffers have been received.\n * @api private\n */\n\nBinaryReconstructor.prototype.takeBinaryData = function(binData) {\n  this.buffers.push(binData);\n  if (this.buffers.length === this.reconPack.attachments) { // done with buffer list\n    var packet = binary.reconstructPacket(this.reconPack, this.buffers);\n    this.finishedReconstruction();\n    return packet;\n  }\n  return null;\n};\n\n/**\n * Cleans up binary packet reconstruction variables.\n *\n * @api private\n */\n\nBinaryReconstructor.prototype.finishedReconstruction = function() {\n  this.reconPack = null;\n  this.buffers = [];\n};\n\nfunction error(msg) {\n  return {\n    type: exports.ERROR,\n    data: 'parser error: ' + msg\n  };\n}\n","\nmodule.exports = isBuf;\n\nvar withNativeBuffer = typeof Buffer === 'function' && typeof Buffer.isBuffer === 'function';\nvar withNativeArrayBuffer = typeof ArrayBuffer === 'function';\n\nvar isView = function (obj) {\n  return typeof ArrayBuffer.isView === 'function' ? ArrayBuffer.isView(obj) : (obj.buffer instanceof ArrayBuffer);\n};\n\n/**\n * Returns true if obj is a buffer or an arraybuffer.\n *\n * @api private\n */\n\nfunction isBuf(obj) {\n  return (withNativeBuffer && Buffer.isBuffer(obj)) ||\n          (withNativeArrayBuffer && (obj instanceof ArrayBuffer || isView(obj)));\n}\n","/**\n * This is the web browser implementation of `debug()`.\n *\n * Expose `debug()` as the module.\n */\n\nexports = module.exports = require('./debug');\nexports.log = log;\nexports.formatArgs = formatArgs;\nexports.save = save;\nexports.load = load;\nexports.useColors = useColors;\nexports.storage = 'undefined' != typeof chrome\n               && 'undefined' != typeof chrome.storage\n                  ? chrome.storage.local\n                  : localstorage();\n\n/**\n * Colors.\n */\n\nexports.colors = [\n  '#0000CC', '#0000FF', '#0033CC', '#0033FF', '#0066CC', '#0066FF', '#0099CC',\n  '#0099FF', '#00CC00', '#00CC33', '#00CC66', '#00CC99', '#00CCCC', '#00CCFF',\n  '#3300CC', '#3300FF', '#3333CC', '#3333FF', '#3366CC', '#3366FF', '#3399CC',\n  '#3399FF', '#33CC00', '#33CC33', '#33CC66', '#33CC99', '#33CCCC', '#33CCFF',\n  '#6600CC', '#6600FF', '#6633CC', '#6633FF', '#66CC00', '#66CC33', '#9900CC',\n  '#9900FF', '#9933CC', '#9933FF', '#99CC00', '#99CC33', '#CC0000', '#CC0033',\n  '#CC0066', '#CC0099', '#CC00CC', '#CC00FF', '#CC3300', '#CC3333', '#CC3366',\n  '#CC3399', '#CC33CC', '#CC33FF', '#CC6600', '#CC6633', '#CC9900', '#CC9933',\n  '#CCCC00', '#CCCC33', '#FF0000', '#FF0033', '#FF0066', '#FF0099', '#FF00CC',\n  '#FF00FF', '#FF3300', '#FF3333', '#FF3366', '#FF3399', '#FF33CC', '#FF33FF',\n  '#FF6600', '#FF6633', '#FF9900', '#FF9933', '#FFCC00', '#FFCC33'\n];\n\n/**\n * Currently only WebKit-based Web Inspectors, Firefox >= v31,\n * and the Firebug extension (any Firefox version) are known\n * to support \"%c\" CSS customizations.\n *\n * TODO: add a `localStorage` variable to explicitly enable/disable colors\n */\n\nfunction useColors() {\n  // NB: In an Electron preload script, document will be defined but not fully\n  // initialized. Since we know we're in Chrome, we'll just detect this case\n  // explicitly\n  if (typeof window !== 'undefined' && window.process && window.process.type === 'renderer') {\n    return true;\n  }\n\n  // Internet Explorer and Edge do not support colors.\n  if (typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/(edge|trident)\\/(\\d+)/)) {\n    return false;\n  }\n\n  // is webkit? http://stackoverflow.com/a/16459606/376773\n  // document is undefined in react-native: https://github.com/facebook/react-native/pull/1632\n  return (typeof document !== 'undefined' && document.documentElement && document.documentElement.style && document.documentElement.style.WebkitAppearance) ||\n    // is firebug? http://stackoverflow.com/a/398120/376773\n    (typeof window !== 'undefined' && window.console && (window.console.firebug || (window.console.exception && window.console.table))) ||\n    // is firefox >= v31?\n    // https://developer.mozilla.org/en-US/docs/Tools/Web_Console#Styling_messages\n    (typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/firefox\\/(\\d+)/) && parseInt(RegExp.$1, 10) >= 31) ||\n    // double check webkit in userAgent just in case we are in a worker\n    (typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/applewebkit\\/(\\d+)/));\n}\n\n/**\n * Map %j to `JSON.stringify()`, since no Web Inspectors do that by default.\n */\n\nexports.formatters.j = function(v) {\n  try {\n    return JSON.stringify(v);\n  } catch (err) {\n    return '[UnexpectedJSONParseError]: ' + err.message;\n  }\n};\n\n\n/**\n * Colorize log arguments if enabled.\n *\n * @api public\n */\n\nfunction formatArgs(args) {\n  var useColors = this.useColors;\n\n  args[0] = (useColors ? '%c' : '')\n    + this.namespace\n    + (useColors ? ' %c' : ' ')\n    + args[0]\n    + (useColors ? '%c ' : ' ')\n    + '+' + exports.humanize(this.diff);\n\n  if (!useColors) return;\n\n  var c = 'color: ' + this.color;\n  args.splice(1, 0, c, 'color: inherit')\n\n  // the final \"%c\" is somewhat tricky, because there could be other\n  // arguments passed either before or after the %c, so we need to\n  // figure out the correct index to insert the CSS into\n  var index = 0;\n  var lastC = 0;\n  args[0].replace(/%[a-zA-Z%]/g, function(match) {\n    if ('%%' === match) return;\n    index++;\n    if ('%c' === match) {\n      // we only are interested in the *last* %c\n      // (the user may have provided their own)\n      lastC = index;\n    }\n  });\n\n  args.splice(lastC, 0, c);\n}\n\n/**\n * Invokes `console.log()` when available.\n * No-op when `console.log` is not a \"function\".\n *\n * @api public\n */\n\nfunction log() {\n  // this hackery is required for IE8/9, where\n  // the `console.log` function doesn't have 'apply'\n  return 'object' === typeof console\n    && console.log\n    && Function.prototype.apply.call(console.log, console, arguments);\n}\n\n/**\n * Save `namespaces`.\n *\n * @param {String} namespaces\n * @api private\n */\n\nfunction save(namespaces) {\n  try {\n    if (null == namespaces) {\n      exports.storage.removeItem('debug');\n    } else {\n      exports.storage.debug = namespaces;\n    }\n  } catch(e) {}\n}\n\n/**\n * Load `namespaces`.\n *\n * @return {String} returns the previously persisted debug modes\n * @api private\n */\n\nfunction load() {\n  var r;\n  try {\n    r = exports.storage.debug;\n  } catch(e) {}\n\n  // If debug isn't set in LS, and we're in Electron, try to load $DEBUG\n  if (!r && typeof process !== 'undefined' && 'env' in process) {\n    r = process.env.DEBUG;\n  }\n\n  return r;\n}\n\n/**\n * Enable namespaces listed in `localStorage.debug` initially.\n */\n\nexports.enable(load());\n\n/**\n * Localstorage attempts to return the localstorage.\n *\n * This is necessary because safari throws\n * when a user disables cookies/localstorage\n * and you attempt to access it.\n *\n * @return {LocalStorage}\n * @api private\n */\n\nfunction localstorage() {\n  try {\n    return window.localStorage;\n  } catch (e) {}\n}\n","\n/**\n * This is the common logic for both the Node.js and web browser\n * implementations of `debug()`.\n *\n * Expose `debug()` as the module.\n */\n\nexports = module.exports = createDebug.debug = createDebug['default'] = createDebug;\nexports.coerce = coerce;\nexports.disable = disable;\nexports.enable = enable;\nexports.enabled = enabled;\nexports.humanize = require('ms');\n\n/**\n * Active `debug` instances.\n */\nexports.instances = [];\n\n/**\n * The currently active debug mode names, and names to skip.\n */\n\nexports.names = [];\nexports.skips = [];\n\n/**\n * Map of special \"%n\" handling functions, for the debug \"format\" argument.\n *\n * Valid key names are a single, lower or upper-case letter, i.e. \"n\" and \"N\".\n */\n\nexports.formatters = {};\n\n/**\n * Select a color.\n * @param {String} namespace\n * @return {Number}\n * @api private\n */\n\nfunction selectColor(namespace) {\n  var hash = 0, i;\n\n  for (i in namespace) {\n    hash  = ((hash << 5) - hash) + namespace.charCodeAt(i);\n    hash |= 0; // Convert to 32bit integer\n  }\n\n  return exports.colors[Math.abs(hash) % exports.colors.length];\n}\n\n/**\n * Create a debugger with the given `namespace`.\n *\n * @param {String} namespace\n * @return {Function}\n * @api public\n */\n\nfunction createDebug(namespace) {\n\n  var prevTime;\n\n  function debug() {\n    // disabled?\n    if (!debug.enabled) return;\n\n    var self = debug;\n\n    // set `diff` timestamp\n    var curr = +new Date();\n    var ms = curr - (prevTime || curr);\n    self.diff = ms;\n    self.prev = prevTime;\n    self.curr = curr;\n    prevTime = curr;\n\n    // turn the `arguments` into a proper Array\n    var args = new Array(arguments.length);\n    for (var i = 0; i < args.length; i++) {\n      args[i] = arguments[i];\n    }\n\n    args[0] = exports.coerce(args[0]);\n\n    if ('string' !== typeof args[0]) {\n      // anything else let's inspect with %O\n      args.unshift('%O');\n    }\n\n    // apply any `formatters` transformations\n    var index = 0;\n    args[0] = args[0].replace(/%([a-zA-Z%])/g, function(match, format) {\n      // if we encounter an escaped % then don't increase the array index\n      if (match === '%%') return match;\n      index++;\n      var formatter = exports.formatters[format];\n      if ('function' === typeof formatter) {\n        var val = args[index];\n        match = formatter.call(self, val);\n\n        // now we need to remove `args[index]` since it's inlined in the `format`\n        args.splice(index, 1);\n        index--;\n      }\n      return match;\n    });\n\n    // apply env-specific formatting (colors, etc.)\n    exports.formatArgs.call(self, args);\n\n    var logFn = debug.log || exports.log || console.log.bind(console);\n    logFn.apply(self, args);\n  }\n\n  debug.namespace = namespace;\n  debug.enabled = exports.enabled(namespace);\n  debug.useColors = exports.useColors();\n  debug.color = selectColor(namespace);\n  debug.destroy = destroy;\n\n  // env-specific initialization logic for debug instances\n  if ('function' === typeof exports.init) {\n    exports.init(debug);\n  }\n\n  exports.instances.push(debug);\n\n  return debug;\n}\n\nfunction destroy () {\n  var index = exports.instances.indexOf(this);\n  if (index !== -1) {\n    exports.instances.splice(index, 1);\n    return true;\n  } else {\n    return false;\n  }\n}\n\n/**\n * Enables a debug mode by namespaces. This can include modes\n * separated by a colon and wildcards.\n *\n * @param {String} namespaces\n * @api public\n */\n\nfunction enable(namespaces) {\n  exports.save(namespaces);\n\n  exports.names = [];\n  exports.skips = [];\n\n  var i;\n  var split = (typeof namespaces === 'string' ? namespaces : '').split(/[\\s,]+/);\n  var len = split.length;\n\n  for (i = 0; i < len; i++) {\n    if (!split[i]) continue; // ignore empty strings\n    namespaces = split[i].replace(/\\*/g, '.*?');\n    if (namespaces[0] === '-') {\n      exports.skips.push(new RegExp('^' + namespaces.substr(1) + '$'));\n    } else {\n      exports.names.push(new RegExp('^' + namespaces + '$'));\n    }\n  }\n\n  for (i = 0; i < exports.instances.length; i++) {\n    var instance = exports.instances[i];\n    instance.enabled = exports.enabled(instance.namespace);\n  }\n}\n\n/**\n * Disable debug output.\n *\n * @api public\n */\n\nfunction disable() {\n  exports.enable('');\n}\n\n/**\n * Returns true if the given mode name is enabled, false otherwise.\n *\n * @param {String} name\n * @return {Boolean}\n * @api public\n */\n\nfunction enabled(name) {\n  if (name[name.length - 1] === '*') {\n    return true;\n  }\n  var i, len;\n  for (i = 0, len = exports.skips.length; i < len; i++) {\n    if (exports.skips[i].test(name)) {\n      return false;\n    }\n  }\n  for (i = 0, len = exports.names.length; i < len; i++) {\n    if (exports.names[i].test(name)) {\n      return true;\n    }\n  }\n  return false;\n}\n\n/**\n * Coerce `val`.\n *\n * @param {Mixed} val\n * @return {Mixed}\n * @api private\n */\n\nfunction coerce(val) {\n  if (val instanceof Error) return val.stack || val.message;\n  return val;\n}\n","var toString = {}.toString;\n\nmodule.exports = Array.isArray || function (arr) {\n  return toString.call(arr) == '[object Array]';\n};\n","/**\n * Helpers.\n */\n\nvar s = 1000;\nvar m = s * 60;\nvar h = m * 60;\nvar d = h * 24;\nvar y = d * 365.25;\n\n/**\n * Parse or format the given `val`.\n *\n * Options:\n *\n *  - `long` verbose formatting [false]\n *\n * @param {String|Number} val\n * @param {Object} [options]\n * @throws {Error} throw an error if val is not a non-empty string or a number\n * @return {String|Number}\n * @api public\n */\n\nmodule.exports = function(val, options) {\n  options = options || {};\n  var type = typeof val;\n  if (type === 'string' && val.length > 0) {\n    return parse(val);\n  } else if (type === 'number' && isNaN(val) === false) {\n    return options.long ? fmtLong(val) : fmtShort(val);\n  }\n  throw new Error(\n    'val is not a non-empty string or a valid number. val=' +\n      JSON.stringify(val)\n  );\n};\n\n/**\n * Parse the given `str` and return milliseconds.\n *\n * @param {String} str\n * @return {Number}\n * @api private\n */\n\nfunction parse(str) {\n  str = String(str);\n  if (str.length > 100) {\n    return;\n  }\n  var match = /^((?:\\d+)?\\.?\\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(\n    str\n  );\n  if (!match) {\n    return;\n  }\n  var n = parseFloat(match[1]);\n  var type = (match[2] || 'ms').toLowerCase();\n  switch (type) {\n    case 'years':\n    case 'year':\n    case 'yrs':\n    case 'yr':\n    case 'y':\n      return n * y;\n    case 'days':\n    case 'day':\n    case 'd':\n      return n * d;\n    case 'hours':\n    case 'hour':\n    case 'hrs':\n    case 'hr':\n    case 'h':\n      return n * h;\n    case 'minutes':\n    case 'minute':\n    case 'mins':\n    case 'min':\n    case 'm':\n      return n * m;\n    case 'seconds':\n    case 'second':\n    case 'secs':\n    case 'sec':\n    case 's':\n      return n * s;\n    case 'milliseconds':\n    case 'millisecond':\n    case 'msecs':\n    case 'msec':\n    case 'ms':\n      return n;\n    default:\n      return undefined;\n  }\n}\n\n/**\n * Short format for `ms`.\n *\n * @param {Number} ms\n * @return {String}\n * @api private\n */\n\nfunction fmtShort(ms) {\n  if (ms >= d) {\n    return Math.round(ms / d) + 'd';\n  }\n  if (ms >= h) {\n    return Math.round(ms / h) + 'h';\n  }\n  if (ms >= m) {\n    return Math.round(ms / m) + 'm';\n  }\n  if (ms >= s) {\n    return Math.round(ms / s) + 's';\n  }\n  return ms + 'ms';\n}\n\n/**\n * Long format for `ms`.\n *\n * @param {Number} ms\n * @return {String}\n * @api private\n */\n\nfunction fmtLong(ms) {\n  return plural(ms, d, 'day') ||\n    plural(ms, h, 'hour') ||\n    plural(ms, m, 'minute') ||\n    plural(ms, s, 'second') ||\n    ms + ' ms';\n}\n\n/**\n * Pluralization helper.\n */\n\nfunction plural(ms, n, name) {\n  if (ms < n) {\n    return;\n  }\n  if (ms < n * 1.5) {\n    return Math.floor(ms / n) + ' ' + name;\n  }\n  return Math.ceil(ms / n) + ' ' + name + 's';\n}\n","(function (global, factory) {\n\ttypeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n\ttypeof define === 'function' && define.amd ? define(factory) :\n\t(global.BrowserSpriteSymbol = factory());\n}(this, (function () { 'use strict';\n\nvar SpriteSymbol = function SpriteSymbol(ref) {\n  var id = ref.id;\n  var viewBox = ref.viewBox;\n  var content = ref.content;\n\n  this.id = id;\n  this.viewBox = viewBox;\n  this.content = content;\n};\n\n/**\n * @return {string}\n */\nSpriteSymbol.prototype.stringify = function stringify () {\n  return this.content;\n};\n\n/**\n * @return {string}\n */\nSpriteSymbol.prototype.toString = function toString () {\n  return this.stringify();\n};\n\nSpriteSymbol.prototype.destroy = function destroy () {\n    var this$1 = this;\n\n  ['id', 'viewBox', 'content'].forEach(function (prop) { return delete this$1[prop]; });\n};\n\n/**\n * @param {string} content\n * @return {Element}\n */\nvar parse = function (content) {\n  var hasImportNode = !!document.importNode;\n  var doc = new DOMParser().parseFromString(content, 'image/svg+xml').documentElement;\n\n  /**\n   * Fix for browser which are throwing WrongDocumentError\n   * if you insert an element which is not part of the document\n   * @see http://stackoverflow.com/a/7986519/4624403\n   */\n  if (hasImportNode) {\n    return document.importNode(doc, true);\n  }\n\n  return doc;\n};\n\nvar commonjsGlobal = typeof window !== 'undefined' ? window : typeof global !== 'undefined' ? global : typeof self !== 'undefined' ? self : {};\n\n\n\n\n\nfunction createCommonjsModule(fn, module) {\n\treturn module = { exports: {} }, fn(module, module.exports), module.exports;\n}\n\nvar deepmerge = createCommonjsModule(function (module, exports) {\n(function (root, factory) {\n    if (typeof undefined === 'function' && undefined.amd) {\n        undefined(factory);\n    } else {\n        module.exports = factory();\n    }\n}(commonjsGlobal, function () {\n\nfunction isMergeableObject(val) {\n    var nonNullObject = val && typeof val === 'object';\n\n    return nonNullObject\n        && Object.prototype.toString.call(val) !== '[object RegExp]'\n        && Object.prototype.toString.call(val) !== '[object Date]'\n}\n\nfunction emptyTarget(val) {\n    return Array.isArray(val) ? [] : {}\n}\n\nfunction cloneIfNecessary(value, optionsArgument) {\n    var clone = optionsArgument && optionsArgument.clone === true;\n    return (clone && isMergeableObject(value)) ? deepmerge(emptyTarget(value), value, optionsArgument) : value\n}\n\nfunction defaultArrayMerge(target, source, optionsArgument) {\n    var destination = target.slice();\n    source.forEach(function(e, i) {\n        if (typeof destination[i] === 'undefined') {\n            destination[i] = cloneIfNecessary(e, optionsArgument);\n        } else if (isMergeableObject(e)) {\n            destination[i] = deepmerge(target[i], e, optionsArgument);\n        } else if (target.indexOf(e) === -1) {\n            destination.push(cloneIfNecessary(e, optionsArgument));\n        }\n    });\n    return destination\n}\n\nfunction mergeObject(target, source, optionsArgument) {\n    var destination = {};\n    if (isMergeableObject(target)) {\n        Object.keys(target).forEach(function (key) {\n            destination[key] = cloneIfNecessary(target[key], optionsArgument);\n        });\n    }\n    Object.keys(source).forEach(function (key) {\n        if (!isMergeableObject(source[key]) || !target[key]) {\n            destination[key] = cloneIfNecessary(source[key], optionsArgument);\n        } else {\n            destination[key] = deepmerge(target[key], source[key], optionsArgument);\n        }\n    });\n    return destination\n}\n\nfunction deepmerge(target, source, optionsArgument) {\n    var array = Array.isArray(source);\n    var options = optionsArgument || { arrayMerge: defaultArrayMerge };\n    var arrayMerge = options.arrayMerge || defaultArrayMerge;\n\n    if (array) {\n        return Array.isArray(target) ? arrayMerge(target, source, optionsArgument) : cloneIfNecessary(source, optionsArgument)\n    } else {\n        return mergeObject(target, source, optionsArgument)\n    }\n}\n\ndeepmerge.all = function deepmergeAll(array, optionsArgument) {\n    if (!Array.isArray(array) || array.length < 2) {\n        throw new Error('first argument should be an array with at least two elements')\n    }\n\n    // we are sure there are at least 2 values, so it is safe to have no initial value\n    return array.reduce(function(prev, next) {\n        return deepmerge(prev, next, optionsArgument)\n    })\n};\n\nreturn deepmerge\n\n}));\n});\n\nvar namespaces_1 = createCommonjsModule(function (module, exports) {\nvar namespaces = {\n  svg: {\n    name: 'xmlns',\n    uri: 'http://www.w3.org/2000/svg'\n  },\n  xlink: {\n    name: 'xmlns:xlink',\n    uri: 'http://www.w3.org/1999/xlink'\n  }\n};\n\nexports.default = namespaces;\nmodule.exports = exports.default;\n});\n\n/**\n * @param {Object} attrs\n * @return {string}\n */\nvar objectToAttrsString = function (attrs) {\n  return Object.keys(attrs).map(function (attr) {\n    var value = attrs[attr].toString().replace(/\"/g, '&quot;');\n    return (attr + \"=\\\"\" + value + \"\\\"\");\n  }).join(' ');\n};\n\nvar svg = namespaces_1.svg;\nvar xlink = namespaces_1.xlink;\n\nvar defaultAttrs = {};\ndefaultAttrs[svg.name] = svg.uri;\ndefaultAttrs[xlink.name] = xlink.uri;\n\n/**\n * @param {string} [content]\n * @param {Object} [attributes]\n * @return {string}\n */\nvar wrapInSvgString = function (content, attributes) {\n  if ( content === void 0 ) content = '';\n\n  var attrs = deepmerge(defaultAttrs, attributes || {});\n  var attrsRendered = objectToAttrsString(attrs);\n  return (\"<svg \" + attrsRendered + \">\" + content + \"</svg>\");\n};\n\nvar BrowserSpriteSymbol = (function (SpriteSymbol$$1) {\n  function BrowserSpriteSymbol () {\n    SpriteSymbol$$1.apply(this, arguments);\n  }\n\n  if ( SpriteSymbol$$1 ) BrowserSpriteSymbol.__proto__ = SpriteSymbol$$1;\n  BrowserSpriteSymbol.prototype = Object.create( SpriteSymbol$$1 && SpriteSymbol$$1.prototype );\n  BrowserSpriteSymbol.prototype.constructor = BrowserSpriteSymbol;\n\n  var prototypeAccessors = { isMounted: {} };\n\n  prototypeAccessors.isMounted.get = function () {\n    return !!this.node;\n  };\n\n  /**\n   * @param {Element} node\n   * @return {BrowserSpriteSymbol}\n   */\n  BrowserSpriteSymbol.createFromExistingNode = function createFromExistingNode (node) {\n    return new BrowserSpriteSymbol({\n      id: node.getAttribute('id'),\n      viewBox: node.getAttribute('viewBox'),\n      content: node.outerHTML\n    });\n  };\n\n  BrowserSpriteSymbol.prototype.destroy = function destroy () {\n    if (this.isMounted) {\n      this.unmount();\n    }\n    SpriteSymbol$$1.prototype.destroy.call(this);\n  };\n\n  /**\n   * @param {Element|string} target\n   * @return {Element}\n   */\n  BrowserSpriteSymbol.prototype.mount = function mount (target) {\n    if (this.isMounted) {\n      return this.node;\n    }\n\n    var mountTarget = typeof target === 'string' ? document.querySelector(target) : target;\n    var node = this.render();\n    this.node = node;\n\n    mountTarget.appendChild(node);\n\n    return node;\n  };\n\n  /**\n   * @return {Element}\n   */\n  BrowserSpriteSymbol.prototype.render = function render () {\n    var content = this.stringify();\n    return parse(wrapInSvgString(content)).childNodes[0];\n  };\n\n  BrowserSpriteSymbol.prototype.unmount = function unmount () {\n    this.node.parentNode.removeChild(this.node);\n  };\n\n  Object.defineProperties( BrowserSpriteSymbol.prototype, prototypeAccessors );\n\n  return BrowserSpriteSymbol;\n}(SpriteSymbol));\n\nreturn BrowserSpriteSymbol;\n\n})));\n","(function (global, factory) {\n\ttypeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n\ttypeof define === 'function' && define.amd ? define(factory) :\n\t(global.BrowserSprite = factory());\n}(this, (function () { 'use strict';\n\nvar commonjsGlobal = typeof window !== 'undefined' ? window : typeof global !== 'undefined' ? global : typeof self !== 'undefined' ? self : {};\n\n\n\n\n\nfunction createCommonjsModule(fn, module) {\n\treturn module = { exports: {} }, fn(module, module.exports), module.exports;\n}\n\nvar deepmerge = createCommonjsModule(function (module, exports) {\n(function (root, factory) {\n    if (typeof undefined === 'function' && undefined.amd) {\n        undefined(factory);\n    } else {\n        module.exports = factory();\n    }\n}(commonjsGlobal, function () {\n\nfunction isMergeableObject(val) {\n    var nonNullObject = val && typeof val === 'object';\n\n    return nonNullObject\n        && Object.prototype.toString.call(val) !== '[object RegExp]'\n        && Object.prototype.toString.call(val) !== '[object Date]'\n}\n\nfunction emptyTarget(val) {\n    return Array.isArray(val) ? [] : {}\n}\n\nfunction cloneIfNecessary(value, optionsArgument) {\n    var clone = optionsArgument && optionsArgument.clone === true;\n    return (clone && isMergeableObject(value)) ? deepmerge(emptyTarget(value), value, optionsArgument) : value\n}\n\nfunction defaultArrayMerge(target, source, optionsArgument) {\n    var destination = target.slice();\n    source.forEach(function(e, i) {\n        if (typeof destination[i] === 'undefined') {\n            destination[i] = cloneIfNecessary(e, optionsArgument);\n        } else if (isMergeableObject(e)) {\n            destination[i] = deepmerge(target[i], e, optionsArgument);\n        } else if (target.indexOf(e) === -1) {\n            destination.push(cloneIfNecessary(e, optionsArgument));\n        }\n    });\n    return destination\n}\n\nfunction mergeObject(target, source, optionsArgument) {\n    var destination = {};\n    if (isMergeableObject(target)) {\n        Object.keys(target).forEach(function (key) {\n            destination[key] = cloneIfNecessary(target[key], optionsArgument);\n        });\n    }\n    Object.keys(source).forEach(function (key) {\n        if (!isMergeableObject(source[key]) || !target[key]) {\n            destination[key] = cloneIfNecessary(source[key], optionsArgument);\n        } else {\n            destination[key] = deepmerge(target[key], source[key], optionsArgument);\n        }\n    });\n    return destination\n}\n\nfunction deepmerge(target, source, optionsArgument) {\n    var array = Array.isArray(source);\n    var options = optionsArgument || { arrayMerge: defaultArrayMerge };\n    var arrayMerge = options.arrayMerge || defaultArrayMerge;\n\n    if (array) {\n        return Array.isArray(target) ? arrayMerge(target, source, optionsArgument) : cloneIfNecessary(source, optionsArgument)\n    } else {\n        return mergeObject(target, source, optionsArgument)\n    }\n}\n\ndeepmerge.all = function deepmergeAll(array, optionsArgument) {\n    if (!Array.isArray(array) || array.length < 2) {\n        throw new Error('first argument should be an array with at least two elements')\n    }\n\n    // we are sure there are at least 2 values, so it is safe to have no initial value\n    return array.reduce(function(prev, next) {\n        return deepmerge(prev, next, optionsArgument)\n    })\n};\n\nreturn deepmerge\n\n}));\n});\n\n//      \n// An event handler can take an optional event argument\n// and should not return a value\n                                          \n// An array of all currently registered event handlers for a type\n                                            \n// A map of event types and their corresponding event handlers.\n                        \n                                   \n  \n\n/** Mitt: Tiny (~200b) functional event emitter / pubsub.\n *  @name mitt\n *  @returns {Mitt}\n */\nfunction mitt(all                 ) {\n\tall = all || Object.create(null);\n\n\treturn {\n\t\t/**\n\t\t * Register an event handler for the given type.\n\t\t *\n\t\t * @param  {String} type\tType of event to listen for, or `\"*\"` for all events\n\t\t * @param  {Function} handler Function to call in response to given event\n\t\t * @memberOf mitt\n\t\t */\n\t\ton: function on(type        , handler              ) {\n\t\t\t(all[type] || (all[type] = [])).push(handler);\n\t\t},\n\n\t\t/**\n\t\t * Remove an event handler for the given type.\n\t\t *\n\t\t * @param  {String} type\tType of event to unregister `handler` from, or `\"*\"`\n\t\t * @param  {Function} handler Handler function to remove\n\t\t * @memberOf mitt\n\t\t */\n\t\toff: function off(type        , handler              ) {\n\t\t\tif (all[type]) {\n\t\t\t\tall[type].splice(all[type].indexOf(handler) >>> 0, 1);\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Invoke all handlers for the given type.\n\t\t * If present, `\"*\"` handlers are invoked after type-matched handlers.\n\t\t *\n\t\t * @param {String} type  The event type to invoke\n\t\t * @param {Any} [evt]  Any value (object is recommended and powerful), passed to each handler\n\t\t * @memberof mitt\n\t\t */\n\t\temit: function emit(type        , evt     ) {\n\t\t\t(all[type] || []).map(function (handler) { handler(evt); });\n\t\t\t(all['*'] || []).map(function (handler) { handler(type, evt); });\n\t\t}\n\t};\n}\n\nvar namespaces_1 = createCommonjsModule(function (module, exports) {\nvar namespaces = {\n  svg: {\n    name: 'xmlns',\n    uri: 'http://www.w3.org/2000/svg'\n  },\n  xlink: {\n    name: 'xmlns:xlink',\n    uri: 'http://www.w3.org/1999/xlink'\n  }\n};\n\nexports.default = namespaces;\nmodule.exports = exports.default;\n});\n\n/**\n * @param {Object} attrs\n * @return {string}\n */\nvar objectToAttrsString = function (attrs) {\n  return Object.keys(attrs).map(function (attr) {\n    var value = attrs[attr].toString().replace(/\"/g, '&quot;');\n    return (attr + \"=\\\"\" + value + \"\\\"\");\n  }).join(' ');\n};\n\nvar svg = namespaces_1.svg;\nvar xlink = namespaces_1.xlink;\n\nvar defaultAttrs = {};\ndefaultAttrs[svg.name] = svg.uri;\ndefaultAttrs[xlink.name] = xlink.uri;\n\n/**\n * @param {string} [content]\n * @param {Object} [attributes]\n * @return {string}\n */\nvar wrapInSvgString = function (content, attributes) {\n  if ( content === void 0 ) content = '';\n\n  var attrs = deepmerge(defaultAttrs, attributes || {});\n  var attrsRendered = objectToAttrsString(attrs);\n  return (\"<svg \" + attrsRendered + \">\" + content + \"</svg>\");\n};\n\nvar svg$1 = namespaces_1.svg;\nvar xlink$1 = namespaces_1.xlink;\n\nvar defaultConfig = {\n  attrs: ( obj = {\n    style: ['position: absolute', 'width: 0', 'height: 0'].join('; '),\n    'aria-hidden': 'true'\n  }, obj[svg$1.name] = svg$1.uri, obj[xlink$1.name] = xlink$1.uri, obj )\n};\nvar obj;\n\nvar Sprite = function Sprite(config) {\n  this.config = deepmerge(defaultConfig, config || {});\n  this.symbols = [];\n};\n\n/**\n * Add new symbol. If symbol with the same id exists it will be replaced.\n * @param {SpriteSymbol} symbol\n * @return {boolean} `true` - symbol was added, `false` - replaced\n */\nSprite.prototype.add = function add (symbol) {\n  var ref = this;\n    var symbols = ref.symbols;\n  var existing = this.find(symbol.id);\n\n  if (existing) {\n    symbols[symbols.indexOf(existing)] = symbol;\n    return false;\n  }\n\n  symbols.push(symbol);\n  return true;\n};\n\n/**\n * Remove symbol & destroy it\n * @param {string} id\n * @return {boolean} `true` - symbol was found & successfully destroyed, `false` - otherwise\n */\nSprite.prototype.remove = function remove (id) {\n  var ref = this;\n    var symbols = ref.symbols;\n  var symbol = this.find(id);\n\n  if (symbol) {\n    symbols.splice(symbols.indexOf(symbol), 1);\n    symbol.destroy();\n    return true;\n  }\n\n  return false;\n};\n\n/**\n * @param {string} id\n * @return {SpriteSymbol|null}\n */\nSprite.prototype.find = function find (id) {\n  return this.symbols.filter(function (s) { return s.id === id; })[0] || null;\n};\n\n/**\n * @param {string} id\n * @return {boolean}\n */\nSprite.prototype.has = function has (id) {\n  return this.find(id) !== null;\n};\n\n/**\n * @return {string}\n */\nSprite.prototype.stringify = function stringify () {\n  var ref = this.config;\n    var attrs = ref.attrs;\n  var stringifiedSymbols = this.symbols.map(function (s) { return s.stringify(); }).join('');\n  return wrapInSvgString(stringifiedSymbols, attrs);\n};\n\n/**\n * @return {string}\n */\nSprite.prototype.toString = function toString () {\n  return this.stringify();\n};\n\nSprite.prototype.destroy = function destroy () {\n  this.symbols.forEach(function (s) { return s.destroy(); });\n};\n\nvar SpriteSymbol = function SpriteSymbol(ref) {\n  var id = ref.id;\n  var viewBox = ref.viewBox;\n  var content = ref.content;\n\n  this.id = id;\n  this.viewBox = viewBox;\n  this.content = content;\n};\n\n/**\n * @return {string}\n */\nSpriteSymbol.prototype.stringify = function stringify () {\n  return this.content;\n};\n\n/**\n * @return {string}\n */\nSpriteSymbol.prototype.toString = function toString () {\n  return this.stringify();\n};\n\nSpriteSymbol.prototype.destroy = function destroy () {\n    var this$1 = this;\n\n  ['id', 'viewBox', 'content'].forEach(function (prop) { return delete this$1[prop]; });\n};\n\n/**\n * @param {string} content\n * @return {Element}\n */\nvar parse = function (content) {\n  var hasImportNode = !!document.importNode;\n  var doc = new DOMParser().parseFromString(content, 'image/svg+xml').documentElement;\n\n  /**\n   * Fix for browser which are throwing WrongDocumentError\n   * if you insert an element which is not part of the document\n   * @see http://stackoverflow.com/a/7986519/4624403\n   */\n  if (hasImportNode) {\n    return document.importNode(doc, true);\n  }\n\n  return doc;\n};\n\nvar BrowserSpriteSymbol = (function (SpriteSymbol$$1) {\n  function BrowserSpriteSymbol () {\n    SpriteSymbol$$1.apply(this, arguments);\n  }\n\n  if ( SpriteSymbol$$1 ) BrowserSpriteSymbol.__proto__ = SpriteSymbol$$1;\n  BrowserSpriteSymbol.prototype = Object.create( SpriteSymbol$$1 && SpriteSymbol$$1.prototype );\n  BrowserSpriteSymbol.prototype.constructor = BrowserSpriteSymbol;\n\n  var prototypeAccessors = { isMounted: {} };\n\n  prototypeAccessors.isMounted.get = function () {\n    return !!this.node;\n  };\n\n  /**\n   * @param {Element} node\n   * @return {BrowserSpriteSymbol}\n   */\n  BrowserSpriteSymbol.createFromExistingNode = function createFromExistingNode (node) {\n    return new BrowserSpriteSymbol({\n      id: node.getAttribute('id'),\n      viewBox: node.getAttribute('viewBox'),\n      content: node.outerHTML\n    });\n  };\n\n  BrowserSpriteSymbol.prototype.destroy = function destroy () {\n    if (this.isMounted) {\n      this.unmount();\n    }\n    SpriteSymbol$$1.prototype.destroy.call(this);\n  };\n\n  /**\n   * @param {Element|string} target\n   * @return {Element}\n   */\n  BrowserSpriteSymbol.prototype.mount = function mount (target) {\n    if (this.isMounted) {\n      return this.node;\n    }\n\n    var mountTarget = typeof target === 'string' ? document.querySelector(target) : target;\n    var node = this.render();\n    this.node = node;\n\n    mountTarget.appendChild(node);\n\n    return node;\n  };\n\n  /**\n   * @return {Element}\n   */\n  BrowserSpriteSymbol.prototype.render = function render () {\n    var content = this.stringify();\n    return parse(wrapInSvgString(content)).childNodes[0];\n  };\n\n  BrowserSpriteSymbol.prototype.unmount = function unmount () {\n    this.node.parentNode.removeChild(this.node);\n  };\n\n  Object.defineProperties( BrowserSpriteSymbol.prototype, prototypeAccessors );\n\n  return BrowserSpriteSymbol;\n}(SpriteSymbol));\n\nvar defaultConfig$1 = {\n  /**\n   * Should following options be automatically configured:\n   * - `syncUrlsWithBaseTag`\n   * - `locationChangeAngularEmitter`\n   * - `moveGradientsOutsideSymbol`\n   * @type {boolean}\n   */\n  autoConfigure: true,\n\n  /**\n   * Default mounting selector\n   * @type {string}\n   */\n  mountTo: 'body',\n\n  /**\n   * Fix disappearing SVG elements when <base href> exists.\n   * Executes when sprite mounted.\n   * @see http://stackoverflow.com/a/18265336/796152\n   * @see https://github.com/everdimension/angular-svg-base-fix\n   * @see https://github.com/angular/angular.js/issues/8934#issuecomment-56568466\n   * @type {boolean}\n   */\n  syncUrlsWithBaseTag: false,\n\n  /**\n   * Should sprite listen custom location change event\n   * @type {boolean}\n   */\n  listenLocationChangeEvent: true,\n\n  /**\n   * Custom window event name which should be emitted to update sprite urls\n   * @type {string}\n   */\n  locationChangeEvent: 'locationChange',\n\n  /**\n   * Emit location change event in Angular automatically\n   * @type {boolean}\n   */\n  locationChangeAngularEmitter: false,\n\n  /**\n   * Selector to find symbols usages when updating sprite urls\n   * @type {string}\n   */\n  usagesToUpdate: 'use[*|href]',\n\n  /**\n   * Fix Firefox bug when gradients and patterns don't work if they are within a symbol.\n   * Executes when sprite is rendered, but not mounted.\n   * @see https://bugzilla.mozilla.org/show_bug.cgi?id=306674\n   * @see https://bugzilla.mozilla.org/show_bug.cgi?id=353575\n   * @see https://bugzilla.mozilla.org/show_bug.cgi?id=1235364\n   * @type {boolean}\n   */\n  moveGradientsOutsideSymbol: false\n};\n\n/**\n * @param {*} arrayLike\n * @return {Array}\n */\nvar arrayFrom = function (arrayLike) {\n  return Array.prototype.slice.call(arrayLike, 0);\n};\n\nvar browser = {\n  isChrome: function () { return /chrome/i.test(navigator.userAgent); },\n  isFirefox: function () { return /firefox/i.test(navigator.userAgent); },\n\n  // https://msdn.microsoft.com/en-us/library/ms537503(v=vs.85).aspx\n  isIE: function () { return /msie/i.test(navigator.userAgent) || /trident/i.test(navigator.userAgent); },\n  isEdge: function () { return /edge/i.test(navigator.userAgent); }\n};\n\n/**\n * @param {string} name\n * @param {*} data\n */\nvar dispatchEvent = function (name, data) {\n  var event = document.createEvent('CustomEvent');\n  event.initCustomEvent(name, false, false, data);\n  window.dispatchEvent(event);\n};\n\n/**\n * IE doesn't evaluate <style> tags in SVGs that are dynamically added to the page.\n * This trick will trigger IE to read and use any existing SVG <style> tags.\n * @see https://github.com/iconic/SVGInjector/issues/23\n * @see https://developer.microsoft.com/en-us/microsoft-edge/platform/issues/10898469/\n *\n * @param {Element} node DOM Element to search <style> tags in\n * @return {Array<HTMLStyleElement>}\n */\nvar evalStylesIEWorkaround = function (node) {\n  var updatedNodes = [];\n\n  arrayFrom(node.querySelectorAll('style'))\n    .forEach(function (style) {\n      style.textContent += '';\n      updatedNodes.push(style);\n    });\n\n  return updatedNodes;\n};\n\n/**\n * @param {string} [url] If not provided - current URL will be used\n * @return {string}\n */\nvar getUrlWithoutFragment = function (url) {\n  return (url || window.location.href).split('#')[0];\n};\n\n/* global angular */\n/**\n * @param {string} eventName\n */\nvar locationChangeAngularEmitter = function (eventName) {\n  angular.module('ng').run(['$rootScope', function ($rootScope) {\n    $rootScope.$on('$locationChangeSuccess', function (e, newUrl, oldUrl) {\n      dispatchEvent(eventName, { oldUrl: oldUrl, newUrl: newUrl });\n    });\n  }]);\n};\n\nvar defaultSelector = 'linearGradient, radialGradient, pattern, mask, clipPath';\n\n/**\n * @param {Element} svg\n * @param {string} [selector]\n * @return {Element}\n */\nvar moveGradientsOutsideSymbol = function (svg, selector) {\n  if ( selector === void 0 ) selector = defaultSelector;\n\n  arrayFrom(svg.querySelectorAll('symbol')).forEach(function (symbol) {\n    arrayFrom(symbol.querySelectorAll(selector)).forEach(function (node) {\n      symbol.parentNode.insertBefore(node, symbol);\n    });\n  });\n  return svg;\n};\n\n/**\n * @param {NodeList} nodes\n * @param {Function} [matcher]\n * @return {Attr[]}\n */\nfunction selectAttributes(nodes, matcher) {\n  var attrs = arrayFrom(nodes).reduce(function (acc, node) {\n    if (!node.attributes) {\n      return acc;\n    }\n\n    var arrayfied = arrayFrom(node.attributes);\n    var matched = matcher ? arrayfied.filter(matcher) : arrayfied;\n    return acc.concat(matched);\n  }, []);\n\n  return attrs;\n}\n\n/**\n * @param {NodeList|Node} nodes\n * @param {boolean} [clone=true]\n * @return {string}\n */\n\nvar xLinkNS = namespaces_1.xlink.uri;\nvar xLinkAttrName = 'xlink:href';\n\n// eslint-disable-next-line no-useless-escape\nvar specialUrlCharsPattern = /[{}|\\\\\\^\\[\\]`\"<>]/g;\n\nfunction encoder(url) {\n  return url.replace(specialUrlCharsPattern, function (match) {\n    return (\"%\" + (match[0].charCodeAt(0).toString(16).toUpperCase()));\n  });\n}\n\nfunction escapeRegExp(str) {\n  return str.replace(/[.*+?^${}()|[\\]\\\\]/g, \"\\\\$&\"); // $& means the whole matched string\n}\n\n/**\n * @param {NodeList} nodes\n * @param {string} startsWith\n * @param {string} replaceWith\n * @return {NodeList}\n */\nfunction updateReferences(nodes, startsWith, replaceWith) {\n  arrayFrom(nodes).forEach(function (node) {\n    var href = node.getAttribute(xLinkAttrName);\n    if (href && href.indexOf(startsWith) === 0) {\n      var newUrl = href.replace(startsWith, replaceWith);\n      node.setAttributeNS(xLinkNS, xLinkAttrName, newUrl);\n    }\n  });\n\n  return nodes;\n}\n\n/**\n * List of SVG attributes to update url() target in them\n */\nvar attList = [\n  'clipPath',\n  'colorProfile',\n  'src',\n  'cursor',\n  'fill',\n  'filter',\n  'marker',\n  'markerStart',\n  'markerMid',\n  'markerEnd',\n  'mask',\n  'stroke',\n  'style'\n];\n\nvar attSelector = attList.map(function (attr) { return (\"[\" + attr + \"]\"); }).join(',');\n\n/**\n * Update URLs in svg image (like `fill=\"url(...)\"`) and update referencing elements\n * @param {Element} svg\n * @param {NodeList} references\n * @param {string|RegExp} startsWith\n * @param {string} replaceWith\n * @return {void}\n *\n * @example\n * const sprite = document.querySelector('svg.sprite');\n * const usages = document.querySelectorAll('use');\n * updateUrls(sprite, usages, '#', 'prefix#');\n */\nvar updateUrls = function (svg, references, startsWith, replaceWith) {\n  var startsWithEncoded = encoder(startsWith);\n  var replaceWithEncoded = encoder(replaceWith);\n\n  var nodes = svg.querySelectorAll(attSelector);\n  var attrs = selectAttributes(nodes, function (ref) {\n    var localName = ref.localName;\n    var value = ref.value;\n\n    return attList.indexOf(localName) !== -1 && value.indexOf((\"url(\" + startsWithEncoded)) !== -1;\n  });\n\n  attrs.forEach(function (attr) { return attr.value = attr.value.replace(new RegExp(escapeRegExp(startsWithEncoded), 'g'), replaceWithEncoded); });\n  updateReferences(references, startsWithEncoded, replaceWithEncoded);\n};\n\n/**\n * Internal emitter events\n * @enum\n * @private\n */\nvar Events = {\n  MOUNT: 'mount',\n  SYMBOL_MOUNT: 'symbol_mount'\n};\n\nvar BrowserSprite = (function (Sprite$$1) {\n  function BrowserSprite(cfg) {\n    var this$1 = this;\n    if ( cfg === void 0 ) cfg = {};\n\n    Sprite$$1.call(this, deepmerge(defaultConfig$1, cfg));\n\n    var emitter = mitt();\n    this._emitter = emitter;\n    this.node = null;\n\n    var ref = this;\n    var config = ref.config;\n\n    if (config.autoConfigure) {\n      this._autoConfigure(cfg);\n    }\n\n    if (config.syncUrlsWithBaseTag) {\n      var baseUrl = document.getElementsByTagName('base')[0].getAttribute('href');\n      emitter.on(Events.MOUNT, function () { return this$1.updateUrls('#', baseUrl); });\n    }\n\n    var handleLocationChange = this._handleLocationChange.bind(this);\n    this._handleLocationChange = handleLocationChange;\n\n    // Provide way to update sprite urls externally via dispatching custom window event\n    if (config.listenLocationChangeEvent) {\n      window.addEventListener(config.locationChangeEvent, handleLocationChange);\n    }\n\n    // Emit location change event in Angular automatically\n    if (config.locationChangeAngularEmitter) {\n      locationChangeAngularEmitter(config.locationChangeEvent);\n    }\n\n    // After sprite mounted\n    emitter.on(Events.MOUNT, function (spriteNode) {\n      if (config.moveGradientsOutsideSymbol) {\n        moveGradientsOutsideSymbol(spriteNode);\n      }\n    });\n\n    // After symbol mounted into sprite\n    emitter.on(Events.SYMBOL_MOUNT, function (symbolNode) {\n      if (config.moveGradientsOutsideSymbol) {\n        moveGradientsOutsideSymbol(symbolNode.parentNode);\n      }\n\n      if (browser.isIE() || browser.isEdge()) {\n        evalStylesIEWorkaround(symbolNode);\n      }\n    });\n  }\n\n  if ( Sprite$$1 ) BrowserSprite.__proto__ = Sprite$$1;\n  BrowserSprite.prototype = Object.create( Sprite$$1 && Sprite$$1.prototype );\n  BrowserSprite.prototype.constructor = BrowserSprite;\n\n  var prototypeAccessors = { isMounted: {} };\n\n  /**\n   * @return {boolean}\n   */\n  prototypeAccessors.isMounted.get = function () {\n    return !!this.node;\n  };\n\n  /**\n   * Automatically configure following options\n   * - `syncUrlsWithBaseTag`\n   * - `locationChangeAngularEmitter`\n   * - `moveGradientsOutsideSymbol`\n   * @param {Object} cfg\n   * @private\n   */\n  BrowserSprite.prototype._autoConfigure = function _autoConfigure (cfg) {\n    var ref = this;\n    var config = ref.config;\n\n    if (typeof cfg.syncUrlsWithBaseTag === 'undefined') {\n      config.syncUrlsWithBaseTag = typeof document.getElementsByTagName('base')[0] !== 'undefined';\n    }\n\n    if (typeof cfg.locationChangeAngularEmitter === 'undefined') {\n        config.locationChangeAngularEmitter = typeof window.angular !== 'undefined';\n    }\n\n    if (typeof cfg.moveGradientsOutsideSymbol === 'undefined') {\n      config.moveGradientsOutsideSymbol = browser.isFirefox();\n    }\n  };\n\n  /**\n   * @param {Event} event\n   * @param {Object} event.detail\n   * @param {string} event.detail.oldUrl\n   * @param {string} event.detail.newUrl\n   * @private\n   */\n  BrowserSprite.prototype._handleLocationChange = function _handleLocationChange (event) {\n    var ref = event.detail;\n    var oldUrl = ref.oldUrl;\n    var newUrl = ref.newUrl;\n    this.updateUrls(oldUrl, newUrl);\n  };\n\n  /**\n   * Add new symbol. If symbol with the same id exists it will be replaced.\n   * If sprite already mounted - `symbol.mount(sprite.node)` will be called.\n   * @fires Events#SYMBOL_MOUNT\n   * @param {BrowserSpriteSymbol} symbol\n   * @return {boolean} `true` - symbol was added, `false` - replaced\n   */\n  BrowserSprite.prototype.add = function add (symbol) {\n    var sprite = this;\n    var isNewSymbol = Sprite$$1.prototype.add.call(this, symbol);\n\n    if (this.isMounted && isNewSymbol) {\n      symbol.mount(sprite.node);\n      this._emitter.emit(Events.SYMBOL_MOUNT, symbol.node);\n    }\n\n    return isNewSymbol;\n  };\n\n  /**\n   * Attach to existing DOM node\n   * @param {string|Element} target\n   * @return {Element|null} attached DOM Element. null if node to attach not found.\n   */\n  BrowserSprite.prototype.attach = function attach (target) {\n    var this$1 = this;\n\n    var sprite = this;\n\n    if (sprite.isMounted) {\n      return sprite.node;\n    }\n\n    /** @type Element */\n    var node = typeof target === 'string' ? document.querySelector(target) : target;\n    sprite.node = node;\n\n    // Already added symbols needs to be mounted\n    this.symbols.forEach(function (symbol) {\n      symbol.mount(sprite.node);\n      this$1._emitter.emit(Events.SYMBOL_MOUNT, symbol.node);\n    });\n\n    // Create symbols from existing DOM nodes, add and mount them\n    arrayFrom(node.querySelectorAll('symbol'))\n      .forEach(function (symbolNode) {\n        var symbol = BrowserSpriteSymbol.createFromExistingNode(symbolNode);\n        symbol.node = symbolNode; // hack to prevent symbol mounting to sprite when adding\n        sprite.add(symbol);\n      });\n\n    this._emitter.emit(Events.MOUNT, node);\n\n    return node;\n  };\n\n  BrowserSprite.prototype.destroy = function destroy () {\n    var ref = this;\n    var config = ref.config;\n    var symbols = ref.symbols;\n    var _emitter = ref._emitter;\n\n    symbols.forEach(function (s) { return s.destroy(); });\n\n    _emitter.off('*');\n    window.removeEventListener(config.locationChangeEvent, this._handleLocationChange);\n\n    if (this.isMounted) {\n      this.unmount();\n    }\n  };\n\n  /**\n   * @fires Events#MOUNT\n   * @param {string|Element} [target]\n   * @param {boolean} [prepend=false]\n   * @return {Element|null} rendered sprite node. null if mount node not found.\n   */\n  BrowserSprite.prototype.mount = function mount (target, prepend) {\n    if ( target === void 0 ) target = this.config.mountTo;\n    if ( prepend === void 0 ) prepend = false;\n\n    var sprite = this;\n\n    if (sprite.isMounted) {\n      return sprite.node;\n    }\n\n    var mountNode = typeof target === 'string' ? document.querySelector(target) : target;\n    var node = sprite.render();\n    this.node = node;\n\n    if (prepend && mountNode.childNodes[0]) {\n      mountNode.insertBefore(node, mountNode.childNodes[0]);\n    } else {\n      mountNode.appendChild(node);\n    }\n\n    this._emitter.emit(Events.MOUNT, node);\n\n    return node;\n  };\n\n  /**\n   * @return {Element}\n   */\n  BrowserSprite.prototype.render = function render () {\n    return parse(this.stringify());\n  };\n\n  /**\n   * Detach sprite from the DOM\n   */\n  BrowserSprite.prototype.unmount = function unmount () {\n    this.node.parentNode.removeChild(this.node);\n  };\n\n  /**\n   * Update URLs in sprite and usage elements\n   * @param {string} oldUrl\n   * @param {string} newUrl\n   * @return {boolean} `true` - URLs was updated, `false` - sprite is not mounted\n   */\n  BrowserSprite.prototype.updateUrls = function updateUrls$1 (oldUrl, newUrl) {\n    if (!this.isMounted) {\n      return false;\n    }\n\n    var usages = document.querySelectorAll(this.config.usagesToUpdate);\n\n    updateUrls(\n      this.node,\n      usages,\n      ((getUrlWithoutFragment(oldUrl)) + \"#\"),\n      ((getUrlWithoutFragment(newUrl)) + \"#\")\n    );\n\n    return true;\n  };\n\n  Object.defineProperties( BrowserSprite.prototype, prototypeAccessors );\n\n  return BrowserSprite;\n}(Sprite));\n\nvar ready$1 = createCommonjsModule(function (module) {\n/*!\n  * domready (c) Dustin Diaz 2014 - License MIT\n  */\n!function (name, definition) {\n\n  { module.exports = definition(); }\n\n}('domready', function () {\n\n  var fns = [], listener\n    , doc = document\n    , hack = doc.documentElement.doScroll\n    , domContentLoaded = 'DOMContentLoaded'\n    , loaded = (hack ? /^loaded|^c/ : /^loaded|^i|^c/).test(doc.readyState);\n\n\n  if (!loaded)\n  { doc.addEventListener(domContentLoaded, listener = function () {\n    doc.removeEventListener(domContentLoaded, listener);\n    loaded = 1;\n    while (listener = fns.shift()) { listener(); }\n  }); }\n\n  return function (fn) {\n    loaded ? setTimeout(fn, 0) : fns.push(fn);\n  }\n\n});\n});\n\nvar spriteNodeId = '__SVG_SPRITE_NODE__';\nvar spriteGlobalVarName = '__SVG_SPRITE__';\nvar isSpriteExists = !!window[spriteGlobalVarName];\n\n// eslint-disable-next-line import/no-mutable-exports\nvar sprite;\n\nif (isSpriteExists) {\n  sprite = window[spriteGlobalVarName];\n} else {\n  sprite = new BrowserSprite({\n    attrs: {\n      id: spriteNodeId,\n      'aria-hidden': 'true'\n    }\n  });\n  window[spriteGlobalVarName] = sprite;\n}\n\nvar loadSprite = function () {\n  /**\n   * Check for page already contains sprite node\n   * If found - attach to and reuse it's content\n   * If not - render and mount the new sprite\n   */\n  var existing = document.getElementById(spriteNodeId);\n\n  if (existing) {\n    sprite.attach(existing);\n  } else {\n    sprite.mount(document.body, true);\n  }\n};\n\nif (document.body) {\n  loadSprite();\n} else {\n  ready$1(loadSprite);\n}\n\nvar sprite$1 = sprite;\n\nreturn sprite$1;\n\n})));\n","module.exports = toArray\n\nfunction toArray(list, index) {\n    var array = []\n\n    index = index || 0\n\n    for (var i = index || 0; i < list.length; i++) {\n        array[i - index] = list[i]\n    }\n\n    return array\n}\n","'use strict';\n\nvar alphabet = '0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_'.split('')\n  , length = 64\n  , map = {}\n  , seed = 0\n  , i = 0\n  , prev;\n\n/**\n * Return a string representing the specified number.\n *\n * @param {Number} num The number to convert.\n * @returns {String} The string representation of the number.\n * @api public\n */\nfunction encode(num) {\n  var encoded = '';\n\n  do {\n    encoded = alphabet[num % length] + encoded;\n    num = Math.floor(num / length);\n  } while (num > 0);\n\n  return encoded;\n}\n\n/**\n * Return the integer value specified by the given string.\n *\n * @param {String} str The string to convert.\n * @returns {Number} The integer value represented by the string.\n * @api public\n */\nfunction decode(str) {\n  var decoded = 0;\n\n  for (i = 0; i < str.length; i++) {\n    decoded = decoded * length + map[str.charAt(i)];\n  }\n\n  return decoded;\n}\n\n/**\n * Yeast: A tiny growing id generator.\n *\n * @returns {String} A unique id.\n * @api public\n */\nfunction yeast() {\n  var now = encode(+new Date());\n\n  if (now !== prev) return seed = 0, prev = now;\n  return now +'.'+ encode(seed++);\n}\n\n//\n// Map each character to its index.\n//\nfor (; i < length; i++) map[alphabet[i]] = i;\n\n//\n// Expose the `yeast`, `encode` and `decode` functions.\n//\nyeast.encode = encode;\nyeast.decode = decode;\nmodule.exports = yeast;\n","// extracted by mini-css-extract-plugin\nexport default {};","import SpriteSymbol from \"../../../node_modules/svg-baker-runtime/browser-symbol.js\";\nimport sprite from \"../../../node_modules/svg-sprite-loader/runtime/browser-sprite.build.js\";\nvar symbol = new SpriteSymbol({\n  \"id\": \"monitor\",\n  \"use\": \"monitor-usage\",\n  \"viewBox\": \"0 0 32 32\",\n  \"content\": \"<symbol xmlns=\\\"http://www.w3.org/2000/svg\\\" xmlns:xlink=\\\"http://www.w3.org/1999/xlink\\\" viewBox=\\\"0 0 32 32\\\" id=\\\"monitor\\\"><g><g transform=\\\"translate(1.000000, 1.000000)\\\"><path class=\\\"st0\\\" fill=\\\"currentColor\\\" d=\\\"M25.1,20.8c-0.5-0.2-0.8-0.6-0.9-1.1v-4.7c0-4.4-4.2-7.3-6-8.3c-0.1-0.5-0.4-1.4-1-2\\n\\t\\t\\tc-0.6-0.6-1.4-0.9-2.3-0.8h-0.1c-0.8,0-1.6,0.3-2.3,0.8c-0.7,0.6-0.9,1.5-1,2c-1.8,0.9-6,3.8-6,8.3v4.6c0,0.5-0.4,0.9-0.9,1.1\\n\\t\\t\\tc-1.6,0.7-1.8,2.1-1.4,3.1c0.2,0.5,0.6,1,3.6,1h2.5c0.2,2.6,2.5,4.6,5.4,4.6s5.3-2.1,5.4-4.6h2.6c3,0,3.4-0.5,3.6-1\\n\\t\\t\\tC26.9,22.9,26.7,21.5,25.1,20.8L25.1,20.8z M14.9,27.8c-1.9,0-3.4-1.3-3.6-2.9h7.1C18.3,26.5,16.8,27.8,14.9,27.8L14.9,27.8z\\n\\t\\t\\t M22.9,23.1H7c-0.6,0-1.3,0-1.9-0.1c0-0.3,0.1-0.4,0.5-0.6c1.1-0.5,1.9-1.5,1.9-2.7v-4.7c0-3.9,4.5-6.5,5.3-6.9L13.4,8V7.4\\n\\t\\t\\tc0-0.2,0.1-1.7,1.5-1.7H15c1.4,0,1.5,1.5,1.5,1.7V8L17,8.2c0.8,0.3,5.3,2.9,5.3,6.9v4.7c0,1.2,0.8,2.2,1.9,2.7\\n\\t\\t\\tc0.4,0.2,0.5,0.3,0.5,0.6C24.2,23.1,23.5,23.1,22.9,23.1L22.9,23.1z\\\" /><path class=\\\"st0\\\" d=\\\"M23.9,0.2c0.4,0.3,0.6,0.9,0.3,1.3l-2.1,3.2c-0.3,0.4-0.9,0.6-1.3,0.3s-0.6-0.9-0.3-1.3l2.1-3.2\\n\\t\\t\\tC22.8,0,23.4-0.1,23.9,0.2z M29.9,7.1c0.2,0.5,0,1.1-0.5,1.3L25.9,10c-0.5,0.2-1,0-1.3-0.5c-0.2-0.5,0-1,0.5-1.3l3.5-1.6\\n\\t\\t\\tC29.1,6.4,29.7,6.6,29.9,7.1L29.9,7.1z M0.1,7.1c0.1-0.2,0.3-0.4,0.5-0.5c0.2-0.1,0.5-0.1,0.7,0l3.5,1.6c0.3,0.1,0.5,0.5,0.5,0.8\\n\\t\\t\\tc0,0.3-0.1,0.7-0.4,0.9c-0.3,0.2-0.6,0.2-1,0.1L0.6,8.4C0.1,8.2-0.1,7.6,0.1,7.1L0.1,7.1z M6.1,0.2C6.3,0,6.6,0,6.8,0\\n\\t\\t\\ts0.5,0.2,0.6,0.4l2.1,3.2c0.2,0.3,0.2,0.7,0.1,1S9.1,5.2,8.8,5.2C8.4,5.2,8.1,5,7.9,4.7L5.8,1.5C5.7,1.3,5.6,1,5.7,0.8\\n\\t\\t\\tC5.8,0.5,5.9,0.3,6.1,0.2L6.1,0.2L6.1,0.2z\\\" /></g></g></symbol>\"\n});\nvar result = sprite.add(symbol);\nexport default symbol","var map = {\n\t\"./monitor.svg\": 43669\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 49566;"],"names":["_React$Component","_inherits","SystemNotification","_super","_createSuper","props","_this","_classCallCheck","call","close","setState","isClosed","navigator","cookieEnabled","date","Date","cookies","document","cookie","split","infoIDExist","newInfoID","curNoteID","setTime","getTime","toGMTString","siteRoot","i","len","length","state","_createClass","key","value","curNoteMsg","this","_jsxs","id","className","children","_jsx","dangerouslySetInnerHTML","__html","title","gettext","onClick","React","Group","object","name","owner","admins","avatar_url","created_at","parent_group_id","wiki_enabled","repos","group_quota","group_quota_usage","MainSideNav","_this2","grpsExtend","groupsExtended","loadGroups","shExtend","sharedExtended","_assertThisInitialized","seafileAPI","listGroups","then","res","groupList","data","map","item","groupsHeight","listHeight","groupItems","sort","a","b","toLowerCase","catch","error","errMessage","Utils","getErrorMsg","toaster","danger","tabItemClick","e","param","window","uploader","isUploadProgressDialogShow","totalProgress","confirm","preventDefault","onDTableClick","url","dtableWebServer","open","getActiveClass","tab","currentTab","closeSideBar","adminHeight","_this3","style","height","concat","Link","to","_this4","linksNavItem","canGenerateShareLink","canGenerateUploadLink","canAddRepo","customNavItems","idx","href","link","desc","icon","_this5","showActivity","isDocs","isPro","isDBSqlite3","canViewOrg","renderSharedGroups","enableOCM","enableOCMViaWebdav","draftCounts","canInvitePeople","renderSharedAdmin","renderCustomNavItems","AboutDialog","_len","arguments","args","Array","_key","apply","renderExternalAboutLinks","additionalAboutDialogLinks","Object","keys","index","lang","toggleDialog","onCloseAboutDialog","aboutDialogCustomHtml","Modal","isOpen","toggle","ModalBody","type","src","mediaUrl","logoPath","logoHeight","width","logoWidth","siteTitle","alt","seafileVersion","getFullYear","target","SideNavFooter","onAboutDialogToggle","isAboutDialogShow","renderExternalAppLinks","additionalAppBottomLinks","sideNavFooterCustomHtml","Fragment","rel","enableTC","ModalPortal","SidePanel","isSidePanelClosed","Logo","onCloseSidePanel","MainPanel","_Component","Component","DraftsView","moment","DraftListItem","onMouseEnter","isItemFreezed","isMenuIconShow","highlight","onMouseLeave","onDropdownToggleClick","toggleOperationMenu","stopPropagation","isItemMenuShow","onFreezedItem","onUnfreezedItem","onDeleteHandler","draft","onPublishHandler","repoID","origin_repo_id","filePath","draft_file_path","fileName","getFileName","draftUrl","libraryUrl","encodeURIComponent","repo_name","localTime","updated_at","toDate","fromNow","iconUrl","getFileIconUrl","Dropdown","DropdownToggle","tag","DropdownMenu","DropdownItem","status","DraftListView","drafts","draftList","DraftContent","draft_name","editUtilities","deleteDraft","updateDraftsList","msg_s","replace","success","publishDraft","getDrafts","isLoadingDraft","Loading","EmptyTip","Acticity","json","repo_id","obj_type","commit_id","path","author_email","author_name","author_contact_email","time","op_type","createdFilesCount","createdFilesList","days","old_repo_name","includes","old_path","old_name","endsWith","draft_id","ListCreatedFileDialog","activity","toggleCancel","ModalHeader","Table","fileURL","encodePath","serviceURL","fileLink","ModalFooter","Button","color","bind","app","config","FileActivitiesContent","isDesktop","_this$props","items","isLoadingMore","desktopThead","mobileThead","ActivityItem","_Component2","_super2","onListCreatedFilesToggle","isListCreatedFiles","op","details","_this$props2","moreDetails","userProfileURL","libURL","libLink","smallLibLink","fileCount","firstLine","isDraft","filePathLink","dirURL","dirLink","dirPathLink","isShowDate","lastEventTime","isSame","colSpan","format","datetime","is","_Component3","FilesActivities","_super3","mergePublishEvents","events","curPathList","push","oldPathList","actuallyEvents","splice","indexOf","mergeFileCreateEvents","multiFilesActivity","isFulfilCondition","Activity","handleScroll","event","hasMore","clientHeight","scrollHeight","scrollTop","getMore","errorMsg","isFirstLoading","currentPage","avatarSize","listActivities","_toConsumableArray","onScroll","Content","_this$props$data","loading","emptyTip","TableBody","getThumbnails","filter","imageCheck","obj_name","enableVideoThumbnail","videoCheck","repo_encrypted","getThumbnail","curItem","createThumbnail","encoded_thumbnail_src","listItems","item_icon_url","getDefaultLibIconUrl","is_dir","getFolderIconUrl","encoded_path","thumbnail_url","dirent_view_url","mtime_relative","mtime","Item","toggleOpMenu","isOpMenuOpen","handleMouseOver","showOpIcon","handleMouseOut","unstar","unstarItem","unstarred","visitItem","navigate","opClasses","linkUrl","desktopItem","onMouseOver","onMouseOut","onFocus","role","mobileItem","_Component4","Starred","_super4","listStarredItems","starred_item_list","ConfirmUnlinkDevice","executeOperation","isChecked","onInputChange","checked","FormGroup","check","Label","Input","onChange","isOpIconShown","isConfirmUnlinkDialogOpen","handleClick","is_desktop_client","unlinkDevice","wipeDevice","platform","device_id","unlinked","msg","device_name","last_login_ip","last_accessed","ConfirmUnlinkDeviceDialog","LinkedDevices","listLinkedDevices","SharedRepoInfo","share_type","share_permission","share_permission_name","modifier_name","modifier_email","modifier_contact_email","encrypted","is_admin","user_name","user_email","contact_email","group_id","group_name","PermSelect","listCustomPermissions","customPermissions","permission_list","CustomPermission","isLoading","switchOption","currentOption","changePerm","translatePermission","permission","sharePerms","find","translateExplanation","explanation","sharePermsExplanation","description","getPermissions","newPermissions","permissions","slice","forEach","currentPerm","_this$state","maxHeight","overflow","htmlFor","sortByName","sortOrder","sortItems","sortBy","sortIcon","table","togglePermSelectDialog","isPermSelectDialogOpen","options","user","updateRepoSharePerm","unshare","unshareRepo","unshared","message","onEditPermission","nativeEvent","stopImmediatePropagation","isShowPermEditor","showAdmin","assign","shareTo","getLibIconUrl","iconTitle","getLibIconTitle","repoUrl","shareType","startsWith","SharePermissionEditor","isTextMode","isEditing","autoFocus","isEditIconShow","currentPermission","onPermissionChanged","ShareAdminLibraries","sortRepos","listSharedRepos","SharedFolderInfo","folder_name","unshareFolder","postData","updateFolderSharePerm","is_readonly","getFolderIconTitle","folderUrl","ShareAdminFolders","_sortItems","comparator","compareTwoWord","listSharedFolders","ShareLinkPermissionSelect","getShareLinkPermissionObject","text","SortOptions","_e$target$value$split","_e$target$value$split2","_slicedToArray","sortOptions","TopToolbar","onShowSidePanel","onSearchedClick","CommonToolbar","searchPlaceholder","sortByTime","columnWidths","onRemoveLink","updatePermissionOptions","itemType","repo_folder_permission","permissionOptions","getShareLinkPermissionList","can_edit","getShareLinkPermissionStr","toggleLinkDialog","isLinkDialogOpen","viewLink","removeLink","renderExpiration","expire_date","expire_time","is_expired","permissionDetails","updateShareLink","token","JSON","stringify","objUrl","deletedTip","obj_id","ShareLinkPermissionEditor","view_cnt","ShareAdminLink","ShareAdminShareLinks","deleteShareLink","uploadItem","toggleSortOptionsDialog","isSortOptionsDialogOpen","toggleCleanInvalidShareLinksDialog","isCleanInvalidShareLinksDialogOpen","cleanInvalidShareLinks","newItems","listUserShareLinks","ShareLink","SortOptionsDialog","CommonOperationConfirmationDialog","confirmBtnText","ShareAdminUploadLinks","deleteUploadLink","toggleCleanInvalidUploadLinksDialog","isCleanInvalidUploadLinksDialogOpen","cleanInvalidUploadLinks","listUserUploadLinks","UploadLink","Repo","size_original","size","bytesToSize","owner_name","owner_email","owner_contact_email","last_modified","starred","monitored","storage_name","undefined","requireContext","require","console","log","symbol","iconClass","xlinkHref","RepoMonitoredIcon","Icon","UncontrolledTooltip","placement","freezeItem","freezed","sortBySize","LibsMobileThead","onMonitorRepo","share","isShowSharedDialog","leaveShare","request","leaveShareRepo","leaveShareGroupOwnedRepo","toggleShareDialog","onToggleStarRepo","repoName","isStarred","starItem","visitRepo","repoURL","watchFileChanges","repo","monitorRepo","unwatchFileChanges","unMonitorRepo","icon_url","icon_title","iconVisibility","shareIconClassName","leaveShareIconClassName","shareRepoUrl","enableMonitorRepo","tabIndex","ModalPotal","ShareDialog","itemName","itemPath","repoEncrypted","enableDirPrivateShare","userPerm","isAdmin","SharedLibraries","listRepos","repoList","provider_id","from_user","from_server_url","ctime","SharedWithOCM","deleteOCMShareReceived","listOCMSharesReceived","ocm_share_received_list","OCMViaWebdav","getAllReceivedShares","server","req","get","shareID","received_share_list","delete","openFolder","parent_dir","onPathClick","DirPath","currentPath","downloadFile","downloadUrl","location","shared_by","getEventData","turnPathToLink","pathList","nodePath","pathElem","MainPanelTopbar","Account","isAdminPanel","onTabNavClick","DirentItem","dirent","downloadDirent","getDirentIcon","is_file","_React$Component2","DirContent","direntList","deleteDirent","fromSystemRepo","Dirent","obj","DirView","loadDirentList","direntPath","joinPath","providerID","listOCMRepoDir","_res$data","dirent_list","user_perm","history","replaceState","getOCMRepoDownloadURL","err","openFileInput","fileInput","current","click","onFileInputChange","files","file","getOCMRepoUploadURL","formData","FormData","append","axios","post","fileObj","newDirent","dirs","isNewFolderDialogOpen","ref","DirPathBar","CreateRepoDialog","handleRepoNameChange","trim","isSubmitBtnActive","handlePassword1Change","password1","handlePassword2Change","password2","handleSubmit","validateInputParams","repoData","prepareRepoData","libraryType","onCreateRepo","handleKeyPress","onCreateToggle","onPermissionChange","handleStorageInputChange","selectedItem","storage_id","handlelibraryTemplatesInputChange","library_template","onEncrypted","encrypt","disabled","password","passwd","storages","libraryTemplates","repoPasswordMinLength","Form","for","onKeyPress","Select","defaultValue","label","enableEncryptedLibrary","autoComplete","Alert","RepoViewToolbar","isCreateRepoDialogShow","toggleMore","onDropdownToggleKeyDown","visitDeletedviaKey","onKeyDown","LibDetail","getFileCounts","getRepoInfo","file_count","currentRepo","nextProps","smallIconUrl","bigIconUrl","closeDetails","LibHistorySetting","submit","keepDays","autoHistory","expireDays","test","setRepoHistoryLimit","keep_days","errorInfo","num","setLimitDays","allHistory","noHistory","getRepoHistoryLimit","enableRepoHistorySetting","ChangeRepoPasswordDialog","handleOldPasswordInputChange","oldPassword","handleNewPasswordInputChange","newPassword","handleNewPasswordAgainInputChange","newPasswordAgain","formSubmit","submitBtnDisabled","changeEncryptedRepoPassword","centered","generateDialogTitle","action","method","ResetEncryptedRepoPasswordDialog","showLoading","showSuccess","showError","resetAndSendEncryptedRepoPassword","response","error_msg","contactEmail","LabelRepoStateDialog","handleInputChange","inputValue","labels","join","addNewRepoLabels","formErrorMsg","existingLabels","getAllRepoSnapshotLabels","handleChange","CreatableSelect","isMulti","placeholder","UserItem","isOperationShow","deleteUserFolderPermission","onChangeUserFolderPerm","folder_path","showPath","LibSubFolderSetUserPermissionDialog","handleUserSelectChange","option","selectedUsers","setPermission","addUserFolderPerm","folderPath","users","email","isDepartmentRepo","addDepartmentRepoUserFolderPerm","failed","userFolderPermItems","refs","userSelect","clearSelect","deleteUserFolderPermItem","deleteDepartmentRepoUserFolderPerm","deleteUserFolderPerm","deletedItem","userEmail","updateDepartmentRepoUserFolderPerm","updateUserFolderPerm","onSetSubFolder","toggleFileChooser","showFileChooser","toggleSubFolder","handleFileChooserSubmit","onRepoItemClick","listDepartmentRepoUserFolderPerm","listUserFolderPerm","FileChooser","mode","onDirentItemClick","thead","UserSelect","onSelectChange","InputGroup","InputGroupAddon","addonType","GroupItem","deleteGroupPermissionItem","onChangeGroupPermission","NoOptionsMessage","_objectSpread","innerProps","margin","textAlign","LibSubFolderSerGroupPermissionDialog","handleSelectChange","selectedOption","loadOptions","shareableGroups","listGroupPermissionItems","_this2$props","listDepartmentRepoGroupFolderPerm","listGroupFolderPerm","groupPermissionItems","addGroupFolderPerm","addDepartmentRepoGroupFolderPerm","deleteDepartmentRepoGroupFolderPerm","deleteGroupFolderPerm","updateDepartmentRepoGroupFolderPerm","updateGroupFolderPerm","updateGroupPermission","groupID","sharedItem","sharedItemGroupID","maxMenuHeight","inputId","components","LibSubFolderPermissionDialog","activeTab","renderContent","Nav","pills","NavItem","NavLink","TabContent","TabPane","tabId","LibSubFolderSetGroupPermissionDialog","folderName","maxWidth","MylibRepoMenu","onMenuItemClick","operation","onMenuItemKeyDown","dataset","generatorOperations","showResetPasswordMenuItem","enableResetEncryptedRepoPassword","isEmailConfigured","operations","folderPermEnabled","monitorOp","isPC","enableRepoSnapshotLabel","enableRepoAutoDel","translateOperations","translateResult","divider","unshift","RepoAPITokenPermissionEditor","onHideSelect","onSelectHandler","addEventListener","removeEventListener","optionTranslation","OpIcon","captureMenuScroll","APITokenItem","onDeleteAPIToken","deleteAPIToken","app_name","onUpdateAPIToken","updateAPIToken","onCopyAPIToken","api_token","copy","RepoAPITokenDialog","listAPITokens","listRepoAPITokens","apiTokenList","repo_api_tokens","handleError","appName","keyCode","addAPIToken","_this2$state","addRepoAPIToken","deleteRepoAPIToken","updateRepoAPIToken","detail","duration","renderAPITokenList","minHeight","HTMLescape","onRepoAPITokenToggle","onDeleteLink","deleteItem","creator_name","RepoShareAdminShareLinks","deleteRepoShareLink","linkItem","listRepoShareLinks","forDialog","RepoShareAdminUploadLinks","deleteRepoUploadLink","listRepoUploadLinks","updateShareToUserItemPermission","share_to","isRepoOwner","getFolderName","share_to_name","permission_name","RepoShareAdminUserShares","deleteShareToUserItem","shareItem","getAllRepoFolderShareInfo","share_info_list","username","updateShareToGroupItemPermission","RepoShareAdminGroupShares","deleteShareToGroupItem","RepoShareAdminDialog","getInitialActiveTab","enableShareLink","enableUploadLink","onTabKeyDown","LibOldFilesAutoDelDialog","daysNeedTobeSet","isAutoDel","autoDelDays","setRepoOldFilesAutoDelDays","updateRadioCheck","getRepoOldFilesAutoDelDays","auto_delete_days","MylibRepoListItem","isOpIconShow","onShareToggle","onDeleteToggle","onRenameToggle","onTransferToggle","onHistorySettingToggle","onChangePasswordToggle","onResetPasswordToggle","onFolderPermissionToggle","onLabelToggle","onAPITokenToggle","toggleRepoShareAdminDialog","toggleOldFilesAutoDelDialog","isRenaming","onRepoClick","isShareDialogShow","isDeleteDialogShow","isTransferDialogShow","isHistorySettingDialogShow","isChangePasswordDialogShow","isResetPasswordDialogShow","isLabelRepoStateDialogOpen","isFolderPermissionDialogShow","isAPITokenDialogShow","isRepoShareAdminDialogOpen","isOldFilesAutoDelDialogOpen","onRenameConfirm","newName","renameRepo","onRenameRepo","onRenameCancel","onTransferRepo","transferRepo","onDeleteRepo","deleteRepo","isRepoDeleted","renderPCUI","Rename","renderMobileUI","MediaQuery","query","DeleteRepoDialog","TransferDialog","LibHistorySettingDialog","MylibRepoListView","sortRepoList","renderRepoListView","showStorageBackend","GuideForNewDialog","siteName","MyLibraries","createMineRepo","newRepo","repo_size","isShowDetails","onRepoDetails","toggleGuideForNewDialog","pageOptions","guideEnabled","isGuideForNewDialogOpen","MyLibsDeleted","refreshDeletedRepoList","deletedRepoList","listDeletedRepo","trashReposExpireDays","DeletedRepoTable","deletedRepos","DeletedRepoItem","hideRestoreMenu","restoreDeletedRepo","del_time","ShareRepoListItem","onRepoSelect","padding","sharePermission","ShareRepoDialog","selectedRepoList","onRepoSelectedHandler","onCloseDialog","onShareRepoDialogClose","SharedRepoListItem","clickOperationMenuToggle","getRepoComputeParams","libPath","onItemRenameToggle","onItemFolderPermissionToggle","onItemDetails","onItemShare","onItemUnshare","onItemRename","isFolderPermissionDialogOpen","onItemDeleteToggle","onItemDelete","currentGroup","deleteGroupOwnedLibrary","translateMenuItem","menuItem","isStaff","isDeparementOnwerGroupMember","generatorMobileMenu","isSystemStaff","generatorPCMenu","shareOperation","unshareOperation","deleteOperation","_this$getRepoComputeP","_this$getRepoComputeP2","isGroupOwnedRepo","SharedRepoListView","getSortMetaData","some","isShowTableThread","_this$getSortMetaData","hasNextPage","PublicSharedView","createPublicRepo","addRepoItem","onCreateRepoToggle","selectOwnedRepoToPublic","isExist","repoIndex","newRepoList","onAddRepoToggle","isCreateMenuShow","onSelectRepoToggle","isSelectRepoDialpgShow","canAddPublicRepo","socket","seafileCollabServer","io","CollabServer","fn","emit","on","off","LibDecryptDialog","setRepoDecryptPassword","onLibDecryptDialog","ViewModeToolbar","switchViewMode","currentMode","baseClass","isCustomPermission","defaultProps","CreateFile","childName","isDuplicated","checkDuplicatedName","parentPath","isMarkdownDraft","isSdocDraft","onAddFile","handleCheck","pos","lastIndexOf","p","substring","fileType","onAfterModelOpened","newInput","focus","setSelectionRange","toggleMarkSdocDraft","onOpened","innerRef","DirOperationToolbar","toggleMobileOpMenu","isMobileOpMenuOpen","hideOperationMenu","isUploadMenuShow","targetRect","getBoundingClientRect","position","display","left","top","bottom","operationMenuStyle","onUploadClick","onUploadFile","onUploadFolder","onCreateClick","onShareClick","onCreateFolderToggle","isCreateFolderDialogShow","onCreateFileToggle","isCreateFileDialogShow","onCreateMarkdownToggle","onCreateExcelToggle","onCreatePPTToggle","onCreateWordToggle","onCreateSeaDocToggle","onAddFolder","dirPath","_Utils$getUserPermiss","getUserPermission","customPermission","canUpload","canCreate","upload","create","content","showShareBtn","isSupportUploadFolder","enableSeadoc","CreateFolder","addFolderCancel","MoveDirent","isMutipleOperation","moveItems","moveItem","selectedPath","selectedDirentList","direntPaths","moveDirentPath","flag","onItemsMove","_this$state2","onItemMove","onCancelMove","nextState","CopyDirent","copyItems","copyItem","copyDirentPath","onItemsCopy","onItemCopy","onCancelCopy","_this$validateInput","validateInput","isValid","onRename","changeState","endIndex","MultipleDirOperationToolbar","onMoveToggle","isMoveDialogShow","onCopyToggle","isCopyDialogShow","onItemsDelete","onItemsDownload","isDir","URLDecorator","getUrl","useGoFileserver","zipDownload","zipToken","fileServerRoot","isZipDialogOpen","closeZipDialog","checkDuplicatedNameInList","onPermissionItem","showLibContentViewDialogs","isPermissionDialogOpen","onMarkAsDraft","getDirentPath","sdocMarkAsDraft","updateDirent","onUnmarkAsDraft","sdocUnmarkAsDraft","onStartRevise","sdocStartRevise","file_path","onCommentItem","showDirentDetail","getDirentMenuList","currentRepoInfo","opList","getDirentOperationList","list","showShareDialog","isRenameDialogOpen","listFileTags","lockFile","unlockFile","onHistory","onAccessLog","onOpenViaClient","lockfile","is_locked","unSelectDirent","unlockfile","showEditFileTagDialog","fileTagList","file_tags","file_tag_id","onMenuFileTagChanged","onFilesTagChanged","multiFileTagList","canDelete","canDownload","canCopy","canModify","download","modify","ButtonGroup","ItemDropdownMenu","tagName","toggleClass","getMenuList","MoveDirentDialog","CopyDirentDialog","ZipDownloadDialog","EditFileTagDialog","onFileTagChanged","ViewFileToolbar","onEditClick","onNewDraft","createDraft","onDraftHover","isDraftMessageShow","isMoreMenuShow","onEditFileTagToggle","isEditTagDialogShow","onHistoryClick","historyUrl","filePermission","hasDraft","Tooltip","fileTags","LibContentToolbar","isViewFile","onSideNavMenuClick","isLibView","isDirentSelected","DirOperationToolBar","tabName","tagTitle","pathPrefix","showName","InternalLinkOperation","fileTag","zIndex","backgroundColor","TagColor","togglePopover","isPopoverOpen","selectTagColor","newColor","updateRepoTag","tagColor","colorList","Popover","PopoverBody","defaultChecked","TagName","toggleMode","input","updateTagName","onInputKeyDown","onInputBlur","onBlur","TagListItem","isTagHighlighted","deleteTag","onDeleteTag","ListTagDialog","onListTagCancel","createNewTag","onCreateRepoTag","targetTagID","deleteRepoTag","repotagList","listRepoTags","repo_tags","repo_tag","RepoTag","repoTag","DirTool","onShowListRepoTag","isRepoTagDialogShow","isListRepoTagShow","isCreateRepoTagShow","isListTaggedFileShow","onCloseRepoTagDialog","onCreateRepoTagToggle","onListTaggedFileToggle","currentTag","isFile","isMarkdownFile","trashUrl","CreateTagDialog","onClose","ListTaggedFilesDialog","updateUsedRepoTags","CurDirPath","onDeleteRepoTag","DetailCommentList","handleCommentChange","comment","listComments","commentsList","comments","addComment","postComment","onSubmit","addParticipant","toBeAddedParticipant","addFileParticipants","onParticipantsChange","resolveComment","updateComment","deleteComment","editComment","commentID","newComment","listRepoRelatedUsers","user_list","relatedUsers","checkParticipant","fileParticipantList","participant","renderUserSuggestion","entry","search","highlightedDisplay","focused","_this$props3","oldTime","CommentItem","MentionsInput","defaultStyle","Mention","trigger","displayTransform","renderSuggestion","defaultMentionStyle","onAdd","appendSpaceOnAdd","convertComment","mdFile","processor","process","result","html","String","toggleDropDownMenu","dropdownOpen","toggleEditComment","editable","onCommentClick","nodeName","preNode","previousSibling","nodeType","nodeValue","renderInfo","clos","rows","warp","resolved","Backspace","Tab","Enter","Shift","Ctrl","Alt","PauseBreak","CapsLock","Escape","Esc","Space","PageUp","PageDown","End","Home","LeftArrow","UpArrow","RightArrow","DownArrow","Insert","Delete","c","d","f","g","h","j","k","l","m","n","o","q","r","s","t","u","v","w","x","y","z","LeftWindowKey","RightWindowKey","SelectKey","NumPad0","NumPad1","NumPad2","NumPad3","NumPad4","NumPad5","NumPad6","NumPad7","NumPad8","NumPad9","Multiply","Add","Subtract","DecimalPoint","Divide","F1","F2","F3","F4","F5","F6","F7","F8","F9","F10","F12","NumLock","ScrollLock","SemiColon","EqualSign","Comma","Dash","Period","ForwardSlash","GraveAccent","OpenBracket","BackSlash","CloseBracket","SingleQuote","ChineseInputMethod","DIALOG_MAX_HEIGHT","innerHeight","EXTRA_ATTRIBUTES_COLUMN_TYPE","EXTRA_ATTRIBUTES_NOT_DISPLAY_COLUMN_KEY","EXTRA_ATTRIBUTES_NOT_DISPLAY_COLUMN_NAME","FORMULA_RESULT_TYPE","DEFAULT_NUMBER_FORMAT","ERROR","ERROR_DIV_ZERO","ERROR_NAME","ERROR_NULL","ERROR_VALUE","GETTING_DATA","DURATION_FORMATS_MAP","_errors","_defineProperty","DURATION_FORMATS","DURATION_ZERO_DISPLAY","_DURATION_ZERO_DISPLA","DURATION_DECIMAL_DIGITS","_DURATION_DECIMAL_DIG","strip","precision","parseFloat","toPrecision","digitLength","eSplit","toString","float2Fixed","Number","dLen","Math","pow","checkBoundary","_boundaryCheckingState","MAX_SAFE_INTEGER","MIN_SAFE_INTEGER","warn","times","num1","num2","others","num1Changed","num2Changed","baseNum","leftValue","divide","_len4","_key4","plus","_len2","_key2","max","minus","_len3","_key3","round","ratio","base","enableBoundaryChecking","NP","getValidColumns","columns","editableColumns","isEmptyFile","isArray","column","validColumn","canEdit","getDateDisplayString","validValue","formatValueList","formatValuesList","formatDateList","getSelectColumnOptions","getDurationDisplayString","duration_format","findIndex","includeDecimal","positiveValue","abs","decimalDigits","_getMathRoundedDuration","decimalParts","decimalPartsLen","decimal","decimalSuffix","_getDurationDecimalSuffix","displayString","hours","parseInt","minutes","seconds","toFixed","_separatorMap","_toThousands","isCurrency","formatData","_ref2","_ref2$decimal","_ref2$thousands","thousands","_ref2$precision","_ref2$enable_precisio","enable_precision","decimalString","thousandsString","numericString","removeZerosFromEnd","_getDecimalDigits","isMinus","integer","trunc","decimalValue","padEnd","counter","isInteger","valueArr","digitsLength","getNumberDisplayString","prototype","isNaN","Infinity","_ref4$format","currency_symbol_position","currency_symbol","formatStringToNumber","numberString","_ref5","newData","getFloatNumber","Col","md","SimpleText","blurInput","setTimeout","inputRef","blur","onCommit","updated","onCut","onPaste","KeyCodes","_e$currentTarget","currentTarget","selectionStart","selectionEnd","row","nextValue","_ref","result_type","_Fragment","SearchInput","onCompositionStart","isInputtingChinese","timer","clearTimeout","wait","searchValue","onCompositionEnd","setFocus","isSelectAllText","activeElement","txtLength","classnames","SingleSelectEditor","getCascadeColumnValue","cascade_column_key","cascade_settings","cascadeColumnValue","cascadeSetting","onUpdateState","onChangeSearch","searchVal","val","filteredOptions","onSelectOption","optionID","highlightIndex","maxItemNum","itemHeight","editorKey","UncontrolledPopover","hideArrow","isSelected","textColor","SingleSelect","updateState","isShowSingleSelect","currentOptionID","optionStyle","optionName","NumberEditor","initValue","isMac","reg","RegExp","replaceNumberNotAllowInput","_event$currentTarget","setInputRef","DateEditor","CtimeFormatter","_CONFIG","FormulaFormatter","Column","Editor","CONFIG","ColumnName","ExtraAttributesDialog","startAnimation","callback","animationEnd","dom","modalRef","firstChild","_this$getDialogStyle","getDialogStyle","marginLeft","marginRight","marginTop","transition","getFormatUpdateData","update","updateData","_loop","getData","getFileExtendedProperties","metadata","editable_columns","Boolean","_id","createData","newFileExtendedProperties","newRow","updateFileExtendedProperties","onHotKey","isHotkey","onToggle","innerWidth","getInitStyle","renderColumns","direntDetail","direntType","direntDetailId","repeat","contentClassName","modalClassName","wrapClassName","fade","DetailListView","getDirentPosition","repoInfo","isEditFileTagShow","toggleExtraAttributesDialog","isShowExtraAttributes","renderTags","DirentDetail","loadDirentInfo","updateDetailView","getDirName","listDir","folderDirent","getFileInfo","listParticipants","getDirInfo","listFileParticipants","participant_list","renderNavItem","showTab","active","renderHeader","direntName","onItemDetailsClose","renderDetailBody","direntDetailPanelTab","isImg","isVideo","tabs","DirentNodeView","onCreateNewFile","isDirentListLoading","DirentListItem","canDrag","isDragTipShow","unfreezeItem","onItemSelected","onItemStarred","onDirentClick","onItemClick","isRenameing","canPreview","showImagePopup","closeSharedDialog","onMobileMenuItemClick","getAttribute","onItemDownload","onItemMoveToggle","onItemCopyToggle","onUnlockItem","onLockItem","onConvertWithONLYOFFICE","lockName","onlyofficeConvert","onTagTooltipToggle","isShowTagTooltip","destRepo","onItemDragStart","isIEBrower","dataTransfer","effectAllowed","onShowDirentsDraggablePreview","setDragImage","empty_content","selectedList","nodeRootPath","nodeDirent","nodeParentPath","setData","drag_icon","dragStartItemData","onItemDragEnter","isDropTipshow","onItemDragOver","dropEffect","onItemDragLeave","onItemDragDrop","parse","draggedItem","_dragStartItemData","dropItemData","onItemMouseDown","onItemContextMenu","renderItemOperation","_assertThisInitialize","isHasPermissionToShare","isHandleContextMenuEvent","getDirentItemMenuList","_customPermission$per","preview","activeDirent","dirHref","fileHref","is_sdoc_revision","revision_id","toolTipID","MD5","trClass","lockedInfo","lock_owner_name","draggable","onDragStart","onDragEnter","onDragOver","onDragLeave","onDrop","onMouseDown","onContextMenu","hasSuffix","isSdocFile","is_sdoc_draft","DirentsDraggedPreview","handleDragEnd","element","opacity","onHideDirentsDraggablePreview","handleDragOver","clientY","clientX","handleDrop","inlineStyle","pointerEvents","documentElement","DirentListView","hideMenu","prepareImageItem","useThumbnail","isGIF","substr","thumbnailSizeForOriginal","fullDirentList","imageItems","isImagePopupOpen","imageIndex","moveToPrevImage","imageItemsLength","prevState","moveToNextImage","closeImagePopup","selectedDirentNames","isProgressDialogShow","downloadItems","onCloseZipDownloadDialog","button","handleContextClick","menuList","currentObject","touches","pageX","pageY","posX","posY","showMenuConfig","showMenu","onContainerClick","onContainerMouseDown","onContainerContextMenu","TextTranslation","NEW_FOLDER","NEW_FILE","persist","MOVE","COPY","DOWNLOAD","DELETE","onContainerMenuItemClick","onDirentsMenuItemClick","onThreadMouseDown","onThreadContextMenu","setDirentItemRef","direntItems","getDirentIndex","onShowMenu","onHideMenu","isContextmenu","onTableDragEnter","canDrop","enteredCounter","isListDropTipShow","onTableDragOver","onTableDragLeave","tableDrop","isShowDirentsDraggablePreview","clickedDirent","currentItemRef","_Utils$getUserPermiss2","onAllItemSelected","isAllItemSelected","ContextMenu","dragStartPosition","ImageDialog","DirListView","DirentNoneView","isRepoInfoBarShow","RepoInfoBar","readmeMarkdown","usedRepoTags","DirentGridItem","isGridSelected","onGridItemClick","onItemLinkClick","onGridItemDragStart","onGridItemDragEnter","isGridDropTipShow","onGridItemDragOver","onGridItemDragLeave","onGridItemDragDrop","onGridItemMouseDown","getFileUrl","fileUrlArr","onGridItemContextMenu","fileUrl","gridClass","gridIcon","DirentGridView","isRenameDialogShow","onGridContainerMouseDown","gridContainerClick","isDirentDetailShow","onGridContainerContextMenu","isGridItemFreezed","DirGridView","onRenameNode","currentNode","DirColumnNav","onNodeClick","node","opNode","showNodeImagePopup","onAddFolderToggle","onAddFileToggle","onDeleteNode","onOpenFile","root","treeData","isAddFileDialogShow","isAddFolderDialogShow","onAddFolderNode","newUrl","parentNode","imageNames","isNodeImagePopupOpen","imageNodeItems","prepareImageItems","prepareItem","closeNodeImagePopup","stopTreeScrollPropagation","isNodeMenuShow","flex","navRate","select","inResizing","isTreeDataLoading","TreeView","onNodeExpanded","onNodeCollapse","onUnFreezedItem","onAddFileNode","Copy","Move","DirColumnFile","goDraftPage","hash","isFileLoadedErr","WikiMarkdownViewer","isTOCShow","isFileLoading","markdownContent","lastModified","latestContributor","onLinkClick","DirColumnView","onResizeMouseUp","setCookie","onResizeMouseDown","containerWidth","viewModeContainer","clientWidth","onResizeMouseMove","sizeNavWidth","rate","getCookie","cookiename","onResizeMove","mainFlex","onMouseMove","onMouseUp","LibContentContainer","onMainNavBarClick","closeDirentDetail","currentDirent","checkCurrentDirent","deletedDirent","onItemsScroll","onListContainerScroll","updateDetail","pathExist","isAllDirentSelected","onAllDirentSelected","UPLOAD_UPLOADING","UPLOAD_ERROR","UPLOAD_ISSAVING","UPLOAD_UPLOADED","UploadListItem","onUploadCancel","resumableFile","onUploadRetry","formatFileSize","uploadState","remainingTime","isSaved","progress","newFileName","isUploading","formatTime","ForbidUploadListItem","maxUploadFileSize","UploadProgressDialog","onCancelAllUploading","onMinimizeUpload","isMinimized","onCloseUpload","onCloseUploadDialog","uploadBitrate","formatBitRate","uploadedMessage","uploadingMessage","uploadingOptions","uploadedOptions","allFilesUploaded","retryFileList","onUploadRetryAll","forbidUploadFileList","uploadFileList","UploadRemindDialog","cancelFileUpload","replaceRepetitionFile","uploadFile","currentResumableFile","FileUploader","componentWillUnmount","onbeforeunload","dragAndDrop","resumable","disableDropOnDocument","bindCallbackHandler","minFileSizeErrorCallback","fileTypeErrorCallback","maxFilesErrorCallback","opts","maxFileSizeErrorCallback","bindEventHandler","onChunkingComplete","onFileAdded","filesAddedComplete","onFileProgress","onFileUploadSuccess","onProgress","onComplete","onPause","onFileRetry","onFileError","onError","onBeforeCancel","onCancel","errorCount","maxFiles","maxNumberOfFilesForFileupload","relativePath","relative_path","hasRepetition","isUploadRemindDialogShow","setUploadFileList","getFileServerUploadLink","resumableUpload","isUploadLinkLoaded","_this$props4","getFileUploadedBytes","uploadedBytes","blockSize","resumableUploadFileBlockSize","offset","floor","markChunksCompleted","registerGlobalVariable","getBitrate","uniqueIdentifier","lastSize","loaded","now","timestamp","timeDiff","bitrateInterval","currentTime","dir_name","notifiedFolders","getFileServerErrorMessage","errorMessage","setHeaders","chunkSize","getOpt","fileSize","startByte","endByte","min","encodeURI","setQuery","generateUniqueIdentifier","webkitRelativePath","onFileUpload","uploadInput","removeAttribute","onFolderUpload","setAttribute","uploadingItem","cancel","retryUploadFile","_this$props5","bootstrap","firedRetry","resumableObj","_this$props6","getUpdateLink","_this$props7","pop","Resumablejs","filetypes","maxFileSize","testMethod","testChunks","headers","withCredentials","simultaneousUploads","fileParameterName","forceChunkSize","maxChunkRetries","minFileSize","assignBrowse","enableDropOnDocument","DeleteFolderDialog","deleteFolder","sharedToUserCount","sharedToGroupCount","getRepoFolderShareInfo","opTarget","alert_message","LibContentView","toggleDirentDetail","onpopstate","showFile","onRepoUpdateEvent","lastModifyTime","dirID","updateColumnMarkdownData","dirMetaData","usedRepoTag","updateReadmeMarkdown","last_modifier_name","is_draft","has_draft","getFileDownloadLink","getFileContent","draftID","loadDirData","collabServer","watchRepo","getRepoDraftCounts","draft_counts","loadSidePanel","showDir","_res$data2","tree","addResponseListToNode","loadNodeAndParentsByPath","isSessionExpired","resetShowLength","isNeedUpdateHistoryState","pushState","FileTag","_res$data3","errMsg","markdownItem","sortDirents","dir_id","itemsShowLength","curItemPath","updateMoveCopyTreeNode","nodeChildrenNames","clone","getNodeByPath","addNodeToTree","cancelCopyMoveDirent","taskId","asyncCopyMoveTaskId","cancelCopyMoveOperation","currentMoveItemName","currentMoveItemPath","onMoveProgressDialogToggle","asyncOperationProgress","isCopyMoveProgressDialogShow","onMoveItems","destDirentPath","asyncOperatedFilesLength","asyncOperationType","dirNames","getSelectedDirentNames","getSelectedDirentPaths","moveDir","task_id","getAsyncCopyMoveProgress","deleteTreeNodes","moveDirents","getMoveSuccessMessage","getMoveFailedMessage","onCopyItems","copyDir","getCopySuccessfulMessage","getCopyFailedMessage","restoreDeletedDirents","commitID","paths","closeAll","restoreDirents","_res$data4","addDirent","onDeleteItems","deleteMutipleDirents","deleteDirents","successTipWithUndo","createDir","createFile","getPaths","isWeChat","resetSelected","expandNode","isInternalMarkdownLink","getPathFromInternalMarkdownLink","isInternalDirLink","getPathFromInternalDirLink","onMainPanelItemRename","renameItem","onMainPanelItemDelete","onRenameTreeNode","onDeleteTreeNode","renameDir","renameItemAjaxCallback","renameFile","toggleDeleteFolderDialog","isDeleteFolderDialogOpen","folderToDelete","deleteDir","deleteItemAjaxCallback","onMoveItem","moveToDirentPath","dirName","deleteTreeNode","moveDirent","onCopyItem","copyToDirentPath","loadTreeNodeByPath","showColumnMarkdownFile","onDirentSelected","direntObject","createDirent","renameDirent","newDirentPath","isChildPath","oldName","isAncestorPath","newPath","renameAncestorPath","direntNames","recaculateSelectedStateAfterDirentDeleted","paramKey","paramValue","newDirentList","isLoaded","isExpanded","with_parents","_res$data5","results","parentDir","isLoadFailed","onTreeNodeClick","collapseNode","treeHelper","onTreeNodeCollapse","onTreeNodeExpanded","createTreeNode","addNodeToParentByPath","renameTreeNode","renameNodeByPath","deleteNodeByPath","deleteNodeListByPaths","moveTreeNode","moveToPath","moveToRepo","moveNodeByPath","copyTreeNode","copyToPath","copyNodeByPath","nodeList","TreeNode","addChildren","selectedDirent","names","libNeedDecrypt","onToolbarFileTagChanged","deletedTagID","repo_tag_id","buildTree","oldonpopstate","_componentDidMount","_asyncToGenerator","_regeneratorRuntime","mark","_callee","repoRes","permissionID","permissionRes","wrap","_context","prev","next","decodeURIComponent","sent","RepoInfo","getCustomPermission","custom_permission","lib_need_decrypt","t0","stop","unwatchRepo","_getAsyncCopyMoveProgress","_callee2","_message","_context2","queryAsyncOperationProgress","abrupt","successful","total","done","deleteFile","isVirtual","is_virtual","direntItemsList","onMenuClick","CopyMoveDirentProgressDialog","DismissGroupDialog","dismissGroup","that","deleteGroup","onGroupChanged","showDismissGroupDialog","toggleDismissGroupDialog","RenameGroupDialog","handleGroupNameChange","newGroupName","renameGroup","loadGroup","toggleRenameGroupDialog","handleKeyDown","currentGroupName","showRenameGroupDialog","TransferGroupDialog","transferGroup","toggleTransferGroupDialog","ImportMembersDialog","toggleImportMembersDialog","fileInputRef","importMembersInBatch","groupImportMembersExtraMsg","GroupMembers","groupMembers","changeMember","deleteMember","isOwner","toggleItemFreezed","Member","_React$PureComponent","onChangeUserRole","setGroupAdmin","deleteGroupMember","handleMouseLeave","translateRole","roles","deleteAuthority","scope","RoleEditor","currentRole","onRoleChanged","ManageMembersDialog","listGroupMembers","page","perPage","members","addGroupMember","emails","addGroupMembers","newMembers","isFreezed","targetMember","searchMembers","keyword","membersFound","clearSearch","onSearchInputFocus","searchActive","onSearchInputBlur","_this$state3","InputGroupText","toggleManageMembersDialog","ListAndAddGroupMembers","LeaveGroupDialog","leaveGroup","quitGroup","toggleLeaveGroupDialog","GroupView","getGroup","getEmptyTip","isDepartmentGroup","loadRepos","listGroupRepos","groupOwnerType","groupId","createGroupOwnedLibrary","createGroupRepo","group","unshareRepoToGroup","renameGroupOwnedLibrary","toggleGroupDropdown","showGroupDropdown","showTransferGroupDialog","showImportMembersDialog","notify","importGroupMembersViaFile","showManageMembersDialog","isLeaveGroupDialogOpen","toggleGroupMembersPopover","showGroupMembersPopover","isShowSettingIcon","useRate","GroupsToolbar","canAddGroup","toggleAddGroupModal","CreateGroupDialog","handleGroupChange","groupName","handleSubmitGroup","createGroup","onCreateGroup","showAddGroupModal","RepoListViewPanel","isShowRepoOwner","GroupsView","InvitationsToolbar","toggleInvitePeopleDialog","InvitePeopleDialog","handleSubmitInvite","emailsArray","isSubmitting","invitePeople","successMsg","accepter","onInvitePeople","failedMsg","InvitationRevokeDialog","onRevokeInvitation","revokeInvitation","invitation","deleteInvitation","deleted","revokeItem","toggleRevokeDialog","isRevokeDialogOpen","invite_time","accept_time","invitationsList","InvitationsView","invitationsArray","isInvitePeopleDialogOpen","listInvitations","NewWikiDialog","inputNewName","addWiki","WikiSelectDialog","WikiDeleteDialog","WikiListItem","isShowDeleteDialog","onDeleteCancel","deleteWiki","wiki","fileIconUrl","deleteIcon","owner_nickname","WikiListView","wikis","renameWiki","Wikis","getWikis","listWikis","clickMenuToggle","onMenuToggle","isShowAddWikiMenu","onSelectToggle","isShowSelectDialog","isShowCreateDialog","slug","canPublishRepo","GeneralToolbar","WrapperedComponent","Wrapper","GeneralToolBar","FilesActivitiesWrapper","MainContentWrapper","DraftsViewWrapper","StarredWrapper","LinkedDevicesWrapper","SharedLibrariesWrapper","SharedWithOCMWrapper","ShareWithOCM","OCMViaWebdavWrapper","ShareAdminLibrariesWrapper","ShareAdminFoldersWrapper","App","_event$state","navigateClientUrlToLib","splitUrlArray","repalce","listDrafts","dirViewPanels","generatorPrefix","navTab1","navTab2","navTab","getTabShowName","toggleSidePanel","home","Router","MyLibDeleted","OCMRepoDir","Groups","ReactDom","getElementById","MENU_SHOW","MENU_HIDE","dispatchGlobalEvent","eventName","CustomEvent","createEvent","initCustomEvent","dispatchEvent","store","registerHandlers","handleOutsideClick","handleHide","handleKeyNavigation","unregisterHandlers","handleShow","_e$detail$position","_e$detail","isVisible","callIfExists","menu","contains","hideOnLeave","handleContextMenu","getMenuPosition","menuStyles","_window","rect","getRTLMenuPosition","_window2","listenId","listener","register","wrapper","requestAnimationFrame","rtl","unregister","GlobalEventListener","handleShowEvent","callbacks","hasOwnProp","show","handleHideEvent","hide","showCallback","hideCallback","uniqueId","canUseDOM","func","prop","hasOwnProperty","random","createElement","progressStyle","lineHeight","CreateForder","selectTagcolor","createTag","createRepoTag","repoTagID","onRepoTagCreated","newTag","canSave","TagItem","getRepoTagIdList","onEditFileTag","repoTagIdList","addFileTag","deleteFileTag","isTagSelected","TagList","getRepoTagList","_React$Component3","_this4$props","imageTitle","Lightbox","mainSrc","nextSrc","prevSrc","onCloseRequest","onMovePrevRequest","onMoveNextRequest","imagePadding","imageLoadErrorMessage","prevLabel","nextLabel","closeLabel","zoomInLabel","zoomOutLabel","TaggedFile","parent_path","filename","onDeleteTaggedFile","taggedFile","fileTagID","getTaggedFiles","file_deleted","shareLinkToken","getShareLinkTaggedFiles","listTaggedFiles","taggedFileList","tagged_files","enableFileDownload","copyToClipboard","interval","queryZipProgress","clearInterval","failed_reason","zipProgress","zipped","cancelZipTask","getShareLinkDirentsZipTask","getShareLinkZipTask","setInterval","listenerId","ButtonDropdown","keyCodes","enter","esc","Draft","created","createdStr","ownerNickname","originRepoID","draftFilePath","ListRepoDraftsDialog","onDeleteDraftItem","editorUtilities","listRepoDrafts","DraftItem","draftItem","ReadmeDialog","readmeContent","MarkdownViewer","showTOC","scriptSource","onListTaggedFiles","toggleDrafts","showRepoDrafts","toggleReadme","showReadmeDialog","TreeNodeView","isShowOperationMenu","isHighlight","onLoadToggle","onNodeDragStart","onNodeDragEnter","isNodeDropShow","onNodeDragMove","onNodeDragLeave","onNodeDrop","getNodeTypeAndIcon","suffix","calculateMenuList","RENAME","OPEN_VIA_CLIENT","_customPermission$per2","renderChildren","paddingLeft","hasChildren","_Utils$getUserPermiss3","_this$getNodeTypeAndI","hlClass","dragStartNodeData","isTreeViewDropTipShow","_dragStartNodeData","dropNodeData","contentClass","getTitlesInfo","titlesInfo","titleDom","querySelectorAll","updateTabTitle","headingList","offsetTop","onScrollHandler","activeTitleIndex","contentScrollTop","markdownContainer","titlesLength","changeInlineNode","imagePath","isPublicWiki","index2","originalPath","pathNormalize","isInternalFileLink","match","p1","p2","p3","sharedToken","modifyValueBeforeRender","changeMarkdownNodes","renderMarkdown","isWiki","links","noop","module","exports","count","err_cb","bail","proxy","Error","arraybuffer","start","end","bytes","byteLength","ArrayBuffer","abv","Uint8Array","ii","buffer","Backoff","ms","factor","jitter","attempts","rand","deviation","reset","setMin","setMax","setJitter","chars","encode","base64","decode","encoded1","encoded2","encoded3","encoded4","bufferLength","BlobBuilder","WebKitBlobBuilder","MSBlobBuilder","MozBlobBuilder","blobSupported","Blob","blobSupportsArrayBufferView","blobBuilderSupported","getBlob","mapArrayBufferViews","ary","chunk","buf","set","byteOffset","BlobBuilderConstructor","bb","part","BlobConstructor","Emitter","mixin","_callbacks","once","removeListener","removeAllListeners","cb","listeners","hasListeners","constructor","self","Function","parser","transports","debug","parseuri","parseqs","Socket","uri","hostname","host","secure","protocol","port","agent","upgrade","forceJSONP","jsonp","forceBase64","enablesXDR","timestampParam","timestampRequests","transportOptions","readyState","writeBuffer","prevBufferLen","policyPort","rememberUpgrade","binaryType","onlyBinaryUpgrades","perMessageDeflate","threshold","pfx","passphrase","cert","ca","ciphers","rejectUnauthorized","forceNode","isReactNative","product","extraHeaders","localAddress","upgrades","pingInterval","pingTimeout","pingIntervalTimer","pingTimeoutTimer","priorWebsocketSuccess","Transport","createTransport","EIO","transport","sid","requestTimeout","protocols","shift","setTransport","onDrain","packet","onPacket","probe","onTransportOpen","upgradeLosesBinary","supportsBinary","send","upgrading","pause","cleanup","flush","freezeTransport","onerror","onTransportClose","onclose","onupgrade","onOpen","onHandshake","setPing","code","filterUpgrades","onHeartbeat","timeout","ping","sendPacket","writable","write","compress","waitForUpgrade","cleanupAndClose","reason","filteredUpgrades","doOpen","doClose","packets","onData","decodePacket","XMLHttpRequest","XHR","JSONP","websocket","polling","xd","xs","isSSL","xdomain","xscheme","Polling","inherit","globalThis","JSONPPolling","rNewline","rEscapedNewline","empty","___eio","script","removeChild","form","iframe","doPoll","async","insertAt","getElementsByTagName","insertBefore","head","body","appendChild","userAgent","doWrite","area","iframeId","complete","initIframe","attachEvent","onreadystatechange","onload","Request","isBinary","sendXhr","pollXhr","xhr","setDisableHeaderCheck","setRequestHeader","hasXDR","onLoad","responseText","contentType","getResponseHeader","responseType","requestsCount","requests","onSuccess","fromError","abort","XDomainRequest","unloadHandler","yeast","hasXHR2","poll","decodePayload","callbackfn","encodePayload","schema","b64","BrowserWebSocket","NodeWebSocket","WebSocket","MozWebSocket","WebSocketImpl","WS","usingBrowserWebSocket","ws","supports","binary","addEventListeners","onopen","onmessage","ev","encodePacket","Buffer","hasCORS","load","storage","DEBUG","formatArgs","useColors","namespace","humanize","diff","lastC","save","namespaces","removeItem","WebkitAppearance","firebug","exception","$1","chrome","local","localStorage","localstorage","colors","formatters","enable","createDebug","prevTime","enabled","curr","coerce","formatter","charCodeAt","selectColor","destroy","init","instances","stack","disable","skips","instance","plural","ceil","str","exec","long","fmtShort","base64encoder","hasBinary","sliceBuffer","after","utf8","isAndroid","isPhantomJS","dontSendBlobs","pong","packetslist","each","eachWithIndex","el","utf8encode","encodeBase64Packet","contentArray","resultBuffer","encodeArrayBuffer","fr","FileReader","readAsArrayBuffer","encodeBlobAsArrayBuffer","blob","encodeBlob","encodeBase64Object","encoded","strict","b64data","readAsDataURL","fromCharCode","typed","basic","btoa","utf8decode","charAt","decodeBase64Packet","tryDecode","rest","encodePayloadAsBlob","encodePayloadAsArrayBuffer","doneCallback","setLengthHeader","decodePayloadAsBinary","chr","encodedPackets","totalLength","reduce","acc","resultArray","bufferIndex","isString","ab","view","lenStr","binaryIdentifier","lengthAry","bufferTail","buffers","tailArray","msgLength","arr","has","byteArray","byteCount","byteIndex","stringFromCharCode","ucs2decode","string","extra","output","checkScalarValue","codePoint","toUpperCase","createByte","encodeCodePoint","readContinuationByte","continuationByte","decodeSymbol","byte1","version","codePoints","byteString","tmp","array","ucs2encode","withNativeBlob","withNativeFile","File","isBuffer","toJSON","qs","qry","pairs","pair","re","parts","source","authority","ipv6uri","pathNames","regx","queryKey","$0","$2","propTypes","PropTypes","cssModule","bordered","borderless","striped","dark","hover","responsive","tagPropType","responsiveTag","Tag","ResponsiveTag","attributes","_objectWithoutPropertiesLoose","classes","mapToCssModules","classNames","_extends","responsiveClassName","Manager","lookup","cache","managers","parsed","sameNamespace","nsps","forceNew","multiplex","connect","eio","subs","reconnection","reconnectionAttempts","reconnectionDelay","reconnectionDelayMax","randomizationFactor","backoff","connecting","lastPing","encoding","packetBuffer","_parser","encoder","Encoder","decoder","Decoder","autoConnect","emitAll","nsp","updateSocketIds","generateId","engine","_reconnection","_reconnectionAttempts","_reconnectionDelay","_randomizationFactor","_reconnectionDelayMax","_timeout","maybeReconnectOnOpen","reconnecting","reconnect","skipReconnect","openSub","errorSub","onping","onpong","ondata","add","ondecoded","onConnecting","processPacketQueue","pack","subsLength","disconnect","delay","onreconnect","attempt","toArray","hasBin","connect_error","connect_timeout","reconnect_attempt","reconnect_failed","reconnect_error","ids","acks","receiveBuffer","sendBuffer","connected","disconnected","flags","subEvents","BINARY_EVENT","EVENT","CONNECT","onpacket","rootNamespaceError","onconnect","onevent","ACK","BINARY_ACK","onack","DISCONNECT","ondisconnect","ack","emitBuffered","loc","isBuf","_deconstructPacket","_placeholder","_reconstructPacket","deconstructPacket","packetData","attachments","reconstructPacket","removeBlobs","pendingBlobs","bloblessData","_removeBlobs","curKey","containingObject","fileReader","types","ERROR_PACKET","encodeAsString","payload","tryStringify","reconstructor","BinaryReconstructor","reconPack","writeEncoding","deconstruction","encodeAsBinary","tryParse","decodeString","takeBinaryData","finishedReconstruction","binData","withNativeBuffer","withNativeArrayBuffer","isView","SpriteSymbol","viewBox","this$1","hasImportNode","importNode","doc","DOMParser","parseFromString","createCommonjsModule","global","deepmerge","factory","commonjsGlobal","isMergeableObject","emptyTarget","cloneIfNecessary","optionsArgument","defaultArrayMerge","destination","mergeObject","arrayMerge","all","namespaces_1","svg","xlink","default","objectToAttrsString","attrs","attr","defaultAttrs","wrapInSvgString","BrowserSpriteSymbol","SpriteSymbol$$1","__proto__","prototypeAccessors","isMounted","createFromExistingNode","outerHTML","unmount","mount","mountTarget","querySelector","render","childNodes","defineProperties","mitt","handler","evt","svg$1","xlink$1","defaultConfig","Sprite","symbols","existing","remove","stringifiedSymbols","defaultConfig$1","autoConfigure","mountTo","syncUrlsWithBaseTag","listenLocationChangeEvent","locationChangeEvent","locationChangeAngularEmitter","usagesToUpdate","moveGradientsOutsideSymbol","arrayFrom","arrayLike","browser","isChrome","isFirefox","isIE","isEdge","evalStylesIEWorkaround","updatedNodes","textContent","getUrlWithoutFragment","angular","run","$rootScope","$on","oldUrl","defaultSelector","selector","selectAttributes","nodes","matcher","arrayfied","matched","xLinkNS","xLinkAttrName","specialUrlCharsPattern","escapeRegExp","updateReferences","replaceWith","setAttributeNS","sprite","attList","attSelector","updateUrls","references","startsWithEncoded","replaceWithEncoded","localName","Events","MOUNT","SYMBOL_MOUNT","BrowserSprite","Sprite$$1","cfg","emitter","_emitter","_autoConfigure","baseUrl","handleLocationChange","_handleLocationChange","spriteNode","symbolNode","isNewSymbol","attach","prepend","mountNode","usages","ready$1","definition","fns","hack","doScroll","domContentLoaded","spriteNodeId","spriteGlobalVarName","loadSprite","alphabet","seed","decoded","webpackContext","webpackContextResolve","__webpack_require__","resolve"],"sourceRoot":""}