/*! For license information please see viewFileSdoc.7571cedf.js.LICENSE.txt */
(self.webpackChunkseahub_frontend=self.webpackChunkseahub_frontend||[]).push([[8713],{72249:function(e,t,n){"use strict";var r=n(23029),o=n(92901),a=function(){return(0,o.A)((function e(){(0,r.A)(this,e),this.subscribers={}}),[{key:"subscribe",value:function(e,t){this.subscribers[e]||(this.subscribers[e]=[]);var n=this.subscribers[e];return n.push(t),function(){var e=n.indexOf(t);e>-1&&n.splice(e,1)}}},{key:"dispatch",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var o=this.subscribers[e];Array.isArray(o)&&o.forEach((function(e){return e.apply(void 0,n)}))}}])}();t.A=a},56999:function(e,t,n){"use strict";var r=n(23029),o=n(92901),a=n(39874),i=n(85501),l=n(9950),s=n(58195),u=n(14113),c=n(99308),d=n(19247),f=n(76152),p=n(55627),m=n(85077),h=n(76115),v=n(85907),g=n(18849),y=n(40326),C=n(65604),E=n(44414),_=function(e){function t(e){var n;(0,r.A)(this,t),(n=(0,a.A)(this,t,[e])).isSdocSuffix=function(e){return e.endsWith(".sdoc")},n.handleChange=function(e){e.target.value.trim()?n.setState({isSubmitBtnActive:!0}):n.setState({isSubmitBtnActive:!1}),n.setState({childName:e.target.value})},n.handleSubmit=function(){if(n.state.isSubmitBtnActive){var e=n.state.childName.trim(),t=(0,C.yS)(e),r=t.isValid,o=t.errMessage;if(r){if(n.props.checkDuplicatedName(e)){var a=(0,y.AP)('The name "{name}" is already taken. Please choose a different name.');return a=a.replace("{name}",C.Aq.HTMLescape(e)),void n.setState({errMessage:a})}n.props.onAddFile(n.state.parentPath+e),n.props.toggleDialog()}else n.setState({errMessage:o})}},n.handleKeyDown=function(e){"Enter"===e.key&&(n.handleSubmit(),e.preventDefault())},n.onAfterModelOpened=function(){n.newInput.current&&(n.newInput.current.focus(),n.newInput.current.setSelectionRange(0,0))};var o=e.fileType,i=void 0===o?"":o;return n.state={parentPath:"",childName:i,errMessage:"",isSubmitBtnActive:!!n.isSdocSuffix(i)},n.newInput=l.createRef(),n}return(0,i.A)(t,e),(0,o.A)(t,[{key:"componentDidMount",value:function(){var e=this.props.parentPath;"/"===e[e.length-1]?this.setState({parentPath:e}):this.setState({parentPath:e+"/"})}},{key:"render",value:function(){var e=this.props.toggleDialog;return(0,E.jsxs)(s.A,{isOpen:!0,toggle:e,onOpened:this.onAfterModelOpened,children:[(0,E.jsx)(u.A,{toggle:e,children:(0,y.AP)("New File")}),(0,E.jsxs)(c.A,{children:[(0,E.jsx)(d.A,{children:(0,E.jsxs)(f.A,{children:[(0,E.jsx)(p.A,{for:"fileName",children:(0,y.AP)("Name")}),(0,E.jsx)(m.A,{id:"fileName",onKeyDown:this.handleKeyDown,innerRef:this.newInput,value:this.state.childName,onChange:this.handleChange})]})}),this.state.errMessage&&(0,E.jsx)(h.A,{color:"danger",className:"mt-2",children:this.state.errMessage})]}),(0,E.jsxs)(v.A,{children:[(0,E.jsx)(g.A,{color:"secondary",onClick:e,children:(0,y.AP)("Cancel")}),(0,E.jsx)(g.A,{color:"primary",onClick:this.handleSubmit,disabled:!this.state.isSubmitBtnActive,children:(0,y.AP)("Submit")})]})]})}}])}(l.Component);t.A=_},92811:function(e,t,n){"use strict";n.d(t,{A:function(){return c}});var r=n(9950),o=n(48738),a=n.n(o),i=n(71791),l=n(3563),s=n(44414),u=function(e){var t=e.readonly,n=e.field,o=e.className,u=e.children,c=(0,r.useMemo)((function(){return"size"===n.type?l.ZPL[l.vZe.NUMBER]:l.ZPL[n.type]}),[n]);return(0,s.jsxs)("div",{className:a()("dirent-detail-item",o),children:[(0,s.jsxs)("div",{className:"dirent-detail-item-name",children:[(0,s.jsx)(i.In,{iconName:c}),(0,s.jsx)("span",{className:"dirent-detail-item-name-value",children:n.name})]}),(0,s.jsx)("div",{className:a()("dirent-detail-item-value",{editable:!t}),children:u})]})};u.defaultProps={readonly:!0};var c=u},7266:function(e,t,n){"use strict";n.d(t,{nB:function(){return f},kZ:function(){return c},Y9:function(){return d.A}});var r=n(5544),o=n(9950),a=n(48738),i=n.n(a),l=n(91447),s=n(14522),u=n(44414),c=function(e){var t=e.children,n=e.className,a=(0,o.useState)(300),c=(0,r.A)(a,2),d=c[0],f=c[1],p=(0,o.useState)(!1),m=(0,r.A)(p,2),h=m[0],v=m[1],g=(0,o.useRef)(null),y=(0,o.useRef)(null),C=(0,o.useCallback)((function(e){var t=Math.max(Math.min(window.innerWidth-e.clientX,600),300);d!==t&&(localStorage.setItem("sf_cur_view_detail_width",t),f(t))}),[d]),E=(0,o.useCallback)((function(){window.removeEventListener("mousemove",C),window.removeEventListener("mouseup",E),h&&v(!1)}),[h,C]),_=(0,o.useCallback)((function(){window.addEventListener("mouseup",E),window.addEventListener("mousemove",C),v(!0)}),[E,C]),A=(0,o.useCallback)((function(e){y.current.style.top=e+"px"}),[]),b=(0,o.useCallback)((function(e){if(y.current){var t=g.current.getBoundingClientRect().top,n=e.pageY-t-s.gO/2;A(n)}}),[A]);return(0,o.useEffect)((function(){var e=localStorage.getItem("sf_cur_view_detail_width"),t=e?parseInt(e):300;f(t)}),[]),(0,u.jsxs)("div",{className:i()("cur-view-detail",n,{"cur-view-detail-small":d<400,"cur-view-detail-large":d>400}),style:{width:d},children:[t,(0,u.jsx)(l.A,{resizeBarRef:g,dragHandlerRef:y,resizeBarStyle:{left:-1},dragHandlerStyle:{height:s.gO},onResizeMouseDown:_,onResizeMouseOver:b})]})},d=n(7439),f=function(e){var t=e.className,n=e.children;return(0,u.jsx)("div",{className:i()("detail-body dirent-info",t),children:n})}},14522:function(e,t,n){"use strict";n.d(t,{Pf:function(){return i},Rx:function(){return a},gO:function(){return r},nT:function(){return o}});var r=26,o=.22,a=.4,i=.15},91447:function(e,t,n){"use strict";n.d(t,{A:function(){return a}});n(9950);var r=n(47089),o=n(44414);var a=function(e){return(0,o.jsxs)("div",{className:"resize-bar",ref:e.resizeBarRef,style:Object.assign({zIndex:r.r},e.resizeBarStyle),onMouseDown:e.onResizeMouseDown,onMouseOver:e.onResizeMouseOver,children:[(0,o.jsx)("div",{className:"resize-bar-line"}),(0,o.jsx)("div",{className:"resize-bar-drag-handler",ref:e.dragHandlerRef,style:e.dragHandlerStyle})]})}},47089:function(e,t,n){"use strict";n.d(t,{V0:function(){return a},bV:function(){return o},r:function(){return r}});var r=2,o=2,a=3},19175:function(e,t,n){"use strict";var r=n(23029),o=n(92901),a=n(26910),i=n(58801),l=n(40326),s=n(3563),u=function(){return(0,o.A)((function e(){var t=this;(0,r.A)(this,e),this.getCollaborators=function(e){var n=t.server+"/api/v2.1/repos/"+e+"/related-users/";return t.req.get(n)},this.modifyRecord=function(e,n,r,o){var a=t.server+"/api/v2.1/repos/"+e+"/metadata/records/",i={records_data:[{record_id:n,record:r,obj_id:o}]};return t.req.put(a,i)},this.modifyRecords=function(e,n){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=t.server+"/api/v2.1/repos/"+e+"/metadata/records/",a={records_data:n};return r&&(a.is_copy_paste="true"),t.req.put(o,a)},this.listUserInfo=function(e){var n=t.server+"/api/v2.1/user-list/",r={user_id_list:e};return t._sendPostRequest(n,r,{headers:{"Content-type":"application/json"}})},this.listViews=function(e){var n=t.server+"/api/v2.1/repos/"+e+"/metadata/views/";return t.req.get(n)},this.getView=function(e,n){var r=t.server+"/api/v2.1/repos/"+e+"/metadata/views/"+n+"/";return t.req.get(r)},this.addView=function(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"table",o=t.server+"/api/v2.1/repos/"+e+"/metadata/views/",a={name:n,type:r,data:{basic_filters:s.pkt[r],sorts:s.hcH[r]}};return t._sendPostRequest(o,a,{headers:{"Content-type":"application/json"}})},this.duplicateView=function(e,n){var r=t.server+"/api/v2.1/repos/"+e+"/metadata/duplicate-view/",o={view_id:n};return t._sendPostRequest(r,o,{headers:{"Content-type":"application/json"}})},this.modifyView=function(e,n,r){var o=t.server+"/api/v2.1/repos/"+e+"/metadata/views/",a={view_id:n,view_data:r};return t.req.put(o,a)},this.deleteView=function(e,n){var r=t.server+"/api/v2.1/repos/"+e+"/metadata/views/",o={view_id:n};return t.req.delete(r,{data:o})},this.moveView=function(e,n,r){var o=t.server+"/api/v2.1/repos/"+e+"/metadata/move-views/",a={view_id:n,target_view_id:r};return t._sendPostRequest(o,a,{headers:{"Content-type":"application/json"}})},this.insertColumn=function(e,n,r,o){var a=o.key,i=o.data,l=t.server+"/api/v2.1/repos/"+e+"/metadata/columns/",s={column_name:n,column_type:r};return a&&(s.column_key=a),i&&(s.column_data=i),t.req.post(l,s)},this.deleteColumn=function(e,n){var r=t.server+"/api/v2.1/repos/"+e+"/metadata/columns/",o={column_key:n};return t.req.delete(r,{data:o})},this.renameColumn=function(e,n,r){var o=t.server+"/api/v2.1/repos/"+e+"/metadata/columns/",a={column_key:n,name:r};return t.req.put(o,a)},this.modifyColumnData=function(e,n,r){var o=t.server+"/api/v2.1/repos/"+e+"/metadata/columns/",a={column_key:n,data:r};return t.req.put(o,a)},this.generateDescription=function(e,n){var r=t.server+"/api/v2.1/ai/generate-summary/",o={path:n,repo_id:e};return t.req.post(r,o)},this.imageCaption=function(e,n,r){var o=t.server+"/api/v2.1/ai/image-caption/",a={path:n,repo_id:e,lang:r};return t.req.post(o,a)}}),[{key:"init",value:function(e){var t=e.server,n=e.username,r=e.password,o=e.token;return this.server=t,this.username=n,this.password=r,this.token=o,this.token&&this.server&&(this.req=a.A.create({baseURL:this.server,headers:{Authorization:"Token "+this.token}})),this}},{key:"initForSeahubUsage",value:function(e){var t=e.siteRoot,n=e.xcsrfHeaders;if(t&&"/"===t.charAt(t.length-1)){var r=t.substring(0,t.length-1);this.server=r}else this.server=t;return this.req=a.A.create({headers:{"X-CSRFToken":n}}),this}},{key:"_sendPostRequest",value:function(e,t){return t.getHeaders?this.req.post(e,t,{headers:t.getHeaders()}):this.req.post(e,t)}},{key:"getMetadataStatus",value:function(e){var t=this.server+"/api/v2.1/repos/"+e+"/metadata/";return this.req.get(t)}},{key:"createMetadata",value:function(e){var t=this.server+"/api/v2.1/repos/"+e+"/metadata/";return this.req.put(t)}},{key:"deleteMetadata",value:function(e){var t=this.server+"/api/v2.1/repos/"+e+"/metadata/";return this.req.delete(t)}},{key:"getMetadata",value:function(e,t){var n=this.server+"/api/v2.1/repos/"+e+"/metadata/records/";return this.req.get(n,{params:t})}},{key:"getMetadataRecordInfo",value:function(e,t,n){var r=this.server+"/api/v2.1/repos/"+e+"/metadata/record/",o={};return t&&(o.parent_dir=t),n&&(o.name=n),this.req.get(r,{params:o})}}])}(),c=new u,d=i.Ay.load("sfcsrftoken");c.initForSeahubUsage({siteRoot:l.Yc,xcsrfHeaders:d}),t.A=c},44:function(e,t,n){"use strict";n.d(t,{lN:function(){return w},M8:function(){return v},Xj:function(){return p},D1:function(){return O},Sv:function(){return g},p_:function(){return m}});var r=n(89379),o=n(5544),a=n(9950),i=n(19175),l=n(65604),s=n(4086),u=n(40326),c=n(13042),d=n(44414),f=a.createContext(null),p=function(e){var t=e.repoID,n=e.hideMetadataView,p=e.selectMetadataView,m=e.children,h=(0,a.useMemo)((function(){return window.app.pageOptions.enableMetadataManagement}),[window.app.pageOptions.enableMetadataManagement]),v=(0,a.useState)(!1),g=(0,o.A)(v,2),y=g[0],C=g[1],E=(0,a.useState)(!1),_=(0,o.A)(E,2),A=_[0],b=_[1],S=(0,a.useState)([]),w=(0,o.A)(S,2),O=w[0],R=w[1],T=(0,a.useState)(0),x=(0,o.A)(T,2)[1],M=(0,a.useRef)({}),D=(0,a.useCallback)((function(){var e=window.location,t=e.origin,n=e.pathname,r=e.search;if(new URLSearchParams(r).get("view")){var o="".concat(t).concat(n);window.history.pushState({url:o,path:""},"",o)}}),[]);(0,a.useEffect)((function(){h?i.A.getMetadataStatus(t).then((function(e){var t=e.data.enabled;t||D(),C(t)})).catch((function(e){var t=l.Aq.getErrorMsg(e,!0);s.A.danger(t),C(!1)})):D()}),[t,h]);var I=(0,a.useCallback)((function(e){e!==y&&(e?b(!0):(n&&n(),D()),C(e))}),[y,n,D]);(0,a.useEffect)((function(){y?i.A.listViews(t).then((function(e){var t=e.data,n=t.navigation,r=t.views;Array.isArray(r)&&r.forEach((function(e){M.current[e._id]=e})),R(n)})).catch((function(e){var t=l.Aq.getErrorMsg(e);s.A.danger(t)})):(M.current={},R([]))}),[t,y]);var N=(0,a.useCallback)((function(e,n){if(!n){var r={children:[],path:"/"+c.AT.FILE_EXTENDED_PROPERTIES+"/"+e._id,isExpanded:!1,isLoaded:!0,isPreload:!0,object:{file_tags:[],id:c.AT.FILE_EXTENDED_PROPERTIES,name:(0,u.AP)("File extended properties"),type:c.AT.FILE_EXTENDED_PROPERTIES,isDir:function(){return!1}},parentNode:{},key:t,view_id:e._id};p(r)}}),[t,p]),L=(0,a.useCallback)((function(e,n,r,o){i.A.addView(t,e,n).then((function(e){var t=e.data.view,n=O.slice(0);n.push({_id:t._id,type:"view"}),M.current[t._id]=t,R(n),N(t),r&&r()})).catch((function(e){o&&o(e)}))}),[O,t,M,N]),k=(0,a.useCallback)((function(e){i.A.duplicateView(t,e).then((function(e){var t=e.data.view,n=O.slice(0);n.push({_id:t._id,type:"view"}),M.current[t._id]=t,R(n),N(t)})).catch((function(e){var t=l.Aq.getErrorMsg(e);s.A.danger(t)}))}),[O,t,M,N]),P=(0,a.useCallback)((function(e,n){i.A.deleteView(t,e).then((function(t){var r=O.filter((function(t){return t._id!==e}));if(delete M.current[e],R(r),n){var o=O.findIndex((function(t){return t._id===e})),a=O[o-1]._id,i=M.current[a];N(i)}})).catch((function(e){var t=l.Aq.getErrorMsg(e);s.A.danger(t)}))}),[t,O,N,M]),F=(0,a.useCallback)((function(e,n,o,a){i.A.modifyView(t,e,n).then((function(t){var a=M.current[e];M.current[e]=(0,r.A)((0,r.A)({},a),n),x((function(e){return e+1})),o&&o()})).catch((function(e){a&&a(e)}))}),[t,M]),j=(0,a.useCallback)((function(e,n){i.A.moveView(t,e,n).then((function(e){var t=e.data.navigation;R(t)})).catch((function(e){var t=l.Aq.getErrorMsg(e);s.A.danger(t)}))}),[t]);return(0,d.jsx)(f.Provider,{value:{enableMetadata:y,updateEnableMetadata:I,showFirstView:A,setShowFirstView:b,navigation:O,viewsMap:M.current,selectView:N,addView:L,duplicateView:k,deleteView:P,updateView:F,moveView:j},children:m})},m=function(){var e=(0,a.useContext)(f);if(!e)throw new Error("'MetadataContext' is null");return e},h=a.createContext(null),v=function(e){var t=e.repoID,n=e.children,r=(0,a.useMemo)((function(){return window.app.pageOptions.enableMetadataManagement}),[window.app.pageOptions.enableMetadataManagement]),u=(0,a.useState)(!1),c=(0,o.A)(u,2),f=c[0],p=c[1];return(0,a.useEffect)((function(){r&&i.A.getMetadataStatus(t).then((function(e){var t=e.data.enabled;p(t)})).catch((function(e){var t=l.Aq.getErrorMsg(e,!0);s.A.danger(t),p(!1)}))}),[t,r]),(0,d.jsx)(h.Provider,{value:{enableMetadata:f},children:n})},g=function(){var e=(0,a.useContext)(h);if(!e)throw new Error("'EnableMetadataContext' is null");return e},y=n(64467),C=n(60436),E=n(3563),_=n(92901),A=n(23029),b=(0,_.A)((function e(t){(0,A.A)(this,e),this.avatar_url=t.avatar_url||"",this.contact_email=t.contact_email||"",this.username=t.email||t.username||"",this.email=this.username,this.name=t.name||"",this.name_pinyin=t.name_pinyin||"",this.id=t.id_in_org||""})),S=a.createContext(null),w=function(e){var t=e.repoID,n=e.children,l=(0,a.useState)({}),s=(0,o.A)(l,2),c=s[0],f=s[1],p=(0,a.useState)([]),m=(0,o.A)(p,2),h=m[0],v=m[1],g=(0,a.useMemo)((function(){var e=new E.DLc({mediaUrl:u.SG,api:i.A.listUserInfo}).queryUser;return window.queryUser=e,e}),[]);(0,a.useEffect)((function(){i.A.getCollaborators(t).then((function(e){var t,n=Array.isArray(null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.user_list)?e.data.user_list.map((function(e){return new b(e)})):[];v(n)}))}),[t]),(0,a.useEffect)((function(){window.sfMetadata||(window.sfMetadata={},window.sfMetadata.getCollaboratorsFromCache=function(){return Object.values(window.sfMetadata.collaboratorsCache||{})||[]},window.sfMetadata.getCollaborators=function(){return[].concat((0,C.A)(window.sfMetadata.collaborators),(0,C.A)(Object.values(window.sfMetadata.collaboratorsCache||{})||[]))}),window.sfMetadata.collaborators=h,window.sfMetadata.collaboratorsCache=c}),[h,c]);var _=(0,a.useCallback)((function(e){var t=(0,r.A)((0,r.A)({},c),{},(0,y.default)({},e.email,e));f(t)}),[c]),A=(0,a.useCallback)((function(e){var t=h&&h.find((function(t){return t.email===e}));if(t)return t;var n="".concat(u.SG,"/avatars/default.png");return"anonymous"===e||"seafevents"===e?t={email:e,name:e,avatar_url:n}:(t=c[e])||((0,E.B9Y)(e)?null:{email:e,name:e,avatar_url:n})}),[h,c]);return(0,d.jsx)(S.Provider,{value:{collaborators:h,collaboratorsCache:c,updateCollaboratorsCache:_,getCollaborator:A,queryUser:g},children:n})},O=function(){var e=(0,a.useContext)(S);if(!e)throw new Error("'CollaboratorsContext' is null");return{collaborators:e.collaborators,collaboratorsCache:e.collaboratorsCache,updateCollaboratorsCache:e.updateCollaboratorsCache,getCollaborator:e.getCollaborator,queryUser:e.queryUser}}},53264:function(e,t,n){"use strict";n.d(t,{lN:function(){return oe.lN},M8:function(){return oe.M8},BT:function(){return hr.A},iF:function(){return Hr},nx:function(){return wr},Lr:function(){return Pr},Bd:function(){return vr},D1:function(){return oe.D1},Sv:function(){return oe.Sv},p_:function(){return oe.p_}});var r=n(89379);var o=n(9950),a=n(47127),i=n(58419),l=n(44414),s=n(71791),u=n(64467),c=n(90675),d=n(10467),f=n(5544),p=n(4086),m=n(73575),h=n(3563),v=n(80045),g=n(48738),y=n.n(g),C=n(23029),E=n(92901),_=n(39874),A=n(85501),b=n(89857),S=n(78297),w=function(e){function t(){var e;(0,C.A)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=(0,_.A)(this,t,[].concat(r))).cleanUp=function(){window.removeEventListener("mouseup",e.onMouseUp),window.removeEventListener("mousemove",e.onMouseMove),window.removeEventListener("touchend",e.onMouseUp),window.removeEventListener("touchmove",e.onMouseMove)},e.onMouseDown=function(t){t.preventDefault&&t.preventDefault(),window.addEventListener("mouseup",e.onMouseUp),window.addEventListener("mousemove",e.onMouseMove),window.addEventListener("touchend",e.onMouseUp),window.addEventListener("touchmove",e.onMouseMove)},e.onMouseUp=function(t){e.props.onDragEnd&&e.props.onDragEnd(t),e.cleanUp()},e.onMouseMove=function(t){t.preventDefault&&t.preventDefault(),(0,h.sg1)(e.props.onDrag(t),100)},e}return(0,A.A)(t,e),(0,E.A)(t,[{key:"componentWillUnmount",value:function(){this.cleanUp()}},{key:"render",value:function(){return(0,l.jsx)("div",{className:"record-HeaderCell__draggable",onClick:function(e){return e.stopPropagation()},onDrag:this.props.onDrag,onMouseDown:this.onMouseDown,onTouchStart:this.onMouseDown})}}])}(o.Component),O=w,R=n(19260),T=n(6030),x=n(33151),M=n(68879),D=function(e){var t=e.disabled,n=e.iconName,r=e.target,a=e.title,i=e.tip,u=e.className,c=e.onChange,d=e.onMouseEnter,p=(0,o.useState)(!1),m=(0,f.A)(p,2),h=m[0],v=m[1];(0,o.useEffect)((function(){t&&v(!0)}),[]);var g=(0,o.useCallback)((function(e){e.preventDefault(),e.nativeEvent.stopImmediatePropagation(),e.stopPropagation()}),[]);return t?(0,l.jsx)(l.Fragment,{children:(0,l.jsxs)(M.A,{className:y()("disabled",u),toggle:!0,onClick:g,onMouseEnter:d,id:r,children:[(0,l.jsx)(s.In,{iconName:n}),(0,l.jsx)("span",{className:"item-text",children:a}),h&&(0,l.jsx)(S.A,{placement:"right",target:r,fade:!1,delay:{show:0,hide:0},className:"sf-metadata-tooltip",children:i})]})}):(0,l.jsxs)(M.A,{id:r,onClick:c,onMouseEnter:d,className:u,children:[(0,l.jsx)(s.In,{iconName:n}),(0,l.jsx)("span",{className:"item-text",children:a})]})};D.defaultProps={onChange:function(){},onMouseEnter:function(){},disabled:!1,className:""};var I=D,N=n(99153),L=function(e){var t=e.column,n=e.view,r=e.renameColumn,a=e.modifyColumnData,u=e.deleteColumn,c=(0,o.createRef)(),d=(0,o.createRef)(),p=(0,o.useState)(!1),v=(0,f.A)(p,2),g=v[0],C=v[1],E=(0,o.useState)(!1),_=(0,f.A)(E,2),A=_[0],b=_[1],S=(0,o.useState)(!1),w=(0,f.A)(S,2),O=w[0],D=w[1],L=(0,o.useState)(!1),k=(0,f.A)(L,2),P=k[0],F=k[1],j=(0,o.useMemo)((function(){var e=new Date,t=e.getFullYear(),n=e.getMonth()+1,r=e.getDate(),o=e.getHours(),a=e.getMinutes();return n=n>9?n:"0".concat(n),r=r>9?r:"0".concat(r),o=o>9?o:"0".concat(o),a=a>9?a:"0".concat(a),"".concat(t,"-").concat(n,"-").concat(r," ").concat(o,":").concat(a)}),[]),Y=(0,o.useCallback)((function(e){e&&e.preventDefault(),e&&e.stopPropagation();var t=e.target;"string"===t.className&&t.className.includes("disabled")||C(!g)}),[g]),U=(0,o.useCallback)((function(){b(!0)}),[]),B=(0,o.useCallback)((function(){b(!1)}),[]),H=(0,o.useCallback)((function(){F(!0)}),[]),G=(0,o.useCallback)((function(){F(!1)}),[]),V=(0,o.useCallback)((function(e){var n=t.data||{};C(!1),a(t.key,{options:e},{options:n.options||[]})}),[t,a]),Z=(0,o.useCallback)((function(e,n){e&&e.stopPropagation();var r=t.data?t.data.format:"";b(!1),C(!1),r!==n&&a(t.key,{format:n},{format:r})}),[t,a]),z=(0,o.useCallback)((function(){u(t.key,t)}),[t,u]),X=(0,o.useCallback)((function(){D(!0)}),[]),W=(0,o.useCallback)((function(){D(!1)}),[]),K=(0,o.useCallback)((function(e){e!==t.name?(r(t.key,e,t.name),D(!1)):D(!1)}),[t,r]),$=(0,o.useCallback)((function(e){if(!e)return(0,l.jsx)(I,{disabled:!0,target:"sf-metadata-edit-column-format",title:(0,i.AP)("Edit format settings"),tip:(0,i.AP)("You do not have permission"),iconName:"set-up"});var n=t.data,r=(void 0===n?{}:n).format,o=(void 0===r?h.D23:r).indexOf("HH:mm")>-1,a=[{label:"".concat((0,i.AP)("ISO")," (").concat((0,h.u1Q)(j,y()("YYYY-MM-DD",{"HH:mm":o})),")"),value:y()("YYYY-MM-DD",{"HH:mm":o})},{label:"".concat((0,i.AP)("US")," (").concat((0,h.u1Q)(j,y()("M/D/YYYY",{"HH:mm":o})),")"),value:y()("M/D/YYYY",{"HH:mm":o})},{label:"".concat((0,i.AP)("European")," (").concat((0,h.u1Q)(j,y()("DD/MM/YYYY",{"HH:mm":o})),")"),value:y()("DD/MM/YYYY",{"HH:mm":o})},{label:"".concat((0,i.AP)("Germany Russia etc")," (").concat((0,h.u1Q)(j,y()("DD.MM.YYYY",{"HH:mm":o})),")"),value:y()("DD.MM.YYYY",{"HH:mm":o})}];return(0,l.jsxs)(R.A,{className:"sf-metadata-dropdown-menu w-100",isOpen:A,direction:"right",children:[(0,l.jsxs)(T.A,{tag:"span",role:"button","data-toggle":"dropdown","aria-expanded":g,className:"dropdown-item sf-metadata-column-dropdown-item d-flex align-items-center",onMouseOver:U,disabled:!0,caret:!0,children:[(0,l.jsx)(s.In,{iconName:"set-up"}),(0,l.jsx)("span",{className:"item-text",children:(0,i.AP)("Edit format settings")})]}),(0,l.jsx)(x.A,{style:{marginLeft:"-16px",transform:"none"},children:a.map((function(e){return(0,l.jsx)(M.A,{className:"sf-metadata-column-dropdown-item",toggle:!1,onClick:function(t){return Z(t,e.value)},children:(0,l.jsx)("span",{children:e.label})},e.value)}))})]})}),[j,t,g,A,Z,U]),q=(0,o.useCallback)((function(e,r){if(window.sfMetadataContext.canModifyView()){var o=n.sorts.slice(0),a=t.key,i=o.findIndex((function(e){return e.column_key===a})),l=o[i],s={column_key:t.key,sort_type:e},u=window.sfMetadataContext.eventBus;return l?l&&l.sort_type!==e?(o.splice(i,1,s),void u.dispatch(m.Tw.MODIFY_SORTS,o,!0)):void u.dispatch(m.Tw.DISPLAY_SORTS):(o.push(s),void u.dispatch(m.Tw.MODIFY_SORTS,o,!0))}r.stopPropagation()}),[n,t]),Q=(0,o.useCallback)((function(){var e=t.type,n=window.sfMetadataContext.canModifyColumnData(t),r=window.sfMetadataContext.canDeleteColumn(t),o=window.sfMetadataContext.canRenameColumn(t),a=window.sfMetadataContext.canModifyView();return(0,l.jsx)(x.A,{ref:c,className:"sf-metadata-column-dropdown-menu",children:(0,l.jsxs)("div",{ref:d,children:[e===h.vZe.SINGLE_SELECT&&(0,l.jsx)(l.Fragment,{children:(0,l.jsx)(I,{disabled:!n,target:"sf-metadata-edit-column-options",iconName:"single-select",title:(0,i.AP)("Edit single select"),tip:(0,i.AP)("You do not have permission"),onChange:H})}),e===h.vZe.MULTIPLE_SELECT&&(0,l.jsx)(I,{disabled:!n,target:"sf-metadata-edit-column-options",iconName:"multiple-select",title:(0,i.AP)("Edit multiple select"),tip:(0,i.AP)("You do not have permission"),onChange:H}),e===h.vZe.NUMBER&&(0,l.jsx)(I,{disabled:!n,target:"sf-metadata-edit-column-format",iconName:"set-up",title:(0,i.AP)("Edit format settings"),tip:(0,i.AP)("You do not have permission"),onChange:H}),e===h.vZe.DATE&&(0,l.jsx)(l.Fragment,{children:$(n)}),[h.vZe.DATE,h.vZe.SINGLE_SELECT,h.vZe.NUMBER,h.vZe.MULTIPLE_SELECT].includes(t.type)&&(0,l.jsx)(M.A,{divider:!0},"divider-item"),(0,l.jsx)(I,{disabled:!o,target:"sf-metadata-rename-column",iconName:"rename",title:(0,i.AP)("Rename property"),tip:(0,i.AP)("You do not have permission"),onChange:X,onMouseEnter:B}),(h.dc.includes(t.type)||h.oCN.includes(t.type))&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(I,{disabled:!a||h.oCN.includes(t.type),target:"sf-metadata-sort-ascending-column",iconName:"sort-ascending",title:(0,i.AP)("Sort ascending"),tip:a?(0,i.AP)("This property does not support sorting"):(0,i.AP)("You do not have permission"),onChange:function(){return q(h.ClR.UP)},onMouseEnter:B}),(0,l.jsx)(I,{disabled:!a||h.oCN.includes(t.type),target:"sf-metadata-sort-descending-column",iconName:"sort-descending",title:(0,i.AP)("Sort descending"),tip:a?(0,i.AP)("This property does not support sorting"):(0,i.AP)("You do not have permission"),onChange:function(){return q(h.ClR.DOWN)},onMouseEnter:B})]}),(0,l.jsx)(I,{disabled:!r,target:"sf-metadata-delete-column",iconName:"delete",title:(0,i.AP)("Delete property"),tip:(0,i.AP)("You do not have permission"),onChange:z,onMouseEnter:B})]})})}),[t,X,B,$,H,c,d,q,z]);return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(R.A,{className:"sf-metadata-dropdown-menu",isOpen:g,toggle:Y,children:[(0,l.jsx)(T.A,{tag:"span",role:"button","data-toggle":"dropdown","aria-expanded":g,title:(0,i.AP)("More operations"),"aria-label":(0,i.AP)("More operations"),tabIndex:0,children:(0,l.jsx)(s.In,{iconName:"drop-down"})}),g&&!i.Fr&&(0,l.jsx)(s.Q$,{children:(0,l.jsx)("div",{className:"sf-metadata-dropdown-menu large",children:Q()})})]}),O&&(0,l.jsx)(s.Q$,{children:(0,l.jsx)(N.Yt,{target:"sf-metadata-column-".concat(t.key),value:t.name,onToggle:W,onSubmit:K})}),P&&(0,l.jsx)(s.Q$,{children:(0,l.jsx)(N.wm,{target:"sf-metadata-column-".concat(t.key),column:t,onToggle:G,onSubmit:V})})]})},k={hover:function(e,t,n){var r;if(window.sfMetadataBody){var o=200,a=t.getClientOffset().x,i=null===(r=document.querySelector(".sf-metadata-wrapper"))||void 0===r?void 0:r.clientWidth,l=window.innerWidth-i;i<=800&&(o=20),a>window.innerWidth-o?window.sfMetadataBody.scrollToRight():a<e.frozenColumnsWidth+o+l?window.sfMetadataBody.scrollToLeft():window.sfMetadataBody.clearHorizontalScroll()}},drop:function(e,t){var n=t.getItem(),r=e.column;if(r.key!==n.key&&n.column.frozen===r.frozen){var o={key:r.key};e.onMove(n,o),window.sfMetadataBody.clearHorizontalScroll()}}},P=function(e){var t=e.isOver,n=e.isDragging,r=e.canDrop,a=e.connectDragSource,u=e.connectDragPreview,c=e.connectDropTarget,d=e.frozen,f=e.groupOffsetLeft,p=e.isLastFrozenCell,v=e.height,g=e.isHideTriangle,C=e.column,E=e.style,_=e.view,A=e.renameColumn,b=e.deleteColumn,w=e.modifyColumnData,R=e.modifyLocalColumnWidth,T=e.modifyColumnWidth,x=(0,o.useRef)(null),M=(0,o.useMemo)((function(){return!g&&window.sfMetadataContext.canModify()}),[g]),D=(0,o.useMemo)((function(){var e=C.left,t=C.width,n=Object.assign({width:t,maxWidth:t,minWidth:t,height:v},E);return d||(n.left=e+f),n}),[d,f,C,v,E]),I=(0,o.useCallback)((function(e){var t=e.pageX||e.touches&&e.touches[0]&&e.touches[0].pageX||e.changedTouches&&e.changedTouches[e.changedTouches.length-1].pageX;return 0===e.pageX&&(t=0),t-x.current.getBoundingClientRect().left}),[]),N=(0,o.useCallback)((function(e){var t=I(e);t>0&&R(C,t)}),[C,I,R]),k=(0,o.useCallback)((function(e){var t=I(e);t>0&&T(C,Math.max(t,50))}),[C,I,T]),P=(0,o.useCallback)((function(e){window.sfMetadataContext.eventBus.dispatch(m.Tw.SELECT_COLUMN,e)}),[]),F=(0,o.useCallback)((function(e){e.preventDefault(),e.stopPropagation()}),[]),j=C.key,Y=C.name,U=C.type,B=h.gmg[U],H=window.sfMetadataContext.canModifyColumnOrder(),G=(0,l.jsxs)("div",{className:y()("sf-metadata-result-table-cell column",{"table-last--frozen":p}),ref:x,style:D,id:"sf-metadata-column-".concat(j),onClick:function(){return P(C,d)},onContextMenu:F,children:[(0,l.jsxs)("div",{className:"sf-metadata-result-column-content sf-metadata-record-header-cell-left d-flex align-items-center text-truncate",children:[(0,l.jsx)("span",{className:"mr-2",id:"header-icon-".concat(j),children:(0,l.jsx)(s.In,{iconName:h.ZPL[U],className:"sf-metadata-column-icon"})}),(0,l.jsx)(S.A,{placement:"bottom",target:"header-icon-".concat(j),fade:!1,trigger:"hover",className:"sf-metadata-tooltip",children:(0,i.AP)(B)}),(0,l.jsx)("div",{className:"header-name d-flex",children:(0,l.jsx)("span",{title:Y,className:y()("header-name-text",{double:56===v}),children:Y})})]}),M&&(0,l.jsx)(L,{column:C,view:_,renameColumn:A,deleteColumn:b,modifyColumnData:w}),(0,l.jsx)(O,{onDrag:N,onDragEnd:k})]});return H?(0,l.jsx)("div",{className:"sf-metadata-record-header-cell",children:c(u(a((0,l.jsx)("div",{style:{opacity:n?.2:1},className:y()("rdg-can-drop",{"rdg-dropping":t&&r}),children:G}))))},j):(0,l.jsx)("div",{className:"sf-metadata-record-header-cell",children:G},j)};P.defaultProps={style:null};var F=(0,b.Tl)("sfMetadataRecordHeaderCell",k,(function(e,t){return{connectDropTarget:e.dropTarget(),isOver:t.isOver(),canDrop:t.canDrop(),dragged:t.getItem()}}))((0,b.I4)("sfMetadataRecordHeaderCell",{beginDrag:function(e){return{key:e.column.key,column:e.column}},endDrag:function(e,t){var n=t.getItem();if(!t.didDrop())return{source:n,target:{}}},isDragging:function(e){var t=e.column;return e.dragged.key===t.key}},(function(e,t){return{connectDragSource:e.dragSource(),connectDragPreview:e.dragPreview(),isDragging:t.isDragging()}}))(P)),j=n(40326),Y=function(e){function t(e){var n;return(0,C.A)(this,t),(n=(0,_.A)(this,t,[e])).onToggleSelectAll=function(e){var t=n.props,r=t.isMobile,o=t.hasSelectedRecord,a=n.state.isSelectedAll;if(r&&e.preventDefault(),o||a)return n.setState({isSelectedAll:!1}),void n.props.selectNoneRecords();n.setState({isSelectedAll:!0}),n.props.selectAllRecords()},n.state={isSelectedAll:e.isSelectedAll},n}return(0,A.A)(t,e),(0,E.A)(t,[{key:"componentDidUpdate",value:function(e){var t=this.props.isSelectedAll;t!==e.isSelectedAll&&this.setState({isSelectedAll:t})}},{key:"render",value:function(){var e=this.props,t=e.isMobile,n=e.hasSelectedRecord,r=this.state.isSelectedAll,o=n&&!r;return(0,l.jsxs)("div",{className:"select-all-checkbox-container",onClick:this.onToggleSelectAll,children:[t?(0,l.jsx)("label",{className:"mobile-select-all-container",children:o?(0,l.jsx)(s.In,{iconName:"partially-selected"}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("input",{className:"mobile-select-all-checkbox",name:"mobile-select-all-checkbox",type:"checkbox",checked:r,readOnly:!0}),(0,l.jsx)("div",{className:"select-all-checkbox-show"})]})}):(0,l.jsx)(l.Fragment,{children:o?(0,l.jsx)(s.In,{iconName:"partially-selected"}):(0,l.jsx)("input",{id:"select-all-checkbox",className:"select-all-checkbox",type:"checkbox",name:(0,j.AP)("Select all"),title:(0,j.AP)("Select all"),"aria-label":(0,j.AP)("Select all"),checked:r,readOnly:!0})}),(0,l.jsx)("label",{htmlFor:"select-all-checkbox",name:(0,j.AP)("Select all"),title:(0,j.AP)("Select all"),"aria-label":(0,j.AP)("Select all")})]})}}])}(o.Component),U=Y,B=function(e){function t(){return(0,C.A)(this,t),(0,_.A)(this,t,arguments)}return(0,A.A)(t,e),(0,E.A)(t,[{key:"render",value:function(){var e=this.props,t=e.isMobile,n=e.hasSelectedRecord,o=e.isSelectedAll,a=e.isLastFrozenCell,i=e.groupOffsetLeft,s={height:e.height,width:m.sN+i,minWidth:m.sN+i};return(0,l.jsx)("div",{className:y()("sf-metadata-result-table-cell column",{"table-last--frozen":a}),style:(0,r.A)((0,r.A)({},s),{},{backgroundColor:"#f9f9f9"}),children:(0,l.jsx)(U,{isMobile:t,hasSelectedRecord:n,isSelectedAll:o,selectNoneRecords:this.props.selectNoneRecords,selectAllRecords:this.props.selectAllRecords})})}}])}(o.Component),H=B,G=function(e){return e.filter((function(e){return e.frozen}))},V=n(31425),Z=n(46971),z=function(e){var t=e.lastColumn,n=e.height,r=e.groupOffsetLeft,i=(0,o.useMemo)((function(){return"sf-metadata-add-column"}),[]),u=(0,o.useRef)(null),c=(0,o.useMemo)((function(){return{height:n,width:44,minWidth:44,maxWidth:44,left:t.left+t.width+r,position:"absolute"}}),[t,n,r]),d=(0,a.p)().store,f=(0,o.useCallback)((function(){var e;null===u||void 0===u||null===(e=u.current)||void 0===e||e.click()}),[u]),p=(0,o.useCallback)((function(e,t,n){var r=n.key,o=n.data;d.insertColumn(e,t,{key:r,data:o})}),[d]),m=(0,o.useCallback)((function(e){h.sR0.isEnter(e)&&document.activeElement&&document.activeElement.id===i&&f()}),[i,f]);return(0,o.useEffect)((function(){return document.addEventListener("keydown",m),function(){document.removeEventListener("keydown",m)}}),[]),(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{className:"sf-metadata-record-header-cell",children:(0,l.jsx)("div",{className:"sf-metadata-result-table-cell column insert-column",style:c,id:i,ref:u,children:(0,l.jsx)(s.In,{iconName:"add-table"})})}),(0,l.jsx)(Z.A,{target:i,onChange:p})]})},X=n(72784),W=["isGroupView","containerWidth","hasSelectedRecord","isSelectedAll","lastFrozenColumnKey","groupOffsetLeft","table","columnMetrics","onRef","colOverScanStartIdx","colOverScanEndIdx","selectNoneRecords","selectAllRecords","modifyColumnWidth","modifyColumnOrder"],K=(0,b.Tl)("sfMetadataRecordHeaderCell",{},(function(e){return{connectDropTarget:e.dropTarget()}}))((function(e){var t=e.isGroupView,n=e.containerWidth,a=e.hasSelectedRecord,s=e.isSelectedAll,u=e.lastFrozenColumnKey,c=e.groupOffsetLeft,d=e.table,p=e.columnMetrics,g=e.onRef,y=e.colOverScanStartIdx,C=e.colOverScanEndIdx,E=e.selectNoneRecords,_=e.selectAllRecords,A=e.modifyColumnWidth,b=e.modifyColumnOrder,S=(0,v.A)(e,W),w=(0,o.useState)(null),O=(0,f.A)(w,2),R=O[0],T=O[1],x=(0,o.useMemo)((function(){return d.header_settings||{}}),[d]),M=(0,o.useMemo)((function(){return x&&x.is_hide_triangle}),[x]),D=(0,o.useMemo)((function(){return((0,h.RIy)(x)?h.JlJ.DEFAULT:x.header_height)===h.JlJ.DOUBLE?m.L9:m.jN}),[x]),I=(0,o.useMemo)((function(){return{width:n,minWidth:"100%",zIndex:h.Mue.HK,height:D}}),[n,D]),N=(0,o.useMemo)((function(){return R||p}),[R,p]),L=(0,o.useMemo)((function(){var e=N.columns,n={position:i.Fr?"absolute":"fixed",marginLeft:"0px",height:D,zIndex:h.Mue.NT};return(t&&!(0,V.Zz)(e[0])||i.Fr)&&(n.position="absolute"),n}),[t,N,D]),k=(0,o.useCallback)((function(e,t){T((0,V.s9)(p,e.key,Math.max(t,50)))}),[p]),P=(0,o.useCallback)((function(e,t){T(null),A&&A(e,t)}),[A]),j=(0,o.useCallback)((function(e,t){b&&b(e.key,t.key)}),[b]),Y=G(N.columns),U=N.columns.slice(y,C),B=Y.reduce((function(e,t){return e+t.width}),c+m.sN);return(0,l.jsx)("div",{className:"static-sf-metadata-result-content grid-header",style:{height:D+1},children:(0,l.jsxs)("div",{className:"sf-metadata-result-table-row",style:I,children:[(0,l.jsxs)("div",{className:"frozen-columns d-flex",style:L,ref:function(e){return g(e)},children:[(0,l.jsx)(H,{isMobile:i.Fr,height:D,hasSelectedRecord:a,isSelectedAll:s,isLastFrozenCell:!u,groupOffsetLeft:c,selectNoneRecords:E,selectAllRecords:_}),Y.map((function(e){var t=e.key,n=t===u;return(0,l.jsx)(F,(0,r.A)({frozen:!0,height:D,column:e,style:{backgroundColor:"#f9f9f9"},isLastFrozenCell:n,frozenColumnsWidth:B,isHideTriangle:M,view:d.view,modifyLocalColumnWidth:k,modifyColumnWidth:P,onMove:j},S),t)}))]}),U.map((function(e){return(0,l.jsx)(F,(0,r.A)({isHideTriangle:M,groupOffsetLeft:c,height:D,column:e,view:d.view,frozenColumnsWidth:B,modifyLocalColumnWidth:k,modifyColumnWidth:P,onMove:j},S),e.key)})),(0,l.jsx)(z,{lastColumn:N.columns[N.columns.length-1],groupOffsetLeft:c,height:D})]})})})),$=(0,X.A)(K),q=function(e){function t(){var e;(0,C.A)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=(0,_.A)(this,t,[].concat(r))).isSelfScroll=!0,e.setScrollTop=function(t){e.isSelfScroll=!1,e.rightScrollContainer.scrollTop=t},e.onScroll=function(t){if(t.stopPropagation(),e.isSelfScroll){var n=t.target.scrollTop;e.props.onScrollbarScroll(n)}else e.isSelfScroll=!0},e.onMouseUp=function(t){e.props.onScrollbarMouseUp&&e.props.onScrollbarMouseUp(t)},e.getScrollbarStyle=function(){var e=window.sfMetadataBody;return e&&e.resultRef?{height:e.resultRef.scrollHeight}:{}},e.getContainerStyle=function(){var e={},t=window.sfMetadataBody;return t&&t.resultContentRef&&(e.height=t.resultContentRef.clientHeight,e.zIndex=h.Mue.gA),e.top=33,e.right=0,e},e.setScrollbarRef=function(t){e.scrollbar=t},e.setContainerRef=function(t){e.rightScrollContainer=t},e}return(0,A.A)(t,e),(0,E.A)(t,[{key:"render",value:function(){var e=this.getContainerStyle(),t=this.getScrollbarStyle();return(0,l.jsx)("div",{className:"right-scrollbar-container",style:e,ref:this.setContainerRef,onScroll:this.onScroll,onMouseUp:this.onMouseUp,children:(0,l.jsx)("div",{ref:this.setScrollbarRef,className:"right-scrollbar-inner",style:t})})}}])}(o.Component),Q=q,J=function(e){function t(){var e;(0,C.A)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=(0,_.A)(this,t,[].concat(r))).isSelfScroll=!0,e.setScrollLeft=function(t){e.isSelfScroll=!1,e.container.scrollLeft=t},e.onScroll=function(t){if(t.stopPropagation(),e.isSelfScroll){var n=t.target.scrollLeft;e.props.onScrollbarScroll(n)}else e.isSelfScroll=!0},e.getScrollbarStyle=function(){return{width:e.props.innerWidth}},e.getContainerStyle=function(){return{zIndex:h.Mue.gA}},e.setScrollbarRef=function(t){e.scrollbar=t},e.setContainerRef=function(t){e.container=t},e}return(0,A.A)(t,e),(0,E.A)(t,[{key:"render",value:function(){if(!this.props.innerWidth)return null;var e=this.getContainerStyle(),t=this.getScrollbarStyle();return(0,l.jsx)("div",{className:"horizontal-scrollbar-container",ref:this.setContainerRef,style:e,onScroll:this.onScroll,onMouseUp:this.props.onScrollbarMouseUp,children:(0,l.jsx)("div",{className:"horizontal-scrollbar-inner",ref:this.setScrollbarRef,style:t})})}}])}(o.Component),ee=J,te=n(51528),ne=function(e,t,n){return e!==t&&(void 0===e||null===e?(n!==h.vZe.GEOLOCATION||!(0,h.RIy)(t))&&((n!==h.vZe.DATE&&n!==h.vZe.NUMBER||null!==t)&&(Array.isArray(t)?0!==t.length:!1!==t&&""!==t)):Array.isArray(e)&&Array.isArray(t)?JSON.stringify(e)!==JSON.stringify(t):"object"===typeof e&&"object"===typeof t&&null!==t?!te.A.isSameObject(e,t):e!==t)},re=function(e){var t=e.isDir,n=e.column,r=e.value,a=(0,o.useCallback)((function(e){e.stopPropagation(),e.nativeEvent.stopImmediatePropagation(),window.sfMetadataContext.eventBus.dispatch(m.Tw.OPEN_EDITOR,m.rr.PREVIEWER)}),[]);return r&&n.type===h.vZe.FILE_NAME?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(s.Oi,{id:"sf-metadata-cell-open-file-btn",className:"sf-metadata-cell-operation-btn",size:20,iconName:"open-file",onClick:a}),(0,l.jsx)(S.A,{hideArrow:!0,target:"sf-metadata-cell-open-file-btn",placement:"bottom",fade:!1,delay:{show:0,hide:0},modifiers:{preventOverflow:{boundariesElement:document.body}},className:"sf-metadata-tooltip",children:t?(0,i.AP)("Open folder"):(0,i.AP)("Open file")})]}):null},oe=n(44),ae=n(65604),ie=["readonly","value","field"],le=function(e){var t=e.readonly,n=e.value,a=e.field,i=(0,v.A)(e,ie),u=(0,oe.D1)(),c=u.collaborators,d=u.collaboratorsCache,f=u.updateCollaboratorsCache,p=u.queryUser,m=(0,o.useMemo)((function(){return{collaborators:c,collaboratorsCache:d,updateCollaboratorsCache:f,readonly:t,value:n,field:a,queryUserAPI:p,getFileIconUrl:ae.Aq.getFileIconUrl,getFolderIconUrl:ae.Aq.getFolderIconUrl}}),[t,n,a,c,d,f,p]);return(0,l.jsx)(s.ZA,(0,r.A)((0,r.A)({},m),i))},se=function(e){var t=e.isCellSelected,n=e.field,r=e.value,a=e.onChange,i=(0,o.useState)(!1),c=(0,f.A)(i,2),d=c[0],p=c[1];(0,o.useEffect)((function(){t||p(!1)}),[t]);var m=(0,o.useCallback)((function(e){e&&e.stopPropagation(),a((0,u.default)({},n.key,!r))}),[r,n,a]),h=(0,o.useCallback)((function(){d?m():p(!0)}),[d,m]);return(0,l.jsx)("div",{className:"sf-metadata-checkbox-editor",onClick:h,children:(0,l.jsx)("div",{className:"sf-metadata-checkbox-editor-content",onClick:m,children:r&&(0,l.jsx)(s.In,{iconName:"check-mark"})})})},ue=n(82622),ce=function(e){var t=e.isCellSelected,n=e.field,r=e.value,a=e.onChange,i=(0,o.useState)(r||0),s=(0,f.A)(i,2),c=s[0],d=s[1],p=(0,o.useState)(-1),m=(0,f.A)(p,2),h=m[0],v=m[1];(0,o.useEffect)((function(){d(r||0)}),[r]);var g=(0,o.useCallback)((function(e){v(e)}),[]),y=(0,o.useCallback)((function(){v(-1)}),[]),C=(0,o.useCallback)((function(e){var t=c===e?0:e;d(t),a((0,u.default)({},n.key,t))}),[c,n,a]),E=(0,o.useCallback)((function(){var e=(n.data||{}).max,r=void 0===e?5:e,o=[];if(c||t)for(var a=0;a<r;a++){var i=(0,l.jsx)(ue.A,{index:a+1,enterIndex:h,value:c,field:n,isShowRateItem:t,onMouseEnter:g,onMouseLeave:y,onChange:C},a);o.push(i)}return o}),[n,c,t,h,C,g,y]);return(0,l.jsx)("div",{className:"sf-metadata-rate-editor d-flex",children:E()})},de=function(e){var t=e.isCellSelected,n=e.isDir,r=e.field,o=e.value,a=e.onChange,i=e.record,s=r.type,u=(0,V.dK)(r,i,!0);return s===h.vZe.CHECKBOX&&u?(0,l.jsx)(se,{isCellSelected:t,value:o,field:r,onChange:a}):s===h.vZe.RATE&&u?(0,l.jsx)(ce,{isCellSelected:t,value:o,field:r,onChange:a}):(0,l.jsx)(le,{readonly:!0,value:o,field:r,isDir:n})},fe=o.memo((function(e){var t=e.needBindEvents,n=e.column,a=e.record,i=e.groupRecordIndex,s=e.recordIndex,c=e.cellMetaData,d=e.highlightClassName,f=e.isLastCell,p=e.isLastFrozenCell,v=e.isCellSelected,g=e.bgColor,C=e.frozen,E=e.height,_=(0,o.useMemo)((function(){var e=n.type,t=window.sfMetadataContext.canModifyColumn(n);return y()("sf-metadata-result-table-cell","sf-metadata-result-table-".concat(e,"-cell"),d,{"table-cell-uneditable":!t||!m.W6[e],"last-cell":f,"table-last--frozen":p,"cell-selected":v})}),[n,d,f,p,v]),A=(0,o.useMemo)((function(){var e=a[h.L2D.IS_DIR];return"string"===typeof e?"TRUE"===e.toUpperCase():e}),[a]),b=(0,o.useMemo)((function(){var e=n.left,t={width:n.width,height:E};return C||(t.left=e),g&&(t.backgroundColor=g),t}),[C,E,n,g]),S=(0,o.useCallback)((function(e){var t={idx:n.idx,groupRecordIndex:i,rowIdx:s};(0,h.Tnt)(c.onCellClick)&&c.onCellClick(t,e)}),[n,i,s,c]),w=(0,o.useCallback)((function(e){if((0,h.Tnt)(c.onCellDoubleClick)){var t={idx:n.idx,groupRecordIndex:i,rowIdx:s};c.onCellDoubleClick(t,e)}}),[n,i,s,c]),O=(0,o.useCallback)((function(e){if(2!==e.button&&(0,h.Tnt)(c.onCellMouseDown)){var t={idx:n.idx,groupRecordIndex:i,rowIdx:s};c.onCellMouseDown(t,e)}}),[n,i,s,c]),R=(0,o.useCallback)((function(e){if((0,h.Tnt)(c.onCellMouseEnter)){var t={idx:n.idx,groupRecordIndex:i,rowIdx:s},o={x:e.clientX,y:e.clientY};c.onCellMouseEnter((0,r.A)((0,r.A)({},t),{},{mousePosition:o}),e)}}),[n,i,s,c]),T=(0,o.useCallback)((function(e){if((0,h.Tnt)(c.onCellMouseMove)){var t={idx:n.idx,groupRecordIndex:i,rowIdx:s},o={x:e.clientX,y:e.clientY};c.onCellMouseMove((0,r.A)((0,r.A)({},t),{},{mousePosition:o}),e)}}),[n,i,s,c]),x=(0,o.useCallback)((function(){}),[]),M=(0,o.useCallback)((function(e){e.stopPropagation(),e.preventDefault()}),[]),D=(0,o.useCallback)((function(e){e.preventDefault();var t={idx:n.idx,groupRecordIndex:i,rowIdx:s};(0,h.Tnt)(c.onCellContextMenu)&&c.onCellContextMenu(t)}),[c,n,i,s]),I=(0,o.useCallback)((function(){return{onClick:S,onDoubleClick:w,onMouseDown:O,onMouseEnter:R,onMouseMove:T,onMouseLeave:x,onDragOver:M,onContextMenu:D}}),[S,w,O,R,T,x,M,D]),N=(0,o.useCallback)((function(e){var t=n.key,r=n.name;return{oldRowData:h.Ajs.includes(t)?(0,u.default)({},t,e):(0,u.default)({},r,e),originalOldRowData:(0,u.default)({},t,e)}}),[n]),L=(0,o.useCallback)((function(e){if((0,h.Tnt)(c.modifyRecord)){var t=n.key,r=n.type,o=n.name,i=(0,h.Teq)(a,n);if(ne(i,e[t],r)){var l=a._id,s=Object.keys(e)[0],d=h.Ajs.includes(t)?e:(0,u.default)({},o,e[s]),f=N(i),p=f.oldRowData,m=f.originalOldRowData;c.modifyRecord({rowId:l,cellKey:t,updates:d,originalUpdates:e,oldRowData:p,originalOldRowData:m})}}}),[c,a,n,N]),k=(0,h.Teq)(a,n),P=t&&I(),F=(0,r.A)({className:_,style:b},P);return(0,l.jsxs)("div",(0,r.A)((0,r.A)({},F),{},{children:[(0,l.jsx)(de,{isCellSelected:v,isDir:A,value:k,field:n,onChange:L,record:a}),v&&(0,l.jsx)(re,{value:k,column:n,isDir:A})]}),"".concat(a._id,"-").concat(n.key))}),(function(e,t){var n=e.record,r=e.column,o=e.isCellSelected,a=e.isLastCell,i=e.highlightClassName,l=e.height,s=e.bgColor,u=t.record,c=t.highlightClassName,d=t.height,f=t.column,p=t.bgColor,m=n[r.name]||n[r.key],h=u[r.name]||u[r.key];return!(ne(m,h,r.type)||n._last_modifier!==u._last_modifier||o!==t.isCellSelected||a!==t.isLastCell||i!==c||l!==d||r.left!==f.left||r.width!==f.width||s!==p||!te.A.isSameObject(r.data,f.data)||e.groupRecordIndex!==t.groupRecordIndex||e.recordIndex!==t.recordIndex)}));fe.defaultProps={needBindEvents:!0};var pe=fe,me=n(81718),he=function(e){function t(e){var n;return(0,C.A)(this,t),(n=(0,_.A)(this,t,[e])).onCellMouseEnter=function(){n.props.isLocked&&!i.Fr&&(n.timer=setTimeout((function(){n.setState({isLockedRowTooltipShow:!0})}),500))},n.onCellMouseLeave=function(){n.props.isLocked&&!i.Fr&&(n.timer&&(clearTimeout(n.timer),n.timer=null),n.setState({isLockedRowTooltipShow:!1}))},n.getLockedRowTooltip=function(){var e=n.props.recordId;return(0,l.jsx)(me.A,{target:"action-cell-".concat(e),placement:"bottom",isOpen:n.state.isLockedRowTooltipShow,fade:!1,hideArrow:!0,className:"readonly-cell-tooltip",children:(0,i.AP)("The row is locked and cannot be modified")})},n.state={isLockedRowTooltipShow:!1},n}return(0,A.A)(t,e),(0,E.A)(t,[{key:"render",value:function(){var e=this.props,t=e.isSelected,n=e.isLastFrozenCell,o=e.index,a=e.height,s=e.recordId,u={height:a,width:m.sN,minWidth:m.sN};return(0,l.jsxs)("div",{className:y()("sf-metadata-result-table-cell column actions-cell",{"table-last--frozen":n}),id:"action-cell-".concat(s),style:(0,r.A)({},u),onMouseEnter:this.onCellMouseEnter,onMouseLeave:this.onCellMouseLeave,children:[!t&&(0,l.jsx)("div",{className:"sf-metadata-result-column-content row-index text-truncate",children:o+1}),(0,l.jsx)("div",{className:"sf-metadata-result-column-content actions-checkbox",children:(0,l.jsxs)("div",{className:"select-cell-checkbox-container",onClick:this.props.onSelectRecord,children:[(0,l.jsx)("input",{id:"select-cell-checkbox-".concat(s),className:"select-cell-checkbox",type:"checkbox",name:"row-selection",checked:t||!1,readOnly:!0}),(0,l.jsx)("label",{htmlFor:"select-cell-checkbox-".concat(s),name:(0,i.AP)("Select"),title:(0,i.AP)("Select"),"aria-label":(0,i.AP)("Select")})]})})]})}}])}(o.Component),ve=he,ge=function(e){function t(){var e;(0,C.A)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=(0,_.A)(this,t,[].concat(r))).checkScroll=function(){e.cancelFixFrozenDOMs(e.props.scrollLeft)},e.cancelFixFrozenDOMs=function(t){var n=e.props.isGroupView,r=e.frozenColumns.childElementCount;!e.frozenColumns||r<1||n&&r<2||(e.frozenColumns.style.position="absolute",e.frozenColumns.style.marginLeft=t+"px",e.frozenColumns.style.marginTop="0px")},e.onSelectRecord=function(t){var n=e.props,r=n.groupRecordIndex,o=n.index;e.props.selectNoneCells(),e.props.onSelectRecord({groupRecordIndex:r,recordIndex:o},t)},e.isCellSelected=function(t){var n=e.props,r=n.hasSelectedCell,o=n.selectedPosition;return!!o&&(r&&o.idx===t)},e.reloadCurrentRecord=function(){e.props.reloadRecords([e.props.record._id])},e.getFrozenCells=function(){var t=e.props,n=t.columns,r=t.lastFrozenColumnKey,o=t.groupRecordIndex,a=t.index,i=t.record,s=t.cellMetaData,u=t.isGroupView,c=t.height,d=t.columnColor,f=G(n);if(0===f.length)return null;var p=i._id;return f.map((function(t,f){var m=t.key,h=e.isCellHighlight(m,p),v=e.isCurrentCellHighlight(m,p)?"cell-current-highlight":h?"cell-highlight":null,g=e.isCellSelected(f),y=e.isLastCell(n,m),C=m===r,E=d&&d[m];return(0,l.jsx)(pe,{frozen:!0,record:i,groupRecordIndex:o,recordIndex:a,isCellSelected:g,isLastCell:y,isLastFrozenCell:C,height:u?c:c-1,column:t,cellMetaData:s,modifyRecord:e.props.modifyRecord,lockRecordViaButton:e.props.lockRecordViaButton,modifyRecordViaButton:e.props.modifyRecordViaButton,reloadCurrentRecord:e.reloadCurrentRecord,highlightClassName:v,bgColor:E},t.key)}))},e.isCellHighlight=function(t,n){var r=e.props.searchResult;if(r){var o=r.matchedRows[n];if(o&&o.includes(t))return!0}return!1},e.isCurrentCellHighlight=function(t,n){var r=e.props.searchResult;if(r){var o=r.currentSelectIndex;if("number"!==typeof o)return!1;var a=r.matchedCells[o];if(!a)return!1;if(a.row===n&&a.column===t)return!0}return!1},e.getColumnCells=function(){var t=e.props,n=t.columns,r=t.colOverScanStartIdx,o=t.colOverScanEndIdx,a=t.groupRecordIndex,i=t.index,s=t.record,u=t.cellMetaData,c=t.isGroupView,d=t.height,f=t.columnColor,p=s._id;return n.slice(r,o).map((function(t){var r=t.key,o=!t.frozen,m=e.isCellSelected(n.findIndex((function(e){return e.key===t.key}))),h=e.isCellHighlight(r,p),v=e.isCurrentCellHighlight(r,p)?"cell-current-highlight":h?"cell-highlight":null,g=e.isLastCell(n,r),y=f&&f[r];return(0,l.jsx)(pe,{record:s,groupRecordIndex:a,recordIndex:i,isCellSelected:m,isLastCell:g,height:c?d:d-1,column:t,needBindEvents:o,cellMetaData:u,modifyRecord:e.props.modifyRecord,lockRecordViaButton:e.props.lockRecordViaButton,modifyRecordViaButton:e.props.modifyRecordViaButton,reloadCurrentRecord:e.reloadCurrentRecord,highlightClassName:v,bgColor:y},t.key)}))},e.getRecordStyle=function(){var t=e.props,n=t.isGroupView,r=t.height,o=t.isLastRecord,a={height:o?r-1:r};if(n){var i=e.props,l=i.top,s=i.left;a.top=l,a.left=s,o&&(a.height=r+1)}return a},e.getFrozenColumnsStyle=function(){var t=e.props,n=t.isGroupView,r=t.lastFrozenColumnKey,o=t.height,a={zIndex:h.Mue.NT,height:o-1};return n&&(a.height=o,a.zIndex=h.Mue.WA,r||(a.marginLeft="0px")),a},e.handleDragEnter=function(t){t.preventDefault();var n=e.props,r=n.index,o=n.groupRecordIndex;(0,n.cellMetaData.onDragEnter)({overRecordIdx:r,overGroupRecordIndex:o})},e.handleDragOver=function(e){e.preventDefault(),e.dataTransfer.dropEffect="copy"},e.handleDrop=function(e){e.preventDefault()},e}return(0,A.A)(t,e),(0,E.A)(t,[{key:"componentDidMount",value:function(){this.checkScroll()}},{key:"shouldComponentUpdate",value:function(e){return e.isGroupView!==this.props.isGroupView||e.hasSelectedCell!==this.props.hasSelectedCell||e.hasSelectedCell&&this.props.selectedPosition.idx!==e.selectedPosition.idx||e.isSelected!==this.props.isSelected||e.groupRecordIndex!==this.props.groupRecordIndex||e.index!==this.props.index||e.isLastRecord!==this.props.isLastRecord||e.lastFrozenColumnKey!==this.props.lastFrozenColumnKey||e.columns!==this.props.columns||e.colOverScanStartIdx!==this.props.colOverScanStartIdx||e.colOverScanEndIdx!==this.props.colOverScanEndIdx||e.record!==this.props.record||e.top!==this.props.top||e.left!==this.props.left||e.height!==this.props.height||e.searchResult!==this.props.searchResult||e.columnColor!==this.props.columnColor}},{key:"isLastCell",value:function(e,t){return e[e.length-1].key===t}},{key:"render",value:function(){var e=this,t=this.props,n=t.isSelected,r=t.isGroupView,o=t.index,a=t.isLastRecord,i=t.lastFrozenColumnKey,s=t.height,u=t.record,c=!!u._locked,d=r?s:s-1,f=this.getFrozenCells(),p=this.getColumnCells();return(0,l.jsxs)("div",{className:y()("sf-metadata-result-table-row",{"sf-metadata-last-table-row":a,"row-selected":n,"row-locked":c}),style:this.getRecordStyle(),onDragEnter:this.handleDragEnter,onDragOver:this.handleDragOver,onDrop:this.handleDrop,children:[(0,l.jsxs)("div",{className:"frozen-columns d-flex",style:this.getFrozenColumnsStyle(),ref:function(t){return e.frozenColumns=t},children:[(0,l.jsx)(ve,{isLocked:c,isSelected:n,recordId:u._id,index:o,onSelectRecord:this.onSelectRecord,isLastFrozenCell:!i,height:d}),f]}),p]})}}])}(o.Component),ye=ge,Ce=n(55097),Ee=n.n(Ce),_e=n(60436),Ae=function(e,t,n,r,o,a){var i={};t.forEach((function(e){var t=e.column_key,n=(0,h.rm3)(r,t);i[t]=n}));var l=t.length,s=be(e,i,n,a,o,l,{parentGroupPath:[],currentLevel:l,isParentGroupVisible:!0}),u=Se(s,l),c=u.computedGroupRows,d=u.groupRowsHeight;return{groupRows:c,idGroupRowMap:u.idGroupRowMap,groupRowsHeight:d,maxLevel:l}},be=function(e,t,n,r,o,a,i){var l=i.parentGroupPath,s=i.parentGroupKey,u=i.currentLevel,c=i.isParentGroupVisible,d=[];return e.forEach((function(e,i){var f=[];l.length>0&&f.push.apply(f,(0,_e.A)(l)),f.push(i);var p=e.cell_value,h=e.subgroups,v=e.row_ids,g=e.column_key,y=e.summaries,C=e.original_cell_value,E=f.join("-"),_=we(E,n),A=(a-u+1)*m.ax,b="".concat(s||g,"_").concat(p),S={type:m.Gi.GROUP_CONTAINER,level:u,left:A,key:b,cell_value:p,column_key:g,isExpanded:_,summaries:y,groupPath:f,groupPathString:E,column:t[g],visible:c,original_cell_value:C};if(Array.isArray(h)&&h.length>0){var w,O=be(h,t,n,r,o,a,{parentGroupPath:f,parentGroupKey:b,currentLevel:u-1,isParentGroupVisible:c&&_}),R=0,T=0;O.forEach((function(e){e.type===m.Gi.GROUP_CONTAINER&&e.level+1===u&&(R+=e.count||0,T+=(e.height||0)+m.ax,w||(w=e.first_row_id))})),S.first_row_id=w,S.count=R,S.height=(_?T:0)+m.q$,d.push(S),d.push.apply(d,(0,_e.A)(O))}else if(Array.isArray(v)&&v.length>0){var x=v.length,M=x-1,D=c&&_,I=D?x*o+1:0,N=D&&r?m.J3:0,L=v.map((function(e,t){return{type:m.Gi.ROW,key:"row-".concat(e),rowIdx:t,isLastRow:t===M,visible:D,height:t===M?o+1:o,level:u,rowsLength:x,left:A,rowId:e,groupPath:f,groupPathString:E}}));S.first_row_id=L[0].rowId,S.count=x,S.height=I+N+m.q$,d.push(S),d.push.apply(d,(0,_e.A)(L))}})),d},Se=function(e,t){var n,o=m.ax,a=m.ax,i={};return{computedGroupRows:e.map((function(l,s){var u=l.type,c=l.level,d=l.height,f=l.visible,p=(0,r.A)((0,r.A)({},l),{},{top:a,groupRecordIndex:s});if(u===m.Gi.GROUP_CONTAINER)f&&(c===t&&(o+=d+m.ax),a+=m.q$,n=c);else if(u===m.Gi.ROW){var h=l.rowId;i[h]=p,f&&(a+=d)}else u===m.Gi.BTN_INSERT_ROW&&f&&(a+=d);var v=e[s+1];if(v&&v.visible&&v.type===m.Gi.GROUP_CONTAINER){var g=v.groupPath,y=v.level;g[g.length-1]>0&&(a+=m.ax),y>n&&(a+=(y-n)*m.ax)}return p})),groupRowsHeight:o,idGroupRowMap:i}},we=function(e,t){return!t||!t[e]},Oe=function(e,t){var n=e.groupPath,r=e.groupPathString,o=e.level,a=e.type,i=t.groupPath,l=t.groupPathString,s=t.level;return r===l&&a!==m.Gi.GROUP_CONTAINER||o<s&&n[0]===i[0]},Re=function(e,t){return(t.groupRows||[])[e]||{}},Te="upwards",xe="downwards",Me=function(e){var t=e.selectedPosition,n=e.isGroupView;return(0,e.recordGetterByIndex)({isGroupView:n,groupRecordIndex:t.groupRecordIndex,recordIndex:t.rowIdx})},De=function(e){var t=e.selectedPosition,n=e.columns,r=t.idx;return(0,V.wV)(r,n)},Ie=function(e){var t=e.selectedPosition,n=e.columns,r=e.isGroupView,o=e.recordGetterByIndex,a=De({selectedPosition:t,columns:n}),i=Me({selectedPosition:t,isGroupView:r,recordGetterByIndex:o});return(0,h.Teq)(i,a)},Ne=function(e,t,n,r){var o=e.idx,a=e.groupRecordIndex,i=e.rowIdx,l=t[o];return!!l&&(!!m.$p.includes(l.type)||!!r({isGroupView:n,groupRecordIndex:a,recordIndex:i}))};var Le=function(e){for(var t=e.selectedRange,n=e.isGroupView,r=e.recordGetterByIndex,o=t.topLeft,a=t.bottomRight,i=o.rowIdx,l=o.groupRecordIndex,s=[],u=i,c=a.rowIdx+1;u<c;u++){var d=r({isGroupView:n,groupRecordIndex:l,recordIndex:u});n&&l++,d&&s.push(d)}return s};function ke(e){return e>47&&e<58||32===e||13===e||e>64&&e<91||e>95&&e<112||e>185&&e<193||e>218&&e<223}function Pe(e){return(!0===e.ctrlKey||!0===e.metaKey)&&"Control"!==e.key}function Fe(e){return e&&e.shiftKey}var je=n(17119),Ye=["width","height","top","left","zIndex","children","innerRef"],Ue=function(e){function t(){var e;(0,C.A)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=(0,_.A)(this,t,[].concat(r))).getMaskStyle=function(){var t=e.props,n=t.width,r=t.height,o=t.top,a=t.left;return{height:r-1,width:n,zIndex:t.zIndex,position:"absolute",pointerEvents:"none",transform:"translate(".concat(a,"px, ").concat(o,"px)"),outline:0}},e}return(0,A.A)(t,e),(0,E.A)(t,[{key:"componentDidUpdate",value:function(){var e=je.findDOMNode(this);"fixed"===e.style.position&&(e.style.transform="none")}},{key:"render",value:function(){var e=this.props,t=(e.width,e.height,e.top,e.left,e.zIndex,e.children),n=e.innerRef,o=(0,v.A)(e,Ye),a=this.getMaskStyle();return(0,l.jsx)("div",(0,r.A)((0,r.A)({style:a,"data-test":"cell-mask",ref:n},o),{},{children:t}))}}])}(o.PureComponent),Be=Ue;var He=function(e){var t=e.selectedRange,n=e.innerRef,o=e.getSelectedRangeDimensions,a=e.children,i=o(t);return(0,l.jsx)(Be,(0,r.A)((0,r.A)({},i),{},{className:"rdg-selected-range",innerRef:n,children:a}))};var Ge=function(e){var t=e.innerRef,n=e.selectedPosition,o=e.getSelectedDimensions,a=e.children,i=o(n);return(0,l.jsx)(Be,(0,r.A)((0,r.A)({className:"rdg-selected",tabIndex:"0",innerRef:t},i),{},{children:a}))},Ve=n(4159),Ze=n.n(Ve),ze=function(e,t){var n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).collaborators,r=void 0===n?[]:n,o=(0,h.Teq)(e,t),a=t.type;return a===h.vZe.CTIME||a===h.vZe.MTIME?function(e){if(!e)return null;var t=Ze()(e);return t.isValid()?t.format("YYYY-MM-DD HH:mm:ss"):e}(o):(0,h.$i0)(e,t,{collaborators:r})},Xe=function(e,t){var n={};return e.forEach((function(e){n[e.key]=e})),We(t,n)};function We(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if(!e||!t)return{};var r={};return Object.keys(e).forEach((function(o){var a=t[o];if(a){var i=a.type,l=(0,V.KO)(a);if(!n||!n.includes(i)){var s=e[o];if(r[l]=s,i===h.vZe.TEXT)r[l]="string"===typeof s?s.trim():""}}})),r}function Ke(e,t){$e(e,t)||(t.idSelectedRecordMap[e]=!0)}function $e(e,t){return t.idSelectedRecordMap[e]}function qe(e){return Object.keys(e.idSelectedRecordMap)}var Qe={selectRecord:Ke,selectRecordsById:function(e,t){e.forEach((function(e){Ke(e,t)}))},deselectRecord:function(e,t){$e(e,t)&&delete t.idSelectedRecordMap[e]},deselectAllRecords:function(e){e.idSelectedRecordMap={}},isRecordSelected:$e,getSelectedIds:qe,hasSelectedRecords:function(e){return qe(e).length>0},isSelectedAll:function(e,t){return 0!==qe(t).length&&e.every((function(e){return $e(e,t)}))}};var Je=m.aG.TEXT,et=m.aG.FRAGMENT;function tt(e,t){var n=window.sfMetadata.getCollaborators(),r=e.length-1,o=t.length-1,a="";return e.forEach((function(e,i){t.forEach((function(t,r){a+=e&&ze(e,t,{collaborators:n})||"",r<o&&(a+="\t")})),i<r&&(a+="\n")})),a}function nt(e,t){var n,r,o,a;try{if(n=function(){var e=document.getSelection();if(!e.rangeCount)return function(){};for(var t=document.activeElement,n=[],r=0;r<e.rangeCount;r++)n.push(e.getRangeAt(r));switch(t.tagName.toUpperCase()){case"INPUT":case"TEXTAREA":t.blur();break;default:t=null}return e.removeAllRanges(),function(){"Caret"===e.type&&e.removeAllRanges(),e.rangeCount||n.forEach((function(t){e.addRange(t)})),t&&t.focus()}}(),r=document.createRange(),o=document.getSelection(),(a=document.createElement("span")).textContent=e,a.addEventListener("copy",(function(n){n.stopPropagation(),n.preventDefault();var r=n.dataTransfer||n.clipboardData;r.clearData(),r.setData(Je,e),r.setData(et,t)})),document.body.appendChild(a),r.selectNodeContents(a),o.addRange(r),!document.execCommand("copy"))return!1}catch(i){return!1}finally{a&&document.body.removeChild(a),n()}}var rt=function(e){var t=e.type,n=e.selectedRecordIds,r=e.copiedRange,o=e.copiedColumns,a=e.copiedRecords,i=e.copiedTableId,l=e.tableData,s=e.copiedText,u=e.recordGetterById,c=e.isGroupView,d=e.recordGetterByIndex,f=e.event,p=void 0===f?{}:f,h=p.dataTransfer||p.clipboardData;if(t===m.aG.DTABLE_FRAGMENT){var v=Array.isArray(n)&&n.length>0?function(e,t,n){var r=e.map((function(e){return n(e)}));return tt(r,t.columns)}(n,l,u):function(e,t,n,r){for(var o=e.topLeft,a=e.bottomRight,i=o.rowIdx,l=o.idx,s=o.groupRecordIndex,u=a.rowIdx,c=a.idx,d=t.columns,f=s,p=[],m=[],h=i;h<=u;h++)p.push(r({isGroupView:n,groupRecordIndex:f,recordIndex:h})),n&&f++;for(var v=l;v<=c;v++)m.push((0,V.wV)(v,d));return tt(p,m)}(r,l,c,d),g={selectedRecordIds:n,copiedRange:r,copiedColumns:o,copiedRecords:a,copiedTableId:i},y=JSON.stringify(g);h?(h.setData(Je,v),h.setData(et,y)):nt(v,y)}else{var C=m.aG[t.toUpperCase()];h?h.setData(C,s):nt(s,{format:C})}},ot=n(42996);var at=function(e){var t=e.draggedRange,n=e.getSelectedRangeDimensions,o=e.getSelectedDimensions,a=t.overRecordIdx,i=t.bottomRight,s=i.idx,u=i.rowIdx,c=i.groupRecordIndex;if(null!==a&&u<a){for(var d=n(t),f=u+1;f<=a;f++){var p=o({idx:s,rowIdx:f,groupRecordIndex:c}).height;d.height+=p}return(0,l.jsx)(Be,(0,r.A)((0,r.A)({},d),{},{className:"react-grid-cell-dragged-over-down"}))}return null};var it=function(e){var t=e.onDragStart,n=e.onDragEnd;return(0,l.jsx)("div",{className:"drag-handle",draggable:"true",onDragStart:t,onDragEnd:n})},lt=function(e){function t(){var e;(0,C.A)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=(0,_.A)(this,t,[].concat(r))).state={isMounted:!1},e.el=document.createElement("div"),e}return(0,A.A)(t,e),(0,E.A)(t,[{key:"componentDidMount",value:function(){this.props.target.appendChild(this.el),this.setState({isMounted:!0})}},{key:"componentWillUnmount",value:function(){this.props.target.removeChild(this.el)}},{key:"render",value:function(){return this.state.isMounted?je.createPortal(this.props.children,this.el):null}}])}(o.Component),st=lt,ut=n(60472),ct=n(3866),dt=function(e){var t=e.column,n=e.record,r=e.table,a=e.onCommitCancel,i=(0,o.useState)(0),u=(0,f.A)(i,2),c=u[0],d=u[1],p=(0,o.useMemo)((function(){var e=window.sfMetadataContext.getSetting("repoID");return r.rows.filter((function(e){return ae.Aq.imageCheck(e[h.L2D.FILE_NAME])})).map((function(t){var n,r=t[h.L2D.FILE_NAME],o=t[h.L2D.PARENT_DIR],a=ae.Aq.encodePath(ae.Aq.joinPath(o,r)),i="gif"===r.substr(r.lastIndexOf(".")+1).toLowerCase(),l=null===(n=window.sfMetadataContext.getSetting("repoInfo"))||void 0===n?void 0:n.encrypted,s="".concat(j.Yc).concat(l&&!i?"thumbnail":"repo","/").concat(e),u="".concat(s,"/").concat(l&&!i?j.oC:"raw").concat(a);return{name:r,url:"".concat(j.Yc,"lib/").concat(e,"/file").concat(a),thumbnail:"".concat(j.Yc,"thumbnail/").concat(e,"/").concat(j.oC).concat(a),src:u}}))}),[r]);(0,o.useEffect)((function(){if(p.length>0){var e=p.findIndex((function(e){return e.name===n[h.L2D.FILE_NAME]}));e>-1&&d(e)}}),[p,n]);var m=(0,o.useMemo)((function(){var e=n[h.L2D.IS_DIR];return"string"===typeof e?"TRUE"===e.toUpperCase():e}),[n]),v=(0,o.useMemo)((function(){var e=t.key;return n[e]}),[t,n]),g=(0,o.useMemo)((function(){if(m)return"folder";if(!v)return"";var e=v.lastIndexOf(".");return-1===e||v.slice(e).toLowerCase().indexOf(" ")>-1?"":ae.Aq.imageCheck(v)?"image":ae.Aq.isMarkdownFile(v)?"markdown":ae.Aq.isSdocFile(v)?"sdoc":""}),[m,v]),y=(0,o.useMemo)((function(){var e=n[h.L2D.PARENT_DIR];return"/"===e?"":e}),[n]),C=(0,o.useMemo)((function(){return window.sfMetadataContext.getSetting("repoID")}),[]),E=(0,o.useMemo)((function(){return ae.Aq.encodePath(ae.Aq.joinPath(y,v))}),[y,v]),_=(0,o.useMemo)((function(){return"".concat(j.Yc,"lib/").concat(C,"/file").concat(E)}),[E,C]);if((0,o.useEffect)((function(){if("markdown"===g){var e=n[h.L2D.FILE_NAME],t=n[h.L2D.PARENT_DIR];window.sfMetadataContext.eventBus.dispatch(ct.T.OPEN_MARKDOWN_DIALOG,t,e)}return function(){}}),[n,g]),"markdown"===g)return null;if("image"===g)return(0,l.jsx)(s.Q$,{children:(0,l.jsx)(ut.A,{imageItems:p,imageIndex:c,closeImagePopup:a,moveToPrevImage:function(){var e=p.length;d((function(t){return(t+e-1)%e}))},moveToNextImage:function(){var e=p.length;d((function(t){return(t+1)%e}))}})});if(g&&"sdoc"!==g){var A=window.location.pathname;A.endsWith("/")&&(A=A.slice(0,-1)),window.open(window.location.origin+A+ae.Aq.encodePath(ae.Aq.joinPath(y,v)))}else window.open(_);return null},ft=n(13042),pt=n(11942),mt=n.n(pt),ht=(mt().string,mt().number,mt().bool,mt().object,mt().array,function(e){function t(e){var n;return(0,C.A)(this,t),(n=(0,_.A)(this,t,[e])).getValue=function(){var e=n.props.column,t=n.state.value,r=(0,i.yD)(t)||null;return(0,u.default)({},e.key,r)},n.updateValue=function(e,t){e!==n.state.value&&n.setState({value:e},(function(){t&&t()}))},n.focusInput=function(){n.input&&n.input.focus()},n.blurInput=function(){n.input&&n.input.blur()},n.onBlur=function(){n.props.onCommit()},n.onPaste=function(e){e.stopPropagation()},n.onCut=function(e){e.stopPropagation()},n.onChange=function(e){e.persist();var t=e.target.value;n.setState({value:t},(function(){n.props.onChange&&n.props.onChange(e)}))},n.onInputKeyDown=function(e){var t=e.currentTarget,r=t.selectionStart,o=t.selectionEnd,a=t.value;e.keyCode===ft.cK.Enter?(e.preventDefault(),n.onBlur()):(e.keyCode===ft.cK.ChineseInputMethod||e.keyCode===ft.cK.LeftArrow&&0===r||e.keyCode===ft.cK.RightArrow&&o===a.length)&&e.stopPropagation(),n.props.onKeyDown&&n.props.onKeyDown(e)},n.onClick=function(e){n.props.onInputClick&&n.props.onInputClick(e)},n.onCompositionStart=function(e){n.props.onCompositionStart&&n.props.onCompositionStart(e)},n.onCompositionEnd=function(e){n.props.onCompositionEnd&&n.props.onCompositionEnd(e),n.onChange(e)},n.getInputNode=function(){var e=je.findDOMNode(n.input);return"INPUT"===e.tagName?e:e.querySelector("input:not([type=hidden])")},n.setInputRef=function(e){return n.input=e,n.input},n.onSaveQRCodeValue=function(e){n.setState({value:e}),n.props.onCommit()},n.state={value:e.value||""},n}return(0,A.A)(t,e),(0,E.A)(t,[{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=this.props,n=t.value,r=t.column,o=e.value;ne(n,o,r.type)&&this.setState({value:o||""})}},{key:"render",value:function(){var e=this.props,t=e.column,n=e.readOnly,r=e.className,o=e.placeholder,a=this.state.value;return(0,l.jsx)(l.Fragment,{children:(0,l.jsx)("input",{type:"text",className:y()("sf-metadata-text-editor form-control",r),ref:this.setInputRef,placeholder:o||"",disabled:n,onBlur:this.onBlur,onCut:this.onCut,onPaste:this.onPaste,value:a,name:t.name,title:t.name,"aria-label":t.name,onChange:this.onChange,onKeyDown:this.onInputKeyDown,onClick:this.onClick,onCompositionStart:this.onCompositionStart,onCompositionEnd:this.onCompositionEnd})})}}])}(o.Component)),vt=ht,gt=(0,o.forwardRef)((function(e,t){var n=e.readOnly,r=e.column,a=e.value,i=e.onCommit,s=e.onChange,c=e.selectDownCell,d=(0,o.useMemo)((function(){return r.data||{format:h.KYu}}),[r]),p=(0,o.useState)(""),m=(0,f.A)(p,2),v=m[0],g=m[1],y=(0,o.useRef)(null);(0,o.useEffect)((function(){var e=a||0===a?a:"",t=(null===r||void 0===r?void 0:r.data)||{},n=(0,h.HLJ)(e,t)||"";g(n)}),[]);var C=(0,o.useCallback)((function(e){var t=(null===d||void 0===d?void 0:d.format)||h.KYu,n="custom_currency"===t?d.currency_symbol:null,r=e.target.value.trim();if((0,h.cX8)()||!(r.indexOf(".\u3002")>-1)){var o=(0,h.yAg)(r,t,n);o!==v&&(g(o),s&&s(e,o))}}),[d,v,s]),E=(0,o.useCallback)((function(){(0,h.Tnt)(i)&&i()}),[i]),_=(0,o.useCallback)((function(e){var t=e.currentTarget,n=t.selectionStart,r=t.selectionEnd,o=t.value;e.keyCode===ft.cK.Enter||e.keyCode===ft.cK.Esc?(e.preventDefault(),E(),(0,h.Tnt)(c)&&c()):(e.keyCode===ft.cK.LeftArrow&&0===n||e.keyCode===ft.cK.RightArrow&&r===o.length)&&e.stopPropagation()}),[E,c]),A=(0,o.useCallback)((function(e){e.stopPropagation()}),[]),b=(0,o.useCallback)((function(e){e.stopPropagation()}),[]);return(0,o.useImperativeHandle)(t,(function(){return{getValue:function(){var e=r.key;return(0,u.default)({},e,(0,h.nYS)(v,d))},getInputNode:function(){var e=je.findDOMNode(y.current);return"INPUT"===e.tagName?e:e.querySelector("input:not([type=hidden])")}}}),[r,v,d]),(0,l.jsx)("input",{ref:y,type:"text",className:"form-control",value:v,onBlur:E,onPaste:A,onCut:b,onKeyDown:_,onChange:C,style:{textAlign:"right"},disabled:n})})),yt=gt,Ct=n(35975),Et=(0,o.forwardRef)((function(e,t){var n=e.height,r=e.column,a=e.columns,i=e.record,c=e.value,d=e.editorPosition,p=void 0===d?{left:0,top:0}:d,m=e.onCommit,v=e.onPressTab,g=e.modifyColumnData,C=(0,o.useState)(c||""),E=(0,f.A)(C,2),_=E[0],A=E[1],b=(0,o.useState)(""),S=(0,f.A)(b,2),w=S[0],O=S[1],R=(0,o.useState)(-1),T=(0,f.A)(R,2),x=T[0],M=T[1],D=(0,o.useState)(0),I=(0,f.A)(D,2),N=I[0],L=I[1],k=(0,o.useRef)(null),P=(0,o.useRef)(null),F=(0,o.useRef)(null),Y=window.sfMetadataContext.canModifyColumnData(r),U=(0,o.useMemo)((function(){var e=(0,h.FiT)(r),t=r.data||{},n=t.cascade_column_key,o=t.cascade_settings;if(n){var l=(0,h.rm3)(a,n);if(l){var s=(0,h.Teq)(i,l);if(!s)return[];var u=o[s];return u&&Array.isArray(u)&&0!==u.length?e.filter((function(e){return u.includes(e.id)})):[]}}return e}),[i,r,a]),B=(0,o.useMemo)((function(){if(!w)return U;var e=w.toLowerCase().trim();return e?U.filter((function(t){return t.name&&t.name.toLowerCase().indexOf(e)>-1})):U}),[w,U]),H=(0,o.useMemo)((function(){return!(!Y||!w)&&-1===B.findIndex((function(e){return e.name===w}))}),[Y,B,w]),G=(0,o.useMemo)((function(){return{width:r.width,top:n-2}}),[r,n]),V=(0,o.useCallback)((function(){m&&m(_)}),[_,m]),Z=(0,o.useCallback)((function(e){w!==e&&O(e)}),[w]),z=(0,o.useCallback)((function(e){e!==_&&(A(e),setTimeout((function(){m&&m(e)}),1))}),[_,m]),X=(0,o.useCallback)((function(e){M(e)}),[]),W=(0,o.useCallback)((function(e){M(-1)}),[]),K=(0,o.useCallback)((function(e){e&&e.stopPropagation(),e&&e.nativeEvent.stopImmediatePropagation();var t=(0,Ct.r)(U,(null===w||void 0===w?void 0:w.trim())||""),n=U.slice(0);n.push(t),g(r.key,{options:n},{options:r.data.options||[]}),z(t.id)}),[r,w,U,z,g]),$=(0,o.useCallback)((function(){var e=getComputedStyle(k.current,null),t=getComputedStyle(F.current,null);return Math.floor(parseInt(e.maxHeight)/parseInt(t.height))-1}),[k,F]),q=(0,o.useCallback)((function(e){var t;if(e.preventDefault(),1===B.length?t=B[0]:x>-1&&(t=B[x]),t){var n=t.id;return _===t.id&&(n=null),void z(n)}var r=!1;w&&(r=!(!Y||-1!==B.findIndex((function(e){return e.name===w})))),r&&0!==B.length&&K()}),[Y,B,x,_,w,z,K]),Q=(0,o.useCallback)((function(e){e.preventDefault(),e.stopPropagation(),0!==x&&(M(x-1),x>B.length-N&&(k.current.scrollTop-=30))}),[k,x,N,B,30]),J=(0,o.useCallback)((function(e){e.preventDefault(),e.stopPropagation(),x!==B.length-1&&(M(x+1),x>=N&&(k.current.scrollTop+=30))}),[k,x,N,B,30]),ee=(0,o.useCallback)((function(e){e.keyCode===ft.cK.Enter?q(e):e.keyCode===ft.cK.UpArrow?Q(e):e.keyCode===ft.cK.DownArrow?J(e):e.keyCode===ft.cK.Tab&&(0,h.Tnt)(v)&&v(e)}),[q,Q,J,v]),te=(0,o.useCallback)((function(e){e.keyCode!==ft.cK.ChineseInputMethod&&e.keyCode!==ft.cK.Enter&&e.keyCode!==ft.cK.LeftArrow&&e.keyCode!==ft.cK.RightArrow||e.stopPropagation()}),[]);(0,o.useEffect)((function(){P.current&&(P.current.getBoundingClientRect().bottom>window.innerHeight&&(P.current.style.top="unset",P.current.style.bottom=p.top+n-window.innerHeight+"px"));return k.current&&F.current&&L($()),document.addEventListener("keydown",ee,!0),function(){document.removeEventListener("keydown",ee,!0)}}),[ee]),(0,o.useEffect)((function(){var e=0===B.length?-1:0;M(e)}),[B]),(0,o.useImperativeHandle)(t,(function(){return{getValue:function(){var e=r.key;return(0,u.default)({},e,_)},onBlur:function(){return V()}}}),[r,_,V]);var ne=(0,o.useCallback)((function(){if(0===B.length){var e=w?(0,j.AP)("No options available"):(0,j.AP)("No option");return(0,l.jsx)("span",{className:"none-search-result",children:e})}return B.map((function(e,t){var n=_===e.id||_===e.name;return(0,l.jsx)("div",{className:"sf-metadata-single-select-item",ref:F,children:(0,l.jsxs)("div",{className:y()("single-select-container",{"single-select-container-highlight":t===x}),onMouseDown:function(){return z(n?null:e.id)},onMouseEnter:function(){return X(t)},onMouseLeave:function(){return W(t)},children:[(0,l.jsx)("div",{className:"single-select",children:(0,l.jsx)("span",{className:"single-select-name",style:{backgroundColor:e.color,color:e.textColor||null},title:e.name,"aria-label":e.name,children:e.name})}),(0,l.jsx)("div",{className:"single-select-check-icon",children:n&&(0,l.jsx)(s.In,{iconName:"check-mark"})})]})},e.id)}))}),[B,w,_,x,X,W,z]);return(0,l.jsxs)("div",{className:"sf-metadata-single-select-editor",style:G,ref:P,children:[(0,l.jsx)("div",{className:"sf-metadata-search-single-select-options",children:(0,l.jsx)(s.DO,{placeholder:(0,j.AP)("Search option"),onKeyDown:te,onChange:Z,autoFocus:!0,className:"sf-metadata-search-options"})}),(0,l.jsx)("div",{className:"sf-metadata-single-select-editor-container",ref:k,children:ne()}),H&&(0,l.jsx)(s.NC,{callBack:K,footerName:"".concat((0,j.AP)("Add option")," ").concat(w),className:"add-search-result"})]})})),_t=Et,At=function(e){var t=e.value,n=e.options,r=e.onDelete,a=(0,o.useMemo)((function(){if(!Array.isArray(t)||0===t.length)return[];var e=n.filter((function(e){return t.includes(e.id)||t.includes(e.name)})),r=t.filter((function(e){return e&&!n.find((function(t){return t.id===e||t.name===e}))})).map((function(e){return{id:e,name:(0,i.AP)(m.fT),color:m.lX}}));return[].concat((0,_e.A)(e),(0,_e.A)(r))}),[n,t]);return(0,l.jsx)("div",{className:"sf-metadata-delete-select-options",children:a.map((function(e){if(!e)return null;var t=e.id,n=e.name,o={display:"inline-flex",padding:"0px 10px",height:"20px",lineHeight:"20px",textAlign:"center",borderRadius:"10px",maxWidth:"250px",fontSize:13,backgroundColor:e.color,color:e.textColor||null,fill:e.textColor||"#666"};return(0,l.jsxs)("div",{className:"sf-metadata-delete-select-option",style:o,children:[(0,l.jsx)("span",{className:"sf-metadata-delete-select-option-name text-truncate",title:n,"aria-label":n,children:n}),(0,l.jsx)(s.Oi,{className:"sf-metadata-delete-select-remove",onClick:function(e){return r(t,e)},iconName:"x-01"})]},t)}))})},bt=(0,o.forwardRef)((function(e,t){var n=e.height,r=e.saveImmediately,a=e.column,i=e.value,c=e.editorPosition,d=void 0===c?{left:0,top:0}:c,p=e.onCommit,m=e.onPressTab,v=e.modifyColumnData,g=(0,o.useState)((0,h.bLM)(a,i)),C=(0,f.A)(g,2),E=C[0],_=C[1],A=(0,o.useState)(""),b=(0,f.A)(A,2),S=b[0],w=b[1],O=(0,o.useState)(-1),R=(0,f.A)(O,2),T=R[0],x=R[1],M=(0,o.useState)(0),D=(0,f.A)(M,2),I=D[0],N=D[1],L=(0,o.useRef)(null),k=(0,o.useRef)(null),P=(0,o.useRef)(null),F=window.sfMetadataContext.canModifyColumnData(a),Y=(0,o.useMemo)((function(){return(0,h.FiT)(a)}),[a]),U=(0,o.useMemo)((function(){if(!S)return Y;var e=S.toLowerCase().trim();return e?Y.filter((function(t){return t.name&&t.name.toLowerCase().indexOf(e)>-1})):Y}),[S,Y]),B=(0,o.useMemo)((function(){return!(!F||!S)&&-1===U.findIndex((function(e){return e.name===S}))}),[F,U,S]),H=(0,o.useMemo)((function(){return{width:a.width}}),[a]),G=(0,o.useCallback)((function(){p&&p(E)}),[E,p]),V=(0,o.useCallback)((function(e){S!==e&&w(e)}),[S]),Z=(0,o.useCallback)((function(e){var t=E.slice(0),n=E.indexOf(e);n>-1?t.splice(n,1):t.push(e),_(t),r&&p&&p(t)}),[r,E,p]),z=(0,o.useCallback)((function(e){x(e)}),[]),X=(0,o.useCallback)((function(e){x(-1)}),[]),W=(0,o.useCallback)((function(e){e&&e.stopPropagation(),e&&e.nativeEvent.stopImmediatePropagation();var t=(0,Ct.r)(Y,(null===S||void 0===S?void 0:S.trim())||""),n=Y.slice(0);n.push(t),v(a.key,{options:n},{options:a.data.options||[]}),Z(t.id)}),[a,S,Y,Z,v]),K=(0,o.useCallback)((function(e){var t=E.slice(0),n=t.indexOf(e);n>-1&&t.splice(n,1),_(t),r&&p&&p(t)}),[r,E,p]),$=(0,o.useCallback)((function(){var e=getComputedStyle(L.current,null),t=getComputedStyle(P.current,null);return Math.floor(parseInt(e.maxHeight)/parseInt(t.height))-1}),[L,P]),q=(0,o.useCallback)((function(e){var t;if(e.preventDefault(),1===U.length?t=U[0]:T>-1&&(t=U[T]),t){var n=t.id;return E===t.id&&(n=null),void Z(n)}var r=!1;S&&(r=!(!F||-1!==U.findIndex((function(e){return e.name===S})))),r&&0!==U.length&&W()}),[F,U,T,E,S,Z,W]),Q=(0,o.useCallback)((function(e){e.preventDefault(),e.stopPropagation(),0!==T&&(x(T-1),T>U.length-I&&(L.current.scrollTop-=30))}),[L,T,I,U,30]),J=(0,o.useCallback)((function(e){e.preventDefault(),e.stopPropagation(),T!==U.length-1&&(x(T+1),T>=I&&(L.current.scrollTop+=30))}),[L,T,I,U,30]),ee=(0,o.useCallback)((function(e){e.keyCode===ft.cK.Enter?q(e):e.keyCode===ft.cK.UpArrow?Q(e):e.keyCode===ft.cK.DownArrow?J(e):e.keyCode===ft.cK.Tab&&(0,h.Tnt)(m)&&m(e)}),[q,Q,J,m]),te=(0,o.useCallback)((function(e){e.keyCode!==ft.cK.ChineseInputMethod&&e.keyCode!==ft.cK.Enter&&e.keyCode!==ft.cK.LeftArrow&&e.keyCode!==ft.cK.RightArrow||e.stopPropagation()}),[]);(0,o.useEffect)((function(){k.current&&(k.current.getBoundingClientRect().bottom>window.innerHeight&&(k.current.style.top="unset",k.current.style.bottom=d.top+n-window.innerHeight+"px"));return L.current&&P.current&&N($()),document.addEventListener("keydown",ee,!0),function(){document.removeEventListener("keydown",ee,!0)}}),[ee]),(0,o.useEffect)((function(){var e=0===U.length?-1:0;x(e)}),[U]),(0,o.useImperativeHandle)(t,(function(){return{getValue:function(){var e=a.key;return(0,u.default)({},e,E)},onBlur:function(){return G()}}}),[a,E,G]);var ne=(0,o.useCallback)((function(){if(0===U.length){var e=S?(0,j.AP)("No options available"):(0,j.AP)("No option");return(0,l.jsx)("span",{className:"none-search-result",children:e})}return U.map((function(e,t){var n=E.includes(e.id);return(0,l.jsx)("div",{className:"sf-metadata-single-select-item",ref:P,children:(0,l.jsxs)("div",{className:y()("single-select-container",{"single-select-container-highlight":t===T}),onMouseDown:function(){return Z(e.id)},onMouseEnter:function(){return z(t)},onMouseLeave:function(){return X(t)},children:[(0,l.jsx)("div",{className:"single-select",children:(0,l.jsx)("span",{className:"single-select-name",style:{backgroundColor:e.color,color:e.textColor||null},title:e.name,"aria-label":e.name,children:e.name})}),(0,l.jsx)("div",{className:"single-select-check-icon",children:n&&(0,l.jsx)(s.In,{iconName:"check-mark"})})]})},e.id)}))}),[U,S,E,T,z,X,Z]);return(0,l.jsxs)("div",{className:"sf-metadata-single-select-editor sf-metadata-multiple-select-editor",style:H,ref:k,children:[(0,l.jsx)(At,{value:E,options:Y,onDelete:K}),(0,l.jsx)("div",{className:"sf-metadata-search-single-select-options",children:(0,l.jsx)(s.DO,{placeholder:(0,j.AP)("Search option"),onKeyDown:te,onChange:V,autoFocus:!0,className:"sf-metadata-search-options"})}),(0,l.jsx)("div",{className:"sf-metadata-single-select-editor-container",ref:L,children:ne()}),B&&(0,l.jsx)(s.NC,{callBack:W,footerName:"".concat((0,j.AP)("Add option")," ").concat(S),className:"add-search-result"})]})})),St=bt,wt=function(e){var t=e.value,n=e.onDelete,r=(0,oe.D1)().getCollaborator;return(0,l.jsx)("div",{className:"sf-metadata-delete-collaborator",children:Array.isArray(t)&&t.map((function(e){var t=r(e);if(!t)return null;var o=t.name,a=t.avatar_url;return(0,l.jsxs)("div",{className:"collaborator",children:[(0,l.jsx)("span",{className:"collaborator-avatar-container",children:(0,l.jsx)("img",{className:"collaborator-avatar m-0",alt:o,src:a})}),(0,l.jsx)("span",{className:"collaborator-name text-truncate",title:o,"aria-label":o,children:o}),(0,l.jsx)(s.Oi,{className:"collaborator-remove",onClick:function(t){return n(e,t)},iconName:"x-01"})]},e)}))})},Ot=(0,o.forwardRef)((function(e,t){var n=e.height,r=e.saveImmediately,a=void 0!==r&&r,i=e.column,c=e.value,d=e.editorPosition,p=void 0===d?{left:0,top:0}:d,m=e.onCommit,v=e.onPressTab,g=e.onClose,C=(0,o.useState)(c||[]),E=(0,f.A)(C,2),_=E[0],A=E[1],b=(0,o.useState)(""),S=(0,f.A)(b,2),w=S[0],O=S[1],R=(0,o.useState)(-1),T=(0,f.A)(R,2),x=T[0],M=T[1],D=(0,o.useState)(0),I=(0,f.A)(D,2),N=I[0],L=I[1],k=(0,o.useState)(0),P=(0,f.A)(k,2),F=P[0],Y=P[1],U=(0,o.useRef)(null),B=(0,o.useRef)(null),H=(0,o.useRef)(null),G=(0,oe.D1)().collaborators,V=(0,o.useMemo)((function(){var e=w?w.trim().toLowerCase():"",t=Array.isArray(G)&&G.length>0?G:[];return e?t.filter((function(t){var n=t.name,r=t.name_pinyin,o=void 0===r?"":r;if(n.toString().toLowerCase().indexOf(e)>-1)return!0;if(!o)return!1;var a=o.toString().toLowerCase(),i=e.replace(/ |'/g,"");return a.indexOf(i)>-1||(a.replace(/'/g,"").indexOf(i)>-1||a.split("'").map((function(e){return e&&e.trim()?e.trim().slice(0,1):""})).join("").indexOf(i)>-1)})):t}),[w,G]),Z=(0,o.useCallback)((function(){m&&m()}),[m]),z=(0,o.useCallback)((function(e){w!==e&&O(e)}),[w]),X=(0,o.useCallback)((function(e){var t=_.slice(0),n=t.indexOf(e);n>-1?t.splice(n,1):t.push(e),A(t),a&&m&&m(t)}),[a,_,m]),W=(0,o.useCallback)((function(e){var t=_.slice(0),n=t.indexOf(e);n>-1&&t.splice(n,1),A(t),a&&m&&m(t)}),[a,_,m]),K=(0,o.useCallback)((function(e){M(e)}),[]),$=(0,o.useCallback)((function(e){M(-1)}),[]),q=(0,o.useCallback)((function(){var e=getComputedStyle(U.current,null),t=getComputedStyle(H.current,null);return Math.floor(parseInt(e.maxHeight)/parseInt(t.height))-1}),[U,H]),Q=(0,o.useCallback)((function(e){var t;e.preventDefault(),1===V.length?t=V[0]:x>-1&&(t=V[x]),t&&X(t.email)}),[V,x,X]),J=(0,o.useCallback)((function(e){if(e.preventDefault(),e.stopPropagation(),0===x)return M(V.length-1),void(U.current.scrollTop=0);M(x-1),x>V.length-N&&(U.current.scrollTop-=F)}),[U,x,N,V,F]),ee=(0,o.useCallback)((function(e){if(e.preventDefault(),e.stopPropagation(),x===V.length-1)return M(0),void(U.current.scrollTop=0);M(x+1),x>=N&&(U.current.scrollTop+=F)}),[U,x,N,V,F]),te=(0,o.useCallback)((function(e){e.preventDefault(),e.stopPropagation(),Z()}),[Z]),ne=(0,o.useCallback)((function(e){e.keyCode===ft.cK.Enter?Q(e):e.keyCode===ft.cK.UpArrow?J(e):e.keyCode===ft.cK.DownArrow?ee(e):e.keyCode===ft.cK.Tab?(0,h.Tnt)(v)&&v(e):e.keyCode===ft.cK.Esc&&te(e)}),[Q,J,ee,v,te]),re=(0,o.useCallback)((function(e){e.keyCode!==ft.cK.ChineseInputMethod&&e.keyCode!==ft.cK.LeftArrow&&e.keyCode!==ft.cK.RightArrow||e.stopPropagation()}),[]);(0,o.useEffect)((function(){B.current&&(B.current.getBoundingClientRect().bottom>window.innerHeight&&(B.current.style.top="unset",B.current.style.bottom=p.top+n-window.innerHeight+"px"));return U.current&&H.current&&(L(q()),Y(parseInt(getComputedStyle(H.current,null).height))),document.addEventListener("keydown",ne,!0),function(){document.removeEventListener("keydown",ne,!0)}}),[ne]),(0,o.useEffect)((function(){var e=0===V.length?-1:0;M(e)}),[V]),(0,o.useImperativeHandle)(t,(function(){return{getValue:function(){var e=i.key;return(0,u.default)({},e,_)},onBlur:function(){return Z()},onClose:function(){return g()}}}),[i,_,Z,g]);var ae=(0,o.useCallback)((function(){if(0===V.length){var e=w?(0,j.AP)("No collaborators available"):(0,j.AP)("No collaborators");return(0,l.jsx)("span",{className:"none-search-result",children:e})}return V.map((function(e,t){var n=_.includes(e.email);return(0,l.jsx)("div",{className:"sf-metadata-collaborator-item",ref:H,children:(0,l.jsxs)("div",{className:y()("collaborator-container",{"collaborator-container-highlight":t===x}),onMouseDown:function(){return X(e.email)},onMouseEnter:function(){return K(t)},onMouseLeave:function(){return $(t)},children:[(0,l.jsxs)("div",{className:"collaborator",children:[(0,l.jsx)("img",{className:"collaborator-avatar",alt:e.name,src:e.avatar_url}),(0,l.jsx)("span",{className:"collaborator-name",title:e.name,"aria-label":e.name,children:e.name})]}),(0,l.jsx)("div",{className:"collaborator-check-icon",children:n&&(0,l.jsx)(s.In,{iconName:"check-mark"})})]})},e.email)}))}),[V,w,_,x,K,$,X]),ie=p.left+300>window.innerWidth;return(0,l.jsxs)("div",{className:"sf-metadata-collaborator-editor",style:{top:-38,left:ie?"unset":0,right:ie?-i.width:"unset"},ref:B,children:[(0,l.jsx)(wt,{value:_,onDelete:W}),(0,l.jsx)("div",{className:"sf-metadata-search-collaborator-options",children:(0,l.jsx)(s.DO,{placeholder:(0,j.AP)("Search collaborators"),onKeyDown:re,onChange:z,autoFocus:!0,className:"sf-metadata-search-collaborators"})}),(0,l.jsx)("div",{className:"sf-metadata-collaborator-editor-container",ref:U,children:ae()})]})})),Rt=Ot,Tt=n(92203),xt=n(59051),Mt=n.n(xt),Dt=n(97011),It=function(){return(0,E.A)((function e(t){var n=this,r=t.repoID,o=t.repoName,a=t.server;(0,C.A)(this,e),this.uploadLocalImage=function(e){var t=Mt()().format("YYYY-MM"),r="images/".concat(n.relativePath,"/").concat(t);return Dt.e.getFileServerUploadLink(n.repoID,"/").then((function(t){var n=t.data+"?ret-json=1",o="image-"+Date.now().toString()+".png",a=new File([e],o,{type:e.type}),i=new FormData;return i.append("parent_dir","/"),i.append("relative_path",r),i.append("file",a),Dt.e.uploadImage(n,i)})).then((function(e){return n._getImageURL(r,e.data[0].name)}))};var i=window.app.pageOptions,l=i.name,s=i.username,u=i.contactEmail;this.repoID=r,this.repoName=o,this.server=a,this.name=l,this.contact_email=u,this.userName=s,this.relativePath="metadata"}),[{key:"_getImageURL",value:function(e,t){return"".concat(this.server,"/lib/").concat(this.repoID,"/file/").concat(e,"/").concat(t,"?raw=1")}},{key:"getFileURL",value:function(e){return"file"!==e.type?this.server+"/library/"+this.repoID+"/"+encodeURIComponent(this.repoName)+ae.Aq.encodePath(e.path()):e.isImage()?this.server+"/lib/"+this.repoID+"/file"+ae.Aq.encodePath(e.path())+"?raw=1":this.server+"/lib/"+this.repoID+"/file"+ae.Aq.encodePath(e.path())}},{key:"isInternalFileLink",value:function(e){return new RegExp(this.serviceUrl+"/lib/[0-9a-f-]{36}/file.*").test(e)}},{key:"isInternalDirLink",value:function(e){return new RegExp(this.serviceUrl+"/library/[0-9a-f-]{36}.*").test(e)}},{key:"markdownLint",value:function(e){return Dt.e.markdownLint(e)}}])}(),Nt=function(e){function t(e){var n;(0,C.A)(this,t),(n=(0,_.A)(this,t,[e])).initEditorValue=function(){var e=n.props.value;if(e){if("object"===typeof e)return e;if("string"===typeof e){1===e.length&&(n.isLongTextValueChanged=!0);var t=(0,Tt.getPreviewContent)(e),r=t.previewText,o=t.images,a=t.links,i=t.checklist;return Object.assign({},{text:e,preview:r,images:o,links:a,checklist:i})}if("string"===typeof e&&1===e.length)return n.isLongTextValueChanged=!0,{text:e,preview:e,links:[],images:[]}}return{text:"",preview:"",links:[],images:[],checklist:{completed:0,count:0}}},n.getOldValue=function(){var e=n.props.value;return e?"object"===typeof e?e.text:"string"===typeof e?e:"":""},n.getValue=function(){var e={};return e[n.props.column.key]=n.value.text,e},n.onEditorValueChanged=function(e){n.value=e,n.isLongTextValueChanged=!0},n.onSaveEditorValue=function(e){if((0,h.EDs)(e))return p.A.closeAll(),void p.A.danger(h.Ar4,{duration:null});n.props.onCommit(null===e||void 0===e?void 0:e.text),n.isLongTextValueChanged=!1},n.onCloseEditorDialog=function(){var e;!n.props.readOnly&&n.isLongTextValueChanged&&((0,h.EDs)(n.value)&&(p.A.closeAll(),p.A.warning(h.Zu0,{duration:null}),n.value=(0,h.ZRJ)(n.value)),n.props.onCommit(null===(e=n.value)||void 0===e?void 0:e.text),n.isLongTextValueChanged=!1);n.props.onCommitCancel()},n.isLongTextValueChanged=!1,n.repoID=window.sfMetadataContext.getSetting("repoID"),n.filePath="/";var r=window.sfMetadataContext.getSetting("repoInfo").repo_name;return n.api=new It({repoID:n.repoID,repoName:r,server:j.xW}),n.value=n.initEditorValue(),n}return(0,A.A)(t,e),(0,E.A)(t,[{key:"render",value:function(){var e=this.props,t=e.column,n=e.readOnly,r=t.name;return(0,l.jsx)(Tt.LongTextEditorDialog,{className:"sf-metadata-long-text-editor-dialog",lang:j.vV,readOnly:n,headerName:r,value:this.value.text,autoSave:!0,saveDelay:2e4,isCheckBrowser:!0,editorApi:this.api,onSaveEditorValue:this.onSaveEditorValue,onEditorValueChanged:this.onEditorValueChanged,onCloseEditorDialog:this.onCloseEditorDialog})}}])}(o.PureComponent),Lt=Nt,kt=o.forwardRef((function(e,t){switch(e.column.type){case h.vZe.FILE_NAME:return(0,l.jsx)(dt,(0,r.A)({ref:t},e));case h.vZe.TEXT:return(0,l.jsx)(vt,(0,r.A)({ref:t},e));case h.vZe.DATE:return(0,l.jsx)(s.US,(0,r.A)((0,r.A)({ref:t},e),{},{lang:j.vV}));case h.vZe.NUMBER:return(0,l.jsx)(yt,(0,r.A)({ref:t},e));case h.vZe.SINGLE_SELECT:return(0,l.jsx)(_t,(0,r.A)({ref:t},e));case h.vZe.MULTIPLE_SELECT:return(0,l.jsx)(St,(0,r.A)({ref:t},e));case h.vZe.COLLABORATOR:return(0,l.jsx)(Rt,(0,r.A)({ref:t},e));case h.vZe.LONG_TEXT:return(0,l.jsx)(Lt,(0,r.A)((0,r.A)({ref:t},e),{},{lang:j.vV}));default:return null}})),Pt=function(e){function t(){var e;(0,C.A)(this,t);for(var n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return(e=(0,_.A)(this,t,[].concat(o))).state={isInvalid:!1},e.changeCommitted=!1,e.changeCanceled=!1,e.isKeyExplicitlyHandled=function(t){return(0,h.Tnt)(e["onPress"+t])},e.checkAndCall=function(t,n){(0,h.Tnt)(e[t])&&e[t](n)},e.onKeyDown=function(t){if(Pe(t))e.checkAndCall("onPressKeyWithCtrl",t);else if(e.isKeyExplicitlyHandled(t.key)){var n="onPress"+t.key;e.checkAndCall(n,t)}else ke(t.keyCode)&&(t.stopPropagation(),e.checkAndCall("onPressChar",t));e._keysDown=e._keysDown||{},e._keysDown[t.keyCode]=!0,(0,h.Tnt)(e.props.onGridKeyDown)&&e.props.onGridKeyDown(t)},e.onScroll=function(e){e.stopPropagation()},e.setEditorRef=function(t){e.editor=t},e.createEditor=function(){var t=e.props,n=t.column,o=t.record,a=t.openEditorMode,i=t.columns,s=t.modifyColumnData,u={ref:e.setEditorRef,readOnly:!(0,V.dK)(n,o,!0),columns:i,column:e.props.column,value:e.getInitialValue(),mode:a,onCommit:e.commit,onCommitData:e.commitData,onCommitCancel:e.commitCancel,recordMetaData:e.getRecordMetaData(),record:e.props.record,height:e.props.height,onBlur:e.commit,onOverrideKeyDown:e.onKeyDown,modifyColumnData:s};return(0,l.jsx)(kt,(0,r.A)({},u))},e.onPressEnter=function(){},e.onPressTab=function(){e.commit({key:"Tab"})},e.onPressEscape=function(t){e.editorIsSelectOpen()?t.stopPropagation():e.commitCancel()},e.onPressArrowDown=function(t){e.editorHasResults()?t.stopPropagation():e.commit(t)},e.onPressArrowUp=function(t){e.editorHasResults()?t.stopPropagation():e.commit(t)},e.onPressArrowLeft=function(t){e.isCaretAtBeginningOfInput()?e.commit(t):t.stopPropagation()},e.onPressArrowRight=function(t){e.isCaretAtEndOfInput()?e.commit(t):t.stopPropagation()},e.editorHasResults=function(){return!!(0,h.Tnt)(e.getEditor().hasResults)&&e.getEditor().hasResults()},e.editorIsSelectOpen=function(){return!!(0,h.Tnt)(e.getEditor().isSelectOpen)&&e.getEditor().isSelectOpen()},e.getRecordMetaData=function(){if("function"===typeof e.props.column.getRecordMetaData)return e.props.column.getRecordMetaData(e.props.record,e.props.column)},e.getEditor=function(){return e.editor},e.getInputNode=function(){if(e.getEditor().getInputNode)return e.getEditor().getInputNode()},e.getInitialValue=function(){var t=e.props,n=t.firstEditorKeyDown,r=t.value;return"Enter"===n?r:n||r},e.getContainerClass=function(){return y()({"rdg-editor-container":!0,"table-cell-editor":!0,"has-error":!0===e.state.isInvalid})},e.getOldRowData=function(t){var n=e.props.column,r=n.key,o=n.name,a=t;if(e.getEditor().getOldValue){var i=e.getEditor().getOldValue();a=i[Object.keys(i)[0]]}return{oldRowData:(h.Ajs.includes(r),(0,u.default)({},o,a)),originalOldRowData:(0,u.default)({},r,t)}},e.commit=function(t){var n=e.props,r=n.record,o=n.column,a=o.key,i=o.type,l=(0,h.Teq)(r,o),s=e.getEditor().getValue();ne(l,s[a],i)?e.commitData(s,!0):e.props.onCommitCancel()},e.commitData=function(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e.isNewValueValid(t)){var r=e.props,o=r.onCommit,a=r.record,i=r.column,l=i.key,s=i.name;e.changeCommitted=!0;var c=a._id,d=(0,h.Teq)(a,i),f=t[Object.keys(t)[0]],p=h.Ajs.includes(l)?(0,u.default)({},l,f):(0,u.default)({},s,f),m=e.getOldRowData(d);o({rowId:c,cellKey:l,updates:p,originalUpdates:t,oldRowData:m.oldRowData,originalOldRowData:m.originalOldRowData},n)}},e.commitCancel=function(){e.changeCanceled=!0,e.props.onCommitCancel()},e.isNewValueValid=function(t){if((0,h.Tnt)(e.getEditor().validate)){var n=e.getEditor().validate(t);return e.setState({isInvalid:!n}),n}return!0},e.setCaretAtEndOfInput=function(){var t=e.getInputNode(),n=t.value.length;if(t.setSelectionRange)t.setSelectionRange(n,n);else if(t.createTextRange){var r=t.createTextRange();r.moveStart("character",n),r.collapse(),r.select()}},e.isCaretAtBeginningOfInput=function(){var t=e.getInputNode();return t.selectionStart===t.selectionEnd&&0===t.selectionStart},e.isCaretAtEndOfInput=function(){var t=e.getInputNode();return t.selectionStart===t.value.length},e.handleRightClick=function(e){e.stopPropagation()},e.setTextInputFocus=function(){var t=e.props.firstEditorKeyDown,n=e.getInputNode();n.focus(),"INPUT"===n.tagName&&(ke(t)||n.focus(),n.select())},e.onClickOutside=function(t){var n=(0,i.wD)(t);n&&n.includes("drag-handle")||(e.commit(),e.props.onCommitCancel(),window.sfMetadataContext.eventBus.dispatch(m.Tw.SELECT_NONE))},e}return(0,A.A)(t,e),(0,E.A)(t,[{key:"componentDidMount",value:function(){var e=this.getInputNode();void 0!==e&&(this.setTextInputFocus(),this.getEditor().disableContainerStyles||(e.className+=" editor-main",e.style.height=this.props.height-1+"px"))}},{key:"componentDidUpdate",value:function(e){e.scrollLeft===this.props.scrollLeft&&e.scrollTop===this.props.scrollTop||this.commitCancel()}},{key:"componentWillUnmount",value:function(){this.changeCommitted||this.changeCanceled||this.commit()}},{key:"render",value:function(){var e=this.props,t=e.width,n={position:"absolute",height:e.height,width:t,left:e.left,top:e.top,zIndex:h.Mue.wt};return(0,l.jsx)(s.ij,{onClickOutside:this.onClickOutside,children:(0,l.jsx)("div",{style:n,className:this.getContainerClass(),onKeyDown:this.onKeyDown,onScroll:this.onScroll,onContextMenu:this.handleRightClick,children:this.createEditor()})})}}])}(o.Component);Pt.displayName="EditorContainer";var Ft=Pt,jt=[h.vZe.CTIME,h.vZe.MTIME,h.vZe.CREATOR,h.vZe.LAST_MODIFIER,h.vZe.FILE_NAME],Yt=function(e){function t(e){var n;(0,C.A)(this,t),(n=(0,_.A)(this,t,[e])).changeCommitted=!1,n.changeCanceled=!1,n.editingRowId=n.props.record._id,n.setEditorRef=function(e){n.editor=e},n.createEditor=function(){var e,t=n.props,o=t.column,a=t.record,i=t.height,s=t.onPressTab,u=t.editorPosition,c=t.columns,d=t.modifyColumnData,f=!(0,V.dK)(o,a,!0)||jt.includes(o.type),p=n.getInitialValue(f),m={ref:n.setEditorRef,value:p,recordMetaData:n.getRecordMetaData(),onBlur:n.commit,onCommit:n.commit,onCommitData:n.commitData,onCommitCancel:n.commitCancel,onClose:n.closeEditor,onEscape:n.closeEditor,editorContainer:n.getEditorContainer(),modifyColumnData:d,editorPosition:u,record:a,height:i,columns:c,column:o,readOnly:f,onPressTab:s};o.type===h.vZe.DATE&&(m.format=null===o||void 0===o||null===(e=o.data)||void 0===e?void 0:e.format);return(0,l.jsx)(kt,(0,r.A)({},m))},n.getEditorContainer=function(){return n.props.column.type===h.vZe.DATE?document.body:null},n.getRecordMetaData=function(){if("function"===typeof n.props.column.getRecordMetaData){var e=n.props,t=e.record,r=e.column;return n.props.column.getRecordMetaData(t,r)}},n.getEditor=function(){return n.editor},n.getInitialValue=function(e){var t=n.props,r=t.firstEditorKeyDown,o=t.value;return"Enter"===r?o:n.props.column.type===h.vZe.LONG_TEXT?" "===r||e?o:r||o:o},n.getOldRowData=function(e){var t=n.props.column,r=(0,V.KO)(t),o=t.key,a=e;if(n.getEditor().getOldValue){var i=n.getEditor().getOldValue();a=i[Object.keys(i)[0]]}return{oldRowData:(0,u.default)({},r,a),originalOldRowData:(0,u.default)({},o,e)}},n.commit=function(){var e=n.props,t=e.column;if(e.record._id){var r=t.key,o=t.type,a=n.getEditor().getValue(),i=o===h.vZe.DATE?(0,u.default)({},r,a):a;o===h.vZe.SINGLE_SELECT?i[r]=a[r]?(0,h.xnw)(t,a[r]):"":o===h.vZe.MULTIPLE_SELECT&&(i[r]=a[r]?(0,h.zXq)(t,a[r]):[]),n.commitData(i,o!==h.vZe.LONG_TEXT)}},n.commitData=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o=n.props,a=o.onCommit,i=o.column,l=o.record,s=i.key,c=i.type,d=i.name,f=(0,h.Teq)(l,i),p=(0,r.A)({},e);if(ne(f,p[s],c)&&n.isNewValueValid(e)){n.changeCommitted=!0;var m=l._id,v=e[Object.keys(e)[0]],g=h.Ajs.includes(s)?(0,u.default)({},s,v):(0,u.default)({},d,v),y=n.getOldRowData(f);a({rowId:m,cellKey:s,updates:g,originalUpdates:p,oldRowData:y.oldRowData,originalOldRowData:y.originalOldRowData},t)}else t&&"function"===typeof n.editor.onClose&&n.editor.onClose()},n.commitCancel=function(){n.changeCanceled=!0,n.props.onCommitCancel()},n.isNewValueValid=function(e){if((0,h.Tnt)(n.getEditor().validate)){var t=n.getEditor().validate(e);return n.setState({isInvalid:!t}),t}return!0},n.handleRightClick=function(e){e.stopPropagation()},n.closeEditor=function(e){return n.props.column.type!==h.vZe.DATE||e?function(){return n.onClickOutside(e)}:null},n.onClickOutside=function(e){n.commit(),n.props.onCommitCancel(),!e&&window.sfMetadataContext.eventBus.dispatch(m.Tw.SELECT_NONE)};var o=n.props,a=o.column,i=o.width,s=o.height,c=o.left,d=o.top,f={};return a.type!==h.vZe.SINGLE_SELECT&&a.type!==h.vZe.MULTIPLE_SELECT||(f={width:i,height:s}),n.state={isInvalid:!1,style:(0,r.A)({position:"absolute",zIndex:h.Mue.wt,left:c,top:d},f)},n}return(0,A.A)(t,e),(0,E.A)(t,[{key:"componentDidUpdate",value:function(e){e.scrollLeft===this.props.scrollLeft&&e.scrollTop===this.props.scrollTop||this.commitCancel()}},{key:"componentWillUnmount",value:function(){this.changeCommitted||this.changeCanceled||this.commit()}},{key:"render",value:function(){return(0,l.jsx)(s.ij,{onClickOutside:this.onClickOutside,children:(0,l.jsx)("div",{style:this.state.style,className:y()({"has-error":!0===this.state.isInvalid}),onContextMenu:this.handleRightClick,ref:this.props.innerRef,children:this.createEditor()})})}}])}(o.Component);Yt.displayName="PopupEditorContainer";var Ut=Yt,Bt=function(e){return(0,l.jsx)(kt,(0,r.A)({},e))},Ht=[h.vZe.DATE,h.vZe.COLLABORATOR,h.vZe.SINGLE_SELECT,h.vZe.MULTIPLE_SELECT,h.vZe.LONG_TEXT],Gt=[h.vZe.FILE_NAME],Vt=function(e){var t=e.column;if(!t)return null;var n=t.type;return Ht.includes(n)?(0,l.jsx)(Ut,(0,r.A)({},e)):Gt.includes(n)?(0,l.jsx)(Bt,(0,r.A)({},e)):(0,l.jsx)(Ft,(0,r.A)({},e))},Zt=[h.vZe.FILE_NAME],zt=[h.vZe.CHECKBOX,h.vZe.RATE],Xt=function(e){function t(e){var n;(0,C.A)(this,t),(n=(0,_.A)(this,t,[e])).throttle=null,n.onColumnSelect=function(e){var t=n.props,o=t.columns,a=t.isGroupView,i=t.recordsCount;if(!a){for(var l=0,s=0;s<o.length;s++)if(e.key===o[s].key){l=s;break}n.setState({selectedPosition:(0,r.A)((0,r.A)({},n.state.selectedPosition),{},{idx:l,rowIdx:0}),selectedRange:{startCell:{idx:l,rowIdx:0},topLeft:{idx:l,rowIdx:0},bottomRight:{idx:l,rowIdx:i-1},isDragging:!1}})}},n.onOpenEditorEvent=function(e){n.setState({openEditorMode:e},(function(){n.openEditor()}))},n.onCloseEditorEvent=function(){n.state.isEditorEnabled&&n.closeEditor()},n.onSelectCell=function(e,t){var o=n.state,a=o.selectedPosition,i=o.isEditorEnabled,l=t?n.openEditor:function(){return null};i&&n.closeEditor(),n.setState((function(t){var o=(0,r.A)((0,r.A)({},a),e);return n.isCellWithinBounds(o)?{selectedPosition:o,selectedRange:{topLeft:o,bottomRight:o,startCell:o,cursorCell:o,isDragging:!1}}:t}),l)},n.selectNone=function(){var e={idx:-1,rowIdx:-1,groupRecordIndex:-1};n.setState({selectedPosition:e,selectedRange:{topLeft:e,bottomRight:e,startCell:null,cursorCell:null}}),n.props.selectNone()},n.getSelectedPosition=function(){var e=n.state.selectedRange,t=e.topLeft,r=e.bottomRight;return{top:t.rowIdx,bottom:r.rowIdx,left:t.idx,right:r.idx}},n.getSelectedRange=function(){return n.state.selectedRange},n.selectCell=function(e,t,r){var o={idx:r,groupRecordIndex:e,rowIdx:t};n.setState({selectedPosition:o,selectedRange:{topLeft:o,bottomRight:o,startCell:o,cursorCell:o}})},n.openEditor=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;n.isSelectedCellIsLongText()&&(e&&e.stopPropagation(),e&&e.preventDefault());var t=(e||{}).key,r=n.state,o=r.selectedPosition,a=r.openEditorMode,i=n.props.columns,l=De({selectedPosition:o,columns:i}).type;if(zt.includes(l))return null;(n.isSelectedCellEditable()||a===m.rr.PREVIEWER&&Zt.includes(l))&&!n.state.isEditorEnabled&&n.setState({isEditorEnabled:!0,firstEditorKeyDown:t,editorPosition:n.getEditorPosition()})},n.closeEditor=function(){n.setState({isEditorEnabled:!1,firstEditorKeyDown:null,editorPosition:null,openEditorMode:""})},n.onSelectCellRangeStarted=function(e){if(n.isCellWithinBounds(e)){var t=n.createSingleCellSelectedRange(e,!0);n.setState({selectedRange:t},(function(){(0,h.Tnt)(n.props.onCellRangeSelectionStarted)&&n.props.onCellRangeSelectionStarted(n.state.selectedRange)}))}},n.onSelectCellRangeUpdated=function(e,t,o){if((n.state.selectedRange.isDragging||t)&&n.isCellWithinBounds(e)){var a=function(e,t){var n=e.idx,r=e.rowIdx,o=e.groupRecordIndex,a=t.idx,i=t.rowIdx,l=t.groupRecordIndex,s=[n,a].sort((function(e,t){return e-t})),u=[r,i].sort((function(e,t){return e-t})),c=[o,l].sort((function(e,t){return e-t}));return{topLeft:{idx:s[0],rowIdx:u[0],groupRecordIndex:c[0]},bottomRight:{idx:s[1],rowIdx:u[1],groupRecordIndex:c[1]}}}(n.state.selectedRange.startCell||n.state.selectedPosition,e),i=a.topLeft,l=a.bottomRight,s=(0,r.A)((0,r.A)({startCell:n.state.selectedPosition},n.state.selectedRange),{},{topLeft:i,bottomRight:l,cursorCell:e});n.setState({selectedRange:s},(function(){(0,h.Tnt)(n.props.onCellRangeSelectionUpdated)&&n.props.onCellRangeSelectionUpdated(n.state.selectedRange),(0,h.Tnt)(o)&&o(n.state.selectedRange)}))}},n.onSelectCellRangeEnded=function(){var e=(0,r.A)((0,r.A)({},n.state.selectedRange),{},{isDragging:!1});n.setState({selectedRange:e},(function(){(0,h.Tnt)(n.props.onCellRangeSelectionCompleted)&&n.props.onCellRangeSelectionCompleted(n.state.selectedRange)}))},n.focus=function(){n.selectionMask&&!n.isFocused()&&n.selectionMask.focus()},n.isFocused=function(){return document.activeElement===n.selectionMask},n.isCellSelected=function(){var e=n.state.selectedPosition;return-1!==e.idx&&-1!==e.rowIdx},n.isCellWithinBounds=function(e){var t=e.idx,r=e.rowIdx,o=n.props,a=o.columns,i=o.recordsCount;return r>=0&&r<i&&t>=0&&t<a.length},n.isSelectedCellEditable=function(){var e=n.props,t=e.enableCellSelect,o=e.columns,a=e.isGroupView,i=e.recordGetterByIndex,l=e.onCheckCellIsEditable,s=function(e){var t=e.enableCellSelect,n=e.selectedPosition,o=e.columns,a=e.isGroupView,i=e.recordGetterByIndex,l=e.onCheckCellIsEditable,s=De({selectedPosition:n,columns:o}),u=Me({selectedPosition:n,isGroupView:a,recordGetterByIndex:i});return!!window.sfMetadataContext.canModifyRow(u)&&(!(0,h.Tnt)(l)||l((0,r.A)({row:u,column:s},n)))&&(0,V.dK)(s,u,t)}({enableCellSelect:t,columns:o,isGroupView:a,recordGetterByIndex:i,selectedPosition:n.state.selectedPosition,onCheckCellIsEditable:l});return s},n.isSelectedCellIsLongText=function(){var e=n.props.columns,t=n.state.selectedPosition,r=De({selectedPosition:t,columns:e});return r&&r.type===h.vZe.LONG_TEXT},n.isGridSelected=function(){return n.isCellWithinBounds(n.state.selectedPosition)},n.getSelectedDimensions=function(e){var t=n.props,o=t.columns,a=t.rowHeight,i=t.isGroupView,l=t.groupOffsetLeft,s=t.getRowTop,u=n.props.getScrollLeft();return(0,r.A)({},function(e){var t=e.selectedPosition,n=e.columns,r=e.rowHeight,o=e.scrollLeft,a=e.isGroupView,i=e.groupOffsetLeft,l=e.getRecordTopFromRecordsBody,s=t.idx,u=t.rowIdx,c=t.groupRecordIndex,d={width:0,left:0,top:0,height:r,zIndex:1};if(s>=0){var f=n&&n[s];if(!f)return d;var p,m=f.frozen,v=f.width,g=m?o+f.left:f.left;return a?(g+=i,p=l(c)+1):p=l(u),{width:v,left:g,top:p,height:r,zIndex:m?h.Mue.dC:h.Mue.OB}}return d}({selectedPosition:e,columns:o,scrollLeft:u,rowHeight:a,isGroupView:i,groupOffsetLeft:l,getRecordTopFromRecordsBody:s}))},n.getSelectedRangeDimensions=function(e){var t=n.props,o=t.columns,a=t.rowHeight,i=t.isGroupView,l=t.groups,s=t.groupMetrics,u=t.groupOffsetLeft,c=t.getRowTop;return(0,r.A)({},function(e){var t=e.selectedRange,n=e.columns,r=e.rowHeight,o=e.isGroupView,a=e.groups,i=e.groupMetrics,l=e.groupOffsetLeft,s=e.getRecordTopFromRecordsBody,u=t.topLeft,c=t.bottomRight,d=t.startCell,f=t.cursorCell;if(u.idx<0)return{width:0,left:0,top:0,height:r,zIndex:h.Mue.OB};var p,m,v=function(e,t,n){for(var r=0,o=!1,a=e;a<=t;a++){var i=n[a];i&&(r+=i.width,o=o||i.frozen)}return{totalWidth:r,anyColFrozen:o,left:n[e].left}}(u.idx,c.idx,n),g=v.totalWidth,y=v.anyColFrozen,C=v.left;if(o){var E,_,A=d.groupRecordIndex,b=f.groupRecordIndex,S=Re(A,i),w=Re(b,i),O=S.groupPathString,R=w.groupPathString;if(A<b?(E=A,_=xe):(E=b,_=Te),O===R)p=(Math.abs(b-A)+1)*r;else if(_===xe){var T=S.groupPath;p=(((0,h.qaV)(T,a).row_ids||[]).length-S.rowIdx||0)*r}else if(_===Te){var x=S.rowIdx||0;E=A-x,p=(x+1)*r}p+=1,C+=l,m=s(E)}else p=(c.rowIdx-u.rowIdx+1)*r,m=s(u.rowIdx);return{width:g,left:C,top:m,height:p,zIndex:y?h.Mue.dC:h.Mue.OB}}({selectedRange:e,columns:o,rowHeight:a,isGroupView:i,groups:l,groupMetrics:s,groupOffsetLeft:u,getRecordTopFromRecordsBody:c}))},n.setScrollLeft=function(e,t){var r=n,o=r.selectionMask,a=r.state.selectedPosition;n.setMaskScrollLeft(o,a,e,t)},n.geHeaderHeight=function(){var e=n.props.table.header_settings||{};return(((0,h.RIy)(e)?h.JlJ.DEFAULT:e.header_height)===h.JlJ.DOUBLE?m.L9:m.jN)+1},n.setMaskScrollLeft=function(e,t,r,o){var a=n.geHeaderHeight();if(e){var i=t.idx,l=t.rowIdx,s=t.groupRecordIndex;if(i>=0&&l>=0){var u=n.props,c=u.columns,d=u.getRowTop,f=u.isGroupView,p=u.groupOffsetLeft,m=c[i];if(!!m.frozen){var h=-o+d(f?s:l)+a,v=m.left;f&&(h+=1,v+=p),e.style.position="fixed",e.style.top=h+"px",e.style.left=v+"px",e.style.transform="none"}}}},n.cancelSetScrollLeft=function(){n.selectionMask&&n.cancelSetMaskScrollLeft(n.selectionMask,n.state.selectedPosition)},n.cancelSetMaskScrollLeft=function(e,t){var r=n.getSelectedDimensions(t),o=r.left,a=r.top;e.style.position="absolute",e.style.top=0,e.style.left=0,e.style.transform="translate(".concat(o,"px, ").concat(a,"px)")},n.getEditorPosition=function(){if(n.selectionMask){var e=n.props.editorPortalTarget,t=n.selectionMask.getBoundingClientRect(),r=t.left,o=t.top;if(e===document.body){var a=document.scrollingElement||document.documentElement;return{left:r+a.scrollLeft,top:o+a.scrollTop}}var i=e.getBoundingClientRect(),l=i.left,s=i.top;return{left:r-l+e.scrollLeft,top:o-s+e.scrollTop}}},n.onCommit=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];n.props.modifyRecord(e),t&&n.closeEditor()},n.onCommitCancel=function(){n.closeEditor()},n.onKeyDown=function(e){var t=e.keyCode;if(Pe(e))n.onPressKeyWithCtrl(e);else if(t===h.cKb.Escape)n.onPressEscape(e);else if(t===h.cKb.Tab)n.onPressTab(e);else if(n.isKeyboardNavigationEvent(e))n.changeCellFromEvent(e);else if(ke(t)||t===h.cKb.Enter)n.openEditor(e);else if(t===h.cKb.Backspace||t===h.cKb.Delete){"rdg-selected"===e.target.className&&(e.preventDefault(),n.handleSelectCellsDelete())}},n.handleSelectCellsDelete=function(){var e=n.props,t=e.isGroupView,r=e.recordGetterByIndex,o=e.columns,a=n.state.selectedRange,i=a.topLeft,l=a.bottomRight,s=Le({selectedRange:a,isGroupView:t,recordGetterByIndex:r}).filter((function(e){return window.sfMetadataContext.canModifyRow(e)}));if(0!==s.length){for(var u=i.idx,c=l.idx,d=[],f=[],p=u;p<=c;p++){var m=o[p];if(!m||h.CJP[m.type]||!window.sfMetadataContext.canModifyColumn(m))break;var v=m.type,g=m.data;d.push(m),v===h.vZe.LINK&&g&&f.push(m)}if(0!==d.length){var y=[],C={},E={},_={},A={},b={},S={};if(s.forEach((function(e){var t=e._id,n={},r={},o={};if(d.forEach((function(t){var o=t.key,a=(0,h.Teq)(e,t);(a||0===a||Array.isArray(a)&&a.length>0)&&(r[o]=a,n[o]=null)})),Object.keys(o).length>0&&(b[t]=o,S[t]={}),Object.keys(n).length>0){y.push(t);var a=Xe(d,n),i=Xe(d,r);C[t]=a,E[t]=n,_[t]=i,A[t]=r}})),y.length>0){n.props.updateRecords({recordIds:y,idRecordUpdates:C,idOriginalRecordUpdates:E,idOldRecordData:_,idOriginalOldRecordData:A,isCopyPaste:!0})}}}},n.onCopySelected=function(){n.onCopyCells()},n.onCopy=function(e){e.preventDefault();var t=n.props.recordMetrics,r=Qe.getSelectedIds(t);if(r.length>0)n.copyRows(e,r);else{var o=window.getSelection().toString();if(!o&&e.target.value){var a=e.target,i=a.selectionStart,l=a.selectionEnd;o=e.target.value.substring(i,l)}o?n.copyText(e,o):n.isCellMaskActive()&&n.onCopyCells(e)}},n.onPaste=function(e){if(n.isCellMaskActive()&&"r"!==window.sfMetadataContext.getPermission()){var t=n.props,r=t.columns,o=t.isGroupView,a=n.state,i=a.selectedPosition,l=a.selectedRange,s=i.idx,u=i.rowIdx;if(-1!==s&&-1!==u){var c=(0,ot.A)(e);if(c){var d=c.type,f=c[m.aG.DTABLE_FRAGMENT],p=0,h=0;if(d===m.aG.DTABLE_FRAGMENT){var v=f.selectedRecordIds,g=f.copiedRange;if(Array.isArray(v)&&v.length>0)p=v.length,h=r.length;else{var y=g.topLeft,C=g.bottomRight,E=y.idx,_=y.rowIdx,A=C.idx;p=C.rowIdx-_+1,h=A-E+1}}else{var b=f.copiedRecords,S=f.copiedColumns;p=b.length,h=S.length}var w=n.isMultiplePaste(p,h);n.props.paste({copied:f,multiplePaste:w,type:d,pasteRange:l,isGroupView:o}),w||n.setPasteRange(p,h)}}}},n.copyText=function(e,t){rt({type:"text",event:e,copiedText:t})},n.copyRows=function(e,t){var r=n.props,o=r.table,a=r.columns,i=r.recordGetterById,l=r.isGroupView,s=r.getCopiedRecordsAndColumnsFromRange,u=t.length;p.A.success(u>1?(0,j.AP)("xxx rows are copied.").replace("xxx",u):(0,j.AP)("1 row is copied."));var c=m.aG.DTABLE_FRAGMENT,d=s({type:c,copied:{selectedRecordIds:t},isGroupView:l}),f=d.copiedRecords,h=d.copiedColumns,v=o._id;rt({type:c,event:e,selectedRecordIds:t,copiedRecords:f,copiedColumns:h,copiedTableId:v,tableData:{columns:a},recordGetterById:i})},n.onCopyCells=function(e){var t=n.props,o=t.table,a=t.columns,i=t.isGroupView,l=t.recordGetterByIndex,s=t.getCopiedRecordsAndColumnsFromRange,u=n.state,c=u.selectedPosition,d=u.selectedRange,f=o._id,h=c.rowIdx,v=c.idx;if(!(h<0||v<0)){var g=d.topLeft,y=d.bottomRight,C=m.aG.DTABLE_FRAGMENT,E=(y.rowIdx-g.rowIdx+1)*(y.idx-g.idx+1);p.A.success(E>1?(0,j.AP)("xxx cells copied").replace("xxx",E):(0,j.AP)("1 cell copied"));var _=s({type:C,copied:{copiedRange:d},isGroupView:i}),A=_.copiedRecords,b=_.copiedColumns;rt({type:C,event:e,copiedRange:(0,r.A)({},d),copiedRecords:A,copiedColumns:b,copiedTableId:f,tableData:{columns:a},isGroupView:i,recordGetterByIndex:l})}},n.isMultiplePaste=function(e,t){var r=n.state.selectedRange,o=r.topLeft,a=r.bottomRight,i=o.idx,l=o.rowIdx,s=a.idx,u=a.rowIdx;return Number.isInteger((s-i+1)/t)&&Number.isInteger((u-l+1)/e)},n.setPasteRange=function(e,t){var o=n.props,a=o.recordsCount,i=o.columns,l=n.state,s=l.selectedPosition,u=l.selectedRange,c=u.topLeft,d=c.idx,f=c.rowIdx,p=i.length,m=s.groupRecordIndex,h=d+t-1,v=f+e-1;h>=p&&(h=p-1),v>=a&&(v=a-1);var g={topLeft:c,startCell:s,bottomRight:{idx:h,rowIdx:v,groupRecordIndex:m},cursorCell:{idx:s.idx,rowIdx:s.rowIdx,groupRecordIndex:m}};return n.setState({selectedRange:(0,r.A)((0,r.A)({},u),g)},(function(){n.focus()})),g},n.onPressKeyWithCtrl=function(){},n.onPressEscape=function(){},n.onPressTab=function(e){n.changeCellFromEvent(e)},n.getLeftInterval=function(){var e=n.props,t=e.isGroupView,r=e.columns,o=e.groupOffsetLeft,a=e.frozenColumnsWidth,i=0;return!!r[0]&&r[0].frozen?(i=o+a,t&&(i+=o)):i=0,i},n.handleVerticalArrowAction=function(e,t){var o=n.props,a=o.isGroupView,i=o.groupMetrics,l=o.rowHeight,s="ArrowDown"===t?1:-1;if(a){for(var u,c=(i.groupRows||[]).length,d=e.groupRecordIndex+s;d>0&&d<c&&(u=Re(d,i)).type!==m.Gi.ROW;)d+=s;if(!u||u.type!==m.Gi.ROW)return;var f,p=n.props.getGroupCanvasScrollTop()||0,h=u,v=h.rowIdx,g=h.top;return g<=p+16?f=g-16:g+150-p>=window.innerHeight-32-16&&(f=g+150-window.innerHeight+32+l+16),void 0!==f&&n.props.setGroupCanvasScrollTop(f),(0,r.A)((0,r.A)({},e),{},{rowIdx:v,groupRecordIndex:d})}return(0,r.A)((0,r.A)({},e),{},{rowIdx:e.rowIdx+s})},n.handleLeftArrowAction=function(e){var t=n.selectionMask;if(t){var o=n.props.columns,a=t.getBoundingClientRect(),i=n.getLeftInterval(),l=o[e.idx-1]?o[e.idx-1].width:0,s=n.props.getTableContentRect(),u=s.left,c=s.right,d=u+130;if(a.x<0||a.x>c)n.props.scrollToColumn(e.idx-1);else if(l>a.x-i-d){var f=l-(a.x-i-d);n.props.setRecordsScrollLeft(n.props.getScrollLeft()-f)}return(0,r.A)((0,r.A)({},e),{},{idx:0===e.idx?0:e.idx-1})}},n.handleRightArrowAction=function(e){var t=n.selectionMask;if(t){var o=n.props.columns,a=t.getBoundingClientRect(),i=e.idx,l=o[i];if(1===i&&!0===l.frozen)n.props.scrollToColumn(1);else{var s=n.props.getTableContentRect().right,u=o[i+1]?o[i+1].width:0;if(a.x<0||a.x>s)n.props.scrollToColumn(i+1);else if(a.x+a.width+u>s){var c=u-(s-a.x-a.width);n.props.setRecordsScrollLeft(n.props.getScrollLeft()+c)}}return(0,r.A)((0,r.A)({},e),{},{idx:e.idx+1})}},n.getKeyNavActionFromEvent=function(e){var t=n.props,r=t.getVisibleIndex,o=t.onHitBottomBoundary,a=t.onHitTopBoundary,i=r(),l=i.rowVisibleStartIdx,s=i.rowVisibleEndIdx,u={ArrowDown:{getNext:function(e){return n.handleVerticalArrowAction(e,"ArrowDown")},isCellAtBoundary:function(e){return e.rowIdx>=s-1},onHitBoundary:o},ArrowUp:{getNext:function(e){return n.handleVerticalArrowAction(e,"ArrowUp")},isCellAtBoundary:function(e){return 0!==e.rowIdx&&e.rowIdx<=l},onHitBoundary:a},ArrowRight:{getNext:function(e){return n.handleRightArrowAction(e)},isCellAtBoundary:function(){return!1}},ArrowLeft:{getNext:function(e){return n.handleLeftArrowAction(e)},isCellAtBoundary:function(){return!1}}};return e.keyCode===h.cKb.Tab?!0===e.shiftKey?u.ArrowLeft:u.ArrowRight:u[e.key]},n.changeCellFromEvent=function(e){if(e.preventDefault(),(e.keyCode!==h.cKb.ChineseInputMethod||!n.state.isEditorEnabled)&&!n.throttle){var t=n.state.selectedPosition,o=n.getKeyNavActionFromEvent(e),a=o.getNext(t);a&&(n.checkIsAtGridBoundary(o,a),n.props.onCellClick(a),n.onSelectCell((0,r.A)({},a)),n.throttle=!0,setTimeout((function(){n.throttle=!1}),30))}},n.onFocus=function(){},n.onScroll=function(e){e.stopPropagation()},n.setSelectionMaskRef=function(e){n.selectionMask=e},n.setSelectionRangeMaskRef=function(e){n.selectedRangeMask=e},n.setContainerRef=function(e){n.container=e},n.isCellMaskActive=function(){var e=document.activeElement;return e&&("cell-mask"===e.getAttribute("data-test")||"active-editor"===e.getAttribute("data-test"))},n.handleDragCopy=function(e){var t=n.props,o=t.columns,a=t.groupMetrics,i=t.table,l=i.rows,s=i.id_row_map,u=t.gridUtils,c=t.updateRecords,d=u.getUpdateDraggedRecords(e,o,l,s,a);c((0,r.A)((0,r.A)({},d),{},{isCopyPaste:!0}))},n.handleDragStart=function(e){var t=n.state.selectedRange,r=t.topLeft,o=t.bottomRight,a=t.startCell,i=t.cursorCell,l=e&&e.target&&e.target.className;if(r.idx>-1&&l){try{e.dataTransfer.setData("text/plain","")}catch(s){e.dataTransfer.setData("text","")}n.setState({draggedRange:{topLeft:r,bottomRight:o,startCell:a,cursorCell:i}})}},n.handleDragEnter=function(e){var t=e.overRecordIdx,o=e.overGroupRecordIndex;null!=n.state.draggedRange&&n.setState((function(e){var n=e.draggedRange;return{draggedRange:(0,r.A)((0,r.A)({},n),{},{overRecordIdx:t,overGroupRecordIndex:o})}}))},n.handleDragEnd=function(){var e=n.state,t=e.draggedRange,r=e.selectedRange,o=Ee()(r);if(null!==t){var a=t.overRecordIdx,i=t.overGroupRecordIndex,l=t.bottomRight;null!==a&&l.rowIdx<a&&(n.handleDragCopy(t),o.bottomRight.rowIdx=a,o.cursorCell.rowIdx=a,o.bottomRight.groupRecordIndex=i,o.cursorCell.groupRecordIndex=i),n.setState({draggedRange:null,selectedRange:o})}},n.renderSingleCellSelectView=function(){var e=n.props.columns,t=n.state,o=t.isEditorEnabled,a=t.selectedPosition,i=n.isSelectedCellEditable(),s=window.sfMetadataContext.canModifyRows(),u=i&&s,c=(De({selectedPosition:a,columns:e})||{}).type;if(o&&c!==h.vZe.RATE&&c!==h.vZe.CHECKBOX&&c!==h.vZe.FILE_NAME)return null;if(!n.isGridSelected())return null;var d={innerRef:n.setSelectionMaskRef,selectedPosition:a,getSelectedDimensions:n.getSelectedDimensions};return(0,l.jsx)(Ge,(0,r.A)((0,r.A)({},d),{},{children:u&&(0,l.jsx)(it,{onDragStart:n.handleDragStart,onDragEnd:n.handleDragEnd})}))},n.renderCellRangeSelectView=function(){var e=n.state.selectedRange,t=n.props,r=t.columns,o=t.rowHeight,a=n.isSelectedCellEditable(),i=window.sfMetadataContext.canModifyRows(),s=a&&i;return[(0,l.jsx)(He,{innerRef:n.setSelectionRangeMaskRef,selectedRange:e,columns:r,rowHeight:o,getSelectedRangeDimensions:n.getSelectedRangeDimensions,children:s&&(0,l.jsx)(it,{onDragStart:n.handleDragStart,onDragEnd:n.handleDragEnd})},"range-mask"),(0,l.jsx)(Ge,{innerRef:n.setSelectionMaskRef,selectedPosition:e.startCell,getSelectedDimensions:n.getSelectedDimensions},"selection-mask")]};var o={idx:-1,rowIdx:-1,groupRecordIndex:-1};return n.state={selectedPosition:o,selectedRange:{topLeft:o,bottomRight:o,startCell:null,cursorCell:null,isDragging:!1},draggedRange:null,isEditorEnabled:!1,openEditorMode:""},n.selectionMask=null,n}return(0,A.A)(t,e),(0,E.A)(t,[{key:"componentDidMount",value:function(){var e=window.sfMetadataContext.eventBus;this.unsubscribeSelectColumn=e.subscribe(m.Tw.SELECT_COLUMN,this.onColumnSelect),this.unsubscribeDragEnter=e.subscribe(m.Tw.DRAG_ENTER,this.handleDragEnter),this.unsubscribeSelectCell=e.subscribe(m.Tw.SELECT_CELL,this.onSelectCell),this.unsubscribeSelectNone=e.subscribe(m.Tw.SELECT_NONE,this.selectNone),this.unsubscribeSelectStart=e.subscribe(m.Tw.SELECT_START,this.onSelectCellRangeStarted),this.unsubscribeSelectUpdate=e.subscribe(m.Tw.SELECT_UPDATE,this.onSelectCellRangeUpdated),this.unsubscribeSelectEnd=e.subscribe(m.Tw.SELECT_END,this.onSelectCellRangeEnded),this.unsubscribeOpenEditorEvent=e.subscribe(m.Tw.OPEN_EDITOR,this.onOpenEditorEvent),this.unsubscribeCloseEditorEvent=e.subscribe(m.Tw.CLOSE_EDITOR,this.onCloseEditorEvent),this.unsubscribeCopy=e.subscribe(m.Tw.COPY_CELLS,this.onCopy),this.unsubscribePaste=e.subscribe(m.Tw.PASTE_CELLS,this.onPaste)}},{key:"componentDidUpdate",value:function(e,t){var n=this.state,r=n.selectedRange,o=n.isEditorEnabled,a=t.selectedRange,i=o!==t.isEditorEnabled&&!o;(r!==a&&(r.topLeft!==a.topLeft||r.bottomRight!==a.bottomRight)||i)&&this.focus()}},{key:"componentWillUnmount",value:function(){this.unsubscribeSelectColumn(),this.unsubscribeSelectCell(),this.unsubscribeSelectStart(),this.unsubscribeSelectUpdate(),this.unsubscribeSelectEnd(),this.unsubscribeOpenEditorEvent(),this.unsubscribeCloseEditorEvent(),this.unsubscribeCopy(),this.unsubscribePaste(),this.setState=function(e,t){}}},{key:"createSingleCellSelectedRange",value:function(e,t){return{topLeft:e,bottomRight:e,startCell:e,cursorCell:e,isDragging:t}}},{key:"isKeyboardNavigationEvent",value:function(e){return null!=this.getKeyNavActionFromEvent(e)}},{key:"checkIsAtGridBoundary",value:function(e,t){var n=e.isCellAtBoundary,r=e.onHitBoundary;n(t)&&r(t)}},{key:"render",value:function(){var e=this.state,t=e.selectedRange,n=e.isEditorEnabled,a=e.draggedRange,i=e.selectedPosition,s=e.firstEditorKeyDown,u=e.openEditorMode,c=e.editorPosition,d=this.props,f=d.table,p=d.columns,m=d.isGroupView,h=d.recordGetterByIndex,v=d.scrollTop,g=d.getScrollLeft,y=d.editorPortalTarget,C=d.contextMenu,E=d.recordMetrics,_=function(e){var t=e.topLeft,n=e.bottomRight;return t.idx===n.idx&&t.rowIdx===n.rowIdx}(t);return(0,l.jsxs)("div",{className:"interaction-mask",ref:this.setContainerRef,onKeyDown:this.onKeyDown,onFocus:this.onFocus,onScroll:this.onScroll,tabIndex:0,"aria-hidden":"true",children:[a&&(0,l.jsx)(at,{draggedRange:a,getSelectedDimensions:this.getSelectedDimensions,getSelectedRangeDimensions:this.getSelectedRangeDimensions}),_?this.renderSingleCellSelectView():this.renderCellRangeSelectView(),n&&(0,l.jsx)(st,{target:y,children:(0,l.jsx)(Vt,(0,r.A)({table:f,columns:p,scrollTop:v,firstEditorKeyDown:s,openEditorMode:u,portalTarget:y,scrollLeft:g(),record:Me({selectedPosition:i,isGroupView:m,recordGetterByIndex:h}),column:De({selectedPosition:i,columns:p}),value:Ie({selectedPosition:i,columns:p,isGroupView:m,recordGetterByIndex:h}),onCommit:this.onCommit,onCommitCancel:this.onCommitCancel,modifyColumnData:this.props.modifyColumnData,editorPosition:c},(0,r.A)((0,r.A)({},this.getSelectedDimensions(i)),this.state.editorPosition)))}),(0,o.isValidElement)(C)&&(0,o.cloneElement)(C,{recordMetrics:E,selectedPosition:_?i:null,selectedRange:_?null:t,onClearSelected:this.handleSelectCellsDelete,onCopySelected:this.onCopySelected,getTableContentRect:this.props.getTableContentRect,getTableCanvasContainerRect:this.props.getTableCanvasContainerRect})]})}}])}(o.Component);Xt.defaultProps={enableCellSelect:!0,isGroupView:!1,groupOffsetLeft:0};var Wt=Xt,Kt=function(e,t,n){var r=0,o=0,a=$t(e,t);if(!a)return null;for(var l=0;l<t;l++){var s=$t(e,l);s&&(s.width&&(r+=s.width),(0,V.Zz)(s)&&(o+=s.width))}return i.Fr?r-(n-a.width)/2:r-o},$t=function(e,t){return Array.isArray(e)?e[t]:"undefined"!==typeof Immutable?e.get(t):void 0},qt=function(e,t){for(var n=t,r=0;r<e.length;r++){if((n-=e[r].width)<0)return r}},Qt=function(e,t,n){for(var r=t+n,o=0;o<e.length;o++){if((r-=e[o].width)<0)return o-1-1}return e.length-1},Jt=33,en=window.innerHeight-174,tn=Math.max,nn=Math.min,rn=Math.ceil,on=Math.round,an=function(e){function t(e){var n;return(0,C.A)(this,t),(n=(0,_.A)(this,t,[e])).getVisibleIndex=function(){return{rowVisibleStartIdx:n.rowVisibleStart,rowVisibleEndIdx:n.rowVisibleEnd}},n.getShownRecords=function(){return n.getShownRecordIds().map((function(e){return n.props.recordGetterById(e)}))},n.setRecordVisibleEnd=function(){return tn(rn(en/Jt),0)},n.setColumnVisibleEnd=function(){for(var e=n.props,t=e.columns,r=e.getScrollLeft,o=0,a=(0,e.getTableContentRect)().width+r(),i=0;i<t.length;i++){if((a-=t[i].width)<0)return i}return o},n.recalculateRenderIndex=function(e){var t=n.state,r=t.startRenderIndex,o=t.endRenderIndex,a=n.resultContentRef.scrollTop,i=Math.max(0,Math.floor(a/Jt)-10),l=n.props.getTableContentRect().height,s=Math.min(Math.ceil((a+l)/Jt)+10,e.length);i!==r&&n.setState({startRenderIndex:i}),s!==o&&n.setState({endRenderIndex:s})},n.getInitEndIndex=function(e){return Math.min(Math.ceil(window.innerHeight/Jt)+10,e.recordsCount)},n.getShownRecordIds=function(){var e=n.props.recordIds,t=n.state,r=t.startRenderIndex,o=t.endRenderIndex;return e.slice(r,o)},n.getRowTop=function(e){return Jt*e},n.getRowHeight=function(){return Jt},n.jumpToRow=function(e){var t=n.props.recordsCount,r=n.getRowHeight(),o=n.resultContentRef.offsetHeight,a=Math.min(e*r,t*r-o);n.setScrollTop(a)},n.scrollToColumn=function(e){var t=n.props,r=t.columns,o=(0,t.getTableContentRect)().width,a=Kt(r,e,o);null!==a&&n.props.setRecordsScrollLeft(a),n.updateColVisibleIndex(a)},n.updateColVisibleIndex=function(e){var t=n.props.columns,r=qt(t,e),o=Qt(t,window.innerWidth,e);n.columnVisibleStart=r,n.columnVisibleEnd=o},n.setScrollTop=function(e){n.resultContentRef.scrollTop=e},n.setScrollLeft=function(e,t){var r=n.interactionMask;r&&r.setScrollLeft(e,t)},n.cancelSetScrollLeft=function(){var e=n.interactionMask;e&&e.cancelSetScrollLeft()},n.getClientScrollTopOffset=function(e){var t=n.getRowHeight(),r=e.scrollTop%t;return r>0?t-r:0},n.onHitBottomCanvas=function(){var e=n.getRowHeight(),t=n.resultContentRef;t.scrollTop+=e+n.getClientScrollTopOffset(t)},n.onHitTopCanvas=function(){var e=n.getRowHeight(),t=n.resultContentRef;t.scrollTop-=e-n.getClientScrollTopOffset(t)},n.getScrollTop=function(){return n.resultContentRef?n.resultContentRef.scrollTop:0},n.getRecordBodyHeight=function(){return n.resultContentRef?n.resultContentRef.offsetHeight:0},n.onScroll=function(){var e=n.props.recordsCount,t=n.state,r=t.startRenderIndex,o=t.endRenderIndex,a=n.resultContentRef,i=a.offsetHeight,l=a.scrollTop,s=Math.max(0,Math.floor(l/Jt)-10),u=Math.min(Math.ceil((l+n.resultContentRef.offsetHeight)/Jt)+10,e);n.oldScrollTop=l;var c=rn(n.resultContentRef.offsetHeight/Jt),d=tn(0,on(l/Jt)),f=nn(d+c,e);n.rowVisibleStart=d,n.rowVisibleEnd=f,n.props.cacheScrollTop(l),(Math.abs(s-r)>5||s<5)&&n.setState({startRenderIndex:s}),(Math.abs(u-o)>5||u>e-5)&&n.setState({endRenderIndex:u}),i+l>=n.resultContentRef.scrollHeight&&n.props.scrollToLoadMore(),n.isScrollingRightScrollbar||n.setRightScrollbarScrollTop(n.oldScrollTop),n.clearScrollbarTimer(),n.scrollbarTimer=setTimeout((function(){n.setState({isScrollingRightScrollbar:!1})}),300)},n.onScrollbarScroll=function(e){n.oldScrollTop!==e&&n.setState({isScrollingRightScrollbar:!0},(function(){n.setScrollTop(e)}))},n.onScrollbarMouseUp=function(){n.setState({isScrollingRightScrollbar:!1})},n.setRightScrollbarScrollTop=function(e){n.rightScrollbar&&n.rightScrollbar.setScrollTop(e)},n.selectNoneCells=function(){n.interactionMask&&n.interactionMask.selectNone();var e=n.state.selectedPosition;!e||e.idx<0||e.rowIdx<0||n.selectNone()},n.selectNone=function(){n.setState({selectedPosition:{idx:-1,rowIdx:-1}})},n.selectCell=function(e,t){window.sfMetadataContext.eventBus.dispatch(m.Tw.SELECT_CELL,e,t)},n.selectStart=function(e){window.sfMetadataContext.eventBus.dispatch(m.Tw.SELECT_START,e)},n.selectUpdate=function(e,t,n){window.sfMetadataContext.eventBus.dispatch(m.Tw.SELECT_UPDATE,e,t,n)},n.selectEnd=function(){window.sfMetadataContext.eventBus.dispatch(m.Tw.SELECT_END)},n.onCellClick=function(e,t){var r=n.state.selectedPosition;if(Fe(t)){if(!r||-1===r.idx)return void n.selectCell(e,!1);n.selectUpdate(e,!0)}else{var o=n.props.columns,a=(0,V.Hs)(e,o),i=Ne(e,o,!1,n.props.recordGetterByIndex);n.selectCell(e,a&&i)}n.props.onCellClick(e),n.setState({selectedPosition:e})},n.onCellDoubleClick=function(e,t){var r=n.props.columns,o=(0,V.wo)(e,r),a=Ne(e,r,!1,n.props.recordGetterByIndex);n.selectCell(e,o&&a)},n.onCellMouseDown=function(e,t){Fe(t)||(n.selectCell(e),n.selectStart(e),window.addEventListener("mouseup",n.onWindowMouseUp))},n.onCellMouseEnter=function(e){n.selectUpdate(e,!1,n.updateViewableArea)},n.onCellMouseMove=function(e){n.selectUpdate(e,!1,n.updateViewableArea)},n.onWindowMouseUp=function(e){window.removeEventListener("mouseup",n.onWindowMouseUp),Fe(e)||(n.selectEnd(),n.clearHorizontalScroll())},n.onCellRangeSelectionUpdated=function(e){n.props.onCellRangeSelectionUpdated(e)},n.onCellContextMenu=function(e){n.props.onCellContextMenu(e)},n.updateViewableArea=function(e){var t=e.cursorCell.mousePosition,r=t.x,o=t.y,a=100;if(r+a>window.innerWidth)n.scrollToRight();else if(r-a<m.sN+n.props.frozenColumnsWidth)n.scrollToLeft();else if(o+a>window.innerHeight-130){var i=n.getScrollTop();n.resultContentRef.scrollTop=i+8,n.clearHorizontalScroll()}else if(o-a<130){var l=n.getScrollTop();l-16>=0&&(n.resultContentRef.scrollTop=l-8),n.clearHorizontalScroll()}else n.clearHorizontalScroll()},n.scrollToRight=function(){n.timer||(n.timer=setInterval((function(){var e=n.props.getScrollLeft();n.props.setRecordsScrollLeft(e+20)}),10))},n.scrollToLeft=function(){n.timer||(n.timer=setInterval((function(){var e=n.props.getScrollLeft();e<=0?n.clearHorizontalScroll():n.props.setRecordsScrollLeft(e-20)}),10))},n.clearHorizontalScroll=function(){n.timer&&(clearInterval(n.timer),n.timer=null)},n.clearScrollbarTimer=function(){n.scrollbarTimer&&(clearTimeout(n.scrollbarTimer),n.scrollbarTimer=null)},n.getCellMetaData=function(){return n.cellMetaData||(n.cellMetaData={onCellClick:n.onCellClick,onCellDoubleClick:n.onCellDoubleClick,onCellMouseDown:n.onCellMouseDown,onCellMouseEnter:n.onCellMouseEnter,onCellMouseMove:n.onCellMouseMove,onDragEnter:n.handleDragEnter,modifyRecord:n.props.modifyRecord,onCellContextMenu:n.onCellContextMenu}),n.cellMetaData},n.handleDragEnter=function(e){var t=e.overRecordIdx,n=e.overGroupRecordIndex;window.sfMetadataContext.eventBus.dispatch(m.Tw.DRAG_ENTER,{overRecordIdx:t,overGroupRecordIndex:n})},n.setRightScrollbar=function(e){n.rightScrollbar=e},n.setInteractionMaskRef=function(e){n.interactionMask=e},n.setResultRef=function(e){n.resultRef=e},n.setResultContentRef=function(e){n.resultContentRef=e},n.renderRecords=function(){n.recordFrozenRefs=[];var e=n.props,t=e.recordsCount,r=e.columns,o=e.colOverScanStartIdx,a=e.colOverScanEndIdx,i=e.lastFrozenColumnKey,u=e.recordMetrics,c=e.showCellColoring,d=e.columnColors,f=n.state,p=f.startRenderIndex,m=f.endRenderIndex,h=f.selectedPosition,v=n.getCellMetaData(),g=t-1,y=n.getShownRecordIds(),C=n.props.getScrollLeft(),E=n.getRowHeight(),_=y.map((function(e,t){var s=n.props.recordGetterById(e),f=Qe.isRecordSelected(e,u),m=p+t,y=g===m,_=n.props.hasSelectedCell({recordIndex:m},h),A=c?d[e]:{};return(0,l.jsx)(ye,{ref:function(e){n.recordFrozenRefs.push(e)},isSelected:f,index:m,isLastRecord:y,record:s,columns:r,colOverScanStartIdx:o,colOverScanEndIdx:a,lastFrozenColumnKey:i,scrollLeft:C,height:E,cellMetaData:v,hasSelectedCell:_,selectedPosition:n.state.selectedPosition,selectNoneCells:n.selectNoneCells,onSelectRecord:n.props.onSelectRecord,modifyRecord:n.props.modifyRecord,searchResult:n.props.searchResult,columnColor:A},e||m)})),A=p*Jt,b=(t-m)*Jt;if(A>0){var S={height:A,width:"100%"},w=(0,l.jsx)("div",{className:"d-flex align-items-end",style:S,children:(0,l.jsx)(s.Rh,{})},"upper-placeholder");_.unshift(w)}if(b>0){var O={height:b,width:"100%"},R=(0,l.jsx)("div",{style:O,children:(0,l.jsx)(s.Rh,{})},"below-placeholder");_.push(R)}return _},n.state={startRenderIndex:0,endRenderIndex:n.getInitEndIndex(e),activeRecords:[],menuPosition:null,selectedPosition:null,isScrollingRightScrollbar:!1},n.resultContentRef=null,n.resultRef=null,n.recordFrozenRefs=[],n.rowVisibleStart=0,n.rowVisibleEnd=n.setRecordVisibleEnd(),n.columnVisibleStart=0,n.columnVisibleEnd=n.setColumnVisibleEnd(),n.timer=null,n}return(0,A.A)(t,e),(0,E.A)(t,[{key:"componentDidMount",value:function(){this.props.onRef(this),window.sfMetadataBody=this}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=e.recordsCount,n=e.recordIds;t===this.props.recordsCount&&n===this.props.recordIds||this.recalculateRenderIndex(n)}},{key:"componentWillUnmount",value:function(){this.clearHorizontalScroll(),this.clearScrollbarTimer(),this.setState=function(e,t){}}},{key:"render",value:function(){return(0,l.jsxs)(o.Fragment,{children:[(0,l.jsxs)("div",{id:"canvas",className:"sf-metadata-result-table-content",ref:this.setResultContentRef,onScroll:this.onScroll,children:[(0,l.jsx)(Wt,{ref:this.setInteractionMaskRef,contextMenu:this.props.contextMenu,canAddRow:this.props.canAddRow,table:this.props.table,columns:this.props.columns,recordsCount:this.props.recordsCount,recordMetrics:this.props.recordMetrics,rowHeight:this.getRowHeight(),getRowTop:this.getRowTop,scrollTop:this.oldScrollTop,getScrollLeft:this.props.getScrollLeft,getTableContentRect:this.props.getTableContentRect,getMobileFloatIconStyle:this.props.getMobileFloatIconStyle,onToggleMobileMoreOperations:this.props.onToggleMobileMoreOperations,editorPortalTarget:this.props.editorPortalTarget,onCellRangeSelectionUpdated:this.onCellRangeSelectionUpdated,modifyRecord:this.props.modifyRecord,recordGetterByIndex:this.props.recordGetterByIndex,recordGetterById:this.props.recordGetterById,updateRecords:this.props.updateRecords,paste:this.props.paste,editMobileCell:this.props.editMobileCell,frozenColumnsWidth:this.props.frozenColumnsWidth,selectNone:this.selectNone,getVisibleIndex:this.getVisibleIndex,onHitBottomBoundary:this.onHitBottomCanvas,onHitTopBoundary:this.onHitTopCanvas,onCellClick:this.onCellClick,scrollToColumn:this.scrollToColumn,setRecordsScrollLeft:this.props.setRecordsScrollLeft,gridUtils:this.props.gridUtils,getCopiedRecordsAndColumnsFromRange:this.props.getCopiedRecordsAndColumnsFromRange,modifyColumnData:this.props.modifyColumnData,getTableCanvasContainerRect:this.props.getTableCanvasContainerRect}),(0,l.jsx)("div",{className:"sf-metadata-result-table",style:{width:this.props.totalWidth+m.sN},ref:this.setResultRef,children:this.renderRecords()})]}),(0,l.jsx)(Q,{table:this.props.table,ref:this.setRightScrollbar,onScrollbarScroll:this.onScrollbarScroll,onScrollbarMouseUp:this.onScrollbarMouseUp})]})}}])}(o.Component);an.defaultProps={editorPortalTarget:document.body,scrollToRowIndex:0};var ln=an,sn=function(e){var t=e.column,n=e.cellValue,r=e.originalCellValue,a=(0,o.useMemo)((function(){return"(".concat((0,i.AP)("Empty"),")")}),[]),u=(0,o.useMemo)((function(){return(0,i.AP)("Deleted option")}),[]),c=(0,o.useCallback)((function(){switch(t.type){case h.vZe.CREATOR:case h.vZe.LAST_MODIFIER:return r?(0,l.jsx)(le,{value:r,field:t}):a;case h.vZe.NUMBER:return n||0===n?n:a;case h.vZe.COLLABORATOR:return Array.isArray(n)&&0!==n.length?(0,l.jsx)(le,{value:n,field:t}):a;case h.vZe.CHECKBOX:return(0,l.jsx)("input",{className:"checkbox",type:"checkbox",readOnly:!0,checked:n});case h.vZe.SINGLE_SELECT:var e=(0,h.FiT)(t);if(0===e.length||!r)return a;var o=(0,h.om8)(e,r),i=o?{backgroundColor:o.color,color:o.textColor}:{backgroundColor:m.lX},c=o?o.name:u;return(0,l.jsx)("div",{className:"sf-metadata-single-select-option",style:i,title:c,children:c},n);case h.vZe.MULTIPLE_SELECT:var d=(0,h.FiT)(t);if(0===d.length||!Array.isArray(r)||0===r.length)return a;var f=d.filter((function(e){return r.includes(e.id)||r.includes(e.name)})),p=r.filter((function(e){return e&&!d.find((function(t){return t.id===e||t.name===e}))})).map((function(e){return{id:e,name:u,color:m.lX}}));return(0,l.jsxs)(l.Fragment,{children:[f.map((function(e){var t={backgroundColor:e.color,color:e.textColor};return(0,l.jsx)("div",{className:"sf-metadata-multiple-select-option",style:t,title:e.name,children:e.name},e.id)})),p.map((function(e){var t={backgroundColor:e.color};return(0,l.jsx)("div",{className:"sf-metadata-multiple-select-option",style:t,title:e.name,children:e.name},e.id)}))]});case h.vZe.RATE:var v=t.data||{},g=v.color,y=v.type||"rate";if(!n||!g)return a;for(var C=[],E=0;E<n;E++)C.push((0,l.jsx)(s.Oi,{style:{fill:g,height:16,width:16},iconName:y,className:"sf-metadata-group-title-rate-item"},E));return C;default:return n||a}}),[t,n,r,a,u]);return(0,l.jsxs)("div",{className:"group-title",children:[(0,l.jsx)("div",{className:"group-column-name",children:t.name}),(0,l.jsx)("div",{className:"group-cell-value",children:c()})]})},un=function(e){function t(){return(0,C.A)(this,t),(0,_.A)(this,t,arguments)}return(0,A.A)(t,e),(0,E.A)(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.isExpanded,r=t.firstColumnFrozen,o=t.lastColumnFrozen,a=t.firstColumnKey,u=t.maxLevel,c=t.group,d=t.width,f=c.column,p=c.count,v=c.level,g=c.cell_value,C=c.original_cell_value,E={zIndex:r&&h.Mue.dg,height:m.q$,width:d};return(0,l.jsxs)("div",{ref:function(t){return e.groupHeaderLeft=t},className:y()("group-header-left group-header-cell",{"table-last--frozen":o}),style:E,"data-column_key":a,children:[(0,l.jsx)(s.Oi,{className:y()("group-toggle-btn",{hide:!n}),iconName:"drop-down",onClick:this.props.onExpandGroupToggle}),(0,l.jsx)(sn,{column:f||{},originalCellValue:C,cellValue:g}),(0,l.jsx)("div",{className:"group-rows-count",children:(0,l.jsxs)("div",{className:"group-rows-count-content",children:[v===u&&(0,l.jsx)("span",{className:"count-title",children:(0,i.AP)("Count")}),(0,l.jsx)("span",{className:"count-num",children:p})]})})]})}}])}(o.Component),cn=un,dn=function(e){function t(){var e;(0,C.A)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=(0,_.A)(this,t,[].concat(r))).fixedFrozenDOMs=function(t,n){e.leftContainer&&(e.leftContainer.style.position="fixed",e.leftContainer.style.marginLeft="0px",e.leftContainer.style.marginTop=-n+"px")},e.setContainerRef=function(t){e.leftContainer=t},e.cancelFixFrozenDOMs=function(t){e.leftContainer&&(e.leftContainer.style.position="absolute",e.leftContainer.style.marginLeft=t+"px",e.leftContainer.style.marginTop="0px")},e}return(0,A.A)(t,e),(0,E.A)(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.isExpanded,r=t.maxLevel,o=t.group,a=t.formulaRow,i=t.leftPaneWidth,s=t.height,u=t.firstColumnFrozen,c=t.lastColumnFrozen,d=t.firstColumnKey,f={zIndex:u?h.Mue.dg:0,width:i,height:s};return(0,l.jsx)("div",{className:"group-container group-container-left",style:f,ref:this.setContainerRef,children:(0,l.jsx)(cn,{ref:function(t){return e.leftHeader=t},isExpanded:n,firstColumnFrozen:u,lastColumnFrozen:c,firstColumnKey:d,width:i,maxLevel:r,group:o,formulaRow:a,onExpandGroupToggle:this.props.onExpandGroupToggle})})}}])}(o.Component),fn=dn,pn=function(e){function t(){var e;(0,C.A)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=(0,_.A)(this,t,[].concat(r))).fixedFrozenDOMs=function(t,n){if(e.headerCell){var r=e.props,o=r.firstColumnWidth,a=r.groupOffsetLeft;e.headerCell.style.position="fixed",e.headerCell.style.marginLeft=m.sN+o+a+"px",e.headerCell.style.marginTop=-n+"px"}},e.cancelFixFrozenDOMs=function(t){e.headerCell&&(e.headerCell.style.position="absolute",e.headerCell.style.marginLeft=t+"px",e.headerCell.style.marginTop=0)},e.getStyle=function(){var t=e.props,n=t.offsetLeft,r=t.column,o=t.isExpanded,a={position:"absolute",width:r.width,height:m.q$-(o?1:2),left:n};return(0,V.Zz)(r)&&(a.zIndex=h.Mue.dg),a},e}return(0,A.A)(t,e),(0,E.A)(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.column,r=t.isLastFrozenColumn;return(0,l.jsx)("div",{ref:function(t){return e.headerCell=t},className:y()("summary-item group-header-cell",{"table-last--frozen":r}),style:this.getStyle(),"data-column_key":n.key})}}])}(o.PureComponent),mn=pn,hn=function(e){function t(){var e;(0,C.A)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=(0,_.A)(this,t,[].concat(r))).headerCells={},e.setHeaderCellRef=function(t){return function(n){e.headerCells[t]=n}},e.fixedFrozenDOMs=function(t,n){e.props.columns.forEach((function(r){var o=e.headerCells[r.key];(0,V.Zz)(r)&&o&&o.fixedFrozenDOMs(t,n)}))},e.cancelFixFrozenDOMs=function(t){e.props.columns.forEach((function(n){var r=e.headerCells[n.key];(0,V.Zz)(n)&&r&&r.cancelFixFrozenDOMs(t)}))},e.getGroupSummaries=function(){var t=e.props,n=t.group,r=t.isExpanded,o=t.columns,a=t.groupOffsetLeft,i=t.lastFrozenColumnKey,s=t.summaryConfigs,u=o.slice(1),c=o[0]?o[0].width:0,d=0;return u.map((function(t,o){var f=t.key,p=s&&s[f]?s[f]:"Sum",m=n.summaries[f];return 0!==o&&(d+=u[o-1].width),(0,l.jsx)(mn,{ref:e.setHeaderCellRef(f),firstColumnWidth:c,groupOffsetLeft:a,isLastFrozenColumn:f===i,offsetLeft:d,column:t,isExpanded:r,summary:m,summaryMethod:p},f)}))},e}return(0,A.A)(t,e),(0,E.A)(t,[{key:"render",value:function(){return(0,l.jsx)("div",{className:"group-header-right",style:{height:m.q$},children:this.getGroupSummaries()})}}])}(o.Component),vn=hn,gn=function(e){function t(){var e;(0,C.A)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=(0,_.A)(this,t,[].concat(r))).fixedFrozenDOMs=function(t,n){e.rightHeader&&e.rightHeader.fixedFrozenDOMs(t,n)},e.cancelFixFrozenDOMs=function(t){e.rightHeader&&e.rightHeader.cancelFixFrozenDOMs(t)},e}return(0,A.A)(t,e),(0,E.A)(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.group,r=t.isExpanded,o=t.columns,a=t.summaryConfigs,i=t.rightPaneWidth,s=t.leftPaneWidth,u=t.height,c=t.groupOffsetLeft,d=t.lastFrozenColumnKey,f={left:s,width:i,height:u};return(0,l.jsx)("div",{className:"group-container group-container-right",style:f,children:(0,l.jsx)(vn,{ref:function(t){return e.rightHeader=t},groupOffsetLeft:c,lastFrozenColumnKey:d,group:n,isExpanded:r,columns:o,summaryConfigs:a})})}}])}(o.Component),yn=gn,Cn=function(e){function t(){var e;(0,C.A)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=(0,_.A)(this,t,[].concat(r))).fixedFrozenDOMs=function(t,n){e.backDrop&&(e.backDrop.style.position="fixed",e.backDrop.style.marginLeft="0px",e.backDrop.style.marginTop=-n+"px"),e.leftContainer&&e.leftContainer.fixedFrozenDOMs(t,n),e.rightContainer&&e.rightContainer.fixedFrozenDOMs(t,n)},e.cancelFixFrozenDOMs=function(t){e.backDrop&&(e.backDrop.style.position="absolute",e.backDrop.style.marginLeft=t-m.ax+"px",e.backDrop.style.marginTop="0px"),e.leftContainer&&e.leftContainer.cancelFixFrozenDOMs(t),e.rightContainer&&e.rightContainer.cancelFixFrozenDOMs(t)},e.setContainer=function(t){e.group=t},e.setBackDrop=function(t){e.backDrop=t},e.onExpandGroupToggle=function(){var t=e.props.groupPathString;e.props.onExpandGroupToggle(t)},e}return(0,A.A)(t,e),(0,E.A)(t,[{key:"shouldComponentUpdate",value:function(e){return e.groupPathString!==this.props.groupPathString||e.group!==this.props.group||e.width!==this.props.width||e.height!==this.props.height||e.top!==this.props.top||e.columns!==this.props.columns||e.rowHeight!==this.props.rowHeight||e.isExpanded!==this.props.isExpanded||e.scrollLeft!==this.props.scrollLeft||e.lastFrozenColumnKey!==this.props.lastFrozenColumnKey||e.summaryConfigs!==this.props.summaryConfigs}},{key:"componentDidMount",value:function(){this.props.lastFrozenColumnKey&&!i.Fr&&this.checkScroll()}},{key:"checkScroll",value:function(){var e=this.props.scrollLeft;this.cancelFixFrozenDOMs(e)}},{key:"render",value:function(){var e=this,t=this.props,n=t.group,r=t.columns,o=t.width,a=t.isExpanded,i=t.folding,s=t.summaryConfigs,u=t.height,c=t.backdropHeight,d=t.top,f=t.groupOffsetLeft,p=t.lastFrozenColumnKey,v=t.maxLevel,g=n.left,C=n.level,E=1===C,_=y()("group-item","group-level-".concat(C),a?"expanded-group":"folded-group",i?"folding":""),A=r[0]||{},b=(0,V.Zz)(A),S=A.width||0,w=m.sN+S+(E?0:(C-1)*m.ax-1),O=o-w,R={height:u,width:o,top:d,left:g},T={height:c,width:w+m.ax,zIndex:h.Mue.rW};return(0,l.jsxs)("div",{className:_,ref:this.setContainer,style:R,children:[C===v&&b&&(0,l.jsx)("div",{className:"group-backdrop",ref:this.setBackDrop,style:T}),(0,l.jsx)(fn,{ref:function(t){return e.leftContainer=t},group:n,firstColumnFrozen:b,lastColumnFrozen:A.key===p,leftPaneWidth:w,height:u,isExpanded:a,firstColumnKey:A.key,maxLevel:v,onExpandGroupToggle:this.onExpandGroupToggle}),(0,l.jsx)(yn,{ref:function(t){return e.rightContainer=t},group:n,isExpanded:a,leftPaneWidth:w,rightPaneWidth:O,height:u,groupOffsetLeft:f,lastFrozenColumnKey:p,columns:r,summaryConfigs:s})]})}}])}(o.Component),En=Cn,_n=["startRenderIndex","endRenderIndex"],An="path_folded_group",bn=Math.max,Sn=Math.min,wn=function(e){function t(e){var n;(0,C.A)(this,t),(n=(0,_.A)(this,t,[e])).getShownRecords=function(){var e=n.state,t=e.startRenderIndex,r=e.endRenderIndex,o=e.groupMetrics;return n.getVisibleGroupRecords(t,r,o.groupRows).map((function(e){return n.props.recordGetterById(e.rowId)})).filter((function(e){return!!e}))},n.getGroupVisibleBoundaries=function(e,t,n,r){var o=n.groupRows,a=n.groupRowsHeight,i=n.maxLevel;if(!Array.isArray(o)||0===o.length)return{startRenderIndex:0,endRenderIndex:0};for(var l=0,s=0,u=m.q$*i+10*r,c=m.q$*i+10*r,d=bn(0,t-u),f=Sn(a,t+e+c),p=o.length,h=0;h<p;h++){var v=o[h].top;v<=d&&l++,v<=f&&s++}return{startRenderIndex:l,endRenderIndex:s}},n.setGroupNode=function(e){return function(t){n.groupsNode[e]=t}},n.setResultContentRef=function(e){n.resultContentRef=e},n.setInteractionMaskRef=function(e){n.interactionMask=e},n.setResultRef=function(e){n.resultRef=e},n.setScrollTop=function(e){n.resultContentRef.scrollTop=e},n.setScrollLeft=function(e,t){n.interactionMask&&n.interactionMask.setScrollLeft(e,t)},n.cancelSetScrollLeft=function(){n.interactionMask&&n.interactionMask.cancelSetScrollLeft()},n.setRightScrollbar=function(e){n.rightScrollbar=e},n.setColumnVisibleEnd=function(){for(var e=n.props,t=e.columns,r=e.getScrollLeft,o=0,a=(0,e.getTableContentRect)().width+r(),i=0;i<t.length;i++){if((a-=t[i].width)<0)return i}return o},n.getScrollTop=function(){return n.resultContentRef?n.resultContentRef.scrollTop:0},n.getRowHeight=function(){return 33},n.getRowTop=function(e){var t=n.state.groupMetrics,r=Re(e,t);return r&&r.top||0},n.jumpToRow=function(e){var t=n.state.groupMetrics,r=n.resultContentRef.offsetHeight,o=n.getRowTop(e),a=Math.min(o,t.groupRowsHeight-r);n.setScrollTop(a)},n.scrollToColumn=function(e){var t=n.props,r=t.columns,o=(0,t.getTableContentRect)().width,a=Kt(r,e,o);null!==a&&n.props.setRecordsScrollLeft(a),n.updateColVisibleIndex(a)},n.updateColVisibleIndex=function(e){var t=n.props.columns,r=qt(t,e),o=Qt(t,window.innerWidth,e);n.columnVisibleStart=r,n.columnVisibleEnd=o},n.getRecordBodyHeight=function(){return n.resultContentRef?n.resultContentRef.offsetHeight:0},n.updateViewableArea=function(e){var t=e.cursorCell.mousePosition,r=t.x,o=t.y,a=100;if(r+a>window.innerWidth)n.scrollToRight();else if(r-a<m.sN+n.props.frozenColumnsWidth)n.scrollToLeft();else if(o+a>window.innerHeight-130){var i=n.getScrollTop();n.resultContentRef.scrollTop=i+8,n.clearHorizontalScroll()}else if(o-a<130){var l=n.getScrollTop();l-16>=0&&(n.resultContentRef.scrollTop=l-8),n.clearHorizontalScroll()}else n.clearHorizontalScroll()},n.scrollToRight=function(){n.scrollTimer||(n.scrollTimer=setInterval((function(){var e=n.props.getScrollLeft();n.props.setRecordsScrollLeft(e+20)}),10))},n.scrollToLeft=function(){n.scrollTimer||(n.scrollTimer=setInterval((function(){var e=n.props.getScrollLeft();e<=0?n.clearHorizontalScroll():n.props.setRecordsScrollLeft(e-20)}),10))},n.clearHorizontalScroll=function(){n.scrollTimer&&(clearInterval(n.scrollTimer),n.scrollTimer=null)},n.clearScrollbarTimer=function(){n.scrollbarTimer&&(clearTimeout(n.scrollbarTimer),n.scrollbarTimer=null)},n.getCellMetaData=function(){return n.cellMetaData||(n.cellMetaData={onCellClick:n.onCellClick,onCellDoubleClick:n.onCellDoubleClick,onCellMouseDown:n.onCellMouseDown,onCellMouseEnter:n.onCellMouseEnter,onCellMouseMove:n.onCellMouseMove,onDragEnter:n.handleDragEnter,modifyRecord:n.props.modifyRecord,onCellContextMenu:n.onCellContextMenu}),n.cellMetaData},n.handleDragEnter=function(e){var t=e.overRecordIdx,n=e.overGroupRecordIndex;window.sfMetadataContext.eventBus.dispatch(m.Tw.DRAG_ENTER,{overRecordIdx:t,overGroupRecordIndex:n})},n.getGroupMetrics=function(){return n.state.groupMetrics},n.getGroupRecordByIndex=function(e){var t=n.getGroupMetrics();return Re(e,t)},n.fixFrozenDoms=function(e,t){((0,V.Zz)(n.props.columns[0])||0!==e)&&Object.keys(n.groupsNode).forEach((function(r){var o=n.groupsNode[r];o&&o.fixedFrozenDOMs(e,t)}))},n.cancelFixFrozenDOMs=function(e){((0,V.Zz)(n.props.columns[0])||0!==e)&&n.groupsNode&&Object.keys(n.groupsNode).forEach((function(t){var r=n.groupsNode[t];r&&r.cancelFixFrozenDOMs(e)}))},n.onResize=function(){var e=window.innerHeight;if(e){var t=n.resultContentRef.scrollTop,r=n.getRowHeight();n.updateScroll({gridHeight:e,scrollTop:t,rowHeight:r})}},n.onScroll=function(){var e=n.resultContentRef,t=e.offsetHeight,r=e.scrollTop;n.oldScrollTop=r,n.props.cacheScrollTop(r),n.updateScroll({scrollTop:r}),t+r>=n.resultContentRef.scrollHeight&&n.props.scrollToLoadMore(),n.isScrollingRightScrollbar||n.setRightScrollbarScrollTop(n.oldScrollTop),n.clearScrollbarTimer(),n.scrollbarTimer=setTimeout((function(){n.setState({isScrollingRightScrollbar:!1})}),300)},n.setRightScrollbarScrollTop=function(e){n.rightScrollbar&&n.rightScrollbar.setScrollTop(e)},n.onScrollbarScroll=function(e){n.oldScrollTop!==e&&n.setState({isScrollingRightScrollbar:!0},(function(){n.setScrollTop(e)}))},n.onScrollbarMouseUp=function(){n.setState({isScrollingRightScrollbar:!1})},n.onCellClick=function(e,t){var r=n.state.selectedPosition;if(Fe(t)){if(!r||-1===r.idx)return void n.selectCell(e,!1);n.selectUpdate(e,!0)}else{var o=n.props.columns,a=(0,V.Hs)(e,o),i=Ne(e,o,!0,n.props.recordGetterByIndex);n.selectCell(e,a&&i)}n.props.onCellClick(e),n.setState({selectedPosition:e})},n.onCellDoubleClick=function(e,t){var r=n.props.columns,o=(0,V.wo)(e,r),a=Ne(e,r,!0,n.props.recordGetterByIndex);n.selectCell(e,o&&a)},n.onCellMouseDown=function(e,t){Fe(t)||(n.selectCell(e),n.selectStart(e),window.addEventListener("mouseup",n.onWindowMouseUp))},n.onCellMouseEnter=function(e){n.selectUpdate(e,!1,n.updateViewableArea)},n.onCellMouseMove=function(e){n.selectUpdate(e,!1,n.updateViewableArea)},n.onCellContextMenu=function(e){n.props.onCellContextMenu(e)},n.onWindowMouseUp=function(e){window.removeEventListener("mouseup",n.onWindowMouseUp),Fe(e)||(n.selectEnd(),n.clearHorizontalScroll())},n.onCellRangeSelectionUpdated=function(e){n.props.onCellRangeSelectionUpdated(e)},n.selectNoneCells=function(){n.interactionMask&&n.interactionMask.selectNone();var e=n.state.selectedPosition;!e||e.idx<0||e.rowIdx<0||n.selectNone()},n.selectNone=function(){n.setState({selectedPosition:{idx:-1,rowIdx:-1,groupRecordIndex:-1}})},n.selectCell=function(e,t){window.sfMetadataContext.eventBus.dispatch(m.Tw.SELECT_CELL,e,t)},n.selectStart=function(e){window.sfMetadataContext.eventBus.dispatch(m.Tw.SELECT_START,e)},n.selectUpdate=function(e,t,n){window.sfMetadataContext.eventBus.dispatch(m.Tw.SELECT_UPDATE,e,t,n)},n.selectEnd=function(){window.sfMetadataContext.eventBus.dispatch(m.Tw.SELECT_END)},n.onCloseContextMenu=function(){n.setState({isContextMenuShow:!1,menuPosition:null,activeRecords:[]})},n.getNextScrollState=function(e){var t=e.gridHeight,r=e.scrollTop,o=e.rowHeight,a=e.groupMetrics,i=e.pathFoldedGroupMap,l=t||window.innerHeight,s=o||n.getRowHeight(),u=a||n.state.groupMetrics,c=i||n.state.pathFoldedGroupMap,d=n.getGroupVisibleBoundaries(l,r,u,s);return{startRenderIndex:d.startRenderIndex,endRenderIndex:d.endRenderIndex,groupMetrics:u,pathFoldedGroupMap:c}},n.updateScroll=function(e){var t=e.startRenderIndex,r=e.endRenderIndex,o=(0,v.A)(e,_n),a=n.getNextScrollState(o);return t&&r&&(a.startRenderIndex=t,a.endRenderIndex=r),n.setState(a),a},n.isParentGroupContainer=function(e,t){var n=e.groupPath,r=e.level,o=e.type,a=t.groupPath,i=t.level;return o===m.Gi.GROUP_CONTAINER&&r>i&&n[0]===a[0]},n.getPrevGroupContainers=function(e,t,r){if(!e)return[];var o=e.level,a=e.groupRecordIndex,i=e.type;if(0===a||o===r&&i===m.Gi.GROUP_CONTAINER)return[];for(var l=[],s=a-1;s>-1;){var u=t[s],c=u.type,d=u.level;if(c===m.Gi.GROUP_CONTAINER){if(o===r){l.push(u);break}if(n.isParentGroupContainer(u,e)&&l.unshift(u),d===r)break}s--}return l},n.getVisibleGroupRecords=function(e,t,r){var o=[],a=r[e],i=n.props.groupbys.length,l=n.getPrevGroupContainers(a,r,i);o.push.apply(o,(0,_e.A)(l));for(var s=e,u=[];s<=t;){var c=r[s];c&&c.visible&&(o.push(c),c.type===m.Gi.ROW&&u.push(c)),s++}return o},n.getFoldedGroups=function(){var e=window.sfMetadataContext.localStorage.getItem(An);return e||{}},n.getVisibleIndex=function(){return{rowVisibleStartIdx:n.rowVisibleStart,rowVisibleEndIdx:n.rowVisibleEnd}},n.updateFoldedGroups=function(e){window.sfMetadataContext.localStorage.setItem(An,e),n.selectNoneCells()},n.collapseAllGroups=function(){var e=n.state.groupMetrics.groupRows,t={};e.forEach((function(e){var n=e.type,r=e.groupPathString;n===m.Gi.GROUP_CONTAINER&&(t[r]=!0)})),n.updateFoldedGroups(t);var r=n.props,o=r.groups,a=r.groupbys,i=r.allColumns,l=n.getRowHeight(),s=n.resultContentRef.scrollTop,u=Ae(o,a,t,i,l,!1);n.updateScroll({scrollTop:s,rowHeight:l,groupMetrics:u})},n.expandAllGroups=function(){var e={};n.updateFoldedGroups(e);var t=n.props,r=t.groups,o=t.groupbys,a=t.allColumns,i=n.resultContentRef.scrollTop,l=n.getRowHeight(),s=Ae(r,o,e,a,l,!1);n.updateScroll({scrollTop:i,rowHeight:l,groupMetrics:s})},n.onExpandGroupToggle=function(e){var t=n.state,o=t.groupMetrics,a=t.pathFoldedGroupMap,i=o.groupRows,l=o.maxLevel,s=i.find((function(t){return t.groupPathString===e&&t.type===m.Gi.GROUP_CONTAINER}));if(s){var u=s.groupRecordIndex,c=s.groupPath,d=s.height,f=s.isExpanded,p=(0,r.A)({},a);f?p[e]=!0:delete p[e];var h=n.props,v=h.groups,g=h.groupbys,y=h.allColumns,C=n.resultContentRef.scrollTop,E=n.getRowHeight(),_=Ae(v,g,p,y,E,!1);if(s.count>=50)return n.forbidRecordsAnimation(),n.updateFoldedGroups(p),void n.updateScroll({scrollTop:C,rowHeight:E,groupMetrics:_,pathFoldedGroupMap:p});var A,b=n.getGroupVisibleBoundaries(window.innerHeight,C,_,E),S=b.startRenderIndex,w=b.endRenderIndex;if(f){var O=(A=o).groupRows;if(l>1)for(var R=-(d-m.q$),T=u-1;T>-1;T--){var x=O[T],M=x.groupPath;if(n.isParentGroupContainer(x,s)&&(x.height=x.height+R),M[0]!==c[0])break}for(var D=u+1;D<O.length;D++){var I=O[D],N=I.groupPath;if(Oe(I,s)&&(I.visible=!1),N[0]!==c[0])break}O[u]=(0,r.A)((0,r.A)({},O[u]),{},{isExpanded:!1,height:m.q$})}else for(var L=(A=_).groupRows,k=s.top+m.q$,P=u+1;P<L.length;P++){var F=L[P],j=F.groupPath;if(Oe(F,s)&&(F.height=0,F.top=k),j[0]!==c[0])break}n.expandingGroupPathString=e,n.nextPathFoldedGroupMap=p,n.setState({groupMetrics:A,startRenderIndex:S,endRenderIndex:w}),n.updateFoldedGroups(p)}},n.forbidRecordsAnimation=function(){n.disabledAnimation=!0;var e=n.groupRows.className,t=(0,i.SW)(e,"animation");t!==e&&(n.groupRows.className=t)},n.ableRecordsAnimation=function(){n.disabledAnimation=!1;var e=n.groupRows.className,t=(0,i.B$)(e,"animation");t!==e&&(n.groupRows.className=t)},n.openDownloadFilesDialog=function(){var e=n.state,t=e.column,r=e.activeRecords;n.props.cacheDownloadFilesProps(t,r),n.props.openDownloadFilesDialog()},n.checkSupportDownloadFiles=function(){var e=n.state.column,t=n.interactionMask.getSelectedPosition(),r=t.left;return!(t.right>r)&&(e.type===h.vZe.FILE||e.type===h.vZe.IMAGE)},n.renderGroups=function(){var e=n.props,t=e.totalWidth,r=e.containerWidth,o=e.columns,a=e.colOverScanStartIdx,i=e.colOverScanEndIdx,s=e.groupOffsetLeft,u=e.recordMetrics,c=e.summaryConfigs,d=e.lastFrozenColumnKey,f=e.showCellColoring,p=e.columnColors;n.recordFrozenRefs=[];var h=t+m.sN,v=n.state,g=v.startRenderIndex,C=v.endRenderIndex,E=v.groupMetrics,_=v.selectedPosition,A=E.groupRows,b=E.maxLevel,S=n.props.getScrollLeft(),w=n.getCellMetaData(),O=n.getVisibleGroupRecords(g,C,A),R=[],T=o.length,x=o[T-1],M=E.groupRowsHeight;O.forEach((function(e){var t=e.type,r=e.level,v=e.key,g=e.left,y=e.top,C=e.isExpanded,E=e.height,A=e.groupPathString,O=e.groupRecordIndex;if(t===m.Gi.GROUP_CONTAINER){var T=h+2*(r-1)*m.ax,x=n.expandingGroupPathString===A&&!C,M=E+m.ax;R.push((0,l.jsx)(En,{ref:n.setGroupNode(A),groupPathString:A,group:e,height:E,backdropHeight:M,width:T,top:y,maxLevel:b,groupOffsetLeft:s,scrollLeft:S,columns:o,summaryConfigs:c,isExpanded:C,folding:x,lastFrozenColumnKey:d,onExpandGroupToggle:n.onExpandGroupToggle},v))}else if(t===m.Gi.ROW){var D=e.rowId,I=e.rowIdx,N=e.isLastRow,L=D&&n.props.recordGetterById(D),k=Qe.isRecordSelected(D,u),P=n.props.hasSelectedCell({groupRecordIndex:O},_),F=f?p[D]:{};if(!L)return;R.push((0,l.jsx)(ye,{isGroupView:!0,ref:function(e){n.recordFrozenRefs.push(e)},isSelected:k,groupRecordIndex:O,index:I,isLastRecord:N,lastFrozenColumnKey:d,record:L,columns:o,colOverScanStartIdx:a,colOverScanEndIdx:i,left:g,top:y,height:E,scrollLeft:S,cellMetaData:w,searchResult:n.props.searchResult,hasSelectedCell:P,selectedPosition:n.state.selectedPosition,selectNoneCells:n.selectNoneCells,onSelectRecord:n.props.onSelectRecord,modifyRecord:n.props.modifyRecord,lockRecordViaButton:n.props.lockRecordViaButton,modifyRecordViaButton:n.props.modifyRecordViaButton,reloadRecords:n.props.reloadRecords,columnColor:F},D||I))}}));var D=d===x.key,I=y()("canvas-groups-rows","animation",{"single-column":(0,V.Ax)(x),"disabled-add-record":!0,"all-columns-frozen":D,frozen:D||!!d}),N={height:M,width:r+(2*(b-1)+1)*m.ax};return(0,l.jsx)("div",{className:I,style:N,ref:function(e){return n.groupRows=e},children:R})};var o=e.groups,a=e.groupbys,s=e.allColumns,u=n.getRowHeight(),c=n.getFoldedGroups(),d=Ae(o,a,c,s,u,!1),f=n.getGroupVisibleBoundaries(window.innerHeight,0,d,u),p=f.startRenderIndex,g=f.endRenderIndex;return n.state={isContextMenuShow:!1,activeRecords:[],menuPosition:null,groupMetrics:d,startRenderIndex:p,endRenderIndex:g,pathFoldedGroupMap:c,isScrollingRightScrollbar:!1,selectedPosition:null},n.groupsNode={},n.recordFrozenRefs=[],n.rowVisibleStart=p,n.rowVisibleEnd=g,n.columnVisibleStart=0,n.columnVisibleEnd=n.setColumnVisibleEnd(),n.disabledAnimation=!1,n.nextPathFoldedGroupMap=null,n}return(0,A.A)(t,e),(0,E.A)(t,[{key:"componentDidMount",value:function(){window.sfMetadataBody=this,window.addEventListener("resize",this.onResize),this.props.onRef(this),this.unSubscribeCollapseAllGroups=window.sfMetadataContext.eventBus.subscribe(m.Tw.COLLAPSE_ALL_GROUPS,this.collapseAllGroups),this.unSubscribeExpandAllGroups=window.sfMetadataContext.eventBus.subscribe(m.Tw.EXPAND_ALL_GROUPS,this.expandAllGroups)}},{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.groupbys,r=t.groups,o=t.allColumns,a=t.searchResult,i=this.resultContentRef.scrollTop,l=this.getRowHeight();if(n!==e.groupbys||r!==e.groups||a!==e.searchResult){var s=window.innerHeight,u=(a||{}).matchedCells,c=Array.isArray(u)&&u.length>0?{}:this.getFoldedGroups(),d=Ae(r,n,c,o,l,!1);this.updateScroll({gridHeight:s,scrollTop:i,groupMetrics:d,rowHeight:l})}if(this.disabledAnimation&&this.ableRecordsAnimation(),this.expandingGroupPathString){var f=Ae(r,n,this.nextPathFoldedGroupMap,o,l,!1);this.updateScroll({scrollTop:i,groupMetrics:f,pathFoldedGroupMap:this.nextPathFoldedGroupMap}),this.expandingGroupPathString=null,this.nextPathFoldedGroupMap=null}}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.onResize),this.unSubscribeCollapseAllGroups(),this.unSubscribeExpandAllGroups(),this.clearHorizontalScroll(),this.clearScrollbarTimer(),this.setState=function(e,t){}}},{key:"render",value:function(){return(0,l.jsxs)(o.Fragment,{children:[(0,l.jsxs)("div",{id:"group-canvas",className:"sf-metadata-result-table-content",ref:this.setResultContentRef,onScroll:this.onScroll,children:[(0,l.jsx)(Wt,{isGroupView:!0,ref:this.setInteractionMaskRef,contextMenu:this.props.contextMenu,table:this.props.table,columns:this.props.columns,recordsCount:this.props.recordsCount,recordMetrics:this.props.recordMetrics,groups:this.props.groups,groupMetrics:this.state.groupMetrics,rowHeight:this.getRowHeight(),groupOffsetLeft:this.props.groupOffsetLeft,scrollTop:this.oldScrollTop,getRowTop:this.getRowTop,getScrollLeft:this.props.getScrollLeft,getTableContentRect:this.props.getTableContentRect,getMobileFloatIconStyle:this.props.getMobileFloatIconStyle,onToggleMobileMoreOperations:this.props.onToggleMobileMoreOperations,onToggleInsertRecordDialog:this.props.onToggleInsertRecordDialog,editorPortalTarget:this.props.editorPortalTarget,onCellRangeSelectionUpdated:this.onCellRangeSelectionUpdated,modifyRecord:this.props.modifyRecord,recordGetterByIndex:this.props.recordGetterByIndex,recordGetterById:this.props.recordGetterById,updateRecords:this.props.updateRecords,paste:this.props.paste,editMobileCell:this.props.editMobileCell,frozenColumnsWidth:this.props.frozenColumnsWidth,selectNone:this.selectNone,onCellClick:this.onCellClick,getVisibleIndex:this.getVisibleIndex,getGroupCanvasScrollTop:this.getScrollTop,setGroupCanvasScrollTop:this.setScrollTop,scrollToColumn:this.scrollToColumn,setRecordsScrollLeft:this.props.setRecordsScrollLeft,gridUtils:this.props.gridUtils,getCopiedRecordsAndColumnsFromRange:this.props.getCopiedRecordsAndColumnsFromRange,modifyColumnData:this.props.modifyColumnData,getTableCanvasContainerRect:this.props.getTableCanvasContainerRect}),(0,l.jsx)("div",{className:"sf-metadata-result-table",ref:this.setResultRef,children:this.renderGroups()})]}),(0,l.jsx)(Q,{table:this.props.table,ref:this.setRightScrollbar,onScrollbarScroll:this.onScrollbarScroll,onScrollbarMouseUp:this.onScrollbarMouseUp})]})}}])}(o.Component);wn.defaultProps={editorPortalTarget:document.body,scrollToRowIndex:0};var On=wn,Rn=function(e){function t(){var e;(0,C.A)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=(0,_.A)(this,t,[].concat(r))).onClick=function(){p.A.closeAll(),e.props.load(1e5)},e}return(0,A.A)(t,e),(0,E.A)(t,[{key:"render",value:function(){return(0,l.jsxs)("div",{className:"load-all-tip",children:[(0,l.jsx)("span",{children:(0,j.AP)("Loaded 50,000 records.")}),(0,l.jsx)("div",{className:"load-all ml-2",onClick:this.onClick,children:(0,j.AP)("Click to load more")})]})}}])}(o.Component),Tn=Rn,xn=function(e){function t(){var e;(0,C.A)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=(0,_.A)(this,t,[].concat(r))).ref=null,e.calculateAtBorder=function(){var t,n=e.ref.getBoundingClientRect().bottom,r=e.ref?e.ref.className:"";(t=n>=window.innerHeight?(0,i.B$)(r,"at-border"):(0,i.SW)(r,"at-border"))!==r&&e.ref&&(e.ref.className=t)},e.onClick=function(){if(!e.props.isLoadingMore){var t=e.props.recordsCount<5e4?5e4:1e5;e.props.loadAll(t,(function(t){t?p.A.success((0,l.jsx)(Tn,{load:e.props.loadAll}),{duration:5}):p.A.success((0,j.AP)("All records loaded"))}))}},e.setSummaryScrollLeft=function(t){e.summaryItemsRef.scrollLeft=t},e.getSelectedCellsCount=function(e){var t=e.topLeft,n=e.bottomRight;return-1===t.rowIdx?0:(n.idx-t.idx+1)*(n.rowIdx-t.rowIdx+1)},e.getSummaries=function(){var t=e.props,n=t.isGroupView,r=t.hasSelectedRecord,o=t.recordMetrics,a=t.selectedRange,i=t.summaries,l=t.recordGetterByIndex;if(r){var s=Qe.getSelectedIds(o),u=s&&s.map((function(t){return e.props.recordGetterById(t)})).filter(Boolean);return e.props.getRecordsSummaries(u)}if(e.getSelectedCellsCount(a)>1){var c=Le({selectedRange:a,isGroupView:n,recordGetterByIndex:l});return e.props.getRecordsSummaries(c)}return i},e.getSummaryItems=function(){var t=e.props,n=t.columns,r=t.hasMore,o=t.isLoadingMore||r?n.slice(1,n.length):n,a=m.sN,i=Array.isArray(o)&&o.map((function(e,t){var n=e.width,r=e.key;return a+=n,(0,l.jsx)("div",{className:"summary-item",style:{width:n}},r)}));return{summaryItems:i,totalWidth:a}},e.getRecord=function(){var t=e.props,n=t.hasMore,r=t.hasSelectedRecord,o=t.recordMetrics,a=t.selectedRange,i=t.recordsCount;if(r){var l=Qe.getSelectedIds(o).length;return l>1?(0,j.AP)("xxx records selected").replace("xxx",l):(0,j.AP)("1 record selected")}var s,u=e.getSelectedCellsCount(a);return u>1?(0,j.AP)("xxx cells selected").replace("xxx",u):(i>1?s=(0,j.AP)("xxx records").replace("xxx",i):1===i&&(s=(0,j.AP)("1 record")),n&&(s+=" +"),s)},e}return(0,A.A)(t,e),(0,E.A)(t,[{key:"componentDidMount",value:function(){window.addEventListener("resize",this.calculateAtBorder)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.calculateAtBorder)}},{key:"componentDidUpdate",value:function(){this.calculateAtBorder()}},{key:"render",value:function(){var e=this,t=this.props,n=t.hasMore,r=t.isLoadingMore,o=t.columns,a=t.groupOffsetLeft,i=this.getSummaryItems(),u=i.summaryItems,c=i.totalWidth,d=(r||n?m.sN+o[0].width:m.sN)+a;return(0,l.jsxs)("div",{className:"sf-metadata-result-footer",style:{zIndex:h.Mue.Rc},ref:function(t){return e.ref=t},children:[(0,l.jsxs)("div",{className:"rows-record d-flex text-nowrap",style:{width:d},children:[(0,l.jsx)("span",{children:this.getRecord()}),!r&&n&&(0,l.jsx)("span",{className:"load-all ml-4",onClick:this.onClick,children:(0,j.AP)("Load all")}),r&&(0,l.jsxs)("span",{className:"loading-message ml-4",children:[(0,l.jsx)("span",{className:"mr-2",children:(0,j.AP)("Loading")}),(0,l.jsx)(s.Rh,{})]})]}),(0,l.jsx)("div",{className:"summaries-pane",children:(0,l.jsx)("div",{className:"summaries-scroll",ref:function(t){return e.summaryItemsRef=t},children:(0,l.jsx)("div",{style:{width:c+m.AD},children:u||""})})})]})}}])}(o.Component),Mn=xn,Dn=n(43066),In="clear-selected",Nn="copy-selected",Ln="open-parent-folder",kn="open-new-tab",Pn="generate-description",Fn="image-caption",jn=function(e){var t=e.isGroupView,n=e.selectedRange,r=e.selectedPosition,s=e.recordMetrics,c=e.recordGetterByIndex,d=e.onClearSelected,m=e.onCopySelected,v=e.updateRecords,g=e.getTableContentRect,y=e.getTableCanvasContainerRect,C=(0,o.useRef)(null),E=(0,o.useState)(!1),_=(0,f.A)(E,2),A=_[0],b=_[1],S=(0,o.useState)({top:0,left:0}),w=(0,f.A)(S,2),O=w[0],R=w[1],T=(0,a.p)().metadata,x=(0,o.useMemo)((function(){if(!A)return[];var e="r"===window.sfMetadataContext.getPermission(),o=T.columns,a=(0,h.rm3)(o,h.L2D.FILE_DESCRIPTION),l=window.sfMetadataContext.canModifyRow,u=[];if(n){if(!e&&u.push({value:In,label:(0,i.AP)("Clear selected")}),u.push({value:Nn,label:(0,i.AP)("Copy selected")}),a)for(var d=n.topLeft,f=n.bottomRight,p=d.rowIdx;p<=f.rowIdx;p++){var m=c({isGroupView:t,groupRecordIndex:d.groupRecordIndex,recordIndex:p}),v=m[h.L2D.FILE_NAME];if(ae.Aq.isDescriptionSupportedFile(v)&&l(m)){u.push({value:Pn,label:(0,i.AP)("Generate description")});break}}return u}var g=Object.keys(s.idSelectedRecordMap);if(g.length>1){if(a){var y=g.filter((function(e){var t=T.id_row_map[e];if(t){var n=t[h.L2D.FILE_NAME];return ae.Aq.isDescriptionSupportedFile(n)&&l(t)}return!1}));y.length>0&&u.push({value:Pn,label:(0,i.AP)("Generate description")})}return u}if(!r)return u;var C=r.groupRecordIndex,E=r.rowIdx,_=c({isGroupView:t,groupRecordIndex:C,recordIndex:E});if(!_)return u;var b=_[h.L2D.IS_DIR];if(u.push({value:kn,label:b?(0,i.AP)("Open folder in new tab"):(0,i.AP)("Open file in new tab")}),u.push({value:Ln,label:(0,i.AP)("Open parent folder")}),a){var S=_[h.L2D.FILE_NAME];ae.Aq.isDescriptionSupportedFile(S)&&l(_)?u.push({value:Pn,label:(0,i.AP)("Generate description")}):ae.Aq.imageCheck(S)&&l(_)&&u.push({value:Fn,label:(0,i.AP)("Generate image description")})}return u}),[A,t,r,s,n,T,c]),M=(0,o.useCallback)((function(e){C.current&&!C.current.contains(e.target)&&b(!1)}),[C]),D=(0,o.useCallback)((function(){var e=r.groupRecordIndex,n=r.rowIdx,o=c({isGroupView:t,groupRecordIndex:e,recordIndex:n});if(o){var a,i=window.sfMetadataStore.repoId,l=o[h.L2D.IS_DIR],s=o[h.L2D.PARENT_DIR],u=o[h.L2D.FILE_NAME];a=l?window.location.origin+window.location.pathname+ae.Aq.encodePath(ae.Aq.joinPath(s,u)):"".concat(j.Yc,"lib/").concat(i,"/file").concat(ae.Aq.encodePath(ae.Aq.joinPath(s,u))),window.open(a,"_blank")}}),[t,c,r]),I=(0,o.useCallback)((function(e){e.preventDefault(),e.stopPropagation();var n=r.groupRecordIndex,o=r.rowIdx,a=c({isGroupView:t,groupRecordIndex:n,recordIndex:o});if(a){var i=a[h.L2D.PARENT_DIR];window.location.pathname.endsWith("/")&&(i=i.slice(1));var l=window.location.origin+window.location.pathname+ae.Aq.encodePath(i);window.open(l,"_blank")}}),[t,c,r]),N=(0,o.useCallback)((function(){var e=window.sfMetadataContext.canModifyRow,n=h.L2D.FILE_DESCRIPTION,o="",a={},l={},s=r.groupRecordIndex,d=r.rowIdx,f=c({isGroupView:t,groupRecordIndex:s,recordIndex:d}),m=f[h.L2D.FILE_NAME];if(ae.Aq.isDescriptionSupportedFile(m)&&e(f)){var g=f[h.L2D.PARENT_DIR];o=ae.Aq.joinPath(g,m),a[f[h.L2D.ID]]=(0,u.default)({},n,f[n]),l[f[h.L2D.ID]]=(0,u.default)({},n,f[n])}""!==o&&window.sfMetadataContext.generateDescription(o).then((function(e){var t=e.data.summary,r=f[h.L2D.ID],o=[r],i={},s={};i[r]=(0,u.default)({},n,t),s[r]=(0,u.default)({},n,t),v({recordIds:o,idRecordUpdates:i,idOriginalRecordUpdates:s,idOldRecordData:a,idOriginalOldRecordData:l})})).catch((function(e){var t=(0,i.AP)("Failed to generate description");p.A.danger(t)}))}),[t,r,c,v]),L=(0,o.useCallback)((function(){var e=window.sfMetadataContext.canModifyRow,n=h.L2D.FILE_DESCRIPTION,o="",a={},l={},s=r.groupRecordIndex,d=r.rowIdx,f=c({isGroupView:t,groupRecordIndex:s,recordIndex:d}),m=f[h.L2D.FILE_NAME];if(ae.Aq.imageCheck(m)&&e(f)){var g=f[h.L2D.PARENT_DIR];o=ae.Aq.joinPath(g,m),a[f[h.L2D.ID]]=(0,u.default)({},n,f[n]),l[f[h.L2D.ID]]=(0,u.default)({},n,f[n])}""!==o&&window.sfMetadataContext.imageCaption(o).then((function(e){var t=e.data.desc,r=f[h.L2D.ID],o=[r],i={},s={};i[r]=(0,u.default)({},n,t),s[r]=(0,u.default)({},n,t),v({recordIds:o,idRecordUpdates:i,idOriginalRecordUpdates:s,idOldRecordData:a,idOriginalOldRecordData:l})})).catch((function(e){var t=(0,i.AP)("Failed to generate image description");p.A.danger(t)}))}),[t,r,c,v]),k=(0,o.useCallback)((function(e,t){switch(e.stopPropagation(),t.value){case kn:D();break;case Ln:I(e);break;case Nn:m&&m();break;case In:d&&d();break;case Pn:N&&N();break;case Fn:L&&L()}b(!1)}),[D,I,m,d,N,L]),P=(0,o.useCallback)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n={top:t,left:e};if(!C.current)return n;var r=C.current.getBoundingClientRect(),o=y(),a=g(),i=a.right,l=a.bottom;return n.top=n.top-o.top,n.left=n.left-o.left,t+r.height>l-10&&(n.top-=r.height),e+r.width>i&&(n.left-=r.width),n.top<0&&(n.top=r.bottom>l?(l-10-r.height)/2:0),n.left<0&&(n.left=r.width<i?(i-r.width)/2:0),n}),[g,y]);return(0,o.useEffect)((function(){var e=function(e){if(e.preventDefault(),!C.current||!C.current.contains(e.target)){b(!0);var t=P(e.clientX,e.clientY);R(t)}};return document.addEventListener("contextmenu",e),function(){document.removeEventListener("contextmenu",e)}}),[]),(0,o.useEffect)((function(){return A?document.addEventListener("mousedown",M):document.removeEventListener("mousedown",M),function(){document.removeEventListener("mousedown",M)}}),[A,M]),A?0===x.length?null:(0,l.jsx)("div",{ref:C,className:"dropdown-menu sf-metadata-contextmenu",style:O,children:x.map((function(e,t){return(0,l.jsx)("button",{className:"dropdown-item sf-metadata-contextmenu-item",onClick:function(t){return k(t,e)},children:e.label},t)}))}):null},Yn=function(e){function t(e){var n;(0,C.A)(this,t),(n=(0,_.A)(this,t,[e])).createColumnMetrics=function(e){var t=e.columns,n=e.table;return(0,V.iM)(t,n.columns,n._id)},n.createRowMetrics=function(){arguments.length>0&&void 0!==arguments[0]||n.props;return{idSelectedRecordMap:{}}},n.setScrollLeft=function(e){n.resultContainerRef.scrollLeft=e},n.modifyColumnWidth=function(e,t){n.props.modifyColumnWidth(e.key,t)},n.getScrollPosition=function(){var e=window.sfMetadataContext.localStorage.getItem("scroll_left")+"",t=window.sfMetadataContext.localStorage.getItem("scroll_top")+"";e&&t&&n.bodyRef&&(e=Number(e),t=Number(t),n.bodyRef.setScrollTop(t),n.setScrollLeft(e),n.handleHorizontalScroll(e,t))},n.storeScrollPosition=function(){var e=n.bodyRef.getScrollTop(),t=n.getScrollLeft();window.sfMetadataContext.localStorage.setItem("scroll_left",t),n.storeScrollTop(e)},n.storeScrollTop=function(e){window.sfMetadataContext.localStorage.setItem("scroll_top",e)},n.onContentScroll=function(e){var t=e.target.scrollLeft,r=n.bodyRef.getScrollTop(),o=n.scrollLeft-t,a=n.scrollTop-r;n.scrollLeft=t,0!==a&&(n.scrollTop=r),0!==a||0===o&&0!==t||n.handleHorizontalScroll(t,r),n.storeScrollPosition(),window.sfMetadataContext.eventBus.dispatch(m.Tw.CLOSE_EDITOR)},n.handleHorizontalScroll=function(e,t){var r=n.props.getTableContentRect().width;if(i.Fr)n.updateHorizontalScrollState({scrollLeft:e,columnMetrics:n.state.columnMetrics,gridWidth:r});else{var o,a=n.resultContainerRef?n.resultContainerRef.className:"";(o=e>0?(0,i.B$)(a,"horizontal-scroll"):(0,i.SW)(a,"horizontal-scroll"))!==a&&n.resultContainerRef&&(n.resultContainerRef.className=o),n.lastScrollLeft=e,n.handleFrozenDOMsPosition(e,t),n.recordsFooterRef.setSummaryScrollLeft(e),n.isScrollByScrollbar||n.handleScrollbarScroll(e),n.bodyRef&&n.bodyRef.interactionMask&&n.bodyRef.setScrollLeft(e,t),n.updateHorizontalScrollState({scrollLeft:e,columnMetrics:n.state.columnMetrics,gridWidth:r})}},n.handleFrozenDOMsPosition=function(e,t){var r=n.state.columnMetrics.lastFrozenColumnKey;n.props.isGroupView&&!r||(n.clearSetAbsoluteTimer(),n.setFixed(e,t),n.timer=setTimeout((function(){n.setAbsolute(e,t)}),100))},n.handleScrollbarScroll=function(e){n.horizontalScrollbar&&(n.isScrollByScrollbar?n.isScrollByScrollbar=!1:n.setHorizontalScrollbarScrollLeft(e))},n.onHorizontalScrollbarScroll=function(e){n.isScrollByScrollbar=!0,n.setScrollLeft(e)},n.onHorizontalScrollbarMouseUp=function(){n.isScrollByScrollbar=!1},n.setHorizontalScrollbarScrollLeft=function(e){n.horizontalScrollbar&&n.horizontalScrollbar.setScrollLeft(e)},n.setFixed=function(e,t){n.bodyRef.recordFrozenRefs.forEach((function(e){e&&(e.frozenColumns.style.position="fixed",e.frozenColumns.style.marginLeft="0px",e.frozenColumns.style.marginTop="-"+t+"px")})),n.bodyRef.fixFrozenDoms&&n.bodyRef.fixFrozenDoms(e,t)},n.setAbsolute=function(e){var t=n.props.isGroupView,r=n.state.columnMetrics.lastFrozenColumnKey;t&&!r||(n.bodyRef.recordFrozenRefs.forEach((function(t){t&&(t.frozenColumns.style.position="absolute",t.frozenColumns.style.marginLeft=e+"px",t.frozenColumns.style.marginTop="0px")})),n.bodyRef.cancelFixFrozenDOMs&&n.bodyRef.cancelFixFrozenDOMs(e),n.bodyRef&&n.bodyRef.interactionMask&&n.bodyRef.cancelSetScrollLeft())},n.clearSetAbsoluteTimer=function(){n.timer&&(clearTimeout(n.timer),n.timer=null)},n.getScrollLeft=function(){return i.Fr?0:n.scrollLeft||0},n.getScrollTop=function(){return i.Fr?0:n.scrollTop||0},n.setHorizontalScrollbarRef=function(e){n.horizontalScrollbar=e},n.setResultContainerRef=function(e){n.resultContainerRef=e},n.updateSelectedRange=function(e){n.setState({selectedRange:e})},n.onClickContainer=function(e){var t=(0,i.wD)(e);(t.includes("sf-metadata-result-content")||t.includes("sf-metadata-result-table-content"))&&window.sfMetadataContext.eventBus.dispatch(m.Tw.CLOSE_EDITOR)},n.onCellClick=function(e){e&&n.updateSelectedRange({topLeft:n.initPosition,bottomRight:n.initPosition}),n.onDeselectAllRecords()},n.onCellRangeSelectionUpdated=function(e){n.onCellClick(),n.updateSelectedRange(e)},n.onCopyCells=function(e){window.sfMetadataContext.eventBus.dispatch(m.Tw.COPY_CELLS,e)},n.onPasteCells=function(e){window.sfMetadataContext.eventBus.dispatch(m.Tw.PASTE_CELLS,e)},n.onTouchStart=function(e){if(e.target&&["canvas","group-canvas"].includes(e.target.id)){var t={startX:e.changedTouches[0].clientX,startY:e.changedTouches[0].clientY};n.setState({touchStartPosition:t})}},n.onTouchEnd=function(e){if(e.target&&["canvas","group-canvas"].includes(e.target.id)){var t=e.changedTouches[0],r=t.clientX,o=t.clientY,a=n.state.touchStartPosition;Math.abs(a.startX-r)<5&&Math.abs(a.startY-o)<5&&window.sfMetadataContext.eventBus.dispatch(m.Tw.SELECT_NONE)}},n.onMouseDown=function(e){var t=(0,i.wD)(e);if(!(t.indexOf("sf-metadata-result-table-cell")>-1)){(["canvas","group-canvas"].includes(e.target.id)||t.includes("sf-metadata-result-content"))&&window.sfMetadataContext.eventBus.dispatch(m.Tw.SELECT_NONE)}},n.selectNone=function(){n.setState({selectedRange:{topLeft:n.initPosition,bottomRight:n.initPosition}}),n.onDeselectAllRecords()},n.selectCell=function(e){n.setState({selectedPosition:e})},n.onSelectRecord=function(e,t){var r=e.groupRecordIndex,o=e.recordIndex;if(t.stopPropagation(),Fe(t))n.selectRecordWithShift({groupRecordIndex:r,recordIndex:o});else{var a=n.props.isGroupView,i=n.state.recordMetrics,l=n.props.recordGetterByIndex({isGroupView:a,groupRecordIndex:r,recordIndex:o});if(l){var s=l._id;if(Qe.isRecordSelected(s,i))return n.deselectRecord(s),void n.setState({lastRowIdxUiSelected:{groupRecordIndex:-1,recordIndex:-1}});n.selectRecord(s),n.setState({lastRowIdxUiSelected:{groupRecordIndex:r,recordIndex:o}})}}},n.selectRecordWithShift=function(e){var t=e.groupRecordIndex,r=e.recordIndex,o=n.props,a=o.recordIds,i=o.isGroupView,l=n.state,s=l.lastRowIdxUiSelected,u=l.recordMetrics,c=[];if(i){if(!window.sfMetadataBody||!window.sfMetadataBody.getGroupMetrics)return;for(var d=window.sfMetadataBody.getGroupMetrics().groupRows,f=[t,s.groupRecordIndex].sort((function(e,t){return e-t})),p=f[0];p<=f[1];p++){var h=d[p];h.type===m.Gi.ROW&&c.push(h.rowId)}}else{var v=a[r];if(!v)return;var g=s.recordIndex;if(g<0)return n.selectRecord(v),void n.setState({lastRowIdxUiSelected:{groupRecordIndex:-1,recordIndex:r}});if(r===g||Qe.isRecordSelected(v,u))return n.deselectRecord(v),void n.setState({lastRowIdxUiSelected:{groupRecordIndex:-1,recordIndex:-1}});c=n.getRecordIdsBetweenRange({start:g,end:r})}0!==c.length&&(n.selectRecordsById(c),n.setState({lastRowIdxUiSelected:{groupRecordIndex:t,recordIndex:r}}))},n.getRecordIdsBetweenRange=function(e){for(var t=e.start,r=e.end,o=n.props.recordIds,a=Math.min(t,r),i=Math.max(t,r),l=[],s=a;s<=i;s++){var u=o[s];u&&l.push(u)}return l},n.selectRecord=function(e){var t=n.state.recordMetrics;if(!Qe.isRecordSelected(e,t)){var o=(0,r.A)({},t);Qe.selectRecord(e,o),n.setState({recordMetrics:o})}},n.selectRecordsById=function(e){var t=n.state.recordMetrics;if(0!==e.filter((function(e){return!Qe.isRecordSelected(e,t)})).length){var o=(0,r.A)({},t);Qe.selectRecordsById(e,o),n.setState({recordMetrics:o})}},n.deselectRecord=function(e){var t=n.state.recordMetrics;if(Qe.isRecordSelected(e,t)){var o=(0,r.A)({},t);Qe.deselectRecord(e,o),n.setState({recordMetrics:o})}},n.selectAllRecords=function(){var e=n.props,t=e.recordIds,o=e.isGroupView,a=n.state.recordMetrics,i=(0,r.A)({},a),l=[];if(o){if(!window.sfMetadataBody||!window.sfMetadataBody.getGroupMetrics)return;window.sfMetadataBody.getGroupMetrics().groupRows.forEach((function(e){e.type===m.Gi.ROW&&l.push(e.rowId)}))}else l=t;Qe.selectRecordsById(l,i),n.setState({recordMetrics:i})},n.onDeselectAllRecords=function(){var e=n.state.recordMetrics;if(Qe.hasSelectedRecords(e)){var t=(0,r.A)({},e);Qe.deselectAllRecords(t),n.setState({recordMetrics:t,lastRowIdxUiSelected:{groupRecordIndex:-1,recordIndex:-1}})}},n.hasSelectedCell=function(e,t){var r=e.groupRecordIndex,o=e.recordIndex;if(!t)return!1;var a=n.props.isGroupView,i=t.groupRecordIndex,l=t.rowIdx;return a?r===i:o===l},n.hasSelectedRecord=function(){var e=n.state.recordMetrics;if(!Qe.hasSelectedRecords(e))return!1;var t=Qe.getSelectedIds(e),r=t&&t.map((function(e){return n.props.recordGetterById(e)})).filter(Boolean);return r&&r.length>0},n.getHorizontalScrollState=function(e){var t=e.gridWidth,n=e.columnMetrics,r=e.scrollLeft,o=n.columns,a=o.length,i=function(e,t,n){var r=function(e,t){for(var n=t,r=e.slice(0),o=0;o<r.length;o++)if((n-=e[o].width)<0)return o}(e,t),o=function(e,t,n){for(var r=t+n,o=0;o<e.length;o++)if((r-=e[o].width)<0)return o-1;return e.length-1}(e,n,t);return{colVisibleStartIdx:r,colVisibleEndIdx:o}}(o,r,t),l=i.colVisibleStartIdx,s=i.colVisibleEndIdx,u=function(e){return Math.max(0,10*Math.floor(e/10)-m.hw)}(l),c=function(e,t){return Math.min(10*Math.ceil(e/10)+m.hw,t)}(s,a);return{colOverScanStartIdx:u,colOverScanEndIdx:c}},n.updateHorizontalScrollState=function(e){var t=e.columnMetrics,r=e.gridWidth,o=e.scrollLeft,a=n.getHorizontalScrollState({columnMetrics:t,gridWidth:r,scrollLeft:o});n.setState(a)},n.isOutSelectedRange=function(e){var t=e.recordIndex,r=e.idx,o=n.state.selectedRange,a=o.topLeft,i=o.bottomRight,l=a.idx,s=a.rowIdx,u=i.idx,c=i.rowIdx;return r<l||r>u||t<s||t>c},n.onCellContextMenu=function(e){var t=e.rowIdx,r=e.idx,o=e.groupRecordIndex,a=n.props,i=a.isGroupView,l=(0,a.recordGetterByIndex)({isGroupView:i,groupRecordIndex:o,recordIndex:t});if(l){var s=n.state.recordMetrics,u=l._id;Qe.isRecordSelected(u,s)||n.setState({recordMetrics:n.createRowMetrics()}),n.isOutSelectedRange({recordIndex:t,idx:r})&&window.sfMetadataContext.eventBus.dispatch(m.Tw.SELECT_CELL,e,!1)}},n.getTableCanvasContainerRect=function(){return n.resultContainerRef.getBoundingClientRect()},n.renderRecordsBody=function(e){var t=e.containerWidth,o=n.props,a=o.isGroupView,i=o.recordGetterByIndex,s=o.updateRecords,u=n.state,c=u.recordMetrics,d=u.columnMetrics,f=u.colOverScanStartIdx,p=u.colOverScanEndIdx,m=d.columns,h=d.allColumns,v=d.totalWidth,g=d.lastFrozenColumnKey,y=d.frozenColumnsWidth,C=(0,r.A)((0,r.A)({},n.props),{},{columns:m,allColumns:h,totalWidth:v,lastFrozenColumnKey:g,frozenColumnsWidth:y,recordMetrics:c,colOverScanStartIdx:f,colOverScanEndIdx:p,contextMenu:(0,l.jsx)(jn,{isGroupView:a,recordGetterByIndex:i,updateRecords:s}),hasSelectedRecord:n.hasSelectedRecord(),getScrollLeft:n.getScrollLeft,getScrollTop:n.getScrollTop,selectNone:n.selectNone,onCellClick:n.onCellClick,onCellRangeSelectionUpdated:n.onCellRangeSelectionUpdated,onSelectRecord:n.onSelectRecord,setRecordsScrollLeft:n.setScrollLeft,hasSelectedCell:n.hasSelectedCell,cacheScrollTop:n.storeScrollTop,onCellContextMenu:n.onCellContextMenu,getTableCanvasContainerRect:n.getTableCanvasContainerRect});return n.props.isGroupView?(0,l.jsx)(On,(0,r.A)((0,r.A)({onRef:function(e){return n.bodyRef=e}},C),{},{containerWidth:t,groups:n.props.groups,groupbys:n.props.groupbys,groupOffsetLeft:n.props.groupOffsetLeft})):(0,l.jsx)(ln,(0,r.A)((0,r.A)({onRef:function(e){return n.bodyRef=e}},C),{},{recordIds:n.props.recordIds}))},n.scrollTop=0,n.isScrollByScrollbar=!1;var o=window.sfMetadataContext.localStorage.getItem("scroll_left");n.scrollLeft=o?Number(o):0,n.lastScrollLeft=n.scrollLeft,n.initPosition={idx:-1,rowIdx:-1,groupRecordIndex:-1};var a=n.createColumnMetrics(e),s=e.getTableContentRect().width,u=n.getHorizontalScrollState({gridWidth:s,columnMetrics:a,scrollLeft:0});return n.state=(0,r.A)({columnMetrics:a,recordMetrics:n.createRowMetrics(),lastRowIdxUiSelected:{groupRecordIndex:-1,recordIndex:-1},touchStartPosition:{},selectedRange:{topLeft:n.initPosition,bottomRight:n.initPosition},selectedPosition:n.initPosition},u),n.isWindows=(0,i.eP)(),n.isWebkit=(0,i.zR)(),n}return(0,A.A)(t,e),(0,E.A)(t,[{key:"componentDidMount",value:function(){document.addEventListener("copy",this.onCopyCells),document.addEventListener("paste",this.onPasteCells),window.isMobile?(window.addEventListener("touchstart",this.onTouchStart),window.addEventListener("touchend",this.onTouchEnd)):document.addEventListener("mousedown",this.onMouseDown),this.unsubscribeSelectNone=window.sfMetadataContext.eventBus.subscribe(m.Tw.SELECT_NONE,this.selectNone),this.unsubscribeSelectCell=window.sfMetadataContext.eventBus.subscribe(m.Tw.SELECT_CELL,this.selectCell),this.getScrollPosition()}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t,n=e.columns,r=(0,e.getTableContentRect)().width;if(this.props.columns!==n){var o=this.createColumnMetrics(e);this.updateHorizontalScrollState({columnMetrics:o,scrollLeft:this.lastScrollLeft,gridWidth:r}),this.setState({columnMetrics:o})}else(null===(t=this.props.getTableContentRect())||void 0===t?void 0:t.width)!==r&&this.updateHorizontalScrollState({columnMetrics:this.state.columnMetrics,scrollLeft:this.lastScrollLeft,gridWidth:r})}},{key:"componentWillUnmount",value:function(){document.removeEventListener("copy",this.onCopyCells),document.removeEventListener("paste",this.onPasteCells),window.isMobile?(window.removeEventListener("touchstart",this.onTouchStart),window.removeEventListener("touchend",this.onTouchEnd)):document.removeEventListener("mousedown",this.onMouseDown),this.clearSetAbsoluteTimer(),this.unsubscribeSelectNone(),this.unsubscribeSelectCell(),this.setState=function(e,t){}}},{key:"render",value:function(){var e=this,t=this.props,n=t.recordIds,r=t.recordsCount,o=t.table,a=t.isGroupView,s=t.groupOffsetLeft,u=t.renameColumn,c=t.modifyColumnData,d=t.deleteColumn,f=t.modifyColumnOrder,p=this.state,h=p.recordMetrics,v=p.columnMetrics,g=p.selectedRange,y=p.colOverScanStartIdx,C=p.colOverScanEndIdx,E=v.columns,_=v.totalWidth,A=v.lastFrozenColumnKey,b=_+m.sN+m.AD+s,S=this.hasSelectedRecord(),w=Qe.isSelectedAll(n,h);return 0===r?(0,l.jsx)(Dn.A,{text:(0,i.AP)("No record")}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{className:"sf-metadata-result-container ".concat(this.isWindows?"windows-browser":""),ref:this.setResultContainerRef,onScroll:this.onContentScroll,onClick:this.onClickContainer,children:(0,l.jsxs)("div",{className:"sf-metadata-result-content",style:{width:b},children:[(0,l.jsx)($,{onRef:function(t){return e.headerFrozenRef=t},containerWidth:b,table:o,columnMetrics:v,colOverScanStartIdx:y,colOverScanEndIdx:C,hasSelectedRecord:S,isSelectedAll:w,isGroupView:a,groupOffsetLeft:s,lastFrozenColumnKey:A,modifyColumnWidth:this.modifyColumnWidth,selectNoneRecords:this.selectNone,selectAllRecords:this.selectAllRecords,renameColumn:u,deleteColumn:d,modifyColumnData:c,modifyColumnOrder:f}),this.renderRecordsBody({containerWidth:b})]})}),this.isWindows&&this.isWebkit&&(0,l.jsx)(ee,{ref:this.setHorizontalScrollbarRef,innerWidth:_+m.AD,onScrollbarScroll:this.onHorizontalScrollbarScroll,onScrollbarMouseUp:this.onHorizontalScrollbarMouseUp}),(0,l.jsx)(Mn,{ref:function(t){return e.recordsFooterRef=t},recordsCount:r,hasMore:this.props.hasMore,columns:E,groupOffsetLeft:s,recordMetrics:h,selectedRange:g,isGroupView:a,hasSelectedRecord:S,isLoadingMore:this.props.isLoadingMore,recordGetterById:this.props.recordGetterById,recordGetterByIndex:this.props.recordGetterByIndex,getRecordsSummaries:function(){},loadAll:this.props.loadAll})]})}}])}(o.Component),Un=Yn,Bn=n(91210),Hn=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"YYYY-MM-DD";if("string"!==typeof e||!e.trim())return null;var n={};return n=/^[0-9]+$/.test(e)?new Date((0,Bn.WH)(e)):h.EmK.parseDateWithFormat(e,t),t.indexOf("HH:mm")<0?h.EmK.format(n,"YYYY-MM-DD")||null:h.EmK.format(n,"YYYY-MM-DD HH:MM")||null},Gn=(0,u.default)((0,u.default)({},h.vZe.MULTIPLE_SELECT,[h.vZe.MULTIPLE_SELECT,h.vZe.TEXT,h.vZe.SINGLE_SELECT]),h.vZe.NUMBER,[h.vZe.TEXT,h.vZe.NUMBER]),Vn=/(\d{4})\u5e74(\d{1,2})\u6708(\d{1,2})\u65e5$/;var Zn=function(e,t,n,r,o){var a=function(e,t,n,r){var o=n.type;if(!e||Array.isArray(e)&&0===e.length||!Gn[h.vZe.MULTIPLE_SELECT].includes(o))return{selectedOptionIds:t};var a=[];if(o===h.vZe.MULTIPLE_SELECT)a=(0,h.FiT)(n).filter((function(t){return e.includes(t.id)||e.includes(t.name)})).map((function(e){return e.name}));else if(o===h.vZe.TEXT){var i=String(e);1===(a=i.split("\n")).length&&(a=i.split(",")),a=a.map((function(e){return e.trim()})).filter((function(e){return""!==e}))}else o===h.vZe.SINGLE_SELECT&&(a=(0,h.FiT)(n).filter((function(t){return t.id===e})).map((function(e){return e.name})));if(0===a.length)return{selectedOptionIds:t};var l=(0,h.FiT)(r),s=(0,h.oHI)(l,a);return{pasteOptions:l,newCellOptions:s.cellOptions,selectedOptionIds:s.selectedOptionIds}}(e,t,n,r),i=a.newCellOptions,l=a.pasteOptions,s=a.selectedOptionIds,u=r;if(i){if(!window.sfMetadataContext.canModifyColumnData(r))return null;var c=[].concat((0,_e.A)(l),(0,_e.A)(i));u.data||(u.data={}),u.data.options=c,o.modifyColumnData(r.key,{options:c},r.data)}return(0,h.zXq)(u,s)};function zn(e,t,n,r,o){var a=r.type,i=r.data,l=n.type,s=n.data;switch(l){case h.vZe.CHECKBOX:return function(e,t,n){switch(n){case h.vZe.CHECKBOX:return"boolean"===typeof e?e:null;case h.vZe.TEXT:return!(!e||"string"!==typeof e||"true"!==e.toLocaleLowerCase());case h.vZe.NUMBER:return e>0;default:return t}}(e,t,a);case h.vZe.NUMBER:return function(e,t,n,r){if(!Gn[h.vZe.NUMBER].includes(n))return t;if(0===e)return e;if(!e)return null;switch(n){case h.vZe.NUMBER:case h.vZe.RATE:case h.vZe.DURATION:return e;case h.vZe.TEXT:if(e.includes("%"))return(0,h.WHw)(e,"percent")}var o="string"===typeof e?e:e.toString();return(0,h.nYS)(o,r)}(e,t,a,s);case h.vZe.DATE:return function(e,t,n,r,o){var a=(null===o||void 0===o?void 0:o.format)||h.D23,i=(null===r||void 0===r?void 0:r.format)||h.D23;switch(n){case h.vZe.DATE:var l=i.indexOf("HH:mm"),s=a.indexOf("HH:mm");return l>-1&&s>-1||l===s?e:Hn(e,a);case h.vZe.CTIME:case h.vZe.MTIME:return Hn(e,a);case h.vZe.TEXT:if(e.indexOf("\u5e74")>-1){var u=e.replace(/\s*/g,"");return Vn.test(u)?Hn(u.replace(Vn,"$1-$2-$3"),a):""}return Hn(e,a);default:return t}}(e,t,a,i,s);case h.vZe.SINGLE_SELECT:return function(e,t,n,r){if(!e)return t;var o;switch(n.type){case h.vZe.SINGLE_SELECT:var a=(0,h.FiT)(n);o=(0,h.BW0)(a,e)||"";break;case h.vZe.MULTIPLE_SELECT:var i=(0,h.FiT)(n),l=e[0];o=(0,h.BW0)(i,l)||"";break;case h.vZe.TEXT:o=e}if(!o)return t;var s=(0,h.FiT)(r),u=(0,h.rgt)(s,o);return h.LOw.includes(r.key)?u.id:u.name}(e,t,r,n);case h.vZe.MULTIPLE_SELECT:return Zn(e,t,r,n,o);case h.vZe.LONG_TEXT:return function(e,t,n){var r=n.type,o=n.data;switch(r){case h.vZe.LONG_TEXT:var a={text:e};return(0,h.EDs)(a)?(0,h.ZRJ)(a).text:e||null;case h.vZe.TEXT:return e||null;case h.vZe.NUMBER:return(0,h.HLJ)(e,o)||null;case h.vZe.DATE:return(0,h.u1Q)(e,o.format||h.D23)||null;default:return t}}(e,t,r);case h.vZe.TEXT:return function(e,t,n){var r=n.type,o=n.data;switch(r){case h.vZe.TEXT:return(0,h.EtT)(e)?String(e):e?"string"===typeof e?e.replace(/\n/g,"").trim():String(e):null;case h.vZe.URL:case h.vZe.EMAIL:case h.vZe.AUTO_NUMBER:return e;case h.vZe.NUMBER:return(0,h.HLJ)(e,o);case h.vZe.DATE:return(0,h.u1Q)(e,o.format||h.D23);case h.vZe.SINGLE_SELECT:var a=(0,h.FiT)(n);return(0,h.BW0)(a,e)||null;case h.vZe.COLLABORATOR:var i=window.sfMetadata.getCollaborators();return(0,h.LYl)(i,e);case h.vZe.CREATOR:case h.vZe.LAST_MODIFIER:if(!e)return null;var l=window.sfMetadata.getCollaborators();return(0,h.LYl)(l,[e]);default:return t}}(e,t,r);case h.vZe.COLLABORATOR:return function(e,t,n){switch(n){case h.vZe.COLLABORATOR:if(!Array.isArray(e)||0===e.length)return null;var r=window.sfMetadata.getCollaborators(),o={};return r.forEach((function(e){return o[e.email]=!0})),e.filter((function(e){return!!o[e]}));case h.vZe.TEXT:if(!e)return t;var a=e.split(",");if(0===a.length)return t;var i=window.sfMetadata.getCollaborators(),l={};i.forEach((function(e){return l[e.name]=e}));var s=a.map((function(e){var t=l[e];return t?t.email:null})).filter(Boolean);return 0===s.length?t:s;case h.vZe.CREATOR:case h.vZe.LAST_MODIFIER:var u=window.sfMetadata.getCollaborators(),c={};return u.forEach((function(e){return c[e.email]=!0})),e&&c[e]?[e]:null;default:return t}}(e,t,a);case h.vZe.RATE:return function(e,t,n,r){var o=n.type;if(""===e||[h.vZe.TEXT,h.vZe.NUMBER,h.vZe.RATE].includes(o)){var a;if(0===e)return 0;if(!e)return null;var i=o===h.vZe.NUMBER?null===n||void 0===n||null===(a=n.data)||void 0===a?void 0:a.format:null;"percent"===i&&(e*=100);var l=(0,h.WHw)(e.toString(),i);if(l>0){var s=r.data.max,u=void 0===s?5:s,c=Number(l.toFixed(0));return c<u?c:u}return null}return null}(e,0,r,n);default:return t}}var Xn=function(e){return e.value},Wn=function(){return(0,E.A)((function e(t,n){(0,C.A)(this,e),this.metadata=t,this.api=n}),[{key:"getCopiedContent",value:function(e){var t=this,n=e.type,r=e.copied,o=e.isGroupView,a=e.columns;if(n===m.aG.DTABLE_FRAGMENT){var i=r.selectedRecordIds,l=r.copiedRange;if(Array.isArray(i)&&i.length>0)return{copiedRecords:i.map((function(e){return t.api.recordGetterById(e)})),copiedColumns:(0,_e.A)(a)};for(var s=[],u=[],c=l.topLeft,d=l.bottomRight,f=c.rowIdx,p=c.idx,h=c.groupRecordIndex,v=d.rowIdx,g=d.idx,y=h,C=f;C<=v;C++)s.push(this.api.recordGetterByIndex({isGroupView:o,groupRecordIndex:y,recordIndex:C})),o&&y++;for(var E=p;E<=g;E++)u.push((0,V.wV)(E,a));return{copiedRecords:s,copiedColumns:u}}return{copiedRecords:r.copiedRecords,copiedColumns:r.copiedColumns}}},{key:"paste",value:function(){var e=(0,d.A)((0,c.A)().mark((function e(t){var n,r,o,a,i,l,s,u,d,f,p,m,v,g,y,C,E,_,A,b,S,w,O,R,T,x,M,D,I,N,L,k,P,F,j,Y,U,B,H,G,Z,z,X,W,K,$,q;return(0,c.A)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.copied,r=t.multiplePaste,o=t.pasteRange,a=t.isGroupView,i=t.columns,l=this.metadata.row_ids,s=o.topLeft,u=o.bottomRight,d=void 0===u?{}:u,f=s.rowIdx,p=s.idx,m=s.groupRecordIndex,v=d.rowIdx,g=d.idx,y=n.copiedRecords,C=n.copiedColumns,E=y.length,_=C.length,A=r?v-f+1:E,b=r?g-p+1:_,S=l.length,!(E>S-f)){e.next=14;break}return e.abrupt("return");case 14:w=[],O={},R={},T={},x={},M=m,D=0;case 21:if(!(D<A)){e.next=59;break}if(I=this.api.recordGetterByIndex({isGroupView:a,groupRecordIndex:M,recordIndex:f+D}),a&&M++,I){e.next=26;break}return e.abrupt("continue",56);case 26:N=I._id,L=y[D%E],k={},P={},F={},j={},Y=window.sfMetadataContext,U=Y.canModifyRow,B=Y.canModifyColumn,H=0;case 35:if(!(H<b)){e.next=55;break}if((G=(0,V.wV)(H+p,i))&&U(I)&&B(G)){e.next=39;break}return e.abrupt("continue",52);case 39:if(Z=H%_,z=(0,V.wV)(Z,C),X=(0,V.KO)(G),W=(0,V.KO)(z),K=Object.prototype.hasOwnProperty.call(I,X)?(0,h.Teq)(I,G):null,$=Object.prototype.hasOwnProperty.call(L,W)?(0,h.Teq)(L,z):null,(q=zn($,K,G,z,this.api))!==K){e.next=48;break}return e.abrupt("continue",52);case 48:k[X]=q,P[G.key]=q,F[X]=K,j[G.key]=K;case 52:H++,e.next=35;break;case 55:Object.keys(k).length>0&&(w.push(N),O[N]=k,R[N]=P,T[N]=F,x[N]=j);case 56:D++,e.next=21;break;case 59:if(0!==w.length){e.next=61;break}return e.abrupt("return");case 61:this.api.modifyRecords(w,O,R,T,x,true);case 62:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getLinkedRowsIdsByNameColumn",value:function(e,t,n,r){if(!Array.isArray(e)||0===e.length)return[];var o=String(n),a=e.find((function(e){var t;return(null===(t=e["0000"])||void 0===t?void 0:t.trim())===o.trim()}))||null;if(a)return r[t]=[{display_value:o,row_id:a._id}],[a._id];var i=[];if(o.includes(",")||o.includes("\uff0c")){var l=o.split(/[,\uff0c]/).map((function(e){return e.trim()})).filter((function(e,t,n){return n.indexOf(e)===t}));if(!Array.isArray(l)||0===l.length)return[];r[t]=[],l.forEach((function(n){var o=e.find((function(e){var t;return(null===(t=e["0000"])||void 0===t?void 0:t.trim())===n}))||null;o&&(r[t].push({display_value:n,row_id:o._id}),i.push(o._id))}))}return i}},{key:"getUpdateDraggedRecords",value:function(e,t,n,r,o){for(var a=[],i={},l={},s={},c={},d=e.overRecordIdx,f=e.topLeft,p=e.bottomRight,h=f.idx,v=p.idx,g=p.rowIdx,y=p.groupRecordIndex,C=window.sfMetadataContext,E=C.canModifyRow,_=C.canModifyColumn,A=this.getDraggedRangeMatrix(t,e,n,o,r),b=this.getDraggedRangeRules(A,t,h),S=A[0].length,w=A[0].length,O=y+1,R=g+1;R<=d;R++){var T=void 0;if(O)T=r[Re(O,o).rowId];else T=n[R];var x=T._id;if(w++,E(T)){a.push(x);for(var M=(R-g-1)%S,D=h;D<=v;D++){var I=t[D],N=I.key,L=I.type,k=(0,V.KO)(I);if(_(I)&&!m.__.includes(L)){var P=A[D-h][M],F=(0,b[N])({n:w-1,value:P});i[x]=Object.assign({},i[x],(0,u.default)({},k,F)),l[x]=Object.assign({},l[x],(0,u.default)({},k,T[k]));var j=i[x],Y=l[x];s[x]=Object.assign({},s[x],j),c[x]=Object.assign({},c[x],Y)}}O++}}return{recordIds:a,idOriginalRecordUpdates:i,idRecordUpdates:s,idOriginalOldRecordData:l,idOldRecordData:c}}},{key:"getDraggedRangeMatrix",value:function(e,t,n,r,o){for(var a=[],i=t.topLeft,l=t.bottomRight,s=i.idx,u=i.rowIdx,c=i.groupRecordIndex,d=l.idx,f=l.rowIdx,p=s;p<=d;p++){var m=c;a[p-s]=[];for(var v=e[p],g=u;g<=f;g++){var y=void 0;if(m)y=o[Re(m,r).rowId];else y=n[g];a[p-s][g-u]=(0,h.Teq)(y,v),m++}}return a}},{key:"getDraggedRangeRules",value:function(e,t,n){var r=this,o={};return e.forEach((function(e,a){var i=t[a+n],l=i.type,s=i.data,u=i.key,c=Xn;if(e.length>1)switch(l){case h.vZe.DATE:var d=s&&s.format&&s.format.indexOf("HH:mm")>-1?"YYYY-MM-DD HH:mm":"YYYY-MM-DD",f=e[0],p=r.getYearTolerance(e);if(p){c=function(e){var t=e.n;return Ze()(f).add(t*p,"years").format(d)};break}var m=r.getMonthTolerance(e);if(m){c=function(e){var t=e.n;return Ze()(f).add(t*m,"months").format(d)};break}var v=r.getDayTolerance(e);if(v){c=function(e){var t=e.n*v+r.getDateStringValue(f);return Ze()(t).format(d)};break}break;case h.vZe.NUMBER:c=r.getLeastSquares(e);break;case h.vZe.TEXT:c=r._getTextRule(e);break;case h.vZe.RATE:c=r.getRatingLeastSquares(e,s);break;default:c=Xn}o[u]=c})),o}},{key:"getDateStringValue",value:function(e){var t=Ze()(e);return t.isValid()?t.valueOf():0}},{key:"getYearTolerance",value:function(e){var t=Ze()(e[0]),n=Ze()(e[1]);if(!t.isValid()||!n.isValid())return 0;if(t.month()!==n.month()||t.date()!==n.date()||t.hour()!==n.hour()||t.minute()!==n.minute())return 0;var r=t.year(),o=n.year()-r;return e.every((function(e,t){var n=Ze()(e);return!!n.isValid()&&n.year()===t*o+r}))?o:0}},{key:"getMonthTolerance",value:function(e){var t=Ze()(e[0]),n=Ze()(e[1]);if(!t.isValid()||!n.isValid())return 0;if(t.date()!==n.date()||t.hour()!==n.hour()||t.minute()!==n.minute())return 0;var r=n.month()-t.month()+12*(n.year()-t.year());return e.every((function(t,n){var o=n*r,a=Ze()(t);return!!a.isValid()&&a.isSame(Ze()(e[0]).add(o,"month"),"minute")}))?r:0}},{key:"getDayTolerance",value:function(e){var t=this,n=this.getDateStringValue(e[0]),r=this.getDateStringValue(e[1])-n;return e.every((function(e,o){return!!Ze()(e).isValid()&&t.getDateStringValue(e)===o*r+n}))?r:0}},{key:"getLeastSquares",value:function(e){var t,n,r,o,a=0,i=0,l=0,s=0,u=0,c=[];return e.forEach((function(e,t){void 0!==e&&null!==e&&""!==e?(u++,a+=t,i+=e,s+=e*t,l+=Math.pow(t,2)):c.push(t)})),u<2?Xn:(t=(s-u*(r=a/u)*(o=i/u))/(l-u*Math.pow(r,2)),n=o-t*r,function(r){var o=r.n;return c.length&&c.includes(o%e.length)?"":Number(parseFloat(o*t+n).toFixed(8))})}}])}(),Kn=Wn,$n=["metadata","modifyRecord","modifyRecords","loadMore","loadAll","searchResult","recordGetterByIndex","recordGetterById","modifyColumnData"],qn=function(e){var t,n,a=e.metadata,i=e.modifyRecord,s=e.modifyRecords,c=e.loadMore,d=e.loadAll,f=(e.searchResult,e.recordGetterByIndex),p=e.recordGetterById,h=e.modifyColumnData,g=(0,v.A)(e,$n),C=(0,o.useMemo)((function(){return new Kn(a,{modifyRecord:i,modifyRecords:s,recordGetterByIndex:f,recordGetterById:p,modifyColumnData:h})}),[a,i,s,f,p,h]),E=(0,o.useMemo)((function(){var e;return((null===a||void 0===a||null===(e=a.view)||void 0===e?void 0:e.groupbys)||[]).length}),[a]),_=(0,o.useMemo)((function(){return E*m.ax}),[E]),A=(0,o.useMemo)((function(){var e=a.view,t=e.columns,n=e.hidden_columns;return t.filter((function(e){return!n.includes(e.key)}))}),[a]),b=(0,o.useCallback)((function(e){var t=e.type,n=e.copied,r=e.isGroupView;return C.getCopiedContent({type:t,copied:n,isGroupView:r,columns:A})}),[C,A]),S=(0,o.useCallback)((function(e){var t=e.rowId,n=e.updates,r=e.originalUpdates,o=e.oldRowData,a=e.originalOldRowData;i&&i(t,n,o,r,a)}),[i]),w=(0,o.useCallback)((function(e){var t=e.recordIds,n=e.idRecordUpdates,r=e.idOriginalRecordUpdates,o=e.idOldRecordData,a=e.idOriginalOldRecordData,i=e.isCopyPaste;s&&s(t,n,r,o,a,void 0!==i&&i)}),[s]),O=(0,o.useCallback)((function(e){var t=e.type,n=e.copied,r=e.multiplePaste,o=e.pasteRange,a=e.isGroupView;C.paste({type:t,copied:n,multiplePaste:r,pasteRange:o,isGroupView:a,columns:A})}),[C,A]);return(0,l.jsx)("div",{className:y()("table-main-container container-fluid p-0",(0,u.default)({},"group-level-".concat(E+1),E>0)),children:(0,l.jsx)(Un,(0,r.A)({columns:A,recordIds:a.view.rows||[],groups:a.view.groups,groupbys:a.view.groupbys,recordsCount:(null===a||void 0===a||null===(t=a.view)||void 0===t||null===(n=t.rows)||void 0===n?void 0:n.length)||0,table:a,hasMore:a.hasMore,gridUtils:C,scrollToLoadMore:c,loadAll:d,paste:O,groupOffsetLeft:_,modifyRecord:S,updateRecords:w,getCopiedRecordsAndColumnsFromRange:b,recordGetterById:p,recordGetterByIndex:f,modifyColumnData:h},g))})},Qn=function(){var e=(0,o.useState)(!1),t=(0,f.A)(e,2),n=t[0],r=t[1],i=(0,a.p)(),s=i.isLoading,v=i.metadata,g=i.store,y=(0,o.useRef)(null),C=(0,o.useCallback)((function(e){if(!e.target.className.includes("editor-main"))return h.sR0.isModF(e)?(e.preventDefault(),void window.sfMetadataContext.eventBus.dispatch(m.Tw.SEARCH_CELLS)):void 0}),[]),E=(0,o.useMemo)((function(){return!(s||!v)&&(0,h.YD9)(v.view.groupbys,v.columns).length>0}),[s,v]),_=(0,o.useCallback)((0,d.A)((0,c.A)().mark((function e(){var t;return(0,c.A)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(v.hasMore){e.next=2;break}return e.abrupt("return");case 2:return r(!0),e.prev=3,e.next=6,g.loadMore(m.bK);case 6:r(!1),e.next=15;break;case 9:return e.prev=9,e.t0=e.catch(3),t=ae.Aq.getErrorMsg(e.t0),p.A.danger(t),r(!1),e.abrupt("return");case 15:case"end":return e.stop()}}),e,null,[[3,9]])}))),[v,g]),A=(0,o.useCallback)(function(){var e=(0,d.A)((0,c.A)().mark((function e(t,n){var o,a,i;return(0,c.A)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(v.hasMore){e.next=2;break}return e.abrupt("return");case 2:return r(!0),o=v.row_ids.length,a=o%m._z!==0?m._z-o%m._z:m._z,e.prev=5,e.next=8,g.loadMore(a);case 8:r(!1),e.next=17;break;case 11:return e.prev=11,e.t0=e.catch(5),i=ae.Aq.getErrorMsg(e.t0),p.A.danger(i),r(!1),e.abrupt("return");case 17:g.data.hasMore&&g.data.row_ids.length<t?A(t,n):("function"===typeof n&&n(g.data.hasMore),r(!1));case 18:case"end":return e.stop()}}),e,null,[[5,11]])})));return function(t,n){return e.apply(this,arguments)}}(),[v,g]),b=(0,o.useCallback)((function(e,t,n,r,o){var a=arguments.length>5&&void 0!==arguments[5]&&arguments[5];g.modifyRecords(e,t,n,r,o,a)}),[g]),S=(0,o.useCallback)((function(e,t,n,r,o){var a=[e],i=(0,u.default)({},e,t),l=(0,u.default)({},e,r),s=(0,u.default)({},e,n),c=(0,u.default)({},e,o);b(a,i,l,s,c)}),[b]),w=(0,o.useCallback)((function(e){var t=v.row_ids.length,n=[],r=[],o=[],a={};return e.forEach((function(e){return a[e]=e})),v.row_ids.forEach((function(e,i){if(a[e]){var l=0===i?null:v.row_ids[i-1],s=i===t-1?null:v.row_ids[i+1];n.push(e),r.push(l),o.push(s)}})),{rowIdsInOrder:n,upperRowIds:r,belowRowIds:o}}),[v]),O=(0,o.useCallback)((function(e,t,n){g.renameColumn(e,t,n)}),[g]),R=(0,o.useCallback)((function(e,t){g.deleteColumn(e,t)}),[g]),T=(0,o.useCallback)((function(e,t,n){g.modifyColumnData(e,t,n)}),[g]),x=(0,o.useCallback)((function(e,t){g.modifyColumnWidth(e,t)}),[g]),M=(0,o.useCallback)((function(e,t){g.modifyColumnOrder(e,t)}),[g]),D=(0,o.useCallback)((function(e){return v.id_row_map[e]}),[v]),I=(0,o.useCallback)((function(e){var t=v.view.rows[e];return t&&D(t)}),[v,D]),N=(0,o.useCallback)((function(e){if(!window.sfMetadataBody||!window.sfMetadataBody.getGroupRecordByIndex)return null;var t=window.sfMetadataBody.getGroupRecordByIndex(e).rowId;return t&&D(t)}),[D]),L=(0,o.useCallback)((function(e){var t=e.isGroupView,n=e.groupRecordIndex,r=e.recordIndex;return t?N(n):I(r)}),[N,I]),k=(0,o.useCallback)((function(){var e;return(null===y||void 0===y||null===(e=y.current)||void 0===e?void 0:e.getBoundingClientRect())||{x:0,right:window.innerWidth}}),[y]);return(0,o.useEffect)((function(){return document.addEventListener("keydown",C),function(){document.removeEventListener("keydown",C)}}),[]),(0,l.jsx)("div",{className:"sf-metadata-container",ref:y,children:(0,l.jsx)(qn,{isGroupView:E,isLoadingMore:n,loadMore:_,metadata:v,modifyRecord:S,modifyRecords:b,recordGetterById:D,recordGetterByIndex:L,getTableContentRect:k,getAdjacentRowsIds:w,loadAll:A,renameColumn:O,deleteColumn:R,modifyColumnData:T,modifyColumnWidth:x,modifyColumnOrder:M})})},Jn=function(e){var t=e.groups,n=e.overScan,r=e.columns,a=e.size,s=e.gap,u=(0,o.useMemo)((function(){return a+s}),[a,s]),c=(0,o.useCallback)((function(e){var t=n.top,o=n.bottom,i=e.name,s=e.children,c=e.height,d=e.top;if(d>=o||d+c<=t)return(0,l.jsx)("div",{className:"w-100",style:{height:c,flexShrink:0}},i);var f=s.findIndex((function(e){return e.top>=t})),p=s.findIndex((function(e){return e.top>=o}));return-1===f&&-1===p?(0,l.jsx)("div",{className:"w-100",style:{height:c,flexShrink:0}},i):(f=Math.max(f,0),-1===p&&(p=s.length),p>0&&(p-=1),(0,l.jsxs)("div",{className:"metadata-gallery-date-group w-100",style:{height:c},children:[0===f&&(0,l.jsx)("div",{className:"metadata-gallery-date-tag",children:i}),(0,l.jsx)("div",{className:"metadata-gallery-image-list",style:{gridTemplateColumns:"repeat(".concat(r,", 1fr)"),paddingTop:f*u,paddingBottom:(s.length-1-p)*u},children:s.slice(f,p+1).map((function(e){return e.children.map((function(e){return(0,l.jsx)("div",{tabIndex:1,className:"metadata-gallery-image-item",style:{width:a,height:a,background:"#f1f1f1"},children:(0,l.jsx)("img",{className:"metadata-gallery-grid-image",src:e.src,alt:e.name})},e.src)}))}))})]},i))}),[n,r,a,u]);return Array.isArray(t)&&0!==t.length?t.map((function(e,t){return c(e,t)})):(0,l.jsx)(Dn.A,{text:(0,i.AP)("No record")})},er=["children"],tr=function(){var e=(0,o.useRef)(null),t=(0,o.useState)(!0),n=(0,f.A)(t,2),i=n[0],u=n[1],g=(0,o.useState)(!1),y=(0,f.A)(g,2),C=y[0],E=y[1],_=(0,o.useState)(0),A=(0,f.A)(_,2),b=A[0],S=A[1],w=(0,o.useState)(0),O=(0,f.A)(w,2),R=O[0],T=O[1],x=(0,o.useState)({top:0,bottom:0}),M=(0,f.A)(x,2),D=M[0],I=M[1],N=(0,o.useRef)(null),L=(0,a.p)(),k=L.metadata,P=L.store,F=window.sfMetadataContext.getSetting("repoID"),Y=(0,o.useMemo)((function(){return 8-b}),[b]),U=(0,o.useMemo)((function(){return(R-2*Y-2)/Y}),[R,Y]),B=(0,o.useMemo)((function(){if(i)return[];var e=k.view.sorts[0],t=k.rows.filter((function(e){return ae.Aq.imageCheck(e[h.L2D.FILE_NAME])})).reduce((function(t,n){var r=n[h.L2D.FILE_NAME],o=n[h.L2D.PARENT_DIR],a=ae.Aq.encodePath(ae.Aq.joinPath(o,r)),i=(0,h.u1Q)(n[e.column_key],"YYYY-MM-DD"),l={name:r,url:"".concat(j.Yc,"lib/").concat(F,"/file").concat(a),src:"".concat(j.Yc,"thumbnail/").concat(F,"/").concat(j.HJ).concat(a),date:i},s=t.find((function(e){return e.name===i}));return s?s.children.push(l):t.push({name:i,children:[l]}),t}),[]),n=[],o=U+2;return t.forEach((function(e,t){var a=e.children,i=(0,v.A)(e,er),l=0,s=[];if(t>0){var u=n[t-1],c=u.top,d=u.height;l=c+d}a.forEach((function(e,t){var n=~~(t/Y);s[n]||(s[n]={top:l+n*o,children:[]}),s[n].children.push(e)}));var f=s.length*o;n.push((0,r.A)((0,r.A)({},i),{},{top:l,height:f,children:s}))})),n}),[i,k,k.recordsCount,F,Y,U]),H=(0,o.useCallback)((0,d.A)((0,c.A)().mark((function e(){var t;return(0,c.A)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!C){e.next=2;break}return e.abrupt("return");case 2:if(k.hasMore){e.next=4;break}return e.abrupt("return");case 4:return E(!0),e.prev=5,e.next=8,P.loadMore(m.bK);case 8:E(!1),e.next=17;break;case 11:return e.prev=11,e.t0=e.catch(5),t=ae.Aq.getErrorMsg(e.t0),p.A.danger(t),E(!1),e.abrupt("return");case 17:case"end":return e.stop()}}),e,null,[[5,11]])}))),[C,k,P]);(0,o.useEffect)((function(){var t=window.sfMetadataContext.localStorage.getItem("zoom-gear",0)||0;S(t);var n=e.current;if(n){var r=n.offsetWidth,o=n.clientHeight;T(r);var a=8-t;I({top:0,bottom:o+2*((r-2*a-2)/a+2)})}u(!1);var i=new ResizeObserver((function(){n&&T(n.offsetWidth)}));n&&i.observe(n);var l=window.sfMetadataContext.eventBus.subscribe(m.Tw.MODIFY_GALLERY_ZOOM_GEAR,(function(e){window.sfMetadataContext.localStorage.setItem("zoom-gear",e),S(e),setTimeout((function(){n.scrollTop+=10*e}),200)}));return function(){n&&i.unobserve(n),l(),N.current&&clearTimeout(N.current)}}),[]);var G=(0,o.useCallback)((function(){if(e.current){var t=e.current,n=t.scrollTop,r=t.scrollHeight;n+t.clientHeight>=r-10?H():(N.current&&clearTimeout(N.current),N.current=setTimeout((function(){var t=e.current,n=t.scrollTop,r=t.clientHeight,o=Math.max(0,n-3*(U+2));I({top:o,bottom:n+r+3*(U+2)}),N.current=null}),200))}}),[U,H,N]);return(0,l.jsx)("div",{className:"sf-metadata-container",children:(0,l.jsx)("div",{className:"sf-metadata-gallery-container",ref:e,onScroll:G,children:!i&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(Jn,{groups:B,size:U,columns:Y,overScan:D,gap:2}),C&&(0,l.jsx)("div",{className:"sf-metadata-gallery-loading-more",children:(0,l.jsx)(s.Du,{})})]})})})},nr=function(){var e=(0,a.p)(),t=e.isLoading,n=e.metadata,r=e.errorMsg,u=(0,o.useCallback)((function(e){if(!e)return!1;switch(e.view.type){case h.rX9.GALLERY:return(0,l.jsx)(tr,{});case h.rX9.TABLE:return(0,l.jsx)(Qn,{});default:return null}}),[]);return t?(0,l.jsx)(s.Du,{}):(0,l.jsx)("div",{className:"sf-metadata-wrapper",children:(0,l.jsx)("div",{className:"sf-metadata-main",children:r?(0,l.jsx)("div",{className:"d-center-middle error",children:(0,i.AP)(r)}):u(n)})})},rr=function(e){var t=e.value,n=e.onChange,r=(0,o.useCallback)((function(e){e&&e.stopPropagation(),n(!t)}),[t,n]);return(0,l.jsx)("div",{className:"sf-metadata-property-detail-editor sf-metadata-checkbox-property-detail-editor",children:(0,l.jsx)("div",{className:"sf-metadata-checkbox-property-detail-editor-content",onClick:r,children:t&&(0,l.jsx)(s.In,{iconName:"check-mark"})})})},or=o.memo((function(e){var t=e.value,n=e.onChange,r=(0,o.useState)(!1),a=(0,f.A)(r,2),u=a[0],c=a[1],d=(0,o.useRef)(null);(0,o.useEffect)((function(){d.current.innerText=t||""}),[t]);var p=(0,o.useCallback)((function(){if(u){var e=d.current.innerText;e!==t&&n((0,i.yD)(e)||""),c(!1)}}),[u,t,n]),m=(0,o.useCallback)((function(e){e.stopPropagation()}),[]),h=(0,o.useCallback)((function(e){e.stopPropagation()}),[]),v=(0,o.useCallback)((function(e){var t=e.currentTarget,n=t.selectionStart,r=t.selectionEnd,o=t.value;e.keyCode===ft.cK.Enter?(e.preventDefault(),p()):(e.keyCode===ft.cK.ChineseInputMethod||e.keyCode===ft.cK.LeftArrow&&0===n||e.keyCode===ft.cK.RightArrow&&r===o.length)&&e.stopPropagation()}),[p]),g=(0,o.useCallback)((function(){u||(c(!0),setTimeout((function(){d.current.focus();var e=document.createRange();e.selectNodeContents(d.current),e.collapse(!1);var t=window.getSelection();t.removeAllRanges(),t.addRange(e)}),1))}),[u]);return(0,l.jsx)(s.ij,{onClickOutside:p,children:(0,l.jsx)("div",{className:y()("sf-metadata-property-detail-editor sf-metadata-text-property-detail-editor",{formatter:!u}),onClick:g,ref:d,onKeyDown:v,onCut:h,onPaste:m,placeholder:(0,i.AP)("Empty"),contentEditable:u})})}),(function(e,t){return!(ne(e.value,t.value,t.field.type)||!te.A.isSameObject(e.field,t.field)||e.onChange!==t.onChange)})),ar=o.memo((function(e){var t=e.value,n=e.field,r=e.onChange,a=(0,o.useState)(""),s=(0,f.A)(a,2),u=s[0],c=s[1],d=(0,o.useRef)(null);(0,o.useEffect)((function(){var e=t||0===t?t:"",r=(null===n||void 0===n?void 0:n.data)||{},o=(0,h.HLJ)(e,r)||"";c(o)}),[t,n]);var p=(0,o.useCallback)((function(e){var t,r=(null===n||void 0===n||null===(t=n.data)||void 0===t?void 0:t.format)||h.KYu,o="custom_currency"===r?n.data.currency_symbol:null,a=e.target.value.trim();if((0,h.cX8)()||!(a.indexOf(".\u3002")>-1)){var i=(0,h.yAg)(a,r,o);i!==u&&c(i)}}),[n,u]),m=(0,o.useCallback)((function(){var e=(0,h.nYS)(u,n.data);e!==t&&r(e)}),[t,u,n,r]),v=(0,o.useCallback)((function(e){e.stopPropagation()}),[]),g=(0,o.useCallback)((function(e){e.stopPropagation()}),[]),y=(0,o.useCallback)((function(e){var t=e.currentTarget,n=t.selectionStart,r=t.selectionEnd,o=t.value;e.keyCode===ft.cK.Enter?(e.preventDefault(),d.current&&d.current.blur()):(e.keyCode===ft.cK.ChineseInputMethod||e.keyCode===ft.cK.LeftArrow&&0===n||e.keyCode===ft.cK.RightArrow&&r===o.length)&&e.stopPropagation()}),[]),C=(0,o.useCallback)((function(e){p(e)}),[p]);return(0,l.jsx)("input",{ref:d,type:"text",className:"sf-metadata-number-property-detail-editor form-control",placeholder:(0,i.AP)("Empty")||"",onBlur:m,onCut:g,onPaste:v,value:u,name:n.name,title:n.name,"aria-label":n.name,onChange:p,onKeyDown:y,onCompositionEnd:C})}),(function(e,t){return!(ne(e.value,t.value,t.field.type)||!te.A.isSameObject(e.field,t.field)||e.onChange!==t.onChange)})),ir=n(9772),lr=function(e){var t=e.field,n=e.value,a=e.record,s=e.fields,u=e.onChange,c=e.modifyColumnData,d=(0,o.useRef)(null),p=(0,o.useState)(!1),m=(0,f.A)(p,2),v=m[0],g=m[1],y=(0,o.useMemo)((function(){return(0,h.FiT)(t)}),[t]),C=(0,o.useCallback)((function(e){if(e.target&&!((0,i.wD)(e).indexOf("sf-metadata-search-options")>-1)){var t=document.querySelector(".sf-metadata-single-select-editor");t&&(t.contains(e.target)||d.current&&!d.current.contains(e.target)&&v&&g(!1))}}),[v]),E=(0,o.useCallback)((function(e){e.keyCode===h.cKb.Esc&&v&&g(!1)}),[v]);(0,o.useEffect)((function(){return document.addEventListener("mousedown",C),document.addEventListener("keydown",E,!0),function(){document.removeEventListener("mousedown",C),document.removeEventListener("keydown",E,!0)}}),[C,E]);var _=(0,o.useCallback)((function(){g(!0)}),[]),A=(0,o.useCallback)((function(e){!e||(0,h.om8)(y,e)?(u(e),g(!1)):g(!1)}),[y,u]),b=n?(0,h.om8)(y,n):null,S=(0,o.useCallback)((function(){if(!v)return null;var e=d.current.getBoundingClientRect().width;return(0,l.jsx)(ir.A,{target:d,isOpen:!0,placement:"bottom-end",hideArrow:!0,fade:!1,className:"sf-metadata-property-editor-popover sf-metadata-single-select-property-editor-popover",boundariesElement:document.body,children:(0,l.jsx)(_t,{value:n,column:(0,r.A)((0,r.A)({},t),{},{width:Math.max(e-2,200)}),columns:s,modifyColumnData:c,record:a,height:2,onCommit:A})})}),[v,A,a,n,c,s,t]);return(0,l.jsxs)("div",{className:"sf-metadata-property-detail-editor sf-metadata-single-select-property-detail-editor",placeholder:(0,i.AP)("Empty"),ref:d,onClick:_,children:[b&&(0,l.jsx)("div",{className:"sf-metadata-single-select-property-value",style:{backgroundColor:b.color,color:b.textColor||null},children:b.name}),S()]})},sr=function(e){var t=e.field,n=e.value,a=e.onChange,s=e.modifyColumnData,u=(0,o.useRef)(null),c=(0,o.useState)(!1),d=(0,f.A)(c,2),p=d[0],m=d[1],v=(0,o.useMemo)((function(){return(0,h.FiT)(t)}),[t]),g=(0,o.useCallback)((function(e){if(e.target&&!((0,i.wD)(e).indexOf("sf-metadata-search-options")>-1)){var t=document.querySelector(".sf-metadata-multiple-select-editor");t&&(t.contains(e.target)||u.current&&!u.current.contains(e.target)&&p&&m(!1))}}),[p]),y=(0,o.useCallback)((function(e){e.keyCode===h.cKb.Esc&&p&&m(!1)}),[p]);(0,o.useEffect)((function(){return document.addEventListener("mousedown",g),document.addEventListener("keydown",y,!0),function(){document.removeEventListener("mousedown",g),document.removeEventListener("keydown",y,!0)}}),[g,y]);var C=(0,o.useCallback)((function(){m(!0)}),[]),E=(0,o.useCallback)((function(e,r){r&&r.stopPropagation(),r&&r.nativeEvent&&r.nativeEvent.stopImmediatePropagation();var o=(0,h.bLM)(t,n).filter((function(t){return t!==e}));a(o)}),[t,n,a]),_=(0,o.useCallback)((function(e){a(e)}),[a]),A=(0,o.useCallback)((function(){if(!p)return null;var e=u.current.getBoundingClientRect().width;return(0,l.jsx)(ir.A,{target:u,isOpen:!0,placement:"bottom-end",hideArrow:!0,fade:!1,className:"sf-metadata-property-editor-popover sf-metadata-single-select-property-editor-popover sf-metadata-multiple-select-property-editor-popover",boundariesElement:document.body,children:(0,l.jsx)(St,{saveImmediately:!0,value:n,column:(0,r.A)((0,r.A)({},t),{},{width:Math.max(e-2,200)}),modifyColumnData:s,onCommit:_})})}),[p,_,n,s,t]),b=(0,o.useMemo)((function(){if(!Array.isArray(n)||0===n.length)return!0;var e=v.filter((function(e){return n.includes(e.id)||n.includes(e.name)})),t=n.filter((function(e){return e&&!v.find((function(t){return t.id===e||t.name===e}))}));return e.length+t.length===0}),[v,n]);return(0,l.jsxs)("div",{className:"sf-metadata-property-detail-editor sf-metadata-single-select-property-detail-editor sf-metadata-multiple-select-property-detail-editor",placeholder:(0,i.AP)("Empty"),ref:u,onClick:C,children:[!b&&(0,l.jsx)(At,{value:n,options:v,onDelete:E}),A()]})},ur=function(e){var t=e.field,n=e.value,r=e.onChange,a=(0,o.useRef)(null),s=(0,o.useState)(!1),u=(0,f.A)(s,2),c=u[0],d=u[1],p=(0,oe.D1)().getCollaborator,m=(0,o.useCallback)((function(e){if(c&&(e.target&&!((0,i.wD)(e).indexOf("sf-metadata-search-collaborators")>-1))){var t=document.querySelector(".sf-metadata-collaborator-editor");t&&t.contains(e.target)||a.current.contains(e.target)||d(!1)}}),[c]),v=(0,o.useCallback)((function(e){e.keyCode===h.cKb.Esc&&c&&d(!1)}),[c]);(0,o.useEffect)((function(){return document.addEventListener("mousedown",m),document.addEventListener("keydown",v,!0),function(){document.removeEventListener("mousedown",m),document.removeEventListener("keydown",v,!0)}}),[m,v]);var g=(0,o.useCallback)((function(){d(!0)}),[]),y=(0,o.useCallback)((function(e){r(e)}),[r]),C=(0,o.useCallback)((function(e,t){t&&t.stopPropagation(),t&&t.nativeEvent&&t.nativeEvent.stopImmediatePropagation();var o=n.filter((function(t){return t!==e}));r(o)}),[n,r]),E=(0,o.useCallback)((function(){if(!c)return null;var e=a.current.getBoundingClientRect().width;return(0,l.jsx)(ir.A,{target:a,isOpen:!0,placement:"bottom-end",hideArrow:!0,fade:!1,className:"sf-metadata-property-editor-popover sf-metadata-collaborator-property-editor-popover",boundariesElement:document.body,style:{width:Math.max(e-2,200)},children:(0,l.jsx)(Rt,{saveImmediately:!0,value:n,column:t,height:2,onCommit:y})})}),[c,y,n,t]),_=Array.isArray(n)?n.filter((function(e){return p(e)})):[];return(0,l.jsxs)("div",{className:"sf-metadata-property-detail-editor sf-metadata-collaborator-property-detail-editor",placeholder:(0,i.AP)("Empty"),ref:a,onClick:g,children:[_.length>0&&(0,l.jsx)(wt,{value:n,onDelete:C}),E()]})},cr=function(e){var t=e.value,n=e.field,r=e.onChange,a=e.lang,u=(0,o.useState)(!1),c=(0,f.A)(u,2),d=c[0],p=c[1],m=(0,o.useMemo)((function(){var e;return(null===n||void 0===n||null===(e=n.data)||void 0===e?void 0:e.format)||h.D23}),[n]),v=(0,o.useCallback)((function(){p(!0)}),[]),g=(0,o.useCallback)((function(e){r(e)}),[r]),y=(0,o.useCallback)((function(){r(null),p(!1)}),[r]),C=(0,o.useCallback)((function(){p(!1)}),[]);return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{className:"sf-metadata-property-detail-editor sf-metadata-date-property-detail-editor",placeholder:(0,i.AP)("Empty"),onClick:v,children:(0,h.u1Q)(t,m)}),d&&(0,l.jsx)(s.US,{lang:a,format:m,value:t,onChange:g,onClose:C,onClear:y})]})},dr=function(e){var t=e.field,n=e.value,r=e.onChange,a=(0,o.useState)(n),i=(0,f.A)(a,2),u=i[0],c=i[1],d=(0,o.useState)(!1),p=(0,f.A)(d,2),m=p[0],h=p[1],v=(0,o.useCallback)((function(){h(!0)}),[]),g=(0,o.useCallback)((function(e){r&&r(e),c(e)}),[r]),y=(0,o.useCallback)((function(){h(!1)}),[]),C=!u||!u.trim();return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{className:"sf-metadata-property-detail-editor sf-metadata-long-text-property-detail-editor",placeholder:(0,j.AP)("Empty"),onClick:v,children:!C&&(0,l.jsx)(s.qz,{value:u,className:"sf-metadata-property-detail-formatter"})}),m&&(0,l.jsx)(Lt,{value:u,column:t,onCommit:g,onCommitCancel:y})]})},fr=function(e){var t=e.value,n=e.field,r=e.onChange,a=(0,o.useCallback)((function(e){r(e[n.key])}),[n,r]);return(0,l.jsx)("div",{className:"sf-metadata-property-detail-editor sf-metadata-rate-property-detail-editor",placeholder:(0,i.AP)("Empty"),children:(0,l.jsx)(ce,{isCellSelected:!0,field:n,value:t,onChange:a})})},pr=["field","onChange"],mr=function(e){var t=e.field,n=e.onChange,a=(0,v.A)(e,pr),i=(0,o.useCallback)((function(e){n(t.key,e)}),[t,n]);switch(t.type){case h.vZe.CHECKBOX:return(0,l.jsx)(rr,(0,r.A)((0,r.A)({},a),{},{field:t,onChange:i}));case h.vZe.TEXT:return(0,l.jsx)(or,(0,r.A)((0,r.A)({},a),{},{field:t,onChange:i}));case h.vZe.NUMBER:return(0,l.jsx)(ar,(0,r.A)((0,r.A)({},a),{},{field:t,onChange:i}));case h.vZe.DATE:return(0,l.jsx)(cr,(0,r.A)((0,r.A)({},a),{},{field:t,onChange:i,lang:j.vV}));case h.vZe.SINGLE_SELECT:return(0,l.jsx)(lr,(0,r.A)((0,r.A)({},a),{},{field:t,onChange:i}));case h.vZe.MULTIPLE_SELECT:return(0,l.jsx)(sr,(0,r.A)((0,r.A)({},a),{},{field:t,onChange:i}));case h.vZe.COLLABORATOR:return(0,l.jsx)(ur,(0,r.A)((0,r.A)({},a),{},{field:t,onChange:i}));case h.vZe.LONG_TEXT:return(0,l.jsx)(dr,(0,r.A)((0,r.A)({},a),{},{field:t,onChange:i}));case h.vZe.RATE:return(0,l.jsx)(fr,(0,r.A)((0,r.A)({},a),{},{field:t,onChange:i}));default:return null}},hr=n(88238),vr=function(e){var t=Object.assign({},(function(e){if(null==e)throw new TypeError("Cannot destructure "+e)}(e),e));return(0,l.jsx)(a.X,(0,r.A)((0,r.A)({},t),{},{children:(0,l.jsx)(nr,{})}))},gr=n(58195),yr=n(14113),Cr=n(99308),Er=n(85907),_r=n(18849),Ar=n(99730),br=n(19175),Sr=function(e){var t=e.toggle,n=e.submit;return(0,l.jsxs)(gr.A,{isOpen:!0,toggle:t,children:[(0,l.jsx)(yr.A,{toggle:t,children:(0,i.AP)("Turn off extended properties")}),(0,l.jsx)(Cr.A,{children:(0,l.jsx)("p",{children:(0,i.AP)("Do you really want to turn off extended properties? Existing properties will all be deleted.")})}),(0,l.jsxs)(Er.A,{children:[(0,l.jsx)(_r.A,{color:"secondary",onClick:t,children:(0,i.AP)("Cancel")}),(0,l.jsx)(_r.A,{color:"primary",onClick:n,children:(0,i.AP)("Turn off")})]})]})},wr=function(e){var t=e.value,n=e.repoID,r=e.toggle,a=e.submit,i=(0,o.useState)(t),s=(0,f.A)(i,2),u=s[0],c=s[1],d=(0,o.useState)(!1),m=(0,f.A)(d,2),h=m[0],v=m[1],g=(0,o.useState)(!1),C=(0,f.A)(g,2),E=C[0],_=C[1],A=(0,o.useCallback)((function(){h||r&&r()}),[h,r]),b=(0,o.useCallback)((function(){u?(v(!0),br.A.createMetadata(n).then((function(e){a(!0),r()})).catch((function(e){var t=ae.Aq.getErrorMsg(e);p.A.danger(t),v(!1)}))):_(!0)}),[n,u,a,r]),S=(0,o.useCallback)((function(){_(!E)}),[E]),w=(0,o.useCallback)((function(){_(!1),v(!0),br.A.deleteMetadata(n).then((function(e){a(!1),r()})).catch((function(e){var t=ae.Aq.getErrorMsg(e);p.A.danger(t),v(!1)}))}),[n,a,r]),O=(0,o.useCallback)((function(){c(!u)}),[u]);return(0,l.jsxs)(l.Fragment,{children:[!E&&(0,l.jsxs)(gr.A,{className:"metadata-status-management-dialog",isOpen:!0,toggle:A,children:[(0,l.jsx)(yr.A,{toggle:A,children:(0,j.AP)("Extended properties management")}),(0,l.jsxs)(Cr.A,{children:[(0,l.jsx)(Ar.A,{checked:u,disabled:h,size:"large",textPosition:"right",className:y()("change-metadata-status-management w-100",{disabled:h}),onChange:O,placeholder:(0,j.AP)("Enable extended properties")}),(0,l.jsx)("div",{className:"tip",children:(0,j.AP)("After enable extended properties for files, you can add different properties to files, like collaborators, file expiring time, file description. You can also create different views for files based extended properties.")})]}),(0,l.jsxs)(Er.A,{children:[(0,l.jsx)(_r.A,{color:"secondary",onClick:A,children:(0,j.AP)("Cancel")}),(0,l.jsx)(_r.A,{color:"primary",disabled:t===u||h,onClick:b,children:(0,j.AP)("Submit")})]})]}),E&&(0,l.jsx)(Sr,{toggle:S,submit:w})]})},Or=n(85077),Rr=n(95754),Tr=n(36402),xr=n(76115),Mr=n(33175),Dr=function(e){var t=e.value,n=e.target,r=e.otherViewsName,a=e.toggle,u=e.onSubmit,c=(0,o.useState)(t||""),d=(0,f.A)(c,2),p=d[0],m=d[1],v=(0,o.useState)(""),g=(0,f.A)(v,2),y=g[0],C=g[1],E=(0,o.useRef)(null),_=(0,o.useCallback)((function(e){m(e.target.value)}),[]),A=(0,o.useCallback)((function(){a()}),[a]),b=(0,o.useCallback)((function(e){e.preventDefault(),e.stopPropagation();var n=(0,h.LWT)(p,r),o=n.isValid,a=n.message;if(!o)return C(a),void E.current.focus();a!==t?u(a):A()}),[t,p,r,u,A]),S=(0,o.useCallback)((function(e){(0,Mr.isEnter)(e)&&b(e)}),[b]);return(0,l.jsxs)(s.Rw,{className:"sf-metadata-rename-view-popover",target:n,placement:"right-start",hideArrow:!0,fade:!1,modifiers:{preventOverflow:{boundariesElement:document.body}},canHide:!y,hide:A,hideWithEsc:A,children:[(0,l.jsx)("div",{className:"sf-metadata-rename-view-popover-header",children:(0,i.AP)("Rename view")}),(0,l.jsx)("div",{className:"seafile-divider dropdown-divider"}),(0,l.jsxs)("div",{className:"sf-metadata-rename-view-popover-body",children:[(0,l.jsx)(Or.A,{innerRef:E,className:"sf-metadata-view-rename-input",value:p,onChange:_,autoFocus:!0,onBlur:b,onKeyDown:S}),y&&(0,l.jsx)(xr.A,{color:"danger",className:"mt-2 mb-0",children:y})]})]})},Ir=n(42119),Nr=[{key:"table",type:h.rX9.TABLE},{key:"gallery",type:h.rX9.GALLERY}],Lr=function(e){var t=e.target,n=e.toggle,r=e.onOptionClick,a=(0,o.useRef)(null),s=(0,o.useCallback)((function(e){a.current&&!a.current.contains(e.target)&&n(e)}),[n]);(0,o.useEffect)((function(){return a.current&&document.addEventListener("click",s,!0),function(){document.removeEventListener("click",s,!0)}}),[s]);var u=(0,o.useCallback)((function(e){switch(e){case h.rX9.TABLE:return(0,i.AP)("Table");case h.rX9.GALLERY:return(0,i.AP)("Gallery");default:return e}}),[]);return(0,l.jsx)(Ir.A,{className:"sf-metadata-addview-popover",isOpen:!0,toggle:n,target:t,placement:"right-start",hideArrow:!0,fade:!1,boundariesElement:document.body,children:(0,l.jsxs)("div",{ref:a,children:[(0,l.jsx)("div",{className:"sf-metadata-addview-popover-header",children:(0,i.AP)("New view")}),(0,l.jsx)("div",{className:"sf-metadata-addview-popover-body",children:Nr.map((function(e,t){return(0,l.jsxs)("button",{className:"dropdown-item sf-metadata-addview-popover-item",onClick:function(){return r(e)},children:[(0,l.jsx)("div",{className:"left-icon",children:(0,l.jsx)(Rr.A,{symbol:h.jWt[e.type]||"table",className:"metadata-view-icon"})}),(0,l.jsx)("div",{children:u(e.type)})]},t)}))})]})})},kr=function(e){var t=e.canDelete,n=e.userPerm,r=e.isSelected,a=e.view,i=e.onClick,s=e.onDelete,u=e.onCopy,c=e.onUpdate,d=e.onMove,p=(0,o.useState)(!1),m=(0,f.A)(p,2),v=m[0],g=m[1],C=(0,o.useState)(!1),E=(0,f.A)(C,2),_=E[0],A=E[1],b=(0,o.useState)(!1),S=(0,f.A)(b,2),w=S[0],O=S[1],R=(0,o.useState)(!1),T=(0,f.A)(R,2),x=T[0],M=T[1],D=(0,oe.p_)().viewsMap,I=Object.values(D).filter((function(e){return e._id!==a._id})).map((function(e){return e.name})),N=(0,o.useMemo)((function(){return"rw"===n||"admin"===n}),[n]),L=(0,o.useMemo)((function(){return!(ae.Aq.isIEBrowser()||!N)}),[N]),k=(0,o.useMemo)((function(){if(!N)return[];var e=[{key:"rename",value:(0,j.AP)("Rename")},{key:"duplicate",value:(0,j.AP)("Duplicate")}];return t&&e.push({key:"delete",value:(0,j.AP)("Delete")}),e}),[N,t]),P=(0,o.useCallback)((function(){_||g(!0)}),[_]),F=(0,o.useCallback)((function(){_||g(!0)}),[_]),Y=(0,o.useCallback)((function(){_||g(!1)}),[_]),U=(0,o.useCallback)((function(){A(!0)}),[]),B=(0,o.useCallback)((function(){A(!1),g(!1)}),[]),H=(0,o.useCallback)((function(e){"rename"!==e?"duplicate"!==e?"delete"!==e||s():u():M(!0)}),[s,u]),G=(0,o.useCallback)((function(){M(!1)}),[]),V=(0,o.useCallback)((function(e,t){c({name:e},(function(){M(!1)}),t)}),[c]),Z=(0,o.useCallback)((function(e){if(!L)return!1;var t=JSON.stringify({type:"sf-metadata-view",view_id:a._id});e.dataTransfer.effectAllowed="move",e.dataTransfer.setData("application/drag-sf-metadata-view",t)}),[L,a]),z=(0,o.useCallback)((function(e){if(!L)return!1;O(!0)}),[L]),X=(0,o.useCallback)((function(){if(!L)return!1;O(!1)}),[L]),W=(0,o.useCallback)((function(e){if(!L)return!1;e.preventDefault(),e.dataTransfer.dropEffect="move"}),[L]),K=(0,o.useCallback)((function(e){if(!L)return!1;e.stopPropagation(),O(!1);var t=e.dataTransfer.getData("application/drag-sf-metadata-view");if(t){if("sf-metadata-view"!==(t=JSON.parse(t)).type)return!1;t.view_id&&d&&d(t.view_id,a._id)}}),[L,a,d]);return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{className:y()("tree-node-inner text-nowrap",{"tree-node-inner-hover":v,"tree-node-hight-light":r,"tree-node-drop":w}),title:(0,j.AP)("File extended properties"),onMouseEnter:P,onMouseOver:F,onMouseLeave:Y,onClick:function(){return i(a)},children:[(0,l.jsx)("div",{className:"tree-node-text",draggable:N,onDragStart:Z,onDragEnter:z,onDragLeave:X,onDragOver:W,onDrop:K,children:a.name}),(0,l.jsx)("div",{className:"left-icon",children:(0,l.jsx)("div",{className:"tree-node-icon",children:(0,l.jsx)(Rr.A,{symbol:h.jWt[a.type]||"table",className:"metadata-views-icon"})})}),(0,l.jsx)("div",{className:"right-icon",id:"metadata-view-dropdown-item-".concat(a._id),children:v&&(0,l.jsx)(Tr.A,{item:{name:"metadata-view"},toggleClass:"sf3-font sf3-font-more",freezeItem:U,unfreezeItem:B,getMenuList:function(){return k},onMenuItemClick:H,menuStyle:ae.Fr?{zIndex:1050}:{}})})]}),x&&(0,l.jsx)(Dr,{value:a.name,otherViewsName:I,target:"metadata-view-dropdown-item-".concat(a._id),toggle:G,onSubmit:V})]})},Pr=function(e){var t=e.userPerm,n=e.currentPath,r=(0,o.useMemo)((function(){return"rw"===t||"admin"===t}),[t]),a=(0,o.useState)(0),i=(0,f.A)(a,2)[1],u=(0,oe.p_)(),c=u.showFirstView,d=u.navigation,m=u.viewsMap,v=u.selectView,g=u.addView,y=u.duplicateView,C=u.deleteView,E=u.updateView,_=u.moveView,A=(0,o.useState)(null),b=(0,f.A)(A,2),S=b[0],w=b[1],O=(0,o.useState)(!1),R=(0,f.A)(O,2),T=R[0],x=R[1],M=(0,o.useState)(!1),D=(0,f.A)(M,2),I=D[0],N=D[1],L=(0,o.useRef)(null),k=(0,o.useState)(""),P=(0,f.A)(k,2),F=P[0],Y=P[1];(0,o.useEffect)((function(){var e=window.location,t=e.origin,n=e.pathname,r=e.search,o=new URLSearchParams(r).get("view");if(o){var a=m[o]||"";if(a)return void v(a);var i="".concat(t).concat(n);window.history.pushState({url:i,path:""},"",i)}var l=d.find((function(e){return"view"===e.type})),s=l?m[l._id]:"";c&&s&&v(s)}),[]);var U=(0,o.useCallback)((function(e,t,n,r){E(e,t,(function(){i((function(e){return e+1})),n&&n()}),r)}),[E]),B=function(e){e.stopPropagation(),x(!T)},H=(0,o.useCallback)((function(e){w(e);for(var t=(0,j.AP)("Untitled"),n=Object.values(m).map((function(e){return e.name})),r=1;n.includes(t);)t=(0,j.AP)("Untitled")+" ("+r+++")";Y(t),N(!0),x(!1)}),[m]),G=(0,o.useCallback)((function(e){e.preventDefault(),e.stopPropagation();var t=Object.values(m).map((function(e){return e.name})),n=(0,h.LWT)(F,t),r=n.isValid,o=n.message;if(!r)return p.A.danger(o),void L.current.focus();g(o,S.type),N(!1)}),[F,m,g,S]),V=(0,o.useCallback)((function(e){(0,Mr.isEnter)(e)&&G(e)}),[G]);return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{className:"tree-view tree metadata-tree-view",children:(0,l.jsx)("div",{className:"tree-node",children:(0,l.jsxs)("div",{className:"children",children:[d.map((function(e,r){var o=m[e._id],a="/"+ft.AT.FILE_EXTENDED_PROPERTIES+"/"+o._id,i=n===a;return(0,l.jsx)(kr,{canDelete:0!==r,isSelected:i,userPerm:t,view:o,onClick:function(e){return v(e,i)},onDelete:function(){return C(o._id,i)},onCopy:function(){return y(o._id)},onUpdate:function(e,t,n){return U(o._id,e,t,n)},onMove:_},o._id)})),I&&(0,l.jsxs)("div",{className:"tree-view-inner sf-metadata-view-form",children:[(0,l.jsx)("div",{className:"left-icon",children:(0,l.jsx)(Rr.A,{symbol:h.jWt[S.type]||"table",className:"metadata-views-icon"})}),(0,l.jsx)(Or.A,{className:"sf-metadata-view-input",innerRef:L,value:F,onChange:function(e){Y(e.target.value)},autoFocus:!0,onBlur:G,onKeyDown:V})]}),r&&(0,l.jsx)("div",{id:"sf-metadata-view-popover",children:(0,l.jsx)(s.NC,{className:"sf-metadata-add-view",callBack:B,footerName:(0,j.AP)("Add view"),addIconClassName:"sf-metadata-add-view-icon"})})]})})}),T&&(0,l.jsx)(Lr,{target:"sf-metadata-view-popover",toggle:B,onOptionClick:H})]})},Fr=n(31195),jr=[h.L2D.ID,h.L2D.CTIME,h.L2D.MTIME,h.L2D.CREATOR,h.L2D.LAST_MODIFIER,h.L2D.FILE_CREATOR,h.L2D.FILE_CTIME,h.L2D.FILE_MODIFIER,h.L2D.FILE_MTIME,h.L2D.PARENT_DIR,h.L2D.FILE_NAME,h.L2D.IS_DIR,h.L2D.FILE_TYPE,h.L2D.OBJ_ID,h.L2D.SIZE,h.L2D.SUFFIX,h.L2D.FILE_DETAILS],Yr=["/_Internal","/images"],Ur=["type","key"],Br=n(92811),Hr=function(e){var t=e.repoID,n=e.filePath,a=e.repoInfo,i=e.direntType,s=(0,o.useState)(!0),c=(0,f.A)(s,2),d=c[0],m=c[1],g=(0,o.useState)({record:{},fields:[]}),y=(0,f.A)(g,2),C=y[0],E=y[1],_=(0,o.useMemo)((function(){return"admin"!==a.permission&&"rw"!==a.permission?"r":"rw"}),[a]);(0,o.useEffect)((function(){if(m(!0),Yr.find((function(e){return n.startsWith(e)})))m(!1);else{var e=ae.Aq.getDirName(n),o=ae.Aq.getFileName(n),a="file"===i?e:e.slice(0,e.length-o.length-1);a.startsWith("/")||(a="/"+a),br.A.getMetadataRecordInfo(t,a,o).then((function(e){var t=e.data,n=t.results,a=t.metadata,i=Array.isArray(n)&&n.length>0?n[0]:{},l=function(e){if(!Array.isArray(e)||0===e.length)return[];var t=e.map((function(e){var t=e.type,n=e.key,o=(0,v.A)(e,Ur);return(0,r.A)((0,r.A)({},o),{},{key:n,type:(0,V.nh)(n,t),width:200})})).filter((function(e){return!jr.includes(e.key)})),n=[];return t.forEach((function(e){n.push(e)})),n}(a).map((function(e){return new Fr.A(e)}));ae.Aq.imageCheck(o)||(l=l.filter((function(e){return e.key!==h.L2D.LOCATION}))),E({record:i,fields:l}),m(!1)})).catch((function(e){var t=ae.Aq.getErrorMsg(e);p.A.danger(t),m(!1)}))}}),[t,n,i]);var A=(0,o.useCallback)((function(e,n){var o=C.record,a=C.fields.find((function(t){return t.key===e})),i=(0,V.KO)(a),l=(0,u.default)({},i,n);if(h.LOw.includes(a.key)||a.type!==h.vZe.SINGLE_SELECT)a.type===h.vZe.MULTIPLE_SELECT&&(l=(0,u.default)({},i,n?(0,h.zXq)(a,n):[]));else{var s=(0,h.FiT)(a);l=(0,u.default)({},i,(0,h.BW0)(s,n))}br.A.modifyRecord(t,o._id,l,o._obj_id).then((function(e){var t=(0,r.A)((0,r.A)({},C),{},{record:(0,r.A)((0,r.A)({},o),l)});E(t)})).catch((function(e){var t=ae.Aq.getErrorMsg(e);p.A.danger(t)}))}),[t,C]),b=(0,o.useCallback)((function(e,n){var o,a=C.fields,i=C.record,l=a.slice(0);br.A.modifyColumnData(t,e,n).then((function(t){var n=new Fr.A(t.data.column),r=a.findIndex((function(t){return t.key===e}));return l[r]=n,n})).then((function(n){var r=(0,V.KO)(n),a=(0,h.FiT)(n),l=a[a.length-1];if(o=(0,u.default)({},r,l.id),h.LOw.includes(e)||n.type!==h.vZe.SINGLE_SELECT){if(n.type===h.vZe.MULTIPLE_SELECT){var s=(0,h.Teq)(i,n)||[];o=(0,u.default)({},r,[].concat((0,_e.A)(s),[l.name]))}}else o=(0,u.default)({},r,(0,h.BW0)(a,l.id));return br.A.modifyRecord(t,i._id,o,i._obj_id)})).then((function(e){var t=(0,r.A)((0,r.A)({},C),{},{record:(0,r.A)((0,r.A)({},i),o),fields:l});E(t)})).catch((function(e){var t=ae.Aq.getErrorMsg(e);p.A.danger(t)}))}),[t,C]);if(d)return null;var S=C.fields,w=C.record;return w._id?(0,l.jsx)(l.Fragment,{children:S.map((function(e){var t="rw"===_&&e.editable,n=(0,h.Teq)(w,e);return(0,l.jsx)(Br.A,{field:e,readonly:!t,children:t?(0,l.jsx)(mr,{field:e,value:n,onChange:A,fields:S,record:w,modifyColumnData:b}):(0,l.jsx)(le,{field:e,value:n,emptyTip:(0,j.AP)("Empty"),className:"sf-metadata-property-detail-formatter"})},e.key)}))}):null}},84307:function(e,t,n){"use strict";n.d(t,{Kv:function(){return d},ZP:function(){return s},gm:function(){return u},vZ:function(){return i},BQ:function(){return c},cV:function(){return h},sN:function(){return m},D2:function(){return f},KY:function(){return v},SR:function(){return S},JI:function(){return b},fz:function(){return E},_W:function(){return x},Ar:function(){return M},Zu:function(){return D},Tx:function(){return y},Tu:function(){return O},CJ:function(){return g},LO:function(){return w},L2:function(){return _},Aj:function(){return A},uC:function(){return I},Wv:function(){return N},Tv:function(){return L},rT:function(){return C},T6:function(){return p},hT:function(){return R}});var r,o,a,i={DEFAULT:"default",TEXT:"text",CREATOR:"creator",CTIME:"ctime",LAST_MODIFIER:"last-modifier",MTIME:"mtime",FILE_NAME:"file-name",CHECKBOX:"checkbox",COLLABORATOR:"collaborator",DATE:"date",LONG_TEXT:"long-text",SINGLE_SELECT:"single-select",MULTIPLE_SELECT:"multiple-select",NUMBER:"number",GEOLOCATION:"geolocation",RATE:"rate"},l=n(64467),s=(r={},(0,l.default)((0,l.default)((0,l.default)((0,l.default)((0,l.default)((0,l.default)((0,l.default)((0,l.default)((0,l.default)((0,l.default)(r,i.CREATOR,"creator"),i.LAST_MODIFIER,"creator"),i.CTIME,"creation-time"),i.MTIME,"creation-time"),i.DEFAULT,"text"),i.TEXT,"text"),i.FILE_NAME,"text"),i.CHECKBOX,"checkbox"),i.COLLABORATOR,"collaborator"),i.DATE,"date"),(0,l.default)((0,l.default)((0,l.default)((0,l.default)((0,l.default)((0,l.default)(r,i.LONG_TEXT,"long-text"),i.SINGLE_SELECT,"single-select"),i.MULTIPLE_SELECT,"multiple-select"),i.NUMBER,"number"),i.GEOLOCATION,"location"),i.RATE,"rate")),u=(o={},(0,l.default)((0,l.default)((0,l.default)((0,l.default)((0,l.default)((0,l.default)((0,l.default)((0,l.default)((0,l.default)((0,l.default)(o,i.CREATOR,"Creator"),i.LAST_MODIFIER,"Last modifier"),i.CTIME,"CTime"),i.MTIME,"Last modified time"),i.DEFAULT,"Text"),i.TEXT,"Text"),i.FILE_NAME,"File name"),i.CHECKBOX,"Checkbox"),i.COLLABORATOR,"Collaborator"),i.DATE,"Date"),(0,l.default)((0,l.default)((0,l.default)((0,l.default)((0,l.default)((0,l.default)(o,i.LONG_TEXT,"Long text"),i.SINGLE_SELECT,"Single select"),i.MULTIPLE_SELECT,"Multiple select"),i.NUMBER,"Number"),i.GEOLOCATION,"Geolocation"),i.RATE,"Rate")),c=[i.CTIME,i.MTIME,i.DATE],d=(i.NUMBER,i.RATE,[i.CREATOR,i.LAST_MODIFIER,i.COLLABORATOR]),f="YYYY-MM-DD",p="YYYY-MM-DDTHH:mm:ss.SSSZ",m={YEAR:"year",MONTH:"month",WEEK:"week",DAY:"day",HOUR:"hour",HOURS:"hours",MINUTE:"minute",MINUTES:"minutes",SECOND:"second"},h={YYYY_MM_DD:"YYYY-MM-DD",YYYY_MM_DD_HH_MM:"YYYY-MM-DD HH:mm",YYYY_MM_DD_HH_MM_SS:"YYYY-MM-DD HH:mm:ss"},v="number",g=(i.CTIME,i.MTIME,i.CREATOR,i.LAST_MODIFIER,(0,l.default)((0,l.default)((0,l.default)((0,l.default)({},i.CTIME,!0),i.MTIME,!0),i.CREATOR,!0),i.LAST_MODIFIER,!0)),y=(0,l.default)((0,l.default)({},i.COLLABORATOR,!0),i.MULTIPLE_SELECT,!0),C=(a={},(0,l.default)((0,l.default)((0,l.default)((0,l.default)((0,l.default)((0,l.default)((0,l.default)((0,l.default)((0,l.default)((0,l.default)(a,i.TEXT,!0),i.CTIME,!0),i.MTIME,!0),i.CREATOR,!0),i.LAST_MODIFIER,!0),i.FILE_NAME,!0),i.CHECKBOX,!0),i.DATE,!0),i.LONG_TEXT,!0),i.SINGLE_SELECT,!0),(0,l.default)((0,l.default)(a,i.NUMBER,!0),i.RATE,!0)),E={LNG_LAT:"lng_lat",COUNTRY_REGION:"country_region",PROVINCE:"province",PROVINCE_CITY:"province_city",PROVINCE_CITY_DISTRICT:"province_city_district",MAP_SELECTION:"map_selection"},_={ID:"_id",CTIME:"_ctime",MTIME:"_mtime",CREATOR:"_creator",LAST_MODIFIER:"_last_modifier",IS_DIR:"_is_dir",PARENT_DIR:"_parent_dir",FILE_CTIME:"_file_ctime",FILE_MTIME:"_file_mtime",FILE_CREATOR:"_file_creator",FILE_MODIFIER:"_file_modifier",FILE_NAME:"_name",FILE_TYPE:"_file_type",FILE_COLLABORATORS:"_collaborators",FILE_EXPIRE_TIME:"_expire_time",FILE_KEYWORDS:"_keywords",FILE_DESCRIPTION:"_description",FILE_EXPIRED:"_expired",FILE_STATUS:"_status",LOCATION:"_location",OBJ_ID:"_obj_id",SIZE:"_size",SUFFIX:"_suffix",FILE_DETAILS:"_file_details"},A=[_.ID,_.CTIME,_.MTIME,_.CREATOR,_.LAST_MODIFIER,_.IS_DIR,_.PARENT_DIR,_.FILE_CTIME,_.FILE_MTIME,_.FILE_CREATOR,_.FILE_MODIFIER,_.FILE_NAME,_.FILE_TYPE,_.FILE_COLLABORATORS,_.FILE_EXPIRE_TIME,_.FILE_KEYWORDS,_.FILE_DESCRIPTION,_.FILE_EXPIRED,_.FILE_STATUS,_.LOCATION,_.OBJ_ID,_.SIZE,_.SUFFIX,_.FILE_DETAILS],b=[_.FILE_COLLABORATORS,_.FILE_EXPIRE_TIME,_.FILE_KEYWORDS,_.FILE_DESCRIPTION,_.FILE_EXPIRED,_.FILE_STATUS],S=[],w=(_.FILE_COLLABORATORS,_.FILE_EXPIRE_TIME,_.FILE_KEYWORDS,_.FILE_DESCRIPTION,_.FILE_EXPIRED,_.FILE_STATUS,[_.FILE_COLLABORATORS,_.FILE_EXPIRE_TIME,_.FILE_KEYWORDS,_.FILE_DESCRIPTION,_.FILE_EXPIRED,_.FILE_STATUS]),O=[_.ID,_.CTIME,_.MTIME,_.CREATOR,_.LAST_MODIFIER,_.OBJ_ID,_.SUFFIX,_.FILE_DETAILS,_.LOCATION,_.IS_DIR],R=[_.IS_DIR],T=n(40326),x=(0,l.default)((0,l.default)({},i.TEXT,1e4),i.LONG_TEXT,1e5),M=(0,T.AP)("The content of the document has exceeded the limit of 100000 characters, and the content cannot be saved"),D=(0,T.AP)("The content of the document has exceeded the limit of 100000 characters, and only the first 100000 characters are saved"),I=["#FF8000","#FFB600","#E91E63","#EB00B1","#7626FD","#1DDD1D","#02C0FF","#00C9C7","#1688FC","#656463"],N=[{name:1},{name:2},{name:3},{name:4},{name:5},{name:6},{name:7},{name:8},{name:9},{name:10}],L=["rate","like","praise","flag"]},73224:function(e,t,n){"use strict";n.d(t,{X:function(){return i},_:function(){return l}});var r,o=n(64467),a=n(40326),i={TODAY:"today",TOMORROW:"tomorrow",YESTERDAY:"yesterday",ONE_WEEK_AGO:"one_week_ago",ONE_WEEK_FROM_NOW:"one_week_from_now",ONE_MONTH_AGO:"one_month_ago",ONE_MONTH_FROM_NOW:"one_month_from_now",NUMBER_OF_DAYS_AGO:"number_of_days_ago",NUMBER_OF_DAYS_FROM_NOW:"number_of_days_from_now",EXACT_DATE:"exact_date",THE_PAST_WEEK:"the_past_week",THE_PAST_MONTH:"the_past_month",THE_PAST_YEAR:"the_past_year",THE_NEXT_WEEK:"the_next_week",THE_NEXT_MONTH:"the_next_month",THE_NEXT_YEAR:"the_next_year",THE_NEXT_NUMBERS_OF_DAYS:"the_next_numbers_of_days",THE_PAST_NUMBERS_OF_DAYS:"the_past_numbers_of_days",THIS_WEEK:"this_week",THIS_MONTH:"this_month",THIS_YEAR:"this_year"},l=(r={},(0,o.default)((0,o.default)((0,o.default)((0,o.default)((0,o.default)((0,o.default)((0,o.default)((0,o.default)((0,o.default)((0,o.default)(r,i.TODAY,(0,a.AP)("Today")),i.TOMORROW,(0,a.AP)("Tomorrow")),i.YESTERDAY,(0,a.AP)("Yesterday")),i.ONE_WEEK_AGO,(0,a.AP)("One week ago")),i.ONE_WEEK_FROM_NOW,(0,a.AP)("One week from now")),i.ONE_MONTH_AGO,(0,a.AP)("One month ago")),i.ONE_MONTH_FROM_NOW,(0,a.AP)("One month from now")),i.NUMBER_OF_DAYS_AGO,(0,a.AP)("Number of days ago")),i.NUMBER_OF_DAYS_FROM_NOW,(0,a.AP)("Number of days from now")),i.EXACT_DATE,(0,a.AP)("Exact date")),(0,o.default)((0,o.default)((0,o.default)((0,o.default)((0,o.default)((0,o.default)((0,o.default)((0,o.default)((0,o.default)((0,o.default)(r,i.THE_PAST_WEEK,(0,a.AP)("The past week")),i.THE_PAST_MONTH,(0,a.AP)("The past month")),i.THE_PAST_YEAR,(0,a.AP)("The past year")),i.THE_NEXT_WEEK,(0,a.AP)("The next week")),i.THE_NEXT_MONTH,(0,a.AP)("The next month")),i.THE_NEXT_YEAR,(0,a.AP)("The next year")),i.THE_NEXT_NUMBERS_OF_DAYS,(0,a.AP)("The next numbers of days")),i.THE_PAST_NUMBERS_OF_DAYS,(0,a.AP)("The past numbers of days")),i.THIS_WEEK,(0,a.AP)("This week")),i.THIS_MONTH,(0,a.AP)("This month")),(0,o.default)(r,i.THIS_YEAR,(0,a.AP)("This year")))},32728:function(e,t,n){"use strict";n.d(t,{U:function(){return i},b:function(){return l}});var r,o=n(64467),a=n(40326),i={CONTAINS:"contains",NOT_CONTAIN:"does_not_contain",IS:"is",IS_NOT:"is_not",EQUAL:"equal",NOT_EQUAL:"not_equal",LESS:"less",GREATER:"greater",LESS_OR_EQUAL:"less_or_equal",GREATER_OR_EQUAL:"greater_or_equal",EMPTY:"is_empty",NOT_EMPTY:"is_not_empty",IS_WITHIN:"is_within",IS_BEFORE:"is_before",IS_AFTER:"is_after",IS_ON_OR_BEFORE:"is_on_or_before",IS_ON_OR_AFTER:"is_on_or_after",HAS_ANY_OF:"has_any_of",HAS_ALL_OF:"has_all_of",HAS_NONE_OF:"has_none_of",IS_EXACTLY:"is_exactly",INCLUDE_ME:"include_me",IS_CURRENT_USER_ID:"is_current_user_ID",IS_ANY_OF:"is_any_of",IS_NONE_OF:"is_none_of"},l=(r={},(0,o.default)((0,o.default)((0,o.default)((0,o.default)((0,o.default)((0,o.default)((0,o.default)((0,o.default)((0,o.default)((0,o.default)(r,i.CONTAINS,(0,a.AP)("contains")),i.NOT_CONTAIN,(0,a.AP)("does not contain")),i.IS,(0,a.AP)("is")),i.IS_NOT,(0,a.AP)("is not")),i.EQUAL,"="),i.NOT_EQUAL,"\u2260"),i.LESS,"<"),i.GREATER,">"),i.LESS_OR_EQUAL,"\u2264"),i.GREATER_OR_EQUAL,"\u2265"),(0,o.default)((0,o.default)((0,o.default)((0,o.default)((0,o.default)((0,o.default)((0,o.default)((0,o.default)((0,o.default)((0,o.default)(r,i.EMPTY,(0,a.AP)("is empty")),i.NOT_EMPTY,(0,a.AP)("is not empty")),i.IS_WITHIN,(0,a.AP)("is within...")),i.IS_BEFORE,(0,a.AP)("is before...")),i.IS_AFTER,(0,a.AP)("is after...")),i.IS_ON_OR_BEFORE,(0,a.AP)("is on or before...")),i.IS_ON_OR_AFTER,(0,a.AP)("is on or after...")),i.HAS_ANY_OF,(0,a.AP)("has any of...")),i.HAS_ALL_OF,(0,a.AP)("has all of...")),i.HAS_NONE_OF,(0,a.AP)("has none of...")),(0,o.default)((0,o.default)((0,o.default)((0,o.default)((0,o.default)(r,i.IS_EXACTLY,(0,a.AP)("is exactly...")),i.IS_CURRENT_USER_ID,(0,a.AP)("is current user's ID")),i.INCLUDE_ME,(0,a.AP)("include the current user")),i.IS_ANY_OF,(0,a.AP)("is any of...")),i.IS_NONE_OF,(0,a.AP)("is none of...")))},36149:function(e,t,n){"use strict";n.d(t,{Ts:function(){return f},FK:function(){return h},pQ:function(){return v},bo:function(){return l.b},US:function(){return l.U},_z:function(){return i._},Xu:function(){return i.X},B3:function(){return m},uv:function(){return p}});var r,o=n(64467),a=n(84307),i=n(73224),l=n(32728),s=[l.U.CONTAINS,l.U.NOT_CONTAIN,l.U.IS,l.U.IS_NOT,l.U.EMPTY,l.U.NOT_EMPTY,l.U.IS_CURRENT_USER_ID],u=[l.U.EQUAL,l.U.NOT_EQUAL,l.U.LESS,l.U.GREATER,l.U.LESS_OR_EQUAL,l.U.GREATER_OR_EQUAL,l.U.EMPTY,l.U.NOT_EMPTY],c=[l.U.IS,l.U.IS_WITHIN,l.U.IS_BEFORE,l.U.IS_AFTER,l.U.IS_ON_OR_BEFORE,l.U.IS_ON_OR_AFTER,l.U.IS_NOT,l.U.EMPTY,l.U.NOT_EMPTY],d=[i.X.TODAY,i.X.TOMORROW,i.X.YESTERDAY,i.X.ONE_WEEK_AGO,i.X.ONE_WEEK_FROM_NOW,i.X.ONE_MONTH_AGO,i.X.ONE_MONTH_FROM_NOW,i.X.NUMBER_OF_DAYS_AGO,i.X.NUMBER_OF_DAYS_FROM_NOW,i.X.EXACT_DATE],f=(r={},(0,o.default)((0,o.default)((0,o.default)((0,o.default)((0,o.default)((0,o.default)((0,o.default)((0,o.default)((0,o.default)((0,o.default)(r,a.vZ.TEXT,{filterPredicateList:s}),a.vZ.NUMBER,{filterPredicateList:u}),a.vZ.FILE_NAME,{filterPredicateList:s}),a.vZ.DATE,{filterPredicateList:c,filterTermModifierList:d}),a.vZ.SINGLE_SELECT,{filterPredicateList:[l.U.IS,l.U.IS_NOT,l.U.IS_ANY_OF,l.U.IS_NONE_OF,l.U.EMPTY,l.U.NOT_EMPTY]}),a.vZ.MULTIPLE_SELECT,{filterPredicateList:[l.U.HAS_ANY_OF,l.U.HAS_ALL_OF,l.U.HAS_NONE_OF,l.U.IS_EXACTLY,l.U.EMPTY,l.U.NOT_EMPTY]}),a.vZ.CTIME,{filterPredicateList:c,filterTermModifierList:d}),a.vZ.MTIME,{filterPredicateList:c,filterTermModifierList:d}),a.vZ.CREATOR,{filterPredicateList:[l.U.CONTAINS,l.U.NOT_CONTAIN,l.U.INCLUDE_ME,l.U.IS,l.U.IS_NOT]}),a.vZ.LAST_MODIFIER,{filterPredicateList:[l.U.CONTAINS,l.U.NOT_CONTAIN,l.U.INCLUDE_ME,l.U.IS,l.U.IS_NOT]}),(0,o.default)((0,o.default)((0,o.default)((0,o.default)((0,o.default)(r,a.vZ.CHECKBOX,{filterPredicateList:[l.U.IS]}),a.vZ.URL,{filterPredicateList:[l.U.CONTAINS,l.U.NOT_CONTAIN,l.U.IS,l.U.IS_NOT,l.U.EMPTY,l.U.NOT_EMPTY]}),a.vZ.COLLABORATOR,{filterPredicateList:[l.U.HAS_ANY_OF,l.U.HAS_ALL_OF,l.U.HAS_NONE_OF,l.U.IS_EXACTLY,l.U.EMPTY,l.U.NOT_EMPTY,l.U.INCLUDE_ME]}),a.vZ.LONG_TEXT,{filterPredicateList:[l.U.EMPTY,l.U.NOT_EMPTY]}),a.vZ.RATE,{filterPredicateList:u})),p=[i.X.EXACT_DATE,i.X.TODAY,i.X.TOMORROW,i.X.YESTERDAY,i.X.ONE_WEEK_AGO,i.X.ONE_WEEK_FROM_NOW,i.X.ONE_MONTH_AGO,i.X.ONE_MONTH_FROM_NOW,i.X.NUMBER_OF_DAYS_AGO,i.X.NUMBER_OF_DAYS_FROM_NOW],m=[i.X.THE_PAST_WEEK,i.X.THE_PAST_MONTH,i.X.THE_PAST_YEAR,i.X.THIS_WEEK,i.X.THIS_MONTH,i.X.THIS_YEAR,i.X.THE_NEXT_WEEK,i.X.THE_NEXT_MONTH,i.X.THE_NEXT_YEAR,i.X.THE_NEXT_NUMBERS_OF_DAYS,i.X.THE_PAST_NUMBERS_OF_DAYS],h={AND:"And",OR:"Or"},v={INVALID_FILTER:"invalid filter",INCOMPLETE_FILTER:"incomplete filter",COLUMN_MISSING:"the column to filter does not exist",COLUMN_NOT_SUPPORTED:"the column to filter is not supported",UNMATCHED_PREDICATE:"unmatched filter predicate",UNMATCHED_MODIFIER:"unmatched filter modifier",INVALID_TERM:"invalid filter term"}},81602:function(e,t,n){"use strict";n.d(t,{Ll:function(){return c},Sv:function(){return d},UY:function(){return i},XJ:function(){return l},lj:function(){return u},mm:function(){return a},wA:function(){return s}});var r=n(64467),o=n(84307),a=3,i={DAY:"day",WEEK:"week",MONTH:"month",QUARTER:"quarter",YEAR:"year"},l=(0,r.default)((0,r.default)((0,r.default)((0,r.default)((0,r.default)({},i.DAY,"By day"),i.WEEK,"By week"),i.MONTH,"By month"),i.QUARTER,"By quarter"),i.YEAR,"By year"),s={PROVINCE:"province",CITY:"city",DISTRICT:"district",COUNTRY:"country"},u=(0,r.default)((0,r.default)((0,r.default)({},s.PROVINCE,"By province"),s.CITY,"By city"),s.DISTRICT,"By district"),c=[o.vZ.TEXT,o.vZ.DATE,o.vZ.CTIME,o.vZ.MTIME,o.vZ.CHECKBOX,o.vZ.SINGLE_SELECT,o.vZ.MULTIPLE_SELECT,o.vZ.COLLABORATOR,o.vZ.CREATOR,o.vZ.LAST_MODIFIER,o.vZ.GEOLOCATION,o.vZ.RATE],d=[i.DAY,i.WEEK,i.MONTH,i.QUARTER,i.YEAR]},52719:function(e,t,n){"use strict";n.d(t,{ZP:function(){return v.ZP},gm:function(){return v.gm},vZ:function(){return v.vZ},sN:function(){return v.sN},D2:function(){return v.D2},KY:function(){return v.KY},XJ:function(){return y.XJ},lj:function(){return y.lj},SR:function(){return v.SR},JI:function(){return v.JI},Ts:function(){return g.Ts},pQ:function(){return g.pQ},bo:function(){return g.bo},US:function(){return g.US},_z:function(){return g._z},Xu:function(){return g.Xu},fz:function(){return v.fz},Sv:function(){return y.Sv},UY:function(){return y.UY},wA:function(){return y.wA},Jl:function(){return C},cK:function(){return a()},Ar:function(){return v.Ar},Zu:function(){return v.Zu},mm:function(){return y.mm},Tu:function(){return v.Tu},CJ:function(){return v.CJ},LO:function(){return v.LO},L2:function(){return v.L2},Aj:function(){return v.Aj},uC:function(){return v.uC},Wv:function(){return v.Wv},Tv:function(){return v.Tv},Gi:function(){return E.G},Xe:function(){return _.oC},dc:function(){return _.dc},Cl:function(){return _.Cl},Ll:function(){return y.Ll},T6:function(){return v.T6},cP:function(){return k},hT:function(){return v.hT},p:function(){return L},rX:function(){return M},pk:function(){return I},hc:function(){return N},jW:function(){return D},Mu:function(){return r},B3:function(){return g.B3},uv:function(){return g.uv}});var r={};n.r(r),n.d(r,{OB:function(){return i},wt:function(){return h},dC:function(){return f},WA:function(){return d},Rc:function(){return m},HK:function(){return p},rW:function(){return c},dg:function(){return s},gA:function(){return u},NT:function(){return l}});var o=n(76805),a=n.n(o),i=1,l=1,s=2,u=2,c=2,d=2,f=3,p=4,m=4,h=9,v=n(84307),g=n(36149),y=n(81602),C={DEFAULT:"default",DOUBLE:"double"},E=n(34807),_=n(21905),A=n(64467),b="ERROR",S="DIV/0",w="NAME",O="NULL",R="VALUE",T="GETTING_DATA",x=(0,A.default)((0,A.default)((0,A.default)((0,A.default)((0,A.default)((0,A.default)((0,A.default)((0,A.default)((0,A.default)({},b,"#ERROR!"),S,"#DIV/0!"),w,"#NAME?"),"N/A","#N/A"),O,"#NULL!"),"NUM","#NUM!"),"REF","#REF!"),R,"#VALUE!"),T,"#GETTING_DATA"),M=(x[b],x[S],x[w],x["N/A"],x[O],x.NUM,x.REF,x[R],x[T],{TABLE:"table",GALLERY:"gallery"}),D=(0,A.default)((0,A.default)((0,A.default)({},M.TABLE,"table"),M.GALLERY,"image"),"image","image"),I=(0,A.default)((0,A.default)({},M.TABLE,[{column_key:v.L2.IS_DIR,filter_predicate:g.US.IS,filter_term:"file"}]),M.GALLERY,[{column_key:v.L2.FILE_TYPE,filter_predicate:g.US.IS,filter_term:"picture"}]),N=(0,A.default)((0,A.default)({},M.TABLE,[]),M.GALLERY,[{column_key:v.L2.FILE_CTIME,sort_type:_.Cl.DOWN}]),L=(0,A.default)((0,A.default)({},M.TABLE,_.dc),M.GALLERY,_.cV),k=(0,A.default)((0,A.default)({},M.TABLE,_.dc),M.GALLERY,_.zN)},76805:function(e){e.exports={Backspace:8,Tab:9,Enter:13,Shift:16,Ctrl:17,Alt:18,PauseBreak:19,CapsLock:20,Escape:27,Esc:27,Space:32,PageUp:33,PageDown:34,End:35,Home:36,LeftArrow:37,UpArrow:38,RightArrow:39,DownArrow:40,Insert:45,Delete:46,0:48,1:49,2:50,3:51,4:52,5:53,6:54,7:55,8:56,9:57,a:65,b:66,c:67,d:68,e:69,f:70,g:71,h:72,i:73,j:74,k:75,l:76,m:77,n:78,o:79,p:80,q:81,r:82,s:83,t:84,u:85,v:86,w:87,x:88,y:89,z:90,LeftWindowKey:91,RightWindowKey:92,SelectKey:93,NumPad0:96,NumPad1:97,NumPad2:98,NumPad3:99,NumPad4:100,NumPad5:101,NumPad6:102,NumPad7:103,NumPad8:104,NumPad9:105,Multiply:106,Add:107,Subtract:109,DecimalPoint:110,Divide:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F12:123,NumLock:144,ScrollLock:145,SemiColon:186,EqualSign:187,Comma:188,Dash:189,Period:190,ForwardSlash:191,GraveAccent:192,OpenBracket:219,BackSlash:220,CloseBracket:221,SingleQuote:222,ChineseInputMethod:229}},34807:function(e,t,n){"use strict";n.d(t,{G:function(){return r}});var r=[{COLOR:"#FFFCB5",BORDER_COLOR:"#E8E79D",TEXT_COLOR:"#212529"},{COLOR:"#FFEAB6",BORDER_COLOR:"#ECD084",TEXT_COLOR:"#212529"},{COLOR:"#FFD9C8",BORDER_COLOR:"#EFBAA3",TEXT_COLOR:"#212529"},{COLOR:"#FFDDE5",BORDER_COLOR:"#EDC4C1",TEXT_COLOR:"#212529"},{COLOR:"#FFD4FF",BORDER_COLOR:"#E6B6E6",TEXT_COLOR:"#212529"},{COLOR:"#DAD7FF",BORDER_COLOR:"#C3BEEF",TEXT_COLOR:"#212529"},{COLOR:"#DDFFE6",BORDER_COLOR:"#BBEBCD",TEXT_COLOR:"#212529"},{COLOR:"#DEF7C4",BORDER_COLOR:"#C5EB9E",TEXT_COLOR:"#212529"},{COLOR:"#D8FAFF",BORDER_COLOR:"#B4E4E9",TEXT_COLOR:"#212529"},{COLOR:"#D7E8FF",BORDER_COLOR:"#BAD1E9",TEXT_COLOR:"#212529"},{COLOR:"#B7CEF9",BORDER_COLOR:"#96B2E1",TEXT_COLOR:"#212529"},{COLOR:"#E9E9E9",BORDER_COLOR:"#DADADA",TEXT_COLOR:"#212529"},{COLOR:"#FBD44A",BORDER_COLOR:"#E5C142",TEXT_COLOR:"#FFFFFF"},{COLOR:"#EAA775",BORDER_COLOR:"#D59361",TEXT_COLOR:"#FFFFFF"},{COLOR:"#F4667C",BORDER_COLOR:"#DC556A",TEXT_COLOR:"#FFFFFF"},{COLOR:"#DC82D2",BORDER_COLOR:"#D166C5",TEXT_COLOR:"#FFFFFF"},{COLOR:"#9860E5",BORDER_COLOR:"#844BD2",TEXT_COLOR:"#FFFFFF"},{COLOR:"#9F8CF1",BORDER_COLOR:"#8F75E2",TEXT_COLOR:"#FFFFFF"},{COLOR:"#59CB74",BORDER_COLOR:"#4EB867",TEXT_COLOR:"#FFFFFF"},{COLOR:"#ADDF84",BORDER_COLOR:"#9CCF72",TEXT_COLOR:"#FFFFFF"},{COLOR:"#89D2EA",BORDER_COLOR:"#7BC0D6",TEXT_COLOR:"#FFFFFF"},{COLOR:"#4ECCCB",BORDER_COLOR:"#45BAB9",TEXT_COLOR:"#FFFFFF"},{COLOR:"#46A1FD",BORDER_COLOR:"#3C8FE4",TEXT_COLOR:"#FFFFFF"},{COLOR:"#C2C2C2",BORDER_COLOR:"#ADADAD",TEXT_COLOR:"#FFFFFF"}]},21905:function(e,t,n){"use strict";n.d(t,{$4:function(){return c},Cl:function(){return o},FI:function(){return u},cV:function(){return l},dc:function(){return a},oC:function(){return i},zN:function(){return s}});var r=n(84307),o={UP:"up",DOWN:"down"},a=[r.vZ.FILE_NAME,r.vZ.CTIME,r.vZ.MTIME,r.vZ.TEXT,r.vZ.DATE,r.vZ.SINGLE_SELECT,r.vZ.MULTIPLE_SELECT,r.vZ.COLLABORATOR,r.vZ.CHECKBOX,r.vZ.NUMBER,r.vZ.RATE],i=[r.vZ.LONG_TEXT,r.vZ.GEOLOCATION,r.vZ.CREATOR,r.vZ.LAST_MODIFIER],l=[r.vZ.CTIME,r.vZ.MTIME,r.vZ.RATE,r.vZ.NUMBER,r.vZ.FILE_NAME],s=[r.vZ.CTIME,r.vZ.MTIME],u=[r.vZ.TEXT],c=[r.vZ.NUMBER,r.vZ.RATE]},3563:function(e,t,n){"use strict";n.d(t,{ZPL:function(){return i.ZP},gmg:function(){return i.gm},vZe:function(){return i.vZ},sR0:function(){return l},D23:function(){return i.D2},KYu:function(){return i.KY},XJ$:function(){return i.XJ},lj4:function(){return i.lj},EmK:function(){return q},SRQ:function(){return i.SR},JIQ:function(){return i.JI},Tsr:function(){return i.Ts},pQi:function(){return i.pQ},boc:function(){return i.bo},USE:function(){return i.US},_z2:function(){return i._z},XuU:function(){return i.Xu},SvE:function(){return i.Sv},UYn:function(){return i.UY},wAv:function(){return i.wA},JlJ:function(){return i.Jl},cKb:function(){return i.cK},Ar4:function(){return i.Ar},Zu0:function(){return i.Zu},DTU:function(){return c},mmt:function(){return i.mm},Tuj:function(){return i.Tu},CJP:function(){return i.CJ},LOw:function(){return i.LO},L2D:function(){return i.L2},Ajs:function(){return i.Aj},uCw:function(){return i.uC},WvA:function(){return i.Wv},Tvi:function(){return i.Tv},Gin:function(){return i.Gi},oCN:function(){return i.Xe},dc:function(){return i.dc},ClR:function(){return i.Cl},LlW:function(){return i.Ll},T6Y:function(){return i.T6},DLc:function(){return a},cPK:function(){return i.cP},hTT:function(){return i.hT},paJ:function(){return i.p},rX9:function(){return i.rX},pkt:function(){return i.pk},hcH:function(){return i.hc},jWt:function(){return i.jW},T76:function(){return H},Mue:function(){return i.Mu},sg1:function(){return He},B3:function(){return i.B3},uv8:function(){return i.uv},nYS:function(){return v.nY},rgt:function(){return _.rg},oHI:function(){return _.oH},Teq:function(){return f},$i0:function(){return J},LYl:function(){return M},rm3:function(){return g},pTd:function(){return y},bLM:function(){return T},xnw:function(){return O},zXq:function(){return R},FiT:function(){return _.Fi},u1Q:function(){return h},bj$:function(){return ce},WHw:function(){return v.WH},qaV:function(){return je},N71:function(){return Ie},HLJ:function(){return v.HL},om8:function(){return S},BW0:function(){return w},fj4:function(){return ke},VLM:function(){return Pe},a1m:function(){return te},YD9:function(){return fe},ZRJ:function(){return b},iWx:function(){return Se},hBA:function(){return E},RIy:function(){return Be},Tnt:function(){return Ue},rnW:function(){return Fe},EDs:function(){return A},cX8:function(){return Ye},EtT:function(){return v.Et},ZvR:function(){return Ge},EOE:function(){return Ne},B9Y:function(){return D},Bsv:function(){return be},LWT:function(){return V},yAg:function(){return v.yA},eD3:function(){return Le}});var r=n(92901),o=n(23029),a=(0,r.A)((function e(t){var n=this,r=t.api,a=t.mediaUrl,i=void 0===a?"":a;(0,o.A)(this,e),this.queryUser=function(e,t){e&&(n.waitingExecCallbacks.push(t),n.emailUserMap[e]||n.waitingQueryEmails.includes(e)||(n.waitingQueryEmails.push(e),n.startQueryUsers()))},this.queryUsers=function(e,t){var r;if(Array.isArray(e)&&0!==e.length){var o=[];e.forEach((function(e){n.waitingExecCallbacks.push(t),n.emailUserMap[e]||n.waitingQueryEmails.includes(e)||o.push(e)})),0!==o.length&&((r=n.waitingQueryEmails).push.apply(r,o),n.startQueryUsers())}},this.startQueryUsers=function(){n.pendingTimer||0===n.waitingQueryEmails.length||(n.pendingTimer=setTimeout((function(){n.api(n.waitingQueryEmails).then((function(e){e.data.user_list.forEach((function(e){n.emailUserMap[e.email]=e})),n.queryUserCallback()})).catch((function(){n.waitingQueryEmails.forEach((function(e){n.emailUserMap[e]={email:e,name:e,avatar_url:n.defaultAvatarUrl}})),n.queryUserCallback()})),clearTimeout(n.pendingTimer),n.pendingTimer=null}),1e3))},this.queryUserCallback=function(){n.waitingExecCallbacks.forEach((function(e){e(n.emailUserMap)})),n.waitingQueryEmails=[],n.waitingExecCallbacks=[]},this.api=r,this.defaultAvatarUrl="".concat(i,"/avatars/default.png"),this.waitingQueryEmails=[],this.waitingExecCallbacks=[],this.emailUserMap={}})),i=n(52719),l=n(33175),s=n(64467),u=n(89379),c=function(){return(0,r.A)((function e(t){(0,o.A)(this,e),this.baseName=t||"sf-metadata"}),[{key:"getStorage",value:function(){try{return JSON.parse(window.localStorage.getItem(this.baseName)||"{}")}catch(e){return""}}},{key:"setItem",value:function(e,t){var n=this.getStorage(),r=(0,u.A)((0,u.A)({},n),{},(0,s.default)({},e,t));return window.localStorage.setItem(this.baseName,JSON.stringify(r))}},{key:"getItem",value:function(e){return this.getStorage()[e]}}])}(),d=function(e){return void 0!==e&&(null!==e&&(""!==e&&("{}"!==JSON.stringify(e)&&"[]"!==JSON.stringify(e))))},f=function(e,t){if(!e||!t)return null;var n=t.key,r=t.name;return i.Aj.includes(n)?e[n]:e[r]},p=n(4159),m=n.n(p),h=function(e,t){if(!e||"string"!==typeof e)return"";var n=m()(e);if(!n.isValid())return e;switch(t){case"D/M/YYYY":case"DD/MM/YYYY":var r=n.format("YYYY-MM-DD").split("-");return"".concat(r[2],"/").concat(r[1],"/").concat(r[0]);case"D/M/YYYY HH:mm":case"DD/MM/YYYY HH:mm":var o=n.format("YYYY-MM-DD HH:mm").split(" "),a=o[0].split("-");return"".concat(a[2],"/").concat(a[1],"/").concat(a[0]," ").concat(o[1]);case"M/D/YYYY":return n.format("M/D/YYYY");case"M/D/YYYY HH:mm":return n.format("M/D/YYYY HH:mm");case"YYYY-MM-DD":default:return n.format("YYYY-MM-DD");case"YYYY-MM-DD HH:mm":return n.format("YYYY-MM-DD HH:mm");case"YYYY-MM-DD HH:mm:ss":return n.format("YYYY-MM-DD HH:mm:ss");case"DD.MM.YYYY":return n.format("DD.MM.YYYY");case"DD.MM.YYYY HH:mm":return n.format("DD.MM.YYYY HH:mm")}},v=n(91210),g=function(e,t){return Array.isArray(e)&&t?e.find((function(e){return e.key===t})):null},y=function(e,t){return Array.isArray(e)&&t?e.find((function(e){return e.name===t})):null},C=n(84307),E=function(e){return C.BQ.includes(function(e){return e.type}(e))},_=n(51511),A=function(e){var t=C._W[C.vZ.LONG_TEXT],n=e.text;return!!n&&n.length>=t},b=function(e){var t=C._W[C.vZ.LONG_TEXT],n=(0,u.A)({},e),r=n.text,o=n.preview;return n.text=r?r.slice(0,t):"",n.preview=o?o.slice(0,t):"",n},S=function(e,t){return Array.isArray(e)&&t?e.find((function(e){return e.id===t||e.name===t})):null},w=function(e,t){if(!t||!Array.isArray(e))return"";var n=S(e,t);return n?n.name:""},O=function(e,t){if(i.Aj.includes(e.key))return t;var n=(0,_.Fi)(e);return w(n,t)},R=function(e,t){if(i.Aj.includes(e.key))return t;if(!Array.isArray(t)||0===t.length)return[];var n=(0,_.Fi)(e);return Array.isArray(n)&&0!==n.length?t.map((function(e){return w(n,e)})).filter((function(e){return e})):[]},T=function(e,t){if(i.Aj.includes(e.key))return t;if(!Array.isArray(t)||0===t.length)return[];var n=(0,_.Fi)(e);return Array.isArray(n)&&0!==n.length?t.map((function(e){var t=S(n,e);return t?t.id:null})).filter((function(e){return e})):[]},x=function(e,t){if(!Array.isArray(e)||!Array.isArray(t))return[];var n={};return t.forEach((function(e){n[e.email]=e})),e.map((function(e){var t=n[e];return t&&t.name})).filter(Boolean)},M=function(e,t){var n=x(t,e);return Array.isArray(n)&&0!==n.length?n.join(", "):""},D=function(e){return/^[A-Za-z0-9]+([-_.][A-Za-z0-9]+)*@([A-Za-z0-9]+[-.])+[A-Za-z0-9]{2,20}$/.test(e)},I=n(36149),N="number",L="string",k="boolean",P="array",F=[I.US.IS_ANY_OF,I.US.IS_NONE_OF],j=[C.vZ.TEXT,C.vZ.FILE_NAME],Y=[I.US.EMPTY,I.US.NOT_EMPTY],U=[I.Xu.NUMBER_OF_DAYS_AGO,I.Xu.NUMBER_OF_DAYS_FROM_NOW,I.Xu.THE_NEXT_NUMBERS_OF_DAYS,I.Xu.THE_PAST_NUMBERS_OF_DAYS,I.Xu.EXACT_DATE],B=[I.Xu.NUMBER_OF_DAYS_AGO,I.Xu.NUMBER_OF_DAYS_FROM_NOW,I.Xu.THE_NEXT_NUMBERS_OF_DAYS,I.Xu.THE_PAST_NUMBERS_OF_DAYS],H=function(){return(0,r.A)((function e(){(0,o.A)(this,e)}),null,[{key:"validate",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=e.column_key,o=e.filter_predicate,a=e.filter_term_modifier,i=e.filter_term,l=this.validateColumn(r,t).error_message;if(l)return{error_message:l};var s=t.find((function(e){return e.key===r})),u=this.validatePredicate(o,s).error_message;if(u)return{error_message:u};if(this.isFilterOnlyWithPredicate(o,s))return{error_message:null};var c=this.validateModifier(a,o,s).error_message;if(c)return{error_message:c};if(this.isFilterOnlyWithModifier(a,s))return{error_message:null};if(n){var d=this.validateTerm(i,o,a,s).error_message;if(d)return{error_message:d}}return{error_message:null}}},{key:"validateColumn",value:function(e,t){if(!e)return{error_message:I.pQ.INCOMPLETE_FILTER};var n=t.find((function(t){return t.key===e}));return n?this.isValidColumnType(n)?{error_message:null}:{error_message:I.pQ.COLUMN_NOT_SUPPORTED}:{error_message:I.pQ.COLUMN_MISSING}}},{key:"validatePredicate",value:function(e,t){if(!e)return{error_message:I.pQ.INCOMPLETE_FILTER};var n=t.type;return I.Ts[n].filterPredicateList.includes(e)?{error_message:null}:{error_message:I.pQ.UNMATCHED_PREDICATE}}},{key:"validatePredicateWithArrayType",value:function(e,t){var n=t.data.array_type;return n===C.vZ.CHECKBOX||n===C.vZ.BOOL?this.validatePredicate(e,{type:C.vZ.CHECKBOX}):!!Y.includes(e)||(n===C.vZ.SINGLE_SELECT||n===C.vZ.DEPARTMENT_SINGLE_SELECT?this.validatePredicate(e,{type:C.vZ.MULTIPLE_SELECT}):C.Kv.includes(n)?this.validatePredicate(e,{type:C.vZ.COLLABORATOR}):this.validatePredicate(e,{type:n}))}},{key:"isFilterOnlyWithPredicate",value:function(e,t){if(Y.includes(e))return!0;var n=t.type,r=I.US.IS_CURRENT_USER_ID,o=I.US.INCLUDE_ME;return!(e!==r||!j.includes(n))||!(e!==o||!C.Kv.includes(n))}},{key:"validateModifier",value:function(e,t,n){if(!E(n))return{error_message:null};if(!e)return{error_message:I.pQ.INCOMPLETE_FILTER};if(t===I.US.IS_WITHIN){if(I.B3.includes(e))return{error_message:null}}else if(I.uv.includes(e))return{error_message:null};return{error_message:I.pQ.UNMATCHED_MODIFIER}}},{key:"isFilterOnlyWithModifier",value:function(e,t){return!!E(t)&&!U.includes(e)}},{key:"validateTerm",value:function(e,t,n,r){return this.isTermMissing(e)?{error_message:I.pQ.INCOMPLETE_FILTER}:this.isValidTerm(e,t,n,r)?{error_message:null}:{error_message:I.pQ.INVALID_TERM}}},{key:"isTermMissing",value:function(e){return!e&&0!==e&&!1!==e||Array.isArray(e)&&0===e.length}},{key:"isValidTerm",value:function(e,t,n,r){switch(r.type){case C.vZ.TEXT:case C.vZ.GEOLOCATION:case C.vZ.FILE_NAME:return this.isValidTermType(e,L);case C.vZ.NUMBER:case C.vZ.RATE:return this.isValidTermType(e,N);case C.vZ.CHECKBOX:case C.vZ.BOOL:return this.isValidTermType(e,k);case C.vZ.COLLABORATOR:case C.vZ.CREATOR:case C.vZ.LAST_MODIFIER:return this.isValidTermType(e,P);case C.vZ.DATE:case C.vZ.CTIME:case C.vZ.MTIME:return B.includes(n)?this.isValidTermType(e,N):this.isValidTermType(e,L);case C.vZ.SINGLE_SELECT:var o=(0,_.Fi)(r);return F.includes(t)?!!this.isValidTermType(e,P)&&this.isValidSelectedOptions(e,o):!!this.isValidTermType(e,L)&&!!o.find((function(t){return e===t.id}));case C.vZ.MULTIPLE_SELECT:if(!this.isValidTermType(e,P))return!1;var a=(0,_.Fi)(r);return this.isValidSelectedOptions(e,a);default:return!1}}},{key:"isValidTermType",value:function(e,t){return t===P?Array.isArray(e)&&e.length>0:t===C.vZ.NUMBER?typeof e===t||!isNaN(Number(e)):typeof e===t}},{key:"isValidTermWithArrayType",value:function(e,t,n,r){var o=r.data,a=o.array_type,i=o.array_data;return a===C.vZ.SINGLE_SELECT?this.isValidTerm(e,t,n,{type:C.vZ.MULTIPLE_SELECT,data:i}):C.Kv.includes(a)?this.isValidTerm(e,t,n,{type:C.vZ.COLLABORATOR}):this.isValidTerm(e,t,n,{type:a,data:i})}},{key:"isValidColumnType",value:function(e){var t=e.type;return I.Ts.hasOwnProperty(t)}},{key:"isValidSelectedOptions",value:function(e,t){var n=t.filter((function(t){return e.includes(t.id)}));return e.length===n.length}}])}(),G=n(58419),V=function(e,t){return"string"!==typeof e?{isValid:!1,message:(0,G.AP)("Name should be string")}:""===(e=e.trim())?{isValid:!1,message:(0,G.AP)("Name is required")}:e.includes("/")?{isValid:!1,message:(0,G.AP)("Name cannot contain slash")}:e.includes("\\")?{isValid:!1,message:(0,G.AP)("Name cannot contain backslash")}:t.includes(e)?{isValid:!1,message:(0,G.AP)("Name already exists")}:{isValid:!0,message:e}},Z=[1,1,1,2,2,2,3,3,3,4,4,4],z=/(\[[^[]*\])|([-:/.()\s]+)|(A|a|YYYY|YY?|MM?M?M?|Do|DD?|hh?|HH?|mm?|ss?|S{1,3}|z|ZZ?)/g,X=/\d\d?/,W=/\d\d/,K={mm:[X,i.sN.MINUTES],HH:[X,i.sN.HOURS],D:[X,i.sN.DAY],DD:[W,i.sN.DAY],M:[X,i.sN.MONTH],MM:[W,i.sN.MONTH],YYYY:[/\d{4}/,i.sN.YEAR]},$=["YYYY","MM","M","DD","D"],q=function(){return(0,r.A)((function e(){(0,o.A)(this,e)}),null,[{key:"format",value:function(e,t){var n=this.getValidDate(e);if(!n)return"";var r=t&&t.toUpperCase(),o=n.getFullYear(),a=n.getMonth()+1,i=n.getDate(),l=a<10?"0".concat(a):a,s=i<10?"0".concat(i):i;switch(r){case"YYYY-MM-DD HH:MM:SS":var u=n.getHours(),c=n.getMinutes(),d=n.getSeconds(),f=u<10?"0".concat(u):u,p=c<10?"0".concat(c):c,m=d<10?"0".concat(d):d;return"".concat(o,"-").concat(l,"-").concat(s," ").concat(f,":").concat(p,":").concat(m);case"YYYY-MM-DD HH:MM":var h=n.getHours(),v=n.getMinutes(),g=h<10?"0".concat(h):h,y=v<10?"0".concat(v):v;return"".concat(o,"-").concat(l,"-").concat(s," ").concat(g,":").concat(y);default:return"".concat(o,"-").concat(l,"-").concat(s)}}},{key:"getDateByGranularity",value:function(e,t){var n=this.getValidDate(e);if(!n)return"";var r=t&&t.toUpperCase(),o=n.getFullYear();switch(r){case"YEAR":return"".concat(o);case"QUARTER":var a=n.getMonth(),i=Z[a];return"".concat(o,"-Q").concat(i);case"MONTH":var l=n.getMonth()+1,s=l<10?"0".concat(l):l;return"".concat(o,"-").concat(s);case"WEEK":var u=n.getDay(),c=n.getDate()+(0===u?-6:1-u),d=new Date(o,n.getMonth(),c),f=d.getMonth()+1,p=d.getDate(),m=f<10?"0".concat(f):f,h=p<10?"0".concat(p):p;return"".concat(d.getFullYear(),"-").concat(m,"-").concat(h);case"DAY":var v=n.getMonth()+1,g=n.getDate(),y=v<10?"0".concat(v):v,C=g<10?"0".concat(g):g;return"".concat(o,"-").concat(y,"-").concat(C);default:return""}}},{key:"isValidDateObject",value:function(e){return e instanceof Date&&!isNaN(e.getTime())}},{key:"getValidDate",value:function(e){if(!e)return null;var t="string"===typeof e,n=e,r=e;return t&&(n.split(" ").length>1||n.includes("T")?r=new Date(e):(n="".concat(e," 00:00:00"),r=new Date(n))),this.isValidDateObject(r)?r:t?(r=new Date(n.replace(/-/g,"/")),this.isValidDateObject(r)?r:null):null}},{key:"parseDateWithFormat",value:function(e,t){if(e.includes("T")){var n=new Date(e);return this.isValidDateObject(n)?n:this.getValidDate(e)}try{var r=this.makeParser(t)(e),o=r.year,a=r.month,i=r.day,l=r.hours,s=r.minutes;if(!o)o=(new Date).getFullYear();var u=new Date("".concat(o,"-").concat(a,"-").concat(i," ").concat(l||"00",":").concat(s||"00"));return this.isValidDateObject(u)?u:this.getValidDate(e)}catch(c){return this.getValidDate(e)}}},{key:"makeParser",value:function(e){var t=(e||i.D2).match(z),n=t.length;return function(e){for(var r=e.split(" "),o=r[0]||"",a=r[1]||"",i={},l=0;l<n;l++){var s=t[l],u=K[s];if(u){var c=u[0],d=u[1];if(d){var f=$.includes(s),p=f?c.exec(o):c.exec(a);if(p){var m=p[0];i[d]=m,f?o=o.replace(m,""):a=a.replace(m,"")}}}}return i}}}])}(),Q=q,J=function(e,t){var n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).collaborators,r=void 0===n?[]:n;if(!e)return"";var o=t.type,a=t.data,l=f(e,t);switch(o){case i.vZ.LONG_TEXT:return function(e){if(!e)return"";var t=typeof e;return"string"===t?e:"object"===t&&e.text||""}(l);case i.vZ.NUMBER:return(0,v.HL)(l,a);case i.vZ.SINGLE_SELECT:var s=(0,_.Fi)(t);return Array.isArray(s)&&0!==s.length?w(s,l):"";case i.vZ.MULTIPLE_SELECT:var u=(0,_.Fi)(t);if(!Array.isArray(u)||0===u.length)return"";var c=T(t,l);return R(t,c).join(", ");case i.vZ.DATE:var d=(a||{}).format,p=void 0===d?i.D2:d;return h(l,p);case i.vZ.CTIME:case i.vZ.MTIME:return Q.format(l,"YYYY-MM-DD HH:MM:SS");case i.vZ.COLLABORATOR:return M(r,l);case i.vZ.CREATOR:case i.vZ.LAST_MODIFIER:return"anonymous"===l?l:M(r,[l]);case i.vZ.GEOLOCATION:return function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.isBaiduMap,o=void 0===r||r,a=n.hyphen,l=void 0===a?"":a;if(!e)return"";switch((t||{}).geo_format){case i.fz.LNG_LAT:var s=e.lng,u=e.lat;return function(e,t){return(e||0===e)&&(t||0===t)}(s,u)?o?"".concat(s,", ").concat(u):"".concat(u,", ").concat(s):"";case i.fz.COUNTRY_REGION:return e.country_region||"";case i.fz.PROVINCE:return e.province||"";case i.fz.PROVINCE_CITY:var c=e.province,d=e.city;return"".concat(c||"").concat(l).concat(d||"").trim();case i.fz.PROVINCE_CITY_DISTRICT:var f=e.province,p=e.city,m=e.district;return"".concat(f||"").concat(l).concat(p||"").concat(l).concat(m||"").trim();case i.fz.MAP_SELECTION:var h=e.address,v=e.title;return"".concat(h||"").concat(l).concat(v||"").trim();default:var g=e.province,y=e.city,C=e.district,E=e.detail;return g||y||C||E?"".concat(g||"").concat(l).concat(y||"").concat(l).concat(C||"").concat(l).concat(E||"").trim():""}}(l,a,{isBaiduMap:!0,hyphen:" "});default:return l||"boolean"===typeof l?String(l):""}},ee=[I.Xu.TODAY,I.Xu.TOMORROW,I.Xu.YESTERDAY,I.Xu.ONE_WEEK_AGO,I.Xu.ONE_WEEK_FROM_NOW,I.Xu.ONE_MONTH_AGO,I.Xu.ONE_MONTH_FROM_NOW,I.Xu.NUMBER_OF_DAYS_AGO,I.Xu.NUMBER_OF_DAYS_FROM_NOW,I.Xu.EXACT_DATE],te=function(e,t){return Array.isArray(e)&&Array.isArray(t)?e.filter((function(e){var n=H.validate(e,t).error_message;return!n||n!==I.pQ.INCOMPLETE_FILTER})):[]},ne=function(e,t){var n=function(e,t){var n=new Date,r=n.getFullYear(),o=n.getMonth(),a=n.getDate(),i=[31,28,31,30,31,30,31,31,30,31,30,31];switch(i[1]=r%4!==0||r%100===0&&r%400!==0?28:29,e){case I.Xu.TODAY:return new Date(r,o,a,0,0,0);case I.Xu.TOMORROW:return new Date(r,o,a+1);case I.Xu.YESTERDAY:return new Date(r,o,a-1);case I.Xu.ONE_WEEK_AGO:return new Date(r,o,a-7);case I.Xu.ONE_WEEK_FROM_NOW:return new Date(r,o,a+7);case I.Xu.ONE_MONTH_AGO:var l=o-1,s=0===o?11:l,u=a>i[s]?i[s]:a;return new Date(r,l,u);case I.Xu.ONE_MONTH_FROM_NOW:var c=o+1,d=11===o?0:c,f=a>i[d]?i[d]:a;return new Date(r,c,f);case I.Xu.NUMBER_OF_DAYS_AGO:return new Date(r,o,a-Number(t));case I.Xu.NUMBER_OF_DAYS_FROM_NOW:return new Date(r,o,a+Number(t));case I.Xu.EXACT_DATE:return new Date(t);case I.Xu.THE_PAST_WEEK:var p=0!==n.getDay()?n.getDay():7;return{startDate:new Date(r,o,a-p-6),endDate:new Date(r,o,a-p)};case I.Xu.THIS_WEEK:var m=0!==n.getDay()?n.getDay():7;return{startDate:new Date(r,o,a-m+1),endDate:new Date(r,o,a-m+7)};case I.Xu.THE_NEXT_WEEK:var h=0!==n.getDay()?n.getDay():7;return{startDate:new Date(r,o,a-h+8),endDate:new Date(r,o,a-h+14)};case I.Xu.THE_PAST_MONTH:var v=o-1;return{startDate:new Date(r,v,1),endDate:new Date(r,v,i[0===o?11:v])};case I.Xu.THIS_MONTH:return{startDate:new Date(r,o,1),endDate:new Date(r,o,i[o])};case I.Xu.THE_NEXT_MONTH:var g=o+1;return{startDate:new Date(r,g,1),endDate:new Date(r,g,11===o?i[0]:i[g])};case I.Xu.THE_PAST_YEAR:var y=r-1;return{startDate:new Date(y,0,1),endDate:new Date(y,11,31)};case I.Xu.THIS_YEAR:return{startDate:new Date(r,0,1),endDate:new Date(r,11,31)};case I.Xu.THE_NEXT_YEAR:var C=r+1;return{startDate:new Date(C,0,1),endDate:new Date(C,11,31)};case I.Xu.THE_NEXT_NUMBERS_OF_DAYS:return{startDate:new Date(r,o,a+1,0,0,0),endDate:new Date(r,o,a+Number(t))};case I.Xu.THE_PAST_NUMBERS_OF_DAYS:return{startDate:new Date(r,o,a-Number(t)),endDate:new Date(r,o,a,0,0,0)};default:return{}}}(e,t);if(ee.includes(e))return q.format(n);var r=n.startDate,o=n.endDate;return{startDate:r?q.format(r):"",endDate:o?q.format(o):""}},re=function(e){return e.map((function(e){return function(e,t){var n=e.filter_term,r=e.filter_term_modifier,o=e;switch(t.type){case C.vZ.CTIME:case C.vZ.MTIME:case C.vZ.DATE:o.other_date=ne(r,n)}return o}(e,e.column)}))},oe=n(32728),ae=n(73224),ie=n(60436),le=n(82240),se=function(e,t,n){var r=n.username,o=n.userId,a=t.column,l=f(e,a);switch(a.type){case C.vZ.CTIME:case C.vZ.MTIME:case C.vZ.DATE:return function(e,t){var n=t.filter_predicate,r=t.filter_term_modifier,o=t.filter_term,a=t.other_date;switch(n){case oe.U.IS:return r===ae.X.EXACT_DATE&&!o||q.format(e)===a;case oe.U.IS_WITHIN:if(r===ae.X.EXACT_DATE&&!o)return!0;if(!e)return!1;var i=a.startDate,l=a.endDate,s=q.format(e);return s>=i&&s<=l;case oe.U.IS_BEFORE:return r===ae.X.EXACT_DATE&&!o||!(!e||!q.getValidDate(e))&&q.format(e)<a;case oe.U.IS_AFTER:return r===ae.X.EXACT_DATE&&!o||!(!e||!q.getValidDate(e))&&q.format(e)>a;case oe.U.IS_ON_OR_BEFORE:return r===ae.X.EXACT_DATE&&!o||!(!e||!q.getValidDate(e))&&q.format(e)<=a;case oe.U.IS_ON_OR_AFTER:return r===ae.X.EXACT_DATE&&!o||!(!e||!q.getValidDate(e))&&q.format(e)>=a;case oe.U.IS_NOT:return r===ae.X.EXACT_DATE&&!o||!(!e||!q.getValidDate(e))&&q.format(e)!==a;case oe.U.EMPTY:return!(e&&q.getValidDate(e));case oe.U.NOT_EMPTY:return!(!e||!q.getValidDate(e));default:return!1}}(l=q.format(l,C.cV.YYYY_MM_DD),t);case C.vZ.FILE_NAME:case C.vZ.TEXT:return function(e,t,n){var r=t.filter_predicate,o=t.filter_term;switch(r){case oe.U.CONTAINS:return!o||!!e&&e.toString().toLowerCase().indexOf(o.toLowerCase())>-1;case oe.U.NOT_CONTAIN:return!o||!e||e.toString().toLowerCase().indexOf(o.toLowerCase())<0;case oe.U.IS:return!o||e===o;case oe.U.IS_NOT:return!o||e!==o;case oe.U.EMPTY:return!e;case oe.U.NOT_EMPTY:return!!e;case oe.U.IS_CURRENT_USER_ID:return!!n&&e===n;default:return!1}}(l,t,o);case C.vZ.LAST_MODIFIER:case C.vZ.CREATOR:return function(e,t,n){var r=t.filter_predicate,o=t.filter_term;switch(r){case oe.U.CONTAINS:return!Array.isArray(o)||!!e&&o.findIndex((function(t){return t===e}))>-1;case oe.U.NOT_CONTAIN:return!Array.isArray(o)||!e||o.findIndex((function(t){return t===e}))<0;case oe.U.INCLUDE_ME:return e===n;case oe.U.IS:return!o||(Array.isArray(o)?e===o[0]:e===o);case oe.U.IS_NOT:return!o||(Array.isArray(o)?e!==o[0]:e!==o);default:return!1}}(l,t,r);case C.vZ.CHECKBOX:return function(e,t){var n=t.filter_term||!1;return("string"===typeof e?"TRUE"===e.toLocaleUpperCase():e||!1)===n}(l,t);case C.vZ.SINGLE_SELECT:return function(e,t){var n=t.filter_predicate,r=t.filter_term;switch(n){case i.US.IS:return!r||e===r;case i.US.IS_NOT:return!r||e!==r;case i.US.IS_ANY_OF:return 0===r.length||r.includes(e);case i.US.IS_NONE_OF:return 0===r.length||r.indexOf(e)<0;case i.US.EMPTY:return!e;case i.US.NOT_EMPTY:return!!e;default:return!1}}(l,t);case C.vZ.MULTIPLE_SELECT:return function(e,t){var n=t.filter_predicate,r=t.filter_term;switch(n){case oe.U.HAS_ANY_OF:return 0===r.length||Array.isArray(e)&&e.some((function(e){return r.includes(e)}));case oe.U.HAS_ALL_OF:return 0===r.length||Array.isArray(e)&&r.every((function(t){return e.includes(t)}));case oe.U.HAS_NONE_OF:return 0===r.length||!Array.isArray(e)||0===e.length||r.every((function(t){return e.indexOf(t)<0}));case oe.U.IS_EXACTLY:if(0===r.length)return!0;if(!Array.isArray(e))return!1;var o=function(e){return(0,ie.A)(new Set(e)).sort()};return o(e).toString()===o(r).toString();case oe.U.EMPTY:return!Array.isArray(e)||0===e.length;case oe.U.NOT_EMPTY:return Array.isArray(e)&&e.length>0;default:return!1}}(l,t);case C.vZ.NUMBER:case C.vZ.RATE:return function(e,t){var n=t.filter_predicate,r=t.filter_term;switch(n){case i.US.EQUAL:return!r&&0!==r||!(!e&&0!==e)&&(0,le.YX)(r,e);case i.US.NOT_EQUAL:return!r&&0!==r||!e&&0!==e||!(0,le.YX)(r,e);case i.US.LESS:return!r&&0!==r||!(!e&&0!==e||(0,le.YX)(e,r))&&e<r;case i.US.GREATER:return!r&&0!==r||!(!e&&0!==e||(0,le.YX)(e,r))&&e>r;case i.US.LESS_OR_EQUAL:return!r&&0!==r||!(!e&&0!==e)&&(!!(0,le.YX)(e,r)||e<r);case i.US.GREATER_OR_EQUAL:return!r&&0!==r||!(!e&&0!==e)&&((0,le.YX)(e,r)||e>r);case i.US.EMPTY:return 0!==e&&(!e||"number"!==typeof e);case i.US.NOT_EMPTY:return 0===e||!(!e||"number"!==typeof e);default:return!1}}(l,t);case C.vZ.COLLABORATOR:return function(e,t,n){var r=t.filter_predicate,o=t.filter_term;switch(r){case i.US.HAS_ANY_OF:return!Array.isArray(o)||0===o.length||Array.isArray(e)&&o.some((function(t){return e.includes(t)}));case i.US.HAS_ALL_OF:return!Array.isArray(o)||0===o.length||Array.isArray(e)&&o.every((function(t){return e.includes(t)}));case i.US.HAS_NONE_OF:return!Array.isArray(o)||0===o.length||!Array.isArray(e)||0===e.length||o.every((function(t){return e.indexOf(t)<0}));case i.US.IS_EXACTLY:if(!Array.isArray(o)||0===o.length)return!0;if(!Array.isArray(e)||0===e.length)return!1;var a=(0,ie.A)(new Set(e));return a.length===o.length&&o.every((function(e){return a.includes(e)}));case i.US.EMPTY:return!Array.isArray(e)||0===e.length;case i.US.NOT_EMPTY:return Array.isArray(e)&&e.length>0;case i.US.INCLUDE_ME:return Array.isArray(e)&&e.indexOf(n)>-1;default:return!1}}(l,t,r);default:return!1}},ue=function(e,t,n,r){var o=r.username,a=r.userId,i=[],l=re(t);return n.forEach((function(t){var n=t._id;(function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=r.username,a=void 0===o?"":o,i=r.userId;return t===I.FK.AND?n.every((function(t){return se(e,t,{username:a,userId:i})})):t===I.FK.OR&&n.some((function(t){return se(e,t,{username:a,userId:i})}))})(t,e,l,{username:o,userId:a})&&i.push(n)})),i},ce=function(e,t,n,r){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},a=o.username,i=void 0===a?null:a,l=o.userId,s=void 0===l?null:l,c=e.columns,d=[];try{d=function(e,t){if(!Array.isArray(e)||0===e.length)return[];var n=[];return e.forEach((function(e){var r=e.column_key,o=H.validate(e,t).error_message;if(o){if(o!==I.pQ.INCOMPLETE_FILTER)throw new Error(o)}else{var a=t.find((function(e){return e.key===r})),i=(0,u.A)((0,u.A)({},e),{},{column:a});n.push(i)}})),n}(r,c)}catch(f){return{row_ids:[],error_message:f.message}}return{row_ids:0===d.length?t.map((function(e){return e._id})):ue(n,d,t,{username:i,userId:s}),error_message:null}},de=n(81602),fe=function(e,t){return Array.isArray(e)&&Array.isArray(t)?e.filter((function(e){return function(e,t){if(!e||!Array.isArray(t))return!1;var n=e.column_key,r=t.find((function(e){return e.key===n}));return!!r&&de.Ll.includes(r.type)}(e,t)})):[]},pe=function(e,t,n){var r=!e,o=!t;return r&&o?0:r?1:o?-1:e>t?n===i.Cl.UP?1:-1:e<t?n===i.Cl.UP?-1:1:0},me=/\d+|\D+/g,he=/\d/,ve=n(21905),ge=function(e,t){if(!e&&!t)return 0;if(!e)return-1;if(!t)return 1;if("string"!==typeof e||"string"!==typeof t)return 0;for(var n,r,o=e.match(me),a=t.match(me),i=Math.min(o.length,a.length),l=0;l<i;l++){if(n=o[l],r=a[l],he.test(n)&&he.test(r)){if((n=parseInt(n))>(r=parseInt(r)))return 1;if(n<r)return-1}if(n!==r)return e.localeCompare(t)}return e.localeCompare(t)},ye=function(e,t,n){var r=!e,o=!t;return r&&o?0:r?1:o?-1:t===e?0:n===ve.Cl.UP?ge(e,t):-1*ge(e,t)},Ce=function(e,t,n){var r=e?1:-1,o=t?1:-1;return r>o?n===i.Cl.UP?1:-1:r<o?n===i.Cl.UP?-1:1:0},Ee=function(e,t,n){var r=Array.isArray(e)&&e.length?e.join(""):null,o=Array.isArray(t)&&t.length?t.join(""):null;return ye(r,o,n)},_e=function(e,t,n){var r=!e&&0!==e,o=!t&&0!==t;return r&&o?0:r?1:o?-1:e>t?n===ve.Cl.UP?1:-1:e<t?n===ve.Cl.UP?-1:1:0},Ae=function(e,t,n){var r=n.sort_type,o=n.option_id_index_map,a=o[e],i=o[t],l=!a&&0!==a,s=!i&&0!==i;return l&&s?0:l?1:s?-1:a>i?r===ve.Cl.UP?1:-1:a<i?r===ve.Cl.UP?-1:1:0},be=function(e,t){var n=e&&t.find((function(t){return t.key===e.column_key}));return!!n&&ve.dc.includes(n.type)},Se=function(e,t){return Array.isArray(e)&&Array.isArray(t)?e.filter((function(e){return be(e,t)})):[]},we=function(e,t){var n=[];return e.forEach((function(e){var r=t[e];r>-1&&n.push(r)})),n.sort()},Oe=function(e,t,n){var r=n.sort_type,o=n.option_id_index_map,a=!e||0===e.length,i=!t||0===t.length;if(a&&i)return 0;if(a)return 1;if(i)return-1;var l=we(e,o),s=we(t,o),u=l.length,c=s.length;if(u===c&&(0===u||l.join("")===s.join("")))return 0;for(var d=Math.min(u,c),f=0;f<d;f++){if(l[f]>s[f])return r===ve.Cl.UP?1:-1;if(l[f]<s[f])return r===ve.Cl.UP?-1:1}return u>c?r===ve.Cl.UP?1:-1:r===ve.Cl.UP?-1:1},Re=function(e,t){var n=t.column,r=t.count_type;switch(n.type){case C.vZ.TEXT:case C.vZ.LAST_MODIFIER:case C.vZ.CREATOR:return e||null;case C.vZ.DATE:case C.vZ.CTIME:case C.vZ.MTIME:return q.getDateByGranularity(e,r)||null;case C.vZ.NUMBER:case C.vZ.RATE:return e||0===e?e:null;case C.vZ.CHECKBOX:return!!e;case C.vZ.SINGLE_SELECT:return e||null;case C.vZ.MULTIPLE_SELECT:case C.vZ.COLLABORATOR:return Array.isArray(e)?e:[];case C.vZ.GEOLOCATION:return function(e,t){if(!e)return"";var n=e.province,r=e.city,o=e.district,a=e.country_region;switch(t){case i.wA.CITY:return r||"";case i.wA.DISTRICT:return o||"";case i.wA.COUNTRY:return a||"";default:return n||""}}(e,r);default:return null}},Te=function(e,t){var n=null;return C.rT[t]?n="string"===typeof e?e:String(e):C.Tx[t]&&(n=(0,ie.A)(e).sort().toString()),n},xe=function(e,t,n){var r=t[e];return r&&r.index>-1?r.index:(t[e]={},t[e].subgroups={},t[e].index=n,-1)},Me=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],o=t[n],a=o.column,i=o.sort_type,l=a.type,s=a.data,c=i||ve.Cl.UP,f={};if(l===C.vZ.SINGLE_SELECT||l===C.vZ.MULTIPLE_SELECT){var p=(s||{}).options;Array.isArray(p)&&p.forEach((function(e,t){f[e.id]=t}))}if(e.sort((function(e,t){var n=e.cell_value,o=t.cell_value;if(ve.dc.includes(l)){var a;if(ve.FI.includes(l))a=ye(n,o,c);else if(C.BQ.includes(l))a=pe(n,o,c);else if(ve.$4.includes(l))a=_e(n,o,c);else if(l===C.vZ.CHECKBOX)a=Ce(n,o,c);else if(l===C.vZ.COLLABORATOR){var i=n,s=o;r&&(i=x(i,r),s=x(s,r)),a=Ee(i,s,c)}else l===C.vZ.SINGLE_SELECT?a=Ae(n,o,{sort_type:c,option_id_index_map:f}):l===C.vZ.MULTIPLE_SELECT&&(a=Oe(n,o,{sort_type:c,option_id_index_map:f}));return a}var u=d(n),p=d(o);return u||p?u?p?0:-1:1:0})),Array.isArray(e[0].subgroups)&&e[0].subgroups.length>0){var m=n+1;e=e.map((function(e){var n=Me(e.subgroups,t,m,r);return(0,u.A)((0,u.A)({},e),{},{subgroups:n})}))}return e},De=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if(0===e.length)return[];if(e.length>1)return function(e,t,n){var r=e.length>de.mm?e.slice(0,de.mm):(0,ie.A)(e),o=[],a={};return t.forEach((function(e){for(var t,n,i=e._id,l=0;l<r.length;l++){var s=r[l],u=s.column,c=s.column_key,d=u.type,p=f(e,u),m=Re(p,s),h=Te(m,d),v={cell_value:m,original_cell_value:p,row_ids:null,column_key:c,subgroups:[],summaries:{}};if(0===l){var g=xe(h,a,o.length);n=a[h].subgroups,g<0?(o.push(v),t=o[o.length-1]):t=o[g]}else{var y=xe(h,n,t.subgroups.length);n=n[h].subgroups,y<0?(t.subgroups.push(v),t=t.subgroups[t.subgroups.length-1]):t=t.subgroups[y],l===r.length-1&&(t.row_ids?t.row_ids.push(i):t.row_ids=[i])}}})),o=Me(o,r,0,n)}(e,t,n);var r=e[0],o=r.column_key,a=r.column,i=a.type,l=[],s={};return t.forEach((function(e){var t=f(e,a),n=Re(t,r),u=function(e,t,n){var r=t[e];return r>-1?r:(t[e]=n,-1)}(Te(n,i),s,l.length);u>-1?l[u].row_ids.push(e._id):l.push({cell_value:n,original_cell_value:t,column_key:o,row_ids:[e._id],subgroups:null,summaries:{}})})),l=Me(l,e,0,n)},Ie=function(e,t,n,r){var o=r.collaborators;if(0===t.length)return[];if(0===n.length)return t;var a=[];try{a=function(e,t){var n=fe(e,t),r=[];return n.forEach((function(e){var n=e.column_key,o=e.count_type,a=t.find((function(e){return n===e.key})),i=a.type,l=(0,u.A)((0,u.A)({},e),{},{column:a});switch(i){case C.vZ.DATE:case C.vZ.CTIME:case C.vZ.MTIME:l.count_type=o||de.UY.MONTH;break;case C.vZ.GEOLOCATION:l.count_type=o||de.wA.PROVINCE}r.push(l)})),r}(n,e.columns)}catch(i){a=[]}return De(a,t,o)},Ne=function(e){return Array.isArray(e)&&"object"===typeof e[0]},Le=function(e,t,n,r){var o=r.collaborators,a=e.columns;if(!Array.isArray(t)||0===t.length)return[];var i=t.slice(0),l=function(e,t){var n=Se(e,t),r=[];return n.forEach((function(e){var n=e.column_key,o=t.find((function(e){return e.key===n})),a=(0,u.A)((0,u.A)({},e),{},{column:o});switch(o.type){case C.vZ.SINGLE_SELECT:case C.vZ.MULTIPLE_SELECT:var i=(0,_.Fi)(o),l={};i.forEach((function(e,t){l[e.id]=t})),a.option_id_index_map=l}r.push(a)})),r}(n,a);return function(e,t,n){var r=n.collaborators;e.sort((function(e,n){var o=0;return t.forEach((function(t){var a=t.sort_type,i=t.column,l=i.type,s=f(e,i),u=f(n,i);if(C.BQ.includes(l))o=o||pe(s,u,a);else if(l===C.vZ.SINGLE_SELECT)o=o||Ae(s,u,t);else if(ve.$4.includes(l))o=o||_e(s,u,a);else if(l===C.vZ.MULTIPLE_SELECT)o=o||Oe(s,u,t);else if(l===C.vZ.COLLABORATOR){var c=s,d=u;r&&(c=x(s,r),d=x(u,r)),o=o||Ee(c,d,a)}else o=l===C.vZ.CHECKBOX?o||Ce(s,u,a):o||ye(s,u,a)})),o}))}(i,l,{collaborators:o}),i.map((function(e){return e._id}))},ke=function(e,t){return e&&e.id_row_map&&t?e.id_row_map[t]:null},Pe=function(e,t){return e&&e.id_row_map&&Array.isArray(t)?t.map((function(t){return e.id_row_map[t]})).filter(Boolean):[]},Fe=function(e,t){return fe(e.groupbys,t).length>0},je=function(e,t){if(!Array.isArray(e)||!Array.isArray(t))return null;var n=e[0];if(n<0||n>=t.length)return null;for(var r=1,o=t[n];r<e.length&&o;){var a=o.subgroups,i=e[r];if(!Array.isArray(a)||i<0||i>=a.length)break;o=a[i],r+=1}return o},Ye=function(){var e=navigator.platform;return"Mac68K"===e||"MacPPC"===e||"Macintosh"===e||"MacIntel"===e},Ue=function(e){return e&&"[object Function]"==={}.toString.call(e)},Be=function(e){var t;for(t in e)return!1;return!0},He=function(e,t){var n=null;return function(){null!==n&&clearTimeout(n),n=setTimeout(e,t)}},Ge=function(e){try{return!!new RegExp(e)}catch(t){return!1}}},91210:function(e,t,n){"use strict";n.d(t,{nY:function(){return v},WH:function(){return h},HL:function(){return p},Et:function(){return g},yA:function(){return m}});var r=function(e){var t=e.toString().split(/[eE]/),n=(t[0].split(".")[1]||"").length-+(t[1]||0);return n>0?n:0},o=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:15;return+parseFloat(Number(e).toPrecision(t))},a=function(e){if(-1===e.toString().indexOf("e"))return Number(e.toString().replace(".",""));var t=r(e);return t>0?o(Number(e)*Math.pow(10,t)):Number(e)},i=function(e,t){var n=a(e),o=a(t),i=r(e)+r(t);return n*o/Math.pow(10,i)},l=n(82240),s=n(84307),u=(n(52719),["bytes","KB","MB","GB","TB","PB"]),c={comma:",",dot:".",no:"",space:" "},d=function(e){return"string"!==typeof e?"":e.endsWith("0")?e.replace(/(?:\.0*|(\.\d+?)0+)$/,"$1"):e},f=function(e,t){var n=t.formats,o=t.isCurrency,a=void 0===o||o,s=n||{},u=s.decimal,f=void 0===u?"dot":u,p=s.thousands,m=void 0===p?"no":p,h=s.precision,v=void 0===h?2:h,g=s.enable_precision,y=void 0!==g&&g;if(String(e).includes("e")){if(e<1&&e>-1){var C=e.toFixed(y?v:8);return y||(C=d(C)),0===parseFloat(C)&&C.startsWith("-")?C.substring(1):C}return String(e)}var E=c[f],_=c[m],A=y?v:function(e){if(Number.isInteger(e))return 0;var t=String(e).split(".")[1],n=t?t.length:8;return n>8?8:n}(e),b=parseFloat((0,l.LI)(e,A).toFixed(A)),S=b<0,w=Math.trunc(b),O=String(Math.abs(function(e,t){var n=Math.pow(10,Math.max(r(e),r(t)));return(i(e,n)-i(t,n))/n}(b,w)).toFixed(A)).slice(1);y||(O=d(O)),a&&(y||(O=2===O.length?O=O.padEnd(3,"0"):(O.substring(0,3)||".").padEnd(3,"0"))),O=O.replace(/./,E);for(var R=[],T=0,x=(w=Math.abs(w).toString()).length-1;x>-1;x--)T+=1,R.unshift(w[x]),T%3||0===x||R.unshift(_);return"".concat(S?"-":"").concat(R.join("")).concat(O)},p=function(e,t){var n=Object.prototype.toString.call(e);if("[object Number]"!==n)return"[object String]"===n&&e.startsWith("#")?e:"";if(isNaN(e)||e===1/0||e===-1/0)return String(e);var r=(t||{}).format;switch(void 0===r?s.KY:r){case"number":return f(e,{formats:t,isCurrency:!1});case"percent":return"".concat(f(Number.parseFloat((100*e).toFixed(8)),{formats:t,isCurrency:!1}),"%");case"yuan":return"\uffe5".concat(f(e,{formats:t}));case"dollar":return"$".concat(f(e,{formats:t}));case"euro":return"\u20ac".concat(f(e,{formats:t}));case"custom_currency":return"after"===t.currency_symbol_position?"".concat(f(e,{formats:t})).concat(t.currency_symbol||""):"".concat(t.currency_symbol||"").concat(f(e,{formats:t}));case"byte":if(e<0)return"--";if(0===e)return e+" "+u[0];var o=parseInt(Math.floor(Math.log(e)/Math.log(1e3)),10);return 0===o?e+" "+u[o]:(e/Math.pow(1e3,o)).toFixed(1)+" "+u[o];default:return String(e)}},m=function(e,t,n){if(!e)return"";var r=e.replace(/\u3002/g,".");switch(t){case"percent":return r.replace(/[^.-\d,%]/g,"");case"yuan":return r.replace(/[^.-\d\xa5\uffe5,]/g,"");case"dollar":return r.replace(/[^.-\d$,]/g,"");case"euro":return r.replace(/[^.-\d\u20ac,]/g,"");case"custom_currency":var o=new RegExp("[^.-\\d"+n+",]","g");return r.replace(o,"");default:return r.replace(/[^.-\d,]/g,"")}},h=function(e,t){if(!e&&0!==e)return null;if("number"===typeof e)return e;if("string"!==typeof e)return null;var n=parseFloat(e.replace(/[^.-\d]/g,""));return"percent"!==t||isNaN(n)?isNaN(n)?null:n:function(e,t){var n=a(e),l=a(t);return i(n/l,o(Math.pow(10,r(t)-r(e))))}(n,100)},v=function(e,t){var n=t||{},r=n.format,o=n.decimal,a=n.thousands,i=n.enable_precision,s=n.precision,u=e;if(o&&a&&"comma"===o&&(u="dot"===a?(u=(u=u.replace(/,/,"@")).replace(/\./g,",")).replace(/@/,"."):(u=u.replace(/\./g,"")).replace(/,/,".")),u=h(u,r),i&&u){var c="percent"===r?s+2:s;u=parseFloat((0,l.LI)(u,c).toFixed(c))}return u},g=function(e){return(e||0===e)&&"[object Number]"===Object.prototype.toString.call(e)}},51511:function(e,t,n){"use strict";n.d(t,{Cl:function(){return i},Fi:function(){return o},oH:function(){return u},rg:function(){return s},zX:function(){return a}});var r=n(34807),o=function(e){return e&&e.data&&Array.isArray(e.data.options)?e.data.options:[]},a=function(e,t){return(o(e).find((function(e){return e.id===t}))||{}).name},i=function(e){if(1===e.length)return String(Math.floor(Math.random()*Math.pow(10,6)));for(var t,n=!1;!n&&(t=String(Math.floor(Math.random()*Math.pow(10,6))),!(n=e.every((function(e){return e.id!==t})))););return t},l=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",o=i(e),a=n&&r.G.find((function(e){return e.COLOR===n}));return a||(a=function(e){var t=r.G.slice(12,24),n=Math.floor(Math.random()*t.length);if(!Array.isArray(e)||0===e.length)return t[n];var o=e.slice(-(t.length-1)),a=[],i={};for(t.forEach((function(e,t){i[e.COLOR]=t})),o.forEach((function(e){var t=i[e.color];a.push(t)}));-1!=a.indexOf(n);)n=Math.floor(Math.random()*t.length);return t[n]||t[0]}(e)),{id:o,name:t,color:a.COLOR,textColor:a.TEXT_COLOR}},s=function(e,t){var n=e.find((function(e){return e.name===t}));return n||(l(e,t)||{})},u=function(e,t){var n=[],r=[];return t.forEach((function(t){var o=e.find((function(e){return e.name===t}));if(o)r.push(o.id);else{var a=l(e,t);a&&(n.push(a),r.push(a.id))}})),0===n.length?{selectedOptionIds:r}:{cellOptions:n,selectedOptionIds:r}}},33175:function(e,t,n){"use strict";n.r(t),n.d(t,{isEnter:function(){return T},isModBackslash:function(){return p},isModComma:function(){return d},isModDot:function(){return c},isModDown:function(){return v},isModF:function(){return l},isModG:function(){return u},isModL:function(){return i},isModLeft:function(){return g},isModP:function(){return s},isModRight:function(){return y},isModS:function(){return o},isModSemicolon:function(){return m},isModShiftComma:function(){return A},isModShiftDot:function(){return _},isModShiftG:function(){return E},isModShiftZ:function(){return C},isModSlash:function(){return f},isModUp:function(){return h},isModZ:function(){return a},isOptPageDown:function(){return O},isOptPageUp:function(){return w},isShiftEnter:function(){return b},isShiftModEnter:function(){return S},isSpace:function(){return R}});var r=n(75168),o=(0,r.default)("mod+s"),a=(0,r.default)("mod+z"),i=(0,r.default)("mod+l"),l=(0,r.default)("mod+f"),s=(0,r.default)("mod+p"),u=(0,r.default)("mod+g"),c=(0,r.default)("mod+."),d=(0,r.default)("mod+,"),f=(0,r.default)("mod+/"),p=(0,r.default)("mod+'"),m=(0,r.default)("mod+;"),h=(0,r.default)("mod+up"),v=(0,r.default)("mod+down"),g=(0,r.default)("mod+left"),y=(0,r.default)("mod+right"),C=(0,r.default)("mod+shift+z"),E=(0,r.default)("mod+shift+g"),_=(0,r.default)("mod+shift+."),A=(0,r.default)("mod+shift+,"),b=(0,r.default)("shift+enter"),S=(0,r.default)("shift+mod+enter"),w=(0,r.default)("opt+pageup"),O=(0,r.default)("opt+pagedown"),R=(0,r.default)("space"),T=(0,r.default)("enter")},82240:function(e,t,n){"use strict";n.d(t,{LI:function(){return o},YX:function(){return r}});var r=function(e,t){return e===t||Math.abs(e-t)<1e-5},o=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(0===t)return Math.round(e);var n=Math.pow(10,t),r=e*n;return t>0&&(r=Number.parseFloat(r.toFixed(1))),Math.round(r)/n}},82622:function(e,t,n){"use strict";var r=n(9950),o=n(78297),a=n(48738),i=n.n(a),l=n(71791),s=n(44414);t.A=function(e){var t=e.isShowRateItem,n=e.field,a=e.enterIndex,u=e.index,c=e.value,d=e.onMouseEnter,f=e.onMouseLeave,p=e.onChange,m=(0,r.useRef)(null),h=(0,r.useCallback)((function(){d(u)}),[u,d]),v=(0,r.useCallback)((function(){f()}),[f]),g=(0,r.useCallback)((function(){p(u)}),[u,p]);if(!t&&u>c)return null;var y=n.data||{},C=y.color,E=y.type,_={fill:c>=u?C:"#e5e5e5"};return a>=u&&(_={fill:C,opacity:c>=u?1:.4}),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{onMouseEnter:h,onMouseLeave:v,style:_,onClick:g,className:i()("sf-metadata-rate-item",{active:c>=u}),ref:m,children:(0,s.jsx)(l.In,{iconName:E||"rate"})}),-1!==a&&(0,s.jsx)(o.A,{placement:"bottom",target:m,modifiers:{preventOverflow:{boundariesElement:document.body}},className:"sf-metadata-tooltip",children:a})]})}},65842:function(e,t,n){"use strict";n.d(t,{UI:function(){return o},me:function(){return a},zP:function(){return r}});var r={COLUMN_NAME:"COLUMN_NAME",COLUMN_TYPE:"COLUMN_TYPE"},o={CUSTOM_REGULAR:"CUSTOM_REGULAR"},a={CUSTOM_CURRENCY:"CUSTOM_CURRENCY"}},46971:function(e,t,n){"use strict";n.d(t,{A:function(){return k}});var r=n(5544),o=n(9950),a=n(42119),i=n(18849),l=n(48738),s=n.n(l),u=n(3563),c=n(58419),d=n(51528),f=n(54154),p=n(65842),m=n(47127),h=n(76152),v=n(85077),g=n(15668),y=n(44414),C=(0,o.forwardRef)((function(e,t){var n=e.readOnly,a=e.value,i=(0,o.useState)(""),l=(0,r.A)(i,2),u=l[0],d=l[1],f=(0,o.useState)(a||""),p=(0,r.A)(f,2),m=p[0],C=p[1],E=(0,o.useCallback)((function(e){var t=e.target.value;m!==t&&C(t)}),[m]);return(0,o.useImperativeHandle)(t,(function(){return{getName:function(){return m},setError:function(e){return d(e)}}}),[m]),(0,o.useEffect)((function(){C(a)}),[a]),(0,y.jsxs)(h.A,{className:s()("sf-metadata-column-settings-item",{"is-invalid":u}),children:[(0,y.jsx)(v.A,{placeholder:(0,c.AP)("Property name"),value:m,onChange:E,readOnly:n,autoFocus:!0}),u&&(0,y.jsx)(g.A,{children:u})]})})),E=n(55627),_=n(71791),A=n(31425),b=n(40866),S=450,w=function(e){var t=e.column,n=e.columns,a=e.target,i=e.parentWidth,l=e.onChange,u=e.onToggle,d=(0,o.useRef)(null),f=(0,o.useRef)(null),p=(0,o.useMemo)((function(){if(a){var e=a.getBoundingClientRect(),t=e.top,n=e.left,r={width:S,left:n+i,top:t,maxHeight:"calc(100% - ".concat(t,"px - 5px)")};return n+S+i>document.body.offsetWidth&&(r.left=n-S<=5?5:n-S),r}}),[a,i]),m=(0,o.useState)(""),h=(0,r.A)(m,2),g=h[0],C=h[1],E=(0,o.useMemo)((function(){var e=g.trim().toLocaleLowerCase();return n.filter((function(t){return t.name.toLocaleLowerCase().indexOf(e)>-1}))}),[g,n]),A=(0,o.useCallback)((function(e){var t=e.target.value;t!==g&&C(t)}),[g]),w=(0,o.useCallback)((function(e){e.stopPropagation()}),[]),O=(0,o.useMemo)((function(){return E.filter((function(e){return"basics"===e.groupby}))}),[E]),R=(0,o.useMemo)((function(){return E.filter((function(e){return"predefined"===e.groupby}))}),[E]),T=(0,o.useCallback)((function(e,t){e&&e.stopPropagation(),e&&e.nativeEvent.stopImmediatePropagation(),l(t)}),[l]);(0,o.useEffect)((function(){setTimeout((function(){var e;null===d||void 0===d||null===(e=d.current)||void 0===e||e.focus()}),1)}),[]);var x=(0,o.useCallback)((function(e){f.current&&(-1!==(0,c.wD)(e).indexOf("popover")||f.current.contains(e.target)||setTimeout((function(){return u()}),100))}),[f,u]);return(0,o.useEffect)((function(){return document.addEventListener("click",x),function(){document.removeEventListener("click",x)}}),[]),(0,y.jsx)(b.A,{children:(0,y.jsxs)("div",{className:"sf-metadata-column-types-popover",style:p,ref:f,children:[(0,y.jsx)("div",{className:"search-column-container",children:(0,y.jsx)(v.A,{onChange:A,placeholder:(0,c.AP)("Search property types"),value:g,onClick:w,ref:d})}),E.length>0&&(0,y.jsx)("div",{className:"select-column-wrapper",children:(0,y.jsxs)("div",{className:"select-column-list",children:[R.length>0&&(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)("div",{className:"select-column-title",children:(0,c.AP)("Predefined properties")}),R.map((function(e){return(0,y.jsxs)("div",{className:s()("select-column-item text-truncate",{active:e.key===t.key}),onClick:function(t){return T(t,e)},children:[(0,y.jsx)(_.In,{iconName:e.icon}),(0,y.jsx)("span",{children:e.name})]},e.key)}))]}),O.length>0&&(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)("div",{className:"select-column-title",children:(0,c.AP)("Custom properties")}),O.map((function(e){return(0,y.jsxs)("div",{className:s()("select-column-item text-truncate",{active:e.key===t.key}),onClick:function(t){return T(t,e)},children:[(0,y.jsx)(_.In,{iconName:e.icon}),(0,y.jsx)("span",{children:e.name})]},e.key)}))]})]})})]})})},O=[{icon:u.ZPL[u.vZe.COLLABORATOR],type:u.vZe.COLLABORATOR,name:(0,A.Q8)(u.L2D.FILE_COLLABORATORS),unique:!0,key:u.L2D.FILE_COLLABORATORS,canChangeName:!1,groupby:"predefined"},{icon:u.ZPL[u.vZe.DATE],type:u.vZe.DATE,name:(0,A.Q8)(u.L2D.FILE_EXPIRE_TIME),unique:!0,key:u.L2D.FILE_EXPIRE_TIME,canChangeName:!1,groupby:"predefined"},{icon:u.ZPL[u.vZe.LONG_TEXT],type:u.vZe.LONG_TEXT,name:(0,A.Q8)(u.L2D.FILE_DESCRIPTION),unique:!0,key:u.L2D.FILE_DESCRIPTION,canChangeName:!1,groupby:"predefined"},{icon:u.ZPL[u.vZe.SINGLE_SELECT],type:u.vZe.SINGLE_SELECT,name:(0,A.Q8)(u.L2D.FILE_STATUS),unique:!0,key:u.L2D.FILE_STATUS,canChangeName:!1,groupby:"predefined"},{icon:u.ZPL[u.vZe.TEXT],type:u.vZe.TEXT,name:(0,c.AP)("Text"),canChangeName:!0,key:u.vZe.TEXT,groupby:"basics"},{icon:u.ZPL[u.vZe.LONG_TEXT],type:u.vZe.LONG_TEXT,name:(0,c.AP)("Long text"),canChangeName:!0,key:u.vZe.LONG_TEXT,groupby:"basics"},{icon:u.ZPL[u.vZe.NUMBER],type:u.vZe.NUMBER,name:(0,c.AP)("Number"),canChangeName:!0,key:u.vZe.NUMBER,groupby:"basics"},{icon:u.ZPL[u.vZe.COLLABORATOR],type:u.vZe.COLLABORATOR,name:(0,c.AP)("Collaborator"),canChangeName:!0,key:u.vZe.COLLABORATOR,groupby:"basics"},{icon:u.ZPL[u.vZe.CHECKBOX],type:u.vZe.CHECKBOX,name:(0,c.AP)("Checkbox"),canChangeName:!0,key:u.vZe.CHECKBOX,groupby:"basics"},{icon:u.ZPL[u.vZe.DATE],type:u.vZe.DATE,name:(0,c.AP)("Date"),canChangeName:!0,key:u.vZe.DATE,groupby:"basics"},{icon:u.ZPL[u.vZe.SINGLE_SELECT],type:u.vZe.SINGLE_SELECT,name:(0,c.AP)("Single select"),canChangeName:!0,key:u.vZe.SINGLE_SELECT,groupby:"basics"},{icon:u.ZPL[u.vZe.MULTIPLE_SELECT],type:u.vZe.MULTIPLE_SELECT,name:(0,c.AP)("Multiple select"),canChangeName:!0,key:u.vZe.MULTIPLE_SELECT,groupby:"basics"},{icon:u.ZPL[u.vZe.RATE],type:u.vZe.RATE,name:(0,c.AP)("Rate"),canChangeName:!0,key:u.vZe.RATE,groupby:"basics"}],R=(0,o.forwardRef)((function(e,t){var n=e.parentWidth,a=e.column,i=e.onChange,l=(0,o.useState)(""),u=(0,r.A)(l,2),d=u[0],f=u[1],p=(0,o.useState)(!1),m=(0,r.A)(p,2),v=m[0],C=m[1],A=(0,o.useRef)(null),b=(0,o.useCallback)((function(e){e&&e.stopPropagation(),e&&e.nativeEvent.stopImmediatePropagation(),C(!v)}),[v]),S=(0,o.useCallback)((function(){C(!1)}),[]),R=(0,o.useCallback)((function(e){i(e)}),[i]);return(0,o.useImperativeHandle)(t,(function(){return{setError:function(e){return f(e)},getIsPopoverShow:function(){return v},setPopoverState:function(e){return C(e)}}}),[v]),(0,o.useEffect)((function(){i(O[6])}),[]),(0,y.jsxs)(y.Fragment,{children:[(0,y.jsxs)(h.A,{className:s()("sf-metadata-column-settings-item",{"is-invalid":d}),children:[(0,y.jsx)(E.A,{children:(0,c.AP)("Type")}),(0,y.jsxs)("div",{className:s()("sf-metadata-column-type",{"sf-metadata-column-type-focus":v}),ref:A,onClick:b,children:[(0,y.jsxs)("div",{className:"sf-metadata-column-type-info",children:[(0,y.jsx)(_.In,{iconName:a.icon,className:"mr-2"}),(0,y.jsx)("span",{children:a.name})]}),(0,y.jsx)(_.In,{iconName:"drop-down"})]}),d&&(0,y.jsx)(g.A,{children:d})]}),v&&A.current&&(0,y.jsx)(w,{columns:O,column:a,target:A.current,parentWidth:n,onChange:R,onToggle:S})]})})),T=n(89379),x=n(99730),M=function(e){var t=e.value,n=e.onChange,r=(t||{format:"YYYY-MM-DD"}).format,a=(0,o.useMemo)((function(){var e=new Date,t=e.getFullYear(),n=e.getMonth()+1,r=e.getDate(),o=e.getHours(),a=e.getMinutes();return n=n>9?n:"0".concat(n),r=r>9?r:"0".concat(r),o=o>9?o:"0".concat(o),a=a>9?a:"0".concat(a),"".concat(t,"-").concat(n,"-").concat(r," ").concat(o,":").concat(a)}),[]),i=(0,o.useMemo)((function(){return[{label:"".concat((0,c.AP)("ISO")," (").concat((0,u.u1Q)(a,"YYYY-MM-DD"),")"),value:"YYYY-MM-DD"},{label:"".concat((0,c.AP)("US")," (").concat((0,u.u1Q)(a,"M/D/YYYY"),")"),value:"M/D/YYYY"},{label:"".concat((0,c.AP)("European")," (").concat((0,u.u1Q)(a,"DD/MM/YYYY"),")"),value:"DD/MM/YYYY"},{label:"".concat((0,c.AP)("Germany Russia etc")," (").concat((0,u.u1Q)(a,"DD.MM.YYYY"),")"),value:"DD.MM.YYYY"}]}),[a]),l=(0,o.useCallback)((function(e){n((0,T.A)((0,T.A)({},t),{},{format:e}))}),[t,n]),s=(0,o.useCallback)((function(e){var t=r||"YYYY-MM-DD",o=r.split(" ");1===o.length&&(t=r+" HH:mm"),2===o.length&&(t=o[0]),n({format:t})}),[r,n]);(0,o.useEffect)((function(){r||n({format:"YYYY-MM-DD"})}),[]);var d=i.find((function(e){return e.value===r}))||i[0];return(0,y.jsxs)("div",{className:"sf-metadata-column-data-settings sf-metadata-date-column-data-settings",children:[(0,y.jsxs)(h.A,{className:"",children:[(0,y.jsx)(E.A,{children:(0,c.AP)("Format")}),(0,y.jsx)(_.Cg,{value:d,options:i,onSelectOption:l})]}),(0,y.jsx)("div",{className:"pb-4",children:(0,y.jsx)(x.A,{checked:!!r&&r.indexOf("HH:mm")>-1,size:"large",textPosition:"right",className:"sf-metadata-date-column-data-minute w-100",onChange:s,placeholder:(0,c.AP)("Accurate to minute")})})]})},D=function(e){var t=e.value,n=e.onChange,a=e.updatePopoverState,i=(0,T.A)({max:5,color:"#FF8000",type:"rate"},t),l=i.max,d=i.color,f=i.type,p=(0,o.useState)(!1),m=(0,r.A)(p,2),v=m[0],g=m[1],C=(0,o.useMemo)((function(){return u.WvA.map((function(e){return{label:e.name,value:e.name}}))}),[]);(0,o.useEffect)((function(){n(i)}),[]);var A=(0,o.useMemo)((function(){return C.find((function(e){return e.value===l}))||C.find((function(e){return 5===e.value}))}),[C,l]),b=(0,o.useCallback)((function(e){e.stopPropagation(),e.nativeEvent.stopImmediatePropagation(),v||(g(!0),a(!0))}),[a]),S=(0,o.useCallback)((function(){g(!1),setTimeout((function(){return a(!1)}),100)}),[a]),w=(0,o.useCallback)((function(e,r){n((0,T.A)((0,T.A)({},t),{},{color:e,type:r})),S()}),[t,n,S]),O=(0,o.useCallback)((function(e){n((0,T.A)((0,T.A)({},t),{},{max:e}))}),[t,n]);return(0,y.jsx)("div",{className:"sf-metadata-column-data-settings sf-metadata-rate-column-data-settings",children:(0,y.jsxs)("div",{className:"column-data-settings-container",children:[(0,y.jsxs)(h.A,{className:"rate-column-data-setting-item rate-column-data-style-setting",children:[(0,y.jsx)(E.A,{children:(0,c.AP)("Style")}),(0,y.jsxs)("div",{className:s()("sf-metadata-select custom-select rate-column-data-style-setting-wrapper",{focus:v}),id:"sf-metadata-rate-column-data-style-setting-wrapper",onClick:b,children:[(0,y.jsx)("div",{className:"selected-option",style:{fill:d},children:(0,y.jsx)(_.In,{iconName:f})}),(0,y.jsx)(_.In,{iconName:"drop-down"})]}),v&&(0,y.jsx)(_.Rw,{target:"sf-metadata-rate-column-data-style-setting-wrapper",className:"sf-metadata-rate-column-data-style-setting-popover",hide:S,hideWithEsc:S,modifiers:{preventOverflow:{boundariesElement:document.body}},children:(0,y.jsx)("div",{className:"rate-column-style-list",children:u.uCw.map((function(e){return u.Tvi.map((function(t){return(0,y.jsx)(_.Oi,{iconName:t,onClick:function(){return w(e,t)},style:{fill:e},className:"rate-column-data-style-item"},t+"color"+e)}))}))})})]}),(0,y.jsxs)(h.A,{className:"rate-column-data-setting-item rate-column-data-max-setting",children:[(0,y.jsx)(E.A,{children:(0,c.AP)("Max")}),(0,y.jsx)(_.Cg,{value:A,options:C,onSelectOption:O})]})]})})},I=(0,o.forwardRef)((function(e,t){var n=e.column,a=(0,o.useMemo)((function(){return n.type}),[n]),i=(0,o.useState)({}),l=(0,r.A)(i,2),s=l[0],c=l[1],d=(0,o.useState)(!1),f=(0,r.A)(d,2),p=f[0],m=f[1];(0,o.useImperativeHandle)(t,(function(){return{getValue:function(){return s},setValue:function(e){return c(e)},getIsPopoverShow:function(){return p}}}),[p,s]);var h=(0,o.useCallback)((function(e){c(e)}),[]);return a===u.vZe.DATE?(0,y.jsx)(M,{value:s,onChange:h}):a===u.vZe.RATE?(0,y.jsx)(D,{value:s,onChange:h,updatePopoverState:m}):null})),N=I,L={},k=function(e){var t=e.target,n=e.onChange,l=(0,o.useState)({}),h=(0,r.A)(l,2),v=h[0],g=h[1],E=(0,o.useRef)(null),_=(0,o.useRef)(null),b=(0,o.useRef)(null),S=(0,o.useRef)(null),w=(0,o.useRef)(null),O=(0,m.p)().metadata,T=(0,o.useMemo)((function(){return L[v.type]||350}),[v]),x=(0,o.useCallback)((function(e){var t,n;null!==(t=S.current)&&void 0!==t&&t.getIsPopoverShow()||null!==(n=w.current)&&void 0!==n&&n.getIsPopoverShow()||E.current.toggle()}),[S,w]),M=(0,o.useCallback)((function(e){setTimeout((function(){S.current.setPopoverState(!1)}),100),d.A.isSameObject(v,e)||(g(e),e.type!==v.type&&w.current.setValue({}))}),[S,v]),D=(0,o.useCallback)((function(){b.current.setError(""),S.current.setError("");var e=1,t=b.current.getName(),r=f.Sp[p.zP.COLUMN_NAME]({columnName:t,metadata:O,gettext:c.AP});r&&(b.current.setError(r.tips),e=0);var o=f.Sp[p.zP.COLUMN_TYPE]({column:v,metadata:O,gettext:c.AP});if(o&&(S.current.setError(o.tips),e=0),0!=e){var a=w.current.getValue();0===Object.keys(a).length&&(a=null,v.unique?v.type===u.vZe.SINGLE_SELECT&&v.key===u.L2D.FILE_STATUS&&(a={options:(0,A.YO)()}):v.type===u.vZe.SINGLE_SELECT||v.type===u.vZe.MULTIPLE_SELECT?a={options:[]}:v.type===u.vZe.DATE&&(a={format:u.D23})),n(v.unique?v.key:t,v.type,{key:v.unique?v.key:"",data:a}),x()}}),[b,v,O,n,x]);return(0,y.jsx)(a.A,{target:t,trigger:"legacy",placement:"bottom-end",hideArrow:!0,toggle:x,fade:!1,ref:E,className:"sf-metadata-column-popover",children:(0,y.jsxs)("div",{className:"sf-metadata-column-popover-inner",ref:_,style:{width:T},children:[(0,y.jsxs)("div",{children:[(0,y.jsx)(C,{ref:b,readOnly:null===v||void 0===v?void 0:v.unique,value:null!==v&&void 0!==v&&v.unique?v.name:""}),(0,y.jsx)(R,{ref:S,column:v,onChange:M,parentWidth:T}),(0,y.jsx)(N,{ref:w,column:v})]}),(0,y.jsxs)("div",{className:s()("sf-metadata-column-popover-footer",{"sf-metadata-number-column-popover-footer":v.type===u.vZe.NUMBER}),children:[(0,y.jsx)(i.A,{color:"secondary",className:"mr-4",onClick:x,children:(0,c.AP)("Cancel")}),(0,y.jsx)(i.A,{color:"primary",onClick:D,children:(0,c.AP)("Submit")})]})]})})}},54154:function(e,t,n){"use strict";n.d(t,{Sp:function(){return i}});var r=n(64467),o=n(3563),a=n(65842),i=(0,r.default)((0,r.default)((0,r.default)((0,r.default)({},a.zP.COLUMN_NAME,(function(e){var t=e.columnName,n=e.oldColumn,r=e.metadata,i=e.gettext;return t?t.includes(".")?{type:a.zP.COLUMN_NAME,tips:i("Name cannot contain dots")}:t.includes("`")?{type:a.zP.COLUMN_NAME,tips:i("Name cannot contain backtick")}:t.includes("{")||t.includes("}")?{type:a.zP.COLUMN_NAME,tips:i("Name cannot contain curly braces")}:(!n||n&&n.name!==t)&&(0,o.pTd)(r.columns,t)?{type:a.zP.COLUMN_NAME,tips:i("There is another property with this name")}:null:{type:a.zP.COLUMN_NAME,tips:i("This is required")}})),a.zP.COLUMN_TYPE,(function(e){var t=e.column,n=e.metadata,r=e.gettext;return t.unique&&(0,o.rm3)(n.columns,t.key)?{type:a.zP.COLUMN_TYPE,tips:r("Another property has this property type")}:null})),o.vZe.TEXT,(function(e){var t=e.column,n=e.gettext,r=t.format_specification_value;return"custom_format"===t.format_check_type&&r&&!(0,o.ZvR)(r)?{type:a.UI.CUSTOM_REGULAR,tips:n("Invalid regular expression")}:null})),o.vZe.NUMBER,(function(e){var t=e.column,n=e.gettext,r=t.format,o=t.currency_symbol;return"custom_currency"!==r||o?null:{type:a.me.CUSTOM_CURRENCY,tips:n("This is required")}}))},99153:function(e,t,n){"use strict";n.d(t,{Iz:function(){return ye},D0:function(){return ke},Oe:function(){return Ye},wm:function(){return P},Yt:function(){return h},cu:function(){return Oe}});n(46971);var r=n(5544),o=n(9950),a=n(26100),i=n(85077),l=n(71791),s=n(13042),u=n(54154),c=n(65842),d=n(47127),f=n(58419),p=n(4086),m=n(44414),h=function(e){var t=e.value,n=e.target,h=e.onToggle,v=e.onSubmit,g=(0,o.useState)(t),y=(0,r.A)(g,2),C=y[0],E=y[1],_=(0,o.useRef)(null),A=(0,d.p)().metadata,b=(0,o.useCallback)((function(e){var t=e.target.value;t!==C&&E(t)}),[C]),S=(0,o.useCallback)((function(){if(C!==t){var e=u.Sp[c.zP.COLUMN_NAME]({columnName:C,metadata:A,gettext:f.AP});e?p.A.danger(e.tips):v(C)}else h()}),[C,t,A,v,h]),w=(0,o.useCallback)((function(e){e.keyCode===s.cK.Enter&&(e.preventDefault(),S())}),[S]),O=(0,o.useCallback)((function(e){e.preventDefault()}),[]);return(0,o.useEffect)((function(){return _.current.focus(),document.addEventListener("keydown",w),function(){document.removeEventListener("keydown",w)}}),[w]),(0,m.jsx)(l.Rw,{target:n,className:"sf-metadata-rename-column-popover",hide:S,hideWithEsc:h,children:(0,m.jsx)(a.A,{className:"p-4",children:(0,m.jsx)(i.A,{value:C,innerRef:_,onClick:O,onChange:b})})})},v=n(3563),g=n(51511),y=n(35975),C=n(89857),E=n(72784),_=(0,C.Tl)("sfMetadataSingleSelectOption",{},(function(e){return{connectDropTarget:e.dropTarget()}}))((function(e){var t=e.inputRef,n=e.options;return Array.isArray(n)&&0!==n.length?(0,m.jsx)("div",{className:"sf-metadata-select-options-list",ref:t,children:n}):null})),A=(0,E.A)(_),b=n(60436),S=n(23029),w=n(92901),O=n(39874),R=n(85501),T=n(78297),x=function(e){function t(){var e;(0,S.A)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=(0,O.A)(this,t,[].concat(r))).getValidOptions=function(t){var n,r=e.props.column,o=(null===r||void 0===r||null===(n=r.data)||void 0===n?void 0:n.options)||[],a=[],i={};o.forEach((function(e){return i[e.id]=!0}));for(var l=0;l<t.length;l++)t[l]&&"object"===typeof t[l]&&t[l].name&&t[l].color&&t[l].id&&!i[t[l].id]&&(a.push(t[l]),i[t[l].id]=!0);return a},e.onImportOptionsToggle=function(){e.importOptionsInput.click()},e.importOptionsInputChange=function(){if(e.importOptionsInput.files&&0!==e.importOptionsInput.files.length){var t=new FileReader;t.onload=e.handleImportOptions.bind(e),t.onerror=e.handleImportOptionsError.bind(e),t.readAsText(e.importOptionsInput.files[0])}else p.A.warning((0,f.AP)("Please select a file"))},e.handleImportOptions=function(t){var n,r=[];try{r=JSON.parse(t.target.result)}catch(l){return void p.A.danger((0,f.AP)("The imported options are invalid"))}if(Array.isArray(r)&&0!==r.length){var o=e.getValidOptions(r);if(0!==o.length){var a=e.props.column,i=(null===a||void 0===a||null===(n=a.data)||void 0===n?void 0:n.options)||[];o=[].concat((0,b.A)(i),(0,b.A)(o)),e.props.onImportOptions(o),e.importOptionsInput.value=null,p.A.success((0,f.AP)("Options imported"))}else p.A.warning((0,f.AP)("The imported option already exists"))}else p.A.danger((0,f.AP)("The imported options are invalid"))},e.handleImportOptionsError=function(){p.A.success((0,f.AP)("Failed imported options"))},e}return(0,R.A)(t,e),(0,w.A)(t,[{key:"render",value:function(){var e,t=this,n=this.props,r=n.column,o=n.onToggle,a=(null===r||void 0===r||null===(e=r.data)||void 0===e?void 0:e.options)||[],i="data:text/json;charset=utf-8,".concat(encodeURIComponent(JSON.stringify(a)));return(0,m.jsxs)("div",{className:"option-editor-footer",children:[(0,m.jsx)("span",{"aria-hidden":"true",className:"sf3-font-help sf3-font option-editor-tips",id:"edit-option-tip"}),(0,m.jsx)(T.A,{delay:{show:0,hide:0},target:"edit-option-tip",placement:"bottom",className:"sf-metadata-tooltip",children:(0,f.AP)("Use the import/export function to transfer options quickly. (The export is in JSON format.) By pasting cells, copied from a text column, an Excel or a TXT file, you can also add options quickly.")}),(0,m.jsx)("input",{type:"file",ref:function(e){return t.importOptionsInput=e},accept:".json",className:"d-none",onChange:this.importOptionsInputChange}),(0,m.jsx)("span",{className:"item-text",onClick:this.onImportOptionsToggle,children:(0,f.AP)("Import options")}),a&&a.length>0&&(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)("span",{className:"mx-2",children:"|"}),(0,m.jsx)("a",{href:i,download:"".concat(r.name,"-options.json"),onClick:o,children:(0,m.jsx)("span",{className:"item-text",children:(0,f.AP)("Export options")})})]})]})}}])}(o.Component),M=n(48738),D=n.n(M),I=function(e){var t=e.option,n=e.isViewing,a=e.onChange,i=(0,o.useMemo)((function(){return"option-color-".concat(t.id)}),[t]),s=(0,o.useState)(!1),u=(0,r.A)(s,2),c=u[0],d=u[1],f=(0,o.useCallback)((function(){d(!0)}),[]),p=(0,o.useCallback)((function(){d(!1)}),[]),h=(0,o.useCallback)((function(e){e.stopPropagation(),e.nativeEvent.stopImmediatePropagation(),d(!1);var n=e.target.value;if(n!==(null===t||void 0===t?void 0:t.color)){var r=v.Gin.find((function(e){return e.COLOR===n})),o=Object.assign({},t,{color:n,textColor:r.TEXT_COLOR,borderColor:r.BORDER_COLOR});a(o)}}),[t,a]);return(0,o.useEffect)((function(){n||d(!1)}),[n]),(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(l.Oi,{className:"sf-metadata-edit-option-color",id:i,style:{backgroundColor:(null===t||void 0===t?void 0:t.color)||null},iconName:"drop-down",iconStyle:{fill:(null===t||void 0===t?void 0:t.textColor)||"#666"},onClick:f}),c&&(0,m.jsx)(l.Rw,{target:i,className:"sf-metadata-edit-option-color-popover",hide:p,hideWithEsc:p,children:(0,m.jsx)("div",{className:"row gutters-xs",onClick:function(e){return e&&e.stopPropagation()},children:v.Gin.map((function(e,n){var r=e.COLOR,o=e.BORDER_COLOR,a=e.TEXT_COLOR,s=0===n&&!t||(null===t||void 0===t?void 0:t.color)===r;return(0,m.jsx)("div",{className:"col-auto",children:(0,m.jsxs)("label",{className:"color-select",children:[(0,m.jsx)("input",{name:"color",type:"radio",value:r,className:"sf-metadata-edit-option-color-item-input",defaultChecked:s,onClick:h}),(0,m.jsx)(l.Oi,{className:D()("sf-metadata-edit-option-color-item-container",{selected:s}),id:i,style:{backgroundColor:r||null,borderColor:o},iconName:"check-mark",iconStyle:{fill:a||"#666"}})]})},e.COLOR)}))})})]})},N=function(e){var t=e.isEditing,n=e.option,a=e.onOpen,l=e.onClose,s=e.onToggleFreeze,u=e.onChange,c=(0,o.useState)((null===n||void 0===n?void 0:n.name)||""),d=(0,r.A)(c,2),f=d[0],p=d[1],h=(0,o.useRef)(null),g=(0,o.useCallback)((function(){var e=f.trim();if(e!==n.name&&""!==e){var t=Object.assign({},n,{name:e});u(t,(function(){s(!1),l()}),(function(){a(n.id)}))}}),[f,s,n,u,a,l]),y=(0,o.useCallback)((function(e){h.current&&!h.current.contains(e.target)&&t&&g()}),[t,g]),C=(0,o.useCallback)((function(e){var t=e.target.value;t!==f&&p(t)}),[f]),E=(0,o.useCallback)((function(e){e.keyCode===v.cKb.Enter&&(e.preventDefault(),g())}),[g]),_=(0,o.useCallback)((function(e){e.stopPropagation(),e.nativeEvent.stopImmediatePropagation(),a(n.id)}),[n,a]);return(0,o.useEffect)((function(){return document.addEventListener("mousedown",y),function(){document.addEventListener("mousedown",y)}}),[]),(0,m.jsx)("div",{ref:h,className:"sf-metadata-edit-option-name",style:{width:"calc(100% - 30px)"},children:t?(0,m.jsx)(i.A,{className:"sf-metadata-edit-option-name-input mx-2",type:"text",value:f,onChange:C,onKeyDown:E,onBlur:g,autoFocus:!0}):(0,m.jsx)("div",{className:"sf-metadata-edit-option-name-value text-truncate",onClick:_,title:f,children:f})})},L=(0,C.Tl)("sfMetadataSingleSelectOption",{drop:function(e,t){var n=t.getItem(),r=e.index;if(r!==n.idx){var o={idx:r,data:e.option};e.onMove(n,o)}}},(function(e,t){return{connectDropTarget:e.dropTarget(),isOver:t.isOver(),canDrop:t.canDrop(),dragged:t.getItem()}}))((0,C.I4)("sfMetadataSingleSelectOption",{beginDrag:function(e){return{idx:e.index,data:e.option,mode:"sfMetadataSingleSelectOption"}},endDrag:function(e,t){var n=t.getItem();if(!t.didDrop())return{optionSource:n,optionTarget:{}}},isDragging:function(e,t){var n=e.index;return e.dragged.idx>n}},(function(e,t){return{connectDragSource:e.dragSource(),connectDragPreview:e.dragPreview(),isDragging:t.isDragging()}}))((function(e){var t=e.isOver,n=e.isDragging,r=e.canDrop,a=e.connectDragSource,i=e.connectDragPreview,s=e.connectDropTarget,u=e.isViewing,c=e.isDeleting,d=e.isEditing,f=e.option,p=e.onDelete,h=e.onUpdate,v=e.onMouseLeave,g=e.onMouseEnter,y=e.onToggleFreeze,C=e.onOpenNameEditor,E=e.onCloseNameEditor,_=(0,o.useCallback)((function(e){e.nativeEvent.stopImmediatePropagation(),p(f.id)}),[f,p]),A=(0,o.useCallback)((function(){g(f.id)}),[f,g]);return s(i((0,m.jsxs)("div",{className:D()("sf-metadata-edit-option-container",{"sf-metadata-edit-option-can-drop":t&&r&&!n,"sf-metadata-edit-deleting-option":c,"sf-metadata-edit-option-can-drop-top":t&&r&&n,"sf-metadata-edit-option-viewing":u,"sf-metadata-edit-option-editing":d}),onMouseEnter:function(){return A()},onMouseLeave:v,children:[a((0,m.jsx)("div",{className:"sf-metadata-edit-option-drag-container",children:(0,m.jsx)(l.In,{iconName:"drag"})})),(0,m.jsxs)("div",{className:"sf-metadata-edit-option-content",children:[(0,m.jsx)(I,{option:f,onChange:h,isViewing:u}),(0,m.jsx)(N,{option:f,isEditing:d,onChange:h,onToggleFreeze:y,onOpen:C,onClose:E})]}),(0,m.jsx)("div",{id:"sf-metadata-edit-option-more-operation-".concat(f.id),className:"sf-metadata-edit-option-more-operations",children:(u||c)&&(0,m.jsx)(l.Oi,{className:"sf-metadata-edit-option-operation-item",onClick:_,iconName:"delete"})})]})))}))),k=function(e){var t=e.option,n=e.onToggle,a=e.onSubmit,i=e.deleteNumber,s=(0,o.useState)(!1),u=(0,r.A)(s,2),c=u[0],d=u[1],p=(0,o.useCallback)((function(){n()}),[n]),h=(0,o.useCallback)((function(){d(!0),a()}),[a]);return(0,m.jsxs)(l.Rw,{target:"sf-metadata-edit-option-more-operation-".concat(t.id),className:"sf-metadata-confirm-delete-option-popover",hide:p,hideWithEsc:p,children:[(0,m.jsxs)("div",{className:"sf-metadata-tip-default mt-2 mb-4",children:[(0,f.AP)("{name} rows use this option.").replace("{name}",i)," ",(0,f.AP)("Are you sure you want to delete this option?")]}),(0,m.jsxs)("div",{className:"d-flex justify-content-end",children:[(0,m.jsx)("button",{className:"btn btn-secondary mr-2",onClick:p,children:(0,f.AP)("Cancel")}),(0,m.jsx)("button",{className:"btn btn-primary",disabled:c,onClick:c?function(){}:h,children:c?(0,m.jsx)(l.Rh,{}):(0,f.AP)("Delete")})]})]})},P=function(e){var t=e.target,n=e.column,a=e.onToggle,i=e.onSubmit,s=(0,o.useState)((0,v.FiT)(n)),u=(0,r.A)(s,2),c=u[0],h=u[1],C=(0,o.useState)(""),E=(0,r.A)(C,2),_=E[0],b=E[1],S=(0,o.useState)(-1),w=(0,r.A)(S,2),O=w[0],R=w[1],T=(0,o.useState)(""),M=(0,r.A)(T,2),D=M[0],I=M[1],N=(0,o.useState)(-1),P=(0,r.A)(N,2),F=P[0],j=P[1],Y=(0,o.useState)(0),U=(0,r.A)(Y,2),B=U[0],H=U[1],G=(0,o.useRef)(!1),V=(0,o.useRef)(null),Z=(0,o.useRef)(!0),z=(0,d.p)().metadata,X=(0,o.useMemo)((function(){var e=_.trim().toLowerCase();return e?c.filter((function(t){var n=t.name;return"string"===typeof n&&n.toLowerCase().includes(e)})):c||[]}),[c,_]),W=(0,o.useCallback)((function(e){i(e.filter((function(e){return e.name}))),h(e)}),[i]),K=(0,o.useCallback)((function(e,t,n){if(c.find((function(t){return t.name===e.name&&t.id!==e.id})))return p.A.danger((0,f.AP)("There is another option with this name")),n&&n(),void(Z.current=!1);Z.current=!0,t&&t();var r=c.slice(0),o=r.findIndex((function(t){return t.id===e.id}));r.splice(o,1,e),W(r)}),[c,W,Z]),$=(0,o.useCallback)((function(e,t){var n=e.idx,r=t.idx,o=t.data,a=X.splice(n,1)[0],i=c.slice(0).filter((function(e){return e.id!==a.id})),l=i.findIndex((function(e){return e.id===o.id}));r>n&&l++,i.splice(l,0,a),W(i)}),[c,X,W]),q=(0,o.useCallback)((function(){var e=(null===_||void 0===_?void 0:_.trim())||"",t=(0,y.r)(c,e),n=c.slice(0);n.push(t),W(n),j(e?"":t.id)}),[_,c,W]),Q=(0,o.useCallback)((function(e){var t,n=c.filter((function(t){return t.id!==e}));X[X.length-1].id===e&&R((null===(t=X[X.length-2])||void 0===t?void 0:t.id)||"");I(""),W(n)}),[X,c,W]),J=(0,o.useCallback)((function(e){G.current||O===e||R(e)}),[G,O]),ee=(0,o.useCallback)((function(){G.current||R("")}),[]),te=(0,o.useCallback)((function(e){G.current=e}),[]),ne=(0,o.useCallback)((function(e){Z.current&&j(e)}),[Z]),re=(0,o.useCallback)((function(){j("")}),[]),oe=(0,o.useCallback)((function(e){_!==e&&b(e)}),[_]),ae=(0,o.useCallback)((function(){I("")}),[]),ie=(0,o.useCallback)((function(){Q(D)}),[D,Q]),le=(0,o.useCallback)((function(e){i(e),h(e)}),[i]),se=(0,o.useCallback)((function(e){var t=(0,g.zX)(n,e),r=0;z.rows.forEach((function(e){e[n.name]===t&&r++})),r>0?(I(e),H(r)):(H(0),Q(e))}),[z,n,Q]),ue=(0,o.useCallback)((function(){return X.length>0?null:_?(0,m.jsx)("div",{className:"none-search-result mt-2",children:(0,f.AP)("No options available")}):(0,m.jsx)("div",{className:"none-search-result mt-2",children:(0,f.AP)("No options")})}),[_,X]),ce=(0,o.useCallback)((function(){return Array.isArray(X)?X.map((function(e,t){var n=e.id;return(0,m.jsx)(L,{option:e,index:t,isEditing:F===n,isDeleting:D===n,isViewing:O===n,onMove:$,onUpdate:K,onDelete:se,onMouseEnter:J,onMouseLeave:ee,onToggleFreeze:te,onOpenNameEditor:ne,onCloseNameEditor:re},n)})):[]}),[X,F,D,O,$,K,se,J,ee,te,ne,re]);return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(l.Rw,{target:t,className:"sf-metadata-edit-column-options-popover",canHide:!D&&Z.current,hide:a,hideWithEsc:a,children:(0,m.jsxs)("div",{className:"sf-metadata-edit-column-options-container",children:[(0,m.jsx)("div",{className:"sf-metadata-edit-column-options-search-container",children:(0,m.jsx)(l.DO,{className:"sf-metadata-option-search-control",placeholder:(0,f.AP)("Search option"),onChange:oe,autoFocus:!0})}),ue(),(0,m.jsx)(A,{options:ce(),viewingOptionId:O,inputRef:V}),(0,m.jsx)(l.NC,{className:"sf-metadata-add-option",callBack:q,footerName:(0,f.AP)("Add option"),addIconClassName:"sf-metadata-add-option-icon"}),(0,m.jsx)(x,{column:n,onToggle:a,onImportOptions:le})]})}),D&&(0,m.jsx)(k,{option:c.find((function(e){return e.id===D})),onToggle:ae,onSubmit:ie,deleteNumber:B})]})},F=n(75168),j=n(42119),Y=n(76152),U=n(55627),B=n(18849),H=n(64467),G=((0,H.default)((0,H.default)({},v.vZe.TEXT,!0),v.vZe.URL,!0),(0,H.default)((0,H.default)((0,H.default)((0,H.default)((0,H.default)({},v.XuU.EXACT_DATE,!0),v.XuU.NUMBER_OF_DAYS_AGO,!0),v.XuU.NUMBER_OF_DAYS_FROM_NOW,!0),v.XuU.THE_NEXT_NUMBERS_OF_DAYS,!0),v.XuU.THE_PAST_NUMBERS_OF_DAYS,!0),(0,H.default)((0,H.default)((0,H.default)((0,H.default)((0,H.default)((0,H.default)({},v.USE.IS_ANY_OF,!0),v.USE.IS_NONE_OF,!0),v.USE.HAS_ANY_OF,!0),v.USE.HAS_ALL_OF,!0),v.USE.HAS_NONE_OF,!0),v.USE.IS_EXACTLY,!0)),V=(0,H.default)((0,H.default)({},v.USE.IS,!0),v.USE.IS_NOT,!0),Z=(0,H.default)((0,H.default)({},v.USE.EMPTY,!0),v.USE.NOT_EMPTY,!0),z=(v.pQi.INVALID_FILTER,v.pQi.INCOMPLETE_FILTER,v.pQi.COLUMN_MISSING,v.pQi.COLUMN_NOT_SUPPORTED,v.pQi.UNMATCHED_PREDICATE,v.pQi.UNMATCHED_MODIFIER,v.pQi.INVALID_TERM,[v.vZe.CREATOR,v.vZe.LAST_MODIFIER]),X=function(e,t){var n=e.type;return!!z.includes(n)||!(n!==v.vZe.SINGLE_SELECT||![v.USE.IS_ANY_OF,v.USE.IS_NONE_OF].includes(t))},W=function(e,t){var n=[v.USE.CONTAINS,v.USE.NOT_CONTAIN],r=e.filter_predicate,o=e.filter_term;if(n.includes(r)){o=o?e.filter_term.slice(0):[];var a=t.email,i=o.indexOf(a);i>-1?o.splice(i,1):o.push(a)}else{if(o[0]===t.email)return;o=[t.email]}return Object.assign({},e,{filter_term:o})},K=function(e,t){var n;if(G[e.filter_predicate]){var r=(n=Array.isArray(e.filter_term)?(0,b.A)(e.filter_term):[]).indexOf(t.id);-1===r?n.push(t.id):n.splice(r,1)}else n=t.id;return Object.assign({},e,{filter_term:n})},$=function(e,t){var n=e.filter_term?e.filter_term:[],r=n.indexOf(t.id);return r>-1?n.splice(r,1):n.push(t.id),Object.assign({},e,{filter_term:n})},q=function(e,t){var n=e.filter_term?e.filter_term.slice(0):[],r=t.email,o=n.indexOf(r);return o>-1?n.splice(o,1):n.push(r),Object.assign({},e,{filter_term:n})},Q=function(e){var t=e.type;return v.Tsr[t]||{}},J=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=Q(e).filterPredicateList;if(n){var r=n[0],o=Object.assign({},t,{column_key:e.key,filter_predicate:r});if(o.filter_term="",X(e,r))return o.filter_term=[],o;if((0,v.hBA)(e)){var a=r===v.USE.IS_WITHIN?v.B3[0]:v.uv8[0];return o.filter_term_modifier=a,o.filter_term="",o}return o}},ee=function(){return(0,w.A)((function e(){(0,S.A)(this,e)}),null,[{key:"generatorColumnOption",value:function(e){if(!e)return null;var t=e.type,n=e.name;return{value:{column:e},label:(0,m.jsxs)(o.Fragment,{children:[(0,m.jsx)("span",{className:"sf-metadata-filter-header-icon",children:(0,m.jsx)(l.In,{iconName:v.ZPL[t]})}),(0,m.jsx)("span",{className:"select-option-name",children:n})]})}}},{key:"generatorPredicateOption",value:function(e){return{value:{filterPredicate:e},label:(0,m.jsx)("span",{className:"select-option-name",children:v.boc[e]})}}},{key:"generatorTermModifierOption",value:function(e){return{value:{filterTermModifier:e},label:(0,m.jsx)("span",{className:"select-option-name",children:v._z2[e]})}}},{key:"generatorSingleSelectOption",value:function(e,t){return{value:{columnOption:e},label:(0,m.jsxs)("div",{className:"select-option-name single-option-name",children:[(0,m.jsx)("div",{className:"single-select-option",style:{background:e.color,color:e.textColor||null},title:e.name,"aria-label":e.name,children:e.name}),(0,m.jsx)("div",{className:"single-check-icon",children:(null===t||void 0===t?void 0:t.id)===e.id&&(0,m.jsx)(l.In,{iconName:"check-mark"})})]})}}},{key:"generatorMultipleSelectOption",value:function(e,t){return{value:{columnOption:e},label:(0,m.jsxs)("div",{className:"select-option-name multiple-option-name",children:[(0,m.jsx)("div",{className:"multiple-select-option",style:{background:e.color,color:e.textColor},title:e.name,"aria-label":e.name,children:e.name}),(0,m.jsx)("div",{className:"multiple-check-icon",children:t.indexOf(e.id)>-1&&(0,m.jsx)(l.In,{iconName:"check-mark"})})]})}}},{key:"generatorConjunctionOptions",value:function(){return[{value:{filterConjunction:"And"},label:(0,m.jsx)("span",{className:"select-option-name",children:(0,f.AP)("And")})},{value:{filterConjunction:"Or"},label:(0,m.jsx)("span",{className:"select-option-name",children:(0,f.AP)("Or")})}]}},{key:"getActiveConjunctionOption",value:function(e){return"And"===e?{value:{filterConjunction:"And"},label:(0,m.jsx)("span",{className:"select-option-name",children:(0,f.AP)("And")})}:{value:{filterConjunction:"Or"},label:(0,m.jsx)("span",{className:"select-option-name",children:(0,f.AP)("Or")})}}}])}(),te=function(e){var t=e.readOnly,n=e.filterIndex,r=e.filterTerm,a=e.collaborators,i=e.placeholder,s=e.filter_predicate,u=e.onSelectCollaborator,c=(0,o.useMemo)((function(){return[v.USE.HAS_ANY_OF,v.USE.HAS_ALL_OF,v.USE.HAS_NONE_OF,v.USE.IS_EXACTLY]}),[]),d=(0,o.useMemo)((function(){return c.indexOf(s)>-1}),[c,s]),p=(0,o.useMemo)((function(){return Array.isArray(r)?a.map((function(e){var t=r.findIndex((function(t){return t===e.email}))>-1;return{value:{filterIndex:n,columnOption:e},label:(0,m.jsx)(o.Fragment,{children:(0,m.jsxs)("div",{className:"select-option-name option-collaborator",children:[(0,m.jsx)("div",{className:"collaborator-container",children:(0,m.jsxs)("div",{className:"collaborator",children:[(0,m.jsx)("span",{className:"collaborator-avatar-container",children:(0,m.jsx)("img",{className:"collaborator-avatar",alt:e.name,src:e.avatar_url})}),(0,m.jsx)("span",{className:"collaborator-name text-truncate",style:{maxWidth:"200px"},title:e.name,"aria-label":e.name,children:e.name})]})}),(0,m.jsx)("div",{className:"collaborator-check-icon",children:t&&(0,m.jsx)(l.In,{iconName:"check-mark"})})]})})}})):[]}),[n,a,r]),h=(0,o.useMemo)((function(){return Array.isArray(r)&&r.length>0&&r.map((function(e){var t=a.find((function(t){return t.email===e}));return t?(0,m.jsxs)("div",{className:"collaborator",children:[(0,m.jsx)("span",{className:"collaborator-avatar-container",children:(0,m.jsx)("img",{className:"collaborator-avatar",alt:t.name,src:t.avatar_url})}),(0,m.jsx)("span",{className:"collaborator-name text-truncate",title:t.name,"aria-label":t.name,children:t.name})]},e):null}))}),[r,a]);return(0,m.jsx)(l.Cg,{className:"sf-metadata-selector-collaborator",value:h?{label:h}:{},onSelectOption:u,options:p,placeholder:i,readOnly:t,supportMultipleSelect:d,searchable:!0,searchPlaceholder:(0,f.AP)("Search collaborator"),isShowSelected:!1,noOptionsPlaceholder:(0,f.AP)("No collaborators")})},ne=n(31425),re=n(40326),oe=function(e){var t=e.value,n=e.filterColumn,r=e.readOnly,o=e.onChange,a=(0,ne.Kf)(n).trim();return(0,m.jsx)(l.sv,{isReadOnly:r,format:a,lang:re.vV,value:t,onChange:o,zIndex:1061})},ae=n(73575),ie=n(82622),le=[v.USE.EMPTY,v.USE.NOT_EMPTY],se=function(e){function t(e){var n;return(0,S.A)(this,t),(n=(0,O.A)(this,t,[e])).initSelectOptions=function(e){var t=e.filter,r=e.filterColumn,o=(e.value,Q(r)),a=o.filterPredicateList,i=o.filterTermModifierList;n.filterPredicateOptions=a?a.map((function(e){return ee.generatorPredicateOption(e)})).filter((function(e){return e})):[];var l=t.filter_predicate;(0,v.hBA)(r)&&(l===v.USE.IS_WITHIN&&(i=v.B3),n.filterTermModifierOptions=i.map((function(e){return ee.generatorTermModifierOption(e)})))},n.onDeleteFilter=function(e){e.nativeEvent.stopImmediatePropagation();var t=n.props.index;n.props.deleteFilter(t)},n.resetState=function(e){n.setState({filterTerm:e.filter_term})},n.onSelectConjunction=function(e){n.props.filterConjunction!==e.filterConjunction&&n.props.updateConjunction(e.filterConjunction)},n.onSelectColumn=function(e){var t=n.props,r=t.index,o=t.filter,a=e.column;if(a.key!==o.column_key){var i=J(a,o);i&&(n.resetState(i),n.props.updateFilter(r,i))}},n.onSelectPredicate=function(e){var t=n.props,r=t.index,o=t.filter,a=t.filterColumn,i=e.filterPredicate;if(o.filter_predicate!==i){var l=function(e,t,n){var r=Object.assign({},e,{filter_predicate:n}),o=t.type;if(o===v.vZe.CHECKBOX)return r.filter_term=!1,r;if(o===v.vZe.SINGLE_SELECT)return G[n]?G[e.filter_predicate]!==G[n]&&(r.filter_term=[]):V[n]?V[e.filter_predicate]!==V[n]&&(r.filter_term=""):r.filter_term="",r;if([v.vZe.CREATOR,v.vZe.LAST_MODIFIER].includes(o)&&(V[e.filter_predicate]===V[n]&&n!==v.USE.INCLUDE_ME||(r.filter_term=[])),X(t,n))return(Z[n]||n===v.USE.INCLUDE_ME)&&(r.filter_term=[]),r;if((0,v.hBA)(t)){var a=n===v.USE.IS_WITHIN?v.B3[0]:v.uv8[0];return r.filter_term_modifier=a,r}return r}(o,a,i);n.resetState(l),n.props.updateFilter(r,l)}},n.onSelectTermModifier=function(e){var t=n.props,r=t.index,o=t.filter,a=e.filterTermModifier,i=[v.XuU.EXACT_DATE,v.XuU.NUMBER_OF_DAYS_AGO,v.XuU.NUMBER_OF_DAYS_FROM_NOW,v.XuU.THE_NEXT_NUMBERS_OF_DAYS,v.XuU.THE_PAST_NUMBERS_OF_DAYS];if(o.filter_term_modifier!==a){var l=o.filter_term;i.indexOf(o.filter_term_modifier)>-1&&(l="");var s=Object.assign({},o,{filter_term_modifier:a,filter_term:l});n.resetState(s),n.props.updateFilter(r,s)}},n.onSelectSingle=function(e){var t=n.props,r=t.index,o=t.filter,a=e.columnOption;if(o.filter_term!==a.id){var i=K(o,a);n.resetState(i),n.props.updateFilter(r,i)}},n.onSelectMultiple=function(e){var t=n.props,r=t.index,o=t.filter,a=e.columnOption,i=$(o,a);n.resetState(i),n.props.updateFilter(r,i)},n.onSelectCollaborator=function(e){var t=n.props,r=t.index,o=t.filter,a=e.columnOption,i=q(o,a);n.resetState(i),n.props.updateFilter(r,i)},n.onSelectCreator=function(e){var t=n.props,r=t.index,o=t.filter,a=e.columnOption,i=W(o,a);i&&(n.resetState(i),n.props.updateFilter(r,i))},n.onFilterTermCheckboxChanged=function(e){n.onFilterTermChanged(e.target.checked)},n.onFilterTermTextChanged=function(e){n.onFilterTermChanged(e)},n.onFilterTermNumberChanged=function(){var e=n.numberEditor.getValue();n.onFilterTermChanged(Object.values(e)[0])},n.onFilterExactDateChanged=function(e){n.onFilterTermChanged(e)},n.onFilterTermChanged=function(e){var t=n.props,r=t.index,o=t.filter;if(e!==n.state.filterTerm){n.setState({filterTerm:e});var a=Object.assign({},o,{filter_term:e});n.props.updateFilter(r,a)}},n.onMouseEnterRateItem=function(e){n.setState({enterRateItemIndex:e})},n.onMouseLeaveRateItem=function(){n.setState({enterRateItemIndex:-1})},n.onChangeRateNumber=function(e){n.onFilterTermChanged(e)},n.getInputComponent=function(e){var t=n.props.readOnly,r=n.state.filterTerm;if("text"===e)return(0,m.jsx)(l.DO,{value:r,onChange:n.onFilterTermTextChanged,autoFocus:!1,disabled:t,className:"text-truncate"});if("checkbox"===e){var o=n.props.readOnly;return(0,m.jsx)("input",{type:"checkbox",disabled:o,checked:r,onChange:n.onFilterTermCheckboxChanged})}},n.renderConjunction=function(){var e=n.props,t=e.index,r=e.readOnly,o=e.filterConjunction,a=e.conjunctionOptions;switch(t){case 0:return null;case 1:var i=ee.getActiveConjunctionOption(o);return(0,m.jsx)(l.Cg,{readOnly:r,value:i,options:a,onSelectOption:n.onSelectConjunction});default:return(0,m.jsx)("span",{className:"selected-conjunction-show",children:(0,f.AP)(o)})}},n.renderMultipleSelectOption=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,r=n.props.filter.filter_predicate,a=!1;[v.USE.IS_ANY_OF,v.USE.IS_NONE_OF,v.USE.HAS_ANY_OF,v.USE.HAS_ALL_OF,v.USE.HAS_NONE_OF,v.USE.IS_EXACTLY].includes(r)&&(a=!0);var i=[];Array.isArray(e)&&Array.isArray(t)&&t.forEach((function(t){var n=e.find((function(e){return e.id===t})),r={margin:"0 10px 0 0"},o=null;n?(o=n.name,r.background=n.color,r.color=n.textColor||null):(r.background=ae.lX,o=(0,f.AP)(ae.fT)),i.push((0,m.jsx)("span",{className:"select-option-name multiple-select-option",style:r,title:o,"aria-label":o,children:o},"option_"+t))}));var s=i.length>0?{label:(0,m.jsx)(o.Fragment,{children:i})}:{},u=e.map((function(e){return ee.generatorMultipleSelectOption(e,t)}));return(0,m.jsx)(l.Cg,{className:"sf-metadata-selector-multiple-select",value:s,options:u,onSelectOption:n.onSelectMultiple,placeholder:(0,f.AP)("Select option(s)"),searchable:!0,searchPlaceholder:(0,f.AP)("Search option"),noOptionsPlaceholder:(0,f.AP)("No options available"),supportMultipleSelect:a})},n.getAllCollaborators=function(){var e=window.sfMetadata.collaborators,t=window.sfMetadata.collaboratorsCache;return[].concat((0,b.A)(e),(0,b.A)(Object.values(t)))},n.renderFilterTerm=function(e){var t=n.props,r=t.index,o=t.filter,a=t.collaborators,i=t.readOnly,s=e.type,u=o.filter_term,c=o.filter_predicate,d=o.filter_term_modifier;if(le.includes(c))return null;if((0,v.hBA)(e))return[v.XuU.EXACT_DATE,v.XuU.NUMBER_OF_DAYS_AGO,v.XuU.NUMBER_OF_DAYS_FROM_NOW,v.XuU.THE_NEXT_NUMBERS_OF_DAYS,v.XuU.THE_PAST_NUMBERS_OF_DAYS].indexOf(d)>-1?"exact_date"===d?(0,m.jsx)(oe,{readOnly:i,onChange:n.onFilterExactDateChanged,value:n.state.filterTerm,filterColumn:e}):n.getInputComponent("text"):null;switch(s){case v.vZe.NUMBER:case v.vZe.FILE_NAME:case v.vZe.TEXT:case v.vZe.URL:return c===v.USE.IS_CURRENT_USER_ID?null:n.getInputComponent("text");case v.vZe.CREATOR:case v.vZe.LAST_MODIFIER:if(c===v.USE.INCLUDE_ME)return null;var p=a;return(0,m.jsx)(te,{readOnly:i,filterIndex:r,filterTerm:u||[],collaborators:p,onSelectCollaborator:n.onSelectCreator});case v.vZe.CHECKBOX:return n.getInputComponent("checkbox");case v.vZe.SINGLE_SELECT:var h=(0,v.FiT)(e);if([v.USE.IS_ANY_OF,v.USE.IS_NONE_OF].includes(c))return n.renderMultipleSelectOption(h,u);var g={label:null};if(u){var y=h.find((function(e){return e.id===u})),C=y?{background:y.color,color:y.textColor||null}:{background:ae.lX},E=y?y.name:(0,f.AP)("deleted option");g={label:(0,m.jsx)("span",{className:"select-option-name single-select-option",style:C,title:E,"aria-label":E,children:E})}}var _=h.map((function(e){return ee.generatorSingleSelectOption(e)}));return(0,m.jsx)(l.Cg,{readOnly:i,className:"sf-metadata-selector-single-select",value:g,options:_||[],onSelectOption:n.onSelectSingle,placeholder:(0,f.AP)("Select an option"),searchable:!0,searchPlaceholder:(0,f.AP)("Search option"),noOptionsPlaceholder:(0,f.AP)("No options available"),isInModal:n.props.isInModal});case v.vZe.COLLABORATOR:if(c===v.USE.INCLUDE_ME)return null;var A=n.getAllCollaborators();return(0,m.jsx)(te,{readOnly:i,filterIndex:r,filterTerm:u||[],filter_predicate:c,collaborators:A,placeholder:(0,f.AP)("Select collaborators"),onSelectCollaborator:n.onSelectCollaborator});case v.vZe.MULTIPLE_SELECT:var b=(e.data||{}).options,S=void 0===b?[]:b;return n.renderMultipleSelectOption(S,u,i);case v.vZe.RATE:for(var w=(e.data||{}).max,O=[],R=0;R<w;R++){var T=(0,m.jsx)(ie.A,{enterIndex:n.state.enterRateItemIndex,index:R+1,onMouseEnter:n.onMouseEnterRateItem,onMouseLeave:n.onMouseLeaveRateItem,value:Number(u)||w,field:e,isShowRateItem:!0,onChange:n.onChangeRateNumber},R);O.push(T)}return(0,m.jsx)("div",{className:"filter-rate-list",children:O});default:return null}},n.isRenderErrorTips=function(){var e=n.props.errMsg;return e&&e!==v.pQi.INCOMPLETE_FILTER},n.renderErrorMessage=function(){return n.isRenderErrorTips()?(0,m.jsxs)("div",{className:"ml-2",children:[(0,m.jsx)(l.Oi,{ref:n.invalidFilterTip,iconName:"exclamation-triangle"}),(0,m.jsx)(T.A,{target:n.invalidFilterTip,placement:"bottom",fade:!1,className:"sf-metadata-tooltip",children:(0,f.AP)("Invalid filter")})]}):null},n.state={filterTerm:e.filter.filter_term,enterRateItemIndex:-1},n.filterPredicateOptions=null,n.filterTermModifierOptions=null,n.filterToolTip=o.createRef(),n.invalidFilterTip=o.createRef(),n.initSelectOptions(e),n}return(0,R.A)(t,e),(0,w.A)(t,[{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=this.props.filter;e.filter!==t&&(this.initSelectOptions(e),this.setState({filterTerm:e.filter.filter_term}))}},{key:"shouldComponentUpdate",value:function(e,t){var n=this.props;return e.index!==n.index||e.filter!==n.filter||e.filterColumn!==n.filterColumn||e.filterConjunction!==n.filterConjunction||e.conjunctionOptions!==n.conjunctionOptions||e.filterColumnOptions!==n.filterColumnOptions||t.enterRateItemIndex!==this.state.enterRateItemIndex}},{key:"render",value:function(){var e=this.filterPredicateOptions,t=this.filterTermModifierOptions,n=this.props,r=n.filter,o=n.filterColumn,a=n.filterColumnOptions,i=n.readOnly,s=r.filter_predicate,u=r.filter_term_modifier,c=ee.generatorColumnOption(o),d=ee.generatorPredicateOption(s),p=null,h=!1;(0,v.hBA)(o)?p=ee.generatorTermModifierOption(u):(0,ne.u7)(o)&&(h=!0);var g=!le.includes(s);return(0,m.jsxs)("div",{className:"filter-item",children:[!i&&(0,m.jsx)("div",{className:"delete-filter",onClick:this.onDeleteFilter,children:(0,m.jsx)(l.In,{iconName:"fork-number"})}),(0,m.jsxs)("div",{className:"condition",children:[(0,m.jsx)("div",{className:"filter-conjunction",children:this.renderConjunction()}),(0,m.jsxs)("div",{className:"filter-container",children:[(0,m.jsx)("div",{className:"filter-column",children:(0,m.jsx)(l.Cg,{readOnly:i,value:c,options:a,onSelectOption:this.onSelectColumn,searchable:!0,searchPlaceholder:(0,f.AP)("Search property"),noOptionsPlaceholder:(0,f.AP)("No results")})}),(0,m.jsx)("div",{className:"filter-predicate ml-2 ".concat(h?"filter-checkbox-predicate":""),children:(0,m.jsx)(l.Cg,{readOnly:i,value:d,options:e,onSelectOption:this.onSelectPredicate})}),(0,v.hBA)(o)&&g&&(0,m.jsx)("div",{className:"filter-term-modifier ml-2",children:(0,m.jsx)(l.Cg,{readOnly:i,value:p,options:t,onSelectOption:this.onSelectTermModifier})}),(0,m.jsx)("div",{className:"filter-term ml-2",children:this.renderFilterTerm(o)}),this.renderErrorMessage()]})]})]})}}])}(o.Component),ue=se,ce=function(e){function t(e){var n;return(0,S.A)(this,t),(n=(0,O.A)(this,t,[e])).updateFilter=function(e,t){t&&n.props.updateFilter(e,t)},n.deleteFilter=function(e){var t=n.props.scheduleUpdate;n.props.deleteFilter(e,t)},n.updateConjunction=function(e){n.props.modifyFilterConjunction(e)},n.getConjunctionOptions=function(){return n.conjunctionOptions||(n.conjunctionOptions=ee.generatorConjunctionOptions()),n.conjunctionOptions},n.getFilterColumns=function(){return n.props.columns.filter((function(e){var t=e.type;return Object.prototype.hasOwnProperty.call(v.Tsr,t)}))},n.getColumnOptions=function(){if(!n.columnOptions){var e=n.getFilterColumns();n.columnOptions=e.map((function(e){return ee.generatorColumnOption(e)}))}return n.columnOptions},n.renderFilterItem=function(e,t,r,o){var a=n.props,i=a.readOnly,l=a.filterConjunction,s=a.value,u=n.getConjunctionOptions(),c=n.getColumnOptions();return(0,m.jsx)(ue,{readOnly:i,index:t,filter:e,errMsg:r,filterColumn:o,filterConjunction:l,conjunctionOptions:u,filterColumnOptions:c,value:s,deleteFilter:n.deleteFilter,updateFilter:n.updateFilter,updateConjunction:n.updateConjunction,collaborators:n.props.collaborators,isPre:n.props.isPre},t)},n.conjunctionOptions=null,n.columnOptions=null,n}return(0,R.A)(t,e),(0,w.A)(t,[{key:"UNSAFE_componentWillReceiveProps",value:function(e){e.columns!==this.props.columns&&(this.columnOptions=null)}},{key:"render",value:function(){var e=this,t=this.props,n=t.filters,r=t.className,o=t.emptyPlaceholder,a=t.columns,i=0===n.length;return(0,m.jsxs)("div",{className:D()("sf-metadata-filters-list",{"empty-filters-container":i},(0,H.default)({},r,r)),children:[i&&(0,m.jsx)("div",{className:"empty-filters-list",children:o}),!i&&n.map((function(t,n){var r=t.column_key,o=v.T76.validate(t,a).error_message,i=(0,v.rm3)(a,r)||{};return e.renderFilterItem(t,n,o,i)}))]})}}])}(o.Component),de=n(89379),fe=[{value:"file",name:(0,f.AP)("Only files")},{value:"folder",name:(0,f.AP)("Only folders")},{value:"all",name:(0,f.AP)("Files and folders")}],pe=function(e){var t=e.readOnly,n=e.value,r=void 0===n?"all":n,a=e.onChange,i=(0,o.useMemo)((function(){return fe.map((function(e){var t=e.name;return{value:e.value,label:(0,m.jsxs)("div",{className:"select-basic-filter-option",children:[(0,m.jsx)("div",{className:"select-basic-filter-option-name",title:t,"aria-label":t,children:t}),(0,m.jsx)("div",{className:"select-basic-filter-option-check-icon",children:r===e.value&&(0,m.jsx)(l.In,{iconName:"check-mark"})})]})}}))}),[r]),s=(0,o.useMemo)((function(){var e=fe.find((function(e){return e.value===r}))||fe[2];return{label:(0,m.jsx)("div",{children:e.name})}}),[r]),u=(0,o.useCallback)((function(e){e!==r&&a(e)}),[r,a]);return(0,m.jsx)(l.Cg,{readOnly:t,className:"sf-metadata-basic-filters-select",value:s,options:i,onSelectOption:u,component:{DropDownIcon:(0,m.jsx)("i",{className:"sf3-font sf3-font-down"})}})},me=[{value:"picture",name:(0,f.AP)("Only pictures")},{value:"video",name:(0,f.AP)("Only videos")},{value:"all",name:(0,f.AP)("Pictures and videos")}],he=function(e){var t=e.readOnly,n=e.value,r=void 0===n?"picture":n,a=e.onChange,i=(0,o.useMemo)((function(){return me.map((function(e){var t=e.name;return{value:e.value,label:(0,m.jsxs)("div",{className:"select-basic-filter-option",children:[(0,m.jsx)("div",{className:"select-basic-filter-option-name",title:t,"aria-label":t,children:t}),(0,m.jsx)("div",{className:"select-basic-filter-option-check-icon",children:r===e.value&&(0,m.jsx)(l.In,{iconName:"check-mark"})})]})}}))}),[r]),s=(0,o.useMemo)((function(){var e=me.find((function(e){return e.value===r}))||me[2];return{label:(0,m.jsx)("div",{children:e.name})}}),[r]),u=(0,o.useCallback)((function(e){e!==r&&a(e)}),[r,a]);return(0,m.jsx)(l.Cg,{readOnly:t,className:"sf-metadata-basic-filters-select",value:s,options:i,onSelectOption:u,component:{DropDownIcon:(0,m.jsx)("i",{className:"sf3-font sf3-font-down"})}})},ve=function(e){var t=e.readOnly,n=e.filters,r=void 0===n?[]:n,a=e.onChange,i=(0,o.useCallback)((function(e){var t=r.findIndex((function(e){return e.column_key===v.L2D.IS_DIR})),n=r[t],o=r.slice(0);o[t]=(0,de.A)((0,de.A)({},n),{},{filter_term:e}),a(o)}),[r,a]),l=(0,o.useCallback)((function(e){var t=r.findIndex((function(e){return e.column_key===v.L2D.FILE_TYPE})),n=r[t],o=r.slice(0);o[t]=(0,de.A)((0,de.A)({},n),{},{filter_term:e}),a(o)}),[r,a]);return(0,m.jsxs)(Y.A,{className:"filter-group-basic filter-group p-4",children:[(0,m.jsx)(U.A,{className:"filter-group-name",children:(0,f.AP)("Basic")}),(0,m.jsx)("div",{className:"filter-group-container",children:(0,m.jsx)("div",{className:"sf-metadata-filters-list",children:r.map((function(e,n){var r=e.column_key,o=e.filter_term;return r===v.L2D.IS_DIR?(0,m.jsx)(pe,{readOnly:t,value:o,onChange:i},r):r===v.L2D.FILE_TYPE?(0,m.jsx)(he,{readOnly:t,value:o,onChange:l},r):null}))})})]})},ge=function(e){function t(e){var n;return(0,S.A)(this,t),(n=(0,O.A)(this,t,[e])).onHotKey=function(e){(0,F.default)("esc",e)&&!n.isSelectOpen&&(e.preventDefault(),n.props.hidePopover())},n.setSelectStatus=function(e){n.isSelectOpen=e},n.hideDTablePopover=function(e){if(n.dtablePopoverRef&&!(0,f.wD)(e).includes("popover")&&!n.dtablePopoverRef.contains(e.target))return n.props.hidePopover(e),e.preventDefault(),e.stopPropagation(),!1},n.update=function(e){if(n.props.isNeedSubmit){n.setState({filters:e,isSubmitDisabled:!1})}else n.setState({filters:e},(function(){var t={filters:e,filter_conjunction:n.state.filterConjunction};n.props.update(t)}))},n.deleteFilter=function(e,t){var r=n.state.filters.slice(0);r.splice(e,1),0===r.length&&t(),n.update(r)},n.updateFilter=function(e,t){var r=n.state.filters.slice(0);r[e]=t,n.update(r)},n.modifyFilterConjunction=function(e){if(n.props.isNeedSubmit){n.setState({filterConjunction:e,isSubmitDisabled:!1})}else n.setState({filterConjunction:e},(function(){var t={filters:n.state.filters,filter_conjunction:e};n.props.update(t)}))},n.addFilter=function(e){var t=n.props.columns,r=t[0];if(v.Tsr[r.type]||(r=t.find((function(e){return v.Tsr[e.type]}))),r){var o=J(r),a=n.state.filters.slice(0);0===a.length&&e(),a.push(o),n.update(a)}},n.onClosePopover=function(){n.props.hidePopover()},n.onSubmitFilters=function(){var e=n.state,t={filters:e.filters,filter_conjunction:e.filterConjunction,basic_filters:e.basicFilters};n.props.update(t),n.props.hidePopover()},n.onPopoverInsideClick=function(e){e.stopPropagation()},n.onBasicFilterChange=function(e){if(n.props.isNeedSubmit){n.setState({basicFilters:e,isSubmitDisabled:!1})}else n.setState({basicFilters:e},(function(){var t={filters:n.state.filters,filter_conjunction:n.state.filterConjunction,basic_filters:e};n.props.update(t)}))},n.state={basicFilters:e.basicFilters,filters:(0,v.a1m)(e.filters,e.columns),filterConjunction:e.filterConjunction||"And",isSubmitDisabled:!0},n.isSelectOpen=!1,n}return(0,R.A)(t,e),(0,w.A)(t,[{key:"componentDidMount",value:function(){document.addEventListener("click",this.hideDTablePopover,!0),document.addEventListener("keydown",this.onHotKey),this.unsubscribeOpenSelect=window.sfMetadataContext.eventBus.subscribe(ae.Tw.OPEN_SELECT,this.setSelectStatus)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("click",this.hideDTablePopover,!0),document.removeEventListener("keydown",this.onHotKey),this.unsubscribeOpenSelect()}},{key:"render",value:function(){var e=this,t=this.props,n=t.readOnly,r=t.target,o=t.columns,a=t.placement,i=this.state,s=i.filters,u=i.filterConjunction,c=i.basicFilters,d=o.length>0;return(0,m.jsx)(j.A,{placement:a,isOpen:!0,target:r,fade:!1,hideArrow:!0,className:"sf-metadata-filter-popover",boundariesElement:document.body,children:function(t){var r=t.scheduleUpdate;return(0,m.jsxs)("div",{ref:function(t){return e.dtablePopoverRef=t},onClick:e.onPopoverInsideClick,className:e.props.filtersClassName,children:[(0,m.jsx)(ve,{filters:c,onChange:e.onBasicFilterChange}),(0,m.jsxs)(Y.A,{className:"filter-group-advanced filter-group mb-0",children:[(0,m.jsx)(U.A,{className:"filter-group-name",children:(0,f.AP)("Advanced")}),(0,m.jsxs)("div",{className:"filter-group-container",children:[(0,m.jsx)(ce,{filterConjunction:u,filters:s,columns:o,emptyPlaceholder:(0,f.AP)("No filters"),updateFilter:e.updateFilter,deleteFilter:e.deleteFilter,modifyFilterConjunction:e.modifyFilterConjunction,collaborators:e.props.collaborators,readOnly:n,scheduleUpdate:r,isPre:e.props.isPre}),!n&&(0,m.jsx)(l.NC,{className:"popover-add-tool ".concat(d?"":"disabled"),callBack:d?function(){return e.addFilter(r)}:function(){},footerName:(0,f.AP)("Add filter"),addIconClassName:"popover-add-icon"})]})]}),!n&&e.props.isNeedSubmit&&(0,m.jsxs)("div",{className:"sf-metadata-popover-footer",children:[(0,m.jsx)(B.A,{className:"mr-2",onClick:e.onClosePopover,children:(0,f.AP)("Cancel")}),(0,m.jsx)(B.A,{color:"primary",disabled:e.state.isSubmitDisabled,onClick:e.onSubmitFilters,children:(0,f.AP)("Submit")})]})]})}})}}])}(o.Component);ge.defaultProps={filtersClassName:"",placement:"auto-start"};var ye=ge,Ce="add_sort",Ee="delete_sort",_e="modify_sort_column",Ae="modify_sort_type",be=function(e,t){var n=t.sorts;switch(e){case Ce:var r={column_key:null,sort_type:v.ClR.UP};return n.push(r),n;case Ee:var o=t.index;return n.splice(o,1),n;case _e:var a=t.index,i={column_key:t.column_key,sort_type:v.ClR.UP};return n[a]=i,n;case Ae:var l=t.index,s=t.sort_type,u={column_key:n[l].column_key,sort_type:s};return n[l]=u,n;default:return n}},Se=[{name:(0,f.AP)("Up"),value:v.ClR.UP},{name:(0,f.AP)("Down"),value:v.ClR.DOWN}],we=function(e){function t(e){var n;(0,S.A)(this,t),(n=(0,O.A)(this,t,[e])).hideDTablePopover=function(e){if(n.sortPopoverRef&&!(0,f.wD)(e).includes("popover")&&!n.sortPopoverRef.contains(e.target))return n.props.onSortComponentToggle(e),e.preventDefault(),e.stopPropagation(),!1},n.onHotKey=function(e){(0,F.default)("esc",e)&&!n.isSelectOpen&&(e.preventDefault(),n.props.onSortComponentToggle())},n.setSelectStatus=function(e){n.isSelectOpen=e},n.addSort=function(){var e=n.state.sorts,t=be(Ce,{sorts:e});n.updateSorts(t)},n.deleteSort=function(e,t){e.nativeEvent.stopImmediatePropagation();var r=n.state.sorts.slice(0),o=be(Ee,{sorts:r,index:t});n.updateSorts(o)},n.onSelectColumn=function(e,t){var r=n.state.sorts.slice(0),o=e.column.key;if(o!==r[t].column_key){var a=be(_e,{sorts:r,index:t,column_key:o});n.updateSorts(a)}},n.onSelectSortType=function(e,t){var r=n.state.sorts.slice(0),o=e.sortType;if(o!==r[t].sort_type){var a=be(Ae,{sorts:r,index:t,sort_type:o});n.updateSorts(a)}},n.updateSorts=function(e){if(n.props.isNeedSubmit){n.setState({sorts:e,isSubmitDisabled:!1})}else n.setState({sorts:e},(function(){n.handleSortAnimation()}))},n.handleSortAnimation=function(){var e={sorts:n.state.sorts};n.props.update(e)},n.onClosePopover=function(){n.props.onSortComponentToggle()},n.onSubmitSorts=function(){var e={sorts:n.state.sorts};n.props.update(e),n.props.onSortComponentToggle()},n.createColumnsOptions=function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).filter((function(e){return n.supportSortColumnOptions.includes(e.type)})).map((function(e){var t=e.type,n=e.name;return{value:{column:e},label:(0,m.jsxs)(o.Fragment,{children:[(0,m.jsx)("span",{className:"sf-metadata-filter-header-icon",children:(0,m.jsx)(l.In,{iconName:v.ZPL[t]})}),(0,m.jsx)("span",{className:"",children:n})]})}}))},n.createSortTypeOptions=function(){return Se.map((function(e){return{value:{sortType:e.value},label:(0,m.jsx)("span",{className:"select-option-name",children:e.name})}}))},n.renderSortsList=function(){var e=n.props.columns;return n.state.sorts.map((function(t,r){var o=(0,v.rm3)(e,t.column_key)||{};return n.renderSortItem(o,t,r)}))},n.renderSortItem=function(e,t,r){var a=e.name,i=e.type,s=n.props,u=s.readOnly,c=s.type,d={label:(0,m.jsxs)(o.Fragment,{children:[(0,m.jsx)("span",{className:"sf-metadata-filter-header-icon",children:(0,m.jsx)(l.In,{iconName:v.ZPL[i]})}),(0,m.jsx)("span",{className:"select-option-name",title:a,"aria-label":a,children:a})]})},p=t.sort_type,h=Se.find((function(e){return e.value===p})),g=p&&{label:(0,m.jsx)("span",{className:"select-option-name",children:(null===h||void 0===h?void 0:h.name)||(0,f.AP)("Up")})},y=n.columnsOptions;return 0===r&&(y=y.filter((function(e){return n.supportFirstSortColumnOptions.includes(e.value.column.type)}))),(0,m.jsxs)("div",{className:"sort-item",children:[!u&&(0,m.jsx)("div",{className:"delete-sort",onClick:c===v.rX9.GALLERY&&0===r?function(){}:function(e){return n.deleteSort(e,r)},children:!(c===v.rX9.GALLERY&&0===r)&&(0,m.jsx)(l.In,{iconName:"fork-number"})}),(0,m.jsxs)("div",{className:"condition",children:[(0,m.jsx)("div",{className:"sort-column",children:(0,m.jsx)(l.Cg,{readOnly:u,value:d,onSelectOption:function(e){return n.onSelectColumn(e,r)},options:y,searchable:!0,searchPlaceholder:(0,f.AP)("Search property"),noOptionsPlaceholder:(0,f.AP)("No results")})}),(0,m.jsx)("div",{className:"sort-predicate ml-2",children:(0,m.jsx)(l.Cg,{readOnly:u,value:g,onSelectOption:function(e){return n.onSelectSortType(e,r)},options:n.sortTypeOptions})})]})]},"sort-item-"+r)},n.onPopoverInsideClick=function(e){e.stopPropagation()};var r,a,i=n.props,s=i.sorts,u=i.columns,c=i.type;return n.sortTypeOptions=n.createSortTypeOptions(),n.supportFirstSortColumnOptions=v.cPK[c||v.rX9.TABLE],n.supportSortColumnOptions=v.paJ[c||v.rX9.TABLE],n.columnsOptions=n.createColumnsOptions(u),n.state={sorts:(r=s,a=u,Array.isArray(r)&&Array.isArray(a)?r.filter((function(e){return!e.column_key||(0,v.Bsv)(e,a)})):[]),isSubmitDisabled:!0},n.isSelectOpen=!1,n}return(0,R.A)(t,e),(0,w.A)(t,[{key:"componentDidMount",value:function(){document.addEventListener("click",this.hideDTablePopover,!0),document.addEventListener("keydown",this.onHotKey),this.unsubscribeOpenSelect=window.sfMetadataContext.eventBus.subscribe(ae.Tw.OPEN_SELECT,this.setSelectStatus)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("click",this.hideDTablePopover,!0),document.removeEventListener("keydown",this.onHotKey),this.unsubscribeOpenSelect()}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=e.columns;t!==this.props.columns&&(this.columnsOptions=this.createColumnsOptions(t))}},{key:"render",value:function(){var e=this,t=this.props,n=t.target,r=t.readOnly,o=function(e){return!e||0===e.length}(this.state.sorts);return(0,m.jsx)(j.A,{placement:"bottom-end",isOpen:!0,target:n,fade:!1,hideArrow:!0,className:"sf-metadata-sort-popover",boundariesElement:document.body,children:(0,m.jsxs)("div",{ref:function(t){return e.sortPopoverRef=t},onClick:this.onPopoverInsideClick,children:[(0,m.jsx)("div",{className:"sorts-list ".concat(o?"empty-sorts-container":""),children:o?(0,m.jsx)("div",{className:"empty-sorts-list",children:(0,f.AP)("No sorts")}):this.renderSortsList()}),!r&&(0,m.jsx)(l.NC,{callBack:this.addSort,footerName:(0,f.AP)("Add sort"),className:"popover-add-tool",addIconClassName:"popover-add-icon"}),this.props.isNeedSubmit&&!r&&(0,m.jsxs)("div",{className:"sf-metadata-popover-footer",children:[(0,m.jsx)(B.A,{className:"mr-2",onClick:this.onClosePopover,children:(0,f.AP)("Cancel")}),(0,m.jsx)(B.A,{color:"primary",disabled:this.state.isSubmitDisabled,onClick:this.onSubmitSorts,children:(0,f.AP)("Submit")})]})]})})}}])}(o.Component);we.defaultProps={readOnly:!1};var Oe=we,Re=[v.wAv.COUNTRY,v.wAv.PROVINCE,v.wAv.CITY,v.wAv.DISTRICT],Te=function(e){return(0,v.hBA)(e)?v.UYn.MONTH:e.type===v.vZe.GEOLOCATION?"country_region"===(e.data||{}).geo_format?Re[0]:Re[1]:null},xe=function(e){if((0,v.hBA)(e))return!0;var t=e.data||{};return e.type===v.vZe.GEOLOCATION&&(t.geo_format!==v.wAv.PROVINCE&&"country_region"!==t.geo_format)},Me=n(51528),De=(0,o.memo)((function(e){var t=e.isOver,n=e.isDragging,r=e.canDrop,a=e.connectDragSource,i=e.connectDragPreview,s=e.connectDropTarget,u=e.showDragBtn,c=e.index,d=e.readOnly,p=e.groupby,h=e.columns,g=e.onDelete,y=e.onUpdate,C=(0,o.useMemo)((function(){return(0,v.rm3)(h,p.column_key)}),[p,h]),E=(0,o.useMemo)((function(){return Array.isArray(h)&&0!==h.length?h.map((function(e){var t=e.type,n=e.name;return{value:{column:e},label:(0,m.jsxs)(o.Fragment,{children:[(0,m.jsx)("span",{className:"sf-metadata-filter-header-icon",children:(0,m.jsx)(l.In,{iconName:v.ZPL[t]})}),(0,m.jsx)("span",{className:"select-option-name",children:n})]})}})):[]}),[h]),_=(0,o.useMemo)((function(){return E.find((function(e){return e.value.column.key===p.column_key}))}),[E,p]),A=(0,o.useMemo)((function(){return[{value:{sortType:v.ClR.UP},label:(0,m.jsx)("span",{className:"select-option-name",children:(0,f.AP)("Up")})},{value:{sortType:v.ClR.DOWN},label:(0,m.jsx)("span",{className:"select-option-name",children:(0,f.AP)("Down")})}]}),[]),b=(0,o.useMemo)((function(){return A.find((function(e){return e.value.sortType===p.sort_type}))}),[A,p]),S=(0,o.useMemo)((function(){return{"By day":(0,f.AP)("By day"),"By week":(0,f.AP)("By week"),"By month":(0,f.AP)("By month"),"By quarter":(0,f.AP)("By quarter"),"By year":(0,f.AP)("By year")}}),[]),w=(0,o.useMemo)((function(){var e=function(e){var t=[],n={};if((0,v.hBA)(e))t=v.SvE,n=v.XJ$;else if(e.type===v.vZe.GEOLOCATION){var r=(e.data||{}).geo_format;t=Re.filter((function(e){var t=e===v.wAv.PROVINCE||e===v.wAv.CITY;return r===("province_city"===r&&t)||e!==v.wAv.COUNTRY})),n=v.lj4}return{granularityList:t,displayGranularity:n}}((0,v.rm3)(h,p.column_key)),t=e.granularityList,n=e.displayGranularity;return t.map((function(e){return{value:e,label:(0,m.jsx)("span",{className:"select-option-name",children:S[n[e]]})}}))}),[h,p,S]),O=(0,o.useMemo)((function(){var e=p.count_type,t=function(e,t){var n=t||Te(e);return n&&(0,v.hBA)(e)?v.XJ$[n]:null}(C,e);if(t)return{label:(0,m.jsx)("span",{className:"select-option-name",children:S[t]})}}),[C,p,S]),R=(0,o.useCallback)((function(e){e.nativeEvent.stopImmediatePropagation(),g(c)}),[c,g]),T=(0,o.useCallback)((function(e){var t=p.column_key;if(e.column.key!==t){var n=v.ClR.UP,r=Te(e.column),o=(0,de.A)((0,de.A)({},p),{column_key:e.column.key,sort_type:n,count_type:r});y(o,c)}}),[p,c,y]),x=(0,o.useCallback)((function(e){if(e!==p.sort_type){var t=(0,de.A)((0,de.A)({},p),{},{count_type:e});y(t,c)}}),[p,c,y]),M=(0,o.useCallback)((function(e){var t=p.count_type;if(e.sortType!==t){var n=(0,de.A)((0,de.A)({},p),{},{sort_type:e.sortType});y(n,c)}}),[p,c,y]);return s(i((0,m.jsxs)("div",{className:D()("groupby-item",{"group-can-drop-top":t&&r&&n},{"group-can-drop":t&&r&&!n}),children:[!d&&(0,m.jsx)("div",{className:"delete-groupby",onClick:R,"aria-label":(0,f.AP)("Delete"),children:(0,m.jsx)(l.In,{iconName:"fork-number"})}),(0,m.jsxs)("div",{className:"condition",children:[(0,m.jsx)("div",{className:"groupby-column",children:(0,m.jsx)(l.Cg,{readOnly:d,value:_,options:E,onSelectOption:T,searchable:!0,searchPlaceholder:(0,f.AP)("Search property"),noOptionsPlaceholder:(0,f.AP)("No results")})}),xe(C)&&(0,m.jsx)("div",{className:"groupby-count-type",children:(0,m.jsx)(l.Cg,{readOnly:d,value:O,onSelectOption:x,options:w})}),(0,m.jsx)("div",{className:"groupby-predicate",children:(!C.key||v.dc.includes(C.type))&&(0,m.jsx)(l.Cg,{readOnly:d,value:b,options:A,onSelectOption:M})})]}),!d&&u&&a((0,m.jsx)("div",{className:"groupby-drag",children:(0,m.jsx)(l.In,{iconName:"drag"})}))]})))}),(function(e,t){return!(e.index!==t.index||!Me.A.isSameObject(e.groupby,t.groupby)||e.isDragging!==t.isDragging||e.isOver!==t.isOver||e.canDrop!==t.canDrop||e.showDragBtn!==t.showDragBtn)})),Ie=(0,C.Tl)("sfMetadataGroupbyItem",{drop:function(e,t){var n=t.getItem(),r=e.index;if(r!==n.idx){var o={idx:r,data:e.groupby};e.onMove(n,o)}}},(function(e,t){return{connectDropTarget:e.dropTarget(),isOver:t.isOver(),canDrop:t.canDrop(),dragged:t.getItem()}}))((0,C.I4)("sfMetadataGroupbyItem",{beginDrag:function(e){return{idx:e.index,data:e.groupby,mode:"sfMetadataGroupbyItem"}},endDrag:function(e,t){var n=t.getItem();if(!t.didDrop())return{groupSource:n,groupTarget:{}}},isDragging:function(e){var t=e.index;return e.dragged.idx>t}},(function(e,t){return{connectDragSource:e.dragSource(),connectDragPreview:e.dragPreview(),isDragging:t.isDragging()}}))(De)),Ne=(0,C.Tl)("sfMetadataGroupbyItem",{},(function(e){return{connectDropTarget:e.dropTarget()}}))((function(e){var t=e.readOnly,n=e.groupbys,r=e.columns,a=e.onDelete,i=e.onUpdate,l=e.onMove,s=(0,o.useMemo)((function(){return!Array.isArray(n)||0===n.length}),[n]),u=(0,o.useMemo)((function(){return!t&&(!(!Array.isArray(n)||0===n.length)&&n.length>1)}),[t,n]);return(0,m.jsxs)("div",{className:D()("groupbys-list",{"empty-groupbys-container":s}),children:[s&&(0,m.jsx)("div",{className:"empty-groupbys-list",children:(0,f.AP)("No groupings applied to this view.")}),!s&&n.map((function(e,n){return(0,m.jsx)(Ie,{index:n,readOnly:t,showDragBtn:u,groupby:e,columns:r,onDelete:a,onUpdate:i,onMove:l},n)}))]})})),Le=(0,E.A)(Ne),ke=function(e){var t=e.groupbys,n=e.isNeedSubmit,a=e.readOnly,i=e.hidePopover,s=e.onChange,u=e.target,c=e.placement,d=e.columns,p=(0,o.useState)(t),h=(0,r.A)(p,2),g=h[0],y=h[1],C=(0,o.useState)(!1),E=(0,r.A)(C,2),_=E[0],A=E[1],b=(0,o.useState)(!1),S=(0,o.useRef)(null),w=(0,o.useCallback)((function(e){if(S.current&&!(0,f.wD)(e).includes("popover")&&!S.current.contains(e.target))return i(e),e.preventDefault(),e.stopPropagation(),!1}),[i]),O=(0,o.useCallback)((function(e){(0,F.default)("esc",e)&&!b.current&&(e.preventDefault(),i())}),[b,i]),R=(0,o.useCallback)((function(e){b.current=e}),[b]);(0,o.useEffect)((function(){document.addEventListener("click",w,!0),document.addEventListener("keydown",O);var e=window.sfMetadataContext.eventBus.subscribe(ae.Tw.OPEN_SELECT,R);return function(){document.removeEventListener("click",w,!0),document.removeEventListener("keydown",O),e()}}),[]);var T=(0,o.useCallback)((function(){s(g),i()}),[g,s,i]),x=(0,o.useCallback)((function(e){y(e),n?A(!0):s(e)}),[n,s]),M=(0,o.useCallback)((function(e){e&&e.nativeEvent.stopImmediatePropagation();var t=function(e){var t={};return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:[]).forEach((function(e){var n=e.column_key;n&&(t[n]=!0)})),e.filter((function(e){var n=e.key,r=e.type;return!!v.LlW.includes(r)&&!t[n]}))}(d);if(Array.isArray(t)&&0!==t.length){var n=function(e){var t=e.find((function(e){return e.type===v.vZe.DATE}))||e.find((function(e){return(0,v.hBA)(e)})),n={column_key:null,sort_type:v.ClR.UP};return t&&(n.column_key=t.key,n.count_type=Te(t)),n}(t),r=g.slice(0);r.push(n),x(r)}}),[g,d,x]),D=(0,o.useCallback)((function(e){var t=g.slice(0);t.splice(e,1),x(t)}),[g,x]),I=(0,o.useCallback)((function(e,t){var n=g.slice(0);n[t]=e,x(n)}),[g,x]),N=(0,o.useCallback)((function(e,t){var n=g.slice(0);n.splice(e.idx,1),n.splice(t.idx,0,e.data),x(n)}),[g,x]),L=(0,o.useCallback)((function(){window.sfMetadataContext.eventBus.dispatch(ae.Tw.COLLAPSE_ALL_GROUPS)}),[]),k=(0,o.useCallback)((function(){window.sfMetadataContext.eventBus.dispatch(ae.Tw.EXPAND_ALL_GROUPS)}),[]),P=(0,o.useCallback)((function(e){e.stopPropagation()}),[]);return(0,m.jsx)(j.A,{placement:c,isOpen:!0,target:u,fade:!1,hideArrow:!0,className:"sf-metadata-groupbys-popover",boundariesElement:document.body,children:(0,m.jsxs)("div",{ref:S,onClick:P,className:"sf-metadata-groupbys",children:[(0,m.jsx)(Le,{readOnly:a,groupbys:g,columns:d,onDelete:D,onUpdate:I,onMove:N}),!a&&g.length<v.mmt&&(0,m.jsx)(l.NC,{className:"popover-add-tool",callBack:M,footerName:(0,f.AP)("Add group"),addIconClassName:"popover-add-icon"}),g.length>0&&(0,m.jsxs)("div",{className:"groupbys-tools",children:[(0,m.jsx)("span",{className:"groupbys-tool-item",onClick:L,children:(0,f.AP)("Collapse all")}),(0,m.jsx)("span",{className:"groupbys-tool-item",onClick:k,children:(0,f.AP)("Expand all")})]}),!a&&n&&(0,m.jsxs)("div",{className:"sf-metadata-popover-footer",children:[(0,m.jsx)(B.A,{className:"mr-2",onClick:i,children:(0,f.AP)("Cancel")}),(0,m.jsx)(B.A,{color:"primary",disabled:!_,onClick:T,children:(0,f.AP)("Submit")})]})]})})},Pe=(0,C.Tl)("sfMetadataHiddenColumns",{drop:function(e,t){var n=t.getItem(),r=e.column;if(r.key!==n.key&&n.column.frozen===r.frozen){var o={key:r.key};e.onMove(n.key,o.key)}}},(function(e,t){return{connectDropTarget:e.dropTarget(),isOver:t.isOver(),canDrop:t.canDrop(),dragged:t.getItem()}}))((0,C.I4)("sfMetadataHiddenColumns",{beginDrag:function(e){return{key:e.column.key,column:e.column}},endDrag:function(e,t){var n=t.getItem();if(!t.didDrop())return{source:n,target:{}}},isDragging:function(e){var t=e.columnIndex;return e.currentIndex>t}},(function(e,t){return{connectDragSource:e.dragSource(),connectDragPreview:e.dragPreview(),isDragging:t.isDragging()}}))((function(e){var t=e.isOver,n=e.isDragging,r=e.canDrop,a=e.connectDragSource,i=e.connectDragPreview,s=e.connectDropTarget,u=e.readOnly,c=e.column,d=e.columnIndex,f=e.isHidden,p=e.onChange,h=e.onMouseEnter,g=e.onMouseLeave,y=(0,o.useCallback)((function(){u||p(c.key)}),[u,c,p]);return(0,m.jsx)(m.Fragment,{children:s(i((0,m.jsxs)("div",{className:D()("hide-column-item",{disabled:u,"hide-column-can-drop-top":t&&r&&n,"hide-column-can-drop":t&&r&&!n}),onMouseEnter:function(){return h(d)},onMouseLeave:g,children:[!u&&(0,m.jsx)(m.Fragment,{children:a((0,m.jsx)("div",{className:"drag-hide-column-handle",children:(0,m.jsx)(l.In,{iconName:"drag"})}))}),(0,m.jsx)(l.dO,{disabled:u,checked:f,placeholder:(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(l.In,{iconName:v.ZPL[c.type]}),(0,m.jsx)("span",{className:"text-truncate",children:c.name})]}),onChange:y,switchClassName:"hide-column-item-switch"})]})))})}))),Fe=(0,C.Tl)("sfMetadataHiddenColumns",{},(function(e){return{connectDropTarget:e.dropTarget()}}))((function(e){var t=e.readOnly,n=e.columns,a=e.hiddenColumns,i=e.onChange,l=e.modifyColumnOrder,s=(0,o.useState)(-1),u=(0,r.A)(s,2),c=u[0],d=u[1],p=(0,o.useMemo)((function(){return!Array.isArray(n)||0===n.length}),[n]),h=(0,o.useCallback)((function(e){c!==e&&d(e)}),[c]),v=(0,o.useCallback)((function(){d(-1)}),[]);return(0,m.jsxs)("div",{className:D()("hide-columns-list",{"empty-hide-columns-container":p}),children:[p&&(0,m.jsx)("div",{className:"empty-hide-columns-list",children:(0,f.AP)("No properties available to be hidden")}),!p&&n.map((function(e,n){return(0,m.jsx)(Pe,{readOnly:t,columnIndex:n,currentIndex:c,isHidden:!a.includes(e.key),column:e,onChange:i,onMove:l,onMouseEnter:h,onMouseLeave:v},e.key)}))]})})),je=(0,E.A)(Fe),Ye=function(e){var t=e.hidePopover,n=e.onChange,a=e.readOnly,i=e.target,s=e.placement,u=e.columns,c=e.hiddenColumns,d=e.modifyColumnOrder,p=(0,o.useState)(""),h=(0,r.A)(p,2),g=h[0],y=h[1],C=(0,o.useState)(c),E=(0,r.A)(C,2),_=E[0],A=E[1],b=(0,o.useMemo)((function(){if(!g)return Array.isArray(u)?u:[];var e=g.trim().toLocaleLowerCase();return u.filter((function(t){return t.name.toLocaleLowerCase().indexOf(e)>-1}))}),[g,u]),S=(0,o.useRef)(null),w=(0,o.useCallback)((function(e){if(S.current&&!(0,f.wD)(e).includes("popover")&&!S.current.contains(e.target))return t(e),e.preventDefault(),e.stopPropagation(),!1}),[t]),O=(0,o.useCallback)((function(e){(0,F.default)("esc",e)&&(e.preventDefault(),t())}),[t]);(0,o.useEffect)((function(){return document.addEventListener("click",w,!0),document.addEventListener("keydown",O),function(){document.removeEventListener("click",w,!0),document.removeEventListener("keydown",O)}}),[]);var R=(0,o.useCallback)((function(e){e.stopPropagation()}),[]),T=(0,o.useCallback)((function(e){e.keyCode!==v.cKb.ChineseInputMethod&&e.keyCode!==v.cKb.Enter&&e.keyCode!==v.cKb.LeftArrow&&e.keyCode!==v.cKb.RightArrow||e.stopPropagation()}),[]),x=(0,o.useCallback)((function(e){g!==e&&y(e)}),[g]),M=(0,o.useCallback)((function(e){A(e),n(e)}),[n]),D=(0,o.useCallback)((function(e){var t=_.slice(0),n=t.indexOf(e);n>-1?t.splice(n,1):t.push(e),M(t)}),[_,M]),I=(0,o.useCallback)((function(){M(b.map((function(e){return e.key})))}),[b,M]),N=(0,o.useCallback)((function(){M([])}),[M]);return(0,m.jsx)(j.A,{placement:s,isOpen:!0,target:i,fade:!1,hideArrow:!0,className:"sf-metadata-hide-columns-popover",boundariesElement:document.body,children:(0,m.jsxs)("div",{ref:S,onClick:R,className:"sf-metadata-hide-columns-container",style:{maxHeight:window.innerHeight-100},children:[(0,m.jsx)("div",{className:"sf-metadata-hide-columns-search-container",children:(0,m.jsx)(l.DO,{placeholder:(0,f.AP)("Search property"),onKeyDown:T,onChange:x,autoFocus:!0})}),(0,m.jsx)(je,{readOnly:a,columns:b,hiddenColumns:_,onChange:D,modifyColumnOrder:d}),!a&&!g&&(0,m.jsxs)("div",{className:"sf-metadata-hide-columns-operations",children:[(0,m.jsx)("div",{className:"sf-metadata-hide-columns-operation px-2",onClick:I,"aria-label":(0,f.AP)("Hide all"),children:(0,f.AP)("Hide all")}),(0,m.jsx)("div",{className:"sf-metadata-hide-columns-operation px-2",onClick:N,"aria-label":(0,f.AP)("Show all"),children:(0,f.AP)("Show all")})]})]})})}},73575:function(e,t,n){"use strict";n.d(t,{AD:function(){return p},lX:function(){return C},fT:function(){return E},rr:function(){return b},Tw:function(){return a},jN:function(){return s},L9:function(){return u},q$:function(){return d},Gi:function(){return m},ax:function(){return c},J3:function(){return h},_z:function(){return A},__:function(){return v},hw:function(){return y},bK:function(){return _},sN:function(){return l},$p:function(){return g},W6:function(){return f},aG:function(){return i}});var r=n(64467),o=n(3563),a={QUERY_COLLABORATORS:"query-collaborators",QUERY_COLLABORATOR:"query-collaborator",UPDATE_TABLE_ROWS:"update-table-rows",LOCAL_TABLE_CHANGED:"local-table-changed",SERVER_TABLE_CHANGED:"server-table-changed",TABLE_ERROR:"table-error",OPEN_EDITOR:"open-editor",CLOSE_EDITOR:"close-editor",SELECT_CELL:"select_cell",SELECT_START:"select_start",SELECT_UPDATE:"select_update",SELECT_END:"select_end",SELECT_END_WITH_SHIFT:"select_end_with_shift",SELECT_NONE:"select_none",COPY_CELLS:"copy_cells",PASTE_CELLS:"paste_cells",SEARCH_CELLS:"search-cells",CLOSE_SEARCH_CELLS:"close-search-cells",OPEN_SELECT:"open-select",UPDATE_LINKED_RECORDS:"update_linked_records",SELECT_COLUMN:"select_column",DRAG_ENTER:"drag_enter",COLLAPSE_ALL_GROUPS:"collapse_all_groups",EXPAND_ALL_GROUPS:"expand_all_groups",RELOAD_DATA:"reload_data",MODIFY_FILTERS:"modify_filters",MODIFY_SORTS:"modify_sorts",MODIFY_GROUPBYS:"modify_groupbys",MODIFY_HIDDEN_COLUMNS:"modify_hidden_columns",DISPLAY_SORTS:"display_sorts",VIEW_CHANGED:"view_changed",MODIFY_COLUMN_ORDER:"modify_column_order",SAVING:"saving",SAVED:"saved",ERROR:"error",MODIFY_GALLERY_ZOOM_GEAR:"modify_gallery_zoom_gear"},i={FRAGMENT:"application/x-sf-metadata-fragment",HTML:"text/html",TEXT:"text/plain",FILES:"files",DTABLE_FRAGMENT:"sf-metadata-fragment"},l=80,s=32,u=56,c=16,d=48,f=((0,r.default)((0,r.default)((0,r.default)((0,r.default)((0,r.default)({},o.vZe.CREATOR,!0),o.vZe.LAST_MODIFIER,!0),o.vZe.CTIME,!0),o.vZe.MTIME,!0),o.vZe.FILE_NAME,!0),(0,r.default)((0,r.default)((0,r.default)((0,r.default)((0,r.default)((0,r.default)({},o.vZe.TEXT,!0),o.vZe.DATE,!0),o.vZe.NUMBER,!0),o.vZe.SINGLE_SELECT,!0),o.vZe.COLLABORATOR,!0),o.vZe.CHECKBOX,!0)),p=((0,r.default)({},o.vZe.TEXT,!0),44),m={GROUP_CONTAINER:"group_container",ROW:"row",BTN_INSERT_ROW:"btn_insert_row"},h=32,v=[],g=[],y=10,C="#eaeaea",E="deleted_option",_=1e3,A=1e4,b={PREVIEWER:"previewer",ADDITION:"addition"}},88238:function(e,t,n){"use strict";var r=n(90675),o=n(89379),a=n(10467),i=n(23029),l=n(92901),s=n(19175),u=n(3563),c=n(72249),d=n(40326),f=function(){return(0,l.A)((function e(){var t=this;(0,i.A)(this,e),this.destroy=function(){t.settings={},t.metadataAPI=null,t.localStorage=null,t.eventBus=null,t.hasInit=!1,t.permission="r"},this.getSetting=function(e){return!1===t.settings[e]?t.settings[e]:t.settings[e]||""},this.setSetting=function(e,n){t.settings[e]=n},this.getUsername=function(){return d.Xh},this.getCollaborators=function(){var e=t.settings.repoID;return t.metadataAPI.getCollaborators(e)},this.getMetadata=function(e){var n=t.settings.repoID;return t.metadataAPI?t.metadataAPI.getMetadata(n,e):null},this.getRecord=function(e,n){var r=t.settings.repoID;return t.metadataAPI.getMetadataRecordInfo(r,e,n)},this.getViews=function(){var e=t.settings.repoID;return t.metadataAPI.listViews(e)},this.getView=function(e){var n=t.settings.repoID;return t.metadataAPI.getView(n,e)},this.getPermission=function(){return t.permission},this.canModify=function(){return"r"!==t.permission},this.canModifyRow=function(e){return"r"!==t.permission},this.canModifyRows=function(){return"r"!==t.permission},this.canModifyColumn=function(e){return"r"!==t.permission&&(!!e.editable&&!(u.Ajs.includes(e.key)&&!u.JIQ.includes(e.key)))},this.canRenameColumn=function(e){return"r"!==t.permission&&!u.Ajs.includes(e.key)},this.canModifyColumnData=function(e){if("r"===t.permission)return!1;var n=e.key;return!u.Ajs.includes(n)||u.SRQ.includes(n)},this.canDeleteColumn=function(e){if("r"===t.permission)return!1;var n=e.key;return!u.Ajs.includes(n)||u.LOw.includes(n)},this.canModifyColumnOrder=function(){return"r"!==t.permission},this.canModifyView=function(e){return"r"!==t.permission},this.restoreRows=function(){},this.updateRows=function(){},this.lockRowViaButton=function(){},this.updateRowViaButton=function(){},this.insertColumn=function(e,n,r,o){var a=o.key,i=o.data;return t.metadataAPI.insertColumn(e,n,r,{key:a,data:i})},this.deleteColumn=function(e,n){return t.metadataAPI.deleteColumn(e,n)},this.renameColumn=function(e,n,r){return t.metadataAPI.renameColumn(e,n,r)},this.modifyColumnData=function(e,n,r){return t.metadataAPI.modifyColumnData(e,n,r)},this.modifyRecord=function(e,n,r,o){return t.metadataAPI.modifyRecord(e,n,r,o)},this.modifyRecords=function(e,n,r){return t.metadataAPI.modifyRecords(e,n,r)},this.modifyView=function(e,n,r){return t.metadataAPI.modifyView(e,n,r)},this.getRowsByIds=function(){},this.generateDescription=function(e){var n=t.settings.repoID;return t.metadataAPI.generateDescription(n,e)},this.imageCaption=function(e){var n=t.settings.repoID,r=t.settings.lang;return t.metadataAPI.imageCaption(n,e,r)},this.settings={lang:d.vV},this.metadataAPI=null,this.localStorage=null,this.eventBus=null,this.hasInit=!1,this.permission="r",this.collaboratorsCache={}}),[{key:"init",value:function(){var e=(0,a.A)((0,r.A)().mark((function e(t){var n,a,i,l,d,f;return(0,r.A)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.hasInit){e.next=2;break}return e.abrupt("return");case 2:this.settings=(0,o.A)((0,o.A)({},this.settings),t),n=this.settings.repoInfo,this.metadataAPI=s.A,a=this.settings,i=a.repoID,l=a.viewID,d=l?"sf-metadata-".concat(i,"-").concat(l):"sf-metadata-".concat(i),this.localStorage=new u.DTU(d),f=new c.A,this.eventBus=f,this.permission="admin"!==n.permission&&"rw"!==n.permission?"r":"rw",this.hasInit=!0;case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}])}();t.A=f},47127:function(e,t,n){"use strict";n.d(t,{X:function(){return $},p:function(){return q}});var r,o=n(89379),a=n(5544),i=n(80045),l=n(9950),s=n(4086),u=n(88238),c=n(60436),d=n(90675),f=n(10467),p=n(23029),m=n(92901),h=n(55097),v=n.n(h),g=n(3563),y=n(4159),C=n.n(y),E=n(36220),_=n.n(E),A=n(64467),b={MODIFY_RECORD:"modify_record",MODIFY_RECORDS:"modify_records",RESTORE_RECORDS:"restore_records",RELOAD_RECORDS:"reload_records",MODIFY_FILTERS:"modify_filters",MODIFY_SORTS:"modify_sorts",MODIFY_GROUPBYS:"modify_groupbys",MODIFY_HIDDEN_COLUMNS:"modify_hidden_columns",LOCK_RECORD_VIA_BUTTON:"lock_record_via_button",MODIFY_RECORD_VIA_BUTTON:"modify_record_via_button",INSERT_COLUMN:"insert_column",DELETE_COLUMN:"delete_column",RENAME_COLUMN:"rename_column",MODIFY_COLUMN_DATA:"modify_column_data",MODIFY_COLUMN_WIDTH:"modify_column_width",MODIFY_COLUMN_ORDER:"modify_column_order"},S=(r={},(0,A.default)((0,A.default)((0,A.default)((0,A.default)((0,A.default)((0,A.default)((0,A.default)((0,A.default)((0,A.default)((0,A.default)(r,b.MODIFY_RECORD,["repo_id","row_id","updates","old_row_data","original_updates","original_old_row_data"]),b.MODIFY_RECORDS,["repo_id","row_ids","id_row_updates","id_original_row_updates","id_old_row_data","id_original_old_row_data","is_copy_paste","id_obj_id"]),b.RESTORE_RECORDS,["repo_id","rows_data","original_rows","link_infos","upper_row_ids"]),b.RELOAD_RECORDS,["repo_id","row_ids"]),b.MODIFY_FILTERS,["repo_id","view_id","filter_conjunction","filters","basic_filters"]),b.MODIFY_SORTS,["repo_id","view_id","sorts"]),b.MODIFY_GROUPBYS,["repo_id","view_id","groupbys"]),b.MODIFY_HIDDEN_COLUMNS,["repo_id","view_id","hidden_columns"]),b.LOCK_RECORD_VIA_BUTTON,["repo_id","row_id","button_column_key"]),b.MODIFY_RECORD_VIA_BUTTON,["repo_id","row_id","updates","old_row_data","original_updates","original_old_row_data","button_column_key"]),(0,A.default)((0,A.default)((0,A.default)((0,A.default)((0,A.default)((0,A.default)(r,b.INSERT_COLUMN,["repo_id","name","column_type","key","data"]),b.RENAME_COLUMN,["repo_id","column_key","new_name","old_name"]),b.MODIFY_COLUMN_DATA,["repo_id","column_key","new_data","old_data"]),b.DELETE_COLUMN,["repo_id","column_key","column"]),b.MODIFY_COLUMN_WIDTH,["column_key","new_width","old_width"]),b.MODIFY_COLUMN_ORDER,["repo_id","view_id","new_columns_keys","old_columns_keys"])),w=[],O=[],R=[b.MODIFY_RECORD,b.MODIFY_RECORDS,b.MODIFY_FILTERS,b.MODIFY_SORTS,b.MODIFY_GROUPBYS,b.MODIFY_HIDDEN_COLUMNS,b.INSERT_COLUMN,b.DELETE_COLUMN,b.RENAME_COLUMN,b.MODIFY_COLUMN_DATA,b.MODIFY_COLUMN_WIDTH,b.MODIFY_COLUMN_ORDER],T=[b.MODIFY_FILTERS,b.MODIFY_SORTS,b.MODIFY_GROUPBYS,b.MODIFY_HIDDEN_COLUMNS],x=[b.INSERT_COLUMN,b.DELETE_COLUMN,b.RENAME_COLUMN,b.MODIFY_COLUMN_DATA,b.MODIFY_COLUMN_WIDTH,b.MODIFY_COLUMN_ORDER],M=n(31195),D=(0,m.A)((function e(t,n){var r=this;(0,p.A)(this,e),this._id=t._id||"",this.type=t.type||"table","image"===this.type&&(this.type=g.rX9.GALLERY),this.filters=t.filters||[],this.filter_conjunction=t.filter_conjunction||"Or",this.basic_filters=t.basic_filters&&t.basic_filters.length>0?t.basic_filters:g.pkt[this.type],this.sorts=t.sorts&&t.sorts.length>0?t.sorts:g.hcH[this.type],this.groupbys=t.groupbys||[],this.groups=t.groups,this.hidden_columns=t.hidden_columns||[],this.rows=t.rows||[],this.available_columns=n||[],this.display_available_columns=this.available_columns.filter((function(e){return!g.hTT.includes(e.key)})),this.columns=this.display_available_columns;var o=t.columns_keys||[];if(0===o.length)this.columns_keys=this.display_available_columns.map((function(e){return e.key}));else{var a=o.map((function(e){return(0,g.rm3)(r.display_available_columns,e)})).filter((function(e){return e}));this.display_available_columns.forEach((function(e){(0,g.rm3)(a,e.key)||a.push(e)})),this.columns_keys=a.map((function(e){return e.key})),this.columns=a}}));C().extend(_());var I=function(){function e(t){var n=this;(0,p.A)(this,e);var r=v()(t),o=r.type||r.op_type,a=S[o];this.op_type=o,a.forEach((function(e){n[e]=r[e]})),this.success_callback=r.success_callback,this.fail_callback=r.fail_callback}return(0,m.A)(e,[{key:"clone",value:function(){return new e(this)}},{key:"apply",value:function(e){return function(e,t){switch(t.op_type){case b.MODIFY_RECORD:var n=t.row_id,r=t.original_updates,a=e.rows,i=a.findIndex((function(e){return n===e._id}));if(i<0)return e;var l=C()().utc().format(g.T6Y),s=window.sfMetadataContext.getUsername(),u=Object.assign({},a[i],r,{_mtime:l,_last_modifier:s});return e.rows[i]=u,e.id_row_map[n]=u,e;case b.MODIFY_RECORDS:var d=t.id_original_row_updates,f=t.id_row_updates,p=e.rows,m=C()().utc().format(g.T6Y),h=window.sfMetadataContext.getUsername(),v=(0,c.A)(p);return p.forEach((function(t,n){var r=t._id,o=d[r],a=f[r];if(a||o){var i=Object.assign({},t,a,o,{_mtime:m,_last_modifier:h});v[n]=i,e.id_row_map[r]=i}})),e.rows=v,e;case b.RESTORE_RECORDS:var y=t.original_rows,E=C()().utc().format(g.T6Y),_=window.sfMetadataContext.getUsername(),A=[];return y.forEach((function(t){var n=(0,o.A)((0,o.A)({},t),{},{_ctime:E,_mtime:E,_creator:_,_last_modifier:_});A.push(n),e.id_row_map[t._id]=n})),e.rows.push(A),e;case b.LOCK_RECORD_VIA_BUTTON:var S=t.row_id,w=e.rows,O=w.findIndex((function(e){return S===e._id}));if(O<0)return e;var R=(0,o.A)((0,o.A)({},w[O]),{},{_locked:!0});return e.rows[O]=R,e.id_row_map[S]=R,e;case b.MODIFY_RECORD_VIA_BUTTON:var T=t.row_id,x=t.original_updates,I=e.rows,N=I.findIndex((function(e){return T===e._id}));if(N<0)return e;var L=C()().utc().format(g.T6Y),k=window.sfMetadataContext.getUsername(),P=Object.assign({},I[N],x,{_mtime:L,_last_modifier:k});return e.rows[N]=P,e.id_row_map[T]=P,e;case b.MODIFY_FILTERS:var F=t.filter_conjunction,j=t.filters,Y=t.basic_filters;return e.view.filter_conjunction=F,e.view.filters=j,e.view.basic_filters=Y,e;case b.MODIFY_SORTS:var U=t.sorts;return e.view.sorts=U,e;case b.MODIFY_GROUPBYS:var B=t.groupbys;return e.view.groupbys=B,e;case b.MODIFY_HIDDEN_COLUMNS:var H=t.hidden_columns;return e.view.hidden_columns=H,e;case b.INSERT_COLUMN:var G=t.column,V=new M.A(G);return e.columns.push(V),e.view=new D(e.view,e.columns),e;case b.DELETE_COLUMN:var Z=t.column_key,z=e.columns.slice(0),X=z.findIndex((function(e){return e.key===Z}));return-1!==X&&(z.splice(X,1),e.columns=z,e.view=new D(e.view,e.columns)),e;case b.RENAME_COLUMN:var W=t.column_key,K=t.new_name,$=e.columns.findIndex((function(e){return e.key===W}));if(-1!==$){var q=new M.A((0,o.A)((0,o.A)({},e.columns[$]),{},{name:K}));e.columns[$]=q}return e.view=new D(e.view,e.columns),e;case b.MODIFY_COLUMN_DATA:var Q=t.column_key,J=t.new_data,ee=e.columns.findIndex((function(e){return e.key===Q}));if(-1!==ee){var te=e.columns[ee],ne=new M.A((0,o.A)((0,o.A)({},te),{},{data:(0,o.A)((0,o.A)({},te.data),J)}));e.columns[ee]=ne}return e.view=new D(e.view,e.columns),e;case b.MODIFY_COLUMN_WIDTH:var re=t.column_key,oe=t.new_width,ae=e.columns.findIndex((function(e){return e.key===re}));if(-1!==ae){var ie=e.columns[ae],le=new M.A((0,o.A)((0,o.A)({},ie),{},{width:oe}));e.columns[ae]=le}return e.view=new D(e.view,e.columns),e;case b.MODIFY_COLUMN_ORDER:var se=t.new_columns_keys;return e.view=new D((0,o.A)((0,o.A)({},e.view),{},{columns_keys:se}),e.columns),e;default:return e}}(e,this)}},{key:"invert",value:function(){return function(e){switch(e.clone().op_type){case b.MODIFY_RECORD:var t=e.page_id,n=e.row_id,r=e.updates,o=e.old_row_data,a=e.original_updates,i=e.original_old_row_data;return N({type:b.MODIFY_RECORD,page_id:t,row_id:n,updates:v()(o),old_row_data:v()(r),original_updates:v()(i),original_old_row_data:v()(a)});case b.MODIFY_RECORDS:var l=e.page_id,s=e.is_copy_paste,u=e.row_ids,c=e.id_row_updates,d=e.id_original_row_updates,f=e.id_old_row_data,p=e.id_original_old_row_data;return N({type:b.MODIFY_RECORDS,page_id:l,is_copy_paste:s,row_ids:v()(u),id_row_updates:v()(f),id_original_row_updates:v()(p),id_old_row_data:v()(c),id_original_old_row_data:v()(d)});case b.RESTORE_RECORDS:var m=e.page_id,h=e.rows_data,g=e.original_rows,y=e.link_infos,C=e.upper_row_ids,E=h.map((function(e){return e._id}));return N({type:b.DELETE_RECORDS,page_id:m,row_ids:E,deleted_rows:v()(h),original_deleted_rows:v()(g),deleted_link_infos:v()(y),upper_row_ids:v()(C)})}}(this)}},{key:"set",value:function(e,t){this[e]=t}}])}();function N(e){return new I(e)}var L,k=n(73575),P=n(40326),F=function(){return(0,m.A)((function e(){(0,p.A)(this,e)}),null,[{key:"getFilteredRows",value:function(e,t,n,r){var o=(0,g.EOE)(t)?t:(0,g.VLM)(e,t);return(0,g.bj$)(e,o,n,r,{username:P.Xh}).row_ids}},{key:"getSortedRows",value:function(e,t,n,r){var o=r.collaborators,a=(0,g.EOE)(t)?t:(0,g.VLM)(e,t);return(0,g.eD3)(e,a,n,{collaborators:o})}},{key:"getGroupedRows",value:function(e,t,n,r){var o=r.collaborators,a=(0,g.EOE)(t)?t:(0,g.VLM)(e,t);return(0,g.N71)(e,a,n,{collaborators:o})}},{key:"updateSummaries",value:function(e,t){}},{key:"hasRelatedGroupby",value:function(e,t){return e.some((function(e){return t[e.column_key]}))}},{key:"deleteGroupRows",value:function(e,t){var n=this;e.forEach((function(e){var r=e.subgroups,o=e.row_ids;Array.isArray(r)&&r.length>0?n.deleteGroupRows(r,t):o&&(e.row_ids=o.filter((function(e){return!t[e]})))}))}},{key:"run",value:function(e,t){var n=t.collaborators,r=e.rows,o=e.view.groupbys,a=e.view.available_columns||e.columns,i=(0,g.rnW)({groupbys:o},a);if(i){var l=r,s=i?this.getGroupedRows(e,l,o,{collaborators:n}):[],u=(0,g.EOE)(l)?l.map((function(e){return e._id})):l;e.view.rows=u,e.view.groups=s}else e.view.rows=e.rows.map((function(e){return e._id}))}},{key:"updateDataWithModifyRecords",value:function(e,t,n,r){var o=r.collaborators,a=e.view,i=a.available_columns,l=a.groupbys,s=a.rows;(0,g.rnW)({groupbys:l},i)&&this.hasRelatedGroupby(l,t)&&(e.view.groups=this.getGroupedRows(e,s,l,{collaborators:o}))}},{key:"handleReloadedRecords",value:function(e,t,n){var r=t.reduce((function(e,t){return e[t._id]=t,e}),{});e.rows.forEach((function(t,n){var o=t._id,a=r[o],i=Object.assign({},e.rows[n],a);a&&(e.rows[n]=i,e.id_row_map[o]=i)})),this.updateDataWithModifyRecords(),this.updateSummaries()}},{key:"handleNotExistRecords",value:function(e,t){var n=[],r=[];e.rows.forEach((function(o){var a=o._id;t[a]?(n.push(o),delete e.id_row_map[a]):r.push(o)})),e.rows=e.rows.filter((function(e){return!t[e._id]})),e.view.rows=e.rows.filter((function(e){return!t[e]})),this.updateSummaries()}},{key:"syncOperationOnData",value:function(e,t,n){var r=n.collaborators;switch(t.op_type){case b.MODIFY_RECORD:case b.MODIFY_RECORDS:var o=e.view.available_columns,a=t.id_original_row_updates,i=t.row_ids,l={},s=[];i.forEach((function(e){var t=a[e];t&&s.push.apply(s,(0,c.A)(Object.keys(t)))})),s.forEach((function(e){l[e]||(0,g.rm3)(o,e)&&(l[e]=!0)})),this.updateDataWithModifyRecords(e,l,i,{collaborators:r}),this.updateSummaries();break;case b.MODIFY_RECORD_VIA_BUTTON:var u=e.view.available_columns,d=t.original_updates,f={};for(var p in d){(0,g.rm3)(u,p)&&(f[p]=!0)}this.updateDataWithModifyRecords(),this.updateSummaries();break;case b.RESTORE_RECORDS:var m=t.rows_data,h=t.upper_row_ids,v=e.view.rows,y=m.map((function(e){return e._id})),C=(0,c.A)(v);Array.isArray(h)&&0!==h.length?h.forEach((function(e,t){var n=y[t],r=C.indexOf(e);r<0?C.push(n):C.splice(r+1,0,n)})):C.push.apply(C,(0,c.A)(y)),e.view.rows=C,this.updateDataWithModifyRecords(e,{collaborators:r}),this.updateSummaries();break;case b.MODIFY_GROUPBYS:var E=e.view,_=E.available_columns,A=E.groupbys,S=E.rows;if(!(0,g.rnW)({groupbys:A},_)){e.view.groups=[];break}e.view.groups=this.getGroupedRows(e,S,A,{collaborators:r})}}}])}();L=F,F.hasRelatedFilters=function(e,t){return e.some((function(e){return t[e.column_key]}))},F.hasRelatedSort=function(e,t){return e.some((function(e){return t[e.column_key]}))},F.deleteEmptyGroups=function(e){return e.filter((function(e){var t=e.subgroups,n=e.row_ids;return t&&t.length>0?0!==L.deleteEmptyGroups(t).length:!(!n||0===n.length)}))};var j=F,Y=n(58419),U=function(){return(0,m.A)((function e(){(0,p.A)(this,e),this.checkReloadRecordsOperation=function(e){return e.op_type===b.RELOAD_RECORDS}}),[{key:"applyOperation",value:function(e,t){switch(e.op_type){case b.MODIFY_RECORD:var n=e.repo_id,r=[{record_id:e.row_id,record:e.updates}];window.sfMetadataContext.modifyRecords(n,r).then((function(n){t({operation:e})})).catch((function(e){t({error:(0,Y.AP)("Failed to modify record")})}));break;case b.MODIFY_RECORDS:var a=e.repo_id,i=e.row_ids,l=e.id_row_updates,s=e.is_copy_paste,u=e.id_obj_id,c=i.map((function(e){return{record_id:e,record:l[e],obj_id:u[e]}}));window.sfMetadataContext.modifyRecords(a,c,s).then((function(n){t({operation:e})})).catch((function(e){t({error:(0,Y.AP)("Failed to modify records")})}));break;case b.RESTORE_RECORDS:var d=e.repo_id,f=e.rows_data;if(!Array.isArray(f)||0===f.length){t({error:(0,Y.AP)("Failed to restore records")});break}window.sfMetadataContext.restoreRows(d,f).then((function(n){t({operation:e})})).catch((function(e){t({error:(0,Y.AP)("Failed to restore records")})}));break;case b.RELOAD_RECORDS:t({operation:e});break;case b.INSERT_COLUMN:var p=e.repo_id,m=e.name,h=e.column_type,v=e.key,g=e.data;window.sfMetadataContext.insertColumn(p,m,h,{key:v,data:g}).then((function(n){e.column=n.data.column,t({operation:e})})).catch((function(e){t({error:(0,Y.AP)("Failed to insert property")})}));break;case b.DELETE_COLUMN:var y=e.repo_id,C=e.column_key;window.sfMetadataContext.deleteColumn(y,C).then((function(n){t({operation:e})})).catch((function(e){t({error:(0,Y.AP)("Failed to delete property")})}));break;case b.RENAME_COLUMN:var E=e.repo_id,_=e.column_key,S=e.new_name;window.sfMetadataContext.renameColumn(E,_,S).then((function(n){t({operation:e})})).catch((function(e){t({error:(0,Y.AP)("Failed to rename property")})}));break;case b.MODIFY_COLUMN_DATA:var w=e.repo_id,O=e.column_key,R=e.new_data;window.sfMetadataContext.modifyColumnData(w,O,R).then((function(n){t({operation:e})})).catch((function(e){t({error:(0,Y.AP)("Failed to modify property data")})}));break;case b.MODIFY_COLUMN_WIDTH:var T=e.column_key,x=e.new_width;try{var M=window.sfMetadataContext.localStorage.getItem("columns_width")||{};window.sfMetadataContext.localStorage.setItem("columns_width",(0,o.A)((0,o.A)({},M),{},(0,A.default)({},T,x))),t({operation:e})}catch(K){t({error:(0,Y.AP)("Failed to modify property width")})}break;case b.MODIFY_COLUMN_ORDER:var D=e.repo_id,I=e.view_id,N=e.new_columns_keys;window.sfMetadataContext.modifyView(D,I,{columns_keys:N}).then((function(n){t({operation:e})})).catch((function(e){t({error:(0,Y.AP)("Failed to modify property order")})}));break;case b.MODIFY_FILTERS:var L=e.repo_id,k=e.view_id,P=e.filter_conjunction,F=e.filters,j=e.basic_filters;window.sfMetadataContext.modifyView(L,k,{filters:F,filter_conjunction:P,basic_filters:j}).then((function(n){t({operation:e})})).catch((function(e){t({error:(0,Y.AP)("Failed to modify filter")})}));break;case b.MODIFY_SORTS:var U=e.repo_id,B=e.view_id,H=e.sorts;window.sfMetadataContext.modifyView(U,B,{sorts:H}).then((function(n){t({operation:e})})).catch((function(e){t({error:(0,Y.AP)("Failed to modify sort")})}));break;case b.MODIFY_GROUPBYS:var G=e.repo_id,V=e.view_id,Z=e.groupbys;window.sfMetadataContext.modifyView(G,V,{groupbys:Z}).then((function(n){t({operation:e})})).catch((function(e){t({error:(0,Y.AP)("Failed to modify group")})}));break;case b.MODIFY_HIDDEN_COLUMNS:var z=e.repo_id,X=e.view_id,W=e.hidden_columns;window.sfMetadataContext.modifyView(z,X,{hidden_columns:W}).then((function(n){t({operation:e})})).catch((function(e){t({error:(0,Y.AP)("Failed to modify hidden properties")})}))}}},{key:"handleReloadRecords",value:function(e,t,n){var r=t.repo_id,o=this.getOperationRelatedColumns(e,t).relatedColumnKeyMap;if(this.checkReloadRecordsOperation(t)){var a=this.getOperatedRowsIds(t);this.asyncReloadRecords(a,r,o,n)}}},{key:"asyncReloadRecords",value:function(e,t,n,r){var o=this;if(Array.isArray(e)&&0!==e.length){var a=(0,c.A)(e),i=a.splice(0,100);window.sfMetadataContext.getRowsByIds(t,i).then((function(e){if(e&&e.data&&e.data.results){var l=e.data.results,s=[],u={},c={};l.length>0&&l.forEach((function(e){s.push(e),u[e._id]=!0})),i.forEach((function(e){u[e]||(c[e]=!0)})),r({reloadedRecords:s,idRecordNotExistMap:c,relatedColumnKeyMap:n}),o.asyncReloadRecords(a,t,n,r)}else o.asyncReloadRecords(a,t,n,r)})).catch((function(e){console.log(e),o.asyncReloadRecords(a,t,n,r)}))}}},{key:"getOperationRelatedColumns",value:function(e,t){var n;switch(t.op_type){case b.MODIFY_RECORDS:var r=t.id_original_row_updates;n=this.getRelatedColumnKeysFromRecordUpdates(r);break;case b.RELOAD_RECORDS:var o=e.view.available_columns,a={};return o.forEach((function(e){var t=e.key;a[t]=!0})),{relatedColumnKeyMap:a,relatedColumns:o};case b.MODIFY_RECORD_VIA_BUTTON:var i=t.row_id,l=t.original_updates;n=this.getRelatedColumnKeysFromRecordUpdates((0,A.default)({},i,l));break;default:n=[]}return this.getRelatedColumns(n,e)}},{key:"getOperatedRowsIds",value:function(e){switch(e.op_type){case b.MODIFY_RECORDS:case b.RELOAD_RECORDS:var t=e.row_ids;return Array.isArray(t)?(0,c.A)(t):[];case b.MODIFY_RECORD_VIA_BUTTON:var n=e.row_id;return n?[n]:[];default:return[]}}},{key:"getRelatedColumns",value:function(e,t){if(!e||0===e.length)return{relatedColumnKeyMap:{},relatedColumns:[]};var n={},r=[],o=t.view.available_columns;return e.forEach((function(e){if(!n[e]){var t=(0,g.rm3)(o,e);t&&(n[e]=!0,r.push(t))}})),{relatedColumnKeyMap:n,relatedColumns:r}}},{key:"getRelatedColumnKeysFromRecordUpdates",value:function(e){return e?Object.keys(e).reduce((function(t,n){var r=e[n];return r&&t.push.apply(t,(0,c.A)(Object.keys(r))),t}),[]):[]}}])}(),B=n(31425),H=(0,m.A)((function e(t){var n=this;(0,p.A)(this,e);var r=t.columns||[];this.columns=r.map((function(e){return new M.A(e)})),this.rows=t.rows||[],this.id_row_map={},this.row_ids=[],this.rows.forEach((function(e){n.row_ids.push(e._id),n.id_row_map[e._id]=e})),this.hasMore=!0,this.recordsCount=this.row_ids.length,this.view=new D(t.view||{},this.columns)})),G=function(){return(0,m.A)((function e(t){var n=this;(0,p.A)(this,e),this.destroy=function(){n.viewId="",n.data=null,n.startIndex=0,n.redos=[],n.undos=[],n.pendingOperations=[],n.isSendingOperation=!1},this.initStartIndex=function(){n.startIndex=0},this.sendOperationCallback=function(e,t){var r=t.operation,o=t.error;if(o)return r&&r.fail_callback&&r.fail_callback(),n.context.eventBus.dispatch(k.Tw.TABLE_ERROR,{error:o}),void n.sendNextOperation(e);R.includes(r.op_type)&&(n.handleUndoRedos(e,r),n.data=v()(r.apply(n.data)),n.syncOperationOnData(r)),(T.includes(r.op_type)||x.includes(r.op_type))&&window.sfMetadataContext.eventBus.dispatch(k.Tw.VIEW_CHANGED,n.data.view),r.success_callback&&r.success_callback(),n.context.eventBus.dispatch(k.Tw.SERVER_TABLE_CHANGED),n.serverOperator.handleReloadRecords(n.data,r,(function(e){var t=e.reloadedRecords,r=e.idRecordNotExistMap,o=e.relatedColumnKeyMap;t.length>0&&j.handleReloadedRecords(n.data,t,o),Object.keys(r).length>0&&j.handleNotExistRecords(n.data,r),n.context.eventBus.dispatch(k.Tw.SERVER_TABLE_CHANGED)})),n.sendNextOperation(e)},this.insertColumn=function(e,t,r){var o=r.key,a=r.data,i=b.INSERT_COLUMN,l=n.createOperation({type:i,repo_id:n.repoId,name:e,column_type:t,key:o,data:a});n.applyOperation(l)},this.deleteColumn=function(e,t){var r=b.DELETE_COLUMN,o=n.createOperation({type:r,repo_id:n.repoId,column_key:e});n.applyOperation(o)},this.renameColumn=function(e,t,r){var o=b.RENAME_COLUMN,a=n.createOperation({type:o,repo_id:n.repoId,column_key:e,new_name:t,old_name:r});n.applyOperation(a)},this.modifyColumnData=function(e,t,r){var o=b.MODIFY_COLUMN_DATA,a=n.createOperation({type:o,repo_id:n.repoId,column_key:e,new_data:t,old_data:r});n.applyOperation(a)},this.modifyColumnWidth=function(e,t){var r=b.MODIFY_COLUMN_WIDTH,o=(0,g.rm3)(n.data.columns,e),a=n.createOperation({type:r,repo_id:n.repoId,column_key:e,new_width:t,old_width:o.width});n.applyOperation(a)},this.modifyColumnOrder=function(e,t){var r=b.MODIFY_COLUMN_ORDER,o=n.data.view.columns_keys,a=o.indexOf(t),i=o.slice(0);(i=i.filter((function(t){return t!==e}))).splice(a,0,e);var l=n.createOperation({type:r,repo_id:n.repoId,view_id:n.viewId,new_columns_keys:i,old_columns_keys:o});n.applyOperation(l)},this.repoId=t.repoId,this.viewId=t.viewId,this.data=null,this.context=t.context,this.startIndex=0,this.redos=[],this.undos=[],this.pendingOperations=[],this.isSendingOperation=!1,this.isReadonly=!1,this.serverOperator=new U,this.collaborators=t.collaborators||[]}),[{key:"loadMetadata",value:function(){var e=(0,f.A)((0,d.A)().mark((function e(t,n){var r,o,a,i,l,s,u;return(0,d.A)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.context.getMetadata({view_id:this.viewId,start:this.startIndex,limit:n});case 2:a=e.sent,i=(null===a||void 0===a||null===(r=a.data)||void 0===r?void 0:r.results)||[],l=(0,B.H2)(null===a||void 0===a||null===(o=a.data)||void 0===o?void 0:o.metadata),(s=new H({rows:i,columns:l,view:t})).view.rows=s.row_ids,u=i.length,s.hasMore=u===n,this.data=s,this.startIndex+=u,j.run(this.data,{collaborators:this.collaborators});case 12:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"load",value:function(){var e=(0,f.A)((0,d.A)().mark((function e(){var t,n,r,o,a=arguments;return(0,d.A)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.length>0&&void 0!==a[0]?a[0]:k.bK,e.next=3,this.context.getView(this.viewId);case 3:return r=e.sent,o=(null===r||void 0===r||null===(t=r.data)||void 0===t?void 0:t.view)||{},e.next=7,this.loadMetadata(o,n);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"reload",value:function(){var e=(0,f.A)((0,d.A)().mark((function e(){var t,n=arguments;return(0,d.A)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:k.bK,this.startIndex=0,e.next=4,this.loadMetadata(this.data.view,t);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"loadMore",value:function(){var e=(0,f.A)((0,d.A)().mark((function e(t){var n,r,o,a,i,l=this;return(0,d.A)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.data){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.context.getMetadata({view_id:this.viewId,start:this.startIndex,limit:t});case 4:if(o=e.sent,a=(null===o||void 0===o||null===(n=o.data)||void 0===n?void 0:n.results)||[],Array.isArray(a)&&0!==a.length){e.next=9;break}return this.hasMore=!1,e.abrupt("return");case 9:(r=this.data.rows).push.apply(r,(0,c.A)(a)),a.forEach((function(e){l.data.row_ids.push(e._id),l.data.id_row_map[e._id]=e})),i=a.length,this.data.hasMore=i===t,this.data.recordsCount=this.data.row_ids.length,this.startIndex=this.startIndex+i,j.run(this.data,{collaborators:this.collaborators}),this.context.eventBus.dispatch(k.Tw.LOCAL_TABLE_CHANGED);case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateRowData",value:function(){var e=(0,f.A)((0,d.A)().mark((function e(t){var n,r,o;return(0,d.A)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.context.getRowsByIds(this.repoId,[t]);case 2:if((n=e.sent)&&n.data){e.next=5;break}return e.abrupt("return");case 5:r=n.data.results[0],o=this.data.rows.findIndex((function(e){return e._id===t})),this.data.id_row_map[t]=r,this.data.rows[o]=r,j.run(this.data,{collaborators:this.collaborators});case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createOperation",value:function(e){return new I(e)}},{key:"applyOperation",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{handleUndo:!0},n=e.op_type;R.includes(n)||(this.handleUndoRedos(t,e),this.data=v()(e.apply(this.data)),this.syncOperationOnData(e),this.context.eventBus.dispatch(k.Tw.LOCAL_TABLE_CHANGED)),O.includes(n)||this.addPendingOperations(e,t)}},{key:"addPendingOperations",value:function(e,t){this.pendingOperations.push(e),this.startSendOperation(t)}},{key:"startSendOperation",value:function(e){this.isSendingOperation||0===this.pendingOperations.length||(this.isSendingOperation=!0,this.context.eventBus.dispatch(k.Tw.SAVING),this.sendNextOperation(e))}},{key:"sendNextOperation",value:function(e){if(0===this.pendingOperations.length)return this.isSendingOperation=!1,void this.context.eventBus.dispatch(k.Tw.SAVED);var t=this.pendingOperations.shift();this.serverOperator.applyOperation(t,this.sendOperationCallback.bind(this,e))}},{key:"handleUndoRedos",value:function(e,t){var n=e.handleUndo,r=e.asyncUndoRedo;n&&(this.redos.length>0&&(this.redos=[]),this.undos.length>10&&(this.undos=this.undos.slice(-10)),w.includes(t.op_type)&&this.undos.push(t)),r&&r(t)}},{key:"undoOperation",value:function(){var e=this;if(!this.isReadonly&&0!==this.undos.length){var t=this.undos.pop(),n=t.invert();R.includes(n.op_type)?this.applyOperation(n,{handleUndo:!1,asyncUndoRedo:function(n){n.op_type===b.INSERT_RECORD&&(t.row_id=n.row_data._id),e.redos.push(t)}}):(this.redos.push(t),this.applyOperation(n,{handleUndo:!1}))}}},{key:"redoOperation",value:function(){var e=this;if(!this.isReadonly&&0!==this.redos.length){var t=this.redos.pop();R.includes(t.op_type)?this.applyOperation(t,{handleUndo:!1,asyncUndoRedo:function(n){n.op_type===b.INSERT_RECORD&&(t=n),e.undos.push(t)}}):(this.undos.push(t),this.applyOperation(t,{handleUndo:!1}))}}},{key:"syncOperationOnData",value:function(e){j.syncOperationOnData(this.data,e,{collaborators:this.collaborators})}},{key:"modifyRecord",value:function(e,t,n,r,o){var a=(0,g.fj4)(this.data,e);if(a&&this.context.canModifyRow(a)){var i=b.MODIFY_RECORD,l=this.createOperation({type:i,repo_id:this.repoId,row_id:e,updates:t,old_row_data:n,original_updates:r,original_old_row_data:o});this.applyOperation(l)}}},{key:"modifyRecords",value:function(e,t,n,r,o,a){var i=this,l=(0,g.VLM)(this.data,e),s=[],u={},c={},d={},f={},p={};l.forEach((function(e){if(e&&i.context.canModifyRow(e)){var a=e._id;s.push(a),u[a]=t[a],p[a]=e._obj_id,c[a]=n[a],d[a]=r[a],f[a]=o[a]}}));var m=b.MODIFY_RECORDS,h=this.createOperation({type:m,repo_id:this.repoId,row_ids:s,id_row_updates:u,id_original_row_updates:c,id_old_row_data:d,id_original_old_row_data:f,is_copy_paste:a,id_obj_id:p});this.applyOperation(h)}},{key:"reloadRecords",value:function(e){var t=b.RELOAD_RECORDS,n=this.createOperation({type:t,repo_id:this.repoId,row_ids:e});this.applyOperation(n)}},{key:"lockRecordViaButton",value:function(e,t,n){var r=n.success_callback,o=n.fail_callback,a=b.LOCK_RECORD_VIA_BUTTON,i=this.createOperation({type:a,repo_id:this.repoId,row_id:e,button_column_key:t,success_callback:r,fail_callback:o});this.applyOperation(i)}},{key:"modifyRecordViaButton",value:function(e,t,n,r,o,a,i){var l=i.success_callback,s=i.fail_callback;if((0,g.fj4)(this.data,e)){var u=b.MODIFY_RECORD_VIA_BUTTON,c=this.createOperation({type:u,repo_id:this.repoId,row_id:e,updates:t,old_row_data:n,original_updates:r,original_old_row_data:o,button_column_key:a,success_callback:l,fail_callback:s});this.applyOperation(c)}}},{key:"modifyFilters",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],o=b.MODIFY_FILTERS,a=this.createOperation({type:o,filter_conjunction:e,filters:t,basic_filters:r,repo_id:this.repoId,view_id:this.viewId,success_callback:function(){n.context.eventBus.dispatch(k.Tw.RELOAD_DATA)}});this.applyOperation(a)}},{key:"modifySorts",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=b.MODIFY_SORTS,o=this.createOperation({type:r,sorts:e,repo_id:this.repoId,view_id:this.viewId,success_callback:function(){t.context.eventBus.dispatch(k.Tw.RELOAD_DATA),n&&t.context.eventBus.dispatch(k.Tw.DISPLAY_SORTS)}});this.applyOperation(o)}},{key:"modifyGroupbys",value:function(e){var t=b.MODIFY_GROUPBYS,n=this.createOperation({type:t,groupbys:e,repo_id:this.repoId,view_id:this.viewId});this.applyOperation(n)}},{key:"modifyHiddenColumns",value:function(e){var t=b.MODIFY_HIDDEN_COLUMNS,n=this.createOperation({type:t,hidden_columns:e,repo_id:this.repoId,view_id:this.viewId});this.applyOperation(n)}}])}(),V=G,Z=n(65604),z=n(44),X=n(44414),W=["children","repoID","viewID"],K=l.createContext(null),$=function(e){var t=e.children,n=e.repoID,r=e.viewID,c=(0,i.A)(e,W),d=(0,l.useState)(!0),f=(0,a.A)(d,2),p=f[0],m=f[1],h=(0,l.useState)({rows:[],columns:[],view:{}}),v=(0,a.A)(h,2),g=v[0],y=v[1],C=(0,l.useRef)(null),E=(0,z.D1)().collaborators,_=(0,z.p_)(),A=_.showFirstView,b=_.setShowFirstView,S=(0,l.useCallback)((function(){y(C.current.data)}),[]),w=(0,l.useCallback)((function(e){s.A.danger(e.error)}),[]),O=(0,l.useCallback)((function(e){y(e)}),[]),R=(0,l.useCallback)((function(){m(!0),C.current.reload(k.bK).then((function(){y(C.current.data),m(!1)})).catch((function(e){var t=Z.Aq.getErrorMsg(e);s.A.danger(t)}))}),[]),T=(0,l.useCallback)((function(e,t,n){window.sfMetadataStore.modifyFilters(t,e,n)}),[]),x=(0,l.useCallback)((function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];window.sfMetadataStore.modifySorts(e,t)}),[]),M=(0,l.useCallback)((function(e){window.sfMetadataStore.modifyGroupbys(e)}),[]),D=(0,l.useCallback)((function(e){window.sfMetadataStore.modifyHiddenColumns(e)}),[]),I=(0,l.useCallback)((function(e,t){window.sfMetadataStore.modifyColumnOrder(e,t)}),[]);return(0,l.useEffect)((function(){m(!0);var e=new u.A;window.sfMetadataContext=e,window.sfMetadataContext.init((0,o.A)((0,o.A)({},c),{},{repoID:n,viewID:r})),C.current=new V({context:window.sfMetadataContext,repoId:n,viewId:r,collaborators:E}),window.sfMetadataStore=C.current,C.current.initStartIndex(),C.current.load(k.bK).then((function(){A&&0===C.current.data.rows.length&&s.A.success((0,Y.AP)("The files' metadata is being created. This may take a minute or so. Please refresh the page later.")),y(C.current.data),b(!1),m(!1)})).catch((function(e){var t=Z.Aq.getErrorMsg(e);s.A.danger(t)}));var t=window.sfMetadataContext.eventBus,a=t.subscribe(k.Tw.SERVER_TABLE_CHANGED,S),i=t.subscribe(k.Tw.LOCAL_TABLE_CHANGED,S),l=t.subscribe(k.Tw.TABLE_ERROR,w),d=t.subscribe(k.Tw.UPDATE_TABLE_ROWS,O),f=t.subscribe(k.Tw.RELOAD_DATA,R),p=t.subscribe(k.Tw.MODIFY_FILTERS,T),h=t.subscribe(k.Tw.MODIFY_SORTS,x),v=t.subscribe(k.Tw.MODIFY_GROUPBYS,M),g=t.subscribe(k.Tw.MODIFY_HIDDEN_COLUMNS,D),_=t.subscribe(k.Tw.MODIFY_COLUMN_ORDER,I);return function(){window.sfMetadataContext.destroy(),window.sfMetadataStore.destroy(),a(),i(),l(),d(),f(),p(),h(),v(),g(),_()}}),[n,r]),(0,X.jsx)(K.Provider,{value:{isLoading:p,metadata:g,store:C.current},children:t})},q=function(){var e=(0,l.useContext)(K);if(!e)throw new Error("'MetadataContext' is null");return{isLoading:e.isLoading,metadata:e.metadata,store:e.store}}},31195:function(e,t,n){"use strict";var r=n(92901),o=n(23029),a=n(31425),i=n(3563),l=(0,r.A)((function e(t){(0,o.A)(this,e),this.is_frozen=function(e){return e===i.L2D.FILE_NAME},this.enable_edit=function(e,t){return!i.Ajs.includes(e)||i.JIQ.includes(e)},this.key=t.key||"",this.name=(0,a.Q8)(this.key,t.name)||"",this.type=t.type||"",this.data=t.data||null,this.width=t.width||200,this.editable=this.enable_edit(this.key,this.type),this.data=(0,a.Qq)(this),this.frozen=this.is_frozen(this.key)||t.frozen||!1}));t.A=l},31425:function(e,t,n){"use strict";n.d(t,{Ax:function(){return m},H2:function(){return w},Hs:function(){return g},KO:function(){return _},Kf:function(){return d},Q8:function(){return E},Qq:function(){return S},YO:function(){return b},Zz:function(){return h},dK:function(){return O},iM:function(){return y},nh:function(){return A},s9:function(){return C},u7:function(){return f},wV:function(){return p},wo:function(){return v}});var r=n(80045),o=n(89379),a=n(55097),i=n.n(a),l=n(3563),s=n(73575),u=n(40326),c=["type","key"];function d(e){return e&&e.data&&e.data.format?e.data.format:l.D23}function f(e){return e.type===l.vZe.CHECKBOX}function p(e,t){return Array.isArray(t)?t[e]:"undefined"!==typeof Immutable?t.get(e):null}var m=function(e){return"_name"===e.key},h=function(e){return!!e&&!0===e.frozen};function v(e,t){return t[e.idx].editable}function g(e,t){var n=t[e.idx];return[l.vZe.CHECKBOX].includes(null===n||void 0===n?void 0:n.type)}var y=function(e,t){var n=e,r=t,o=n.reduce((function(e,t){return e+=t.width}),0),a=s.sN,i=n.filter((function(e){return h(e)})),l=i.reduce((function(e,t){return e+t.width}),0);return{totalWidth:o,lastFrozenColumnKey:l>0?i[i.length-1].key:null,frozenColumnsWidth:l,columns:n.map((function(e,t){var n=e.width;return e.idx=t,e.left=a,e.width=n,a+=n,e})),allColumns:r}},C=function(e,t,n){var r=i()(e),a=e.columns.findIndex((function(e){return e.key===t})),l=e.columns[a],s=(0,o.A)((0,o.A)({},l),{},{width:n});r.columns[a]=s;var u=e.allColumns.findIndex((function(e){return e.key===t}));return r.allColumns[u]=(0,o.A)((0,o.A)({},e.columns[a]),{},{width:n}),y(r.columns,r.allColumns)},E=function(e,t){switch(e){case l.L2D.CTIME:case l.L2D.FILE_CTIME:return(0,u.AP)("Created time");case l.L2D.MTIME:case l.L2D.FILE_MTIME:return(0,u.AP)("Last modified time");case l.L2D.CREATOR:case l.L2D.FILE_CREATOR:return(0,u.AP)("Creator");case l.L2D.LAST_MODIFIER:case l.L2D.FILE_MODIFIER:return(0,u.AP)("Last modifier");case l.L2D.IS_DIR:return"";case l.L2D.PARENT_DIR:return(0,u.AP)("Parent folder");case l.L2D.FILE_NAME:return(0,u.AP)("File name");case l.L2D.FILE_TYPE:return(0,u.AP)("File type");case l.L2D.FILE_COLLABORATORS:return(0,u.AP)("Document collaborators");case l.L2D.FILE_EXPIRE_TIME:return(0,u.AP)("File expire time");case l.L2D.FILE_KEYWORDS:return(0,u.AP)("Document keywords");case l.L2D.FILE_DESCRIPTION:return(0,u.AP)("Description");case l.L2D.FILE_EXPIRED:return(0,u.AP)("Is expired");case l.L2D.FILE_STATUS:return(0,u.AP)("File status");case l.L2D.LOCATION:return(0,u.AP)("Image location");case l.L2D.SIZE:return(0,u.AP)("Size");case l.L2D.FILE_DETAILS:return(0,u.AP)("File details");default:return t}},_=function(e){var t=e.key,n=e.name;return l.Ajs.includes(t)?t:n},A=function(e,t){switch(e){case l.L2D.CTIME:case l.L2D.FILE_CTIME:return l.vZe.CTIME;case l.L2D.MTIME:case l.L2D.FILE_MTIME:return l.vZe.MTIME;case l.L2D.CREATOR:case l.L2D.FILE_CREATOR:return l.vZe.CREATOR;case l.L2D.LAST_MODIFIER:case l.L2D.FILE_MODIFIER:return l.vZe.LAST_MODIFIER;case l.L2D.FILE_NAME:return l.vZe.FILE_NAME;case l.L2D.IS_DIR:return l.vZe.CHECKBOX;case l.L2D.FILE_COLLABORATORS:return l.vZe.COLLABORATOR;case l.L2D.FILE_EXPIRE_TIME:return l.vZe.DATE;case l.L2D.FILE_KEYWORDS:return l.vZe.TEXT;case l.L2D.FILE_DESCRIPTION:return l.vZe.LONG_TEXT;case l.L2D.FILE_EXPIRED:return l.vZe.CHECKBOX;case l.L2D.FILE_STATUS:return l.vZe.SINGLE_SELECT;case l.L2D.LOCATION:return l.vZe.GEOLOCATION;default:return t}},b=function(){return[{id:"_in_progress",name:"_in_progress"},{id:"_in_review",name:"_in_review"},{id:"_done",name:"_done"}]},S=function(e){var t=e.key,n=e.data;if(l.Ajs.includes(t)){if(t===l.L2D.FILE_TYPE)return function(e){var t=e.data,n={_picture:{name:(0,u.AP)("Picture"),color:"#FFFCB5",textColor:"#202428"},_document:{name:(0,u.AP)("Document"),color:"#B7CEF9",textColor:"#202428"},_video:{name:(0,u.AP)("Video"),color:"#9860E5",textColor:"#FFFFFF",borderColor:"#844BD2"},_audio:{name:(0,u.AP)("Audio"),color:"#FBD44A",textColor:"#FFFFFF",borderColor:"#E5C142"},_code:{name:(0,u.AP)("Code"),color:"#4ad8fb",textColor:"#FFFFFF",borderColor:"#4283e5"}},r=(0,o.A)({},t);return r.options=Array.isArray(t.options)?t.options.map((function(e){return(0,o.A)((0,o.A)({},e),n[e.id])})):[],r}(e);if(t===l.L2D.FILE_STATUS)return function(e){var t=e.data,n=(0,o.A)({},t),r={_in_progress:{name:(0,u.AP)("In progress"),color:"#EED5FF",textColor:"#202428"},_in_review:{name:(0,u.AP)("In review"),color:"#FFFDCF",textColor:"#202428"},_done:{name:(0,u.AP)("Done"),color:"#59CB74",textColor:"#FFFFFF",borderColor:"#844BD2"}};return n.options=Array.isArray(null===t||void 0===t?void 0:t.options)?t.options.map((function(e){return(0,o.A)((0,o.A)({},e),r[e.id])})):[],n}(e);if(t===l.L2D.SIZE)return function(e){return(0,o.A)((0,o.A)({},e.data),{},{format:"byte"})}(e)}return e.type===l.vZe.SINGLE_SELECT?(0,o.A)((0,o.A)({},n),{},{options:(null===n||void 0===n?void 0:n.options)||[]}):e.type===l.vZe.DATE?(0,o.A)((0,o.A)({},n),{},{format:(null===n||void 0===n?void 0:n.format)||l.D23}):n},w=function(e){if(!Array.isArray(e)||0===e.length)return[];var t=window.sfMetadataContext.localStorage.getItem("columns_width")||{},n=e.map((function(e){var n=e.type,a=e.key,i=(0,r.A)(e,c),l=A(a,n);return(0,o.A)((0,o.A)({},i),{},{key:a,type:l,width:t[a]||200})})).filter((function(e){return!l.Tuj.includes(e.key)})),a=[];return n.forEach((function(e){if("_name"===e.key)a.unshift(e);else if(e.key===l.L2D.PARENT_DIR){var t=a.findIndex((function(e){return e.key===l.L2D.PARENT_DIR}));-1===t?a.unshift(e):a.splice(t,0,e)}else a.push(e)})),a};function O(e,t,n){return!!e&&(!1!==window.sfMetadataContext.canModifyColumn(e)&&(null!=e.editable&&"function"===typeof e.editable?!0===n&&e.editable(t):!0===n&&!!e.editable))}},42996:function(e,t,n){"use strict";var r=n(64467),o=n(73575),a=o.aG.FRAGMENT,i=o.aG.HTML,l=o.aG.TEXT;function s(e,t){return e.types&&e.types.length?e.getData(t):t===l&&e.getData("Text")||null}function u(e){var t=(e?e.replace(/\r/g,""):"").split("\n"),n=t[0].split("\t").map((function(e,t){return{key:"col".concat(t),type:"text"}})),r=[];return t.forEach((function(e){var t={};e&&(e=e.split("\t")).forEach((function(e,n){t["col".concat(n)]=e})),r.push(t)})),{copiedRecords:r,copiedColumns:n}}t.A=function(e){var t=e.dataTransfer||e.clipboardData,n=s(t,a),c=s(t,i),d=s(t,l),f=function(e){var t;try{e.items&&e.items.length?t=Array.from(e.items).map((function(e){return"file"===e.kind?e.getAsFile():null})).filter((function(e){return e})):e.files&&e.files.length&&(t=Array.from(e.files))}catch(n){e.files&&e.files.length&&(t=Array.from(e.files))}return t}(t);if(n)return(0,r.default)((0,r.default)({},o.aG.DTABLE_FRAGMENT,JSON.parse(n)),"type",o.aG.DTABLE_FRAGMENT);if(c){var p=(new DOMParser).parseFromString(c,i).querySelector("table");return p?(0,r.default)((0,r.default)((0,r.default)((0,r.default)({},o.aG.DTABLE_FRAGMENT,function(e){var t=e.querySelectorAll("tr"),n=t[0].querySelectorAll("td"),r=[],o=[];return n.forEach((function(e,t){r.push({key:"col".concat(t),type:"text"})})),t.forEach((function(e){var t={};e.querySelectorAll("td").forEach((function(e,n){t["col".concat(n)]=e.innerText})),o.push(t)})),{copiedRecords:o,copiedColumns:r}}(p)),"html",c),"text",d),"type","html"):(0,r.default)((0,r.default)((0,r.default)((0,r.default)({},o.aG.DTABLE_FRAGMENT,u(d)),"html",c),"text",d),"type","html")}return f&&f.length?(0,r.default)((0,r.default)((0,r.default)({},o.aG.DTABLE_FRAGMENT,u(d)),"files",f),"type","files"):d?(0,r.default)((0,r.default)((0,r.default)({},o.aG.DTABLE_FRAGMENT,u(d)),"text",d),"type","text"):void 0}},58419:function(e,t,n){"use strict";n.d(t,{AP:function(){return r.AP},B$:function(){return i},Fr:function(){return a},SW:function(){return l},eP:function(){return s},wD:function(){return o},yD:function(){return c},zR:function(){return u}});n(42996);var r=n(40326),o=function(e){return e&&e.target&&e.target.getAttribute("class")||""},a="undefined"!==typeof window&&(window.innerWidth<768||null!=navigator.userAgent.toLowerCase().match(/(ipod|ipad|iphone|android|coolpad|mmp|smartphone|midp|wap|xoom|symbian|j2me|blackberry|wince)/i)),i=function(e,t){return e.split(" ").indexOf(t)>-1?e:e+" "+t},l=function(e,t){var n=e.split(" "),r=n.indexOf(t);return r<0?e:(n.splice(r,1),n.join(" "))},s=function(){return/windows|win32/i.test(navigator.userAgent)},u=function(){return navigator.userAgent.toLowerCase().includes("webkit")},c=function(e){return"string"===typeof e?e.trim():""}},51528:function(e,t,n){"use strict";var r=n(89379),o=n(23029),a=n(92901),i=function(){return(0,a.A)((function e(){(0,o.A)(this,e)}),null,[{key:"getDataType",value:function(e){var t=typeof e;return"object"!==t?t:Object.prototype.toString.call(e).replace(/^\[object (\S+)\]$/,"$1")}},{key:"iterable",value:function(e){return["Object","Array"].includes(this.getDataType(e))}},{key:"isObjectChanged",value:function(e,t){var n=this;if(!this.iterable(e))throw new Error("source should be a Object or Array , but got ".concat(this.getDataType(e)));if(this.getDataType(e)!==this.getDataType(t))return!0;var o=Object.keys(e),a=Object.keys((0,r.A)((0,r.A)({},e),t));return o.length!==a.length||a.some((function(r){return n.iterable(e[r])?n.isObjectChanged(e[r],t[r]):e[r]!==t[r]}))}},{key:"isSameObject",value:function(e,t){return!e&&!t||!(!e||!t)&&!this.isObjectChanged(e,t)}}])}();t.A=i},35975:function(e,t,n){"use strict";n.d(t,{r:function(){return a}});var r=n(34807),o=n(51511),a=function(e,t){var n=function(e){for(var t=r.G.slice(12,24),n=t[Math.floor(Math.random()*t.length)],o=e.slice(-11),a=function(e){return e.color===n.COLOR},i=o.find(a);i;)n=t[Math.floor(Math.random()*t.length)],i=o.find(a);return n}(e),a={name:t,color:n.COLOR,textColor:n.TEXT_COLOR,borderColor:n.BORDER_COLOR};return a.id=(0,o.Cl)(e),a}},43111:function(e,t,n){"use strict";var r=n(9950),o=n(17119),a=n(28321),i=n(97499),l=n(65604),s=n(81446),u=n(5544),c=n(17),d=n(23029),f=n(92901),p=n(39874),m=n(85501),h=n(97011),v=n(4086),g=n(44124),y=n(88134),C=n(56999),E=n(44414),_=function(e){function t(e){var n;return(0,d.A)(this,t),(n=(0,p.A)(this,t,[e])).onInternalLinkToggle=function(e){e&&e.internalLink&&n.setState({internalLink:e.internalLink}),n.setState({isShowInternalLinkDialog:!n.state.isShowInternalLinkDialog})},n.toggleStar=function(){var e=n.props,t=e.isStarred,r=e.repoID,o=e.docPath;t?h.e.unstarItem(r,o).then((function(e){n.props.toggleStar(!1)})).catch((function(e){var t=l.Aq.getErrorMsg(e);v.A.danger(t)})):h.e.starItem(r,o).then((function(e){n.props.toggleStar(!0)})).catch((function(e){var t=l.Aq.getErrorMsg(e);v.A.danger(t)}))},n.onShareToggle=function(){n.setState({isShowShareDialog:!n.state.isShowShareDialog})},n.onFreezeDocument=function(){var e=n.props,t=e.repoID,r=e.docPath;h.e.lockfile(t,r,-1).then((function(e){c.l7.getInstance().dispatch(c.Zo.REFRESH_DOCUMENT)})).catch((function(e){var t=l.Aq.getErrorMsg(e);v.A.danger(t)}))},n.unFreeze=function(){var e=n.props,t=e.repoID,r=e.docPath;h.e.unlockfile(t,r).then((function(e){c.l7.getInstance().dispatch(c.Zo.REFRESH_DOCUMENT)})).catch((function(e){var t=l.Aq.getErrorMsg(e);v.A.danger(t)}))},n.onNewNotification=function(){n.props.onNewNotification()},n.onClearNotification=function(){n.props.onClearNotification()},n.onCreateSdocFile=function(e){null!==e&&void 0!==e&&e.editor&&null!==e&&void 0!==e&&e.insertSdocFileLink&&n.setState({editor:e.editor,insertSdocFileLink:e.insertSdocFileLink}),null!==e&&void 0!==e&&e.newFileName&&n.setState({fileType:"".concat(e.newFileName,".sdoc")}),n.setState({isShowCreateFileDialog:!n.state.isShowCreateFileDialog})},n.checkDuplicatedName=function(e){return n.props.direntList.some((function(t){return t.name===e}))},n.onAddFile=function(e){var t=n.props.repoID,r=n.state,o=r.insertSdocFileLink,a=r.editor;h.e.createFile(t,e).then((function(e){o&&a&&o(a,e.data.obj_name,e.data.doc_uuid)})).catch((function(e){var t=l.Aq.getErrorMsg(e);v.A.danger(t)}))},n.state={isShowInternalLinkDialog:!1,isShowShareDialog:!1,internalLink:"",isShowCreateFileDialog:!1,fileType:".sdoc",editor:null,insertSdocFileLink:null},n}return(0,m.A)(t,e),(0,f.A)(t,[{key:"componentDidMount",value:function(){var e=c.l7.getInstance();this.unsubscribeInternalLinkEvent=e.subscribe(c.Zo.INTERNAL_LINK_CLICK,this.onInternalLinkToggle),this.unsubscribeStar=e.subscribe(c.Zo.TOGGLE_STAR,this.toggleStar),this.unsubscribeShare=e.subscribe(c.Zo.SHARE_SDOC,this.onShareToggle),this.unsubscribeFreezeDocument=e.subscribe(c.Zo.FREEZE_DOCUMENT,this.onFreezeDocument),this.unsubscribeUnfreeze=e.subscribe(c.Zo.UNFREEZE,this.unFreeze),this.unsubscribeNewNotification=e.subscribe(c.Zo.NEW_NOTIFICATION,this.onNewNotification),this.unsubscribeClearNotification=e.subscribe(c.Zo.CLEAR_NOTIFICATION,this.onClearNotification),this.unsubscribeCreateSdocFile=e.subscribe(c.Zo.CREATE_SDOC_FILE,this.onCreateSdocFile)}},{key:"componentWillUnmount",value:function(){this.unsubscribeInternalLinkEvent(),this.unsubscribeStar(),this.unsubscribeUnmark(),this.unsubscribeShare(),this.unsubscribeFreezeDocument(),this.unsubscribeUnfreeze(),this.unsubscribeNewNotification(),this.unsubscribeCreateSdocFile(),this.unsubscribeClearNotification()}},{key:"render",value:function(){var e=this.props,t=e.repoID,n=e.docPath,r=e.docName,o=e.docPerm,a=e.dirPath,i=this.state,l=i.isShowInternalLinkDialog,s=i.isShowShareDialog,u=i.internalLink,c=i.isShowCreateFileDialog,d=i.fileType;return(0,E.jsxs)(E.Fragment,{children:[l&&(0,E.jsx)(g.A,{repoID:t,path:n,internalLink:u,onInternalLinkDialogToggle:this.onInternalLinkToggle}),s&&(0,E.jsx)(y.A,{itemType:"file",itemPath:n,itemName:r,repoID:t,userPerm:o,toggleDialog:this.onShareToggle}),c&&(0,E.jsx)(C.A,{parentPath:a,fileType:d,onAddFile:this.onAddFile,checkDuplicatedName:this.checkDuplicatedName,toggleDialog:this.onCreateSdocFile})]})}}])}(r.Component),A=_,b=n(84878),S=n(53264),w=n(48738),O=n.n(w),R=n(7266),T=n(71791),x=n(92811),M=n(3563),D=n(40326),I=function(e){var t=e.repoID,n=e.repoInfo,o=e.path,a=e.direntDetail,i=(0,S.Sv)().enableMetadata,s=(0,r.useMemo)((function(){return{type:"size",name:(0,D.AP)("Size")}}),[]),u=(0,r.useMemo)((function(){return{type:M.vZe.LAST_MODIFIER,name:(0,D.AP)("Last modifier")}}),[]),c=(0,r.useMemo)((function(){return{type:M.vZe.MTIME,name:(0,D.AP)("Last modified time")}}),[]);return(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)(x.A,{field:s,className:"sf-metadata-property-detail-formatter",children:(0,E.jsx)(T.ZA,{field:s,value:l.Aq.bytesToSize(a.size)})}),(0,E.jsx)(x.A,{field:u,className:"sf-metadata-property-detail-formatter",children:(0,E.jsx)(T.ZA,{field:u,value:a.last_modifier_email,collaborators:[{name:a.last_modifier_name,contact_email:a.last_modifier_contact_email,email:a.last_modifier_email,avatar_url:a.last_modifier_avatar}]})}),(0,E.jsx)(x.A,{field:c,className:"sf-metadata-property-detail-formatter",children:(0,E.jsx)(T.ZA,{field:c,value:a.last_modified})}),window.app.pageOptions.enableMetadataManagement&&i&&(0,E.jsx)(S.iF,{repoID:t,filePath:o,repoInfo:n,direntType:"file"})]})},N=function(e){var t=e.repoID,n=e.repoInfo,o=e.dirent,a=e.path,i=e.onClose,s=e.width,c=void 0===s?300:s,d=e.className,f=e.component.headerComponent,p=(0,r.useState)(""),m=(0,u.A)(p,2),g=m[0],y=m[1];(0,r.useEffect)((function(){var e=new S.BT;return window.sfMetadataContext=e,window.sfMetadataContext.init({repoID:t,repoInfo:n}),h.e.getFileInfo(t,a).then((function(e){y(e.data)})).catch((function(e){var t=l.Aq.getErrorMsg(e);v.A.danger(t)})),function(){window.sfMetadataContext.destroy(),delete window.sfMetadataContext}}),[]);var C=(null===o||void 0===o?void 0:o.name)||"",_=l.Aq.getDirentIcon(o);return(0,E.jsxs)("div",{className:O()("cur-view-detail",d,{"cur-view-detail-small":c<400,"cur-view-detail-large":c>400}),style:{width:c},children:[(0,E.jsx)(R.Y9,{title:C,icon:_,onClose:i,component:f}),(0,E.jsx)(R.nB,{children:o&&g&&(0,E.jsx)("div",{className:"detail-content",children:(0,E.jsx)(I,{repoID:t,repoInfo:n,path:a,direntDetail:g})})})]})},L=function(){var e=(0,r.useState)(window.app.pageOptions.isStarred),t=(0,u.A)(e,2),n=t[0],o=t[1],a=(0,r.useState)(window.app.pageOptions.isSdocDraft),i=(0,u.A)(a,1)[0],s=(0,r.useState)([]),d=(0,u.A)(s,2),f=d[0],p=d[1],m=(0,r.useState)(null),v=(0,u.A)(m,2),g=v[0],y=v[1],C=(0,S.D1)().collaborators,_=(0,r.useMemo)((function(){var e=window.seafile,t=e.repoID,n=e.docPath,r=e.docPerm;return[{name:"sdoc-info",icon:"sdoc-info",resizable_width:!0,display_type:"right-panel",component:function(e){var o=e.onClose,a=e.width;return(0,E.jsx)(N,{repoID:t,path:n,dirent:g,repoInfo:{permission:r},width:a-1,component:{headerComponent:{closeIcon:(0,E.jsx)("i",{className:"sdocfont sdoc-sm-close"})}},onClose:o})}}]}),[g]),w=(0,r.useMemo)((function(){var e=window.seafile.docPath,t=e.lastIndexOf("/");return t?e.slice(0,t):"/"}),[]),O=(0,r.useCallback)((function(e){var t=window.seafile.docName;e&&(t+=e);var n=l.Aq.getFileIconUrl(t);document.getElementById("favicon").href=n}),[]),R=(0,r.useCallback)((function(){O("_notification")}),[O]),T=(0,r.useCallback)((function(){O()}),[O]);(0,r.useEffect)((function(){O(),function(){var e=window.seafile,t=e.repoID,n=e.docPath;h.e.listDir(t,w,{with_thumbnail:!0}).then((function(e){var t=[];e.data.dirent_list.forEach((function(e){var r=new b.A(e);l.Aq.joinPath(e.parent_dir,e.name)===n&&y(r),t.push(r)})),p(t)})).catch((function(e){l.Aq.getErrorMsg(e,!0)}))}()}),[]);var x=window.seafile,M=x.repoID,D=x.docPath,I=x.docName,L=x.docPerm;return(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)(c.YU,{isStarred:n,isDraft:i,plugins:_,collaborators:C,showComment:!0}),(0,E.jsx)(A,{repoID:M,docPath:D,docName:I,docPerm:L,isStarred:n,direntList:f,dirPath:w,toggleStar:function(e){o(e)},onNewNotification:R,onClearNotification:T})]})},k=window.app.config,P=k.serviceURL,F=k.avatarURL,j=k.siteRoot,Y=k.lang,U=k.mediaUrl,B=k.isPro,H=window.app.userInfo,G=H.username,V=H.name,Z=window.app.pageOptions,z=Z.repoID,X=Z.repoName,W=Z.parentDir,K=Z.filePerm,$=Z.docPath,q=Z.docName,Q=Z.docUuid,J=Z.seadocAccessToken,ee=Z.seadocServerUrl,te=Z.assetsUrl,ne=Z.isSdocRevision,re=Z.isPublished,oe=Z.originFilename,ae=Z.revisionCreatedAt,ie=Z.originFileVersion,le=Z.originFilePath,se=Z.originDocUuid,ue=Z.revisionId,ce=Z.isFreezed;window.seafile={repoID:z,docPath:$,docName:q,docUuid:Q,isOpenSocket:!0,serviceUrl:P,accessToken:J,sdocServer:ee,name:V,username:G,avatarURL:F,siteRoot:j,docPerm:K,historyURL:l.Aq.generateHistoryURL(j,z,$),parentFolderURL:"".concat(j,"library/").concat(z,"/").concat(l.Aq.encodePath(X+W)),assetsUrl:te,isShowInternalLink:!0,isStarIconShown:!0,isSdocRevision:ne,isPublished:re,originFilename:oe,originFileVersion:ie,originFilePath:le,originDocUuid:se,revisionCreatedAt:ae,lang:Y,revisionId:ue,mediaUrl:U,isFreezed:ce,isPro:"True"===B},o.render((0,E.jsx)(a.I18nextProvider,{i18n:i.A,children:(0,E.jsx)(r.Suspense,{fallback:(0,E.jsx)(s.A,{}),children:(0,E.jsx)(S.M8,{repoID:z,children:(0,E.jsx)(S.lN,{repoID:z,children:(0,E.jsx)(L,{})})})})}),document.getElementById("wrapper"))},58814:function(e,t,n){"use strict";var r=n(17383).default,o=n(34579).default,a=n(18336).default,i=n(29511).default,l=n(24994).default,s=n(6305).default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var u=s(n(9950)),c=l(n(17119)),d=l(n(82894)),f=l(n(39739)),p=n(66327),m=l(n(44956)),h=n(56265);n(43195),n(92356),n(92305),n(63138);var v=(0,m.default)(),g=function(e){function t(e){var n;return r(this,t),(n=a(this,t,[e])).onChange=function(e){e&&(n.setState({value:e}),(0,h.isFunction)(n.props.onChange)&&n.props.onChange(e.format(n.valueSubmitFormat)))},n.getValue=function(){var e=n.state.value;return e?e.format(n.valueSubmitFormat):null},n.getInputNode=function(){var e=c.default.findDOMNode(n);return"INPUT"===e.tagName?e:e.querySelector("input:not([type=hidden])")},n.onOpenChange=function(e){n.setState({open:e},(function(){e||n.props.onClose&&n.props.onClose()}))},n.onReadOnlyFocus=function(){n.setState({open:!0})},n.onBlur=function(e){n.props.onBlur&&n.props.onBlur(e)},n.closeEditor=function(){n.setState({open:!1}),n.onBlur()},n.getCalendarContainer=function(){return document.body},n.handleMouseDown=function(e){e.preventDefault()},n.handleKeyDown=function(e){[37,38,39,40].includes(e.keyCode)?e.stopPropagation():13===e.keyCode&&(e.preventDefault(),n.onBlur("enter"))},n.onClick=function(e){e.stopPropagation();var t=(0,h.getEventClassName)(e);n.showHourAndMinute||"rc-calendar-date"!==t||(n.timer=setTimeout((function(){n.closeEditor()}),1)),n.showHourAndMinute&&"rc-calendar-date"===t&&n.setState({open:!0})},n.onClear=function(){(0,h.isFunction)(n.props.onClear)?n.props.onClear():n.setState({value:null},(function(){n.setState({open:!0})}))},n.onHotKey=function(e){27===e.keyCode&&(e.stopPropagation(),n.props.onClose&&n.props.onClose())},n.getCalendarFormat=function(){if(n.format.indexOf("YYYY-MM-DD")>-1){var e=n.format.replace("YYYY-MM-DD","YYYY-M-D");return[n.format,e]}if(n.format.indexOf("DD/MM/YYYY")>-1){var t=n.format.replace("DD/MM/YYYY","D/M/YYYY");return[n.format,t]}return[n.format]},n.getDefaultMinutesTime=function(){var e=n.props.value;return e?(0,m.default)(e).format("HH:mm"):""},n.onClickRightPanelTime=function(){setTimeout((function(){n.closeEditor()}),1)},n.state={value:null,open:!0},n.format=e.format||"YYYY-MM-DD",n.calendarContainerRef=u.default.createRef(),n.defaultCalendarValue=null,n.showHourAndMinute=n.format.indexOf("HH:mm")>-1,n.valueSubmitFormat=n.showHourAndMinute?"YYYY-MM-DD HH:mm":"YYYY-MM-DD",n}return i(t,e),o(t,[{key:"componentDidMount",value:function(){var e="zh-cn"===this.props.lang;v=e?v.locale("zh-cn"):v.locale("en-gb"),this.defaultCalendarValue=v.clone();var t=this.props.value;if(t&&(0,m.default)(t).isValid()){if("string"===typeof t&&1===t.length&&!isNaN(Number(t,10)))return void(this.timer=setTimeout((function(){var e=document.getElementsByClassName("rc-calendar-input")[0];e&&(e.value=t)}),200));var n=(0,m.default)(t).isValid()?(0,m.default)(t):(0,m.default)(this.defaultCalendarValue);this.setState({value:e?(0,m.default)(n).locale("zh-cn"):(0,m.default)(n).locale("en-gb")})}document.addEventListener("keydown",this.onHotKey,!0)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.onHotKey,!0),this.timer&&(clearTimeout(this.timer),this.timer=null)}},{key:"render",value:function(){var e=this,t=this.props,n=t.isReadOnly,r=t.lang,o=this.state;if(n)return u.default.createElement("input",{className:"ant-calendar-picker-input ant-input form-control",value:o.value?o.value.format(this.format):"",disabled:!0});var a=this.getCalendarFormat(),i=this.getDefaultMinutesTime(),l=u.default.createElement(d.default,{className:"sf-metadata-rc-calendar",locale:(0,p.translateCalendar)(r),style:{zIndex:1001},dateInputPlaceholder:(0,h.gettext)("Enter date"),format:a,defaultValue:this.defaultCalendarValue,showDateInput:!0,focusablePanel:!1,showHourAndMinute:this.showHourAndMinute,onClear:this.onClear,onClickRightPanelTime:this.onClickRightPanelTime,defaultMinutesTime:i});return u.default.createElement("div",{className:"date-picker-container",onKeyDown:function(t){return e.handleKeyDown(t)},onClick:function(t){return e.onClick(t)}},u.default.createElement(f.default,{calendar:l,value:o.value,onChange:this.onChange,getCalendarContainer:this.getCalendarContainer,onOpenChange:this.onOpenChange,open:o.open,style:{zIndex:1001}},(function(t){var n=t.value;return u.default.createElement("span",{tabIndex:"0",onFocus:e.onReadOnlyFocus},u.default.createElement("input",{placeholder:e.format?e.format:(0,h.gettext)("Please select"),tabIndex:"-1",readOnly:!0,className:"ant-calendar-picker-input ant-input form-control",value:n?n.format(e.format):"",onMouseDown:e.handleMouseDown}),u.default.createElement("div",{ref:e.calendarContainerRef}))})))}}])}(u.Component);g.defaultProps={format:"YYYY-MM-DD",lang:"zh-cn",isReadOnly:!1};t.default=g},97157:function(e,t,n){"use strict";var r=n(17383).default,o=n(34579).default,a=n(18336).default,i=n(29511).default,l=n(24994).default,s=n(6305).default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var u=s(n(9950)),c=l(n(82894)),d=l(n(39739)),f=n(66327),p=l(n(44956));n(43195),n(92356),n(92305),n(63138);var m=(0,p.default)(),h=function(e){function t(e){var n;return r(this,t),(n=a(this,t,[e])).handleMouseDown=function(e){e.preventDefault()},n.onChange=function(e){var t=n.props.onChange;n.setState({value:e},(function(){n.state.value&&t(n.state.value.format("YYYY-MM-DD"))}))},n.onClear=function(){n.setState({value:null},(function(){n.setState({open:!0})}))},n.onOpenChange=function(e){n.setState({open:e})},n.onReadOnlyFocus=function(){!n.state.open&&n.state.isMouseDown?n.setState({isMouseDown:!1}):n.setState({open:!0})},n.getCalendarContainer=function(){return n.calendarContainerRef.current},n.getCalendarFormat=function(){if(n.format.indexOf("YYYY-MM-DD")>-1){var e=n.format.replace("YYYY-MM-DD","YYYY-M-D");return[n.format,e]}if(n.format.indexOf("DD/MM/YYYY")>-1){var t=n.format.replace("DD/MM/YYYY","D/M/YYYY");return[n.format,t]}return[n.format]},n.state={open:!1,value:null},n.format=e.format.split(" ")[0],n.calendarContainerRef=u.default.createRef(),n.defaultCalendarValue=null,n}return i(t,e),o(t,[{key:"componentDidMount",value:function(){var e="zh-cn"===this.props.lang;m=e?m.locale("zh-cn"):m.locale("en-gb"),this.defaultCalendarValue=m.clone();var t=this.props.value;if(t&&(0,p.default)(t).isValid()){var n=(0,p.default)(t).isValid()?(0,p.default)(t):(0,p.default)(this.defaultCalendarValue);this.setState({value:e?(0,p.default)(n).locale("zh-cn"):(0,p.default)(n).locale("en-gb")})}}},{key:"render",value:function(){var e=this,t=this.props,n=t.isReadOnly,r=t.lang,o=t.zIndex,a=this.state;if(n)return u.default.createElement("input",{className:"ant-calendar-picker-input ant-input form-control",value:a.value?a.value.format(this.format):"",disabled:!0});var i=this.getCalendarFormat(),l=u.default.createElement(c.default,{className:"sf-metadata-rc-calendar",locale:(0,f.translateCalendar)(r),style:{zIndex:o||1001},dateInputPlaceholder:"please enter date",format:i,defaultValue:this.defaultCalendarValue,showDateInput:!0,focusablePanel:!1,onClear:this.onClear});return u.default.createElement("div",{className:"date-picker-container"},u.default.createElement(d.default,{calendar:l,value:a.value,onChange:this.onChange,getCalendarContainer:this.getCalendarContainer,onOpenChange:this.onOpenChange,open:a.open,style:{zIndex:o||1001}},(function(t){var n=t.value;return u.default.createElement("span",{tabIndex:"0",onFocus:e.onReadOnlyFocus},u.default.createElement("input",{tabIndex:"-1",readOnly:!0,className:"ant-calendar-picker-input ant-input form-control",value:n?n.format(e.format):"",onMouseDown:e.handleMouseDown}),u.default.createElement("div",{ref:e.calendarContainerRef}))})))}}])}(u.Component);h.defaultProps={format:"YYYY-MM-DD",lang:"zh-cn",isReadOnly:!1};t.default=h},49046:function(e,t,n){"use strict";var r=n(24994).default;Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"SfCalendar",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(t,"SfFilterCalendar",{enumerable:!0,get:function(){return a.default}});var o=r(n(58814)),a=r(n(97157))},66327:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.translateCalendar=function(e){var t;switch(e||"en"){case"zh-cn":t=r;break;case"zh-tw":t=o;break;case"en":default:t=a;break;case"fr":t=i;break;case"de":t=l;break;case"es":case"es-ar":case"es-mx":t=s;break;case"pl":t=u;break;case"cs":t=c;break;case"ru":t=d}return t};var r=n(95502),o=n(33850),a=n(37932),i=n(88309),l=n(10507),s=n(1205),u=n(16969),c=n(19550),d=n(36967)},13677:function(e,t,n){"use strict";var r=n(24994).default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=r(n(9950)),a=r(n(86615)),i=r(n(26984));n(41939);t.default=function(e){return o.default.createElement("div",{className:(0,a.default)("sf-metadata-centered-loading",e.className)},o.default.createElement(i.default,null))}},92178:function(e,t,n){"use strict";var r=n(17383).default,o=n(34579).default,a=n(18336).default,i=n(29511).default,l=n(24994).default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=l(n(9950)),u=function(e){function t(){var e;return r(this,t),(e=a(this,t,arguments)).isClickedInside=!1,e.handleDocumentClick=function(t){e.isClickedInside?e.isClickedInside=!1:e.props.onClickOutside(t)},e.handleMouseDown=function(){e.isClickedInside=!0},e}return i(t,e),o(t,[{key:"componentDidMount",value:function(){document.addEventListener("mousedown",this.handleDocumentClick)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("mousedown",this.handleDocumentClick)}},{key:"render",value:function(){return s.default.cloneElement(s.default.Children.only(this.props.children),{onMouseDownCapture:this.handleMouseDown})}}])}(s.default.Component);t.default=u},57425:function(e,t,n){"use strict";var r=n(24994).default;Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"CellType",{enumerable:!0,get:function(){return o.default}}),t.GEOLOCATION_FORMAT=t.DELETED_OPTION_TIPS=t.DELETED_OPTION_BACKGROUND_COLOR=t.DEFAULT_NUMBER_FORMAT=void 0;var o=r(n(54965));t.GEOLOCATION_FORMAT={LNG_LAT:"lng_lat",COUNTRY_REGION:"country_region",PROVINCE:"province",PROVINCE_CITY:"province_city",PROVINCE_CITY_DISTRICT:"province_city_district",MAP_SELECTION:"map_selection"},t.DEFAULT_NUMBER_FORMAT="number",t.DELETED_OPTION_BACKGROUND_COLOR="#eaeaea",t.DELETED_OPTION_TIPS="Deleted_option"},54965:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default={DEFAULT:"default",TEXT:"text",CREATOR:"creator",CTIME:"ctime",LAST_MODIFIER:"last-modifier",MTIME:"mtime",FILE_NAME:"file-name",CHECKBOX:"checkbox",COLLABORATOR:"collaborator",DATE:"date",LONG_TEXT:"long-text",SINGLE_SELECT:"single-select",MULTIPLE_SELECT:"multiple-select",NUMBER:"number",GEOLOCATION:"geolocation",RATE:"rate"}},18142:function(e,t,n){"use strict";var r=n(24994).default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=r(n(9950)),a=r(n(35349));n(70238);t.default=function(e){var t=e.callBack,n=e.footerName,r=e.className,i=e.addIconClassName,l=e.hideIcon,s=e.style;return o.default.createElement("div",{className:"sf-metadata-ui add-item-btn ".concat(r||""),style:s,onClick:function(e){t(e)}},!l&&o.default.createElement(a.default,{iconName:"add-table",className:i}),o.default.createElement("span",{className:"text-truncate"},n))}},55859:function(e,t,n){"use strict";var r=n(6305).default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=r(n(9950)),a=n(48843),i=n(56265),l=function(e){var t=e.target,n=e.innerClassName,r=e.className,l=e.hideArrow,s=e.modifiers,u=e.placement,c=e.canHide,d=e.hide,f=e.hideWithEsc,p=e.children,m=(0,o.useRef)(null),h=(0,o.useCallback)((function(e){c&&m.current&&e&&-1===(0,i.getEventClassName)(e).indexOf("popover")&&!m.current.contains(e.target)&&d(e)}),[c,d]),v=(0,o.useCallback)((function(e){if(27===e.keyCode&&"function"===typeof f)e.preventDefault(),f();else if(13===e.keyCode){if(c)return;e.stopImmediatePropagation()}}),[c,f]),g=(0,o.useCallback)((function(e){e.preventDefault(),d(e)}),[d]),y=(0,o.useCallback)((function(e){e.stopPropagation()}),[]);return(0,o.useEffect)((function(){return document.addEventListener("click",h),document.addEventListener("keydown",v),window.addEventListener("popstate",g),function(){document.removeEventListener("click",h),document.removeEventListener("keydown",v),window.removeEventListener("popstate",g)}}),[h,v,g]),o.default.createElement(a.Popover,{placement:u,isOpen:!0,target:t,fade:!1,hideArrow:l,innerClassName:n,className:r,modifiers:s},o.default.createElement("div",{ref:m,onClick:y},p))};l.defaultProps={placement:"bottom-start",hideArrow:!0,canHide:!0};t.default=l},71082:function(e,t,n){"use strict";var r=n(17383).default,o=n(34579).default,a=n(18336).default,i=n(29511).default,l=n(24994).default,s=n(6305).default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var u=s(n(9950)),c=l(n(86615)),d=l(n(35349)),f=l(n(20536)),p=l(n(90665)),m=n(56265);n(86954);var h=function(e){function t(e){var n;return r(this,t),(n=a(this,t,[e])).onSelectToggle=function(e){e.preventDefault(),n.state.isShowSelectOptions&&e.stopPropagation();var t=(0,m.getEventClassName)(e);n.props.readOnly||t.indexOf("option-search-control")>-1||"sf-metadata-option-group-search"===t||""!==e.target.value&&n.setState({isShowSelectOptions:!n.state.isShowSelectOptions})},n.onClick=function(e){n.props.isShowSelected&&e.target.className.includes("icon-fork-number")||n.selector.contains(e.target)||n.closeSelect()},n.closeSelect=function(){n.setState({isShowSelectOptions:!1})},n.getSelectedOptionTop=function(){return n.selector?n.selector.getBoundingClientRect().height:38},n.getFilterOptions=function(e){var t=n.props,r=t.options;if(!t.searchable)return r||[];var o=e.trim().toLowerCase();return o?r.filter((function(e){var t=e.value,n=e.name;return"string"===typeof n?n.toLowerCase().indexOf(o)>-1:"object"===typeof t&&(t.column?t.column.name.toLowerCase().indexOf(o)>-1:t.name?t.name.toLowerCase().indexOf(o)>-1:t.columnOption&&t.columnOption.name.toLowerCase().indexOf(o)>-1)})):r||[]},n.renderDropDownIcon=function(){var e=n.props,t=e.readOnly,r=e.component;if(!t){var o=(r||{}).DropDownIcon;return o?u.default.createElement("div",{className:"custom-select-dropdown-icon"},o):u.default.createElement(d.default,{iconName:"drop-down"})}},n.state={isShowSelectOptions:!1},n}return i(t,e),o(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.className,r=t.value,o=t.options,a=t.placeholder,i=t.searchable,l=t.searchPlaceholder,s=t.noOptionsPlaceholder,d=t.readOnly,m=t.isInModal,h=t.addOptionAble,v=t.component;return u.default.createElement("div",{ref:function(t){return e.selector=t},className:(0,c.default)("sf-metadata-select custom-select",{focus:this.state.isShowSelectOptions},{disabled:d},n),onClick:this.onSelectToggle},u.default.createElement("div",{className:"selected-option"},r&&r.label?u.default.createElement("span",{className:"selected-option-show"},r.label):u.default.createElement("span",{className:"select-placeholder"},a),this.renderDropDownIcon()),this.state.isShowSelectOptions&&!m&&u.default.createElement(f.default,{value:r,addOptionAble:h,component:v,isShowSelected:this.props.isShowSelected,top:this.getSelectedOptionTop(),options:o,onSelectOption:this.props.onSelectOption,searchable:i,searchPlaceholder:l,noOptionsPlaceholder:s,onClickOutside:this.onClick,closeSelect:this.closeSelect,getFilterOptions:this.getFilterOptions,supportMultipleSelect:this.props.supportMultipleSelect}),this.state.isShowSelectOptions&&m&&u.default.createElement(p.default,null,u.default.createElement(f.default,{className:n,value:r,addOptionAble:h,component:v,isShowSelected:this.props.isShowSelected,position:this.selector.getBoundingClientRect(),isInModal:m,top:this.getSelectedOptionTop(),options:o,onSelectOption:this.props.onSelectOption,searchable:i,searchPlaceholder:l,noOptionsPlaceholder:s,onClickOutside:this.onClick,closeSelect:this.closeSelect,getFilterOptions:this.getFilterOptions,supportMultipleSelect:this.props.supportMultipleSelect})))}}])}(u.Component);t.default=h},62088:function(e,t,n){"use strict";var r=n(85715).default,o=n(24994).default,a=n(6305).default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(9950)),l=n(56265),s=o(n(783));t.default=function(e){var t=e.value,n=e.mediaUrl,o=e.api,a=e.collaborators,u=e.collaboratorsCache,c=e.updateCollaboratorsCache,d=(0,i.useState)(null),f=r(d,2),p=f[0],m=f[1];return(0,i.useEffect)((function(){var e=!0;if(!t)return e&&m(null),function(){return e=!1};var r=a&&a.find((function(e){return e.email===t}));if(r)return e&&m(r),function(){return e=!1};var i="".concat(n,"/avatars/default.png");return"anonymous"===t?(r={name:"anonymous",avatar_url:i},e&&m(r),function(){return e=!1}):(r=u[t])?(e&&m(r),function(){return e=!1}):(0,l.isValidEmail)(t)?(o&&o(t,(function(n){r=n[t],c(r),e&&m(r)})),function(){return e=!1}):(c(r={email:t,name:t,avatar_url:i}),e&&m(r),function(){return e=!1})}),[]),p?i.default.createElement(s.default,{collaborator:p}):null}},25217:function(e,t,n){"use strict";var r=n(24994).default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=r(n(9950)),a=r(n(86615)),i=r(n(35349));n(95399);t.default=function(e){var t=e.value,n=e.className,r=e.children;return t?o.default.createElement("div",{className:(0,a.default)("sf-metadata-ui cell-formatter-container checkbox-formatter",n)},o.default.createElement(i.default,{iconName:"check-mark"})):r}},783:function(e,t,n){"use strict";var r=n(24994).default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=r(n(9950)),a=r(n(35349));n(41341);t.default=function(e){var t=e.enableDelete,n=void 0!==t&&t,r=e.collaborator,i=e.onDelete;return r?o.default.createElement("div",{className:"sf-metadata-ui collaborator-item"},o.default.createElement("span",{className:"collaborator-avatar"},o.default.createElement("img",{className:"collaborator-avatar-icon",alt:r.name,src:r.avatar_url})),o.default.createElement("span",{className:"collaborator-name"},r.name),n&&o.default.createElement("span",{className:"collaborator-remove",onClick:i},o.default.createElement(a.default,{iconName:"delete"}))):null}},80199:function(e,t,n){"use strict";var r=n(91847).default,o=["value","className","children"],a=n(24994).default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(9950)),l=a(n(86615)),s=a(n(62088));n(91173);t.default=function(e){var t=e.value,n=e.className,a=e.children,u=r(e,o);return Array.isArray(t)&&0!==t.length?0===t.filter((function(e){return e})).length?a||null:i.default.createElement("div",{className:(0,l.default)("sf-metadata-ui cell-formatter-container collaborators-formatter",n)},t.map((function(e){return i.default.createElement(s.default,Object.assign({key:e},u,{value:e}))}))):a||null}},44314:function(e,t,n){"use strict";var r=n(85715).default,o=n(24994).default,a=n(6305).default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(9950)),l=o(n(86615)),s=n(56265),u=o(n(783));t.default=function(e){var t=e.value,n=e.mediaUrl,o=e.className,a=e.api,c=e.collaborators,d=void 0===c?[]:c,f=e.collaboratorsCache,p=void 0===f?{}:f,m=e.updateCollaboratorsCache,h=e.children,v=(0,i.useState)(null),g=r(v,2),y=g[0],C=g[1];return(0,i.useEffect)((function(){var e=!0;if(!t)return e&&C(null),function(){return e=!1};var r=d&&d.find((function(e){return e.email===t}));if(r)return e&&C(r),function(){return e=!1};var o="".concat(n,"/avatars/default.png");return"anonymous"===t?(r={name:"anonymous",avatar_url:o},e&&C(r),function(){return e=!1}):(r=p[t])?(e&&C(r),function(){return e=!1}):(0,s.isValidEmail)(t)?(a&&a(t,(function(n){r=n[t],Object.values(n).forEach((function(e){m&&m(e)})),e&&C(r)})),function(){return e=!1}):(r={email:t,name:t,avatar_url:o},m&&m(r),e&&C(r),function(){return e=!1})}),[]),y?i.default.createElement("div",{className:(0,l.default)("sf-metadata-ui cell-formatter-container creator-formatter",o)},i.default.createElement(u.default,{collaborator:y})):h||null}},70794:function(e,t,n){"use strict";var r=n(24994).default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=r(n(9950)),a=r(n(86615)),i=r(n(84583));t.default=function(e){var t=e.value,n=e.className,r=e.children;if(!t)return r||null;var l=(0,i.default)(t).format("YYYY-MM-DD HH:mm:ss");return o.default.createElement("div",{className:(0,a.default)("sf-metadata-ui cell-formatter-container ctime-formatter",n)},l)}},96388:function(e,t,n){"use strict";var r=n(24994).default,o=n(6305).default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=o(n(9950)),i=r(n(86615)),l=n(39856);n(35816);t.default=function(e){var t=e.value,n=e.format,r=e.className,o=e.children,s=(0,a.useMemo)((function(){return(0,l.getDateDisplayString)(t,n)}),[t,n]);return s?a.default.createElement("div",{className:(0,i.default)("sf-metadata-ui cell-formatter-container date-formatter",r)},s):o||null}},39276:function(e,t,n){"use strict";var r=n(24994).default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=r(n(9950));t.default=function(e){var t=e.fieldType,n=e.placeholder;return o.default.createElement("span",{className:"sf-metadata-record-cell-empty sf-metadata-record-".concat(t,"-cell-empty"),placeholder:n})}},78003:function(e,t,n){"use strict";var r=n(24994).default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=r(n(9950)),a=r(n(86615));n(22257);t.default=function(e){var t=e.value,n=e.isDir,r=e.className,i=e.children,l=e.getFolderIconUrl,s=e.getFileIconUrl;return t?o.default.createElement("div",{className:(0,a.default)("sf-metadata-ui cell-formatter-container file-name-formatter",r)},o.default.createElement("img",{className:"sf-metadata-file-icon",src:n?l():s(t),height:"24",alt:""}),o.default.createElement("span",{className:"sf-metadata-file-name"},t)):i||null}},57399:function(e,t,n){"use strict";var r=n(91847).default,o=["field","value","isSample","queryUserAPI","emptyTip"],a=n(24994).default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(9950)),l=n(57425),s=a(n(12863)),u=a(n(44314)),c=a(n(70794)),d=a(n(39276)),f=a(n(78003)),p=a(n(96388)),m=a(n(34041)),h=a(n(80199)),v=a(n(25217)),g=a(n(93448)),y=a(n(12532)),C=a(n(98801)),E=a(n(82717));n(16525);var _=a(n(73002));t.default=function(e){var t=e.field,n=e.value,a=(e.isSample,e.queryUserAPI),A=e.emptyTip,b=r(e,o),S=(t||{}).type,w="sf-metadata-".concat(S,"-formatter");switch(S){case l.CellType.TEXT:return i.default.createElement(s.default,{value:n,className:w},i.default.createElement(d.default,{fieldType:S,placeholder:A}));case l.CellType.CTIME:case l.CellType.MTIME:return i.default.createElement(c.default,{value:n,className:w},i.default.createElement(d.default,{fieldType:S,placeholder:A}));case l.CellType.CREATOR:case l.CellType.LAST_MODIFIER:return i.default.createElement(u.default,Object.assign({value:n,className:w,api:a},b),i.default.createElement(d.default,{fieldType:S,placeholder:A}));case l.CellType.FILE_NAME:return i.default.createElement(f.default,Object.assign({value:n,className:w},b),i.default.createElement(d.default,{fieldType:S,placeholder:A}));case l.CellType.DATE:var O;return i.default.createElement(p.default,{value:n,format:null===(O=t.data)||void 0===O?void 0:O.format,className:w},i.default.createElement(d.default,{fieldType:S,placeholder:A}));case l.CellType.SINGLE_SELECT:var R;return i.default.createElement(m.default,{value:n,options:(null===(R=t.data)||void 0===R?void 0:R.options)||[],className:w},i.default.createElement(d.default,{fieldType:S,placeholder:A}));case l.CellType.MULTIPLE_SELECT:var T;return i.default.createElement(E.default,{value:n,options:(null===(T=t.data)||void 0===T?void 0:T.options)||[],className:w},i.default.createElement(d.default,{fieldType:S,placeholder:A}));case l.CellType.COLLABORATOR:return i.default.createElement(h.default,Object.assign({value:n,className:w,api:a},b),i.default.createElement(d.default,{fieldType:S,placeholder:A}));case l.CellType.CHECKBOX:return i.default.createElement(v.default,{value:n,className:w},i.default.createElement(d.default,{fieldType:S,placeholder:A}));case l.CellType.GEOLOCATION:var x;return i.default.createElement(g.default,Object.assign({},b,{format:null===(x=t.data)||void 0===x?void 0:x.geo_format,value:n,className:w}),i.default.createElement(d.default,{fieldType:S,placeholder:A}));case l.CellType.LONG_TEXT:return i.default.createElement(y.default,Object.assign({},b,{value:n,className:w}),i.default.createElement(d.default,{fieldType:S,placeholder:A}));case l.CellType.NUMBER:return i.default.createElement(C.default,{value:n,formats:null===t||void 0===t?void 0:t.data,className:w},i.default.createElement(d.default,{fieldType:S,placeholder:A}));case l.CellType.RATE:return i.default.createElement(_.default,{value:n,data:null===t||void 0===t?void 0:t.data,className:w},i.default.createElement(d.default,{fieldType:S,placeholder:A}));default:return i.default.createElement(s.default,{value:n,className:w},i.default.createElement(d.default,{fieldType:S,placeholder:A}))}}},93448:function(e,t,n){"use strict";var r=n(24994).default,o=n(6305).default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=o(n(9950)),i=r(n(86615)),l=n(39856);t.default=function(e){var t=e.isBaiduMap,n=e.format,r=e.value,o=e.children,s=e.className,u=e.hyphen,c=void 0===u?" ":u,d=(0,a.useMemo)((function(){return"object"!==typeof r?null:(0,l.getGeolocationDisplayString)(r,{geo_format:n},{isBaiduMap:t,hyphen:c})}),[r,n,t,c]);return d?a.default.createElement("div",{className:(0,i.default)("sf-metadata-ui cell-formatter-container geolocation-formatter",s)},d):o||null}},50502:function(e,t,n){"use strict";var r=n(24994).default;Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"CTimeFormatter",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(t,"CheckboxFormatter",{enumerable:!0,get:function(){return f.default}}),Object.defineProperty(t,"CollaboratorFormatter",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(t,"CollaboratorsFormatter",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(t,"CreatorFormatter",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(t,"DateFormatter",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(t,"GeolocationFormatter",{enumerable:!0,get:function(){return p.default}}),Object.defineProperty(t,"LongTextFormatter",{enumerable:!0,get:function(){return m.default}}),Object.defineProperty(t,"MultipleSelectFormatter",{enumerable:!0,get:function(){return v.default}}),Object.defineProperty(t,"NumberFormatter",{enumerable:!0,get:function(){return h.default}}),Object.defineProperty(t,"RateFormatter",{enumerable:!0,get:function(){return g.default}}),Object.defineProperty(t,"SingleSelectFormatter",{enumerable:!0,get:function(){return d.default}}),Object.defineProperty(t,"TextFormatter",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(t,"URLFormatter",{enumerable:!0,get:function(){return u.default}}),t.default=void 0;var o=r(n(783)),a=r(n(80199)),i=r(n(44314)),l=r(n(70794)),s=r(n(12863)),u=r(n(43007)),c=r(n(96388)),d=r(n(34041)),f=r(n(25217)),p=r(n(93448)),m=r(n(12532)),h=r(n(98801)),v=r(n(82717)),g=r(n(73002)),y=r(n(57399));n(41186);t.default=y.default},12532:function(e,t,n){"use strict";var r=n(85715).default,o=n(24994).default,a=n(6305).default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(9950)),l=o(n(86615)),s=n(92203),u=o(n(35349)),c=o(n(90665)),d=o(n(21724));n(60784);t.default=function(e){var t=e.value,n=e.className,o=e.previewClassName,a=e.children,f=(0,i.useState)(!1),p=r(f,2),m=p[0],h=p[1],v=(0,i.useRef)(null),g=(0,i.useRef)({}),y=(0,i.useRef)(null),C=(0,i.useRef)(null),E=(0,i.useMemo)((function(){if(!t)return null;var e=typeof t;if("object"===e)return t;if("string"===e){var n=(0,s.getPreviewContent)(t),r=n.previewText,o=n.images,a=n.links,i=n.checklist;return{text:t,preview:r,images:o,links:a,checklist:i}}return null}),[t]);(0,i.useEffect)((function(){return function(){y.current&&clearTimeout(y.current),C.current&&clearTimeout(C.current)}}),[]);var _=(0,i.useCallback)((function(){if(!E)return null;var e=E.links;return Array.isArray(e)&&0!==e.length?i.default.createElement("span",{className:"sf-metadata-long-text-links"},i.default.createElement(u.default,{iconName:"url"}),e.length):null}),[E]),A=(0,i.useCallback)((function(){if(!E)return null;var e=E.checklist;return e&&0!==e.total?i.default.createElement("span",{className:(0,l.default)("sf-metadata-long-text-check-list",{completed:e.completed===e.total})},i.default.createElement(u.default,{iconName:"check-square-solid"}),"".concat(e.completed,"/").concat(e.total)):null}),[E]),b=(0,i.useCallback)((function(){if(!E)return null;var e=E.images;return Array.isArray(e)&&0!==e.length?i.default.createElement("span",{className:"sf-metadata-long-text-images"},i.default.createElement("img",{src:e[0],alt:""}),i.default.createElement("i",{className:"sf-metadata-image-number"},e.length>1?"+"+e.length:null)):null}),[E]),S=(0,i.useCallback)((function(){return E?E.preview:null}),[E]),w=(0,i.useCallback)((function(){if(document.getElementById("modal-wrapper")&&(y.current&&clearTimeout(y.current),y.current=null,E))return m?(C.current&&clearTimeout(C.current),void(C.current=null)):void(y.current=setTimeout((function(){g.current=v.current?v.current.getBoundingClientRect():{},h(!0)}),2e3))}),[m,E,y]),O=(0,i.useCallback)((function(){y.current&&clearTimeout(y.current),y.current=null,C.current=setTimeout((function(){m&&h(!1)}),2e3)}),[m,y]),R=(0,i.useCallback)((function(){C.current&&clearTimeout(C.current),C.current=null}),[C]),T=(0,i.useCallback)((function(){m&&h(!1)}),[m]);return E?i.default.createElement("div",{className:(0,l.default)("sf-metadata-ui cell-formatter-container long-text-formatter",n),onMouseEnter:w,onMouseLeave:O,ref:v},_(),A(),b(),S(),m&&i.default.createElement(c.default,null,i.default.createElement(d.default,{className:o,value:E,targetStyle:g.current,onMouseEnter:R,onMouseLeave:T}))):a||null}},21724:function(e,t,n){"use strict";var r=n(85715).default,o=n(24994).default,a=n(6305).default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(9950)),l=o(n(86615)),s=o(n(13608));n(71188);var u=i.default.memo((function(e){var t=e.value,n=e.className,o=e.targetStyle,a=e.onMouseEnter,u=e.onMouseLeave,c=(0,i.useRef)(null),d=(0,i.useState)({height:450,opacity:0}),f=r(d,2),p=f[0],m=f[1];(0,i.useEffect)((function(){setTimeout((function(){var e;if(c.current){var n=(null===t||void 0===t||null===(e=t.images)||void 0===e?void 0:e.length)>=2,r=c.current.getBoundingClientRect().height;r=n?450:r,m({height:Math.min(r,450),opacity:1})}}),10)}),[]);var h=(0,i.useCallback)((function(e){a&&a(e)}),[a]),v=(0,i.useCallback)((function(e){u&&u(e)}),[u]),g=(0,i.useCallback)((function(e){e.stopPropagation(),e.nativeEvent.stopImmediatePropagation()}),[]),y=(0,i.useMemo)((function(){var e=o.left,t=o.top,n=p.height,r=p.opacity;return e=e-520>0?e-520-12:0,(t-=6)+n>window.innerHeight&&(t=t-n>0?t-n:0),{left:e,top:t,opacity:r}}),[o,p]),C=t?t.text:"";return i.default.createElement("div",{className:(0,l.default)("sf-metadata-long-text-preview",n),style:y,ref:c,onMouseEnter:h,onMouseLeave:v,onClick:g},i.default.createElement("div",{className:"sf-metadata-longtext-container sf-metadata-longtext-container-scroll"},i.default.createElement(s.default,{value:C,showTOC:!1})))}));t.default=u},13608:function(e,t,n){"use strict";var r=n(24994).default,o=n(6305).default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=o(n(9950)),i=n(92203),l=r(n(29447)),s=a.default.memo((function(e){var t=e.value,n=e.showTOC;return(0,a.useMemo)((function(){if(!window.chrome)return!1;var e=navigator.appVersion.split(" "),t=e.findIndex((function(e){return e.indexOf("Chrome")>=0}));if(-1===t)return!1;var n=e[t];return!(53!==(n=parseInt(n.slice(n.indexOf("/")+1)))||!navigator.appVersion||!navigator.appVersion.includes("WindowsWechat"))}),[])?a.default.createElement(l.default,{value:t}):a.default.createElement(i.MarkdownViewer,{value:t,isShowOutline:n})}));t.default=s},29447:function(e,t,n){"use strict";var r=n(85715).default,o=n(6305).default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=o(n(9950)),i=n(92203);t.default=function(e){var t=e.value,n=(0,a.useState)(""),o=r(n,2),l=o[0],s=o[1];return(0,a.useEffect)((function(){i.processor.process(t).then((function(e){var t=String(e).replace(/<a /gi,'<a target="_blank" tabindex="-1"');s(t)}))}),[t]),a.default.createElement("div",{className:"sf-metadata-long-text-container article",dangerouslySetInnerHTML:{__html:l}})}},82717:function(e,t,n){"use strict";var r=n(41132).default,o=n(24994).default,a=n(6305).default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(9950)),l=o(n(86615)),s=o(n(24263)),u=n(57425),c=n(27399);n(77392);t.default=function(e){var t=e.value,n=e.options,o=e.fontSize,a=e.className,d=e.children,f=(0,i.useMemo)((function(){if(!Array.isArray(t)||0===t.length)return[];var e=n.filter((function(e){return t.includes(e.id)||t.includes(e.name)})),o=t.filter((function(e){return e&&!n.find((function(t){return t.id===e||t.name===e}))})).map((function(e){return{id:e,name:(0,c.gettext)(u.DELETED_OPTION_TIPS),color:u.DELETED_OPTION_BACKGROUND_COLOR}}));return[].concat(r(e),r(o))}),[n,t]);return 0===f.length?d||null:i.default.createElement("div",{className:(0,l.default)("sf-metadata-ui cell-formatter-container multiple-select-formatter",a)},f.map((function(e){return i.default.createElement(s.default,{key:e.id,option:e,fontSize:o})})))}},98801:function(e,t,n){"use strict";var r=n(24994).default,o=n(6305).default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=o(n(9950)),i=r(n(86615)),l=n(56265);t.default=function(e){var t=e.value,n=e.formats,r=e.className,o=e.children,s=(0,a.useMemo)((function(){return(0,l.getNumberDisplayString)(t,n)}),[t,n]);return s?a.default.createElement("div",{className:(0,i.default)("sf-metadata-ui cell-formatter-container text-formatter number-formatter",r)},s):o||null}},73002:function(e,t,n){"use strict";var r=n(24994).default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=r(n(9950)),a=r(n(86615)),i=r(n(35349));n(27770);t.default=function(e){var t=e.value,n=e.data,r=e.className,l=e.children;if(!t)return l||null;for(var s=n||{},u=s.max,c=void 0===u?5:u,d=s.color,f=void 0===d?"#e5e5e5":d,p=s.type,m=void 0===p?"rate":p,h=Math.min(c,t),v=[],g=0;g<h;g++)v.push(o.default.createElement("div",{className:"sf-metadata-rate-item",style:{fill:f||"#e5e5e5"},key:g},o.default.createElement(i.default,{iconName:m})));return o.default.createElement("div",{className:(0,a.default)("sf-metadata-ui cell-formatter-container rate-formatter",r)},v)}},24263:function(e,t,n){"use strict";var r=n(6305).default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=r(n(9950));n(61945);t.default=function(e){var t=e.option,n=e.fontSize,r=(0,o.useMemo)((function(){return{display:"inline-block",padding:"0px 10px",height:"20px",lineHeight:"20px",textAlign:"center",borderRadius:"10px",maxWidth:"250px",fontSize:n||13,backgroundColor:t.color,color:t.textColor||null}}),[t,n]);return o.default.createElement("div",{className:"sf-metadata-ui-select-option text-truncate",style:r,title:t.name},t.name)}},34041:function(e,t,n){"use strict";var r=n(24994).default,o=n(6305).default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=o(n(9950)),i=r(n(86615)),l=r(n(24263));n(3627);t.default=function(e){var t=e.value,n=e.options,r=e.fontSize,o=e.className,s=e.children,u=(0,a.useMemo)((function(){return n.find((function(e){return e.id===t||e.name===t}))}),[n,t]);return u?a.default.createElement("div",{className:(0,i.default)("sf-metadata-ui cell-formatter-container single-select-formatter",o)},a.default.createElement(l.default,{option:u,fontSize:r})):s||null}},12863:function(e,t,n){"use strict";var r=n(24994).default,o=n(6305).default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=o(n(9950)),i=r(n(86615)),l=n(56265);t.default=function(e){var t=e.value,n=e.className,r=e.children,o=(0,a.useMemo)((function(){return"number"===typeof t?t+"":"object"===typeof t?null:"Boolean"===(0,l.getType)(t)?t+"":t}),[t]);return o?a.default.createElement("div",{className:(0,i.default)("sf-metadata-ui cell-formatter-container text-formatter",n)},o):r||null}},43007:function(e,t,n){"use strict";var r=n(24994).default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=r(n(9950)),a=r(n(86615));n(12081);t.default=function(e){var t=e.value,n=e.className,r=e.children;return t?o.default.createElement("div",{className:(0,a.default)("sf-metadata-ui cell-formatter-container url-formatter",n)},t):r||null}},92544:function(e,t,n){"use strict";var r=n(91847).default,o=["size","className","iconClassName","iconName","iconStyle","onClick"],a=n(24994).default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(9950)),l=a(n(86615)),s=a(n(35349));n(89156);t.default=function(e){var t=e.size,n=void 0===t?20:t,a=e.className,u=e.iconClassName,c=e.iconName,d=e.iconStyle,f=e.onClick,p=r(e,o);return i.default.createElement("div",Object.assign({className:(0,l.default)("sf-metadata-icon-btn","sf-metadata-icon-btn-".concat(n),a),onClick:f||function(){}},p),i.default.createElement(s.default,{iconName:c,className:u,style:d}))}},35349:function(e,t,n){"use strict";var r=n(24994).default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=r(n(9950)),a=r(n(86615));n(83695);t.default=function(e){var t=e.className,n=e.iconName,r=e.style;return o.default.createElement("svg",{className:(0,a.default)("sf-metadata-icon","sf-metadata-icon-".concat(n),t),style:r},o.default.createElement("use",{xlinkHref:"#".concat(n)}))}},71791:function(e,t,n){"use strict";var r=n(6305).default,o=n(24994).default;Object.defineProperty(t,"Du",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(t,"ij",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(t,"NC",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(t,"Rw",{enumerable:!0,get:function(){return E.default}}),Object.defineProperty(t,"Cg",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(t,"ZA",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(t,"In",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(t,"Oi",{enumerable:!0,get:function(){return d.default}}),Object.defineProperty(t,"Rh",{enumerable:!0,get:function(){return f.default}}),Object.defineProperty(t,"qz",{enumerable:!0,get:function(){return u.LongTextFormatter}}),Object.defineProperty(t,"Q$",{enumerable:!0,get:function(){return g.default}}),Object.defineProperty(t,"DO",{enumerable:!0,get:function(){return h.default}}),Object.defineProperty(t,"US",{enumerable:!0,get:function(){return C.SfCalendar}}),Object.defineProperty(t,"sv",{enumerable:!0,get:function(){return C.SfFilterCalendar}}),Object.defineProperty(t,"dO",{enumerable:!0,get:function(){return v.default}}),n(32514);var a=o(n(13677)),i=o(n(92178)),l=o(n(18142)),s=o(n(71082)),u=r(n(50502)),c=o(n(35349)),d=o(n(92544)),f=o(n(26984)),p=o(n(2966)),m=o(n(44798)),h=o(n(29173)),v=o(n(55192)),g=o(n(90665)),y=o(n(89659)),C=n(49046),E=o(n(55859))},46290:function(e,t,n){"use strict";var r=n(17383).default,o=n(34579).default,a=n(6305).default,i=n(24994).default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=i(n(9950)),s=i(n(10865)),u=i(n(742)),c=i(n(63785)),d=i(n(10949)),f=a(n(66602)),p=i(n(83163));if(!String.prototype.defaultMessage){var m=function(e){return this||e||""};String.prototype.defaultMessage=m,String.prototype.d=m}var h=function(){return o((function e(){r(this,e),this.options={currentLocale:null,locales:{},warningHandler:function(){var e;(e=console).warn.apply(e,arguments)},escapeHtml:!0,fallbackLocale:null,debug:!1,dataKey:"data-i18n-key"}}),[{key:"_getFormattedMessage",value:function(e,t){if(this.options.intlGetHook)try{this.options.intlGetHook(e,this.options.currentLocale)}catch(m){console.log("intl get hook error: ",m)}(0,d.default)(e,"key is required");var n=this.options,r=n.locales,o=n.currentLocale,a=n.formats;if(!r||!r[o]){var i='react-intl-universal locales data "'.concat(o,'" not exists.');return o||(i+=" More info: https://github.com/alibaba/react-intl-universal/issues/144#issuecomment-1345193138"),this.options.warningHandler(i),""}var l=this.getDescendantProp(r[o],e);if(null==l){if(!this.options.fallbackLocale)return this.options.warningHandler('react-intl-universal key "'.concat(e,'" not defined in ').concat(o)),"";if(null==(l=this.getDescendantProp(r[this.options.fallbackLocale],e)))return this.options.warningHandler('react-intl-universal key "'.concat(e,'" not defined in ').concat(o," or the fallback locale, ").concat(this.options.fallbackLocale)),""}if(t)for(var c in t=Object.assign({},t)){var f=t[c];!0===this.options.escapeHtml&&("string"===typeof f||f instanceof String)&&f.indexOf("<")>=0&&(f=(0,u.default)(f)),t[c]=f}try{var p;if(t)p=new s.default(l,o,a).format(t);else p=l;return p}catch(h){return this.options.warningHandler("react-intl-universal format message failed for key='".concat(e,"'."),h.message),l}}},{key:"get",value:function(e,t){var n=this._getFormattedMessage(e,t);return this.options.debug?this._getSpanElementMessage(e,n):n}},{key:"getHTML",value:function(e,t){var n=this._getFormattedMessage(e,t);return n?this._getSpanElementMessage(e,n):""}},{key:"formatMessage",value:function(e,t){var n=e.id,r=e.defaultMessage;return this.get(n,t).defaultMessage(r)}},{key:"formatHTMLMessage",value:function(e,t){var n=e.id,r=e.defaultMessage;return this.getHTML(n,t).defaultMessage(r)}},{key:"determineLocale",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.getLocaleFromURL(e)||this.getLocaleFromCookie(e)||this.getLocaleFromLocalStorage(e)||this.getLocaleFromBrowser()}},{key:"init",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,d.default)(e.currentLocale,"options.currentLocale is required"),(0,d.default)(e.locales,"options.locales is required"),Object.assign(this.options,e),this.options.formats=Object.assign({},this.options.formats,f.defaultFormats),new Promise((function(e,t){e()}))}},{key:"getInitOptions",value:function(){return this.options}},{key:"load",value:function(e){(0,p.default)(this.options.locales,e)}},{key:"getLocaleFromCookie",value:function(e){var t=e.cookieLocaleKey;if(t){var n=c.default.parse(document.cookie);return n&&n[t]}}},{key:"getLocaleFromLocalStorage",value:function(e){var t=e.localStorageLocaleKey;if(t&&window.localStorage)return localStorage.getItem(t)}},{key:"getLocaleFromURL",value:function(e){var t=e.urlLocaleKey;if(t){var n=window.location.search.split("?");if(n.length>=2){var r=new URLSearchParams(n[1]);if(r.has(t))return r.get(t)}}}},{key:"getDescendantProp",value:function(e,t){return e[t]?e[t]:t.split(".").reduce((function(e,t){return void 0!==e?e[t]:e}),e)}},{key:"getLocaleFromBrowser",value:function(){return navigator.language||navigator.userLanguage}},{key:"_getSpanElementMessage",value:function(e,t){var n={dangerouslySetInnerHTML:{__html:t}};this.options.debug&&(n[this.options.dataKey]=e);var r=l.default.createElement("span",n),o=function(){return r};return Object.assign({defaultMessage:o,d:o},r)}}])}();t.default=h},66602:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.defaultFormats=void 0;for(var n=["AFN","EUR","ALL","DZD","USD","AOA","XCD","ARS","AMD","AWG","AUD","AZN","BSD","BHD","BDT","BBD","BYN","BZD","XOF","BMD","INR","BTN","BOB","BOV","BAM","BWP","NOK","BRL","BND","BGN","BIF","CVE","KHR","XAF","CAD","KYD","CLP","CLF","CNY","COP","COU","KMF","CDF","NZD","CRC","HRK","CUP","CUC","ANG","CZK","DKK","DJF","DOP","EGP","SVC","ERN","ETB","FKP","FJD","XPF","GMD","GEL","GHS","GIP","GTQ","GBP","GNF","GYD","HTG","HNL","HKD","HUF","ISK","IDR","XDR","IRR","IQD","ILS","JMD","JPY","JOD","KZT","KES","KPW","KRW","KWD","KGS","LAK","LBP","LSL","ZAR","LRD","LYD","CHF","MOP","MKD","MGA","MWK","MYR","MVR","MRO","MUR","XUA","MXN","MXV","MDL","MNT","MAD","MZN","MMK","NAD","NPR","NIO","NGN","OMR","PKR","PAB","PGK","PYG","PEN","PHP","PLN","QAR","RON","RUB","RWF","SHP","WST","STD","SAR","RSD","SCR","SLL","SGD","XSU","SBD","SOS","SSP","LKR","SDG","SRD","SZL","SEK","CHE","CHW","SYP","TWD","TJS","TZS","THB","TOP","TTD","TND","TRY","TMT","UGX","UAH","AED","USN","UYU","UYI","UZS","VUV","VEF","VND","YER","ZMW","ZWL","XBA","XBB","XBC","XBD","XTS","XXX","XAU","XPD","XPT","XAG"],r={},o=0;o<n.length;o++)r[n[o]]={style:"currency",currency:n[o]};t.defaultFormats={number:r}},5799:function(e,t,n){"use strict";var r=n(24994).default;Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"ReactIntlUniversal",{enumerable:!0,get:function(){return o.default}}),t.load=t.init=t.getLocaleFromURL=t.getLocaleFromLocalStorage=t.getLocaleFromCookie=t.getLocaleFromBrowser=t.getInitOptions=t.getHTML=t.getDescendantProp=t.get=t.formatMessage=t.formatHTMLMessage=t.determineLocale=t.default=void 0;var o=r(n(46290)),a=t.default=new o.default;a.ReactIntlUniversal=o.default;t.get=a.get.bind(a),t.getHTML=a.getHTML.bind(a),t.formatMessage=a.formatMessage.bind(a),t.formatHTMLMessage=a.formatHTMLMessage.bind(a),t.determineLocale=a.determineLocale.bind(a),t.init=a.init.bind(a),t.getInitOptions=a.getInitOptions.bind(a),t.load=a.load.bind(a),t.getLocaleFromCookie=a.getLocaleFromCookie.bind(a),t.getLocaleFromLocalStorage=a.getLocaleFromLocalStorage.bind(a),t.getLocaleFromURL=a.getLocaleFromURL.bind(a),t.getDescendantProp=a.getDescendantProp.bind(a),t.getLocaleFromBrowser=a.getLocaleFromBrowser.bind(a)},26984:function(e,t,n){"use strict";var r=n(24994).default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return o.default.createElement("span",{className:"sf-metadata-loading-tip sf-metadata-loading-icon"})};var o=r(n(9950));n(65544)},32514:function(e,t,n){"use strict";var r,o,a,i=n(24994).default,l=i(n(5799)),s=i(n(38572)),u=i(n(54788)),c=i(n(2587)),d=i(n(96791)),f=i(n(85086)),p=i(n(91647)),m=i(n(98765)),h={de:s.default,en:u.default,fr:c.default,"zh-cn":m.default,es:d.default,ru:f.default,pt:p.default},v=(null===(r=window)||void 0===r||null===(o=r.app)||void 0===o||null===(a=o.config)||void 0===a?void 0:a.lang)||"zh-cn";l.default.init({currentLocale:v,locales:h})},38572:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default={Deleted_option:"Die Option wurde gel\xf6scht."}},54788:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default={Deleted_option:"Deleted option"}},96791:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default={Deleted_option:"Opciones borradas"}},2587:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default={Deleted_option:"L'option a \xe9t\xe9 supprim\xe9e."}},91647:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default={Deleted_option:"op\xe7\xe3o exclu\xedda"}},85086:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default={deleted_option:"Deleted option"}},98765:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default={Deleted_option:"\u5df2\u5220\u9664\u7684\u6807\u7b7e"}},90665:function(e,t,n){"use strict";var r=n(17383).default,o=n(34579).default,a=n(18336).default,i=n(29511).default,l=n(24994).default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=l(n(9950)),u=l(n(17119)),c=document.getElementById("modal-wrapper"),d=function(e){function t(e){var n;return r(this,t),(n=a(this,t,[e])).el=document.createElement("div"),n}return i(t,e),o(t,[{key:"componentDidMount",value:function(){c.appendChild(this.el)}},{key:"componentWillUnmount",value:function(){c.removeChild(this.el)}},{key:"render",value:function(){return u.default.createPortal(this.props.children,this.el)}}])}(s.default.Component);t.default=d},2966:function(e,t,n){"use strict";var r=n(91847).default,o=["record","columns","openRecord"],a=n(24994).default,i=n(6305).default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=i(n(9950)),s=a(n(50502));n(58986);t.default=function(e){var t,n=e.record,a=e.columns,i=e.openRecord,u=r(e,o),c=(0,l.useCallback)((function(){i&&i(n)}),[n,i]);return l.default.createElement("div",{className:"sf-metadata-record",onClick:c},l.default.createElement("div",{className:"sf-metadata-record-container"},l.default.createElement("div",{className:"sf-metadata-record-header"},l.default.createElement("div",{className:"sf-metadata-record-cell sf-metadata-record-cell-name"},l.default.createElement(s.default,Object.assign({value:n[null===(t=a[0])||void 0===t?void 0:t.key],field:a[0]},u)))),l.default.createElement("div",{className:"sf-metadata-record-content"},a.slice(1).map((function(e){return l.default.createElement("div",{className:"sf-metadata-record-cell",key:e.key,style:{width:e.width||200}},l.default.createElement(s.default,Object.assign({isSample:!0,value:n[e.key],field:e},u)))})))))}},24910:function(e,t,n){"use strict";var r=n(24994).default,o=n(6305).default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=o(n(9950)),i=n(48843),l=r(n(92544)),s=r(n(35349));n(35174);t.default=function(e){var t=e.field,n=e.fieldIconConfig,r=t.type,o=t.name,u=t.description,c=t.key,d=(0,a.useRef)(null);return a.default.createElement(i.Col,{md:3,className:"d-flex sf-metadata-record-details-item-label"},a.default.createElement("div",{className:"d-flex justify-content-between"},a.default.createElement("div",{className:"field-description-section"},a.default.createElement("span",{className:"header-icon",id:"header-icon-".concat(c)},a.default.createElement(s.default,{iconName:n[r]})),a.default.createElement("span",{className:"field-description-section-field-name"},o||""),u&&a.default.createElement(a.default.Fragment,null,a.default.createElement(l.default,{ref:d,iconName:"description",className:"field-uneditable-tip ml-2"}),d.current&&a.default.createElement(i.UncontrolledTooltip,{target:d.current,fade:!1,placement:"right",modifiers:{preventOverflow:{boundariesElement:document.body}}},u)))))}},44798:function(e,t,n){"use strict";var r=n(85715).default,o=n(91847).default,a=["fields","record","onToggle","fieldIconConfig"],i=n(24994).default,l=n(6305).default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=l(n(9950)),u=n(48843),c=n(56265),d=i(n(13677)),f=i(n(24910)),p=i(n(50502)),m=i(n(92544));n(90562);t.default=function(e){var t=e.fields,n=e.record,i=e.onToggle,l=e.fieldIconConfig,h=o(e,a),v=(0,s.useState)(!0),g=r(v,2),y=g[0],C=g[1],E=(0,s.useState)(!0),_=r(E,2),A=_[0],b=_[1],S=(0,s.useRef)(null),w=(0,s.useMemo)((function(){return{width:"".concat(window.innerWidth-80,"px"),maxWidth:"".concat(window.innerWidth-80,"px"),marginLeft:"".concat(80,"px"),height:"".concat(100,"px"),marginRight:"".concat(80,"px"),marginTop:"30%",transition:"all .3s"}}),[]),O=(0,s.useMemo)((function(){return{width:800,maxWidth:800,marginLeft:(window.innerWidth-800)/2,height:"calc(100% - 56px)"}}),[]);(0,s.useEffect)((function(){setTimeout((function(){var e=S.current.firstChild,t=O.width,n=O.maxWidth,r=O.marginLeft,o=O.height;e.style.width="".concat(t,"px"),e.style.maxWidth="".concat(n,"px"),e.style.marginLeft="".concat(r,"px"),e.style.height=o,e.style.marginRight="unset",e.style.marginTop="28px",setTimeout((function(){C(!1),e.style.transition="none",b(!1)}),280)}),1)}),[]);var R=(0,s.useCallback)((function(){i()}),[i]),T=(0,s.useCallback)((function(e){var t=e.key,r=e.name;return s.default.createElement(p.default,Object.assign({field:e,value:t.startsWith("_")?n[t]:n[r]},h))}),[n,h]),x=(0,s.useCallback)((function(){return A?s.default.createElement(d.default,null):Array.isArray(t)&&0!==t.length?s.default.createElement(s.default.Fragment,null,t.map((function(e){return s.default.createElement("div",{className:"sf-metadata-record-details-item sf-metadata-record-details-item-field-".concat(e.type),key:e.key},s.default.createElement("div",{className:"pb-4 row"},s.default.createElement(f.default,{field:e,fieldIconConfig:l}),s.default.createElement(u.Col,{md:9,className:"d-flex align-items-center sf-metadata-record-details-item-col"},T(e))))}))):null}),[A,t,l,T]);return s.default.createElement(u.Modal,{isOpen:!0,toggle:R,className:"sf-metadata-record-details-dialog",style:y?w:O,zIndex:1048,contentClassName:"sf-metadata-record-details-content",modalClassName:"sf-metadata-record-details-modal",fade:!1,innerRef:S,keyboard:!1},!y&&s.default.createElement("div",{className:"sf-metadata-record-details"},s.default.createElement(u.ModalHeader,{close:s.default.createElement("div",{className:"header-close-list"},s.default.createElement(m.default,{iconName:"close",size:24,onClick:R}))},s.default.createElement("div",{className:"sf-metadata-record-details-left-btns"},s.default.createElement("div",{className:"sf-metadata-record-details-title text-truncate"},(0,c.gettext)("Details")))),s.default.createElement(u.ModalBody,{className:"sf-metadata-record-details-container"},x())))}},29173:function(e,t,n){"use strict";var r=n(17383).default,o=n(34579).default,a=n(18336).default,i=n(29511).default,l=n(24994).default,s=n(6305).default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var u=s(n(9950)),c=l(n(86615)),d=n(56265),f=function(e){function t(e){var n;return r(this,t),(n=a(this,t,[e])).onCompositionStart=function(){n.isInputtingChinese=!0},n.onChange=function(e){n.timer&&clearTimeout(n.timer);var t=n.props,r=t.onChange,o=t.wait,a=e.target.value;n.setState({searchValue:a||""},(function(){n.isInputtingChinese||(n.timer=setTimeout((function(){r&&r(n.state.searchValue.trim())}),o))}))},n.onCompositionEnd=function(e){n.isInputtingChinese=!1,n.onChange(e)},n.clearSearch=function(){var e=n.props.clearValue;n.setState({searchValue:""},(function(){e&&e()}))},n.setFocus=function(e){if(n.inputRef!==document.activeElement&&(n.inputRef.focus(),e)){var t=n.state.searchValue.length;n.inputRef.setSelectionRange(0,t)}},n.renderClear=function(){var e=n.props,t=e.isClearable,r=e.clearClassName,o=e.components,a=void 0===o?{}:o,i=n.state.searchValue;if(!t||!i)return null;var l=a.ClearIndicator;return u.default.isValidElement(l)?u.default.cloneElement(l,{clearValue:n.clearSearch}):(0,d.isFunction)(l)?u.default.createElement(l,{clearValue:n.clearSearch}):u.default.createElement("i",{className:(0,c.default)("search-text-clear input-icon-addon",r),onClick:n.clearSearch},"\xd7")},n.state={searchValue:e.value},n.isInputtingChinese=!1,n.timer=null,n.inputRef=null,n}return i(t,e),o(t,[{key:"UNSAFE_componentWillReceiveProps",value:function(e){e.value!==this.props.value&&this.setState({searchValue:e.value})}},{key:"componentWillUnmount",value:function(){this.timer&&clearTimeout(this.timer),this.timer=null,this.inputRef=null}},{key:"render",value:function(){var e=this,t=this.props,n=t.placeholder,r=t.autoFocus,o=t.className,a=t.onKeyDown,i=t.disabled,l=t.style,s=this.state.searchValue;return u.default.createElement(u.Fragment,null,u.default.createElement("input",{type:"text",value:s,className:(0,c.default)("form-control",o),onChange:this.onChange,autoFocus:r,placeholder:n,onCompositionStart:this.onCompositionStart,onCompositionEnd:this.onCompositionEnd,onKeyDown:a,disabled:i,style:l,ref:function(t){return e.inputRef=t}}),this.renderClear())}}])}(u.Component);f.defaultProps={wait:100,disabled:!1,value:""};t.default=f},59281:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default={LeftArrow:37,UpArrow:38,RightArrow:39,DownArrow:40,Enter:13,Tab:9,Escape:27,Esc:27}},20536:function(e,t,n){"use strict";var r=n(17383).default,o=n(34579).default,a=n(18336).default,i=n(29511).default,l=n(24994).default,s=n(6305).default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var u=s(n(9950)),c=l(n(86615)),d=l(n(89251)),f=l(n(29173)),p=l(n(59281)),m=l(n(92178));n(15623);var h=function(e){function t(e){var n;return r(this,t),(n=a(this,t,[e])).resetMenuStyle=function(){var e=n.props,t=e.isInModal,r=e.position,o=n.optionGroupRef.getBoundingClientRect(),a=o.top,i=o.height;if(t)r.y+r.height+i>window.innerHeight&&(n.optionGroupRef.style.top=r.y-i+"px"),n.optionGroupRef.style.opacity=1;else if(i+a>window.innerHeight){n.optionGroupRef.style.top=-1*(i+2)+"px"}},n.onHotKey=function(e){var t=e.keyCode;if(t===p.default.UpArrow)n.onPressUp();else if(t===p.default.DownArrow)n.onPressDown();else if(t===p.default.Enter){var r=n.filterOptions&&n.filterOptions[n.state.activeIndex];r&&(n.props.onSelectOption(r.value),n.props.supportMultipleSelect||n.props.closeSelect())}else t!==p.default.Tab&&t!==p.default.Escape||n.props.closeSelect()},n.onPressUp=function(){n.state.activeIndex>0&&n.setState({activeIndex:n.state.activeIndex-1},(function(){n.scrollContent()}))},n.onPressDown=function(){n.filterOptions&&n.state.activeIndex<n.filterOptions.length-1&&n.setState({activeIndex:n.state.activeIndex+1},(function(){n.scrollContent()}))},n.onMouseDown=function(e){n.props.isInModal&&(e.stopPropagation(),e.nativeEvent.stopImmediatePropagation())},n.scrollContent=function(){var e=n.optionGroupContentRef,t=e.offsetHeight,r=e.scrollTop;n.setState({disableHover:!0}),n.timer=setTimeout((function(){n.setState({disableHover:!1})}),500),32*n.state.activeIndex!==0?32*n.state.activeIndex<r?n.optionGroupContentRef.scrollTop=r-32:32*n.state.activeIndex>t+r&&(n.optionGroupContentRef.scrollTop=r+32):n.optionGroupContentRef.scrollTop=0},n.changeIndex=function(e){n.setState({activeIndex:e})},n.onChangeSearch=function(e){var t=e||"";t!==n.state.searchVal&&n.setState({searchVal:t,activeIndex:-1})},n.renderOptGroup=function(e){var t=n.props,r=t.noOptionsPlaceholder,o=t.onSelectOption;return n.filterOptions=n.props.getFilterOptions(e),0===n.filterOptions.length?u.default.createElement("div",{className:"none-search-result"},r):n.filterOptions.map((function(e,t){var r=e.value.column?e.value.column.key:t,a=n.state.activeIndex===t;return u.default.createElement(d.default,{key:r,index:t,isActive:a,value:e.value,onSelectOption:o,changeIndex:n.changeIndex,supportMultipleSelect:n.props.supportMultipleSelect,disableHover:n.state.disableHover},e.label)}))},n.state={searchVal:"",activeIndex:-1,disableHover:!1},n.filterOptions=null,n.timer=null,n}return i(t,e),o(t,[{key:"componentDidMount",value:function(){var e=this;window.addEventListener("keydown",this.onHotKey),setTimeout((function(){e.resetMenuStyle()}),1)}},{key:"componentWillUnmount",value:function(){this.filterOptions=null,this.timer&&clearTimeout(this.timer),window.removeEventListener("keydown",this.onHotKey)}},{key:"render",value:function(){var e=this,t=this.props,n=t.searchable,r=t.searchPlaceholder,o=t.top,a=t.left,i=t.minWidth,l=t.value,s=t.isShowSelected,d=t.isInModal,p=t.position,h=t.className,v=t.addOptionAble,g=(t.component||{}).AddOption,y=this.state.searchVal,C={top:o||0,left:a||0};return i&&(C={top:o||0,left:a||0,minWidth:i}),d&&(C={position:"fixed",left:p.x,top:p.y+p.height,minWidth:p.width,opacity:0}),u.default.createElement(m.default,{onClickOutside:this.props.onClickOutside},u.default.createElement("div",{className:(0,c.default)("sf-metadata-option-group",h?"sf-metadata-option-group-"+h:"",{"pt-0":s,"create-new-sf-metadata-option-group":v}),ref:function(t){return e.optionGroupRef=t},style:C,onMouseDown:this.onMouseDown},s&&u.default.createElement("div",{className:"editor-list-delete mb-2",onClick:function(e){return e.stopPropagation()}},l.label||""),n&&u.default.createElement("div",{className:"sf-metadata-option-group-search"},u.default.createElement(f.default,{className:"option-search-control",placeholder:r,onChange:this.onChangeSearch,autoFocus:!0})),u.default.createElement("div",{className:"sf-metadata-option-group-content",ref:function(t){return e.optionGroupContentRef=t}},this.renderOptGroup(y)),v&&g))}}])}(u.Component);t.default=h},89251:function(e,t,n){"use strict";var r=n(17383).default,o=n(34579).default,a=n(18336).default,i=n(29511).default,l=n(6305).default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=l(n(9950)),u=function(e){function t(){var e;return r(this,t),(e=a(this,t,arguments)).onSelectOption=function(t,n){e.props.supportMultipleSelect&&n.stopPropagation(),e.props.onSelectOption(t,n)},e.onMouseEnter=function(){e.props.disableHover||e.props.changeIndex(e.props.index)},e.onMouseLeave=function(){e.props.disableHover||e.props.changeIndex(-1)},e}return i(t,e),o(t,[{key:"render",value:function(){return s.default.createElement("div",{className:this.props.isActive?"sf-metadata-option sf-metadata-option-active":"sf-metadata-option",onClick:this.onSelectOption.bind(this,this.props.value),onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave},this.props.children)}}])}(s.Component);t.default=u},55192:function(e,t,n){"use strict";var r=n(24994).default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=r(n(9950));t.default=function(e){var t=e.onChange,n=e.checked,r=e.placeholder,a=e.disabled,i=e.switchClassName;return o.default.createElement("div",{className:"sf-metadata-switch position-relative ".concat(i||"")},o.default.createElement("label",{className:"custom-switch"},o.default.createElement("input",{className:"custom-switch-input",type:"checkbox",checked:n,onChange:t,name:"custom-switch-checkbox",disabled:a}),o.default.createElement("span",{className:"custom-switch-description text-truncate"},r),o.default.createElement("span",{className:"custom-switch-indicator"})))}},39856:function(e,t,n){"use strict";var r=n(24994).default;Object.defineProperty(t,"__esModule",{value:!0}),t.throttle=t.isValidEmail=t.isMac=t.isFunction=t.getType=t.getNumberDisplayString=t.getGeolocationDisplayString=t.getEventClassName=t.getDateDisplayString=t.debounce=void 0;var o=r(n(84583)),a=n(57425),i=n(97701),l=n(22724);t.debounce=function(e,t){var n=null;return function(){null!==n&&clearTimeout(n),n=setTimeout(e,t)}};t.throttle=function(e,t){var n=null,r=Date.now();return function(){var o=Date.now(),a=t-(o-r),i=arguments;clearTimeout(n),a<=0?(e.apply(this,i),r=Date.now()):n=setTimeout(e,a)}};t.isMac=function(){var e=navigator.platform;return"Mac68K"==e||"MacPPC"==e||"Macintosh"==e||"MacIntel"==e};t.getEventClassName=function(e){return e&&e.target&&e.target.getAttribute("class")||""};t.isValidEmail=function(e){return/^[A-Za-z0-9]+([-_.][A-Za-z0-9]+)*@([A-Za-z0-9]+[-.])+[A-Za-z0-9]{2,20}$/.test(e)};t.isFunction=function(e){return e&&"[object Function]"==={}.toString.call(e)};t.getType=function(e){return Object.prototype.toString.call(e).slice(8,-1)};t.getDateDisplayString=function(e,t){if(!e||"string"!==typeof e)return"";var n=(0,o.default)(e);if(!n.isValid())return e;switch(t){case"D/M/YYYY":case"DD/MM/YYYY":var r=n.format("YYYY-MM-DD").split("-");return"".concat(r[2],"/").concat(r[1],"/").concat(r[0]);case"D/M/YYYY HH:mm":case"DD/MM/YYYY HH:mm":var a=n.format("YYYY-MM-DD HH:mm").split(" "),i=a[0].split("-");return"".concat(i[2],"/").concat(i[1],"/").concat(i[0]," ").concat(a[1]);case"M/D/YYYY":return n.format("M/D/YYYY");case"M/D/YYYY HH:mm":return n.format("M/D/YYYY HH:mm");case"YYYY-MM-DD":default:return n.format("YYYY-MM-DD");case"YYYY-MM-DD HH:mm":return n.format("YYYY-MM-DD HH:mm");case"YYYY-MM-DD HH:mm:ss":return n.format("YYYY-MM-DD HH:mm:ss");case"DD.MM.YYYY":return n.format("DD.MM.YYYY");case"DD.MM.YYYY HH:mm":return n.format("DD.MM.YYYY HH:mm")}};t.getGeolocationDisplayString=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=(n.isBaiduMap,n.hyphen),o=void 0===r?"":r;if(!e)return"";switch((t||{}).geo_format){case a.GEOLOCATION_FORMAT.LNG_LAT:var i=e.lng,l=e.lat;if(!function(e,t){return(e||0===e)&&(t||0===t)}(i,l))return"";var s=function(e){if(!e&&0!==e)return"";if(e<-180||e>180)return"";var t=Math.floor(Math.abs(e)),n=60*(Math.abs(e)-t),r=Math.floor(n),o=Math.round(60*(n-r));return"".concat(e>=0?"E":"W").concat(t,"\xb0").concat(r,"'").concat(o,'"')}(i),u=function(e){if(!e&&0!==e)return"";if(e<-90||e>90)return"";var t=Math.floor(Math.abs(e)),n=60*(Math.abs(e)-t),r=Math.floor(n),o=Math.round(60*(n-r));return"".concat(e>=0?"N":"S").concat(t,"\xb0").concat(r,"'").concat(o,'"')}(l);return"".concat(u,", ").concat(s);case a.GEOLOCATION_FORMAT.COUNTRY_REGION:return e.country_region||"";case a.GEOLOCATION_FORMAT.PROVINCE:return e.province||"";case a.GEOLOCATION_FORMAT.PROVINCE_CITY:var c=e.province,d=e.city;return"".concat(c||"").concat(o).concat(d||"").trim();case a.GEOLOCATION_FORMAT.PROVINCE_CITY_DISTRICT:var f=e.province,p=e.city,m=e.district;return"".concat(f||"").concat(o).concat(p||"").concat(o).concat(m||"").trim();case a.GEOLOCATION_FORMAT.MAP_SELECTION:var h=e.address,v=e.title;return"".concat(h||"").concat(o).concat(v||"").trim();default:var g=e.province,y=e.city,C=e.district,E=e.detail;return g||y||C||E?"".concat(g||"").concat(o).concat(y||"").concat(o).concat(C||"").concat(o).concat(E||"").trim():""}};var s=["bytes","KB","MB","GB","TB","PB"],u={comma:",",dot:".",no:"",space:" "},c=function(e){return"string"!==typeof e?"":e.endsWith("0")?e.replace(/(?:\.0*|(\.\d+?)0+)$/,"$1"):e},d=function(e,t){var n=t.formats,r=t.isCurrency,o=void 0===r||r,a=n||{},s=a.decimal,d=void 0===s?"dot":s,f=a.thousands,p=void 0===f?"no":f,m=a.precision,h=void 0===m?2:m,v=a.enable_precision,g=void 0!==v&&v;if(String(e).includes("e")){if(e<1&&e>-1){var y=e.toFixed(g?h:8);return g||(y=c(y)),0===parseFloat(y)&&y.startsWith("-")?y.substring(1):y}return String(e)}var C=u[d],E=u[p],_=g?h:function(e){if(Number.isInteger(e))return 0;var t=String(e).split(".")[1],n=t?t.length:8;return n>8?8:n}(e),A=parseFloat((0,l.round)(e,_).toFixed(_)),b=A<0,S=Math.trunc(A),w=String(Math.abs((0,i.NPminus)(A,S)).toFixed(_)).slice(1);g||(w=c(w)),o&&(g||(w=2===w.length?w=w.padEnd(3,"0"):(w.substring(0,3)||".").padEnd(3,"0"))),w=w.replace(/./,C);for(var O=[],R=0,T=(S=Math.abs(S).toString()).length-1;T>-1;T--)R+=1,O.unshift(S[T]),R%3||0===T||O.unshift(E);return"".concat(b?"-":"").concat(O.join("")).concat(w)};t.getNumberDisplayString=function(e,t){var n=Object.prototype.toString.call(e);if("[object Number]"!==n)return"[object String]"===n&&e.startsWith("#")?e:"";if(isNaN(e)||e===1/0||e===-1/0)return String(e);var r=(t||{}).format;switch(void 0===r?a.DEFAULT_NUMBER_FORMAT:r){case"number":return d(e,{formats:t,isCurrency:!1});case"percent":return"".concat(d(Number.parseFloat((100*e).toFixed(8)),{formats:t,isCurrency:!1}),"%");case"yuan":return"\uffe5".concat(d(e,{formats:t}));case"dollar":return"$".concat(d(e,{formats:t}));case"euro":return"\u20ac".concat(d(e,{formats:t}));case"custom_currency":return"after"===t.currency_symbol_position?"".concat(d(e,{formats:t})).concat(t.currency_symbol||""):"".concat(t.currency_symbol||"").concat(d(e,{formats:t}));case"byte":if(e<0)return"--";if(0===e)return e+" "+s[0];var o=parseInt(Math.floor(Math.log(e)/Math.log(1e3)),10);return 0===o?e+" "+s[o]:(e/Math.pow(1e3,o)).toFixed(1)+" "+s[o];default:return String(e)}}},44956:function(e,t,n){"use strict";var r=n(24994).default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=r(n(84583)),a=r(n(27619));o.default.extend(a.default);t.default=o.default},56265:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"debounce",{enumerable:!0,get:function(){return o.debounce}}),Object.defineProperty(t,"getEventClassName",{enumerable:!0,get:function(){return o.getEventClassName}}),Object.defineProperty(t,"getHTML",{enumerable:!0,get:function(){return r.getHTML}}),Object.defineProperty(t,"getNumberDisplayString",{enumerable:!0,get:function(){return o.getNumberDisplayString}}),Object.defineProperty(t,"getType",{enumerable:!0,get:function(){return o.getType}}),Object.defineProperty(t,"gettext",{enumerable:!0,get:function(){return r.gettext}}),Object.defineProperty(t,"isFunction",{enumerable:!0,get:function(){return o.isFunction}}),Object.defineProperty(t,"isMac",{enumerable:!0,get:function(){return o.isMac}}),Object.defineProperty(t,"isValidEmail",{enumerable:!0,get:function(){return o.isValidEmail}}),Object.defineProperty(t,"throttle",{enumerable:!0,get:function(){return o.throttle}});var r=n(27399),o=n(39856)},97701:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NPminus=t.NPdivide=void 0;var n=function(e){var t=e.toString().split(/[eE]/),n=(t[0].split(".")[1]||"").length-+(t[1]||0);return n>0?n:0},r=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:15;return+parseFloat(Number(e).toPrecision(t))},o=function(e){if(-1===e.toString().indexOf("e"))return Number(e.toString().replace(".",""));var t=n(e);return t>0?r(Number(e)*Math.pow(10,t)):Number(e)},a=function(e,t){var r=o(e),a=o(t),i=n(e)+n(t);return r*a/Math.pow(10,i)};t.NPminus=function(e,t){var r=Math.pow(10,Math.max(n(e),n(t)));return(a(e,r)-a(t,r))/r};t.NPdivide=function(e,t){var i=o(e),l=o(t);return a(i/l,r(Math.pow(10,n(t)-n(e))))}},22724:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.round=t.isNumberEqual=t.isNumber=void 0;t.isNumber=function(e){return(e||0===e)&&"[object Number]"===Object.prototype.toString.call(e)};t.isNumberEqual=function(e,t){return e===t||Math.abs(e-t)<1e-5};t.round=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(0===t)return Math.round(e);var n=Math.pow(10,t),r=e*n;return t>0&&(r=Number.parseFloat(r.toFixed(1))),Math.round(r)/n}},27399:function(e,t,n){"use strict";var r=n(24994).default;Object.defineProperty(t,"__esModule",{value:!0}),t.gettext=t.getHTML=void 0;var o=r(n(5799));t.gettext=function(e,t){return e?o.default.get(e,t)||e:""};t.getHTML=function(e,t){return e?o.default.getHTML(e,t)||e:""}},89659:function(e,t,n){"use strict";var r=n(12897).default,o=n(17383).default,a=n(34579).default,i=n(18336).default,l=n(29511).default,s=n(6305).default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var u=s(n(9950));t.default=function(e){var t;return t=function(t){function n(){return o(this,n),i(this,n,arguments)}return l(n,t),a(n,[{key:"render",value:function(){var t=r({},this.props);return"function"===typeof this.props.getInstance&&(t.ref=this.props.getInstance),u.default.createElement(e,t)}}])}(u.Component),t.displayName="withRef(".concat(e.displayName||e.name||"Component",")"),t}},82894:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return Le}});var r=n(7219),o=n(26380),a=n(52889),i=n(5316),l=n(9950),s=n(17119),u=n(11942),c=n.n(u),d=n(91478),f=n(4899),p=n(84583),m=n.n(p),h=function(e){function t(){return(0,o.default)(this,t),(0,a.default)(this,e.apply(this,arguments))}return(0,i.default)(t,e),t.prototype.render=function(){var e=this.props,t=e.value.localeData(),n=e.prefixCls,r=void 0,o=t.weekdaysMin(),a=t.weekdaysShort();e.showWeekNumber&&(r=l.createElement("th",{role:"columnheader",className:n+"-column-header "+n+"-week-number-header"},l.createElement("span",{className:n+"-column-header-inner"},"x")));var i=a.map((function(e,t){return l.createElement("th",{key:t,role:"columnheader",title:e,className:n+"-column-header"},l.createElement("span",{className:n+"-column-header-inner"},o[t]))}));return l.createElement("thead",null,l.createElement("tr",{role:"row"},r,i))},t}(l.Component),v=h,g=n(86615),y=n.n(g),C=6,E=7,_=n(6740),A=n.n(_);m().extend(A());var b={disabledHours:function(){return[]},disabledMinutes:function(){return[]},disabledSeconds:function(){return[]}};function S(e){var t=m()();return t=t.locale(e.locale()).utcOffset(e.utcOffset())}function w(e){return e.format("LL")}function O(e){return w(S(e))}function R(e){var t=e.locale();return e.localeData()["zh-cn"===t?"months":"monthsShort"](e)}function T(e,t){var n=t?t(e):{};return n=(0,r.default)({},b,n)}function x(e,t,n){return(!t||!t(e))&&!(n&&!function(e,t){return function(e,t){var n=!1;if(e){var r=e.hour(),o=e.minute(),a=e.second();n=-1!==t.disabledHours().indexOf(r)||-1!==t.disabledMinutes(r).indexOf(o)||-1!==t.disabledSeconds(r,o).indexOf(a)}return!n}(e,T(e,t))}(e,n))}function M(e,t){return e?(Array.isArray(t)&&(t=t[0]),e.format(t)):""}function D(e,t){return e&&t&&e.isSame(t,"day")}function I(e,t){return e.year()<t.year()?1:e.year()===t.year()&&e.month()<t.month()}function N(e,t){return e.year()>t.year()?1:e.year()===t.year()&&e.month()>t.month()}var L=function(e){function t(){return(0,o.default)(this,t),(0,a.default)(this,e.apply(this,arguments))}return(0,i.default)(t,e),t.prototype.render=function(){var e=this.props,t=e.contentRender,n=e.prefixCls,r=e.selectedValue,o=e.value,a=e.showWeekNumber,i=e.dateRender,s=e.disabledDate,u=e.hoverValue,c=void 0,d=void 0,f=void 0,p=[],m=S(o),h=n+"-cell",v=n+"-week-number-cell",g=n+"-date",_=n+"-today",A=n+"-selected-day",b=n+"-selected-date",O=n+"-selected-start-date",R=n+"-selected-end-date",T=n+"-in-range-cell",x=n+"-last-month-cell",M=n+"-next-month-btn-day",L=n+"-disabled-cell",k=n+"-disabled-cell-first-of-row",P=n+"-disabled-cell-last-of-row",F=n+"-last-day-of-month",j=o.clone(),Y=((j=j.date(1)).day()+7-7)%7,U=j.clone();U=U.add(0-Y,"days");var B=0;for(c=0;c<C;c++)for(d=0;d<E;d++)f=U,B&&(f=(f=f.clone()).add(B,"days")),p.push(f),B++;var H,G=[];for(B=0,c=0;c<C;c++){var V,Z=void 0,z=void 0,X=!1,W=[];for(a&&(z=l.createElement("td",{key:p[B].week(),role:"gridcell",className:v},p[B].week())),d=0;d<E;d++){var K=null,$=null;f=p[B],d<E-1&&(K=p[B+1]),d>0&&($=p[B-1]);var q=h,Q=!1,J=!1;D(f,m)&&(q+=" "+_,Z=!0);var ee=I(f,o),te=N(f,o);if(r&&Array.isArray(r)){var ne=u.length?u:r;if(!ee&&!te){var re=ne[0],oe=ne[1];re&&D(f,re)&&(J=!0,X=!0,q+=" "+O),(re||oe)&&(D(f,oe)?(J=!0,X=!0,q+=" "+R):(null!==re&&void 0!==re||!f.isBefore(oe,"day"))&&(null!==oe&&void 0!==oe||!f.isAfter(re,"day"))?f.isAfter(re,"day")&&f.isBefore(oe,"day")&&(q+=" "+T):q+=" "+T)}}else D(f,o)&&(J=!0,X=!0);D(f,r)&&(q+=" "+b),ee&&(q+=" "+x),te&&(q+=" "+M),f.clone().endOf("month").date()===f.date()&&(q+=" "+F),s&&s(f,o)&&(Q=!0,$&&s($,o)||(q+=" "+k),K&&s(K,o)||(q+=" "+P)),J&&(q+=" "+A),Q&&(q+=" "+L);var ae=void 0;if(i)ae=i(f,o);else{var ie=t?t(f,o):f.date();ae=l.createElement("div",{key:(H=f,"rc-calendar-"+H.year()+"-"+H.month()+"-"+H.date()),className:g,"aria-selected":J,"aria-disabled":Q},ie)}W.push(l.createElement("td",{key:B,onClick:Q?void 0:e.onSelect.bind(null,f),onMouseEnter:Q?void 0:e.onDayHover&&e.onDayHover.bind(null,f)||void 0,role:"gridcell",title:w(f),className:q},ae)),B++}G.push(l.createElement("tr",{key:c,role:"row",className:y()((V={},V[n+"-current-week"]=Z,V[n+"-active-week"]=X,V))},z,W))}return l.createElement("tbody",{className:n+"-tbody"},G)},t}(l.Component);L.propTypes={contentRender:c().func,dateRender:c().func,disabledDate:c().func,prefixCls:c().string,selectedValue:c().oneOfType([c().object,c().arrayOf(c().object)]),value:c().object,hoverValue:c().any,showWeekNumber:c().bool},L.defaultProps={hoverValue:[]};var k=L,P=function(e){function t(){return(0,o.default)(this,t),(0,a.default)(this,e.apply(this,arguments))}return(0,i.default)(t,e),t.prototype.render=function(){var e=this.props,t=e.prefixCls;return l.createElement("table",{className:t+"-table",cellSpacing:"0",role:"grid"},l.createElement(v,e),l.createElement(k,e))},t}(l.Component),F=P,j=n(59398);function Y(e){var t=this.state.value.clone();t=t.month(e),this.setAndSelectValue(t)}var U=function(e){function t(n){(0,o.default)(this,t);var r=(0,a.default)(this,e.call(this,n));return r.state={value:n.value},r}return(0,i.default)(t,e),t.prototype.componentWillReceiveProps=function(e){"value"in e&&this.setState({value:e.value})},t.prototype.setAndSelectValue=function(e){this.setState({value:e}),this.props.onSelect(e)},t.prototype.months=function(){for(var e=this.state.value.clone(),t=[],n=0,r=0;r<4;r++){t[r]=[];for(var o=0;o<3;o++){var a=R(e=e.month(n));t[r][o]={value:n,content:a,title:a},n++}}return t},t.prototype.render=function(){var e=this,t=this.props,n=this.state.value,r=S(n),o=this.months(),a=n.month(),i=t.prefixCls,s=t.locale,u=t.contentRender,c=t.cellRender,d=o.map((function(o,d){var f=o.map((function(o){var d,f=!1;if(t.disabledDate){var p=n.clone();p=p.month(o.value),f=t.disabledDate(p)}var m=((d={})[i+"-cell"]=1,d[i+"-cell-disabled"]=f,d[i+"-selected-cell"]=o.value===a,d[i+"-current-cell"]=r.year()===n.year()&&o.value===r.month(),d),h=void 0;if(c){var v=n.clone();v=v.month(o.value),h=c(v,s)}else{var g=void 0;if(u){var C=n.clone();C=C.month(o.value),g=u(C,s)}else g=o.content;h=l.createElement("a",{className:i+"-month"},g)}return l.createElement("td",{role:"gridcell",key:o.value,onClick:f?null:Y.bind(e,o.value),title:o.title,className:y()(m)},h)}));return l.createElement("tr",{key:d,role:"row"},f)}));return l.createElement("table",{className:i+"-table",cellSpacing:"0",role:"grid"},l.createElement("tbody",{className:i+"-tbody"},d))},t}(l.Component);U.defaultProps={onSelect:function(){}},U.propTypes={onSelect:c().func,cellRender:c().func,prefixCls:c().string,value:c().object};var B=U;function H(e){this.props.changeYear(e)}function G(){}var V=function(e){function t(n){(0,o.default)(this,t);var r=(0,a.default)(this,e.call(this,n));return r.setAndSelectValue=function(e){r.setValue(e),r.props.onSelect(e)},r.setValue=function(e){"value"in r.props&&r.setState({value:e})},r.nextYear=H.bind(r,1),r.previousYear=H.bind(r,-1),r.prefixCls=n.rootPrefixCls+"-month-panel",r.state={value:n.value||n.defaultValue},r}return(0,i.default)(t,e),t.getDerivedStateFromProps=function(e){var t={};return"value"in e&&(t={value:e.value}),t},t.prototype.render=function(){var e=this.props,t=this.state.value,n=e.locale,r=e.cellRender,o=e.contentRender,a=e.renderFooter,i=t.year(),s=this.prefixCls,u=a&&a("month");return l.createElement("div",{className:s,style:e.style},l.createElement("div",null,l.createElement("div",{className:s+"-header"},l.createElement("a",{className:s+"-prev-year-btn",role:"button",onClick:this.previousYear,title:n.previousYear}),l.createElement("a",{className:s+"-year-select",role:"button",onClick:e.onYearPanelShow,title:n.yearSelect},l.createElement("span",{className:s+"-year-select-content"},i),l.createElement("span",{className:s+"-year-select-arrow"},"x")),l.createElement("a",{className:s+"-next-year-btn",role:"button",onClick:this.nextYear,title:n.nextYear})),l.createElement("div",{className:s+"-body"},l.createElement(B,{disabledDate:e.disabledDate,onSelect:this.setAndSelectValue,locale:n,value:t,cellRender:r,contentRender:o,prefixCls:s})),u&&l.createElement("div",{className:s+"-footer"},u)))},t}(l.Component);V.propTypes={onChange:c().func,disabledDate:c().func,onSelect:c().func,renderFooter:c().func,rootPrefixCls:c().string,value:c().object,defaultValue:c().object},V.defaultProps={onChange:G,onSelect:G},(0,f.polyfill)(V);var Z=V;function z(e){var t=this.state.value.clone();t=t.add(e,"year"),this.setState({value:t})}function X(e){var t=this.state.value.clone();t=(t=t.year(e)).month(this.state.value.month()),this.setState({value:t}),this.props.onSelect(t)}var W=function(e){function t(n){(0,o.default)(this,t);var r=(0,a.default)(this,e.call(this,n));return r.prefixCls=n.rootPrefixCls+"-year-panel",r.state={value:n.value||n.defaultValue},r.nextDecade=z.bind(r,10),r.previousDecade=z.bind(r,-10),r}return(0,i.default)(t,e),t.prototype.years=function(){for(var e=this.state.value.year(),t=10*parseInt(e/10,10)-1,n=[],r=0,o=0;o<4;o++){n[o]=[];for(var a=0;a<3;a++){var i=t+r,l=String(i);n[o][a]={content:l,year:i,title:l},r++}}return n},t.prototype.render=function(){var e=this,t=this.props,n=this.state.value,r=t.locale,o=t.renderFooter,a=this.years(),i=n.year(),s=10*parseInt(i/10,10),u=s+9,c=this.prefixCls,d=a.map((function(t,n){var r=t.map((function(t){var n,r=((n={})[c+"-cell"]=1,n[c+"-selected-cell"]=t.year===i,n);return l.createElement("td",{role:"gridcell",title:t.title,key:t.content,onClick:X.bind(e,t.year),className:y()(r)},l.createElement("a",{className:c+"-year"},t.content))}));return l.createElement("tr",{key:n,role:"row"},r)})),f=o&&o("year");return l.createElement("div",{className:this.prefixCls},l.createElement("div",null,l.createElement("div",{className:c+"-header"},l.createElement("a",{className:c+"-prev-decade-btn",role:"button",onClick:this.previousDecade,title:r.previousDecade}),l.createElement("a",{className:c+"-decade-select",role:"button",onClick:t.onDecadePanelShow,title:r.decadeSelect},l.createElement("span",{className:c+"-decade-select-content"},s,"-",u),l.createElement("span",{className:c+"-decade-select-arrow"},"x")),l.createElement("a",{className:c+"-next-decade-btn",role:"button",onClick:this.nextDecade,title:r.nextDecade})),l.createElement("div",{className:c+"-body"},l.createElement("table",{className:c+"-table",cellSpacing:"0",role:"grid"},l.createElement("tbody",{className:c+"-tbody"},d))),f&&l.createElement("div",{className:c+"-footer"},f)))},t}(l.Component),K=W;W.propTypes={rootPrefixCls:c().string,value:c().object,defaultValue:c().object,renderFooter:c().func},W.defaultProps={onSelect:function(){}};function $(e){var t=this.state.value.clone();t=t.add(e,"years"),this.setState({value:t})}function q(e,t){var n=this.state.value.clone();n=(n=n.year(e)).month(this.state.value.month()),this.props.onSelect(n),t.preventDefault()}var Q=function(e){function t(n){(0,o.default)(this,t);var r=(0,a.default)(this,e.call(this,n));return r.state={value:n.value||n.defaultValue},r.prefixCls=n.rootPrefixCls+"-decade-panel",r.nextCentury=$.bind(r,100),r.previousCentury=$.bind(r,-100),r}return(0,i.default)(t,e),t.prototype.render=function(){for(var e=this,t=this.state.value,n=this.props,r=n.locale,o=n.renderFooter,a=t.year(),i=100*parseInt(a/100,10),s=i-10,u=i+99,c=[],d=0,f=this.prefixCls,p=0;p<4;p++){c[p]=[];for(var m=0;m<3;m++){var h=s+10*d,v=s+10*d+9;c[p][m]={startDecade:h,endDecade:v},d++}}var g=o&&o("decade"),C=c.map((function(t,n){var r=t.map((function(t){var n,r=t.startDecade,o=t.endDecade,s=r<i,c=o>u,d=((n={})[f+"-cell"]=1,n[f+"-selected-cell"]=r<=a&&a<=o,n[f+"-last-century-cell"]=s,n[f+"-next-century-cell"]=c,n),p=r+"-"+o,m=void 0;return m=s?e.previousCentury:c?e.nextCentury:q.bind(e,r),l.createElement("td",{key:r,onClick:m,role:"gridcell",className:y()(d)},l.createElement("a",{className:f+"-decade"},p))}));return l.createElement("tr",{key:n,role:"row"},r)}));return l.createElement("div",{className:this.prefixCls},l.createElement("div",{className:f+"-header"},l.createElement("a",{className:f+"-prev-century-btn",role:"button",onClick:this.previousCentury,title:r.previousCentury}),l.createElement("div",{className:f+"-century"},i,"-",u),l.createElement("a",{className:f+"-next-century-btn",role:"button",onClick:this.nextCentury,title:r.nextCentury})),l.createElement("div",{className:f+"-body"},l.createElement("table",{className:f+"-table",cellSpacing:"0",role:"grid"},l.createElement("tbody",{className:f+"-tbody"},C))),g&&l.createElement("div",{className:f+"-footer"},g))},t}(l.Component),J=Q;function ee(e){var t=this.props.value.clone();t=t.add(e,"months"),this.props.onValueChange(t)}function te(e){var t=this.props.value.clone();t=t.add(e,"years"),this.props.onValueChange(t)}function ne(e,t){return e?t:null}Q.propTypes={locale:c().object,value:c().object,defaultValue:c().object,rootPrefixCls:c().string,renderFooter:c().func},Q.defaultProps={onSelect:function(){}};var re=function(e){function t(n){(0,o.default)(this,t);var r=(0,a.default)(this,e.call(this,n));return oe.call(r),r.nextMonth=ee.bind(r,1),r.previousMonth=ee.bind(r,-1),r.nextYear=te.bind(r,1),r.previousYear=te.bind(r,-1),r.state={yearPanelReferer:null},r}return(0,i.default)(t,e),t.prototype.render=function(){var e=this,t=this.props,n=t.prefixCls,r=t.locale,o=t.mode,a=t.value,i=t.showTimePicker,s=t.enableNext,u=t.enablePrev,c=t.disabledMonth,d=t.renderFooter,f=null;return"month"===o&&(f=l.createElement(Z,{locale:r,value:a,rootPrefixCls:n,onSelect:this.onMonthSelect,onYearPanelShow:function(){return e.showYearPanel("month")},disabledDate:c,cellRender:t.monthCellRender,contentRender:t.monthCellContentRender,renderFooter:d,changeYear:this.changeYear})),"year"===o&&(f=l.createElement(K,{locale:r,defaultValue:a,rootPrefixCls:n,onSelect:this.onYearSelect,onDecadePanelShow:this.showDecadePanel,renderFooter:d})),"decade"===o&&(f=l.createElement(J,{locale:r,defaultValue:a,rootPrefixCls:n,onSelect:this.onDecadeSelect,renderFooter:d})),l.createElement("div",{className:n+"-header"},l.createElement("div",{style:{position:"relative"}},ne(u&&!i,l.createElement("a",{className:n+"-prev-year-btn",role:"button",onClick:this.previousYear,title:r.previousYear})),ne(u&&!i,l.createElement("a",{className:n+"-prev-month-btn",role:"button",onClick:this.previousMonth,title:r.previousMonth})),this.monthYearElement(i),ne(s&&!i,l.createElement("a",{className:n+"-next-month-btn",onClick:this.nextMonth,title:r.nextMonth})),ne(s&&!i,l.createElement("a",{className:n+"-next-year-btn",onClick:this.nextYear,title:r.nextYear}))),f)},t}(l.Component);re.propTypes={prefixCls:c().string,value:c().object,onValueChange:c().func,showTimePicker:c().bool,onPanelChange:c().func,locale:c().object,enablePrev:c().any,enableNext:c().any,disabledMonth:c().func,renderFooter:c().func,onMonthSelect:c().func},re.defaultProps={enableNext:1,enablePrev:1,onPanelChange:function(){},onValueChange:function(){}};var oe=function(){var e=this;this.onMonthSelect=function(t){e.props.onPanelChange(t,"date"),e.props.onMonthSelect?e.props.onMonthSelect(t):e.props.onValueChange(t)},this.onYearSelect=function(t){var n=e.state.yearPanelReferer;e.setState({yearPanelReferer:null}),e.props.onPanelChange(t,n),e.props.onValueChange(t)},this.onDecadeSelect=function(t){e.props.onPanelChange(t,"year"),e.props.onValueChange(t)},this.changeYear=function(t){t>0?e.nextYear():e.previousYear()},this.monthYearElement=function(t){var n=e.props,r=n.prefixCls,o=n.locale,a=n.value,i=a.localeData(),s=o.monthBeforeYear,u=r+"-"+(s?"my-select":"ym-select"),c=t?" "+r+"-time-status":"",d=l.createElement("a",{className:r+"-year-select"+c,role:"button",onClick:t?null:function(){return e.showYearPanel("date")},title:t?null:o.yearSelect},a.format(o.yearFormat)),f=l.createElement("a",{className:r+"-month-select"+c,role:"button",onClick:t?null:e.showMonthPanel,title:t?null:o.monthSelect},o.monthFormat?a.format(o.monthFormat):i.monthsShort(a)),p=void 0;t&&(p=l.createElement("a",{className:r+"-day-select"+c,role:"button"},a.format(o.dayFormat)));var m=[];return m=s?[f,p,d]:[d,f,p],l.createElement("span",{className:u},(0,j.A)(m))},this.showMonthPanel=function(){e.props.onPanelChange(null,"month")},this.showYearPanel=function(t){e.setState({yearPanelReferer:t}),e.props.onPanelChange(null,"year")},this.showDecadePanel=function(){e.props.onPanelChange(null,"decade")}},ae=re;function ie(e){var t=e.prefixCls,n=e.locale,r=e.value,o=e.timePicker,a=e.disabled,i=e.disabledDate,s=e.onToday,u=e.text,c=(!u&&o?n.now:u)||n.today,d=i&&!x(S(r),i)||a,f=d?t+"-today-btn-disabled":"";return l.createElement("a",{className:t+"-today-btn "+f,role:"button",onClick:d?null:s,title:O(r)},c)}function le(e){var t=e.prefixCls,n=e.locale,r=e.okDisabled,o=e.onOk,a=t+"-ok-btn";return r&&(a+=" "+t+"-ok-btn-disabled"),l.createElement("a",{className:a,role:"button",onClick:r?null:o},n.ok)}function se(e){var t,n=e.prefixCls,r=e.locale,o=e.showTimePicker,a=e.onOpenTimePicker,i=e.onCloseTimePicker,s=e.timePickerDisabled,u=y()(((t={})[n+"-time-picker-btn"]=!0,t[n+"-time-picker-btn-disabled"]=s,t)),c=null;return s||(c=o?i:a),l.createElement("a",{className:u,role:"button",onClick:c},o?r.dateSelect:r.timeSelect)}var ue=function(e){function t(){return(0,o.default)(this,t),(0,a.default)(this,e.apply(this,arguments))}return(0,i.default)(t,e),t.prototype.onSelect=function(e){this.props.onSelect(e)},t.prototype.getRootDOMNode=function(){return s.findDOMNode(this)},t.prototype.render=function(){var e=this.props,t=e.value,n=e.prefixCls,o=e.showOk,a=e.timePicker,i=e.renderFooter,s=e.mode,u=null,c=i&&i(s);if(e.showToday||a||c){var d,f=void 0;e.showToday&&(f=l.createElement(ie,(0,r.default)({},e,{value:t})));var p=void 0;(!0===o||!1!==o&&e.timePicker)&&(p=l.createElement(le,e));var m=void 0;e.timePicker&&(m=l.createElement(se,e));var h=void 0;(f||m||p||c)&&(h=l.createElement("span",{className:n+"-footer-btn"},c,(0,j.A)([f,m,p])));var v=y()(n+"-footer",((d={})[n+"-footer-show-ok"]=p,d));u=l.createElement("div",{className:v},h)}return u},t}(l.Component);ue.propTypes={prefixCls:c().string,showDateInput:c().bool,disabledTime:c().any,timePicker:c().element,selectedValue:c().any,showOk:c().bool,onSelect:c().func,value:c().object,renderFooter:c().func,defaultValue:c().object,mode:c().string};var ce=ue,de=function(e){function t(n){(0,o.default)(this,t);var r=(0,a.default)(this,e.call(this,n));return r.onSelect=function(e){r.setState({highlightTime:e}),r.props.onSelect(e),r.props.onClickRightPanelTime()},r.getTimes=function(){for(var e=[],t=0;t<24;t++){var n=(String(t)+":00").padStart(5,"0"),r=(String(t)+":30").padStart(5,"0");e.push(n),e.push(r)}return e},r.scrollUp=function(){r.timeRef.current.scrollBy(0,-200)},r.scrollDown=function(){r.timeRef.current.scrollBy(0,200)},r.state={highlightTime:r.props.value||null},r.timeRef=l.createRef(),r.times=r.getTimes(),r}return(0,i.default)(t,e),t.prototype.componentDidMount=function(){var e=this.props.defaultMinutesTime,t=this.times.findIndex((function(t){return t===e})),n=t>-1?t:16;this.timeRef.current.scrollTo(0,34*n)},t.prototype.render=function(){var e=this,t=this.props,n=t.value,r=t.prefixCls,o=t.locale,a=n.format().slice(0,10),i=this.state.highlightTime,s=i?i.format().slice(11,16):null,u=o&&"\u4eca\u5929"===o.today;return l.createElement("div",{className:r+"-right-panel"},l.createElement("div",{className:r+"-right-panel-header",onClick:this.scrollUp},l.createElement("span",null)),l.createElement("div",{className:r+"-right-panel-body",ref:this.timeRef},l.createElement("ul",null,this.times.map((function(t){var n=m()(a+" "+t);return n=u?n.locale("zh-cn"):n.locale("en-gb"),l.createElement("li",{key:t,onClick:e.onSelect.bind(e,n),className:s===t?r+"-selected-time":""},t)})))),l.createElement("div",{className:r+"-right-panel-footer",onClick:this.scrollDown},l.createElement("span",null)))},t}(l.Component);de.propTypes={prefixCls:c().string,value:c().object,onSelect:c().func,onClickRightPanelTime:c().func,locale:c().object,defaultMinutesTime:c().string};var fe=de;function pe(e){return e?S(e):m()()}var me={value:c().object,defaultValue:c().object,onKeyDown:c().func},he={onKeyDown:function(){}};function ve(){}var ge={className:c().string,locale:c().object,style:c().object,visible:c().bool,onSelect:c().func,prefixCls:c().string,onChange:c().func,onOk:c().func},ye={locale:{today:"Today",now:"Now",backToToday:"Back to today",ok:"Ok",clear:"Clear",month:"Month",year:"Year",timeSelect:"select time",dateSelect:"select date",weekSelect:"Choose a week",monthSelect:"Choose a month",yearSelect:"Choose a year",decadeSelect:"Choose a decade",yearFormat:"YYYY",dateFormat:"M/D/YYYY",dayFormat:"D",dateTimeFormat:"M/D/YYYY HH:mm:ss",monthBeforeYear:!0,previousMonth:"Previous month (PageUp)",nextMonth:"Next month (PageDown)",previousYear:"Last year (Control + left)",nextYear:"Next year (Control + right)",previousDecade:"Last decade",nextDecade:"Next decade",previousCentury:"Last century",nextCentury:"Next century"},style:{},visible:!0,prefixCls:"rc-calendar",className:"",onSelect:ve,onChange:ve,onClear:ve,renderFooter:function(){return null},renderSidebar:function(){return null}},Ce=void 0,Ee=void 0,_e=void 0,Ae=function(e){function t(n){(0,o.default)(this,t);var r=(0,a.default)(this,e.call(this,n));be.call(r);var i=n.selectedValue;return r.state={str:M(i,r.props.format),invalid:!1,hasFocus:!1},r}return(0,i.default)(t,e),t.prototype.componentDidUpdate=function(){!_e||!this.state.hasFocus||this.state.invalid||0===Ce&&0===Ee||_e.setSelectionRange(Ce,Ee)},t.getDerivedStateFromProps=function(e,t){var n={};_e&&(Ce=_e.selectionStart,Ee=_e.selectionEnd);var r=e.selectedValue;return t.hasFocus||(n={str:M(r,e.format),invalid:!1}),n},t.getInstance=function(){return _e},t.prototype.render=function(){var e=this.props,t=this.state,n=t.invalid,r=t.str,o=e.locale,a=e.prefixCls,i=e.placeholder,s=e.clearIcon,u=e.inputMode,c=n?a+"-input-invalid":"";return l.createElement("div",{className:a+"-input-wrap"},l.createElement("div",{className:a+"-date-input-wrap"},l.createElement("input",{ref:this.saveDateInput,className:a+"-input "+c,value:r,disabled:e.disabled,placeholder:i,onChange:this.onInputChange,onKeyDown:this.onKeyDown,onFocus:this.onFocus,onBlur:this.onBlur,inputMode:u})),e.showClear?l.createElement("a",{role:"button",title:o.clear,onClick:this.onClear},s||l.createElement("span",{className:a+"-clear-btn"})):null)},t}(l.Component);Ae.propTypes={prefixCls:c().string,timePicker:c().object,value:c().object,disabledTime:c().any,format:c().oneOfType([c().string,c().arrayOf(c().string)]),locale:c().object,disabledDate:c().func,onChange:c().func,onClear:c().func,placeholder:c().string,onSelect:c().func,selectedValue:c().object,clearIcon:c().node,inputMode:c().string};var be=function(){var e=this;this.onClear=function(){e.setState({str:""}),e.props.onClear(null)},this.onInputChange=function(t){var n=t.target.value,r=e.props,o=r.disabledDate,a=r.format,i=r.onChange,l=r.selectedValue;if(!n)return i(null),void e.setState({invalid:!1,str:n});var s=m()(n,a,!0);if(s.isValid()){var u=e.props.value.clone();!(u=u.year(s.year()).month(s.month()).date(s.date()).hour(s.hour()).minute(s.minute()).second(s.second()))||o&&o(u)?e.setState({invalid:!0,str:n}):(l!==u||l&&u&&!l.isSame(u))&&(e.setState({invalid:!1,str:n}),i(u))}else e.setState({invalid:!0,str:n})},this.onFocus=function(){e.setState({hasFocus:!0})},this.onBlur=function(){e.setState((function(e,t){return{hasFocus:!1,str:M(t.value,t.format)}}))},this.onKeyDown=function(t){var n=t.keyCode,r=e.props,o=r.onSelect,a=r.value,i=r.disabledDate;n===d.A.ENTER&&o&&((!i||!i(a))&&o(a.clone()),t.preventDefault())},this.getRootDOMNode=function(){return s.findDOMNode(e)},this.focus=function(){_e&&_e.focus()},this.saveDateInput=function(e){_e=e}};(0,f.polyfill)(Ae);var Se=Ae;var we=n(43650),Oe=n.n(we),Re=n(97676),Te=n.n(Re);function xe(){}m().extend(A()),m().extend(Oe()),m().extend(Te());var Me=function(e){return!(!m().isDayjs(e)||!e.isValid())&&e},De=function(e){function t(n){(0,o.default)(this,t);var r=(0,a.default)(this,e.call(this,n));return Ie.call(r),r.state={mode:r.props.mode||"date",value:Me(n.value)||Me(n.defaultValue)||m()(),selectedValue:n.selectedValue||n.defaultSelectedValue},r}return(0,i.default)(t,e),t.prototype.componentDidMount=function(){this.props.showDateInput&&this.saveFocusElement(Se.getInstance())},t.getDerivedStateFromProps=function(e,t){var n=e.value,r=e.selectedValue,o={};return"mode"in e&&t.mode!==e.mode&&(o={mode:e.mode}),"value"in e&&(o.value=Me(n)||Me(e.defaultValue)||pe(t.value)),"selectedValue"in e&&(o.selectedValue=r),o},t.prototype.render=function(){var e=this.props,t=this.state,n=e.locale,o=e.prefixCls,a=e.disabledDate,i=e.dateInputPlaceholder,s=e.timePicker,u=e.onClickRightPanelTime,c=e.disabledTime,d=e.clearIcon,f=e.renderFooter,p=e.inputMode,m=e.showHourAndMinute,h=t.value,v=t.selectedValue,g=t.mode,y="time"===g,C=y&&c&&s?T(v,c):null,E=null;if(s&&y){var _=(0,r.default)({showHour:!0,showSecond:!0,showMinute:!0},s.props,C,{onChange:this.onDateInputChange,value:v,disabledTime:c});void 0!==s.props.defaultValue&&(_.defaultOpenValue=s.props.defaultValue),E=l.cloneElement(s,_)}var A=e.showDateInput?l.createElement(Se,{format:this.getFormat(),key:"date-input",value:h,locale:n,placeholder:i,showClear:!0,disabledTime:c,disabledDate:a,onClear:this.onClear,prefixCls:o,selectedValue:v,onChange:this.onDateInputChange,onSelect:this.onDateInputSelect,clearIcon:d,inputMode:p}):null,b=[];return e.renderSidebar&&b.push(e.renderSidebar()),b.push(l.createElement("div",{className:o+"-panel",key:"panel"},A,l.createElement("div",{className:o+"-date-panel-container"},l.createElement("div",{tabIndex:this.props.focusablePanel?0:void 0,className:o+"-date-panel"},l.createElement(ae,{locale:n,mode:g,value:h,onValueChange:this.setValue,onPanelChange:this.onPanelChange,renderFooter:f,showTimePicker:y,prefixCls:o}),s&&y?l.createElement("div",{className:o+"-time-picker"},l.createElement("div",{className:o+"-time-picker-panel"},E)):null,l.createElement("div",{className:o+"-body"},l.createElement(F,{locale:n,value:h,selectedValue:v,prefixCls:o,dateRender:e.dateRender,onSelect:this.onDateTableSelect,disabledDate:a,showWeekNumber:e.showWeekNumber})),l.createElement(ce,{showOk:e.showOk,mode:g,renderFooter:e.renderFooter,locale:n,prefixCls:o,showToday:e.showToday,disabledTime:c,showTimePicker:y,showDateInput:e.showDateInput,timePicker:s,selectedValue:v,value:h,disabledDate:a,okDisabled:!1!==e.showOk&&(!v||!this.isAllowedDate(v)),onOk:this.onOk,onSelect:this.onSelect,onToday:this.onToday,onOpenTimePicker:this.openTimePicker,onCloseTimePicker:this.closeTimePicker})),m&&l.createElement(fe,{prefixCls:o,value:h,locale:n,onSelect:this.onDateTableSelect,onClickRightPanelTime:u,defaultMinutesTime:this.props.defaultMinutesTime})))),this.renderRoot({children:b,className:e.showWeekNumber?o+"-week-number":""})},t}(l.Component);De.propTypes=(0,r.default)({},me,ge,{prefixCls:c().string,className:c().string,style:c().object,defaultValue:c().object,value:c().object,selectedValue:c().object,defaultSelectedValue:c().object,mode:c().oneOf(["time","date","month","year","decade"]),locale:c().object,showDateInput:c().bool,showWeekNumber:c().bool,showToday:c().bool,showOk:c().bool,showHourAndMinute:c().bool,defaultMinutesTime:c().string,onSelect:c().func,onOk:c().func,onKeyDown:c().func,timePicker:c().element,dateInputPlaceholder:c().any,onClear:c().func,onChange:c().func,onPanelChange:c().func,disabledDate:c().func,disabledTime:c().any,dateRender:c().func,renderFooter:c().func,renderSidebar:c().func,clearIcon:c().node,focusablePanel:c().bool,inputMode:c().string,onBlur:c().func,onClickRightPanelTime:c().func}),De.defaultProps=(0,r.default)({},he,ye,{showToday:!0,showDateInput:!0,showHourAndMinute:!1,timePicker:null,onOk:xe,onPanelChange:xe,onClickRightPanelTime:xe,focusablePanel:!0});var Ie=function(){var e=this;this.onPanelChange=function(t,n){var r=e.props,o=e.state;"mode"in r||e.setState({mode:n}),r.onPanelChange(t||o.value,n)},this.onKeyDown=function(t){if("input"!==t.target.nodeName.toLowerCase()){var n=t.keyCode,r=t.ctrlKey||t.metaKey,o=e.props.disabledDate,a=e.state.value;switch(n){case d.A.DOWN:return e.goTime(1,"weeks"),t.preventDefault(),1;case d.A.UP:return e.goTime(-1,"weeks"),t.preventDefault(),1;case d.A.LEFT:return r?e.goTime(-1,"years"):e.goTime(-1,"days"),t.preventDefault(),1;case d.A.RIGHT:return r?e.goTime(1,"years"):e.goTime(1,"days"),t.preventDefault(),1;case d.A.HOME:return e.setValue(e.state.value.clone().startOf("month")),t.preventDefault(),1;case d.A.END:return e.setValue(function(e){return e.clone().endOf("month")}(e.state.value)),t.preventDefault(),1;case d.A.PAGE_DOWN:return e.goTime(1,"month"),t.preventDefault(),1;case d.A.PAGE_UP:return e.goTime(-1,"month"),t.preventDefault(),1;case d.A.ENTER:return o&&o(a)||e.onSelect(a,{source:"keyboard"}),t.preventDefault(),1;default:return e.props.onKeyDown(t),1}}},this.onClear=function(){e.onSelect(null),e.props.onClear()},this.onOk=function(){var t=e.state.selectedValue;e.isAllowedDate(t)&&e.props.onOk(t)},this.onDateInputChange=function(t){e.onSelect(t,{source:"dateInput"})},this.onDateInputSelect=function(t){e.onSelect(t,{source:"dateInputSelect"})},this.onDateTableSelect=function(t){var n,r,o=e.props.timePicker;if(!e.state.selectedValue&&o){var a=o.props.defaultValue;a&&(n=a,r=t,m().isDayjs(n)&&m().isDayjs(r)&&(r=(r=(r=(r=r.hour(n.hour())).minute(n.minute())).second(n.second())).millisecond(n.millisecond())))}e.onSelect(t)},this.onToday=function(){var t=S(e.state.value);e.onSelect(t,{source:"todayButton"})},this.onBlur=function(t){setTimeout((function(){var n=Se.getInstance(),r=e.rootInstance;!r||r.contains(document.activeElement)||n&&n.contains(document.activeElement)||e.props.onBlur&&e.props.onBlur(t)}),0)},this.getRootDOMNode=function(){return s.findDOMNode(e)},this.openTimePicker=function(){e.onPanelChange(null,"time")},this.closeTimePicker=function(){e.onPanelChange(null,"date")},this.goTime=function(t,n){e.setValue(function(e,t,n){return e.clone().add(t,n)}(e.state.value,t,n))}};(0,f.polyfill)(De);var Ne=function(e){var t,n;return n=t=function(t){function n(){var e,r,i;(0,o.default)(this,n);for(var s=arguments.length,u=Array(s),c=0;c<s;c++)u[c]=arguments[c];return e=r=(0,a.default)(this,t.call.apply(t,[this].concat(u))),r.onSelect=function(e,t){e&&r.setValue(e),r.setSelectedValue(e,t)},r.renderRoot=function(e){var t,n=r.props,o=n.prefixCls,a=((t={})[o]=1,t[o+"-hidden"]=!n.visible,t[n.className]=!!n.className,t[e.className]=!!e.className,t);return l.createElement("div",{ref:r.saveRoot,className:""+y()(a),style:r.props.style,tabIndex:"0",onKeyDown:r.onKeyDown,onBlur:r.onBlur},e.children)},r.setSelectedValue=function(e,t){"selectedValue"in r.props||r.setState({selectedValue:e}),r.props.onSelect&&r.props.onSelect(e,t)},r.setValue=function(e){var t=r.state.value;"value"in r.props||r.setState({value:e}),(t&&e&&!t.isSame(e)||!t&&e||t&&!e)&&r.props.onChange(e)},r.isAllowedDate=function(e){return x(e,r.props.disabledDate,r.props.disabledTime)},i=e,(0,a.default)(r,i)}return(0,i.default)(n,t),n.getDerivedStateFromProps=function(t,n){if(e.getDerivedStateFromProps)return e.getDerivedStateFromProps(t,n);var r=t.value,o=t.selectedValue,a={};return"value"in t&&(a.value=r||t.defaultValue||pe(n.value)),"selectedValue"in t&&(a.selectedValue=o),a},n}(e),t.displayName="CalendarMixinWrapper",t.defaultProps=e.defaultProps,n}(function(e){var t,n;return n=t=function(e){function t(){var n,r,i;(0,o.default)(this,t);for(var l=arguments.length,s=Array(l),u=0;u<l;u++)s[u]=arguments[u];return n=r=(0,a.default)(this,e.call.apply(e,[this].concat(s))),r.getFormat=function(){var e=r.props.format,t=r.props,n=t.locale,o=t.timePicker;return e||(e=o?n.dateTimeFormat:n.dateFormat),e},r.focus=function(){r.focusElement?r.focusElement.focus():r.rootInstance&&r.rootInstance.focus()},r.saveFocusElement=function(e){r.focusElement=e},r.saveRoot=function(e){r.rootInstance=e},i=n,(0,a.default)(r,i)}return(0,i.default)(t,e),t.prototype.shouldComponentUpdate=function(e){return this.props.visible||e.visible},t}(e),t.displayName="CommonMixinWrapper",t.defaultProps=e.defaultProps,t.getDerivedStateFromProps=e.getDerivedStateFromProps,n}(De)),Le=Ne},39739:function(e,t,n){"use strict";t.__esModule=!0;var r=m(n(26380)),o=m(n(52889)),a=m(n(5316)),i=m(n(9950)),l=m(n(17119)),s=m(n(11942)),u=n(4899),c=m(n(19699)),d=m(n(13225)),f=m(n(32886)),p=m(n(826));function m(e){return e&&e.__esModule?e:{default:e}}function h(){}function v(e,t){this[e]=t}var g=function(e){function t(n){(0,r.default)(this,t);var a=(0,o.default)(this,e.call(this,n));y.call(a);var i=void 0;i="open"in n?n.open:n.defaultOpen;var l=n.value||n.defaultValue;return a.saveCalendarRef=v.bind(a,"calendarInstance"),a.state={open:i,value:l},a}return(0,a.default)(t,e),t.prototype.componentDidUpdate=function(e,t){!t.open&&this.state.open&&(this.focusTimeout=setTimeout(this.focusCalendar,0,this))},t.prototype.componentWillUnmount=function(){clearTimeout(this.focusTimeout)},t.getDerivedStateFromProps=function(e){var t={},n=e.value,r=e.open;return"value"in e&&(t.value=n),void 0!==r&&(t.open=r),t},t.prototype.render=function(){var e=this.props,t=e.prefixCls,n=e.placement,r=e.style,o=e.getCalendarContainer,a=e.align,l=e.animation,s=e.disabled,u=e.dropdownClassName,c=e.transitionName,d=e.children,m=this.state;return i.default.createElement(p.default,{popup:this.getCalendarElement(),popupAlign:a,builtinPlacements:f.default,popupPlacement:n,action:s&&!m.open?[]:["click"],destroyPopupOnHide:!0,getPopupContainer:o,popupStyle:r,popupAnimation:l,popupTransitionName:c,popupVisible:m.open,onPopupVisibleChange:this.onVisibleChange,prefixCls:t,popupClassName:u},i.default.cloneElement(d(m,e),{onKeyDown:this.onKeyDown}))},t}(i.default.Component);g.propTypes={animation:s.default.oneOfType([s.default.func,s.default.string]),disabled:s.default.bool,transitionName:s.default.string,onChange:s.default.func,onOpenChange:s.default.func,children:s.default.func,getCalendarContainer:s.default.func,calendar:s.default.element,style:s.default.object,open:s.default.bool,defaultOpen:s.default.bool,prefixCls:s.default.string,placement:s.default.any,value:s.default.oneOfType([s.default.object,s.default.array]),defaultValue:s.default.oneOfType([s.default.object,s.default.array]),align:s.default.object,dateRender:s.default.func,onBlur:s.default.func},g.defaultProps={prefixCls:"rc-calendar-picker",style:{},align:{},placement:"bottomLeft",defaultOpen:!1,onChange:h,onOpenChange:h,onBlur:h};var y=function(){var e=this;this.onCalendarKeyDown=function(t){t.keyCode===d.default.ESC&&(t.stopPropagation(),e.close(e.focus))},this.onCalendarSelect=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=e.props;"value"in r||e.setState({value:t}),("keyboard"===n.source||"dateInputSelect"===n.source||!r.calendar.props.timePicker&&"dateInput"!==n.source||"todayButton"===n.source)&&e.close(e.focus),r.onChange(t)},this.onKeyDown=function(t){e.state.open||t.keyCode!==d.default.DOWN&&t.keyCode!==d.default.ENTER||(e.open(),t.preventDefault())},this.onCalendarOk=function(){e.close(e.focus)},this.onCalendarClear=function(){e.close(e.focus)},this.onCalendarBlur=function(){e.setOpen(!1)},this.onVisibleChange=function(t){e.setOpen(t)},this.getCalendarElement=function(){var t=e.props,n=e.state,r=t.calendar.props,o=n.value,a=o,l={ref:e.saveCalendarRef,defaultValue:a||r.defaultValue,selectedValue:o,onKeyDown:e.onCalendarKeyDown,onOk:(0,c.default)(r.onOk,e.onCalendarOk),onSelect:(0,c.default)(r.onSelect,e.onCalendarSelect),onClear:(0,c.default)(r.onClear,e.onCalendarClear),onBlur:(0,c.default)(r.onBlur,e.onCalendarBlur)};return i.default.cloneElement(t.calendar,l)},this.setOpen=function(t,n){var r=e.props.onOpenChange;e.state.open!==t&&("open"in e.props||e.setState({open:t},n),r(t))},this.open=function(t){e.setOpen(!0,t)},this.close=function(t){e.setOpen(!1,t)},this.focus=function(){e.state.open||l.default.findDOMNode(e).focus()},this.focusCalendar=function(){e.state.open&&e.calendarInstance&&e.calendarInstance.focus()}};(0,u.polyfill)(g),t.default=g,e.exports=t.default},19550:function(e,t){"use strict";t.__esModule=!0,t.default={today:"Dnes",now:"Nyn\xed",backToToday:"Zp\u011bt na dne\u0161ek",ok:"Ok",clear:"Vymazat",month:"M\u011bs\xedc",year:"Rok",timeSelect:"Vybrat \u010das",dateSelect:"Vybrat datum",monthSelect:"Vyberte m\u011bs\xedc",yearSelect:"Vyberte rok",decadeSelect:"Vyberte dek\xe1du",yearFormat:"YYYY",dateFormat:"D.M.YYYY",dayFormat:"D",dateTimeFormat:"D.M.YYYY HH:mm:ss",monthBeforeYear:!0,previousMonth:"P\u0159edchoz\xed m\u011bs\xedc (PageUp)",nextMonth:"N\xe1sleduj\xedc\xed (PageDown)",previousYear:"P\u0159edchoz\xed rok (Control + left)",nextYear:"N\xe1sleduj\xedc\xed rok (Control + right)",previousDecade:"P\u0159edchoz\xed dek\xe1da",nextDecade:"N\xe1sleduj\xedc\xed dek\xe1da",previousCentury:"P\u0159edchoz\xed stolet\xed",nextCentury:"N\xe1sleduj\xedc\xed stolet\xed"},e.exports=t.default},10507:function(e,t){"use strict";t.__esModule=!0,t.default={today:"Heute",now:"Jetzt",backToToday:"Zur\xfcck zu Heute",ok:"OK",clear:"Zur\xfccksetzen",month:"Monat",year:"Jahr",timeSelect:"Zeit w\xe4hlen",dateSelect:"Datum w\xe4hlen",monthSelect:"W\xe4hle einen Monat",yearSelect:"W\xe4hle ein Jahr",decadeSelect:"W\xe4hle ein Jahrzehnt",yearFormat:"YYYY",dateFormat:"D.M.YYYY",dayFormat:"D",dateTimeFormat:"D.M.YYYY HH:mm:ss",monthBeforeYear:!0,previousMonth:"Vorheriger Monat (PageUp)",nextMonth:"N\xe4chster Monat (PageDown)",previousYear:"Vorheriges Jahr (Ctrl + left)",nextYear:"N\xe4chstes Jahr (Ctrl + right)",previousDecade:"Vorheriges Jahrzehnt",nextDecade:"N\xe4chstes Jahrzehnt",previousCentury:"Vorheriges Jahrhundert",nextCentury:"N\xe4chstes Jahrhundert"},e.exports=t.default},37932:function(e,t){"use strict";t.__esModule=!0,t.default={today:"Today",now:"Now",backToToday:"Back to today",ok:"Ok",clear:"Clear",month:"Month",year:"Year",timeSelect:"select time",dateSelect:"select date",weekSelect:"Choose a week",monthSelect:"Choose a month",yearSelect:"Choose a year",decadeSelect:"Choose a decade",yearFormat:"YYYY",dateFormat:"M/D/YYYY",dayFormat:"D",dateTimeFormat:"M/D/YYYY HH:mm:ss",monthBeforeYear:!0,previousMonth:"Previous month (PageUp)",nextMonth:"Next month (PageDown)",previousYear:"Last year (Control + left)",nextYear:"Next year (Control + right)",previousDecade:"Last decade",nextDecade:"Next decade",previousCentury:"Last century",nextCentury:"Next century"},e.exports=t.default},1205:function(e,t){"use strict";t.__esModule=!0,t.default={today:"Hoy",now:"Ahora",backToToday:"Volver a hoy",ok:"Aceptar",clear:"Limpiar",month:"Mes",year:"A\xf1o",timeSelect:"Seleccionar hora",dateSelect:"Seleccionar fecha",monthSelect:"Elegir un mes",yearSelect:"Elegir un a\xf1o",decadeSelect:"Elegir una d\xe9cada",yearFormat:"YYYY",dateFormat:"D/M/YYYY",dayFormat:"D",dateTimeFormat:"D/M/YYYY HH:mm:ss",monthBeforeYear:!0,previousMonth:"Mes anterior (PageUp)",nextMonth:"Mes siguiente (PageDown)",previousYear:"A\xf1o anterior (Control + left)",nextYear:"A\xf1o siguiente (Control + right)",previousDecade:"D\xe9cada anterior",nextDecade:"D\xe9cada siguiente",previousCentury:"Siglo anterior",nextCentury:"Siglo siguiente"},e.exports=t.default},88309:function(e,t){"use strict";t.__esModule=!0,t.default={today:"Aujourd'hui",now:"Maintenant",backToToday:"Aujourd'hui",ok:"Ok",clear:"R\xe9tablir",month:"Mois",year:"Ann\xe9e",timeSelect:"S\xe9lectionner l'heure",dateSelect:"S\xe9lectionner la date",monthSelect:"Choisissez un mois",yearSelect:"Choisissez une ann\xe9e",decadeSelect:"Choisissez une d\xe9cennie",yearFormat:"YYYY",dateFormat:"DD/MM/YYYY",dayFormat:"DD",dateTimeFormat:"DD/MM/YYYY HH:mm:ss",monthBeforeYear:!0,previousMonth:"Mois pr\xe9c\xe9dent (PageUp)",nextMonth:"Mois suivant (PageDown)",previousYear:"Ann\xe9e pr\xe9c\xe9dente (Ctrl + gauche)",nextYear:"Ann\xe9e prochaine (Ctrl + droite)",previousDecade:"D\xe9cennie pr\xe9c\xe9dente",nextDecade:"D\xe9cennie suivante",previousCentury:"Si\xe8cle pr\xe9c\xe9dent",nextCentury:"Si\xe8cle suivant"},e.exports=t.default},16969:function(e,t){"use strict";t.__esModule=!0,t.default={today:"Dzisiaj",now:"Teraz",backToToday:"Ustaw dzisiaj",ok:"Ok",clear:"Wyczy\u015b\u0107",month:"Miesi\u0105c",year:"Rok",timeSelect:"Ustaw czas",dateSelect:"Ustaw dat\u0119",monthSelect:"Wybierz miesi\u0105c",yearSelect:"Wybierz rok",decadeSelect:"Wybierz dekad\u0119",yearFormat:"YYYY",dateFormat:"D/M/YYYY",dayFormat:"D",dateTimeFormat:"D/M/YYYY HH:mm:ss",monthBeforeYear:!0,previousMonth:"Poprzedni miesi\u0105c (PageUp)",nextMonth:"Nast\u0119pny miesi\u0105c (PageDown)",previousYear:"Ostatni rok (Ctrl + left)",nextYear:"Nast\u0119pny rok (Ctrl + right)",previousDecade:"Ostatnia dekada",nextDecade:"Nast\u0119pna dekada",previousCentury:"Ostatni wiek",nextCentury:"Nast\u0119pny wiek"},e.exports=t.default},36967:function(e,t){"use strict";t.__esModule=!0,t.default={today:"\u0421\u0435\u0433\u043e\u0434\u043d\u044f",now:"\u0421\u0435\u0439\u0447\u0430\u0441",backToToday:"\u0422\u0435\u043a\u0443\u0449\u0430\u044f \u0434\u0430\u0442\u0430",ok:"Ok",clear:"\u041e\u0447\u0438\u0441\u0442\u0438\u0442\u044c",month:"\u041c\u0435\u0441\u044f\u0446",year:"\u0413\u043e\u0434",timeSelect:"\u0412\u044b\u0431\u0440\u0430\u0442\u044c \u0432\u0440\u0435\u043c\u044f",dateSelect:"\u0412\u044b\u0431\u0440\u0430\u0442\u044c \u0434\u0430\u0442\u0443",monthSelect:"\u0412\u044b\u0431\u0440\u0430\u0442\u044c \u043c\u0435\u0441\u044f\u0446",yearSelect:"\u0412\u044b\u0431\u0440\u0430\u0442\u044c \u0433\u043e\u0434",decadeSelect:"\u0412\u044b\u0431\u0440\u0430\u0442\u044c \u0434\u0435\u0441\u044f\u0442\u0438\u043b\u0435\u0442\u0438\u0435",yearFormat:"YYYY",dateFormat:"D-M-YYYY",dayFormat:"D",dateTimeFormat:"D-M-YYYY HH:mm:ss",monthBeforeYear:!0,previousMonth:"\u041f\u0440\u0435\u0434\u044b\u0434\u0443\u0449\u0438\u0439 \u043c\u0435\u0441\u044f\u0446 (PageUp)",nextMonth:"\u0421\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u0439 \u043c\u0435\u0441\u044f\u0446 (PageDown)",previousYear:"\u041f\u0440\u0435\u0434\u044b\u0434\u0443\u0449\u0438\u0439 \u0433\u043e\u0434 (Control + left)",nextYear:"\u0421\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u0439 \u0433\u043e\u0434 (Control + right)",previousDecade:"\u041f\u0440\u0435\u0434\u044b\u0434\u0443\u0449\u0435\u0435 \u0434\u0435\u0441\u044f\u0442\u0438\u043b\u0435\u0442\u0438\u0435",nextDecade:"\u0421\u043b\u0435\u0434\u0443\u0449\u0435\u0435 \u0434\u0435\u0441\u044f\u0442\u0438\u043b\u0435\u0442\u0438\u0435",previousCentury:"\u041f\u0440\u0435\u0434\u044b\u0434\u0443\u0449\u0438\u0439 \u0432\u0435\u043a",nextCentury:"\u0421\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u0439 \u0432\u0435\u043a"},e.exports=t.default},95502:function(e,t){"use strict";t.__esModule=!0,t.default={today:"\u4eca\u5929",now:"\u6b64\u523b",backToToday:"\u8fd4\u56de\u4eca\u5929",ok:"\u786e\u5b9a",timeSelect:"\u9009\u62e9\u65f6\u95f4",dateSelect:"\u9009\u62e9\u65e5\u671f",weekSelect:"\u9009\u62e9\u5468",clear:"\u6e05\u9664",month:"\u6708",year:"\u5e74",previousMonth:"\u4e0a\u4e2a\u6708 (\u7ffb\u9875\u4e0a\u952e)",nextMonth:"\u4e0b\u4e2a\u6708 (\u7ffb\u9875\u4e0b\u952e)",monthSelect:"\u9009\u62e9\u6708\u4efd",yearSelect:"\u9009\u62e9\u5e74\u4efd",decadeSelect:"\u9009\u62e9\u5e74\u4ee3",yearFormat:"YYYY\u5e74",dayFormat:"D\u65e5",dateFormat:"YYYY\u5e74M\u6708D\u65e5",dateTimeFormat:"YYYY\u5e74M\u6708D\u65e5 HH\u65f6mm\u5206ss\u79d2",previousYear:"\u4e0a\u4e00\u5e74 (Control\u952e\u52a0\u5de6\u65b9\u5411\u952e)",nextYear:"\u4e0b\u4e00\u5e74 (Control\u952e\u52a0\u53f3\u65b9\u5411\u952e)",previousDecade:"\u4e0a\u4e00\u5e74\u4ee3",nextDecade:"\u4e0b\u4e00\u5e74\u4ee3",previousCentury:"\u4e0a\u4e00\u4e16\u7eaa",nextCentury:"\u4e0b\u4e00\u4e16\u7eaa"},e.exports=t.default},33850:function(e,t){"use strict";t.__esModule=!0,t.default={today:"\u4eca\u5929",now:"\u6b64\u523b",backToToday:"\u8fd4\u56de\u4eca\u5929",ok:"\u78ba\u5b9a",timeSelect:"\u9078\u64c7\u6642\u9593",dateSelect:"\u9078\u64c7\u65e5\u671f",clear:"\u6e05\u9664",month:"\u6708",year:"\u5e74",previousMonth:"\u4e0a\u500b\u6708 (\u7ffb\u9801\u4e0a\u9375)",nextMonth:"\u4e0b\u500b\u6708 (\u7ffb\u9801\u4e0b\u9375)",monthSelect:"\u9078\u64c7\u6708\u4efd",yearSelect:"\u9078\u64c7\u5e74\u4efd",decadeSelect:"\u9078\u64c7\u5e74\u4ee3",yearFormat:"YYYY\u5e74",dayFormat:"D\u65e5",dateFormat:"YYYY\u5e74M\u6708D\u65e5",dateTimeFormat:"YYYY\u5e74M\u6708D\u65e5 HH\u6642mm\u5206ss\u79d2",previousYear:"\u4e0a\u4e00\u5e74 (Control\u9375\u52a0\u5de6\u65b9\u5411\u9375)",nextYear:"\u4e0b\u4e00\u5e74 (Control\u9375\u52a0\u53f3\u65b9\u5411\u9375)",previousDecade:"\u4e0a\u4e00\u5e74\u4ee3",nextDecade:"\u4e0b\u4e00\u5e74\u4ee3",previousCentury:"\u4e0a\u4e00\u4e16\u7d00",nextCentury:"\u4e0b\u4e00\u4e16\u7d00"},e.exports=t.default},32886:function(e,t){"use strict";t.__esModule=!0;var n={adjustX:1,adjustY:1},r=[0,0],o={bottomLeft:{points:["tl","tl"],overflow:n,offset:[0,-3],targetOffset:r},bottomRight:{points:["tr","tr"],overflow:n,offset:[0,-3],targetOffset:r},topRight:{points:["br","br"],overflow:n,offset:[0,3],targetOffset:r},topLeft:{points:["bl","bl"],overflow:n,offset:[0,3],targetOffset:r}};t.default=o,e.exports=t.default},86615:function(e,t){var n;!function(){"use strict";var r={}.hasOwnProperty;function o(){for(var e=[],t=0;t<arguments.length;t++){var n=arguments[t];if(n){var a=typeof n;if("string"===a||"number"===a)e.push(n);else if(Array.isArray(n)){if(n.length){var i=o.apply(null,n);i&&e.push(i)}}else if("object"===a){if(n.toString!==Object.prototype.toString&&!n.toString.toString().includes("[native code]")){e.push(n.toString());continue}for(var l in n)r.call(n,l)&&n[l]&&e.push(l)}}}return e.join(" ")}e.exports?(o.default=o,e.exports=o):void 0===(n=function(){return o}.apply(t,[]))||(e.exports=n)}()},84583:function(e){e.exports=function(){"use strict";var e=1e3,t=6e4,n=36e5,r="millisecond",o="second",a="minute",i="hour",l="day",s="week",u="month",c="quarter",d="year",f="date",p="Invalid Date",m=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,h=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,v={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_")},g=function(e,t,n){var r=String(e);return!r||r.length>=t?e:""+Array(t+1-r.length).join(n)+e},y={s:g,z:function(e){var t=-e.utcOffset(),n=Math.abs(t),r=Math.floor(n/60),o=n%60;return(t<=0?"+":"-")+g(r,2,"0")+":"+g(o,2,"0")},m:function e(t,n){if(t.date()<n.date())return-e(n,t);var r=12*(n.year()-t.year())+(n.month()-t.month()),o=t.clone().add(r,u),a=n-o<0,i=t.clone().add(r+(a?-1:1),u);return+(-(r+(n-o)/(a?o-i:i-o))||0)},a:function(e){return e<0?Math.ceil(e)||0:Math.floor(e)},p:function(e){return{M:u,y:d,w:s,d:l,D:f,h:i,m:a,s:o,ms:r,Q:c}[e]||String(e||"").toLowerCase().replace(/s$/,"")},u:function(e){return void 0===e}},C="en",E={};E[C]=v;var _=function(e){return e instanceof w},A=function(e,t,n){var r;if(!e)return C;if("string"==typeof e)E[e]&&(r=e),t&&(E[e]=t,r=e);else{var o=e.name;E[o]=e,r=o}return!n&&r&&(C=r),r||!n&&C},b=function(e,t){if(_(e))return e.clone();var n="object"==typeof t?t:{};return n.date=e,n.args=arguments,new w(n)},S=y;S.l=A,S.i=_,S.w=function(e,t){return b(e,{locale:t.$L,utc:t.$u,x:t.$x,$offset:t.$offset})};var w=function(){function v(e){this.$L=A(e.locale,null,!0),this.parse(e)}var g=v.prototype;return g.parse=function(e){this.$d=function(e){var t=e.date,n=e.utc;if(null===t)return new Date(NaN);if(S.u(t))return new Date;if(t instanceof Date)return new Date(t);if("string"==typeof t&&!/Z$/i.test(t)){var r=t.match(m);if(r){var o=r[2]-1||0,a=(r[7]||"0").substring(0,3);return n?new Date(Date.UTC(r[1],o,r[3]||1,r[4]||0,r[5]||0,r[6]||0,a)):new Date(r[1],o,r[3]||1,r[4]||0,r[5]||0,r[6]||0,a)}}return new Date(t)}(e),this.$x=e.x||{},this.init()},g.init=function(){var e=this.$d;this.$y=e.getFullYear(),this.$M=e.getMonth(),this.$D=e.getDate(),this.$W=e.getDay(),this.$H=e.getHours(),this.$m=e.getMinutes(),this.$s=e.getSeconds(),this.$ms=e.getMilliseconds()},g.$utils=function(){return S},g.isValid=function(){return!(this.$d.toString()===p)},g.isSame=function(e,t){var n=b(e);return this.startOf(t)<=n&&n<=this.endOf(t)},g.isAfter=function(e,t){return b(e)<this.startOf(t)},g.isBefore=function(e,t){return this.endOf(t)<b(e)},g.$g=function(e,t,n){return S.u(e)?this[t]:this.set(n,e)},g.unix=function(){return Math.floor(this.valueOf()/1e3)},g.valueOf=function(){return this.$d.getTime()},g.startOf=function(e,t){var n=this,r=!!S.u(t)||t,c=S.p(e),p=function(e,t){var o=S.w(n.$u?Date.UTC(n.$y,t,e):new Date(n.$y,t,e),n);return r?o:o.endOf(l)},m=function(e,t){return S.w(n.toDate()[e].apply(n.toDate("s"),(r?[0,0,0,0]:[23,59,59,999]).slice(t)),n)},h=this.$W,v=this.$M,g=this.$D,y="set"+(this.$u?"UTC":"");switch(c){case d:return r?p(1,0):p(31,11);case u:return r?p(1,v):p(0,v+1);case s:var C=this.$locale().weekStart||0,E=(h<C?h+7:h)-C;return p(r?g-E:g+(6-E),v);case l:case f:return m(y+"Hours",0);case i:return m(y+"Minutes",1);case a:return m(y+"Seconds",2);case o:return m(y+"Milliseconds",3);default:return this.clone()}},g.endOf=function(e){return this.startOf(e,!1)},g.$set=function(e,t){var n,s=S.p(e),c="set"+(this.$u?"UTC":""),p=(n={},n[l]=c+"Date",n[f]=c+"Date",n[u]=c+"Month",n[d]=c+"FullYear",n[i]=c+"Hours",n[a]=c+"Minutes",n[o]=c+"Seconds",n[r]=c+"Milliseconds",n)[s],m=s===l?this.$D+(t-this.$W):t;if(s===u||s===d){var h=this.clone().set(f,1);h.$d[p](m),h.init(),this.$d=h.set(f,Math.min(this.$D,h.daysInMonth())).$d}else p&&this.$d[p](m);return this.init(),this},g.set=function(e,t){return this.clone().$set(e,t)},g.get=function(e){return this[S.p(e)]()},g.add=function(r,c){var f,p=this;r=Number(r);var m=S.p(c),h=function(e){var t=b(p);return S.w(t.date(t.date()+Math.round(e*r)),p)};if(m===u)return this.set(u,this.$M+r);if(m===d)return this.set(d,this.$y+r);if(m===l)return h(1);if(m===s)return h(7);var v=(f={},f[a]=t,f[i]=n,f[o]=e,f)[m]||1,g=this.$d.getTime()+r*v;return S.w(g,this)},g.subtract=function(e,t){return this.add(-1*e,t)},g.format=function(e){var t=this,n=this.$locale();if(!this.isValid())return n.invalidDate||p;var r=e||"YYYY-MM-DDTHH:mm:ssZ",o=S.z(this),a=this.$H,i=this.$m,l=this.$M,s=n.weekdays,u=n.months,c=function(e,n,o,a){return e&&(e[n]||e(t,r))||o[n].substr(0,a)},d=function(e){return S.s(a%12||12,e,"0")},f=n.meridiem||function(e,t,n){var r=e<12?"AM":"PM";return n?r.toLowerCase():r},m={YY:String(this.$y).slice(-2),YYYY:this.$y,M:l+1,MM:S.s(l+1,2,"0"),MMM:c(n.monthsShort,l,u,3),MMMM:c(u,l),D:this.$D,DD:S.s(this.$D,2,"0"),d:String(this.$W),dd:c(n.weekdaysMin,this.$W,s,2),ddd:c(n.weekdaysShort,this.$W,s,3),dddd:s[this.$W],H:String(a),HH:S.s(a,2,"0"),h:d(1),hh:d(2),a:f(a,i,!0),A:f(a,i,!1),m:String(i),mm:S.s(i,2,"0"),s:String(this.$s),ss:S.s(this.$s,2,"0"),SSS:S.s(this.$ms,3,"0"),Z:o};return r.replace(h,(function(e,t){return t||m[e]||o.replace(":","")}))},g.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},g.diff=function(r,f,p){var m,h=S.p(f),v=b(r),g=(v.utcOffset()-this.utcOffset())*t,y=this-v,C=S.m(this,v);return C=(m={},m[d]=C/12,m[u]=C,m[c]=C/3,m[s]=(y-g)/6048e5,m[l]=(y-g)/864e5,m[i]=y/n,m[a]=y/t,m[o]=y/e,m)[h]||y,p?C:S.a(C)},g.daysInMonth=function(){return this.endOf(u).$D},g.$locale=function(){return E[this.$L]},g.locale=function(e,t){if(!e)return this.$L;var n=this.clone(),r=A(e,t,!0);return r&&(n.$L=r),n},g.clone=function(){return S.w(this.$d,this)},g.toDate=function(){return new Date(this.valueOf())},g.toJSON=function(){return this.isValid()?this.toISOString():null},g.toISOString=function(){return this.$d.toISOString()},g.toString=function(){return this.$d.toUTCString()},v}(),O=w.prototype;return b.prototype=O,[["$ms",r],["$s",o],["$m",a],["$H",i],["$W",l],["$M",u],["$y",d],["$D",f]].forEach((function(e){O[e[1]]=function(t){return this.$g(t,e[0],e[1])}})),b.extend=function(e,t){return e.$i||(e(t,w,b),e.$i=!0),b},b.locale=A,b.isDayjs=_,b.unix=function(e){return b(1e3*e)},b.en=E[C],b.Ls=E,b.p={},b}()},92356:function(e,t,n){e.exports=function(e){"use strict";function t(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var n=t(e),r={name:"en-gb",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekStart:1,yearStart:4,relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},formats:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},ordinal:function(e){var t=["th","st","nd","rd"],n=e%100;return"["+e+(t[(n-20)%10]||t[n]||t[0])+"]"}};return n.default.locale(r,null,!0),r}(n(84583))},43195:function(e,t,n){e.exports=function(e){"use strict";function t(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var n=t(e),r={name:"zh-cn",weekdays:"\u661f\u671f\u65e5_\u661f\u671f\u4e00_\u661f\u671f\u4e8c_\u661f\u671f\u4e09_\u661f\u671f\u56db_\u661f\u671f\u4e94_\u661f\u671f\u516d".split("_"),weekdaysShort:"\u5468\u65e5_\u5468\u4e00_\u5468\u4e8c_\u5468\u4e09_\u5468\u56db_\u5468\u4e94_\u5468\u516d".split("_"),weekdaysMin:"\u65e5_\u4e00_\u4e8c_\u4e09_\u56db_\u4e94_\u516d".split("_"),months:"\u4e00\u6708_\u4e8c\u6708_\u4e09\u6708_\u56db\u6708_\u4e94\u6708_\u516d\u6708_\u4e03\u6708_\u516b\u6708_\u4e5d\u6708_\u5341\u6708_\u5341\u4e00\u6708_\u5341\u4e8c\u6708".split("_"),monthsShort:"1\u6708_2\u6708_3\u6708_4\u6708_5\u6708_6\u6708_7\u6708_8\u6708_9\u6708_10\u6708_11\u6708_12\u6708".split("_"),ordinal:function(e,t){return"W"===t?e+"\u5468":e+"\u65e5"},weekStart:1,yearStart:4,formats:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY/MM/DD",LL:"YYYY\u5e74M\u6708D\u65e5",LLL:"YYYY\u5e74M\u6708D\u65e5Ah\u70b9mm\u5206",LLLL:"YYYY\u5e74M\u6708D\u65e5ddddAh\u70b9mm\u5206",l:"YYYY/M/D",ll:"YYYY\u5e74M\u6708D\u65e5",lll:"YYYY\u5e74M\u6708D\u65e5 HH:mm",llll:"YYYY\u5e74M\u6708D\u65e5dddd HH:mm"},relativeTime:{future:"%s\u5185",past:"%s\u524d",s:"\u51e0\u79d2",m:"1 \u5206\u949f",mm:"%d \u5206\u949f",h:"1 \u5c0f\u65f6",hh:"%d \u5c0f\u65f6",d:"1 \u5929",dd:"%d \u5929",M:"1 \u4e2a\u6708",MM:"%d \u4e2a\u6708",y:"1 \u5e74",yy:"%d \u5e74"},meridiem:function(e,t){var n=100*e+t;return n<600?"\u51cc\u6668":n<900?"\u65e9\u4e0a":n<1100?"\u4e0a\u5348":n<1300?"\u4e2d\u5348":n<1800?"\u4e0b\u5348":"\u665a\u4e0a"}};return n.default.locale(r,null,!0),r}(n(84583))},27619:function(e){e.exports=function(){"use strict";var e={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},t=/(\[[^[]*\])|([-:/.()\s]+)|(A|a|YYYY|YY?|MM?M?M?|Do|DD?|hh?|HH?|mm?|ss?|S{1,3}|z|ZZ?)/g,n=/\d\d/,r=/\d\d?/,o=/\d*[^\s\d-_:/()]+/,a={},i=function(e){return(e=+e)+(e>68?1900:2e3)},l=function(e){return function(t){this[e]=+t}},s=[/[+-]\d\d:?(\d\d)?|Z/,function(e){(this.zone||(this.zone={})).offset=function(e){if(!e)return 0;if("Z"===e)return 0;var t=e.match(/([+-]|\d\d)/g),n=60*t[1]+(+t[2]||0);return 0===n?0:"+"===t[0]?-n:n}(e)}],u=function(e){var t=a[e];return t&&(t.indexOf?t:t.s.concat(t.f))},c=function(e,t){var n,r=a.meridiem;if(r){for(var o=1;o<=24;o+=1)if(e.indexOf(r(o,0,t))>-1){n=o>12;break}}else n=e===(t?"pm":"PM");return n},d={A:[o,function(e){this.afternoon=c(e,!1)}],a:[o,function(e){this.afternoon=c(e,!0)}],S:[/\d/,function(e){this.milliseconds=100*+e}],SS:[n,function(e){this.milliseconds=10*+e}],SSS:[/\d{3}/,function(e){this.milliseconds=+e}],s:[r,l("seconds")],ss:[r,l("seconds")],m:[r,l("minutes")],mm:[r,l("minutes")],H:[r,l("hours")],h:[r,l("hours")],HH:[r,l("hours")],hh:[r,l("hours")],D:[r,l("day")],DD:[n,l("day")],Do:[o,function(e){var t=a.ordinal,n=e.match(/\d+/);if(this.day=n[0],t)for(var r=1;r<=31;r+=1)t(r).replace(/\[|\]/g,"")===e&&(this.day=r)}],M:[r,l("month")],MM:[n,l("month")],MMM:[o,function(e){var t=u("months"),n=(u("monthsShort")||t.map((function(e){return e.substr(0,3)}))).indexOf(e)+1;if(n<1)throw new Error;this.month=n%12||n}],MMMM:[o,function(e){var t=u("months").indexOf(e)+1;if(t<1)throw new Error;this.month=t%12||t}],Y:[/[+-]?\d+/,l("year")],YY:[n,function(e){this.year=i(e)}],YYYY:[/\d{4}/,l("year")],Z:s,ZZ:s};function f(n){var r,o;r=n,o=a&&a.formats;for(var i=(n=r.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,(function(t,n,r){var a=r&&r.toUpperCase();return n||o[r]||e[r]||o[a].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,(function(e,t,n){return t||n.slice(1)}))}))).match(t),l=i.length,s=0;s<l;s+=1){var u=i[s],c=d[u],f=c&&c[0],p=c&&c[1];i[s]=p?{regex:f,parser:p}:u.replace(/^\[|\]$/g,"")}return function(e){for(var t={},n=0,r=0;n<l;n+=1){var o=i[n];if("string"==typeof o)r+=o.length;else{var a=o.regex,s=o.parser,u=e.substr(r),c=a.exec(u)[0];s.call(t,c),e=e.replace(c,"")}}return function(e){var t=e.afternoon;if(void 0!==t){var n=e.hours;t?n<12&&(e.hours+=12):12===n&&(e.hours=0),delete e.afternoon}}(t),t}}return function(e,t,n){n.p.customParseFormat=!0,e&&e.parseTwoDigitYear&&(i=e.parseTwoDigitYear);var r=t.prototype,o=r.parse;r.parse=function(e){var t=e.date,r=e.utc,i=e.args;this.$u=r;var l=i[1];if("string"==typeof l){var s=!0===i[2],u=!0===i[3],c=s||u,d=i[2];u&&(d=i[2]),a=this.$locale(),!s&&d&&(a=n.Ls[d]),this.$d=function(e,t,n){try{if(["x","X"].indexOf(t)>-1)return new Date(("X"===t?1e3:1)*e);var r=f(t)(e),o=r.year,a=r.month,i=r.day,l=r.hours,s=r.minutes,u=r.seconds,c=r.milliseconds,d=r.zone,p=new Date,m=i||(o||a?1:p.getDate()),h=o||p.getFullYear(),v=0;o&&!a||(v=a>0?a-1:p.getMonth());var g=l||0,y=s||0,C=u||0,E=c||0;return d?new Date(Date.UTC(h,v,m,g,y,C,E+60*d.offset*1e3)):n?new Date(Date.UTC(h,v,m,g,y,C,E)):new Date(h,v,m,g,y,C,E)}catch(e){return new Date("")}}(t,l,r),this.init(),d&&!0!==d&&(this.$L=this.locale(d).$L),c&&t!=this.format(l)&&(this.$d=new Date("")),a={}}else if(l instanceof Array)for(var p=l.length,m=1;m<=p;m+=1){i[1]=l[m-1];var h=n.apply(this,i);if(h.isValid()){this.$d=h.$d,this.$L=h.$L,this.init();break}m===p&&(this.$d=new Date(""))}else o.call(this,e)}}}()},43650:function(e){e.exports=function(){"use strict";return function(e,t,n){var r=t.prototype,o=function(e){return e&&(e.indexOf?e:e.s)},a=function(e,t,n,r,a){var i=e.name?e:e.$locale(),l=o(i[t]),s=o(i[n]),u=l||s.map((function(e){return e.substr(0,r)}));if(!a)return u;var c=i.weekStart;return u.map((function(e,t){return u[(t+(c||0))%7]}))},i=function(){return n.Ls[n.locale()]},l=function(e,t){return e.formats[t]||function(e){return e.replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,(function(e,t,n){return t||n.slice(1)}))}(e.formats[t.toUpperCase()])},s=function(){var e=this;return{months:function(t){return t?t.format("MMMM"):a(e,"months")},monthsShort:function(t){return t?t.format("MMM"):a(e,"monthsShort","months",3)},firstDayOfWeek:function(){return e.$locale().weekStart||0},weekdays:function(t){return t?t.format("dddd"):a(e,"weekdays")},weekdaysMin:function(t){return t?t.format("dd"):a(e,"weekdaysMin","weekdays",2)},weekdaysShort:function(t){return t?t.format("ddd"):a(e,"weekdaysShort","weekdays",3)},longDateFormat:function(t){return l(e.$locale(),t)},meridiem:this.$locale().meridiem,ordinal:this.$locale().ordinal}};r.localeData=function(){return s.bind(this)()},n.localeData=function(){var e=i();return{firstDayOfWeek:function(){return e.weekStart||0},weekdays:function(){return n.weekdays()},weekdaysShort:function(){return n.weekdaysShort()},weekdaysMin:function(){return n.weekdaysMin()},months:function(){return n.months()},monthsShort:function(){return n.monthsShort()},longDateFormat:function(t){return l(e,t)},meridiem:e.meridiem,ordinal:e.ordinal}},n.months=function(){return a(i(),"months")},n.monthsShort=function(){return a(i(),"monthsShort","months",3)},n.weekdays=function(e){return a(i(),"weekdays",null,null,e)},n.weekdaysShort=function(e){return a(i(),"weekdaysShort","weekdays",3,e)},n.weekdaysMin=function(e){return a(i(),"weekdaysMin","weekdays",2,e)}}}()},6740:function(e){e.exports=function(){"use strict";var e="minute",t=/[+-]\d\d(?::?\d\d)?/g,n=/([+-]|\d\d)/g;return function(r,o,a){var i=o.prototype;a.utc=function(e){return new o({date:e,utc:!0,args:arguments})},i.utc=function(t){var n=a(this.toDate(),{locale:this.$L,utc:!0});return t?n.add(this.utcOffset(),e):n},i.local=function(){return a(this.toDate(),{locale:this.$L,utc:!1})};var l=i.parse;i.parse=function(e){e.utc&&(this.$u=!0),this.$utils().u(e.$offset)||(this.$offset=e.$offset),l.call(this,e)};var s=i.init;i.init=function(){if(this.$u){var e=this.$d;this.$y=e.getUTCFullYear(),this.$M=e.getUTCMonth(),this.$D=e.getUTCDate(),this.$W=e.getUTCDay(),this.$H=e.getUTCHours(),this.$m=e.getUTCMinutes(),this.$s=e.getUTCSeconds(),this.$ms=e.getUTCMilliseconds()}else s.call(this)};var u=i.utcOffset;i.utcOffset=function(r,o){var a=this.$utils().u;if(a(r))return this.$u?0:a(this.$offset)?u.call(this):this.$offset;if("string"==typeof r&&null===(r=function(e){void 0===e&&(e="");var r=e.match(t);if(!r)return null;var o=(""+r[0]).match(n)||["-",0,0],a=o[0],i=60*+o[1]+ +o[2];return 0===i?0:"+"===a?i:-i}(r)))return this;var i=Math.abs(r)<=16?60*r:r,l=this;if(o)return l.$offset=i,l.$u=0===r,l;if(0!==r){var s=this.$u?this.toDate().getTimezoneOffset():-1*this.utcOffset();(l=this.local().add(i+s,e)).$offset=i,l.$x.$localOffset=s}else l=this.utc();return l};var c=i.format;i.format=function(e){var t=e||(this.$u?"YYYY-MM-DDTHH:mm:ss[Z]":"");return c.call(this,t)},i.valueOf=function(){var e=this.$utils().u(this.$offset)?0:this.$offset+(this.$x.$localOffset||(new Date).getTimezoneOffset());return this.$d.valueOf()-6e4*e},i.isUTC=function(){return!!this.$u},i.toISOString=function(){return this.toDate().toISOString()},i.toString=function(){return this.toDate().toUTCString()};var d=i.toDate;i.toDate=function(e){return"s"===e&&this.$offset?a(this.format("YYYY-MM-DD HH:mm:ss:SSS")).toDate():d.call(this)};var f=i.diff;i.diff=function(e,t,n){if(e&&this.$u===e.$u)return f.call(this,e,t,n);var r=this.local(),o=a(e).local();return f.call(r,o,t,n)}}}()},97676:function(e){e.exports=function(){"use strict";var e="week",t="year";return function(n,r,o){var a=r.prototype;a.week=function(n){if(void 0===n&&(n=null),null!==n)return this.add(7*(n-this.week()),"day");var r=this.$locale().yearStart||1;if(11===this.month()&&this.date()>25){var a=o(this).startOf(t).add(1,t).date(r),i=o(this).endOf(e);if(a.isBefore(i))return 1}var l=o(this).startOf(t).date(r).startOf(e).subtract(1,"millisecond"),s=this.diff(l,e,!0);return s<0?o(this).startOf("week").week():Math.ceil(s)},a.weeks=function(e){return void 0===e&&(e=null),this.week(e)}}}()},36220:function(e){e.exports=function(){"use strict";var e="minute",t=/[+-]\d\d(?::?\d\d)?/g,n=/([+-]|\d\d)/g;return function(r,o,a){var i=o.prototype;a.utc=function(e){return new o({date:e,utc:!0,args:arguments})},i.utc=function(t){var n=a(this.toDate(),{locale:this.$L,utc:!0});return t?n.add(this.utcOffset(),e):n},i.local=function(){return a(this.toDate(),{locale:this.$L,utc:!1})};var l=i.parse;i.parse=function(e){e.utc&&(this.$u=!0),this.$utils().u(e.$offset)||(this.$offset=e.$offset),l.call(this,e)};var s=i.init;i.init=function(){if(this.$u){var e=this.$d;this.$y=e.getUTCFullYear(),this.$M=e.getUTCMonth(),this.$D=e.getUTCDate(),this.$W=e.getUTCDay(),this.$H=e.getUTCHours(),this.$m=e.getUTCMinutes(),this.$s=e.getUTCSeconds(),this.$ms=e.getUTCMilliseconds()}else s.call(this)};var u=i.utcOffset;i.utcOffset=function(r,o){var a=this.$utils().u;if(a(r))return this.$u?0:a(this.$offset)?u.call(this):this.$offset;if("string"==typeof r&&(r=function(e){void 0===e&&(e="");var r=e.match(t);if(!r)return null;var o=(""+r[0]).match(n)||["-",0,0],a=o[0],i=60*+o[1]+ +o[2];return 0===i?0:"+"===a?i:-i}(r),null===r))return this;var i=Math.abs(r)<=16?60*r:r,l=this;if(o)return l.$offset=i,l.$u=0===r,l;if(0!==r){var s=this.$u?this.toDate().getTimezoneOffset():-1*this.utcOffset();(l=this.local().add(i+s,e)).$offset=i,l.$x.$localOffset=s}else l=this.utc();return l};var c=i.format;i.format=function(e){var t=e||(this.$u?"YYYY-MM-DDTHH:mm:ss[Z]":"");return c.call(this,t)},i.valueOf=function(){var e=this.$utils().u(this.$offset)?0:this.$offset+(this.$x.$localOffset||this.$d.getTimezoneOffset());return this.$d.valueOf()-6e4*e},i.isUTC=function(){return!!this.$u},i.toISOString=function(){return this.toDate().toISOString()},i.toString=function(){return this.toDate().toUTCString()};var d=i.toDate;i.toDate=function(e){return"s"===e&&this.$offset?a(this.format("YYYY-MM-DD HH:mm:ss:SSS")).toDate():d.call(this)};var f=i.diff;i.diff=function(e,t,n){if(e&&this.$u===e.$u)return f.call(this,e,t,n);var r=this.local(),o=a(e).local();return f.call(r,o,t,n)}}}()},742:function(e){"use strict";var t=/["'&<>]/;e.exports=function(e){var n,r=""+e,o=t.exec(r);if(!o)return r;var a="",i=0,l=0;for(i=o.index;i<r.length;i++){switch(r.charCodeAt(i)){case 34:n="&quot;";break;case 38:n="&amp;";break;case 39:n="&#39;";break;case 60:n="&lt;";break;case 62:n="&gt;";break;default:continue}l!==i&&(a+=r.substring(l,i)),l=i+1,a+=n}return l!==i?a+r.substring(l,i):a}},10865:function(e,t,n){"use strict";var r;function o(e){return e.type===r.literal}function a(e){return e.type===r.argument}function i(e){return e.type===r.number}function l(e){return e.type===r.date}function s(e){return e.type===r.time}function u(e){return e.type===r.select}function c(e){return e.type===r.plural}function d(e){return e.type===r.pound}function f(e){return!(!e||"object"!==typeof e||0!==e.type)}function p(e){return!(!e||"object"!==typeof e||1!==e.type)}n.r(t),n.d(t,{IntlMessageFormat:function(){return Q},createDefaultFormatters:function(){return q},default:function(){return J},formatHTMLMessage:function(){return W},formatToParts:function(){return j},formatToString:function(){return Y}}),function(e){e[e.literal=0]="literal",e[e.argument=1]="argument",e[e.number=2]="number",e[e.date=3]="date",e[e.time=4]="time",e[e.select=5]="select",e[e.plural=6]="plural",e[e.pound=7]="pound"}(r||(r={}));var m=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),h=function(){return h=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},h.apply(this,arguments)},v=function(e){function t(n,r,o,a){var i=e.call(this)||this;return i.message=n,i.expected=r,i.found=o,i.location=a,i.name="SyntaxError","function"===typeof Error.captureStackTrace&&Error.captureStackTrace(i,t),i}return m(t,e),t.buildMessage=function(e,t){function n(e){return e.charCodeAt(0).toString(16).toUpperCase()}function r(e){return e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,(function(e){return"\\x0"+n(e)})).replace(/[\x10-\x1F\x7F-\x9F]/g,(function(e){return"\\x"+n(e)}))}function o(e){return e.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,(function(e){return"\\x0"+n(e)})).replace(/[\x10-\x1F\x7F-\x9F]/g,(function(e){return"\\x"+n(e)}))}function a(e){switch(e.type){case"literal":return'"'+r(e.text)+'"';case"class":var t=e.parts.map((function(e){return Array.isArray(e)?o(e[0])+"-"+o(e[1]):o(e)}));return"["+(e.inverted?"^":"")+t+"]";case"any":return"any character";case"end":return"end of input";case"other":return e.description}}return"Expected "+function(e){var t,n,r=e.map(a);if(r.sort(),r.length>0){for(t=1,n=1;t<r.length;t++)r[t-1]!==r[t]&&(r[n]=r[t],n++);r.length=n}switch(r.length){case 1:return r[0];case 2:return r[0]+" or "+r[1];default:return r.slice(0,-1).join(", ")+", or "+r[r.length-1]}}(e)+" but "+(((i=t)?'"'+r(i)+'"':"end of input")+" found.");var i},t}(Error);var g=function(e,t){t=void 0!==t?t:{};var n,o={},a={start:ct},i=ct,l=function(e){return e.join("")},s=function(e){return h({type:r.literal,value:e},Nt())},u="#",c=rt("#",!1),d=function(){return h({type:r.pound},Nt())},f=at("argumentElement"),p="{",m=rt("{",!1),g="}",y=rt("}",!1),C=function(e){return h({type:r.argument,value:e},Nt())},E=at("numberSkeletonId"),_=/^['\/{}]/,A=ot(["'","/","{","}"],!1,!1),b={type:"any"},S=at("numberSkeletonTokenOption"),w="/",O=rt("/",!1),R=function(e){return e},T=at("numberSkeletonToken"),x=function(e,t){return{stem:e,options:t}},M=function(e){return h({type:0,tokens:e},Nt())},D="::",I=rt("::",!1),N=function(e){return e},L=function(){return Dt.push("numberArgStyle"),!0},k=function(e){return Dt.pop(),e.replace(/\s*$/,"")},P=",",F=rt(",",!1),j="number",Y=rt("number",!1),U=function(e,t,n){return h({type:"number"===t?r.number:"date"===t?r.date:r.time,style:n&&n[2],value:e},Nt())},B="'",H=rt("'",!1),G=/^[^']/,V=ot(["'"],!0,!1),Z=/^[^a-zA-Z'{}]/,z=ot([["a","z"],["A","Z"],"'","{","}"],!0,!1),X=/^[a-zA-Z]/,W=ot([["a","z"],["A","Z"]],!1,!1),K=function(e){return h({type:1,pattern:e},Nt())},$=function(){return Dt.push("dateOrTimeArgStyle"),!0},q="date",Q=rt("date",!1),J="time",ee=rt("time",!1),te="plural",ne=rt("plural",!1),re="selectordinal",oe=rt("selectordinal",!1),ae="offset:",ie=rt("offset:",!1),le=function(e,t,n,o){return h({type:r.plural,pluralType:"plural"===t?"cardinal":"ordinal",value:e,offset:n?n[2]:0,options:o.reduce((function(e,t){var n=t.id,r=t.value,o=t.location;return n in e&&nt('Duplicate option "'+n+'" in plural element: "'+et()+'"',tt()),e[n]={value:r,location:o},e}),{})},Nt())},se="select",ue=rt("select",!1),ce=function(e,t){return h({type:r.select,value:e,options:t.reduce((function(e,t){var n=t.id,r=t.value,o=t.location;return n in e&&nt('Duplicate option "'+n+'" in select element: "'+et()+'"',tt()),e[n]={value:r,location:o},e}),{})},Nt())},de="=",fe=rt("=",!1),pe=function(e){return Dt.push("select"),!0},me=function(e,t){return Dt.pop(),h({id:e,value:t},Nt())},he=function(e){return Dt.push("plural"),!0},ve=function(e,t){return Dt.pop(),h({id:e,value:t},Nt())},ge=at("whitespace"),ye=/^[\t-\r \x85\xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000]/,Ce=ot([["\t","\r"]," ","\x85","\xa0","\u1680",["\u2000","\u200a"],"\u2028","\u2029","\u202f","\u205f","\u3000"],!1,!1),Ee=at("syntax pattern"),_e=/^[!-\/:-@[-\^`{-~\xA1-\xA7\xA9\xAB\xAC\xAE\xB0\xB1\xB6\xBB\xBF\xD7\xF7\u2010-\u2027\u2030-\u203E\u2041-\u2053\u2055-\u205E\u2190-\u245F\u2500-\u2775\u2794-\u2BFF\u2E00-\u2E7F\u3001-\u3003\u3008-\u3020\u3030\uFD3E\uFD3F\uFE45\uFE46]/,Ae=ot([["!","/"],[":","@"],["[","^"],"`",["{","~"],["\xa1","\xa7"],"\xa9","\xab","\xac","\xae","\xb0","\xb1","\xb6","\xbb","\xbf","\xd7","\xf7",["\u2010","\u2027"],["\u2030","\u203e"],["\u2041","\u2053"],["\u2055","\u205e"],["\u2190","\u245f"],["\u2500","\u2775"],["\u2794","\u2bff"],["\u2e00","\u2e7f"],["\u3001","\u3003"],["\u3008","\u3020"],"\u3030","\ufd3e","\ufd3f","\ufe45","\ufe46"],!1,!1),be=at("optional whitespace"),Se=at("number"),we="-",Oe=rt("-",!1),Re=function(e,t){return t?e?-t:t:0},Te=(at("apostrophe"),at("double apostrophes")),xe="''",Me=rt("''",!1),De=function(){return"'"},Ie=function(e,t){return e+t.replace("''","'")},Ne=function(e){return"{"!==e&&!(It()&&"#"===e)&&!(Dt.length>1&&"}"===e)},Le="\n",ke=rt("\n",!1),Pe=function(e){return"{"===e||"}"===e||It()&&"#"===e},Fe=at("argNameOrNumber"),je=at("argNumber"),Ye="0",Ue=rt("0",!1),Be=function(){return 0},He=/^[1-9]/,Ge=ot([["1","9"]],!1,!1),Ve=/^[0-9]/,Ze=ot([["0","9"]],!1,!1),ze=function(e){return parseInt(e.join(""),10)},Xe=at("argName"),We=0,Ke=0,$e=[{line:1,column:1}],qe=0,Qe=[],Je=0;if(void 0!==t.startRule){if(!(t.startRule in a))throw new Error("Can't start parsing from rule \""+t.startRule+'".');i=a[t.startRule]}function et(){return e.substring(Ke,We)}function tt(){return lt(Ke,We)}function nt(e,t){throw function(e,t){return new v(e,[],"",t)}(e,t=void 0!==t?t:lt(Ke,We))}function rt(e,t){return{type:"literal",text:e,ignoreCase:t}}function ot(e,t,n){return{type:"class",parts:e,inverted:t,ignoreCase:n}}function at(e){return{type:"other",description:e}}function it(t){var n,r=$e[t];if(r)return r;for(n=t-1;!$e[n];)n--;for(r={line:(r=$e[n]).line,column:r.column};n<t;)10===e.charCodeAt(n)?(r.line++,r.column=1):r.column++,n++;return $e[t]=r,r}function lt(e,t){var n=it(e),r=it(t);return{start:{offset:e,line:n.line,column:n.column},end:{offset:t,line:r.line,column:r.column}}}function st(e){We<qe||(We>qe&&(qe=We,Qe=[]),Qe.push(e))}function ut(e,t,n){return new v(v.buildMessage(e,t),e,t,n)}function ct(){return dt()}function dt(){var e,t;for(e=[],t=ft();t!==o;)e.push(t),t=ft();return e}function ft(){var t;return(t=function(){var e,t;e=We,(t=pt())!==o&&(Ke=e,t=s(t));return e=t,e}())===o&&(t=function(){var t,n,r,a;Je++,t=We,123===e.charCodeAt(We)?(n=p,We++):(n=o,0===Je&&st(m));n!==o&&bt()!==o&&(r=Tt())!==o&&bt()!==o?(125===e.charCodeAt(We)?(a=g,We++):(a=o,0===Je&&st(y)),a!==o?(Ke=t,t=n=C(r)):(We=t,t=o)):(We=t,t=o);Je--,t===o&&(n=o,0===Je&&st(f));return t}())===o&&(t=function(){var t;t=function(){var t,n,r,a,i,l,s,u,c;t=We,123===e.charCodeAt(We)?(n=p,We++):(n=o,0===Je&&st(m));n!==o&&bt()!==o&&(r=Tt())!==o&&bt()!==o?(44===e.charCodeAt(We)?(a=P,We++):(a=o,0===Je&&st(F)),a!==o&&bt()!==o?(e.substr(We,6)===j?(i=j,We+=6):(i=o,0===Je&&st(Y)),i!==o&&bt()!==o?(l=We,44===e.charCodeAt(We)?(s=P,We++):(s=o,0===Je&&st(F)),s!==o&&(u=bt())!==o?(c=function(){var t,n,r;t=We,e.substr(We,2)===D?(n=D,We+=2):(n=o,0===Je&&st(I));n!==o?(r=function(){var e,t,n;if(e=We,t=[],n=vt(),n!==o)for(;n!==o;)t.push(n),n=vt();else t=o;t!==o&&(Ke=e,t=M(t));return e=t,e}(),r!==o?(Ke=t,t=n=N(r)):(We=t,t=o)):(We=t,t=o);t===o&&(t=We,Ke=We,(n=(n=L())?void 0:o)!==o&&(r=pt())!==o?(Ke=t,t=n=k(r)):(We=t,t=o));return t}(),c!==o?l=s=[s,u,c]:(We=l,l=o)):(We=l,l=o),l===o&&(l=null),l!==o&&(s=bt())!==o?(125===e.charCodeAt(We)?(u=g,We++):(u=o,0===Je&&st(y)),u!==o?(Ke=t,t=n=U(r,i,l)):(We=t,t=o)):(We=t,t=o)):(We=t,t=o)):(We=t,t=o)):(We=t,t=o);return t}(),t===o&&(t=function(){var t,n,r,a,i,l,s,u,c;t=We,123===e.charCodeAt(We)?(n=p,We++):(n=o,0===Je&&st(m));n!==o&&bt()!==o&&(r=Tt())!==o&&bt()!==o?(44===e.charCodeAt(We)?(a=P,We++):(a=o,0===Je&&st(F)),a!==o&&bt()!==o?(e.substr(We,4)===q?(i=q,We+=4):(i=o,0===Je&&st(Q)),i===o&&(e.substr(We,4)===J?(i=J,We+=4):(i=o,0===Je&&st(ee))),i!==o&&bt()!==o?(l=We,44===e.charCodeAt(We)?(s=P,We++):(s=o,0===Je&&st(F)),s!==o&&(u=bt())!==o?(c=function(){var t,n,r;t=We,e.substr(We,2)===D?(n=D,We+=2):(n=o,0===Je&&st(I));n!==o?(r=function(){var t,n,r,a;t=We,n=We,r=[],a=gt(),a===o&&(a=yt());if(a!==o)for(;a!==o;)r.push(a),(a=gt())===o&&(a=yt());else r=o;n=r!==o?e.substring(n,We):r;n!==o&&(Ke=t,n=K(n));return t=n,t}(),r!==o?(Ke=t,t=n=N(r)):(We=t,t=o)):(We=t,t=o);t===o&&(t=We,Ke=We,(n=(n=$())?void 0:o)!==o&&(r=pt())!==o?(Ke=t,t=n=k(r)):(We=t,t=o));return t}(),c!==o?l=s=[s,u,c]:(We=l,l=o)):(We=l,l=o),l===o&&(l=null),l!==o&&(s=bt())!==o?(125===e.charCodeAt(We)?(u=g,We++):(u=o,0===Je&&st(y)),u!==o?(Ke=t,t=n=U(r,i,l)):(We=t,t=o)):(We=t,t=o)):(We=t,t=o)):(We=t,t=o)):(We=t,t=o);return t}());return t}())===o&&(t=function(){var t,n,r,a,i,l,s,u,c,d,f;t=We,123===e.charCodeAt(We)?(n=p,We++):(n=o,0===Je&&st(m));if(n!==o)if(bt()!==o)if((r=Tt())!==o)if(bt()!==o)if(44===e.charCodeAt(We)?(a=P,We++):(a=o,0===Je&&st(F)),a!==o)if(bt()!==o)if(e.substr(We,6)===te?(i=te,We+=6):(i=o,0===Je&&st(ne)),i===o&&(e.substr(We,13)===re?(i=re,We+=13):(i=o,0===Je&&st(oe))),i!==o)if(bt()!==o)if(44===e.charCodeAt(We)?(l=P,We++):(l=o,0===Je&&st(F)),l!==o)if(bt()!==o)if(s=We,e.substr(We,7)===ae?(u=ae,We+=7):(u=o,0===Je&&st(ie)),u!==o&&(c=bt())!==o&&(d=St())!==o?s=u=[u,c,d]:(We=s,s=o),s===o&&(s=null),s!==o)if((u=bt())!==o){if(c=[],(d=Et())!==o)for(;d!==o;)c.push(d),d=Et();else c=o;c!==o&&(d=bt())!==o?(125===e.charCodeAt(We)?(f=g,We++):(f=o,0===Je&&st(y)),f!==o?(Ke=t,t=n=le(r,i,s,c)):(We=t,t=o)):(We=t,t=o)}else We=t,t=o;else We=t,t=o;else We=t,t=o;else We=t,t=o;else We=t,t=o;else We=t,t=o;else We=t,t=o;else We=t,t=o;else We=t,t=o;else We=t,t=o;else We=t,t=o;else We=t,t=o;return t}())===o&&(t=function(){var t,n,r,a,i,l,s,u,c;t=We,123===e.charCodeAt(We)?(n=p,We++):(n=o,0===Je&&st(m));if(n!==o)if(bt()!==o)if((r=Tt())!==o)if(bt()!==o)if(44===e.charCodeAt(We)?(a=P,We++):(a=o,0===Je&&st(F)),a!==o)if(bt()!==o)if(e.substr(We,6)===se?(i=se,We+=6):(i=o,0===Je&&st(ue)),i!==o)if(bt()!==o)if(44===e.charCodeAt(We)?(l=P,We++):(l=o,0===Je&&st(F)),l!==o)if(bt()!==o){if(s=[],(u=Ct())!==o)for(;u!==o;)s.push(u),u=Ct();else s=o;s!==o&&(u=bt())!==o?(125===e.charCodeAt(We)?(c=g,We++):(c=o,0===Je&&st(y)),c!==o?(Ke=t,t=n=ce(r,s)):(We=t,t=o)):(We=t,t=o)}else We=t,t=o;else We=t,t=o;else We=t,t=o;else We=t,t=o;else We=t,t=o;else We=t,t=o;else We=t,t=o;else We=t,t=o;else We=t,t=o;else We=t,t=o;return t}())===o&&(t=function(){var t,n;t=We,35===e.charCodeAt(We)?(n=u,We++):(n=o,0===Je&&st(c));n!==o&&(Ke=t,n=d());return t=n,t}()),t}function pt(){var e,t,n;if(e=We,t=[],(n=wt())===o&&(n=Ot())===o&&(n=Rt()),n!==o)for(;n!==o;)t.push(n),(n=wt())===o&&(n=Ot())===o&&(n=Rt());else t=o;return t!==o&&(Ke=e,t=l(t)),e=t}function mt(){var t,n,r,a,i;if(Je++,t=We,n=[],r=We,a=We,Je++,(i=_t())===o&&(_.test(e.charAt(We))?(i=e.charAt(We),We++):(i=o,0===Je&&st(A))),Je--,i===o?a=void 0:(We=a,a=o),a!==o?(e.length>We?(i=e.charAt(We),We++):(i=o,0===Je&&st(b)),i!==o?r=a=[a,i]:(We=r,r=o)):(We=r,r=o),r!==o)for(;r!==o;)n.push(r),r=We,a=We,Je++,(i=_t())===o&&(_.test(e.charAt(We))?(i=e.charAt(We),We++):(i=o,0===Je&&st(A))),Je--,i===o?a=void 0:(We=a,a=o),a!==o?(e.length>We?(i=e.charAt(We),We++):(i=o,0===Je&&st(b)),i!==o?r=a=[a,i]:(We=r,r=o)):(We=r,r=o);else n=o;return t=n!==o?e.substring(t,We):n,Je--,t===o&&(n=o,0===Je&&st(E)),t}function ht(){var t,n,r;return Je++,t=We,47===e.charCodeAt(We)?(n=w,We++):(n=o,0===Je&&st(O)),n!==o&&(r=mt())!==o?(Ke=t,t=n=R(r)):(We=t,t=o),Je--,t===o&&(n=o,0===Je&&st(S)),t}function vt(){var e,t,n,r;if(Je++,e=We,bt()!==o)if((t=mt())!==o){for(n=[],r=ht();r!==o;)n.push(r),r=ht();n!==o?(Ke=e,e=x(t,n)):(We=e,e=o)}else We=e,e=o;else We=e,e=o;return Je--,e===o&&(0===Je&&st(T)),e}function gt(){var t,n,r,a;if(t=We,39===e.charCodeAt(We)?(n=B,We++):(n=o,0===Je&&st(H)),n!==o){if(r=[],(a=wt())===o&&(G.test(e.charAt(We))?(a=e.charAt(We),We++):(a=o,0===Je&&st(V))),a!==o)for(;a!==o;)r.push(a),(a=wt())===o&&(G.test(e.charAt(We))?(a=e.charAt(We),We++):(a=o,0===Je&&st(V)));else r=o;r!==o?(39===e.charCodeAt(We)?(a=B,We++):(a=o,0===Je&&st(H)),a!==o?t=n=[n,r,a]:(We=t,t=o)):(We=t,t=o)}else We=t,t=o;if(t===o)if(t=[],(n=wt())===o&&(Z.test(e.charAt(We))?(n=e.charAt(We),We++):(n=o,0===Je&&st(z))),n!==o)for(;n!==o;)t.push(n),(n=wt())===o&&(Z.test(e.charAt(We))?(n=e.charAt(We),We++):(n=o,0===Je&&st(z)));else t=o;return t}function yt(){var t,n;if(t=[],X.test(e.charAt(We))?(n=e.charAt(We),We++):(n=o,0===Je&&st(W)),n!==o)for(;n!==o;)t.push(n),X.test(e.charAt(We))?(n=e.charAt(We),We++):(n=o,0===Je&&st(W));else t=o;return t}function Ct(){var t,n,r,a,i;return t=We,bt()!==o&&(n=Mt())!==o&&bt()!==o?(123===e.charCodeAt(We)?(r=p,We++):(r=o,0===Je&&st(m)),r!==o?(Ke=We,(pe(n)?void 0:o)!==o&&(a=dt())!==o?(125===e.charCodeAt(We)?(i=g,We++):(i=o,0===Je&&st(y)),i!==o?(Ke=t,t=me(n,a)):(We=t,t=o)):(We=t,t=o)):(We=t,t=o)):(We=t,t=o),t}function Et(){var t,n,r,a,i;return t=We,bt()!==o?(n=function(){var t,n,r,a;return t=We,n=We,61===e.charCodeAt(We)?(r=de,We++):(r=o,0===Je&&st(fe)),r!==o&&(a=St())!==o?n=r=[r,a]:(We=n,n=o),(t=n!==o?e.substring(t,We):n)===o&&(t=Mt()),t}(),n!==o&&bt()!==o?(123===e.charCodeAt(We)?(r=p,We++):(r=o,0===Je&&st(m)),r!==o?(Ke=We,(he(n)?void 0:o)!==o&&(a=dt())!==o?(125===e.charCodeAt(We)?(i=g,We++):(i=o,0===Je&&st(y)),i!==o?(Ke=t,t=ve(n,a)):(We=t,t=o)):(We=t,t=o)):(We=t,t=o)):(We=t,t=o)):(We=t,t=o),t}function _t(){var t;return Je++,ye.test(e.charAt(We))?(t=e.charAt(We),We++):(t=o,0===Je&&st(Ce)),Je--,t===o&&(0===Je&&st(ge)),t}function At(){var t;return Je++,_e.test(e.charAt(We))?(t=e.charAt(We),We++):(t=o,0===Je&&st(Ae)),Je--,t===o&&(0===Je&&st(Ee)),t}function bt(){var t,n,r;for(Je++,t=We,n=[],r=_t();r!==o;)n.push(r),r=_t();return t=n!==o?e.substring(t,We):n,Je--,t===o&&(n=o,0===Je&&st(be)),t}function St(){var t,n,r;return Je++,t=We,45===e.charCodeAt(We)?(n=we,We++):(n=o,0===Je&&st(Oe)),n===o&&(n=null),n!==o&&(r=xt())!==o?(Ke=t,t=n=Re(n,r)):(We=t,t=o),Je--,t===o&&(n=o,0===Je&&st(Se)),t}function wt(){var t,n;return Je++,t=We,e.substr(We,2)===xe?(n=xe,We+=2):(n=o,0===Je&&st(Me)),n!==o&&(Ke=t,n=De()),Je--,(t=n)===o&&(n=o,0===Je&&st(Te)),t}function Ot(){var t,n,r,a,i,l;if(t=We,39===e.charCodeAt(We)?(n=B,We++):(n=o,0===Je&&st(H)),n!==o)if(r=function(){var t,n,r,a;t=We,n=We,e.length>We?(r=e.charAt(We),We++):(r=o,0===Je&&st(b));r!==o?(Ke=We,(a=(a=Pe(r))?void 0:o)!==o?n=r=[r,a]:(We=n,n=o)):(We=n,n=o);t=n!==o?e.substring(t,We):n;return t}(),r!==o){for(a=We,i=[],e.substr(We,2)===xe?(l=xe,We+=2):(l=o,0===Je&&st(Me)),l===o&&(G.test(e.charAt(We))?(l=e.charAt(We),We++):(l=o,0===Je&&st(V)));l!==o;)i.push(l),e.substr(We,2)===xe?(l=xe,We+=2):(l=o,0===Je&&st(Me)),l===o&&(G.test(e.charAt(We))?(l=e.charAt(We),We++):(l=o,0===Je&&st(V)));(a=i!==o?e.substring(a,We):i)!==o?(39===e.charCodeAt(We)?(i=B,We++):(i=o,0===Je&&st(H)),i===o&&(i=null),i!==o?(Ke=t,t=n=Ie(r,a)):(We=t,t=o)):(We=t,t=o)}else We=t,t=o;else We=t,t=o;return t}function Rt(){var t,n,r,a;return t=We,n=We,e.length>We?(r=e.charAt(We),We++):(r=o,0===Je&&st(b)),r!==o?(Ke=We,(a=(a=Ne(r))?void 0:o)!==o?n=r=[r,a]:(We=n,n=o)):(We=n,n=o),n===o&&(10===e.charCodeAt(We)?(n=Le,We++):(n=o,0===Je&&st(ke))),t=n!==o?e.substring(t,We):n}function Tt(){var t,n;return Je++,t=We,(n=xt())===o&&(n=Mt()),t=n!==o?e.substring(t,We):n,Je--,t===o&&(n=o,0===Je&&st(Fe)),t}function xt(){var t,n,r,a,i;if(Je++,t=We,48===e.charCodeAt(We)?(n=Ye,We++):(n=o,0===Je&&st(Ue)),n!==o&&(Ke=t,n=Be()),(t=n)===o){if(t=We,n=We,He.test(e.charAt(We))?(r=e.charAt(We),We++):(r=o,0===Je&&st(Ge)),r!==o){for(a=[],Ve.test(e.charAt(We))?(i=e.charAt(We),We++):(i=o,0===Je&&st(Ze));i!==o;)a.push(i),Ve.test(e.charAt(We))?(i=e.charAt(We),We++):(i=o,0===Je&&st(Ze));a!==o?n=r=[r,a]:(We=n,n=o)}else We=n,n=o;n!==o&&(Ke=t,n=ze(n)),t=n}return Je--,t===o&&(n=o,0===Je&&st(je)),t}function Mt(){var t,n,r,a,i;if(Je++,t=We,n=[],r=We,a=We,Je++,(i=_t())===o&&(i=At()),Je--,i===o?a=void 0:(We=a,a=o),a!==o?(e.length>We?(i=e.charAt(We),We++):(i=o,0===Je&&st(b)),i!==o?r=a=[a,i]:(We=r,r=o)):(We=r,r=o),r!==o)for(;r!==o;)n.push(r),r=We,a=We,Je++,(i=_t())===o&&(i=At()),Je--,i===o?a=void 0:(We=a,a=o),a!==o?(e.length>We?(i=e.charAt(We),We++):(i=o,0===Je&&st(b)),i!==o?r=a=[a,i]:(We=r,r=o)):(We=r,r=o);else n=o;return t=n!==o?e.substring(t,We):n,Je--,t===o&&(n=o,0===Je&&st(Xe)),t}var Dt=["root"];function It(){return"plural"===Dt[Dt.length-1]}function Nt(){return t&&t.captureLocation?{location:tt()}:{}}if((n=i())!==o&&We===e.length)return n;throw n!==o&&We<e.length&&st({type:"end"}),ut(Qe,qe<e.length?e.charAt(qe):null,qe<e.length?lt(qe,qe+1):lt(qe,qe))},y=function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),o=0;for(t=0;t<n;t++)for(var a=arguments[t],i=0,l=a.length;i<l;i++,o++)r[o]=a[i];return r},C=/(^|[^\\])#/g;function E(e){e.forEach((function(e){(c(e)||u(e))&&Object.keys(e.options).forEach((function(t){for(var n,r=e.options[t],a=-1,i=void 0,l=0;l<r.value.length;l++){var s=r.value[l];if(o(s)&&C.test(s.value)){a=l,i=s;break}}if(i){var u=i.value.replace(C,"$1{"+e.value+", number}"),c=g(u);(n=r.value).splice.apply(n,y([a,1],c))}E(r.value)}))}))}function _(e,t){var n=g(e,t);return t&&!1===t.normalizeHashtagInPlural||E(n),n}var A=function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),o=0;for(t=0;t<n;t++)for(var a=arguments[t],i=0,l=a.length;i<l;i++,o++)r[o]=a[i];return r};function b(e){return JSON.stringify(e.map((function(e){return e&&"object"===typeof e?(t=e,Object.keys(t).sort().map((function(e){var n;return(n={})[e]=t[e],n}))):e;var t})))}var S=function(e,t){return void 0===t&&(t={}),function(){for(var n,r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];var a=b(r),i=a&&t[a];return i||(i=new((n=e).bind.apply(n,A([void 0],r))),a&&(t[a]=i)),i}},w=function(){return w=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},w.apply(this,arguments)},O=/(?:[Eec]{1,6}|G{1,5}|[Qq]{1,5}|(?:[yYur]+|U{1,5})|[ML]{1,5}|d{1,2}|D{1,3}|F{1}|[abB]{1,5}|[hkHK]{1,2}|w{1,2}|W{1}|m{1,2}|s{1,2}|[zZOvVxX]{1,4})(?=([^']*'[^']*')*[^']*$)/g;function R(e){var t={};return e.replace(O,(function(e){var n=e.length;switch(e[0]){case"G":t.era=4===n?"long":5===n?"narrow":"short";break;case"y":t.year=2===n?"2-digit":"numeric";break;case"Y":case"u":case"U":case"r":throw new RangeError("`Y/u/U/r` (year) patterns are not supported, use `y` instead");case"q":case"Q":throw new RangeError("`q/Q` (quarter) patterns are not supported");case"M":case"L":t.month=["numeric","2-digit","short","long","narrow"][n-1];break;case"w":case"W":throw new RangeError("`w/W` (week) patterns are not supported");case"d":t.day=["numeric","2-digit"][n-1];break;case"D":case"F":case"g":throw new RangeError("`D/F/g` (day) patterns are not supported, use `d` instead");case"E":t.weekday=4===n?"short":5===n?"narrow":"short";break;case"e":if(n<4)throw new RangeError("`e..eee` (weekday) patterns are not supported");t.weekday=["short","long","narrow","short"][n-4];break;case"c":if(n<4)throw new RangeError("`c..ccc` (weekday) patterns are not supported");t.weekday=["short","long","narrow","short"][n-4];break;case"a":t.hour12=!0;break;case"b":case"B":throw new RangeError("`b/B` (period) patterns are not supported, use `a` instead");case"h":t.hourCycle="h12",t.hour=["numeric","2-digit"][n-1];break;case"H":t.hourCycle="h23",t.hour=["numeric","2-digit"][n-1];break;case"K":t.hourCycle="h11",t.hour=["numeric","2-digit"][n-1];break;case"k":t.hourCycle="h24",t.hour=["numeric","2-digit"][n-1];break;case"j":case"J":case"C":throw new RangeError("`j/J/C` (hour) patterns are not supported, use `h/H/K/k` instead");case"m":t.minute=["numeric","2-digit"][n-1];break;case"s":t.second=["numeric","2-digit"][n-1];break;case"S":case"A":throw new RangeError("`S/A` (second) pattenrs are not supported, use `s` instead");case"z":t.timeZoneName=n<4?"short":"long";break;case"Z":case"O":case"v":case"V":case"X":case"x":throw new RangeError("`Z/O/v/V/X/x` (timeZone) pattenrs are not supported, use `z` instead")}return""})),t}var T=/^\.(?:(0+)(\+|#+)?)?$/g,x=/^(@+)?(\+|#+)?$/g;function M(e){var t={};return e.replace(x,(function(e,n,r){return"string"!==typeof r?(t.minimumSignificantDigits=n.length,t.maximumSignificantDigits=n.length):"+"===r?t.minimumSignificantDigits=n.length:"#"===n[0]?t.maximumSignificantDigits=n.length:(t.minimumSignificantDigits=n.length,t.maximumSignificantDigits=n.length+("string"===typeof r?r.length:0)),""})),t}function D(e){switch(e){case"sign-auto":return{signDisplay:"auto"};case"sign-accounting":return{currencySign:"accounting"};case"sign-always":return{signDisplay:"always"};case"sign-accounting-always":return{signDisplay:"always",currencySign:"accounting"};case"sign-except-zero":return{signDisplay:"exceptZero"};case"sign-accounting-except-zero":return{signDisplay:"exceptZero",currencySign:"accounting"};case"sign-never":return{signDisplay:"never"}}}function I(e){var t=D(e);return t||{}}function N(e){for(var t={},n=0,r=e;n<r.length;n++){var o=r[n];switch(o.stem){case"percent":t.style="percent";continue;case"currency":t.style="currency",t.currency=o.options[0];continue;case"group-off":t.useGrouping=!1;continue;case"precision-integer":t.maximumFractionDigits=0;continue;case"measure-unit":t.style="unit",t.unit=o.options[0].replace(/^(.*?)-/,"");continue;case"compact-short":t.notation="compact",t.compactDisplay="short";continue;case"compact-long":t.notation="compact",t.compactDisplay="long";continue;case"scientific":t=w(w(w({},t),{notation:"scientific"}),o.options.reduce((function(e,t){return w(w({},e),I(t))}),{}));continue;case"engineering":t=w(w(w({},t),{notation:"engineering"}),o.options.reduce((function(e,t){return w(w({},e),I(t))}),{}));continue;case"notation-simple":t.notation="standard";continue;case"unit-width-narrow":t.currencyDisplay="narrowSymbol",t.unitDisplay="narrow";continue;case"unit-width-short":t.currencyDisplay="code",t.unitDisplay="short";continue;case"unit-width-full-name":t.currencyDisplay="name",t.unitDisplay="long";continue;case"unit-width-iso-code":t.currencyDisplay="symbol";continue}if(T.test(o.stem)){if(o.options.length>1)throw new RangeError("Fraction-precision stems only accept a single optional option");o.stem.replace(T,(function(e,n,r){return"."===e?t.maximumFractionDigits=0:"+"===r?t.minimumFractionDigits=r.length:"#"===n[0]?t.maximumFractionDigits=n.length:(t.minimumFractionDigits=n.length,t.maximumFractionDigits=n.length+("string"===typeof r?r.length:0)),""})),o.options.length&&(t=w(w({},t),M(o.options[0])))}else if(x.test(o.stem))t=w(w({},t),M(o.stem));else{var a=D(o.stem);a&&(t=w(w({},t),a))}}return t}var L,k=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),P=function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),o=0;for(t=0;t<n;t++)for(var a=arguments[t],i=0,l=a.length;i<l;i++,o++)r[o]=a[i];return r},F=function(e){function t(t,n){var r=e.call(this,t)||this;return r.variableId=n,r}return k(t,e),t}(Error);function j(e,t,n,r,m,h,v){if(1===e.length&&o(e[0]))return[{type:0,value:e[0].value}];for(var g,y=[],C=0,E=e;C<E.length;C++){var _=E[C];if(o(_))y.push({type:0,value:_.value});else if(d(_))"number"===typeof h&&y.push({type:0,value:n.getNumberFormat(t).format(h)});else{var A=_.value;if(!m||!(A in m))throw new F('The intl string context variable "'+A+'" was not provided to the string "'+v+'"');var b=m[A];if(a(_))b&&"string"!==typeof b&&"number"!==typeof b||(b="string"===typeof b||"number"===typeof b?String(b):""),y.push({type:1,value:b});else if(l(_)){var S="string"===typeof _.style?r.date[_.style]:void 0;y.push({type:0,value:n.getDateTimeFormat(t,S).format(b)})}else if(s(_)){S="string"===typeof _.style?r.time[_.style]:p(_.style)?R(_.style.pattern):void 0;y.push({type:0,value:n.getDateTimeFormat(t,S).format(b)})}else if(i(_)){S="string"===typeof _.style?r.number[_.style]:f(_.style)?N(_.style.tokens):void 0;y.push({type:0,value:n.getNumberFormat(t,S).format(b)})}else if(u(_)){if(!(w=_.options[b]||_.options.other))throw new RangeError('Invalid values for "'+_.value+'": "'+b+'". Options are "'+Object.keys(_.options).join('", "')+'"');y.push.apply(y,j(w.value,t,n,r,m))}else if(c(_)){var w;if(!(w=_.options["="+b])){if(!Intl.PluralRules)throw new F('Intl.PluralRules is not available in this environment.\nTry polyfilling it using "@formatjs/intl-pluralrules"\n');var O=n.getPluralRules(t,{type:_.pluralType}).select(b-(_.offset||0));w=_.options[O]||_.options.other}if(!w)throw new RangeError('Invalid values for "'+_.value+'": "'+b+'". Options are "'+Object.keys(_.options).join('", "')+'"');y.push.apply(y,j(w.value,t,n,r,m,b-(_.offset||0)))}else;}}return(g=y).length<2?g:g.reduce((function(e,t){var n=e[e.length-1];return n&&0===n.type&&0===t.type?n.value+=t.value:e.push(t),e}),[])}function Y(e,t,n,r,o,a){var i=j(e,t,n,r,o,void 0,a);return 1===i.length?i[0].value:i.reduce((function(e,t){return e+t.value}),"")}var U="@@",B=/@@(\d+_\d+)@@/g,H=0;function G(e,t){return e.split(B).filter(Boolean).map((function(e){return null!=t[e]?t[e]:e})).reduce((function(e,t){return e.length&&"string"===typeof t&&"string"===typeof e[e.length-1]?e[e.length-1]+=t:e.push(t),e}),[])}var V=/(<([0-9a-zA-Z-_]*?)>(.*?)<\/([0-9a-zA-Z-_]*?)>)|(<[0-9a-zA-Z-_]*?\/>)/,Z=Date.now()+"@@",z=["area","base","br","col","embed","hr","img","input","link","meta","param","source","track","wbr"];function X(e,t,n){var r=e.tagName,o=e.outerHTML,a=e.textContent,i=e.childNodes;if(!r)return G(a||"",t);r=r.toLowerCase();var l=~z.indexOf(r),s=n[r];if(s&&l)throw new F(r+" is a self-closing tag and can not be used, please use another tag name.");if(!i.length)return[o];var u=Array.prototype.slice.call(i).reduce((function(e,r){return e.concat(X(r,t,n))}),[]);return s?"function"===typeof s?[s.apply(void 0,u)]:[s]:P(["<"+r+">"],u,["</"+r+">"])}function W(e,t,n,r,o,a){var i=j(e,t,n,r,o,void 0,a),l={},s=i.reduce((function(e,t){if(0===t.type)return e+t.value;var n=Date.now()+"_"+ ++H;return l[n]=t.value,e+""+U+n+U}),"");if(!V.test(s))return G(s,l);if(!o)throw new F("Message has placeholders but no values was given");if("undefined"===typeof DOMParser)throw new F("Cannot format XML message without DOMParser");L||(L=new DOMParser);var u=L.parseFromString('<formatted-message id="'+Z+'">'+s+"</formatted-message>","text/html").getElementById(Z);if(!u)throw new F("Malformed HTML message "+s);var c=Object.keys(o).filter((function(e){return!!u.getElementsByTagName(e).length}));if(!c.length)return G(s,l);var d=c.filter((function(e){return e!==e.toLowerCase()}));if(d.length)throw new F("HTML tag must be lowercased but the following tags are not: "+d.join(", "));return Array.prototype.slice.call(u.childNodes).reduce((function(e,t){return e.concat(X(t,l,o))}),[])}var K=function(){return K=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},K.apply(this,arguments)};function $(e,t){return t?Object.keys(e).reduce((function(n,r){var o,a;return n[r]=(o=e[r],(a=t[r])?K(K(K({},o||{}),a||{}),Object.keys(o).reduce((function(e,t){return e[t]=K(K({},o[t]),a[t]||{}),e}),{})):o),n}),K({},e)):e}function q(e){return void 0===e&&(e={number:{},dateTime:{},pluralRules:{}}),{getNumberFormat:S(Intl.NumberFormat,e.number),getDateTimeFormat:S(Intl.DateTimeFormat,e.dateTime),getPluralRules:S(Intl.PluralRules,e.pluralRules)}}var Q=function(){function e(t,n,r,o){var a=this;if(void 0===n&&(n=e.defaultLocale),this.formatterCache={number:{},dateTime:{},pluralRules:{}},this.format=function(e){return Y(a.ast,a.locales,a.formatters,a.formats,e,a.message)},this.formatToParts=function(e){return j(a.ast,a.locales,a.formatters,a.formats,e,void 0,a.message)},this.formatHTMLMessage=function(e){return W(a.ast,a.locales,a.formatters,a.formats,e,a.message)},this.resolvedOptions=function(){return{locale:Intl.NumberFormat.supportedLocalesOf(a.locales)[0]}},this.getAst=function(){return a.ast},"string"===typeof t){if(this.message=t,!e.__parse)throw new TypeError("IntlMessageFormat.__parse must be set to process `message` of type `string`");this.ast=e.__parse(t,{normalizeHashtagInPlural:!1})}else this.ast=t;if(!Array.isArray(this.ast))throw new TypeError("A message must be provided as a String or AST.");this.formats=$(e.formats,r),this.locales=n,this.formatters=o&&o.formatters||q(this.formatterCache)}return e.defaultLocale=(new Intl.NumberFormat).resolvedOptions().locale,e.__parse=_,e.formats={number:{currency:{style:"currency"},percent:{style:"percent"}},date:{short:{month:"numeric",day:"numeric",year:"2-digit"},medium:{month:"short",day:"numeric",year:"numeric"},long:{month:"long",day:"numeric",year:"numeric"},full:{weekday:"long",month:"long",day:"numeric",year:"numeric"}},time:{short:{hour:"numeric",minute:"numeric"},medium:{hour:"numeric",minute:"numeric",second:"numeric"},long:{hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"},full:{hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"}}},e}(),J=Q},83163:function(e,t,n){e=n.nmd(e);var r="__lodash_hash_undefined__",o=9007199254740991,a="[object Arguments]",i="[object AsyncFunction]",l="[object Function]",s="[object GeneratorFunction]",u="[object Null]",c="[object Object]",d="[object Proxy]",f="[object Undefined]",p=/^\[object .+?Constructor\]$/,m=/^(?:0|[1-9]\d*)$/,h={};h["[object Float32Array]"]=h["[object Float64Array]"]=h["[object Int8Array]"]=h["[object Int16Array]"]=h["[object Int32Array]"]=h["[object Uint8Array]"]=h["[object Uint8ClampedArray]"]=h["[object Uint16Array]"]=h["[object Uint32Array]"]=!0,h[a]=h["[object Array]"]=h["[object ArrayBuffer]"]=h["[object Boolean]"]=h["[object DataView]"]=h["[object Date]"]=h["[object Error]"]=h[l]=h["[object Map]"]=h["[object Number]"]=h[c]=h["[object RegExp]"]=h["[object Set]"]=h["[object String]"]=h["[object WeakMap]"]=!1;var v="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,g="object"==typeof self&&self&&self.Object===Object&&self,y=v||g||Function("return this")(),C=t&&!t.nodeType&&t,E=C&&e&&!e.nodeType&&e,_=E&&E.exports===C,A=_&&v.process,b=function(){try{var e=E&&E.require&&E.require("util").types;return e||A&&A.binding&&A.binding("util")}catch(t){}}(),S=b&&b.isTypedArray;var w,O,R=Array.prototype,T=Function.prototype,x=Object.prototype,M=y["__core-js_shared__"],D=T.toString,I=x.hasOwnProperty,N=function(){var e=/[^.]+$/.exec(M&&M.keys&&M.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),L=x.toString,k=D.call(Object),P=RegExp("^"+D.call(I).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),F=_?y.Buffer:void 0,j=y.Symbol,Y=y.Uint8Array,U=F?F.allocUnsafe:void 0,B=(w=Object.getPrototypeOf,O=Object,function(e){return w(O(e))}),H=Object.create,G=x.propertyIsEnumerable,V=R.splice,Z=j?j.toStringTag:void 0,z=function(){try{var e=ye(Object,"defineProperty");return e({},"",{}),e}catch(t){}}(),X=F?F.isBuffer:void 0,W=Math.max,K=Date.now,$=ye(y,"Map"),q=ye(Object,"create"),Q=function(){function e(){}return function(t){if(!Me(t))return{};if(H)return H(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}();function J(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function ee(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function te(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function ne(e){var t=this.__data__=new ee(e);this.size=t.size}function re(e,t){var n=we(e),r=!n&&Se(e),o=!n&&!r&&Re(e),a=!n&&!r&&!o&&Ie(e),i=n||r||o||a,l=i?function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}(e.length,String):[],s=l.length;for(var u in e)!t&&!I.call(e,u)||i&&("length"==u||o&&("offset"==u||"parent"==u)||a&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||Ce(u,s))||l.push(u);return l}function oe(e,t,n){(void 0!==n&&!be(e[t],n)||void 0===n&&!(t in e))&&le(e,t,n)}function ae(e,t,n){var r=e[t];I.call(e,t)&&be(r,n)&&(void 0!==n||t in e)||le(e,t,n)}function ie(e,t){for(var n=e.length;n--;)if(be(e[n][0],t))return n;return-1}function le(e,t,n){"__proto__"==t&&z?z(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}J.prototype.clear=function(){this.__data__=q?q(null):{},this.size=0},J.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},J.prototype.get=function(e){var t=this.__data__;if(q){var n=t[e];return n===r?void 0:n}return I.call(t,e)?t[e]:void 0},J.prototype.has=function(e){var t=this.__data__;return q?void 0!==t[e]:I.call(t,e)},J.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=q&&void 0===t?r:t,this},ee.prototype.clear=function(){this.__data__=[],this.size=0},ee.prototype.delete=function(e){var t=this.__data__,n=ie(t,e);return!(n<0)&&(n==t.length-1?t.pop():V.call(t,n,1),--this.size,!0)},ee.prototype.get=function(e){var t=this.__data__,n=ie(t,e);return n<0?void 0:t[n][1]},ee.prototype.has=function(e){return ie(this.__data__,e)>-1},ee.prototype.set=function(e,t){var n=this.__data__,r=ie(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this},te.prototype.clear=function(){this.size=0,this.__data__={hash:new J,map:new($||ee),string:new J}},te.prototype.delete=function(e){var t=ge(this,e).delete(e);return this.size-=t?1:0,t},te.prototype.get=function(e){return ge(this,e).get(e)},te.prototype.has=function(e){return ge(this,e).has(e)},te.prototype.set=function(e,t){var n=ge(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this},ne.prototype.clear=function(){this.__data__=new ee,this.size=0},ne.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},ne.prototype.get=function(e){return this.__data__.get(e)},ne.prototype.has=function(e){return this.__data__.has(e)},ne.prototype.set=function(e,t){var n=this.__data__;if(n instanceof ee){var r=n.__data__;if(!$||r.length<199)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new te(r)}return n.set(e,t),this.size=n.size,this};var se,ue=function(e,t,n){for(var r=-1,o=Object(e),a=n(e),i=a.length;i--;){var l=a[se?i:++r];if(!1===t(o[l],l,o))break}return e};function ce(e){return null==e?void 0===e?f:u:Z&&Z in Object(e)?function(e){var t=I.call(e,Z),n=e[Z];try{e[Z]=void 0;var r=!0}catch(a){}var o=L.call(e);r&&(t?e[Z]=n:delete e[Z]);return o}(e):function(e){return L.call(e)}(e)}function de(e){return De(e)&&ce(e)==a}function fe(e){return!(!Me(e)||function(e){return!!N&&N in e}(e))&&(Te(e)?P:p).test(function(e){if(null!=e){try{return D.call(e)}catch(t){}try{return e+""}catch(t){}}return""}(e))}function pe(e){if(!Me(e))return function(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t}(e);var t=Ee(e),n=[];for(var r in e)("constructor"!=r||!t&&I.call(e,r))&&n.push(r);return n}function me(e,t,n,r,o){e!==t&&ue(t,(function(a,i){if(o||(o=new ne),Me(a))!function(e,t,n,r,o,a,i){var l=_e(e,n),s=_e(t,n),u=i.get(s);if(u)return void oe(e,n,u);var d=a?a(l,s,n+"",e,t,i):void 0,f=void 0===d;if(f){var p=we(s),m=!p&&Re(s),h=!p&&!m&&Ie(s);d=s,p||m||h?we(l)?d=l:De(v=l)&&Oe(v)?d=function(e,t){var n=-1,r=e.length;t||(t=Array(r));for(;++n<r;)t[n]=e[n];return t}(l):m?(f=!1,d=function(e,t){if(t)return e.slice();var n=e.length,r=U?U(n):new e.constructor(n);return e.copy(r),r}(s,!0)):h?(f=!1,d=function(e,t){var n=t?function(e){var t=new e.constructor(e.byteLength);return new Y(t).set(new Y(e)),t}(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}(s,!0)):d=[]:function(e){if(!De(e)||ce(e)!=c)return!1;var t=B(e);if(null===t)return!0;var n=I.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&D.call(n)==k}(s)||Se(s)?(d=l,Se(l)?d=function(e){return function(e,t,n,r){var o=!n;n||(n={});var a=-1,i=t.length;for(;++a<i;){var l=t[a],s=r?r(n[l],e[l],l,n,e):void 0;void 0===s&&(s=e[l]),o?le(n,l,s):ae(n,l,s)}return n}(e,Ne(e))}(l):Me(l)&&!Te(l)||(d=function(e){return"function"!=typeof e.constructor||Ee(e)?{}:Q(B(e))}(s))):f=!1}var v;f&&(i.set(s,d),o(d,s,r,a,i),i.delete(s));oe(e,n,d)}(e,t,i,n,me,r,o);else{var l=r?r(_e(e,i),a,i+"",e,t,o):void 0;void 0===l&&(l=a),oe(e,i,l)}}),Ne)}function he(e,t){return Ae(function(e,t,n){return t=W(void 0===t?e.length-1:t,0),function(){for(var r=arguments,o=-1,a=W(r.length-t,0),i=Array(a);++o<a;)i[o]=r[t+o];o=-1;for(var l=Array(t+1);++o<t;)l[o]=r[o];return l[t]=n(i),function(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}(e,this,l)}}(e,t,Pe),e+"")}var ve=z?function(e,t){return z(e,"toString",{configurable:!0,enumerable:!1,value:(n=t,function(){return n}),writable:!0});var n}:Pe;function ge(e,t){var n=e.__data__;return function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}(t)?n["string"==typeof t?"string":"hash"]:n.map}function ye(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return fe(n)?n:void 0}function Ce(e,t){var n=typeof e;return!!(t=null==t?o:t)&&("number"==n||"symbol"!=n&&m.test(e))&&e>-1&&e%1==0&&e<t}function Ee(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||x)}function _e(e,t){if(("constructor"!==t||"function"!==typeof e[t])&&"__proto__"!=t)return e[t]}var Ae=function(e){var t=0,n=0;return function(){var r=K(),o=16-(r-n);if(n=r,o>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}(ve);function be(e,t){return e===t||e!==e&&t!==t}var Se=de(function(){return arguments}())?de:function(e){return De(e)&&I.call(e,"callee")&&!G.call(e,"callee")},we=Array.isArray;function Oe(e){return null!=e&&xe(e.length)&&!Te(e)}var Re=X||function(){return!1};function Te(e){if(!Me(e))return!1;var t=ce(e);return t==l||t==s||t==i||t==d}function xe(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=o}function Me(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function De(e){return null!=e&&"object"==typeof e}var Ie=S?function(e){return function(t){return e(t)}}(S):function(e){return De(e)&&xe(e.length)&&!!h[ce(e)]};function Ne(e){return Oe(e)?re(e,!0):pe(e)}var Le,ke=(Le=function(e,t,n){me(e,t,n)},he((function(e,t){var n=-1,r=t.length,o=r>1?t[r-1]:void 0,a=r>2?t[2]:void 0;for(o=Le.length>3&&"function"==typeof o?(r--,o):void 0,a&&function(e,t,n){if(!Me(n))return!1;var r=typeof t;return!!("number"==r?Oe(n)&&Ce(t,n.length):"string"==r&&t in n)&&be(n[t],e)}(t[0],t[1],a)&&(o=r<3?void 0:o,r=1),e=Object(e);++n<r;){var i=t[n];i&&Le(e,i,n,o)}return e})));function Pe(e){return e}e.exports=ke},63138:function(e,t,n){"use strict";n.r(t),t.default={}},41939:function(e,t,n){"use strict";n.r(t),t.default={}},70238:function(e,t,n){"use strict";n.r(t),t.default={}},86954:function(e,t,n){"use strict";n.r(t),t.default={}},95399:function(e,t,n){"use strict";n.r(t),t.default={}},41341:function(e,t,n){"use strict";n.r(t),t.default={}},91173:function(e,t,n){"use strict";n.r(t),t.default={}},35816:function(e,t,n){"use strict";n.r(t),t.default={}},22257:function(e,t,n){"use strict";n.r(t),t.default={}},16525:function(e,t,n){"use strict";n.r(t),t.default={}},41186:function(e,t,n){"use strict";n.r(t),t.default={}},60784:function(e,t,n){"use strict";n.r(t),t.default={}},71188:function(e,t,n){"use strict";n.r(t),t.default={}},77392:function(e,t,n){"use strict";n.r(t),t.default={}},27770:function(e,t,n){"use strict";n.r(t),t.default={}},61945:function(e,t,n){"use strict";n.r(t),t.default={}},3627:function(e,t,n){"use strict";n.r(t),t.default={}},12081:function(e,t,n){"use strict";n.r(t),t.default={}},89156:function(e,t,n){"use strict";n.r(t),t.default={}},83695:function(e,t,n){"use strict";n.r(t),t.default={}},65544:function(e,t,n){"use strict";n.r(t),t.default={}},58986:function(e,t,n){"use strict";n.r(t),t.default={}},35174:function(e,t,n){"use strict";n.r(t),t.default={}},90562:function(e,t,n){"use strict";n.r(t),t.default={}},15623:function(e,t,n){"use strict";n.r(t),t.default={}},92305:function(e,t,n){"use strict";n.r(t),t.default={}}},function(e){e.O(0,[4223],(function(){return t=43111,e(e.s=t);var t}));e.O()}]);