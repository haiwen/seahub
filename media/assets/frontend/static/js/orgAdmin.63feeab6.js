/*! For license information please see orgAdmin.63feeab6.js.LICENSE.txt */
"use strict";(self.webpackChunkseahub_frontend=self.webpackChunkseahub_frontend||[]).push([[8776],{52622:function(e,t,n){var i=n(23029),r=n(92901),s=n(39874),a=n(85501),o=n(9950),l=n(58195),c=n(14113),h=n(99308),u=n(85907),d=n(18849),g=n(65604),p=n(40326),f=n(44414),m=function(e){function t(e){var n;return(0,i.A)(this,t),(n=(0,s.A)(this,t,[e])).submit=function(){n.props.changeGroup2Department(),n.props.toggleDialog()},n.state={selectedOption:null},n}return(0,a.A)(t,e),(0,r.A)(t,[{key:"render",value:function(){var e='<span class="op-target">'+g.Aq.HTMLescape(this.props.groupName)+"</span>",t=(0,p.AP)("Are you sure to change group {placeholder} to department ?").replace("{placeholder}",e);return(0,f.jsxs)(l.A,{isOpen:!0,toggle:this.props.toggleDialog,children:[(0,f.jsx)(c.A,{toggle:this.props.toggleDialog,children:(0,p.AP)("Change group to department")}),(0,f.jsx)(h.A,{children:(0,f.jsx)("p",{dangerouslySetInnerHTML:{__html:t}})}),(0,f.jsxs)(u.A,{children:[(0,f.jsx)(d.A,{color:"secondary",onClick:this.props.toggleDialog,children:(0,p.AP)("Cancel")}),(0,f.jsx)(d.A,{color:"primary",onClick:this.submit,children:(0,p.AP)("Submit")})]})]})}}])}(o.Component);t.A=m},61314:function(e,t,n){var i=n(23029),r=n(92901),s=n(39874),a=n(85501),o=n(9950),l=n(19260),c=n(6030),h=n(33151),u=n(68879),d=n(40326),g=n(65604),p=n(44414),f=function(e){function t(e){var n;return(0,i.A)(this,t),(n=(0,s.A)(this,t,[e])).onMenuItemClick=function(e){var t=g.Aq.getEventData(e,"op");n.props.onMenuItemClick(t)},n.onDropdownToggleClick=function(e){n.toggleOperationMenu(e)},n.toggleOperationMenu=function(e){n.setState({isItemMenuShow:!n.state.isItemMenuShow},(function(){n.state.isItemMenuShow?n.props.onFreezedItem():n.props.onUnfreezedItem()}))},n.state={isItemMenuShow:!1},n}return(0,a.A)(t,e),(0,r.A)(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.operations,i=t.translateOperations;return(0,p.jsxs)(l.A,{isOpen:this.state.isItemMenuShow,toggle:this.toggleOperationMenu,children:[(0,p.jsx)(c.A,{tag:"i",className:"d-flex w-5 h-5 align-items-center justify-content-center sf-dropdown-toggle sf3-font sf3-font-more-vertical",title:(0,d.AP)("More operations"),"aria-label":(0,d.AP)("More operations"),"data-toggle":"dropdown","aria-expanded":this.state.isItemMenuShow}),(0,p.jsx)(h.A,{className:"my-1 mr-2",children:n.map((function(t,n){return(0,p.jsx)(u.A,{"data-op":t,onClick:e.onMenuItemClick,children:i(t)},n)}))})]})}}])}(o.Component);t.A=f},61599:function(e,t,n){var i=n(23029),r=n(92901),s=n(39874),a=n(85501),o=n(9950),l=n(58195),c=n(14113),h=n(99308),u=n(40326),d=n(81446),g=(n(8008),n(44414)),p=function(e){function t(){var e;(0,i.A)(this,t);for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(e=(0,s.A)(this,t,[].concat(r))).toggle=function(){e.props.toggle()},e}return(0,a.A)(t,e),(0,r.A)(t,[{key:"render",value:function(){return(0,g.jsxs)(l.A,{className:"seahub-io-dialog",isOpen:!0,toggle:this.toggle,children:[(0,g.jsx)(c.A,{toggle:this.toggle,children:(0,u.AP)("Exporting")}),(0,g.jsx)(h.A,{children:(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(d.A,{}),(0,g.jsx)("div",{className:"seahub-io-dialog-parsing-text",children:(0,u.AP)("Exporting...")})]})})]})}}])}(o.Component);t.A=p},96763:function(e,t,n){var i=n(23029),r=n(92901),s=n(39874),a=n(85501),o=n(9950),l=n(40326),c=n(58195),h=n(14113),u=n(99308),d=n(85907),g=n(18849),p=n(44414),f=function(e){function t(e){var n;return(0,i.A)(this,t),(n=(0,s.A)(this,t,[e])).handleInputChange=function(e){n.setState({inputChecked:e.target.checked})},n.unlinkDevice=function(){n.props.toggleDialog(),n.props.unlinkDevice(n.state.inputChecked)},n.state={inputChecked:!1},n}return(0,a.A)(t,e),(0,r.A)(t,[{key:"render",value:function(){var e=this.state.inputChecked,t=this.props.toggleDialog;return(0,p.jsxs)(c.A,{isOpen:!0,toggle:t,children:[(0,p.jsx)(h.A,{toggle:t,children:(0,l.AP)("Unlink device")}),(0,p.jsxs)(u.A,{children:[(0,p.jsx)("p",{children:(0,l.AP)("Are you sure you want to unlink this device?")}),l.am&&(0,p.jsxs)("div",{className:"d-flex align-items-center",children:[(0,p.jsx)("input",{id:"delete-files",className:"mr-1",type:"checkbox",checked:e,onChange:this.handleInputChange}),(0,p.jsx)("label",{htmlFor:"delete-files",className:"m-0",children:(0,l.AP)("Delete files from this device the next time it comes online.")})]})]}),(0,p.jsxs)(d.A,{children:[(0,p.jsx)(g.A,{color:"secondary",onClick:t,children:(0,l.AP)("Cancel")}),(0,p.jsx)(g.A,{color:"primary",onClick:this.unlinkDevice,children:(0,l.AP)("Unlink")})]})]})}}])}(o.Component);t.A=f},7039:function(e,t,n){n.d(t,{A:function(){return N}});var i=n(23029),r=n(92901),s=n(39874),a=n(85501),o=n(9950),l=n(4086),c=n(18849),h=n(48918),u=n(30038),d=n(99121),g=n(85077),p=n(58195),f=n(14113),m=n(99308),v=n(85907),x=n(40326),A=n(65604),y=n(26910),b=n(58801),j=function(){return(0,r.A)((function e(){(0,i.A)(this,e)}),[{key:"init",value:function(e){var t=e.server,n=e.username,i=e.password,r=e.token;return this.server=t,this.username=n,this.password=i,this.token=r,this.token&&this.server&&(this.req=y.A.create({baseURL:this.server,headers:{Authorization:"Token "+this.token}})),this}},{key:"initForSeahubUsage",value:function(e){var t=e.siteRoot,n=e.xcsrfHeaders;if(t&&"/"===t.charAt(t.length-1)){var i=t.substring(0,t.length-1);this.server=i}else this.server=t;return this.req=y.A.create({headers:{"X-CSRFToken":n}}),this}},{key:"getSubscription",value:function(){var e=this.server+"/api/v2.1/subscription/";return this.req.get(e)}},{key:"getSubscriptionPlans",value:function(e){var t=this.server+"/api/v2.1/subscription/plans/",n={payment_type:e};return this.req.get(t,{params:n})}},{key:"getSubscriptionLogs",value:function(){var e=this.server+"/api/v2.1/subscription/logs/";return this.req.get(e)}}])}(),k=new j,_=b.Ay.load("sfcsrftoken");k.initForSeahubUsage({siteRoot:x.Yc,xcsrfHeaders:_});var w=n(81446),D=(n(16322),n(44414)),S=window.app.pageOptions.isOrgContext,P=function(e){function t(e){var n;return(0,i.A)(this,t),(n=(0,s.A)(this,t,[e])).togglePlan=function(e){n.setState({currentPlan:e},(function(){}))},n.onPay=function(){var e,t,i,r=n.props.paymentType,s=n.state,a=s.currentPlan,o=s.assetQuotaUnitCount,c=s.count;if("paid"===r)i=a.count,e=a.total_amount;else if("extend_time"===r)i=a.count,t=a.asset_quota,e=a.total_amount;else if("add_user"===r)i=c,e=c*a.price_per_user;else{if("buy_quota"!==r)return void l.A.danger((0,x.AP)("Internal Server Error"));t=o*a.asset_quota_unit,e=o*a.price_per_asset_quota_unit}n.props.onPay(a.plan_id,i,t,e)},n.onCountInputChange=function(e){if(n.state.currentPlan.can_custom_count){var t=e.target.value.replace(/^(0+)|[^\d]+/g,"");t<1?t=1:t>9999&&(t=9999),n.setState({count:t})}},n.onAssetQuotaUnitCountInputChange=function(e){if(n.state.currentPlan.can_custom_asset_quota){var t=e.target.value.replace(/^(0+)|[^\d]+/g,"");t<1?t=1:t>9999&&(t=9999),n.setState({assetQuotaUnitCount:t})}},n.renderPaidOrExtendTime=function(){var e=n.props,t=e.plans,i=e.paymentType,r=n.state.currentPlan,s=0;"extend_time"===i&&(s=r.asset_quota-100);var a=r.total_amount,l=a;return(0,D.jsxs)("div",{className:"d-flex flex-column subscription-container",children:[(0,D.jsx)("span",{className:"subscription-subtitle",children:"\u9009\u62e9\u65b9\u6848"}),(0,D.jsx)("dl",{className:"items-dl",children:t.map((function(e,t){var i=e.plan_id===r.plan_id?"plan-selected":"",s="\uffe5"+e.price_per_user;return S&&(s+="/\u6bcf\u7528\u6237"),(0,D.jsxs)("dd",{className:"plan-description-item ".concat(i),onClick:n.togglePlan.bind(n,e),children:[(0,D.jsx)("span",{className:"plan-name",children:e.name}),(0,D.jsx)("span",{className:"plan-description",children:s})]},t)}))}),"extend_time"===i&&s>0&&(0,D.jsxs)(o.Fragment,{children:[(0,D.jsx)("span",{className:"subscription-subtitle",children:"\u589e\u52a0\u7a7a\u95f4"}),(0,D.jsx)("dl",{className:"items-dl",children:(0,D.jsxs)("dd",{className:"order-item order-item-top order-item-bottom subscription-list",children:[(0,D.jsx)("span",{className:"order-into",children:r.asset_quota_unit+"GB x "+s/r.asset_quota_unit}),(0,D.jsx)("span",{className:"order-value",children:"\uffe5"+s/r.asset_quota_unit*r.price_per_asset_quota_unit})]})})]}),(0,D.jsx)("span",{className:"subscription-subtitle",children:"\u65b9\u6848\u6c47\u603b"}),(0,D.jsx)("dl",{className:"items-dl",children:(0,D.jsxs)("div",{children:[(0,D.jsxs)("dd",{className:"order-item order-item-top",children:[(0,D.jsx)("span",{className:"order-into",children:"\u6240\u9009\u65b9\u6848"}),(0,D.jsx)("span",{className:"order-value",children:r.name})]}),S&&(0,D.jsxs)("dd",{className:"order-item",children:[(0,D.jsx)("span",{className:"order-into",children:"\u6210\u5458\u4eba\u6570"}),(0,D.jsx)("span",{className:"order-value",children:r.count+"\u4eba"})]}),(0,D.jsxs)("dd",{className:"order-item",children:[(0,D.jsx)("span",{className:"order-into",children:"\u53ef\u7528\u7a7a\u95f4"}),(0,D.jsx)("span",{className:"order-value",children:"100GB(\u9644\u8d60)"+(s>0?"+"+s+"GB(\u6269\u5145)":"")})]}),(0,D.jsxs)("dd",{className:"order-item order-item-bottom rounded-0",children:[(0,D.jsx)("span",{className:"order-into",children:"\u5230\u671f\u65f6\u95f4"}),(0,D.jsx)("span",{className:"order-value",children:r.new_term_end})]}),(0,D.jsxs)("dd",{className:"order-item order-item-bottom subscription-list",children:[(0,D.jsx)("span",{className:"order-into",children:"\u5b9e\u9645\u652f\u4ed8\u91d1\u989d"}),(0,D.jsxs)("span",{className:"order-price",children:[l!==a&&(0,D.jsx)("span",{style:{fontSize:"small",textDecoration:"line-through",color:"#9a9a9a"},children:"\uffe5"+l}),(0,D.jsx)("span",{children:"\uffe5"+a+" "})]})]})]})}),(0,D.jsx)(c.A,{className:"subscription-submit",color:"primary",onClick:n.onPay,children:"\u63d0\u4ea4\u8ba2\u5355"})]})},n.renderAddUser=function(){var e=n.state,t=e.currentPlan,i=e.count,r="\u65b0\u589e\u7528\u6237",s=i*t.price_per_user,a=s;return(0,D.jsxs)("div",{className:"d-flex flex-column subscription-container price-version-container-header subscription-add-user",children:[(0,D.jsx)("div",{className:"price-version-container-top"}),(0,D.jsx)("h3",{className:"user-quota-plan-name py-5",children:t.name}),(0,D.jsxs)("span",{className:"py-2 mb-0 text-orange font-500 text-center",children:["\xa5 ",(0,D.jsx)("span",{className:"price-version-plan-price",children:t.price})," "+t.description]}),(0,D.jsxs)(h.A,{style:{marginBottom:"5px"},className:"user-numbers",children:[(0,D.jsx)(u.A,{addonType:"prepend",children:(0,D.jsx)(d.A,{children:r})}),(0,D.jsx)(g.A,{className:"py-2",placeholder:r,title:r,type:"number",value:i||1,min:"1",max:"9999",disabled:!t.can_custom_count,onChange:n.onCountInputChange})]}),(0,D.jsxs)("span",{className:"py-2 text-orange mb-0 font-500 price-version-plan-whole-price text-center",children:["\u603b\u4ef7 \xa5 "+a,s!==a&&(0,D.jsx)("span",{style:{fontSize:"small",textDecoration:"line-through",color:"#9a9a9a"},children:" \uffe5"+s})]}),(0,D.jsx)("span",{className:"py-2 mb-0 text-lg-size font-500 price-version-plan-valid-day text-center",children:"\u6709\u6548\u671f\u81f3 "+t.new_term_end}),(0,D.jsx)("span",{className:"subscription-notice text-center py-5",children:"\u6ce8\uff1a\u5f53\u6709\u6548\u671f\u5269\u4f59\u5929\u6570\u5c11\u4e8e\u8ba1\u5212\u4e2d\u7684\u65f6\u5019\uff0c\u589e\u52a0\u7528\u6237\u7684\u4ef7\u683c\u6309\u5929\u6765\u8ba1\u7b97"}),(0,D.jsx)(c.A,{className:"subscription-submit",onClick:n.onPay,color:"primary",children:"\u7acb\u5373\u8d2d\u4e70"})]})},n.renderBuyQuota=function(){var e=n.state,t=e.currentPlan,i=e.assetQuotaUnitCount,r="\u65b0\u589e\u7a7a\u95f4",s=i*t.price_per_asset_quota_unit,a=s;return(0,D.jsxs)("div",{className:"d-flex flex-column subscription-container price-version-container-header subscription-add-space",children:[(0,D.jsx)("div",{className:"price-version-container-top"}),(0,D.jsx)("h3",{className:"user-quota-plan-name py-5",children:t.name}),(0,D.jsxs)("span",{className:"py-2 mb-0 text-orange font-500 text-center",children:["\xa5 ",(0,D.jsx)("span",{className:"price-version-plan-price",children:t.asset_quota_price})," "+t.asset_quota_description]}),(0,D.jsxs)(h.A,{style:{marginBottom:"5px"},className:"space-quota",children:[(0,D.jsx)(u.A,{addonType:"prepend",children:(0,D.jsx)(d.A,{children:(0,D.jsx)("span",{className:"font-500",children:r})})}),(0,D.jsx)(g.A,{className:"py-2",placeholder:r,title:r,type:"number",value:i||1,min:"1",max:"9999",disabled:!t.can_custom_asset_quota,onChange:n.onAssetQuotaUnitCountInputChange}),(0,D.jsx)(u.A,{addonType:"append",children:(0,D.jsx)(d.A,{children:(0,D.jsx)("span",{className:"font-500",children:" x "+t.asset_quota_unit+"GB"})})})]}),(0,D.jsxs)("span",{className:"py-4 text-orange mb-0 font-500 price-version-plan-whole-price text-center",children:["\u603b\u4ef7 \xa5 "+a,s!==a&&(0,D.jsx)("span",{style:{fontSize:"small",textDecoration:"line-through",color:"#9a9a9a"},children:" \uffe5"+s})]}),(0,D.jsx)("span",{className:"py-2 mb-0 text-lg-size font-500 price-version-plan-valid-day text-center",children:"\u6709\u6548\u671f\u81f3 "+t.new_term_end}),(0,D.jsx)("span",{className:"subscription-notice text-center py-5",children:"\u6ce8\uff1a\u5f53\u6709\u6548\u671f\u5269\u4f59\u5929\u6570\u5c11\u4e8e\u8ba1\u5212\u4e2d\u7684\u65f6\u5019\uff0c\u589e\u52a0\u7a7a\u95f4\u7684\u4ef7\u683c\u6309\u5929\u6765\u8ba1\u7b97"}),(0,D.jsx)(c.A,{className:"subscription-submit",onClick:n.onPay,color:"primary",children:"\u7acb\u5373\u8d2d\u4e70"})]})},n.state={currentPlan:e.plans[0],assetQuotaUnitCount:1,count:1},n}return(0,a.A)(t,e),(0,r.A)(t,[{key:"render",value:function(){var e=this.props.paymentType;return"paid"===e||"extend_time"===e?this.renderPaidOrExtendTime():"add_user"===e?this.renderAddUser():"buy_quota"===e?this.renderBuyQuota():void l.A.danger((0,x.AP)("Internal Server Error"))}}])}(o.Component),M=function(e){function t(e){var n;return(0,i.A)(this,t),(n=(0,s.A)(this,t,[e])).getPlans=function(){k.getSubscriptionPlans(n.props.paymentType).then((function(e){n.setState({planList:e.data.plan_list,paymentSourceList:e.data.payment_source_list,isLoading:!1})})).catch((function(e){var t=A.Aq.getErrorMsg(e);n.setState({isLoading:!1,errorMsg:t})}))},n.onPay=function(e,t,i,r){n.setState({isWaiting:!0});var s=x.xW+"/subscription/pay/?payment_source="+n.state.paymentSourceList[0]+"&payment_type="+n.props.paymentType+"&plan_id="+e+"&total_amount="+r;t&&(s+="&count="+t),i&&(s+="&asset_quota="+i),window.open(s)},n.onReload=function(){window.location.reload()},n.state={isLoading:!0,isWaiting:!1,planList:[],paymentSourceList:[]},n}return(0,a.A)(t,e),(0,r.A)(t,[{key:"componentDidMount",value:function(){this.getPlans()}},{key:"render",value:function(){var e=this.state,t=e.isLoading,n=e.isWaiting,i=e.planList,r=this.props,s=r.toggleDialog,a=r.paymentTypeTrans,o=r.paymentType,l="paid"===o||"extend_time"===o?{width:"560px",maxWidth:"560px"}:{width:"560px"};return t?(0,D.jsxs)(p.A,{isOpen:!0,toggle:s,children:[(0,D.jsx)(f.A,{toggle:s,children:a}),(0,D.jsx)(m.A,{children:(0,D.jsx)(w.A,{})})]}):n?(0,D.jsxs)(p.A,{isOpen:!0,toggle:this.onReload,children:[(0,D.jsx)(f.A,{toggle:this.onReload,children:a}),(0,D.jsx)(m.A,{children:(0,D.jsx)("div",{children:"\u662f\u5426\u5b8c\u6210\u4ed8\u6b3e?"})}),(0,D.jsx)(v.A,{children:(0,D.jsx)("button",{className:"btn btn-outline-primary",onClick:this.onReload,children:"\u662f"})})]}):(0,D.jsxs)(p.A,{isOpen:!0,toggle:s,style:l,children:[(0,D.jsx)(f.A,{toggle:s,children:a}),(0,D.jsx)(m.A,{children:(0,D.jsx)("div",{className:"d-flex justify-content-between",children:(0,D.jsx)(P,{plans:i,onPay:this.onPay,paymentType:this.props.paymentType})})})]})}}])}(o.Component),C=function(e){function t(e){var n;return(0,i.A)(this,t),(n=(0,s.A)(this,t,[e])).getSubscription=function(){k.getSubscription().then((function(e){var t=e.data.subscription,i=e.data.payment_type_list;if(t){var r=t.is_active,s=t.plan;n.setState({isLoading:!1,subscription:t,planName:s.name,userLimit:t.user_limit,assetQuota:r?t.asset_quota:s.asset_quota,termEnd:r?t.term_end:"\u5df2\u8fc7\u671f",paymentTypeList:i})}else n.setState({isLoading:!1,paymentTypeList:i})})).catch((function(e){var t=A.Aq.getErrorMsg(e);n.setState({isLoading:!1,errorMsg:t})}))},n.toggleDialog=function(){n.setState({isDialogOpen:!n.state.isDialogOpen})},n.togglePaymentType=function(e){n.setState({currentPaymentType:e}),n.toggleDialog()},n.paymentTypeTransMap={paid:"\u7acb\u5373\u8d2d\u4e70",extend_time:"\u7acb\u5373\u7eed\u8d39",add_user:"\u589e\u52a0\u7528\u6237",buy_quota:"\u589e\u52a0\u7a7a\u95f4"},n.state={isLoading:!0,errorMsg:"",isDialogOpen:!1,planName:n.props.isOrgContext?"\u56e2\u961f\u7248":"\u4e2a\u4eba\u7248",userLimit:20,assetQuota:1,termEnd:"\u957f\u671f",subscription:null,paymentTypeList:[],currentPaymentType:"",errorMsgCode:""},n}return(0,a.A)(t,e),(0,r.A)(t,[{key:"componentDidMount",value:function(){this.getSubscription()}},{key:"render",value:function(){var e=this,t=this.state,n=t.isLoading,i=t.errorMsg,r=t.planName,s=t.userLimit,a=t.assetQuota,l=t.termEnd,c=t.isDialogOpen,h=t.paymentTypeList,u=t.currentPaymentType;return n?(0,D.jsx)(w.A,{}):i?(0,D.jsx)("p",{className:"text-center mt-8 error",children:i}):(0,D.jsxs)(o.Fragment,{children:[(0,D.jsxs)("div",{className:"content position-relative",onScroll:this.props.handleContentScroll,children:[(0,D.jsxs)("div",{id:"current-plan",className:"subscription-info",children:[(0,D.jsx)("h3",{className:"subscription-info-heading",children:"\u5f53\u524d\u7248\u672c"}),(0,D.jsx)("p",{className:"mb-2",children:r})]}),this.props.isOrgContext&&(0,D.jsxs)("div",{id:"user-limit",className:"subscription-info",children:[(0,D.jsx)("h3",{className:"subscription-info-heading",children:"\u7528\u6237\u6570\u9650\u5236"}),(0,D.jsx)("p",{className:"mb-2",children:s})]}),(0,D.jsxs)("div",{id:"asset-quota",className:"subscription-info",children:[(0,D.jsx)("h3",{className:"subscription-info-heading",children:"\u7a7a\u95f4"}),(0,D.jsx)("p",{className:"mb-2",children:a?a+"GB":"1GB"})]}),(0,D.jsxs)("div",{id:"current-subscription-period",className:"subscription-info",children:[(0,D.jsx)("h3",{className:"subscription-info-heading",children:"\u8ba2\u9605\u6709\u6548\u671f"}),(0,D.jsx)("p",{className:"mb-2",children:l})]}),(0,D.jsxs)("div",{id:"product-price",className:"subscription-info",children:[(0,D.jsx)("h3",{className:"subscription-info-heading",children:"\u4e91\u670d\u52a1\u4ed8\u8d39\u65b9\u6848"}),(0,D.jsx)("p",{className:"mb-2",children:(0,D.jsx)("a",{rel:"noopener noreferrer",target:"_blank",href:"https://www.seafile.com/seafile-docs/home/",children:"\u67e5\u770b\u8be6\u60c5"})})]}),h.map((function(t,n){var i=e.paymentTypeTransMap[t];return(0,D.jsx)("button",{className:"btn btn-outline-primary mr-4",onClick:e.togglePaymentType.bind(e,t),children:i},n)})),!this.state.subscription&&(0,D.jsxs)("div",{id:"sales-consultant",className:"subscription-info mt-6",children:[(0,D.jsx)("h3",{className:"subscription-info-heading",children:"\u9500\u552e\u54a8\u8be2"}),(0,D.jsx)("img",{className:"mb-2",src:"/media/img/qr-sale.png",alt:"",width:"112"}),(0,D.jsx)("p",{className:"mb-2",children:"\u5fae\u4fe1\u626b\u7801\u8054\u7cfb\u9500\u552e"})]})]}),c&&(0,D.jsx)(M,{paymentType:u,paymentTypeTrans:this.paymentTypeTransMap[u],isOrgContext:this.props.isOrgContext,toggleDialog:this.toggleDialog})]})}}])}(o.Component),N=C},69619:function(e,t,n){var i=n(23029),r=n(92901),s=n(39874),a=n(85501),o=n(9950),l=n(17119),c=n(13690),h=n(40326),u=n(49403),d=n(95754),g=n(44414),p=function(e){function t(){var e;(0,i.A)(this,t);for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(e=(0,s.A)(this,t,[].concat(r))).getActiveClass=function(t){return e.props.currentTab==t?"active":""},e.tabItemClick=function(t){e.props.tabItemClick(t)},e}return(0,a.A)(t,e),(0,r.A)(t,[{key:"render",value:function(){var e=this;return(0,g.jsxs)("div",{className:"side-panel ".concat(this.props.isSidePanelClosed?"":"left-zero"),children:[(0,g.jsx)("div",{className:"side-panel-north",children:(0,g.jsx)(u.A,{onCloseSidePanel:this.props.onCloseSidePanel})}),(0,g.jsx)("div",{className:"side-panel-center",children:(0,g.jsx)("div",{className:"side-nav",children:(0,g.jsxs)("div",{className:"side-nav-con",children:[(0,g.jsx)("h3",{className:"sf-heading",style:{color:"#f7941d"},children:(0,h.AP)("Admin")}),(0,g.jsxs)("ul",{className:"nav nav-pills flex-column nav-container",children:[(0,g.jsx)("li",{className:"nav-item ".concat(this.getActiveClass("info")),children:(0,g.jsxs)(c.N_,{className:"nav-link ellipsis ".concat(this.getActiveClass("info")),to:h.Yc+"org/info/",onClick:function(){return e.tabItemClick("info")},children:[(0,g.jsx)("span",{className:"sf2-icon-info"}),(0,g.jsx)("span",{className:"nav-text",children:(0,h.AP)("Info")})]})}),(0,g.jsx)("li",{className:"nav-item ".concat(this.getActiveClass("statistics-admin")),children:(0,g.jsxs)(c.N_,{className:"nav-link ellipsis ".concat(this.getActiveClass("statistics-admin")),to:h.Yc+"org/statistics-admin/file/",onClick:function(){return e.tabItemClick("statistics-admin")},children:[(0,g.jsx)("span",{className:"sf2-icon-histogram"}),(0,g.jsx)("span",{className:"nav-text",children:(0,h.AP)("Statistic")})]})}),(0,g.jsx)("li",{className:"nav-item ".concat(this.getActiveClass("deviceadmin")),children:(0,g.jsxs)(c.N_,{className:"nav-link ellipsis ".concat(this.getActiveClass("deviceadmin")),to:h.Yc+"org/deviceadmin/desktop-devices/",onClick:function(){return e.tabItemClick("deviceadmin")},children:[(0,g.jsx)("span",{className:"sf2-icon-monitor"}),(0,g.jsx)("span",{className:"nav-text",children:(0,h.AP)("Devices")})]})}),(0,g.jsx)("li",{className:"nav-item ".concat(this.getActiveClass("web-settings")),children:(0,g.jsxs)(c.N_,{className:"nav-link ellipsis ".concat(this.getActiveClass("web-settings")),to:h.Yc+"org/web-settings/",onClick:function(){return e.tabItemClick("web-settings")},children:[(0,g.jsx)("span",{className:"sf2-icon-cog2"}),(0,g.jsx)("span",{className:"nav-text",children:(0,h.AP)("Settings")})]})}),(0,g.jsx)("li",{className:"nav-item ".concat(this.getActiveClass("repoadmin")),children:(0,g.jsxs)(c.N_,{className:"nav-link ellipsis ".concat(this.getActiveClass("repoadmin")),to:h.Yc+"org/repoadmin/",onClick:function(){return e.tabItemClick("repoadmin")},children:[(0,g.jsx)("span",{className:"sf2-icon-library"}),(0,g.jsx)("span",{className:"nav-text",children:(0,h.AP)("Libraries")})]})}),(0,g.jsx)("li",{className:"nav-item ".concat(this.getActiveClass("users")),children:(0,g.jsxs)(c.N_,{className:"nav-link ellipsis ".concat(this.getActiveClass("users")||this.getActiveClass("admins")),to:h.Yc+"org/useradmin/",onClick:function(){return e.tabItemClick("users")},children:[(0,g.jsx)("span",{className:"sf2-icon-user"}),(0,g.jsx)("span",{className:"nav-text",children:(0,h.AP)("Users")})]})}),(0,g.jsx)("li",{className:"nav-item ".concat(this.getActiveClass("groupadmin")),children:(0,g.jsxs)(c.N_,{className:"nav-link ellipsis ".concat(this.getActiveClass("groupadmin")),to:h.Yc+"org/groupadmin/",onClick:function(){return e.tabItemClick("groupadmin")},children:[(0,g.jsx)("span",{className:"sf2-icon-group"}),(0,g.jsx)("span",{className:"nav-text",children:(0,h.AP)("Groups")})]})}),(0,g.jsx)("li",{className:"nav-item ".concat(this.getActiveClass("departmentadmin")),children:(0,g.jsxs)(c.N_,{className:"nav-link ellipsis ".concat(this.getActiveClass("departmentadmin")),to:h.Yc+"org/departmentadmin/",onClick:function(){return e.tabItemClick("departmentadmin")},children:[(0,g.jsx)("span",{className:"sf2-icon-organization"}),(0,g.jsx)("span",{className:"nav-text",children:(0,h.AP)("Departments")})]})}),h.n6&&(0,g.jsx)("li",{className:"nav-item ".concat(this.getActiveClass("subscription")),children:(0,g.jsxs)(c.N_,{className:"nav-link ellipsis ".concat(this.getActiveClass("subscription")),to:h.Yc+"org/subscription/",onClick:function(){return e.tabItemClick("subscription")},children:[(0,g.jsx)(d.A,{symbol:"currency"}),(0,g.jsx)("span",{className:"nav-text",children:"\u4ed8\u8d39\u7ba1\u7406"})]})}),(0,g.jsx)("li",{className:"nav-item ".concat(this.getActiveClass("publinkadmin")),children:(0,g.jsxs)(c.N_,{className:"nav-link ellipsis ".concat(this.getActiveClass("publinkadmin")),to:h.Yc+"org/publinkadmin/",onClick:function(){return e.tabItemClick("publinkadmin")},children:[(0,g.jsx)("span",{className:"sf2-icon-link"}),(0,g.jsx)("span",{className:"nav-text",children:(0,h.AP)("Links")})]})}),(0,g.jsx)("li",{className:"nav-item ".concat(this.getActiveClass("fileaudit")||this.getActiveClass("file-update")||this.getActiveClass("perm-audit")),children:(0,g.jsxs)(c.N_,{className:"nav-link ellipsis ".concat(this.getActiveClass("fileaudit")||this.getActiveClass("file-update")||this.getActiveClass("perm-audit")),to:h.Yc+"org/logadmin/",onClick:function(){return e.tabItemClick("fileaudit")},children:[(0,g.jsx)("span",{className:"sf2-icon-clock"}),(0,g.jsx)("span",{className:"nav-text",children:(0,h.AP)("Logs")})]})}),h.bH&&(0,g.jsx)("li",{className:"nav-item ".concat(this.getActiveClass("SAML config")),children:(0,g.jsxs)(c.N_,{className:"nav-link ellipsis ".concat(this.getActiveClass("SAML config")),to:h.Yc+"org/samlconfig/",onClick:function(){return e.tabItemClick("SAML config")},children:[(0,g.jsx)("span",{className:"sf2-icon-cog2"}),(0,g.jsx)("span",{className:"nav-text",children:(0,h.AP)("SAML config")})]})})]})]})})})]})}}])}(o.Component),f=p,m=n(4159),v=n.n(m),x=n(51925),A=function(e){function t(){return(0,i.A)(this,t),(0,s.A)(this,t,arguments)}return(0,a.A)(t,e),(0,r.A)(t,[{key:"render",value:function(){return(0,g.jsxs)("div",{className:"main-panel-north ".concat(this.props.children?"border-left-show":""),children:[(0,g.jsxs)("div",{className:"cur-view-toolbar",children:[(0,g.jsx)("span",{className:"sf2-icon-menu side-nav-toggle hidden-md-up d-md-none",title:"Side Nav Menu"}),(0,g.jsx)("div",{className:"operation",children:this.props.children})]}),(0,g.jsxs)("div",{className:"common-toolbar",children:[this.props.search&&this.props.search,(0,g.jsx)(x.A,{isAdminPanel:!0})]})]})}}])}(o.Component),y=A,b=function(e){function t(e){var n;return(0,i.A)(this,t),(n=(0,s.A)(this,t,[e])).navItems=[{name:"fileStatistic",urlPart:"statistics-admin/file",text:(0,h.AP)("File")},{name:"storageStatistic",urlPart:"statistics-admin/total-storage",text:(0,h.AP)("Storage")},{name:"usersStatistic",urlPart:"statistics-admin/active-users",text:(0,h.AP)("Users")},{name:"trafficStatistic",urlPart:"statistics-admin/traffic",text:(0,h.AP)("Traffic")},{name:"reportsStatistic",urlPart:"statistics-admin/reports",text:(0,h.AP)("Reports")}],n}return(0,a.A)(t,e),(0,r.A)(t,[{key:"render",value:function(){var e=this.props.currentItem;return(0,g.jsx)("div",{className:"cur-view-path tab-nav-container",children:(0,g.jsx)("ul",{className:"nav",children:this.navItems.map((function(t,n){return(0,g.jsx)("li",{className:"nav-item",children:(0,g.jsx)(c.N_,{to:"".concat(h.Yc,"org/").concat(t.urlPart,"/"),className:"nav-link".concat(e==t.name?" active":""),children:t.text})},n)}))})})}}])}(o.Component),j=n(64467),k=n(18849),_=n(52544),w=n(86547),D=n.n(w),S=n(81139),P=(n(19617),"YYYY-MM-DD"),M=function(e){function t(e){var n;return(0,i.A)(this,t),(n=(0,s.A)(this,t,[e])).defaultCalendarValue=null,n}return(0,a.A)(t,e),(0,r.A)(t,[{key:"componentDidMount",value:function(){var e=window.app.config.lang;this.defaultCalendarValue=v()().locale(e).clone()}},{key:"render",value:function(){var e=this.props,t=(0,g.jsx)(_.default,{defaultValue:this.defaultCalendarValue,disabledDate:e.disabledDate,format:P,locale:(0,S.r)()});return(0,g.jsx)(D(),{calendar:t,value:e.value,onChange:e.onChange,children:function(e){var t=e.value;return(0,g.jsx)("span",{children:(0,g.jsx)("input",{placeholder:"yyyy-mm-dd",tabIndex:"-1",readOnly:!0,value:t&&t.format(P)||"",className:"form-control system-statistic-input"})})}})}}])}(o.Component),C=function(e){function t(e){var n;return(0,i.A)(this,t),(n=(0,s.A)(this,t,[e])).changeActive=function(e){if(n.state.statisticType!==e){var t,i=v()().format("YYYY-MM-DD 00:00:00");switch(e){case"oneWeek":t=v()().subtract(6,"d").format("YYYY-MM-DD 00:00:00");break;case"oneMonth":t=v()().subtract(29,"d").format("YYYY-MM-DD 00:00:00");break;case"oneYear":t=v()().subtract(364,"d").format("YYYY-MM-DD 00:00:00")}n.setState({statisticType:e});n.props.getActiviesFiles(t,i,"day")}},n.disabledStartDate=function(e){if(!e)return!1;var t=v()().format(),i=n.state.endValue;return i?i.isBefore(e)||v()(e).format()>t:t<v()(e).format()},n.disabledEndDate=function(e){if(!e)return!1;var t=v()().format(),i=n.state.startValue;return i?e.isBefore(i)||v()(e).format()>t:t<v()(e).format()},n.onChange=function(e,t){n.setState((0,j.default)({},e,t))},n.onSubmit=function(){var e=n.state,t=e.startValue,i=e.endValue;if(t&&i){n.setState({statisticType:"itemButton"});var r=v()(t).format("YYYY-MM-DD 00:00:00"),s=v()(i).format("YYYY-MM-DD 00:00:00");n.props.getActiviesFiles(r,s,"day")}},n.state={statisticType:"oneWeek",startValue:null,endValue:null},n}return(0,a.A)(t,e),(0,r.A)(t,[{key:"componentDidMount",value:function(){var e=v()().format("YYYY-MM-DD 00:00:00"),t=v()().subtract(6,"d").format("YYYY-MM-DD 00:00:00");this.props.getActiviesFiles(t,e,"day")}},{key:"render",value:function(){var e=this.state,t=e.statisticType,n=e.endValue,i=e.startValue;return(0,g.jsxs)(o.Fragment,{children:[this.props.children,(0,g.jsxs)("div",{className:"system-statistic-time-range",children:[(0,g.jsxs)("div",{className:"sys-stat-tool",children:[(0,g.jsx)("div",{className:"system-statistic-item border-right-0 rounded-left ".concat("oneWeek"===t?"item-active":""),onClick:this.changeActive.bind(this,"oneWeek"),children:(0,h.AP)("7 Days")}),(0,g.jsx)("div",{className:"system-statistic-item border-right-0 ".concat("oneMonth"===t?"item-active":""),onClick:this.changeActive.bind(this,"oneMonth"),children:(0,h.AP)("30 Days")}),(0,g.jsx)("div",{className:"system-statistic-item rounded-right ".concat("oneYear"===t?"item-active":""),onClick:this.changeActive.bind(this,"oneYear"),children:(0,h.AP)("1 Year")})]}),(0,g.jsxs)("div",{className:"system-statistic-input-container",children:[(0,g.jsx)(M,{disabledDate:this.disabledStartDate,value:i,onChange:this.onChange.bind(this,"startValue")}),(0,g.jsx)("span",{className:"system-statistic-connect",children:"-"}),(0,g.jsx)(M,{disabledDate:this.disabledEndDate,value:n,onChange:this.onChange.bind(this,"endValue")}),(0,g.jsx)(k.A,{color:"primary",className:"operation-item system-statistic-button",onClick:this.onSubmit,children:(0,h.AP)("Submit")})]})]})]})}}])}(o.Component),N=n(2662),I=n(65478),O=n(19167),T=n(65604),L=n(81446);I.t1.register(I.PP,I.kc,I.FN,I.No,I.hE,I.m_,I.s$);var R=function(e){function t(e){var n;return(0,i.A)(this,t),(n=(0,s.A)(this,t,[e])).titleCallback=function(e,t){return t.datasets[e.datasetIndex].label+": "+T.Aq.bytesToSize(e.yLabel)},n.ticksCallback=function(e,t,n){return T.Aq.bytesToSize(e)},n.state={data:{},options:{}},n}return(0,a.A)(t,e),(0,r.A)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.labels,n=e.filesData,i=e.isTitleCallback,r=e.isTicksCallback,s=e.suggestedMaxNumbers,a=e.isLegendStatus,o=e.chartTitle,l=this,c={labels:t,datasets:n},h={title:{display:!0,fontSize:14,text:o},elements:{line:{fill:!1,tension:0,borderWidth:2}},legend:{display:a,labels:{usePointStyle:!0}},tooltips:{callbacks:{label:function(e,t){return i?l.titleCallback(e,t):t.datasets[e.datasetIndex].label+": "+e.yLabel}}},layout:{padding:{right:100}},scales:{y:{display:!0,beginAtZero:!0,suggestedMax:s,ticks:{callback:function(e,t,n){return r?l.ticksCallback(e,t,n):e}}},x:{display:!0,ticks:{maxTicksLimit:20}}}};this.setState({data:c,options:h})}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t={labels:e.labels,datasets:e.filesData};this.setState({data:t})}},{key:"render",value:function(){var e=this.state,t=e.data,n=e.options;return 0===Object.keys(t).length&&0===Object.keys(n).length?(0,g.jsx)(L.A,{}):(0,g.jsx)(g.Fragment,{children:(0,g.jsx)(O.N1,{data:t,options:n})})}}])}(o.Component),E=n(4086),F=(n(63864),function(e){function t(e){var n;return(0,i.A)(this,t),(n=(0,s.A)(this,t,[e])).getActiviesFiles=function(e,t,i){var r=n.state.filesData;N.k.orgAdminStatisticFiles(h.Id,e,t,i).then((function(e){var t=[],i=[],s=[],a=[],o=[],l=e.data;if(Array.isArray(l)){l.forEach((function(e){t.push(v()(e.datetime).format("YYYY-MM-DD")),i.push(e.added),s.push(e.deleted),o.push(e.modified),a.push(e.visited)}));var c={label:(0,h.AP)("Added"),data:i,borderColor:"#57cd6b",backgroundColor:"#57cd6b"},u={label:(0,h.AP)("Visited"),data:a,borderColor:"#fd913a",backgroundColor:"#fd913a"},d={label:(0,h.AP)("Modified"),data:o,borderColor:"#72c3fc",backgroundColor:"#72c3fc"},g={label:(0,h.AP)("Deleted"),data:s,borderColor:"#f75356",backgroundColor:"#f75356"};r=[u,c,d,g]}n.setState({filesData:r,labels:t,isLoading:!1})})).catch((function(e){var t=T.Aq.getErrorMsg(e);E.A.danger(t)}))},n.state={filesData:[],labels:[],isLoading:!0},n}return(0,a.A)(t,e),(0,r.A)(t,[{key:"render",value:function(){var e=this.state,t=e.labels,n=e.filesData,i=e.isLoading;return(0,g.jsxs)(o.Fragment,{children:[(0,g.jsx)(y,{}),(0,g.jsxs)("div",{className:"cur-view-container",children:[(0,g.jsx)(b,{currentItem:"fileStatistic"}),(0,g.jsxs)("div",{className:"cur-view-content",children:[(0,g.jsx)(C,{getActiviesFiles:this.getActiviesFiles}),i&&(0,g.jsx)(L.A,{}),!i&&t.length>0&&(0,g.jsx)(R,{labels:t,filesData:n,suggestedMaxNumbers:10,isLegendStatus:!0,chartTitle:(0,h.AP)("File Operations")})]})]})]})}}])}(o.Component)),z=function(e){function t(e){var n;return(0,i.A)(this,t),(n=(0,s.A)(this,t,[e])).getActiviesFiles=function(e,t,i){var r=n.state.filesData;N.k.orgAdminStatisticStorages(h.Id,e,t,i).then((function(e){var t=[],i=[],s=e.data;if(Array.isArray(s)){s.forEach((function(e){t.push(v()(e.datetime).format("YYYY-MM-DD")),i.push(e.total_storage)}));var a={label:(0,h.AP)("Total Storage"),data:i,borderColor:"#fd913a",backgroundColor:"#fd913a"};r=[a]}n.setState({filesData:r,labels:t,isLoading:!1})})).catch((function(e){var t=T.Aq.getErrorMsg(e);E.A.danger(t)}))},n.state={filesData:[],labels:[],isLoading:!0},n}return(0,a.A)(t,e),(0,r.A)(t,[{key:"render",value:function(){var e=this.state,t=e.labels,n=e.filesData,i=e.isLoading;return(0,g.jsxs)(o.Fragment,{children:[(0,g.jsx)(y,{}),(0,g.jsxs)("div",{className:"cur-view-container",children:[(0,g.jsx)(b,{currentItem:"storageStatistic"}),(0,g.jsxs)("div",{className:"cur-view-content",children:[(0,g.jsx)(C,{getActiviesFiles:this.getActiviesFiles}),i&&(0,g.jsx)(L.A,{}),!i&&t.length>0&&(0,g.jsx)(R,{labels:t,filesData:n,suggestedMaxNumbers:1e7,isTitleCallback:!0,isTicksCallback:!0,isLegendStatus:!1,chartTitle:(0,h.AP)("Total Storage")})]})]})]})}}])}(o.Component),U=n(85077),B=function(e){function t(e){return(0,i.A)(this,t),(0,s.A)(this,t,[e])}return(0,a.A)(t,e),(0,r.A)(t,[{key:"render",value:function(){var e=this.props,t=e.type,n=e.sortBy,i="asc"==e.sortOrder?(0,g.jsx)("span",{className:"sf3-font sf3-font-down rotate-180 d-inline-block"}):(0,g.jsx)("span",{className:"sf3-font sf3-font-down"});return(0,g.jsxs)("table",{className:"table-hover",children:[(0,g.jsx)("thead",{children:(0,g.jsxs)("tr",{children:[(0,g.jsx)("th",{width:"16%",children:"user"==t?(0,h.AP)("User"):(0,h.AP)("Organization")}),(0,g.jsx)("th",{width:"11%",children:(0,g.jsxs)("div",{className:"d-block table-sort-op cursor-pointer",onClick:this.props.sortItems.bind(this,"sync_file_upload"),children:[(0,h.AP)("Sync Upload")," ","sync_file_upload"===n&&i]})}),(0,g.jsx)("th",{width:"14%",children:(0,g.jsxs)("div",{className:"d-block table-sort-op cursor-pointer",onClick:this.props.sortItems.bind(this,"sync_file_download"),children:[(0,h.AP)("Sync Download")," ","sync_file_download"===n&&i]})}),(0,g.jsx)("th",{width:"11%",children:(0,g.jsxs)("div",{className:"d-block table-sort-op cursor-pointer",onClick:this.props.sortItems.bind(this,"web_file_upload"),children:[(0,h.AP)("Web Upload")," ","web_file_upload"===n&&i]})}),(0,g.jsx)("th",{width:"14%",children:(0,g.jsxs)("div",{className:"d-block table-sort-op cursor-pointer",onClick:this.props.sortItems.bind(this,"web_file_download"),children:[(0,h.AP)("Web Download")," ","web_file_download"===n&&i]})}),(0,g.jsx)("th",{width:"17%",children:(0,g.jsxs)("div",{className:"d-block table-sort-op cursor-pointer",onClick:this.props.sortItems.bind(this,"link_file_upload"),children:[(0,h.AP)("Share link upload")," ","link_file_upload"===n&&i]})}),(0,g.jsx)("th",{width:"17%",children:(0,g.jsxs)("div",{className:"d-block table-sort-op cursor-pointer",onClick:this.props.sortItems.bind(this,"link_file_download"),children:[(0,h.AP)("Share link download")," ","link_file_download"===n&&i]})})]})}),(0,g.jsx)("tbody",{children:this.props.children})]})}}])}(o.Component),Y=function(e){function t(){var e;(0,i.A)(this,t);for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(e=(0,s.A)(this,t,[].concat(r))).trafficName=function(){var t=e.props,n=t.userTrafficItem;switch(t.type){case"user":return n.name?(0,g.jsx)("a",{href:h.Yc+"org/useradmin/info/"+n.email+"/",children:n.name}):(0,g.jsx)("span",{children:"--"});case"org":return(0,g.jsx)("span",{children:n.org_name})}},e}return(0,a.A)(t,e),(0,r.A)(t,[{key:"render",value:function(){var e=this.props.userTrafficItem,t=T.Aq.bytesToSize(e.sync_file_upload),n=T.Aq.bytesToSize(e.sync_file_download),i=T.Aq.bytesToSize(e.web_file_upload),r=T.Aq.bytesToSize(e.web_file_download),s=T.Aq.bytesToSize(e.link_file_upload),a=T.Aq.bytesToSize(e.link_file_download);return(0,g.jsxs)("tr",{children:[(0,g.jsx)("td",{children:this.trafficName()}),(0,g.jsx)("td",{children:t}),(0,g.jsx)("td",{children:n}),(0,g.jsx)("td",{children:i}),(0,g.jsx)("td",{children:r}),(0,g.jsx)("td",{children:s}),(0,g.jsx)("td",{children:a})]})}}])}(o.Component),V=Y,q=n(62376),W=function(e){function t(e){var n;return(0,i.A)(this,t),(n=(0,s.A)(this,t,[e])).getPreviousPage=function(){n.getTrafficList(n.state.month,n.state.currentPage-1)},n.getNextPage=function(){n.getTrafficList(n.state.month,n.state.currentPage+1)},n.handleChange=function(e){var t=e.target.value;n.setState({month:t})},n.handleKeyPress=function(e){var t=n.state.month;if("Enter"===e.key){if(!/^([012]\d{3})(0[1-9]|1[012])$/.test(t)){var i=(0,h.AP)("Invalid month, should be yyyymm.");return void n.setState({errorMessage:i})}n.getTrafficList(t,n.initPage),e.target.blur(),e.preventDefault()}},n.getTrafficList=function(e,t){var i=n.state,r=i.perPage,s=i.sortBy,a=i.sortOrder,o="asc"==a?s:"".concat(s,"_").concat(a);n.setState({isLoading:!0,errorMessage:""}),N.k.orgAdminListUserTraffic(h.Id,e,t,r,o).then((function(i){var r=i.data.user_monthly_traffic_list.slice(0);n.setState({month:e,currentPage:t,userTrafficList:r,hasNextPage:i.data.has_next_page,isLoading:!1})})).catch((function(e){var t=T.Aq.getErrorMsg(e);E.A.danger(t)}))},n.sortItems=function(e){n.setState({sortBy:e,sortOrder:"asc"==n.state.sortOrder?"desc":"asc"},(function(){var e=n.state,t=e.month,i=e.currentPage;n.getTrafficList(t,i)}))},n.resetPerPage=function(e){n.setState({perPage:e},(function(){return n.getTrafficList(n.initMonth,n.initPage)}))},n.state={userTrafficList:[],hasNextPage:!1,perPage:100,currentPage:1,month:v()().format("YYYYMM"),isLoading:!1,errorMessage:"",sortBy:"link_file_download",sortOrder:"desc"},n.initPage=1,n.initMonth=v()().format("YYYYMM"),n}return(0,a.A)(t,e),(0,r.A)(t,[{key:"componentDidMount",value:function(){var e=this,t=new URL(window.location).searchParams,n=this.state,i=n.currentPage,r=n.perPage;this.setState({perPage:parseInt(t.get("per_page")||r),currentPage:parseInt(t.get("page")||i)},(function(){e.getTrafficList(e.initMonth,e.state.currentPage)}))}},{key:"render",value:function(){var e=this.state,t=e.isLoading,n=e.errorMessage,i=e.userTrafficList,r=e.currentPage,s=e.hasNextPage,a=e.perPage,l=e.sortBy,c=e.sortOrder;return(0,g.jsxs)(o.Fragment,{children:[(0,g.jsxs)("div",{className:"d-flex align-items-center mt-4",children:[(0,g.jsx)("span",{className:"statistic-reports-tip",children:(0,h.AP)("Month:")}),(0,g.jsx)(U.A,{className:"statistic-reports-input",defaultValue:v()().format("YYYYMM"),onChange:this.handleChange,onKeyPress:this.handleKeyPress}),n&&(0,g.jsx)("div",{className:"error",children:n})]}),t&&(0,g.jsx)(L.A,{}),!t&&(0,g.jsx)(B,{type:"user",sortItems:this.sortItems,sortBy:l,sortOrder:c,children:i.length>0&&i.map((function(e,t){return(0,g.jsx)(V,{userTrafficItem:e,type:"user"},t)}))}),(0,g.jsx)(q.A,{gotoPreviousPage:this.getPreviousPage,gotoNextPage:this.getNextPage,currentPage:r,hasNextPage:s,curPerPage:a,resetPerPage:this.resetPerPage})]})}}])}(o.Component),H=function(e){function t(e){var n;return(0,i.A)(this,t),(n=(0,s.A)(this,t,[e])).changeTabActive=function(e){n.setState({tabActive:e})},n.getActiviesFiles=function(e,t,i){N.k.orgAdminStatisticSystemTraffic(h.Id,e,t,i).then((function(e){var t=[],i=[],r=[],s=[],a=[],o=[],l=[],c=[],u=[],d=e.data;if(Array.isArray(d)){d.forEach((function(e){t.push(v()(e.datetime).format("YYYY-MM-DD")),s.push(e["link-file-upload"]),a.push(e["link-file-download"]),o.push(e["sync-file-upload"]),l.push(e["sync-file-download"]),c.push(e["web-file-upload"]),u.push(e["web-file-download"]),i.push(e["link-file-upload"]+e["sync-file-upload"]+e["web-file-upload"]),r.push(e["link-file-download"]+e["sync-file-download"]+e["web-file-download"])}));var g=[{label:(0,h.AP)("Upload"),data:s,borderColor:"#fd913a",backgroundColor:"#fd913a"},{label:(0,h.AP)("Download"),data:a,borderColor:"#57cd6b",backgroundColor:"#57cd6b"}],p=[{label:(0,h.AP)("Upload"),data:o,borderColor:"#fd913a",backgroundColor:"#fd913a"},{label:(0,h.AP)("Download"),data:l,borderColor:"#57cd6b",backgroundColor:"#57cd6b"}],f=[{label:(0,h.AP)("Upload"),data:c,borderColor:"#fd913a",backgroundColor:"#fd913a"},{label:(0,h.AP)("Download"),data:u,borderColor:"#57cd6b",backgroundColor:"#57cd6b"}],m=[{label:(0,h.AP)("Upload"),data:i,borderColor:"#fd913a",backgroundColor:"#fd913a"},{label:(0,h.AP)("Download"),data:r,borderColor:"#57cd6b",backgroundColor:"#57cd6b"}];n.setState({linkData:g,syncData:p,webData:f,filesData:m,labels:t,isLoading:!1})}})).catch((function(e){var t=T.Aq.getErrorMsg(e);E.A.danger(t)}))},n.renderCommonTool=function(){var e=n.state.tabActive;return"system"===e?(0,g.jsx)(C,{getActiviesFiles:n.getActiviesFiles,children:(0,g.jsxs)("div",{className:"statistic-traffic-tab",children:[(0,g.jsx)("div",{className:"statistic-traffic-tab-item ".concat("system"===e?"active":""),onClick:n.changeTabActive.bind(n,"system"),children:(0,h.AP)("System")}),(0,g.jsx)("div",{className:"statistic-traffic-tab-item ".concat("user"===e?"active":""),onClick:n.changeTabActive.bind(n,"user"),children:(0,h.AP)("Users")})]})}):(0,g.jsxs)("div",{className:"statistic-traffic-tab",children:[(0,g.jsx)("div",{className:"statistic-traffic-tab-item ".concat("system"===e?"active":""),onClick:n.changeTabActive.bind(n,"system"),children:(0,h.AP)("System")}),(0,g.jsx)("div",{className:"statistic-traffic-tab-item ".concat("user"===e?"active":""),onClick:n.changeTabActive.bind(n,"user"),children:(0,h.AP)("Users")})]})},n.state={filesData:[],linkData:[],syncData:[],webData:[],labels:[],isLoading:!0,tabActive:"system"},n}return(0,a.A)(t,e),(0,r.A)(t,[{key:"render",value:function(){var e=this.state,t=e.labels,n=e.filesData,i=e.linkData,r=e.syncData,s=e.webData,a=e.isLoading,l=e.tabActive;return(0,g.jsxs)(o.Fragment,{children:[(0,g.jsx)(y,{}),(0,g.jsxs)("div",{className:"cur-view-container",children:[(0,g.jsx)(b,{currentItem:"trafficStatistic"}),(0,g.jsxs)("div",{className:"cur-view-content",children:[this.renderCommonTool(),a&&(0,g.jsx)(L.A,{}),!a&&"system"===l&&(0,g.jsxs)("div",{className:"statistic-traffic-chart-container",children:[(0,g.jsx)("div",{className:"mb-4",children:t.length>0&&(0,g.jsx)(R,{labels:t,filesData:n,chartTitle:(0,h.AP)("Total Traffic"),suggestedMaxNumbers:1e7,isTitleCallback:!0,isTicksCallback:!0,isLegendStatus:!0})}),(0,g.jsx)("div",{className:"mb-4",children:t.length>0&&(0,g.jsx)(R,{labels:t,filesData:s,chartTitle:(0,h.AP)("Web Traffic"),suggestedMaxNumbers:1e7,isTitleCallback:!0,isTicksCallback:!0,isLegendStatus:!0})}),(0,g.jsx)("div",{className:"mb-4",children:t.length>0&&(0,g.jsx)(R,{labels:t,filesData:i,chartTitle:(0,h.AP)("Share Link Traffic"),suggestedMaxNumbers:1e7,isTitleCallback:!0,isTicksCallback:!0,isLegendStatus:!0})}),(0,g.jsx)("div",{className:"mb-4",children:t.length>0&&(0,g.jsx)(R,{labels:t,filesData:r,chartTitle:(0,h.AP)("Sync Traffic"),suggestedMaxNumbers:1e7,isTitleCallback:!0,isTicksCallback:!0,isLegendStatus:!0})})]}),!a&&"user"===l&&(0,g.jsx)(W,{})]})]})]})}}])}(o.Component),G=function(e){function t(e){var n;return(0,i.A)(this,t),(n=(0,s.A)(this,t,[e])).getActiviesFiles=function(e,t,i){var r=n.state.filesData;N.k.orgAdminStatisticActiveUsers(h.Id,e,t,i).then((function(e){var t=[],i=[],s=e.data;if(Array.isArray(s)){s.forEach((function(e){t.push(v()(e.datetime).format("YYYY-MM-DD")),i.push(e.count)}));var a={label:(0,h.AP)("Active Users"),data:i,borderColor:"#fd913a",backgroundColor:"#fd913a"};r=[a]}n.setState({filesData:r,labels:t,isLoading:!1})})).catch((function(e){var t=T.Aq.getErrorMsg(e);E.A.danger(t)}))},n.state={filesData:[],labels:[],isLoading:!0},n}return(0,a.A)(t,e),(0,r.A)(t,[{key:"render",value:function(){var e=this.state,t=e.labels,n=e.filesData,i=e.isLoading;return(0,g.jsxs)(o.Fragment,{children:[(0,g.jsx)(y,{}),(0,g.jsxs)("div",{className:"cur-view-container",children:[(0,g.jsx)(b,{currentItem:"usersStatistic"}),(0,g.jsxs)("div",{className:"cur-view-content",children:[(0,g.jsx)(C,{getActiviesFiles:this.getActiviesFiles}),i&&(0,g.jsx)(L.A,{}),!i&&t.length>0&&(0,g.jsx)(R,{labels:t,filesData:n,suggestedMaxNumbers:10,isLegendStatus:!1,chartTitle:(0,h.AP)("Active Users")})]})]})]})}}])}(o.Component),Q=function(e){function t(e){var n;return(0,i.A)(this,t),(n=(0,s.A)(this,t,[e])).handleChange=function(e){var t=e.target.value;n.setState({month:t})},n.onGenerateReports=function(e){var t=h.Yc+"api/v2.1/org/"+h.Id+"/admin/statistics/",i=n.state.month;if(i){if("month"===e){if(!/^([012]\d{3})(0[1-9]|1[012])$/.test(i)){var r=(0,h.AP)("Invalid month, should be yyyymm.");return void n.setState({errorMessage:r})}}switch(e){case"month":t+="user-traffic/excel/?month="+i;break;case"storage":t+="user-storage/excel/?"}n.setState({errorMessage:""}),window.location.href=t}else{var s=(0,h.AP)("It is required.");n.setState({errorMessage:s})}},n.state={month:v()().format("YYYYMM"),errorMessage:""},n}return(0,a.A)(t,e),(0,r.A)(t,[{key:"render",value:function(){var e=this.state.errorMessage;return(0,g.jsxs)(o.Fragment,{children:[(0,g.jsx)(y,{}),(0,g.jsxs)("div",{className:"cur-view-container",children:[(0,g.jsx)(b,{currentItem:"reportsStatistic"}),(0,g.jsxs)("div",{className:"cur-view-content",children:[(0,g.jsxs)("div",{className:"statistic-reports",children:[(0,g.jsx)("div",{className:"statistic-reports-title",children:(0,h.AP)("Monthly User Traffic")}),(0,g.jsxs)("div",{className:"d-flex align-items-center mt-4",children:[(0,g.jsx)("span",{className:"statistic-reports-tip",children:(0,h.AP)("Month:")}),(0,g.jsx)(U.A,{className:"statistic-reports-input",defaultValue:v()().format("YYYYMM"),onChange:this.handleChange}),(0,g.jsx)(k.A,{className:"statistic-reports-submit operation-item",onClick:this.onGenerateReports.bind(this,"month"),children:(0,h.AP)("Create Report")})]}),e&&(0,g.jsx)("div",{className:"error",children:e})]}),(0,g.jsxs)("div",{className:"statistic-reports",children:[(0,g.jsx)("div",{className:"statistic-reports-title",children:(0,h.AP)("User Storage")}),(0,g.jsx)(k.A,{className:"mt-4 operation-item",onClick:this.onGenerateReports.bind(this,"storage"),children:(0,h.AP)("Create Report")})]})]})]})]})}}])}(o.Component),X=function(e){function t(e){var n;return(0,i.A)(this,t),(n=(0,s.A)(this,t,[e])).navItems=[{name:"desktop",urlPart:"desktop-devices",text:(0,h.AP)("Desktop")},{name:"mobile",urlPart:"mobile-devices",text:(0,h.AP)("Mobile")},{name:"errors",urlPart:"devices-errors",text:(0,h.AP)("Errors")}],n}return(0,a.A)(t,e),(0,r.A)(t,[{key:"render",value:function(){var e=this.props.currentItem;return(0,g.jsx)("div",{className:"cur-view-path tab-nav-container",children:(0,g.jsx)("ul",{className:"nav",children:this.navItems.map((function(t,n){return(0,g.jsx)("li",{className:"nav-item",children:(0,g.jsx)(c.N_,{to:"".concat(h.Yc,"org/deviceadmin/").concat(t.urlPart,"/"),className:"nav-link".concat(e==t.name?" active":""),children:t.text})},n)}))})})}}])}(o.Component),K=X,$=n(37609),Z=n.n($),J=n(43066),ee=n(96763);v().extend(Z());var te=function(e){function t(e){var n;return(0,i.A)(this,t),(n=(0,s.A)(this,t,[e])).getPreviousPageDevicesList=function(){n.props.getDevicesListByPage(n.props.pageInfo.current_page-1)},n.getNextPageDevicesList=function(){n.props.getDevicesListByPage(n.props.pageInfo.current_page+1)},n}return(0,a.A)(t,e),(0,r.A)(t,[{key:"render",value:function(){var e=this.props,t=e.loading,n=e.errorMsg,i=e.items,r=e.pageInfo,s=e.curPerPage;if(t)return(0,g.jsx)(L.A,{});if(n)return(0,g.jsx)("p",{className:"error text-center",children:n});var a=(0,g.jsx)(J.A,{text:(0,h.AP)("No connected devices")}),l=(0,g.jsxs)(o.Fragment,{children:[(0,g.jsxs)("table",{className:"table-hover",children:[(0,g.jsx)("thead",{children:(0,g.jsxs)("tr",{children:[(0,g.jsx)("th",{width:"19%",children:(0,h.AP)("User")}),(0,g.jsxs)("th",{width:"19%",children:[(0,h.AP)("Platform")," / ",(0,h.AP)("Version")]}),(0,g.jsx)("th",{width:"19%",children:(0,h.AP)("Device Name")}),(0,g.jsx)("th",{width:"19%",children:(0,h.AP)("IP")}),(0,g.jsx)("th",{width:"19%",children:(0,h.AP)("Last Access")}),(0,g.jsx)("th",{width:"5%"})]})}),(0,g.jsx)("tbody",{children:i.map((function(e,t){return(0,g.jsx)(ne,{item:e},t)}))})]}),(0,g.jsx)(q.A,{gotoPreviousPage:this.getPreviousPageDevicesList,gotoNextPage:this.getNextPageDevicesList,currentPage:r.current_page,hasNextPage:r.has_next_page,curPerPage:s,resetPerPage:this.props.resetPerPage})]});return i.length?l:a}}])}(o.Component),ne=function(e){function t(e){var n;return(0,i.A)(this,t),(n=(0,s.A)(this,t,[e])).handleMouseOver=function(){n.setState({isOpIconShown:!0})},n.handleMouseOut=function(){n.setState({isOpIconShown:!1})},n.handleUnlink=function(e){e.preventDefault(),n.props.item.is_desktop_client?n.toggleUnlinkDeviceDialog():n.unlinkDevice(!0)},n.toggleUnlinkDeviceDialog=function(){n.setState({isUnlinkDeviceDialogOpen:!n.state.isUnlinkDeviceDialogOpen})},n.unlinkDevice=function(e){var t=n.props.item,i=t.platform,r=t.device_id,s=t.user;N.k.orgAdminUnlinkDevice(h.Id,i,r,s,e).then((function(e){n.setState({unlinked:!0});var t=(0,h.AP)("Successfully unlinked the device.");E.A.success(t)})).catch((function(e){var t=T.Aq.getErrorMsg(e);E.A.danger(t)}))},n.state={unlinked:!1,isOpIconShown:!1,isUnlinkDeviceDialogOpen:!1},n}return(0,a.A)(t,e),(0,r.A)(t,[{key:"render",value:function(){var e=this.props.item,t=this.state,n=t.unlinked,i=t.isUnlinkDeviceDialogOpen,r=t.isOpIconShown;return n?null:(0,g.jsxs)(o.Fragment,{children:[(0,g.jsxs)("tr",{onMouseEnter:this.handleMouseOver,onMouseLeave:this.handleMouseOut,children:[(0,g.jsx)("td",{children:e.user_name}),(0,g.jsxs)("td",{children:[e.platform," / ",e.client_version]}),(0,g.jsx)("td",{children:e.device_name}),(0,g.jsx)("td",{children:e.last_login_ip}),(0,g.jsx)("td",{children:(0,g.jsx)("span",{title:v()(e.last_accessed).format("dddd, MMMM D, YYYY h:mm:ss A"),children:v()(e.last_accessed).fromNow()})}),(0,g.jsx)("td",{children:(0,g.jsx)("a",{href:"#",className:"sf3-font-delete1 sf3-font action-icon ".concat(r?"":"invisible"),title:(0,h.AP)("Unlink"),onClick:this.handleUnlink})})]}),i&&(0,g.jsx)(ee.A,{unlinkDevice:this.unlinkDevice,toggleDialog:this.toggleUnlinkDeviceDialog})]})}}])}(o.Component),ie=function(e){function t(e){var n;return(0,i.A)(this,t),(n=(0,s.A)(this,t,[e])).getDevicesListByPage=function(e){var t=n.props.devicesPlatform,i=n.state.perPage;N.k.orgAdminListDevices(h.Id,t,e,i).then((function(e){n.setState({devicesData:e.data.devices,pageInfo:e.data.page_info,loading:!1})})).catch((function(e){n.setState({loading:!1,errorMsg:T.Aq.getErrorMsg(e,!0)})}))},n.resetPerPage=function(e){n.setState({perPage:e},(function(){n.getDevicesListByPage(1)}))},n.state={loading:!0,errorMsg:"",devicesData:[],pageInfo:{},perPage:100},n}return(0,a.A)(t,e),(0,r.A)(t,[{key:"componentDidMount",value:function(){var e=this,t=new URL(window.location).searchParams,n=this.state,i=n.currentPage,r=void 0===i?1:i,s=n.perPage;this.setState({perPage:parseInt(t.get("per_page")||s),currentPage:parseInt(t.get("page")||r)},(function(){e.getDevicesListByPage(e.state.currentPage)}))}},{key:"render",value:function(){return(0,g.jsx)("div",{className:"cur-view-content",children:(0,g.jsx)(te,{loading:this.state.loading,errorMsg:this.state.errorMsg,items:this.state.devicesData,getDevicesListByPage:this.getDevicesListByPage,curPerPage:this.state.perPage,resetPerPage:this.resetPerPage,pageInfo:this.state.pageInfo})})}}])}(o.Component),re=function(e){function t(e){return(0,i.A)(this,t),(0,s.A)(this,t,[e])}return(0,a.A)(t,e),(0,r.A)(t,[{key:"render",value:function(){return(0,g.jsxs)(o.Fragment,{children:[(0,g.jsx)(y,{}),(0,g.jsx)("div",{className:"main-panel-center flex-row",children:(0,g.jsxs)("div",{className:"cur-view-container",children:[(0,g.jsx)(K,{currentItem:"desktop"}),(0,g.jsx)(ie,{devicesPlatform:"desktop"})]})})]})}}])}(o.Component),se=function(e){function t(e){return(0,i.A)(this,t),(0,s.A)(this,t,[e])}return(0,a.A)(t,e),(0,r.A)(t,[{key:"render",value:function(){return(0,g.jsxs)(o.Fragment,{children:[(0,g.jsx)(y,{}),(0,g.jsx)("div",{className:"main-panel-center flex-row",children:(0,g.jsxs)("div",{className:"cur-view-container",children:[(0,g.jsx)(K,{currentItem:"mobile"}),(0,g.jsx)(ie,{devicesPlatform:"mobile"})]})})]})}}])}(o.Component),ae=function(e){function t(){return(0,i.A)(this,t),(0,s.A)(this,t,arguments)}return(0,a.A)(t,e),(0,r.A)(t,[{key:"render",value:function(){return(0,g.jsx)(c.N_,{to:"".concat(h.Yc,"org/useradmin/info/").concat(encodeURIComponent(this.props.email),"/"),children:this.props.name})}}])}(o.Component),oe=ae;v().extend(Z());var le=function(e){function t(e){var n;return(0,i.A)(this,t),(n=(0,s.A)(this,t,[e])).getPreviousPageDeviceErrorsList=function(){n.props.getDeviceErrorsListByPage(n.props.pageInfo.current_page-1)},n.getNextPageDeviceErrorsList=function(){n.props.getDeviceErrorsListByPage(n.props.pageInfo.current_page+1)},n}return(0,a.A)(t,e),(0,r.A)(t,[{key:"render",value:function(){var e=this.props,t=e.loading,n=e.errorMsg,i=e.items,r=e.pageInfo,s=e.curPerPage;if(t)return(0,g.jsx)(L.A,{});if(n)return(0,g.jsx)("p",{className:"error text-center",children:n});var a=(0,g.jsx)(J.A,{text:(0,h.AP)("No sync errors")}),l=(0,g.jsxs)(o.Fragment,{children:[(0,g.jsxs)("table",{className:"table-hover",children:[(0,g.jsx)("thead",{children:(0,g.jsxs)("tr",{children:[(0,g.jsx)("th",{width:"16%",children:(0,h.AP)("User")}),(0,g.jsxs)("th",{width:"20%",children:[(0,h.AP)("Device")," / ",(0,h.AP)("Version")]}),(0,g.jsx)("th",{width:"16%",children:(0,h.AP)("IP")}),(0,g.jsx)("th",{width:"16%",children:(0,h.AP)("Library")}),(0,g.jsx)("th",{width:"16%",children:(0,h.AP)("Error")}),(0,g.jsx)("th",{width:"16%",children:(0,h.AP)("Time")})]})}),(0,g.jsx)("tbody",{children:i.map((function(e,t){return(0,g.jsx)(ce,{item:e},t)}))})]}),(0,g.jsx)(q.A,{gotoPreviousPage:this.getPreviousPageDeviceErrorsList,gotoNextPage:this.getNextPageDeviceErrorsList,currentPage:r.current_page,hasNextPage:r.has_next_page,curPerPage:s,resetPerPage:this.props.resetPerPage})]});return i.length?l:a}}])}(o.Component),ce=function(e){function t(e){var n;return(0,i.A)(this,t),(n=(0,s.A)(this,t,[e])).handleMouseOver=function(){n.setState({isOpIconShown:!0})},n.handleMouseOut=function(){n.setState({isOpIconShown:!1})},n.state={isOpIconShown:!1},n}return(0,a.A)(t,e),(0,r.A)(t,[{key:"render",value:function(){var e=this.props.item;return(0,g.jsxs)("tr",{onMouseEnter:this.handleMouseOver,onMouseLeave:this.handleMouseOut,children:[(0,g.jsx)("td",{children:(0,g.jsx)(oe,{email:e.email,name:e.name})}),(0,g.jsxs)("td",{children:[e.device_name," / ",e.client_version]}),(0,g.jsx)("td",{children:e.device_ip}),(0,g.jsx)("td",{children:(0,g.jsx)(c.N_,{to:"".concat(h.Yc,"sysadmin/#libs/").concat(e.repo_id),children:e.repo_name})}),(0,g.jsx)("td",{children:e.error_msg}),(0,g.jsx)("td",{children:(0,g.jsx)("span",{className:"item-meta-info",title:v()(e.last_accessed).format("dddd, MMMM D, YYYY h:mm:ss A"),children:v()(e.error_time).fromNow()})})]})}}])}(o.Component),he=function(e){function t(e){var n;return(0,i.A)(this,t),(n=(0,s.A)(this,t,[e])).getDeviceErrorsListByPage=function(e){var t=n.state.perPage;N.k.orgAdminListDevicesErrors(h.Id,e,t).then((function(e){n.setState({loading:!1,devicesErrors:e.data.device_errors,pageInfo:e.data.page_info,isCleanBtnShown:e.data.device_errors.length>0})})).catch((function(e){n.setState({loading:!1,errorMsg:T.Aq.getErrorMsg(e,!0)})}))},n.clean=function(){N.k.orgAdminClearDeviceErrors(h.Id).then((function(e){n.setState({devicesErrors:[],isCleanBtnShown:!1});var t=(0,h.AP)("Successfully cleaned all errors.");E.A.success(t)})).catch((function(e){var t=T.Aq.getErrorMsg(e);E.A.danger(t)}))},n.resetPerPage=function(e){n.setState({perPage:e},(function(){n.getDeviceErrorsListByPage(1)}))},n.state={loading:!0,errorMsg:"",devicesErrors:[],isCleanBtnShown:!1,pageInfo:{},perPage:100},n}return(0,a.A)(t,e),(0,r.A)(t,[{key:"componentDidMount",value:function(){var e=this,t=new URL(window.location).searchParams,n=this.state,i=n.currentPage,r=void 0===i?1:i,s=n.perPage;this.setState({perPage:parseInt(t.get("per_page")||s),currentPage:parseInt(t.get("page")||r)},(function(){e.getDeviceErrorsListByPage(e.state.currentPage)}))}},{key:"render",value:function(){return(0,g.jsxs)(o.Fragment,{children:[this.state.isCleanBtnShown?(0,g.jsx)(y,{children:(0,g.jsx)(k.A,{className:"operation-item",onClick:this.clean,children:(0,h.AP)("Clean")})}):(0,g.jsx)(y,{}),(0,g.jsx)("div",{className:"main-panel-center flex-row",children:(0,g.jsxs)("div",{className:"cur-view-container",children:[(0,g.jsx)(K,{currentItem:"errors"}),(0,g.jsx)("div",{className:"cur-view-content",children:(0,g.jsx)(le,{loading:this.state.loading,errorMsg:this.state.errorMsg,items:this.state.devicesErrors,getDeviceErrorsListByPage:this.getDeviceErrorsListByPage,curPerPage:this.state.perPage,resetPerPage:this.resetPerPage,pageInfo:this.state.pageInfo})})]})})]})}}])}(o.Component),ue=n(89379),de=function(e){function t(e){return(0,i.A)(this,t),(0,s.A)(this,t,[e])}return(0,a.A)(t,e),(0,r.A)(t,[{key:"render",value:function(){var e=this.props,t=e.headingText,n=e.children;return(0,g.jsxs)("div",{className:"mb-4",children:[(0,g.jsx)("h4",{className:"border-bottom font-weight-normal mb-2 pb-1",children:t}),n]})}}])}(o.Component),ge=n(70349),pe=n(23931),fe=n(55627),me=function(e){function t(e){return(0,i.A)(this,t),(0,s.A)(this,t,[e])}return(0,a.A)(t,e),(0,r.A)(t,[{key:"render",value:function(){var e=this.props,t=e.helpTip,n=e.displayName,i=e.mainContent,r=e.extraContent;return(0,g.jsx)(o.Fragment,{children:(0,g.jsxs)(ge.A,{className:"my-4",children:[(0,g.jsx)(pe.A,{md:"3",children:(0,g.jsx)(fe.A,{className:"web-setting-label",children:n})}),(0,g.jsxs)(pe.A,{md:"5",children:[i,t&&(0,g.jsx)("p",{className:"small text-secondary mt-1",children:t})]}),(0,g.jsx)(pe.A,{md:"4",children:r})]})})}}])}(o.Component),ve=function(e){function t(e){var n;return(0,i.A)(this,t),(n=(0,s.A)(this,t,[e])).toggleBtns=function(){n.setState({isBtnsShown:!n.state.isBtnsShown})},n.hideBtns=function(e){n.state.isBtnsShown&&(n.props.value!=n.state.value&&n.setState({value:n.props.value}),n.toggleBtns())},n.onInputChange=function(e){n.setState({value:e.target.value})},n.onSubmit=function(e){var t=n.state.value.trim();t!=n.props.value&&n.props.saveSetting(n.props.keyText,t),n.toggleBtns()},n.state={isBtnsShown:!1,value:n.props.value},n}return(0,a.A)(t,e),(0,r.A)(t,[{key:"render",value:function(){var e=this.state,t=e.isBtnsShown,n=e.value,i=this.props,r=i.helpTip,s=i.displayName,a=i.inputType,l=i.disabled;return(0,g.jsx)(me,{displayName:s,helpTip:r,mainContent:l?(0,g.jsx)(U.A,{type:a||"text",className:"textarea"==a?"web-setting-textarea":"",value:n,disabled:!0}):(0,g.jsx)(U.A,{type:a||"text",className:"textarea"==a?"web-setting-textarea":"",onChange:this.onInputChange,onFocus:this.toggleBtns,onBlur:this.hideBtns,value:n}),extraContent:t?(0,g.jsxs)(o.Fragment,{children:[(0,g.jsx)(k.A,{color:"primary",className:"sf2-icon-tick web-setting-icon-btn web-setting-icon-btn-submit",onMouseDown:this.onSubmit,title:(0,h.AP)("Submit")}),(0,g.jsx)(k.A,{className:"ml-1 sf2-icon-x2 web-setting-icon-btn web-setting-icon-btn-cancel",title:(0,h.AP)("Cancel")})]}):null})}}])}(o.Component),xe=function(e){function t(e){var n;return(0,i.A)(this,t),(n=(0,s.A)(this,t,[e])).uploadFile=function(){if(n.fileInput.current.files.length){var e=n.fileInput.current.files[0];n.props.postFile(e,n.props.keyText)}},n.openFileInput=function(){n.fileInput.current.click()},n.fileInput=o.createRef(),n}return(0,a.A)(t,e),(0,r.A)(t,[{key:"render",value:function(){var e=this.props,t=e.helpTip,n=e.filePath,i=e.fileWidth,r=e.fileHeight,s=e.displayName;return(0,g.jsx)(me,{displayName:s,helpTip:t,mainContent:(0,g.jsx)("img",{src:n+"?t="+(new Date).getTime(),alt:s,width:i,height:r,className:"mb-1"}),extraContent:(0,g.jsxs)(o.Fragment,{children:[(0,g.jsx)(k.A,{color:"secondary",onClick:this.openFileInput,children:(0,h.AP)("Change")}),(0,g.jsx)("input",{className:"d-none",type:"file",onChange:this.uploadFile,ref:this.fileInput})]})})}}])}(o.Component),Ae=(n(37696),n(30016)),ye=window.org.pageOptions,be=ye.sysEnableUserCleanTrash,je=ye.sysEnableEncryptedLibrary,ke=function(e){function t(e){var n;return(0,i.A)(this,t),(n=(0,s.A)(this,t,[e])).updateName=function(e,t){N.k.orgAdminUpdateName(h.Id,t).then((function(e){n.setState({config_dict:e.data}),E.A.success((0,h.AP)("Name updated"))})).catch((function(e){var t=T.Aq.getErrorMsg(e);E.A.danger(t)}))},n.updateLogo=function(e){N.k.orgAdminUpdateLogo(h.Id,e).then((function(e){n.setState({logoPath:e.data.logo_path}),E.A.success((0,h.AP)("Logo updated"))})).catch((function(e){var t=T.Aq.getErrorMsg(e);E.A.danger(t)}))},n.orgSaveSetting=function(e,t){N.k.orgAdminSetSysSettingInfo(h.Id,e,t).then((function(e){E.A.success((0,h.AP)("System settings updated"))})).catch((function(e){var t=T.Aq.getErrorMsg(e);E.A.danger(t)}))},n.state={loading:!0,errorMsg:"",config_dict:null,logoPath:h.VI,file_ext_white_list:"",force_adfs_login:!1,disable_org_encrypted_library:!1,disable_org_user_clean_trash:!1},n}return(0,a.A)(t,e),(0,r.A)(t,[{key:"componentDidMount",value:function(){var e=this;N.k.orgAdminGetOrgInfo().then((function(t){e.setState({loading:!1,config_dict:t.data,file_ext_white_list:t.data.file_ext_white_list,force_adfs_login:t.data.force_adfs_login,disable_org_encrypted_library:t.data.disable_org_encrypted_library,disable_org_user_clean_trash:t.data.disable_org_user_clean_trash})})).catch((function(t){e.setState({loading:!1,errorMsg:T.Aq.getErrorMsg(t,!0)})}))}},{key:"render",value:function(){var e=this.state,t=e.loading,n=e.errorMsg,i=e.config_dict,r=e.file_ext_white_list,s=e.force_adfs_login,a=e.disable_org_encrypted_library,l=e.disable_org_user_clean_trash,c=this.state.logoPath;return c=-1!=c.indexOf("image-view")?c:h.SG+c,(0,g.jsxs)(o.Fragment,{children:[(0,g.jsx)(y,(0,ue.A)({},this.props)),(0,g.jsx)("div",{className:"main-panel-center flex-row",children:(0,g.jsxs)("div",{className:"cur-view-container",children:[(0,g.jsx)("div",{className:"cur-view-path",children:(0,g.jsx)("h3",{className:"sf-heading",children:(0,h.AP)("Settings")})}),(0,g.jsxs)("div",{className:"cur-view-content container mw-100",children:[t&&(0,g.jsx)(L.A,{}),n&&(0,g.jsx)("p",{className:"error text-center mt-4",children:n}),!t&&!n&&i&&(0,g.jsxs)(o.Fragment,{children:[(0,g.jsx)("p",{className:"small text-secondary my-4"}),(0,g.jsx)(de,{headingText:(0,h.AP)("Info"),children:(0,g.jsxs)(o.Fragment,{children:[(0,g.jsx)(ve,{saveSetting:this.updateName,displayName:(0,h.AP)("Team name"),keyText:"orgName",value:i.org_name,helpTip:"",disabled:!h.$L}),h.XH&&(0,g.jsx)(xe,{postFile:this.updateLogo,displayName:"Logo",keyText:"Logo",filePath:c,fileWidth:256,fileHeight:64,helpTip:"logo.png, 256px * 64px"})]})}),(0,g.jsx)(de,{headingText:(0,h.AP)("File Upload"),children:(0,g.jsx)(o.Fragment,{children:(0,g.jsx)(ve,{saveSetting:this.orgSaveSetting,displayName:(0,h.AP)("File extension white list"),keyText:"file_ext_white_list",value:r,helpTip:(0,h.AP)('File extension white list for file upload via web UI and API. For example, "md;txt;docx". Empty means no limit.')})})}),h.bH&&(0,g.jsx)(de,{headingText:(0,h.AP)("User"),children:(0,g.jsx)(Ae.A,{saveSetting:this.orgSaveSetting,displayName:(0,h.AP)("Disable SAML user email / password login"),keyText:"force_adfs_login",value:s,helpTip:(0,h.AP)("Force user to use SSO login if SAML account is bound")})}),(be||je)&&(0,g.jsx)(de,{headingText:(0,h.AP)("Library"),children:(0,g.jsxs)(o.Fragment,{children:[je&&(0,g.jsx)(Ae.A,{saveSetting:this.orgSaveSetting,displayName:"Encrypted library",keyText:"disable_org_encrypted_library",value:a,helpTip:(0,h.AP)("Not allow user to create encrypted libraries")}),be&&(0,g.jsx)(Ae.A,{saveSetting:this.orgSaveSetting,displayName:"Disable user clean trash",keyText:"disable_org_user_clean_trash",value:l,helpTip:(0,h.AP)("Not allow user to clean library trash")})]})})]})]})]})})]})}}])}(o.Component),_e=function(e){function t(e){var n;return(0,i.A)(this,t),(n=(0,s.A)(this,t,[e])).navItems=[{name:"all",urlPart:"useradmin",text:(0,h.AP)("All")},{name:"admins",urlPart:"useradmin/admins",text:(0,h.AP)("Admin")}],n}return(0,a.A)(t,e),(0,r.A)(t,[{key:"render",value:function(){var e=this.props.currentItem;return(0,g.jsx)("div",{className:"cur-view-path tab-nav-container",children:(0,g.jsx)("ul",{className:"nav",children:this.navItems.map((function(t,n){return(0,g.jsx)("li",{className:"nav-item",children:(0,g.jsx)(c.N_,{to:"".concat(h.Yc,"org/").concat(t.urlPart,"/"),className:"nav-link".concat(e==t.name?" active":""),children:t.text})},n)}))})})}}])}(o.Component),we=_e,De=n(19260),Se=n(6030),Pe=n(33151),Me=n(68879),Ce=n(66149),Ne=n(82487),Ie=function(e){function t(e){var n;return(0,i.A)(this,t),(n=(0,s.A)(this,t,[e])).onMouseEnter=function(){n.props.isItemFreezed||n.setState({showMenu:!0,highlight:!0})},n.onMouseLeave=function(){n.props.isItemFreezed||n.setState({showMenu:!1,highlight:!1})},n.toggleDelete=function(){var e=n.props.user.email,t=n.props.user.name;n.props.toggleDelete(e,t)},n.toggleResetPW=function(){var e=n.props.user.email;E.A.success((0,h.AP)("Resetting user's password, please wait for a moment.")),N.k.orgAdminResetOrgUserPassword(h.Id,e).then((function(e){E.A.success(e.data.reset_tip)})).catch((function(e){var t=T.Aq.getErrorMsg(e);E.A.danger(t)}))},n.toggleRevokeAdmin=function(){var e=n.props.user.email;n.props.toggleRevokeAdmin(e)},n.changeStatus=function(e){var t="active"==e.value;t&&E.A.notify((0,h.AP)("It may take some time, please wait.")),n.props.changeStatus(n.props.user.email,t)},n.setUserInactive=function(){n.props.changeStatus(n.props.user.email,!1)},n.onDropdownToggleClick=function(e){e.preventDefault(),n.toggleOperationMenu(e)},n.toggleOperationMenu=function(e){e.stopPropagation(),n.setState({isItemMenuShow:!n.state.isItemMenuShow},(function(){n.state.isItemMenuShow?n.props.onFreezedItem():(n.setState({highlight:!1,showMenu:!1}),n.props.onUnfreezedItem())}))},n.getQuotaTotal=function(e){switch(e){case-1:return(0,h.AP)("Failed");case-2:return"--";default:return T.Aq.formatSize({bytes:e})}},n.translateStatus=function(e){switch(e){case"active":return(0,h.AP)("Active");case"inactive":return(0,h.AP)("Inactive")}},n.toggleConfirmInactiveDialog=function(){n.setState({isConfirmInactiveDialogOpen:!n.state.isConfirmInactiveDialogOpen})},n.state={highlight:!1,showMenu:!1,isItemMenuShow:!1},n}return(0,a.A)(t,e),(0,r.A)(t,[{key:"render",value:function(){var e=this,t=this.state,n=t.highlight,i=t.isConfirmInactiveDialogOpen,r=this.props,s=r.user,a=r.currentTab,o=h.Yc+"org/useradmin/info/"+encodeURIComponent(s.email)+"/",l=s.email!==h.Xh&&this.state.showMenu,c=s.is_active?"active":"inactive";this.statusOptions=["active","inactive"].map((function(t){return{value:t,text:e.translateStatus(t),isSelected:t==c}}));var u=this.statusOptions.filter((function(e){return e.isSelected}))[0],d='<span class="op-target">'+T.Aq.HTMLescape(s.name)+"</span>",p=(0,h.AP)("Are you sure you want to set {user_placeholder} inactive?").replace("{user_placeholder}",d);return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsxs)("tr",{className:this.state.highlight?"tr-highlight":"",onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave,children:[(0,g.jsx)("td",{children:(0,g.jsx)("a",{href:o,children:s.name})}),(0,g.jsx)("td",{children:(0,g.jsx)(Ce.A,{isDropdownToggleShown:n,currentSelectedOption:u,options:this.statusOptions,selectOption:this.changeStatus,toggleItemFreezed:this.props.toggleItemFreezed,operationBeforeSelect:s.is_active?this.toggleConfirmInactiveDialog:void 0})}),(0,g.jsx)("td",{children:"".concat(T.Aq.formatSize({bytes:s.quota_usage})," / ").concat(this.getQuotaTotal(s.quota_total))}),(0,g.jsxs)("td",{children:[s.ctime," /",(0,g.jsx)("br",{}),s.last_login?s.last_login:"--"]}),(0,g.jsx)("td",{className:"text-center cursor-pointer",children:l&&(0,g.jsxs)(De.A,{isOpen:this.state.isItemMenuShow,toggle:this.toggleOperationMenu,children:[(0,g.jsx)(Se.A,{tag:"a",className:"attr-action-icon sf3-font sf3-font-more-vertical",title:(0,h.AP)("More operations"),"aria-label":(0,h.AP)("More operations"),"data-toggle":"dropdown","aria-expanded":this.state.isItemMenuShow,onClick:this.onDropdownToggleClick}),(0,g.jsxs)(Pe.A,{children:[(0,g.jsx)(Me.A,{onClick:this.toggleDelete,children:(0,h.AP)("Delete")}),(0,g.jsx)(Me.A,{onClick:this.toggleResetPW,children:(0,h.AP)("ResetPwd")}),"admins"==a&&(0,g.jsx)(Me.A,{onClick:this.toggleRevokeAdmin,children:(0,h.AP)("Revoke Admin")})]})]})})]}),i&&(0,g.jsx)(Ne.A,{title:(0,h.AP)("Set user inactive"),message:p,executeOperation:this.setUserInactive,confirmBtnText:(0,h.AP)("Set"),toggleDialog:this.toggleConfirmInactiveDialog})]})}}])}(o.Component),Oe=function(e){function t(e){var n;return(0,i.A)(this,t),(n=(0,s.A)(this,t,[e])).onFreezedItem=function(){n.setState({isItemFreezed:!0})},n.onUnfreezedItem=function(){n.setState({isItemFreezed:!1})},n.toggleItemFreezed=function(e){n.setState({isItemFreezed:e})},n.onChangePageNum=function(e,t){e.preventDefault();var i=n.props.page;1==t?i+=1:i-=1,n.props.initOrgUsersData(i)},n.sortByQuotaUsage=function(e){e.preventDefault(),n.props.sortByQuotaUsage()},n.state={isItemFreezed:!1},n}return(0,a.A)(t,e),(0,r.A)(t,[{key:"render",value:function(){var e,t=this,n=this.props,i=n.sortBy,r=n.sortOrder;e=""==i?(0,g.jsx)("span",{className:"sf3-font sf3-font-sort3"}):(0,g.jsx)("span",{className:"sf3-font ".concat("asc"==r?"sf3-font-down rotate-180 d-inline-block":"sf3-font-down")});var s=this.props,a=s.orgUsers,o=s.page,l=s.pageNext;return(0,g.jsxs)("div",{className:"cur-view-content",children:[(0,g.jsxs)("table",{children:[(0,g.jsx)("thead",{children:(0,g.jsxs)("tr",{children:[(0,g.jsx)("th",{width:"30%",children:(0,h.AP)("Name")}),(0,g.jsx)("th",{width:"15%",children:(0,h.AP)("Status")}),(0,g.jsxs)("th",{width:"20%",children:[(0,g.jsxs)("a",{className:"d-inline-block table-sort-op",href:"#",onClick:this.sortByQuotaUsage,children:[(0,h.AP)("Space Used")," ",e]})," / ",(0,h.AP)("Quota")]}),(0,g.jsxs)("th",{width:"25%",children:[(0,h.AP)("Created At")," / ",(0,h.AP)("Last Login")]}),(0,g.jsx)("th",{width:"10%"})]})}),(0,g.jsx)("tbody",{children:a.map((function(e,n){return(0,g.jsx)(Ie,{user:e,currentTab:"users",isItemFreezed:t.state.isItemFreezed,toggleDelete:t.props.toggleDelete,changeStatus:t.props.changeStatus,onFreezedItem:t.onFreezedItem,onUnfreezedItem:t.onUnfreezedItem,toggleItemFreezed:t.toggleItemFreezed},n)}))})]}),(0,g.jsxs)("div",{className:"paginator",children:[1!=o&&(0,g.jsx)("a",{href:"#",onClick:function(e){return t.onChangePageNum(e,-1)},children:(0,h.AP)("Previous")}),1!=o&&l&&(0,g.jsx)("span",{children:" | "}),l&&(0,g.jsx)("a",{href:"#",onClick:function(e){return t.onChangePageNum(e,1)},children:(0,h.AP)("Next")})]})]})}}])}(o.Component),Te=n(40866),Le=n(58195),Re=n(14113),Ee=n(99308),Fe=n(76115),ze=n(85907),Ue=function(e){function t(e){var n;return(0,i.A)(this,t),(n=(0,s.A)(this,t,[e])).toggle=function(){n.props.toggle()},n.openFileInput=function(){n.fileInputRef.current.click()},n.uploadFile=function(e){if(n.fileInputRef.current.files.length){var t=n.fileInputRef.current.files[0].name;if("xlsx"==t.substr(t.lastIndexOf(".")+1)){var i=n.fileInputRef.current.files[0];n.props.importUsersInBatch(i),n.toggle()}else n.setState({errorMsg:(0,h.AP)("Please choose a .xlsx file.")})}},n.state={errorMsg:""},n.fileInputRef=o.createRef(),n}return(0,a.A)(t,e),(0,r.A)(t,[{key:"render",value:function(){var e=this.state.errorMsg;return(0,g.jsxs)(Le.A,{isOpen:!0,toggle:this.toggle,children:[(0,g.jsx)(Re.A,{toggle:this.toggle,children:(0,h.AP)("Import users from a .xlsx file")}),(0,g.jsxs)(Ee.A,{children:[(0,g.jsx)("p",{children:(0,g.jsx)("a",{className:"text-secondary small",href:"".concat(h.Yc,"useradmin/batchadduser/example/"),children:(0,h.AP)("Download an example file")})}),(0,g.jsx)("button",{className:"btn btn-outline-primary",onClick:this.openFileInput,children:(0,h.AP)("Upload file")}),(0,g.jsx)("input",{className:"d-none",type:"file",onChange:this.uploadFile,ref:this.fileInputRef}),e&&(0,g.jsx)(Fe.A,{color:"danger",children:e})]}),(0,g.jsx)(ze.A,{children:(0,g.jsx)(k.A,{color:"secondary",onClick:this.toggle,children:(0,h.AP)("Cancel")})})]})}}])}(o.Component),Be=n(19247),Ye=n(76152),Ve=n(48918),qe=n(30038),We=function(e){function t(e){var n;return(0,i.A)(this,t),(n=(0,s.A)(this,t,[e])).handleSubmit=function(){if(n.validateInputParams()){var e=n.state,t=e.email,i=e.name,r=e.password;n.setState({isAddingUser:!0}),n.props.handleSubmit(t,i.trim(),r)}},n.togglePasswordVisible=function(){n.setState({isPasswordVisible:!n.state.isPasswordVisible},(function(){n.state.isPasswordVisible?(n.passwdInput.type="password",n.passwdNewInput.type="password"):(n.passwdInput.type="text",n.passwdNewInput.type="text")}))},n.generatePassword=function(){var e=Math.random().toString(36).substr(5);n.setState({password:e,newPassword:e,isPasswordVisible:!1},(function(){n.passwdInput.type="text",n.passwdNewInput.type="text"}))},n.inputEmail=function(e){var t=e.target.value.trim();n.setState({email:t})},n.inputName=function(e){var t=e.target.value;n.setState({name:t})},n.inputPassword=function(e){var t=e.target.value.trim();n.setState({password:t},(function(){n.state.isPasswordVisible&&(n.passwdInput.type="password",n.passwdNewInput.type="password")}))},n.inputPasswordNew=function(e){var t=e.target.value.trim();n.setState({newPassword:t},(function(){n.state.isPasswordVisible&&(n.passwdInput.type="password",n.passwdNewInput.type="password")}))},n.toggle=function(){n.props.toggle()},n.state={isPasswordVisible:!0,email:"",name:"",password:"",newPassword:"",errMessage:"",isAddingUser:!1},n.passwdInput=o.createRef(),n.passwdNewInput=o.createRef(),n}return(0,a.A)(t,e),(0,r.A)(t,[{key:"validateInputParams",value:function(){var e;if(!this.state.email.length)return e=(0,h.AP)("email is required"),this.setState({errMessage:e}),!1;if(!this.state.name.trim().length)return e=(0,h.AP)("Name is required"),this.setState({errMessage:e}),!1;var t=this.state.password,n=this.state.newPassword;return t.length?n.length?t===n||(e=(0,h.AP)("Passwords don't match"),this.setState({errMessage:e}),!1):(e=(0,h.AP)("Please enter the password again"),this.setState({errMessage:e}),!1):(e=(0,h.AP)("Please enter password"),this.setState({errMessage:e}),!1)}},{key:"render",value:function(){var e=this;return(0,g.jsxs)(Le.A,{isOpen:!0,toggle:this.toggle,children:[(0,g.jsx)(Re.A,{toggle:this.toggle,children:(0,h.AP)("Add User")}),(0,g.jsxs)(Ee.A,{children:[(0,g.jsxs)(Be.A,{children:[(0,g.jsxs)(Ye.A,{children:[(0,g.jsx)(fe.A,{for:"userEmail",children:(0,h.AP)("Email")}),(0,g.jsx)(U.A,{id:"userEmail",value:this.state.email||"",onChange:this.inputEmail})]}),(0,g.jsxs)(Ye.A,{children:[(0,g.jsx)(fe.A,{for:"userName",children:(0,h.AP)("Name")}),(0,g.jsx)(U.A,{id:"userName",value:this.state.name||"",onChange:this.inputName})]}),(0,g.jsxs)(Ye.A,{children:[(0,g.jsx)(fe.A,{for:"userPwd",children:(0,h.AP)("Password")}),(0,g.jsxs)(Ve.A,{className:"passwd",children:[(0,g.jsx)(U.A,{id:"userPwd",innerRef:function(t){e.passwdInput=t},value:this.state.password||"",onChange:this.inputPassword}),(0,g.jsxs)(qe.A,{addonType:"append",children:[(0,g.jsx)(k.A,{onClick:this.togglePasswordVisible,children:(0,g.jsx)("i",{className:"link-operation-icon sf3-font sf3-font-eye".concat(this.state.isPasswordVisible?"-slash":"")})}),(0,g.jsx)(k.A,{onClick:this.generatePassword,children:(0,g.jsx)("i",{className:"link-operation-icon sf3-font sf3-font-magic"})})]})]})]}),(0,g.jsxs)(Ye.A,{children:[(0,g.jsx)(fe.A,{for:"userPwdNew",children:(0,h.AP)("Confirm Password")}),(0,g.jsx)(U.A,{id:"userPwdNew",innerRef:function(t){e.passwdNewInput=t},className:"passwd",value:this.state.newPassword||"",onChange:this.inputPasswordNew})]})]}),this.state.errMessage&&(0,g.jsx)(fe.A,{className:"err-message",children:this.state.errMessage})]}),(0,g.jsx)(ze.A,{children:(0,g.jsx)(k.A,{color:"primary",disabled:this.state.isAddingUser,onClick:this.handleSubmit,className:this.state.isAddingUser?"btn-loading":"",children:(0,h.AP)("Submit")})})]})}}])}(o.Component),He=function(e){function t(e){var n;return(0,i.A)(this,t),(n=(0,s.A)(this,t,[e])).handleSubmit=function(){if(n.validateInputParams()){var e=n.state.email;n.setState({isAddingUser:!0}),n.props.handleSubmit(e.trim())}},n.handleKeyPress=function(e){e.preventDefault(),"Enter"==e.key&&n.handleSubmit(e)},n.inputEmail=function(e){var t=e.target.value.trim();n.setState({email:t})},n.toggle=function(){n.props.toggle()},n.state={email:"",errMessage:"",isAddingUser:!1},n}return(0,a.A)(t,e),(0,r.A)(t,[{key:"validateInputParams",value:function(){var e;return!!this.state.email.trim().length||(e=(0,h.AP)("email is required"),this.setState({errMessage:e}),!1)}},{key:"render",value:function(){return(0,g.jsxs)(Le.A,{isOpen:!0,toggle:this.toggle,children:[(0,g.jsx)(Re.A,{toggle:this.toggle,children:(0,h.AP)("Invite users")}),(0,g.jsxs)(Ee.A,{children:[(0,g.jsx)("p",{children:(0,h.AP)("You can enter multiple emails. An invitation link will be sent to each of them.")}),(0,g.jsx)(Be.A,{children:(0,g.jsxs)(Ye.A,{children:[(0,g.jsx)(fe.A,{for:"emails",children:(0,h.AP)("Emails")}),(0,g.jsx)(U.A,{type:"text",id:"emails",placeholder:(0,h.AP)("Emails, separated by ','"),value:this.state.email||"",onChange:this.inputEmail})]})}),this.state.errMessage&&(0,g.jsx)(fe.A,{className:"err-message",children:this.state.errMessage})]}),(0,g.jsx)(ze.A,{children:(0,g.jsx)(k.A,{color:"primary",disabled:this.state.isAddingUser,onClick:this.handleSubmit,className:this.state.isAddingUser?"btn-loading":"",children:(0,h.AP)("Submit")})})]})}}])}(o.Component),Ge=n(25328),Qe=function(e){function t(e){var n;return(0,i.A)(this,t),(n=(0,s.A)(this,t,[e])).copyLink=function(){(0,Ge.A)(n.props.invitationLink),n.props.toggle();var e=(0,h.AP)("Internal link has been copied to clipboard");E.A.success(e,{duration:2})},n}return(0,a.A)(t,e),(0,r.A)(t,[{key:"render",value:function(){return(0,g.jsxs)(Le.A,{isOpen:!0,toggle:this.props.toggle,children:[(0,g.jsx)(Re.A,{toggle:this.props.toggle,children:"\u901a\u8fc7\u5fae\u4fe1\u9080\u8bf7\u7528\u6237"}),(0,g.jsxs)(Ee.A,{children:[(0,g.jsx)("p",{children:"\u8bf7\u5c06\u9080\u8bf7\u94fe\u63a5\u53d1\u9001\u7ed9\u5176\u4ed6\u4eba\uff0c\u8fd9\u6837\u4ed6\u4eec\u5c31\u53ef\u4ee5\u901a\u8fc7\u626b\u63cf\u94fe\u63a5\u91cc\u7684\u4e8c\u7ef4\u7801\u6765\u52a0\u5165\u7ec4\u7ec7\u3002"}),(0,g.jsx)("p",{children:this.props.invitationLink})]}),(0,g.jsx)(ze.A,{children:(0,g.jsx)(k.A,{color:"primary",onClick:this.copyLink,children:(0,h.AP)("Copy")})})]})}}])}(o.Component);v().locale(h.vV),v().extend(Z());var Xe=(0,r.A)((function e(t){(0,i.A)(this,e),this.id=t.id,this.name=t.name,this.email=t.email,this.contact_email=t.owner_contact_email,this.is_active=t.is_active,this.quota_usage=t.quota_usage,this.quota_total=t.quota_total,this.last_login=t.last_login?v()(t.last_login).fromNow():"--",this.ctime=v()(t.ctime).format("YYYY-MM-DD HH:mm:ss")})),Ke=function(e){function t(e){var n;return(0,i.A)(this,t),(n=(0,s.A)(this,t,[e])).handleInputChange=function(e){n.setState({value:e.target.value})},n.handleKeyDown=function(e){"Enter"==e.key&&(e.preventDefault(),n.handleSubmit())},n.handleSubmit=function(){var e=n.state.value.trim();if(!e)return!1;n.props.submit(e)},n.state={value:""},n}return(0,a.A)(t,e),(0,r.A)(t,[{key:"render",value:function(){return(0,g.jsxs)("div",{className:"input-icon",children:[(0,g.jsx)("i",{className:"d-flex input-icon-addon sf3-font sf3-font-search"}),(0,g.jsx)("input",{type:"text",className:"form-control search-input h-6 mr-1",style:{width:"15rem"},placeholder:this.props.placeholder,value:this.state.value,onChange:this.handleInputChange,onKeyDown:this.handleKeyDown,autoComplete:"off"})]})}}])}(o.Component),$e=function(e){function t(e){var n;return(0,i.A)(this,t),(n=(0,s.A)(this,t,[e])).sortByQuotaUsage=function(){n.setState({sortBy:"quota_usage",sortOrder:"asc"==n.state.sortOrder?"desc":"asc",page:1},(function(){var e=new URL(location.href),t=new URLSearchParams(e.search),i=n.state,r=i.page,s=i.sortBy,a=i.sortOrder;t.set("page",r),t.set("order_by",s),t.set("direction",a),e.search=t.toString(),(0,c.oo)(e.toString()),n.initOrgUsersData(r)}))},n.toggleImportOrgUsersDialog=function(){n.setState({isImportOrgUsersDialogOpen:!n.state.isImportOrgUsersDialogOpen})},n.toggleAddOrgUser=function(){n.setState({isShowAddOrgUserDialog:!n.state.isShowAddOrgUserDialog})},n.toggleInviteUserDialog=function(){n.setState({isInviteUserDialogOpen:!n.state.isInviteUserDialogOpen})},n.toggleInviteUserViaWeiXinDialog=function(){n.setState({isInviteUserViaWeiXinDialogOpen:!n.state.isInviteUserViaWeiXinDialogOpen})},n.initOrgUsersData=function(e){var t=n.state,i=t.sortBy,r=t.sortOrder;N.k.orgAdminListOrgUsers(h.Id,"",e,i,r).then((function(e){var t=e.data.user_list.map((function(e){return new Xe(e)}));n.setState({orgUsers:t,pageNext:e.data.page_next,page:e.data.page})})).catch((function(e){var t=T.Aq.getErrorMsg(e);E.A.danger(t)}))},n.importOrgUsers=function(e){E.A.notify((0,h.AP)("It may take some time, please wait.")),N.k.orgAdminImportUsersViaFile(h.Id,e).then((function(e){if(e.data.success.length){var t=e.data.success.map((function(e){return void 0==e.institution&&(e.institution=""),new Xe(e)}));n.setState({orgUsers:t.concat(n.state.orgUsers)})}e.data.failed.forEach((function(e){var t="".concat(e.email,": ").concat(e.error_msg);E.A.danger(t)}))})).catch((function(e){var t=T.Aq.getErrorMsg(e);E.A.danger(t)}))},n.addOrgUser=function(e,t,i){N.k.orgAdminAddOrgUser(h.Id,e,t,i).then((function(t){var i=new Xe(t.data);n.state.orgUsers.unshift(i),n.setState({orgUsers:n.state.orgUsers}),n.toggleAddOrgUser();var r=(0,h.AP)("successfully added user %s.");r=r.replace("%s",e),E.A.success(r)})).catch((function(e){var t=T.Aq.getErrorMsg(e);E.A.danger(t),n.toggleAddOrgUser()}))},n.toggleOrgUsersDelete=function(e,t){N.k.orgAdminDeleteOrgUser(h.Id,e).then((function(i){var r=n.state.orgUsers.filter((function(t){return t.email!=e}));n.setState({orgUsers:r});var s=(0,h.AP)("Deleted user %s");s=s.replace("%s",t),E.A.success(s)})).catch((function(e){var t=T.Aq.getErrorMsg(e);E.A.danger(t)}))},n.inviteOrgUser=function(e){N.k.orgAdminInviteOrgUsers(h.Id,e.split(",")).then((function(e){n.toggleInviteUserDialog();var t=e.data.success.map((function(e){return new Xe(e)}));n.setState({orgUsers:t.concat(n.state.orgUsers)}),e.data.success.forEach((function(e){var t=(0,h.AP)("successfully sent email to %s.");t=t.replace("%s",e.email),E.A.success(t)})),e.data.failed.forEach((function(e){var t="".concat(e.email,": ").concat(e.error_msg);E.A.danger(t)}))})).catch((function(e){n.toggleInviteUserDialog();var t=T.Aq.getErrorMsg(e);E.A.danger(t)}))},n.changeStatus=function(e,t){N.k.orgAdminChangeOrgUserStatus(h.Id,e,t).then((function(t){var i=n.state.orgUsers.map((function(n){return n.email==e&&(n.is_active=t.data.is_active),n}));n.setState({orgUsers:i}),E.A.success((0,h.AP)("Edit succeeded."))})).catch((function(e){var t=T.Aq.getErrorMsg(e);E.A.danger(t)}))},n.searchItems=function(e){(0,c.oo)("".concat(h.Yc,"org/useradmin/search-users/?query=").concat(encodeURIComponent(e)))},n.getSearch=function(){return(0,g.jsx)(Ke,{placeholder:(0,h.AP)("Search users"),submit:n.searchItems})},n.state={orgUsers:[],page:1,pageNext:!1,sortBy:"",sortOrder:"asc",isShowAddOrgUserDialog:!1,isImportOrgUsersDialogOpen:!1,isInviteUserDialogOpen:!1,isInviteUserViaWeiXinDialogOpen:!1},n}return(0,a.A)(t,e),(0,r.A)(t,[{key:"componentDidMount",value:function(){var e=this,t=new URL(window.location).searchParams,n=this.state,i=n.page,r=n.sortBy,s=n.sortOrder;this.setState({page:parseInt(t.get("page")||i),sortBy:t.get("order_by")||r,sortOrder:t.get("direction")||s},(function(){e.initOrgUsersData(e.state.page)}))}},{key:"render",value:function(){var e,t="btn btn-secondary operation-item";return e=(0,g.jsxs)(o.Fragment,{children:[(0,g.jsx)("button",{className:"btn btn-secondary operation-item",onClick:this.toggleImportOrgUsersDialog,children:(0,h.AP)("Import users")}),(0,g.jsxs)("button",{className:t,title:(0,h.AP)("Add user"),onClick:this.toggleAddOrgUser,children:[(0,g.jsx)("i",{className:"sf3-font sf3-font-enlarge text-secondary mr-1"}),(0,h.AP)("Add user")]}),h.LS&&(0,g.jsxs)("button",{className:t,title:(0,h.AP)("Invite users"),onClick:this.toggleInviteUserDialog,children:[(0,g.jsx)("i",{className:"sf3-font sf3-font-enlarge text-secondary mr-1"}),(0,h.AP)("Invite users")]}),h.mz&&(0,g.jsxs)("button",{className:t,title:"\u901a\u8fc7\u5fae\u4fe1\u9080\u8bf7\u7528\u6237",onClick:this.toggleInviteUserViaWeiXinDialog,children:[(0,g.jsx)("i",{className:"sf3-font sf3-font-enlarge text-secondary mr-1"}),"\u901a\u8fc7\u5fae\u4fe1\u9080\u8bf7\u7528\u6237"]}),this.state.isImportOrgUsersDialogOpen&&(0,g.jsx)(Te.A,{children:(0,g.jsx)(Ue,{importUsersInBatch:this.importOrgUsers,toggle:this.toggleImportOrgUsersDialog})}),this.state.isShowAddOrgUserDialog&&(0,g.jsx)(Te.A,{children:(0,g.jsx)(We,{handleSubmit:this.addOrgUser,toggle:this.toggleAddOrgUser})}),this.state.isInviteUserDialogOpen&&(0,g.jsx)(Te.A,{children:(0,g.jsx)(He,{handleSubmit:this.inviteOrgUser,toggle:this.toggleInviteUserDialog})}),this.state.isInviteUserViaWeiXinDialogOpen&&(0,g.jsx)(Te.A,{children:(0,g.jsx)(Qe,{invitationLink:h.mz,toggle:this.toggleInviteUserViaWeiXinDialog})})]}),(0,g.jsxs)(o.Fragment,{children:[(0,g.jsx)(y,{children:e,search:this.getSearch()}),(0,g.jsx)("div",{className:"main-panel-center flex-row",children:(0,g.jsxs)("div",{className:"cur-view-container",children:[(0,g.jsx)(we,{currentItem:"all"}),(0,g.jsx)(Oe,{initOrgUsersData:this.initOrgUsersData,toggleDelete:this.toggleOrgUsersDelete,changeStatus:this.changeStatus,orgUsers:this.state.orgUsers,page:this.state.page,pageNext:this.state.pageNext,sortBy:this.state.sortBy,sortOrder:this.state.sortOrder,sortByQuotaUsage:this.sortByQuotaUsage})]})})]})}}])}(o.Component),Ze=function(e){function t(e){var n;return(0,i.A)(this,t),(n=(0,s.A)(this,t,[e])).onFreezedItem=function(){n.setState({isItemFreezed:!0})},n.onUnfreezedItem=function(){n.setState({isItemFreezed:!1})},n.state={isItemFreezed:!1},n}return(0,a.A)(t,e),(0,r.A)(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.orgUsers,i=t.changeStatus;return(0,g.jsx)("div",{className:"cur-view-content",children:(0,g.jsxs)("table",{children:[(0,g.jsx)("thead",{children:(0,g.jsxs)("tr",{children:[(0,g.jsx)("th",{width:"30%",children:(0,h.AP)("Name")}),(0,g.jsx)("th",{width:"15%",children:(0,h.AP)("Status")}),(0,g.jsxs)("th",{width:"20%",children:[(0,g.jsx)("a",{className:"d-inline-block table-sort-op",href:"#",children:(0,h.AP)("Space Used")})," / ",(0,h.AP)("Quota")]}),(0,g.jsxs)("th",{width:"25%",children:[(0,h.AP)("Created At")," / ",(0,h.AP)("Last Login")]}),(0,g.jsx)("th",{width:"10%"})]})}),(0,g.jsx)("tbody",{children:n.map((function(t,n){return(0,g.jsx)(Ie,{user:t,currentTab:"users",isItemFreezed:e.state.isItemFreezed,toggleDelete:e.props.toggleDelete,onFreezedItem:e.onFreezedItem,onUnfreezedItem:e.onUnfreezedItem,changeStatus:i},n)}))})]})})}}])}(o.Component),Je=function(e){function t(e){var n;return(0,i.A)(this,t),(n=(0,s.A)(this,t,[e])).getItems=function(){N.k.orgAdminSearchUser(h.Id,n.state.query.trim()).then((function(e){var t=e.data.user_list.map((function(e){return new Xe(e)}));n.setState({orgUsers:t,loading:!1})})).catch((function(e){n.setState({loading:!1,errorMsg:T.Aq.getErrorMsg(e,!0)})}))},n.deleteUser=function(e,t){N.k.orgAdminDeleteOrgUser(h.Id,e).then((function(i){var r=n.state.orgUsers.filter((function(t){return t.email!=e}));n.setState({orgUsers:r});var s=(0,h.AP)("Deleted user %s");s=s.replace("%s",t),E.A.success(s)})).catch((function(e){var t=T.Aq.getErrorMsg(e);E.A.danger(t)}))},n.handleInputChange=function(e){n.setState({query:e.target.value},n.checkSubmitBtnActive)},n.checkSubmitBtnActive=function(){var e=n.state.query;n.setState({isSubmitBtnActive:e.trim()})},n.handleKeyDown=function(e){13===e.keyCode&&(n.state.isSubmitBtnActive&&n.getItems())},n.changeStatus=function(e,t){N.k.orgAdminChangeOrgUserStatus(h.Id,e,t).then((function(t){var i=n.state.orgUsers.map((function(n){return n.email==e&&(n.is_active=t.data.is_active),n}));n.setState({orgUsers:i}),E.A.success((0,h.AP)("Edit succeeded."))})).catch((function(e){var t=T.Aq.getErrorMsg(e);E.A.danger(t)}))},n.state={query:"",orgUsers:[],org_id:"",isSubmitBtnActive:!1,loading:!0,errorMsg:""},n}return(0,a.A)(t,e),(0,r.A)(t,[{key:"componentDidMount",value:function(){var e=this,t=new URL(document.location).searchParams;this.setState({query:t.get("query")||""},(function(){e.getItems()}))}},{key:"render",value:function(){var e=this.state,t=e.query,n=e.isSubmitBtnActive;return(0,g.jsx)(o.Fragment,{children:(0,g.jsx)("div",{className:"main-panel-center flex-row",children:(0,g.jsxs)("div",{className:"cur-view-container",children:[(0,g.jsx)("div",{className:"cur-view-path",children:(0,g.jsx)("h3",{className:"sf-heading",children:(0,h.AP)("Users")})}),(0,g.jsxs)("div",{className:"cur-view-content",children:[(0,g.jsxs)("div",{className:"mt-4 mb-6",children:[(0,g.jsx)("h4",{className:"border-bottom font-weight-normal mb-2 pb-1",children:(0,h.AP)("Search Users")}),(0,g.jsxs)(Be.A,{tag:"div",children:[(0,g.jsx)(Ye.A,{row:!0,children:(0,g.jsx)(pe.A,{sm:5,children:(0,g.jsx)(U.A,{type:"text",name:"query",value:t,placeholder:(0,h.AP)("Search users"),onChange:this.handleInputChange,onKeyDown:this.handleKeyDown})})}),(0,g.jsx)(Ye.A,{row:!0,children:(0,g.jsx)(pe.A,{sm:{size:5},children:(0,g.jsx)("button",{className:"btn btn-outline-primary",disabled:!n,onClick:this.getItems,children:(0,h.AP)("Submit")})})})]})]}),(0,g.jsxs)("div",{className:"mt-4 mb-6",children:[(0,g.jsx)("h4",{className:"border-bottom font-weight-normal mb-2 pb-1",children:(0,h.AP)("Result")}),(0,g.jsx)(Ze,{toggleDelete:this.deleteUser,changeStatus:this.changeStatus,orgUsers:this.state.orgUsers})]})]})]})})})}}])}(o.Component),et=function(e){function t(e){var n;return(0,i.A)(this,t),(n=(0,s.A)(this,t,[e])).onFreezedItem=function(){n.setState({isItemFreezed:!0})},n.onUnfreezedItem=function(){n.setState({isItemFreezed:!1})},n.toggleItemFreezed=function(e){n.setState({isItemFreezed:e})},n.state={isItemFreezed:!1},n}return(0,a.A)(t,e),(0,r.A)(t,[{key:"componentDidMount",value:function(){this.props.initOrgAdmin()}},{key:"render",value:function(){var e=this,t=this.props.orgAdminUsers;return(0,g.jsx)("div",{className:"cur-view-content",children:(0,g.jsxs)("table",{children:[(0,g.jsx)("thead",{children:(0,g.jsxs)("tr",{children:[(0,g.jsx)("th",{width:"30%",children:(0,h.AP)("Name")}),(0,g.jsx)("th",{width:"15%",children:(0,h.AP)("Status")}),(0,g.jsxs)("th",{width:"20%",children:[(0,h.AP)("Space Used")," / ",(0,h.AP)("Quota")]}),(0,g.jsxs)("th",{width:"25%",children:[(0,h.AP)("Created At")," / ",(0,h.AP)("Last Login")]}),(0,g.jsx)("th",{width:"10%"})]})}),(0,g.jsx)("tbody",{children:t.map((function(t,n){return(0,g.jsx)(Ie,{user:t,currentTab:"admins",isItemFreezed:e.state.isItemFreezed,toggleDelete:e.props.toggleDelete,toggleRevokeAdmin:e.props.toggleRevokeAdmin,changeStatus:e.props.changeStatus,onFreezedItem:e.onFreezedItem,onUnfreezedItem:e.onUnfreezedItem,toggleItemFreezed:e.toggleItemFreezed},n)}))})]})})}}])}(o.Component),tt=n(94988),nt=function(e){function t(e){var n;return(0,i.A)(this,t),(n=(0,s.A)(this,t,[e])).handleSelectChange=function(e){n.setState({selectedOption:e,errMessage:""}),n.options=[]},n.addOrgAdmin=function(){if(n.state.selectedOption){var e=n.state.selectedOption.email;N.k.orgAdminSetOrgAdmin(h.Id,e,!0).then((function(e){var t=new Xe(e.data);n.props.onAddedOrgAdmin(t)})).catch((function(e){var t=T.Aq.getErrorMsg(e);E.A.danger(t)}))}},n.toggle=function(){n.props.toggle()},n.state={selectedOption:null,errMessage:""},n.options=[],n}return(0,a.A)(t,e),(0,r.A)(t,[{key:"render",value:function(){return(0,g.jsxs)(Le.A,{isOpen:!0,toggle:this.toggle,children:[(0,g.jsx)(Re.A,{toggle:this.toggle,children:(0,h.AP)("Add Admins")}),(0,g.jsxs)(Ee.A,{children:[(0,g.jsx)(tt.A,{ref:"userSelect",isMulti:!1,placeholder:(0,h.AP)("Select a user as admin"),onSelectChange:this.handleSelectChange}),this.state.errMessage&&(0,g.jsx)(Fe.A,{color:"danger",className:"mt-2",children:this.state.errMessage})]}),(0,g.jsxs)(ze.A,{children:[(0,g.jsx)(k.A,{color:"secondary",onClick:this.toggle,children:(0,h.AP)("Close")}),(0,g.jsx)(k.A,{color:"primary",onClick:this.addOrgAdmin,children:(0,h.AP)("Submit")})]})]})}}])}(o.Component),it=function(e){function t(e){var n;return(0,i.A)(this,t),(n=(0,s.A)(this,t,[e])).toggleAddOrgAdmin=function(){n.setState({isShowAddOrgAdminDialog:!n.state.isShowAddOrgAdminDialog})},n.initOrgAdmin=function(){N.k.orgAdminListOrgUsers(h.Id,!0).then((function(e){var t=e.data.user_list.map((function(e){return new Xe(e)}));n.setState({orgAdminUsers:t})})).catch((function(e){var t=T.Aq.getErrorMsg(e);E.A.danger(t)}))},n.toggleOrgAdminDelete=function(e,t){N.k.orgAdminDeleteOrgUser(h.Id,e).then((function(i){n.setState({orgAdminUsers:n.state.orgAdminUsers.filter((function(t){return t.email!=e}))});var r=(0,h.AP)("Deleted user %s");r=r.replace("%s",t),E.A.success(r)})).catch((function(e){var t=T.Aq.getErrorMsg(e);E.A.danger(t)}))},n.toggleRevokeAdmin=function(e){N.k.orgAdminSetOrgAdmin(h.Id,e,!1).then((function(t){n.setState({orgAdminUsers:n.state.orgAdminUsers.filter((function(t){return t.email!=e}))});var i=(0,h.AP)("Successfully revoke the admin permission of %s");i=i.replace("%s",t.data.name),E.A.success(i)})).catch((function(e){var t=T.Aq.getErrorMsg(e);E.A.danger(t)}))},n.onAddedOrgAdmin=function(e){n.state.orgAdminUsers.unshift(e),n.setState({orgAdminUsers:n.state.orgAdminUsers});var t=(0,h.AP)("Successfully set %s as admin.");t=t.replace("%s",e.email),E.A.success(t),n.toggleAddOrgAdmin()},n.changeStatus=function(e,t){N.k.orgAdminChangeOrgUserStatus(h.Id,e,t).then((function(t){var i=n.state.orgAdminUsers.map((function(n){return n.email==e&&(n.is_active=t.data.is_active),n}));n.setState({orgAdminUsers:i}),E.A.success((0,h.AP)("Edit succeeded."))})).catch((function(e){var t=T.Aq.getErrorMsg(e);E.A.danger(t)}))},n.state={orgAdminUsers:[],isShowAddOrgAdminDialog:!1},n}return(0,a.A)(t,e),(0,r.A)(t,[{key:"render",value:function(){var e;return e=(0,g.jsxs)(o.Fragment,{children:[(0,g.jsxs)("button",{className:"btn btn-secondary operation-item",title:(0,h.AP)("Add admin"),onClick:this.toggleAddOrgAdmin,children:[(0,g.jsx)("i",{className:"sf3-font sf3-font-enlarge text-secondary mr-1"}),(0,h.AP)("Add admin")]}),this.state.isShowAddOrgAdminDialog&&(0,g.jsx)(Te.A,{children:(0,g.jsx)(nt,{toggle:this.toggleAddOrgAdmin,onAddedOrgAdmin:this.onAddedOrgAdmin})})]}),(0,g.jsxs)(o.Fragment,{children:[(0,g.jsx)(y,{children:e}),(0,g.jsx)("div",{className:"main-panel-center flex-row",children:(0,g.jsxs)("div",{className:"cur-view-container",children:[(0,g.jsx)(we,{currentItem:"admins"}),(0,g.jsx)(et,{currentTab:"admins",toggleDelete:this.toggleOrgAdminDelete,toggleRevokeAdmin:this.toggleRevokeAdmin,orgAdminUsers:this.state.orgAdminUsers,initOrgAdmin:this.initOrgAdmin,changeStatus:this.changeStatus})]})})]})}}])}(o.Component),rt=it,st=function(e){function t(){return(0,i.A)(this,t),(0,s.A)(this,t,arguments)}return(0,a.A)(t,e),(0,r.A)(t,[{key:"render",value:function(){var e=this.props,t=e.email,n=e.currentItem,i="".concat(h.Yc,"org/useradmin/info/").concat(encodeURIComponent(t),"/");return(0,g.jsx)("div",{className:"cur-view-path org-admin-user-nav",children:(0,g.jsxs)("ul",{className:"nav",children:[(0,g.jsx)("li",{className:"nav-item",children:(0,g.jsx)(c.N_,{to:i,className:"nav-link".concat("profile"==n?" active":""),children:(0,h.AP)("Profile")})}),(0,g.jsx)("li",{className:"nav-item",children:(0,g.jsx)(c.N_,{to:"".concat(i,"repos/"),className:"nav-link".concat("owned-repos"==n?" active":""),children:(0,h.AP)("Owned Libraries")})}),(0,g.jsx)("li",{className:"nav-item",children:(0,g.jsx)(c.N_,{to:"".concat(i,"shared-repos/"),className:"nav-link".concat("shared-repos"==n?" active":""),children:(0,h.AP)("Shared Libraries")})})]})})}}])}(o.Component),at=st,ot=function(e){function t(e){var n;return(0,i.A)(this,t),(n=(0,s.A)(this,t,[e])).handleInputChange=function(e){n.setState({inputValue:e.target.value})},n.formSubmit=function(){var e=n.props,t=e.orgID,i=e.email,r=n.state.inputValue.trim();n.setState({submitBtnDisabled:!0}),N.k.orgAdminSetOrgUserName(t,i,r).then((function(e){var t=r?e.data.name:"";n.props.updateName(t),n.props.toggleDialog()})).catch((function(e){var t=T.Aq.getErrorMsg(e);n.setState({formErrorMsg:t,submitBtnDisabled:!1})}))},n.state={inputValue:n.props.name,submitBtnDisabled:!1},n}return(0,a.A)(t,e),(0,r.A)(t,[{key:"render",value:function(){var e=this.state,t=e.inputValue,n=e.formErrorMsg,i=e.submitBtnDisabled;return(0,g.jsxs)(Le.A,{isOpen:!0,centered:!0,toggle:this.props.toggleDialog,children:[(0,g.jsx)(Re.A,{toggle:this.props.toggleDialog,children:(0,h.AP)("Set user name")}),(0,g.jsx)(Ee.A,{children:(0,g.jsxs)(o.Fragment,{children:[(0,g.jsx)("input",{type:"text",className:"form-control",value:t,onChange:this.handleInputChange}),n&&(0,g.jsx)("p",{className:"error m-0 mt-2",children:n})]})}),(0,g.jsxs)(ze.A,{children:[(0,g.jsx)("button",{className:"btn btn-secondary",onClick:this.props.toggleDialog,children:(0,h.AP)("Cancel")}),(0,g.jsx)("button",{className:"btn btn-primary",disabled:i,onClick:this.formSubmit,children:(0,h.AP)("Submit")})]})]})}}])}(o.Component),lt=ot,ct=function(e){function t(e){var n;return(0,i.A)(this,t),(n=(0,s.A)(this,t,[e])).handleInputChange=function(e){n.setState({inputValue:e.target.value})},n.formSubmit=function(){var e=n.props,t=e.orgID,i=e.email,r=n.state.inputValue.trim();n.setState({submitBtnDisabled:!0}),N.k.orgAdminSetOrgUserContactEmail(t,i,r).then((function(e){var t=r?e.data.contact_email:"";n.props.updateContactEmail(t),n.props.toggleDialog()})).catch((function(e){var t=T.Aq.getErrorMsg(e);n.setState({formErrorMsg:t,submitBtnDisabled:!1})}))},n.state={inputValue:n.props.contactEmail,submitBtnDisabled:!1},n}return(0,a.A)(t,e),(0,r.A)(t,[{key:"render",value:function(){var e=this.state,t=e.inputValue,n=e.formErrorMsg,i=e.submitBtnDisabled;return(0,g.jsxs)(Le.A,{isOpen:!0,centered:!0,toggle:this.props.toggleDialog,children:[(0,g.jsx)(Re.A,{toggle:this.props.toggleDialog,children:(0,h.AP)("Set user contact email")}),(0,g.jsx)(Ee.A,{children:(0,g.jsxs)(o.Fragment,{children:[(0,g.jsx)("input",{type:"text",className:"form-control",value:t,onChange:this.handleInputChange}),n&&(0,g.jsx)("p",{className:"error m-0 mt-2",children:n})]})}),(0,g.jsxs)(ze.A,{children:[(0,g.jsx)("button",{className:"btn btn-secondary",onClick:this.props.toggleDialog,children:(0,h.AP)("Cancel")}),(0,g.jsx)("button",{className:"btn btn-primary",disabled:i,onClick:this.formSubmit,children:(0,h.AP)("Submit")})]})]})}}])}(o.Component),ht=ct,ut=n(99121),dt=function(e){function t(e){var n;(0,i.A)(this,t),(n=(0,s.A)(this,t,[e])).handleInputChange=function(e){n.setState({inputValue:e.target.value})},n.formSubmit=function(){var e=n.props,t=e.orgID,i=e.email,r=n.state.inputValue.trim();if(!r)return n.setState({formErrorMsg:(0,h.AP)("It is required.")}),!1;n.setState({submitBtnDisabled:!0}),N.k.orgAdminSetOrgUserQuota(t,i,r).then((function(e){n.props.updateQuota(e.data.quota_total),n.props.toggleDialog()})).catch((function(e){var t=T.Aq.getErrorMsg(e);n.setState({formErrorMsg:t,submitBtnDisabled:!1})}))};var r=n.props.quotaTotal<0?"":n.props.quotaTotal/1e6;return n.state={inputValue:r,submitBtnDisabled:!1},n}return(0,a.A)(t,e),(0,r.A)(t,[{key:"render",value:function(){var e=this.state,t=e.inputValue,n=e.formErrorMsg,i=e.submitBtnDisabled;return(0,g.jsxs)(Le.A,{isOpen:!0,centered:!0,toggle:this.props.toggleDialog,children:[(0,g.jsx)(Re.A,{toggle:this.props.toggleDialog,children:(0,h.AP)("Set user quota")}),(0,g.jsx)(Ee.A,{children:(0,g.jsxs)(o.Fragment,{children:[(0,g.jsxs)(Ve.A,{children:[(0,g.jsx)("input",{type:"text",className:"form-control",value:t,onChange:this.handleInputChange}),(0,g.jsx)(qe.A,{addonType:"append",children:(0,g.jsx)(ut.A,{children:"MB"})})]}),(0,g.jsx)("p",{className:"small text-secondary mt-2 mb-2",children:(0,h.AP)("Tip: 0 means default limit")}),n&&(0,g.jsx)("p",{className:"error m-0 mt-2",children:n})]})}),(0,g.jsxs)(ze.A,{children:[(0,g.jsx)("button",{className:"btn btn-secondary",onClick:this.props.toggleDialog,children:(0,h.AP)("Cancel")}),(0,g.jsx)("button",{className:"btn btn-primary",disabled:i,onClick:this.formSubmit,children:(0,h.AP)("Submit")})]})]})}}])}(o.Component),gt=dt,pt=window.org.pageOptions,ft=pt.orgID,mt=pt.orgName,vt=function(e){function t(e){var n;return(0,i.A)(this,t),(n=(0,s.A)(this,t,[e])).updateName=function(e){n.setState({name:e})},n.updateContactEmail=function(e){n.setState({contact_email:e})},n.updateQuota=function(e){n.setState({quota_total:e})},n.state={loading:!0,errorMsg:""},n}return(0,a.A)(t,e),(0,r.A)(t,[{key:"componentDidMount",value:function(){var e=this,t=decodeURIComponent(this.props.email);N.k.orgAdminGetOrgUserInfo(ft,t).then((function(t){e.setState(Object.assign({loading:!1},t.data))})).catch((function(t){e.setState({loading:!1,errorMsg:T.Aq.getErrorMsg(t,!0)})}))}},{key:"render",value:function(){return(0,g.jsxs)(o.Fragment,{children:[(0,g.jsx)(y,{}),(0,g.jsx)("div",{className:"main-panel-center flex-row",children:(0,g.jsxs)("div",{className:"cur-view-container",children:[(0,g.jsx)(at,{email:this.props.email,currentItem:"profile"}),(0,g.jsx)("div",{className:"cur-view-content",children:(0,g.jsx)(xt,{data:this.state,updateName:this.updateName,updateContactEmail:this.updateContactEmail,updateQuota:this.updateQuota})})]})})]})}}])}(o.Component),xt=function(e){function t(e){var n;return(0,i.A)(this,t),(n=(0,s.A)(this,t,[e])).toggleSetNameDialog=function(){n.setState({isSetNameDialogOpen:!n.state.isSetNameDialogOpen})},n.toggleSetContactEmailDialog=function(){n.setState({isSetContactEmailDialogOpen:!n.state.isSetContactEmailDialogOpen})},n.toggleSetQuotaDialog=function(){n.setState({isSetQuotaDialogOpen:!n.state.isSetQuotaDialogOpen})},n.state={isSetNameDialogOpen:!1,isSetContactEmailDialogOpen:!1,isSetQuotaDialogOpen:!1},n}return(0,a.A)(t,e),(0,r.A)(t,[{key:"render",value:function(){var e=this.props.data,t=e.loading,n=e.errorMsg,i=e.avatar_url,r=e.email,s=e.contact_email,a=e.name,l=e.quota_total,c=e.quota_usage,u=this.state,d=u.isSetNameDialogOpen,p=u.isSetContactEmailDialogOpen,f=u.isSetQuotaDialogOpen;return t?(0,g.jsx)(L.A,{}):n?(0,g.jsx)("p",{className:"error text-center",children:n}):(0,g.jsxs)(o.Fragment,{children:[(0,g.jsxs)("dl",{children:[(0,g.jsx)("dt",{children:(0,h.AP)("Avatar")}),(0,g.jsx)("dd",{children:(0,g.jsx)("img",{src:i,width:"48",height:"48",className:"rounded",alt:""})}),(0,g.jsx)("dt",{children:"ID"}),(0,g.jsx)("dd",{children:r}),(0,g.jsx)("dt",{children:(0,h.AP)("Name")}),(0,g.jsxs)("dd",{children:[a||"--",(0,g.jsx)("span",{title:(0,h.AP)("Edit"),className:"attr-action-icon sf3-font sf3-font-rename",onClick:this.toggleSetNameDialog})]}),(0,g.jsx)("dt",{children:(0,h.AP)("Contact Email")}),(0,g.jsxs)("dd",{children:[s||"--",(0,g.jsx)("span",{title:(0,h.AP)("Edit"),className:"attr-action-icon sf3-font sf3-font-rename",onClick:this.toggleSetContactEmailDialog})]}),(0,g.jsx)("dt",{children:(0,h.AP)("Organization")}),(0,g.jsx)("dd",{children:mt}),(0,g.jsx)("dt",{children:(0,h.AP)("Space Used / Quota")}),(0,g.jsxs)("dd",{children:["".concat(T.Aq.bytesToSize(c)).concat(l>0?" / "+T.Aq.bytesToSize(l):""),(0,g.jsx)("span",{title:(0,h.AP)("Edit"),className:"attr-action-icon sf3-font sf3-font-rename",onClick:this.toggleSetQuotaDialog})]})]}),d&&(0,g.jsx)(lt,{orgID:ft,email:r,name:a,updateName:this.props.updateName,toggleDialog:this.toggleSetNameDialog}),p&&(0,g.jsx)(ht,{orgID:ft,email:r,contactEmail:s,updateContactEmail:this.props.updateContactEmail,toggleDialog:this.toggleSetContactEmailDialog}),f&&(0,g.jsx)(gt,{orgID:ft,email:r,quotaTotal:l,updateQuota:this.props.updateQuota,toggleDialog:this.toggleSetQuotaDialog})]})}}])}(o.Component),At=vt,yt=n(73606),bt=window.org.pageOptions.orgID,jt=function(e){function t(e){var n;return(0,i.A)(this,t),(n=(0,s.A)(this,t,[e])).state={loading:!0,errorMsg:""},n}return(0,a.A)(t,e),(0,r.A)(t,[{key:"componentDidMount",value:function(){var e=this,t=decodeURIComponent(this.props.email);N.k.orgAdminGetOrgUserOwnedRepos(bt,t).then((function(t){e.setState(Object.assign({loading:!1},t.data))})).catch((function(t){e.setState({loading:!1,errorMsg:T.Aq.getErrorMsg(t,!0)})}))}},{key:"render",value:function(){return(0,g.jsxs)(o.Fragment,{children:[(0,g.jsx)(y,{}),(0,g.jsx)("div",{className:"main-panel-center flex-row",children:(0,g.jsxs)("div",{className:"cur-view-container",children:[(0,g.jsx)(at,{email:this.props.email,currentItem:"owned-repos"}),(0,g.jsx)("div",{className:"cur-view-content",children:(0,g.jsx)(kt,{data:this.state})})]})})]})}}])}(o.Component),kt=function(e){function t(){return(0,i.A)(this,t),(0,s.A)(this,t,arguments)}return(0,a.A)(t,e),(0,r.A)(t,[{key:"render",value:function(){var e=this.props.data,t=e.loading,n=e.errorMsg,i=e.repo_list;return t?(0,g.jsx)(L.A,{}):n?(0,g.jsx)("p",{className:"error text-center",children:n}):(0,g.jsx)(o.Fragment,{children:(0,g.jsxs)("table",{className:"table-hover",children:[(0,g.jsx)("thead",{children:(0,g.jsxs)("tr",{children:[(0,g.jsx)("th",{width:"4%"}),(0,g.jsx)("th",{width:"35%",children:(0,h.AP)("Name")}),(0,g.jsx)("th",{width:"16%",children:(0,h.AP)("Size")}),(0,g.jsx)("th",{width:"25%",children:(0,h.AP)("Last Update")}),(0,g.jsx)("th",{width:"20%"})]})}),(0,g.jsx)("tbody",{children:i.map((function(e,t){return(0,g.jsx)(_t,{data:e},t)}))})]})})}}])}(o.Component),_t=function(e){function t(e){var n;return(0,i.A)(this,t),(n=(0,s.A)(this,t,[e])).handleMouseOver=function(){n.setState({isOpIconShown:!0})},n.handleMouseOut=function(){n.setState({isOpIconShown:!1})},n.handleDeleteIconClick=function(e){e.preventDefault(),n.toggleDeleteRepoDialog()},n.toggleDeleteRepoDialog=function(){n.setState({isDeleteRepoDialogOpen:!n.state.isDeleteRepoDialogOpen})},n.deleteRepo=function(){var e=n.props.data;N.k.orgAdminDeleteOrgRepo(bt,e.repo_id).then((function(t){n.setState({deleted:!0,isRepoDeleted:!0});var i=(0,h.AP)("Successfully deleted {name}.").replace("{name}",e.repo_name);E.A.success(i)})).catch((function(e){var t=T.Aq.getErrorMsg(e);E.A.danger(t),n.setState({isRepoDeleted:!1})}))},n.state={isOpIconShown:!1,deleted:!1,isDeleteRepoDialogOpen:!1,isRepoDeleted:!1},n}return(0,a.A)(t,e),(0,r.A)(t,[{key:"render",value:function(){var e=this.state,t=e.deleted,n=e.isOpIconShown,i=e.isDeleteRepoDialogOpen,r=this.props.data;return t?null:(0,g.jsxs)(o.Fragment,{children:[(0,g.jsxs)("tr",{onMouseOver:this.handleMouseOver,onMouseOut:this.handleMouseOut,children:[(0,g.jsx)("td",{children:(0,g.jsx)("img",{src:T.Aq.getLibIconUrl(r),alt:T.Aq.getLibIconTitle(r),title:T.Aq.getLibIconTitle(r),width:"24"})}),(0,g.jsx)("td",{children:r.repo_name}),(0,g.jsx)("td",{children:T.Aq.bytesToSize(r.size)}),(0,g.jsx)("td",{title:v()(r.last_modified).format("dddd, MMMM D, YYYY h:mm:ss A"),children:v()(r.last_modified).format("YYYY-MM-DD")}),(0,g.jsx)("td",{children:(0,g.jsx)("a",{href:"#",className:"action-icon sf3-font-delete1 sf3-font".concat(n?"":" invisible"),title:(0,h.AP)("Delete"),onClick:this.handleDeleteIconClick})})]}),i&&(0,g.jsx)(yt.A,{repo:r,isRepoDeleted:this.state.isRepoDeleted,onDeleteRepo:this.deleteRepo,toggle:this.toggleDeleteRepoDialog})]})}}])}(o.Component),wt=jt,Dt=window.org.pageOptions.orgID,St=function(e){function t(e){var n;return(0,i.A)(this,t),(n=(0,s.A)(this,t,[e])).state={loading:!0,errorMsg:""},n}return(0,a.A)(t,e),(0,r.A)(t,[{key:"componentDidMount",value:function(){var e=this,t=decodeURIComponent(this.props.email);N.k.orgAdminGetOrgUserBesharedRepos(Dt,t).then((function(t){e.setState(Object.assign({loading:!1},t.data))})).catch((function(t){e.setState({loading:!1,errorMsg:T.Aq.getErrorMsg(t,!0)})}))}},{key:"render",value:function(){return(0,g.jsxs)(o.Fragment,{children:[(0,g.jsx)(y,{}),(0,g.jsx)("div",{className:"main-panel-center flex-row",children:(0,g.jsxs)("div",{className:"cur-view-container",children:[(0,g.jsx)(at,{email:this.props.email,currentItem:"shared-repos"}),(0,g.jsx)("div",{className:"cur-view-content",children:(0,g.jsx)(Pt,{data:this.state})})]})})]})}}])}(o.Component),Pt=function(e){function t(){return(0,i.A)(this,t),(0,s.A)(this,t,arguments)}return(0,a.A)(t,e),(0,r.A)(t,[{key:"render",value:function(){var e=this.props.data,t=e.loading,n=e.errorMsg,i=e.repo_list;return t?(0,g.jsx)(L.A,{}):n?(0,g.jsx)("p",{className:"error text-center",children:n}):(0,g.jsxs)("table",{className:"table-hover",children:[(0,g.jsx)("thead",{children:(0,g.jsxs)("tr",{children:[(0,g.jsx)("th",{width:"4%"}),(0,g.jsx)("th",{width:"30%",children:(0,h.AP)("Name")}),(0,g.jsx)("th",{width:"26%",children:(0,h.AP)("Owner")}),(0,g.jsx)("th",{width:"15%",children:(0,h.AP)("Size")}),(0,g.jsx)("th",{width:"25%",children:(0,h.AP)("Last Update")})]})}),(0,g.jsx)("tbody",{children:i.map((function(e,t){return(0,g.jsx)(Mt,{data:e},t)}))})]})}}])}(o.Component),Mt=function(e){function t(){return(0,i.A)(this,t),(0,s.A)(this,t,arguments)}return(0,a.A)(t,e),(0,r.A)(t,[{key:"render",value:function(){var e=this.props.data;return(0,g.jsxs)("tr",{children:[(0,g.jsx)("td",{children:(0,g.jsx)("img",{src:T.Aq.getLibIconUrl(e),alt:T.Aq.getLibIconTitle(e),title:T.Aq.getLibIconTitle(e),width:"24"})}),(0,g.jsx)("td",{children:e.repo_name}),(0,g.jsx)("td",{children:e.owner_name}),(0,g.jsx)("td",{children:T.Aq.bytesToSize(e.size)}),(0,g.jsx)("td",{title:v()(e.last_modified).format("dddd, MMMM D, YYYY h:mm:ss A"),children:v()(e.last_modified).format("YYYY-MM-DD")})]})}}])}(o.Component),Ct=St;v().locale(h.vV);var Nt=(0,r.A)((function e(t){(0,i.A)(this,e),this.id=t.id,this.groupName=t.group_name,this.creatorName=t.creator_name,this.creatorEmail=t.creator_email,this.creatorContactEmail=t.creator_contact_email,this.ctime=v()(t.ctime).format("YYYY-MM-DD HH:mm:ss")})),It=n(52622),Ot=function(e){function t(e){var n;return(0,i.A)(this,t),(n=(0,s.A)(this,t,[e])).handleInputChange=function(e){n.setState({value:e.target.value})},n.handleKeyDown=function(e){"Enter"==e.key&&(e.preventDefault(),n.handleSubmit())},n.handleSubmit=function(){var e=n.state.value.trim();if(!e)return!1;n.props.submit(e)},n.state={value:""},n}return(0,a.A)(t,e),(0,r.A)(t,[{key:"render",value:function(){return(0,g.jsxs)("div",{className:"input-icon",children:[(0,g.jsx)("i",{className:"d-flex input-icon-addon sf3-font sf3-font-search"}),(0,g.jsx)("input",{type:"text",className:"form-control search-input h-6 mr-1",style:{width:"15rem"},placeholder:this.props.placeholder,value:this.state.value,onChange:this.handleInputChange,onKeyDown:this.handleKeyDown,autoComplete:"off"})]})}}])}(o.Component),Tt=function(e){function t(e){var n;return(0,i.A)(this,t),(n=(0,s.A)(this,t,[e])).initData=function(e){N.k.orgAdminListOrgGroups(h.Id,e).then((function(e){var t=e.data.groups.map((function(e){return new Nt(e)}));n.setState({orgGroups:t,pageNext:e.data.page_next,page:e.data.page})})).catch((function(e){var t=T.Aq.getErrorMsg(e);E.A.danger(t)}))},n.onChangePageNum=function(e,t){e.preventDefault();var i=n.state.page;1==t?i+=1:i-=1,n.initData(i)},n.onFreezedItem=function(){n.setState({isItemFreezed:!0})},n.onUnfreezedItem=function(){n.setState({isItemFreezed:!1})},n.deleteGroupItem=function(e){N.k.orgAdminDeleteOrgGroup(h.Id,e.id).then((function(t){n.setState({orgGroups:n.state.orgGroups.filter((function(t){return t.id!=e.id}))});var i=(0,h.AP)("Successfully deleted {name}");i=i.replace("{name}",e.groupName),E.A.success(i)})).catch((function(e){var t=T.Aq.getErrorMsg(e);E.A.danger(t)}))},n.changeGroupItem=function(e){N.k.orgAdminGroup2Department(h.Id,e.id).then((function(t){var i=n.state.orgGroups.map((function(n){return n.id==e.id&&(n=new Nt(t.data)),n}));n.setState({orgGroups:i}),E.A.success((0,h.AP)("Successfully change the group"))})).catch((function(e){var t=T.Aq.getErrorMsg(e);E.A.danger(t)}))},n.searchItems=function(e){(0,c.oo)("".concat(h.Yc,"org/groupadmin/search-groups/?query=").concat(encodeURIComponent(e)))},n.getSearch=function(){return(0,g.jsx)(Ot,{placeholder:(0,h.AP)("Search groups by name"),submit:n.searchItems})},n.state={page:1,pageNext:!1,orgGroups:[],isItemFreezed:!1},n}return(0,a.A)(t,e),(0,r.A)(t,[{key:"componentDidMount",value:function(){var e=this.state.page;this.initData(e)}},{key:"render",value:function(){var e=this,t=this.state.orgGroups;return(0,g.jsxs)(o.Fragment,{children:[(0,g.jsx)(y,{search:this.getSearch()}),(0,g.jsx)("div",{className:"main-panel-center flex-row",children:(0,g.jsxs)("div",{className:"cur-view-container",children:[(0,g.jsx)("div",{className:"cur-view-path",children:(0,g.jsx)("h3",{className:"sf-heading",children:(0,h.AP)("All Groups")})}),(0,g.jsxs)("div",{className:"cur-view-content",children:[(0,g.jsxs)("table",{children:[(0,g.jsx)("thead",{children:(0,g.jsxs)("tr",{children:[(0,g.jsx)("th",{width:"30%",children:(0,h.AP)("Name")}),(0,g.jsx)("th",{width:"35%",children:(0,h.AP)("Creator")}),(0,g.jsx)("th",{width:"23%",children:(0,h.AP)("Created At")}),(0,g.jsx)("th",{width:"12%",className:"text-center",children:(0,h.AP)("Operations")})]})}),(0,g.jsx)("tbody",{children:t.map((function(t){return(0,g.jsx)(Lt,{group:t,isItemFreezed:e.state.isItemFreezed,onFreezedItem:e.onFreezedItem,onUnfreezedItem:e.onUnfreezedItem,deleteGroupItem:e.deleteGroupItem,changeGroupItem:e.changeGroupItem},t.id)}))})]}),(0,g.jsxs)("div",{className:"paginator",children:[1!=this.state.page&&(0,g.jsx)("a",{href:"#",onClick:function(t){return e.onChangePageNum(t,-1)},children:(0,h.AP)("Previous")}),1!=this.state.page&&this.state.pageNext&&(0,g.jsx)("span",{children:" | "}),this.state.pageNext&&(0,g.jsx)("a",{href:"#",onClick:function(t){return e.onChangePageNum(t,1)},children:(0,h.AP)("Next")})]})]})]})})]})}}])}(o.Component),Lt=function(e){function t(e){var n;return(0,i.A)(this,t),(n=(0,s.A)(this,t,[e])).onMouseEnter=function(){n.props.isItemFreezed||n.setState({showMenu:!0,highlight:!0})},n.onMouseLeave=function(){n.props.isItemFreezed||n.setState({showMenu:!1,highlight:!1})},n.onDropdownToggleClick=function(e){e.preventDefault(),n.toggleOperationMenu(e)},n.toggleOperationMenu=function(e){e.stopPropagation(),n.setState({isItemMenuShow:!n.state.isItemMenuShow},(function(){n.state.isItemMenuShow?n.props.onFreezedItem():(n.setState({highlight:!1,showMenu:!1}),n.props.onUnfreezedItem())}))},n.toggleDelete=function(){n.props.deleteGroupItem(n.props.group)},n.toggleChange=function(){n.props.changeGroupItem(n.props.group)},n.toggleChangeDialog=function(e){e&&e.preventDefault(),n.setState({isChangeDialogOpen:!n.state.isChangeDialogOpen})},n.renderGroupHref=function(e){return"system admin"==e.creatorName?h.Yc+"org/departmentadmin/groups/"+e.id+"/":h.Yc+"org/groupadmin/"+e.id+"/"},n.renderGroupCreator=function(e){var t=h.Yc+"org/useradmin/info/"+e.creatorEmail+"/";return"system admin"==e.creatorName?(0,g.jsx)("td",{children:" -- "}):(0,g.jsx)("td",{children:(0,g.jsx)("a",{href:t,className:"font-weight-normal",children:e.creatorName})})},n.state={highlight:!1,showMenu:!1,isItemMenuShow:!1,isChangeDialogOpen:!1},n}return(0,a.A)(t,e),(0,r.A)(t,[{key:"render",value:function(){var e=this.props.group,t="system admin"!=e.creatorName&&this.state.showMenu;return(0,g.jsxs)("tr",{className:this.state.highlight?"tr-highlight":"",onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave,children:[(0,g.jsx)("td",{children:(0,g.jsx)("a",{href:this.renderGroupHref(e),className:"font-weight-normal",children:e.groupName})}),this.renderGroupCreator(e),(0,g.jsx)("td",{children:e.ctime}),(0,g.jsxs)("td",{className:"text-center cursor-pointer",children:[t&&(0,g.jsxs)(De.A,{isOpen:this.state.isItemMenuShow,toggle:this.toggleOperationMenu,children:[(0,g.jsx)(Se.A,{tag:"a",className:"attr-action-icon sf3-font sf3-font-more-vertical",title:(0,h.AP)("More operations"),"aria-label":(0,h.AP)("More operations"),"data-toggle":"dropdown","aria-expanded":this.state.isItemMenuShow,onClick:this.onDropdownToggleClick}),(0,g.jsxs)(Pe.A,{children:[(0,g.jsx)(Me.A,{onClick:this.toggleDelete,children:(0,h.AP)("Delete")}),(0,g.jsx)(Me.A,{onClick:this.toggleChangeDialog,children:(0,h.AP)("Change to department")})]})]}),this.state.isChangeDialogOpen&&(0,g.jsx)(It.A,{groupName:e.groupName,changeGroup2Department:this.toggleChange,toggleDialog:this.toggleChangeDialog})]})]})}}])}(o.Component),Rt=Tt,Et=function(e){function t(e){var n;return(0,i.A)(this,t),(n=(0,s.A)(this,t,[e])).onMouseEnter=function(){n.props.isItemFreezed||n.setState({showMenu:!0,highlight:!0})},n.onMouseLeave=function(){n.props.isItemFreezed||n.setState({showMenu:!1,highlight:!1})},n.onDropdownToggleClick=function(e){e.preventDefault(),n.toggleOperationMenu(e)},n.toggleOperationMenu=function(e){e.stopPropagation(),n.setState({isItemMenuShow:!n.state.isItemMenuShow},(function(){n.state.isItemMenuShow?n.props.onFreezedItem():(n.setState({highlight:!1,showMenu:!1}),n.props.onUnfreezedItem())}))},n.toggleDelete=function(){n.props.deleteGroupItem(n.props.group)},n.renderGroupHref=function(e){return"system admin"==e.creatorName?h.Yc+"org/departmentadmin/groups/"+e.id+"/":h.Yc+"org/groupadmin/"+e.id+"/"},n.renderGroupCreator=function(e){var t=h.Yc+"org/useradmin/info/"+e.creatorEmail+"/";return"system admin"==e.creatorName?(0,g.jsx)("td",{children:" -- "}):(0,g.jsx)("td",{children:(0,g.jsx)("a",{href:t,className:"font-weight-normal",children:e.creatorName})})},n.state={highlight:!1,showMenu:!1,isItemMenuShow:!1},n}return(0,a.A)(t,e),(0,r.A)(t,[{key:"render",value:function(){var e=this.props.group,t="system admin"!=e.creatorName&&this.state.showMenu;return(0,g.jsxs)("tr",{className:this.state.highlight?"tr-highlight":"",onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave,children:[(0,g.jsx)("td",{children:(0,g.jsx)("a",{href:this.renderGroupHref(e),className:"font-weight-normal",children:e.groupName})}),this.renderGroupCreator(e),(0,g.jsx)("td",{children:e.ctime}),(0,g.jsx)("td",{className:"text-center cursor-pointer",children:t&&(0,g.jsxs)(De.A,{isOpen:this.state.isItemMenuShow,toggle:this.toggleOperationMenu,children:[(0,g.jsx)(Se.A,{tag:"a",className:"attr-action-icon sf3-font sf3-font-more-vertical",title:(0,h.AP)("More operations"),"aria-label":(0,h.AP)("More operations"),"data-toggle":"dropdown","aria-expanded":this.state.isItemMenuShow,onClick:this.onDropdownToggleClick}),(0,g.jsx)(Pe.A,{children:(0,g.jsx)(Me.A,{onClick:this.toggleDelete,children:(0,h.AP)("Delete")})})]})})]})}}])}(o.Component),Ft=function(e){function t(e){var n;return(0,i.A)(this,t),(n=(0,s.A)(this,t,[e])).onFreezedItem=function(){n.setState({isItemFreezed:!0})},n.onUnfreezedItem=function(){n.setState({isItemFreezed:!1})},n.state={isItemFreezed:!1},n}return(0,a.A)(t,e),(0,r.A)(t,[{key:"render",value:function(){var e=this,t=this.props.orgGroups;return(0,g.jsx)("div",{className:"cur-view-content",children:(0,g.jsxs)("table",{children:[(0,g.jsx)("thead",{children:(0,g.jsxs)("tr",{children:[(0,g.jsx)("th",{width:"30%",children:(0,h.AP)("Name")}),(0,g.jsx)("th",{width:"35%",children:(0,h.AP)("Creator")}),(0,g.jsx)("th",{width:"23%",children:(0,h.AP)("Created At")}),(0,g.jsx)("th",{width:"12%",className:"text-center",children:(0,h.AP)("Operations")})]})}),(0,g.jsx)("tbody",{children:t.map((function(t){return(0,g.jsx)(Et,{group:t,isItemFreezed:e.state.isItemFreezed,onFreezedItem:e.onFreezedItem,onUnfreezedItem:e.onUnfreezedItem,deleteGroupItem:e.props.toggleDelete},t.id)}))})]})})}}])}(o.Component),zt=function(e){function t(e){var n;return(0,i.A)(this,t),(n=(0,s.A)(this,t,[e])).getItems=function(){N.k.orgAdminSearchGroup(h.Id,n.state.query.trim()).then((function(e){var t=e.data.group_list.map((function(e){return new Nt(e)}));n.setState({orgGroups:t,loading:!1})})).catch((function(e){n.setState({loading:!1,errorMsg:T.Aq.getErrorMsg(e,!0)})}))},n.deleteGroupItem=function(e){N.k.orgAdminDeleteOrgGroup(h.Id,e.id).then((function(t){n.setState({orgGroups:n.state.orgGroups.filter((function(t){return t.id!=e.id}))});var i=(0,h.AP)("Successfully deleted {name}");i=i.replace("{name}",e.groupName),E.A.success(i)})).catch((function(e){var t=T.Aq.getErrorMsg(e);E.A.danger(t)}))},n.handleInputChange=function(e){n.setState({query:e.target.value},n.checkSubmitBtnActive)},n.checkSubmitBtnActive=function(){var e=n.state.query;n.setState({isSubmitBtnActive:e.trim()})},n.handleKeyDown=function(e){13===e.keyCode&&(n.state.isSubmitBtnActive&&n.getItems())},n.state={query:"",orgGroups:[],isSubmitBtnActive:!1,loading:!0,errorMsg:""},n}return(0,a.A)(t,e),(0,r.A)(t,[{key:"componentDidMount",value:function(){var e=this,t=new URL(document.location).searchParams;this.setState({query:t.get("query")||""},(function(){e.getItems()}))}},{key:"render",value:function(){var e=this.state,t=e.query,n=e.isSubmitBtnActive;return(0,g.jsx)(o.Fragment,{children:(0,g.jsx)("div",{className:"main-panel-center flex-row",children:(0,g.jsxs)("div",{className:"cur-view-container",children:[(0,g.jsx)("div",{className:"cur-view-path",children:(0,g.jsx)("h3",{className:"sf-heading",children:(0,h.AP)("Groups")})}),(0,g.jsxs)("div",{className:"cur-view-content",children:[(0,g.jsxs)("div",{className:"mt-4 mb-6",children:[(0,g.jsx)("h4",{className:"border-bottom font-weight-normal mb-2 pb-1",children:(0,h.AP)("Search Groups")}),(0,g.jsxs)(Be.A,{tag:"div",children:[(0,g.jsx)(Ye.A,{row:!0,children:(0,g.jsx)(pe.A,{sm:5,children:(0,g.jsx)(U.A,{type:"text",name:"query",value:t,placeholder:(0,h.AP)("Search groups"),onChange:this.handleInputChange,onKeyDown:this.handleKeyDown})})}),(0,g.jsx)(Ye.A,{row:!0,children:(0,g.jsx)(pe.A,{sm:{size:5},children:(0,g.jsx)("button",{className:"btn btn-outline-primary",disabled:!n,onClick:this.getItems,children:(0,h.AP)("Submit")})})})]})]}),(0,g.jsxs)("div",{className:"mt-4 mb-6",children:[(0,g.jsx)("h4",{className:"border-bottom font-weight-normal mb-2 pb-1",children:(0,h.AP)("Result")}),(0,g.jsx)(Ft,{toggleDelete:this.deleteGroupItem,orgGroups:this.state.orgGroups})]})]})]})})})}}])}(o.Component),Ut=function(e){function t(){return(0,i.A)(this,t),(0,s.A)(this,t,arguments)}return(0,a.A)(t,e),(0,r.A)(t,[{key:"render",value:function(){var e=this.props,t=e.groupID,n=e.currentItem,i="".concat(h.Yc,"org/groupadmin/").concat(t,"/");return(0,g.jsx)("div",{className:"cur-view-path org-admin-user-nav",children:(0,g.jsxs)("ul",{className:"nav",children:[(0,g.jsx)("li",{className:"nav-item",children:(0,g.jsx)(c.N_,{to:i,className:"nav-link".concat("info"==n?" active":""),children:(0,h.AP)("Group Info")})}),(0,g.jsx)("li",{className:"nav-item",children:(0,g.jsx)(c.N_,{to:"".concat(i,"repos/"),className:"nav-link".concat("repos"==n?" active":""),children:(0,h.AP)("Libraries")})}),(0,g.jsx)("li",{className:"nav-item",children:(0,g.jsx)(c.N_,{to:"".concat(i,"members/"),className:"nav-link".concat("members"==n?" active":""),children:(0,h.AP)("Members")})})]})})}}])}(o.Component),Bt=Ut,Yt=window.org.pageOptions.orgID,Vt=function(e){function t(e){var n;return(0,i.A)(this,t),(n=(0,s.A)(this,t,[e])).state={loading:!0,errorMsg:""},n}return(0,a.A)(t,e),(0,r.A)(t,[{key:"componentDidMount",value:function(){var e=this;N.k.orgAdminGetGroup(Yt,this.props.groupID).then((function(t){e.setState(Object.assign({loading:!1},t.data))})).catch((function(t){e.setState({loading:!1,errorMsg:T.Aq.getErrorMsg(t,!0)})}))}},{key:"render",value:function(){return(0,g.jsxs)(o.Fragment,{children:[(0,g.jsx)(y,{}),(0,g.jsx)("div",{className:"main-panel-center flex-row",children:(0,g.jsxs)("div",{className:"cur-view-container",children:[(0,g.jsx)(Bt,{groupID:this.props.groupID,currentItem:"info"}),(0,g.jsx)("div",{className:"cur-view-content",children:(0,g.jsx)(qt,{data:this.state})})]})})]})}}])}(o.Component),qt=function(e){function t(){return(0,i.A)(this,t),(0,s.A)(this,t,arguments)}return(0,a.A)(t,e),(0,r.A)(t,[{key:"render",value:function(){var e=this.props.data,t=e.loading,n=e.errorMsg,i=e.group_name,r=e.creator_email,s=e.creator_name;return t?(0,g.jsx)(L.A,{}):n?(0,g.jsx)("p",{className:"error text-center mt-2",children:n}):(0,g.jsxs)("dl",{children:[(0,g.jsx)("dt",{children:(0,h.AP)("Name")}),(0,g.jsx)("dd",{children:i}),(0,g.jsx)("dt",{children:(0,h.AP)("Creator")}),(0,g.jsx)("dd",{children:(0,g.jsx)(c.N_,{to:"".concat(h.Yc,"org/useradmin/info/").concat(encodeURIComponent(r),"/"),children:s})})]})}}])}(o.Component),Wt=Vt,Ht=window.org.pageOptions.orgID,Gt=function(e){function t(e){var n;return(0,i.A)(this,t),(n=(0,s.A)(this,t,[e])).state={loading:!0,errorMsg:""},n}return(0,a.A)(t,e),(0,r.A)(t,[{key:"componentDidMount",value:function(){var e=this;N.k.orgAdminListGroupRepos(Ht,this.props.groupID).then((function(t){e.setState(Object.assign({loading:!1},t.data))})).catch((function(t){e.setState({loading:!1,errorMsg:T.Aq.getErrorMsg(t,!0)})}))}},{key:"render",value:function(){return(0,g.jsxs)(o.Fragment,{children:[(0,g.jsx)(y,{}),(0,g.jsx)("div",{className:"main-panel-center flex-row",children:(0,g.jsxs)("div",{className:"cur-view-container",children:[(0,g.jsx)(Bt,{groupID:this.props.groupID,currentItem:"repos"}),(0,g.jsx)("div",{className:"cur-view-content",children:(0,g.jsx)(Qt,{data:this.state})})]})})]})}}])}(o.Component),Qt=function(e){function t(e){return(0,i.A)(this,t),(0,s.A)(this,t,[e])}return(0,a.A)(t,e),(0,r.A)(t,[{key:"render",value:function(){var e=this.props.data,t=e.loading,n=e.errorMsg,i=e.libraries;return t?(0,g.jsx)(L.A,{}):n?(0,g.jsx)("p",{className:"error text-center mt-2",children:n}):(0,g.jsx)(o.Fragment,{children:(0,g.jsxs)("table",{className:"table-hover",children:[(0,g.jsx)("thead",{children:(0,g.jsxs)("tr",{children:[(0,g.jsx)("th",{width:"4%"}),(0,g.jsx)("th",{width:"35%",children:(0,h.AP)("Name")}),(0,g.jsx)("th",{width:"20%",children:(0,h.AP)("Size")}),(0,g.jsx)("th",{width:"26%",children:(0,h.AP)("Shared By")}),(0,g.jsx)("th",{width:"15%"})]})}),(0,g.jsx)("tbody",{children:i.map((function(e,t){return(0,g.jsx)(Xt,{data:e},t)}))})]})})}}])}(o.Component),Xt=function(e){function t(e){var n;return(0,i.A)(this,t),(n=(0,s.A)(this,t,[e])).handleMouseOver=function(){n.setState({isOpIconShown:!0})},n.handleMouseOut=function(){n.setState({isOpIconShown:!1})},n.handleDeleteIconClick=function(e){e.preventDefault(),n.toggleDeleteRepoDialog()},n.toggleDeleteRepoDialog=function(){n.setState({isDeleteRepoDialogOpen:!n.state.isDeleteRepoDialogOpen})},n.deleteRepo=function(){var e=n.props.data;N.k.orgAdminDeleteOrgRepo(Ht,e.repo_id).then((function(t){n.setState({deleted:!0,isRepoDeleted:!0});var i=(0,h.AP)("Successfully deleted {name}.").replace("{name}",e.name);E.A.success(i)})).catch((function(e){var t=T.Aq.getErrorMsg(e);E.A.danger(t),n.setState({isRepoDeleted:!1})}))},n.state={isOpIconShown:!1,deleted:!1,isDeleteRepoDialogOpen:!1,isRepoDeleted:!1},n}return(0,a.A)(t,e),(0,r.A)(t,[{key:"render",value:function(){var e=this.state,t=e.deleted,n=e.isOpIconShown,i=e.isDeleteRepoDialogOpen,r=this.props.data;return t?null:(0,g.jsxs)(o.Fragment,{children:[(0,g.jsxs)("tr",{onMouseOver:this.handleMouseOver,onMouseOut:this.handleMouseOut,children:[(0,g.jsx)("td",{children:(0,g.jsx)("img",{src:T.Aq.getLibIconUrl(r),alt:T.Aq.getLibIconTitle(r),title:T.Aq.getLibIconTitle(r),width:"24"})}),(0,g.jsx)("td",{children:r.name}),(0,g.jsx)("td",{children:T.Aq.bytesToSize(r.size)}),(0,g.jsx)("td",{children:(0,g.jsx)(c.N_,{to:"".concat(h.Yc,"org/useradmin/info/").concat(encodeURIComponent(r.shared_by),"/"),children:r.shared_by_name})}),(0,g.jsx)("td",{children:(0,g.jsx)("a",{href:"#",className:"action-icon sf3-font-delete1 sf3-font".concat(n?"":" invisible"),title:(0,h.AP)("Delete"),onClick:this.handleDeleteIconClick})})]}),i&&(0,g.jsx)(yt.A,{repo:r,isRepoDeleted:this.state.isRepoDeleted,onDeleteRepo:this.deleteRepo,toggle:this.toggleDeleteRepoDialog})]})}}])}(o.Component),Kt=Gt,$t=window.org.pageOptions.orgID,Zt=function(e){function t(e){var n;return(0,i.A)(this,t),(n=(0,s.A)(this,t,[e])).state={loading:!0,errorMsg:""},n}return(0,a.A)(t,e),(0,r.A)(t,[{key:"componentDidMount",value:function(){var e=this;N.k.orgAdminListGroupMembers($t,this.props.groupID).then((function(t){e.setState(Object.assign({loading:!1},t.data))})).catch((function(t){e.setState({loading:!1,errorMsg:T.Aq.getErrorMsg(t,!0)})}))}},{key:"render",value:function(){return(0,g.jsxs)(o.Fragment,{children:[(0,g.jsx)(y,{}),(0,g.jsx)("div",{className:"main-panel-center flex-row",children:(0,g.jsxs)("div",{className:"cur-view-container",children:[(0,g.jsx)(Bt,{groupID:this.props.groupID,currentItem:"members"}),(0,g.jsx)("div",{className:"cur-view-content",children:(0,g.jsx)(Jt,{data:this.state})})]})})]})}}])}(o.Component),Jt=function(e){function t(e){return(0,i.A)(this,t),(0,s.A)(this,t,[e])}return(0,a.A)(t,e),(0,r.A)(t,[{key:"render",value:function(){var e=this.props.data,t=e.loading,n=e.errorMsg,i=e.members;return t?(0,g.jsx)(L.A,{}):n?(0,g.jsx)("p",{className:"error text-center mt-2",children:n}):(0,g.jsx)(o.Fragment,{children:(0,g.jsxs)("table",{className:"table-hover",children:[(0,g.jsx)("thead",{children:(0,g.jsxs)("tr",{children:[(0,g.jsx)("th",{width:"10%"}),(0,g.jsx)("th",{width:"50%",children:(0,h.AP)("Name")}),(0,g.jsx)("th",{width:"40%",children:(0,h.AP)("Role")})]})}),(0,g.jsx)("tbody",{children:i.map((function(e,t){return(0,g.jsx)(en,{data:e},t)}))})]})})}}])}(o.Component),en=function(e){function t(e){return(0,i.A)(this,t),(0,s.A)(this,t,[e])}return(0,a.A)(t,e),(0,r.A)(t,[{key:"getRoleText",value:function(){switch(this.props.data.role){case"Owner":return(0,h.AP)("Owner");case"Admin":return(0,h.AP)("Admin");case"Member":return(0,h.AP)("Member")}}},{key:"render",value:function(){var e=this.props.data;return(0,g.jsx)(o.Fragment,{children:(0,g.jsxs)("tr",{children:[(0,g.jsx)("td",{className:"text-center",children:(0,g.jsx)("img",{src:e.avatar_url,alt:"",className:"avatar",width:"32"})}),(0,g.jsx)("td",{children:(0,g.jsx)(c.N_,{to:"".concat(h.Yc,"org/useradmin/info/").concat(encodeURIComponent(e.email),"/"),children:e.name})}),(0,g.jsx)("td",{children:this.getRoleText()})]})})}}])}(o.Component),tn=Zt,nn=n(85267),rn=(0,r.A)((function e(t){(0,i.A)(this,e),this.repoID=t.repo_id,this.repoName=t.repo_name,this.ownerName=t.owner_name,this.ownerEmail=t.owner_email,this.size=t.size,this.file_count=t.file_count,this.encrypted=t.encrypted,this.isDepartmentRepo=t.is_department_repo,this.groupID=t.group_id})),sn=function(e){function t(e){var n;return(0,i.A)(this,t),(n=(0,s.A)(this,t,[e])).navItems=[{name:"all",urlPart:"repoadmin",text:(0,h.AP)("All")},{name:"trash",urlPart:"repoadmin-trash",text:(0,h.AP)("Trash")}],n}return(0,a.A)(t,e),(0,r.A)(t,[{key:"render",value:function(){var e=this.props.currentItem;return(0,g.jsx)("div",{className:"cur-view-path tab-nav-container",children:(0,g.jsx)("ul",{className:"nav",children:this.navItems.map((function(t,n){return(0,g.jsx)("li",{className:"nav-item",children:(0,g.jsx)(c.N_,{to:"".concat(h.Yc,"org/").concat(t.urlPart,"/"),className:"nav-link".concat(e==t.name?" active":""),children:t.text})},n)}))})})}}])}(o.Component),an=sn,on=function(e){function t(e){var n;return(0,i.A)(this,t),(n=(0,s.A)(this,t,[e])).onFreezedItem=function(){n.setState({isItemFreezed:!0})},n.onUnfreezedItem=function(){n.setState({isItemFreezed:!1})},n.getPreviousPageList=function(){n.props.getListByPage(n.props.pageInfo.current_page-1)},n.getNextPageList=function(){n.props.getListByPage(n.props.pageInfo.current_page+1)},n.sortByFileCount=function(e){e.preventDefault(),n.props.sortItems("file_count")},n.sortBySize=function(e){e.preventDefault(),n.props.sortItems("size")},n.state={isItemFreezed:!1},n}return(0,a.A)(t,e),(0,r.A)(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.loading,i=t.errorMsg,r=t.items,s=t.pageInfo,a=t.curPerPage,l=t.sortBy;if(n)return(0,g.jsx)(L.A,{});if(i)return(0,g.jsx)("p",{className:"error text-center",children:i});var c=(0,g.jsx)(J.A,{text:(0,h.AP)("No libraries")}),u=(0,g.jsx)("span",{className:"sf3-font sf3-font-sort3"}),d=(0,g.jsx)("span",{className:"sf3-font sf3-font-down"}),p=(0,g.jsxs)(o.Fragment,{children:[(0,g.jsxs)("table",{children:[(0,g.jsx)("thead",{children:(0,g.jsxs)("tr",{children:[(0,g.jsx)("th",{width:"5%"}),(0,g.jsx)("th",{width:"25%",children:(0,h.AP)("Name")}),(0,g.jsx)("th",{width:"15%",children:void 0!=l?(0,g.jsxs)(o.Fragment,{children:[(0,g.jsxs)("a",{className:"d-inline-block table-sort-op",href:"#",onClick:this.sortByFileCount,children:[(0,h.AP)("Files")," ","file_count"==l?d:u]})," / ",(0,g.jsxs)("a",{className:"d-inline-block table-sort-op",href:"#",onClick:this.sortBySize,children:[(0,h.AP)("Size")," ","size"==l?d:u]})]}):(0,h.AP)("Files")/(0,h.AP)("Size")}),(0,g.jsx)("th",{width:"32%",children:"ID"}),(0,g.jsx)("th",{width:"18%",children:(0,h.AP)("Owner")}),(0,g.jsx)("th",{width:"5%"})]})}),(0,g.jsx)("tbody",{children:r.map((function(t,n){return(0,g.jsx)(ln,{repo:t,isItemFreezed:e.state.isItemFreezed,onFreezedItem:e.onFreezedItem,onUnfreezedItem:e.onUnfreezedItem,onDeleteRepo:e.props.onDeleteRepo,transferRepoItem:e.props.transferRepoItem},n)}))})]}),s&&(0,g.jsx)(q.A,{gotoPreviousPage:this.getPreviousPageList,gotoNextPage:this.getNextPageList,currentPage:s.current_page,hasNextPage:s.has_next_page,curPerPage:a,resetPerPage:this.props.resetPerPage})]});return r.length?p:c}}])}(o.Component),ln=function(e){function t(e){var n;return(0,i.A)(this,t),(n=(0,s.A)(this,t,[e])).onMouseEnter=function(){n.props.isItemFreezed||n.setState({showMenu:!0,highlight:!0})},n.onMouseLeave=function(){n.props.isItemFreezed||n.setState({showMenu:!1,highlight:!1})},n.onDropdownToggleClick=function(e){e.preventDefault(),n.toggleOperationMenu(e)},n.toggleOperationMenu=function(e){e.stopPropagation(),n.setState({isItemMenuShow:!n.state.isItemMenuShow},(function(){n.state.isItemMenuShow?n.props.onFreezedItem():(n.setState({highlight:!1,showMenu:!1}),n.props.onUnfreezedItem())}))},n.toggleDelete=function(){n.props.onDeleteRepo(n.props.repo)},n.renderRepoOwnerHref=function(e){return e.isDepartmentRepo?h.Yc+"org/groupadmin/"+e.groupID+"/":h.Yc+"org/useradmin/info/"+e.ownerEmail+"/"},n.toggleTransfer=function(){n.setState({isTransferDialogShow:!n.state.isTransferDialogShow})},n.onTransferRepo=function(e,t){var i=n.props.repo;N.k.orgAdminTransferOrgRepo(h.Id,i.repoID,e.email,t).then((function(t){n.props.transferRepoItem(i.repoID,e);var r=(0,h.AP)("Successfully transferred the library.");E.A.success(r)})).catch((function(e){var t=T.Aq.getErrorMsg(e);E.A.danger(t)})),n.toggleTransfer()},n.state={highlight:!1,showMenu:!1,isItemMenuShow:!1,isTransferDialogShow:!1},n}return(0,a.A)(t,e),(0,r.A)(t,[{key:"render",value:function(){var e=this.props.repo,t=this.state.showMenu,n=e.encrypted?(0,h.AP)("Encrypted library"):(0,h.AP)("Read-Write library");return(0,g.jsxs)(o.Fragment,{children:[(0,g.jsxs)("tr",{className:this.state.highlight?"tr-highlight":"",onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave,children:[(0,g.jsx)("td",{children:(0,g.jsx)("img",{src:T.Aq.getLibIconUrl(e),title:n,alt:n,width:"24"})}),(0,g.jsx)("td",{children:e.repoName}),(0,g.jsx)("td",{children:"".concat(e.file_count," / ").concat(T.Aq.bytesToSize(e.size))}),(0,g.jsx)("td",{children:e.repoID}),(0,g.jsx)("td",{children:(0,g.jsx)("a",{href:this.renderRepoOwnerHref(e),children:e.ownerName})}),(0,g.jsx)("td",{className:"text-center cursor-pointer",children:t&&(0,g.jsxs)(De.A,{isOpen:this.state.isItemMenuShow,toggle:this.toggleOperationMenu,children:[(0,g.jsx)(Se.A,{tag:"a",className:"attr-action-icon sf3-font sf3-font-more-vertical",title:(0,h.AP)("More operations"),"aria-label":(0,h.AP)("More operations"),"data-toggle":"dropdown","aria-expanded":this.state.isItemMenuShow,onClick:this.onDropdownToggleClick}),(0,g.jsxs)(Pe.A,{children:[(0,g.jsx)(Me.A,{onClick:this.toggleDelete,children:(0,h.AP)("Delete")}),(0,g.jsx)(Me.A,{onClick:this.toggleTransfer,children:(0,h.AP)("Transfer")})]})]})})]}),this.state.isTransferDialogShow&&(0,g.jsx)(Te.A,{children:(0,g.jsx)(nn.A,{itemName:e.repoName,submit:this.onTransferRepo,toggleDialog:this.toggleTransfer,isOrgAdmin:!0})})]})}}])}(o.Component),cn=function(e){function t(e){var n;return(0,i.A)(this,t),(n=(0,s.A)(this,t,[e])).getReposByPage=function(e){var t=n.state.perPage;N.k.orgAdminListOrgRepos(h.Id,e,t,n.state.sortBy).then((function(e){var t=e.data.repo_list.map((function(e){return new rn(e)})),i={};void 0===e.data.page_info?i={current_page:e.data.page,has_next_page:e.data.page_next}:i=e.data.page_info;n.setState({loading:!1,repos:t,pageInfo:i})})).catch((function(e){n.setState({loading:!1,errorMsg:T.Aq.getErrorMsg(e,!0)})}))},n.sortItems=function(e){n.setState({currentPage:1,sortBy:e},(function(){var e=new URL(location.href),t=new URLSearchParams(e.search),i=n.state,r=i.currentPage,s=i.sortBy;t.set("page",r),t.set("order_by",s),e.search=t.toString(),(0,c.oo)(e.toString()),n.getReposByPage(r)}))},n.resetPerPage=function(e){n.setState({perPage:e},(function(){n.getReposByPage(1)}))},n.deleteRepoItem=function(e){N.k.orgAdminDeleteOrgRepo(h.Id,e.repoID).then((function(t){n.setState({repos:n.state.repos.filter((function(t){return t.repoID!==e.repoID}))});var i=(0,h.AP)("Successfully deleted {name}");i=i.replace("{name}",e.repoName),E.A.success(i)})).catch((function(e){var t=T.Aq.getErrorMsg(e);E.A.danger(t)}))},n.transferRepoItem=function(e,t){n.setState({repos:n.state.repos.map((function(n){return n.repoID==e&&(n.ownerEmail=t.email,n.ownerName=t.value),n}))})},n.state={loading:!0,errorMsg:"",repos:[],pageInfo:{},perPage:100,sortBy:""},n}return(0,a.A)(t,e),(0,r.A)(t,[{key:"componentDidMount",value:function(){var e=this,t=new URL(window.location).searchParams,n=this.state,i=n.currentPage,r=void 0===i?1:i,s=n.perPage,a=n.sortBy;this.setState({sortBy:t.get("order_by")||a,perPage:parseInt(t.get("per_page")||s),currentPage:parseInt(t.get("page")||r)},(function(){e.getReposByPage(e.state.currentPage)}))}},{key:"render",value:function(){return(0,g.jsxs)(o.Fragment,{children:[(0,g.jsx)(y,{}),(0,g.jsx)("div",{className:"main-panel-center flex-row",children:(0,g.jsxs)("div",{className:"cur-view-container",children:[(0,g.jsx)(an,{currentItem:"all"}),(0,g.jsx)("div",{className:"cur-view-content",children:(0,g.jsx)(on,{loading:this.state.loading,errorMsg:this.state.errorMsg,items:this.state.repos,sortBy:this.state.sortBy,sortItems:this.sortItems,pageInfo:this.state.pageInfo,curPerPage:this.state.perPage,getListByPage:this.getReposByPage,resetPerPage:this.resetPerPage,onDeleteRepo:this.deleteRepoItem,transferRepoItem:this.transferRepoItem})})]})})]})}}])}(o.Component),hn=n(61314);v().extend(Z());var un=function(e){function t(e){var n;return(0,i.A)(this,t),(n=(0,s.A)(this,t,[e])).onFreezedItem=function(){n.setState({isItemFreezed:!0})},n.onUnfreezedItem=function(){n.setState({isItemFreezed:!1})},n.getPreviousPageList=function(){n.props.getListByPage(n.props.pageInfo.current_page-1)},n.getNextPageList=function(){n.props.getListByPage(n.props.pageInfo.current_page+1)},n.state={isItemFreezed:!1},n}return(0,a.A)(t,e),(0,r.A)(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.loading,i=t.errorMsg,r=t.items,s=t.pageInfo,a=t.curPerPage;if(n)return(0,g.jsx)(L.A,{});if(i)return(0,g.jsx)("p",{className:"error text-center mt-4",children:i});var l=(0,g.jsx)(J.A,{text:(0,h.AP)("No deleted libraries")}),c=(0,g.jsxs)(o.Fragment,{children:[(0,g.jsxs)("table",{className:"table-hover",children:[(0,g.jsx)("thead",{children:(0,g.jsxs)("tr",{children:[(0,g.jsx)("th",{width:"5%"}),(0,g.jsx)("th",{width:"43%",children:(0,h.AP)("Name")}),(0,g.jsx)("th",{width:"27%",children:(0,h.AP)("Owner")}),(0,g.jsx)("th",{width:"20%",children:(0,h.AP)("Deleted Time")}),(0,g.jsx)("th",{width:"5%"})]})}),(0,g.jsx)("tbody",{children:r.map((function(t,n){return(0,g.jsx)(dn,{repo:t,isItemFreezed:e.state.isItemFreezed,onFreezedItem:e.onFreezedItem,onUnfreezedItem:e.onUnfreezedItem,onDeleteRepo:e.props.onDeleteRepo,onRestoreRepo:e.props.onRestoreRepo},n)}))})]}),s&&(0,g.jsx)(q.A,{gotoPreviousPage:this.getPreviousPageList,gotoNextPage:this.getNextPageList,currentPage:s.current_page,hasNextPage:s.has_next_page,curPerPage:a,resetPerPage:this.props.resetPerPage})]});return r.length?c:l}}])}(o.Component),dn=function(e){function t(e){var n;return(0,i.A)(this,t),(n=(0,s.A)(this,t,[e])).handleMouseOver=function(){n.props.isItemFreezed||n.setState({isOpIconShown:!0,highlight:!0})},n.handleMouseOut=function(){n.props.isItemFreezed||n.setState({isOpIconShown:!1,highlight:!1})},n.onUnfreezedItem=function(){n.setState({highlight:!1,isOpIconShow:!1}),n.props.onUnfreezedItem()},n.onDeleteRepo=function(){var e=n.props.repo;N.k.orgAdminDeleteTrashRepo(h.Id,e.id).then((function(t){n.props.onDeleteRepo(e);var i=(0,h.AP)("Successfully deleted {name}.").replace("{name}",e.name);E.A.success(i)})).catch((function(e){var t=T.Aq.getErrorMsg(e);E.A.danger(t)}))},n.onRestoreRepo=function(){var e=n.props.repo;N.k.orgAdminRestoreTrashRepo(h.Id,e.id).then((function(t){n.props.onRestoreRepo(e);var i=(0,h.AP)("Successfully restored the library.");E.A.success(i)})).catch((function(e){var t=T.Aq.getErrorMsg(e);E.A.danger(t)}))},n.toggleDeleteRepoDialog=function(e){e&&e.preventDefault(),n.setState({isDeleteRepoDialogOpen:!n.state.isDeleteRepoDialogOpen})},n.toggleRestoreRepoDialog=function(e){e&&e.preventDefault(),n.setState({isRestoreRepoDialogOpen:!n.state.isRestoreRepoDialogOpen})},n.translateOperations=function(e){var t="";switch(e){case"Restore":t=(0,h.AP)("Restore");break;case"Delete":t=(0,h.AP)("Delete")}return t},n.onMenuItemClick=function(e){switch(e){case"Restore":n.toggleRestoreRepoDialog();break;case"Delete":n.toggleDeleteRepoDialog()}},n.state={highlight:!1,isOpIconShown:!1,isDeleteRepoDialogOpen:!1,isRestoreRepoDialogOpen:!1},n}return(0,a.A)(t,e),(0,r.A)(t,[{key:"render",value:function(){var e=this.props.repo,t=this.state,n=t.isOpIconShown,i=t.isDeleteRepoDialogOpen,r=t.isRestoreRepoDialogOpen,s=T.Aq.getLibIconUrl(e),a=T.Aq.getLibIconTitle(e),l='<span class="op-target">'+T.Aq.HTMLescape(e.name)+"</span>";return(0,g.jsxs)(o.Fragment,{children:[(0,g.jsxs)("tr",{onMouseEnter:this.handleMouseOver,onMouseLeave:this.handleMouseOut,children:[(0,g.jsx)("td",{children:(0,g.jsx)("img",{src:s,title:a,alt:a,width:"24"})}),(0,g.jsx)("td",{children:e.name}),(0,g.jsx)("td",{children:-1==e.owner.indexOf("@seafile_group")?(0,g.jsx)(oe,{email:e.owner,name:e.owner_name}):e.group_name}),(0,g.jsx)("td",{children:v()(e.delete_time).fromNow()}),(0,g.jsx)("td",{children:n&&(0,g.jsx)(hn.A,{operations:["Restore","Delete"],translateOperations:this.translateOperations,onMenuItemClick:this.onMenuItemClick,onFreezedItem:this.props.onFreezedItem,onUnfreezedItem:this.onUnfreezedItem})})]}),i&&(0,g.jsx)(Te.A,{children:(0,g.jsx)(Ne.A,{title:(0,h.AP)("Delete Library"),message:(0,h.AP)("Are you sure you want to delete {placeholder} completely?").replace("{placeholder}",l),executeOperation:this.onDeleteRepo,confirmBtnText:(0,h.AP)("Delete"),toggleDialog:this.toggleDeleteRepoDialog})}),r&&(0,g.jsx)(Te.A,{children:(0,g.jsx)(Ne.A,{title:(0,h.AP)("Restore Library"),message:(0,h.AP)("Are you sure you want to restore {placeholder}?").replace("{placeholder}",l),executeOperation:this.onRestoreRepo,confirmBtnText:(0,h.AP)("Restore"),toggleDialog:this.toggleRestoreRepoDialog})})]})}}])}(o.Component),gn=function(e){function t(e){var n;return(0,i.A)(this,t),(n=(0,s.A)(this,t,[e])).toggleCleanTrashDialog=function(){n.setState({isCleanTrashDialogOpen:!n.state.isCleanTrashDialogOpen})},n.getReposByPage=function(e){var t=n.state.perPage;N.k.orgAdminListTrashRepos(h.Id,e,t).then((function(e){n.setState({repos:e.data.repos,pageInfo:e.data.page_info,loading:!1})})).catch((function(e){n.setState({loading:!1,errorMsg:T.Aq.getErrorMsg(e,!0)})}))},n.resetPerPage=function(e){n.setState({perPage:e},(function(){n.getReposByPage(1)}))},n.onDeleteRepo=function(e){var t=n.state.repos.filter((function(t){return t.id!=e.id}));n.setState({repos:t})},n.onRestoreRepo=function(e){var t=n.state.repos.filter((function(t){return t.id!=e.id}));n.setState({repos:t})},n.cleanTrash=function(){N.k.orgAdminCleanTrashRepo(h.Id).then((function(e){n.setState({repos:[]}),E.A.success((0,h.AP)("Successfully cleared trash."))})).catch((function(e){var t=T.Aq.getErrorMsg(e);E.A.danger(t)}))},n.state={loading:!0,errorMsg:"",repos:[],pageInfo:{},perPage:100,isCleanTrashDialogOpen:!1},n}return(0,a.A)(t,e),(0,r.A)(t,[{key:"componentDidMount",value:function(){var e=this,t=new URL(window.location).searchParams,n=this.state,i=n.currentPage,r=void 0===i?1:i,s=n.perPage;this.setState({perPage:parseInt(t.get("per_page")||s),currentPage:parseInt(t.get("page")||r)},(function(){e.getReposByPage(e.state.currentPage)}))}},{key:"render",value:function(){var e=this.state.isCleanTrashDialogOpen;return(0,g.jsxs)(o.Fragment,{children:[this.state.repos.length?(0,g.jsx)(y,(0,ue.A)((0,ue.A)({},this.props),{},{children:(0,g.jsx)(k.A,{className:"operation-item",onClick:this.toggleCleanTrashDialog,children:(0,h.AP)("Clean")})})):(0,g.jsx)(y,(0,ue.A)({},this.props)),(0,g.jsx)("div",{className:"main-panel-center flex-row",children:(0,g.jsxs)("div",{className:"cur-view-container",children:[(0,g.jsx)(an,{currentItem:"trash"}),(0,g.jsx)("div",{className:"cur-view-content",children:(0,g.jsx)(un,{loading:this.state.loading,errorMsg:this.state.errorMsg,items:this.state.repos,pageInfo:this.state.pageInfo,onDeleteRepo:this.onDeleteRepo,onRestoreRepo:this.onRestoreRepo,getListByPage:this.getReposByPage,resetPerPage:this.resetPerPage,curPerPage:this.state.perPage})})]})}),e&&(0,g.jsx)(Ne.A,{title:(0,h.AP)("Clear Trash"),message:(0,h.AP)("Are you sure you want to clear trash?"),executeOperation:this.cleanTrash,confirmBtnText:(0,h.AP)("Clear"),toggleDialog:this.toggleCleanTrashDialog})]})}}])}(o.Component),pn=function(e){function t(e){var n;(0,i.A)(this,t),(n=(0,s.A)(this,t,[e])).handleInputChange=function(e){n.setState({inputValue:e.target.value})},n.formSubmit=function(){var e=n.props.orgID,t=n.state.inputValue.trim();if(!t)return n.setState({formErrorMsg:(0,h.AP)("It is required.")}),!1;n.setState({submitBtnDisabled:!0}),N.k.orgAdminSetOrgUserDefaultQuota(e,t).then((function(e){n.props.updateQuota(e.data.user_default_quota),n.props.toggleDialog()})).catch((function(e){var t=T.Aq.getErrorMsg(e);n.setState({formErrorMsg:t,submitBtnDisabled:!1})}))};var r=n.props.userDefaultQuota<0?"":n.props.userDefaultQuota/1e6;return n.state={inputValue:r,submitBtnDisabled:!1},n}return(0,a.A)(t,e),(0,r.A)(t,[{key:"render",value:function(){var e=this.state,t=e.inputValue,n=e.formErrorMsg,i=e.submitBtnDisabled;return(0,g.jsxs)(Le.A,{isOpen:!0,centered:!0,toggle:this.props.toggleDialog,children:[(0,g.jsx)(Re.A,{toggle:this.props.toggleDialog,children:(0,h.AP)("Set user default quota")}),(0,g.jsx)(Ee.A,{children:(0,g.jsxs)(o.Fragment,{children:[(0,g.jsxs)(Ve.A,{children:[(0,g.jsx)("input",{type:"text",className:"form-control",value:t,onChange:this.handleInputChange}),(0,g.jsx)(qe.A,{addonType:"append",children:(0,g.jsx)(ut.A,{children:"MB"})})]}),(0,g.jsx)("p",{className:"small text-secondary mt-2 mb-2",children:(0,h.AP)("Tip: 0 means default limit")}),n&&(0,g.jsx)("p",{className:"error m-0 mt-2",children:n})]})}),(0,g.jsxs)(ze.A,{children:[(0,g.jsx)("button",{className:"btn btn-secondary",onClick:this.props.toggleDialog,children:(0,h.AP)("Cancel")}),(0,g.jsx)("button",{className:"btn btn-primary",disabled:i,onClick:this.formSubmit,children:(0,h.AP)("Submit")})]})]})}}])}(o.Component),fn=pn,mn=window.org.pageOptions.orgID,vn=function(e){function t(e){var n;return(0,i.A)(this,t),(n=(0,s.A)(this,t,[e])).toggleSetUserDefaultQuotaDialog=function(){n.setState({isSetUserDefaultQuotaDialogOpen:!n.state.isSetUserDefaultQuotaDialogOpen})},n.updateQuota=function(e){n.setState({user_default_quota:e})},n.state={org_name:"",storage_quota:0,storage_usage:0,isSetUserDefaultQuotaDialogOpen:!1,user_default_quota:0,member_quota:0,member_usage:0,active_members:0},n}return(0,a.A)(t,e),(0,r.A)(t,[{key:"componentDidMount",value:function(){var e=this;N.k.orgAdminGetOrgInfo().then((function(t){var n=t.data,i=n.org_id,r=n.org_name,s=n.member_quota,a=n.member_usage,o=n.active_members,l=n.storage_quota,c=n.storage_usage,h=n.user_default_quota;e.setState({org_id:i,org_name:r,member_quota:s,member_usage:a,active_members:o,storage_quota:l,storage_usage:c,user_default_quota:h})}))}},{key:"render",value:function(){var e=this.state,t=e.org_id,n=e.org_name,i=e.member_quota,r=e.member_usage,s=e.active_members,a=e.storage_quota,l=e.storage_usage,c=e.user_default_quota;return(0,g.jsxs)(o.Fragment,{children:[(0,g.jsx)(y,{}),(0,g.jsx)("div",{className:"main-panel-center flex-row",children:(0,g.jsxs)("div",{className:"cur-view-container",children:[(0,g.jsx)("div",{className:"cur-view-path",children:(0,g.jsx)("h3",{className:"sf-heading",children:(0,h.AP)("Info")})}),(0,g.jsx)("div",{className:"cur-view-content org-admin-info-content py-4",children:(0,g.jsxs)("div",{className:"d-flex flex-row flex-wrap justify-content-between",children:[(0,g.jsxs)("div",{className:"info-content-item d-flex",children:[(0,g.jsx)("img",{src:"".concat(h.SG,"img/info-organization.png"),alt:"",width:"46",height:"46",className:"info-content-item-img"}),(0,g.jsxs)("div",{children:[(0,g.jsx)("h4",{className:"info-content-item-heading",children:(0,h.AP)("Team name")}),(0,g.jsx)("p",{className:"info-content-name-text",children:n})]})]}),(0,g.jsxs)("div",{className:"info-content-item d-flex",children:[(0,g.jsx)("img",{src:"".concat(h.SG,"img/info-id.png"),alt:"",width:"46",height:"46",className:"info-content-item-img"}),(0,g.jsxs)("div",{children:[(0,g.jsx)("h4",{className:"info-content-item-heading",children:(0,h.AP)("ID")}),(0,g.jsx)("p",{className:"info-content-name-text",children:t})]})]}),(0,g.jsxs)("div",{className:"info-content-item w-100 d-flex justify-content-around",children:[(0,g.jsxs)("div",{children:[(0,g.jsx)("h4",{className:"info-content-item-heading",children:(0,h.AP)("Active users")}),(0,g.jsx)("p",{className:"info-content-user-text",children:s})]}),(0,g.jsxs)("div",{children:[(0,g.jsx)("h4",{className:"info-content-item-heading",children:(0,h.AP)("Total users")}),(0,g.jsx)("p",{className:"info-content-user-text",children:r})]}),h.i$&&(0,g.jsxs)("div",{children:[(0,g.jsx)("h4",{className:"info-content-item-heading",children:(0,h.AP)("User number limit")}),(0,g.jsx)("p",{className:"info-content-user-text",children:i>0?i:"--"})]})]}),(0,g.jsxs)("div",{className:"info-content-item",children:[(0,g.jsx)("h4",{className:"info-content-item-heading",children:(0,h.AP)("Space used")}),a>0?(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)("p",{className:"info-content-space-text",children:"".concat((l/a*100).toFixed(2),"%")}),(0,g.jsxs)("div",{className:"progress-container",children:[(0,g.jsx)("div",{className:"progress",children:(0,g.jsx)("div",{className:"progress-bar",role:"progressbar",style:{width:"".concat(l/a*100,"%")},"aria-valuenow":l/a*100,"aria-valuemin":"0","aria-valuemax":"100"})}),(0,g.jsx)("p",{className:"progress-text m-0",children:"".concat(T.Aq.bytesToSize(l)," / ").concat(T.Aq.bytesToSize(a))})]})]}):(0,g.jsx)("p",{children:T.Aq.bytesToSize(l)})]}),(0,g.jsxs)("div",{className:"info-content-item",children:[(0,g.jsx)("h4",{className:"info-content-item-heading",children:(0,h.AP)("User default quota")}),(0,g.jsx)("span",{children:T.Aq.bytesToSize(c)}),(0,g.jsx)("span",{title:(0,h.AP)("Edit"),className:"sf3-font sf3-font-rename attr-action-icon",onClick:this.toggleSetUserDefaultQuotaDialog})]})]})})]})}),this.state.isSetUserDefaultQuotaDialogOpen&&(0,g.jsx)(fn,{orgID:mn,userDefaultQuota:this.state.user_default_quota,updateQuota:this.updateQuota,toggleDialog:this.toggleSetUserDefaultQuotaDialog})]})}}])}(o.Component),xn=function(e){function t(e){var n;return(0,i.A)(this,t),(n=(0,s.A)(this,t,[e])).copyToClipBoard=function(){(0,Ge.A)(n.props.currentLinkHref);var e=(0,h.AP)("Link has been copied to clipboard");E.A.success(e,{duration:2}),n.props.toggle()},n}return(0,a.A)(t,e),(0,r.A)(t,[{key:"render",value:function(){var e=this.props.currentLinkHref;return(0,g.jsxs)(Le.A,{isOpen:!0,toggle:this.props.toggle,children:[(0,g.jsx)(Re.A,{toggle:this.props.toggle,children:(0,h.AP)("Link")}),(0,g.jsx)(Ee.A,{children:(0,g.jsx)("p",{children:(0,g.jsx)("a",{target:"_blank",href:e,rel:"noreferrer",children:e})})}),(0,g.jsxs)(ze.A,{children:[(0,g.jsx)(k.A,{color:"secondary",onClick:this.props.toggle,children:(0,h.AP)("Cancel")})," ",(0,g.jsx)(k.A,{color:"primary",onClick:this.copyToClipBoard,children:(0,h.AP)("Copy")})]})]})}}])}(o.Component);v().extend(Z());var An=function(e){function t(e){var n;return(0,i.A)(this,t),(n=(0,s.A)(this,t,[e])).listOrgLinks=function(e){N.k.orgAdminListOrgLinks(e).then((function(e){var t=e.data;n.setState({linkList:t.link_list,page:t.page,pageNext:t.page_next})}))},n.onFreezedItem=function(){n.setState({isItemFreezed:!0})},n.onUnfreezedItem=function(){n.setState({isItemFreezed:!1})},n.onChangePageNum=function(e,t){e.preventDefault();var i=n.state.page;1===t?i+=1:i-=1,n.listOrgLinks(i)},n.deleteOrgLink=function(e){N.k.orgAdminDeleteOrgLink(e).then((function(e){!0===e.data.success&&n.listOrgLinks(n.state.page)})).catch((function(e){var t=T.Aq.getErrorMsg(e);E.A.danger(t)}))},n.openLinkDialog=function(e){var t;t=e.name.indexOf("/")>-1?h.xW+"/d/"+e.token+"/":h.xW+"/f/"+e.token+"/",n.setState({currentLinkHref:t}),n.toggleLinkDialog()},n.toggleLinkDialog=function(){n.setState({isShowLinkDialog:!n.state.isShowLinkDialog})},n.state={linkList:null,page:1,pageNext:!1,isItemFreezed:!1,isShowLinkDialog:!1,currentLinkHref:""},n}return(0,a.A)(t,e),(0,r.A)(t,[{key:"componentDidMount",value:function(){this.listOrgLinks(this.state.page)}},{key:"render",value:function(){var e=this,t=this.state.linkList;return(0,g.jsxs)(o.Fragment,{children:[(0,g.jsx)(y,{}),(0,g.jsx)("div",{className:"main-panel-center flex-row",children:(0,g.jsxs)("div",{className:"cur-view-container",children:[(0,g.jsx)("div",{className:"cur-view-path",children:(0,g.jsx)("h3",{className:"sf-heading",children:(0,h.AP)("All Public Links")})}),(0,g.jsxs)("div",{className:"cur-view-content",children:[(0,g.jsxs)("table",{children:[(0,g.jsx)("thead",{children:(0,g.jsxs)("tr",{children:[(0,g.jsx)("th",{width:"50%",children:(0,h.AP)("Name")}),(0,g.jsx)("th",{width:"15%",children:(0,h.AP)("Owner")}),(0,g.jsx)("th",{width:"15%",children:(0,h.AP)("Created At")}),(0,g.jsx)("th",{width:"10%",children:(0,h.AP)("Visit count")}),(0,g.jsx)("th",{width:"10%"})]})}),(0,g.jsx)("tbody",{children:t&&t.map((function(t,n){return(0,g.jsx)(o.Fragment,{children:(0,g.jsx)(yn,{link:t,isItemFreezed:e.state.isItemFreezed,onFreezedItem:e.onFreezedItem,onUnfreezedItem:e.onUnfreezedItem,deleteOrgLink:e.deleteOrgLink,openLinkDialog:e.openLinkDialog})},n)}))})]}),(0,g.jsxs)("div",{className:"paginator",children:[1!==this.state.page&&(0,g.jsx)("a",{href:"#",onClick:function(t){return e.onChangePageNum(t,-1)},children:(0,h.AP)("Previous")}),1!==this.state.page&&this.state.pageNext&&(0,g.jsx)("span",{children:" | "}),this.state.pageNext&&(0,g.jsx)("a",{href:"#",onClick:function(t){return e.onChangePageNum(t,1)},children:(0,h.AP)("Next")})]})]})]})}),this.state.isShowLinkDialog&&(0,g.jsx)(xn,{currentLinkHref:this.state.currentLinkHref,toggle:this.toggleLinkDialog})]})}}])}(o.Component),yn=function(e){function t(e){var n;return(0,i.A)(this,t),(n=(0,s.A)(this,t,[e])).onMouseEnter=function(){n.props.isItemFreezed||n.setState({showMenu:!0,highlight:!0})},n.onMouseLeave=function(){n.props.isItemFreezed||n.setState({showMenu:!1,highlight:!1})},n.onDropdownToggleClick=function(e){e.preventDefault(),n.toggleOperationMenu(e)},n.toggleOperationMenu=function(e){e.stopPropagation(),n.setState({isItemMenuShow:!n.state.isItemMenuShow},(function(){n.state.isItemMenuShow?n.props.onFreezedItem():(n.setState({highlight:!1,showMenu:!1}),n.props.onUnfreezedItem())}))},n.state={highlight:!1,showMenu:!1,isItemMenuShow:!1},n}return(0,a.A)(t,e),(0,r.A)(t,[{key:"render",value:function(){var e=this.props,t=e.link,n=e.deleteOrgLink,i=h.Yc+"org/useradmin/info/"+encodeURIComponent(t.owner_email)+"/";return(0,g.jsxs)("tr",{className:this.state.highlight?"tr-highlight":"",onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave,children:[(0,g.jsx)("td",{children:t.name}),(0,g.jsx)("td",{children:(0,g.jsx)("a",{href:i,children:t.owner_name})}),(0,g.jsx)("td",{children:v()(t.created_time).fromNow()}),(0,g.jsx)("td",{children:t.view_count}),(0,g.jsx)("td",{className:"cursor-pointer text-center",children:this.state.showMenu&&(0,g.jsxs)(De.A,{isOpen:this.state.isItemMenuShow,toggle:this.toggleOperationMenu,children:[(0,g.jsx)(Se.A,{tag:"a",className:"attr-action-icon sf3-font sf3-font-more-vertical",title:(0,h.AP)("More operations"),"aria-label":(0,h.AP)("More operations"),"data-toggle":"dropdown","aria-expanded":this.state.isItemMenuShow,onClick:this.onDropdownToggleClick}),(0,g.jsxs)(Pe.A,{children:[(0,g.jsx)(Me.A,{onClick:n.bind(this,t.token),children:(0,h.AP)("Delete")}),(0,g.jsx)(Me.A,{onClick:this.props.openLinkDialog.bind(this,t),children:(0,h.AP)("View Link")})]})]})})]})}}])}(o.Component),bn=An,jn=function(e){function t(){return(0,i.A)(this,t),(0,s.A)(this,t,arguments)}return(0,a.A)(t,e),(0,r.A)(t,[{key:"render",value:function(){return(0,g.jsx)("div",{className:"h-100 org-departments",children:this.props.children})}}])}(o.Component),kn=jn,_n=function(e){function t(e){var n;return(0,i.A)(this,t),(n=(0,s.A)(this,t,[e])).handleSubmit=function(){if(n.validateName()){var e=-1;n.props.parentGroupID&&(e=n.props.parentGroupID),N.k.orgAdminAddDepartGroup(h.Id,e,n.state.departmentName.trim()).then((function(e){n.props.toggle(),n.props.onAddNewDepartment(e.data)})).catch((function(e){var t=(0,h.AP)(e.response.data.error_msg);n.setState({errMessage:t})}))}},n.validateName=function(){var e="";return!!n.state.departmentName.trim().length||(e=(0,h.AP)("Name is required"),n.setState({errMessage:e}),!1)},n.handleChange=function(e){n.setState({departmentName:e.target.value})},n.handleKeyDown=function(e){"Enter"===e.key&&(n.handleSubmit(),e.preventDefault())},n.state={departmentName:"",errMessage:""},n}return(0,a.A)(t,e),(0,r.A)(t,[{key:"render",value:function(){var e=this.props.parentGroupID?(0,h.AP)("New Sub-department"):(0,h.AP)("New Department");return(0,g.jsxs)(Le.A,{isOpen:!0,toggle:this.props.toggle,autoFocus:!1,children:[(0,g.jsx)(Re.A,{toggle:this.props.toggle,children:e}),(0,g.jsxs)(Ee.A,{children:[(0,g.jsx)(Be.A,{children:(0,g.jsxs)(Ye.A,{children:[(0,g.jsx)(fe.A,{for:"departmentName",children:(0,h.AP)("Name")}),(0,g.jsx)(U.A,{id:"departmentName",onKeyDown:this.handleKeyDown,value:this.state.departmentName,onChange:this.handleChange,autoFocus:!0})]})}),this.state.errMessage&&(0,g.jsx)("p",{className:"error",children:this.state.errMessage})]}),(0,g.jsxs)(ze.A,{children:[(0,g.jsx)(k.A,{color:"secondary",onClick:this.props.toggle,children:(0,h.AP)("Cancel")}),(0,g.jsx)(k.A,{color:"primary",onClick:this.handleSubmit,children:(0,h.AP)("Submit")})]})]})}}])}(o.Component),wn=function(e){function t(e){var n;return(0,i.A)(this,t),(n=(0,s.A)(this,t,[e])).deleteDepart=function(){var e=n.props.groupID;n.props.toggle(),N.k.orgAdminDeleteDepartGroup(h.Id,e).then((function(t){n.props.onDeleteDepartment(e)})).catch((function(e){var t=T.Aq.getErrorMsg(e);E.A.danger(t)}))},n}return(0,a.A)(t,e),(0,r.A)(t,[{key:"render",value:function(){var e=(0,h.AP)("Are you sure you want to delete {placeholder} ?");return e=e.replace("{placeholder}",'<span class="op-target">'+T.Aq.HTMLescape(this.props.groupName)+"</span>"),(0,g.jsxs)(Le.A,{isOpen:!0,toggle:this.props.toggle,children:[(0,g.jsx)(Re.A,{toggle:this.props.toggle,children:(0,h.AP)("Delete Department")}),(0,g.jsx)(Ee.A,{children:(0,g.jsx)("p",{dangerouslySetInnerHTML:{__html:e}})}),(0,g.jsxs)(ze.A,{children:[(0,g.jsx)(k.A,{color:"secondary",onClick:this.props.toggle,children:(0,h.AP)("Cancel")}),(0,g.jsx)(k.A,{color:"primary",onClick:this.deleteDepart,children:(0,h.AP)("Delete")})]})]})}}])}(o.Component),Dn=function(e){function t(e){var n;return(0,i.A)(this,t),(n=(0,s.A)(this,t,[e])).setGroupQuota=function(){var e=n.state.quota;if(e.length&&/^[1-9]\d*$/im.test(e)||-2==e){n.setState({errMessage:""});var t=-2==n.state.quota?n.state.quota:1e6*n.state.quota;N.k.orgAdminSetGroupQuota(h.Id,n.props.groupID,t).then((function(e){n.props.toggle(),n.props.onSetQuota(e.data)})).catch((function(e){var t=T.Aq.getErrorMsg(e);E.A.danger(t)}))}else{var i=(0,h.AP)("Quota is invalid.");n.setState({errMessage:i})}},n.handleChange=function(e){var t=e.target.value.trim();n.setState({quota:t})},n.handleKeyDown=function(e){"Enter"===e.key&&(n.setGroupQuota(),e.preventDefault())},n.state={quota:"",errMessage:""},n}return(0,a.A)(t,e),(0,r.A)(t,[{key:"render",value:function(){return(0,g.jsxs)(Le.A,{isOpen:!0,toggle:this.props.toggle,autoFocus:!1,children:[(0,g.jsx)(Re.A,{toggle:this.props.toggle,children:(0,h.AP)("Set Quota")}),(0,g.jsxs)(Ee.A,{children:[(0,g.jsxs)(Ve.A,{children:[(0,g.jsx)(U.A,{onKeyDown:this.handleKeyDown,value:this.state.quota,onChange:this.handleChange,autoFocus:!0}),(0,g.jsx)(qe.A,{addonType:"append",children:"MB"})]}),(0,g.jsxs)("p",{className:"tip",children:[(0,g.jsx)("br",{}),(0,g.jsx)("span",{children:(0,h.AP)("An integer that is greater than 0 or equal to -2.")}),(0,g.jsx)("br",{}),(0,g.jsx)("span",{children:(0,h.AP)("Tip: -2 means no limit.")})]}),this.state.errMessage&&(0,g.jsx)("p",{className:"error",children:this.state.errMessage})]}),(0,g.jsxs)(ze.A,{children:[(0,g.jsx)(k.A,{color:"secondary",onClick:this.props.toggle,children:(0,h.AP)("Cancel")}),(0,g.jsx)(k.A,{color:"primary",onClick:this.setGroupQuota,children:(0,h.AP)("Submit")})]})]})}}])}(o.Component),Sn=function(e){function t(e){var n;return(0,i.A)(this,t),(n=(0,s.A)(this,t,[e])).handleSubmit=function(){var e=n.validateName(),t=n.props,i=t.orgID,r=t.groupID;e&&N.k.orgAdminUpdateDepartGroup(i,r,n.state.departmentName.trim()).then((function(e){n.props.toggle(),n.props.onDepartmentNameChanged(e.data),E.A.success((0,h.AP)("Name updated"))})).catch((function(e){var t=T.Aq.getErrorMsg(e);n.setState({errMessage:t})}))},n.validateName=function(){var e="";return!!n.state.departmentName.trim().length||(e=(0,h.AP)("Name is required"),n.setState({errMessage:e}),!1)},n.handleChange=function(e){n.setState({departmentName:e.target.value})},n.handleKeyDown=function(e){"Enter"===e.key&&(n.handleSubmit(),e.preventDefault())},n.onAfterModelOpened=function(){n.newInput.current&&(n.newInput.current.focus(),n.newInput.current.select())},n.state={departmentName:n.props.name,errMessage:""},n.newInput=o.createRef(),n}return(0,a.A)(t,e),(0,r.A)(t,[{key:"render",value:function(){var e=(0,h.AP)("Rename Department");return(0,g.jsxs)(Le.A,{isOpen:!0,toggle:this.props.toggle,onOpened:this.onAfterModelOpened,children:[(0,g.jsx)(Re.A,{toggle:this.props.toggle,children:e}),(0,g.jsxs)(Ee.A,{children:[(0,g.jsx)(Be.A,{children:(0,g.jsxs)(Ye.A,{children:[(0,g.jsx)(fe.A,{for:"departmentName",children:(0,h.AP)("Name")}),(0,g.jsx)(U.A,{id:"departmentName",onKeyDown:this.handleKeyDown,value:this.state.departmentName,onChange:this.handleChange,innerRef:this.newInput})]})}),this.state.errMessage&&(0,g.jsx)("p",{className:"error",children:this.state.errMessage})]}),(0,g.jsxs)(ze.A,{children:[(0,g.jsx)(k.A,{color:"secondary",onClick:this.props.toggle,children:(0,h.AP)("Cancel")}),(0,g.jsx)(k.A,{color:"primary",onClick:this.handleSubmit,children:(0,h.AP)("Submit")})]})]})}}])}(o.Component),Pn=Sn;v().locale(h.vV),v().extend(Z());var Mn=function(e){function t(e){var n;return(0,i.A)(this,t),(n=(0,s.A)(this,t,[e])).onMouseEnter=function(){n.props.isItemFreezed||n.setState({isOpIconShown:!0,highlight:!0})},n.onMouseLeave=function(){n.props.isItemFreezed||n.setState({isOpIconShown:!1,highlight:!1})},n.translateOperations=function(e){var t="";switch(e){case"Rename":t=(0,h.AP)("Rename");break;case"Delete":t=(0,h.AP)("Delete")}return t},n.onMenuItemClick=function(e){switch(e){case"Rename":n.toggleRenameDialog();break;case"Delete":n.toggleDeleteDialog()}},n.onUnfreezedItem=function(){n.setState({highlight:!1,isOpIconShow:!1}),n.props.onUnfreezedItem()},n.toggleRenameDialog=function(){n.setState({isRenameDialogOpen:!n.state.isRenameDialogOpen})},n.toggleSetQuotaDialog=function(){n.setState({isSetGroupQuotaDialogOpen:!n.state.isSetGroupQuotaDialogOpen})},n.toggleDeleteDialog=function(){n.setState({isDeleteDialogOpen:!n.state.isDeleteDialogOpen})},n.state={highlight:!1,isOpIconShown:!1,isRenameDialogOpen:!1,isSetGroupQuotaDialogOpen:!1},n}return(0,a.A)(t,e),(0,r.A)(t,[{key:"render",value:function(){var e=this.props.group,t=this.state,n=t.highlight,i=t.isOpIconShown,r=t.isRenameDialogOpen,s=t.isSetGroupQuotaDialogOpen,a=t.isDeleteDialogOpen,l=h.Yc+"org/departmentadmin/groups/"+e.id+"/";return(0,g.jsxs)(o.Fragment,{children:[(0,g.jsxs)("tr",{className:n?"tr-highlight":"",onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave,children:[(0,g.jsx)("td",{children:(0,g.jsx)(c.N_,{to:l,children:e.name})}),(0,g.jsx)("td",{children:v()(e.created_at).fromNow()}),(0,g.jsxs)("td",{children:[T.Aq.bytesToSize(e.quota)," ",(0,g.jsx)("span",{onClick:this.toggleSetQuotaDialog,title:(0,h.AP)("Edit Quota"),className:"sf3-font sf3-font-rename attr-action-icon ".concat(n?"":"vh")})]}),(0,g.jsx)("td",{children:i&&(0,g.jsx)(hn.A,{operations:["Rename","Delete"],translateOperations:this.translateOperations,onMenuItemClick:this.onMenuItemClick,onFreezedItem:this.props.onFreezedItem,onUnfreezedItem:this.onUnfreezedItem})})]}),s&&(0,g.jsx)(Te.A,{children:(0,g.jsx)(Dn,{toggle:this.toggleSetQuotaDialog,groupID:e.id,onSetQuota:this.props.onSetDepartmentQuota})}),r&&(0,g.jsx)(Pn,{orgID:h.Id,groupID:e.id,name:e.name,toggle:this.toggleRenameDialog,onDepartmentNameChanged:this.props.onDepartmentNameChanged}),a&&(0,g.jsx)(Te.A,{children:(0,g.jsx)(wn,{toggle:this.toggleDeleteDialog,groupID:e.id,groupName:e.name,onDeleteDepartment:this.props.onDeleteDepartment})})]})}}])}(o.Component),Cn=Mn;v().locale(h.vV);var Nn=function(e){function t(e){var n;return(0,i.A)(this,t),(n=(0,s.A)(this,t,[e])).listDepartGroups=function(){N.k.orgAdminListDepartGroups(h.Id).then((function(e){n.setState({groups:e.data.data})}))},n.onFreezedItem=function(){n.setState({isItemFreezed:!0})},n.onUnfreezedItem=function(){n.setState({isItemFreezed:!1})},n.onDepartmentNameChanged=function(e){n.setState({groups:n.state.groups.map((function(t){return t.id==e.id&&(t.name=e.name),t}))})},n.toggleAddDepartDialog=function(){n.setState({isShowAddDepartDialog:!n.state.isShowAddDepartDialog})},n.onAddNewDepartment=function(e){var t=n.state.groups;t.unshift(e),n.setState({groups:t})},n.onDeleteDepartment=function(e){var t=n.state.groups;n.setState({groups:t.filter((function(t){return t.id!=e}))})},n.onSetDepartmentQuota=function(e){var t=n.state.groups;n.setState({groups:t.map((function(t){return t.id==e.id&&(t.quota=e.quota),t}))})},n.state={groups:null,groupID:"",groupName:"",isShowAddDepartDialog:!1,isItemFreezed:!1},n}return(0,a.A)(t,e),(0,r.A)(t,[{key:"componentDidMount",value:function(){this.listDepartGroups()}},{key:"render",value:function(){var e=this,t=this.state.groups,n=(0,g.jsxs)(o.Fragment,{children:[(0,g.jsx)("button",{className:"btn btn-secondary operation-item",title:(0,h.AP)("New Department"),onClick:this.toggleAddDepartDialog,children:(0,h.AP)("New Department")}),this.state.isShowAddDepartDialog&&(0,g.jsx)(Te.A,{children:(0,g.jsx)(_n,{onAddNewDepartment:this.onAddNewDepartment,groupID:this.state.groupID,toggle:this.toggleAddDepartDialog})})]});return(0,g.jsxs)(o.Fragment,{children:[(0,g.jsx)(y,{children:n}),(0,g.jsx)("div",{className:"main-panel-center flex-row h-100",children:(0,g.jsxs)("div",{className:"cur-view-container o-auto",children:[(0,g.jsx)("div",{className:"cur-view-path",children:(0,g.jsx)("h3",{className:"sf-heading",children:(0,h.AP)("Departments")})}),(0,g.jsx)("div",{className:"cur-view-content",children:t&&t.length>0?(0,g.jsxs)("table",{children:[(0,g.jsx)("thead",{children:(0,g.jsxs)("tr",{children:[(0,g.jsx)("th",{width:"40%",children:(0,h.AP)("Name")}),(0,g.jsx)("th",{width:"25%",children:(0,h.AP)("Created At")}),(0,g.jsx)("th",{width:"20%",children:(0,h.AP)("Quota")}),(0,g.jsx)("th",{width:"15%"})]})}),(0,g.jsx)("tbody",{children:t.map((function(t,n){return(0,g.jsx)(Cn,{group:t,isItemFreezed:e.state.isItemFreezed,onFreezedItem:e.onFreezedItem,onUnfreezedItem:e.onUnfreezedItem,onDepartmentNameChanged:e.onDepartmentNameChanged,onDeleteDepartment:e.onDeleteDepartment,onSetDepartmentQuota:e.onSetDepartmentQuota},t.id)}))})]}):(0,g.jsx)(J.A,{text:(0,h.AP)("No departments")})})]})})]})}}])}(o.Component),In=function(e){function t(e){var n;return(0,i.A)(this,t),(n=(0,s.A)(this,t,[e])).handleSelectChange=function(e){n.setState({selectedOption:e})},n.handleSubmit=function(){if(n.state.selectedOption){var e=n.state.selectedOption[0].email;n.refs.orgSelect.clearSelect(),n.setState({errMessage:[]}),N.k.orgAdminAddGroupMember(h.Id,n.props.groupID,e).then((function(e){n.setState({selectedOption:null}),e.data.failed.length>0&&n.setState({errMessage:e.data.failed[0].error_msg}),e.data.success.length>0&&(n.props.onAddNewMembers(e.data.success),n.props.toggle())})).catch((function(e){var t=T.Aq.getErrorMsg(e);E.A.danger(t)}))}},n.state={selectedOption:null,errMessage:""},n}return(0,a.A)(t,e),(0,r.A)(t,[{key:"render",value:function(){var e=this.state.errMessage;return(0,g.jsxs)(Le.A,{isOpen:!0,toggle:this.props.toggle,children:[(0,g.jsx)(Re.A,{toggle:this.props.toggle,children:(0,h.AP)("Add Member")}),(0,g.jsxs)(Ee.A,{children:[(0,g.jsx)(tt.A,{placeholder:(0,h.AP)("Search users"),onSelectChange:this.handleSelectChange,ref:"orgSelect",isMulti:!1,className:"org-add-member-select"}),e&&(0,g.jsx)(Fe.A,{color:"danger",className:"mt-2",children:e})]}),(0,g.jsxs)(ze.A,{children:[(0,g.jsx)(k.A,{color:"secondary",onClick:this.props.toggle,children:(0,h.AP)("Cancel")}),(0,g.jsx)(k.A,{color:"primary",onClick:this.handleSubmit,children:(0,h.AP)("Submit")})]})]})}}])}(o.Component),On=function(e){function t(e){var n;return(0,i.A)(this,t),(n=(0,s.A)(this,t,[e])).handleSubmit=function(){n.validateName()&&N.k.orgAdminAddDepartmentRepo(h.Id,n.props.groupID,n.state.repoName.trim()).then((function(e){n.props.toggle(),n.props.onAddNewRepo(e.data)})).catch((function(e){var t=T.Aq.getErrorMsg(e);n.setState({errMessage:t})}))},n.validateName=function(){var e="";return!!n.state.repoName.trim().length||(e=(0,h.AP)("Name is required"),n.setState({errMessage:e}),!1)},n.handleChange=function(e){n.setState({repoName:e.target.value})},n.handleKeyDown=function(e){"Enter"===e.key&&(n.handleSubmit(),e.preventDefault())},n.state={repoName:"",errMessage:""},n}return(0,a.A)(t,e),(0,r.A)(t,[{key:"render",value:function(){var e=this.state.errMessage;return(0,g.jsxs)(Le.A,{isOpen:!0,toggle:this.props.toggle,autoFocus:!1,children:[(0,g.jsx)(Re.A,{toggle:this.props.toggle,children:(0,h.AP)("New Library")}),(0,g.jsxs)(Ee.A,{children:[(0,g.jsx)(Be.A,{children:(0,g.jsxs)(Ye.A,{children:[(0,g.jsx)(fe.A,{for:"repoName",children:(0,h.AP)("Name")}),(0,g.jsx)(U.A,{id:"repoName",onKeyDown:this.handleKeyDown,value:this.state.repoName,onChange:this.handleChange,autoFocus:!0})]})}),e&&(0,g.jsx)(Fe.A,{color:"danger",className:"mt-2",children:e})]}),(0,g.jsxs)(ze.A,{children:[(0,g.jsx)(k.A,{color:"secondary",onClick:this.props.toggle,children:(0,h.AP)("Cancel")}),(0,g.jsx)(k.A,{color:"primary",onClick:this.handleSubmit,children:(0,h.AP)("Submit")})]})]})}}])}(o.Component);v().locale(h.vV);var Tn=function(e){function t(e){var n;return(0,i.A)(this,t),(n=(0,s.A)(this,t,[e])).listOrgMembers=function(e){N.k.orgAdminListGroupInfo(h.Id,e,!0).then((function(e){n.setState({members:e.data.members,groups:e.data.groups,ancestorGroups:e.data.ancestor_groups,groupName:e.data.name})})).catch((function(e){var t=T.Aq.getErrorMsg(e);E.A.danger(t)}))},n.toggleAddRepoDialog=function(){n.setState({isShowAddRepoDialog:!n.state.isShowAddRepoDialog})},n.toggleAddMemberDialog=function(){n.setState({isShowAddMemberDialog:!n.state.isShowAddMemberDialog})},n.toggleAddDepartDialog=function(){n.setState({isShowAddDepartDialog:!n.state.isShowAddDepartDialog})},n.state={groupName:"",isItemFreezed:!1,isDepartFreezed:!1,ancestorGroups:[],members:[],deletedMember:{},isShowAddMemberDialog:!1,showDeleteMemberDialog:!1,repos:[],deletedRepo:{},isShowAddRepoDialog:!1,showDeleteRepoDialog:!1,groups:[],subGroupID:"",subGroupName:"",isShowAddDepartDialog:!1},n.navItems=[{name:"subDepartments",urlPart:"/",text:(0,h.AP)("Sub-departments")},{name:"members",urlPart:"/members/",text:(0,h.AP)("Members")},{name:"repos",urlPart:"/libraries/",text:(0,h.AP)("Libraries")}],n}return(0,a.A)(t,e),(0,r.A)(t,[{key:"componentDidMount",value:function(){var e=this.props.groupID;this.listOrgMembers(e)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.props.groupID!==e.groupID&&this.listOrgMembers(e.groupID)}},{key:"render",value:function(){var e=this.props,t=e.groupID,n=e.currentItem,i="btn btn-secondary operation-item",r=(0,g.jsxs)(o.Fragment,{children:[t&&(0,g.jsxs)(g.Fragment,{children:["subDepartments"==n&&(0,g.jsx)("button",{className:i,title:(0,h.AP)("New Sub-department"),onClick:this.toggleAddDepartDialog,children:(0,h.AP)("New Sub-department")}),"members"==n&&(0,g.jsx)("button",{className:i,title:(0,h.AP)("Add Member"),onClick:this.toggleAddMemberDialog,children:(0,h.AP)("Add Member")}),"repos"==n&&(0,g.jsx)("button",{className:i,onClick:this.toggleAddRepoDialog,title:(0,h.AP)("New Library"),children:(0,h.AP)("New Library")})]}),this.state.isShowAddMemberDialog&&(0,g.jsx)(Te.A,{children:(0,g.jsx)(In,{toggle:this.toggleAddMemberDialog,onAddNewMembers:this.props.onAddNewMembers,groupID:t})}),this.state.isShowAddRepoDialog&&(0,g.jsx)(Te.A,{children:(0,g.jsx)(On,{toggle:this.toggleAddRepoDialog,onAddNewRepo:this.props.onAddNewRepo,groupID:t})}),this.state.isShowAddDepartDialog&&(0,g.jsx)(Te.A,{children:(0,g.jsx)(_n,{onAddNewDepartment:this.props.onAddNewDepartment,parentGroupID:t,toggle:this.toggleAddDepartDialog})})]});return(0,g.jsxs)(o.Fragment,{children:[(0,g.jsx)(y,{children:r}),(0,g.jsx)("div",{className:"main-panel-center flex-row h-100",children:(0,g.jsxs)("div",{className:"cur-view-container o-auto",children:[(0,g.jsx)("div",{className:"cur-view-path",children:(0,g.jsx)("div",{className:"fleft",children:(0,g.jsxs)("h3",{className:"sf-heading",children:[t?(0,g.jsx)(c.N_,{to:h.Yc+"org/departmentadmin/",children:(0,h.AP)("Departments")}):(0,g.jsx)("span",{children:(0,h.AP)("Departments")}),this.state.ancestorGroups.map((function(e){var t=h.Yc+"org/departmentadmin/groups/"+e.id+"/";return(0,g.jsxs)("span",{children:[" / ",(0,g.jsx)(c.N_,{to:t,children:e.name})]},e.id)})),t&&(0,g.jsxs)("span",{children:[" / ",this.state.groupName]})]})})}),(0,g.jsx)("ul",{className:"nav border-bottom mx-4",children:this.navItems.map((function(e,i){return(0,g.jsx)("li",{className:"nav-item mr-2",children:(0,g.jsx)(c.N_,{to:"".concat(h.Yc,"org/departmentadmin/groups/").concat(t).concat(e.urlPart),className:"nav-link ".concat(n==e.name?" active":""),children:e.text})},i)}))}),this.props.children]})})]})}}])}(o.Component);v().locale(h.vV);var Ln=function(e){function t(e){var n;return(0,i.A)(this,t),(n=(0,s.A)(this,t,[e])).listOrgMembers=function(e){N.k.orgAdminListGroupInfo(h.Id,e,!0).then((function(e){n.setState({members:e.data.members,groups:e.data.groups,ancestorGroups:e.data.ancestor_groups,groupName:e.data.name})})).catch((function(e){var t=T.Aq.getErrorMsg(e);E.A.danger(t)}))},n.listSubDepartGroups=function(e){N.k.orgAdminListGroupInfo(h.Id,e,!0).then((function(e){n.setState({groups:e.data.groups})})).catch((function(e){var t=T.Aq.getErrorMsg(e);E.A.danger(t)}))},n.onFreezedDepart=function(){n.setState({isDepartFreezed:!0})},n.onUnfreezedDepart=function(){n.setState({isDepartFreezed:!1})},n.onDepartmentNameChanged=function(e){n.setState({groups:n.state.groups.map((function(t){return t.id==e.id&&(t.name=e.name),t}))})},n.onAddNewDepartment=function(e){var t=n.state.groups;t.unshift(e),n.setState({groups:t})},n.onDeleteDepartment=function(e){var t=n.state.groups;n.setState({groups:t.filter((function(t){return t.id!=e}))})},n.onSetDepartmentQuota=function(e){var t=n.state.groups;n.setState({groups:t.map((function(t){return t.id==e.id&&(t.quota=e.quota),t}))})},n.state={groupName:"",isItemFreezed:!1,isDepartFreezed:!1,ancestorGroups:[],members:[],isShowAddMemberDialog:!1,repos:[],deletedRepo:{},groups:[]},n}return(0,a.A)(t,e),(0,r.A)(t,[{key:"componentDidMount",value:function(){var e=this.props.groupID;this.listOrgMembers(e)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.props.groupID!==e.groupID&&this.listOrgMembers(e.groupID)}},{key:"render",value:function(){var e=this,t=this.state.groups,n=this.props.groupID;return(0,g.jsx)(o.Fragment,{children:(0,g.jsx)(Tn,{groupID:n,currentItem:"subDepartments",onAddNewDepartment:this.onAddNewDepartment,children:(0,g.jsx)("div",{className:"cur-view-content",children:t&&t.length>0?(0,g.jsxs)("table",{children:[(0,g.jsx)("thead",{children:(0,g.jsxs)("tr",{children:[(0,g.jsx)("th",{width:"40%",children:(0,h.AP)("Name")}),(0,g.jsx)("th",{width:"25%",children:(0,h.AP)("Created At")}),(0,g.jsx)("th",{width:"20%",children:(0,h.AP)("Quota")}),(0,g.jsx)("th",{width:"15%"})]})}),(0,g.jsx)("tbody",{children:t.map((function(t,n){return(0,g.jsx)(o.Fragment,{children:(0,g.jsx)(Cn,{group:t,isItemFreezed:e.state.isDepartFreezed,onFreezedItem:e.onFreezedDepart,onUnfreezedItem:e.onUnfreezedDepart,onDepartmentNameChanged:e.onDepartmentNameChanged,onDeleteDepartment:e.onDeleteDepartment,onSetDepartmentQuota:e.onSetDepartmentQuota})},t.id)}))})]}):(0,g.jsx)(J.A,{text:(0,h.AP)("No sub-departments")})})})})}}])}(o.Component),Rn=Ln,En=n(60436),Fn=function(e){function t(e){var n;return(0,i.A)(this,t),(n=(0,s.A)(this,t,[e])).deleteMember=function(){var e=n.props.member.email;N.k.orgAdminDeleteGroupMember(h.Id,n.props.groupID,e).then((function(e){e.data.success&&(n.props.onMemberChanged(),n.props.toggle())})).catch((function(e){var t=T.Aq.getErrorMsg(e);E.A.danger(t)}))},n}return(0,a.A)(t,e),(0,r.A)(t,[{key:"render",value:function(){var e=(0,h.AP)("Are you sure you want to delete {placeholder} ?");return e=e.replace("{placeholder}",'<span class="op-target">'+T.Aq.HTMLescape(this.props.member.name)+"</span>"),(0,g.jsxs)(Le.A,{isOpen:!0,toggle:this.props.toggle,children:[(0,g.jsx)(Re.A,{toggle:this.props.toggle,children:(0,h.AP)("Delete Member")}),(0,g.jsx)(Ee.A,{children:(0,g.jsx)("div",{dangerouslySetInnerHTML:{__html:e}})}),(0,g.jsxs)(ze.A,{children:[(0,g.jsx)(k.A,{color:"secondary",onClick:this.props.toggle,children:(0,h.AP)("Cancel")}),(0,g.jsx)(k.A,{color:"primary",onClick:this.deleteMember,children:(0,h.AP)("Delete")})]})]})}}])}(o.Component);v().locale(h.vV);var zn=function(e){function t(e){var n;return(0,i.A)(this,t),(n=(0,s.A)(this,t,[e])).listOrgGroupRepo=function(e){N.k.orgAdminListGroupRepos(h.Id,e).then((function(e){n.setState({repos:e.data.libraries})})).catch((function(e){var t=T.Aq.getErrorMsg(e);E.A.danger(t)}))},n.listOrgMembers=function(e){N.k.orgAdminListGroupInfo(h.Id,e,!0).then((function(e){n.setState({members:e.data.members,groups:e.data.groups,ancestorGroups:e.data.ancestor_groups,groupName:e.data.name})})).catch((function(e){var t=T.Aq.getErrorMsg(e);E.A.danger(t)}))},n.listSubDepartGroups=function(e){N.k.orgAdminListGroupInfo(h.Id,e,!0).then((function(e){n.setState({groups:e.data.groups})})).catch((function(e){var t=T.Aq.getErrorMsg(e);E.A.danger(t)}))},n.toggleCancel=function(){n.setState({showDeleteMemberDialog:!1,showDeleteRepoDialog:!1,showDeleteDepartDialog:!1,showSetGroupQuotaDialog:!1})},n.onFreezedDepart=function(){n.setState({isDepartFreezed:!0})},n.onUnfreezedDepart=function(){n.setState({isDepartFreezed:!1})},n.onDepartmentNameChanged=function(e){n.setState({groups:n.state.groups.map((function(t){return t.id==e.id&&(t.name=e.name),t}))})},n.onSubDepartChanged=function(){n.listSubDepartGroups(n.props.groupID)},n.onRepoChanged=function(){n.listOrgGroupRepo(n.props.groupID)},n.onMemberChanged=function(){n.listOrgMembers(n.props.groupID)},n.toggleItemFreezed=function(e){n.setState({isItemFreezed:e})},n.showDeleteMemberDialog=function(e){n.setState({showDeleteMemberDialog:!0,deletedMember:e})},n.toggleAddRepoDialog=function(){n.setState({isShowAddRepoDialog:!n.state.isShowAddRepoDialog})},n.toggleAddMemberDialog=function(){n.setState({isShowAddMemberDialog:!n.state.isShowAddMemberDialog})},n.toggleAddDepartDialog=function(){n.setState({isShowAddDepartDialog:!n.state.isShowAddDepartDialog})},n.showSetGroupQuotaDialog=function(e){n.setState({showSetGroupQuotaDialog:!0,subGroupID:e})},n.onAddNewMembers=function(e){var t=n.state.members;t.unshift.apply(t,(0,En.A)(e)),n.setState({members:t})},n.state={groupName:"",isItemFreezed:!1,isDepartFreezed:!1,ancestorGroups:[],members:[],deletedMember:{},isShowAddMemberDialog:!1,showDeleteMemberDialog:!1,repos:[],deletedRepo:{},isShowAddRepoDialog:!1,groups:[],subGroupID:"",subGroupName:"",isShowAddDepartDialog:!1,showSetGroupQuotaDialog:!1},n}return(0,a.A)(t,e),(0,r.A)(t,[{key:"componentDidMount",value:function(){var e=this.props.groupID;this.listOrgGroupRepo(e),this.listOrgMembers(e)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.props.groupID!==e.groupID&&(this.listOrgGroupRepo(e.groupID),this.listOrgMembers(e.groupID))}},{key:"render",value:function(){var e=this,t=this.state.members,n=this.props.groupID;return(0,g.jsxs)(o.Fragment,{children:[(0,g.jsx)(Tn,{groupID:n,currentItem:"members",onAddNewMembers:this.onAddNewMembers,children:(0,g.jsx)("div",{className:"cur-view-content",children:t&&0!==t.length?(0,g.jsxs)("table",{children:[(0,g.jsx)("thead",{children:(0,g.jsxs)("tr",{children:[(0,g.jsx)("th",{width:"5%"}),(0,g.jsx)("th",{width:"50%",children:(0,h.AP)("Name")}),(0,g.jsx)("th",{width:"15%",children:(0,h.AP)("Role")}),(0,g.jsx)("th",{width:"30%"})]})}),(0,g.jsx)("tbody",{children:t.map((function(t,i){return(0,g.jsx)(Un,{member:t,showDeleteMemberDialog:e.showDeleteMemberDialog,isItemFreezed:e.state.isItemFreezed,onMemberChanged:e.onMemberChanged,toggleItemFreezed:e.toggleItemFreezed,groupID:n},i)}))})]}):(0,g.jsx)(J.A,{text:(0,h.AP)("No members")})})}),this.state.showDeleteMemberDialog&&(0,g.jsx)(Te.A,{children:(0,g.jsx)(Fn,{toggle:this.toggleCancel,onMemberChanged:this.onMemberChanged,member:this.state.deletedMember,groupID:n})})]})}}])}(o.Component),Un=function(e){function t(e){var n;return(0,i.A)(this,t),(n=(0,s.A)(this,t,[e])).onMouseEnter=function(){n.props.isItemFreezed||n.setState({highlight:!0})},n.onMouseLeave=function(){n.props.isItemFreezed||n.setState({highlight:!1})},n.onChangeUserRole=function(e){var t="Admin"===e.value;N.k.orgAdminSetGroupMemberRole(h.Id,n.props.groupID,n.props.member.email,t).then((function(e){n.props.onMemberChanged()})).catch((function(e){var t=T.Aq.getErrorMsg(e);E.A.danger(t)})),n.setState({highlight:!1})},n.state={highlight:!1},n.roleOptions=[{value:"Admin",text:(0,h.AP)("Admin"),isSelected:!1},{value:"Member",text:(0,h.AP)("Member"),isSelected:!1}],n}return(0,a.A)(t,e),(0,r.A)(t,[{key:"render",value:function(){var e=this.props.member,t=this.state.highlight,n=h.xW+"/org/useradmin/info/"+e.email+"/";if("Owner"===e.role)return null;this.roleOptions=this.roleOptions.map((function(t){return t.isSelected=t.value==e.role,t}));var i=this.roleOptions.filter((function(e){return e.isSelected}))[0];return(0,g.jsxs)("tr",{className:t?"tr-highlight":"",onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave,children:[(0,g.jsx)("td",{children:(0,g.jsx)("img",{src:e.avatar_url,alt:"member-header",width:"24",className:"avatar"})}),(0,g.jsx)("td",{children:(0,g.jsx)("a",{href:n,children:e.name})}),(0,g.jsx)("td",{children:(0,g.jsx)(Ce.A,{isDropdownToggleShown:t,currentSelectedOption:i,options:this.roleOptions,selectOption:this.onChangeUserRole,toggleItemFreezed:this.props.toggleItemFreezed})}),(0,g.jsx)("td",{className:"cursor-pointer text-center",onClick:this.props.showDeleteMemberDialog.bind(this,e),children:(0,g.jsx)("span",{className:"sf2-icon-x3 action-icon ".concat(t?"":"vh"),title:"Delete"})})]})}}])}(o.Component),Bn=zn,Yn=function(e){function t(e){var n;return(0,i.A)(this,t),(n=(0,s.A)(this,t,[e])).deleteRepo=function(){var e=n.props.repo;N.k.orgAdminDeleteDepartmentRepo(h.Id,n.props.groupID,n.props.repo.repo_id).then((function(t){t.data.success&&(n.props.onDeleteRepo(e.repo_id),n.props.toggle())})).catch((function(e){var t=T.Aq.getErrorMsg(e);E.A.danger(t)}))},n}return(0,a.A)(t,e),(0,r.A)(t,[{key:"render",value:function(){var e=(0,h.AP)("Are you sure you want to delete {placeholder} ?");return e=e.replace("{placeholder}",'<span class="op-target">'+T.Aq.HTMLescape(this.props.repo.name)+"</span>"),(0,g.jsxs)(Le.A,{isOpen:!0,toggle:this.props.toggle,children:[(0,g.jsx)(Re.A,{toggle:this.props.toggle,children:(0,h.AP)("Delete Library")}),(0,g.jsx)(Ee.A,{children:(0,g.jsx)("div",{dangerouslySetInnerHTML:{__html:e}})}),(0,g.jsxs)(ze.A,{children:[(0,g.jsx)(k.A,{color:"secondary",onClick:this.props.toggle,children:(0,h.AP)("Cancel")}),(0,g.jsx)(k.A,{color:"primary",onClick:this.deleteRepo,children:(0,h.AP)("Delete")})]})]})}}])}(o.Component);v().locale(h.vV);var Vn=function(e){function t(e){var n;return(0,i.A)(this,t),(n=(0,s.A)(this,t,[e])).listOrgGroupRepo=function(e){N.k.orgAdminListGroupRepos(h.Id,e).then((function(e){n.setState({repos:e.data.libraries})})).catch((function(e){var t=T.Aq.getErrorMsg(e);E.A.danger(t)}))},n.onAddNewRepo=function(e){var t=n.state.repos;t.unshift((0,ue.A)((0,ue.A)({},e),{},{name:e.repo_name})),n.setState({repos:t})},n.onDeleteRepo=function(e){var t=n.state.repos;n.setState({repos:t.filter((function(t){return t.repo_id!=e}))})},n.state={repos:[]},n}return(0,a.A)(t,e),(0,r.A)(t,[{key:"componentDidMount",value:function(){var e=this.props.groupID;this.listOrgGroupRepo(e)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.props.groupID!==e.groupID&&this.listOrgGroupRepo(e.groupID)}},{key:"render",value:function(){var e=this,t=this.state.repos,n=this.props.groupID;return(0,g.jsx)(o.Fragment,{children:(0,g.jsx)(Tn,{groupID:n,currentItem:"repos",onAddNewRepo:this.onAddNewRepo,children:t.length>0?(0,g.jsx)("div",{className:"cur-view-content",children:(0,g.jsxs)("table",{children:[(0,g.jsx)("thead",{children:(0,g.jsxs)("tr",{children:[(0,g.jsx)("th",{width:"5%"}),(0,g.jsx)("th",{width:"50%",children:(0,h.AP)("Name")}),(0,g.jsx)("th",{width:"30%",children:(0,h.AP)("Size")}),(0,g.jsx)("th",{width:"15%"})]})}),(0,g.jsx)("tbody",{children:t.map((function(t,i){return(0,g.jsx)(qn,{groupID:n,repo:t,onDeleteRepo:e.onDeleteRepo},i)}))})]})}):(0,g.jsx)(J.A,{text:(0,h.AP)("No libraries")})})})}}])}(o.Component),qn=function(e){function t(e){var n;return(0,i.A)(this,t),(n=(0,s.A)(this,t,[e])).onMouseEnter=function(){n.setState({highlight:!0})},n.onMouseLeave=function(){n.setState({highlight:!1})},n.toggleDeleteDialog=function(){n.setState({isDeleteDialogOpen:!n.state.isDeleteDialogOpen})},n.state={highlight:!1,isDeleteDialogOpen:!1},n}return(0,a.A)(t,e),(0,r.A)(t,[{key:"render",value:function(){var e=this.props,t=e.repo,n=e.groupID,i=this.state,r=i.highlight,s=i.isDeleteDialogOpen,a=T.Aq.getLibIconUrl(t);return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsxs)("tr",{className:r?"tr-highlight":"",onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave,children:[(0,g.jsx)("td",{children:(0,g.jsx)("img",{src:a,width:"24",alt:(0,h.AP)("icon")})}),(0,g.jsx)("td",{children:t.name}),(0,g.jsxs)("td",{children:[T.Aq.bytesToSize(t.size)," "]}),(0,g.jsx)("td",{className:"cursor-pointer text-center",children:(0,g.jsx)("span",{onClick:this.toggleDeleteDialog,className:"sf3-font-delete1 sf3-font action-icon ".concat(r?"":"vh"),title:"Delete"})})]}),s&&(0,g.jsx)(Te.A,{children:(0,g.jsx)(Yn,{toggle:this.toggleDeleteDialog,onDeleteRepo:this.props.onDeleteRepo,repo:t,groupID:n})})]})}}])}(o.Component),Wn=Vn,Hn=n(71361),Gn=n(61599),Qn=function(e){function t(e){var n;return(0,i.A)(this,t),(n=(0,s.A)(this,t,[e])).downloadExcel=function(){if(n.isValidDateStr())switch(n.props.logType){case"fileaudit":n.orgAdminExportLogs("fileaudit");break;case"file-update":n.orgAdminExportLogs("fileupdate");break;case"perm-audit":n.orgAdminExportLogs("permaudit")}},n.queryIOStatus=function(e,t){Hn.E.queryIOStatus(e).then((function(i){!0===i.data.is_finished?(n.setState({isShowIODialog:!1}),n.props.toggle(),location.href=h.Yc+"api/v2.1/org/admin/log/export-excel/?task_id="+e+"&log_type="+t):setTimeout((function(){n.queryIOStatus(e,t)}),1e3)})).catch((function(e){n.setState({isShowIODialog:!1}),n.props.toggle(),E.A.danger((0,h.AP)("Failed to export. Please check whether the size of table attachments exceeds the limit."))}))},n.orgAdminExportLogs=function(e){var t=n.state,i=t.startDateStr,r=t.endDateStr,s="";n.setState({isShowIODialog:!0},(function(){N.k.orgAdminExportLogsExcel(h.Id,i,r,e).then((function(e){return s=e.data.task_id,n.setState({taskId:s}),Hn.E.queryIOStatus(s)})).then((function(t){!0===t.data.is_finished?(n.setState({isShowIODialog:!1}),n.props.toggle(),location.href=h.Yc+"api/v2.1/org/admin/log/export-excel/?task_id="+s+"&log_type="+e):n.queryIOStatus(s,e)})).catch((function(e){if(e.response&&500===e.response.status){var t=e.response.data?e.response.data.error_msg:null;t&&"Internal Server Error"!==t?E.A.danger(t):E.A.danger((0,h.AP)("Internal Server Error"))}else{var i=T.Aq.getErrorMsg(e);E.A.danger(i)}n.props.toggle()}))}))},n.isValidDateStr=function(){var e=n.state,t=e.startDateStr,i=e.endDateStr;return!!(v()(t,"YYYY-MM-DD",!0).isValid()&&v()(i,"YYYY-MM-DD",!0).isValid()&&v()(t).isBefore(i))||(n.setState({errMsg:(0,h.AP)("Date Invalid.")}),!1)},n.handleStartChange=function(e){var t=e.target.value.trim();n.setState({startDateStr:t,errMsg:""})},n.handleEndChange=function(e){var t=e.target.value.trim();n.setState({endDateStr:t,errMsg:""})},n.onExportToggle=function(e){n.setState({isShowIODialog:!n.state.isShowIODialog}),n.props.toggle()},n.state={loading:!0,startDateStr:"",endDateStr:"",errMsg:"",taskId:"",isShowIODialog:!1},n}return(0,a.A)(t,e),(0,r.A)(t,[{key:"render",value:function(){return(0,g.jsxs)(o.Fragment,{children:[!this.state.isShowIODialog&&(0,g.jsxs)(Le.A,{isOpen:!0,toggle:this.props.toggle,autoFocus:!1,children:[(0,g.jsx)(Re.A,{toggle:this.props.toggle,children:(0,h.AP)("Choose date")}),(0,g.jsxs)(Ee.A,{children:[(0,g.jsxs)(Ye.A,{children:[(0,g.jsx)(fe.A,{children:(0,h.AP)("Start date")}),(0,g.jsx)(U.A,{value:this.state.startDateStr,onChange:this.handleStartChange,placeholder:"yyyy-mm-dd",autoFocus:!0})]}),(0,g.jsxs)(Ye.A,{children:[(0,g.jsx)(fe.A,{children:(0,h.AP)("End date")}),(0,g.jsx)(U.A,{value:this.state.endDateStr,onChange:this.handleEndChange,placeholder:"yyyy-mm-dd"})]}),this.state.errMsg&&(0,g.jsx)(Fe.A,{className:"mt-2",color:"danger",children:(0,h.AP)(this.state.errMsg)})]}),(0,g.jsxs)(ze.A,{children:[(0,g.jsx)(k.A,{color:"secondary",onClick:this.props.toggle,children:(0,h.AP)("Cancel")}),(0,g.jsx)(k.A,{color:"primary",onClick:this.downloadExcel,children:(0,h.AP)("Submit")})]})]}),this.state.isShowIODialog&&(0,g.jsx)(Gn.A,{toggle:this.onExportToggle})]})}}])}(o.Component),Xn=function(e){function t(e){var n;return(0,i.A)(this,t),(n=(0,s.A)(this,t,[e])).toggleExportExcelDialog=function(){n.setState({isExportExcelDialogOpen:!n.state.isExportExcelDialogOpen})},n.tabItemClick=function(e){n.setState({logType:e}),n.props.tabItemClick(e)},n.state={isExportExcelDialogOpen:!1,logType:""},n}return(0,a.A)(t,e),(0,r.A)(t,[{key:"componentDidMount",value:function(){var e=window.location.href.split("/"),t=e[e.length-2];"logadmin"===t&&(t="fileaudit"),this.setState({logType:t})}},{key:"render",value:function(){var e=this,t=this.state,n=t.isExportExcelDialogOpen,i=t.logType;return(0,g.jsxs)(o.Fragment,{children:[(0,g.jsx)(y,{children:(0,g.jsx)(k.A,{className:"btn btn-secondary operation-item",onClick:this.toggleExportExcelDialog,children:(0,h.AP)("Export Excel")})}),(0,g.jsx)("div",{className:"main-panel-center flex-row",children:(0,g.jsxs)("div",{className:"cur-view-container h-100",children:[(0,g.jsx)("div",{className:"cur-view-path org-user-nav",children:(0,g.jsxs)("ul",{className:"nav",children:[(0,g.jsx)("li",{className:"nav-item",onClick:function(){return e.tabItemClick("fileaudit")},children:(0,g.jsx)(c.N_,{className:"nav-link ".concat("fileaudit"===this.props.currentTab?"active":""),to:h.Yc+"org/logadmin/",title:(0,h.AP)("File Access"),children:(0,h.AP)("File Access")})}),(0,g.jsx)("li",{className:"nav-item",onClick:function(){return e.tabItemClick("file-update")},children:(0,g.jsx)(c.N_,{className:"nav-link ".concat("file-update"===this.props.currentTab?"active":""),to:h.Yc+"org/logadmin/file-update/",title:(0,h.AP)("File Update"),children:(0,h.AP)("File Update")})}),(0,g.jsx)("li",{className:"nav-item",onClick:function(){return e.tabItemClick("perm-audit")},children:(0,g.jsx)(c.N_,{className:"nav-link ".concat("perm-audit"===this.props.currentTab?"active":""),to:h.Yc+"org/logadmin/perm-audit/",title:(0,h.AP)("Permission"),children:(0,h.AP)("Permission")})})]})}),(0,g.jsx)("div",{className:"h-100 o-auto",children:this.props.children})]})}),n&&(0,g.jsx)(Te.A,{children:(0,g.jsx)(Qn,{logType:i,toggle:this.toggleExportExcelDialog})})]})}}])}(o.Component);v().locale(h.vV);var Kn=(0,r.A)((function e(t){(0,i.A)(this,e),this.ip=t.ip,this.type=t.type,this.device=t.device,this.repo_id=t.repo_id,this.repo_name=t.repo_name,this.file_name=t.file_name,this.file_path=t.file_path,this.user_name=t.user_name,this.user_email=t.user_email,this.user_contact_email=t.user_contact_email,this.time=v()(t.time).format("YYYY-MM-DD HH:mm:ss")}));v().locale(h.vV);var $n=function(e){function t(e){var n;return(0,i.A)(this,t),(n=(0,s.A)(this,t,[e])).initData=function(e,t,i){N.k.orgAdminListFileAudit(e,t,i).then((function(e){var t=e.data.log_list.map((function(e){return new Kn(e)}));n.setState({eventList:t,pageNext:e.data.page_next,page:e.data.page,userSelected:e.data.user_selected,repoSelected:e.data.repo_selected})})).catch((function(e){var t=T.Aq.getErrorMsg(e);E.A.danger(t)}))},n.onChangePageNum=function(e,t){e.preventDefault();var i=n.state.page;1==t?i+=1:i-=1;var r=n.state.userSelected,s=n.state.repoSelected;n.initData(r,s,i)},n.filterUser=function(e){n.setState({userSelected:e})},n.filterRepo=function(e){n.setState({repoSelected:e})},n.state={page:1,pageNext:!1,eventList:[],userSelected:"",repoSelected:"",isItemFreezed:!1},n}return(0,a.A)(t,e),(0,r.A)(t,[{key:"componentDidMount",value:function(){var e=this.state.page,t=this.state.userSelected,n=this.state.repoSelected;this.initData(t,n,e)}},{key:"render",value:function(){var e=this,t=this.state.eventList;return(0,g.jsxs)("div",{className:"cur-view-content",children:[(this.state.userSelected||this.state.repoSelected)&&(0,g.jsxs)(o.Fragment,{children:[this.state.userSelected&&(0,g.jsxs)("span",{className:"audit-unselect-item",onClick:this.filterUser.bind(this,null),children:[(0,g.jsx)("span",{className:"no-deco",children:this.state.userSelected})," \u2716"]}),this.state.repoSelected&&(0,g.jsxs)("span",{className:"audit-unselect-item",onClick:this.filterRepo.bind(this,null),children:[(0,g.jsx)("span",{className:"no-deco",children:this.state.repoSelected})," \u2716"]})]}),(0,g.jsxs)("table",{children:[(0,g.jsx)("thead",{children:(0,g.jsxs)("tr",{children:[(0,g.jsx)("th",{width:"24%",children:(0,h.AP)("User")}),(0,g.jsx)("th",{width:"10%",children:(0,h.AP)("Type")}),(0,g.jsx)("th",{width:"13%",children:(0,h.AP)("IP")}),(0,g.jsx)("th",{width:"17%",children:(0,h.AP)("Date")}),(0,g.jsx)("th",{width:"18%",children:(0,h.AP)("Library")}),(0,g.jsx)("th",{width:"18%",children:(0,h.AP)("File")})]})}),(0,g.jsx)("tbody",{children:t.map((function(t,n){return(0,g.jsx)(Zn,{fileEvent:t,isItemFreezed:e.state.isItemFreezed,filterUser:e.filterUser,filterRepo:e.filterRepo,userSelected:e.state.userSelected,repoSelected:e.state.repoSelected},n)}))})]}),(0,g.jsxs)("div",{className:"paginator",children:[1!=this.state.page&&(0,g.jsx)("a",{href:"#",onClick:function(t){return e.onChangePageNum(t,-1)},children:(0,h.AP)("Previous")}),1!=this.state.page&&this.state.pageNext&&(0,g.jsx)("span",{children:" | "}),this.state.pageNext&&(0,g.jsx)("a",{href:"#",onClick:function(t){return e.onChangePageNum(t,1)},children:(0,h.AP)("Next")})]})]})}}])}(o.Component),Zn=function(e){function t(e){var n;return(0,i.A)(this,t),(n=(0,s.A)(this,t,[e])).onMouseEnter=function(){n.props.isItemFreezed||n.setState({showMenu:!0,highlight:!0})},n.onMouseLeave=function(){n.props.isItemFreezed||n.setState({showMenu:!1,highlight:!1})},n.toggleUserDropdown=function(){n.setState({userDropdownOpen:!n.state.userDropdownOpen})},n.renderUser=function(e){return e.user_email?(0,g.jsxs)("span",{children:[(0,g.jsx)("a",{href:h.Yc+"org/useradmin/info/"+e.user_email+"/",children:e.user_name})," ",(0,g.jsxs)(De.A,{size:"sm",isOpen:n.state.userDropdownOpen,toggle:n.toggleUserDropdown,className:n.state.highlight?"":"vh",tag:"span",children:[(0,g.jsx)(Se.A,{tag:"i",className:"sf-dropdown-toggle sf3-font-more sf3-font"}),(0,g.jsx)(Pe.A,{children:(0,g.jsxs)(Me.A,{onClick:n.props.filterUser.bind(n,e.user_email),children:[(0,h.AP)("Only Show")," ",(0,g.jsx)("span",{className:"font-weight-bold",children:e.user_name})]})})]})]}):(0,h.AP)("Anonymous User")},n.renderType=function(e){return-1!=e.indexOf("web")&&(e="web"),-1!=e.indexOf("api")&&(e="api"),-1!=e.indexOf("share-link")&&(e="share link"),e},n.toggleRepoDropdown=function(){n.setState({repoDropdownOpen:!n.state.repoDropdownOpen})},n.renderRepo=function(e){var t="Deleted";return e.repo_name&&(t=e.repo_name),(0,g.jsxs)("span",{children:[(0,g.jsx)("span",{children:t}),e.repo_name&&(0,g.jsxs)(De.A,{size:"sm",isOpen:n.state.repoDropdownOpen,toggle:n.toggleRepoDropdown,className:n.state.highlight?"":"vh",children:[(0,g.jsx)(Se.A,{tag:"i",className:"sf-dropdown-toggle sf3-font-more sf3-font"}),(0,g.jsx)(Pe.A,{children:(0,g.jsxs)(Me.A,{size:"sm",onClick:n.props.filterRepo.bind(n,e.repo_name),children:[(0,h.AP)("Only Show")," ",(0,g.jsx)("span",{className:"font-weight-bold",children:e.repo_name})]})})]})]})},n.state={highlight:!1,showMenu:!1,isItemMenuShow:!1,userDropdownOpen:!1,repoDropdownOpen:!1},n}return(0,a.A)(t,e),(0,r.A)(t,[{key:"render",value:function(){var e=this.props.fileEvent;return this.props.userSelected&&e.user_email!==this.props.userSelected||this.props.repoSelected&&e.repo_name!==this.props.repoSelected?null:(0,g.jsxs)("tr",{className:this.state.highlight?"tr-highlight":"",onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave,children:[(0,g.jsx)("td",{children:this.renderUser(e)}),(0,g.jsx)("td",{children:this.renderType(e.type)}),(0,g.jsx)("td",{children:e.ip}),(0,g.jsx)("td",{children:v()(e.time).format("YYYY-MM-DD HH:mm:ss")}),(0,g.jsx)("td",{children:this.renderRepo(e)}),(0,g.jsx)("td",{children:(0,g.jsx)("span",{title:e.file_path,children:e.file_name})})]})}}])}(o.Component),Jn=$n;v().locale(h.vV);var ei=(0,r.A)((function e(t){(0,i.A)(this,e),this.repo_id=t.repo_id,this.description=t.description,this.repo_name=t.repo_name,this.user_name=t.user_name,this.user_email=t.user_email,this.repo_encrypted=t.repo_encrypted,this.repo_commit_id=t.repo_commit_id,this.user_contact_email=t.user_contact_email,this.time=v()(t.time).format("YYYY-MM-DD HH:mm:ss")})),ti=function(e){function t(e){var n;return(0,i.A)(this,t),(n=(0,s.A)(this,t,[e])).renderContentItem=function(e){var t="";t+='<ul class="list-group list-group-flush">';for(var n=0,i=e.length;n<i;n++)t+='<li class="list-group-item">'+e[n]+"</li>";return{__html:t+="</ul>"}},n.renderContent=function(){return n.state.newfile.length>0?(0,g.jsxs)("div",{children:[(0,g.jsx)("h4",{children:(0,h.AP)("New files")}),(0,g.jsx)("p",{children:n.state.time}),(0,g.jsx)("div",{dangerouslySetInnerHTML:n.renderContentItem(n.state.newfile)})]}):n.state.removed.length>0?(0,g.jsxs)("div",{children:[(0,g.jsx)("h4",{children:(0,h.AP)("Deleted files")}),(0,g.jsx)("p",{children:n.state.time}),(0,g.jsx)("div",{dangerouslySetInnerHTML:n.renderContentItem(n.state.removed)})]}):n.state.renamed.length>0?(0,g.jsxs)("div",{children:[(0,g.jsx)("h4",{children:(0,h.AP)("Renamed or Moved files")}),(0,g.jsx)("p",{children:n.state.time}),(0,g.jsx)("div",{dangerouslySetInnerHTML:n.renderContentItem(n.state.renamed)})]}):n.state.modified.length>0?(0,g.jsxs)("div",{children:[(0,g.jsx)("h4",{children:(0,h.AP)("Modified files")}),(0,g.jsx)("p",{children:n.state.time}),(0,g.jsx)("div",{dangerouslySetInnerHTML:n.renderContentItem(n.state.modified)})]}):n.state.newdir.length>0?(0,g.jsxs)("div",{children:[(0,g.jsx)("h4",{children:(0,h.AP)("New directories")}),(0,g.jsx)("p",{children:n.state.time}),(0,g.jsx)("div",{dangerouslySetInnerHTML:n.renderContentItem(n.state.newdir)})]}):n.state.deldir.length>0?(0,g.jsxs)("div",{children:[(0,g.jsx)("h4",{children:(0,h.AP)("Deleted directories")}),(0,g.jsx)("p",{children:n.state.time}),(0,g.jsx)("div",{dangerouslySetInnerHTML:n.renderContentItem(n.state.deldir)})]}):void 0},n.state={time:"",renamed:[],deldir:[],modified:[],newdir:[],newfile:[],removed:[]},n}return(0,a.A)(t,e),(0,r.A)(t,[{key:"componentDidMount",value:function(){var e=this;N.k.orgAdminGetFileUpdateDetail(this.props.repoID,this.props.commitID).then((function(t){e.setState({time:t.data.date_time,renamed:e.state.renamed.concat(t.data.renamed),deldir:e.state.deldir.concat(t.data.deldir),modified:e.state.modified.concat(t.data.modified),newdir:e.state.newdir.concat(t.data.newdir),newfile:e.state.newfile.concat(t.data.new),removed:e.state.removed.concat(t.data.removed)})})).catch((function(e){var t=T.Aq.getErrorMsg(e);E.A.danger(t)}))}},{key:"render",value:function(){return(0,g.jsxs)(Le.A,{isOpen:!0,toggle:this.props.toggleCancel,children:[(0,g.jsx)(Re.A,{toggle:this.props.toggleCancel,children:(0,h.AP)("Modification Details")}),(0,g.jsx)(Ee.A,{children:this.renderContent()})]})}}])}(o.Component);v().locale(h.vV);var ni=function(e){function t(e){var n;return(0,i.A)(this,t),(n=(0,s.A)(this,t,[e])).initData=function(e,t,i){N.k.orgAdminListFileUpdate(e,t,i).then((function(e){var t=e.data.log_list.map((function(e){return new ei(e)}));n.setState({eventList:t,pageNext:e.data.page_next,page:e.data.page})})).catch((function(e){var t=T.Aq.getErrorMsg(e);E.A.danger(t)}))},n.onChangePageNum=function(e,t){e.preventDefault();var i=n.state.page;1==t?i+=1:i-=1;var r=n.state.userSelected,s=n.state.repoSelected;n.initData(r,s,i)},n.toggleCancelDetail=function(){n.setState({showDetails:!n.state.showDetails})},n.onDetails=function(e,t){e.preventDefault(),n.setState({showDetails:!n.state.showDetails,repoID:t.repo_id,commitID:t.repo_commit_id})},n.filterUser=function(e){n.setState({userSelected:e})},n.filterRepo=function(e){n.setState({repoSelected:e})},n.state={page:1,pageNext:!1,eventList:[],userSelected:"",repoSelected:"",isItemFreezed:!1,showDetails:!1,repoID:"",commitID:""},n}return(0,a.A)(t,e),(0,r.A)(t,[{key:"componentDidMount",value:function(){var e=this.state.page,t=this.state.userSelected,n=this.state.repoSelected;this.initData(t,n,e)}},{key:"render",value:function(){var e=this,t=this.state.eventList;return(0,g.jsxs)("div",{className:"cur-view-content",children:[(this.state.userSelected||this.state.repoSelected)&&(0,g.jsxs)(o.Fragment,{children:[this.state.userSelected&&(0,g.jsxs)("span",{className:"audit-unselect-item",onClick:this.filterUser.bind(this,null),children:[(0,g.jsx)("span",{className:"no-deco",children:this.state.userSelected})," \u2716"]}),this.state.repoSelected&&(0,g.jsxs)("span",{className:"audit-unselect-item",onClick:this.filterRepo.bind(this,null),children:[(0,g.jsx)("span",{className:"no-deco",children:this.state.repoSelected})," \u2716"]})]}),(0,g.jsxs)("table",{children:[(0,g.jsx)("thead",{children:(0,g.jsxs)("tr",{children:[(0,g.jsx)("th",{width:"25%",children:(0,h.AP)("User")}),(0,g.jsx)("th",{width:"17%",children:(0,h.AP)("Date")}),(0,g.jsx)("th",{width:"25%",children:(0,h.AP)("Library")}),(0,g.jsx)("th",{width:"33%",children:(0,h.AP)("Action")})]})}),(0,g.jsx)("tbody",{children:t.map((function(t,n){return(0,g.jsx)(ii,{fileEvent:t,isItemFreezed:e.state.isItemFreezed,onDetails:e.onDetails,filterUser:e.filterUser,filterRepo:e.filterRepo,userSelected:e.state.userSelected,repoSelected:e.state.repoSelected},n)}))})]}),(0,g.jsxs)("div",{className:"paginator",children:[1!=this.state.page&&(0,g.jsx)("a",{href:"#",onClick:function(t){return e.onChangePageNum(t,-1)},children:(0,h.AP)("Previous")}),1!=this.state.page&&this.state.pageNext&&(0,g.jsx)("span",{children:" | "}),this.state.pageNext&&(0,g.jsx)("a",{href:"#",onClick:function(t){return e.onChangePageNum(t,1)},children:(0,h.AP)("Next")})]}),this.state.showDetails&&(0,g.jsx)(Te.A,{children:(0,g.jsx)(ti,{repoID:this.state.repoID,commitID:this.state.commitID,toggleCancel:this.toggleCancelDetail})})]})}}])}(o.Component),ii=function(e){function t(e){var n;return(0,i.A)(this,t),(n=(0,s.A)(this,t,[e])).onMouseEnter=function(){n.props.isItemFreezed||n.setState({showMenu:!0,highlight:!0})},n.onMouseLeave=function(){n.props.isItemFreezed||n.setState({showMenu:!1,highlight:!1})},n.toggleUserDropdown=function(){n.setState({userDropdownOpen:!n.state.userDropdownOpen})},n.renderUser=function(e){return e.user_email?(0,g.jsxs)("span",{children:[(0,g.jsx)("a",{href:h.Yc+"org/useradmin/info/"+e.user_email+"/",children:e.user_name})," ",(0,g.jsxs)(De.A,{size:"sm",isOpen:n.state.userDropdownOpen,toggle:n.toggleUserDropdown,className:n.state.highlight?"":"vh",tag:"span",children:[(0,g.jsx)(Se.A,{tag:"i",className:"sf-dropdown-toggle sf3-font-more sf3-font"}),(0,g.jsx)(Pe.A,{children:(0,g.jsxs)(Me.A,{onClick:n.props.filterUser.bind(n,e.user_email),children:[(0,h.AP)("Only Show")," ",(0,g.jsx)("span",{className:"font-weight-bold",children:e.user_name})]})})]})]}):(0,h.AP)("Anonymous User")},n.toggleRepoDropdown=function(){n.setState({repoDropdownOpen:!n.state.repoDropdownOpen})},n.renderRepo=function(e){var t="Deleted";return e.repo_name&&(t=e.repo_name),(0,g.jsxs)("span",{children:[(0,g.jsx)("span",{children:t}),e.repo_name&&(0,g.jsxs)(De.A,{size:"sm",isOpen:n.state.repoDropdownOpen,toggle:n.toggleRepoDropdown,className:n.state.highlight?"":"vh",children:[(0,g.jsx)(Se.A,{tag:"i",className:"sf-dropdown-toggle sf3-font-more sf3-font"}),(0,g.jsx)(Pe.A,{children:(0,g.jsxs)(Me.A,{size:"sm",onClick:n.props.filterRepo.bind(n,e.repo_name),children:[(0,h.AP)("Only Show")," ",(0,g.jsx)("span",{className:"font-weight-bold",children:e.repo_name})]})})]})]})},n.renderAction=function(e){return e.repo_encrypted||!e.repo_id?(0,g.jsx)("td",{children:e.description}):(0,g.jsxs)("td",{children:[e.description,(0,g.jsx)("a",{className:"font-weight-normal text-muted ml-1",href:"#",onClick:function(t){return n.props.onDetails(t,e)},children:(0,h.AP)("Details")})]})},n.state={highlight:!1,showMenu:!1,isItemMenuShow:!1,userDropdownOpen:!1,repoDropdownOpen:!1},n}return(0,a.A)(t,e),(0,r.A)(t,[{key:"render",value:function(){var e=this.props.fileEvent;return this.props.userSelected&&e.user_email!==this.props.userSelected||this.props.repoSelected&&e.repo_name!==this.props.repoSelected?null:(0,g.jsxs)("tr",{className:this.state.highlight?"tr-highlight":"",onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave,children:[(0,g.jsx)("td",{children:this.renderUser(e)}),(0,g.jsx)("td",{children:v()(e.time).format("YYYY-MM-DD HH:mm:ss")}),(0,g.jsx)("td",{children:this.renderRepo(e)}),this.renderAction(e)]})}}])}(o.Component),ri=ni;v().locale(h.vV);var si=(0,r.A)((function e(t){(0,i.A)(this,e),this.from_user_name=t.from_user_name,this.from_user_email=t.from_user_email,this.from_user_contact_email=t.from_user_contact_email,this.to_user_email=t.to_user_email,this.to_user_name=t.to_user_name,this.to_user_contact_email=t.to_user_contact_email,this.to_group_name=t.to_group_name,this.to_group_id=t.to_group_id,this.type=t.type,this.repo_id=t.repo_id,this.repo_name=t.repo_name,this.folder_name=t.folder_name,this.folder_path=t.folder_path,this.time=v()(t.time).format("YYYY-MM-DD HH:mm:ss"),this.permission=t.permission}));v().locale(h.vV);var ai=function(e){function t(e){var n;return(0,i.A)(this,t),(n=(0,s.A)(this,t,[e])).initData=function(e,t,i){N.k.orgAdminListPermAudit(e,t,i).then((function(e){var t=e.data.log_list.map((function(e){return new si(e)}));n.setState({eventList:t,pageNext:e.data.page_next,page:e.data.page})})).catch((function(e){var t=T.Aq.getErrorMsg(e);E.A.danger(t)}))},n.onChangePageNum=function(e,t){e.preventDefault();var i=n.state.page;1==t?i+=1:i-=1,n.initData(i)},n.filterUser=function(e){n.setState({userSelected:e})},n.state={page:1,pageNext:!1,eventList:[],userSelected:"",repoSelected:"",isItemFreezed:!1},n}return(0,a.A)(t,e),(0,r.A)(t,[{key:"componentDidMount",value:function(){var e=this.state.page,t=this.state.userSelected,n=this.state.repoSelected;this.initData(t,n,e)}},{key:"render",value:function(){var e=this,t=this.state.eventList;return(0,g.jsxs)("div",{className:"cur-view-content",children:[this.state.userSelected&&(0,g.jsxs)("span",{className:"audit-unselect-item",onClick:this.filterUser.bind(this,null),children:[(0,g.jsx)("span",{className:"no-deco",children:this.state.userSelected})," \u2716"]}),(0,g.jsxs)("table",{children:[(0,g.jsx)("thead",{children:(0,g.jsxs)("tr",{children:[(0,g.jsx)("th",{width:"18%",children:(0,h.AP)("Share From")}),(0,g.jsx)("th",{width:"15%",children:(0,h.AP)("Share To")}),(0,g.jsx)("th",{width:"8%",children:(0,h.AP)("Actions")}),(0,g.jsx)("th",{width:"13%",children:(0,h.AP)("Permission")}),(0,g.jsx)("th",{width:"15%",children:(0,h.AP)("Library")}),(0,g.jsx)("th",{width:"15%",children:(0,h.AP)("Folder")}),(0,g.jsx)("th",{width:"16%",children:(0,h.AP)("Date")})]})}),(0,g.jsx)("tbody",{children:t.map((function(t,n){return(0,g.jsx)(oi,{permEvent:t,isItemFreezed:e.state.isItemFreezed,filterUser:e.filterUser,userSelected:e.state.userSelected},n)}))})]}),(0,g.jsxs)("div",{className:"paginator",children:[1!=this.state.page&&(0,g.jsx)("a",{href:"#",onClick:function(t){return e.onChangePageNum(t,-1)},children:(0,h.AP)("Previous")}),1!=this.state.page&&this.state.pageNext&&(0,g.jsx)("span",{children:" | "}),this.state.pageNext&&(0,g.jsx)("a",{href:"#",onClick:function(t){return e.onChangePageNum(t,1)},children:(0,h.AP)("Next")})]})]})}}])}(o.Component),oi=function(e){function t(e){var n;return(0,i.A)(this,t),(n=(0,s.A)(this,t,[e])).onMouseEnter=function(){n.props.isItemFreezed||n.setState({showMenu:!0,highlight:!0})},n.onMouseLeave=function(){n.props.isItemFreezed||n.setState({showMenu:!1,highlight:!1})},n.renderFromUser=function(e){return e.from_user_email?(0,g.jsxs)("span",{children:[(0,g.jsx)("a",{href:h.Yc+"org/useradmin/info/"+e.from_user_email+"/",children:e.from_user_name})," ",(0,g.jsxs)(De.A,{size:"sm",isOpen:n.state.userDropdownOpen,toggle:n.toggleUserDropdown,className:n.state.highlight?"":"vh",tag:"span",children:[(0,g.jsx)(Se.A,{tag:"i",className:"sf-dropdown-toggle sf3-font-more sf3-font"}),(0,g.jsx)(Pe.A,{children:(0,g.jsxs)(Me.A,{onClick:n.props.filterUser.bind(n,e.from_user_email),children:[(0,h.AP)("Only Show")," ",(0,g.jsx)("span",{className:"font-weight-bold",children:e.from_user_name})]})})]})]}):(0,h.AP)("Anonymous User")},n.toggleUserDropdown=function(){n.setState({userDropdownOpen:!n.state.userDropdownOpen})},n.renderToUser=function(e){return-1!=e.type.indexOf("public")?(0,g.jsx)("a",{href:h.Yc+"org/",children:(0,h.AP)("Organization")}):-1!=e.type.indexOf("group")?e.to_group_name?(0,g.jsx)("a",{href:h.Yc+"org/groupadmin/"+e.to_group_id+"/",children:e.to_group_name}):"Deleted":-1!=e.type.indexOf("user")?(0,g.jsx)("a",{href:h.Yc+"org/useradmin/info/"+e.to_user_email+"/",children:e.to_user_name}):void 0},n.renderType=function(e){return-1!=e.indexOf("add")&&(e="Add"),-1!=e.indexOf("modify")&&(e="Modify"),-1!=e.indexOf("delete")&&(e="Delete"),e},n.renderRepo=function(e){var t="Deleted";return e.repo_name&&(t=e.repo_name),t},n.renderFolder=function(e){var t="/";return e&&(t=e),t},n.state={highlight:!1,showMenu:!1,isItemMenuShow:!1,userDropdownOpen:!1},n}return(0,a.A)(t,e),(0,r.A)(t,[{key:"render",value:function(){var e=this.props.permEvent;return this.props.userSelected&&e.from_user_email!==this.props.userSelected?null:(0,g.jsxs)("tr",{className:this.state.highlight?"tr-highlight":"",onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave,children:[(0,g.jsx)("td",{children:this.renderFromUser(e)}),(0,g.jsx)("td",{children:this.renderToUser(e)}),(0,g.jsx)("td",{children:this.renderType(e.type)}),(0,g.jsx)("td",{children:T.Aq.sharePerms(e.permission)}),(0,g.jsx)("td",{children:this.renderRepo(e)}),(0,g.jsx)("td",{children:this.renderFolder(e.folder_name)}),(0,g.jsx)("td",{children:v()(e.time).format("YYYY-MM-DD HH:mm:ss")})]})}}])}(o.Component),li=ai,ci=n(67243),hi=n.n(ci),ui=function(e){function t(e){return(0,i.A)(this,t),(0,s.A)(this,t,[e])}return(0,a.A)(t,e),(0,r.A)(t,[{key:"render",value:function(){var e=this.props,t=e.headingText,n=e.children;return(0,g.jsxs)("div",{className:"mb-4",children:[(0,g.jsx)("h4",{className:"border-bottom font-weight-normal mb-2 pb-1",children:t}),n]})}}])}(o.Component),di=ui,gi=function(e){function t(e){var n;return(0,i.A)(this,t),(n=(0,s.A)(this,t,[e])).toggleBtns=function(){n.setState({isBtnsShown:!n.state.isBtnsShown})},n.hideBtns=function(){n.state.isBtnsShown&&(n.props.value!=n.state.value&&n.setState({value:n.props.value}),n.toggleBtns())},n.onInputChange=function(e){n.setState({value:e.target.value})},n.onSubmit=function(){var e=n.props.changeType,t=n.state.value.trim();t!=n.props.value&&n.props.changeValue(e,t),n.toggleBtns()},n.state={isBtnsShown:!1,value:n.props.value},n}return(0,a.A)(t,e),(0,r.A)(t,[{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.setState({value:e.value})}},{key:"render",value:function(){var e=this.state,t=e.isBtnsShown,n=e.value,i=this.props.displayName,r=this.props.isCertificate?"textarea":"text";return(0,g.jsx)(o.Fragment,{children:(0,g.jsxs)(ge.A,{className:"my-4",children:[(0,g.jsx)(pe.A,{md:"3",children:(0,g.jsx)(fe.A,{className:"web-setting-label",children:i})}),(0,g.jsxs)(pe.A,{md:"5",children:[(0,g.jsxs)(Ve.A,{children:[(0,g.jsx)(U.A,{type:r,value:n,onChange:this.onInputChange,onFocus:this.toggleBtns,onBlur:this.hideBtns}),this.props.domainVerified&&(0,g.jsx)(qe.A,{addonType:"append",children:(0,g.jsx)(k.A,{color:"success",className:"border-0",children:(0,h.AP)("Verified")})})]}),this.props.isCertificate&&(0,g.jsxs)("p",{className:"small text-secondary mt-1",children:[(0,h.AP)("Copy the IdP's certificate and paste it here. The certificate format is as follows:"),(0,g.jsx)("br",{}),"-----BEGIN CERTIFICATE-----",(0,g.jsx)("br",{}),"xxxxxxxxxxxxxxxxxxxx",(0,g.jsx)("br",{}),"-----END CERTIFICATE-----"]})]}),(0,g.jsx)(pe.A,{md:"4",children:t&&(0,g.jsxs)(o.Fragment,{children:[(0,g.jsx)(k.A,{color:"primary",className:"sf2-icon-tick web-setting-icon-btn web-setting-icon-btn-submit",onMouseDown:this.onSubmit,title:(0,h.AP)("Submit")}),(0,g.jsx)(k.A,{className:"ml-1 sf2-icon-x2 web-setting-icon-btn web-setting-icon-btn-cancel",title:(0,h.AP)("Cancel")})]})})]})})}}])}(o.Component),pi=function(e){function t(e){var n;return(0,i.A)(this,t),(n=(0,s.A)(this,t,[e])).updateSamlConfig=function(e,t){var i=null,r=null,s=null;"metadataUrl"===e&&(i=t),"domain"===e&&(r=t),"idpCertificate"===e&&(s=t),N.k.orgAdminUpdateSamlConfig(h.Id,i,r,s).then((function(e){n.setState({samlConfigID:e.data.saml_config.id,metadataUrl:e.data.saml_config.metadata_url,domain:e.data.saml_config.domain||"",dnsTxt:e.data.saml_config.dns_txt||"",domainVerified:e.data.saml_config.domain_verified||!1,idpCertificate:e.data.saml_config.idp_certificate||""}),E.A.success((0,h.AP)("SAML config updated"))})).catch((function(e){var t=T.Aq.getErrorMsg(e);E.A.danger(t)}))},n.verifyDomain=function(){var e=n.state.domain;N.k.orgAdminVerifyDomain(h.Id,e).then((function(e){n.setState({domainVerified:e.data.domain_verified}),E.A.success((0,h.AP)("Domain verified"))})).catch((function(e){var t=T.Aq.getErrorMsg(e);E.A.danger(t)}))},n.onCopyValue=function(e){hi()(e),E.A.success((0,h.AP)("Copied"))},n.state={loading:!0,errorMsg:"",samlConfigID:"",metadataUrl:"",domain:"",dnsTxt:"",domainVerified:!1,idpCertificate:""},n}return(0,a.A)(t,e),(0,r.A)(t,[{key:"componentDidMount",value:function(){var e=this;N.k.orgAdminGetSamlConfig(h.Id).then((function(t){e.setState({loading:!1,samlConfigID:t.data.saml_config.id,metadataUrl:t.data.saml_config.metadata_url||"",domain:t.data.saml_config.domain||"",dnsTxt:t.data.saml_config.dns_txt||"",domainVerified:t.data.saml_config.domain_verified||!1,idpCertificate:t.data.saml_config.idp_certificate||""})})).catch((function(t){e.setState({loading:!1,errorMsg:T.Aq.getErrorMsg(t,!0)})}))}},{key:"render",value:function(){var e=this.state,t=e.loading,n=e.errorMsg,i=e.metadataUrl,r=e.domain,s=e.dnsTxt,a=e.domainVerified,l=e.idpCertificate,c="".concat(h.xW,"/org/custom/").concat(h.Id,"/saml2/metadata/"),u="".concat(h.xW,"/org/custom/").concat(h.Id,"/saml2/acs/"),d="".concat(h.xW,"/org/custom/").concat(h.Id,"/saml2/ls/");return(0,g.jsxs)(o.Fragment,{children:[(0,g.jsx)(y,{}),(0,g.jsx)("div",{className:"main-panel-center flex-row",children:(0,g.jsxs)("div",{className:"cur-view-container",children:[(0,g.jsx)("div",{className:"cur-view-path",children:(0,g.jsx)("h3",{className:"sf-heading",children:(0,h.AP)("SAML config")})}),(0,g.jsxs)("div",{className:"cur-view-content container mw-100",children:[t&&(0,g.jsx)(L.A,{}),n&&(0,g.jsx)("p",{className:"error text-center mt-4",children:n}),!t&&!n&&(0,g.jsxs)(o.Fragment,{children:[(0,g.jsxs)(di,{headingText:(0,h.AP)("Configure your Identity Provider"),children:[(0,g.jsx)("p",{className:"text-secondary mt-1",children:(0,h.AP)("Use these values to configure your Identity Provider")}),(0,g.jsxs)(o.Fragment,{children:[(0,g.jsxs)(ge.A,{className:"my-4",children:[(0,g.jsx)(pe.A,{md:"3",children:(0,g.jsx)(fe.A,{className:"web-setting-label",children:"Identifier (Entity ID)"})}),(0,g.jsx)(pe.A,{md:"5",children:(0,g.jsxs)(Ve.A,{children:[(0,g.jsx)(U.A,{type:"text",readOnly:!0,value:c}),(0,g.jsx)(qe.A,{addonType:"append",children:(0,g.jsx)(k.A,{color:"primary",onClick:this.onCopyValue.bind(this,c),className:"border-0",children:(0,h.AP)("Copy")})})]})})]}),(0,g.jsxs)(ge.A,{className:"my-4",children:[(0,g.jsx)(pe.A,{md:"3",children:(0,g.jsx)(fe.A,{className:"web-setting-label",children:"Reply URL (Assertion Consumer Service URL)"})}),(0,g.jsx)(pe.A,{md:"5",children:(0,g.jsxs)(Ve.A,{children:[(0,g.jsx)(U.A,{type:"text",readOnly:!0,value:u}),(0,g.jsx)(qe.A,{addonType:"append",children:(0,g.jsx)(k.A,{color:"primary",onClick:this.onCopyValue.bind(this,u),className:"border-0",children:(0,h.AP)("Copy")})})]})})]}),(0,g.jsxs)(ge.A,{className:"my-4",children:[(0,g.jsx)(pe.A,{md:"3",children:(0,g.jsx)(fe.A,{className:"web-setting-label",children:"Sign on URL"})}),(0,g.jsx)(pe.A,{md:"5",children:(0,g.jsxs)(Ve.A,{children:[(0,g.jsx)(U.A,{type:"text",readOnly:!0,value:h.xW}),(0,g.jsx)(qe.A,{addonType:"append",children:(0,g.jsx)(k.A,{color:"primary",onClick:this.onCopyValue.bind(this,h.xW),className:"border-0",children:(0,h.AP)("Copy")})})]})})]}),(0,g.jsxs)(ge.A,{className:"my-4",children:[(0,g.jsx)(pe.A,{md:"3",children:(0,g.jsx)(fe.A,{className:"web-setting-label",children:"Logout URL"})}),(0,g.jsx)(pe.A,{md:"5",children:(0,g.jsxs)(Ve.A,{children:[(0,g.jsx)(U.A,{type:"text",readOnly:!0,value:d}),(0,g.jsx)(qe.A,{addonType:"append",children:(0,g.jsx)(k.A,{color:"primary",onClick:this.onCopyValue.bind(this,d),className:"border-0",children:(0,h.AP)("Copy")})})]})})]})]})]}),(0,g.jsxs)(di,{headingText:(0,h.AP)("Configure Seafile"),children:[(0,g.jsx)("p",{className:"text-secondary mt-1",children:(0,h.AP)("Use information from your Identity Provider to configure Seafile")}),(0,g.jsxs)(o.Fragment,{children:[(0,g.jsx)(gi,{value:i,changeType:"metadataUrl",changeValue:this.updateSamlConfig,displayName:"SAML App Federation Metadata URL"}),(0,g.jsx)(gi,{value:l,changeType:"idpCertificate",changeValue:this.updateSamlConfig,displayName:(0,h.AP)("Certificate"),isCertificate:!0})]})]}),(0,g.jsxs)(di,{headingText:(0,h.AP)("Verify Domain"),children:[(0,g.jsx)("p",{className:"text-secondary mt-1",children:(0,h.AP)("Create a DNS TXT record to confirm the ownership of your Email Domain.")}),(0,g.jsxs)(o.Fragment,{children:[(0,g.jsx)(gi,{value:r,changeType:"domain",changeValue:this.updateSamlConfig,displayName:(0,h.AP)("Email Domain"),domainVerified:a}),(0,g.jsxs)(ge.A,{className:"my-4",children:[(0,g.jsx)(pe.A,{md:"3",children:(0,g.jsx)(fe.A,{className:"web-setting-label",children:(0,h.AP)("DNS TXT Value")})}),(0,g.jsxs)(pe.A,{md:"5",children:[(0,g.jsxs)(Ve.A,{children:[(0,g.jsx)(U.A,{type:"text",readOnly:!0,value:s}),s&&!a&&(0,g.jsx)(qe.A,{addonType:"append",children:(0,g.jsx)(k.A,{color:"primary",onClick:this.onCopyValue.bind(this,s),className:"border-0",children:(0,h.AP)("Copy")})})]}),s&&!a&&(0,g.jsx)("p",{className:"small text-secondary mt-1",children:(0,h.AP)("Copy the domain DNS TXT and add it to your domain's DNS records, then click the button to verify domain ownership. You must verify the ownership of domain before Single Sign-On.")})]}),(0,g.jsx)(pe.A,{md:"4",children:r&&s&&!a&&(0,g.jsx)(k.A,{color:"secondary",onClick:this.verifyDomain,children:(0,h.AP)("Verify")})})]})]})]})]})]})]})})]})}}])}(o.Component),fi=n(7039),mi=function(e){function t(){return(0,i.A)(this,t),(0,s.A)(this,t,arguments)}return(0,a.A)(t,e),(0,r.A)(t,[{key:"render",value:function(){return(0,g.jsxs)(o.Fragment,{children:[(0,g.jsx)(y,{onCloseSidePanel:this.props.onCloseSidePanel}),(0,g.jsx)("div",{className:"main-panel-center flex-row",children:(0,g.jsxs)("div",{className:"cur-view-container",children:[(0,g.jsx)("div",{className:"cur-view-path",children:(0,g.jsx)("h2",{className:"sf-heading",children:"\u4ed8\u8d39\u7ba1\u7406"})}),(0,g.jsx)("div",{className:"pt-2 h-100 o-auto",children:(0,g.jsx)(fi.A,{isOrgContext:!0})})]})})]})}}])}(o.Component),vi=mi,xi=(n(16322),n(18291),n(66169),function(e){function t(e){var n;return(0,i.A)(this,t),(n=(0,s.A)(this,t,[e])).onCloseSidePanel=function(){n.setState({isSidePanelClosed:!n.state.isSidePanelClosed})},n.tabItemClick=function(e){n.setState({currentTab:e})},n.state={isSidePanelClosed:!1,currentTab:"users"},n}return(0,a.A)(t,e),(0,r.A)(t,[{key:"componentDidMount",value:function(){var e=window.location.href.split("/"),t=e[e.length-2];-1!=location.href.indexOf("".concat(h.Yc,"org/useradmin"))&&(t="users"),-1!=location.href.indexOf("".concat(h.Yc,"org/statistics-admin/"))&&(t="statistics-admin"),-1!=location.href.indexOf("".concat(h.Yc,"org/deviceadmin/"))&&(t="deviceadmin"),-1!=location.href.indexOf("".concat(h.Yc,"org/groupadmin"))&&(t="groupadmin"),-1!=location.href.indexOf("".concat(h.Yc,"org/departmentadmin"))&&(t="departmentadmin"),-1!=location.href.indexOf("".concat(h.Yc,"org/logadmin/"))&&"logadmin"===t&&(t="fileaudit"),this.setState({currentTab:t})}},{key:"render",value:function(){var e=this.state,t=e.isSidePanelClosed,n=e.currentTab;return(0,g.jsxs)("div",{id:"main",className:"org-admin",children:[(0,g.jsx)(f,{isSidePanelClosed:t,onCloseSidePanel:this.onCloseSidePanel,currentTab:n,tabItemClick:this.tabItemClick}),(0,g.jsx)("div",{className:"main-panel",children:(0,g.jsxs)(c.Ix,{className:"reach-router",children:[(0,g.jsx)(vn,{path:h.Yc+"org/info/"}),(0,g.jsx)(F,{path:h.Yc+"org/statistics-admin/file/"}),(0,g.jsx)(z,{path:h.Yc+"org/statistics-admin/total-storage/"}),(0,g.jsx)(G,{path:h.Yc+"org/statistics-admin/active-users/"}),(0,g.jsx)(H,{path:h.Yc+"org/statistics-admin/traffic/"}),(0,g.jsx)(Q,{path:h.Yc+"org/statistics-admin/reports/"}),(0,g.jsx)(re,{path:h.Yc+"org/deviceadmin/desktop-devices/"}),(0,g.jsx)(se,{path:h.Yc+"org/deviceadmin/mobile-devices/"}),(0,g.jsx)(he,{path:h.Yc+"org/deviceadmin/devices-errors/"}),(0,g.jsx)(ke,{path:h.Yc+"org/web-settings"}),(0,g.jsx)(vi,{path:h.Yc+"org/subscription",onCloseSidePanel:this.onCloseSidePanel}),(0,g.jsx)($e,{path:h.Yc+"org/useradmin"}),(0,g.jsx)(Je,{path:h.Yc+"org/useradmin/search-users"}),(0,g.jsx)(rt,{path:h.Yc+"org/useradmin/admins/"}),(0,g.jsx)(At,{path:h.Yc+"org/useradmin/info/:email/"}),(0,g.jsx)(wt,{path:h.Yc+"org/useradmin/info/:email/repos/"}),(0,g.jsx)(Ct,{path:h.Yc+"org/useradmin/info/:email/shared-repos/"}),(0,g.jsx)(Rt,{path:h.Yc+"org/groupadmin"}),(0,g.jsx)(zt,{path:h.Yc+"org/groupadmin/search-groups"}),(0,g.jsx)(Wt,{path:h.Yc+"org/groupadmin/:groupID/"}),(0,g.jsx)(Kt,{path:h.Yc+"org/groupadmin/:groupID/repos/"}),(0,g.jsx)(tn,{path:h.Yc+"org/groupadmin/:groupID/members/"}),(0,g.jsx)(cn,{path:h.Yc+"org/repoadmin"}),(0,g.jsx)(gn,{path:h.Yc+"org/repoadmin-trash"}),(0,g.jsx)(bn,{path:h.Yc+"org/publinkadmin"}),(0,g.jsxs)(kn,{path:h.Yc+"org/departmentadmin",children:[(0,g.jsx)(Nn,{path:"/"}),(0,g.jsx)(Rn,{path:"groups/:groupID"}),(0,g.jsx)(Bn,{path:"groups/:groupID/members"}),(0,g.jsx)(Wn,{path:"groups/:groupID/libraries"})]}),(0,g.jsxs)(Xn,{path:h.Yc+"org/logadmin",currentTab:n,tabItemClick:this.tabItemClick,children:[(0,g.jsx)(Jn,{path:"/"}),(0,g.jsx)(ri,{path:"file-update"}),(0,g.jsx)(li,{path:"perm-audit"})]}),h.bH&&(0,g.jsx)(pi,{path:h.Yc+"org/samlconfig/"})]})})]})}}])}(o.Component));l.render((0,g.jsx)(xi,{}),document.getElementById("wrapper"))},30016:function(e,t,n){var i=n(23029),r=n(92901),s=n(39874),a=n(85501),o=n(9950),l=n(85077),c=n(90441),h=n(44414),u=function(e){function t(e){var n;return(0,i.A)(this,t),(n=(0,s.A)(this,t,[e])).onInputChange=function(e){var t=e.target.checked,i=t?1:0;n.setState({inputChecked:t}),n.props.saveSetting(n.props.keyText,i)},n.state={inputChecked:n.props.value},n}return(0,a.A)(t,e),(0,r.A)(t,[{key:"render",value:function(){var e=this.state.inputChecked,t=this.props,n=t.helpTip,i=t.displayName;return(0,h.jsx)(c.A,{displayName:i,mainContent:(0,h.jsxs)(o.Fragment,{children:[(0,h.jsx)(l.A,{className:"ml-0",checked:e,type:"checkbox",onChange:this.onInputChange}),(0,h.jsx)("p",{className:"ml-4",children:n})]})})}}])}(o.Component);t.A=u},90441:function(e,t,n){var i=n(23029),r=n(92901),s=n(39874),a=n(85501),o=n(9950),l=n(70349),c=n(23931),h=n(55627),u=n(44414),d=function(e){function t(e){return(0,i.A)(this,t),(0,s.A)(this,t,[e])}return(0,a.A)(t,e),(0,r.A)(t,[{key:"render",value:function(){var e=this.props,t=e.helpTip,n=e.displayName,i=e.mainContent,r=e.extraContent;return(0,u.jsx)(o.Fragment,{children:(0,u.jsxs)(l.A,{className:"my-4",children:[(0,u.jsx)(c.A,{md:"3",children:(0,u.jsx)(h.A,{className:"web-setting-label",children:n})}),(0,u.jsxs)(c.A,{md:"5",children:[i,t&&(0,u.jsx)("p",{className:"small text-secondary mt-1",children:t})]}),(0,u.jsx)(c.A,{md:"4",children:r})]})})}}])}(o.Component);t.A=d},65478:function(e,t,n){n.d(t,{PP:function(){return As},t1:function(){return Sr},s$:function(){return ns},ZT:function(){return $n},No:function(){return qr},kc:function(){return ks},FN:function(){return Hr},hE:function(){return rs},m_:function(){return vs}});n(89379);var i=n(39874),r=n(5182),s=n(85501),a=n(5544),o=n(64467),l=n(24765),c=n(60436),h=n(23029),u=n(92901);var d="undefined"===typeof window?function(e){return e()}:window.requestAnimationFrame;function g(e,t,n){var i=n||function(e){return Array.prototype.slice.call(e)},r=!1,s=[];return function(){for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];s=i(a),r||(r=!0,d.call(window,(function(){r=!1,e.apply(t,s)})))}}var p=function(e){return"start"===e?"left":"end"===e?"right":"center"},f=function(e,t,n){return"start"===e?t:"end"===e?n:(t+n)/2};function m(){}var v=function(){var e=0;return function(){return e++}}();function x(e){return null===e||"undefined"===typeof e}function A(e){if(Array.isArray&&Array.isArray(e))return!0;var t=Object.prototype.toString.call(e);return"[object"===t.substr(0,7)&&"Array]"===t.substr(-6)}function y(e){return null!==e&&"[object Object]"===Object.prototype.toString.call(e)}var b=function(e){return("number"===typeof e||e instanceof Number)&&isFinite(+e)};function j(e,t){return b(e)?e:t}function k(e,t){return"undefined"===typeof e?t:e}var _=function(e,t){return"string"===typeof e&&e.endsWith("%")?parseFloat(e)/100*t:+e};function w(e,t,n){if(e&&"function"===typeof e.call)return e.apply(n,t)}function D(e,t,n,i){var r,s,a;if(A(e))if(s=e.length,i)for(r=s-1;r>=0;r--)t.call(n,e[r],r);else for(r=0;r<s;r++)t.call(n,e[r],r);else if(y(e))for(s=(a=Object.keys(e)).length,r=0;r<s;r++)t.call(n,e[a[r]],a[r])}function S(e,t){var n,i,r,s;if(!e||!t||e.length!==t.length)return!1;for(n=0,i=e.length;n<i;++n)if(r=e[n],s=t[n],r.datasetIndex!==s.datasetIndex||r.index!==s.index)return!1;return!0}function P(e){if(A(e))return e.map(P);if(y(e)){for(var t=Object.create(null),n=Object.keys(e),i=n.length,r=0;r<i;++r)t[n[r]]=P(e[n[r]]);return t}return e}function M(e){return-1===["__proto__","prototype","constructor"].indexOf(e)}function C(e,t,n,i){if(M(e)){var r=t[e],s=n[e];y(r)&&y(s)?N(r,s,i):t[e]=P(s)}}function N(e,t,n){var i=A(t)?t:[t],r=i.length;if(!y(e))return e;for(var s=(n=n||{}).merger||C,a=0;a<r;++a)if(y(t=i[a]))for(var o=Object.keys(t),l=0,c=o.length;l<c;++l)s(o[l],e,t,n);return e}function I(e,t){return N(e,t,{merger:O})}function O(e,t,n){if(M(e)){var i=t[e],r=n[e];y(i)&&y(r)?I(i,r):Object.prototype.hasOwnProperty.call(t,e)||(t[e]=P(r))}}function T(e,t){var n=e.indexOf(".",t);return-1===n?e.length:n}function L(e,t){if(""===t)return e;for(var n=0,i=T(t,n);e&&i>n;)e=e[t.substr(n,i-n)],i=T(t,n=i+1);return e}function R(e){return e.charAt(0).toUpperCase()+e.slice(1)}var E=function(e){return"undefined"!==typeof e},F=function(e){return"function"===typeof e},z=Math.PI,U=2*z,B=U+z,Y=Number.POSITIVE_INFINITY,V=z/180,q=z/2,W=z/4,H=2*z/3,G=Math.log10,Q=Math.sign;function X(e){var t=Math.round(e);e=$(e,t,e/1e3)?t:e;var n=Math.pow(10,Math.floor(G(e))),i=e/n;return(i<=1?1:i<=2?2:i<=5?5:10)*n}function K(e){return!isNaN(parseFloat(e))&&isFinite(e)}function $(e,t,n){return Math.abs(e-t)<n}function Z(e,t,n){var i,r,s;for(i=0,r=e.length;i<r;i++)s=e[i][n],isNaN(s)||(t.min=Math.min(t.min,s),t.max=Math.max(t.max,s))}function J(e){return e*(z/180)}function ee(e){return e*(180/z)}function te(e){if(b(e)){for(var t=1,n=0;Math.round(e*t)/t!==e;)t*=10,n++;return n}}function ne(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function ie(e,t){return(e-t+B)%U-z}function re(e){return(e%U+U)%U}function se(e,t,n,i){var r=re(e),s=re(t),a=re(n),o=re(s-r),l=re(a-r),c=re(r-s),h=re(r-a);return r===s||r===a||i&&s===a||o>l&&c<h}function ae(e,t,n){return Math.max(t,Math.min(n,e))}var oe=function(e){return 0===e||1===e},le=function(e,t,n){return-Math.pow(2,10*(e-=1))*Math.sin((e-t)*U/n)},ce=function(e,t,n){return Math.pow(2,-10*e)*Math.sin((e-t)*U/n)+1},he={linear:function(e){return e},easeInQuad:function(e){return e*e},easeOutQuad:function(e){return-e*(e-2)},easeInOutQuad:function(e){return(e/=.5)<1?.5*e*e:-.5*(--e*(e-2)-1)},easeInCubic:function(e){return e*e*e},easeOutCubic:function(e){return(e-=1)*e*e+1},easeInOutCubic:function(e){return(e/=.5)<1?.5*e*e*e:.5*((e-=2)*e*e+2)},easeInQuart:function(e){return e*e*e*e},easeOutQuart:function(e){return-((e-=1)*e*e*e-1)},easeInOutQuart:function(e){return(e/=.5)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2)},easeInQuint:function(e){return e*e*e*e*e},easeOutQuint:function(e){return(e-=1)*e*e*e*e+1},easeInOutQuint:function(e){return(e/=.5)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2)},easeInSine:function(e){return 1-Math.cos(e*q)},easeOutSine:function(e){return Math.sin(e*q)},easeInOutSine:function(e){return-.5*(Math.cos(z*e)-1)},easeInExpo:function(e){return 0===e?0:Math.pow(2,10*(e-1))},easeOutExpo:function(e){return 1===e?1:1-Math.pow(2,-10*e)},easeInOutExpo:function(e){return oe(e)?e:e<.5?.5*Math.pow(2,10*(2*e-1)):.5*(2-Math.pow(2,-10*(2*e-1)))},easeInCirc:function(e){return e>=1?e:-(Math.sqrt(1-e*e)-1)},easeOutCirc:function(e){return Math.sqrt(1-(e-=1)*e)},easeInOutCirc:function(e){return(e/=.5)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)},easeInElastic:function(e){return oe(e)?e:le(e,.075,.3)},easeOutElastic:function(e){return oe(e)?e:ce(e,.075,.3)},easeInOutElastic:function(e){var t=.1125;return oe(e)?e:e<.5?.5*le(2*e,t,.45):.5+.5*ce(2*e-1,t,.45)},easeInBack:function(e){var t=1.70158;return e*e*((t+1)*e-t)},easeOutBack:function(e){var t=1.70158;return(e-=1)*e*((t+1)*e+t)+1},easeInOutBack:function(e){var t=1.70158;return(e/=.5)<1?e*e*((1+(t*=1.525))*e-t)*.5:.5*((e-=2)*e*((1+(t*=1.525))*e+t)+2)},easeInBounce:function(e){return 1-he.easeOutBounce(1-e)},easeOutBounce:function(e){var t=7.5625,n=2.75;return e<1/n?t*e*e:e<2/n?t*(e-=1.5/n)*e+.75:e<2.5/n?t*(e-=2.25/n)*e+.9375:t*(e-=2.625/n)*e+.984375},easeInOutBounce:function(e){return e<.5?.5*he.easeInBounce(2*e):.5*he.easeOutBounce(2*e-1)+.5}},ue={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},de="0123456789ABCDEF",ge=function(e){return de[15&e]},pe=function(e){return de[(240&e)>>4]+de[15&e]},fe=function(e){return(240&e)>>4===(15&e)};function me(e){var t=function(e){return fe(e.r)&&fe(e.g)&&fe(e.b)&&fe(e.a)}(e)?ge:pe;return e?"#"+t(e.r)+t(e.g)+t(e.b)+(e.a<255?t(e.a):""):e}function ve(e){return e+.5|0}var xe=function(e,t,n){return Math.max(Math.min(e,n),t)};function Ae(e){return xe(ve(2.55*e),0,255)}function ye(e){return xe(ve(255*e),0,255)}function be(e){return xe(ve(e/2.55)/100,0,1)}function je(e){return xe(ve(100*e),0,100)}var ke=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;var _e=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function we(e,t,n){var i=t*Math.min(n,1-n),r=function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(t+e/30)%12;return n-i*Math.max(Math.min(r-3,9-r,1),-1)};return[r(0),r(8),r(4)]}function De(e,t,n){var i=function(i){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(i+e/60)%6;return n-n*t*Math.max(Math.min(r,4-r,1),0)};return[i(5),i(3),i(1)]}function Se(e,t,n){var i,r=we(e,1,.5);for(t+n>1&&(t*=i=1/(t+n),n*=i),i=0;i<3;i++)r[i]*=1-t-n,r[i]+=t;return r}function Pe(e){var t,n,i,r=e.r/255,s=e.g/255,a=e.b/255,o=Math.max(r,s,a),l=Math.min(r,s,a),c=(o+l)/2;return o!==l&&(i=o-l,n=c>.5?i/(2-o-l):i/(o+l),t=60*(t=o===r?(s-a)/i+(s<a?6:0):o===s?(a-r)/i+2:(r-s)/i+4)+.5),[0|t,n||0,c]}function Me(e,t,n,i){return(Array.isArray(t)?e(t[0],t[1],t[2]):e(t,n,i)).map(ye)}function Ce(e,t,n){return Me(we,e,t,n)}function Ne(e){return(e%360+360)%360}function Ie(e){var t,n=_e.exec(e),i=255;if(n){n[5]!==t&&(i=n[6]?Ae(+n[5]):ye(+n[5]));var r=Ne(+n[2]),s=+n[3]/100,a=+n[4]/100;return{r:(t="hwb"===n[1]?function(e,t,n){return Me(Se,e,t,n)}(r,s,a):"hsv"===n[1]?function(e,t,n){return Me(De,e,t,n)}(r,s,a):Ce(r,s,a))[0],g:t[1],b:t[2],a:i}}}var Oe,Te={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},Le={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function Re(e){Oe||((Oe=function(){var e,t,n,i,r,s={},a=Object.keys(Le),o=Object.keys(Te);for(e=0;e<a.length;e++){for(i=r=a[e],t=0;t<o.length;t++)n=o[t],r=r.replace(n,Te[n]);n=parseInt(Le[i],16),s[r]=[n>>16&255,n>>8&255,255&n]}return s}()).transparent=[0,0,0,0]);var t=Oe[e.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:4===t.length?t[3]:255}}function Ee(e,t,n){if(e){var i=Pe(e);i[t]=Math.max(0,Math.min(i[t]+i[t]*n,0===t?360:1)),i=Ce(i),e.r=i[0],e.g=i[1],e.b=i[2]}}function Fe(e,t){return e?Object.assign(t||{},e):e}function ze(e){var t={r:0,g:0,b:0,a:255};return Array.isArray(e)?e.length>=3&&(t={r:e[0],g:e[1],b:e[2],a:255},e.length>3&&(t.a=ye(e[3]))):(t=Fe(e,{r:0,g:0,b:0,a:1})).a=ye(t.a),t}function Ue(e){return"r"===e.charAt(0)?function(e){var t,n,i,r=ke.exec(e),s=255;if(r){if(r[7]!==t){var a=+r[7];s=255&(r[8]?Ae(a):255*a)}return t=+r[1],n=+r[3],i=+r[5],{r:t=255&(r[2]?Ae(t):t),g:n=255&(r[4]?Ae(n):n),b:i=255&(r[6]?Ae(i):i),a:s}}}(e):Ie(e)}var Be=function(){function e(t){if((0,h.A)(this,e),t instanceof e)return t;var n,i=typeof t;"object"===i?n=ze(t):"string"===i&&(n=function(e){var t,n=e.length;return"#"===e[0]&&(4===n||5===n?t={r:255&17*ue[e[1]],g:255&17*ue[e[2]],b:255&17*ue[e[3]],a:5===n?17*ue[e[4]]:255}:7!==n&&9!==n||(t={r:ue[e[1]]<<4|ue[e[2]],g:ue[e[3]]<<4|ue[e[4]],b:ue[e[5]]<<4|ue[e[6]],a:9===n?ue[e[7]]<<4|ue[e[8]]:255})),t}(t)||Re(t)||Ue(t)),this._rgb=n,this._valid=!!n}return(0,u.A)(e,[{key:"valid",get:function(){return this._valid}},{key:"rgb",get:function(){var e=Fe(this._rgb);return e&&(e.a=be(e.a)),e},set:function(e){this._rgb=ze(e)}},{key:"rgbString",value:function(){return this._valid?(e=this._rgb)&&(e.a<255?"rgba(".concat(e.r,", ").concat(e.g,", ").concat(e.b,", ").concat(be(e.a),")"):"rgb(".concat(e.r,", ").concat(e.g,", ").concat(e.b,")")):this._rgb;var e}},{key:"hexString",value:function(){return this._valid?me(this._rgb):this._rgb}},{key:"hslString",value:function(){return this._valid?function(e){if(e){var t=Pe(e),n=t[0],i=je(t[1]),r=je(t[2]);return e.a<255?"hsla(".concat(n,", ").concat(i,"%, ").concat(r,"%, ").concat(be(e.a),")"):"hsl(".concat(n,", ").concat(i,"%, ").concat(r,"%)")}}(this._rgb):this._rgb}},{key:"mix",value:function(e,t){var n=this;if(e){var i,r=n.rgb,s=e.rgb,a=t===i?.5:t,o=2*a-1,l=r.a-s.a,c=((o*l===-1?o:(o+l)/(1+o*l))+1)/2;i=1-c,r.r=255&c*r.r+i*s.r+.5,r.g=255&c*r.g+i*s.g+.5,r.b=255&c*r.b+i*s.b+.5,r.a=a*r.a+(1-a)*s.a,n.rgb=r}return n}},{key:"clone",value:function(){return new e(this.rgb)}},{key:"alpha",value:function(e){return this._rgb.a=ye(e),this}},{key:"clearer",value:function(e){return this._rgb.a*=1-e,this}},{key:"greyscale",value:function(){var e=this._rgb,t=ve(.3*e.r+.59*e.g+.11*e.b);return e.r=e.g=e.b=t,this}},{key:"opaquer",value:function(e){return this._rgb.a*=1+e,this}},{key:"negate",value:function(){var e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}},{key:"lighten",value:function(e){return Ee(this._rgb,2,e),this}},{key:"darken",value:function(e){return Ee(this._rgb,2,-e),this}},{key:"saturate",value:function(e){return Ee(this._rgb,1,e),this}},{key:"desaturate",value:function(e){return Ee(this._rgb,1,-e),this}},{key:"rotate",value:function(e){return function(e,t){var n=Pe(e);n[0]=Ne(n[0]+t),n=Ce(n),e.r=n[0],e.g=n[1],e.b=n[2]}(this._rgb,e),this}}])}();function Ye(e){return new Be(e)}var Ve=function(e){return e instanceof CanvasGradient||e instanceof CanvasPattern};function qe(e){return Ve(e)?e:Ye(e)}function We(e){return Ve(e)?e:Ye(e).saturate(.5).darken(.1).hexString()}var He=Object.create(null),Ge=Object.create(null);function Qe(e,t){if(!t)return e;for(var n=t.split("."),i=0,r=n.length;i<r;++i){var s=n[i];e=e[s]||(e[s]=Object.create(null))}return e}function Xe(e,t,n){return"string"===typeof t?N(Qe(e,t),n):N(Qe(e,""),t)}var Ke=function(){return(0,u.A)((function e(t){(0,h.A)(this,e),this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=function(e){return e.chart.platform.getDevicePixelRatio()},this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=function(e,t){return We(t.backgroundColor)},this.hoverBorderColor=function(e,t){return We(t.borderColor)},this.hoverColor=function(e,t){return We(t.color)},this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.describe(t)}),[{key:"set",value:function(e,t){return Xe(this,e,t)}},{key:"get",value:function(e){return Qe(this,e)}},{key:"describe",value:function(e,t){return Xe(Ge,e,t)}},{key:"override",value:function(e,t){return Xe(He,e,t)}},{key:"route",value:function(e,t,n,i){var r=Qe(this,e),s=Qe(this,n),a="_"+t;Object.defineProperties(r,(0,o.default)((0,o.default)({},a,{value:r[t],writable:!0}),t,{enumerable:!0,get:function(){var e=this[a],t=s[i];return y(e)?Object.assign({},t,e):k(e,t)},set:function(e){this[a]=e}}))}}])}(),$e=new Ke({_scriptable:function(e){return!e.startsWith("on")},_indexable:function(e){return"events"!==e},hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}});function Ze(e,t,n,i,r){var s=t[r];return s||(s=t[r]=e.measureText(r).width,n.push(r)),s>i&&(i=s),i}function Je(e,t,n,i){var r=(i=i||{}).data=i.data||{},s=i.garbageCollect=i.garbageCollect||[];i.font!==t&&(r=i.data={},s=i.garbageCollect=[],i.font=t),e.save(),e.font=t;var a,o,l,c,h,u=0,d=n.length;for(a=0;a<d;a++)if(void 0!==(c=n[a])&&null!==c&&!0!==A(c))u=Ze(e,r,s,u,c);else if(A(c))for(o=0,l=c.length;o<l;o++)void 0===(h=c[o])||null===h||A(h)||(u=Ze(e,r,s,u,h));e.restore();var g=s.length/2;if(g>n.length){for(a=0;a<g;a++)delete r[s[a]];s.splice(0,g)}return u}function et(e,t,n){var i=e.currentDevicePixelRatio,r=0!==n?Math.max(n/2,.5):0;return Math.round((t-r)*i)/i+r}function tt(e,t){(t=t||e.getContext("2d")).save(),t.resetTransform(),t.clearRect(0,0,e.width,e.height),t.restore()}function nt(e,t,n,i){var r,s,a,o,l,c=t.pointStyle,h=t.rotation,u=t.radius,d=(h||0)*V;if(c&&"object"===typeof c&&("[object HTMLImageElement]"===(r=c.toString())||"[object HTMLCanvasElement]"===r))return e.save(),e.translate(n,i),e.rotate(d),e.drawImage(c,-c.width/2,-c.height/2,c.width,c.height),void e.restore();if(!(isNaN(u)||u<=0)){switch(e.beginPath(),c){default:e.arc(n,i,u,0,U),e.closePath();break;case"triangle":e.moveTo(n+Math.sin(d)*u,i-Math.cos(d)*u),d+=H,e.lineTo(n+Math.sin(d)*u,i-Math.cos(d)*u),d+=H,e.lineTo(n+Math.sin(d)*u,i-Math.cos(d)*u),e.closePath();break;case"rectRounded":o=u-(l=.516*u),s=Math.cos(d+W)*o,a=Math.sin(d+W)*o,e.arc(n-s,i-a,l,d-z,d-q),e.arc(n+a,i-s,l,d-q,d),e.arc(n+s,i+a,l,d,d+q),e.arc(n-a,i+s,l,d+q,d+z),e.closePath();break;case"rect":if(!h){o=Math.SQRT1_2*u,e.rect(n-o,i-o,2*o,2*o);break}d+=W;case"rectRot":s=Math.cos(d)*u,a=Math.sin(d)*u,e.moveTo(n-s,i-a),e.lineTo(n+a,i-s),e.lineTo(n+s,i+a),e.lineTo(n-a,i+s),e.closePath();break;case"crossRot":d+=W;case"cross":s=Math.cos(d)*u,a=Math.sin(d)*u,e.moveTo(n-s,i-a),e.lineTo(n+s,i+a),e.moveTo(n+a,i-s),e.lineTo(n-a,i+s);break;case"star":s=Math.cos(d)*u,a=Math.sin(d)*u,e.moveTo(n-s,i-a),e.lineTo(n+s,i+a),e.moveTo(n+a,i-s),e.lineTo(n-a,i+s),d+=W,s=Math.cos(d)*u,a=Math.sin(d)*u,e.moveTo(n-s,i-a),e.lineTo(n+s,i+a),e.moveTo(n+a,i-s),e.lineTo(n-a,i+s);break;case"line":s=Math.cos(d)*u,a=Math.sin(d)*u,e.moveTo(n-s,i-a),e.lineTo(n+s,i+a);break;case"dash":e.moveTo(n,i),e.lineTo(n+Math.cos(d)*u,i+Math.sin(d)*u)}e.fill(),t.borderWidth>0&&e.stroke()}}function it(e,t,n){return n=n||.5,!t||e&&e.x>t.left-n&&e.x<t.right+n&&e.y>t.top-n&&e.y<t.bottom+n}function rt(e,t){e.save(),e.beginPath(),e.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),e.clip()}function st(e){e.restore()}function at(e,t,n,i,r){if(!t)return e.lineTo(n.x,n.y);if("middle"===r){var s=(t.x+n.x)/2;e.lineTo(s,t.y),e.lineTo(s,n.y)}else"after"===r!==!!i?e.lineTo(t.x,n.y):e.lineTo(n.x,t.y);e.lineTo(n.x,n.y)}function ot(e,t,n,i){if(!t)return e.lineTo(n.x,n.y);e.bezierCurveTo(i?t.cp1x:t.cp2x,i?t.cp1y:t.cp2y,i?n.cp2x:n.cp1x,i?n.cp2y:n.cp1y,n.x,n.y)}function lt(e,t,n,i,r){var s,a,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},l=A(t)?t:[t],c=o.strokeWidth>0&&""!==o.strokeColor;for(e.save(),e.font=r.string,function(e,t){t.translation&&e.translate(t.translation[0],t.translation[1]);x(t.rotation)||e.rotate(t.rotation);t.color&&(e.fillStyle=t.color);t.textAlign&&(e.textAlign=t.textAlign);t.textBaseline&&(e.textBaseline=t.textBaseline)}(e,o),s=0;s<l.length;++s)a=l[s],c&&(o.strokeColor&&(e.strokeStyle=o.strokeColor),x(o.strokeWidth)||(e.lineWidth=o.strokeWidth),e.strokeText(a,n,i,o.maxWidth)),e.fillText(a,n,i,o.maxWidth),ct(e,n,i,a,o),i+=r.lineHeight;e.restore()}function ct(e,t,n,i,r){if(r.strikethrough||r.underline){var s=e.measureText(i),a=t-s.actualBoundingBoxLeft,o=t+s.actualBoundingBoxRight,l=n-s.actualBoundingBoxAscent,c=n+s.actualBoundingBoxDescent,h=r.strikethrough?(l+c)/2:c;e.strokeStyle=e.fillStyle,e.beginPath(),e.lineWidth=r.decorationWidth||2,e.moveTo(a,h),e.lineTo(o,h),e.stroke()}}function ht(e,t){var n=t.x,i=t.y,r=t.w,s=t.h,a=t.radius;e.arc(n+a.topLeft,i+a.topLeft,a.topLeft,-q,z,!0),e.lineTo(n,i+s-a.bottomLeft),e.arc(n+a.bottomLeft,i+s-a.bottomLeft,a.bottomLeft,z,q,!0),e.lineTo(n+r-a.bottomRight,i+s),e.arc(n+r-a.bottomRight,i+s-a.bottomRight,a.bottomRight,q,0,!0),e.lineTo(n+r,i+a.topRight),e.arc(n+r-a.topRight,i+a.topRight,a.topRight,0,-q,!0),e.lineTo(n+a.topLeft,i)}var ut=new RegExp(/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/),dt=new RegExp(/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/);function gt(e,t){var n=(""+e).match(ut);if(!n||"normal"===n[1])return 1.2*t;switch(e=+n[2],n[3]){case"px":return e;case"%":e/=100}return t*e}function pt(e,t){var n,i={},r=y(t),s=r?Object.keys(t):t,a=y(e)?r?function(n){return k(e[n],e[t[n]])}:function(t){return e[t]}:function(){return e},o=(0,l.A)(s);try{for(o.s();!(n=o.n()).done;){var c=n.value;i[c]=+a(c)||0}}catch(h){o.e(h)}finally{o.f()}return i}function ft(e){return pt(e,{top:"y",right:"x",bottom:"y",left:"x"})}function mt(e){return pt(e,["topLeft","topRight","bottomLeft","bottomRight"])}function vt(e){var t=ft(e);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function xt(e,t){e=e||{},t=t||$e.font;var n=k(e.size,t.size);"string"===typeof n&&(n=parseInt(n,10));var i=k(e.style,t.style);i&&!(""+i).match(dt)&&(console.warn('Invalid font style specified: "'+i+'"'),i="");var r={family:k(e.family,t.family),lineHeight:gt(k(e.lineHeight,t.lineHeight),n),size:n,style:i,weight:k(e.weight,t.weight),string:""};return r.string=function(e){return!e||x(e.size)||x(e.family)?null:(e.style?e.style+" ":"")+(e.weight?e.weight+" ":"")+e.size+"px "+e.family}(r),r}function At(e,t,n,i){var r,s,a,o=!0;for(r=0,s=e.length;r<s;++r)if(void 0!==(a=e[r])&&(void 0!==t&&"function"===typeof a&&(a=a(t),o=!1),void 0!==n&&A(a)&&(a=a[n%a.length],o=!1),void 0!==a))return i&&!o&&(i.cacheable=!1),a}function yt(e,t){return Object.assign(Object.create(e),t)}function bt(e,t,n){n=n||function(n){return e[n]<t};for(var i,r=e.length-1,s=0;r-s>1;)n(i=s+r>>1)?s=i:r=i;return{lo:s,hi:r}}var jt=function(e,t,n){return bt(e,n,(function(i){return e[i][t]<n}))},kt=function(e,t,n){return bt(e,n,(function(i){return e[i][t]>=n}))};var _t=["push","pop","shift","splice","unshift"];function wt(e,t){var n=e._chartjs;if(n){var i=n.listeners,r=i.indexOf(t);-1!==r&&i.splice(r,1),i.length>0||(_t.forEach((function(t){delete e[t]})),delete e._chartjs)}}function Dt(e){var t,n,i=new Set;for(t=0,n=e.length;t<n;++t)i.add(e[t]);return i.size===n?e:Array.from(i)}function St(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[""],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e,i=arguments.length>3?arguments[3]:void 0,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:function(){return e[0]};E(i)||(i=Ft("_fallback",e));var s=(0,o.default)((0,o.default)((0,o.default)((0,o.default)((0,o.default)((0,o.default)((0,o.default)({},Symbol.toStringTag,"Object"),"_cacheable",!0),"_scopes",e),"_rootScopes",n),"_fallback",i),"_getTarget",r),"override",(function(r){return St([r].concat((0,c.A)(e)),t,n,i)}));return new Proxy(s,{deleteProperty:function(t,n){return delete t[n],delete t._keys,delete e[0][n],!0},get:function(n,i){return It(n,i,(function(){return function(e,t,n,i){var r,s,a=(0,l.A)(t);try{for(a.s();!(s=a.n()).done;){var o=s.value;if(r=Ft(Ct(o,e),n),E(r))return Nt(e,r)?Rt(n,i,e,r):r}}catch(c){a.e(c)}finally{a.f()}}(i,t,e,n)}))},getOwnPropertyDescriptor:function(e,t){return Reflect.getOwnPropertyDescriptor(e._scopes[0],t)},getPrototypeOf:function(){return Reflect.getPrototypeOf(e[0])},has:function(e,t){return zt(e).includes(t)},ownKeys:function(e){return zt(e)},set:function(e,t,n){return(e._storage||(e._storage=r()))[t]=n,delete e[t],delete e._keys,!0}})}function Pt(e,t,n,i){var r={_cacheable:!1,_proxy:e,_context:t,_subProxy:n,_stack:new Set,_descriptors:Mt(e,i),setContext:function(t){return Pt(e,t,n,i)},override:function(r){return Pt(e.override(r),t,n,i)}};return new Proxy(r,{deleteProperty:function(t,n){return delete t[n],delete e[n],!0},get:function(e,t,n){return It(e,t,(function(){return function(e,t,n){var i=e._proxy,r=e._context,s=e._subProxy,a=e._descriptors,o=i[t];F(o)&&a.isScriptable(t)&&(o=function(e,t,n,i){var r=n._proxy,s=n._context,a=n._subProxy,o=n._stack;if(o.has(e))throw new Error("Recursion detected: "+Array.from(o).join("->")+"->"+e);o.add(e),t=t(s,a||i),o.delete(e),y(t)&&(t=Rt(r._scopes,r,e,t));return t}(t,o,e,n));A(o)&&o.length&&(o=function(e,t,n,i){var r=n._proxy,s=n._context,a=n._subProxy,o=n._descriptors;if(E(s.index)&&i(e))t=t[s.index%t.length];else if(y(t[0])){var c=t,h=r._scopes.filter((function(e){return e!==c}));t=[];var u,d=(0,l.A)(c);try{for(d.s();!(u=d.n()).done;){var g=Rt(h,r,e,u.value);t.push(Pt(g,s,a&&a[e],o))}}catch(p){d.e(p)}finally{d.f()}}return t}(t,o,e,a.isIndexable));Nt(t,o)&&(o=Pt(o,r,s&&s[t],a));return o}(e,t,n)}))},getOwnPropertyDescriptor:function(t,n){return t._descriptors.allKeys?Reflect.has(e,n)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(e,n)},getPrototypeOf:function(){return Reflect.getPrototypeOf(e)},has:function(t,n){return Reflect.has(e,n)},ownKeys:function(){return Reflect.ownKeys(e)},set:function(t,n,i){return e[n]=i,delete t[n],!0}})}function Mt(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{scriptable:!0,indexable:!0},n=e._scriptable,i=void 0===n?t.scriptable:n,r=e._indexable,s=void 0===r?t.indexable:r,a=e._allKeys;return{allKeys:void 0===a?t.allKeys:a,scriptable:i,indexable:s,isScriptable:F(i)?i:function(){return i},isIndexable:F(s)?s:function(){return s}}}var Ct=function(e,t){return e?e+R(t):t},Nt=function(e,t){return y(t)&&"adapters"!==e};function It(e,t,n){if(Object.prototype.hasOwnProperty.call(e,t))return e[t];var i=n();return e[t]=i,i}function Ot(e,t,n){return F(e)?e(t,n):e}var Tt=function(e,t){return!0===e?t:"string"===typeof e?L(t,e):void 0};function Lt(e,t,n,i){var r,s=(0,l.A)(t);try{for(s.s();!(r=s.n()).done;){var a=r.value,o=Tt(n,a);if(o){e.add(o);var c=Ot(o._fallback,n,o);if(E(c)&&c!==n&&c!==i)return c}else if(!1===o&&E(i)&&n!==i)return null}}catch(h){s.e(h)}finally{s.f()}return!1}function Rt(e,t,n,i){var r=t._rootScopes,s=Ot(t._fallback,n,i),a=[].concat((0,c.A)(e),(0,c.A)(r)),o=new Set;o.add(i);var l=Et(o,a,n,s||n);return null!==l&&((!E(s)||s===n||null!==(l=Et(o,a,s,l)))&&St(Array.from(o),[""],r,s,(function(){return function(e,t,n){var i=e._getTarget();t in i||(i[t]={});var r=i[t];if(A(r)&&y(n))return n;return r}(t,n,i)})))}function Et(e,t,n,i){for(;n;)n=Lt(e,t,n,i);return n}function Ft(e,t){var n,i=(0,l.A)(t);try{for(i.s();!(n=i.n()).done;){var r=n.value;if(r){var s=r[e];if(E(s))return s}}}catch(a){i.e(a)}finally{i.f()}}function zt(e){var t=e._keys;return t||(t=e._keys=function(e){var t,n=new Set,i=(0,l.A)(e);try{for(i.s();!(t=i.n()).done;){var r,s=t.value,a=(0,l.A)(Object.keys(s).filter((function(e){return!e.startsWith("_")})));try{for(a.s();!(r=a.n()).done;){var o=r.value;n.add(o)}}catch(c){a.e(c)}finally{a.f()}}}catch(c){i.e(c)}finally{i.f()}return Array.from(n)}(e._scopes)),t}var Ut=Number.EPSILON||1e-14,Bt=function(e,t){return t<e.length&&!e[t].skip&&e[t]},Yt=function(e){return"x"===e?"y":"x"};function Vt(e,t,n,i){var r=e.skip?t:e,s=t,a=n.skip?t:n,o=ne(s,r),l=ne(a,s),c=o/(o+l),h=l/(o+l),u=i*(c=isNaN(c)?0:c),d=i*(h=isNaN(h)?0:h);return{previous:{x:s.x-u*(a.x-r.x),y:s.y-u*(a.y-r.y)},next:{x:s.x+d*(a.x-r.x),y:s.y+d*(a.y-r.y)}}}function qt(e){var t,n,i,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"x",s=Yt(r),a=e.length,o=Array(a).fill(0),l=Array(a),c=Bt(e,0);for(t=0;t<a;++t)if(n=i,i=c,c=Bt(e,t+1),i){if(c){var h=c[r]-i[r];o[t]=0!==h?(c[s]-i[s])/h:0}l[t]=n?c?Q(o[t-1])!==Q(o[t])?0:(o[t-1]+o[t])/2:o[t-1]:o[t]}!function(e,t,n){for(var i,r,s,a,o,l=e.length,c=Bt(e,0),h=0;h<l-1;++h)o=c,c=Bt(e,h+1),o&&c&&($(t[h],0,Ut)?n[h]=n[h+1]=0:(i=n[h]/t[h],r=n[h+1]/t[h],(a=Math.pow(i,2)+Math.pow(r,2))<=9||(s=3/Math.sqrt(a),n[h]=i*s*t[h],n[h+1]=r*s*t[h])))}(e,o,l),function(e,t){for(var n,i,r,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"x",a=Yt(s),o=e.length,l=Bt(e,0),c=0;c<o;++c)if(i=r,r=l,l=Bt(e,c+1),r){var h=r[s],u=r[a];i&&(n=(h-i[s])/3,r["cp1".concat(s)]=h-n,r["cp1".concat(a)]=u-n*t[c]),l&&(n=(l[s]-h)/3,r["cp2".concat(s)]=h+n,r["cp2".concat(a)]=u+n*t[c])}}(e,l,r)}function Wt(e,t,n){return Math.max(Math.min(e,n),t)}function Ht(e,t,n,i,r){var s,a,o,l;if(t.spanGaps&&(e=e.filter((function(e){return!e.skip}))),"monotone"===t.cubicInterpolationMode)qt(e,r);else{var c=i?e[e.length-1]:e[0];for(s=0,a=e.length;s<a;++s)l=Vt(c,o=e[s],e[Math.min(s+1,a-(i?0:1))%a],t.tension),o.cp1x=l.previous.x,o.cp1y=l.previous.y,o.cp2x=l.next.x,o.cp2y=l.next.y,c=o}t.capBezierPoints&&function(e,t){var n,i,r,s,a,o=it(e[0],t);for(n=0,i=e.length;n<i;++n)a=s,s=o,o=n<i-1&&it(e[n+1],t),s&&(r=e[n],a&&(r.cp1x=Wt(r.cp1x,t.left,t.right),r.cp1y=Wt(r.cp1y,t.top,t.bottom)),o&&(r.cp2x=Wt(r.cp2x,t.left,t.right),r.cp2y=Wt(r.cp2y,t.top,t.bottom)))}(e,n)}function Gt(){return"undefined"!==typeof window&&"undefined"!==typeof document}function Qt(e){var t=e.parentNode;return t&&"[object ShadowRoot]"===t.toString()&&(t=t.host),t}function Xt(e,t,n){var i;return"string"===typeof e?(i=parseInt(e,10),-1!==e.indexOf("%")&&(i=i/100*t.parentNode[n])):i=e,i}var Kt=function(e){return window.getComputedStyle(e,null)};var $t=["top","right","bottom","left"];function Zt(e,t,n){var i={};n=n?"-"+n:"";for(var r=0;r<4;r++){var s=$t[r];i[s]=parseFloat(e[t+"-"+s+n])||0}return i.width=i.left+i.right,i.height=i.top+i.bottom,i}function Jt(e,t){var n=t.canvas,i=t.currentDevicePixelRatio,r=Kt(n),s="border-box"===r.boxSizing,a=Zt(r,"padding"),o=Zt(r,"border","width"),l=function(e,t){var n,i,r=e.native||e,s=r.touches,a=s&&s.length?s[0]:r,o=a.offsetX,l=a.offsetY,c=!1;if(function(e,t,n){return(e>0||t>0)&&(!n||!n.shadowRoot)}(o,l,r.target))n=o,i=l;else{var h=t.getBoundingClientRect();n=a.clientX-h.left,i=a.clientY-h.top,c=!0}return{x:n,y:i,box:c}}(e,n),c=l.x,h=l.y,u=l.box,d=a.left+(u&&o.left),g=a.top+(u&&o.top),p=t.width,f=t.height;return s&&(p-=a.width+o.width,f-=a.height+o.height),{x:Math.round((c-d)/p*n.width/i),y:Math.round((h-g)/f*n.height/i)}}var en=function(e){return Math.round(10*e)/10};function tn(e,t,n,i){var r=Kt(e),s=Zt(r,"margin"),a=Xt(r.maxWidth,e,"clientWidth")||Y,o=Xt(r.maxHeight,e,"clientHeight")||Y,l=function(e,t,n){var i,r;if(void 0===t||void 0===n){var s=Qt(e);if(s){var a=s.getBoundingClientRect(),o=Kt(s),l=Zt(o,"border","width"),c=Zt(o,"padding");t=a.width-c.width-l.width,n=a.height-c.height-l.height,i=Xt(o.maxWidth,s,"clientWidth"),r=Xt(o.maxHeight,s,"clientHeight")}else t=e.clientWidth,n=e.clientHeight}return{width:t,height:n,maxWidth:i||Y,maxHeight:r||Y}}(e,t,n),c=l.width,h=l.height;if("content-box"===r.boxSizing){var u=Zt(r,"border","width"),d=Zt(r,"padding");c-=d.width+u.width,h-=d.height+u.height}return c=Math.max(0,c-s.width),h=Math.max(0,i?Math.floor(c/i):h-s.height),c=en(Math.min(c,a,l.maxWidth)),h=en(Math.min(h,o,l.maxHeight)),c&&!h&&(h=en(c/2)),{width:c,height:h}}function nn(e,t,n){var i=t||1,r=Math.floor(e.height*i),s=Math.floor(e.width*i);e.height=r/i,e.width=s/i;var a=e.canvas;return a.style&&(n||!a.style.height&&!a.style.width)&&(a.style.height="".concat(e.height,"px"),a.style.width="".concat(e.width,"px")),(e.currentDevicePixelRatio!==i||a.height!==r||a.width!==s)&&(e.currentDevicePixelRatio=i,a.height=r,a.width=s,e.ctx.setTransform(i,0,0,i,0,0),!0)}var rn=function(){var e=!1;try{var t={get passive(){return e=!0,!1}};window.addEventListener("test",null,t),window.removeEventListener("test",null,t)}catch(n){}return e}();function sn(e,t){var n=function(e,t){return Kt(e).getPropertyValue(t)}(e,t),i=n&&n.match(/^(\d+)(\.\d+)?px$/);return i?+i[1]:void 0}function an(e,t,n,i){return{x:e.x+n*(t.x-e.x),y:e.y+n*(t.y-e.y)}}function on(e,t,n,i){return{x:e.x+n*(t.x-e.x),y:"middle"===i?n<.5?e.y:t.y:"after"===i?n<1?e.y:t.y:n>0?t.y:e.y}}function ln(e,t,n,i){var r={x:e.cp2x,y:e.cp2y},s={x:t.cp1x,y:t.cp1y},a=an(e,r,n),o=an(r,s,n),l=an(s,t,n),c=an(a,o,n),h=an(o,l,n);return an(c,h,n)}var cn=new Map;function hn(e,t,n){return function(e,t){t=t||{};var n=e+JSON.stringify(t),i=cn.get(n);return i||(i=new Intl.NumberFormat(e,t),cn.set(n,i)),i}(t,n).format(e)}function un(e,t,n){return e?function(e,t){return{x:function(n){return e+e+t-n},setWidth:function(e){t=e},textAlign:function(e){return"center"===e?e:"right"===e?"left":"right"},xPlus:function(e,t){return e-t},leftForLtr:function(e,t){return e-t}}}(t,n):{x:function(e){return e},setWidth:function(e){},textAlign:function(e){return e},xPlus:function(e,t){return e+t},leftForLtr:function(e,t){return e}}}function dn(e,t){var n,i;"ltr"!==t&&"rtl"!==t||(i=[(n=e.canvas.style).getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",t,"important"),e.prevTextDirection=i)}function gn(e,t){void 0!==t&&(delete e.prevTextDirection,e.canvas.style.setProperty("direction",t[0],t[1]))}function pn(e){return"angle"===e?{between:se,compare:ie,normalize:re}:{between:function(e,t,n){return e>=Math.min(t,n)&&e<=Math.max(n,t)},compare:function(e,t){return e-t},normalize:function(e){return e}}}function fn(e){var t=e.start,n=e.end,i=e.count;return{start:t%i,end:n%i,loop:e.loop&&(n-t+1)%i===0,style:e.style}}function mn(e,t,n){if(!n)return[e];for(var i,r,s,a=n.property,o=n.start,l=n.end,c=t.length,h=pn(a),u=h.compare,d=h.between,g=h.normalize,p=function(e,t,n){var i,r,s=n.property,a=n.start,o=n.end,l=pn(s),c=l.between,h=l.normalize,u=t.length,d=e.start,g=e.end,p=e.loop;if(p){for(d+=u,g+=u,i=0,r=u;i<r&&c(h(t[d%u][s]),a,o);++i)d--,g--;d%=u,g%=u}return g<d&&(g+=u),{start:d,end:g,loop:p,style:e.style}}(e,t,n),f=p.start,m=p.end,v=p.loop,x=p.style,A=[],y=!1,b=null,j=function(){return y||d(o,s,i)&&0!==u(o,s)},k=function(){return!y||0===u(l,i)||d(l,s,i)},_=f,w=f;_<=m;++_)(r=t[_%c]).skip||(i=g(r[a]))!==s&&(y=d(i,o,l),null===b&&j()&&(b=0===u(i,o)?_:w),null!==b&&k()&&(A.push(fn({start:b,end:_,loop:v,count:c,style:x})),b=null),w=_,s=i);return null!==b&&A.push(fn({start:b,end:m,loop:v,count:c,style:x})),A}function vn(e,t){for(var n=[],i=e.segments,r=0;r<i.length;r++){var s=mn(i[r],e.points,t);s.length&&n.push.apply(n,(0,c.A)(s))}return n}function xn(e,t,n,i){return i&&i.setContext&&n?function(e,t,n,i){var r=e._chart.getContext(),s=An(e.options),a=e._datasetIndex,o=e.options.spanGaps,c=n.length,h=[],u=s,d=t[0].start,g=d;function p(e,t,i,r){var s=o?-1:1;if(e!==t){for(e+=c;n[e%c].skip;)e-=s;for(;n[t%c].skip;)t+=s;e%c!==t%c&&(h.push({start:e%c,end:t%c,loop:i,style:r}),u=r,d=t%c)}}var f,m=(0,l.A)(t);try{for(m.s();!(f=m.n()).done;){var v=f.value;d=o?d:v.start;var x=n[d%c],A=void 0;for(g=d+1;g<=v.end;g++){var y=n[g%c];yn(A=An(i.setContext(yt(r,{type:"segment",p0:x,p1:y,p0DataIndex:(g-1)%c,p1DataIndex:g%c,datasetIndex:a}))),u)&&p(d,g-1,v.loop,u),x=y,u=A}d<g-1&&p(d,g-1,v.loop,u)}}catch(b){m.e(b)}finally{m.f()}return h}(e,t,n,i):t}function An(e){return{backgroundColor:e.backgroundColor,borderCapStyle:e.borderCapStyle,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderJoinStyle:e.borderJoinStyle,borderWidth:e.borderWidth,borderColor:e.borderColor}}function yn(e,t){return t&&JSON.stringify(e)!==JSON.stringify(t)}var bn=function(){return(0,u.A)((function e(){(0,h.A)(this,e),this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}),[{key:"_notify",value:function(e,t,n,i){var r=t.listeners[i],s=t.duration;r.forEach((function(i){return i({chart:e,initial:t.initial,numSteps:s,currentStep:Math.min(n-t.start,s)})}))}},{key:"_refresh",value:function(){var e=this;this._request||(this._running=!0,this._request=d.call(window,(function(){e._update(),e._request=null,e._running&&e._refresh()})))}},{key:"_update",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Date.now(),n=0;this._charts.forEach((function(i,r){if(i.running&&i.items.length){for(var s,a=i.items,o=a.length-1,l=!1;o>=0;--o)(s=a[o])._active?(s._total>i.duration&&(i.duration=s._total),s.tick(t),l=!0):(a[o]=a[a.length-1],a.pop());l&&(r.draw(),e._notify(r,i,t,"progress")),a.length||(i.running=!1,e._notify(r,i,t,"complete"),i.initial=!1),n+=a.length}})),this._lastDate=t,0===n&&(this._running=!1)}},{key:"_getAnims",value:function(e){var t=this._charts,n=t.get(e);return n||(n={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},t.set(e,n)),n}},{key:"listen",value:function(e,t,n){this._getAnims(e).listeners[t].push(n)}},{key:"add",value:function(e,t){var n;t&&t.length&&(n=this._getAnims(e).items).push.apply(n,(0,c.A)(t))}},{key:"has",value:function(e){return this._getAnims(e).items.length>0}},{key:"start",value:function(e){var t=this._charts.get(e);t&&(t.running=!0,t.start=Date.now(),t.duration=t.items.reduce((function(e,t){return Math.max(e,t._duration)}),0),this._refresh())}},{key:"running",value:function(e){if(!this._running)return!1;var t=this._charts.get(e);return!!(t&&t.running&&t.items.length)}},{key:"stop",value:function(e){var t=this._charts.get(e);if(t&&t.items.length){for(var n=t.items,i=n.length-1;i>=0;--i)n[i].cancel();t.items=[],this._notify(e,t,Date.now(),"complete")}}},{key:"remove",value:function(e){return this._charts.delete(e)}}])}(),jn=new bn,kn="transparent",_n={boolean:function(e,t,n){return n>.5?t:e},color:function(e,t,n){var i=qe(e||kn),r=i.valid&&qe(t||kn);return r&&r.valid?r.mix(i,n).hexString():t},number:function(e,t,n){return e+(t-e)*n}},wn=function(){return(0,u.A)((function e(t,n,i,r){(0,h.A)(this,e);var s=n[i];r=At([t.to,r,s,t.from]);var a=At([t.from,s,r]);this._active=!0,this._fn=t.fn||_n[t.type||typeof a],this._easing=he[t.easing]||he.linear,this._start=Math.floor(Date.now()+(t.delay||0)),this._duration=this._total=Math.floor(t.duration),this._loop=!!t.loop,this._target=n,this._prop=i,this._from=a,this._to=r,this._promises=void 0}),[{key:"active",value:function(){return this._active}},{key:"update",value:function(e,t,n){if(this._active){this._notify(!1);var i=this._target[this._prop],r=n-this._start,s=this._duration-r;this._start=n,this._duration=Math.floor(Math.max(s,e.duration)),this._total+=r,this._loop=!!e.loop,this._to=At([e.to,t,i,e.from]),this._from=At([e.from,i,t])}}},{key:"cancel",value:function(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}},{key:"tick",value:function(e){var t,n=e-this._start,i=this._duration,r=this._prop,s=this._from,a=this._loop,o=this._to;if(this._active=s!==o&&(a||n<i),!this._active)return this._target[r]=o,void this._notify(!0);n<0?this._target[r]=s:(t=n/i%2,t=a&&t>1?2-t:t,t=this._easing(Math.min(1,Math.max(0,t))),this._target[r]=this._fn(s,o,t))}},{key:"wait",value:function(){var e=this._promises||(this._promises=[]);return new Promise((function(t,n){e.push({res:t,rej:n})}))}},{key:"_notify",value:function(e){for(var t=e?"res":"rej",n=this._promises||[],i=0;i<n.length;i++)n[i][t]()}}])}();$e.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0});var Dn=Object.keys($e.animation);$e.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:function(e){return"onProgress"!==e&&"onComplete"!==e&&"fn"!==e}}),$e.set("animations",{colors:{type:"color",properties:["color","borderColor","backgroundColor"]},numbers:{type:"number",properties:["x","y","borderWidth","radius","tension"]}}),$e.describe("animations",{_fallback:"animation"}),$e.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:function(e){return 0|e}}}}});var Sn=function(){return(0,u.A)((function e(t,n){(0,h.A)(this,e),this._chart=t,this._properties=new Map,this.configure(n)}),[{key:"configure",value:function(e){if(y(e)){var t=this._properties;Object.getOwnPropertyNames(e).forEach((function(n){var i=e[n];if(y(i)){for(var r={},s=0,a=Dn;s<a.length;s++){var o=a[s];r[o]=i[o]}(A(i.properties)&&i.properties||[n]).forEach((function(e){e!==n&&t.has(e)||t.set(e,r)}))}}))}}},{key:"_animateOptions",value:function(e,t){var n=t.options,i=function(e,t){if(!t)return;var n=e.options;if(!n)return void(e.options=t);n.$shared&&(e.options=n=Object.assign({},n,{$shared:!1,$animations:{}}));return n}(e,n);if(!i)return[];var r=this._createAnimations(i,n);return n.$shared&&function(e,t){for(var n=[],i=Object.keys(t),r=0;r<i.length;r++){var s=e[i[r]];s&&s.active()&&n.push(s.wait())}return Promise.all(n)}(e.options.$animations,n).then((function(){e.options=n}),(function(){})),r}},{key:"_createAnimations",value:function(e,t){var n,i=this._properties,r=[],s=e.$animations||(e.$animations={}),a=Object.keys(t),o=Date.now();for(n=a.length-1;n>=0;--n){var l=a[n];if("$"!==l.charAt(0))if("options"!==l){var h=t[l],u=s[l],d=i.get(l);if(u){if(d&&u.active()){u.update(d,h,o);continue}u.cancel()}d&&d.duration?(s[l]=u=new wn(d,e,l,h),r.push(u)):e[l]=h}else r.push.apply(r,(0,c.A)(this._animateOptions(e,t)))}return r}},{key:"update",value:function(e,t){if(0!==this._properties.size){var n=this._createAnimations(e,t);return n.length?(jn.add(this._chart,n),!0):void 0}Object.assign(e,t)}}])}();function Pn(e,t){var n=e&&e.options||{},i=n.reverse,r=void 0===n.min?t:0,s=void 0===n.max?t:0;return{start:i?s:r,end:i?r:s}}function Mn(e,t){var n,i,r=[],s=e._getSortedDatasetMetas(t);for(n=0,i=s.length;n<i;++n)r.push(s[n].index);return r}function Cn(e,t,n){var i,r,s,a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},l=e.keys,c="single"===o.mode;if(null!==t){for(i=0,r=l.length;i<r;++i){if((s=+l[i])===n){if(o.all)continue;break}a=e.values[s],b(a)&&(c||0===t||Q(t)===Q(a))&&(t+=a)}return t}}function Nn(e,t){var n=e&&e.options.stacked;return n||void 0===n&&void 0!==t.stack}function In(e,t,n){var i=e[t]||(e[t]={});return i[n]||(i[n]={})}function On(e,t,n,i){var r,s=(0,l.A)(t.getMatchingVisibleMetas(i).reverse());try{for(s.s();!(r=s.n()).done;){var a=r.value,o=e[a.index];if(n&&o>0||!n&&o<0)return a.index}}catch(c){s.e(c)}finally{s.f()}return null}function Tn(e,t){for(var n,i=e.chart,r=e._cachedMeta,s=i._stacks||(i._stacks={}),a=r.iScale,o=r.vScale,l=r.index,c=a.axis,h=o.axis,u=function(e,t,n){return"".concat(e.id,".").concat(t.id,".").concat(n.stack||n.type)}(a,o,r),d=t.length,g=0;g<d;++g){var p=t[g],f=p[c],m=p[h];(n=(p._stacks||(p._stacks={}))[h]=In(s,u,f))[l]=m,n._top=On(n,o,!0,r.type),n._bottom=On(n,o,!1,r.type)}}function Ln(e,t){var n=e.scales;return Object.keys(n).filter((function(e){return n[e].axis===t})).shift()}function Rn(e,t){var n=e.controller.index,i=e.vScale&&e.vScale.axis;if(i){t=t||e._parsed;var r,s=(0,l.A)(t);try{for(s.s();!(r=s.n()).done;){var a=r.value._stacks;if(!a||void 0===a[i]||void 0===a[i][n])return;delete a[i][n]}}catch(o){s.e(o)}finally{s.f()}}}var En=function(e){return"reset"===e||"none"===e},Fn=function(e,t){return t?e:Object.assign({},e)},zn=function(){return(0,u.A)((function e(t,n){(0,h.A)(this,e),this.chart=t,this._ctx=t.ctx,this.index=n,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.$context=void 0,this._syncList=[],this.initialize()}),[{key:"initialize",value:function(){var e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=Nn(e.vScale,e),this.addElements()}},{key:"updateIndex",value:function(e){this.index!==e&&Rn(this._cachedMeta),this.index=e}},{key:"linkScales",value:function(){var e=this.chart,t=this._cachedMeta,n=this.getDataset(),i=function(e,t,n,i){return"x"===e?t:"r"===e?i:n},r=t.xAxisID=k(n.xAxisID,Ln(e,"x")),s=t.yAxisID=k(n.yAxisID,Ln(e,"y")),a=t.rAxisID=k(n.rAxisID,Ln(e,"r")),o=t.indexAxis,l=t.iAxisID=i(o,r,s,a),c=t.vAxisID=i(o,s,r,a);t.xScale=this.getScaleForId(r),t.yScale=this.getScaleForId(s),t.rScale=this.getScaleForId(a),t.iScale=this.getScaleForId(l),t.vScale=this.getScaleForId(c)}},{key:"getDataset",value:function(){return this.chart.data.datasets[this.index]}},{key:"getMeta",value:function(){return this.chart.getDatasetMeta(this.index)}},{key:"getScaleForId",value:function(e){return this.chart.scales[e]}},{key:"_getOtherScale",value:function(e){var t=this._cachedMeta;return e===t.iScale?t.vScale:t.iScale}},{key:"reset",value:function(){this._update("reset")}},{key:"_destroy",value:function(){var e=this._cachedMeta;this._data&&wt(this._data,this),e._stacked&&Rn(e)}},{key:"_dataCheck",value:function(){var e,t,n=this.getDataset(),i=n.data||(n.data=[]),r=this._data;if(y(i))this._data=function(e){var t,n,i,r=Object.keys(e),s=new Array(r.length);for(t=0,n=r.length;t<n;++t)i=r[t],s[t]={x:i,y:e[i]};return s}(i);else if(r!==i){if(r){wt(r,this);var s=this._cachedMeta;Rn(s),s._parsed=[]}i&&Object.isExtensible(i)&&(t=this,(e=i)._chartjs?e._chartjs.listeners.push(t):(Object.defineProperty(e,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[t]}}),_t.forEach((function(t){var n="_onData"+R(t),i=e[t];Object.defineProperty(e,t,{configurable:!0,enumerable:!1,value:function(){for(var t=arguments.length,r=new Array(t),s=0;s<t;s++)r[s]=arguments[s];var a=i.apply(this,r);return e._chartjs.listeners.forEach((function(e){"function"===typeof e[n]&&e[n].apply(e,r)})),a}})})))),this._syncList=[],this._data=i}}},{key:"addElements",value:function(){var e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}},{key:"buildOrUpdateElements",value:function(e){var t=this._cachedMeta,n=this.getDataset(),i=!1;this._dataCheck();var r=t._stacked;t._stacked=Nn(t.vScale,t),t.stack!==n.stack&&(i=!0,Rn(t),t.stack=n.stack),this._resyncElements(e),(i||r!==t._stacked)&&Tn(this,t._parsed)}},{key:"configure",value:function(){var e=this.chart.config,t=e.datasetScopeKeys(this._type),n=e.getOptionScopes(this.getDataset(),t,!0);this.options=e.createResolver(n,this.getContext()),this._parsing=this.options.parsing}},{key:"parse",value:function(e,t){var n,i,r,s=this._cachedMeta,a=this._data,o=s.iScale,l=s._stacked,c=o.axis,h=0===e&&t===a.length||s._sorted,u=e>0&&s._parsed[e-1];if(!1===this._parsing)s._parsed=a,s._sorted=!0,r=a;else{r=A(a[e])?this.parseArrayData(s,a,e,t):y(a[e])?this.parseObjectData(s,a,e,t):this.parsePrimitiveData(s,a,e,t);for(n=0;n<t;++n)s._parsed[n+e]=i=r[n],h&&((null===i[c]||u&&i[c]<u[c])&&(h=!1),u=i);s._sorted=h}l&&Tn(this,r)}},{key:"parsePrimitiveData",value:function(e,t,n,i){var r,s,a,l=e.iScale,c=e.vScale,h=l.axis,u=c.axis,d=l.getLabels(),g=l===c,p=new Array(i);for(r=0,s=i;r<s;++r)a=r+n,p[r]=(0,o.default)((0,o.default)({},h,g||l.parse(d[a],a)),u,c.parse(t[a],a));return p}},{key:"parseArrayData",value:function(e,t,n,i){var r,s,a,o,l=e.xScale,c=e.yScale,h=new Array(i);for(r=0,s=i;r<s;++r)o=t[a=r+n],h[r]={x:l.parse(o[0],a),y:c.parse(o[1],a)};return h}},{key:"parseObjectData",value:function(e,t,n,i){var r,s,a,o,l=e.xScale,c=e.yScale,h=this._parsing,u=h.xAxisKey,d=void 0===u?"x":u,g=h.yAxisKey,p=void 0===g?"y":g,f=new Array(i);for(r=0,s=i;r<s;++r)o=t[a=r+n],f[r]={x:l.parse(L(o,d),a),y:c.parse(L(o,p),a)};return f}},{key:"getParsed",value:function(e){return this._cachedMeta._parsed[e]}},{key:"getDataElement",value:function(e){return this._cachedMeta.data[e]}},{key:"applyStack",value:function(e,t,n){var i=this.chart,r=this._cachedMeta,s=t[e.axis];return Cn({keys:Mn(i,!0),values:t._stacks[e.axis]},s,r.index,{mode:n})}},{key:"updateRangeFromParsed",value:function(e,t,n,i){var r=n[t.axis],s=null===r?NaN:r,a=i&&n._stacks[t.axis];i&&a&&(i.values=a,s=Cn(i,r,this._cachedMeta.index)),e.min=Math.min(e.min,s),e.max=Math.max(e.max,s)}},{key:"getMinMax",value:function(e,t){var n,i,r=this._cachedMeta,s=r._parsed,a=r._sorted&&e===r.iScale,o=s.length,l=this._getOtherScale(e),c=function(e,t,n){return e&&!t.hidden&&t._stacked&&{keys:Mn(n,!0),values:null}}(t,r,this.chart),h={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},u=function(e){var t=e.getUserBounds(),n=t.min,i=t.max,r=t.minDefined,s=t.maxDefined;return{min:r?n:Number.NEGATIVE_INFINITY,max:s?i:Number.POSITIVE_INFINITY}}(l),d=u.min,g=u.max;function p(){var t=(i=s[n])[l.axis];return!b(i[e.axis])||d>t||g<t}for(n=0;n<o&&(p()||(this.updateRangeFromParsed(h,e,i,c),!a));++n);if(a)for(n=o-1;n>=0;--n)if(!p()){this.updateRangeFromParsed(h,e,i,c);break}return h}},{key:"getAllParsedValues",value:function(e){var t,n,i,r=this._cachedMeta._parsed,s=[];for(t=0,n=r.length;t<n;++t)i=r[t][e.axis],b(i)&&s.push(i);return s}},{key:"getMaxOverflow",value:function(){return!1}},{key:"getLabelAndValue",value:function(e){var t=this._cachedMeta,n=t.iScale,i=t.vScale,r=this.getParsed(e);return{label:n?""+n.getLabelForValue(r[n.axis]):"",value:i?""+i.getLabelForValue(r[i.axis]):""}}},{key:"_update",value:function(e){var t=this._cachedMeta;this.configure(),this._cachedDataOpts={},this.update(e||"default"),t._clip=function(e){var t,n,i,r;return y(e)?(t=e.top,n=e.right,i=e.bottom,r=e.left):t=n=i=r=e,{top:t,right:n,bottom:i,left:r,disabled:!1===e}}(k(this.options.clip,function(e,t,n){if(!1===n)return!1;var i=Pn(e,n),r=Pn(t,n);return{top:r.end,right:i.end,bottom:r.start,left:i.start}}(t.xScale,t.yScale,this.getMaxOverflow())))}},{key:"update",value:function(e){}},{key:"draw",value:function(){var e,t=this._ctx,n=this.chart,i=this._cachedMeta,r=i.data||[],s=n.chartArea,a=[],o=this._drawStart||0,l=this._drawCount||r.length-o;for(i.dataset&&i.dataset.draw(t,s,o,l),e=o;e<o+l;++e){var c=r[e];c.hidden||(c.active?a.push(c):c.draw(t,s))}for(e=0;e<a.length;++e)a[e].draw(t,s)}},{key:"getStyle",value:function(e,t){var n=t?"active":"default";return void 0===e&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(n):this.resolveDataElementOptions(e||0,n)}},{key:"getContext",value:function(e,t,n){var i,r=this.getDataset();if(e>=0&&e<this._cachedMeta.data.length){var s=this._cachedMeta.data[e];i=s.$context||(s.$context=function(e,t,n){return yt(e,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:n,index:t,mode:"default",type:"data"})}(this.getContext(),e,s)),i.parsed=this.getParsed(e),i.raw=r.data[e],i.index=i.dataIndex=e}else i=this.$context||(this.$context=function(e,t){return yt(e,{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}(this.chart.getContext(),this.index)),i.dataset=r,i.index=i.datasetIndex=this.index;return i.active=!!t,i.mode=n,i}},{key:"resolveDatasetElementOptions",value:function(e){return this._resolveElementOptions(this.datasetElementType.id,e)}},{key:"resolveDataElementOptions",value:function(e,t){return this._resolveElementOptions(this.dataElementType.id,t,e)}},{key:"_resolveElementOptions",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default",i=arguments.length>2?arguments[2]:void 0,r="active"===n,s=this._cachedDataOpts,a=e+"-"+n,o=s[a],l=this.enableOptionSharing&&E(i);if(o)return Fn(o,l);var c=this.chart.config,h=c.datasetElementScopeKeys(this._type,e),u=r?["".concat(e,"Hover"),"hover",e,""]:[e,""],d=c.getOptionScopes(this.getDataset(),h),g=Object.keys($e.elements[e]),p=c.resolveNamedOptions(d,g,(function(){return t.getContext(i,r)}),u);return p.$shared&&(p.$shared=l,s[a]=Object.freeze(Fn(p,l))),p}},{key:"_resolveAnimations",value:function(e,t,n){var i,r=this.chart,s=this._cachedDataOpts,a="animation-".concat(t),o=s[a];if(o)return o;if(!1!==r.options.animation){var l=this.chart.config,c=l.datasetAnimationScopeKeys(this._type,t),h=l.getOptionScopes(this.getDataset(),c);i=l.createResolver(h,this.getContext(e,n,t))}var u=new Sn(r,i&&i.animations);return i&&i._cacheable&&(s[a]=Object.freeze(u)),u}},{key:"getSharedOptions",value:function(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}},{key:"includeOptions",value:function(e,t){return!t||En(e)||this.chart._animationsDisabled}},{key:"updateElement",value:function(e,t,n,i){En(i)?Object.assign(e,n):this._resolveAnimations(t,i).update(e,n)}},{key:"updateSharedOptions",value:function(e,t,n){e&&!En(t)&&this._resolveAnimations(void 0,t).update(e,n)}},{key:"_setStyle",value:function(e,t,n,i){e.active=i;var r=this.getStyle(t,i);this._resolveAnimations(t,n,i).update(e,{options:!i&&this.getSharedOptions(r)||r})}},{key:"removeHoverStyle",value:function(e,t,n){this._setStyle(e,n,"active",!1)}},{key:"setHoverStyle",value:function(e,t,n){this._setStyle(e,n,"active",!0)}},{key:"_removeDatasetHoverStyle",value:function(){var e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}},{key:"_setDatasetHoverStyle",value:function(){var e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}},{key:"_resyncElements",value:function(e){var t,n=this._data,i=this._cachedMeta.data,r=(0,l.A)(this._syncList);try{for(r.s();!(t=r.n()).done;){var s=(0,a.A)(t.value,3),o=s[0],c=s[1],h=s[2];this[o](c,h)}}catch(p){r.e(p)}finally{r.f()}this._syncList=[];var u=i.length,d=n.length,g=Math.min(d,u);g&&this.parse(0,g),d>u?this._insertElements(u,d-u,e):d<u&&this._removeElements(d,u-d)}},{key:"_insertElements",value:function(e,t){var n,i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=this._cachedMeta,s=r.data,a=e+t,o=function(e){for(e.length+=t,n=e.length-1;n>=a;n--)e[n]=e[n-t]};for(o(s),n=e;n<a;++n)s[n]=new this.dataElementType;this._parsing&&o(r._parsed),this.parse(e,t),i&&this.updateElements(s,e,t,"reset")}},{key:"updateElements",value:function(e,t,n,i){}},{key:"_removeElements",value:function(e,t){var n=this._cachedMeta;if(this._parsing){var i=n._parsed.splice(e,t);n._stacked&&Rn(n,i)}n.data.splice(e,t)}},{key:"_sync",value:function(e){if(this._parsing)this._syncList.push(e);else{var t=(0,a.A)(e,3),n=t[0],i=t[1],r=t[2];this[n](i,r)}}},{key:"_onDataPush",value:function(){var e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}},{key:"_onDataPop",value:function(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}},{key:"_onDataShift",value:function(){this._sync(["_removeElements",0,1])}},{key:"_onDataSplice",value:function(e,t){this._sync(["_removeElements",e,t]),this._sync(["_insertElements",e,arguments.length-2])}},{key:"_onDataUnshift",value:function(){this._sync(["_insertElements",0,arguments.length])}}])}();function Un(e){var t,n,i,r,s=e.iScale,a=function(e,t){if(!e._cache.$bar){for(var n=e.getMatchingVisibleMetas(t),i=[],r=0,s=n.length;r<s;r++)i=i.concat(n[r].controller.getAllParsedValues(e));e._cache.$bar=Dt(i.sort((function(e,t){return e-t})))}return e._cache.$bar}(s,e.type),o=s._length,l=function(){32767!==i&&-32768!==i&&(E(r)&&(o=Math.min(o,Math.abs(i-r)||o)),r=i)};for(t=0,n=a.length;t<n;++t)i=s.getPixelForValue(a[t]),l();for(r=void 0,t=0,n=s.ticks.length;t<n;++t)i=s.getPixelForTick(t),l();return o}function Bn(e,t,n,i){return A(e)?function(e,t,n,i){var r=n.parse(e[0],i),s=n.parse(e[1],i),a=Math.min(r,s),o=Math.max(r,s),l=a,c=o;Math.abs(a)>Math.abs(o)&&(l=o,c=a),t[n.axis]=c,t._custom={barStart:l,barEnd:c,start:r,end:s,min:a,max:o}}(e,t,n,i):t[n.axis]=n.parse(e,i),t}function Yn(e,t,n,i){var r,s,a,o,l=e.iScale,c=e.vScale,h=l.getLabels(),u=l===c,d=[];for(r=n,s=n+i;r<s;++r)o=t[r],(a={})[l.axis]=u||l.parse(h[r],r),d.push(Bn(o,a,c,r));return d}function Vn(e){return e&&void 0!==e.barStart&&void 0!==e.barEnd}function qn(e,t,n,i){var r=t.borderSkipped,s={};if(r){var a=function(e){var t,n,i,r,s;return e.horizontal?(t=e.base>e.x,n="left",i="right"):(t=e.base<e.y,n="bottom",i="top"),t?(r="end",s="start"):(r="start",s="end"),{start:n,end:i,reverse:t,top:r,bottom:s}}(e),o=a.start,l=a.end,c=a.reverse,h=a.top,u=a.bottom;"middle"===r&&n&&(e.enableBorderRadius=!0,(n._top||0)===i?r=h:(n._bottom||0)===i?r=u:(s[Wn(u,o,l,c)]=!0,r=h)),s[Wn(r,o,l,c)]=!0,e.borderSkipped=s}else e.borderSkipped=s}function Wn(e,t,n,i){var r,s,a;return i?(a=n,e=Hn(e=(r=e)===(s=t)?a:r===a?s:r,n,t)):e=Hn(e,t,n),e}function Hn(e,t,n){return"start"===e?t:"end"===e?n:e}function Gn(e,t,n){var i=t.inflateAmount;e.inflateAmount="auto"===i?1===n?.33:0:i}zn.defaults={},zn.prototype.datasetElementType=null,zn.prototype.dataElementType=null;var Qn=function(e){function t(){return(0,h.A)(this,t),(0,i.A)(this,t,arguments)}return(0,s.A)(t,e),(0,u.A)(t,[{key:"parsePrimitiveData",value:function(e,t,n,i){return Yn(e,t,n,i)}},{key:"parseArrayData",value:function(e,t,n,i){return Yn(e,t,n,i)}},{key:"parseObjectData",value:function(e,t,n,i){var r,s,a,o,l=e.iScale,c=e.vScale,h=this._parsing,u=h.xAxisKey,d=void 0===u?"x":u,g=h.yAxisKey,p=void 0===g?"y":g,f="x"===l.axis?d:p,m="x"===c.axis?d:p,v=[];for(r=n,s=n+i;r<s;++r)o=t[r],(a={})[l.axis]=l.parse(L(o,f),r),v.push(Bn(L(o,m),a,c,r));return v}},{key:"updateRangeFromParsed",value:function(e,n,i,s){(0,r.A)(t,"updateRangeFromParsed",this,3)([e,n,i,s]);var a=i._custom;a&&n===this._cachedMeta.vScale&&(e.min=Math.min(e.min,a.min),e.max=Math.max(e.max,a.max))}},{key:"getMaxOverflow",value:function(){return 0}},{key:"getLabelAndValue",value:function(e){var t=this._cachedMeta,n=t.iScale,i=t.vScale,r=this.getParsed(e),s=r._custom,a=Vn(s)?"["+s.start+", "+s.end+"]":""+i.getLabelForValue(r[i.axis]);return{label:""+n.getLabelForValue(r[n.axis]),value:a}}},{key:"initialize",value:function(){this.enableOptionSharing=!0,(0,r.A)(t,"initialize",this,3)([]),this._cachedMeta.stack=this.getDataset().stack}},{key:"update",value:function(e){var t=this._cachedMeta;this.updateElements(t.data,0,t.data.length,e)}},{key:"updateElements",value:function(e,t,n,i){var r="reset"===i,s=this.index,a=this._cachedMeta.vScale,o=a.getBasePixel(),l=a.isHorizontal(),c=this._getRuler(),h=this.resolveDataElementOptions(t,i),u=this.getSharedOptions(h),d=this.includeOptions(i,u);this.updateSharedOptions(u,i,h);for(var g=t;g<t+n;g++){var p=this.getParsed(g),f=r||x(p[a.axis])?{base:o,head:o}:this._calculateBarValuePixels(g),m=this._calculateBarIndexPixels(g,c),v=(p._stacks||{})[a.axis],A={horizontal:l,base:f.base,enableBorderRadius:!v||Vn(p._custom)||s===v._top||s===v._bottom,x:l?f.head:m.center,y:l?m.center:f.head,height:l?m.size:Math.abs(f.size),width:l?Math.abs(f.size):m.size};d&&(A.options=u||this.resolveDataElementOptions(g,e[g].active?"active":i));var y=A.options||e[g].options;qn(A,y,v,s),Gn(A,y,c.ratio),this.updateElement(e[g],g,A,i)}}},{key:"_getStacks",value:function(e,t){var n,i,r=this._cachedMeta.iScale,s=r.getMatchingVisibleMetas(this._type),a=r.options.stacked,o=s.length,l=[];for(n=0;n<o;++n)if((i=s[n]).controller.options.grouped){if("undefined"!==typeof t){var c=i.controller.getParsed(t)[i.controller._cachedMeta.vScale.axis];if(x(c)||isNaN(c))continue}if((!1===a||-1===l.indexOf(i.stack)||void 0===a&&void 0===i.stack)&&l.push(i.stack),i.index===e)break}return l.length||l.push(void 0),l}},{key:"_getStackCount",value:function(e){return this._getStacks(void 0,e).length}},{key:"_getStackIndex",value:function(e,t,n){var i=this._getStacks(e,n),r=void 0!==t?i.indexOf(t):-1;return-1===r?i.length-1:r}},{key:"_getRuler",value:function(){var e,t,n=this.options,i=this._cachedMeta,r=i.iScale,s=[];for(e=0,t=i.data.length;e<t;++e)s.push(r.getPixelForValue(this.getParsed(e)[r.axis],e));var a=n.barThickness;return{min:a||Un(i),pixels:s,start:r._startPixel,end:r._endPixel,stackCount:this._getStackCount(),scale:r,grouped:n.grouped,ratio:a?1:n.categoryPercentage*n.barPercentage}}},{key:"_calculateBarValuePixels",value:function(e){var t,n,i=this._cachedMeta,r=i.vScale,s=i._stacked,a=this.options,o=a.base,l=a.minBarLength,c=o||0,h=this.getParsed(e),u=h._custom,d=Vn(u),g=h[r.axis],p=0,f=s?this.applyStack(r,h,s):g;f!==g&&(p=f-g,f=g),d&&(g=u.barStart,f=u.barEnd-u.barStart,0!==g&&Q(g)!==Q(u.barEnd)&&(p=0),p+=g);var m=x(o)||d?p:o,v=r.getPixelForValue(m);if(n=(t=this.chart.getDataVisibility(e)?r.getPixelForValue(p+f):v)-v,Math.abs(n)<l&&(n=function(e,t,n){return 0!==e?Q(e):(t.isHorizontal()?1:-1)*(t.min>=n?1:-1)}(n,r,c)*l,g===c&&(v-=n/2),t=v+n),v===r.getPixelForValue(c)){var A=Q(n)*r.getLineWidthForValue(c)/2;v+=A,n-=A}return{size:n,base:v,head:t,center:t+n/2}}},{key:"_calculateBarIndexPixels",value:function(e,t){var n,i,r=t.scale,s=this.options,a=s.skipNull,o=k(s.maxBarThickness,1/0);if(t.grouped){var l=a?this._getStackCount(e):t.stackCount,c="flex"===s.barThickness?function(e,t,n,i){var r=t.pixels,s=r[e],a=e>0?r[e-1]:null,o=e<r.length-1?r[e+1]:null,l=n.categoryPercentage;null===a&&(a=s-(null===o?t.end-t.start:o-s)),null===o&&(o=s+s-a);var c=s-(s-Math.min(a,o))/2*l;return{chunk:Math.abs(o-a)/2*l/i,ratio:n.barPercentage,start:c}}(e,t,s,l):function(e,t,n,i){var r,s,a=n.barThickness;return x(a)?(r=t.min*n.categoryPercentage,s=n.barPercentage):(r=a*i,s=1),{chunk:r/i,ratio:s,start:t.pixels[e]-r/2}}(e,t,s,l),h=this._getStackIndex(this.index,this._cachedMeta.stack,a?e:void 0);n=c.start+c.chunk*h+c.chunk/2,i=Math.min(o,c.chunk*c.ratio)}else n=r.getPixelForValue(this.getParsed(e)[r.axis],e),i=Math.min(o,t.min*t.ratio);return{base:n-i/2,head:n+i/2,center:n,size:i}}},{key:"draw",value:function(){for(var e=this._cachedMeta,t=e.vScale,n=e.data,i=n.length,r=0;r<i;++r)null!==this.getParsed(r)[t.axis]&&n[r].draw(this._ctx)}}])}(zn);Qn.id="bar",Qn.defaults={datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}},Qn.overrides={scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}};var Xn=function(e){function t(){return(0,h.A)(this,t),(0,i.A)(this,t,arguments)}return(0,s.A)(t,e),(0,u.A)(t,[{key:"initialize",value:function(){this.enableOptionSharing=!0,(0,r.A)(t,"initialize",this,3)([])}},{key:"parsePrimitiveData",value:function(e,n,i,s){for(var a=(0,r.A)(t,"parsePrimitiveData",this,3)([e,n,i,s]),o=0;o<a.length;o++)a[o]._custom=this.resolveDataElementOptions(o+i).radius;return a}},{key:"parseArrayData",value:function(e,n,i,s){for(var a=(0,r.A)(t,"parseArrayData",this,3)([e,n,i,s]),o=0;o<a.length;o++){var l=n[i+o];a[o]._custom=k(l[2],this.resolveDataElementOptions(o+i).radius)}return a}},{key:"parseObjectData",value:function(e,n,i,s){for(var a=(0,r.A)(t,"parseObjectData",this,3)([e,n,i,s]),o=0;o<a.length;o++){var l=n[i+o];a[o]._custom=k(l&&l.r&&+l.r,this.resolveDataElementOptions(o+i).radius)}return a}},{key:"getMaxOverflow",value:function(){for(var e=this._cachedMeta.data,t=0,n=e.length-1;n>=0;--n)t=Math.max(t,e[n].size(this.resolveDataElementOptions(n))/2);return t>0&&t}},{key:"getLabelAndValue",value:function(e){var t=this._cachedMeta,n=t.xScale,i=t.yScale,r=this.getParsed(e),s=n.getLabelForValue(r.x),a=i.getLabelForValue(r.y),o=r._custom;return{label:t.label,value:"("+s+", "+a+(o?", "+o:"")+")"}}},{key:"update",value:function(e){var t=this._cachedMeta.data;this.updateElements(t,0,t.length,e)}},{key:"updateElements",value:function(e,t,n,i){for(var r="reset"===i,s=this._cachedMeta,a=s.iScale,o=s.vScale,l=this.resolveDataElementOptions(t,i),c=this.getSharedOptions(l),h=this.includeOptions(i,c),u=a.axis,d=o.axis,g=t;g<t+n;g++){var p=e[g],f=!r&&this.getParsed(g),m={},v=m[u]=r?a.getPixelForDecimal(.5):a.getPixelForValue(f[u]),x=m[d]=r?o.getBasePixel():o.getPixelForValue(f[d]);m.skip=isNaN(v)||isNaN(x),h&&(m.options=this.resolveDataElementOptions(g,p.active?"active":i),r&&(m.options.radius=0)),this.updateElement(p,g,m,i)}this.updateSharedOptions(c,i,l)}},{key:"resolveDataElementOptions",value:function(e,n){var i=this.getParsed(e),s=(0,r.A)(t,"resolveDataElementOptions",this,3)([e,n]);s.$shared&&(s=Object.assign({},s,{$shared:!1}));var a=s.radius;return"active"!==n&&(s.radius=0),s.radius+=k(i&&i._custom,a),s}}])}(zn);Xn.id="bubble",Xn.defaults={datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}},Xn.overrides={scales:{x:{type:"linear"},y:{type:"linear"}},plugins:{tooltip:{callbacks:{title:function(){return""}}}}};var Kn=function(e){function t(e,n){var r;return(0,h.A)(this,t),(r=(0,i.A)(this,t,[e,n])).enableOptionSharing=!0,r.innerRadius=void 0,r.outerRadius=void 0,r.offsetX=void 0,r.offsetY=void 0,r}return(0,s.A)(t,e),(0,u.A)(t,[{key:"linkScales",value:function(){}},{key:"parse",value:function(e,t){var n=this.getDataset().data,i=this._cachedMeta;if(!1===this._parsing)i._parsed=n;else{var r,s,a=function(e){return+n[e]};if(y(n[e])){var o=this._parsing.key,l=void 0===o?"value":o;a=function(e){return+L(n[e],l)}}for(r=e,s=e+t;r<s;++r)i._parsed[r]=a(r)}}},{key:"_getRotation",value:function(){return J(this.options.rotation-90)}},{key:"_getCircumference",value:function(){return J(this.options.circumference)}},{key:"_getRotationExtents",value:function(){for(var e=U,t=-U,n=0;n<this.chart.data.datasets.length;++n)if(this.chart.isDatasetVisible(n)){var i=this.chart.getDatasetMeta(n).controller,r=i._getRotation(),s=i._getCircumference();e=Math.min(e,r),t=Math.max(t,r+s)}return{rotation:e,circumference:t-e}}},{key:"update",value:function(e){var t,n,i=this.chart.chartArea,r=this._cachedMeta,s=r.data,a=this.getMaxBorderWidth()+this.getMaxOffset(s)+this.options.spacing,o=Math.max((Math.min(i.width,i.height)-a)/2,0),l=Math.min((t=this.options.cutout,n=o,"string"===typeof t&&t.endsWith("%")?parseFloat(t)/100:t/n),1),c=this._getRingWeight(this.index),h=this._getRotationExtents(),u=h.circumference,d=function(e,t,n){var i=1,r=1,s=0,a=0;if(t<U){var o=e,l=o+t,c=Math.cos(o),h=Math.sin(o),u=Math.cos(l),d=Math.sin(l),g=function(e,t,i){return se(e,o,l,!0)?1:Math.max(t,t*n,i,i*n)},p=function(e,t,i){return se(e,o,l,!0)?-1:Math.min(t,t*n,i,i*n)},f=g(0,c,u),m=g(q,h,d),v=p(z,c,u),x=p(z+q,h,d);i=(f-v)/2,r=(m-x)/2,s=-(f+v)/2,a=-(m+x)/2}return{ratioX:i,ratioY:r,offsetX:s,offsetY:a}}(h.rotation,u,l),g=d.ratioX,p=d.ratioY,f=d.offsetX,m=d.offsetY,v=(i.width-a)/g,x=(i.height-a)/p,A=Math.max(Math.min(v,x)/2,0),y=_(this.options.radius,A),b=(y-Math.max(y*l,0))/this._getVisibleDatasetWeightTotal();this.offsetX=f*y,this.offsetY=m*y,r.total=this.calculateTotal(),this.outerRadius=y-b*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-b*c,0),this.updateElements(s,0,s.length,e)}},{key:"_circumference",value:function(e,t){var n=this.options,i=this._cachedMeta,r=this._getCircumference();return t&&n.animation.animateRotate||!this.chart.getDataVisibility(e)||null===i._parsed[e]||i.data[e].hidden?0:this.calculateCircumference(i._parsed[e]*r/U)}},{key:"updateElements",value:function(e,t,n,i){var r,s="reset"===i,a=this.chart,o=a.chartArea,l=a.options.animation,c=(o.left+o.right)/2,h=(o.top+o.bottom)/2,u=s&&l.animateScale,d=u?0:this.innerRadius,g=u?0:this.outerRadius,p=this.resolveDataElementOptions(t,i),f=this.getSharedOptions(p),m=this.includeOptions(i,f),v=this._getRotation();for(r=0;r<t;++r)v+=this._circumference(r,s);for(r=t;r<t+n;++r){var x=this._circumference(r,s),A=e[r],y={x:c+this.offsetX,y:h+this.offsetY,startAngle:v,endAngle:v+x,circumference:x,outerRadius:g,innerRadius:d};m&&(y.options=f||this.resolveDataElementOptions(r,A.active?"active":i)),v+=x,this.updateElement(A,r,y,i)}this.updateSharedOptions(f,i,p)}},{key:"calculateTotal",value:function(){var e,t=this._cachedMeta,n=t.data,i=0;for(e=0;e<n.length;e++){var r=t._parsed[e];null===r||isNaN(r)||!this.chart.getDataVisibility(e)||n[e].hidden||(i+=Math.abs(r))}return i}},{key:"calculateCircumference",value:function(e){var t=this._cachedMeta.total;return t>0&&!isNaN(e)?U*(Math.abs(e)/t):0}},{key:"getLabelAndValue",value:function(e){var t=this._cachedMeta,n=this.chart,i=n.data.labels||[],r=hn(t._parsed[e],n.options.locale);return{label:i[e]||"",value:r}}},{key:"getMaxBorderWidth",value:function(e){var t,n,i,r,s,a=0,o=this.chart;if(!e)for(t=0,n=o.data.datasets.length;t<n;++t)if(o.isDatasetVisible(t)){e=(i=o.getDatasetMeta(t)).data,(r=i.controller)!==this&&r.configure();break}if(!e)return 0;for(t=0,n=e.length;t<n;++t)"inner"!==(s=r.resolveDataElementOptions(t)).borderAlign&&(a=Math.max(a,s.borderWidth||0,s.hoverBorderWidth||0));return a}},{key:"getMaxOffset",value:function(e){for(var t=0,n=0,i=e.length;n<i;++n){var r=this.resolveDataElementOptions(n);t=Math.max(t,r.offset||0,r.hoverOffset||0)}return t}},{key:"_getRingWeightOffset",value:function(e){for(var t=0,n=0;n<e;++n)this.chart.isDatasetVisible(n)&&(t+=this._getRingWeight(n));return t}},{key:"_getRingWeight",value:function(e){return Math.max(k(this.chart.data.datasets[e].weight,1),0)}},{key:"_getVisibleDatasetWeightTotal",value:function(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}])}(zn);Kn.id="doughnut",Kn.defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"},Kn.descriptors={_scriptable:function(e){return"spacing"!==e},_indexable:function(e){return"spacing"!==e}},Kn.overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels:function(e){var t=e.data;if(t.labels.length&&t.datasets.length){var n=e.legend.options.labels.pointStyle;return t.labels.map((function(t,i){var r=e.getDatasetMeta(0).controller.getStyle(i);return{text:t,fillStyle:r.backgroundColor,strokeStyle:r.borderColor,lineWidth:r.borderWidth,pointStyle:n,hidden:!e.getDataVisibility(i),index:i}}))}return[]}},onClick:function(e,t,n){n.chart.toggleDataVisibility(t.index),n.chart.update()}},tooltip:{callbacks:{title:function(){return""},label:function(e){var t=e.label,n=": "+e.formattedValue;return A(t)?(t=t.slice())[0]+=n:t+=n,t}}}}};var $n=function(e){function t(){return(0,h.A)(this,t),(0,i.A)(this,t,arguments)}return(0,s.A)(t,e),(0,u.A)(t,[{key:"initialize",value:function(){this.enableOptionSharing=!0,(0,r.A)(t,"initialize",this,3)([])}},{key:"update",value:function(e){var t=this._cachedMeta,n=t.dataset,i=t.data,r=void 0===i?[]:i,s=t._dataset,a=this.chart._animationsDisabled,o=function(e,t,n){var i=t.length,r=0,s=i;if(e._sorted){var a=e.iScale,o=e._parsed,l=a.axis,c=a.getUserBounds(),h=c.min,u=c.max,d=c.minDefined,g=c.maxDefined;d&&(r=ae(Math.min(jt(o,a.axis,h).lo,n?i:jt(t,l,a.getPixelForValue(h)).lo),0,i-1)),s=g?ae(Math.max(jt(o,a.axis,u).hi+1,n?0:jt(t,l,a.getPixelForValue(u)).hi+1),r,i)-r:i-r}return{start:r,count:s}}(t,r,a),l=o.start,c=o.count;this._drawStart=l,this._drawCount=c,function(e){var t=e.xScale,n=e.yScale,i=e._scaleRanges,r={xmin:t.min,xmax:t.max,ymin:n.min,ymax:n.max};if(!i)return e._scaleRanges=r,!0;var s=i.xmin!==t.min||i.xmax!==t.max||i.ymin!==n.min||i.ymax!==n.max;return Object.assign(i,r),s}(t)&&(l=0,c=r.length),n._chart=this.chart,n._datasetIndex=this.index,n._decimated=!!s._decimated,n.points=r;var h=this.resolveDatasetElementOptions(e);this.options.showLine||(h.borderWidth=0),h.segment=this.options.segment,this.updateElement(n,void 0,{animated:!a,options:h},e),this.updateElements(r,l,c,e)}},{key:"updateElements",value:function(e,t,n,i){for(var r="reset"===i,s=this._cachedMeta,a=s.iScale,o=s.vScale,l=s._stacked,c=s._dataset,h=this.resolveDataElementOptions(t,i),u=this.getSharedOptions(h),d=this.includeOptions(i,u),g=a.axis,p=o.axis,f=this.options,m=f.spanGaps,v=f.segment,A=K(m)?m:Number.POSITIVE_INFINITY,y=this.chart._animationsDisabled||r||"none"===i,b=t>0&&this.getParsed(t-1),j=t;j<t+n;++j){var k=e[j],_=this.getParsed(j),w=y?k:{},D=x(_[p]),S=w[g]=a.getPixelForValue(_[g],j),P=w[p]=r||D?o.getBasePixel():o.getPixelForValue(l?this.applyStack(o,_,l):_[p],j);w.skip=isNaN(S)||isNaN(P)||D,w.stop=j>0&&_[g]-b[g]>A,v&&(w.parsed=_,w.raw=c.data[j]),d&&(w.options=u||this.resolveDataElementOptions(j,k.active?"active":i)),y||this.updateElement(k,j,w,i),b=_}this.updateSharedOptions(u,i,h)}},{key:"getMaxOverflow",value:function(){var e=this._cachedMeta,t=e.dataset,n=t.options&&t.options.borderWidth||0,i=e.data||[];if(!i.length)return n;var r=i[0].size(this.resolveDataElementOptions(0)),s=i[i.length-1].size(this.resolveDataElementOptions(i.length-1));return Math.max(n,r,s)/2}},{key:"draw",value:function(){var e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),(0,r.A)(t,"draw",this,3)([])}}])}(zn);$n.id="line",$n.defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1},$n.overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}};var Zn=function(e){function t(e,n){var r;return(0,h.A)(this,t),(r=(0,i.A)(this,t,[e,n])).innerRadius=void 0,r.outerRadius=void 0,r}return(0,s.A)(t,e),(0,u.A)(t,[{key:"getLabelAndValue",value:function(e){var t=this._cachedMeta,n=this.chart,i=n.data.labels||[],r=hn(t._parsed[e].r,n.options.locale);return{label:i[e]||"",value:r}}},{key:"update",value:function(e){var t=this._cachedMeta.data;this._updateRadius(),this.updateElements(t,0,t.length,e)}},{key:"_updateRadius",value:function(){var e=this.chart,t=e.chartArea,n=e.options,i=Math.min(t.right-t.left,t.bottom-t.top),r=Math.max(i/2,0),s=(r-Math.max(n.cutoutPercentage?r/100*n.cutoutPercentage:1,0))/e.getVisibleDatasetCount();this.outerRadius=r-s*this.index,this.innerRadius=this.outerRadius-s}},{key:"updateElements",value:function(e,t,n,i){var r,s="reset"===i,a=this.chart,o=this.getDataset(),l=a.options.animation,c=this._cachedMeta.rScale,h=c.xCenter,u=c.yCenter,d=c.getIndexAngle(0)-.5*z,g=d,p=360/this.countVisibleElements();for(r=0;r<t;++r)g+=this._computeAngle(r,i,p);for(r=t;r<t+n;r++){var f=e[r],m=g,v=g+this._computeAngle(r,i,p),x=a.getDataVisibility(r)?c.getDistanceFromCenterForValue(o.data[r]):0;g=v,s&&(l.animateScale&&(x=0),l.animateRotate&&(m=v=d));var A={x:h,y:u,innerRadius:0,outerRadius:x,startAngle:m,endAngle:v,options:this.resolveDataElementOptions(r,f.active?"active":i)};this.updateElement(f,r,A,i)}}},{key:"countVisibleElements",value:function(){var e=this,t=this.getDataset(),n=this._cachedMeta,i=0;return n.data.forEach((function(n,r){!isNaN(t.data[r])&&e.chart.getDataVisibility(r)&&i++})),i}},{key:"_computeAngle",value:function(e,t,n){return this.chart.getDataVisibility(e)?J(this.resolveDataElementOptions(e,t).angle||n):0}}])}(zn);Zn.id="polarArea",Zn.defaults={dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0},Zn.overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels:function(e){var t=e.data;if(t.labels.length&&t.datasets.length){var n=e.legend.options.labels.pointStyle;return t.labels.map((function(t,i){var r=e.getDatasetMeta(0).controller.getStyle(i);return{text:t,fillStyle:r.backgroundColor,strokeStyle:r.borderColor,lineWidth:r.borderWidth,pointStyle:n,hidden:!e.getDataVisibility(i),index:i}}))}return[]}},onClick:function(e,t,n){n.chart.toggleDataVisibility(t.index),n.chart.update()}},tooltip:{callbacks:{title:function(){return""},label:function(e){return e.chart.data.labels[e.dataIndex]+": "+e.formattedValue}}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}};var Jn=function(e){function t(){return(0,h.A)(this,t),(0,i.A)(this,t,arguments)}return(0,s.A)(t,e),(0,u.A)(t)}(Kn);Jn.id="pie",Jn.defaults={cutout:0,rotation:0,circumference:360,radius:"100%"};var ei=function(e){function t(){return(0,h.A)(this,t),(0,i.A)(this,t,arguments)}return(0,s.A)(t,e),(0,u.A)(t,[{key:"getLabelAndValue",value:function(e){var t=this._cachedMeta.vScale,n=this.getParsed(e);return{label:t.getLabels()[e],value:""+t.getLabelForValue(n[t.axis])}}},{key:"update",value:function(e){var t=this._cachedMeta,n=t.dataset,i=t.data||[],r=t.iScale.getLabels();if(n.points=i,"resize"!==e){var s=this.resolveDatasetElementOptions(e);this.options.showLine||(s.borderWidth=0);var a={_loop:!0,_fullLoop:r.length===i.length,options:s};this.updateElement(n,void 0,a,e)}this.updateElements(i,0,i.length,e)}},{key:"updateElements",value:function(e,t,n,i){for(var r=this.getDataset(),s=this._cachedMeta.rScale,a="reset"===i,o=t;o<t+n;o++){var l=e[o],c=this.resolveDataElementOptions(o,l.active?"active":i),h=s.getPointPositionForValue(o,r.data[o]),u=a?s.xCenter:h.x,d=a?s.yCenter:h.y,g={x:u,y:d,angle:h.angle,skip:isNaN(u)||isNaN(d),options:c};this.updateElement(l,o,g,i)}}}])}(zn);ei.id="radar",ei.defaults={datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}},ei.overrides={aspectRatio:1,scales:{r:{type:"radialLinear"}}};var ti=function(e){function t(){return(0,h.A)(this,t),(0,i.A)(this,t,arguments)}return(0,s.A)(t,e),(0,u.A)(t)}($n);ti.id="scatter",ti.defaults={showLine:!1,fill:!1},ti.overrides={interaction:{mode:"point"},plugins:{tooltip:{callbacks:{title:function(){return""},label:function(e){return"("+e.label+", "+e.formattedValue+")"}}}},scales:{x:{type:"linear"},y:{type:"linear"}}};function ni(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}var ii=function(){return(0,u.A)((function e(t){(0,h.A)(this,e),this.options=t||{}}),[{key:"formats",value:function(){return ni()}},{key:"parse",value:function(e,t){return ni()}},{key:"format",value:function(e,t){return ni()}},{key:"add",value:function(e,t,n){return ni()}},{key:"diff",value:function(e,t,n){return ni()}},{key:"startOf",value:function(e,t,n){return ni()}},{key:"endOf",value:function(e,t){return ni()}}])}();ii.override=function(e){Object.assign(ii.prototype,e)};var ri={_date:ii};function si(e,t){return"native"in e?{x:e.x,y:e.y}:Jt(e,t)}function ai(e,t,n,i){var r=e.controller,s=e.data,a=e._sorted,o=r._cachedMeta.iScale;if(o&&t===o.axis&&a&&s.length){var l=o._reversePixels?kt:jt;if(!i)return l(s,t,n);if(r._sharedOptions){var c=s[0],h="function"===typeof c.getRange&&c.getRange(t);if(h){var u=l(s,t,n-h),d=l(s,t,n+h);return{lo:u.lo,hi:d.hi}}}}return{lo:0,hi:s.length-1}}function oi(e,t,n,i,r){for(var s=e.getSortedVisibleDatasetMetas(),a=n[t],o=0,l=s.length;o<l;++o)for(var c=s[o],h=c.index,u=c.data,d=ai(s[o],t,a,r),g=d.lo,p=d.hi,f=g;f<=p;++f){var m=u[f];m.skip||i(m,h,f)}}function li(e,t,n,i){var r=[];if(!it(t,e.chartArea,e._minPadding))return r;return oi(e,n,t,(function(e,n,s){e.inRange(t.x,t.y,i)&&r.push({element:e,datasetIndex:n,index:s})}),!0),r}function ci(e,t,n,i,r){var s=function(e){var t=-1!==e.indexOf("x"),n=-1!==e.indexOf("y");return function(e,i){var r=t?Math.abs(e.x-i.x):0,s=n?Math.abs(e.y-i.y):0;return Math.sqrt(Math.pow(r,2)+Math.pow(s,2))}}(n),a=Number.POSITIVE_INFINITY,o=[];if(!it(t,e.chartArea,e._minPadding))return o;return oi(e,n,t,(function(n,l,c){if(!i||n.inRange(t.x,t.y,r)){var h=n.getCenterPoint(r);if(it(h,e.chartArea,e._minPadding)||n.inRange(t.x,t.y,r)){var u=s(t,h);u<a?(o=[{element:n,datasetIndex:l,index:c}],a=u):u===a&&o.push({element:n,datasetIndex:l,index:c})}}})),o}function hi(e,t,n,i){var r=si(t,e),s=[],a=n.axis,o="x"===a?"inXRange":"inYRange",l=!1;return function(e,t){for(var n,i,r,s=e.getSortedVisibleDatasetMetas(),a=0,o=s.length;a<o;++a){var l=s[a];n=l.index;for(var c=0,h=(i=l.data).length;c<h;++c)(r=i[c]).skip||t(r,n,c)}}(e,(function(e,t,n){e[o](r[a],i)&&s.push({element:e,datasetIndex:t,index:n}),e.inRange(r.x,r.y,i)&&(l=!0)})),n.intersect&&!l?[]:s}var ui={modes:{index:function(e,t,n,i){var r=si(t,e),s=n.axis||"x",a=n.intersect?li(e,r,s,i):ci(e,r,s,!1,i),o=[];return a.length?(e.getSortedVisibleDatasetMetas().forEach((function(e){var t=a[0].index,n=e.data[t];n&&!n.skip&&o.push({element:n,datasetIndex:e.index,index:t})})),o):[]},dataset:function(e,t,n,i){var r=si(t,e),s=n.axis||"xy",a=n.intersect?li(e,r,s,i):ci(e,r,s,!1,i);if(a.length>0){var o=a[0].datasetIndex,l=e.getDatasetMeta(o).data;a=[];for(var c=0;c<l.length;++c)a.push({element:l[c],datasetIndex:o,index:c})}return a},point:function(e,t,n,i){return li(e,si(t,e),n.axis||"xy",i)},nearest:function(e,t,n,i){return ci(e,si(t,e),n.axis||"xy",n.intersect,i)},x:function(e,t,n,i){return n.axis="x",hi(e,t,n,i)},y:function(e,t,n,i){return n.axis="y",hi(e,t,n,i)}}},di=["left","top","right","bottom"];function gi(e,t){return e.filter((function(e){return e.pos===t}))}function pi(e,t){return e.filter((function(e){return-1===di.indexOf(e.pos)&&e.box.axis===t}))}function fi(e,t){return e.sort((function(e,n){var i=t?n:e,r=t?e:n;return i.weight===r.weight?i.index-r.index:i.weight-r.weight}))}function mi(e,t){var n,i,r,s=function(e){var t,n={},i=(0,l.A)(e);try{for(i.s();!(t=i.n()).done;){var r=t.value,s=r.stack,a=r.pos,o=r.stackWeight;if(s&&di.includes(a)){var c=n[s]||(n[s]={count:0,placed:0,weight:0,size:0});c.count++,c.weight+=o}}}catch(h){i.e(h)}finally{i.f()}return n}(e),a=t.vBoxMaxWidth,o=t.hBoxMaxHeight;for(n=0,i=e.length;n<i;++n){var c=(r=e[n]).box.fullSize,h=s[r.stack],u=h&&r.stackWeight/h.weight;r.horizontal?(r.width=u?u*a:c&&t.availableWidth,r.height=o):(r.width=a,r.height=u?u*o:c&&t.availableHeight)}return s}function vi(e,t,n,i){return Math.max(e[n],t[n])+Math.max(e[i],t[i])}function xi(e,t){e.top=Math.max(e.top,t.top),e.left=Math.max(e.left,t.left),e.bottom=Math.max(e.bottom,t.bottom),e.right=Math.max(e.right,t.right)}function Ai(e,t,n,i){var r=n.pos,s=n.box,a=e.maxPadding;if(!y(r)){n.size&&(e[r]-=n.size);var o=i[n.stack]||{size:0,count:1};o.size=Math.max(o.size,n.horizontal?s.height:s.width),n.size=o.size/o.count,e[r]+=n.size}s.getPadding&&xi(a,s.getPadding());var l=Math.max(0,t.outerWidth-vi(a,e,"left","right")),c=Math.max(0,t.outerHeight-vi(a,e,"top","bottom")),h=l!==e.w,u=c!==e.h;return e.w=l,e.h=c,n.horizontal?{same:h,other:u}:{same:u,other:h}}function yi(e,t){var n=t.maxPadding;function i(e){var i={left:0,top:0,right:0,bottom:0};return e.forEach((function(e){i[e]=Math.max(t[e],n[e])})),i}return i(e?["left","right"]:["top","bottom"])}function bi(e,t,n,i){var r,s,a,o,l,c,h=[];for(r=0,s=e.length,l=0;r<s;++r){(o=(a=e[r]).box).update(a.width||t.w,a.height||t.h,yi(a.horizontal,t));var u=Ai(t,n,a,i),d=u.same,g=u.other;l|=d&&h.length,c=c||g,o.fullSize||h.push(a)}return l&&bi(h,t,n,i)||c}function ji(e,t,n,i,r){e.top=n,e.left=t,e.right=t+i,e.bottom=n+r,e.width=i,e.height=r}function ki(e,t,n,i){var r,s=n.padding,a=t.x,o=t.y,c=(0,l.A)(e);try{for(c.s();!(r=c.n()).done;){var h=r.value,u=h.box,d=i[h.stack]||{count:1,placed:0,weight:1},g=h.stackWeight/d.weight||1;if(h.horizontal){var p=t.w*g,f=d.size||u.height;E(d.start)&&(o=d.start),u.fullSize?ji(u,s.left,o,n.outerWidth-s.right-s.left,f):ji(u,t.left+d.placed,o,p,f),d.start=o,d.placed+=p,o=u.bottom}else{var m=t.h*g,v=d.size||u.width;E(d.start)&&(a=d.start),u.fullSize?ji(u,a,s.top,v,n.outerHeight-s.bottom-s.top):ji(u,a,t.top+d.placed,v,m),d.start=a,d.placed+=m,a=u.right}}}catch(x){c.e(x)}finally{c.f()}t.x=a,t.y=o}$e.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}});var _i=function(e,t){e.boxes||(e.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw:function(e){t.draw(e)}}]},e.boxes.push(t)},wi=function(e,t){var n=e.boxes?e.boxes.indexOf(t):-1;-1!==n&&e.boxes.splice(n,1)},Di=function(e,t,n){t.fullSize=n.fullSize,t.position=n.position,t.weight=n.weight},Si=function(e,t,n,i){if(e){var r=vt(e.options.layout.padding),s=Math.max(t-r.width,0),a=Math.max(n-r.height,0),o=function(e){var t=function(e){var t,n,i,r,s,a,o=[];for(t=0,n=(e||[]).length;t<n;++t){var l=i=e[t];r=l.position;var c=l.options;s=c.stack;var h=c.stackWeight;a=void 0===h?1:h,o.push({index:t,box:i,pos:r,horizontal:i.isHorizontal(),weight:i.weight,stack:s&&r+s,stackWeight:a})}return o}(e),n=fi(t.filter((function(e){return e.box.fullSize})),!0),i=fi(gi(t,"left"),!0),r=fi(gi(t,"right")),s=fi(gi(t,"top"),!0),a=fi(gi(t,"bottom")),o=pi(t,"x"),l=pi(t,"y");return{fullSize:n,leftAndTop:i.concat(s),rightAndBottom:r.concat(l).concat(a).concat(o),chartArea:gi(t,"chartArea"),vertical:i.concat(r).concat(l),horizontal:s.concat(a).concat(o)}}(e.boxes),l=o.vertical,c=o.horizontal;D(e.boxes,(function(e){"function"===typeof e.beforeLayout&&e.beforeLayout()}));var h=l.reduce((function(e,t){return t.box.options&&!1===t.box.options.display?e:e+1}),0)||1,u=Object.freeze({outerWidth:t,outerHeight:n,padding:r,availableWidth:s,availableHeight:a,vBoxMaxWidth:s/2/h,hBoxMaxHeight:a/2}),d=Object.assign({},r);xi(d,vt(i));var g=Object.assign({maxPadding:d,w:s,h:a,x:r.left,y:r.top},r),p=mi(l.concat(c),u);bi(o.fullSize,g,u,p),bi(l,g,u,p),bi(c,g,u,p)&&bi(l,g,u,p),function(e){var t=e.maxPadding;function n(n){var i=Math.max(t[n]-e[n],0);return e[n]+=i,i}e.y+=n("top"),e.x+=n("left"),n("right"),n("bottom")}(g),ki(o.leftAndTop,g,u,p),g.x+=g.w,g.y+=g.h,ki(o.rightAndBottom,g,u,p),e.chartArea={left:g.left,top:g.top,right:g.left+g.w,bottom:g.top+g.h,height:g.h,width:g.w},D(o.chartArea,(function(t){var n=t.box;Object.assign(n,e.chartArea),n.update(g.w,g.h)}))}},Pi=function(){return(0,u.A)((function e(){(0,h.A)(this,e)}),[{key:"acquireContext",value:function(e,t){}},{key:"releaseContext",value:function(e){return!1}},{key:"addEventListener",value:function(e,t,n){}},{key:"removeEventListener",value:function(e,t,n){}},{key:"getDevicePixelRatio",value:function(){return 1}},{key:"getMaximumSize",value:function(e,t,n,i){return t=Math.max(0,t||e.width),n=n||e.height,{width:t,height:Math.max(0,i?Math.floor(t/i):n)}}},{key:"isAttached",value:function(e){return!0}},{key:"updateConfig",value:function(e){}}])}(),Mi=function(e){function t(){return(0,h.A)(this,t),(0,i.A)(this,t,arguments)}return(0,s.A)(t,e),(0,u.A)(t,[{key:"acquireContext",value:function(e){return e&&e.getContext&&e.getContext("2d")||null}},{key:"updateConfig",value:function(e){e.options.animation=!1}}])}(Pi),Ci="$chartjs",Ni={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},Ii=function(e){return null===e||""===e};var Oi=!!rn&&{passive:!0};function Ti(e,t,n){e.canvas.removeEventListener(t,n,Oi)}function Li(e,t,n){var i=e.canvas,r=new MutationObserver((function(e){var t,r=(0,l.A)(e);try{for(r.s();!(t=r.n()).done;){var s,a=t.value,o=(0,l.A)(a.addedNodes);try{for(o.s();!(s=o.n()).done;){var c=s.value;if(c===i||c.contains(i))return n()}}catch(h){o.e(h)}finally{o.f()}}}catch(h){r.e(h)}finally{r.f()}}));return r.observe(document,{childList:!0,subtree:!0}),r}function Ri(e,t,n){var i=e.canvas,r=new MutationObserver((function(e){var t,r=(0,l.A)(e);try{for(r.s();!(t=r.n()).done;){var s,a=t.value,o=(0,l.A)(a.removedNodes);try{for(o.s();!(s=o.n()).done;){var c=s.value;if(c===i||c.contains(i))return n()}}catch(h){o.e(h)}finally{o.f()}}}catch(h){r.e(h)}finally{r.f()}}));return r.observe(document,{childList:!0,subtree:!0}),r}var Ei=new Map,Fi=0;function zi(){var e=window.devicePixelRatio;e!==Fi&&(Fi=e,Ei.forEach((function(t,n){n.currentDevicePixelRatio!==e&&t()})))}function Ui(e,t,n){var i=e.canvas,r=i&&Qt(i);if(r){var s=g((function(e,t){var i=r.clientWidth;n(e,t),i<r.clientWidth&&n()}),window),a=new ResizeObserver((function(e){var t=e[0],n=t.contentRect.width,i=t.contentRect.height;0===n&&0===i||s(n,i)}));return a.observe(r),function(e,t){Ei.size||window.addEventListener("resize",zi),Ei.set(e,t)}(e,s),a}}function Bi(e,t,n){n&&n.disconnect(),"resize"===t&&function(e){Ei.delete(e),Ei.size||window.removeEventListener("resize",zi)}(e)}function Yi(e,t,n){var i=e.canvas,r=g((function(t){null!==e.ctx&&n(function(e,t){var n=Ni[e.type]||e.type,i=Jt(e,t),r=i.x,s=i.y;return{type:n,chart:t,native:e,x:void 0!==r?r:null,y:void 0!==s?s:null}}(t,e))}),e,(function(e){var t=e[0];return[t,t.offsetX,t.offsetY]}));return function(e,t,n){e.addEventListener(t,n,Oi)}(i,t,r),r}var Vi=function(e){function t(){return(0,h.A)(this,t),(0,i.A)(this,t,arguments)}return(0,s.A)(t,e),(0,u.A)(t,[{key:"acquireContext",value:function(e,t){var n=e&&e.getContext&&e.getContext("2d");return n&&n.canvas===e?(function(e,t){var n=e.style,i=e.getAttribute("height"),r=e.getAttribute("width");if(e[Ci]={initial:{height:i,width:r,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",Ii(r)){var s=sn(e,"width");void 0!==s&&(e.width=s)}if(Ii(i))if(""===e.style.height)e.height=e.width/(t||2);else{var a=sn(e,"height");void 0!==a&&(e.height=a)}}(e,t),n):null}},{key:"releaseContext",value:function(e){var t=e.canvas;if(!t[Ci])return!1;var n=t[Ci].initial;["height","width"].forEach((function(e){var i=n[e];x(i)?t.removeAttribute(e):t.setAttribute(e,i)}));var i=n.style||{};return Object.keys(i).forEach((function(e){t.style[e]=i[e]})),t.width=t.width,delete t[Ci],!0}},{key:"addEventListener",value:function(e,t,n){this.removeEventListener(e,t);var i=e.$proxies||(e.$proxies={}),r={attach:Li,detach:Ri,resize:Ui}[t]||Yi;i[t]=r(e,t,n)}},{key:"removeEventListener",value:function(e,t){var n=e.$proxies||(e.$proxies={}),i=n[t];i&&(({attach:Bi,detach:Bi,resize:Bi}[t]||Ti)(e,t,i),n[t]=void 0)}},{key:"getDevicePixelRatio",value:function(){return window.devicePixelRatio}},{key:"getMaximumSize",value:function(e,t,n,i){return tn(e,t,n,i)}},{key:"isAttached",value:function(e){var t=Qt(e);return!(!t||!t.isConnected)}}])}(Pi);var qi=function(){return(0,u.A)((function e(){(0,h.A)(this,e),this.x=void 0,this.y=void 0,this.active=!1,this.options=void 0,this.$animations=void 0}),[{key:"tooltipPosition",value:function(e){var t=this.getProps(["x","y"],e);return{x:t.x,y:t.y}}},{key:"hasValue",value:function(){return K(this.x)&&K(this.y)}},{key:"getProps",value:function(e,t){var n=this,i=this.$animations;if(!t||!i)return this;var r={};return e.forEach((function(e){r[e]=i[e]&&i[e].active()?i[e]._to:n[e]})),r}}])}();qi.defaults={},qi.defaultRoutes=void 0;var Wi={values:function(e){return A(e)?e:""+e},numeric:function(e,t,n){if(0===e)return"0";var i,r=this.chart.options.locale,s=e;if(n.length>1){var a=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(a<1e-4||a>1e15)&&(i="scientific"),s=function(e,t){var n=t.length>3?t[2].value-t[1].value:t[1].value-t[0].value;Math.abs(n)>=1&&e!==Math.floor(e)&&(n=e-Math.floor(e));return n}(e,n)}var o=G(Math.abs(s)),l=Math.max(Math.min(-1*Math.floor(o),20),0),c={notation:i,minimumFractionDigits:l,maximumFractionDigits:l};return Object.assign(c,this.options.ticks.format),hn(e,r,c)},logarithmic:function(e,t,n){if(0===e)return"0";var i=e/Math.pow(10,Math.floor(G(e)));return 1===i||2===i||5===i?Wi.numeric.call(this,e,t,n):""}};var Hi={formatters:Wi};function Gi(e,t){var n=e.options.ticks,i=n.maxTicksLimit||function(e){var t=e.options.offset,n=e._tickSize(),i=e._length/n+(t?0:1),r=e._maxLength/n;return Math.floor(Math.min(i,r))}(e),r=n.major.enabled?function(e){var t,n,i=[];for(t=0,n=e.length;t<n;t++)e[t].major&&i.push(t);return i}(t):[],s=r.length,a=r[0],o=r[s-1],l=[];if(s>i)return function(e,t,n,i){var r,s=0,a=n[0];for(i=Math.ceil(i),r=0;r<e.length;r++)r===a&&(t.push(e[r]),a=n[++s*i])}(t,l,r,s/i),l;var c=function(e,t,n){var i=function(e){var t,n,i=e.length;if(i<2)return!1;for(n=e[0],t=1;t<i;++t)if(e[t]-e[t-1]!==n)return!1;return n}(e),r=t.length/n;if(!i)return Math.max(r,1);for(var s=function(e){var t,n=[],i=Math.sqrt(e);for(t=1;t<i;t++)e%t===0&&(n.push(t),n.push(e/t));return i===(0|i)&&n.push(i),n.sort((function(e,t){return e-t})).pop(),n}(i),a=0,o=s.length-1;a<o;a++){var l=s[a];if(l>r)return l}return Math.max(r,1)}(r,t,i);if(s>0){var h,u,d=s>1?Math.round((o-a)/(s-1)):null;for(Qi(t,l,c,x(d)?0:a-d,a),h=0,u=s-1;h<u;h++)Qi(t,l,c,r[h],r[h+1]);return Qi(t,l,c,o,x(d)?t.length:o+d),l}return Qi(t,l,c),l}function Qi(e,t,n,i,r){var s,a,o,l=k(i,0),c=Math.min(k(r,e.length),e.length),h=0;for(n=Math.ceil(n),r&&(n=(s=r-i)/Math.floor(s/n)),o=l;o<0;)h++,o=Math.round(l+h*n);for(a=Math.max(l,0);a<c;a++)a===o&&(t.push(e[a]),h++,o=Math.round(l+h*n))}$e.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",grace:0,grid:{display:!0,lineWidth:1,drawBorder:!0,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:function(e,t){return t.lineWidth},tickColor:function(e,t){return t.color},offset:!1,borderDash:[],borderDashOffset:0,borderWidth:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:Hi.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),$e.route("scale.ticks","color","","color"),$e.route("scale.grid","color","","borderColor"),$e.route("scale.grid","borderColor","","borderColor"),$e.route("scale.title","color","","color"),$e.describe("scale",{_fallback:!1,_scriptable:function(e){return!e.startsWith("before")&&!e.startsWith("after")&&"callback"!==e&&"parser"!==e},_indexable:function(e){return"borderDash"!==e&&"tickBorderDash"!==e}}),$e.describe("scales",{_fallback:"scale"}),$e.describe("scale.ticks",{_scriptable:function(e){return"backdropPadding"!==e&&"callback"!==e},_indexable:function(e){return"backdropPadding"!==e}});var Xi=function(e,t,n){return"top"===t||"left"===t?e[t]+n:e[t]-n};function Ki(e,t){for(var n=[],i=e.length/t,r=e.length,s=0;s<r;s+=i)n.push(e[Math.floor(s)]);return n}function $i(e,t,n){var i,r=e.ticks.length,s=Math.min(t,r-1),a=e._startPixel,o=e._endPixel,l=1e-6,c=e.getPixelForTick(s);if(!(n&&(i=1===r?Math.max(c-a,o-c):0===t?(e.getPixelForTick(1)-c)/2:(c-e.getPixelForTick(s-1))/2,(c+=s<t?i:-i)<a-l||c>o+l)))return c}function Zi(e){return e.drawTicks?e.tickLength:0}function Ji(e,t){if(!e.display)return 0;var n=xt(e.font,t),i=vt(e.padding);return(A(e.text)?e.text.length:1)*n.lineHeight+i.height}function er(e,t,n){var i=p(e);return(n&&"right"!==t||!n&&"right"===t)&&(i=function(e){return"left"===e?"right":"right"===e?"left":e}(i)),i}var tr=function(e){function t(e){var n;return(0,h.A)(this,t),(n=(0,i.A)(this,t)).id=e.id,n.type=e.type,n.options=void 0,n.ctx=e.ctx,n.chart=e.chart,n.top=void 0,n.bottom=void 0,n.left=void 0,n.right=void 0,n.width=void 0,n.height=void 0,n._margins={left:0,right:0,top:0,bottom:0},n.maxWidth=void 0,n.maxHeight=void 0,n.paddingTop=void 0,n.paddingBottom=void 0,n.paddingLeft=void 0,n.paddingRight=void 0,n.axis=void 0,n.labelRotation=void 0,n.min=void 0,n.max=void 0,n._range=void 0,n.ticks=[],n._gridLineItems=null,n._labelItems=null,n._labelSizes=null,n._length=0,n._maxLength=0,n._longestTextCache={},n._startPixel=void 0,n._endPixel=void 0,n._reversePixels=!1,n._userMax=void 0,n._userMin=void 0,n._suggestedMax=void 0,n._suggestedMin=void 0,n._ticksLength=0,n._borderValue=0,n._cache={},n._dataLimitsCached=!1,n.$context=void 0,n}return(0,s.A)(t,e),(0,u.A)(t,[{key:"init",value:function(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}},{key:"parse",value:function(e,t){return e}},{key:"getUserBounds",value:function(){var e=this._userMin,t=this._userMax,n=this._suggestedMin,i=this._suggestedMax;return e=j(e,Number.POSITIVE_INFINITY),t=j(t,Number.NEGATIVE_INFINITY),n=j(n,Number.POSITIVE_INFINITY),i=j(i,Number.NEGATIVE_INFINITY),{min:j(e,n),max:j(t,i),minDefined:b(e),maxDefined:b(t)}}},{key:"getMinMax",value:function(e){var t,n=this.getUserBounds(),i=n.min,r=n.max,s=n.minDefined,a=n.maxDefined;if(s&&a)return{min:i,max:r};for(var o=this.getMatchingVisibleMetas(),l=0,c=o.length;l<c;++l)t=o[l].controller.getMinMax(this,e),s||(i=Math.min(i,t.min)),a||(r=Math.max(r,t.max));return{min:j(i=a&&i>r?r:i,j(r=s&&i>r?i:r,i)),max:j(r,j(i,r))}}},{key:"getPadding",value:function(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}},{key:"getTicks",value:function(){return this.ticks}},{key:"getLabels",value:function(){var e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}},{key:"beforeLayout",value:function(){this._cache={},this._dataLimitsCached=!1}},{key:"beforeUpdate",value:function(){w(this.options.beforeUpdate,[this])}},{key:"update",value:function(e,t,n){var i=this.options,r=i.beginAtZero,s=i.grace,a=i.ticks,o=a.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=t,this._margins=n=Object.assign({left:0,right:0,top:0,bottom:0},n),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+n.left+n.right:this.height+n.top+n.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=function(e,t,n){var i=e.min,r=e.max,s=_(t,(r-i)/2),a=function(e,t){return n&&0===e?0:e+t};return{min:a(i,-Math.abs(s)),max:a(r,s)}}(this,s,r),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();var l=o<this.ticks.length;this._convertTicksToLabels(l?Ki(this.ticks,o):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),a.display&&(a.autoSkip||"auto"===a.source)&&(this.ticks=Gi(this,this.ticks),this._labelSizes=null),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}},{key:"configure",value:function(){var e,t,n=this.options.reverse;this.isHorizontal()?(e=this.left,t=this.right):(e=this.top,t=this.bottom,n=!n),this._startPixel=e,this._endPixel=t,this._reversePixels=n,this._length=t-e,this._alignToPixels=this.options.alignToPixels}},{key:"afterUpdate",value:function(){w(this.options.afterUpdate,[this])}},{key:"beforeSetDimensions",value:function(){w(this.options.beforeSetDimensions,[this])}},{key:"setDimensions",value:function(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}},{key:"afterSetDimensions",value:function(){w(this.options.afterSetDimensions,[this])}},{key:"_callHooks",value:function(e){this.chart.notifyPlugins(e,this.getContext()),w(this.options[e],[this])}},{key:"beforeDataLimits",value:function(){this._callHooks("beforeDataLimits")}},{key:"determineDataLimits",value:function(){}},{key:"afterDataLimits",value:function(){this._callHooks("afterDataLimits")}},{key:"beforeBuildTicks",value:function(){this._callHooks("beforeBuildTicks")}},{key:"buildTicks",value:function(){return[]}},{key:"afterBuildTicks",value:function(){this._callHooks("afterBuildTicks")}},{key:"beforeTickToLabelConversion",value:function(){w(this.options.beforeTickToLabelConversion,[this])}},{key:"generateTickLabels",value:function(e){var t,n,i,r=this.options.ticks;for(t=0,n=e.length;t<n;t++)(i=e[t]).label=w(r.callback,[i.value,t,e],this)}},{key:"afterTickToLabelConversion",value:function(){w(this.options.afterTickToLabelConversion,[this])}},{key:"beforeCalculateLabelRotation",value:function(){w(this.options.beforeCalculateLabelRotation,[this])}},{key:"calculateLabelRotation",value:function(){var e,t,n,i=this.options,r=i.ticks,s=this.ticks.length,a=r.minRotation||0,o=r.maxRotation,l=a;if(!this._isVisible()||!r.display||a>=o||s<=1||!this.isHorizontal())this.labelRotation=a;else{var c=this._getLabelSizes(),h=c.widest.width,u=c.highest.height,d=ae(this.chart.width-h,0,this.maxWidth);h+6>(e=i.offset?this.maxWidth/s:d/(s-1))&&(e=d/(s-(i.offset?.5:1)),t=this.maxHeight-Zi(i.grid)-r.padding-Ji(i.title,this.chart.options.font),n=Math.sqrt(h*h+u*u),l=ee(Math.min(Math.asin(ae((c.highest.height+6)/e,-1,1)),Math.asin(ae(t/n,-1,1))-Math.asin(ae(u/n,-1,1)))),l=Math.max(a,Math.min(o,l))),this.labelRotation=l}}},{key:"afterCalculateLabelRotation",value:function(){w(this.options.afterCalculateLabelRotation,[this])}},{key:"beforeFit",value:function(){w(this.options.beforeFit,[this])}},{key:"fit",value:function(){var e={width:0,height:0},t=this.chart,n=this.options,i=n.ticks,r=n.title,s=n.grid,a=this._isVisible(),o=this.isHorizontal();if(a){var l=Ji(r,t.options.font);if(o?(e.width=this.maxWidth,e.height=Zi(s)+l):(e.height=this.maxHeight,e.width=Zi(s)+l),i.display&&this.ticks.length){var c=this._getLabelSizes(),h=c.first,u=c.last,d=c.widest,g=c.highest,p=2*i.padding,f=J(this.labelRotation),m=Math.cos(f),v=Math.sin(f);if(o){var x=i.mirror?0:v*d.width+m*g.height;e.height=Math.min(this.maxHeight,e.height+x+p)}else{var A=i.mirror?0:m*d.width+v*g.height;e.width=Math.min(this.maxWidth,e.width+A+p)}this._calculatePadding(h,u,v,m)}}this._handleMargins(),o?(this.width=this._length=t.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=t.height-this._margins.top-this._margins.bottom)}},{key:"_calculatePadding",value:function(e,t,n,i){var r=this.options,s=r.ticks,a=s.align,o=s.padding,l=r.position,c=0!==this.labelRotation,h="top"!==l&&"x"===this.axis;if(this.isHorizontal()){var u=this.getPixelForTick(0)-this.left,d=this.right-this.getPixelForTick(this.ticks.length-1),g=0,p=0;c?h?(g=i*e.width,p=n*t.height):(g=n*e.height,p=i*t.width):"start"===a?p=t.width:"end"===a?g=e.width:(g=e.width/2,p=t.width/2),this.paddingLeft=Math.max((g-u+o)*this.width/(this.width-u),0),this.paddingRight=Math.max((p-d+o)*this.width/(this.width-d),0)}else{var f=t.height/2,m=e.height/2;"start"===a?(f=0,m=e.height):"end"===a&&(f=t.height,m=0),this.paddingTop=f+o,this.paddingBottom=m+o}}},{key:"_handleMargins",value:function(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}},{key:"afterFit",value:function(){w(this.options.afterFit,[this])}},{key:"isHorizontal",value:function(){var e=this.options,t=e.axis,n=e.position;return"top"===n||"bottom"===n||"x"===t}},{key:"isFullSize",value:function(){return this.options.fullSize}},{key:"_convertTicksToLabels",value:function(e){var t,n;for(this.beforeTickToLabelConversion(),this.generateTickLabels(e),t=0,n=e.length;t<n;t++)x(e[t].label)&&(e.splice(t,1),n--,t--);this.afterTickToLabelConversion()}},{key:"_getLabelSizes",value:function(){var e=this._labelSizes;if(!e){var t=this.options.ticks.sampleSize,n=this.ticks;t<n.length&&(n=Ki(n,t)),this._labelSizes=e=this._computeLabelSizes(n,n.length)}return e}},{key:"_computeLabelSizes",value:function(e,t){var n,i,r,s,a,o,l,c,h,u,d,g=this.ctx,p=this._longestTextCache,f=[],m=[],v=0,y=0;for(n=0;n<t;++n){if(s=e[n].label,a=this._resolveTickFontOptions(n),g.font=o=a.string,l=p[o]=p[o]||{data:{},gc:[]},c=a.lineHeight,h=u=0,x(s)||A(s)){if(A(s))for(i=0,r=s.length;i<r;++i)x(d=s[i])||A(d)||(h=Ze(g,l.data,l.gc,h,d),u+=c)}else h=Ze(g,l.data,l.gc,h,s),u=c;f.push(h),m.push(u),v=Math.max(h,v),y=Math.max(u,y)}!function(e,t){D(e,(function(e){var n,i=e.gc,r=i.length/2;if(r>t){for(n=0;n<r;++n)delete e.data[i[n]];i.splice(0,r)}}))}(p,t);var b=f.indexOf(v),j=m.indexOf(y),k=function(e){return{width:f[e]||0,height:m[e]||0}};return{first:k(0),last:k(t-1),widest:k(b),highest:k(j),widths:f,heights:m}}},{key:"getLabelForValue",value:function(e){return e}},{key:"getPixelForValue",value:function(e,t){return NaN}},{key:"getValueForPixel",value:function(e){}},{key:"getPixelForTick",value:function(e){var t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}},{key:"getPixelForDecimal",value:function(e){this._reversePixels&&(e=1-e);var t=this._startPixel+e*this._length;return ae(this._alignToPixels?et(this.chart,t,0):t,-32768,32767)}},{key:"getDecimalForPixel",value:function(e){var t=(e-this._startPixel)/this._length;return this._reversePixels?1-t:t}},{key:"getBasePixel",value:function(){return this.getPixelForValue(this.getBaseValue())}},{key:"getBaseValue",value:function(){var e=this.min,t=this.max;return e<0&&t<0?t:e>0&&t>0?e:0}},{key:"getContext",value:function(e){var t=this.ticks||[];if(e>=0&&e<t.length){var n=t[e];return n.$context||(n.$context=function(e,t,n){return yt(e,{tick:n,index:t,type:"tick"})}(this.getContext(),e,n))}return this.$context||(this.$context=yt(this.chart.getContext(),{scale:this,type:"scale"}))}},{key:"_tickSize",value:function(){var e=this.options.ticks,t=J(this.labelRotation),n=Math.abs(Math.cos(t)),i=Math.abs(Math.sin(t)),r=this._getLabelSizes(),s=e.autoSkipPadding||0,a=r?r.widest.width+s:0,o=r?r.highest.height+s:0;return this.isHorizontal()?o*n>a*i?a/n:o/i:o*i<a*n?o/n:a/i}},{key:"_isVisible",value:function(){var e=this.options.display;return"auto"!==e?!!e:this.getMatchingVisibleMetas().length>0}},{key:"_computeGridLineItems",value:function(e){var t,n,i,r,s,a,o,l,c,h,u,d,g=this.axis,p=this.chart,f=this.options,m=f.grid,v=f.position,x=m.offset,A=this.isHorizontal(),b=this.ticks.length+(x?1:0),j=Zi(m),_=[],w=m.setContext(this.getContext()),D=w.drawBorder?w.borderWidth:0,S=D/2,P=function(e){return et(p,e,D)};if("top"===v)t=P(this.bottom),a=this.bottom-j,l=t-S,h=P(e.top)+S,d=e.bottom;else if("bottom"===v)t=P(this.top),h=e.top,d=P(e.bottom)-S,a=t+S,l=this.top+j;else if("left"===v)t=P(this.right),s=this.right-j,o=t-S,c=P(e.left)+S,u=e.right;else if("right"===v)t=P(this.left),c=e.left,u=P(e.right)-S,s=t+S,o=this.left+j;else if("x"===g){if("center"===v)t=P((e.top+e.bottom)/2+.5);else if(y(v)){var M=Object.keys(v)[0],C=v[M];t=P(this.chart.scales[M].getPixelForValue(C))}h=e.top,d=e.bottom,l=(a=t+S)+j}else if("y"===g){if("center"===v)t=P((e.left+e.right)/2);else if(y(v)){var N=Object.keys(v)[0],I=v[N];t=P(this.chart.scales[N].getPixelForValue(I))}o=(s=t-S)-j,c=e.left,u=e.right}var O=k(f.ticks.maxTicksLimit,b),T=Math.max(1,Math.ceil(b/O));for(n=0;n<b;n+=T){var L=m.setContext(this.getContext(n)),R=L.lineWidth,E=L.color,F=m.borderDash||[],z=L.borderDashOffset,U=L.tickWidth,B=L.tickColor,Y=L.tickBorderDash||[],V=L.tickBorderDashOffset;void 0!==(i=$i(this,n,x))&&(r=et(p,i,R),A?s=o=c=u=r:a=l=h=d=r,_.push({tx1:s,ty1:a,tx2:o,ty2:l,x1:c,y1:h,x2:u,y2:d,width:R,color:E,borderDash:F,borderDashOffset:z,tickWidth:U,tickColor:B,tickBorderDash:Y,tickBorderDashOffset:V}))}return this._ticksLength=b,this._borderValue=t,_}},{key:"_computeLabelItems",value:function(e){var t,n,i,r,s,a,o,l,c,h,u,d=this.axis,g=this.options,p=g.position,f=g.ticks,m=this.isHorizontal(),v=this.ticks,x=f.align,b=f.crossAlign,j=f.padding,k=f.mirror,_=Zi(g.grid),w=_+j,D=k?-j:w,S=-J(this.labelRotation),P=[],M="middle";if("top"===p)s=this.bottom-D,a=this._getXAxisLabelAlignment();else if("bottom"===p)s=this.top+D,a=this._getXAxisLabelAlignment();else if("left"===p){var C=this._getYAxisLabelAlignment(_);a=C.textAlign,r=C.x}else if("right"===p){var N=this._getYAxisLabelAlignment(_);a=N.textAlign,r=N.x}else if("x"===d){if("center"===p)s=(e.top+e.bottom)/2+w;else if(y(p)){var I=Object.keys(p)[0],O=p[I];s=this.chart.scales[I].getPixelForValue(O)+w}a=this._getXAxisLabelAlignment()}else if("y"===d){if("center"===p)r=(e.left+e.right)/2-w;else if(y(p)){var T=Object.keys(p)[0],L=p[T];r=this.chart.scales[T].getPixelForValue(L)}a=this._getYAxisLabelAlignment(_).textAlign}"y"===d&&("start"===x?M="top":"end"===x&&(M="bottom"));var R=this._getLabelSizes();for(t=0,n=v.length;t<n;++t){i=v[t].label;var E=f.setContext(this.getContext(t));o=this.getPixelForTick(t)+f.labelOffset,c=(l=this._resolveTickFontOptions(t)).lineHeight;var F=(h=A(i)?i.length:1)/2,z=E.color,U=E.textStrokeColor,B=E.textStrokeWidth;m?(r=o,u="top"===p?"near"===b||0!==S?-h*c+c/2:"center"===b?-R.highest.height/2-F*c+c:-R.highest.height+c/2:"near"===b||0!==S?c/2:"center"===b?R.highest.height/2-F*c:R.highest.height-h*c,k&&(u*=-1)):(s=o,u=(1-h)*c/2);var Y=void 0;if(E.showLabelBackdrop){var V=vt(E.backdropPadding),q=R.heights[t],W=R.widths[t],H=s+u-V.top,G=r-V.left;switch(M){case"middle":H-=q/2;break;case"bottom":H-=q}switch(a){case"center":G-=W/2;break;case"right":G-=W}Y={left:G,top:H,width:W+V.width,height:q+V.height,color:E.backdropColor}}P.push({rotation:S,label:i,font:l,color:z,strokeColor:U,strokeWidth:B,textOffset:u,textAlign:a,textBaseline:M,translation:[r,s],backdrop:Y})}return P}},{key:"_getXAxisLabelAlignment",value:function(){var e=this.options,t=e.position,n=e.ticks;if(-J(this.labelRotation))return"top"===t?"left":"right";var i="center";return"start"===n.align?i="left":"end"===n.align&&(i="right"),i}},{key:"_getYAxisLabelAlignment",value:function(e){var t,n,i=this.options,r=i.position,s=i.ticks,a=s.crossAlign,o=s.mirror,l=s.padding,c=e+l,h=this._getLabelSizes().widest.width;return"left"===r?o?(n=this.right+l,"near"===a?t="left":"center"===a?(t="center",n+=h/2):(t="right",n+=h)):(n=this.right-c,"near"===a?t="right":"center"===a?(t="center",n-=h/2):(t="left",n=this.left)):"right"===r?o?(n=this.left+l,"near"===a?t="right":"center"===a?(t="center",n-=h/2):(t="left",n-=h)):(n=this.left+c,"near"===a?t="left":"center"===a?(t="center",n+=h/2):(t="right",n=this.right)):t="right",{textAlign:t,x:n}}},{key:"_computeLabelArea",value:function(){if(!this.options.ticks.mirror){var e=this.chart,t=this.options.position;return"left"===t||"right"===t?{top:0,left:this.left,bottom:e.height,right:this.right}:"top"===t||"bottom"===t?{top:this.top,left:0,bottom:this.bottom,right:e.width}:void 0}}},{key:"drawBackground",value:function(){var e=this.ctx,t=this.options.backgroundColor,n=this.left,i=this.top,r=this.width,s=this.height;t&&(e.save(),e.fillStyle=t,e.fillRect(n,i,r,s),e.restore())}},{key:"getLineWidthForValue",value:function(e){var t=this.options.grid;if(!this._isVisible()||!t.display)return 0;var n=this.ticks.findIndex((function(t){return t.value===e}));return n>=0?t.setContext(this.getContext(n)).lineWidth:0}},{key:"drawGrid",value:function(e){var t,n,i=this.options.grid,r=this.ctx,s=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e)),a=function(e,t,n){n.width&&n.color&&(r.save(),r.lineWidth=n.width,r.strokeStyle=n.color,r.setLineDash(n.borderDash||[]),r.lineDashOffset=n.borderDashOffset,r.beginPath(),r.moveTo(e.x,e.y),r.lineTo(t.x,t.y),r.stroke(),r.restore())};if(i.display)for(t=0,n=s.length;t<n;++t){var o=s[t];i.drawOnChartArea&&a({x:o.x1,y:o.y1},{x:o.x2,y:o.y2},o),i.drawTicks&&a({x:o.tx1,y:o.ty1},{x:o.tx2,y:o.ty2},{color:o.tickColor,width:o.tickWidth,borderDash:o.tickBorderDash,borderDashOffset:o.tickBorderDashOffset})}}},{key:"drawBorder",value:function(){var e=this.chart,t=this.ctx,n=this.options.grid,i=n.setContext(this.getContext()),r=n.drawBorder?i.borderWidth:0;if(r){var s,a,o,l,c=n.setContext(this.getContext(0)).lineWidth,h=this._borderValue;this.isHorizontal()?(s=et(e,this.left,r)-r/2,a=et(e,this.right,c)+c/2,o=l=h):(o=et(e,this.top,r)-r/2,l=et(e,this.bottom,c)+c/2,s=a=h),t.save(),t.lineWidth=i.borderWidth,t.strokeStyle=i.borderColor,t.beginPath(),t.moveTo(s,o),t.lineTo(a,l),t.stroke(),t.restore()}}},{key:"drawLabels",value:function(e){if(this.options.ticks.display){var t=this.ctx,n=this._computeLabelArea();n&&rt(t,n);var i,r,s=this._labelItems||(this._labelItems=this._computeLabelItems(e));for(i=0,r=s.length;i<r;++i){var a=s[i],o=a.font,l=a.label;a.backdrop&&(t.fillStyle=a.backdrop.color,t.fillRect(a.backdrop.left,a.backdrop.top,a.backdrop.width,a.backdrop.height)),lt(t,l,0,a.textOffset,o,a)}n&&st(t)}}},{key:"drawTitle",value:function(){var e=this.ctx,t=this.options,n=t.position,i=t.title,r=t.reverse;if(i.display){var s=xt(i.font),a=vt(i.padding),o=i.align,l=s.lineHeight/2;"bottom"===n||"center"===n||y(n)?(l+=a.bottom,A(i.text)&&(l+=s.lineHeight*(i.text.length-1))):l+=a.top;var c=function(e,t,n,i){var r,s,a,o=e.top,l=e.left,c=e.bottom,h=e.right,u=e.chart,d=u.chartArea,g=u.scales,p=0,m=c-o,v=h-l;if(e.isHorizontal()){if(s=f(i,l,h),y(n)){var x=Object.keys(n)[0],A=n[x];a=g[x].getPixelForValue(A)+m-t}else a="center"===n?(d.bottom+d.top)/2+m-t:Xi(e,n,t);r=h-l}else{if(y(n)){var b=Object.keys(n)[0],j=n[b];s=g[b].getPixelForValue(j)-v+t}else s="center"===n?(d.left+d.right)/2-v+t:Xi(e,n,t);a=f(i,c,o),p="left"===n?-q:q}return{titleX:s,titleY:a,maxWidth:r,rotation:p}}(this,l,n,o),h=c.titleX,u=c.titleY,d=c.maxWidth,g=c.rotation;lt(e,i.text,0,0,s,{color:i.color,maxWidth:d,rotation:g,textAlign:er(o,n,r),textBaseline:"middle",translation:[h,u]})}}},{key:"draw",value:function(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}},{key:"_layers",value:function(){var e=this,n=this.options,i=n.ticks&&n.ticks.z||0,r=k(n.grid&&n.grid.z,-1);return this._isVisible()&&this.draw===t.prototype.draw?[{z:r,draw:function(t){e.drawBackground(),e.drawGrid(t),e.drawTitle()}},{z:r+1,draw:function(){e.drawBorder()}},{z:i,draw:function(t){e.drawLabels(t)}}]:[{z:i,draw:function(t){e.draw(t)}}]}},{key:"getMatchingVisibleMetas",value:function(e){var t,n,i=this.chart.getSortedVisibleDatasetMetas(),r=this.axis+"AxisID",s=[];for(t=0,n=i.length;t<n;++t){var a=i[t];a[r]!==this.id||e&&a.type!==e||s.push(a)}return s}},{key:"_resolveTickFontOptions",value:function(e){return xt(this.options.ticks.setContext(this.getContext(e)).font)}},{key:"_maxDigits",value:function(){var e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}])}(qi),nr=function(){return(0,u.A)((function e(t,n,i){(0,h.A)(this,e),this.type=t,this.scope=n,this.override=i,this.items=Object.create(null)}),[{key:"isForType",value:function(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}},{key:"register",value:function(e){var t,n=Object.getPrototypeOf(e);(function(e){return"id"in e&&"defaults"in e})(n)&&(t=this.register(n));var i=this.items,r=e.id,s=this.scope+"."+r;if(!r)throw new Error("class does not have id: "+e);return r in i||(i[r]=e,function(e,t,n){var i=N(Object.create(null),[n?$e.get(n):{},$e.get(t),e.defaults]);$e.set(t,i),e.defaultRoutes&&function(e,t){Object.keys(t).forEach((function(n){var i=n.split("."),r=i.pop(),s=[e].concat(i).join("."),a=t[n].split("."),o=a.pop(),l=a.join(".");$e.route(s,r,l,o)}))}(t,e.defaultRoutes);e.descriptors&&$e.describe(t,e.descriptors)}(e,s,t),this.override&&$e.override(e.id,e.overrides)),s}},{key:"get",value:function(e){return this.items[e]}},{key:"unregister",value:function(e){var t=this.items,n=e.id,i=this.scope;n in t&&delete t[n],i&&n in $e[i]&&(delete $e[i][n],this.override&&delete He[n])}}])}();var ir=function(){return(0,u.A)((function e(){(0,h.A)(this,e),this.controllers=new nr(zn,"datasets",!0),this.elements=new nr(qi,"elements"),this.plugins=new nr(Object,"plugins"),this.scales=new nr(tr,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}),[{key:"add",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("register",t)}},{key:"remove",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("unregister",t)}},{key:"addControllers",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("register",t,this.controllers)}},{key:"addElements",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("register",t,this.elements)}},{key:"addPlugins",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("register",t,this.plugins)}},{key:"addScales",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("register",t,this.scales)}},{key:"getController",value:function(e){return this._get(e,this.controllers,"controller")}},{key:"getElement",value:function(e){return this._get(e,this.elements,"element")}},{key:"getPlugin",value:function(e){return this._get(e,this.plugins,"plugin")}},{key:"getScale",value:function(e){return this._get(e,this.scales,"scale")}},{key:"removeControllers",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("unregister",t,this.controllers)}},{key:"removeElements",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("unregister",t,this.elements)}},{key:"removePlugins",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("unregister",t,this.plugins)}},{key:"removeScales",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("unregister",t,this.scales)}},{key:"_each",value:function(e,t,n){var i=this;(0,c.A)(t).forEach((function(t){var r=n||i._getRegistryForType(t);n||r.isForType(t)||r===i.plugins&&t.id?i._exec(e,r,t):D(t,(function(t){var r=n||i._getRegistryForType(t);i._exec(e,r,t)}))}))}},{key:"_exec",value:function(e,t,n){var i=R(e);w(n["before"+i],[],n),t[e](n),w(n["after"+i],[],n)}},{key:"_getRegistryForType",value:function(e){for(var t=0;t<this._typedRegistries.length;t++){var n=this._typedRegistries[t];if(n.isForType(e))return n}return this.plugins}},{key:"_get",value:function(e,t,n){var i=t.get(e);if(void 0===i)throw new Error('"'+e+'" is not a registered '+n+".");return i}}])}(),rr=new ir,sr=function(){return(0,u.A)((function e(){(0,h.A)(this,e),this._init=[]}),[{key:"notify",value:function(e,t,n,i){"beforeInit"===t&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));var r=i?this._descriptors(e).filter(i):this._descriptors(e),s=this._notify(r,e,t,n);return"destroy"===t&&(this._notify(r,e,"stop"),this._notify(this._init,e,"uninstall")),s}},{key:"_notify",value:function(e,t,n,i){i=i||{};var r,s=(0,l.A)(e);try{for(s.s();!(r=s.n()).done;){var a=r.value,o=a.plugin;if(!1===w(o[n],[t,i,a.options],o)&&i.cancelable)return!1}}catch(c){s.e(c)}finally{s.f()}return!0}},{key:"invalidate",value:function(){x(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}},{key:"_descriptors",value:function(e){if(this._cache)return this._cache;var t=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),t}},{key:"_createDescriptors",value:function(e,t){var n=e&&e.config,i=k(n.options&&n.options.plugins,{}),r=function(e){for(var t=[],n=Object.keys(rr.plugins.items),i=0;i<n.length;i++)t.push(rr.getPlugin(n[i]));for(var r=e.plugins||[],s=0;s<r.length;s++){var a=r[s];-1===t.indexOf(a)&&t.push(a)}return t}(n);return!1!==i||t?function(e,t,n,i){for(var r=[],s=e.getContext(),a=0;a<t.length;a++){var o=t[a],l=ar(n[o.id],i);null!==l&&r.push({plugin:o,options:or(e.config,o,l,s)})}return r}(e,r,i,t):[]}},{key:"_notifyStateChanges",value:function(e){var t=this._oldCache||[],n=this._cache,i=function(e,t){return e.filter((function(e){return!t.some((function(t){return e.plugin.id===t.plugin.id}))}))};this._notify(i(t,n),e,"stop"),this._notify(i(n,t),e,"start")}}])}();function ar(e,t){return t||!1!==e?!0===e?{}:e:null}function or(e,t,n,i){var r=e.pluginScopeKeys(t),s=e.getOptionScopes(n,r);return e.createResolver(s,i,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function lr(e,t){var n=$e.datasets[e]||{};return((t.datasets||{})[e]||{}).indexAxis||t.indexAxis||n.indexAxis||"x"}function cr(e,t){return"x"===e||"y"===e?e:t.axis||("top"===(n=t.position)||"bottom"===n?"x":"left"===n||"right"===n?"y":void 0)||e.charAt(0).toLowerCase();var n}function hr(e){var t=e.options||(e.options={});t.plugins=k(t.plugins,{}),t.scales=function(e,t){var n=He[e.type]||{scales:{}},i=t.scales||{},r=lr(e.type,t),s=Object.create(null),a=Object.create(null);return Object.keys(i).forEach((function(e){var t=i[e];if(!y(t))return console.error("Invalid scale configuration for scale: ".concat(e));if(t._proxy)return console.warn("Ignoring resolver passed as options for scale: ".concat(e));var o=cr(e,t),l=function(e,t){return e===t?"_index_":"_value_"}(o,r),c=n.scales||{};s[o]=s[o]||e,a[e]=I(Object.create(null),[{axis:o},t,c[o],c[l]])})),e.data.datasets.forEach((function(n){var r=n.type||e.type,o=n.indexAxis||lr(r,t),l=(He[r]||{}).scales||{};Object.keys(l).forEach((function(e){var t=function(e,t){var n=e;return"_index_"===e?n=t:"_value_"===e&&(n="x"===t?"y":"x"),n}(e,o),r=n[t+"AxisID"]||s[t]||t;a[r]=a[r]||Object.create(null),I(a[r],[{axis:t},i[r],l[e]])}))})),Object.keys(a).forEach((function(e){var t=a[e];I(t,[$e.scales[t.type],$e.scale])})),a}(e,t)}function ur(e){return(e=e||{}).datasets=e.datasets||[],e.labels=e.labels||[],e}var dr=new Map,gr=new Set;function pr(e,t){var n=dr.get(e);return n||(n=t(),dr.set(e,n),gr.add(n)),n}var fr=function(e,t,n){var i=L(t,n);void 0!==i&&e.add(i)},mr=function(){return(0,u.A)((function e(t){(0,h.A)(this,e),this._config=function(e){return(e=e||{}).data=ur(e.data),hr(e),e}(t),this._scopeCache=new Map,this._resolverCache=new Map}),[{key:"platform",get:function(){return this._config.platform}},{key:"type",get:function(){return this._config.type},set:function(e){this._config.type=e}},{key:"data",get:function(){return this._config.data},set:function(e){this._config.data=ur(e)}},{key:"options",get:function(){return this._config.options},set:function(e){this._config.options=e}},{key:"plugins",get:function(){return this._config.plugins}},{key:"update",value:function(){var e=this._config;this.clearCache(),hr(e)}},{key:"clearCache",value:function(){this._scopeCache.clear(),this._resolverCache.clear()}},{key:"datasetScopeKeys",value:function(e){return pr(e,(function(){return[["datasets.".concat(e),""]]}))}},{key:"datasetAnimationScopeKeys",value:function(e,t){return pr("".concat(e,".transition.").concat(t),(function(){return[["datasets.".concat(e,".transitions.").concat(t),"transitions.".concat(t)],["datasets.".concat(e),""]]}))}},{key:"datasetElementScopeKeys",value:function(e,t){return pr("".concat(e,"-").concat(t),(function(){return[["datasets.".concat(e,".elements.").concat(t),"datasets.".concat(e),"elements.".concat(t),""]]}))}},{key:"pluginScopeKeys",value:function(e){var t=e.id,n=this.type;return pr("".concat(n,"-plugin-").concat(t),(function(){return[["plugins.".concat(t)].concat((0,c.A)(e.additionalOptionScopes||[]))]}))}},{key:"_cachedScopes",value:function(e,t){var n=this._scopeCache,i=n.get(e);return i&&!t||(i=new Map,n.set(e,i)),i}},{key:"getOptionScopes",value:function(e,t,n){var i=this.options,r=this.type,s=this._cachedScopes(e,n),a=s.get(t);if(a)return a;var o=new Set;t.forEach((function(t){e&&(o.add(e),t.forEach((function(t){return fr(o,e,t)}))),t.forEach((function(e){return fr(o,i,e)})),t.forEach((function(e){return fr(o,He[r]||{},e)})),t.forEach((function(e){return fr(o,$e,e)})),t.forEach((function(e){return fr(o,Ge,e)}))}));var l=Array.from(o);return 0===l.length&&l.push(Object.create(null)),gr.has(t)&&s.set(t,l),l}},{key:"chartOptionScopes",value:function(){var e=this.options,t=this.type;return[e,He[t]||{},$e.datasets[t]||{},{type:t},$e,Ge]}},{key:"resolveNamedOptions",value:function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[""],r={$shared:!0},s=vr(this._resolverCache,e,i),a=s.resolver,o=s.subPrefixes,c=a;(function(e,t){var n,i=Mt(e),r=i.isScriptable,s=i.isIndexable,a=(0,l.A)(t);try{for(a.s();!(n=a.n()).done;){var o=n.value,c=r(o),h=s(o),u=(h||c)&&e[o];if(c&&(F(u)||xr(u))||h&&A(u))return!0}}catch(d){a.e(d)}finally{a.f()}return!1})(a,t)&&(r.$shared=!1,c=Pt(a,n=F(n)?n():n,this.createResolver(e,n,o)));var h,u=(0,l.A)(t);try{for(u.s();!(h=u.n()).done;){var d=h.value;r[d]=c[d]}}catch(g){u.e(g)}finally{u.f()}return r}},{key:"createResolver",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[""],i=arguments.length>3?arguments[3]:void 0,r=vr(this._resolverCache,e,n).resolver;return y(t)?Pt(r,t,void 0,i):r}}])}();function vr(e,t,n){var i=e.get(t);i||(i=new Map,e.set(t,i));var r=n.join(),s=i.get(r);s||(s={resolver:St(t,n),subPrefixes:n.filter((function(e){return!e.toLowerCase().includes("hover")}))},i.set(r,s));return s}var xr=function(e){return y(e)&&Object.getOwnPropertyNames(e).reduce((function(t,n){return t||F(e[n])}),!1)};var Ar=["top","bottom","left","right","chartArea"];function yr(e,t){return"top"===e||"bottom"===e||-1===Ar.indexOf(e)&&"x"===t}function br(e,t){return function(n,i){return n[e]===i[e]?n[t]-i[t]:n[e]-i[e]}}function jr(e){var t=e.chart,n=t.options.animation;t.notifyPlugins("afterRender"),w(n&&n.onComplete,[e],t)}function kr(e){var t=e.chart,n=t.options.animation;w(n&&n.onProgress,[e],t)}function _r(e){return Gt()&&"string"===typeof e?e=document.getElementById(e):e&&e.length&&(e=e[0]),e&&e.canvas&&(e=e.canvas),e}var wr={},Dr=function(e){var t=_r(e);return Object.values(wr).filter((function(e){return e.canvas===t})).pop()},Sr=function(){return(0,u.A)((function e(t,n){var i=this;(0,h.A)(this,e);var r=this.config=new mr(n),s=_r(t),a=Dr(s);if(a)throw new Error("Canvas is already in use. Chart with ID '"+a.id+"' must be destroyed before the canvas can be reused.");var o=r.createResolver(r.chartOptionScopes(),this.getContext());this.platform=new(r.platform||function(e){return!Gt()||"undefined"!==typeof OffscreenCanvas&&e instanceof OffscreenCanvas?Mi:Vi}(s)),this.platform.updateConfig(r);var l=this.platform.acquireContext(s,o.aspectRatio),c=l&&l.canvas,u=c&&c.height,d=c&&c.width;this.id=v(),this.ctx=l,this.canvas=c,this.width=d,this.height=u,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new sr,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=function(e,t){var n;return function(){for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return t?(clearTimeout(n),n=setTimeout(e,t,r)):e.apply(this,r),t}}((function(e){return i.update(e)}),o.resizeDelay||0),wr[this.id]=this,l&&c?(jn.listen(this,"complete",jr),jn.listen(this,"progress",kr),this._initialize(),this.attached&&this.update()):console.error("Failed to create chart: can't acquire context from the given item")}),[{key:"aspectRatio",get:function(){var e=this.options,t=e.aspectRatio,n=e.maintainAspectRatio,i=this.width,r=this.height,s=this._aspectRatio;return x(t)?n&&s?s:r?i/r:null:t}},{key:"data",get:function(){return this.config.data},set:function(e){this.config.data=e}},{key:"options",get:function(){return this._options},set:function(e){this.config.options=e}},{key:"_initialize",value:function(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():nn(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}},{key:"clear",value:function(){return tt(this.canvas,this.ctx),this}},{key:"stop",value:function(){return jn.stop(this),this}},{key:"resize",value:function(e,t){jn.running(this)?this._resizeBeforeDraw={width:e,height:t}:this._resize(e,t)}},{key:"_resize",value:function(e,t){var n=this.options,i=this.canvas,r=n.maintainAspectRatio&&this.aspectRatio,s=this.platform.getMaximumSize(i,e,t,r),a=n.devicePixelRatio||this.platform.getDevicePixelRatio(),o=this.width?"resize":"attach";this.width=s.width,this.height=s.height,this._aspectRatio=this.aspectRatio,nn(this,a,!0)&&(this.notifyPlugins("resize",{size:s}),w(n.onResize,[this,s],this),this.attached&&this._doResize(o)&&this.render())}},{key:"ensureScalesHaveIDs",value:function(){D(this.options.scales||{},(function(e,t){e.id=t}))}},{key:"buildOrUpdateScales",value:function(){var e=this,t=this.options,n=t.scales,i=this.scales,r=Object.keys(i).reduce((function(e,t){return e[t]=!1,e}),{}),s=[];n&&(s=s.concat(Object.keys(n).map((function(e){var t=n[e],i=cr(e,t),r="r"===i,s="x"===i;return{options:t,dposition:r?"chartArea":s?"bottom":"left",dtype:r?"radialLinear":s?"category":"linear"}})))),D(s,(function(n){var s=n.options,a=s.id,o=cr(a,s),l=k(s.type,n.dtype);void 0!==s.position&&yr(s.position,o)===yr(n.dposition)||(s.position=n.dposition),r[a]=!0;var c=null;a in i&&i[a].type===l?c=i[a]:(c=new(rr.getScale(l))({id:a,type:l,ctx:e.ctx,chart:e}),i[c.id]=c);c.init(s,t)})),D(r,(function(e,t){e||delete i[t]})),D(i,(function(t){Di(e,t,t.options),_i(e,t)}))}},{key:"_updateMetasets",value:function(){var e=this._metasets,t=this.data.datasets.length,n=e.length;if(e.sort((function(e,t){return e.index-t.index})),n>t){for(var i=t;i<n;++i)this._destroyDatasetMeta(i);e.splice(t,n-t)}this._sortedMetasets=e.slice(0).sort(br("order","index"))}},{key:"_removeUnreferencedMetasets",value:function(){var e=this,t=this._metasets,n=this.data.datasets;t.length>n.length&&delete this._stacks,t.forEach((function(t,i){0===n.filter((function(e){return e===t._dataset})).length&&e._destroyDatasetMeta(i)}))}},{key:"buildOrUpdateControllers",value:function(){var e,t,n=[],i=this.data.datasets;for(this._removeUnreferencedMetasets(),e=0,t=i.length;e<t;e++){var r=i[e],s=this.getDatasetMeta(e),a=r.type||this.config.type;if(s.type&&s.type!==a&&(this._destroyDatasetMeta(e),s=this.getDatasetMeta(e)),s.type=a,s.indexAxis=r.indexAxis||lr(a,this.options),s.order=r.order||0,s.index=e,s.label=""+r.label,s.visible=this.isDatasetVisible(e),s.controller)s.controller.updateIndex(e),s.controller.linkScales();else{var o=rr.getController(a),l=$e.datasets[a],c=l.datasetElementType,h=l.dataElementType;Object.assign(o.prototype,{dataElementType:rr.getElement(h),datasetElementType:c&&rr.getElement(c)}),s.controller=new o(this,e),n.push(s.controller)}}return this._updateMetasets(),n}},{key:"_resetElements",value:function(){var e=this;D(this.data.datasets,(function(t,n){e.getDatasetMeta(n).controller.reset()}),this)}},{key:"reset",value:function(){this._resetElements(),this.notifyPlugins("reset")}},{key:"update",value:function(e){var t=this,n=this.config;n.update();var i=this._options=n.createResolver(n.chartOptionScopes(),this.getContext());D(this.scales,(function(e){wi(t,e)}));var r=this._animationsDisabled=!i.animation;if(this.ensureScalesHaveIDs(),this.buildOrUpdateScales(),function(e,t){if(e.size!==t.size)return!1;var n,i=(0,l.A)(e);try{for(i.s();!(n=i.n()).done;){var r=n.value;if(!t.has(r))return!1}}catch(s){i.e(s)}finally{i.f()}return!0}(new Set(Object.keys(this._listeners)),new Set(i.events))&&!!this._responsiveListeners===i.responsive||(this.unbindEvents(),this.bindEvents()),this._plugins.invalidate(),!1!==this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})){var s=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");for(var a=0,o=0,c=this.data.datasets.length;o<c;o++){var h=this.getDatasetMeta(o).controller,u=!r&&-1===s.indexOf(h);h.buildOrUpdateElements(u),a=Math.max(+h.getMaxOverflow(),a)}a=this._minPadding=i.layout.autoPadding?a:0,this._updateLayout(a),r||D(s,(function(e){e.reset()})),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(br("z","_idx")),this._lastEvent&&this._eventHandler(this._lastEvent,!0),this.render()}}},{key:"_updateLayout",value:function(e){var t=this;if(!1!==this.notifyPlugins("beforeLayout",{cancelable:!0})){Si(this,this.width,this.height,e);var n=this.chartArea,i=n.width<=0||n.height<=0;this._layers=[],D(this.boxes,(function(e){var n;i&&"chartArea"===e.position||(e.configure&&e.configure(),(n=t._layers).push.apply(n,(0,c.A)(e._layers())))}),this),this._layers.forEach((function(e,t){e._idx=t})),this.notifyPlugins("afterLayout")}}},{key:"_updateDatasets",value:function(e){if(!1!==this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})){for(var t=0,n=this.data.datasets.length;t<n;++t)this._updateDataset(t,F(e)?e({datasetIndex:t}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}},{key:"_updateDataset",value:function(e,t){var n=this.getDatasetMeta(e),i={meta:n,index:e,mode:t,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetUpdate",i)&&(n.controller._update(t),i.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",i))}},{key:"render",value:function(){!1!==this.notifyPlugins("beforeRender",{cancelable:!0})&&(jn.has(this)?this.attached&&!jn.running(this)&&jn.start(this):(this.draw(),jr({chart:this})))}},{key:"draw",value:function(){var e;if(this._resizeBeforeDraw){var t=this._resizeBeforeDraw,n=t.width,i=t.height;this._resize(n,i),this._resizeBeforeDraw=null}if(this.clear(),!(this.width<=0||this.height<=0)&&!1!==this.notifyPlugins("beforeDraw",{cancelable:!0})){var r=this._layers;for(e=0;e<r.length&&r[e].z<=0;++e)r[e].draw(this.chartArea);for(this._drawDatasets();e<r.length;++e)r[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}}},{key:"_getSortedDatasetMetas",value:function(e){var t,n,i=this._sortedMetasets,r=[];for(t=0,n=i.length;t<n;++t){var s=i[t];e&&!s.visible||r.push(s)}return r}},{key:"getSortedVisibleDatasetMetas",value:function(){return this._getSortedDatasetMetas(!0)}},{key:"_drawDatasets",value:function(){if(!1!==this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})){for(var e=this.getSortedVisibleDatasetMetas(),t=e.length-1;t>=0;--t)this._drawDataset(e[t]);this.notifyPlugins("afterDatasetsDraw")}}},{key:"_drawDataset",value:function(e){var t=this.ctx,n=e._clip,i=!n.disabled,r=this.chartArea,s={meta:e,index:e.index,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetDraw",s)&&(i&&rt(t,{left:!1===n.left?0:r.left-n.left,right:!1===n.right?this.width:r.right+n.right,top:!1===n.top?0:r.top-n.top,bottom:!1===n.bottom?this.height:r.bottom+n.bottom}),e.controller.draw(),i&&st(t),s.cancelable=!1,this.notifyPlugins("afterDatasetDraw",s))}},{key:"getElementsAtEventForMode",value:function(e,t,n,i){var r=ui.modes[t];return"function"===typeof r?r(this,e,n,i):[]}},{key:"getDatasetMeta",value:function(e){var t=this.data.datasets[e],n=this._metasets,i=n.filter((function(e){return e&&e._dataset===t})).pop();return i||(i={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:t&&t.order||0,index:e,_dataset:t,_parsed:[],_sorted:!1},n.push(i)),i}},{key:"getContext",value:function(){return this.$context||(this.$context=yt(null,{chart:this,type:"chart"}))}},{key:"getVisibleDatasetCount",value:function(){return this.getSortedVisibleDatasetMetas().length}},{key:"isDatasetVisible",value:function(e){var t=this.data.datasets[e];if(!t)return!1;var n=this.getDatasetMeta(e);return"boolean"===typeof n.hidden?!n.hidden:!t.hidden}},{key:"setDatasetVisibility",value:function(e,t){this.getDatasetMeta(e).hidden=!t}},{key:"toggleDataVisibility",value:function(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}},{key:"getDataVisibility",value:function(e){return!this._hiddenIndices[e]}},{key:"_updateVisibility",value:function(e,t,n){var i=n?"show":"hide",r=this.getDatasetMeta(e),s=r.controller._resolveAnimations(void 0,i);E(t)?(r.data[t].hidden=!n,this.update()):(this.setDatasetVisibility(e,n),s.update(r,{visible:n}),this.update((function(t){return t.datasetIndex===e?i:void 0})))}},{key:"hide",value:function(e,t){this._updateVisibility(e,t,!1)}},{key:"show",value:function(e,t){this._updateVisibility(e,t,!0)}},{key:"_destroyDatasetMeta",value:function(e){var t=this._metasets[e];t&&t.controller&&t.controller._destroy(),delete this._metasets[e]}},{key:"_stop",value:function(){var e,t;for(this.stop(),jn.remove(this),e=0,t=this.data.datasets.length;e<t;++e)this._destroyDatasetMeta(e)}},{key:"destroy",value:function(){var e=this.canvas,t=this.ctx;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),tt(e,t),this.platform.releaseContext(t),this.canvas=null,this.ctx=null),this.notifyPlugins("destroy"),delete wr[this.id]}},{key:"toBase64Image",value:function(){var e;return(e=this.canvas).toDataURL.apply(e,arguments)}},{key:"bindEvents",value:function(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}},{key:"bindUserEvents",value:function(){var e=this,t=this._listeners,n=this.platform,i=function(t,n,i){t.offsetX=n,t.offsetY=i,e._eventHandler(t)};D(this.options.events,(function(r){return function(i,r){n.addEventListener(e,i,r),t[i]=r}(r,i)}))}},{key:"bindResponsiveEvents",value:function(){var e=this;this._responsiveListeners||(this._responsiveListeners={});var t,n=this._responsiveListeners,i=this.platform,r=function(t,r){i.addEventListener(e,t,r),n[t]=r},s=function(t,r){n[t]&&(i.removeEventListener(e,t,r),delete n[t])},a=function(t,n){e.canvas&&e.resize(t,n)},o=function(){s("attach",o),e.attached=!0,e.resize(),r("resize",a),r("detach",t)};t=function(){e.attached=!1,s("resize",a),e._stop(),e._resize(0,0),r("attach",o)},i.isAttached(this.canvas)?o():t()}},{key:"unbindEvents",value:function(){var e=this;D(this._listeners,(function(t,n){e.platform.removeEventListener(e,n,t)})),this._listeners={},D(this._responsiveListeners,(function(t,n){e.platform.removeEventListener(e,n,t)})),this._responsiveListeners=void 0}},{key:"updateHoverStyle",value:function(e,t,n){var i,r,s,a=n?"set":"remove";for("dataset"===t&&this.getDatasetMeta(e[0].datasetIndex).controller["_"+a+"DatasetHoverStyle"](),r=0,s=e.length;r<s;++r){var o=(i=e[r])&&this.getDatasetMeta(i.datasetIndex).controller;o&&o[a+"HoverStyle"](i.element,i.datasetIndex,i.index)}}},{key:"getActiveElements",value:function(){return this._active||[]}},{key:"setActiveElements",value:function(e){var t=this,n=this._active||[],i=e.map((function(e){var n=e.datasetIndex,i=e.index,r=t.getDatasetMeta(n);if(!r)throw new Error("No dataset found at index "+n);return{datasetIndex:n,element:r.data[i],index:i}}));!S(i,n)&&(this._active=i,this._updateHoverStyles(i,n))}},{key:"notifyPlugins",value:function(e,t,n){return this._plugins.notify(this,e,t,n)}},{key:"_updateHoverStyles",value:function(e,t,n){var i=this.options.hover,r=function(e,t){return e.filter((function(e){return!t.some((function(t){return e.datasetIndex===t.datasetIndex&&e.index===t.index}))}))},s=r(t,e),a=n?e:r(e,t);s.length&&this.updateHoverStyle(s,i.mode,!1),a.length&&i.mode&&this.updateHoverStyle(a,i.mode,!0)}},{key:"_eventHandler",value:function(e,t){var n=this,i={event:e,replay:t,cancelable:!0},r=function(t){return(t.options.events||n.options.events).includes(e.native.type)};if(!1!==this.notifyPlugins("beforeEvent",i,r)){var s=this._handleEvent(e,t);return i.cancelable=!1,this.notifyPlugins("afterEvent",i,r),(s||i.changed)&&this.render(),this}}},{key:"_handleEvent",value:function(e,t){var n,i=this._active,r=void 0===i?[]:i,s=this.options,a=s.hover,o=t,l=[],c=null;return"mouseout"!==e.type&&(l=this.getElementsAtEventForMode(e,a.mode,a,o),c="click"===e.type?this._lastEvent:e),this._lastEvent=null,it(e,this.chartArea,this._minPadding)&&(w(s.onHover,[e,l,this],this),"mouseup"!==e.type&&"click"!==e.type&&"contextmenu"!==e.type||w(s.onClick,[e,l,this],this)),((n=!S(l,r))||t)&&(this._active=l,this._updateHoverStyles(l,r,t)),this._lastEvent=c,n}}])}(),Pr=function(){return D(Sr.instances,(function(e){return e._plugins.invalidate()}))},Mr=!0;function Cr(e,t,n){var i=t.startAngle,r=t.pixelMargin,s=t.x,a=t.y,o=t.outerRadius,l=t.innerRadius,c=r/o;e.beginPath(),e.arc(s,a,o,i-c,n+c),l>r?(c=r/l,e.arc(s,a,l,n+c,i-c,!0)):e.arc(s,a,r,n+q,i-q),e.closePath(),e.clip()}function Nr(e,t,n,i){var r=pt(e.options.borderRadius,["outerStart","outerEnd","innerStart","innerEnd"]),s=(n-t)/2,a=Math.min(s,i*t/2),o=function(e){var t=(n-Math.min(s,e))*i/2;return ae(e,0,Math.min(s,t))};return{outerStart:o(r.outerStart),outerEnd:o(r.outerEnd),innerStart:ae(r.innerStart,0,a),innerEnd:ae(r.innerEnd,0,a)}}function Ir(e,t,n,i){return{x:n+e*Math.cos(t),y:i+e*Math.sin(t)}}function Or(e,t,n,i,r){var s=t.x,a=t.y,o=t.startAngle,l=t.pixelMargin,c=t.innerRadius,h=Math.max(t.outerRadius+i+n-l,0),u=c>0?c+i+n+l:0,d=0,g=r-o;if(i){var p=((c>0?c-i:0)+(h>0?h-i:0))/2;d=(g-(0!==p?g*p/(p+i):g))/2}var f=(g-Math.max(.001,g*h-n/z)/h)/2,m=o+f+d,v=r-f-d,x=Nr(t,u,h,v-m),A=x.outerStart,y=x.outerEnd,b=x.innerStart,j=x.innerEnd,k=h-A,_=h-y,w=m+A/k,D=v-y/_,S=u+b,P=u+j,M=m+b/S,C=v-j/P;if(e.beginPath(),e.arc(s,a,h,w,D),y>0){var N=Ir(_,D,s,a);e.arc(N.x,N.y,y,D,v+q)}var I=Ir(P,v,s,a);if(e.lineTo(I.x,I.y),j>0){var O=Ir(P,C,s,a);e.arc(O.x,O.y,j,v+q,C+Math.PI)}if(e.arc(s,a,u,v-j/u,m+b/u,!0),b>0){var T=Ir(S,M,s,a);e.arc(T.x,T.y,b,M+Math.PI,m-q)}var L=Ir(k,m,s,a);if(e.lineTo(L.x,L.y),A>0){var R=Ir(k,w,s,a);e.arc(R.x,R.y,A,m-q,w)}e.closePath()}function Tr(e,t,n,i,r){var s=t.options,a="inner"===s.borderAlign;s.borderWidth&&(a?(e.lineWidth=2*s.borderWidth,e.lineJoin="round"):(e.lineWidth=s.borderWidth,e.lineJoin="bevel"),t.fullCircles&&function(e,t,n){var i,r=t.x,s=t.y,a=t.startAngle,o=t.pixelMargin,l=t.fullCircles,c=Math.max(t.outerRadius-o,0),h=t.innerRadius+o;for(n&&Cr(e,t,a+U),e.beginPath(),e.arc(r,s,h,a+U,a,!0),i=0;i<l;++i)e.stroke();for(e.beginPath(),e.arc(r,s,c,a,a+U),i=0;i<l;++i)e.stroke()}(e,t,a),a&&Cr(e,t,r),Or(e,t,n,i,r),e.stroke())}Object.defineProperties(Sr,{defaults:{enumerable:Mr,value:$e},instances:{enumerable:Mr,value:wr},overrides:{enumerable:Mr,value:He},registry:{enumerable:Mr,value:rr},version:{enumerable:Mr,value:"3.6.0"},getChart:{enumerable:Mr,value:Dr},register:{enumerable:Mr,value:function(){rr.add.apply(rr,arguments),Pr()}},unregister:{enumerable:Mr,value:function(){rr.remove.apply(rr,arguments),Pr()}}});var Lr=function(e){function t(e){var n;return(0,h.A)(this,t),(n=(0,i.A)(this,t)).options=void 0,n.circumference=void 0,n.startAngle=void 0,n.endAngle=void 0,n.innerRadius=void 0,n.outerRadius=void 0,n.pixelMargin=0,n.fullCircles=0,e&&Object.assign(n,e),n}return(0,s.A)(t,e),(0,u.A)(t,[{key:"inRange",value:function(e,t,n){var i=function(e,t){var n=t.x-e.x,i=t.y-e.y,r=Math.sqrt(n*n+i*i),s=Math.atan2(i,n);return s<-.5*z&&(s+=U),{angle:s,distance:r}}(this.getProps(["x","y"],n),{x:e,y:t}),r=i.angle,s=i.distance,a=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],n),o=a.startAngle,l=a.endAngle,c=a.innerRadius,h=a.outerRadius,u=a.circumference,d=this.options.spacing/2;return(u>=U||se(r,o,l))&&(s>=c+d&&s<=h+d)}},{key:"getCenterPoint",value:function(e){var t=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius","circumference"],e),n=t.x,i=t.y,r=t.startAngle,s=t.endAngle,a=t.innerRadius,o=t.outerRadius,l=this.options,c=l.offset,h=(r+s)/2,u=(a+o+l.spacing+c)/2;return{x:n+Math.cos(h)*u,y:i+Math.sin(h)*u}}},{key:"tooltipPosition",value:function(e){return this.getCenterPoint(e)}},{key:"draw",value:function(e){var t=this.options,n=this.circumference,i=(t.offset||0)/2,r=(t.spacing||0)/2;if(this.pixelMargin="inner"===t.borderAlign?.33:0,this.fullCircles=n>U?Math.floor(n/U):0,!(0===n||this.innerRadius<0||this.outerRadius<0)){e.save();var s=0;if(i){s=i/2;var a=(this.startAngle+this.endAngle)/2;e.translate(Math.cos(a)*s,Math.sin(a)*s),this.circumference>=z&&(s=i)}e.fillStyle=t.backgroundColor,e.strokeStyle=t.borderColor;var o=function(e,t,n,i){var r=t.fullCircles,s=t.startAngle,a=t.circumference,o=t.endAngle;if(r){Or(e,t,n,i,s+U);for(var l=0;l<r;++l)e.fill();isNaN(a)||(o=s+a%U,a%U===0&&(o+=U))}return Or(e,t,n,i,o),e.fill(),o}(e,this,s,r);Tr(e,this,s,r,o),e.restore()}}}])}(qi);function Rr(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t;e.lineCap=k(n.borderCapStyle,t.borderCapStyle),e.setLineDash(k(n.borderDash,t.borderDash)),e.lineDashOffset=k(n.borderDashOffset,t.borderDashOffset),e.lineJoin=k(n.borderJoinStyle,t.borderJoinStyle),e.lineWidth=k(n.borderWidth,t.borderWidth),e.strokeStyle=k(n.borderColor,t.borderColor)}function Er(e,t,n){e.lineTo(n.x,n.y)}function Fr(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=e.length,r=n.start,s=void 0===r?0:r,a=n.end,o=void 0===a?i-1:a,l=t.start,c=t.end,h=Math.max(s,l),u=Math.min(o,c),d=s<l&&o<l||s>c&&o>c;return{count:i,start:h,loop:t.loop,ilen:u<h&&!d?i+u-h:u-h}}function zr(e,t,n,i){var r,s,a,o=t.points,l=t.options,c=Fr(o,n,i),h=c.count,u=c.start,d=c.loop,g=c.ilen,p=function(e){return e.stepped?at:e.tension||"monotone"===e.cubicInterpolationMode?ot:Er}(l),f=i||{},m=f.move,v=void 0===m||m,x=f.reverse;for(r=0;r<=g;++r)(s=o[(u+(x?g-r:r))%h]).skip||(v?(e.moveTo(s.x,s.y),v=!1):p(e,a,s,x,l.stepped),a=s);return d&&p(e,a,s=o[(u+(x?g:0))%h],x,l.stepped),!!d}function Ur(e,t,n,i){var r,s,a,o,l,c,h=t.points,u=Fr(h,n,i),d=u.count,g=u.start,p=u.ilen,f=i||{},m=f.move,v=void 0===m||m,x=f.reverse,A=0,y=0,b=function(e){return(g+(x?p-e:e))%d},j=function(){o!==l&&(e.lineTo(A,l),e.lineTo(A,o),e.lineTo(A,c))};for(v&&(s=h[b(0)],e.moveTo(s.x,s.y)),r=0;r<=p;++r)if(!(s=h[b(r)]).skip){var k=s.x,_=s.y,w=0|k;w===a?(_<o?o=_:_>l&&(l=_),A=(y*A+k)/++y):(j(),e.lineTo(k,_),a=w,y=0,o=l=_),c=_}j()}function Br(e){var t=e.options,n=t.borderDash&&t.borderDash.length;return!e._decimated&&!e._loop&&!t.tension&&"monotone"!==t.cubicInterpolationMode&&!t.stepped&&!n?Ur:zr}Lr.id="arc",Lr.defaults={borderAlign:"center",borderColor:"#fff",borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0},Lr.defaultRoutes={backgroundColor:"backgroundColor"};var Yr="function"===typeof Path2D;function Vr(e,t,n,i){Yr&&!t.options.segment?function(e,t,n,i){var r=t._path;r||(r=t._path=new Path2D,t.path(r,n,i)&&r.closePath()),Rr(e,t.options),e.stroke(r)}(e,t,n,i):function(e,t,n,i){var r,s=t.segments,a=t.options,o=Br(t),c=(0,l.A)(s);try{for(c.s();!(r=c.n()).done;){var h=r.value;Rr(e,a,h.style),e.beginPath(),o(e,t,h,{start:n,end:n+i-1})&&e.closePath(),e.stroke()}}catch(u){c.e(u)}finally{c.f()}}(e,t,n,i)}var qr=function(e){function t(e){var n;return(0,h.A)(this,t),(n=(0,i.A)(this,t)).animated=!0,n.options=void 0,n._chart=void 0,n._loop=void 0,n._fullLoop=void 0,n._path=void 0,n._points=void 0,n._segments=void 0,n._decimated=!1,n._pointsUpdated=!1,n._datasetIndex=void 0,e&&Object.assign(n,e),n}return(0,s.A)(t,e),(0,u.A)(t,[{key:"updateControlPoints",value:function(e,t){var n=this.options;if((n.tension||"monotone"===n.cubicInterpolationMode)&&!n.stepped&&!this._pointsUpdated){var i=n.spanGaps?this._loop:this._fullLoop;Ht(this._points,n,e,i,t),this._pointsUpdated=!0}}},{key:"points",get:function(){return this._points},set:function(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}},{key:"segments",get:function(){return this._segments||(this._segments=function(e,t){var n=e.points,i=e.options.spanGaps,r=n.length;if(!r)return[];var s=!!e._loop,a=function(e,t,n,i){var r=0,s=t-1;if(n&&!i)for(;r<t&&!e[r].skip;)r++;for(;r<t&&e[r].skip;)r++;for(r%=t,n&&(s+=r);s>r&&e[s%t].skip;)s--;return{start:r,end:s%=t}}(n,r,s,i),o=a.start,l=a.end;return xn(e,!0===i?[{start:o,end:l,loop:s}]:function(e,t,n,i){var r,s=e.length,a=[],o=t,l=e[t];for(r=t+1;r<=n;++r){var c=e[r%s];c.skip||c.stop?l.skip||(i=!1,a.push({start:t%s,end:(r-1)%s,loop:i}),t=o=c.stop?r:null):(o=r,l.skip&&(t=r)),l=c}return null!==o&&a.push({start:t%s,end:o%s,loop:i}),a}(n,o,l<o?l+r:l,!!e._fullLoop&&0===o&&l===r-1),n,t)}(this,this.options.segment))}},{key:"first",value:function(){var e=this.segments,t=this.points;return e.length&&t[e[0].start]}},{key:"last",value:function(){var e=this.segments,t=this.points,n=e.length;return n&&t[e[n-1].end]}},{key:"interpolate",value:function(e,t){var n=this.options,i=e[t],r=this.points,s=vn(this,{property:t,start:i,end:i});if(s.length){var a,o,l=[],c=function(e){return e.stepped?on:e.tension||"monotone"===e.cubicInterpolationMode?ln:an}(n);for(a=0,o=s.length;a<o;++a){var h=s[a],u=h.start,d=h.end,g=r[u],p=r[d];if(g!==p){var f=c(g,p,Math.abs((i-g[t])/(p[t]-g[t])),n.stepped);f[t]=e[t],l.push(f)}else l.push(g)}return 1===l.length?l[0]:l}}},{key:"pathSegment",value:function(e,t,n){return Br(this)(e,this,t,n)}},{key:"path",value:function(e,t,n){var i=this.segments,r=Br(this),s=this._loop;t=t||0,n=n||this.points.length-t;var a,o=(0,l.A)(i);try{for(o.s();!(a=o.n()).done;){s&=r(e,this,a.value,{start:t,end:t+n-1})}}catch(c){o.e(c)}finally{o.f()}return!!s}},{key:"draw",value:function(e,t,n,i){var r=this.options||{};(this.points||[]).length&&r.borderWidth&&(e.save(),Vr(e,this,n,i),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}])}(qi);function Wr(e,t,n,i){var r=e.options,s=e.getProps([n],i)[n];return Math.abs(t-s)<r.radius+r.hitRadius}qr.id="line",qr.defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0},qr.defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"},qr.descriptors={_scriptable:!0,_indexable:function(e){return"borderDash"!==e&&"fill"!==e}};var Hr=function(e){function t(e){var n;return(0,h.A)(this,t),(n=(0,i.A)(this,t)).options=void 0,n.parsed=void 0,n.skip=void 0,n.stop=void 0,e&&Object.assign(n,e),n}return(0,s.A)(t,e),(0,u.A)(t,[{key:"inRange",value:function(e,t,n){var i=this.options,r=this.getProps(["x","y"],n),s=r.x,a=r.y;return Math.pow(e-s,2)+Math.pow(t-a,2)<Math.pow(i.hitRadius+i.radius,2)}},{key:"inXRange",value:function(e,t){return Wr(this,e,"x",t)}},{key:"inYRange",value:function(e,t){return Wr(this,e,"y",t)}},{key:"getCenterPoint",value:function(e){var t=this.getProps(["x","y"],e);return{x:t.x,y:t.y}}},{key:"size",value:function(e){var t=(e=e||this.options||{}).radius||0;return 2*((t=Math.max(t,t&&e.hoverRadius||0))+(t&&e.borderWidth||0))}},{key:"draw",value:function(e,t){var n=this.options;this.skip||n.radius<.1||!it(this,t,this.size(n)/2)||(e.strokeStyle=n.borderColor,e.lineWidth=n.borderWidth,e.fillStyle=n.backgroundColor,nt(e,n,this.x,this.y))}},{key:"getRange",value:function(){var e=this.options||{};return e.radius+e.hitRadius}}])}(qi);function Gr(e,t){var n,i,r,s,a,o=e.getProps(["x","y","base","width","height"],t),l=o.x,c=o.y,h=o.base,u=o.width,d=o.height;return e.horizontal?(a=d/2,n=Math.min(l,h),i=Math.max(l,h),r=c-a,s=c+a):(n=l-(a=u/2),i=l+a,r=Math.min(c,h),s=Math.max(c,h)),{left:n,top:r,right:i,bottom:s}}function Qr(e,t,n,i){return e?0:ae(t,n,i)}function Xr(e){var t=Gr(e),n=t.right-t.left,i=t.bottom-t.top,r=function(e,t,n){var i=e.options.borderWidth,r=e.borderSkipped,s=ft(i);return{t:Qr(r.top,s.top,0,n),r:Qr(r.right,s.right,0,t),b:Qr(r.bottom,s.bottom,0,n),l:Qr(r.left,s.left,0,t)}}(e,n/2,i/2),s=function(e,t,n){var i=e.getProps(["enableBorderRadius"]).enableBorderRadius,r=e.options.borderRadius,s=mt(r),a=Math.min(t,n),o=e.borderSkipped,l=i||y(r);return{topLeft:Qr(!l||o.top||o.left,s.topLeft,0,a),topRight:Qr(!l||o.top||o.right,s.topRight,0,a),bottomLeft:Qr(!l||o.bottom||o.left,s.bottomLeft,0,a),bottomRight:Qr(!l||o.bottom||o.right,s.bottomRight,0,a)}}(e,n/2,i/2);return{outer:{x:t.left,y:t.top,w:n,h:i,radius:s},inner:{x:t.left+r.l,y:t.top+r.t,w:n-r.l-r.r,h:i-r.t-r.b,radius:{topLeft:Math.max(0,s.topLeft-Math.max(r.t,r.l)),topRight:Math.max(0,s.topRight-Math.max(r.t,r.r)),bottomLeft:Math.max(0,s.bottomLeft-Math.max(r.b,r.l)),bottomRight:Math.max(0,s.bottomRight-Math.max(r.b,r.r))}}}}function Kr(e,t,n,i){var r=null===t,s=null===n,a=e&&!(r&&s)&&Gr(e,i);return a&&(r||t>=a.left&&t<=a.right)&&(s||n>=a.top&&n<=a.bottom)}function $r(e,t){e.rect(t.x,t.y,t.w,t.h)}function Zr(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=e.x!==n.x?-t:0,r=e.y!==n.y?-t:0,s=(e.x+e.w!==n.x+n.w?t:0)-i,a=(e.y+e.h!==n.y+n.h?t:0)-r;return{x:e.x+i,y:e.y+r,w:e.w+s,h:e.h+a,radius:e.radius}}Hr.id="point",Hr.defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0},Hr.defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};var Jr=function(e){function t(e){var n;return(0,h.A)(this,t),(n=(0,i.A)(this,t)).options=void 0,n.horizontal=void 0,n.base=void 0,n.width=void 0,n.height=void 0,n.inflateAmount=void 0,e&&Object.assign(n,e),n}return(0,s.A)(t,e),(0,u.A)(t,[{key:"draw",value:function(e){var t,n=this.inflateAmount,i=this.options,r=i.borderColor,s=i.backgroundColor,a=Xr(this),o=a.inner,l=a.outer,c=(t=l.radius).topLeft||t.topRight||t.bottomLeft||t.bottomRight?ht:$r;e.save(),l.w===o.w&&l.h===o.h||(e.beginPath(),c(e,Zr(l,n,o)),e.clip(),c(e,Zr(o,-n,l)),e.fillStyle=r,e.fill("evenodd")),e.beginPath(),c(e,Zr(o,n)),e.fillStyle=s,e.fill(),e.restore()}},{key:"inRange",value:function(e,t,n){return Kr(this,e,t,n)}},{key:"inXRange",value:function(e,t){return Kr(this,e,null,t)}},{key:"inYRange",value:function(e,t){return Kr(this,null,e,t)}},{key:"getCenterPoint",value:function(e){var t=this.getProps(["x","y","base","horizontal"],e),n=t.x,i=t.y,r=t.base,s=t.horizontal;return{x:s?(n+r)/2:n,y:s?i:(i+r)/2}}},{key:"getRange",value:function(e){return"x"===e?this.width/2:this.height/2}}])}(qi);Jr.id="bar",Jr.defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0},Jr.defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};var es=function(e,t){var n=e.boxHeight,i=void 0===n?t:n,r=e.boxWidth,s=void 0===r?t:r;return e.usePointStyle&&(i=Math.min(i,t),s=Math.min(s,t)),{boxWidth:s,boxHeight:i,itemHeight:Math.max(t,i)}},ts=function(e){function t(e){var n;return(0,h.A)(this,t),(n=(0,i.A)(this,t))._added=!1,n.legendHitBoxes=[],n._hoveredItem=null,n.doughnutMode=!1,n.chart=e.chart,n.options=e.options,n.ctx=e.ctx,n.legendItems=void 0,n.columnSizes=void 0,n.lineWidths=void 0,n.maxHeight=void 0,n.maxWidth=void 0,n.top=void 0,n.bottom=void 0,n.left=void 0,n.right=void 0,n.height=void 0,n.width=void 0,n._margins=void 0,n.position=void 0,n.weight=void 0,n.fullSize=void 0,n}return(0,s.A)(t,e),(0,u.A)(t,[{key:"update",value:function(e,t,n){this.maxWidth=e,this.maxHeight=t,this._margins=n,this.setDimensions(),this.buildLabels(),this.fit()}},{key:"setDimensions",value:function(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}},{key:"buildLabels",value:function(){var e=this,t=this.options.labels||{},n=w(t.generateLabels,[this.chart],this)||[];t.filter&&(n=n.filter((function(n){return t.filter(n,e.chart.data)}))),t.sort&&(n=n.sort((function(n,i){return t.sort(n,i,e.chart.data)}))),this.options.reverse&&n.reverse(),this.legendItems=n}},{key:"fit",value:function(){var e=this.options,t=this.ctx;if(e.display){var n,i,r=e.labels,s=xt(r.font),a=s.size,o=this._computeTitleHeight(),l=es(r,a),c=l.boxWidth,h=l.itemHeight;t.font=s.string,this.isHorizontal()?(n=this.maxWidth,i=this._fitRows(o,a,c,h)+10):(i=this.maxHeight,n=this._fitCols(o,a,c,h)+10),this.width=Math.min(n,e.maxWidth||this.maxWidth),this.height=Math.min(i,e.maxHeight||this.maxHeight)}else this.width=this.height=0}},{key:"_fitRows",value:function(e,t,n,i){var r=this.ctx,s=this.maxWidth,a=this.options.labels.padding,o=this.legendHitBoxes=[],l=this.lineWidths=[0],c=i+a,h=e;r.textAlign="left",r.textBaseline="middle";var u=-1,d=-c;return this.legendItems.forEach((function(e,g){var p=n+t/2+r.measureText(e.text).width;(0===g||l[l.length-1]+p+2*a>s)&&(h+=c,l[l.length-(g>0?0:1)]=0,d+=c,u++),o[g]={left:0,top:d,row:u,width:p,height:i},l[l.length-1]+=p+a})),h}},{key:"_fitCols",value:function(e,t,n,i){var r=this.ctx,s=this.maxHeight,a=this.options.labels.padding,o=this.legendHitBoxes=[],l=this.columnSizes=[],c=s-e,h=a,u=0,d=0,g=0,p=0;return this.legendItems.forEach((function(e,s){var f=n+t/2+r.measureText(e.text).width;s>0&&d+i+2*a>c&&(h+=u+a,l.push({width:u,height:d}),g+=u+a,p++,u=d=0),o[s]={left:g,top:d,col:p,width:f,height:i},u=Math.max(u,f),d+=i+a})),h+=u,l.push({width:u,height:d}),h}},{key:"adjustHitBoxes",value:function(){if(this.options.display){var e=this._computeTitleHeight(),t=this.legendHitBoxes,n=this.options,i=n.align,r=n.labels.padding,s=un(n.rtl,this.left,this.width);if(this.isHorizontal()){var a,o=0,c=f(i,this.left+r,this.right-this.lineWidths[o]),h=(0,l.A)(t);try{for(h.s();!(a=h.n()).done;){var u=a.value;o!==u.row&&(o=u.row,c=f(i,this.left+r,this.right-this.lineWidths[o])),u.top+=this.top+e+r,u.left=s.leftForLtr(s.x(c),u.width),c+=u.width+r}}catch(x){h.e(x)}finally{h.f()}}else{var d,g=0,p=f(i,this.top+e+r,this.bottom-this.columnSizes[g].height),m=(0,l.A)(t);try{for(m.s();!(d=m.n()).done;){var v=d.value;v.col!==g&&(g=v.col,p=f(i,this.top+e+r,this.bottom-this.columnSizes[g].height)),v.top=p,v.left+=this.left+r,v.left=s.leftForLtr(s.x(v.left),v.width),p+=v.height+r}}catch(x){m.e(x)}finally{m.f()}}}}},{key:"isHorizontal",value:function(){return"top"===this.options.position||"bottom"===this.options.position}},{key:"draw",value:function(){if(this.options.display){var e=this.ctx;rt(e,this),this._draw(),st(e)}}},{key:"_draw",value:function(){var e,t=this,n=this.options,i=this.columnSizes,r=this.lineWidths,s=this.ctx,a=n.align,o=n.labels,l=$e.color,c=un(n.rtl,this.left,this.width),h=xt(o.font),u=o.color,d=o.padding,g=h.size,p=g/2;this.drawTitle(),s.textAlign=c.textAlign("left"),s.textBaseline="middle",s.lineWidth=.5,s.font=h.string;var m=es(o,g),v=m.boxWidth,x=m.boxHeight,A=m.itemHeight,y=this.isHorizontal(),b=this._computeTitleHeight();e=y?{x:f(a,this.left+d,this.right-r[0]),y:this.top+d+b,line:0}:{x:this.left+d,y:f(a,this.top+b+d,this.bottom-i[0].height),line:0},dn(this.ctx,n.textDirection);var j=A+d;this.legendItems.forEach((function(m,_){s.strokeStyle=m.fontColor||u,s.fillStyle=m.fontColor||u;var w=s.measureText(m.text).width,D=c.textAlign(m.textAlign||(m.textAlign=o.textAlign)),S=v+p+w,P=e.x,M=e.y;c.setWidth(t.width),y?_>0&&P+S+d>t.right&&(M=e.y+=j,e.line++,P=e.x=f(a,t.left+d,t.right-r[e.line])):_>0&&M+j>t.bottom&&(P=e.x=P+i[e.line].width+d,e.line++,M=e.y=f(a,t.top+b+d,t.bottom-i[e.line].height)),function(e,t,n){if(!(isNaN(v)||v<=0||isNaN(x)||x<0)){s.save();var i=k(n.lineWidth,1);if(s.fillStyle=k(n.fillStyle,l),s.lineCap=k(n.lineCap,"butt"),s.lineDashOffset=k(n.lineDashOffset,0),s.lineJoin=k(n.lineJoin,"miter"),s.lineWidth=i,s.strokeStyle=k(n.strokeStyle,l),s.setLineDash(k(n.lineDash,[])),o.usePointStyle){var r={radius:v*Math.SQRT2/2,pointStyle:n.pointStyle,rotation:n.rotation,borderWidth:i},a=c.xPlus(e,v/2);nt(s,r,a,t+p)}else{var h=t+Math.max((g-x)/2,0),u=c.leftForLtr(e,v),d=mt(n.borderRadius);s.beginPath(),Object.values(d).some((function(e){return 0!==e}))?ht(s,{x:u,y:h,w:v,h:x,radius:d}):s.rect(u,h,v,x),s.fill(),0!==i&&s.stroke()}s.restore()}}(c.x(P),M,m),P=function(e,t,n,i){return e===(i?"left":"right")?n:"center"===e?(t+n)/2:t}(D,P+v+p,y?P+S:t.right,n.rtl),function(e,t,n){lt(s,n.text,e,t+A/2,h,{strikethrough:n.hidden,textAlign:c.textAlign(n.textAlign)})}(c.x(P),M,m),y?e.x+=S+d:e.y+=j})),gn(this.ctx,n.textDirection)}},{key:"drawTitle",value:function(){var e=this.options,t=e.title,n=xt(t.font),i=vt(t.padding);if(t.display){var r,s=un(e.rtl,this.left,this.width),a=this.ctx,o=t.position,l=n.size/2,h=i.top+l,u=this.left,d=this.width;if(this.isHorizontal())d=Math.max.apply(Math,(0,c.A)(this.lineWidths)),r=this.top+h,u=f(e.align,u,this.right-d);else{var g=this.columnSizes.reduce((function(e,t){return Math.max(e,t.height)}),0);r=h+f(e.align,this.top,this.bottom-g-e.labels.padding-this._computeTitleHeight())}var m=f(o,u,u+d);a.textAlign=s.textAlign(p(o)),a.textBaseline="middle",a.strokeStyle=t.color,a.fillStyle=t.color,a.font=n.string,lt(a,t.text,m,r,n)}}},{key:"_computeTitleHeight",value:function(){var e=this.options.title,t=xt(e.font),n=vt(e.padding);return e.display?t.lineHeight+n.height:0}},{key:"_getLegendItemAt",value:function(e,t){var n,i,r;if(e>=this.left&&e<=this.right&&t>=this.top&&t<=this.bottom)for(r=this.legendHitBoxes,n=0;n<r.length;++n)if(e>=(i=r[n]).left&&e<=i.left+i.width&&t>=i.top&&t<=i.top+i.height)return this.legendItems[n];return null}},{key:"handleEvent",value:function(e){var t=this.options;if(function(e,t){if("mousemove"===e&&(t.onHover||t.onLeave))return!0;if(t.onClick&&("click"===e||"mouseup"===e))return!0;return!1}(e.type,t)){var n,i,r=this._getLegendItemAt(e.x,e.y);if("mousemove"===e.type){var s=this._hoveredItem,a=(i=r,null!==(n=s)&&null!==i&&n.datasetIndex===i.datasetIndex&&n.index===i.index);s&&!a&&w(t.onLeave,[e,s,this],this),this._hoveredItem=r,r&&!a&&w(t.onHover,[e,r,this],this)}else r&&w(t.onClick,[e,r,this],this)}}}])}(qi);var ns={id:"legend",_element:ts,start:function(e,t,n){var i=e.legend=new ts({ctx:e.ctx,options:n,chart:e});Di(e,i,n),_i(e,i)},stop:function(e){wi(e,e.legend),delete e.legend},beforeUpdate:function(e,t,n){var i=e.legend;Di(e,i,n),i.options=n},afterUpdate:function(e){var t=e.legend;t.buildLabels(),t.adjustHitBoxes()},afterEvent:function(e,t){t.replay||e.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick:function(e,t,n){var i=t.datasetIndex,r=n.chart;r.isDatasetVisible(i)?(r.hide(i),t.hidden=!0):(r.show(i),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:function(e){return e.chart.options.color},boxWidth:40,padding:10,generateLabels:function(e){var t=e.data.datasets,n=e.legend.options.labels,i=n.usePointStyle,r=n.pointStyle,s=n.textAlign,a=n.color;return e._getSortedDatasetMetas().map((function(e){var n=e.controller.getStyle(i?0:void 0),o=vt(n.borderWidth);return{text:t[e.index].label,fillStyle:n.backgroundColor,fontColor:a,hidden:!e.visible,lineCap:n.borderCapStyle,lineDash:n.borderDash,lineDashOffset:n.borderDashOffset,lineJoin:n.borderJoinStyle,lineWidth:(o.width+o.height)/4,strokeStyle:n.borderColor,pointStyle:r||n.pointStyle,rotation:n.rotation,textAlign:s||n.textAlign,borderRadius:0,datasetIndex:e.index}}),this)}},title:{color:function(e){return e.chart.options.color},display:!1,position:"center",text:""}},descriptors:{_scriptable:function(e){return!e.startsWith("on")},labels:{_scriptable:function(e){return!["generateLabels","filter","sort"].includes(e)}}}},is=function(e){function t(e){var n;return(0,h.A)(this,t),(n=(0,i.A)(this,t)).chart=e.chart,n.options=e.options,n.ctx=e.ctx,n._padding=void 0,n.top=void 0,n.bottom=void 0,n.left=void 0,n.right=void 0,n.width=void 0,n.height=void 0,n.position=void 0,n.weight=void 0,n.fullSize=void 0,n}return(0,s.A)(t,e),(0,u.A)(t,[{key:"update",value:function(e,t){var n=this.options;if(this.left=0,this.top=0,n.display){this.width=this.right=e,this.height=this.bottom=t;var i=A(n.text)?n.text.length:1;this._padding=vt(n.padding);var r=i*xt(n.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=r:this.width=r}else this.width=this.height=this.right=this.bottom=0}},{key:"isHorizontal",value:function(){var e=this.options.position;return"top"===e||"bottom"===e}},{key:"_drawArgs",value:function(e){var t,n,i,r=this.top,s=this.left,a=this.bottom,o=this.right,l=this.options,c=l.align,h=0;return this.isHorizontal()?(n=f(c,s,o),i=r+e,t=o-s):("left"===l.position?(n=s+e,i=f(c,a,r),h=-.5*z):(n=o-e,i=f(c,r,a),h=.5*z),t=a-r),{titleX:n,titleY:i,maxWidth:t,rotation:h}}},{key:"draw",value:function(){var e=this.ctx,t=this.options;if(t.display){var n=xt(t.font),i=n.lineHeight/2+this._padding.top,r=this._drawArgs(i),s=r.titleX,a=r.titleY,o=r.maxWidth,l=r.rotation;lt(e,t.text,0,0,n,{color:t.color,maxWidth:o,rotation:l,textAlign:p(t.align),textBaseline:"middle",translation:[s,a]})}}}])}(qi);var rs={id:"title",_element:is,start:function(e,t,n){!function(e,t){var n=new is({ctx:e.ctx,options:t,chart:e});Di(e,n,t),_i(e,n),e.titleBlock=n}(e,n)},stop:function(e){var t=e.titleBlock;wi(e,t),delete e.titleBlock},beforeUpdate:function(e,t,n){var i=e.titleBlock;Di(e,i,n),i.options=n},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}},ss=(new WeakMap,{average:function(e){if(!e.length)return!1;var t,n,i=0,r=0,s=0;for(t=0,n=e.length;t<n;++t){var a=e[t].element;if(a&&a.hasValue()){var o=a.tooltipPosition();i+=o.x,r+=o.y,++s}}return{x:i/s,y:r/s}},nearest:function(e,t){if(!e.length)return!1;var n,i,r,s=t.x,a=t.y,o=Number.POSITIVE_INFINITY;for(n=0,i=e.length;n<i;++n){var l=e[n].element;if(l&&l.hasValue()){var c=ne(t,l.getCenterPoint());c<o&&(o=c,r=l)}}if(r){var h=r.tooltipPosition();s=h.x,a=h.y}return{x:s,y:a}}});function as(e,t){return t&&(A(t)?Array.prototype.push.apply(e,t):e.push(t)),e}function os(e){return("string"===typeof e||e instanceof String)&&e.indexOf("\n")>-1?e.split("\n"):e}function ls(e,t){var n=t.element,i=t.datasetIndex,r=t.index,s=e.getDatasetMeta(i).controller,a=s.getLabelAndValue(r),o=a.label,l=a.value;return{chart:e,label:o,parsed:s.getParsed(r),raw:e.data.datasets[i].data[r],formattedValue:l,dataset:s.getDataset(),dataIndex:r,datasetIndex:i,element:n}}function cs(e,t){var n=e._chart.ctx,i=e.body,r=e.footer,s=e.title,a=t.boxWidth,o=t.boxHeight,l=xt(t.bodyFont),c=xt(t.titleFont),h=xt(t.footerFont),u=s.length,d=r.length,g=i.length,p=vt(t.padding),f=p.height,m=0,v=i.reduce((function(e,t){return e+t.before.length+t.lines.length+t.after.length}),0);(v+=e.beforeBody.length+e.afterBody.length,u&&(f+=u*c.lineHeight+(u-1)*t.titleSpacing+t.titleMarginBottom),v)&&(f+=g*(t.displayColors?Math.max(o,l.lineHeight):l.lineHeight)+(v-g)*l.lineHeight+(v-1)*t.bodySpacing);d&&(f+=t.footerMarginTop+d*h.lineHeight+(d-1)*t.footerSpacing);var x=0,A=function(e){m=Math.max(m,n.measureText(e).width+x)};return n.save(),n.font=c.string,D(e.title,A),n.font=l.string,D(e.beforeBody.concat(e.afterBody),A),x=t.displayColors?a+2+t.boxPadding:0,D(i,(function(e){D(e.before,A),D(e.lines,A),D(e.after,A)})),x=0,n.font=h.string,D(e.footer,A),n.restore(),{width:m+=p.width,height:f}}function hs(e,t,n,i){var r=n.x,s=n.width,a=e.width,o=e.chartArea,l=o.left,c=o.right,h="center";return"center"===i?h=r<=(l+c)/2?"left":"right":r<=s/2?h="left":r>=a-s/2&&(h="right"),function(e,t,n,i){var r=i.x,s=i.width,a=n.caretSize+n.caretPadding;return"left"===e&&r+s+a>t.width||"right"===e&&r-s-a<0||void 0}(h,e,t,n)&&(h="center"),h}function us(e,t,n){var i=t.yAlign||function(e,t){var n=t.y,i=t.height;return n<i/2?"top":n>e.height-i/2?"bottom":"center"}(e,n);return{xAlign:t.xAlign||hs(e,t,n,i),yAlign:i}}function ds(e,t,n,i){var r=e.caretSize,s=e.caretPadding,a=e.cornerRadius,o=n.xAlign,l=n.yAlign,c=r+s,h=mt(a),u=h.topLeft,d=h.topRight,g=h.bottomLeft,p=h.bottomRight,f=function(e,t){var n=e.x,i=e.width;return"right"===t?n-=i:"center"===t&&(n-=i/2),n}(t,o),m=function(e,t,n){var i=e.y,r=e.height;return"top"===t?i+=n:i-="bottom"===t?r+n:r/2,i}(t,l,c);return"center"===l?"left"===o?f+=c:"right"===o&&(f-=c):"left"===o?f-=Math.max(u,g)+s:"right"===o&&(f+=Math.max(d,p)+s),{x:ae(f,0,i.width-t.width),y:ae(m,0,i.height-t.height)}}function gs(e,t,n){var i=vt(n.padding);return"center"===t?e.x+e.width/2:"right"===t?e.x+e.width-i.right:e.x+i.left}function ps(e){return as([],os(e))}function fs(e,t){var n=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return n?e.override(n):e}var ms=function(e){function t(e){var n;return(0,h.A)(this,t),(n=(0,i.A)(this,t)).opacity=0,n._active=[],n._chart=e._chart,n._eventPosition=void 0,n._size=void 0,n._cachedAnimations=void 0,n._tooltipItems=[],n.$animations=void 0,n.$context=void 0,n.options=e.options,n.dataPoints=void 0,n.title=void 0,n.beforeBody=void 0,n.body=void 0,n.afterBody=void 0,n.footer=void 0,n.xAlign=void 0,n.yAlign=void 0,n.x=void 0,n.y=void 0,n.height=void 0,n.width=void 0,n.caretX=void 0,n.caretY=void 0,n.labelColors=void 0,n.labelPointStyles=void 0,n.labelTextColors=void 0,n}return(0,s.A)(t,e),(0,u.A)(t,[{key:"initialize",value:function(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}},{key:"_resolveAnimations",value:function(){var e=this._cachedAnimations;if(e)return e;var t=this._chart,n=this.options.setContext(this.getContext()),i=n.enabled&&t.options.animation&&n.animations,r=new Sn(this._chart,i);return i._cacheable&&(this._cachedAnimations=Object.freeze(r)),r}},{key:"getContext",value:function(){return this.$context||(this.$context=(e=this._chart.getContext(),t=this,n=this._tooltipItems,yt(e,{tooltip:t,tooltipItems:n,type:"tooltip"})));var e,t,n}},{key:"getTitle",value:function(e,t){var n=t.callbacks,i=n.beforeTitle.apply(this,[e]),r=n.title.apply(this,[e]),s=n.afterTitle.apply(this,[e]),a=[];return a=as(a,os(i)),a=as(a,os(r)),a=as(a,os(s))}},{key:"getBeforeBody",value:function(e,t){return ps(t.callbacks.beforeBody.apply(this,[e]))}},{key:"getBody",value:function(e,t){var n=this,i=t.callbacks,r=[];return D(e,(function(e){var t={before:[],lines:[],after:[]},s=fs(i,e);as(t.before,os(s.beforeLabel.call(n,e))),as(t.lines,s.label.call(n,e)),as(t.after,os(s.afterLabel.call(n,e))),r.push(t)})),r}},{key:"getAfterBody",value:function(e,t){return ps(t.callbacks.afterBody.apply(this,[e]))}},{key:"getFooter",value:function(e,t){var n=t.callbacks,i=n.beforeFooter.apply(this,[e]),r=n.footer.apply(this,[e]),s=n.afterFooter.apply(this,[e]),a=[];return a=as(a,os(i)),a=as(a,os(r)),a=as(a,os(s))}},{key:"_createItems",value:function(e){var t,n,i=this,r=this._active,s=this._chart.data,a=[],o=[],l=[],c=[];for(t=0,n=r.length;t<n;++t)c.push(ls(this._chart,r[t]));return e.filter&&(c=c.filter((function(t,n,i){return e.filter(t,n,i,s)}))),e.itemSort&&(c=c.sort((function(t,n){return e.itemSort(t,n,s)}))),D(c,(function(t){var n=fs(e.callbacks,t);a.push(n.labelColor.call(i,t)),o.push(n.labelPointStyle.call(i,t)),l.push(n.labelTextColor.call(i,t))})),this.labelColors=a,this.labelPointStyles=o,this.labelTextColors=l,this.dataPoints=c,c}},{key:"update",value:function(e,t){var n,i=this.options.setContext(this.getContext()),r=this._active,s=[];if(r.length){var a=ss[i.position].call(this,r,this._eventPosition);s=this._createItems(i),this.title=this.getTitle(s,i),this.beforeBody=this.getBeforeBody(s,i),this.body=this.getBody(s,i),this.afterBody=this.getAfterBody(s,i),this.footer=this.getFooter(s,i);var o=this._size=cs(this,i),l=Object.assign({},a,o),c=us(this._chart,i,l),h=ds(i,l,c,this._chart);this.xAlign=c.xAlign,this.yAlign=c.yAlign,n={opacity:1,x:h.x,y:h.y,width:o.width,height:o.height,caretX:a.x,caretY:a.y}}else 0!==this.opacity&&(n={opacity:0});this._tooltipItems=s,this.$context=void 0,n&&this._resolveAnimations().update(this,n),e&&i.external&&i.external.call(this,{chart:this._chart,tooltip:this,replay:t})}},{key:"drawCaret",value:function(e,t,n,i){var r=this.getCaretPosition(e,n,i);t.lineTo(r.x1,r.y1),t.lineTo(r.x2,r.y2),t.lineTo(r.x3,r.y3)}},{key:"getCaretPosition",value:function(e,t,n){var i,r,s,a,o,l,c=this.xAlign,h=this.yAlign,u=n.caretSize,d=mt(n.cornerRadius),g=d.topLeft,p=d.topRight,f=d.bottomLeft,m=d.bottomRight,v=e.x,x=e.y,A=t.width,y=t.height;return"center"===h?(o=x+y/2,"left"===c?(r=(i=v)-u,a=o+u,l=o-u):(r=(i=v+A)+u,a=o-u,l=o+u),s=i):(r="left"===c?v+Math.max(g,f)+u:"right"===c?v+A-Math.max(p,m)-u:this.caretX,"top"===h?(o=(a=x)-u,i=r-u,s=r+u):(o=(a=x+y)+u,i=r+u,s=r-u),l=a),{x1:i,x2:r,x3:s,y1:a,y2:o,y3:l}}},{key:"drawTitle",value:function(e,t,n){var i,r,s,a=this.title,o=a.length;if(o){var l=un(n.rtl,this.x,this.width);for(e.x=gs(this,n.titleAlign,n),t.textAlign=l.textAlign(n.titleAlign),t.textBaseline="middle",i=xt(n.titleFont),r=n.titleSpacing,t.fillStyle=n.titleColor,t.font=i.string,s=0;s<o;++s)t.fillText(a[s],l.x(e.x),e.y+i.lineHeight/2),e.y+=i.lineHeight+r,s+1===o&&(e.y+=n.titleMarginBottom-r)}}},{key:"_drawColorBox",value:function(e,t,n,i,r){var s=this.labelColors[n],a=this.labelPointStyles[n],o=r.boxHeight,l=r.boxWidth,c=r.boxPadding,h=xt(r.bodyFont),u=gs(this,"left",r),d=i.x(u),g=o<h.lineHeight?(h.lineHeight-o)/2:0,p=t.y+g;if(r.usePointStyle){var f={radius:Math.min(l,o)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},m=i.leftForLtr(d,l)+l/2,v=p+o/2;e.strokeStyle=r.multiKeyBackground,e.fillStyle=r.multiKeyBackground,nt(e,f,m,v),e.strokeStyle=s.borderColor,e.fillStyle=s.backgroundColor,nt(e,f,m,v)}else{e.lineWidth=s.borderWidth||1,e.strokeStyle=s.borderColor,e.setLineDash(s.borderDash||[]),e.lineDashOffset=s.borderDashOffset||0;var x=i.leftForLtr(d,l-c),A=i.leftForLtr(i.xPlus(d,1),l-c-2),y=mt(s.borderRadius);Object.values(y).some((function(e){return 0!==e}))?(e.beginPath(),e.fillStyle=r.multiKeyBackground,ht(e,{x:x,y:p,w:l,h:o,radius:y}),e.fill(),e.stroke(),e.fillStyle=s.backgroundColor,e.beginPath(),ht(e,{x:A,y:p+1,w:l-2,h:o-2,radius:y}),e.fill()):(e.fillStyle=r.multiKeyBackground,e.fillRect(x,p,l,o),e.strokeRect(x,p,l,o),e.fillStyle=s.backgroundColor,e.fillRect(A,p+1,l-2,o-2))}e.fillStyle=this.labelTextColors[n]}},{key:"drawBody",value:function(e,t,n){var i,r,s,a,o,l,c,h=this.body,u=n.bodySpacing,d=n.bodyAlign,g=n.displayColors,p=n.boxHeight,f=n.boxWidth,m=n.boxPadding,v=xt(n.bodyFont),x=v.lineHeight,A=0,y=un(n.rtl,this.x,this.width),b=function(n){t.fillText(n,y.x(e.x+A),e.y+x/2),e.y+=x+u},j=y.textAlign(d);for(t.textAlign=d,t.textBaseline="middle",t.font=v.string,e.x=gs(this,j,n),t.fillStyle=n.bodyColor,D(this.beforeBody,b),A=g&&"right"!==j?"center"===d?f/2+m:f+2+m:0,a=0,l=h.length;a<l;++a){for(i=h[a],r=this.labelTextColors[a],t.fillStyle=r,D(i.before,b),s=i.lines,g&&s.length&&(this._drawColorBox(t,e,a,y,n),x=Math.max(v.lineHeight,p)),o=0,c=s.length;o<c;++o)b(s[o]),x=v.lineHeight;D(i.after,b)}A=0,x=v.lineHeight,D(this.afterBody,b),e.y-=u}},{key:"drawFooter",value:function(e,t,n){var i,r,s=this.footer,a=s.length;if(a){var o=un(n.rtl,this.x,this.width);for(e.x=gs(this,n.footerAlign,n),e.y+=n.footerMarginTop,t.textAlign=o.textAlign(n.footerAlign),t.textBaseline="middle",i=xt(n.footerFont),t.fillStyle=n.footerColor,t.font=i.string,r=0;r<a;++r)t.fillText(s[r],o.x(e.x),e.y+i.lineHeight/2),e.y+=i.lineHeight+n.footerSpacing}}},{key:"drawBackground",value:function(e,t,n,i){var r=this.xAlign,s=this.yAlign,a=e.x,o=e.y,l=n.width,c=n.height,h=mt(i.cornerRadius),u=h.topLeft,d=h.topRight,g=h.bottomLeft,p=h.bottomRight;t.fillStyle=i.backgroundColor,t.strokeStyle=i.borderColor,t.lineWidth=i.borderWidth,t.beginPath(),t.moveTo(a+u,o),"top"===s&&this.drawCaret(e,t,n,i),t.lineTo(a+l-d,o),t.quadraticCurveTo(a+l,o,a+l,o+d),"center"===s&&"right"===r&&this.drawCaret(e,t,n,i),t.lineTo(a+l,o+c-p),t.quadraticCurveTo(a+l,o+c,a+l-p,o+c),"bottom"===s&&this.drawCaret(e,t,n,i),t.lineTo(a+g,o+c),t.quadraticCurveTo(a,o+c,a,o+c-g),"center"===s&&"left"===r&&this.drawCaret(e,t,n,i),t.lineTo(a,o+u),t.quadraticCurveTo(a,o,a+u,o),t.closePath(),t.fill(),i.borderWidth>0&&t.stroke()}},{key:"_updateAnimationTarget",value:function(e){var t=this._chart,n=this.$animations,i=n&&n.x,r=n&&n.y;if(i||r){var s=ss[e.position].call(this,this._active,this._eventPosition);if(!s)return;var a=this._size=cs(this,e),o=Object.assign({},s,this._size),l=us(t,e,o),c=ds(e,o,l,t);i._to===c.x&&r._to===c.y||(this.xAlign=l.xAlign,this.yAlign=l.yAlign,this.width=a.width,this.height=a.height,this.caretX=s.x,this.caretY=s.y,this._resolveAnimations().update(this,c))}}},{key:"draw",value:function(e){var t=this.options.setContext(this.getContext()),n=this.opacity;if(n){this._updateAnimationTarget(t);var i={width:this.width,height:this.height},r={x:this.x,y:this.y};n=Math.abs(n)<.001?0:n;var s=vt(t.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;t.enabled&&a&&(e.save(),e.globalAlpha=n,this.drawBackground(r,e,i,t),dn(e,t.textDirection),r.y+=s.top,this.drawTitle(r,e,t),this.drawBody(r,e,t),this.drawFooter(r,e,t),gn(e,t.textDirection),e.restore())}}},{key:"getActiveElements",value:function(){return this._active||[]}},{key:"setActiveElements",value:function(e,t){var n=this,i=this._active,r=e.map((function(e){var t=e.datasetIndex,i=e.index,r=n._chart.getDatasetMeta(t);if(!r)throw new Error("Cannot find a dataset at index "+t);return{datasetIndex:t,element:r.data[i],index:i}})),s=!S(i,r),a=this._positionChanged(r,t);(s||a)&&(this._active=r,this._eventPosition=t,this.update(!0))}},{key:"handleEvent",value:function(e,t){var n,i=this.options,r=this._active||[],s=[];"mouseout"!==e.type&&(s=this._chart.getElementsAtEventForMode(e,i.mode,i,t),i.reverse&&s.reverse());var a=this._positionChanged(s,e);return(n=t||!S(s,r)||a)&&(this._active=s,(i.enabled||i.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,t))),n}},{key:"_positionChanged",value:function(e,t){var n=this.caretX,i=this.caretY,r=this.options,s=ss[r.position].call(this,e,t);return!1!==s&&(n!==s.x||i!==s.y)}}])}(qi);ms.positioners=ss;var vs={id:"tooltip",_element:ms,positioners:ss,afterInit:function(e,t,n){n&&(e.tooltip=new ms({_chart:e,options:n}))},beforeUpdate:function(e,t,n){e.tooltip&&e.tooltip.initialize(n)},reset:function(e,t,n){e.tooltip&&e.tooltip.initialize(n)},afterDraw:function(e){var t=e.tooltip,n={tooltip:t};!1!==e.notifyPlugins("beforeTooltipDraw",n)&&(t&&t.draw(e.ctx),e.notifyPlugins("afterTooltipDraw",n))},afterEvent:function(e,t){if(e.tooltip){var n=t.replay;e.tooltip.handleEvent(t.event,n)&&(t.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:function(e,t){return t.bodyFont.size},boxWidth:function(e,t){return t.bodyFont.size},multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:{beforeTitle:m,title:function(e){if(e.length>0){var t=e[0],n=t.chart.data.labels,i=n?n.length:0;if(this&&this.options&&"dataset"===this.options.mode)return t.dataset.label||"";if(t.label)return t.label;if(i>0&&t.dataIndex<i)return n[t.dataIndex]}return""},afterTitle:m,beforeBody:m,beforeLabel:m,label:function(e){if(this&&this.options&&"dataset"===this.options.mode)return e.label+": "+e.formattedValue||e.formattedValue;var t=e.dataset.label||"";t&&(t+=": ");var n=e.formattedValue;return x(n)||(t+=n),t},labelColor:function(e){var t=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{borderColor:t.borderColor,backgroundColor:t.backgroundColor,borderWidth:t.borderWidth,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderRadius:0}},labelTextColor:function(){return this.options.bodyColor},labelPointStyle:function(e){var t=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{pointStyle:t.pointStyle,rotation:t.rotation}},afterLabel:m,afterBody:m,beforeFooter:m,footer:m,afterFooter:m}},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:function(e){return"filter"!==e&&"itemSort"!==e&&"external"!==e},_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};function xs(e,t,n){var i=e.indexOf(t);return-1===i?function(e,t,n){return"string"===typeof t?e.push(t)-1:isNaN(t)?null:n}(e,t,n):i!==e.lastIndexOf(t)?n:i}var As=function(e){function t(e){var n;return(0,h.A)(this,t),(n=(0,i.A)(this,t,[e]))._startValue=void 0,n._valueRange=0,n}return(0,s.A)(t,e),(0,u.A)(t,[{key:"parse",value:function(e,t){if(x(e))return null;var n=this.getLabels();return function(e,t){return null===e?null:ae(Math.round(e),0,t)}(t=isFinite(t)&&n[t]===e?t:xs(n,e,k(t,e)),n.length-1)}},{key:"determineDataLimits",value:function(){var e=this.getUserBounds(),t=e.minDefined,n=e.maxDefined,i=this.getMinMax(!0),r=i.min,s=i.max;"ticks"===this.options.bounds&&(t||(r=0),n||(s=this.getLabels().length-1)),this.min=r,this.max=s}},{key:"buildTicks",value:function(){var e=this.min,t=this.max,n=this.options.offset,i=[],r=this.getLabels();r=0===e&&t===r.length-1?r:r.slice(e,t+1),this._valueRange=Math.max(r.length-(n?0:1),1),this._startValue=this.min-(n?.5:0);for(var s=e;s<=t;s++)i.push({value:s});return i}},{key:"getLabelForValue",value:function(e){var t=this.getLabels();return e>=0&&e<t.length?t[e]:e}},{key:"configure",value:function(){(0,r.A)(t,"configure",this,3)([]),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}},{key:"getPixelForValue",value:function(e){return"number"!==typeof e&&(e=this.parse(e)),null===e?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}},{key:"getPixelForTick",value:function(e){var t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}},{key:"getValueForPixel",value:function(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}},{key:"getBasePixel",value:function(){return this.bottom}}])}(tr);function ys(e,t){var n,i,r,s,a=[],o=e.bounds,l=e.step,c=e.min,h=e.max,u=e.precision,d=e.count,g=e.maxTicks,p=e.maxDigits,f=e.includeBounds,m=l||1,v=g-1,A=t.min,y=t.max,b=!x(c),j=!x(h),k=!x(d),_=(y-A)/(p+1),w=X((y-A)/v/m)*m;if(w<1e-14&&!b&&!j)return[{value:A},{value:y}];(s=Math.ceil(y/w)-Math.floor(A/w))>v&&(w=X(s*w/v/m)*m),x(u)||(n=Math.pow(10,u),w=Math.ceil(w*n)/n),"ticks"===o?(i=Math.floor(A/w)*w,r=Math.ceil(y/w)*w):(i=A,r=y),b&&j&&l&&function(e,t){var n=Math.round(e);return n-t<=e&&n+t>=e}((h-c)/l,w/1e3)?(w=(h-c)/(s=Math.round(Math.min((h-c)/w,g))),i=c,r=h):k?w=((r=j?h:r)-(i=b?c:i))/(s=d-1):s=$(s=(r-i)/w,Math.round(s),w/1e3)?Math.round(s):Math.ceil(s);var D=Math.max(te(w),te(i));n=Math.pow(10,x(u)?D:u),i=Math.round(i*n)/n,r=Math.round(r*n)/n;var S=0;for(b&&(f&&i!==c?(a.push({value:c}),i<c&&S++,$(Math.round((i+S*w)*n)/n,c,bs(c,_,e))&&S++):i<c&&S++);S<s;++S)a.push({value:Math.round((i+S*w)*n)/n});return j&&f&&r!==h?a.length&&$(a[a.length-1].value,h,bs(h,_,e))?a[a.length-1].value=h:a.push({value:h}):j&&r!==h||a.push({value:r}),a}function bs(e,t,n){var i=n.horizontal,r=J(n.minRotation),s=(i?Math.sin(r):Math.cos(r))||.001,a=.75*t*(""+e).length;return Math.min(t/s,a)}As.id="category",As.defaults={ticks:{callback:As.prototype.getLabelForValue}};var js=function(e){function t(e){var n;return(0,h.A)(this,t),(n=(0,i.A)(this,t,[e])).start=void 0,n.end=void 0,n._startValue=void 0,n._endValue=void 0,n._valueRange=0,n}return(0,s.A)(t,e),(0,u.A)(t,[{key:"parse",value:function(e,t){return x(e)||("number"===typeof e||e instanceof Number)&&!isFinite(+e)?null:+e}},{key:"handleTickRangeOptions",value:function(){var e=this.options.beginAtZero,t=this.getUserBounds(),n=t.minDefined,i=t.maxDefined,r=this.min,s=this.max,a=function(e){return r=n?r:e},o=function(e){return s=i?s:e};if(e){var l=Q(r),c=Q(s);l<0&&c<0?o(0):l>0&&c>0&&a(0)}if(r===s){var h=1;(s>=Number.MAX_SAFE_INTEGER||r<=Number.MIN_SAFE_INTEGER)&&(h=Math.abs(.05*s)),o(s+h),e||a(r-h)}this.min=r,this.max=s}},{key:"getTickLimit",value:function(){var e,t=this.options.ticks,n=t.maxTicksLimit,i=t.stepSize;return i?(e=Math.ceil(this.max/i)-Math.floor(this.min/i)+1)>1e3&&(console.warn("scales.".concat(this.id,".ticks.stepSize: ").concat(i," would result generating up to ").concat(e," ticks. Limiting to 1000.")),e=1e3):(e=this.computeTickLimit(),n=n||11),n&&(e=Math.min(n,e)),e}},{key:"computeTickLimit",value:function(){return Number.POSITIVE_INFINITY}},{key:"buildTicks",value:function(){var e=this.options,t=e.ticks,n=this.getTickLimit(),i=ys({maxTicks:n=Math.max(2,n),bounds:e.bounds,min:e.min,max:e.max,precision:t.precision,step:t.stepSize,count:t.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:t.minRotation||0,includeBounds:!1!==t.includeBounds},this._range||this);return"ticks"===e.bounds&&Z(i,this,"value"),e.reverse?(i.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),i}},{key:"configure",value:function(){var e=this.ticks,n=this.min,i=this.max;if((0,r.A)(t,"configure",this,3)([]),this.options.offset&&e.length){var s=(i-n)/Math.max(e.length-1,1)/2;n-=s,i+=s}this._startValue=n,this._endValue=i,this._valueRange=i-n}},{key:"getLabelForValue",value:function(e){return hn(e,this.chart.options.locale)}}])}(tr),ks=function(e){function t(){return(0,h.A)(this,t),(0,i.A)(this,t,arguments)}return(0,s.A)(t,e),(0,u.A)(t,[{key:"determineDataLimits",value:function(){var e=this.getMinMax(!0),t=e.min,n=e.max;this.min=b(t)?t:0,this.max=b(n)?n:1,this.handleTickRangeOptions()}},{key:"computeTickLimit",value:function(){var e=this.isHorizontal(),t=e?this.width:this.height,n=J(this.options.ticks.minRotation),i=(e?Math.sin(n):Math.cos(n))||.001,r=this._resolveTickFontOptions(0);return Math.ceil(t/Math.min(40,r.lineHeight/i))}},{key:"getPixelForValue",value:function(e){return null===e?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}},{key:"getValueForPixel",value:function(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}])}(js);function _s(e){return 1===e/Math.pow(10,Math.floor(G(e)))}ks.id="linear",ks.defaults={ticks:{callback:Hi.formatters.numeric}};var ws=function(e){function t(e){var n;return(0,h.A)(this,t),(n=(0,i.A)(this,t,[e])).start=void 0,n.end=void 0,n._startValue=void 0,n._valueRange=0,n}return(0,s.A)(t,e),(0,u.A)(t,[{key:"parse",value:function(e,t){var n=js.prototype.parse.apply(this,[e,t]);if(0!==n)return b(n)&&n>0?n:null;this._zero=!0}},{key:"determineDataLimits",value:function(){var e=this.getMinMax(!0),t=e.min,n=e.max;this.min=b(t)?Math.max(0,t):null,this.max=b(n)?Math.max(0,n):null,this.options.beginAtZero&&(this._zero=!0),this.handleTickRangeOptions()}},{key:"handleTickRangeOptions",value:function(){var e=this.getUserBounds(),t=e.minDefined,n=e.maxDefined,i=this.min,r=this.max,s=function(e){return i=t?i:e},a=function(e){return r=n?r:e},o=function(e,t){return Math.pow(10,Math.floor(G(e))+t)};i===r&&(i<=0?(s(1),a(10)):(s(o(i,-1)),a(o(r,1)))),i<=0&&s(o(r,-1)),r<=0&&a(o(i,1)),this._zero&&this.min!==this._suggestedMin&&i===o(this.min,0)&&s(o(i,-1)),this.min=i,this.max=r}},{key:"buildTicks",value:function(){var e=this.options,t=function(e,t){var n=Math.floor(G(t.max)),i=Math.ceil(t.max/Math.pow(10,n)),r=[],s=j(e.min,Math.pow(10,Math.floor(G(t.min)))),a=Math.floor(G(s)),o=Math.floor(s/Math.pow(10,a)),l=a<0?Math.pow(10,Math.abs(a)):1;do{r.push({value:s,major:_s(s)}),10===++o&&(o=1,l=++a>=0?1:l),s=Math.round(o*Math.pow(10,a)*l)/l}while(a<n||a===n&&o<i);var c=j(e.max,s);return r.push({value:c,major:_s(s)}),r}({min:this._userMin,max:this._userMax},this);return"ticks"===e.bounds&&Z(t,this,"value"),e.reverse?(t.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),t}},{key:"getLabelForValue",value:function(e){return void 0===e?"0":hn(e,this.chart.options.locale)}},{key:"configure",value:function(){var e=this.min;(0,r.A)(t,"configure",this,3)([]),this._startValue=G(e),this._valueRange=G(this.max)-G(e)}},{key:"getPixelForValue",value:function(e){return void 0!==e&&0!==e||(e=this.min),null===e||isNaN(e)?NaN:this.getPixelForDecimal(e===this.min?0:(G(e)-this._startValue)/this._valueRange)}},{key:"getValueForPixel",value:function(e){var t=this.getDecimalForPixel(e);return Math.pow(10,this._startValue+t*this._valueRange)}}])}(tr);function Ds(e){var t=e.ticks;if(t.display&&e.display){var n=vt(t.backdropPadding);return k(t.font&&t.font.size,$e.font.size)+n.height}return 0}function Ss(e,t,n,i,r){return e===i||e===r?{start:t-n/2,end:t+n/2}:e<i||e>r?{start:t-n,end:t}:{start:t,end:t+n}}function Ps(e){for(var t,n,i,r={l:0,r:e.width,t:0,b:e.height-e.paddingTop},s={},a=[],o=[],l=e.getLabels().length,c=0;c<l;c++){var h=e.options.pointLabels.setContext(e.getPointLabelContext(c));o[c]=h.padding;var u=e.getPointPosition(c,e.drawingArea+o[c]),d=xt(h.font),g=(t=e.ctx,n=d,i=A(i=e._pointLabels[c])?i:[i],{w:Je(t,n.string,i),h:i.length*n.lineHeight});a[c]=g;var p=e.getIndexAngle(c),f=ee(p),m=Ss(f,u.x,g.w,0,180),v=Ss(f,u.y,g.h,90,270);m.start<r.l&&(r.l=m.start,s.l=p),m.end>r.r&&(r.r=m.end,s.r=p),v.start<r.t&&(r.t=v.start,s.t=p),v.end>r.b&&(r.b=v.end,s.b=p)}e._setReductions(e.drawingArea,r,s),e._pointLabelItems=function(e,t,n){for(var i=[],r=e.getLabels().length,s=e.options,a=Ds(s),o=e.getDistanceFromCenterForValue(s.ticks.reverse?e.min:e.max),l=0;l<r;l++){var c=0===l?a/2:0,h=e.getPointPosition(l,o+c+n[l]),u=ee(e.getIndexAngle(l)),d=t[l],g=Ns(h.y,d.h,u),p=Ms(u),f=Cs(h.x,d.w,p);i.push({x:h.x,y:g,textAlign:p,left:f,top:g,right:f+d.w,bottom:g+d.h})}return i}(e,a,o)}function Ms(e){return 0===e||180===e?"center":e<180?"left":"right"}function Cs(e,t,n){return"right"===n?e-=t:"center"===n&&(e-=t/2),e}function Ns(e,t,n){return 90===n||270===n?e-=t/2:(n>270||n<90)&&(e-=t),e}function Is(e,t,n,i){var r=e.ctx;if(n)r.arc(e.xCenter,e.yCenter,t,0,U);else{var s=e.getPointPosition(0,t);r.moveTo(s.x,s.y);for(var a=1;a<i;a++)s=e.getPointPosition(a,t),r.lineTo(s.x,s.y)}}function Os(e){return K(e)?e:0}ws.id="logarithmic",ws.defaults={ticks:{callback:Hi.formatters.logarithmic,major:{enabled:!0}}};var Ts=function(e){function t(e){var n;return(0,h.A)(this,t),(n=(0,i.A)(this,t,[e])).xCenter=void 0,n.yCenter=void 0,n.drawingArea=void 0,n._pointLabels=[],n._pointLabelItems=[],n}return(0,s.A)(t,e),(0,u.A)(t,[{key:"setDimensions",value:function(){this.width=this.maxWidth,this.height=this.maxHeight,this.paddingTop=Ds(this.options)/2,this.xCenter=Math.floor(this.width/2),this.yCenter=Math.floor((this.height-this.paddingTop)/2),this.drawingArea=Math.min(this.height-this.paddingTop,this.width)/2}},{key:"determineDataLimits",value:function(){var e=this.getMinMax(!1),t=e.min,n=e.max;this.min=b(t)&&!isNaN(t)?t:0,this.max=b(n)&&!isNaN(n)?n:0,this.handleTickRangeOptions()}},{key:"computeTickLimit",value:function(){return Math.ceil(this.drawingArea/Ds(this.options))}},{key:"generateTickLabels",value:function(e){var t=this;js.prototype.generateTickLabels.call(this,e),this._pointLabels=this.getLabels().map((function(e,n){var i=w(t.options.pointLabels.callback,[e,n],t);return i||0===i?i:""}))}},{key:"fit",value:function(){var e=this.options;e.display&&e.pointLabels.display?Ps(this):this.setCenterPoint(0,0,0,0)}},{key:"_setReductions",value:function(e,t,n){var i=t.l/Math.sin(n.l),r=Math.max(t.r-this.width,0)/Math.sin(n.r),s=-t.t/Math.cos(n.t),a=-Math.max(t.b-(this.height-this.paddingTop),0)/Math.cos(n.b);i=Os(i),r=Os(r),s=Os(s),a=Os(a),this.drawingArea=Math.max(e/2,Math.min(Math.floor(e-(i+r)/2),Math.floor(e-(s+a)/2))),this.setCenterPoint(i,r,s,a)}},{key:"setCenterPoint",value:function(e,t,n,i){var r=this.width-t-this.drawingArea,s=e+this.drawingArea,a=n+this.drawingArea,o=this.height-this.paddingTop-i-this.drawingArea;this.xCenter=Math.floor((s+r)/2+this.left),this.yCenter=Math.floor((a+o)/2+this.top+this.paddingTop)}},{key:"getIndexAngle",value:function(e){return re(e*(U/this.getLabels().length)+J(this.options.startAngle||0))}},{key:"getDistanceFromCenterForValue",value:function(e){if(x(e))return NaN;var t=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-e)*t:(e-this.min)*t}},{key:"getValueForDistanceFromCenter",value:function(e){if(x(e))return NaN;var t=e/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-t:this.min+t}},{key:"getPointLabelContext",value:function(e){var t=this._pointLabels||[];if(e>=0&&e<t.length){var n=t[e];return function(e,t,n){return yt(e,{label:n,index:t,type:"pointLabel"})}(this.getContext(),e,n)}}},{key:"getPointPosition",value:function(e,t){var n=this.getIndexAngle(e)-q;return{x:Math.cos(n)*t+this.xCenter,y:Math.sin(n)*t+this.yCenter,angle:n}}},{key:"getPointPositionForValue",value:function(e,t){return this.getPointPosition(e,this.getDistanceFromCenterForValue(t))}},{key:"getBasePosition",value:function(e){return this.getPointPositionForValue(e||0,this.getBaseValue())}},{key:"getPointLabelPosition",value:function(e){var t=this._pointLabelItems[e];return{left:t.left,top:t.top,right:t.right,bottom:t.bottom}}},{key:"drawBackground",value:function(){var e=this.options,t=e.backgroundColor,n=e.grid.circular;if(t){var i=this.ctx;i.save(),i.beginPath(),Is(this,this.getDistanceFromCenterForValue(this._endValue),n,this.getLabels().length),i.closePath(),i.fillStyle=t,i.fill(),i.restore()}}},{key:"drawGrid",value:function(){var e,t,n,i=this,r=this.ctx,s=this.options,a=s.angleLines,o=s.grid,l=this.getLabels().length;if(s.pointLabels.display&&function(e,t){for(var n=e.ctx,i=e.options.pointLabels,r=t-1;r>=0;r--){var s=i.setContext(e.getPointLabelContext(r)),a=xt(s.font),o=e._pointLabelItems[r],l=o.x,c=o.y,h=o.textAlign,u=o.left,d=o.top,g=o.right,p=o.bottom,f=s.backdropColor;if(!x(f)){var m=vt(s.backdropPadding);n.fillStyle=f,n.fillRect(u-m.left,d-m.top,g-u+m.width,p-d+m.height)}lt(n,e._pointLabels[r],l,c+a.lineHeight/2,a,{color:s.color,textAlign:h,textBaseline:"middle"})}}(this,l),o.display&&this.ticks.forEach((function(e,n){if(0!==n){t=i.getDistanceFromCenterForValue(e.value);var r=o.setContext(i.getContext(n-1));!function(e,t,n,i){var r=e.ctx,s=t.circular,a=t.color,o=t.lineWidth;!s&&!i||!a||!o||n<0||(r.save(),r.strokeStyle=a,r.lineWidth=o,r.setLineDash(t.borderDash),r.lineDashOffset=t.borderDashOffset,r.beginPath(),Is(e,n,s,i),r.closePath(),r.stroke(),r.restore())}(i,r,t,l)}})),a.display){for(r.save(),e=this.getLabels().length-1;e>=0;e--){var c=a.setContext(this.getPointLabelContext(e)),h=c.color,u=c.lineWidth;u&&h&&(r.lineWidth=u,r.strokeStyle=h,r.setLineDash(c.borderDash),r.lineDashOffset=c.borderDashOffset,t=this.getDistanceFromCenterForValue(s.ticks.reverse?this.min:this.max),n=this.getPointPosition(e,t),r.beginPath(),r.moveTo(this.xCenter,this.yCenter),r.lineTo(n.x,n.y),r.stroke())}r.restore()}}},{key:"drawBorder",value:function(){}},{key:"drawLabels",value:function(){var e=this,t=this.ctx,n=this.options,i=n.ticks;if(i.display){var r,s,a=this.getIndexAngle(0);t.save(),t.translate(this.xCenter,this.yCenter),t.rotate(a),t.textAlign="center",t.textBaseline="middle",this.ticks.forEach((function(a,o){if(0!==o||n.reverse){var l=i.setContext(e.getContext(o)),c=xt(l.font);if(r=e.getDistanceFromCenterForValue(e.ticks[o].value),l.showLabelBackdrop){t.font=c.string,s=t.measureText(a.label).width,t.fillStyle=l.backdropColor;var h=vt(l.backdropPadding);t.fillRect(-s/2-h.left,-r-c.size/2-h.top,s+h.width,c.size+h.height)}lt(t,a.label,0,-r,c,{color:l.color})}})),t.restore()}}},{key:"drawTitle",value:function(){}}])}(js);Ts.id="radialLinear",Ts.defaults={display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:Hi.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback:function(e){return e},padding:5}},Ts.defaultRoutes={"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"},Ts.descriptors={angleLines:{_fallback:"grid"}};var Ls={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Rs=Object.keys(Ls);function Es(e,t){return e-t}function Fs(e,t){if(x(t))return null;var n=e._adapter,i=e._parseOpts,r=i.parser,s=i.round,a=i.isoWeekday,o=t;return"function"===typeof r&&(o=r(o)),b(o)||(o="string"===typeof r?n.parse(o,r):n.parse(o)),null===o?null:(s&&(o="week"!==s||!K(a)&&!0!==a?n.startOf(o,s):n.startOf(o,"isoWeek",a)),+o)}function zs(e,t,n,i){for(var r=Rs.length,s=Rs.indexOf(e);s<r-1;++s){var a=Ls[Rs[s]],o=a.steps?a.steps:Number.MAX_SAFE_INTEGER;if(a.common&&Math.ceil((n-t)/(o*a.size))<=i)return Rs[s]}return Rs[r-1]}function Us(e,t,n){if(n){if(n.length){var i=bt(n,t),r=i.lo,s=i.hi;e[n[r]>=t?n[r]:n[s]]=!0}}else e[t]=!0}function Bs(e,t,n){var i,r,s=[],a={},o=t.length;for(i=0;i<o;++i)a[r=t[i]]=i,s.push({value:r,major:!1});return 0!==o&&n?function(e,t,n,i){var r,s,a=e._adapter,o=+a.startOf(t[0].value,i),l=t[t.length-1].value;for(r=o;r<=l;r=+a.add(r,1,i))(s=n[r])>=0&&(t[s].major=!0);return t}(e,s,a,n):s}var Ys=function(e){function t(e){var n;return(0,h.A)(this,t),(n=(0,i.A)(this,t,[e]))._cache={data:[],labels:[],all:[]},n._unit="day",n._majorUnit=void 0,n._offsets={},n._normalized=!1,n._parseOpts=void 0,n}return(0,s.A)(t,e),(0,u.A)(t,[{key:"init",value:function(e,n){var i=e.time||(e.time={}),s=this._adapter=new ri._date(e.adapters.date);I(i.displayFormats,s.formats()),this._parseOpts={parser:i.parser,round:i.round,isoWeekday:i.isoWeekday},(0,r.A)(t,"init",this,3)([e]),this._normalized=n.normalized}},{key:"parse",value:function(e,t){return void 0===e?null:Fs(this,e)}},{key:"beforeLayout",value:function(){(0,r.A)(t,"beforeLayout",this,3)([]),this._cache={data:[],labels:[],all:[]}}},{key:"determineDataLimits",value:function(){var e=this.options,t=this._adapter,n=e.time.unit||"day",i=this.getUserBounds(),r=i.min,s=i.max,a=i.minDefined,o=i.maxDefined;function l(e){a||isNaN(e.min)||(r=Math.min(r,e.min)),o||isNaN(e.max)||(s=Math.max(s,e.max))}a&&o||(l(this._getLabelBounds()),"ticks"===e.bounds&&"labels"===e.ticks.source||l(this.getMinMax(!1))),r=b(r)&&!isNaN(r)?r:+t.startOf(Date.now(),n),s=b(s)&&!isNaN(s)?s:+t.endOf(Date.now(),n)+1,this.min=Math.min(r,s-1),this.max=Math.max(r+1,s)}},{key:"_getLabelBounds",value:function(){var e=this.getLabelTimestamps(),t=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY;return e.length&&(t=e[0],n=e[e.length-1]),{min:t,max:n}}},{key:"buildTicks",value:function(){var e=this.options,t=e.time,n=e.ticks,i="labels"===n.source?this.getLabelTimestamps():this._generate();"ticks"===e.bounds&&i.length&&(this.min=this._userMin||i[0],this.max=this._userMax||i[i.length-1]);var r=this.min,s=function(e,t,n){for(var i=0,r=e.length;i<r&&e[i]<t;)i++;for(;r>i&&e[r-1]>n;)r--;return i>0||r<e.length?e.slice(i,r):e}(i,r,this.max);return this._unit=t.unit||(n.autoSkip?zs(t.minUnit,this.min,this.max,this._getLabelCapacity(r)):function(e,t,n,i,r){for(var s=Rs.length-1;s>=Rs.indexOf(n);s--){var a=Rs[s];if(Ls[a].common&&e._adapter.diff(r,i,a)>=t-1)return a}return Rs[n?Rs.indexOf(n):0]}(this,s.length,t.minUnit,this.min,this.max)),this._majorUnit=n.major.enabled&&"year"!==this._unit?function(e){for(var t=Rs.indexOf(e)+1,n=Rs.length;t<n;++t)if(Ls[Rs[t]].common)return Rs[t]}(this._unit):void 0,this.initOffsets(i),e.reverse&&s.reverse(),Bs(this,s,this._majorUnit)}},{key:"initOffsets",value:function(e){var t,n,i=0,r=0;this.options.offset&&e.length&&(t=this.getDecimalForValue(e[0]),i=1===e.length?1-t:(this.getDecimalForValue(e[1])-t)/2,n=this.getDecimalForValue(e[e.length-1]),r=1===e.length?n:(n-this.getDecimalForValue(e[e.length-2]))/2);var s=e.length<3?.5:.25;i=ae(i,0,s),r=ae(r,0,s),this._offsets={start:i,end:r,factor:1/(i+1+r)}}},{key:"_generate",value:function(){var e,t,n=this._adapter,i=this.min,r=this.max,s=this.options,a=s.time,o=a.unit||zs(a.minUnit,i,r,this._getLabelCapacity(i)),l=k(a.stepSize,1),c="week"===o&&a.isoWeekday,h=K(c)||!0===c,u={},d=i;if(h&&(d=+n.startOf(d,"isoWeek",c)),d=+n.startOf(d,h?"day":o),n.diff(r,i,o)>1e5*l)throw new Error(i+" and "+r+" are too far apart with stepSize of "+l+" "+o);var g="data"===s.ticks.source&&this.getDataTimestamps();for(e=d,t=0;e<r;e=+n.add(e,l,o),t++)Us(u,e,g);return e!==r&&"ticks"!==s.bounds&&1!==t||Us(u,e,g),Object.keys(u).sort((function(e,t){return e-t})).map((function(e){return+e}))}},{key:"getLabelForValue",value:function(e){var t=this._adapter,n=this.options.time;return n.tooltipFormat?t.format(e,n.tooltipFormat):t.format(e,n.displayFormats.datetime)}},{key:"_tickFormatFunction",value:function(e,t,n,i){var r=this.options,s=r.time.displayFormats,a=this._unit,o=this._majorUnit,l=a&&s[a],c=o&&s[o],h=n[t],u=o&&c&&h&&h.major,d=this._adapter.format(e,i||(u?c:l)),g=r.ticks.callback;return g?w(g,[d,t,n],this):d}},{key:"generateTickLabels",value:function(e){var t,n,i;for(t=0,n=e.length;t<n;++t)(i=e[t]).label=this._tickFormatFunction(i.value,t,e)}},{key:"getDecimalForValue",value:function(e){return null===e?NaN:(e-this.min)/(this.max-this.min)}},{key:"getPixelForValue",value:function(e){var t=this._offsets,n=this.getDecimalForValue(e);return this.getPixelForDecimal((t.start+n)*t.factor)}},{key:"getValueForPixel",value:function(e){var t=this._offsets,n=this.getDecimalForPixel(e)/t.factor-t.end;return this.min+n*(this.max-this.min)}},{key:"_getLabelSize",value:function(e){var t=this.options.ticks,n=this.ctx.measureText(e).width,i=J(this.isHorizontal()?t.maxRotation:t.minRotation),r=Math.cos(i),s=Math.sin(i),a=this._resolveTickFontOptions(0).size;return{w:n*r+a*s,h:n*s+a*r}}},{key:"_getLabelCapacity",value:function(e){var t=this.options.time,n=t.displayFormats,i=n[t.unit]||n.millisecond,r=this._tickFormatFunction(e,0,Bs(this,[e],this._majorUnit),i),s=this._getLabelSize(r),a=Math.floor(this.isHorizontal()?this.width/s.w:this.height/s.h)-1;return a>0?a:1}},{key:"getDataTimestamps",value:function(){var e,t,n=this._cache.data||[];if(n.length)return n;var i=this.getMatchingVisibleMetas();if(this._normalized&&i.length)return this._cache.data=i[0].controller.getAllParsedValues(this);for(e=0,t=i.length;e<t;++e)n=n.concat(i[e].controller.getAllParsedValues(this));return this._cache.data=this.normalize(n)}},{key:"getLabelTimestamps",value:function(){var e,t,n=this._cache.labels||[];if(n.length)return n;var i=this.getLabels();for(e=0,t=i.length;e<t;++e)n.push(Fs(this,i[e]));return this._cache.labels=this._normalized?n:this.normalize(n)}},{key:"normalize",value:function(e){return Dt(e.sort(Es))}}])}(tr);function Vs(e,t,n){var i,r,s,a,o=0,l=e.length-1;if(n){if(t>=e[o].pos&&t<=e[l].pos){var c=jt(e,"pos",t);o=c.lo,l=c.hi}var h=e[o];i=h.pos,s=h.time;var u=e[l];r=u.pos,a=u.time}else{if(t>=e[o].time&&t<=e[l].time){var d=jt(e,"time",t);o=d.lo,l=d.hi}var g=e[o];i=g.time,s=g.pos;var p=e[l];r=p.time,a=p.pos}var f=r-i;return f?s+(a-s)*(t-i)/f:s}Ys.id="time",Ys.defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",major:{enabled:!1}}};var qs=function(e){function t(e){var n;return(0,h.A)(this,t),(n=(0,i.A)(this,t,[e]))._table=[],n._minPos=void 0,n._tableRange=void 0,n}return(0,s.A)(t,e),(0,u.A)(t,[{key:"initOffsets",value:function(){var e=this._getTimestampsForTable(),n=this._table=this.buildLookupTable(e);this._minPos=Vs(n,this.min),this._tableRange=Vs(n,this.max)-this._minPos,(0,r.A)(t,"initOffsets",this,3)([e])}},{key:"buildLookupTable",value:function(e){var t,n,i,r,s,a=this.min,o=this.max,l=[],c=[];for(t=0,n=e.length;t<n;++t)(r=e[t])>=a&&r<=o&&l.push(r);if(l.length<2)return[{time:a,pos:0},{time:o,pos:1}];for(t=0,n=l.length;t<n;++t)s=l[t+1],i=l[t-1],r=l[t],Math.round((s+i)/2)!==r&&c.push({time:r,pos:t/(n-1)});return c}},{key:"_getTimestampsForTable",value:function(){var e=this._cache.all||[];if(e.length)return e;var t=this.getDataTimestamps(),n=this.getLabelTimestamps();return e=t.length&&n.length?this.normalize(t.concat(n)):t.length?t:n,e=this._cache.all=e}},{key:"getDecimalForValue",value:function(e){return(Vs(this._table,e)-this._minPos)/this._tableRange}},{key:"getValueForPixel",value:function(e){var t=this._offsets,n=this.getDecimalForPixel(e)/t.factor-t.end;return Vs(this._table,n*this._tableRange+this._minPos,!0)}}])}(Ys);qs.id="timeseries",qs.defaults=Ys.defaults},19167:function(e,t,n){n.d(t,{N1:function(){return m}});var i=n(80045),r=n(89379),s=n(9950),a=n(65478),o=["height","width","redraw","datasetIdKey","type","data","options","plugins","fallbackContent"],l="label";function c(e,t){"function"===typeof e?e(t):e&&(e.current=t)}function h(e,t){e.labels=t}function u(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:l,i=[];e.datasets=t.map((function(t){var s=e.datasets.find((function(e){return e[n]===t[n]}));return s&&t.data&&!i.includes(s)?(i.push(s),Object.assign(s,t),s):(0,r.A)({},t)}))}function d(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l,n={labels:[],datasets:[]};return h(n,e.labels),u(n,e.datasets,t),n}function g(e,t){var n=e.height,l=void 0===n?150:n,g=e.width,p=void 0===g?300:g,f=e.redraw,m=void 0!==f&&f,v=e.datasetIdKey,x=e.type,A=e.data,y=e.options,b=e.plugins,j=void 0===b?[]:b,k=e.fallbackContent,_=(0,i.A)(e,o),w=(0,s.useRef)(null),D=(0,s.useRef)(),S=function(){w.current&&(D.current=new a.t1(w.current,{type:x,data:d(A,v),options:y,plugins:j}),c(t,D.current))},P=function(){c(t,null),D.current&&(D.current.destroy(),D.current=null)};return(0,s.useEffect)((function(){var e,t;!m&&D.current&&y&&(e=D.current,t=y,e.options=(0,r.A)({},t))}),[m,y]),(0,s.useEffect)((function(){!m&&D.current&&h(D.current.config.data,A.labels)}),[m,A.labels]),(0,s.useEffect)((function(){!m&&D.current&&A.datasets&&u(D.current.config.data,A.datasets,v)}),[m,A.datasets]),(0,s.useEffect)((function(){D.current&&(m?(P(),setTimeout(S)):D.current.update())}),[m,y,A.labels,A.datasets]),(0,s.useEffect)((function(){return S(),function(){return P()}}),[]),s.createElement("canvas",Object.assign({ref:w,role:"img",height:l,width:p},_),k)}var p=(0,s.forwardRef)(g);function f(e,t){return a.t1.register(t),(0,s.forwardRef)((function(t,n){return s.createElement(p,Object.assign({},t,{ref:n,type:e}))}))}var m=f("line",a.ZT)},66169:function(){},37696:function(){},63864:function(){}},function(e){e.O(0,[4223],(function(){return t=69619,e(e.s=t);var t}));e.O()}]);