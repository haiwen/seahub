{"version":3,"file":"static/js/app.5e3668a2.js","mappings":"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","sources":["components/system-notification.js","models/group.js","components/main-side-nav.js","components/dialog/about-dialog.js","components/side-nav-footer.js","components/side-panel.js","components/main-panel.js","pages/drafts/drafts-view.js","components/draft-list-view/draft-list-item.js","components/draft-list-view/draft-list-view.js","pages/drafts/draft-content.js","models/activity.js","components/dialog/list-created-files-dialog.js","pages/dashboard/activity-item.js","pages/dashboard/content.js","pages/dashboard/user-selector.js","pages/dashboard/files-activities.js","pages/dashboard/my-file-activities.js","pages/starred/starred.js","components/dialog/confirm-unlink-device.js","pages/linked-devices/linked-devices.js","models/shared-repo-info.js","components/dialog/perm-select.js","pages/share-admin/libraries.js","models/shared-folder-info.js","pages/share-admin/folders.js","components/dialog/share-link-permission-select.js","components/dialog/sort-options.js","components/toolbar/top-toolbar.js","pages/share-admin/share-links.js","pages/share-admin/upload-links.js","models/repo.js","components/libs-mobile-thead.js","components/repo-monitored-icon.js","pages/shared-libs/shared-libs.js","pages/share-with-ocm/shared-with-ocm.js","pages/ocm-via-webdav/ocm-via-webdav.js","pages/share-with-ocm/remote-dir-topbar.js","pages/share-with-ocm/remote-dir-path.js","pages/share-with-ocm/remote-dir-content.js","pages/share-with-ocm/remote-dir-view.js","components/dialog/create-repo-dialog.js","components/toolbar/repo-view-toobar.js","components/dirent-detail/lib-details.js","components/dialog/lib-history-setting-dialog.js","components/dialog/change-repo-password-dialog.js","components/dialog/reset-encrypted-repo-password-dialog.js","components/dialog/label-repo-state-dialog.js","components/dialog/lib-sub-folder-set-user-permission-dialog.js","components/dialog/lib-sub-folder-set-group-permission-dialog.js","components/dialog/lib-sub-folder-permission-dialog.js","pages/my-libs/mylib-repo-menu.js","components/select-editor/repo-api-token-permission-editor.js","components/dialog/repo-api-token-dialog.js","components/dialog/repo-share-admin/share-links.js","components/dialog/repo-share-admin/upload-links.js","components/dialog/repo-share-admin/user-shares.js","components/dialog/repo-share-admin/group-shares.js","components/dialog/repo-share-admin-dialog.js","components/dialog/lib-old-files-auto-del-dialog.js","pages/my-libs/mylib-repo-list-item.js","pages/my-libs/mylib-repo-list-view.js","components/dialog/guide-for-new-dialog.js","pages/my-libs/my-libs.js","pages/my-libs/my-libs-deleted.js","components/dialog/share-repo-dialog.js","components/shared-repo-list-view/shared-repo-list-item.js","components/shared-repo-list-view/shared-repo-list-view.js","pages/shared-with-all/public-shared-view.js","utils/collab-server.js","components/dialog/lib-decrypt-dialog.js","components/toolbar/view-mode-toolbar.js","components/dialog/create-file-dialog.js","components/toolbar/dir-operation-toolbar.js","components/dialog/move-dirent-dialog.js","components/dialog/copy-dirent-dialog.js","components/dialog/create-tag-dialog.js","components/dialog/edit-filetag-dialog.js","../node_modules/uuid/dist/esm-browser/rng.js","components/dialog/rename-dirent.js","components/toolbar/multiple-dir-operation-toolbar.js","components/toolbar/view-file-toolbar.js","pages/lib-content-view/lib-content-toolbar.js","components/cur-dir-path/dir-path.js","../node_modules/uuid/dist/esm-browser/native.js","../node_modules/uuid/dist/esm-browser/stringify.js","../node_modules/uuid/dist/esm-browser/v4.js","components/dialog/tag-color.js","components/dialog/tag-name.js","components/popover/tag-list-item.js","components/popover/virtual-tag-color.js","components/popover/virtual-tag-name.js","components/popover/virtual-tag-list-item.js","components/popover/tag-list-footer.js","components/popover/list-tag-popover.js","components/cur-dir-path/dir-tool.js","components/cur-dir-path/index.js","components/dialog/extra-attributes-dialog/column/column-name.js","components/dialog/extra-attributes-dialog/editor/simple-text.js","components/dialog/extra-attributes-dialog/editor/formula-formatter.js","components/dialog/extra-attributes-dialog/editor/search-input.js","components/dialog/extra-attributes-dialog/editor/single-select/single-select-editor.js","components/dialog/extra-attributes-dialog/editor/single-select/index.js","components/dialog/extra-attributes-dialog/editor/number-editor.js","components/dialog/extra-attributes-dialog/editor/date-editor.js","components/dialog/extra-attributes-dialog/editor/ctime-formatter.js","components/dialog/extra-attributes-dialog/editor/index.js","components/dialog/extra-attributes-dialog/column/index.js","components/dialog/extra-attributes-dialog/index.js","components/dialog/confirm-apply-folder-properties-dialog.js","components/dirent-detail/detail-list-view.js","components/dirent-detail/dirent-details.js","components/dirent-list-view/dirent-none-view.js","components/dirent-list-view/file-tag.js","components/dirent-list-view/dirent-list-item.js","components/draggable/dirents-dragged-preview.js","components/dirent-list-view/dirent-list-view.js","components/dir-view-mode/dir-list-view.js","components/dirent-grid-view/dirent-grid-item.js","components/dirent-grid-view/dirent-grid-view.js","components/dir-view-mode/dir-grid-view.js","components/dialog/rename-dialog.js","components/dir-view-mode/dir-column-nav.js","components/dir-view-mode/dir-column-file.js","components/dir-view-mode/dir-column-view.js","pages/lib-content-view/lib-content-container.js","components/file-uploader/upload-list-item.js","components/file-uploader/forbid-upload-list-item.js","components/file-uploader/upload-progress-dialog.js","components/dialog/upload-remind-dialog.js","components/file-uploader/file-uploader.js","components/dialog/delete-folder-dialog.js","components/dialog/convert-markdown-dialog.js","pages/lib-content-view/lib-content-view.js","components/dialog/dismiss-group-dialog.js","components/dialog/rename-group-dialog.js","components/dialog/transfer-group-dialog.js","components/dialog/import-members-dialog.js","components/group-members.js","components/list-and-add-group-members.js","components/dialog/manage-members-dialog.js","components/dialog/leave-group-dialog.js","pages/groups/group-view.js","components/toolbar/groups-toolbar.js","components/dialog/create-group-dialog.js","pages/groups/groups-view.js","components/toolbar/invitations-toolbar.js","components/dialog/invite-people-dialog.js","components/dialog/invitation-revoke-dialog.js","pages/invitations/invitations-view.js","components/dialog/new-wiki-dialog.js","components/dialog/wiki-select-dialog.js","components/dialog/wiki-delete-dialog.js","components/wiki-list-view/wiki-list-item.js","components/wiki-list-view/wiki-list-view.js","pages/wikis/wikis.js","components/toolbar/general-toolbar.js","components/main-content-wrapper.js","app.js","components/common/seahub-popover.js","components/context-menu/actions.js","components/context-menu/context-menu.js","components/context-menu/globalEventListener.js","components/context-menu/helpers.js","components/dialog/copy-move-dirent-progress-dialog.js","components/dialog/create-folder-dialog.js","components/dialog/image-dialog.js","components/dialog/share-admin-link.js","components/dialog/zip-download-dialog.js","components/dropdown-menu/item-dropdown-menu.js","components/icon.js","components/common/common-add-tool.js","components/common/search-input.js","components/popover/tag-item.js","components/popover/edit-filetag-popover.js","components/rename.js","components/dialog/list-taggedfiles-dialog.js","models/draft.js","components/dialog/list-repo-drafts-dialog.js","components/repo-info-bar.js","components/tree-view/tree-node-view.js","components/tree-view/tree-view.js","components/wiki-markdown-viewer.js","../node_modules/after/index.js","../node_modules/arraybuffer.slice/index.js","../node_modules/backo2/index.js","../node_modules/base64-arraybuffer/lib/base64-arraybuffer.js","../node_modules/blob/index.js","../node_modules/component-bind/index.js","../node_modules/component-emitter/index.js","../node_modules/component-inherit/index.js","../node_modules/engine.io-client/lib/globalThis.browser.js","../node_modules/engine.io-client/lib/index.js","../node_modules/engine.io-client/lib/socket.js","../node_modules/engine.io-client/lib/transport.js","../node_modules/engine.io-client/lib/transports/index.js","../node_modules/engine.io-client/lib/transports/polling-jsonp.js","../node_modules/engine.io-client/lib/transports/polling-xhr.js","../node_modules/engine.io-client/lib/transports/polling.js","../node_modules/engine.io-client/lib/transports/websocket.js","../node_modules/engine.io-client/lib/transports/xmlhttprequest.browser.js","../node_modules/engine.io-client/node_modules/debug/src/browser.js","../node_modules/engine.io-client/node_modules/debug/src/debug.js","../node_modules/engine.io-client/node_modules/ms/index.js","../node_modules/engine.io-parser/lib/browser.js","../node_modules/engine.io-parser/lib/keys.js","../node_modules/engine.io-parser/lib/utf8.js","../node_modules/has-binary2/index.js","../node_modules/has-binary2/node_modules/isarray/index.js","../node_modules/has-cors/index.js","../node_modules/indexof/index.js","../node_modules/parseqs/index.js","../node_modules/parseuri/index.js","../node_modules/reactstrap/es/Table.js","../node_modules/socket.io-client/lib/index.js","../node_modules/socket.io-client/lib/manager.js","../node_modules/socket.io-client/lib/on.js","../node_modules/socket.io-client/lib/socket.js","../node_modules/socket.io-client/lib/url.js","../node_modules/socket.io-client/node_modules/debug/src/browser.js","../node_modules/socket.io-client/node_modules/debug/src/debug.js","../node_modules/socket.io-client/node_modules/ms/index.js","../node_modules/socket.io-parser/binary.js","../node_modules/socket.io-parser/index.js","../node_modules/socket.io-parser/is-buffer.js","../node_modules/socket.io-parser/node_modules/debug/src/browser.js","../node_modules/socket.io-parser/node_modules/debug/src/debug.js","../node_modules/socket.io-parser/node_modules/isarray/index.js","../node_modules/socket.io-parser/node_modules/ms/index.js","../node_modules/svg-baker-runtime/browser-symbol.js","../node_modules/svg-sprite-loader/runtime/browser-sprite.build.js","../node_modules/to-array/index.js","../node_modules/yeast/index.js","webpack://seahub-frontend/./src/css/repo-tag.css?ecda","assets/icons/monitor.svg","assets/icons/tag.svg","assets/icons|sync|//.svg$"],"sourcesContent":["import React from 'react';\nimport { curNoteMsg, curNoteID, siteRoot, gettext } from '../utils/constants';\n\nimport '../css/system-notification.css';\n\nclass SystemNotification extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isClosed: false\n    };\n  }\n\n  close = () => {\n    this.setState({isClosed: true});\n\n    if (navigator.cookieEnabled) {\n      let date = new Date(),\n        cookies = document.cookie.split('; '),\n        infoIDExist = false,\n        newInfoID = curNoteID + '_';\n      date.setTime(date.getTime() + 14*24*60*60*1000);\n      newInfoID += '; expires=' + date.toGMTString() + '; path=' + siteRoot;\n      for (var i = 0, len = cookies.length; i < len; i++) {\n        if (cookies[i].split('=')[0] == 'info_id') {\n          infoIDExist = true;\n          document.cookie = 'info_id=' + cookies[i].split('=')[1] + newInfoID;\n          break;\n        }\n      }\n      if (!infoIDExist) {\n        document.cookie = 'info_id=' + newInfoID;\n      }\n    }\n  };\n\n  render() {\n    if (!curNoteMsg || this.state.isClosed) {\n      return null;\n    }\n\n    return (\n      <div id=\"info-bar\" className=\"d-flex justify-content-between\">\n        <p id=\"info-bar-info\" className=\"m-0\" dangerouslySetInnerHTML={{__html: curNoteMsg}}></p>\n        <button className=\"close sf2-icon-x1\" title={gettext('Close')} aria-label={gettext('Close')} onClick={this.close}></button>\n      </div>\n    );\n  }\n}\n\nexport default SystemNotification;\n","class Group {\n  constructor(object) {\n    this.id= object.id;\n    this.name = object.name;\n    this.owner = object.owner;\n    this.admins = object.admins || [];\n    this.avatar_url = object.avatar_url;\n    this.created_at = object.created_at;\n    this.parent_group_id = object.parent_group_id;\n    this.wiki_enabled = object.wiki_enabled;\n    this.repos = object.repos || [];\n    this.group_quota = object.group_quota;\n    this.group_quota_usage = object.group_quota_usage;\n  }\n}\n\nexport default Group;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Link } from '@gatsbyjs/reach-router';\nimport { gettext, siteRoot, canAddRepo, canGenerateShareLink, canGenerateUploadLink, canInvitePeople, dtableWebServer, enableOCM, enableOCMViaWebdav } from '../utils/constants';\nimport { seafileAPI } from '../utils/seafile-api';\nimport { Utils } from '../utils/utils';\nimport toaster from './toast';\nimport Group from '../models/group';\n\nimport { canViewOrg, isDocs, isPro, isDBSqlite3, customNavItems } from '../utils/constants';\n\nconst propTypes = {\n  currentTab: PropTypes.oneOfType([PropTypes.string, PropTypes.number]).isRequired,\n  tabItemClick: PropTypes.func.isRequired,\n  draftCounts: PropTypes.number,\n};\n\nclass MainSideNav extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      groupsExtended: false,\n      sharedExtended: false,\n      closeSideBar:false,\n      groupItems: [],\n    };\n\n    this.listHeight = 24; //for caculate tabheight\n    this.groupsHeight = 0;\n    this.adminHeight = 0;\n  }\n\n  grpsExtend = () => {\n    this.setState({\n      groupsExtended: !this.state.groupsExtended,\n    });\n    this.loadGroups();\n  };\n\n  shExtend = () => {\n    this.setState({\n      sharedExtended: !this.state.sharedExtended,\n    });\n  };\n\n  loadGroups = () => {\n    let _this = this;\n    seafileAPI.listGroups().then(res =>{\n      let groupList = res.data.map(item => {\n        let group = new Group(item);\n        return group;\n      });\n\n      this.groupsHeight = (groupList.length + 1) * _this.listHeight;\n      _this.setState({\n        groupItems: groupList.sort((a, b) => {\n          return a.name.toLowerCase() < b.name.toLowerCase() ? -1 : 1;\n        })\n      });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  tabItemClick = (e, param, id) => {\n    if (window.uploader &&\n      window.uploader.isUploadProgressDialogShow &&\n      window.uploader.totalProgress !== 100) {\n      if (!window.confirm(gettext('A file is being uploaded. Are you sure you want to leave this page?'))) {\n        e.preventDefault();\n        return false;\n      }\n      window.uploader.isUploadProgressDialogShow = false;\n    }\n    this.props.tabItemClick(param, id);\n  };\n\n  onDTableClick = () => {\n    let url = dtableWebServer;\n    window.open(url);\n  };\n\n  getActiveClass = (tab) => {\n    return this.props.currentTab === tab ? 'active' : '';\n  };\n\n  renderSharedGroups() {\n    let style = {height: 0};\n    if (this.state.groupsExtended) {\n      style = {height: this.groupsHeight};\n    }\n    return (\n      <ul className={`nav sub-nav nav-pills flex-column grp-list ${this.state.groupsExtended ? 'side-panel-slide' : 'side-panel-slide-up'}`} style={style}>\n        <li className=\"nav-item\">\n          <Link to={siteRoot + 'groups/'}  className={`nav-link ellipsis ${this.getActiveClass('groups')}`} onClick={(e) => this.tabItemClick(e, 'groups')}>\n            <span className=\"sharp\" aria-hidden=\"true\">#</span>\n            <span className=\"nav-text\">{gettext('All Groups')}</span>\n          </Link>\n        </li>\n        {this.state.groupItems.map(item => {\n          return (\n            <li key={item.id} className=\"nav-item\">\n              <Link to={siteRoot + 'group/' + item.id + '/'} className={`nav-link ellipsis ${this.getActiveClass(item.name)}`} onClick={(e) => this.tabItemClick(e, item.name, item.id)}>\n                <span className=\"sharp\" aria-hidden=\"true\">#</span>\n                <span className=\"nav-text\">{item.name}</span>\n              </Link>\n            </li>\n          );\n        })}\n      </ul>\n    );\n  }\n\n  renderSharedAdmin() {\n    let height = 0;\n    if (this.state.sharedExtended) {\n      if (!this.adminHeight) {\n        this.adminHeight = 3 * this.listHeight;\n      }\n      height = this.adminHeight;\n    }\n    let style = {height: height};\n\n    let linksNavItem = null;\n    if (canGenerateShareLink) {\n      linksNavItem = (\n        <li className=\"nav-item\">\n          <Link to={siteRoot + 'share-admin-share-links/'} className={`nav-link ellipsis ${this.getActiveClass('share-admin-share-links')}`} title={gettext('Links')} onClick={(e) => this.tabItemClick(e, 'share-admin-share-links')}>\n            <span aria-hidden=\"true\" className=\"sharp\">#</span>\n            <span className=\"nav-text\">{gettext('Links')}</span>\n          </Link>\n        </li>\n      );\n    } else if (canGenerateUploadLink) {\n      linksNavItem = (\n        <li className=\"nav-item\">\n          <Link to={siteRoot + 'share-admin-upload-links/'} className={`nav-link ellipsis ${this.getActiveClass('share-admin-upload-links')}`} title={gettext('Links')} onClick={(e) => this.tabItemClick(e, 'share-admin-upload-links')}>\n            <span aria-hidden=\"true\" className=\"sharp\">#</span>\n            <span className=\"nav-text\">{gettext('Links')}</span>\n          </Link>\n        </li>\n      );\n    }\n    return (\n      <ul className={`nav sub-nav nav-pills flex-column ${this.state.sharedExtended ? 'side-panel-slide' : 'side-panel-slide-up'}`} style={style} >\n        {canAddRepo && (\n          <li className=\"nav-item\">\n            <Link to={siteRoot + 'share-admin-libs/'} className={`nav-link ellipsis ${this.getActiveClass('share-admin-libs')}`} title={gettext('Libraries')} onClick={(e) => this.tabItemClick(e, 'share-admin-libs')}>\n              <span aria-hidden=\"true\" className=\"sharp\">#</span>\n              <span className=\"nav-text\">{gettext('Libraries')}</span>\n            </Link>\n          </li>\n        )}\n        <li className=\"nav-item\">\n          <Link to={siteRoot + 'share-admin-folders/'} className={`nav-link ellipsis ${this.getActiveClass('share-admin-folders')}`} title={gettext('Folders')} onClick={(e) => this.tabItemClick(e, 'share-admin-folders')}>\n            <span aria-hidden=\"true\" className=\"sharp\">#</span>\n            <span className=\"nav-text\">{gettext('Folders')}</span>\n          </Link>\n        </li>\n        {linksNavItem}\n      </ul>\n    );\n  }\n\n  renderCustomNavItems() {\n    return (\n      customNavItems.map((item, idx) => {\n        return (\n          <li key={idx} className=\"nav-item\">\n            <a href={item.link} className=\"nav-link ellipsis\" title={item.desc}>\n              <span className={item.icon} aria-hidden=\"true\"></span>\n              <span className=\"nav-text\">{item.desc}</span>\n            </a>\n          </li>\n        );\n      })\n    );\n  }\n\n  render() {\n    let showActivity = isDocs || isPro || !isDBSqlite3;\n    return (\n      <div className=\"side-nav\">\n        <div className=\"side-nav-con\">\n          <h3 className=\"sf-heading\">{gettext('Files')}</h3>\n          <ul className=\"nav nav-pills flex-column nav-container\">\n            {canAddRepo && (\n              <li className=\"nav-item\">\n                <Link to={ siteRoot + 'my-libs/' } className={`nav-link ellipsis ${this.getActiveClass('my-libs') || this.getActiveClass('deleted') }`} title={gettext('My Libraries')} onClick={(e) => this.tabItemClick(e, 'my-libs')}>\n                  <span className=\"sf2-icon-user\" aria-hidden=\"true\"></span>\n                  <span className=\"nav-text\">{gettext('My Libraries')}</span>\n                </Link>\n              </li>\n            )}\n            <li className=\"nav-item\">\n              <Link to={siteRoot + 'shared-libs/'} className={`nav-link ellipsis ${this.getActiveClass('shared-libs')}`} title={gettext('Shared with me')} onClick={(e) => this.tabItemClick(e, 'shared-libs')}>\n                <span className=\"sf2-icon-share\" aria-hidden=\"true\"></span>\n                <span className=\"nav-text\">{gettext('Shared with me')}</span>\n              </Link>\n            </li>\n            { canViewOrg &&\n              <li className=\"nav-item\" onClick={(e) => this.tabItemClick(e, 'org')}>\n                <Link to={ siteRoot + 'org/' } className={`nav-link ellipsis ${this.getActiveClass('org')}`} title={gettext('Shared with all')}>\n                  <span className=\"sf2-icon-organization\" aria-hidden=\"true\"></span>\n                  <span className=\"nav-text\">{gettext('Shared with all')}</span>\n                </Link>\n              </li>\n            }\n            <li className=\"nav-item flex-column\" id=\"group-nav\">\n              <a className=\"nav-link ellipsis\" title={gettext('Shared with groups')} onClick={this.grpsExtend}>\n                <span className=\"sf2-icon-group\" aria-hidden=\"true\"></span>\n                <span className=\"nav-text\">{gettext('Shared with groups')}</span>\n                <span className={`toggle-icon fas ${this.state.groupsExtended ?'fa-caret-down':'fa-caret-left'}`} aria-hidden=\"true\"></span>\n              </a>\n              {this.renderSharedGroups()}\n            </li>\n            {enableOCM &&\n              <li className=\"nav-item\">\n                <Link to={siteRoot + 'shared-with-ocm/'} className={`nav-link ellipsis ${this.getActiveClass('shared-with-ocm')}`} title={gettext('Shared from other servers')} onClick={(e) => this.tabItemClick(e, 'shared-with-ocm')}>\n                  <span className=\"sf3-font-share-from-other-servers sf3-font\" aria-hidden=\"true\"></span>\n                  <span className=\"nav-text\">{gettext('Shared from other servers')}</span>\n                </Link>\n              </li>\n            }\n            {enableOCMViaWebdav &&\n              <li className=\"nav-item\">\n                <Link to={siteRoot + 'ocm-via-webdav/'} className={`nav-link ellipsis ${this.getActiveClass('ocm-via-webdav')}`} title={gettext('Shared from other servers')} onClick={(e) => this.tabItemClick(e, 'ocm-via-webdav')}>\n                  <span className=\"sf3-font-share-from-other-servers sf3-font\" aria-hidden=\"true\"></span>\n                  <span className=\"nav-text\">{gettext('Shared from other servers')}</span>\n                </Link>\n              </li>\n            }\n          </ul>\n\n\n          <h3 className=\"sf-heading\">{gettext('Tools')}</h3>\n          <ul className=\"nav nav-pills flex-column nav-container\">\n            <li className=\"nav-item\">\n              <Link className={`nav-link ellipsis ${this.getActiveClass('starred')}`} to={siteRoot + 'starred/'} title={gettext('Favorites')} onClick={(e) => this.tabItemClick(e, 'starred')}>\n                <span className=\"sf2-icon-star\" aria-hidden=\"true\"></span>\n                <span className=\"nav-text\">{gettext('Favorites')}</span>\n              </Link>\n            </li>\n            {showActivity &&\n              <li className=\"nav-item\">\n                <Link className={`nav-link ellipsis ${this.getActiveClass('dashboard')}`} to={siteRoot + 'dashboard/'} title={gettext('Activities')} onClick={(e) => this.tabItemClick(e, 'dashboard')}>\n                  <span className=\"sf2-icon-clock\" aria-hidden=\"true\"></span>\n                  <span className=\"nav-text\">{gettext('Activities')}</span>\n                </Link>\n              </li>\n            }\n            <li className=\"nav-item\">\n              <Link className={`nav-link ellipsis ${this.getActiveClass('published')}`} to={siteRoot + 'published/'} title={gettext('Published Libraries')} onClick={(e) => this.tabItemClick(e, 'published')}>\n                <span className=\"sf2-icon-wiki-view\" aria-hidden=\"true\"></span>\n                <span className=\"nav-text\">{gettext('Published Libraries')}</span>\n              </Link>\n            </li>\n            {/*isDocs &&\n              <li className=\"nav-item\" onClick={(e) => this.tabItemClick(e, 'drafts')}>\n                <Link className={`nav-link ellipsis ${this.getActiveClass('drafts')}`} to={siteRoot + 'drafts/'} title={gettext('Drafts')}>\n                  <span className=\"sf2-icon-edit\" aria-hidden=\"true\"></span>\n                  <span className=\"nav-text\">{gettext('Drafts')}</span>\n                  {this.props.draftCounts > 0 && <span id=\"draft-num\">{this.props.draftCounts}</span>}\n                </Link>\n              </li>\n            */}\n            <li className=\"nav-item\">\n              <Link className={`nav-link ellipsis ${this.getActiveClass('linked-devices')}`} to={siteRoot + 'linked-devices/'} title={gettext('Linked Devices')} onClick={(e) => this.tabItemClick(e, 'linked-devices')}>\n                <span className=\"sf2-icon-monitor\" aria-hidden=\"true\"></span>\n                <span className=\"nav-text\">{gettext('Linked Devices')}</span>\n              </Link>\n            </li>\n            {canInvitePeople &&\n              <li className=\"nav-item\">\n                <Link className={`nav-link ellipsis ${this.getActiveClass('invitations')}`} to={siteRoot + 'invitations/'} title={gettext('Invite Guest')} onClick={(e) => this.tabItemClick(e, 'invitations')}>\n                  <span className=\"sf2-icon-invite\" aria-hidden=\"true\"></span>\n                  <span className=\"nav-text\">{gettext('Invite Guest')}</span>\n                </Link>\n              </li>\n            }\n            <li className=\"nav-item flex-column\" id=\"share-admin-nav\">\n              <a className=\"nav-link ellipsis\" title={gettext('Share Admin')} onClick={this.shExtend}>\n                <span className=\"sf2-icon-wrench\" aria-hidden=\"true\"></span>\n                <span className=\"nav-text\">{gettext('Share Admin')}</span>\n                <span className={`toggle-icon fas ${this.state.sharedExtended ? 'fa-caret-down':'fa-caret-left'}`} aria-hidden=\"true\"></span>\n              </a>\n              {this.renderSharedAdmin()}\n            </li>\n            {customNavItems && this.renderCustomNavItems()}\n          </ul>\n        </div>\n\n        {dtableWebServer &&\n          <div className=\"side-nav-link\" onClick={this.onDTableClick}>\n            <span className=\"link-icon icon-left sf3-font sf3-font-dtable-logo\" aria-hidden=\"true\"></span>\n            <span className=\"link-text\">SeaTable</span>\n            <span className=\"link-icon icon-right sf3-font sf3-font-arrow\"></span>\n          </div>\n        }\n      </div>\n    );\n  }\n}\n\nMainSideNav.propTypes = propTypes;\n\nexport default MainSideNav;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Modal, ModalBody } from 'reactstrap';\nimport { gettext, lang, mediaUrl, logoPath, logoWidth, logoHeight, siteTitle, seafileVersion, additionalAboutDialogLinks, aboutDialogCustomHtml } from '../../utils/constants';\n\nconst propTypes = {\n  onCloseAboutDialog: PropTypes.func.isRequired,\n};\n\nclass AboutDialog extends React.Component {\n\n  renderExternalAboutLinks = () => {\n    if (additionalAboutDialogLinks && (typeof additionalAboutDialogLinks) === 'object') {\n      let keys = Object.keys(additionalAboutDialogLinks);\n      return keys.map((key, index) => {\n        return <a key={index} className=\"d-block\" href={additionalAboutDialogLinks[key]}>{key}</a>;\n      });\n    }\n    return null;\n  };\n\n  render() {\n    let href = lang === 'zh-cn' ? 'http://seafile.com/about/' : 'http://seafile.com/en/about/';\n    const { onCloseAboutDialog: toggleDialog } = this.props;\n\n    if (aboutDialogCustomHtml) {\n      return (\n        <Modal isOpen={true} toggle={toggleDialog}>\n          <ModalBody>\n            <button type=\"button\" className=\"close\" onClick={toggleDialog}><span aria-hidden=\"true\"></span></button>\n            <div className=\"about-content\" dangerouslySetInnerHTML={{__html: aboutDialogCustomHtml}}></div>\n          </ModalBody>\n        </Modal>\n      );\n    } else {\n      return (\n        <Modal isOpen={true} toggle={toggleDialog}>\n          <ModalBody>\n            <button type=\"button\" className=\"close\" onClick={toggleDialog}><span aria-hidden=\"true\"></span></button>\n            <div className=\"about-content\">\n              <p><img src={mediaUrl + logoPath} height={logoHeight} width={logoWidth} title={siteTitle} alt=\"logo\" /></p>\n              <p>{gettext('Server Version: ')}{seafileVersion}<br /> {(new Date()).getFullYear()} {gettext('Seafile')}</p>\n              <p>{this.renderExternalAboutLinks()}</p>\n              <p><a href={href} target=\"_blank\" rel=\"noreferrer\">{gettext('About Us')}</a></p>\n            </div>\n          </ModalBody>\n        </Modal>\n      );\n    }\n  }\n}\n\nAboutDialog.propTypes = propTypes;\n\nexport default AboutDialog;\n","import React, { Fragment } from 'react';\nimport { gettext, siteRoot, enableTC, sideNavFooterCustomHtml, additionalAppBottomLinks } from '../utils/constants';\nimport ModalPortal from './modal-portal';\nimport AboutDialog from './dialog/about-dialog';\n\nclass SideNavFooter extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isAboutDialogShow: false,\n    };\n  }\n\n  onAboutDialogToggle = (e) => {\n    e.preventDefault();\n    this.setState({isAboutDialogShow: !this.state.isAboutDialogShow});\n  };\n\n  renderExternalAppLinks = () => {\n    if (additionalAppBottomLinks && (typeof additionalAppBottomLinks) === 'object') {\n      let keys = Object.keys(additionalAppBottomLinks);\n      return keys.map((key, index) => {\n        return <a key={index} className=\"item\" href={additionalAppBottomLinks[key]}>{key}</a>;\n      });\n    }\n    return null;\n  };\n\n  render() {\n\n    if (sideNavFooterCustomHtml) {\n      return (<div className='side-nav-footer' dangerouslySetInnerHTML={{__html: sideNavFooterCustomHtml}}></div>);\n    }\n    return (\n      <Fragment>\n        <div className=\"side-nav-footer flex-wrap\">\n          <a href={siteRoot + 'help/'} target=\"_blank\" rel=\"noopener noreferrer\" className=\"item\">{gettext('Help')}</a>\n          <a href=\"#\" className=\"item\" onClick={this.onAboutDialogToggle}>{gettext('About')}</a>\n          {enableTC && <a href={`${siteRoot}terms/`} className=\"item\">{gettext('Terms')}</a>}\n          {this.renderExternalAppLinks()}\n          <a href={siteRoot + 'download_client_program/'} className={`item ${additionalAppBottomLinks ? '' : 'last-item'}`}>\n            <span aria-hidden=\"true\" className=\"sf2-icon-monitor vam\"></span>{' '}\n            <span className=\"vam\">{gettext('Clients')}</span>\n          </a>\n        </div>\n        {this.state.isAboutDialogShow && (\n          <ModalPortal>\n            <AboutDialog onCloseAboutDialog={this.onAboutDialogToggle} />\n          </ModalPortal>\n        )}\n      </Fragment>\n    );\n  }\n}\n\nexport default SideNavFooter;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport Logo from './logo';\nimport MainSideNav from './main-side-nav';\nimport SideNavFooter from './side-nav-footer';\n\nconst propTypes = {\n  isSidePanelClosed: PropTypes.bool.isRequired,\n  currentTab: PropTypes.oneOfType([PropTypes.string, PropTypes.number]).isRequired,\n  onCloseSidePanel: PropTypes.func.isRequired,\n  tabItemClick: PropTypes.func.isRequired,\n  draftCounts: PropTypes.number,\n};\n\nclass SidePanel extends React.Component {\n\n  render() {\n    return (\n      <div className={`side-panel ${this.props.isSidePanelClosed ? '' : 'left-zero'}`}>\n        <div className=\"side-panel-north\">\n          <Logo onCloseSidePanel={this.props.onCloseSidePanel}/>\n        </div>\n        <div className=\"side-panel-center\">\n          <MainSideNav tabItemClick={this.props.tabItemClick} currentTab={this.props.currentTab} draftCounts={this.props.draftCounts}/>\n        </div>\n        <div className=\"side-panel-footer\">\n          <SideNavFooter />\n        </div>\n      </div>\n    );\n  }\n}\n\nSidePanel.propTypes = propTypes;\n\nexport default SidePanel;\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\n\nconst propTypes = {\n  children: PropTypes.object.isRequired,\n};\n\nclass MainPanel extends Component {\n\n  render() {\n    return (\n      <div className=\"main-panel\">\n        {this.props.children}\n      </div>\n    );\n  }\n}\n\nMainPanel.propTypes = propTypes;\n\nexport default MainPanel;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../../utils/constants';\n\nconst propTypes = {\n  children: PropTypes.oneOfType([\n    PropTypes.array,\n    PropTypes.object\n  ]).isRequired,\n};\n\nclass DraftsView extends React.Component {\n  render() {\n    return (\n      <div className=\"main-panel-center\">\n        <div className=\"cur-view-container\">\n          <div className=\"cur-view-path\">\n            <div className=\"path-container\">\n              <h3 className=\"sf-heading\">{gettext('Drafts')}</h3>\n            </div>\n          </div>\n          {this.props.children}\n        </div>\n      </div>\n    );\n  }\n}\n\nDraftsView.propTypes = propTypes;\n\nexport default DraftsView;\n","import React from 'react';\nimport moment from 'moment';\nimport PropTypes from 'prop-types';\nimport { Dropdown, DropdownMenu, DropdownToggle, DropdownItem } from 'reactstrap';\nimport { gettext, siteRoot, lang } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\n\nmoment.locale(lang);\nconst propTypes = {\n  draft: PropTypes.object.isRequired,\n  isItemFreezed: PropTypes.bool.isRequired,\n  onFreezedItem: PropTypes.func.isRequired,\n  onUnfreezedItem: PropTypes.func.isRequired,\n  onDeleteHandler: PropTypes.func.isRequired,\n  onPublishHandler: PropTypes.func.isRequired,\n};\n\nclass DraftListItem extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isMenuIconShow: false,\n      isItemMenuShow: false,\n      highlight: false,\n    };\n  }\n\n  onMouseEnter = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        isMenuIconShow: true,\n        highlight: true,\n      });\n    }\n  };\n\n  onMouseLeave = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        isMenuIconShow: false,\n        highlight: false,\n      });\n    }\n  };\n\n  onDropdownToggleClick = (e) => {\n    e.preventDefault();\n    this.toggleOperationMenu(e);\n  };\n\n  toggleOperationMenu = (e) => {\n    e.stopPropagation();\n    this.setState(\n      {isItemMenuShow: !this.state.isItemMenuShow }, () => {\n        if (this.state.isItemMenuShow) {\n          this.props.onFreezedItem();\n        } else {\n          this.setState({\n            highlight: false,\n            isMenuIconShow: false,\n          });\n          this.props.onUnfreezedItem();\n        }\n      }\n    );\n  };\n\n  onDeleteHandler = () => {\n    this.props.onDeleteHandler(this.props.draft);\n  };\n\n  onPublishHandler = () => {\n    this.props.onPublishHandler(this.props.draft);\n  };\n\n  render() {\n    let draft = this.props.draft;\n    let repoID = draft.origin_repo_id;\n    let filePath = draft.draft_file_path;\n    let fileName = Utils.getFileName(filePath);\n    let draftUrl = siteRoot + 'drafts/' + draft.id + '/';\n    let libraryUrl = siteRoot + 'library/' + repoID + '/' + encodeURIComponent(draft.repo_name) + '/' ;\n    let localTime = moment.utc(draft.updated_at).toDate();\n    localTime = moment(localTime).fromNow();\n\n    let iconUrl = Utils.getFileIconUrl(fileName);\n    return (\n      <tr className={this.state.highlight ? 'tr-highlight' : ''} onMouseEnter={this.onMouseEnter} onMouseLeave={this.onMouseLeave}>\n        <td className=\"text-center\"><img src={iconUrl} width=\"24\" alt='' /></td>\n        <td className=\"name\" >\n          <a href={draftUrl} target=\"_blank\" rel=\"noreferrer\">{fileName}</a>\n        </td>\n        <td className=\"library\">\n          <a href={libraryUrl} target=\"_blank\" rel=\"noreferrer\">{draft.repo_name}</a>\n        </td>\n        <td className=\"update\">{localTime}</td>\n        <td className=\"text-center\">\n          {this.state.isMenuIconShow && (\n            <Dropdown isOpen={this.state.isItemMenuShow} toggle={this.toggleOperationMenu}>\n              <DropdownToggle\n                tag=\"i\"\n                className=\"fas fa-ellipsis-v attr-action-icon\"\n                title={gettext('More Operations')}\n                onClick={this.onDropdownToggleClick}\n                data-toggle=\"dropdown\"\n                aria-expanded={this.state.isItemMenuShow}\n              />\n              <DropdownMenu>\n                <DropdownItem onClick={this.onDeleteHandler}>{gettext('Delete')}</DropdownItem>\n                {draft.status == 'open' &&\n                  <DropdownItem onClick={this.onPublishHandler}>{gettext('Publish')}</DropdownItem>\n                }\n              </DropdownMenu>\n            </Dropdown>\n          )}\n        </td>\n      </tr>\n    );\n  }\n}\n\nDraftListItem.propTypes = propTypes;\n\nexport default DraftListItem;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../../utils/constants';\nimport DraftListItem from './draft-list-item';\n\nconst propTypes = {\n  draftList: PropTypes.array.isRequired,\n  onDeleteHandler: PropTypes.func.isRequired,\n  onPublishHandler: PropTypes.func.isRequired,\n};\n\nclass DraftListView extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isItemFreezed: false,\n    };\n  }\n\n  onFreezedItem = () => {\n    this.setState({isItemFreezed: true});\n  };\n\n  onUnfreezedItem = () => {\n    this.setState({isItemFreezed: false});\n  };\n\n  render() {\n    let drafts = this.props.draftList;\n    return (\n      <table>\n        <thead>\n          <tr>\n            <th style={{width: '4%'}}>{/*img*/}</th>\n            <th style={{width: '46%'}}>{gettext('Name')}</th>\n            <th style={{width: '30%'}}>{gettext('Library')}</th>\n            <th style={{width: '10%'}}>{gettext('Last Update')}</th>\n            <th style={{width: '10%'}}></th>\n          </tr>\n        </thead>\n        <tbody>\n          { drafts && drafts.map((draft) => {\n            return (\n              <DraftListItem\n                key={draft.id}\n                draft={draft}\n                isItemFreezed={this.state.isItemFreezed}\n                onFreezedItem={this.onFreezedItem}\n                onUnfreezedItem={this.onUnfreezedItem}\n                onDeleteHandler={this.props.onDeleteHandler}\n                onPublishHandler={this.props.onPublishHandler}\n              />\n            );\n          })}\n        </tbody>\n      </table>\n    );\n  }\n}\n\nDraftListView.propTypes = propTypes;\n\nexport default DraftListView;\n","import React, { Fragment } from 'react';\nimport { gettext } from '../../utils/constants';\nimport editUtilities from '../../utils/editor-utilities';\nimport { Utils } from '../../utils/utils';\nimport PropTypes from 'prop-types';\nimport toaster from '../../components/toast';\nimport EmptyTip from '../../components/empty-tip';\nimport Loading from '../../components/loading';\nimport DraftListView from '../../components/draft-list-view/draft-list-view';\n\nconst propTypes = {\n  isLoadingDraft: PropTypes.bool.isRequired,\n  updateDraftsList: PropTypes.func.isRequired,\n  draftList: PropTypes.array.isRequired,\n  getDrafts: PropTypes.func.isRequired,\n};\n\nclass DraftContent extends React.Component {\n\n  componentDidMount() {\n    this.props.getDrafts();\n  }\n\n  onDeleteHandler = (draft) => {\n    // let draft = this.state.currentDraft;\n    let draft_name = Utils.getFileName(draft.draft_file_path);\n    editUtilities.deleteDraft(draft.id).then(res => {\n      this.props.updateDraftsList(draft.id);\n      let msg_s = gettext('Successfully deleted draft %(draft)s.');\n      msg_s = msg_s.replace('%(draft)s', draft_name);\n      toaster.success(msg_s);\n    }).catch(() => {\n      let msg_s = gettext('Failed to delete draft %(draft)s.');\n      msg_s = msg_s.replace('%(draft)s', draft_name);\n      toaster.danger(msg_s);\n    });\n  };\n\n  onPublishHandler = (draft) => {\n    // let draft = this.state.currentDraft;\n    let draft_name = Utils.getFileName(draft.draft_file_path);\n    editUtilities.publishDraft(draft.id).then(res => {\n      this.props.updateDraftsList(draft.id);\n      let msg_s = gettext('Successfully published draft %(draft)s.');\n      msg_s = msg_s.replace('%(draft)s', draft_name);\n      toaster.success(msg_s);\n    }).catch(() => {\n      let msg_s = gettext('Failed to publish draft %(draft)s.');\n      msg_s = msg_s.replace('%(draft)s', draft_name);\n      toaster.danger(msg_s);\n    });\n  };\n\n  render() {\n    return (\n      <div className=\"cur-view-content\">\n        {this.props.isLoadingDraft && <Loading />}\n        {!this.props.isLoadingDraft && (\n          <Fragment>\n            {this.props.draftList.length === 0 && (\n              <EmptyTip>\n                <h2>{gettext('No draft yet')}</h2>\n                <p>{gettext('Draft is a way to let you collaborate with others on files. You can create a draft from a file, edit the draft and then ask for a review. The original file will be updated only after the draft has been reviewed.')}</p>\n              </EmptyTip>\n            )}\n            {this.props.draftList.length !==0 && (\n              <DraftListView\n                draftList={this.props.draftList}\n                onDeleteHandler={this.onDeleteHandler}\n                onPublishHandler={this.onPublishHandler}\n              />\n            )}\n          </Fragment>\n        )}\n      </div>\n    );\n  }\n}\n\nDraftContent.propTypes = propTypes;\n\nexport default DraftContent;\n","class Acticity {\n  constructor(json) {\n    this.repo_id = json.repo_id;\n    this.repo_name = json.repo_name;\n    this.obj_type = json.obj_type;\n    this.commit_id = json.commit_id;\n    this.path = json.path;\n    this.name = json.name;\n    this.author_email = json.author_email;\n    this.author_name = json.author_name;\n    this.author_contact_email = json.author_contact_email;\n    this.avatar_url = json.avatar_url;\n    this.time = json.time;\n    this.op_type = json.op_type;\n    this.createdFilesCount = 0;\n    this.createdFilesList = [];\n    if (json.op_type === 'clean-up-trash') {\n      this.days = json.days;\n    } else if (json.op_type === 'rename' && json.obj_type === 'repo') {\n      this.old_repo_name = json.old_repo_name;\n    } else if (json.op_type === 'move' && ['dir', 'file'].includes(json.obj_type)) {\n      this.old_path = json.old_path;\n    } else if (json.op_type === 'rename' && ['dir', 'file'].includes(json.obj_type)) {\n      this.old_path = json.old_path;\n      this.old_name = json.old_name;\n    } else if (json.op_type === 'publish') {\n      this.old_path = json.old_path;\n    } else if (json.name.endsWith('(draft).md')) {\n      this.draft_id = json.draft_id;\n    }\n  }\n}\n\nexport default Acticity;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport moment from 'moment';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter, Table } from 'reactstrap';\nimport { gettext, siteRoot, serviceURL } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\n\nconst propTypes = {\n  activity: PropTypes.object.isRequired,\n  toggleCancel: PropTypes.func.isRequired,\n};\n\nclass ListCreatedFileDialog extends React.Component {\n\n  toggle = (activity) => {\n    this.props.toggleCancel(activity);\n  };\n\n  render() {\n    let activity = this.props.activity;\n    return (\n      <Modal isOpen={true}>\n        <ModalHeader toggle={this.toggle}>{gettext('Created Files')}</ModalHeader>\n        <ModalBody>\n          <Table>\n            <thead>\n              <tr>\n                <th width='75%'>{gettext('Name')}</th>\n                <th width='25%'>{gettext('Time')}</th>\n              </tr>\n            </thead>\n            <tbody>\n              {\n                activity.createdFilesList.map((item, index) => {\n                  let fileURL = `${siteRoot}lib/${item.repo_id}/file${Utils.encodePath(item.path)}`;\n                  if (item.name.endsWith('(draft).md')) {\n                    fileURL = serviceURL + '/drafts/' + item.draft_id + '/';\n                  }\n                  let fileLink = <a href={fileURL} target='_blank' rel=\"noreferrer\">{item.name}</a>;\n                  if (item.name.endsWith('(draft).md') && !item.draft_id) {\n                    fileLink = item.name;\n                  }\n                  return (\n                    <tr key={index}>\n                      <td>{fileLink}</td>\n                      <td>{moment(item.time).fromNow()}</td>\n                    </tr>\n                  );\n                })\n              }\n            </tbody>\n          </Table>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.toggle.bind(this, activity)}>{gettext('Close')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nListCreatedFileDialog.propTypes = propTypes;\n\nexport default ListCreatedFileDialog;\n","import React, { Component, Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport moment from 'moment';\nimport { gettext, siteRoot, serviceURL } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport ListCreatedFileDialog from '../../components/dialog/list-created-files-dialog';\nimport ModalPortal from '../../components/modal-portal';\n\nimport '../../css/files-activities.css';\n\nmoment.locale(window.app.config.lang);\n\nconst activityPropTypes = {\n  item: PropTypes.object.isRequired,\n  index: PropTypes.number.isRequired,\n  items: PropTypes.array.isRequired,\n  isDesktop: PropTypes.bool.isRequired,\n};\n\nclass ActivityItem extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isListCreatedFiles: false,\n    };\n  }\n\n  onListCreatedFilesToggle = () => {\n    this.setState({\n      isListCreatedFiles: !this.state.isListCreatedFiles,\n    });\n  };\n\n  render() {\n    const isDesktop = this.props.isDesktop;\n    let {item, index, items} = this.props;\n    let op, details, moreDetails = false;\n    let userProfileURL = `${siteRoot}profile/${encodeURIComponent(item.author_email)}/`;\n\n    let libURL = siteRoot + 'library/' + item.repo_id + '/' + encodeURIComponent(item.repo_name) + '/';\n    let libLink = <a href={libURL}>{item.repo_name}</a>;\n    let smallLibLink = <a className=\"small text-secondary\" href={libURL}>{item.repo_name}</a>;\n\n    if (item.obj_type == 'repo') {\n      switch(item.op_type) {\n        case 'create':\n          op = gettext('Created library');\n          details = libLink;\n          break;\n        case 'rename':\n          op = gettext('Renamed library');\n          details = <span>{item.old_repo_name} => {libLink}</span>;\n          break;\n        case 'delete':\n          op = gettext('Deleted library');\n          details = item.repo_name;\n          break;\n        case 'recover':\n          op = gettext('Restored library');\n          details = libLink;\n          break;\n        case 'clean-up-trash':\n          op = gettext('Cleaned trash');\n          if (item.days == 0) {\n            details = gettext('Removed all items from trash.');\n          } else {\n            details = gettext('Removed items older than {n} days from trash.').replace('{n}', item.days);\n          }\n          moreDetails = true;\n          break;\n      }\n    } else if (item.obj_type == 'draft') {\n      let fileURL = `${siteRoot}lib/${item.repo_id}/file${Utils.encodePath(item.path)}`;\n      let fileLink = <a href={fileURL} target=\"_blank\" rel=\"noreferrer\">{item.name}</a>;\n      op = gettext('Publish draft');\n      details = fileLink;\n      moreDetails = true;\n    } else if (item.obj_type == 'files') {\n      let fileURL = `${siteRoot}lib/${item.repo_id}/file${Utils.encodePath(item.path)}`;\n      if (item.name.endsWith('(draft).md')) {\n        fileURL = serviceURL + '/drafts/' + item.draft_id + '/';\n      }\n      let fileLink = `<a href=${fileURL} target=\"_blank\">${item.name}</a>`;\n      if (item.name.endsWith('(draft).md') && !item.draft_id) {\n        fileLink = item.name;\n      }\n      let fileCount = item.createdFilesCount - 1;\n      let firstLine = gettext('{file} and {n} other files')\n        .replace('{file}', fileLink)\n        .replace('{n}', fileCount);\n      op = gettext('Created {n} files').replace('{n}', item.createdFilesCount);\n      details = (\n        <Fragment>\n          <p className=\"m-0 d-inline\" dangerouslySetInnerHTML={{__html: firstLine}}></p>\n          {isDesktop && <button type=\"button\" onClick={this.onListCreatedFilesToggle} className=\"activity-details text-secondary ml-2 border-0 p-0 bg-transparent\">{gettext('details')}</button>}\n        </Fragment>\n      );\n      moreDetails = true;\n    } else if (item.obj_type == 'file') {\n      const isDraft = item.name.endsWith('(draft).md');\n      const fileURL = isDraft ? serviceURL + '/drafts/' + item.draft_id + '/' :\n        `${siteRoot}lib/${item.repo_id}/file${Utils.encodePath(item.path)}`;\n      let fileLink = <a href={fileURL} target=\"_blank\" rel=\"noreferrer\">{item.name}</a>;\n      if (isDraft && !item.draft_id) {\n        fileLink = item.name;\n      }\n      switch (item.op_type) {\n        case 'create':\n          op = isDraft ? gettext('Created draft') : gettext('Created file');\n          details = fileLink;\n          moreDetails = true;\n          break;\n        case 'delete':\n          op = isDraft ? gettext('Deleted draft') : gettext('Deleted file');\n          details = item.name;\n          moreDetails = true;\n          break;\n        case 'recover':\n          op = gettext('Restored file');\n          details = fileLink;\n          moreDetails = true;\n          break;\n        case 'rename':\n          op = gettext('Renamed file');\n          details = <span>{item.old_name} => {fileLink}</span>;\n          moreDetails = true;\n          break;\n        case 'move':\n          // eslint-disable-next-line\n          const filePathLink = <a href={fileURL}>{item.path}</a>;\n          op = gettext('Moved file');\n          details = <span>{item.old_path} => {filePathLink}</span>;\n          moreDetails = true;\n          break;\n        case 'edit': // update\n          op = isDraft ? gettext('Updated draft') : gettext('Updated file');\n          details = fileLink;\n          moreDetails = true;\n          break;\n      }\n    } else { // dir\n      let dirURL = siteRoot + 'library/' + item.repo_id + '/' + encodeURIComponent(item.repo_name) + Utils.encodePath(item.path);\n      let dirLink = <a href={dirURL} target=\"_blank\" rel=\"noreferrer\">{item.name}</a>;\n      switch (item.op_type) {\n        case 'create':\n          op = gettext('Created folder');\n          details = dirLink;\n          moreDetails = true;\n          break;\n        case 'delete':\n          op = gettext('Deleted folder');\n          details = item.name;\n          moreDetails = true;\n          break;\n        case 'recover':\n          op = gettext('Restored folder');\n          details = dirLink;\n          moreDetails = true;\n          break;\n        case 'rename':\n          op = gettext('Renamed folder');\n          details = <span>{item.old_name} => {dirLink}</span>;\n          moreDetails = true;\n          break;\n        case 'move':\n          // eslint-disable-next-line\n          const dirPathLink = <a href={dirURL}>{item.path}</a>;\n          op = gettext('Moved folder');\n          details = <span>{item.old_path} => {dirPathLink}</span>;\n          moreDetails = true;\n          break;\n      }\n    }\n\n    let isShowDate = true;\n    if (index > 0) {\n      let lastEventTime = items[index - 1].time;\n      isShowDate = moment(item.time).isSame(lastEventTime, 'day') ? false : true;\n    }\n\n    return (\n      <Fragment>\n        {isShowDate &&\n          <tr>\n            <td colSpan={isDesktop ? 5 : 3} className=\"border-top-0\">{moment(item.time).format('YYYY-MM-DD')}</td>\n          </tr>\n        }\n        {isDesktop ? (\n          <tr>\n            <td className=\"text-center\">\n              <img src={item.avatar_url} alt=\"\" width=\"32\" height=\"32\" className=\"avatar\" />\n            </td>\n            <td>\n              <a href={userProfileURL}>{item.author_name}</a>\n            </td>\n            <td>{op}</td>\n            <td>\n              {details}\n              {moreDetails && <br /> }\n              {moreDetails && smallLibLink}\n            </td>\n            <td className=\"text-secondary\">\n              <time datetime={item.time} is=\"relative-time\" title={moment(item.time).format('llll')}>{moment(item.time).fromNow()}</time>\n            </td>\n          </tr>\n        ) : (\n          <tr>\n            <td className=\"text-center align-top\">\n              <img src={item.avatar_url} alt=\"\" width=\"32\" height=\"32\" className=\"avatar\" />\n            </td>\n            <td>\n              <a href={userProfileURL}>{item.author_name}</a>\n              <p className=\"m-0 text-secondary\">{op}</p>\n              {details}\n            </td>\n            <td className=\"text-right align-top\">\n              <span className=\"text-secondary mobile-activity-time\">\n                <time datetime={item.time} is=\"relative-time\" title={moment(item.time).format('llll')}>{moment(item.time).fromNow()}</time>\n              </span>\n              {moreDetails && <br /> }\n              {moreDetails && libLink}\n            </td>\n          </tr>\n        )}\n        {this.state.isListCreatedFiles &&\n          <ModalPortal>\n            <ListCreatedFileDialog\n              activity={item}\n              toggleCancel={this.onListCreatedFilesToggle}\n            />\n          </ModalPortal>\n        }\n      </Fragment>\n    );\n  }\n}\n\nActivityItem.propTypes = activityPropTypes;\n\nexport default ActivityItem;\n","import React, { Component, Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport moment from 'moment';\nimport { gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport EmptyTip from '../../components/empty-tip';\nimport ActivityItem from './activity-item';\n\nimport '../../css/files-activities.css';\n\nmoment.locale(window.app.config.lang);\n\nconst contentPropTypes = {\n  isLoadingMore: PropTypes.bool.isRequired,\n  items: PropTypes.array.isRequired,\n};\n\nclass FileActivitiesContent extends Component {\n\n  render() {\n    const isDesktop = Utils.isDesktop();\n    let { items, isLoadingMore } = this.props;\n\n    if (!items.length) {\n      return <EmptyTip><p>{gettext('No more activities')}</p></EmptyTip>;\n    }\n\n    const desktopThead = (\n      <thead>\n        <tr>\n          <th width=\"8%\">{/* avatar */}</th>\n          <th width=\"15%\">{gettext('User')}</th>\n          <th width=\"20%\">{gettext('Operation')}</th>\n          <th width=\"37%\">{gettext('File')} / {gettext('Library')}</th>\n          <th width=\"20%\">{gettext('Time')}</th>\n        </tr>\n      </thead>\n    );\n\n    const mobileThead = (\n      <thead>\n        <tr>\n          <th width=\"15%\"></th>\n          <th width=\"53%\"></th>\n          <th width=\"32%\"></th>\n        </tr>\n      </thead>\n    );\n\n    return (\n      <Fragment>\n        <table className=\"table-hover table-thead-hidden\">\n          {isDesktop ? desktopThead : mobileThead}\n          <tbody>\n            {items.map((item, index) => {\n              return (\n                <ActivityItem\n                  key={index}\n                  isDesktop={isDesktop}\n                  item={item}\n                  index={index}\n                  items={items}\n                />\n              );\n            })}\n          </tbody>\n        </table>\n        {isLoadingMore ? <span className=\"loading-icon loading-tip\"></span> : ''}\n      </Fragment>\n    );\n  }\n}\n\nFileActivitiesContent.propTypes = contentPropTypes;\n\nexport default FileActivitiesContent;\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { Input } from 'reactstrap';\nimport { gettext } from '../../utils/constants';\n\nimport '../../css/files-activities.css';\n\nconst propTypes = {\n  availableUsers: PropTypes.array.isRequired,\n  currentSelectedUsers: PropTypes.array.isRequired,\n  setTargetUsers: PropTypes.func.isRequired,\n  toggleSelectUser: PropTypes.func.isRequired\n};\n\nclass UserSelector extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isPopoverOpen: false,\n      query: ''\n    };\n  }\n\n  componentDidMount() {\n    document.addEventListener('click', this.handleOutsideClick);\n  }\n\n  componentWillUnmount() {\n    document.removeEventListener('click', this.handleOutsideClick);\n  }\n\n  handleOutsideClick = (e) => {\n    const { isPopoverOpen } = this.state;\n    if (isPopoverOpen && !this.userSelector.contains(e.target)) {\n      this.togglePopover();\n    }\n  };\n\n  togglePopover = () => {\n    this.setState({\n      isPopoverOpen: !this.state.isPopoverOpen\n    }, () => {\n      if (!this.state.isPopoverOpen) {\n        const { availableUsers } = this.props;\n        const selectedUsers = availableUsers.filter(item => item.isSelected);\n        this.props.setTargetUsers(selectedUsers);\n      }\n    });\n  };\n\n  onToggleClick = (e) => {\n    e.stopPropagation();\n    this.togglePopover();\n  };\n\n  onQueryChange = (e) => {\n    this.setState({\n      query: e.target.value\n    });\n  };\n\n  toggleSelectItem = (e, targetItem) => {\n    e.stopPropagation();\n    this.props.toggleSelectUser(targetItem);\n  };\n\n  render() {\n    const { isPopoverOpen, query } = this.state;\n    const { currentSelectedUsers, availableUsers } = this.props;\n    const selectedUsers = availableUsers.filter(item => item.isSelected);\n    const filteredAvailableUsers = query.trim() ? availableUsers.filter(item => item.email.indexOf(query.trim()) != -1) : availableUsers;\n    return (\n      <div className=\"mt-4 position-relative\">\n        <span className=\"cur-activity-modifiers d-inline-block p-2 rounded\" onClick={this.onToggleClick}>\n          {gettext('Modified by:')}\n          {currentSelectedUsers.length > 0 && (\n            <span className=\"d-inline-block ml-1\">{currentSelectedUsers.map(item => item.name).join(', ')}</span>\n          )}\n          <i className=\"fas fa-caret-down ml-2 toggle-icon\"></i>\n        </span>\n        {isPopoverOpen && (\n          <div className=\"position-absolute activity-modifier-selector-container rounded shadow\" ref={ref => this.userSelector = ref}>\n            <ul className=\"activity-selected-modifiers px-3 py-1 list-unstyled\">\n              {selectedUsers.map((item, index) => {\n                return (\n                  <li key={index} className=\"activity-selected-modifier\">\n                    <img src={item.avatar_url} className=\"avatar w-5 h-5\" alt=\"\" />\n                    <span className=\"activity-user-name ml-2\">{item.name}</span>\n                    <i className=\"sf2-icon-close unselect-activity-user ml-2\" onClick={(e) => {this.toggleSelectItem(e, item);}}></i>\n                  </li>\n                );\n              })}\n            </ul>\n            <div className=\"px-3 pt-3\">\n              <Input\n                type=\"text\"\n                placeholder={gettext('Search users...')}\n                value={query}\n                onChange={this.onQueryChange}\n              />\n            </div>\n            <ul className=\"activity-user-list list-unstyled p-3 o-auto\">\n              {filteredAvailableUsers.map((item, index) => {\n                return (\n                  <li key={index} className=\"activity-user-item h-6 p-1 rounded d-flex justify-content-between align-items-center\" onClick={(e) => {this.toggleSelectItem(e, item);}}>\n                    <div>\n                      <img src={item.avatar_url} className=\"avatar w-5 h-5\" alt=\"\" />\n                      <span className=\"activity-user-name ml-2\">{item.name}</span>\n                    </div>\n                    {item.isSelected && <i className=\"sf2-icon-tick text-gray font-weight-bold\"></i>}\n                  </li>\n                );\n              })}\n            </ul>\n          </div>\n        )}\n      </div>\n    );\n  }\n}\n\nUserSelector.propTypes = propTypes;\n\nexport default UserSelector;\n","import React, { Component, Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport moment from 'moment';\nimport { Link } from '@gatsbyjs/reach-router';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { gettext, siteRoot, username } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport Loading from '../../components/loading';\nimport Activity from '../../models/activity';\nimport FileActivitiesContent from './content';\nimport UserSelector from './user-selector';\n\nimport '../../css/files-activities.css';\n\nmoment.locale(window.app.config.lang);\n\nconst propTypes = {\n  onlyMine: PropTypes.bool\n};\n\nclass FilesActivities extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      errorMsg: '',\n      isFirstLoading: true,\n      isLoadingMore: false,\n      currentPage: 1,\n      hasMore: true,\n      allItems: [],\n      items: [],\n      availableUsers: [],\n      targetUsers: []\n    };\n    this.avatarSize = 72;\n    this.curPathList = [];\n    this.oldPathList = [];\n    this.availableUserEmails = new Set();\n  }\n\n  componentDidMount() {\n    let { currentPage, availableUsers } = this.state;\n    seafileAPI.listActivities(currentPage, this.avatarSize).then(res => {\n      // {\"events\":[...]}\n      let events = this.mergePublishEvents(res.data.events);\n      events = this.mergeFileCreateEvents(events);\n      events.forEach(item => {\n        if (!this.availableUserEmails.has(item.author_email)) {\n          this.availableUserEmails.add(item.author_email);\n          availableUsers.push({\n            email: item.author_email,\n            name: item.author_name,\n            avatar_url: item.avatar_url,\n            isSelected: false\n          });\n        }\n      });\n      this.setState({\n        allItems: events,\n        items: this.filterEvents(events),\n        availableUsers: availableUsers,\n        currentPage: currentPage + 1,\n        isFirstLoading: false,\n        hasMore: true,\n      });\n      if (this.state.items.length < 25) {\n        this.getMore();\n      }\n    }).catch(error => {\n      this.setState({\n        isFirstLoading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  mergePublishEvents = (events) => {\n    events.forEach((item) => {\n      if (item.op_type === 'publish') {\n        this.curPathList.push(item.path);\n        this.oldPathList.push(item.old_path);\n      }\n    });\n    let actuallyEvents = [];\n    for (var i = 0; i < events.length; i++) {\n      if (events[i].obj_type === 'file') {\n        if (events[i].op_type === 'delete' && this.oldPathList.includes(events[i].path)) {\n          this.oldPathList.splice(this.oldPathList.indexOf(events[i].path), 1);\n        } else if (events[i].op_type === 'edit' && this.curPathList.includes(events[i].path)) {\n          this.curPathList.splice(this.curPathList.indexOf(events[i].path), 1);\n        } else if (events[i].op_type === 'rename' && this.oldPathList.includes(events[i].old_path)) {\n          this.oldPathList.splice(this.oldPathList.indexOf(events[i].old_path), 1);\n        } else {\n          actuallyEvents.push(events[i]);\n        }\n      } else {\n        actuallyEvents.push(events[i]);\n      }\n    }\n    return actuallyEvents;\n  };\n\n  mergeFileCreateEvents = (events) => {\n    let actuallyEvents = [];\n    let multiFilesActivity = null;\n    for (var i = 0; i < events.length; i++) {\n      let isFulfilCondition = events[i].obj_type === 'file' &&\n                              events[i].op_type === 'create' &&\n                              events[i + 1] &&\n                              events[i + 1].obj_type === 'file' &&\n                              events[i + 1].op_type === 'create' &&\n                              events[i + 1].repo_name === events[i].repo_name &&\n                              events[i + 1].author_email === events[i].author_email;\n      if (multiFilesActivity != null) {\n        multiFilesActivity.createdFilesCount++;\n        multiFilesActivity.createdFilesList.push(events[i]);\n        if (isFulfilCondition) {\n          continue;\n        } else {\n          actuallyEvents.push(multiFilesActivity);\n          multiFilesActivity = null;\n        }\n      } else {\n        if (isFulfilCondition) {\n          multiFilesActivity = new Activity(events[i]);\n          multiFilesActivity.obj_type = 'files';\n          multiFilesActivity.createdFilesCount++;\n          multiFilesActivity.createdFilesList.push(events[i]);\n        } else {\n          actuallyEvents.push(events[i]);\n        }\n      }\n    }\n    return actuallyEvents;\n  };\n\n  getMore() {\n    const { currentPage, availableUsers, targetUsers } = this.state;\n    seafileAPI.listActivities(currentPage, this.avatarSize).then(res => {\n      // {\"events\":[...]}\n      let events = this.mergePublishEvents(res.data.events);\n      events = this.mergeFileCreateEvents(events);\n      events.forEach(item => {\n        if (!this.availableUserEmails.has(item.author_email)) {\n          this.availableUserEmails.add(item.author_email);\n          availableUsers.push({\n            email: item.author_email,\n            name: item.author_name,\n            avatar_url: item.avatar_url,\n            isSelected: false\n          });\n        }\n      });\n      const filteredEvents = this.filterEvents(events);\n      this.setState({\n        allItems: [...this.state.allItems, ...events],\n        items: [...this.state.items, ...filteredEvents],\n        availableUsers: availableUsers,\n        currentPage: currentPage + 1,\n        isLoadingMore: false,\n        hasMore: res.data.events.length === 0 ? false : true\n      });\n      if (this.state.items.length < 25 && this.state.hasMore) {\n        if (!(targetUsers.length && currentPage == 100)) {\n          this.getMore();\n        }\n      }\n    }).catch(error => {\n      this.setState({\n        isLoadingMore: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  filterEvents = (events) => {\n    const { onlyMine } = this.props;\n    const { targetUsers } = this.state;\n\n    if (onlyMine) {\n      return events.filter(item => item.author_email == username);\n    } else if (targetUsers.length) {\n      return events.filter(item => targetUsers.map(item => item.email).indexOf(item.author_email) != -1);\n    } else {\n      return events;\n    }\n  };\n\n  setTargetUsers = (selectedUsers) => {\n    this.setState({\n      targetUsers: selectedUsers\n    }, () => {\n      const items = this.filterEvents(this.state.allItems);\n      this.setState({\n        items: items\n      }, () => {\n        if (items.length < 25 && this.state.hasMore) {\n          this.getMore();\n        }\n      });\n    });\n  };\n\n  toggleSelectUser = (user) => {\n    const { availableUsers } = this.state;\n    this.setState({\n      availableUsers: availableUsers.map(item => {\n        if (item.email == user.email) {\n          item.isSelected = !user.isSelected;\n        }\n        return item;\n      })\n    });\n  };\n\n  handleScroll = (event) => {\n    if (!this.state.isLoadingMore && this.state.hasMore) {\n      const clientHeight = event.target.clientHeight;\n      const scrollHeight = event.target.scrollHeight;\n      const scrollTop    = event.target.scrollTop;\n      const isBottom = (clientHeight + scrollTop + 1 >= scrollHeight);\n      if (isBottom) { // scroll to the bottom\n        this.setState({isLoadingMore: true}, () => {\n          this.getMore();\n        });\n      }\n    }\n  };\n\n  render() {\n    const { onlyMine } = this.props;\n    const { targetUsers, availableUsers } = this.state;\n    return (\n      <div className=\"main-panel-center\">\n        <div className=\"cur-view-container\" id=\"activities\">\n          <div className=\"cur-view-path\">\n            <ul className=\"nav\">\n              <li className=\"nav-item\">\n                <Link to={`${siteRoot}dashboard/`} className={`nav-link${onlyMine ? '' : ' active'}`}>{gettext('All Activities')}</Link>\n              </li>\n              <li className=\"nav-item\">\n                <Link to={`${siteRoot}my-activities/`} className={`nav-link${onlyMine ? ' active': ''}`}>{gettext('My Activities')}</Link>\n              </li>\n            </ul>\n          </div>\n          <div className=\"cur-view-content d-block\" onScroll={this.handleScroll}>\n            {this.state.isFirstLoading && <Loading />}\n            {(!this.state.isFirstLoading && this.state.errorMsg) &&\n              <p className=\"error text-center\">{this.state.errorMsg}</p>\n            }\n            {!this.state.isFirstLoading && (\n              <Fragment>\n                {!onlyMine && (\n                  <UserSelector\n                    availableUsers={availableUsers}\n                    currentSelectedUsers={targetUsers}\n                    setTargetUsers={this.setTargetUsers}\n                    toggleSelectUser={this.toggleSelectUser}\n                  />\n                )}\n                <FileActivitiesContent items={this.state.items} isLoadingMore={this.state.isLoadingMore} />\n              </Fragment>\n            )\n            }\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nFilesActivities.propTypes = propTypes;\n\nexport default FilesActivities;\n","import React, { Component } from 'react';\nimport FilesActivities from './files-activities';\n\nclass MyFilesActivities extends Component {\n\n  render() {\n    return <FilesActivities onlyMine={true} />;\n  }\n}\n\nexport default MyFilesActivities;\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { Dropdown, DropdownToggle, DropdownItem } from 'reactstrap';\nimport { Link, navigate } from '@gatsbyjs/reach-router';\nimport moment from 'moment';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport { gettext, siteRoot, enableVideoThumbnail } from '../../utils/constants';\nimport EmptyTip from '../../components/empty-tip';\nimport Loading from '../../components/loading';\nimport toaster from '../../components/toast';\n\nclass Content extends Component {\n\n  render() {\n    const {loading, errorMsg, items} = this.props.data;\n\n    if (loading) {\n      return <Loading />;\n    } else if (errorMsg) {\n      return <p className=\"error text-center\">{errorMsg}</p>;\n    } else {\n      const emptyTip = (\n        <EmptyTip>\n          <h2>{gettext('No favorites')}</h2>\n          <p>{gettext('You have not added any libraries, folders or files to your favorites yet. A favorite gives you quick access to your most frequently used objects. You can add a library, folder or file to your favorites by clicking the star to the left of its name.')}</p>\n        </EmptyTip>\n      );\n\n      const desktopThead = (\n        <thead>\n          <tr>\n            <th width=\"4%\"></th>\n            <th width=\"40%\">{gettext('Name')}</th>\n            <th width=\"32%\">{gettext('Library')}</th>\n            <th width=\"18%\">{gettext('Last Update')}</th>\n            <th width=\"6%\"></th>\n          </tr>\n        </thead>\n      );\n      const mobileThead = (\n        <thead>\n          <tr>\n            <th width=\"12%\"></th>\n            <th width=\"80%\"></th>\n            <th width=\"8%\"></th>\n          </tr>\n        </thead>\n      );\n\n      const isDesktop = Utils.isDesktop();\n      return items.length ? (\n        <table className={`table-hover ${isDesktop ? '': 'table-thead-hidden'}`}>\n          {isDesktop ? desktopThead : mobileThead}\n          <TableBody items={items} />\n        </table>\n      ) : emptyTip;\n    }\n  }\n}\n\nContent.propTypes = {\n  data: PropTypes.object,\n  items: PropTypes.array,\n};\n\nclass TableBody extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      items: this.props.items\n    };\n  }\n\n  componentDidMount() {\n    this.getThumbnails();\n  }\n\n  getThumbnails() {\n    let items = this.state.items.filter((item) => {\n      return (Utils.imageCheck(item.obj_name) || (enableVideoThumbnail && Utils.videoCheck(item.obj_name))) && !item.repo_encrypted;\n    });\n    if (items.length == 0) {\n      return ;\n    }\n\n    const len = items.length;\n    const thumbnailSize = 48;\n    const _this = this;\n    let getThumbnail = function(i) {\n      const curItem = items[i];\n      seafileAPI.createThumbnail(curItem.repo_id, curItem.path, thumbnailSize).then((res) => {\n        curItem.encoded_thumbnail_src = res.data.encoded_thumbnail_src;\n      }).catch((error) => {\n        // do nothing\n      }).then(() => {\n        if (i < len - 1) {\n          getThumbnail(++i);\n        } else {\n          // when done, `setState()`\n          _this.setState({\n            items: _this.state.items\n          });\n        }\n      });\n    };\n    getThumbnail(0);\n  }\n\n  render() {\n\n    let listItems = this.state.items.map(function(item, index) {\n\n      if (item.path === '/') {\n        item.item_icon_url = Utils.getDefaultLibIconUrl(false);\n      } else {\n        item.item_icon_url = item.is_dir ? Utils.getFolderIconUrl(false) : Utils.getFileIconUrl(item.obj_name);\n      }\n\n      item.encoded_path = Utils.encodePath(item.path);\n\n      item.thumbnail_url = item.encoded_thumbnail_src ? `${siteRoot}${item.encoded_thumbnail_src}` : '';\n      item.dirent_view_url = item.is_dir ? `${siteRoot}library/${item.repo_id}/${item.repo_name}${item.encoded_path}` : `${siteRoot}lib/${item.repo_id}/file${item.encoded_path}`;\n      // item is folder or file\n      if (item.encoded_path !== '/') {\n        item.dirent_view_url = item.dirent_view_url.replace(/\\/+$/, '');\n      }\n\n      item.mtime_relative = moment(item.mtime).fromNow();\n\n\n      return <Item key={index} data={item} />;\n    }, this);\n\n    return (\n      <tbody>{listItems}</tbody>\n    );\n  }\n}\n\nTableBody.propTypes = {\n  data: PropTypes.object,\n  items: PropTypes.array,\n};\n\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      showOpIcon: false,\n      unstarred: false,\n      isOpMenuOpen: false // for mobile\n    };\n  }\n\n  toggleOpMenu = () => {\n    this.setState({\n      isOpMenuOpen: !this.state.isOpMenuOpen\n    });\n  };\n\n  handleMouseOver = () => {\n    this.setState({\n      showOpIcon: true\n    });\n  };\n\n  handleMouseOut = () => {\n    this.setState({\n      showOpIcon: false\n    });\n  };\n\n  unstar = (e) => {\n    e.preventDefault();\n\n    const data = this.props.data;\n    seafileAPI.unstarItem(data.repo_id, data.path).then((res) => {\n      this.setState({unstarred: true});\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  visitItem = () => {\n    const data = this.props.data;\n    if (data.is_dir) {\n      navigate(data.dirent_view_url);\n    } else {\n      window.open(data.dirent_view_url);\n    }\n  };\n\n  render() {\n\n    if (this.state.unstarred) {\n      return null;\n    }\n\n    const data = this.props.data;\n\n    let opClasses = 'sf2-icon-x3 unstar action-icon';\n    opClasses += this.state.showOpIcon ? '' : ' invisible';\n    const linkUrl = data.dirent_view_url;\n\n    const desktopItem = (\n      <tr onMouseOver={this.handleMouseOver} onMouseOut={this.handleMouseOut} onFocus={this.handleMouseOver}>\n        <td className=\"text-center\">\n          {\n            data.thumbnail_url ?\n              <img className=\"thumbnail\" src={data.thumbnail_url} alt=\"\" /> :\n              <img src={data.item_icon_url} alt={gettext('icon')} width=\"24\" />\n          }\n        </td>\n        <td>\n          { data.is_dir ?\n            <Link to={linkUrl}>{data.obj_name}</Link> :\n            <a className=\"normal\" href={data.dirent_view_url} target=\"_blank\" rel=\"noreferrer\">{data.obj_name}</a>\n          }\n        </td>\n        <td>{data.repo_name}</td>\n        <td dangerouslySetInnerHTML={{__html:data.mtime_relative}}></td>\n        <td>\n          <a href=\"#\" role=\"button\" className={opClasses} title={gettext('Unstar')} aria-label={gettext('Unstar')} onClick={this.unstar}></a>\n        </td>\n      </tr>\n    );\n\n    const mobileItem = (\n      <tr>\n        <td className=\"text-center\" onClick={this.visitItem}>\n          {\n            data.thumbnail_url ?\n              <img className=\"thumbnail\" src={data.thumbnail_url} alt=\"\" /> :\n              <img src={data.item_icon_url} alt={gettext('icon')} width=\"24\" />\n          }\n        </td>\n        <td onClick={this.visitItem}>\n          { data.is_dir ?\n            <Link to={linkUrl}>{data.obj_name}</Link> :\n            <a className=\"normal\" href={data.dirent_view_url} target=\"_blank\" rel=\"noreferrer\">{data.obj_name}</a>\n          }\n          <br />\n          <span className=\"item-meta-info\">{data.repo_name}</span>\n          <span className=\"item-meta-info\" dangerouslySetInnerHTML={{__html:data.mtime_relative}}></span>\n        </td>\n        <td>\n          <Dropdown isOpen={this.state.isOpMenuOpen} toggle={this.toggleOpMenu}>\n            <DropdownToggle\n              tag=\"i\"\n              className=\"sf-dropdown-toggle fa fa-ellipsis-v ml-0\"\n              title={gettext('More Operations')}\n              data-toggle=\"dropdown\"\n              aria-expanded={this.state.isOpMenuOpen}\n            />\n            <div className={this.state.isOpMenuOpen ? '' : 'd-none'} onClick={this.toggleOpMenu}>\n              <div className=\"mobile-operation-menu-bg-layer\"></div>\n              <div className=\"mobile-operation-menu\">\n                <DropdownItem className=\"mobile-menu-item\" onClick={this.unstar}>{gettext('Unstar')}</DropdownItem>\n              </div>\n            </div>\n          </Dropdown>\n        </td>\n      </tr>\n    );\n\n    return Utils.isDesktop() ? desktopItem : mobileItem;\n  }\n}\n\nItem.propTypes = {\n  data: PropTypes.object,\n  items: PropTypes.array,\n};\n\nclass Starred extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      items: []\n    };\n  }\n\n  componentDidMount() {\n    seafileAPI.listStarredItems().then((res) => {\n      this.setState({\n        loading: false,\n        items: res.data.starred_item_list\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  render() {\n    return (\n      <div className=\"main-panel-center\">\n        <div className=\"cur-view-container\" id=\"starred\">\n          <div className=\"cur-view-path\">\n            <h3 className=\"sf-heading\">{gettext('Favorites')}</h3>\n          </div>\n          <div className=\"cur-view-content\">\n            <Content data={this.state} />\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default Starred;\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { Modal, ModalHeader, ModalBody, ModalFooter, Button, FormGroup, Label, Input } from 'reactstrap';\nimport { gettext } from '../../utils/constants';\n\nconst propTypes = {\n  executeOperation: PropTypes.func.isRequired,\n  toggleDialog: PropTypes.func.isRequired\n};\n\nclass ConfirmUnlinkDevice extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isChecked: false\n    };\n  }\n\n  toggle = () => {\n    this.props.toggleDialog();\n  };\n\n  executeOperation = () => {\n    this.toggle();\n    this.props.executeOperation(this.state.isChecked);\n  };\n\n  onInputChange = (e) => {\n    this.setState({\n      isChecked: e.target.checked\n    });\n  };\n\n  render() {\n    return (\n      <Modal isOpen={true} toggle={this.toggle}>\n        <ModalHeader toggle={this.toggle}>{gettext('Unlink device')}</ModalHeader>\n        <ModalBody>\n          <p>{gettext('Are you sure you want to unlink this device?')}</p>\n          <FormGroup check>\n            <Label check>\n              <Input type=\"checkbox\" checked={this.state.isChecked} onChange={this.onInputChange} />\n              <span>{gettext('Delete files from this device the next time it comes online.')}</span>\n            </Label>\n          </FormGroup>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.toggle}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.executeOperation}>{gettext('Unlink')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nConfirmUnlinkDevice.propTypes = propTypes;\n\nexport default ConfirmUnlinkDevice;\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { Dropdown, DropdownToggle, DropdownItem } from 'reactstrap';\nimport moment from 'moment';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { gettext } from '../../utils/constants';\nimport toaster from '../../components/toast';\nimport EmptyTip from '../../components/empty-tip';\nimport ConfirmUnlinkDeviceDialog from '../../components/dialog/confirm-unlink-device';\nimport { Utils } from '../../utils/utils';\n\nclass Content extends Component {\n\n  render() {\n    const {loading, errorMsg, items} = this.props.data;\n\n    if (loading) {\n      return <span className=\"loading-icon loading-tip\"></span>;\n    } else if (errorMsg) {\n      return <p className=\"error text-center\">{errorMsg}</p>;\n    } else {\n      const emptyTip = (\n        <EmptyTip>\n          <h2>{gettext('No linked devices')}</h2>\n          <p>{gettext('You have not accessed your files with any client (desktop or mobile) yet. Configure clients on your devices to access your data more comfortably.')}</p>\n        </EmptyTip>\n      );\n\n      const desktopThead = (\n        <thead>\n          <tr>\n            <th width=\"13%\">{gettext('Platform')}</th>\n            <th width=\"30%\">{gettext('Device Name')}</th>\n            <th width=\"30%\">{gettext('IP')}</th>\n            <th width=\"17%\">{gettext('Last Access')}</th>\n            <th width=\"10%\"></th>\n          </tr>\n        </thead>\n      );\n      const mobileThead = (\n        <thead>\n          <tr>\n            <th width=\"92%\"></th>\n            <th width=\"8%\"></th>\n          </tr>\n        </thead>\n      );\n\n      const isDesktop = Utils.isDesktop();\n      return items.length ? (\n        <table className={`table-hover ${isDesktop ? '': 'table-thead-hidden'}`}>\n          {isDesktop ? desktopThead : mobileThead}\n          <tbody>\n            {items.map((item, index) => {\n              return <Item key={index} data={item} isDesktop={isDesktop} />;\n            })}\n          </tbody>\n        </table>\n      ): emptyTip;\n    }\n  }\n}\n\nContent.propTypes = {\n  data: PropTypes.object.isRequired,\n};\n\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOpMenuOpen: false, // for mobile\n      isOpIconShown: false,\n      unlinked: false,\n      isConfirmUnlinkDialogOpen: false\n    };\n  }\n\n  toggleOpMenu = () => {\n    this.setState({\n      isOpMenuOpen: !this.state.isOpMenuOpen\n    });\n  };\n\n  handleMouseOver = () => {\n    this.setState({\n      isOpIconShown: true\n    });\n  };\n\n  handleMouseOut = () => {\n    this.setState({\n      isOpIconShown: false\n    });\n  };\n\n  toggleDialog = () => {\n    this.setState({\n      isConfirmUnlinkDialogOpen: !this.state.isConfirmUnlinkDialogOpen\n    });\n  };\n\n  handleClick = (e) => {\n    e.preventDefault();\n\n    const data = this.props.data;\n    if (data.is_desktop_client) {\n      this.toggleDialog();\n    } else {\n      const wipeDevice = true;\n      this.unlinkDevice(wipeDevice);\n    }\n  };\n\n  unlinkDevice = (wipeDevice) => {\n    const data = this.props.data;\n    seafileAPI.unlinkDevice(data.platform, data.device_id, wipeDevice).then((res) => {\n      this.setState({\n        unlinked: true\n      });\n      let msg = gettext('Successfully unlinked %(name)s.');\n      msg = msg.replace('%(name)s', data.device_name);\n      toaster.success(msg);\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  render() {\n    if (this.state.unlinked) {\n      return null;\n    }\n\n    const data = this.props.data;\n\n    let opClasses = 'sf2-icon-delete unlink-device action-icon';\n    opClasses += this.state.isOpIconShown ? '' : ' invisible';\n\n    const desktopItem = (\n      <tr onMouseOver={this.handleMouseOver} onMouseOut={this.handleMouseOut} onFocus={this.handleMouseOver}>\n        <td>{data.platform}</td>\n        <td>{data.device_name}</td>\n        <td>{data.last_login_ip}</td>\n        <td>{moment(data.last_accessed).fromNow()}</td>\n        <td>\n          <a href=\"#\" className={opClasses} title={gettext('Unlink')} role=\"button\" aria-label={gettext('Unlink')} onClick={this.handleClick}></a>\n        </td>\n      </tr>\n    );\n\n    const mobileItem = (\n      <tr>\n        <td>\n          {data.device_name}<br />\n          <span className=\"item-meta-info\">{data.last_login_ip}</span>\n          <span className=\"item-meta-info\">{moment(data.last_accessed).fromNow()}</span>\n          <span className=\"item-meta-info\">{data.platform}</span>\n        </td>\n        <td>\n          <Dropdown isOpen={this.state.isOpMenuOpen} toggle={this.toggleOpMenu}>\n            <DropdownToggle\n              tag=\"i\"\n              className=\"sf-dropdown-toggle fa fa-ellipsis-v ml-0\"\n              title={gettext('More Operations')}\n              data-toggle=\"dropdown\"\n              aria-expanded={this.state.isOpMenuOpen}\n            />\n            <div className={this.state.isOpMenuOpen ? '' : 'd-none'} onClick={this.toggleOpMenu}>\n              <div className=\"mobile-operation-menu-bg-layer\"></div>\n              <div className=\"mobile-operation-menu\">\n                <DropdownItem className=\"mobile-menu-item\" onClick={this.handleClick}>{gettext('Unlink')}</DropdownItem>\n              </div>\n            </div>\n          </Dropdown>\n        </td>\n      </tr>\n    );\n\n    return (\n      <React.Fragment>\n        {this.props.isDesktop ? desktopItem : mobileItem}\n        {this.state.isConfirmUnlinkDialogOpen &&\n        <ConfirmUnlinkDeviceDialog\n          executeOperation={this.unlinkDevice}\n          toggleDialog={this.toggleDialog}\n        />\n        }\n      </React.Fragment>\n    );\n  }\n}\n\nItem.propTypes = {\n  isDesktop: PropTypes.bool.isRequired,\n  data: PropTypes.object.isRequired,\n};\n\nclass LinkedDevices extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      items: []\n    };\n  }\n\n  componentDidMount() {\n    seafileAPI.listLinkedDevices().then((res) => {\n      this.setState({\n        loading: false,\n        items: res.data\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  render() {\n    return (\n      <div className=\"main-panel-center\">\n        <div className=\"cur-view-container\" id=\"linked-devices\">\n          <div className=\"cur-view-path\">\n            <h3 className=\"sf-heading\">{gettext('Linked Devices')}</h3>\n          </div>\n          <div className=\"cur-view-content\">\n            <Content data={this.state} />\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default LinkedDevices;\n","class SharedRepoInfo {\n\n  constructor(object) {\n    this.repo_id = object.repo_id;\n    this.repo_name = object.repo_name;\n    this.share_type = object.share_type;\n    this.share_permission = object.share_permission;\n    this.share_permission_name = object.share_permission_name;\n    this.modifier_name = object.modifier_name;\n    this.modifier_email = object.modifier_email;\n    this.modifier_contact_email = object.modifier_contact_email;\n    this.encrypted = object.encrypted;\n    if (this.share_type === 'personal') {\n      this.is_admin = object.is_admin;\n      this.user_name = object.user_name;\n      this.user_email = object.user_email;\n      this.contact_email = object.contact_email;\n    } else if (this.share_type === 'group') {\n      this.is_admin = object.is_admin;\n      this.group_id = object.group_id;\n      this.group_name = object.group_name;\n    }\n  }\n\n}\n\nexport default SharedRepoInfo;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Modal, ModalBody } from 'reactstrap';\nimport { Utils } from '../../utils/utils';\nimport CustomPermission from '../../models/custom-permission';\nimport Loading from '../loading';\nimport toaster from '../toast';\nimport { seafileAPI } from '../../utils/seafile-api';\n\nconst propTypes = {\n  repoID: PropTypes.string,\n  currentPerm: PropTypes.string.isRequired,\n  permissions: PropTypes.array.isRequired,\n  changePerm: PropTypes.func.isRequired,\n  toggleDialog: PropTypes.func.isRequired\n};\n\nclass PermSelect extends React.Component {\n\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      isLoading: true,\n      currentOption: this.props.currentPerm,\n      customPermissions: []\n    };\n\n    this.customPermissions = null;\n  }\n\n  componentDidMount() {\n    if (this.props.repoID) {\n      this.listCustomPermissions();\n    } else {\n      this.setState({isLoading: false});\n    }\n  }\n\n  listCustomPermissions = () => {\n    const { repoID } = this.props;\n    seafileAPI.listCustomPermissions(repoID).then(res => {\n      const { permission_list: permissions } = res.data;\n      const customPermissions = permissions.map(item => new CustomPermission(item));\n      this.setState({\n        isLoading: false,\n        customPermissions: customPermissions\n      });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n      this.setState({isLoading: false});\n    });\n  };\n\n  switchOption = (e) => {\n    if (!e.target.checked) {\n      return;\n    }\n\n    const currentOption = e.target.value;\n    this.setState({\n      currentOption: currentOption\n    });\n\n    this.props.changePerm(currentOption);\n    this.props.toggleDialog();\n  };\n\n  translatePermission = (permission) => {\n    let value = Utils.sharePerms(permission);\n    if (!value) {\n      const { customPermissions } = this.state;\n      const item = customPermissions.find(item => item.id + '' === permission);\n      value = item && item.name;\n    }\n    return value;\n  };\n\n  translateExplanation = (explanation) => {\n    let value = Utils.sharePermsExplanation(explanation);\n    if (!value) {\n      const { customPermissions } = this.state;\n      const item = customPermissions.find(item => item.id + '' === explanation);\n      value = item && item.description;\n    }\n    return value;\n  };\n\n  getPermissions = () => {\n    const { permissions } = this.props;\n    let newPermissions = permissions.slice();\n    const { customPermissions } = this.state;\n    if (!this.customPermissions) {\n      if (customPermissions.length > 0) {\n        customPermissions.forEach(item => {\n          newPermissions.push(item.id + '');\n        });\n      }\n      this.customPermissions = newPermissions;\n    }\n    return this.customPermissions;\n  };\n\n\n  render() {\n    const { isLoading, currentOption } = this.state;\n    let permissions = [];\n    if (!isLoading) {\n      permissions = this.getPermissions();\n    }\n\n    return (\n      <Modal isOpen={true} toggle={this.props.toggleDialog}>\n        <ModalBody style={{maxHeight: '400px', overflow: 'auto'}}>\n          {isLoading && <Loading />}\n          {!isLoading && permissions.map((item, index) => {\n            return (\n              <div className=\"d-flex\" key={index}>\n                <input id={`option-${index}`} className=\"mt-1\" type=\"radio\" name=\"permission\" value={item} checked={currentOption == item} onChange={this.switchOption} />\n                <label htmlFor={`option-${index}`} className=\"ml-2\">\n                  {this.translatePermission(item)}\n                  <p className=\"text-secondary small m-0\">\n                    {this.translateExplanation(item)}\n                  </p>\n                </label>\n              </div>\n            );\n          })}\n        </ModalBody>\n      </Modal>\n    );\n  }\n}\n\nPermSelect.propTypes = propTypes;\n\nexport default PermSelect;\n","import React, { Fragment, Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { Link } from '@gatsbyjs/reach-router';\nimport { Dropdown, DropdownToggle, DropdownItem } from 'reactstrap';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { gettext, siteRoot, isPro } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../../components/toast';\nimport EmptyTip from '../../components/empty-tip';\nimport SharePermissionEditor from '../../components/select-editor/share-permission-editor';\nimport SharedRepoInfo from '../../models/shared-repo-info';\nimport PermSelect from '../../components/dialog/perm-select';\n\nclass Content extends Component {\n\n  sortByName = (e) => {\n    e.preventDefault();\n    const sortBy = 'name';\n    const sortOrder = this.props.sortOrder == 'asc' ? 'desc' : 'asc';\n    this.props.sortItems(sortBy, sortOrder);\n  };\n\n  render() {\n    const { loading, errorMsg, items, sortBy, sortOrder } = this.props;\n\n    if (loading) {\n      return <span className=\"loading-icon loading-tip\"></span>;\n    } else if (errorMsg) {\n      return <p className=\"error text-center\">{errorMsg}</p>;\n    } else {\n      const emptyTip = (\n        <EmptyTip>\n          <h2>{gettext('No libraries shared')}</h2>\n          <p>{gettext('You have not shared any libraries with other users yet. You can share a library with other users by clicking the share icon to the right of a library\\'s name in \"My Libraries\".')}</p>\n        </EmptyTip>\n      );\n\n      // sort\n      const sortByName = sortBy == 'name';\n      const sortIcon = sortOrder == 'asc' ? <span className=\"fas fa-caret-up\"></span> : <span className=\"fas fa-caret-down\"></span>;\n\n      const isDesktop = Utils.isDesktop();\n      const table = (\n        <table className={`table-hover ${isDesktop ? '': 'table-thead-hidden'}`}>\n          <thead>\n            {isDesktop ? (\n              <tr>\n                <th width=\"4%\">{/*icon*/}</th>\n                <th width=\"34%\"><a className=\"d-block table-sort-op\" href=\"#\" onClick={this.sortByName}>{gettext('Name')} {sortByName && sortIcon}</a></th>\n                <th width=\"30%\">{gettext('Share To')}</th>\n                <th width=\"24%\">{gettext('Permission')}</th>\n                <th width=\"8%\"></th>\n              </tr>\n            ) : (\n              <tr>\n                <th width=\"12%\"></th>\n                <th width=\"80%\"></th>\n                <th width=\"8%\"></th>\n              </tr>\n            )}\n          </thead>\n          <tbody>\n            {items.map((item, index) => {\n              return (<Item\n                key={index}\n                isDesktop={isDesktop}\n                item={item}\n              />);\n            })}\n          </tbody>\n        </table>\n      );\n\n      return items.length ? table : emptyTip;\n    }\n  }\n}\n\nContent.propTypes = {\n  loading: PropTypes.bool.isRequired,\n  errorMsg: PropTypes.string.isRequired,\n  items: PropTypes.array.isRequired,\n  sortItems: PropTypes.func.isRequired,\n  sortBy: PropTypes.string.isRequired,\n  sortOrder: PropTypes.string.isRequired,\n};\n\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n\n    let item = this.props.item;\n    this.state = {\n      share_permission: item.share_permission,\n      share_permission_name: item.share_permission_name,\n      is_admin: item.is_admin,\n      isOpIconShown: false,\n      isOpMenuOpen: false, // for mobile\n      isPermSelectDialogOpen: false, // for mobile\n      unshared: false,\n      isShowPermEditor: false,\n    };\n    let permissions = ['rw', 'r'];\n    this.permissions = permissions;\n    this.showAdmin = isPro && (item.share_type !== 'public');\n    if (this.showAdmin) {\n      permissions.push('admin');\n    }\n    if (isPro) {\n      permissions.push('cloud-edit', 'preview');\n    }\n  }\n\n  toggleOpMenu = () => {\n    this.setState({\n      isOpMenuOpen: !this.state.isOpMenuOpen\n    });\n  };\n\n  togglePermSelectDialog = () => {\n    this.setState({\n      isPermSelectDialogOpen: !this.state.isPermSelectDialogOpen\n    });\n  };\n\n  onMouseEnter = () => {\n    this.setState({isOpIconShown: true});\n  };\n\n  onMouseLeave = () => {\n    this.setState({isOpIconShown: false});\n  };\n\n  changePerm = (permission) => {\n    const item = this.props.item;\n    const share_type = item.share_type;\n    let options = {\n      'share_type': share_type,\n      'permission': permission\n    };\n    if (share_type == 'personal') {\n      options.user = item.user_email;\n    } else if (share_type == 'group') {\n      options.group_id = item.group_id;\n    }\n\n    seafileAPI.updateRepoSharePerm(item.repo_id, options).then(() => {\n      this.setState({\n        share_permission: permission == 'admin' ? 'rw' : permission,\n        is_admin: permission == 'admin',\n      });\n      toaster.success(gettext('Successfully modified permission.'));\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  unshare = (e) => {\n    e.preventDefault();\n\n    const item = this.props.item;\n    const share_type = item.share_type;\n    let options = {\n      'share_type': share_type\n    };\n    if (share_type == 'personal') {\n      options.user = item.user_email;\n    } else if (share_type == 'group') {\n      options.group_id = item.group_id;\n    }\n\n    seafileAPI.unshareRepo(item.repo_id, options).then((res) => {\n      this.setState({\n        unshared: true\n      });\n      let message = gettext('Successfully unshared {name}').replace('{name}', item.repo_name);\n      toaster.success(message);\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster(errMessage);\n    });\n  };\n\n  onEditPermission = (event) => {\n    event.nativeEvent.stopImmediatePropagation();\n    this.setState({isShowPermEditor: true});\n  };\n\n  render() {\n    if (this.state.unshared) {\n      return null;\n    }\n\n    let { share_permission, share_permission_name, is_admin, isOpIconShown, isPermSelectDialogOpen, isShowPermEditor } = this.state;\n    let item = this.props.item;\n    Object.assign(item, {\n      share_permission: share_permission,\n      is_admin: is_admin\n    });\n\n    let iconUrl = Utils.getLibIconUrl(item);\n    let iconTitle = Utils.getLibIconTitle(item);\n    let repoUrl = `${siteRoot}library/${item.repo_id}/${encodeURIComponent(item.repo_name)}/`;\n\n\n    let shareTo;\n    const shareType = item.share_type;\n    if (shareType == 'personal') {\n      shareTo = item.user_name;\n    } else if (shareType == 'group') {\n      shareTo = item.group_name;\n    } else if (shareType == 'public') {\n      shareTo = gettext('all members');\n    }\n\n    if (this.showAdmin && is_admin) {\n      share_permission = 'admin';\n    }\n\n    // custom defined permission\n    if (share_permission.startsWith('custom-')) {\n      share_permission = share_permission.slice(7);\n    }\n\n    const desktopItem = (\n      <tr onMouseEnter={this.onMouseEnter} onMouseLeave={this.onMouseLeave} onFocus={this.onMouseEnter}>\n        <td><img src={iconUrl} title={iconTitle} alt={iconTitle} width=\"24\" /></td>\n        <td><Link to={repoUrl}>{item.repo_name}</Link></td>\n        <td>\n          {item.share_type == 'personal' ? <span title={item.contact_email}>{shareTo}</span> : shareTo}\n        </td>\n        <td>\n          {!isShowPermEditor && (\n            <div>\n              <span>{Utils.sharePerms(share_permission) || share_permission_name}</span>\n              {isOpIconShown && (\n                <a href=\"#\"\n                  role=\"button\"\n                  aria-label={gettext('Edit')}\n                  title={gettext('Edit')}\n                  className=\"fa fa-pencil-alt attr-action-icon\"\n                  onClick={this.onEditPermission}>\n                </a>\n              )}\n            </div>\n          )}\n          {isShowPermEditor && (\n            <SharePermissionEditor\n              repoID={item.repo_id}\n              isTextMode={true}\n              isEditing={true}\n              autoFocus={true}\n              isEditIconShow={this.state.isOpIconShown}\n              currentPermission={share_permission}\n              permissions={this.permissions}\n              onPermissionChanged={this.changePerm}\n            />\n          )}\n        </td>\n        <td><a href=\"#\" role=\"button\" aria-label={gettext('Unshare')} className={`action-icon sf2-icon-x3 ${isOpIconShown ? '': 'invisible'}`} title={gettext('Unshare')} onClick={this.unshare}></a></td>\n      </tr>\n    );\n\n    const mobileItem = (\n      <Fragment>\n        <tr>\n          <td><img src={iconUrl} title={iconTitle} alt={iconTitle} width=\"24\" /></td>\n          <td>\n            <Link to={repoUrl}>{item.repo_name}</Link>\n            <span className=\"item-meta-info-highlighted\">{Utils.sharePerms(share_permission)}</span>\n            <br />\n            <span className=\"item-meta-info\">{`${gettext('Share To:')} ${shareTo}`}</span>\n          </td>\n          <td>\n            <Dropdown isOpen={this.state.isOpMenuOpen} toggle={this.toggleOpMenu}>\n              <DropdownToggle\n                tag=\"i\"\n                className=\"sf-dropdown-toggle fa fa-ellipsis-v ml-0\"\n                title={gettext('More Operations')}\n                data-toggle=\"dropdown\"\n                aria-expanded={this.state.isOpMenuOpen}\n              />\n              <div className={this.state.isOpMenuOpen ? '' : 'd-none'} onClick={this.toggleOpMenu}>\n                <div className=\"mobile-operation-menu-bg-layer\"></div>\n                <div className=\"mobile-operation-menu\">\n                  <DropdownItem className=\"mobile-menu-item\" onClick={this.togglePermSelectDialog}>{gettext('Permission')}</DropdownItem>\n                  <DropdownItem className=\"mobile-menu-item\" onClick={this.unshare}>{gettext('Unshare')}</DropdownItem>\n                </div>\n              </div>\n            </Dropdown>\n          </td>\n        </tr>\n        {isPermSelectDialogOpen && (\n          <PermSelect\n            repoID={item.repo_id}\n            currentPerm={share_permission}\n            permissions={this.permissions}\n            changePerm={this.changePerm}\n            toggleDialog={this.togglePermSelectDialog}\n          />\n        )}\n      </Fragment>\n    );\n\n    return this.props.isDesktop ? desktopItem : mobileItem;\n  }\n}\n\nItem.propTypes = {\n  item: PropTypes.object.isRequired,\n  isDesktop: PropTypes.bool.isRequired,\n};\n\nclass ShareAdminLibraries extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      items: [],\n      sortBy: 'name', // 'name' or 'time'\n      sortOrder: 'asc' // 'asc' or 'desc'\n    };\n  }\n\n  componentDidMount() {\n    seafileAPI.listSharedRepos().then((res) => {\n      let items = res.data.map(item => {\n        return new SharedRepoInfo(item);\n      });\n      this.setState({\n        loading: false,\n        items: Utils.sortRepos(items, this.state.sortBy, this.state.sortOrder)\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  sortItems = (sortBy, sortOrder) => {\n    this.setState({\n      sortBy: sortBy,\n      sortOrder: sortOrder,\n      items: Utils.sortRepos(this.state.items, sortBy, sortOrder)\n    });\n  };\n\n  render() {\n    return (\n      <div className=\"main-panel-center\">\n        <div className=\"cur-view-container\" id=\"share-admin-libs\">\n          <div className=\"cur-view-path\">\n            <h3 className=\"sf-heading\">{gettext('Libraries')}</h3>\n          </div>\n          <div className=\"cur-view-content\">\n            <Content\n              errorMsg={this.state.errorMsg}\n              loading={this.state.loading}\n              items={this.state.items}\n              sortBy={this.state.sortBy}\n              sortOrder={this.state.sortOrder}\n              sortItems={this.sortItems}\n            />\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default ShareAdminLibraries;\n","class SharedFolderInfo {\n\n  constructor(object) {\n    this.path = object.path;\n    this.folder_name = object.folder_name;\n    this.repo_id = object.repo_id;\n    this.repo_name = object.repo_name;\n    this.share_type = object.share_type;\n    this.share_permission = object.share_permission;\n    this.share_permission_name = object.share_permission_name;\n    if (object.share_type === 'group') {\n      this.group_id = object.group_id;\n      this.group_name = object.group_name;\n    } else {\n      this.user_name = object.user_name;\n      this.user_email = object.user_email;\n      this.contact_email = object.contact_email;\n    }\n  }\n\n}\n\nexport default SharedFolderInfo;\n","import React, { Fragment, Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { Link } from '@gatsbyjs/reach-router';\nimport { Dropdown, DropdownToggle, DropdownItem } from 'reactstrap';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport { gettext, siteRoot, isPro } from '../../utils/constants';\nimport Loading from '../../components/loading';\nimport EmptyTip from '../../components/empty-tip';\nimport toaster from '../../components/toast';\nimport SharePermissionEditor from '../../components/select-editor/share-permission-editor';\nimport SharedFolderInfo from '../../models/shared-folder-info';\nimport PermSelect from '../../components/dialog/perm-select';\n\nclass Content extends Component {\n\n  sortByName = (e) => {\n    e.preventDefault();\n    const sortBy = 'name';\n    const sortOrder = this.props.sortOrder == 'asc' ? 'desc' : 'asc';\n    this.props.sortItems(sortBy, sortOrder);\n  };\n\n  render() {\n    const { loading, errorMsg, items, sortBy, sortOrder } = this.props;\n\n    if (loading) {\n      return <Loading />;\n    } else if (errorMsg) {\n      return <p className=\"error text-center\">{errorMsg}</p>;\n    } else {\n      const emptyTip = (\n        <EmptyTip>\n          <h2>{gettext('No folders shared')}</h2>\n          <p>{gettext('You have not shared any folders with other users yet. You can share a folder with other users by clicking the share icon to the right of a folder\\'s name.')}</p>\n        </EmptyTip>\n      );\n\n      // sort\n      const sortByName = sortBy == 'name';\n      const sortIcon = sortOrder == 'asc' ? <span className=\"fas fa-caret-up\"></span> : <span className=\"fas fa-caret-down\"></span>;\n\n      const isDesktop = Utils.isDesktop();\n      const table = (\n        <table className={`table-hover ${isDesktop ? '': 'table-thead-hidden'}`}>\n          <thead>\n            {isDesktop ? (\n              <tr>\n                <th width=\"4%\">{/*icon*/}</th>\n                <th width=\"34%\"><a className=\"d-block table-sort-op\" href=\"#\" onClick={this.sortByName}>{gettext('Name')} {sortByName && sortIcon}</a></th>\n                <th width=\"30%\">{gettext('Share To')}</th>\n                <th width=\"24%\">{gettext('Permission')}</th>\n                <th width=\"8%\"></th>\n              </tr>\n            ) : (\n              <tr>\n                <th width=\"12%\"></th>\n                <th width=\"80%\"></th>\n                <th width=\"8%\"></th>\n              </tr>\n            )}\n          </thead>\n          <tbody>\n            {items.map((item, index) => {\n              return (<Item key={index} isDesktop={isDesktop} item={item} />);\n            })}\n          </tbody>\n        </table>\n      );\n\n      return items.length ? table : emptyTip;\n    }\n  }\n}\n\nContent.propTypes = {\n  loading: PropTypes.bool.isRequired,\n  errorMsg: PropTypes.string.isRequired,\n  items: PropTypes.array.isRequired,\n  sortItems: PropTypes.func.isRequired,\n  sortBy: PropTypes.string.isRequired,\n  sortOrder: PropTypes.string.isRequired,\n};\n\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      share_permission: this.props.item.share_permission,\n      share_permission_name: this.props.item.share_permission_name,\n      isOpIconShown: false,\n      isOpMenuOpen: false, // for mobile\n      isPermSelectDialogOpen: false, // for mobile\n      unshared: false,\n      isShowPermEditor: false,\n    };\n\n    this.permissions = ['rw', 'r'];\n    if (isPro) {\n      this.permissions.push('cloud-edit', 'preview');\n    }\n  }\n\n  toggleOpMenu = () => {\n    this.setState({\n      isOpMenuOpen: !this.state.isOpMenuOpen\n    });\n  };\n\n  togglePermSelectDialog = () => {\n    this.setState({\n      isPermSelectDialogOpen: !this.state.isPermSelectDialogOpen\n    });\n  };\n\n  onMouseEnter = () => {\n    this.setState({isOpIconShown: true});\n  };\n\n  onMouseLeave = () => {\n    this.setState({isOpIconShown: false});\n  };\n\n  unshare = (e) => {\n    e.preventDefault();\n\n    const item = this.props.item;\n    let options = {\n      'p': item.path\n    };\n    if (item.share_type == 'personal') {\n      Object.assign(options, {\n        'share_type': 'user',\n        'username': item.user_email\n      });\n    } else {\n      Object.assign(options, {\n        'share_type': item.share_type, // 'group'\n        'group_id': item.group_id\n      });\n    }\n\n    seafileAPI.unshareFolder(item.repo_id, options).then((res) => {\n      this.setState({\n        unshared: true\n      });\n      let message = gettext('Successfully unshared {name}').replace('{name}', item.folder_name);\n      toaster.success(message);\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster(errMessage);\n    });\n  };\n\n  changePerm = (permission) => {\n    const item = this.props.item;\n    const postData = {\n      'permission': permission\n    };\n    let options = {\n      'p': item.path\n    };\n    if (item.share_type == 'personal') {\n      Object.assign(options, {\n        'share_type': 'user',\n        'username': item.user_email\n      });\n    } else {\n      Object.assign(options, {\n        'share_type': item.share_type, // 'group'\n        'group_id': item.group_id\n      });\n    }\n\n    seafileAPI.updateFolderSharePerm(item.repo_id, postData, options).then((res) => {\n      this.setState({share_permission: permission});\n      toaster.success(gettext('Successfully modified permission.'));\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  onEditPermission = (event) => {\n    event.nativeEvent.stopImmediatePropagation();\n    this.setState({isShowPermEditor: true});\n  };\n\n  render() {\n    if (this.state.unshared) {\n      return null;\n    }\n\n    const item = this.props.item;\n    let { share_permission, share_permission_name, isOpIconShown, isPermSelectDialogOpen, isShowPermEditor } = this.state;\n\n    let is_readonly = false;\n    if (share_permission == 'r' || share_permission == 'preview') {\n      is_readonly = true;\n    }\n    let iconUrl = Utils.getFolderIconUrl(is_readonly);\n    let iconTitle = Utils.getFolderIconTitle({\n      'permission': share_permission\n    });\n    let folderUrl = `${siteRoot}library/${item.repo_id}/${encodeURIComponent(item.repo_name)}${Utils.encodePath(item.path)}`;\n\n    // custom defined permission\n    if (share_permission.startsWith('custom-')) {\n      share_permission = share_permission.slice(7);\n    }\n    const desktopItem = (\n      <tr onMouseEnter={this.onMouseEnter} onMouseLeave={this.onMouseLeave} onFocus={this.onMouseEnter}>\n        <td><img src={iconUrl} title={iconTitle} alt={iconTitle} width=\"24\" /></td>\n        <td><Link to={folderUrl}>{item.folder_name}</Link></td>\n        <td>\n          {item.share_type == 'personal' ?\n            <span title={item.contact_email}>{item.user_name}</span> : item.group_name}\n        </td>\n        <td>\n          {!isShowPermEditor && (\n            <div>\n              <span>{Utils.sharePerms(share_permission) || share_permission_name}</span>\n              {isOpIconShown && (\n                <a href=\"#\"\n                  role=\"button\"\n                  aria-label={gettext('Edit')}\n                  title={gettext('Edit')}\n                  className=\"fa fa-pencil-alt attr-action-icon\"\n                  onClick={this.onEditPermission}>\n                </a>\n              )}\n            </div>\n          )}\n          {isShowPermEditor && (\n            <SharePermissionEditor\n              repoID={item.repo_id}\n              isTextMode={true}\n              isEditIconShow={isOpIconShown}\n              isEditing={true}\n              autoFocus={true}\n              currentPermission={share_permission}\n              permissions={this.permissions}\n              onPermissionChanged={this.changePerm}\n            />\n          )}\n        </td>\n        <td><a href=\"#\" role=\"button\" aria-label={gettext('Unshare')} className={`action-icon sf2-icon-x3 ${isOpIconShown ? '': 'invisible'}`} title={gettext('Unshare')} onClick={this.unshare}></a></td>\n      </tr>\n    );\n\n    const mobileItem = (\n      <Fragment>\n        <tr>\n          <td><img src={iconUrl} title={iconTitle} alt={iconTitle} width=\"24\" /></td>\n          <td>\n            <Link to={folderUrl}>{item.folder_name}</Link>\n            <span className=\"item-meta-info-highlighted\">{Utils.sharePerms(share_permission)}</span>\n            <br />\n            <span className=\"item-meta-info\">{`${gettext('Share To:')} ${item.share_type == 'personal' ? item.user_name : item.group_name}`}</span>\n          </td>\n          <td>\n            <Dropdown isOpen={this.state.isOpMenuOpen} toggle={this.toggleOpMenu}>\n              <DropdownToggle\n                tag=\"i\"\n                className=\"sf-dropdown-toggle fa fa-ellipsis-v ml-0\"\n                title={gettext('More Operations')}\n                data-toggle=\"dropdown\"\n                aria-expanded={this.state.isOpMenuOpen}\n              />\n              <div className={this.state.isOpMenuOpen ? '' : 'd-none'} onClick={this.toggleOpMenu}>\n                <div className=\"mobile-operation-menu-bg-layer\"></div>\n                <div className=\"mobile-operation-menu\">\n                  <DropdownItem className=\"mobile-menu-item\" onClick={this.togglePermSelectDialog}>{gettext('Permission')}</DropdownItem>\n                  <DropdownItem className=\"mobile-menu-item\" onClick={this.unshare}>{gettext('Unshare')}</DropdownItem>\n                </div>\n              </div>\n            </Dropdown>\n          </td>\n        </tr>\n        {isPermSelectDialogOpen &&(\n          <PermSelect\n            repoID={item.repo_id}\n            currentPerm={share_permission}\n            permissions={this.permissions}\n            changePerm={this.changePerm}\n            toggleDialog={this.togglePermSelectDialog}\n          />\n        )}\n      </Fragment>\n    );\n\n    return this.props.isDesktop ? desktopItem : mobileItem;\n  }\n}\n\nItem.propTypes = {\n  item: PropTypes.object.isRequired,\n  isDesktop: PropTypes.bool.isRequired,\n};\n\nclass ShareAdminFolders extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      items: [],\n      sortBy: 'name',\n      sortOrder: 'asc' // 'asc' or 'desc'\n    };\n  }\n\n  _sortItems = (items, sortBy, sortOrder) => {\n    let comparator;\n\n    switch (`${sortBy}-${sortOrder}`) {\n      case 'name-asc':\n        comparator = function(a, b) {\n          var result = Utils.compareTwoWord(a.folder_name, b.folder_name);\n          return result;\n        };\n        break;\n      case 'name-desc':\n        comparator = function(a, b) {\n          var result = Utils.compareTwoWord(a.folder_name, b.folder_name);\n          return -result;\n        };\n        break;\n    }\n\n    items.sort(comparator);\n    return items;\n  };\n\n  sortItems = (sortBy, sortOrder) => {\n    this.setState({\n      sortBy: sortBy,\n      sortOrder: sortOrder,\n      items: this._sortItems(this.state.items, sortBy, sortOrder)\n    });\n  };\n\n  componentDidMount() {\n    seafileAPI.listSharedFolders().then((res) => {\n      let items = res.data.map(item => {\n        return new SharedFolderInfo(item);\n      });\n      this.setState({\n        loading: false,\n        items: this._sortItems(items, this.state.sortBy, this.state.sortOrder)\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  render() {\n    return (\n      <div className=\"main-panel-center\">\n        <div className=\"cur-view-container\" id=\"share-admin-libs\">\n          <div className=\"cur-view-path\">\n            <h3 className=\"sf-heading\">{gettext('Folders')}</h3>\n          </div>\n          <div className=\"cur-view-content\">\n            <Content\n              errorMsg={this.state.errorMsg}\n              loading={this.state.loading}\n              items={this.state.items}\n              sortBy={this.state.sortBy}\n              sortOrder={this.state.sortOrder}\n              sortItems={this.sortItems}\n            />\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default ShareAdminFolders;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Modal, ModalBody } from 'reactstrap';\nimport { Utils } from '../../utils/utils';\n\nconst propTypes = {\n  currentPerm: PropTypes.string.isRequired,\n  permissions: PropTypes.array.isRequired,\n  changePerm: PropTypes.func.isRequired,\n  toggleDialog: PropTypes.func.isRequired\n};\n\nclass ShareLinkPermissionSelect extends React.Component {\n\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      currentOption: this.props.currentPerm\n    };\n  }\n\n  switchOption = (e) => {\n    if (!e.target.checked) {\n      return;\n    }\n\n    const currentOption = e.target.value;\n    this.setState({\n      currentOption: currentOption\n    });\n\n    this.props.changePerm(currentOption);\n    this.props.toggleDialog();\n  };\n\n  render() {\n    const options = this.props.permissions;\n    const { currentOption } = this.state;\n\n    return (\n      <Modal isOpen={true} toggle={this.props.toggleDialog}>\n        <ModalBody>\n          {options.map((item, index) => {\n            return (\n              <div className=\"d-flex\" key={index}>\n                <input id={`option-${index}`} className=\"mt-1\" type=\"radio\" name=\"permission\" value={item} checked={currentOption == item} onChange={this.switchOption} />\n                <label htmlFor={`option-${index}`} className=\"ml-2\">\n                  {Utils.getShareLinkPermissionObject(item).text}\n                </label>\n              </div>\n            );\n          })}\n        </ModalBody>\n      </Modal>\n    );\n  }\n}\n\nShareLinkPermissionSelect.propTypes = propTypes;\n\nexport default ShareLinkPermissionSelect;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Modal, ModalBody } from 'reactstrap';\nimport { gettext } from '../../utils/constants';\n\nconst propTypes = {\n  toggleDialog: PropTypes.func.isRequired,\n  sortBy: PropTypes.string.isRequired,\n  sortOrder: PropTypes.string.isRequired,\n  sortOptions: PropTypes.array,\n  sortItems: PropTypes.func.isRequired\n};\n\nclass SortOptions extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.sortOptions = this.props.sortOptions || [\n      {value: 'name-asc', text: gettext('By name ascending')},\n      {value: 'name-desc', text: gettext('By name descending')},\n      {value: 'size-asc', text: gettext('By size ascending')},\n      {value: 'size-desc', text: gettext('By size descending')},\n      {value: 'time-asc', text: gettext('By time ascending')},\n      {value: 'time-desc', text: gettext('By time descending')}\n    ];\n    const { sortBy, sortOrder } = this.props;\n    this.state = {\n      currentOption: `${sortBy}-${sortOrder}`\n    };\n  }\n\n  switchOption = (e) => {\n    if (!e.target.checked) {\n      return;\n    }\n\n    this.setState({\n      currentOption: e.target.value\n    });\n\n    const [sortBy, sortOrder] = e.target.value.split('-');\n    this.props.sortItems(sortBy, sortOrder);\n    this.props.toggleDialog();\n  };\n\n  render() {\n    return (\n      <Modal isOpen={true} toggle={this.props.toggleDialog}>\n        <ModalBody>\n          {this.sortOptions.map((item, index) => {\n            return (\n              <Fragment key={index}>\n                <input id={`option-${index}`} className=\"align-middle\" type=\"radio\" name=\"sort-option\" value={item.value} checked={this.state.currentOption == item.value} onChange={this.switchOption} />\n                <label htmlFor={`option-${index}`} className=\"align-middle m-2\">{item.text}</label><br />\n              </Fragment>\n            );\n          })}\n        </ModalBody>\n      </Modal>\n    );\n  }\n}\n\nSortOptions.propTypes = propTypes;\n\nexport default SortOptions;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport CommonToolbar from './common-toolbar';\n\nconst propTypes = {\n  onShowSidePanel: PropTypes.func.isRequired,\n  onSearchedClick: PropTypes.func.isRequired,\n  searchPlaceholder: PropTypes.string,\n  children: PropTypes.object\n};\n\nclass TopToolbar extends React.Component {\n\n  render() {\n    const { onShowSidePanel, onSearchedClick } = this.props;\n    return (\n      <div className=\"main-panel-north border-left-show\">\n        <div className=\"cur-view-toolbar\">\n          <span title=\"Side Nav Menu\" onClick={onShowSidePanel} className=\"sf2-icon-menu side-nav-toggle hidden-md-up d-md-none\">\n          </span>\n          {this.props.children}\n        </div>\n        <CommonToolbar searchPlaceholder={this.props.searchPlaceholder} onSearchedClick={onSearchedClick} />\n      </div>\n    );\n  }\n}\n\nTopToolbar.propTypes = propTypes;\n\nexport default TopToolbar;\n","import React, { Component, Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Link } from '@gatsbyjs/reach-router';\nimport moment from 'moment';\nimport { Dropdown, DropdownToggle, DropdownItem, Button } from 'reactstrap';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport { isPro, gettext, siteRoot, canGenerateUploadLink } from '../../utils/constants';\nimport ShareLink from '../../models/share-link';\nimport ShareLinkPermissionEditor from '../../components/select-editor/share-link-permission-editor';\nimport Loading from '../../components/loading';\nimport toaster from '../../components/toast';\nimport EmptyTip from '../../components/empty-tip';\nimport ShareLinkPermissionSelect from '../../components/dialog/share-link-permission-select';\nimport ShareAdminLink from '../../components/dialog/share-admin-link';\nimport SortOptionsDialog from '../../components/dialog/sort-options';\nimport CommonOperationConfirmationDialog from '../../components/dialog/common-operation-confirmation-dialog';\nimport TopToolbar from '../../components/toolbar/top-toolbar';\n\nconst contentPropTypes = {\n  loading: PropTypes.bool.isRequired,\n  errorMsg: PropTypes.string.isRequired,\n  items: PropTypes.array.isRequired,\n  sortBy: PropTypes.string.isRequired,\n  sortOrder: PropTypes.string.isRequired,\n  sortItems: PropTypes.func.isRequired,\n  onRemoveLink: PropTypes.func.isRequired\n};\n\nclass Content extends Component {\n\n  sortByName = (e) => {\n    e.preventDefault();\n    const sortBy = 'name';\n    const sortOrder = this.props.sortOrder == 'asc' ? 'desc' : 'asc';\n    this.props.sortItems(sortBy, sortOrder);\n  };\n\n  sortByTime = (e) => {\n    e.preventDefault();\n    const sortBy = 'time';\n    const sortOrder = this.props.sortOrder == 'asc' ? 'desc' : 'asc';\n    this.props.sortItems(sortBy, sortOrder);\n  };\n\n  render() {\n    const { loading, errorMsg, items, sortBy, sortOrder } = this.props;\n\n    if (loading) {\n      return <Loading />;\n    } else if (errorMsg) {\n      return <p className=\"error text-center\">{errorMsg}</p>;\n    } else {\n      const emptyTip = (\n        <EmptyTip>\n          <h2>{gettext('No share links')}</h2>\n          <p>{gettext('You have not created any share links yet. A share link can be used to share files and folders with anyone. You can create a share link for a file or folder by clicking the share icon to the right of its name.')}</p>\n        </EmptyTip>\n      );\n\n      // sort\n      const sortByName = sortBy == 'name';\n      const sortByTime = sortBy == 'time';\n      const sortIcon = sortOrder == 'asc' ? <span className=\"fas fa-caret-up\"></span> : <span className=\"fas fa-caret-down\"></span>;\n\n      const isDesktop = Utils.isDesktop();\n      // only for some columns\n      const columnWidths = isPro ? ['14%', '7%', '14%'] : ['21%', '14%', '20%'];\n      const table = (\n        <table className={`table-hover ${isDesktop ? '': 'table-thead-hidden'}`}>\n          <thead>\n            {isDesktop ? (\n              <tr>\n                <th width=\"4%\">{/*icon*/}</th>\n                <th width=\"31%\"><a className=\"d-block table-sort-op\" href=\"#\" onClick={this.sortByName}>{gettext('Name')} {sortByName && sortIcon}</a></th>\n                <th width={columnWidths[0]}>{gettext('Library')}</th>\n                {isPro && <th width=\"20%\">{gettext('Permission')}</th>}\n                <th width={columnWidths[1]}>{gettext('Visits')}</th>\n                <th width={columnWidths[2]}><a className=\"d-block table-sort-op\" href=\"#\" onClick={this.sortByTime}>{gettext('Expiration')} {sortByTime && sortIcon}</a></th>\n                <th width=\"10%\">{/*Operations*/}</th>\n              </tr>\n            ) : (\n              <tr>\n                <th width=\"12%\"></th>\n                <th width=\"80%\"></th>\n                <th width=\"8%\"></th>\n              </tr>\n            )}\n          </thead>\n          <tbody>\n            {items.map((item, index) => {\n              return (<Item key={index} isDesktop={isDesktop} item={item} onRemoveLink={this.props.onRemoveLink} />);\n            })}\n          </tbody>\n        </table>\n      );\n\n      return items.length ? table : emptyTip;\n    }\n  }\n}\n\nContent.propTypes = contentPropTypes;\n\nconst itemPropTypes = {\n  item: PropTypes.object.isRequired,\n  isDesktop: PropTypes.bool.isRequired,\n  onRemoveLink: PropTypes.func.isRequired\n};\n\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      isOpIconShown: false,\n      isOpMenuOpen: false, // for mobile\n      isPermSelectDialogOpen: false, // for mobile\n      isLinkDialogOpen: false,\n      permissionOptions: [],\n      currentPermission: '',\n    };\n  }\n\n  componentDidMount() {\n    if (isPro) {\n      this.updatePermissionOptions();\n    }\n  }\n\n  updatePermissionOptions = () => {\n    const item = this.props.item;\n    let itemType = item.is_dir ? (item.path === '/' ? 'library' : 'dir') : 'file';\n    let permission = item.repo_folder_permission;\n    let permissionOptions = Utils.getShareLinkPermissionList(itemType, permission, item.path, item.can_edit);\n    let currentPermission = Utils.getShareLinkPermissionStr(this.props.item.permissions);\n    this.setState({\n      permissionOptions: permissionOptions,\n      currentPermission: currentPermission\n    });\n  };\n\n  toggleOpMenu = () => {\n    this.setState({\n      isOpMenuOpen: !this.state.isOpMenuOpen\n    });\n  };\n\n  togglePermSelectDialog = () => {\n    this.setState({\n      isPermSelectDialogOpen: !this.state.isPermSelectDialogOpen\n    });\n  };\n\n  toggleLinkDialog = () => {\n    this.setState({\n      isLinkDialogOpen: !this.state.isLinkDialogOpen\n    });\n  };\n\n  handleMouseOver = () => {\n    this.setState({isOpIconShown: true});\n  };\n\n  handleMouseOut = () => {\n    this.setState({isOpIconShown: false});\n  };\n\n  viewLink = (e) => {\n    e.preventDefault();\n    this.toggleLinkDialog();\n  };\n\n  removeLink = (e) => {\n    e.preventDefault();\n    this.props.onRemoveLink(this.props.item);\n  };\n\n  renderExpiration = () => {\n    const item = this.props.item;\n    if (!item.expire_date) {\n      return '--';\n    }\n    const expire_date = moment(item.expire_date).format('YYYY-MM-DD');\n    const expire_time = moment(item.expire_date).format('YYYY-MM-DD HH:mm:ss');\n    return (<span className={item.is_expired ? 'error' : ''} title={expire_time}>{expire_date}</span>);\n  };\n\n  changePerm = (permission) => {\n    const item = this.props.item;\n    const permissionDetails = Utils.getShareLinkPermissionObject(permission).permissionDetails;\n    seafileAPI.updateShareLink(item.token, JSON.stringify(permissionDetails)).then(() => {\n      this.setState({\n        currentPermission: permission\n      });\n      let message = gettext('Successfully modified permission.');\n      toaster.success(message);\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  render() {\n    const item = this.props.item;\n    const { currentPermission, permissionOptions , isOpIconShown, isPermSelectDialogOpen, isLinkDialogOpen } = this.state;\n\n    let iconUrl, objUrl;\n    if (item.is_dir) {\n      let path = item.path === '/' ? '/' : item.path.slice(0, item.path.length - 1);\n      iconUrl = Utils.getFolderIconUrl(false);\n      objUrl = `${siteRoot}library/${item.repo_id}/${encodeURIComponent(item.repo_name)}${Utils.encodePath(path)}`;\n    } else {\n      iconUrl = Utils.getFileIconUrl(item.obj_name);\n      objUrl = `${siteRoot}lib/${item.repo_id}/file${Utils.encodePath(item.path)}`;\n    }\n\n    const deletedTip = item.obj_id === '' ? <span style={{color:'red'}}>{gettext('(deleted)')}</span> : null;\n    const desktopItem = (\n      <tr onMouseEnter={this.handleMouseOver} onMouseLeave={this.handleMouseOut} onFocus={this.handleMouseOver}>\n        <td><img src={iconUrl} width=\"24\" alt=\"\" /></td>\n        <td>\n          {item.is_dir ?\n            <Link to={objUrl}>{item.obj_name}</Link> :\n            <a href={objUrl} target=\"_blank\" rel=\"noreferrer\">{item.obj_name}</a>\n          }\n          {deletedTip}\n        </td>\n        <td><Link to={`${siteRoot}library/${item.repo_id}/${encodeURIComponent(item.repo_name)}/`}>{item.repo_name}</Link></td>\n        {isPro &&\n        <td>\n          <ShareLinkPermissionEditor\n            isTextMode={true}\n            isEditIconShow={isOpIconShown && !item.is_expired}\n            currentPermission={currentPermission}\n            permissionOptions={permissionOptions}\n            onPermissionChanged={this.changePerm}\n          />\n        </td>\n        }\n        <td>{item.view_cnt}</td>\n        <td>{this.renderExpiration()}</td>\n        <td>\n          {!item.is_expired && <a href=\"#\" className={`sf2-icon-link action-icon ${isOpIconShown ? '': 'invisible'}`} title={gettext('View')} aria-label={gettext('View')} role=\"button\" onClick={this.viewLink}></a>}\n          <a href=\"#\" className={`sf2-icon-delete action-icon ${isOpIconShown ? '': 'invisible'}`} title={gettext('Remove')} aria-label={gettext('Remove')} role=\"button\" onClick={this.removeLink}></a>\n        </td>\n      </tr>\n    );\n\n    const mobileItem = (\n      <Fragment>\n        <tr>\n          <td><img src={iconUrl} alt=\"\" width=\"24\" /></td>\n          <td>\n            {item.is_dir ?\n              <Link to={objUrl}>{item.obj_name}</Link> :\n              <a href={objUrl} target=\"_blank\" rel=\"noreferrer\">{item.obj_name}</a>\n            }\n            {isPro && <span className=\"item-meta-info-highlighted\">{Utils.getShareLinkPermissionObject(currentPermission).text}</span>}\n            <br />\n            <span>{item.repo_name}</span><br />\n            <span className=\"item-meta-info\">{gettext('Visits')}: {item.view_cnt}</span>\n            <span className=\"item-meta-info\">{gettext('Expiration')}: {this.renderExpiration()}</span>\n          </td>\n          <td>\n            <Dropdown isOpen={this.state.isOpMenuOpen} toggle={this.toggleOpMenu}>\n              <DropdownToggle\n                tag=\"i\"\n                className=\"sf-dropdown-toggle fa fa-ellipsis-v ml-0\"\n                title={gettext('More Operations')}\n                data-toggle=\"dropdown\"\n                aria-expanded={this.state.isOpMenuOpen}\n              />\n              <div className={this.state.isOpMenuOpen ? '' : 'd-none'} onClick={this.toggleOpMenu}>\n                <div className=\"mobile-operation-menu-bg-layer\"></div>\n                <div className=\"mobile-operation-menu\">\n                  {(isPro && !item.is_expired) && <DropdownItem className=\"mobile-menu-item\" onClick={this.togglePermSelectDialog}>{gettext('Permission')}</DropdownItem>}\n                  {!item.is_expired && <DropdownItem className=\"mobile-menu-item\" onClick={this.viewLink}>{gettext('View')}</DropdownItem>}\n                  <DropdownItem className=\"mobile-menu-item\" onClick={this.removeLink}>{gettext('Remove')}</DropdownItem>\n                </div>\n              </div>\n            </Dropdown>\n          </td>\n        </tr>\n        {isPermSelectDialogOpen &&\n        <ShareLinkPermissionSelect\n          currentPerm={currentPermission}\n          permissions={permissionOptions}\n          changePerm={this.changePerm}\n          toggleDialog={this.togglePermSelectDialog}\n        />\n        }\n      </Fragment>\n    );\n\n    return (\n      <Fragment>\n        {this.props.isDesktop ? desktopItem : mobileItem}\n        {isLinkDialogOpen &&\n        <ShareAdminLink\n          link={item.link}\n          toggleDialog={this.toggleLinkDialog}\n        />\n        }\n      </Fragment>\n    );\n  }\n}\n\nItem.propTypes = itemPropTypes;\n\nconst propTypes = {\n  onShowSidePanel: PropTypes.func.isRequired,\n  onSearchedClick: PropTypes.func.isRequired\n};\n\nclass ShareAdminShareLinks extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isCleanInvalidShareLinksDialogOpen: false,\n      loading: true,\n      errorMsg: '',\n      items: [],\n      sortBy: 'name', // 'name' or 'time'\n      sortOrder: 'asc' // 'asc' or 'desc'\n    };\n\n    // for mobile\n    this.sortOptions = [\n      {value: 'name-asc', text: gettext('By name ascending')},\n      {value: 'name-desc', text: gettext('By name descending')},\n      {value: 'time-asc', text: gettext('By expiration ascending')},\n      {value: 'time-desc', text: gettext('By expiration descending')}\n    ];\n  }\n\n  _sortItems = (items, sortBy, sortOrder) => {\n    let comparator;\n\n    switch (`${sortBy}-${sortOrder}`) {\n      case 'name-asc':\n        comparator = function(a, b) {\n          var result = Utils.compareTwoWord(a.obj_name, b.obj_name);\n          return result;\n        };\n        break;\n      case 'name-desc':\n        comparator = function(a, b) {\n          var result = Utils.compareTwoWord(a.obj_name, b.obj_name);\n          return -result;\n        };\n        break;\n      case 'time-asc':\n        comparator = function(a, b) {\n          return a.expire_date < b.expire_date ? -1 : 1;\n        };\n        break;\n      case 'time-desc':\n        comparator = function(a, b) {\n          return a.expire_date < b.expire_date ? 1 : -1;\n        };\n        break;\n\n      // no default\n    }\n\n    items.sort((a, b) => {\n      if (a.is_dir && !b.is_dir) {\n        return -1;\n      } else if (!a.is_dir && b.is_dir) {\n        return 1;\n      } else {\n        return comparator(a, b);\n      }\n    });\n    return items;\n  };\n\n  sortItems = (sortBy, sortOrder) => {\n    this.setState({\n      sortBy: sortBy,\n      sortOrder: sortOrder,\n      items: this._sortItems(this.state.items, sortBy, sortOrder)\n    });\n  };\n\n  componentDidMount() {\n    this.listUserShareLinks();\n  }\n\n  listUserShareLinks() {\n    seafileAPI.listUserShareLinks().then((res) => {\n      let items = res.data.map(item => {\n        return new ShareLink(item);\n      });\n      this.setState({\n        loading: false,\n        items: this._sortItems(items, this.state.sortBy, this.state.sortOrder)\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  onRemoveLink = (item) => {\n    seafileAPI.deleteShareLink(item.token).then(() => {\n      let items = this.state.items.filter(uploadItem => {\n        return uploadItem.token !== item.token;\n      });\n      this.setState({items: items});\n      let message = gettext('Successfully deleted 1 item.');\n      toaster.success(message);\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  toggleSortOptionsDialog = () => {\n    this.setState({\n      isSortOptionsDialogOpen: !this.state.isSortOptionsDialogOpen\n    });\n  };\n\n  toggleCleanInvalidShareLinksDialog = () => {\n    this.setState({isCleanInvalidShareLinksDialogOpen: !this.state.isCleanInvalidShareLinksDialogOpen});\n  };\n\n  cleanInvalidShareLinks = () => {\n    seafileAPI.cleanInvalidShareLinks().then(res => {\n      const newItems = this.state.items.filter(item => item.obj_id !== '').filter(item => !item.is_expired);\n      this.setState({items: newItems});\n      toaster.success(gettext('Successfully cleaned invalid share links.'));\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  render() {\n    return (\n      <Fragment>\n        <TopToolbar\n          onShowSidePanel={this.props.onShowSidePanel}\n          onSearchedClick={this.props.onSearchedClick}\n        >\n\n          <Button className=\"operation-item d-none d-md-block\" onClick={this.toggleCleanInvalidShareLinksDialog}>{gettext('Clean invalid share links')}</Button>\n        </TopToolbar>\n        <div className=\"main-panel-center\">\n          <div className=\"cur-view-container\">\n            <div className=\"cur-view-path share-upload-nav\">\n              <ul className=\"nav\">\n                <li className=\"nav-item\">\n                  <Link to={`${siteRoot}share-admin-share-links/`} className=\"nav-link active\">{gettext('Share Links')}</Link>\n                </li>\n                {canGenerateUploadLink && (\n                  <li className=\"nav-item\"><Link to={`${siteRoot}share-admin-upload-links/`} className=\"nav-link\">{gettext('Upload Links')}</Link></li>\n                )}\n              </ul>\n              {(!Utils.isDesktop() && this.state.items.length > 0) && <span className=\"sf3-font sf3-font-sort action-icon\" onClick={this.toggleSortOptionsDialog}></span>}\n            </div>\n            <div className=\"cur-view-content\">\n              <Content\n                loading={this.state.loading}\n                errorMsg={this.state.errorMsg}\n                items={this.state.items}\n                sortBy={this.state.sortBy}\n                sortOrder={this.state.sortOrder}\n                sortItems={this.sortItems}\n                onRemoveLink={this.onRemoveLink}\n              />\n            </div>\n          </div>\n        </div>\n        {this.state.isSortOptionsDialogOpen &&\n        <SortOptionsDialog\n          toggleDialog={this.toggleSortOptionsDialog}\n          sortBy={this.state.sortBy}\n          sortOrder={this.state.sortOrder}\n          sortOptions={this.sortOptions}\n          sortItems={this.sortItems}\n        />\n        }\n        {this.state.isCleanInvalidShareLinksDialogOpen &&\n          <CommonOperationConfirmationDialog\n            title={gettext('Clean invalid share links')}\n            message={gettext('Are you sure you want to clean invalid share links?')}\n            executeOperation={this.cleanInvalidShareLinks}\n            confirmBtnText={gettext('Clean')}\n            toggleDialog={this.toggleCleanInvalidShareLinksDialog}\n          />\n        }\n      </Fragment>\n    );\n  }\n}\n\nShareAdminShareLinks.propTypes = propTypes;\n\nexport default ShareAdminShareLinks;\n","import React, { Component, Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Link } from '@gatsbyjs/reach-router';\nimport moment from 'moment';\nimport { Dropdown, DropdownToggle, DropdownItem, Button } from 'reactstrap';\nimport { gettext, siteRoot, canGenerateShareLink } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../../components/toast';\nimport Loading from '../../components/loading';\nimport EmptyTip from '../../components/empty-tip';\nimport UploadLink from '../../models/upload-link';\nimport ShareAdminLink from '../../components/dialog/share-admin-link';\nimport CommonOperationConfirmationDialog from '../../components/dialog/common-operation-confirmation-dialog';\nimport TopToolbar from '../../components/toolbar/top-toolbar';\n\nconst contentPropTypes = {\n  loading: PropTypes.bool.isRequired,\n  errorMsg: PropTypes.string.isRequired,\n  items: PropTypes.array.isRequired,\n  onRemoveLink: PropTypes.func.isRequired\n};\n\nclass Content extends Component {\n\n  render() {\n    const { loading, errorMsg, items } = this.props;\n\n    if (loading) {\n      return <Loading />;\n    }\n    if (errorMsg) {\n      return <p className=\"error text-center\">{errorMsg}</p>;\n    }\n\n    const emptyTip = (\n      <EmptyTip>\n        <h2>{gettext('No upload links')}</h2>\n        <p>{gettext('You have not created any upload links yet. An upload link allows anyone to upload files to a folder or library. You can create an upload link for a folder or library by clicking the share icon to the right of its name.')}</p>\n      </EmptyTip>\n    );\n\n    const isDesktop = Utils.isDesktop();\n    const table = (\n      <table className={`table-hover ${isDesktop ? '': 'table-thead-hidden'}`}>\n        <thead>\n          {isDesktop ? (\n            <tr>\n              <th width=\"4%\">{/*icon*/}</th>\n              <th width=\"30%\">{gettext('Name')}</th>\n              <th width=\"24%\">{gettext('Library')}</th>\n              <th width=\"16%\">{gettext('Visits')}</th>\n              <th width=\"16%\">{gettext('Expiration')}</th>\n              <th width=\"10%\">{/*Operations*/}</th>\n            </tr>\n          ) : (\n            <tr>\n              <th width=\"12%\"></th>\n              <th width=\"80%\"></th>\n              <th width=\"8%\"></th>\n            </tr>\n          )}\n        </thead>\n        <tbody>\n          {items.map((item, index) => {\n            return (<Item key={index} isDesktop={isDesktop} item={item} onRemoveLink={this.props.onRemoveLink}/>);\n          })}\n        </tbody>\n      </table>\n    );\n\n    return items.length ? table : emptyTip;\n  }\n}\n\nContent.propTypes = contentPropTypes;\n\nconst itemPropTypes = {\n  isDesktop: PropTypes.bool.isRequired,\n  item: PropTypes.object.isRequired,\n  onRemoveLink: PropTypes.func.isRequired\n};\n\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOpIconShown: false,\n      isOpMenuOpen: false, // for mobile\n      isLinkDialogOpen: false\n    };\n  }\n\n  toggleOpMenu = () => {\n    this.setState({\n      isOpMenuOpen: !this.state.isOpMenuOpen\n    });\n  };\n\n  toggleLinkDialog = () => {\n    this.setState({\n      isLinkDialogOpen: !this.state.isLinkDialogOpen\n    });\n  };\n\n  handleMouseOver = () => {\n    this.setState({isOpIconShown: true});\n  };\n\n  handleMouseOut = () => {\n    this.setState({isOpIconShown: false});\n  };\n\n  viewLink = (e) => {\n    e.preventDefault();\n    this.toggleLinkDialog();\n  };\n\n  removeLink = (e) => {\n    e.preventDefault();\n    this.props.onRemoveLink(this.props.item);\n  };\n\n  renderExpiration = () => {\n    const item = this.props.item;\n    if (!item.expire_date) {\n      return '--';\n    }\n    const expire_date = moment(item.expire_date).format('YYYY-MM-DD');\n    const expire_time = moment(item.expire_date).format('YYYY-MM-DD HH:mm:ss');\n    return (<span className={item.is_expired ? 'error' : ''} title={expire_time}>{expire_date}</span>);\n  };\n\n  render() {\n    let item = this.props.item;\n    const { isOpIconShown, isLinkDialogOpen } = this.state;\n\n    const iconUrl = Utils.getFolderIconUrl(false);\n    const repoUrl = `${siteRoot}library/${item.repo_id}/${encodeURIComponent(item.repo_name)}`;\n    const objUrl = `${repoUrl}${Utils.encodePath(item.path)}`;\n\n    const deletedTip = item.obj_id === '' ? <span style={{color:'red'}}>{gettext('(deleted)')}</span> : null;\n    const desktopItem = (\n      <tr onMouseOver={this.handleMouseOver} onMouseOut={this.handleMouseOut} onFocus={this.handleMouseOver}>\n        <td><img src={iconUrl} alt=\"\" width=\"24\" /></td>\n        <td><Link to={objUrl}>{item.obj_name}</Link>{deletedTip}</td>\n        <td><Link to={repoUrl}>{item.repo_name}</Link></td>\n        <td>{item.view_cnt}</td>\n        <td>{this.renderExpiration()}</td>\n        <td>\n          {!item.is_expired && <a href=\"#\" className={`sf2-icon-link action-icon ${isOpIconShown ? '' : 'invisible'}`} title={gettext('View')} aria-label={gettext('View')} role=\"button\" onClick={this.viewLink}></a>}\n          <a href=\"#\" className={`sf2-icon-delete action-icon ${isOpIconShown ? '' : 'invisible'}`} title={gettext('Remove')} aria-label={gettext('Remove')} role=\"button\" onClick={this.removeLink}></a>\n        </td>\n      </tr>\n    );\n\n    const mobileItem = (\n      <tr>\n        <td><img src={iconUrl} alt=\"\" width=\"24\" /></td>\n        <td>\n          <Link to={objUrl}>{item.obj_name}</Link>\n          <br />\n          <span>{item.repo_name}</span><br />\n          <span className=\"item-meta-info\">{gettext('Visits')}: {item.view_cnt}</span>\n          <span className=\"item-meta-info\">{gettext('Expiration')}: {this.renderExpiration()}</span>\n        </td>\n        <td>\n          <Dropdown isOpen={this.state.isOpMenuOpen} toggle={this.toggleOpMenu}>\n            <DropdownToggle\n              tag=\"i\"\n              className=\"sf-dropdown-toggle fa fa-ellipsis-v ml-0\"\n              title={gettext('More Operations')}\n              data-toggle=\"dropdown\"\n              aria-expanded={this.state.isOpMenuOpen}\n            />\n            <div className={this.state.isOpMenuOpen ? '' : 'd-none'} onClick={this.toggleOpMenu}>\n              <div className=\"mobile-operation-menu-bg-layer\"></div>\n              <div className=\"mobile-operation-menu\">\n                {!item.is_expired && <DropdownItem className=\"mobile-menu-item\" onClick={this.viewLink}>{gettext('View')}</DropdownItem>}\n                <DropdownItem className=\"mobile-menu-item\" onClick={this.removeLink}>{gettext('Remove')}</DropdownItem>\n              </div>\n            </div>\n          </Dropdown>\n        </td>\n      </tr>\n    );\n    return (\n      <Fragment>\n        {this.props.isDesktop ? desktopItem : mobileItem}\n        {isLinkDialogOpen &&\n        <ShareAdminLink\n          link={item.link}\n          toggleDialog={this.toggleLinkDialog}\n        />\n        }\n      </Fragment>\n    );\n  }\n}\n\nItem.propTypes = itemPropTypes;\n\nconst propTypes = {\n  onShowSidePanel: PropTypes.func.isRequired,\n  onSearchedClick: PropTypes.func.isRequired\n};\n\nclass ShareAdminUploadLinks extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isCleanInvalidUploadLinksDialogOpen: false,\n      loading: true,\n      errorMsg: '',\n      items: []\n    };\n  }\n\n  componentDidMount() {\n    this.listUserUploadLinks();\n  }\n\n  listUserUploadLinks() {\n    seafileAPI.listUserUploadLinks().then((res) => {\n      let items = res.data.map(item => {\n        return new UploadLink(item);\n      });\n      this.setState({\n        loading: false,\n        items: items\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  onRemoveLink = (item) => {\n    seafileAPI.deleteUploadLink(item.token).then(() => {\n      let items = this.state.items.filter(uploadItem => {\n        return uploadItem.token !== item.token;\n      });\n      this.setState({items: items});\n      const message = gettext('Successfully deleted 1 item.');\n      toaster.success(message);\n    }).catch((error) => {\n      const errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  toggleCleanInvalidUploadLinksDialog = () => {\n    this.setState({isCleanInvalidUploadLinksDialogOpen: !this.state.isCleanInvalidUploadLinksDialogOpen});\n  };\n\n  cleanInvalidUploadLinks = () => {\n    seafileAPI.cleanInvalidUploadLinks().then(res => {\n      const newItems = this.state.items.filter(item => item.obj_id !== '').filter(item => !item.is_expired);\n      this.setState({items: newItems});\n      toaster.success(gettext('Successfully cleaned invalid upload links.'));\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  render() {\n    return (\n      <Fragment>\n        <TopToolbar\n          onShowSidePanel={this.props.onShowSidePanel}\n          onSearchedClick={this.props.onSearchedClick}\n        >\n          <Button className=\"operation-item d-none d-md-block\" onClick={this.toggleCleanInvalidUploadLinksDialog}>{gettext('Clean invalid upload links')}</Button>\n        </TopToolbar>\n        <div className=\"main-panel-center\">\n          <div className=\"cur-view-container\">\n            <div className=\"cur-view-path share-upload-nav\">\n              <ul className=\"nav\">\n                {canGenerateShareLink && (\n                  <li className=\"nav-item\"><Link to={`${siteRoot}share-admin-share-links/`} className=\"nav-link\">{gettext('Share Links')}</Link></li>\n                )}\n                <li className=\"nav-item\"><Link to={`${siteRoot}share-admin-upload-links/`} className=\"nav-link active\">{gettext('Upload Links')}</Link></li>\n              </ul>\n            </div>\n            <div className=\"cur-view-content\">\n              <Content\n                loading={this.state.loading}\n                errorMsg={this.state.errorMsg}\n                items={this.state.items}\n                onRemoveLink={this.onRemoveLink}\n              />\n            </div>\n          </div>\n        </div>\n        {this.state.isCleanInvalidUploadLinksDialogOpen &&\n        <CommonOperationConfirmationDialog\n          title={gettext('Clean invalid upload links')}\n          message={gettext('Are you sure you want to clean invalid upload links?')}\n          executeOperation={this.cleanInvalidUploadLinks}\n          confirmBtnText={gettext('Clean')}\n          toggleDialog={this.toggleCleanInvalidUploadLinksDialog}\n        />\n        }\n      </Fragment>\n    );\n  }\n}\n\nShareAdminUploadLinks.propTypes = propTypes;\n\nexport default ShareAdminUploadLinks;\n","import { Utils } from '../utils/utils';\n\nclass Repo {\n  constructor(object) {\n    this.repo_id = object.repo_id;\n    this.repo_name = object.repo_name;\n    this.permission = object.permission;\n    this.size_original = object.size;\n    this.size = Utils.bytesToSize(object.size);\n    this.owner_name = object.owner_name;\n    this.owner_email = object.owner_email;\n    this.owner_contact_email = object.owner_contact_email;\n    this.encrypted = object.encrypted;\n    this.last_modified = object.last_modified;\n    this.modifier_contact_email = object.modifier_contact_email;\n    this.modifier_email = object.modifier_email;\n    this.modifier_name = object.modifier_name;\n    this.type = object.type;\n    this.starred = object.starred;\n    this.monitored = object.monitored;\n    this.status = object.status;\n    this.storage_name = object.storage_name;\n    if (object.is_admin != undefined) {\n      this.is_admin = object.is_admin;\n    }\n  }\n}\n\nexport default Repo;\n","import React from 'react';\nimport { gettext } from '../utils/constants';\n\nfunction LibsMobileThead() {\n  return (\n    <thead>\n      <tr>\n        <th width=\"12%\"><span className=\"sr-only\">{gettext('Library Type')}</span></th>\n        <th width=\"80%\"></th>\n        <th width=\"8%\"><span className=\"sr-only\">{gettext('Actions')}</span></th>\n      </tr>\n    </thead>\n  );\n}\n\nexport default LibsMobileThead;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { UncontrolledTooltip } from 'reactstrap';\nimport Icon from '../components/icon';\nimport { gettext } from '../utils/constants';\n\nconst propTypes = {\n  repoID: PropTypes.string.isRequired\n};\n\nclass RepoMonitoredIcon extends React.Component {\n\n  render() {\n    const { repoID } = this.props;\n    return (\n      <Fragment>\n        <span id={`watching-${repoID}`} className=\"ml-1\">\n          <Icon symbol='monitor' />\n        </span>\n        <UncontrolledTooltip\n          placement=\"bottom\"\n          target={`#watching-${repoID}`}\n        >\n          {gettext('You are watching file changes of this library.')}\n        </UncontrolledTooltip>\n      </Fragment>\n    );\n  }\n}\n\nRepoMonitoredIcon.propTypes = propTypes;\n\nexport default RepoMonitoredIcon;\n","import React, { Component, Fragment } from 'react';\nimport { Dropdown, DropdownToggle, DropdownMenu, DropdownItem } from 'reactstrap';\nimport PropTypes from 'prop-types';\nimport moment from 'moment';\nimport cookie from 'react-cookies';\nimport { Link, navigate } from '@gatsbyjs/reach-router';\nimport { gettext, siteRoot, isPro } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../../components/toast';\nimport Repo from '../../models/repo';\nimport Loading from '../../components/loading';\nimport EmptyTip from '../../components/empty-tip';\nimport LibsMobileThead from '../../components/libs-mobile-thead';\nimport ModalPotal from '../../components/modal-portal';\nimport ShareDialog from '../../components/dialog/share-dialog';\nimport SortOptionsDialog from '../../components/dialog/sort-options';\nimport RepoMonitoredIcon from '../../components/repo-monitored-icon';\n\nclass Content extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isItemFreezed: false\n    };\n  }\n\n  freezeItem = (freezed) => {\n    this.setState({\n      isItemFreezed: freezed\n    });\n  };\n\n  sortByName = (e) => {\n    e.preventDefault();\n    const sortBy = 'name';\n    const sortOrder = this.props.sortOrder == 'asc' ? 'desc' : 'asc';\n    this.props.sortItems(sortBy, sortOrder);\n  };\n\n  sortByTime = (e) => {\n    e.preventDefault();\n    const sortBy = 'time';\n    const sortOrder = this.props.sortOrder == 'asc' ? 'desc' : 'asc';\n    this.props.sortItems(sortBy, sortOrder);\n  };\n\n  sortBySize = (e) => {\n    e.preventDefault();\n    const sortBy = 'size';\n    const sortOrder = this.props.sortOrder == 'asc' ? 'desc' : 'asc';\n    this.props.sortItems(sortBy, sortOrder);\n  };\n\n  render() {\n    const { loading, errorMsg, items, sortBy, sortOrder } = this.props;\n\n    const emptyTip = (\n      <EmptyTip>\n        <h2>{gettext('No shared libraries')}</h2>\n        <p>{gettext('No libraries have been shared directly with you. A shared library can be shared with full or restricted permission. If you need access to a library owned by another user, ask the user to share the library with you.')}</p>\n      </EmptyTip>\n    );\n\n    if (loading) {\n      return <Loading />;\n    } else if (errorMsg) {\n      return <p className=\"error text-center\">{errorMsg}</p>;\n    } else {\n      // sort\n      const sortByName = sortBy == 'name';\n      const sortByTime = sortBy == 'time';\n      const sortBySize = sortBy == 'size';\n      const sortIcon = sortOrder == 'asc' ? <span className=\"fas fa-caret-up\"></span> : <span className=\"fas fa-caret-down\"></span>;\n\n      const desktopThead = (\n        <thead>\n          <tr>\n            <th width=\"4%\"></th>\n            <th width=\"4%\"><span className=\"sr-only\">{gettext('Library Type')}</span></th>\n            <th width=\"34%\"><a className=\"d-block table-sort-op\" href=\"#\" onClick={this.sortByName}>{gettext('Name')} {sortByName && sortIcon}</a></th>\n            <th width=\"10%\"><span className=\"sr-only\">{gettext('Actions')}</span></th>\n            <th width=\"14%\"><a className=\"d-block table-sort-op\" href=\"#\" onClick={this.sortBySize}>{gettext('Size')} {sortBySize && sortIcon}</a></th>\n            <th width=\"18%\"><a className=\"d-block table-sort-op\" href=\"#\" onClick={this.sortByTime}>{gettext('Last Update')} {sortByTime && sortIcon}</a></th>\n            <th width=\"16%\">{gettext('Owner')}</th>\n          </tr>\n        </thead>\n      );\n\n      const isDesktop = Utils.isDesktop();\n      const table = (\n        <table className={isDesktop ? '' : 'table-thead-hidden'}>\n          {isDesktop ? desktopThead : <LibsMobileThead />}\n          <tbody>\n            {items.map((item, index) => {\n              return <Item\n                key={index}\n                data={item}\n                isDesktop={isDesktop}\n                isItemFreezed={this.state.isItemFreezed}\n                freezeItem={this.freezeItem}\n                onMonitorRepo={this.props.onMonitorRepo}\n              />;\n            })}\n          </tbody>\n        </table>\n      );\n\n      return items.length ? table : emptyTip;\n    }\n  }\n}\n\nContent.propTypes = {\n  loading: PropTypes.bool.isRequired,\n  errorMsg: PropTypes.string.isRequired,\n  items: PropTypes.array.isRequired,\n  sortBy: PropTypes.string.isRequired,\n  sortOrder: PropTypes.string.isRequired,\n  sortItems: PropTypes.func.isRequired,\n  onMonitorRepo: PropTypes.func.isRequired\n};\n\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      highlight: false,\n      showOpIcon: false,\n      unshared: false,\n      isShowSharedDialog: false,\n      isStarred: this.props.data.starred,\n      isOpMenuOpen: false\n    };\n  }\n\n  toggleOpMenu = () => {\n    this.setState({\n      isOpMenuOpen: !this.state.isOpMenuOpen\n    }, () => {\n      this.props.freezeItem(this.state.isOpMenuOpen);\n    });\n  };\n\n  handleMouseOver = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        highlight: true,\n        showOpIcon: true\n      });\n    }\n  };\n\n  handleMouseOut = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        highlight: false,\n        showOpIcon: false\n      });\n    }\n  };\n\n  share = (e) => {\n    e.preventDefault();\n    this.setState({isShowSharedDialog: true});\n  };\n\n  leaveShare = (e) => {\n    e.preventDefault();\n\n    const data = this.props.data;\n\n    let request;\n    if (data.owner_email.indexOf('@seafile_group') == -1) {\n      let options = {\n        'share_type': 'personal',\n        'from': data.owner_email\n      };\n      request = seafileAPI.leaveShareRepo(data.repo_id, options);\n    } else {\n      request = seafileAPI.leaveShareGroupOwnedRepo(data.repo_id);\n    }\n\n    request.then((res) => {\n      this.setState({unshared: true});\n      let message = gettext('Successfully unshared {name}').replace('{name}', data.repo_name);\n      toaster.success(message);\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      if (errMessage === gettext('Error')) {\n        errMessage = gettext('Failed to unshare {name}').replace('{name}', data.repo_name);\n      }\n      toaster(errMessage);\n    });\n  };\n\n  toggleShareDialog = () => {\n    this.setState({isShowSharedDialog: false});\n  };\n\n  onToggleStarRepo = (e) => {\n    e.preventDefault();\n    const repoName = this.props.data.repo_name;\n    if (this.state.isStarred) {\n      seafileAPI.unstarItem(this.props.data.repo_id, '/').then(() => {\n        this.setState({isStarred: !this.state.isStarred});\n        const msg = gettext('Successfully unstarred {library_name_placeholder}.')\n          .replace('{library_name_placeholder}', repoName);\n        toaster.success(msg);\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    } else {\n      seafileAPI.starItem(this.props.data.repo_id, '/').then(() => {\n        this.setState({isStarred: !this.state.isStarred});\n        const msg = gettext('Successfully starred {library_name_placeholder}.')\n          .replace('{library_name_placeholder}', repoName);\n        toaster.success(msg);\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    }\n  };\n\n  visitRepo = () => {\n    navigate(this.repoURL);\n  };\n\n  watchFileChanges = () => {\n    const { data: repo } = this.props;\n    seafileAPI.monitorRepo(repo.repo_id).then(() => {\n      this.props.onMonitorRepo(repo, true);\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  unwatchFileChanges = () => {\n    const { data: repo } = this.props;\n    seafileAPI.unMonitorRepo(repo.repo_id).then(() => {\n      this.props.onMonitorRepo(repo, false);\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  render() {\n    if (this.state.unshared) {\n      return null;\n    }\n\n    const data = this.props.data;\n\n    data.icon_url = Utils.getLibIconUrl(data);\n    data.icon_title = Utils.getLibIconTitle(data);\n\n    let iconVisibility = this.state.showOpIcon ? '' : ' invisible';\n    let shareIconClassName = 'op-icon sf2-icon-share repo-share-btn' + iconVisibility;\n    let leaveShareIconClassName = 'op-icon sf2-icon-x3' + iconVisibility;\n    let shareRepoUrl = this.repoURL = `${siteRoot}library/${data.repo_id}/${Utils.encodePath(data.repo_name)}/`;\n\n    // at present, only repo shared with 'r', 'rw' can be monitored.(Fri Feb 10 16:24:49 CST 2023)\n    const enableMonitorRepo = isPro && (data.permission == 'r' || data.permission == 'rw');\n\n    const desktopItem = (\n      <Fragment>\n        <tr className={this.state.highlight ? 'tr-highlight' : ''} onMouseOver={this.handleMouseOver} onMouseOut={this.handleMouseOut} onFocus={this.handleMouseOver}>\n          <td className=\"text-center\">\n            <a href=\"#\" role=\"button\" aria-label={this.state.isStarred ? gettext('Unstar') : gettext('Star')} onClick={this.onToggleStarRepo}>\n              <i className={`fa-star ${this.state.isStarred ? 'fas' : 'far star-empty'}`}></i>\n            </a>\n          </td>\n          <td><img src={data.icon_url} title={data.icon_title} alt={data.icon_title} width=\"24\" /></td>\n          <td>\n            <Fragment>\n              <Link to={shareRepoUrl}>{data.repo_name}</Link>\n              {data.monitored && <RepoMonitoredIcon repoID={data.repo_id} />}\n            </Fragment>\n          </td>\n          <td>\n            {(isPro && data.is_admin) &&\n              <a href=\"#\" className={shareIconClassName} title={gettext('Share')} role=\"button\" aria-label={gettext('Share')} onClick={this.share}></a>\n            }\n            <a href=\"#\" className={leaveShareIconClassName} title={gettext('Leave Share')} role=\"button\" aria-label={gettext('Leave Share')} onClick={this.leaveShare}></a>\n            {enableMonitorRepo &&\n            <Dropdown isOpen={this.state.isOpMenuOpen} toggle={this.toggleOpMenu}>\n              <DropdownToggle\n                tag=\"i\"\n                role=\"button\"\n                tabIndex=\"0\"\n                className={`sf-dropdown-toggle sf2-icon-caret-down${iconVisibility}`}\n                title={gettext('More Operations')}\n                aria-label={gettext('More Operations')}\n                data-toggle=\"dropdown\"\n                aria-expanded={this.state.isOpMenuOpen}\n              />\n              <DropdownMenu>\n                <DropdownItem onClick={data.monitored ? this.unwatchFileChanges : this.watchFileChanges}>{data.monitored ? gettext('Unwatch File Changes') : gettext('Watch File Changes')}</DropdownItem>\n              </DropdownMenu>\n            </Dropdown>\n            }\n          </td>\n          <td>{data.size}</td>\n          <td title={moment(data.last_modified).format('llll')}>{moment(data.last_modified).fromNow()}</td>\n          <td title={data.owner_contact_email}>{data.owner_name}</td>\n        </tr>\n        {this.state.isShowSharedDialog && (\n          <ModalPotal>\n            <ShareDialog\n              itemType={'library'}\n              itemName={data.repo_name}\n              itemPath={'/'}\n              repoID={data.repo_id}\n              repoEncrypted={data.encrypted}\n              enableDirPrivateShare={true}\n              userPerm={data.permission}\n              isAdmin={true}\n              toggleDialog={this.toggleShareDialog}\n            />\n          </ModalPotal>\n        )}\n      </Fragment>\n    );\n\n    const mobileItem = (\n      <Fragment>\n        <tr onMouseOver={this.handleMouseOver} onMouseOut={this.handleMouseOut}>\n          <td onClick={this.visitRepo}><img src={data.icon_url} title={data.icon_title} alt={data.icon_title} width=\"24\" /></td>\n          <td onClick={this.visitRepo}>\n            <Link to={shareRepoUrl}>{data.repo_name}</Link>\n            {data.monitored && <RepoMonitoredIcon repoID={data.repo_id} />}\n            <br />\n            <span className=\"item-meta-info\" title={data.owner_contact_email}>{data.owner_name}</span>\n            <span className=\"item-meta-info\">{data.size}</span>\n            <span className=\"item-meta-info\" title={moment(data.last_modified).format('llll')}>{moment(data.last_modified).fromNow()}</span>\n          </td>\n          <td>\n            <Dropdown isOpen={this.state.isOpMenuOpen} toggle={this.toggleOpMenu}>\n              <DropdownToggle\n                tag=\"i\"\n                className=\"sf-dropdown-toggle fa fa-ellipsis-v ml-0\"\n                title={gettext('More Operations')}\n                data-toggle=\"dropdown\"\n                aria-expanded={this.state.isOpMenuOpen}\n              />\n              <div className={this.state.isOpMenuOpen ? '' : 'd-none'} onClick={this.toggleOpMenu}>\n                <div className=\"mobile-operation-menu-bg-layer\"></div>\n                <div className=\"mobile-operation-menu\">\n                  <DropdownItem className=\"mobile-menu-item\" onClick={this.onToggleStarRepo}>{this.state.isStarred ? gettext('Unstar') : gettext('Star')}</DropdownItem>\n                  {(isPro && data.is_admin) && <DropdownItem className=\"mobile-menu-item\" onClick={this.share}>{gettext('Share')}</DropdownItem>}\n                  <DropdownItem className=\"mobile-menu-item\" onClick={this.leaveShare}>{gettext('Leave Share')}</DropdownItem>\n                  {enableMonitorRepo && <DropdownItem className=\"mobile-menu-item\" onClick={data.monitored ? this.unwatchFileChanges : this.watchFileChanges}>{data.monitored ? gettext('Unwatch File Changes') : gettext('Watch File Changes')}</DropdownItem>}\n                </div>\n              </div>\n            </Dropdown>\n          </td>\n        </tr>\n        {this.state.isShowSharedDialog && (\n          <ModalPotal>\n            <ShareDialog\n              itemType={'library'}\n              itemName={data.repo_name}\n              itemPath={'/'}\n              repoID={data.repo_id}\n              repoEncrypted={data.encrypted}\n              enableDirPrivateShare={true}\n              userPerm={data.permission}\n              isAdmin={true}\n              toggleDialog={this.toggleShareDialog}\n            />\n          </ModalPotal>\n        )}\n      </Fragment>\n    );\n\n    return this.props.isDesktop ? desktopItem : mobileItem;\n  }\n}\n\nItem.propTypes = {\n  isDesktop: PropTypes.bool.isRequired,\n  data: PropTypes.object.isRequired,\n  isItemFreezed: PropTypes.bool.isRequired,\n  freezeItem: PropTypes.func.isRequired,\n  onMonitorRepo: PropTypes.func.isRequired\n};\n\nclass SharedLibraries extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      items: [],\n      sortBy: cookie.load('seafile-repo-dir-sort-by') || 'name', // 'name' or 'time' or 'size'\n      sortOrder: cookie.load('seafile-repo-dir-sort-order') || 'asc', // 'asc' or 'desc'\n      isSortOptionsDialogOpen: false\n    };\n  }\n\n  componentDidMount() {\n    seafileAPI.listRepos({type:'shared'}).then((res) => {\n      let repoList = res.data.repos.map((item) => {\n        return new Repo(item);\n      });\n      this.setState({\n        loading: false,\n        items: Utils.sortRepos(repoList, this.state.sortBy, this.state.sortOrder)\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  sortItems = (sortBy, sortOrder) => {\n    cookie.save('seafile-repo-dir-sort-by', sortBy);\n    cookie.save('seafile-repo-dir-sort-order', sortOrder);\n    this.setState({\n      sortBy: sortBy,\n      sortOrder: sortOrder,\n      items: Utils.sortRepos(this.state.items, sortBy, sortOrder)\n    });\n  };\n\n  toggleSortOptionsDialog = () => {\n    this.setState({\n      isSortOptionsDialogOpen: !this.state.isSortOptionsDialogOpen\n    });\n  };\n\n  onMonitorRepo = (repo, monitored) => {\n    let items = this.state.items.map(item => {\n      if (item.repo_id === repo.repo_id) {\n        item.monitored = monitored;\n      }\n      return item;\n    });\n    this.setState({items: items});\n  };\n\n  render() {\n    return (\n      <Fragment>\n        <div className=\"main-panel-center\">\n          <div className=\"cur-view-container\">\n            <div className=\"cur-view-path\">\n              <h3 className=\"sf-heading m-0\">{gettext('Shared with me')}</h3>\n              {(!Utils.isDesktop() && this.state.items.length > 0) && <span className=\"sf3-font sf3-font-sort action-icon\" onClick={this.toggleSortOptionsDialog}></span>}\n            </div>\n            <div className=\"cur-view-content\">\n              <Content\n                loading={this.state.loading}\n                errorMsg={this.state.errorMsg}\n                items={this.state.items}\n                sortBy={this.state.sortBy}\n                sortOrder={this.state.sortOrder}\n                sortItems={this.sortItems}\n                onMonitorRepo={this.onMonitorRepo}\n              />\n            </div>\n          </div>\n        </div>\n        {this.state.isSortOptionsDialogOpen &&\n        <SortOptionsDialog\n          toggleDialog={this.toggleSortOptionsDialog}\n          sortBy={this.state.sortBy}\n          sortOrder={this.state.sortOrder}\n          sortItems={this.sortItems}\n        />\n        }\n      </Fragment>\n    );\n  }\n}\n\nexport default SharedLibraries;\n","import React, { Component, Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport moment from 'moment';\nimport { Link } from '@gatsbyjs/reach-router';\nimport { gettext, siteRoot } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../../components/toast';\nimport Loading from '../../components/loading';\nimport EmptyTip from '../../components/empty-tip';\n\nclass Content extends Component {\n\n  render() {\n    const { loading, errorMsg, items } = this.props;\n\n    const emptyTip = (\n      <EmptyTip>\n        <h2>{gettext('No libraries have been shared with you')}</h2>\n        <p>{gettext('No libraries have been shared with you from other servers.')}</p>\n      </EmptyTip>\n    );\n\n    if (loading) {\n      return <Loading />;\n    } else if (errorMsg) {\n      return <p className=\"error text-center\">{errorMsg}</p>;\n    } else {\n      const table = (\n        <table>\n          <thead>\n            <tr>\n              <th width=\"4%\"></th>\n              <th width=\"20%\">{gettext('Name')}</th>\n              <th width=\"20%\">{gettext('Shared by')}</th>\n              <th width=\"26%\">{gettext('At server')}</th>\n              <th width=\"20%\">{gettext('Time')}</th>\n              <th width=\"10%\">{/* operations */}</th>\n            </tr>\n          </thead>\n          <tbody>\n            {items.map((item, index) => {\n              return <Item\n                key={index}\n                item={item}\n                leaveShare={this.props.leaveShare}\n              />;\n            })}\n          </tbody>\n        </table>\n      );\n\n      return items.length ? table : emptyTip;\n    }\n  }\n}\n\nContent.propTypes = {\n  loading: PropTypes.bool.isRequired,\n  errorMsg: PropTypes.string.isRequired,\n  items: PropTypes.array.isRequired,\n  leaveShare: PropTypes.func.isRequired,\n};\n\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOpIconShown: false\n    };\n  }\n\n  handleMouseOver = () => {\n    this.setState({\n      isOpIconShown: true\n    });\n  };\n\n  handleMouseOut = () => {\n    this.setState({\n      isOpIconShown: false\n    });\n  };\n\n  leaveShare = (e) => {\n    e.preventDefault();\n    this.props.leaveShare(this.props.item);\n  };\n\n  render() {\n    const item = this.props.item;\n    const { isOpIconShown } = this.state;\n\n    item.icon_url = Utils.getLibIconUrl(item);\n    item.icon_title = Utils.getLibIconTitle(item);\n\n    let shareRepoUrl =`${siteRoot}remote-library/${this.props.item.provider_id}/${this.props.item.repo_id}/${Utils.encodePath(this.props.item.repo_name)}/`;\n    return (\n      <tr onMouseOver={this.handleMouseOver} onMouseOut={this.handleMouseOut} onFocus={this.handleMouseOver}>\n        <td><img src={item.icon_url} title={item.icon_title} alt={item.icon_title} width=\"24\" /></td>\n        <td><Link to={shareRepoUrl}>{item.repo_name}</Link></td>\n        <td>{item.from_user}</td>\n        <td>{item.from_server_url}</td>\n        <td title={moment(item.last_modified).format('llll')}>{moment(item.ctime).fromNow()}</td>\n        <td>\n          <a href=\"#\" role=\"button\" className={`action-icon sf2-icon-x3 ${isOpIconShown ? '' : 'invisible'}`} title={gettext('Leave Share')} aria-label={gettext('Leave Share')} onClick={this.leaveShare}></a>\n        </td>\n      </tr>\n    );\n  }\n}\n\nItem.propTypes = {\n  item: PropTypes.object.isRequired,\n  leaveShare: PropTypes.func.isRequired,\n};\n\nclass SharedWithOCM extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      items: []\n    };\n  }\n\n  componentDidMount() {\n    seafileAPI.listOCMSharesReceived().then((res) => {\n      this.setState({\n        loading: false,\n        items: res.data.ocm_share_received_list\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  leaveShare = (item) => {\n    const { id, repo_name } = item;\n    seafileAPI.deleteOCMShareReceived(id).then((res) => {\n      let items = this.state.items.filter(item => {\n        return item.id != id;\n      });\n      this.setState({items: items});\n      toaster.success(gettext('Successfully unshared {name}').replace('{name}', repo_name));\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  render() {\n    return (\n      <Fragment>\n        <div className=\"main-panel-center\">\n          <div className=\"cur-view-container\">\n            <div className=\"cur-view-path\">\n              <h3 className=\"sf-heading m-0\">{gettext('Shared from other servers')}</h3>\n            </div>\n            <div className=\"cur-view-content\">\n              <Content\n                loading={this.state.loading}\n                errorMsg={this.state.errorMsg}\n                items={this.state.items}\n                leaveShare={this.leaveShare}\n              />\n            </div>\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nexport default SharedWithOCM;\n","import React, { Component, Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport moment from 'moment';\nimport { gettext, siteRoot } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../../components/toast';\nimport Loading from '../../components/loading';\nimport EmptyTip from '../../components/empty-tip';\n\nclass OCMViaWebdav extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      shareID: '',\n      path: '',\n      items: [],\n      errorMsg: '',\n    };\n  }\n\n  componentDidMount() {\n    this.getAllReceivedShares();\n  }\n\n  getAllReceivedShares = () => {\n    const url = seafileAPI.server + '/ocm-via-webdav/received-shares/';\n    seafileAPI.req.get(url).then((res) => {\n      this.setState({\n        loading: false,\n        shareID: '',\n        path: '',\n        items: res.data.received_share_list,\n      });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  leaveShare = (item) => {\n    const { id, name } = item;\n    const url = seafileAPI.server + '/ocm-via-webdav/received-shares/' + id + '/';\n    seafileAPI.req.delete(url).then((res) => {\n      let items = this.state.items.filter(item => {\n        return item.id != id;\n      });\n      this.setState({items: items});\n      toaster.success(gettext('Successfully unshared {name}').replace('{name}', name));\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  openFolder = (item) => {\n\n    this.setState({\n      loading: true,\n    });\n\n    const url = seafileAPI.server + '/ocm-via-webdav/received-shares/' + item.id + '/?path=' + item.path;\n    seafileAPI.req.get(url).then((res) => {\n      this.setState({\n        loading: false,\n        shareID: item.id,\n        path: res.data.parent_dir,\n        items: res.data.received_share_list,\n      });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  onPathClick = (path) => {\n\n    this.setState({\n      loading: true,\n    });\n\n    const url = seafileAPI.server + '/ocm-via-webdav/received-shares/' + this.state.shareID + '/?path=' + path;\n    seafileAPI.req.get(url).then((res) => {\n      this.setState({\n        loading: false,\n        items: res.data.received_share_list,\n        path: res.data.parent_dir,\n      });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  render() {\n    return (\n      <Fragment>\n        <div className=\"main-panel-center\">\n          <div className=\"cur-view-container\">\n            <div className=\"cur-view-path align-items-center\">\n              <DirPath\n                shareID={this.state.shareID}\n                currentPath={this.state.path}\n                onPathClick={this.onPathClick}\n                getAllReceivedShares={this.getAllReceivedShares}\n              />\n            </div>\n            <div className=\"cur-view-content\">\n              <Content\n                loading={this.state.loading}\n                errorMsg={this.state.errorMsg}\n                items={this.state.items}\n                path={this.state.path}\n                leaveShare={this.leaveShare}\n                openFolder={this.openFolder}\n              />\n            </div>\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\n\nclass Content extends Component {\n\n  static propTypes = {\n    loading: PropTypes.bool.isRequired,\n    errorMsg: PropTypes.string.isRequired,\n    items: PropTypes.array.isRequired,\n    path: PropTypes.string.isRequired,\n  };\n\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    const { loading, errorMsg, items, path } = this.props;\n    const emptyTip = (\n      <EmptyTip>\n        <h2>{gettext('No libraries have been shared with you')}</h2>\n        <p>{gettext('No libraries have been shared with you from other servers.')}</p>\n      </EmptyTip>\n    );\n\n    if (loading) {\n      return <Loading />;\n    } else if (errorMsg) {\n      return <p className=\"error text-center\">{errorMsg}</p>;\n    } else {\n      const table = (\n        <table>\n          <thead>\n            <tr>\n              <th width=\"5%\"></th>\n              <th width=\"30%\">{gettext('Name')}</th>\n              <th width=\"35%\">{gettext('Shared By')}</th>\n              <th width=\"20%\">{gettext('Time')}</th>\n              <th width=\"5%\">{/* operations */}</th>\n              <th width=\"5%\">{/* operations */}</th>\n            </tr>\n          </thead>\n          <tbody>\n            {items.map((item, index) => {\n              return <Item\n                key={index}\n                item={item}\n                path={path}\n                leaveShare={this.props.leaveShare}\n                openFolder={this.props.openFolder}\n              />;\n            })}\n          </tbody>\n        </table>\n      );\n\n      return items.length ? table : emptyTip;\n    }\n  }\n}\n\nContent.propTypes = {\n  data: PropTypes.object.isRequired,\n  loading: PropTypes.bool.isRequired,\n  errorMsg: PropTypes.string.isRequired,\n  items: PropTypes.array.isRequired,\n  path: PropTypes.string.isRequired,\n  leaveShare: PropTypes.func.isRequired,\n  openFolder: PropTypes.func.isRequired,\n};\n\nclass Item extends Component {\n\n  static propTypes = {\n    item: PropTypes.object.isRequired\n  };\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOpIconShown: false\n    };\n  }\n\n  handleMouseOver = () => {\n    this.setState({\n      isOpIconShown: true\n    });\n  };\n\n  handleMouseOut = () => {\n    this.setState({\n      isOpIconShown: false\n    });\n  };\n\n  downloadFile = () => {\n    let downloadUrl = siteRoot + 'ocm-via-webdav/download-received-file/?share_id=' + this.props.item.id + '&path=' + this.props.item.path;\n    window.location.href = downloadUrl;\n  };\n\n  leaveShare = (e) => {\n    e.preventDefault();\n    this.props.leaveShare(this.props.item);\n  };\n\n  openFolder = (e) => {\n    e.preventDefault();\n    this.props.openFolder(this.props.item);\n  };\n\n  render() {\n    const item = this.props.item;\n    const { isOpIconShown } = this.state;\n\n    if (item.is_dir) {\n      item.icon_url = Utils.getFolderIconUrl();\n    } else {\n      item.icon_url = Utils.getFileIconUrl(item.name);\n    }\n    return (\n      <tr onMouseOver={this.handleMouseOver} onMouseOut={this.handleMouseOut}>\n        <td><img src={item.icon_url} width=\"24\" alt=\"\" /></td>\n        <td>\n          {item.is_dir ? <a href=\"#\" onClick={this.openFolder}>{item.name}</a> : item.name}\n        </td>\n        <td>{item.shared_by}</td>\n        <td title={moment(item.last_modified).format('llll')}>{moment(item.ctime).fromNow()}</td>\n        <td>{item.is_dir ? '' : <a href=\"#\" className={`action-icon sf2-icon-download ${isOpIconShown ? '' : 'invisible'}`} title={gettext('Download')} onClick={this.downloadFile}></a>}\n        </td>\n        <td>{this.props.path ? '' : <a href=\"#\" className={`action-icon sf2-icon-x3 ${isOpIconShown ? '' : 'invisible'}`} title={gettext('Leave Share')} onClick={this.leaveShare}></a>}\n        </td>\n      </tr>\n    );\n  }\n}\n\nItem.propTypes = {\n  item: PropTypes.object.isRequired,\n  path: PropTypes.string.isRequired,\n  leaveShare: PropTypes.func.isRequired,\n  openFolder: PropTypes.func.isRequired,\n};\n\nclass DirPath extends React.Component {\n\n  static propTypes = {\n    currentPath: PropTypes.string.isRequired,\n    onPathClick: PropTypes.func.isRequired,\n    getAllReceivedShares: PropTypes.func.isRequired,\n  };\n\n  constructor(props) {\n    super(props);\n    this.state = {\n    };\n  }\n\n  onPathClick = (e) => {\n    let path = Utils.getEventData(e, 'path');\n    this.props.onPathClick(path);\n  };\n\n  turnPathToLink = (path) => {\n    path = path.slice(1, path.length - 1);\n    let pathList = path.split('/');\n    let nodePath = '';\n    let pathElem = pathList.map((item, index) => {\n      if (index === (pathList.length - 1)) {\n        return (\n          <Fragment key={index}>\n            <span className=\"path-split\">/</span>\n            <span className=\"path-file-name\">{item}</span>\n          </Fragment>\n        );\n      } else {\n        if (index === 0) {\n          nodePath = '/';\n        } else {\n          nodePath += item + '/';\n        }\n        return (\n          <Fragment key={index} >\n            <span className=\"path-split\">/</span>\n            <a className=\"path-link\" data-path={nodePath} onClick={this.onPathClick}>{item}</a>\n          </Fragment>\n        );\n      }\n    });\n    return pathElem;\n  };\n\n  render() {\n    let pathElem = this.turnPathToLink(this.props.currentPath);\n    return (\n      <div className=\"path-container\">\n        <a href=\"#\" onClick={this.props.getAllReceivedShares}>{gettext('All')}</a>\n        {pathElem}\n      </div>\n    );\n  }\n}\n\nDirPath.propTypes = {\n  shareID: PropTypes.string.isRequired,\n  currentPath: PropTypes.string.isRequired,\n  onPathClick: PropTypes.func.isRequired,\n  getAllReceivedShares: PropTypes.func.isRequired,\n};\n\nexport default OCMViaWebdav;\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport Account from '../../components/common/account';\n\nconst propTypes = {\n  children: PropTypes.object\n};\n\nclass MainPanelTopbar extends Component {\n\n  render() {\n    return (\n      <div className={`main-panel-north ${this.props.children ? 'border-left-show' : ''}`}>\n        <div className=\"cur-view-toolbar\">\n          <span className=\"sf2-icon-menu side-nav-toggle hidden-md-up d-md-none\" title=\"Side Nav Menu\"></span>\n          <div className=\"operation\">\n            {this.props.children}\n          </div>\n        </div>\n        <div className=\"common-toolbar\">\n          <Account isAdminPanel={false} />\n        </div>\n      </div>\n    );\n  }\n}\n\nMainPanelTopbar.propTypes = propTypes;\n\nexport default MainPanelTopbar;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Link } from '@gatsbyjs/reach-router';\nimport { siteRoot, gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\n\nconst propTypes = {\n  repoName: PropTypes.string.isRequired,\n  currentPath: PropTypes.string.isRequired,\n  onPathClick: PropTypes.func.isRequired,\n  onTabNavClick: PropTypes.func.isRequired,\n  repoID: PropTypes.string.isRequired,\n};\n\nclass DirPath extends React.Component {\n\n  onPathClick = (e) => {\n    let path = Utils.getEventData(e, 'path');\n    this.props.onPathClick(path);\n  };\n\n  turnPathToLink = (path) => {\n    path = path[path.length - 1] === '/' ? path.slice(0, path.length - 1) : path;\n    let pathList = path.split('/');\n    let nodePath = '';\n    let pathElem = pathList.map((item, index) => {\n      if (item === '') {\n        return null;\n      }\n      if (index === (pathList.length - 1)) {\n        return (\n          <Fragment key={index}>\n            <span className=\"path-split\">/</span>\n            <span className=\"path-file-name\">{item}</span>\n          </Fragment>\n        );\n      } else {\n        nodePath += '/' + item;\n        return (\n          <Fragment key={index} >\n            <span className=\"path-split\">/</span>\n            <a className=\"path-link\" data-path={nodePath} onClick={this.onPathClick}>{item}</a>\n          </Fragment>\n        );\n      }\n    });\n    return pathElem;\n  };\n\n  render() {\n    let { currentPath, repoName } = this.props;\n    let pathElem = this.turnPathToLink(currentPath);\n\n    return (\n      <div className=\"path-container\">\n        <Link to={siteRoot + 'shared-with-ocm/'} className=\"normal\" onClick={(e) => this.props.onTabNavClick('shared-with-ocm')}>{gettext('All')}</Link>\n        <span className=\"path-split\">/</span>\n        {(currentPath === '/' || currentPath === '') ?\n          <span className=\"path-repo-name\">{repoName}</span>:\n          <a className=\"path-link\" data-path=\"/\" onClick={this.onPathClick}>{repoName}</a>\n        }\n        {pathElem}\n      </div>\n    );\n  }\n}\n\nDirPath.propTypes = propTypes;\n\nexport default DirPath;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Link } from '@gatsbyjs/reach-router';\nimport moment from 'moment';\nimport { gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport Loading from '../../components/loading';\n\nclass DirentItem extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOpIconShown: false\n    };\n  }\n\n  handleMouseOver = () => {\n    this.setState({\n      isOpIconShown: true\n    });\n  };\n\n  handleMouseOut = () => {\n    this.setState({\n      isOpIconShown: false\n    });\n  };\n\n  openFolder = () => {\n    this.props.openFolder(this.props.dirent);\n  };\n\n  downloadDirent = (e) => {\n    e.preventDefault();\n    this.props.downloadDirent(this.props.dirent);\n  };\n\n  render () {\n    let { isOpIconShown } = this.state;\n    let { dirent } = this.props;\n    let iconUrl = Utils.getDirentIcon(dirent);\n\n    return (\n      <Fragment>\n        <tr onMouseEnter={this.handleMouseOver} onMouseLeave={this.handleMouseOut}>\n          <td className=\"text-center\"><img src={iconUrl} width=\"24\" alt='' /></td>\n          <td>\n            {dirent.is_file ?\n              dirent.name :\n              <Link to=\"#\" onClick={this.openFolder}>{dirent.name}</Link>\n            }\n          </td>\n          <td>\n            {isOpIconShown && dirent.is_file &&\n            <a href=\"#\" className=\"op-icon sf2-icon-download\" title={gettext('Download')} onClick={this.downloadDirent}></a>\n            }\n          </td>\n          <td>{Utils.bytesToSize(dirent.size)}</td>\n          <td>{moment(dirent.mtime).fromNow()}</td>\n        </tr>\n      </Fragment>\n    );\n  }\n}\n\nDirentItem.propTypes = {\n  dirent: PropTypes.object.isRequired,\n  openFolder: PropTypes.func.isRequired,\n  deleteDirent: PropTypes.func.isRequired,\n  downloadDirent: PropTypes.func.isRequired,\n};\n\nclass DirContent extends React.Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    let { loading, errorMsg, direntList } = this.props;\n\n    if (loading) {\n      return <Loading />;\n    }\n\n    if (errorMsg) {\n      return <p className=\"error text-center mt-4\">{errorMsg}</p>;\n    }\n\n    return (\n      <Fragment>\n        <table className=\"table-hover\">\n          <thead>\n            <tr>\n              <th width=\"5%\">{/*icon*/}</th>\n              <th width=\"55%\">{gettext('Name')}</th>\n              <th width=\"10%\">{/*operation*/}</th>\n              <th width=\"15%\">{gettext('Size')}</th>\n              <th width=\"15%\">{gettext('Last Update')}</th>\n            </tr>\n          </thead>\n          <tbody>\n            {direntList.map((dirent, index) => {\n              return <DirentItem\n                key={index}\n                dirent={dirent}\n                openFolder={this.props.openFolder}\n                deleteDirent={this.props.deleteDirent}\n                downloadDirent={this.props.downloadDirent}\n              />;\n            })}\n          </tbody>\n        </table>\n      </Fragment>\n    );\n  }\n}\n\nDirContent.propTypes =  {\n  loading: PropTypes.bool.isRequired,\n  errorMsg: PropTypes.string.isRequired,\n  direntList: PropTypes.array.isRequired,\n  openFolder: PropTypes.func.isRequired,\n  deleteDirent: PropTypes.func.isRequired,\n  downloadDirent: PropTypes.func.isRequired,\n};\n\nexport default DirContent;\n","import React, { Component, Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Button } from 'reactstrap';\nimport axios from 'axios';\nimport { Utils } from '../../utils/utils';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { siteRoot, gettext } from '../../utils/constants';\nimport toaster from '../../components/toast';\nimport MainPanelTopbar from './remote-dir-topbar';\nimport DirPathBar from './remote-dir-path';\nimport DirContent from './remote-dir-content';\n\nclass Dirent {\n  constructor(obj) {\n    this.name = obj.name;\n    this.mtime = obj.mtime;\n    this.size = obj.size;\n    this.is_file = obj.type === 'file';\n  }\n\n  isDir() {\n    return !this.is_file;\n  }\n}\n\nclass DirView extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      repoName: '',\n      path: '',\n      direntList: [],\n      isNewFolderDialogOpen: false,\n      userPerm: '',\n    };\n    this.fileInput = React.createRef();\n  }\n\n  componentDidMount () {\n    this.loadDirentList('/');\n  }\n\n  onPathClick = (path) => {\n    this.loadDirentList(path);\n  };\n\n  openFolder = (dirent) => {\n    let direntPath = Utils.joinPath(this.state.path, dirent.name);\n    if (!dirent.is_file) {\n      this.loadDirentList(direntPath);\n    }\n  };\n\n  loadDirentList = (path) => {\n    const { providerID, repoID } = this.props;\n    seafileAPI.listOCMRepoDir(providerID, repoID, path).then(res => {\n      const { repo_name: repoName, dirent_list, user_perm } = res.data;\n      let direntList = [];\n      dirent_list.forEach(item => {\n        let dirent = new Dirent(item);\n        direntList.push(dirent);\n      });\n      this.setState({\n        loading: false,\n        repoName: repoName,\n        direntList: direntList,\n        path: path,\n        userPerm: user_perm,\n      }, () => {\n        let url =`${siteRoot}remote-library/${providerID}/${repoID}/${repoName}${Utils.encodePath(path)}`;\n        window.history.replaceState({url: url, path: path}, path, url);\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  };\n\n  downloadDirent = (dirent) => {\n    let path = Utils.joinPath(this.state.path, dirent.name);\n    seafileAPI.getOCMRepoDownloadURL(this.props.providerID, this.props.repoID, path).then(res => {\n      location.href = res.data;\n    }).catch((err) => {\n      let errMessage = Utils.getErrorMsg(err);\n      toaster.danger(errMessage);\n    });\n  };\n\n  openFileInput = () => {\n    this.fileInput.current.click();\n  };\n\n  onFileInputChange = () => {\n    if (!this.fileInput.current.files.length) {\n      return;\n    }\n    const file = this.fileInput.current.files[0];\n\n    let { path } = this.state;\n    let { providerID, repoID } = this.props;\n    seafileAPI.getOCMRepoUploadURL(providerID, repoID, path).then(res => {\n      let formData = new FormData();\n      formData.append('parent_dir', path);\n      formData.append('file', file);\n      axios.post(res.data, formData).then(res => {\n        const fileObj = res.data[0];\n        let newDirent = new Dirent({\n          'type': 'file',\n          'name': fileObj.name,\n          'size': fileObj.size,\n          'mtime': (new Date()).getTime()\n        });\n        let direntList = this.state.direntList;\n        const dirs = direntList.filter(item => { return !item.is_file; });\n        direntList.splice(dirs.length, 0, newDirent);\n        this.setState({\n          direntList: direntList\n        });\n      });\n    }).catch((err) => {\n      let errMessage = Utils.getErrorMsg(err);\n      toaster.danger(errMessage);\n    });\n  };\n\n  render() {\n    const { loading, errorMsg,\n      repoName, direntList, path, userPerm } = this.state;\n    const { repoID } = this.props;\n\n    return (\n      <Fragment>\n        <MainPanelTopbar>\n          <Fragment>\n            <input className=\"d-none\" type=\"file\" onChange={this.onFileInputChange} ref={this.fileInput} />\n            {userPerm === 'rw' &&\n              <Button className=\"operation-item\" onClick={this.openFileInput}>{gettext('Upload')}</Button>\n            }\n          </Fragment>\n        </MainPanelTopbar>\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <div className=\"cur-view-path align-items-center\">\n              <DirPathBar\n                repoID={repoID}\n                repoName={repoName}\n                currentPath={path}\n                onPathClick={this.onPathClick}\n                onTabNavClick={this.props.onTabNavClick}\n              />\n            </div>\n            <div className=\"cur-view-content\">\n              <DirContent\n                loading={loading}\n                errorMsg={errorMsg}\n                direntList={direntList}\n                openFolder={this.openFolder}\n                deleteDirent={this.deleteDirent}\n                downloadDirent={this.downloadDirent}\n              />\n            </div>\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nDirView.propTypes = {\n  repoID: PropTypes.string,\n  providerID: PropTypes.string,\n  onTabNavClick: PropTypes.func.isRequired,\n};\n\nexport default DirView;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Modal, ModalHeader, Input, ModalBody, ModalFooter, Form, FormGroup, Label, Alert } from 'reactstrap';\nimport { gettext, enableEncryptedLibrary, repoPasswordMinLength, storages, libraryTemplates } from '../../utils/constants';\nimport { SeahubSelect } from '../common/select';\n\nconst propTypes = {\n  libraryType: PropTypes.string.isRequired,\n  onCreateRepo: PropTypes.func.isRequired,\n  onCreateToggle: PropTypes.func.isRequired,\n};\n\nclass CreateRepoDialog extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      repoName: '',\n      disabled: true,\n      encrypt: false,\n      password1: '',\n      password2: '',\n      errMessage: '',\n      permission: 'rw',\n      storage_id: storages.length ? storages[0].id : '',\n      library_template: libraryTemplates.length ? libraryTemplates[0] : '',\n      isSubmitBtnActive: false,\n    };\n  }\n\n  handleRepoNameChange = (e) => {\n    if (!e.target.value.trim()) {\n      this.setState({isSubmitBtnActive: false});\n    } else {\n      this.setState({isSubmitBtnActive: true});\n    }\n\n    this.setState({repoName: e.target.value});\n  };\n\n  handlePassword1Change = (e) => {\n    this.setState({password1: e.target.value});\n  };\n\n  handlePassword2Change = (e) => {\n    this.setState({password2: e.target.value});\n  };\n\n  handleSubmit = () => {\n    let isValid = this.validateInputParams();\n    if (isValid) {\n      let repoData = this.prepareRepoData();\n      if (this.props.libraryType === 'department') {\n        this.props.onCreateRepo(repoData, 'department');\n        return;\n      }\n      this.props.onCreateRepo(repoData);\n    }\n  };\n\n  handleKeyDown = (e) => {\n    if (e.key === 'Enter') {\n      this.handleSubmit();\n      e.preventDefault();\n    }\n  };\n\n  toggle = () => {\n    this.props.onCreateToggle();\n  };\n\n  validateInputParams() {\n    let errMessage = '';\n    let repoName = this.state.repoName.trim();\n    if (!repoName.length) {\n      errMessage = gettext('Name is required');\n      this.setState({errMessage: errMessage});\n      return false;\n    }\n    if (repoName.indexOf('/') > -1) {\n      errMessage = gettext('Name should not include \\'/\\'.');\n      this.setState({errMessage: errMessage});\n      return false;\n    }\n    if (this.state.encrypt) {\n      let password1 = this.state.password1.trim();\n      let password2 = this.state.password2.trim();\n      if (!password1.length) {\n        errMessage = gettext('Please enter password');\n        this.setState({errMessage: errMessage});\n        return false;\n      }\n      if (!password2.length) {\n        errMessage = gettext('Please enter the password again');\n        this.setState({errMessage: errMessage});\n        return false;\n      }\n      if (password1.length < repoPasswordMinLength) {\n        errMessage = gettext('Password is too short');\n        this.setState({errMessage: errMessage});\n        return false;\n      }\n      if (password1 !== password2) {\n        errMessage = gettext('Passwords don\\'t match');\n        this.setState({errMessage: errMessage});\n        return false;\n      }\n    }\n    return true;\n  }\n\n  onPermissionChange = (e) => {\n    let permission = e.target.value;\n    this.setState({permission: permission});\n  };\n\n  handleStorageInputChange = (selectedItem) => {\n    this.setState({storage_id: selectedItem.value});\n  };\n\n  handlelibraryTemplatesInputChange = (selectedItem) => {\n    this.setState({library_template: selectedItem.value});\n  };\n\n  onEncrypted = (e) => {\n    let isChecked = e.target.checked;\n    this.setState({\n      encrypt: isChecked,\n      disabled: !isChecked\n    });\n  };\n\n  prepareRepoData = () => {\n    let libraryType = this.props.libraryType;\n\n    let repoName = this.state.repoName.trim();\n    let password = this.state.encrypt ? this.state.password1 : '';\n    let permission = this.state.permission;\n\n    let repo = null;\n    if (libraryType === 'mine' || libraryType === 'public') {\n      repo = {\n        name: repoName,\n        passwd: password\n      };\n    }\n    if (libraryType === 'group') {\n      repo = {\n        repo_name: repoName,\n        password: password,\n        permission: permission,\n      };\n    }\n    if (libraryType === 'department') {\n      repo = {\n        repo_name: repoName,\n        passwd: password,\n      };\n    }\n\n    const storage_id = this.state.storage_id;\n    if (storage_id) {\n      repo.storage_id = storage_id;\n    }\n\n    const library_template = this.state.library_template;\n    if (library_template) {\n      repo.library_template = library_template;\n    }\n\n    return repo;\n  };\n\n  render() {\n    return (\n      <Modal isOpen={true} toggle={this.toggle} autoFocus={false}>\n        <ModalHeader toggle={this.toggle}>{gettext('New Library')}</ModalHeader>\n        <ModalBody>\n          <Form>\n            <FormGroup>\n              <Label for=\"repoName\">{gettext('Name')}</Label>\n              <Input\n                id=\"repoName\"\n                onKeyDown={this.handleKeyDown}\n                value={this.state.repoName}\n                onChange={this.handleRepoNameChange}\n                autoFocus={true}\n              />\n            </FormGroup>\n\n            {libraryTemplates.length > 0 && (\n              <FormGroup>\n                <Label>{gettext('Template')}</Label>\n                <SeahubSelect\n                  defaultValue={{value: libraryTemplates[0], label: libraryTemplates[0]}}\n                  options={libraryTemplates.map((item, index) => { return {value: item, label: item}; })}\n                  onChange={this.handlelibraryTemplatesInputChange}\n                />\n              </FormGroup>\n            )}\n\n            {storages.length > 0 && (\n              <FormGroup>\n                <Label>{gettext('Storage Backend')}</Label>\n                <SeahubSelect\n                  defaultValue={{value: storages[0].id, label: storages[0].name}}\n                  options={storages.map((item, index) => { return {value: item.id, label: item.name}; })}\n                  onChange={this.handleStorageInputChange}\n                />\n              </FormGroup>\n            )}\n\n            {this.props.libraryType === 'group' && (\n              <FormGroup>\n                <Label for=\"exampleSelect\">{gettext('Permission')}</Label>\n                <Input type=\"select\" name=\"select\" id=\"exampleSelect\" onChange={this.onPermissionChange} value={this.state.permission}>\n                  <option value='rw'>{gettext('Read-Write')}</option>\n                  <option value='r'>{gettext('Read-Only')}</option>\n                </Input>\n              </FormGroup>\n            )}\n            {enableEncryptedLibrary &&\n              <div>\n                <FormGroup check>\n                  <Input type=\"checkbox\" id=\"encrypt\" onChange={this.onEncrypted} />\n                  <Label for=\"encrypt\">{gettext('Encrypt')}</Label>\n                </FormGroup>\n                {!this.state.disabled &&\n                  <FormGroup>\n                    {/* todo translate */}\n                    <Label for=\"passwd1\">{gettext('Password')}</Label><span className=\"tip\">{' '}{gettext('(at least {placeholder} characters)').replace('{placeholder}', repoPasswordMinLength)}</span>\n                    <Input\n                      id=\"passwd1\"\n                      type=\"password\"\n                      disabled={this.state.disabled}\n                      value={this.state.password1}\n                      onChange={this.handlePassword1Change}\n                      autoComplete=\"new-password\"\n                    />\n                  </FormGroup>\n                }\n                {!this.state.disabled &&\n                  <FormGroup>\n                    <Label for=\"passwd2\">{gettext('Password again')}</Label>\n                    <Input\n                      id=\"passwd2\"\n                      type=\"password\"\n                      disabled={this.state.disabled}\n                      value={this.state.password2}\n                      onChange={this.handlePassword2Change}\n                      autoComplete=\"new-password\"\n                    />\n                  </FormGroup>\n                }\n              </div>\n            }\n          </Form>\n          {this.state.errMessage && <Alert color=\"danger\">{this.state.errMessage}</Alert>}\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.toggle}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.handleSubmit} disabled={!this.state.isSubmitBtnActive}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nCreateRepoDialog.propTypes = propTypes;\n\nexport default CreateRepoDialog;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Utils } from '../../utils/utils';\nimport { Link, navigate } from '@gatsbyjs/reach-router';\nimport { siteRoot, gettext } from '../../utils/constants';\nimport ModalPortal from '../modal-portal';\nimport CreateRepoDialog from '../dialog/create-repo-dialog';\nimport { DropdownToggle, Dropdown, DropdownMenu, DropdownItem } from 'reactstrap';\n\nconst propTypes = {\n  libraryType: PropTypes.string.isRequired,\n  onCreateRepo: PropTypes.func.isRequired,\n  onShowSidePanel: PropTypes.func.isRequired,\n};\n\nclass RepoViewToolbar extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isCreateRepoDialogShow: false,\n      isOpen: false,\n    };\n  }\n\n  onCreateRepo = (repo) => {\n    this.props.onCreateRepo(repo);\n    this.onCreateToggle();\n  };\n\n  onCreateToggle = () => {\n    this.setState({isCreateRepoDialogShow: !this.state.isCreateRepoDialogShow});\n  };\n\n  toggleMore = () => {\n    this.setState({ isOpen: !this.state.isOpen });\n  };\n\n  onDropdownToggleKeyDown = (e) => {\n    if (e.key == 'Enter' || e.key == 'Space') {\n      this.toggleMore();\n    }\n  };\n\n  visitDeletedviaKey = (e) => {\n    if (e.key == 'Enter' || e.key == 'Space') {\n      navigate(`${siteRoot}my-libs/deleted/`);\n    }\n  };\n\n  render() {\n    return (\n      <Fragment>\n        <div className=\"cur-view-toolbar\">\n          <span className=\"sf2-icon-menu side-nav-toggle hidden-md-up d-md-none\" title=\"Side Nav Menu\" onClick={this.props.onShowSidePanel}></span>\n          {Utils.isDesktop() ? (\n            <div className=\"operation\">\n              <button className=\"btn btn-secondary operation-item\" title={gettext('New Library')} onClick={this.onCreateToggle}>\n                <i className=\"fas fa-plus-square text-secondary mr-1\"></i>{gettext('New Library')}\n              </button>\n              <Dropdown isOpen={this.state.isOpen} toggle={this.toggleMore}>\n                <DropdownToggle className='btn btn-secondary operation-item' onKeyDown={this.onDropdownToggleKeyDown}>\n                  {gettext('More')}\n                </DropdownToggle>\n                <DropdownMenu>\n                  <DropdownItem className=\"link-dropdown-container\" onKeyDown={this.visitDeletedviaKey}>\n                    <Link className=\"link-dropdown-item\" to={siteRoot + 'my-libs/deleted/'}>{gettext('Deleted Libraries')}</Link>\n                  </DropdownItem>\n                </DropdownMenu>\n              </Dropdown>\n            </div>\n          ) : (\n            <span className=\"sf2-icon-plus mobile-toolbar-icon\" title={gettext('New Library')} onClick={this.onCreateToggle}></span>\n          )}\n        </div>\n        {this.state.isCreateRepoDialogShow && (\n          <ModalPortal>\n            <CreateRepoDialog\n              libraryType={this.props.libraryType}\n              onCreateRepo={this.onCreateRepo}\n              onCreateToggle={this.onCreateToggle}\n            />\n          </ModalPortal>\n        )}\n      </Fragment>\n    );\n  }\n}\n\nRepoViewToolbar.propTypes = propTypes;\n\nexport default RepoViewToolbar;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport moment from 'moment';\nimport { Utils } from '../../utils/utils';\nimport { gettext } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport toaster from '../toast';\nimport '../../css/dirent-detail.css';\n\nconst propTypes = {\n  currentRepo: PropTypes.object.isRequired,\n  closeDetails: PropTypes.func.isRequired,\n};\n\nclass LibDetail extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      fileCount: 0,\n    };\n  }\n\n  componentDidMount() {\n    let repo = this.props.currentRepo;\n    this.getFileCounts(repo);\n  }\n\n  componentWillReceiveProps(nextProps) {\n    if (nextProps.currentRepo.repo_id !== this.props.currentRepo.repo_id) {\n      this.getFileCounts(nextProps.currentRepo);\n    }\n  }\n\n  getFileCounts = (repo) => {\n    seafileAPI.getRepoInfo(repo.repo_id).then(res => {\n      this.setState({fileCount: res.data.file_count});\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  render() {\n    let repo = this.props.currentRepo;\n    let smallIconUrl = Utils.getLibIconUrl(repo);\n    let bigIconUrl = Utils.getLibIconUrl(repo, true);\n\n    return (\n      <div className=\"detail-container\">\n        <div className=\"detail-header\">\n          <div className=\"detail-control sf2-icon-x1\" onClick={this.props.closeDetails}></div>\n          <div className=\"detail-title dirent-title\">\n            <img src={smallIconUrl} width=\"24\" height=\"24\" alt=\"\" />{'  '}\n            <span className=\"name ellipsis\" title={repo.repo_name}>{repo.repo_name}</span>\n          </div>\n        </div>\n        <div className=\"detail-body dirent-info\">\n          <div className=\"img\">\n            <img src={bigIconUrl} height=\"96\"  alt=\"\" />\n          </div>\n          <div className=\"dirent-table-container\">\n            <table className=\"table-thead-hidden\">\n              <thead>\n                <tr><th width=\"35%\"></th><th width=\"65%\"></th></tr>\n              </thead>\n              <tbody>\n                <tr><th>{gettext('Files')}</th><td>{this.state.fileCount}</td></tr>\n                <tr><th>{gettext('Size')}</th><td>{repo.size}</td></tr>\n                <tr><th>{gettext('Last Update')}</th><td>{ moment(repo.last_modified).fromNow()}</td></tr>\n              </tbody>\n            </table>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nLibDetail.propTypes = propTypes;\n\nexport default LibDetail;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter, Form, FormGroup, Label, Input, Alert } from 'reactstrap';\nimport { gettext, enableRepoHistorySetting } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../toast';\n\nconst propTypes = {\n  itemName: PropTypes.string.isRequired,\n  toggleDialog: PropTypes.func.isRequired,\n  repoID: PropTypes.string.isRequired,\n};\n\nclass LibHistorySetting extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      keepDays: -1,\n      expireDays: 30,\n      disabled: true,\n      allHistory: true,\n      noHistory: false,\n      autoHistory: false,\n      errorInfo: ''\n    };\n  }\n\n  componentDidMount() {\n    seafileAPI.getRepoHistoryLimit(this.props.repoID).then(res => {\n      this.setState({\n        keepDays: res.data.keep_days,\n        allHistory: res.data.keep_days < 0 ? true : false,\n        noHistory: res.data.keep_days === 0 ? true : false,\n        autoHistory: res.data.keep_days > 0 ? true : false,\n        disabled: res.data.keep_days > 0 ? false : true,\n        expireDays: res.data.keep_days > 0 ? res.data.keep_days : 30,\n      });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  submit = () => {\n    let days = this.state.keepDays;\n    if (this.state.autoHistory) {\n      days = this.state.expireDays;\n    }\n    let repoID = this.props.repoID;\n    let reg = /^-?\\d+$/;\n    let flag = reg.test(days);\n    if (flag) {\n      let message = gettext('Successfully set library history.');\n      seafileAPI.setRepoHistoryLimit(repoID, days).then(res => {\n        toaster.success(message);\n        this.setState({keepDays: res.data.keep_days});\n        this.props.toggleDialog();\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    } else {\n      this.setState({\n        errorInfo: gettext('Please enter a non-negative integer'),\n      });\n    }\n  };\n\n  handleKeyDown = (e) => {\n    if (e.key === 'Enter') {\n      this.submit();\n      e.preventDefault();\n    }\n  };\n\n  onChange = (e) => {\n    let num = e.target.value;\n    this.setState({\n      keepDays: num,\n      expireDays: num,\n    });\n  };\n\n  setLimitDays = (type) => {\n    if (type === 'allHistory') {\n      this.setState({\n        keepDays: -1,\n        disabled: true\n      });\n    } else if (type === 'noHistory') {\n      this.setState({\n        keepDays: 0,\n        disabled: true\n      });\n    } else {\n      this.setState({\n        disabled: false\n      });\n    }\n\n    this.setState({\n      allHistory: type === 'allHistory' ? true : false,\n      noHistory: type === 'noHistory' ? true : false,\n      autoHistory: type === 'autoHistory' ? true : false,\n    });\n  };\n\n  render() {\n    const itemName = this.props.itemName;\n    return (\n      <Modal isOpen={true}>\n        <ModalHeader toggle={this.props.toggleDialog}>\n          <span className=\"op-target\" title={itemName}>{itemName}</span>{' '}\n          {gettext('History Setting')}\n        </ModalHeader>\n        <ModalBody>\n          <Form>\n            {!enableRepoHistorySetting &&\n              <FormGroup>\n                <Label className=\"error\">{gettext('Setting library history is disabled by Admin.')}</Label>\n              </FormGroup>\n            }\n            <FormGroup check>\n              <Input type=\"radio\" name=\"radio1\" checked={this.state.allHistory} disabled={!enableRepoHistorySetting} onChange={() => {this.setLimitDays('allHistory');}}/>{' '}\n              <Label>{gettext('Keep full history')}</Label>\n            </FormGroup>\n            <FormGroup check>\n              <Input type=\"radio\" name=\"radio1\" checked={this.state.noHistory} disabled={!enableRepoHistorySetting} onChange={() =>{this.setLimitDays('noHistory');}}/>{' '}\n              <Label>{gettext('Don\\'t keep history')}</Label>\n            </FormGroup>\n            <FormGroup check>\n              <Input type=\"radio\" name=\"radio1\" checked={this.state.autoHistory} disabled={!enableRepoHistorySetting} onChange={() =>{this.setLimitDays('autoHistory');}}/>{' '}\n              <Label>{gettext('Only keep a period of history:')}</Label>\n              <Input\n                type=\"text\"\n                className=\"expire-input\"\n                value={this.state.expireDays}\n                onChange={this.onChange}\n                disabled={this.state.disabled}\n                onKeyDown={this.handleKeyDown}\n              />{' '}\n              <Label><span>{gettext('days')}</span></Label>\n            </FormGroup>\n            {this.state.errorInfo && <Alert color=\"danger\">{this.state.errorInfo}</Alert>}\n          </Form>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.props.toggleDialog}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.submit}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nLibHistorySetting.propTypes = propTypes;\n\nexport default LibHistorySetting;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Modal, ModalHeader, ModalBody, ModalFooter, Alert } from 'reactstrap';\nimport { gettext, repoPasswordMinLength } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport toaster from '../toast';\n\nconst propTypes = {\n  repoID: PropTypes.string.isRequired,\n  repoName: PropTypes.string.isRequired,\n  toggleDialog: PropTypes.func.isRequired\n};\n\nclass ChangeRepoPasswordDialog extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      oldPassword: '',\n      newPassword: '',\n      newPasswordAgain: '',\n      submitBtnDisabled: false,\n      errorMsg: ''\n    };\n  }\n\n  handleOldPasswordInputChange = (e) => {\n    this.setState({\n      oldPassword: e.target.value\n    });\n  };\n\n  handleNewPasswordInputChange = (e) => {\n    this.setState({\n      newPassword: e.target.value\n    });\n  };\n\n  handleNewPasswordAgainInputChange = (e) => {\n    this.setState({\n      newPasswordAgain: e.target.value\n    });\n  };\n\n  formSubmit = (e) => {\n    const { oldPassword, newPassword, newPasswordAgain } = this.state;\n    if (!oldPassword) {\n      this.setState({\n        errorMsg: gettext('Please enter the old password')\n      });\n      return false;\n    }\n    if (!newPassword) {\n      this.setState({\n        errorMsg: gettext('Please enter a new password')\n      });\n      return false;\n    }\n    if (newPassword.length < repoPasswordMinLength) {\n      this.setState({\n        errorMsg: gettext('New password is too short')\n      });\n      return false;\n    }\n    if (!newPasswordAgain) {\n      this.setState({\n        errorMsg: gettext('Please enter the new password again')\n      });\n      return false;\n    }\n    if (newPassword != newPasswordAgain) {\n      this.setState({\n        errorMsg: gettext('New passwords don\\'t match')\n      });\n      return false;\n    }\n\n    this.setState({\n      submitBtnDisabled: true\n    });\n    seafileAPI.changeEncryptedRepoPassword(this.props.repoID, oldPassword, newPassword)\n      .then(() => {\n        this.props.toggleDialog();\n        toaster.success(gettext('Successfully changed library password.'));\n      }).catch((error) => {\n        let errorMsg = Utils.getErrorMsg(error);\n        this.setState({\n          errorMsg: errorMsg,\n          submitBtnDisabled: false\n        });\n      });\n  };\n\n\n  render() {\n    const { repoName, toggleDialog } = this.props;\n\n    return (\n      <Modal isOpen={true} centered={true} style={{height: 'auto'}}>\n        <ModalHeader toggle={toggleDialog}>\n          <span>\n            {Utils.generateDialogTitle(gettext('Change Password of Library {placeholder}'), repoName)}\n          </span>\n        </ModalHeader>\n        <ModalBody>\n          <form id=\"repo-change-passwd-form\" action=\"\" method=\"post\">\n            <label htmlFor=\"passwd\">{gettext('Old Password')}</label><br />\n            <input type=\"password\" name=\"old_passwd\" className=\"form-control\" id=\"passwd\" value={this.state.oldPassword} onChange={this.handleOldPasswordInputChange} /><br />\n            <label htmlFor=\"new-passwd\">{gettext('New Password')}</label><span className=\"tip\">{gettext('(at least {placeholder} characters)').replace('{placeholder}', repoPasswordMinLength)}</span><br />\n            <input type=\"password\" name=\"new_passwd\" className=\"form-control\" id=\"new-passwd\" value={this.state.newPassword} onChange={this.handleNewPasswordInputChange} /><br />\n            <label htmlFor=\"new-passwd-again\">{gettext('New Password Again')}</label><br />\n            <input type=\"password\" name=\"new_passwd_again\" className=\"form-control\" id=\"new-passwd-again\" value={this.state.newPasswordAgain} onChange={this.handleNewPasswordAgainInputChange} /><br />\n            {this.state.errorMsg && <Alert color=\"danger\">{this.state.errorMsg}</Alert>}\n          </form>\n        </ModalBody>\n        <ModalFooter>\n          <button className=\"btn btn-primary\" disabled={this.state.submitBtnDisabled} onClick={this.formSubmit}>{gettext('Submit')}</button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nChangeRepoPasswordDialog.propTypes = propTypes;\n\nexport default ChangeRepoPasswordDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Modal, ModalHeader, ModalBody } from 'reactstrap';\nimport { gettext, contactEmail } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\n\nconst propTypes = {\n  repoID: PropTypes.string.isRequired,\n  toggleDialog: PropTypes.func.isRequired,\n};\n\nclass ResetEncryptedRepoPasswordDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      errMessage: '',\n      showLoading: true,\n      showSuccess: false,\n      showError: false,\n    };\n  }\n\n  componentDidMount() {\n    seafileAPI.resetAndSendEncryptedRepoPassword(this.props.repoID).then((res) => {\n      this.setState({showLoading: false});\n      this.setState({showSuccess: true});\n    }).catch((error) => {\n      if (error.response) {\n        this.setState({\n          errMessage: error.response.data.error_msg\n        });\n        this.setState({showLoading: false});\n        this.setState({showError: true});\n      }\n    });\n  }\n\n  render() {\n\n    let user_email = '<strong>' + contactEmail + '</strong>';\n    let message = gettext('New password has been sent to your email {mail}. Please check your mailbox. If you dont receive the password, please check if your email address is properly configured.').replace('{mail}', user_email);\n\n    return (\n      <Modal isOpen={true}  centered={true}>\n        <ModalHeader toggle={this.props.toggleDialog}>\n          {gettext('Reset library password')}\n        </ModalHeader>\n        <ModalBody>\n          {this.state.showLoading && (\n            <span>{gettext('Sending new password...')}</span>\n          )}\n          {this.state.showSuccess && (\n            <div dangerouslySetInnerHTML={{__html:message}} />\n          )}\n          {this.state.showError && (\n            <span className=\"err-message\">{this.state.errMessage}</span>\n          )}\n        </ModalBody>\n      </Modal>\n    );\n  }\n}\n\nResetEncryptedRepoPasswordDialog.propTypes = propTypes;\n\nexport default ResetEncryptedRepoPasswordDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Modal, ModalHeader, ModalBody, ModalFooter } from 'reactstrap';\nimport CreatableSelect from 'react-select/creatable';\nimport { gettext } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport Loading from '../loading';\nimport toaster from '../toast';\n\nconst propTypes = {\n  repoID: PropTypes.string.isRequired,\n  repoName: PropTypes.string.isRequired,\n  toggleDialog: PropTypes.func.isRequired\n};\n\nclass LabelRepoStateDialog extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      isLoading: true,\n      existingLabels: null,\n      errorMsg: '',\n      submitBtnDisabled: false\n    };\n  }\n\n  componentDidMount() {\n    seafileAPI.getAllRepoSnapshotLabels().then((res) => {\n      this.setState({\n        isLoading: false,\n        existingLabels: res.data,\n        errorMsg: ''\n      });\n    }).catch((error) => {\n      let errorMsg = Utils.getErrorMsg(error);\n      this.setState({\n        isLoading: false,\n        errorMsg: errorMsg\n      });\n    });\n  }\n\n  handleInputChange = (value) => {\n    this.setState({\n      inputValue: value\n    });\n  };\n\n  formSubmit = () => {\n    const inputValue = this.state.inputValue;\n\n    if (!inputValue || !inputValue.length) { // undefined or []\n      this.setState({\n        formErrorMsg: gettext('It is required.')\n      });\n      return;\n    }\n\n    this.setState({\n      submitBtnDisabled: true\n    });\n\n    const {repoID, repoName} = this.props;\n    const labels = inputValue.map((item, index) => item.value).join(',');\n    seafileAPI.addNewRepoLabels(repoID, labels).then((res) => {\n      const msg = gettext('Successfully added label(s) for library {placeholder}').replace('{placeholder}', repoName);\n      toaster.success(msg);\n      this.props.toggleDialog();\n    }).catch((error) => {\n      let errorMsg = Utils.getErrorMsg(error);\n      this.setState({\n        formErrorMsg: errorMsg,\n        submitBtnDisabled: false\n      });\n    });\n  };\n\n  render() {\n    return (\n      <Modal isOpen={true} toggle={this.props.toggleDialog}>\n        <ModalHeader toggle={this.props.toggleDialog}>{gettext('Label Current State')}</ModalHeader>\n        <ModalBody>\n          <Content data={this.state} handleChange={this.handleInputChange} />\n        </ModalBody>\n        {this.state.existingLabels && (\n          <ModalFooter>\n            <button className=\"btn btn-secondary\" onClick={this.props.toggleDialog}>{gettext('Cancel')}</button>\n            <button className=\"btn btn-primary\" disabled={this.state.submitBtnDisabled} onClick={this.formSubmit}>{gettext('Submit')}</button>\n          </ModalFooter>\n        )}\n      </Modal>\n    );\n  }\n}\n\nclass Content extends React.Component {\n\n  render() {\n    const { isLoading, errorMsg, existingLabels, formErrorMsg } = this.props.data;\n\n    if (isLoading) {\n      return <Loading />;\n    }\n\n    if (errorMsg) {\n      return <p className=\"error mt-4 text-center\">{errorMsg}</p>;\n    }\n\n    return (\n      <React.Fragment>\n        <CreatableSelect\n          isMulti={true}\n          onChange={this.props.handleChange}\n          placeholder=''\n          options={existingLabels.map((item, index) => { return {label: item, value: item}; })}\n        />\n        {formErrorMsg && <p className=\"error m-0 mt-2\">{formErrorMsg}</p>}\n      </React.Fragment>\n    );\n  }\n}\n\nContent.propTypes = {\n  data: PropTypes.object.isRequired,\n  handleChange: PropTypes.func.isRequired,\n};\n\nLabelRepoStateDialog.propTypes = propTypes;\n\nexport default LabelRepoStateDialog;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext, isPro, siteRoot } from '../../utils/constants';\nimport { Button, Input, InputGroup, InputGroupAddon } from 'reactstrap';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport UserSelect from '../user-select';\nimport SharePermissionEditor from '../select-editor/share-permission-editor';\nimport FileChooser from '../file-chooser/file-chooser';\n\nclass UserItem extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOperationShow: false\n    };\n  }\n\n  onMouseEnter = () => {\n    this.setState({isOperationShow: true});\n  };\n\n  onMouseLeave = () => {\n    this.setState({isOperationShow: false});\n  };\n\n  deleteUserFolderPermission = () => {\n    let item = this.props.item;\n    this.props.deleteUserFolderPermission(item);\n  };\n\n  onChangeUserFolderPerm = (permission) => {\n    let item = this.props.item;\n    this.props.onChangeUserFolderPerm(item.repo_id, permission, item.folder_path, item.user_email);\n  };\n\n  render() {\n    let item = this.props.item;\n    let currentPermission = item.permission;\n    return (\n      <tr onMouseEnter={this.onMouseEnter} onMouseLeave={this.onMouseLeave} onFocus={this.onMouseEnter}>\n        <td>\n          <a href={`${siteRoot}profile/${encodeURIComponent(item.user_email)}/`} target=\"_blank\" rel=\"noreferrer\">{item.user_name}</a>\n        </td>\n        {this.props.showPath &&\n          <td>\n            <a href={`${siteRoot}library/${item.repo_id}/${Utils.encodePath(this.props.repoName + item.folder_path)}`}>{item.folder_name}</a>\n          </td>\n        }\n        <td>\n          <SharePermissionEditor\n            isTextMode={true}\n            autoFocus={true}\n            isEditIconShow={this.state.isOperationShow}\n            currentPermission={currentPermission}\n            permissions={this.props.permissions}\n            onPermissionChanged={this.onChangeUserFolderPerm}\n          />\n        </td>\n        <td>\n          <span\n            tabIndex=\"0\"\n            role=\"button\"\n            className={`sf2-icon-x3 action-icon ${this.state.isOperationShow ? '' : 'hide'}`}\n            onClick={this.deleteUserFolderPermission}\n            onKeyDown={Utils.onKeyDown}\n            title={gettext('Delete')}\n            aria-label={gettext('Delete')}\n          >\n          </span>\n        </td>\n      </tr>\n    );\n  }\n}\n\nUserItem.propTypes = {\n  item: PropTypes.object.isRequired,\n  permissions: PropTypes.array.isRequired,\n  deleteUserFolderPermission: PropTypes.func.isRequired,\n  onChangeUserFolderPerm: PropTypes.func.isRequired,\n  showPath: PropTypes.bool.isRequired,\n  repoName: PropTypes.string.isRequired,\n  handleChange: PropTypes.func.isRequired,\n};\n\n\nconst propTypes = {\n  repoID: PropTypes.string.isRequired,\n  isDepartmentRepo: PropTypes.bool,\n  folderPath: PropTypes.string.isRequired,\n  repoName: PropTypes.string.isRequired,\n};\n\n\nclass LibSubFolderSetUserPermissionDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      selectedUsers: null,\n      errorMsg: [],\n      permission: 'rw',\n      userFolderPermItems: [],\n      folderPath: '',\n      showFileChooser: false\n    };\n    if (!isPro) {\n      this.permissions = ['r', 'rw'];\n    } else {\n      this.permissions = ['r', 'rw', 'cloud-edit', 'preview', 'invisible'];\n    }\n  }\n\n  handleUserSelectChange = (option) => {\n    this.setState({selectedUsers: option});\n  };\n\n  componentDidMount() {\n    const {repoID, folderPath, isDepartmentRepo} = this.props;\n    const request = isDepartmentRepo ?\n      seafileAPI.listDepartmentRepoUserFolderPerm(repoID, folderPath) :\n      seafileAPI.listUserFolderPerm(repoID, folderPath);\n    request.then((res) => {\n      if (res.data.length !== 0) {\n        this.setState({userFolderPermItems: res.data});\n      }\n    });\n  }\n\n  setPermission = (permission) => {\n    this.setState({permission: permission});\n  };\n\n  addUserFolderPerm = () => {\n    const { selectedUsers } = this.state;\n    const folderPath = this.props.folderPath || this.state.folderPath;\n    if (!selectedUsers || !selectedUsers.length || !folderPath) { // selectedUsers: null or []\n      return false;\n    }\n\n    const users = selectedUsers.map((item, index) => item.email);\n\n    const request = this.props.isDepartmentRepo ?\n      seafileAPI.addDepartmentRepoUserFolderPerm(this.props.repoID, this.state.permission, folderPath, users) :\n      seafileAPI.addUserFolderPerm(this.props.repoID, this.state.permission, folderPath, users);\n    request.then(res => {\n      let errorMsg = [];\n      if (res.data.failed.length > 0) {\n        for (let i = 0; i < res.data.failed.length; i++) {\n          errorMsg[i] = res.data.failed[i];\n        }\n      }\n      this.setState({\n        errorMsg: errorMsg,\n        userFolderPermItems: this.state.userFolderPermItems.concat(res.data.success),\n        selectedUsers: null,\n        permission: 'rw',\n        folderPath: '',\n      });\n      this.refs.userSelect.clearSelect();\n    }).catch((error) => {\n      let errorMsg = '';\n      if (error.response) {\n        if (error.response.data && error.response.data['error_msg']) {\n          errorMsg = error.response.data['error_msg'];\n        } else {\n          errorMsg = gettext('Error');\n        }\n      } else {\n        errorMsg = gettext('Please check the network.');\n      }\n      this.setState({\n        errorMsg: [errorMsg]\n      });\n    });\n  };\n\n  deleteUserFolderPermItem = (item) => {\n    const request = this.props.isDepartmentRepo ?\n      seafileAPI.deleteDepartmentRepoUserFolderPerm(item.repo_id, item.permission, item.folder_path, item.user_email) :\n      seafileAPI.deleteUserFolderPerm(item.repo_id, item.permission, item.folder_path, item.user_email);\n    request.then(res => {\n      this.setState({\n        userFolderPermItems: this.state.userFolderPermItems.filter(deletedItem => {\n          return deletedItem != item;\n        })\n      });\n    });\n  };\n\n  onChangeUserFolderPerm = (repoID, permission, folderPath, userEmail) => {\n    const request = this.props.isDepartmentRepo ?\n      seafileAPI.updateDepartmentRepoUserFolderPerm(repoID, permission, folderPath, userEmail) :\n      seafileAPI.updateUserFolderPerm(repoID, permission, folderPath, userEmail);\n    request.then(res => {\n      let userFolderPermItems = this.state.userFolderPermItems.map(item => {\n        if (item.user_email === userEmail && item.folder_path === folderPath) {\n          item.permission = permission;\n        }\n        return item;\n      });\n      this.setState({userFolderPermItems: userFolderPermItems});\n    });\n  };\n\n  onSetSubFolder = (e) => {\n    this.setState({\n      folderPath: e.target.value\n    });\n  };\n\n  toggleFileChooser = () => {\n    this.setState({\n      showFileChooser: !this.state.showFileChooser,\n      folderPath: ''\n    });\n  };\n\n  toggleSubFolder = (repo, path, item) => {\n    this.setState({\n      folderPath: path,\n    });\n  };\n\n  handleFileChooserSubmit = () => {\n    this.setState({\n      showFileChooser: !this.state.showFileChooser\n    });\n  };\n\n  onRepoItemClick = () => {\n    this.setState({\n      folderPath: '/'\n    });\n  };\n\n  render() {\n    let showPath = this.props.folderPath ? false : true;\n    let { userFolderPermItems } = this.state;\n\n    if (this.state.showFileChooser) {\n      return (\n        <div>\n          <FileChooser\n            repoID={this.props.repoID}\n            mode={'only_current_library'}\n            onDirentItemClick={this.toggleSubFolder}\n            onRepoItemClick={this.onRepoItemClick}\n          />\n          <div className=\"modal-footer\">\n            <Button color=\"secondary\" onClick={this.toggleFileChooser}>{gettext('Cancel')}</Button>\n            <Button color=\"primary\" onClick={this.handleFileChooserSubmit}>{gettext('Submit')}</Button>\n          </div>\n        </div>\n      );\n    }\n\n    const thead = (\n      <thead>\n        <tr>\n          <th width={showPath ? '32%': '55%'}>{gettext('User')}</th>\n          {showPath &&\n          <th width=\"32%\">{gettext('Folder')}</th>\n          }\n          <th width={showPath ? '24%': '30%'}>{gettext('Permission')}</th>\n          <th width={showPath ? '12%' : '15%'}></th>\n        </tr>\n      </thead>\n    );\n    return (\n      <Fragment>\n        <table className=\"w-xs-250\">\n          {thead}\n          <tbody>\n            <tr>\n              <td>\n                <UserSelect\n                  ref=\"userSelect\"\n                  isMulti={true}\n                  className=\"reviewer-select\"\n                  placeholder={gettext('Search users...')}\n                  onSelectChange={this.handleUserSelectChange}\n                  value={this.state.selectedUsers}\n                />\n              </td>\n              {showPath &&\n                <td>\n                  <InputGroup>\n                    <Input value={this.state.folderPath} onChange={this.onSetSubFolder} />\n                    <InputGroupAddon addonType=\"append\"><Button className=\"sf2-icon-plus\" onClick={this.toggleFileChooser}></Button></InputGroupAddon>\n                  </InputGroup>\n                </td>\n              }\n              <td>\n                <SharePermissionEditor\n                  isTextMode={false}\n                  isEditIconShow={false}\n                  currentPermission={this.state.permission}\n                  permissions={this.permissions}\n                  onPermissionChanged={this.setPermission}\n                />\n              </td>\n              <td>\n                <Button onClick={this.addUserFolderPerm}>{gettext('Submit')}</Button>\n              </td>\n            </tr>\n            {this.state.errorMsg.length > 0 &&\n              this.state.errorMsg.map((item, index) => {\n                let errMessage = '';\n                if (item.user_email) {\n                  errMessage = item.user_email + ': ' + item.error_msg;\n                } else {\n                  errMessage = item;\n                }\n                return (\n                  <tr key={index}>\n                    <td colSpan={3}><p className=\"error\">{errMessage}</p></td>\n                  </tr>\n                );\n              })\n            }\n          </tbody>\n        </table>\n        <div className=\"share-list-container\">\n          <table className=\"table-thead-hidden w-xs-250\">\n            {thead}\n            <tbody>\n              {userFolderPermItems.map((item, index) => {\n                return (\n                  <UserItem\n                    key={index}\n                    item={item}\n                    permissions={this.permissions}\n                    deleteUserFolderPermission={this.deleteUserFolderPermItem}\n                    onChangeUserFolderPerm={this.onChangeUserFolderPerm}\n                    showPath={showPath}\n                    repoName={this.props.repoName}\n                  />\n                );\n              })}\n            </tbody>\n          </table>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nLibSubFolderSetUserPermissionDialog.propTypes = propTypes;\n\nexport default LibSubFolderSetUserPermissionDialog;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Input, InputGroup, InputGroupAddon } from 'reactstrap';\nimport { gettext, isPro, siteRoot } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport SharePermissionEditor from '../select-editor/share-permission-editor';\nimport FileChooser from '../file-chooser/file-chooser';\nimport { SeahubSelect, NoGroupMessage } from '../common/select';\n\nclass GroupItem extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOperationShow: false\n    };\n  }\n\n  onMouseEnter = () => {\n    this.setState({isOperationShow: true});\n  };\n\n  onMouseLeave = () => {\n    this.setState({isOperationShow: false});\n  };\n\n  deleteGroupPermissionItem = () => {\n    let item = this.props.item;\n    this.props.deleteGroupPermissionItem(item);\n  };\n\n  onChangeGroupPermission = (permission) => {\n    let item = this.props.item;\n    this.props.onChangeGroupPermission(item, permission);\n  };\n\n  render() {\n    let item = this.props.item;\n    return (\n      <tr onMouseEnter={this.onMouseEnter} onMouseLeave={this.onMouseLeave} onFocus={this.onMouseEnter}>\n        <td>\n          <a href={`${siteRoot}group/${item.group_id}/`} target=\"_blank\" rel=\"noreferrer\">{item.group_name}</a>\n        </td>\n        {this.props.showPath &&\n          <td>\n            <a href={`${siteRoot}library/${item.repo_id}/${Utils.encodePath(this.props.repoName + item.folder_path)}`}>{item.folder_name}</a>\n          </td>\n        }\n        <td>\n          <SharePermissionEditor\n            isTextMode={true}\n            autoFocus={true}\n            isEditIconShow={this.state.isOperationShow}\n            currentPermission={item.permission}\n            permissions={this.props.permissions}\n            onPermissionChanged={this.onChangeGroupPermission}\n          />\n        </td>\n        <td>\n          <span\n            tabIndex=\"0\"\n            role=\"button\"\n            className={`sf2-icon-x3 action-icon ${this.state.isOperationShow ? '' : 'hide'}`}\n            onClick={this.deleteGroupPermissionItem}\n            onKeyDown={Utils.onKeyDown}\n            title={gettext('Delete')}\n            aria-label={gettext('Delete')}\n          >\n          </span>\n        </td>\n      </tr>\n    );\n  }\n}\n\nGroupItem.propTypes = {\n  item: PropTypes.object.isRequired,\n  permissions: PropTypes.array.isRequired,\n  deleteUserFolderPermission: PropTypes.func.isRequired,\n  onChangeUserFolderPerm: PropTypes.func.isRequired,\n  showPath: PropTypes.bool.isRequired,\n  repoName: PropTypes.string.isRequired,\n  handleChange: PropTypes.func.isRequired,\n  deleteGroupPermissionItem: PropTypes.func.isRequired,\n  onChangeGroupPermission: PropTypes.func.isRequired,\n};\n\nconst propTypes = {\n  repoID: PropTypes.string.isRequired,\n  isDepartmentRepo: PropTypes.bool,\n  repoName: PropTypes.string,\n  folderPath: PropTypes.string,\n};\n\nclass LibSubFolderSerGroupPermissionDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      selectedOption: null,\n      errorMsg: [],\n      permission: 'rw',\n      groupPermissionItems: [],\n      folderPath: '',\n      showFileChooser: false\n    };\n    this.options = [];\n    if (!isPro) {\n      this.permissions = ['r', 'rw'];\n    } else {\n      this.permissions = ['r', 'rw', 'cloud-edit', 'preview', 'invisible'];\n    }\n  }\n\n  handleSelectChange = (option) => {\n    this.setState({selectedOption: option});\n  };\n\n  componentDidMount() {\n    this.loadOptions();\n    this.listGroupPermissionItems();\n  }\n\n  loadOptions = () => {\n    seafileAPI.shareableGroups().then((res) => {\n      this.options = res.data.map((item, index) => {\n        return {\n          id: item.id,\n          label: item.name,\n          value: item.name\n        };\n      });\n    });\n  };\n\n  listGroupPermissionItems = () => {\n    const { isDepartmentRepo, repoID, folderPath } = this.props;\n    const request = isDepartmentRepo ?\n      seafileAPI.listDepartmentRepoGroupFolderPerm(repoID, folderPath) :\n      seafileAPI.listGroupFolderPerm(repoID, folderPath);\n    request.then((res) => {\n      if (res.data.length !== 0) {\n        this.setState({\n          groupPermissionItems: res.data\n        });\n      }\n    });\n  };\n\n  setPermission = (permission) => {\n    this.setState({permission: permission});\n  };\n\n  addGroupFolderPerm = () => {\n    const { selectedOption } = this.state;\n    const folderPath = this.props.folderPath || this.state.folderPath;\n    if (!selectedOption || !folderPath) {\n      return false;\n    }\n\n    const request = this.props.isDepartmentRepo ?\n      seafileAPI.addDepartmentRepoGroupFolderPerm(this.props.repoID, this.state.permission, folderPath, selectedOption.id) :\n      seafileAPI.addGroupFolderPerm(this.props.repoID, this.state.permission, folderPath, selectedOption.id);\n    request.then(res => {\n      let errorMsg = [];\n      if (res.data.failed.length > 0) {\n        for (let i = 0; i < res.data.failed.length; i++) {\n          errorMsg[i] = res.data.failed[i];\n        }\n      }\n\n      this.setState({\n        errorMsg: errorMsg,\n        groupPermissionItems: this.state.groupPermissionItems.concat(res.data.success),\n        selectedOption: null,\n        permission: 'rw',\n        folderPath: ''\n      });\n    }).catch((error) => {\n      let errorMsg = '';\n      if (error.response) {\n        if (error.response.data && error.response.data['error_msg']) {\n          errorMsg = error.response.data['error_msg'];\n        } else {\n          errorMsg = gettext('Error');\n        }\n      } else {\n        errorMsg = gettext('Please check the network.');\n      }\n      this.setState({\n        errorMsg: [errorMsg]\n      });\n    });\n  };\n\n  deleteGroupPermissionItem = (item) => {\n    const request = this.props.isDepartmentRepo ?\n      seafileAPI.deleteDepartmentRepoGroupFolderPerm(item.repo_id, item.permission, item.folder_path, item.group_id) :\n      seafileAPI.deleteGroupFolderPerm(item.repo_id, item.permission, item.folder_path, item.group_id);\n    request.then(() => {\n      this.setState({\n        groupPermissionItems: this.state.groupPermissionItems.filter(deletedItem => { return deletedItem != item; })\n      });\n    });\n  };\n\n  onChangeGroupPermission = (item, permission) => {\n    const request = this.props.isDepartmentRepo ?\n      seafileAPI.updateDepartmentRepoGroupFolderPerm(item.repo_id, permission, item.folder_path, item.group_id) :\n      seafileAPI.updateGroupFolderPerm(item.repo_id, permission, item.folder_path, item.group_id);\n    request.then(() => {\n      this.updateGroupPermission(item, permission);\n    });\n  };\n\n  updateGroupPermission = (item, permission) => {\n    let groupID = item.group_id;\n    let groupPermissionItems = this.state.groupPermissionItems.map(sharedItem => {\n      let sharedItemGroupID = sharedItem.group_id;\n      if (groupID === sharedItemGroupID && item.folder_path === sharedItem.folder_path) {\n        sharedItem.permission = permission;\n      }\n      return sharedItem;\n    });\n    this.setState({groupPermissionItems: groupPermissionItems});\n  };\n\n  onSetSubFolder = (e) => {\n    this.setState({\n      folderPath: e.target.value\n    });\n  };\n\n  toggleFileChooser = () => {\n    this.setState({\n      showFileChooser: !this.state.showFileChooser,\n      folderPath: ''\n    });\n  };\n\n  toggleSubFolder = (repo, path, item) => {\n    this.setState({\n      folderPath: path,\n    });\n  };\n\n  handleSubmit = () => {\n    this.setState({\n      showFileChooser: !this.state.showFileChooser\n    });\n  };\n\n  onRepoItemClick = () => {\n    this.setState({\n      folderPath: '/'\n    });\n  };\n\n  render() {\n    let showPath = this.props.folderPath ? false : true;\n\n    if (this.state.showFileChooser) {\n      return (\n        <div>\n          <FileChooser\n            repoID={this.props.repoID}\n            mode={'only_current_library'}\n            onDirentItemClick={this.toggleSubFolder}\n            onRepoItemClick={this.onRepoItemClick}\n          />\n          <div className=\"modal-footer\">\n            <Button color=\"secondary\" onClick={this.toggleFileChooser}>{gettext('Cancel')}</Button>\n            <Button color=\"primary\" onClick={this.handleSubmit}>{gettext('Submit')}</Button>\n          </div>\n        </div>\n      );\n    }\n\n    const thead = (\n      <thead>\n        <tr>\n          <th width={showPath ? '32%' : '55%'}>{gettext('Group')}</th>\n          {showPath &&\n          <th width=\"32%\">{gettext('Folder')}</th>\n          }\n          <th width={showPath ? '24%' : '30%'}>{gettext('Permission')}</th>\n          <th width={showPath ? '12%' : '15%'}></th>\n        </tr>\n      </thead>\n    );\n    return (\n      <Fragment>\n        <table className=\"w-xs-250\">\n          {thead}\n          <tbody>\n            <tr>\n              <td>\n                <SeahubSelect\n                  onChange={this.handleSelectChange}\n                  options={this.options}\n                  placeholder={gettext('Select a group')}\n                  maxMenuHeight={200}\n                  value={this.state.selectedOption}\n                  components={{ NoOptionsMessage: NoGroupMessage }}\n                />\n              </td>\n              {showPath &&\n                <td>\n                  <InputGroup>\n                    <Input value={this.state.folderPath} onChange={this.onSetSubFolder} />\n                    <InputGroupAddon addonType=\"append\"><Button className=\"sf2-icon-plus\" onClick={this.toggleFileChooser}></Button></InputGroupAddon>\n                  </InputGroup>\n                </td>\n              }\n              <td>\n                <SharePermissionEditor\n                  isTextMode={false}\n                  isEditIconShow={false}\n                  currentPermission={this.state.permission}\n                  permissions={this.permissions}\n                  onPermissionChanged={this.setPermission}\n                />\n              </td>\n              <td>\n                <Button onClick={this.addGroupFolderPerm}>{gettext('Submit')}</Button>\n              </td>\n            </tr>\n            {this.state.errorMsg.length > 0 &&\n              this.state.errorMsg.map((item, index) => {\n                let errMessage = item.group_id + ': ' + item.error_msg;\n                return (\n                  <tr key={index}>\n                    <td colSpan={3}><p className=\"error\">{errMessage}</p></td>\n                  </tr>\n                );\n              })\n            }\n          </tbody>\n        </table>\n        <div className=\"share-list-container\">\n          <table className=\"table-thead-hidden w-xs-250\">\n            {thead}\n            <tbody>\n              {this.state.groupPermissionItems.map((item, index) => {\n                return (\n                  <GroupItem\n                    key={index}\n                    item={item}\n                    permissions={this.permissions}\n                    deleteGroupPermissionItem={this.deleteGroupPermissionItem}\n                    onChangeGroupPermission={this.onChangeGroupPermission}\n                    showPath={showPath}\n                    repoName={this.props.repoName}\n                  />\n                );\n              })}\n            </tbody>\n          </table>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nLibSubFolderSerGroupPermissionDialog.propTypes = propTypes;\n\nexport default LibSubFolderSerGroupPermissionDialog;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Modal, ModalHeader, ModalBody, TabContent, TabPane, Nav, NavItem, NavLink } from 'reactstrap';\nimport { gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport LibSubFolderSetUserPermissionDialog from './lib-sub-folder-set-user-permission-dialog';\nimport LibSubFolderSetGroupPermissionDialog from './lib-sub-folder-set-group-permission-dialog';\nimport '../../css/share-link-dialog.css';\nimport '../../css/sub-folder-permission.css';\n\nconst propTypes = {\n  repoID: PropTypes.string.isRequired,\n  repoName: PropTypes.string,\n  isDepartmentRepo: PropTypes.bool,\n  folderPath: PropTypes.string,\n  folderName: PropTypes.string,\n  toggleDialog: PropTypes.func.isRequired\n};\n\nclass LibSubFolderPermissionDialog extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      activeTab: 'userPermission'\n    };\n  }\n\n  toggle = (tab) => {\n    if (this.state.activeTab !== tab) {\n      this.setState({activeTab: tab});\n    }\n  };\n\n  renderContent = () => {\n    const activeTab = this.state.activeTab;\n\n    return (\n      <Fragment>\n        <div className=\"share-dialog-side\">\n          <Nav pills>\n            <NavItem role=\"tab\" aria-selected={activeTab === 'userPermission'} aria-controls=\"user-perm-panel\">\n              <NavLink className={activeTab === 'userPermission' ? 'active' : ''} onClick={this.toggle.bind(this, 'userPermission')} tabIndex=\"0\" onKeyDown={Utils.onKeyDown}>\n                {gettext('User Permission')}\n              </NavLink>\n            </NavItem>\n            <NavItem role=\"tab\" aria-selected={activeTab === 'groupPermission'} aria-controls=\"group-perm-panel\">\n              <NavLink className={activeTab === 'groupPermission' ? 'active' : ''} onClick={this.toggle.bind(this, 'groupPermission')} tabIndex=\"0\" onKeyDown={Utils.onKeyDown}>\n                {gettext('Group Permission')}\n              </NavLink>\n            </NavItem>\n          </Nav>\n        </div>\n        <div className=\"share-dialog-main\">\n          <TabContent activeTab={this.state.activeTab}>\n            <TabPane tabId=\"userPermission\" role=\"tabpanel\" id=\"user-perm-panel\">\n              <LibSubFolderSetUserPermissionDialog repoID={this.props.repoID} repoName={this.props.repoName} folderPath={this.props.folderPath} isDepartmentRepo={this.props.isDepartmentRepo} />\n            </TabPane>\n            <TabPane tabId=\"groupPermission\" role=\"tabpanel\" id=\"group-perm-panel\">\n              <LibSubFolderSetGroupPermissionDialog repoID={this.props.repoID} repoName={this.props.repoName} folderPath={this.props.folderPath} isDepartmentRepo={this.props.isDepartmentRepo} />\n            </TabPane>\n          </TabContent>\n        </div>\n      </Fragment>\n    );\n  };\n\n  render() {\n    const { repoName, folderName } = this.props;\n    return (\n      <div>\n        <Modal isOpen={true} style={{maxWidth: '980px'}} className=\"share-dialog\" toggle={this.props.toggleDialog}>\n          <ModalHeader toggle={this.props.toggleDialog}>\n            <span>{repoName ? Utils.generateDialogTitle(gettext('{placeholder} Folder Permission'), repoName) : Utils.generateDialogTitle(gettext('Set {placeholder}\\'s permission'), folderName)}</span>\n          </ModalHeader>\n          <ModalBody className=\"dialog-list-container share-dialog-content\" role=\"tablist\">\n            {this.renderContent()}\n          </ModalBody>\n        </Modal>\n      </div>\n    );\n  }\n}\n\nLibSubFolderPermissionDialog.propTypes = propTypes;\n\nexport default LibSubFolderPermissionDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Dropdown, DropdownMenu, DropdownToggle, DropdownItem } from 'reactstrap';\nimport { gettext, isPro, folderPermEnabled, enableRepoSnapshotLabel, enableResetEncryptedRepoPassword, isEmailConfigured, enableRepoAutoDel } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\n\nconst propTypes = {\n  isPC: PropTypes.bool,\n  repo: PropTypes.object.isRequired,\n  isStarred: PropTypes.bool,\n  onFreezedItem: PropTypes.func.isRequired,\n  onUnfreezedItem: PropTypes.func.isRequired,\n  onMenuItemClick: PropTypes.func.isRequired,\n};\n\nclass MylibRepoMenu extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isItemMenuShow: false,\n      isAdvancedMenuShown: false\n    };\n  }\n\n  onMenuItemClick = (e) => {\n    let operation = Utils.getEventData(e, 'toggle');\n    this.props.onMenuItemClick(operation);\n  };\n\n  onMenuItemKeyDown = (e) => {\n    if (e.key == 'Enter' || e.key == 'Space') {\n      this.onMenuItemClick(e);\n    }\n  };\n\n  onDropdownToggleClick = (e) => {\n    this.toggleOperationMenu(e);\n  };\n\n  onDropdownToggleKeyDown = (e) => {\n    if (e.key == 'Enter' || e.key == 'Space') {\n      this.onDropdownToggleClick(e);\n    }\n  };\n\n  toggleOperationMenu = (e) => {\n    let dataset = e.target ? e.target.dataset : null;\n    if (dataset && dataset.toggle && dataset.toggle === 'Rename') {\n      this.setState({isItemMenuShow: !this.state.isItemMenuShow});\n      return;\n    }\n\n    this.setState(\n      {isItemMenuShow: !this.state.isItemMenuShow},\n      () => {\n        if (this.state.isItemMenuShow) {\n          this.props.onFreezedItem();\n        } else {\n          this.props.onUnfreezedItem();\n        }\n      }\n    );\n  };\n\n  toggleAdvancedMenuShown = (e) => {\n    this.setState({ isAdvancedMenuShown: true });\n  };\n\n  toggleAdvancedMenu = (e) => {\n    e.stopPropagation();\n    this.setState({ isAdvancedMenuShown: !this.state.isAdvancedMenuShown }, () => {\n      this.toggleOperationMenu(e);\n    });\n  };\n\n  onDropDownMouseMove = (e) => {\n    if (this.state.isAdvancedMenuShown && e.target && e.target.className === 'dropdown-item') {\n      this.setState({\n        isAdvancedMenuShown: false\n      });\n    }\n  };\n\n  generatorOperations = () => {\n    let repo = this.props.repo;\n    let showResetPasswordMenuItem = isPro && repo.encrypted && enableResetEncryptedRepoPassword && isEmailConfigured;\n    let operations = ['Rename', 'Transfer'];\n    if (folderPermEnabled) {\n      operations.push('Folder Permission');\n    }\n    operations.push('Share Admin', 'Divider');\n\n    if (repo.encrypted) {\n      operations.push('Change Password');\n    }\n    if (showResetPasswordMenuItem) {\n      operations.push('Reset Password');\n    }\n\n    if (isPro) {\n      const monitorOp = repo.monitored ? 'Unwatch File Changes' : 'Watch File Changes';\n      operations.push(monitorOp);\n    }\n\n    operations.push('Divider', 'History Setting', 'Advanced');\n    // Remove adjacent excess 'Divider'\n    for (let i = 0; i < operations.length; i++) {\n      if (operations[i] === 'Divider' && operations[i + 1] === 'Divider') {\n        operations.splice(i, 1);\n        i--;\n      }\n    }\n    return operations;\n  };\n\n  getAdvancedOperations = () => {\n    const operations = [];\n    operations.push('API Token');\n    if (this.props.isPC && enableRepoSnapshotLabel) {\n      operations.push('Label Current State');\n    }\n    if (enableRepoAutoDel) {\n      operations.push('Old Files Auto Delete');\n    }\n    return operations;\n  };\n\n  translateOperations = (item) => {\n    let translateResult = '';\n    switch(item) {\n      case 'Star':\n        translateResult = gettext('Star');\n        break;\n      case 'Unstar':\n        translateResult = gettext('Unstar');\n        break;\n      case 'Share':\n        translateResult = gettext('Share');\n        break;\n      case 'Delete':\n        translateResult = gettext('Delete');\n        break;\n      case 'Rename':\n        translateResult = gettext('Rename');\n        break;\n      case 'Transfer':\n        translateResult = gettext('Transfer');\n        break;\n      case 'History Setting':\n        translateResult = gettext('History Setting');\n        break;\n      case 'Change Password':\n        translateResult = gettext('Change Password');\n        break;\n      case 'Reset Password':\n        translateResult = gettext('Reset Password');\n        break;\n      case 'Watch File Changes':\n        translateResult = gettext('Watch File Changes');\n        break;\n      case 'Unwatch File Changes':\n        translateResult = gettext('Unwatch File Changes');\n        break;\n      case 'Folder Permission':\n        translateResult = gettext('Folder Permission');\n        break;\n      case 'Label Current State':\n        translateResult = gettext('Label Current State');\n        break;\n      case 'API Token':\n        translateResult = 'API Token'; // translation is not needed here\n        break;\n      case 'Share Admin':\n        translateResult = gettext('Share Admin');\n        break;\n      case 'Old Files Auto Delete':\n        translateResult = gettext('Auto Deletion Setting');\n        break;\n      case 'Advanced':\n        translateResult = gettext('Advanced');\n        break;\n      default:\n        break;\n    }\n\n    return translateResult;\n  };\n\n  render() {\n    let operations = this.generatorOperations();\n    const advancedOperations = this.getAdvancedOperations();\n\n    // pc menu\n    if (this.props.isPC) {\n      return (\n        <Dropdown isOpen={this.state.isItemMenuShow} toggle={this.toggleOperationMenu}>\n          <DropdownToggle\n            tag=\"i\"\n            role=\"button\"\n            tabIndex=\"0\"\n            className=\"sf-dropdown-toggle sf2-icon-caret-down\"\n            title={gettext('More Operations')}\n            aria-label={gettext('More Operations')}\n            onClick={this.onDropdownToggleClick}\n            onKeyDown={this.onDropdownToggleKeyDown}\n            data-toggle=\"dropdown\"\n          />\n          <DropdownMenu onMouseMove={this.onDropDownMouseMove}>\n            {operations.map((item, index)=> {\n              if (item == 'Divider') {\n                return <DropdownItem key={index} divider />;\n              } else if (item == 'Advanced') {\n                return (\n                  <Dropdown\n                    key={index}\n                    direction=\"right\"\n                    className=\"w-100\"\n                    isOpen={this.state.isAdvancedMenuShown}\n                    toggle={this.toggleAdvancedMenu}\n                    onMouseMove={(e) => {e.stopPropagation();}}\n                  >\n                    <DropdownToggle\n                      caret\n                      className=\"dropdown-item font-weight-normal rounded-0 d-flex justify-content-between align-items-center pr-2\"\n                      onMouseEnter={this.toggleAdvancedMenuShown}\n                    >\n                      {this.translateOperations(item)}\n                    </DropdownToggle>\n                    <DropdownMenu>\n                      {advancedOperations.map((item, index)=> {\n                        return (<DropdownItem key={index} data-toggle={item} onClick={this.onMenuItemClick} onKeyDown={this.onMenuItemKeyDown}>{this.translateOperations(item)}</DropdownItem>);\n                      })}\n                    </DropdownMenu>\n                  </Dropdown>\n                );\n              } else {\n                return (<DropdownItem key={index} data-toggle={item} onClick={this.onMenuItemClick} onKeyDown={this.onMenuItemKeyDown}>{this.translateOperations(item)}</DropdownItem>);\n              }\n            })}\n          </DropdownMenu>\n        </Dropdown>\n      );\n    }\n\n    // mobile menu\n    operations.pop(); // removed the last item 'Advanced'\n    operations.unshift('Delete');\n    operations.unshift('Share');\n    this.props.isStarred ? operations.unshift('Unstar') : operations.unshift('Star');\n\n    return (\n      <Dropdown isOpen={this.state.isItemMenuShow} toggle={this.toggleOperationMenu}>\n        <DropdownToggle\n          tag=\"i\"\n          className=\"sf-dropdown-toggle fa fa-ellipsis-v ml-0\"\n          title={gettext('More Operations')}\n          // onClick={this.clickOperationMenuToggle}\n          data-toggle=\"dropdown\"\n          aria-expanded={this.state.isItemMenuShow}\n        />\n        <div className={`${this.state.isItemMenuShow ? '' : 'd-none'}`} onClick={this.toggleOperationMenu}>\n          <div className=\"mobile-operation-menu-bg-layer\"></div>\n          <div className=\"mobile-operation-menu\">\n            {operations.map((item, index) => {\n              if (item != 'Divider') {\n                return (<DropdownItem key={index} className=\"mobile-menu-item\" data-toggle={item} onClick={this.onMenuItemClick}>{this.translateOperations(item)}</DropdownItem>);\n              }\n              return null;\n            })}\n          </div>\n        </div>\n      </Dropdown>\n    );\n  }\n}\n\nMylibRepoMenu.propTypes = propTypes;\n\nexport default MylibRepoMenu;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../../utils/constants';\nimport OpIcon from '../op-icon';\nimport { SeahubSelect } from '../common/select';\n\nconst propTypes = {\n  isTextMode: PropTypes.bool.isRequired,\n  isEditIconShow: PropTypes.bool.isRequired,\n  currentPermission: PropTypes.string.isRequired,\n  onPermissionChanged: PropTypes.func.isRequired,\n};\n\nclass RepoAPITokenPermissionEditor extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isEditing: false,\n    };\n    this.options = [\n      { value: 'rw', label: <div>{gettext('Read-Write')}</div> },\n      { value: 'r', label: <div>{gettext('Read-Only')}</div> }\n    ];\n  }\n\n  componentDidMount() {\n    document.addEventListener('click', this.onHideSelect);\n  }\n\n  componentWillUnmount() {\n    document.removeEventListener('click', this.onHideSelect);\n  }\n\n  onHideSelect = () => {\n    this.setState({ isEditing: false });\n  };\n\n  onEditPermission = (e) => {\n    e.nativeEvent.stopImmediatePropagation();\n    this.setState({ isEditing: true });\n  };\n\n  onPermissionChanged = (e) => {\n    if (e.value !== this.props.currentPermission) {\n      this.props.onPermissionChanged(e.value);\n    }\n    this.setState({ isEditing: false });\n  };\n\n  onSelectHandler = (e) => {\n    e.nativeEvent.stopImmediatePropagation();\n  };\n\n  render() {\n    const { currentPermission, isTextMode } = this.props;\n    let optionTranslation = currentPermission === 'rw' ? gettext('Read-Write') : gettext('Read-Only');\n    return (\n      <div onClick={this.onSelectHandler}>\n        {(isTextMode && !this.state.isEditing) ?\n          <Fragment>\n            <span>{optionTranslation}</span>\n            {this.props.isEditIconShow &&\n              <OpIcon title={gettext('Edit')} className=\"fa fa-pencil-alt attr-action-icon\" op={this.onEditPermission} />\n            }\n          </Fragment>\n          :\n          <SeahubSelect\n            options={this.options}\n            placeholder={optionTranslation}\n            onChange={this.onPermissionChanged}\n            captureMenuScroll={false}\n          />\n        }\n      </div>\n    );\n  }\n}\n\nRepoAPITokenPermissionEditor.propTypes = propTypes;\n\nexport default RepoAPITokenPermissionEditor;\n","import React, {Fragment} from 'react';\nimport PropTypes from 'prop-types';\nimport {gettext} from '../../utils/constants';\nimport {Modal, ModalHeader, ModalBody, Button, Input} from 'reactstrap';\nimport RepoAPITokenPermissionEditor from '../select-editor/repo-api-token-permission-editor';\nimport {seafileAPI} from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../toast';\nimport copy from 'copy-to-clipboard';\nimport Loading from '../loading';\nimport OpIcon from '../op-icon';\n\nconst apiTokenItemPropTypes = {\n  item: PropTypes.object.isRequired,\n  deleteAPIToken: PropTypes.func.isRequired,\n  updateAPIToken: PropTypes.func.isRequired,\n};\n\nclass APITokenItem extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOperationShow: false,\n    };\n  }\n\n  onMouseEnter = () => {\n    this.setState({isOperationShow: true});\n  };\n\n  onMouseLeave = () => {\n    this.setState({isOperationShow: false});\n  };\n\n  onDeleteAPIToken = () => {\n    this.props.deleteAPIToken(this.props.item.app_name);\n  };\n\n  onUpdateAPIToken = (permission) => {\n    this.props.updateAPIToken(this.props.item.app_name, permission);\n  };\n\n  onCopyAPIToken = () => {\n    let api_token = this.props.item.api_token;\n    copy(api_token);\n    toaster.success(gettext('API token is copied to the clipboard.'));\n  };\n\n  render() {\n    let item = this.props.item;\n\n    return (\n      <tr onMouseEnter={this.onMouseEnter} onMouseLeave={this.onMouseLeave} tabIndex=\"0\" onFocus={this.onMouseEnter}>\n        <td className=\"name\">{item.app_name}</td>\n        <td>\n          <RepoAPITokenPermissionEditor\n            isTextMode={true}\n            isEditIconShow={this.state.isOperationShow}\n            currentPermission={item.permission}\n            onPermissionChanged={this.onUpdateAPIToken}\n          />\n        </td>\n        <td>\n          <span>{item.api_token}</span>\n          {this.state.isOperationShow &&\n            <OpIcon\n              className=\"far fa-copy action-icon\"\n              op={this.onCopyAPIToken}\n              title={gettext('Copy')}\n            />\n          }\n        </td>\n        <td>\n          <OpIcon\n            className={`sf2-icon-x3 action-icon ${this.state.isOperationShow ? '' : 'hide'}`}\n            op={this.onDeleteAPIToken}\n            title={gettext('Delete')}\n          />\n        </td>\n      </tr>\n    );\n  }\n}\n\nAPITokenItem.propTypes = apiTokenItemPropTypes;\n\nconst propTypes = {\n  repo: PropTypes.object.isRequired,\n  onRepoAPITokenToggle: PropTypes.func.isRequired,\n};\n\nclass RepoAPITokenDialog extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      apiTokenList: [],\n      permission: 'rw',\n      appName: '',\n      errorMsg: '',\n      loading: true,\n      isSubmitBtnActive: true,\n    };\n    this.repo = this.props.repo;\n  }\n\n  listAPITokens = () => {\n    seafileAPI.listRepoAPITokens(this.repo.repo_id).then((res) => {\n      this.setState({\n        apiTokenList: res.data.repo_api_tokens,\n        loading: false,\n      });\n    }).catch(error => {\n      if (error.response.status === 403) {\n        this.setState({\n          errorMsg: gettext('Permission denied'),\n        });\n      } else {\n        this.handleError(error);\n      }\n    });\n  };\n\n  onInputChange = (e) => {\n    let appName = e.target.value;\n    this.setState({\n      appName: appName,\n    });\n  };\n\n  onKeyDown = (e) => {\n    if (e.keyCode === 13) {\n      e.preventDefault();\n      this.addAPIToken();\n    }\n  };\n\n  setPermission = (permission) => {\n    this.setState({permission: permission});\n  };\n\n  addAPIToken = () => {\n    if (!this.state.appName) {\n      return;\n    }\n\n    this.setState({\n      isSubmitBtnActive: false,\n    });\n    const {appName, permission, apiTokenList} = this.state;\n\n    seafileAPI.addRepoAPIToken(this.repo.repo_id, appName, permission).then((res) => {\n      apiTokenList.push(res.data);\n      this.setState({\n        apiTokenList: apiTokenList,\n        isSubmitBtnActive: true,\n      });\n    }).catch(error => {\n      this.handleError(error);\n      this.setState({\n        isSubmitBtnActive: true,\n      });\n    });\n  };\n\n  deleteAPIToken = (appName) => {\n    seafileAPI.deleteRepoAPIToken(this.repo.repo_id, appName).then((res) => {\n      const apiTokenList = this.state.apiTokenList.filter(item => {\n        return item.app_name !== appName;\n      });\n      this.setState({\n        apiTokenList: apiTokenList,\n      });\n    }).catch(error => {\n      this.handleError(error);\n    });\n  };\n\n  updateAPIToken = (appName, permission) => {\n    seafileAPI.updateRepoAPIToken(this.repo.repo_id, appName, permission).then((res) => {\n      let apiTokenList = this.state.apiTokenList.filter(item => {\n        if (item.app_name === appName) {\n          item.permission = permission;\n        }\n        return item;\n      });\n      this.setState({\n        apiTokenList: apiTokenList,\n      });\n    }).catch(error => {\n      this.handleError(error);\n    });\n  };\n\n  handleError = (e) => {\n    if (e.response) {\n      toaster.danger(e.response.data.error_msg || e.response.data.detail || gettext('Error'), {duration: 3});\n    } else {\n      toaster.danger(gettext('Please check the network.'), {duration: 3});\n    }\n  };\n\n  componentDidMount() {\n    this.listAPITokens();\n  }\n\n  renderContent = () => {\n    const renderAPITokenList = this.state.apiTokenList.map((item, index) => {\n      return (\n        <APITokenItem\n          key={index}\n          item={item}\n          deleteAPIToken={this.deleteAPIToken}\n          updateAPIToken={this.updateAPIToken}\n        />\n      );\n    });\n\n    const thead = (\n      <thead>\n        <tr>\n          <th width=\"20%\">{gettext('App Name')}</th>\n          <th width=\"20%\">{gettext('Permission')}</th>\n          <th width=\"48%\">API Token</th>\n          <th width=\"12%\"></th>\n        </tr>\n      </thead>\n    );\n    return (\n      <Fragment>\n        {this.state.errorMsg &&\n          <p className=\"error text-center\">{this.state.errorMsg}</p>\n        }\n        {!this.state.errorMsg &&\n        <Fragment>\n          <table className=\"w-xs-250\">\n            {thead}\n            <tbody>\n              <tr>\n                <td>\n                  <Input\n                    type=\"text\"\n                    id=\"appName\"\n                    value={this.state.appName}\n                    onChange={this.onInputChange}\n                    onKeyDown={this.onKeyDown}\n                  />\n                </td>\n                <td>\n                  <RepoAPITokenPermissionEditor\n                    isTextMode={false}\n                    isEditIconShow={false}\n                    currentPermission={this.state.permission}\n                    onPermissionChanged={this.setPermission}\n                  />\n                </td>\n                <td><span className=\"text-secondary\">--</span></td>\n                <td>\n                  <Button onClick={this.addAPIToken} disabled={!this.state.isSubmitBtnActive}>{gettext('Submit')}</Button>\n                </td>\n              </tr>\n            </tbody>\n          </table>\n          <div style={{minHeight: '10rem', maxHeight: '18rem'}}>\n            {this.state.apiTokenList.length !== 0 &&\n            <table className=\"table-thead-hidden w-xs-250\">\n              {thead}\n              <tbody>\n                {renderAPITokenList}\n              </tbody>\n            </table>\n            }\n          </div>\n          {this.state.loading && <Loading/>}\n        </Fragment>\n        }\n      </Fragment>\n    );\n  };\n\n  render() {\n    let repo = this.repo;\n\n    const itemName = '<span class=\"op-target\">' + Utils.HTMLescape(repo.repo_name) + '</span>';\n    const title = gettext('{placeholder} API Token').replace('{placeholder}', itemName);\n    return (\n      <Modal\n        isOpen={true} style={{maxWidth: '800px'}}\n        toggle={this.props.onRepoAPITokenToggle}\n      >\n        <ModalHeader toggle={this.props.onRepoAPITokenToggle}>\n          <p dangerouslySetInnerHTML={{__html: title}} className=\"m-0\"></p>\n        </ModalHeader>\n        <ModalBody>\n          <div className=\"o-auto\">\n            {this.renderContent()}\n          </div>\n        </ModalBody>\n      </Modal>\n    );\n  }\n}\n\nRepoAPITokenDialog.propTypes = propTypes;\n\nexport default RepoAPITokenDialog;\n","import React, { Component, Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Link } from '@gatsbyjs/reach-router';\nimport { Utils } from '../../../utils/utils';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { gettext, siteRoot } from '../../../utils/constants';\nimport Loading from '../../../components/loading';\nimport toaster from '../../../components/toast';\nimport EmptyTip from '../../../components/empty-tip';\n\nconst itemPropTypes = {\n  item: PropTypes.object.isRequired,\n  deleteItem: PropTypes.func.isRequired\n};\n\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOperationShow: false\n    };\n  }\n\n  onMouseEnter = () => {\n    this.setState({isOperationShow: true});\n  };\n\n  onMouseLeave = () => {\n    this.setState({isOperationShow: false});\n  };\n\n  onDeleteLink = (e) => {\n    e.preventDefault();\n    this.props.deleteItem(this.props.item);\n  };\n\n  render() {\n    let objUrl;\n    let item = this.props.item;\n    let path = item.path === '/' ? '/' : item.path.slice(0, item.path.length - 1);\n\n    if (item.is_dir) {\n      objUrl = `${siteRoot}library/${item.repo_id}/${encodeURIComponent(item.repo_name)}${Utils.encodePath(path)}`;\n    } else {\n      objUrl = `${siteRoot}lib/${item.repo_id}/file${Utils.encodePath(item.path)}`;\n    }\n\n    return (\n      <tr onMouseEnter={this.onMouseEnter} onMouseLeave={this.onMouseLeave} onFocus={this.onMouseEnter}>\n        <td className=\"name\">{item.creator_name}</td>\n        <td>\n          {item.is_dir ?\n            <Link to={objUrl}>{item.obj_name}</Link>\n            :\n            <a href={objUrl} target=\"_blank\" rel=\"noreferrer\">{item.obj_name}</a>\n          }\n        </td>\n        <td>\n          <a href={item.link} target=\"_blank\" rel=\"noreferrer\">{item.link}</a>\n        </td>\n        <td>\n          <span\n            tabIndex=\"0\"\n            role=\"button\"\n            className={`sf2-icon-x3 action-icon ${this.state.isOperationShow ? '' : 'invisible'}`}\n            onClick={this.onDeleteLink}\n            onKeyDown={Utils.onKeyDown}\n            title={gettext('Delete')}\n            aria-label={gettext('Delete')}\n          >\n          </span>\n        </td>\n      </tr>\n    );\n  }\n}\n\nItem.propTypes = itemPropTypes;\n\nconst propTypes = {\n  repo: PropTypes.object.isRequired,\n};\n\nclass RepoShareAdminShareLinks extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      items: []\n    };\n  }\n\n  componentDidMount() {\n    seafileAPI.listRepoShareLinks(this.props.repo.repo_id).then((res) => {\n      this.setState({\n        loading: false,\n        items: res.data,\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  deleteItem = (item) => {\n    seafileAPI.deleteRepoShareLink(this.props.repo.repo_id, item.token).then(() => {\n      let items = this.state.items.filter(linkItem => {\n        return linkItem.token !== item.token;\n      });\n      this.setState({items: items});\n      let message = gettext('Successfully deleted 1 item');\n      toaster.success(message);\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  render() {\n    const { loading, errorMsg, items } = this.state;\n    return (\n      <Fragment>\n        {loading && <Loading />}\n        {!loading && errorMsg && <p className=\"error text-center mt-8\">{errorMsg}</p>}\n        {!loading && !errorMsg && !items.length &&\n        <EmptyTip forDialog={true}>\n          <p className=\"text-secondary\">{gettext('No share links')}</p>\n        </EmptyTip>\n        }\n        {!loading && !errorMsg && items.length > 0 &&\n        <table className=\"table-hover\">\n          <thead>\n            <tr>\n              <th width=\"22%\">{gettext('Creator')}</th>\n              <th width=\"20%\">{gettext('Name')}</th>\n              <th width=\"50%\">{gettext('Link')}</th>\n              <th width=\"8%\"></th>\n            </tr>\n          </thead>\n          <tbody>\n            {items.map((item, index) => {\n              return (\n                <Item\n                  key={index}\n                  item={item}\n                  deleteItem={this.deleteItem}\n                />\n              );\n            })}\n          </tbody>\n        </table>\n        }\n      </Fragment>\n    );\n  }\n}\n\nRepoShareAdminShareLinks.propTypes = propTypes;\n\nexport default RepoShareAdminShareLinks;\n","import React, { Component, Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Link } from '@gatsbyjs/reach-router';\nimport { Utils } from '../../../utils/utils';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { gettext, siteRoot } from '../../../utils/constants';\nimport Loading from '../../../components/loading';\nimport toaster from '../../../components/toast';\nimport EmptyTip from '../../../components/empty-tip';\n\nconst itemPropTypes = {\n  item: PropTypes.object.isRequired,\n  deleteItem: PropTypes.func.isRequired\n};\n\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOperationShow: false\n    };\n  }\n\n  onMouseEnter = () => {\n    this.setState({isOperationShow: true});\n  };\n\n  onMouseLeave = () => {\n    this.setState({isOperationShow: false});\n  };\n\n  onDeleteLink = (e) => {\n    e.preventDefault();\n    this.props.deleteItem(this.props.item);\n  };\n\n  render() {\n    let item = this.props.item;\n    let path = item.path === '/' ? '/' : item.path.slice(0, item.path.length - 1);\n    let objUrl = `${siteRoot}library/${item.repo_id}/${encodeURIComponent(item.repo_name)}${Utils.encodePath(path)}`;\n\n    return (\n      <tr onMouseEnter={this.onMouseEnter} onMouseLeave={this.onMouseLeave} onFocus={this.onMouseEnter}>\n        <td className=\"name\">{item.creator_name}</td>\n        <td>\n          <Link to={objUrl}>{item.obj_name}</Link>\n        </td>\n        <td>\n          <a href={item.link} target=\"_blank\" rel=\"noreferrer\">{item.link}</a>\n        </td>\n        <td>\n          <span\n            tabIndex=\"0\"\n            role=\"button\"\n            className={`sf2-icon-x3 action-icon ${this.state.isOperationShow ? '' : 'invisible'}`}\n            onClick={this.onDeleteLink}\n            onKeyDown={Utils.onKeyDown}\n            title={gettext('Delete')}\n            aria-label={gettext('Delete')}\n          >\n          </span>\n        </td>\n      </tr>\n    );\n  }\n}\n\nItem.propTypes = itemPropTypes;\n\nconst propTypes = {\n  repo: PropTypes.object.isRequired,\n};\n\nclass RepoShareAdminUploadLinks extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      items: [],\n    };\n  }\n\n  componentDidMount() {\n    seafileAPI.listRepoUploadLinks(this.props.repo.repo_id).then((res) => {\n      this.setState({\n        loading: false,\n        items: res.data,\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  deleteItem = (item) => {\n    seafileAPI.deleteRepoUploadLink(this.props.repo.repo_id, item.token).then(() => {\n      let items = this.state.items.filter(linkItem => {\n        return linkItem.token !== item.token;\n      });\n      this.setState({items: items});\n      let message = gettext('Successfully deleted 1 item');\n      toaster.success(message);\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  render() {\n    const { loading, errorMsg, items } = this.state;\n    return (\n      <Fragment>\n        {loading && <Loading />}\n        {!loading && errorMsg && <p className=\"error text-center mt-8\">{errorMsg}</p>}\n        {!loading && !errorMsg && !items.length &&\n        <EmptyTip forDialog={true}>\n          <p className=\"text-secondary\">{gettext('No upload links')}</p>\n        </EmptyTip>\n        }\n        {!loading && !errorMsg && items.length > 0 &&\n        <table className=\"table-hover\">\n          <thead>\n            <tr>\n              <th width=\"22%\">{gettext('Creator')}</th>\n              <th width=\"20%\">{gettext('Name')}</th>\n              <th width=\"50%\">{gettext('Link')}</th>\n              <th width=\"8%\"></th>\n            </tr>\n          </thead>\n          <tbody>\n            {items.map((item, index) => {\n              return (\n                <Item\n                  key={index}\n                  item={item}\n                  deleteItem={this.deleteItem}\n                />\n              );\n            })}\n          </tbody>\n        </table>\n        }\n      </Fragment>\n    );\n  }\n}\n\nRepoShareAdminUploadLinks.propTypes = propTypes;\n\nexport default RepoShareAdminUploadLinks;\n","import React, { Component, Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Link } from '@gatsbyjs/reach-router';\nimport { Utils } from '../../../utils/utils';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { gettext, siteRoot, isPro, username } from '../../../utils/constants';\nimport Loading from '../../../components/loading';\nimport toaster from '../../../components/toast';\nimport EmptyTip from '../../../components/empty-tip';\nimport SharePermissionEditor from '../../../components/select-editor/share-permission-editor';\n\nconst itemPropTypes = {\n  item: PropTypes.object.isRequired,\n  deleteItem: PropTypes.func.isRequired,\n  isRepoOwner: PropTypes.bool.isRequired\n};\n\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      permission: this.props.item.permission,\n      isOperationShow: false,\n      isShowPermEditor: false,\n    };\n    this.permissions = ['rw', 'r'];\n    if (isPro) {\n      if (this.props.item.path === '/' && this.props.isRepoOwner) {\n        this.permissions.push('admin');\n      }\n      this.permissions.push('cloud-edit', 'preview');\n    }\n  }\n\n  onMouseEnter = () => {\n    this.setState({isOperationShow: true});\n  };\n\n  onMouseLeave = () => {\n    this.setState({isOperationShow: false});\n  };\n\n  onDeleteLink = (e) => {\n    e.preventDefault();\n    this.props.deleteItem(this.props.item);\n  };\n\n  changePerm = (permission) => {\n    const item = this.props.item;\n    seafileAPI.updateShareToUserItemPermission(item.repo_id, item.path, 'user', item.share_to, permission).then(() => {\n      this.setState({\n        permission: permission,\n      });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  onEditPermission = (event) => {\n    event.nativeEvent.stopImmediatePropagation();\n    this.setState({isShowPermEditor: true});\n  };\n\n  render() {\n\n    let objUrl;\n    let item = this.props.item;\n    let path = item.path === '/' ? '/' : item.path.slice(0, item.path.length - 1);\n\n    objUrl = `${siteRoot}library/${item.repo_id}/${encodeURIComponent(item.repo_name)}${Utils.encodePath(path)}`;\n\n    return (\n      <tr onMouseEnter={this.onMouseEnter} onMouseLeave={this.onMouseLeave} onFocus={this.onMouseEnter}>\n        <td>\n          <Link to={objUrl}>{Utils.getFolderName(item.path)}</Link>\n        </td>\n        <td className=\"name\">{item.share_to_name}</td>\n        <td>\n          {!this.state.isShowPermEditor && (\n            <div>\n              <span>{item.permission_name || Utils.sharePerms(this.state.permission)}</span>\n              {this.state.isOperationShow && (\n                <a href=\"#\"\n                  role=\"button\"\n                  aria-label={gettext('Edit')}\n                  title={gettext('Edit')}\n                  className=\"fa fa-pencil-alt attr-action-icon\"\n                  onClick={this.onEditPermission}>\n                </a>\n              )}\n            </div>\n          )}\n          {this.state.isShowPermEditor && (\n            <SharePermissionEditor\n              repoID={item.repo_id}\n              isTextMode={true}\n              isEditIconShow={this.state.isOperationShow}\n              isEditing={true}\n              currentPermission={this.state.permission}\n              permissions={this.permissions}\n              onPermissionChanged={this.changePerm}\n            />\n          )}\n        </td>\n        <td>\n          <span\n            tabIndex=\"0\"\n            role=\"button\"\n            className={`sf2-icon-x3 action-icon ${this.state.isOperationShow ? '' : 'invisible'}`}\n            onClick={this.onDeleteLink}\n            onKeyDown={Utils.onKeyDown}\n            title={gettext('Delete')}\n            aria-label={gettext('Delete')}\n          >\n          </span>\n        </td>\n      </tr>\n    );\n  }\n}\n\nItem.propTypes = itemPropTypes;\n\nconst propTypes = {\n  repo: PropTypes.object.isRequired,\n};\n\nclass RepoShareAdminUserShares extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      items: [],\n    };\n  }\n\n  componentDidMount() {\n    seafileAPI.getAllRepoFolderShareInfo(this.props.repo.repo_id, 'user').then((res) => {\n      this.setState({\n        loading: false,\n        items: res.data.share_info_list,\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  deleteItem = (item) => {\n    seafileAPI.deleteShareToUserItem(item.repo_id, item.path, 'user', item.share_to).then(res => {\n      let items = this.state.items.filter(shareItem => {\n        return shareItem.path + shareItem.share_to !== item.path + item.share_to;\n      });\n      this.setState({items: items});\n      let message = gettext('Successfully deleted 1 item');\n      toaster.success(message);\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  render() {\n    const { loading, errorMsg, items } = this.state;\n    const { repo } = this.props;\n    const isRepoOwner = repo.owner_email === username;\n    return (\n      <Fragment>\n        {loading && <Loading />}\n        {!loading && errorMsg && <p className=\"error text-center mt-8\">{errorMsg}</p>}\n        {!loading && !errorMsg && !items.length &&\n        <EmptyTip forDialog={true}>\n          <p className=\"text-secondary\">{gettext('No user shares')}</p>\n        </EmptyTip>\n        }\n        {!loading && !errorMsg && items.length > 0 &&\n        <table className=\"table-hover\">\n          <thead>\n            <tr>\n              <th width=\"30%\">{gettext('Name')}</th>\n              <th width=\"30%\">{gettext('User')}</th>\n              <th width=\"30%\">{gettext('Permission')}</th>\n              <th width=\"10%\"></th>\n            </tr>\n          </thead>\n          <tbody>\n            {items.map((item, index) => {\n              return (\n                <Item\n                  key={index}\n                  item={item}\n                  deleteItem={this.deleteItem}\n                  isRepoOwner={isRepoOwner}\n                />\n              );\n            })}\n          </tbody>\n        </table>\n        }\n      </Fragment>\n    );\n  }\n}\n\nRepoShareAdminUserShares.propTypes = propTypes;\n\nexport default RepoShareAdminUserShares;\n","import React, { Component, Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Link } from '@gatsbyjs/reach-router';\nimport { Utils } from '../../../utils/utils';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { gettext, siteRoot, isPro, username } from '../../../utils/constants';\nimport Loading from '../../../components/loading';\nimport toaster from '../../../components/toast';\nimport EmptyTip from '../../../components/empty-tip';\nimport SharePermissionEditor from '../../../components/select-editor/share-permission-editor';\n\nconst itemPropTypes = {\n  item: PropTypes.object.isRequired,\n  deleteItem: PropTypes.func.isRequired,\n  isRepoOwner: PropTypes.bool.isRequired\n};\n\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      permission: this.props.item.permission,\n      isOperationShow: false,\n      isShowPermEditor: false,\n    };\n    this.permissions = ['rw', 'r'];\n    if (isPro) {\n      if (this.props.item.path === '/' && this.props.isRepoOwner) {\n        this.permissions.push('admin');\n      }\n      this.permissions.push('cloud-edit', 'preview');\n    }\n  }\n\n  onMouseEnter = () => {\n    this.setState({isOperationShow: true});\n  };\n\n  onMouseLeave = () => {\n    this.setState({isOperationShow: false});\n  };\n\n  onDeleteLink = (e) => {\n    e.preventDefault();\n    this.props.deleteItem(this.props.item);\n  };\n\n  changePerm = (permission) => {\n    const item = this.props.item;\n    seafileAPI.updateShareToGroupItemPermission(item.repo_id, item.path, 'group', item.share_to, permission).then(() => {\n      this.setState({\n        permission: permission,\n      });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  onEditPermission = (event) => {\n    event.nativeEvent.stopImmediatePropagation();\n    this.setState({isShowPermEditor: true});\n  };\n\n  render() {\n\n    let objUrl;\n    let item = this.props.item;\n    let path = item.path === '/' ? '/' : item.path.slice(0, item.path.length - 1);\n\n    objUrl = `${siteRoot}library/${item.repo_id}/${encodeURIComponent(item.repo_name)}${Utils.encodePath(path)}`;\n\n    return (\n      <tr onMouseEnter={this.onMouseEnter} onMouseLeave={this.onMouseLeave} onFocus={this.onMouseEnter}>\n        <td>\n          <Link to={objUrl}>{Utils.getFolderName(item.path)}</Link>\n        </td>\n        <td className=\"name\">{item.share_to_name}</td>\n        <td>\n          {!this.state.isShowPermEditor && (\n            <div>\n              <span>{item.permission_name || Utils.sharePerms(this.state.permission)}</span>\n              {this.state.isOperationShow && (\n                <a href=\"#\"\n                  role=\"button\"\n                  aria-label={gettext('Edit')}\n                  title={gettext('Edit')}\n                  className=\"fa fa-pencil-alt attr-action-icon\"\n                  onClick={this.onEditPermission}>\n                </a>\n              )}\n            </div>\n          )}\n          {this.state.isShowPermEditor && (\n            <SharePermissionEditor\n              repoID={item.repo_id}\n              isTextMode={true}\n              isEditIconShow={this.state.isOperationShow}\n              isEditing={true}\n              currentPermission={this.state.permission}\n              permissions={this.permissions}\n              onPermissionChanged={this.changePerm}\n            />\n          )}\n        </td>\n        <td>\n          <span\n            tabIndex=\"0\"\n            role=\"button\"\n            className={`sf2-icon-x3 action-icon ${this.state.isOperationShow ? '' : 'invisible'}`}\n            onClick={this.onDeleteLink}\n            onKeyDown={Utils.onKeyDown}\n            title={gettext('Delete')}\n            aria-label={gettext('Delete')}\n          >\n          </span>\n        </td>\n      </tr>\n    );\n  }\n}\n\nItem.propTypes = itemPropTypes;\n\nconst propTypes = {\n  repo: PropTypes.object.isRequired,\n};\n\nclass RepoShareAdminGroupShares extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      items: [],\n    };\n  }\n\n  componentDidMount() {\n    seafileAPI.getAllRepoFolderShareInfo(this.props.repo.repo_id, 'group').then((res) => {\n      this.setState({\n        loading: false,\n        items: res.data.share_info_list,\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  deleteItem = (item) => {\n    seafileAPI.deleteShareToGroupItem(item.repo_id, item.path, 'group', item.share_to).then(res => {\n      let items = this.state.items.filter(shareItem => {\n        return shareItem.path + shareItem.share_to !== item.path + item.share_to;\n      });\n      this.setState({items: items});\n      let message = gettext('Successfully deleted 1 item');\n      toaster.success(message);\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  render() {\n    const { loading, errorMsg, items } = this.state;\n    const { repo } = this.props;\n    const isRepoOwner = repo.owner_email === username;\n    return (\n      <Fragment>\n        {loading && <Loading />}\n        {!loading && errorMsg && <p className=\"error text-center mt-8\">{errorMsg}</p>}\n        {!loading && !errorMsg && !items.length &&\n        <EmptyTip forDialog={true}>\n          <p className=\"text-secondary\">{gettext('No group shares')}</p>\n        </EmptyTip>\n        }\n        {!loading && !errorMsg && items.length > 0 &&\n        <table className=\"table-hover\">\n          <thead>\n            <tr>\n              <th width=\"30%\">{gettext('Name')}</th>\n              <th width=\"30%\">{gettext('Group')}</th>\n              <th width=\"30%\">{gettext('Permission')}</th>\n              <th width=\"10%\"></th>\n            </tr>\n          </thead>\n          <tbody>\n            {items.map((item, index) => {\n              return (\n                <Item\n                  key={index}\n                  item={item}\n                  deleteItem={this.deleteItem}\n                  isRepoOwner={isRepoOwner}\n                />\n              );\n            })}\n          </tbody>\n        </table>\n        }\n      </Fragment>\n    );\n  }\n}\n\nRepoShareAdminGroupShares.propTypes = propTypes;\n\nexport default RepoShareAdminGroupShares;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Modal, ModalHeader, ModalBody, TabContent, TabPane, Nav, NavItem, NavLink } from 'reactstrap';\nimport { gettext, canGenerateShareLink, canGenerateUploadLink } from '../../utils/constants';\nimport RepoShareAdminShareLinks from './repo-share-admin/share-links';\nimport RepoShareAdminUploadLinks from './repo-share-admin/upload-links';\nimport RepoShareAdminUserShares from './repo-share-admin/user-shares';\nimport RepoShareAdminGroupShares from './repo-share-admin/group-shares';\n\nconst propTypes = {\n  repo: PropTypes.object.isRequired,\n  toggleDialog: PropTypes.func.isRequired,\n};\n\nclass RepoShareAdminDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.enableShareLink = !this.props.repo.encrypted && canGenerateShareLink;\n    this.enableUploadLink = !this.props.repo.encrypted && canGenerateUploadLink;\n    this.state = {\n      activeTab: this.getInitialActiveTab()\n    };\n  }\n\n  getInitialActiveTab = () => {\n    if (this.enableShareLink) {\n      return 'shareLink';\n    } else if (this.enableUploadLink) {\n      return 'uploadLink';\n    } else {\n      return 'shareToUser';\n    }\n  };\n\n  toggle = (tab) => {\n    if (this.state.activeTab !== tab) {\n      this.setState({ activeTab: tab });\n    }\n  };\n\n  onTabKeyDown = (e) => {\n    if (e.key == 'Enter' || e.key == 'Space') {\n      e.target.click();\n    }\n  };\n\n  render() {\n    const { activeTab } = this.state;\n    const { repo_name: repoName } = this.props.repo;\n\n    return (\n      <div>\n        <Modal isOpen={true} style={{maxWidth: '760px'}} className=\"share-dialog\" toggle={this.props.toggleDialog}>\n          <ModalHeader toggle={this.props.toggleDialog}>\n            <span className=\"op-target\" title={repoName}>{repoName}</span> {gettext('Share Admin')}\n          </ModalHeader>\n          <ModalBody className=\"dialog-list-container share-dialog-content\" role=\"tablist\">\n            <Fragment>\n              <div className=\"share-dialog-side\">\n                <Nav pills>\n                  {this.enableShareLink &&\n                  <NavItem role=\"tab\" aria-selected={activeTab === 'shareLink'} aria-controls=\"share-link-panel\">\n                    <NavLink className={activeTab === 'shareLink' ? 'active' : ''} onClick={(this.toggle.bind(this, 'shareLink'))} tabIndex=\"0\" onKeyDown={this.onTabKeyDown}>\n                      {gettext('Share Links')}\n                    </NavLink>\n                  </NavItem>\n                  }\n                  {this.enableUploadLink &&\n                    <NavItem role=\"tab\" aria-selected={activeTab === 'uploadLink'} aria-controls=\"upload-link-panel\">\n                      <NavLink className={activeTab === 'uploadLink' ? 'active' : ''} onClick={this.toggle.bind(this, 'uploadLink')} tabIndex=\"0\" onKeyDown={this.onTabKeyDown}>\n                        {gettext('Upload Links')}\n                      </NavLink>\n                    </NavItem>\n                  }\n                  <NavItem role=\"tab\" aria-selected={activeTab === 'shareToUser'} aria-controls=\"share-to-user-panel\">\n                    <NavLink className={activeTab === 'shareToUser' ? 'active' : ''} onClick={this.toggle.bind(this, 'shareToUser')} tabIndex=\"0\" onKeyDown={this.onTabKeyDown}>\n                      {gettext('User Shares')}\n                    </NavLink>\n                  </NavItem>\n                  <NavItem role=\"tab\" aria-selected={activeTab === 'shareToGroup'} aria-controls=\"share-to-group-panel\">\n                    <NavLink className={activeTab === 'shareToGroup' ? 'active' : ''} onClick={this.toggle.bind(this, 'shareToGroup')} tabIndex=\"0\" onKeyDown={this.onTabKeyDown}>\n                      {gettext('Group Shares')}\n                    </NavLink>\n                  </NavItem>\n                </Nav>\n              </div>\n              <div className=\"share-dialog-main\">\n                <TabContent activeTab={this.state.activeTab}>\n                  {(this.enableShareLink && activeTab === 'shareLink') &&\n                    <TabPane tabId=\"shareLink\" role=\"tabpanel\" id=\"share-link-panel\">\n                      <RepoShareAdminShareLinks\n                        repo={this.props.repo}\n                      />\n                    </TabPane>\n                  }\n                  {(this.enableUploadLink && activeTab === 'uploadLink') &&\n                    <TabPane tabId=\"uploadLink\" role=\"tabpanel\" id=\"upload-link-panel\">\n                      <RepoShareAdminUploadLinks\n                        repo={this.props.repo}\n                      />\n                    </TabPane>\n                  }\n                  {activeTab === 'shareToUser' &&\n                    <TabPane tabId=\"shareToUser\" role=\"tabpanel\" id=\"share-to-user-panel\">\n                      <RepoShareAdminUserShares\n                        repo={this.props.repo}\n                      />\n                    </TabPane>\n                  }\n                  {activeTab === 'shareToGroup' &&\n                    <TabPane tabId=\"shareToGroup\" role=\"tabpanel\" id=\"share-to-group-panel\">\n                      <RepoShareAdminGroupShares\n                        repo={this.props.repo}\n                      />\n                    </TabPane>\n                  }\n                </TabContent>\n              </div>\n            </Fragment>\n          </ModalBody>\n        </Modal>\n      </div>\n    );\n  }\n}\n\nRepoShareAdminDialog.propTypes = propTypes;\n\nexport default RepoShareAdminDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter, Form, FormGroup, Label, Input, Alert } from 'reactstrap';\nimport { gettext } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../toast';\n\nconst propTypes = {\n  toggleDialog: PropTypes.func.isRequired,\n  repoID: PropTypes.string.isRequired,\n};\n\nclass LibOldFilesAutoDelDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      autoDelDays: 0,\n      isAutoDel: false,\n      errorInfo: '',\n    };\n  }\n\n  componentDidMount() {\n    seafileAPI.getRepoOldFilesAutoDelDays(this.props.repoID).then(res => {\n      this.setState({\n        autoDelDays: res.data.auto_delete_days,\n        isAutoDel: res.data.auto_delete_days > 0,\n      });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  submit = () => {\n    let daysNeedTobeSet;\n\n    if (this.state.isAutoDel) {\n      daysNeedTobeSet = this.state.autoDelDays;\n\n      let reg = /^-?\\d+$/;\n      let isvalid_days = reg.test(daysNeedTobeSet);\n      if (!isvalid_days || daysNeedTobeSet <= 0) {\n        this.setState({\n          errorInfo: gettext('Please enter a positive integer'),\n        });\n        return;\n      }\n\n    } else {\n      daysNeedTobeSet = 0;    // if no auto del, give 0 to server\n    }\n\n\n    let repoID = this.props.repoID;\n\n    seafileAPI.setRepoOldFilesAutoDelDays(repoID, daysNeedTobeSet).then(res => {\n      this.props.toggleDialog();\n      toaster.success(gettext('Successfully set it.'));\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  handleKeyDown = (e) => {\n    if (e.key === 'Enter') {\n      this.submit();\n      e.preventDefault();\n    }\n  };\n\n  onChange = (e) => {\n    let days = e.target.value;\n    this.setState({\n      autoDelDays: days,\n    });\n  };\n\n  updateRadioCheck = (type) => {\n    if (type === 'noAutoDel') {\n      this.setState({\n        isAutoDel: false,\n      });\n    } else if (type === 'autoDel') {\n      this.setState({\n        isAutoDel: true,\n      });\n    }\n  };\n\n  render() {\n    return (\n      <Modal isOpen={true}>\n        <ModalHeader toggle={this.props.toggleDialog}>\n          {gettext('Auto deletion')}\n        </ModalHeader>\n        <ModalBody>\n          <Form>\n            <FormGroup check>\n              <Input type=\"radio\" name=\"radio1\" checked={!this.state.isAutoDel} onChange={() =>{this.updateRadioCheck('noAutoDel');}}/>{' '}\n              <Label>{gettext('Do not automatically delete files')}</Label>\n            </FormGroup>\n            <FormGroup check>\n              <Input type=\"radio\" name=\"radio1\" checked={this.state.isAutoDel} onChange={() =>{this.updateRadioCheck('autoDel');}}/>{' '}\n              <Label>{gettext('Automatically delete files that are not modified within certain days:')}</Label>\n              <Input\n                type=\"text\"\n                className=\"expire-input\"\n                value={this.state.autoDelDays}\n                disabled={!this.state.isAutoDel}\n                onChange={this.onChange}\n                onKeyDown={this.handleKeyDown}\n              />{' '}\n              <Label><span>{gettext('days')}</span></Label>\n            </FormGroup>\n            {this.state.errorInfo && <Alert color=\"danger\">{this.state.errorInfo}</Alert>}\n          </Form>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.props.toggleDialog}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.submit}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nLibOldFilesAutoDelDialog.propTypes = propTypes;\n\nexport default LibOldFilesAutoDelDialog;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport MediaQuery from 'react-responsive';\nimport moment from 'moment';\nimport { Link, navigate } from '@gatsbyjs/reach-router';\nimport { Utils } from '../../utils/utils';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { gettext, siteRoot, storages } from '../../utils/constants';\nimport ModalPortal from '../../components/modal-portal';\nimport ShareDialog from '../../components/dialog/share-dialog';\nimport toaster from '../../components/toast';\nimport DeleteRepoDialog from '../../components/dialog/delete-repo-dialog';\nimport TransferDialog from '../../components/dialog/transfer-dialog';\nimport LibHistorySettingDialog from '../../components/dialog/lib-history-setting-dialog';\nimport ChangeRepoPasswordDialog from '../../components/dialog/change-repo-password-dialog';\nimport ResetEncryptedRepoPasswordDialog from '../../components/dialog/reset-encrypted-repo-password-dialog';\nimport LabelRepoStateDialog from '../../components/dialog/label-repo-state-dialog';\nimport LibSubFolderPermissionDialog from '../../components/dialog/lib-sub-folder-permission-dialog';\nimport Rename from '../../components/rename';\nimport MylibRepoMenu from './mylib-repo-menu';\nimport RepoAPITokenDialog from '../../components/dialog/repo-api-token-dialog';\nimport RepoShareAdminDialog from '../../components/dialog/repo-share-admin-dialog';\nimport LibOldFilesAutoDelDialog from '../../components/dialog/lib-old-files-auto-del-dialog';\nimport RepoMonitoredIcon from '../../components/repo-monitored-icon';\n\nconst propTypes = {\n  repo: PropTypes.object.isRequired,\n  isItemFreezed: PropTypes.bool.isRequired,\n  onFreezedItem: PropTypes.func.isRequired,\n  onUnfreezedItem: PropTypes.func.isRequired,\n  onRenameRepo: PropTypes.func.isRequired,\n  onDeleteRepo: PropTypes.func.isRequired,\n  onTransferRepo: PropTypes.func.isRequired,\n  onRepoClick: PropTypes.func.isRequired,\n  onMonitorRepo: PropTypes.func.isRequired,\n};\n\nclass MylibRepoListItem extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOpIconShow: false,\n      isStarred: this.props.repo.starred,\n      isRenaming: false,\n      isShareDialogShow: false,\n      isDeleteDialogShow: false,\n      isTransferDialogShow: false,\n      isHistorySettingDialogShow: false,\n      isChangePasswordDialogShow: false,\n      isResetPasswordDialogShow: false,\n      isLabelRepoStateDialogOpen: false,\n      isFolderPermissionDialogShow: false,\n      isAPITokenDialogShow: false,\n      isRepoShareAdminDialogOpen: false,\n      isRepoDeleted: false,\n      isOldFilesAutoDelDialogOpen: false,\n    };\n  }\n\n  onFocus = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        isOpIconShow: true\n      });\n    }\n  };\n\n  onMouseEnter = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        isOpIconShow: true,\n        highlight: true,\n      });\n    }\n  };\n\n  onMouseLeave = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        isOpIconShow: false,\n        highlight: false\n      });\n    }\n  };\n\n  onMenuItemClick = (item) => {\n    switch(item) {\n      case 'Star':\n      case 'Unstar':\n        this.onToggleStarRepo();\n        break;\n      case 'Share':\n        this.onShareToggle();\n        break;\n      case 'Delete':\n        this.onDeleteToggle();\n        break;\n      case 'Rename':\n        this.onRenameToggle();\n        break;\n      case 'Transfer':\n        this.onTransferToggle();\n        break;\n      case 'History Setting':\n        this.onHistorySettingToggle();\n        break;\n      case 'Change Password':\n        this.onChangePasswordToggle();\n        break;\n      case 'Reset Password':\n        this.onResetPasswordToggle();\n        break;\n      case 'Watch File Changes':\n        this.watchFileChanges();\n        break;\n      case 'Unwatch File Changes':\n        this.unwatchFileChanges();\n        break;\n      case 'Folder Permission':\n        this.onFolderPermissionToggle();\n        break;\n      case 'Label Current State':\n        this.onLabelToggle();\n        break;\n      case 'API Token':\n        this.onAPITokenToggle();\n        break;\n      case 'Share Admin':\n        this.toggleRepoShareAdminDialog();\n        break;\n      case 'Old Files Auto Delete':\n        this.toggleOldFilesAutoDelDialog();\n        break;\n      default:\n        break;\n    }\n  };\n\n  visitRepo = () => {\n    if (!this.state.isRenaming && this.props.repo.repo_name) {\n      navigate(this.repoURL);\n    }\n  };\n\n  onRepoClick = () => {\n    this.props.onRepoClick(this.props.repo);\n  };\n\n  onToggleStarRepo = (e) => {\n    e.preventDefault();\n    const repoName = this.props.repo.repo_name;\n    if (this.state.isStarred) {\n      seafileAPI.unstarItem(this.props.repo.repo_id, '/').then(() => {\n        this.setState({isStarred: !this.state.isStarred});\n        const msg = gettext('Successfully unstarred {library_name_placeholder}.')\n          .replace('{library_name_placeholder}', repoName);\n        toaster.success(msg);\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    } else {\n      seafileAPI.starItem(this.props.repo.repo_id, '/').then(() => {\n        this.setState({isStarred: !this.state.isStarred});\n        const msg = gettext('Successfully starred {library_name_placeholder}.')\n          .replace('{library_name_placeholder}', repoName);\n        toaster.success(msg);\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    }\n  };\n\n  watchFileChanges = () => {\n    const { repo } = this.props;\n    seafileAPI.monitorRepo(repo.repo_id).then(() => {\n      this.props.onMonitorRepo(repo, true);\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  unwatchFileChanges = () => {\n    const { repo } = this.props;\n    seafileAPI.unMonitorRepo(repo.repo_id).then(() => {\n      this.props.onMonitorRepo(repo, false);\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  onShareToggle = (e) => {\n    // when close share dialog after send share link email,\n    // there is no event\n    if (e != undefined) {\n      e.preventDefault();\n    }\n    this.setState({isShareDialogShow: !this.state.isShareDialogShow});\n  };\n\n  onDeleteToggle = (e) => {\n    e.preventDefault();\n    this.setState({isDeleteDialogShow: !this.state.isDeleteDialogShow});\n  };\n\n  onRenameToggle = () => {\n    this.props.onFreezedItem();\n    this.setState({isRenaming: !this.state.isRenaming});\n  };\n\n  onTransferToggle = () => {\n    this.setState({isTransferDialogShow: !this.state.isTransferDialogShow});\n  };\n\n  onHistorySettingToggle = () => {\n    this.setState({isHistorySettingDialogShow: !this.state.isHistorySettingDialogShow});\n  };\n\n  onChangePasswordToggle = () => {\n    this.setState({isChangePasswordDialogShow: !this.state.isChangePasswordDialogShow});\n  };\n\n  onResetPasswordToggle = () => {\n    this.setState({isResetPasswordDialogShow: !this.state.isResetPasswordDialogShow});\n  };\n\n  onLabelToggle = () => {\n    this.setState({isLabelRepoStateDialogOpen: !this.state.isLabelRepoStateDialogOpen});\n  };\n\n  onFolderPermissionToggle = () => {\n    this.setState({isFolderPermissionDialogShow: !this.state.isFolderPermissionDialogShow});\n  };\n\n  onAPITokenToggle = () => {\n    this.setState({isAPITokenDialogShow: !this.state.isAPITokenDialogShow});\n  };\n\n  toggleRepoShareAdminDialog = () => {\n    this.setState({isRepoShareAdminDialogOpen: !this.state.isRepoShareAdminDialogOpen});\n  };\n\n  toggleOldFilesAutoDelDialog = () => {\n    this.setState({isOldFilesAutoDelDialogOpen: !this.state.isOldFilesAutoDelDialogOpen});\n  };\n\n  onUnfreezedItem = () => {\n    this.setState({\n      highlight: false,\n      isOpIconShow: false,\n    });\n    this.props.onUnfreezedItem();\n  };\n\n  onRenameConfirm = (newName) => {\n    let repo = this.props.repo;\n    let repoID = repo.repo_id;\n    seafileAPI.renameRepo(repoID, newName).then(() => {\n      this.props.onRenameRepo(repo, newName);\n      this.onRenameCancel();\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  onRenameCancel = () => {\n    this.props.onUnfreezedItem();\n    this.setState({isRenaming: !this.state.isRenaming});\n  };\n\n  onTransferRepo = (user) => {\n    let repoID = this.props.repo.repo_id;\n    seafileAPI.transferRepo(repoID, user.email).then(res => {\n      this.props.onTransferRepo(repoID);\n      let message = gettext('Successfully transferred the library.');\n      toaster.success(message);\n    }).catch(error => {\n      if (error.response){\n        toaster.danger(error.response.data.error_msg || gettext('Error'), {duration: 3});\n      } else {\n        toaster.danger(gettext('Failed. Please check the network.'), {duration: 3});\n      }\n    });\n    this.onTransferToggle();\n  };\n\n  onDeleteRepo = (repo) => {\n    seafileAPI.deleteRepo(repo.repo_id).then((res) => {\n\n      this.setState({\n        isRepoDeleted: true,\n        isDeleteDialogShow: false,\n      });\n\n      this.props.onDeleteRepo(repo);\n      let name = repo.repo_name;\n      var msg = gettext('Successfully deleted {name}.').replace('{name}', name);\n      toaster.success(msg);\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      if (errMessage === gettext('Error')) {\n        let name = repo.repo_name;\n        errMessage = gettext('Failed to delete {name}.').replace('{name}', name);\n      }\n      toaster.danger(errMessage);\n\n      this.setState({isRepoDeleted: false});\n    });\n  };\n\n  renderPCUI = () => {\n    let repo = this.props.repo;\n    let iconUrl = Utils.getLibIconUrl(repo);\n    let iconTitle = Utils.getLibIconTitle(repo);\n    let repoURL = `${siteRoot}library/${repo.repo_id}/${Utils.encodePath(repo.repo_name)}/`;\n    return (\n      <tr className={this.state.highlight ? 'tr-highlight' : ''} onMouseEnter={this.onMouseEnter} onMouseLeave={this.onMouseLeave} onClick={this.onRepoClick} onFocus={this.onFocus}>\n        <td className=\"text-center\">\n          <a href=\"#\" role=\"button\" aria-label={this.state.isStarred ? gettext('Unstar') : gettext('Star')} onClick={this.onToggleStarRepo}>\n            <i className={`fa-star ${this.state.isStarred ? 'fas' : 'far star-empty'}`}></i>\n          </a>\n        </td>\n        <td><img src={iconUrl} title={iconTitle} alt={iconTitle} width=\"24\" /></td>\n        <td>\n          {this.state.isRenaming && (\n            <Rename\n              name={repo.repo_name}\n              onRenameConfirm={this.onRenameConfirm}\n              onRenameCancel={this.onRenameCancel}\n            />\n          )}\n          {!this.state.isRenaming && repo.repo_name && (\n            <Fragment>\n              <Link to={repoURL}>{repo.repo_name}</Link>\n              {repo.monitored && <RepoMonitoredIcon repoID={repo.repo_id} />}\n            </Fragment>\n          )}\n          {!this.state.isRenaming && !repo.repo_name &&\n            (gettext('Broken (please contact your administrator to fix this library)'))\n          }\n        </td>\n        <td>\n          {(repo.repo_name && this.state.isOpIconShow) && (\n            <div>\n              <a href=\"#\" className=\"op-icon sf2-icon-share\" title={gettext('Share')} role=\"button\" aria-label={gettext('Share')} onClick={this.onShareToggle}></a>\n              <a href=\"#\" className=\"op-icon sf2-icon-delete\" title={gettext('Delete')} role=\"button\" aria-label={gettext('Delete')} onClick={this.onDeleteToggle}></a>\n              <MylibRepoMenu\n                isPC={true}\n                repo={this.props.repo}\n                onMenuItemClick={this.onMenuItemClick}\n                onFreezedItem={this.props.onFreezedItem}\n                onUnfreezedItem={this.onUnfreezedItem}\n              />\n            </div>\n          )}\n        </td>\n        <td>{repo.size}</td>\n        {storages.length > 0 && <td>{repo.storage_name}</td>}\n        <td title={moment(repo.last_modified).format('llll')}>{moment(repo.last_modified).fromNow()}</td>\n      </tr>\n    );\n  };\n\n  renderMobileUI = () => {\n    let repo = this.props.repo;\n    let iconUrl = Utils.getLibIconUrl(repo);\n    let iconTitle = Utils.getLibIconTitle(repo);\n    let repoURL = this.repoURL = `${siteRoot}library/${repo.repo_id}/${Utils.encodePath(repo.repo_name)}/`;\n\n    return (\n      <tr className={this.state.highlight ? 'tr-highlight' : ''}  onMouseEnter={this.onMouseEnter} onMouseLeave={this.onMouseLeave} onClick={this.onRepoClick}>\n        <td onClick={this.visitRepo}><img src={iconUrl} title={iconTitle} alt={iconTitle} width=\"24\" /></td>\n        <td onClick={this.visitRepo}>\n          {this.state.isRenaming && (\n            <Rename\n              name={repo.repo_name}\n              onRenameConfirm={this.onRenameConfirm}\n              onRenameCancel={this.onRenameCancel}\n            />\n          )}\n          {!this.state.isRenaming && repo.repo_name && (\n            <div>\n              <Link to={repoURL}>{repo.repo_name}</Link>\n              {repo.monitored && <RepoMonitoredIcon repoID={repo.repo_id} />}\n            </div>\n          )}\n          {!this.state.isRenaming && !repo.repo_name &&\n            <div>(gettext('Broken (please contact your administrator to fix this library)'))</div>\n          }\n          <span className=\"item-meta-info\">{repo.size}</span>\n          <span className=\"item-meta-info\" title={moment(repo.last_modified).format('llll')}>{moment(repo.last_modified).fromNow()}</span>\n        </td>\n        <td>\n          {repo.repo_name && (\n            <MylibRepoMenu\n              repo={this.props.repo}\n              isStarred={this.state.isStarred}\n              onMenuItemClick={this.onMenuItemClick}\n              onFreezedItem={this.props.onFreezedItem}\n              onUnfreezedItem={this.onUnfreezedItem}\n            />\n          )}\n        </td>\n      </tr>\n    );\n  };\n\n  render() {\n    let repo = this.props.repo;\n    return (\n      <Fragment>\n        <MediaQuery query=\"(min-width: 768px)\">\n          {this.renderPCUI()}\n        </MediaQuery>\n        <MediaQuery query=\"(max-width: 767.8px)\">\n          {this.renderMobileUI()}\n        </MediaQuery>\n        {this.state.isShareDialogShow && (\n          <ModalPortal>\n            <ShareDialog\n              itemType={'library'}\n              itemName={repo.repo_name}\n              itemPath={'/'}\n              repoID={repo.repo_id}\n              repoEncrypted={repo.encrypted}\n              enableDirPrivateShare={true}\n              userPerm={repo.permission}\n              toggleDialog={this.onShareToggle}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isDeleteDialogShow && (\n          <ModalPortal>\n            <DeleteRepoDialog\n              repo={repo}\n              isRepoDeleted={this.state.isRepoDeleted}\n              onDeleteRepo={this.onDeleteRepo}\n              toggle={this.onDeleteToggle}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isTransferDialogShow && (\n          <ModalPortal>\n            <TransferDialog\n              itemName={repo.repo_name}\n              submit={this.onTransferRepo}\n              toggleDialog={this.onTransferToggle}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isHistorySettingDialogShow && (\n          <ModalPortal>\n            <LibHistorySettingDialog\n              repoID={repo.repo_id}\n              itemName={repo.repo_name}\n              toggleDialog={this.onHistorySettingToggle}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isChangePasswordDialogShow && (\n          <ModalPortal>\n            <ChangeRepoPasswordDialog\n              repoID={repo.repo_id}\n              repoName={repo.repo_name}\n              toggleDialog={this.onChangePasswordToggle}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isResetPasswordDialogShow && (\n          <ModalPortal>\n            <ResetEncryptedRepoPasswordDialog\n              repoID={repo.repo_id}\n              toggleDialog={this.onResetPasswordToggle}\n            />\n          </ModalPortal>\n        )}\n\n        {this.state.isLabelRepoStateDialogOpen && (\n          <ModalPortal>\n            <LabelRepoStateDialog\n              repoID={repo.repo_id}\n              repoName={repo.repo_name}\n              toggleDialog={this.onLabelToggle}\n            />\n          </ModalPortal>\n        )}\n\n        {this.state.isFolderPermissionDialogShow && (\n          <ModalPortal>\n            <LibSubFolderPermissionDialog\n              toggleDialog={this.onFolderPermissionToggle}\n              repoID={repo.repo_id}\n              repoName={repo.repo_name}\n            />\n          </ModalPortal>\n        )}\n\n        {this.state.isAPITokenDialogShow && (\n          <ModalPortal>\n            <RepoAPITokenDialog\n              repo={repo}\n              onRepoAPITokenToggle={this.onAPITokenToggle}\n            />\n          </ModalPortal>\n        )}\n\n        {this.state.isRepoShareAdminDialogOpen && (\n          <ModalPortal>\n            <RepoShareAdminDialog\n              repo={repo}\n              toggleDialog={this.toggleRepoShareAdminDialog}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isOldFilesAutoDelDialogOpen && (\n          <ModalPortal>\n            <LibOldFilesAutoDelDialog\n              repoID={repo.repo_id}\n              toggleDialog={this.toggleOldFilesAutoDelDialog}\n            />\n          </ModalPortal>\n        )}\n\n      </Fragment>\n    );\n  }\n}\n\nMylibRepoListItem.propTypes = propTypes;\n\nexport default MylibRepoListItem;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport MediaQuery from 'react-responsive';\nimport { gettext, storages } from '../../utils/constants';\nimport MylibRepoListItem from './mylib-repo-list-item';\nimport LibsMobileThead from '../../components/libs-mobile-thead';\n\nconst propTypes = {\n  sortBy: PropTypes.string.isRequired,\n  sortOrder: PropTypes.string.isRequired,\n  repoList: PropTypes.array.isRequired,\n  sortRepoList: PropTypes.func.isRequired,\n  onRenameRepo: PropTypes.func.isRequired,\n  onDeleteRepo: PropTypes.func.isRequired,\n  onTransferRepo: PropTypes.func.isRequired,\n  onRepoClick: PropTypes.func.isRequired,\n  onMonitorRepo: PropTypes.func.isRequired,\n};\n\nclass MylibRepoListView extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isItemFreezed: false,\n    };\n  }\n\n  onFreezedItem = () => {\n    this.setState({isItemFreezed: true});\n  };\n\n  onUnfreezedItem = () => {\n    this.setState({isItemFreezed: false});\n  };\n\n  sortByName = (e) => {\n    e.preventDefault();\n    const sortBy = 'name';\n    const sortOrder = this.props.sortOrder == 'asc' ? 'desc' : 'asc';\n    this.props.sortRepoList(sortBy, sortOrder);\n  };\n\n  sortByTime = (e) => {\n    e.preventDefault();\n    const sortBy = 'time';\n    const sortOrder = this.props.sortOrder == 'asc' ? 'desc' : 'asc';\n    this.props.sortRepoList(sortBy, sortOrder);\n  };\n\n  sortBySize = (e) => {\n    e.preventDefault();\n    const sortBy = 'size';\n    const sortOrder = this.props.sortOrder == 'asc' ? 'desc' : 'asc';\n    this.props.sortRepoList(sortBy, sortOrder);\n  };\n\n  renderRepoListView = () => {\n    return (\n      <Fragment>\n        {this.props.repoList.map(item => {\n          return (\n            <MylibRepoListItem\n              key={item.repo_id}\n              repo={item}\n              isItemFreezed={this.state.isItemFreezed}\n              onFreezedItem={this.onFreezedItem}\n              onUnfreezedItem={this.onUnfreezedItem}\n              onRenameRepo={this.props.onRenameRepo}\n              onDeleteRepo={this.props.onDeleteRepo}\n              onTransferRepo={this.props.onTransferRepo}\n              onMonitorRepo={this.props.onMonitorRepo}\n              onRepoClick={this.props.onRepoClick}\n            />\n          );\n        })}\n      </Fragment>\n    );\n  };\n\n  renderPCUI = () => {\n    const showStorageBackend = storages.length > 0;\n    const sortIcon = this.props.sortOrder === 'asc' ? <span className=\"fas fa-caret-up\"></span> : <span className=\"fas fa-caret-down\"></span>;\n    return (\n      <table>\n        <thead>\n          <tr>\n            <th width=\"4%\"></th>\n            <th width=\"4%\"><span className=\"sr-only\">{gettext('Library Type')}</span></th>\n            <th width={showStorageBackend ? '33%' : '38%'}><a className=\"d-block table-sort-op\" href=\"#\" onClick={this.sortByName}>{gettext('Name')} {this.props.sortBy === 'name' && sortIcon}</a></th>\n            <th width=\"14%\"><span className=\"sr-only\">{gettext('Actions')}</span></th>\n            <th width={showStorageBackend ? '15%' : '20%'}><a className=\"d-block table-sort-op\" href=\"#\" onClick={this.sortBySize}>{gettext('Size')} {this.props.sortBy === 'size' && sortIcon}</a></th>\n            {showStorageBackend ? <th width=\"15%\">{gettext('Storage Backend')}</th> : null}\n            <th width={showStorageBackend ? '15%' : '20%'}><a className=\"d-block table-sort-op\" href=\"#\" onClick={this.sortByTime}>{gettext('Last Update')} {this.props.sortBy === 'time' && sortIcon}</a></th>\n          </tr>\n        </thead>\n        <tbody>\n          {this.renderRepoListView()}\n        </tbody>\n      </table>\n    );\n  };\n\n  renderMobileUI = () => {\n    return (\n      <table className=\"table-thead-hidden\">\n        <LibsMobileThead />\n        <tbody>\n          {this.renderRepoListView()}\n        </tbody>\n      </table>\n    );\n  };\n\n  render() {\n    return (\n      <Fragment>\n        <MediaQuery query=\"(min-width: 768px)\">\n          {this.renderPCUI()}\n        </MediaQuery>\n        <MediaQuery query=\"(max-width: 767.8px)\">\n          {this.renderMobileUI()}\n        </MediaQuery>\n      </Fragment>\n    );\n  }\n}\n\nMylibRepoListView.propTypes = propTypes;\n\nexport default MylibRepoListView;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Modal, ModalBody } from 'reactstrap';\nimport { gettext, mediaUrl, siteName, canAddRepo } from '../../utils/constants';\n\nconst propTypes = {\n  toggleDialog: PropTypes.func.isRequired\n};\n\nclass GuideForNewDialog extends React.Component {\n\n  toggle = () => {\n    this.props.toggleDialog();\n  };\n\n  render() {\n    return (\n      <Modal isOpen={true} toggle={this.toggle}>\n        <ModalBody>\n          <button type=\"button\" className=\"close text-gray\" onClick={this.toggle}><span aria-hidden=\"true\"></span></button>\n          <div className=\"p-2 text-center\">\n            <img src={`${mediaUrl}img/welcome.png`} width=\"180\" alt=\"\" />\n            <h3 id=\"dialogTitle\">{gettext('Welcome to {site_name_placeholder}').replace('{site_name_placeholder}', siteName)}</h3>\n            {canAddRepo ?\n              <p>{gettext('{site_name_placeholder} organizes files into libraries. Each library can be synced and shared separately. We have created a personal library for you. You can create more libraries later.').replace('{site_name_placeholder}', siteName)}</p> :\n              <p>{gettext('{site_name_placeholder} organizes files into libraries. Each library can be synced and shared separately. However, since you are a guest user now, you can not create libraries.').replace('{site_name_placeholder}', siteName)}</p>\n            }\n          </div>\n        </ModalBody>\n      </Modal>\n    );\n  }\n}\n\nGuideForNewDialog.propTypes = propTypes;\n\nexport default GuideForNewDialog;\n","import React, { Component, Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport cookie from 'react-cookies';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../../components/toast';\nimport Repo from '../../models/repo';\nimport Loading from '../../components/loading';\nimport EmptyTip from '../../components/empty-tip';\nimport CommonToolbar from '../../components/toolbar/common-toolbar';\nimport RepoViewToolbar from '../../components/toolbar/repo-view-toobar';\nimport LibDetail from '../../components/dirent-detail/lib-details';\nimport MylibRepoListView from './mylib-repo-list-view';\nimport SortOptionsDialog from '../../components/dialog/sort-options';\nimport GuideForNewDialog from '../../components/dialog/guide-for-new-dialog';\n\nconst propTypes = {\n  onShowSidePanel: PropTypes.func.isRequired,\n  onSearchedClick: PropTypes.func.isRequired,\n};\n\nclass MyLibraries extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      errorMsg: '',\n      isLoading: true,\n      repoList: [],\n      isShowDetails: false,\n      isSortOptionsDialogOpen: false,\n      isGuideForNewDialogOpen: window.app.pageOptions.guideEnabled,\n      sortBy: cookie.load('seafile-repo-dir-sort-by') || 'name', // 'name' or 'time' or 'size'\n      sortOrder: cookie.load('seafile-repo-dir-sort-order') || 'asc', // 'asc' or 'desc'\n    };\n\n    this.emptyTip = (\n      <EmptyTip>\n        <h2>{gettext('No libraries')}</h2>\n        <p>{gettext('You have not created any libraries yet. A library is a container to organize your files and folders. A library can also be shared with others and synced to your connected devices. You can create a library by clicking the \"New Library\" button in the menu bar.')}</p>\n      </EmptyTip>\n    );\n  }\n\n  componentDidMount() {\n    seafileAPI.listRepos({type: 'mine'}).then((res) => {\n      let repoList = res.data.repos.map((item) => {\n        return new Repo(item);\n      });\n      this.setState({\n        isLoading: false,\n        repoList: Utils.sortRepos(repoList, this.state.sortBy, this.state.sortOrder)\n      });\n    }).catch((error) => {\n      this.setState({\n        isLoading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  toggleSortOptionsDialog = () => {\n    this.setState({\n      isSortOptionsDialogOpen: !this.state.isSortOptionsDialogOpen\n    });\n  };\n\n  onCreateRepo = (repo) => {\n    seafileAPI.createMineRepo(repo).then((res) => {\n      const newRepo = new Repo({\n        repo_id: res.data.repo_id,\n        repo_name: res.data.repo_name,\n        size: res.data.repo_size,\n        mtime: res.data.mtime,\n        owner_email: res.data.email,\n        encrypted: res.data.encrypted,\n        permission: res.data.permission,\n        storage_name: res.data.storage_name\n      });\n      this.state.repoList.unshift(newRepo);\n      this.setState({repoList: this.state.repoList});\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  sortRepoList = (sortBy, sortOrder) => {\n    cookie.save('seafile-repo-dir-sort-by', sortBy);\n    cookie.save('seafile-repo-dir-sort-order', sortOrder);\n    this.setState({\n      sortBy: sortBy,\n      sortOrder: sortOrder,\n      repoList: Utils.sortRepos(this.state.repoList, sortBy, sortOrder)\n    });\n  };\n\n  onTransferRepo = (repoID) => {\n    let repoList = this.state.repoList.filter(item => {\n      return item.repo_id !== repoID;\n    });\n    this.setState({repoList: repoList});\n  };\n\n  onRenameRepo = (repo, newName) => {\n    let repoList = this.state.repoList.map(item => {\n      if (item.repo_id === repo.repo_id) {\n        item.repo_name = newName;\n      }\n      return item;\n    });\n    this.setState({repoList: repoList});\n  };\n\n  onMonitorRepo = (repo, monitored) => {\n    let repoList = this.state.repoList.map(item => {\n      if (item.repo_id === repo.repo_id) {\n        item.monitored = monitored;\n      }\n      return item;\n    });\n    this.setState({repoList: repoList});\n  };\n\n  onDeleteRepo = (repo) => {\n    let repoList = this.state.repoList.filter(item => {\n      return item.repo_id !== repo.repo_id;\n    });\n    this.setState({repoList: repoList});\n  };\n\n  onRepoClick = (repo) => {\n    if (this.state.isShowDetails) {\n      this.onRepoDetails(repo);\n    }\n  };\n\n  onRepoDetails = (repo) => {\n    this.setState({\n      currentRepo: repo,\n      isShowDetails: true,\n    });\n  };\n\n  closeDetails = () => {\n    this.setState({isShowDetails: !this.state.isShowDetails});\n  };\n\n  toggleGuideForNewDialog = () => {\n    window.app.pageOptions.guideEnabled = false;\n    this.setState({\n      isGuideForNewDialogOpen: false\n    });\n  };\n\n  render() {\n    return (\n      <Fragment>\n        <div className=\"main-panel-north border-left-show\">\n          <RepoViewToolbar onShowSidePanel={this.props.onShowSidePanel} onCreateRepo={this.onCreateRepo} libraryType={'mine'}/>\n          <CommonToolbar onSearchedClick={this.props.onSearchedClick} />\n        </div>\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <div className=\"cur-view-path\">\n              <h3 className=\"sf-heading m-0\">{gettext('My Libraries')}</h3>\n              {(!Utils.isDesktop() && this.state.repoList.length > 0) && <span className=\"sf3-font sf3-font-sort action-icon\" onClick={this.toggleSortOptionsDialog}></span>}\n            </div>\n            <div className=\"cur-view-content\">\n              {this.state.isLoading && <Loading />}\n              {!this.state.isLoading && this.state.errorMsg && <p className=\"error text-center mt-8\">{this.state.errorMsg}</p>}\n              {!this.state.isLoading && !this.state.errorMsg && this.state.repoList.length === 0 && this.emptyTip}\n              {!this.state.isLoading && !this.state.errorMsg && this.state.repoList.length > 0 &&\n                <MylibRepoListView\n                  sortBy={this.state.sortBy}\n                  sortOrder={this.state.sortOrder}\n                  repoList={this.state.repoList}\n                  onRenameRepo={this.onRenameRepo}\n                  onDeleteRepo={this.onDeleteRepo}\n                  onTransferRepo={this.onTransferRepo}\n                  onMonitorRepo={this.onMonitorRepo}\n                  onRepoClick={this.onRepoClick}\n                  sortRepoList={this.sortRepoList}\n                />\n              }\n            </div>\n          </div>\n          {!this.state.isLoading && !this.state.errorMsg && this.state.isGuideForNewDialogOpen &&\n            <GuideForNewDialog\n              toggleDialog={this.toggleGuideForNewDialog}\n            />\n          }\n          {this.state.isSortOptionsDialogOpen &&\n            <SortOptionsDialog\n              toggleDialog={this.toggleSortOptionsDialog}\n              sortBy={this.state.sortBy}\n              sortOrder={this.state.sortOrder}\n              sortItems={this.sortRepoList}\n            />\n          }\n          {this.state.isShowDetails && (\n            <div className=\"cur-view-detail\">\n              <LibDetail\n                currentRepo={this.state.currentRepo}\n                closeDetails={this.closeDetails}\n              />\n            </div>\n          )}\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nMyLibraries.propTypes = propTypes;\n\nexport default MyLibraries;\n","import React, { Component, Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Link } from '@gatsbyjs/reach-router';\nimport moment from 'moment';\nimport { gettext, siteRoot, lang, trashReposExpireDays } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../../components/toast';\nimport Loading from '../../components/loading';\nimport EmptyTip from '../../components/empty-tip';\nimport CommonToolbar from '../../components/toolbar/common-toolbar';\n\nmoment.locale(lang);\n\nclass MyLibsDeleted extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      deletedRepoList: [],\n      isLoading: true,\n    };\n  }\n\n  componentDidMount() {\n    seafileAPI.listDeletedRepo().then(res => {\n      this.setState({\n        deletedRepoList: res.data,\n        isLoading: false,\n      });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  refreshDeletedRepoList = (repoID) => {\n    let deletedRepoList = this.state.deletedRepoList.filter(item => {\n      return item.repo_id !== repoID;\n    });\n    this.setState({deletedRepoList: deletedRepoList});\n  };\n\n  render() {\n    return (\n      <Fragment>\n        <div className=\"main-panel-north\">\n          <CommonToolbar onSearchedClick={this.props.onSearchedClick} />\n        </div>\n        <div className=\"main-panel-center\">\n          <div className=\"cur-view-container\">\n            <div className=\"cur-view-path\">\n              <div className=\"path-container\">\n                <Link to={ siteRoot + 'my-libs/' }>{gettext('My Libraries')}</Link>\n                <span className=\"path-split\">/</span>\n                <span>{gettext('Deleted Libraries')}</span>\n              </div>\n            </div>\n            <div className=\"cur-view-content\">\n              {this.state.isLoading && <Loading />}\n              {(!this.state.isLoading && this.state.deletedRepoList.length === 0) &&\n              <EmptyTip>\n                <h2>{gettext('No deleted libraries')}</h2>\n                <p>{gettext('You have not deleted any libraries in the last {placeholder} days. A deleted library will be cleaned automatically after this period.').replace('{placeholder}', trashReposExpireDays)}</p>\n              </EmptyTip>\n              }\n              {this.state.deletedRepoList.length !== 0 &&\n                <div>\n                  <p className=\"tip mt-2\">{gettext('Tip: libraries deleted {placeholder} days ago will be cleaned automatically.').replace('{placeholder}', trashReposExpireDays)}</p>\n                  <DeletedRepoTable\n                    deletedRepoList={this.state.deletedRepoList}\n                    refreshDeletedRepoList={this.refreshDeletedRepoList}\n                  />\n                </div>\n              }\n            </div>\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nclass DeletedRepoTable extends Component {\n\n  render() {\n    let deletedRepos = this.props.deletedRepoList;\n    return (\n      <table>\n        <thead>\n          <tr>\n            <th style={{width: '4%'}}>{/*img*/}</th>\n            <th style={{width: '52%'}}>{gettext('Name')}</th>\n            <th style={{width: '30%'}}>{gettext('Deleted Time')}</th>\n            <th style={{width: '14%'}}></th>\n          </tr>\n        </thead>\n        <tbody>\n          { deletedRepos && deletedRepos.map((item) => {\n            return (\n              <DeletedRepoItem\n                key={item.repo_id}\n                repo={item}\n                refreshDeletedRepoList={this.props.refreshDeletedRepoList}\n              />\n            );\n          })}\n        </tbody>\n      </table>\n    );\n  }\n}\n\nDeletedRepoTable.propTypes = {\n  deletedRepoList: PropTypes.array.isRequired,\n  refreshDeletedRepoList: PropTypes.func.isRequired,\n};\n\nclass DeletedRepoItem extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      hideRestoreMenu: true,\n      highlight: false,\n    };\n  }\n\n  onMouseEnter = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        hideRestoreMenu: false,\n        highlight: true,\n      });\n    }\n  };\n\n  onMouseLeave = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        hideRestoreMenu: true,\n        highlight: false,\n      });\n    }\n  };\n\n  restoreDeletedRepo = (e) => {\n    e.preventDefault();\n    let repoID = this.props.repo.repo_id;\n    let repoName = this.props.repo.repo_name;\n    seafileAPI.restoreDeletedRepo(repoID).then(res => {\n      let message = gettext('Successfully restored the library.') + '  ' + repoName;\n      toaster.success(message);\n      this.props.refreshDeletedRepoList(repoID);\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      if (errMessage === gettext('Error')) {\n        errMessage = gettext('Failed. Please check the network.');\n      }\n      toaster.danger(errMessage);\n    });\n  };\n\n  render() {\n    let localTime = moment.utc(this.props.repo.del_time).toDate();\n    localTime = moment(localTime).fromNow();\n    let iconUrl = Utils.getLibIconUrl(this.props.repo);\n\n    return (\n      <tr\n        className={this.state.highlight ? 'tr-highlight' : ''}\n        onMouseEnter={this.onMouseEnter}\n        onMouseLeave={this.onMouseLeave}\n        tabIndex=\"0\"\n        onFocus={this.onMouseEnter}\n      >\n        <td className=\"text-center\"><img src={iconUrl} alt='' width=\"24\" /></td>\n        <td className=\"name\">{this.props.repo.repo_name}</td>\n        <td className=\"update\">{localTime}</td>\n        <td>\n          <a href=\"#\" onClick={this.restoreDeletedRepo} title={gettext('Restore')}\n            role=\"button\" aria-label={gettext('Restore')}\n            className={`sf2-icon-reply action-icon ${this.state.highlight ? '' : 'vh'}`}></a>\n        </td>\n      </tr>\n    );\n  }\n}\n\nDeletedRepoItem.propTypes = {\n  isItemFreezed: PropTypes.bool.isRequired,\n  repo: PropTypes.object.isRequired,\n  refreshDeletedRepoList: PropTypes.func.isRequired,\n};\n\nMyLibsDeleted.propTypes = {\n  onSearchedClick: PropTypes.func.isRequired,\n};\n\nexport default MyLibsDeleted;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport moment from 'moment';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter, Input, Alert } from 'reactstrap';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport Repo from '../../models/repo';\n\nconst shareRepoListItemProps = {\n  repo: PropTypes.object.isRequired,\n  onRepoSelect: PropTypes.func.isRequired,\n  onPermissionChange: PropTypes.func.isRequired,\n};\n\nclass ShareRepoListItem extends React.Component {\n\n  onRepoSelect = (e) => {\n    let isChecked = e.target.checked;\n    this.props.onRepoSelect(this.props.repo, isChecked);\n  };\n\n  onPermissionChange = (e) => {\n    let permission = e.target.value;\n    let repo = this.props.repo;\n    this.props.onPermissionChange(repo, permission);\n  };\n\n  render() {\n    let repo = this.props.repo;\n    let iconUrl = Utils.getLibIconUrl(repo);\n    return (\n      <tr>\n        <td className=\"text-center\"><input type=\"checkbox\" className=\"vam\" name=\"repo\" onChange={this.onRepoSelect} /></td>\n        <td className=\"text-center\"><img src={iconUrl} width=\"24\" alt={gettext('icon')} /></td>\n        <td className=\"name\">{repo.repo_name}</td>\n        <td>{moment(repo.last_modified).fromNow()}</td>\n        <td>\n          <Input style={{height: '1.5rem', padding: 0}} type=\"select\" name=\"select\" onChange={this.onPermissionChange} value={repo.sharePermission}>\n            <option value='rw'>{gettext('Read-Write')}</option>\n            <option value='r'>{gettext('Read-Only')}</option>\n          </Input>\n        </td>\n      </tr>\n    );\n  }\n}\n\nShareRepoListItem.propTypes = shareRepoListItemProps;\n\nconst propTypes = {\n  onRepoSelectedHandler: PropTypes.func.isRequired,\n  onShareRepoDialogClose: PropTypes.func.isRequired,\n};\n\nclass ShareRepoDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      repoList: [],\n      currentRepo: null,\n      permission: 'rw',\n      selectedRepoList: [],\n      errMessage: '',\n    };\n  }\n\n  componentDidMount() {\n    seafileAPI.listRepos({type: 'mine'}).then(res => {\n      let repoList = res.data.repos.map(item => {\n        let repo = new Repo(item);\n        repo.sharePermission = 'rw';\n        return repo;\n      });\n      this.setState({repoList: repoList});\n    });\n  }\n\n  onRepoSelect = (repo, isChecked) => {\n    let selectedRepoList = [];\n    if (isChecked) {\n      this.state.selectedRepoList.push(repo);\n      selectedRepoList = this.state.selectedRepoList;\n    } else {\n      selectedRepoList = this.state.selectedRepoList.filter(item => {\n        return item.repo_id !== repo.repo_id;\n      });\n    }\n    this.setState({selectedRepoList: selectedRepoList});\n  };\n\n  onPermissionChange = (repo, permission) => {\n    let repoList = this.state.repoList.map(item => {\n      if (item.repo_id === repo.repo_id) {\n        item.sharePermission = permission;\n      }\n      return item;\n    });\n    this.setState({repoList: repoList});\n  };\n\n  handleSubmit = () => {\n    if (this.state.selectedRepoList.length === 0) {\n      let errMessage = gettext('Please select a library to share.');\n      this.setState({errMessage: errMessage});\n      return;\n    }\n\n    this.props.onRepoSelectedHandler(this.state.selectedRepoList);\n    this.onCloseDialog();\n  };\n\n  onCloseDialog = () => {\n    this.props.onShareRepoDialogClose();\n  };\n\n  render() {\n    return (\n      <Modal isOpen={true}>\n        <ModalHeader toggle={this.toggle}>{gettext('Select libraries to share')}</ModalHeader>\n        <ModalBody className=\"dialog-list-container\">\n          <table>\n            <thead>\n              <tr>\n                <th width='4%'>{/* select */}</th>\n                <th width='6%'>{/* icon */}</th>\n                <th width='35%'>{gettext('Name')}</th>\n                <th width='25%'>{gettext('Last Update')}</th>\n                <th width='30%'>{gettext('Permission')}</th>\n              </tr>\n            </thead>\n            <tbody>\n              {this.state.repoList.map((repo, index) => {\n                return (\n                  <ShareRepoListItem\n                    key={index}\n                    repo={repo}\n                    onRepoSelect={this.onRepoSelect}\n                    onPermissionChange={this.onPermissionChange}\n                  />\n                );\n              })}\n            </tbody>\n          </table>\n        </ModalBody>\n        {this.state.errMessage && <Alert color=\"danger\" className=\"mt-2\">{this.state.errMessage}</Alert>}\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.onCloseDialog}>{gettext('Close')}</Button>\n          <Button color=\"primary\" onClick={this.handleSubmit}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nShareRepoDialog.propTypes = propTypes;\n\nexport default ShareRepoDialog;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport moment from 'moment';\nimport { Dropdown, DropdownMenu, DropdownToggle, DropdownItem } from 'reactstrap';\nimport { Link, navigate } from '@gatsbyjs/reach-router';\nimport { Utils } from '../../utils/utils';\nimport { gettext, siteRoot, isPro, username, folderPermEnabled, isSystemStaff, enableResetEncryptedRepoPassword, isEmailConfigured, enableRepoAutoDel } from '../../utils/constants';\nimport ModalPortal from '../../components/modal-portal';\nimport ShareDialog from '../../components/dialog/share-dialog';\nimport LibSubFolderPermissionDialog from '../../components/dialog/lib-sub-folder-permission-dialog';\nimport DeleteRepoDialog from '../../components/dialog/delete-repo-dialog';\nimport ChangeRepoPasswordDialog from '../../components/dialog/change-repo-password-dialog';\nimport ResetEncryptedRepoPasswordDialog from '../../components/dialog/reset-encrypted-repo-password-dialog';\nimport LibOldFilesAutoDelDialog from '../../components/dialog/lib-old-files-auto-del-dialog';\nimport Rename from '../rename';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport LibHistorySettingDialog from '../dialog/lib-history-setting-dialog';\nimport toaster from '../toast';\nimport RepoAPITokenDialog from '../dialog/repo-api-token-dialog';\nimport RepoShareAdminDialog from '../dialog/repo-share-admin-dialog';\nimport RepoMonitoredIcon from '../../components/repo-monitored-icon';\n\nconst propTypes = {\n  currentGroup: PropTypes.object,\n  libraryType: PropTypes.string,\n  repo: PropTypes.object.isRequired,\n  isItemFreezed: PropTypes.bool.isRequired,\n  onFreezedItem: PropTypes.func.isRequired,\n  onUnfreezedItem: PropTypes.func.isRequired,\n  onItemUnshare: PropTypes.func.isRequired,\n  onItemDetails: PropTypes.func,\n  onItemRename: PropTypes.func,\n  onItemDelete: PropTypes.func,\n  onMonitorRepo: PropTypes.func\n};\n\nclass SharedRepoListItem extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      highlight: false,\n      isOperationShow: false,\n      isItemMenuShow: false,\n      isAdvancedMenuShown: false,\n      isShowSharedDialog: false,\n      isRenaming: false,\n      isStarred: this.props.repo.starred,\n      isFolderPermissionDialogOpen: false,\n      isHistorySettingDialogShow: false,\n      isDeleteDialogShow: false,\n      isAPITokenDialogShow: false,\n      isRepoShareAdminDialogOpen: false,\n      isRepoDeleted: false,\n      isChangePasswordDialogShow: false,\n      isResetPasswordDialogShow: false,\n      isOldFilesAutoDelDialogOpen: false,\n    };\n    this.isDeparementOnwerGroupMember = false;\n  }\n\n  onMouseEnter = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        highlight: true,\n        isOperationShow: true,\n      });\n    }\n  };\n\n  onMouseOver = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        highlight: true,\n        isOperationShow: true,\n      });\n    }\n  };\n\n  onMouseLeave = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        highlight: false,\n        isOperationShow: false,\n      });\n    }\n  };\n\n  clickOperationMenuToggle = (e) => {\n    this.toggleOperationMenu(e);\n  };\n\n  onDropdownToggleKeyDown = (e) => {\n    if (e.key == 'Enter' || e.key == 'Space') {\n      this.clickOperationMenuToggle(e);\n    }\n  };\n\n  toggleOperationMenu = (e) => {\n    let dataset = e.target ? e.target.dataset : null;\n    if (dataset && dataset.toggle && dataset.toggle === 'Rename') {\n      this.setState({isItemMenuShow: !this.state.isItemMenuShow});\n      return;\n    }\n\n    this.setState(\n      {isItemMenuShow: !this.state.isItemMenuShow},\n      () => {\n        if (this.state.isItemMenuShow) {\n          this.props.onFreezedItem();\n        } else {\n          this.props.onUnfreezedItem();\n          this.setState({\n            highlight: false,\n            isOperationShow: false,\n          });\n        }\n      }\n    );\n  };\n\n  toggleAdvancedMenuShown = (e) => {\n    this.setState({ isAdvancedMenuShown: true });\n  };\n\n  toggleAdvancedMenu = (e) => {\n    e.stopPropagation();\n    this.setState({ isAdvancedMenuShown: !this.state.isAdvancedMenuShown }, () => {\n      this.toggleOperationMenu(e);\n    });\n  };\n\n  onDropDownMouseMove = (e) => {\n    if (this.state.isAdvancedMenuShown && e.target && e.target.className === 'dropdown-item') {\n      this.setState({\n        isAdvancedMenuShown: false\n      });\n    }\n  };\n\n  getRepoComputeParams = () => {\n    let repo = this.props.repo;\n\n    let iconUrl = Utils.getLibIconUrl(repo);\n    let iconTitle = Utils.getLibIconTitle(repo);\n    let libPath = `${siteRoot}library/${repo.repo_id}/${Utils.encodePath(repo.repo_name)}/`;\n\n    return { iconUrl, iconTitle, libPath };\n  };\n\n  onMenuItemKeyDown = (e) => {\n    if (e.key == 'Enter' || e.key == 'Space') {\n      this.onMenuItemClick(e);\n    }\n  };\n\n  onMenuItemClick = (e) => {\n    let operation = e.target.dataset.toggle;\n    switch(operation) {\n      case 'Rename':\n        this.onItemRenameToggle();\n        break;\n      case 'Folder Permission':\n        this.onItemFolderPermissionToggle();\n        break;\n      case 'Details':\n        this.onItemDetails();\n        break;\n      case 'Share':\n        this.onItemShare();\n        break;\n      case 'Unshare':\n        this.onItemUnshare();\n        break;\n      case 'History Setting':\n        this.onHistorySettingToggle();\n        break;\n      case 'API Token':\n        this.onAPITokenToggle();\n        break;\n      case 'Share Admin':\n        this.toggleRepoShareAdminDialog();\n        break;\n      case 'Change Password':\n        this.onChangePasswordToggle();\n        break;\n      case 'Reset Password':\n        this.onResetPasswordToggle();\n        break;\n      case 'Watch File Changes':\n        this.watchFileChanges();\n        break;\n      case 'Unwatch File Changes':\n        this.unwatchFileChanges();\n        break;\n      case 'Old Files Auto Delete':\n        this.toggleOldFilesAutoDelDialog();\n        break;\n      // no default\n    }\n  };\n\n  watchFileChanges = () => {\n    const { repo } = this.props;\n    seafileAPI.monitorRepo(repo.repo_id).then(() => {\n      this.props.onMonitorRepo(repo, true);\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  unwatchFileChanges = () => {\n    const { repo } = this.props;\n    seafileAPI.unMonitorRepo(repo.repo_id).then(() => {\n      this.props.onMonitorRepo(repo, false);\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  onItemRenameToggle = () => {\n    this.props.onFreezedItem();\n    this.setState({\n      isRenaming: !this.state.isRenaming,\n      isOperationShow: !this.state.isOperationShow\n    });\n  };\n\n  onRenameConfirm = (name) => {\n    this.props.onItemRename(this.props.repo, name);\n    this.onRenameCancel();\n  };\n\n  onRenameCancel = () => {\n    this.props.onUnfreezedItem();\n    this.setState({isRenaming: !this.state.isRenaming});\n  };\n\n  onItemFolderPermissionToggle = () => {\n    this.setState({isFolderPermissionDialogOpen: !this.state.isFolderPermissionDialogOpen});\n  };\n\n  onHistorySettingToggle = () => {\n    this.setState({isHistorySettingDialogShow: !this.state.isHistorySettingDialogShow});\n  };\n\n  onItemDetails = () => {\n    this.props.onItemDetails(this.props.repo);\n  };\n\n  onItemShare = (e) => {\n    e.preventDefault();\n    this.setState({isShowSharedDialog: true});\n  };\n\n  onItemUnshare = (e) => {\n    e.preventDefault();\n    this.props.onItemUnshare(this.props.repo);\n  };\n\n  onItemDeleteToggle = (e) => {\n    e.preventDefault();\n    this.setState({isDeleteDialogShow: !this.state.isDeleteDialogShow});\n  };\n\n  onItemDelete = () => {\n    const { currentGroup, repo } = this.props;\n    if (!currentGroup) {  // repo can not be deleted in share all module\n      return;\n    }\n\n    const groupID = currentGroup.id;\n\n    seafileAPI.deleteGroupOwnedLibrary(groupID, repo.repo_id).then(() => {\n\n      this.setState({\n        isRepoDeleted: true,\n        isDeleteDialogShow: false,\n      });\n\n      this.props.onItemDelete(repo);\n      let name = repo.repo_name;\n      var msg = gettext('Successfully deleted {name}.').replace('{name}', name);\n      toaster.success(msg);\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      if (errMessage === gettext('Error')) {\n        let name = repo.repo_name;\n        errMessage = gettext('Failed to delete {name}.').replace('{name}', name);\n      }\n      toaster.danger(errMessage);\n\n      this.setState({isRepoDeleted: false});\n    });\n  };\n\n  toggleShareDialog = () => {\n    this.setState({isShowSharedDialog: false});\n  };\n\n  toggleRepoShareAdminDialog = () => {\n    this.setState({isRepoShareAdminDialogOpen: !this.state.isRepoShareAdminDialogOpen});\n  };\n\n  toggleOldFilesAutoDelDialog = () => {\n    this.setState({isOldFilesAutoDelDialogOpen: !this.state.isOldFilesAutoDelDialogOpen});\n  };\n\n  onAPITokenToggle = () => {\n    this.setState({isAPITokenDialogShow: !this.state.isAPITokenDialogShow});\n  };\n\n  onChangePasswordToggle = () => {\n    this.setState({isChangePasswordDialogShow: !this.state.isChangePasswordDialogShow});\n  };\n\n  onResetPasswordToggle = () => {\n    this.setState({isResetPasswordDialogShow: !this.state.isResetPasswordDialogShow});\n  };\n\n  translateMenuItem = (menuItem) => {\n    let translateResult = '';\n    switch(menuItem) {\n      case 'Rename':\n        translateResult = gettext('Rename');\n        break;\n      case 'Folder Permission':\n        translateResult = gettext('Folder Permission');\n        break;\n      case 'Details':\n        translateResult = gettext('Details');\n        break;\n      case 'Unshare':\n        translateResult = gettext('Unshare');\n        break;\n      case 'Share':\n        translateResult = gettext('Share');\n        break;\n      case 'History Setting':\n        translateResult = gettext('History Setting');\n        break;\n      case 'Share Admin':\n        translateResult = gettext('Share Admin');\n        break;\n      case 'Change Password':\n        translateResult = gettext('Change Password');\n        break;\n      case 'Reset Password':\n        translateResult = gettext('Reset Password');\n        break;\n      case 'Watch File Changes':\n        translateResult = gettext('Watch File Changes');\n        break;\n      case 'Unwatch File Changes':\n        translateResult = gettext('Unwatch File Changes');\n        break;\n      case 'Old Files Auto Delete':\n        translateResult = gettext('Auto Deletion Setting');\n        break;\n      case 'API Token':\n        translateResult = 'API Token'; // translation is not needed here\n        break;\n      case 'Advanced':\n        translateResult = gettext('Advanced');\n        break;\n      default:\n        break;\n    }\n    return translateResult;\n  };\n\n  getAdvancedOperations = () => {\n    const operations = [];\n    operations.push('API Token');\n    if (enableRepoAutoDel) {\n      operations.push('Old Files Auto Delete');\n    }\n    return operations;\n  };\n\n  generatorOperations = () => {\n    let { repo, currentGroup } = this.props;\n    //todo this have a bug; use current api is not return admins param;\n    let isStaff = currentGroup && currentGroup.admins && currentGroup.admins.indexOf(username) > -1; //for group repolist;\n    let isRepoOwner = repo.owner_email === username;\n    let isAdmin = repo.is_admin;\n    let operations = [];\n    if (isPro) {\n      if (repo.owner_email.indexOf('@seafile_group') != -1) {\n        if (isStaff) {\n          if (repo.owner_email == currentGroup.id + '@seafile_group') {\n            this.isDeparementOnwerGroupMember = true;\n            operations = ['Rename'];\n            if (folderPermEnabled) {\n              operations.push('Folder Permission');\n            }\n            operations.push('Share Admin', 'Divider');\n            if (repo.encrypted) {\n              operations.push('Change Password');\n            }\n            if (repo.encrypted && enableResetEncryptedRepoPassword && isEmailConfigured) {\n              operations.push('Reset Password');\n            }\n            if (repo.permission == 'r' || repo.permission == 'rw') {\n              const monitorOp = repo.monitored ? 'Unwatch File Changes' : 'Watch File Changes';\n              operations.push(monitorOp);\n            }\n            operations.push('Divider', 'History Setting', 'Details');\n            if (Utils.isDesktop()) {\n              operations.push('Advanced');\n            }\n            return operations;\n          } else {\n            operations.push('Unshare');\n          }\n        }\n      } else {\n        if (isRepoOwner || isAdmin) {\n          operations.push('Share');\n        }\n        if (isStaff || isRepoOwner || isAdmin) {\n          operations.push('Unshare');\n        }\n      }\n      if (repo.permission == 'r' || repo.permission == 'rw') {\n        const monitorOp = repo.monitored ? 'Unwatch File Changes' : 'Watch File Changes';\n        operations.push(monitorOp);\n      }\n    } else {\n      if (isRepoOwner) {\n        operations.push('Share');\n      }\n      if (isStaff || isRepoOwner) {\n        operations.push('Unshare');\n      }\n    }\n    return operations;\n  };\n\n  generatorMobileMenu = () => {\n    let operations = [];\n    if (this.props.libraryType && this.props.libraryType === 'public') {\n      let isRepoOwner = this.props.repo.owner_email === username;\n      if (isSystemStaff || isRepoOwner) {\n        operations.push('Unshare');\n      }\n    } else {\n      operations = this.generatorOperations();\n      if (this.isDeparementOnwerGroupMember) {\n        operations.unshift('Unshare');\n        operations.unshift('Share');\n      }\n    }\n\n    if (!operations.length) {\n      return null;\n    }\n    return (\n      <Dropdown isOpen={this.state.isItemMenuShow} toggle={this.toggleOperationMenu}>\n        <DropdownToggle\n          tag=\"i\"\n          className=\"sf-dropdown-toggle fa fa-ellipsis-v ml-0\"\n          title={gettext('More Operations')}\n          data-toggle=\"dropdown\"\n          aria-expanded={this.state.isItemMenuShow}\n          onClick={this.clickOperationMenuToggle}\n        />\n        <div className={`${this.state.isItemMenuShow?'':'d-none'}`} onClick={this.toggleOperationMenu}>\n          <div className=\"mobile-operation-menu-bg-layer\"></div>\n          <div className=\"mobile-operation-menu\">\n            {operations.map((item, index) => {\n              return (\n                <DropdownItem key={index} data-toggle={item} onClick={this.onMenuItemClick}>{this.translateMenuItem(item)}</DropdownItem>\n              );\n            })}\n          </div>\n        </div>\n      </Dropdown>\n    );\n  };\n\n  generatorPCMenu = () => {\n    let operations = [];\n    if (this.props.libraryType && this.props.libraryType === 'public') {\n      let isRepoOwner = this.props.repo.owner_email === username;\n      if (isSystemStaff || isRepoOwner) {\n        operations.push('Unshare');\n      }\n    } else {\n      operations = this.generatorOperations();\n    }\n    const shareOperation   = <a href=\"#\" className=\"op-icon sf2-icon-share\" title={gettext('Share')} role=\"button\" aria-label={gettext('Share')} onClick={this.onItemShare}></a>;\n    const unshareOperation = <a href=\"#\" className=\"op-icon sf2-icon-x3\" title={gettext('Unshare')} role=\"button\" aria-label={gettext('Unshare')} onClick={this.onItemUnshare}></a>;\n    const deleteOperation  = <a href=\"#\" className=\"op-icon sf2-icon-delete\" title={gettext('Delete')} role=\"button\" aria-label={gettext('Delete')} onClick={this.onItemDeleteToggle}></a>;\n\n    if (this.isDeparementOnwerGroupMember) {\n      const advancedOperations = this.getAdvancedOperations();\n      return (\n        <Fragment>\n          {shareOperation}\n          {deleteOperation}\n          <Dropdown isOpen={this.state.isItemMenuShow} toggle={this.toggleOperationMenu}>\n            <DropdownToggle\n              className=\"sf-dropdown-toggle sf2-icon-caret-down border-0 p-0\"\n              title={gettext('More Operations')}\n              data-toggle=\"dropdown\"\n              aria-expanded={this.state.isItemMenuShow}\n              aria-haspopup={true}\n              style={{'minWidth': '0'}}\n              onClick={this.clickOperationMenuToggle}\n              onKeyDown={this.onDropdownToggleKeyDown}\n            />\n            <DropdownMenu onMouseMove={this.onDropDownMouseMove}>\n              {operations.map((item, index)=> {\n                if (item == 'Divider') {\n                  return <DropdownItem key={index} divider />;\n                } else if (item == 'Advanced') {\n                  return (\n                    <Dropdown\n                      key={index}\n                      direction=\"right\"\n                      className=\"w-100\"\n                      isOpen={this.state.isAdvancedMenuShown}\n                      toggle={this.toggleAdvancedMenu}\n                      onMouseMove={(e) => {e.stopPropagation();}}\n                    >\n                      <DropdownToggle\n                        caret\n                        className=\"dropdown-item font-weight-normal rounded-0 d-flex justify-content-between align-items-center pr-2\"\n                        onMouseEnter={this.toggleAdvancedMenuShown}\n                      >\n                        {this.translateMenuItem(item)}\n                      </DropdownToggle>\n                      <DropdownMenu>\n                        {advancedOperations.map((item, index)=> {\n                          return (<DropdownItem key={index} data-toggle={item} onClick={this.onMenuItemClick} onKeyDown={this.onMenuItemKeyDown}>{this.translateMenuItem(item)}</DropdownItem>);\n                        })}\n                      </DropdownMenu>\n                    </Dropdown>\n                  );\n                } else {\n                  return (<DropdownItem key={index} data-toggle={item} onClick={this.onMenuItemClick} onKeyDown={this.onMenuItemKeyDown}>{this.translateMenuItem(item)}</DropdownItem>);\n                }\n              })}\n            </DropdownMenu>\n          </Dropdown>\n        </Fragment>\n      );\n    } else {\n      return (\n        <Fragment>\n          {operations.map(item => {\n            switch (item) {\n              case 'Share':\n                return <Fragment key={item}>{shareOperation}</Fragment>;\n              case 'Unshare':\n                return <Fragment key={item}>{unshareOperation}</Fragment>;\n              case 'Watch File Changes':\n              case 'Unwatch File Changes':\n                return (\n                  <Dropdown isOpen={this.state.isItemMenuShow} toggle={this.toggleOperationMenu} key={item}>\n                    <DropdownToggle\n                      className=\"sf-dropdown-toggle sf2-icon-caret-down border-0 p-0\"\n                      title={gettext('More Operations')}\n                      data-toggle=\"dropdown\"\n                      aria-expanded={this.state.isItemMenuShow}\n                      aria-haspopup={true}\n                      style={{'minWidth': '0'}}\n                      onClick={this.clickOperationMenuToggle}\n                      onKeyDown={this.onDropdownToggleKeyDown}\n                    />\n                    <DropdownMenu>\n                      {[item].map((item, index) => {\n                        return <DropdownItem key={index} data-toggle={item} onClick={this.onMenuItemClick} onKeyDown={this.onMenuItemKeyDown}>{this.translateMenuItem(item)}</DropdownItem>;\n                      })}\n                    </DropdownMenu>\n                  </Dropdown>\n                );\n              // no default\n              default:\n                return null;\n            }\n          })}\n        </Fragment>\n      );\n    }\n  };\n\n  onToggleStarRepo = (e) => {\n    e.preventDefault();\n    const { repo_name: repoName } = this.props.repo;\n    if (this.state.isStarred) {\n      seafileAPI.unstarItem(this.props.repo.repo_id, '/').then(() => {\n        this.setState({isStarred: !this.state.isStarred});\n        const msg = gettext('Successfully unstarred {library_name_placeholder}.')\n          .replace('{library_name_placeholder}', repoName);\n        toaster.success(msg);\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    } else {\n      seafileAPI.starItem(this.props.repo.repo_id, '/').then(() => {\n        this.setState({isStarred: !this.state.isStarred});\n        const msg = gettext('Successfully starred {library_name_placeholder}.')\n          .replace('{library_name_placeholder}', repoName);\n        toaster.success(msg);\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    }\n  };\n\n  renderPCUI = () => {\n    let { iconUrl, iconTitle, libPath } = this.getRepoComputeParams();\n    let { repo } = this.props;\n    return (\n      <Fragment>\n        <tr className={this.state.highlight ? 'tr-highlight' : ''} onMouseEnter={this.onMouseEnter} onMouseOver={this.onMouseOver} onMouseLeave={this.onMouseLeave} onFocus={this.onMouseEnter}>\n          <td className=\"text-center\">\n            <a href=\"#\" role=\"button\" aria-label={this.state.isStarred ? gettext('Unstar') : gettext('Star')} onClick={this.onToggleStarRepo}>\n              <i className={`fa-star ${this.state.isStarred ? 'fas' : 'far star-empty'}`}></i>\n            </a>\n          </td>\n          <td><img src={iconUrl} title={iconTitle} alt={iconTitle} width=\"24\" /></td>\n          <td>\n            {this.state.isRenaming ?\n              <Rename name={repo.repo_name} onRenameConfirm={this.onRenameConfirm} onRenameCancel={this.onRenameCancel}/> :\n              <Fragment>\n                <Link to={libPath}>{repo.repo_name}</Link>\n                {repo.monitored && <RepoMonitoredIcon repoID={repo.repo_id} />}\n              </Fragment>\n            }\n          </td>\n          <td>{this.state.isOperationShow && this.generatorPCMenu()}</td>\n          <td>{repo.size}</td>\n          <td title={moment(repo.last_modified).format('llll')}>{moment(repo.last_modified).fromNow()}</td>\n          <td title={repo.owner_contact_email}>{repo.owner_name}</td>\n        </tr>\n      </Fragment>\n    );\n  };\n\n  visitRepo = () => {\n    if (!this.state.isRenaming) {\n      navigate(this.repoURL);\n    }\n  };\n\n  renderMobileUI = () => {\n    let { iconUrl, iconTitle, libPath } = this.getRepoComputeParams();\n    let { repo } = this.props;\n    this.repoURL = libPath;\n    return (\n      <Fragment>\n        <tr className={this.state.highlight ? 'tr-highlight' : ''}  onMouseEnter={this.onMouseEnter} onMouseOver={this.onMouseOver} onMouseLeave={this.onMouseLeave}>\n          <td onClick={this.visitRepo}><img src={iconUrl} title={iconTitle} width=\"24\" alt={iconTitle}/></td>\n          <td onClick={this.visitRepo}>\n            {this.state.isRenaming ?\n              <Rename name={repo.repo_name} onRenameConfirm={this.onRenameConfirm} onRenameCancel={this.onRenameCancel} /> :\n              <Fragment>\n                <Link to={libPath}>{repo.repo_name}</Link>\n                {repo.monitored && <RepoMonitoredIcon repoID={repo.repo_id} />}\n              </Fragment>\n            }\n            <br />\n            <span className=\"item-meta-info\" title={repo.owner_contact_email}>{repo.owner_name}</span>\n            <span className=\"item-meta-info\">{repo.size}</span>\n            <span className=\"item-meta-info\" title={moment(repo.last_modified).format('llll')}>{moment(repo.last_modified).fromNow()}</span>\n          </td>\n          <td>{this.generatorMobileMenu()}</td>\n        </tr>\n      </Fragment>\n    );\n  };\n\n  render() {\n    let { repo } = this.props;\n    let isGroupOwnedRepo = repo.owner_email.indexOf('@seafile_group') > -1;\n    return (\n      <Fragment>\n        {Utils.isDesktop() ? this.renderPCUI() : this.renderMobileUI()}\n        {this.state.isShowSharedDialog && (\n          <ModalPortal>\n            <ShareDialog\n              itemType={'library'}\n              itemName={repo.repo_name}\n              itemPath={'/'}\n              repoID={repo.repo_id}\n              repoEncrypted={repo.encrypted}\n              enableDirPrivateShare={true}\n              userPerm={repo.permission}\n              isAdmin={repo.is_admin}\n              isGroupOwnedRepo={isGroupOwnedRepo}\n              toggleDialog={this.toggleShareDialog}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isFolderPermissionDialogOpen && (\n          <ModalPortal>\n            <LibSubFolderPermissionDialog\n              toggleDialog={this.onItemFolderPermissionToggle}\n              repoID={repo.repo_id}\n              repoName={repo.repo_name}\n              isDepartmentRepo={true}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isDeleteDialogShow &&\n          <ModalPortal>\n            <DeleteRepoDialog\n              repo={this.props.repo}\n              isRepoDeleted={this.state.isRepoDeleted}\n              onDeleteRepo={this.onItemDelete}\n              toggle={this.onItemDeleteToggle}\n            />\n          </ModalPortal>\n        }\n        {this.state.isHistorySettingDialogShow && (\n          <ModalPortal>\n            <LibHistorySettingDialog\n              repoID={repo.repo_id}\n              itemName={repo.repo_name}\n              toggleDialog={this.onHistorySettingToggle}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isAPITokenDialogShow && (\n          <ModalPortal>\n            <RepoAPITokenDialog\n              repo={repo}\n              onRepoAPITokenToggle={this.onAPITokenToggle}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isRepoShareAdminDialogOpen && (\n          <ModalPortal>\n            <RepoShareAdminDialog\n              repo={repo}\n              toggleDialog={this.toggleRepoShareAdminDialog}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isChangePasswordDialogShow && (\n          <ModalPortal>\n            <ChangeRepoPasswordDialog\n              repoID={repo.repo_id}\n              repoName={repo.repo_name}\n              toggleDialog={this.onChangePasswordToggle}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isResetPasswordDialogShow && (\n          <ModalPortal>\n            <ResetEncryptedRepoPasswordDialog\n              repoID={repo.repo_id}\n              toggleDialog={this.onResetPasswordToggle}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isOldFilesAutoDelDialogOpen && (\n          <ModalPortal>\n            <LibOldFilesAutoDelDialog\n              repoID={repo.repo_id}\n              toggleDialog={this.toggleOldFilesAutoDelDialog}\n            />\n          </ModalPortal>\n        )}\n\n      </Fragment>\n    );\n  }\n}\n\nSharedRepoListItem.propTypes = propTypes;\n\nexport default SharedRepoListItem;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport SharedRepoListItem from './shared-repo-list-item';\nimport toaster from '../toast';\nimport LibsMobileThead from '../libs-mobile-thead';\nimport Loading from '../loading';\n\nconst propTypes = {\n  libraryType: PropTypes.string,\n  currentGroup: PropTypes.object,\n  isShowTableThread: PropTypes.bool,\n  sortBy: PropTypes.string,\n  sortOrder: PropTypes.string,\n  sortItems: PropTypes.func,\n  repoList: PropTypes.array.isRequired,\n  onItemUnshare: PropTypes.func.isRequired,\n  onItemDelete: PropTypes.func,\n  onItemDetails: PropTypes.func,\n  onItemRename: PropTypes.func,\n  hasNextPage: PropTypes.bool,\n  onMonitorRepo: PropTypes.func,\n};\n\nclass SharedRepoListView extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isItemFreezed: false,\n    };\n  }\n\n  sortByName = (e) => {\n    e.preventDefault();\n    const sortBy = 'name';\n    const sortOrder = this.props.sortOrder == 'asc' ? 'desc' : 'asc';\n    this.props.sortItems(sortBy, sortOrder);\n  };\n\n  sortByTime = (e) => {\n    e.preventDefault();\n    const sortBy = 'time';\n    const sortOrder = this.props.sortOrder == 'asc' ? 'desc' : 'asc';\n    this.props.sortItems(sortBy, sortOrder);\n  };\n\n  sortBySize = (e) => {\n    e.preventDefault();\n    const sortBy = 'size';\n    const sortOrder = this.props.sortOrder == 'asc' ? 'desc' : 'asc';\n    this.props.sortItems(sortBy, sortOrder);\n  };\n\n  getSortMetaData = () => {\n    return {\n      sortByName: this.props.sortBy == 'name',\n      sortByTime: this.props.sortBy == 'time',\n      sortBySize: this.props.sortBy == 'size',\n      sortIcon: this.props.sortOrder == 'asc' ? <span className=\"fas fa-caret-up\"></span> : <span className=\"fas fa-caret-down\"></span>\n    };\n  };\n\n  onFreezedItem = () => {\n    this.setState({isItemFreezed: true});\n  };\n\n  onUnfreezedItem = () => {\n    this.setState({isItemFreezed: false});\n  };\n\n  onItemRename = (repo, newName) => {\n    let isDuplicated = this.props.repoList.some(item => {\n      return item.name === newName;\n    });\n    if (isDuplicated) {\n      let errMessage = gettext('The name \"{name}\" is already taken. Please choose a different name.');\n      errMessage = errMessage.replace('{name}', Utils.HTMLescape(newName));\n      toaster.danger(errMessage);\n      return false;\n    }\n    this.props.onItemRename(repo, newName);\n  };\n\n  renderRepoListView = () => {\n    return (\n      <Fragment>\n        {this.props.repoList.map(repo => {\n          return (\n            <SharedRepoListItem\n              key={repo.repo_id}\n              repo={repo}\n              libraryType={this.props.libraryType}\n              currentGroup={this.props.currentGroup}\n              isItemFreezed={this.state.isItemFreezed}\n              onFreezedItem={this.onFreezedItem}\n              onUnfreezedItem={this.onUnfreezedItem}\n              onItemUnshare={this.props.onItemUnshare}\n              onItemDelete={this.props.onItemDelete}\n              onItemDetails={this.props.onItemDetails}\n              onItemRename={this.props.onItemRename}\n              onMonitorRepo={this.props.onMonitorRepo}\n            />\n          );\n        })}\n      </Fragment>\n    );\n  };\n\n  renderPCUI = () => {\n    let isShowTableThread = this.props.isShowTableThread !== undefined ? this.props.isShowTableThread : true;\n\n    const { sortByName, sortByTime, sortBySize, sortIcon } = this.getSortMetaData();\n\n    return (\n      <table className={isShowTableThread ? '' : 'table-thead-hidden'}>\n        <thead>\n          <tr>\n            <th width=\"4%\"></th>\n            <th width=\"4%\"><span className=\"sr-only\">{gettext('Library Type')}</span></th>\n            <th width=\"36%\"><a className=\"d-block table-sort-op\" href=\"#\" onClick={this.sortByName}>{gettext('Name')} {sortByName && sortIcon}</a></th>\n            <th width=\"12%\"><span className=\"sr-only\">{gettext('Actions')}</span></th>\n            <th width={'14%'}><a className=\"d-block table-sort-op\" href=\"#\" onClick={this.sortBySize}>{gettext('Size')} {sortBySize && sortIcon}</a></th>\n            <th width={'14%'}><a className=\"d-block table-sort-op\" href=\"#\" onClick={this.sortByTime}>{gettext('Last Update')} {sortByTime && sortIcon}</a></th>\n            <th width=\"16%\">{gettext('Owner')}</th>\n          </tr>\n        </thead>\n        <tbody>\n          {this.renderRepoListView()}\n        </tbody>\n      </table>\n    );\n  };\n\n  renderMobileUI = () => {\n    return (\n      <table className=\"table-thead-hidden\">\n        <LibsMobileThead />\n        <tbody>\n          {this.renderRepoListView()}\n        </tbody>\n      </table>\n    );\n  };\n\n  render() {\n    const table = Utils.isDesktop() ? this.renderPCUI() : this.renderMobileUI();\n    if (this.props.hasNextPage) {\n      return (\n        <Fragment>\n          {table}\n          <Loading />\n        </Fragment>\n      );\n    } else {\n      return table;\n    }\n  }\n}\n\nSharedRepoListView.propTypes = propTypes;\n\nexport default SharedRepoListView;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport cookie from 'react-cookies';\nimport MediaQuery from 'react-responsive';\nimport { Dropdown, DropdownToggle, DropdownMenu, DropdownItem } from 'reactstrap';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { gettext, canAddPublicRepo } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport Repo from '../../models/repo';\nimport toaster from '../../components/toast';\nimport Loading from '../../components/loading';\nimport EmptyTip from '../../components/empty-tip';\nimport ModalPortal from '../../components/modal-portal';\nimport CommonToolbar from '../../components/toolbar/common-toolbar';\nimport CreateRepoDialog from '../../components/dialog/create-repo-dialog';\nimport ShareRepoDialog from '../../components/dialog/share-repo-dialog';\nimport SharedRepoListView from '../../components/shared-repo-list-view/shared-repo-list-view';\nimport SortOptionsDialog from '../../components/dialog/sort-options';\n\nconst propTypes = {\n  onShowSidePanel: PropTypes.func.isRequired,\n  onSearchedClick: PropTypes.func.isRequired,\n};\n\nclass PublicSharedView extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isLoading: true,\n      errMessage: '',\n      emptyTip: '',\n      repoList: [],\n      sortBy: cookie.load('seafile-repo-dir-sort-by') || 'name', // 'name' or 'time' or 'size'\n      sortOrder: cookie.load('seafile-repo-dir-sort-order') || 'asc', // 'asc' or 'desc'\n      isSortOptionsDialogOpen: false,\n      libraryType: 'public',\n      isCreateMenuShow: false,\n      isCreateRepoDialogShow: false,\n      isSelectRepoDialpgShow: false,\n    };\n  }\n\n  componentDidMount() {\n    seafileAPI.listRepos({type: 'public'}).then((res) => {\n      let repoList = res.data.repos.map(item => {\n        let repo = new Repo(item);\n        return repo;\n      });\n      this.setState({\n        isLoading: false,\n        repoList: Utils.sortRepos(repoList, this.state.sortBy, this.state.sortOrder)\n      });\n    }).catch((error) => {\n      this.setState({\n        isLoading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  onCreateRepo = (repo) => {\n    seafileAPI.createPublicRepo(repo).then(res => {\n      let object = {  // need modify api return value\n        repo_id: res.data.id,\n        repo_name: res.data.name,\n        permission: res.data.permission,\n        size: res.data.size,\n        owner_name: res.data.owner_name,\n        owner_email: res.data.owner,\n        mtime: res.data.mtime,\n        encrypted: res.data.encrypted,\n      };\n      let repo = new Repo(object);\n      let repoList = this.addRepoItem(repo);\n      this.setState({repoList: repoList});\n      this.onCreateRepoToggle();\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  onRepoSelectedHandler = (selectedRepoList) => {\n    selectedRepoList.forEach(repo => {\n      seafileAPI.selectOwnedRepoToPublic(repo.repo_id, {share_type: 'public', permission: repo.sharePermission}).then(() => {\n        let repoList = this.addRepoItem(repo);\n        this.setState({repoList: repoList});\n      }).catch((error) => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    });\n  };\n\n  onItemUnshare = (repo) => {\n    seafileAPI.unshareRepo(repo.repo_id, {share_type: 'public'}).then(() => {\n      let repoList = this.state.repoList.filter(item => {\n        return item.repo_id !== repo.repo_id;\n      });\n      this.setState({repoList: repoList});\n      let message = gettext('Successfully unshared {name}').replace('{name}', repo.repo_name);\n      toaster.success(message);\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      if (errMessage === gettext('Error')) {\n        errMessage = gettext('Failed to unshare {name}').replace('{name}', repo.repo_name);\n      }\n      toaster(errMessage);\n    });\n  };\n\n  onItemDelete = () => {\n    // todo need to optimized\n  };\n\n  addRepoItem = (repo) => {\n    let isExist = false;\n    let repoIndex = 0;\n    let repoList = this.state.repoList;\n    for (let i = 0; i < repoList.length; i ++) {\n      if (repo.repo_id === repoList[i].repo_id) {\n        isExist = true;\n        repoIndex = i;\n        break;\n      }\n    }\n    if (isExist) {\n      this.state.repoList.splice(repoIndex, 1);\n    }\n\n    let newRepoList = this.state.repoList.map(item => {return item;});\n    newRepoList.unshift(repo);\n    return newRepoList;\n  };\n\n  onAddRepoToggle = () => {\n    this.setState({isCreateMenuShow: !this.state.isCreateMenuShow});\n  };\n\n  onCreateRepoToggle = () => {\n    this.setState({isCreateRepoDialogShow: !this.state.isCreateRepoDialogShow});\n  };\n\n  onSelectRepoToggle = () => {\n    this.setState({isSelectRepoDialpgShow: !this.state.isSelectRepoDialpgShow});\n  };\n\n  sortItems = (sortBy, sortOrder) => {\n    cookie.save('seafile-repo-dir-sort-by', sortBy);\n    cookie.save('seafile-repo-dir-sort-order', sortOrder);\n    this.setState({\n      sortBy: sortBy,\n      sortOrder: sortOrder,\n      repoList: Utils.sortRepos(this.state.repoList, sortBy, sortOrder)\n    });\n  };\n\n  toggleSortOptionsDialog = () => {\n    this.setState({\n      isSortOptionsDialogOpen: !this.state.isSortOptionsDialogOpen\n    });\n  };\n\n  render() {\n    let errMessage = this.state.errMessage;\n    let emptyTip = (\n      <EmptyTip>\n        <h2>{gettext('No public libraries')}</h2>\n        <p>{gettext('No public libraries have been created yet. A public library is accessible by all users. You can create a public library by clicking the \"Add Library\" button in the menu bar.')}</p>\n      </EmptyTip>\n    );\n    return (\n      <Fragment>\n        <div className=\"main-panel-north border-left-show\">\n          {canAddPublicRepo &&\n            <div className=\"cur-view-toolbar\">\n              <span className=\"sf2-icon-menu side-nav-toggle hidden-md-up d-md-none\" title=\"Side Nav Menu\" onClick={this.props.onShowSidePanel}></span>\n              <div className=\"operation\">\n                <Dropdown isOpen={this.state.isCreateMenuShow} toggle={this.onAddRepoToggle}>\n                  <MediaQuery query=\"(min-width: 768px)\">\n                    <DropdownToggle className='btn btn-secondary operation-item'>\n                      <i className=\"fas fa-plus-square text-secondary mr-1\"></i>{gettext('Add Library')}\n                    </DropdownToggle>\n                  </MediaQuery>\n                  <MediaQuery query=\"(max-width: 767.8px)\">\n                    <DropdownToggle\n                      tag=\"span\"\n                      className=\"sf2-icon-plus mobile-toolbar-icon\"\n                      title={gettext('Add Library')}\n                    />\n                  </MediaQuery>\n                  <DropdownMenu>\n                    <DropdownItem onClick={this.onSelectRepoToggle}>{gettext('Share existing libraries')}</DropdownItem>\n                    <DropdownItem onClick={this.onCreateRepoToggle}>{gettext('New Library')}</DropdownItem>\n                  </DropdownMenu>\n                </Dropdown>\n              </div>\n            </div>\n          }\n          <CommonToolbar onSearchedClick={this.props.onSearchedClick} />\n        </div>\n        <div className=\"main-panel-center\">\n          <div className=\"cur-view-container\">\n            <div className=\"cur-view-path\">\n              <h3 className=\"sf-heading m-0\">{gettext('Shared with all')}</h3>\n              {(!Utils.isDesktop() && this.state.repoList.length > 0) && <span className=\"sf3-font sf3-font-sort action-icon\" onClick={this.toggleSortOptionsDialog}></span>}\n            </div>\n            <div className=\"cur-view-content\">\n              {this.state.isLoading && <Loading />}\n              {(!this.state.isLoading && errMessage) && errMessage}\n              {(!this.state.isLoading && this.state.repoList.length === 0) && emptyTip}\n              {(!this.state.isLoading && this.state.repoList.length > 0) &&\n                <SharedRepoListView\n                  libraryType={this.state.libraryType}\n                  repoList={this.state.repoList}\n                  sortBy={this.state.sortBy}\n                  sortOrder={this.state.sortOrder}\n                  sortItems={this.sortItems}\n                  onItemUnshare={this.onItemUnshare}\n                  onItemDelete={this.onItemDelete}\n                />\n              }\n            </div>\n          </div>\n        </div>\n        {this.state.isSortOptionsDialogOpen &&\n        <SortOptionsDialog\n          toggleDialog={this.toggleSortOptionsDialog}\n          sortBy={this.state.sortBy}\n          sortOrder={this.state.sortOrder}\n          sortItems={this.sortItems}\n        />\n        }\n        {this.state.isCreateRepoDialogShow && (\n          <ModalPortal>\n            <CreateRepoDialog\n              libraryType={this.state.libraryType}\n              onCreateToggle={this.onCreateRepoToggle}\n              onCreateRepo={this.onCreateRepo}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isSelectRepoDialpgShow && (\n          <ModalPortal>\n            <ShareRepoDialog\n              onRepoSelectedHandler={this.onRepoSelectedHandler}\n              onShareRepoDialogClose={this.onSelectRepoToggle}\n            />\n          </ModalPortal>\n        )}\n      </Fragment>\n    );\n  }\n}\n\nPublicSharedView.propTypes = propTypes;\n\nexport default PublicSharedView;\n","import io from 'socket.io-client';\nimport { name, username, contactEmail, seafileCollabServer } from './constants';\n\nconst socket = (seafileCollabServer !== '') ? io(seafileCollabServer) : undefined;\n\nclass CollabServer {\n\n  watchRepo(repoID, fn) {\n    if (!socket) {\n      return;\n    }\n    socket.emit('repo_update', {\n      request: 'watch_update',\n      repo_id: repoID,\n      user: {\n        name: name,\n        username: username,\n        contact_email: contactEmail,\n      },\n    });\n    socket.on('repo_update', fn);\n  }\n\n  unwatchRepo(repoID, fn) {\n    if (!socket) {\n      return;\n    }\n    socket.emit('repo_update', {\n      request: 'unwatch_update',\n      repo_id: repoID,\n      user: {\n        name: name,\n        username: username,\n        contact_email: contactEmail,\n      },\n    });\n    socket.off('repo_update', fn);\n  }\n}\n\nconst collabServer = new CollabServer();\n\nexport default collabServer;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Modal, ModalBody, Form } from 'reactstrap';\nimport { gettext, siteRoot, mediaUrl } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\n\nimport '../../css/lib-decrypt.css';\n\nconst propTypes = {\n  repoID: PropTypes.string.isRequired,\n  onLibDecryptDialog: PropTypes.func.isRequired\n};\n\n\nclass LibDecryptDialog extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      password: '',\n      showError: false,\n    };\n  }\n\n  handleSubmit = (e) => {\n    let repoID = this.props.repoID;\n    let password = this.state.password;\n    seafileAPI.setRepoDecryptPassword(repoID, password).then(res => {\n      this.props.onLibDecryptDialog();\n    }).catch(res => {\n      this.setState({\n        showError: true\n      });\n    });\n\n    e.preventDefault();\n  };\n\n  handleKeyDown = (e) => {\n    if (e.key == 'Enter') {\n      this.handleSubmit(e);\n    }\n  };\n\n  handleChange = (e) => {\n    this.setState({\n      password: e.target.value,\n      showError: false\n    });\n  };\n\n  toggle = () => {\n    window.location.href = siteRoot;\n  };\n\n  render() {\n    return (\n      <Modal isOpen={true}>\n        <ModalBody>\n          <button type=\"button\" className=\"close\" onClick={this.toggle}><span aria-hidden=\"true\"></span></button>\n          <Form className=\"lib-decrypt-form text-center\">\n            <img src={`${mediaUrl}img/lock.png`} alt=\"\" aria-hidden=\"true\" />\n            <p className=\"intro\">{gettext('This library is password protected')}</p>\n            {this.state.showError &&\n              <p className=\"error\">{gettext('Wrong password')}</p>\n            }\n            <input type=\"password\" name=\"password\" className=\"form-control password-input\" autoComplete=\"off\" onKeyDown={this.handleKeyDown} placeholder={gettext('Password')} onChange={this.handleChange} />\n            <button type=\"submit\" className=\"btn btn-primary submit\" onClick={this.handleSubmit}>{gettext('Submit')}</button>\n            <p className=\"tip\">{'* '}{gettext('The password will be kept in the server for only 1 hour.')}</p>\n          </Form>\n        </ModalBody>\n      </Modal>\n    );\n  }\n}\n\nLibDecryptDialog.propTypes = propTypes;\n\nexport default LibDecryptDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../../utils/constants';\n\nconst propTypes = {\n  currentMode: PropTypes.string.isRequired,\n  switchViewMode: PropTypes.func.isRequired,\n  isCustomPermission: PropTypes.bool,\n};\n\nclass ViewModeToolbar extends React.Component {\n\n  static defaultProps = {\n    isCustomPermission: false,\n  };\n\n  switchViewMode = (e) => {\n    e.preventDefault();\n    let id = e.target.id;\n    if (id === this.props.currentMode) {\n      return;\n    }\n    this.props.switchViewMode(id);\n  };\n\n  render() {\n    let baseClass = 'btn btn-secondary btn-icon sf-view-mode-btn ';\n    return (\n      <React.Fragment>\n        <div className=\"view-mode btn-group\">\n          <button className={`${baseClass} sf2-icon-list-view ${this.props.currentMode === 'list' ? 'current-mode' : ''}`} id='list' title={gettext('List')} aria-label={gettext('List')} onClick={this.switchViewMode}></button>\n          <button className={`${baseClass} sf2-icon-grid-view ${this.props.currentMode === 'grid' ? 'current-mode' : ''}`} id='grid' title={gettext('Grid')} aria-label={gettext('Grid')} onClick={this.switchViewMode}></button>\n          <button className={`${baseClass} sf2-icon-two-columns ${this.props.currentMode === 'column' ? 'current-mode' : ''}`} id='column' title={gettext('Column')} aria-label={gettext('Column')} onClick={this.switchViewMode}></button>\n        </div>\n        {!this.props.isCustomPermission && (\n          <div className=\"detail-btn btn-group\">\n            <button className=\"btn btn-secondary btn-icon ml-1 fas fa-info\" id='detail' title={gettext('Properties')} aria-label={gettext('Properties')} onClick={this.switchViewMode}></button>\n          </div>\n        )}\n      </React.Fragment>\n    );\n  }\n}\n\nViewModeToolbar.propTypes = propTypes;\n\nexport default ViewModeToolbar;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Modal, ModalHeader, Input, ModalBody, ModalFooter, Form, FormGroup, Label, Alert } from 'reactstrap';\nimport { gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\n\nconst propTypes = {\n  fileType: PropTypes.string,\n  parentPath: PropTypes.string.isRequired,\n  onAddFile: PropTypes.func.isRequired,\n  checkDuplicatedName: PropTypes.func.isRequired,\n  toggleDialog: PropTypes.func.isRequired,\n};\n\nclass CreateFile extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      parentPath: '',\n      childName: props.fileType || '',\n      isMarkdownDraft: false,\n      isSdocDraft: false,\n      errMessage: '',\n      isSubmitBtnActive: false,\n    };\n    this.newInput = React.createRef();\n  }\n\n  componentDidMount() {\n    let parentPath = this.props.parentPath;\n    if (parentPath[parentPath.length - 1] === '/') {  // mainPanel\n      this.setState({parentPath: parentPath});\n    } else {\n      this.setState({parentPath: parentPath + '/'}); // sidePanel\n    }\n  }\n\n  handleChange = (e) => {\n    if (!e.target.value.trim()) {\n      this.setState({isSubmitBtnActive: false});\n    } else {\n      this.setState({isSubmitBtnActive: true});\n    }\n\n    this.setState({\n      childName: e.target.value,\n    }) ;\n  };\n\n  handleSubmit = () => {\n    if (!this.state.isSubmitBtnActive) {\n      return;\n    }\n\n    let isDuplicated = this.checkDuplicatedName();\n    let newName = this.state.childName;\n\n    if (isDuplicated) {\n      let errMessage = gettext('The name \"{name}\" is already taken. Please choose a different name.');\n      errMessage = errMessage.replace('{name}', Utils.HTMLescape(newName));\n      this.setState({errMessage: errMessage});\n    } else {\n      let path = this.state.parentPath + newName;\n      const { isMarkdownDraft, isSdocDraft } = this.state;\n      this.props.onAddFile(path, isMarkdownDraft, isSdocDraft);\n      this.props.toggleDialog();\n    }\n  };\n\n  handleKeyDown = (e) => {\n    if (e.key === 'Enter') {\n      this.handleSubmit();\n      e.preventDefault();\n    }\n  };\n\n  handleCheck = () => {\n    let pos = this.state.childName.lastIndexOf('.');\n\n    if (this.state.isMarkdownDraft) {\n      // from draft to not draft\n      // case 1, normally, the file name is ended with `(draft)`, like `test(draft).md`\n      // case 2, the file name is not ended with `(draft)`, the user has deleted some characters, like `test(dra.md`\n      let p = this.state.childName.substring(pos-7, pos);\n      let fileName = this.state.childName.substring(0, pos-7);\n      let fileType = this.state.childName.substring(pos);\n      if (p === '(draft)') {\n        // remove `(draft)` from file name\n        this.setState({\n          childName: fileName + fileType,\n          isMarkdownDraft: !this.state.isMarkdownDraft\n        });\n      } else {\n        // don't change file name\n        this.setState({\n          isMarkdownDraft: !this.state.isMarkdownDraft\n        });\n      }\n    }\n\n    if (!this.state.isMarkdownDraft) {\n      // from not draft to draft\n      // case 1, test.md  ===> test(draft).md\n      // case 2, .md ===> (draft).md\n      // case 3, no '.' in the file name, don't change the file name\n      if (pos > 0) {\n        let fileName = this.state.childName.substring(0, pos);\n        let fileType = this.state.childName.substring(pos);\n        this.setState({\n          childName: fileName + '(draft)' + fileType,\n          isMarkdownDraft: !this.state.isMarkdownDraft\n        });\n      } else if (pos === 0 ) {\n        this.setState({\n          childName: '(draft)' + this.state.childName,\n          isMarkdownDraft: !this.state.isMarkdownDraft\n        });\n      } else {\n        this.setState({\n          isMarkdownDraft: !this.state.isMarkdownDraft\n        });\n      }\n    }\n  };\n\n  checkDuplicatedName = () => {\n    let isDuplicated = this.props.checkDuplicatedName(this.state.childName);\n    return isDuplicated;\n  };\n\n  onAfterModelOpened = () => {\n    if (!this.newInput.current) return;\n    this.newInput.current.focus();\n    this.newInput.current.setSelectionRange(0,0);\n  };\n\n  toggleMarkSdocDraft = (e) => {\n    this.setState({\n      isSdocDraft: e.target.checked\n    });\n  };\n\n  render() {\n    const { toggleDialog } = this.props;\n    return (\n      <Modal isOpen={true} toggle={toggleDialog} onOpened={this.onAfterModelOpened}>\n        <ModalHeader toggle={toggleDialog}>{gettext('New File')}</ModalHeader>\n        <ModalBody>\n          <Form>\n            <FormGroup>\n              <Label for=\"fileName\">{gettext('Name')}</Label>\n              <Input\n                id=\"fileName\"\n                onKeyDown={this.handleKeyDown}\n                innerRef={this.newInput}\n                value={this.state.childName}\n                onChange={this.handleChange}\n              />\n            </FormGroup>\n            {/*this.props.fileType == '.md' && isDocs && (\n              <FormGroup check>\n                <Label check>\n                  <Input type=\"checkbox\" onChange={this.handleCheck}/>{'  '}{gettext('This is a draft')}\n                </Label>\n              </FormGroup>\n            )*/}\n            {/*this.props.fileType == '.sdoc' && (\n              <FormGroup check>\n                <Label check>\n                  <Input type=\"checkbox\" checked={isSdocDraft} onChange={this.toggleMarkSdocDraft}/>\n                  <span>{gettext('Mark as draft')}</span>\n                </Label>\n              </FormGroup>\n            )*/}\n          </Form>\n          {this.state.errMessage && <Alert color=\"danger\" className=\"mt-2\">{this.state.errMessage}</Alert>}\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={toggleDialog}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.handleSubmit} disabled={!this.state.isSubmitBtnActive}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nCreateFile.propTypes = propTypes;\n\nexport default CreateFile;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Dropdown, DropdownToggle, DropdownMenu, DropdownItem } from 'reactstrap';\nimport { Utils } from '../../utils/utils';\nimport { enableSeadoc, gettext } from '../../utils/constants';\nimport ModalPortal from '../modal-portal';\nimport CreateFolder from '../../components/dialog/create-folder-dialog';\nimport CreateFile from '../../components/dialog/create-file-dialog';\nimport ShareDialog from '../../components/dialog/share-dialog';\nimport ViewModeToolbar from './view-mode-toolbar';\n\nconst propTypes = {\n  path: PropTypes.string.isRequired,\n  repoID: PropTypes.string.isRequired,\n  repoName: PropTypes.string.isRequired,\n  repoEncrypted: PropTypes.bool.isRequired,\n  enableDirPrivateShare: PropTypes.bool.isRequired,\n  userPerm: PropTypes.string.isRequired,\n  isGroupOwnedRepo: PropTypes.bool.isRequired,\n  showShareBtn: PropTypes.bool.isRequired,\n  onAddFile: PropTypes.func.isRequired,\n  onAddFolder: PropTypes.func.isRequired,\n  onUploadFile: PropTypes.func.isRequired,\n  onUploadFolder: PropTypes.func.isRequired,\n  direntList: PropTypes.array.isRequired,\n  currentMode: PropTypes.string.isRequired,\n  switchViewMode: PropTypes.func.isRequired,\n};\n\nclass DirOperationToolbar extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      fileType: '.md',\n      isCreateFileDialogShow: false,\n      isCreateFolderDialogShow: false,\n      isUploadMenuShow: false,\n      isCreateMenuShow: false,\n      isShareDialogShow: false,\n      operationMenuStyle: '',\n      isMobileOpMenuOpen: false\n    };\n  }\n\n  componentDidMount() {\n    document.addEventListener('click', this.hideOperationMenu);\n  }\n\n  componentWillUnmount() {\n    document.removeEventListener('click', this.hideOperationMenu);\n  }\n\n  toggleMobileOpMenu = () => {\n    this.setState({isMobileOpMenuOpen: !this.state.isMobileOpMenuOpen});\n  };\n\n  hideOperationMenu = () => {\n    this.setState({\n      isUploadMenuShow: false,\n      isCreateMenuShow: false,\n    });\n  };\n\n  toggleOperationMenu = (e) => {\n    e.nativeEvent.stopImmediatePropagation();\n    let targetRect = e.target.getBoundingClientRect();\n    let left = targetRect.left;\n    let top  = targetRect.bottom;\n    let style = {position: 'fixed', display: 'block', left: left, top: top};\n    this.setState({operationMenuStyle: style});\n  };\n\n  onUploadClick = (e) => {\n    this.toggleOperationMenu(e);\n    this.setState({\n      isUploadMenuShow: !this.state.isUploadMenuShow,\n      isCreateMenuShow: false,\n    });\n  };\n\n  onUploadFile = (e) => {\n    this.setState({isUploadMenuShow: false});\n    this.props.onUploadFile(e);\n  };\n\n  onUploadFolder = (e) => {\n    this.setState({isUploadMenuShow: false});\n    this.props.onUploadFolder(e);\n  };\n\n  onCreateClick = (e) => {\n    this.toggleOperationMenu(e);\n    this.setState({\n      isCreateMenuShow: !this.state.isCreateMenuShow,\n      isUploadMenuShow: false,\n    });\n  };\n\n  onShareClick = () => {\n    this.setState({\n      isShareDialogShow: !this.state.isShareDialogShow\n    });\n  };\n\n  onCreateFolderToggle = () => {\n    this.setState({isCreateFolderDialogShow: !this.state.isCreateFolderDialogShow});\n  };\n\n  onCreateFileToggle = () => {\n    this.setState({\n      isCreateFileDialogShow: !this.state.isCreateFileDialogShow,\n      fileType: ''\n    });\n  };\n\n  onCreateMarkdownToggle = () => {\n    this.setState({\n      isCreateFileDialogShow: !this.state.isCreateFileDialogShow,\n      fileType: '.md'\n    });\n  };\n\n  onCreateExcelToggle = () => {\n    this.setState({\n      isCreateFileDialogShow: !this.state.isCreateFileDialogShow,\n      fileType: '.xlsx'\n    });\n  };\n\n  onCreatePPTToggle = () => {\n    this.setState({\n      isCreateFileDialogShow: !this.state.isCreateFileDialogShow,\n      fileType: '.pptx'\n    });\n  };\n\n  onCreateWordToggle = () => {\n    this.setState({\n      isCreateFileDialogShow: !this.state.isCreateFileDialogShow,\n      fileType: '.docx'\n    });\n  };\n\n  onCreateSeaDocToggle = () => {\n    this.setState({\n      isCreateFileDialogShow: !this.state.isCreateFileDialogShow,\n      fileType: '.sdoc'\n    });\n  };\n\n  onAddFolder = (dirPath) => {\n    this.setState({isCreateFolderDialogShow: false});\n    this.props.onAddFolder(dirPath);\n  };\n\n  checkDuplicatedName = (newName) => {\n    let direntList = this.props.direntList;\n    let isDuplicated = direntList.some(object => {\n      return object.name === newName;\n    });\n    return isDuplicated;\n  };\n\n  render() {\n    let { path, repoName, userPerm } = this.props;\n\n    let itemType = path === '/' ? 'library' : 'dir';\n    let itemName = path == '/' ? repoName : Utils.getFolderName(path);\n\n    const { isCustomPermission, customPermission } = Utils.getUserPermission(userPerm);\n    let canUpload = true;\n    let canCreate = true;\n    if (isCustomPermission) {\n      const { permission } = customPermission;\n      canUpload = permission.upload;\n      canCreate = permission.create;\n    }\n\n    let content = null;\n    if (Utils.isDesktop()) {\n      let { showShareBtn } = this.props;\n      content = (\n        <Fragment>\n          {canUpload && (\n            <Fragment>\n              {Utils.isSupportUploadFolder() ?\n                <Fragment>\n                  <button className=\"btn btn-secondary operation-item\" onClick={this.onUploadClick} aria-haspopup=\"true\" aria-expanded={this.state.isUploadMenuShow} aria-controls=\"upload-menu\">{gettext('Upload')}</button>\n                  {this.state.isUploadMenuShow && (\n                    <div className=\"menu dropdown-menu\" style={this.state.operationMenuStyle} role=\"menu\" id=\"upload-menu\">\n                      <button type=\"button\" className=\"dropdown-item\" onClick={this.onUploadFile} role=\"menuitem\">{gettext('Upload Files')}</button>\n                      <button type=\"button\" className=\"dropdown-item\" onClick={this.onUploadFolder} role=\"menuitem\">{gettext('Upload Folder')}</button>\n                    </div>\n                  )}\n                </Fragment>\n                :\n                <button className=\"btn btn-secondary operation-item\" title={gettext('Upload')} onClick={this.onUploadFile}>{gettext('Upload')}</button>}\n            </Fragment>\n          )}\n          {canCreate &&\n          <Fragment>\n            <button className=\"btn btn-secondary operation-item\" onClick={this.onCreateClick} aria-haspopup=\"true\" aria-expanded={this.state.isUploadMenuShow} aria-controls=\"new-menu\">{gettext('New')}</button>\n            {this.state.isCreateMenuShow && (\n              <div className=\"menu dropdown-menu\" style={this.state.operationMenuStyle} role=\"menu\" id=\"new-menu\">\n                <button className=\"dropdown-item\" onClick={this.onCreateFolderToggle} role=\"menuitem\">{gettext('New Folder')}</button>\n                <button className=\"dropdown-item\" onClick={this.onCreateFileToggle}>{gettext('New File')}</button>\n                <div className=\"dropdown-divider\"></div>\n                <button className=\"dropdown-item\" onClick={this.onCreateMarkdownToggle} role=\"menuitem\">{gettext('New Markdown File')}</button>\n                <button className=\"dropdown-item\" onClick={this.onCreateExcelToggle} role=\"menuitem\">{gettext('New Excel File')}</button>\n                <button className=\"dropdown-item\" onClick={this.onCreatePPTToggle} role=\"menuitem\">{gettext('New PowerPoint File')}</button>\n                <button className=\"dropdown-item\" onClick={this.onCreateWordToggle} role=\"menuitem\">{gettext('New Word File')}</button>\n                {enableSeadoc && <button className=\"dropdown-item\" onClick={this.onCreateSeaDocToggle} role=\"menuitem\">{gettext('New SeaDoc File')} (beta)</button>}\n              </div>\n            )}\n          </Fragment>\n          }\n          {showShareBtn && <button className=\"btn btn-secondary operation-item\" title={gettext('Share')} onClick={this.onShareClick}>{gettext('Share')}</button>}\n        </Fragment>\n      );\n    } else {\n      content = (\n        <Dropdown isOpen={this.state.isMobileOpMenuOpen} toggle={this.toggleMobileOpMenu}>\n          <DropdownToggle tag=\"span\" className=\"sf2-icon-plus mobile-toolbar-icon\" />\n          <DropdownMenu>\n            {canUpload && (\n              <DropdownItem onClick={this.onUploadFile}>{gettext('Upload')}</DropdownItem>\n            )}\n            {canCreate && (\n              <Fragment>\n                <DropdownItem onClick={this.onCreateFolderToggle}>{gettext('New Folder')}</DropdownItem>\n                <DropdownItem onClick={this.onCreateFileToggle}>{gettext('New File')}</DropdownItem>\n              </Fragment>\n            )}\n          </DropdownMenu>\n        </Dropdown>\n      );\n    }\n\n    return (\n      <Fragment>\n        {(userPerm === 'rw' || userPerm === 'admin' || userPerm === 'cloud-edit' || isCustomPermission) && (\n          <div className=\"dir-operation\">\n            {content}\n          </div>\n        )}\n        {Utils.isDesktop() && <ViewModeToolbar currentMode={this.props.currentMode} switchViewMode={this.props.switchViewMode} isCustomPermission={isCustomPermission} />}\n        {this.state.isCreateFileDialogShow && (\n          <ModalPortal>\n            <CreateFile\n              parentPath={this.props.path}\n              fileType={this.state.fileType}\n              onAddFile={this.props.onAddFile}\n              checkDuplicatedName={this.checkDuplicatedName}\n              toggleDialog={this.onCreateFileToggle}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isCreateFolderDialogShow && (\n          <ModalPortal>\n            <CreateFolder\n              parentPath={this.props.path}\n              onAddFolder={this.onAddFolder}\n              checkDuplicatedName={this.checkDuplicatedName}\n              addFolderCancel={this.onCreateFolderToggle}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isShareDialogShow &&\n          <ModalPortal>\n            <ShareDialog\n              itemType={itemType}\n              itemName={itemName}\n              itemPath={this.props.path}\n              repoID={this.props.repoID}\n              repoEncrypted={this.props.repoEncrypted}\n              enableDirPrivateShare={this.props.enableDirPrivateShare}\n              userPerm={this.props.userPerm}\n              isGroupOwnedRepo={this.props.isGroupOwnedRepo}\n              toggleDialog={this.onShareClick}\n            />\n          </ModalPortal>\n        }\n      </Fragment>\n    );\n  }\n}\n\nDirOperationToolbar.propTypes = propTypes;\n\nexport default DirOperationToolbar;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Modal, ModalHeader, ModalFooter, ModalBody, Alert } from 'reactstrap';\nimport { gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport FileChooser from '../file-chooser/file-chooser';\n\nconst propTypes = {\n  path: PropTypes.string.isRequired,\n  repoID: PropTypes.string.isRequired,\n  dirent: PropTypes.object,\n  selectedDirentList: PropTypes.array,\n  isMutipleOperation: PropTypes.bool.isRequired,\n  onItemMove: PropTypes.func,\n  onItemsMove: PropTypes.func,\n  onCancelMove: PropTypes.func.isRequired,\n  repoEncrypted: PropTypes.bool.isRequired,\n};\n\n// need dirent file Path\nclass MoveDirent extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      repo: { repo_id: this.props.repoID },\n      selectedPath: this.props.path,\n      errMessage: ''\n    };\n  }\n\n  shouldComponentUpdate(nextProps, nextState) {\n    if (this.state.errMessage === nextState.errMessage) {\n      return false;\n    }\n    return true;\n  }\n\n  handleSubmit = () => {\n    if (this.props.isMutipleOperation) {\n      this.moveItems();\n    } else {\n      this.moveItem();\n    }\n  };\n\n  moveItems = () => {\n    let { repoID } = this.props;\n    let { repo, selectedPath } = this.state;\n    let message = gettext('Invalid destination path');\n\n    if (!repo || selectedPath === '') {\n      this.setState({errMessage: message});\n      return;\n    }\n\n    let selectedDirentList = this.props.selectedDirentList;\n    let direntPaths = [];\n    selectedDirentList.forEach(dirent => {\n      let path = Utils.joinPath(this.props.path, dirent.name);\n      direntPaths.push(path);\n    });\n\n    // move dirents to one of them. eg: A/B, A/C -> A/B\n    if (direntPaths.some(direntPath => { return direntPath === selectedPath;})) {\n      this.setState({errMessage: message});\n      return;\n    }\n\n    // move dirents to current path\n    if (selectedPath && selectedPath === this.props.path && (repo.repo_id === repoID)) {\n      this.setState({errMessage: message});\n      return;\n    }\n\n    // move dirents to one of their child. eg: A/B, A/D -> A/B/C\n    let moveDirentPath = '';\n    let isChildPath = direntPaths.some(direntPath => {\n      let flag = selectedPath.length > direntPath.length && selectedPath.indexOf(direntPath) > -1;\n      if (flag) {\n        moveDirentPath = direntPath;\n      }\n      return flag;\n    });\n\n    if (isChildPath) {\n      message = gettext('Can not move directory %(src)s to its subdirectory %(des)s');\n      message = message.replace('%(src)s', moveDirentPath);\n      message = message.replace('%(des)s', selectedPath);\n      this.setState({errMessage: message});\n      return;\n    }\n\n    this.props.onItemsMove(repo, selectedPath);\n    this.toggle();\n  };\n\n  moveItem = () => {\n    let { repoID } = this.props;\n    let { repo, selectedPath } = this.state;\n    let direntPath = Utils.joinPath(this.props.path, this.props.dirent.name);\n    let message = gettext('Invalid destination path');\n\n    if (!repo || (repo.repo_id === repoID && selectedPath === '')) {\n      this.setState({errMessage: message});\n      return;\n    }\n\n    // copy the dirent to itself. eg: A/B -> A/B\n    if (selectedPath && direntPath === selectedPath) {\n      this.setState({errMessage: message});\n      return;\n    }\n\n    // copy the dirent to current path\n    if (selectedPath && this.props.path === selectedPath && repo.repo_id === repoID) {\n      this.setState({errMessage: message});\n      return;\n    }\n\n    // copy the dirent to it's child. eg: A/B -> A/B/C\n    if ( selectedPath && selectedPath.length > direntPath.length && selectedPath.indexOf(direntPath) > -1) {\n      message = gettext('Can not move directory %(src)s to its subdirectory %(des)s');\n      message = message.replace('%(src)s', direntPath);\n      message = message.replace('%(des)s', selectedPath);\n      this.setState({errMessage: message});\n      return;\n    }\n\n    this.props.onItemMove(repo, this.props.dirent, selectedPath, this.props.path);\n    this.toggle();\n  };\n\n  toggle = () => {\n    this.props.onCancelMove();\n  };\n\n  onDirentItemClick = (repo, selectedPath) => {\n    this.setState({\n      repo: repo,\n      selectedPath: selectedPath,\n      errMessage: ''\n    });\n  };\n\n  onRepoItemClick = (repo) => {\n    this.setState({\n      repo: repo,\n      selectedPath: '/',\n      errMessage: ''\n    });\n  };\n\n  render() {\n    let title = gettext('Move {placeholder} to');\n    if (!this.props.isMutipleOperation) {\n      title = title.replace('{placeholder}', '<span class=\"op-target\">' + Utils.HTMLescape(this.props.dirent.name) + '</span>');\n    } else {\n      title = gettext('Move selected item(s) to:');\n    }\n    let mode = this.props.repoEncrypted ? 'only_current_library':'current_repo_and_other_repos';\n    const { dirent, selectedDirentList } = this.props;\n    const movedDirent = dirent ? dirent : selectedDirentList[0];\n    const { permission } = movedDirent;\n    const { isCustomPermission } = Utils.getUserPermission(permission);\n    if (isCustomPermission) {\n      mode = 'only_current_library';\n    }\n    return (\n      <Modal isOpen={true} toggle={this.toggle}>\n        <ModalHeader toggle={this.toggle}><div dangerouslySetInnerHTML={{__html: title}}></div></ModalHeader>\n        <ModalBody>\n          <FileChooser\n            repoID={this.props.repoID}\n            currentPath={this.props.path}\n            onDirentItemClick={this.onDirentItemClick}\n            onRepoItemClick={this.onRepoItemClick}\n            mode={mode}\n          />\n          {this.state.errMessage && <Alert color=\"danger\" className=\"mt-2\">{this.state.errMessage}</Alert>}\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.toggle}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.handleSubmit}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nMoveDirent.propTypes = propTypes;\n\nexport default MoveDirent;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Modal, ModalHeader, ModalFooter, ModalBody, Alert } from 'reactstrap';\nimport { gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport FileChooser from '../file-chooser/file-chooser';\n\nconst propTypes = {\n  path: PropTypes.string.isRequired,\n  repoID: PropTypes.string.isRequired,\n  dirent: PropTypes.object,\n  selectedDirentList: PropTypes.array,\n  isMutipleOperation: PropTypes.bool.isRequired,\n  onItemCopy: PropTypes.func,\n  onItemsCopy: PropTypes.func,\n  onCancelCopy: PropTypes.func.isRequired,\n  repoEncrypted: PropTypes.bool.isRequired,\n};\n\n// need dirent file Path\nclass CopyDirent extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      repo: { repo_id: this.props.repoID },\n      selectedPath: this.props.path,\n      errMessage: ''\n    };\n  }\n\n  shouldComponentUpdate(nextProps, nextState) {\n    if (this.state.errMessage === nextState.errMessage) {\n      return false;\n    }\n    return true;\n  }\n\n  handleSubmit = () => {\n    if (this.props.isMutipleOperation) {\n      this.copyItems();\n    } else {\n      this.copyItem();\n    }\n  };\n\n  copyItems = () => {\n    let { repo, selectedPath } = this.state;\n    let message = gettext('Invalid destination path');\n\n    if (!repo || selectedPath === '') {\n      this.setState({errMessage: message});\n      return;\n    }\n\n    let selectedDirentList = this.props.selectedDirentList;\n    let direntPaths = [];\n    selectedDirentList.forEach(dirent => {\n      let path = Utils.joinPath(this.props.path, dirent.name);\n      direntPaths.push(path);\n    });\n\n    // copy dirents to one of them. eg: A/B, A/C -> A/B\n    if (direntPaths.some(direntPath => { return direntPath === selectedPath;})) {\n      this.setState({errMessage: message});\n      return;\n    }\n\n    // copy dirents to one of their child. eg: A/B, A/D -> A/B/C\n    let copyDirentPath = '';\n    let isChildPath = direntPaths.some(direntPath => {\n      let flag = selectedPath.length > direntPath.length && selectedPath.indexOf(direntPath) > -1;\n      if (flag) {\n        copyDirentPath = direntPath;\n      }\n      return flag;\n    });\n\n    if (isChildPath) {\n      message = gettext('Can not move directory %(src)s to its subdirectory %(des)s');\n      message = message.replace('%(src)s', copyDirentPath);\n      message = message.replace('%(des)s', selectedPath);\n      this.setState({errMessage: message});\n      return;\n    }\n\n    this.props.onItemsCopy(repo, selectedPath);\n    this.toggle();\n  };\n\n  copyItem = () => {\n    let { repo, repoID, selectedPath } = this.state;\n    let direntPath = Utils.joinPath(this.props.path, this.props.dirent.name);\n    let message = gettext('Invalid destination path');\n\n    if (!repo || (repo.repo_id === repoID && selectedPath === '')) {\n      this.setState({errMessage: message});\n      return;\n    }\n\n    // copy the dirent to itself. eg: A/B -> A/B\n    if (selectedPath && direntPath === selectedPath) {\n      this.setState({errMessage: message});\n      return;\n    }\n\n    // copy the dirent to it's child. eg: A/B -> A/B/C\n    if ( selectedPath && selectedPath.length > direntPath.length && selectedPath.indexOf(direntPath) > -1) {\n      message = gettext('Can not copy directory %(src)s to its subdirectory %(des)s');\n      message = message.replace('%(src)s', direntPath);\n      message = message.replace('%(des)s', selectedPath);\n      this.setState({errMessage: message});\n      return;\n    }\n\n    this.props.onItemCopy(repo, this.props.dirent, selectedPath, this.props.path);\n    this.toggle();\n  };\n\n  toggle = () => {\n    this.props.onCancelCopy();\n  };\n\n  onDirentItemClick = (repo, selectedPath) => {\n    this.setState({\n      repo: repo,\n      selectedPath: selectedPath,\n      errMessage: ''\n    });\n  };\n\n  onRepoItemClick = (repo) => {\n    this.setState({\n      repo: repo,\n      selectedPath: '/',\n      errMessage: ''\n    });\n  };\n\n  render() {\n    let title = gettext('Copy {placeholder} to');\n    if (!this.props.isMutipleOperation) {\n      title = title.replace('{placeholder}', '<span class=\"op-target\">' + Utils.HTMLescape(this.props.dirent.name) + '</span>');\n    } else {\n      title = gettext('Copy selected item(s) to:');\n    }\n    let mode = this.props.repoEncrypted ? 'only_current_library':'current_repo_and_other_repos';\n    return (\n      <Modal isOpen={true} toggle={this.toggle}>\n        <ModalHeader toggle={this.toggle}><div dangerouslySetInnerHTML={{__html: title}}></div></ModalHeader>\n        <ModalBody>\n          <FileChooser\n            repoID={this.props.repoID}\n            currentPath={this.props.path}\n            onDirentItemClick={this.onDirentItemClick}\n            onRepoItemClick={this.onRepoItemClick}\n            mode={mode}\n          />\n          {this.state.errMessage && <Alert color=\"danger\" className=\"mt-2\">{this.state.errMessage}</Alert>}\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.toggle}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.handleSubmit}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nCopyDirent.propTypes = propTypes;\n\nexport default CopyDirent;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, ModalHeader, ModalBody, ModalFooter, Input } from 'reactstrap';\nimport { gettext } from '../../utils/constants';\nimport { TAG_COLORS } from '../../constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\n\nconst propTypes = {\n  repoID: PropTypes.string.isRequired,\n  onRepoTagCreated: PropTypes.func,\n  toggleCancel: PropTypes.func.isRequired,\n  onClose: PropTypes.func.isRequired\n};\n\nclass CreateTagDialog extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      tagName: '',\n      tagColor: TAG_COLORS[0],\n      newTag: {},\n      errorMsg: '',\n    };\n  }\n\n  inputNewName = (e) => {\n    this.setState({\n      tagName: e.target.value,\n    });\n    if (this.state.errorMsg) {\n      this.setState({errorMsg: ''});\n    }\n  };\n\n  selectTagcolor = (e) => {\n    this.setState({\n      tagColor: e.target.value,\n    });\n  };\n\n  createTag = () => {\n    let name = this.state.tagName;\n    let color = this.state.tagColor;\n    let repoID = this.props.repoID;\n    seafileAPI.createRepoTag(repoID, name, color).then((res) => {\n      let repoTagID = res.data.repo_tag.repo_tag_id;\n      if (this.props.onRepoTagCreated) this.props.onRepoTagCreated(repoTagID);\n      this.props.toggleCancel();\n    }).catch((error) => {\n      let errMessage;\n      if (error.response.status === 500) {\n        errMessage = gettext('Internal Server Error');\n      } else if (error.response.status === 400) {\n        errMessage = gettext('Tag \"{name}\" already exists.');\n        errMessage = errMessage.replace('{name}', Utils.HTMLescape(name));\n      }\n      this.setState({errorMsg: errMessage});\n    });\n  };\n\n  handleKeyDown = (e) => {\n    if (e.key === 'Enter') {\n      this.createTag();\n    }\n  };\n\n  render() {\n    let canSave = this.state.tagName.trim() ? true : false;\n    return (\n      <Fragment>\n        <ModalHeader toggle={this.props.onClose}>\n          <span className=\"tag-dialog-back fas fa-sm fa-arrow-left\" onClick={this.props.toggleCancel} aria-label={gettext('Back')}></span>\n          {gettext('New Tag')}\n        </ModalHeader>\n        <ModalBody>\n          <div role=\"form\" className=\"tag-create\">\n            <div className=\"form-group\">\n              <label className=\"form-label\">{gettext('Name')}</label>\n              <Input onKeyDown={this.handleKeyDown} autoFocus={true} value={this.state.tagName} onChange={this.inputNewName}/>\n              <div className=\"mt-2\"><span className=\"error\">{this.state.errorMsg}</span></div>\n            </div>\n            <div className=\"form-group\">\n              <label className=\"form-label\">{gettext('Select a color')}</label>\n              <div className=\"d-flex justify-content-between\">\n                {TAG_COLORS.map((item, index)=>{\n                  return (\n                    <div key={index} className=\"tag-color-option\" onChange={this.selectTagcolor}>\n                      <label className=\"colorinput\">\n                        {index===0 ?\n                          <input name=\"color\" type=\"radio\" value={item} className=\"colorinput-input\" defaultChecked onClick={this.selectTagcolor}></input> :\n                          <input name=\"color\" type=\"radio\" value={item} className=\"colorinput-input\" onClick={this.selectTagcolor}></input>}\n                        <span className=\"colorinput-color rounded-circle d-flex align-items-center justify-content-center\" style={{backgroundColor:item}}>\n                          <i className=\"fas fa-check color-selected\"></i>\n                        </span>\n                      </label>\n                    </div>\n                  );\n                })\n                }\n              </div>\n            </div>\n          </div>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.props.toggleCancel}>{gettext('Cancel')}</Button>\n          {canSave ?\n            <Button color=\"primary\" onClick={this.createTag}>{gettext('Save')}</Button> :\n            <Button color=\"primary\" disabled>{gettext('Save')}</Button>\n          }\n        </ModalFooter>\n      </Fragment>\n    );\n  }\n}\n\nCreateTagDialog.propTypes = propTypes;\n\nexport default CreateTagDialog;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter } from 'reactstrap';\nimport { gettext } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport RepoTag from '../../models/repo-tag';\nimport CreateTagDialog from './create-tag-dialog';\nimport toaster from '../toast';\nrequire('../../css/repo-tag.css');\n\nconst TagItemPropTypes = {\n  repoID: PropTypes.string.isRequired,\n  repoTag: PropTypes.object.isRequired,\n  filePath: PropTypes.string.isRequired,\n  fileTagList: PropTypes.array.isRequired,\n  onFileTagChanged: PropTypes.func.isRequired,\n};\n\nclass TagItem extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isTagHighlighted: false\n    };\n  }\n\n  onMouseEnter = () => {\n    this.setState({\n      isTagHighlighted: true\n    });\n  };\n\n  onMouseLeave = () => {\n    this.setState({\n      isTagHighlighted: false\n    });\n  };\n\n  getRepoTagIdList = () => {\n    let repoTagIdList = [];\n    let fileTagList = this.props.fileTagList || [];\n    repoTagIdList = fileTagList.map((fileTag) => fileTag.repo_tag_id);\n    return repoTagIdList;\n  };\n\n  onEditFileTag = () => {\n    let { repoID, repoTag, filePath } = this.props;\n    let repoTagIdList = this.getRepoTagIdList();\n    if (repoTagIdList.indexOf(repoTag.id) === -1) {\n      let id = repoTag.id;\n      seafileAPI.addFileTag(repoID, filePath, id).then(() => {\n        repoTagIdList = this.getRepoTagIdList();\n        this.props.onFileTagChanged();\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    } else {\n      let fileTag = null;\n      let fileTagList = this.props.fileTagList;\n      for(let i = 0; i < fileTagList.length; i++) {\n        if (fileTagList[i].repo_tag_id === repoTag.id) {\n          fileTag = fileTagList[i];\n          break;\n        }\n      }\n      seafileAPI.deleteFileTag(repoID, fileTag.id).then(() => {\n        repoTagIdList = this.getRepoTagIdList();\n        this.props.onFileTagChanged();\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    }\n  };\n\n  render() {\n    const { isTagHighlighted } = this.state;\n    const { repoTag } = this.props;\n    const repoTagIdList = this.getRepoTagIdList();\n    const isTagSelected = repoTagIdList.indexOf(repoTag.id) != -1;\n    return (\n      <li\n        className={`tag-list-item cursor-pointer px-4 d-flex justify-content-between align-items-center ${isTagHighlighted ? 'hl' : ''}`}\n        onClick={this.onEditFileTag}\n        onMouseEnter={this.onMouseEnter}\n        onMouseLeave={this.onMouseLeave}\n      >\n        <div className=\"d-flex align-items-center\">\n          <span className=\"tag-color w-4 h-4 rounded-circle\" style={{backgroundColor: repoTag.color}}></span>\n          <span className=\"tag-name mx-2\">{repoTag.name}</span>\n        </div>\n        {isTagSelected && <i className=\"fas fa-check tag-selected-icon\"></i>}\n      </li>\n    );\n  }\n\n}\n\nTagItem.propTypes = TagItemPropTypes;\n\nconst TagListPropTypes = {\n  repoID: PropTypes.string.isRequired,\n  filePath: PropTypes.string.isRequired,\n  fileTagList: PropTypes.array.isRequired,\n  onFileTagChanged: PropTypes.func.isRequired,\n  toggleCancel: PropTypes.func.isRequired,\n  createNewTag: PropTypes.func.isRequired,\n};\n\nclass TagList extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      repotagList: [],\n    };\n  }\n\n  componentDidMount() {\n    this.getRepoTagList();\n  }\n\n  getRepoTagList = () => {\n    let repoID = this.props.repoID;\n    seafileAPI.listRepoTags(repoID).then(res => {\n      let repotagList = [];\n      res.data.repo_tags.forEach(item => {\n        let repoTag = new RepoTag(item);\n        repotagList.push(repoTag);\n      });\n      this.setState({repotagList: repotagList});\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  render() {\n    return (\n      <Fragment>\n        <ModalHeader toggle={this.props.toggleCancel}>{gettext('Select Tags')}</ModalHeader>\n        <ModalBody className=\"px-0\">\n          <ul className=\"tag-list tag-list-container\">\n            {this.state.repotagList.map((repoTag) => {\n              return (\n                <TagItem\n                  key={repoTag.id}\n                  repoTag={repoTag}\n                  repoID={this.props.repoID}\n                  filePath={this.props.filePath}\n                  fileTagList={this.props.fileTagList}\n                  onFileTagChanged={this.props.onFileTagChanged}\n                />\n              );\n            })}\n          </ul>\n          <a\n            href=\"#\"\n            className=\"add-tag-link px-4 py-2 d-flex align-items-center\"\n            onClick={this.props.createNewTag}\n          >\n            <span className=\"sf2-icon-plus mr-2\"></span>\n            {gettext('Create a new tag')}\n          </a>\n        </ModalBody>\n        <ModalFooter>\n          <Button onClick={this.props.toggleCancel}>{gettext('Close')}</Button>\n        </ModalFooter>\n      </Fragment>\n    );\n  }\n}\n\nTagList.propTypes = TagListPropTypes;\n\nconst propTypes = {\n  repoID: PropTypes.string.isRequired,\n  filePath: PropTypes.string.isRequired,\n  fileTagList: PropTypes.array.isRequired,\n  toggleCancel: PropTypes.func.isRequired,\n  onFileTagChanged: PropTypes.func.isRequired,\n};\n\nclass EditFileTagDialog extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      isCreateRepoTagShow: false,\n      isListRepoTagShow: true,\n    };\n  }\n\n  createNewTag = () => {\n    this.setState({\n      isCreateRepoTagShow: !this.state.isCreateRepoTagShow,\n      isListRepoTagShow: !this.state.isListRepoTagShow,\n    });\n  };\n\n  onRepoTagCreated = (repoTagID) => {\n    let {repoID, filePath} = this.props;\n    seafileAPI.addFileTag(repoID, filePath, repoTagID).then(() => {\n      this.props.onFileTagChanged();\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  render() {\n    return (\n      <Modal isOpen={true} toggle={this.props.toggleCancel} autoFocus={false}>\n        {this.state.isListRepoTagShow &&\n          <TagList\n            repoID={this.props.repoID}\n            filePath={this.props.filePath}\n            fileTagList={this.props.fileTagList}\n            onFileTagChanged={this.props.onFileTagChanged}\n            toggleCancel={this.props.toggleCancel}\n            createNewTag={this.createNewTag}\n          />\n        }\n        {this.state.isCreateRepoTagShow &&\n          <CreateTagDialog\n            repoID={this.props.repoID}\n            onClose={this.props.toggleCancel}\n            toggleCancel={this.createNewTag}\n            onRepoTagCreated={this.onRepoTagCreated}\n          />\n        }\n      </Modal>\n    );\n  }\n}\n\nEditFileTagDialog.propTypes = propTypes;\n\nexport default EditFileTagDialog;\n","// Unique ID creation requires a high quality random # generator. In the browser we therefore\n// require the crypto API and do not support built-in fallback to lower quality random number\n// generators (like Math.random()).\nlet getRandomValues;\nconst rnds8 = new Uint8Array(16);\nexport default function rng() {\n  // lazy load so that environments that need to polyfill have a chance to do so\n  if (!getRandomValues) {\n    // getRandomValues needs to be invoked in a context where \"this\" is a Crypto implementation.\n    getRandomValues = typeof crypto !== 'undefined' && crypto.getRandomValues && crypto.getRandomValues.bind(crypto);\n\n    if (!getRandomValues) {\n      throw new Error('crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported');\n    }\n  }\n\n  return getRandomValues(rnds8);\n}","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport { Button, Modal, ModalHeader, Input, ModalBody, ModalFooter, Alert } from 'reactstrap';\n\nconst propTypes = {\n  onRename: PropTypes.func.isRequired,\n  toggleCancel: PropTypes.func.isRequired,\n  checkDuplicatedName: PropTypes.func.isRequired,\n  dirent: PropTypes.object,\n};\n\nclass Rename extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      newName: '',\n      errMessage: '',\n      isSubmitBtnActive: false,\n    };\n    this.newInput = React.createRef();\n  }\n\n  componentWillMount() {\n    this.setState({newName: this.props.dirent.name});\n  }\n\n  componentDidMount() {\n    let { dirent } = this.props;\n    this.changeState(dirent);\n  }\n\n  componentWillReceiveProps(nextProps) {\n    this.changeState(nextProps.dirent);\n  }\n\n  handleChange = (e) => {\n    if (!e.target.value.trim()) {\n      this.setState({isSubmitBtnActive: false});\n    } else {\n      this.setState({isSubmitBtnActive: true});\n    }\n\n    this.setState({newName: e.target.value});\n  };\n\n  handleSubmit = () => {\n    let { isValid, errMessage } = this.validateInput();\n    if (!isValid) {\n      this.setState({errMessage : errMessage});\n    } else {\n      let isDuplicated = this.checkDuplicatedName();\n      if (isDuplicated) {\n        let errMessage = gettext('The name \"{name}\" is already taken. Please choose a different name.');\n        errMessage = errMessage.replace('{name}', Utils.HTMLescape(this.state.newName));\n        this.setState({errMessage: errMessage});\n      } else {\n        this.props.onRename(this.state.newName);\n        this.props.toggleCancel();\n      }\n    }\n  };\n\n  handleKeyDown = (e) => {\n    if (e.key === 'Enter') {\n      this.handleSubmit();\n    }\n  };\n\n  toggle = () => {\n    this.props.toggleCancel();\n  };\n\n  changeState = (dirent) => {\n    let name = dirent.name;\n    this.setState({newName: name});\n  };\n\n  validateInput = () => {\n    let newName = this.state.newName.trim();\n    let isValid = true;\n    let errMessage = '';\n    if (!newName) {\n      isValid = false;\n      errMessage = gettext('Name is required.');\n      return { isValid, errMessage };\n    }\n\n    if (newName.indexOf('/') > -1) {\n      isValid = false;\n      errMessage = gettext('Name should not include ' + '\\'/\\'' + '.');\n      return { isValid, errMessage };\n    }\n\n    return { isValid, errMessage };\n  };\n\n  checkDuplicatedName = () => {\n    let isDuplicated = this.props.checkDuplicatedName(this.state.newName);\n    return isDuplicated;\n  };\n\n  onAfterModelOpened = () => {\n    if (!this.newInput.current) return;\n    this.newInput.current.focus();\n\n    let { dirent } = this.props;\n    let type = dirent.type;\n    if (type === 'file') {\n      var endIndex = dirent.name.lastIndexOf('.md');\n      this.newInput.current.setSelectionRange(0, endIndex, 'forward');\n    } else {\n      this.newInput.current.setSelectionRange(0, -1);\n    }\n  };\n\n  render() {\n    let type = this.props.dirent.type;\n    return (\n      <Modal isOpen={true} toggle={this.toggle} onOpened={this.onAfterModelOpened}>\n        <ModalHeader toggle={this.toggle}>{type === 'file' ? gettext('Rename File') : gettext('Rename Folder') }</ModalHeader>\n        <ModalBody>\n          <p>{type === 'file' ? gettext('New file name'): gettext('New folder name')}</p>\n          <Input onKeyDown={this.handleKeyDown} innerRef={this.newInput} value={this.state.newName} onChange={this.handleChange} />\n          {this.state.errMessage && <Alert color=\"danger\" className=\"mt-2\">{this.state.errMessage}</Alert>}\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.toggle}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.handleSubmit} disabled={!this.state.isSubmitBtnActive}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nRename.propTypes = propTypes;\n\nexport default Rename;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, ButtonGroup } from 'reactstrap';\nimport { gettext, siteRoot, name, fileServerRoot, useGoFileserver } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport URLDecorator from '../../utils/url-decorator';\nimport MoveDirentDialog from '../dialog/move-dirent-dialog';\nimport CopyDirentDialog from '../dialog/copy-dirent-dialog';\nimport ShareDialog from '../dialog/share-dialog';\nimport EditFileTagDialog from '../dialog/edit-filetag-dialog';\nimport ZipDownloadDialog from '../dialog/zip-download-dialog';\nimport Rename from '../dialog/rename-dirent';\nimport LibSubFolderPermissionDialog from '../dialog/lib-sub-folder-permission-dialog';\nimport ViewModeToolbar from './view-mode-toolbar';\n\nimport ModalPortal from '../modal-portal';\nimport ItemDropdownMenu from '../dropdown-menu/item-dropdown-menu';\nimport toaster from '../toast';\n\nimport '../../css/dirents-menu.css';\n\nconst propTypes = {\n  path: PropTypes.string.isRequired,\n  userPerm: PropTypes.string.isRequired,\n  repoID: PropTypes.string.isRequired,\n  repoEncrypted: PropTypes.bool.isRequired,\n  selectedDirentList: PropTypes.array.isRequired,\n  onItemsMove: PropTypes.func.isRequired,\n  onItemsCopy: PropTypes.func.isRequired,\n  onItemsDelete: PropTypes.func.isRequired,\n  isRepoOwner: PropTypes.bool.isRequired,\n  enableDirPrivateShare: PropTypes.bool.isRequired,\n  currentRepoInfo: PropTypes.object.isRequired,\n  onFilesTagChanged: PropTypes.func.isRequired,\n  unSelectDirent: PropTypes.func.isRequired,\n  updateDirent: PropTypes.func.isRequired,\n  currentMode: PropTypes.string.isRequired,\n  switchViewMode: PropTypes.func.isRequired,\n  direntList: PropTypes.array.isRequired,\n  onItemRename: PropTypes.func.isRequired,\n  showDirentDetail: PropTypes.func.isRequired,\n  isGroupOwnedRepo: PropTypes.bool.isRequired,\n};\n\nclass MultipleDirOperationToolbar extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isZipDialogOpen: false,\n      isMoveDialogShow: false,\n      isCopyDialogShow: false,\n      isMutipleOperation: true,\n      showLibContentViewDialogs: false,\n      showShareDialog: false,\n      showEditFileTagDialog: false,\n      fileTagList: [],\n      multiFileTagList: [],\n      isRenameDialogOpen: false,\n      isPermissionDialogOpen: false\n    };\n  }\n\n  onMoveToggle = () => {\n    this.setState({isMoveDialogShow: !this.state.isMoveDialogShow});\n  };\n\n  onCopyToggle = () => {\n    this.setState({isCopyDialogShow: !this.state.isCopyDialogShow});\n  };\n\n  onItemsDelete = () => {\n    this.props.onItemsDelete();\n  };\n\n  onItemsDownload = () => {\n    let { path, repoID, selectedDirentList } = this.props;\n    if (selectedDirentList.length) {\n      if (selectedDirentList.length === 1 && !selectedDirentList[0].isDir()) {\n        let direntPath = Utils.joinPath(path, selectedDirentList[0].name);\n        let url = URLDecorator.getUrl({type: 'download_file_url', repoID: repoID, filePath: direntPath});\n        location.href= url;\n        return;\n      }\n      if (!useGoFileserver) {\n        this.setState({\n          isZipDialogOpen: true\n        });\n      } else {\n        const target = this.props.selectedDirentList.map(dirent => dirent.name);\n        seafileAPI.zipDownload(repoID, path, target).then((res) => {\n          const zipToken = res.data['zip_token'];\n          location.href = `${fileServerRoot}zip/${zipToken}`;\n        }).catch((error) => {\n          let errorMsg = Utils.getErrorMsg(error);\n          this.setState({\n            isLoading: false,\n            errorMsg: errorMsg\n          });\n        });\n      }\n    }\n  };\n\n  closeZipDialog = () => {\n    this.setState({\n      isZipDialogOpen: false\n    });\n  };\n\n  checkDuplicatedName = (newName) => {\n    return Utils.checkDuplicatedNameInList(this.props.direntList, newName);\n  };\n\n  onItemRename = (newName) => {\n    const dirent = this.props.selectedDirentList[0];\n    this.props.onItemRename(dirent, newName);\n  };\n\n  onPermissionItem = () => {\n    this.setState({\n      showLibContentViewDialogs: !this.state.showLibContentViewDialogs,\n      isPermissionDialogOpen: !this.state.isPermissionDialogOpen\n    });\n  };\n\n  onMarkAsDraft = (dirent) => {\n    let repoID = this.props.repoID;\n    let filePath = this.getDirentPath(dirent);\n    seafileAPI.sdocMarkAsDraft(repoID, filePath).then((res) => {\n      this.props.updateDirent(dirent, 'is_sdoc_draft', true);\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  onUnmarkAsDraft = (dirent) => {\n    let repoID = this.props.repoID;\n    let filePath = this.getDirentPath(dirent);\n    seafileAPI.sdocUnmarkAsDraft(repoID, filePath).then((res) => {\n      this.props.updateDirent(dirent, 'is_sdoc_draft', false);\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  onStartRevise = (dirent) => {\n    let repoID = this.props.repoID;\n    let filePath = this.getDirentPath(dirent);\n    seafileAPI.sdocStartRevise(repoID, filePath).then((res) => {\n      let url = siteRoot + 'lib/' + repoID + '/file' + Utils.encodePath(res.data.file_path);\n      window.open(url);\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  getDirentMenuList = (dirent) => {\n    const isRepoOwner = this.props.isRepoOwner;\n    const currentRepoInfo = this.props.currentRepoInfo;\n    const isContextmenu = true;\n    let opList = Utils.getDirentOperationList(isRepoOwner, currentRepoInfo, dirent, isContextmenu);\n    const list = ['Move', 'Copy', 'Delete', 'Download'];\n    if (dirent.type == 'dir') {\n      opList = opList.filter((item, index) => {\n        return list.indexOf(item.key) == -1 && item != 'Divider';\n      });\n    } else {\n      opList = opList.filter((item, index) => {\n        return list.indexOf(item.key) == -1;\n      });\n    }\n    return opList;\n  };\n\n  onMenuItemClick = (operation) => {\n    const dirents = this.props.selectedDirentList;\n    const dirent = dirents[0];\n    switch (operation) {\n      case 'Share':\n        this.setState({\n          showLibContentViewDialogs: true,\n          showShareDialog: true,\n        });\n        break;\n      case 'Rename':\n        this.setState({\n          showLibContentViewDialogs: true,\n          isRenameDialogOpen: true\n        });\n        break;\n      case 'Permission':\n        this.onPermissionItem();\n        break;\n      case 'Tags':\n        this.listFileTags(dirent);\n        break;\n      case 'Lock':\n        this.lockFile(dirent);\n        break;\n      case 'Unlock':\n        this.unlockFile(dirent);\n        break;\n      case 'Mark as draft':\n        this.onMarkAsDraft(dirent);\n        break;\n      case 'Unmark as draft':\n        this.onUnmarkAsDraft(dirent);\n        break;\n      case 'History':\n        this.onHistory(dirent);\n        break;\n      case 'Access Log':\n        this.onAccessLog(dirent);\n        break;\n      case 'Properties':\n        this.props.showDirentDetail('info');\n        break;\n      case 'Open via Client':\n        this.onOpenViaClient(dirent);\n        break;\n      default:\n        break;\n    }\n  };\n\n  lockFile = (dirent) => {\n    const filePath = this.getDirentPath(dirent);\n    seafileAPI.lockfile(this.props.repoID, filePath).then((res) => {\n      if (res.data.is_locked) {\n        this.props.updateDirent(dirent, 'is_locked', true);\n        this.props.updateDirent(dirent, 'locked_by_me', true);\n        this.props.updateDirent(dirent, 'lock_owner_name', name);\n        this.props.unSelectDirent();\n      }\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  unlockFile = (dirent) => {\n    const filePath = this.getDirentPath(dirent);\n    seafileAPI.unlockfile(this.props.repoID, filePath).then((res) => {\n      if (!res.data.is_locked) {\n        this.props.updateDirent(dirent, 'is_locked', false);\n        this.props.updateDirent(dirent, 'locked_by_me', false);\n        this.props.updateDirent(dirent, 'lock_owner_name', '');\n        this.props.unSelectDirent();\n      }\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  onOpenViaClient = (dirent) => {\n    const filePath = this.getDirentPath(dirent);\n    let url = URLDecorator.getUrl({\n      type: 'open_via_client',\n      repoID: this.props.repoID,\n      filePath: filePath\n    });\n    location.href = url;\n  };\n\n  onHistory = (dirent) => {\n    let filePath = this.getDirentPath(dirent);\n    let url = URLDecorator.getUrl({\n      type: 'file_revisions',\n      repoID: this.props.repoID,\n      filePath: filePath\n    });\n    location.href = url;\n  };\n\n  onAccessLog = (dirent) => {\n    let filePath = this.getDirentPath(dirent);\n    let path = siteRoot + 'repo/file-access/' + this.props.repoID + '/?p=' + encodeURIComponent(filePath) ;\n    window.open(path);\n  };\n\n  toggleCancel = () => {\n    this.setState({\n      showLibContentViewDialogs: false,\n      showShareDialog: false,\n      showEditFileTagDialog: false,\n      isRenameDialogOpen: false,\n      isPermissionDialogOpen: false,\n    });\n  };\n\n  listFileTags = (dirent) => {\n    let filePath = this.getDirentPath(dirent);\n    seafileAPI.listFileTags(this.props.repoID, filePath).then(res => {\n      let fileTagList = res.data.file_tags;\n      for (let i = 0, length = fileTagList.length; i < length; i++) {\n        fileTagList[i].id = fileTagList[i].file_tag_id;\n      }\n      this.setState({\n        fileTagList: fileTagList,\n        showLibContentViewDialogs: true,\n        showEditFileTagDialog: true,\n      });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  onMenuFileTagChanged = () => {\n    this.listFileTags(this.props.selectedDirentList[0]);\n    let length = this.props.selectedDirentList.length;\n    for (let i = 0; i < length; i++) {\n      const dirent = this.props.selectedDirentList[i];\n      const direntPath = this.getDirentPath(dirent);\n      this.props.onFilesTagChanged(dirent, direntPath);\n    }\n  };\n\n  getDirentPath = (dirent) => {\n    if (dirent) return Utils.joinPath(this.props.path, dirent.name);\n  };\n\n  render() {\n\n    const { repoID, userPerm } = this.props;\n    const dirent = this.props.selectedDirentList[0];\n    const direntPath = this.getDirentPath(dirent);\n\n    const { isCustomPermission, customPermission } = Utils.getUserPermission(userPerm);\n    let canDelete = true;\n    let canDownload = true;\n    let canCopy = true;\n    let canModify = true;\n    if (isCustomPermission) {\n      const { permission } = customPermission;\n      canDelete = permission.delete;\n      canDownload = permission.download;\n      canCopy = permission.copy;\n      canModify = permission.modify;\n    }\n\n    return (\n      <Fragment>\n        <div className=\"dir-operation\">\n          <div className=\"d-flex\">\n            <ButtonGroup className=\"flex-row group-operations\">\n              {(userPerm === 'rw' || userPerm === 'admin' || isCustomPermission) && (\n                <Fragment>\n                  {canModify && <Button className=\"secondary group-op-item action-icon sf2-icon-move\" title={gettext('Move')} aria-label={gettext('Move')} onClick={this.onMoveToggle}></Button>}\n                  {canCopy && <Button className=\"secondary group-op-item action-icon sf2-icon-copy\" title={gettext('Copy')} aria-label={gettext('Copy')} onClick={this.onCopyToggle}></Button>}\n                  {canDelete && <Button className=\"secondary group-op-item action-icon sf2-icon-delete\" title={gettext('Delete')} aria-label={gettext('Delete')} onClick={this.onItemsDelete}></Button>}\n                  {canDownload && <Button className=\"secondary group-op-item action-icon sf2-icon-download\" title={gettext('Download')} aria-label={gettext('Download')} onClick={this.onItemsDownload}></Button>}\n                </Fragment>\n              )}\n              {userPerm === 'cloud-edit' && (\n                <Fragment>\n                  {canModify && <Button className=\"secondary group-op-item action-icon sf2-icon-move\" title={gettext('Move')} aria-label={gettext('Move')} onClick={this.onMoveToggle}></Button>}\n                  {canCopy && <Button className=\"secondary group-op-item action-icon sf2-icon-copy\" title={gettext('Copy')} aria-label={gettext('Copy')} onClick={this.onCopyToggle}></Button>}\n                  {canDelete && <Button className=\"secondary group-op-item action-icon sf2-icon-delete\" title={gettext('Delete')} aria-label={gettext('Delete')} onClick={this.onItemsDelete}></Button>}\n                </Fragment>\n              )}\n              {userPerm === 'r' && (\n                <Fragment>\n                  <Button className=\"secondary group-op-item action-icon sf2-icon-copy\" title={gettext('Copy')} aria-label={gettext('Copy')} onClick={this.onCopyToggle}></Button>\n                  <Button className=\"secondary group-op-item action-icon sf2-icon-download\" title={gettext('Download')} aria-label={gettext('Download')} onClick={this.onItemsDownload}></Button>\n                </Fragment>\n              )}\n              {this.props.selectedDirentList.length === 1 &&\n                <ItemDropdownMenu\n                  tagName={'button'}\n                  item={this.props.selectedDirentList[0]}\n                  toggleClass={'fas fa-ellipsis-v dirents-more-menu'}\n                  onMenuItemClick={this.onMenuItemClick}\n                  getMenuList={this.getDirentMenuList}\n                />\n              }\n            </ButtonGroup>\n          </div>\n        </div>\n        {Utils.isDesktop() && <ViewModeToolbar currentMode={this.props.currentMode} switchViewMode={this.props.switchViewMode} isCustomPermission={isCustomPermission} />}\n        {this.state.isMoveDialogShow &&\n          <MoveDirentDialog\n            path={this.props.path}\n            repoID={this.props.repoID}\n            repoEncrypted={this.props.repoEncrypted}\n            isMutipleOperation={this.state.isMutipleOperation}\n            selectedDirentList={this.props.selectedDirentList}\n            onItemsMove={this.props.onItemsMove}\n            onCancelMove={this.onMoveToggle}\n          />\n        }\n        {this.state.isCopyDialogShow &&\n          <CopyDirentDialog\n            path={this.props.path}\n            repoID={this.props.repoID}\n            repoEncrypted={this.props.repoEncrypted}\n            selectedDirentList={this.props.selectedDirentList}\n            isMutipleOperation={this.state.isMutipleOperation}\n            onItemsCopy={this.props.onItemsCopy}\n            onCancelCopy={this.onCopyToggle}\n          />\n        }\n        {this.state.isZipDialogOpen &&\n        <ModalPortal>\n          <ZipDownloadDialog\n            repoID={this.props.repoID}\n            path={this.props.path}\n            target={this.props.selectedDirentList.map(dirent => dirent.name)}\n            toggleDialog={this.closeZipDialog}\n          />\n        </ModalPortal>\n        }\n        {this.state.showLibContentViewDialogs && (\n          <Fragment>\n            {this.state.showShareDialog &&\n              <ModalPortal>\n                <ShareDialog\n                  itemType={dirent.type}\n                  itemName={dirent.name}\n                  itemPath={direntPath}\n                  userPerm={dirent.permission}\n                  repoID={repoID}\n                  repoEncrypted={this.props.repoEncrypted}\n                  enableDirPrivateShare={this.props.enableDirPrivateShare}\n                  isGroupOwnedRepo={this.props.isGroupOwnedRepo}\n                  toggleDialog={this.toggleCancel}\n                />\n              </ModalPortal>\n            }\n            {this.state.isRenameDialogOpen &&\n              <ModalPortal>\n                <Rename\n                  dirent={dirent}\n                  onRename={this.onItemRename}\n                  checkDuplicatedName={this.checkDuplicatedName}\n                  toggleCancel={this.toggleCancel}\n                />\n              </ModalPortal>\n            }\n            {this.state.isPermissionDialogOpen &&\n              <ModalPortal>\n                <LibSubFolderPermissionDialog\n                  toggleDialog={this.toggleCancel}\n                  repoID={repoID}\n                  folderPath={direntPath}\n                  folderName={dirent.name}\n                  isDepartmentRepo={this.props.isGroupOwnedRepo}\n                />\n              </ModalPortal>\n            }\n            {this.state.showEditFileTagDialog &&\n              <ModalPortal>\n                <EditFileTagDialog\n                  repoID={repoID}\n                  filePath={direntPath}\n                  fileTagList={this.state.fileTagList}\n                  toggleCancel={this.toggleCancel}\n                  onFileTagChanged={this.onMenuFileTagChanged}\n                />\n              </ModalPortal>\n            }\n          </Fragment>\n        )}\n      </Fragment>\n    );\n  }\n}\n\nMultipleDirOperationToolbar.propTypes = propTypes;\n\nexport default MultipleDirOperationToolbar;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { DropdownToggle, Dropdown, DropdownMenu, DropdownItem, Tooltip} from 'reactstrap';\nimport { gettext, siteRoot, isDocs } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../toast';\nimport ModalPotal from '../modal-portal';\nimport ShareDialog from '../dialog/share-dialog';\nimport EditFileTagDialog from '../dialog/edit-filetag-dialog';\n\nconst propTypes = {\n  path: PropTypes.string.isRequired,\n  repoID: PropTypes.string.isRequired,\n  userPerm: PropTypes.string.isRequired,\n  repoEncrypted: PropTypes.bool.isRequired,\n  enableDirPrivateShare: PropTypes.bool.isRequired,\n  isGroupOwnedRepo: PropTypes.bool.isRequired,\n  filePermission: PropTypes.string,\n  isDraft: PropTypes.bool.isRequired,\n  hasDraft: PropTypes.bool.isRequired,\n  fileTags: PropTypes.array.isRequired,\n  onFileTagChanged: PropTypes.func.isRequired,\n  showShareBtn: PropTypes.bool.isRequired,\n  dirent: PropTypes.object.isRequired,\n};\n\nclass ViewFileToolbar extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isDraftMessageShow: false,\n      isMoreMenuShow: false,\n      isShareDialogShow: false,\n      isEditTagDialogShow: false,\n    };\n  }\n\n  onEditClick = (e) => {\n    e.preventDefault();\n    let { path, repoID } = this.props;\n    let url = siteRoot + 'lib/' + repoID + '/file' + Utils.encodePath(path) + '?mode=edit';\n    window.open(url);\n  };\n\n  onNewDraft = (e) => {\n    e.preventDefault();\n    let { path, repoID } = this.props;\n    seafileAPI.createDraft(repoID, path).then(res => {\n      window.location.href = siteRoot + 'lib/' + res.data.origin_repo_id + '/file' + res.data.draft_file_path + '?mode=edit';\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  onDraftHover = () => {\n    this.setState({isDraftMessageShow: !this.state.isDraftMessageShow});\n  };\n\n  toggleMore = () => {\n    this.setState({isMoreMenuShow: !this.state.isMoreMenuShow});\n  };\n\n  onShareToggle = () => {\n    this.setState({isShareDialogShow: !this.state.isShareDialogShow});\n  };\n\n  onEditFileTagToggle = () => {\n    this.setState({isEditTagDialogShow: !this.state.isEditTagDialogShow});\n  };\n\n  onHistoryClick = () => {\n    let historyUrl = siteRoot + 'repo/file_revisions/' + this.props.repoID + '/?p=' + Utils.encodePath(this.props.path);\n    location.href = historyUrl;\n  };\n\n  render() {\n    let { filePermission } = this.props;\n    return (\n      <Fragment>\n        <div className=\"dir-operation\">\n          {((filePermission === 'rw' || filePermission === 'cloud-edit') && !this.props.hasDraft) && (\n            <Fragment>\n              <button className=\"btn btn-secondary operation-item\" title={gettext('Edit File')} onClick={this.onEditClick}>{gettext('Edit')}</button>\n            </Fragment>\n          )}\n          {(filePermission === 'rw' && !this.props.isDraft && !this.props.hasDraft && isDocs) && (\n            <Fragment>\n              <button id=\"new-draft\" className=\"btn btn-secondary operation-item\" onClick={this.onNewDraft}>{gettext('New Draft')}</button>\n              <Tooltip target=\"new-draft\" placement=\"bottom\" isOpen={this.state.isDraftMessageShow} toggle={this.onDraftHover}>{gettext('Create a draft from this file, instead of editing it directly.')}</Tooltip>\n            </Fragment>\n          )}\n          {filePermission === 'rw' && (\n            <Dropdown isOpen={this.state.isMoreMenuShow} toggle={this.toggleMore}>\n              <DropdownToggle className='btn btn-secondary operation-item'>\n                {gettext('More')}\n              </DropdownToggle>\n              <DropdownMenu>\n                {this.props.showShareBtn &&\n                  <DropdownItem onClick={this.onShareToggle}>{gettext('Share')}</DropdownItem>\n                }\n                <DropdownItem onClick={this.onEditFileTagToggle}>{gettext('Tags')}</DropdownItem>\n                <DropdownItem onClick={this.onHistoryClick}>{gettext('History')}</DropdownItem>\n              </DropdownMenu>\n            </Dropdown>\n          )}\n        </div>\n        {this.state.isShareDialogShow && (\n          <ModalPotal>\n            <ShareDialog\n              itemType={'file'}\n              itemName={Utils.getFileName(this.props.path)}\n              itemPath={this.props.path}\n              repoID={this.props.repoID}\n              repoEncrypted={this.props.repoEncrypted}\n              enableDirPrivateShare={this.props.enableDirPrivateShare}\n              userPerm={this.props.userPerm}\n              isGroupOwnedRepo={this.props.isGroupOwnedRepo}\n              toggleDialog={this.onShareToggle}\n            />\n          </ModalPotal>\n        )}\n        {this.state.isEditTagDialogShow && (\n          <ModalPotal>\n            <EditFileTagDialog\n              filePath={this.props.path}\n              repoID={this.props.repoID}\n              fileTagList={this.props.fileTags}\n              toggleCancel={this.onEditFileTagToggle}\n              onFileTagChanged={this.props.onFileTagChanged}\n            />\n          </ModalPotal>\n        )}\n      </Fragment>\n    );\n  }\n}\n\nViewFileToolbar.propTypes = propTypes;\n\nexport default ViewFileToolbar;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../../utils/constants';\nimport CommonToolbar from '../../components/toolbar/common-toolbar';\nimport ViewModeToolbar from '../../components/toolbar/view-mode-toolbar';\nimport DirOperationToolBar from '../../components/toolbar/dir-operation-toolbar';\nimport MultipleDirOperationToolbar from '../../components/toolbar/multiple-dir-operation-toolbar';\nimport ViewFileToolbar from '../../components/toolbar/view-file-toolbar';\nimport { Utils } from '../../utils/utils';\n\nconst propTypes = {\n  isViewFile: PropTypes.bool.isRequired,\n  filePermission: PropTypes.string,\n  isDraft: PropTypes.bool.isRequired,\n  hasDraft: PropTypes.bool.isRequired,\n  fileTags: PropTypes.array.isRequired,\n  onFileTagChanged: PropTypes.func.isRequired,  // for file-view-toolbar\n  // side-panel\n  onSideNavMenuClick: PropTypes.func.isRequired,\n  // mutiple-dir\n  isDirentSelected: PropTypes.bool.isRequired,\n  repoID: PropTypes.string.isRequired,\n  path: PropTypes.string.isRequired,\n  selectedDirentList: PropTypes.array.isRequired,\n  onItemsMove: PropTypes.func.isRequired,\n  onItemsCopy: PropTypes.func.isRequired,\n  onItemsDelete: PropTypes.func.isRequired,\n  // dir\n  direntList: PropTypes.array.isRequired,\n  repoName: PropTypes.string.isRequired,\n  repoEncrypted: PropTypes.bool.isRequired,\n  isGroupOwnedRepo: PropTypes.bool.isRequired,\n  userPerm: PropTypes.string.isRequired,\n  showShareBtn: PropTypes.bool.isRequired,\n  enableDirPrivateShare: PropTypes.bool.isRequired,\n  onAddFile: PropTypes.func.isRequired,\n  onAddFolder: PropTypes.func.isRequired,\n  onUploadFile: PropTypes.func.isRequired,\n  onUploadFolder: PropTypes.func.isRequired,\n  // view-mode\n  currentMode: PropTypes.string.isRequired,\n  switchViewMode: PropTypes.func.isRequired,\n  // search\n  onSearchedClick: PropTypes.func.isRequired,\n  isRepoOwner: PropTypes.bool.isRequired,\n  // selected menu\n  onFilesTagChanged: PropTypes.func.isRequired, // for mutiple select toolbar\n  updateDirent: PropTypes.func.isRequired,\n  unSelectDirent: PropTypes.func,\n  currentRepoInfo: PropTypes.object,\n  onItemRename: PropTypes.func,\n  showDirentDetail: PropTypes.func,\n};\n\nclass LibContentToolbar extends React.Component {\n\n  render() {\n\n    const { userPerm } = this.props;\n    const { isCustomPermission } = Utils.getUserPermission(userPerm);\n\n    if (this.props.isViewFile) {\n      return (\n        <Fragment>\n          <div className=\"cur-view-toolbar\">\n            <span className=\"sf2-icon-menu hidden-md-up d-md-none side-nav-toggle\" title={gettext('Side Nav Menu')} onClick={this.props.onSideNavMenuClick}></span>\n            <ViewFileToolbar\n              path={this.props.path}\n              repoID={this.props.repoID}\n              userPerm={this.props.userPerm}\n              repoEncrypted={this.props.repoEncrypted}\n              enableDirPrivateShare={this.props.enableDirPrivateShare}\n              isGroupOwnedRepo={this.props.isGroupOwnedRepo}\n              filePermission={this.props.filePermission}\n              isDraft={this.props.isDraft}\n              hasDraft={this.props.hasDraft}\n              fileTags={this.props.fileTags}\n              onFileTagChanged={this.props.onFileTagChanged}\n              showShareBtn={this.props.showShareBtn}\n            />\n            <ViewModeToolbar currentMode={this.props.currentMode} switchViewMode={this.props.switchViewMode} isCustomPermission={isCustomPermission} />\n          </div>\n          <CommonToolbar\n            isLibView={true}\n            repoID={this.props.repoID}\n            repoName={this.props.repoName}\n            onSearchedClick={this.props.onSearchedClick}\n            searchPlaceholder={gettext('Search files')}\n          />\n        </Fragment>\n      );\n    }\n\n    return (\n      <Fragment>\n        <div className=\"cur-view-toolbar\">\n          <span className=\"sf2-icon-menu hidden-md-up d-md-none side-nav-toggle\" title={gettext('Side Nav Menu')} onClick={this.props.onSideNavMenuClick}></span>\n          {this.props.isDirentSelected ?\n            <MultipleDirOperationToolbar\n              repoID={this.props.repoID}\n              path={this.props.path}\n              userPerm={this.props.userPerm}\n              repoEncrypted={this.props.repoEncrypted}\n              selectedDirentList={this.props.selectedDirentList}\n              direntList={this.props.direntList}\n              onItemsMove={this.props.onItemsMove}\n              onItemsCopy={this.props.onItemsCopy}\n              onItemsDelete={this.props.onItemsDelete}\n              onItemRename={this.props.onItemRename}\n              isRepoOwner={this.props.isRepoOwner}\n              currentRepoInfo={this.props.currentRepoInfo}\n              enableDirPrivateShare={this.props.enableDirPrivateShare}\n              updateDirent={this.props.updateDirent}\n              unSelectDirent={this.props.unSelectDirent}\n              onFilesTagChanged={this.props.onFilesTagChanged}\n              showShareBtn={this.props.showShareBtn}\n              isGroupOwnedRepo={this.props.isGroupOwnedRepo}\n              showDirentDetail={this.props.showDirentDetail}\n              currentMode={this.props.currentMode}\n              switchViewMode={this.props.switchViewMode}\n            /> :\n            <DirOperationToolBar\n              path={this.props.path}\n              repoID={this.props.repoID}\n              repoName={this.props.repoName}\n              repoEncrypted={this.props.repoEncrypted}\n              direntList={this.props.direntList}\n              showShareBtn={this.props.showShareBtn}\n              enableDirPrivateShare={this.props.enableDirPrivateShare}\n              userPerm={this.props.userPerm}\n              isGroupOwnedRepo={this.props.isGroupOwnedRepo}\n              onAddFile={this.props.onAddFile}\n              onAddFolder={this.props.onAddFolder}\n              onUploadFile={this.props.onUploadFile}\n              onUploadFolder={this.props.onUploadFolder}\n              currentMode={this.props.currentMode}\n              switchViewMode={this.props.switchViewMode}\n            />\n          }\n        </div>\n        <CommonToolbar\n          isLibView={true}\n          repoID={this.props.repoID}\n          repoName={this.props.repoName}\n          onSearchedClick={this.props.onSearchedClick}\n          searchPlaceholder={gettext('Search files')}\n        />\n      </Fragment>\n    );\n  }\n}\n\nLibContentToolbar.propTypes = propTypes;\n\nexport default LibContentToolbar;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Link } from '@gatsbyjs/reach-router';\nimport { UncontrolledTooltip } from 'reactstrap';\nimport { siteRoot, gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport { InternalLinkOperation } from '../operations';\n\nconst propTypes = {\n  repoName: PropTypes.string.isRequired,\n  currentPath: PropTypes.string.isRequired,\n  onPathClick: PropTypes.func.isRequired,\n  onTabNavClick: PropTypes.func,\n  pathPrefix: PropTypes.array,\n  repoID: PropTypes.string.isRequired,\n  isViewFile: PropTypes.bool,\n  fileTags: PropTypes.array.isRequired,\n};\n\nclass DirPath extends React.Component {\n\n  onPathClick = (e) => {\n    let path = Utils.getEventData(e, 'path');\n    this.props.onPathClick(path);\n  };\n\n  onTabNavClick = (e, tabName, id) => {\n    if (window.uploader &&\n      window.uploader.isUploadProgressDialogShow &&\n      window.uploader.totalProgress !== 100) {\n      if (!window.confirm(gettext('A file is being uploaded. Are you sure you want to leave this page?'))) {\n        e.preventDefault();\n        return false;\n      }\n      window.uploader.isUploadProgressDialogShow = false;\n    }\n    this.props.onTabNavClick(tabName, id);\n  };\n\n  turnPathToLink = (path) => {\n    path = path[path.length - 1] === '/' ? path.slice(0, path.length - 1) : path;\n    let pathList = path.split('/');\n    let nodePath = '';\n    let pathElem = pathList.map((item, index) => {\n      if (item === '') {\n        return null;\n      }\n      if (index === (pathList.length - 1)) {\n        return (\n          <Fragment key={index}>\n            <span className=\"path-split\">/</span>\n            <span className=\"path-file-name\">{item}</span>\n          </Fragment>\n        );\n      } else {\n        nodePath += '/' + item;\n        return (\n          <Fragment key={index} >\n            <span className=\"path-split\">/</span>\n            <a className=\"path-link\" data-path={nodePath} onClick={this.onPathClick}>{item}</a>\n          </Fragment>\n        );\n      }\n    });\n    return pathElem;\n  };\n\n  render() {\n    let { currentPath, repoName, fileTags } = this.props;\n    let pathElem = this.turnPathToLink(currentPath);\n\n    let tagTitle = '';\n    if (fileTags.length > 0) {\n      fileTags.forEach(item => {\n        tagTitle += item.name + ' ';\n      });\n    }\n\n    return (\n      <div className=\"path-container\">\n        {this.props.pathPrefix && this.props.pathPrefix.map((item, index) => {\n          return (\n            <Fragment key={index}>\n              <Link to={item.url} className=\"normal\" onClick={(e) => this.onTabNavClick(e, item.name, item.id)}>{gettext(item.showName)}</Link>\n              <span className=\"path-split\">/</span>\n            </Fragment>\n          );\n        })}\n        {this.props.pathPrefix && this.props.pathPrefix.length === 0 && (\n          <Fragment>\n            <Link to={siteRoot + 'my-libs/'} className=\"normal\" onClick={(e) => this.onTabNavClick(e, 'my-libs')}>{gettext('Libraries')}</Link>\n            <span className=\"path-split\">/</span>\n          </Fragment>\n        )}\n        {!this.props.pathPrefix && (\n          <Fragment>\n            <Link href={siteRoot + 'my-libs/'} className=\"normal\" onClick={(e) => this.onTabNavClick(e, 'my-libs')}>{gettext('Libraries')}</Link>\n            <span className=\"path-split\">/</span>\n          </Fragment>\n        )}\n        {(currentPath === '/' || currentPath === '') ?\n          <span className=\"path-repo-name\">{repoName}</span>:\n          <a className=\"path-link\" data-path=\"/\" onClick={this.onPathClick}>{repoName}</a>\n        }\n        {pathElem}\n        {this.props.isViewFile && (\n          <InternalLinkOperation repoID={this.props.repoID} path={this.props.currentPath}/>\n        )}\n        {(this.props.isViewFile && fileTags.length !== 0) &&\n          <span id='column-mode-file-tags' className=\"tag-list tag-list-stacked align-middle ml-1 d-flex align-items-center\">\n            {fileTags.map((fileTag, index) => {\n              return (<span className=\"file-tag\" key={fileTag.id} style={{zIndex: index, backgroundColor: fileTag.color}}></span>);\n            })}\n            <UncontrolledTooltip target=\"column-mode-file-tags\" placement=\"bottom\">\n              {tagTitle}\n            </UncontrolledTooltip>\n          </span>\n        }\n      </div>\n    );\n  }\n}\n\nDirPath.propTypes = propTypes;\n\nexport default DirPath;\n","const randomUUID = typeof crypto !== 'undefined' && crypto.randomUUID && crypto.randomUUID.bind(crypto);\nexport default {\n  randomUUID\n};","import validate from './validate.js';\n/**\n * Convert array of 16 byte values to UUID string format of the form:\n * XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX\n */\n\nconst byteToHex = [];\n\nfor (let i = 0; i < 256; ++i) {\n  byteToHex.push((i + 0x100).toString(16).slice(1));\n}\n\nexport function unsafeStringify(arr, offset = 0) {\n  // Note: Be careful editing this code!  It's been tuned for performance\n  // and works in ways you may not expect. See https://github.com/uuidjs/uuid/pull/434\n  return byteToHex[arr[offset + 0]] + byteToHex[arr[offset + 1]] + byteToHex[arr[offset + 2]] + byteToHex[arr[offset + 3]] + '-' + byteToHex[arr[offset + 4]] + byteToHex[arr[offset + 5]] + '-' + byteToHex[arr[offset + 6]] + byteToHex[arr[offset + 7]] + '-' + byteToHex[arr[offset + 8]] + byteToHex[arr[offset + 9]] + '-' + byteToHex[arr[offset + 10]] + byteToHex[arr[offset + 11]] + byteToHex[arr[offset + 12]] + byteToHex[arr[offset + 13]] + byteToHex[arr[offset + 14]] + byteToHex[arr[offset + 15]];\n}\n\nfunction stringify(arr, offset = 0) {\n  const uuid = unsafeStringify(arr, offset); // Consistency check for valid UUID.  If this throws, it's likely due to one\n  // of the following:\n  // - One or more input array values don't map to a hex octet (leading to\n  // \"undefined\" in the uuid)\n  // - Invalid input values for the RFC `version` or `variant` fields\n\n  if (!validate(uuid)) {\n    throw TypeError('Stringified UUID is invalid');\n  }\n\n  return uuid;\n}\n\nexport default stringify;","import native from './native.js';\nimport rng from './rng.js';\nimport { unsafeStringify } from './stringify.js';\n\nfunction v4(options, buf, offset) {\n  if (native.randomUUID && !buf && !options) {\n    return native.randomUUID();\n  }\n\n  options = options || {};\n  const rnds = options.random || (options.rng || rng)(); // Per 4.4, set bits for version and `clock_seq_hi_and_reserved`\n\n  rnds[6] = rnds[6] & 0x0f | 0x40;\n  rnds[8] = rnds[8] & 0x3f | 0x80; // Copy bytes to buffer, if provided\n\n  if (buf) {\n    offset = offset || 0;\n\n    for (let i = 0; i < 16; ++i) {\n      buf[offset + i] = rnds[i];\n    }\n\n    return buf;\n  }\n\n  return unsafeStringify(rnds);\n}\n\nexport default v4;","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Popover, PopoverBody } from 'reactstrap';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport { TAG_COLORS } from '../../constants';\nimport toaster from '../toast';\n\nimport '../../css/repo-tag.css';\n\nconst tagColorPropTypes = {\n  tag: PropTypes.object.isRequired,\n  repoID: PropTypes.string.isRequired\n};\n\nclass TagColor extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      tagColor: this.props.tag.color,\n      isPopoverOpen: false\n    };\n  }\n\n  UNSAFE_componentWillReceiveProps(nextProps) {\n    if (nextProps.tag.color !== this.props.tag.color) {\n      this.setState({\n        tagColor: nextProps.tag.color,\n      });\n    }\n  }\n\n  togglePopover = () => {\n    this.setState({\n      isPopoverOpen: !this.state.isPopoverOpen\n    });\n  };\n\n  selectTagColor = (e) => {\n    const newColor = e.target.value;\n    const { repoID, tag } = this.props;\n    const { id, name } = tag;\n    seafileAPI.updateRepoTag(repoID, id, name, newColor).then(() => {\n      this.setState({\n        tagColor: newColor,\n        isPopoverOpen: !this.state.isPopoverOpen\n      });\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  render() {\n    const { isPopoverOpen, tagColor } = this.state;\n    const { tag } = this.props;\n    const { id, color } = tag;\n\n    let colorList = [...TAG_COLORS];\n    // for color from previous color options\n    if (colorList.indexOf(color) == -1) {\n      colorList.unshift(color);\n    }\n\n    return (\n      <div>\n        <span\n          id={`tag-${id}-color`}\n          className=\"tag-color cursor-pointer rounded-circle d-flex align-items-center justify-content-center\"\n          style={{backgroundColor: tagColor}}\n          onClick={this.togglePopover}\n        >\n          <i className=\"fas fa-caret-down text-white\"></i>\n        </span>\n        <Popover\n          target={`tag-${id}-color`}\n          isOpen={isPopoverOpen}\n          placement=\"bottom\"\n          toggle={this.togglePopover}\n          className=\"tag-color-popover mw-100\"\n        >\n          <PopoverBody className=\"p-2\">\n            <div className=\"d-flex justify-content-between\">\n              {colorList.map((item, index)=>{\n                return (\n                  <div key={index} className=\"tag-color-option mx-1\">\n                    <label className=\"colorinput\">\n                      <input name=\"color\" type=\"radio\" value={item} className=\"colorinput-input\" defaultChecked={item == tagColor} onClick={this.selectTagColor} />\n                      <span className=\"colorinput-color rounded-circle d-flex align-items-center justify-content-center\" style={{backgroundColor: item}}>\n                        <i className=\"fas fa-check color-selected\"></i>\n                      </span>\n                    </label>\n                  </div>\n                );\n              })\n              }\n            </div>\n          </PopoverBody>\n        </Popover>\n      </div>\n    );\n  }\n}\n\nTagColor.propTypes = tagColorPropTypes;\n\nexport default TagColor;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../toast';\n\nimport '../../css/repo-tag.css';\n\nconst tagNamePropTypes = {\n  tag: PropTypes.object.isRequired,\n  repoID: PropTypes.string.isRequired\n};\n\nclass TagName extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      tagName: this.props.tag.name,\n      isEditing: false\n    };\n    this.input = React.createRef();\n  }\n\n  UNSAFE_componentWillReceiveProps(nextProps) {\n    if (nextProps.tag.name !== this.props.tag.name) {\n      this.setState({\n        tagName: nextProps.tag.name,\n      });\n    }\n  }\n\n  toggleMode = () => {\n    this.setState({\n      isEditing: !this.state.isEditing\n    }, () => {\n      if (this.state.isEditing) {\n        this.input.current.focus();\n      }\n    });\n  };\n\n  updateTagName = (e) => {\n    const newName = e.target.value;\n    const { repoID, tag } = this.props;\n    const { id, color } = tag;\n    seafileAPI.updateRepoTag(repoID, id, newName, color).then(() => {\n      this.setState({\n        tagName: newName\n      });\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  onInputKeyDown = (e) => {\n    if (e.key == 'Enter') {\n      this.toggleMode();\n      this.updateTagName(e);\n    }\n    else if (e.key == 'Escape') {\n      e.nativeEvent.stopImmediatePropagation();\n      this.toggleMode();\n    }\n  };\n\n  onInputBlur = (e) => {\n    this.toggleMode();\n    this.updateTagName(e);\n  };\n\n  render() {\n    const { isEditing, tagName } = this.state;\n    return (\n      <div className=\"mx-2 flex-fill d-flex\">\n        {isEditing ?\n          <input\n            type=\"text\"\n            ref={this.input}\n            defaultValue={tagName}\n            onBlur={this.onInputBlur}\n            onKeyDown={this.onInputKeyDown}\n            className=\"flex-fill form-control-sm form-control\"\n          /> :\n          <span\n            onClick={this.toggleMode}\n            className=\"cursor-pointer flex-fill\"\n          >{tagName}</span>\n        }\n      </div>\n    );\n  }\n}\n\nTagName.propTypes = tagNamePropTypes;\n\nexport default TagName;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../../utils/constants';\nimport TagColor from '../dialog/tag-color';\nimport TagName from '../dialog/tag-name';\n\nimport '../../css/repo-tag.css';\nimport './list-tag-popover.css';\n\nconst tagListItemPropTypes = {\n  item: PropTypes.object.isRequired,\n  repoID: PropTypes.string.isRequired,\n  onDeleteTag : PropTypes.func.isRequired\n};\n\nclass TagListItem extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isTagHighlighted: false\n    };\n  }\n\n  onMouseOver = () => {\n    this.setState({\n      isTagHighlighted: true\n    });\n  };\n\n  onMouseOut = () => {\n    this.setState({\n      isTagHighlighted: false\n    });\n  };\n\n  deleteTag = () => {\n    this.props.onDeleteTag(this.props.item);\n  };\n\n  render() {\n    const { isTagHighlighted } = this.state;\n    const { item, repoID } = this.props;\n    return (\n      <li\n        className={`tag-list-item px-4 d-flex justify-content-between align-items-center ${isTagHighlighted ? 'hl' : ''}`}\n        onMouseOver={this.onMouseOver}\n        onMouseOut={this.onMouseOut}\n      >\n        <TagColor repoID={repoID} tag={item} />\n        <TagName repoID={repoID} tag={item} />\n        <button\n          className={`tag-delete-icon sf2-icon-delete border-0 px-0 bg-transparent cursor-pointer ${isTagHighlighted ? '' : 'invisible'}`}\n          onClick={this.deleteTag}\n          aria-label={gettext('Delete')}\n          title={gettext('Delete')}\n        ></button>\n      </li>\n    );\n  }\n}\n\nTagListItem.propTypes = tagListItemPropTypes;\n\nexport default TagListItem;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Popover, PopoverBody } from 'reactstrap';\nimport { TAG_COLORS } from '../../constants';\n\nimport '../../css/repo-tag.css';\n\nexport default class VirtualTagColor extends React.Component {\n\n  static propTypes = {\n    updateVirtualTag: PropTypes.func.isRequired,\n    tag: PropTypes.object.isRequired,\n    repoID: PropTypes.string.isRequired\n  };\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      tagColor: this.props.tag.color,\n      isPopoverOpen: false\n    };\n  }\n\n  UNSAFE_componentWillReceiveProps(nextProps) {\n    if (nextProps.tag.color !== this.props.tag.color) {\n      this.setState({\n        tagColor: nextProps.tag.color,\n      });\n    }\n  }\n\n  togglePopover = () => {\n    this.setState({\n      isPopoverOpen: !this.state.isPopoverOpen\n    });\n  };\n\n  selectTagColor = (e) => {\n    const newColor = e.target.value;\n    this.props.updateVirtualTag(this.props.tag, { color: newColor });\n    this.setState({\n      tagColor: newColor,\n      isPopoverOpen: !this.state.isPopoverOpen,\n    });\n  };\n\n  render() {\n    const { isPopoverOpen, tagColor } = this.state;\n    const { tag } = this.props;\n    const { id, color } = tag;\n\n    let colorList = [...TAG_COLORS];\n    // for color from previous color options\n    if (colorList.indexOf(color) == -1) {\n      colorList.unshift(color);\n    }\n\n    return (\n      <div>\n        <span\n          id={`tag-${id}-color`}\n          className=\"tag-color cursor-pointer rounded-circle d-flex align-items-center justify-content-center\"\n          style={{backgroundColor: tagColor}}\n          onClick={this.togglePopover}\n        >\n          <i className=\"fas fa-caret-down text-white\"></i>\n        </span>\n        <Popover\n          target={`tag-${id}-color`}\n          isOpen={isPopoverOpen}\n          placement=\"bottom\"\n          toggle={this.togglePopover}\n          className=\"tag-color-popover mw-100\"\n        >\n          <PopoverBody className=\"p-2\">\n            <div className=\"d-flex justify-content-between\">\n              {colorList.map((item, index)=>{\n                return (\n                  <div key={index} className=\"tag-color-option mx-1\">\n                    <label className=\"colorinput\">\n                      <input name=\"color\" type=\"radio\" value={item} className=\"colorinput-input\" defaultChecked={item == tagColor} onClick={this.selectTagColor} />\n                      <span className=\"colorinput-color rounded-circle d-flex align-items-center justify-content-center\" style={{backgroundColor: item}}>\n                        <i className=\"fas fa-check color-selected\"></i>\n                      </span>\n                    </label>\n                  </div>\n                );\n              })\n              }\n            </div>\n          </PopoverBody>\n        </Popover>\n      </div>\n    );\n  }\n}\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport '../../css/repo-tag.css';\n\nexport default class VirtualTagName extends React.Component {\n\n  static propTypes = {\n    updateVirtualTag: PropTypes.func.isRequired,\n    tag: PropTypes.object.isRequired,\n    repoID: PropTypes.string.isRequired\n  };\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      tagName: this.props.tag.name,\n      isEditing: true,\n    };\n    this.input = React.createRef();\n  }\n\n  UNSAFE_componentWillReceiveProps(nextProps) {\n    if (nextProps.tag.name !== this.props.tag.name) {\n      this.setState({\n        tagName: nextProps.tag.name,\n      });\n    }\n  }\n\n  componentDidMount() {\n    setTimeout(() => {\n      this.input.current.focus();\n    }, 1);\n  }\n\n  toggleMode = () => {\n    this.setState({\n      isEditing: !this.state.isEditing\n    });\n  };\n\n  updateTagName = (e) => {\n    const newName = e.target.value;\n    this.props.updateVirtualTag(this.props.tag, { name: newName });\n    this.setState({\n      tagName: newName\n    });\n  };\n\n  onInputKeyDown = (e) => {\n    if (e.key == 'Enter') {\n      this.toggleMode();\n      this.updateTagName(e);\n    }\n    else if (e.key == 'Escape') {\n      e.nativeEvent.stopImmediatePropagation();\n      this.toggleMode();\n    }\n  };\n\n  onInputBlur = (e) => {\n    this.toggleMode();\n    this.updateTagName(e);\n  };\n\n  render() {\n    const { isEditing, tagName } = this.state;\n    return (\n      <div className=\"mx-2 flex-fill d-flex\">\n        {isEditing ?\n          <input\n            type=\"text\"\n            ref={this.input}\n            defaultValue={tagName}\n            onBlur={this.onInputBlur}\n            onKeyDown={this.onInputKeyDown}\n            className=\"flex-fill form-control-sm form-control\"\n          /> :\n          <span\n            onClick={this.toggleMode}\n            className=\"cursor-pointer flex-fill\"\n            style={{width: 100, height: 20}}\n          >{tagName}</span>\n        }\n      </div>\n    );\n  }\n}\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../../utils/constants';\nimport VirtualTagColor from './virtual-tag-color';\nimport VirtualTagName from './virtual-tag-name';\n\nimport '../../css/repo-tag.css';\nimport './list-tag-popover.css';\n\nexport default class VirtualTagListItem extends React.Component {\n\n  static propTypes = {\n    item: PropTypes.object.isRequired,\n    repoID: PropTypes.string.isRequired,\n    deleteVirtualTag: PropTypes.func.isRequired,\n    updateVirtualTag: PropTypes.func.isRequired,\n  };\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isTagHighlighted: false\n    };\n  }\n\n  onMouseOver = () => {\n    this.setState({ isTagHighlighted: true });\n  };\n\n  onMouseOut = () => {\n    this.setState({ isTagHighlighted: false });\n  };\n\n  deleteVirtualTag = () => {\n    this.props.deleteVirtualTag(this.props.item);\n  };\n\n  render() {\n    const { isTagHighlighted } = this.state;\n    const { item, repoID } = this.props;\n    return (\n      <li\n        className={`tag-list-item px-4 d-flex justify-content-between align-items-center ${isTagHighlighted ? 'hl' : ''}`}\n        onMouseOver={this.onMouseOver}\n        onMouseOut={this.onMouseOut}\n      >\n        <VirtualTagColor repoID={repoID} tag={item} updateVirtualTag={this.props.updateVirtualTag} />\n        <VirtualTagName repoID={repoID} tag={item} updateVirtualTag={this.props.updateVirtualTag} />\n        <button\n          className={`tag-delete-icon sf2-icon-delete border-0 px-0 bg-transparent cursor-pointer ${isTagHighlighted ? '' : 'invisible'}`}\n          onClick={this.deleteVirtualTag}\n          aria-label={gettext('Delete')}\n          title={gettext('Delete')}\n        ></button>\n      </li>\n    );\n  }\n}\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { Tooltip } from 'reactstrap';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport RepoTag from '../../models/repo-tag';\nimport toaster from '../toast';\n\nexport default class TagListFooter extends Component {\n\n  static propTypes = {\n    repoID: PropTypes.string.isRequired,\n    toggle: PropTypes.func.isRequired,\n    repotagList: PropTypes.array.isRequired,\n    updateTags: PropTypes.func.isRequired,\n  };\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      showTooltip: false,\n    };\n  }\n\n  toggleTooltip = () => {\n    this.setState({showTooltip: !this.state.showTooltip});\n  };\n\n  onClickImport = () => {\n    this.importOptionsInput.click();\n  };\n\n  importTagsInputChange = () => {\n    if (!this.importOptionsInput.files || !this.importOptionsInput.files.length) {\n      toaster.warning(gettext('Please select a file'));\n      return;\n    }\n    const fileReader = new FileReader();\n    fileReader.onload = this.onImportTags.bind(this);\n    fileReader.onerror = this.onImportTagsError.bind(this);\n    fileReader.readAsText(this.importOptionsInput.files[0]);\n  };\n\n  getValidTags = (tags) => {\n    let validTags = [];\n    let tagNameMap = {};\n    this.props.repotagList.forEach(tag => tagNameMap[tag.name] = true);\n    for (let i = 0; i < tags.length; i++) {\n      if (!tags[i] || typeof tags[i] !== 'object' || !tags[i].name || !tags[i].color) {\n        continue;\n      }\n      if (!tagNameMap[tags[i].name]) {\n        validTags.push(\n          {\n            name: tags[i].name,\n            color: tags[i].color,\n          }\n        );\n        tagNameMap[tags[i].name] = true;\n      }\n    }\n    return validTags;\n  };\n\n  onImportTags = (event) => {\n    let tags = [];\n    try {\n      tags = JSON.parse(event.target.result); // handle JSON file format is error\n    } catch (error) {\n      toaster.danger(gettext('The imported tags are invalid'));\n      return;\n    }\n    if (!Array.isArray(tags) || tags.length === 0) {\n      toaster.danger(gettext('The imported tags are invalid'));\n      return;\n    }\n    let validTags = this.getValidTags(tags);\n    if (validTags.length === 0) {\n      toaster.warning(gettext('The imported tag already exists'));\n      return;\n    }\n    seafileAPI.createRepoTags(this.props.repoID, validTags).then((res) => {\n      toaster.success(gettext('Tags imported'));\n      let repotagList = [];\n      res.data.repo_tags.forEach(item => {\n        let repo_tag = new RepoTag(item);\n        repotagList.push(repo_tag);\n      });\n      this.props.updateTags(repotagList);\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n    this.importOptionsInput.value = null;\n  };\n\n  onImportTagsError = () => {\n    toaster.success(gettext('Failed to import tags. Please reupload.'));\n  };\n\n  getDownloadUrl = () => {\n    const tags = this.props.repotagList.map(item => {\n      return { name: item.name, color: item.color };\n    });\n    return `data:text/json;charset=utf-8,${encodeURIComponent(JSON.stringify(tags))}`;\n  };\n\n  render() {\n    return (\n      <div className=\"tag-list-footer\">\n        <span className=\"fa fa-question-circle mr-2\" style={{color: '#999'}} id=\"import-export-tags-tip\"></span>\n        <Tooltip\n          toggle={this.toggleTooltip}\n          delay={{show: 0, hide: 0}}\n          target='import-export-tags-tip'\n          placement='bottom'\n          isOpen={this.state.showTooltip}\n        >\n          {gettext('Use the import/export function to transfer tags quickly to another library. (The export is in JSON format.)')}\n        </Tooltip>\n        <input\n          type=\"file\"\n          ref={ref => this.importOptionsInput = ref}\n          accept='.json'\n          className=\"d-none\"\n          onChange={this.importTagsInputChange}\n        />\n        <span className=\"item-text\" onClick={this.onClickImport}>{gettext('Import tags')}</span>\n        <span className=\"mx-2\">|</span>\n        <a href={this.getDownloadUrl()} download='tags.json' onClick={this.props.toggle}>\n          <span className=\"item-text\">{gettext('Export tags')}</span>\n        </a>\n      </div>\n    );\n  }\n}\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { v4 as uuidv4 } from 'uuid';\nimport { gettext } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../toast';\nimport RepoTag from '../../models/repo-tag';\nimport TagListItem from './tag-list-item';\nimport VirtualTagListItem from './virtual-tag-list-item';\nimport TagListFooter from './tag-list-footer';\nimport { TAG_COLORS } from '../../constants/';\n\nimport '../../css/repo-tag.css';\nimport './list-tag-popover.css';\n\nexport default class ListTagPopover extends React.Component {\n\n  static propTypes = {\n    repoID: PropTypes.string.isRequired,\n    onListTagCancel: PropTypes.func.isRequired,\n  };\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      repotagList: []\n    };\n  }\n\n  componentDidMount() {\n    this.loadTags();\n  }\n\n  loadTags = () => {\n    seafileAPI.listRepoTags(this.props.repoID).then(res => {\n      let repotagList = [];\n      res.data.repo_tags.forEach(item => {\n        let repo_tag = new RepoTag(item);\n        repotagList.push(repo_tag);\n      });\n      this.setState({ repotagList });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  updateTags = (newRepotagList) => {\n    this.setState({\n      repotagList: [...this.state.repotagList, ...newRepotagList],\n    });\n  };\n\n  onDeleteTag = (tag) => {\n    const { repoID } = this.props;\n    const { id: targetTagID } = tag;\n    seafileAPI.deleteRepoTag(repoID, targetTagID).then((res) => {\n      this.setState({\n        repotagList: this.state.repotagList.filter(tag => tag.id != targetTagID)\n      });\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  createVirtualTag = (e) => {\n    e.preventDefault();\n    let { repotagList } = this.state;\n    let virtual_repo_tag = {\n      name: '',\n      color: TAG_COLORS[Math.floor(Math.random() * TAG_COLORS.length)], // generate random tag color for virtual tag\n      id: `virtual-tag-${uuidv4()}`,\n      is_virtual: true,\n    };\n    repotagList.push(virtual_repo_tag);\n    this.setState({ repotagList });\n  };\n\n  deleteVirtualTag = (virtualTag) => {\n    let { repotagList } = this.state;\n    let index = repotagList.findIndex(item => item.id === virtualTag.id);\n    repotagList.splice(index, 1);\n    this.setState({ repotagList });\n  };\n\n  updateVirtualTag = (virtualTag, data) => {\n    const repoID = this.props.repoID;\n    const { repotagList } = this.state;\n    const index = repotagList.findIndex(item => item.id === virtualTag.id);\n    if (index < 0) return null;\n\n    // If virtual tag color is updated and virtual tag name is empty, it will be saved to local state, don't save it to the server\n    if (data.color) {\n      virtualTag.color = data.color;\n      repotagList[index] = virtualTag;\n      this.setState({ repotagList });\n      return;\n    }\n\n    // If virtual tag name is updated and name is not empty, virtual tag color use default, save it to the server\n    if (data.name && data.name.length > 0) {\n      let color = virtualTag.color;\n      let name = data.name;\n      seafileAPI.createRepoTag(repoID, name, color).then((res) => {\n        // After saving sag to the server, replace the virtual tag with newly created tag\n        repotagList[index] = new RepoTag(res.data.repo_tag);\n        this.setState({ repotagList });\n      }).catch((error) => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    }\n  };\n\n  render() {\n    return (\n      <Fragment>\n        <ul className=\"tag-list tag-list-container my-2\">\n          {this.state.repotagList.map((repoTag, index) => {\n            if (repoTag.is_virtual) {\n              return (\n                <VirtualTagListItem\n                  key={index}\n                  item={repoTag}\n                  repoID={this.props.repoID}\n                  deleteVirtualTag={this.deleteVirtualTag}\n                  updateVirtualTag={this.updateVirtualTag}\n                />\n              );\n            } else {\n              return (\n                <TagListItem\n                  key={index}\n                  item={repoTag}\n                  repoID={this.props.repoID}\n                  onDeleteTag={this.onDeleteTag}\n                />\n              );\n            }\n          })}\n        </ul>\n        <div className=\"add-tag-link px-4 py-2 d-flex align-items-center\" onClick={this.createVirtualTag}>\n          <span className=\"sf2-icon-plus mr-2\"></span>{gettext('Create a new tag')}\n        </div>\n        <TagListFooter\n          toggle={this.props.onListTagCancel}\n          repotagList={this.state.repotagList}\n          updateTags={this.updateTags}\n          repoID={this.props.repoID}\n        />\n      </Fragment>\n    );\n  }\n}\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { v4 as uuidv4 } from 'uuid';\nimport { gettext, siteRoot } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport SeahubPopover from '../common/seahub-popover';\nimport ListTagPopover from '../popover/list-tag-popover';\n\nconst propTypes = {\n  repoID: PropTypes.string.isRequired,\n  userPerm: PropTypes.string,\n  currentPath: PropTypes.string.isRequired,\n  updateUsedRepoTags: PropTypes.func.isRequired,\n  onDeleteRepoTag: PropTypes.func.isRequired,\n};\n\nclass DirTool extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isListRepoTagShow: false,\n    };\n    this.tagsIconID = `tags-icon-${uuidv4()}`;\n  }\n\n  onShowListRepoTag = (e) => {\n    this.setState({ isListRepoTagShow: true });\n  };\n\n  hidePopover = (e) => {\n    if (e) {\n      let dom = e.target;\n      while (dom) {\n        if (typeof dom.className === 'string' && dom.className.includes('tag-color-popover')) return;\n        dom = dom.parentNode;\n      }\n    }\n    this.setState({ isListRepoTagShow: false });\n  };\n\n  toggleCancel = () => {\n    this.setState({ isListRepoTagShow: false });\n  };\n\n  isMarkdownFile(filePath) {\n    return Utils.getFileName(filePath).includes('.md');\n  }\n\n  render() {\n    let { repoID, userPerm, currentPath } = this.props;\n    if (userPerm !== 'rw') {\n      return '';\n    }\n    if (this.isMarkdownFile(currentPath)) {\n      return '';\n    }\n    let toolbarDom = null;\n    if (Utils.getFileName(currentPath)) { // name not '' is not root path\n      let trashUrl = siteRoot + 'repo/' + repoID + '/trash/?path=' + encodeURIComponent(currentPath);\n      toolbarDom = (\n        <ul className=\"path-toolbar\">\n          <li className=\"toolbar-item\">\n            <a className=\"op-link sf2-icon-tag\" href=\"#\" id={this.tagsIconID} role=\"button\" onClick={this.onShowListRepoTag} title={gettext('Tags')} aria-label={gettext('Tags')}></a>\n          </li>\n          <li className=\"toolbar-item\">\n            <a className=\"op-link sf2-icon-recycle\" href={trashUrl} title={gettext('Trash')} aria-label={gettext('Trash')}></a>\n          </li>\n        </ul>\n      );\n    } else { // currentPath === '/' is root path\n      let trashUrl = siteRoot + 'repo/' + repoID + '/trash/';\n      let historyUrl = siteRoot + 'repo/history/' + repoID + '/';\n      toolbarDom = (\n        <ul className=\"path-toolbar\">\n          <li className=\"toolbar-item\">\n            <a className=\"op-link sf2-icon-tag\" href=\"#\" id={this.tagsIconID} role=\"button\" onClick={this.onShowListRepoTag} title={gettext('Tags')} aria-label={gettext('Tags')}></a>\n          </li>\n          <li className=\"toolbar-item\">\n            <a className=\"op-link sf2-icon-recycle\" href={trashUrl} title={gettext('Trash')} aria-label={gettext('Trash')}></a>\n          </li>\n          <li className=\"toolbar-item\">\n            <a className=\"op-link sf2-icon-history\" href={historyUrl} title={gettext('History')} aria-label={gettext('History')}></a>\n          </li>\n        </ul>\n      );\n    }\n    return (\n      <>\n        {toolbarDom}\n        {this.state.isListRepoTagShow &&\n          <SeahubPopover\n            popoverClassName=\"list-tag-popover\"\n            target={this.tagsIconID}\n            hideSeahubPopover={this.hidePopover}\n            hideSeahubPopoverWithEsc={this.hidePopover}\n            canHideSeahubPopover={true}\n            boundariesElement={document.body}\n            placement={'bottom-end'}\n          >\n            <ListTagPopover\n              repoID={repoID}\n              onListTagCancel={this.toggleCancel}\n            />\n          </SeahubPopover>\n        }\n      </>\n    );\n  }\n}\n\nDirTool.propTypes = propTypes;\n\nexport default DirTool;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Utils } from '../../utils/utils';\nimport SortOptionsDialog from '../../components/dialog/sort-options';\nimport DirPath from './dir-path';\nimport DirTool from './dir-tool';\n\nconst propTypes = {\n  repoID: PropTypes.string.isRequired,\n  repoName: PropTypes.string.isRequired,\n  userPerm: PropTypes.string,\n  currentPath: PropTypes.string.isRequired,\n  onPathClick: PropTypes.func.isRequired,\n  onTabNavClick: PropTypes.func,\n  pathPrefix: PropTypes.array,\n  isViewFile: PropTypes.bool,\n  updateUsedRepoTags: PropTypes.func.isRequired,\n  fileTags: PropTypes.array.isRequired,\n  onDeleteRepoTag: PropTypes.func.isRequired,\n  direntList: PropTypes.array,\n  sortBy: PropTypes.string,\n  sortOrder: PropTypes.string,\n  sortItems: PropTypes.func,\n};\n\nclass CurDirPath extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isSortOptionsDialogOpen: false\n    };\n  }\n\n  toggleSortOptionsDialog = () => {\n    this.setState({\n      isSortOptionsDialogOpen: !this.state.isSortOptionsDialogOpen\n    });\n  };\n\n  render() {\n    const isDesktop = Utils.isDesktop();\n    return (\n      <Fragment>\n        <DirPath\n          repoName={this.props.repoName}\n          pathPrefix={this.props.pathPrefix}\n          currentPath={this.props.currentPath}\n          onPathClick={this.props.onPathClick}\n          onTabNavClick={this.props.onTabNavClick}\n          repoID={this.props.repoID}\n          isViewFile={this.props.isViewFile}\n          fileTags={this.props.fileTags}\n        />\n        {isDesktop &&\n        <DirTool\n          repoID={this.props.repoID}\n          repoName={this.props.repoName}\n          userPerm={this.props.userPerm}\n          currentPath={this.props.currentPath}\n          updateUsedRepoTags={this.props.updateUsedRepoTags}\n          onDeleteRepoTag={this.props.onDeleteRepoTag}\n        />}\n        {!isDesktop && this.props.direntList.length > 0 &&\n        <span className=\"sf3-font sf3-font-sort action-icon\" onClick={this.toggleSortOptionsDialog}></span>}\n        {this.state.isSortOptionsDialogOpen &&\n        <SortOptionsDialog\n          toggleDialog={this.toggleSortOptionsDialog}\n          sortBy={this.props.sortBy}\n          sortOrder={this.props.sortOrder}\n          sortItems={this.props.sortItems}\n        />\n        }\n      </Fragment>\n    );\n  }\n}\n\nCurDirPath.propTypes = propTypes;\n\nexport default CurDirPath;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Col } from 'reactstrap';\n\nfunction ColumnName(props) {\n  const { column } = props;\n  const { name } = column;\n\n  return (\n    <Col md={3} className=\"d-flex column-name\">\n      <div className=\"w-100 text-truncate\">\n        {name || ''}\n      </div>\n    </Col>\n  );\n}\n\nColumnName.propTypes = {\n  column: PropTypes.object.isRequired,\n};\n\nexport default ColumnName;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { KeyCodes } from '../../../../constants';\n\nclass SimpleText extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      value: props.row[props.column.key] || '',\n    };\n    this.inputRef = React.createRef();\n  }\n\n  UNSAFE_componentWillReceiveProps(nextProps) {\n    const nextValue = nextProps.row[nextProps.column.key];\n    if (nextValue !== this.state.value) {\n      this.setState({ value: nextValue });\n    }\n  }\n\n  blurInput = () => {\n    setTimeout(() => {\n      this.inputRef.current && this.inputRef.current.blur();\n    }, 1);\n  };\n\n  onBlur = () => {\n    let { column, onCommit } = this.props;\n    const updated = {};\n    updated[column.key] = this.state.value.trim();\n    onCommit(updated, column);\n  };\n\n  onChange = (e) => {\n    let value = e.target.value;\n    if (value === this.state.value) return;\n    this.setState({value});\n  };\n\n  onCut = (e) => {\n    e.stopPropagation();\n  };\n\n  onPaste = (e) => {\n    e.stopPropagation();\n  };\n\n  onKeyDown = (e) => {\n    if (e.keyCode === KeyCodes.Esc) {\n      e.stopPropagation();\n      this.blurInput();\n      return;\n    }\n    let { selectionStart, selectionEnd, value } = e.currentTarget;\n    if (\n      (e.keyCode === KeyCodes.ChineseInputMethod) ||\n      (e.keyCode === KeyCodes.LeftArrow && selectionStart === 0) ||\n      (e.keyCode === KeyCodes.RightArrow && selectionEnd === value.length)\n    ) {\n      e.stopPropagation();\n    }\n  };\n\n  render() {\n    const { column } = this.props;\n    const { value } = this.state;\n\n    return (\n      <input\n        type=\"text\"\n        onBlur={this.onBlur}\n        onCut={this.onCut}\n        onPaste={this.onPaste}\n        onChange={this.onChange}\n        className=\"form-control\"\n        value={value || ''}\n        onKeyDown={this.onKeyDown}\n        disabled={!column.editable}\n        ref={this.inputRef}\n      />\n    );\n  }\n}\n\nSimpleText.propTypes = {\n  column: PropTypes.object,\n  row: PropTypes.object,\n  onCommit: PropTypes.func.isRequired,\n};\n\nexport default SimpleText;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { FORMULA_RESULT_TYPE } from '../../../../constants';\nimport { getDateDisplayString } from '../../../../utils/extra-attributes';\n\nfunction FormulaFormatter(props) {\n  const { column, row } = props;\n  const value = row[column.key];\n\n  const { data } = column;\n  const { result_type, format } = data || {};\n  if (result_type === FORMULA_RESULT_TYPE.DATE) {\n    return (\n      <div className=\"form-control disabled\">{getDateDisplayString(value, format)}</div>\n    );\n  }\n  if (result_type === FORMULA_RESULT_TYPE.STRING) {\n    return value;\n  }\n  if (typeof value === 'object') {\n    return null;\n  }\n  return <></>;\n}\n\nFormulaFormatter.propTypes = {\n  column: PropTypes.object,\n  row: PropTypes.object,\n};\n\nexport default FormulaFormatter;\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport classnames from 'classnames';\n\nclass SearchInput extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      searchValue: props.value,\n    };\n    this.isInputtingChinese = false;\n    this.timer = null;\n    this.inputRef = null;\n  }\n\n  componentDidMount() {\n    if (this.props.autoFocus && this.inputRef && this.inputRef !== document.activeElement) {\n      setTimeout(() => {\n        this.inputRef.focus();\n      }, 0);\n    }\n  }\n\n  componentWillReceiveProps(nextProps) {\n    if (nextProps.value !== this.props.value) {\n      this.setState({searchValue: nextProps.value});\n    }\n  }\n\n  componentWillUnmount() {\n    this.timer && clearTimeout(this.timer);\n    this.timer = null;\n    this.inputRef = null;\n  }\n\n  onCompositionStart = () => {\n    this.isInputtingChinese = true;\n  };\n\n  onChange = (e) => {\n    this.timer && clearTimeout(this.timer);\n    const { onChange, wait } = this.props;\n    let text = e.target.value;\n    this.setState({searchValue: text || ''}, () => {\n      if (this.isInputtingChinese) return;\n      this.timer = setTimeout(() => {\n        onChange && onChange(this.state.searchValue.trim());\n      }, wait);\n    });\n  };\n\n  onCompositionEnd = (e) => {\n    this.isInputtingChinese = false;\n    this.onChange(e);\n  };\n\n  setFocus = (isSelectAllText) => {\n    if (this.inputRef === document.activeElement) return;\n    this.inputRef.focus();\n    if (isSelectAllText) {\n      const txtLength = this.state.searchValue.length;\n      this.inputRef.setSelectionRange(0, txtLength);\n    }\n  };\n\n  render() {\n    const { placeholder, autoFocus, className, onKeyDown, disabled, style } = this.props;\n    const { searchValue } = this.state;\n\n    return (\n      <input\n        type=\"text\"\n        value={searchValue}\n        className={classnames('form-control', className)}\n        onChange={this.onChange}\n        autoFocus={autoFocus}\n        placeholder={placeholder}\n        onCompositionStart={this.onCompositionStart}\n        onCompositionEnd={this.onCompositionEnd}\n        onKeyDown={onKeyDown}\n        disabled={disabled}\n        style={style}\n        ref={ref => this.inputRef = ref}\n      />\n    );\n  }\n}\n\nSearchInput.propTypes = {\n  placeholder: PropTypes.string,\n  autoFocus: PropTypes.bool,\n  className: PropTypes.string,\n  onChange: PropTypes.func.isRequired,\n  onKeyDown: PropTypes.func,\n  wait: PropTypes.number,\n  disabled: PropTypes.bool,\n  style: PropTypes.object,\n  value: PropTypes.string,\n};\n\nSearchInput.defaultProps = {\n  wait: 100,\n  disabled: false,\n  value: '',\n};\n\nexport default SearchInput;\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { UncontrolledPopover } from 'reactstrap';\nimport { gettext } from '../../../../../utils/constants';\nimport SearchInput from '../search-input';\nimport { getSelectColumnOptions } from '../../../../../utils/extra-attributes';\n\nclass SingleSelectEditor extends Component {\n\n  constructor(props) {\n    super(props);\n    const options = this.getSelectColumnOptions(props);\n    this.state = {\n      value: props.row[props.column.key],\n      searchVal: '',\n      highlightIndex: -1,\n      maxItemNum: 0,\n      itemHeight: 0,\n      filteredOptions: options,\n    };\n    this.options = options;\n    this.timer = null;\n    this.editorKey = `single-select-editor-${props.column.key}`;\n  }\n\n  UNSAFE_componentWillReceiveProps(nextProps) {\n    const currentCascadeColumnValue = this.getCascadeColumnValue(this.props);\n    const nextCascadeColumnValue = this.getCascadeColumnValue(nextProps);\n    if (currentCascadeColumnValue !== nextCascadeColumnValue) {\n      this.options = this.getSelectColumnOptions(nextProps);\n      this.setState({ filteredOptions: this.options });\n    }\n  }\n\n  getCascadeColumnValue = (props) => {\n    const { column, row, columns } = props;\n    const { data } = column;\n    const { cascade_column_key } = data || {};\n    if (!cascade_column_key) return '';\n    const cascadeColumn = columns.find(item => item.key === cascade_column_key);\n    if (!cascadeColumn) return '';\n    return row[cascade_column_key];\n  };\n\n  getSelectColumnOptions = (props) => {\n    const { column, row, columns } = props;\n    let options = getSelectColumnOptions(column);\n    const { data } = column;\n    const { cascade_column_key, cascade_settings } = data || {};\n    if (cascade_column_key) {\n      const cascadeColumn = columns.find(item => item.key === cascade_column_key);\n      if (cascadeColumn) {\n        const cascadeColumnValue = row[cascade_column_key];\n        if (!cascadeColumnValue) return [];\n        const cascadeSetting = cascade_settings[cascadeColumnValue];\n        if (!cascadeSetting || !Array.isArray(cascadeSetting) || cascadeSetting.length === 0) return [];\n        return options.filter(option => cascadeSetting.includes(option.id));\n      }\n    }\n    return options;\n  };\n\n  toggle = () => {\n    this.ref.toggle();\n    this.props.onUpdateState();\n  };\n\n  onChangeSearch = (searchVal) => {\n    const { searchVal: oldSearchVal } = this.state;\n    if (oldSearchVal === searchVal) return;\n    const val = searchVal.toLowerCase();\n    const filteredOptions = val ?\n      this.options.filter((item) => item.name && item.name.toLowerCase().indexOf(val) > -1) : this.options;\n    this.setState({ searchVal, filteredOptions });\n  };\n\n  onSelectOption = (optionID) => {\n    const { column } = this.props;\n    this.setState({ value: optionID }, () => {\n      this.props.onCommit({ [column.key]: optionID }, column);\n      this.toggle();\n    });\n  };\n\n  render() {\n    const { value, filteredOptions } = this.state;\n    const { column } = this.props;\n\n    return (\n      <UncontrolledPopover\n        target={this.editorKey}\n        className=\"single-select-editor-popover\"\n        trigger=\"legacy\"\n        placement=\"bottom-start\"\n        hideArrow={true}\n        toggle={this.toggle}\n        ref={ref => this.ref = ref}\n      >\n        <div className=\"single-select-editor-container\">\n          <div className=\"search-single-selects\">\n            <SearchInput\n              placeholder={gettext('Find an option')}\n              onKeyDown={this.onKeyDown}\n              onChange={this.onChangeSearch}\n              autoFocus={true}\n            />\n          </div>\n          <div className=\"single-select-editor-content\">\n            {filteredOptions.map(option => {\n              const isSelected = value === option.id;\n              const style = {\n                backgroundColor: option.color,\n                color: option.textColor || null,\n                maxWidth: Math.max(200 - 62,  column.width ? column.width  -62 : 0)\n              };\n              return (\n                <div className=\"single-select-option-container\" key={option.id} onClick={this.onSelectOption.bind(this, isSelected ? null : option.id)}>\n                  <div className=\"single-select-option\" style={style}>{option.name}</div>\n                  <div className=\"single-select-option-selected\">\n                    {isSelected && (<i ></i>)}\n                  </div>\n                </div>\n              );\n            })}\n          </div>\n        </div>\n      </UncontrolledPopover>\n    );\n  }\n}\n\nSingleSelectEditor.propTypes = {\n  value: PropTypes.string,\n  row: PropTypes.object,\n  column: PropTypes.object,\n  columns: PropTypes.array,\n  onUpdateState: PropTypes.func,\n  onCommit: PropTypes.func,\n};\n\nexport default SingleSelectEditor;\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport classnames from 'classnames';\nimport { DELETED_OPTION_BACKGROUND_COLOR, DELETED_OPTION_TIPS } from '../../../../../constants';\nimport { gettext } from '../../../../../utils/constants';\nimport SingleSelectEditor from './single-select-editor';\nimport { getSelectColumnOptions } from '../../../../../utils/extra-attributes';\n\nimport './index.css';\n\nclass SingleSelect extends Component {\n\n  constructor(props) {\n    super(props);\n    const { column } = props;\n    this.options = getSelectColumnOptions(column);\n    this.state = {\n      isShowSingleSelect: false,\n    };\n    this.editorKey = `single-select-editor-${column.key}`;\n  }\n\n  updateState = () => {\n    this.setState({ isShowSingleSelect: !this.state.isShowSingleSelect });\n  };\n\n  onCommit = (value, column) => {\n    this.props.onCommit(value, column);\n  };\n\n  render() {\n    const { isShowSingleSelect } = this.state;\n    const { column, row } = this.props;\n    const currentOptionID = row[column.key];\n    const option = this.options.find(option => option.id === currentOptionID);\n    const optionStyle = option ?\n      { backgroundColor: option.color, color: option.textColor || null } :\n      { backgroundColor: DELETED_OPTION_BACKGROUND_COLOR };\n    const optionName = option ? option.name : gettext(DELETED_OPTION_TIPS);\n\n    return (\n      <>\n        <div\n          id={this.editorKey}\n          className={classnames('selected-single-select-container', { 'disable': !column.editable, 'focus': isShowSingleSelect })}\n        >\n          <div className=\"single-select-inner w-100 h-100 d-flex align-items-center justify-content-between\">\n            <div>\n              {currentOptionID && (\n                <div\n                  className=\"single-select-option\"\n                  style={optionStyle}\n                  title={optionName}\n                >{optionName}</div>\n              )}\n            </div>\n            {column.editable && (\n              <i className=\"fas fa-caret-down\"></i>\n            )}\n          </div>\n        </div>\n        {column.editable && (\n          <SingleSelectEditor\n            column={column}\n            row={this.props.row}\n            columns={this.props.columns}\n            onCommit={this.onCommit}\n            onUpdateState={this.updateState}\n          />\n        )}\n      </>\n    );\n  }\n}\n\nSingleSelect.propTypes = {\n  column: PropTypes.object,\n  row: PropTypes.object,\n  columns: PropTypes.array,\n  onCommit: PropTypes.func,\n};\n\nexport default SingleSelect;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { getNumberDisplayString, replaceNumberNotAllowInput, formatStringToNumber, isMac } from '../../../../utils/extra-attributes';\nimport { KeyCodes, DEFAULT_NUMBER_FORMAT } from '../../../../constants';\n\nclass NumberEditor extends React.Component {\n\n  constructor(props) {\n    super(props);\n    const { row, column } = props;\n    const value = row[column.key];\n    this.state = {\n      value: getNumberDisplayString(value, column.data),\n    };\n  }\n\n  onChange = (event) => {\n    const { data } = this.props.column; // data maybe 'null'\n    const format = (data && data.format) ? data.format : DEFAULT_NUMBER_FORMAT;\n    let currency_symbol = null;\n    if (data && data.format === 'custom_currency') {\n      currency_symbol = data['currency_symbol'];\n    }\n    const initValue = event.target.value.trim();\n\n    //Prevent the repetition of periods bug in the Chinese input method of the Windows system\n    if (!isMac() && initValue.indexOf('.') > -1) return;\n    let value = replaceNumberNotAllowInput(initValue, format, currency_symbol);\n    if (value === this.state.value) return;\n    this.setState({ value });\n  };\n\n  onKeyDown = (event) => {\n    let { selectionStart, selectionEnd, value } = event.currentTarget;\n    if (event.keyCode === KeyCodes.Enter || event.keyCode === KeyCodes.Esc) {\n      event.preventDefault();\n      this.input.blur();\n    } else if ((event.keyCode === KeyCodes.LeftArrow && selectionStart === 0) ||\n      (event.keyCode === KeyCodes.RightArrow && selectionEnd === value.length)\n    ) {\n      event.stopPropagation();\n    }\n  };\n\n  onBlur = () => {\n    const { value } = this.state;\n    const { column } = this.props;\n    this.props.onCommit({ [column.key]: formatStringToNumber(value, column.data) }, column);\n  };\n\n  setInputRef = (input) => {\n    this.input = input;\n    return this.input;\n  };\n\n  onPaste = (e) => {\n    e.stopPropagation();\n  };\n\n  onCut = (e) => {\n    e.stopPropagation();\n  };\n\n  render() {\n    const { column } = this.props;\n\n    return (\n      <input\n        ref={this.setInputRef}\n        type=\"text\"\n        className=\"form-control\"\n        value={this.state.value}\n        onBlur={this.onBlur}\n        onPaste={this.onPaste}\n        onCut={this.onCut}\n        onKeyDown={this.onKeyDown}\n        onChange={this.onChange}\n        disabled={!column.editable}\n      />\n    );\n  }\n}\n\nNumberEditor.propTypes = {\n  column: PropTypes.object,\n  row: PropTypes.object,\n  onCommit: PropTypes.func,\n};\n\nexport default NumberEditor;\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { getDateDisplayString } from '../../../../utils/extra-attributes';\n\n\nclass DateEditor extends Component {\n  render() {\n    const { column, row } = this.props;\n    const { data, key } = column;\n    const value = getDateDisplayString(row[key], data ? data.format : '');\n\n    return (\n      <input\n        type=\"text\"\n        className=\"form-control\"\n        value={value}\n        disabled={true}\n      />\n    );\n  }\n}\n\nDateEditor.propTypes = {\n  column: PropTypes.object,\n  row: PropTypes.object,\n};\n\nexport default DateEditor;\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { getDateDisplayString } from '../../../../utils/extra-attributes';\n\nclass CtimeFormatter extends Component {\n  render() {\n    const { column, row } = this.props;\n    const { key } = column;\n    const value = getDateDisplayString(row[key], 'YYYY-MM-DD HH:mm:ss') || '';\n\n    return (\n      <div className=\"form-control\" style={{ width: 320 }}>{value}</div>\n    );\n  }\n}\n\nCtimeFormatter.propTypes = {\n  column: PropTypes.object,\n  row: PropTypes.object,\n};\n\nexport default CtimeFormatter;\n","import SimpleText from './simple-text';\nimport FormulaFormatter from './formula-formatter';\nimport SingleSelect from './single-select';\nimport NumberEditor from './number-editor';\nimport DateEditor from './date-editor';\nimport CtimeFormatter from './ctime-formatter';\nimport { EXTRA_ATTRIBUTES_COLUMN_TYPE } from '../../../../constants';\n\n\nconst CONFIG = {\n  [EXTRA_ATTRIBUTES_COLUMN_TYPE.TEXT]: SimpleText,\n  [EXTRA_ATTRIBUTES_COLUMN_TYPE.FORMULA]: FormulaFormatter,\n  [EXTRA_ATTRIBUTES_COLUMN_TYPE.SINGLE_SELECT]: SingleSelect,\n  [EXTRA_ATTRIBUTES_COLUMN_TYPE.NUMBER]: NumberEditor,\n  [EXTRA_ATTRIBUTES_COLUMN_TYPE.DATE]: DateEditor,\n  [EXTRA_ATTRIBUTES_COLUMN_TYPE.CTIME]: CtimeFormatter,\n  [EXTRA_ATTRIBUTES_COLUMN_TYPE.MTIME]: CtimeFormatter,\n};\n\nexport default CONFIG;\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { Col } from 'reactstrap';\nimport ColumnName from './column-name';\nimport CONFIG from '../editor';\n\nimport './index.css';\n\nclass Column extends Component {\n  render() {\n    const { column, row, columns } = this.props;\n    const Editor = CONFIG[column.type] || CONFIG['text'];\n\n    return (\n      <div className=\"pb-4 row column-item\">\n        <ColumnName column={column} />\n        <Col md={9} className='d-flex align-items-center extra-attribute-item-info'>\n          <Editor\n            column={column}\n            row={row}\n            columns={columns}\n            onCommit={this.props.onCommit}\n          />\n        </Col>\n      </div>\n    );\n  }\n}\n\nColumn.propTypes = {\n  column: PropTypes.object,\n  row: PropTypes.object,\n  columns: PropTypes.array,\n  onCommit: PropTypes.func,\n};\n\nexport default Column;\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { Modal, ModalHeader, ModalBody } from 'reactstrap';\nimport isHotkey from 'is-hotkey';\nimport { zIndexes, DIALOG_MAX_HEIGHT, EXTRA_ATTRIBUTES_COLUMN_TYPE } from '../../../constants';\nimport { gettext } from '../../../utils/constants';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { Utils } from '../../../utils/utils';\nimport { getSelectColumnOptions, getValidColumns } from '../../../utils/extra-attributes';\nimport Column from './column';\nimport Loading from '../../loading';\nimport toaster from '../../toast';\n\nimport './index.css';\n\nclass ExtraAttributesDialog extends Component {\n\n  constructor(props) {\n    super(props);\n    const { direntDetail, direntType } = props;\n    this.state = {\n      animationEnd: false,\n      isLoading: true,\n      update: {},\n      row: {},\n      columns: [],\n      errorMsg: '',\n    };\n    if (direntType === 'dir') {\n      this.isEmptyFile = false;\n    } else {\n      const direntDetailId = direntDetail?.id || '';\n      this.isEmptyFile = direntDetailId === '0'.repeat(direntDetailId.length);\n    }\n    this.isExist = false;\n    this.modalRef = React.createRef();\n  }\n\n  componentDidMount() {\n    this.startAnimation(this.getData);\n    window.addEventListener('keydown', this.onHotKey);\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener('keydown', this.onHotKey);\n  }\n\n  startAnimation = (callback) => {\n    if (this.state.animationEnd === true) {\n      callback && callback();\n    }\n\n    // use setTimeout to make sure real dom rendered\n    setTimeout(() => {\n      let dom = this.modalRef.current.firstChild;\n      const { width, maxWidth, marginLeft, height } = this.getDialogStyle();\n      dom.style.width = `${width}px`;\n      dom.style.maxWidth = `${maxWidth}px`;\n      dom.style.marginLeft = `${marginLeft}px`;\n      dom.style.height = `${height}px`;\n      dom.style.marginRight = 'unset';\n      dom.style.marginTop = '28px';\n\n      // after animation, change style and run callback\n      setTimeout(() => {\n        this.setState({ animationEnd: true }, () => {\n          dom.style.transition = 'none';\n          callback && callback();\n        });\n      }, 280);\n    }, 1);\n  };\n\n  getFormatUpdateData = (update = {}) => {\n    const { columns } = this.state;\n    const updateData = {};\n    for (let key in update) {\n      const column = columns.find(column => column.key === key);\n      if (column && column.editable) {\n        const { type, name } = column;\n        const value = update[key];\n        if (type === EXTRA_ATTRIBUTES_COLUMN_TYPE.SINGLE_SELECT) {\n          const options = getSelectColumnOptions(column);\n          const option = options.find(item => item.id === value);\n          updateData[name] = option ? option.name : '';\n        } else {\n          updateData[column.name] = update[key];\n        }\n      }\n    }\n    return updateData;\n  };\n\n  getData = () => {\n    const { repoID, filePath } = this.props;\n    seafileAPI.getFileExtendedProperties(repoID, filePath).then(res => {\n      const { row, metadata, editable_columns } = res.data;\n      this.isExist = Boolean(row._id);\n      this.setState({ row: row, columns: getValidColumns(metadata, editable_columns, this.isEmptyFile), isLoading: false, errorMsg: '' });\n    }).catch(error => {\n      const errorMsg =Utils.getErrorMsg(error);\n      this.setState({ isLoading: false, errorMsg });\n    });\n  };\n\n  createData = (data) => {\n    const { repoID, filePath } = this.props;\n    seafileAPI.newFileExtendedProperties(repoID, filePath, data).then(res => {\n      this.isExist = true;\n      const { row } = res.data;\n      this.setState({ row: row, isLoading: false, errorMsg: '' });\n    }).catch(error => {\n      const errorMsg =Utils.getErrorMsg(error);\n      toaster.danger(gettext(errorMsg));\n    });\n  };\n\n  updateData = (update, column) => {\n    const newRow = { ...this.state.row, ...update };\n    this.setState({ row: newRow }, () => {\n      const data = this.getFormatUpdateData(update);\n      const { repoID, filePath } = this.props;\n      if (this.isExist) {\n        seafileAPI.updateFileExtendedProperties(repoID, filePath, data).then(res => {\n          this.setState({ update: {}, row: res.data.row });\n        }).catch(error => {\n          const errorMsg = Utils.getErrorMsg(error);\n          toaster.danger(gettext(errorMsg));\n        });\n      } else {\n        this.createData(data);\n      }\n    });\n  };\n\n  onHotKey = (event) => {\n    if (isHotkey('esc', event)) {\n      this.onToggle();\n      return;\n    }\n  };\n\n  onToggle = () => {\n    this.props.onToggle();\n  };\n\n  getDialogStyle = () => {\n    const width = 800;\n    return {\n      width,\n      maxWidth: width,\n      marginLeft: (window.innerWidth - width) / 2,\n      height: DIALOG_MAX_HEIGHT,\n    };\n  };\n\n  getInitStyle = () => {\n    const transition = 'all .3s';\n    const defaultMargin = 80; // sequence cell width\n    const defaultHeight = 100;\n    const marginTop = '30%';\n    const width = window.innerWidth;\n    return {\n      width: `${width - defaultMargin}px`,\n      maxWidth: `${width - defaultMargin}px`,\n      marginLeft: `${defaultMargin}px`,\n      height: `${defaultHeight}px`,\n      marginRight: `${defaultMargin}px`,\n      marginTop,\n      transition,\n    };\n  };\n\n  renderColumns = () => {\n    const { isLoading, errorMsg, columns, row, update } = this.state;\n    if (isLoading) {\n      return (\n        <div className=\"w-100 h-100 d-flex align-items-center justify-content-center\">\n          <Loading />\n        </div>\n      );\n    }\n\n    if (errorMsg) {\n      return (\n        <div className=\"w-100 h-100 d-flex align-items-center justify-content-center error-message\">\n          {gettext(errorMsg)}\n        </div>\n      );\n    }\n\n    const newRow = { ...row, ...update };\n\n    return (\n      <>\n        {columns.map(column => {\n          return (\n            <Column\n              key={column.key}\n              column={column}\n              row={newRow}\n              columns={columns}\n              onCommit={this.updateData}\n            />\n          );\n        })}\n      </>\n    );\n\n  };\n\n  renderContent = () => {\n    if (!this.state.animationEnd) return null;\n\n    return (\n      <>\n        <ModalHeader toggle={this.onToggle}>{gettext('Edit extra properties')}</ModalHeader>\n        <ModalBody>\n          {this.renderColumns()}\n        </ModalBody>\n      </>\n    );\n  };\n\n  render() {\n    const { animationEnd } = this.state;\n\n    return (\n      <Modal\n        isOpen={true}\n        className=\"extra-attributes-dialog\"\n        style={animationEnd ? this.getDialogStyle() : this.getInitStyle()}\n        zIndex={zIndexes.EXTRA_ATTRIBUTES_DIALOG_MODAL}\n        contentClassName=\"extra-attributes-content-container\"\n        modalClassName=\"extra-attributes-modal\"\n        wrapClassName=\"extra-attributes\"\n        fade={false}\n        innerRef={this.modalRef}\n        toggle={this.onToggle}\n      >\n        {this.renderContent()}\n      </Modal>\n    );\n  }\n}\n\nExtraAttributesDialog.propTypes = {\n  repoID: PropTypes.string,\n  filePath: PropTypes.string,\n  direntType: PropTypes.string,\n  direntDetail: PropTypes.object,\n  onToggle: PropTypes.func,\n};\n\nexport default ExtraAttributesDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Modal, ModalBody, ModalFooter, ModalHeader } from 'reactstrap';\nimport { gettext } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport toaster from '../toast';\nimport { Utils } from '../../utils/utils';\nimport Loading from '../loading';\n\nimport '../../css/apply-folder-properties.css';\n\nconst propTypes = {\n  toggle: PropTypes.func,\n  repoID: PropTypes.string,\n  path: PropTypes.string\n};\n\nclass ConfirmApplyFolderPropertiesDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      submitting: false\n    };\n  }\n\n  submit = () => {\n    const { repoID, path } = this.props;\n    this.setState({ submitting: true });\n    seafileAPI.applyFolderExtendedProperties(repoID, path).then(() => {\n      toaster.success(gettext('Successfully applied the properties.'));\n      this.props.toggle();\n    }).catch(error => {\n      let errorMsg = Utils.getErrorMsg(error);\n      toaster.danger(errorMsg);\n      this.setState({ submitting: false });\n    });\n  };\n\n  render() {\n    const { submitting } = this.state;\n\n    return (\n      <Modal isOpen={true} toggle={this.props.toggle} className=\"apply-properties-dialog\">\n        <ModalHeader toggle={this.props.toggle}>\n          {gettext('Apply properties')}\n        </ModalHeader>\n        <ModalBody>\n          <p>\n            {gettext('Are you sure you want to apply the properties to all the files inside the folder?')}\n          </p>\n        </ModalBody>\n        <ModalFooter>\n          <Button color='secondary' onClick={this.props.toggle} disabled={submitting}>{gettext('Cancel')}</Button>\n          <Button color='primary' className='flex-shrink-0 apply-properties' disabled={submitting} onClick={this.submit}>\n            {submitting ? (<Loading />) : (<>{gettext('Submit')}</>)}\n          </Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n\n}\n\nConfirmApplyFolderPropertiesDialog.propTypes = propTypes;\n\nexport default ConfirmApplyFolderPropertiesDialog;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport moment from 'moment';\nimport { v4 as uuidv4 } from 'uuid';\nimport Icon from '../icon';\nimport { gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport EditFileTagPopover from '../popover/edit-filetag-popover';\nimport ExtraAttributesDialog from '../dialog/extra-attributes-dialog';\nimport FileTagList from '../file-tag-list';\nimport ConfirmApplyFolderPropertiesDialog from '../dialog/confirm-apply-folder-properties-dialog';\n\nconst propTypes = {\n  repoInfo: PropTypes.object.isRequired,\n  repoID: PropTypes.string.isRequired,\n  dirent: PropTypes.object.isRequired,\n  direntType: PropTypes.string.isRequired,\n  direntDetail: PropTypes.object.isRequired,\n  path: PropTypes.string.isRequired,\n  fileTagList: PropTypes.array.isRequired,\n  onFileTagChanged: PropTypes.func.isRequired,\n};\n\nclass DetailListView extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isEditFileTagShow: false,\n      isShowExtraProperties: false,\n      isShowApplyProperties: false\n    };\n    this.tagListTitleID = `detail-list-view-tags-${uuidv4()}`;\n  }\n\n  getDirentPosition = () => {\n    let { repoInfo } = this.props;\n    let direntPath = this.getDirentPath();\n    let position = repoInfo.repo_name;\n    if (direntPath !== '/') {\n      let index = direntPath.lastIndexOf('/');\n      let path = direntPath.slice(0, index);\n      position = position + path;\n    }\n    return position;\n  };\n\n  onEditFileTagToggle = () => {\n    this.setState({\n      isEditFileTagShow: !this.state.isEditFileTagShow\n    });\n  };\n\n  onFileTagChanged = () => {\n    let direntPath = this.getDirentPath();\n    this.props.onFileTagChanged(this.props.dirent, direntPath);\n  };\n\n  getDirentPath = () => {\n    if (Utils.isMarkdownFile(this.props.path)) {\n      return this.props.path; // column mode: view file\n    }\n    let { dirent, path } = this.props;\n    return Utils.joinPath(path, dirent.name);\n  };\n\n  toggleExtraPropertiesDialog = () => {\n    this.setState({ isShowExtraProperties: !this.state.isShowExtraProperties });\n  };\n\n  toggleApplyPropertiesDialog = () => {\n    this.setState({ isShowApplyProperties: !this.state.isShowApplyProperties });\n  };\n\n  renderTags = () => {\n    const { direntType, direntDetail } = this.props;\n    const position = this.getDirentPosition();\n    if (direntType === 'dir') {\n      return (\n        <table className=\"table-thead-hidden\">\n          <thead>\n            <tr><th width=\"35%\"></th><th width=\"65%\"></th></tr>\n          </thead>\n          <tbody>\n            <tr><th>{gettext('Location')}</th><td>{position}</td></tr>\n            <tr><th>{gettext('Last Update')}</th><td>{moment(direntDetail.mtime).format('YYYY-MM-DD')}</td></tr>\n            {direntDetail.permission === 'rw' && (\n              <Fragment>\n                <tr className=\"file-extra-attributes\">\n                  <th colSpan={2}>\n                    <div className=\"edit-file-extra-attributes-btn\" onClick={this.toggleExtraPropertiesDialog}>\n                      {gettext('Edit extra properties')}\n                    </div>\n                  </th>\n                </tr>\n                <tr className=\"file-extra-attributes\">\n                  <th colSpan={2}>\n                    <div\n                      className=\"edit-file-extra-attributes-btn text-truncate\"\n                      onClick={this.toggleApplyPropertiesDialog}\n                      title={gettext('Apply properties to files inside the folder')}\n                    >\n                      {gettext('Apply properties to files inside the folder')}\n                    </div>\n                  </th>\n                </tr>\n              </Fragment>\n            )}\n          </tbody>\n        </table>\n      );\n    }\n    return (\n      <table className=\"table-thead-hidden\">\n        <thead>\n          <tr><th width=\"35%\"></th><th width=\"65%\"></th></tr>\n        </thead>\n        <tbody>\n          <tr><th>{gettext('Size')}</th><td>{Utils.bytesToSize(direntDetail.size)}</td></tr>\n          <tr><th>{gettext('Location')}</th><td>{position}</td></tr>\n          <tr><th>{gettext('Last Update')}</th><td>{moment(direntDetail.last_modified).fromNow()}</td></tr>\n          <tr className=\"file-tag-container\">\n            <th>{gettext('Tags')}</th>\n            <td>\n              <FileTagList fileTagList={this.props.fileTagList} />\n              <span onClick={this.onEditFileTagToggle} id={this.tagListTitleID}><Icon symbol='tag' /></span>\n            </td>\n          </tr>\n          {direntDetail.permission === 'rw' && (\n            <tr className=\"file-extra-attributes\">\n              <th colSpan={2}>\n                <div className=\"edit-file-extra-attributes-btn\" onClick={this.toggleExtraPropertiesDialog}>\n                  {gettext('Edit extra properties')}\n                </div>\n              </th>\n            </tr>\n          )}\n        </tbody>\n      </table>\n    );\n  };\n\n  render() {\n    const { direntType, direntDetail, fileTagList } = this.props;\n    const direntPath = this.getDirentPath();\n\n    return (\n      <Fragment>\n        {this.renderTags()}\n        {this.state.isEditFileTagShow &&\n          <EditFileTagPopover\n            repoID={this.props.repoID}\n            filePath={direntPath}\n            fileTagList={fileTagList}\n            toggleCancel={this.onEditFileTagToggle}\n            onFileTagChanged={this.onFileTagChanged}\n            target={this.tagListTitleID}\n            isEditFileTagShow={this.state.isEditFileTagShow}\n          />\n        }\n        {this.state.isShowExtraProperties && (\n          <ExtraAttributesDialog\n            repoID={this.props.repoID}\n            filePath={direntPath}\n            direntType={direntType}\n            direntDetail={direntDetail}\n            onToggle={this.toggleExtraPropertiesDialog}\n          />\n        )}\n        {this.state.isShowApplyProperties && (\n          <ConfirmApplyFolderPropertiesDialog\n            toggle={this.toggleApplyPropertiesDialog}\n            repoID={this.props.repoID}\n            path={direntPath}\n          />\n        )}\n      </Fragment>\n    );\n  }\n}\n\nDetailListView.defaultProps = {\n  fileTagList: [],\n};\n\nDetailListView.propTypes = propTypes;\n\nexport default DetailListView;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { siteRoot, enableVideoThumbnail } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../toast';\nimport Dirent from '../../models/dirent';\nimport DetailListView from './detail-list-view';\n\nimport '../../css/dirent-detail.css';\n\nconst propTypes = {\n  repoID: PropTypes.string.isRequired,\n  dirent: PropTypes.object,\n  path: PropTypes.string.isRequired,\n  currentRepoInfo: PropTypes.object.isRequired,\n  onItemDetailsClose: PropTypes.func.isRequired,\n  onFileTagChanged: PropTypes.func.isRequired,\n  direntDetailPanelTab: PropTypes.string,\n  fileTags: PropTypes.array,\n};\n\nclass DirentDetail extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      direntType: '',\n      direntDetail: '',\n      folderDirent: null,\n    };\n  }\n\n  componentDidMount() {\n    let { dirent, path, repoID } = this.props;\n    this.loadDirentInfo(dirent, path, repoID);\n  }\n\n  componentWillReceiveProps(nextProps) {\n    let { dirent, path, repoID } = nextProps;\n    if (this.props.dirent !== nextProps.dirent) {\n      this.loadDirentInfo(dirent, path, repoID);\n    }\n  }\n\n  loadDirentInfo = (dirent, path, repoID) => {\n    if (dirent) {\n      let direntPath = Utils.joinPath(path, dirent.name);\n      this.updateDetailView(dirent, direntPath);\n    } else {\n      let dirPath = Utils.getDirName(path);\n      seafileAPI.listDir(repoID, dirPath).then(res => {\n        let direntList = res.data.dirent_list;\n        let folderDirent = null;\n        for (let i = 0; i < direntList.length; i++) {\n          let dirent = direntList[i];\n          if (dirent.parent_dir + dirent.name === path) {\n            folderDirent = new Dirent(dirent);\n            break;\n          }\n        }\n        this.setState({folderDirent: folderDirent});\n        this.updateDetailView(folderDirent, path);\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    }\n  };\n\n  updateDetailView = (dirent, direntPath) => {\n    let repoID = this.props.repoID;\n    if (dirent.type === 'file') {\n      seafileAPI.getFileInfo(repoID, direntPath).then(res => {\n        this.setState({\n          direntType: 'file',\n          direntDetail: res.data,\n        });\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    } else {\n      seafileAPI.getDirInfo(repoID, direntPath).then(res => {\n        this.setState({\n          direntType: 'dir',\n          direntDetail: res.data\n        });\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    }\n  };\n\n  renderHeader = (smallIconUrl, direntName) => {\n    return (\n      <div className=\"detail-header\">\n        <div className=\"detail-control sf2-icon-x1\" onClick={this.props.onItemDetailsClose}></div>\n        <div className=\"detail-title dirent-title\">\n          <img src={smallIconUrl} width=\"24\" height=\"24\" alt=\"\" />{' '}\n          <span className=\"name ellipsis\" title={direntName}>{direntName}</span>\n        </div>\n      </div>\n    );\n  };\n\n  renderDetailBody = (bigIconUrl, folderDirent) => {\n    const { dirent, fileTags } = this.props;\n    return (\n      <div className=\"detail-body dirent-info\">\n        <div className=\"img\"><img src={bigIconUrl} className=\"thumbnail\" alt=\"\" /></div>\n        {this.state.direntDetail &&\n          <div className=\"dirent-table-container\">\n            <DetailListView\n              repoInfo={this.props.currentRepoInfo}\n              path={this.props.path}\n              repoID={this.props.repoID}\n              dirent={this.props.dirent || folderDirent}\n              direntType={this.state.direntType}\n              direntDetail={this.state.direntDetail}\n              fileTagList={dirent ? dirent.file_tags : fileTags}\n              onFileTagChanged={this.props.onFileTagChanged}\n            />\n          </div>\n        }\n      </div>\n    );\n  };\n\n  render() {\n    let { dirent, repoID, path } = this.props;\n    let { folderDirent } = this.state;\n    if (!dirent && !folderDirent) {\n      return '';\n    }\n    let smallIconUrl = dirent ? Utils.getDirentIcon(dirent) : Utils.getDirentIcon(folderDirent);\n    let bigIconUrl = dirent ? Utils.getDirentIcon(dirent, true) : Utils.getDirentIcon(folderDirent, true);\n    const isImg = dirent ? Utils.imageCheck(dirent.name) : Utils.imageCheck(folderDirent.name);\n    const isVideo = dirent ? Utils.videoCheck(dirent.name) : Utils.videoCheck(folderDirent.name);\n    if (isImg || (enableVideoThumbnail && isVideo)) {\n      bigIconUrl = `${siteRoot}thumbnail/${repoID}/1024` + Utils.encodePath(`${path === '/' ? '' : path}/${dirent.name}`);\n    }\n    let direntName = dirent ? dirent.name : folderDirent.name;\n    return (\n      <div className=\"detail-container\">\n        {this.renderHeader(smallIconUrl, direntName)}\n        {this.renderDetailBody(bigIconUrl, folderDirent)}\n      </div>\n    );\n  }\n}\n\nDirentDetail.propTypes = propTypes;\n\nexport default DirentDetail;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { enableSeadoc, gettext } from '../../utils/constants';\nimport Loading from '../loading';\nimport ModalPortal from '../modal-portal';\nimport CreateFile from '../../components/dialog/create-file-dialog';\n\nimport '../../css/tip-for-new-file.css';\n\nconst propTypes = {\n  path: PropTypes.string.isRequired,\n  isDirentListLoading: PropTypes.bool.isRequired,\n  onAddFile: PropTypes.func.isRequired\n};\n\nclass DirentNodeView extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      fileType: '',\n      isCreateFileDialogShow: false,\n    };\n  }\n\n  onCreateNewFile = (type) => {\n    this.setState({\n      fileType: type,\n      isCreateFileDialogShow: !this.state.isCreateFileDialogShow,\n    });\n  };\n\n  onCreateFileToggle = () => {\n    this.setState({\n      fileType: '',\n      isCreateFileDialogShow: !this.state.isCreateFileDialogShow,\n    });\n  };\n\n  checkDuplicatedName = () => {\n    return false; // current repo is null, and unnecessary to check duplicated name\n  };\n\n  render() {\n    if (this.props.isDirentListLoading) {\n      return (<Loading />);\n    }\n\n    return (\n      <Fragment>\n        <div className=\"tip-for-new-file\">\n          <p className=\"text-secondary text-center\">{gettext('This folder has no content at this time.')}</p>\n          <p className=\"text-secondary text-center\">{gettext('You can create files quickly')}{' +'}</p>\n          <button className=\"big-new-file-button\" onClick={this.onCreateNewFile.bind(this, '.md')}>\n            {'+ Markdown'}</button>\n          <button className=\"big-new-file-button\" onClick={this.onCreateNewFile.bind(this, '.pptx')}>\n            {'+ PPT'}</button>\n          <br />\n          <button className=\"big-new-file-button\" onClick={this.onCreateNewFile.bind(this, '.docx')}>\n            {'+ Word'}</button>\n          <button className=\"big-new-file-button\" onClick={this.onCreateNewFile.bind(this, '.xlsx')}>\n            {'+ Excel'}</button>\n          <br />\n          {enableSeadoc && <button className=\"big-new-file-button\" onClick={this.onCreateNewFile.bind(this, '.sdoc')}>\n            {'+ SeaDoc'}</button>}\n        </div>\n        {this.state.isCreateFileDialogShow && (\n          <ModalPortal>\n            <CreateFile\n              parentPath={this.props.path}\n              fileType={this.state.fileType}\n              onAddFile={this.props.onAddFile}\n              toggleDialog={this.onCreateFileToggle}\n              checkDuplicatedName={this.checkDuplicatedName}\n            />\n          </ModalPortal>\n        )}\n      </Fragment>\n    );\n  }\n}\n\nDirentNodeView.propTypes = propTypes;\n\nexport default DirentNodeView;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { v4 as uuidv4 } from 'uuid';\nimport { UncontrolledTooltip } from 'reactstrap';\n\nexport default class FileTag extends React.PureComponent {\n\n  static propTypes = {\n    fileTag: PropTypes.object.isRequired,\n    length: PropTypes.number.isRequired,\n    index: PropTypes.number.isRequired,\n  };\n\n  render() {\n    const { fileTag, length, index } = this.props;\n    const fileTagID = `file-tag-${fileTag.id}-${uuidv4()}`;\n    return (\n      <>\n        <span\n          className=\"file-tag\"\n          id={fileTagID}\n          key={fileTag.id}\n          style={{zIndex:length - index, backgroundColor:fileTag.color}}\n        ></span>\n        <UncontrolledTooltip target={fileTagID} placement=\"bottom\">\n          {fileTag.name}\n        </UncontrolledTooltip>\n      </>\n    );\n  }\n}\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport MediaQuery from 'react-responsive';\nimport { v4 as uuidv4 } from 'uuid';\nimport moment from 'moment';\nimport { Dropdown, DropdownToggle, DropdownItem } from 'reactstrap';\nimport { gettext, siteRoot, mediaUrl, username, useGoFileserver, fileServerRoot } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport URLDecorator from '../../utils/url-decorator';\nimport ItemDropdownMenu from '../dropdown-menu/item-dropdown-menu';\nimport Rename from '../rename';\nimport ModalPortal from '../modal-portal';\nimport MoveDirentDialog from '../dialog/move-dirent-dialog';\nimport CopyDirentDialog from '../dialog/copy-dirent-dialog';\nimport ShareDialog from '../dialog/share-dialog';\nimport ZipDownloadDialog from '../dialog/zip-download-dialog';\nimport EditFileTagDialog from '../dialog/edit-filetag-dialog';\nimport EditFileTagPopover from '../popover/edit-filetag-popover';\nimport LibSubFolderPermissionDialog from '../dialog/lib-sub-folder-permission-dialog';\nimport toaster from '../toast';\nimport FileTag from './file-tag';\n\nimport '../../css/dirent-list-item.css';\n\nconst propTypes = {\n  path: PropTypes.string.isRequired,\n  repoID: PropTypes.string.isRequired,\n  isItemFreezed: PropTypes.bool.isRequired,\n  dirent: PropTypes.object.isRequired,\n  onItemClick: PropTypes.func.isRequired,\n  freezeItem: PropTypes.func.isRequired,\n  unfreezeItem: PropTypes.func.isRequired,\n  onItemRenameToggle: PropTypes.func.isRequired,\n  onItemSelected: PropTypes.func.isRequired,\n  onItemDelete: PropTypes.func.isRequired,\n  onItemRename: PropTypes.func.isRequired,\n  onItemMove: PropTypes.func.isRequired,\n  onItemCopy: PropTypes.func.isRequired,\n  onItemConvert: PropTypes.func.isRequired,\n  onDirentClick: PropTypes.func.isRequired,\n  updateDirent: PropTypes.func.isRequired,\n  showImagePopup: PropTypes.func.isRequired,\n  currentRepoInfo: PropTypes.object,\n  isRepoOwner: PropTypes.bool,\n  isAdmin: PropTypes.bool.isRequired,\n  repoEncrypted: PropTypes.bool.isRequired,\n  isGroupOwnedRepo: PropTypes.bool.isRequired,\n  onItemMouseDown: PropTypes.func.isRequired,\n  onItemContextMenu: PropTypes.func.isRequired,\n  selectedDirentList: PropTypes.array.isRequired,\n  activeDirent: PropTypes.object,\n  getDirentItemMenuList: PropTypes.func.isRequired,\n  onFileTagChanged: PropTypes.func,\n  enableDirPrivateShare: PropTypes.bool.isRequired,\n  showDirentDetail: PropTypes.func.isRequired,\n  onItemsMove: PropTypes.func.isRequired,\n  onShowDirentsDraggablePreview: PropTypes.func,\n  loadDirentList: PropTypes.func,\n};\n\nclass DirentListItem extends React.Component {\n\n  constructor(props) {\n    super(props);\n\n    const { dirent } = this.props;\n    const { isCustomPermission, customPermission } = Utils.getUserPermission(dirent.permission);\n    this.isCustomPermission = isCustomPermission;\n    this.customPermission = customPermission;\n    this.canPreview = true;\n    this.canDrag = dirent.permission === 'rw';\n    if (isCustomPermission) {\n      const { preview, modify } = customPermission.permission;\n      this.canPreview = preview || modify;\n      this.canDrag = modify;\n    }\n\n    this.state = {\n      isOperationShow: false,\n      highlight: false,\n      isZipDialogOpen: false,\n      isMoveDialogShow: false,\n      isCopyDialogShow: false,\n      isShareDialogShow: false,\n      isMutipleOperation: false,\n      canDrag: this.canDrag,\n      isShowTagTooltip: false,\n      isDragTipShow: false,\n      isDropTipshow: false,\n      isEditFileTagShow: false,\n      isPermissionDialogOpen: false,\n      isOpMenuOpen: false // for mobile\n    };\n    this.tagListTitleID = `tag-list-title-${uuidv4()}`;\n  }\n\n  componentWillReceiveProps(nextProps) {\n    if (nextProps.isItemFreezed !== this.props.isItemFreezed && !nextProps.isItemFreezed) {\n      this.setState({\n        highlight: false,\n        isOperationShow: false,\n      }, () => {\n        if (nextProps.activeDirent && nextProps.activeDirent.name === nextProps.dirent.name) {\n          this.setState({isOperationShow: true});\n        }\n      });\n    }\n  }\n\n  toggleOpMenu = () => {\n    this.setState({\n      isOpMenuOpen: !this.state.isOpMenuOpen\n    });\n  };\n\n  //UI Interactive\n  onMouseEnter = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        highlight: true,\n        isOperationShow: true,\n      });\n    }\n    if (this.state.canDrag) {\n      this.setState({isDragTipShow: true});\n    }\n  };\n\n  onMouseOver = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        highlight: true,\n        isOperationShow: true,\n      });\n    }\n    if (this.state.canDrag) {\n      this.setState({isDragTipShow: true});\n    }\n  };\n\n  onMouseLeave = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        highlight: false,\n        isOperationShow: false,\n      });\n    }\n    this.setState({isDragTipShow: false});\n  };\n\n  unfreezeItem = () => {\n    this.setState({\n      highlight: false,\n      isOperationShow: false,\n    });\n    this.props.unfreezeItem();\n  };\n\n  //buiness handler\n  onItemSelected = () => {\n    this.props.onItemSelected(this.props.dirent);\n  };\n\n  onItemStarred = (e) => {\n    let dirent = this.props.dirent;\n    let repoID = this.props.repoID;\n    let filePath = this.getDirentPath(dirent);\n\n    e.preventDefault();\n\n    if (dirent.starred) {\n      seafileAPI.unstarItem(repoID, filePath).then(() => {\n        this.props.updateDirent(this.props.dirent, 'starred', false);\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    } else {\n      seafileAPI.starItem(repoID, filePath).then(() => {\n        this.props.updateDirent(this.props.dirent, 'starred', true);\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    }\n  };\n\n  // on '<tr>'\n  onDirentClick = (e) => {\n    // '<td>' is clicked\n    e.stopPropagation();\n    if (e.target.tagName == 'TD') {\n      this.props.onDirentClick(this.props.dirent);\n    }\n  };\n\n  onItemClick = (e) => {\n    e.preventDefault();\n    const dirent = this.props.dirent;\n    if (this.state.isRenameing) {\n      return;\n    }\n\n    if (dirent.isDir()) {\n      this.props.onItemClick(dirent);\n      return;\n    }\n\n    if (!this.canPreview) {\n      return;\n    }\n\n    if (Utils.imageCheck(dirent.name)) {\n      this.props.showImagePopup(dirent);\n    } else {\n      this.props.onItemClick(dirent);\n    }\n  };\n\n  onItemDelete = (e) => {\n    e.preventDefault();\n    e.nativeEvent.stopImmediatePropagation(); //for document event\n    this.props.onItemDelete(this.props.dirent);\n  };\n\n  onItemShare = (e) => {\n    e.preventDefault();\n    e.nativeEvent.stopImmediatePropagation(); //for document event\n    this.setState({isShareDialogShow: !this.state.isShareDialogShow});\n  };\n\n  closeSharedDialog = () => {\n    this.setState({isShareDialogShow: !this.state.isShareDialogShow});\n  };\n\n  onMobileMenuItemClick = (e) => {\n    const operation = e.target.getAttribute('data-op');\n    this.onMenuItemClick(operation, e);\n  };\n\n  onMenuItemClick = (operation, event) => {\n    switch(operation) {\n      case 'Download':\n        this.onItemDownload(event);\n        break;\n      case 'Share':\n        this.onItemShare(event);\n        break;\n      case 'Delete':\n        this.onItemDelete(event);\n        break;\n      case 'Rename':\n        this.onItemRenameToggle();\n        break;\n      case 'Move':\n        this.onItemMoveToggle();\n        break;\n      case 'Copy':\n        this.onItemCopyToggle();\n        break;\n      case 'Tags':\n        this.onEditFileTagToggle();\n        break;\n      case 'Permission':\n        this.onPermissionItem();\n        break;\n      case 'Unlock':\n        this.onUnlockItem();\n        break;\n      case 'Lock':\n        this.onLockItem();\n        break;\n      case 'Convert to Markdown':\n        this.onItemConvert(event, 'markdown');\n        break;\n      case 'Convert to sdoc':\n        this.onItemConvert(event, 'sdoc');\n        break;\n      case 'Mark as draft':\n        this.onMarkAsDraft();\n        break;\n      case 'Unmark as draft':\n        this.onUnmarkAsDraft();\n        break;\n      case 'History':\n        this.onHistory();\n        break;\n      case 'Access Log':\n        this.onAccessLog();\n        break;\n      case 'Properties':\n        this.props.onDirentClick(this.props.dirent);\n        this.props.showDirentDetail('info');\n        break;\n      case 'Open via Client':\n        this.onOpenViaClient();\n        break;\n      case 'Convert with ONLYOFFICE':\n        this.onConvertWithONLYOFFICE();\n        break;\n      default:\n        break;\n    }\n  };\n\n  onItemConvert = (e, dstType)=> {\n    e.preventDefault();\n    e.nativeEvent.stopImmediatePropagation(); //for document event\n    this.props.onItemConvert(this.props.dirent, dstType);\n  };\n\n  onEditFileTagToggle = () => {\n    this.setState({\n      isEditFileTagShow: !this.state.isEditFileTagShow\n    });\n  };\n\n  onFileTagChanged = () => {\n    let direntPath = this.getDirentPath(this.props.dirent);\n    this.props.onFileTagChanged(this.props.dirent, direntPath);\n  };\n\n  onItemRenameToggle = () => {\n    this.props.onItemRenameToggle(this.props.dirent);\n    this.setState({\n      isOperationShow: false,\n      isRenameing: true,\n      canDrag: false\n    });\n  };\n\n  onRenameConfirm = (newName) => {\n    this.props.onItemRename(this.props.dirent, newName);\n    this.onRenameCancel();\n  };\n\n  onRenameCancel = () => {\n    this.setState({\n      isRenameing: false,\n      canDrag: this.canDrag // set it back to the initial value\n    });\n    this.unfreezeItem();\n  };\n\n  onItemMoveToggle = () => {\n    this.setState({isMoveDialogShow: !this.state.isMoveDialogShow});\n  };\n\n  onItemCopyToggle = () => {\n    this.setState({isCopyDialogShow: !this.state.isCopyDialogShow});\n  };\n\n  onPermissionItem = () => {\n    this.setState({isPermissionDialogOpen: !this.state.isPermissionDialogOpen});\n  };\n\n  onLockItem = () => {\n    let repoID = this.props.repoID;\n    let filePath = this.getDirentPath(this.props.dirent);\n    seafileAPI.lockfile(repoID, filePath).then(() => {\n      this.props.updateDirent(this.props.dirent, 'is_locked', true);\n      this.props.updateDirent(this.props.dirent, 'locked_by_me', true);\n      let lockName = username.split('@');\n      this.props.updateDirent(this.props.dirent, 'lock_owner_name', lockName[0]);\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  onUnlockItem = () => {\n    let repoID = this.props.repoID;\n    let filePath = this.getDirentPath(this.props.dirent);\n    seafileAPI.unlockfile(repoID, filePath).then(() => {\n      this.props.updateDirent(this.props.dirent, 'is_locked', false);\n      this.props.updateDirent(this.props.dirent, 'locked_by_me', false);\n      this.props.updateDirent(this.props.dirent, 'lock_owner_name', '');\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  onMarkAsDraft = () => {\n    let repoID = this.props.repoID;\n    let filePath = this.getDirentPath(this.props.dirent);\n    seafileAPI.sdocMarkAsDraft(repoID, filePath).then((res) => {\n      this.props.updateDirent(this.props.dirent, 'is_sdoc_draft', true);\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  onUnmarkAsDraft = () => {\n    let repoID = this.props.repoID;\n    let filePath = this.getDirentPath(this.props.dirent);\n    seafileAPI.sdocUnmarkAsDraft(repoID, filePath).then((res) => {\n      this.props.updateDirent(this.props.dirent, 'is_sdoc_draft', false);\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  onHistory = () => {\n    let repoID = this.props.repoID;\n    let filePath = this.getDirentPath(this.props.dirent);\n    let url = URLDecorator.getUrl({type: 'file_revisions', repoID: repoID, filePath: filePath});\n    location.href = url;\n  };\n\n  onAccessLog = () => {\n    let filePath = this.getDirentPath(this.props.dirent);\n    let path = siteRoot + 'repo/file-access/' + this.props.repoID + '/?p=' + encodeURIComponent(filePath) ;\n    window.open(path);\n  };\n\n  onOpenViaClient = () => {\n    let repoID = this.props.repoID;\n    let filePath = this.getDirentPath(this.props.dirent);\n    let url = URLDecorator.getUrl({type: 'open_via_client', repoID: repoID, filePath: filePath});\n    location.href = url;\n  };\n\n  onConvertWithONLYOFFICE = ()=> {\n    let repoID = this.props.repoID;\n    let filePath = this.getDirentPath(this.props.dirent);\n    seafileAPI.onlyofficeConvert(repoID, filePath).then(res => {\n      this.props.loadDirentList(res.data.parent_dir);\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  onItemDownload = (e) => {\n    e.preventDefault();\n    e.nativeEvent.stopImmediatePropagation();\n    let dirent = this.props.dirent;\n    let repoID = this.props.repoID;\n    let direntPath = this.getDirentPath(dirent);\n    if (dirent.type === 'dir') {\n      if (!useGoFileserver) {\n        this.setState({\n          isZipDialogOpen: true\n        });\n      } else {\n        seafileAPI.zipDownload(repoID, this.props.path, this.props.dirent.name).then((res) => {\n          const zipToken = res.data['zip_token'];\n          location.href = `${fileServerRoot}zip/${zipToken}`;\n        }).catch((error) => {\n          let errorMsg = Utils.getErrorMsg(error);\n          this.setState({\n            isLoading: false,\n            errorMsg: errorMsg\n          });\n        });\n      }\n    } else {\n      let url = URLDecorator.getUrl({type: 'download_file_url', repoID: repoID, filePath: direntPath});\n      location.href = url;\n    }\n  };\n\n  closeZipDialog = () => {\n    this.setState({\n      isZipDialogOpen: false\n    });\n  };\n\n  getDirentPath = (dirent) => {\n    let path = this.props.path;\n    return path === '/' ? path + dirent.name : path + '/' + dirent.name;\n  };\n\n  onTagTooltipToggle = (e) => {\n    e.stopPropagation();\n    this.setState({isShowTagTooltip: !this.state.isShowTagTooltip});\n  };\n\n  onItemMove = (destRepo, dirent, selectedPath, currentPath) => {\n    this.props.onItemMove(destRepo, dirent, selectedPath, currentPath);\n  };\n\n  onItemDragStart = (e) => {\n    if (Utils.isIEBrower() || !this.state.canDrag) {\n      return false;\n    }\n    e.dataTransfer.effectAllowed = 'move';\n    let { selectedDirentList } = this.props;\n    if (selectedDirentList.length > 0 && selectedDirentList.includes(this.props.dirent)) { // drag items and selectedDirentList include item\n      this.props.onShowDirentsDraggablePreview();\n      e.dataTransfer.setDragImage(this.refs.empty_content, 0, 0); // Show an empty content\n      let selectedList =  selectedDirentList.map(item => {\n        let nodeRootPath = this.getDirentPath(item);\n        let dragStartItemData = {nodeDirent: item, nodeParentPath: this.props.path, nodeRootPath: nodeRootPath};\n        return dragStartItemData;\n      });\n      selectedList = JSON.stringify(selectedList);\n      e.dataTransfer.setData('applicaiton/drag-item-info', selectedList);\n      return ;\n    }\n\n    if (e.dataTransfer && e.dataTransfer.setDragImage) {\n      e.dataTransfer.setDragImage(this.refs.drag_icon, 15, 15);\n    }\n\n    let nodeRootPath = this.getDirentPath(this.props.dirent);\n    let dragStartItemData = {nodeDirent: this.props.dirent, nodeParentPath: this.props.path, nodeRootPath: nodeRootPath};\n    dragStartItemData = JSON.stringify(dragStartItemData);\n\n    e.dataTransfer.setData('applicaiton/drag-item-info', dragStartItemData);\n  };\n\n  onItemDragEnter = (e) => {\n    if (Utils.isIEBrower() || !this.state.canDrag) {\n      return false;\n    }\n    if (this.props.dirent.type === 'dir') {\n      e.stopPropagation();\n      this.setState({isDropTipshow: true});\n    }\n  };\n\n  onItemDragOver = (e) => {\n    if (Utils.isIEBrower() || !this.state.canDrag) {\n      return false;\n    }\n    if (e.dataTransfer.dropEffect === 'copy') {\n      return;\n    }\n    e.preventDefault();\n    e.dataTransfer.dropEffect = 'move';\n  };\n\n  onItemDragLeave = (e) => {\n    if (Utils.isIEBrower() || !this.state.canDrag) {\n      return false;\n    }\n\n    if (this.props.dirent.type === 'dir') {\n      e.stopPropagation();\n    }\n    this.setState({isDropTipshow: false});\n  };\n\n  onItemDragDrop = (e) => {\n    if (Utils.isIEBrower() || !this.state.canDrag) {\n      return false;\n    }\n    this.setState({isDropTipshow: false});\n    if (e.dataTransfer.files.length) { // uploaded files\n      return;\n    }\n    if (this.props.dirent.type === 'dir') {\n      e.stopPropagation();\n    } else {\n      return;\n    }\n    let dragStartItemData = e.dataTransfer.getData('applicaiton/drag-item-info');\n    dragStartItemData = JSON.parse(dragStartItemData);\n    if (Array.isArray(dragStartItemData)) { //move items\n      let direntPaths =  dragStartItemData.map(draggedItem => {\n        return draggedItem.nodeRootPath;\n      });\n\n      let selectedPath = Utils.joinPath(this.props.path, this.props.dirent.name);\n\n      if (direntPaths.some(direntPath => { return direntPath === selectedPath;})) { //eg; A/B, A/C --> A/B\n        return;\n      }\n\n      this.props.onItemsMove(this.props.currentRepoInfo, selectedPath);\n      return ;\n    }\n\n    let { nodeDirent, nodeParentPath, nodeRootPath } = dragStartItemData;\n    let dropItemData = this.props.dirent;\n\n    if (nodeDirent.name === dropItemData.name) {\n      return;\n    }\n\n    //  copy the dirent to it's child. eg: A/B -> A/B/C\n    if (dropItemData.type === 'dir' && nodeDirent.type === 'dir') {\n      if (nodeParentPath !== this.props.path) {\n        if (this.props.path.indexOf(nodeRootPath) !== -1) {\n          return;\n        }\n      }\n    }\n\n    let selectedPath = Utils.joinPath(this.props.path, this.props.dirent.name);\n    this.onItemMove(this.props.currentRepoInfo, nodeDirent, selectedPath, nodeParentPath);\n  };\n\n  onItemMouseDown = (event) => {\n    this.props.onItemMouseDown(event);\n  };\n\n  onItemContextMenu = (event) => {\n    let dirent = this.props.dirent;\n    this.props.onItemContextMenu(event, dirent);\n  };\n\n  renderItemOperation = () => {\n    let { dirent, currentRepoInfo, selectedDirentList } = this.props;\n    let canDownload = true;\n    let canDelete = true;\n    const { isCustomPermission, customPermission } = this;\n    if (isCustomPermission) {\n      const { permission } = customPermission;\n      canDownload = permission.download;\n      canDelete = permission.delete;\n    }\n\n    // https://dev.seafile.com/seahub/lib/d6f300e7-bb2b-4722-b83e-cf45e370bfbc/file/seaf-server%20%E5%8A%9F%E8%83%BD%E8%AE%BE%E8%AE%A1/%E6%9D%83%E9%99%90%E7%9B%B8%E5%85%B3/%E8%B5%84%E6%96%99%E5%BA%93%E6%9D%83%E9%99%90%E8%A7%84%E8%8C%83.md\n    let showShareBtn = Utils.isHasPermissionToShare(currentRepoInfo, dirent.permission, dirent);\n\n    return (\n      <Fragment>\n        {selectedDirentList.length > 1 ?\n          <Fragment>\n            {this.state.isOperationShow && !dirent.isSelected &&\n              <div className=\"operations\">\n                {(dirent.permission === 'rw' || dirent.permission === 'r' || (isCustomPermission && canDownload)) && (\n                  <a href=\"#\" className=\"op-icon sf2-icon-download\" title={gettext('Download')} role=\"button\" aria-label={gettext('Download')} onClick={this.onItemDownload}></a>\n                )}\n                {showShareBtn && (\n                  <a href=\"#\" className=\"op-icon sf2-icon-share\" title={gettext('Share')} role=\"button\" aria-label={gettext('Share')} onClick={this.onItemShare}></a>\n                )}\n                {(dirent.permission === 'rw' || dirent.permission === 'cloud-edit' || (isCustomPermission && canDelete)) && (\n                  <a href=\"#\" className=\"op-icon sf2-icon-delete\" title={gettext('Delete')} role=\"button\" aria-label={gettext('Delete')} onClick={this.onItemDelete}></a>\n                )}\n                <ItemDropdownMenu\n                  item={this.props.dirent}\n                  toggleClass={'sf2-icon-caret-down'}\n                  isHandleContextMenuEvent={true}\n                  getMenuList={this.props.getDirentItemMenuList}\n                  onMenuItemClick={this.onMenuItemClick}\n                  unfreezeItem={this.unfreezeItem}\n                  freezeItem={this.props.freezeItem}\n                />\n              </div>\n            }\n          </Fragment> :\n          <Fragment>\n            {this.state.isOperationShow &&\n              <div className=\"operations\">\n                {(dirent.permission === 'rw' || dirent.permission === 'r' || (isCustomPermission && canDownload)) && (\n                  <a href=\"#\" className=\"op-icon sf2-icon-download\" title={gettext('Download')} role=\"button\" aria-label={gettext('Download')} onClick={this.onItemDownload}></a>\n                )}\n                {showShareBtn && (\n                  <a href=\"#\" className=\"op-icon sf2-icon-share\" title={gettext('Share')} role=\"button\" aria-label={gettext('Share')} onClick={this.onItemShare}></a>\n                )}\n                {(dirent.permission === 'rw' || dirent.permission === 'cloud-edit' || (isCustomPermission && canDelete)) && (\n                  <a href=\"#\" className=\"op-icon sf2-icon-delete\" title={gettext('Delete')} role=\"button\" aria-label={gettext('Delete')} onClick={this.onItemDelete}></a>\n                )}\n                <ItemDropdownMenu\n                  item={this.props.dirent}\n                  toggleClass={'sf2-icon-caret-down'}\n                  isHandleContextMenuEvent={true}\n                  getMenuList={this.props.getDirentItemMenuList}\n                  onMenuItemClick={this.onMenuItemClick}\n                  unfreezeItem={this.unfreezeItem}\n                  freezeItem={this.props.freezeItem}\n                />\n              </div>\n            }\n          </Fragment>\n        }\n      </Fragment>\n    );\n  };\n\n  render() {\n    let { path, dirent, activeDirent } = this.props;\n    let direntPath = Utils.joinPath(path, dirent.name);\n    let dirHref = '';\n    if (this.props.currentRepoInfo) {\n      dirHref = siteRoot + 'library/' + this.props.repoID + '/' + this.props.currentRepoInfo.repo_name + Utils.encodePath(direntPath);\n    }\n    let fileHref = siteRoot + 'lib/' + this.props.repoID + '/file' + Utils.encodePath(direntPath);\n    if (dirent.is_sdoc_revision && dirent.revision_id) {\n      fileHref = siteRoot + 'lib/' + this.props.repoID + '/revisions/' + dirent.revision_id + '/';\n    }\n\n    let iconUrl = Utils.getDirentIcon(dirent);\n\n    let trClass = this.state.highlight ? 'tr-highlight ' : '';\n    trClass += this.state.isDropTipshow ? 'tr-drop-effect' : '';\n    trClass += (activeDirent && activeDirent.name === dirent.name)  ? 'tr-active' : '';\n    trClass += dirent.isSelected? 'tr-active' : '';\n\n    let lockedInfo = gettext('locked by {name}').replace('{name}', dirent.lock_owner_name);\n    const isDesktop = Utils.isDesktop();\n    const { canDrag } = this.state;\n    const desktopItem = (\n      <tr\n        className={trClass}\n        draggable={canDrag}\n        onFocus={this.onMouseEnter}\n        onMouseEnter={this.onMouseEnter}\n        onMouseOver={this.onMouseOver}\n        onMouseLeave={this.onMouseLeave}\n        onClick={this.onDirentClick}\n        onDragStart={this.onItemDragStart}\n        onDragEnter={this.onItemDragEnter}\n        onDragOver={this.onItemDragOver}\n        onDragLeave={this.onItemDragLeave}\n        onDrop={this.onItemDragDrop}\n        onMouseDown={this.onItemMouseDown}\n        onContextMenu={this.onItemContextMenu}\n      >\n        <td className={`pl10 ${this.state.isDragTipShow ? 'tr-drag-effect' : ''}`}>\n          <input type=\"checkbox\" className=\"vam\" onChange={this.onItemSelected} checked={dirent.isSelected}/>\n        </td>\n        <td className=\"pl10\">\n          {dirent.starred !== undefined &&\n          <a href=\"#\" role=\"button\" aria-label={dirent.starred ? gettext('Unstar') : gettext('Star')} onClick={this.onItemStarred}>\n            <i className={`fa-star ${dirent.starred ? 'fas' : 'far star-empty'}`}></i>\n          </a>\n          }\n        </td>\n        <td className=\"pl10\">\n          <div className=\"dir-icon\">\n            {(this.canPreview && dirent.encoded_thumbnail_src) ?\n              <img ref='drag_icon' src={`${siteRoot}${dirent.encoded_thumbnail_src}`} className=\"thumbnail cursor-pointer\" onClick={this.onItemClick} alt=\"\" /> :\n              <img ref='drag_icon' src={iconUrl} width=\"24\" alt='' />\n            }\n            {dirent.is_locked && <img className=\"locked\" src={mediaUrl + 'img/file-locked-32.png'} alt={gettext('locked')} title={lockedInfo}/>}\n            <div ref=\"empty_content\" style={{position: 'absolute', width: '1px', height: '1px'}}></div>\n          </div>\n        </td>\n        <td className=\"name\">\n          {this.state.isRenameing && <Rename hasSuffix={dirent.type !== 'dir'} name={dirent.name} onRenameConfirm={this.onRenameConfirm} onRenameCancel={this.onRenameCancel} />}\n          {!this.state.isRenameing && (\n            <Fragment>\n              {(!dirent.isDir() && !this.canPreview) ?\n                <a className=\"sf-link\" onClick={this.onItemClick}>{dirent.name}</a> :\n                <a href={dirent.type === 'dir' ? dirHref : fileHref} onClick={this.onItemClick}>{dirent.name}</a>\n              }\n              {/*(Utils.isSdocFile(dirent.name) && dirent.is_sdoc_draft) &&\n                <span className=\"dirent-sdoc-draft-identifier\">{gettext('Draft')}</span>\n              */}\n            </Fragment>\n          )}\n        </td>\n        <td className=\"tag-list-title\">\n          {(dirent.type !== 'dir' && dirent.file_tags && dirent.file_tags.length > 0) && (\n            <div id={this.tagListTitleID} className=\"dirent-item tag-list tag-list-stacked\">\n              {dirent.file_tags.map((fileTag, index) => {\n                return (\n                  <FileTag fileTag={fileTag} length={dirent.file_tags.length} key={index} index={index}/>\n                );\n              })}\n            </div>\n          )}\n          {(dirent.type !== 'dir' && (!dirent.file_tags || dirent.file_tags.length == 0)) && (\n            <div id={this.tagListTitleID} className=\"dirent-item tag-list tag-list-stacked\"></div>\n          )}\n        </td>\n        <td className=\"operation\">{this.renderItemOperation()}</td>\n        <td className=\"file-size\">{dirent.size && dirent.size}</td>\n        <td className=\"last-update\" title={moment.unix(dirent.mtime).format('llll')}>{dirent.mtime_relative}</td>\n      </tr>\n    );\n    const mobileItem = (\n      <tr>\n        <td onClick={this.onItemClick}>\n          <div className=\"dir-icon\">\n            {(this.canPreview && dirent.encoded_thumbnail_src) ?\n              <img src={`${siteRoot}${dirent.encoded_thumbnail_src}`} className=\"thumbnail cursor-pointer\" alt=\"\" /> :\n              <img src={iconUrl} width=\"24\" alt=\"\" />\n            }\n            {dirent.is_locked && <img className=\"locked\" src={mediaUrl + 'img/file-locked-32.png'} alt={gettext('locked')} title={lockedInfo}/>}\n          </div>\n        </td>\n        <td onClick={this.onItemClick}>\n          {this.state.isRenameing && <Rename hasSuffix={dirent.type !== 'dir'} name={dirent.name} onRenameConfirm={this.onRenameConfirm} onRenameCancel={this.onRenameCancel} /> }\n          {!this.state.isRenameing && (\n            <Fragment>\n              {(!dirent.isDir() && !this.canPreview) ?\n                <a className=\"sf-link\">{dirent.name}</a> :\n                <a href={dirent.type === 'dir' ? dirHref : fileHref}>{dirent.name}</a>\n              }\n            </Fragment>\n          )}\n          <br />\n          {dirent.size && <span className=\"item-meta-info\">{dirent.size}</span>}\n          <span className=\"item-meta-info\">{dirent.mtime_relative}</span>\n        </td>\n        <td>\n          <Dropdown isOpen={this.state.isOpMenuOpen} toggle={this.toggleOpMenu}>\n            <DropdownToggle\n              tag=\"i\"\n              className=\"sf-dropdown-toggle fa fa-ellipsis-v ml-0\"\n              title={gettext('More Operations')}\n              data-toggle=\"dropdown\"\n              aria-expanded={this.state.isOpMenuOpen}\n            />\n            <div className={this.state.isOpMenuOpen ? '' : 'd-none'} onClick={this.toggleOpMenu}>\n              <div className=\"mobile-operation-menu-bg-layer\"></div>\n              <div className=\"mobile-operation-menu\">\n                {dirent.starred !== undefined &&\n                <DropdownItem className=\"mobile-menu-item\" onClick={this.onItemStarred}>{dirent.starred ? gettext('Unstar') : gettext('Star')}</DropdownItem>}\n                {this.props.getDirentItemMenuList(dirent, true).map((item, index) => {\n                  if (item != 'Divider' && item.key != 'Open via Client') {\n                    return (\n                      <DropdownItem className=\"mobile-menu-item\" key={index} data-op={item.key} onClick={this.onMobileMenuItemClick}>{item.value}</DropdownItem>\n                    );\n                  } else {\n                    return null;\n                  }\n                })}\n              </div>\n            </div>\n          </Dropdown>\n        </td>\n      </tr>\n    );\n\n    return (\n      <Fragment>\n        {isDesktop ? desktopItem : mobileItem}\n        {this.state.isMoveDialogShow &&\n          <ModalPortal>\n            <MoveDirentDialog\n              path={this.props.path}\n              repoID={this.props.repoID}\n              dirent={this.props.dirent}\n              isMutipleOperation={this.state.isMutipleOperation}\n              onItemMove={this.props.onItemMove}\n              onCancelMove={this.onItemMoveToggle}\n              repoEncrypted={this.props.repoEncrypted}\n            />\n          </ModalPortal>\n        }\n        {this.state.isCopyDialogShow &&\n          <ModalPortal>\n            <CopyDirentDialog\n              path={this.props.path}\n              repoID={this.props.repoID}\n              dirent={this.props.dirent}\n              isMutipleOperation={this.state.isMutipleOperation}\n              onItemCopy={this.props.onItemCopy}\n              onCancelCopy={this.onItemCopyToggle}\n              repoEncrypted={this.props.repoEncrypted}\n            />\n          </ModalPortal>\n        }\n        <MediaQuery query=\"(min-width: 768px)\">\n          {this.state.isEditFileTagShow &&\n            <EditFileTagPopover\n              repoID={this.props.repoID}\n              fileTagList={dirent.file_tags}\n              filePath={direntPath}\n              toggleCancel={this.onEditFileTagToggle}\n              onFileTagChanged={this.onFileTagChanged}\n              target={this.tagListTitleID}\n              isEditFileTagShow={this.state.isEditFileTagShow}\n            />\n          }\n        </MediaQuery>\n        <MediaQuery query=\"(max-width: 767.8px)\">\n          {this.state.isEditFileTagShow &&\n            <EditFileTagDialog\n              repoID={this.props.repoID}\n              fileTagList={dirent.file_tags}\n              filePath={direntPath}\n              toggleCancel={this.onEditFileTagToggle}\n              onFileTagChanged={this.onFileTagChanged}\n            />\n          }\n        </MediaQuery>\n        {this.state.isZipDialogOpen &&\n          <ModalPortal>\n            <ZipDownloadDialog\n              repoID={this.props.repoID}\n              path={this.props.path}\n              target={this.props.dirent.name}\n              toggleDialog={this.closeZipDialog}\n            />\n          </ModalPortal>\n        }\n        {this.state.isShareDialogShow &&\n          <ModalPortal>\n            <ShareDialog\n              itemType={dirent.type}\n              itemName={dirent.name}\n              itemPath={direntPath}\n              userPerm={dirent.permission}\n              repoID={this.props.repoID}\n              repoEncrypted={this.props.repoEncrypted}\n              enableDirPrivateShare={this.props.enableDirPrivateShare}\n              isGroupOwnedRepo={this.props.isGroupOwnedRepo}\n              toggleDialog={this.closeSharedDialog}\n            />\n          </ModalPortal>\n        }\n        {this.state.isPermissionDialogOpen &&\n          <ModalPortal>\n            <LibSubFolderPermissionDialog\n              toggleDialog={this.onPermissionItem}\n              repoID={this.props.repoID}\n              folderPath={direntPath}\n              folderName={dirent.name}\n              isDepartmentRepo={this.props.isGroupOwnedRepo}\n            />\n          </ModalPortal>\n        }\n      </Fragment>\n    );\n  }\n}\n\nDirentListItem.propTypes = propTypes;\n\nexport default DirentListItem;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { siteRoot } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\n\nconst propTypes = {\n  selectedDirentList: PropTypes.array,\n  onHideDirentsDraggablePreview: PropTypes.func\n};\n\nclass DirentsDraggedPreview extends React.Component {\n\n  componentDidMount() {\n    document.addEventListener('dragover', this.handleDragOver);\n    document.addEventListener('drop', this.handleDrop);\n    document.addEventListener('dragend', this.handleDragEnd);\n  }\n\n  componentWillUnmount() {\n    document.removeEventListener('dragover', this.handleDragOver);\n    document.removeEventListener('drop', this.handleDrop);\n    document.removeEventListener('dragend', this.handleDragEnd);\n  }\n\n  handleDragEnd = () => {\n    this.element.style.opacity = 0;\n    this.props.onHideDirentsDraggablePreview();\n  };\n\n  handleDragOver = (event) => {\n    if (Utils.isIEBrower()) {\n      return false;\n    }\n    event.preventDefault();\n    event.dataTransfer.dropEffect = 'move';\n\n    this.element.style.top = event.clientY + 'px';\n    this.element.style.left = event.clientX + 'px';\n  };\n\n  handleDrop = (event) => {\n    this.element.style.opacity = 0;\n    this.props.onHideDirentsDraggablePreview();\n  };\n\n  render() {\n    let{ selectedDirentList } = this.props;\n    const inlineStyle = {\n      position: 'absolute',\n      opacity: 1,\n      pointerEvents: 'none',\n      display: 'block',\n      left: '-9999px',\n      top: '-9999px',\n      zIndex: 101,\n      maxHeight: document.documentElement.clientHeight,\n      overflow: 'hidden'\n    };\n    return (\n      <div style={inlineStyle} ref={element => this.element = element}>\n        {selectedDirentList.map((dirent, index) => {\n          let iconUrl = Utils.getDirentIcon(dirent);\n          return (\n            <div key={index}>\n              {dirent.encoded_thumbnail_src ?\n                <img src={`${siteRoot}${dirent.encoded_thumbnail_src}`} className=\"thumbnail cursor-pointer\" alt=\"\" /> :\n                <img src={iconUrl} width=\"24\" alt='' />\n              }\n            </div>\n          );\n        })}\n      </div>\n    );\n  }\n}\n\nDirentsDraggedPreview.propTypes = propTypes;\n\nexport default DirentsDraggedPreview;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { siteRoot, gettext, username, enableSeadoc } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport TextTranslation from '../../utils/text-translation';\nimport URLDecorator from '../../utils/url-decorator';\nimport Loading from '../loading';\nimport toaster from '../toast';\nimport ModalPortal from '../modal-portal';\nimport CreateFile from '../dialog/create-file-dialog';\nimport CreateFolder from '../dialog/create-folder-dialog';\nimport ImageDialog from '../dialog/image-dialog';\nimport ZipDownloadDialog from '../dialog/zip-download-dialog';\nimport MoveDirentDialog from '../dialog/move-dirent-dialog';\nimport CopyDirentDialog from '../dialog/copy-dirent-dialog';\nimport DirentListItem from './dirent-list-item';\nimport ContextMenu from '../context-menu/context-menu';\nimport { hideMenu, showMenu } from '../context-menu/actions';\nimport DirentsDraggedPreview from '../draggable/dirents-dragged-preview';\n\nconst propTypes = {\n  path: PropTypes.string.isRequired,\n  repoID: PropTypes.string.isRequired,\n  currentRepoInfo: PropTypes.object,\n  isAllItemSelected: PropTypes.bool.isRequired,\n  isDirentListLoading: PropTypes.bool.isRequired,\n  direntList: PropTypes.array.isRequired,\n  sortBy: PropTypes.string.isRequired,\n  sortOrder: PropTypes.string.isRequired,\n  sortItems: PropTypes.func.isRequired,\n  onAddFile: PropTypes.func.isRequired,\n  onAddFolder: PropTypes.func.isRequired,\n  onItemDelete: PropTypes.func.isRequired,\n  onAllItemSelected: PropTypes.func.isRequired,\n  onItemSelected: PropTypes.func.isRequired,\n  onItemRename: PropTypes.func.isRequired,\n  onItemClick: PropTypes.func.isRequired,\n  onItemMove: PropTypes.func.isRequired,\n  onItemCopy: PropTypes.func.isRequired,\n  onDirentClick: PropTypes.func.isRequired,\n  updateDirent: PropTypes.func.isRequired,\n  selectedDirentList: PropTypes.array.isRequired,\n  onItemsMove: PropTypes.func.isRequired,\n  onItemsCopy: PropTypes.func.isRequired,\n  onItemConvert: PropTypes.func.isRequired,\n  onItemsDelete: PropTypes.func.isRequired,\n  onFileTagChanged: PropTypes.func,\n  enableDirPrivateShare: PropTypes.bool.isRequired,\n  isGroupOwnedRepo: PropTypes.bool.isRequired,\n  userPerm: PropTypes.string,\n  showDirentDetail: PropTypes.func.isRequired,\n  loadDirentList: PropTypes.func,\n  fullDirentList: PropTypes.array,\n  posX: PropTypes.string,\n  posY: PropTypes.string,\n};\n\nclass DirentListView extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isItemFreezed: false,\n      isImagePopupOpen: false,\n      imageItems: [],\n      imageIndex: 0,\n      fileType: '',\n      isCreateFileDialogShow: false,\n      isCreateFolderDialogShow: false,\n      isMoveDialogShow: false,\n      isCopyDialogShow: false,\n      isProgressDialogShow: false,\n      downloadItems: [],\n      isMutipleOperation: true,\n      activeDirent: null,\n      isListDropTipShow: false,\n      isShowDirentsDraggablePreview: false,\n    };\n\n    this.enteredCounter = 0; // Determine whether to enter the child element to avoid dragging bubbling bugs\n    this.isRepoOwner = props.currentRepoInfo.owner_email === username;\n    this.isAdmin = props.currentRepoInfo.is_admin;\n    this.repoEncrypted = props.currentRepoInfo.encrypted;\n\n    this.clickedDirent = null;\n    this.direntItems = [];\n    this.currentItemRef = null;\n\n    this.zipToken = null;\n\n    const { userPerm } = props;\n    this.canDrop = userPerm === 'rw';\n    const { isCustomPermission, customPermission } = Utils.getUserPermission(userPerm);\n    if (isCustomPermission) {\n      const { modify } = customPermission.permission;\n      this.canDrop = modify;\n    }\n  }\n\n  freezeItem = () => {\n    this.setState({isItemFreezed: true});\n  };\n\n  unfreezeItem = () => {\n    this.setState({isItemFreezed: false});\n  };\n\n  onItemRename = (dirent, newName) => {\n    let isDuplicated = this.props.direntList.some(item => {\n      return item.name === newName;\n    });\n    if (isDuplicated) {\n      let errMessage = gettext('The name \"{name}\" is already taken. Please choose a different name.');\n      errMessage = errMessage.replace('{name}', Utils.HTMLescape(newName));\n      toaster.danger(errMessage);\n      return false;\n    }\n    this.props.onItemRename(dirent, newName);\n  };\n\n  onItemRenameToggle = () => {\n    this.freezeItem();\n  };\n\n  onItemSelected = (dirent) => {\n    this.setState({activeDirent: null});\n    this.props.onItemSelected(dirent);\n  };\n\n  onDirentClick = (dirent) => {\n    hideMenu();\n    if (this.props.selectedDirentList.length > 0 && !this.state.activeDirent ) {\n      return;\n    }\n    this.setState({activeDirent: dirent});\n    this.props.onDirentClick(dirent);\n  };\n\n  sortByName = (e) => {\n    e.preventDefault();\n    const sortBy = 'name';\n    const sortOrder = this.props.sortOrder == 'asc' ? 'desc' : 'asc';\n    this.props.sortItems(sortBy, sortOrder);\n  };\n\n  sortByTime = (e) => {\n    e.preventDefault();\n    const sortBy = 'time';\n    const sortOrder = this.props.sortOrder == 'asc' ? 'desc' : 'asc';\n    this.props.sortItems(sortBy, sortOrder);\n  };\n\n  sortBySize = (e) => {\n    e.preventDefault();\n    const sortBy = 'size';\n    const sortOrder = this.props.sortOrder == 'asc' ? 'desc' : 'asc';\n    this.props.sortItems(sortBy, sortOrder);\n  };\n\n  // for image popup\n  prepareImageItem = (item) => {\n    const name = item.name;\n    const repoID = this.props.repoID;\n    const path = Utils.encodePath(Utils.joinPath(this.props.path, name));\n    const src = `${siteRoot}repo/${repoID}/raw${path}`;\n\n    return {\n      'name': name,\n      'url': `${siteRoot}lib/${repoID}/file${path}`,\n      'src': src\n    };\n  };\n\n  showImagePopup = (curItem) => {\n    let items = this.props.fullDirentList.filter((item) => {\n      return Utils.imageCheck(item.name);\n    });\n\n    const imageItems = items.map((item) => {\n      return this.prepareImageItem(item);\n    });\n\n    this.setState({\n      isImagePopupOpen: true,\n      imageItems: imageItems,\n      imageIndex: items.indexOf(curItem)\n    });\n  };\n\n  moveToPrevImage = () => {\n    const imageItemsLength = this.state.imageItems.length;\n    this.setState((prevState) => ({\n      imageIndex: (prevState.imageIndex + imageItemsLength - 1) % imageItemsLength\n    }));\n  };\n\n  moveToNextImage = () => {\n    const imageItemsLength = this.state.imageItems.length;\n    this.setState((prevState) => ({\n      imageIndex: (prevState.imageIndex + 1) % imageItemsLength\n    }));\n  };\n\n  closeImagePopup = () => {\n    this.setState({isImagePopupOpen: false});\n  };\n\n  onCreateFileToggle = (fileType) => {\n    this.setState({\n      isCreateFileDialogShow: !this.state.isCreateFileDialogShow,\n      fileType: fileType || ''\n    });\n  };\n\n  onCreateFolderToggle = () => {\n    this.setState({isCreateFolderDialogShow: !this.state.isCreateFolderDialogShow});\n  };\n\n  onAddFolder = (dirPath) => {\n    this.setState({isCreateFolderDialogShow: false});\n    this.props.onAddFolder(dirPath);\n  };\n\n  checkDuplicatedName = (newName) => {\n    let direntList = this.props.direntList;\n    let isDuplicated = direntList.some(object => {\n      return object.name === newName;\n    });\n    return isDuplicated;\n  };\n\n  onMoveToggle = () => {\n    this.setState({isMoveDialogShow: !this.state.isMoveDialogShow});\n  };\n\n  onCopyToggle = () => {\n    this.setState({isCopyDialogShow: !this.state.isCopyDialogShow});\n  };\n\n  onItemsDownload = () => {\n    let { path, repoID, selectedDirentList } = this.props;\n    if (selectedDirentList.length) {\n      if (selectedDirentList.length === 1 && !selectedDirentList[0].isDir()) {\n        let direntPath = Utils.joinPath(path, selectedDirentList[0].name);\n        let url = URLDecorator.getUrl({type: 'download_file_url', repoID: repoID, filePath: direntPath});\n        location.href= url;\n        return;\n      }\n\n      let selectedDirentNames = selectedDirentList.map(dirent => {\n        return dirent.name;\n      });\n\n      this.setState({\n        isProgressDialogShow: true,\n        downloadItems: selectedDirentNames\n      });\n    }\n  };\n\n  onCloseZipDownloadDialog = () => {\n    this.setState({isProgressDialogShow: false});\n  };\n\n  // common contextmenu handle\n  onMouseDown = (event) => {\n    event.stopPropagation();\n    if (event.button === 2) {\n      return;\n    }\n  };\n\n  handleContextClick = (event, id, menuList, currentObject = null) => {\n    event.preventDefault();\n    event.stopPropagation();\n\n    let x = event.clientX || (event.touches && event.touches[0].pageX);\n    let y = event.clientY || (event.touches && event.touches[0].pageY);\n\n    if (this.props.posX) {\n      x -= this.props.posX;\n    }\n    if (this.props.posY) {\n      y -= this.props.posY;\n    }\n\n    hideMenu();\n\n    let showMenuConfig = {\n      id: id,\n      position: { x, y },\n      target: event.target,\n      currentObject: currentObject,\n      menuList: menuList,\n    };\n\n    if (menuList.length === 0) {\n      return;\n    }\n\n    showMenu(showMenuConfig);\n  };\n\n  // table-container contextmenu handle\n  onContainerClick = () => {\n    hideMenu();\n    if (this.state.activeDirent) {\n      this.onDirentClick(null);\n    }\n  };\n\n  onContainerMouseDown = (event) => {\n    this.onMouseDown(event);\n  };\n\n  onContainerContextMenu = (event) => {\n    event.preventDefault();\n    // Display menu items based on the permissions of the current path\n    let permission = this.props.userPerm;\n\n    const { isCustomPermission, customPermission } = Utils.getUserPermission(this.props.userPerm);\n    if (permission !== 'admin' && permission !== 'rw' && !isCustomPermission) {\n      return;\n    }\n\n    const {\n      NEW_FOLDER, NEW_FILE,\n      NEW_MARKDOWN_FILE,\n      NEW_EXCEL_FILE,\n      NEW_POWERPOINT_FILE,\n      NEW_WORD_FILE,\n      NEW_SEADOC_FILE\n    } = TextTranslation;\n\n    const direntsContainerMenuList = [\n      NEW_FOLDER, NEW_FILE, 'Divider',\n      NEW_MARKDOWN_FILE,\n      NEW_EXCEL_FILE,\n      NEW_POWERPOINT_FILE,\n      NEW_WORD_FILE\n    ];\n    if (enableSeadoc) {\n      direntsContainerMenuList.push(NEW_SEADOC_FILE);\n    }\n\n    if (this.props.selectedDirentList.length === 0) {\n      let id = 'dirent-container-menu';\n\n      // custom permission judgement\n      if (isCustomPermission) {\n        const { create: canCreate } = customPermission.permission;\n        if (!canCreate) return;\n      }\n\n      let menuList = direntsContainerMenuList;\n      this.handleContextClick(event, id, menuList);\n    } else {\n      if (this.props.selectedDirentList.length === 1) {\n        if (!this.state.activeDirent) {\n          let id = 'dirent-item-menu';\n          let dirent = this.props.selectedDirentList[0];\n          let menuList = this.getDirentItemMenuList(dirent, true);\n          this.handleContextClick(event, id, menuList, dirent);\n        } else {\n          this.onDirentClick(null);\n          event.preventDefault();\n          event.persist();\n\n          // custom permission judgement\n          if (isCustomPermission) {\n            const { modify } = customPermission.permission;\n            if (!modify) return;\n          }\n\n          setTimeout(() => {\n            let id = 'dirent-container-menu';\n\n            let menuList = direntsContainerMenuList;\n            this.handleContextClick(event, id, menuList);\n          }, 0);\n        }\n      } else {\n        let id = 'dirents-menu';\n        let menuList = [];\n        if (isCustomPermission) {\n          const { modify: canModify, copy: canCopy, download: canDownload, delete: canDelete } = customPermission.permission;\n          canModify && menuList.push(TextTranslation.MOVE);\n          canCopy && menuList.push(TextTranslation.COPY);\n          canDownload && menuList.push(TextTranslation.DOWNLOAD);\n          canDelete && menuList.push(TextTranslation.DELETE);\n        } else {\n          menuList = [TextTranslation.MOVE, TextTranslation.COPY, TextTranslation.DOWNLOAD, TextTranslation.DELETE];\n        }\n\n        this.handleContextClick(event, id, menuList);\n      }\n    }\n  };\n\n  onContainerMenuItemClick = (operation) => {\n    switch(operation) {\n      case 'New Folder':\n        this.onCreateFolderToggle();\n        break;\n      case 'New File':\n        this.onCreateFileToggle();\n        break;\n      case 'New Markdown File':\n        this.onCreateFileToggle('.md');\n        break;\n      case 'New Excel File':\n        this.onCreateFileToggle('.xlsx');\n        break;\n      case 'New PowerPoint File':\n        this.onCreateFileToggle('.pptx');\n        break;\n      case 'New Word File':\n        this.onCreateFileToggle('.docx');\n        break;\n      case 'New SeaDoc File':\n        this.onCreateFileToggle('.sdoc');\n        break;\n      default:\n        break;\n    }\n\n    hideMenu();\n  };\n\n  onDirentsMenuItemClick = (operation) => {\n    switch(operation) {\n      case 'Move':\n        this.onMoveToggle();\n        break;\n      case 'Copy':\n        this.onCopyToggle();\n        break;\n      case 'Download':\n        this.onItemsDownload();\n        break;\n      case 'Delete':\n        this.props.onItemsDelete();\n        break;\n      default:\n        break;\n    }\n\n    hideMenu();\n  };\n\n  // table-thread contextmenu handle -- Shield event\n  onThreadMouseDown = (event) => {\n    this.onMouseDown(event);\n  };\n\n  onThreadContextMenu = (event) => {\n    event.stopPropagation();\n  };\n\n  // table-dirent-item contextmenu handle\n  onItemMouseDown = (event) => {\n    this.onMouseDown(event);\n  };\n\n  onItemContextMenu = (event, dirent) => {\n    // Display menu items according to the current dirent permission\n    if (this.props.selectedDirentList.length > 1) {\n      return;\n    }\n    this.onDirentClick(dirent);\n    let id = 'dirent-item-menu';\n    let menuList = this.getDirentItemMenuList(dirent, true);\n    this.handleContextClick(event, id, menuList, dirent);\n  };\n\n  setDirentItemRef = (index) => item => {\n    this.direntItems[index] = item;\n  };\n\n  onMenuItemClick = (operation, currentObject, event) => {\n    let index = this.getDirentIndex(currentObject);\n    this.direntItems[index].onMenuItemClick(operation, event);\n\n    hideMenu();\n  };\n\n  onShowMenu = (e) => {\n    this.freezeItem();\n  };\n\n  onHideMenu = (e) => {\n    this.unfreezeItem();\n  };\n\n  // contextmenu utils\n  getDirentIndex = (dirent) => {\n    let direntList = this.props.direntList;\n    let index = 0;\n    for (let i = 0; i < direntList.length; i++) {\n      if (direntList[i].name === dirent.name) {\n        index = i;\n        break;\n      }\n    }\n    return index;\n  };\n\n  getDirentItemMenuList = (dirent, isContextmenu) => {\n    const isRepoOwner = this.isRepoOwner;\n    const currentRepoInfo = this.props.currentRepoInfo;\n    return Utils.getDirentOperationList(isRepoOwner, currentRepoInfo, dirent, isContextmenu);\n  };\n\n  onTableDragEnter = (e) => {\n    if (Utils.isIEBrower() || !this.canDrop) {\n      return false;\n    }\n    this.enteredCounter++;\n    if (this.enteredCounter !== 0) {\n      if (this.state.isListDropTipShow) {\n        return ;\n      }\n      this.setState({isListDropTipShow: true});\n    }\n  };\n\n  onTableDragOver = (e) => {\n    if (Utils.isIEBrower() || !this.canDrop) {\n      return false;\n    }\n    if (e.dataTransfer.dropEffect === 'copy') {\n      return;\n    }\n    e.preventDefault();\n    e.dataTransfer.dropEffect = 'move';\n  };\n\n  onTableDragLeave = (e) => {\n    if (Utils.isIEBrower() || !this.canDrop) {\n      return false;\n    }\n    this.enteredCounter--;\n    if (this.enteredCounter === 0) {\n      this.setState({isListDropTipShow: false});\n    }\n  };\n\n  tableDrop = (e) => {\n    if (Utils.isIEBrower() || !this.canDrop) {\n      return false;\n    }\n    e.persist();\n    this.enteredCounter = 0;\n    this.setState({isListDropTipShow: false});\n    if (e.dataTransfer.files.length) { // uploaded files\n      return;\n    }\n    let dragStartItemData = e.dataTransfer.getData('applicaiton/drag-item-info');\n    dragStartItemData = JSON.parse(dragStartItemData);\n\n    let {nodeDirent, nodeParentPath, nodeRootPath} = dragStartItemData;\n\n    if (Array.isArray(dragStartItemData)) { //selected items\n      return;\n    }\n\n    if (nodeRootPath === this.props.path || nodeParentPath === this.props.path) {\n      return;\n    }\n\n    if (this.props.path.indexOf(nodeRootPath) !== -1) {\n      return;\n    }\n\n    this.props.onItemMove(this.props.currentRepoInfo, nodeDirent, this.props.path, nodeParentPath);\n  };\n\n  onShowDirentsDraggablePreview = () => {\n    this.setState({\n      isShowDirentsDraggablePreview: true,\n    });\n  };\n\n  onHideDirentsDraggablePreview = () => {\n    this.setState({\n      isShowDirentsDraggablePreview: false\n    });\n  };\n\n  render() {\n    const { direntList, sortBy, sortOrder } = this.props;\n\n    if (this.props.isDirentListLoading) {\n      return (<Loading />);\n    }\n\n    // sort\n    const sortByName = sortBy == 'name';\n    const sortByTime = sortBy == 'time';\n    const sortBySize = sortBy == 'size';\n    const sortIcon = sortOrder == 'asc' ? <span className=\"fas fa-caret-up\"></span> : <span className=\"fas fa-caret-down\"></span>;\n\n    const isDesktop = Utils.isDesktop();\n\n    return (\n      <div\n        className={`table-container ${(this.state.isListDropTipShow && this.canDrop) ? 'table-drop-active' : ''}`}\n        onMouseDown={this.onContainerMouseDown}\n        onContextMenu={this.onContainerContextMenu}\n        onClick={this.onContainerClick}\n        onDragEnter={this.onTableDragEnter}\n        onDragOver={this.onTableDragOver}\n        onDragLeave={this.onTableDragLeave}\n        onDrop={this.tableDrop}\n      >\n        <table className={`table-hover ${isDesktop ? '': 'table-thead-hidden'}`}>\n          {isDesktop ? (\n            <thead onMouseDown={this.onThreadMouseDown} onContextMenu={this.onThreadContextMenu}>\n              <tr>\n                <th width=\"3%\" className=\"pl10\">\n                  <input type=\"checkbox\" className=\"vam\" onChange={this.props.onAllItemSelected} checked={this.props.isAllItemSelected} />\n                </th>\n                <th width=\"3%\" className=\"pl10\">{/*icon */}</th>\n                <th width=\"5%\" className=\"pl10\">{/*star */}</th>\n                <th width=\"39%\"><a className=\"d-block table-sort-op\" href=\"#\" onClick={this.sortByName}>{gettext('Name')} {sortByName && sortIcon}</a></th>\n                <th width=\"6%\">{/*tag */}</th>\n                <th width=\"18%\">{/*operation */}</th>\n                <th width=\"11%\"><a className=\"d-block table-sort-op\" href=\"#\" onClick={this.sortBySize}>{gettext('Size')} {sortBySize && sortIcon}</a></th>\n                <th width=\"15%\"><a className=\"d-block table-sort-op\" href=\"#\" onClick={this.sortByTime}>{gettext('Last Update')} {sortByTime && sortIcon}</a></th>\n              </tr>\n            </thead>\n          ) : (\n            <thead>\n              <tr>\n                <th width=\"12%\"></th>\n                <th width=\"80%\"></th>\n                <th width=\"8%\"></th>\n              </tr>\n            </thead>\n          )}\n          <tbody>\n            {direntList.map((dirent, index) => {\n              return (\n                <DirentListItem\n                  ref={this.setDirentItemRef(index)}\n                  key={index}\n                  dirent={dirent}\n                  path={this.props.path}\n                  repoID={this.props.repoID}\n                  currentRepoInfo={this.props.currentRepoInfo}\n                  isAdmin={this.isAdmin}\n                  isRepoOwner={this.isRepoOwner}\n                  repoEncrypted={this.repoEncrypted}\n                  enableDirPrivateShare={this.props.enableDirPrivateShare}\n                  isGroupOwnedRepo={this.props.isGroupOwnedRepo}\n                  onItemClick={this.props.onItemClick}\n                  onItemRenameToggle={this.onItemRenameToggle}\n                  onItemSelected={this.onItemSelected}\n                  onItemDelete={this.props.onItemDelete}\n                  onItemRename={this.onItemRename}\n                  onItemMove={this.props.onItemMove}\n                  onItemCopy={this.props.onItemCopy}\n                  onItemConvert={this.props.onItemConvert}\n                  updateDirent={this.props.updateDirent}\n                  isItemFreezed={this.state.isItemFreezed}\n                  freezeItem={this.freezeItem}\n                  unfreezeItem={this.unfreezeItem}\n                  onDirentClick={this.onDirentClick}\n                  showImagePopup={this.showImagePopup}\n                  onItemMouseDown={this.onItemMouseDown}\n                  onItemContextMenu={this.onItemContextMenu}\n                  selectedDirentList={this.props.selectedDirentList}\n                  activeDirent={this.state.activeDirent}\n                  onFileTagChanged={this.props.onFileTagChanged}\n                  getDirentItemMenuList={this.getDirentItemMenuList}\n                  showDirentDetail={this.props.showDirentDetail}\n                  onItemsMove={this.props.onItemsMove}\n                  onShowDirentsDraggablePreview={this.onShowDirentsDraggablePreview}\n                  loadDirentList={this.props.loadDirentList}\n                />\n              );\n            })}\n          </tbody>\n        </table>\n        <Fragment>\n          <ContextMenu\n            id={'dirent-container-menu'}\n            onMenuItemClick={this.onContainerMenuItemClick}\n          />\n          <ContextMenu\n            id={'dirent-item-menu'}\n            onMenuItemClick={this.onMenuItemClick}\n            onShowMenu={this.onShowMenu}\n            onHideMenu={this.onHideMenu}\n          />\n          <ContextMenu\n            id={'dirents-menu'}\n            onMenuItemClick={this.onDirentsMenuItemClick}\n          />\n          {this.state.isShowDirentsDraggablePreview &&\n            <ModalPortal>\n              <DirentsDraggedPreview\n                selectedDirentList={this.props.selectedDirentList}\n                onHideDirentsDraggablePreview={this.onHideDirentsDraggablePreview}\n                dragStartPosition={this.state.dragStartPosition}\n              />\n            </ModalPortal>\n          }\n          {this.state.isImagePopupOpen && (\n            <ModalPortal>\n              <ImageDialog\n                imageItems={this.state.imageItems}\n                imageIndex={this.state.imageIndex}\n                closeImagePopup={this.closeImagePopup}\n                moveToPrevImage={this.moveToPrevImage}\n                moveToNextImage={this.moveToNextImage}\n              />\n            </ModalPortal>\n          )}\n          {this.state.isCreateFolderDialogShow && (\n            <ModalPortal>\n              <CreateFolder\n                parentPath={this.props.path}\n                onAddFolder={this.onAddFolder}\n                checkDuplicatedName={this.checkDuplicatedName}\n                addFolderCancel={this.onCreateFolderToggle}\n              />\n            </ModalPortal>\n          )}\n          {this.state.isCreateFileDialogShow && (\n            <ModalPortal>\n              <CreateFile\n                parentPath={this.props.path}\n                fileType={this.state.fileType}\n                onAddFile={this.props.onAddFile}\n                checkDuplicatedName={this.checkDuplicatedName}\n                toggleDialog={this.onCreateFileToggle}\n              />\n            </ModalPortal>\n          )}\n          {this.state.isMoveDialogShow &&\n            <MoveDirentDialog\n              path={this.props.path}\n              repoID={this.props.repoID}\n              repoEncrypted={this.props.currentRepoInfo.encrypted}\n              isMutipleOperation={this.state.isMutipleOperation}\n              selectedDirentList={this.props.selectedDirentList}\n              onItemsMove={this.props.onItemsMove}\n              onCancelMove={this.onMoveToggle}\n            />\n          }\n          {this.state.isCopyDialogShow &&\n            <CopyDirentDialog\n              path={this.props.path}\n              repoID={this.props.repoID}\n              repoEncrypted={this.props.currentRepoInfo.encrypted}\n              selectedDirentList={this.props.selectedDirentList}\n              isMutipleOperation={this.state.isMutipleOperation}\n              onItemsCopy={this.props.onItemsCopy}\n              onCancelCopy={this.onCopyToggle}\n            />\n          }\n          {this.state.isProgressDialogShow &&\n            <ZipDownloadDialog\n              repoID={this.props.repoID}\n              path={this.props.path}\n              target={this.state.downloadItems}\n              toggleDialog={this.onCloseZipDownloadDialog}\n            />\n          }\n        </Fragment>\n      </div>\n    );\n  }\n}\n\nDirentListView.propTypes = propTypes;\n\nexport default DirentListView;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport DirentNoneView from '../../components/dirent-list-view/dirent-none-view';\nimport RepoInfoBar from '../../components/repo-info-bar';\nimport DirentListView from '../../components/dirent-list-view/dirent-list-view';\n\nconst propTypes = {\n  path: PropTypes.string.isRequired,\n  repoID: PropTypes.string.isRequired,\n  currentRepoInfo: PropTypes.object.isRequired,\n  isGroupOwnedRepo: PropTypes.bool.isRequired,\n  userPerm: PropTypes.string,\n  enableDirPrivateShare: PropTypes.bool.isRequired,\n  isRepoInfoBarShow: PropTypes.bool.isRequired,\n  usedRepoTags: PropTypes.array.isRequired,\n  draftCounts: PropTypes.number,\n  updateUsedRepoTags: PropTypes.func.isRequired,\n  isDirentListLoading: PropTypes.bool.isRequired,\n  direntList: PropTypes.array.isRequired,\n  sortBy: PropTypes.string.isRequired,\n  sortOrder: PropTypes.string.isRequired,\n  sortItems: PropTypes.func.isRequired,\n  onAddFolder: PropTypes.func.isRequired,\n  onAddFile: PropTypes.func.isRequired,\n  onItemClick: PropTypes.func.isRequired,\n  onItemSelected: PropTypes.func.isRequired,\n  onItemDelete: PropTypes.func.isRequired,\n  onItemRename: PropTypes.func.isRequired,\n  onItemMove: PropTypes.func.isRequired,\n  onItemCopy: PropTypes.func.isRequired,\n  onDirentClick: PropTypes.func.isRequired,\n  updateDirent: PropTypes.func.isRequired,\n  isAllItemSelected: PropTypes.bool.isRequired,\n  onAllItemSelected: PropTypes.func.isRequired,\n  selectedDirentList: PropTypes.array.isRequired,\n  onItemsMove: PropTypes.func.isRequired,\n  onItemsCopy: PropTypes.func.isRequired,\n  onItemConvert: PropTypes.func.isRequired,\n  onItemsDelete: PropTypes.func.isRequired,\n  onFileTagChanged: PropTypes.func,\n  showDirentDetail: PropTypes.func.isRequired,\n  loadDirentList: PropTypes.func,\n  fullDirentList: PropTypes.array,\n};\n\nclass DirListView extends React.Component {\n\n  render() {\n\n    if (this.props.path === '/' && this.props.direntList.length === 0) {\n      return (\n        <DirentNoneView\n          path={this.props.path}\n          isDirentListLoading={this.props.isDirentListLoading}\n          onAddFile={this.props.onAddFile}\n        />\n      );\n    }\n\n    return (\n      <Fragment>\n        {this.props.isRepoInfoBarShow && (\n          <RepoInfoBar\n            repoID={this.props.repoID}\n            currentPath={this.props.path}\n            draftCounts={this.props.draftCounts}\n            usedRepoTags={this.props.usedRepoTags}\n            updateUsedRepoTags={this.props.updateUsedRepoTags}\n            onFileTagChanged={this.props.onFileTagChanged}\n          />\n        )}\n        <DirentListView\n          path={this.props.path}\n          currentRepoInfo={this.props.currentRepoInfo}\n          repoID={this.props.repoID}\n          isGroupOwnedRepo={this.props.isGroupOwnedRepo}\n          userPerm={this.props.userPerm}\n          enableDirPrivateShare={this.props.enableDirPrivateShare}\n          direntList={this.props.direntList}\n          fullDirentList={this.props.fullDirentList}\n          sortBy={this.props.sortBy}\n          sortOrder={this.props.sortOrder}\n          sortItems={this.props.sortItems}\n          onItemClick={this.props.onItemClick}\n          onItemSelected={this.props.onItemSelected}\n          onItemDelete={this.props.onItemDelete}\n          onItemRename={this.props.onItemRename}\n          onItemMove={this.props.onItemMove}\n          onItemCopy={this.props.onItemCopy}\n          onDirentClick={this.props.onDirentClick}\n          isDirentListLoading={this.props.isDirentListLoading}\n          updateDirent={this.props.updateDirent}\n          isAllItemSelected={this.props.isAllItemSelected}\n          onAllItemSelected={this.props.onAllItemSelected}\n          selectedDirentList={this.props.selectedDirentList}\n          onItemsMove={this.props.onItemsMove}\n          onItemsCopy={this.props.onItemsCopy}\n          onItemConvert={this.props.onItemConvert}\n          onItemsDelete={this.props.onItemsDelete}\n          onAddFile={this.props.onAddFile}\n          onAddFolder={this.props.onAddFolder}\n          onFileTagChanged={this.props.onFileTagChanged}\n          showDirentDetail={this.props.showDirentDetail}\n          loadDirentList={this.props.loadDirentList}\n        />\n      </Fragment>\n    );\n  }\n}\n\nDirListView.propTypes = propTypes;\n\nexport default DirListView;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport MD5 from 'MD5';\nimport { UncontrolledTooltip } from 'reactstrap';\nimport { gettext, siteRoot, mediaUrl } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\n\nconst propTypes = {\n  path: PropTypes.string.isRequired,\n  repoID: PropTypes.string.isRequired,\n  dirent: PropTypes.object.isRequired,\n  onItemClick: PropTypes.func.isRequired,\n  showImagePopup: PropTypes.func.isRequired,\n  onGridItemContextMenu: PropTypes.func.isRequired,\n  onGridItemClick: PropTypes.func.isRequired,\n  activeDirent: PropTypes.object,\n  onGridItemMouseDown: PropTypes.func,\n  currentRepoInfo: PropTypes.object,\n  onItemMove: PropTypes.func.isRequired,\n};\n\nclass DirentGridItem extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isGridSelected: false,\n      isGridDropTipShow: false,\n    };\n\n    const { dirent } = this.props;\n    const { isCustomPermission, customPermission } = Utils.getUserPermission(dirent.permission);\n    this.isCustomPermission = isCustomPermission;\n    this.customPermission = customPermission;\n    this.canPreview = true;\n    this.canDrag = dirent.permission === 'rw';\n    if (isCustomPermission) {\n      const { preview, modify } = customPermission.permission;\n      this.canPreview = preview || modify;\n      this.canDrag = modify;\n    }\n\n  }\n\n  componentWillReceiveProps(nextProps) {\n    this.setState({isGridSelected: false}, () => {\n      if (nextProps.activeDirent && nextProps.activeDirent.name === nextProps.dirent.name) {\n        this.setState({isGridSelected: true});\n      }\n    });\n  }\n\n  onItemMove = (destRepo, dirent, selectedPath, currentPath) => {\n    this.props.onItemMove(destRepo, dirent, selectedPath, currentPath);\n  };\n\n  onItemClick = (e) => {\n    e.preventDefault();\n    e.stopPropagation();\n\n    const { dirent, activeDirent } = this.props;\n    if (dirent.isDir()) {\n      this.props.onItemClick(dirent);\n      return;\n    }\n\n    // is have preview permission\n    if (!this.canPreview) {\n      return;\n    }\n\n    if (dirent === activeDirent) {\n      this.setState({isGridSelected: false});\n      if (Utils.imageCheck(dirent.name)) {\n        this.props.showImagePopup(dirent);\n      } else {\n        this.props.onItemClick(dirent);\n      }\n    } else {\n      this.setState({isGridSelected: false});\n      this.props.onGridItemClick(this.props.dirent);\n    }\n  };\n\n  onItemLinkClick = (e) => {\n    e.preventDefault();\n    const dirent = this.props.dirent;\n\n    if (dirent.isDir()) {\n      this.props.onItemClick(dirent);\n      return;\n    }\n\n    // is have preview permission\n    if (!this.canPreview) {\n      return;\n    }\n\n    if (Utils.imageCheck(dirent.name)) {\n      this.props.showImagePopup(dirent);\n    } else {\n      this.props.onItemClick(dirent);\n    }\n  };\n\n  onGridItemDragStart = (e) => {\n    if (Utils.isIEBrower() || !this.canDrag) {\n      return false;\n    }\n    let dragStartItemData = {nodeDirent: this.props.dirent, nodeParentPath: this.props.path};\n    dragStartItemData = JSON.stringify(dragStartItemData);\n\n    e.dataTransfer.effectAllowed = 'move';\n    e.dataTransfer.setData('applicaiton/drag-item-info', dragStartItemData);\n  };\n\n  onGridItemDragEnter = (e) => {\n    if (Utils.isIEBrower() || !this.canDrag) {\n      return false;\n    }\n    if (this.props.dirent.type === 'dir') {\n      this.setState({isGridDropTipShow: true});\n    }\n  };\n\n  onGridItemDragOver = (e) => {\n    if (Utils.isIEBrower() || !this.canDrag) {\n      return false;\n    }\n    e.preventDefault();\n    e.dataTransfer.dropEffect = 'move';\n  };\n\n  onGridItemDragLeave = (e) => {\n    if (Utils.isIEBrower() || !this.canDrag) {\n      return false;\n    }\n    this.setState({isGridDropTipShow: false});\n  };\n\n  onGridItemDragDrop = (e) => {\n    if (Utils.isIEBrower() || !this.canDrag) {\n      return false;\n    }\n    this.setState({isGridDropTipShow: false});\n    if (e.dataTransfer.files.length) { // uploaded files\n      return;\n    }\n    let dragStartItemData = e.dataTransfer.getData('applicaiton/drag-item-info');\n    dragStartItemData = JSON.parse(dragStartItemData);\n    let {nodeDirent, nodeParentPath} = dragStartItemData;\n    let dropItemData = this.props.dirent;\n\n    if (nodeDirent.name === dropItemData.name) {\n      return;\n    }\n\n    if (dropItemData.type !== 'dir') {\n      return;\n    }\n\n    let selectedPath = Utils.joinPath(this.props.path, this.props.dirent.name);\n    this.onItemMove(this.props.currentRepoInfo, nodeDirent, selectedPath, nodeParentPath);\n  };\n\n  onGridItemMouseDown = (event) =>{\n    this.props.onGridItemMouseDown(event);\n  };\n\n  getFileUrl = (url) => {\n    let fileUrlArr = url.split('/');\n    if (fileUrlArr.indexOf('48') !== -1) {\n      fileUrlArr.splice(fileUrlArr.indexOf('48'), 1, '192');\n    }\n    let fileUrl = fileUrlArr.join('/');\n    return fileUrl;\n  };\n\n  onGridItemContextMenu = (event) => {\n    let dirent = this.props.dirent;\n    this.props.onGridItemContextMenu(event, dirent);\n  };\n\n  render() {\n    let { dirent, path } = this.props;\n    let direntPath = Utils.joinPath(path, dirent.name);\n    let iconUrl = Utils.getDirentIcon(dirent, true);\n    let fileUrl = dirent.encoded_thumbnail_src ? this.getFileUrl(dirent.encoded_thumbnail_src) : '';\n\n    let toolTipID = '';\n    let tagTitle = '';\n    if (dirent.file_tags && dirent.file_tags.length > 0) {\n      toolTipID = MD5(dirent.name).slice(0, 7);\n      tagTitle = dirent.file_tags.map(item => item.name).join(' ');\n    }\n\n    let dirHref = '';\n    if (this.props.currentRepoInfo) {\n      dirHref = siteRoot + 'library/' + this.props.repoID + '/' + this.props.currentRepoInfo.repo_name + Utils.encodePath(direntPath);\n    }\n    let fileHref = siteRoot + 'lib/' + this.props.repoID + '/file' + Utils.encodePath(direntPath);\n    if (dirent.is_sdoc_revision && dirent.revision_id) {\n      fileHref = siteRoot + 'lib/' + this.props.repoID + '/revisions/' + dirent.revision_id + '/';\n    }\n\n    let gridClass = 'grid-file-img-link cursor-pointer';\n    gridClass += this.state.isGridSelected ? ' grid-selected-active' : ' ';\n    gridClass += this.state.isGridDropTipShow ? ' grid-drop-show' : ' ';\n\n    let lockedInfo = gettext('locked by {name}');\n    lockedInfo = lockedInfo.replace('{name}', dirent.lock_owner_name);\n\n    return (\n      <Fragment>\n        <li className=\"grid-item\" onContextMenu={this.onGridItemContextMenu} onMouseDown={this.onGridItemMouseDown}>\n          <div\n            className={gridClass}\n            draggable={this.canDrag}\n            onClick={this.onItemClick}\n            onDragStart={this.onGridItemDragStart}\n            onDragEnter={this.onGridItemDragEnter}\n            onDragOver={this.onGridItemDragOver}\n            onDragLeave={this.onGridItemDragLeave}\n            onDrop={this.onGridItemDragDrop}\n          >\n            {(this.canPreview && dirent.encoded_thumbnail_src) ?\n              <img src={`${siteRoot}${fileUrl}`} ref={this.gridIcon} className=\"thumbnail\" onClick={this.onItemClick} alt=\"\"/> :\n              <img src={iconUrl} ref={this.gridIcon} width=\"96\" alt='' />\n            }\n            {dirent.is_locked && <img className=\"grid-file-locked-icon\" src={mediaUrl + 'img/file-locked-32.png'} alt={gettext('locked')} title={lockedInfo}/>}\n          </div>\n          <div className=\"grid-file-name\" onDragStart={this.onGridItemDragStart} draggable={this.canDrag} >\n            {(dirent.type !== 'dir' && dirent.file_tags && dirent.file_tags.length > 0) && (\n              <Fragment>\n                <div id={`tag-list-title-${toolTipID}`} className=\"dirent-item tag-list tag-list-stacked d-inline-block align-middle\">\n                  {dirent.file_tags.map((fileTag, index) => {\n                    let length = dirent.file_tags.length;\n                    return (\n                      <span className=\"file-tag\" key={fileTag.id} style={{zIndex:length - index, backgroundColor:fileTag.color}}></span>\n                    );\n                  })}\n                </div>\n                <UncontrolledTooltip target={`tag-list-title-${toolTipID}`} placement=\"bottom\">\n                  {tagTitle}\n                </UncontrolledTooltip>\n              </Fragment>\n            )}\n            {(!dirent.isDir() && !this.canPreview) ?\n              <a className={`sf-link grid-file-name-link ${this.state.isGridSelected ? 'grid-link-selected-active' : ''}`} onClick={this.onItemLinkClick}>{dirent.name}</a> :\n              <a className={`grid-file-name-link ${this.state.isGridSelected ? 'grid-link-selected-active' : ''}`} href={dirent.type === 'dir' ? dirHref : fileHref} onClick={this.onItemLinkClick}>{dirent.name}</a>\n            }\n          </div>\n        </li>\n      </Fragment>\n    );\n  }\n}\n\nDirentGridItem.propTypes = propTypes;\nexport default DirentGridItem;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { siteRoot, username, enableSeadoc } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport URLDecorator from '../../utils/url-decorator';\nimport Loading from '../loading';\nimport ModalPortal from '../modal-portal';\nimport ImageDialog from '../../components/dialog/image-dialog';\nimport DirentGridItem from '../../components/dirent-grid-view/dirent-grid-item';\nimport ContextMenu from '../context-menu/context-menu';\nimport { hideMenu, showMenu } from '../context-menu/actions';\nimport TextTranslation from '../../utils/text-translation';\nimport MoveDirentDialog from '../dialog/move-dirent-dialog';\nimport CopyDirentDialog from '../dialog/copy-dirent-dialog';\nimport ShareDialog from '../dialog/share-dialog';\nimport ZipDownloadDialog from '../dialog/zip-download-dialog';\nimport EditFileTagDialog from '../dialog/edit-filetag-dialog';\nimport Rename from '../../components/dialog/rename-dirent';\nimport CreateFile from '../dialog/create-file-dialog';\nimport CreateFolder from '../dialog/create-folder-dialog';\nimport LibSubFolderPermissionDialog from '../dialog/lib-sub-folder-permission-dialog';\nimport toaster from '../toast';\n\nimport '../../css/grid-view.css';\n\nconst propTypes = {\n  path: PropTypes.string.isRequired,\n  repoID: PropTypes.string.isRequired,\n  currentRepoInfo: PropTypes.object,\n  direntList: PropTypes.array.isRequired,\n  fullDirentList: PropTypes.array,\n  onAddFile: PropTypes.func,\n  onItemDelete: PropTypes.func,\n  onItemCopy: PropTypes.func.isRequired,\n  onItemConvert: PropTypes.func.isRequired,\n  onItemMove: PropTypes.func.isRequired,\n  onRenameNode: PropTypes.func.isRequired,\n  onItemClick: PropTypes.func.isRequired,\n  isDirentListLoading: PropTypes.bool.isRequired,\n  isGroupOwnedRepo: PropTypes.bool.isRequired,\n  userPerm: PropTypes.string, // current path's user permission\n  enableDirPrivateShare: PropTypes.bool.isRequired,\n  updateDirent: PropTypes.func.isRequired,\n  isDirentDetailShow: PropTypes.bool.isRequired,\n  onGridItemClick: PropTypes.func,\n  onFileTagChanged: PropTypes.func,\n  onAddFolder: PropTypes.func.isRequired,\n  showDirentDetail: PropTypes.func.isRequired,\n  onItemRename: PropTypes.func.isRequired,\n  posX: PropTypes.number,\n  posY: PropTypes.number,\n};\n\nclass DirentGridView extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      isImagePopupOpen: false,\n      imageItems: [],\n      imageIndex: 0,\n      // onmenuClick\n      isShareDialogShow: false,\n      isMoveDialogShow: false,\n      isCopyDialogShow: false,\n      isEditFileTagShow: false,\n      isZipDialogOpen: false,\n      isRenameDialogShow: false,\n      isCreateFolderDialogShow: false,\n      isCreateFileDialogShow: false,\n      fileType: '',\n      isPermissionDialogOpen: false,\n\n      isMutipleOperation: false,\n      isGridItemFreezed: false,\n      activeDirent: null,\n    };\n    this.isRepoOwner = props.currentRepoInfo.owner_email === username;\n  }\n\n  onCreateFileToggle = (fileType) => {\n    this.setState({\n      isCreateFileDialogShow: !this.state.isCreateFileDialogShow,\n      fileType: fileType || ''\n    });\n  };\n\n  onGridItemClick = (dirent) => {\n    hideMenu();\n    this.setState({activeDirent: dirent});\n    this.props.onGridItemClick(dirent);\n  };\n\n  onMoveToggle = () => {\n    this.setState({isMoveDialogShow: !this.state.isMoveDialogShow});\n  };\n\n  onCopyToggle = () => {\n    this.setState({isCopyDialogShow: !this.state.isCopyDialogShow});\n  };\n\n  onAddFolder = (dirPath) => {\n    this.setState({isCreateFolderDialogShow: false});\n    this.props.onAddFolder(dirPath);\n  };\n\n  onItemShare = (e) => {\n    e.nativeEvent.stopImmediatePropagation(); //for document event\n    this.setState({isShareDialogShow: !this.state.isShareDialogShow});\n  };\n\n  closeSharedDialog = () => {\n    this.setState({isShareDialogShow: !this.state.isShareDialogShow});\n  };\n\n  onItemDelete = (currentObject, e) => {\n    e.nativeEvent.stopImmediatePropagation(); //for document event\n    this.props.onItemDelete(currentObject);\n  };\n\n  onItemConvert = (currentObject, e, dstType) => {\n    e.nativeEvent.stopImmediatePropagation(); //for document event\n    this.props.onItemConvert(currentObject, dstType);\n  };\n\n  onMenuItemClick = (operation, currentObject, event) => {\n    hideMenu();\n    switch(operation) {\n      case 'Download':\n        this.onItemDownload(currentObject, event);\n        break;\n      case 'Share':\n        this.onItemShare(event);\n        break;\n      case 'Delete':\n        this.onItemDelete(currentObject, event);\n        break;\n      case 'Rename':\n        this.onItemRenameToggle();\n        break;\n      case 'Move':\n        this.onItemMoveToggle();\n        break;\n      case 'Copy':\n        this.onItemCopyToggle();\n        break;\n      case 'Convert to Markdown':\n        this.onItemConvert(currentObject, event, 'markdown');\n        break;\n      case 'Convert to sdoc':\n        this.onItemConvert(currentObject, event, 'sdoc');\n        break;\n      case 'Tags':\n        this.onEditFileTagToggle();\n        break;\n      case 'Permission':\n        this.onPermissionItem();\n        break;\n      case 'Unlock':\n        this.onUnlockItem(currentObject);\n        break;\n      case 'Lock':\n        this.onLockItem(currentObject);\n        break;\n      case 'Mark as draft':\n        this.onMarkAsDraft(currentObject);\n        break;\n      case 'Unmark as draft':\n        this.onUnmarkAsDraft(currentObject);\n        break;\n      case 'History':\n        this.onHistory(currentObject);\n        break;\n      case 'New Folder':\n        this.onCreateFolderToggle(currentObject);\n        break;\n      case 'New File':\n        this.onCreateFileToggle('');\n        break;\n      case 'New Markdown File':\n        this.onCreateFileToggle('.md');\n        break;\n      case 'New Excel File':\n        this.onCreateFileToggle('.xlsx');\n        break;\n      case 'New PowerPoint File':\n        this.onCreateFileToggle('.pptx');\n        break;\n      case 'New Word File':\n        this.onCreateFileToggle('.docx');\n        break;\n      case 'New SeaDoc File':\n        this.onCreateFileToggle('.sdoc');\n        break;\n      case 'Access Log':\n        this.onAccessLog(currentObject);\n        break;\n      case 'Properties':\n        this.props.showDirentDetail('info');\n        break;\n      case 'Open via Client':\n        this.onOpenViaClient(currentObject);\n        break;\n      default:\n        break;\n    }\n  };\n\n  onEditFileTagToggle = () => {\n    this.setState({\n      isEditFileTagShow: !this.state.isEditFileTagShow\n    });\n  };\n\n  onFileTagChanged = () => {\n    let dirent = this.state.activeDirent ? this.state.activeDirent : '';\n    let direntPath = Utils.joinPath(this.props.path, dirent.name);\n    this.props.onFileTagChanged(dirent, direntPath);\n  };\n\n  getDirentPath = (dirent) => {\n    let path = this.props.path;\n    return path === '/' ? path + dirent.name : path + '/' + dirent.name;\n  };\n\n  closeZipDialog = () => {\n    this.setState({\n      isZipDialogOpen: false\n    });\n  };\n\n  onItemDownload = (currentObject, e) => {\n    e.nativeEvent.stopImmediatePropagation();\n    let dirent = currentObject;\n    let repoID = this.props.repoID;\n    let direntPath = this.getDirentPath(dirent);\n    if (dirent.type === 'dir') {\n      this.setState({\n        isZipDialogOpen: true\n      });\n    } else {\n      let url = URLDecorator.getUrl({type: 'download_file_url', repoID: repoID, filePath: direntPath});\n      location.href = url;\n    }\n  };\n\n  onCreateFolderToggle = () => {\n    this.setState({\n      isCreateFolderDialogShow: !this.state.isCreateFolderDialogShow,\n    });\n  };\n\n  onItemRenameToggle = () => {\n    this.setState({\n      isRenameDialogShow: !this.state.isRenameDialogShow,\n    });\n  };\n\n  onItemMoveToggle = () => {\n    this.setState({isMoveDialogShow: !this.state.isMoveDialogShow});\n  };\n\n  onItemCopyToggle = () => {\n    this.setState({isCopyDialogShow: !this.state.isCopyDialogShow});\n  };\n\n  onPermissionItem = () => {\n    this.setState({isPermissionDialogOpen: !this.state.isPermissionDialogOpen});\n  };\n\n  onLockItem = (currentObject) => {\n    let repoID = this.props.repoID;\n    let filePath = this.getDirentPath(currentObject);\n    seafileAPI.lockfile(repoID, filePath).then(() => {\n      this.props.updateDirent(currentObject, 'is_locked', true);\n      this.props.updateDirent(currentObject, 'locked_by_me', true);\n      let lockName = username.split('@');\n      this.props.updateDirent(currentObject, 'lock_owner_name', lockName[0]);\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  onUnlockItem = (currentObject) => {\n    let repoID = this.props.repoID;\n    let filePath = this.getDirentPath(currentObject);\n    seafileAPI.unlockfile(repoID, filePath).then(() => {\n      this.props.updateDirent(currentObject, 'is_locked', false);\n      this.props.updateDirent(currentObject, 'locked_by_me', false);\n      this.props.updateDirent(currentObject, 'lock_owner_name', '');\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  onMarkAsDraft = (currentObject) => {\n    let repoID = this.props.repoID;\n    let filePath = this.getDirentPath(currentObject);\n    seafileAPI.sdocMarkAsDraft(repoID, filePath).then((res) => {\n      this.props.updateDirent(currentObject, 'is_sdoc_draft', true);\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  onUnmarkAsDraft = (currentObject) => {\n    let repoID = this.props.repoID;\n    let filePath = this.getDirentPath(currentObject);\n    seafileAPI.sdocUnmarkAsDraft(repoID, filePath).then((res) => {\n      this.props.updateDirent(currentObject, 'is_sdoc_draft', false);\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  onHistory = (currentObject) => {\n    let repoID = this.props.repoID;\n    let filePath = this.getDirentPath(currentObject);\n    let url = URLDecorator.getUrl({type: 'file_revisions', repoID: repoID, filePath: filePath});\n    location.href = url;\n  };\n\n  onAccessLog = (currentObject) => {\n    let filePath = this.getDirentPath(currentObject);\n    let path = siteRoot + 'repo/file-access/' + this.props.repoID + '/?p=' + encodeURIComponent(filePath) ;\n    window.open(path);\n  };\n\n  onOpenViaClient = (currentObject) => {\n    let repoID = this.props.repoID;\n    let filePath = this.getDirentPath(currentObject);\n    let url = URLDecorator.getUrl({type: 'open_via_client', repoID: repoID, filePath: filePath});\n    location.href = url;\n  };\n\n  onItemRename = (newName) => {\n    this.props.onItemRename(this.state.activeDirent, newName);\n  };\n\n  prepareImageItem = (item) => {\n    const name = item.name;\n    const repoID = this.props.repoID;\n    const path = Utils.encodePath(Utils.joinPath(this.props.path, name));\n\n    const src = `${siteRoot}repo/${repoID}/raw${path}`;\n\n    return {\n      'name': name,\n      'url': `${siteRoot}lib/${repoID}/file${path}`,\n      'src': src\n    };\n  };\n\n  showImagePopup = (curItem) => {\n    let items = this.props.fullDirentList.filter((item) => {\n      return Utils.imageCheck(item.name);\n    });\n\n    const imageItems = items.map((item) => {\n      return this.prepareImageItem(item);\n    });\n\n    this.setState({\n      isImagePopupOpen: true,\n      imageItems: imageItems,\n      imageIndex: items.indexOf(curItem)\n    });\n  };\n\n  closeImagePopup = () => {\n    this.setState({isImagePopupOpen: false});\n  };\n\n  moveToPrevImage = () => {\n    const imageItemsLength = this.state.imageItems.length;\n    this.setState((prevState) => ({\n      imageIndex: (prevState.imageIndex + imageItemsLength - 1) % imageItemsLength\n    }));\n  };\n\n  moveToNextImage = () => {\n    const imageItemsLength = this.state.imageItems.length;\n    this.setState((prevState) => ({\n      imageIndex: (prevState.imageIndex + 1) % imageItemsLength\n    }));\n  };\n\n  checkDuplicatedName = (newName) => {\n    return Utils.checkDuplicatedNameInList(this.props.direntList, newName);\n  };\n\n  // common contextmenu handle\n  onMouseDown = (event) => {\n    event.stopPropagation();\n    if (event.button === 2) {\n      return;\n    }\n  };\n\n  onGridContainerMouseDown = (event) => {\n    this.onMouseDown(event);\n  };\n\n  onGridItemMouseDown = (event) => {\n    this.onMouseDown(event);\n  };\n\n  gridContainerClick = () => {\n    hideMenu();\n    if (!this.props.isDirentDetailShow) {\n      this.onGridItemClick(null);\n    }\n  };\n\n  onGridContainerContextMenu = (event) => {\n    event.preventDefault();\n    // Display menu items based on the permissions of the current path\n    let permission = this.props.userPerm;\n    if (permission !== 'admin' && permission !== 'rw') {\n      return;\n    }\n    let id = 'dirent-grid-container-menu';\n    const {\n      NEW_FOLDER, NEW_FILE,\n      NEW_MARKDOWN_FILE,\n      NEW_EXCEL_FILE,\n      NEW_POWERPOINT_FILE,\n      NEW_WORD_FILE,\n      NEW_SEADOC_FILE\n    } = TextTranslation;\n\n    const menuList = [\n      NEW_FOLDER, NEW_FILE, 'Divider',\n      NEW_MARKDOWN_FILE,\n      NEW_EXCEL_FILE,\n      NEW_POWERPOINT_FILE,\n      NEW_WORD_FILE\n    ];\n    if (enableSeadoc) {\n      menuList.push(NEW_SEADOC_FILE);\n    }\n    this.handleContextClick(event, id, menuList);\n  };\n\n  onGridItemContextMenu = (event, dirent) => {\n    // Display menu items according to the current dirent permission\n    let id = 'grid-item-contextmenu';\n    let menuList = this.getDirentItemMenuList(dirent, true);\n    this.handleContextClick(event, id, menuList, dirent);\n    this.props.onGridItemClick && this.props.onGridItemClick(dirent);\n  };\n\n  handleContextClick = (event, id, menuList, currentObject = null) => {\n    event.preventDefault();\n    event.stopPropagation();\n\n    let x = event.clientX || (event.touches && event.touches[0].pageX);\n    let y = event.clientY || (event.touches && event.touches[0].pageY);\n\n    if (this.props.posX) {\n      x -= this.props.posX;\n    }\n    if (this.props.posY) {\n      y -= this.props.posY;\n    }\n\n    hideMenu();\n\n    this.setState({activeDirent: currentObject});\n\n    let showMenuConfig = {\n      id: id,\n      position: { x, y },\n      target: event.target,\n      currentObject: currentObject,\n      menuList: menuList,\n    };\n\n    if (menuList.length === 0) {\n      return;\n    }\n\n    showMenu(showMenuConfig);\n  };\n\n  getDirentItemMenuList = (dirent, isContextmenu) => {\n    const isRepoOwner = this.isRepoOwner;\n    const currentRepoInfo = this.props.currentRepoInfo;\n    return Utils.getDirentOperationList(isRepoOwner, currentRepoInfo, dirent, isContextmenu);\n  };\n\n  render() {\n    let {direntList, path} = this.props;\n    let dirent = this.state.activeDirent ? this.state.activeDirent : '';\n    let direntPath = Utils.joinPath(path, dirent.name);\n\n    if (this.props.isDirentListLoading) {\n      return (<Loading />);\n    }\n\n    return (\n      <Fragment>\n        <ul className=\"grid-view\" onClick={this.gridContainerClick} onContextMenu={this.onGridContainerContextMenu} onMouseDown={this.onGridContainerMouseDown}>\n          {\n            direntList.length !== 0 && direntList.map((dirent, index) => {\n              return (\n                <DirentGridItem\n                  key={index}\n                  dirent={dirent}\n                  repoID={this.props.repoID}\n                  path={this.props.path}\n                  onItemClick={this.props.onItemClick}\n                  currentRepoInfo={this.props.currentRepoInfo}\n                  showImagePopup={this.showImagePopup}\n                  onGridItemContextMenu={this.onGridItemContextMenu}\n                  onItemMove={this.props.onItemMove}\n                  onGridItemMouseDown={this.onGridItemMouseDown}\n                  onGridItemClick={this.onGridItemClick}\n                  activeDirent={this.state.activeDirent}\n                />\n              );\n            })\n          }\n        </ul>\n        <ContextMenu\n          id={'grid-item-contextmenu'}\n          onMenuItemClick={this.onMenuItemClick}\n        />\n        <ContextMenu\n          id={'dirent-grid-container-menu'}\n          onMenuItemClick={this.onMenuItemClick}\n        />\n        {this.state.isCreateFolderDialogShow && (\n          <ModalPortal>\n            <CreateFolder\n              parentPath={this.props.path}\n              onAddFolder={this.onAddFolder}\n              checkDuplicatedName={this.checkDuplicatedName}\n              addFolderCancel={this.onCreateFolderToggle}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isCreateFileDialogShow && (\n          <ModalPortal>\n            <CreateFile\n              parentPath={this.props.path}\n              fileType={this.state.fileType}\n              onAddFile={this.props.onAddFile}\n              checkDuplicatedName={this.checkDuplicatedName}\n              toggleDialog={this.onCreateFileToggle}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isMoveDialogShow &&\n          <MoveDirentDialog\n            path={this.props.path}\n            repoID={this.props.repoID}\n            repoEncrypted={this.props.currentRepoInfo.encrypted}\n            isMutipleOperation={this.state.isMutipleOperation}\n            onItemMove={this.props.onItemMove}\n            onCancelMove={this.onMoveToggle}\n            dirent={this.state.activeDirent}\n          />\n        }\n        {this.state.isZipDialogOpen &&\n          <ModalPortal>\n            <ZipDownloadDialog\n              repoID={this.props.repoID}\n              path={this.props.path}\n              target={dirent.name}\n              toggleDialog={this.closeZipDialog}\n            />\n          </ModalPortal>\n        }\n        {this.state.isCopyDialogShow &&\n          <CopyDirentDialog\n            path={this.props.path}\n            repoID={this.props.repoID}\n            repoEncrypted={this.props.currentRepoInfo.encrypted}\n            isMutipleOperation={this.state.isMutipleOperation}\n            onItemCopy={this.props.onItemCopy}\n            onCancelCopy={this.onCopyToggle}\n            dirent={this.state.activeDirent}\n          />\n        }\n        {this.state.isEditFileTagShow &&\n          <EditFileTagDialog\n            repoID={this.props.repoID}\n            fileTagList={dirent.file_tags}\n            filePath={direntPath}\n            toggleCancel={this.onEditFileTagToggle}\n            onFileTagChanged={this.onFileTagChanged}\n          />\n        }\n        {this.state.isShareDialogShow &&\n          <ModalPortal>\n            <ShareDialog\n              itemType={dirent.type}\n              itemName={dirent.name}\n              itemPath={direntPath}\n              userPerm={dirent.permission}\n              repoID={this.props.repoID}\n              repoEncrypted={false}\n              enableDirPrivateShare={this.props.enableDirPrivateShare}\n              isGroupOwnedRepo={this.props.isGroupOwnedRepo}\n              toggleDialog={this.closeSharedDialog}\n            />\n          </ModalPortal>\n        }\n        {this.state.isRenameDialogShow && (\n          <ModalPortal>\n            <Rename\n              dirent={this.state.activeDirent}\n              onRename={this.onItemRename}\n              checkDuplicatedName={this.checkDuplicatedName}\n              toggleCancel={this.onItemRenameToggle}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isPermissionDialogOpen &&\n          <ModalPortal>\n            <LibSubFolderPermissionDialog\n              toggleDialog={this.onPermissionItem}\n              repoID={this.props.repoID}\n              folderPath={direntPath}\n              folderName={dirent.name}\n              isDepartmentRepo={this.props.isGroupOwnedRepo}\n            />\n          </ModalPortal>\n        }\n        {this.state.isImagePopupOpen && (\n          <ModalPortal>\n            <ImageDialog\n              imageItems={this.state.imageItems}\n              imageIndex={this.state.imageIndex}\n              closeImagePopup={this.closeImagePopup}\n              moveToPrevImage={this.moveToPrevImage}\n              moveToNextImage={this.moveToNextImage}\n            />\n          </ModalPortal>\n        )}\n      </Fragment>\n    );\n  }\n}\n\nDirentGridView.propTypes = propTypes;\n\nexport default DirentGridView;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport RepoInfoBar from '../../components/repo-info-bar';\nimport DirentGridView from '../../components/dirent-grid-view/dirent-grid-view';\nimport DirentNoneView from '../../components/dirent-list-view/dirent-none-view';\n\nconst propTypes = {\n  path: PropTypes.string.isRequired,\n  repoID: PropTypes.string.isRequired,\n  currentRepoInfo: PropTypes.object.isRequired,\n  draftCounts: PropTypes.number,\n  usedRepoTags: PropTypes.array.isRequired,\n  updateUsedRepoTags: PropTypes.func.isRequired,\n  direntList: PropTypes.array.isRequired,\n  onItemClick: PropTypes.func.isRequired,\n  onGridItemClick: PropTypes.func,\n  onAddFile: PropTypes.func.isRequired,\n  onItemDelete: PropTypes.func.isRequired,\n  onItemMove: PropTypes.func.isRequired,\n  onItemCopy: PropTypes.func.isRequired,\n  onItemConvert: PropTypes.func.isRequired,\n  onRenameNode: PropTypes.func.isRequired,\n  isGroupOwnedRepo: PropTypes.bool.isRequired,\n  userPerm: PropTypes.string,\n  isRepoInfoBarShow: PropTypes.bool.isRequired,\n  isDirentListLoading: PropTypes.bool.isRequired,\n  isDirentDetailShow: PropTypes.bool.isRequired,\n  enableDirPrivateShare: PropTypes.bool.isRequired,\n  updateDirent: PropTypes.func.isRequired,\n  showDirentDetail: PropTypes.func.isRequired,\n  onAddFolder: PropTypes.func.isRequired,\n  onFileTagChanged: PropTypes.func,\n  onItemRename: PropTypes.func.isRequired,\n  fullDirentList: PropTypes.array,\n};\n\nclass DirGridView extends React.Component {\n\n  render() {\n    if (this.props.path === '/' && this.props.direntList.length === 0) {\n      return (\n        <DirentNoneView\n          path={this.props.path}\n          isDirentListLoading={this.props.isDirentListLoading}\n          onAddFile={this.props.onAddFile}\n        />\n      );\n    }\n    return (\n      <Fragment>\n        {this.props.isRepoInfoBarShow && (\n          <RepoInfoBar\n            repoID={this.props.repoID}\n            currentPath={this.props.path}\n            draftCounts={this.props.draftCounts}\n            usedRepoTags={this.props.usedRepoTags}\n            updateUsedRepoTags={this.props.updateUsedRepoTags}\n            onFileTagChanged={this.props.onFileTagChanged}\n          />\n        )}\n        <DirentGridView\n          path={this.props.path}\n          repoID={this.props.repoID}\n          currentRepoInfo={this.props.currentRepoInfo}\n          isGroupOwnedRepo={this.props.isGroupOwnedRepo}\n          userPerm={this.props.userPerm}\n          enableDirPrivateShare={this.props.enableDirPrivateShare}\n          direntList={this.props.direntList}\n          fullDirentList={this.props.fullDirentList}\n          onAddFile={this.props.onAddFile}\n          onItemClick={this.props.onItemClick}\n          onItemDelete={this.props.onItemDelete}\n          onItemMove={this.props.onItemMove}\n          onItemCopy={this.props.onItemCopy}\n          onItemConvert={this.props.onItemConvert}\n          isDirentListLoading={this.props.isDirentListLoading}\n          updateDirent={this.props.updateDirent}\n          onRenameNode={this.props.onRenameNode}\n          showDirentDetail={this.props.showDirentDetail}\n          onGridItemClick={this.props.onGridItemClick}\n          isDirentDetailShow={this.props.isDirentDetailShow}\n          onItemRename={this.props.onItemRename}\n          onAddFolder={this.props.onAddFolder}\n          onFileTagChanged={this.props.onFileTagChanged}\n        />\n      </Fragment>\n    );\n  }\n}\n\nDirGridView.propTypes = propTypes;\n\nexport default DirGridView;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport { Button, Modal, ModalHeader, Input, ModalBody, ModalFooter, Alert } from 'reactstrap';\n\nconst propTypes = {\n  currentNode: PropTypes.object,\n  onRename: PropTypes.func.isRequired,\n  toggleCancel: PropTypes.func.isRequired,\n  checkDuplicatedName: PropTypes.func.isRequired,\n};\n\nclass Rename extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      newName: '',\n      errMessage: '',\n      isSubmitBtnActive: false,\n    };\n    this.newInput = React.createRef();\n  }\n\n  componentWillMount() {\n    this.setState({newName: this.props.currentNode.object.name});\n  }\n\n  componentDidMount() {\n    const { currentNode } = this.props;\n    this.changeState(currentNode);\n  }\n\n  componentWillReceiveProps(nextProps) {\n    this.changeState(nextProps.currentNode);\n  }\n\n  handleChange = (e) => {\n    if (!e.target.value.trim()) {\n      this.setState({isSubmitBtnActive: false});\n    } else {\n      this.setState({isSubmitBtnActive: true});\n    }\n\n    this.setState({newName: e.target.value});\n  };\n\n  handleSubmit = () => {\n    let { isValid, errMessage } = this.validateInput();\n    if (!isValid) {\n      this.setState({errMessage : errMessage});\n    } else {\n      let isDuplicated = this.checkDuplicatedName();\n      if (isDuplicated) {\n        let errMessage = gettext('The name \"{name}\" is already taken. Please choose a different name.');\n        errMessage = errMessage.replace('{name}', Utils.HTMLescape(this.state.newName));\n        this.setState({errMessage: errMessage});\n      } else {\n        this.props.onRename(this.state.newName);\n      }\n    }\n  };\n\n  handleKeyDown = (e) => {\n    if (e.key === 'Enter') {\n      this.handleSubmit();\n    }\n  };\n\n  toggle = () => {\n    this.props.toggleCancel();\n  };\n\n  changeState = (currentNode) => {\n    let name = currentNode.object.name;\n    this.setState({newName: name});\n  };\n\n  validateInput = () => {\n    let newName = this.state.newName.trim();\n    let isValid = true;\n    let errMessage = '';\n    if (!newName) {\n      isValid = false;\n      errMessage = gettext('Name is required.');\n      return { isValid, errMessage };\n    }\n\n    if (newName.indexOf('/') > -1) {\n      isValid = false;\n      errMessage = gettext('Name should not include ' + '\\'/\\'' + '.');\n      return { isValid, errMessage };\n    }\n\n    return { isValid, errMessage };\n  };\n\n  checkDuplicatedName = () => {\n    let isDuplicated = this.props.checkDuplicatedName(this.state.newName);\n    return isDuplicated;\n  };\n\n  onAfterModelOpened = () => {\n    if (!this.newInput.current) return;\n    const { currentNode } = this.props;\n    let type = currentNode.object.type;\n    this.newInput.current.focus();\n    if (type === 'file') {\n      var endIndex = currentNode.object.name.lastIndexOf('.md');\n      this.newInput.current.setSelectionRange(0, endIndex, 'forward');\n    } else {\n      this.newInput.current.setSelectionRange(0, -1);\n    }\n  };\n\n  render() {\n    let type = this.props.currentNode.object.type;\n    return (\n      <Modal isOpen={true} toggle={this.toggle} onOpened={this.onAfterModelOpened}>\n        <ModalHeader toggle={this.toggle}>{type === 'file' ? gettext('Rename File') : gettext('Rename Folder') }</ModalHeader>\n        <ModalBody>\n          <p>{type === 'file' ? gettext('New file name'): gettext('New folder name')}</p>\n          <Input onKeyDown={this.handleKeyDown} innerRef={this.newInput} placeholder=\"newName\" value={this.state.newName} onChange={this.handleChange} />\n          {this.state.errMessage && <Alert color=\"danger\" className=\"mt-2\">{this.state.errMessage}</Alert>}\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.toggle}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.handleSubmit} disabled={!this.state.isSubmitBtnActive}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nRename.propTypes = propTypes;\n\nexport default Rename;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport TreeView from '../../components/tree-view/tree-view';\nimport Loading from '../../components/loading';\nimport ModalPortal from '../../components/modal-portal';\nimport Rename from '../../components/dialog/rename-dialog';\nimport Copy from '../../components/dialog/copy-dirent-dialog';\nimport Move from '../../components/dialog/move-dirent-dialog';\nimport CreateFolder from '../../components/dialog/create-folder-dialog';\nimport CreateFile from '../../components/dialog/create-file-dialog';\nimport ImageDialog from '../../components/dialog/image-dialog';\nimport { siteRoot, thumbnailSizeForOriginal } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\n\nconst propTypes = {\n  currentPath: PropTypes.string.isRequired,\n  userPerm: PropTypes.string.isRequired,\n  isTreeDataLoading: PropTypes.bool.isRequired,\n  treeData: PropTypes.object.isRequired,\n  currentNode: PropTypes.object,\n  onNodeClick: PropTypes.func.isRequired,\n  onNodeCollapse: PropTypes.func.isRequired,\n  onNodeExpanded: PropTypes.func.isRequired,\n  onRenameNode: PropTypes.func.isRequired,\n  onDeleteNode: PropTypes.func.isRequired,\n  onAddFileNode: PropTypes.func.isRequired,\n  onAddFolderNode: PropTypes.func.isRequired,\n  repoID: PropTypes.string.isRequired,\n  navRate: PropTypes.number,\n  inResizing: PropTypes.bool.isRequired,\n  currentRepoInfo: PropTypes.object.isRequired,\n  onItemMove: PropTypes.func.isRequired,\n  onItemCopy: PropTypes.func.isRequired,\n  selectedDirentList: PropTypes.array.isRequired,\n  onItemsMove: PropTypes.func.isRequired,\n};\n\nclass DirColumnNav extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      opNode: null,\n      isAddFileDialogShow: false,\n      isAddFolderDialogShow: false,\n      isRenameDialogShow: false,\n      isNodeImagePopupOpen: false,\n      imageNodeItems: [],\n      imageIndex: 0,\n      isCopyDialogShow: false,\n      isMoveDialogShow: false,\n      isMutipleOperation: false,\n    };\n    this.isNodeMenuShow = true;\n  }\n\n  componentWillReceiveProps(nextProps) {\n    this.setState({opNode: nextProps.currentNode});\n  }\n\n  onNodeClick = (node) => {\n    this.setState({opNode: node});\n    if (Utils.imageCheck(node.object.name)) {\n      this.showNodeImagePopup(node);\n      return;\n    }\n    this.props.onNodeClick(node);\n  };\n\n  onMenuItemClick = (operation, node) => {\n    this.setState({opNode: node});\n    switch (operation) {\n      case 'New Folder':\n        if (!node) {\n          this.onAddFolderToggle('root');\n        } else {\n          this.onAddFolderToggle();\n        }\n        break;\n      case 'New File':\n        if (!node) {\n          this.onAddFileToggle('root');\n        } else {\n          this.onAddFileToggle();\n        }\n        break;\n      case 'Rename':\n        this.onRenameToggle();\n        break;\n      case 'Delete':\n        this.onDeleteNode(node);\n        break;\n      case 'Copy':\n        this.onCopyToggle();\n        break;\n      case 'Move':\n        this.onMoveToggle();\n        break;\n      case 'Open in New Tab':\n        this.onOpenFile(node);\n        break;\n    }\n  };\n\n  onAddFileToggle = (type) => {\n    if (type === 'root') {\n      let root = this.props.treeData.root;\n      this.setState({\n        isAddFileDialogShow: !this.state.isAddFileDialogShow,\n        opNode: root,\n      });\n    } else {\n      this.setState({isAddFileDialogShow: !this.state.isAddFileDialogShow});\n    }\n  };\n\n  onAddFolderToggle = (type) => {\n    if (type === 'root') {\n      let root = this.props.treeData.root;\n      this.setState({\n        isAddFolderDialogShow: !this.state.isAddFolderDialogShow,\n        opNode: root,\n      });\n    } else {\n      this.setState({isAddFolderDialogShow: !this.state.isAddFolderDialogShow});\n    }\n  };\n\n  onRenameToggle = () => {\n    this.setState({isRenameDialogShow: !this.state.isRenameDialogShow});\n  };\n\n  onCopyToggle = () => {\n    this.setState({isCopyDialogShow: !this.state.isCopyDialogShow});\n  };\n\n  onMoveToggle = () => {\n    this.setState({isMoveDialogShow: !this.state.isMoveDialogShow});\n  };\n\n  onAddFolderNode = (dirPath) => {\n    this.setState({isAddFolderDialogShow: !this.state.isAddFolderDialogShow});\n    this.props.onAddFolderNode(dirPath);\n  };\n\n  onRenameNode = (newName) => {\n    this.setState({isRenameDialogShow: !this.state.isRenameDialogShow});\n    let node = this.state.opNode;\n    this.props.onRenameNode(node, newName);\n  };\n\n  onDeleteNode = (node) => {\n    this.props.onDeleteNode(node);\n  };\n\n  onOpenFile = (node) => {\n    let newUrl = siteRoot + 'lib/' + this.props.repoID + '/file' + Utils.encodePath(node.path);\n    window.open(newUrl, '_blank');\n  };\n\n  checkDuplicatedName = (newName) => {\n    let node = this.state.opNode;\n    // root node to new node conditions: parentNode is null,\n    let parentNode = node.parentNode ? node.parentNode : node;\n    let childrenObject = parentNode.children.map(item => {\n      return item.object;\n    });\n    let isDuplicated = childrenObject.some(object => {\n      return object.name === newName;\n    });\n    return isDuplicated;\n  };\n\n  showNodeImagePopup = (node) => {\n    let childrenNode = node.parentNode.children;\n    let items = childrenNode.filter((item) => {\n      return Utils.imageCheck(item.object.name);\n    });\n    let imageNames = items.map((item) => {\n      return item.object.name;\n    });\n    this.setState({\n      isNodeImagePopupOpen: true,\n      imageNodeItems: this.prepareImageItems(node),\n      imageIndex: imageNames.indexOf(node.object.name)\n    });\n  };\n\n  prepareImageItems = (node) => {\n    let childrenNode = node.parentNode.children;\n    let items = childrenNode.filter((item) => {\n      return Utils.imageCheck(item.object.name);\n    });\n\n    const useThumbnail = !this.props.currentRepoInfo.encrypted;\n    let prepareItem = (item) => {\n      const name = item.object.name;\n\n      const path = Utils.encodePath(Utils.joinPath(node.parentNode.path, name));\n      const fileExt = name.substr(name.lastIndexOf('.') + 1).toLowerCase();\n      const isGIF = fileExt === 'gif';\n\n      const repoID = this.props.repoID;\n      let src = '';\n      if (useThumbnail && !isGIF) {\n        src = `${siteRoot}thumbnail/${repoID}/${thumbnailSizeForOriginal}${path}`;\n      } else {\n        src = `${siteRoot}repo/${repoID}/raw${path}`;\n      }\n\n      return {\n        'name': name,\n        'url': `${siteRoot}lib/${repoID}/file${path}`,\n        'src': src\n      };\n    };\n\n    return items.map((item) => { return prepareItem(item); });\n  };\n\n  closeNodeImagePopup = () => {\n    this.setState({\n      isNodeImagePopupOpen: false\n    });\n  };\n\n  moveToPrevImage = () => {\n    const imageItemsLength = this.state.imageNodeItems.length;\n    this.setState((prevState) => ({\n      imageIndex: (prevState.imageIndex + imageItemsLength - 1) % imageItemsLength\n    }));\n  };\n\n  moveToNextImage = () => {\n    const imageItemsLength = this.state.imageNodeItems.length;\n    this.setState((prevState) => ({\n      imageIndex: (prevState.imageIndex + 1) % imageItemsLength\n    }));\n  };\n\n  stopTreeScrollPropagation = (e) => {\n    e.stopPropagation();\n  };\n\n  render() {\n    let flex = this.props.navRate ? '0 0 ' + this.props.navRate * 100 + '%' : '0 0 25%';\n    const select = this.props.inResizing ? 'none' : '';\n    return (\n      <Fragment>\n        <div className=\"dir-content-nav\" role=\"navigation\" style={{flex: (flex), userSelect: select}} onScroll={this.stopTreeScrollPropagation}>\n          {this.props.isTreeDataLoading ?\n            (<Loading/>) :\n            (<TreeView\n              userPerm={this.props.userPerm}\n              isNodeMenuShow={this.isNodeMenuShow}\n              treeData={this.props.treeData}\n              currentPath={this.props.currentPath}\n              onNodeClick={this.onNodeClick}\n              onNodeExpanded={this.props.onNodeExpanded}\n              onNodeCollapse={this.props.onNodeCollapse}\n              onMenuItemClick={this.onMenuItemClick}\n              onFreezedItem={this.onFreezedItem}\n              onUnFreezedItem={this.onUnFreezedItem}\n              onItemMove={this.props.onItemMove}\n              currentRepoInfo={this.props.currentRepoInfo}\n              selectedDirentList={this.props.selectedDirentList}\n              onItemsMove={this.props.onItemsMove}\n            />)\n          }\n        </div>\n        {this.state.isAddFolderDialogShow && (\n          <ModalPortal>\n            <CreateFolder\n              parentPath={this.state.opNode.path}\n              onAddFolder={this.onAddFolderNode}\n              checkDuplicatedName={this.checkDuplicatedName}\n              addFolderCancel={this.onAddFolderToggle}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isAddFileDialogShow && (\n          <ModalPortal>\n            <CreateFile\n              parentPath={this.state.opNode.path}\n              onAddFile={this.props.onAddFileNode}\n              checkDuplicatedName={this.checkDuplicatedName}\n              toggleDialog={this.onAddFileToggle}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isRenameDialogShow && (\n          <ModalPortal>\n            <Rename\n              currentNode={this.state.opNode}\n              onRename={this.onRenameNode}\n              checkDuplicatedName={this.checkDuplicatedName}\n              toggleCancel={this.onRenameToggle}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isCopyDialogShow && (\n          <ModalPortal>\n            <Copy\n              path={this.state.opNode.parentNode.path}\n              repoID={this.props.repoID}\n              dirent={this.state.opNode.object}\n              onItemCopy={this.props.onItemCopy}\n              repoEncrypted={this.props.currentRepoInfo.encrypted}\n              onCancelCopy={this.onCopyToggle}\n              isMutipleOperation={this.state.isMutipleOperation}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isMoveDialogShow && (\n          <ModalPortal>\n            <Move\n              path={this.state.opNode.parentNode.path}\n              repoID={this.props.repoID}\n              dirent={this.state.opNode.object}\n              onItemMove={this.props.onItemMove}\n              repoEncrypted={this.props.currentRepoInfo.encrypted}\n              onCancelMove={this.onMoveToggle}\n              isMutipleOperation={this.state.isMutipleOperation}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isNodeImagePopupOpen && (\n          <ModalPortal>\n            <ImageDialog\n              imageItems={this.state.imageNodeItems}\n              imageIndex={this.state.imageIndex}\n              closeImagePopup={this.closeNodeImagePopup}\n              moveToPrevImage={this.moveToPrevImage}\n              moveToNextImage={this.moveToNextImage}\n            />\n          </ModalPortal>\n        )}\n      </Fragment>\n    );\n  }\n}\n\nDirColumnNav.defaultProps={\n  navRate: 0.25\n};\n\nDirColumnNav.propTypes = propTypes;\n\nexport default DirColumnNav;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Utils } from '../../utils/utils';\nimport { gettext, siteRoot } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport toaster from '../toast';\nimport WikiMarkdownViewer from '../wiki-markdown-viewer';\n\nconst propTypes = {\n  path: PropTypes.string.isRequired,\n  repoID: PropTypes.string.isRequired,\n  hash: PropTypes.string,\n  isDraft: PropTypes.bool,\n  hasDraft: PropTypes.bool,\n  goDraftPage: PropTypes.func.isRequired,\n  isFileLoading: PropTypes.bool.isRequired,\n  isFileLoadedErr: PropTypes.bool.isRequired,\n  filePermission: PropTypes.string,\n  content: PropTypes.string,\n  lastModified: PropTypes.string,\n  latestContributor: PropTypes.string,\n  onLinkClick: PropTypes.func.isRequired,\n};\n\nclass DirColumnFile extends React.Component {\n\n  componentDidMount() {\n    if (this.props.hash) {\n      let hash = this.props.hash;\n      setTimeout(function() {\n        window.location.hash = hash;\n      }, 500);\n    }\n  }\n\n  onEditClick = (e) => {\n    e.preventDefault();\n    let { path, repoID } = this.props;\n    let url = siteRoot + 'lib/' + repoID + '/file' + Utils.encodePath(path) + '?mode=edit';\n    window.open(url);\n  };\n\n  onNewDraft = (e) => {\n    e.preventDefault();\n    let { path, repoID } = this.props;\n    seafileAPI.createDraft(repoID, path).then(res => {\n      window.location.href = siteRoot + 'lib/' + res.data.origin_repo_id + '/file' + res.data.draft_file_path + '?mode=edit';\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  onOpenFile = (e) => {\n    e.preventDefault();\n    let { path, repoID } = this.props;\n    let newUrl = siteRoot + 'lib/' + repoID + '/file' + Utils.encodePath(path);\n    window.open(newUrl, '_blank');\n  };\n\n  goDraftPage = (e) => {\n    e.preventDefault();\n    this.props.goDraftPage();\n  };\n\n  render() {\n    if (this.props.isFileLoadedErr) {\n      return (\n        <div className=\"message err-tip\">{gettext('File does not exist.')}</div>\n      );\n    }\n    return (\n      <WikiMarkdownViewer\n        isTOCShow={false}\n        isFileLoading={this.props.isFileLoading}\n        markdownContent={this.props.content}\n        lastModified = {this.props.lastModified}\n        latestContributor={this.props.latestContributor}\n        onLinkClick={this.props.onLinkClick}\n        repoID={this.props.repoID}\n        path={this.props.path}\n      >\n        <Fragment>\n          <span className='wiki-open-file position-fixed' onClick={this.onOpenFile}>\n            <i className=\"fas fa-expand-arrows-alt\"></i>\n          </span>\n          {(!this.props.isDraft && this.props.hasDraft) &&\n            <div className='seafile-btn-view-review text-center mt-2'>\n              <div className='tag tag-green'>\n                {gettext('This file is in draft stage.')}\n                <span className=\"ml-2\" onClick={this.goDraftPage}>{gettext('View Draft')}</span>\n              </div>\n            </div>\n          }\n        </Fragment>\n      </WikiMarkdownViewer>\n    );\n  }\n}\n\nDirColumnFile.propTypes = propTypes;\n\nexport default DirColumnFile;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport DirColumnNav from './dir-column-nav';\nimport DirColumnFile from './dir-column-file';\nimport DirListView from './dir-list-view';\n\nconst propTypes = {\n  path: PropTypes.string.isRequired,\n  repoID: PropTypes.string.isRequired,\n  // repoinfo\n  currentRepoInfo: PropTypes.object.isRequired,\n  enableDirPrivateShare: PropTypes.bool.isRequired,\n  userPerm: PropTypes.string,\n  isGroupOwnedRepo: PropTypes.bool.isRequired,\n  // tree\n  isTreeDataLoading: PropTypes.bool.isRequired,\n  treeData: PropTypes.object.isRequired,\n  currentNode: PropTypes.object,\n  onNodeClick: PropTypes.func.isRequired,\n  onNodeCollapse: PropTypes.func.isRequired,\n  onNodeExpanded: PropTypes.func.isRequired,\n  onRenameNode: PropTypes.func.isRequired,\n  onDeleteNode: PropTypes.func.isRequired,\n  onAddFileNode: PropTypes.func.isRequired,\n  onAddFolderNode: PropTypes.func.isRequired,\n  // file\n  isViewFile: PropTypes.bool.isRequired,\n  isFileLoading: PropTypes.bool.isRequired,\n  isFileLoadedErr: PropTypes.bool.isRequired,\n  hash: PropTypes.string,\n  isDraft: PropTypes.bool.isRequired,\n  hasDraft: PropTypes.bool.isRequired,\n  goDraftPage: PropTypes.func.isRequired,\n  filePermission: PropTypes.string,\n  content: PropTypes.string,\n  lastModified: PropTypes.string,\n  latestContributor: PropTypes.string,\n  onLinkClick: PropTypes.func.isRequired,\n  // repo content\n  isRepoInfoBarShow: PropTypes.bool.isRequired,\n  draftCounts: PropTypes.number.isRequired,\n  usedRepoTags: PropTypes.array.isRequired,\n  updateUsedRepoTags: PropTypes.func.isRequired,\n  // list\n  isDirentListLoading: PropTypes.bool.isRequired,\n  direntList: PropTypes.array.isRequired,\n  sortBy: PropTypes.string.isRequired,\n  sortOrder: PropTypes.string.isRequired,\n  sortItems: PropTypes.func.isRequired,\n  onAddFolder: PropTypes.func.isRequired,\n  onAddFile: PropTypes.func.isRequired,\n  updateDirent: PropTypes.func.isRequired,\n  onItemClick: PropTypes.func.isRequired,\n  onItemSelected: PropTypes.func.isRequired,\n  onItemDelete: PropTypes.func.isRequired,\n  onItemRename: PropTypes.func.isRequired,\n  onItemMove: PropTypes.func.isRequired,\n  onItemCopy: PropTypes.func.isRequired,\n  onItemConvert: PropTypes.func.isRequired,\n  onDirentClick: PropTypes.func.isRequired,\n  isAllItemSelected: PropTypes.bool.isRequired,\n  onAllItemSelected: PropTypes.func.isRequired,\n  selectedDirentList: PropTypes.array.isRequired,\n  onItemsMove: PropTypes.func.isRequired,\n  onItemsCopy: PropTypes.func.isRequired,\n  onItemsDelete: PropTypes.func.isRequired,\n  onFileTagChanged: PropTypes.func,\n  showDirentDetail: PropTypes.func.isRequired,\n  fullDirentList: PropTypes.array,\n};\n\nclass DirColumnView extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      inResizing: false,\n      navRate: 0.25,\n    };\n    this.containerWidth = null;\n  }\n\n  onResizeMouseUp = () => {\n    if (this.state.inResizing) {\n      this.setState({\n        inResizing: false\n      });\n    }\n    this.setCookie('navRate', this.state.navRate);\n  };\n\n  onResizeMouseDown = () => {\n    this.containerWidth = this.refs.viewModeContainer.clientWidth;\n    this.setState({\n      inResizing: true\n    });\n  };\n\n  onResizeMouseMove = (e) => {\n    let sizeNavWidth = this.containerWidth / 0.78 * 0.22 + 3;\n    let rate = (e.nativeEvent.clientX - sizeNavWidth) / this.containerWidth;\n    if (rate < 0.1) {\n      this.setState({\n        inResizing: false,\n        navRate: 0.12,\n      });\n    }\n    else if (rate > 0.4) {\n      this.setState({\n        inResizing: false,\n        navRate: 0.38,\n      });\n    }\n    else {\n      this.setState({\n        navRate: rate\n      });\n    }\n  };\n\n  setCookie = (name, value) => {\n    let cookie = name + '=' + value + ';';\n    document.cookie = cookie;\n  };\n\n  getCookie = (cookiename) => {\n    let name = cookiename + '=';\n    let cookie = document.cookie.split(';');\n    for (let i = 0, len = cookie.length; i < len; i++) {\n      let c = cookie[i].trim();\n      if (c.indexOf(name) == 0) {\n        return c.substring(name.length, c.length) * 1;\n      }\n    }\n    return '';\n  };\n\n  componentWillMount() {\n    let rate = this.getCookie('navRate');\n    if (rate) {\n      this.setState({\n        navRate: rate,\n      });\n    }\n  }\n\n  render() {\n    const onResizeMove = this.state.inResizing ? this.onResizeMouseMove : null;\n    const select = this.state.inResizing ? 'none' : '';\n    const mainFlex = '1 0 ' + (1 - this.state.navRate - 0.05) * 100 + '%';\n    return (\n      <div className=\"dir-colunm-view\" onMouseMove={onResizeMove} onMouseUp={this.onResizeMouseUp} ref=\"viewModeContainer\">\n        <DirColumnNav\n          currentPath={this.props.path}\n          userPerm={this.props.userPerm}\n          isTreeDataLoading={this.props.isTreeDataLoading}\n          treeData={this.props.treeData}\n          currentNode={this.props.currentNode}\n          onNodeClick={this.props.onNodeClick}\n          onNodeCollapse={this.props.onNodeCollapse}\n          onNodeExpanded={this.props.onNodeExpanded}\n          onAddFolderNode={this.props.onAddFolderNode}\n          onAddFileNode={this.props.onAddFileNode}\n          onRenameNode={this.props.onRenameNode}\n          onDeleteNode={this.props.onDeleteNode}\n          repoID={this.props.repoID}\n          navRate={this.state.navRate}\n          inResizing={this.state.inResizing}\n          currentRepoInfo={this.props.currentRepoInfo}\n          onItemMove={this.props.onItemMove}\n          onItemCopy={this.props.onItemCopy}\n          selectedDirentList={this.props.selectedDirentList}\n          onItemsMove={this.props.onItemsMove}\n        />\n        <div className=\"dir-content-resize\" onMouseDown={this.onResizeMouseDown}></div>\n        <div className=\"dir-content-main\" style={{userSelect: select, flex: mainFlex}}>\n          {this.props.isViewFile ? (\n            <DirColumnFile\n              path={this.props.path}\n              repoID={this.props.repoID}\n              hash={this.props.hash}\n              isDraft={this.props.isDraft}\n              hasDraft={this.props.hasDraft}\n              goDraftPage={this.props.goDraftPage}\n              isFileLoading={this.props.isFileLoading}\n              isFileLoadedErr={this.props.isFileLoadedErr}\n              filePermission={this.props.filePermission}\n              content={this.props.content}\n              lastModified={this.props.lastModified}\n              latestContributor={this.props.latestContributor}\n              onLinkClick={this.props.onLinkClick}\n            />\n          ) : (\n            <DirListView\n              path={this.props.path}\n              repoID={this.props.repoID}\n              currentRepoInfo={this.props.currentRepoInfo}\n              isGroupOwnedRepo={this.props.isGroupOwnedRepo}\n              userPerm={this.props.userPerm}\n              enableDirPrivateShare={this.props.enableDirPrivateShare}\n              isRepoInfoBarShow={this.props.isRepoInfoBarShow}\n              usedRepoTags={this.props.usedRepoTags}\n              draftCounts={this.props.draftCounts}\n              updateUsedRepoTags={this.props.updateUsedRepoTags}\n              isDirentListLoading={this.props.isDirentListLoading}\n              direntList={this.props.direntList}\n              fullDirentList={this.props.fullDirentList}\n              sortBy={this.props.sortBy}\n              sortOrder={this.props.sortOrder}\n              sortItems={this.props.sortItems}\n              onAddFolder={this.props.onAddFolder}\n              onAddFile={this.props.onAddFile}\n              onItemClick={this.props.onItemClick}\n              onItemSelected={this.props.onItemSelected}\n              onItemDelete={this.props.onItemDelete}\n              onItemRename={this.props.onItemRename}\n              onItemMove={this.props.onItemMove}\n              onItemCopy={this.props.onItemCopy}\n              onItemConvert={this.props.onItemConvert}\n              onDirentClick={this.props.onDirentClick}\n              updateDirent={this.props.updateDirent}\n              isAllItemSelected={this.props.isAllItemSelected}\n              onAllItemSelected={this.props.onAllItemSelected}\n              selectedDirentList={this.props.selectedDirentList}\n              onItemsMove={this.props.onItemsMove}\n              onItemsCopy={this.props.onItemsCopy}\n              onItemsDelete={this.props.onItemsDelete}\n              onFileTagChanged={this.props.onFileTagChanged}\n              showDirentDetail={this.props.showDirentDetail}\n            />\n          )}\n        </div>\n      </div>\n    );\n  }\n}\n\nDirColumnView.propTypes = propTypes;\n\nexport default DirColumnView;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../../utils/constants';\nimport CurDirPath from '../../components/cur-dir-path';\nimport DirentDetail from '../../components/dirent-detail/dirent-details';\nimport LibDetail from '../../components/dirent-detail/lib-details';\nimport DirListView from '../../components/dir-view-mode/dir-list-view';\nimport DirGridView from '../../components/dir-view-mode/dir-grid-view';\nimport DirColumnView from '../../components/dir-view-mode/dir-column-view';\n\nimport '../../css/lib-content-view.css';\n\nconst propTypes = {\n  pathPrefix: PropTypes.array.isRequired,\n  currentMode: PropTypes.string.isRequired,\n  path: PropTypes.string.isRequired,\n  pathExist: PropTypes.bool.isRequired,\n  // repoinfo\n  currentRepoInfo: PropTypes.object.isRequired,\n  repoID: PropTypes.string.isRequired,\n  enableDirPrivateShare: PropTypes.bool.isRequired,\n  isGroupOwnedRepo: PropTypes.bool.isRequired,\n  userPerm: PropTypes.string,\n  // path func\n  onTabNavClick: PropTypes.func.isRequired,\n  onMainNavBarClick: PropTypes.func.isRequired,\n  // file\n  isViewFile: PropTypes.bool.isRequired,\n  isFileLoadedErr: PropTypes.bool.isRequired,\n  hash: PropTypes.string,\n  isDraft: PropTypes.bool.isRequired,\n  hasDraft: PropTypes.bool.isRequired,\n  fileTags: PropTypes.array.isRequired,\n  goDraftPage: PropTypes.func.isRequired,\n  isFileLoading: PropTypes.bool.isRequired,\n  filePermission: PropTypes.string,\n  content: PropTypes.string,\n  lastModified: PropTypes.string,\n  latestContributor: PropTypes.string,\n  onLinkClick: PropTypes.func.isRequired,\n  // tree\n  isTreeDataLoading: PropTypes.bool.isRequired,\n  treeData: PropTypes.object.isRequired,\n  currentNode: PropTypes.object,\n  onNodeClick: PropTypes.func.isRequired,\n  onNodeCollapse: PropTypes.func.isRequired,\n  onNodeExpanded: PropTypes.func.isRequired,\n  onRenameNode: PropTypes.func.isRequired,\n  onDeleteNode: PropTypes.func.isRequired,\n  onAddFileNode: PropTypes.func.isRequired,\n  onAddFolderNode: PropTypes.func.isRequired,\n  // repo content\n  draftCounts: PropTypes.number,\n  usedRepoTags: PropTypes.array.isRequired,\n  updateUsedRepoTags: PropTypes.func.isRequired,\n  // list\n  isDirentListLoading: PropTypes.bool.isRequired,\n  direntList: PropTypes.array.isRequired,\n  sortBy: PropTypes.string.isRequired,\n  sortOrder: PropTypes.string.isRequired,\n  sortItems: PropTypes.func.isRequired,\n  updateDirent: PropTypes.func.isRequired,\n  onItemClick: PropTypes.func.isRequired,\n  onItemSelected: PropTypes.func.isRequired,\n  onItemDelete: PropTypes.func.isRequired,\n  onItemRename: PropTypes.func.isRequired,\n  onItemMove: PropTypes.func.isRequired,\n  onItemCopy: PropTypes.func.isRequired,\n  onAddFolder: PropTypes.func.isRequired,\n  onAddFile: PropTypes.func.isRequired,\n  onItemConvert: PropTypes.func.isRequired,\n  onFileTagChanged: PropTypes.func.isRequired,\n  isDirentSelected: PropTypes.bool.isRequired,\n  isAllDirentSelected: PropTypes.bool.isRequired,\n  onAllDirentSelected: PropTypes.func.isRequired,\n  isDirentDetailShow: PropTypes.bool.isRequired,\n  selectedDirent: PropTypes.object,\n  selectedDirentList: PropTypes.array.isRequired,\n  onItemsMove: PropTypes.func.isRequired,\n  onItemsCopy: PropTypes.func.isRequired,\n  onItemsDelete: PropTypes.func.isRequired,\n  closeDirentDetail: PropTypes.func.isRequired,\n  showDirentDetail: PropTypes.func.isRequired,\n  onDeleteRepoTag: PropTypes.func.isRequired,\n  updateDetail: PropTypes.bool.isRequired,\n  onListContainerScroll: PropTypes.func.isRequired,\n  onDirentClick: PropTypes.func.isRequired,\n  direntDetailPanelTab: PropTypes.string,\n  loadDirentList: PropTypes.func,\n  fullDirentList: PropTypes.array,\n};\n\nclass LibContentContainer extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      currentDirent: null,\n    };\n\n    this.errMessage = (<div className=\"message err-tip\">{gettext('Folder does not exist.')}</div>);\n  }\n\n  componentWillReceiveProps(nextProps) {\n    if (nextProps.path !== this.props.path || nextProps.updateDetail !== this.props.updateDetail) {\n      this.setState({currentDirent: null});\n    }\n  }\n\n  onPathClick = (path) => {\n    this.props.onMainNavBarClick(path);\n    this.props.closeDirentDetail();\n  };\n\n  onItemClick = (dirent) => {\n    this.props.onItemClick(dirent);\n    this.props.closeDirentDetail();\n  };\n\n  onGridItemClick = (dirent) => {\n    this.setState({currentDirent: dirent});\n    this.props.onDirentClick(dirent);\n  };\n\n  // on '<tr>'\n  onDirentClick = (dirent) => {\n    this.setState({currentDirent: dirent});\n    this.props.onDirentClick(dirent);\n  };\n\n  onItemSelected = (dirent) => {\n    this.setState({currentDirent: dirent});\n    this.props.onItemSelected(dirent);\n  };\n\n  onItemDelete = (dirent) => {\n    this.checkCurrentDirent(dirent);\n    this.props.onItemDelete(dirent);\n  };\n\n  onItemMove = (destRepo, dirent, selectedPath, currentPath) => {\n    this.checkCurrentDirent(dirent);\n    this.props.onItemMove(destRepo, dirent, selectedPath, currentPath);\n  };\n\n  checkCurrentDirent = (deletedDirent) => {\n    let { currentDirent } = this.state;\n    if (currentDirent && deletedDirent.name === currentDirent.name) {\n      this.setState({currentDirent: null});\n    }\n  };\n\n  onItemsScroll = (e) => {\n    let target = e.target;\n\n    if (target.scrollTop === 0) {\n      return;\n    }\n\n    if (target.scrollTop + target.clientHeight + 1 >= target.scrollHeight) {\n      this.props.onListContainerScroll();\n    }\n  };\n\n  render() {\n    let { path, repoID, usedRepoTags, draftCounts } = this.props;\n    let isRepoInfoBarShow = false;\n    if (path === '/') {\n      if (usedRepoTags.length !== 0 || draftCounts !== 0) {\n        isRepoInfoBarShow = true;\n      }\n    }\n\n    return (\n      <Fragment>\n        <div className=\"cur-view-container\">\n          {this.props.currentRepoInfo.status === 'read-only' &&\n            <div className=\"readonly-tip-message\">\n              {gettext('This library has been set to read-only by admin and cannot be updated.')}\n            </div>\n          }\n          <div className=\"cur-view-path\">\n            <CurDirPath\n              repoID={repoID}\n              repoName={this.props.currentRepoInfo.repo_name}\n              pathPrefix={this.props.pathPrefix}\n              currentPath={this.props.path}\n              userPerm={this.props.userPerm}\n              isViewFile={this.props.isViewFile}\n              onTabNavClick={this.props.onTabNavClick}\n              onPathClick={this.onPathClick}\n              updateUsedRepoTags={this.props.updateUsedRepoTags}\n              fileTags={this.props.fileTags}\n              onDeleteRepoTag={this.props.onDeleteRepoTag}\n              direntList={this.props.direntList}\n              sortBy={this.props.sortBy}\n              sortOrder={this.props.sortOrder}\n              sortItems={this.props.sortItems}\n            />\n          </div>\n          <div className={`cur-view-content lib-content-container ${this.props.currentMode === 'column' ? 'view-mode-container' : ''}`} onScroll={this.onItemsScroll}>\n            {!this.props.pathExist && this.errMessage}\n            {this.props.pathExist && (\n              <Fragment>\n                {this.props.currentMode === 'list' && (\n                  <DirListView\n                    path={this.props.path}\n                    repoID={repoID}\n                    currentRepoInfo={this.props.currentRepoInfo}\n                    isGroupOwnedRepo={this.props.isGroupOwnedRepo}\n                    userPerm={this.props.userPerm}\n                    enableDirPrivateShare={this.props.enableDirPrivateShare}\n                    isRepoInfoBarShow={isRepoInfoBarShow}\n                    usedRepoTags={this.props.usedRepoTags}\n                    draftCounts={this.props.draftCounts}\n                    updateUsedRepoTags={this.props.updateUsedRepoTags}\n                    isDirentListLoading={this.props.isDirentListLoading}\n                    direntList={this.props.direntList}\n                    fullDirentList={this.props.fullDirentList}\n                    sortBy={this.props.sortBy}\n                    sortOrder={this.props.sortOrder}\n                    sortItems={this.props.sortItems}\n                    onAddFolder={this.props.onAddFolder}\n                    onAddFile={this.props.onAddFile}\n                    onItemClick={this.onItemClick}\n                    onItemSelected={this.onItemSelected}\n                    onItemDelete={this.onItemDelete}\n                    onItemRename={this.props.onItemRename}\n                    onItemMove={this.onItemMove}\n                    onItemCopy={this.props.onItemCopy}\n                    onItemConvert={this.props.onItemConvert}\n                    onDirentClick={this.onDirentClick}\n                    updateDirent={this.props.updateDirent}\n                    isAllItemSelected={this.props.isAllDirentSelected}\n                    onAllItemSelected={this.props.onAllDirentSelected}\n                    selectedDirentList={this.props.selectedDirentList}\n                    onItemsMove={this.props.onItemsMove}\n                    onItemsCopy={this.props.onItemsCopy}\n                    onItemsDelete={this.props.onItemsDelete}\n                    onFileTagChanged={this.props.onFileTagChanged}\n                    showDirentDetail={this.props.showDirentDetail}\n                    loadDirentList={this.props.loadDirentList}\n                  />\n                )}\n                {this.props.currentMode === 'grid' && (\n                  <DirGridView\n                    path={this.props.path}\n                    repoID={repoID}\n                    currentRepoInfo={this.props.currentRepoInfo}\n                    isGroupOwnedRepo={this.props.isGroupOwnedRepo}\n                    userPerm={this.props.userPerm}\n                    enableDirPrivateShare={this.props.enableDirPrivateShare}\n                    onRenameNode={this.props.onRenameNode}\n                    isRepoInfoBarShow={isRepoInfoBarShow}\n                    usedRepoTags={this.props.usedRepoTags}\n                    draftCounts={this.props.draftCounts}\n                    updateUsedRepoTags={this.props.updateUsedRepoTags}\n                    isDirentListLoading={this.props.isDirentListLoading}\n                    direntList={this.props.direntList}\n                    fullDirentList={this.props.fullDirentList}\n                    onAddFile={this.props.onAddFile}\n                    onItemClick={this.onItemClick}\n                    onItemDelete={this.props.onItemDelete}\n                    onItemMove={this.onItemMove}\n                    onItemCopy={this.props.onItemCopy}\n                    onItemConvert={this.props.onItemConvert}\n                    updateDirent={this.props.updateDirent}\n                    onAddFolder={this.props.onAddFolder}\n                    showDirentDetail={this.props.showDirentDetail}\n                    onGridItemClick={this.onGridItemClick}\n                    isDirentDetailShow={this.props.isDirentDetailShow}\n                    onItemRename={this.props.onItemRename}\n                    onFileTagChanged={this.props.onFileTagChanged}\n                  />\n                )}\n                {this.props.currentMode === 'column' && (\n                  <DirColumnView\n                    path={this.props.path}\n                    repoID={repoID}\n                    currentRepoInfo={this.props.currentRepoInfo}\n                    isGroupOwnedRepo={this.props.isGroupOwnedRepo}\n                    userPerm={this.props.userPerm}\n                    enableDirPrivateShare={this.props.enableDirPrivateShare}\n                    isTreeDataLoading={this.props.isTreeDataLoading}\n                    treeData={this.props.treeData}\n                    currentNode={this.props.currentNode}\n                    onNodeClick={this.props.onNodeClick}\n                    onNodeCollapse={this.props.onNodeCollapse}\n                    onNodeExpanded={this.props.onNodeExpanded}\n                    onAddFolderNode={this.props.onAddFolder}\n                    onAddFileNode={this.props.onAddFile}\n                    onRenameNode={this.props.onRenameNode}\n                    onDeleteNode={this.props.onDeleteNode}\n                    isViewFile={this.props.isViewFile}\n                    isFileLoading={this.props.isFileLoading}\n                    isFileLoadedErr={this.props.isFileLoadedErr}\n                    hash={this.props.hash}\n                    isDraft={this.props.isDraft}\n                    hasDraft={this.props.hasDraft}\n                    goDraftPage={this.props.goDraftPage}\n                    filePermission={this.props.filePermission}\n                    content={this.props.content}\n                    lastModified={this.props.lastModified}\n                    latestContributor={this.props.latestContributor}\n                    onLinkClick={this.props.onLinkClick}\n                    isRepoInfoBarShow={isRepoInfoBarShow}\n                    usedRepoTags={this.props.usedRepoTags}\n                    draftCounts={this.props.draftCounts}\n                    updateUsedRepoTags={this.props.updateUsedRepoTags}\n                    isDirentListLoading={this.props.isDirentListLoading}\n                    direntList={this.props.direntList}\n                    fullDirentList={this.props.fullDirentList}\n                    sortBy={this.props.sortBy}\n                    sortOrder={this.props.sortOrder}\n                    sortItems={this.props.sortItems}\n                    onAddFolder={this.props.onAddFolder}\n                    onAddFile={this.props.onAddFile}\n                    onItemClick={this.onItemClick}\n                    onItemSelected={this.onItemSelected}\n                    onItemDelete={this.onItemDelete}\n                    onItemRename={this.props.onItemRename}\n                    onItemMove={this.onItemMove}\n                    onItemCopy={this.props.onItemCopy}\n                    onItemConvert={this.props.onItemConvert}\n                    onDirentClick={this.onDirentClick}\n                    updateDirent={this.props.updateDirent}\n                    isAllItemSelected={this.props.isAllDirentSelected}\n                    onAllItemSelected={this.props.onAllDirentSelected}\n                    selectedDirentList={this.props.selectedDirentList}\n                    onItemsMove={this.props.onItemsMove}\n                    onItemsCopy={this.props.onItemsCopy}\n                    onItemsDelete={this.props.onItemsDelete}\n                    onFileTagChanged={this.props.onFileTagChanged}\n                    showDirentDetail={this.props.showDirentDetail}\n                  />\n                )}\n              </Fragment>\n            )}\n          </div>\n        </div>\n        {this.props.isDirentDetailShow &&\n          <Fragment>\n            <div className=\"cur-view-detail\">\n              {(this.props.path === '/' && !this.state.currentDirent) ?\n                <LibDetail\n                  currentRepo={this.props.currentRepoInfo}\n                  closeDetails={this.props.closeDirentDetail}\n                /> :\n                <DirentDetail\n                  repoID={repoID}\n                  path={this.props.path}\n                  dirent={this.state.currentDirent}\n                  currentRepoInfo={this.props.currentRepoInfo}\n                  fileTags={this.props.isViewFile ? this.props.fileTags : []}\n                  onFileTagChanged={this.props.onFileTagChanged}\n                  onItemDetailsClose={this.props.closeDirentDetail}\n                  direntDetailPanelTab={this.props.direntDetailPanelTab}\n                />\n              }\n            </div>\n          </Fragment>\n        }\n      </Fragment>\n    );\n  }\n}\n\nLibContentContainer.propTypes = propTypes;\n\nexport default LibContentContainer;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\n\nconst propTypes = {\n  resumableFile: PropTypes.object.isRequired,\n  onUploadCancel: PropTypes.func.isRequired,\n  onUploadRetry: PropTypes.func.isRequired,\n};\n\nconst UPLOAD_UPLOADING = 'uploading';\nconst UPLOAD_ERROR = 'error';\nconst UPLOAD_ISSAVING = 'isSaving';\nconst UPLOAD_UPLOADED = 'uploaded';\n\nclass UploadListItem extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      uploadState: UPLOAD_UPLOADING\n    };\n  }\n\n  componentWillReceiveProps(nextProps) {\n    let { resumableFile } = nextProps;\n    let uploadState = UPLOAD_UPLOADING;\n\n    if (resumableFile.error) {\n      uploadState = UPLOAD_ERROR;\n    } else {\n      if (resumableFile.remainingTime === 0 && !resumableFile.isSaved) {\n        uploadState = UPLOAD_ISSAVING;\n      }\n\n      if (resumableFile.isSaved) {\n        uploadState = UPLOAD_UPLOADED;\n      }\n    }\n\n    this.setState({uploadState: uploadState});\n  }\n\n  onUploadCancel = (e) => {\n    e.preventDefault();\n    this.props.onUploadCancel(this.props.resumableFile);\n  };\n\n  onUploadRetry = (e) => {\n    e.preventDefault();\n    this.props.onUploadRetry(this.props.resumableFile);\n  };\n\n  formatFileSize = (size) => {\n    if (typeof size !== 'number') {\n      return '';\n    }\n    if (size >= 1000 * 1000 * 1000) {\n      return (size / (1000 * 1000 * 1000)).toFixed(1) + ' G';\n    }\n    if (size >= 1000 * 1000) {\n      return (size / (1000 * 1000)).toFixed(1) + ' M';\n    }\n    if (size >= 1000) {\n      return (size / 1000).toFixed(1) + ' K';\n    }\n    return size.toFixed(1) + ' B';\n  };\n\n  render() {\n    let { resumableFile } = this.props;\n    let progress = Math.round(resumableFile.progress() * 100);\n    let error = resumableFile.error;\n\n    const fileName = resumableFile.newFileName;\n    const size = this.formatFileSize(resumableFile.size);\n\n    return (\n      <tr className=\"file-upload-item\">\n        <td className=\"upload-name\">\n          <div className=\"ellipsis\" title={fileName}>{fileName}</div>\n        </td>\n        <td className=\"ellipsis\">\n          <span className=\"file-size\" title={size}>{size}</span>\n        </td>\n        <td className=\"upload-progress ellipsis\">\n          {(this.state.uploadState === UPLOAD_UPLOADING || this.state.uploadState === UPLOAD_ISSAVING) &&\n            <Fragment>\n              {resumableFile.size >= (100 * 1000 * 1000) &&\n                <Fragment>\n                  {resumableFile.isUploading() && (\n                    <div className=\"progress-container\">\n                      <div className=\"progress\">\n                        <div className=\"progress-bar\" role=\"progressbar\" style={{width: `${progress}%`}} aria-valuenow={progress} aria-valuemin=\"0\" aria-valuemax=\"100\"></div>\n                      </div>\n                      {(resumableFile.remainingTime === -1) && <div className=\"progress-text\">{gettext('Preparing to upload...')}</div>}\n                      {(resumableFile.remainingTime > 0) && <div className=\"progress-text\">{gettext('Remaining')}{' '}{Utils.formatTime(resumableFile.remainingTime)}</div>}\n                      {(resumableFile.remainingTime === 0) && <div className=\"progress-text\">{gettext('Indexing...')}</div>}\n                    </div>\n                  )}\n                  {!resumableFile.isUploading() && (\n                    <div className=\"progress-container d-flex align-items-center\">\n                      <div className=\"progress\">\n                        <div className=\"progress-bar\" role=\"progressbar\" style={{width: `${progress}%`}} aria-valuenow={progress} aria-valuemin=\"0\" aria-valuemax=\"100\"></div>\n                      </div>\n                    </div>\n                  )}\n                </Fragment>\n              }\n              {(resumableFile.size < (100 * 1000 * 1000)) &&\n                <div className=\"progress-container d-flex align-items-center\">\n                  <div className=\"progress\">\n                    <div className=\"progress-bar\" role=\"progressbar\" style={{width: `${progress}%`}} aria-valuenow={progress} aria-valuemin=\"0\" aria-valuemax=\"100\"></div>\n                  </div>\n                </div>\n              }\n            </Fragment>\n          }\n          {this.state.uploadState === UPLOAD_ERROR && (\n            <div className=\"message err-message ml-0\" dangerouslySetInnerHTML={{__html: error}}></div>\n          )}\n        </td>\n        <td className=\"upload-operation ellipsis\">\n          <Fragment>\n            {this.state.uploadState === UPLOAD_UPLOADING && (\n              <a href=\"#\" onClick={this.onUploadCancel}>{gettext('Cancel')}</a>\n            )}\n            {this.state.uploadState === UPLOAD_ERROR && (\n              <a href=\"#\" onClick={this.onUploadRetry}>{gettext('Retry')}</a>\n            )}\n            {this.state.uploadState === UPLOAD_ISSAVING && (\n              <span className=\"saving\">{gettext('Saving...')}</span>\n            )}\n            {this.state.uploadState === UPLOAD_UPLOADED && (\n              <span className=\"uploaded\">{gettext('Uploaded')}</span>\n            )}\n          </Fragment>\n        </td>\n      </tr>\n    );\n  }\n}\n\nUploadListItem.propTypes = propTypes;\n\nexport default UploadListItem;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext, maxUploadFileSize } from '../../utils/constants';\n\nconst propTypes = {\n  file: PropTypes.object,\n};\n\nclass ForbidUploadListItem extends React.Component {\n\n  render() {\n    let { file } = this.props;\n    let msg = gettext('Please upload files less than {placeholder}M').replace('{placeholder}', maxUploadFileSize);\n    return (\n      <tr className=\"file-upload-item\">\n        <td className=\"upload-name\">\n          <div className=\"ellipsis\" title={file.name}>{file.name}</div>\n        </td>\n\n        <td colSpan={3} className=\"error\">{msg}</td>\n      </tr>\n    );\n  }\n}\n\nForbidUploadListItem.propTypes = propTypes;\n\nexport default ForbidUploadListItem;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport UploadListItem from './upload-list-item';\nimport ForbidUploadListItem from './forbid-upload-list-item';\n\nconst propTypes = {\n  uploadBitrate: PropTypes.number.isRequired,\n  totalProgress: PropTypes.number.isRequired,\n  retryFileList: PropTypes.array.isRequired,\n  uploadFileList: PropTypes.array.isRequired,\n  forbidUploadFileList: PropTypes.array.isRequired,\n  onCloseUploadDialog: PropTypes.func.isRequired,\n  onCancelAllUploading: PropTypes.func.isRequired,\n  onUploadCancel: PropTypes.func.isRequired,\n  onUploadRetry: PropTypes.func.isRequired,\n  onUploadRetryAll: PropTypes.func.isRequired,\n  allFilesUploaded: PropTypes.bool.isRequired,\n};\n\nclass UploadProgressDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isMinimized: false\n    };\n  }\n\n  onCancelAllUploading = () => {\n    this.props.onCancelAllUploading();\n  };\n\n  onMinimizeUpload = (e) => {\n    e.nativeEvent.stopImmediatePropagation();\n    this.setState({isMinimized: !this.state.isMinimized});\n  };\n\n  onCloseUpload = (e) => {\n    e.nativeEvent.stopImmediatePropagation();\n    this.props.onCloseUploadDialog();\n  };\n\n  render() {\n\n    let uploadBitrate = Utils.formatBitRate(this.props.uploadBitrate);\n    let uploadedMessage = gettext('File Upload');\n    let uploadingMessage = gettext('File Uploading...') + ' ' + this.props.totalProgress + '% (' + uploadBitrate + ')';\n\n    let uploadingOptions = (<span className=\"sf2-icon-minus\" onClick={this.onMinimizeUpload}></span>);\n\n    let uploadedOptions = (\n      <Fragment>\n        <span className=\"sf2-icon-minus\" onClick={this.onMinimizeUpload}></span>\n        <span className=\"sf2-icon-x1\" onClick={this.onCloseUpload}></span>\n      </Fragment>\n    );\n\n    let { totalProgress, allFilesUploaded, retryFileList } = this.props;\n\n    return (\n      <div className=\"uploader-list-view mw-100\" style={{height: this.state.isMinimized ? '2.25rem' : '20rem'}}>\n        <div className=\"uploader-list-header\">\n          <div className=\"title\">\n            {totalProgress === 100 ? uploadedMessage : uploadingMessage}\n          </div>\n          <div className=\"uploader-options\">\n            {totalProgress === 100 ||  allFilesUploaded ? uploadedOptions : uploadingOptions}\n          </div>\n        </div>\n        <div className=\"uploader-list-content\">\n          <div className=\"text-right mt-2\">\n            {retryFileList.length > 0 ?\n              <span className=\"cursor-pointer\" onClick={this.props.onUploadRetryAll}>{gettext('Retry All')}</span>\n              :\n              <span className=\"cursor-pointer disabled-link\">{gettext('Retry All')}</span>\n            }\n            {!allFilesUploaded ?\n              <span className=\"cursor-pointer ml-3\" onClick={this.onCancelAllUploading}>{gettext('Cancel All')}</span>\n              :\n              <span className=\"cursor-pointer ml-3 disabled-link\" >{gettext('Cancel All')}</span>\n            }\n          </div>\n          <table className=\"table-thead-hidden\">\n            <thead>\n              <tr>\n                <th width=\"30%\">{gettext('name')}</th>\n                <th width=\"20%\">{gettext('size')}</th>\n                <th width=\"30%\">{gettext('progress')}</th>\n                <th width=\"20%\">{gettext('state')}</th>\n              </tr>\n            </thead>\n            <tbody>\n              {\n                this.props.forbidUploadFileList.map((file, index) => {\n                  return (<ForbidUploadListItem key={index} file={file} />);\n                })\n              }\n              {\n                this.props.uploadFileList.map((resumableFile, index) => {\n                  return (\n                    <UploadListItem\n                      key={index}\n                      resumableFile={resumableFile}\n                      onUploadCancel={this.props.onUploadCancel}\n                      onUploadRetry={this.props.onUploadRetry}\n                    />\n                  );\n                })\n              }\n            </tbody>\n          </table>\n        </div>\n      </div>\n    );\n  }\n}\n\nUploadProgressDialog.propTypes = propTypes;\n\nexport default UploadProgressDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../../utils/constants';\nimport { Modal, ModalHeader, ModalBody, ModalFooter, Button } from 'reactstrap';\n\nconst propTypes = {\n  currentResumableFile: PropTypes.object.isRequired,\n  replaceRepetitionFile: PropTypes.func.isRequired,\n  uploadFile: PropTypes.func.isRequired,\n  cancelFileUpload: PropTypes.func.isRequired,\n};\n\nclass UploadRemindDialog extends React.Component {\n\n  toggle = (e) => {\n    e.nativeEvent.stopImmediatePropagation();\n    this.props.cancelFileUpload();\n  };\n\n  replaceRepetitionFile = (e) => {\n    e.nativeEvent.stopImmediatePropagation();\n    this.props.replaceRepetitionFile();\n  };\n\n  uploadFile = (e) => {\n    e.nativeEvent.stopImmediatePropagation();\n    this.props.uploadFile();\n  };\n\n  render() {\n    const { fileName } = this.props.currentResumableFile;\n    return (\n      <Modal isOpen={true} toggle={this.toggle}>\n        <ModalHeader toggle={this.toggle}>\n          <span>{gettext('Replace file {filename}?').replace('{filename}', fileName)}</span>\n        </ModalHeader>\n        <ModalBody>\n          <p>{gettext('A file with the same name already exists in this folder.')}</p>\n          <p>{gettext('Replacing it will overwrite its content.')}</p>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"primary\" onClick={this.replaceRepetitionFile}>{gettext('Replace')}</Button>\n          <Button color=\"primary\" onClick={this.uploadFile}>{gettext('Don\\'t replace')}</Button>\n          <Button color=\"secondary\" onClick={this.toggle}>{gettext('Cancel')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nUploadRemindDialog.propTypes = propTypes;\n\nexport default UploadRemindDialog;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport Resumablejs from '@seafile/resumablejs';\nimport MD5 from 'MD5';\nimport { resumableUploadFileBlockSize, maxUploadFileSize, maxNumberOfFilesForFileupload } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport { gettext } from '../../utils/constants';\nimport UploadProgressDialog from './upload-progress-dialog';\nimport UploadRemindDialog from '../dialog/upload-remind-dialog';\nimport toaster from '../toast';\nimport '../../css/file-uploader.css';\n\nconst propTypes = {\n  repoID: PropTypes.string.isRequired,\n  direntList: PropTypes.array.isRequired,\n  filetypes: PropTypes.array,\n  chunkSize: PropTypes.number,\n  withCredentials: PropTypes.bool,\n  testMethod: PropTypes.string,\n  testChunks: PropTypes.number,\n  simultaneousUploads: PropTypes.number,\n  fileParameterName: PropTypes.string,\n  minFileSizeErrorCallback: PropTypes.func,\n  fileTypeErrorCallback: PropTypes.func,\n  dragAndDrop: PropTypes.bool.isRequired,\n  path: PropTypes.string.isRequired,\n  onFileUploadSuccess: PropTypes.func.isRequired,\n  isCustomPermission: PropTypes.bool,\n};\n\nclass FileUploader extends React.Component {\n\n  static defaultProps = {\n    isCustomPermission: false\n  };\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      retryFileList: [],\n      uploadFileList: [],\n      forbidUploadFileList: [],\n      totalProgress: 0,\n      isUploadProgressDialogShow: false,\n      isUploadRemindDialogShow: false,\n      currentResumableFile: null,\n      uploadBitrate: 0,\n      allFilesUploaded: false,\n    };\n\n    this.uploadInput = React.createRef();\n\n    this.notifiedFolders = [];\n\n    this.timestamp = null;\n    this.loaded = 0;\n    this.bitrateInterval = 500; // Interval in milliseconds to calculate the bitrate\n    window.onbeforeunload = this.onbeforeunload;\n    this.isUploadLinkLoaded = false;\n  }\n\n  componentDidMount() {\n    this.resumable = new Resumablejs({\n      target: '',\n      query: this.setQuery || {},\n      fileType: this.props.filetypes,\n      maxFiles: maxNumberOfFilesForFileupload || undefined,\n      maxFileSize: maxUploadFileSize * 1000 * 1000 || undefined,\n      testMethod: this.props.testMethod || 'post',\n      testChunks: this.props.testChunks || false,\n      headers: this.setHeaders || {},\n      withCredentials: this.props.withCredentials || false,\n      chunkSize: parseInt(resumableUploadFileBlockSize) * 1024 * 1024 || 1 * 1024 * 1024,\n      simultaneousUploads: this.props.simultaneousUploads || 1,\n      fileParameterName: this.props.fileParameterName,\n      generateUniqueIdentifier: this.generateUniqueIdentifier,\n      forceChunkSize: true,\n      maxChunkRetries: 3,\n      minFileSize: 0,\n    });\n\n    this.resumable.assignBrowse(this.uploadInput.current, true);\n\n    //Enable or Disable DragAnd Drop\n    if (this.props.dragAndDrop === true) {\n      this.resumable.enableDropOnDocument();\n    }\n\n    this.bindCallbackHandler();\n    this.bindEventHandler();\n  }\n\n  componentWillUnmount = () => {\n    window.onbeforeunload = null;\n    if (this.props.dragAndDrop === true) {\n      this.resumable.disableDropOnDocument();\n    }\n  };\n\n  onbeforeunload = () => {\n    if (window.uploader &&\n        window.uploader.isUploadProgressDialogShow &&\n        window.uploader.totalProgress !== 100) {\n      return '';\n    }\n  };\n\n  bindCallbackHandler = () => {\n    let { minFileSizeErrorCallback, fileTypeErrorCallback } = this.props;\n\n    if (this.maxFilesErrorCallback) {\n      this.resumable.opts.maxFilesErrorCallback = this.maxFilesErrorCallback;\n    }\n\n    if (minFileSizeErrorCallback) {\n      this.resumable.opts.minFileSizeErrorCallback = this.props.minFileSizeErrorCallback;\n    }\n\n    if (this.maxFileSizeErrorCallback) {\n      this.resumable.opts.maxFileSizeErrorCallback = this.maxFileSizeErrorCallback;\n    }\n\n    if (fileTypeErrorCallback) {\n      this.resumable.opts.fileTypeErrorCallback = this.props.fileTypeErrorCallback;\n    }\n\n  };\n\n  bindEventHandler = () => {\n    this.resumable.on('chunkingComplete', this.onChunkingComplete.bind(this));\n    this.resumable.on('fileAdded', this.onFileAdded.bind(this));\n    this.resumable.on('filesAddedComplete', this.filesAddedComplete.bind(this));\n    this.resumable.on('fileProgress', this.onFileProgress.bind(this));\n    this.resumable.on('fileSuccess', this.onFileUploadSuccess.bind(this));\n    this.resumable.on('progress', this.onProgress.bind(this));\n    this.resumable.on('complete', this.onComplete.bind(this));\n    this.resumable.on('pause', this.onPause.bind(this));\n    this.resumable.on('fileRetry', this.onFileRetry.bind(this));\n    this.resumable.on('fileError', this.onFileError.bind(this));\n    this.resumable.on('error', this.onError.bind(this));\n    this.resumable.on('beforeCancel', this.onBeforeCancel.bind(this));\n    this.resumable.on('cancel', this.onCancel.bind(this));\n    this.resumable.on('dragstart', this.onDragStart.bind(this));\n  };\n\n  maxFilesErrorCallback = (files, errorCount) => {\n    let maxFiles = maxNumberOfFilesForFileupload;\n    let message = gettext('Please upload no more than {maxFiles} files at a time.');\n    message = message.replace('{maxFiles}', maxFiles);\n    toaster.danger(message);\n  };\n\n  maxFileSizeErrorCallback = (file) => {\n    let { forbidUploadFileList } = this.state;\n    forbidUploadFileList.push(file);\n    this.setState({forbidUploadFileList: forbidUploadFileList});\n  };\n\n  onChunkingComplete = (resumableFile) => {\n\n    let allFilesUploaded = this.state.allFilesUploaded;\n    if (allFilesUploaded === true) {\n      this.setState({allFilesUploaded: false});\n    }\n\n    //get parent_dir relative_path\n    let path = this.props.path === '/' ? '/' : this.props.path + '/';\n    let fileName = resumableFile.fileName;\n    let relativePath = resumableFile.relativePath;\n    let isFile = fileName === relativePath;\n\n    //update formdata\n    resumableFile.formData = {};\n    if (isFile) { // upload file\n      resumableFile.formData  = {\n        parent_dir: path,\n      };\n    } else { // upload folder\n      let relative_path = relativePath.slice(0, relativePath.lastIndexOf('/') + 1);\n      resumableFile.formData  = {\n        parent_dir: path,\n        relative_path: relative_path\n      };\n    }\n  };\n\n  onFileAdded = (resumableFile, files) => {\n    const { isCustomPermission } = this.props;\n    let isFile = resumableFile.fileName === resumableFile.relativePath;\n    // uploading is file and only upload one file\n    if (isFile && files.length === 1) {\n      let hasRepetition = false;\n      if (!isCustomPermission) {\n        let direntList = this.props.direntList;\n        for (let i = 0; i < direntList.length; i++) {\n          if (direntList[i].type === 'file' && direntList[i].name === resumableFile.fileName) {\n            hasRepetition = true;\n            break;\n          }\n        }\n      }\n      if (hasRepetition) {\n        this.setState({\n          isUploadRemindDialogShow: true,\n          currentResumableFile: resumableFile,\n        });\n      } else {\n        this.setUploadFileList(this.resumable.files);\n        let { repoID, path } = this.props;\n        seafileAPI.getFileServerUploadLink(repoID, path).then(res => {\n          this.resumable.opts.target = res.data + '?ret-json=1';\n          this.resumableUpload(resumableFile);\n        }).catch(error => {\n          let errMessage = Utils.getErrorMsg(error);\n          toaster.danger(errMessage);\n        });\n      }\n    } else {\n      this.setUploadFileList(this.resumable.files);\n      if (!this.isUploadLinkLoaded) {\n        this.isUploadLinkLoaded = true;\n        let { repoID, path } = this.props;\n        seafileAPI.getFileServerUploadLink(repoID, path).then(res => {\n          this.resumable.opts.target = res.data + '?ret-json=1';\n          this.resumable.upload();\n        }).catch(error => {\n          let errMessage = Utils.getErrorMsg(error);\n          toaster.danger(errMessage);\n        });\n      }\n    }\n  };\n\n  resumableUpload = (resumableFile) => {\n    let { repoID, path } = this.props;\n    seafileAPI.getFileUploadedBytes(repoID, path, resumableFile.fileName).then(res => {\n      let uploadedBytes = res.data.uploadedBytes;\n      let blockSize = parseInt(resumableUploadFileBlockSize) * 1024 * 1024 || 1024 * 1024;\n      let offset = Math.floor(uploadedBytes / blockSize);\n      resumableFile.markChunksCompleted(offset);\n      this.resumable.upload();\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  filesAddedComplete = (resumable, files) => {\n    let { forbidUploadFileList } = this.state;\n    if (forbidUploadFileList.length > 0 && files.length === 0) {\n      this.setState({\n        isUploadProgressDialogShow: true,\n        totalProgress: 100\n      });\n    }\n  };\n\n  setUploadFileList = () => {\n    let uploadFileList = this.resumable.files;\n    this.setState({\n      uploadFileList: uploadFileList,\n      isUploadProgressDialogShow: true,\n    });\n    Utils.registerGlobalVariable('uploader', 'isUploadProgressDialogShow', true);\n  };\n\n  onFileProgress = (resumableFile) => {\n    let uploadBitrate = this.getBitrate();\n    let uploadFileList = this.state.uploadFileList.map(item => {\n      if (item.uniqueIdentifier === resumableFile.uniqueIdentifier) {\n        if (uploadBitrate) {\n          let lastSize = (item.size - (item.size * item.progress())) * 8;\n          let time = Math.floor(lastSize / uploadBitrate);\n          item.remainingTime = time;\n        }\n      }\n      return item;\n    });\n\n    this.setState({\n      uploadBitrate: uploadBitrate,\n      uploadFileList: uploadFileList\n    });\n  };\n\n  getBitrate = () => {\n    let loaded = 0;\n    let uploadBitrate = 0;\n    let now = new Date().getTime();\n\n    this.resumable.files.forEach(file => {\n      loaded += file.progress() * file.size;\n    });\n\n    if (this.timestamp) {\n      let timeDiff = (now - this.timestamp);\n      if (timeDiff < this.bitrateInterval) {\n        return this.state.uploadBitrate;\n      }\n\n      // 1. Cancel will produce loaded greater than this.loaded\n      // 2. reset can make this.loaded to be 0\n      if (loaded < this.loaded || this.loaded === 0) {\n        this.loaded = loaded; //\n      }\n\n      uploadBitrate = (loaded - this.loaded) * (1000 / timeDiff) * 8;\n    }\n\n    this.timestamp = now;\n    this.loaded = loaded;\n\n    return uploadBitrate;\n  };\n\n  onProgress = () => {\n    let progress = Math.round(this.resumable.progress() * 100);\n    this.setState({totalProgress: progress});\n    Utils.registerGlobalVariable('uploader', 'totalProgress', progress);\n  };\n\n  onFileUploadSuccess = (resumableFile, message) => {\n    let formData = resumableFile.formData;\n    let currentTime = new Date().getTime()/1000;\n    message = formData.replace ? message : JSON.parse(message)[0];\n    if (formData.relative_path) { // upload folder\n      let relative_path = formData.relative_path;\n      let dir_name = relative_path.slice(0, relative_path.indexOf('/'));\n      let dirent = {\n        id: message.id,\n        name: dir_name,\n        type: 'dir',\n        mtime: currentTime,\n      };\n\n      // update folders cache\n      let isExist = this.notifiedFolders.some(item => {return item.name === dirent.name;});\n      if (!isExist) {\n        this.notifiedFolders.push(dirent);\n        this.props.onFileUploadSuccess(dirent);\n      }\n\n      // update uploadFileList\n      let uploadFileList = this.state.uploadFileList.map(item => {\n        if (item.uniqueIdentifier === resumableFile.uniqueIdentifier) {\n          item.newFileName = relative_path + message.name;\n          item.isSaved = true;\n        }\n        return item;\n      });\n      this.setState({uploadFileList: uploadFileList});\n\n      return;\n    }\n\n    if (formData.replace) { // upload file -- replace exist file\n      let fileName = resumableFile.fileName;\n      let dirent = {\n        id: message,\n        name: fileName,\n        type: 'file',\n        mtime: currentTime\n      };\n      this.props.onFileUploadSuccess(dirent); // this contance: just one file\n\n      let uploadFileList = this.state.uploadFileList.map(item => {\n        if (item.uniqueIdentifier === resumableFile.uniqueIdentifier) {\n          item.newFileName = fileName;\n          item.isSaved = true;\n        }\n        return item;\n      });\n      this.setState({uploadFileList: uploadFileList});\n\n      return;\n    }\n\n    // upload file -- add files\n    let dirent = {\n      id: message.id,\n      type: 'file',\n      name: message.name,\n      size: message.size,\n      mtime: currentTime,\n    };\n    this.props.onFileUploadSuccess(dirent); // this contance:  no repetition file\n\n    let uploadFileList = this.state.uploadFileList.map(item => {\n      if (item.uniqueIdentifier === resumableFile.uniqueIdentifier) {\n        item.newFileName = message.name;\n        item.isSaved = true;\n      }\n      return item;\n    });\n    this.setState({uploadFileList: uploadFileList});\n  };\n\n  getFileServerErrorMessage = (key) => {\n    const errorMessage = {\n      'File locked by others.': gettext('File is locked by others.'),       // 403\n      'Invalid filename.': gettext('Invalid filename.'),                    // 440\n      'File already exists.': gettext('File already exists.'),              // 441\n      'File size is too large.': gettext('File size is too large.'),        // 442\n      'Out of quota.': gettext('Out of quota.'),                            // 443\n      'Internal error.': gettext('Internal Server Error'),                  // 500\n    };\n    return errorMessage[key] || key;\n  };\n\n  onFileError = (resumableFile, message) => {\n    let error = '';\n    if (!message) {\n      error = gettext('Network error');\n    } else {\n      // eg: '{\"error\": \"Internal error\" \\n }'\n      let errorMessage = message.replace(/\\n/g, '');\n      errorMessage  = JSON.parse(errorMessage);\n      error = this.getFileServerErrorMessage(errorMessage.error);\n    }\n\n    let uploadFileList = this.state.uploadFileList.map(item => {\n      if (item.uniqueIdentifier === resumableFile.uniqueIdentifier) {\n        this.state.retryFileList.push(item);\n        item.error = error;\n      }\n      return item;\n    });\n\n    this.loaded = 0;  // reset loaded data;\n    this.setState({\n      retryFileList: this.state.retryFileList,\n      uploadFileList: uploadFileList\n    });\n\n  };\n\n  onComplete = () => {\n    this.notifiedFolders = [];\n    // reset upload link loaded\n    this.isUploadLinkLoaded = false;\n    this.setState({allFilesUploaded: true});\n  };\n\n  onPause = () => {\n\n  };\n\n  onError = (message) => {\n    // reset upload link loaded\n    this.isUploadLinkLoaded = false;\n    // After the error, the user can switch windows\n    Utils.registerGlobalVariable('uploader', 'totalProgress', 100);\n  };\n\n  onFileRetry = () => {\n    // todo, cancel upload file, uploded again;\n  };\n\n  onBeforeCancel = () => {\n    // todo, giving a pop message ?\n  };\n\n  onCancel = () => {\n\n  };\n\n  setHeaders = (resumableFile, resumable) => {\n    let offset = resumable.offset;\n    let chunkSize = resumable.getOpt('chunkSize');\n    let fileSize = resumableFile.size === 0 ? 1 : resumableFile.size;\n    let startByte = offset !== 0 ? offset * chunkSize : 0;\n    let endByte = Math.min(fileSize, (offset + 1) * chunkSize) - 1;\n\n    if (fileSize - resumable.endByte < chunkSize && !resumable.getOpt('forceChunkSize')) {\n      endByte = fileSize;\n    }\n\n    let headers = {\n      'Accept': 'application/json; text/javascript, */*; q=0.01',\n      'Content-Disposition': 'attachment; filename=\"' + encodeURI(resumableFile.fileName) + '\"',\n      'Content-Range': 'bytes ' + startByte + '-' + endByte + '/' + fileSize,\n    };\n\n    return headers;\n  };\n\n  setQuery = (resumableFile) => {\n    let formData = resumableFile.formData;\n    return formData;\n  };\n\n  generateUniqueIdentifier = (file) => {\n    let relativePath = file.webkitRelativePath||file.relativePath||file.fileName||file.name;\n    return MD5(relativePath + new Date()) + relativePath;\n  };\n\n  onClick = (e) => {\n    e.nativeEvent.stopImmediatePropagation();\n    e.stopPropagation();\n  };\n\n  onFileUpload = () => {\n    this.uploadInput.current.removeAttribute('webkitdirectory');\n\n    this.uploadInput.current.click();\n  };\n\n  onFolderUpload = () => {\n    this.uploadInput.current.setAttribute('webkitdirectory', 'webkitdirectory');\n    this.uploadInput.current.click();\n  };\n\n  onDragStart = () => {\n    this.uploadInput.current.setAttribute('webkitdirectory', 'webkitdirectory');\n  };\n\n  onCloseUploadDialog = () => {\n    this.loaded = 0;\n    this.resumable.files = [];\n    // reset upload link loaded\n    this.isUploadLinkLoaded = false;\n    this.setState({isUploadProgressDialogShow: false, uploadFileList: [], forbidUploadFileList: []});\n    Utils.registerGlobalVariable('uploader', 'isUploadProgressDialogShow', false);\n  };\n\n  onUploadCancel = (uploadingItem) => {\n\n    let uploadFileList = this.state.uploadFileList.filter(item => {\n      if (item.uniqueIdentifier === uploadingItem.uniqueIdentifier) {\n        item.cancel(); // execute cancel function will delete the file at the same time\n        return false;\n      }\n      return true;\n    });\n\n    if (!this.resumable.isUploading()) {\n      this.setState({\n        totalProgress: '100',\n        allFilesUploaded: true,\n      });\n      this.loaded = 0;\n    }\n\n    this.setState({uploadFileList: uploadFileList});\n  };\n\n  onCancelAllUploading = () => {\n    let uploadFileList = this.state.uploadFileList.filter(item => {\n      if (Math.round(item.progress() !== 1)) {\n        item.cancel();\n        return false;\n      }\n      return true;\n    });\n\n    this.loaded = 0;\n\n    this.setState({\n      allFilesUploaded: true,\n      totalProgress: '100',\n      uploadFileList: uploadFileList\n    });\n    // reset upload link loaded\n    this.isUploadLinkLoaded = false;\n  };\n\n  onUploadRetry = (resumableFile) => {\n\n    seafileAPI.getFileServerUploadLink(this.props.repoID, this.props.path).then(res => {\n      this.resumable.opts.target = res.data + '?ret-json=1';\n\n      let retryFileList = this.state.retryFileList.filter(item => {\n        return item.uniqueIdentifier !== resumableFile.uniqueIdentifier;\n      });\n      let uploadFileList = this.state.uploadFileList.map(item => {\n        if (item.uniqueIdentifier === resumableFile.uniqueIdentifier) {\n          item.error = null;\n          this.retryUploadFile(item);\n        }\n        return item;\n      });\n\n      this.setState({\n        retryFileList: retryFileList,\n        uploadFileList: uploadFileList\n      });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  onUploadRetryAll = () => {\n\n    seafileAPI.getFileServerUploadLink(this.props.repoID, this.props.path).then(res => {\n      this.resumable.opts.target = res.data + '?ret-json=1';\n      this.state.retryFileList.forEach(item => {\n        item.error = false;\n        this.retryUploadFile(item);\n      });\n\n      let uploadFileList = this.state.uploadFileList.slice(0);\n      this.setState({\n        retryFileList: [],\n        uploadFileList: uploadFileList\n      });\n\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  retryUploadFile = (resumableFile) => {\n    let { repoID, path } = this.props;\n    let fileName = resumableFile.fileName;\n    let isFile = resumableFile.fileName === resumableFile.relativePath;\n    if (!isFile) {\n      let relative_path = resumableFile.formData.relative_path;\n      let prefix = path === '/' ? (path + relative_path) : (path + '/' + relative_path);\n      fileName = prefix + fileName;\n    }\n\n    resumableFile.bootstrap();\n    var firedRetry = false;\n    resumableFile.resumableObj.on('chunkingComplete', () => {\n      if(!firedRetry) {\n        seafileAPI.getFileUploadedBytes(repoID, path, fileName).then(res => {\n          let uploadedBytes = res.data.uploadedBytes;\n          let blockSize = parseInt(resumableUploadFileBlockSize) * 1024 * 1024 || 1024 * 1024;\n          let offset = Math.floor(uploadedBytes / blockSize);\n          resumableFile.markChunksCompleted(offset);\n\n          resumableFile.resumableObj.upload();\n\n        }).catch(error => {\n          let errMessage = Utils.getErrorMsg(error);\n          toaster.danger(errMessage);\n        });\n      }\n      firedRetry = true;\n    });\n\n  };\n\n  replaceRepetitionFile = () => {\n    let { repoID, path } = this.props;\n    seafileAPI.getUpdateLink(repoID, path).then(res => {\n      this.resumable.opts.target = res.data;\n\n      let resumableFile = this.resumable.files[this.resumable.files.length - 1];\n      resumableFile.formData['replace'] = 1;\n      resumableFile.formData['target_file'] = resumableFile.formData.parent_dir + resumableFile.fileName;\n      this.setState({isUploadRemindDialogShow: false});\n      this.setUploadFileList(this.resumable.files);\n      this.resumable.upload();\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  uploadFile = () => {\n    let resumableFile = this.resumable.files[this.resumable.files.length - 1];\n    let { repoID, path } = this.props;\n    seafileAPI.getFileServerUploadLink(repoID, path).then((res) => {  // get upload link\n      this.resumable.opts.target = res.data + '?ret-json=1';\n      this.setState({\n        isUploadRemindDialogShow: false,\n        isUploadProgressDialogShow: true,\n        uploadFileList: [...this.state.uploadFileList, resumableFile]\n      }, () => {\n        this.resumable.upload();\n      });\n      Utils.registerGlobalVariable('uploader', 'isUploadProgressDialogShow', true);\n\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  cancelFileUpload = () => {\n    this.resumable.files.pop(); //delete latest file\n    this.setState({isUploadRemindDialogShow: false});\n  };\n\n  render() {\n    return (\n      <Fragment>\n        <div className=\"file-uploader-container\">\n          <div className=\"file-uploader\">\n            <input className=\"upload-input\" type=\"file\" ref={this.uploadInput} onClick={this.onClick}/>\n          </div>\n        </div>\n        {this.state.isUploadRemindDialogShow &&\n          <UploadRemindDialog\n            currentResumableFile={this.state.currentResumableFile}\n            replaceRepetitionFile={this.replaceRepetitionFile}\n            uploadFile={this.uploadFile}\n            cancelFileUpload={this.cancelFileUpload}\n          />\n        }\n        {this.state.isUploadProgressDialogShow &&\n          <UploadProgressDialog\n            retryFileList={this.state.retryFileList}\n            uploadFileList={this.state.uploadFileList}\n            forbidUploadFileList={this.state.forbidUploadFileList}\n            totalProgress={this.state.totalProgress}\n            uploadBitrate={this.state.uploadBitrate}\n            allFilesUploaded={this.state.allFilesUploaded}\n            onCloseUploadDialog={this.onCloseUploadDialog}\n            onCancelAllUploading={this.onCancelAllUploading}\n            onUploadCancel={this.onUploadCancel}\n            onUploadRetry={this.onUploadRetry}\n            onUploadRetryAll={this.onUploadRetryAll}\n          />\n        }\n      </Fragment>\n    );\n  }\n}\n\nFileUploader.propTypes = propTypes;\n\nexport default FileUploader;\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Modal, ModalHeader, ModalBody, ModalFooter, Button } from 'reactstrap';\nimport { gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\n\nconst propTypes = {\n  repoID: PropTypes.string.isRequired,\n  path: PropTypes.string.isRequired,\n  deleteFolder: PropTypes.func.isRequired,\n  toggleDialog: PropTypes.func.isRequired\n};\n\nclass DeleteFolderDialog extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      sharedToUserCount: 0,\n      sharedToGroupCount: 0\n    };\n  }\n\n  componentDidMount() {\n    const { repoID, path } = this.props;\n    seafileAPI.getRepoFolderShareInfo(repoID, path).then((res) => {\n      this.setState({\n        sharedToUserCount: res.data['shared_user_emails'].length,\n        sharedToGroupCount: res.data['shared_group_ids'].length\n      });\n    });\n  }\n\n  deleteFolder = () => {\n    this.props.deleteFolder();\n    this.props.toggleDialog();\n  };\n\n  render() {\n    const { sharedToUserCount, sharedToGroupCount } = this.state;\n    const { path, toggleDialog } = this.props;\n    const folderName = Utils.getFileName(path);\n    const opTarget = '<span class=\"op-target\">' + Utils.HTMLescape(folderName) + '</span>';\n    const message = gettext('Are you sure you want to delete %s ?').replace('%s', opTarget);\n\n    let alert_message = '';\n    if (sharedToUserCount > 0 || sharedToGroupCount > 0) {\n      alert_message = gettext('This folder has been shared to {user_amount} user(s) and {group_amount} group(s).')\n        .replace('{user_amount}', sharedToUserCount)\n        .replace('{group_amount}', sharedToGroupCount);\n    }\n\n    return (\n      <Modal isOpen={true} toggle={toggleDialog}>\n        <ModalHeader toggle={toggleDialog}>{gettext('Delete Folder')}</ModalHeader>\n        <ModalBody>\n          <p dangerouslySetInnerHTML={{__html: message}}></p>\n          {alert_message && <p className=\"error\">{alert_message}</p>}\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={toggleDialog}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.deleteFolder}>{gettext('Delete')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nDeleteFolderDialog.propTypes = propTypes;\n\nexport default DeleteFolderDialog;\n","import React from 'react';\nimport { Modal, ModalBody } from 'reactstrap';\nimport Loading from '../loading';\nimport { gettext } from '../../utils/constants';\n\nimport '../../css/convert-markdown.css';\n\nfunction ConvertMarkdownDialog() {\n  return (\n    <Modal isOpen={true} centered={true} className=\"container-markdown-container\">\n      <ModalBody className='container-markdown-content'>\n        <Loading />\n        <div className='d-flex justify-content-center'>{gettext('Converting')}...</div>\n      </ModalBody>\n    </Modal>\n  );\n}\n\nexport default ConvertMarkdownDialog;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport cookie from 'react-cookies';\nimport moment from 'moment';\nimport { navigate } from '@gatsbyjs/reach-router';\nimport { gettext, siteRoot, username, isDocs, enableVideoThumbnail } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport collabServer from '../../utils/collab-server';\nimport Dirent from '../../models/dirent';\nimport FileTag from '../../models/file-tag';\nimport RepoTag from '../../models/repo-tag';\nimport RepoInfo from '../../models/repo-info';\nimport TreeNode from '../../components/tree-view/tree-node';\nimport treeHelper from '../../components/tree-view/tree-helper';\nimport toaster from '../../components/toast';\nimport ModalPortal from '../../components/modal-portal';\nimport LibDecryptDialog from '../../components/dialog/lib-decrypt-dialog';\nimport LibContentToolbar from './lib-content-toolbar';\nimport LibContentContainer from './lib-content-container';\nimport FileUploader from '../../components/file-uploader/file-uploader';\nimport CopyMoveDirentProgressDialog from '../../components/dialog/copy-move-dirent-progress-dialog';\nimport DeleteFolderDialog from '../../components/dialog/delete-folder-dialog';\nimport ConvertMarkdownDialog from '../../components/dialog/convert-markdown-dialog';\n\nconst propTypes = {\n  pathPrefix: PropTypes.array.isRequired,\n  onTabNavClick: PropTypes.func.isRequired,\n  onMenuClick: PropTypes.func.isRequired,\n  repoID: PropTypes.string,\n};\n\nclass LibContentView extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      currentMode: cookie.load('seafile_view_mode') || 'list',\n      path: '',\n      pathExist: true,\n      isViewFile: false,\n      hash: '',\n      currentRepoInfo: null,\n      repoName: '',\n      repoEncrypted: false,\n      libNeedDecrypt: false,\n      isGroupOwnedRepo: false,\n      userPerm: '',\n      selectedDirentList: [],\n      isDraft: false,\n      hasDraft: false,\n      fileTags: [],\n      draftID: '',\n      draftCounts: 0,\n      usedRepoTags: [],\n      isTreeDataLoading: true,\n      treeData: treeHelper.buildTree(),\n      currentNode: null,\n      isFileLoading: true,\n      isFileLoadedErr: false,\n      filePermission: '',\n      content: '',\n      lastModified: '',\n      latestContributor: '',\n      isDirentListLoading: true,\n      direntList: [],\n      isDirentSelected: false,\n      sortBy: cookie.load('seafile-repo-dir-sort-by') || 'name', // 'name' or 'time' or 'size'\n      sortOrder: cookie.load('seafile-repo-dir-sort-order') || 'asc', // 'asc' or 'desc'\n      isAllDirentSelected: false,\n      dirID: '',  // for update dir list\n      errorMsg: '',\n      isDirentDetailShow: false,\n      direntDetailPanelTab: '',\n      updateDetail: false,\n      itemsShowLength: 100,\n      isSessionExpired: false,\n      isCopyMoveProgressDialogShow: false,\n      isDeleteFolderDialogOpen: false,\n      asyncCopyMoveTaskId: '',\n      asyncOperationType: 'move',\n      asyncOperationProgress: 0,\n      asyncOperatedFilesLength: 0,\n      isConvertLoading: false,\n    };\n\n    this.oldonpopstate = window.onpopstate;\n    window.onpopstate = this.onpopstate;\n    this.lastModifyTime = new Date();\n    this.isNeedUpdateHistoryState = true; // Load, refresh page, switch mode for the first time, no need to set historyState\n    this.currentMoveItemName = '';\n    this.currentMoveItemPath = '';\n  }\n\n  showDirentDetail = (direntDetailPanelTab) => {\n    if (direntDetailPanelTab) {\n      this.setState({ direntDetailPanelTab: direntDetailPanelTab }, () => {\n        this.setState({ isDirentDetailShow: true });\n      });\n    } else {\n      this.setState({\n        direntDetailPanelTab: '',\n        isDirentDetailShow: true\n      });\n    }\n  };\n\n  toggleDirentDetail = () => {\n    this.setState({\n      direntDetailPanelTab: '',\n      isDirentDetailShow: !this.state.isDirentDetailShow\n    });\n  };\n\n  closeDirentDetail = () => {\n    this.setState({\n      isDirentDetailShow: false,\n      direntDetailPanelTab: '',\n    });\n  };\n\n  componentWillMount() {\n    const hash = window.location.hash;\n    if (hash.slice(0, 1) === '#') {\n      this.setState({hash: hash});\n    }\n  }\n\n  async componentDidMount() {\n    // eg: http://127.0.0.1:8000/library/repo_id/repo_name/**/**/\\\n    let repoID = this.props.repoID;\n    let location = window.location.href.split('#')[0];\n    location = decodeURIComponent(location);\n    let path = location.slice(location.indexOf(repoID) + repoID.length + 1); // get the string after repoID\n    path = path.slice(path.indexOf('/')); // get current path\n    // If the path isn't a root path and ends with '/', delete the ending '/'\n    if (path.length > 1 && path[path.length - 1] === '/') {\n      path = path.slice(0, path.length - 1);\n    }\n\n    try {\n      const repoRes = await seafileAPI.getRepoInfo(repoID);\n      const repoInfo = new RepoInfo(repoRes.data);\n      const isGroupOwnedRepo = repoInfo.owner_email.indexOf('@seafile_group') > -1;\n\n      this.setState({\n        currentRepoInfo: repoInfo,\n      });\n\n      if (repoInfo.permission.startsWith('custom-')) {\n        const permissionID = repoInfo.permission.split('-')[1];\n        const permissionRes = await seafileAPI.getCustomPermission(repoID, permissionID);\n        window.custom_permission = permissionRes.data.permission;\n      }\n\n      this.isNeedUpdateHistoryState = false;\n      this.setState({\n        repoName: repoInfo.repo_name,\n        libNeedDecrypt: repoInfo.lib_need_decrypt,\n        repoEncrypted: repoInfo.encrypted,\n        isGroupOwnedRepo: isGroupOwnedRepo,\n        path: path\n      });\n\n      if (!repoInfo.lib_need_decrypt) {\n        this.loadDirData(path);\n      }\n    } catch (error) {\n      if (error.response) {\n        if (error.response.status == 403) {\n          this.setState({\n            isDirentListLoading: false,\n            errorMsg: gettext('Permission denied')\n          });\n\n          let errorMsg = gettext('Permission denied');\n          toaster.danger(errorMsg);\n        } else if (error.response.status == 404) {\n          this.setState({\n            isDirentListLoading: false,\n            errorMsg: gettext('Library share permission not found.')\n          });\n        } else {\n          this.setState({\n            isDirentListLoading: false,\n            errorMsg: gettext('Error')\n          });\n        }\n      } else {\n        this.setState({\n          isDirentListLoading: false,\n          errorMsg: gettext('Please check the network.')\n        });\n      }\n    }\n  }\n\n  componentWillUnmount() {\n    window.onpopstate = this.oldonpopstate;\n    collabServer.unwatchRepo(this.props.repoID, this.onRepoUpdateEvent);\n  }\n\n  componentDidUpdate() {\n    this.lastModifyTime = new Date();\n  }\n\n  onpopstate = (event) => {\n    if (event.state && event.state.key) { // root path\n      if (this.state.path === '/') {\n        return;\n      } else {\n        let path = '/';\n        this.loadDirentList(path);\n        this.setState({\n          path: path,\n          isViewFile: false\n        });\n      }\n    } else if (event.state && event.state.path) { // file path\n      let path = event.state.path;\n      if (this.state.currentMode === 'column') {\n        if (Utils.isMarkdownFile(path)) { // Judging not strict\n          this.showFile(path);\n          return;\n        }\n      }\n      this.loadDirentList(path);\n      this.setState({\n        path: path,\n        isViewFile: false\n      });\n    }\n  };\n\n  onRepoUpdateEvent = () => {\n    let currentTime = new Date();\n    if ((parseFloat(currentTime - this.lastModifyTime)/1000) <= 5) {\n      return;\n    }\n    let repoID = this.props.repoID;\n    let { path, dirID } = this.state;\n\n    if (this.state.currentMode === 'column') {\n      if (this.state.isViewFile) {\n        this.updateColumnMarkdownData(path);\n      } else {\n        seafileAPI.dirMetaData(repoID, path).then((res) => {\n          if (res.data.id !== dirID) {\n            this.loadDirentList(path);\n          }\n        }).catch(error => {\n          let errMessage = Utils.getErrorMsg(error);\n          toaster.danger(errMessage);\n        });\n      }\n    } else {\n      seafileAPI.dirMetaData(repoID, path).then((res) => {\n        if (res.data.id !== dirID) {\n          this.loadDirentList(path);\n        }\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    }\n  };\n\n  updateUsedRepoTags = () => {\n    let repoID = this.props.repoID;\n    seafileAPI.listRepoTags(repoID).then(res => {\n      let usedRepoTags = [];\n      res.data.repo_tags.forEach(item => {\n        let usedRepoTag = new RepoTag(item);\n        if (usedRepoTag.fileCount > 0) {\n          usedRepoTags.push(usedRepoTag);\n        }\n      });\n      this.setState({usedRepoTags: usedRepoTags});\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  updateColumnMarkdownData = (filePath) => {\n    let repoID = this.props.repoID;\n    // update state\n    this.setState({\n      path: filePath,\n      isViewFile: true\n    });\n\n    // update data\n    seafileAPI.getFileInfo(repoID, filePath).then((res) => {\n      let { mtime, permission, last_modifier_name, is_draft, has_draft, draft_id } = res.data;\n      seafileAPI.getFileDownloadLink(repoID, filePath).then((res) => {\n        seafileAPI.getFileContent(res.data).then((res) => {\n          if (this.state.content !== res.data) {\n            this.setState({isFileLoading: true});\n          }\n          this.setState({\n            content: res.data,\n            filePermission: permission,\n            latestContributor: last_modifier_name,\n            lastModified: moment.unix(mtime).fromNow(),\n            isFileLoading: false,\n            isFileLoadedErr: false,\n            isDraft: is_draft,\n            hasDraft: has_draft,\n            draftID: draft_id\n          });\n        });\n      });\n    }).catch(() => {\n      this.setState({\n        isFileLoading: false,\n        isFileLoadedErr: true,\n      });\n    });\n  };\n\n  // load data\n  loadDirData = (path) => {\n    let repoID = this.props.repoID;\n\n    // listen current repo\n    collabServer.watchRepo(repoID, this.onRepoUpdateEvent);\n\n    // list used FileTags\n    this.updateUsedRepoTags();\n\n    // list draft counts and review counts\n    if (isDocs) {\n      seafileAPI.getRepoDraftCounts(repoID).then(res => {\n        this.setState({\n          draftCounts: res.data.draft_counts,\n        });\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    }\n\n    if (Utils.isMarkdownFile(path)) {\n      seafileAPI.getFileInfo(this.props.repoID, path).then(() => {\n        if (this.state.currentMode !== 'column') {\n          cookie.save('seafile_view_mode', 'column');\n          this.setState({currentMode: 'column'});\n        }\n        this.loadSidePanel(path);\n        this.showFile(path);\n      }).catch(() => {\n        if (this.state.currentMode === 'column') { // After an error occurs, follow dir\n          this.loadSidePanel(path);\n          this.showDir(path);\n        } else {\n          this.showDir(path);\n        }\n      });\n    } else {\n      if (this.state.currentMode === 'column') {\n        this.loadSidePanel(path);\n        this.showDir(path);\n      } else {\n        this.showDir(path);\n      }\n    }\n  };\n\n  loadSidePanel = (path) => {\n    let repoID = this.props.repoID;\n    if (path === '/') {\n      seafileAPI.listDir(repoID, '/').then(res => {\n        const { dirent_list, user_perm } = res.data;\n        let tree = this.state.treeData;\n        this.addResponseListToNode(dirent_list, tree.root);\n        this.setState({\n          isTreeDataLoading: false,\n          treeData: tree,\n          userPerm: user_perm,\n        });\n      }).catch(() => {\n        this.setState({isTreeDataLoading: false});\n      });\n    } else {\n      this.loadNodeAndParentsByPath(path);\n    }\n  };\n\n  showDir = (path) => {\n    let repoID = this.props.repoID;\n\n    if (!this.state.isSessionExpired) {\n      // update stste\n      this.setState({\n        isDirentListLoading: true,\n        isViewFile: false,\n        selectedDirentList: [],\n      });\n    }\n\n    // update data\n    this.loadDirentList(path);\n    this.resetShowLength();\n\n    if (!this.isNeedUpdateHistoryState) {\n      this.isNeedUpdateHistoryState = true;\n      return;\n    }\n    // update location\n    let repoInfo = this.state.currentRepoInfo;\n    let url = siteRoot + 'library/' + repoID + '/' + encodeURIComponent(repoInfo.repo_name) + Utils.encodePath(path);\n    window.history.pushState({url: url, path: path}, path, url);\n  };\n\n  showFile = (filePath) => {\n    let repoID = this.props.repoID;\n\n    if (this.state.currentMode === 'column') {\n      seafileAPI.listFileTags(repoID, filePath).then(res => {\n        let fileTags = res.data.file_tags.map(item => {\n          return new FileTag(item);\n        });\n        this.setState({fileTags: fileTags});\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    }\n\n    // update state\n    this.setState({\n      isFileLoading: true,\n      path: filePath,\n      isViewFile: true\n    });\n\n    // update data\n    seafileAPI.getFileInfo(repoID, filePath).then((res) => {\n      let { mtime, permission, last_modifier_name, is_draft, has_draft, draft_id } = res.data;\n      seafileAPI.getFileDownloadLink(repoID, filePath).then((res) => {\n        seafileAPI.getFileContent(res.data).then((res) => {\n          this.setState({\n            content: res.data,\n            filePermission: permission,\n            latestContributor: last_modifier_name,\n            lastModified: moment.unix(mtime).fromNow(),\n            isFileLoading: false,\n            isFileLoadedErr: false,\n            isDraft: is_draft,\n            hasDraft: has_draft,\n            draftID: draft_id\n          });\n        });\n      });\n    }).catch((err) => {\n      let errMsg = Utils.getErrorMsg(err, true);\n      if (!err.response || err.response.status !== 403) {\n        toaster.danger(errMsg);\n      }\n      this.setState({\n        isFileLoading: false,\n        isFileLoadedErr: true,\n      });\n    });\n\n    // update location\n    let repoInfo = this.state.currentRepoInfo;\n    let url = siteRoot + 'library/' + repoID + '/' + encodeURIComponent(repoInfo.repo_name) + Utils.encodePath(filePath);\n    window.history.pushState({url: url, path: filePath}, filePath, url);\n  };\n\n  loadDirentList = (path) => {\n    let repoID = this.props.repoID;\n    seafileAPI.listDir(repoID, path, {'with_thumbnail': true}).then(res => {\n      let direntList = [];\n      res.data.dirent_list.forEach(item => {\n        let dirent = new Dirent(item);\n        direntList.push(dirent);\n      });\n\n      this.setState({\n        pathExist: true,\n        userPerm: res.data.user_perm,\n        isDirentListLoading: false,\n        direntList: Utils.sortDirents(direntList, this.state.sortBy, this.state.sortOrder),\n        dirID: res.data.dir_id,\n        path: path,\n        isSessionExpired: false,\n      });\n\n      if (!this.state.repoEncrypted && direntList.length) {\n        this.getThumbnails(repoID, path, this.state.direntList);\n      }\n\n      if (this.state.currentRepoInfo.is_admin) {\n        if (this.foldersSharedOut) {\n          this.identifyFoldersSharedOut();\n        } else {\n          this.foldersSharedOut = [];\n          seafileAPI.getAllRepoFolderShareInfo(repoID).then(res => {\n            res.data.share_info_list.forEach(item => {\n              if (this.foldersSharedOut.indexOf(item.path) === -1) {\n                this.foldersSharedOut.push(item.path);\n              }\n            });\n            this.identifyFoldersSharedOut();\n          });\n        }\n      }\n    }).catch((err) => {\n      Utils.getErrorMsg(err, true);\n      if (err.response && err.response.status === 403) {\n        this.setState({isDirentListLoading: false});\n        return;\n      }\n      this.setState({\n        isDirentListLoading: false,\n        pathExist: false,\n      });\n    });\n  };\n\n  identifyFoldersSharedOut = () => {\n    const { path, direntList } = this.state;\n    if (this.foldersSharedOut.length == 0) {\n      return;\n    }\n    direntList.forEach(dirent => {\n      if (dirent.type == 'dir' && this.foldersSharedOut.indexOf(Utils.joinPath(path, dirent.name) + '/') !== -1) {\n        dirent.has_been_shared_out = true;\n      }\n    });\n    this.setState({\n      direntList: direntList\n    });\n  };\n\n  onListContainerScroll = () => {\n    let itemsShowLength = this.state.itemsShowLength + 100;\n    this.setState({itemsShowLength: itemsShowLength});\n  };\n\n  resetShowLength = () => {\n    this.setState({itemsShowLength: 100});\n  };\n\n  getThumbnails = (repoID, path, direntList) => {\n    let items = direntList.filter((item) => {\n      return (Utils.imageCheck(item.name) || (enableVideoThumbnail && Utils.videoCheck(item.name))) && !item.encoded_thumbnail_src;\n    });\n    if (items.length == 0) {\n      return ;\n    }\n\n    const _this = this;\n    const len = items.length;\n    const thumbnailSize = 48;\n    let getThumbnail = (i) => {\n      const curItem = items[i];\n      const curItemPath = [path, curItem.name].join('/');\n      seafileAPI.createThumbnail(repoID, curItemPath, thumbnailSize).then((res) => {\n        curItem.encoded_thumbnail_src = res.data.encoded_thumbnail_src;\n      }).catch((error) => {\n        // do nothing\n      }).then(() => {\n        if (i < len - 1) {\n          getThumbnail(++i);\n        } else {\n          _this.setState({\n            direntList: direntList\n          });\n        }\n      });\n    };\n    getThumbnail(0);\n  };\n\n  updateMoveCopyTreeNode = (path) => {\n    let repoID = this.props.repoID;\n\n    let tree = this.state.treeData.clone();\n    let node = tree.getNodeByPath(path);\n\n    // for node not loaded, such as a deep folder '/vv/aa'\n    if (!node) { // node: null\n      return false;\n    }\n\n    let nodeChildren = node.children.map(item => item.object);\n    let nodeChildrenNames = nodeChildren.map(item => item.name);\n\n    seafileAPI.listDir(repoID, path).then(res => {\n      let newDirentList = res.data.dirent_list;\n      let newAddedDirents = newDirentList.filter(item => {\n        return !nodeChildrenNames.includes(item.name);\n      });\n      newAddedDirents.forEach(item => {\n        this.addNodeToTree(item.name, path, item.type);\n      });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  async getAsyncCopyMoveProgress() {\n    let { asyncOperationType, asyncCopyMoveTaskId } = this.state;\n    try {\n      let res = await seafileAPI.queryAsyncOperationProgress(asyncCopyMoveTaskId);\n      let data = res.data;\n      if (data.failed) {\n        let message = gettext('Failed to move files to another library.');\n        if (asyncOperationType === 'copy') {\n          message = gettext('Failed to copy files to another library.');\n        }\n        toaster.danger(message);\n        this.setState({\n          asyncOperationProgress: 0,\n          isCopyMoveProgressDialogShow: false,\n        });\n        return;\n      }\n\n      if (data.successful) {\n        if (asyncOperationType === 'move') {\n          if (this.currentMoveItemName && this.currentMoveItemPath) {\n            if (this.state.currentMode === 'column') {\n              this.deleteTreeNode(this.currentMoveItemPath);\n            }\n            this.moveDirent(this.currentMoveItemName);\n            this.currentMoveItemName = '';\n            this.currentMoveItemPath = '';\n          } else {\n            if (this.state.currentMode === 'column') {\n              let direntPaths = this.getSelectedDirentPaths();\n              this.deleteTreeNodes(direntPaths);\n            }\n            let direntNames = this.getSelectedDirentNames();\n            this.moveDirents(direntNames);\n          }\n        }\n\n        this.setState({isCopyMoveProgressDialogShow: false});\n        let message = gettext('Successfully moved files to another library.');\n        if (asyncOperationType === 'copy') {\n          message = gettext('Successfully copied files to another library.');\n        }\n        toaster.success(message);\n        return;\n      }\n      // init state: total is 0\n      let asyncOperationProgress = !data.total ? 0 : parseInt((data.done/data.total * 100).toFixed(2));\n\n      this.getAsyncCopyMoveProgress();\n      this.setState({asyncOperationProgress: asyncOperationProgress});\n    } catch (error) {\n      this.setState({\n        asyncOperationProgress: 0,\n        isCopyMoveProgressDialogShow: false,\n      });\n    }\n  }\n\n  cancelCopyMoveDirent = () => {\n    let taskId = this.state.asyncCopyMoveTaskId;\n    seafileAPI.cancelCopyMoveOperation(taskId);\n\n    this.currentMoveItemName = '';\n    this.currentMoveItemPath = '';\n    let direntList = this.state.direntList;\n    this.setState({direntList: direntList.slice(0)});\n  };\n\n  onMoveProgressDialogToggle = () => {\n    let { asyncOperationProgress } = this.state;\n    if (asyncOperationProgress !== 100) {\n      this.cancelCopyMoveDirent();\n    }\n\n    this.setState({\n      asyncOperationProgress: 0,\n      isCopyMoveProgressDialogShow: false,\n    });\n  };\n\n  // toolbar operations\n  onMoveItems = (destRepo, destDirentPath) => {\n    let repoID = this.props.repoID;\n    let selectedDirentList = this.state.selectedDirentList;\n    if (repoID !== destRepo.repo_id) {\n      this.setState(() => ({\n        asyncOperatedFilesLength: selectedDirentList.length,\n        asyncOperationProgress: 0,\n        asyncOperationType: 'move',\n        isCopyMoveProgressDialogShow: true\n      }));\n    }\n\n    let dirNames = this.getSelectedDirentNames();\n    let direntPaths = this.getSelectedDirentPaths();\n    seafileAPI.moveDir(repoID, destRepo.repo_id, destDirentPath, this.state.path, dirNames).then(res => {\n      if (repoID !== destRepo.repo_id) {\n        this.setState({\n          asyncCopyMoveTaskId: res.data.task_id,\n        }, () => {\n          // After moving successfully, delete related files\n          this.getAsyncCopyMoveProgress();\n        });\n      }\n\n      if (repoID === destRepo.repo_id) {\n        if (this.state.currentMode === 'column') {\n          this.deleteTreeNodes(direntPaths);\n        }\n\n        this.moveDirents(dirNames);\n\n        // 2. tow columns mode need update left tree\n        if (this.state.currentMode === 'column') {\n          this.updateMoveCopyTreeNode(destDirentPath);\n        }\n\n        // show tip message if move to current repo\n        let message =  Utils.getMoveSuccessMessage(dirNames);\n        toaster.success(message);\n      }\n\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      if (errMessage === gettext('Error')) {\n        errMessage = Utils.getMoveFailedMessage(dirNames);\n      }\n      this.setState({\n        asyncOperationProgress: 0,\n        isCopyMoveProgressDialogShow: false,\n      });\n      toaster.danger(errMessage);\n    });\n  };\n\n  onCopyItems = (destRepo, destDirentPath) => {\n    let repoID = this.props.repoID;\n    let selectedDirentList = this.state.selectedDirentList;\n\n    if (repoID !== destRepo.repo_id) {\n      this.setState({\n        asyncOperatedFilesLength: selectedDirentList.length,\n        asyncOperationProgress: 0,\n        asyncOperationType: 'copy',\n        isCopyMoveProgressDialogShow: true\n      });\n    }\n\n    let dirNames = this.getSelectedDirentNames();\n    seafileAPI.copyDir(repoID, destRepo.repo_id, destDirentPath, this.state.path, dirNames).then(res => {\n      if (repoID !== destRepo.repo_id) {\n        this.setState({\n          asyncCopyMoveTaskId: res.data.task_id,\n        }, () => {\n          this.getAsyncCopyMoveProgress();\n        });\n      }\n\n      if (repoID === destRepo.repo_id) {\n        if (this.state.currentMode === 'column') {\n          this.updateMoveCopyTreeNode(destDirentPath);\n        }\n\n        if (destDirentPath === this.state.path) {\n          this.loadDirentList(this.state.path);\n        }\n\n        // show tip message if copy to current repo\n        let message =  Utils.getCopySuccessfulMessage(dirNames);\n        toaster.success(message);\n      }\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      if (errMessage === gettext('Error')) {\n        errMessage = Utils.getCopyFailedMessage(dirNames);\n      }\n      toaster.danger(errMessage);\n    });\n  };\n\n  restoreDeletedDirents = (commitID, paths, e) => {\n    const { repoID } = this.props;\n    e.preventDefault();\n    toaster.closeAll();\n    seafileAPI.restoreDirents(repoID, commitID, paths).then(res => {\n      const { success, failed } = res.data;\n      success.forEach(dirent => {\n        let name = Utils.getFileName(dirent.path);\n        let parentPath = Utils.getDirName(dirent.path);\n        if (!dirent.is_dir) {\n          if (this.state.currentMode === 'column') {\n            this.addNodeToTree(name, parentPath, 'file');\n          }\n          if (parentPath === this.state.path && !this.state.isViewFile) {\n            this.addDirent(name, 'file');\n          }\n        } else {\n          if (this.state.currentMode === 'column') {\n            this.addNodeToTree(name, parentPath, 'dir');\n          }\n          if (parentPath === this.state.path && !this.state.isViewFile) {\n            this.addDirent(name, 'dir');\n          }\n        }\n      });\n\n      if (success.length) {\n        let msg = success.length > 1 ? gettext('Restored {name} and {n} other items') :\n          gettext('Restored {name}');\n        msg = msg.replace('{name}', success[0].path.split('/').pop())\n          .replace('{n}', success.length - 1);\n        toaster.success(msg);\n      }\n\n      if (failed.length) {\n        let msg = failed.length > 1 ? gettext('Failed to restore {name} and {n} other items') :\n          gettext('Failed to restore {name}');\n        msg = msg.replace('{name}', failed[0].path.split('/').pop())\n          .replace('{n}', failed.length - 1);\n        toaster.danger(msg);\n      }\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  onDeleteItems = () => {\n    let repoID = this.props.repoID;\n    let direntPaths = this.getSelectedDirentPaths();\n    let dirNames = this.getSelectedDirentNames();\n\n    this.setState({updateDetail: !this.state.updateDetail});\n    seafileAPI.deleteMutipleDirents(repoID, this.state.path, dirNames).then(res => {\n      if (this.state.currentMode === 'column') {\n        this.deleteTreeNodes(direntPaths);\n      }\n\n      this.deleteDirents(dirNames);\n\n      let msg = '';\n      if (direntPaths.length > 1) {\n        msg = gettext('Successfully deleted {name} and {n} other items.');\n        msg = msg.replace('{name}', dirNames[0]);\n        msg = msg.replace('{n}', dirNames.length - 1);\n      } else {\n        msg = gettext('Successfully deleted {name}.');\n        msg = msg.replace('{name}', dirNames[0]);\n      }\n      const successTipWithUndo = (\n        <>\n          <span>{msg}</span>\n          <a className=\"action-link p-0 ml-1\" href=\"#\" onClick={this.restoreDeletedDirents.bind(this, res.data.commit_id, direntPaths)}>{gettext('Undo')}</a>\n        </>\n      );\n      toaster.success(successTipWithUndo, {duration: 5});\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      if (errMessage === gettext('Error')) {\n        errMessage = gettext('Failed to delete {name} and {n} other items.');\n        errMessage = errMessage.replace('{name}', dirNames[0]);\n        errMessage = errMessage.replace('{n}', dirNames.length - 1);\n      }\n      toaster.danger(errMessage);\n    });\n  };\n\n  onAddFolder = (dirPath) => {\n    let repoID = this.props.repoID;\n    seafileAPI.createDir(repoID, dirPath).then(() => {\n      let name = Utils.getFileName(dirPath);\n      let parentPath = Utils.getDirName(dirPath);\n\n      if (this.state.currentMode === 'column') {\n        this.addNodeToTree(name, parentPath, 'dir');\n      }\n\n      if (parentPath === this.state.path && !this.state.isViewFile) {\n        this.addDirent(name, 'dir');\n      }\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  onAddFile = (filePath, isMarkdownDraft, isSdocDraft) => {\n    let repoID = this.props.repoID;\n    seafileAPI.createFile(repoID, filePath, isMarkdownDraft).then(res => {\n      let name = Utils.getFileName(filePath);\n      let parentPath = Utils.getDirName(filePath);\n      if (this.state.currentMode === 'column') {\n        this.addNodeToTree(name, parentPath, 'file');\n      }\n      if (parentPath === this.state.path && !this.state.isViewFile) {\n        if (isSdocDraft) { // the new file is marked to be draft\n          seafileAPI.sdocMarkAsDraft(repoID, filePath).then((res) => {\n            this.addDirent(name, 'file', res.data.size, isSdocDraft);\n          }).catch(error => {\n            let errMessage = Utils.getErrorMsg(error);\n            toaster.danger(errMessage);\n            this.addDirent(name, 'file', res.data.size);\n          });\n          return;\n        }\n\n        this.addDirent(name, 'file', res.data.size);\n      }\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  switchViewMode = (mode) => {\n    if (mode === this.state.currentMode) {\n      return;\n    }\n    if (mode === 'detail') {\n      this.toggleDirentDetail();\n      return;\n    }\n    cookie.save('seafile_view_mode', mode);\n    let path = this.state.path;\n    if (this.state.currentMode === 'column' && this.state.isViewFile) {\n      path = Utils.getDirName(path);\n      this.setState({\n        path: path,\n        isViewFile: false,\n      });\n      let repoInfo = this.state.currentRepoInfo;\n\n      let url = siteRoot + 'library/' + repoInfo.repo_id + '/' + encodeURIComponent(repoInfo.repo_name) + Utils.encodePath(path);\n      window.history.pushState({url: url, path: path}, path, url);\n    }\n\n    if (mode === 'column') {\n      this.loadSidePanel(this.state.path);\n    }\n    this.isNeedUpdateHistoryState = false;\n    this.setState({currentMode: mode});\n    this.showDir(path);\n  };\n\n  onSearchedClick = (item) => {\n    let path = item.is_dir ? item.path.slice(0, item.path.length - 1) : item.path;\n    if (this.state.currentPath === path) {\n      return;\n    }\n    if (this.state.currentMode === 'column') {\n      // load sidePanel\n      let index = -1;\n      let paths = Utils.getPaths(path);\n      for (let i = 0; i < paths.length; i++) {\n        // eslint-disable-next-line\n        let node = this.state.treeData.getNodeByPath(node);\n        if (!node) {\n          index = i;\n          break;\n        }\n      }\n      if (index === -1) { // all the data has been loaded already.\n        let node = this.state.treeData.getNodeByPath(path);\n        this.setState({currentNode: node});\n      } else {\n        this.loadNodeAndParentsByPath(path);\n      }\n\n      // load mainPanel\n      if (item.is_dir) {\n        this.showDir(path);\n      } else {\n        if (Utils.isMarkdownFile(path)) {\n          this.showFile(path);\n        } else {\n          let url = siteRoot + 'lib/' + item.repo_id + '/file' + Utils.encodePath(path);\n          let isWeChat = Utils.isWeChat();\n          if (!isWeChat) {\n            let newWindow = window.open('about:blank');\n            newWindow.location.href = url;\n          } else {\n            location.href = url;\n          }\n        }\n      }\n    } else {\n      if (item.is_dir) {\n        this.showDir(path);\n      } else {\n        let url = siteRoot + 'lib/' + item.repo_id + '/file' + Utils.encodePath(path);\n        let isWeChat = Utils.isWeChat();\n        if (!isWeChat) {\n          let newWindow = window.open('about:blank');\n          newWindow.location.href = url;\n        } else {\n          location.href = url;\n        }\n      }\n    }\n  };\n\n  onMainNavBarClick = (nodePath) => {\n    //just for dir\n    this.resetSelected();\n    if (this.state.currentMode === 'column') {\n      let tree = this.state.treeData.clone();\n      let node = tree.getNodeByPath(nodePath);\n      tree.expandNode(node);\n      this.setState({treeData: tree, currentNode: node});\n    }\n\n    this.showDir(nodePath);\n  };\n\n  onLinkClick = (link) => {\n    const url = link;\n    let repoID = this.props.repoID;\n    if (Utils.isInternalMarkdownLink(url, repoID)) {\n      let path = Utils.getPathFromInternalMarkdownLink(url, repoID);\n      this.showFile(path);\n    } else if (Utils.isInternalDirLink(url, repoID)) {\n      let path = Utils.getPathFromInternalDirLink(url, repoID);\n      this.showDir(path);\n    } else {\n      window.open(url);\n    }\n  };\n\n  // list&tree operations\n  onMainPanelItemRename = (dirent, newName) => {\n    let path = Utils.joinPath(this.state.path, dirent.name);\n    this.renameItem(path, dirent.isDir(), newName);\n  };\n\n  onMainPanelItemDelete = (dirent) => {\n    let path = Utils.joinPath(this.state.path, dirent.name);\n    this.deleteItem(path, dirent.isDir());\n  };\n\n  onRenameTreeNode = (node, newName) => {\n    this.renameItem(node.path, node.object.isDir(), newName);\n  };\n\n  onDeleteTreeNode = (node) => {\n    this.deleteItem(node.path, node.object.isDir());\n  };\n\n  renameItem = (path, isDir, newName) => {\n    let repoID = this.props.repoID;\n    if (isDir) {\n      seafileAPI.renameDir(repoID, path, newName).then(() => {\n        this.renameItemAjaxCallback(path, newName);\n      }).catch((error) => {\n        let errMessage = Utils.getErrorMsg(error);\n        if (errMessage === gettext('Error')) {\n          let name = Utils.getFileName(path);\n          errMessage = gettext('Renaming {name} failed').replace('{name}', name);\n        }\n        toaster.danger(errMessage);\n      });\n    } else {\n      seafileAPI.renameFile(repoID, path, newName).then(() => {\n        this.renameItemAjaxCallback(path, newName);\n      }).catch((error) => {\n        let errMessage = '';\n        if (error.response.status == 403 && error.response.data && error.response.data['error_msg']) {\n          errMessage = error.response.data['error_msg'];\n        } else {\n          errMessage = Utils.getErrorMsg(error);\n        }\n        if (errMessage === gettext('Error')) {\n          let name = Utils.getFileName(path);\n          errMessage = gettext('Renaming {name} failed').replace('{name}', name);\n        }\n        toaster.danger(errMessage);\n      });\n    }\n  };\n\n  renameItemAjaxCallback(path, newName) {\n    if (this.state.currentMode === 'column') {\n      this.renameTreeNode(path, newName);\n    }\n    this.renameDirent(path, newName);\n  }\n\n  toggleDeleteFolderDialog = () => {\n    this.setState({isDeleteFolderDialogOpen: !this.state.isDeleteFolderDialogOpen});\n  };\n\n  deleteFolder = () => {\n    const { repoID } = this.props;\n    const { folderToDelete: path } = this.state;\n    seafileAPI.deleteDir(repoID, path).then((res) => {\n      this.deleteItemAjaxCallback(path, true);\n      let name = Utils.getFileName(path);\n      var msg = gettext('Successfully deleted {name}').replace('{name}', name);\n      const successTipWithUndo = (\n        <>\n          <span>{msg}</span>\n          <a className=\"action-link p-0 ml-1\" href=\"#\" onClick={this.restoreDeletedDirents.bind(this, res.data.commit_id, [path])}>{gettext('Undo')}</a>\n        </>\n      );\n      toaster.success(successTipWithUndo, {duration: 5});\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      if (errMessage === gettext('Error')) {\n        let name = Utils.getFileName(path);\n        errMessage = gettext('Failed to delete {name}').replace('{name}', name);\n      }\n      toaster.danger(errMessage);\n    });\n  };\n\n  deleteItem(path, isDir) {\n    let repoID = this.props.repoID;\n    if (isDir) {\n      this.setState({ folderToDelete: path }, () => {\n        this.toggleDeleteFolderDialog();\n      });\n    } else {\n      seafileAPI.deleteFile(repoID, path).then((res) => {\n        this.deleteItemAjaxCallback(path, isDir);\n        let name = Utils.getFileName(path);\n        var msg = gettext('Successfully deleted {name}').replace('{name}', name);\n        const successTipWithUndo = (\n          <>\n            <span>{msg}</span>\n            <a className=\"action-link p-0 ml-1\" href=\"#\" onClick={this.restoreDeletedDirents.bind(this, res.data.commit_id, [path])}>{gettext('Undo')}</a>\n          </>\n        );\n        toaster.success(successTipWithUndo, {duration: 5});\n      }).catch((error) => {\n        let errMessage = Utils.getErrorMsg(error);\n        if (errMessage === gettext('Error')) {\n          let name = Utils.getFileName(path);\n          errMessage = gettext('Failed to delete {name}').replace('{name}', name);\n        }\n        toaster.danger(errMessage);\n      });\n    }\n  }\n\n  deleteItemAjaxCallback(path) {\n    if (this.state.currentMode === 'column') {\n      this.deleteTreeNode(path);\n    }\n    this.deleteDirent(path);\n  }\n\n  // list operations\n  onMoveItem = (destRepo, dirent, moveToDirentPath, nodeParentPath) => {\n    let repoID = this.props.repoID;\n    //just for view list state\n    let dirName = dirent.name;\n    if (!nodeParentPath) {\n      nodeParentPath = this.state.path;\n    }\n    let direntPath = Utils.joinPath(nodeParentPath, dirName);\n\n    if (repoID !== destRepo.repo_id) {\n      this.setState({\n        asyncOperatedFilesLength: 1,\n        asyncOperationProgress: 0,\n        asyncOperationType: 'move',\n        isCopyMoveProgressDialogShow: true,\n      });\n    }\n\n    seafileAPI.moveDir(repoID, destRepo.repo_id, moveToDirentPath, nodeParentPath, dirName).then(res => {\n      if (repoID !== destRepo.repo_id) {\n        this.setState({asyncCopyMoveTaskId: res.data.task_id}, () => {\n          this.currentMoveItemName = dirName;\n          this.currentMoveItemPath = direntPath;\n          this.getAsyncCopyMoveProgress(dirName, direntPath);\n        });\n      }\n\n      if (this.state.currentMode === 'column') {\n        this.deleteTreeNode(direntPath);\n      }\n\n      // 1. move to current repo\n      // 2. tow columns mode need update left tree\n      if (repoID === destRepo.repo_id && this.state.currentMode === 'column') {\n        this.updateMoveCopyTreeNode(moveToDirentPath);\n      }\n\n      this.moveDirent(direntPath, moveToDirentPath);\n\n      // show tip message if move to current repo\n      if (repoID === destRepo.repo_id) {\n        let message = gettext('Successfully moved {name}.');\n        message = message.replace('{name}', dirName);\n        toaster.success(message);\n      }\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      if (errMessage === gettext('Error')) {\n        errMessage = gettext('Failed to move {name}.');\n        errMessage = errMessage.replace('{name}', dirName);\n      }\n      toaster.danger(errMessage);\n    });\n  };\n\n  onCopyItem = (destRepo, dirent, copyToDirentPath, nodeParentPath) => {\n    let repoID = this.props.repoID;\n    //just for view list state\n    let dirName = dirent.name;\n    if (!nodeParentPath) {\n      nodeParentPath = this.state.path;\n    }\n\n    if (repoID !== destRepo.repo_id) {\n      this.setState({\n        asyncOperatedFilesLength: 1,\n        asyncOperationProgress: 0,\n        asyncOperationType: 'copy',\n        isCopyMoveProgressDialogShow: true\n      });\n    }\n\n    seafileAPI.copyDir(repoID, destRepo.repo_id, copyToDirentPath, nodeParentPath, dirName).then(res => {\n\n      if (repoID !== destRepo.repo_id) {\n        this.setState({\n          asyncCopyMoveTaskId: res.data.task_id,\n        }, () => {\n          this.getAsyncCopyMoveProgress();\n        });\n      }\n\n      if (repoID === destRepo.repo_id) {\n        if (this.state.currentMode === 'column') {\n          this.updateMoveCopyTreeNode(copyToDirentPath);\n        }\n\n        if (copyToDirentPath === nodeParentPath) {\n          this.loadDirentList(this.state.path);\n        }\n\n        let message = gettext('Successfully copied %(name)s.');\n        message = message.replace('%(name)s', dirName);\n        toaster.success(message);\n      }\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      if (errMessage === gettext('Error')) {\n        errMessage = gettext('Failed to copy %(name)s');\n        errMessage = errMessage.replace('%(name)s', dirName);\n      }\n      toaster.danger(errMessage);\n    });\n  };\n\n  onConvertItem = (dirent, dstType) => {\n    let path = Utils.joinPath(this.state.path, dirent.name);\n    let repoID = this.props.repoID;\n    this.setState({isConvertLoading: true});\n    seafileAPI.convertFile(repoID, path, dstType).then((res) => {\n      let newFileName = res.data.obj_name;\n      let parentDir = res.data.parent_dir;\n      let new_path = parentDir + '/' + newFileName;\n      let parentPath = Utils.getDirName(new_path);\n\n      if (this.state.currentMode === 'column') {\n        this.addNodeToTree(newFileName, parentPath, 'file');\n      }\n\n      this.addDirent(newFileName, 'file', res.data.size);\n      this.setState({isConvertLoading: false});\n      let message = gettext('Successfully converted the file.');\n      toaster.success(message);\n\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      this.setState({isConvertLoading: false});\n      if (errMessage === gettext('Error')) {\n        let name = Utils.getFileName(path);\n        errMessage = gettext('Failed to convert {name}.').replace('{name}', name);\n      }\n      toaster.danger(errMessage);\n    });\n\n  };\n\n  onDirentClick = (dirent) => {\n    let direntList = this.state.direntList.map(dirent => {\n      dirent.isSelected = false;\n      return dirent;\n    });\n    if (dirent) {\n      // dirent.isSelected = true;\n      this.setState({\n        direntList: direntList,\n        isDirentSelected: true,\n        selectedDirentList: [dirent],\n      });\n    } else {\n      this.setState({\n        direntList: direntList,\n        isDirentSelected: false,\n        selectedDirentList: [],\n      });\n    }\n  };\n\n  onItemClick = (dirent) => {\n    this.resetSelected();\n    let repoID = this.props.repoID;\n    let direntPath = Utils.joinPath(this.state.path, dirent.name);\n    if (dirent.isDir()) {  // is dir\n      if (this.state.currentMode === 'column') {\n        this.loadTreeNodeByPath(direntPath);\n      }\n      this.showDir(direntPath);\n    } else {  // is file\n      if (this.state.currentMode === 'column' && Utils.isMarkdownFile(direntPath)) {\n        this.showColumnMarkdownFile(direntPath);\n      } else {\n        let url = siteRoot + 'lib/' + repoID + '/file' + Utils.encodePath(direntPath);\n        if (dirent.is_sdoc_revision && dirent.revision_id) {\n          url = siteRoot + 'lib/' + repoID + '/revisions/' + dirent.revision_id + '/';\n        }\n\n        let isWeChat = Utils.isWeChat();\n        if (!isWeChat) {\n          window.open(url);\n        } else {\n          location.href = url;\n        }\n      }\n    }\n  };\n\n  onDirentSelected = (dirent) => {\n    let direntList = this.state.direntList.map(item => {\n      if (item.name === dirent.name) {\n        item.isSelected = !item.isSelected;\n      }\n      return item;\n    });\n    let selectedDirentList = direntList.filter(item => {\n      return item.isSelected;\n    });\n\n    if (selectedDirentList.length) {\n      this.setState({isDirentSelected: true});\n      if (selectedDirentList.length === direntList.length) {\n        this.setState({\n          isAllDirentSelected: true,\n          direntList: direntList,\n          selectedDirentList: selectedDirentList,\n        });\n      } else {\n        this.setState({\n          isAllDirentSelected: false,\n          direntList: direntList,\n          selectedDirentList: selectedDirentList\n        });\n      }\n    } else {\n      this.setState({\n        isDirentSelected: false,\n        isAllDirentSelected: false,\n        direntList: direntList,\n        selectedDirentList: []\n      });\n    }\n  };\n\n  onAllDirentSelected = () => {\n    if (this.state.isAllDirentSelected) {\n      let direntList = this.state.direntList.map(item => {\n        item.isSelected = false;\n        return item;\n      });\n      this.setState({\n        isDirentSelected: false,\n        isAllDirentSelected: false,\n        direntList: direntList,\n        selectedDirentList: [],\n      });\n    } else {\n      let direntList = this.state.direntList.map(item => {\n        item.isSelected = true;\n        return item;\n      });\n      this.setState({\n        isDirentSelected: true,\n        isAllDirentSelected: true,\n        direntList: direntList,\n        selectedDirentList: direntList,\n      });\n    }\n  };\n\n  onFileTagChanged = (dirent, direntPath) => {\n    let repoID = this.props.repoID;\n    seafileAPI.listFileTags(repoID, direntPath).then(res => {\n      let fileTags = res.data.file_tags.map(item => {\n        return new FileTag(item);\n      });\n\n      if (this.state.isViewFile) {\n        this.setState({fileTags: fileTags});\n      } else {\n        this.updateDirent(dirent, 'file_tags', fileTags);\n      }\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n\n    this.updateUsedRepoTags();\n  };\n\n  onFileUploadSuccess = (direntObject) => {\n    let isExist = this.state.direntList.some(item => {\n      return item.name === direntObject.name && item.type === direntObject.type;\n    });\n    if (isExist) {\n      let direntList = this.state.direntList;\n      for (let i = 0; i < direntList.length; i++) {\n        let dirent = direntList[i];\n        if (dirent.name === direntObject.name && dirent.type === direntObject.type) {\n          let mtime = moment.unix(direntObject.mtime).fromNow();\n          this.updateDirent(dirent, 'mtime', mtime);  // todo file size is need update too, api is not return;\n          break;\n        }\n      }\n    } else {\n      // use current dirent parent's permission as it's permission\n      direntObject.permission = this.state.userPerm;\n      let dirent = new Dirent(direntObject);\n      if (this.state.currentMode === 'column') {\n        this.addNodeToTree(dirent.name, this.state.path, dirent.type);\n      }\n      if (direntObject.type === 'dir') {\n        this.setState({direntList: [dirent, ...this.state.direntList]});\n      } else {\n        this.setState({direntList: [...this.state.direntList, dirent]});\n      }\n    }\n  };\n\n  addDirent = (name, type, size, isSdocDraft) => {\n    let item = this.createDirent(name, type, size, isSdocDraft);\n    let direntList = this.state.direntList;\n    if (type === 'dir') {\n      direntList.unshift(item);\n    } else {\n      // there will be there conditions;\n      // first: direntList.length === 0;\n      // second: all the direntList's items are dir;\n      // third: direntList has dir and file;\n      let length = direntList.length;\n      if (length === 0 || direntList[length - 1].type === 'dir') {\n        direntList.push(item);\n      } else {\n        let index = 0;\n        for (let i = 0; i <= length; i++) {\n          if (direntList[i].type === 'file') {\n            index = i;\n            break;\n          }\n        }\n        direntList.splice(index, 0, item);\n      }\n    }\n    this.setState({direntList: direntList});\n  };\n\n  renameDirent = (direntPath, newName) => {\n    let repoID = this.props.repoID;\n    let parentPath = Utils.getDirName(direntPath);\n    let newDirentPath = Utils.joinPath(parentPath, newName);\n    if (direntPath === this.state.path) {\n      // the renamed item is current viewed item\n      // example: direntPath = /A/B/C, state.path = /A/B/C\n\n      this.setState({ path: newDirentPath });\n      let repoInfo = this.state.currentRepoInfo;\n      let url = siteRoot + 'library/' + repoID + '/' + encodeURIComponent(repoInfo.repo_name) + newDirentPath;\n      window.history.replaceState({ url: url, path: newDirentPath}, newDirentPath, url);\n    } else if (Utils.isChildPath(direntPath, this.state.path)) {\n      // example: direntPath = /A/B/C/D, state.path = /A/B/C\n      let oldName = Utils.getFileName(direntPath);\n      let direntList = this.state.direntList.map(item => {\n        if (item.name === oldName) {\n          item.name = newName;\n        }\n        return item;\n      });\n      this.setState({ direntList: direntList });\n    } else if (Utils.isAncestorPath(direntPath, this.state.path)) {\n      // example: direntPath = /A/B, state.path = /A/B/C\n      let newPath = Utils.renameAncestorPath(this.state.path, direntPath, newDirentPath);\n      this.setState({ path: newPath });\n\n      let repoInfo = this.state.currentRepoInfo;\n      let url = siteRoot + 'library/' + repoID + '/' + encodeURIComponent(repoInfo.repo_name) + newPath;\n      window.history.replaceState({ url: url, path: newPath}, newPath, url);\n    }\n  };\n\n  deleteDirent(direntPath) {\n    if (direntPath === this.state.path) {\n      // The deleted item is current item\n      let parentPath = Utils.getDirName(direntPath);\n      this.showDir(parentPath);\n    } else if (Utils.isChildPath(direntPath, this.state.path)) {\n      // The deleted item is inside current path\n      let name = Utils.getFileName(direntPath);\n      let direntList = this.state.direntList.filter(item => {\n        return item.name !== name;\n      });\n\n      // Recalculate the state of the selection\n      this.recaculateSelectedStateAfterDirentDeleted(name, direntList);\n\n      this.setState({direntList: direntList});\n    } else if (Utils.isAncestorPath(direntPath, this.state.path)) {\n      // the deleted item is ancester of the current item\n      let parentPath = Utils.getDirName(direntPath);\n      this.showDir(parentPath);\n    }\n    // else do nothing\n  }\n\n  // only one scence: The deleted items are inside current path\n  deleteDirents = (direntNames) => {\n    let direntList = this.state.direntList.filter(item => {\n      return direntNames.indexOf(item.name) === -1;\n    });\n\n    // Recalculate the state of the selection\n    this.recaculateSelectedStateAfterDirentDeleted(name, direntList);\n\n    this.setState({direntList: direntList});\n  };\n\n  moveDirent = (direntPath, moveToDirentPath = null) => {\n    let name = Utils.getFileName(direntPath);\n    if (moveToDirentPath === this.state.path) {\n      this.loadDirentList(this.state.path);\n      return;\n    }\n    let direntList = this.state.direntList.filter(item => {\n      return item.name !== name;\n    });\n\n    // Recalculate the state of the selection\n    this.recaculateSelectedStateAfterDirentDeleted(name, direntList);\n\n    this.setState({direntList: direntList});\n  };\n\n  // only one scence: The moved items are inside current path\n  moveDirents = (direntNames) => {\n    let direntList = this.state.direntList.filter(item => {\n      return direntNames.indexOf(item.name) === -1;\n    });\n\n    // Recalculate the state of the selection\n    //this.recaculateSelectedStateAfterDirentDeleted(name, direntList);\n\n    this.setState({\n      direntList: direntList,\n      selectedDirentList: [],\n      isDirentSelected: false,\n      isAllDirentSelected: false,\n    });\n  };\n\n  updateDirent = (dirent, paramKey, paramValue) => {\n    let newDirentList = this.state.direntList.map(item => {\n      if (item.name === dirent.name) {\n        item[paramKey] = paramValue;\n      }\n      return item;\n    });\n    this.setState({direntList: newDirentList});\n  };\n\n  // tree operations\n  loadTreeNodeByPath = (path) => {\n    let repoID = this.props.repoID;\n    let tree = this.state.treeData.clone();\n    let node = tree.getNodeByPath(path);\n    if (!node.isLoaded) {\n      seafileAPI.listDir(repoID, node.path).then(res => {\n        this.addResponseListToNode(res.data.dirent_list, node);\n        let parentNode = tree.getNodeByPath(node.parentNode.path);\n        parentNode.isExpanded = true;\n        this.setState({\n          treeData: tree,\n          currentNode: node\n        });\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    } else {\n      let parentNode = tree.getNodeByPath(node.parentNode.path);\n      parentNode.isExpanded = true;\n      this.setState({treeData: tree, currentNode: node}); //tree\n    }\n  };\n\n  loadNodeAndParentsByPath = (path) => {\n    let repoID = this.props.repoID;\n    let tree = this.state.treeData.clone();\n    if (Utils.isMarkdownFile(path)) {\n      path = Utils.getDirName(path);\n    }\n    seafileAPI.listDir(repoID, path, {with_parents: true}).then(res => {\n      const { dirent_list: direntList, user_perm } = res.data;\n      let results = {};\n      for (let i = 0; i < direntList.length; i++) {\n        let object = direntList[i];\n        let parentDir = object.parent_dir;\n        let key = parentDir === '/' ?  '/' : parentDir.slice(0, parentDir.length - 1);\n        if (!results[key]) {\n          results[key] = [];\n        }\n        results[key].push(object);\n      }\n      for (let key in results) {\n        let node = tree.getNodeByPath(key);\n        if (!node.isLoaded) {\n          this.addResponseListToNode(results[key], node);\n        }\n      }\n      this.setState({\n        isTreeDataLoading: false,\n        treeData: tree,\n        userPerm: user_perm,\n      });\n    }).catch(() => {\n      this.setState({isLoadFailed: true});\n    });\n  };\n\n  onTreeNodeClick = (node) => {\n    this.resetSelected();\n    let repoID = this.props.repoID;\n    if (!this.state.pathExist) {\n      this.setState({pathExist: true});\n    }\n\n    if (node.object.isDir()) {\n      let isLoaded = node.isLoaded;\n      if (!node.isLoaded) {\n        let tree = this.state.treeData.clone();\n        node = tree.getNodeByPath(node.path);\n        seafileAPI.listDir(repoID, node.path).then(res => {\n          this.addResponseListToNode(res.data.dirent_list, node);\n          tree.collapseNode(node);\n          this.setState({treeData: tree});\n        }).catch(error => {\n          let errMessage = Utils.getErrorMsg(error);\n          toaster.danger(errMessage);\n        });\n      }\n      if (isLoaded && node.path === this.state.path) {\n        if (node.isExpanded) {\n          let tree = treeHelper.collapseNode(this.state.treeData, node);\n          this.setState({treeData: tree});\n        } else {\n          let tree = this.state.treeData.clone();\n          node = tree.getNodeByPath(node.path);\n          tree.expandNode(node);\n          this.setState({treeData: tree});\n        }\n      }\n    }\n\n    if (node.path === this.state.path ) {\n      return;\n    }\n\n    if (node.object.isDir()) {  // isDir\n      this.showDir(node.path);\n    } else {\n      if (Utils.isMarkdownFile(node.path)) {\n        if (node.path !== this.state.path) {\n          this.showColumnMarkdownFile(node.path);\n        }\n      } else {\n        let url = siteRoot + 'lib/' + repoID + '/file' + Utils.encodePath(node.path);\n        let dirent = node.object;\n        if (dirent.is_sdoc_revision && dirent.revision_id) {\n          url = siteRoot + 'lib/' + repoID + '/revisions/' + dirent.revision_id + '/';\n        }\n        window.open(url);\n      }\n    }\n  };\n\n  showColumnMarkdownFile = (filePath) => {\n    let repoID = this.props.repoID;\n    seafileAPI.getFileInfo(repoID, filePath).then((res) => {\n      if (res.data.size === 0) {\n        // loading of asynchronously obtained data may be blocked\n        const w = window.open('about:blank');\n        const url = siteRoot + 'lib/' + repoID + '/file' + Utils.encodePath(filePath);\n        w.location.href = url;\n      } else {\n        this.showFile(filePath);\n      }\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  onTreeNodeCollapse = (node) => {\n    let tree = treeHelper.collapseNode(this.state.treeData, node);\n    this.setState({treeData: tree});\n  };\n\n  onTreeNodeExpanded = (node) => {\n    let repoID = this.props.repoID;\n    let tree = this.state.treeData.clone();\n    node = tree.getNodeByPath(node.path);\n    if (!node.isLoaded) {\n      seafileAPI.listDir(repoID, node.path).then(res => {\n        this.addResponseListToNode(res.data.dirent_list, node);\n        this.setState({treeData: tree});\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    } else {\n      tree.expandNode(node);\n      this.setState({treeData: tree});\n    }\n  };\n\n  addNodeToTree = (name, parentPath, type) => {\n    let node = this.createTreeNode(name, type);\n    let tree = treeHelper.addNodeToParentByPath(this.state.treeData, node, parentPath);\n    this.setState({treeData: tree});\n  };\n\n  renameTreeNode = (path, newName) => {\n    let tree = treeHelper.renameNodeByPath(this.state.treeData, path, newName);\n    this.setState({treeData: tree});\n  };\n\n  deleteTreeNode = (path) => {\n    let tree = treeHelper.deleteNodeByPath(this.state.treeData, path);\n    this.setState({treeData: tree});\n  };\n\n  deleteTreeNodes = (paths) => {\n    let tree = treeHelper.deleteNodeListByPaths(this.state.treeData, paths);\n    this.setState({treeData: tree});\n  };\n\n  moveTreeNode = (nodePath, moveToPath, moveToRepo, nodeName) => {\n    let repoID = this.props.repoID;\n    if (repoID !== moveToRepo.repo_id) {\n      let tree = treeHelper.deleteNodeByPath(this.state.treeData, nodePath);\n      this.setState({treeData: tree});\n      return;\n    }\n    let tree = treeHelper.moveNodeByPath(this.state.treeData, nodePath, moveToPath, nodeName);\n    this.setState({treeData: tree});\n  };\n\n  copyTreeNode = (nodePath, copyToPath, destRepo, nodeName) => {\n    let repoID = this.props.repoID;\n    if (repoID !== destRepo.repo_id) {\n      return;\n    }\n    let tree = treeHelper.copyNodeByPath(this.state.treeData, nodePath, copyToPath, nodeName);\n    this.setState({treeData: tree});\n  };\n\n  createTreeNode(name, type) {\n    let object = this.createDirent(name, type);\n    return new TreeNode({object});\n  }\n\n  createDirent(name, type, size, isSdocDraft) {\n    // use current dirent parent's permission as it's permission\n    const { userPerm: permission } = this.state;\n    const mtime = new Date().getTime()/1000;\n    const obj = { name, type, mtime, size, permission };\n    if (isSdocDraft) {\n      obj.is_sdoc_draft = isSdocDraft;\n    }\n    const dirent = new Dirent(obj);\n    return dirent;\n  }\n\n  addResponseListToNode = (list, node) => {\n    node.isLoaded = true;\n    node.isExpanded = true;\n    let direntList = list.map(item => {\n      return new Dirent(item);\n    });\n    direntList = Utils.sortDirents(direntList, 'name', 'asc');\n\n    let nodeList = direntList.map(object => {\n      return new TreeNode({object});\n    });\n    node.addChildren(nodeList);\n  };\n\n  getSelectedDirentPaths = () => {\n    let paths = [];\n    this.state.selectedDirentList.forEach(selectedDirent => {\n      paths.push(Utils.joinPath(this.state.path, selectedDirent.name));\n    });\n    return paths;\n  };\n\n  getSelectedDirentNames = () => {\n    let names = [];\n    this.state.selectedDirentList.forEach(selectedDirent => {\n      names.push(selectedDirent.name);\n    });\n    return names;\n  };\n\n  resetSelected = () => {\n    this.setState({\n      isDirentSelected: false,\n      isAllDirentSelected: false,\n    });\n  };\n\n  recaculateSelectedStateAfterDirentDeleted = (name, newDirentList) => {\n    let selectedDirentList = this.state.selectedDirentList.slice(0);\n    if (selectedDirentList.length > 0) {\n      selectedDirentList = selectedDirentList.filter(item => {\n        return item.name !== name;\n      });\n    }\n    this.setState({\n      selectedDirentList: selectedDirentList,\n      isDirentSelected: selectedDirentList.length > 0,\n      isAllDirentSelected: selectedDirentList.length === newDirentList.length,\n    });\n  };\n\n  onLibDecryptDialog = () => {\n    this.setState({libNeedDecrypt: false});\n    this.loadDirData(this.state.path);\n  };\n\n  goDraftPage = () => {\n    window.open(siteRoot + 'drafts/' + this.state.draftID + '/');\n  };\n\n  sortItems = (sortBy, sortOrder) => {\n    cookie.save('seafile-repo-dir-sort-by', sortBy);\n    cookie.save('seafile-repo-dir-sort-order', sortOrder);\n    this.setState({\n      sortBy: sortBy,\n      sortOrder: sortOrder,\n      items: Utils.sortDirents(this.state.direntList, sortBy, sortOrder)\n    });\n  };\n\n  onUploadFile = (e) => {\n    e.nativeEvent.stopImmediatePropagation();\n    this.uploader.onFileUpload();\n  };\n\n  onUploadFolder = (e) => {\n    e.nativeEvent.stopImmediatePropagation();\n    this.uploader.onFolderUpload();\n  };\n\n  onToolbarFileTagChanged = () => {\n    let repoID = this.props.repoID;\n    let filePath = this.state.path;\n    seafileAPI.listFileTags(repoID, filePath).then(res => {\n      let fileTags = res.data.file_tags.map(item => {\n        return new FileTag(item);\n      });\n\n      this.setState({fileTags: fileTags});\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  unSelectDirent = () => {\n    this.setState({\n      isDirentSelected: false,\n      selectedDirentList: []\n    });\n    const dirent = {};\n    this.onDirentSelected(dirent);\n  };\n\n  onDeleteRepoTag = (deletedTagID) => {\n    let direntList = this.state.direntList.map(dirent => {\n      if (dirent.file_tags) {\n        let fileTags = dirent.file_tags.filter(item => {\n          return item.repo_tag_id !== deletedTagID;\n        });\n        dirent.file_tags = fileTags;\n      }\n      return dirent;\n    });\n    this.setState({direntList: direntList});\n    this.updateUsedRepoTags();\n  };\n\n\n  handleSubmit = (e) => {\n    let options = {\n      'share_type': 'personal',\n      'from': this.state.currentRepoInfo.owner_email\n    };\n    seafileAPI.leaveShareRepo(this.props.repoID, options).then(res => {\n      navigate(siteRoot + 'shared-libs/');\n    }).catch((error) => {\n      let errorMsg = Utils.getErrorMsg(error, true);\n      toaster.danger(errorMsg);\n    });\n\n    e.preventDefault();\n  };\n\n  render() {\n    if (this.state.libNeedDecrypt) {\n      return (\n        <ModalPortal>\n          <LibDecryptDialog\n            repoID={this.props.repoID}\n            onLibDecryptDialog={this.onLibDecryptDialog}\n          />\n        </ModalPortal>\n      );\n    }\n\n    if (this.state.errorMsg) {\n      return (\n        <Fragment>\n          <p className=\"error mt-6 text-center\">{this.state.errorMsg}</p>\n          <button type=\"submit\" className=\"btn btn-primary submit\" onClick={this.handleSubmit}>{gettext('Leave Share')}</button>\n        </Fragment>\n      );\n    }\n\n    if (!this.state.currentRepoInfo) {\n      return '';\n    }\n\n    let enableDirPrivateShare = false;\n    let { currentRepoInfo, userPerm, isCopyMoveProgressDialogShow, isDeleteFolderDialogOpen, isConvertLoading } = this.state;\n    let showShareBtn = Utils.isHasPermissionToShare(currentRepoInfo, userPerm);\n    let isRepoOwner = currentRepoInfo.owner_email === username;\n    let isVirtual = currentRepoInfo.is_virtual;\n    let isAdmin = currentRepoInfo.is_admin;\n    if (!isVirtual && (isRepoOwner || isAdmin)) {\n      enableDirPrivateShare = true;\n    }\n    let direntItemsList = this.state.direntList.filter((item, index) => {\n      return index < this.state.itemsShowLength;\n    });\n\n    let canUpload = true;\n    const { isCustomPermission, customPermission } = Utils.getUserPermission(userPerm);\n    if (isCustomPermission) {\n      const { upload } = customPermission.permission;\n      canUpload = upload;\n    }\n\n    return (\n      <Fragment>\n        <div className=\"main-panel-north border-left-show\">\n          <LibContentToolbar\n            isViewFile={this.state.isViewFile}\n            filePermission={this.state.filePermission}\n            isDraft={this.state.isDraft}\n            hasDraft={this.state.hasDraft}\n            fileTags={this.state.fileTags}\n            onFileTagChanged={this.onToolbarFileTagChanged}\n            onSideNavMenuClick={this.props.onMenuClick}\n            repoID={this.props.repoID}\n            path={this.state.path}\n            isDirentSelected={this.state.isDirentSelected}\n            selectedDirentList={this.state.selectedDirentList}\n            onItemsMove={this.onMoveItems}\n            onItemsCopy={this.onCopyItems}\n            onItemsDelete={this.onDeleteItems}\n            onItemRename={this.onMainPanelItemRename}\n            direntList={this.state.direntList}\n            repoName={this.state.repoName}\n            repoEncrypted={this.state.repoEncrypted}\n            isGroupOwnedRepo={this.state.isGroupOwnedRepo}\n            userPerm={this.state.userPerm}\n            showShareBtn={showShareBtn}\n            enableDirPrivateShare={enableDirPrivateShare}\n            onAddFile={this.onAddFile}\n            onAddFolder={this.onAddFolder}\n            onUploadFile={this.onUploadFile}\n            onUploadFolder={this.onUploadFolder}\n            currentMode={this.state.currentMode}\n            switchViewMode={this.switchViewMode}\n            onSearchedClick={this.onSearchedClick}\n            isRepoOwner={isRepoOwner}\n            currentRepoInfo={this.state.currentRepoInfo}\n            updateDirent={this.updateDirent}\n            onDirentSelected={this.onDirentSelected}\n            showDirentDetail={this.showDirentDetail}\n            unSelectDirent={this.unSelectDirent}\n            onFilesTagChanged={this.onFileTagChanged}\n          />\n        </div>\n        <div className=\"main-panel-center flex-row\">\n          <LibContentContainer\n            pathPrefix={this.props.pathPrefix}\n            currentMode={this.state.currentMode}\n            path={this.state.path}\n            pathExist={this.state.pathExist}\n            currentRepoInfo={this.state.currentRepoInfo}\n            repoID={this.props.repoID}\n            enableDirPrivateShare={enableDirPrivateShare}\n            userPerm={userPerm}\n            isGroupOwnedRepo={this.state.isGroupOwnedRepo}\n            onTabNavClick={this.props.onTabNavClick}\n            onMainNavBarClick={this.onMainNavBarClick}\n            isViewFile={this.state.isViewFile}\n            hash={this.state.hash}\n            isDraft={this.state.isDraft}\n            hasDraft={this.state.hasDraft}\n            fileTags={this.state.fileTags}\n            goDraftPage={this.goDraftPage}\n            isFileLoading={this.state.isFileLoading}\n            isFileLoadedErr={this.state.isFileLoadedErr}\n            filePermission={this.state.filePermission}\n            content={this.state.content}\n            lastModified={this.state.lastModified}\n            latestContributor={this.state.latestContributor}\n            onLinkClick={this.onLinkClick}\n            isTreeDataLoading={this.state.isTreeDataLoading}\n            treeData={this.state.treeData}\n            currentNode={this.state.currentNode}\n            onNodeClick={this.onTreeNodeClick}\n            onNodeCollapse={this.onTreeNodeCollapse}\n            onNodeExpanded={this.onTreeNodeExpanded}\n            onAddFolderNode={this.onAddFolder}\n            onAddFileNode={this.onAddFile}\n            onRenameNode={this.onRenameTreeNode}\n            onDeleteNode={this.onDeleteTreeNode}\n            draftCounts={this.state.draftCounts}\n            usedRepoTags={this.state.usedRepoTags}\n            updateUsedRepoTags={this.updateUsedRepoTags}\n            isDirentListLoading={this.state.isDirentListLoading}\n            direntList={direntItemsList}\n            fullDirentList={this.state.direntList}\n            sortBy={this.state.sortBy}\n            sortOrder={this.state.sortOrder}\n            sortItems={this.sortItems}\n            updateDirent={this.updateDirent}\n            onDirentClick={this.onDirentClick}\n            onItemClick={this.onItemClick}\n            onItemSelected={this.onDirentSelected}\n            onItemDelete={this.onMainPanelItemDelete}\n            onItemRename={this.onMainPanelItemRename}\n            onItemMove={this.onMoveItem}\n            onItemCopy={this.onCopyItem}\n            onItemConvert={this.onConvertItem}\n            onAddFolder={this.onAddFolder}\n            onAddFile={this.onAddFile}\n            onFileTagChanged={this.onFileTagChanged}\n            isDirentSelected={this.state.isDirentSelected}\n            isAllDirentSelected={this.state.isAllDirentSelected}\n            onAllDirentSelected={this.onAllDirentSelected}\n            isDirentDetailShow={this.state.isDirentDetailShow}\n            selectedDirent={this.state.selectedDirentList && this.state.selectedDirentList[0]}\n            selectedDirentList={this.state.selectedDirentList}\n            onItemsMove={this.onMoveItems}\n            onItemsCopy={this.onCopyItems}\n            onItemsDelete={this.onDeleteItems}\n            closeDirentDetail={this.closeDirentDetail}\n            showDirentDetail={this.showDirentDetail}\n            direntDetailPanelTab={this.state.direntDetailPanelTab}\n            onDeleteRepoTag={this.onDeleteRepoTag}\n            onToolbarFileTagChanged={this.onToolbarFileTagChanged}\n            updateDetail={this.state.updateDetail}\n            onListContainerScroll={this.onListContainerScroll}\n            loadDirentList={this.loadDirentList}\n          />\n          {canUpload && this.state.pathExist && !this.state.isViewFile && (\n            <FileUploader\n              ref={uploader => this.uploader = uploader}\n              dragAndDrop={true}\n              path={this.state.path}\n              repoID={this.props.repoID}\n              direntList={this.state.direntList}\n              onFileUploadSuccess={this.onFileUploadSuccess}\n              isCustomPermission={isCustomPermission}\n            />\n          )}\n        </div>\n        {isCopyMoveProgressDialogShow && (\n          <CopyMoveDirentProgressDialog\n            type={this.state.asyncOperationType}\n            asyncOperatedFilesLength={this.state.asyncOperatedFilesLength}\n            asyncOperationProgress={this.state.asyncOperationProgress}\n            toggleDialog={this.onMoveProgressDialogToggle}\n          />\n        )}\n        {isDeleteFolderDialogOpen && (\n          <DeleteFolderDialog\n            repoID={this.props.repoID}\n            path={this.state.folderToDelete}\n            deleteFolder={this.deleteFolder}\n            toggleDialog={this.toggleDeleteFolderDialog}\n          />\n        )}\n        {isConvertLoading && (\n          <ConvertMarkdownDialog />\n        )}\n      </Fragment>\n    );\n  }\n}\n\nLibContentView.propTypes = propTypes;\n\nexport default LibContentView;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Modal, ModalHeader, ModalBody, ModalFooter, Button } from 'reactstrap';\nimport { gettext } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../toast';\n\nclass DismissGroupDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  dismissGroup = () => {\n    let that = this;\n    seafileAPI.deleteGroup(this.props.groupID).then((res)=> {\n      that.props.onGroupChanged();\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  render() {\n    return(\n      <Modal isOpen={this.props.showDismissGroupDialog} toggle={this.props.toggleDismissGroupDialog}>\n        <ModalHeader>{gettext('Delete Group')}</ModalHeader>\n        <ModalBody>\n          <span>{gettext('Really want to delete this group?')}</span>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.props.toggleDismissGroupDialog}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.dismissGroup}>{gettext('Delete')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nconst DismissGroupDialogPropTypes = {\n  showDismissGroupDialog: PropTypes.bool.isRequired,\n  toggleDismissGroupDialog: PropTypes.func.isRequired,\n  loadGroup: PropTypes.func.isRequired,\n  groupID: PropTypes.string,\n  onGroupChanged: PropTypes.func.isRequired,\n};\n\nDismissGroupDialog.propTypes = DismissGroupDialogPropTypes;\n\nexport default DismissGroupDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport { Modal, ModalHeader, ModalBody, ModalFooter, Input, Button } from 'reactstrap';\nimport toaster from '../toast';\n\nclass RenameGroupDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      newGroupName: this.props.currentGroupName,\n      isSubmitBtnActive: false,\n    };\n  }\n\n  handleGroupNameChange = (event) => {\n    if (!event.target.value.trim()) {\n      this.setState({isSubmitBtnActive: false});\n    } else {\n      this.setState({isSubmitBtnActive: true});\n    }\n\n    let name = event.target.value;\n    this.setState({\n      newGroupName: name\n    });\n  };\n\n  renameGroup = () => {\n    let name = this.state.newGroupName.trim();\n    if (name) {\n      let that = this;\n      seafileAPI.renameGroup(this.props.groupID, name).then((res)=> {\n        that.props.loadGroup(this.props.groupID);\n        that.props.onGroupChanged(res.data.id);\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    }\n    this.setState({\n      newGroupName: '',\n    });\n    this.props.toggleRenameGroupDialog();\n  };\n\n  handleKeyDown = (event) => {\n    if (event.keyCode === 13) {\n      this.renameGroup();\n    }\n  };\n\n  render() {\n    return(\n      <Modal isOpen={this.props.showRenameGroupDialog} toggle={this.props.toggleRenameGroupDialog}>\n        <ModalHeader>{gettext('Rename Group')}</ModalHeader>\n        <ModalBody>\n          <label htmlFor=\"newGroupName\">{gettext('Rename group to')}</label>\n          <Input type=\"text\" id=\"newGroupName\" value={this.state.newGroupName}\n            onChange={this.handleGroupNameChange} onKeyDown={this.handleKeyDown}/>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.props.toggleRenameGroupDialog}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.renameGroup} disabled={!this.state.isSubmitBtnActive}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nconst RenameGroupDialogPropTypes = {\n  showRenameGroupDialog: PropTypes.bool.isRequired,\n  toggleRenameGroupDialog: PropTypes.func.isRequired,\n  loadGroup: PropTypes.func.isRequired,\n  groupID: PropTypes.string,\n  onGroupChanged: PropTypes.func.isRequired,\n  currentGroupName: PropTypes.string.isRequired,\n};\n\nRenameGroupDialog.propTypes = RenameGroupDialogPropTypes;\n\nexport default RenameGroupDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter } from 'reactstrap';\nimport { gettext } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport UserSelect from '../user-select';\nimport { Utils } from '../../utils/utils';\n\nimport '../../css/transfer-group-dialog.css';\n\nconst propTypes = {\n  groupID: PropTypes.string,\n  toggleTransferGroupDialog: PropTypes.func.isRequired,\n  onGroupChanged: PropTypes.func.isRequired\n};\n\nclass TransferGroupDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      selectedOption: null,\n      errMessage: '',\n    };\n    this.options = [];\n  }\n\n  handleSelectChange = (option) => {\n    this.setState({\n      selectedOption: option,\n      errMessage: '',\n    });\n    this.options = [];\n  };\n\n  transferGroup = () => {\n    const email = this.state.selectedOption && this.state.selectedOption.email;\n    if (email) {\n      seafileAPI.transferGroup(this.props.groupID, email).then((res) => {\n        this.props.toggleTransferGroupDialog();\n      }).catch((error) => {\n        let errMessage = Utils.getErrorMsg(error);\n        this.setState({errMessage: errMessage});\n      });\n    }\n  };\n\n  toggle = () => {\n    this.props.toggleTransferGroupDialog();\n  };\n\n  render() {\n    return (\n      <Modal isOpen={true} toggle={this.toggle}>\n        <ModalHeader toggle={this.toggle}>{gettext('Transfer Group')}</ModalHeader>\n        <ModalBody>\n          <p>{gettext('Transfer group to')}</p>\n          <UserSelect\n            ref=\"userSelect\"\n            isMulti={false}\n            className=\"reviewer-select\"\n            placeholder={gettext('Please enter 1 or more character')}\n            onSelectChange={this.handleSelectChange}\n          />\n          <div className=\"error\">{this.state.errMessage}</div>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.toggle}>{gettext('Close')}</Button>\n          <Button color=\"primary\" onClick={this.transferGroup}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nTransferGroupDialog.propTypes = propTypes;\n\nexport default TransferGroupDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Alert, Modal, ModalHeader, ModalBody, ModalFooter, Button } from 'reactstrap';\nimport { gettext, siteRoot, groupImportMembersExtraMsg } from '../../utils/constants';\n\nconst propTypes = {\n  toggleImportMembersDialog: PropTypes.func.isRequired,\n  importMembersInBatch: PropTypes.func.isRequired,\n};\n\nclass ImportMembersDialog extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      errorMsg: ''\n    };\n    this.fileInputRef = React.createRef();\n  }\n\n  toggle = () => {\n    this.props.toggleImportMembersDialog();\n  };\n\n  openFileInput = () => {\n    this.fileInputRef.current.click();\n  };\n\n  uploadFile = (e) => {\n    // no file selected\n    if (!this.fileInputRef.current.files.length) {\n      return;\n    }\n    // check file extension\n    let fileName = this.fileInputRef.current.files[0].name;\n    if(fileName.substr(fileName.lastIndexOf('.') + 1) != 'xlsx') {\n      this.setState({\n        errorMsg: gettext('Please choose a .xlsx file.')\n      });\n      return;\n    }\n    const file = this.fileInputRef.current.files[0];\n    this.props.importMembersInBatch(file);\n    this.toggle();\n  };\n\n  render() {\n    let { errorMsg } = this.state;\n    return (\n      <Modal isOpen={true} toggle={this.toggle}>\n        <ModalHeader toggle={this.toggle}>{gettext('Import members from a .xlsx file')}</ModalHeader>\n\n        <ModalBody>\n          <p>{groupImportMembersExtraMsg}</p>\n          <p><a className=\"text-secondary small\" href={`${siteRoot}api/v2.1/group-members-import-example/`}>{gettext('Download an example file')}</a></p>\n          <button className=\"btn btn-outline-primary\" onClick={this.openFileInput}>{gettext('Upload file')}</button>\n          <input className=\"d-none\" type=\"file\" onChange={this.uploadFile} ref={this.fileInputRef} />\n          {errorMsg && <Alert color=\"danger\">{errorMsg}</Alert>}\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.toggle}>{gettext('Cancel')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nImportMembersDialog.propTypes = propTypes;\n\nexport default ImportMembersDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Table } from 'reactstrap';\nimport { Utils } from '../utils/utils';\nimport { gettext } from '../utils/constants';\nimport { seafileAPI } from '../utils/seafile-api';\nimport RoleEditor from './select-editor/role-editor';\nimport toaster from './toast';\nimport OpIcon from './op-icon';\n\nconst propTypes = {\n  groupMembers: PropTypes.array.isRequired,\n  groupID: PropTypes.string,\n  isOwner: PropTypes.bool.isRequired,\n  isItemFreezed: PropTypes.bool.isRequired,\n  toggleItemFreezed: PropTypes.func.isRequired,\n  changeMember: PropTypes.func.isRequired,\n  deleteMember: PropTypes.func.isRequired\n};\n\nclass GroupMembers extends React.Component {\n\n  render() {\n    const { groupMembers, changeMember, deleteMember, groupID, isOwner, isItemFreezed, toggleItemFreezed } = this.props;\n    return (\n      <Table size=\"sm\" className=\"manage-members-table\">\n        <thead>\n          <tr>\n            <th width=\"15%\"></th>\n            <th width=\"45%\">{gettext('Name')}</th>\n            <th width=\"30%\">{gettext('Role')}</th>\n            <th width=\"10%\"></th>\n          </tr>\n        </thead>\n        <tbody>\n          {groupMembers.map((item, index) => {\n            return (\n              <Member\n                key={index}\n                item={item}\n                changeMember={changeMember}\n                deleteMember={deleteMember}\n                groupID={groupID}\n                isOwner={isOwner}\n                isItemFreezed={isItemFreezed}\n                toggleItemFreezed={toggleItemFreezed}\n              />\n            );\n          })\n          }\n        </tbody>\n      </Table>\n    );\n  }\n}\n\nGroupMembers.propTypes = propTypes;\n\nconst MemberPropTypes = {\n  item: PropTypes.object.isRequired,\n  changeMember: PropTypes.func.isRequired,\n  deleteMember: PropTypes.func.isRequired,\n  toggleItemFreezed: PropTypes.func.isRequired,\n  groupID: PropTypes.string,\n  isOwner: PropTypes.bool.isRequired,\n  isItemFreezed: PropTypes.bool.isRequired\n};\n\nclass Member extends React.PureComponent {\n\n  constructor(props) {\n    super(props);\n    this.roles = ['Admin', 'Member'];\n    this.state = ({\n      highlight: false,\n    });\n  }\n\n  onChangeUserRole = (role) => {\n    let isAdmin = role === 'Admin' ? 'True' : 'False';\n    seafileAPI.setGroupAdmin(this.props.groupID, this.props.item.email, isAdmin).then((res) => {\n      this.props.changeMember(res.data);\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  deleteMember = () => {\n    const { item } = this.props;\n    seafileAPI.deleteGroupMember(this.props.groupID, item.email).then((res) => {\n      this.props.deleteMember(item);\n      toaster.success(gettext('Successfully deleted {name}.').replace('{name}', item.name));\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  handleMouseOver = () => {\n    if (this.props.isItemFreezed) return;\n    this.setState({\n      highlight: true,\n    });\n  };\n\n  handleMouseLeave = () => {\n    if (this.props.isItemFreezed) return;\n    this.setState({\n      highlight: false,\n    });\n  };\n\n  translateRole = (role) => {\n    if (role === 'Admin') {\n      return gettext('Admin');\n    }\n    else if (role === 'Member') {\n      return gettext('Member');\n    }\n    else if (role === 'Owner') {\n      return gettext('Owner');\n    }\n  };\n\n  render() {\n    const { item, isOwner } = this.props;\n    const deleteAuthority = (item.role !== 'Owner' && isOwner === true) || (item.role === 'Member' && isOwner === false);\n    return(\n      <tr onMouseOver={this.handleMouseOver} onMouseLeave={this.handleMouseLeave} className={this.state.highlight ? 'tr-highlight' : ''} tabIndex=\"0\" onFocus={this.handleMouseOver}>\n        <th scope=\"row\"><img className=\"avatar\" src={item.avatar_url} alt=\"\"/></th>\n        <td>{item.name}</td>\n        <td>\n          {((isOwner === false) || (isOwner === true && item.role === 'Owner')) &&\n            <span className=\"group-admin\">{this.translateRole(item.role)}</span>\n          }\n          {(isOwner === true && item.role !== 'Owner') &&\n            <RoleEditor\n              isTextMode={true}\n              isEditIconShow={this.state.highlight}\n              currentRole={item.role}\n              roles={this.roles}\n              onRoleChanged={this.onChangeUserRole}\n              toggleItemFreezed={this.props.toggleItemFreezed}\n            />\n          }\n        </td>\n        <td>\n          {(deleteAuthority && this.state.highlight) &&\n          <OpIcon\n            className=\"action-icon sf2-icon-x3\"\n            title={gettext('Delete')}\n            op={this.deleteMember}\n          />\n          }\n        </td>\n      </tr>\n    );\n  }\n}\n\nMember.propTypes = MemberPropTypes;\n\n\nexport default GroupMembers;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, InputGroup, InputGroupText, Input } from 'reactstrap';\nimport { Utils } from '../utils/utils';\nimport { gettext } from '../utils/constants';\nimport { seafileAPI } from '../utils/seafile-api';\nimport UserSelect from './user-select';\nimport toaster from './toast';\nimport Loading from './loading';\nimport GroupMembers from './group-members';\n\nconst propTypes = {\n  groupID: PropTypes.string,\n  isOwner: PropTypes.bool.isRequired\n};\n\nclass ManageMembersDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isLoading: true, // first loading\n      isLoadingMore: false,\n      groupMembers: [],\n      page: 1,\n      perPage: 100,\n      hasNextPage: false,\n      selectedOption: null,\n      errMessage: [],\n      isItemFreezed: false,\n      searchActive: false,\n      keyword: '',\n      membersFound: []\n    };\n  }\n\n  componentDidMount() {\n    this.listGroupMembers(this.state.page);\n  }\n\n  listGroupMembers = (page) => {\n    const { groupID } = this.props;\n    const { perPage, groupMembers } = this.state;\n    seafileAPI.listGroupMembers(groupID, page, perPage).then((res) => {\n      const members = res.data;\n      this.setState({\n        isLoading: false,\n        isLoadingMore: false,\n        page: page,\n        hasNextPage: members.length < perPage ? false : true,\n        groupMembers: groupMembers.concat(members)\n      });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n      this.setState({\n        isLoading: false,\n        isLoadingMore: false,\n        hasNextPage: false\n      });\n    });\n  };\n\n  onSelectChange = (option) => {\n    this.setState({\n      selectedOption: option,\n      errMessage: [],\n    });\n  };\n\n  addGroupMember = () => {\n    let emails = [];\n    for (let i = 0; i < this.state.selectedOption.length; i++) {\n      emails.push(this.state.selectedOption[i].email);\n    }\n    seafileAPI.addGroupMembers(this.props.groupID, emails).then((res) => {\n      const newMembers = res.data.success;\n      this.setState({\n        groupMembers: [].concat(newMembers, this.state.groupMembers),\n        selectedOption: null,\n      });\n      this.refs.userSelect.clearSelect();\n      if (res.data.failed.length > 0) {\n        this.setState({\n          errMessage: res.data.failed\n        });\n      }\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  toggleItemFreezed = (isFreezed) => {\n    this.setState({\n      isItemFreezed: isFreezed\n    });\n  };\n\n  handleScroll = (event) => {\n    // isLoadingMore: to avoid repeated request\n    const { page, hasNextPage, isLoadingMore } = this.state;\n    if (hasNextPage && !isLoadingMore) {\n      const clientHeight = event.target.clientHeight;\n      const scrollHeight = event.target.scrollHeight;\n      const scrollTop    = event.target.scrollTop;\n      const isBottom = (clientHeight + scrollTop + 1 >= scrollHeight);\n      if (isBottom) { // scroll to the bottom\n        this.setState({isLoadingMore: true}, () => {\n          this.listGroupMembers(page + 1);\n        });\n      }\n    }\n  };\n\n  changeMember = (targetMember) => {\n    this.setState({\n      groupMembers: this.state.groupMembers.map((item) => {\n        if (item.email == targetMember.email) {\n          item = targetMember;\n        }\n        return item;\n      })\n    });\n  };\n\n  deleteMember = (targetMember) => {\n    const groupMembers = this.state.groupMembers;\n    groupMembers.splice(groupMembers.indexOf(targetMember), 1);\n    this.setState({\n      groupMembers: groupMembers\n    });\n  };\n\n  searchMembers = (e) => {\n    const { groupMembers } = this.state;\n    const keyword = e.target.value;\n    const value = keyword.trim().toLowerCase();\n    const membersFound = groupMembers.filter(item => item.name.toLowerCase().indexOf(value) > -1);\n    this.setState({ keyword, membersFound });\n  };\n\n  clearSearch = () => {\n    this.setState({\n      keyword: '',\n      membersFound: []\n    });\n  };\n\n  onSearchInputFocus = () => {\n    this.setState({\n      searchActive: true\n    });\n  };\n\n  onSearchInputBlur = () => {\n    this.setState({\n      searchActive: false\n    });\n  };\n\n  render() {\n    const {\n      isLoading, hasNextPage, groupMembers,\n      keyword, membersFound,\n      searchActive\n    } = this.state;\n    return (\n      <Fragment>\n        <p className=\"mb-2\">{gettext('Add group member')}</p>\n        <div className='add-members'>\n          <UserSelect\n            placeholder={gettext('Search users...')}\n            onSelectChange={this.onSelectChange}\n            ref=\"userSelect\"\n            isMulti={true}\n            className=\"add-members-select\"\n          />\n          {this.state.selectedOption ?\n            <Button color=\"secondary\" onClick={this.addGroupMember}>{gettext('Submit')}</Button> :\n            <Button color=\"secondary\" disabled>{gettext('Submit')}</Button>\n          }\n        </div>\n        {\n          this.state.errMessage.length > 0 &&\n            this.state.errMessage.map((item, index = 0) => {\n              return (\n                <div className=\"group-error error\" key={index}>{item.error_msg}</div>\n              );\n            })\n        }\n        {groupMembers.length > 10 &&\n          <InputGroup className={`search-group-members rounded ${searchActive ? 'active' : ''}`}>\n            <InputGroupText>\n              <i className=\"fas fa-search\" aria-hidden={true}></i>\n            </InputGroupText>\n            <Input\n              type=\"text\"\n              className=\"input-group-input px-0\"\n              placeholder={gettext('Search group members')}\n              value={keyword}\n              onChange={this.searchMembers}\n              onFocus={this.onSearchInputFocus}\n              onBlur={this.onSearchInputBlur}\n            />\n            {keyword && (\n              <InputGroupText>\n                <i className=\"sf2-icon-x1\" aria-hidden={true} onClick={this.clearSearch}></i>\n              </InputGroupText>\n            )}\n          </InputGroup>\n        }\n        <div className=\"manage-members\" onScroll={keyword.trim() ? () => {} : this.handleScroll}>\n          {isLoading ? <Loading /> : (\n            <Fragment>\n              <GroupMembers\n                groupMembers={keyword.trim() ? membersFound : groupMembers}\n                changeMember={this.changeMember}\n                deleteMember={this.deleteMember}\n                groupID={this.props.groupID}\n                isOwner={this.props.isOwner}\n                isItemFreezed={this.state.isItemFreezed}\n                toggleItemFreezed={this.toggleItemFreezed}\n              />\n              {(!keyword.trim() && hasNextPage) && <Loading />}\n            </Fragment>\n          )}\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nManageMembersDialog.propTypes = propTypes;\n\nexport default ManageMembersDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Modal, ModalHeader, ModalBody } from 'reactstrap';\nimport { gettext } from '../../utils/constants';\nimport ListAndAddGroupMembers from '../list-and-add-group-members';\n\nimport '../../css/manage-members-dialog.css';\n\nconst propTypes = {\n  groupID: PropTypes.string,\n  isOwner: PropTypes.bool.isRequired,\n  toggleManageMembersDialog: PropTypes.func.isRequired\n};\n\nclass ManageMembersDialog extends React.Component {\n\n  render() {\n    const { groupID, isOwner, toggleManageMembersDialog: toggle } = this.props;\n    return (\n      <Modal isOpen={true} toggle={toggle} className=\"group-manage-members-dialog\">\n        <ModalHeader toggle={toggle}>{gettext('Manage group members')}</ModalHeader>\n        <ModalBody className=\"pb-0\">\n          <ListAndAddGroupMembers\n            groupID={groupID}\n            isOwner={isOwner}\n          />\n        </ModalBody>\n      </Modal>\n    );\n  }\n}\n\nManageMembersDialog.propTypes = propTypes;\n\nexport default ManageMembersDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Modal, ModalHeader, ModalBody, ModalFooter, Button } from 'reactstrap';\nimport { gettext, username } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../toast';\n\nclass LeaveGroupDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  leaveGroup = () => {\n    seafileAPI.quitGroup(this.props.groupID, username).then((res)=> {\n      this.props.onGroupChanged();\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  render() {\n    return(\n      <Modal isOpen={true} toggle={this.props.toggleLeaveGroupDialog}>\n        <ModalHeader toggle={this.props.toggleLeaveGroupDialog}>{gettext('Leave Group')}</ModalHeader>\n        <ModalBody>\n          <p>{gettext('Really want to leave this group?')}</p>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.props.toggleLeaveGroupDialog}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.leaveGroup}>{gettext('Leave')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nconst LeaveGroupDialogPropTypes = {\n  toggleLeaveGroupDialog: PropTypes.func.isRequired,\n  groupID: PropTypes.string,\n  onGroupChanged: PropTypes.func.isRequired,\n};\n\nLeaveGroupDialog.propTypes = LeaveGroupDialogPropTypes;\n\nexport default LeaveGroupDialog;\n","import React,{ Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport cookie from 'react-cookies';\nimport { gettext, siteRoot, username, canAddRepo } from '../../utils/constants';\nimport { Link } from '@gatsbyjs/reach-router';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport Loading from '../../components/loading';\nimport EmptyTip from '../../components/empty-tip';\nimport ModalPortal from '../../components/modal-portal';\nimport Group from '../../models/group';\nimport Repo from '../../models/repo';\nimport toaster from '../../components/toast';\nimport OpIcon from '../../components/op-icon';\nimport CommonToolbar from '../../components/toolbar/common-toolbar';\nimport CreateRepoDialog from '../../components/dialog/create-repo-dialog';\nimport DismissGroupDialog from '../../components/dialog/dismiss-group-dialog';\nimport RenameGroupDialog from '../../components/dialog/rename-group-dialog';\nimport TransferGroupDialog from '../../components/dialog/transfer-group-dialog';\nimport ImportMembersDialog from '../../components/dialog/import-members-dialog';\nimport ManageMembersDialog from '../../components/dialog/manage-members-dialog';\nimport LeaveGroupDialog from '../../components/dialog/leave-group-dialog';\nimport SharedRepoListView from '../../components/shared-repo-list-view/shared-repo-list-view';\nimport LibDetail from '../../components/dirent-detail/lib-details';\nimport SortOptionsDialog from '../../components/dialog/sort-options';\n\nimport '../../css/group-view.css';\n\nconst propTypes = {\n  onShowSidePanel: PropTypes.func.isRequired,\n  onSearchedClick: PropTypes.func.isRequired,\n  onGroupChanged: PropTypes.func.isRequired,\n  onTabNavClick: PropTypes.func.isRequired,\n  groupID: PropTypes.string,\n};\n\nclass GroupView extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isLoading: true, // first loading\n      isLoadingMore: false,\n      errMessage: '',\n      emptyTip: null,\n      currentGroup: null,\n      currentRepo: null,\n      isStaff: false,\n      isOwner: false,\n      sortBy: cookie.load('seafile-repo-dir-sort-by') || 'name', // 'name' or 'time' or 'size'\n      sortOrder: cookie.load('seafile-repo-dir-sort-order') || 'asc', // 'asc' or 'desc'\n      isSortOptionsDialogOpen: false,\n      repoList: [],\n      currentPage: 1,\n      perPage: 300,\n      hasNextPage: false,\n      libraryType: 'group',\n      isCreateRepoDialogShow: false,\n      isDepartmentGroup: false,\n      showGroupDropdown: false,\n      showGroupMembersPopover: false,\n      showRenameGroupDialog: false,\n      showDismissGroupDialog: false,\n      showTransferGroupDialog: false,\n      showImportMembersDialog: false,\n      showManageMembersDialog: false,\n      groupMembers: [],\n      isShowDetails: false,\n      isLeaveGroupDialogOpen: false,\n    };\n  }\n\n  componentDidMount() {\n    let groupID = this.props.groupID;\n    this.loadGroup(groupID);\n  }\n\n  componentWillReceiveProps(nextProps) {\n    if (nextProps.groupID !== this.props.groupID) {\n      this.loadGroup(nextProps.groupID);\n    }\n  }\n\n  loadGroup = (groupID) => {\n    seafileAPI.getGroup(groupID).then((res) => {\n      let currentGroup = new Group(res.data);\n      let emptyTip = this.getEmptyTip(currentGroup);\n      let isStaff  = currentGroup.admins.indexOf(username) > -1;  //for item operations\n      let isOwner = currentGroup.owner === username ? true : false;\n      let isDepartmentGroup = currentGroup.parent_group_id !== 0;\n      this.setState({\n        emptyTip: emptyTip,\n        currentGroup: currentGroup,\n        isStaff: isStaff,\n        isDepartmentGroup: isDepartmentGroup,\n        isOwner: isOwner,\n        currentPage: 1,\n        repoList: []  // empty it for the current group\n      }, () => {\n        this.loadRepos(this.state.currentPage);\n      });\n    }).catch((error) => {\n      this.setState({\n        isLoading: false,\n        errMessage: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  };\n\n  loadRepos = (page) => {\n    const { perPage } = this.state;\n    seafileAPI.listGroupRepos(this.props.groupID, page, perPage).then((res) => {\n      let hasNextPage = true;\n      if (res.data.length < perPage) {\n        hasNextPage = false;\n      }\n      let repoList = this.state.repoList;\n      let newRepoList = res.data.map(item => {\n        let repo = new Repo(item);\n        return repo;\n      });\n      if (newRepoList.length) {\n        repoList = repoList.concat(newRepoList);\n      }\n      this.setState({\n        isLoading: false,\n        isLoadingMore: false,\n        currentPage: page,\n        hasNextPage: hasNextPage,\n        repoList: Utils.sortRepos(repoList, this.state.sortBy, this.state.sortOrder)\n      });\n    }).catch((error) => {\n      this.setState({\n        isLoading: false,\n        isLoadingMore: false,\n        errMessage: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  };\n\n  getEmptyTip = (currentGroup) => {\n    let emptyTip = null;\n    if (currentGroup) {\n      if (currentGroup.parent_group_id === 0) {\n        emptyTip = (\n          <EmptyTip>\n            <h2>{gettext('No libraries shared with this group')}</h2>\n            <p>{gettext('No libraries have been shared with this group yet. A library shared with a group can be accessed by all group members. You can share a library with a group in \"My Libraries\". You can also create a new library to be shared with this group by clicking the \"New Library\" button in the menu bar.')}</p>\n          </EmptyTip>\n        );\n      } else {\n        if (currentGroup.admins.indexOf(username) == -1) {  // is a member of this group\n          emptyTip = (\n            <EmptyTip>\n              <h2>{gettext('No libraries')}</h2>\n            </EmptyTip>\n          );\n        } else {\n          emptyTip = (\n            <EmptyTip>\n              <h2>{gettext('No libraries')}</h2>\n              <p>{gettext('You can create libraries by clicking the \"New Library\" button above.')}</p>\n            </EmptyTip>\n          );\n        }\n      }\n    }\n    return emptyTip;\n  };\n\n  onCreateRepoToggle = () => {\n    this.setState({isCreateRepoDialogShow: !this.state.isCreateRepoDialogShow});\n  };\n\n  onCreateRepo = (repo, groupOwnerType) => {\n    let groupId = this.props.groupID;\n    if (groupOwnerType && groupOwnerType === 'department') {\n      seafileAPI.createGroupOwnedLibrary(groupId, repo).then(res => { //need modify endpoint api\n        let object = {\n          repo_id: res.data.id,\n          repo_name: res.data.name,\n          owner_name: res.data.group_name,\n          owner_email: res.data.owner,\n          permission: res.data.permission,\n          mtime: res.data.mtime,\n          size: res.data.size,\n          encrypted: res.data.encrypted,\n        };\n        let repo = new Repo(object);\n        let repoList = this.addRepoItem(repo);\n        this.setState({repoList: repoList});\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n\n    } else {\n      seafileAPI.createGroupRepo(groupId, repo).then(res => {\n        let repo = new Repo(res.data);\n        let repoList = this.addRepoItem(repo);\n        this.setState({repoList: repoList});\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    }\n    this.onCreateRepoToggle();\n  };\n\n  onItemDelete = (repo) => {\n    let groupID = this.props.groupID;\n    let repoList = this.state.repoList.filter(item => {\n      return item.repo_id !== repo.repo_id;\n    });\n    this.setState({repoList: repoList});\n    this.loadGroup(groupID);\n  };\n\n  addRepoItem = (repo) => {\n    let newRepoList = this.state.repoList.map(item => {return item;});\n    newRepoList.unshift(repo);\n    return newRepoList;\n  };\n\n  onItemUnshare = (repo) => {\n    let group = this.state.currentGroup;\n    seafileAPI.unshareRepoToGroup(repo.repo_id, group.id).then(() => {\n      let repoList = this.state.repoList.filter(item => {\n        return item.repo_id !== repo.repo_id;\n      });\n      this.setState({repoList: repoList});\n      this.loadGroup(group.id);\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  onItemRename = (repo, newName) => {\n    seafileAPI.renameGroupOwnedLibrary(this.props.groupID, repo.repo_id, newName).then(res => {\n      let repoList = this.state.repoList.map(item => {\n        if (item.repo_id === repo.repo_id) {\n          item.repo_name = newName;\n        }\n        return item;\n      });\n      this.setState({repoList: repoList});\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  onMonitorRepo = (repo, monitored) => {\n    let repoList = this.state.repoList.map(item => {\n      if (item.repo_id === repo.repo_id) {\n        item.monitored = monitored;\n      }\n      return item;\n    });\n    this.setState({repoList: repoList});\n  };\n\n  onTabNavClick = (tabName) => {\n    this.props.onTabNavClick(tabName);\n  };\n\n  toggleGroupDropdown = () => {\n    this.setState({\n      showGroupDropdown: !this.state.showGroupDropdown\n    });\n  };\n\n  toggleDismissGroupDialog = () => {\n    this.setState({\n      showDismissGroupDialog: !this.state.showDismissGroupDialog,\n      showGroupDropdown: false,\n    });\n  };\n\n  toggleRenameGroupDialog = () => {\n    this.setState({\n      showRenameGroupDialog: !this.state.showRenameGroupDialog,\n      showGroupDropdown: false,\n    });\n  };\n\n  toggleTransferGroupDialog = () => {\n    this.setState({\n      showTransferGroupDialog: !this.state.showTransferGroupDialog,\n      showGroupDropdown: false,\n    });\n  };\n\n  toggleImportMembersDialog= () => {\n    this.setState({\n      showImportMembersDialog: !this.state.showImportMembersDialog\n    });\n  };\n\n  importMembersInBatch= (file) => {\n    toaster.notify(gettext('It may take some time, please wait.'));\n    seafileAPI.importGroupMembersViaFile(this.state.currentGroup.id, file).then((res) => {\n      res.data.failed.forEach(item => {\n        const msg = `${item.email}: ${item.error_msg}`;\n        toaster.danger(msg);\n      });\n    }).catch((error) => {\n      let errMsg = Utils.getErrorMsg(error);\n      toaster.danger(errMsg);\n    });\n  };\n\n  toggleManageMembersDialog = () => {\n    this.setState({\n      showManageMembersDialog: !this.state.showManageMembersDialog,\n      showGroupDropdown: false,\n    });\n  };\n\n  toggleLeaveGroupDialog = () => {\n    this.setState({\n      isLeaveGroupDialogOpen: !this.state.isLeaveGroupDialogOpen,\n      showGroupDropdown: false,\n    });\n  };\n\n  listGroupMembers = () => {\n    seafileAPI.listGroupMembers(this.props.groupID).then((res) => {\n      this.setState({\n        groupMembers: res.data\n      });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  toggleGroupMembersPopover = (state) => {\n    if (state === 'open') {\n      this.listGroupMembers();\n      this.setState({\n        showGroupMembersPopover: true\n      });\n    } else {\n      this.setState({\n        showGroupMembersPopover: false\n      });\n    }\n  };\n\n  onItemDetails = (repo) => {\n    this.setState({\n      isShowDetails: true,\n      currentRepo: repo,\n    });\n  };\n\n  closeDetails = () => {\n    this.setState({isShowDetails: false});\n  };\n\n  sortItems = (sortBy, sortOrder) => {\n    cookie.save('seafile-repo-dir-sort-by', sortBy);\n    cookie.save('seafile-repo-dir-sort-order', sortOrder);\n    this.setState({\n      sortBy: sortBy,\n      sortOrder: sortOrder,\n      repoList: Utils.sortRepos(this.state.repoList, sortBy, sortOrder)\n    });\n  };\n\n  translateRole = (role) => {\n    if (role === 'Admin') {\n      return gettext('Admin');\n    }\n    else if (role === 'Member') {\n      return gettext('Member');\n    }\n    else if (role === 'Owner') {\n      return gettext('Owner');\n    }\n  };\n\n  toggleSortOptionsDialog = () => {\n    this.setState({\n      isSortOptionsDialogOpen: !this.state.isSortOptionsDialogOpen\n    });\n  };\n\n  handleScroll = (event) => {\n    // isLoadingMore: to avoid repeated request\n    const { currentPage, hasNextPage, isLoadingMore } = this.state;\n    if (hasNextPage && !isLoadingMore) {\n      const clientHeight = event.target.clientHeight;\n      const scrollHeight = event.target.scrollHeight;\n      const scrollTop    = event.target.scrollTop;\n      const isBottom = (clientHeight + scrollTop + 1 >= scrollHeight);\n      if (isBottom) { // scroll to the bottom\n        this.setState({isLoadingMore: true}, () => {\n          this.loadRepos(currentPage + 1);\n        });\n      }\n    }\n  };\n\n  render() {\n    let { errMessage, emptyTip, currentGroup, isDepartmentGroup, isStaff } = this.state;\n    let isShowSettingIcon = false;\n    if (currentGroup) { // group message is loaded\n      if (currentGroup.parent_group_id === 0) {\n        isShowSettingIcon = true;\n      } else {\n        if (currentGroup.admins.indexOf(username) > -1) {\n          isShowSettingIcon = true;\n        }\n      }\n    }\n    let useRate = 0;\n    if (isDepartmentGroup && currentGroup.group_quota) {\n      useRate = currentGroup.group_quota_usage / currentGroup.group_quota * 100 + '%';\n    }\n    return (\n      <Fragment>\n        <div className=\"main-panel-north border-left-show\">\n          <div className=\"cur-view-toolbar\">\n            <span className=\"sf2-icon-menu side-nav-toggle hidden-md-up d-md-none\" title=\"Side Nav Menu\" onClick={this.props.onShowSidePanel}></span>\n            <div className=\"operation\">\n              {((!isDepartmentGroup && canAddRepo) || (isDepartmentGroup && isStaff)) && (\n                Utils.isDesktop() ? (\n                  <button className=\"btn btn-secondary operation-item\" title={gettext('New Library')} onClick={this.onCreateRepoToggle}>\n                    <i className=\"fas fa-plus-square text-secondary mr-1\"></i>{gettext('New Library')}\n                  </button>\n                ) : (\n                  <span className=\"sf2-icon-plus mobile-toolbar-icon\" title={gettext('New Library')} onClick={this.onCreateRepoToggle}></span>\n                )\n              )}\n            </div>\n          </div>\n          <CommonToolbar onSearchedClick={this.props.onSearchedClick} />\n        </div>\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <div className=\"cur-view-path\">\n              {currentGroup && (\n                <Fragment>\n                  <div className=\"path-container\">\n                    <Link to={`${siteRoot}groups/`} onClick={() => this.onTabNavClick('groups')}>{gettext('Groups')}</Link>\n                    <span className=\"path-split\">/</span>\n                    <span>{currentGroup.name}</span>\n                    {isDepartmentGroup && (\n                      <Fragment>\n                        <span className=\"department-group-icon fas fa-building\" title={gettext('This is a special group representing a department.')}></span>\n                        {currentGroup.group_quota > 0 &&\n                          <span className=\"department-usage-container\">\n                            <div className=\"department-usage\">\n                              <span id=\"quota-bar\" className=\"department-quota-bar\"><span id=\"quota-usage\" className=\"usage\" style={{width: useRate}}></span></span>\n                              <span className=\"department-quota-info\">{Utils.bytesToSize(currentGroup.group_quota_usage)} / {Utils.bytesToSize(currentGroup.group_quota)}</span>\n                            </div>\n                          </span>\n                        }\n                      </Fragment>\n                    )}\n                  </div>\n                  <div className=\"path-tool\">\n                    { isShowSettingIcon &&\n                    <React.Fragment>\n                      <OpIcon\n                        className=\"sf2-icon-cog1 action-icon group-top-action-icon\"\n                        title={gettext('Settings')}\n                        op={this.toggleGroupDropdown}\n                      />\n                      {this.state.showGroupDropdown &&\n                        <div className=\"sf-popover\" id=\"group-setting-popover\">\n                          <div className=\"sf-popover-hd sf-popover-title\">\n                            <span>{gettext('Settings')}</span>\n                            <a href=\"#\" className=\"sf-popover-close js-close sf2-icon-x1 action-icon\"\n                              role=\"button\"\n                              aria-label={gettext('Close')}\n                              onClick={this.toggleGroupDropdown}></a>\n                          </div>\n                          <div className=\"sf-popover-con\">\n                            {(this.state.isStaff || this.state.isOwner) &&\n                            <ul className=\"sf-popover-list\">\n                              <li><a href=\"#\" className=\"sf-popover-item\" onClick={this.toggleRenameGroupDialog}>{gettext('Rename')}</a></li>\n                              {\n                                this.state.isOwner &&\n                                <li><a href=\"#\" className=\"sf-popover-item\" onClick={this.toggleTransferGroupDialog} >{gettext('Transfer')}</a></li>\n                              }\n                            </ul>\n                            }\n                            {(this.state.isStaff || this.state.isOwner) &&\n                            <ul className=\"sf-popover-list\">\n                              <li><a href=\"#\" className=\"sf-popover-item\" onClick={this.toggleImportMembersDialog} >{gettext('Import Members')}</a></li>\n                              <li><a href=\"#\" className=\"sf-popover-item\" onClick={this.toggleManageMembersDialog} >{gettext('Manage Members')}</a></li>\n                            </ul>\n                            }\n                            {\n                              this.state.isOwner &&\n                              <ul className=\"sf-popover-list\">\n                                <li><a href=\"#\" className=\"sf-popover-item\" onClick={this.toggleDismissGroupDialog}>{gettext('Delete Group')}</a></li>\n                              </ul>\n                            }\n                            {/* gourp owner only can dissmiss group, admin could not quit, department member could not quit */}\n                            {(!this.state.isOwner && !isDepartmentGroup) &&\n                            <ul className=\"sf-popover-list\">\n                              <li><a href=\"#\" className=\"sf-popover-item\" onClick={this.toggleLeaveGroupDialog}>{gettext('Leave Group')}</a></li>\n                            </ul>\n                            }\n                          </div>\n                        </div>}\n                    </React.Fragment>\n                    }\n                    <a href=\"#\"\n                      className=\"sf2-icon-user2 action-icon group-top-action-icon\"\n                      title={gettext('Members')} id=\"groupMembers\"\n                      onClick={() => this.toggleGroupMembersPopover('open')}>\n                    </a>\n                    {this.state.showGroupMembersPopover &&\n                    <div className=\"sf-popover\" id=\"group-members-popover\">\n                      <div className=\"sf-popover-hd sf-popover-title group-member-list-header\">\n                        <span>{gettext('Members')}</span>\n                        <a href=\"#\" className=\"sf-popover-close js-close sf2-icon-x1 action-icon\"\n                          onClick={this.toggleGroupMembersPopover}></a>\n                      </div>\n                      <div className=\"sf-popover-con\">\n                        <ul className=\"sf-popover-list group-member-list\">\n                          {this.state.groupMembers.map((item, index) => {\n                            return (\n                              <li key={index}>\n                                <a href=\"#\" className=\"sf-popover-item user-item d-flex\">\n                                  <img src={item.avatar_url} alt=\"\" className=\"group-member-avatar avatar\"/>\n                                  <span className=\"txt-item ellipsis d-flex\">\n                                    <span className=\"group-member-name ellipsis\">{item.name}</span>\n                                    <span className=\"group-member-admin\">{this.translateRole(item.role)}</span>\n                                  </span>\n                                </a>\n                              </li>\n                            );\n                          })}\n                        </ul>\n                      </div>\n                    </div>}\n                    {(!Utils.isDesktop() && this.state.repoList.length > 0) && <span className=\"sf3-font sf3-font-sort action-icon\" onClick={this.toggleSortOptionsDialog}></span>}\n                    {this.state.isSortOptionsDialogOpen &&\n                    <SortOptionsDialog\n                      toggleDialog={this.toggleSortOptionsDialog}\n                      sortBy={this.state.sortBy}\n                      sortOrder={this.state.sortOrder}\n                      sortItems={this.sortItems}\n                    />\n                    }\n                  </div>\n                </Fragment>\n              )}\n            </div>\n            <div className=\"cur-view-content d-block\" onScroll={this.handleScroll}>\n              {this.state.isLoading && <Loading />}\n              {(!this.state.isLoading && errMessage) && <div className=\"error text-center mt-2\">{errMessage}</div>}\n              {(!this.state.isLoading && this.state.repoList.length === 0) && emptyTip}\n              {(!this.state.isLoading && this.state.repoList.length > 0) &&\n                <SharedRepoListView\n                  repoList={this.state.repoList}\n                  hasNextPage={this.state.hasNextPage}\n                  currentGroup={this.state.currentGroup}\n                  sortBy={this.state.sortBy}\n                  sortOrder={this.state.sortOrder}\n                  sortItems={this.sortItems}\n                  onItemUnshare={this.onItemUnshare}\n                  onItemDelete={this.onItemDelete}\n                  onItemDetails={this.onItemDetails}\n                  onItemRename={this.onItemRename}\n                  onMonitorRepo={this.onMonitorRepo}\n                />\n              }\n            </div>\n          </div>\n          {this.state.isShowDetails && (\n            <div className=\"cur-view-detail\">\n              <LibDetail currentRepo={this.state.currentRepo} closeDetails={this.closeDetails}/>\n            </div>\n          )}\n        </div>\n        {this.state.isCreateRepoDialogShow && !this.state.isDepartmentGroup && (\n          <ModalPortal>\n            <CreateRepoDialog\n              libraryType={this.state.libraryType}\n              onCreateToggle={this.onCreateRepoToggle}\n              onCreateRepo={this.onCreateRepo}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isCreateRepoDialogShow && this.state.isDepartmentGroup &&\n          <CreateRepoDialog\n            isAdmin={this.state.isAdmin}\n            onCreateToggle={this.onCreateRepoToggle}\n            onCreateRepo={this.onCreateRepo}\n            libraryType='department'\n          />\n        }\n        {this.state.showRenameGroupDialog &&\n          <RenameGroupDialog\n            showRenameGroupDialog={this.state.showRenameGroupDialog}\n            toggleRenameGroupDialog={this.toggleRenameGroupDialog}\n            loadGroup={this.loadGroup}\n            groupID={this.props.groupID}\n            onGroupChanged={this.props.onGroupChanged}\n            currentGroupName={currentGroup.name}\n          />\n        }\n        {this.state.showDismissGroupDialog &&\n          <DismissGroupDialog\n            showDismissGroupDialog={this.state.showDismissGroupDialog}\n            toggleDismissGroupDialog={this.toggleDismissGroupDialog}\n            loadGroup={this.loadGroup}\n            groupID={this.props.groupID}\n            onGroupChanged={this.props.onGroupChanged}\n          />\n        }\n        {this.state.showTransferGroupDialog &&\n          <TransferGroupDialog\n            toggleTransferGroupDialog={this.toggleTransferGroupDialog}\n            groupID={this.props.groupID}\n            onGroupChanged={this.props.onGroupChanged}\n          />\n        }\n        { this.state.showImportMembersDialog &&\n          <ImportMembersDialog\n            toggleImportMembersDialog={this.toggleImportMembersDialog}\n            importMembersInBatch={this.importMembersInBatch}\n          />\n        }\n        {this.state.showManageMembersDialog &&\n          <ManageMembersDialog\n            toggleManageMembersDialog={this.toggleManageMembersDialog}\n            groupID={this.props.groupID}\n            onGroupChanged={this.props.onGroupChanged}\n            isOwner={this.state.isOwner}\n          />\n        }\n        {this.state.isLeaveGroupDialogOpen &&\n          <LeaveGroupDialog\n            toggleLeaveGroupDialog={this.toggleLeaveGroupDialog}\n            groupID={this.props.groupID}\n            onGroupChanged={this.props.onGroupChanged}\n          />\n        }\n      </Fragment>\n    );\n  }\n}\n\nGroupView.propTypes = propTypes;\n\nexport default GroupView;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport MediaQuery from 'react-responsive';\nimport CommonToolbar from './common-toolbar';\nimport { Button } from 'reactstrap';\nimport { gettext, canAddGroup } from '../../utils/constants';\n\nconst propTypes = {\n  searchPlaceholder: PropTypes.string,\n  onShowSidePanel: PropTypes.func.isRequired,\n  onSearchedClick: PropTypes.func.isRequired,\n  toggleAddGroupModal: PropTypes.func.isRequired,\n};\n\nclass GroupsToolbar extends React.Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    let { onShowSidePanel, onSearchedClick } = this.props;\n    return (\n      <div className=\"main-panel-north border-left-show\">\n        <div className=\"cur-view-toolbar\">\n          <span title=\"Side Nav Menu\" onClick={onShowSidePanel} className=\"sf2-icon-menu side-nav-toggle hidden-md-up d-md-none\"></span>\n          {canAddGroup && (\n            <div className=\"operation\">\n              <MediaQuery query=\"(min-width: 768px)\">\n                <Button color=\"btn btn-secondary operation-item\" onClick={this.props.toggleAddGroupModal}>\n                  <i className=\"fas fa-plus-square text-secondary mr-1\"></i>{gettext('New Group')}\n                </Button>\n              </MediaQuery>\n              <MediaQuery query=\"(max-width: 767.8px)\">\n                <span className=\"sf2-icon-plus mobile-toolbar-icon\" title={gettext('New Group')} onClick={this.props.toggleAddGroupModal}></span>\n              </MediaQuery>\n            </div>\n          )}\n        </div>\n        <CommonToolbar searchPlaceholder={this.props.searchPlaceholder} onSearchedClick={onSearchedClick}/>\n      </div>\n    );\n  }\n}\n\nGroupsToolbar.propTypes = propTypes;\n\nexport default GroupsToolbar;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Modal, ModalHeader, ModalBody, ModalFooter, Input, Button } from 'reactstrap';\nimport { Utils } from '../../utils/utils';\n\nclass CreateGroupDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      groupName: '',\n      errorMsg: '',\n      isSubmitBtnActive: false,\n    };\n  }\n\n  handleGroupChange = (event) => {\n    let name = event.target.value;\n\n    if (!name.trim()) {\n      this.setState({isSubmitBtnActive: false});\n    } else {\n      this.setState({isSubmitBtnActive: true});\n    }\n    this.setState({\n      groupName: name\n    });\n    if (this.state.errorMsg) {\n      this.setState({\n        errorMsg: ''\n      });\n    }\n  };\n\n  handleSubmitGroup = () => {\n    let name = this.state.groupName.trim();\n    if (name) {\n      let that = this;\n      seafileAPI.createGroup(name).then((res)=> {\n        that.props.onCreateGroup();\n      }).catch((error) => {\n        let errorMsg = Utils.getErrorMsg(error);\n        this.setState({errorMsg: errorMsg});\n      });\n    } else {\n      this.setState({\n        errorMsg: gettext('Name is required')\n      });\n    }\n    this.setState({\n      groupName: '',\n    });\n  };\n\n  handleKeyDown = (e) => {\n    if (e.keyCode === 13) {\n      this.handleSubmitGroup();\n      e.preventDefault();\n    }\n  };\n\n  render() {\n    return(\n      <Modal isOpen={this.props.showAddGroupModal} toggle={this.props.toggleAddGroupModal} autoFocus={false}>\n        <ModalHeader toggle={this.props.toggleAddGroupModal}>{gettext('New Group')}</ModalHeader>\n        <ModalBody>\n          <label htmlFor=\"groupName\">{gettext('Name')}</label>\n          <Input\n            type=\"text\"\n            id=\"groupName\"\n            value={this.state.groupName}\n            onChange={this.handleGroupChange}\n            onKeyDown={this.handleKeyDown}\n            autoFocus={true}\n          />\n          <span className=\"error\">{this.state.errorMsg}</span>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.props.toggleAddGroupModal}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.handleSubmitGroup} disabled={!this.state.isSubmitBtnActive}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nconst CreateGroupDialogPropTypes = {\n  toggleAddGroupModal: PropTypes.func.isRequired,\n  onCreateGroup: PropTypes.func.isRequired,\n  showAddGroupModal: PropTypes.bool.isRequired,\n};\n\nCreateGroupDialog.propTypes = CreateGroupDialogPropTypes;\n\nexport default CreateGroupDialog;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext, siteRoot, canAddGroup } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport Loading from '../../components/loading';\nimport Group from '../../models/group';\nimport Repo from '../../models/repo';\nimport toaster from '../../components/toast';\nimport GroupsToolbar from '../../components/toolbar/groups-toolbar';\nimport SharedRepoListView from '../../components/shared-repo-list-view/shared-repo-list-view';\nimport CreateGroupDialog from '../../components/dialog/create-group-dialog';\nimport LibDetail from '../../components/dirent-detail/lib-details';\nimport EmptyTip from '../../components/empty-tip';\n\nimport '../../css/groups.css';\n\nconst propTypes = {\n  group: PropTypes.object.isRequired,\n  onItemDetails: PropTypes.func.isRequired,\n};\n\n\nclass RepoListViewPanel extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      repoList: [],\n    };\n  }\n\n  componentDidMount() {\n    let group = this.props.group;\n    let repoList = group.repos.map(item => {\n      let repo = new Repo(item);\n      return repo;\n    });\n    this.setState({repoList: repoList});\n  }\n\n  onItemUnshare = (repo) => {\n    let group = this.props.group;\n    seafileAPI.unshareRepoToGroup(repo.repo_id, group.id).then(() => {\n      let repoList = this.state.repoList.filter(item => {\n        return item.repo_id !== repo.repo_id;\n      });\n      this.setState({repoList: repoList});\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  onItemDelete = (repo) => {\n    let repoList = this.state.repoList.filter(item => {\n      return item.repo_id !== repo.repo_id;\n    });\n    this.setState({repoList: repoList});\n  };\n\n  onItemRename = (repo, newName) => {\n    let group = this.props.group;\n    seafileAPI.renameGroupOwnedLibrary(group.id, repo.repo_id, newName).then(res => {\n      let repoList = this.state.repoList.map(item => {\n        if (item.repo_id === repo.repo_id) {\n          item.repo_name = newName;\n        }\n        return item;\n      });\n      this.setState({repoList: repoList});\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  onMonitorRepo = (repo, monitored) => {\n    let repoList = this.state.repoList.map(item => {\n      if (item.repo_id === repo.repo_id) {\n        item.monitored = monitored;\n      }\n      return item;\n    });\n    this.setState({repoList: repoList});\n  };\n\n  render() {\n    let group = this.props.group;\n    const emptyTip = <p className=\"group-item-empty-tip\">{gettext('No libraries')}</p>;\n    return (\n      <div className=\"group-list-panel\">\n        <h4 className=\"group-item-heading ellipsis\">\n          <a href={`${siteRoot}group/${group.id}/`} title={group.name}>{group.name}</a>\n        </h4>\n        {this.state.repoList.length === 0 ?\n          emptyTip :\n          <SharedRepoListView\n            isShowTableThread={false}\n            isShowRepoOwner={false}\n            currentGroup={this.props.group}\n            repoList={this.state.repoList}\n            onItemUnshare={this.onItemUnshare}\n            onItemDelete={this.onItemDelete}\n            onItemDetails={this.props.onItemDetails}\n            onItemRename={this.onItemRename}\n            onMonitorRepo={this.onMonitorRepo}\n          />\n        }\n      </div>\n    );\n  }\n}\n\nRepoListViewPanel.propTypes = propTypes;\n\nclass GroupsView extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isLoading: true,\n      errorMsg: '',\n      groupList: [],\n      showAddGroupModal: false,\n      isShowDetails: false,\n      currentRepo: null,\n    };\n  }\n\n  listGroups = () => {\n    seafileAPI.listGroups(true).then((res) => {\n      // `{'with_repos': 1}`: list repos of every group\n      let groupList = res.data.map(item => {\n        let group = new Group(item);\n        return group;\n      });\n      this.setState({\n        isLoading: false,\n        groupList: groupList.sort((a, b) => {\n          return a.name.toLowerCase() < b.name.toLowerCase() ? -1 : 1;\n        })\n      });\n    }).catch((error) => {\n      this.setState({\n        isLoading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  };\n\n  toggleAddGroupModal = () => {\n    this.setState({\n      showAddGroupModal: !this.state.showAddGroupModal\n    });\n  };\n\n  onCreateGroup = () => {\n    this.setState({\n      showAddGroupModal: false,\n      isLoading: true,\n      groupList: [],\n    });\n    this.listGroups();\n  };\n\n  componentDidMount() {\n    this.listGroups();\n  }\n\n  onItemDetails = (repo) => {\n    this.setState({\n      isShowDetails: true,\n      currentRepo: repo,\n    });\n  };\n\n  closeDetails = () => {\n    this.setState({isShowDetails: false});\n  };\n\n  render() {\n    const emptyTip = (\n      <EmptyTip>\n        <h2>{gettext('No groups')}</h2>\n        {canAddGroup ?\n          <p>{gettext('You are not in any groups. Groups allow multiple people to collaborate on libraries. You can create a group by clicking the \"New Group\" button in the menu bar.')}</p> :\n          <p>{gettext('You are not in any groups. Groups allow multiple people to collaborate on libraries. Groups you join will be listed here.')}</p>\n        }\n      </EmptyTip>\n    );\n\n    return (\n      <Fragment>\n        <GroupsToolbar\n          onShowSidePanel={this.props.onShowSidePanel}\n          onSearchedClick={this.props.onSearchedClick}\n          toggleAddGroupModal={this.toggleAddGroupModal}\n        />\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <div className=\"cur-view-path\">\n              <h3 className=\"sf-heading\">{gettext('My Groups')}</h3>\n            </div>\n            <div className=\"cur-view-content cur-view-content-groups\">\n              {this.state.isLoading && <Loading />}\n              {(!this.state.isLoading && this.state.errorMsg) && <div className=\"error text-center mt-2\">{this.state.errorMsg}</div>}\n              {(!this.state.isLoading && !this.state.errorMsg && this.state.groupList.length == 0) && emptyTip}\n              {!this.state.isLoading && this.state.groupList.map((group, index) => {\n                return (\n                  <RepoListViewPanel\n                    key={index}\n                    group={group}\n                    onItemDetails={this.onItemDetails}\n                  />\n                );\n              })}\n            </div>\n          </div>\n          {this.state.isShowDetails && (\n            <div className=\"cur-view-detail\">\n              <LibDetail currentRepo={this.state.currentRepo} closeDetails={this.closeDetails}/>\n            </div>\n          )}\n        </div>\n        { this.state.showAddGroupModal &&\n          <CreateGroupDialog\n            toggleAddGroupModal={this.toggleAddGroupModal}\n            onCreateGroup={this.onCreateGroup}\n            showAddGroupModal={this.state.showAddGroupModal}\n          />\n        }\n      </Fragment>\n    );\n  }\n}\n\nconst GroupsViewPropTypes = {\n  onShowSidePanel: PropTypes.func.isRequired,\n  onSearchedClick: PropTypes.func.isRequired,\n};\n\nGroupsView.propTypes = GroupsViewPropTypes;\n\nexport default GroupsView;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport CommonToolbar from './common-toolbar';\nimport { Button } from 'reactstrap';\nimport { gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\n\nconst propTypes = {\n  onShowSidePanel: PropTypes.func.isRequired,\n  onSearchedClick: PropTypes.func.isRequired,\n  toggleInvitePeopleDialog: PropTypes.func.isRequired,\n  searchPlaceholder: PropTypes.string.isRequired,\n};\n\nclass InvitationsToolbar extends React.Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    let { onShowSidePanel, onSearchedClick, toggleInvitePeopleDialog } = this.props;\n    return (\n      <div className=\"main-panel-north border-left-show\">\n        <div className=\"cur-view-toolbar\">\n          <span title=\"Side Nav Menu\" onClick={onShowSidePanel} className=\"sf2-icon-menu side-nav-toggle hidden-md-up d-md-none\">\n          </span>\n          {Utils.isDesktop() ? (\n            <div className=\"operation\">\n              <Button color=\"btn btn-secondary operation-item\" onClick={toggleInvitePeopleDialog}>\n                <i className=\"fas fa-plus-square text-secondary mr-1\"></i>{gettext('Invite Guest')}\n              </Button>\n            </div>\n          ) : (\n            <span className=\"sf2-icon-plus mobile-toolbar-icon\" title={gettext('Invite Guest')} onClick={toggleInvitePeopleDialog}></span>\n          )}\n        </div>\n        <CommonToolbar searchPlaceholder={this.props.searchPlaceholder} onSearchedClick={onSearchedClick}/>\n      </div>\n    );\n  }\n}\n\nInvitationsToolbar.propTypes = propTypes;\n\nexport default InvitationsToolbar;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Utils } from '../../utils/utils';\nimport { gettext } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Modal, ModalHeader, ModalBody, ModalFooter, Input, Button } from 'reactstrap';\nimport toaster from '../toast';\nimport Loading from '../loading';\n\nconst InvitePeopleDialogPropTypes = {\n  onInvitePeople: PropTypes.func.isRequired,\n  toggleDialog: PropTypes.func.isRequired,\n};\n\nclass InvitePeopleDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      emails: '',\n      errorMsg: '',\n      isSubmitting: false\n    };\n  }\n\n  handleInputChange = (e) => {\n    let emails = e.target.value;\n    this.setState({\n      emails: emails\n    });\n    if (this.state.errorMsg) {\n      this.setState({\n        errorMsg: ''\n      });\n    }\n  };\n\n  handleKeyDown = (e) => {\n    if (e.keyCode === 13) {\n      e.preventDefault();\n      this.handleSubmitInvite();\n    }\n  };\n\n  handleSubmitInvite = () => {\n    let emails = this.state.emails.trim();\n    if (!emails) {\n      this.setState({\n        errorMsg: gettext('It is required.')\n      });\n      return false;\n    }\n\n    let emailsArray = [];\n    emails = emails.split(',');\n    for (let i = 0, len = emails.length; i < len; i++) {\n      let email = emails[i].trim();\n      if (email) {\n        emailsArray.push(email);\n      }\n    }\n\n    if (!emailsArray.length) {\n      this.setState({\n        errorMsg: gettext('Email is invalid.')\n      });\n      return false;\n    }\n\n    this.setState({\n      isSubmitting: true\n    });\n    seafileAPI.invitePeople(emailsArray).then((res) => {\n      this.props.toggleDialog();\n      const success = res.data.success;\n      if (success.length) {\n        let successMsg = '';\n        if (success.length == 1) {\n          successMsg = gettext('Successfully invited %(email).')\n            .replace('%(email)', success[0].accepter);\n        } else {\n          successMsg = gettext('Successfully invited %(email) and %(num) other people.')\n            .replace('%(email)', success[0].accepter)\n            .replace('%(num)', success.length - 1);\n        }\n        toaster.success(successMsg);\n        this.props.onInvitePeople(success);\n      }\n      const failed = res.data.failed;\n      if (failed.length) {\n        for (let i = 0, len = failed.length; i < len; i++) {\n          let failedMsg = failed[i].email + ': ' + failed[i].error_msg;\n          toaster.danger(failedMsg);\n        }\n      }\n    }).catch((error) => {\n      const errorMsg = Utils.getErrorMsg(error);\n      toaster.danger(errorMsg);\n      this.props.toggleDialog();\n    });\n  };\n\n  render() {\n    const { isSubmitting } = this.state;\n    return (\n      <Modal isOpen={true} toggle={this.props.toggleDialog}>\n        <ModalHeader toggle={this.props.toggleDialog}>{gettext('Invite Guest')}</ModalHeader>\n        <ModalBody>\n          <label htmlFor=\"emails\">{gettext('Emails')}</label>\n          <Input\n            type=\"text\"\n            id=\"emails\"\n            placeholder={gettext('Emails, separated by \\',\\'')}\n            value={this.state.emails}\n            onChange={this.handleInputChange}\n            onKeyDown={this.handleKeyDown}\n          />\n          <p className=\"error mt-2\">{this.state.errorMsg}</p>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.props.toggleDialog}>{gettext('Cancel')}</Button>\n          <Button className=\"submit-btn\" color=\"primary\" onClick={this.handleSubmitInvite} disabled={isSubmitting}>{isSubmitting ? <Loading /> : gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nInvitePeopleDialog.propTypes = InvitePeopleDialogPropTypes;\n\nexport default InvitePeopleDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../../utils/constants';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter } from 'reactstrap';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport Loading from '../loading';\nimport toaster from '../toast';\n\nconst propTypes = {\n  accepter: PropTypes.string.isRequired,\n  token: PropTypes.string.isRequired,\n  revokeInvitation: PropTypes.func.isRequired,\n  toggleDialog: PropTypes.func.isRequired\n};\n\nclass InvitationRevokeDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isSubmitting: false\n    };\n  }\n\n  onRevokeInvitation = () => {\n    this.setState({\n      isSubmitting: true,\n    });\n\n    seafileAPI.revokeInvitation(this.props.token).then((res) => {\n      this.props.revokeInvitation();\n      this.props.toggleDialog();\n      const msg = gettext('Successfully revoked access of user {placeholder}.').replace('{placeholder}', this.props.accepter);\n      toaster.success(msg);\n    }).catch((error) => {\n      const errorMsg = Utils.getErrorMsg(error);\n      toaster.danger(errorMsg);\n      this.props.toggleDialog();\n    });\n  };\n\n  render() {\n    const { toggleDialog } = this.props;\n    const { isSubmitting } = this.state;\n    const email = '<span class=\"op-target\">' + Utils.HTMLescape(this.props.accepter) + '</span>';\n    const content = gettext('Are you sure to revoke access of user {placeholder} ?').replace('{placeholder}', email);\n\n    return (\n      <Modal isOpen={true} toggle={toggleDialog}>\n        <ModalHeader toggle={toggleDialog}>{gettext('Revoke Access')}</ModalHeader>\n        <ModalBody>\n          <p dangerouslySetInnerHTML={{__html: content}}></p>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={toggleDialog}>{gettext('Cancel')}</Button>\n          <Button className=\"submit-btn\" color=\"primary\" onClick={this.onRevokeInvitation} disabled={isSubmitting}>{isSubmitting ? <Loading /> : gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nInvitationRevokeDialog.propTypes = propTypes;\n\nexport default InvitationRevokeDialog;\n","import React, { Component, Fragment } from 'react';\nimport { Dropdown, DropdownToggle, DropdownItem } from 'reactstrap';\nimport PropTypes from 'prop-types';\nimport moment from 'moment';\nimport { gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport InvitationsToolbar from '../../components/toolbar/invitations-toolbar';\nimport InvitePeopleDialog from '../../components/dialog/invite-people-dialog';\nimport InvitationRevokeDialog from '../../components/dialog/invitation-revoke-dialog';\nimport Loading from '../../components/loading';\nimport toaster from '../../components/toast';\nimport EmptyTip from '../../components/empty-tip';\n\nimport '../../css/invitations.css';\n\nclass Item extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOpIconShown: false,\n      isOpMenuOpen: false, // for mobile\n      isRevokeDialogOpen: false\n    };\n  }\n\n  toggleOpMenu = () => {\n    this.setState({\n      isOpMenuOpen: !this.state.isOpMenuOpen\n    });\n  };\n\n  onMouseEnter = () => {\n    this.setState({\n      isOpIconShown: true\n    });\n  };\n\n  onMouseLeave = () => {\n    this.setState({\n      isOpIconShown: false\n    });\n  };\n\n  deleteItem = (e) => {\n    e.preventDefault();\n    // make the icon avoid being clicked repeatedly\n    this.setState({\n      isOpIconShown: false\n    });\n    const token = this.props.invitation.token;\n    seafileAPI.deleteInvitation(token).then((res) => {\n      this.setState({deleted: true});\n      toaster.success(gettext('Successfully deleted 1 item.'));\n    }).catch((error) => {\n      const errorMsg = Utils.getErrorMsg(error);\n      toaster.danger(errorMsg);\n      this.setState({\n        isOpIconShown: true\n      });\n    });\n  };\n\n  revokeItem = () => {\n    this.setState({deleted: true});\n  };\n\n  toggleRevokeDialog = (e) => {\n    e.preventDefault();\n    this.setState({\n      isRevokeDialogOpen: !this.state.isRevokeDialogOpen\n    });\n  };\n\n  render() {\n    const { isOpIconShown, deleted, isRevokeDialogOpen } = this.state;\n\n    if (deleted) {\n      return null;\n    }\n\n    const item = this.props.invitation;\n\n    const desktopItem = (\n      <tr onMouseEnter={this.onMouseEnter} onMouseLeave={this.onMouseLeave} onFocus={this.onMouseEnter} tabIndex=\"0\">\n        <td>{item.accepter}</td>\n        <td>{moment(item.invite_time).format('YYYY-MM-DD')}</td>\n        <td>{moment(item.expire_time).format('YYYY-MM-DD')}</td>\n        <td>{item.accept_time && <i className=\"sf2-icon-tick invite-accept-icon\"></i>}</td>\n        <td>\n          {isOpIconShown && (\n            item.accept_time ?\n              <a href=\"#\"\n                role=\"button\"\n                className=\"action-icon sf3-font sf3-font-cancel-invitation\"\n                title={gettext('Revoke Access')}\n                aria-label={gettext('Revoke Access')}\n                onClick={this.toggleRevokeDialog}>\n              </a> :\n              <a href=\"#\"\n                role=\"button\"\n                className=\"action-icon sf2-icon-x3\"\n                title={gettext('Delete')}\n                aria-label={gettext('Delete')}\n                onClick={this.deleteItem}>\n              </a>\n          )}\n        </td>\n      </tr>\n    );\n\n    const mobileItem = (\n      <tr>\n        <td>\n          {item.accepter}<br />\n          <span className=\"item-meta-info\">{moment(item.invite_time).format('YYYY-MM-DD')}<span className=\"small\">({gettext('Invite Time')})</span></span>\n          <span className=\"item-meta-info\">{moment(item.expire_time).format('YYYY-MM-DD')}<span className=\"small\">({gettext('Expiration')})</span></span>\n          <span className=\"item-meta-info\">{item.accept_time && gettext('Accepted')}</span>\n        </td>\n        <td>\n          <Dropdown isOpen={this.state.isOpMenuOpen} toggle={this.toggleOpMenu}>\n            <DropdownToggle\n              tag=\"i\"\n              className=\"sf-dropdown-toggle fa fa-ellipsis-v ml-0\"\n              title={gettext('More Operations')}\n              data-toggle=\"dropdown\"\n              aria-expanded={this.state.isOpMenuOpen}\n            />\n            <div className={this.state.isOpMenuOpen ? '' : 'd-none'} onClick={this.toggleOpMenu}>\n              <div className=\"mobile-operation-menu-bg-layer\"></div>\n              <div className=\"mobile-operation-menu\">\n                {item.accept_time ?\n                  <DropdownItem className=\"mobile-menu-item\" onClick={this.toggleRevokeDialog}>{gettext('Revoke Access')}</DropdownItem> :\n                  <DropdownItem className=\"mobile-menu-item\" onClick={this.deleteItem}>{gettext('Delete')}</DropdownItem>\n                }\n              </div>\n            </div>\n          </Dropdown>\n        </td>\n      </tr>\n    );\n\n    return (\n      <Fragment>\n        {this.props.isDesktop ? desktopItem : mobileItem}\n        {isRevokeDialogOpen &&\n        <InvitationRevokeDialog\n          accepter={item.accepter}\n          token={item.token}\n          revokeInvitation={this.revokeItem}\n          toggleDialog={this.toggleRevokeDialog}\n        />\n        }\n      </Fragment>\n    );\n  }\n}\n\nconst ItemPropTypes = {\n  data: PropTypes.object.isRequired,\n  invitation: PropTypes.object.isRequired,\n  isDesktop: PropTypes.bool.isRequired,\n};\n\nItem.propTypes = ItemPropTypes;\n\nclass Content extends Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    const {\n      loading, errorMsg, invitationsList\n    } = this.props.data;\n\n    if (loading) {\n      return <Loading />;\n    }\n\n    if (errorMsg) {\n      return <p className=\"error text-center mt-2\">{errorMsg}</p>;\n    }\n\n    if (!invitationsList.length) {\n      return (\n        <EmptyTip>\n          <h2>{gettext('No guest invitations')}</h2>\n          <p>{gettext('You have not invited any guests yet. A guest can access shared libraries through the web interface allowing more efficient ways to collaborate than through links. You can invite a guest by clicking the \"Invite Guest\" button in the menu bar.')}</p>\n        </EmptyTip>\n      );\n    }\n\n    const isDesktop = Utils.isDesktop();\n    return (\n      <table className={`table-hover${isDesktop ? '': ' table-thead-hidden'}`}>\n        <thead>\n          {isDesktop ?\n            <tr>\n              <th width=\"25%\">{gettext('Email')}</th>\n              <th width=\"20%\">{gettext('Invite Time')}</th>\n              <th width=\"20%\">{gettext('Expiration')}</th>\n              <th width=\"18%\">{gettext('Accepted')}</th>\n              <th width=\"7%\"></th>\n            </tr>\n            :\n            <tr>\n              <th width=\"92%\"></th>\n              <th width=\"8%\"></th>\n            </tr>\n          }\n        </thead>\n        <tbody>\n          {invitationsList.map((invitation, index) => {\n            return (\n              <Item\n                key={index}\n                isDesktop={isDesktop}\n                invitation={invitation}\n              />\n            );\n          })}\n        </tbody>\n      </table>\n    );\n  }\n}\n\nclass InvitationsView extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      invitationsList: [],\n      isInvitePeopleDialogOpen: false\n    };\n  }\n\n  componentDidMount() {\n    seafileAPI.listInvitations().then((res) => {\n      this.setState({\n        invitationsList: res.data,\n        loading: false\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  onInvitePeople = (invitationsArray) => {\n    invitationsArray.push.apply(invitationsArray, this.state.invitationsList);\n    this.setState({\n      invitationsList: invitationsArray,\n    });\n  };\n\n  toggleInvitePeopleDialog = () => {\n    this.setState({\n      isInvitePeopleDialogOpen: !this.state.isInvitePeopleDialogOpen\n    });\n  };\n\n  render() {\n    return (\n      <Fragment>\n        <InvitationsToolbar\n          onShowSidePanel={this.props.onShowSidePanel}\n          onSearchedClick={this.props.onSearchedClick}\n          toggleInvitePeopleDialog={this.toggleInvitePeopleDialog}\n        />\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <div className=\"cur-view-path\">\n              <h3 className=\"sf-heading\">{gettext('Invite Guest')}</h3>\n            </div>\n            <div className=\"cur-view-content\">\n              <Content data={this.state} />\n            </div>\n          </div>\n        </div>\n        {this.state.isInvitePeopleDialogOpen &&\n        <InvitePeopleDialog\n          onInvitePeople={this.onInvitePeople}\n          toggleDialog={this.toggleInvitePeopleDialog}\n        />\n        }\n      </Fragment>\n    );\n  }\n}\n\nContent.propTypes = {\n  data: PropTypes.object.isRequired,\n};\n\nconst InvitationsViewPropTypes = {\n  onShowSidePanel: PropTypes.func.isRequired,\n  onSearchedClick: PropTypes.func.isRequired,\n};\n\nInvitationsView.propTypes = InvitationsViewPropTypes;\n\nexport default InvitationsView;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../../utils/constants';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter, Input } from 'reactstrap';\n\nconst propTypes = {\n  toggleCancel: PropTypes.func.isRequired,\n  addWiki: PropTypes.func.isRequired,\n};\n\nclass NewWikiDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isExist: false,\n      name: '',\n      repoID: '',\n      isSubmitBtnActive: false,\n    };\n  }\n\n  inputNewName = (e) => {\n    if (!event.target.value.trim()) {\n      this.setState({isSubmitBtnActive: false});\n    } else {\n      this.setState({isSubmitBtnActive: true});\n    }\n\n    this.setState({\n      name: e.target.value,\n    });\n  };\n\n  handleKeyDown = (e) => {\n    if (e.key === 'Enter') {\n      this.handleSubmit();\n    }\n  };\n\n  handleSubmit = () => {\n    let { isExist, name, repoID } = this.state;\n    this.props.addWiki(isExist, name, repoID);\n    this.props.toggleCancel();\n  };\n\n  toggle = () => {\n    this.props.toggleCancel();\n  };\n\n  render() {\n    return (\n      <Modal isOpen={true} autoFocus={false}>\n        <ModalHeader toggle={this.toggle}>{gettext('New Wiki')}</ModalHeader>\n        <ModalBody>\n          <label className=\"form-label\">{gettext('Name')}</label>\n          <Input onKeyDown={this.handleKeyDown} autoFocus={true} value={this.state.name} onChange={this.inputNewName}/>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.toggle}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.handleSubmit} disabled={!this.state.isSubmitBtnActive}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nNewWikiDialog.propTypes = propTypes;\n\nexport default NewWikiDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../../utils/constants';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter } from 'reactstrap';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport moment from 'moment';\nimport Repo from '../../models/repo';\nimport { Utils } from '../../utils/utils';\n\nconst propTypes = {\n  toggleCancel: PropTypes.func.isRequired,\n  addWiki: PropTypes.func.isRequired\n};\n\nclass WikiSelectDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      repos: [],\n      repoID: '',\n    };\n  }\n\n  componentDidMount() {\n    seafileAPI.listRepos().then(res => {\n      let repoList = res.data.repos\n        .filter(item => {\n          switch (item.type) {\n            case 'mine': // my libraries\n              return !item.encrypted;\n            case 'shared': // libraries shared with me\n              // 'is_admin': the library is shared with 'admin' permission\n              return !item.encrypted && item.is_admin;\n            case 'group':\n            default:\n              return !item.encrypted && !res.data.repos.some(repo => {\n                // just remove the duplicated libraries\n                return repo.type != item.type && repo.repo_id == item.repo_id;\n              });\n          }\n        })\n        .map(item => {\n          let repo = new Repo(item);\n          return repo;\n        });\n      repoList = Utils.sortRepos(repoList, 'name', 'asc');\n      this.setState({repos: repoList});\n    });\n  }\n\n  onChange = (repo) => {\n    this.setState({\n      repoID: repo.repo_id,\n    });\n  };\n\n  handleSubmit = () => {\n    let { repoID } = this.state;\n    this.props.addWiki(repoID);\n    this.props.toggleCancel();\n  };\n\n  toggle = () => {\n    this.props.toggleCancel();\n  };\n\n  render() {\n    return (\n      <Modal isOpen={true}>\n        <ModalHeader toggle={this.toggle}>{gettext('Publish a Library')}</ModalHeader>\n        <ModalBody className=\"dialog-list-container\">\n          <table>\n            <thead>\n              <tr>\n                <th width='6%'>{/* select */}</th>\n                <th width='9%'>{/* icon */}</th>\n                <th width='55%'>{gettext('Name')}</th>\n                <th width='30%'>{gettext('Last Update')}</th>\n              </tr>\n            </thead>\n            <tbody>\n              {this.state.repos.map((repo, index) => {\n                return (\n                  <tr key={index}>\n                    <td className=\"text-center\"><input type=\"radio\" className=\"vam\" name=\"repo\" value={repo.repo_id} onChange={this.onChange.bind(this, repo)} /></td>\n                    <td className=\"text-center\"><img src={Utils.getLibIconUrl(repo, false)} width=\"24\" title={Utils.getLibIconTitle(repo)} alt={Utils.getLibIconTitle(repo)} /></td>\n                    <td>{repo.repo_name}</td>\n                    <td>{moment(repo.last_modified).fromNow()}</td>\n                  </tr>\n                );\n              })}\n            </tbody>\n          </table>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.toggle}>{gettext('Cancel')}</Button>\n          {this.state.repoID ?\n            <Button color=\"primary\" onClick={this.handleSubmit}>{gettext('Submit')}</Button>:\n            <Button color=\"primary\" disabled>{gettext('Submit')}</Button>\n          }\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nWikiSelectDialog.propTypes = propTypes;\n\nexport default WikiSelectDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../../utils/constants';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter } from 'reactstrap';\n\nconst propTypes = {\n  toggleCancel: PropTypes.func.isRequired,\n  handleSubmit: PropTypes.func.isRequired,\n};\n\nclass WikiDeleteDialog extends React.Component {\n\n  toggle = () => {\n    this.props.toggleCancel();\n  };\n\n  render() {\n    return (\n      <Modal isOpen={true} toggle={this.toggle}>\n        <ModalHeader toggle={this.toggle}>{gettext('Unpublish Library')}</ModalHeader>\n        <ModalBody>\n          <p>{gettext('Are you sure you want to unpublish this library?')}</p>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.toggle}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.props.handleSubmit}>{gettext('Unpublish')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nWikiDeleteDialog.propTypes = propTypes;\n\nexport default WikiDeleteDialog;\n","import React, { Component, Fragment } from 'react';\nimport { Dropdown, DropdownToggle, DropdownItem } from 'reactstrap';\nimport PropTypes from 'prop-types';\nimport moment from 'moment';\nimport { siteRoot, gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\n// import { seafileAPI } from '../../utils/seafile-api';\n// import Toast from '../toast';\nimport ModalPortal from '../modal-portal';\nimport WikiDeleteDialog from '../dialog/wiki-delete-dialog';\n// import Rename from '../rename';\n\nconst propTypes = {\n  wiki: PropTypes.object.isRequired,\n  // renameWiki: PropTypes.func.isRequired,\n  deleteWiki: PropTypes.func.isRequired,\n  isItemFreezed: PropTypes.bool.isRequired,\n  onFreezedItem: PropTypes.func.isRequired,\n  onUnfreezedItem: PropTypes.func.isRequired,\n};\n\nclass WikiListItem extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOpMenuOpen: false, // for mobile\n      isShowDeleteDialog: false,\n      // isRenameing: false,\n      highlight: false,\n      // permission: this.props.wiki.permission,\n    };\n  }\n\n  toggleOpMenu = () => {\n    this.setState({\n      isOpMenuOpen: !this.state.isOpMenuOpen\n    });\n  };\n\n  // clickMenuToggle = (e) => {\n  //   e.preventDefault();\n  //   this.onMenuToggle(e);\n  // }\n\n  // onMenuToggle = (e) => {\n  //   let targetType = e.target.dataset.toggle;\n  //   if (targetType !== 'item') {\n  //     if (this.props.isItemFreezed) {\n  //       this.setState({\n  //         highlight: false,\n  //         isShowMenuControl: false,\n  //         isShowWikiMenu: !this.state.isShowWikiMenu\n  //       });\n  //       this.props.onUnfreezedItem();\n  //     } else {\n  //       this.setState({\n  //         isShowWikiMenu: !this.state.isShowWikiMenu\n  //       });\n  //       this.props.onFreezedItem();\n  //     }\n  //   }\n  // }\n\n  onMouseEnter = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({ highlight: true });\n    }\n  };\n\n  onMouseLeave = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({ highlight: false });\n    }\n  };\n\n  // changePerm = (permission) => {\n  //   let wiki = this.props.wiki;\n  //   seafileAPI.updateWikiPermission(wiki.slug, permission).then(() => {\n  //     this.setState({permission: permission});\n  //   }).catch((error) => {\n  //     if(error.response) {\n  //       let errorMsg = error.response.data.error_msg;\n  //       Toast.danger(errorMsg);\n  //     }\n  //   });\n  // }\n\n  // onRenameToggle = (e) => {\n  //   this.props.onFreezedItem();\n  //   this.setState({\n  //     isShowWikiMenu: false,\n  //     isShowMenuControl: false,\n  //     isRenameing: true,\n  //   });\n  // }\n\n  // onRenameConfirm = (newName) => {\n  //   this.renameWiki(newName);\n  //   this.onRenameCancel();\n  // }\n\n  // onRenameCancel = () => {\n  //   this.props.onUnfreezedItem();\n  //   this.setState({isRenameing: false});\n  // }\n\n  onDeleteToggle = (e) => {\n    e.preventDefault();\n    this.props.onUnfreezedItem();\n    this.setState({\n      isShowDeleteDialog: !this.state.isShowDeleteDialog,\n    });\n  };\n\n  onDeleteCancel = () => {\n    this.props.onUnfreezedItem();\n    this.setState({\n      isShowDeleteDialog: !this.state.isShowDeleteDialog,\n    });\n  };\n\n  // renameWiki = (newName) => {\n  //   let wiki = this.props.wiki;\n  //   this.props.renameWiki(wiki, newName);\n  // }\n\n  deleteWiki = () => {\n    let wiki = this.props.wiki;\n    this.props.deleteWiki(wiki);\n    this.setState({\n      isShowDeleteDialog: !this.state.isShowDeleteDialog,\n    });\n  };\n\n  render() {\n    let wiki = this.props.wiki;\n    let userProfileURL = `${siteRoot}profile/${encodeURIComponent(wiki.owner)}/`;\n    let fileIconUrl = Utils.getDefaultLibIconUrl(false);\n    let deleteIcon = `action-icon sf2-icon-x3 ${this.state.highlight ? '' : 'invisible'}`;\n\n    const desktopItem = (\n      <tr className={this.state.highlight ? 'tr-highlight' : ''} onMouseEnter={this.onMouseEnter} onMouseLeave={this.onMouseLeave} onFocus={this.onMouseEnter}>\n        <td><img src={fileIconUrl} width=\"24\" alt=\"\" /></td>\n        <td className=\"name\">\n          <a href={wiki.link}>{wiki.name}</a>\n          {/*this.state.isRenameing ?\n              <Rename wiki={wiki} name={wiki.name} onRenameConfirm={this.onRenameConfirm} onRenameCancel={this.onRenameCancel}/> :\n              <a href={wiki.link}>{wiki.name}</a>\n            */}\n        </td>\n        <td><a href={userProfileURL} target='_blank' rel=\"noreferrer\">{wiki.owner_nickname}</a></td>\n        <td>{moment(wiki.updated_at).fromNow()}</td>\n        <td className=\"text-center cursor-pointer\">\n          <a href=\"#\" role=\"button\" aria-label={gettext('Unpublish')} title={gettext('Unpublish')} className={deleteIcon} onClick={this.onDeleteToggle}></a>\n        </td>\n      </tr>\n    );\n\n    const mobileItem = (\n      <tr className={this.state.highlight ? 'tr-highlight' : ''} onMouseEnter={this.onMouseEnter} onMouseLeave={this.onMouseLeave}>\n        <td><img src={fileIconUrl} width=\"24\" alt=\"\" /></td>\n        <td>\n          <a href={wiki.link}>{wiki.name}</a><br />\n          <a href={userProfileURL} target='_blank' className=\"item-meta-info\" rel=\"noreferrer\">{wiki.owner_nickname}</a>\n          <span className=\"item-meta-info\">{moment(wiki.updated_at).fromNow()}</span>\n        </td>\n        <td>\n          <Dropdown isOpen={this.state.isOpMenuOpen} toggle={this.toggleOpMenu}>\n            <DropdownToggle\n              tag=\"i\"\n              className=\"sf-dropdown-toggle fa fa-ellipsis-v ml-0\"\n              title={gettext('More Operations')}\n              data-toggle=\"dropdown\"\n              aria-expanded={this.state.isOpMenuOpen}\n            />\n            <div className={this.state.isOpMenuOpen ? '' : 'd-none'} onClick={this.toggleOpMenu}>\n              <div className=\"mobile-operation-menu-bg-layer\"></div>\n              <div className=\"mobile-operation-menu\">\n                <DropdownItem className=\"mobile-menu-item\" onClick={this.onDeleteToggle}>{gettext('Unpublish')}</DropdownItem>\n              </div>\n            </div>\n          </Dropdown>\n        </td>\n      </tr>\n    );\n\n    return (\n      <Fragment>\n        {Utils.isDesktop() ? desktopItem : mobileItem}\n        {this.state.isShowDeleteDialog &&\n          <ModalPortal>\n            <WikiDeleteDialog\n              toggleCancel={this.onDeleteCancel}\n              handleSubmit={this.deleteWiki}\n            />\n          </ModalPortal>\n        }\n      </Fragment>\n    );\n  }\n}\n\nWikiListItem.propTypes = propTypes;\n\nexport default WikiListItem;\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport WikiListItem from './wiki-list-item';\nimport LibsMobileThead from '../libs-mobile-thead';\n\nconst propTypes = {\n  data: PropTypes.object.isRequired,\n  renameWiki: PropTypes.func.isRequired,\n  deleteWiki: PropTypes.func.isRequired,\n};\n\nclass WikiListView extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isItemFreezed: false,\n    };\n  }\n\n  onFreezedItem = () => {\n    this.setState({isItemFreezed: true});\n  };\n\n  onUnfreezedItem = () => {\n    this.setState({isItemFreezed: false});\n  };\n\n  render() {\n    let { loading, errorMsg, wikis } = this.props.data;\n\n    if (loading) {\n      return <span className=\"loading-icon loading-tip\"></span>;\n    } else if (errorMsg) {\n      return <p className=\"error text-center\">{errorMsg}</p>;\n    } else {\n      const isDesktop = Utils.isDesktop();\n      const desktopThead = (\n        <thead>\n          <tr>\n            <th width=\"4%\"></th>\n            <th width=\"36%\">{gettext('Name')}</th>\n            <th width=\"25%\">{gettext('Owner')}</th>\n            <th width=\"25%\">{gettext('Last Update')}</th>\n            <th width=\"10%\">{/* operation */}</th>\n          </tr>\n        </thead>\n      );\n      return (\n        <table className={isDesktop ? '' : 'table-thead-hidden'}>\n          {isDesktop ? desktopThead : <LibsMobileThead />}\n          <tbody>\n            {wikis.map((wiki, index) => {\n              return (\n                <WikiListItem\n                  key={index}\n                  wiki={wiki}\n                  renameWiki={this.props.renameWiki}\n                  deleteWiki={this.props.deleteWiki}\n                  isItemFreezed={this.state.isItemFreezed}\n                  onFreezedItem={this.onFreezedItem}\n                  onUnfreezedItem={this.onUnfreezedItem}\n                />\n              );\n            })}\n          </tbody>\n        </table>\n      );\n    }\n  }\n}\n\nWikiListView.propTypes = propTypes;\n\nexport default WikiListView;\n","import React, { Component, Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Button } from 'reactstrap';\nimport MediaQuery from 'react-responsive';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { gettext, canPublishRepo } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../../components/toast';\nimport ModalPortal from '../../components/modal-portal';\nimport EmptyTip from '../../components/empty-tip';\nimport CommonToolbar from '../../components/toolbar/common-toolbar';\nimport NewWikiDialog from '../../components/dialog/new-wiki-dialog';\nimport WikiSelectDialog from '../../components/dialog/wiki-select-dialog';\nimport WikiListView from '../../components/wiki-list-view/wiki-list-view';\n\nconst propTypes = {\n  onShowSidePanel: PropTypes.func.isRequired,\n  onSearchedClick: PropTypes.func.isRequired,\n};\n\nclass Wikis extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      wikis: [],\n      isShowAddWikiMenu: false,\n      isShowSelectDialog: false,\n      isShowCreateDialog: false,\n    };\n  }\n\n  componentDidMount() {\n    this.getWikis();\n  }\n\n  getWikis = () => {\n    seafileAPI.listWikis().then(res => {\n      this.setState({\n        loading: false,\n        wikis: res.data.data\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  };\n\n  clickMenuToggle = (e) => {\n    e.preventDefault();\n    this.onMenuToggle();\n  };\n\n  onMenuToggle = () => {\n    this.setState({isShowAddWikiMenu: !this.state.isShowAddWikiMenu});\n  };\n\n  onSelectToggle = () => {\n    this.setState({isShowSelectDialog: !this.state.isShowSelectDialog});\n  };\n\n  onCreateToggle = () => {\n    this.setState({isShowCreateDialog: !this.state.isShowCreateDialog});\n  };\n\n  addWiki = (repoID) => {\n    seafileAPI.addWiki(repoID).then((res) => {\n      this.state.wikis.push(res.data);\n      this.setState({wikis: this.state.wikis});\n    }).catch((error) => {\n      if(error.response) {\n        let errorMsg = error.response.data.error_msg;\n        toaster.danger(errorMsg);\n      }\n    });\n  };\n\n  renameWiki = (wiki, newName) => {\n    seafileAPI.renameWiki(wiki.slug, newName).then((res) => {\n      let wikis = this.state.wikis.map((item) => {\n        if (item.name === wiki.name) {\n          item = res.data;\n        }\n        return item;\n      });\n      this.setState({wikis: wikis});\n    }).catch((error) => {\n      if(error.response) {\n        let errorMsg = error.response.data.error_msg;\n        toaster.danger(errorMsg);\n      }\n    });\n  };\n\n  deleteWiki = (wiki) => {\n    seafileAPI.deleteWiki(wiki.slug).then(() => {\n      let wikis = this.state.wikis.filter(item => {\n        return item.name !== wiki.name;\n      });\n      this.setState({wikis: wikis});\n    }).catch((error) => {\n      if(error.response) {\n        let errorMsg = error.response.data.error_msg;\n        toaster.danger(errorMsg);\n      }\n    });\n  };\n\n  render() {\n    return (\n      <Fragment>\n        <div className=\"main-panel-north border-left-show\">\n          <div className=\"cur-view-toolbar\">\n            <span className=\"sf2-icon-menu side-nav-toggle hidden-md-up d-md-none\" title=\"Side Nav Menu\" onClick={this.props.onShowSidePanel}></span>\n            {canPublishRepo &&\n            <div className=\"operation\">\n              <Fragment>\n                <MediaQuery query=\"(min-width: 768px)\">\n                  <Button className=\"btn btn-secondary operation-item\" onClick={this.onSelectToggle}>{gettext('Publish a Library')}</Button>\n                </MediaQuery>\n                <MediaQuery query=\"(max-width: 767.8px)\">\n                  <span className=\"sf2-icon-plus mobile-toolbar-icon\" title={gettext('Publish a Library')} onClick={this.onSelectToggle}></span>\n                </MediaQuery>\n              </Fragment>\n            </div>\n            }\n          </div>\n          <CommonToolbar onSearchedClick={this.props.onSearchedClick} />\n        </div>\n        <div className=\"main-panel-center\">\n          <div className=\"cur-view-container\" id=\"wikis\">\n            <div className=\"cur-view-path\">\n              <div className=\"path-container\">\n                <h3 className=\"sf-heading m-0\">{gettext('Published Libraries')}</h3>\n              </div>\n            </div>\n            <div className=\"cur-view-content\">\n              {(this.state.loading || this.state.wikis.length !== 0) &&\n                <WikiListView\n                  data={this.state}\n                  renameWiki={this.renameWiki}\n                  deleteWiki={this.deleteWiki}\n                />\n              }\n              {(!this.state.loading && this.state.wikis.length === 0) &&\n                <EmptyTip>\n                  <h2>{gettext('No published libraries')}</h2>\n                  <p>{gettext('You have not published any libraries yet. A published library can be accessed by anyone, not only users, via its URL. You can publish a library by clicking the \"Publish a Library\" button in the menu bar.')}</p>\n                </EmptyTip>\n              }\n            </div>\n          </div>\n        </div>\n        {this.state.isShowCreateDialog && (\n          <ModalPortal>\n            <NewWikiDialog\n              toggleCancel={this.onCreateToggle}\n              addWiki={this.addWiki}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isShowSelectDialog && (\n          <ModalPortal>\n            <WikiSelectDialog\n              toggleCancel={this.onSelectToggle}\n              addWiki={this.addWiki}\n            />\n          </ModalPortal>\n        )}\n      </Fragment>\n    );\n  }\n}\n\nWikis.propTypes = propTypes;\n\nexport default Wikis;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport CommonToolbar from './common-toolbar';\n\nconst propTypes = {\n  searchPlaceholder: PropTypes.string,\n  onShowSidePanel: PropTypes.func.isRequired,\n  onSearchedClick: PropTypes.func.isRequired,\n};\n\nclass GeneralToolbar extends React.Component {\n\n  render() {\n    // todo get repoID?\n    let { onShowSidePanel, onSearchedClick } = this.props;\n    return (\n      <div className=\"main-panel-north\">\n        <div className=\"cur-view-toolbar\">\n          <span\n            className=\"sf2-icon-menu side-nav-toggle hidden-md-up d-md-none\"\n            title=\"Side Nav Menu\"\n            onClick={onShowSidePanel}>\n          </span>\n        </div>\n        <CommonToolbar\n          searchPlaceholder={this.props.searchPlaceholder}\n          onSearchedClick={onSearchedClick}\n        />\n      </div>\n    );\n  }\n}\n\nGeneralToolbar.propTypes = propTypes;\n\nexport default GeneralToolbar;\n","import React, { Fragment } from 'react';\nimport GeneralToolBar from './toolbar/general-toolbar';\n\nconst MainContentWrapper = (WrapperedComponent) => {\n  return class Wrapper extends React.Component {\n\n    constructor(props) {\n      super(props);\n    }\n\n    render() {\n      return (\n        <Fragment>\n          <GeneralToolBar {...this.props} />\n          <WrapperedComponent {...this.props} />\n        </Fragment>\n      );\n    }\n  };\n};\n\nexport default MainContentWrapper;\n","import React, { Component } from 'react';\nimport ReactDom from 'react-dom';\nimport { Router, navigate } from '@gatsbyjs/reach-router';\nimport MediaQuery from 'react-responsive';\nimport { Modal } from 'reactstrap';\nimport { siteRoot, canAddRepo, isDocs } from './utils/constants';\nimport { Utils } from './utils/utils';\nimport SystemNotification from './components/system-notification';\nimport SidePanel from './components/side-panel';\nimport MainPanel from './components/main-panel';\nimport DraftsView from './pages/drafts/drafts-view';\nimport DraftContent from './pages/drafts/draft-content';\nimport FilesActivities from './pages/dashboard/files-activities';\nimport MyFileActivities from './pages/dashboard/my-file-activities';\nimport Starred from './pages/starred/starred';\nimport LinkedDevices from './pages/linked-devices/linked-devices';\nimport editUtilities from './utils/editor-utilities';\nimport ShareAdminLibraries from './pages/share-admin/libraries';\nimport ShareAdminFolders from './pages/share-admin/folders';\nimport ShareAdminShareLinks from './pages/share-admin/share-links';\nimport ShareAdminUploadLinks from './pages/share-admin/upload-links';\nimport SharedLibraries from './pages/shared-libs/shared-libs';\nimport ShareWithOCM from './pages/share-with-ocm/shared-with-ocm';\nimport OCMViaWebdav from './pages/ocm-via-webdav/ocm-via-webdav';\nimport OCMRepoDir from './pages/share-with-ocm/remote-dir-view';\nimport MyLibraries from './pages/my-libs/my-libs';\nimport MyLibDeleted from './pages/my-libs/my-libs-deleted';\nimport PublicSharedView from './pages/shared-with-all/public-shared-view';\nimport LibContentView from './pages/lib-content-view/lib-content-view';\nimport Group from './pages/groups/group-view';\nimport Groups from './pages/groups/groups-view';\nimport InvitationsView from './pages/invitations/invitations-view';\nimport Wikis from './pages/wikis/wikis';\nimport MainContentWrapper from './components/main-content-wrapper';\n\nimport './css/layout.css';\nimport './css/toolbar.css';\nimport './css/search.css';\n\nconst FilesActivitiesWrapper = MainContentWrapper(FilesActivities);\nconst MyFileActivitiesWrapper = MainContentWrapper(MyFileActivities);\nconst DraftsViewWrapper = MainContentWrapper(DraftsView);\nconst StarredWrapper = MainContentWrapper(Starred);\nconst LinkedDevicesWrapper = MainContentWrapper(LinkedDevices);\nconst SharedLibrariesWrapper = MainContentWrapper(SharedLibraries);\nconst SharedWithOCMWrapper = MainContentWrapper(ShareWithOCM);\nconst OCMViaWebdavWrapper = MainContentWrapper(OCMViaWebdav);\nconst ShareAdminLibrariesWrapper = MainContentWrapper(ShareAdminLibraries);\nconst ShareAdminFoldersWrapper = MainContentWrapper(ShareAdminFolders);\n\nclass App extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOpen: false,\n      isSidePanelClosed: false,\n      draftCounts: 0,\n      draftList:[],\n      isLoadingDraft: true,\n      currentTab: '/',\n      pathPrefix: [],\n    };\n    this.dirViewPanels = ['my-libs', 'shared-libs', 'org']; // and group\n    window.onpopstate = this.onpopstate;\n  }\n\n  onpopstate = (event) => {\n    if (event.state && event.state.currentTab && event.state.pathPrefix) {\n      let { currentTab, pathPrefix } = event.state;\n      this.setState({currentTab, pathPrefix});\n    }\n  };\n\n  componentWillMount() {\n    if (!Utils.isDesktop()) {\n      this.setState({\n        isSidePanelClosed: true\n      });\n    }\n  }\n\n  navigateClientUrlToLib = () =>{\n    if(window.location.hash && window.location.hash.indexOf('common/lib') != -1){\n      let splitUrlArray = window.location.hash.split('/');\n      let repoID = splitUrlArray[splitUrlArray.length - 2];\n      let url = siteRoot + 'library/' + repoID + '/';\n      navigate(url, {repalce: true});\n    }\n  };\n\n  componentDidMount() {\n    // url from client  e.g. http://127.0.0.1:8000/#common/lib/34e7fb92-e91d-499d-bcde-c30ea8af9828/\n    // navigate to library page http://127.0.0.1:8000/library/34e7fb92-e91d-499d-bcde-c30ea8af9828/\n    this.navigateClientUrlToLib();\n\n    // e.g.  from http://127.0.0.1:8000/drafts/reviews/\n    // get reviews\n    // TODO: need refactor later\n    let href = window.location.href.split('/');\n    if (isDocs) {\n      this.getDrafts();\n    }\n    this.setState({currentTab: href[href.length - 2]});\n  }\n\n  getDrafts = () => {\n    editUtilities.listDrafts().then(res => {\n      this.setState({\n        draftCounts: res.data.draft_counts,\n        draftList: res.data.data,\n        isLoadingDraft: false,\n      });\n    });\n  };\n\n  updateDraftsList = (draft_id) => {\n    this.setState({\n      draftCounts: this.state.draftCounts - 1,\n      draftList: this.state.draftList.filter(draft => draft.id != draft_id),\n    });\n  };\n\n  onCloseSidePanel = () => {\n    this.setState({\n      isSidePanelClosed: !this.state.isSidePanelClosed\n    });\n  };\n\n  onShowSidePanel = () => {\n    this.setState({\n      isSidePanelClosed: !this.state.isSidePanelClosed\n    });\n  };\n\n  onSearchedClick = (selectedItem) => {\n    if (selectedItem.is_dir === true) {\n      this.setState({currentTab: '', pathPrefix: []});\n      let url = siteRoot + 'library/' + selectedItem.repo_id + '/' + selectedItem.repo_name + selectedItem.path;\n      navigate(url, {repalce: true});\n    } else {\n      let url = siteRoot + 'lib/' + selectedItem.repo_id + '/file' + Utils.encodePath(selectedItem.path);\n      let isWeChat = Utils.isWeChat();\n      if (!isWeChat) {\n        let newWindow = window.open('about:blank');\n        newWindow.location.href = url;\n      } else {\n        location.href = url;\n      }\n    }\n  };\n\n  onGroupChanged = (groupID) => {\n    setTimeout(function(){\n      let url;\n      if (groupID) {\n        url = siteRoot + 'group/' + groupID + '/';\n      }\n      else {\n        url = siteRoot + 'groups/';\n      }\n      window.location = url.toString();\n    }, 1);\n  };\n\n  tabItemClick = (tabName, groupID) => {\n    let pathPrefix = [];\n    if (groupID || this.dirViewPanels.indexOf(tabName) > -1) {\n      pathPrefix = this.generatorPrefix(tabName, groupID);\n    }\n    this.setState({\n      currentTab: tabName,\n      pathPrefix: pathPrefix\n    }, () => {\n      let { currentTab, pathPrefix } = this.state;\n      window.history.replaceState({currentTab: currentTab, pathPrefix: pathPrefix}, null);\n    });\n    if (!Utils.isDesktop() && !this.state.isSidePanelClosed) {\n      this.setState({ isSidePanelClosed: true });\n    }\n  };\n\n  generatorPrefix = (tabName, groupID) => {\n    let pathPrefix = [];\n    if (groupID) {\n      let navTab1 = {\n        url: siteRoot + 'groups/',\n        showName: 'Groups',\n        name: 'groups',\n        id: null,\n      };\n      let navTab2 = {\n        url: siteRoot + 'group/' + groupID + '/',\n        showName: tabName,\n        name: tabName,\n        id: groupID,\n      };\n      pathPrefix.push(navTab1);\n      pathPrefix.push(navTab2);\n    } else {\n      let navTab = {\n        url: siteRoot + tabName + '/',\n        showName: this.getTabShowName(tabName),\n        name: tabName,\n        id: null,\n      };\n      pathPrefix.push(navTab);\n    }\n    return pathPrefix;\n  };\n\n  getTabShowName = (tabName) => {\n    if (tabName === 'my-libs') {\n      return 'Libraries';\n    }\n    if (tabName === 'shared-libs') {\n      return 'Shared with me';\n    }\n    if (tabName === 'org') {\n      return 'Shared with all';\n    }\n  };\n\n  toggleSidePanel = () => {\n    this.setState({\n      isSidePanelClosed: !this.state.isSidePanelClosed\n    });\n  };\n\n  render() {\n    let { currentTab, isSidePanelClosed } = this.state;\n\n    const home = canAddRepo ?\n      <MyLibraries path={ siteRoot } onShowSidePanel={this.onShowSidePanel} onSearchedClick={this.onSearchedClick} /> :\n      <SharedLibrariesWrapper path={ siteRoot } onShowSidePanel={this.onShowSidePanel} onSearchedClick={this.onSearchedClick} />;\n\n    return (\n      <React.Fragment>\n        <SystemNotification />\n        <div id=\"main\">\n          <SidePanel isSidePanelClosed={this.state.isSidePanelClosed} onCloseSidePanel={this.onCloseSidePanel} currentTab={currentTab} tabItemClick={this.tabItemClick} draftCounts={this.state.draftCounts} />\n          <MainPanel>\n            <Router className=\"reach-router\">\n              {home}\n              <FilesActivitiesWrapper path={siteRoot + 'dashboard'} onShowSidePanel={this.onShowSidePanel} onSearchedClick={this.onSearchedClick} />\n              <MyFileActivitiesWrapper path={siteRoot + 'my-activities'} onShowSidePanel={this.onShowSidePanel} onSearchedClick={this.onSearchedClick} />\n              <DraftsViewWrapper path={siteRoot + 'drafts'}\n                onShowSidePanel={this.onShowSidePanel}\n                onSearchedClick={this.onSearchedClick}\n              >\n                <DraftContent\n                  path='/'\n                  getDrafts={this.getDrafts}\n                  isLoadingDraft={this.state.isLoadingDraft}\n                  draftList={this.state.draftList}\n                  updateDraftsList={this.updateDraftsList}\n                />\n              </DraftsViewWrapper>\n              <StarredWrapper path={siteRoot + 'starred'} onShowSidePanel={this.onShowSidePanel} onSearchedClick={this.onSearchedClick} />\n              <LinkedDevicesWrapper path={siteRoot + 'linked-devices'} onShowSidePanel={this.onShowSidePanel} onSearchedClick={this.onSearchedClick} />\n              <ShareAdminLibrariesWrapper path={siteRoot + 'share-admin-libs'} onShowSidePanel={this.onShowSidePanel} onSearchedClick={this.onSearchedClick} />\n              <ShareAdminFoldersWrapper path={siteRoot + 'share-admin-folders'} onShowSidePanel={this.onShowSidePanel} onSearchedClick={this.onSearchedClick} />\n              <ShareAdminShareLinks path={siteRoot + 'share-admin-share-links'} onShowSidePanel={this.onShowSidePanel} onSearchedClick={this.onSearchedClick} />\n              <ShareAdminUploadLinks path={siteRoot + 'share-admin-upload-links'} onShowSidePanel={this.onShowSidePanel} onSearchedClick={this.onSearchedClick} />\n              <SharedLibrariesWrapper path={siteRoot + 'shared-libs'} onShowSidePanel={this.onShowSidePanel} onSearchedClick={this.onSearchedClick} />\n              <SharedWithOCMWrapper path={siteRoot + 'shared-with-ocm'} onShowSidePanel={this.onShowSidePanel} onSearchedClick={this.onSearchedClick} />\n              <OCMViaWebdavWrapper path={siteRoot + 'ocm-via-webdav'} onShowSidePanel={this.onShowSidePanel} onSearchedClick={this.onSearchedClick} />\n              <MyLibraries path={siteRoot + 'my-libs'} onShowSidePanel={this.onShowSidePanel} onSearchedClick={this.onSearchedClick} />\n              <MyLibDeleted path={siteRoot + 'my-libs/deleted/'} onSearchedClick={this.onSearchedClick} />\n              <LibContentView path={siteRoot + 'library/:repoID/*'} pathPrefix={this.state.pathPrefix} onMenuClick={this.onShowSidePanel} onTabNavClick={this.tabItemClick}/>\n              <OCMRepoDir path={siteRoot + 'remote-library/:providerID/:repoID/*'} pathPrefix={this.state.pathPrefix} onMenuClick={this.onShowSidePanel} onTabNavClick={this.tabItemClick}/>\n              <Groups path={siteRoot + 'groups'} onShowSidePanel={this.onShowSidePanel} onSearchedClick={this.onSearchedClick}/>\n              <Group\n                path={siteRoot + 'group/:groupID'}\n                onShowSidePanel={this.onShowSidePanel}\n                onSearchedClick={this.onSearchedClick}\n                onTabNavClick={this.tabItemClick}\n                onGroupChanged={this.onGroupChanged}\n              />\n              <Wikis path={siteRoot + 'published'} onShowSidePanel={this.onShowSidePanel} onSearchedClick={this.onSearchedClick}/>\n              <PublicSharedView path={siteRoot + 'org/'} onShowSidePanel={this.onShowSidePanel} onSearchedClick={this.onSearchedClick} onTabNavClick={this.tabItemClick}/>\n              <InvitationsView path={siteRoot + 'invitations/'} onShowSidePanel={this.onShowSidePanel} onSearchedClick={this.onSearchedClick} />\n            </Router>\n          </MainPanel>\n          <MediaQuery query=\"(max-width: 767.8px)\">\n            <Modal zIndex=\"1030\" isOpen={!isSidePanelClosed} toggle={this.toggleSidePanel} contentClassName=\"d-none\"></Modal>\n          </MediaQuery>\n        </div>\n      </React.Fragment>\n    );\n  }\n}\n\nReactDom.render(<App />, document.getElementById('wrapper'));\n","import React from 'react';\nimport { Popover } from 'reactstrap';\nimport PropTypes from 'prop-types';\nimport { KeyCodes } from '../../constants';\n\nconst propTypes = {\n  target: PropTypes.oneOfType([PropTypes.string, PropTypes.object]).isRequired,\n  boundariesElement: PropTypes.object,\n  innerClassName: PropTypes.string,\n  popoverClassName: PropTypes.string,\n  children: PropTypes.oneOfType([PropTypes.object, PropTypes.array]),\n  hideSeahubPopover: PropTypes.func.isRequired,\n  hideSeahubPopoverWithEsc: PropTypes.func,\n  hideArrow: PropTypes.bool,\n  canHideSeahubPopover: PropTypes.bool,\n  placement: PropTypes.string,\n  modifiers: PropTypes.object\n};\n\nclass SeahubPopover extends React.Component {\n\n  SeahubPopoverRef = null;\n  isSelectOpen = false;\n\n  componentDidMount() {\n    document.addEventListener('mousedown', this.onMouseDown, true);\n    document.addEventListener('keydown', this.onKeyDown);\n  }\n\n  componentWillUnmount() {\n    document.removeEventListener('mousedown', this.onMouseDown, true);\n    document.removeEventListener('keydown', this.onKeyDown);\n  }\n\n  getEventClassName = (e) => {\n    // svg mouseEvent event.target.className is an object\n    if (!e || !e.target) return '';\n    return e.target.getAttribute('class') || '';\n  };\n\n  onKeyDown = (e) => {\n    const { canHideSeahubPopover, hideSeahubPopoverWithEsc } = this.props;\n    if (e.keyCode === KeyCodes.Escape && typeof hideSeahubPopoverWithEsc === 'function' && !this.isSelectOpen) {\n      e.preventDefault();\n      hideSeahubPopoverWithEsc();\n    } else if (e.keyCode === KeyCodes.Enter) {\n      // Resolve the default behavior of the enter key when entering formulas is blocked\n      if (canHideSeahubPopover) return;\n      e.stopImmediatePropagation();\n    }\n  };\n\n  onMouseDown = (e) => {\n    if (!this.props.canHideSeahubPopover) return;\n    if (this.SeahubPopoverRef && e && this.getEventClassName(e).indexOf('popover') === -1 && !this.SeahubPopoverRef.contains(e.target)) {\n      this.props.hideSeahubPopover(e);\n    }\n  };\n\n  onPopoverInsideClick = (e) => {\n    e.stopPropagation();\n  };\n\n  render() {\n    const {\n      target, boundariesElement, innerClassName, popoverClassName, hideArrow, modifiers,\n      placement,\n    } = this.props;\n    let additionalProps = {};\n    if (boundariesElement) {\n      additionalProps.boundariesElement = boundariesElement;\n    }\n    return (\n      <Popover\n        placement={placement}\n        isOpen={true}\n        target={target}\n        fade={false}\n        hideArrow={hideArrow}\n        innerClassName={innerClassName}\n        className={popoverClassName}\n        modifiers={modifiers}\n        {...additionalProps}\n      >\n        <div ref={ref => this.SeahubPopoverRef = ref} onClick={this.onPopoverInsideClick}>\n          {this.props.children}\n        </div>\n      </Popover>\n    );\n  }\n}\n\nSeahubPopover.defaultProps = {\n  placement: 'bottom-start',\n  hideArrow: true,\n  canHideSeahubPopover: true\n};\n\nSeahubPopover.propTypes = propTypes;\n\nexport default SeahubPopover;\n","import assign from 'object-assign';\n\nimport { store } from './helpers';\n\nexport const MENU_SHOW = 'REACT_CONTEXTMENU_SHOW';\nexport const MENU_HIDE = 'REACT_CONTEXTMENU_HIDE';\n\n\nexport function dispatchGlobalEvent(eventName, opts, target = window) {\n  // Compatibale with IE\n  // @see http://stackoverflow.com/questions/26596123/internet-explorer-9-10-11-event-constructor-doesnt-work\n  let event;\n\n  if (typeof window.CustomEvent === 'function') {\n    event = new window.CustomEvent(eventName, { detail: opts });\n  } else {\n    event = document.createEvent('CustomEvent');\n    event.initCustomEvent(eventName, false, true, opts);\n  }\n\n  if (target) {\n    target.dispatchEvent(event);\n    assign(store, opts);\n  }\n}\n\nexport function showMenu(opts = {}, target) {\n  dispatchGlobalEvent(MENU_SHOW, assign({}, opts, { type: MENU_SHOW }), target);\n}\n\nexport function hideMenu(opts = {}, target) {\n  dispatchGlobalEvent(MENU_HIDE, assign({}, opts, { type: MENU_HIDE }), target);\n}\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport listener from './globalEventListener';\nimport { hideMenu } from './actions';\nimport { callIfExists } from './helpers';\nimport { Utils } from '../../utils/utils';\n\nconst propTypes = {\n  id: PropTypes.string.isRequired,\n  rtl: PropTypes.bool,\n  onMenuItemClick: PropTypes.func.isRequired,\n  onShowMenu: PropTypes.func,\n  onHideMenu: PropTypes.func,\n  hideOnLeave: PropTypes.bool,\n};\n\nclass ContextMenu extends React.Component {\n\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      x: 0,\n      y: 0,\n      isVisible: false,\n      currentObject: null,\n      menuList: [],\n    };\n  }\n\n  componentDidMount() {\n    this.listenId = listener.register(this.handleShow, this.handleHide);\n  }\n\n  componentDidUpdate () {\n    if (this.state.isVisible) {\n      const wrapper = window.requestAnimationFrame || setTimeout;\n\n      wrapper(() => {\n        const { x, y } = this.state;\n        const { top, left } = this.props.rtl ? this.getRTLMenuPosition(x, y) : this.getMenuPosition(x, y);\n\n        wrapper(() => {\n          if (!this.menu) return;\n          this.menu.style.top = `${top}px`;\n          this.menu.style.left = `${left}px`;\n          this.menu.style.opacity = 1;\n          this.menu.style.pointerEvents = 'auto';\n        });\n      });\n    } else {\n      if (!this.menu) return;\n      this.menu.style.opacity = 0;\n      this.menu.style.pointerEvents = 'none';\n    }\n  }\n\n  componentWillUnmount() {\n    if (this.listenId) {\n      listener.unregister(this.listenId);\n    }\n\n    this.unregisterHandlers();\n  }\n\n  registerHandlers = () => {\n    document.addEventListener('mousedown', this.handleOutsideClick);\n    document.addEventListener('touchstart', this.handleOutsideClick);\n    document.addEventListener('scroll', this.handleHide);\n    document.addEventListener('contextmenu', this.handleHide);\n    document.addEventListener('keydown', this.handleKeyNavigation);\n    window.addEventListener('resize', this.handleHide);\n  };\n\n  unregisterHandlers = () => {\n    document.removeEventListener('mousedown', this.handleOutsideClick);\n    document.removeEventListener('touchstart', this.handleOutsideClick);\n    document.removeEventListener('scroll', this.handleHide);\n    document.removeEventListener('contextmenu', this.handleHide);\n    document.removeEventListener('keydown', this.handleKeyNavigation);\n    window.removeEventListener('resize', this.handleHide);\n  };\n\n  handleShow = (e) => {\n    if (e.detail.id !== this.props.id) return;\n\n    const { x, y } = e.detail.position;\n    const { currentObject, menuList} = e.detail;\n\n    this.setState({ isVisible: true, x, y, currentObject, menuList });\n    this.registerHandlers();\n    callIfExists(this.props.onShowMenu, e);\n  };\n\n  handleHide = (e) => {\n    if (this.state.isVisible && (!e.detail || !e.detail.id || e.detail.id === this.props.id)) {\n      this.unregisterHandlers();\n      this.setState({ isVisible: false});\n      callIfExists(this.props.onHideMenu, e);\n    }\n  };\n\n  handleOutsideClick = (e) => {\n    if (!this.menu.contains(e.target)) hideMenu();\n  };\n\n  handleMouseLeave = (event) => {\n    event.preventDefault();\n\n    if (this.props.hideOnLeave) hideMenu();\n  };\n\n  handleContextMenu = (e) => {\n    this.handleHide(e);\n  };\n\n  handleKeyNavigation = (e) => {\n    if (this.state.isVisible === false) {\n      return;\n    }\n    e.preventDefault();\n    this.hideMenu(e);\n  };\n\n  hideMenu = (e) => {\n    if (e.keyCode === 27 || e.keyCode === 13) { // ECS or enter\n      hideMenu();\n    }\n  };\n\n  getMenuPosition = (x = 0, y = 0) => {\n    let menuStyles = {\n      top: y,\n      left: x\n    };\n\n    if (!this.menu) return menuStyles;\n\n    const { innerWidth, innerHeight } = window;\n    const rect = this.menu.getBoundingClientRect();\n\n    if (y + rect.height > innerHeight) {\n      menuStyles.top -= rect.height;\n    }\n\n    if (x + rect.width > innerWidth) {\n      menuStyles.left -= rect.width;\n    }\n\n    if (menuStyles.top < 0) {\n      menuStyles.top = rect.height < innerHeight ? (innerHeight - rect.height) / 2 : 0;\n    }\n\n    if (menuStyles.left < 0) {\n      menuStyles.left = rect.width < innerWidth ? (innerWidth - rect.width) / 2 : 0;\n    }\n\n    return menuStyles;\n  };\n\n  getRTLMenuPosition = (x = 0, y = 0) => {\n    let menuStyles = {\n      top: y,\n      left: x\n    };\n\n    if (!this.menu) return menuStyles;\n\n    const { innerWidth, innerHeight } = window;\n    const rect = this.menu.getBoundingClientRect();\n\n    // Try to position the menu on the left side of the cursor\n    menuStyles.left = x - rect.width;\n\n    if (y + rect.height > innerHeight) {\n      menuStyles.top -= rect.height;\n    }\n\n    if (menuStyles.left < 0) {\n      menuStyles.left += rect.width;\n    }\n\n    if (menuStyles.top < 0) {\n      menuStyles.top = rect.height < innerHeight ? (innerHeight - rect.height) / 2 : 0;\n    }\n\n    if (menuStyles.left + rect.width > innerWidth) {\n      menuStyles.left = rect.width < innerWidth ? (innerWidth - rect.width) / 2 : 0;\n    }\n\n    return menuStyles;\n  };\n\n\n  onMenuItemClick = (event) => {\n    event.stopPropagation();\n    let operation = Utils.getEventData(event, 'operation');\n    let currentObject = this.state.currentObject;\n    this.props.onMenuItemClick(operation, currentObject, event);\n  };\n\n  onContextMenu = (event) => {\n    event.stopPropagation();\n  };\n\n  render() {\n    const inlineStyle = { position: 'fixed', opacity: 0, pointerEvents: 'none', display: 'block' };\n    return (\n      <div role=\"menu\" className=\"seafile-contextmenu dropdown-menu\" style={inlineStyle} ref={menu => { this.menu = menu; }}>\n        {this.state.menuList.map((menuItem, index) => {\n          if (menuItem === 'Divider') {\n            return <div key={index} className=\"seafile-divider dropdown-divider\"></div>;\n          } else {\n            return (\n              <button\n                key={index}\n                className=\"seafile-contextmenu-item dropdown-item\"\n                data-operation={menuItem.key}\n                onClick={this.onMenuItemClick}\n                onContextMenu={this.onContextMenu}\n              >\n                {menuItem.value}\n              </button>\n            );\n          }\n        })}\n      </div>\n    );\n  }\n}\n\nContextMenu.propTypes = propTypes;\n\nexport default ContextMenu;\n","import { MENU_SHOW, MENU_HIDE } from './actions';\nimport { uniqueId, hasOwnProp, canUseDOM } from './helpers';\n\nclass GlobalEventListener {\n\n  constructor() {\n    this.callbacks = {};\n\n    if (canUseDOM) {\n      window.addEventListener(MENU_SHOW, this.handleShowEvent);\n      window.addEventListener(MENU_HIDE, this.handleHideEvent);\n    }\n  }\n\n  handleShowEvent = (event) => {\n    for (const id in this.callbacks) {\n      if (hasOwnProp(this.callbacks, id)) this.callbacks[id].show(event);\n    }\n  };\n\n  handleHideEvent = (event) => {\n    for (const id in this.callbacks) {\n      if (hasOwnProp(this.callbacks, id)) this.callbacks[id].hide(event);\n    }\n  };\n\n  register = (showCallback, hideCallback) => {\n    const id = uniqueId();\n\n    this.callbacks[id] = {\n      show: showCallback,\n      hide: hideCallback\n    };\n\n    return id;\n  };\n\n  unregister = (id) => {\n    if (id && this.callbacks[id]) {\n      delete this.callbacks[id];\n    }\n  };\n}\n\nconst globalEventListener = new GlobalEventListener();\n\nexport default globalEventListener;\n","export function callIfExists(func, ...args) {\n  return (typeof func === 'function') && func(...args);\n}\n\nexport function hasOwnProp(obj, prop) {\n  return Object.prototype.hasOwnProperty.call(obj, prop);\n}\n\nexport function uniqueId() {\n  return Math.random().toString(36).substring(7);\n}\n\nexport const store = {};\n\nexport const canUseDOM = Boolean(\n  typeof window !== 'undefined' && window.document && window.document.createElement\n);\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Modal, ModalHeader, ModalBody } from 'reactstrap';\nimport { gettext } from '../../utils/constants';\n\nconst propTypes = {\n  type: PropTypes.oneOf(['move', 'copy']).isRequired,\n  asyncOperatedFilesLength: PropTypes.number.isRequired,\n  asyncOperationProgress: PropTypes.oneOfType([PropTypes.string, PropTypes.number]).isRequired,\n  toggleDialog: PropTypes.func.isRequired,\n};\n\nclass CopyMoveDirentProgressDialog extends React.Component {\n\n  render() {\n\n    let { type , asyncOperationProgress, asyncOperatedFilesLength } = this.props;\n    let title = type === 'move' ? gettext('Move {num} items') : gettext('Copy {num} items');\n    title = title.replace('{num}', asyncOperatedFilesLength);\n    let progressStyle = {\n      width: asyncOperationProgress + '%',\n      lineHeight: '40px',\n      textAlign: 'left',\n    };\n    return (\n      <Modal isOpen={true}>\n        <ModalHeader toggle={this.props.toggleDialog}>{title}</ModalHeader>\n        <ModalBody style={{minHeight: '80px'}}>\n          <div className=\"progress\" style={{height: '40px'}}>\n            <div\n              className=\"progress-bar pl-2\"\n              role=\"progressbar\"\n              style={progressStyle}\n              aria-valuenow={asyncOperationProgress}\n              aria-valuemin=\"0\"\n              aria-valuemax=\"100\"\n            >\n              {asyncOperationProgress + '%'}\n            </div>\n          </div>\n        </ModalBody>\n      </Modal>\n    );\n  }\n}\n\nCopyMoveDirentProgressDialog.propTypes = propTypes;\n\nexport default CopyMoveDirentProgressDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Modal, ModalHeader, Input, ModalBody, ModalFooter, Form, FormGroup, Label, Alert } from 'reactstrap';\nimport { gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\n\nconst propTypes = {\n  fileType: PropTypes.string,\n  parentPath: PropTypes.string.isRequired,\n  onAddFolder: PropTypes.func.isRequired,\n  checkDuplicatedName: PropTypes.func.isRequired,\n  addFolderCancel: PropTypes.func.isRequired,\n};\n\nclass CreateForder extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      parentPath: '',\n      childName: '',\n      errMessage: '',\n      isSubmitBtnActive: false,\n    };\n  }\n\n  componentDidMount() {\n    let parentPath = this.props.parentPath;\n    if (parentPath[parentPath.length - 1] === '/') {  // mainPanel\n      this.setState({parentPath: parentPath});\n    } else {\n      this.setState({parentPath: parentPath + '/'}); // sidePanel\n    }\n  }\n\n  handleChange = (e) => {\n    if (!e.target.value.trim()) {\n      this.setState({isSubmitBtnActive: false});\n    } else {\n      this.setState({isSubmitBtnActive: true});\n    }\n\n    this.setState({childName: e.target.value});\n  };\n\n  handleSubmit = () => {\n    if (!this.state.isSubmitBtnActive) {\n      return;\n    }\n\n    let newName = this.state.childName;\n    let isDuplicated = this.checkDuplicatedName();\n\n    if (isDuplicated) {\n      let errMessage = gettext('The name \"{name}\" is already taken. Please choose a different name.');\n      errMessage = errMessage.replace('{name}', Utils.HTMLescape(newName));\n      this.setState({errMessage: errMessage});\n    } else {\n      let path = this.state.parentPath + newName;\n      this.props.onAddFolder(path);\n    }\n  };\n\n  handleKeyDown = (e) => {\n    if (e.key === 'Enter') {\n      this.handleSubmit();\n      e.preventDefault();\n    }\n  };\n\n  toggle = () => {\n    this.props.addFolderCancel();\n  };\n\n  checkDuplicatedName = () => {\n    let isDuplicated = this.props.checkDuplicatedName(this.state.childName);\n    return isDuplicated;\n  };\n\n  render() {\n    return (\n      <Modal isOpen={true} toggle={this.toggle} autoFocus={false}>\n        <ModalHeader toggle={this.toggle}>{gettext('New Folder')}</ModalHeader>\n        <ModalBody>\n          <Form>\n            <FormGroup>\n              <Label for=\"folderName\">{gettext('Name')}</Label>\n              <Input\n                id=\"folderName\"\n                value={this.state.childName}\n                onKeyDown={this.handleKeyDown}\n                onChange={this.handleChange}\n                autoFocus={true}\n              />\n            </FormGroup>\n          </Form>\n          {this.state.errMessage && <Alert color=\"danger\" className=\"mt-2\">{this.state.errMessage}</Alert>}\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.toggle}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.handleSubmit} disabled={!this.state.isSubmitBtnActive}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nCreateForder.propTypes = propTypes;\n\nexport default CreateForder;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../../utils/constants';\nimport Lightbox from '@seafile/react-image-lightbox';\nimport '@seafile/react-image-lightbox/style.css';\n\nconst propTypes = {\n  imageItems: PropTypes.array.isRequired,\n  imageIndex: PropTypes.number.isRequired,\n  closeImagePopup: PropTypes.func.isRequired,\n  moveToPrevImage: PropTypes.func.isRequired,\n  moveToNextImage: PropTypes.func.isRequired\n};\n\nclass ImageDialog extends React.Component {\n\n  render() {\n    const imageItems = this.props.imageItems;\n    const imageIndex = this.props.imageIndex;\n    const imageItemsLength = imageItems.length;\n    const name = imageItems[imageIndex].name;\n    const imageTitle = `${name} (${imageIndex + 1}/${imageItemsLength})`;\n\n    return (\n      <Lightbox\n        imageTitle={imageTitle}\n        mainSrc={imageItems[imageIndex].src}\n        nextSrc={imageItems[(imageIndex + 1) % imageItemsLength].src}\n        prevSrc={imageItems[(imageIndex + imageItemsLength - 1) % imageItemsLength].src}\n        onCloseRequest={this.props.closeImagePopup}\n        onMovePrevRequest={this.props.moveToPrevImage}\n        onMoveNextRequest={this.props.moveToNextImage}\n        imagePadding={70}\n        imageLoadErrorMessage={gettext('The image could not be loaded.')}\n        prevLabel={gettext('Previous (Left arrow key)')}\n        nextLabel={gettext('Next (Right arrow key)')}\n        closeLabel={gettext('Close (Esc)')}\n        zoomInLabel={gettext('Zoom in')}\n        zoomOutLabel={gettext('Zoom out')}\n      />\n    );\n  }\n}\n\nImageDialog.propTypes = propTypes;\n\nexport default ImageDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Modal, ModalHeader, ModalBody, ModalFooter, Button } from 'reactstrap';\nimport copy from '../copy-to-clipboard';\nimport { gettext } from '../../utils/constants';\nimport toaster from '../../components/toast';\n\nconst propTypes = {\n  link: PropTypes.string.isRequired,\n  toggleDialog: PropTypes.func.isRequired\n};\n\nclass ShareAdminLink extends React.Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  copyToClipboard = () => {\n    copy(this.props.link);\n    this.props.toggleDialog();\n    toaster.success(gettext('The link is copied to the clipboard.'), {duration: 2});\n  };\n\n  render() {\n    const { link, toggleDialog } = this.props;\n    return (\n      <Modal isOpen={true} toggle={toggleDialog}>\n        <ModalHeader toggle={toggleDialog}>{gettext('Link')}</ModalHeader>\n        <ModalBody>\n          <a href={link}>{link}</a>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"primary\" onClick={this.copyToClipboard}>{gettext('Copy')}</Button>\n          <Button color=\"secondary\" onClick={toggleDialog}>{gettext('Close')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nShareAdminLink.propTypes = propTypes;\n\nexport default ShareAdminLink;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Modal, ModalHeader, ModalBody } from 'reactstrap';\nimport { gettext, fileServerRoot } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport Loading from '../loading';\n\nconst propTypes = {\n  data: PropTypes.object,\n  token: PropTypes.string,\n  path: PropTypes.string.isRequired,\n  repoID: PropTypes.string,\n  target: PropTypes.oneOfType([\n    PropTypes.string,\n    PropTypes.array\n  ]),\n  toggleDialog: PropTypes.func.isRequired\n};\n\nlet interval;\n\nclass ZipDownloadDialog extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      isLoading: true,\n      errorMsg: '',\n      zipProgress: null\n    };\n  }\n\n  componentDidMount() {\n    const { token, path, repoID, target } = this.props;\n    let getZipTask;\n    if (token) {\n      getZipTask = target.length ?\n        seafileAPI.getShareLinkDirentsZipTask(token, path, target) :\n        seafileAPI.getShareLinkZipTask(token, path);\n    } else {\n      getZipTask = seafileAPI.zipDownload(repoID, path, target);\n    }\n    getZipTask.then((res) => {\n      const zipToken = res.data['zip_token'];\n      this.setState({\n        isLoading: false,\n        errorMsg: '',\n        zipToken: zipToken\n      });\n      this.queryZipProgress();\n      interval = setInterval(this.queryZipProgress, 1000);\n    }).catch((error) => {\n      let errorMsg = Utils.getErrorMsg(error);\n      this.setState({\n        isLoading: false,\n        errorMsg: errorMsg\n      });\n    });\n  }\n\n  queryZipProgress = () => {\n    const zipToken = this.state.zipToken;\n    seafileAPI.queryZipProgress(zipToken).then((res) => {\n      const data = res.data;\n      if (data.failed == 1) {\n        clearInterval(interval);\n        this.setState({\n          isLoading: false,\n          errorMsg: data.failed_reason\n        });\n      } else {\n        this.setState({\n          zipProgress: data.total == 0 ? '100%' : (data.zipped/data.total*100).toFixed(2) + '%'\n        });\n        if (data['total'] == data['zipped']) {\n          clearInterval(interval);\n          this.props.toggleDialog();\n          location.href = `${fileServerRoot}zip/${zipToken}`;\n        }\n      }\n    }).catch((error) => {\n      clearInterval(interval);\n      let errorMsg = Utils.getErrorMsg(error);\n      this.setState({\n        isLoading: false,\n        errorMsg: errorMsg\n      });\n    });\n  };\n\n  cancelZipTask = () => {\n    const zipToken = this.state.zipToken;\n    seafileAPI.cancelZipTask(zipToken).then((res) => {\n    // do nothing\n    }).catch((error) => {\n    // do nothing\n    });\n  };\n\n  toggleDialog = () => {\n    const zipProgress = this.state.zipProgress;\n    if (zipProgress && zipProgress != '100%') {\n      clearInterval(interval);\n      this.cancelZipTask();\n    }\n    this.props.toggleDialog();\n  };\n\n  render() {\n    return (\n      <Modal isOpen={true} toggle={this.toggleDialog}>\n        <ModalHeader toggle={this.toggleDialog}>{gettext('Download')}</ModalHeader>\n        <ModalBody>\n          <Content data={this.state} />\n        </ModalBody>\n      </Modal>\n    );\n  }\n}\n\nclass Content extends React.Component {\n\n  render() {\n    const {isLoading, errorMsg, zipProgress} = this.props.data;\n\n    if (isLoading) {\n      return <Loading />;\n    }\n\n    if (errorMsg) {\n      return <p className=\"error mt-4 text-center\">{errorMsg}</p>;\n    }\n\n    return <p className=\"mt-4 text-center\">{`${gettext('Packaging...')} ${zipProgress}`}</p>;\n  }\n}\n\nContent.propTypes = {\n  data: PropTypes.object,\n};\n\nZipDownloadDialog.propTypes = propTypes;\n\nexport default ZipDownloadDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport listener from '../context-menu/globalEventListener';\nimport { Dropdown, ButtonDropdown, DropdownMenu, DropdownToggle, DropdownItem } from 'reactstrap';\nimport { gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\n\nconst propTypes = {\n  tagName: PropTypes.string,\n  item: PropTypes.object.isRequired,\n  toggleClass: PropTypes.string,\n  isHandleContextMenuEvent: PropTypes.bool,\n  getMenuList: PropTypes.func.isRequired,\n  onMenuItemClick: PropTypes.func.isRequired,\n  freezeItem: PropTypes.func,\n  unfreezeItem: PropTypes.func,\n};\n\nclass ItemDropdownMenu extends React.Component {\n\n  static defaultProps = {\n    isHandleContextMenuEvent: true,\n    toggleClass: 'sf2-icon-caret-down'\n  };\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      menuList: [],\n      isItemMenuShow: false,\n    };\n  }\n\n  componentDidMount() {\n    if (this.props.isHandleContextMenuEvent) {\n      this.listenerId = listener.register(this.onShowMenu, this.onHideMenu);\n    }\n    let { item } = this.props;\n    let menuList = this.props.getMenuList(item);\n    this.setState({menuList: menuList});\n  }\n\n  componentWillReceiveProps(nextProps) {  // for toolbar item operation\n    let { item } = nextProps;\n    if (item.name !== this.props.item.name) {\n      let menuList = this.props.getMenuList(item);\n      this.setState({menuList: menuList});\n    }\n  }\n\n  componentWillUnmount() {\n    if (this.props.isHandleContextMenuEvent && this.listenerId) {\n      listener.unregister(this.listenerId);\n    }\n  }\n\n  onShowMenu = () => {\n    // nothing todo\n  };\n\n  onHideMenu = () => {\n    if (this.state.isItemMenuShow) {\n      this.setState({isItemMenuShow: false});\n      if (typeof(this.props.unfreezeItem) === 'function') {\n        this.props.unfreezeItem();\n      }\n    }\n  };\n\n  onDropdownToggleKeyDown = (e) => {\n    if (e.key == 'Enter' || e.key == 'Space') {\n      this.onDropdownToggleClick(e);\n    }\n  };\n\n  onDropdownToggleClick = (e) => {\n    e.preventDefault();\n    e.stopPropagation();\n\n    this.toggleOperationMenu();\n  };\n\n  toggleOperationMenu = () => {\n    this.setState(\n      {isItemMenuShow: !this.state.isItemMenuShow},\n      () => {\n        if (this.state.isItemMenuShow && typeof(this.props.freezeItem) === 'function') {\n          this.props.freezeItem();\n        } else if (!this.state.isItemMenuShow && typeof(this.props.unfreezeItem) === 'function') {\n          this.props.unfreezeItem();\n        }\n      }\n    );\n  };\n\n  onMenuItemKeyDown = (e) => {\n    if (e.key == 'Enter' || e.key == 'Space') {\n      this.onMenuItemClick(e);\n    }\n  };\n\n  onMenuItemClick = (event) => {\n    let operation = Utils.getEventData(event, 'toggle');\n    let item = this.props.item;\n    this.props.onMenuItemClick(operation, event, item);\n  };\n\n  render() {\n    let menuList = this.state.menuList;\n    let { toggleClass, tagName } = this.props;\n    toggleClass = 'sf-dropdown-toggle ' + toggleClass;\n\n    if (!menuList.length) {\n      return '';\n    }\n\n    if (tagName && tagName === 'button') {\n      return (\n        <ButtonDropdown isOpen={this.state.isItemMenuShow} toggle={this.onDropdownToggleClick}>\n          <DropdownToggle\n            className={toggleClass}\n            data-toggle=\"dropdown\"\n            title={gettext('More Operations')}\n            aria-label={gettext('More Operations')}\n            aria-expanded={this.state.isItemMenuShow}\n            onKeyDown={this.onDropdownToggleKeyDown}\n            // onClick={this.onDropdownToggleClick}\n          >\n          </DropdownToggle>\n          <DropdownMenu>\n            {menuList.map((menuItem, index) => {\n              if (menuItem === 'Divider') {\n                return <DropdownItem key={index} divider />;\n              } else {\n                return (\n                  <DropdownItem key={index} data-toggle={menuItem.key} onClick={this.onMenuItemClick} onKeyDown={this.onMenuItemKeyDown}>{menuItem.value}</DropdownItem>\n                );\n              }\n            })}\n          </DropdownMenu>\n        </ButtonDropdown>\n      );\n    }\n\n    return (\n      <Dropdown isOpen={this.state.isItemMenuShow} toggle={this.onDropdownToggleClick} className=\"vam\">\n        <DropdownToggle\n          tag={tagName || 'i'}\n          role=\"button\"\n          tabIndex=\"0\"\n          className={toggleClass}\n          title={gettext('More Operations')}\n          data-toggle=\"dropdown\"\n          aria-expanded={this.state.isItemMenuShow}\n          aria-label={gettext('More Operations')}\n          onKeyDown={this.onDropdownToggleKeyDown}\n          // onClick={this.onDropdownToggleClick}\n        />\n        <DropdownMenu>\n          {menuList.map((menuItem, index) => {\n            if (menuItem === 'Divider') {\n              return <DropdownItem key={index} divider />;\n            } else {\n              return (\n                <DropdownItem key={index} data-toggle={menuItem.key} onClick={this.onMenuItemClick} onKeyDown={this.onMenuItemKeyDown}>{menuItem.value}</DropdownItem>\n              );\n            }\n          })}\n        </DropdownMenu>\n      </Dropdown>\n    );\n  }\n}\n\nItemDropdownMenu.propTypes = propTypes;\n\nexport default ItemDropdownMenu;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport '../css/icon.css';\n\nconst importAll = (requireContext) => {\n  requireContext.keys().forEach(requireContext);\n};\ntry {\n  importAll(require.context('../assets/icons', true, /\\.svg$/));\n} catch (error) {\n  // eslint-disable-next-line no-console\n  console.log(error);\n}\n\nconst Icon = (props) => {\n  const { className, symbol } = props;\n  const iconClass = `seafile-multicolor-icon seafile-multicolor-icon-${symbol} ${className || ''}`;\n  return (\n    <svg className={iconClass}>\n      <use xlinkHref={`#${symbol}`} />\n    </svg>\n  );\n};\n\nIcon.propTypes = {\n  symbol: PropTypes.string.isRequired,\n  className: PropTypes.string,\n};\n\nexport default Icon;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport '../../css/common-add-tool.css';\n\nfunction CommonAddTool(props) {\n  const { callBack, footerName, className, addIconClassName } = props;\n  return (\n    <div className={`add-item-btn ${className ? className : ''}`} onClick={(e) => {callBack(e);}}>\n      <span className={`fas fa-plus mr-2 ${addIconClassName || ''}`}></span>\n      <span className='add-new-option' title={footerName}>{footerName}</span>\n    </div>\n  );\n}\n\nCommonAddTool.propTypes = {\n  className: PropTypes.string,\n  addIconClassName: PropTypes.string,\n  footerName: PropTypes.string.isRequired,\n  callBack: PropTypes.func.isRequired,\n};\n\nexport default CommonAddTool;\n","import React, { Component, Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport classnames from 'classnames';\n\nconst propTypes = {\n  placeholder: PropTypes.string,\n  autoFocus: PropTypes.bool,\n  className: PropTypes.string,\n  onChange: PropTypes.func.isRequired,\n  onKeyDown: PropTypes.func,\n  wait: PropTypes.number,\n  disabled: PropTypes.bool,\n  style: PropTypes.object,\n  isClearable: PropTypes.bool,\n  clearValue: PropTypes.func,\n  clearClassName: PropTypes.string,\n  components: PropTypes.object,\n  value: PropTypes.string,\n};\n\nclass SearchInput extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      searchValue: props.value,\n    };\n    this.isInputtingChinese = false;\n    this.timer = null;\n    this.inputRef = null;\n  }\n\n  componentDidMount() {\n    if (this.props.autoFocus && this.inputRef && this.inputRef !== document.activeElement) {\n      setTimeout(() => {\n        this.inputRef.focus();\n      }, 0);\n    }\n  }\n\n  componentWillReceiveProps(nextProps) {\n    if (nextProps.value !== this.props.value) {\n      this.setState({searchValue: nextProps.value});\n    }\n  }\n\n  componentWillUnmount() {\n    this.timer && clearTimeout(this.timer);\n    this.timer = null;\n    this.inputRef = null;\n  }\n\n  onCompositionStart = () => {\n    this.isInputtingChinese = true;\n  };\n\n  onChange = (e) => {\n    this.timer && clearTimeout(this.timer);\n    const { onChange, wait } = this.props;\n    let text = e.target.value;\n    this.setState({searchValue: text || ''}, () => {\n      if (this.isInputtingChinese) return;\n      this.timer = setTimeout(() => {\n        onChange && onChange(this.state.searchValue.trim());\n      }, wait);\n    });\n  };\n\n  onCompositionEnd = (e) => {\n    this.isInputtingChinese = false;\n    this.onChange(e);\n  };\n\n  clearSearch = () => {\n    const { clearValue } = this.props;\n    this.setState({searchValue: ''}, () => {\n      clearValue && clearValue();\n    });\n  };\n\n  setFocus = (isSelectAllText) => {\n    if (this.inputRef === document.activeElement) return;\n    this.inputRef.focus();\n    if (isSelectAllText) {\n      const txtLength = this.state.searchValue.length;\n      this.inputRef.setSelectionRange(0, txtLength);\n    }\n  };\n\n  isFunction = (functionToCheck) => {\n    const getType = {};\n    return functionToCheck && getType.toString.call(functionToCheck) === '[object Function]';\n  };\n\n  renderClear = () => {\n    const { isClearable, clearClassName, components = {} } = this.props;\n    const { searchValue } = this.state;\n    if (!isClearable || !searchValue) return null;\n    const { ClearIndicator } = components;\n    if (React.isValidElement(ClearIndicator)) {\n      return React.cloneElement(ClearIndicator, {clearValue: this.clearSearch});\n    } else if (this.isFunction(ClearIndicator)) {\n      return <ClearIndicator clearValue={this.clearSearch} />;\n    }\n    return (\n      <i className={classnames('search-text-clear input-icon-addon', clearClassName)} onClick={this.clearSearch}></i>\n    );\n  };\n\n  render() {\n    const { placeholder, autoFocus, className, onKeyDown, disabled, style } = this.props;\n    const { searchValue } = this.state;\n\n    return (\n      <Fragment>\n        <input\n          type=\"text\"\n          value={searchValue}\n          className={classnames('form-control', className)}\n          onChange={this.onChange}\n          autoFocus={autoFocus}\n          placeholder={placeholder}\n          onCompositionStart={this.onCompositionStart}\n          onCompositionEnd={this.onCompositionEnd}\n          onKeyDown={onKeyDown}\n          disabled={disabled}\n          style={style}\n          ref={ref => this.inputRef = ref}\n        />\n        {this.renderClear()}\n      </Fragment>\n    );\n  }\n}\n\nSearchInput.propTypes = propTypes;\n\nSearchInput.defaultProps = {\n  wait: 100,\n  disabled: false,\n  value: '',\n};\n\nexport default SearchInput;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../toast';\n\nclass TagItem extends React.Component {\n\n  onMouseEnter = () => {\n    this.props.setHighlightIndex(this.props.index);\n  };\n\n  onMouseLeave = () => {\n    this.props.setHighlightIndex(-1);\n  };\n\n  getRepoTagIdList = () => {\n    let repoTagIdList = [];\n    let fileTagList = this.props.fileTagList || [];\n    repoTagIdList = fileTagList.map((fileTag) => fileTag.repo_tag_id);\n    return repoTagIdList;\n  };\n\n  onEditFileTag = () => {\n    let { repoID, repoTag, filePath } = this.props;\n    let repoTagIdList = this.getRepoTagIdList();\n    if (repoTagIdList.indexOf(repoTag.id) === -1) {\n      let id = repoTag.id;\n      seafileAPI.addFileTag(repoID, filePath, id).then(() => {\n        repoTagIdList = this.getRepoTagIdList();\n        this.props.onFileTagChanged();\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    } else {\n      let fileTag = null;\n      let fileTagList = this.props.fileTagList;\n      for(let i = 0; i < fileTagList.length; i++) {\n        if (fileTagList[i].repo_tag_id === repoTag.id) {\n          fileTag = fileTagList[i];\n          break;\n        }\n      }\n      seafileAPI.deleteFileTag(repoID, fileTag.id).then(() => {\n        repoTagIdList = this.getRepoTagIdList();\n        this.props.onFileTagChanged();\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    }\n  };\n\n  render() {\n    const { repoTag, highlightIndex, index } = this.props;\n    const repoTagIdList = this.getRepoTagIdList();\n    const isTagSelected = repoTagIdList.indexOf(repoTag.id) != -1;\n    return (\n      <li\n        className={`tag-list-item cursor-pointer px-3 d-flex justify-content-between align-items-center ${highlightIndex === index ? 'hl' : ''}`}\n        onClick={this.onEditFileTag}\n        onMouseEnter={this.onMouseEnter}\n        onMouseLeave={this.onMouseLeave}\n      >\n        <div className=\"tag-item d-flex align-items-center\" style={{backgroundColor: repoTag.color}}>\n          <span className=\"tag-name\">{repoTag.name}</span>\n        </div>\n        {isTagSelected && <i className=\"fas fa-check tag-selected-icon\"></i>}\n      </li>\n    );\n  }\n\n}\n\nTagItem.propTypes = {\n  index: PropTypes.number.isRequired,\n  highlightIndex: PropTypes.number.isRequired,\n  repoID: PropTypes.string.isRequired,\n  repoTag: PropTypes.object.isRequired,\n  filePath: PropTypes.string.isRequired,\n  fileTagList: PropTypes.array.isRequired,\n  onFileTagChanged: PropTypes.func.isRequired,\n  setHighlightIndex: PropTypes.func.isRequired,\n};\n\nexport default TagItem;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport RepoTag from '../../models/repo-tag';\nimport toaster from '../toast';\nimport CommonAddTool from '../common/common-add-tool';\nimport SearchInput from '../common/search-input';\nimport SeahubPopover from '../common/seahub-popover';\nimport TagItem from './tag-item';\nimport { KeyCodes, TAG_COLORS } from '../../constants';\n\nimport '../../css/repo-tag.css';\nimport '../../css/edit-filetag-popover.css';\n\nclass EditFileTagPopover extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      repotagList: [],\n      searchVal: '',\n      highlightIndex: -1,\n    };\n  }\n\n  componentDidMount() {\n    this.getRepoTagList();\n  }\n\n  setHighlightIndex = (highlightIndex) => {\n    this.setState({ highlightIndex });\n  };\n\n  getRepoTagList = () => {\n    let repoID = this.props.repoID;\n    seafileAPI.listRepoTags(repoID).then(res => {\n      let repotagList = [];\n      res.data.repo_tags.forEach(item => {\n        let repoTag = new RepoTag(item);\n        repotagList.push(repoTag);\n      });\n      this.setState({repotagList: repotagList});\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  generateRandomColor = () => {\n    return TAG_COLORS[Math.floor(Math.random() * TAG_COLORS.length)];\n  };\n\n  createNewTag = () => {\n    let name = this.state.searchVal.trim();\n    if (!name) return;\n    let color = this.generateRandomColor();\n    let repoID = this.props.repoID;\n    seafileAPI.createRepoTag(repoID, name, color).then((res) => {\n      let repoTagID = res.data.repo_tag.repo_tag_id;\n      this.onRepoTagCreated(repoTagID);\n      this.setState({\n        searchVal: '',\n        highlightIndex: -1,\n      });\n      this.getRepoTagList();\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  onRepoTagCreated = (repoTagID) => {\n    let {repoID, filePath} = this.props;\n    seafileAPI.addFileTag(repoID, filePath, repoTagID).then(() => {\n      this.props.onFileTagChanged();\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  getRepoTagIdList = () => {\n    return (this.props.fileTagList || []).map((fileTag) => fileTag.repo_tag_id);\n  };\n\n  onEditFileTag = (repoTag) => {\n    let { repoID, filePath } = this.props;\n    let repoTagIdList = this.getRepoTagIdList();\n    if (repoTagIdList.indexOf(repoTag.id) === -1) {\n      seafileAPI.addFileTag(repoID, filePath, repoTag.id).then(() => {\n        repoTagIdList = this.getRepoTagIdList();\n        this.props.onFileTagChanged();\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    } else {\n      let fileTag = null;\n      let fileTagList = this.props.fileTagList;\n      for(let i = 0; i < fileTagList.length; i++) {\n        if (fileTagList[i].repo_tag_id === repoTag.id) {\n          fileTag = fileTagList[i];\n          break;\n        }\n      }\n      seafileAPI.deleteFileTag(repoID, fileTag.id).then(() => {\n        repoTagIdList = this.getRepoTagIdList();\n        this.props.onFileTagChanged();\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    }\n  };\n\n  onKeyDown = (e) => {\n    if (e.keyCode === KeyCodes.ChineseInputMethod || e.keyCode === KeyCodes.LeftArrow || e.keyCode === KeyCodes.RightArrow) {\n      e.stopPropagation();\n    }\n    else if (e.keyCode === KeyCodes.Enter) {\n      const searchText = this.state.searchVal.trim();\n      const repotagList = this.state.repotagList.filter(item => item.name.includes(searchText));\n      const tag = repotagList[this.state.highlightIndex];\n      if (tag) {\n        this.onEditFileTag(tag);\n      }\n    }\n    else if (e.keyCode === KeyCodes.UpArrow) {\n      if (this.state.highlightIndex > -1) {\n        this.setHighlightIndex(this.state.highlightIndex - 1);\n      }\n    }\n    else if (e.keyCode === KeyCodes.DownArrow) {\n      const searchText = this.state.searchVal.trim();\n      const repotagList = this.state.repotagList.filter(item => item.name.includes(searchText));\n      if (this.state.highlightIndex < repotagList.length) {\n        this.setHighlightIndex(this.state.highlightIndex + 1);\n      }\n    }\n  };\n\n  onChangeSearch = (searchVal) => {\n    this.setState({ searchVal });\n    this.setHighlightIndex(-1);\n  };\n\n  render() {\n    const searchText = this.state.searchVal.trim();\n    const repotagList = this.state.repotagList.filter(item => item.name.includes(searchText));\n    const showAddTool = searchText && !this.state.repotagList.find(item => item.name === searchText);\n    return (\n      <SeahubPopover\n        popoverClassName=\"edit-filetag-popover\"\n        target={this.props.target}\n        hideSeahubPopover={this.props.toggleCancel}\n        hideSeahubPopoverWithEsc={this.props.toggleCancel}\n        canHideSeahubPopover={true}\n      >\n        <SearchInput\n          className=\"edit-filetag-popover-input\"\n          placeholder={gettext('Find a tag')}\n          onKeyDown={this.onKeyDown}\n          onChange={this.onChangeSearch}\n          autoFocus={true}\n        />\n        <ul className=\"tag-list-container\">\n          {repotagList.length === 0 &&\n            <div className='tag-not-found mt-2 mb-4 mx-1'>{gettext('Tag not found')}</div>\n          }\n          {repotagList.length > 0 && repotagList.map((repoTag, index) => {\n            return (\n              <TagItem\n                index={index}\n                highlightIndex={this.state.highlightIndex}\n                setHighlightIndex={this.setHighlightIndex}\n                key={repoTag.id}\n                repoTag={repoTag}\n                repoID={this.props.repoID}\n                filePath={this.props.filePath}\n                fileTagList={this.props.fileTagList}\n                onFileTagChanged={this.props.onFileTagChanged}\n              />\n            );\n          })}\n        </ul>\n        {showAddTool &&\n          <CommonAddTool\n            callBack={this.createNewTag}\n            footerName={`${gettext('Create a new tag')} '${searchText}'`}\n          />\n        }\n      </SeahubPopover>\n    );\n  }\n}\n\nEditFileTagPopover.propTypes = {\n  target: PropTypes.string.isRequired,\n  repoID: PropTypes.string.isRequired,\n  filePath: PropTypes.string.isRequired,\n  fileTagList: PropTypes.array.isRequired,\n  toggleCancel: PropTypes.func.isRequired,\n  onFileTagChanged: PropTypes.func.isRequired,\n};\n\nexport default EditFileTagPopover;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../utils/constants';\nimport { Utils } from '../utils/utils';\nimport toaster from './toast';\n\nconst propTypes = {\n  hasSuffix: PropTypes.bool,\n  name: PropTypes.string.isRequired,\n  onRenameConfirm: PropTypes.func.isRequired,\n  onRenameCancel: PropTypes.func.isRequired,\n};\n\nclass Rename extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      name: props.name\n    };\n    this.inputRef = React.createRef();\n  }\n\n  componentDidMount() {\n    this.inputRef.current.focus();\n    if (this.props.hasSuffix) {\n      var endIndex = this.props.name.lastIndexOf('.');\n      this.inputRef.current.setSelectionRange(0, endIndex, 'forward');\n    } else {\n      this.inputRef.current.setSelectionRange(0, -1);\n    }\n    // ensure real dom has been rendered, then listen the click event\n    setTimeout(() => {\n      document.addEventListener('click', this.onClick);\n    }, 1);\n  }\n\n  componentWillUnmount() {\n    document.removeEventListener('click', this.onClick);\n  }\n\n  onClick = (e) => {\n    if (!this.inputRef.current.contains(e.target)) {\n      this.onRenameConfirm();\n    }\n  };\n\n  onChange = (e) => {\n    this.setState({name: e.target.value});\n  };\n\n  onKeyDown = (e) => {\n    if (e.keyCode === Utils.keyCodes.enter) {\n      this.onRenameConfirm(e);\n    } else if (e.keyCode === Utils.keyCodes.esc) {\n      this.onRenameCancel(e);\n    }\n    e.nativeEvent.stopImmediatePropagation();\n  };\n\n  onRenameConfirm = (e) => {\n    e && e.nativeEvent.stopImmediatePropagation();\n    let newName = this.state.name.trim();\n    if (newName === this.props.name) {\n      this.props.onRenameCancel();\n      return;\n    }\n\n    let { isValid, errMessage } = this.validateInput();\n    if (!isValid) {\n      toaster.danger(errMessage);\n      this.props.onRenameCancel();\n    } else {\n      this.props.onRenameConfirm(newName);\n    }\n  };\n\n  onRenameCancel = (e) => {\n    e.nativeEvent.stopImmediatePropagation();\n    this.props.onRenameCancel();\n  };\n\n  validateInput = () => {\n    let newName = this.state.name.trim();\n    let isValid = true;\n    let errMessage = '';\n    if (!newName) {\n      isValid = false;\n      errMessage = gettext('Name is required.');\n      return { isValid, errMessage };\n    }\n\n    if (newName.indexOf('/') > -1) {\n      isValid = false;\n      errMessage = gettext('Name should not include ' + '\\'/\\'' + '.');\n      return { isValid, errMessage };\n    }\n\n    return { isValid, errMessage };\n  };\n\n  render() {\n    return (\n      <div className=\"rename-container\">\n        <input\n          ref={this.inputRef}\n          value={this.state.name}\n          onChange={this.onChange}\n          onKeyDown={this.onKeyDown}\n        />\n      </div>\n    );\n  }\n}\n\nRename.propTypes = propTypes;\n\nexport default Rename;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter } from 'reactstrap';\nimport moment from 'moment';\nimport { gettext, siteRoot } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../toast';\n\nconst propTypes = {\n  repoID: PropTypes.string.isRequired,\n  currentTag: PropTypes.object.isRequired,\n  toggleCancel: PropTypes.func.isRequired,\n  onClose: PropTypes.func.isRequired,\n  updateUsedRepoTags: PropTypes.func,\n  onFileTagChanged: PropTypes.func,\n  shareLinkToken: PropTypes.string,\n  enableFileDownload: PropTypes.bool\n};\n\nclass ListTaggedFilesDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      taggedFileList: [],\n    };\n  }\n\n  onFileTagChanged = (TaggedFile) => {\n    const path = TaggedFile.parent_path;\n    const dirent = {name: TaggedFile.filename};\n    let direntPath = path === '/' ? path + TaggedFile.filename : path + '/' + TaggedFile.filename;\n    this.props.onFileTagChanged(dirent, direntPath);\n  };\n\n  onDeleteTaggedFile = (taggedFile) => {\n    let repoID = this.props.repoID;\n    let fileTagID = taggedFile.file_tag_id;\n    seafileAPI.deleteFileTag(repoID, fileTagID).then(res => {\n      this.getTaggedFiles();\n      this.props.updateUsedRepoTags();\n      if ((this.props.onFileTagChanged) && !taggedFile.file_deleted) this.onFileTagChanged(taggedFile);\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  componentDidMount() {\n    this.getTaggedFiles();\n  }\n\n  getTaggedFiles = () => {\n    let { repoID, currentTag, shareLinkToken } = this.props;\n    let request = shareLinkToken ?\n      seafileAPI.getShareLinkTaggedFiles(shareLinkToken, currentTag.id) :\n      seafileAPI.listTaggedFiles(repoID, currentTag.id);\n    request.then(res => {\n      let taggedFileList = [];\n      res.data.tagged_files !== undefined &&\n      res.data.tagged_files.forEach(file => {\n        let taggedFile = file;\n        taggedFileList.push(taggedFile);\n      });\n      this.setState({\n        taggedFileList: taggedFileList,\n      });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  render() {\n    let taggedFileList = this.state.taggedFileList;\n    return (\n      <Modal isOpen={true} style={{maxWidth: '678px'}}>\n        <ModalHeader toggle={this.props.onClose}>{gettext('Tagged Files')}</ModalHeader>\n        <ModalBody className=\"dialog-list-container\">\n          <table>\n            <thead>\n              <tr>\n                <th width='50%' className=\"ellipsis\">{gettext('Name')}</th>\n                <th width='20%'>{gettext('Size')}</th>\n                <th width='22%'>{gettext('Last Update')}</th>\n                <th width='8%'></th>\n              </tr>\n            </thead>\n            <tbody>\n              {taggedFileList.map((taggedFile, index) => {\n                return (\n                  <TaggedFile\n                    key={index}\n                    repoID={this.props.repoID}\n                    taggedFile={taggedFile}\n                    onDeleteTaggedFile={this.onDeleteTaggedFile}\n                    shareLinkToken={this.props.shareLinkToken}\n                    enableFileDownload={this.props.enableFileDownload}\n                  />\n                );\n              })}\n            </tbody>\n          </table>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.props.toggleCancel}>{gettext('Close')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nListTaggedFilesDialog.propTypes = propTypes;\n\nexport default ListTaggedFilesDialog;\n\nconst TaggedFilePropTypes = {\n  repoID: PropTypes.string.isRequired,\n  taggedFile: PropTypes.object,\n  onDeleteTaggedFile: PropTypes.func.isRequired,\n  shareLinkToken: PropTypes.string,\n  enableFileDownload: PropTypes.bool\n};\n\nclass TaggedFile extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = ({\n      active: false,\n    });\n  }\n\n  onMouseEnter = () => {\n    this.setState({\n      active: true\n    });\n  };\n\n  onMouseLeave = () => {\n    this.setState({\n      active: false\n    });\n  };\n\n  deleteFile = (e) => {\n    e.preventDefault();\n    this.props.onDeleteTaggedFile(this.props.taggedFile);\n  };\n\n  render() {\n    const { taggedFile, shareLinkToken, enableFileDownload } = this.props;\n\n    let path = taggedFile.parent_path ? Utils.joinPath(taggedFile.parent_path, taggedFile.filename) : '';\n    let href = shareLinkToken ?\n      siteRoot + 'd/' + shareLinkToken + '/files/?p=' + Utils.encodePath(path) :\n      siteRoot + 'lib/' + this.props.repoID + '/file' + Utils.encodePath(path);\n\n    return (\n      <tr onMouseEnter={this.onMouseEnter} onMouseLeave={this.onMouseLeave} onFocus={this.onMouseEnter}>\n        {taggedFile.file_deleted ?\n          <Fragment>\n            <td colSpan='3' className=\"name\">{taggedFile.filename}{' '}\n              <span style={{color:'red'}}>{gettext('deleted')}</span>\n            </td>\n          </Fragment>\n          :\n          <Fragment>\n            <td><a href={href} target='_blank' className=\"d-inline-block w-100 ellipsis\" title={taggedFile.filename} rel=\"noreferrer\">{taggedFile.filename}</a></td>\n            <td>{Utils.bytesToSize(taggedFile.size)}</td>\n            <td>{moment.unix(taggedFile.mtime).fromNow()}</td>\n          </Fragment>\n        }\n        <td>\n          {!shareLinkToken &&\n            <a href=\"#\" role=\"button\" aria-label={gettext('Delete')} title={gettext('Delete')} className={`action-icon sf2-icon-x3${this.state.active ? '' : ' invisible'}`} onClick={this.deleteFile}></a>\n          }\n          {(shareLinkToken && enableFileDownload) &&\n            <a className={`action-icon sf2-icon-download${this.state.active ? '' : ' invisible'}`} href={`${href}&dl=1`} title={gettext('Download')} aria-label={gettext('Download')}></a>\n          }\n        </td>\n      </tr>\n    );\n  }\n}\n\nTaggedFile.propTypes = TaggedFilePropTypes;\n","import moment from 'moment';\n\nclass Draft {\n\n  constructor(item) {\n    this.created = item.created_at;\n    this.createdStr = moment((new Date(item.created_at)).getTime()).format('YYYY-MM-DD HH:mm');\n    this.id = item.id;\n    this.ownerNickname = item.owner_nickname;\n    this.originRepoID = item.origin_repo_id;\n    this.draftFilePath = item.draft_file_path;\n  }\n}\n\nexport default Draft;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter } from 'reactstrap';\nimport { gettext, siteRoot } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport moment from 'moment';\nimport editorUtilities from '../../utils/editor-utilities';\nimport toaster from '../../components/toast';\nimport { Utils } from '../../utils/utils';\nimport Draft from '../../models/draft';\n\nconst propTypes = {\n  repoID: PropTypes.string.isRequired,\n  toggle: PropTypes.func.isRequired,\n};\n\nclass ListRepoDraftsDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      drafts: [],\n    };\n  }\n\n  componentDidMount() {\n    seafileAPI.listRepoDrafts(this.props.repoID).then(res => {\n      let drafts = res.data.drafts.map(item => {\n        let draft = new Draft(item);\n        return draft;\n      });\n      this.setState({\n        drafts: drafts\n      });\n    });\n  }\n\n  onDeleteDraftItem = (draft) => {\n    editorUtilities.deleteDraft(draft.id).then(() => {\n      let drafts = this.state.drafts.filter(item => {\n        return item.id !== draft.id;\n      });\n      this.setState({drafts: drafts});\n      let msg = gettext('Successfully deleted draft %(draft)s.');\n      msg = msg.replace('%(draft)s', draft.draftFilePath);\n      toaster.success(msg);\n    }).catch(() => {\n      let msg = gettext('Failed to delete draft %(draft)s.');\n      msg = msg.replace('%(draft)s', draft.draftFilePath);\n      toaster.danger(msg);\n    });\n  };\n\n  toggle = () => {\n    this.props.toggle();\n  };\n\n  render() {\n    return (\n      <Modal isOpen={true}>\n        <ModalHeader toggle={this.toggle}>{gettext('Drafts')}</ModalHeader>\n        <ModalBody className=\"dialog-list-container\">\n          <table>\n            <thead>\n              <tr>\n                <th width='50%' className=\"ellipsis\">{gettext('Name')}</th>\n                <th width='20%'>{gettext('Owner')}</th>\n                <th width='20%'>{gettext('Last Update')}</th>\n                <th width='10%'></th>\n              </tr>\n            </thead>\n            <tbody>\n              {this.state.drafts.map((item, index) => {\n                return (\n                  <DraftItem\n                    key={index}\n                    draftItem={item}\n                    onDeleteDraftItem={this.onDeleteDraftItem}\n                  />\n                );\n              })}\n            </tbody>\n          </table>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.toggle}>{gettext('Close')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nListRepoDraftsDialog.propTypes = propTypes;\n\nexport default ListRepoDraftsDialog;\n\nconst DraftItemPropTypes = {\n  draftItem: PropTypes.object,\n  onDeleteDraftItem: PropTypes.func.isRequired,\n};\n\nclass DraftItem extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = ({\n      active: false,\n    });\n  }\n\n  onMouseEnter = () => {\n    this.setState({\n      active: true\n    });\n  };\n\n  onMouseLeave = () => {\n    this.setState({\n      active: false\n    });\n  };\n\n  render() {\n    const draftItem = this.props.draftItem;\n    let href = siteRoot + 'drafts/' + draftItem.id + '/';\n    let className = this.state.active ? 'action-icon sf2-icon-x3' : 'action-icon vh sf2-icon-x3';\n    return (\n      <tr onMouseEnter={this.onMouseEnter} onMouseLeave={this.onMouseLeave}>\n        <td className=\"name\">\n          <a href={href} target='_blank' rel=\"noreferrer\">{Utils.getFileName(draftItem.draftFilePath)}</a>\n        </td>\n        <td>{draftItem.ownerNickname}</td>\n        <td>{moment(draftItem.createdStr).fromNow()}</td>\n        <td>\n          <i className={className} onClick={this.props.onDeleteDraftItem.bind(this, draftItem)}></i>\n        </td>\n      </tr>\n    );\n  }\n}\n\nDraftItem.propTypes = DraftItemPropTypes;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport ModalPortal from './modal-portal';\nimport ListTaggedFilesDialog from './dialog/list-taggedfiles-dialog';\nimport ListRepoDraftsDialog from './dialog/list-repo-drafts-dialog';\n\nimport '../css/repo-info-bar.css';\n\nconst propTypes = {\n  repoID: PropTypes.string.isRequired,\n  usedRepoTags: PropTypes.array.isRequired,\n  draftCounts: PropTypes.number,\n  updateUsedRepoTags: PropTypes.func,\n  onFileTagChanged: PropTypes.func,\n  className: PropTypes.string,\n  shareLinkToken: PropTypes.string,\n  enableFileDownload: PropTypes.bool\n};\n\nclass RepoInfoBar extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      currentTag: null,\n      isListTaggedFileShow: false,\n      showRepoDrafts: false\n    };\n  }\n\n  onListTaggedFiles = (currentTag) => {\n    this.setState({\n      currentTag: currentTag,\n      isListTaggedFileShow: !this.state.isListTaggedFileShow\n    });\n  };\n\n  onCloseDialog = () => {\n    this.setState({\n      isListTaggedFileShow: false\n    });\n  };\n\n  toggleDrafts = () => {\n    this.setState({\n      showRepoDrafts: !this.state.showRepoDrafts\n    });\n  };\n\n  render() {\n    let { repoID, usedRepoTags, draftCounts, className } = this.props;\n\n    // to be compatible with the existing code\n    if (draftCounts === undefined) {\n      draftCounts = 0;\n    }\n\n    return (\n      <div className={`repo-info-bar ${className ? className : ''}`}>\n        {usedRepoTags.length > 0 && (\n          <ul className=\"used-tag-list\">\n            {usedRepoTags.map((usedRepoTag) => {\n              return (\n                <li key={usedRepoTag.id} className=\"used-tag-item\">\n                  <span className=\"used-tag\" style={{backgroundColor:usedRepoTag.color}}></span>\n                  <span className=\"used-tag-name\" title={usedRepoTag.name}>{usedRepoTag.name}</span>\n                  <button type=\"button\" className=\"used-tag-files border-0 bg-transparent\" onClick={this.onListTaggedFiles.bind(this, usedRepoTag)}>\n                    {usedRepoTag.fileCount > 1 ? usedRepoTag.fileCount + ' files' : usedRepoTag.fileCount + ' file'}\n                  </button>\n                </li>\n              );\n            })}\n          </ul>\n        )}\n        {/*<div className={usedRepoTags.length > 0 ? 'file-info-list mt-1' : 'file-info-list'}>\n          {draftCounts > 0 &&\n            <span className=\"file-info\">\n              <span className=\"info-icon sf2-icon-drafts\"></span>\n              <span className=\"used-tag-name\">{gettext('draft')}</span>\n              <button type=\"button\" className=\"used-tag-files border-0 bg-transparent\" onClick={this.toggleDrafts}>\n                {draftCounts > 1 ? draftCounts + ' files' : draftCounts + ' file'}\n              </button>\n            </span>\n          }\n        </div>*/}\n        {this.state.isListTaggedFileShow && (\n          <ModalPortal>\n            <ListTaggedFilesDialog\n              repoID={repoID}\n              currentTag={this.state.currentTag}\n              onClose={this.onCloseDialog}\n              toggleCancel={this.onListTaggedFiles}\n              updateUsedRepoTags={this.props.updateUsedRepoTags}\n              onFileTagChanged={this.props.onFileTagChanged}\n              shareLinkToken={this.props.shareLinkToken}\n              enableFileDownload={this.props.enableFileDownload}\n            />\n          </ModalPortal>\n        )}\n\n        {this.state.showRepoDrafts && (\n          <ModalPortal>\n            <ListRepoDraftsDialog\n              toggle={this.toggleDrafts}\n              repoID={this.props.repoID}\n            />\n          </ModalPortal>\n        )}\n\n      </div>\n    );\n  }\n}\n\nRepoInfoBar.propTypes = propTypes;\n\nexport default RepoInfoBar;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { permission } from '../../utils/constants';\nimport TextTranslation from '../../utils/text-translation';\nimport ItemDropdownMenu from '../dropdown-menu/item-dropdown-menu';\nimport { Utils } from '../../utils/utils';\n\nconst propTypes = {\n  userPerm: PropTypes.string,\n  node: PropTypes.object.isRequired,\n  currentPath: PropTypes.string.isRequired,\n  paddingLeft: PropTypes.number.isRequired,\n  isNodeMenuShow: PropTypes.bool.isRequired,\n  isItemFreezed: PropTypes.bool.isRequired,\n  onNodeClick: PropTypes.func.isRequired,\n  onNodeExpanded: PropTypes.func.isRequired,\n  onNodeCollapse: PropTypes.func.isRequired,\n  onNodeDragStart: PropTypes.func.isRequired,\n  freezeItem: PropTypes.func.isRequired,\n  unfreezeItem: PropTypes.func.isRequired,\n  onMenuItemClick: PropTypes.func,\n  onNodeDragMove: PropTypes.func,\n  onNodeDrop: PropTypes.func,\n  handleContextClick: PropTypes.func.isRequired,\n  onNodeDragEnter: PropTypes.func.isRequired,\n  onNodeDragLeave:PropTypes.func.isRequired,\n};\n\nclass TreeNodeView extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isHighlight: false,\n      isShowOperationMenu: false,\n      isNodeDropShow: false,\n    };\n    const { userPerm } = props;\n    this.canDrag = userPerm === 'rw';\n    const { isCustomPermission, customPermission } = Utils.getUserPermission(userPerm);\n    if (isCustomPermission) {\n      const { modify } = customPermission.permission;\n      this.canDrag = modify;\n    }\n  }\n\n  componentWillReceiveProps(nextProps) {\n    if (!nextProps.isItemFreezed) {\n      this.setState({\n        isShowOperationMenu: false,\n        isHighlight: false,\n      });\n    }\n  }\n\n  onMouseEnter = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        isShowOperationMenu: true,\n        isHighlight: true,\n      });\n    }\n  };\n\n  onMouseOver = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        isShowOperationMenu: true,\n        isHighlight: true,\n      });\n    }\n  };\n\n  onMouseLeave = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        isShowOperationMenu: false,\n        isHighlight: false,\n      });\n    }\n  };\n\n  onNodeClick = () => {\n    const { node } = this.props;\n    const { object } = node;\n    if (object.isDir()) {\n      this.props.onNodeClick(this.props.node);\n      return;\n    }\n    const { isCustomPermission, customPermission } = Utils.getUserPermission(object.permission);\n    if (isCustomPermission) {\n      const { preview: canPreview, modify: canModify } = customPermission.permission;\n      if (!canPreview && !canModify) return;\n    }\n    this.props.onNodeClick(this.props.node);\n  };\n\n  onLoadToggle = (e) => {\n    e.stopPropagation();\n    let { node } = this.props;\n    if (node.isExpanded) {\n      this.props.onNodeCollapse(node);\n    } else {\n      this.props.onNodeExpanded(node);\n    }\n  };\n\n  onNodeDragStart = (e) => {\n    if (Utils.isIEBrower() || !this.canDrag) {\n      return false;\n    }\n    this.props.onNodeDragStart(e, this.props.node);\n  };\n\n  onNodeDragEnter = (e) => {\n    if (Utils.isIEBrower() || !this.canDrag) {\n      return false;\n    }\n    if (this.props.node.object.type === 'dir') {\n      this.setState({isNodeDropShow: true});\n    }\n    this.props.onNodeDragEnter(e, this.props.node);\n  };\n\n  onNodeDragMove = (e) => {\n    if (Utils.isIEBrower() || !this.canDrag) {\n      return false;\n    }\n    this.props.onNodeDragMove(e);\n  };\n\n  onNodeDragLeave = (e) => {\n    if (Utils.isIEBrower() || !this.canDrag) {\n      return false;\n    }\n    this.setState({isNodeDropShow: false});\n    this.props.onNodeDragLeave(e, this.props.node);\n  };\n\n  onNodeDrop = (e) => {\n    if (Utils.isIEBrower() || !this.canDrag) {\n      return false;\n    }\n    e.stopPropagation();\n    this.setState({isNodeDropShow: false});\n    this.props.onNodeDrop(e, this.props.node);\n  };\n\n  unfreezeItem = () => {\n    this.setState({isShowOperationMenu: false});\n    this.props.unfreezeItem();\n  };\n\n  onMenuItemClick = (operation, event, node) => {\n    this.props.onMenuItemClick(operation, node);\n  };\n\n  onItemMouseDown = (event) => {\n    event.stopPropagation();\n    if (event.button === 2) {\n      return;\n    }\n  };\n\n  onItemContextMenu = (event) => {\n    this.handleContextClick(event);\n  };\n\n  handleContextClick = (event) => {\n    this.props.handleContextClick(event, this.props.node);\n    this.setState({isShowOperationMenu: false});\n  };\n\n  getNodeTypeAndIcon = () => {\n    let { node } = this.props;\n    let icon = '';\n    let type = '';\n    if (node.object.type === 'dir') {\n      icon = <i className=\"far fa-folder\"></i>;\n      type = 'dir';\n    } else {\n      let index = node.object.name.lastIndexOf('.');\n      if (index === -1) {\n        icon = <i className=\"far fa-file\"></i>;\n        type = 'file';\n      } else {\n        let suffix = node.object.name.slice(index).toLowerCase();\n        if (suffix === '.png' || suffix === '.jpg' || suffix === '.jpeg' || suffix === '.gif' || suffix === '.bmp') {\n          icon = <i className=\"far fa-image\"></i>;\n          type = 'image';\n        }\n        else if (suffix === '.md' || suffix === '.markdown') {\n          icon = <i className=\"far fa-file-alt\"></i>;\n          type = 'file';\n        }\n        else {\n          icon = <i className=\"far fa-file\"></i>;\n          type = 'file';\n        }\n      }\n    }\n    return {icon, type};\n  };\n\n  calculateMenuList = (node) => {\n    let { NEW_FOLDER, NEW_FILE, COPY, MOVE, RENAME, DELETE, OPEN_VIA_CLIENT} =  TextTranslation;\n\n    let menuList = [RENAME, DELETE, COPY, MOVE, OPEN_VIA_CLIENT];\n    if (node.object.type === 'dir') {\n      menuList = [NEW_FOLDER, NEW_FILE, COPY, MOVE, RENAME, DELETE];\n    }\n\n    const { userPerm } = this.props;\n    const { isCustomPermission, customPermission } = Utils.getUserPermission(userPerm);\n    if (!isCustomPermission) {\n      return menuList;\n    }\n\n    menuList = [];\n    const { create: canCreate, modify: canModify, delete: canDelete, copy: canCopy } = customPermission.permission;\n    if (node.object.type === 'dir') {\n      canCreate && menuList.push(NEW_FOLDER, NEW_FILE);\n    }\n\n    canCopy && menuList.push(COPY);\n    canModify && menuList.push(MOVE, RENAME);\n    canDelete && menuList.push(DELETE);\n\n    if (node.object.type !== 'dir') {\n      menuList.push(OPEN_VIA_CLIENT);\n    }\n\n    return menuList;\n  };\n\n  renderChildren = () => {\n    let { node, paddingLeft } = this.props;\n    if (!node.hasChildren()) {\n      return '';\n    }\n    return (\n      <div className=\"children\" style={{paddingLeft: paddingLeft}}>\n        {node.children.map(item => {\n          return (\n            <TreeNodeView\n              key={item.path}\n              node={item}\n              paddingLeft={paddingLeft}\n              userPerm={this.props.userPerm}\n              currentPath={this.props.currentPath}\n              isNodeMenuShow={this.props.isNodeMenuShow}\n              isItemFreezed={this.props.isItemFreezed}\n              onNodeClick={this.props.onNodeClick}\n              onNodeCollapse={this.props.onNodeCollapse}\n              onNodeExpanded={this.props.onNodeExpanded}\n              freezeItem={this.props.freezeItem}\n              onMenuItemClick={this.props.onMenuItemClick}\n              unfreezeItem={this.unfreezeItem}\n              onNodeDragStart={this.props.onNodeDragStart}\n              onNodeDragMove={this.props.onNodeDragMove}\n              onNodeDrop={this.props.onNodeDrop}\n              onNodeDragEnter={this.props.onNodeDragEnter}\n              onNodeDragLeave={this.props.onNodeDragLeave}\n              handleContextClick={this.props.handleContextClick}\n            />\n          );\n        })}\n      </div>\n    );\n  };\n\n  render() {\n    let { currentPath, node, isNodeMenuShow, userPerm } = this.props;\n    let { type, icon } = this.getNodeTypeAndIcon();\n    let hlClass = this.state.isHighlight ? 'tree-node-inner-hover ' : '';\n    if (node.path === currentPath) {\n      hlClass = 'tree-node-hight-light';\n    }\n\n    const { isCustomPermission } = Utils.getUserPermission(userPerm);\n    return (\n      <div className=\"tree-node\">\n        <div\n          type={type}\n          className={`tree-node-inner text-nowrap ${hlClass} ${node.path === '/'? 'hide': ''} ${this.state.isNodeDropShow ? 'tree-node-drop' : ''}`}\n          title={node.object.name}\n          onMouseEnter={this.onMouseEnter}\n          onMouseOver={this.onMouseOver}\n          onMouseLeave={this.onMouseLeave}\n          onMouseDown={this.onItemMouseDown}\n          onContextMenu={this.onItemContextMenu}\n          onClick={this.onNodeClick}\n        >\n          <div className=\"tree-node-text\" draggable={this.canDrag} onDragStart={this.onNodeDragStart} onDragEnter={this.onNodeDragEnter} onDragLeave={this.onNodeDragLeave} onDragOver={this.onNodeDragMove} onDrop={this.onNodeDrop}>{node.object.name}</div>\n          <div className=\"left-icon\">\n            {type === 'dir' && (!node.isLoaded ||  (node.isLoaded && node.hasChildren())) && (\n              <i\n                className={`folder-toggle-icon fa ${node.isExpanded ? 'fa-caret-down' : 'fa-caret-right'}`}\n                onMouseDown={e => e.stopPropagation()}\n                onClick={this.onLoadToggle}\n              ></i>\n            )}\n            <i className=\"tree-node-icon\">{icon}</i>\n          </div>\n          {isNodeMenuShow && (\n            <div className=\"right-icon\">\n              {((userPerm === 'rw' || permission || isCustomPermission) && this.state.isShowOperationMenu) && (\n                <ItemDropdownMenu\n                  item={this.props.node}\n                  toggleClass={'fas fa-ellipsis-v'}\n                  getMenuList={this.calculateMenuList}\n                  onMenuItemClick={this.onMenuItemClick}\n                  freezeItem={this.props.freezeItem}\n                  unfreezeItem={this.unfreezeItem}\n                />\n              )}\n            </div>\n          )}\n        </div>\n        {node.isExpanded && this.renderChildren()}\n      </div>\n    );\n  }\n}\n\nTreeNodeView.propTypes = propTypes;\n\nexport default TreeNodeView;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport TextTranslation from '../../utils/text-translation';\nimport TreeNodeView from './tree-node-view';\nimport ContextMenu from '../context-menu/context-menu';\nimport { hideMenu, showMenu } from '../context-menu/actions';\nimport { Utils } from '../../utils/utils';\n\nconst propTypes = {\n  userPerm: PropTypes.string,\n  isNodeMenuShow: PropTypes.bool.isRequired,\n  treeData: PropTypes.object.isRequired,\n  currentPath: PropTypes.string.isRequired,\n  onMenuItemClick: PropTypes.func,\n  onNodeClick: PropTypes.func.isRequired,\n  onNodeExpanded: PropTypes.func.isRequired,\n  onNodeCollapse: PropTypes.func.isRequired,\n  onItemMove: PropTypes.func,\n  currentRepoInfo: PropTypes.object,\n  selectedDirentList: PropTypes.array,\n  onItemsMove: PropTypes.func,\n  posX: PropTypes.number,\n  posY: PropTypes.number,\n};\n\nconst PADDING_LEFT = 20;\n\nclass TreeView extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isItemFreezed: false,\n      isTreeViewDropTipShow: false,\n    };\n    const { userPerm } = props;\n    this.canDrop = userPerm === 'rw';\n    const { isCustomPermission, customPermission } = Utils.getUserPermission(userPerm);\n    if (isCustomPermission) {\n      const { modify } = customPermission.permission;\n      this.canDrop = modify;\n    }\n  }\n\n  onItemMove = (repo, dirent, selectedPath, currentPath) => {\n    this.props.onItemMove(repo, dirent, selectedPath, currentPath);\n  };\n\n  onNodeDragStart = (e, node) => {\n    if (Utils.isIEBrower()) {\n      return false;\n    }\n    let dragStartNodeData = {nodeDirent: node.object, nodeParentPath: node.parentNode.path, nodeRootPath: node.path};\n    dragStartNodeData = JSON.stringify(dragStartNodeData);\n\n    e.dataTransfer.effectAllowed = 'move';\n    e.dataTransfer.setData('applicaiton/drag-item-info', dragStartNodeData);\n  };\n\n  onNodeDragEnter = (e, node) => {\n    if (Utils.isIEBrower() || !this.canDrop) {\n      return false;\n    }\n    e.persist();\n    if (e.target.className === 'tree-view tree ') {\n      this.setState({\n        isTreeViewDropTipShow: true,\n      });\n    }\n  };\n\n  onNodeDragMove = (e) => {\n    if (Utils.isIEBrower() || !this.canDrop) {\n      return false;\n    }\n    e.preventDefault();\n    e.dataTransfer.dropEffect = 'move';\n  };\n\n  onNodeDragLeave = (e, node) => {\n    if (Utils.isIEBrower() || !this.canDrop) {\n      return false;\n    }\n    if (e.target.className === 'tree-view tree tree-view-drop') {\n      this.setState({\n        isTreeViewDropTipShow: false,\n      });\n    }\n  };\n\n  onContainerClick = (event) => {\n    hideMenu();\n  };\n\n  onNodeClick = (node) => {\n    hideMenu();\n    this.props.onNodeClick(node);\n  };\n\n  onNodeDrop = (e, node) => {\n    if (Utils.isIEBrower() || !this.canDrop) {\n      return false;\n    }\n    if (e.dataTransfer.files.length) { // uploaded files\n      return;\n    }\n    let dragStartNodeData = e.dataTransfer.getData('applicaiton/drag-item-info');\n    dragStartNodeData = JSON.parse(dragStartNodeData);\n\n    let {nodeDirent, nodeParentPath, nodeRootPath} = dragStartNodeData;\n    let dropNodeData = node;\n\n    if (Array.isArray(dragStartNodeData)) { //move items\n      if (!dropNodeData) { //move items to root\n        if (dragStartNodeData[0].nodeParentPath === '/') {\n          this.setState({isTreeViewDropTipShow: false});\n          return;\n        }\n        this.props.onItemsMove(this.props.currentRepoInfo, '/');\n        this.setState({isTreeViewDropTipShow: false});\n        return;\n      }\n      this.onMoveItems(dragStartNodeData, dropNodeData, this.props.currentRepoInfo, dropNodeData.path);\n      return;\n    }\n\n    if (!dropNodeData) {\n      if (nodeParentPath === '/') {\n        this.setState({isTreeViewDropTipShow: false});\n        return;\n      }\n      this.onItemMove(this.props.currentRepoInfo, nodeDirent, '/', nodeParentPath);\n      this.setState({isTreeViewDropTipShow: false});\n      return;\n    }\n\n    if (dropNodeData.object.type !== 'dir') {\n      return;\n    }\n\n    if (nodeParentPath === dropNodeData.path) {\n      return;\n    }\n\n    // copy the dirent to itself. eg: A/B -> A/B\n    if (nodeParentPath === dropNodeData.parentNode.path) {\n      if (dropNodeData.object.name === nodeDirent.name) {\n        return;\n      }\n    }\n\n    // copy the dirent to it's child. eg: A/B -> A/B/C\n    if (dropNodeData.object.type === 'dir' && nodeDirent.type === 'dir') {\n      if (dropNodeData.parentNode.path !== nodeParentPath) {\n        let paths = Utils.getPaths(dropNodeData.path);\n        if (paths.includes(nodeRootPath)) {\n          return;\n        }\n      }\n    }\n\n    this.onItemMove(this.props.currentRepoInfo, nodeDirent, dropNodeData.path, nodeParentPath);\n  };\n\n  onMoveItems = (dragStartNodeData, dropNodeData, destRepo, destDirentPath) => {\n    let direntPaths = [];\n    let paths = Utils.getPaths(destDirentPath);\n    dragStartNodeData.forEach(dirent => {\n      let path = dirent.nodeRootPath;\n      direntPaths.push(path);\n    });\n\n    if (dropNodeData.object.type !== 'dir') {\n      return;\n    }\n\n    // move dirents to one of them. eg: A/B, A/C -> A/B\n    if (direntPaths.some(direntPath => { return direntPath === destDirentPath;})) {\n      return;\n    }\n\n    // move dirents to current path\n    if (dragStartNodeData[0].nodeParentPath && dragStartNodeData[0].nodeParentPath === dropNodeData.path ) {\n      return;\n    }\n\n    // move dirents to one of their child. eg: A/B, A/D -> A/B/C\n    let isChildPath = direntPaths.some(direntPath => {\n      return paths.includes(direntPath);\n    });\n    if (isChildPath) {\n      return;\n    }\n\n    this.props.onItemsMove(destRepo, destDirentPath);\n  };\n\n  freezeItem = () => {\n    this.setState({isItemFreezed: true});\n  };\n\n  unfreezeItem = () => {\n    this.setState({isItemFreezed: false});\n  };\n\n  onMenuItemClick = (operation, node) => {\n    this.props.onMenuItemClick(operation, node);\n    hideMenu();\n  };\n\n  onMouseDown = (event) => {\n    event.stopPropagation();\n    if (event.button === 2) {\n      return;\n    }\n  };\n\n  onContextMenu = (event) => {\n    event.preventDefault();\n\n    let currentRepoInfo = this.props.currentRepoInfo;\n    if (currentRepoInfo.permission !== 'admin' && currentRepoInfo.permission !== 'rw') {\n      return '';\n    }\n    this.handleContextClick(event);\n  };\n\n  handleContextClick = (event, node) => {\n    event.preventDefault();\n    event.stopPropagation();\n\n    if (!this.props.isNodeMenuShow) {\n      return;\n    }\n\n    let x = event.clientX || (event.touches && event.touches[0].pageX);\n    let y = event.clientY || (event.touches && event.touches[0].pageY);\n\n    if (this.props.posX) {\n      x -= this.props.posX;\n    }\n    if (this.props.posY) {\n      y -= this.props.posY;\n    }\n\n    hideMenu();\n\n    let menuList = this.getMenuList(node);\n\n    let showMenuConfig = {\n      id: 'tree-node-contextmenu',\n      position: { x, y },\n      target: event.target,\n      currentObject: node,\n      menuList: menuList,\n    };\n\n    showMenu(showMenuConfig);\n  };\n\n  getMenuList = (node) => {\n    let menuList = [];\n\n    let { NEW_FOLDER, NEW_FILE, COPY, MOVE, RENAME, DELETE, OPEN_VIA_CLIENT } = TextTranslation;\n\n    if (!node) {\n      return [NEW_FOLDER, NEW_FILE];\n    }\n\n    if (node.object.type === 'dir') {\n      menuList = [NEW_FOLDER, NEW_FILE, COPY, MOVE, RENAME, DELETE];\n    } else {\n      menuList = [RENAME, DELETE, COPY, MOVE, OPEN_VIA_CLIENT];\n    }\n\n    const { userPerm } = this.props;\n    const { isCustomPermission, customPermission } = Utils.getUserPermission(userPerm);\n    if (!isCustomPermission) {\n      return menuList;\n    }\n\n    menuList = [];\n\n    const { create: canCreate, modify: canModify, delete: canDelete, copy: canCopy } = customPermission.permission;\n    if (!node) {\n      canCreate && menuList.push(NEW_FOLDER, NEW_FILE);\n      return menuList;\n    }\n\n    if (node.object.type === 'dir') {\n      canCreate && menuList.push(NEW_FOLDER, NEW_FILE);\n    }\n\n    canCopy && menuList.push(COPY);\n    canModify && menuList.push(MOVE, RENAME);\n    canDelete && menuList.push(DELETE);\n\n    if (node.object.type !== 'dir') {\n      menuList.push(OPEN_VIA_CLIENT);\n    }\n\n    return menuList;\n  };\n\n  onShowMenu = () => {\n    this.freezeItem();\n  };\n\n  onHideMenu = () => {\n    this.unfreezeItem();\n  };\n\n  render() {\n    return (\n      <div\n        className={`tree-view tree ${(this.state.isTreeViewDropTipShow && this.canDrop) ? 'tree-view-drop' : ''}`}\n        onDrop={this.onNodeDrop}\n        onDragEnter={this.onNodeDragEnter}\n        onDragLeave={this.onNodeDragLeave}\n        onMouseDown={this.onMouseDown}\n        onContextMenu={this.onContextMenu}\n        onClick={this.onContainerClick}\n      >\n        <TreeNodeView\n          userPerm={this.props.userPerm}\n          node={this.props.treeData.root}\n          currentPath={this.props.currentPath}\n          paddingLeft={PADDING_LEFT}\n          isNodeMenuShow={this.props.isNodeMenuShow}\n          isItemFreezed={this.state.isItemFreezed}\n          onNodeClick={this.onNodeClick}\n          onMenuItemClick={this.props.onMenuItemClick}\n          onNodeExpanded={this.props.onNodeExpanded}\n          onNodeCollapse={this.props.onNodeCollapse}\n          onNodeDragStart={this.onNodeDragStart}\n          freezeItem={this.freezeItem}\n          unfreezeItem={this.unfreezeItem}\n          onNodeDragMove={this.onNodeDragMove}\n          onNodeDrop={this.onNodeDrop}\n          onNodeDragEnter={this.onNodeDragEnter}\n          onNodeDragLeave={this.onNodeDragLeave}\n          handleContextClick={this.handleContextClick}\n        />\n        <ContextMenu\n          id={'tree-node-contextmenu'}\n          onMenuItemClick={this.onMenuItemClick}\n          onHideMenu={this.onHideMenu}\n          onShowMenu={this.onShowMenu}\n        />\n      </div>\n    );\n  }\n}\n\nTreeView.propTypes = propTypes;\n\nexport default TreeView;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { MarkdownViewer } from '@seafile/seafile-editor';\nimport { gettext, repoID, slug, serviceURL, isPublicWiki, sharedToken, mediaUrl } from '../utils/constants';\nimport Loading from './loading';\nimport { Utils } from '../utils/utils';\n\nconst propTypes = {\n  children: PropTypes.object,\n  isFileLoading: PropTypes.bool.isRequired,\n  markdownContent: PropTypes.string.isRequired,\n  latestContributor: PropTypes.string.isRequired,\n  lastModified: PropTypes.string.isRequired,\n  onLinkClick: PropTypes.func.isRequired,\n  isWiki: PropTypes.bool,\n  isTOCShow: PropTypes.bool,\n  // for dir-column-file component(import repoID is undefined)\n  repoID: PropTypes.string,\n  path: PropTypes.string,\n};\n\nconst contentClass = 'wiki-page-content';\n\nclass WikiMarkdownViewer extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      activeTitleIndex: 0,\n    };\n    this.markdownContainer = React.createRef();\n    this.links = [];\n    this.titlesInfo = [];\n  }\n\n  componentDidMount() {\n    // Bind event when first loaded\n    this.links = document.querySelectorAll(`.${contentClass} a`);\n    this.links.forEach(link => {\n      link.addEventListener('click', this.onLinkClick);\n    });\n\n    this.getTitlesInfo();\n  }\n\n  componentWillReceiveProps(nextProps) {\n    if (this.props.markdownContent === nextProps.markdownContent) {\n      return;\n    }\n    // Unbound event when updating\n    this.links.forEach(link => {\n      link.removeEventListener('click', this.onLinkClick);\n    });\n  }\n\n  componentDidUpdate() {\n    // Update completed, rebind event\n    this.links = document.querySelectorAll(`.${contentClass} a`);\n    this.links.forEach(link => {\n      link.addEventListener('click', this.onLinkClick);\n    });\n    if (this.titlesInfo.length === 0) {\n      this.getTitlesInfo();\n    }\n  }\n\n  componentWillUnmount() {\n    // Unbound events when the component is destroyed\n    this.links.forEach(link => {\n      link.removeEventListener('click', this.onLinkClick);\n    });\n  }\n\n  getTitlesInfo = () => {\n    let titlesInfo = [];\n    const titleDom = document.querySelectorAll('h1[id^=\"user-content\"]')[0];\n    if (titleDom) {\n      const id = titleDom.getAttribute('id');\n      let content = id && id.replace('user-content-', '');\n      content = content ? `${content} - ${slug}` : slug;\n      Utils.updateTabTitle(content);\n    }\n    let headingList = document.querySelectorAll('h2[id^=\"user-content\"], h3[id^=\"user-content\"]');\n    for (let i = 0; i < headingList.length; i++) {\n      titlesInfo.push(headingList[i].offsetTop);\n    }\n    this.titlesInfo = titlesInfo;\n  };\n\n  onLinkClick = (event) => {\n    event.preventDefault();\n    event.stopPropagation();\n    let link = '';\n    if (event.target.tagName !== 'A') {\n      let target = event.target.parentNode;\n      while (target.tagName !== 'A') {\n        target = target.parentNode;\n      }\n      link = target.href;\n    } else {\n      link = event.target.href;\n    }\n    this.props.onLinkClick(link);\n  };\n\n  onScrollHandler = () => {\n    const contentScrollTop = this.markdownContainer.current.scrollTop + 180;\n    let titlesLength = this.titlesInfo.length;\n    let activeTitleIndex;\n    if (contentScrollTop <= this.titlesInfo[0]) {\n      activeTitleIndex = 0;\n      this.setState({activeTitleIndex: activeTitleIndex});\n      return;\n    }\n    if (contentScrollTop > this.titlesInfo[titlesLength - 1]) {\n      activeTitleIndex = this.titlesInfo.length - 1;\n      this.setState({activeTitleIndex: activeTitleIndex});\n      return;\n    }\n    for (let i = 0; i < titlesLength; i++) {\n      if (contentScrollTop > this.titlesInfo[i]) {\n        continue;\n      } else {\n        activeTitleIndex = i - 1;\n        break;\n      }\n    }\n    this.setState({activeTitleIndex: activeTitleIndex});\n  };\n\n  changeInlineNode = (item) => {\n    let url, imagePath;\n\n    if (item.type == 'image' && isPublicWiki) { // change image url\n      url = item.data.src;\n      const re = new RegExp(serviceURL + '/lib/' + repoID +'/file.*raw=1');\n      // different repo\n      if (re.test(url)) {\n        // get image path\n        let index = url.indexOf('/file');\n        let index2 = url.indexOf('?');\n        imagePath = url.substring(index + 5, index2);\n      } else if (/^\\.\\.\\/*/.test(url) || /^\\.\\/*/.test(url)) {\n        const path = this.props.path;\n        const originalPath = path.slice(0, path.lastIndexOf('/')) + '/' + url;\n        imagePath = Utils.pathNormalize(originalPath);\n      } else {\n        return;\n      }\n      item.data.src = serviceURL + '/view-image-via-public-wiki/?slug=' + slug + '&path=' + imagePath;\n    } else if (item.type == 'link') { // change link url\n      url = item.data.href;\n      if (Utils.isInternalFileLink(url, repoID)) { // change file url\n        if (Utils.isInternalMarkdownLink(url, repoID)) {\n          let path = Utils.getPathFromInternalMarkdownLink(url, repoID);\n          // replace url\n          item.data.href = serviceURL + '/published/' + slug + path;\n        } else {\n          item.data.href = url.replace(/(.*)lib\\/([-0-9a-f]{36})\\/file(.*)/g, (match, p1, p2, p3) => {\n            return `${p1}d/${sharedToken}/files/?p=${p3}&dl=1`;\n          });\n        }\n      } else if (Utils.isInternalDirLink(url, repoID)) { // change dir url\n        let path = Utils.getPathFromInternalDirLink(url, repoID);\n        // replace url\n        item.data.href = serviceURL + '/published/' + slug + path;\n      }\n    }\n\n    return item;\n  };\n\n  modifyValueBeforeRender = (value) => {\n    let newNodes = Utils.changeMarkdownNodes(value, this.changeInlineNode);\n    return newNodes;\n  };\n\n  renderMarkdown = () => {\n    let isTOCShow = true;\n    if (this.props.isTOCShow === false) {\n      isTOCShow = false;\n    }\n    if (this.props.isWiki) {\n      return (\n        <MarkdownViewer\n          showTOC={isTOCShow}\n          scriptSource={mediaUrl + 'js/mathjax/tex-svg.js'}\n          markdownContent={this.props.markdownContent}\n          activeTitleIndex={this.state.activeTitleIndex}\n          modifyValueBeforeRender={this.modifyValueBeforeRender}\n        />\n      );\n    }\n\n    return (\n      <MarkdownViewer\n        showTOC={isTOCShow}\n        scriptSource={mediaUrl + 'js/mathjax/tex-svg.js'}\n        markdownContent={this.props.markdownContent}\n        activeTitleIndex={this.state.activeTitleIndex}\n      />\n    );\n  };\n\n  render() {\n    if (this.props.isFileLoading) {\n      return <Loading />;\n    }\n    // In dir-column-file repoID is one of props, width is 100%; In wiki-viewer repoID is not props, width isn't 100%\n    let contentClassName = `${this.props.repoID ? contentClass + ' w-100' : contentClass}`;\n    return (\n      <div ref={this.markdownContainer} className=\"wiki-page-container\" onScroll={this.onScrollHandler.bind(this)}>\n        <div className={contentClassName}>\n          {this.props.children}\n          {this.renderMarkdown()}\n          <p id=\"wiki-page-last-modified\">{gettext('Last modified by')} {this.props.latestContributor}, <span>{this.props.lastModified}</span></p>\n        </div>\n      </div>\n    );\n  }\n}\n\nconst defaultProps = {\n  isWiki: false,\n};\n\nWikiMarkdownViewer.propTypes = propTypes;\nMarkdownViewer.defaultProps = defaultProps;\n\nexport default WikiMarkdownViewer;\n","module.exports = after\n\nfunction after(count, callback, err_cb) {\n    var bail = false\n    err_cb = err_cb || noop\n    proxy.count = count\n\n    return (count === 0) ? callback() : proxy\n\n    function proxy(err, result) {\n        if (proxy.count <= 0) {\n            throw new Error('after called too many times')\n        }\n        --proxy.count\n\n        // after first error, rest are passed to err_cb\n        if (err) {\n            bail = true\n            callback(err)\n            // future error callbacks will go to error handler\n            callback = err_cb\n        } else if (proxy.count === 0 && !bail) {\n            callback(null, result)\n        }\n    }\n}\n\nfunction noop() {}\n","/**\n * An abstraction for slicing an arraybuffer even when\n * ArrayBuffer.prototype.slice is not supported\n *\n * @api public\n */\n\nmodule.exports = function(arraybuffer, start, end) {\n  var bytes = arraybuffer.byteLength;\n  start = start || 0;\n  end = end || bytes;\n\n  if (arraybuffer.slice) { return arraybuffer.slice(start, end); }\n\n  if (start < 0) { start += bytes; }\n  if (end < 0) { end += bytes; }\n  if (end > bytes) { end = bytes; }\n\n  if (start >= bytes || start >= end || bytes === 0) {\n    return new ArrayBuffer(0);\n  }\n\n  var abv = new Uint8Array(arraybuffer);\n  var result = new Uint8Array(end - start);\n  for (var i = start, ii = 0; i < end; i++, ii++) {\n    result[ii] = abv[i];\n  }\n  return result.buffer;\n};\n","\n/**\n * Expose `Backoff`.\n */\n\nmodule.exports = Backoff;\n\n/**\n * Initialize backoff timer with `opts`.\n *\n * - `min` initial timeout in milliseconds [100]\n * - `max` max timeout [10000]\n * - `jitter` [0]\n * - `factor` [2]\n *\n * @param {Object} opts\n * @api public\n */\n\nfunction Backoff(opts) {\n  opts = opts || {};\n  this.ms = opts.min || 100;\n  this.max = opts.max || 10000;\n  this.factor = opts.factor || 2;\n  this.jitter = opts.jitter > 0 && opts.jitter <= 1 ? opts.jitter : 0;\n  this.attempts = 0;\n}\n\n/**\n * Return the backoff duration.\n *\n * @return {Number}\n * @api public\n */\n\nBackoff.prototype.duration = function(){\n  var ms = this.ms * Math.pow(this.factor, this.attempts++);\n  if (this.jitter) {\n    var rand =  Math.random();\n    var deviation = Math.floor(rand * this.jitter * ms);\n    ms = (Math.floor(rand * 10) & 1) == 0  ? ms - deviation : ms + deviation;\n  }\n  return Math.min(ms, this.max) | 0;\n};\n\n/**\n * Reset the number of attempts.\n *\n * @api public\n */\n\nBackoff.prototype.reset = function(){\n  this.attempts = 0;\n};\n\n/**\n * Set the minimum duration\n *\n * @api public\n */\n\nBackoff.prototype.setMin = function(min){\n  this.ms = min;\n};\n\n/**\n * Set the maximum duration\n *\n * @api public\n */\n\nBackoff.prototype.setMax = function(max){\n  this.max = max;\n};\n\n/**\n * Set the jitter\n *\n * @api public\n */\n\nBackoff.prototype.setJitter = function(jitter){\n  this.jitter = jitter;\n};\n\n","/*\n * base64-arraybuffer\n * https://github.com/niklasvh/base64-arraybuffer\n *\n * Copyright (c) 2012 Niklas von Hertzen\n * Licensed under the MIT license.\n */\n(function(chars){\n  \"use strict\";\n\n  exports.encode = function(arraybuffer) {\n    var bytes = new Uint8Array(arraybuffer),\n    i, len = bytes.length, base64 = \"\";\n\n    for (i = 0; i < len; i+=3) {\n      base64 += chars[bytes[i] >> 2];\n      base64 += chars[((bytes[i] & 3) << 4) | (bytes[i + 1] >> 4)];\n      base64 += chars[((bytes[i + 1] & 15) << 2) | (bytes[i + 2] >> 6)];\n      base64 += chars[bytes[i + 2] & 63];\n    }\n\n    if ((len % 3) === 2) {\n      base64 = base64.substring(0, base64.length - 1) + \"=\";\n    } else if (len % 3 === 1) {\n      base64 = base64.substring(0, base64.length - 2) + \"==\";\n    }\n\n    return base64;\n  };\n\n  exports.decode =  function(base64) {\n    var bufferLength = base64.length * 0.75,\n    len = base64.length, i, p = 0,\n    encoded1, encoded2, encoded3, encoded4;\n\n    if (base64[base64.length - 1] === \"=\") {\n      bufferLength--;\n      if (base64[base64.length - 2] === \"=\") {\n        bufferLength--;\n      }\n    }\n\n    var arraybuffer = new ArrayBuffer(bufferLength),\n    bytes = new Uint8Array(arraybuffer);\n\n    for (i = 0; i < len; i+=4) {\n      encoded1 = chars.indexOf(base64[i]);\n      encoded2 = chars.indexOf(base64[i+1]);\n      encoded3 = chars.indexOf(base64[i+2]);\n      encoded4 = chars.indexOf(base64[i+3]);\n\n      bytes[p++] = (encoded1 << 2) | (encoded2 >> 4);\n      bytes[p++] = ((encoded2 & 15) << 4) | (encoded3 >> 2);\n      bytes[p++] = ((encoded3 & 3) << 6) | (encoded4 & 63);\n    }\n\n    return arraybuffer;\n  };\n})(\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\");\n","/**\r\n * Create a blob builder even when vendor prefixes exist\r\n */\r\n\r\nvar BlobBuilder = typeof BlobBuilder !== 'undefined' ? BlobBuilder :\r\n  typeof WebKitBlobBuilder !== 'undefined' ? WebKitBlobBuilder :\r\n  typeof MSBlobBuilder !== 'undefined' ? MSBlobBuilder :\r\n  typeof MozBlobBuilder !== 'undefined' ? MozBlobBuilder : \r\n  false;\r\n\r\n/**\r\n * Check if Blob constructor is supported\r\n */\r\n\r\nvar blobSupported = (function() {\r\n  try {\r\n    var a = new Blob(['hi']);\r\n    return a.size === 2;\r\n  } catch(e) {\r\n    return false;\r\n  }\r\n})();\r\n\r\n/**\r\n * Check if Blob constructor supports ArrayBufferViews\r\n * Fails in Safari 6, so we need to map to ArrayBuffers there.\r\n */\r\n\r\nvar blobSupportsArrayBufferView = blobSupported && (function() {\r\n  try {\r\n    var b = new Blob([new Uint8Array([1,2])]);\r\n    return b.size === 2;\r\n  } catch(e) {\r\n    return false;\r\n  }\r\n})();\r\n\r\n/**\r\n * Check if BlobBuilder is supported\r\n */\r\n\r\nvar blobBuilderSupported = BlobBuilder\r\n  && BlobBuilder.prototype.append\r\n  && BlobBuilder.prototype.getBlob;\r\n\r\n/**\r\n * Helper function that maps ArrayBufferViews to ArrayBuffers\r\n * Used by BlobBuilder constructor and old browsers that didn't\r\n * support it in the Blob constructor.\r\n */\r\n\r\nfunction mapArrayBufferViews(ary) {\r\n  return ary.map(function(chunk) {\r\n    if (chunk.buffer instanceof ArrayBuffer) {\r\n      var buf = chunk.buffer;\r\n\r\n      // if this is a subarray, make a copy so we only\r\n      // include the subarray region from the underlying buffer\r\n      if (chunk.byteLength !== buf.byteLength) {\r\n        var copy = new Uint8Array(chunk.byteLength);\r\n        copy.set(new Uint8Array(buf, chunk.byteOffset, chunk.byteLength));\r\n        buf = copy.buffer;\r\n      }\r\n\r\n      return buf;\r\n    }\r\n\r\n    return chunk;\r\n  });\r\n}\r\n\r\nfunction BlobBuilderConstructor(ary, options) {\r\n  options = options || {};\r\n\r\n  var bb = new BlobBuilder();\r\n  mapArrayBufferViews(ary).forEach(function(part) {\r\n    bb.append(part);\r\n  });\r\n\r\n  return (options.type) ? bb.getBlob(options.type) : bb.getBlob();\r\n};\r\n\r\nfunction BlobConstructor(ary, options) {\r\n  return new Blob(mapArrayBufferViews(ary), options || {});\r\n};\r\n\r\nif (typeof Blob !== 'undefined') {\r\n  BlobBuilderConstructor.prototype = Blob.prototype;\r\n  BlobConstructor.prototype = Blob.prototype;\r\n}\r\n\r\nmodule.exports = (function() {\r\n  if (blobSupported) {\r\n    return blobSupportsArrayBufferView ? Blob : BlobConstructor;\r\n  } else if (blobBuilderSupported) {\r\n    return BlobBuilderConstructor;\r\n  } else {\r\n    return undefined;\r\n  }\r\n})();\r\n","/**\n * Slice reference.\n */\n\nvar slice = [].slice;\n\n/**\n * Bind `obj` to `fn`.\n *\n * @param {Object} obj\n * @param {Function|String} fn or string\n * @return {Function}\n * @api public\n */\n\nmodule.exports = function(obj, fn){\n  if ('string' == typeof fn) fn = obj[fn];\n  if ('function' != typeof fn) throw new Error('bind() requires a function');\n  var args = slice.call(arguments, 2);\n  return function(){\n    return fn.apply(obj, args.concat(slice.call(arguments)));\n  }\n};\n","\r\n/**\r\n * Expose `Emitter`.\r\n */\r\n\r\nif (typeof module !== 'undefined') {\r\n  module.exports = Emitter;\r\n}\r\n\r\n/**\r\n * Initialize a new `Emitter`.\r\n *\r\n * @api public\r\n */\r\n\r\nfunction Emitter(obj) {\r\n  if (obj) return mixin(obj);\r\n};\r\n\r\n/**\r\n * Mixin the emitter properties.\r\n *\r\n * @param {Object} obj\r\n * @return {Object}\r\n * @api private\r\n */\r\n\r\nfunction mixin(obj) {\r\n  for (var key in Emitter.prototype) {\r\n    obj[key] = Emitter.prototype[key];\r\n  }\r\n  return obj;\r\n}\r\n\r\n/**\r\n * Listen on the given `event` with `fn`.\r\n *\r\n * @param {String} event\r\n * @param {Function} fn\r\n * @return {Emitter}\r\n * @api public\r\n */\r\n\r\nEmitter.prototype.on =\r\nEmitter.prototype.addEventListener = function(event, fn){\r\n  this._callbacks = this._callbacks || {};\r\n  (this._callbacks['$' + event] = this._callbacks['$' + event] || [])\r\n    .push(fn);\r\n  return this;\r\n};\r\n\r\n/**\r\n * Adds an `event` listener that will be invoked a single\r\n * time then automatically removed.\r\n *\r\n * @param {String} event\r\n * @param {Function} fn\r\n * @return {Emitter}\r\n * @api public\r\n */\r\n\r\nEmitter.prototype.once = function(event, fn){\r\n  function on() {\r\n    this.off(event, on);\r\n    fn.apply(this, arguments);\r\n  }\r\n\r\n  on.fn = fn;\r\n  this.on(event, on);\r\n  return this;\r\n};\r\n\r\n/**\r\n * Remove the given callback for `event` or all\r\n * registered callbacks.\r\n *\r\n * @param {String} event\r\n * @param {Function} fn\r\n * @return {Emitter}\r\n * @api public\r\n */\r\n\r\nEmitter.prototype.off =\r\nEmitter.prototype.removeListener =\r\nEmitter.prototype.removeAllListeners =\r\nEmitter.prototype.removeEventListener = function(event, fn){\r\n  this._callbacks = this._callbacks || {};\r\n\r\n  // all\r\n  if (0 == arguments.length) {\r\n    this._callbacks = {};\r\n    return this;\r\n  }\r\n\r\n  // specific event\r\n  var callbacks = this._callbacks['$' + event];\r\n  if (!callbacks) return this;\r\n\r\n  // remove all handlers\r\n  if (1 == arguments.length) {\r\n    delete this._callbacks['$' + event];\r\n    return this;\r\n  }\r\n\r\n  // remove specific handler\r\n  var cb;\r\n  for (var i = 0; i < callbacks.length; i++) {\r\n    cb = callbacks[i];\r\n    if (cb === fn || cb.fn === fn) {\r\n      callbacks.splice(i, 1);\r\n      break;\r\n    }\r\n  }\r\n\r\n  // Remove event specific arrays for event types that no\r\n  // one is subscribed for to avoid memory leak.\r\n  if (callbacks.length === 0) {\r\n    delete this._callbacks['$' + event];\r\n  }\r\n\r\n  return this;\r\n};\r\n\r\n/**\r\n * Emit `event` with the given args.\r\n *\r\n * @param {String} event\r\n * @param {Mixed} ...\r\n * @return {Emitter}\r\n */\r\n\r\nEmitter.prototype.emit = function(event){\r\n  this._callbacks = this._callbacks || {};\r\n\r\n  var args = new Array(arguments.length - 1)\r\n    , callbacks = this._callbacks['$' + event];\r\n\r\n  for (var i = 1; i < arguments.length; i++) {\r\n    args[i - 1] = arguments[i];\r\n  }\r\n\r\n  if (callbacks) {\r\n    callbacks = callbacks.slice(0);\r\n    for (var i = 0, len = callbacks.length; i < len; ++i) {\r\n      callbacks[i].apply(this, args);\r\n    }\r\n  }\r\n\r\n  return this;\r\n};\r\n\r\n/**\r\n * Return array of callbacks for `event`.\r\n *\r\n * @param {String} event\r\n * @return {Array}\r\n * @api public\r\n */\r\n\r\nEmitter.prototype.listeners = function(event){\r\n  this._callbacks = this._callbacks || {};\r\n  return this._callbacks['$' + event] || [];\r\n};\r\n\r\n/**\r\n * Check if this emitter has `event` handlers.\r\n *\r\n * @param {String} event\r\n * @return {Boolean}\r\n * @api public\r\n */\r\n\r\nEmitter.prototype.hasListeners = function(event){\r\n  return !! this.listeners(event).length;\r\n};\r\n","\nmodule.exports = function(a, b){\n  var fn = function(){};\n  fn.prototype = b.prototype;\n  a.prototype = new fn;\n  a.prototype.constructor = a;\n};","module.exports = (function () {\n  if (typeof self !== 'undefined') {\n    return self;\n  } else if (typeof window !== 'undefined') {\n    return window;\n  } else {\n    return Function('return this')(); // eslint-disable-line no-new-func\n  }\n})();\n","\nmodule.exports = require('./socket');\n\n/**\n * Exports parser\n *\n * @api public\n *\n */\nmodule.exports.parser = require('engine.io-parser');\n","/**\n * Module dependencies.\n */\n\nvar transports = require('./transports/index');\nvar Emitter = require('component-emitter');\nvar debug = require('debug')('engine.io-client:socket');\nvar index = require('indexof');\nvar parser = require('engine.io-parser');\nvar parseuri = require('parseuri');\nvar parseqs = require('parseqs');\n\n/**\n * Module exports.\n */\n\nmodule.exports = Socket;\n\n/**\n * Socket constructor.\n *\n * @param {String|Object} uri or options\n * @param {Object} options\n * @api public\n */\n\nfunction Socket (uri, opts) {\n  if (!(this instanceof Socket)) return new Socket(uri, opts);\n\n  opts = opts || {};\n\n  if (uri && 'object' === typeof uri) {\n    opts = uri;\n    uri = null;\n  }\n\n  if (uri) {\n    uri = parseuri(uri);\n    opts.hostname = uri.host;\n    opts.secure = uri.protocol === 'https' || uri.protocol === 'wss';\n    opts.port = uri.port;\n    if (uri.query) opts.query = uri.query;\n  } else if (opts.host) {\n    opts.hostname = parseuri(opts.host).host;\n  }\n\n  this.secure = null != opts.secure ? opts.secure\n    : (typeof location !== 'undefined' && 'https:' === location.protocol);\n\n  if (opts.hostname && !opts.port) {\n    // if no port is specified manually, use the protocol default\n    opts.port = this.secure ? '443' : '80';\n  }\n\n  this.agent = opts.agent || false;\n  this.hostname = opts.hostname ||\n    (typeof location !== 'undefined' ? location.hostname : 'localhost');\n  this.port = opts.port || (typeof location !== 'undefined' && location.port\n      ? location.port\n      : (this.secure ? 443 : 80));\n  this.query = opts.query || {};\n  if ('string' === typeof this.query) this.query = parseqs.decode(this.query);\n  this.upgrade = false !== opts.upgrade;\n  this.path = (opts.path || '/engine.io').replace(/\\/$/, '') + '/';\n  this.forceJSONP = !!opts.forceJSONP;\n  this.jsonp = false !== opts.jsonp;\n  this.forceBase64 = !!opts.forceBase64;\n  this.enablesXDR = !!opts.enablesXDR;\n  this.withCredentials = false !== opts.withCredentials;\n  this.timestampParam = opts.timestampParam || 't';\n  this.timestampRequests = opts.timestampRequests;\n  this.transports = opts.transports || ['polling', 'websocket'];\n  this.transportOptions = opts.transportOptions || {};\n  this.readyState = '';\n  this.writeBuffer = [];\n  this.prevBufferLen = 0;\n  this.policyPort = opts.policyPort || 843;\n  this.rememberUpgrade = opts.rememberUpgrade || false;\n  this.binaryType = null;\n  this.onlyBinaryUpgrades = opts.onlyBinaryUpgrades;\n  this.perMessageDeflate = false !== opts.perMessageDeflate ? (opts.perMessageDeflate || {}) : false;\n\n  if (true === this.perMessageDeflate) this.perMessageDeflate = {};\n  if (this.perMessageDeflate && null == this.perMessageDeflate.threshold) {\n    this.perMessageDeflate.threshold = 1024;\n  }\n\n  // SSL options for Node.js client\n  this.pfx = opts.pfx || undefined;\n  this.key = opts.key || undefined;\n  this.passphrase = opts.passphrase || undefined;\n  this.cert = opts.cert || undefined;\n  this.ca = opts.ca || undefined;\n  this.ciphers = opts.ciphers || undefined;\n  this.rejectUnauthorized = opts.rejectUnauthorized === undefined ? true : opts.rejectUnauthorized;\n  this.forceNode = !!opts.forceNode;\n\n  // detect ReactNative environment\n  this.isReactNative = (typeof navigator !== 'undefined' && typeof navigator.product === 'string' && navigator.product.toLowerCase() === 'reactnative');\n\n  // other options for Node.js or ReactNative client\n  if (typeof self === 'undefined' || this.isReactNative) {\n    if (opts.extraHeaders && Object.keys(opts.extraHeaders).length > 0) {\n      this.extraHeaders = opts.extraHeaders;\n    }\n\n    if (opts.localAddress) {\n      this.localAddress = opts.localAddress;\n    }\n  }\n\n  // set on handshake\n  this.id = null;\n  this.upgrades = null;\n  this.pingInterval = null;\n  this.pingTimeout = null;\n\n  // set on heartbeat\n  this.pingIntervalTimer = null;\n  this.pingTimeoutTimer = null;\n\n  this.open();\n}\n\nSocket.priorWebsocketSuccess = false;\n\n/**\n * Mix in `Emitter`.\n */\n\nEmitter(Socket.prototype);\n\n/**\n * Protocol version.\n *\n * @api public\n */\n\nSocket.protocol = parser.protocol; // this is an int\n\n/**\n * Expose deps for legacy compatibility\n * and standalone browser access.\n */\n\nSocket.Socket = Socket;\nSocket.Transport = require('./transport');\nSocket.transports = require('./transports/index');\nSocket.parser = require('engine.io-parser');\n\n/**\n * Creates transport of the given type.\n *\n * @param {String} transport name\n * @return {Transport}\n * @api private\n */\n\nSocket.prototype.createTransport = function (name) {\n  debug('creating transport \"%s\"', name);\n  var query = clone(this.query);\n\n  // append engine.io protocol identifier\n  query.EIO = parser.protocol;\n\n  // transport name\n  query.transport = name;\n\n  // per-transport options\n  var options = this.transportOptions[name] || {};\n\n  // session id if we already have one\n  if (this.id) query.sid = this.id;\n\n  var transport = new transports[name]({\n    query: query,\n    socket: this,\n    agent: options.agent || this.agent,\n    hostname: options.hostname || this.hostname,\n    port: options.port || this.port,\n    secure: options.secure || this.secure,\n    path: options.path || this.path,\n    forceJSONP: options.forceJSONP || this.forceJSONP,\n    jsonp: options.jsonp || this.jsonp,\n    forceBase64: options.forceBase64 || this.forceBase64,\n    enablesXDR: options.enablesXDR || this.enablesXDR,\n    withCredentials: options.withCredentials || this.withCredentials,\n    timestampRequests: options.timestampRequests || this.timestampRequests,\n    timestampParam: options.timestampParam || this.timestampParam,\n    policyPort: options.policyPort || this.policyPort,\n    pfx: options.pfx || this.pfx,\n    key: options.key || this.key,\n    passphrase: options.passphrase || this.passphrase,\n    cert: options.cert || this.cert,\n    ca: options.ca || this.ca,\n    ciphers: options.ciphers || this.ciphers,\n    rejectUnauthorized: options.rejectUnauthorized || this.rejectUnauthorized,\n    perMessageDeflate: options.perMessageDeflate || this.perMessageDeflate,\n    extraHeaders: options.extraHeaders || this.extraHeaders,\n    forceNode: options.forceNode || this.forceNode,\n    localAddress: options.localAddress || this.localAddress,\n    requestTimeout: options.requestTimeout || this.requestTimeout,\n    protocols: options.protocols || void (0),\n    isReactNative: this.isReactNative\n  });\n\n  return transport;\n};\n\nfunction clone (obj) {\n  var o = {};\n  for (var i in obj) {\n    if (obj.hasOwnProperty(i)) {\n      o[i] = obj[i];\n    }\n  }\n  return o;\n}\n\n/**\n * Initializes transport to use and starts probe.\n *\n * @api private\n */\nSocket.prototype.open = function () {\n  var transport;\n  if (this.rememberUpgrade && Socket.priorWebsocketSuccess && this.transports.indexOf('websocket') !== -1) {\n    transport = 'websocket';\n  } else if (0 === this.transports.length) {\n    // Emit error on next tick so it can be listened to\n    var self = this;\n    setTimeout(function () {\n      self.emit('error', 'No transports available');\n    }, 0);\n    return;\n  } else {\n    transport = this.transports[0];\n  }\n  this.readyState = 'opening';\n\n  // Retry with the next transport if the transport is disabled (jsonp: false)\n  try {\n    transport = this.createTransport(transport);\n  } catch (e) {\n    this.transports.shift();\n    this.open();\n    return;\n  }\n\n  transport.open();\n  this.setTransport(transport);\n};\n\n/**\n * Sets the current transport. Disables the existing one (if any).\n *\n * @api private\n */\n\nSocket.prototype.setTransport = function (transport) {\n  debug('setting transport %s', transport.name);\n  var self = this;\n\n  if (this.transport) {\n    debug('clearing existing transport %s', this.transport.name);\n    this.transport.removeAllListeners();\n  }\n\n  // set up transport\n  this.transport = transport;\n\n  // set up transport listeners\n  transport\n  .on('drain', function () {\n    self.onDrain();\n  })\n  .on('packet', function (packet) {\n    self.onPacket(packet);\n  })\n  .on('error', function (e) {\n    self.onError(e);\n  })\n  .on('close', function () {\n    self.onClose('transport close');\n  });\n};\n\n/**\n * Probes a transport.\n *\n * @param {String} transport name\n * @api private\n */\n\nSocket.prototype.probe = function (name) {\n  debug('probing transport \"%s\"', name);\n  var transport = this.createTransport(name, { probe: 1 });\n  var failed = false;\n  var self = this;\n\n  Socket.priorWebsocketSuccess = false;\n\n  function onTransportOpen () {\n    if (self.onlyBinaryUpgrades) {\n      var upgradeLosesBinary = !this.supportsBinary && self.transport.supportsBinary;\n      failed = failed || upgradeLosesBinary;\n    }\n    if (failed) return;\n\n    debug('probe transport \"%s\" opened', name);\n    transport.send([{ type: 'ping', data: 'probe' }]);\n    transport.once('packet', function (msg) {\n      if (failed) return;\n      if ('pong' === msg.type && 'probe' === msg.data) {\n        debug('probe transport \"%s\" pong', name);\n        self.upgrading = true;\n        self.emit('upgrading', transport);\n        if (!transport) return;\n        Socket.priorWebsocketSuccess = 'websocket' === transport.name;\n\n        debug('pausing current transport \"%s\"', self.transport.name);\n        self.transport.pause(function () {\n          if (failed) return;\n          if ('closed' === self.readyState) return;\n          debug('changing transport and sending upgrade packet');\n\n          cleanup();\n\n          self.setTransport(transport);\n          transport.send([{ type: 'upgrade' }]);\n          self.emit('upgrade', transport);\n          transport = null;\n          self.upgrading = false;\n          self.flush();\n        });\n      } else {\n        debug('probe transport \"%s\" failed', name);\n        var err = new Error('probe error');\n        err.transport = transport.name;\n        self.emit('upgradeError', err);\n      }\n    });\n  }\n\n  function freezeTransport () {\n    if (failed) return;\n\n    // Any callback called by transport should be ignored since now\n    failed = true;\n\n    cleanup();\n\n    transport.close();\n    transport = null;\n  }\n\n  // Handle any error that happens while probing\n  function onerror (err) {\n    var error = new Error('probe error: ' + err);\n    error.transport = transport.name;\n\n    freezeTransport();\n\n    debug('probe transport \"%s\" failed because of error: %s', name, err);\n\n    self.emit('upgradeError', error);\n  }\n\n  function onTransportClose () {\n    onerror('transport closed');\n  }\n\n  // When the socket is closed while we're probing\n  function onclose () {\n    onerror('socket closed');\n  }\n\n  // When the socket is upgraded while we're probing\n  function onupgrade (to) {\n    if (transport && to.name !== transport.name) {\n      debug('\"%s\" works - aborting \"%s\"', to.name, transport.name);\n      freezeTransport();\n    }\n  }\n\n  // Remove all listeners on the transport and on self\n  function cleanup () {\n    transport.removeListener('open', onTransportOpen);\n    transport.removeListener('error', onerror);\n    transport.removeListener('close', onTransportClose);\n    self.removeListener('close', onclose);\n    self.removeListener('upgrading', onupgrade);\n  }\n\n  transport.once('open', onTransportOpen);\n  transport.once('error', onerror);\n  transport.once('close', onTransportClose);\n\n  this.once('close', onclose);\n  this.once('upgrading', onupgrade);\n\n  transport.open();\n};\n\n/**\n * Called when connection is deemed open.\n *\n * @api public\n */\n\nSocket.prototype.onOpen = function () {\n  debug('socket open');\n  this.readyState = 'open';\n  Socket.priorWebsocketSuccess = 'websocket' === this.transport.name;\n  this.emit('open');\n  this.flush();\n\n  // we check for `readyState` in case an `open`\n  // listener already closed the socket\n  if ('open' === this.readyState && this.upgrade && this.transport.pause) {\n    debug('starting upgrade probes');\n    for (var i = 0, l = this.upgrades.length; i < l; i++) {\n      this.probe(this.upgrades[i]);\n    }\n  }\n};\n\n/**\n * Handles a packet.\n *\n * @api private\n */\n\nSocket.prototype.onPacket = function (packet) {\n  if ('opening' === this.readyState || 'open' === this.readyState ||\n      'closing' === this.readyState) {\n    debug('socket receive: type \"%s\", data \"%s\"', packet.type, packet.data);\n\n    this.emit('packet', packet);\n\n    // Socket is live - any packet counts\n    this.emit('heartbeat');\n\n    switch (packet.type) {\n      case 'open':\n        this.onHandshake(JSON.parse(packet.data));\n        break;\n\n      case 'pong':\n        this.setPing();\n        this.emit('pong');\n        break;\n\n      case 'error':\n        var err = new Error('server error');\n        err.code = packet.data;\n        this.onError(err);\n        break;\n\n      case 'message':\n        this.emit('data', packet.data);\n        this.emit('message', packet.data);\n        break;\n    }\n  } else {\n    debug('packet received with socket readyState \"%s\"', this.readyState);\n  }\n};\n\n/**\n * Called upon handshake completion.\n *\n * @param {Object} handshake obj\n * @api private\n */\n\nSocket.prototype.onHandshake = function (data) {\n  this.emit('handshake', data);\n  this.id = data.sid;\n  this.transport.query.sid = data.sid;\n  this.upgrades = this.filterUpgrades(data.upgrades);\n  this.pingInterval = data.pingInterval;\n  this.pingTimeout = data.pingTimeout;\n  this.onOpen();\n  // In case open handler closes socket\n  if ('closed' === this.readyState) return;\n  this.setPing();\n\n  // Prolong liveness of socket on heartbeat\n  this.removeListener('heartbeat', this.onHeartbeat);\n  this.on('heartbeat', this.onHeartbeat);\n};\n\n/**\n * Resets ping timeout.\n *\n * @api private\n */\n\nSocket.prototype.onHeartbeat = function (timeout) {\n  clearTimeout(this.pingTimeoutTimer);\n  var self = this;\n  self.pingTimeoutTimer = setTimeout(function () {\n    if ('closed' === self.readyState) return;\n    self.onClose('ping timeout');\n  }, timeout || (self.pingInterval + self.pingTimeout));\n};\n\n/**\n * Pings server every `this.pingInterval` and expects response\n * within `this.pingTimeout` or closes connection.\n *\n * @api private\n */\n\nSocket.prototype.setPing = function () {\n  var self = this;\n  clearTimeout(self.pingIntervalTimer);\n  self.pingIntervalTimer = setTimeout(function () {\n    debug('writing ping packet - expecting pong within %sms', self.pingTimeout);\n    self.ping();\n    self.onHeartbeat(self.pingTimeout);\n  }, self.pingInterval);\n};\n\n/**\n* Sends a ping packet.\n*\n* @api private\n*/\n\nSocket.prototype.ping = function () {\n  var self = this;\n  this.sendPacket('ping', function () {\n    self.emit('ping');\n  });\n};\n\n/**\n * Called on `drain` event\n *\n * @api private\n */\n\nSocket.prototype.onDrain = function () {\n  this.writeBuffer.splice(0, this.prevBufferLen);\n\n  // setting prevBufferLen = 0 is very important\n  // for example, when upgrading, upgrade packet is sent over,\n  // and a nonzero prevBufferLen could cause problems on `drain`\n  this.prevBufferLen = 0;\n\n  if (0 === this.writeBuffer.length) {\n    this.emit('drain');\n  } else {\n    this.flush();\n  }\n};\n\n/**\n * Flush write buffers.\n *\n * @api private\n */\n\nSocket.prototype.flush = function () {\n  if ('closed' !== this.readyState && this.transport.writable &&\n    !this.upgrading && this.writeBuffer.length) {\n    debug('flushing %d packets in socket', this.writeBuffer.length);\n    this.transport.send(this.writeBuffer);\n    // keep track of current length of writeBuffer\n    // splice writeBuffer and callbackBuffer on `drain`\n    this.prevBufferLen = this.writeBuffer.length;\n    this.emit('flush');\n  }\n};\n\n/**\n * Sends a message.\n *\n * @param {String} message.\n * @param {Function} callback function.\n * @param {Object} options.\n * @return {Socket} for chaining.\n * @api public\n */\n\nSocket.prototype.write =\nSocket.prototype.send = function (msg, options, fn) {\n  this.sendPacket('message', msg, options, fn);\n  return this;\n};\n\n/**\n * Sends a packet.\n *\n * @param {String} packet type.\n * @param {String} data.\n * @param {Object} options.\n * @param {Function} callback function.\n * @api private\n */\n\nSocket.prototype.sendPacket = function (type, data, options, fn) {\n  if ('function' === typeof data) {\n    fn = data;\n    data = undefined;\n  }\n\n  if ('function' === typeof options) {\n    fn = options;\n    options = null;\n  }\n\n  if ('closing' === this.readyState || 'closed' === this.readyState) {\n    return;\n  }\n\n  options = options || {};\n  options.compress = false !== options.compress;\n\n  var packet = {\n    type: type,\n    data: data,\n    options: options\n  };\n  this.emit('packetCreate', packet);\n  this.writeBuffer.push(packet);\n  if (fn) this.once('flush', fn);\n  this.flush();\n};\n\n/**\n * Closes the connection.\n *\n * @api private\n */\n\nSocket.prototype.close = function () {\n  if ('opening' === this.readyState || 'open' === this.readyState) {\n    this.readyState = 'closing';\n\n    var self = this;\n\n    if (this.writeBuffer.length) {\n      this.once('drain', function () {\n        if (this.upgrading) {\n          waitForUpgrade();\n        } else {\n          close();\n        }\n      });\n    } else if (this.upgrading) {\n      waitForUpgrade();\n    } else {\n      close();\n    }\n  }\n\n  function close () {\n    self.onClose('forced close');\n    debug('socket closing - telling transport to close');\n    self.transport.close();\n  }\n\n  function cleanupAndClose () {\n    self.removeListener('upgrade', cleanupAndClose);\n    self.removeListener('upgradeError', cleanupAndClose);\n    close();\n  }\n\n  function waitForUpgrade () {\n    // wait for upgrade to finish since we can't send packets while pausing a transport\n    self.once('upgrade', cleanupAndClose);\n    self.once('upgradeError', cleanupAndClose);\n  }\n\n  return this;\n};\n\n/**\n * Called upon transport error\n *\n * @api private\n */\n\nSocket.prototype.onError = function (err) {\n  debug('socket error %j', err);\n  Socket.priorWebsocketSuccess = false;\n  this.emit('error', err);\n  this.onClose('transport error', err);\n};\n\n/**\n * Called upon transport close.\n *\n * @api private\n */\n\nSocket.prototype.onClose = function (reason, desc) {\n  if ('opening' === this.readyState || 'open' === this.readyState || 'closing' === this.readyState) {\n    debug('socket close with reason: \"%s\"', reason);\n    var self = this;\n\n    // clear timers\n    clearTimeout(this.pingIntervalTimer);\n    clearTimeout(this.pingTimeoutTimer);\n\n    // stop event from firing again for transport\n    this.transport.removeAllListeners('close');\n\n    // ensure transport won't stay open\n    this.transport.close();\n\n    // ignore further transport communication\n    this.transport.removeAllListeners();\n\n    // set ready state\n    this.readyState = 'closed';\n\n    // clear session id\n    this.id = null;\n\n    // emit close event\n    this.emit('close', reason, desc);\n\n    // clean buffers after, so users can still\n    // grab the buffers on `close` event\n    self.writeBuffer = [];\n    self.prevBufferLen = 0;\n  }\n};\n\n/**\n * Filters upgrades, returning only those matching client transports.\n *\n * @param {Array} server upgrades\n * @api private\n *\n */\n\nSocket.prototype.filterUpgrades = function (upgrades) {\n  var filteredUpgrades = [];\n  for (var i = 0, j = upgrades.length; i < j; i++) {\n    if (~index(this.transports, upgrades[i])) filteredUpgrades.push(upgrades[i]);\n  }\n  return filteredUpgrades;\n};\n","/**\n * Module dependencies.\n */\n\nvar parser = require('engine.io-parser');\nvar Emitter = require('component-emitter');\n\n/**\n * Module exports.\n */\n\nmodule.exports = Transport;\n\n/**\n * Transport abstract constructor.\n *\n * @param {Object} options.\n * @api private\n */\n\nfunction Transport (opts) {\n  this.path = opts.path;\n  this.hostname = opts.hostname;\n  this.port = opts.port;\n  this.secure = opts.secure;\n  this.query = opts.query;\n  this.timestampParam = opts.timestampParam;\n  this.timestampRequests = opts.timestampRequests;\n  this.readyState = '';\n  this.agent = opts.agent || false;\n  this.socket = opts.socket;\n  this.enablesXDR = opts.enablesXDR;\n  this.withCredentials = opts.withCredentials;\n\n  // SSL options for Node.js client\n  this.pfx = opts.pfx;\n  this.key = opts.key;\n  this.passphrase = opts.passphrase;\n  this.cert = opts.cert;\n  this.ca = opts.ca;\n  this.ciphers = opts.ciphers;\n  this.rejectUnauthorized = opts.rejectUnauthorized;\n  this.forceNode = opts.forceNode;\n\n  // results of ReactNative environment detection\n  this.isReactNative = opts.isReactNative;\n\n  // other options for Node.js client\n  this.extraHeaders = opts.extraHeaders;\n  this.localAddress = opts.localAddress;\n}\n\n/**\n * Mix in `Emitter`.\n */\n\nEmitter(Transport.prototype);\n\n/**\n * Emits an error.\n *\n * @param {String} str\n * @return {Transport} for chaining\n * @api public\n */\n\nTransport.prototype.onError = function (msg, desc) {\n  var err = new Error(msg);\n  err.type = 'TransportError';\n  err.description = desc;\n  this.emit('error', err);\n  return this;\n};\n\n/**\n * Opens the transport.\n *\n * @api public\n */\n\nTransport.prototype.open = function () {\n  if ('closed' === this.readyState || '' === this.readyState) {\n    this.readyState = 'opening';\n    this.doOpen();\n  }\n\n  return this;\n};\n\n/**\n * Closes the transport.\n *\n * @api private\n */\n\nTransport.prototype.close = function () {\n  if ('opening' === this.readyState || 'open' === this.readyState) {\n    this.doClose();\n    this.onClose();\n  }\n\n  return this;\n};\n\n/**\n * Sends multiple packets.\n *\n * @param {Array} packets\n * @api private\n */\n\nTransport.prototype.send = function (packets) {\n  if ('open' === this.readyState) {\n    this.write(packets);\n  } else {\n    throw new Error('Transport not open');\n  }\n};\n\n/**\n * Called upon open\n *\n * @api private\n */\n\nTransport.prototype.onOpen = function () {\n  this.readyState = 'open';\n  this.writable = true;\n  this.emit('open');\n};\n\n/**\n * Called with data.\n *\n * @param {String} data\n * @api private\n */\n\nTransport.prototype.onData = function (data) {\n  var packet = parser.decodePacket(data, this.socket.binaryType);\n  this.onPacket(packet);\n};\n\n/**\n * Called with a decoded packet.\n */\n\nTransport.prototype.onPacket = function (packet) {\n  this.emit('packet', packet);\n};\n\n/**\n * Called upon close.\n *\n * @api private\n */\n\nTransport.prototype.onClose = function () {\n  this.readyState = 'closed';\n  this.emit('close');\n};\n","/**\n * Module dependencies\n */\n\nvar XMLHttpRequest = require('./xmlhttprequest');\nvar XHR = require('./polling-xhr');\nvar JSONP = require('./polling-jsonp');\nvar websocket = require('./websocket');\n\n/**\n * Export transports.\n */\n\nexports.polling = polling;\nexports.websocket = websocket;\n\n/**\n * Polling transport polymorphic constructor.\n * Decides on xhr vs jsonp based on feature detection.\n *\n * @api private\n */\n\nfunction polling (opts) {\n  var xhr;\n  var xd = false;\n  var xs = false;\n  var jsonp = false !== opts.jsonp;\n\n  if (typeof location !== 'undefined') {\n    var isSSL = 'https:' === location.protocol;\n    var port = location.port;\n\n    // some user agents have empty `location.port`\n    if (!port) {\n      port = isSSL ? 443 : 80;\n    }\n\n    xd = opts.hostname !== location.hostname || port !== opts.port;\n    xs = opts.secure !== isSSL;\n  }\n\n  opts.xdomain = xd;\n  opts.xscheme = xs;\n  xhr = new XMLHttpRequest(opts);\n\n  if ('open' in xhr && !opts.forceJSONP) {\n    return new XHR(opts);\n  } else {\n    if (!jsonp) throw new Error('JSONP disabled');\n    return new JSONP(opts);\n  }\n}\n","/**\n * Module requirements.\n */\n\nvar Polling = require('./polling');\nvar inherit = require('component-inherit');\nvar globalThis = require('../globalThis');\n\n/**\n * Module exports.\n */\n\nmodule.exports = JSONPPolling;\n\n/**\n * Cached regular expressions.\n */\n\nvar rNewline = /\\n/g;\nvar rEscapedNewline = /\\\\n/g;\n\n/**\n * Global JSONP callbacks.\n */\n\nvar callbacks;\n\n/**\n * Noop.\n */\n\nfunction empty () { }\n\n/**\n * JSONP Polling constructor.\n *\n * @param {Object} opts.\n * @api public\n */\n\nfunction JSONPPolling (opts) {\n  Polling.call(this, opts);\n\n  this.query = this.query || {};\n\n  // define global callbacks array if not present\n  // we do this here (lazily) to avoid unneeded global pollution\n  if (!callbacks) {\n    // we need to consider multiple engines in the same page\n    callbacks = globalThis.___eio = (globalThis.___eio || []);\n  }\n\n  // callback identifier\n  this.index = callbacks.length;\n\n  // add callback to jsonp global\n  var self = this;\n  callbacks.push(function (msg) {\n    self.onData(msg);\n  });\n\n  // append to query string\n  this.query.j = this.index;\n\n  // prevent spurious errors from being emitted when the window is unloaded\n  if (typeof addEventListener === 'function') {\n    addEventListener('beforeunload', function () {\n      if (self.script) self.script.onerror = empty;\n    }, false);\n  }\n}\n\n/**\n * Inherits from Polling.\n */\n\ninherit(JSONPPolling, Polling);\n\n/*\n * JSONP only supports binary as base64 encoded strings\n */\n\nJSONPPolling.prototype.supportsBinary = false;\n\n/**\n * Closes the socket.\n *\n * @api private\n */\n\nJSONPPolling.prototype.doClose = function () {\n  if (this.script) {\n    this.script.parentNode.removeChild(this.script);\n    this.script = null;\n  }\n\n  if (this.form) {\n    this.form.parentNode.removeChild(this.form);\n    this.form = null;\n    this.iframe = null;\n  }\n\n  Polling.prototype.doClose.call(this);\n};\n\n/**\n * Starts a poll cycle.\n *\n * @api private\n */\n\nJSONPPolling.prototype.doPoll = function () {\n  var self = this;\n  var script = document.createElement('script');\n\n  if (this.script) {\n    this.script.parentNode.removeChild(this.script);\n    this.script = null;\n  }\n\n  script.async = true;\n  script.src = this.uri();\n  script.onerror = function (e) {\n    self.onError('jsonp poll error', e);\n  };\n\n  var insertAt = document.getElementsByTagName('script')[0];\n  if (insertAt) {\n    insertAt.parentNode.insertBefore(script, insertAt);\n  } else {\n    (document.head || document.body).appendChild(script);\n  }\n  this.script = script;\n\n  var isUAgecko = 'undefined' !== typeof navigator && /gecko/i.test(navigator.userAgent);\n\n  if (isUAgecko) {\n    setTimeout(function () {\n      var iframe = document.createElement('iframe');\n      document.body.appendChild(iframe);\n      document.body.removeChild(iframe);\n    }, 100);\n  }\n};\n\n/**\n * Writes with a hidden iframe.\n *\n * @param {String} data to send\n * @param {Function} called upon flush.\n * @api private\n */\n\nJSONPPolling.prototype.doWrite = function (data, fn) {\n  var self = this;\n\n  if (!this.form) {\n    var form = document.createElement('form');\n    var area = document.createElement('textarea');\n    var id = this.iframeId = 'eio_iframe_' + this.index;\n    var iframe;\n\n    form.className = 'socketio';\n    form.style.position = 'absolute';\n    form.style.top = '-1000px';\n    form.style.left = '-1000px';\n    form.target = id;\n    form.method = 'POST';\n    form.setAttribute('accept-charset', 'utf-8');\n    area.name = 'd';\n    form.appendChild(area);\n    document.body.appendChild(form);\n\n    this.form = form;\n    this.area = area;\n  }\n\n  this.form.action = this.uri();\n\n  function complete () {\n    initIframe();\n    fn();\n  }\n\n  function initIframe () {\n    if (self.iframe) {\n      try {\n        self.form.removeChild(self.iframe);\n      } catch (e) {\n        self.onError('jsonp polling iframe removal error', e);\n      }\n    }\n\n    try {\n      // ie6 dynamic iframes with target=\"\" support (thanks Chris Lambacher)\n      var html = '<iframe src=\"javascript:0\" name=\"' + self.iframeId + '\">';\n      iframe = document.createElement(html);\n    } catch (e) {\n      iframe = document.createElement('iframe');\n      iframe.name = self.iframeId;\n      iframe.src = 'javascript:0';\n    }\n\n    iframe.id = self.iframeId;\n\n    self.form.appendChild(iframe);\n    self.iframe = iframe;\n  }\n\n  initIframe();\n\n  // escape \\n to prevent it from being converted into \\r\\n by some UAs\n  // double escaping is required for escaped new lines because unescaping of new lines can be done safely on server-side\n  data = data.replace(rEscapedNewline, '\\\\\\n');\n  this.area.value = data.replace(rNewline, '\\\\n');\n\n  try {\n    this.form.submit();\n  } catch (e) {}\n\n  if (this.iframe.attachEvent) {\n    this.iframe.onreadystatechange = function () {\n      if (self.iframe.readyState === 'complete') {\n        complete();\n      }\n    };\n  } else {\n    this.iframe.onload = complete;\n  }\n};\n","/* global attachEvent */\n\n/**\n * Module requirements.\n */\n\nvar XMLHttpRequest = require('./xmlhttprequest');\nvar Polling = require('./polling');\nvar Emitter = require('component-emitter');\nvar inherit = require('component-inherit');\nvar debug = require('debug')('engine.io-client:polling-xhr');\nvar globalThis = require('../globalThis');\n\n/**\n * Module exports.\n */\n\nmodule.exports = XHR;\nmodule.exports.Request = Request;\n\n/**\n * Empty function\n */\n\nfunction empty () {}\n\n/**\n * XHR Polling constructor.\n *\n * @param {Object} opts\n * @api public\n */\n\nfunction XHR (opts) {\n  Polling.call(this, opts);\n  this.requestTimeout = opts.requestTimeout;\n  this.extraHeaders = opts.extraHeaders;\n\n  if (typeof location !== 'undefined') {\n    var isSSL = 'https:' === location.protocol;\n    var port = location.port;\n\n    // some user agents have empty `location.port`\n    if (!port) {\n      port = isSSL ? 443 : 80;\n    }\n\n    this.xd = (typeof location !== 'undefined' && opts.hostname !== location.hostname) ||\n      port !== opts.port;\n    this.xs = opts.secure !== isSSL;\n  }\n}\n\n/**\n * Inherits from Polling.\n */\n\ninherit(XHR, Polling);\n\n/**\n * XHR supports binary\n */\n\nXHR.prototype.supportsBinary = true;\n\n/**\n * Creates a request.\n *\n * @param {String} method\n * @api private\n */\n\nXHR.prototype.request = function (opts) {\n  opts = opts || {};\n  opts.uri = this.uri();\n  opts.xd = this.xd;\n  opts.xs = this.xs;\n  opts.agent = this.agent || false;\n  opts.supportsBinary = this.supportsBinary;\n  opts.enablesXDR = this.enablesXDR;\n  opts.withCredentials = this.withCredentials;\n\n  // SSL options for Node.js client\n  opts.pfx = this.pfx;\n  opts.key = this.key;\n  opts.passphrase = this.passphrase;\n  opts.cert = this.cert;\n  opts.ca = this.ca;\n  opts.ciphers = this.ciphers;\n  opts.rejectUnauthorized = this.rejectUnauthorized;\n  opts.requestTimeout = this.requestTimeout;\n\n  // other options for Node.js client\n  opts.extraHeaders = this.extraHeaders;\n\n  return new Request(opts);\n};\n\n/**\n * Sends data.\n *\n * @param {String} data to send.\n * @param {Function} called upon flush.\n * @api private\n */\n\nXHR.prototype.doWrite = function (data, fn) {\n  var isBinary = typeof data !== 'string' && data !== undefined;\n  var req = this.request({ method: 'POST', data: data, isBinary: isBinary });\n  var self = this;\n  req.on('success', fn);\n  req.on('error', function (err) {\n    self.onError('xhr post error', err);\n  });\n  this.sendXhr = req;\n};\n\n/**\n * Starts a poll cycle.\n *\n * @api private\n */\n\nXHR.prototype.doPoll = function () {\n  debug('xhr poll');\n  var req = this.request();\n  var self = this;\n  req.on('data', function (data) {\n    self.onData(data);\n  });\n  req.on('error', function (err) {\n    self.onError('xhr poll error', err);\n  });\n  this.pollXhr = req;\n};\n\n/**\n * Request constructor\n *\n * @param {Object} options\n * @api public\n */\n\nfunction Request (opts) {\n  this.method = opts.method || 'GET';\n  this.uri = opts.uri;\n  this.xd = !!opts.xd;\n  this.xs = !!opts.xs;\n  this.async = false !== opts.async;\n  this.data = undefined !== opts.data ? opts.data : null;\n  this.agent = opts.agent;\n  this.isBinary = opts.isBinary;\n  this.supportsBinary = opts.supportsBinary;\n  this.enablesXDR = opts.enablesXDR;\n  this.withCredentials = opts.withCredentials;\n  this.requestTimeout = opts.requestTimeout;\n\n  // SSL options for Node.js client\n  this.pfx = opts.pfx;\n  this.key = opts.key;\n  this.passphrase = opts.passphrase;\n  this.cert = opts.cert;\n  this.ca = opts.ca;\n  this.ciphers = opts.ciphers;\n  this.rejectUnauthorized = opts.rejectUnauthorized;\n\n  // other options for Node.js client\n  this.extraHeaders = opts.extraHeaders;\n\n  this.create();\n}\n\n/**\n * Mix in `Emitter`.\n */\n\nEmitter(Request.prototype);\n\n/**\n * Creates the XHR object and sends the request.\n *\n * @api private\n */\n\nRequest.prototype.create = function () {\n  var opts = { agent: this.agent, xdomain: this.xd, xscheme: this.xs, enablesXDR: this.enablesXDR };\n\n  // SSL options for Node.js client\n  opts.pfx = this.pfx;\n  opts.key = this.key;\n  opts.passphrase = this.passphrase;\n  opts.cert = this.cert;\n  opts.ca = this.ca;\n  opts.ciphers = this.ciphers;\n  opts.rejectUnauthorized = this.rejectUnauthorized;\n\n  var xhr = this.xhr = new XMLHttpRequest(opts);\n  var self = this;\n\n  try {\n    debug('xhr open %s: %s', this.method, this.uri);\n    xhr.open(this.method, this.uri, this.async);\n    try {\n      if (this.extraHeaders) {\n        xhr.setDisableHeaderCheck && xhr.setDisableHeaderCheck(true);\n        for (var i in this.extraHeaders) {\n          if (this.extraHeaders.hasOwnProperty(i)) {\n            xhr.setRequestHeader(i, this.extraHeaders[i]);\n          }\n        }\n      }\n    } catch (e) {}\n\n    if ('POST' === this.method) {\n      try {\n        if (this.isBinary) {\n          xhr.setRequestHeader('Content-type', 'application/octet-stream');\n        } else {\n          xhr.setRequestHeader('Content-type', 'text/plain;charset=UTF-8');\n        }\n      } catch (e) {}\n    }\n\n    try {\n      xhr.setRequestHeader('Accept', '*/*');\n    } catch (e) {}\n\n    // ie6 check\n    if ('withCredentials' in xhr) {\n      xhr.withCredentials = this.withCredentials;\n    }\n\n    if (this.requestTimeout) {\n      xhr.timeout = this.requestTimeout;\n    }\n\n    if (this.hasXDR()) {\n      xhr.onload = function () {\n        self.onLoad();\n      };\n      xhr.onerror = function () {\n        self.onError(xhr.responseText);\n      };\n    } else {\n      xhr.onreadystatechange = function () {\n        if (xhr.readyState === 2) {\n          try {\n            var contentType = xhr.getResponseHeader('Content-Type');\n            if (self.supportsBinary && contentType === 'application/octet-stream' || contentType === 'application/octet-stream; charset=UTF-8') {\n              xhr.responseType = 'arraybuffer';\n            }\n          } catch (e) {}\n        }\n        if (4 !== xhr.readyState) return;\n        if (200 === xhr.status || 1223 === xhr.status) {\n          self.onLoad();\n        } else {\n          // make sure the `error` event handler that's user-set\n          // does not throw in the same tick and gets caught here\n          setTimeout(function () {\n            self.onError(typeof xhr.status === 'number' ? xhr.status : 0);\n          }, 0);\n        }\n      };\n    }\n\n    debug('xhr data %s', this.data);\n    xhr.send(this.data);\n  } catch (e) {\n    // Need to defer since .create() is called directly fhrom the constructor\n    // and thus the 'error' event can only be only bound *after* this exception\n    // occurs.  Therefore, also, we cannot throw here at all.\n    setTimeout(function () {\n      self.onError(e);\n    }, 0);\n    return;\n  }\n\n  if (typeof document !== 'undefined') {\n    this.index = Request.requestsCount++;\n    Request.requests[this.index] = this;\n  }\n};\n\n/**\n * Called upon successful response.\n *\n * @api private\n */\n\nRequest.prototype.onSuccess = function () {\n  this.emit('success');\n  this.cleanup();\n};\n\n/**\n * Called if we have data.\n *\n * @api private\n */\n\nRequest.prototype.onData = function (data) {\n  this.emit('data', data);\n  this.onSuccess();\n};\n\n/**\n * Called upon error.\n *\n * @api private\n */\n\nRequest.prototype.onError = function (err) {\n  this.emit('error', err);\n  this.cleanup(true);\n};\n\n/**\n * Cleans up house.\n *\n * @api private\n */\n\nRequest.prototype.cleanup = function (fromError) {\n  if ('undefined' === typeof this.xhr || null === this.xhr) {\n    return;\n  }\n  // xmlhttprequest\n  if (this.hasXDR()) {\n    this.xhr.onload = this.xhr.onerror = empty;\n  } else {\n    this.xhr.onreadystatechange = empty;\n  }\n\n  if (fromError) {\n    try {\n      this.xhr.abort();\n    } catch (e) {}\n  }\n\n  if (typeof document !== 'undefined') {\n    delete Request.requests[this.index];\n  }\n\n  this.xhr = null;\n};\n\n/**\n * Called upon load.\n *\n * @api private\n */\n\nRequest.prototype.onLoad = function () {\n  var data;\n  try {\n    var contentType;\n    try {\n      contentType = this.xhr.getResponseHeader('Content-Type');\n    } catch (e) {}\n    if (contentType === 'application/octet-stream' || contentType === 'application/octet-stream; charset=UTF-8') {\n      data = this.xhr.response || this.xhr.responseText;\n    } else {\n      data = this.xhr.responseText;\n    }\n  } catch (e) {\n    this.onError(e);\n  }\n  if (null != data) {\n    this.onData(data);\n  }\n};\n\n/**\n * Check if it has XDomainRequest.\n *\n * @api private\n */\n\nRequest.prototype.hasXDR = function () {\n  return typeof XDomainRequest !== 'undefined' && !this.xs && this.enablesXDR;\n};\n\n/**\n * Aborts the request.\n *\n * @api public\n */\n\nRequest.prototype.abort = function () {\n  this.cleanup();\n};\n\n/**\n * Aborts pending requests when unloading the window. This is needed to prevent\n * memory leaks (e.g. when using IE) and to ensure that no spurious error is\n * emitted.\n */\n\nRequest.requestsCount = 0;\nRequest.requests = {};\n\nif (typeof document !== 'undefined') {\n  if (typeof attachEvent === 'function') {\n    attachEvent('onunload', unloadHandler);\n  } else if (typeof addEventListener === 'function') {\n    var terminationEvent = 'onpagehide' in globalThis ? 'pagehide' : 'unload';\n    addEventListener(terminationEvent, unloadHandler, false);\n  }\n}\n\nfunction unloadHandler () {\n  for (var i in Request.requests) {\n    if (Request.requests.hasOwnProperty(i)) {\n      Request.requests[i].abort();\n    }\n  }\n}\n","/**\n * Module dependencies.\n */\n\nvar Transport = require('../transport');\nvar parseqs = require('parseqs');\nvar parser = require('engine.io-parser');\nvar inherit = require('component-inherit');\nvar yeast = require('yeast');\nvar debug = require('debug')('engine.io-client:polling');\n\n/**\n * Module exports.\n */\n\nmodule.exports = Polling;\n\n/**\n * Is XHR2 supported?\n */\n\nvar hasXHR2 = (function () {\n  var XMLHttpRequest = require('./xmlhttprequest');\n  var xhr = new XMLHttpRequest({ xdomain: false });\n  return null != xhr.responseType;\n})();\n\n/**\n * Polling interface.\n *\n * @param {Object} opts\n * @api private\n */\n\nfunction Polling (opts) {\n  var forceBase64 = (opts && opts.forceBase64);\n  if (!hasXHR2 || forceBase64) {\n    this.supportsBinary = false;\n  }\n  Transport.call(this, opts);\n}\n\n/**\n * Inherits from Transport.\n */\n\ninherit(Polling, Transport);\n\n/**\n * Transport name.\n */\n\nPolling.prototype.name = 'polling';\n\n/**\n * Opens the socket (triggers polling). We write a PING message to determine\n * when the transport is open.\n *\n * @api private\n */\n\nPolling.prototype.doOpen = function () {\n  this.poll();\n};\n\n/**\n * Pauses polling.\n *\n * @param {Function} callback upon buffers are flushed and transport is paused\n * @api private\n */\n\nPolling.prototype.pause = function (onPause) {\n  var self = this;\n\n  this.readyState = 'pausing';\n\n  function pause () {\n    debug('paused');\n    self.readyState = 'paused';\n    onPause();\n  }\n\n  if (this.polling || !this.writable) {\n    var total = 0;\n\n    if (this.polling) {\n      debug('we are currently polling - waiting to pause');\n      total++;\n      this.once('pollComplete', function () {\n        debug('pre-pause polling complete');\n        --total || pause();\n      });\n    }\n\n    if (!this.writable) {\n      debug('we are currently writing - waiting to pause');\n      total++;\n      this.once('drain', function () {\n        debug('pre-pause writing complete');\n        --total || pause();\n      });\n    }\n  } else {\n    pause();\n  }\n};\n\n/**\n * Starts polling cycle.\n *\n * @api public\n */\n\nPolling.prototype.poll = function () {\n  debug('polling');\n  this.polling = true;\n  this.doPoll();\n  this.emit('poll');\n};\n\n/**\n * Overloads onData to detect payloads.\n *\n * @api private\n */\n\nPolling.prototype.onData = function (data) {\n  var self = this;\n  debug('polling got data %s', data);\n  var callback = function (packet, index, total) {\n    // if its the first message we consider the transport open\n    if ('opening' === self.readyState && packet.type === 'open') {\n      self.onOpen();\n    }\n\n    // if its a close packet, we close the ongoing requests\n    if ('close' === packet.type) {\n      self.onClose();\n      return false;\n    }\n\n    // otherwise bypass onData and handle the message\n    self.onPacket(packet);\n  };\n\n  // decode payload\n  parser.decodePayload(data, this.socket.binaryType, callback);\n\n  // if an event did not trigger closing\n  if ('closed' !== this.readyState) {\n    // if we got data we're not polling\n    this.polling = false;\n    this.emit('pollComplete');\n\n    if ('open' === this.readyState) {\n      this.poll();\n    } else {\n      debug('ignoring poll - transport state \"%s\"', this.readyState);\n    }\n  }\n};\n\n/**\n * For polling, send a close packet.\n *\n * @api private\n */\n\nPolling.prototype.doClose = function () {\n  var self = this;\n\n  function close () {\n    debug('writing close packet');\n    self.write([{ type: 'close' }]);\n  }\n\n  if ('open' === this.readyState) {\n    debug('transport open - closing');\n    close();\n  } else {\n    // in case we're trying to close while\n    // handshaking is in progress (GH-164)\n    debug('transport not open - deferring close');\n    this.once('open', close);\n  }\n};\n\n/**\n * Writes a packets payload.\n *\n * @param {Array} data packets\n * @param {Function} drain callback\n * @api private\n */\n\nPolling.prototype.write = function (packets) {\n  var self = this;\n  this.writable = false;\n  var callbackfn = function () {\n    self.writable = true;\n    self.emit('drain');\n  };\n\n  parser.encodePayload(packets, this.supportsBinary, function (data) {\n    self.doWrite(data, callbackfn);\n  });\n};\n\n/**\n * Generates uri for connection.\n *\n * @api private\n */\n\nPolling.prototype.uri = function () {\n  var query = this.query || {};\n  var schema = this.secure ? 'https' : 'http';\n  var port = '';\n\n  // cache busting is forced\n  if (false !== this.timestampRequests) {\n    query[this.timestampParam] = yeast();\n  }\n\n  if (!this.supportsBinary && !query.sid) {\n    query.b64 = 1;\n  }\n\n  query = parseqs.encode(query);\n\n  // avoid port if default for schema\n  if (this.port && (('https' === schema && Number(this.port) !== 443) ||\n     ('http' === schema && Number(this.port) !== 80))) {\n    port = ':' + this.port;\n  }\n\n  // prepend ? to query\n  if (query.length) {\n    query = '?' + query;\n  }\n\n  var ipv6 = this.hostname.indexOf(':') !== -1;\n  return schema + '://' + (ipv6 ? '[' + this.hostname + ']' : this.hostname) + port + this.path + query;\n};\n","/**\n * Module dependencies.\n */\n\nvar Transport = require('../transport');\nvar parser = require('engine.io-parser');\nvar parseqs = require('parseqs');\nvar inherit = require('component-inherit');\nvar yeast = require('yeast');\nvar debug = require('debug')('engine.io-client:websocket');\n\nvar BrowserWebSocket, NodeWebSocket;\n\nif (typeof WebSocket !== 'undefined') {\n  BrowserWebSocket = WebSocket;\n} else if (typeof self !== 'undefined') {\n  BrowserWebSocket = self.WebSocket || self.MozWebSocket;\n}\n\nif (typeof window === 'undefined') {\n  try {\n    NodeWebSocket = require('ws');\n  } catch (e) { }\n}\n\n/**\n * Get either the `WebSocket` or `MozWebSocket` globals\n * in the browser or try to resolve WebSocket-compatible\n * interface exposed by `ws` for Node-like environment.\n */\n\nvar WebSocketImpl = BrowserWebSocket || NodeWebSocket;\n\n/**\n * Module exports.\n */\n\nmodule.exports = WS;\n\n/**\n * WebSocket transport constructor.\n *\n * @api {Object} connection options\n * @api public\n */\n\nfunction WS (opts) {\n  var forceBase64 = (opts && opts.forceBase64);\n  if (forceBase64) {\n    this.supportsBinary = false;\n  }\n  this.perMessageDeflate = opts.perMessageDeflate;\n  this.usingBrowserWebSocket = BrowserWebSocket && !opts.forceNode;\n  this.protocols = opts.protocols;\n  if (!this.usingBrowserWebSocket) {\n    WebSocketImpl = NodeWebSocket;\n  }\n  Transport.call(this, opts);\n}\n\n/**\n * Inherits from Transport.\n */\n\ninherit(WS, Transport);\n\n/**\n * Transport name.\n *\n * @api public\n */\n\nWS.prototype.name = 'websocket';\n\n/*\n * WebSockets support binary\n */\n\nWS.prototype.supportsBinary = true;\n\n/**\n * Opens socket.\n *\n * @api private\n */\n\nWS.prototype.doOpen = function () {\n  if (!this.check()) {\n    // let probe timeout\n    return;\n  }\n\n  var uri = this.uri();\n  var protocols = this.protocols;\n\n  var opts = {};\n\n  if (!this.isReactNative) {\n    opts.agent = this.agent;\n    opts.perMessageDeflate = this.perMessageDeflate;\n\n    // SSL options for Node.js client\n    opts.pfx = this.pfx;\n    opts.key = this.key;\n    opts.passphrase = this.passphrase;\n    opts.cert = this.cert;\n    opts.ca = this.ca;\n    opts.ciphers = this.ciphers;\n    opts.rejectUnauthorized = this.rejectUnauthorized;\n  }\n\n  if (this.extraHeaders) {\n    opts.headers = this.extraHeaders;\n  }\n  if (this.localAddress) {\n    opts.localAddress = this.localAddress;\n  }\n\n  try {\n    this.ws =\n      this.usingBrowserWebSocket && !this.isReactNative\n        ? protocols\n          ? new WebSocketImpl(uri, protocols)\n          : new WebSocketImpl(uri)\n        : new WebSocketImpl(uri, protocols, opts);\n  } catch (err) {\n    return this.emit('error', err);\n  }\n\n  if (this.ws.binaryType === undefined) {\n    this.supportsBinary = false;\n  }\n\n  if (this.ws.supports && this.ws.supports.binary) {\n    this.supportsBinary = true;\n    this.ws.binaryType = 'nodebuffer';\n  } else {\n    this.ws.binaryType = 'arraybuffer';\n  }\n\n  this.addEventListeners();\n};\n\n/**\n * Adds event listeners to the socket\n *\n * @api private\n */\n\nWS.prototype.addEventListeners = function () {\n  var self = this;\n\n  this.ws.onopen = function () {\n    self.onOpen();\n  };\n  this.ws.onclose = function () {\n    self.onClose();\n  };\n  this.ws.onmessage = function (ev) {\n    self.onData(ev.data);\n  };\n  this.ws.onerror = function (e) {\n    self.onError('websocket error', e);\n  };\n};\n\n/**\n * Writes data to socket.\n *\n * @param {Array} array of packets.\n * @api private\n */\n\nWS.prototype.write = function (packets) {\n  var self = this;\n  this.writable = false;\n\n  // encodePacket efficient as it uses WS framing\n  // no need for encodePayload\n  var total = packets.length;\n  for (var i = 0, l = total; i < l; i++) {\n    (function (packet) {\n      parser.encodePacket(packet, self.supportsBinary, function (data) {\n        if (!self.usingBrowserWebSocket) {\n          // always create a new object (GH-437)\n          var opts = {};\n          if (packet.options) {\n            opts.compress = packet.options.compress;\n          }\n\n          if (self.perMessageDeflate) {\n            var len = 'string' === typeof data ? Buffer.byteLength(data) : data.length;\n            if (len < self.perMessageDeflate.threshold) {\n              opts.compress = false;\n            }\n          }\n        }\n\n        // Sometimes the websocket has already been closed but the browser didn't\n        // have a chance of informing us about it yet, in that case send will\n        // throw an error\n        try {\n          if (self.usingBrowserWebSocket) {\n            // TypeError is thrown when passing the second argument on Safari\n            self.ws.send(data);\n          } else {\n            self.ws.send(data, opts);\n          }\n        } catch (e) {\n          debug('websocket closed before onclose event');\n        }\n\n        --total || done();\n      });\n    })(packets[i]);\n  }\n\n  function done () {\n    self.emit('flush');\n\n    // fake drain\n    // defer to next tick to allow Socket to clear writeBuffer\n    setTimeout(function () {\n      self.writable = true;\n      self.emit('drain');\n    }, 0);\n  }\n};\n\n/**\n * Called upon close\n *\n * @api private\n */\n\nWS.prototype.onClose = function () {\n  Transport.prototype.onClose.call(this);\n};\n\n/**\n * Closes socket.\n *\n * @api private\n */\n\nWS.prototype.doClose = function () {\n  if (typeof this.ws !== 'undefined') {\n    this.ws.close();\n  }\n};\n\n/**\n * Generates uri for connection.\n *\n * @api private\n */\n\nWS.prototype.uri = function () {\n  var query = this.query || {};\n  var schema = this.secure ? 'wss' : 'ws';\n  var port = '';\n\n  // avoid port if default for schema\n  if (this.port && (('wss' === schema && Number(this.port) !== 443) ||\n    ('ws' === schema && Number(this.port) !== 80))) {\n    port = ':' + this.port;\n  }\n\n  // append timestamp to URI\n  if (this.timestampRequests) {\n    query[this.timestampParam] = yeast();\n  }\n\n  // communicate binary support capabilities\n  if (!this.supportsBinary) {\n    query.b64 = 1;\n  }\n\n  query = parseqs.encode(query);\n\n  // prepend ? to query\n  if (query.length) {\n    query = '?' + query;\n  }\n\n  var ipv6 = this.hostname.indexOf(':') !== -1;\n  return schema + '://' + (ipv6 ? '[' + this.hostname + ']' : this.hostname) + port + this.path + query;\n};\n\n/**\n * Feature detection for WebSocket.\n *\n * @return {Boolean} whether this transport is available.\n * @api public\n */\n\nWS.prototype.check = function () {\n  return !!WebSocketImpl && !('__initialize' in WebSocketImpl && this.name === WS.prototype.name);\n};\n","// browser shim for xmlhttprequest module\n\nvar hasCORS = require('has-cors');\nvar globalThis = require('../globalThis');\n\nmodule.exports = function (opts) {\n  var xdomain = opts.xdomain;\n\n  // scheme must be same when usign XDomainRequest\n  // http://blogs.msdn.com/b/ieinternals/archive/2010/05/13/xdomainrequest-restrictions-limitations-and-workarounds.aspx\n  var xscheme = opts.xscheme;\n\n  // XDomainRequest has a flow of not sending cookie, therefore it should be disabled as a default.\n  // https://github.com/Automattic/engine.io-client/pull/217\n  var enablesXDR = opts.enablesXDR;\n\n  // XMLHttpRequest can be disabled on IE\n  try {\n    if ('undefined' !== typeof XMLHttpRequest && (!xdomain || hasCORS)) {\n      return new XMLHttpRequest();\n    }\n  } catch (e) { }\n\n  // Use XDomainRequest for IE8 if enablesXDR is true\n  // because loading bar keeps flashing when using jsonp-polling\n  // https://github.com/yujiosaka/socke.io-ie8-loading-example\n  try {\n    if ('undefined' !== typeof XDomainRequest && !xscheme && enablesXDR) {\n      return new XDomainRequest();\n    }\n  } catch (e) { }\n\n  if (!xdomain) {\n    try {\n      return new globalThis[['Active'].concat('Object').join('X')]('Microsoft.XMLHTTP');\n    } catch (e) { }\n  }\n};\n","/**\n * This is the web browser implementation of `debug()`.\n *\n * Expose `debug()` as the module.\n */\n\nexports = module.exports = require('./debug');\nexports.log = log;\nexports.formatArgs = formatArgs;\nexports.save = save;\nexports.load = load;\nexports.useColors = useColors;\nexports.storage = 'undefined' != typeof chrome\n               && 'undefined' != typeof chrome.storage\n                  ? chrome.storage.local\n                  : localstorage();\n\n/**\n * Colors.\n */\n\nexports.colors = [\n  '#0000CC', '#0000FF', '#0033CC', '#0033FF', '#0066CC', '#0066FF', '#0099CC',\n  '#0099FF', '#00CC00', '#00CC33', '#00CC66', '#00CC99', '#00CCCC', '#00CCFF',\n  '#3300CC', '#3300FF', '#3333CC', '#3333FF', '#3366CC', '#3366FF', '#3399CC',\n  '#3399FF', '#33CC00', '#33CC33', '#33CC66', '#33CC99', '#33CCCC', '#33CCFF',\n  '#6600CC', '#6600FF', '#6633CC', '#6633FF', '#66CC00', '#66CC33', '#9900CC',\n  '#9900FF', '#9933CC', '#9933FF', '#99CC00', '#99CC33', '#CC0000', '#CC0033',\n  '#CC0066', '#CC0099', '#CC00CC', '#CC00FF', '#CC3300', '#CC3333', '#CC3366',\n  '#CC3399', '#CC33CC', '#CC33FF', '#CC6600', '#CC6633', '#CC9900', '#CC9933',\n  '#CCCC00', '#CCCC33', '#FF0000', '#FF0033', '#FF0066', '#FF0099', '#FF00CC',\n  '#FF00FF', '#FF3300', '#FF3333', '#FF3366', '#FF3399', '#FF33CC', '#FF33FF',\n  '#FF6600', '#FF6633', '#FF9900', '#FF9933', '#FFCC00', '#FFCC33'\n];\n\n/**\n * Currently only WebKit-based Web Inspectors, Firefox >= v31,\n * and the Firebug extension (any Firefox version) are known\n * to support \"%c\" CSS customizations.\n *\n * TODO: add a `localStorage` variable to explicitly enable/disable colors\n */\n\nfunction useColors() {\n  // NB: In an Electron preload script, document will be defined but not fully\n  // initialized. Since we know we're in Chrome, we'll just detect this case\n  // explicitly\n  if (typeof window !== 'undefined' && window.process && window.process.type === 'renderer') {\n    return true;\n  }\n\n  // Internet Explorer and Edge do not support colors.\n  if (typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/(edge|trident)\\/(\\d+)/)) {\n    return false;\n  }\n\n  // is webkit? http://stackoverflow.com/a/16459606/376773\n  // document is undefined in react-native: https://github.com/facebook/react-native/pull/1632\n  return (typeof document !== 'undefined' && document.documentElement && document.documentElement.style && document.documentElement.style.WebkitAppearance) ||\n    // is firebug? http://stackoverflow.com/a/398120/376773\n    (typeof window !== 'undefined' && window.console && (window.console.firebug || (window.console.exception && window.console.table))) ||\n    // is firefox >= v31?\n    // https://developer.mozilla.org/en-US/docs/Tools/Web_Console#Styling_messages\n    (typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/firefox\\/(\\d+)/) && parseInt(RegExp.$1, 10) >= 31) ||\n    // double check webkit in userAgent just in case we are in a worker\n    (typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/applewebkit\\/(\\d+)/));\n}\n\n/**\n * Map %j to `JSON.stringify()`, since no Web Inspectors do that by default.\n */\n\nexports.formatters.j = function(v) {\n  try {\n    return JSON.stringify(v);\n  } catch (err) {\n    return '[UnexpectedJSONParseError]: ' + err.message;\n  }\n};\n\n\n/**\n * Colorize log arguments if enabled.\n *\n * @api public\n */\n\nfunction formatArgs(args) {\n  var useColors = this.useColors;\n\n  args[0] = (useColors ? '%c' : '')\n    + this.namespace\n    + (useColors ? ' %c' : ' ')\n    + args[0]\n    + (useColors ? '%c ' : ' ')\n    + '+' + exports.humanize(this.diff);\n\n  if (!useColors) return;\n\n  var c = 'color: ' + this.color;\n  args.splice(1, 0, c, 'color: inherit')\n\n  // the final \"%c\" is somewhat tricky, because there could be other\n  // arguments passed either before or after the %c, so we need to\n  // figure out the correct index to insert the CSS into\n  var index = 0;\n  var lastC = 0;\n  args[0].replace(/%[a-zA-Z%]/g, function(match) {\n    if ('%%' === match) return;\n    index++;\n    if ('%c' === match) {\n      // we only are interested in the *last* %c\n      // (the user may have provided their own)\n      lastC = index;\n    }\n  });\n\n  args.splice(lastC, 0, c);\n}\n\n/**\n * Invokes `console.log()` when available.\n * No-op when `console.log` is not a \"function\".\n *\n * @api public\n */\n\nfunction log() {\n  // this hackery is required for IE8/9, where\n  // the `console.log` function doesn't have 'apply'\n  return 'object' === typeof console\n    && console.log\n    && Function.prototype.apply.call(console.log, console, arguments);\n}\n\n/**\n * Save `namespaces`.\n *\n * @param {String} namespaces\n * @api private\n */\n\nfunction save(namespaces) {\n  try {\n    if (null == namespaces) {\n      exports.storage.removeItem('debug');\n    } else {\n      exports.storage.debug = namespaces;\n    }\n  } catch(e) {}\n}\n\n/**\n * Load `namespaces`.\n *\n * @return {String} returns the previously persisted debug modes\n * @api private\n */\n\nfunction load() {\n  var r;\n  try {\n    r = exports.storage.debug;\n  } catch(e) {}\n\n  // If debug isn't set in LS, and we're in Electron, try to load $DEBUG\n  if (!r && typeof process !== 'undefined' && 'env' in process) {\n    r = process.env.DEBUG;\n  }\n\n  return r;\n}\n\n/**\n * Enable namespaces listed in `localStorage.debug` initially.\n */\n\nexports.enable(load());\n\n/**\n * Localstorage attempts to return the localstorage.\n *\n * This is necessary because safari throws\n * when a user disables cookies/localstorage\n * and you attempt to access it.\n *\n * @return {LocalStorage}\n * @api private\n */\n\nfunction localstorage() {\n  try {\n    return window.localStorage;\n  } catch (e) {}\n}\n","\n/**\n * This is the common logic for both the Node.js and web browser\n * implementations of `debug()`.\n *\n * Expose `debug()` as the module.\n */\n\nexports = module.exports = createDebug.debug = createDebug['default'] = createDebug;\nexports.coerce = coerce;\nexports.disable = disable;\nexports.enable = enable;\nexports.enabled = enabled;\nexports.humanize = require('ms');\n\n/**\n * Active `debug` instances.\n */\nexports.instances = [];\n\n/**\n * The currently active debug mode names, and names to skip.\n */\n\nexports.names = [];\nexports.skips = [];\n\n/**\n * Map of special \"%n\" handling functions, for the debug \"format\" argument.\n *\n * Valid key names are a single, lower or upper-case letter, i.e. \"n\" and \"N\".\n */\n\nexports.formatters = {};\n\n/**\n * Select a color.\n * @param {String} namespace\n * @return {Number}\n * @api private\n */\n\nfunction selectColor(namespace) {\n  var hash = 0, i;\n\n  for (i in namespace) {\n    hash  = ((hash << 5) - hash) + namespace.charCodeAt(i);\n    hash |= 0; // Convert to 32bit integer\n  }\n\n  return exports.colors[Math.abs(hash) % exports.colors.length];\n}\n\n/**\n * Create a debugger with the given `namespace`.\n *\n * @param {String} namespace\n * @return {Function}\n * @api public\n */\n\nfunction createDebug(namespace) {\n\n  var prevTime;\n\n  function debug() {\n    // disabled?\n    if (!debug.enabled) return;\n\n    var self = debug;\n\n    // set `diff` timestamp\n    var curr = +new Date();\n    var ms = curr - (prevTime || curr);\n    self.diff = ms;\n    self.prev = prevTime;\n    self.curr = curr;\n    prevTime = curr;\n\n    // turn the `arguments` into a proper Array\n    var args = new Array(arguments.length);\n    for (var i = 0; i < args.length; i++) {\n      args[i] = arguments[i];\n    }\n\n    args[0] = exports.coerce(args[0]);\n\n    if ('string' !== typeof args[0]) {\n      // anything else let's inspect with %O\n      args.unshift('%O');\n    }\n\n    // apply any `formatters` transformations\n    var index = 0;\n    args[0] = args[0].replace(/%([a-zA-Z%])/g, function(match, format) {\n      // if we encounter an escaped % then don't increase the array index\n      if (match === '%%') return match;\n      index++;\n      var formatter = exports.formatters[format];\n      if ('function' === typeof formatter) {\n        var val = args[index];\n        match = formatter.call(self, val);\n\n        // now we need to remove `args[index]` since it's inlined in the `format`\n        args.splice(index, 1);\n        index--;\n      }\n      return match;\n    });\n\n    // apply env-specific formatting (colors, etc.)\n    exports.formatArgs.call(self, args);\n\n    var logFn = debug.log || exports.log || console.log.bind(console);\n    logFn.apply(self, args);\n  }\n\n  debug.namespace = namespace;\n  debug.enabled = exports.enabled(namespace);\n  debug.useColors = exports.useColors();\n  debug.color = selectColor(namespace);\n  debug.destroy = destroy;\n\n  // env-specific initialization logic for debug instances\n  if ('function' === typeof exports.init) {\n    exports.init(debug);\n  }\n\n  exports.instances.push(debug);\n\n  return debug;\n}\n\nfunction destroy () {\n  var index = exports.instances.indexOf(this);\n  if (index !== -1) {\n    exports.instances.splice(index, 1);\n    return true;\n  } else {\n    return false;\n  }\n}\n\n/**\n * Enables a debug mode by namespaces. This can include modes\n * separated by a colon and wildcards.\n *\n * @param {String} namespaces\n * @api public\n */\n\nfunction enable(namespaces) {\n  exports.save(namespaces);\n\n  exports.names = [];\n  exports.skips = [];\n\n  var i;\n  var split = (typeof namespaces === 'string' ? namespaces : '').split(/[\\s,]+/);\n  var len = split.length;\n\n  for (i = 0; i < len; i++) {\n    if (!split[i]) continue; // ignore empty strings\n    namespaces = split[i].replace(/\\*/g, '.*?');\n    if (namespaces[0] === '-') {\n      exports.skips.push(new RegExp('^' + namespaces.substr(1) + '$'));\n    } else {\n      exports.names.push(new RegExp('^' + namespaces + '$'));\n    }\n  }\n\n  for (i = 0; i < exports.instances.length; i++) {\n    var instance = exports.instances[i];\n    instance.enabled = exports.enabled(instance.namespace);\n  }\n}\n\n/**\n * Disable debug output.\n *\n * @api public\n */\n\nfunction disable() {\n  exports.enable('');\n}\n\n/**\n * Returns true if the given mode name is enabled, false otherwise.\n *\n * @param {String} name\n * @return {Boolean}\n * @api public\n */\n\nfunction enabled(name) {\n  if (name[name.length - 1] === '*') {\n    return true;\n  }\n  var i, len;\n  for (i = 0, len = exports.skips.length; i < len; i++) {\n    if (exports.skips[i].test(name)) {\n      return false;\n    }\n  }\n  for (i = 0, len = exports.names.length; i < len; i++) {\n    if (exports.names[i].test(name)) {\n      return true;\n    }\n  }\n  return false;\n}\n\n/**\n * Coerce `val`.\n *\n * @param {Mixed} val\n * @return {Mixed}\n * @api private\n */\n\nfunction coerce(val) {\n  if (val instanceof Error) return val.stack || val.message;\n  return val;\n}\n","/**\n * Helpers.\n */\n\nvar s = 1000;\nvar m = s * 60;\nvar h = m * 60;\nvar d = h * 24;\nvar y = d * 365.25;\n\n/**\n * Parse or format the given `val`.\n *\n * Options:\n *\n *  - `long` verbose formatting [false]\n *\n * @param {String|Number} val\n * @param {Object} [options]\n * @throws {Error} throw an error if val is not a non-empty string or a number\n * @return {String|Number}\n * @api public\n */\n\nmodule.exports = function(val, options) {\n  options = options || {};\n  var type = typeof val;\n  if (type === 'string' && val.length > 0) {\n    return parse(val);\n  } else if (type === 'number' && isNaN(val) === false) {\n    return options.long ? fmtLong(val) : fmtShort(val);\n  }\n  throw new Error(\n    'val is not a non-empty string or a valid number. val=' +\n      JSON.stringify(val)\n  );\n};\n\n/**\n * Parse the given `str` and return milliseconds.\n *\n * @param {String} str\n * @return {Number}\n * @api private\n */\n\nfunction parse(str) {\n  str = String(str);\n  if (str.length > 100) {\n    return;\n  }\n  var match = /^((?:\\d+)?\\.?\\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(\n    str\n  );\n  if (!match) {\n    return;\n  }\n  var n = parseFloat(match[1]);\n  var type = (match[2] || 'ms').toLowerCase();\n  switch (type) {\n    case 'years':\n    case 'year':\n    case 'yrs':\n    case 'yr':\n    case 'y':\n      return n * y;\n    case 'days':\n    case 'day':\n    case 'd':\n      return n * d;\n    case 'hours':\n    case 'hour':\n    case 'hrs':\n    case 'hr':\n    case 'h':\n      return n * h;\n    case 'minutes':\n    case 'minute':\n    case 'mins':\n    case 'min':\n    case 'm':\n      return n * m;\n    case 'seconds':\n    case 'second':\n    case 'secs':\n    case 'sec':\n    case 's':\n      return n * s;\n    case 'milliseconds':\n    case 'millisecond':\n    case 'msecs':\n    case 'msec':\n    case 'ms':\n      return n;\n    default:\n      return undefined;\n  }\n}\n\n/**\n * Short format for `ms`.\n *\n * @param {Number} ms\n * @return {String}\n * @api private\n */\n\nfunction fmtShort(ms) {\n  if (ms >= d) {\n    return Math.round(ms / d) + 'd';\n  }\n  if (ms >= h) {\n    return Math.round(ms / h) + 'h';\n  }\n  if (ms >= m) {\n    return Math.round(ms / m) + 'm';\n  }\n  if (ms >= s) {\n    return Math.round(ms / s) + 's';\n  }\n  return ms + 'ms';\n}\n\n/**\n * Long format for `ms`.\n *\n * @param {Number} ms\n * @return {String}\n * @api private\n */\n\nfunction fmtLong(ms) {\n  return plural(ms, d, 'day') ||\n    plural(ms, h, 'hour') ||\n    plural(ms, m, 'minute') ||\n    plural(ms, s, 'second') ||\n    ms + ' ms';\n}\n\n/**\n * Pluralization helper.\n */\n\nfunction plural(ms, n, name) {\n  if (ms < n) {\n    return;\n  }\n  if (ms < n * 1.5) {\n    return Math.floor(ms / n) + ' ' + name;\n  }\n  return Math.ceil(ms / n) + ' ' + name + 's';\n}\n","/**\n * Module dependencies.\n */\n\nvar keys = require('./keys');\nvar hasBinary = require('has-binary2');\nvar sliceBuffer = require('arraybuffer.slice');\nvar after = require('after');\nvar utf8 = require('./utf8');\n\nvar base64encoder;\nif (typeof ArrayBuffer !== 'undefined') {\n  base64encoder = require('base64-arraybuffer');\n}\n\n/**\n * Check if we are running an android browser. That requires us to use\n * ArrayBuffer with polling transports...\n *\n * http://ghinda.net/jpeg-blob-ajax-android/\n */\n\nvar isAndroid = typeof navigator !== 'undefined' && /Android/i.test(navigator.userAgent);\n\n/**\n * Check if we are running in PhantomJS.\n * Uploading a Blob with PhantomJS does not work correctly, as reported here:\n * https://github.com/ariya/phantomjs/issues/11395\n * @type boolean\n */\nvar isPhantomJS = typeof navigator !== 'undefined' && /PhantomJS/i.test(navigator.userAgent);\n\n/**\n * When true, avoids using Blobs to encode payloads.\n * @type boolean\n */\nvar dontSendBlobs = isAndroid || isPhantomJS;\n\n/**\n * Current protocol version.\n */\n\nexports.protocol = 3;\n\n/**\n * Packet types.\n */\n\nvar packets = exports.packets = {\n    open:     0    // non-ws\n  , close:    1    // non-ws\n  , ping:     2\n  , pong:     3\n  , message:  4\n  , upgrade:  5\n  , noop:     6\n};\n\nvar packetslist = keys(packets);\n\n/**\n * Premade error packet.\n */\n\nvar err = { type: 'error', data: 'parser error' };\n\n/**\n * Create a blob api even for blob builder when vendor prefixes exist\n */\n\nvar Blob = require('blob');\n\n/**\n * Encodes a packet.\n *\n *     <packet type id> [ <data> ]\n *\n * Example:\n *\n *     5hello world\n *     3\n *     4\n *\n * Binary is encoded in an identical principle\n *\n * @api private\n */\n\nexports.encodePacket = function (packet, supportsBinary, utf8encode, callback) {\n  if (typeof supportsBinary === 'function') {\n    callback = supportsBinary;\n    supportsBinary = false;\n  }\n\n  if (typeof utf8encode === 'function') {\n    callback = utf8encode;\n    utf8encode = null;\n  }\n\n  var data = (packet.data === undefined)\n    ? undefined\n    : packet.data.buffer || packet.data;\n\n  if (typeof ArrayBuffer !== 'undefined' && data instanceof ArrayBuffer) {\n    return encodeArrayBuffer(packet, supportsBinary, callback);\n  } else if (typeof Blob !== 'undefined' && data instanceof Blob) {\n    return encodeBlob(packet, supportsBinary, callback);\n  }\n\n  // might be an object with { base64: true, data: dataAsBase64String }\n  if (data && data.base64) {\n    return encodeBase64Object(packet, callback);\n  }\n\n  // Sending data as a utf-8 string\n  var encoded = packets[packet.type];\n\n  // data fragment is optional\n  if (undefined !== packet.data) {\n    encoded += utf8encode ? utf8.encode(String(packet.data), { strict: false }) : String(packet.data);\n  }\n\n  return callback('' + encoded);\n\n};\n\nfunction encodeBase64Object(packet, callback) {\n  // packet data is an object { base64: true, data: dataAsBase64String }\n  var message = 'b' + exports.packets[packet.type] + packet.data.data;\n  return callback(message);\n}\n\n/**\n * Encode packet helpers for binary types\n */\n\nfunction encodeArrayBuffer(packet, supportsBinary, callback) {\n  if (!supportsBinary) {\n    return exports.encodeBase64Packet(packet, callback);\n  }\n\n  var data = packet.data;\n  var contentArray = new Uint8Array(data);\n  var resultBuffer = new Uint8Array(1 + data.byteLength);\n\n  resultBuffer[0] = packets[packet.type];\n  for (var i = 0; i < contentArray.length; i++) {\n    resultBuffer[i+1] = contentArray[i];\n  }\n\n  return callback(resultBuffer.buffer);\n}\n\nfunction encodeBlobAsArrayBuffer(packet, supportsBinary, callback) {\n  if (!supportsBinary) {\n    return exports.encodeBase64Packet(packet, callback);\n  }\n\n  var fr = new FileReader();\n  fr.onload = function() {\n    exports.encodePacket({ type: packet.type, data: fr.result }, supportsBinary, true, callback);\n  };\n  return fr.readAsArrayBuffer(packet.data);\n}\n\nfunction encodeBlob(packet, supportsBinary, callback) {\n  if (!supportsBinary) {\n    return exports.encodeBase64Packet(packet, callback);\n  }\n\n  if (dontSendBlobs) {\n    return encodeBlobAsArrayBuffer(packet, supportsBinary, callback);\n  }\n\n  var length = new Uint8Array(1);\n  length[0] = packets[packet.type];\n  var blob = new Blob([length.buffer, packet.data]);\n\n  return callback(blob);\n}\n\n/**\n * Encodes a packet with binary data in a base64 string\n *\n * @param {Object} packet, has `type` and `data`\n * @return {String} base64 encoded message\n */\n\nexports.encodeBase64Packet = function(packet, callback) {\n  var message = 'b' + exports.packets[packet.type];\n  if (typeof Blob !== 'undefined' && packet.data instanceof Blob) {\n    var fr = new FileReader();\n    fr.onload = function() {\n      var b64 = fr.result.split(',')[1];\n      callback(message + b64);\n    };\n    return fr.readAsDataURL(packet.data);\n  }\n\n  var b64data;\n  try {\n    b64data = String.fromCharCode.apply(null, new Uint8Array(packet.data));\n  } catch (e) {\n    // iPhone Safari doesn't let you apply with typed arrays\n    var typed = new Uint8Array(packet.data);\n    var basic = new Array(typed.length);\n    for (var i = 0; i < typed.length; i++) {\n      basic[i] = typed[i];\n    }\n    b64data = String.fromCharCode.apply(null, basic);\n  }\n  message += btoa(b64data);\n  return callback(message);\n};\n\n/**\n * Decodes a packet. Changes format to Blob if requested.\n *\n * @return {Object} with `type` and `data` (if any)\n * @api private\n */\n\nexports.decodePacket = function (data, binaryType, utf8decode) {\n  if (data === undefined) {\n    return err;\n  }\n  // String data\n  if (typeof data === 'string') {\n    if (data.charAt(0) === 'b') {\n      return exports.decodeBase64Packet(data.substr(1), binaryType);\n    }\n\n    if (utf8decode) {\n      data = tryDecode(data);\n      if (data === false) {\n        return err;\n      }\n    }\n    var type = data.charAt(0);\n\n    if (Number(type) != type || !packetslist[type]) {\n      return err;\n    }\n\n    if (data.length > 1) {\n      return { type: packetslist[type], data: data.substring(1) };\n    } else {\n      return { type: packetslist[type] };\n    }\n  }\n\n  var asArray = new Uint8Array(data);\n  var type = asArray[0];\n  var rest = sliceBuffer(data, 1);\n  if (Blob && binaryType === 'blob') {\n    rest = new Blob([rest]);\n  }\n  return { type: packetslist[type], data: rest };\n};\n\nfunction tryDecode(data) {\n  try {\n    data = utf8.decode(data, { strict: false });\n  } catch (e) {\n    return false;\n  }\n  return data;\n}\n\n/**\n * Decodes a packet encoded in a base64 string\n *\n * @param {String} base64 encoded message\n * @return {Object} with `type` and `data` (if any)\n */\n\nexports.decodeBase64Packet = function(msg, binaryType) {\n  var type = packetslist[msg.charAt(0)];\n  if (!base64encoder) {\n    return { type: type, data: { base64: true, data: msg.substr(1) } };\n  }\n\n  var data = base64encoder.decode(msg.substr(1));\n\n  if (binaryType === 'blob' && Blob) {\n    data = new Blob([data]);\n  }\n\n  return { type: type, data: data };\n};\n\n/**\n * Encodes multiple messages (payload).\n *\n *     <length>:data\n *\n * Example:\n *\n *     11:hello world2:hi\n *\n * If any contents are binary, they will be encoded as base64 strings. Base64\n * encoded strings are marked with a b before the length specifier\n *\n * @param {Array} packets\n * @api private\n */\n\nexports.encodePayload = function (packets, supportsBinary, callback) {\n  if (typeof supportsBinary === 'function') {\n    callback = supportsBinary;\n    supportsBinary = null;\n  }\n\n  var isBinary = hasBinary(packets);\n\n  if (supportsBinary && isBinary) {\n    if (Blob && !dontSendBlobs) {\n      return exports.encodePayloadAsBlob(packets, callback);\n    }\n\n    return exports.encodePayloadAsArrayBuffer(packets, callback);\n  }\n\n  if (!packets.length) {\n    return callback('0:');\n  }\n\n  function setLengthHeader(message) {\n    return message.length + ':' + message;\n  }\n\n  function encodeOne(packet, doneCallback) {\n    exports.encodePacket(packet, !isBinary ? false : supportsBinary, false, function(message) {\n      doneCallback(null, setLengthHeader(message));\n    });\n  }\n\n  map(packets, encodeOne, function(err, results) {\n    return callback(results.join(''));\n  });\n};\n\n/**\n * Async array map using after\n */\n\nfunction map(ary, each, done) {\n  var result = new Array(ary.length);\n  var next = after(ary.length, done);\n\n  var eachWithIndex = function(i, el, cb) {\n    each(el, function(error, msg) {\n      result[i] = msg;\n      cb(error, result);\n    });\n  };\n\n  for (var i = 0; i < ary.length; i++) {\n    eachWithIndex(i, ary[i], next);\n  }\n}\n\n/*\n * Decodes data when a payload is maybe expected. Possible binary contents are\n * decoded from their base64 representation\n *\n * @param {String} data, callback method\n * @api public\n */\n\nexports.decodePayload = function (data, binaryType, callback) {\n  if (typeof data !== 'string') {\n    return exports.decodePayloadAsBinary(data, binaryType, callback);\n  }\n\n  if (typeof binaryType === 'function') {\n    callback = binaryType;\n    binaryType = null;\n  }\n\n  var packet;\n  if (data === '') {\n    // parser error - ignoring payload\n    return callback(err, 0, 1);\n  }\n\n  var length = '', n, msg;\n\n  for (var i = 0, l = data.length; i < l; i++) {\n    var chr = data.charAt(i);\n\n    if (chr !== ':') {\n      length += chr;\n      continue;\n    }\n\n    if (length === '' || (length != (n = Number(length)))) {\n      // parser error - ignoring payload\n      return callback(err, 0, 1);\n    }\n\n    msg = data.substr(i + 1, n);\n\n    if (length != msg.length) {\n      // parser error - ignoring payload\n      return callback(err, 0, 1);\n    }\n\n    if (msg.length) {\n      packet = exports.decodePacket(msg, binaryType, false);\n\n      if (err.type === packet.type && err.data === packet.data) {\n        // parser error in individual packet - ignoring payload\n        return callback(err, 0, 1);\n      }\n\n      var ret = callback(packet, i + n, l);\n      if (false === ret) return;\n    }\n\n    // advance cursor\n    i += n;\n    length = '';\n  }\n\n  if (length !== '') {\n    // parser error - ignoring payload\n    return callback(err, 0, 1);\n  }\n\n};\n\n/**\n * Encodes multiple messages (payload) as binary.\n *\n * <1 = binary, 0 = string><number from 0-9><number from 0-9>[...]<number\n * 255><data>\n *\n * Example:\n * 1 3 255 1 2 3, if the binary contents are interpreted as 8 bit integers\n *\n * @param {Array} packets\n * @return {ArrayBuffer} encoded payload\n * @api private\n */\n\nexports.encodePayloadAsArrayBuffer = function(packets, callback) {\n  if (!packets.length) {\n    return callback(new ArrayBuffer(0));\n  }\n\n  function encodeOne(packet, doneCallback) {\n    exports.encodePacket(packet, true, true, function(data) {\n      return doneCallback(null, data);\n    });\n  }\n\n  map(packets, encodeOne, function(err, encodedPackets) {\n    var totalLength = encodedPackets.reduce(function(acc, p) {\n      var len;\n      if (typeof p === 'string'){\n        len = p.length;\n      } else {\n        len = p.byteLength;\n      }\n      return acc + len.toString().length + len + 2; // string/binary identifier + separator = 2\n    }, 0);\n\n    var resultArray = new Uint8Array(totalLength);\n\n    var bufferIndex = 0;\n    encodedPackets.forEach(function(p) {\n      var isString = typeof p === 'string';\n      var ab = p;\n      if (isString) {\n        var view = new Uint8Array(p.length);\n        for (var i = 0; i < p.length; i++) {\n          view[i] = p.charCodeAt(i);\n        }\n        ab = view.buffer;\n      }\n\n      if (isString) { // not true binary\n        resultArray[bufferIndex++] = 0;\n      } else { // true binary\n        resultArray[bufferIndex++] = 1;\n      }\n\n      var lenStr = ab.byteLength.toString();\n      for (var i = 0; i < lenStr.length; i++) {\n        resultArray[bufferIndex++] = parseInt(lenStr[i]);\n      }\n      resultArray[bufferIndex++] = 255;\n\n      var view = new Uint8Array(ab);\n      for (var i = 0; i < view.length; i++) {\n        resultArray[bufferIndex++] = view[i];\n      }\n    });\n\n    return callback(resultArray.buffer);\n  });\n};\n\n/**\n * Encode as Blob\n */\n\nexports.encodePayloadAsBlob = function(packets, callback) {\n  function encodeOne(packet, doneCallback) {\n    exports.encodePacket(packet, true, true, function(encoded) {\n      var binaryIdentifier = new Uint8Array(1);\n      binaryIdentifier[0] = 1;\n      if (typeof encoded === 'string') {\n        var view = new Uint8Array(encoded.length);\n        for (var i = 0; i < encoded.length; i++) {\n          view[i] = encoded.charCodeAt(i);\n        }\n        encoded = view.buffer;\n        binaryIdentifier[0] = 0;\n      }\n\n      var len = (encoded instanceof ArrayBuffer)\n        ? encoded.byteLength\n        : encoded.size;\n\n      var lenStr = len.toString();\n      var lengthAry = new Uint8Array(lenStr.length + 1);\n      for (var i = 0; i < lenStr.length; i++) {\n        lengthAry[i] = parseInt(lenStr[i]);\n      }\n      lengthAry[lenStr.length] = 255;\n\n      if (Blob) {\n        var blob = new Blob([binaryIdentifier.buffer, lengthAry.buffer, encoded]);\n        doneCallback(null, blob);\n      }\n    });\n  }\n\n  map(packets, encodeOne, function(err, results) {\n    return callback(new Blob(results));\n  });\n};\n\n/*\n * Decodes data when a payload is maybe expected. Strings are decoded by\n * interpreting each byte as a key code for entries marked to start with 0. See\n * description of encodePayloadAsBinary\n *\n * @param {ArrayBuffer} data, callback method\n * @api public\n */\n\nexports.decodePayloadAsBinary = function (data, binaryType, callback) {\n  if (typeof binaryType === 'function') {\n    callback = binaryType;\n    binaryType = null;\n  }\n\n  var bufferTail = data;\n  var buffers = [];\n\n  while (bufferTail.byteLength > 0) {\n    var tailArray = new Uint8Array(bufferTail);\n    var isString = tailArray[0] === 0;\n    var msgLength = '';\n\n    for (var i = 1; ; i++) {\n      if (tailArray[i] === 255) break;\n\n      // 310 = char length of Number.MAX_VALUE\n      if (msgLength.length > 310) {\n        return callback(err, 0, 1);\n      }\n\n      msgLength += tailArray[i];\n    }\n\n    bufferTail = sliceBuffer(bufferTail, 2 + msgLength.length);\n    msgLength = parseInt(msgLength);\n\n    var msg = sliceBuffer(bufferTail, 0, msgLength);\n    if (isString) {\n      try {\n        msg = String.fromCharCode.apply(null, new Uint8Array(msg));\n      } catch (e) {\n        // iPhone Safari doesn't let you apply to typed arrays\n        var typed = new Uint8Array(msg);\n        msg = '';\n        for (var i = 0; i < typed.length; i++) {\n          msg += String.fromCharCode(typed[i]);\n        }\n      }\n    }\n\n    buffers.push(msg);\n    bufferTail = sliceBuffer(bufferTail, msgLength);\n  }\n\n  var total = buffers.length;\n  buffers.forEach(function(buffer, i) {\n    callback(exports.decodePacket(buffer, binaryType, true), i, total);\n  });\n};\n","\n/**\n * Gets the keys for an object.\n *\n * @return {Array} keys\n * @api private\n */\n\nmodule.exports = Object.keys || function keys (obj){\n  var arr = [];\n  var has = Object.prototype.hasOwnProperty;\n\n  for (var i in obj) {\n    if (has.call(obj, i)) {\n      arr.push(i);\n    }\n  }\n  return arr;\n};\n","/*! https://mths.be/utf8js v2.1.2 by @mathias */\n\nvar stringFromCharCode = String.fromCharCode;\n\n// Taken from https://mths.be/punycode\nfunction ucs2decode(string) {\n\tvar output = [];\n\tvar counter = 0;\n\tvar length = string.length;\n\tvar value;\n\tvar extra;\n\twhile (counter < length) {\n\t\tvalue = string.charCodeAt(counter++);\n\t\tif (value >= 0xD800 && value <= 0xDBFF && counter < length) {\n\t\t\t// high surrogate, and there is a next character\n\t\t\textra = string.charCodeAt(counter++);\n\t\t\tif ((extra & 0xFC00) == 0xDC00) { // low surrogate\n\t\t\t\toutput.push(((value & 0x3FF) << 10) + (extra & 0x3FF) + 0x10000);\n\t\t\t} else {\n\t\t\t\t// unmatched surrogate; only append this code unit, in case the next\n\t\t\t\t// code unit is the high surrogate of a surrogate pair\n\t\t\t\toutput.push(value);\n\t\t\t\tcounter--;\n\t\t\t}\n\t\t} else {\n\t\t\toutput.push(value);\n\t\t}\n\t}\n\treturn output;\n}\n\n// Taken from https://mths.be/punycode\nfunction ucs2encode(array) {\n\tvar length = array.length;\n\tvar index = -1;\n\tvar value;\n\tvar output = '';\n\twhile (++index < length) {\n\t\tvalue = array[index];\n\t\tif (value > 0xFFFF) {\n\t\t\tvalue -= 0x10000;\n\t\t\toutput += stringFromCharCode(value >>> 10 & 0x3FF | 0xD800);\n\t\t\tvalue = 0xDC00 | value & 0x3FF;\n\t\t}\n\t\toutput += stringFromCharCode(value);\n\t}\n\treturn output;\n}\n\nfunction checkScalarValue(codePoint, strict) {\n\tif (codePoint >= 0xD800 && codePoint <= 0xDFFF) {\n\t\tif (strict) {\n\t\t\tthrow Error(\n\t\t\t\t'Lone surrogate U+' + codePoint.toString(16).toUpperCase() +\n\t\t\t\t' is not a scalar value'\n\t\t\t);\n\t\t}\n\t\treturn false;\n\t}\n\treturn true;\n}\n/*--------------------------------------------------------------------------*/\n\nfunction createByte(codePoint, shift) {\n\treturn stringFromCharCode(((codePoint >> shift) & 0x3F) | 0x80);\n}\n\nfunction encodeCodePoint(codePoint, strict) {\n\tif ((codePoint & 0xFFFFFF80) == 0) { // 1-byte sequence\n\t\treturn stringFromCharCode(codePoint);\n\t}\n\tvar symbol = '';\n\tif ((codePoint & 0xFFFFF800) == 0) { // 2-byte sequence\n\t\tsymbol = stringFromCharCode(((codePoint >> 6) & 0x1F) | 0xC0);\n\t}\n\telse if ((codePoint & 0xFFFF0000) == 0) { // 3-byte sequence\n\t\tif (!checkScalarValue(codePoint, strict)) {\n\t\t\tcodePoint = 0xFFFD;\n\t\t}\n\t\tsymbol = stringFromCharCode(((codePoint >> 12) & 0x0F) | 0xE0);\n\t\tsymbol += createByte(codePoint, 6);\n\t}\n\telse if ((codePoint & 0xFFE00000) == 0) { // 4-byte sequence\n\t\tsymbol = stringFromCharCode(((codePoint >> 18) & 0x07) | 0xF0);\n\t\tsymbol += createByte(codePoint, 12);\n\t\tsymbol += createByte(codePoint, 6);\n\t}\n\tsymbol += stringFromCharCode((codePoint & 0x3F) | 0x80);\n\treturn symbol;\n}\n\nfunction utf8encode(string, opts) {\n\topts = opts || {};\n\tvar strict = false !== opts.strict;\n\n\tvar codePoints = ucs2decode(string);\n\tvar length = codePoints.length;\n\tvar index = -1;\n\tvar codePoint;\n\tvar byteString = '';\n\twhile (++index < length) {\n\t\tcodePoint = codePoints[index];\n\t\tbyteString += encodeCodePoint(codePoint, strict);\n\t}\n\treturn byteString;\n}\n\n/*--------------------------------------------------------------------------*/\n\nfunction readContinuationByte() {\n\tif (byteIndex >= byteCount) {\n\t\tthrow Error('Invalid byte index');\n\t}\n\n\tvar continuationByte = byteArray[byteIndex] & 0xFF;\n\tbyteIndex++;\n\n\tif ((continuationByte & 0xC0) == 0x80) {\n\t\treturn continuationByte & 0x3F;\n\t}\n\n\t// If we end up here, its not a continuation byte\n\tthrow Error('Invalid continuation byte');\n}\n\nfunction decodeSymbol(strict) {\n\tvar byte1;\n\tvar byte2;\n\tvar byte3;\n\tvar byte4;\n\tvar codePoint;\n\n\tif (byteIndex > byteCount) {\n\t\tthrow Error('Invalid byte index');\n\t}\n\n\tif (byteIndex == byteCount) {\n\t\treturn false;\n\t}\n\n\t// Read first byte\n\tbyte1 = byteArray[byteIndex] & 0xFF;\n\tbyteIndex++;\n\n\t// 1-byte sequence (no continuation bytes)\n\tif ((byte1 & 0x80) == 0) {\n\t\treturn byte1;\n\t}\n\n\t// 2-byte sequence\n\tif ((byte1 & 0xE0) == 0xC0) {\n\t\tbyte2 = readContinuationByte();\n\t\tcodePoint = ((byte1 & 0x1F) << 6) | byte2;\n\t\tif (codePoint >= 0x80) {\n\t\t\treturn codePoint;\n\t\t} else {\n\t\t\tthrow Error('Invalid continuation byte');\n\t\t}\n\t}\n\n\t// 3-byte sequence (may include unpaired surrogates)\n\tif ((byte1 & 0xF0) == 0xE0) {\n\t\tbyte2 = readContinuationByte();\n\t\tbyte3 = readContinuationByte();\n\t\tcodePoint = ((byte1 & 0x0F) << 12) | (byte2 << 6) | byte3;\n\t\tif (codePoint >= 0x0800) {\n\t\t\treturn checkScalarValue(codePoint, strict) ? codePoint : 0xFFFD;\n\t\t} else {\n\t\t\tthrow Error('Invalid continuation byte');\n\t\t}\n\t}\n\n\t// 4-byte sequence\n\tif ((byte1 & 0xF8) == 0xF0) {\n\t\tbyte2 = readContinuationByte();\n\t\tbyte3 = readContinuationByte();\n\t\tbyte4 = readContinuationByte();\n\t\tcodePoint = ((byte1 & 0x07) << 0x12) | (byte2 << 0x0C) |\n\t\t\t(byte3 << 0x06) | byte4;\n\t\tif (codePoint >= 0x010000 && codePoint <= 0x10FFFF) {\n\t\t\treturn codePoint;\n\t\t}\n\t}\n\n\tthrow Error('Invalid UTF-8 detected');\n}\n\nvar byteArray;\nvar byteCount;\nvar byteIndex;\nfunction utf8decode(byteString, opts) {\n\topts = opts || {};\n\tvar strict = false !== opts.strict;\n\n\tbyteArray = ucs2decode(byteString);\n\tbyteCount = byteArray.length;\n\tbyteIndex = 0;\n\tvar codePoints = [];\n\tvar tmp;\n\twhile ((tmp = decodeSymbol(strict)) !== false) {\n\t\tcodePoints.push(tmp);\n\t}\n\treturn ucs2encode(codePoints);\n}\n\nmodule.exports = {\n\tversion: '2.1.2',\n\tencode: utf8encode,\n\tdecode: utf8decode\n};\n","/* global Blob File */\n\n/*\n * Module requirements.\n */\n\nvar isArray = require('isarray');\n\nvar toString = Object.prototype.toString;\nvar withNativeBlob = typeof Blob === 'function' ||\n                        typeof Blob !== 'undefined' && toString.call(Blob) === '[object BlobConstructor]';\nvar withNativeFile = typeof File === 'function' ||\n                        typeof File !== 'undefined' && toString.call(File) === '[object FileConstructor]';\n\n/**\n * Module exports.\n */\n\nmodule.exports = hasBinary;\n\n/**\n * Checks for binary data.\n *\n * Supports Buffer, ArrayBuffer, Blob and File.\n *\n * @param {Object} anything\n * @api public\n */\n\nfunction hasBinary (obj) {\n  if (!obj || typeof obj !== 'object') {\n    return false;\n  }\n\n  if (isArray(obj)) {\n    for (var i = 0, l = obj.length; i < l; i++) {\n      if (hasBinary(obj[i])) {\n        return true;\n      }\n    }\n    return false;\n  }\n\n  if ((typeof Buffer === 'function' && Buffer.isBuffer && Buffer.isBuffer(obj)) ||\n    (typeof ArrayBuffer === 'function' && obj instanceof ArrayBuffer) ||\n    (withNativeBlob && obj instanceof Blob) ||\n    (withNativeFile && obj instanceof File)\n  ) {\n    return true;\n  }\n\n  // see: https://github.com/Automattic/has-binary/pull/4\n  if (obj.toJSON && typeof obj.toJSON === 'function' && arguments.length === 1) {\n    return hasBinary(obj.toJSON(), true);\n  }\n\n  for (var key in obj) {\n    if (Object.prototype.hasOwnProperty.call(obj, key) && hasBinary(obj[key])) {\n      return true;\n    }\n  }\n\n  return false;\n}\n","var toString = {}.toString;\n\nmodule.exports = Array.isArray || function (arr) {\n  return toString.call(arr) == '[object Array]';\n};\n","\n/**\n * Module exports.\n *\n * Logic borrowed from Modernizr:\n *\n *   - https://github.com/Modernizr/Modernizr/blob/master/feature-detects/cors.js\n */\n\ntry {\n  module.exports = typeof XMLHttpRequest !== 'undefined' &&\n    'withCredentials' in new XMLHttpRequest();\n} catch (err) {\n  // if XMLHttp support is disabled in IE then it will throw\n  // when trying to create\n  module.exports = false;\n}\n","\nvar indexOf = [].indexOf;\n\nmodule.exports = function(arr, obj){\n  if (indexOf) return arr.indexOf(obj);\n  for (var i = 0; i < arr.length; ++i) {\n    if (arr[i] === obj) return i;\n  }\n  return -1;\n};","/**\n * Compiles a querystring\n * Returns string representation of the object\n *\n * @param {Object}\n * @api private\n */\n\nexports.encode = function (obj) {\n  var str = '';\n\n  for (var i in obj) {\n    if (obj.hasOwnProperty(i)) {\n      if (str.length) str += '&';\n      str += encodeURIComponent(i) + '=' + encodeURIComponent(obj[i]);\n    }\n  }\n\n  return str;\n};\n\n/**\n * Parses a simple querystring into an object\n *\n * @param {String} qs\n * @api private\n */\n\nexports.decode = function(qs){\n  var qry = {};\n  var pairs = qs.split('&');\n  for (var i = 0, l = pairs.length; i < l; i++) {\n    var pair = pairs[i].split('=');\n    qry[decodeURIComponent(pair[0])] = decodeURIComponent(pair[1]);\n  }\n  return qry;\n};\n","/**\n * Parses an URI\n *\n * @author Steven Levithan <stevenlevithan.com> (MIT license)\n * @api private\n */\n\nvar re = /^(?:(?![^:@]+:[^:@\\/]*@)(http|https|ws|wss):\\/\\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\\/?#]*)(?::(\\d*))?)(((\\/(?:[^?#](?![^?#\\/]*\\.[^?#\\/.]+(?:[?#]|$)))*\\/?)?([^?#\\/]*))(?:\\?([^#]*))?(?:#(.*))?)/;\n\nvar parts = [\n    'source', 'protocol', 'authority', 'userInfo', 'user', 'password', 'host', 'port', 'relative', 'path', 'directory', 'file', 'query', 'anchor'\n];\n\nmodule.exports = function parseuri(str) {\n    var src = str,\n        b = str.indexOf('['),\n        e = str.indexOf(']');\n\n    if (b != -1 && e != -1) {\n        str = str.substring(0, b) + str.substring(b, e).replace(/:/g, ';') + str.substring(e, str.length);\n    }\n\n    var m = re.exec(str || ''),\n        uri = {},\n        i = 14;\n\n    while (i--) {\n        uri[parts[i]] = m[i] || '';\n    }\n\n    if (b != -1 && e != -1) {\n        uri.source = src;\n        uri.host = uri.host.substring(1, uri.host.length - 1).replace(/;/g, ':');\n        uri.authority = uri.authority.replace('[', '').replace(']', '').replace(/;/g, ':');\n        uri.ipv6uri = true;\n    }\n\n    uri.pathNames = pathNames(uri, uri['path']);\n    uri.queryKey = queryKey(uri, uri['query']);\n\n    return uri;\n};\n\nfunction pathNames(obj, path) {\n    var regx = /\\/{2,9}/g,\n        names = path.replace(regx, \"/\").split(\"/\");\n\n    if (path.substr(0, 1) == '/' || path.length === 0) {\n        names.splice(0, 1);\n    }\n    if (path.substr(path.length - 1, 1) == '/') {\n        names.splice(names.length - 1, 1);\n    }\n\n    return names;\n}\n\nfunction queryKey(uri, query) {\n    var data = {};\n\n    query.replace(/(?:^|&)([^&=]*)=?([^&]*)/g, function ($0, $1, $2) {\n        if ($1) {\n            data[$1] = $2;\n        }\n    });\n\n    return data;\n}\n","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport { mapToCssModules, tagPropType } from './utils';\nvar propTypes = {\n  className: PropTypes.string,\n  cssModule: PropTypes.object,\n  size: PropTypes.string,\n  bordered: PropTypes.bool,\n  borderless: PropTypes.bool,\n  striped: PropTypes.bool,\n  dark: PropTypes.bool,\n  hover: PropTypes.bool,\n  responsive: PropTypes.oneOfType([PropTypes.bool, PropTypes.string]),\n  tag: tagPropType,\n  responsiveTag: tagPropType,\n  innerRef: PropTypes.oneOfType([PropTypes.func, PropTypes.string, PropTypes.object])\n};\nvar defaultProps = {\n  tag: 'table',\n  responsiveTag: 'div'\n};\n\nvar Table = function Table(props) {\n  var className = props.className,\n      cssModule = props.cssModule,\n      size = props.size,\n      bordered = props.bordered,\n      borderless = props.borderless,\n      striped = props.striped,\n      dark = props.dark,\n      hover = props.hover,\n      responsive = props.responsive,\n      Tag = props.tag,\n      ResponsiveTag = props.responsiveTag,\n      innerRef = props.innerRef,\n      attributes = _objectWithoutPropertiesLoose(props, [\"className\", \"cssModule\", \"size\", \"bordered\", \"borderless\", \"striped\", \"dark\", \"hover\", \"responsive\", \"tag\", \"responsiveTag\", \"innerRef\"]);\n\n  var classes = mapToCssModules(classNames(className, 'table', size ? 'table-' + size : false, bordered ? 'table-bordered' : false, borderless ? 'table-borderless' : false, striped ? 'table-striped' : false, dark ? 'table-dark' : false, hover ? 'table-hover' : false), cssModule);\n  var table = /*#__PURE__*/React.createElement(Tag, _extends({}, attributes, {\n    ref: innerRef,\n    className: classes\n  }));\n\n  if (responsive) {\n    var responsiveClassName = mapToCssModules(responsive === true ? 'table-responsive' : \"table-responsive-\" + responsive, cssModule);\n    return /*#__PURE__*/React.createElement(ResponsiveTag, {\n      className: responsiveClassName\n    }, table);\n  }\n\n  return table;\n};\n\nTable.propTypes = propTypes;\nTable.defaultProps = defaultProps;\nexport default Table;","\n/**\n * Module dependencies.\n */\n\nvar url = require('./url');\nvar parser = require('socket.io-parser');\nvar Manager = require('./manager');\nvar debug = require('debug')('socket.io-client');\n\n/**\n * Module exports.\n */\n\nmodule.exports = exports = lookup;\n\n/**\n * Managers cache.\n */\n\nvar cache = exports.managers = {};\n\n/**\n * Looks up an existing `Manager` for multiplexing.\n * If the user summons:\n *\n *   `io('http://localhost/a');`\n *   `io('http://localhost/b');`\n *\n * We reuse the existing instance based on same scheme/port/host,\n * and we initialize sockets for each namespace.\n *\n * @api public\n */\n\nfunction lookup (uri, opts) {\n  if (typeof uri === 'object') {\n    opts = uri;\n    uri = undefined;\n  }\n\n  opts = opts || {};\n\n  var parsed = url(uri);\n  var source = parsed.source;\n  var id = parsed.id;\n  var path = parsed.path;\n  var sameNamespace = cache[id] && path in cache[id].nsps;\n  var newConnection = opts.forceNew || opts['force new connection'] ||\n                      false === opts.multiplex || sameNamespace;\n\n  var io;\n\n  if (newConnection) {\n    debug('ignoring socket cache for %s', source);\n    io = Manager(source, opts);\n  } else {\n    if (!cache[id]) {\n      debug('new io instance for %s', source);\n      cache[id] = Manager(source, opts);\n    }\n    io = cache[id];\n  }\n  if (parsed.query && !opts.query) {\n    opts.query = parsed.query;\n  }\n  return io.socket(parsed.path, opts);\n}\n\n/**\n * Protocol version.\n *\n * @api public\n */\n\nexports.protocol = parser.protocol;\n\n/**\n * `connect`.\n *\n * @param {String} uri\n * @api public\n */\n\nexports.connect = lookup;\n\n/**\n * Expose constructors for standalone build.\n *\n * @api public\n */\n\nexports.Manager = require('./manager');\nexports.Socket = require('./socket');\n","\n/**\n * Module dependencies.\n */\n\nvar eio = require('engine.io-client');\nvar Socket = require('./socket');\nvar Emitter = require('component-emitter');\nvar parser = require('socket.io-parser');\nvar on = require('./on');\nvar bind = require('component-bind');\nvar debug = require('debug')('socket.io-client:manager');\nvar indexOf = require('indexof');\nvar Backoff = require('backo2');\n\n/**\n * IE6+ hasOwnProperty\n */\n\nvar has = Object.prototype.hasOwnProperty;\n\n/**\n * Module exports\n */\n\nmodule.exports = Manager;\n\n/**\n * `Manager` constructor.\n *\n * @param {String} engine instance or engine uri/opts\n * @param {Object} options\n * @api public\n */\n\nfunction Manager (uri, opts) {\n  if (!(this instanceof Manager)) return new Manager(uri, opts);\n  if (uri && ('object' === typeof uri)) {\n    opts = uri;\n    uri = undefined;\n  }\n  opts = opts || {};\n\n  opts.path = opts.path || '/socket.io';\n  this.nsps = {};\n  this.subs = [];\n  this.opts = opts;\n  this.reconnection(opts.reconnection !== false);\n  this.reconnectionAttempts(opts.reconnectionAttempts || Infinity);\n  this.reconnectionDelay(opts.reconnectionDelay || 1000);\n  this.reconnectionDelayMax(opts.reconnectionDelayMax || 5000);\n  this.randomizationFactor(opts.randomizationFactor || 0.5);\n  this.backoff = new Backoff({\n    min: this.reconnectionDelay(),\n    max: this.reconnectionDelayMax(),\n    jitter: this.randomizationFactor()\n  });\n  this.timeout(null == opts.timeout ? 20000 : opts.timeout);\n  this.readyState = 'closed';\n  this.uri = uri;\n  this.connecting = [];\n  this.lastPing = null;\n  this.encoding = false;\n  this.packetBuffer = [];\n  var _parser = opts.parser || parser;\n  this.encoder = new _parser.Encoder();\n  this.decoder = new _parser.Decoder();\n  this.autoConnect = opts.autoConnect !== false;\n  if (this.autoConnect) this.open();\n}\n\n/**\n * Propagate given event to sockets and emit on `this`\n *\n * @api private\n */\n\nManager.prototype.emitAll = function () {\n  this.emit.apply(this, arguments);\n  for (var nsp in this.nsps) {\n    if (has.call(this.nsps, nsp)) {\n      this.nsps[nsp].emit.apply(this.nsps[nsp], arguments);\n    }\n  }\n};\n\n/**\n * Update `socket.id` of all sockets\n *\n * @api private\n */\n\nManager.prototype.updateSocketIds = function () {\n  for (var nsp in this.nsps) {\n    if (has.call(this.nsps, nsp)) {\n      this.nsps[nsp].id = this.generateId(nsp);\n    }\n  }\n};\n\n/**\n * generate `socket.id` for the given `nsp`\n *\n * @param {String} nsp\n * @return {String}\n * @api private\n */\n\nManager.prototype.generateId = function (nsp) {\n  return (nsp === '/' ? '' : (nsp + '#')) + this.engine.id;\n};\n\n/**\n * Mix in `Emitter`.\n */\n\nEmitter(Manager.prototype);\n\n/**\n * Sets the `reconnection` config.\n *\n * @param {Boolean} true/false if it should automatically reconnect\n * @return {Manager} self or value\n * @api public\n */\n\nManager.prototype.reconnection = function (v) {\n  if (!arguments.length) return this._reconnection;\n  this._reconnection = !!v;\n  return this;\n};\n\n/**\n * Sets the reconnection attempts config.\n *\n * @param {Number} max reconnection attempts before giving up\n * @return {Manager} self or value\n * @api public\n */\n\nManager.prototype.reconnectionAttempts = function (v) {\n  if (!arguments.length) return this._reconnectionAttempts;\n  this._reconnectionAttempts = v;\n  return this;\n};\n\n/**\n * Sets the delay between reconnections.\n *\n * @param {Number} delay\n * @return {Manager} self or value\n * @api public\n */\n\nManager.prototype.reconnectionDelay = function (v) {\n  if (!arguments.length) return this._reconnectionDelay;\n  this._reconnectionDelay = v;\n  this.backoff && this.backoff.setMin(v);\n  return this;\n};\n\nManager.prototype.randomizationFactor = function (v) {\n  if (!arguments.length) return this._randomizationFactor;\n  this._randomizationFactor = v;\n  this.backoff && this.backoff.setJitter(v);\n  return this;\n};\n\n/**\n * Sets the maximum delay between reconnections.\n *\n * @param {Number} delay\n * @return {Manager} self or value\n * @api public\n */\n\nManager.prototype.reconnectionDelayMax = function (v) {\n  if (!arguments.length) return this._reconnectionDelayMax;\n  this._reconnectionDelayMax = v;\n  this.backoff && this.backoff.setMax(v);\n  return this;\n};\n\n/**\n * Sets the connection timeout. `false` to disable\n *\n * @return {Manager} self or value\n * @api public\n */\n\nManager.prototype.timeout = function (v) {\n  if (!arguments.length) return this._timeout;\n  this._timeout = v;\n  return this;\n};\n\n/**\n * Starts trying to reconnect if reconnection is enabled and we have not\n * started reconnecting yet\n *\n * @api private\n */\n\nManager.prototype.maybeReconnectOnOpen = function () {\n  // Only try to reconnect if it's the first time we're connecting\n  if (!this.reconnecting && this._reconnection && this.backoff.attempts === 0) {\n    // keeps reconnection from firing twice for the same reconnection loop\n    this.reconnect();\n  }\n};\n\n/**\n * Sets the current transport `socket`.\n *\n * @param {Function} optional, callback\n * @return {Manager} self\n * @api public\n */\n\nManager.prototype.open =\nManager.prototype.connect = function (fn, opts) {\n  debug('readyState %s', this.readyState);\n  if (~this.readyState.indexOf('open')) return this;\n\n  debug('opening %s', this.uri);\n  this.engine = eio(this.uri, this.opts);\n  var socket = this.engine;\n  var self = this;\n  this.readyState = 'opening';\n  this.skipReconnect = false;\n\n  // emit `open`\n  var openSub = on(socket, 'open', function () {\n    self.onopen();\n    fn && fn();\n  });\n\n  // emit `connect_error`\n  var errorSub = on(socket, 'error', function (data) {\n    debug('connect_error');\n    self.cleanup();\n    self.readyState = 'closed';\n    self.emitAll('connect_error', data);\n    if (fn) {\n      var err = new Error('Connection error');\n      err.data = data;\n      fn(err);\n    } else {\n      // Only do this if there is no fn to handle the error\n      self.maybeReconnectOnOpen();\n    }\n  });\n\n  // emit `connect_timeout`\n  if (false !== this._timeout) {\n    var timeout = this._timeout;\n    debug('connect attempt will timeout after %d', timeout);\n\n    if (timeout === 0) {\n      openSub.destroy(); // prevents a race condition with the 'open' event\n    }\n\n    // set timer\n    var timer = setTimeout(function () {\n      debug('connect attempt timed out after %d', timeout);\n      openSub.destroy();\n      socket.close();\n      socket.emit('error', 'timeout');\n      self.emitAll('connect_timeout', timeout);\n    }, timeout);\n\n    this.subs.push({\n      destroy: function () {\n        clearTimeout(timer);\n      }\n    });\n  }\n\n  this.subs.push(openSub);\n  this.subs.push(errorSub);\n\n  return this;\n};\n\n/**\n * Called upon transport open.\n *\n * @api private\n */\n\nManager.prototype.onopen = function () {\n  debug('open');\n\n  // clear old subs\n  this.cleanup();\n\n  // mark as open\n  this.readyState = 'open';\n  this.emit('open');\n\n  // add new subs\n  var socket = this.engine;\n  this.subs.push(on(socket, 'data', bind(this, 'ondata')));\n  this.subs.push(on(socket, 'ping', bind(this, 'onping')));\n  this.subs.push(on(socket, 'pong', bind(this, 'onpong')));\n  this.subs.push(on(socket, 'error', bind(this, 'onerror')));\n  this.subs.push(on(socket, 'close', bind(this, 'onclose')));\n  this.subs.push(on(this.decoder, 'decoded', bind(this, 'ondecoded')));\n};\n\n/**\n * Called upon a ping.\n *\n * @api private\n */\n\nManager.prototype.onping = function () {\n  this.lastPing = new Date();\n  this.emitAll('ping');\n};\n\n/**\n * Called upon a packet.\n *\n * @api private\n */\n\nManager.prototype.onpong = function () {\n  this.emitAll('pong', new Date() - this.lastPing);\n};\n\n/**\n * Called with data.\n *\n * @api private\n */\n\nManager.prototype.ondata = function (data) {\n  this.decoder.add(data);\n};\n\n/**\n * Called when parser fully decodes a packet.\n *\n * @api private\n */\n\nManager.prototype.ondecoded = function (packet) {\n  this.emit('packet', packet);\n};\n\n/**\n * Called upon socket error.\n *\n * @api private\n */\n\nManager.prototype.onerror = function (err) {\n  debug('error', err);\n  this.emitAll('error', err);\n};\n\n/**\n * Creates a new socket for the given `nsp`.\n *\n * @return {Socket}\n * @api public\n */\n\nManager.prototype.socket = function (nsp, opts) {\n  var socket = this.nsps[nsp];\n  if (!socket) {\n    socket = new Socket(this, nsp, opts);\n    this.nsps[nsp] = socket;\n    var self = this;\n    socket.on('connecting', onConnecting);\n    socket.on('connect', function () {\n      socket.id = self.generateId(nsp);\n    });\n\n    if (this.autoConnect) {\n      // manually call here since connecting event is fired before listening\n      onConnecting();\n    }\n  }\n\n  function onConnecting () {\n    if (!~indexOf(self.connecting, socket)) {\n      self.connecting.push(socket);\n    }\n  }\n\n  return socket;\n};\n\n/**\n * Called upon a socket close.\n *\n * @param {Socket} socket\n */\n\nManager.prototype.destroy = function (socket) {\n  var index = indexOf(this.connecting, socket);\n  if (~index) this.connecting.splice(index, 1);\n  if (this.connecting.length) return;\n\n  this.close();\n};\n\n/**\n * Writes a packet.\n *\n * @param {Object} packet\n * @api private\n */\n\nManager.prototype.packet = function (packet) {\n  debug('writing packet %j', packet);\n  var self = this;\n  if (packet.query && packet.type === 0) packet.nsp += '?' + packet.query;\n\n  if (!self.encoding) {\n    // encode, then write to engine with result\n    self.encoding = true;\n    this.encoder.encode(packet, function (encodedPackets) {\n      for (var i = 0; i < encodedPackets.length; i++) {\n        self.engine.write(encodedPackets[i], packet.options);\n      }\n      self.encoding = false;\n      self.processPacketQueue();\n    });\n  } else { // add packet to the queue\n    self.packetBuffer.push(packet);\n  }\n};\n\n/**\n * If packet buffer is non-empty, begins encoding the\n * next packet in line.\n *\n * @api private\n */\n\nManager.prototype.processPacketQueue = function () {\n  if (this.packetBuffer.length > 0 && !this.encoding) {\n    var pack = this.packetBuffer.shift();\n    this.packet(pack);\n  }\n};\n\n/**\n * Clean up transport subscriptions and packet buffer.\n *\n * @api private\n */\n\nManager.prototype.cleanup = function () {\n  debug('cleanup');\n\n  var subsLength = this.subs.length;\n  for (var i = 0; i < subsLength; i++) {\n    var sub = this.subs.shift();\n    sub.destroy();\n  }\n\n  this.packetBuffer = [];\n  this.encoding = false;\n  this.lastPing = null;\n\n  this.decoder.destroy();\n};\n\n/**\n * Close the current socket.\n *\n * @api private\n */\n\nManager.prototype.close =\nManager.prototype.disconnect = function () {\n  debug('disconnect');\n  this.skipReconnect = true;\n  this.reconnecting = false;\n  if ('opening' === this.readyState) {\n    // `onclose` will not fire because\n    // an open event never happened\n    this.cleanup();\n  }\n  this.backoff.reset();\n  this.readyState = 'closed';\n  if (this.engine) this.engine.close();\n};\n\n/**\n * Called upon engine close.\n *\n * @api private\n */\n\nManager.prototype.onclose = function (reason) {\n  debug('onclose');\n\n  this.cleanup();\n  this.backoff.reset();\n  this.readyState = 'closed';\n  this.emit('close', reason);\n\n  if (this._reconnection && !this.skipReconnect) {\n    this.reconnect();\n  }\n};\n\n/**\n * Attempt a reconnection.\n *\n * @api private\n */\n\nManager.prototype.reconnect = function () {\n  if (this.reconnecting || this.skipReconnect) return this;\n\n  var self = this;\n\n  if (this.backoff.attempts >= this._reconnectionAttempts) {\n    debug('reconnect failed');\n    this.backoff.reset();\n    this.emitAll('reconnect_failed');\n    this.reconnecting = false;\n  } else {\n    var delay = this.backoff.duration();\n    debug('will wait %dms before reconnect attempt', delay);\n\n    this.reconnecting = true;\n    var timer = setTimeout(function () {\n      if (self.skipReconnect) return;\n\n      debug('attempting reconnect');\n      self.emitAll('reconnect_attempt', self.backoff.attempts);\n      self.emitAll('reconnecting', self.backoff.attempts);\n\n      // check again for the case socket closed in above events\n      if (self.skipReconnect) return;\n\n      self.open(function (err) {\n        if (err) {\n          debug('reconnect attempt error');\n          self.reconnecting = false;\n          self.reconnect();\n          self.emitAll('reconnect_error', err.data);\n        } else {\n          debug('reconnect success');\n          self.onreconnect();\n        }\n      });\n    }, delay);\n\n    this.subs.push({\n      destroy: function () {\n        clearTimeout(timer);\n      }\n    });\n  }\n};\n\n/**\n * Called upon successful reconnect.\n *\n * @api private\n */\n\nManager.prototype.onreconnect = function () {\n  var attempt = this.backoff.attempts;\n  this.reconnecting = false;\n  this.backoff.reset();\n  this.updateSocketIds();\n  this.emitAll('reconnect', attempt);\n};\n","\n/**\n * Module exports.\n */\n\nmodule.exports = on;\n\n/**\n * Helper for subscriptions.\n *\n * @param {Object|EventEmitter} obj with `Emitter` mixin or `EventEmitter`\n * @param {String} event name\n * @param {Function} callback\n * @api public\n */\n\nfunction on (obj, ev, fn) {\n  obj.on(ev, fn);\n  return {\n    destroy: function () {\n      obj.removeListener(ev, fn);\n    }\n  };\n}\n","\n/**\n * Module dependencies.\n */\n\nvar parser = require('socket.io-parser');\nvar Emitter = require('component-emitter');\nvar toArray = require('to-array');\nvar on = require('./on');\nvar bind = require('component-bind');\nvar debug = require('debug')('socket.io-client:socket');\nvar parseqs = require('parseqs');\nvar hasBin = require('has-binary2');\n\n/**\n * Module exports.\n */\n\nmodule.exports = exports = Socket;\n\n/**\n * Internal events (blacklisted).\n * These events can't be emitted by the user.\n *\n * @api private\n */\n\nvar events = {\n  connect: 1,\n  connect_error: 1,\n  connect_timeout: 1,\n  connecting: 1,\n  disconnect: 1,\n  error: 1,\n  reconnect: 1,\n  reconnect_attempt: 1,\n  reconnect_failed: 1,\n  reconnect_error: 1,\n  reconnecting: 1,\n  ping: 1,\n  pong: 1\n};\n\n/**\n * Shortcut to `Emitter#emit`.\n */\n\nvar emit = Emitter.prototype.emit;\n\n/**\n * `Socket` constructor.\n *\n * @api public\n */\n\nfunction Socket (io, nsp, opts) {\n  this.io = io;\n  this.nsp = nsp;\n  this.json = this; // compat\n  this.ids = 0;\n  this.acks = {};\n  this.receiveBuffer = [];\n  this.sendBuffer = [];\n  this.connected = false;\n  this.disconnected = true;\n  this.flags = {};\n  if (opts && opts.query) {\n    this.query = opts.query;\n  }\n  if (this.io.autoConnect) this.open();\n}\n\n/**\n * Mix in `Emitter`.\n */\n\nEmitter(Socket.prototype);\n\n/**\n * Subscribe to open, close and packet events\n *\n * @api private\n */\n\nSocket.prototype.subEvents = function () {\n  if (this.subs) return;\n\n  var io = this.io;\n  this.subs = [\n    on(io, 'open', bind(this, 'onopen')),\n    on(io, 'packet', bind(this, 'onpacket')),\n    on(io, 'close', bind(this, 'onclose'))\n  ];\n};\n\n/**\n * \"Opens\" the socket.\n *\n * @api public\n */\n\nSocket.prototype.open =\nSocket.prototype.connect = function () {\n  if (this.connected) return this;\n\n  this.subEvents();\n  if (!this.io.reconnecting) this.io.open(); // ensure open\n  if ('open' === this.io.readyState) this.onopen();\n  this.emit('connecting');\n  return this;\n};\n\n/**\n * Sends a `message` event.\n *\n * @return {Socket} self\n * @api public\n */\n\nSocket.prototype.send = function () {\n  var args = toArray(arguments);\n  args.unshift('message');\n  this.emit.apply(this, args);\n  return this;\n};\n\n/**\n * Override `emit`.\n * If the event is in `events`, it's emitted normally.\n *\n * @param {String} event name\n * @return {Socket} self\n * @api public\n */\n\nSocket.prototype.emit = function (ev) {\n  if (events.hasOwnProperty(ev)) {\n    emit.apply(this, arguments);\n    return this;\n  }\n\n  var args = toArray(arguments);\n  var packet = {\n    type: (this.flags.binary !== undefined ? this.flags.binary : hasBin(args)) ? parser.BINARY_EVENT : parser.EVENT,\n    data: args\n  };\n\n  packet.options = {};\n  packet.options.compress = !this.flags || false !== this.flags.compress;\n\n  // event ack callback\n  if ('function' === typeof args[args.length - 1]) {\n    debug('emitting packet with ack id %d', this.ids);\n    this.acks[this.ids] = args.pop();\n    packet.id = this.ids++;\n  }\n\n  if (this.connected) {\n    this.packet(packet);\n  } else {\n    this.sendBuffer.push(packet);\n  }\n\n  this.flags = {};\n\n  return this;\n};\n\n/**\n * Sends a packet.\n *\n * @param {Object} packet\n * @api private\n */\n\nSocket.prototype.packet = function (packet) {\n  packet.nsp = this.nsp;\n  this.io.packet(packet);\n};\n\n/**\n * Called upon engine `open`.\n *\n * @api private\n */\n\nSocket.prototype.onopen = function () {\n  debug('transport is open - connecting');\n\n  // write connect packet if necessary\n  if ('/' !== this.nsp) {\n    if (this.query) {\n      var query = typeof this.query === 'object' ? parseqs.encode(this.query) : this.query;\n      debug('sending connect packet with query %s', query);\n      this.packet({type: parser.CONNECT, query: query});\n    } else {\n      this.packet({type: parser.CONNECT});\n    }\n  }\n};\n\n/**\n * Called upon engine `close`.\n *\n * @param {String} reason\n * @api private\n */\n\nSocket.prototype.onclose = function (reason) {\n  debug('close (%s)', reason);\n  this.connected = false;\n  this.disconnected = true;\n  delete this.id;\n  this.emit('disconnect', reason);\n};\n\n/**\n * Called with socket packet.\n *\n * @param {Object} packet\n * @api private\n */\n\nSocket.prototype.onpacket = function (packet) {\n  var sameNamespace = packet.nsp === this.nsp;\n  var rootNamespaceError = packet.type === parser.ERROR && packet.nsp === '/';\n\n  if (!sameNamespace && !rootNamespaceError) return;\n\n  switch (packet.type) {\n    case parser.CONNECT:\n      this.onconnect();\n      break;\n\n    case parser.EVENT:\n      this.onevent(packet);\n      break;\n\n    case parser.BINARY_EVENT:\n      this.onevent(packet);\n      break;\n\n    case parser.ACK:\n      this.onack(packet);\n      break;\n\n    case parser.BINARY_ACK:\n      this.onack(packet);\n      break;\n\n    case parser.DISCONNECT:\n      this.ondisconnect();\n      break;\n\n    case parser.ERROR:\n      this.emit('error', packet.data);\n      break;\n  }\n};\n\n/**\n * Called upon a server event.\n *\n * @param {Object} packet\n * @api private\n */\n\nSocket.prototype.onevent = function (packet) {\n  var args = packet.data || [];\n  debug('emitting event %j', args);\n\n  if (null != packet.id) {\n    debug('attaching ack callback to event');\n    args.push(this.ack(packet.id));\n  }\n\n  if (this.connected) {\n    emit.apply(this, args);\n  } else {\n    this.receiveBuffer.push(args);\n  }\n};\n\n/**\n * Produces an ack callback to emit with an event.\n *\n * @api private\n */\n\nSocket.prototype.ack = function (id) {\n  var self = this;\n  var sent = false;\n  return function () {\n    // prevent double callbacks\n    if (sent) return;\n    sent = true;\n    var args = toArray(arguments);\n    debug('sending ack %j', args);\n\n    self.packet({\n      type: hasBin(args) ? parser.BINARY_ACK : parser.ACK,\n      id: id,\n      data: args\n    });\n  };\n};\n\n/**\n * Called upon a server acknowlegement.\n *\n * @param {Object} packet\n * @api private\n */\n\nSocket.prototype.onack = function (packet) {\n  var ack = this.acks[packet.id];\n  if ('function' === typeof ack) {\n    debug('calling ack %s with %j', packet.id, packet.data);\n    ack.apply(this, packet.data);\n    delete this.acks[packet.id];\n  } else {\n    debug('bad ack %s', packet.id);\n  }\n};\n\n/**\n * Called upon server connect.\n *\n * @api private\n */\n\nSocket.prototype.onconnect = function () {\n  this.connected = true;\n  this.disconnected = false;\n  this.emitBuffered();\n  this.emit('connect');\n};\n\n/**\n * Emit buffered events (received and emitted).\n *\n * @api private\n */\n\nSocket.prototype.emitBuffered = function () {\n  var i;\n  for (i = 0; i < this.receiveBuffer.length; i++) {\n    emit.apply(this, this.receiveBuffer[i]);\n  }\n  this.receiveBuffer = [];\n\n  for (i = 0; i < this.sendBuffer.length; i++) {\n    this.packet(this.sendBuffer[i]);\n  }\n  this.sendBuffer = [];\n};\n\n/**\n * Called upon server disconnect.\n *\n * @api private\n */\n\nSocket.prototype.ondisconnect = function () {\n  debug('server disconnect (%s)', this.nsp);\n  this.destroy();\n  this.onclose('io server disconnect');\n};\n\n/**\n * Called upon forced client/server side disconnections,\n * this method ensures the manager stops tracking us and\n * that reconnections don't get triggered for this.\n *\n * @api private.\n */\n\nSocket.prototype.destroy = function () {\n  if (this.subs) {\n    // clean subscriptions to avoid reconnections\n    for (var i = 0; i < this.subs.length; i++) {\n      this.subs[i].destroy();\n    }\n    this.subs = null;\n  }\n\n  this.io.destroy(this);\n};\n\n/**\n * Disconnects the socket manually.\n *\n * @return {Socket} self\n * @api public\n */\n\nSocket.prototype.close =\nSocket.prototype.disconnect = function () {\n  if (this.connected) {\n    debug('performing disconnect (%s)', this.nsp);\n    this.packet({ type: parser.DISCONNECT });\n  }\n\n  // remove socket from pool\n  this.destroy();\n\n  if (this.connected) {\n    // fire events\n    this.onclose('io client disconnect');\n  }\n  return this;\n};\n\n/**\n * Sets the compress flag.\n *\n * @param {Boolean} if `true`, compresses the sending data\n * @return {Socket} self\n * @api public\n */\n\nSocket.prototype.compress = function (compress) {\n  this.flags.compress = compress;\n  return this;\n};\n\n/**\n * Sets the binary flag\n *\n * @param {Boolean} whether the emitted data contains binary\n * @return {Socket} self\n * @api public\n */\n\nSocket.prototype.binary = function (binary) {\n  this.flags.binary = binary;\n  return this;\n};\n","\n/**\n * Module dependencies.\n */\n\nvar parseuri = require('parseuri');\nvar debug = require('debug')('socket.io-client:url');\n\n/**\n * Module exports.\n */\n\nmodule.exports = url;\n\n/**\n * URL parser.\n *\n * @param {String} url\n * @param {Object} An object meant to mimic window.location.\n *                 Defaults to window.location.\n * @api public\n */\n\nfunction url (uri, loc) {\n  var obj = uri;\n\n  // default to window.location\n  loc = loc || (typeof location !== 'undefined' && location);\n  if (null == uri) uri = loc.protocol + '//' + loc.host;\n\n  // relative path support\n  if ('string' === typeof uri) {\n    if ('/' === uri.charAt(0)) {\n      if ('/' === uri.charAt(1)) {\n        uri = loc.protocol + uri;\n      } else {\n        uri = loc.host + uri;\n      }\n    }\n\n    if (!/^(https?|wss?):\\/\\//.test(uri)) {\n      debug('protocol-less url %s', uri);\n      if ('undefined' !== typeof loc) {\n        uri = loc.protocol + '//' + uri;\n      } else {\n        uri = 'https://' + uri;\n      }\n    }\n\n    // parse\n    debug('parse %s', uri);\n    obj = parseuri(uri);\n  }\n\n  // make sure we treat `localhost:80` and `localhost` equally\n  if (!obj.port) {\n    if (/^(http|ws)$/.test(obj.protocol)) {\n      obj.port = '80';\n    } else if (/^(http|ws)s$/.test(obj.protocol)) {\n      obj.port = '443';\n    }\n  }\n\n  obj.path = obj.path || '/';\n\n  var ipv6 = obj.host.indexOf(':') !== -1;\n  var host = ipv6 ? '[' + obj.host + ']' : obj.host;\n\n  // define unique id\n  obj.id = obj.protocol + '://' + host + ':' + obj.port;\n  // define href\n  obj.href = obj.protocol + '://' + host + (loc && loc.port === obj.port ? '' : (':' + obj.port));\n\n  return obj;\n}\n","/**\n * This is the web browser implementation of `debug()`.\n *\n * Expose `debug()` as the module.\n */\n\nexports = module.exports = require('./debug');\nexports.log = log;\nexports.formatArgs = formatArgs;\nexports.save = save;\nexports.load = load;\nexports.useColors = useColors;\nexports.storage = 'undefined' != typeof chrome\n               && 'undefined' != typeof chrome.storage\n                  ? chrome.storage.local\n                  : localstorage();\n\n/**\n * Colors.\n */\n\nexports.colors = [\n  '#0000CC', '#0000FF', '#0033CC', '#0033FF', '#0066CC', '#0066FF', '#0099CC',\n  '#0099FF', '#00CC00', '#00CC33', '#00CC66', '#00CC99', '#00CCCC', '#00CCFF',\n  '#3300CC', '#3300FF', '#3333CC', '#3333FF', '#3366CC', '#3366FF', '#3399CC',\n  '#3399FF', '#33CC00', '#33CC33', '#33CC66', '#33CC99', '#33CCCC', '#33CCFF',\n  '#6600CC', '#6600FF', '#6633CC', '#6633FF', '#66CC00', '#66CC33', '#9900CC',\n  '#9900FF', '#9933CC', '#9933FF', '#99CC00', '#99CC33', '#CC0000', '#CC0033',\n  '#CC0066', '#CC0099', '#CC00CC', '#CC00FF', '#CC3300', '#CC3333', '#CC3366',\n  '#CC3399', '#CC33CC', '#CC33FF', '#CC6600', '#CC6633', '#CC9900', '#CC9933',\n  '#CCCC00', '#CCCC33', '#FF0000', '#FF0033', '#FF0066', '#FF0099', '#FF00CC',\n  '#FF00FF', '#FF3300', '#FF3333', '#FF3366', '#FF3399', '#FF33CC', '#FF33FF',\n  '#FF6600', '#FF6633', '#FF9900', '#FF9933', '#FFCC00', '#FFCC33'\n];\n\n/**\n * Currently only WebKit-based Web Inspectors, Firefox >= v31,\n * and the Firebug extension (any Firefox version) are known\n * to support \"%c\" CSS customizations.\n *\n * TODO: add a `localStorage` variable to explicitly enable/disable colors\n */\n\nfunction useColors() {\n  // NB: In an Electron preload script, document will be defined but not fully\n  // initialized. Since we know we're in Chrome, we'll just detect this case\n  // explicitly\n  if (typeof window !== 'undefined' && window.process && window.process.type === 'renderer') {\n    return true;\n  }\n\n  // Internet Explorer and Edge do not support colors.\n  if (typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/(edge|trident)\\/(\\d+)/)) {\n    return false;\n  }\n\n  // is webkit? http://stackoverflow.com/a/16459606/376773\n  // document is undefined in react-native: https://github.com/facebook/react-native/pull/1632\n  return (typeof document !== 'undefined' && document.documentElement && document.documentElement.style && document.documentElement.style.WebkitAppearance) ||\n    // is firebug? http://stackoverflow.com/a/398120/376773\n    (typeof window !== 'undefined' && window.console && (window.console.firebug || (window.console.exception && window.console.table))) ||\n    // is firefox >= v31?\n    // https://developer.mozilla.org/en-US/docs/Tools/Web_Console#Styling_messages\n    (typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/firefox\\/(\\d+)/) && parseInt(RegExp.$1, 10) >= 31) ||\n    // double check webkit in userAgent just in case we are in a worker\n    (typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/applewebkit\\/(\\d+)/));\n}\n\n/**\n * Map %j to `JSON.stringify()`, since no Web Inspectors do that by default.\n */\n\nexports.formatters.j = function(v) {\n  try {\n    return JSON.stringify(v);\n  } catch (err) {\n    return '[UnexpectedJSONParseError]: ' + err.message;\n  }\n};\n\n\n/**\n * Colorize log arguments if enabled.\n *\n * @api public\n */\n\nfunction formatArgs(args) {\n  var useColors = this.useColors;\n\n  args[0] = (useColors ? '%c' : '')\n    + this.namespace\n    + (useColors ? ' %c' : ' ')\n    + args[0]\n    + (useColors ? '%c ' : ' ')\n    + '+' + exports.humanize(this.diff);\n\n  if (!useColors) return;\n\n  var c = 'color: ' + this.color;\n  args.splice(1, 0, c, 'color: inherit')\n\n  // the final \"%c\" is somewhat tricky, because there could be other\n  // arguments passed either before or after the %c, so we need to\n  // figure out the correct index to insert the CSS into\n  var index = 0;\n  var lastC = 0;\n  args[0].replace(/%[a-zA-Z%]/g, function(match) {\n    if ('%%' === match) return;\n    index++;\n    if ('%c' === match) {\n      // we only are interested in the *last* %c\n      // (the user may have provided their own)\n      lastC = index;\n    }\n  });\n\n  args.splice(lastC, 0, c);\n}\n\n/**\n * Invokes `console.log()` when available.\n * No-op when `console.log` is not a \"function\".\n *\n * @api public\n */\n\nfunction log() {\n  // this hackery is required for IE8/9, where\n  // the `console.log` function doesn't have 'apply'\n  return 'object' === typeof console\n    && console.log\n    && Function.prototype.apply.call(console.log, console, arguments);\n}\n\n/**\n * Save `namespaces`.\n *\n * @param {String} namespaces\n * @api private\n */\n\nfunction save(namespaces) {\n  try {\n    if (null == namespaces) {\n      exports.storage.removeItem('debug');\n    } else {\n      exports.storage.debug = namespaces;\n    }\n  } catch(e) {}\n}\n\n/**\n * Load `namespaces`.\n *\n * @return {String} returns the previously persisted debug modes\n * @api private\n */\n\nfunction load() {\n  var r;\n  try {\n    r = exports.storage.debug;\n  } catch(e) {}\n\n  // If debug isn't set in LS, and we're in Electron, try to load $DEBUG\n  if (!r && typeof process !== 'undefined' && 'env' in process) {\n    r = process.env.DEBUG;\n  }\n\n  return r;\n}\n\n/**\n * Enable namespaces listed in `localStorage.debug` initially.\n */\n\nexports.enable(load());\n\n/**\n * Localstorage attempts to return the localstorage.\n *\n * This is necessary because safari throws\n * when a user disables cookies/localstorage\n * and you attempt to access it.\n *\n * @return {LocalStorage}\n * @api private\n */\n\nfunction localstorage() {\n  try {\n    return window.localStorage;\n  } catch (e) {}\n}\n","\n/**\n * This is the common logic for both the Node.js and web browser\n * implementations of `debug()`.\n *\n * Expose `debug()` as the module.\n */\n\nexports = module.exports = createDebug.debug = createDebug['default'] = createDebug;\nexports.coerce = coerce;\nexports.disable = disable;\nexports.enable = enable;\nexports.enabled = enabled;\nexports.humanize = require('ms');\n\n/**\n * Active `debug` instances.\n */\nexports.instances = [];\n\n/**\n * The currently active debug mode names, and names to skip.\n */\n\nexports.names = [];\nexports.skips = [];\n\n/**\n * Map of special \"%n\" handling functions, for the debug \"format\" argument.\n *\n * Valid key names are a single, lower or upper-case letter, i.e. \"n\" and \"N\".\n */\n\nexports.formatters = {};\n\n/**\n * Select a color.\n * @param {String} namespace\n * @return {Number}\n * @api private\n */\n\nfunction selectColor(namespace) {\n  var hash = 0, i;\n\n  for (i in namespace) {\n    hash  = ((hash << 5) - hash) + namespace.charCodeAt(i);\n    hash |= 0; // Convert to 32bit integer\n  }\n\n  return exports.colors[Math.abs(hash) % exports.colors.length];\n}\n\n/**\n * Create a debugger with the given `namespace`.\n *\n * @param {String} namespace\n * @return {Function}\n * @api public\n */\n\nfunction createDebug(namespace) {\n\n  var prevTime;\n\n  function debug() {\n    // disabled?\n    if (!debug.enabled) return;\n\n    var self = debug;\n\n    // set `diff` timestamp\n    var curr = +new Date();\n    var ms = curr - (prevTime || curr);\n    self.diff = ms;\n    self.prev = prevTime;\n    self.curr = curr;\n    prevTime = curr;\n\n    // turn the `arguments` into a proper Array\n    var args = new Array(arguments.length);\n    for (var i = 0; i < args.length; i++) {\n      args[i] = arguments[i];\n    }\n\n    args[0] = exports.coerce(args[0]);\n\n    if ('string' !== typeof args[0]) {\n      // anything else let's inspect with %O\n      args.unshift('%O');\n    }\n\n    // apply any `formatters` transformations\n    var index = 0;\n    args[0] = args[0].replace(/%([a-zA-Z%])/g, function(match, format) {\n      // if we encounter an escaped % then don't increase the array index\n      if (match === '%%') return match;\n      index++;\n      var formatter = exports.formatters[format];\n      if ('function' === typeof formatter) {\n        var val = args[index];\n        match = formatter.call(self, val);\n\n        // now we need to remove `args[index]` since it's inlined in the `format`\n        args.splice(index, 1);\n        index--;\n      }\n      return match;\n    });\n\n    // apply env-specific formatting (colors, etc.)\n    exports.formatArgs.call(self, args);\n\n    var logFn = debug.log || exports.log || console.log.bind(console);\n    logFn.apply(self, args);\n  }\n\n  debug.namespace = namespace;\n  debug.enabled = exports.enabled(namespace);\n  debug.useColors = exports.useColors();\n  debug.color = selectColor(namespace);\n  debug.destroy = destroy;\n\n  // env-specific initialization logic for debug instances\n  if ('function' === typeof exports.init) {\n    exports.init(debug);\n  }\n\n  exports.instances.push(debug);\n\n  return debug;\n}\n\nfunction destroy () {\n  var index = exports.instances.indexOf(this);\n  if (index !== -1) {\n    exports.instances.splice(index, 1);\n    return true;\n  } else {\n    return false;\n  }\n}\n\n/**\n * Enables a debug mode by namespaces. This can include modes\n * separated by a colon and wildcards.\n *\n * @param {String} namespaces\n * @api public\n */\n\nfunction enable(namespaces) {\n  exports.save(namespaces);\n\n  exports.names = [];\n  exports.skips = [];\n\n  var i;\n  var split = (typeof namespaces === 'string' ? namespaces : '').split(/[\\s,]+/);\n  var len = split.length;\n\n  for (i = 0; i < len; i++) {\n    if (!split[i]) continue; // ignore empty strings\n    namespaces = split[i].replace(/\\*/g, '.*?');\n    if (namespaces[0] === '-') {\n      exports.skips.push(new RegExp('^' + namespaces.substr(1) + '$'));\n    } else {\n      exports.names.push(new RegExp('^' + namespaces + '$'));\n    }\n  }\n\n  for (i = 0; i < exports.instances.length; i++) {\n    var instance = exports.instances[i];\n    instance.enabled = exports.enabled(instance.namespace);\n  }\n}\n\n/**\n * Disable debug output.\n *\n * @api public\n */\n\nfunction disable() {\n  exports.enable('');\n}\n\n/**\n * Returns true if the given mode name is enabled, false otherwise.\n *\n * @param {String} name\n * @return {Boolean}\n * @api public\n */\n\nfunction enabled(name) {\n  if (name[name.length - 1] === '*') {\n    return true;\n  }\n  var i, len;\n  for (i = 0, len = exports.skips.length; i < len; i++) {\n    if (exports.skips[i].test(name)) {\n      return false;\n    }\n  }\n  for (i = 0, len = exports.names.length; i < len; i++) {\n    if (exports.names[i].test(name)) {\n      return true;\n    }\n  }\n  return false;\n}\n\n/**\n * Coerce `val`.\n *\n * @param {Mixed} val\n * @return {Mixed}\n * @api private\n */\n\nfunction coerce(val) {\n  if (val instanceof Error) return val.stack || val.message;\n  return val;\n}\n","/**\n * Helpers.\n */\n\nvar s = 1000;\nvar m = s * 60;\nvar h = m * 60;\nvar d = h * 24;\nvar y = d * 365.25;\n\n/**\n * Parse or format the given `val`.\n *\n * Options:\n *\n *  - `long` verbose formatting [false]\n *\n * @param {String|Number} val\n * @param {Object} [options]\n * @throws {Error} throw an error if val is not a non-empty string or a number\n * @return {String|Number}\n * @api public\n */\n\nmodule.exports = function(val, options) {\n  options = options || {};\n  var type = typeof val;\n  if (type === 'string' && val.length > 0) {\n    return parse(val);\n  } else if (type === 'number' && isNaN(val) === false) {\n    return options.long ? fmtLong(val) : fmtShort(val);\n  }\n  throw new Error(\n    'val is not a non-empty string or a valid number. val=' +\n      JSON.stringify(val)\n  );\n};\n\n/**\n * Parse the given `str` and return milliseconds.\n *\n * @param {String} str\n * @return {Number}\n * @api private\n */\n\nfunction parse(str) {\n  str = String(str);\n  if (str.length > 100) {\n    return;\n  }\n  var match = /^((?:\\d+)?\\.?\\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(\n    str\n  );\n  if (!match) {\n    return;\n  }\n  var n = parseFloat(match[1]);\n  var type = (match[2] || 'ms').toLowerCase();\n  switch (type) {\n    case 'years':\n    case 'year':\n    case 'yrs':\n    case 'yr':\n    case 'y':\n      return n * y;\n    case 'days':\n    case 'day':\n    case 'd':\n      return n * d;\n    case 'hours':\n    case 'hour':\n    case 'hrs':\n    case 'hr':\n    case 'h':\n      return n * h;\n    case 'minutes':\n    case 'minute':\n    case 'mins':\n    case 'min':\n    case 'm':\n      return n * m;\n    case 'seconds':\n    case 'second':\n    case 'secs':\n    case 'sec':\n    case 's':\n      return n * s;\n    case 'milliseconds':\n    case 'millisecond':\n    case 'msecs':\n    case 'msec':\n    case 'ms':\n      return n;\n    default:\n      return undefined;\n  }\n}\n\n/**\n * Short format for `ms`.\n *\n * @param {Number} ms\n * @return {String}\n * @api private\n */\n\nfunction fmtShort(ms) {\n  if (ms >= d) {\n    return Math.round(ms / d) + 'd';\n  }\n  if (ms >= h) {\n    return Math.round(ms / h) + 'h';\n  }\n  if (ms >= m) {\n    return Math.round(ms / m) + 'm';\n  }\n  if (ms >= s) {\n    return Math.round(ms / s) + 's';\n  }\n  return ms + 'ms';\n}\n\n/**\n * Long format for `ms`.\n *\n * @param {Number} ms\n * @return {String}\n * @api private\n */\n\nfunction fmtLong(ms) {\n  return plural(ms, d, 'day') ||\n    plural(ms, h, 'hour') ||\n    plural(ms, m, 'minute') ||\n    plural(ms, s, 'second') ||\n    ms + ' ms';\n}\n\n/**\n * Pluralization helper.\n */\n\nfunction plural(ms, n, name) {\n  if (ms < n) {\n    return;\n  }\n  if (ms < n * 1.5) {\n    return Math.floor(ms / n) + ' ' + name;\n  }\n  return Math.ceil(ms / n) + ' ' + name + 's';\n}\n","/*global Blob,File*/\n\n/**\n * Module requirements\n */\n\nvar isArray = require('isarray');\nvar isBuf = require('./is-buffer');\nvar toString = Object.prototype.toString;\nvar withNativeBlob = typeof Blob === 'function' || (typeof Blob !== 'undefined' && toString.call(Blob) === '[object BlobConstructor]');\nvar withNativeFile = typeof File === 'function' || (typeof File !== 'undefined' && toString.call(File) === '[object FileConstructor]');\n\n/**\n * Replaces every Buffer | ArrayBuffer in packet with a numbered placeholder.\n * Anything with blobs or files should be fed through removeBlobs before coming\n * here.\n *\n * @param {Object} packet - socket.io event packet\n * @return {Object} with deconstructed packet and list of buffers\n * @api public\n */\n\nexports.deconstructPacket = function(packet) {\n  var buffers = [];\n  var packetData = packet.data;\n  var pack = packet;\n  pack.data = _deconstructPacket(packetData, buffers);\n  pack.attachments = buffers.length; // number of binary 'attachments'\n  return {packet: pack, buffers: buffers};\n};\n\nfunction _deconstructPacket(data, buffers) {\n  if (!data) return data;\n\n  if (isBuf(data)) {\n    var placeholder = { _placeholder: true, num: buffers.length };\n    buffers.push(data);\n    return placeholder;\n  } else if (isArray(data)) {\n    var newData = new Array(data.length);\n    for (var i = 0; i < data.length; i++) {\n      newData[i] = _deconstructPacket(data[i], buffers);\n    }\n    return newData;\n  } else if (typeof data === 'object' && !(data instanceof Date)) {\n    var newData = {};\n    for (var key in data) {\n      newData[key] = _deconstructPacket(data[key], buffers);\n    }\n    return newData;\n  }\n  return data;\n}\n\n/**\n * Reconstructs a binary packet from its placeholder packet and buffers\n *\n * @param {Object} packet - event packet with placeholders\n * @param {Array} buffers - binary buffers to put in placeholder positions\n * @return {Object} reconstructed packet\n * @api public\n */\n\nexports.reconstructPacket = function(packet, buffers) {\n  packet.data = _reconstructPacket(packet.data, buffers);\n  packet.attachments = undefined; // no longer useful\n  return packet;\n};\n\nfunction _reconstructPacket(data, buffers) {\n  if (!data) return data;\n\n  if (data && data._placeholder === true) {\n    var isIndexValid =\n      typeof data.num === \"number\" &&\n      data.num >= 0 &&\n      data.num < buffers.length;\n    if (isIndexValid) {\n      return buffers[data.num]; // appropriate buffer (should be natural order anyway)\n    } else {\n      throw new Error(\"illegal attachments\");\n    }\n  } else if (isArray(data)) {\n    for (var i = 0; i < data.length; i++) {\n      data[i] = _reconstructPacket(data[i], buffers);\n    }\n  } else if (typeof data === 'object') {\n    for (var key in data) {\n      data[key] = _reconstructPacket(data[key], buffers);\n    }\n  }\n\n  return data;\n}\n\n/**\n * Asynchronously removes Blobs or Files from data via\n * FileReader's readAsArrayBuffer method. Used before encoding\n * data as msgpack. Calls callback with the blobless data.\n *\n * @param {Object} data\n * @param {Function} callback\n * @api private\n */\n\nexports.removeBlobs = function(data, callback) {\n  function _removeBlobs(obj, curKey, containingObject) {\n    if (!obj) return obj;\n\n    // convert any blob\n    if ((withNativeBlob && obj instanceof Blob) ||\n        (withNativeFile && obj instanceof File)) {\n      pendingBlobs++;\n\n      // async filereader\n      var fileReader = new FileReader();\n      fileReader.onload = function() { // this.result == arraybuffer\n        if (containingObject) {\n          containingObject[curKey] = this.result;\n        }\n        else {\n          bloblessData = this.result;\n        }\n\n        // if nothing pending its callback time\n        if(! --pendingBlobs) {\n          callback(bloblessData);\n        }\n      };\n\n      fileReader.readAsArrayBuffer(obj); // blob -> arraybuffer\n    } else if (isArray(obj)) { // handle array\n      for (var i = 0; i < obj.length; i++) {\n        _removeBlobs(obj[i], i, obj);\n      }\n    } else if (typeof obj === 'object' && !isBuf(obj)) { // and object\n      for (var key in obj) {\n        _removeBlobs(obj[key], key, obj);\n      }\n    }\n  }\n\n  var pendingBlobs = 0;\n  var bloblessData = data;\n  _removeBlobs(bloblessData);\n  if (!pendingBlobs) {\n    callback(bloblessData);\n  }\n};\n","\n/**\n * Module dependencies.\n */\n\nvar debug = require('debug')('socket.io-parser');\nvar Emitter = require('component-emitter');\nvar binary = require('./binary');\nvar isArray = require('isarray');\nvar isBuf = require('./is-buffer');\n\n/**\n * Protocol version.\n *\n * @api public\n */\n\nexports.protocol = 4;\n\n/**\n * Packet types.\n *\n * @api public\n */\n\nexports.types = [\n  'CONNECT',\n  'DISCONNECT',\n  'EVENT',\n  'ACK',\n  'ERROR',\n  'BINARY_EVENT',\n  'BINARY_ACK'\n];\n\n/**\n * Packet type `connect`.\n *\n * @api public\n */\n\nexports.CONNECT = 0;\n\n/**\n * Packet type `disconnect`.\n *\n * @api public\n */\n\nexports.DISCONNECT = 1;\n\n/**\n * Packet type `event`.\n *\n * @api public\n */\n\nexports.EVENT = 2;\n\n/**\n * Packet type `ack`.\n *\n * @api public\n */\n\nexports.ACK = 3;\n\n/**\n * Packet type `error`.\n *\n * @api public\n */\n\nexports.ERROR = 4;\n\n/**\n * Packet type 'binary event'\n *\n * @api public\n */\n\nexports.BINARY_EVENT = 5;\n\n/**\n * Packet type `binary ack`. For acks with binary arguments.\n *\n * @api public\n */\n\nexports.BINARY_ACK = 6;\n\n/**\n * Encoder constructor.\n *\n * @api public\n */\n\nexports.Encoder = Encoder;\n\n/**\n * Decoder constructor.\n *\n * @api public\n */\n\nexports.Decoder = Decoder;\n\n/**\n * A socket.io Encoder instance\n *\n * @api public\n */\n\nfunction Encoder() {}\n\nvar ERROR_PACKET = exports.ERROR + '\"encode error\"';\n\n/**\n * Encode a packet as a single string if non-binary, or as a\n * buffer sequence, depending on packet type.\n *\n * @param {Object} obj - packet object\n * @param {Function} callback - function to handle encodings (likely engine.write)\n * @return Calls callback with Array of encodings\n * @api public\n */\n\nEncoder.prototype.encode = function(obj, callback){\n  debug('encoding packet %j', obj);\n\n  if (exports.BINARY_EVENT === obj.type || exports.BINARY_ACK === obj.type) {\n    encodeAsBinary(obj, callback);\n  } else {\n    var encoding = encodeAsString(obj);\n    callback([encoding]);\n  }\n};\n\n/**\n * Encode packet as string.\n *\n * @param {Object} packet\n * @return {String} encoded\n * @api private\n */\n\nfunction encodeAsString(obj) {\n\n  // first is type\n  var str = '' + obj.type;\n\n  // attachments if we have them\n  if (exports.BINARY_EVENT === obj.type || exports.BINARY_ACK === obj.type) {\n    str += obj.attachments + '-';\n  }\n\n  // if we have a namespace other than `/`\n  // we append it followed by a comma `,`\n  if (obj.nsp && '/' !== obj.nsp) {\n    str += obj.nsp + ',';\n  }\n\n  // immediately followed by the id\n  if (null != obj.id) {\n    str += obj.id;\n  }\n\n  // json data\n  if (null != obj.data) {\n    var payload = tryStringify(obj.data);\n    if (payload !== false) {\n      str += payload;\n    } else {\n      return ERROR_PACKET;\n    }\n  }\n\n  debug('encoded %j as %s', obj, str);\n  return str;\n}\n\nfunction tryStringify(str) {\n  try {\n    return JSON.stringify(str);\n  } catch(e){\n    return false;\n  }\n}\n\n/**\n * Encode packet as 'buffer sequence' by removing blobs, and\n * deconstructing packet into object with placeholders and\n * a list of buffers.\n *\n * @param {Object} packet\n * @return {Buffer} encoded\n * @api private\n */\n\nfunction encodeAsBinary(obj, callback) {\n\n  function writeEncoding(bloblessData) {\n    var deconstruction = binary.deconstructPacket(bloblessData);\n    var pack = encodeAsString(deconstruction.packet);\n    var buffers = deconstruction.buffers;\n\n    buffers.unshift(pack); // add packet info to beginning of data list\n    callback(buffers); // write all the buffers\n  }\n\n  binary.removeBlobs(obj, writeEncoding);\n}\n\n/**\n * A socket.io Decoder instance\n *\n * @return {Object} decoder\n * @api public\n */\n\nfunction Decoder() {\n  this.reconstructor = null;\n}\n\n/**\n * Mix in `Emitter` with Decoder.\n */\n\nEmitter(Decoder.prototype);\n\n/**\n * Decodes an encoded packet string into packet JSON.\n *\n * @param {String} obj - encoded packet\n * @return {Object} packet\n * @api public\n */\n\nDecoder.prototype.add = function(obj) {\n  var packet;\n  if (typeof obj === 'string') {\n    if (this.reconstructor) {\n      throw new Error(\"got plaintext data when reconstructing a packet\");\n    }\n    packet = decodeString(obj);\n    if (exports.BINARY_EVENT === packet.type || exports.BINARY_ACK === packet.type) { // binary packet's json\n      this.reconstructor = new BinaryReconstructor(packet);\n\n      // no attachments, labeled binary but no binary data to follow\n      if (this.reconstructor.reconPack.attachments === 0) {\n        this.emit('decoded', packet);\n      }\n    } else { // non-binary full packet\n      this.emit('decoded', packet);\n    }\n  } else if (isBuf(obj) || obj.base64) { // raw binary data\n    if (!this.reconstructor) {\n      throw new Error('got binary data when not reconstructing a packet');\n    } else {\n      packet = this.reconstructor.takeBinaryData(obj);\n      if (packet) { // received final buffer\n        this.reconstructor = null;\n        this.emit('decoded', packet);\n      }\n    }\n  } else {\n    throw new Error('Unknown type: ' + obj);\n  }\n};\n\n/**\n * Decode a packet String (JSON data)\n *\n * @param {String} str\n * @return {Object} packet\n * @api private\n */\n\nfunction decodeString(str) {\n  var i = 0;\n  // look up type\n  var p = {\n    type: Number(str.charAt(0))\n  };\n\n  if (null == exports.types[p.type]) {\n    return error('unknown packet type ' + p.type);\n  }\n\n  // look up attachments if type binary\n  if (exports.BINARY_EVENT === p.type || exports.BINARY_ACK === p.type) {\n    var start = i + 1;\n    while (str.charAt(++i) !== '-' && i != str.length) {}\n    var buf = str.substring(start, i);\n    if (buf != Number(buf) || str.charAt(i) !== '-') {\n      throw new Error('Illegal attachments');\n    }\n    p.attachments = Number(buf);\n  }\n\n  // look up namespace (if any)\n  if ('/' === str.charAt(i + 1)) {\n    var start = i + 1;\n    while (++i) {\n      var c = str.charAt(i);\n      if (',' === c) break;\n      if (i === str.length) break;\n    }\n    p.nsp = str.substring(start, i);\n  } else {\n    p.nsp = '/';\n  }\n\n  // look up id\n  var next = str.charAt(i + 1);\n  if ('' !== next && Number(next) == next) {\n    var start = i + 1;\n    while (++i) {\n      var c = str.charAt(i);\n      if (null == c || Number(c) != c) {\n        --i;\n        break;\n      }\n      if (i === str.length) break;\n    }\n    p.id = Number(str.substring(start, i + 1));\n  }\n\n  // look up json data\n  if (str.charAt(++i)) {\n    var payload = tryParse(str.substr(i));\n    var isPayloadValid = payload !== false && (p.type === exports.ERROR || isArray(payload));\n    if (isPayloadValid) {\n      p.data = payload;\n    } else {\n      return error('invalid payload');\n    }\n  }\n\n  debug('decoded %s as %j', str, p);\n  return p;\n}\n\nfunction tryParse(str) {\n  try {\n    return JSON.parse(str);\n  } catch(e){\n    return false;\n  }\n}\n\n/**\n * Deallocates a parser's resources\n *\n * @api public\n */\n\nDecoder.prototype.destroy = function() {\n  if (this.reconstructor) {\n    this.reconstructor.finishedReconstruction();\n  }\n};\n\n/**\n * A manager of a binary event's 'buffer sequence'. Should\n * be constructed whenever a packet of type BINARY_EVENT is\n * decoded.\n *\n * @param {Object} packet\n * @return {BinaryReconstructor} initialized reconstructor\n * @api private\n */\n\nfunction BinaryReconstructor(packet) {\n  this.reconPack = packet;\n  this.buffers = [];\n}\n\n/**\n * Method to be called when binary data received from connection\n * after a BINARY_EVENT packet.\n *\n * @param {Buffer | ArrayBuffer} binData - the raw binary data received\n * @return {null | Object} returns null if more binary data is expected or\n *   a reconstructed packet object if all buffers have been received.\n * @api private\n */\n\nBinaryReconstructor.prototype.takeBinaryData = function(binData) {\n  this.buffers.push(binData);\n  if (this.buffers.length === this.reconPack.attachments) { // done with buffer list\n    var packet = binary.reconstructPacket(this.reconPack, this.buffers);\n    this.finishedReconstruction();\n    return packet;\n  }\n  return null;\n};\n\n/**\n * Cleans up binary packet reconstruction variables.\n *\n * @api private\n */\n\nBinaryReconstructor.prototype.finishedReconstruction = function() {\n  this.reconPack = null;\n  this.buffers = [];\n};\n\nfunction error(msg) {\n  return {\n    type: exports.ERROR,\n    data: 'parser error: ' + msg\n  };\n}\n","\nmodule.exports = isBuf;\n\nvar withNativeBuffer = typeof Buffer === 'function' && typeof Buffer.isBuffer === 'function';\nvar withNativeArrayBuffer = typeof ArrayBuffer === 'function';\n\nvar isView = function (obj) {\n  return typeof ArrayBuffer.isView === 'function' ? ArrayBuffer.isView(obj) : (obj.buffer instanceof ArrayBuffer);\n};\n\n/**\n * Returns true if obj is a buffer or an arraybuffer.\n *\n * @api private\n */\n\nfunction isBuf(obj) {\n  return (withNativeBuffer && Buffer.isBuffer(obj)) ||\n          (withNativeArrayBuffer && (obj instanceof ArrayBuffer || isView(obj)));\n}\n","/**\n * This is the web browser implementation of `debug()`.\n *\n * Expose `debug()` as the module.\n */\n\nexports = module.exports = require('./debug');\nexports.log = log;\nexports.formatArgs = formatArgs;\nexports.save = save;\nexports.load = load;\nexports.useColors = useColors;\nexports.storage = 'undefined' != typeof chrome\n               && 'undefined' != typeof chrome.storage\n                  ? chrome.storage.local\n                  : localstorage();\n\n/**\n * Colors.\n */\n\nexports.colors = [\n  '#0000CC', '#0000FF', '#0033CC', '#0033FF', '#0066CC', '#0066FF', '#0099CC',\n  '#0099FF', '#00CC00', '#00CC33', '#00CC66', '#00CC99', '#00CCCC', '#00CCFF',\n  '#3300CC', '#3300FF', '#3333CC', '#3333FF', '#3366CC', '#3366FF', '#3399CC',\n  '#3399FF', '#33CC00', '#33CC33', '#33CC66', '#33CC99', '#33CCCC', '#33CCFF',\n  '#6600CC', '#6600FF', '#6633CC', '#6633FF', '#66CC00', '#66CC33', '#9900CC',\n  '#9900FF', '#9933CC', '#9933FF', '#99CC00', '#99CC33', '#CC0000', '#CC0033',\n  '#CC0066', '#CC0099', '#CC00CC', '#CC00FF', '#CC3300', '#CC3333', '#CC3366',\n  '#CC3399', '#CC33CC', '#CC33FF', '#CC6600', '#CC6633', '#CC9900', '#CC9933',\n  '#CCCC00', '#CCCC33', '#FF0000', '#FF0033', '#FF0066', '#FF0099', '#FF00CC',\n  '#FF00FF', '#FF3300', '#FF3333', '#FF3366', '#FF3399', '#FF33CC', '#FF33FF',\n  '#FF6600', '#FF6633', '#FF9900', '#FF9933', '#FFCC00', '#FFCC33'\n];\n\n/**\n * Currently only WebKit-based Web Inspectors, Firefox >= v31,\n * and the Firebug extension (any Firefox version) are known\n * to support \"%c\" CSS customizations.\n *\n * TODO: add a `localStorage` variable to explicitly enable/disable colors\n */\n\nfunction useColors() {\n  // NB: In an Electron preload script, document will be defined but not fully\n  // initialized. Since we know we're in Chrome, we'll just detect this case\n  // explicitly\n  if (typeof window !== 'undefined' && window.process && window.process.type === 'renderer') {\n    return true;\n  }\n\n  // Internet Explorer and Edge do not support colors.\n  if (typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/(edge|trident)\\/(\\d+)/)) {\n    return false;\n  }\n\n  // is webkit? http://stackoverflow.com/a/16459606/376773\n  // document is undefined in react-native: https://github.com/facebook/react-native/pull/1632\n  return (typeof document !== 'undefined' && document.documentElement && document.documentElement.style && document.documentElement.style.WebkitAppearance) ||\n    // is firebug? http://stackoverflow.com/a/398120/376773\n    (typeof window !== 'undefined' && window.console && (window.console.firebug || (window.console.exception && window.console.table))) ||\n    // is firefox >= v31?\n    // https://developer.mozilla.org/en-US/docs/Tools/Web_Console#Styling_messages\n    (typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/firefox\\/(\\d+)/) && parseInt(RegExp.$1, 10) >= 31) ||\n    // double check webkit in userAgent just in case we are in a worker\n    (typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/applewebkit\\/(\\d+)/));\n}\n\n/**\n * Map %j to `JSON.stringify()`, since no Web Inspectors do that by default.\n */\n\nexports.formatters.j = function(v) {\n  try {\n    return JSON.stringify(v);\n  } catch (err) {\n    return '[UnexpectedJSONParseError]: ' + err.message;\n  }\n};\n\n\n/**\n * Colorize log arguments if enabled.\n *\n * @api public\n */\n\nfunction formatArgs(args) {\n  var useColors = this.useColors;\n\n  args[0] = (useColors ? '%c' : '')\n    + this.namespace\n    + (useColors ? ' %c' : ' ')\n    + args[0]\n    + (useColors ? '%c ' : ' ')\n    + '+' + exports.humanize(this.diff);\n\n  if (!useColors) return;\n\n  var c = 'color: ' + this.color;\n  args.splice(1, 0, c, 'color: inherit')\n\n  // the final \"%c\" is somewhat tricky, because there could be other\n  // arguments passed either before or after the %c, so we need to\n  // figure out the correct index to insert the CSS into\n  var index = 0;\n  var lastC = 0;\n  args[0].replace(/%[a-zA-Z%]/g, function(match) {\n    if ('%%' === match) return;\n    index++;\n    if ('%c' === match) {\n      // we only are interested in the *last* %c\n      // (the user may have provided their own)\n      lastC = index;\n    }\n  });\n\n  args.splice(lastC, 0, c);\n}\n\n/**\n * Invokes `console.log()` when available.\n * No-op when `console.log` is not a \"function\".\n *\n * @api public\n */\n\nfunction log() {\n  // this hackery is required for IE8/9, where\n  // the `console.log` function doesn't have 'apply'\n  return 'object' === typeof console\n    && console.log\n    && Function.prototype.apply.call(console.log, console, arguments);\n}\n\n/**\n * Save `namespaces`.\n *\n * @param {String} namespaces\n * @api private\n */\n\nfunction save(namespaces) {\n  try {\n    if (null == namespaces) {\n      exports.storage.removeItem('debug');\n    } else {\n      exports.storage.debug = namespaces;\n    }\n  } catch(e) {}\n}\n\n/**\n * Load `namespaces`.\n *\n * @return {String} returns the previously persisted debug modes\n * @api private\n */\n\nfunction load() {\n  var r;\n  try {\n    r = exports.storage.debug;\n  } catch(e) {}\n\n  // If debug isn't set in LS, and we're in Electron, try to load $DEBUG\n  if (!r && typeof process !== 'undefined' && 'env' in process) {\n    r = process.env.DEBUG;\n  }\n\n  return r;\n}\n\n/**\n * Enable namespaces listed in `localStorage.debug` initially.\n */\n\nexports.enable(load());\n\n/**\n * Localstorage attempts to return the localstorage.\n *\n * This is necessary because safari throws\n * when a user disables cookies/localstorage\n * and you attempt to access it.\n *\n * @return {LocalStorage}\n * @api private\n */\n\nfunction localstorage() {\n  try {\n    return window.localStorage;\n  } catch (e) {}\n}\n","\n/**\n * This is the common logic for both the Node.js and web browser\n * implementations of `debug()`.\n *\n * Expose `debug()` as the module.\n */\n\nexports = module.exports = createDebug.debug = createDebug['default'] = createDebug;\nexports.coerce = coerce;\nexports.disable = disable;\nexports.enable = enable;\nexports.enabled = enabled;\nexports.humanize = require('ms');\n\n/**\n * Active `debug` instances.\n */\nexports.instances = [];\n\n/**\n * The currently active debug mode names, and names to skip.\n */\n\nexports.names = [];\nexports.skips = [];\n\n/**\n * Map of special \"%n\" handling functions, for the debug \"format\" argument.\n *\n * Valid key names are a single, lower or upper-case letter, i.e. \"n\" and \"N\".\n */\n\nexports.formatters = {};\n\n/**\n * Select a color.\n * @param {String} namespace\n * @return {Number}\n * @api private\n */\n\nfunction selectColor(namespace) {\n  var hash = 0, i;\n\n  for (i in namespace) {\n    hash  = ((hash << 5) - hash) + namespace.charCodeAt(i);\n    hash |= 0; // Convert to 32bit integer\n  }\n\n  return exports.colors[Math.abs(hash) % exports.colors.length];\n}\n\n/**\n * Create a debugger with the given `namespace`.\n *\n * @param {String} namespace\n * @return {Function}\n * @api public\n */\n\nfunction createDebug(namespace) {\n\n  var prevTime;\n\n  function debug() {\n    // disabled?\n    if (!debug.enabled) return;\n\n    var self = debug;\n\n    // set `diff` timestamp\n    var curr = +new Date();\n    var ms = curr - (prevTime || curr);\n    self.diff = ms;\n    self.prev = prevTime;\n    self.curr = curr;\n    prevTime = curr;\n\n    // turn the `arguments` into a proper Array\n    var args = new Array(arguments.length);\n    for (var i = 0; i < args.length; i++) {\n      args[i] = arguments[i];\n    }\n\n    args[0] = exports.coerce(args[0]);\n\n    if ('string' !== typeof args[0]) {\n      // anything else let's inspect with %O\n      args.unshift('%O');\n    }\n\n    // apply any `formatters` transformations\n    var index = 0;\n    args[0] = args[0].replace(/%([a-zA-Z%])/g, function(match, format) {\n      // if we encounter an escaped % then don't increase the array index\n      if (match === '%%') return match;\n      index++;\n      var formatter = exports.formatters[format];\n      if ('function' === typeof formatter) {\n        var val = args[index];\n        match = formatter.call(self, val);\n\n        // now we need to remove `args[index]` since it's inlined in the `format`\n        args.splice(index, 1);\n        index--;\n      }\n      return match;\n    });\n\n    // apply env-specific formatting (colors, etc.)\n    exports.formatArgs.call(self, args);\n\n    var logFn = debug.log || exports.log || console.log.bind(console);\n    logFn.apply(self, args);\n  }\n\n  debug.namespace = namespace;\n  debug.enabled = exports.enabled(namespace);\n  debug.useColors = exports.useColors();\n  debug.color = selectColor(namespace);\n  debug.destroy = destroy;\n\n  // env-specific initialization logic for debug instances\n  if ('function' === typeof exports.init) {\n    exports.init(debug);\n  }\n\n  exports.instances.push(debug);\n\n  return debug;\n}\n\nfunction destroy () {\n  var index = exports.instances.indexOf(this);\n  if (index !== -1) {\n    exports.instances.splice(index, 1);\n    return true;\n  } else {\n    return false;\n  }\n}\n\n/**\n * Enables a debug mode by namespaces. This can include modes\n * separated by a colon and wildcards.\n *\n * @param {String} namespaces\n * @api public\n */\n\nfunction enable(namespaces) {\n  exports.save(namespaces);\n\n  exports.names = [];\n  exports.skips = [];\n\n  var i;\n  var split = (typeof namespaces === 'string' ? namespaces : '').split(/[\\s,]+/);\n  var len = split.length;\n\n  for (i = 0; i < len; i++) {\n    if (!split[i]) continue; // ignore empty strings\n    namespaces = split[i].replace(/\\*/g, '.*?');\n    if (namespaces[0] === '-') {\n      exports.skips.push(new RegExp('^' + namespaces.substr(1) + '$'));\n    } else {\n      exports.names.push(new RegExp('^' + namespaces + '$'));\n    }\n  }\n\n  for (i = 0; i < exports.instances.length; i++) {\n    var instance = exports.instances[i];\n    instance.enabled = exports.enabled(instance.namespace);\n  }\n}\n\n/**\n * Disable debug output.\n *\n * @api public\n */\n\nfunction disable() {\n  exports.enable('');\n}\n\n/**\n * Returns true if the given mode name is enabled, false otherwise.\n *\n * @param {String} name\n * @return {Boolean}\n * @api public\n */\n\nfunction enabled(name) {\n  if (name[name.length - 1] === '*') {\n    return true;\n  }\n  var i, len;\n  for (i = 0, len = exports.skips.length; i < len; i++) {\n    if (exports.skips[i].test(name)) {\n      return false;\n    }\n  }\n  for (i = 0, len = exports.names.length; i < len; i++) {\n    if (exports.names[i].test(name)) {\n      return true;\n    }\n  }\n  return false;\n}\n\n/**\n * Coerce `val`.\n *\n * @param {Mixed} val\n * @return {Mixed}\n * @api private\n */\n\nfunction coerce(val) {\n  if (val instanceof Error) return val.stack || val.message;\n  return val;\n}\n","var toString = {}.toString;\n\nmodule.exports = Array.isArray || function (arr) {\n  return toString.call(arr) == '[object Array]';\n};\n","/**\n * Helpers.\n */\n\nvar s = 1000;\nvar m = s * 60;\nvar h = m * 60;\nvar d = h * 24;\nvar y = d * 365.25;\n\n/**\n * Parse or format the given `val`.\n *\n * Options:\n *\n *  - `long` verbose formatting [false]\n *\n * @param {String|Number} val\n * @param {Object} [options]\n * @throws {Error} throw an error if val is not a non-empty string or a number\n * @return {String|Number}\n * @api public\n */\n\nmodule.exports = function(val, options) {\n  options = options || {};\n  var type = typeof val;\n  if (type === 'string' && val.length > 0) {\n    return parse(val);\n  } else if (type === 'number' && isNaN(val) === false) {\n    return options.long ? fmtLong(val) : fmtShort(val);\n  }\n  throw new Error(\n    'val is not a non-empty string or a valid number. val=' +\n      JSON.stringify(val)\n  );\n};\n\n/**\n * Parse the given `str` and return milliseconds.\n *\n * @param {String} str\n * @return {Number}\n * @api private\n */\n\nfunction parse(str) {\n  str = String(str);\n  if (str.length > 100) {\n    return;\n  }\n  var match = /^((?:\\d+)?\\.?\\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(\n    str\n  );\n  if (!match) {\n    return;\n  }\n  var n = parseFloat(match[1]);\n  var type = (match[2] || 'ms').toLowerCase();\n  switch (type) {\n    case 'years':\n    case 'year':\n    case 'yrs':\n    case 'yr':\n    case 'y':\n      return n * y;\n    case 'days':\n    case 'day':\n    case 'd':\n      return n * d;\n    case 'hours':\n    case 'hour':\n    case 'hrs':\n    case 'hr':\n    case 'h':\n      return n * h;\n    case 'minutes':\n    case 'minute':\n    case 'mins':\n    case 'min':\n    case 'm':\n      return n * m;\n    case 'seconds':\n    case 'second':\n    case 'secs':\n    case 'sec':\n    case 's':\n      return n * s;\n    case 'milliseconds':\n    case 'millisecond':\n    case 'msecs':\n    case 'msec':\n    case 'ms':\n      return n;\n    default:\n      return undefined;\n  }\n}\n\n/**\n * Short format for `ms`.\n *\n * @param {Number} ms\n * @return {String}\n * @api private\n */\n\nfunction fmtShort(ms) {\n  if (ms >= d) {\n    return Math.round(ms / d) + 'd';\n  }\n  if (ms >= h) {\n    return Math.round(ms / h) + 'h';\n  }\n  if (ms >= m) {\n    return Math.round(ms / m) + 'm';\n  }\n  if (ms >= s) {\n    return Math.round(ms / s) + 's';\n  }\n  return ms + 'ms';\n}\n\n/**\n * Long format for `ms`.\n *\n * @param {Number} ms\n * @return {String}\n * @api private\n */\n\nfunction fmtLong(ms) {\n  return plural(ms, d, 'day') ||\n    plural(ms, h, 'hour') ||\n    plural(ms, m, 'minute') ||\n    plural(ms, s, 'second') ||\n    ms + ' ms';\n}\n\n/**\n * Pluralization helper.\n */\n\nfunction plural(ms, n, name) {\n  if (ms < n) {\n    return;\n  }\n  if (ms < n * 1.5) {\n    return Math.floor(ms / n) + ' ' + name;\n  }\n  return Math.ceil(ms / n) + ' ' + name + 's';\n}\n","(function (global, factory) {\n\ttypeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n\ttypeof define === 'function' && define.amd ? define(factory) :\n\t(global.BrowserSpriteSymbol = factory());\n}(this, (function () { 'use strict';\n\nvar SpriteSymbol = function SpriteSymbol(ref) {\n  var id = ref.id;\n  var viewBox = ref.viewBox;\n  var content = ref.content;\n\n  this.id = id;\n  this.viewBox = viewBox;\n  this.content = content;\n};\n\n/**\n * @return {string}\n */\nSpriteSymbol.prototype.stringify = function stringify () {\n  return this.content;\n};\n\n/**\n * @return {string}\n */\nSpriteSymbol.prototype.toString = function toString () {\n  return this.stringify();\n};\n\nSpriteSymbol.prototype.destroy = function destroy () {\n    var this$1 = this;\n\n  ['id', 'viewBox', 'content'].forEach(function (prop) { return delete this$1[prop]; });\n};\n\n/**\n * @param {string} content\n * @return {Element}\n */\nvar parse = function (content) {\n  var hasImportNode = !!document.importNode;\n  var doc = new DOMParser().parseFromString(content, 'image/svg+xml').documentElement;\n\n  /**\n   * Fix for browser which are throwing WrongDocumentError\n   * if you insert an element which is not part of the document\n   * @see http://stackoverflow.com/a/7986519/4624403\n   */\n  if (hasImportNode) {\n    return document.importNode(doc, true);\n  }\n\n  return doc;\n};\n\nvar commonjsGlobal = typeof window !== 'undefined' ? window : typeof global !== 'undefined' ? global : typeof self !== 'undefined' ? self : {};\n\n\n\n\n\nfunction createCommonjsModule(fn, module) {\n\treturn module = { exports: {} }, fn(module, module.exports), module.exports;\n}\n\nvar deepmerge = createCommonjsModule(function (module, exports) {\n(function (root, factory) {\n    if (typeof undefined === 'function' && undefined.amd) {\n        undefined(factory);\n    } else {\n        module.exports = factory();\n    }\n}(commonjsGlobal, function () {\n\nfunction isMergeableObject(val) {\n    var nonNullObject = val && typeof val === 'object';\n\n    return nonNullObject\n        && Object.prototype.toString.call(val) !== '[object RegExp]'\n        && Object.prototype.toString.call(val) !== '[object Date]'\n}\n\nfunction emptyTarget(val) {\n    return Array.isArray(val) ? [] : {}\n}\n\nfunction cloneIfNecessary(value, optionsArgument) {\n    var clone = optionsArgument && optionsArgument.clone === true;\n    return (clone && isMergeableObject(value)) ? deepmerge(emptyTarget(value), value, optionsArgument) : value\n}\n\nfunction defaultArrayMerge(target, source, optionsArgument) {\n    var destination = target.slice();\n    source.forEach(function(e, i) {\n        if (typeof destination[i] === 'undefined') {\n            destination[i] = cloneIfNecessary(e, optionsArgument);\n        } else if (isMergeableObject(e)) {\n            destination[i] = deepmerge(target[i], e, optionsArgument);\n        } else if (target.indexOf(e) === -1) {\n            destination.push(cloneIfNecessary(e, optionsArgument));\n        }\n    });\n    return destination\n}\n\nfunction mergeObject(target, source, optionsArgument) {\n    var destination = {};\n    if (isMergeableObject(target)) {\n        Object.keys(target).forEach(function (key) {\n            destination[key] = cloneIfNecessary(target[key], optionsArgument);\n        });\n    }\n    Object.keys(source).forEach(function (key) {\n        if (!isMergeableObject(source[key]) || !target[key]) {\n            destination[key] = cloneIfNecessary(source[key], optionsArgument);\n        } else {\n            destination[key] = deepmerge(target[key], source[key], optionsArgument);\n        }\n    });\n    return destination\n}\n\nfunction deepmerge(target, source, optionsArgument) {\n    var array = Array.isArray(source);\n    var options = optionsArgument || { arrayMerge: defaultArrayMerge };\n    var arrayMerge = options.arrayMerge || defaultArrayMerge;\n\n    if (array) {\n        return Array.isArray(target) ? arrayMerge(target, source, optionsArgument) : cloneIfNecessary(source, optionsArgument)\n    } else {\n        return mergeObject(target, source, optionsArgument)\n    }\n}\n\ndeepmerge.all = function deepmergeAll(array, optionsArgument) {\n    if (!Array.isArray(array) || array.length < 2) {\n        throw new Error('first argument should be an array with at least two elements')\n    }\n\n    // we are sure there are at least 2 values, so it is safe to have no initial value\n    return array.reduce(function(prev, next) {\n        return deepmerge(prev, next, optionsArgument)\n    })\n};\n\nreturn deepmerge\n\n}));\n});\n\nvar namespaces_1 = createCommonjsModule(function (module, exports) {\nvar namespaces = {\n  svg: {\n    name: 'xmlns',\n    uri: 'http://www.w3.org/2000/svg'\n  },\n  xlink: {\n    name: 'xmlns:xlink',\n    uri: 'http://www.w3.org/1999/xlink'\n  }\n};\n\nexports.default = namespaces;\nmodule.exports = exports.default;\n});\n\n/**\n * @param {Object} attrs\n * @return {string}\n */\nvar objectToAttrsString = function (attrs) {\n  return Object.keys(attrs).map(function (attr) {\n    var value = attrs[attr].toString().replace(/\"/g, '&quot;');\n    return (attr + \"=\\\"\" + value + \"\\\"\");\n  }).join(' ');\n};\n\nvar svg = namespaces_1.svg;\nvar xlink = namespaces_1.xlink;\n\nvar defaultAttrs = {};\ndefaultAttrs[svg.name] = svg.uri;\ndefaultAttrs[xlink.name] = xlink.uri;\n\n/**\n * @param {string} [content]\n * @param {Object} [attributes]\n * @return {string}\n */\nvar wrapInSvgString = function (content, attributes) {\n  if ( content === void 0 ) content = '';\n\n  var attrs = deepmerge(defaultAttrs, attributes || {});\n  var attrsRendered = objectToAttrsString(attrs);\n  return (\"<svg \" + attrsRendered + \">\" + content + \"</svg>\");\n};\n\nvar BrowserSpriteSymbol = (function (SpriteSymbol$$1) {\n  function BrowserSpriteSymbol () {\n    SpriteSymbol$$1.apply(this, arguments);\n  }\n\n  if ( SpriteSymbol$$1 ) BrowserSpriteSymbol.__proto__ = SpriteSymbol$$1;\n  BrowserSpriteSymbol.prototype = Object.create( SpriteSymbol$$1 && SpriteSymbol$$1.prototype );\n  BrowserSpriteSymbol.prototype.constructor = BrowserSpriteSymbol;\n\n  var prototypeAccessors = { isMounted: {} };\n\n  prototypeAccessors.isMounted.get = function () {\n    return !!this.node;\n  };\n\n  /**\n   * @param {Element} node\n   * @return {BrowserSpriteSymbol}\n   */\n  BrowserSpriteSymbol.createFromExistingNode = function createFromExistingNode (node) {\n    return new BrowserSpriteSymbol({\n      id: node.getAttribute('id'),\n      viewBox: node.getAttribute('viewBox'),\n      content: node.outerHTML\n    });\n  };\n\n  BrowserSpriteSymbol.prototype.destroy = function destroy () {\n    if (this.isMounted) {\n      this.unmount();\n    }\n    SpriteSymbol$$1.prototype.destroy.call(this);\n  };\n\n  /**\n   * @param {Element|string} target\n   * @return {Element}\n   */\n  BrowserSpriteSymbol.prototype.mount = function mount (target) {\n    if (this.isMounted) {\n      return this.node;\n    }\n\n    var mountTarget = typeof target === 'string' ? document.querySelector(target) : target;\n    var node = this.render();\n    this.node = node;\n\n    mountTarget.appendChild(node);\n\n    return node;\n  };\n\n  /**\n   * @return {Element}\n   */\n  BrowserSpriteSymbol.prototype.render = function render () {\n    var content = this.stringify();\n    return parse(wrapInSvgString(content)).childNodes[0];\n  };\n\n  BrowserSpriteSymbol.prototype.unmount = function unmount () {\n    this.node.parentNode.removeChild(this.node);\n  };\n\n  Object.defineProperties( BrowserSpriteSymbol.prototype, prototypeAccessors );\n\n  return BrowserSpriteSymbol;\n}(SpriteSymbol));\n\nreturn BrowserSpriteSymbol;\n\n})));\n","(function (global, factory) {\n\ttypeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n\ttypeof define === 'function' && define.amd ? define(factory) :\n\t(global.BrowserSprite = factory());\n}(this, (function () { 'use strict';\n\nvar commonjsGlobal = typeof window !== 'undefined' ? window : typeof global !== 'undefined' ? global : typeof self !== 'undefined' ? self : {};\n\n\n\n\n\nfunction createCommonjsModule(fn, module) {\n\treturn module = { exports: {} }, fn(module, module.exports), module.exports;\n}\n\nvar deepmerge = createCommonjsModule(function (module, exports) {\n(function (root, factory) {\n    if (typeof undefined === 'function' && undefined.amd) {\n        undefined(factory);\n    } else {\n        module.exports = factory();\n    }\n}(commonjsGlobal, function () {\n\nfunction isMergeableObject(val) {\n    var nonNullObject = val && typeof val === 'object';\n\n    return nonNullObject\n        && Object.prototype.toString.call(val) !== '[object RegExp]'\n        && Object.prototype.toString.call(val) !== '[object Date]'\n}\n\nfunction emptyTarget(val) {\n    return Array.isArray(val) ? [] : {}\n}\n\nfunction cloneIfNecessary(value, optionsArgument) {\n    var clone = optionsArgument && optionsArgument.clone === true;\n    return (clone && isMergeableObject(value)) ? deepmerge(emptyTarget(value), value, optionsArgument) : value\n}\n\nfunction defaultArrayMerge(target, source, optionsArgument) {\n    var destination = target.slice();\n    source.forEach(function(e, i) {\n        if (typeof destination[i] === 'undefined') {\n            destination[i] = cloneIfNecessary(e, optionsArgument);\n        } else if (isMergeableObject(e)) {\n            destination[i] = deepmerge(target[i], e, optionsArgument);\n        } else if (target.indexOf(e) === -1) {\n            destination.push(cloneIfNecessary(e, optionsArgument));\n        }\n    });\n    return destination\n}\n\nfunction mergeObject(target, source, optionsArgument) {\n    var destination = {};\n    if (isMergeableObject(target)) {\n        Object.keys(target).forEach(function (key) {\n            destination[key] = cloneIfNecessary(target[key], optionsArgument);\n        });\n    }\n    Object.keys(source).forEach(function (key) {\n        if (!isMergeableObject(source[key]) || !target[key]) {\n            destination[key] = cloneIfNecessary(source[key], optionsArgument);\n        } else {\n            destination[key] = deepmerge(target[key], source[key], optionsArgument);\n        }\n    });\n    return destination\n}\n\nfunction deepmerge(target, source, optionsArgument) {\n    var array = Array.isArray(source);\n    var options = optionsArgument || { arrayMerge: defaultArrayMerge };\n    var arrayMerge = options.arrayMerge || defaultArrayMerge;\n\n    if (array) {\n        return Array.isArray(target) ? arrayMerge(target, source, optionsArgument) : cloneIfNecessary(source, optionsArgument)\n    } else {\n        return mergeObject(target, source, optionsArgument)\n    }\n}\n\ndeepmerge.all = function deepmergeAll(array, optionsArgument) {\n    if (!Array.isArray(array) || array.length < 2) {\n        throw new Error('first argument should be an array with at least two elements')\n    }\n\n    // we are sure there are at least 2 values, so it is safe to have no initial value\n    return array.reduce(function(prev, next) {\n        return deepmerge(prev, next, optionsArgument)\n    })\n};\n\nreturn deepmerge\n\n}));\n});\n\n//      \n// An event handler can take an optional event argument\n// and should not return a value\n                                          \n// An array of all currently registered event handlers for a type\n                                            \n// A map of event types and their corresponding event handlers.\n                        \n                                   \n  \n\n/** Mitt: Tiny (~200b) functional event emitter / pubsub.\n *  @name mitt\n *  @returns {Mitt}\n */\nfunction mitt(all                 ) {\n\tall = all || Object.create(null);\n\n\treturn {\n\t\t/**\n\t\t * Register an event handler for the given type.\n\t\t *\n\t\t * @param  {String} type\tType of event to listen for, or `\"*\"` for all events\n\t\t * @param  {Function} handler Function to call in response to given event\n\t\t * @memberOf mitt\n\t\t */\n\t\ton: function on(type        , handler              ) {\n\t\t\t(all[type] || (all[type] = [])).push(handler);\n\t\t},\n\n\t\t/**\n\t\t * Remove an event handler for the given type.\n\t\t *\n\t\t * @param  {String} type\tType of event to unregister `handler` from, or `\"*\"`\n\t\t * @param  {Function} handler Handler function to remove\n\t\t * @memberOf mitt\n\t\t */\n\t\toff: function off(type        , handler              ) {\n\t\t\tif (all[type]) {\n\t\t\t\tall[type].splice(all[type].indexOf(handler) >>> 0, 1);\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Invoke all handlers for the given type.\n\t\t * If present, `\"*\"` handlers are invoked after type-matched handlers.\n\t\t *\n\t\t * @param {String} type  The event type to invoke\n\t\t * @param {Any} [evt]  Any value (object is recommended and powerful), passed to each handler\n\t\t * @memberof mitt\n\t\t */\n\t\temit: function emit(type        , evt     ) {\n\t\t\t(all[type] || []).map(function (handler) { handler(evt); });\n\t\t\t(all['*'] || []).map(function (handler) { handler(type, evt); });\n\t\t}\n\t};\n}\n\nvar namespaces_1 = createCommonjsModule(function (module, exports) {\nvar namespaces = {\n  svg: {\n    name: 'xmlns',\n    uri: 'http://www.w3.org/2000/svg'\n  },\n  xlink: {\n    name: 'xmlns:xlink',\n    uri: 'http://www.w3.org/1999/xlink'\n  }\n};\n\nexports.default = namespaces;\nmodule.exports = exports.default;\n});\n\n/**\n * @param {Object} attrs\n * @return {string}\n */\nvar objectToAttrsString = function (attrs) {\n  return Object.keys(attrs).map(function (attr) {\n    var value = attrs[attr].toString().replace(/\"/g, '&quot;');\n    return (attr + \"=\\\"\" + value + \"\\\"\");\n  }).join(' ');\n};\n\nvar svg = namespaces_1.svg;\nvar xlink = namespaces_1.xlink;\n\nvar defaultAttrs = {};\ndefaultAttrs[svg.name] = svg.uri;\ndefaultAttrs[xlink.name] = xlink.uri;\n\n/**\n * @param {string} [content]\n * @param {Object} [attributes]\n * @return {string}\n */\nvar wrapInSvgString = function (content, attributes) {\n  if ( content === void 0 ) content = '';\n\n  var attrs = deepmerge(defaultAttrs, attributes || {});\n  var attrsRendered = objectToAttrsString(attrs);\n  return (\"<svg \" + attrsRendered + \">\" + content + \"</svg>\");\n};\n\nvar svg$1 = namespaces_1.svg;\nvar xlink$1 = namespaces_1.xlink;\n\nvar defaultConfig = {\n  attrs: ( obj = {\n    style: ['position: absolute', 'width: 0', 'height: 0'].join('; '),\n    'aria-hidden': 'true'\n  }, obj[svg$1.name] = svg$1.uri, obj[xlink$1.name] = xlink$1.uri, obj )\n};\nvar obj;\n\nvar Sprite = function Sprite(config) {\n  this.config = deepmerge(defaultConfig, config || {});\n  this.symbols = [];\n};\n\n/**\n * Add new symbol. If symbol with the same id exists it will be replaced.\n * @param {SpriteSymbol} symbol\n * @return {boolean} `true` - symbol was added, `false` - replaced\n */\nSprite.prototype.add = function add (symbol) {\n  var ref = this;\n    var symbols = ref.symbols;\n  var existing = this.find(symbol.id);\n\n  if (existing) {\n    symbols[symbols.indexOf(existing)] = symbol;\n    return false;\n  }\n\n  symbols.push(symbol);\n  return true;\n};\n\n/**\n * Remove symbol & destroy it\n * @param {string} id\n * @return {boolean} `true` - symbol was found & successfully destroyed, `false` - otherwise\n */\nSprite.prototype.remove = function remove (id) {\n  var ref = this;\n    var symbols = ref.symbols;\n  var symbol = this.find(id);\n\n  if (symbol) {\n    symbols.splice(symbols.indexOf(symbol), 1);\n    symbol.destroy();\n    return true;\n  }\n\n  return false;\n};\n\n/**\n * @param {string} id\n * @return {SpriteSymbol|null}\n */\nSprite.prototype.find = function find (id) {\n  return this.symbols.filter(function (s) { return s.id === id; })[0] || null;\n};\n\n/**\n * @param {string} id\n * @return {boolean}\n */\nSprite.prototype.has = function has (id) {\n  return this.find(id) !== null;\n};\n\n/**\n * @return {string}\n */\nSprite.prototype.stringify = function stringify () {\n  var ref = this.config;\n    var attrs = ref.attrs;\n  var stringifiedSymbols = this.symbols.map(function (s) { return s.stringify(); }).join('');\n  return wrapInSvgString(stringifiedSymbols, attrs);\n};\n\n/**\n * @return {string}\n */\nSprite.prototype.toString = function toString () {\n  return this.stringify();\n};\n\nSprite.prototype.destroy = function destroy () {\n  this.symbols.forEach(function (s) { return s.destroy(); });\n};\n\nvar SpriteSymbol = function SpriteSymbol(ref) {\n  var id = ref.id;\n  var viewBox = ref.viewBox;\n  var content = ref.content;\n\n  this.id = id;\n  this.viewBox = viewBox;\n  this.content = content;\n};\n\n/**\n * @return {string}\n */\nSpriteSymbol.prototype.stringify = function stringify () {\n  return this.content;\n};\n\n/**\n * @return {string}\n */\nSpriteSymbol.prototype.toString = function toString () {\n  return this.stringify();\n};\n\nSpriteSymbol.prototype.destroy = function destroy () {\n    var this$1 = this;\n\n  ['id', 'viewBox', 'content'].forEach(function (prop) { return delete this$1[prop]; });\n};\n\n/**\n * @param {string} content\n * @return {Element}\n */\nvar parse = function (content) {\n  var hasImportNode = !!document.importNode;\n  var doc = new DOMParser().parseFromString(content, 'image/svg+xml').documentElement;\n\n  /**\n   * Fix for browser which are throwing WrongDocumentError\n   * if you insert an element which is not part of the document\n   * @see http://stackoverflow.com/a/7986519/4624403\n   */\n  if (hasImportNode) {\n    return document.importNode(doc, true);\n  }\n\n  return doc;\n};\n\nvar BrowserSpriteSymbol = (function (SpriteSymbol$$1) {\n  function BrowserSpriteSymbol () {\n    SpriteSymbol$$1.apply(this, arguments);\n  }\n\n  if ( SpriteSymbol$$1 ) BrowserSpriteSymbol.__proto__ = SpriteSymbol$$1;\n  BrowserSpriteSymbol.prototype = Object.create( SpriteSymbol$$1 && SpriteSymbol$$1.prototype );\n  BrowserSpriteSymbol.prototype.constructor = BrowserSpriteSymbol;\n\n  var prototypeAccessors = { isMounted: {} };\n\n  prototypeAccessors.isMounted.get = function () {\n    return !!this.node;\n  };\n\n  /**\n   * @param {Element} node\n   * @return {BrowserSpriteSymbol}\n   */\n  BrowserSpriteSymbol.createFromExistingNode = function createFromExistingNode (node) {\n    return new BrowserSpriteSymbol({\n      id: node.getAttribute('id'),\n      viewBox: node.getAttribute('viewBox'),\n      content: node.outerHTML\n    });\n  };\n\n  BrowserSpriteSymbol.prototype.destroy = function destroy () {\n    if (this.isMounted) {\n      this.unmount();\n    }\n    SpriteSymbol$$1.prototype.destroy.call(this);\n  };\n\n  /**\n   * @param {Element|string} target\n   * @return {Element}\n   */\n  BrowserSpriteSymbol.prototype.mount = function mount (target) {\n    if (this.isMounted) {\n      return this.node;\n    }\n\n    var mountTarget = typeof target === 'string' ? document.querySelector(target) : target;\n    var node = this.render();\n    this.node = node;\n\n    mountTarget.appendChild(node);\n\n    return node;\n  };\n\n  /**\n   * @return {Element}\n   */\n  BrowserSpriteSymbol.prototype.render = function render () {\n    var content = this.stringify();\n    return parse(wrapInSvgString(content)).childNodes[0];\n  };\n\n  BrowserSpriteSymbol.prototype.unmount = function unmount () {\n    this.node.parentNode.removeChild(this.node);\n  };\n\n  Object.defineProperties( BrowserSpriteSymbol.prototype, prototypeAccessors );\n\n  return BrowserSpriteSymbol;\n}(SpriteSymbol));\n\nvar defaultConfig$1 = {\n  /**\n   * Should following options be automatically configured:\n   * - `syncUrlsWithBaseTag`\n   * - `locationChangeAngularEmitter`\n   * - `moveGradientsOutsideSymbol`\n   * @type {boolean}\n   */\n  autoConfigure: true,\n\n  /**\n   * Default mounting selector\n   * @type {string}\n   */\n  mountTo: 'body',\n\n  /**\n   * Fix disappearing SVG elements when <base href> exists.\n   * Executes when sprite mounted.\n   * @see http://stackoverflow.com/a/18265336/796152\n   * @see https://github.com/everdimension/angular-svg-base-fix\n   * @see https://github.com/angular/angular.js/issues/8934#issuecomment-56568466\n   * @type {boolean}\n   */\n  syncUrlsWithBaseTag: false,\n\n  /**\n   * Should sprite listen custom location change event\n   * @type {boolean}\n   */\n  listenLocationChangeEvent: true,\n\n  /**\n   * Custom window event name which should be emitted to update sprite urls\n   * @type {string}\n   */\n  locationChangeEvent: 'locationChange',\n\n  /**\n   * Emit location change event in Angular automatically\n   * @type {boolean}\n   */\n  locationChangeAngularEmitter: false,\n\n  /**\n   * Selector to find symbols usages when updating sprite urls\n   * @type {string}\n   */\n  usagesToUpdate: 'use[*|href]',\n\n  /**\n   * Fix Firefox bug when gradients and patterns don't work if they are within a symbol.\n   * Executes when sprite is rendered, but not mounted.\n   * @see https://bugzilla.mozilla.org/show_bug.cgi?id=306674\n   * @see https://bugzilla.mozilla.org/show_bug.cgi?id=353575\n   * @see https://bugzilla.mozilla.org/show_bug.cgi?id=1235364\n   * @type {boolean}\n   */\n  moveGradientsOutsideSymbol: false\n};\n\n/**\n * @param {*} arrayLike\n * @return {Array}\n */\nvar arrayFrom = function (arrayLike) {\n  return Array.prototype.slice.call(arrayLike, 0);\n};\n\nvar browser = {\n  isChrome: function () { return /chrome/i.test(navigator.userAgent); },\n  isFirefox: function () { return /firefox/i.test(navigator.userAgent); },\n\n  // https://msdn.microsoft.com/en-us/library/ms537503(v=vs.85).aspx\n  isIE: function () { return /msie/i.test(navigator.userAgent) || /trident/i.test(navigator.userAgent); },\n  isEdge: function () { return /edge/i.test(navigator.userAgent); }\n};\n\n/**\n * @param {string} name\n * @param {*} data\n */\nvar dispatchEvent = function (name, data) {\n  var event = document.createEvent('CustomEvent');\n  event.initCustomEvent(name, false, false, data);\n  window.dispatchEvent(event);\n};\n\n/**\n * IE doesn't evaluate <style> tags in SVGs that are dynamically added to the page.\n * This trick will trigger IE to read and use any existing SVG <style> tags.\n * @see https://github.com/iconic/SVGInjector/issues/23\n * @see https://developer.microsoft.com/en-us/microsoft-edge/platform/issues/10898469/\n *\n * @param {Element} node DOM Element to search <style> tags in\n * @return {Array<HTMLStyleElement>}\n */\nvar evalStylesIEWorkaround = function (node) {\n  var updatedNodes = [];\n\n  arrayFrom(node.querySelectorAll('style'))\n    .forEach(function (style) {\n      style.textContent += '';\n      updatedNodes.push(style);\n    });\n\n  return updatedNodes;\n};\n\n/**\n * @param {string} [url] If not provided - current URL will be used\n * @return {string}\n */\nvar getUrlWithoutFragment = function (url) {\n  return (url || window.location.href).split('#')[0];\n};\n\n/* global angular */\n/**\n * @param {string} eventName\n */\nvar locationChangeAngularEmitter = function (eventName) {\n  angular.module('ng').run(['$rootScope', function ($rootScope) {\n    $rootScope.$on('$locationChangeSuccess', function (e, newUrl, oldUrl) {\n      dispatchEvent(eventName, { oldUrl: oldUrl, newUrl: newUrl });\n    });\n  }]);\n};\n\nvar defaultSelector = 'linearGradient, radialGradient, pattern, mask, clipPath';\n\n/**\n * @param {Element} svg\n * @param {string} [selector]\n * @return {Element}\n */\nvar moveGradientsOutsideSymbol = function (svg, selector) {\n  if ( selector === void 0 ) selector = defaultSelector;\n\n  arrayFrom(svg.querySelectorAll('symbol')).forEach(function (symbol) {\n    arrayFrom(symbol.querySelectorAll(selector)).forEach(function (node) {\n      symbol.parentNode.insertBefore(node, symbol);\n    });\n  });\n  return svg;\n};\n\n/**\n * @param {NodeList} nodes\n * @param {Function} [matcher]\n * @return {Attr[]}\n */\nfunction selectAttributes(nodes, matcher) {\n  var attrs = arrayFrom(nodes).reduce(function (acc, node) {\n    if (!node.attributes) {\n      return acc;\n    }\n\n    var arrayfied = arrayFrom(node.attributes);\n    var matched = matcher ? arrayfied.filter(matcher) : arrayfied;\n    return acc.concat(matched);\n  }, []);\n\n  return attrs;\n}\n\n/**\n * @param {NodeList|Node} nodes\n * @param {boolean} [clone=true]\n * @return {string}\n */\n\nvar xLinkNS = namespaces_1.xlink.uri;\nvar xLinkAttrName = 'xlink:href';\n\n// eslint-disable-next-line no-useless-escape\nvar specialUrlCharsPattern = /[{}|\\\\\\^\\[\\]`\"<>]/g;\n\nfunction encoder(url) {\n  return url.replace(specialUrlCharsPattern, function (match) {\n    return (\"%\" + (match[0].charCodeAt(0).toString(16).toUpperCase()));\n  });\n}\n\nfunction escapeRegExp(str) {\n  return str.replace(/[.*+?^${}()|[\\]\\\\]/g, \"\\\\$&\"); // $& means the whole matched string\n}\n\n/**\n * @param {NodeList} nodes\n * @param {string} startsWith\n * @param {string} replaceWith\n * @return {NodeList}\n */\nfunction updateReferences(nodes, startsWith, replaceWith) {\n  arrayFrom(nodes).forEach(function (node) {\n    var href = node.getAttribute(xLinkAttrName);\n    if (href && href.indexOf(startsWith) === 0) {\n      var newUrl = href.replace(startsWith, replaceWith);\n      node.setAttributeNS(xLinkNS, xLinkAttrName, newUrl);\n    }\n  });\n\n  return nodes;\n}\n\n/**\n * List of SVG attributes to update url() target in them\n */\nvar attList = [\n  'clipPath',\n  'colorProfile',\n  'src',\n  'cursor',\n  'fill',\n  'filter',\n  'marker',\n  'markerStart',\n  'markerMid',\n  'markerEnd',\n  'mask',\n  'stroke',\n  'style'\n];\n\nvar attSelector = attList.map(function (attr) { return (\"[\" + attr + \"]\"); }).join(',');\n\n/**\n * Update URLs in svg image (like `fill=\"url(...)\"`) and update referencing elements\n * @param {Element} svg\n * @param {NodeList} references\n * @param {string|RegExp} startsWith\n * @param {string} replaceWith\n * @return {void}\n *\n * @example\n * const sprite = document.querySelector('svg.sprite');\n * const usages = document.querySelectorAll('use');\n * updateUrls(sprite, usages, '#', 'prefix#');\n */\nvar updateUrls = function (svg, references, startsWith, replaceWith) {\n  var startsWithEncoded = encoder(startsWith);\n  var replaceWithEncoded = encoder(replaceWith);\n\n  var nodes = svg.querySelectorAll(attSelector);\n  var attrs = selectAttributes(nodes, function (ref) {\n    var localName = ref.localName;\n    var value = ref.value;\n\n    return attList.indexOf(localName) !== -1 && value.indexOf((\"url(\" + startsWithEncoded)) !== -1;\n  });\n\n  attrs.forEach(function (attr) { return attr.value = attr.value.replace(new RegExp(escapeRegExp(startsWithEncoded), 'g'), replaceWithEncoded); });\n  updateReferences(references, startsWithEncoded, replaceWithEncoded);\n};\n\n/**\n * Internal emitter events\n * @enum\n * @private\n */\nvar Events = {\n  MOUNT: 'mount',\n  SYMBOL_MOUNT: 'symbol_mount'\n};\n\nvar BrowserSprite = (function (Sprite$$1) {\n  function BrowserSprite(cfg) {\n    var this$1 = this;\n    if ( cfg === void 0 ) cfg = {};\n\n    Sprite$$1.call(this, deepmerge(defaultConfig$1, cfg));\n\n    var emitter = mitt();\n    this._emitter = emitter;\n    this.node = null;\n\n    var ref = this;\n    var config = ref.config;\n\n    if (config.autoConfigure) {\n      this._autoConfigure(cfg);\n    }\n\n    if (config.syncUrlsWithBaseTag) {\n      var baseUrl = document.getElementsByTagName('base')[0].getAttribute('href');\n      emitter.on(Events.MOUNT, function () { return this$1.updateUrls('#', baseUrl); });\n    }\n\n    var handleLocationChange = this._handleLocationChange.bind(this);\n    this._handleLocationChange = handleLocationChange;\n\n    // Provide way to update sprite urls externally via dispatching custom window event\n    if (config.listenLocationChangeEvent) {\n      window.addEventListener(config.locationChangeEvent, handleLocationChange);\n    }\n\n    // Emit location change event in Angular automatically\n    if (config.locationChangeAngularEmitter) {\n      locationChangeAngularEmitter(config.locationChangeEvent);\n    }\n\n    // After sprite mounted\n    emitter.on(Events.MOUNT, function (spriteNode) {\n      if (config.moveGradientsOutsideSymbol) {\n        moveGradientsOutsideSymbol(spriteNode);\n      }\n    });\n\n    // After symbol mounted into sprite\n    emitter.on(Events.SYMBOL_MOUNT, function (symbolNode) {\n      if (config.moveGradientsOutsideSymbol) {\n        moveGradientsOutsideSymbol(symbolNode.parentNode);\n      }\n\n      if (browser.isIE() || browser.isEdge()) {\n        evalStylesIEWorkaround(symbolNode);\n      }\n    });\n  }\n\n  if ( Sprite$$1 ) BrowserSprite.__proto__ = Sprite$$1;\n  BrowserSprite.prototype = Object.create( Sprite$$1 && Sprite$$1.prototype );\n  BrowserSprite.prototype.constructor = BrowserSprite;\n\n  var prototypeAccessors = { isMounted: {} };\n\n  /**\n   * @return {boolean}\n   */\n  prototypeAccessors.isMounted.get = function () {\n    return !!this.node;\n  };\n\n  /**\n   * Automatically configure following options\n   * - `syncUrlsWithBaseTag`\n   * - `locationChangeAngularEmitter`\n   * - `moveGradientsOutsideSymbol`\n   * @param {Object} cfg\n   * @private\n   */\n  BrowserSprite.prototype._autoConfigure = function _autoConfigure (cfg) {\n    var ref = this;\n    var config = ref.config;\n\n    if (typeof cfg.syncUrlsWithBaseTag === 'undefined') {\n      config.syncUrlsWithBaseTag = typeof document.getElementsByTagName('base')[0] !== 'undefined';\n    }\n\n    if (typeof cfg.locationChangeAngularEmitter === 'undefined') {\n        config.locationChangeAngularEmitter = typeof window.angular !== 'undefined';\n    }\n\n    if (typeof cfg.moveGradientsOutsideSymbol === 'undefined') {\n      config.moveGradientsOutsideSymbol = browser.isFirefox();\n    }\n  };\n\n  /**\n   * @param {Event} event\n   * @param {Object} event.detail\n   * @param {string} event.detail.oldUrl\n   * @param {string} event.detail.newUrl\n   * @private\n   */\n  BrowserSprite.prototype._handleLocationChange = function _handleLocationChange (event) {\n    var ref = event.detail;\n    var oldUrl = ref.oldUrl;\n    var newUrl = ref.newUrl;\n    this.updateUrls(oldUrl, newUrl);\n  };\n\n  /**\n   * Add new symbol. If symbol with the same id exists it will be replaced.\n   * If sprite already mounted - `symbol.mount(sprite.node)` will be called.\n   * @fires Events#SYMBOL_MOUNT\n   * @param {BrowserSpriteSymbol} symbol\n   * @return {boolean} `true` - symbol was added, `false` - replaced\n   */\n  BrowserSprite.prototype.add = function add (symbol) {\n    var sprite = this;\n    var isNewSymbol = Sprite$$1.prototype.add.call(this, symbol);\n\n    if (this.isMounted && isNewSymbol) {\n      symbol.mount(sprite.node);\n      this._emitter.emit(Events.SYMBOL_MOUNT, symbol.node);\n    }\n\n    return isNewSymbol;\n  };\n\n  /**\n   * Attach to existing DOM node\n   * @param {string|Element} target\n   * @return {Element|null} attached DOM Element. null if node to attach not found.\n   */\n  BrowserSprite.prototype.attach = function attach (target) {\n    var this$1 = this;\n\n    var sprite = this;\n\n    if (sprite.isMounted) {\n      return sprite.node;\n    }\n\n    /** @type Element */\n    var node = typeof target === 'string' ? document.querySelector(target) : target;\n    sprite.node = node;\n\n    // Already added symbols needs to be mounted\n    this.symbols.forEach(function (symbol) {\n      symbol.mount(sprite.node);\n      this$1._emitter.emit(Events.SYMBOL_MOUNT, symbol.node);\n    });\n\n    // Create symbols from existing DOM nodes, add and mount them\n    arrayFrom(node.querySelectorAll('symbol'))\n      .forEach(function (symbolNode) {\n        var symbol = BrowserSpriteSymbol.createFromExistingNode(symbolNode);\n        symbol.node = symbolNode; // hack to prevent symbol mounting to sprite when adding\n        sprite.add(symbol);\n      });\n\n    this._emitter.emit(Events.MOUNT, node);\n\n    return node;\n  };\n\n  BrowserSprite.prototype.destroy = function destroy () {\n    var ref = this;\n    var config = ref.config;\n    var symbols = ref.symbols;\n    var _emitter = ref._emitter;\n\n    symbols.forEach(function (s) { return s.destroy(); });\n\n    _emitter.off('*');\n    window.removeEventListener(config.locationChangeEvent, this._handleLocationChange);\n\n    if (this.isMounted) {\n      this.unmount();\n    }\n  };\n\n  /**\n   * @fires Events#MOUNT\n   * @param {string|Element} [target]\n   * @param {boolean} [prepend=false]\n   * @return {Element|null} rendered sprite node. null if mount node not found.\n   */\n  BrowserSprite.prototype.mount = function mount (target, prepend) {\n    if ( target === void 0 ) target = this.config.mountTo;\n    if ( prepend === void 0 ) prepend = false;\n\n    var sprite = this;\n\n    if (sprite.isMounted) {\n      return sprite.node;\n    }\n\n    var mountNode = typeof target === 'string' ? document.querySelector(target) : target;\n    var node = sprite.render();\n    this.node = node;\n\n    if (prepend && mountNode.childNodes[0]) {\n      mountNode.insertBefore(node, mountNode.childNodes[0]);\n    } else {\n      mountNode.appendChild(node);\n    }\n\n    this._emitter.emit(Events.MOUNT, node);\n\n    return node;\n  };\n\n  /**\n   * @return {Element}\n   */\n  BrowserSprite.prototype.render = function render () {\n    return parse(this.stringify());\n  };\n\n  /**\n   * Detach sprite from the DOM\n   */\n  BrowserSprite.prototype.unmount = function unmount () {\n    this.node.parentNode.removeChild(this.node);\n  };\n\n  /**\n   * Update URLs in sprite and usage elements\n   * @param {string} oldUrl\n   * @param {string} newUrl\n   * @return {boolean} `true` - URLs was updated, `false` - sprite is not mounted\n   */\n  BrowserSprite.prototype.updateUrls = function updateUrls$1 (oldUrl, newUrl) {\n    if (!this.isMounted) {\n      return false;\n    }\n\n    var usages = document.querySelectorAll(this.config.usagesToUpdate);\n\n    updateUrls(\n      this.node,\n      usages,\n      ((getUrlWithoutFragment(oldUrl)) + \"#\"),\n      ((getUrlWithoutFragment(newUrl)) + \"#\")\n    );\n\n    return true;\n  };\n\n  Object.defineProperties( BrowserSprite.prototype, prototypeAccessors );\n\n  return BrowserSprite;\n}(Sprite));\n\nvar ready$1 = createCommonjsModule(function (module) {\n/*!\n  * domready (c) Dustin Diaz 2014 - License MIT\n  */\n!function (name, definition) {\n\n  { module.exports = definition(); }\n\n}('domready', function () {\n\n  var fns = [], listener\n    , doc = document\n    , hack = doc.documentElement.doScroll\n    , domContentLoaded = 'DOMContentLoaded'\n    , loaded = (hack ? /^loaded|^c/ : /^loaded|^i|^c/).test(doc.readyState);\n\n\n  if (!loaded)\n  { doc.addEventListener(domContentLoaded, listener = function () {\n    doc.removeEventListener(domContentLoaded, listener);\n    loaded = 1;\n    while (listener = fns.shift()) { listener(); }\n  }); }\n\n  return function (fn) {\n    loaded ? setTimeout(fn, 0) : fns.push(fn);\n  }\n\n});\n});\n\nvar spriteNodeId = '__SVG_SPRITE_NODE__';\nvar spriteGlobalVarName = '__SVG_SPRITE__';\nvar isSpriteExists = !!window[spriteGlobalVarName];\n\n// eslint-disable-next-line import/no-mutable-exports\nvar sprite;\n\nif (isSpriteExists) {\n  sprite = window[spriteGlobalVarName];\n} else {\n  sprite = new BrowserSprite({\n    attrs: {\n      id: spriteNodeId,\n      'aria-hidden': 'true'\n    }\n  });\n  window[spriteGlobalVarName] = sprite;\n}\n\nvar loadSprite = function () {\n  /**\n   * Check for page already contains sprite node\n   * If found - attach to and reuse it's content\n   * If not - render and mount the new sprite\n   */\n  var existing = document.getElementById(spriteNodeId);\n\n  if (existing) {\n    sprite.attach(existing);\n  } else {\n    sprite.mount(document.body, true);\n  }\n};\n\nif (document.body) {\n  loadSprite();\n} else {\n  ready$1(loadSprite);\n}\n\nvar sprite$1 = sprite;\n\nreturn sprite$1;\n\n})));\n","module.exports = toArray\n\nfunction toArray(list, index) {\n    var array = []\n\n    index = index || 0\n\n    for (var i = index || 0; i < list.length; i++) {\n        array[i - index] = list[i]\n    }\n\n    return array\n}\n","'use strict';\n\nvar alphabet = '0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_'.split('')\n  , length = 64\n  , map = {}\n  , seed = 0\n  , i = 0\n  , prev;\n\n/**\n * Return a string representing the specified number.\n *\n * @param {Number} num The number to convert.\n * @returns {String} The string representation of the number.\n * @api public\n */\nfunction encode(num) {\n  var encoded = '';\n\n  do {\n    encoded = alphabet[num % length] + encoded;\n    num = Math.floor(num / length);\n  } while (num > 0);\n\n  return encoded;\n}\n\n/**\n * Return the integer value specified by the given string.\n *\n * @param {String} str The string to convert.\n * @returns {Number} The integer value represented by the string.\n * @api public\n */\nfunction decode(str) {\n  var decoded = 0;\n\n  for (i = 0; i < str.length; i++) {\n    decoded = decoded * length + map[str.charAt(i)];\n  }\n\n  return decoded;\n}\n\n/**\n * Yeast: A tiny growing id generator.\n *\n * @returns {String} A unique id.\n * @api public\n */\nfunction yeast() {\n  var now = encode(+new Date());\n\n  if (now !== prev) return seed = 0, prev = now;\n  return now +'.'+ encode(seed++);\n}\n\n//\n// Map each character to its index.\n//\nfor (; i < length; i++) map[alphabet[i]] = i;\n\n//\n// Expose the `yeast`, `encode` and `decode` functions.\n//\nyeast.encode = encode;\nyeast.decode = decode;\nmodule.exports = yeast;\n","// extracted by mini-css-extract-plugin\nexport default {};","import SpriteSymbol from \"../../../node_modules/svg-baker-runtime/browser-symbol.js\";\nimport sprite from \"../../../node_modules/svg-sprite-loader/runtime/browser-sprite.build.js\";\nvar symbol = new SpriteSymbol({\n  \"id\": \"monitor\",\n  \"use\": \"monitor-usage\",\n  \"viewBox\": \"0 0 32 32\",\n  \"content\": \"<symbol xmlns=\\\"http://www.w3.org/2000/svg\\\" xmlns:xlink=\\\"http://www.w3.org/1999/xlink\\\" viewBox=\\\"0 0 32 32\\\" id=\\\"monitor\\\"><g><g transform=\\\"translate(1.000000, 1.000000)\\\"><path class=\\\"st0\\\" fill=\\\"currentColor\\\" d=\\\"M25.1,20.8c-0.5-0.2-0.8-0.6-0.9-1.1v-4.7c0-4.4-4.2-7.3-6-8.3c-0.1-0.5-0.4-1.4-1-2\\n\\t\\t\\tc-0.6-0.6-1.4-0.9-2.3-0.8h-0.1c-0.8,0-1.6,0.3-2.3,0.8c-0.7,0.6-0.9,1.5-1,2c-1.8,0.9-6,3.8-6,8.3v4.6c0,0.5-0.4,0.9-0.9,1.1\\n\\t\\t\\tc-1.6,0.7-1.8,2.1-1.4,3.1c0.2,0.5,0.6,1,3.6,1h2.5c0.2,2.6,2.5,4.6,5.4,4.6s5.3-2.1,5.4-4.6h2.6c3,0,3.4-0.5,3.6-1\\n\\t\\t\\tC26.9,22.9,26.7,21.5,25.1,20.8L25.1,20.8z M14.9,27.8c-1.9,0-3.4-1.3-3.6-2.9h7.1C18.3,26.5,16.8,27.8,14.9,27.8L14.9,27.8z\\n\\t\\t\\t M22.9,23.1H7c-0.6,0-1.3,0-1.9-0.1c0-0.3,0.1-0.4,0.5-0.6c1.1-0.5,1.9-1.5,1.9-2.7v-4.7c0-3.9,4.5-6.5,5.3-6.9L13.4,8V7.4\\n\\t\\t\\tc0-0.2,0.1-1.7,1.5-1.7H15c1.4,0,1.5,1.5,1.5,1.7V8L17,8.2c0.8,0.3,5.3,2.9,5.3,6.9v4.7c0,1.2,0.8,2.2,1.9,2.7\\n\\t\\t\\tc0.4,0.2,0.5,0.3,0.5,0.6C24.2,23.1,23.5,23.1,22.9,23.1L22.9,23.1z\\\" /><path class=\\\"st0\\\" d=\\\"M23.9,0.2c0.4,0.3,0.6,0.9,0.3,1.3l-2.1,3.2c-0.3,0.4-0.9,0.6-1.3,0.3s-0.6-0.9-0.3-1.3l2.1-3.2\\n\\t\\t\\tC22.8,0,23.4-0.1,23.9,0.2z M29.9,7.1c0.2,0.5,0,1.1-0.5,1.3L25.9,10c-0.5,0.2-1,0-1.3-0.5c-0.2-0.5,0-1,0.5-1.3l3.5-1.6\\n\\t\\t\\tC29.1,6.4,29.7,6.6,29.9,7.1L29.9,7.1z M0.1,7.1c0.1-0.2,0.3-0.4,0.5-0.5c0.2-0.1,0.5-0.1,0.7,0l3.5,1.6c0.3,0.1,0.5,0.5,0.5,0.8\\n\\t\\t\\tc0,0.3-0.1,0.7-0.4,0.9c-0.3,0.2-0.6,0.2-1,0.1L0.6,8.4C0.1,8.2-0.1,7.6,0.1,7.1L0.1,7.1z M6.1,0.2C6.3,0,6.6,0,6.8,0\\n\\t\\t\\ts0.5,0.2,0.6,0.4l2.1,3.2c0.2,0.3,0.2,0.7,0.1,1S9.1,5.2,8.8,5.2C8.4,5.2,8.1,5,7.9,4.7L5.8,1.5C5.7,1.3,5.6,1,5.7,0.8\\n\\t\\t\\tC5.8,0.5,5.9,0.3,6.1,0.2L6.1,0.2L6.1,0.2z\\\" /></g></g></symbol>\"\n});\nvar result = sprite.add(symbol);\nexport default symbol","import SpriteSymbol from \"../../../node_modules/svg-baker-runtime/browser-symbol.js\";\nimport sprite from \"../../../node_modules/svg-sprite-loader/runtime/browser-sprite.build.js\";\nvar symbol = new SpriteSymbol({\n  \"id\": \"tag\",\n  \"use\": \"tag-usage\",\n  \"viewBox\": \"0 0 24 24\",\n  \"content\": \"<symbol viewBox=\\\"0 0 24 24\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" xmlns:xlink=\\\"http://www.w3.org/1999/xlink\\\" id=\\\"tag\\\"><!--Generated by IJSVG (https://github.com/iconjar/IJSVG)--><path d=\\\"M13.0123,19.3233l7.07107,-7.07107l-9.40841,-9.40842l-6.84754,-0.297719c-0.0144722,-0.00062923 -0.028965,-0.00062923 -0.0434372,0c-0.275882,0.0119949 -0.489804,0.245365 -0.477809,0.521247l0.297719,6.84754l9.40842,9.40842Zm-10.7052,-16.2125c-0.0359846,-0.827645 0.605783,-1.52776 1.43343,-1.56374c0.0434167,-0.00188768 0.086895,-0.00188768 0.130312,0l7.23616,0.314616l10.3906,10.3906l-8.48528,8.48528l-10.3906,-10.3906l-0.314616,-7.23616Zm5.75544,4.1917c-0.585786,0.585786 -1.53553,0.585786 -2.12132,0c-0.585786,-0.585786 -0.585786,-1.53553 0,-2.12132c0.585786,-0.585786 1.53553,-0.585786 2.12132,0c0.585786,0.585786 0.585786,1.53553 0,2.12132Zm-0.707107,-0.707107c0.195262,-0.195262 0.195262,-0.511845 0,-0.707107c-0.195262,-0.195262 -0.511845,-0.195262 -0.707107,0c-0.195262,0.195262 -0.195262,0.511845 0,0.707107c0.195262,0.195262 0.511845,0.195262 0.707107,0Z\\\" fill=\\\"#979797\\\" stroke=\\\"none\\\" /></symbol>\"\n});\nvar result = sprite.add(symbol);\nexport default symbol","var map = {\n\t\"./monitor.svg\": 43669,\n\t\"./tag.svg\": 77461\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 49566;"],"names":["SystemNotification","_React$Component","_inherits","_super","_createSuper","props","_this","_classCallCheck","call","close","setState","isClosed","navigator","cookieEnabled","date","Date","cookies","document","cookie","split","infoIDExist","newInfoID","curNoteID","setTime","getTime","toGMTString","siteRoot","i","len","length","state","_createClass","key","value","curNoteMsg","this","_jsxs","id","className","children","_jsx","dangerouslySetInnerHTML","__html","title","gettext","onClick","React","Group","object","name","owner","admins","avatar_url","created_at","parent_group_id","wiki_enabled","repos","group_quota","group_quota_usage","MainSideNav","_this2","grpsExtend","groupsExtended","loadGroups","shExtend","sharedExtended","_assertThisInitialized","seafileAPI","listGroups","then","res","groupList","data","map","item","groupsHeight","listHeight","groupItems","sort","a","b","toLowerCase","catch","error","errMessage","Utils","getErrorMsg","toaster","danger","tabItemClick","e","param","window","uploader","isUploadProgressDialogShow","totalProgress","confirm","preventDefault","onDTableClick","url","dtableWebServer","open","getActiveClass","tab","currentTab","closeSideBar","adminHeight","_this3","style","height","concat","Link","to","_this4","linksNavItem","canGenerateShareLink","canGenerateUploadLink","canAddRepo","customNavItems","idx","href","link","desc","icon","_this5","showActivity","isDocs","isPro","isDBSqlite3","canViewOrg","renderSharedGroups","enableOCM","enableOCMViaWebdav","canInvitePeople","renderSharedAdmin","renderCustomNavItems","AboutDialog","_len","arguments","args","Array","_key","apply","renderExternalAboutLinks","additionalAboutDialogLinks","Object","keys","index","lang","toggleDialog","onCloseAboutDialog","aboutDialogCustomHtml","Modal","isOpen","toggle","ModalBody","type","src","mediaUrl","logoPath","logoHeight","width","logoWidth","siteTitle","alt","seafileVersion","getFullYear","target","rel","SideNavFooter","onAboutDialogToggle","isAboutDialogShow","renderExternalAppLinks","additionalAppBottomLinks","sideNavFooterCustomHtml","Fragment","enableTC","ModalPortal","SidePanel","isSidePanelClosed","Logo","onCloseSidePanel","draftCounts","MainPanel","_Component","Component","DraftsView","moment","DraftListItem","onMouseEnter","isItemFreezed","isMenuIconShow","highlight","onMouseLeave","onDropdownToggleClick","toggleOperationMenu","stopPropagation","isItemMenuShow","onFreezedItem","onUnfreezedItem","onDeleteHandler","draft","onPublishHandler","repoID","origin_repo_id","filePath","draft_file_path","fileName","getFileName","draftUrl","libraryUrl","encodeURIComponent","repo_name","localTime","updated_at","toDate","fromNow","iconUrl","getFileIconUrl","Dropdown","DropdownToggle","tag","DropdownMenu","DropdownItem","status","DraftListView","drafts","draftList","DraftContent","draft_name","editUtilities","deleteDraft","updateDraftsList","msg_s","replace","success","publishDraft","getDrafts","isLoadingDraft","Loading","EmptyTip","Acticity","json","repo_id","obj_type","commit_id","path","author_email","author_name","author_contact_email","time","op_type","createdFilesCount","createdFilesList","days","old_repo_name","includes","old_path","old_name","endsWith","draft_id","ListCreatedFileDialog","activity","toggleCancel","ModalHeader","Table","fileURL","encodePath","serviceURL","fileLink","ModalFooter","Button","color","bind","app","config","ActivityItem","onListCreatedFilesToggle","isListCreatedFiles","op","details","isDesktop","_this$props","items","moreDetails","userProfileURL","libURL","libLink","smallLibLink","fileCount","firstLine","isDraft","filePathLink","dirURL","dirLink","dirPathLink","isShowDate","lastEventTime","isSame","colSpan","format","datetime","is","FileActivitiesContent","isLoadingMore","desktopThead","mobileThead","UserSelector","handleOutsideClick","isPopoverOpen","userSelector","contains","togglePopover","selectedUsers","availableUsers","filter","isSelected","setTargetUsers","onToggleClick","onQueryChange","query","toggleSelectItem","targetItem","toggleSelectUser","addEventListener","removeEventListener","_this$state","currentSelectedUsers","filteredAvailableUsers","trim","email","indexOf","join","ref","Input","placeholder","onChange","FilesActivities","mergePublishEvents","events","forEach","curPathList","push","oldPathList","actuallyEvents","splice","mergeFileCreateEvents","multiFilesActivity","isFulfilCondition","Activity","filterEvents","onlyMine","targetUsers","username","allItems","hasMore","getMore","user","handleScroll","event","clientHeight","scrollHeight","scrollTop","errorMsg","isFirstLoading","currentPage","avatarSize","availableUserEmails","Set","listActivities","has","add","_this$state2","filteredEvents","_toConsumableArray","_this$state3","onScroll","MyFilesActivities","Content","_this$props$data","loading","emptyTip","TableBody","_Component2","_super2","getThumbnails","imageCheck","obj_name","enableVideoThumbnail","videoCheck","repo_encrypted","getThumbnail","curItem","createThumbnail","encoded_thumbnail_src","listItems","item_icon_url","getDefaultLibIconUrl","is_dir","getFolderIconUrl","encoded_path","thumbnail_url","dirent_view_url","mtime_relative","mtime","Item","_Component3","_super3","toggleOpMenu","isOpMenuOpen","handleMouseOver","showOpIcon","handleMouseOut","unstar","unstarItem","unstarred","visitItem","navigate","opClasses","linkUrl","desktopItem","onMouseOver","onMouseOut","onFocus","role","mobileItem","_Component4","Starred","_super4","listStarredItems","starred_item_list","ConfirmUnlinkDevice","executeOperation","isChecked","onInputChange","checked","FormGroup","check","Label","isOpIconShown","isConfirmUnlinkDialogOpen","handleClick","is_desktop_client","unlinkDevice","wipeDevice","platform","device_id","unlinked","msg","device_name","last_login_ip","last_accessed","ConfirmUnlinkDeviceDialog","LinkedDevices","listLinkedDevices","SharedRepoInfo","share_type","share_permission","share_permission_name","modifier_name","modifier_email","modifier_contact_email","encrypted","is_admin","user_name","user_email","contact_email","group_id","group_name","PermSelect","listCustomPermissions","customPermissions","permission_list","CustomPermission","isLoading","switchOption","currentOption","changePerm","translatePermission","permission","sharePerms","find","translateExplanation","explanation","sharePermsExplanation","description","getPermissions","newPermissions","permissions","slice","currentPerm","maxHeight","overflow","htmlFor","sortByName","sortOrder","sortItems","sortBy","sortIcon","table","togglePermSelectDialog","isPermSelectDialogOpen","options","updateRepoSharePerm","unshare","unshareRepo","unshared","message","onEditPermission","nativeEvent","stopImmediatePropagation","isShowPermEditor","showAdmin","assign","shareTo","getLibIconUrl","iconTitle","getLibIconTitle","repoUrl","shareType","startsWith","SharePermissionEditor","isTextMode","isEditing","autoFocus","isEditIconShow","currentPermission","onPermissionChanged","ShareAdminLibraries","sortRepos","listSharedRepos","SharedFolderInfo","folder_name","unshareFolder","postData","updateFolderSharePerm","is_readonly","getFolderIconTitle","folderUrl","ShareAdminFolders","_sortItems","comparator","compareTwoWord","listSharedFolders","ShareLinkPermissionSelect","getShareLinkPermissionObject","text","SortOptions","_e$target$value$split","_e$target$value$split2","_slicedToArray","sortOptions","TopToolbar","onShowSidePanel","onSearchedClick","CommonToolbar","searchPlaceholder","sortByTime","columnWidths","onRemoveLink","updatePermissionOptions","itemType","repo_folder_permission","permissionOptions","getShareLinkPermissionList","can_edit","getShareLinkPermissionStr","toggleLinkDialog","isLinkDialogOpen","viewLink","removeLink","renderExpiration","expire_date","expire_time","is_expired","permissionDetails","updateShareLink","token","JSON","stringify","objUrl","deletedTip","obj_id","ShareLinkPermissionEditor","view_cnt","ShareAdminLink","ShareAdminShareLinks","deleteShareLink","uploadItem","toggleSortOptionsDialog","isSortOptionsDialogOpen","toggleCleanInvalidShareLinksDialog","isCleanInvalidShareLinksDialogOpen","cleanInvalidShareLinks","newItems","listUserShareLinks","ShareLink","SortOptionsDialog","CommonOperationConfirmationDialog","confirmBtnText","ShareAdminUploadLinks","deleteUploadLink","toggleCleanInvalidUploadLinksDialog","isCleanInvalidUploadLinksDialogOpen","cleanInvalidUploadLinks","listUserUploadLinks","UploadLink","Repo","size_original","size","bytesToSize","owner_name","owner_email","owner_contact_email","last_modified","starred","monitored","storage_name","undefined","RepoMonitoredIcon","Icon","symbol","UncontrolledTooltip","placement","freezeItem","freezed","sortBySize","LibsMobileThead","onMonitorRepo","share","isShowSharedDialog","leaveShare","request","leaveShareRepo","leaveShareGroupOwnedRepo","toggleShareDialog","onToggleStarRepo","repoName","isStarred","starItem","visitRepo","repoURL","watchFileChanges","repo","monitorRepo","unwatchFileChanges","unMonitorRepo","icon_url","icon_title","iconVisibility","shareIconClassName","leaveShareIconClassName","shareRepoUrl","enableMonitorRepo","tabIndex","ModalPotal","ShareDialog","itemName","itemPath","repoEncrypted","enableDirPrivateShare","userPerm","isAdmin","SharedLibraries","listRepos","repoList","provider_id","from_user","from_server_url","ctime","SharedWithOCM","deleteOCMShareReceived","listOCMSharesReceived","ocm_share_received_list","OCMViaWebdav","getAllReceivedShares","server","req","get","shareID","received_share_list","delete","openFolder","parent_dir","onPathClick","DirPath","currentPath","downloadFile","downloadUrl","location","shared_by","getEventData","turnPathToLink","pathList","nodePath","pathElem","MainPanelTopbar","Account","isAdminPanel","onTabNavClick","DirentItem","dirent","downloadDirent","getDirentIcon","is_file","_React$Component2","DirContent","direntList","deleteDirent","Dirent","obj","DirView","loadDirentList","direntPath","joinPath","providerID","listOCMRepoDir","_res$data","dirent_list","user_perm","history","replaceState","getOCMRepoDownloadURL","err","openFileInput","fileInput","current","click","onFileInputChange","files","file","_this$props2","getOCMRepoUploadURL","formData","FormData","append","axios","post","fileObj","newDirent","dirs","isNewFolderDialogOpen","DirPathBar","CreateRepoDialog","handleRepoNameChange","isSubmitBtnActive","handlePassword1Change","password1","handlePassword2Change","password2","handleSubmit","validateInputParams","repoData","prepareRepoData","libraryType","onCreateRepo","handleKeyDown","onCreateToggle","onPermissionChange","handleStorageInputChange","selectedItem","storage_id","handlelibraryTemplatesInputChange","library_template","onEncrypted","encrypt","disabled","password","passwd","storages","libraryTemplates","repoPasswordMinLength","Form","for","onKeyDown","SeahubSelect","defaultValue","label","enableEncryptedLibrary","autoComplete","Alert","RepoViewToolbar","isCreateRepoDialogShow","toggleMore","onDropdownToggleKeyDown","visitDeletedviaKey","LibDetail","getFileCounts","getRepoInfo","file_count","currentRepo","nextProps","smallIconUrl","bigIconUrl","closeDetails","LibHistorySetting","submit","keepDays","autoHistory","expireDays","test","setRepoHistoryLimit","keep_days","errorInfo","num","setLimitDays","allHistory","noHistory","getRepoHistoryLimit","enableRepoHistorySetting","ChangeRepoPasswordDialog","handleOldPasswordInputChange","oldPassword","handleNewPasswordInputChange","newPassword","handleNewPasswordAgainInputChange","newPasswordAgain","formSubmit","submitBtnDisabled","changeEncryptedRepoPassword","centered","generateDialogTitle","action","method","ResetEncryptedRepoPasswordDialog","showLoading","showSuccess","showError","resetAndSendEncryptedRepoPassword","response","error_msg","contactEmail","LabelRepoStateDialog","handleInputChange","inputValue","labels","addNewRepoLabels","formErrorMsg","existingLabels","getAllRepoSnapshotLabels","handleChange","CreatableSelect","isMulti","UserItem","isOperationShow","deleteUserFolderPermission","onChangeUserFolderPerm","folder_path","showPath","LibSubFolderSetUserPermissionDialog","handleUserSelectChange","option","setPermission","addUserFolderPerm","folderPath","users","isDepartmentRepo","addDepartmentRepoUserFolderPerm","failed","userFolderPermItems","refs","userSelect","clearSelect","deleteUserFolderPermItem","deleteDepartmentRepoUserFolderPerm","deleteUserFolderPerm","deletedItem","userEmail","updateDepartmentRepoUserFolderPerm","updateUserFolderPerm","onSetSubFolder","toggleFileChooser","showFileChooser","toggleSubFolder","handleFileChooserSubmit","onRepoItemClick","listDepartmentRepoUserFolderPerm","listUserFolderPerm","FileChooser","mode","onDirentItemClick","thead","UserSelect","onSelectChange","InputGroup","InputGroupAddon","addonType","GroupItem","deleteGroupPermissionItem","onChangeGroupPermission","LibSubFolderSerGroupPermissionDialog","handleSelectChange","selectedOption","loadOptions","shareableGroups","listGroupPermissionItems","_this2$props","listDepartmentRepoGroupFolderPerm","listGroupFolderPerm","groupPermissionItems","addGroupFolderPerm","addDepartmentRepoGroupFolderPerm","deleteDepartmentRepoGroupFolderPerm","deleteGroupFolderPerm","updateDepartmentRepoGroupFolderPerm","updateGroupFolderPerm","updateGroupPermission","groupID","sharedItem","sharedItemGroupID","maxMenuHeight","components","NoOptionsMessage","NoGroupMessage","LibSubFolderPermissionDialog","activeTab","renderContent","Nav","pills","NavItem","NavLink","TabContent","TabPane","tabId","LibSubFolderSetGroupPermissionDialog","folderName","maxWidth","MylibRepoMenu","onMenuItemClick","operation","onMenuItemKeyDown","dataset","toggleAdvancedMenuShown","isAdvancedMenuShown","toggleAdvancedMenu","onDropDownMouseMove","generatorOperations","showResetPasswordMenuItem","enableResetEncryptedRepoPassword","isEmailConfigured","operations","folderPermEnabled","monitorOp","getAdvancedOperations","isPC","enableRepoSnapshotLabel","enableRepoAutoDel","translateOperations","translateResult","advancedOperations","onMouseMove","divider","direction","caret","pop","unshift","RepoAPITokenPermissionEditor","onHideSelect","onSelectHandler","optionTranslation","OpIcon","captureMenuScroll","APITokenItem","onDeleteAPIToken","deleteAPIToken","app_name","onUpdateAPIToken","updateAPIToken","onCopyAPIToken","api_token","copy","RepoAPITokenDialog","listAPITokens","listRepoAPITokens","apiTokenList","repo_api_tokens","handleError","appName","keyCode","addAPIToken","_this2$state","addRepoAPIToken","deleteRepoAPIToken","updateRepoAPIToken","detail","duration","renderAPITokenList","minHeight","HTMLescape","onRepoAPITokenToggle","onDeleteLink","deleteItem","creator_name","RepoShareAdminShareLinks","deleteRepoShareLink","linkItem","listRepoShareLinks","forDialog","RepoShareAdminUploadLinks","deleteRepoUploadLink","listRepoUploadLinks","updateShareToUserItemPermission","share_to","isRepoOwner","getFolderName","share_to_name","permission_name","RepoShareAdminUserShares","deleteShareToUserItem","shareItem","getAllRepoFolderShareInfo","share_info_list","updateShareToGroupItemPermission","RepoShareAdminGroupShares","deleteShareToGroupItem","RepoShareAdminDialog","getInitialActiveTab","enableShareLink","enableUploadLink","onTabKeyDown","LibOldFilesAutoDelDialog","daysNeedTobeSet","isAutoDel","autoDelDays","setRepoOldFilesAutoDelDays","updateRadioCheck","getRepoOldFilesAutoDelDays","auto_delete_days","MylibRepoListItem","isOpIconShow","onShareToggle","onDeleteToggle","onRenameToggle","onTransferToggle","onHistorySettingToggle","onChangePasswordToggle","onResetPasswordToggle","onFolderPermissionToggle","onLabelToggle","onAPITokenToggle","toggleRepoShareAdminDialog","toggleOldFilesAutoDelDialog","isRenaming","onRepoClick","isShareDialogShow","isDeleteDialogShow","isTransferDialogShow","isHistorySettingDialogShow","isChangePasswordDialogShow","isResetPasswordDialogShow","isLabelRepoStateDialogOpen","isFolderPermissionDialogShow","isAPITokenDialogShow","isRepoShareAdminDialogOpen","isOldFilesAutoDelDialogOpen","onRenameConfirm","newName","renameRepo","onRenameRepo","onRenameCancel","onTransferRepo","transferRepo","onDeleteRepo","deleteRepo","isRepoDeleted","renderPCUI","Rename","renderMobileUI","MediaQuery","DeleteRepoDialog","TransferDialog","LibHistorySettingDialog","MylibRepoListView","sortRepoList","renderRepoListView","showStorageBackend","GuideForNewDialog","siteName","MyLibraries","createMineRepo","newRepo","repo_size","isShowDetails","onRepoDetails","toggleGuideForNewDialog","pageOptions","guideEnabled","isGuideForNewDialogOpen","MyLibsDeleted","refreshDeletedRepoList","deletedRepoList","listDeletedRepo","trashReposExpireDays","DeletedRepoTable","deletedRepos","DeletedRepoItem","hideRestoreMenu","restoreDeletedRepo","del_time","ShareRepoListItem","onRepoSelect","padding","sharePermission","ShareRepoDialog","selectedRepoList","onRepoSelectedHandler","onCloseDialog","onShareRepoDialogClose","SharedRepoListItem","clickOperationMenuToggle","getRepoComputeParams","libPath","onItemRenameToggle","onItemFolderPermissionToggle","onItemDetails","onItemShare","onItemUnshare","onItemRename","isFolderPermissionDialogOpen","onItemDeleteToggle","onItemDelete","currentGroup","deleteGroupOwnedLibrary","translateMenuItem","menuItem","isStaff","isDeparementOnwerGroupMember","generatorMobileMenu","isSystemStaff","generatorPCMenu","shareOperation","unshareOperation","deleteOperation","_this$getRepoComputeP","_this$getRepoComputeP2","isGroupOwnedRepo","SharedRepoListView","getSortMetaData","some","isShowTableThread","_this$getSortMetaData","hasNextPage","PublicSharedView","createPublicRepo","addRepoItem","onCreateRepoToggle","selectOwnedRepoToPublic","isExist","repoIndex","newRepoList","onAddRepoToggle","isCreateMenuShow","onSelectRepoToggle","isSelectRepoDialpgShow","canAddPublicRepo","socket","seafileCollabServer","io","CollabServer","fn","emit","on","off","LibDecryptDialog","setRepoDecryptPassword","onLibDecryptDialog","ViewModeToolbar","switchViewMode","currentMode","baseClass","isCustomPermission","defaultProps","CreateFile","childName","isDuplicated","checkDuplicatedName","parentPath","isMarkdownDraft","isSdocDraft","onAddFile","handleCheck","pos","lastIndexOf","p","substring","fileType","onAfterModelOpened","newInput","focus","setSelectionRange","toggleMarkSdocDraft","onOpened","innerRef","DirOperationToolbar","toggleMobileOpMenu","isMobileOpMenuOpen","hideOperationMenu","isUploadMenuShow","targetRect","getBoundingClientRect","position","display","left","top","bottom","operationMenuStyle","onUploadClick","onUploadFile","onUploadFolder","onCreateClick","onShareClick","onCreateFolderToggle","isCreateFolderDialogShow","onCreateFileToggle","isCreateFileDialogShow","onCreateMarkdownToggle","onCreateExcelToggle","onCreatePPTToggle","onCreateWordToggle","onCreateSeaDocToggle","onAddFolder","dirPath","_Utils$getUserPermiss","getUserPermission","customPermission","canUpload","canCreate","upload","create","content","showShareBtn","isSupportUploadFolder","enableSeadoc","CreateFolder","addFolderCancel","MoveDirent","isMutipleOperation","moveItems","moveItem","selectedPath","selectedDirentList","direntPaths","moveDirentPath","flag","onItemsMove","onItemMove","onCancelMove","nextState","CopyDirent","copyItems","copyItem","copyDirentPath","onItemsCopy","onItemCopy","onCancelCopy","CreateTagDialog","inputNewName","tagName","selectTagcolor","tagColor","createTag","createRepoTag","repoTagID","repo_tag","repo_tag_id","onRepoTagCreated","TAG_COLORS","newTag","canSave","onClose","defaultChecked","backgroundColor","require","getRandomValues","TagItem","isTagHighlighted","getRepoTagIdList","fileTagList","fileTag","onEditFileTag","repoTag","repoTagIdList","addFileTag","onFileTagChanged","deleteFileTag","isTagSelected","TagList","getRepoTagList","listRepoTags","repotagList","repo_tags","RepoTag","createNewTag","_React$Component3","EditFileTagDialog","isCreateRepoTagShow","isListRepoTagShow","_this4$props","_this$validateInput","validateInput","isValid","onRename","changeState","endIndex","MultipleDirOperationToolbar","onMoveToggle","isMoveDialogShow","onCopyToggle","isCopyDialogShow","onItemsDelete","onItemsDownload","isDir","URLDecorator","getUrl","useGoFileserver","zipDownload","zipToken","fileServerRoot","isZipDialogOpen","closeZipDialog","checkDuplicatedNameInList","onPermissionItem","showLibContentViewDialogs","isPermissionDialogOpen","onMarkAsDraft","getDirentPath","sdocMarkAsDraft","updateDirent","onUnmarkAsDraft","sdocUnmarkAsDraft","onStartRevise","sdocStartRevise","file_path","getDirentMenuList","currentRepoInfo","opList","getDirentOperationList","list","showShareDialog","isRenameDialogOpen","listFileTags","lockFile","unlockFile","onHistory","onAccessLog","showDirentDetail","onOpenViaClient","lockfile","is_locked","unSelectDirent","unlockfile","showEditFileTagDialog","file_tags","file_tag_id","onMenuFileTagChanged","onFilesTagChanged","multiFileTagList","canDelete","canDownload","canCopy","canModify","download","modify","ButtonGroup","ItemDropdownMenu","toggleClass","getMenuList","MoveDirentDialog","CopyDirentDialog","ZipDownloadDialog","ViewFileToolbar","onEditClick","onNewDraft","createDraft","onDraftHover","isDraftMessageShow","isMoreMenuShow","onEditFileTagToggle","isEditTagDialogShow","onHistoryClick","historyUrl","filePermission","hasDraft","Tooltip","fileTags","LibContentToolbar","isViewFile","onSideNavMenuClick","isLibView","isDirentSelected","DirOperationToolBar","tabName","tagTitle","pathPrefix","showName","InternalLinkOperation","zIndex","randomUUID","crypto","rnds8","Uint8Array","rng","Error","byteToHex","toString","unsafeStringify","arr","offset","buf","native","rnds","random","TagColor","selectTagColor","newColor","updateRepoTag","colorList","Popover","PopoverBody","TagName","toggleMode","input","updateTagName","onInputKeyDown","onInputBlur","onBlur","TagListItem","deleteTag","onDeleteTag","VirtualTagColor","updateVirtualTag","VirtualTagName","setTimeout","VirtualTagListItem","deleteVirtualTag","TagListFooter","toggleTooltip","showTooltip","onClickImport","importOptionsInput","importTagsInputChange","fileReader","FileReader","onload","onImportTags","onerror","onImportTagsError","readAsText","warning","getValidTags","tags","validTags","tagNameMap","parse","result","isArray","createRepoTags","updateTags","getDownloadUrl","delay","show","hide","accept","ListTagPopover","loadTags","newRepotagList","targetTagID","deleteRepoTag","createVirtualTag","virtual_repo_tag","Math","floor","uuidv4","is_virtual","virtualTag","findIndex","onListTagCancel","DirTool","onShowListRepoTag","hidePopover","dom","parentNode","tagsIconID","isMarkdownFile","toolbarDom","trashUrl","_Fragment","SeahubPopover","popoverClassName","hideSeahubPopover","hideSeahubPopoverWithEsc","canHideSeahubPopover","boundariesElement","body","CurDirPath","updateUsedRepoTags","onDeleteRepoTag","column","Col","md","SimpleText","blurInput","inputRef","blur","onCommit","updated","onCut","onPaste","KeyCodes","Esc","_e$currentTarget","currentTarget","selectionStart","selectionEnd","ChineseInputMethod","LeftArrow","RightArrow","row","nextValue","editable","_ref","result_type","FORMULA_RESULT_TYPE","DATE","getDateDisplayString","STRING","SearchInput","onCompositionStart","isInputtingChinese","timer","clearTimeout","wait","searchValue","onCompositionEnd","setFocus","isSelectAllText","activeElement","txtLength","classnames","SingleSelectEditor","getCascadeColumnValue","columns","cascade_column_key","getSelectColumnOptions","_ref2","cascade_settings","cascadeColumnValue","cascadeSetting","onUpdateState","onChangeSearch","searchVal","val","filteredOptions","onSelectOption","optionID","_defineProperty","highlightIndex","maxItemNum","itemHeight","editorKey","UncontrolledPopover","trigger","hideArrow","textColor","max","SingleSelect","updateState","isShowSingleSelect","currentOptionID","optionStyle","DELETED_OPTION_BACKGROUND_COLOR","optionName","DELETED_OPTION_TIPS","NumberEditor","DEFAULT_NUMBER_FORMAT","currency_symbol","initValue","isMac","replaceNumberNotAllowInput","_event$currentTarget","Enter","formatStringToNumber","setInputRef","getNumberDisplayString","DateEditor","CtimeFormatter","_CONFIG","EXTRA_ATTRIBUTES_COLUMN_TYPE","TEXT","FORMULA","FormulaFormatter","SINGLE_SELECT","NUMBER","CTIME","MTIME","Column","Editor","CONFIG","ColumnName","ExtraAttributesDialog","startAnimation","callback","animationEnd","modalRef","firstChild","_this$getDialogStyle","getDialogStyle","marginLeft","marginRight","marginTop","transition","getFormatUpdateData","update","updateData","_loop","getData","getFileExtendedProperties","metadata","editable_columns","Boolean","_id","getValidColumns","isEmptyFile","createData","newFileExtendedProperties","newRow","_objectSpread","_this$props3","updateFileExtendedProperties","onHotKey","isHotkey","onToggle","innerWidth","DIALOG_MAX_HEIGHT","getInitStyle","renderColumns","direntDetail","direntType","direntDetailId","repeat","zIndexes","contentClassName","modalClassName","wrapClassName","fade","ConfirmApplyFolderPropertiesDialog","submitting","applyFolderExtendedProperties","DetailListView","getDirentPosition","repoInfo","isEditFileTagShow","toggleExtraPropertiesDialog","isShowExtraProperties","toggleApplyPropertiesDialog","isShowApplyProperties","renderTags","FileTagList","tagListTitleID","EditFileTagPopover","DirentDetail","loadDirentInfo","updateDetailView","getDirName","listDir","folderDirent","getFileInfo","getDirInfo","renderHeader","direntName","onItemDetailsClose","renderDetailBody","isImg","isVideo","DirentNodeView","onCreateNewFile","isDirentListLoading","FileTag","_React$PureComponent","fileTagID","DirentListItem","canDrag","isDragTipShow","unfreezeItem","onItemSelected","onItemStarred","onDirentClick","onItemClick","isRenameing","canPreview","showImagePopup","closeSharedDialog","onMobileMenuItemClick","getAttribute","onItemDownload","onItemMoveToggle","onItemCopyToggle","onUnlockItem","onLockItem","onItemConvert","onConvertWithONLYOFFICE","dstType","lockName","onlyofficeConvert","onTagTooltipToggle","isShowTagTooltip","destRepo","onItemDragStart","isIEBrower","dataTransfer","effectAllowed","onShowDirentsDraggablePreview","setDragImage","empty_content","selectedList","nodeRootPath","nodeDirent","nodeParentPath","setData","drag_icon","dragStartItemData","onItemDragEnter","isDropTipshow","onItemDragOver","dropEffect","onItemDragLeave","onItemDragDrop","draggedItem","_dragStartItemData","dropItemData","onItemMouseDown","onItemContextMenu","renderItemOperation","_assertThisInitialize","isHasPermissionToShare","isHandleContextMenuEvent","getDirentItemMenuList","_customPermission$per","preview","activeDirent","dirHref","fileHref","is_sdoc_revision","revision_id","trClass","lockedInfo","lock_owner_name","draggable","onDragStart","onDragEnter","onDragOver","onDragLeave","onDrop","onMouseDown","onContextMenu","hasSuffix","DirentsDraggedPreview","handleDragEnd","element","opacity","onHideDirentsDraggablePreview","handleDragOver","clientY","clientX","handleDrop","inlineStyle","pointerEvents","documentElement","DirentListView","hideMenu","prepareImageItem","fullDirentList","imageItems","isImagePopupOpen","imageIndex","moveToPrevImage","imageItemsLength","prevState","moveToNextImage","closeImagePopup","selectedDirentNames","isProgressDialogShow","downloadItems","onCloseZipDownloadDialog","button","handleContextClick","menuList","currentObject","x","touches","pageX","y","pageY","posX","posY","showMenuConfig","showMenu","onContainerClick","onContainerMouseDown","onContainerContextMenu","NEW_FOLDER","TextTranslation","NEW_FILE","NEW_MARKDOWN_FILE","NEW_EXCEL_FILE","NEW_POWERPOINT_FILE","NEW_WORD_FILE","NEW_SEADOC_FILE","direntsContainerMenuList","persist","MOVE","COPY","DOWNLOAD","DELETE","onContainerMenuItemClick","onDirentsMenuItemClick","onThreadMouseDown","onThreadContextMenu","setDirentItemRef","direntItems","getDirentIndex","onShowMenu","onHideMenu","isContextmenu","onTableDragEnter","canDrop","enteredCounter","isListDropTipShow","onTableDragOver","onTableDragLeave","tableDrop","isShowDirentsDraggablePreview","clickedDirent","currentItemRef","_Utils$getUserPermiss2","onAllItemSelected","isAllItemSelected","ContextMenu","dragStartPosition","ImageDialog","DirListView","DirentNoneView","isRepoInfoBarShow","RepoInfoBar","usedRepoTags","DirentGridItem","isGridSelected","onGridItemClick","onItemLinkClick","onGridItemDragStart","onGridItemDragEnter","isGridDropTipShow","onGridItemDragOver","onGridItemDragLeave","onGridItemDragDrop","onGridItemMouseDown","getFileUrl","fileUrlArr","onGridItemContextMenu","fileUrl","toolTipID","MD5","gridClass","gridIcon","DirentGridView","isRenameDialogShow","onGridContainerMouseDown","gridContainerClick","isDirentDetailShow","onGridContainerContextMenu","isGridItemFreezed","DirGridView","onRenameNode","currentNode","DirColumnNav","onNodeClick","node","opNode","showNodeImagePopup","onAddFolderToggle","onAddFileToggle","onDeleteNode","onOpenFile","root","treeData","isAddFileDialogShow","isAddFolderDialogShow","onAddFolderNode","newUrl","imageNames","isNodeImagePopupOpen","imageNodeItems","prepareImageItems","useThumbnail","isGIF","substr","thumbnailSizeForOriginal","prepareItem","closeNodeImagePopup","stopTreeScrollPropagation","isNodeMenuShow","flex","navRate","select","inResizing","isTreeDataLoading","TreeView","onNodeExpanded","onNodeCollapse","onUnFreezedItem","onAddFileNode","Copy","Move","DirColumnFile","goDraftPage","hash","isFileLoadedErr","WikiMarkdownViewer","isTOCShow","isFileLoading","markdownContent","lastModified","latestContributor","onLinkClick","DirColumnView","onResizeMouseUp","setCookie","onResizeMouseDown","containerWidth","viewModeContainer","clientWidth","onResizeMouseMove","sizeNavWidth","rate","getCookie","cookiename","c","onResizeMove","mainFlex","onMouseUp","LibContentContainer","onMainNavBarClick","closeDirentDetail","currentDirent","checkCurrentDirent","deletedDirent","onItemsScroll","onListContainerScroll","updateDetail","pathExist","isAllDirentSelected","onAllDirentSelected","direntDetailPanelTab","UPLOAD_UPLOADING","UPLOAD_ERROR","UPLOAD_ISSAVING","UPLOAD_UPLOADED","UploadListItem","onUploadCancel","resumableFile","onUploadRetry","formatFileSize","toFixed","uploadState","remainingTime","isSaved","progress","round","newFileName","isUploading","formatTime","ForbidUploadListItem","maxUploadFileSize","UploadProgressDialog","onCancelAllUploading","onMinimizeUpload","isMinimized","onCloseUpload","onCloseUploadDialog","uploadBitrate","formatBitRate","uploadedMessage","uploadingMessage","uploadingOptions","uploadedOptions","allFilesUploaded","retryFileList","onUploadRetryAll","forbidUploadFileList","uploadFileList","UploadRemindDialog","cancelFileUpload","replaceRepetitionFile","uploadFile","currentResumableFile","FileUploader","componentWillUnmount","onbeforeunload","dragAndDrop","resumable","disableDropOnDocument","bindCallbackHandler","minFileSizeErrorCallback","fileTypeErrorCallback","maxFilesErrorCallback","opts","maxFileSizeErrorCallback","bindEventHandler","onChunkingComplete","onFileAdded","filesAddedComplete","onFileProgress","onFileUploadSuccess","onProgress","onComplete","onPause","onFileRetry","onFileError","onError","onBeforeCancel","onCancel","errorCount","maxFiles","maxNumberOfFilesForFileupload","relativePath","isFile","relative_path","hasRepetition","isUploadRemindDialogShow","setUploadFileList","getFileServerUploadLink","resumableUpload","isUploadLinkLoaded","_this$props4","getFileUploadedBytes","uploadedBytes","blockSize","parseInt","resumableUploadFileBlockSize","markChunksCompleted","registerGlobalVariable","getBitrate","uniqueIdentifier","lastSize","loaded","now","timestamp","timeDiff","bitrateInterval","currentTime","dir_name","notifiedFolders","getFileServerErrorMessage","errorMessage","setHeaders","chunkSize","getOpt","fileSize","startByte","endByte","min","encodeURI","setQuery","generateUniqueIdentifier","webkitRelativePath","onFileUpload","uploadInput","removeAttribute","onFolderUpload","setAttribute","uploadingItem","cancel","retryUploadFile","_this$props5","bootstrap","firedRetry","resumableObj","_this$props6","getUpdateLink","_this$props7","Resumablejs","filetypes","maxFileSize","testMethod","testChunks","headers","withCredentials","simultaneousUploads","fileParameterName","forceChunkSize","maxChunkRetries","minFileSize","assignBrowse","enableDropOnDocument","DeleteFolderDialog","deleteFolder","sharedToUserCount","sharedToGroupCount","getRepoFolderShareInfo","opTarget","alert_message","LibContentView","toggleDirentDetail","onpopstate","showFile","onRepoUpdateEvent","parseFloat","lastModifyTime","dirID","updateColumnMarkdownData","dirMetaData","usedRepoTag","last_modifier_name","is_draft","has_draft","getFileDownloadLink","getFileContent","draftID","loadDirData","collabServer","watchRepo","getRepoDraftCounts","draft_counts","loadSidePanel","showDir","_res$data2","tree","addResponseListToNode","loadNodeAndParentsByPath","isSessionExpired","resetShowLength","isNeedUpdateHistoryState","pushState","_res$data3","errMsg","sortDirents","dir_id","foldersSharedOut","identifyFoldersSharedOut","_this2$state2","has_been_shared_out","itemsShowLength","curItemPath","updateMoveCopyTreeNode","clone","getNodeByPath","nodeChildrenNames","addNodeToTree","cancelCopyMoveDirent","taskId","asyncCopyMoveTaskId","cancelCopyMoveOperation","currentMoveItemName","currentMoveItemPath","onMoveProgressDialogToggle","asyncOperationProgress","isCopyMoveProgressDialogShow","onMoveItems","destDirentPath","asyncOperatedFilesLength","asyncOperationType","dirNames","getSelectedDirentNames","getSelectedDirentPaths","moveDir","task_id","getAsyncCopyMoveProgress","deleteTreeNodes","moveDirents","getMoveSuccessMessage","getMoveFailedMessage","onCopyItems","copyDir","getCopySuccessfulMessage","getCopyFailedMessage","restoreDeletedDirents","commitID","paths","closeAll","restoreDirents","_res$data4","addDirent","onDeleteItems","deleteMutipleDirents","deleteDirents","successTipWithUndo","createDir","createFile","getPaths","isWeChat","resetSelected","expandNode","isInternalMarkdownLink","getPathFromInternalMarkdownLink","isInternalDirLink","getPathFromInternalDirLink","onMainPanelItemRename","renameItem","onMainPanelItemDelete","onRenameTreeNode","onDeleteTreeNode","renameDir","renameItemAjaxCallback","renameFile","toggleDeleteFolderDialog","isDeleteFolderDialogOpen","folderToDelete","deleteDir","deleteItemAjaxCallback","onMoveItem","moveToDirentPath","dirName","deleteTreeNode","moveDirent","onCopyItem","copyToDirentPath","onConvertItem","isConvertLoading","convertFile","new_path","loadTreeNodeByPath","showColumnMarkdownFile","onDirentSelected","direntObject","createDirent","renameDirent","newDirentPath","isChildPath","oldName","isAncestorPath","newPath","renameAncestorPath","direntNames","recaculateSelectedStateAfterDirentDeleted","paramKey","paramValue","newDirentList","isLoaded","isExpanded","with_parents","_res$data5","results","parentDir","isLoadFailed","onTreeNodeClick","collapseNode","treeHelper","w","onTreeNodeCollapse","onTreeNodeExpanded","createTreeNode","addNodeToParentByPath","renameTreeNode","renameNodeByPath","deleteNodeByPath","deleteNodeListByPaths","moveTreeNode","moveToPath","moveToRepo","nodeName","moveNodeByPath","copyTreeNode","copyToPath","copyNodeByPath","nodeList","TreeNode","addChildren","selectedDirent","names","libNeedDecrypt","onToolbarFileTagChanged","deletedTagID","buildTree","oldonpopstate","_componentDidMount","_asyncToGenerator","_regeneratorRuntime","mark","_callee","repoRes","permissionID","permissionRes","wrap","_context","prev","next","decodeURIComponent","sent","RepoInfo","getCustomPermission","custom_permission","lib_need_decrypt","t0","stop","unwatchRepo","_getAsyncCopyMoveProgress","_callee2","_message","_context2","queryAsyncOperationProgress","abrupt","successful","total","done","deleteFile","is_sdoc_draft","isVirtual","direntItemsList","onMenuClick","CopyMoveDirentProgressDialog","ConvertMarkdownDialog","DismissGroupDialog","dismissGroup","that","deleteGroup","onGroupChanged","showDismissGroupDialog","toggleDismissGroupDialog","RenameGroupDialog","handleGroupNameChange","newGroupName","renameGroup","loadGroup","toggleRenameGroupDialog","currentGroupName","showRenameGroupDialog","TransferGroupDialog","transferGroup","toggleTransferGroupDialog","ImportMembersDialog","toggleImportMembersDialog","fileInputRef","importMembersInBatch","groupImportMembersExtraMsg","GroupMembers","groupMembers","changeMember","deleteMember","isOwner","toggleItemFreezed","Member","onChangeUserRole","setGroupAdmin","deleteGroupMember","handleMouseLeave","translateRole","roles","deleteAuthority","scope","RoleEditor","currentRole","onRoleChanged","ManageMembersDialog","listGroupMembers","page","perPage","members","addGroupMember","emails","addGroupMembers","newMembers","isFreezed","targetMember","searchMembers","keyword","membersFound","clearSearch","onSearchInputFocus","searchActive","onSearchInputBlur","InputGroupText","toggleManageMembersDialog","ListAndAddGroupMembers","LeaveGroupDialog","leaveGroup","quitGroup","toggleLeaveGroupDialog","GroupView","getGroup","getEmptyTip","isDepartmentGroup","loadRepos","listGroupRepos","groupOwnerType","groupId","createGroupOwnedLibrary","createGroupRepo","group","unshareRepoToGroup","renameGroupOwnedLibrary","toggleGroupDropdown","showGroupDropdown","showTransferGroupDialog","showImportMembersDialog","notify","importGroupMembersViaFile","showManageMembersDialog","isLeaveGroupDialogOpen","toggleGroupMembersPopover","showGroupMembersPopover","isShowSettingIcon","useRate","GroupsToolbar","canAddGroup","toggleAddGroupModal","CreateGroupDialog","handleGroupChange","groupName","handleSubmitGroup","createGroup","onCreateGroup","showAddGroupModal","RepoListViewPanel","isShowRepoOwner","GroupsView","InvitationsToolbar","toggleInvitePeopleDialog","InvitePeopleDialog","handleSubmitInvite","emailsArray","isSubmitting","invitePeople","successMsg","accepter","onInvitePeople","failedMsg","InvitationRevokeDialog","onRevokeInvitation","revokeInvitation","invitation","deleteInvitation","deleted","revokeItem","toggleRevokeDialog","isRevokeDialogOpen","invite_time","accept_time","invitationsList","InvitationsView","invitationsArray","isInvitePeopleDialogOpen","listInvitations","NewWikiDialog","addWiki","WikiSelectDialog","WikiDeleteDialog","WikiListItem","isShowDeleteDialog","onDeleteCancel","deleteWiki","wiki","fileIconUrl","deleteIcon","owner_nickname","WikiListView","wikis","renameWiki","Wikis","getWikis","listWikis","clickMenuToggle","onMenuToggle","isShowAddWikiMenu","onSelectToggle","isShowSelectDialog","isShowCreateDialog","slug","canPublishRepo","GeneralToolbar","WrapperedComponent","Wrapper","GeneralToolBar","FilesActivitiesWrapper","MainContentWrapper","MyFileActivitiesWrapper","MyFileActivities","DraftsViewWrapper","StarredWrapper","LinkedDevicesWrapper","SharedLibrariesWrapper","SharedWithOCMWrapper","ShareWithOCM","OCMViaWebdavWrapper","ShareAdminLibrariesWrapper","ShareAdminFoldersWrapper","App","_event$state","navigateClientUrlToLib","splitUrlArray","repalce","listDrafts","dirViewPanels","generatorPrefix","navTab1","navTab2","navTab","getTabShowName","toggleSidePanel","home","Router","MyLibDeleted","OCMRepoDir","Groups","ReactDom","getElementById","SeahubPopoverRef","isSelectOpen","getEventClassName","Escape","onPopoverInsideClick","innerClassName","modifiers","additionalProps","MENU_SHOW","MENU_HIDE","dispatchGlobalEvent","eventName","CustomEvent","createEvent","initCustomEvent","dispatchEvent","store","registerHandlers","handleHide","handleKeyNavigation","unregisterHandlers","handleShow","_e$detail$position","_e$detail","isVisible","callIfExists","menu","hideOnLeave","handleContextMenu","getMenuPosition","menuStyles","_window","innerHeight","rect","getRTLMenuPosition","_window2","listenId","listener","register","wrapper","requestAnimationFrame","rtl","unregister","globalEventListener","GlobalEventListener","handleShowEvent","callbacks","hasOwnProp","handleHideEvent","showCallback","hideCallback","uniqueId","canUseDOM","func","prop","prototype","hasOwnProperty","createElement","progressStyle","lineHeight","textAlign","CreateForder","imageTitle","Lightbox","mainSrc","nextSrc","prevSrc","onCloseRequest","onMovePrevRequest","onMoveNextRequest","imagePadding","imageLoadErrorMessage","prevLabel","nextLabel","closeLabel","zoomInLabel","zoomOutLabel","copyToClipboard","interval","queryZipProgress","clearInterval","failed_reason","zipProgress","zipped","cancelZipTask","getShareLinkDirentsZipTask","getShareLinkZipTask","setInterval","listenerId","ButtonDropdown","requireContext","console","log","iconClass","xlinkHref","callBack","footerName","addIconClassName","clearValue","isFunction","functionToCheck","renderClear","isClearable","clearClassName","_this$props2$componen","ClearIndicator","setHighlightIndex","generateRandomColor","searchText","UpArrow","DownArrow","showAddTool","CommonAddTool","keyCodes","enter","esc","ListTaggedFilesDialog","TaggedFile","parent_path","filename","onDeleteTaggedFile","taggedFile","getTaggedFiles","file_deleted","currentTag","shareLinkToken","getShareLinkTaggedFiles","listTaggedFiles","taggedFileList","tagged_files","enableFileDownload","active","Draft","created","createdStr","ownerNickname","originRepoID","draftFilePath","ListRepoDraftsDialog","onDeleteDraftItem","editorUtilities","listRepoDrafts","DraftItem","draftItem","onListTaggedFiles","isListTaggedFileShow","toggleDrafts","showRepoDrafts","TreeNodeView","isShowOperationMenu","isHighlight","onLoadToggle","onNodeDragStart","onNodeDragEnter","isNodeDropShow","onNodeDragMove","onNodeDragLeave","onNodeDrop","getNodeTypeAndIcon","suffix","calculateMenuList","RENAME","OPEN_VIA_CLIENT","_customPermission$per2","renderChildren","paddingLeft","hasChildren","_Utils$getUserPermiss3","_this$getNodeTypeAndI","hlClass","dragStartNodeData","isTreeViewDropTipShow","_dragStartNodeData","dropNodeData","contentClass","getTitlesInfo","titlesInfo","titleDom","querySelectorAll","updateTabTitle","headingList","offsetTop","onScrollHandler","activeTitleIndex","contentScrollTop","markdownContainer","titlesLength","changeInlineNode","imagePath","isPublicWiki","RegExp","index2","originalPath","pathNormalize","isInternalFileLink","match","p1","p2","p3","sharedToken","modifyValueBeforeRender","changeMarkdownNodes","renderMarkdown","isWiki","MarkdownViewer","showTOC","scriptSource","links","noop","module","exports","count","err_cb","bail","proxy","arraybuffer","start","end","bytes","byteLength","ArrayBuffer","abv","ii","buffer","Backoff","ms","factor","jitter","attempts","pow","rand","deviation","reset","setMin","setMax","setJitter","chars","encode","base64","decode","encoded1","encoded2","encoded3","encoded4","bufferLength","BlobBuilder","WebKitBlobBuilder","MSBlobBuilder","MozBlobBuilder","blobSupported","Blob","blobSupportsArrayBufferView","blobBuilderSupported","getBlob","mapArrayBufferViews","ary","chunk","set","byteOffset","BlobBuilderConstructor","bb","part","BlobConstructor","Emitter","mixin","_callbacks","once","removeListener","removeAllListeners","cb","listeners","hasListeners","constructor","self","Function","parser","transports","debug","parseuri","parseqs","Socket","uri","hostname","host","secure","protocol","port","agent","upgrade","forceJSONP","jsonp","forceBase64","enablesXDR","timestampParam","timestampRequests","transportOptions","readyState","writeBuffer","prevBufferLen","policyPort","rememberUpgrade","binaryType","onlyBinaryUpgrades","perMessageDeflate","threshold","pfx","passphrase","cert","ca","ciphers","rejectUnauthorized","forceNode","isReactNative","product","extraHeaders","localAddress","upgrades","pingInterval","pingTimeout","pingIntervalTimer","pingTimeoutTimer","priorWebsocketSuccess","Transport","createTransport","o","EIO","transport","sid","requestTimeout","protocols","shift","setTransport","onDrain","packet","onPacket","probe","onTransportOpen","upgradeLosesBinary","supportsBinary","send","upgrading","pause","cleanup","flush","freezeTransport","onTransportClose","onclose","onupgrade","onOpen","l","onHandshake","setPing","code","filterUpgrades","onHeartbeat","timeout","ping","sendPacket","writable","write","compress","waitForUpgrade","cleanupAndClose","reason","filteredUpgrades","j","doOpen","doClose","packets","onData","decodePacket","XMLHttpRequest","XHR","JSONP","websocket","polling","xd","xs","isSSL","xdomain","xscheme","Polling","inherit","globalThis","JSONPPolling","rNewline","rEscapedNewline","empty","___eio","script","removeChild","form","iframe","doPoll","async","insertAt","getElementsByTagName","insertBefore","head","appendChild","userAgent","doWrite","area","iframeId","complete","initIframe","html","attachEvent","onreadystatechange","Request","isBinary","sendXhr","pollXhr","xhr","setDisableHeaderCheck","setRequestHeader","hasXDR","onLoad","responseText","contentType","getResponseHeader","responseType","requestsCount","requests","onSuccess","fromError","abort","XDomainRequest","unloadHandler","yeast","hasXHR2","poll","decodePayload","callbackfn","encodePayload","schema","b64","Number","BrowserWebSocket","NodeWebSocket","WebSocket","MozWebSocket","WebSocketImpl","WS","usingBrowserWebSocket","ws","supports","binary","addEventListeners","onopen","onmessage","ev","encodePacket","Buffer","hasCORS","load","r","storage","process","DEBUG","formatArgs","useColors","namespace","humanize","diff","lastC","save","namespaces","removeItem","WebkitAppearance","firebug","exception","$1","chrome","local","localStorage","localstorage","colors","formatters","v","enable","createDebug","prevTime","enabled","curr","coerce","formatter","charCodeAt","abs","selectColor","destroy","init","instances","stack","disable","skips","instance","s","m","h","d","plural","n","ceil","str","String","exec","isNaN","long","fmtShort","base64encoder","hasBinary","sliceBuffer","after","utf8","isAndroid","isPhantomJS","dontSendBlobs","pong","packetslist","each","eachWithIndex","el","utf8encode","encodeBase64Packet","contentArray","resultBuffer","encodeArrayBuffer","fr","readAsArrayBuffer","encodeBlobAsArrayBuffer","blob","encodeBlob","encodeBase64Object","encoded","strict","b64data","readAsDataURL","fromCharCode","typed","basic","btoa","utf8decode","charAt","decodeBase64Packet","tryDecode","rest","encodePayloadAsBlob","encodePayloadAsArrayBuffer","doneCallback","setLengthHeader","decodePayloadAsBinary","chr","encodedPackets","totalLength","reduce","acc","resultArray","bufferIndex","isString","ab","view","lenStr","binaryIdentifier","lengthAry","bufferTail","buffers","tailArray","msgLength","byteArray","byteCount","byteIndex","stringFromCharCode","ucs2decode","string","extra","output","counter","checkScalarValue","codePoint","toUpperCase","createByte","encodeCodePoint","readContinuationByte","continuationByte","decodeSymbol","byte1","version","codePoints","byteString","tmp","array","ucs2encode","withNativeBlob","withNativeFile","File","isBuffer","toJSON","qs","qry","pairs","pair","re","parts","source","authority","ipv6uri","pathNames","regx","queryKey","$0","$2","propTypes","PropTypes","cssModule","bordered","borderless","striped","dark","hover","responsive","tagPropType","responsiveTag","Tag","ResponsiveTag","attributes","_objectWithoutPropertiesLoose","classes","mapToCssModules","classNames","_extends","responsiveClassName","Manager","lookup","cache","managers","parsed","sameNamespace","nsps","forceNew","multiplex","connect","eio","subs","reconnection","reconnectionAttempts","Infinity","reconnectionDelay","reconnectionDelayMax","randomizationFactor","backoff","connecting","lastPing","encoding","packetBuffer","_parser","encoder","Encoder","decoder","Decoder","autoConnect","emitAll","nsp","updateSocketIds","generateId","engine","_reconnection","_reconnectionAttempts","_reconnectionDelay","_randomizationFactor","_reconnectionDelayMax","_timeout","maybeReconnectOnOpen","reconnecting","reconnect","skipReconnect","openSub","errorSub","onping","onpong","ondata","ondecoded","onConnecting","processPacketQueue","pack","subsLength","disconnect","onreconnect","attempt","toArray","hasBin","connect_error","connect_timeout","reconnect_attempt","reconnect_failed","reconnect_error","ids","acks","receiveBuffer","sendBuffer","connected","disconnected","flags","subEvents","BINARY_EVENT","EVENT","CONNECT","onpacket","rootNamespaceError","ERROR","onconnect","onevent","ACK","BINARY_ACK","onack","DISCONNECT","ondisconnect","ack","emitBuffered","loc","isBuf","_deconstructPacket","_placeholder","newData","_reconstructPacket","deconstructPacket","packetData","attachments","reconstructPacket","removeBlobs","pendingBlobs","bloblessData","_removeBlobs","curKey","containingObject","types","ERROR_PACKET","encodeAsString","payload","tryStringify","reconstructor","BinaryReconstructor","reconPack","writeEncoding","deconstruction","encodeAsBinary","tryParse","decodeString","takeBinaryData","finishedReconstruction","binData","withNativeBuffer","withNativeArrayBuffer","isView","SpriteSymbol","viewBox","this$1","hasImportNode","importNode","doc","DOMParser","parseFromString","createCommonjsModule","global","deepmerge","factory","commonjsGlobal","isMergeableObject","emptyTarget","cloneIfNecessary","optionsArgument","defaultArrayMerge","destination","mergeObject","arrayMerge","all","namespaces_1","svg","xlink","default","objectToAttrsString","attrs","attr","defaultAttrs","wrapInSvgString","BrowserSpriteSymbol","SpriteSymbol$$1","__proto__","prototypeAccessors","isMounted","createFromExistingNode","outerHTML","unmount","mount","mountTarget","querySelector","render","childNodes","defineProperties","mitt","handler","evt","svg$1","xlink$1","defaultConfig","Sprite","symbols","existing","remove","stringifiedSymbols","defaultConfig$1","autoConfigure","mountTo","syncUrlsWithBaseTag","listenLocationChangeEvent","locationChangeEvent","locationChangeAngularEmitter","usagesToUpdate","moveGradientsOutsideSymbol","arrayFrom","arrayLike","browser","isChrome","isFirefox","isIE","isEdge","evalStylesIEWorkaround","updatedNodes","textContent","getUrlWithoutFragment","angular","run","$rootScope","$on","oldUrl","defaultSelector","selector","selectAttributes","nodes","matcher","arrayfied","matched","xLinkNS","xLinkAttrName","specialUrlCharsPattern","escapeRegExp","updateReferences","replaceWith","setAttributeNS","sprite","attList","attSelector","updateUrls","references","startsWithEncoded","replaceWithEncoded","localName","Events","MOUNT","SYMBOL_MOUNT","BrowserSprite","Sprite$$1","cfg","emitter","_emitter","_autoConfigure","baseUrl","handleLocationChange","_handleLocationChange","spriteNode","symbolNode","isNewSymbol","attach","prepend","mountNode","usages","ready$1","definition","fns","hack","doScroll","domContentLoaded","spriteNodeId","spriteGlobalVarName","loadSprite","alphabet","seed","decoded","webpackContext","webpackContextResolve","__webpack_require__","resolve"],"sourceRoot":""}