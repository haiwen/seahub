/*! For license information please see orgAdmin.7e22129a.js.LICENSE.txt */
"use strict";(self.webpackChunkseahub_frontend=self.webpackChunkseahub_frontend||[]).push([[8776],{52622:function(e,t,i){var n=i(23029),a=i(92901),r=i(39874),s=i(85501),o=i(9950),l=i(8081),c=i(10877),d=i(6754),u=i(34322),h=i(65604),f=i(40326),g=i(20338),p=i(44414),m=function(e){function t(e){var i;return(0,n.default)(this,t),(i=(0,r.default)(this,t,[e])).submit=function(){i.props.changeGroup2Department(),i.props.toggleDialog()},i.state={selectedOption:null},i}return(0,s.default)(t,e),(0,a.default)(t,[{key:"render",value:function(){var e='<span class="op-target">'+h.Aq.HTMLescape(this.props.groupName)+"</span>",t=(0,f.AP)("Are you sure to change group {placeholder} to department ?").replace("{placeholder}",e);return(0,p.jsxs)(l.A,{isOpen:!0,toggle:this.props.toggleDialog,children:[(0,p.jsx)(g.A,{toggle:this.props.toggleDialog,children:(0,f.AP)("Change group to department")}),(0,p.jsx)(c.A,{children:(0,p.jsx)("p",{dangerouslySetInnerHTML:{__html:t}})}),(0,p.jsxs)(d.A,{children:[(0,p.jsx)(u.A,{color:"secondary",onClick:this.props.toggleDialog,children:(0,f.AP)("Cancel")}),(0,p.jsx)(u.A,{color:"primary",onClick:this.submit,children:(0,f.AP)("Submit")})]})]})}}])}(o.Component);t.A=m},61314:function(e,t,i){var n=i(23029),a=i(92901),r=i(39874),s=i(85501),o=i(9950),l=i(5495),c=i(69123),d=i(65276),u=i(34940),h=i(40326),f=i(65604),g=i(44414),p=function(e){function t(e){var i;return(0,n.default)(this,t),(i=(0,r.default)(this,t,[e])).onMenuItemClick=function(e){var t=f.Aq.getEventData(e,"op");i.props.onMenuItemClick(t)},i.onDropdownToggleClick=function(e){i.toggleOperationMenu(e)},i.toggleOperationMenu=function(e){i.setState({isItemMenuShow:!i.state.isItemMenuShow},(function(){i.state.isItemMenuShow?i.props.onFreezedItem():i.props.onUnfreezedItem()}))},i.state={isItemMenuShow:!1},i}return(0,s.default)(t,e),(0,a.default)(t,[{key:"render",value:function(){var e=this,t=this.props,i=t.operations,n=t.translateOperations;return(0,g.jsxs)(l.A,{isOpen:this.state.isItemMenuShow,toggle:this.toggleOperationMenu,children:[(0,g.jsx)(c.A,{tag:"i",className:"sf3-font sf3-font-more op-icon",title:(0,h.AP)("More operations"),"aria-label":(0,h.AP)("More operations"),"data-toggle":"dropdown","aria-expanded":this.state.isItemMenuShow}),(0,g.jsx)(d.A,{className:"my-1 mr-2",children:i.map((function(t,i){return(0,g.jsx)(u.A,{"data-op":t,onClick:e.onMenuItemClick,children:n(t)},i)}))})]})}}])}(o.Component);t.A=p},61599:function(e,t,i){var n=i(23029),a=i(92901),r=i(39874),s=i(85501),o=i(9950),l=i(8081),c=i(10877),d=i(40326),u=i(9961),h=i(20338),f=(i(8008),i(44414)),g=function(e){function t(){var e;(0,n.default)(this,t);for(var i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return(e=(0,r.default)(this,t,[].concat(a))).toggle=function(){e.props.toggle()},e}return(0,s.default)(t,e),(0,a.default)(t,[{key:"render",value:function(){return(0,f.jsxs)(l.A,{className:"seahub-io-dialog",isOpen:!0,toggle:this.toggle,children:[(0,f.jsx)(h.A,{toggle:this.toggle,children:(0,d.AP)("Exporting")}),(0,f.jsx)(c.A,{children:(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(u.A,{}),(0,f.jsx)("div",{className:"seahub-io-dialog-parsing-text",children:(0,d.AP)("Exporting...")})]})})]})}}])}(o.Component);t.A=g},15097:function(e,t,i){var n=i(23029),a=i(92901),r=i(39874),s=i(85501),o=i(9950),l=i(8081),c=i(10877),d=i(39708),u=i(79969),h=i(91646),f=i(65488),g=i(6754),p=i(34322),m=i(4086),v=i(40326),x=i(65604),y=i(43825),b=i(2662),A=i(20338),_=i(44414),k=function(e){function t(e){var i;return(0,n.default)(this,t),(i=(0,r.default)(this,t,[e])).onKeyDown=function(e){"Enter"===e.key&&(i.handleSubmit(),e.preventDefault())},i.handleChange=function(e){i.setState({departName:e.target.value},(function(){i.setState({isSubmitBtnActive:!!i.state.departName.trim()})}))},i.handleSubmit=function(){var e=(0,x.yS)(i.state.departName.trim());if(e.isValid){var t=i.props,n=t.orgID,a=t.parentNode,r=a?a.id:-1,s=i.state.departName.trim();(n?b.k.orgAdminAddDepartGroup(n,r,s):y.H.sysAdminAddNewDepartment(r,s)).then((function(e){a?i.props.addDepartment(a,e.data):i.props.setRootNode(e.data),i.props.toggle()})).catch((function(e){var t=x.Aq.getErrorMsg(e);m.A.danger(t)}))}else i.setState({errMessage:e.message})},i.state={departName:"",isSubmitBtnActive:!1},i}return(0,s.default)(t,e),(0,a.default)(t,[{key:"render",value:function(){var e,t=this.props.parentNode,i=this.state.isSubmitBtnActive;return e=t?(0,v.AP)("Add department at")+" "+t.name:(0,v.AP)("Create top department"),(0,_.jsxs)(l.A,{isOpen:!0,toggle:this.props.toggle,autoFocus:!1,children:[(0,_.jsx)(A.A,{toggle:this.props.toggle,children:e}),(0,_.jsx)(c.A,{children:(0,_.jsx)(d.A,{children:(0,_.jsxs)(u.A,{children:[(0,_.jsx)(h.A,{for:"departmentName",children:(0,v.AP)("Name")}),(0,_.jsx)(f.A,{id:"departmentName",name:"department-name",onKeyDown:this.onKeyDown,value:this.state.departName,onChange:this.handleChange,autoFocus:!0})]})})}),(0,_.jsxs)(g.A,{children:[(0,_.jsx)(p.A,{color:"secondary",onClick:this.props.toggle,children:(0,v.AP)("Cancel")}),(0,_.jsx)(p.A,{color:"primary",onClick:this.handleSubmit,disabled:!i,children:(0,v.AP)("Submit")})]})]})}}])}(o.Component);t.A=k},47150:function(e,t,i){var n=i(23029),a=i(92901),r=i(39874),s=i(85501),o=i(9950),l=i(8081),c=i(10877),d=i(6754),u=i(34322),h=i(40326),f=i(20338),g=i(44414),p=function(e){function t(){return(0,n.default)(this,t),(0,r.default)(this,t,arguments)}return(0,s.default)(t,e),(0,a.default)(t,[{key:"render",value:function(){var e=this.props,t=e.node,i=e.toggle;return(0,g.jsxs)(l.A,{isOpen:!0,toggle:i,children:[(0,g.jsx)(f.A,{toggle:i,children:(0,h.AP)("Delete department")}),(0,g.jsx)(c.A,{children:(0,g.jsxs)("p",{children:[(0,h.AP)("Are you sure to delete")," ",(0,g.jsx)("b",{children:t.name})," ?"]})}),(0,g.jsxs)(d.A,{children:[(0,g.jsx)(u.A,{color:"secondary",onMouseDown:i,children:(0,h.AP)("Cancel")}),(0,g.jsx)(u.A,{color:"primary",onMouseDown:this.props.onDelete,children:(0,h.AP)("Delete")})]})]})}}])}(o.Component);t.A=p},77474:function(e,t,i){var n=i(23029),a=i(92901),r=i(39874),s=i(85501),o=i(9950),l=i(8081),c=i(10877),d=i(39708),u=i(79969),h=i(91646),f=i(65488),g=i(6754),p=i(34322),m=i(4086),v=i(40326),x=i(65604),y=i(43825),b=i(2662),A=i(20338),_=i(44414),k=function(e){function t(e){var i;return(0,n.default)(this,t),(i=(0,r.default)(this,t,[e])).onKeyDown=function(e){"Enter"===e.key&&(i.handleSubmit(),e.preventDefault())},i.handleChange=function(e){var t=e.target.value;i.setState({departName:t},(function(){i.setState({isSubmitBtnActive:!!i.state.departName.trim()})}))},i.handleSubmit=function(){var e=(0,x.yS)(i.state.departName.trim());if(e.isValid){var t=i.props,n=t.node,a=t.orgID,r=i.state.departName.trim();(a?b.k.orgAdminUpdateDepartGroup(a,n.id,r):y.H.sysAdminRenameDepartment(n.id,r)).then((function(e){i.props.renameDepartment(n,e.data),i.props.toggle()})).catch((function(e){var t=x.Aq.getErrorMsg(e);m.A.danger(t)}))}else i.setState({errMessage:e.message})},i.state={departName:e.node.name,isSubmitBtnActive:!1},i}return(0,s.default)(t,e),(0,a.default)(t,[{key:"render",value:function(){var e=this.state.isSubmitBtnActive;return(0,_.jsxs)(l.A,{isOpen:!0,toggle:this.props.toggle,autoFocus:!1,children:[(0,_.jsx)(A.A,{toggle:this.props.toggle,children:(0,v.AP)("Rename")}),(0,_.jsx)(c.A,{children:(0,_.jsx)(d.A,{children:(0,_.jsxs)(u.A,{children:[(0,_.jsx)(h.A,{for:"departmentName",children:(0,v.AP)("Name")}),(0,_.jsx)(f.A,{id:"departmentName",name:"department-name",onKeyDown:this.onKeyDown,value:this.state.departName,onChange:this.handleChange,autoFocus:!0})]})})}),(0,_.jsxs)(g.A,{children:[(0,_.jsx)(p.A,{color:"secondary",onClick:this.props.toggle,children:(0,v.AP)("Cancel")}),(0,_.jsx)(p.A,{color:"primary",onClick:this.handleSubmit,disabled:!e,children:(0,v.AP)("Submit")})]})]})}}])}(o.Component);t.A=k},685:function(e,t,i){i.d(t,{A:function(){return b}});var n=i(23029),a=i(92901),r=i(39874),s=i(85501),o=i(9950),l=i(8081),c=i(10877),d=i(6754),u=i(34322),h=i(4086),f=i(40326),g=i(43825),p=i(2662),m=i(65604),v=i(98361),x=i(20338),y=i(44414),b=function(e){function t(e){var i;return(0,n.default)(this,t),(i=(0,r.default)(this,t,[e])).handleSelectChange=function(e){i.setState({selectedUsers:e})},i.handleSubmit=function(){var e=i.state.selectedUsers.map((function(e){return e.email}));if(0!==e.length){i.setState({errMessage:""});var t=i.props,n=t.nodeId,a=t.orgID;(a?p.k.orgAdminAddGroupMember(a,n,e):g.H.sysAdminAddGroupMember(n,e)).then((function(e){i.setState({selectedUsers:[]}),e.data.failed.length>0&&i.setState({errMsgs:e.data.failed.map((function(e){return e.error_msg}))}),e.data.success.length>0&&(i.props.onMemberChanged(),i.props.toggle())})).catch((function(e){var t=m.Aq.getErrorMsg(e);h.A.danger(t)}))}},i.state={selectedUsers:[],errMsgs:""},i}return(0,s.default)(t,e),(0,a.default)(t,[{key:"render",value:function(){var e=this.state.errMsgs;return(0,y.jsxs)(l.A,{isOpen:!0,toggle:this.props.toggle,children:[(0,y.jsx)(x.A,{toggle:this.props.toggle,children:(0,f.AP)("Add members")}),(0,y.jsxs)(c.A,{children:[(0,y.jsx)(v.A,{placeholder:(0,f.AP)("Search users"),onSelectChange:this.handleSelectChange,isMulti:!0,selectedUsers:this.state.selectedUsers}),e.length>0&&(0,y.jsx)("ul",{className:"list-unstyled",children:e.map((function(e,t){return(0,y.jsx)("li",{className:"error mt-2",children:e},t)}))})]}),(0,y.jsxs)(d.A,{children:[(0,y.jsx)(u.A,{color:"secondary",onClick:this.props.toggle,children:(0,f.AP)("Cancel")}),(0,y.jsx)(u.A,{color:"primary",onClick:this.handleSubmit,children:(0,f.AP)("Submit")})]})]})}}])}(o.Component)},96763:function(e,t,i){var n=i(23029),a=i(92901),r=i(39874),s=i(85501),o=i(9950),l=i(40326),c=i(8081),d=i(10877),u=i(6754),h=i(34322),f=i(20338),g=i(44414),p=function(e){function t(e){var i;return(0,n.default)(this,t),(i=(0,r.default)(this,t,[e])).handleInputChange=function(e){i.setState({inputChecked:e.target.checked})},i.unlinkDevice=function(){i.props.toggleDialog(),i.props.unlinkDevice(i.state.inputChecked)},i.state={inputChecked:!1},i}return(0,s.default)(t,e),(0,a.default)(t,[{key:"render",value:function(){var e=this.state.inputChecked,t=this.props.toggleDialog;return(0,g.jsxs)(c.A,{isOpen:!0,toggle:t,children:[(0,g.jsx)(f.A,{toggle:t,children:(0,l.AP)("Unlink device")}),(0,g.jsxs)(d.A,{children:[(0,g.jsx)("p",{children:(0,l.AP)("Are you sure you want to unlink this device?")}),l.am&&(0,g.jsxs)("div",{className:"d-flex align-items-center",children:[(0,g.jsx)("input",{id:"delete-files",className:"mr-1",type:"checkbox",checked:e,onChange:this.handleInputChange}),(0,g.jsx)("label",{htmlFor:"delete-files",className:"m-0",children:(0,l.AP)("Delete files from this device the next time it comes online.")})]})]}),(0,g.jsxs)(u.A,{children:[(0,g.jsx)(h.A,{color:"secondary",onClick:t,children:(0,l.AP)("Cancel")}),(0,g.jsx)(h.A,{color:"primary",onClick:this.unlinkDevice,children:(0,l.AP)("Unlink")})]})]})}}])}(o.Component);t.A=p},7039:function(e,t,i){i.d(t,{A:function(){return N}});var n=i(23029),a=i(92901),r=i(39874),s=i(85501),o=i(9950),l=i(4086),c=i(34322),d=i(35077),u=i(3898),h=i(65488),f=i(8081),g=i(10877),p=i(6754),m=i(40326),v=i(65604),x=i(90287),y=i(58801),b=function(){return(0,a.default)((function e(){(0,n.default)(this,e)}),[{key:"init",value:function(e){var t=e.server,i=e.username,n=e.password,a=e.token;return this.server=t,this.username=i,this.password=n,this.token=a,this.token&&this.server&&(this.req=x.A.create({baseURL:this.server,headers:{Authorization:"Token "+this.token}})),this}},{key:"initForSeahubUsage",value:function(e){var t=e.siteRoot,i=e.xcsrfHeaders;if(t&&"/"===t.charAt(t.length-1)){var n=t.substring(0,t.length-1);this.server=n}else this.server=t;return this.req=x.A.create({headers:{"X-CSRFToken":i}}),this}},{key:"getSubscription",value:function(){var e=this.server+"/api/v2.1/subscription/";return this.req.get(e)}},{key:"getSubscriptionPlans",value:function(e){var t=this.server+"/api/v2.1/subscription/plans/",i={payment_type:e};return this.req.get(t,{params:i})}},{key:"getSubscriptionLogs",value:function(){var e=this.server+"/api/v2.1/subscription/logs/";return this.req.get(e)}}])}(),A=new b,_=y.Ay.load("sfcsrftoken");A.initForSeahubUsage({siteRoot:m.Yc,xcsrfHeaders:_});var k=i(9961),j=i(20338),w=(i(16322),i(44414)),S=window.app.pageOptions.isOrgContext,D=function(e){function t(e){var i;return(0,n.default)(this,t),(i=(0,r.default)(this,t,[e])).togglePlan=function(e){i.setState({currentPlan:e},(function(){}))},i.onPay=function(){var e,t,n,a=i.props.paymentType,r=i.state,s=r.currentPlan,o=r.assetQuotaUnitCount,c=r.count;if("paid"===a)n=s.count,e=s.total_amount;else if("extend_time"===a)n=s.count,t=s.asset_quota,e=s.total_amount;else if("add_user"===a)n=c,e=c*s.price_per_user;else{if("buy_quota"!==a)return void l.A.danger((0,m.AP)("Internal Server Error"));t=o*s.asset_quota_unit,e=o*s.price_per_asset_quota_unit}i.props.onPay(s.plan_id,n,t,e)},i.onCountInputChange=function(e){if(i.state.currentPlan.can_custom_count){var t=e.target.value.replace(/^(0+)|[^\d]+/g,"");t<1?t=1:t>9999&&(t=9999),i.setState({count:t})}},i.onAssetQuotaUnitCountInputChange=function(e){if(i.state.currentPlan.can_custom_asset_quota){var t=e.target.value.replace(/^(0+)|[^\d]+/g,"");t<1?t=1:t>9999&&(t=9999),i.setState({assetQuotaUnitCount:t})}},i.renderPaidOrExtendTime=function(){var e=i.props,t=e.plans,n=e.paymentType,a=i.state.currentPlan,r=0;"extend_time"===n&&(r=a.asset_quota-100);var s=a.total_amount,l=s;return(0,w.jsxs)("div",{className:"d-flex flex-column subscription-container",children:[(0,w.jsx)("span",{className:"subscription-subtitle",children:"\u9009\u62e9\u65b9\u6848"}),(0,w.jsx)("dl",{className:"items-dl",children:t.map((function(e,t){var n=e.plan_id===a.plan_id?"plan-selected":"",r="\uffe5"+e.price_per_user;return S&&(r+="/\u6bcf\u7528\u6237"),(0,w.jsxs)("dd",{className:"plan-description-item ".concat(n),onClick:i.togglePlan.bind(i,e),children:[(0,w.jsx)("span",{className:"plan-name",children:e.name}),(0,w.jsx)("span",{className:"plan-description",children:r})]},t)}))}),"extend_time"===n&&r>0&&(0,w.jsxs)(o.Fragment,{children:[(0,w.jsx)("span",{className:"subscription-subtitle",children:"\u589e\u52a0\u7a7a\u95f4"}),(0,w.jsx)("dl",{className:"items-dl",children:(0,w.jsxs)("dd",{className:"order-item order-item-top order-item-bottom subscription-list",children:[(0,w.jsx)("span",{className:"order-into",children:a.asset_quota_unit+"GB x "+r/a.asset_quota_unit}),(0,w.jsx)("span",{className:"order-value",children:"\uffe5"+r/a.asset_quota_unit*a.price_per_asset_quota_unit})]})})]}),(0,w.jsx)("span",{className:"subscription-subtitle",children:"\u65b9\u6848\u6c47\u603b"}),(0,w.jsx)("dl",{className:"items-dl",children:(0,w.jsxs)("div",{children:[(0,w.jsxs)("dd",{className:"order-item order-item-top",children:[(0,w.jsx)("span",{className:"order-into",children:"\u6240\u9009\u65b9\u6848"}),(0,w.jsx)("span",{className:"order-value",children:a.name})]}),S&&(0,w.jsxs)("dd",{className:"order-item",children:[(0,w.jsx)("span",{className:"order-into",children:"\u6210\u5458\u4eba\u6570"}),(0,w.jsx)("span",{className:"order-value",children:a.count+"\u4eba"})]}),(0,w.jsxs)("dd",{className:"order-item",children:[(0,w.jsx)("span",{className:"order-into",children:"\u53ef\u7528\u7a7a\u95f4"}),(0,w.jsx)("span",{className:"order-value",children:"100GB(\u9644\u8d60)"+(r>0?"+"+r+"GB(\u6269\u5145)":"")})]}),(0,w.jsxs)("dd",{className:"order-item order-item-bottom rounded-0",children:[(0,w.jsx)("span",{className:"order-into",children:"\u5230\u671f\u65f6\u95f4"}),(0,w.jsx)("span",{className:"order-value",children:a.new_term_end})]}),(0,w.jsxs)("dd",{className:"order-item order-item-bottom subscription-list",children:[(0,w.jsx)("span",{className:"order-into",children:"\u5b9e\u9645\u652f\u4ed8\u91d1\u989d"}),(0,w.jsxs)("span",{className:"order-price",children:[l!==s&&(0,w.jsx)("span",{style:{fontSize:"small",textDecoration:"line-through",color:"#9a9a9a"},children:"\uffe5"+l}),(0,w.jsx)("span",{children:"\uffe5"+s+" "})]})]})]})}),(0,w.jsx)(c.A,{className:"subscription-submit",color:"primary",onClick:i.onPay,children:"\u63d0\u4ea4\u8ba2\u5355"})]})},i.renderAddUser=function(){var e=i.state,t=e.currentPlan,n=e.count,a="\u65b0\u589e\u7528\u6237",r=n*t.price_per_user,s=r;return(0,w.jsxs)("div",{className:"d-flex flex-column subscription-container price-version-container-header subscription-add-user",children:[(0,w.jsx)("div",{className:"price-version-container-top"}),(0,w.jsx)("h3",{className:"user-quota-plan-name py-5",children:t.name}),(0,w.jsxs)("span",{className:"py-2 mb-0 text-orange font-500 text-center",children:["\xa5 ",(0,w.jsx)("span",{className:"price-version-plan-price",children:t.price})," "+t.description]}),(0,w.jsxs)(d.A,{style:{marginBottom:"5px"},className:"user-numbers",children:[(0,w.jsx)(u.A,{children:a}),(0,w.jsx)(h.A,{className:"py-2",placeholder:a,title:a,type:"number",value:n||1,min:"1",max:"9999",disabled:!t.can_custom_count,onChange:i.onCountInputChange})]}),(0,w.jsxs)("span",{className:"py-2 text-orange mb-0 font-500 price-version-plan-whole-price text-center",children:["\u603b\u4ef7 \xa5 "+s,r!==s&&(0,w.jsx)("span",{style:{fontSize:"small",textDecoration:"line-through",color:"#9a9a9a"},children:" \uffe5"+r})]}),(0,w.jsx)("span",{className:"py-2 mb-0 text-lg-size font-500 price-version-plan-valid-day text-center",children:"\u6709\u6548\u671f\u81f3 "+t.new_term_end}),(0,w.jsx)("span",{className:"subscription-notice text-center py-5",children:"\u6ce8\uff1a\u5f53\u6709\u6548\u671f\u5269\u4f59\u5929\u6570\u5c11\u4e8e\u8ba1\u5212\u4e2d\u7684\u65f6\u5019\uff0c\u589e\u52a0\u7528\u6237\u7684\u4ef7\u683c\u6309\u5929\u6765\u8ba1\u7b97"}),(0,w.jsx)(c.A,{className:"subscription-submit",onClick:i.onPay,color:"primary",children:"\u7acb\u5373\u8d2d\u4e70"})]})},i.renderBuyQuota=function(){var e=i.state,t=e.currentPlan,n=e.assetQuotaUnitCount,a="\u65b0\u589e\u7a7a\u95f4",r=n*t.price_per_asset_quota_unit,s=r;return(0,w.jsxs)("div",{className:"d-flex flex-column subscription-container price-version-container-header subscription-add-space",children:[(0,w.jsx)("div",{className:"price-version-container-top"}),(0,w.jsx)("h3",{className:"user-quota-plan-name py-5",children:t.name}),(0,w.jsxs)("span",{className:"py-2 mb-0 text-orange font-500 text-center",children:["\xa5 ",(0,w.jsx)("span",{className:"price-version-plan-price",children:t.asset_quota_price})," "+t.asset_quota_description]}),(0,w.jsxs)(d.A,{style:{marginBottom:"5px"},className:"space-quota",children:[(0,w.jsx)(u.A,{children:(0,w.jsx)("span",{className:"font-500",children:a})}),(0,w.jsx)(h.A,{className:"py-2",placeholder:a,title:a,type:"number",value:n||1,min:"1",max:"9999",disabled:!t.can_custom_asset_quota,onChange:i.onAssetQuotaUnitCountInputChange}),(0,w.jsx)(u.A,{children:(0,w.jsx)("span",{className:"font-500",children:" x "+t.asset_quota_unit+"GB"})})]}),(0,w.jsxs)("span",{className:"py-4 text-orange mb-0 font-500 price-version-plan-whole-price text-center",children:["\u603b\u4ef7 \xa5 "+s,r!==s&&(0,w.jsx)("span",{style:{fontSize:"small",textDecoration:"line-through",color:"#9a9a9a"},children:" \uffe5"+r})]}),(0,w.jsx)("span",{className:"py-2 mb-0 text-lg-size font-500 price-version-plan-valid-day text-center",children:"\u6709\u6548\u671f\u81f3 "+t.new_term_end}),(0,w.jsx)("span",{className:"subscription-notice text-center py-5",children:"\u6ce8\uff1a\u5f53\u6709\u6548\u671f\u5269\u4f59\u5929\u6570\u5c11\u4e8e\u8ba1\u5212\u4e2d\u7684\u65f6\u5019\uff0c\u589e\u52a0\u7a7a\u95f4\u7684\u4ef7\u683c\u6309\u5929\u6765\u8ba1\u7b97"}),(0,w.jsx)(c.A,{className:"subscription-submit",onClick:i.onPay,color:"primary",children:"\u7acb\u5373\u8d2d\u4e70"})]})},i.state={currentPlan:e.plans[0],assetQuotaUnitCount:1,count:1},i}return(0,s.default)(t,e),(0,a.default)(t,[{key:"render",value:function(){var e=this.props.paymentType;return"paid"===e||"extend_time"===e?this.renderPaidOrExtendTime():"add_user"===e?this.renderAddUser():"buy_quota"===e?this.renderBuyQuota():void l.A.danger((0,m.AP)("Internal Server Error"))}}])}(o.Component),P=function(e){function t(e){var i;return(0,n.default)(this,t),(i=(0,r.default)(this,t,[e])).getPlans=function(){A.getSubscriptionPlans(i.props.paymentType).then((function(e){i.setState({planList:e.data.plan_list,paymentSourceList:e.data.payment_source_list,isLoading:!1})})).catch((function(e){var t=v.Aq.getErrorMsg(e);i.setState({isLoading:!1,errorMsg:t})}))},i.onPay=function(e,t,n,a){i.setState({isWaiting:!0});var r=m.xW+"/subscription/pay/?payment_source="+i.state.paymentSourceList[0]+"&payment_type="+i.props.paymentType+"&plan_id="+e+"&total_amount="+a;t&&(r+="&count="+t),n&&(r+="&asset_quota="+n),window.open(r)},i.onReload=function(){window.location.reload()},i.state={isLoading:!0,isWaiting:!1,planList:[],paymentSourceList:[]},i}return(0,s.default)(t,e),(0,a.default)(t,[{key:"componentDidMount",value:function(){this.getPlans()}},{key:"render",value:function(){var e=this.state,t=e.isLoading,i=e.isWaiting,n=e.planList,a=this.props,r=a.toggleDialog,s=a.paymentTypeTrans,o=a.paymentType,l="paid"===o||"extend_time"===o?{width:"560px",maxWidth:"560px"}:{width:"560px"};return t?(0,w.jsxs)(f.A,{isOpen:!0,toggle:r,children:[(0,w.jsx)(j.A,{toggle:r,children:s}),(0,w.jsx)(g.A,{children:(0,w.jsx)(k.A,{})})]}):i?(0,w.jsxs)(f.A,{isOpen:!0,toggle:this.onReload,children:[(0,w.jsx)(j.A,{toggle:this.onReload,children:s}),(0,w.jsx)(g.A,{children:(0,w.jsx)("div",{children:"\u662f\u5426\u5b8c\u6210\u4ed8\u6b3e?"})}),(0,w.jsx)(p.A,{children:(0,w.jsx)("button",{className:"btn btn-outline-primary",onClick:this.onReload,children:"\u662f"})})]}):(0,w.jsxs)(f.A,{isOpen:!0,toggle:r,style:l,children:[(0,w.jsx)(j.A,{toggle:r,children:s}),(0,w.jsx)(g.A,{children:(0,w.jsx)("div",{className:"d-flex justify-content-between",children:(0,w.jsx)(D,{plans:n,onPay:this.onPay,paymentType:this.props.paymentType})})})]})}}])}(o.Component),M=function(e){function t(e){var i;return(0,n.default)(this,t),(i=(0,r.default)(this,t,[e])).getSubscription=function(){A.getSubscription().then((function(e){var t=e.data.subscription,n=e.data.payment_type_list;if(t){var a=t.is_active,r=t.plan;i.setState({isLoading:!1,subscription:t,planName:r.name,userLimit:t.user_limit,assetQuota:a?t.asset_quota:r.asset_quota,termEnd:a?t.term_end:"\u5df2\u8fc7\u671f",paymentTypeList:n})}else i.setState({isLoading:!1,paymentTypeList:n})})).catch((function(e){var t=v.Aq.getErrorMsg(e);i.setState({isLoading:!1,errorMsg:t})}))},i.toggleDialog=function(){i.setState({isDialogOpen:!i.state.isDialogOpen})},i.togglePaymentType=function(e){i.setState({currentPaymentType:e}),i.toggleDialog()},i.paymentTypeTransMap={paid:"\u7acb\u5373\u8d2d\u4e70",extend_time:"\u7acb\u5373\u7eed\u8d39",add_user:"\u589e\u52a0\u7528\u6237",buy_quota:"\u589e\u52a0\u7a7a\u95f4"},i.state={isLoading:!0,errorMsg:"",isDialogOpen:!1,planName:i.props.isOrgContext?"\u56e2\u961f\u7248":"\u4e2a\u4eba\u7248",userLimit:20,assetQuota:1,termEnd:"\u957f\u671f",subscription:null,paymentTypeList:[],currentPaymentType:"",errorMsgCode:""},i}return(0,s.default)(t,e),(0,a.default)(t,[{key:"componentDidMount",value:function(){this.getSubscription()}},{key:"render",value:function(){var e=this,t=this.state,i=t.isLoading,n=t.errorMsg,a=t.planName,r=t.userLimit,s=t.assetQuota,l=t.termEnd,c=t.isDialogOpen,d=t.paymentTypeList,u=t.currentPaymentType;return i?(0,w.jsx)(k.A,{}):n?(0,w.jsx)("p",{className:"text-center mt-8 error",children:n}):(0,w.jsxs)(o.Fragment,{children:[(0,w.jsxs)("div",{className:"content position-relative",onScroll:this.props.handleContentScroll,children:[(0,w.jsxs)("div",{id:"current-plan",className:"subscription-info",children:[(0,w.jsx)("h3",{className:"subscription-info-heading",children:"\u5f53\u524d\u7248\u672c"}),(0,w.jsx)("p",{className:"mb-2",children:a})]}),this.props.isOrgContext&&(0,w.jsxs)("div",{id:"user-limit",className:"subscription-info",children:[(0,w.jsx)("h3",{className:"subscription-info-heading",children:"\u7528\u6237\u6570\u9650\u5236"}),(0,w.jsx)("p",{className:"mb-2",children:r})]}),(0,w.jsxs)("div",{id:"asset-quota",className:"subscription-info",children:[(0,w.jsx)("h3",{className:"subscription-info-heading",children:"\u7a7a\u95f4"}),(0,w.jsx)("p",{className:"mb-2",children:s?s+"GB":"1GB"})]}),(0,w.jsxs)("div",{id:"current-subscription-period",className:"subscription-info",children:[(0,w.jsx)("h3",{className:"subscription-info-heading",children:"\u8ba2\u9605\u6709\u6548\u671f"}),(0,w.jsx)("p",{className:"mb-2",children:l})]}),(0,w.jsxs)("div",{id:"product-price",className:"subscription-info",children:[(0,w.jsx)("h3",{className:"subscription-info-heading",children:"\u4e91\u670d\u52a1\u4ed8\u8d39\u65b9\u6848"}),(0,w.jsx)("p",{className:"mb-2",children:(0,w.jsx)("a",{rel:"noopener noreferrer",target:"_blank",href:"https://www.seafile.com/seafile-docs/home/",children:"\u67e5\u770b\u8be6\u60c5"})})]}),d.map((function(t,i){var n=e.paymentTypeTransMap[t];return(0,w.jsx)("button",{className:"btn btn-outline-primary mr-4",onClick:e.togglePaymentType.bind(e,t),children:n},i)})),!this.state.subscription&&(0,w.jsxs)("div",{id:"sales-consultant",className:"subscription-info mt-6",children:[(0,w.jsx)("h3",{className:"subscription-info-heading",children:"\u9500\u552e\u54a8\u8be2"}),(0,w.jsx)("img",{className:"mb-2",src:"/media/img/qr-sale.png",alt:"",width:"112"}),(0,w.jsx)("p",{className:"mb-2",children:"\u5fae\u4fe1\u626b\u7801\u8054\u7cfb\u9500\u552e"})]})]}),c&&(0,w.jsx)(P,{paymentType:u,paymentTypeTrans:this.paymentTypeTransMap[u],isOrgContext:this.props.isOrgContext,toggleDialog:this.toggleDialog})]})}}])}(o.Component),N=M},83970:function(e,t,i){var n=i(23029),a=i(92901),r=i(39874),s=i(85501),o=i(9950),l=i(65488),c=i(8123),d=i(44414),u=function(e){function t(e){var i;return(0,n.default)(this,t),(i=(0,r.default)(this,t,[e])).onInputChange=function(e){var t=e.target.checked,n=t?1:0;i.setState({inputChecked:t}),i.props.saveSetting(i.props.keyText,n)},i.state={inputChecked:i.props.value},i}return(0,s.default)(t,e),(0,a.default)(t,[{key:"render",value:function(){var e=this.state.inputChecked,t=this.props,i=t.helpTip,n=t.displayName;return(0,d.jsx)(c.A,{displayName:n,mainClassName:"d-flex",mainContent:(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(l.A,{className:"ml-0",checked:e,type:"checkbox",onChange:this.onInputChange}),(0,d.jsx)("p",{className:"ml-2",children:i})]})})}}])}(o.Component);t.A=u},15263:function(e,t,i){var n=i(9950),a=i(34322),r=i(40326),s=i(8123),o=i(44414);t.A=function(e){var t=(0,n.useRef)(null),i=e.helpTip,l=e.filePath,c=e.fileWidth,d=e.fileHeight,u=e.displayName;return(0,o.jsx)(s.A,{displayName:u,helpTip:i,mainContent:(0,o.jsx)("img",{src:l+"?t="+(new Date).getTime(),alt:u,width:c,height:d,className:"mb-1"}),extraContent:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(a.A,{color:"secondary",onClick:function(){t.current.click()},children:(0,r.AP)("Change")}),(0,o.jsx)("input",{className:"d-none",type:"file",onChange:function(){if(t.current.files.length){var i=t.current.files[0];e.postFile(i,e.keyText)}},ref:t})]})})}},72714:function(e,t,i){i(9950);var n=i(44414);t.A=function(e){var t=e.headingText,i=e.children;return(0,n.jsxs)("div",{className:"mb-4",children:[(0,n.jsx)("h4",{className:"border-bottom font-weight-normal mb-2 pb-1",children:t}),i]})}},8123:function(e,t,i){i(9950);var n=i(97176),a=i(46114),r=i(91646),s=i(44414);t.A=function(e){var t=e.helpTip,i=e.displayName,o=e.mainContent,l=e.extraContent,c=e.mainClassName,d=void 0===c?"":c;return(0,s.jsxs)(n.A,{className:"my-4",children:[(0,s.jsx)(a.A,{md:"3",children:(0,s.jsx)(r.A,{className:"web-setting-label",children:i})}),(0,s.jsxs)(a.A,{md:"5",className:d,children:[o,t&&(0,s.jsx)("p",{className:"small text-secondary mt-1",children:t})]}),(0,s.jsx)(a.A,{md:"4",children:l})]})}},91298:function(e,t,i){var n=i(23029),a=i(92901),r=i(39874),s=i(85501),o=i(9950),l=i(1352),c=i(14894),d=i(67818),u=i(66945),h=i(40326),f=i(49403),g=i(95754),p=i(44414),m=function(e){function t(){var e;(0,n.default)(this,t);for(var i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return(e=(0,r.default)(this,t,[].concat(a))).getActiveClass=function(t){return e.props.currentTab==t?"active":""},e.tabItemClick=function(t){e.props.tabItemClick(t)},e}return(0,s.default)(t,e),(0,a.default)(t,[{key:"render",value:function(){var e=this;return(0,p.jsxs)("div",{className:"side-panel ".concat(this.props.isSidePanelClosed?"":"left-zero"),children:[(0,p.jsx)("div",{className:"side-panel-north",children:(0,p.jsx)(f.A,{onCloseSidePanel:this.props.onCloseSidePanel})}),(0,p.jsx)("div",{className:"side-panel-center",children:(0,p.jsx)("div",{className:"side-nav",children:(0,p.jsxs)("div",{className:"side-nav-con",children:[(0,p.jsx)("h3",{className:"sf-heading",style:{color:"#f7941d"},children:(0,h.AP)("Admin")}),(0,p.jsxs)("ul",{className:"nav nav-pills flex-column nav-container",children:[(0,p.jsx)("li",{className:"nav-item ".concat(this.getActiveClass("info")),children:(0,p.jsxs)(c.N_,{className:"nav-link ellipsis ".concat(this.getActiveClass("info")),to:h.Yc+"org/info/",onClick:function(){return e.tabItemClick("info")},children:[(0,p.jsx)("span",{className:"sf2-icon-info"}),(0,p.jsx)("span",{className:"nav-text",children:(0,h.AP)("Info")})]})}),(0,p.jsx)("li",{className:"nav-item ".concat(this.getActiveClass("statistics-admin")),children:(0,p.jsxs)(c.N_,{className:"nav-link ellipsis ".concat(this.getActiveClass("statistics-admin")),to:h.Yc+"org/statistics-admin/file/",onClick:function(){return e.tabItemClick("statistics-admin")},children:[(0,p.jsx)("span",{className:"sf2-icon-histogram"}),(0,p.jsx)("span",{className:"nav-text",children:(0,h.AP)("Statistic")})]})}),(0,p.jsx)("li",{className:"nav-item ".concat(this.getActiveClass("deviceadmin")),children:(0,p.jsxs)(c.N_,{className:"nav-link ellipsis ".concat(this.getActiveClass("deviceadmin")),to:h.Yc+"org/deviceadmin/desktop-devices/",onClick:function(){return e.tabItemClick("deviceadmin")},children:[(0,p.jsx)("span",{className:"sf2-icon-monitor"}),(0,p.jsx)("span",{className:"nav-text",children:(0,h.AP)("Devices")})]})}),(0,p.jsx)("li",{className:"nav-item ".concat(this.getActiveClass("web-settings")),children:(0,p.jsxs)(c.N_,{className:"nav-link ellipsis ".concat(this.getActiveClass("web-settings")),to:h.Yc+"org/web-settings/",onClick:function(){return e.tabItemClick("web-settings")},children:[(0,p.jsx)("span",{className:"sf2-icon-cog2"}),(0,p.jsx)("span",{className:"nav-text",children:(0,h.AP)("Settings")})]})}),(0,p.jsx)("li",{className:"nav-item ".concat(this.getActiveClass("repoadmin")),children:(0,p.jsxs)(c.N_,{className:"nav-link ellipsis ".concat(this.getActiveClass("repoadmin")),to:h.Yc+"org/repoadmin/",onClick:function(){return e.tabItemClick("repoadmin")},children:[(0,p.jsx)("span",{className:"sf2-icon-library"}),(0,p.jsx)("span",{className:"nav-text",children:(0,h.AP)("Libraries")})]})}),(0,p.jsx)("li",{className:"nav-item ".concat(this.getActiveClass("users")),children:(0,p.jsxs)(c.N_,{className:"nav-link ellipsis ".concat(this.getActiveClass("users")||this.getActiveClass("admins")),to:h.Yc+"org/useradmin/",onClick:function(){return e.tabItemClick("users")},children:[(0,p.jsx)("span",{className:"sf2-icon-user"}),(0,p.jsx)("span",{className:"nav-text",children:(0,h.AP)("Users")})]})}),(0,p.jsx)("li",{className:"nav-item ".concat(this.getActiveClass("groupadmin")),children:(0,p.jsxs)(c.N_,{className:"nav-link ellipsis ".concat(this.getActiveClass("groupadmin")),to:h.Yc+"org/groupadmin/",onClick:function(){return e.tabItemClick("groupadmin")},children:[(0,p.jsx)("span",{className:"sf2-icon-group"}),(0,p.jsx)("span",{className:"nav-text",children:(0,h.AP)("Groups")})]})}),(0,p.jsx)("li",{className:"nav-item ".concat(this.getActiveClass("departmentadmin")),children:(0,p.jsxs)(c.N_,{className:"nav-link ellipsis ".concat(this.getActiveClass("departmentadmin")),to:h.Yc+"org/departmentadmin/",onClick:function(){return e.tabItemClick("departmentadmin")},children:[(0,p.jsx)("span",{className:"sf2-icon-organization"}),(0,p.jsx)("span",{className:"nav-text",children:(0,h.AP)("Departments")})]})}),h.n6&&(0,p.jsx)("li",{className:"nav-item ".concat(this.getActiveClass("subscription")),children:(0,p.jsxs)(c.N_,{className:"nav-link ellipsis ".concat(this.getActiveClass("subscription")),to:h.Yc+"org/subscription/",onClick:function(){return e.tabItemClick("subscription")},children:[(0,p.jsx)(g.A,{symbol:"currency"}),(0,p.jsx)("span",{className:"nav-text",children:"\u4ed8\u8d39\u7ba1\u7406"})]})}),h.RV&&(0,p.jsx)("li",{className:"nav-item ".concat(this.getActiveClass("billing")),children:(0,p.jsxs)("a",{href:h.Yc+"billing/",target:"_blank",rel:"noreferrer",className:"nav-link",children:[(0,p.jsx)(g.A,{symbol:"currency"}),(0,p.jsx)("span",{className:"nav-text",children:(0,h.AP)("Billing")})]})}),(0,p.jsx)("li",{className:"nav-item ".concat(this.getActiveClass("publinkadmin")),children:(0,p.jsxs)(c.N_,{className:"nav-link ellipsis ".concat(this.getActiveClass("publinkadmin")),to:h.Yc+"org/publinkadmin/",onClick:function(){return e.tabItemClick("publinkadmin")},children:[(0,p.jsx)("span",{className:"sf2-icon-link"}),(0,p.jsx)("span",{className:"nav-text",children:(0,h.AP)("Links")})]})}),(0,p.jsx)("li",{className:"nav-item ".concat(this.getActiveClass("fileaudit")||this.getActiveClass("file-update")||this.getActiveClass("perm-audit")),children:(0,p.jsxs)(c.N_,{className:"nav-link ellipsis ".concat(this.getActiveClass("fileaudit")||this.getActiveClass("file-update")||this.getActiveClass("perm-audit")),to:h.Yc+"org/logadmin/",onClick:function(){return e.tabItemClick("fileaudit")},children:[(0,p.jsx)("span",{className:"sf2-icon-clock"}),(0,p.jsx)("span",{className:"nav-text",children:(0,h.AP)("Logs")})]})}),h.bH&&(0,p.jsx)("li",{className:"nav-item ".concat(this.getActiveClass("SAML config")),children:(0,p.jsxs)(c.N_,{className:"nav-link ellipsis ".concat(this.getActiveClass("SAML config")),to:h.Yc+"org/samlconfig/",onClick:function(){return e.tabItemClick("SAML config")},children:[(0,p.jsx)("span",{className:"sf2-icon-cog2"}),(0,p.jsx)("span",{className:"nav-text",children:(0,h.AP)("SAML config")})]})})]})]})})})]})}}])}(o.Component),v=m,x=i(4159),y=i.n(x),b=i(51925),A=function(e){function t(){return(0,n.default)(this,t),(0,r.default)(this,t,arguments)}return(0,s.default)(t,e),(0,a.default)(t,[{key:"render",value:function(){return(0,p.jsxs)("div",{className:"main-panel-north ".concat(this.props.children?"border-left-show":""),children:[(0,p.jsxs)("div",{className:"cur-view-toolbar",children:[(0,p.jsx)("span",{className:"sf2-icon-menu side-nav-toggle hidden-md-up d-md-none",title:"Side Nav Menu"}),(0,p.jsx)("div",{className:"operation",children:this.props.children})]}),(0,p.jsxs)("div",{className:"common-toolbar",children:[this.props.search&&this.props.search,(0,p.jsx)(b.A,{isAdminPanel:!0})]})]})}}])}(o.Component),_=A,k=function(e){function t(e){var i;return(0,n.default)(this,t),(i=(0,r.default)(this,t,[e])).navItems=[{name:"fileStatistic",urlPart:"statistics-admin/file",text:(0,h.AP)("File")},{name:"storageStatistic",urlPart:"statistics-admin/total-storage",text:(0,h.AP)("Storage")},{name:"usersStatistic",urlPart:"statistics-admin/active-users",text:(0,h.AP)("Users")},{name:"trafficStatistic",urlPart:"statistics-admin/traffic",text:(0,h.AP)("Traffic")},{name:"reportsStatistic",urlPart:"statistics-admin/reports",text:(0,h.AP)("Reports")}],i}return(0,s.default)(t,e),(0,a.default)(t,[{key:"render",value:function(){var e=this.props.currentItem;return(0,p.jsx)("div",{className:"cur-view-path tab-nav-container",children:(0,p.jsx)("ul",{className:"nav",children:this.navItems.map((function(t,i){return(0,p.jsx)("li",{className:"nav-item",children:(0,p.jsx)(c.N_,{to:"".concat(h.Yc,"org/").concat(t.urlPart,"/"),className:"nav-link".concat(e==t.name?" active":""),children:t.text})},i)}))})})}}])}(o.Component),j=i(64467),w=i(29343),S=i(34322),D=i(52544),P=i(86547),M=i.n(P),N=i(81139),C=(i(33731),i(9516),i(19617),"YYYY-MM-DD"),I=function(e){function t(e){var i;(0,n.default)(this,t),i=(0,r.default)(this,t,[e]);var a=window.app.config.lang,s=y()();return s="zh-cn"===a?s.locale("zh-cn"):s.locale("en-gb"),i.defaultCalendarValue=s.clone(),i}return(0,s.default)(t,e),(0,a.default)(t,[{key:"render",value:function(){var e=this.props,t=(0,p.jsx)(D.A,{defaultValue:this.defaultCalendarValue,disabledDate:e.disabledDate,format:C,locale:(0,N.r)()});return(0,p.jsx)(M(),{calendar:t,value:e.value,onChange:e.onChange,children:function(e){var t=e.value;return(0,p.jsx)("span",{children:(0,p.jsx)("input",{placeholder:"yyyy-mm-dd",tabIndex:"-1",readOnly:!0,value:t&&t.format(C)||"",className:"form-control system-statistic-input"})})}})}}])}(o.Component),O=function(e){function t(e){var i;return(0,n.default)(this,t),(i=(0,r.default)(this,t,[e])).changeActive=function(e){if(i.state.statisticType!==e){var t,n=y()().format("YYYY-MM-DD 00:00:00");switch(e){case"oneWeek":t=y()().subtract(6,"d").format("YYYY-MM-DD 00:00:00");break;case"oneMonth":t=y()().subtract(29,"d").format("YYYY-MM-DD 00:00:00");break;case"oneYear":t=y()().subtract(364,"d").format("YYYY-MM-DD 00:00:00")}i.setState({statisticType:e});i.props.getActiviesFiles(t,n,"day")}},i.disabledStartDate=function(e){if(!e)return!1;var t=y()().format(),n=i.state.endValue;return n?n.isBefore(e)||y()(e).format()>t:t<y()(e).format()},i.disabledEndDate=function(e){if(!e)return!1;var t=y()().format(),n=i.state.startValue;return n?e.isBefore(n)||y()(e).format()>t:t<y()(e).format()},i.onChange=function(e,t){i.setState((0,j.default)({},e,t))},i.onSubmit=function(){var e=i.state,t=e.startValue,n=e.endValue;if(t&&n){i.setState({statisticType:"itemButton"});var a=y()(t).format("YYYY-MM-DD 00:00:00"),r=y()(n).format("YYYY-MM-DD 00:00:00");i.props.getActiviesFiles(a,r,"day")}},i.state={statisticType:"oneWeek",startValue:null,endValue:null},i}return(0,s.default)(t,e),(0,a.default)(t,[{key:"componentDidMount",value:function(){var e=y()().format("YYYY-MM-DD 00:00:00"),t=y()().subtract(6,"d").format("YYYY-MM-DD 00:00:00");this.props.getActiviesFiles(t,e,"day")}},{key:"render",value:function(){var e=this.state,t=e.statisticType,i=e.endValue,n=e.startValue;return(0,p.jsxs)(o.Fragment,{children:[this.props.children,(0,p.jsxs)("div",{className:"system-statistic-time-range",children:[(0,p.jsxs)(w.A,{size:"sm",className:"sys-stat-tool",children:[(0,p.jsx)(S.A,{className:"font-weight-normal ".concat("oneWeek"===t?"item-active":""),onClick:this.changeActive.bind(this,"oneWeek"),children:(0,h.AP)("7 Days")}),(0,p.jsx)(S.A,{className:"font-weight-normal ".concat("oneMonth"===t?"item-active":""),onClick:this.changeActive.bind(this,"oneMonth"),children:(0,h.AP)("30 Days")}),(0,p.jsx)(S.A,{className:"font-weight-normal ".concat("oneYear"===t?"item-active":""),onClick:this.changeActive.bind(this,"oneYear"),children:(0,h.AP)("1 Year")})]}),(0,p.jsxs)("div",{className:"system-statistic-input-container",children:[(0,p.jsx)(I,{disabledDate:this.disabledStartDate,value:n,onChange:this.onChange.bind(this,"startValue")}),(0,p.jsx)("span",{className:"system-statistic-connect",children:"-"}),(0,p.jsx)(I,{disabledDate:this.disabledEndDate,value:i,onChange:this.onChange.bind(this,"endValue")}),(0,p.jsx)(S.A,{color:"primary",size:"sm",className:"system-statistic-button",onClick:this.onSubmit,children:(0,h.AP)("Submit")})]})]})]})}}])}(o.Component),L=i(2662),T=i(35298),R=i(66187),E=i(65604),F=i(9961);T.t1.register(T.PP,T.kc,T.FN,T.No,T.hE,T.m_,T.s$);var z=function(e){function t(e){var i;return(0,n.default)(this,t),(i=(0,r.default)(this,t,[e])).titleCallback=function(e,t){return t.datasets[e.datasetIndex].label+": "+E.Aq.bytesToSize(e.yLabel)},i.ticksCallback=function(e,t,i){return E.Aq.bytesToSize(e)},i.state={data:{},options:{}},i}return(0,s.default)(t,e),(0,a.default)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.labels,i=e.filesData,n=e.isTitleCallback,a=e.isTicksCallback,r=e.suggestedMaxNumbers,s=e.isLegendStatus,o=e.chartTitle,l=this,c={labels:t,datasets:i},d={plugins:{title:{display:!0,font:{weight:"bold",size:20},align:"center",text:o,color:"#666"}},elements:{line:{fill:!1,tension:0,borderWidth:2}},legend:{display:s,labels:{usePointStyle:!0}},tooltips:{callbacks:{label:function(e,t){return n?l.titleCallback(e,t):t.datasets[e.datasetIndex].label+": "+e.yLabel}}},layout:{padding:{right:100}},scales:{y:{display:!0,beginAtZero:!0,suggestedMax:r,ticks:{callback:function(e,t,i){return a?l.ticksCallback(e,t,i):e}}},x:{display:!0,ticks:{maxTicksLimit:20}}}};this.setState({data:c,options:d})}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t={labels:e.labels,datasets:e.filesData};this.setState({data:t})}},{key:"render",value:function(){var e=this.state,t=e.data,i=e.options;return 0===Object.keys(t).length&&0===Object.keys(i).length?(0,p.jsx)(F.A,{}):(0,p.jsx)(p.Fragment,{children:(0,p.jsx)(R.N1,{data:t,options:i})})}}])}(o.Component),U=i(4086),B=(i(63864),function(e){function t(e){var i;return(0,n.default)(this,t),(i=(0,r.default)(this,t,[e])).getActiviesFiles=function(e,t,n){var a=i.state.filesData;L.k.orgAdminStatisticFiles(h.Id,e,t,n).then((function(e){var t=[],n=[],r=[],s=[],o=[],l=e.data;if(Array.isArray(l)){l.forEach((function(e){t.push(y()(e.datetime).format("YYYY-MM-DD")),n.push(e.added),r.push(e.deleted),o.push(e.modified),s.push(e.visited)}));var c={label:(0,h.AP)("Added"),data:n,borderColor:"#57cd6b",backgroundColor:"#57cd6b"},d={label:(0,h.AP)("Visited"),data:s,borderColor:"#fd913a",backgroundColor:"#fd913a"},u={label:(0,h.AP)("Modified"),data:o,borderColor:"#72c3fc",backgroundColor:"#72c3fc"},f={label:(0,h.AP)("Deleted"),data:r,borderColor:"#f75356",backgroundColor:"#f75356"};a=[d,c,u,f]}i.setState({filesData:a,labels:t,isLoading:!1})})).catch((function(e){var t=E.Aq.getErrorMsg(e);U.A.danger(t)}))},i.state={filesData:[],labels:[],isLoading:!0},i}return(0,s.default)(t,e),(0,a.default)(t,[{key:"render",value:function(){var e=this.state,t=e.labels,i=e.filesData,n=e.isLoading;return(0,p.jsxs)(o.Fragment,{children:[(0,p.jsx)(_,{}),(0,p.jsxs)("div",{className:"cur-view-container",children:[(0,p.jsx)(k,{currentItem:"fileStatistic"}),(0,p.jsxs)("div",{className:"cur-view-content",children:[(0,p.jsx)(O,{getActiviesFiles:this.getActiviesFiles}),n&&(0,p.jsx)(F.A,{}),!n&&t.length>0&&(0,p.jsx)(z,{labels:t,filesData:i,suggestedMaxNumbers:10,isLegendStatus:!0,chartTitle:(0,h.AP)("File Operations")})]})]})]})}}])}(o.Component)),Y=function(e){function t(e){var i;return(0,n.default)(this,t),(i=(0,r.default)(this,t,[e])).getActiviesFiles=function(e,t,n){var a=i.state.filesData;L.k.orgAdminStatisticStorages(h.Id,e,t,n).then((function(e){var t=[],n=[],r=e.data;if(Array.isArray(r)){r.forEach((function(e){t.push(y()(e.datetime).format("YYYY-MM-DD")),n.push(e.total_storage)}));var s={label:(0,h.AP)("Total Storage"),data:n,borderColor:"#fd913a",backgroundColor:"#fd913a"};a=[s]}i.setState({filesData:a,labels:t,isLoading:!1})})).catch((function(e){var t=E.Aq.getErrorMsg(e);U.A.danger(t)}))},i.state={filesData:[],labels:[],isLoading:!0},i}return(0,s.default)(t,e),(0,a.default)(t,[{key:"render",value:function(){var e=this.state,t=e.labels,i=e.filesData,n=e.isLoading;return(0,p.jsxs)(o.Fragment,{children:[(0,p.jsx)(_,{}),(0,p.jsxs)("div",{className:"cur-view-container",children:[(0,p.jsx)(k,{currentItem:"storageStatistic"}),(0,p.jsxs)("div",{className:"cur-view-content",children:[(0,p.jsx)(O,{getActiviesFiles:this.getActiviesFiles}),n&&(0,p.jsx)(F.A,{}),!n&&t.length>0&&(0,p.jsx)(z,{labels:t,filesData:i,suggestedMaxNumbers:1e7,isTitleCallback:!0,isTicksCallback:!0,isLegendStatus:!1,chartTitle:(0,h.AP)("Total Storage")})]})]})]})}}])}(o.Component),V=i(65488),q=function(e){function t(e){return(0,n.default)(this,t),(0,r.default)(this,t,[e])}return(0,s.default)(t,e),(0,a.default)(t,[{key:"render",value:function(){var e=this.props,t=e.type,i=e.sortBy,n="asc"==e.sortOrder?(0,p.jsx)("span",{className:"sf3-font sf3-font-down rotate-180 d-inline-block"}):(0,p.jsx)("span",{className:"sf3-font sf3-font-down"});return(0,p.jsxs)("table",{className:"table-hover",children:[(0,p.jsx)("thead",{children:(0,p.jsxs)("tr",{children:[(0,p.jsx)("th",{width:"16%",children:"user"==t?(0,h.AP)("User"):(0,h.AP)("Organization")}),(0,p.jsx)("th",{width:"11%",children:(0,p.jsxs)("div",{className:"d-block table-sort-op cursor-pointer",onClick:this.props.sortItems.bind(this,"sync_file_upload"),children:[(0,h.AP)("Sync Upload")," ","sync_file_upload"===i&&n]})}),(0,p.jsx)("th",{width:"14%",children:(0,p.jsxs)("div",{className:"d-block table-sort-op cursor-pointer",onClick:this.props.sortItems.bind(this,"sync_file_download"),children:[(0,h.AP)("Sync Download")," ","sync_file_download"===i&&n]})}),(0,p.jsx)("th",{width:"11%",children:(0,p.jsxs)("div",{className:"d-block table-sort-op cursor-pointer",onClick:this.props.sortItems.bind(this,"web_file_upload"),children:[(0,h.AP)("Web Upload")," ","web_file_upload"===i&&n]})}),(0,p.jsx)("th",{width:"14%",children:(0,p.jsxs)("div",{className:"d-block table-sort-op cursor-pointer",onClick:this.props.sortItems.bind(this,"web_file_download"),children:[(0,h.AP)("Web Download")," ","web_file_download"===i&&n]})}),(0,p.jsx)("th",{width:"17%",children:(0,p.jsxs)("div",{className:"d-block table-sort-op cursor-pointer",onClick:this.props.sortItems.bind(this,"link_file_upload"),children:[(0,h.AP)("Share link upload")," ","link_file_upload"===i&&n]})}),(0,p.jsx)("th",{width:"17%",children:(0,p.jsxs)("div",{className:"d-block table-sort-op cursor-pointer",onClick:this.props.sortItems.bind(this,"link_file_download"),children:[(0,h.AP)("Share link download")," ","link_file_download"===i&&n]})})]})}),(0,p.jsx)("tbody",{children:this.props.children})]})}}])}(o.Component),H=function(e){function t(){var e;(0,n.default)(this,t);for(var i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return(e=(0,r.default)(this,t,[].concat(a))).trafficName=function(){var t=e.props,i=t.userTrafficItem;switch(t.type){case"user":return i.name?(0,p.jsx)("a",{href:h.Yc+"org/useradmin/info/"+i.email+"/",children:i.name}):(0,p.jsx)("span",{children:"--"});case"org":return(0,p.jsx)("span",{children:i.org_name})}},e}return(0,s.default)(t,e),(0,a.default)(t,[{key:"render",value:function(){var e=this.props.userTrafficItem,t=E.Aq.bytesToSize(e.sync_file_upload),i=E.Aq.bytesToSize(e.sync_file_download),n=E.Aq.bytesToSize(e.web_file_upload),a=E.Aq.bytesToSize(e.web_file_download),r=E.Aq.bytesToSize(e.link_file_upload),s=E.Aq.bytesToSize(e.link_file_download);return(0,p.jsxs)("tr",{children:[(0,p.jsx)("td",{children:this.trafficName()}),(0,p.jsx)("td",{children:t}),(0,p.jsx)("td",{children:i}),(0,p.jsx)("td",{children:n}),(0,p.jsx)("td",{children:a}),(0,p.jsx)("td",{children:r}),(0,p.jsx)("td",{children:s})]})}}])}(o.Component),W=H,G=i(62376),Q=function(e){function t(e){var i;return(0,n.default)(this,t),(i=(0,r.default)(this,t,[e])).getPreviousPage=function(){i.getTrafficList(i.state.month,i.state.currentPage-1)},i.getNextPage=function(){i.getTrafficList(i.state.month,i.state.currentPage+1)},i.handleChange=function(e){var t=e.target.value;i.setState({month:t})},i.handleKeyPress=function(e){var t=i.state.month;if("Enter"===e.key){if(!/^([012]\d{3})(0[1-9]|1[012])$/.test(t)){var n=(0,h.AP)("Invalid month, should be yyyymm.");return void i.setState({errorMessage:n})}i.getTrafficList(t,i.initPage),e.target.blur(),e.preventDefault()}},i.getTrafficList=function(e,t){var n=i.state,a=n.perPage,r=n.sortBy,s=n.sortOrder,o="asc"==s?r:"".concat(r,"_").concat(s);i.setState({isLoading:!0,errorMessage:""}),L.k.orgAdminListUserTraffic(h.Id,e,t,a,o).then((function(n){var a=n.data.user_monthly_traffic_list.slice(0);i.setState({month:e,currentPage:t,userTrafficList:a,hasNextPage:n.data.has_next_page,isLoading:!1})})).catch((function(e){var t=E.Aq.getErrorMsg(e);U.A.danger(t)}))},i.sortItems=function(e){i.setState({sortBy:e,sortOrder:"asc"==i.state.sortOrder?"desc":"asc"},(function(){var e=i.state,t=e.month,n=e.currentPage;i.getTrafficList(t,n)}))},i.resetPerPage=function(e){i.setState({perPage:e},(function(){return i.getTrafficList(i.initMonth,i.initPage)}))},i.state={userTrafficList:[],hasNextPage:!1,perPage:100,currentPage:1,month:y()().format("YYYYMM"),isLoading:!1,errorMessage:"",sortBy:"link_file_download",sortOrder:"desc"},i.initPage=1,i.initMonth=y()().format("YYYYMM"),i}return(0,s.default)(t,e),(0,a.default)(t,[{key:"componentDidMount",value:function(){var e=this,t=new URL(window.location).searchParams,i=this.state,n=i.currentPage,a=i.perPage;this.setState({perPage:parseInt(t.get("per_page")||a),currentPage:parseInt(t.get("page")||n)},(function(){e.getTrafficList(e.initMonth,e.state.currentPage)}))}},{key:"render",value:function(){var e=this.state,t=e.isLoading,i=e.errorMessage,n=e.userTrafficList,a=e.currentPage,r=e.hasNextPage,s=e.perPage,l=e.sortBy,c=e.sortOrder;return(0,p.jsxs)(o.Fragment,{children:[(0,p.jsxs)("div",{className:"d-flex align-items-center mt-4",children:[(0,p.jsx)("span",{className:"statistic-reports-tip",children:(0,h.AP)("Month:")}),(0,p.jsx)(V.A,{className:"statistic-reports-input",defaultValue:y()().format("YYYYMM"),onChange:this.handleChange,onKeyPress:this.handleKeyPress}),i&&(0,p.jsx)("div",{className:"error",children:i})]}),t&&(0,p.jsx)(F.A,{}),!t&&(0,p.jsx)(q,{type:"user",sortItems:this.sortItems,sortBy:l,sortOrder:c,children:n.length>0&&n.map((function(e,t){return(0,p.jsx)(W,{userTrafficItem:e,type:"user"},t)}))}),(0,p.jsx)(G.A,{gotoPreviousPage:this.getPreviousPage,gotoNextPage:this.getNextPage,currentPage:a,hasNextPage:r,curPerPage:s,resetPerPage:this.resetPerPage})]})}}])}(o.Component),X=function(e){function t(e){var i;return(0,n.default)(this,t),(i=(0,r.default)(this,t,[e])).changeTabActive=function(e){i.setState({tabActive:e})},i.getActiviesFiles=function(e,t,n){L.k.orgAdminStatisticSystemTraffic(h.Id,e,t,n).then((function(e){var t=[],n=[],a=[],r=[],s=[],o=[],l=[],c=[],d=[],u=e.data;if(Array.isArray(u)){u.forEach((function(e){t.push(y()(e.datetime).format("YYYY-MM-DD")),r.push(e["link-file-upload"]),s.push(e["link-file-download"]),o.push(e["sync-file-upload"]),l.push(e["sync-file-download"]),c.push(e["web-file-upload"]),d.push(e["web-file-download"]),n.push(e["link-file-upload"]+e["sync-file-upload"]+e["web-file-upload"]),a.push(e["link-file-download"]+e["sync-file-download"]+e["web-file-download"])}));var f=[{label:(0,h.AP)("Upload"),data:r,borderColor:"#fd913a",backgroundColor:"#fd913a"},{label:(0,h.AP)("Download"),data:s,borderColor:"#57cd6b",backgroundColor:"#57cd6b"}],g=[{label:(0,h.AP)("Upload"),data:o,borderColor:"#fd913a",backgroundColor:"#fd913a"},{label:(0,h.AP)("Download"),data:l,borderColor:"#57cd6b",backgroundColor:"#57cd6b"}],p=[{label:(0,h.AP)("Upload"),data:c,borderColor:"#fd913a",backgroundColor:"#fd913a"},{label:(0,h.AP)("Download"),data:d,borderColor:"#57cd6b",backgroundColor:"#57cd6b"}],m=[{label:(0,h.AP)("Upload"),data:n,borderColor:"#fd913a",backgroundColor:"#fd913a"},{label:(0,h.AP)("Download"),data:a,borderColor:"#57cd6b",backgroundColor:"#57cd6b"}];i.setState({linkData:f,syncData:g,webData:p,filesData:m,labels:t,isLoading:!1})}})).catch((function(e){var t=E.Aq.getErrorMsg(e);U.A.danger(t)}))},i.renderCommonTool=function(){var e=i.state.tabActive;return"system"===e?(0,p.jsx)(O,{getActiviesFiles:i.getActiviesFiles,children:(0,p.jsxs)("div",{className:"statistic-traffic-tab",children:[(0,p.jsx)("div",{className:"statistic-traffic-tab-item ".concat("system"===e?"active":""),onClick:i.changeTabActive.bind(i,"system"),children:(0,h.AP)("System")}),(0,p.jsx)("div",{className:"statistic-traffic-tab-item ".concat("user"===e?"active":""),onClick:i.changeTabActive.bind(i,"user"),children:(0,h.AP)("Users")})]})}):(0,p.jsxs)("div",{className:"statistic-traffic-tab",children:[(0,p.jsx)("div",{className:"statistic-traffic-tab-item ".concat("system"===e?"active":""),onClick:i.changeTabActive.bind(i,"system"),children:(0,h.AP)("System")}),(0,p.jsx)("div",{className:"statistic-traffic-tab-item ".concat("user"===e?"active":""),onClick:i.changeTabActive.bind(i,"user"),children:(0,h.AP)("Users")})]})},i.state={filesData:[],linkData:[],syncData:[],webData:[],labels:[],isLoading:!0,tabActive:"system"},i}return(0,s.default)(t,e),(0,a.default)(t,[{key:"render",value:function(){var e=this.state,t=e.labels,i=e.filesData,n=e.linkData,a=e.syncData,r=e.webData,s=e.isLoading,l=e.tabActive;return(0,p.jsxs)(o.Fragment,{children:[(0,p.jsx)(_,{}),(0,p.jsxs)("div",{className:"cur-view-container",children:[(0,p.jsx)(k,{currentItem:"trafficStatistic"}),(0,p.jsxs)("div",{className:"cur-view-content",children:[this.renderCommonTool(),s&&(0,p.jsx)(F.A,{}),!s&&"system"===l&&(0,p.jsxs)("div",{className:"statistic-traffic-chart-container",children:[(0,p.jsx)("div",{className:"mb-4",children:t.length>0&&(0,p.jsx)(z,{labels:t,filesData:i,chartTitle:(0,h.AP)("Total Traffic"),suggestedMaxNumbers:1e7,isTitleCallback:!0,isTicksCallback:!0,isLegendStatus:!0})}),(0,p.jsx)("div",{className:"mb-4",children:t.length>0&&(0,p.jsx)(z,{labels:t,filesData:r,chartTitle:(0,h.AP)("Web Traffic"),suggestedMaxNumbers:1e7,isTitleCallback:!0,isTicksCallback:!0,isLegendStatus:!0})}),(0,p.jsx)("div",{className:"mb-4",children:t.length>0&&(0,p.jsx)(z,{labels:t,filesData:n,chartTitle:(0,h.AP)("Share Link Traffic"),suggestedMaxNumbers:1e7,isTitleCallback:!0,isTicksCallback:!0,isLegendStatus:!0})}),(0,p.jsx)("div",{className:"mb-4",children:t.length>0&&(0,p.jsx)(z,{labels:t,filesData:a,chartTitle:(0,h.AP)("Sync Traffic"),suggestedMaxNumbers:1e7,isTitleCallback:!0,isTicksCallback:!0,isLegendStatus:!0})})]}),!s&&"user"===l&&(0,p.jsx)(Q,{})]})]})]})}}])}(o.Component),K=function(e){function t(e){var i;return(0,n.default)(this,t),(i=(0,r.default)(this,t,[e])).getActiviesFiles=function(e,t,n){var a=i.state.filesData;L.k.orgAdminStatisticActiveUsers(h.Id,e,t,n).then((function(e){var t=[],n=[],r=e.data;if(Array.isArray(r)){r.forEach((function(e){t.push(y()(e.datetime).format("YYYY-MM-DD")),n.push(e.count)}));var s={label:(0,h.AP)("Active Users"),data:n,borderColor:"#fd913a",backgroundColor:"#fd913a"};a=[s]}i.setState({filesData:a,labels:t,isLoading:!1})})).catch((function(e){var t=E.Aq.getErrorMsg(e);U.A.danger(t)}))},i.state={filesData:[],labels:[],isLoading:!0},i}return(0,s.default)(t,e),(0,a.default)(t,[{key:"render",value:function(){var e=this.state,t=e.labels,i=e.filesData,n=e.isLoading;return(0,p.jsxs)(o.Fragment,{children:[(0,p.jsx)(_,{}),(0,p.jsxs)("div",{className:"cur-view-container",children:[(0,p.jsx)(k,{currentItem:"usersStatistic"}),(0,p.jsxs)("div",{className:"cur-view-content",children:[(0,p.jsx)(O,{getActiviesFiles:this.getActiviesFiles}),n&&(0,p.jsx)(F.A,{}),!n&&t.length>0&&(0,p.jsx)(z,{labels:t,filesData:i,suggestedMaxNumbers:10,isLegendStatus:!1,chartTitle:(0,h.AP)("Active Users")})]})]})]})}}])}(o.Component),$=function(e){function t(e){var i;return(0,n.default)(this,t),(i=(0,r.default)(this,t,[e])).handleChange=function(e){var t=e.target.value;i.setState({month:t})},i.onGenerateReports=function(e){var t=h.Yc+"api/v2.1/org/"+h.Id+"/admin/statistics/",n=i.state.month;if(n){if("month"===e){if(!/^([012]\d{3})(0[1-9]|1[012])$/.test(n)){var a=(0,h.AP)("Invalid month, should be yyyymm.");return void i.setState({errorMessage:a})}}switch(e){case"month":t+="user-traffic/excel/?month="+n;break;case"storage":t+="user-storage/excel/?"}i.setState({errorMessage:""}),window.location.href=new URL(t)}else{var r=(0,h.AP)("It is required.");i.setState({errorMessage:r})}},i.state={month:y()().format("YYYYMM"),errorMessage:""},i}return(0,s.default)(t,e),(0,a.default)(t,[{key:"render",value:function(){var e=this.state.errorMessage;return(0,p.jsxs)(o.Fragment,{children:[(0,p.jsx)(_,{}),(0,p.jsxs)("div",{className:"cur-view-container",children:[(0,p.jsx)(k,{currentItem:"reportsStatistic"}),(0,p.jsxs)("div",{className:"cur-view-content",children:[(0,p.jsxs)("div",{className:"statistic-reports",children:[(0,p.jsx)("div",{className:"statistic-reports-title",children:(0,h.AP)("Monthly User Traffic")}),(0,p.jsxs)("div",{className:"d-flex align-items-center mt-4",children:[(0,p.jsx)("span",{className:"statistic-reports-tip",children:(0,h.AP)("Month:")}),(0,p.jsx)(V.A,{className:"statistic-reports-input",defaultValue:y()().format("YYYYMM"),onChange:this.handleChange}),(0,p.jsx)(S.A,{className:"statistic-reports-submit operation-item",onClick:this.onGenerateReports.bind(this,"month"),children:(0,h.AP)("Create Report")})]}),e&&(0,p.jsx)("div",{className:"error",children:e})]}),(0,p.jsxs)("div",{className:"statistic-reports",children:[(0,p.jsx)("div",{className:"statistic-reports-title",children:(0,h.AP)("User Storage")}),(0,p.jsx)(S.A,{className:"mt-4 operation-item",onClick:this.onGenerateReports.bind(this,"storage"),children:(0,h.AP)("Create Report")})]})]})]})]})}}])}(o.Component),Z=function(e){function t(e){var i;return(0,n.default)(this,t),(i=(0,r.default)(this,t,[e])).navItems=[{name:"desktop",urlPart:"desktop-devices",text:(0,h.AP)("Desktop")},{name:"mobile",urlPart:"mobile-devices",text:(0,h.AP)("Mobile")},{name:"errors",urlPart:"devices-errors",text:(0,h.AP)("Errors")}],i}return(0,s.default)(t,e),(0,a.default)(t,[{key:"render",value:function(){var e=this.props.currentItem;return(0,p.jsx)("div",{className:"cur-view-path tab-nav-container",children:(0,p.jsx)("ul",{className:"nav",children:this.navItems.map((function(t,i){return(0,p.jsx)("li",{className:"nav-item",children:(0,p.jsx)(c.N_,{to:"".concat(h.Yc,"org/deviceadmin/").concat(t.urlPart,"/"),className:"nav-link".concat(e==t.name?" active":""),children:t.text})},i)}))})})}}])}(o.Component),J=Z,ee=i(48738),te=i.n(ee),ie=i(37609),ne=i.n(ie),ae=i(43066),re=i(96763);y().extend(ne());var se=function(e){function t(e){var i;return(0,n.default)(this,t),(i=(0,r.default)(this,t,[e])).getPreviousPageDevicesList=function(){i.props.getDevicesListByPage(i.props.pageInfo.current_page-1)},i.getNextPageDevicesList=function(){i.props.getDevicesListByPage(i.props.pageInfo.current_page+1)},i}return(0,s.default)(t,e),(0,a.default)(t,[{key:"render",value:function(){var e=this.props,t=e.loading,i=e.errorMsg,n=e.items,a=e.pageInfo,r=e.curPerPage;if(t)return(0,p.jsx)(F.A,{});if(i)return(0,p.jsx)("p",{className:"error text-center",children:i});var s=(0,p.jsx)(ae.A,{text:(0,h.AP)("No connected devices")}),l=(0,p.jsxs)(o.Fragment,{children:[(0,p.jsxs)("table",{className:"table-hover",children:[(0,p.jsx)("thead",{children:(0,p.jsxs)("tr",{children:[(0,p.jsx)("th",{width:"19%",children:(0,h.AP)("User")}),(0,p.jsxs)("th",{width:"19%",children:[(0,h.AP)("Platform")," / ",(0,h.AP)("Version")]}),(0,p.jsx)("th",{width:"19%",children:(0,h.AP)("Device Name")}),(0,p.jsx)("th",{width:"19%",children:(0,h.AP)("IP")}),(0,p.jsx)("th",{width:"19%",children:(0,h.AP)("Last Access")}),(0,p.jsx)("th",{width:"5%"})]})}),(0,p.jsx)("tbody",{children:n.map((function(e,t){return(0,p.jsx)(oe,{item:e},t)}))})]}),(0,p.jsx)(G.A,{gotoPreviousPage:this.getPreviousPageDevicesList,gotoNextPage:this.getNextPageDevicesList,currentPage:a.current_page,hasNextPage:a.has_next_page,curPerPage:r,resetPerPage:this.props.resetPerPage})]});return n.length?l:s}}])}(o.Component),oe=function(e){function t(e){var i;return(0,n.default)(this,t),(i=(0,r.default)(this,t,[e])).handleMouseOver=function(){i.setState({isHighlighted:!0,isOpIconShown:!0})},i.handleMouseOut=function(){i.setState({isHighlighted:!1,isOpIconShown:!1})},i.handleUnlink=function(){i.props.item.is_desktop_client?i.toggleUnlinkDeviceDialog():i.unlinkDevice(!0)},i.toggleUnlinkDeviceDialog=function(){i.setState({isUnlinkDeviceDialogOpen:!i.state.isUnlinkDeviceDialogOpen})},i.unlinkDevice=function(e){var t=i.props.item,n=t.platform,a=t.device_id,r=t.user;L.k.orgAdminUnlinkDevice(h.Id,n,a,r,e).then((function(e){i.setState({unlinked:!0});var t=(0,h.AP)("Successfully unlinked the device.");U.A.success(t)})).catch((function(e){var t=E.Aq.getErrorMsg(e);U.A.danger(t)}))},i.state={isHighlighted:!1,unlinked:!1,isOpIconShown:!1,isUnlinkDeviceDialogOpen:!1},i}return(0,s.default)(t,e),(0,a.default)(t,[{key:"render",value:function(){var e=this.props.item,t=this.state,i=t.unlinked,n=t.isUnlinkDeviceDialogOpen,a=t.isOpIconShown,r=t.isHighlighted;return i?null:(0,p.jsxs)(o.Fragment,{children:[(0,p.jsxs)("tr",{className:te()({"tr-highlight":r}),onMouseEnter:this.handleMouseOver,onMouseLeave:this.handleMouseOut,children:[(0,p.jsx)("td",{children:e.user_name}),(0,p.jsxs)("td",{children:[e.platform," / ",e.client_version]}),(0,p.jsx)("td",{children:e.device_name}),(0,p.jsx)("td",{children:e.last_login_ip}),(0,p.jsx)("td",{children:(0,p.jsx)("span",{title:y()(e.last_accessed).format("dddd, MMMM D, YYYY h:mm:ss A"),children:y()(e.last_accessed).fromNow()})}),(0,p.jsx)("td",{children:(0,p.jsx)("i",{className:"sf3-font-delete1 sf3-font op-icon ".concat(a?"":"invisible"),title:(0,h.AP)("Unlink"),onClick:this.handleUnlink})})]}),n&&(0,p.jsx)(re.A,{unlinkDevice:this.unlinkDevice,toggleDialog:this.toggleUnlinkDeviceDialog})]})}}])}(o.Component),le=function(e){function t(e){var i;return(0,n.default)(this,t),(i=(0,r.default)(this,t,[e])).getDevicesListByPage=function(e){var t=i.props.devicesPlatform,n=i.state.perPage;L.k.orgAdminListDevices(h.Id,t,e,n).then((function(e){i.setState({devicesData:e.data.devices,pageInfo:e.data.page_info,loading:!1})})).catch((function(e){i.setState({loading:!1,errorMsg:E.Aq.getErrorMsg(e,!0)})}))},i.resetPerPage=function(e){i.setState({perPage:e},(function(){i.getDevicesListByPage(1)}))},i.state={loading:!0,errorMsg:"",devicesData:[],pageInfo:{},perPage:100},i}return(0,s.default)(t,e),(0,a.default)(t,[{key:"componentDidMount",value:function(){var e=this,t=new URL(window.location).searchParams,i=this.state,n=i.currentPage,a=void 0===n?1:n,r=i.perPage;this.setState({perPage:parseInt(t.get("per_page")||r),currentPage:parseInt(t.get("page")||a)},(function(){e.getDevicesListByPage(e.state.currentPage)}))}},{key:"render",value:function(){return(0,p.jsx)("div",{className:"cur-view-content",children:(0,p.jsx)(se,{loading:this.state.loading,errorMsg:this.state.errorMsg,items:this.state.devicesData,getDevicesListByPage:this.getDevicesListByPage,curPerPage:this.state.perPage,resetPerPage:this.resetPerPage,pageInfo:this.state.pageInfo})})}}])}(o.Component),ce=function(e){function t(e){return(0,n.default)(this,t),(0,r.default)(this,t,[e])}return(0,s.default)(t,e),(0,a.default)(t,[{key:"render",value:function(){return(0,p.jsxs)(o.Fragment,{children:[(0,p.jsx)(_,{}),(0,p.jsx)("div",{className:"main-panel-center flex-row",children:(0,p.jsxs)("div",{className:"cur-view-container",children:[(0,p.jsx)(J,{currentItem:"desktop"}),(0,p.jsx)(le,{devicesPlatform:"desktop"})]})})]})}}])}(o.Component),de=function(e){function t(e){return(0,n.default)(this,t),(0,r.default)(this,t,[e])}return(0,s.default)(t,e),(0,a.default)(t,[{key:"render",value:function(){return(0,p.jsxs)(o.Fragment,{children:[(0,p.jsx)(_,{}),(0,p.jsx)("div",{className:"main-panel-center flex-row",children:(0,p.jsxs)("div",{className:"cur-view-container",children:[(0,p.jsx)(J,{currentItem:"mobile"}),(0,p.jsx)(le,{devicesPlatform:"mobile"})]})})]})}}])}(o.Component),ue=function(e){function t(){return(0,n.default)(this,t),(0,r.default)(this,t,arguments)}return(0,s.default)(t,e),(0,a.default)(t,[{key:"render",value:function(){return(0,p.jsx)(c.N_,{to:"".concat(h.Yc,"org/useradmin/info/").concat(encodeURIComponent(this.props.email),"/"),children:this.props.name})}}])}(o.Component),he=ue;y().extend(ne());var fe=function(e){function t(e){var i;return(0,n.default)(this,t),(i=(0,r.default)(this,t,[e])).getPreviousPageDeviceErrorsList=function(){i.props.getDeviceErrorsListByPage(i.props.pageInfo.current_page-1)},i.getNextPageDeviceErrorsList=function(){i.props.getDeviceErrorsListByPage(i.props.pageInfo.current_page+1)},i}return(0,s.default)(t,e),(0,a.default)(t,[{key:"render",value:function(){var e=this.props,t=e.loading,i=e.errorMsg,n=e.items,a=e.pageInfo,r=e.curPerPage;if(t)return(0,p.jsx)(F.A,{});if(i)return(0,p.jsx)("p",{className:"error text-center",children:i});var s=(0,p.jsx)(ae.A,{text:(0,h.AP)("No sync errors")}),l=(0,p.jsxs)(o.Fragment,{children:[(0,p.jsxs)("table",{className:"table-hover",children:[(0,p.jsx)("thead",{children:(0,p.jsxs)("tr",{children:[(0,p.jsx)("th",{width:"16%",children:(0,h.AP)("User")}),(0,p.jsxs)("th",{width:"20%",children:[(0,h.AP)("Device")," / ",(0,h.AP)("Version")]}),(0,p.jsx)("th",{width:"16%",children:(0,h.AP)("IP")}),(0,p.jsx)("th",{width:"16%",children:(0,h.AP)("Library")}),(0,p.jsx)("th",{width:"16%",children:(0,h.AP)("Error")}),(0,p.jsx)("th",{width:"16%",children:(0,h.AP)("Time")})]})}),(0,p.jsx)("tbody",{children:n.map((function(e,t){return(0,p.jsx)(ge,{item:e},t)}))})]}),(0,p.jsx)(G.A,{gotoPreviousPage:this.getPreviousPageDeviceErrorsList,gotoNextPage:this.getNextPageDeviceErrorsList,currentPage:a.current_page,hasNextPage:a.has_next_page,curPerPage:r,resetPerPage:this.props.resetPerPage})]});return n.length?l:s}}])}(o.Component),ge=function(e){function t(e){var i;return(0,n.default)(this,t),(i=(0,r.default)(this,t,[e])).handleMouseOver=function(){i.setState({isOpIconShown:!0})},i.handleMouseOut=function(){i.setState({isOpIconShown:!1})},i.state={isOpIconShown:!1},i}return(0,s.default)(t,e),(0,a.default)(t,[{key:"render",value:function(){var e=this.props.item;return(0,p.jsxs)("tr",{onMouseEnter:this.handleMouseOver,onMouseLeave:this.handleMouseOut,children:[(0,p.jsx)("td",{children:(0,p.jsx)(he,{email:e.email,name:e.name})}),(0,p.jsxs)("td",{children:[e.device_name," / ",e.client_version]}),(0,p.jsx)("td",{children:e.device_ip}),(0,p.jsx)("td",{children:(0,p.jsx)(c.N_,{to:"".concat(h.Yc,"sysadmin/#libs/").concat(e.repo_id),children:e.repo_name})}),(0,p.jsx)("td",{children:e.error_msg}),(0,p.jsx)("td",{children:(0,p.jsx)("span",{className:"item-meta-info",title:y()(e.last_accessed).format("dddd, MMMM D, YYYY h:mm:ss A"),children:y()(e.error_time).fromNow()})})]})}}])}(o.Component),pe=function(e){function t(e){var i;return(0,n.default)(this,t),(i=(0,r.default)(this,t,[e])).getDeviceErrorsListByPage=function(e){var t=i.state.perPage;L.k.orgAdminListDevicesErrors(h.Id,e,t).then((function(e){i.setState({loading:!1,devicesErrors:e.data.device_errors,pageInfo:e.data.page_info,isCleanBtnShown:e.data.device_errors.length>0})})).catch((function(e){i.setState({loading:!1,errorMsg:E.Aq.getErrorMsg(e,!0)})}))},i.clean=function(){L.k.orgAdminClearDeviceErrors(h.Id).then((function(e){i.setState({devicesErrors:[],isCleanBtnShown:!1});var t=(0,h.AP)("Successfully cleaned all errors.");U.A.success(t)})).catch((function(e){var t=E.Aq.getErrorMsg(e);U.A.danger(t)}))},i.resetPerPage=function(e){i.setState({perPage:e},(function(){i.getDeviceErrorsListByPage(1)}))},i.state={loading:!0,errorMsg:"",devicesErrors:[],isCleanBtnShown:!1,pageInfo:{},perPage:100},i}return(0,s.default)(t,e),(0,a.default)(t,[{key:"componentDidMount",value:function(){var e=this,t=new URL(window.location).searchParams,i=this.state,n=i.currentPage,a=void 0===n?1:n,r=i.perPage;this.setState({perPage:parseInt(t.get("per_page")||r),currentPage:parseInt(t.get("page")||a)},(function(){e.getDeviceErrorsListByPage(e.state.currentPage)}))}},{key:"render",value:function(){return(0,p.jsxs)(o.Fragment,{children:[this.state.isCleanBtnShown?(0,p.jsx)(_,{children:(0,p.jsx)(S.A,{className:"operation-item",onClick:this.clean,children:(0,h.AP)("Clean")})}):(0,p.jsx)(_,{}),(0,p.jsx)("div",{className:"main-panel-center flex-row",children:(0,p.jsxs)("div",{className:"cur-view-container",children:[(0,p.jsx)(J,{currentItem:"errors"}),(0,p.jsx)("div",{className:"cur-view-content",children:(0,p.jsx)(fe,{loading:this.state.loading,errorMsg:this.state.errorMsg,items:this.state.devicesErrors,getDeviceErrorsListByPage:this.getDeviceErrorsListByPage,curPerPage:this.state.perPage,resetPerPage:this.resetPerPage,pageInfo:this.state.pageInfo})})]})})]})}}])}(o.Component),me=i(89379),ve=i(3898),xe=i(72714),ye=i(83970),be=i(15263),Ae=i(35077),_e=i(8123),ke=function(e){function t(e){var i;return(0,n.default)(this,t),(i=(0,r.default)(this,t,[e])).toggleBtns=function(){i.setState({isBtnsShown:!i.state.isBtnsShown})},i.hideBtns=function(e){i.state.isBtnsShown&&(i.props.value!=i.state.value&&i.setState({value:i.props.value}),i.toggleBtns())},i.onInputChange=function(e){i.setState({value:e.target.value})},i.onSubmit=function(e){var t=i.state.value.trim();t!=i.props.value&&i.props.saveSetting(i.props.keyText,t),i.toggleBtns()},i.state={isBtnsShown:!1,value:i.props.value},i}return(0,s.default)(t,e),(0,a.default)(t,[{key:"render",value:function(){var e=this.state,t=e.isBtnsShown,i=e.value,n=this.props,a=n.helpTip,r=n.displayName,s=n.inputType,l=n.disabled,c=n.inputAddon;return(0,p.jsx)(_e.A,{displayName:r,helpTip:a,mainContent:l?(0,p.jsx)(V.A,{type:s||"text",className:"textarea"==s?"web-setting-textarea":"",value:i,disabled:!0}):(0,p.jsxs)(Ae.A,{children:[(0,p.jsx)(V.A,{type:s||"text",className:"textarea"==s?"web-setting-textarea":"",onChange:this.onInputChange,onFocus:this.toggleBtns,onBlur:this.hideBtns,value:i}),c&&c]}),extraContent:t?(0,p.jsxs)(o.Fragment,{children:[(0,p.jsx)(S.A,{color:"primary",className:"sf2-icon-tick web-setting-icon-btn web-setting-icon-btn-submit",onMouseDown:this.onSubmit,title:(0,h.AP)("Submit")}),(0,p.jsx)(S.A,{className:"ml-1 sf2-icon-x2 web-setting-icon-btn web-setting-icon-btn-cancel",title:(0,h.AP)("Cancel")})]}):null})}}])}(o.Component),je=(i(37696),window.org.pageOptions),we=je.sysEnableUserCleanTrash,Se=je.sysEnableEncryptedLibrary,De=function(e){function t(e){var i;return(0,n.default)(this,t),(i=(0,r.default)(this,t,[e])).updateName=function(e,t){L.k.orgAdminUpdateName(h.Id,t).then((function(e){i.setState({config_dict:e.data}),U.A.success((0,h.AP)("Name updated"))})).catch((function(e){var t=E.Aq.getErrorMsg(e);U.A.danger(t)}))},i.updateLogo=function(e){L.k.orgAdminUpdateLogo(h.Id,e).then((function(e){i.setState({logoPath:e.data.logo_path}),U.A.success((0,h.AP)("Logo updated"))})).catch((function(e){var t=E.Aq.getErrorMsg(e);U.A.danger(t)}))},i.orgSaveSetting=function(e,t){L.k.orgAdminSetSysSettingInfo(h.Id,e,t).then((function(e){U.A.success((0,h.AP)("Setting updated"))})).catch((function(e){var t=E.Aq.getErrorMsg(e);U.A.danger(t)}))},i.orgUpdateUserDefaultQuota=function(e,t){L.k.orgAdminSetOrgUserDefaultQuota(h.Id,parseInt(t)).then((function(e){U.A.success((0,h.AP)("User default quota updated"))})).catch((function(e){var t=E.Aq.getErrorMsg(e);U.A.danger(t)}))},i.state={loading:!0,errorMsg:"",config_dict:null,logoPath:h.VI,file_ext_white_list:"",force_adfs_login:!1,disable_org_encrypted_library:!1,disable_org_user_clean_trash:!1,user_default_quota:0},i}return(0,s.default)(t,e),(0,a.default)(t,[{key:"componentDidMount",value:function(){var e=this;L.k.orgAdminGetOrgInfo().then((function(t){var i,n=t.data.user_default_quota;if(-1==n||0==n||n<0)i=0;else{var a=parseInt(Math.floor(Math.log(n)/Math.log(1e3)),10);i=n/Math.pow(1e3,a)}e.setState({loading:!1,config_dict:t.data,file_ext_white_list:t.data.file_ext_white_list,force_adfs_login:t.data.force_adfs_login,disable_org_encrypted_library:t.data.disable_org_encrypted_library,disable_org_user_clean_trash:t.data.disable_org_user_clean_trash,user_default_quota:i})})).catch((function(t){e.setState({loading:!1,errorMsg:E.Aq.getErrorMsg(t,!0)})}))}},{key:"render",value:function(){var e=this.state,t=e.loading,i=e.errorMsg,n=e.config_dict,a=e.file_ext_white_list,r=e.force_adfs_login,s=e.disable_org_encrypted_library,l=e.disable_org_user_clean_trash,c=e.user_default_quota,d=this.state.logoPath;return d=-1!=d.indexOf("image-view")?d:h.SG+d,(0,p.jsxs)(o.Fragment,{children:[(0,p.jsx)(_,(0,me.default)({},this.props)),(0,p.jsx)("div",{className:"main-panel-center flex-row",children:(0,p.jsxs)("div",{className:"cur-view-container",children:[(0,p.jsx)("div",{className:"cur-view-path",children:(0,p.jsx)("h3",{className:"sf-heading",children:(0,h.AP)("Settings")})}),(0,p.jsxs)("div",{className:"cur-view-content container mw-100",children:[t&&(0,p.jsx)(F.A,{}),i&&(0,p.jsx)("p",{className:"error text-center mt-4",children:i}),!t&&!i&&n&&(0,p.jsxs)(o.Fragment,{children:[(0,p.jsx)("p",{className:"small text-secondary my-4"}),(0,p.jsx)(xe.A,{headingText:(0,h.AP)("Info"),children:(0,p.jsxs)(o.Fragment,{children:[(0,p.jsx)(ke,{saveSetting:this.updateName,displayName:(0,h.AP)("Team name"),keyText:"orgName",value:n.org_name,helpTip:"",disabled:!h.$L}),h.XH&&(0,p.jsx)(be.A,{postFile:this.updateLogo,displayName:"Logo",keyText:"Logo",filePath:d,fileWidth:256,fileHeight:64,helpTip:"logo.png, 256px * 64px"})]})}),(0,p.jsx)(xe.A,{headingText:(0,h.AP)("File Upload"),children:(0,p.jsx)(o.Fragment,{children:(0,p.jsx)(ke,{saveSetting:this.orgSaveSetting,displayName:(0,h.AP)("File extension white list"),keyText:"file_ext_white_list",value:a,helpTip:(0,h.AP)('File extension white list for file upload via web UI and API. For example, "md;txt;docx". Empty means no limit.')})})}),h.bH&&(0,p.jsx)(xe.A,{headingText:(0,h.AP)("User"),children:(0,p.jsx)(ye.A,{saveSetting:this.orgSaveSetting,displayName:(0,h.AP)("Disable SAML user email / password login"),keyText:"force_adfs_login",value:r,helpTip:(0,h.AP)("Force user to use SSO login if SAML account is bound")})}),(we||Se)&&(0,p.jsx)(xe.A,{headingText:(0,h.AP)("Library"),children:(0,p.jsxs)(o.Fragment,{children:[Se&&(0,p.jsx)(ye.A,{saveSetting:this.orgSaveSetting,displayName:(0,h.AP)("Encrypted library"),keyText:"disable_org_encrypted_library",value:s,helpTip:(0,h.AP)("Not allow user to create encrypted libraries")}),we&&(0,p.jsx)(ye.A,{saveSetting:this.orgSaveSetting,displayName:(0,h.AP)("Disable user clean trash"),keyText:"disable_org_user_clean_trash",value:l,helpTip:(0,h.AP)("Not allow user to clean library trash")})]})}),(0,p.jsx)(xe.A,{headingText:(0,h.AP)("User"),children:(0,p.jsx)(o.Fragment,{children:(0,p.jsx)(ke,{className:"form-control",saveSetting:this.orgUpdateUserDefaultQuota,displayName:(0,h.AP)("User default quota"),value:c,helpTip:(0,h.AP)("Tip: 0 means default limit, the unit is MB"),inputAddon:(0,p.jsx)(ve.A,{children:"MB"})})})})]})]})]})})]})}}])}(o.Component),Pe=function(e){function t(e){var i;return(0,n.default)(this,t),(i=(0,r.default)(this,t,[e])).navItems=[{name:"all",urlPart:"useradmin",text:(0,h.AP)("All")},{name:"admins",urlPart:"useradmin/admins",text:(0,h.AP)("Admin")}],i}return(0,s.default)(t,e),(0,a.default)(t,[{key:"render",value:function(){var e=this.props.currentItem;return(0,p.jsx)("div",{className:"cur-view-path tab-nav-container",children:(0,p.jsx)("ul",{className:"nav",children:this.navItems.map((function(t,i){return(0,p.jsx)("li",{className:"nav-item",children:(0,p.jsx)(c.N_,{to:"".concat(h.Yc,"org/").concat(t.urlPart,"/"),className:"nav-link".concat(e==t.name?" active":""),children:t.text})},i)}))})})}}])}(o.Component),Me=Pe,Ne=i(5495),Ce=i(69123),Ie=i(65276),Oe=i(34940),Le=i(66149),Te=i(82487),Re=function(e){function t(e){var i;return(0,n.default)(this,t),(i=(0,r.default)(this,t,[e])).onMouseEnter=function(){i.props.isItemFreezed||i.setState({showMenu:!0,highlight:!0})},i.onMouseLeave=function(){i.props.isItemFreezed||i.setState({showMenu:!1,highlight:!1})},i.toggleDelete=function(){var e=i.props.user.email,t=i.props.user.name;i.props.toggleDelete(e,t)},i.toggleResetPW=function(){var e=i.props.user.email;U.A.success((0,h.AP)("Resetting user's password, please wait for a moment.")),L.k.orgAdminResetOrgUserPassword(h.Id,e).then((function(e){U.A.success(e.data.reset_tip)})).catch((function(e){var t=E.Aq.getErrorMsg(e);U.A.danger(t)}))},i.toggleRevokeAdmin=function(){var e=i.props.user.email;i.props.toggleRevokeAdmin(e)},i.changeStatus=function(e){var t="active"==e.value;t&&U.A.notify((0,h.AP)("It may take some time, please wait.")),i.props.changeStatus(i.props.user.email,t)},i.setUserInactive=function(){i.props.changeStatus(i.props.user.email,!1)},i.onDropdownToggleClick=function(e){i.toggleOperationMenu(e)},i.toggleOperationMenu=function(e){e.stopPropagation(),i.setState({isItemMenuShow:!i.state.isItemMenuShow},(function(){i.state.isItemMenuShow?i.props.onFreezedItem():(i.setState({highlight:!1,showMenu:!1}),i.props.onUnfreezedItem())}))},i.getQuotaTotal=function(e){switch(e){case-1:return(0,h.AP)("Failed");case-2:return"--";default:return E.Aq.formatSize({bytes:e})}},i.translateStatus=function(e){switch(e){case"active":return(0,h.AP)("Active");case"inactive":return(0,h.AP)("Inactive")}},i.toggleConfirmInactiveDialog=function(){i.setState({isConfirmInactiveDialogOpen:!i.state.isConfirmInactiveDialogOpen})},i.state={highlight:!1,showMenu:!1,isItemMenuShow:!1},i}return(0,s.default)(t,e),(0,a.default)(t,[{key:"render",value:function(){var e=this,t=this.state,i=t.highlight,n=t.isConfirmInactiveDialogOpen,a=this.props,r=a.user,s=a.currentTab,o=h.Yc+"org/useradmin/info/"+encodeURIComponent(r.email)+"/",l=r.email!==h.Xh&&this.state.showMenu,c=r.is_active?"active":"inactive";this.statusOptions=["active","inactive"].map((function(t){return{value:t,text:e.translateStatus(t),isSelected:t==c}}));var d=this.statusOptions.filter((function(e){return e.isSelected}))[0],u='<span class="op-target">'+E.Aq.HTMLescape(r.name)+"</span>",f=(0,h.AP)("Are you sure you want to set {user_placeholder} inactive?").replace("{user_placeholder}",u);return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)("tr",{className:this.state.highlight?"tr-highlight":"",onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave,children:[(0,p.jsx)("td",{children:(0,p.jsx)("a",{href:o,children:r.name})}),(0,p.jsx)("td",{children:(0,p.jsx)(Le.A,{isDropdownToggleShown:i,currentSelectedOption:d,options:this.statusOptions,selectOption:this.changeStatus,toggleItemFreezed:this.props.toggleItemFreezed,operationBeforeSelect:r.is_active?this.toggleConfirmInactiveDialog:void 0})}),(0,p.jsx)("td",{children:"".concat(E.Aq.formatSize({bytes:r.quota_usage})," / ").concat(this.getQuotaTotal(r.quota_total))}),(0,p.jsxs)("td",{children:[r.ctime," /",(0,p.jsx)("br",{}),r.last_login?r.last_login:"--"]}),(0,p.jsx)("td",{className:"text-center cursor-pointer",children:l&&(0,p.jsxs)(Ne.A,{isOpen:this.state.isItemMenuShow,toggle:this.toggleOperationMenu,children:[(0,p.jsx)(Ce.A,{tag:"i",className:"op-icon sf3-font-more sf3-font",title:(0,h.AP)("More operations"),"aria-label":(0,h.AP)("More operations"),"data-toggle":"dropdown","aria-expanded":this.state.isItemMenuShow,onClick:this.onDropdownToggleClick}),(0,p.jsxs)(Ie.A,{children:[(0,p.jsx)(Oe.A,{onClick:this.toggleDelete,children:(0,h.AP)("Delete")}),(0,p.jsx)(Oe.A,{onClick:this.toggleResetPW,children:(0,h.AP)("ResetPwd")}),"admins"==s&&(0,p.jsx)(Oe.A,{onClick:this.toggleRevokeAdmin,children:(0,h.AP)("Revoke Admin")})]})]})})]}),n&&(0,p.jsx)(Te.A,{title:(0,h.AP)("Set user inactive"),message:f,executeOperation:this.setUserInactive,confirmBtnText:(0,h.AP)("Set"),toggleDialog:this.toggleConfirmInactiveDialog})]})}}])}(o.Component),Ee=function(e){function t(e){var i;return(0,n.default)(this,t),(i=(0,r.default)(this,t,[e])).onFreezedItem=function(){i.setState({isItemFreezed:!0})},i.onUnfreezedItem=function(){i.setState({isItemFreezed:!1})},i.toggleItemFreezed=function(e){i.setState({isItemFreezed:e})},i.onChangePageNum=function(e,t){e.preventDefault();var n=i.props.page;1==t?n+=1:n-=1,i.props.initOrgUsersData(n)},i.sortByQuotaUsage=function(e){e.preventDefault(),i.props.sortByQuotaUsage()},i.state={isItemFreezed:!1},i}return(0,s.default)(t,e),(0,a.default)(t,[{key:"render",value:function(){var e,t=this,i=this.props,n=i.sortBy,a=i.sortOrder;e=""==n?(0,p.jsx)("span",{className:"sf3-font sf3-font-sort3"}):(0,p.jsx)("span",{className:"sf3-font ".concat("asc"==a?"sf3-font-down rotate-180 d-inline-block":"sf3-font-down")});var r=this.props,s=r.orgUsers,o=r.page,l=r.pageNext;return(0,p.jsxs)("div",{className:"cur-view-content",children:[(0,p.jsxs)("table",{children:[(0,p.jsx)("thead",{children:(0,p.jsxs)("tr",{children:[(0,p.jsx)("th",{width:"30%",children:(0,h.AP)("Name")}),(0,p.jsx)("th",{width:"15%",children:(0,h.AP)("Status")}),(0,p.jsxs)("th",{width:"20%",children:[(0,p.jsxs)("a",{className:"d-inline-block table-sort-op",href:"#",onClick:this.sortByQuotaUsage,children:[(0,h.AP)("Space Used")," ",e]})," / ",(0,h.AP)("Quota")]}),(0,p.jsxs)("th",{width:"25%",children:[(0,h.AP)("Created At")," / ",(0,h.AP)("Last Login")]}),(0,p.jsx)("th",{width:"10%"})]})}),(0,p.jsx)("tbody",{children:s.map((function(e,i){return(0,p.jsx)(Re,{user:e,currentTab:"users",isItemFreezed:t.state.isItemFreezed,toggleDelete:t.props.toggleDelete,changeStatus:t.props.changeStatus,onFreezedItem:t.onFreezedItem,onUnfreezedItem:t.onUnfreezedItem,toggleItemFreezed:t.toggleItemFreezed},i)}))})]}),(0,p.jsxs)("div",{className:"paginator",children:[1!=o&&(0,p.jsx)("a",{href:"#",onClick:function(e){return t.onChangePageNum(e,-1)},children:(0,h.AP)("Previous")}),1!=o&&l&&(0,p.jsx)("span",{children:" | "}),l&&(0,p.jsx)("a",{href:"#",onClick:function(e){return t.onChangePageNum(e,1)},children:(0,h.AP)("Next")})]})]})}}])}(o.Component),Fe=i(40866),ze=i(8081),Ue=i(10877),Be=i(46882),Ye=i(6754),Ve=i(20338),qe=function(e){function t(e){var i;return(0,n.default)(this,t),(i=(0,r.default)(this,t,[e])).toggle=function(){i.props.toggle()},i.openFileInput=function(){i.fileInputRef.current.click()},i.uploadFile=function(e){if(i.fileInputRef.current.files.length){var t=i.fileInputRef.current.files[0].name;if("xlsx"==t.substr(t.lastIndexOf(".")+1)){var n=i.fileInputRef.current.files[0];i.props.importUsersInBatch(n),i.toggle()}else i.setState({errorMsg:(0,h.AP)("Please choose a .xlsx file.")})}},i.state={errorMsg:""},i.fileInputRef=o.createRef(),i}return(0,s.default)(t,e),(0,a.default)(t,[{key:"render",value:function(){var e=this.state.errorMsg;return(0,p.jsxs)(ze.A,{isOpen:!0,toggle:this.toggle,children:[(0,p.jsx)(Ve.A,{toggle:this.toggle,children:(0,h.AP)("Import users from a .xlsx file")}),(0,p.jsxs)(Ue.A,{children:[(0,p.jsx)("p",{children:(0,p.jsx)("a",{className:"text-secondary small",href:"".concat(h.Yc,"useradmin/batchadduser/example/"),children:(0,h.AP)("Download an example file")})}),(0,p.jsx)("button",{className:"btn btn-outline-primary",onClick:this.openFileInput,children:(0,h.AP)("Upload file")}),(0,p.jsx)("input",{className:"d-none",type:"file",onChange:this.uploadFile,ref:this.fileInputRef}),e&&(0,p.jsx)(Be.A,{color:"danger",children:e})]}),(0,p.jsx)(Ye.A,{children:(0,p.jsx)(S.A,{color:"secondary",onClick:this.toggle,children:(0,h.AP)("Cancel")})})]})}}])}(o.Component),He=i(39708),We=i(79969),Ge=i(91646),Qe=function(e){function t(e){var i;return(0,n.default)(this,t),(i=(0,r.default)(this,t,[e])).handleSubmit=function(){if(i.validateInputParams()){var e=i.state,t=e.email,n=e.name,a=e.password;i.setState({isAddingUser:!0}),i.props.handleSubmit(t,n.trim(),a)}},i.togglePasswordVisible=function(){i.setState({isPasswordVisible:!i.state.isPasswordVisible},(function(){i.state.isPasswordVisible?(i.passwdInput.type="password",i.passwdNewInput.type="password"):(i.passwdInput.type="text",i.passwdNewInput.type="text")}))},i.generatePassword=function(){var e=E.Aq.generatePassword(8);i.setState({password:e,newPassword:e,isPasswordVisible:!1},(function(){i.passwdInput.type="text",i.passwdNewInput.type="text"}))},i.inputEmail=function(e){var t=e.target.value.trim();i.setState({email:t})},i.inputName=function(e){var t=e.target.value;i.setState({name:t})},i.inputPassword=function(e){var t=e.target.value.trim();i.setState({password:t},(function(){i.state.isPasswordVisible&&(i.passwdInput.type="password",i.passwdNewInput.type="password")}))},i.inputPasswordNew=function(e){var t=e.target.value.trim();i.setState({newPassword:t},(function(){i.state.isPasswordVisible&&(i.passwdInput.type="password",i.passwdNewInput.type="password")}))},i.toggle=function(){i.props.toggle()},i.state={isPasswordVisible:!0,email:"",name:"",password:"",newPassword:"",errMessage:"",isAddingUser:!1},i.passwdInput=o.createRef(),i.passwdNewInput=o.createRef(),i}return(0,s.default)(t,e),(0,a.default)(t,[{key:"validateInputParams",value:function(){var e;if(!this.state.email.length)return e=(0,h.AP)("email is required"),this.setState({errMessage:e}),!1;if(!this.state.name.trim().length)return e=(0,h.AP)("Name is required"),this.setState({errMessage:e}),!1;var t=this.state.password,i=this.state.newPassword;return t.length?i.length?t===i||(e=(0,h.AP)("Passwords don't match"),this.setState({errMessage:e}),!1):(e=(0,h.AP)("Please enter the password again"),this.setState({errMessage:e}),!1):(e=(0,h.AP)("Please enter password"),this.setState({errMessage:e}),!1)}},{key:"render",value:function(){var e=this;return(0,p.jsxs)(ze.A,{isOpen:!0,toggle:this.toggle,children:[(0,p.jsx)(Ve.A,{toggle:this.toggle,children:(0,h.AP)("Add User")}),(0,p.jsxs)(Ue.A,{children:[(0,p.jsxs)(He.A,{children:[(0,p.jsxs)(We.A,{children:[(0,p.jsx)(Ge.A,{for:"userEmail",children:(0,h.AP)("Email")}),(0,p.jsx)(V.A,{id:"userEmail",value:this.state.email||"",onChange:this.inputEmail})]}),(0,p.jsxs)(We.A,{children:[(0,p.jsx)(Ge.A,{for:"userName",children:(0,h.AP)("Name")}),(0,p.jsx)(V.A,{id:"userName",value:this.state.name||"",onChange:this.inputName})]}),(0,p.jsxs)(We.A,{children:[(0,p.jsx)(Ge.A,{for:"userPwd",children:(0,h.AP)("Password")}),(0,p.jsxs)(Ae.A,{className:"passwd",children:[(0,p.jsx)(V.A,{id:"userPwd",innerRef:function(t){e.passwdInput=t},value:this.state.password||"",onChange:this.inputPassword}),(0,p.jsx)(S.A,{onClick:this.togglePasswordVisible,children:(0,p.jsx)("i",{className:"link-operation-icon sf3-font sf3-font-eye".concat(this.state.isPasswordVisible?"-slash":"")})}),(0,p.jsx)(S.A,{onClick:this.generatePassword,children:(0,p.jsx)("i",{className:"link-operation-icon sf3-font sf3-font-magic"})})]})]}),(0,p.jsxs)(We.A,{children:[(0,p.jsx)(Ge.A,{for:"userPwdNew",children:(0,h.AP)("Confirm Password")}),(0,p.jsx)(V.A,{id:"userPwdNew",innerRef:function(t){e.passwdNewInput=t},className:"passwd",value:this.state.newPassword||"",onChange:this.inputPasswordNew})]})]}),this.state.errMessage&&(0,p.jsx)(Ge.A,{className:"err-message",children:this.state.errMessage})]}),(0,p.jsx)(Ye.A,{children:(0,p.jsx)(S.A,{color:"primary",disabled:this.state.isAddingUser,onClick:this.handleSubmit,className:this.state.isAddingUser?"btn-loading":"",children:(0,h.AP)("Submit")})})]})}}])}(o.Component),Xe=function(e){function t(e){var i;return(0,n.default)(this,t),(i=(0,r.default)(this,t,[e])).handleSubmit=function(){if(i.validateInputParams()){var e=i.state.email;i.setState({isAddingUser:!0}),i.props.handleSubmit(e.trim())}},i.handleKeyPress=function(e){e.preventDefault(),"Enter"==e.key&&i.handleSubmit(e)},i.inputEmail=function(e){var t=e.target.value.trim();i.setState({email:t})},i.toggle=function(){i.props.toggle()},i.state={email:"",errMessage:"",isAddingUser:!1},i}return(0,s.default)(t,e),(0,a.default)(t,[{key:"validateInputParams",value:function(){var e;return!!this.state.email.trim().length||(e=(0,h.AP)("email is required"),this.setState({errMessage:e}),!1)}},{key:"render",value:function(){return(0,p.jsxs)(ze.A,{isOpen:!0,toggle:this.toggle,children:[(0,p.jsx)(Ve.A,{toggle:this.toggle,children:(0,h.AP)("Invite users")}),(0,p.jsxs)(Ue.A,{children:[(0,p.jsx)("p",{children:(0,h.AP)("You can enter multiple emails. An invitation link will be sent to each of them.")}),(0,p.jsx)(He.A,{children:(0,p.jsxs)(We.A,{children:[(0,p.jsx)(Ge.A,{for:"emails",children:(0,h.AP)("Emails")}),(0,p.jsx)(V.A,{type:"text",id:"emails",placeholder:(0,h.AP)("Emails, separated by ','"),value:this.state.email||"",onChange:this.inputEmail})]})}),this.state.errMessage&&(0,p.jsx)(Ge.A,{className:"err-message",children:this.state.errMessage})]}),(0,p.jsx)(Ye.A,{children:(0,p.jsx)(S.A,{color:"primary",disabled:this.state.isAddingUser,onClick:this.handleSubmit,className:this.state.isAddingUser?"btn-loading":"",children:(0,h.AP)("Submit")})})]})}}])}(o.Component),Ke=i(25328),$e=function(e){function t(e){var i;return(0,n.default)(this,t),(i=(0,r.default)(this,t,[e])).copyLink=function(){(0,Ke.A)(i.props.invitationLink),i.props.toggle();var e=(0,h.AP)("Internal link has been copied to clipboard");U.A.success(e,{duration:2})},i}return(0,s.default)(t,e),(0,a.default)(t,[{key:"render",value:function(){return(0,p.jsxs)(ze.A,{isOpen:!0,toggle:this.props.toggle,children:[(0,p.jsx)(Ve.A,{toggle:this.props.toggle,children:"\u901a\u8fc7\u5fae\u4fe1\u9080\u8bf7\u7528\u6237"}),(0,p.jsxs)(Ue.A,{children:[(0,p.jsx)("p",{children:"\u8bf7\u5c06\u9080\u8bf7\u94fe\u63a5\u53d1\u9001\u7ed9\u5176\u4ed6\u4eba\uff0c\u8fd9\u6837\u4ed6\u4eec\u5c31\u53ef\u4ee5\u901a\u8fc7\u626b\u63cf\u94fe\u63a5\u91cc\u7684\u4e8c\u7ef4\u7801\u6765\u52a0\u5165\u7ec4\u7ec7\u3002"}),(0,p.jsx)("p",{children:this.props.invitationLink})]}),(0,p.jsx)(Ye.A,{children:(0,p.jsx)(S.A,{color:"primary",onClick:this.copyLink,children:(0,h.AP)("Copy")})})]})}}])}(o.Component);y().locale(h.vV),y().extend(ne());var Ze=(0,a.default)((function e(t){(0,n.default)(this,e),this.id=t.id,this.name=t.name,this.email=t.email,this.contact_email=t.owner_contact_email,this.is_active=t.is_active,this.quota_usage=t.quota_usage,this.quota_total=t.quota_total,this.last_login=t.last_login?y()(t.last_login).fromNow():"--",this.ctime=y()(t.ctime).format("YYYY-MM-DD HH:mm:ss")})),Je=function(e){function t(e){var i;return(0,n.default)(this,t),(i=(0,r.default)(this,t,[e])).handleInputChange=function(e){i.setState({value:e.target.value})},i.handleKeyDown=function(e){"Enter"==e.key&&(e.preventDefault(),i.handleSubmit())},i.handleSubmit=function(){var e=i.state.value.trim();if(!e)return!1;i.props.submit(e)},i.state={value:""},i}return(0,s.default)(t,e),(0,a.default)(t,[{key:"render",value:function(){return(0,p.jsxs)("div",{className:"input-icon",children:[(0,p.jsx)("i",{className:"d-flex input-icon-addon sf3-font sf3-font-search"}),(0,p.jsx)("input",{type:"text",className:"form-control search-input h-6 mr-1",style:{width:"15rem"},placeholder:this.props.placeholder,value:this.state.value,onChange:this.handleInputChange,onKeyDown:this.handleKeyDown,autoComplete:"off"})]})}}])}(o.Component),et=function(e){function t(e){var i;return(0,n.default)(this,t),(i=(0,r.default)(this,t,[e])).sortByQuotaUsage=function(){i.setState({sortBy:"quota_usage",sortOrder:"asc"==i.state.sortOrder?"desc":"asc",page:1},(function(){var e=new URL(location.href),t=new URLSearchParams(e.search),n=i.state,a=n.page,r=n.sortBy,s=n.sortOrder;t.set("page",a),t.set("order_by",r),t.set("direction",s),e.search=t.toString(),(0,c.oo)(e.toString()),i.initOrgUsersData(a)}))},i.toggleImportOrgUsersDialog=function(){i.setState({isImportOrgUsersDialogOpen:!i.state.isImportOrgUsersDialogOpen})},i.toggleAddOrgUser=function(){i.setState({isShowAddOrgUserDialog:!i.state.isShowAddOrgUserDialog})},i.toggleInviteUserDialog=function(){i.setState({isInviteUserDialogOpen:!i.state.isInviteUserDialogOpen})},i.toggleInviteUserViaWeiXinDialog=function(){i.setState({isInviteUserViaWeiXinDialogOpen:!i.state.isInviteUserViaWeiXinDialogOpen})},i.initOrgUsersData=function(e){var t=i.state,n=t.sortBy,a=t.sortOrder;L.k.orgAdminListOrgUsers(h.Id,"",e,n,a).then((function(e){var t=e.data.user_list.map((function(e){return new Ze(e)}));i.setState({orgUsers:t,pageNext:e.data.page_next,page:e.data.page})})).catch((function(e){var t=E.Aq.getErrorMsg(e);U.A.danger(t)}))},i.importOrgUsers=function(e){U.A.notify((0,h.AP)("It may take some time, please wait.")),L.k.orgAdminImportUsersViaFile(h.Id,e).then((function(e){if(e.data.success.length){var t=e.data.success.map((function(e){return void 0==e.institution&&(e.institution=""),new Ze(e)}));i.setState({orgUsers:t.concat(i.state.orgUsers)})}e.data.failed.forEach((function(e){var t="".concat(e.email,": ").concat(e.error_msg);U.A.danger(t)}))})).catch((function(e){var t=E.Aq.getErrorMsg(e);U.A.danger(t)}))},i.addOrgUser=function(e,t,n){L.k.orgAdminAddOrgUser(h.Id,e,t,n).then((function(t){var n=new Ze(t.data);i.state.orgUsers.unshift(n),i.setState({orgUsers:i.state.orgUsers}),i.toggleAddOrgUser();var a=(0,h.AP)("successfully added user %s.");a=a.replace("%s",e),U.A.success(a)})).catch((function(e){var t=E.Aq.getErrorMsg(e);U.A.danger(t),i.toggleAddOrgUser()}))},i.toggleOrgUsersDelete=function(e,t){L.k.orgAdminDeleteOrgUser(h.Id,e).then((function(n){var a=i.state.orgUsers.filter((function(t){return t.email!=e}));i.setState({orgUsers:a});var r=(0,h.AP)("Deleted user %s");r=r.replace("%s",t),U.A.success(r)})).catch((function(e){var t=E.Aq.getErrorMsg(e);U.A.danger(t)}))},i.inviteOrgUser=function(e){L.k.orgAdminInviteOrgUsers(h.Id,e.split(",")).then((function(e){i.toggleInviteUserDialog();var t=e.data.success.map((function(e){return new Ze(e)}));i.setState({orgUsers:t.concat(i.state.orgUsers)}),e.data.success.forEach((function(e){var t=(0,h.AP)("successfully sent email to %s.");t=t.replace("%s",e.email),U.A.success(t)})),e.data.failed.forEach((function(e){var t="".concat(e.email,": ").concat(e.error_msg);U.A.danger(t)}))})).catch((function(e){i.toggleInviteUserDialog();var t=E.Aq.getErrorMsg(e);U.A.danger(t)}))},i.changeStatus=function(e,t){L.k.orgAdminChangeOrgUserStatus(h.Id,e,t).then((function(t){var n=i.state.orgUsers.map((function(i){return i.email==e&&(i.is_active=t.data.is_active),i}));i.setState({orgUsers:n}),U.A.success((0,h.AP)("Edit succeeded."))})).catch((function(e){var t=E.Aq.getErrorMsg(e);U.A.danger(t)}))},i.searchItems=function(e){(0,c.oo)("".concat(h.Yc,"org/useradmin/search-users/?query=").concat(encodeURIComponent(e)))},i.getSearch=function(){return(0,p.jsx)(Je,{placeholder:(0,h.AP)("Search users"),submit:i.searchItems})},i.state={orgUsers:[],page:1,pageNext:!1,sortBy:"",sortOrder:"asc",isShowAddOrgUserDialog:!1,isImportOrgUsersDialogOpen:!1,isInviteUserDialogOpen:!1,isInviteUserViaWeiXinDialogOpen:!1},i}return(0,s.default)(t,e),(0,a.default)(t,[{key:"componentDidMount",value:function(){var e=this,t=new URL(window.location).searchParams,i=this.state,n=i.page,a=i.sortBy,r=i.sortOrder;this.setState({page:parseInt(t.get("page")||n),sortBy:t.get("order_by")||a,sortOrder:t.get("direction")||r},(function(){e.initOrgUsersData(e.state.page)}))}},{key:"render",value:function(){var e,t="btn btn-secondary operation-item";return e=(0,p.jsxs)(o.Fragment,{children:[(0,p.jsx)("button",{className:"btn btn-secondary operation-item",onClick:this.toggleImportOrgUsersDialog,children:(0,h.AP)("Import users")}),(0,p.jsxs)("button",{className:t,title:(0,h.AP)("Add user"),onClick:this.toggleAddOrgUser,children:[(0,p.jsx)("i",{className:"sf3-font sf3-font-enlarge text-secondary mr-1"}),(0,h.AP)("Add user")]}),h.LS&&(0,p.jsxs)("button",{className:t,title:(0,h.AP)("Invite users"),onClick:this.toggleInviteUserDialog,children:[(0,p.jsx)("i",{className:"sf3-font sf3-font-enlarge text-secondary mr-1"}),(0,h.AP)("Invite users")]}),h.mz&&(0,p.jsxs)("button",{className:t,title:"\u901a\u8fc7\u5fae\u4fe1\u9080\u8bf7\u7528\u6237",onClick:this.toggleInviteUserViaWeiXinDialog,children:[(0,p.jsx)("i",{className:"sf3-font sf3-font-enlarge text-secondary mr-1"}),"\u901a\u8fc7\u5fae\u4fe1\u9080\u8bf7\u7528\u6237"]}),this.state.isImportOrgUsersDialogOpen&&(0,p.jsx)(Fe.A,{children:(0,p.jsx)(qe,{importUsersInBatch:this.importOrgUsers,toggle:this.toggleImportOrgUsersDialog})}),this.state.isShowAddOrgUserDialog&&(0,p.jsx)(Fe.A,{children:(0,p.jsx)(Qe,{handleSubmit:this.addOrgUser,toggle:this.toggleAddOrgUser})}),this.state.isInviteUserDialogOpen&&(0,p.jsx)(Fe.A,{children:(0,p.jsx)(Xe,{handleSubmit:this.inviteOrgUser,toggle:this.toggleInviteUserDialog})}),this.state.isInviteUserViaWeiXinDialogOpen&&(0,p.jsx)(Fe.A,{children:(0,p.jsx)($e,{invitationLink:h.mz,toggle:this.toggleInviteUserViaWeiXinDialog})})]}),(0,p.jsxs)(o.Fragment,{children:[(0,p.jsx)(_,{children:e,search:this.getSearch()}),(0,p.jsx)("div",{className:"main-panel-center flex-row",children:(0,p.jsxs)("div",{className:"cur-view-container",children:[(0,p.jsx)(Me,{currentItem:"all"}),(0,p.jsx)(Ee,{initOrgUsersData:this.initOrgUsersData,toggleDelete:this.toggleOrgUsersDelete,changeStatus:this.changeStatus,orgUsers:this.state.orgUsers,page:this.state.page,pageNext:this.state.pageNext,sortBy:this.state.sortBy,sortOrder:this.state.sortOrder,sortByQuotaUsage:this.sortByQuotaUsage})]})})]})}}])}(o.Component),tt=i(46114),it=function(e){function t(e){var i;return(0,n.default)(this,t),(i=(0,r.default)(this,t,[e])).onFreezedItem=function(){i.setState({isItemFreezed:!0})},i.onUnfreezedItem=function(){i.setState({isItemFreezed:!1})},i.state={isItemFreezed:!1},i}return(0,s.default)(t,e),(0,a.default)(t,[{key:"render",value:function(){var e=this,t=this.props,i=t.orgUsers,n=t.changeStatus;return(0,p.jsx)("div",{className:"cur-view-content",children:(0,p.jsxs)("table",{children:[(0,p.jsx)("thead",{children:(0,p.jsxs)("tr",{children:[(0,p.jsx)("th",{width:"30%",children:(0,h.AP)("Name")}),(0,p.jsx)("th",{width:"15%",children:(0,h.AP)("Status")}),(0,p.jsxs)("th",{width:"20%",children:[(0,p.jsx)("a",{className:"d-inline-block table-sort-op",href:"#",children:(0,h.AP)("Space Used")})," / ",(0,h.AP)("Quota")]}),(0,p.jsxs)("th",{width:"25%",children:[(0,h.AP)("Created At")," / ",(0,h.AP)("Last Login")]}),(0,p.jsx)("th",{width:"10%"})]})}),(0,p.jsx)("tbody",{children:i.map((function(t,i){return(0,p.jsx)(Re,{user:t,currentTab:"users",isItemFreezed:e.state.isItemFreezed,toggleDelete:e.props.toggleDelete,onFreezedItem:e.onFreezedItem,onUnfreezedItem:e.onUnfreezedItem,changeStatus:n},i)}))})]})})}}])}(o.Component),nt=function(e){function t(e){var i;return(0,n.default)(this,t),(i=(0,r.default)(this,t,[e])).getItems=function(){L.k.orgAdminSearchUser(h.Id,i.state.query.trim()).then((function(e){var t=e.data.user_list.map((function(e){return new Ze(e)}));i.setState({orgUsers:t,loading:!1})})).catch((function(e){i.setState({loading:!1,errorMsg:E.Aq.getErrorMsg(e,!0)})}))},i.deleteUser=function(e,t){L.k.orgAdminDeleteOrgUser(h.Id,e).then((function(n){var a=i.state.orgUsers.filter((function(t){return t.email!=e}));i.setState({orgUsers:a});var r=(0,h.AP)("Deleted user %s");r=r.replace("%s",t),U.A.success(r)})).catch((function(e){var t=E.Aq.getErrorMsg(e);U.A.danger(t)}))},i.handleInputChange=function(e){i.setState({query:e.target.value},i.checkSubmitBtnActive)},i.checkSubmitBtnActive=function(){var e=i.state.query;i.setState({isSubmitBtnActive:e.trim()})},i.handleKeyDown=function(e){13===e.keyCode&&(i.state.isSubmitBtnActive&&i.getItems())},i.changeStatus=function(e,t){L.k.orgAdminChangeOrgUserStatus(h.Id,e,t).then((function(t){var n=i.state.orgUsers.map((function(i){return i.email==e&&(i.is_active=t.data.is_active),i}));i.setState({orgUsers:n}),U.A.success((0,h.AP)("Edit succeeded."))})).catch((function(e){var t=E.Aq.getErrorMsg(e);U.A.danger(t)}))},i.state={query:"",orgUsers:[],org_id:"",isSubmitBtnActive:!1,loading:!0,errorMsg:""},i}return(0,s.default)(t,e),(0,a.default)(t,[{key:"componentDidMount",value:function(){var e=this,t=new URL(document.location).searchParams;this.setState({query:t.get("query")||""},(function(){e.getItems()}))}},{key:"render",value:function(){var e=this.state,t=e.query,i=e.isSubmitBtnActive;return(0,p.jsx)(o.Fragment,{children:(0,p.jsx)("div",{className:"main-panel-center flex-row",children:(0,p.jsxs)("div",{className:"cur-view-container",children:[(0,p.jsx)("div",{className:"cur-view-path",children:(0,p.jsx)("h3",{className:"sf-heading",children:(0,h.AP)("Users")})}),(0,p.jsxs)("div",{className:"cur-view-content",children:[(0,p.jsxs)("div",{className:"mt-4 mb-6",children:[(0,p.jsx)("h4",{className:"border-bottom font-weight-normal mb-2 pb-1",children:(0,h.AP)("Search Users")}),(0,p.jsxs)(He.A,{tag:"div",children:[(0,p.jsx)(We.A,{row:!0,children:(0,p.jsx)(tt.A,{sm:5,children:(0,p.jsx)(V.A,{type:"text",name:"query",value:t,placeholder:(0,h.AP)("Search users"),onChange:this.handleInputChange,onKeyDown:this.handleKeyDown})})}),(0,p.jsx)(We.A,{row:!0,children:(0,p.jsx)(tt.A,{sm:{size:5},children:(0,p.jsx)("button",{className:"btn btn-outline-primary",disabled:!i,onClick:this.getItems,children:(0,h.AP)("Submit")})})})]})]}),(0,p.jsxs)("div",{className:"mt-4 mb-6",children:[(0,p.jsx)("h4",{className:"border-bottom font-weight-normal mb-2 pb-1",children:(0,h.AP)("Result")}),(0,p.jsx)(it,{toggleDelete:this.deleteUser,changeStatus:this.changeStatus,orgUsers:this.state.orgUsers})]})]})]})})})}}])}(o.Component),at=function(e){function t(e){var i;return(0,n.default)(this,t),(i=(0,r.default)(this,t,[e])).onFreezedItem=function(){i.setState({isItemFreezed:!0})},i.onUnfreezedItem=function(){i.setState({isItemFreezed:!1})},i.toggleItemFreezed=function(e){i.setState({isItemFreezed:e})},i.state={isItemFreezed:!1},i}return(0,s.default)(t,e),(0,a.default)(t,[{key:"componentDidMount",value:function(){this.props.initOrgAdmin()}},{key:"render",value:function(){var e=this,t=this.props.orgAdminUsers;return(0,p.jsx)("div",{className:"cur-view-content",children:(0,p.jsxs)("table",{children:[(0,p.jsx)("thead",{children:(0,p.jsxs)("tr",{children:[(0,p.jsx)("th",{width:"30%",children:(0,h.AP)("Name")}),(0,p.jsx)("th",{width:"15%",children:(0,h.AP)("Status")}),(0,p.jsxs)("th",{width:"20%",children:[(0,h.AP)("Space Used")," / ",(0,h.AP)("Quota")]}),(0,p.jsxs)("th",{width:"25%",children:[(0,h.AP)("Created At")," / ",(0,h.AP)("Last Login")]}),(0,p.jsx)("th",{width:"10%"})]})}),(0,p.jsx)("tbody",{children:t.map((function(t,i){return(0,p.jsx)(Re,{user:t,currentTab:"admins",isItemFreezed:e.state.isItemFreezed,toggleDelete:e.props.toggleDelete,toggleRevokeAdmin:e.props.toggleRevokeAdmin,changeStatus:e.props.changeStatus,onFreezedItem:e.onFreezedItem,onUnfreezedItem:e.onUnfreezedItem,toggleItemFreezed:e.toggleItemFreezed},i)}))})]})})}}])}(o.Component),rt=i(98361),st=function(e){function t(e){var i;return(0,n.default)(this,t),(i=(0,r.default)(this,t,[e])).handleSelectChange=function(e){i.setState({selectedUsers:e,errMessage:""}),i.options=[]},i.addOrgAdmin=function(){if(i.state.selectedUsers&&0!==i.state.selectedUsers.length){var e=i.state.selectedUsers[0].email;L.k.orgAdminSetOrgAdmin(h.Id,e,!0).then((function(e){var t=new Ze(e.data);i.props.onAddedOrgAdmin(t)})).catch((function(e){var t=E.Aq.getErrorMsg(e);U.A.danger(t)}))}},i.toggle=function(){i.props.toggle()},i.state={selectedUsers:[],errMessage:""},i.options=[],i}return(0,s.default)(t,e),(0,a.default)(t,[{key:"render",value:function(){return(0,p.jsxs)(ze.A,{isOpen:!0,toggle:this.toggle,children:[(0,p.jsx)(Ve.A,{toggle:this.toggle,children:(0,h.AP)("Add Admin")}),(0,p.jsxs)(Ue.A,{children:[(0,p.jsx)(rt.A,{isMulti:!1,placeholder:(0,h.AP)("Select a user as admin"),onSelectChange:this.handleSelectChange,selectedUsers:this.state.selectedUsers}),this.state.errMessage&&(0,p.jsx)(Be.A,{color:"danger",className:"mt-2",children:this.state.errMessage})]}),(0,p.jsxs)(Ye.A,{children:[(0,p.jsx)(S.A,{color:"secondary",onClick:this.toggle,children:(0,h.AP)("Close")}),(0,p.jsx)(S.A,{color:"primary",onClick:this.addOrgAdmin,children:(0,h.AP)("Submit")})]})]})}}])}(o.Component),ot=function(e){function t(e){var i;return(0,n.default)(this,t),(i=(0,r.default)(this,t,[e])).toggleAddOrgAdmin=function(){i.setState({isShowAddOrgAdminDialog:!i.state.isShowAddOrgAdminDialog})},i.initOrgAdmin=function(){L.k.orgAdminListOrgUsers(h.Id,!0).then((function(e){var t=e.data.user_list.map((function(e){return new Ze(e)}));i.setState({orgAdminUsers:t})})).catch((function(e){var t=E.Aq.getErrorMsg(e);U.A.danger(t)}))},i.toggleOrgAdminDelete=function(e,t){L.k.orgAdminDeleteOrgUser(h.Id,e).then((function(n){i.setState({orgAdminUsers:i.state.orgAdminUsers.filter((function(t){return t.email!=e}))});var a=(0,h.AP)("Deleted user %s");a=a.replace("%s",t),U.A.success(a)})).catch((function(e){var t=E.Aq.getErrorMsg(e);U.A.danger(t)}))},i.toggleRevokeAdmin=function(e){L.k.orgAdminSetOrgAdmin(h.Id,e,!1).then((function(t){i.setState({orgAdminUsers:i.state.orgAdminUsers.filter((function(t){return t.email!=e}))});var n=(0,h.AP)("Successfully revoke the admin permission of %s");n=n.replace("%s",t.data.name),U.A.success(n)})).catch((function(e){var t=E.Aq.getErrorMsg(e);U.A.danger(t)}))},i.onAddedOrgAdmin=function(e){i.state.orgAdminUsers.unshift(e),i.setState({orgAdminUsers:i.state.orgAdminUsers});var t=(0,h.AP)("Successfully set %s as admin.");t=t.replace("%s",e.name),U.A.success(t),i.toggleAddOrgAdmin()},i.changeStatus=function(e,t){L.k.orgAdminChangeOrgUserStatus(h.Id,e,t).then((function(t){var n=i.state.orgAdminUsers.map((function(i){return i.email==e&&(i.is_active=t.data.is_active),i}));i.setState({orgAdminUsers:n}),U.A.success((0,h.AP)("Edit succeeded."))})).catch((function(e){var t=E.Aq.getErrorMsg(e);U.A.danger(t)}))},i.state={orgAdminUsers:[],isShowAddOrgAdminDialog:!1},i}return(0,s.default)(t,e),(0,a.default)(t,[{key:"render",value:function(){var e;return e=(0,p.jsxs)(o.Fragment,{children:[(0,p.jsxs)("button",{className:"btn btn-secondary operation-item",title:(0,h.AP)("Add admin"),onClick:this.toggleAddOrgAdmin,children:[(0,p.jsx)("i",{className:"sf3-font sf3-font-enlarge text-secondary mr-1"}),(0,h.AP)("Add admin")]}),this.state.isShowAddOrgAdminDialog&&(0,p.jsx)(Fe.A,{children:(0,p.jsx)(st,{toggle:this.toggleAddOrgAdmin,onAddedOrgAdmin:this.onAddedOrgAdmin})})]}),(0,p.jsxs)(o.Fragment,{children:[(0,p.jsx)(_,{children:e}),(0,p.jsx)("div",{className:"main-panel-center flex-row",children:(0,p.jsxs)("div",{className:"cur-view-container",children:[(0,p.jsx)(Me,{currentItem:"admins"}),(0,p.jsx)(at,{currentTab:"admins",toggleDelete:this.toggleOrgAdminDelete,toggleRevokeAdmin:this.toggleRevokeAdmin,orgAdminUsers:this.state.orgAdminUsers,initOrgAdmin:this.initOrgAdmin,changeStatus:this.changeStatus})]})})]})}}])}(o.Component),lt=ot,ct=function(e){function t(){return(0,n.default)(this,t),(0,r.default)(this,t,arguments)}return(0,s.default)(t,e),(0,a.default)(t,[{key:"render",value:function(){var e=this.props,t=e.email,i=e.currentItem,n="".concat(h.Yc,"org/useradmin/info/").concat(encodeURIComponent(t),"/");return(0,p.jsx)("div",{className:"cur-view-path org-admin-user-nav",children:(0,p.jsxs)("ul",{className:"nav",children:[(0,p.jsx)("li",{className:"nav-item",children:(0,p.jsx)(c.N_,{to:n,className:"nav-link".concat("profile"==i?" active":""),children:(0,h.AP)("Profile")})}),(0,p.jsx)("li",{className:"nav-item",children:(0,p.jsx)(c.N_,{to:"".concat(n,"repos/"),className:"nav-link".concat("owned-repos"==i?" active":""),children:(0,h.AP)("Owned Libraries")})}),(0,p.jsx)("li",{className:"nav-item",children:(0,p.jsx)(c.N_,{to:"".concat(n,"shared-repos/"),className:"nav-link".concat("shared-repos"==i?" active":""),children:(0,h.AP)("Shared Libraries")})})]})})}}])}(o.Component),dt=ct,ut=function(e){function t(e){var i;return(0,n.default)(this,t),(i=(0,r.default)(this,t,[e])).handleInputChange=function(e){i.setState({inputValue:e.target.value})},i.formSubmit=function(){var e=i.props,t=e.orgID,n=e.email,a=i.state.inputValue.trim();i.setState({submitBtnDisabled:!0}),L.k.orgAdminSetOrgUserName(t,n,a).then((function(e){var t=a?e.data.name:"";i.props.updateName(t),i.props.toggleDialog()})).catch((function(e){var t=E.Aq.getErrorMsg(e);i.setState({formErrorMsg:t,submitBtnDisabled:!1})}))},i.state={inputValue:i.props.name,submitBtnDisabled:!1},i}return(0,s.default)(t,e),(0,a.default)(t,[{key:"render",value:function(){var e=this.state,t=e.inputValue,i=e.formErrorMsg,n=e.submitBtnDisabled;return(0,p.jsxs)(ze.A,{isOpen:!0,centered:!0,toggle:this.props.toggleDialog,children:[(0,p.jsx)(Ve.A,{toggle:this.props.toggleDialog,children:(0,h.AP)("Set user name")}),(0,p.jsx)(Ue.A,{children:(0,p.jsxs)(o.Fragment,{children:[(0,p.jsx)("input",{type:"text",className:"form-control",value:t,onChange:this.handleInputChange}),i&&(0,p.jsx)("p",{className:"error m-0 mt-2",children:i})]})}),(0,p.jsxs)(Ye.A,{children:[(0,p.jsx)("button",{className:"btn btn-secondary",onClick:this.props.toggleDialog,children:(0,h.AP)("Cancel")}),(0,p.jsx)("button",{className:"btn btn-primary",disabled:n,onClick:this.formSubmit,children:(0,h.AP)("Submit")})]})]})}}])}(o.Component),ht=ut,ft=function(e){function t(e){var i;return(0,n.default)(this,t),(i=(0,r.default)(this,t,[e])).handleInputChange=function(e){i.setState({inputValue:e.target.value})},i.formSubmit=function(){var e=i.props,t=e.orgID,n=e.email,a=i.state.inputValue.trim();i.setState({submitBtnDisabled:!0}),L.k.orgAdminSetOrgUserContactEmail(t,n,a).then((function(e){var t=a?e.data.contact_email:"";i.props.updateContactEmail(t),i.props.toggleDialog()})).catch((function(e){var t=E.Aq.getErrorMsg(e);i.setState({formErrorMsg:t,submitBtnDisabled:!1})}))},i.state={inputValue:i.props.contactEmail,submitBtnDisabled:!1},i}return(0,s.default)(t,e),(0,a.default)(t,[{key:"render",value:function(){var e=this.state,t=e.inputValue,i=e.formErrorMsg,n=e.submitBtnDisabled;return(0,p.jsxs)(ze.A,{isOpen:!0,centered:!0,toggle:this.props.toggleDialog,children:[(0,p.jsx)(Ve.A,{toggle:this.props.toggleDialog,children:(0,h.AP)("Set user contact email")}),(0,p.jsx)(Ue.A,{children:(0,p.jsxs)(o.Fragment,{children:[(0,p.jsx)("input",{type:"text",className:"form-control",value:t,onChange:this.handleInputChange}),i&&(0,p.jsx)("p",{className:"error m-0 mt-2",children:i})]})}),(0,p.jsxs)(Ye.A,{children:[(0,p.jsx)("button",{className:"btn btn-secondary",onClick:this.props.toggleDialog,children:(0,h.AP)("Cancel")}),(0,p.jsx)("button",{className:"btn btn-primary",disabled:n,onClick:this.formSubmit,children:(0,h.AP)("Submit")})]})]})}}])}(o.Component),gt=ft,pt=function(e){function t(e){var i;(0,n.default)(this,t),(i=(0,r.default)(this,t,[e])).handleInputChange=function(e){i.setState({inputValue:e.target.value})},i.formSubmit=function(){var e=i.props,t=e.orgID,n=e.email,a=i.state.inputValue.trim();if(!a)return i.setState({formErrorMsg:(0,h.AP)("It is required.")}),!1;i.setState({submitBtnDisabled:!0}),L.k.orgAdminSetOrgUserQuota(t,n,a).then((function(e){i.props.updateQuota(e.data.quota_total),i.props.toggleDialog()})).catch((function(e){var t=E.Aq.getErrorMsg(e);i.setState({formErrorMsg:t,submitBtnDisabled:!1})}))};var a=i.props.quotaTotal<0?"":i.props.quotaTotal/1e6;return i.state={inputValue:a,submitBtnDisabled:!1},i}return(0,s.default)(t,e),(0,a.default)(t,[{key:"render",value:function(){var e=this.state,t=e.inputValue,i=e.formErrorMsg,n=e.submitBtnDisabled;return(0,p.jsxs)(ze.A,{isOpen:!0,centered:!0,toggle:this.props.toggleDialog,children:[(0,p.jsx)(Ve.A,{toggle:this.props.toggleDialog,children:(0,h.AP)("Set user quota")}),(0,p.jsx)(Ue.A,{children:(0,p.jsxs)(o.Fragment,{children:[(0,p.jsxs)(Ae.A,{children:[(0,p.jsx)("input",{type:"text",className:"form-control",value:t,onChange:this.handleInputChange}),(0,p.jsx)(ve.A,{children:"MB"})]}),(0,p.jsx)("p",{className:"small text-secondary mt-2 mb-2",children:(0,h.AP)("Tip: 0 means default limit")}),i&&(0,p.jsx)("p",{className:"error m-0 mt-2",children:i})]})}),(0,p.jsxs)(Ye.A,{children:[(0,p.jsx)("button",{className:"btn btn-secondary",onClick:this.props.toggleDialog,children:(0,h.AP)("Cancel")}),(0,p.jsx)("button",{className:"btn btn-primary",disabled:n,onClick:this.formSubmit,children:(0,h.AP)("Submit")})]})]})}}])}(o.Component),mt=pt,vt=i(60096),xt=window.org.pageOptions,yt=xt.orgID,bt=xt.orgName,At=function(e){function t(e){var i;return(0,n.default)(this,t),(i=(0,r.default)(this,t,[e])).updateName=function(e){i.setState({name:e})},i.updateContactEmail=function(e){i.setState({contact_email:e})},i.updateQuota=function(e){i.setState({quota_total:e})},i.state={loading:!0,errorMsg:""},i}return(0,s.default)(t,e),(0,a.default)(t,[{key:"componentDidMount",value:function(){var e=this,t=decodeURIComponent(this.props.email);L.k.orgAdminGetOrgUserInfo(yt,t).then((function(t){e.setState(Object.assign({loading:!1},t.data))})).catch((function(t){e.setState({loading:!1,errorMsg:E.Aq.getErrorMsg(t,!0)})}))}},{key:"render",value:function(){return(0,p.jsxs)(o.Fragment,{children:[(0,p.jsx)(_,{}),(0,p.jsx)("div",{className:"main-panel-center flex-row",children:(0,p.jsxs)("div",{className:"cur-view-container",children:[(0,p.jsx)(dt,{email:this.props.email,currentItem:"profile"}),(0,p.jsx)("div",{className:"cur-view-content",children:(0,p.jsx)(_t,{data:this.state,updateName:this.updateName,updateContactEmail:this.updateContactEmail,updateQuota:this.updateQuota})})]})})]})}}])}(o.Component),_t=function(e){function t(e){var i;return(0,n.default)(this,t),(i=(0,r.default)(this,t,[e])).toggleSetNameDialog=function(){i.setState({isSetNameDialogOpen:!i.state.isSetNameDialogOpen})},i.toggleSetContactEmailDialog=function(){i.setState({isSetContactEmailDialogOpen:!i.state.isSetContactEmailDialogOpen})},i.toggleSetQuotaDialog=function(){i.setState({isSetQuotaDialogOpen:!i.state.isSetQuotaDialogOpen})},i.state={isSetNameDialogOpen:!1,isSetContactEmailDialogOpen:!1,isSetQuotaDialogOpen:!1},i}return(0,s.default)(t,e),(0,a.default)(t,[{key:"render",value:function(){var e=this.props.data,t=e.loading,i=e.errorMsg,n=e.avatar_url,a=e.email,r=e.contact_email,s=e.name,l=e.quota_total,c=e.quota_usage,d=this.state,u=d.isSetNameDialogOpen,f=d.isSetContactEmailDialogOpen,g=d.isSetQuotaDialogOpen;return t?(0,p.jsx)(F.A,{}):i?(0,p.jsx)("p",{className:"error text-center",children:i}):(0,p.jsxs)(o.Fragment,{children:[(0,p.jsxs)("dl",{children:[(0,p.jsx)("dt",{children:(0,h.AP)("Avatar")}),(0,p.jsx)("dd",{children:(0,p.jsx)("img",{src:n,width:"48",height:"48",className:"rounded",alt:""})}),(0,p.jsx)("dt",{children:"ID"}),(0,p.jsx)("dd",{children:a}),(0,p.jsx)("dt",{children:(0,h.AP)("Name")}),(0,p.jsxs)("dd",{children:[s||"--",(0,p.jsx)(vt.A,{onClick:this.toggleSetNameDialog})]}),(0,p.jsx)("dt",{children:(0,h.AP)("Contact Email")}),(0,p.jsxs)("dd",{children:[r||"--",(0,p.jsx)(vt.A,{onClick:this.toggleSetContactEmailDialog})]}),(0,p.jsx)("dt",{children:(0,h.AP)("Organization")}),(0,p.jsx)("dd",{children:bt}),(0,p.jsx)("dt",{children:(0,h.AP)("Space Used / Quota")}),(0,p.jsxs)("dd",{children:["".concat(E.Aq.bytesToSize(c)).concat(l>0?" / "+E.Aq.bytesToSize(l):""),(0,p.jsx)(vt.A,{onClick:this.toggleSetQuotaDialog})]})]}),u&&(0,p.jsx)(ht,{orgID:yt,email:a,name:s,updateName:this.props.updateName,toggleDialog:this.toggleSetNameDialog}),f&&(0,p.jsx)(gt,{orgID:yt,email:a,contactEmail:r,updateContactEmail:this.props.updateContactEmail,toggleDialog:this.toggleSetContactEmailDialog}),g&&(0,p.jsx)(mt,{orgID:yt,email:a,quotaTotal:l,updateQuota:this.props.updateQuota,toggleDialog:this.toggleSetQuotaDialog})]})}}])}(o.Component),kt=At,jt=i(73606),wt=window.org.pageOptions.orgID,St=function(e){function t(e){var i;return(0,n.default)(this,t),(i=(0,r.default)(this,t,[e])).state={loading:!0,errorMsg:""},i}return(0,s.default)(t,e),(0,a.default)(t,[{key:"componentDidMount",value:function(){var e=this,t=decodeURIComponent(this.props.email);L.k.orgAdminGetOrgUserOwnedRepos(wt,t).then((function(t){e.setState(Object.assign({loading:!1},t.data))})).catch((function(t){e.setState({loading:!1,errorMsg:E.Aq.getErrorMsg(t,!0)})}))}},{key:"render",value:function(){return(0,p.jsxs)(o.Fragment,{children:[(0,p.jsx)(_,{}),(0,p.jsx)("div",{className:"main-panel-center flex-row",children:(0,p.jsxs)("div",{className:"cur-view-container",children:[(0,p.jsx)(dt,{email:this.props.email,currentItem:"owned-repos"}),(0,p.jsx)("div",{className:"cur-view-content",children:(0,p.jsx)(Dt,{data:this.state})})]})})]})}}])}(o.Component),Dt=function(e){function t(){return(0,n.default)(this,t),(0,r.default)(this,t,arguments)}return(0,s.default)(t,e),(0,a.default)(t,[{key:"render",value:function(){var e=this.props.data,t=e.loading,i=e.errorMsg,n=e.repo_list;return t?(0,p.jsx)(F.A,{}):i?(0,p.jsx)("p",{className:"error text-center",children:i}):(0,p.jsx)(o.Fragment,{children:(0,p.jsxs)("table",{className:"table-hover",children:[(0,p.jsx)("thead",{children:(0,p.jsxs)("tr",{children:[(0,p.jsx)("th",{width:"4%"}),(0,p.jsx)("th",{width:"35%",children:(0,h.AP)("Name")}),(0,p.jsx)("th",{width:"16%",children:(0,h.AP)("Size")}),(0,p.jsx)("th",{width:"25%",children:(0,h.AP)("Last Update")}),(0,p.jsx)("th",{width:"20%"})]})}),(0,p.jsx)("tbody",{children:n.map((function(e,t){return(0,p.jsx)(Pt,{data:e},t)}))})]})})}}])}(o.Component),Pt=function(e){function t(e){var i;return(0,n.default)(this,t),(i=(0,r.default)(this,t,[e])).handleMouseOver=function(){i.setState({isHighlighted:!0,isOpIconShown:!0})},i.handleMouseOut=function(){i.setState({isHighlighted:!1,isOpIconShown:!1})},i.handleDeleteIconClick=function(){i.toggleDeleteRepoDialog()},i.toggleDeleteRepoDialog=function(){i.setState({isDeleteRepoDialogOpen:!i.state.isDeleteRepoDialogOpen})},i.deleteRepo=function(){var e=i.props.data;L.k.orgAdminDeleteOrgRepo(wt,e.repo_id).then((function(t){i.setState({deleted:!0,isRepoDeleted:!0});var n=(0,h.AP)("Successfully deleted {name}.").replace("{name}",e.repo_name);U.A.success(n)})).catch((function(e){var t=E.Aq.getErrorMsg(e);U.A.danger(t),i.setState({isRepoDeleted:!1})}))},i.state={isHighlighted:!1,isOpIconShown:!1,deleted:!1,isDeleteRepoDialogOpen:!1,isRepoDeleted:!1},i}return(0,s.default)(t,e),(0,a.default)(t,[{key:"render",value:function(){var e=this.state,t=e.deleted,i=e.isOpIconShown,n=e.isDeleteRepoDialogOpen,a=e.isHighlighted,r=this.props.data;return t?null:(0,p.jsxs)(o.Fragment,{children:[(0,p.jsxs)("tr",{className:te()({"tr-highlight":a}),onMouseOver:this.handleMouseOver,onMouseOut:this.handleMouseOut,children:[(0,p.jsx)("td",{children:(0,p.jsx)("img",{src:E.Aq.getLibIconUrl(r),alt:E.Aq.getLibIconTitle(r),title:E.Aq.getLibIconTitle(r),width:"24"})}),(0,p.jsx)("td",{children:r.repo_name}),(0,p.jsx)("td",{children:E.Aq.bytesToSize(r.size)}),(0,p.jsx)("td",{title:y()(r.last_modified).format("dddd, MMMM D, YYYY h:mm:ss A"),children:y()(r.last_modified).format("YYYY-MM-DD")}),(0,p.jsx)("td",{children:(0,p.jsx)("i",{role:"button",className:"op-icon sf3-font-delete1 sf3-font".concat(i?"":" invisible"),title:(0,h.AP)("Delete"),onClick:this.handleDeleteIconClick})})]}),n&&(0,p.jsx)(jt.A,{repo:r,isRepoDeleted:this.state.isRepoDeleted,onDeleteRepo:this.deleteRepo,toggle:this.toggleDeleteRepoDialog,isGetShare:!1})]})}}])}(o.Component),Mt=St,Nt=window.org.pageOptions.orgID,Ct=function(e){function t(e){var i;return(0,n.default)(this,t),(i=(0,r.default)(this,t,[e])).state={loading:!0,errorMsg:""},i}return(0,s.default)(t,e),(0,a.default)(t,[{key:"componentDidMount",value:function(){var e=this,t=decodeURIComponent(this.props.email);L.k.orgAdminGetOrgUserBesharedRepos(Nt,t).then((function(t){e.setState(Object.assign({loading:!1},t.data))})).catch((function(t){e.setState({loading:!1,errorMsg:E.Aq.getErrorMsg(t,!0)})}))}},{key:"render",value:function(){return(0,p.jsxs)(o.Fragment,{children:[(0,p.jsx)(_,{}),(0,p.jsx)("div",{className:"main-panel-center flex-row",children:(0,p.jsxs)("div",{className:"cur-view-container",children:[(0,p.jsx)(dt,{email:this.props.email,currentItem:"shared-repos"}),(0,p.jsx)("div",{className:"cur-view-content",children:(0,p.jsx)(It,{data:this.state})})]})})]})}}])}(o.Component),It=function(e){function t(){return(0,n.default)(this,t),(0,r.default)(this,t,arguments)}return(0,s.default)(t,e),(0,a.default)(t,[{key:"render",value:function(){var e=this.props.data,t=e.loading,i=e.errorMsg,n=e.repo_list;return t?(0,p.jsx)(F.A,{}):i?(0,p.jsx)("p",{className:"error text-center",children:i}):(0,p.jsxs)("table",{className:"table-hover",children:[(0,p.jsx)("thead",{children:(0,p.jsxs)("tr",{children:[(0,p.jsx)("th",{width:"4%"}),(0,p.jsx)("th",{width:"30%",children:(0,h.AP)("Name")}),(0,p.jsx)("th",{width:"26%",children:(0,h.AP)("Owner")}),(0,p.jsx)("th",{width:"15%",children:(0,h.AP)("Size")}),(0,p.jsx)("th",{width:"25%",children:(0,h.AP)("Last Update")})]})}),(0,p.jsx)("tbody",{children:n.map((function(e,t){return(0,p.jsx)(Ot,{data:e},t)}))})]})}}])}(o.Component),Ot=function(e){function t(){return(0,n.default)(this,t),(0,r.default)(this,t,arguments)}return(0,s.default)(t,e),(0,a.default)(t,[{key:"render",value:function(){var e=this.props.data;return(0,p.jsxs)("tr",{children:[(0,p.jsx)("td",{children:(0,p.jsx)("img",{src:E.Aq.getLibIconUrl(e),alt:E.Aq.getLibIconTitle(e),title:E.Aq.getLibIconTitle(e),width:"24"})}),(0,p.jsx)("td",{children:e.repo_name}),(0,p.jsx)("td",{children:e.owner_name}),(0,p.jsx)("td",{children:E.Aq.bytesToSize(e.size)}),(0,p.jsx)("td",{title:y()(e.last_modified).format("dddd, MMMM D, YYYY h:mm:ss A"),children:y()(e.last_modified).format("YYYY-MM-DD")})]})}}])}(o.Component),Lt=Ct;y().locale(h.vV);var Tt=(0,a.default)((function e(t){(0,n.default)(this,e),this.id=t.id,this.groupName=t.group_name,this.creatorName=t.creator_name,this.creatorEmail=t.creator_email,this.creatorContactEmail=t.creator_contact_email,this.ctime=y()(t.ctime).format("YYYY-MM-DD HH:mm:ss")})),Rt=i(52622),Et=function(e){function t(e){var i;return(0,n.default)(this,t),(i=(0,r.default)(this,t,[e])).handleInputChange=function(e){i.setState({value:e.target.value})},i.handleKeyDown=function(e){"Enter"==e.key&&(e.preventDefault(),i.handleSubmit())},i.handleSubmit=function(){var e=i.state.value.trim();if(!e)return!1;i.props.submit(e)},i.state={value:""},i}return(0,s.default)(t,e),(0,a.default)(t,[{key:"render",value:function(){return(0,p.jsxs)("div",{className:"input-icon",children:[(0,p.jsx)("i",{className:"d-flex input-icon-addon sf3-font sf3-font-search"}),(0,p.jsx)("input",{type:"text",className:"form-control search-input h-6 mr-1",style:{width:"15rem"},placeholder:this.props.placeholder,value:this.state.value,onChange:this.handleInputChange,onKeyDown:this.handleKeyDown,autoComplete:"off"})]})}}])}(o.Component),Ft=function(e){function t(e){var i;return(0,n.default)(this,t),(i=(0,r.default)(this,t,[e])).initData=function(e){L.k.orgAdminListOrgGroups(h.Id,e).then((function(e){var t=e.data.groups.map((function(e){return new Tt(e)}));i.setState({orgGroups:t,pageNext:e.data.page_next,page:e.data.page})})).catch((function(e){var t=E.Aq.getErrorMsg(e);U.A.danger(t)}))},i.onChangePageNum=function(e,t){e.preventDefault();var n=i.state.page;1==t?n+=1:n-=1,i.initData(n)},i.onFreezedItem=function(){i.setState({isItemFreezed:!0})},i.onUnfreezedItem=function(){i.setState({isItemFreezed:!1})},i.deleteGroupItem=function(e){L.k.orgAdminDeleteOrgGroup(h.Id,e.id).then((function(t){i.setState({orgGroups:i.state.orgGroups.filter((function(t){return t.id!=e.id}))});var n=(0,h.AP)("Successfully deleted {name}");n=n.replace("{name}",e.groupName),U.A.success(n)})).catch((function(e){var t=E.Aq.getErrorMsg(e);U.A.danger(t)}))},i.changeGroupItem=function(e){L.k.orgAdminGroup2Department(h.Id,e.id).then((function(t){var n=i.state.orgGroups.map((function(i){return i.id==e.id&&(i=new Tt(t.data)),i}));i.setState({orgGroups:n}),U.A.success((0,h.AP)("Successfully change the group"))})).catch((function(e){var t=E.Aq.getErrorMsg(e);U.A.danger(t)}))},i.searchItems=function(e){(0,c.oo)("".concat(h.Yc,"org/groupadmin/search-groups/?query=").concat(encodeURIComponent(e)))},i.getSearch=function(){return(0,p.jsx)(Et,{placeholder:(0,h.AP)("Search groups by name"),submit:i.searchItems})},i.state={page:1,pageNext:!1,orgGroups:[],isItemFreezed:!1},i}return(0,s.default)(t,e),(0,a.default)(t,[{key:"componentDidMount",value:function(){var e=this.state.page;this.initData(e)}},{key:"render",value:function(){var e=this,t=this.state.orgGroups;return(0,p.jsxs)(o.Fragment,{children:[(0,p.jsx)(_,{search:this.getSearch()}),(0,p.jsx)("div",{className:"main-panel-center flex-row",children:(0,p.jsxs)("div",{className:"cur-view-container",children:[(0,p.jsx)("div",{className:"cur-view-path",children:(0,p.jsx)("h3",{className:"sf-heading",children:(0,h.AP)("All Groups")})}),(0,p.jsxs)("div",{className:"cur-view-content",children:[(0,p.jsxs)("table",{children:[(0,p.jsx)("thead",{children:(0,p.jsxs)("tr",{children:[(0,p.jsx)("th",{width:"30%",children:(0,h.AP)("Name")}),(0,p.jsx)("th",{width:"35%",children:(0,h.AP)("Creator")}),(0,p.jsx)("th",{width:"23%",children:(0,h.AP)("Created At")}),(0,p.jsx)("th",{width:"12%"})]})}),(0,p.jsx)("tbody",{children:t.map((function(t){return(0,p.jsx)(zt,{group:t,isItemFreezed:e.state.isItemFreezed,onFreezedItem:e.onFreezedItem,onUnfreezedItem:e.onUnfreezedItem,deleteGroupItem:e.deleteGroupItem,changeGroupItem:e.changeGroupItem},t.id)}))})]}),(0,p.jsxs)("div",{className:"paginator",children:[1!=this.state.page&&(0,p.jsx)("a",{href:"#",onClick:function(t){return e.onChangePageNum(t,-1)},children:(0,h.AP)("Previous")}),1!=this.state.page&&this.state.pageNext&&(0,p.jsx)("span",{children:" | "}),this.state.pageNext&&(0,p.jsx)("a",{href:"#",onClick:function(t){return e.onChangePageNum(t,1)},children:(0,h.AP)("Next")})]})]})]})})]})}}])}(o.Component),zt=function(e){function t(e){var i;return(0,n.default)(this,t),(i=(0,r.default)(this,t,[e])).onMouseEnter=function(){i.props.isItemFreezed||i.setState({showMenu:!0,highlight:!0})},i.onMouseLeave=function(){i.props.isItemFreezed||i.setState({showMenu:!1,highlight:!1})},i.onDropdownToggleClick=function(e){i.toggleOperationMenu(e)},i.toggleOperationMenu=function(e){e.stopPropagation(),i.setState({isItemMenuShow:!i.state.isItemMenuShow},(function(){i.state.isItemMenuShow?i.props.onFreezedItem():(i.setState({highlight:!1,showMenu:!1}),i.props.onUnfreezedItem())}))},i.toggleDelete=function(){i.props.deleteGroupItem(i.props.group)},i.toggleChange=function(){i.props.changeGroupItem(i.props.group)},i.toggleChangeDialog=function(e){e&&e.preventDefault(),i.setState({isChangeDialogOpen:!i.state.isChangeDialogOpen})},i.renderGroupHref=function(e){return h.Yc+"org/groupadmin/"+e.id+"/"},i.renderGroupCreator=function(e){var t=h.Yc+"org/useradmin/info/"+e.creatorEmail+"/";return"system admin"==e.creatorName?(0,p.jsx)("td",{children:" -- "}):(0,p.jsx)("td",{children:(0,p.jsx)("a",{href:t,className:"font-weight-normal",children:e.creatorName})})},i.state={highlight:!1,showMenu:!1,isItemMenuShow:!1,isChangeDialogOpen:!1},i}return(0,s.default)(t,e),(0,a.default)(t,[{key:"render",value:function(){var e=this.props.group,t="system admin"!=e.creatorName&&this.state.showMenu;return(0,p.jsxs)("tr",{className:this.state.highlight?"tr-highlight":"",onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave,children:[(0,p.jsx)("td",{children:(0,p.jsx)("a",{href:this.renderGroupHref(e),className:"font-weight-normal",children:e.groupName})}),this.renderGroupCreator(e),(0,p.jsx)("td",{children:e.ctime}),(0,p.jsxs)("td",{className:"text-center cursor-pointer",children:[t&&(0,p.jsxs)(Ne.A,{isOpen:this.state.isItemMenuShow,toggle:this.toggleOperationMenu,children:[(0,p.jsx)(Ce.A,{tag:"i",className:"op-icon sf3-font-more sf3-font",title:(0,h.AP)("More operations"),"aria-label":(0,h.AP)("More operations"),"data-toggle":"dropdown","aria-expanded":this.state.isItemMenuShow,onClick:this.onDropdownToggleClick}),(0,p.jsxs)(Ie.A,{children:[(0,p.jsx)(Oe.A,{onClick:this.toggleDelete,children:(0,h.AP)("Delete")}),(0,p.jsx)(Oe.A,{onClick:this.toggleChangeDialog,children:(0,h.AP)("Change to department")})]})]}),this.state.isChangeDialogOpen&&(0,p.jsx)(Rt.A,{groupName:e.groupName,changeGroup2Department:this.toggleChange,toggleDialog:this.toggleChangeDialog})]})]})}}])}(o.Component),Ut=Ft,Bt=function(e){function t(e){var i;return(0,n.default)(this,t),(i=(0,r.default)(this,t,[e])).onMouseEnter=function(){i.props.isItemFreezed||i.setState({showMenu:!0,highlight:!0})},i.onMouseLeave=function(){i.props.isItemFreezed||i.setState({showMenu:!1,highlight:!1})},i.onDropdownToggleClick=function(e){i.toggleOperationMenu(e)},i.toggleOperationMenu=function(e){e.stopPropagation(),i.setState({isItemMenuShow:!i.state.isItemMenuShow},(function(){i.state.isItemMenuShow?i.props.onFreezedItem():(i.setState({highlight:!1,showMenu:!1}),i.props.onUnfreezedItem())}))},i.toggleDelete=function(){i.props.deleteGroupItem(i.props.group)},i.renderGroupHref=function(e){return"system admin"==e.creatorName?h.Yc+"org/departmentadmin/groups/"+e.id+"/":h.Yc+"org/groupadmin/"+e.id+"/"},i.renderGroupCreator=function(e){var t=h.Yc+"org/useradmin/info/"+e.creatorEmail+"/";return"system admin"==e.creatorName?(0,p.jsx)("td",{children:" -- "}):(0,p.jsx)("td",{children:(0,p.jsx)("a",{href:t,className:"font-weight-normal",children:e.creatorName})})},i.state={highlight:!1,showMenu:!1,isItemMenuShow:!1},i}return(0,s.default)(t,e),(0,a.default)(t,[{key:"render",value:function(){var e=this.props.group,t="system admin"!=e.creatorName&&this.state.showMenu;return(0,p.jsxs)("tr",{className:this.state.highlight?"tr-highlight":"",onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave,children:[(0,p.jsx)("td",{children:(0,p.jsx)("a",{href:this.renderGroupHref(e),className:"font-weight-normal",children:e.groupName})}),this.renderGroupCreator(e),(0,p.jsx)("td",{children:e.ctime}),(0,p.jsx)("td",{className:"text-center cursor-pointer",children:t&&(0,p.jsxs)(Ne.A,{isOpen:this.state.isItemMenuShow,toggle:this.toggleOperationMenu,children:[(0,p.jsx)(Ce.A,{tag:"i",className:"op-icon sf3-font-more sf3-font",title:(0,h.AP)("More operations"),"aria-label":(0,h.AP)("More operations"),"data-toggle":"dropdown","aria-expanded":this.state.isItemMenuShow,onClick:this.onDropdownToggleClick}),(0,p.jsx)(Ie.A,{children:(0,p.jsx)(Oe.A,{onClick:this.toggleDelete,children:(0,h.AP)("Delete")})})]})})]})}}])}(o.Component),Yt=function(e){function t(e){var i;return(0,n.default)(this,t),(i=(0,r.default)(this,t,[e])).onFreezedItem=function(){i.setState({isItemFreezed:!0})},i.onUnfreezedItem=function(){i.setState({isItemFreezed:!1})},i.state={isItemFreezed:!1},i}return(0,s.default)(t,e),(0,a.default)(t,[{key:"render",value:function(){var e=this,t=this.props.orgGroups;return(0,p.jsx)("div",{className:"cur-view-content",children:(0,p.jsxs)("table",{children:[(0,p.jsx)("thead",{children:(0,p.jsxs)("tr",{children:[(0,p.jsx)("th",{width:"30%",children:(0,h.AP)("Name")}),(0,p.jsx)("th",{width:"35%",children:(0,h.AP)("Creator")}),(0,p.jsx)("th",{width:"23%",children:(0,h.AP)("Created At")}),(0,p.jsx)("th",{width:"12%"})]})}),(0,p.jsx)("tbody",{children:t.map((function(t){return(0,p.jsx)(Bt,{group:t,isItemFreezed:e.state.isItemFreezed,onFreezedItem:e.onFreezedItem,onUnfreezedItem:e.onUnfreezedItem,deleteGroupItem:e.props.toggleDelete},t.id)}))})]})})}}])}(o.Component),Vt=function(e){function t(e){var i;return(0,n.default)(this,t),(i=(0,r.default)(this,t,[e])).getItems=function(){L.k.orgAdminSearchGroup(h.Id,i.state.query.trim()).then((function(e){var t=e.data.group_list.map((function(e){return new Tt(e)}));i.setState({orgGroups:t,loading:!1})})).catch((function(e){i.setState({loading:!1,errorMsg:E.Aq.getErrorMsg(e,!0)})}))},i.deleteGroupItem=function(e){L.k.orgAdminDeleteOrgGroup(h.Id,e.id).then((function(t){i.setState({orgGroups:i.state.orgGroups.filter((function(t){return t.id!=e.id}))});var n=(0,h.AP)("Successfully deleted {name}");n=n.replace("{name}",e.groupName),U.A.success(n)})).catch((function(e){var t=E.Aq.getErrorMsg(e);U.A.danger(t)}))},i.handleInputChange=function(e){i.setState({query:e.target.value},i.checkSubmitBtnActive)},i.checkSubmitBtnActive=function(){var e=i.state.query;i.setState({isSubmitBtnActive:e.trim()})},i.handleKeyDown=function(e){13===e.keyCode&&(i.state.isSubmitBtnActive&&i.getItems())},i.state={query:"",orgGroups:[],isSubmitBtnActive:!1,loading:!0,errorMsg:""},i}return(0,s.default)(t,e),(0,a.default)(t,[{key:"componentDidMount",value:function(){var e=this,t=new URL(document.location).searchParams;this.setState({query:t.get("query")||""},(function(){e.getItems()}))}},{key:"render",value:function(){var e=this.state,t=e.query,i=e.isSubmitBtnActive;return(0,p.jsx)(o.Fragment,{children:(0,p.jsx)("div",{className:"main-panel-center flex-row",children:(0,p.jsxs)("div",{className:"cur-view-container",children:[(0,p.jsx)("div",{className:"cur-view-path",children:(0,p.jsx)("h3",{className:"sf-heading",children:(0,h.AP)("Groups")})}),(0,p.jsxs)("div",{className:"cur-view-content",children:[(0,p.jsxs)("div",{className:"mt-4 mb-6",children:[(0,p.jsx)("h4",{className:"border-bottom font-weight-normal mb-2 pb-1",children:(0,h.AP)("Search Groups")}),(0,p.jsxs)(He.A,{tag:"div",children:[(0,p.jsx)(We.A,{row:!0,children:(0,p.jsx)(tt.A,{sm:5,children:(0,p.jsx)(V.A,{type:"text",name:"query",value:t,placeholder:(0,h.AP)("Search groups"),onChange:this.handleInputChange,onKeyDown:this.handleKeyDown})})}),(0,p.jsx)(We.A,{row:!0,children:(0,p.jsx)(tt.A,{sm:{size:5},children:(0,p.jsx)("button",{className:"btn btn-outline-primary",disabled:!i,onClick:this.getItems,children:(0,h.AP)("Submit")})})})]})]}),(0,p.jsxs)("div",{className:"mt-4 mb-6",children:[(0,p.jsx)("h4",{className:"border-bottom font-weight-normal mb-2 pb-1",children:(0,h.AP)("Result")}),(0,p.jsx)(Yt,{toggleDelete:this.deleteGroupItem,orgGroups:this.state.orgGroups})]})]})]})})})}}])}(o.Component),qt=function(e){function t(){return(0,n.default)(this,t),(0,r.default)(this,t,arguments)}return(0,s.default)(t,e),(0,a.default)(t,[{key:"render",value:function(){var e=this.props,t=e.groupID,i=e.currentItem,n="".concat(h.Yc,"org/groupadmin/").concat(t,"/");return(0,p.jsx)("div",{className:"cur-view-path org-admin-user-nav",children:(0,p.jsxs)("ul",{className:"nav",children:[(0,p.jsx)("li",{className:"nav-item",children:(0,p.jsx)(c.N_,{to:n,className:"nav-link".concat("info"==i?" active":""),children:(0,h.AP)("Group info")})}),(0,p.jsx)("li",{className:"nav-item",children:(0,p.jsx)(c.N_,{to:"".concat(n,"repos/"),className:"nav-link".concat("repos"==i?" active":""),children:(0,h.AP)("Libraries")})}),(0,p.jsx)("li",{className:"nav-item",children:(0,p.jsx)(c.N_,{to:"".concat(n,"members/"),className:"nav-link".concat("members"==i?" active":""),children:(0,h.AP)("Members")})})]})})}}])}(o.Component),Ht=qt,Wt=window.org.pageOptions.orgID,Gt=function(e){function t(e){var i;return(0,n.default)(this,t),(i=(0,r.default)(this,t,[e])).state={loading:!0,errorMsg:""},i}return(0,s.default)(t,e),(0,a.default)(t,[{key:"componentDidMount",value:function(){var e=this;L.k.orgAdminGetGroup(Wt,this.props.groupID).then((function(t){e.setState(Object.assign({loading:!1},t.data))})).catch((function(t){e.setState({loading:!1,errorMsg:E.Aq.getErrorMsg(t,!0)})}))}},{key:"render",value:function(){return(0,p.jsxs)(o.Fragment,{children:[(0,p.jsx)(_,{}),(0,p.jsx)("div",{className:"main-panel-center flex-row",children:(0,p.jsxs)("div",{className:"cur-view-container",children:[(0,p.jsx)(Ht,{groupID:this.props.groupID,currentItem:"info"}),(0,p.jsx)("div",{className:"cur-view-content",children:(0,p.jsx)(Qt,{data:this.state})})]})})]})}}])}(o.Component),Qt=function(e){function t(){return(0,n.default)(this,t),(0,r.default)(this,t,arguments)}return(0,s.default)(t,e),(0,a.default)(t,[{key:"render",value:function(){var e=this.props.data,t=e.loading,i=e.errorMsg,n=e.group_name,a=e.creator_email,r=e.creator_name;return t?(0,p.jsx)(F.A,{}):i?(0,p.jsxs)("div",{className:"w-100 h-100 d-flex flex-column align-items-center justify-content-center text-center",children:[(0,p.jsx)("img",{src:"".concat(h.SG,"img/error-tip.png"),alt:"",width:"100"}),(0,p.jsx)("p",{className:"mt-2",children:i})]}):(0,p.jsxs)("dl",{className:"mt-0",children:[(0,p.jsx)("dt",{children:(0,h.AP)("Name")}),(0,p.jsx)("dd",{children:n}),(0,p.jsx)("dt",{children:(0,h.AP)("Creator")}),(0,p.jsx)("dd",{children:(0,p.jsx)(c.N_,{to:"".concat(h.Yc,"org/useradmin/info/").concat(encodeURIComponent(a),"/"),children:r})})]})}}])}(o.Component),Xt=Gt,Kt=window.org.pageOptions.orgID,$t=function(e){function t(e){var i;return(0,n.default)(this,t),(i=(0,r.default)(this,t,[e])).state={loading:!0,errorMsg:""},i}return(0,s.default)(t,e),(0,a.default)(t,[{key:"componentDidMount",value:function(){var e=this;L.k.orgAdminListGroupRepos(Kt,this.props.groupID).then((function(t){e.setState(Object.assign({loading:!1},t.data))})).catch((function(t){e.setState({loading:!1,errorMsg:E.Aq.getErrorMsg(t,!0)})}))}},{key:"render",value:function(){return(0,p.jsxs)(o.Fragment,{children:[(0,p.jsx)(_,{}),(0,p.jsx)("div",{className:"main-panel-center flex-row",children:(0,p.jsxs)("div",{className:"cur-view-container",children:[(0,p.jsx)(Ht,{groupID:this.props.groupID,currentItem:"repos"}),(0,p.jsx)("div",{className:"cur-view-content",children:(0,p.jsx)(Zt,{data:this.state})})]})})]})}}])}(o.Component),Zt=function(e){function t(e){return(0,n.default)(this,t),(0,r.default)(this,t,[e])}return(0,s.default)(t,e),(0,a.default)(t,[{key:"render",value:function(){var e=this.props.data,t=e.loading,i=e.errorMsg,n=e.libraries;return t?(0,p.jsx)(F.A,{}):i?(0,p.jsxs)("div",{className:"w-100 h-100 d-flex flex-column align-items-center justify-content-center text-center",children:[(0,p.jsx)("img",{src:"".concat(h.SG,"img/error-tip.png"),alt:"",width:"100"}),(0,p.jsx)("p",{className:"mt-2",children:i})]}):(0,p.jsx)(o.Fragment,{children:(0,p.jsxs)("table",{children:[(0,p.jsx)("thead",{children:(0,p.jsxs)("tr",{children:[(0,p.jsx)("th",{width:"4%"}),(0,p.jsx)("th",{width:"35%",children:(0,h.AP)("Name")}),(0,p.jsx)("th",{width:"20%",children:(0,h.AP)("Size")}),(0,p.jsx)("th",{width:"26%",children:(0,h.AP)("Shared By")}),(0,p.jsx)("th",{width:"15%"})]})}),(0,p.jsx)("tbody",{children:n.map((function(e,t){return(0,p.jsx)(Jt,{data:e},t)}))})]})})}}])}(o.Component),Jt=function(e){function t(e){var i;return(0,n.default)(this,t),(i=(0,r.default)(this,t,[e])).handleMouseOver=function(){i.setState({isHighlighted:!0,isOpIconShown:!0})},i.handleMouseOut=function(){i.setState({isHighlighted:!1,isOpIconShown:!1})},i.handleDeleteIconClick=function(){i.toggleDeleteRepoDialog()},i.toggleDeleteRepoDialog=function(){i.setState({isDeleteRepoDialogOpen:!i.state.isDeleteRepoDialogOpen})},i.deleteRepo=function(){var e=i.props.data;L.k.orgAdminDeleteOrgRepo(Kt,e.repo_id).then((function(t){i.setState({deleted:!0,isRepoDeleted:!0});var n=(0,h.AP)("Successfully deleted {name}.").replace("{name}",e.name);U.A.success(n)})).catch((function(e){var t=E.Aq.getErrorMsg(e);U.A.danger(t),i.setState({isRepoDeleted:!1})}))},i.state={isHighlighted:!1,isOpIconShown:!1,deleted:!1,isDeleteRepoDialogOpen:!1,isRepoDeleted:!1},i}return(0,s.default)(t,e),(0,a.default)(t,[{key:"render",value:function(){var e=this.state,t=e.deleted,i=e.isOpIconShown,n=e.isDeleteRepoDialogOpen,a=e.isHighlighted,r=this.props.data;return t?null:(0,p.jsxs)(o.Fragment,{children:[(0,p.jsxs)("tr",{className:te()({"tr-highlight":a}),onMouseOver:this.handleMouseOver,onMouseOut:this.handleMouseOut,children:[(0,p.jsx)("td",{children:(0,p.jsx)("img",{src:E.Aq.getLibIconUrl(r),alt:E.Aq.getLibIconTitle(r),title:E.Aq.getLibIconTitle(r),width:"24"})}),(0,p.jsx)("td",{children:r.name}),(0,p.jsx)("td",{children:E.Aq.bytesToSize(r.size)}),(0,p.jsx)("td",{children:(0,p.jsx)(c.N_,{to:"".concat(h.Yc,"org/useradmin/info/").concat(encodeURIComponent(r.shared_by),"/"),children:r.shared_by_name})}),(0,p.jsx)("td",{children:(0,p.jsx)("i",{className:"op-icon sf3-font-delete1 sf3-font".concat(i?"":" invisible"),title:(0,h.AP)("Delete"),onClick:this.handleDeleteIconClick})})]}),n&&(0,p.jsx)(jt.A,{repo:r,isRepoDeleted:this.state.isRepoDeleted,onDeleteRepo:this.deleteRepo,toggle:this.toggleDeleteRepoDialog,isGetShare:!1})]})}}])}(o.Component),ei=$t,ti=window.org.pageOptions.orgID,ii=function(e){function t(e){var i;return(0,n.default)(this,t),(i=(0,r.default)(this,t,[e])).state={loading:!0,errorMsg:""},i}return(0,s.default)(t,e),(0,a.default)(t,[{key:"componentDidMount",value:function(){var e=this;L.k.orgAdminListGroupMembers(ti,this.props.groupID).then((function(t){e.setState(Object.assign({loading:!1},t.data))})).catch((function(t){e.setState({loading:!1,errorMsg:E.Aq.getErrorMsg(t,!0)})}))}},{key:"render",value:function(){return(0,p.jsxs)(o.Fragment,{children:[(0,p.jsx)(_,{}),(0,p.jsx)("div",{className:"main-panel-center flex-row",children:(0,p.jsxs)("div",{className:"cur-view-container",children:[(0,p.jsx)(Ht,{groupID:this.props.groupID,currentItem:"members"}),(0,p.jsx)("div",{className:"cur-view-content",children:(0,p.jsx)(ni,{data:this.state})})]})})]})}}])}(o.Component),ni=function(e){function t(e){return(0,n.default)(this,t),(0,r.default)(this,t,[e])}return(0,s.default)(t,e),(0,a.default)(t,[{key:"render",value:function(){var e=this.props.data,t=e.loading,i=e.errorMsg,n=e.members;return t?(0,p.jsx)(F.A,{}):i?(0,p.jsxs)("div",{className:"w-100 h-100 d-flex flex-column align-items-center justify-content-center text-center",children:[(0,p.jsx)("img",{src:"".concat(h.SG,"img/error-tip.png"),alt:"",width:"100"}),(0,p.jsx)("p",{className:"mt-2",children:i})]}):(0,p.jsx)(o.Fragment,{children:(0,p.jsxs)("table",{className:"table-hover",children:[(0,p.jsx)("thead",{children:(0,p.jsxs)("tr",{children:[(0,p.jsx)("th",{width:"10%"}),(0,p.jsx)("th",{width:"50%",children:(0,h.AP)("Name")}),(0,p.jsx)("th",{width:"40%",children:(0,h.AP)("Role")})]})}),(0,p.jsx)("tbody",{children:n.map((function(e,t){return(0,p.jsx)(ai,{data:e},t)}))})]})})}}])}(o.Component),ai=function(e){function t(e){return(0,n.default)(this,t),(0,r.default)(this,t,[e])}return(0,s.default)(t,e),(0,a.default)(t,[{key:"getRoleText",value:function(){switch(this.props.data.role){case"Owner":return(0,h.AP)("Owner");case"Admin":return(0,h.AP)("Admin");case"Member":return(0,h.AP)("Member")}}},{key:"render",value:function(){var e=this.props.data;return(0,p.jsx)(o.Fragment,{children:(0,p.jsxs)("tr",{children:[(0,p.jsx)("td",{className:"text-center",children:(0,p.jsx)("img",{src:e.avatar_url,alt:"",className:"avatar",width:"32"})}),(0,p.jsx)("td",{children:(0,p.jsx)(c.N_,{to:"".concat(h.Yc,"org/useradmin/info/").concat(encodeURIComponent(e.email),"/"),children:e.name})}),(0,p.jsx)("td",{children:this.getRoleText()})]})})}}])}(o.Component),ri=ii,si=i(40898),oi=(0,a.default)((function e(t){(0,n.default)(this,e),this.repoID=t.repo_id,this.repoName=t.repo_name,this.ownerName=t.owner_name,this.ownerEmail=t.owner_email,this.size=t.size,this.file_count=t.file_count,this.encrypted=t.encrypted,this.isDepartmentRepo=t.is_department_repo,this.groupID=t.group_id})),li=function(e){function t(e){var i;return(0,n.default)(this,t),(i=(0,r.default)(this,t,[e])).navItems=[{name:"all",urlPart:"repoadmin",text:(0,h.AP)("All")},{name:"trash",urlPart:"repoadmin-trash",text:(0,h.AP)("Trash")}],i}return(0,s.default)(t,e),(0,a.default)(t,[{key:"render",value:function(){var e=this.props.currentItem;return(0,p.jsx)("div",{className:"cur-view-path tab-nav-container",children:(0,p.jsx)("ul",{className:"nav",children:this.navItems.map((function(t,i){return(0,p.jsx)("li",{className:"nav-item",children:(0,p.jsx)(c.N_,{to:"".concat(h.Yc,"org/").concat(t.urlPart,"/"),className:"nav-link".concat(e==t.name?" active":""),children:t.text})},i)}))})})}}])}(o.Component),ci=li,di=function(e){function t(e){var i;return(0,n.default)(this,t),(i=(0,r.default)(this,t,[e])).onFreezedItem=function(){i.setState({isItemFreezed:!0})},i.onUnfreezedItem=function(){i.setState({isItemFreezed:!1})},i.getPreviousPageList=function(){i.props.getListByPage(i.props.pageInfo.current_page-1)},i.getNextPageList=function(){i.props.getListByPage(i.props.pageInfo.current_page+1)},i.sortByFileCount=function(e){e.preventDefault(),i.props.sortItems("file_count")},i.sortBySize=function(e){e.preventDefault(),i.props.sortItems("size")},i.state={isItemFreezed:!1},i}return(0,s.default)(t,e),(0,a.default)(t,[{key:"render",value:function(){var e=this,t=this.props,i=t.loading,n=t.errorMsg,a=t.items,r=t.pageInfo,s=t.curPerPage,l=t.sortBy;if(i)return(0,p.jsx)(F.A,{});if(n)return(0,p.jsx)("p",{className:"error text-center",children:n});var c=(0,p.jsx)(ae.A,{text:(0,h.AP)("No libraries")}),d=(0,p.jsx)("span",{className:"sf3-font sf3-font-sort3"}),u=(0,p.jsx)("span",{className:"sf3-font sf3-font-down"}),f=(0,p.jsxs)(o.Fragment,{children:[(0,p.jsxs)("table",{children:[(0,p.jsx)("thead",{children:(0,p.jsxs)("tr",{children:[(0,p.jsx)("th",{width:"5%"}),(0,p.jsx)("th",{width:"25%",children:(0,h.AP)("Name")}),(0,p.jsx)("th",{width:"15%",children:void 0!=l?(0,p.jsxs)(o.Fragment,{children:[(0,p.jsxs)("a",{className:"d-inline-block table-sort-op",href:"#",onClick:this.sortByFileCount,children:[(0,h.AP)("Files")," ","file_count"==l?u:d]})," / ",(0,p.jsxs)("a",{className:"d-inline-block table-sort-op",href:"#",onClick:this.sortBySize,children:[(0,h.AP)("Size")," ","size"==l?u:d]})]}):(0,h.AP)("Files")/(0,h.AP)("Size")}),(0,p.jsx)("th",{width:"32%",children:"ID"}),(0,p.jsx)("th",{width:"18%",children:(0,h.AP)("Owner")}),(0,p.jsx)("th",{width:"5%"})]})}),(0,p.jsx)("tbody",{children:a.map((function(t,i){return(0,p.jsx)(ui,{repo:t,isItemFreezed:e.state.isItemFreezed,onFreezedItem:e.onFreezedItem,onUnfreezedItem:e.onUnfreezedItem,onDeleteRepo:e.props.onDeleteRepo,transferRepoItem:e.props.transferRepoItem},i)}))})]}),r&&(0,p.jsx)(G.A,{gotoPreviousPage:this.getPreviousPageList,gotoNextPage:this.getNextPageList,currentPage:r.current_page,hasNextPage:r.has_next_page,curPerPage:s,resetPerPage:this.props.resetPerPage})]});return a.length?f:c}}])}(o.Component),ui=function(e){function t(e){var i;return(0,n.default)(this,t),(i=(0,r.default)(this,t,[e])).onMouseEnter=function(){i.props.isItemFreezed||i.setState({showMenu:!0,highlight:!0})},i.onMouseLeave=function(){i.props.isItemFreezed||i.setState({showMenu:!1,highlight:!1})},i.onDropdownToggleClick=function(e){i.toggleOperationMenu(e)},i.toggleOperationMenu=function(e){e.stopPropagation(),i.setState({isItemMenuShow:!i.state.isItemMenuShow},(function(){i.state.isItemMenuShow?i.props.onFreezedItem():(i.setState({highlight:!1,showMenu:!1}),i.props.onUnfreezedItem())}))},i.toggleDelete=function(){i.props.onDeleteRepo(i.props.repo)},i.renderRepoOwnerHref=function(e){return e.isDepartmentRepo?h.Yc+"org/groupadmin/"+e.groupID+"/":h.Yc+"org/useradmin/info/"+e.ownerEmail+"/"},i.toggleTransfer=function(){i.setState({isTransferDialogShow:!i.state.isTransferDialogShow})},i.onTransferRepo=function(e,t){var n=i.props.repo;L.k.orgAdminTransferOrgRepo(h.Id,n.repoID,e,t).then((function(e){var t=e.data,a=t.owner_name,r=t.owner_email;i.props.transferRepoItem(n.repoID,a,r);var s=(0,h.AP)("Successfully transferred the library.");U.A.success(s)})).catch((function(e){var t=E.Aq.getErrorMsg(e);U.A.danger(t)}))},i.state={highlight:!1,showMenu:!1,isItemMenuShow:!1,isTransferDialogShow:!1},i}return(0,s.default)(t,e),(0,a.default)(t,[{key:"render",value:function(){var e=this.props.repo,t=this.state.showMenu,i=e.encrypted?(0,h.AP)("Encrypted library"):(0,h.AP)("Read-Write library");return(0,p.jsxs)(o.Fragment,{children:[(0,p.jsxs)("tr",{className:this.state.highlight?"tr-highlight":"",onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave,children:[(0,p.jsx)("td",{children:(0,p.jsx)("img",{src:E.Aq.getLibIconUrl(e),title:i,alt:i,width:"24"})}),(0,p.jsx)("td",{children:e.repoName}),(0,p.jsx)("td",{children:"".concat(e.file_count," / ").concat(E.Aq.bytesToSize(e.size))}),(0,p.jsx)("td",{children:e.repoID}),(0,p.jsx)("td",{children:(0,p.jsx)("a",{href:this.renderRepoOwnerHref(e),children:e.ownerName})}),(0,p.jsx)("td",{className:"text-center cursor-pointer",children:t&&(0,p.jsxs)(Ne.A,{isOpen:this.state.isItemMenuShow,toggle:this.toggleOperationMenu,children:[(0,p.jsx)(Ce.A,{tag:"i",role:"button",className:"op-icon sf3-font-more sf3-font",title:(0,h.AP)("More operations"),"aria-label":(0,h.AP)("More operations"),"data-toggle":"dropdown","aria-expanded":this.state.isItemMenuShow,onClick:this.onDropdownToggleClick}),(0,p.jsxs)(Ie.A,{children:[(0,p.jsx)(Oe.A,{onClick:this.toggleDelete,children:(0,h.AP)("Delete")}),(0,p.jsx)(Oe.A,{onClick:this.toggleTransfer,children:(0,h.AP)("Transfer")})]})]})})]}),this.state.isTransferDialogShow&&(0,p.jsx)(Fe.A,{children:(0,p.jsx)(si.A,{itemName:e.repoName,onTransferRepo:this.onTransferRepo,toggleDialog:this.toggleTransfer,isOrgAdmin:!0})})]})}}])}(o.Component),hi=function(e){function t(e){var i;return(0,n.default)(this,t),(i=(0,r.default)(this,t,[e])).getReposByPage=function(e){var t=i.state.perPage;L.k.orgAdminListOrgRepos(h.Id,e,t,i.state.sortBy).then((function(e){var t=e.data.repo_list.map((function(e){return new oi(e)})),n={};void 0===e.data.page_info?n={current_page:e.data.page,has_next_page:e.data.page_next}:n=e.data.page_info;i.setState({loading:!1,repos:t,pageInfo:n})})).catch((function(e){i.setState({loading:!1,errorMsg:E.Aq.getErrorMsg(e,!0)})}))},i.sortItems=function(e){i.setState({currentPage:1,sortBy:e},(function(){var e=new URL(location.href),t=new URLSearchParams(e.search),n=i.state,a=n.currentPage,r=n.sortBy;t.set("page",a),t.set("order_by",r),e.search=t.toString(),(0,c.oo)(e.toString()),i.getReposByPage(a)}))},i.resetPerPage=function(e){i.setState({perPage:e},(function(){i.getReposByPage(1)}))},i.deleteRepoItem=function(e){L.k.orgAdminDeleteOrgRepo(h.Id,e.repoID).then((function(t){i.setState({repos:i.state.repos.filter((function(t){return t.repoID!==e.repoID}))});var n=(0,h.AP)("Successfully deleted {name}");n=n.replace("{name}",e.repoName),U.A.success(n)})).catch((function(e){var t=E.Aq.getErrorMsg(e);U.A.danger(t)}))},i.transferRepoItem=function(e,t,n){i.setState({repos:i.state.repos.map((function(i){return i.repoID==e&&(i.ownerEmail=n,i.ownerName=t),i}))})},i.state={loading:!0,errorMsg:"",repos:[],pageInfo:{},perPage:100,sortBy:""},i}return(0,s.default)(t,e),(0,a.default)(t,[{key:"componentDidMount",value:function(){var e=this,t=new URL(window.location).searchParams,i=this.state,n=i.currentPage,a=void 0===n?1:n,r=i.perPage,s=i.sortBy;this.setState({sortBy:t.get("order_by")||s,perPage:parseInt(t.get("per_page")||r),currentPage:parseInt(t.get("page")||a)},(function(){e.getReposByPage(e.state.currentPage)}))}},{key:"render",value:function(){return(0,p.jsxs)(o.Fragment,{children:[(0,p.jsx)(_,{}),(0,p.jsx)("div",{className:"main-panel-center flex-row",children:(0,p.jsxs)("div",{className:"cur-view-container",children:[(0,p.jsx)(ci,{currentItem:"all"}),(0,p.jsx)("div",{className:"cur-view-content",children:(0,p.jsx)(di,{loading:this.state.loading,errorMsg:this.state.errorMsg,items:this.state.repos,sortBy:this.state.sortBy,sortItems:this.sortItems,pageInfo:this.state.pageInfo,curPerPage:this.state.perPage,getListByPage:this.getReposByPage,resetPerPage:this.resetPerPage,onDeleteRepo:this.deleteRepoItem,transferRepoItem:this.transferRepoItem})})]})})]})}}])}(o.Component),fi=i(61314);y().extend(ne());var gi=function(e){function t(e){var i;return(0,n.default)(this,t),(i=(0,r.default)(this,t,[e])).onFreezedItem=function(){i.setState({isItemFreezed:!0})},i.onUnfreezedItem=function(){i.setState({isItemFreezed:!1})},i.getPreviousPageList=function(){i.props.getListByPage(i.props.pageInfo.current_page-1)},i.getNextPageList=function(){i.props.getListByPage(i.props.pageInfo.current_page+1)},i.state={isItemFreezed:!1},i}return(0,s.default)(t,e),(0,a.default)(t,[{key:"render",value:function(){var e=this,t=this.props,i=t.loading,n=t.errorMsg,a=t.items,r=t.pageInfo,s=t.curPerPage;if(i)return(0,p.jsx)(F.A,{});if(n)return(0,p.jsx)("p",{className:"error text-center mt-4",children:n});var l=(0,p.jsx)(ae.A,{text:(0,h.AP)("No deleted libraries")}),c=(0,p.jsxs)(o.Fragment,{children:[(0,p.jsxs)("table",{className:"table-hover",children:[(0,p.jsx)("thead",{children:(0,p.jsxs)("tr",{children:[(0,p.jsx)("th",{width:"5%"}),(0,p.jsx)("th",{width:"43%",children:(0,h.AP)("Name")}),(0,p.jsx)("th",{width:"27%",children:(0,h.AP)("Owner")}),(0,p.jsx)("th",{width:"20%",children:(0,h.AP)("Deleted Time")}),(0,p.jsx)("th",{width:"5%"})]})}),(0,p.jsx)("tbody",{children:a.map((function(t,i){return(0,p.jsx)(pi,{repo:t,isItemFreezed:e.state.isItemFreezed,onFreezedItem:e.onFreezedItem,onUnfreezedItem:e.onUnfreezedItem,onDeleteRepo:e.props.onDeleteRepo,onRestoreRepo:e.props.onRestoreRepo},i)}))})]}),r&&(0,p.jsx)(G.A,{gotoPreviousPage:this.getPreviousPageList,gotoNextPage:this.getNextPageList,currentPage:r.current_page,hasNextPage:r.has_next_page,curPerPage:s,resetPerPage:this.props.resetPerPage})]});return a.length?c:l}}])}(o.Component),pi=function(e){function t(e){var i;return(0,n.default)(this,t),(i=(0,r.default)(this,t,[e])).handleMouseOver=function(){i.props.isItemFreezed||i.setState({isOpIconShown:!0,isHighlighted:!0})},i.handleMouseOut=function(){i.props.isItemFreezed||i.setState({isOpIconShown:!1,isHighlighted:!1})},i.onUnfreezedItem=function(){i.setState({isHighlighted:!1,isOpIconShow:!1}),i.props.onUnfreezedItem()},i.onDeleteRepo=function(){var e=i.props.repo;L.k.orgAdminDeleteTrashRepo(h.Id,e.id).then((function(t){i.props.onDeleteRepo(e);var n=(0,h.AP)("Successfully deleted {name}.").replace("{name}",e.name);U.A.success(n)})).catch((function(e){var t=E.Aq.getErrorMsg(e);U.A.danger(t)}))},i.onRestoreRepo=function(){var e=i.props.repo;L.k.orgAdminRestoreTrashRepo(h.Id,e.id).then((function(t){i.props.onRestoreRepo(e);var n=(0,h.AP)("Successfully restored the library.");U.A.success(n)})).catch((function(e){var t=E.Aq.getErrorMsg(e);U.A.danger(t)}))},i.toggleDeleteRepoDialog=function(e){e&&e.preventDefault(),i.setState({isDeleteRepoDialogOpen:!i.state.isDeleteRepoDialogOpen})},i.toggleRestoreRepoDialog=function(e){e&&e.preventDefault(),i.setState({isRestoreRepoDialogOpen:!i.state.isRestoreRepoDialogOpen})},i.translateOperations=function(e){var t="";switch(e){case"Restore":t=(0,h.AP)("Restore");break;case"Delete":t=(0,h.AP)("Delete")}return t},i.onMenuItemClick=function(e){switch(e){case"Restore":i.toggleRestoreRepoDialog();break;case"Delete":i.toggleDeleteRepoDialog()}},i.state={isHighlighted:!1,isOpIconShown:!1,isDeleteRepoDialogOpen:!1,isRestoreRepoDialogOpen:!1},i}return(0,s.default)(t,e),(0,a.default)(t,[{key:"render",value:function(){var e=this.props.repo,t=this.state,i=t.isHighlighted,n=t.isOpIconShown,a=t.isDeleteRepoDialogOpen,r=t.isRestoreRepoDialogOpen,s=E.Aq.getLibIconUrl(e),l=E.Aq.getLibIconTitle(e),c='<span class="op-target">'+E.Aq.HTMLescape(e.name)+"</span>";return(0,p.jsxs)(o.Fragment,{children:[(0,p.jsxs)("tr",{className:te()({"tr-highlight":i}),onMouseEnter:this.handleMouseOver,onMouseLeave:this.handleMouseOut,children:[(0,p.jsx)("td",{children:(0,p.jsx)("img",{src:s,title:l,alt:l,width:"24"})}),(0,p.jsx)("td",{children:e.name}),(0,p.jsx)("td",{children:-1==e.owner.indexOf("@seafile_group")?(0,p.jsx)(he,{email:e.owner,name:e.owner_name}):e.group_name}),(0,p.jsx)("td",{children:y()(e.delete_time).fromNow()}),(0,p.jsx)("td",{children:n&&(0,p.jsx)(fi.A,{operations:["Restore","Delete"],translateOperations:this.translateOperations,onMenuItemClick:this.onMenuItemClick,onFreezedItem:this.props.onFreezedItem,onUnfreezedItem:this.onUnfreezedItem})})]}),a&&(0,p.jsx)(Fe.A,{children:(0,p.jsx)(Te.A,{title:(0,h.AP)("Delete Library"),message:(0,h.AP)("Are you sure you want to delete {placeholder} completely?").replace("{placeholder}",c),executeOperation:this.onDeleteRepo,confirmBtnText:(0,h.AP)("Delete"),toggleDialog:this.toggleDeleteRepoDialog})}),r&&(0,p.jsx)(Fe.A,{children:(0,p.jsx)(Te.A,{title:(0,h.AP)("Restore Library"),message:(0,h.AP)("Are you sure you want to restore {placeholder}?").replace("{placeholder}",c),executeOperation:this.onRestoreRepo,confirmBtnText:(0,h.AP)("Restore"),toggleDialog:this.toggleRestoreRepoDialog})})]})}}])}(o.Component),mi=function(e){function t(e){var i;return(0,n.default)(this,t),(i=(0,r.default)(this,t,[e])).toggleCleanTrashDialog=function(){i.setState({isCleanTrashDialogOpen:!i.state.isCleanTrashDialogOpen})},i.getReposByPage=function(e){var t=i.state.perPage;L.k.orgAdminListTrashRepos(h.Id,e,t).then((function(e){i.setState({repos:e.data.repos,pageInfo:e.data.page_info,loading:!1})})).catch((function(e){i.setState({loading:!1,errorMsg:E.Aq.getErrorMsg(e,!0)})}))},i.resetPerPage=function(e){i.setState({perPage:e},(function(){i.getReposByPage(1)}))},i.onDeleteRepo=function(e){var t=i.state.repos.filter((function(t){return t.id!=e.id}));i.setState({repos:t})},i.onRestoreRepo=function(e){var t=i.state.repos.filter((function(t){return t.id!=e.id}));i.setState({repos:t})},i.cleanTrash=function(){L.k.orgAdminCleanTrashRepo(h.Id).then((function(e){i.setState({repos:[]}),U.A.success((0,h.AP)("Successfully cleared trash."))})).catch((function(e){var t=E.Aq.getErrorMsg(e);U.A.danger(t)}))},i.state={loading:!0,errorMsg:"",repos:[],pageInfo:{},perPage:100,isCleanTrashDialogOpen:!1},i}return(0,s.default)(t,e),(0,a.default)(t,[{key:"componentDidMount",value:function(){var e=this,t=new URL(window.location).searchParams,i=this.state,n=i.currentPage,a=void 0===n?1:n,r=i.perPage;this.setState({perPage:parseInt(t.get("per_page")||r),currentPage:parseInt(t.get("page")||a)},(function(){e.getReposByPage(e.state.currentPage)}))}},{key:"render",value:function(){var e=this.state.isCleanTrashDialogOpen;return(0,p.jsxs)(o.Fragment,{children:[this.state.repos.length?(0,p.jsx)(_,(0,me.default)((0,me.default)({},this.props),{},{children:(0,p.jsx)(S.A,{className:"operation-item",onClick:this.toggleCleanTrashDialog,children:(0,h.AP)("Clean")})})):(0,p.jsx)(_,(0,me.default)({},this.props)),(0,p.jsx)("div",{className:"main-panel-center flex-row",children:(0,p.jsxs)("div",{className:"cur-view-container",children:[(0,p.jsx)(ci,{currentItem:"trash"}),(0,p.jsx)("div",{className:"cur-view-content",children:(0,p.jsx)(gi,{loading:this.state.loading,errorMsg:this.state.errorMsg,items:this.state.repos,pageInfo:this.state.pageInfo,onDeleteRepo:this.onDeleteRepo,onRestoreRepo:this.onRestoreRepo,getListByPage:this.getReposByPage,resetPerPage:this.resetPerPage,curPerPage:this.state.perPage})})]})}),e&&(0,p.jsx)(Te.A,{title:(0,h.AP)("Clear Trash"),message:(0,h.AP)("Are you sure you want to clear trash?"),executeOperation:this.cleanTrash,confirmBtnText:(0,h.AP)("Clear"),toggleDialog:this.toggleCleanTrashDialog})]})}}])}(o.Component),vi=function(e){function t(e){var i;return(0,n.default)(this,t),(i=(0,r.default)(this,t,[e])).state={org_name:"",traffic_this_month:"",traffic_limit:"",storage_quota:0,storage_usage:0,member_quota:0,member_usage:0,active_members:0},i}return(0,s.default)(t,e),(0,a.default)(t,[{key:"componentDidMount",value:function(){var e=this;L.k.orgAdminGetOrgInfo().then((function(t){var i=t.data,n=i.org_id,a=i.org_name,r=i.traffic_this_month,s=i.traffic_limit,o=i.member_quota,l=i.member_usage,c=i.active_members,d=i.storage_quota,u=i.storage_usage;e.setState({org_id:n,org_name:a,traffic_this_month:r,traffic_limit:s,member_quota:o,member_usage:l,active_members:c,storage_quota:d,storage_usage:u})}))}},{key:"render",value:function(){var e=this.state,t=e.org_id,i=e.org_name,n=e.traffic_this_month,a=e.traffic_limit,r=e.member_quota,s=e.member_usage,l=e.active_members,c=e.storage_quota,d=e.storage_usage,u=n.link_file_download+n.sync_file_download+n.web_file_download;return u=u||0,(0,p.jsxs)(o.Fragment,{children:[(0,p.jsx)(_,{}),(0,p.jsx)("div",{className:"main-panel-center flex-row",children:(0,p.jsxs)("div",{className:"cur-view-container",children:[(0,p.jsx)("div",{className:"cur-view-path",children:(0,p.jsx)("h3",{className:"sf-heading",children:(0,h.AP)("Info")})}),(0,p.jsx)("div",{className:"cur-view-content org-admin-info-content py-4",children:(0,p.jsxs)("div",{className:"d-flex flex-row flex-wrap justify-content-between",children:[(0,p.jsxs)("div",{className:"info-content-item d-flex",children:[(0,p.jsx)("img",{src:"".concat(h.SG,"img/info-organization.png"),alt:"",width:"46",height:"46",className:"info-content-item-img"}),(0,p.jsxs)("div",{children:[(0,p.jsx)("h4",{className:"info-content-item-heading",children:(0,h.AP)("Team name")}),(0,p.jsx)("p",{className:"info-content-name-text",children:i})]})]}),(0,p.jsxs)("div",{className:"info-content-item d-flex",children:[(0,p.jsx)("img",{src:"".concat(h.SG,"img/info-id.png"),alt:"",width:"46",height:"46",className:"info-content-item-img"}),(0,p.jsxs)("div",{children:[(0,p.jsx)("h4",{className:"info-content-item-heading",children:(0,h.AP)("ID")}),(0,p.jsx)("p",{className:"info-content-name-text",children:t})]})]}),(0,p.jsxs)("div",{className:"info-content-item w-100 d-flex justify-content-around",children:[(0,p.jsxs)("div",{children:[(0,p.jsx)("h4",{className:"info-content-item-heading",children:(0,h.AP)("Active users")}),(0,p.jsx)("p",{className:"info-content-user-text",children:l})]}),(0,p.jsxs)("div",{children:[(0,p.jsx)("h4",{className:"info-content-item-heading",children:(0,h.AP)("Total users")}),(0,p.jsx)("p",{className:"info-content-user-text",children:s})]}),h.i$&&(0,p.jsxs)("div",{children:[(0,p.jsx)("h4",{className:"info-content-item-heading",children:(0,h.AP)("User number limit")}),(0,p.jsx)("p",{className:"info-content-user-text",children:r>0?r:"--"})]})]}),(0,p.jsxs)("div",{className:"info-content-item",children:[(0,p.jsx)("h4",{className:"info-content-item-heading",children:(0,h.AP)("Space used")}),c>0?(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)("p",{className:"info-content-space-text",children:"".concat((d/c*100).toFixed(2),"%")}),(0,p.jsxs)("div",{className:"progress-container",children:[(0,p.jsx)("div",{className:"progress",children:(0,p.jsx)("div",{className:"progress-bar",role:"progressbar",style:{width:"".concat(d/c*100,"%")},"aria-valuenow":d/c*100,"aria-valuemin":"0","aria-valuemax":"100"})}),(0,p.jsx)("p",{className:"progress-text m-0",children:"".concat(E.Aq.bytesToSize(d)," / ").concat(E.Aq.bytesToSize(c))})]})]}):(0,p.jsx)("p",{children:E.Aq.bytesToSize(d)})]}),(0,p.jsxs)("div",{className:"info-content-item",children:[(0,p.jsx)("h4",{className:"info-content-item-heading",children:(0,h.AP)("Traffic this month")}),a>0?(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)("p",{className:"info-content-space-text",children:"".concat((u/a*100).toFixed(2),"%")}),(0,p.jsxs)("div",{className:"progress-container",children:[(0,p.jsx)("div",{className:"progress",children:(0,p.jsx)("div",{className:"progress-bar",role:"progressbar",style:{width:"".concat(u/a*100,"%")},"aria-valuenow":u/a*100,"aria-valuemin":"0","aria-valuemax":"100"})}),(0,p.jsx)("p",{className:"progress-text m-0",children:"".concat(E.Aq.bytesToSize(u)," / ").concat(E.Aq.bytesToSize(a))})]})]}):(0,p.jsx)("p",{children:E.Aq.bytesToSize(u)})]})]})})]})})]})}}])}(o.Component),xi=function(e){function t(e){var i;return(0,n.default)(this,t),(i=(0,r.default)(this,t,[e])).copyToClipBoard=function(){(0,Ke.A)(i.props.currentLinkHref);var e=(0,h.AP)("Link has been copied to clipboard");U.A.success(e,{duration:2}),i.props.toggle()},i}return(0,s.default)(t,e),(0,a.default)(t,[{key:"render",value:function(){var e=this.props.currentLinkHref;return(0,p.jsxs)(ze.A,{isOpen:!0,toggle:this.props.toggle,children:[(0,p.jsx)(Ve.A,{toggle:this.props.toggle,children:(0,h.AP)("Link")}),(0,p.jsx)(Ue.A,{children:(0,p.jsx)("p",{children:(0,p.jsx)("a",{target:"_blank",href:e,rel:"noreferrer",children:e})})}),(0,p.jsxs)(Ye.A,{children:[(0,p.jsx)(S.A,{color:"secondary",onClick:this.props.toggle,children:(0,h.AP)("Cancel")})," ",(0,p.jsx)(S.A,{color:"primary",onClick:this.copyToClipBoard,children:(0,h.AP)("Copy")})]})]})}}])}(o.Component);y().extend(ne());var yi=function(e){function t(e){var i;return(0,n.default)(this,t),(i=(0,r.default)(this,t,[e])).listOrgLinks=function(e){L.k.orgAdminListOrgLinks(e).then((function(e){var t=e.data;i.setState({linkList:t.link_list,page:t.page,pageNext:t.page_next})}))},i.onFreezedItem=function(){i.setState({isItemFreezed:!0})},i.onUnfreezedItem=function(){i.setState({isItemFreezed:!1})},i.onChangePageNum=function(e,t){e.preventDefault();var n=i.state.page;1===t?n+=1:n-=1,i.listOrgLinks(n)},i.deleteOrgLink=function(e){L.k.orgAdminDeleteOrgLink(e).then((function(e){!0===e.data.success&&i.listOrgLinks(i.state.page)})).catch((function(e){var t=E.Aq.getErrorMsg(e);U.A.danger(t)}))},i.openLinkDialog=function(e){var t;t=e.name.indexOf("/")>-1?h.xW+"/d/"+e.token+"/":h.xW+"/f/"+e.token+"/",i.setState({currentLinkHref:t}),i.toggleLinkDialog()},i.toggleLinkDialog=function(){i.setState({isShowLinkDialog:!i.state.isShowLinkDialog})},i.state={linkList:null,page:1,pageNext:!1,isItemFreezed:!1,isShowLinkDialog:!1,currentLinkHref:""},i}return(0,s.default)(t,e),(0,a.default)(t,[{key:"componentDidMount",value:function(){this.listOrgLinks(this.state.page)}},{key:"render",value:function(){var e=this,t=this.state.linkList;return(0,p.jsxs)(o.Fragment,{children:[(0,p.jsx)(_,{}),(0,p.jsx)("div",{className:"main-panel-center flex-row",children:(0,p.jsxs)("div",{className:"cur-view-container",children:[(0,p.jsx)("div",{className:"cur-view-path",children:(0,p.jsx)("h3",{className:"sf-heading",children:(0,h.AP)("All Public Links")})}),(0,p.jsxs)("div",{className:"cur-view-content",children:[(0,p.jsxs)("table",{children:[(0,p.jsx)("thead",{children:(0,p.jsxs)("tr",{children:[(0,p.jsx)("th",{width:"50%",children:(0,h.AP)("Name")}),(0,p.jsx)("th",{width:"15%",children:(0,h.AP)("Owner")}),(0,p.jsx)("th",{width:"15%",children:(0,h.AP)("Created At")}),(0,p.jsx)("th",{width:"10%",children:(0,h.AP)("Visit count")}),(0,p.jsx)("th",{width:"10%"})]})}),(0,p.jsx)("tbody",{children:t&&t.map((function(t,i){return(0,p.jsx)(o.Fragment,{children:(0,p.jsx)(bi,{link:t,isItemFreezed:e.state.isItemFreezed,onFreezedItem:e.onFreezedItem,onUnfreezedItem:e.onUnfreezedItem,deleteOrgLink:e.deleteOrgLink,openLinkDialog:e.openLinkDialog})},i)}))})]}),(0,p.jsxs)("div",{className:"paginator",children:[1!==this.state.page&&(0,p.jsx)("a",{href:"#",onClick:function(t){return e.onChangePageNum(t,-1)},children:(0,h.AP)("Previous")}),1!==this.state.page&&this.state.pageNext&&(0,p.jsx)("span",{children:" | "}),this.state.pageNext&&(0,p.jsx)("a",{href:"#",onClick:function(t){return e.onChangePageNum(t,1)},children:(0,h.AP)("Next")})]})]})]})}),this.state.isShowLinkDialog&&(0,p.jsx)(xi,{currentLinkHref:this.state.currentLinkHref,toggle:this.toggleLinkDialog})]})}}])}(o.Component),bi=function(e){function t(e){var i;return(0,n.default)(this,t),(i=(0,r.default)(this,t,[e])).onMouseEnter=function(){i.props.isItemFreezed||i.setState({showMenu:!0,highlight:!0})},i.onMouseLeave=function(){i.props.isItemFreezed||i.setState({showMenu:!1,highlight:!1})},i.onDropdownToggleClick=function(e){i.toggleOperationMenu(e)},i.toggleOperationMenu=function(e){e.stopPropagation(),i.setState({isItemMenuShow:!i.state.isItemMenuShow},(function(){i.state.isItemMenuShow?i.props.onFreezedItem():(i.setState({highlight:!1,showMenu:!1}),i.props.onUnfreezedItem())}))},i.state={highlight:!1,showMenu:!1,isItemMenuShow:!1},i}return(0,s.default)(t,e),(0,a.default)(t,[{key:"render",value:function(){var e=this.props,t=e.link,i=e.deleteOrgLink,n=h.Yc+"org/useradmin/info/"+encodeURIComponent(t.owner_email)+"/";return(0,p.jsxs)("tr",{className:this.state.highlight?"tr-highlight":"",onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave,children:[(0,p.jsx)("td",{children:t.name}),(0,p.jsx)("td",{children:(0,p.jsx)("a",{href:n,children:t.owner_name})}),(0,p.jsx)("td",{children:y()(t.created_time).fromNow()}),(0,p.jsx)("td",{children:t.view_count}),(0,p.jsx)("td",{className:"cursor-pointer text-center",children:this.state.showMenu&&(0,p.jsxs)(Ne.A,{isOpen:this.state.isItemMenuShow,toggle:this.toggleOperationMenu,children:[(0,p.jsx)(Ce.A,{tag:"i",className:"op-icon sf3-font-more sf3-font",title:(0,h.AP)("More operations"),"aria-label":(0,h.AP)("More operations"),"data-toggle":"dropdown","aria-expanded":this.state.isItemMenuShow,onClick:this.onDropdownToggleClick}),(0,p.jsxs)(Ie.A,{children:[(0,p.jsx)(Oe.A,{onClick:i.bind(this,t.token),children:(0,h.AP)("Delete")}),(0,p.jsx)(Oe.A,{onClick:this.props.openLinkDialog.bind(this,t),children:(0,h.AP)("View Link")})]})]})})]})}}])}(o.Component),Ai=yi,_i=function(e){function t(e){var i;return(0,n.default)(this,t),(i=(0,r.default)(this,t,[e])).setGroupQuota=function(){var e=i.state.quota;if(e.length&&/^[1-9]\d*$/im.test(e)||-2==e){i.setState({errMessage:""});var t=-2==i.state.quota?i.state.quota:1e6*i.state.quota;L.k.orgAdminSetGroupQuota(h.Id,i.props.group.id,t).then((function(e){i.props.toggle(),i.props.onSetQuota(e.data)})).catch((function(e){var t=E.Aq.getErrorMsg(e);U.A.danger(t)}))}else{var n=(0,h.AP)("Quota is invalid.");i.setState({errMessage:n})}},i.handleChange=function(e){var t=e.target.value.trim();i.setState({quota:t})},i.handleKeyDown=function(e){"Enter"===e.key&&(i.setGroupQuota(),e.preventDefault())},i.state={quota:"",errMessage:""},i}return(0,s.default)(t,e),(0,a.default)(t,[{key:"render",value:function(){var e=this.props.group,t=E.Aq.bytesToSize(e.quota),i=(0,h.AP)("The current quota for {group_name} is {quota}").replace("{group_name}",e.name).replace("{quota}",t);return(0,p.jsxs)(ze.A,{isOpen:!0,toggle:this.props.toggle,autoFocus:!1,children:[(0,p.jsx)(Ve.A,{toggle:this.props.toggle,children:(0,h.AP)("Set Quota")}),(0,p.jsxs)(Ue.A,{children:[(0,p.jsx)("p",{children:i}),(0,p.jsx)("p",{children:(0,h.AP)("Please enter a new quota")}),(0,p.jsxs)(Ae.A,{children:[(0,p.jsx)(V.A,{onKeyDown:this.handleKeyDown,value:this.state.quota,onChange:this.handleChange,autoFocus:!0}),(0,p.jsx)(ve.A,{addonType:"append",children:"MB"})]}),(0,p.jsxs)("p",{className:"tip",children:[(0,p.jsx)("br",{}),(0,p.jsx)("span",{children:(0,h.AP)("An integer that is greater than 0 or equal to -2.")}),(0,p.jsx)("br",{}),(0,p.jsx)("span",{children:(0,h.AP)("Tip: -2 means no limit.")})]}),this.state.errMessage&&(0,p.jsx)("p",{className:"error",children:this.state.errMessage})]}),(0,p.jsxs)(Ye.A,{children:[(0,p.jsx)(S.A,{color:"secondary",onClick:this.props.toggle,children:(0,h.AP)("Cancel")}),(0,p.jsx)(S.A,{color:"primary",onClick:this.setGroupQuota,children:(0,h.AP)("Submit")})]})]})}}])}(o.Component),ki=i(15097),ji=i(685),wi=i(77474),Si=i(47150),Di=function(e){function t(e){var i;return(0,n.default)(this,t),(i=(0,r.default)(this,t,[e])).handleSubmit=function(){i.validateName()&&L.k.orgAdminAddDepartmentRepo(h.Id,i.props.groupID,i.state.repoName.trim()).then((function(e){i.props.toggle(),i.props.onAddNewRepo(e.data)})).catch((function(e){var t=E.Aq.getErrorMsg(e);i.setState({errMessage:t})}))},i.validateName=function(){var e="";return!!i.state.repoName.trim().length||(e=(0,h.AP)("Name is required"),i.setState({errMessage:e}),!1)},i.handleChange=function(e){i.setState({repoName:e.target.value})},i.handleKeyDown=function(e){"Enter"===e.key&&(i.handleSubmit(),e.preventDefault())},i.state={repoName:"",errMessage:""},i}return(0,s.default)(t,e),(0,a.default)(t,[{key:"render",value:function(){var e=this.state.errMessage;return(0,p.jsxs)(ze.A,{isOpen:!0,toggle:this.props.toggle,autoFocus:!1,children:[(0,p.jsx)(Ve.A,{toggle:this.props.toggle,children:(0,h.AP)("New Library")}),(0,p.jsxs)(Ue.A,{children:[(0,p.jsx)(He.A,{children:(0,p.jsxs)(We.A,{children:[(0,p.jsx)(Ge.A,{for:"repoName",children:(0,h.AP)("Name")}),(0,p.jsx)(V.A,{id:"repoName",name:"repo-name",onKeyDown:this.handleKeyDown,value:this.state.repoName,onChange:this.handleChange,autoFocus:!0})]})}),e&&(0,p.jsx)(Be.A,{color:"danger",className:"mt-2",children:e})]}),(0,p.jsxs)(Ye.A,{children:[(0,p.jsx)(S.A,{color:"secondary",onClick:this.props.toggle,children:(0,h.AP)("Cancel")}),(0,p.jsx)(S.A,{color:"primary",onClick:this.handleSubmit,children:(0,h.AP)("Submit")})]})]})}}])}(o.Component),Pi=i(60436),Mi=function(){return(0,a.default)((function e(t){(0,n.default)(this,e),this.id=t.id||"",this.name=t.name||"",this.children=t.children||[],this.parentNode=t.parentNode||null,this.orgId=t.orgId||"",this.quota=t.quota||-2}),[{key:"findNodeById",value:function(e){if(this.id===e)return this;for(var t=(0,Pi.default)(this.children);t.length>0;){var i=t.shift();if(i.id===e)return i;t.push.apply(t,(0,Pi.default)(i.children))}}},{key:"addChildren",value:function(e){var t;(t=this.children).push.apply(t,(0,Pi.default)(e))}},{key:"setChildren",value:function(e){this.children=e}},{key:"hasChildren",value:function(){return this.children.length>0}},{key:"deleteChildById",value:function(e){this.children=this.children.filter((function(t){return t.id!==e}))}}])}();var Ni=function(e){var t=e.node,i=e.toggleDelete,n=e.toggleRename,a=e.toggleAddMembers,r=e.toggleAddDepartment,s=e.toggleAddLibrary,o=e.toggleSetQuotaDialog;return(0,p.jsxs)(Ie.A,{modifiers:[{name:"preventOverflow",options:{boundary:document.body}}],className:"position-fixed",children:[(0,p.jsx)(Oe.A,{onClick:function(){return r(t)},children:(0,h.AP)("Add sub-department")},"".concat(t.id,"-add-department")),(0,p.jsx)(Oe.A,{onClick:function(){return s(t)},children:(0,h.AP)("Add Library")},"".concat(t.id,"-add-repo")),(0,p.jsx)(Oe.A,{onClick:function(){return a(t)},children:(0,h.AP)("Add members")},"".concat(t.id,"-add-members")),(0,p.jsx)(Oe.A,{onClick:function(){return n(t)},children:(0,h.AP)("Rename")},"".concat(t.id,"-rename")),(0,p.jsx)(Oe.A,{onClick:function(){return i(t)},children:(0,h.AP)("Delete")},"".concat(t.id,"-delete")),(0,p.jsx)(Oe.A,{onClick:function(){return o(t)},children:(0,h.AP)("Set quota")},"".concat(t.id,"-set-quota")),(0,p.jsx)(Oe.A,{disabled:!0,children:"".concat((0,h.AP)("Department ID")," : ").concat(t.id)},"".concat(t.id,"-id"))]})},Ci=function(e){function t(e){var i;return(0,n.default)(this,t),(i=(0,r.default)(this,t,[e])).toggleChildren=function(e){e.preventDefault(),e.stopPropagation(),i.state.isChildrenShow?i.setState({isChildrenShow:!1}):i.listSubDepartments()},i.listSubDepartments=function(){var e=i.props.node;i.props.listSubDepartments(e.id,(function(e){Array.isArray(e)&&0===e.length&&i.setState({isShowTreeIcon:!1}),i.setState({isChildrenShow:!0})}))},i.dropdownToggle=function(e){e.stopPropagation(),i.setState({dropdownOpen:!i.state.dropdownOpen})},i.onMouseEnter=function(){i.setState({active:!0})},i.onMouseLeave=function(){i.state.dropdownOpen||i.setState({active:!1})},i.renderTreeNodes=function(e){if(e.length>0)return e.map((function(e){return(0,p.jsx)(t,{node:e,onChangeDepartment:i.props.onChangeDepartment,checkedDepartmentId:i.props.checkedDepartmentId,listSubDepartments:i.props.listSubDepartments,toggleAddDepartment:i.props.toggleAddDepartment,toggleAddMembers:i.props.toggleAddMembers,toggleRename:i.props.toggleRename,toggleDelete:i.props.toggleDelete,toggleAddLibrary:i.props.toggleAddLibrary,toggleSetQuotaDialog:i.props.toggleSetQuotaDialog},e.id)}))},i.changeDept=function(e){var t=i.props,n=t.node,a=t.checkedDepartmentId,r=i.state.isChildrenShow;if(a!==n.id&&i.props.onChangeDepartment(e),a===n.id){if(r)return void i.setState({isChildrenShow:!1});i.listSubDepartments()}},i.state={isShowTreeIcon:!0,isChildrenShow:!1,dropdownOpen:!1,active:!1},i}return(0,s.default)(t,e),(0,a.default)(t,[{key:"componentDidMount",value:function(){-1===this.props.node.id&&this.listSubDepartments()}},{key:"render",value:function(){var e=this,t=this.props,i=t.node,n=t.checkedDepartmentId,a=this.state,r=a.isChildrenShow,s=a.dropdownOpen,l=a.active,c=te()({"tree-node":!0,active:n===i.id});return(0,p.jsxs)(o.Fragment,{children:[(0,p.jsxs)("div",{className:c,onClick:function(){return e.changeDept(i.id)},onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave,children:[this.state.isShowTreeIcon?(0,p.jsx)("span",{className:"departments-v2-tree-icon",onClick:function(t){return e.toggleChildren(t)},children:(0,p.jsx)("i",{className:"sf3-font sf3-font-down ".concat(r?"":"rotate-270")})}):(0,p.jsx)("span",{style:{width:24}}),(0,p.jsx)("span",{className:"departments-v2-tree-node-text text-truncate",children:i.name}),l&&(0,p.jsxs)(Ne.A,{isOpen:s,toggle:function(t){return e.dropdownToggle(t)},direction:"down",className:"mr-2",children:[(0,p.jsx)(Ce.A,{tag:"span",role:"button",className:"right-icon",title:(0,h.AP)("More operations"),"aria-label":(0,h.AP)("More operations"),"data-toggle":"dropdown",children:(0,p.jsx)("i",{className:"sf3-font sf3-font-more"})}),(0,p.jsx)(Ni,{node:i,toggleAddDepartment:this.props.toggleAddDepartment,toggleAddLibrary:this.props.toggleAddLibrary,toggleAddMembers:this.props.toggleAddMembers,toggleSetQuotaDialog:this.props.toggleSetQuotaDialog,toggleRename:this.props.toggleRename,toggleDelete:this.props.toggleDelete})]})]}),this.state.isChildrenShow&&(0,p.jsx)("div",{className:"tree-node-children",children:i.children&&this.renderTreeNodes(i.children)})]})}}])}(o.Component),Ii=function(e){function t(){return(0,n.default)(this,t),(0,r.default)(this,t,arguments)}return(0,s.default)(t,e),(0,a.default)(t,[{key:"render",value:function(){var e=this,t=this.props,i=t.rootNodes,n=t.checkedDepartmentId;return(0,p.jsxs)("div",{className:"departments-tree-panel p-4",children:[i.map((function(t){return(0,p.jsx)(Ci,{node:t,checkedDepartmentId:n,onChangeDepartment:e.props.onChangeDepartment,listSubDepartments:e.props.listSubDepartments,toggleAddDepartment:e.props.toggleAddDepartment,toggleSetQuotaDialog:e.props.toggleSetQuotaDialog,toggleAddLibrary:e.props.toggleAddLibrary,toggleAddMembers:e.props.toggleAddMembers,toggleRename:e.props.toggleRename,toggleDelete:e.props.toggleDelete},t.id)})),(0,p.jsxs)("button",{className:"btn btn-secondary btn-block text-start border-0 font-weight-normal new-dept-btn shadow-none",onClick:function(){e.props.toggleAddDepartment(null)},children:[(0,p.jsx)("i",{className:"sf3-font sf3-font-new new-dept-btn-icon"}),(0,h.AP)("New Department")]})]})}}])}(o.Component),Oi=Ii,Li=function(e){function t(e){var i;return(0,n.default)(this,t),(i=(0,r.default)(this,t,[e])).handleMouseEnter=function(){i.props.isItemFreezed||i.setState({highlighted:!0})},i.handleMouseLeave=function(){i.props.isItemFreezed||i.setState({highlighted:!1})},i.setMemberStaff=function(e){i.props.setMemberStaff(i.props.member.email,"Admin"===e.value)},i.deleteMember=function(){var e=i.props.member;i.props.deleteMember(e.email)},i.toggleDropdownMenu=function(){i.setState({isItemMenuShow:!i.state.isItemMenuShow},(function(){i.state.isItemMenuShow&&"function"===typeof i.props.freezeItem?i.props.freezeItem():i.state.isItemMenuShow||"function"!==typeof i.props.unfreezeItem||i.props.unfreezeItem()}))},i.toggleItemFreezed=function(e){e?i.props.freezeItem():(i.props.unfreezeItem(),i.setState({highlighted:!1}))},i.toggleDeleteMemberDialog=function(){i.setState({isDeleteMemberDialogOpen:!i.state.isDeleteMemberDialogOpen})},i.state={highlighted:!1,isItemMenuShow:!1,isDeleteMemberDialogOpen:!1},i.roleOptions=[{value:"Admin",text:(0,h.AP)("Admin"),isSelected:!1},{value:"Member",text:(0,h.AP)("Member"),isSelected:!1}],i}return(0,s.default)(t,e),(0,a.default)(t,[{key:"render",value:function(){var e=this.props.member,t=this.state,i=t.highlighted,n=t.isItemMenuShow,a=t.isDeleteMemberDialogOpen;this.roleOptions=this.roleOptions.map((function(t){return t.isSelected=t.value==e.role,t}));var r=this.roleOptions.filter((function(e){return e.isSelected}))[0];return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)("tr",{className:"departments-members-item ".concat(i?"tr-highlight":""),onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,children:[(0,p.jsx)("td",{children:(0,p.jsx)("img",{className:"avatar",src:e.avatar_url,alt:""})}),(0,p.jsx)("td",{className:"text-truncate",children:(0,p.jsx)("a",{href:"".concat(h.Yc,"org/useradmin/info/").concat(encodeURIComponent(e.email),"/"),children:e.name})}),(0,p.jsx)("td",{children:(0,p.jsx)(Le.A,{isDropdownToggleShown:i,currentSelectedOption:r,options:this.roleOptions,selectOption:this.setMemberStaff,toggleItemFreezed:this.toggleItemFreezed})}),(0,p.jsx)("td",{children:e.contact_email}),(0,p.jsx)("td",{children:i&&(0,p.jsxs)(Ne.A,{isOpen:n,toggle:this.toggleDropdownMenu,direction:"down",children:[(0,p.jsx)(Ce.A,{tag:"i",role:"button",className:"op-icon sf3-font-more sf3-font",title:(0,h.AP)("More operations"),"aria-label":(0,h.AP)("More operations"),"data-toggle":"dropdown"}),(0,p.jsx)(Ie.A,{children:(0,p.jsx)(Oe.A,{onClick:this.toggleDeleteMemberDialog,children:(0,h.AP)("Delete")},"delete")})]})})]}),a&&(0,p.jsx)(Te.A,{title:(0,h.AP)("Delete Member"),message:(0,h.AP)("Are you sure you want to delete {placeholder} ?").replace("{placeholder}",'<span class="op-target">'+E.Aq.HTMLescape(e.name)+"</span>"),executeOperation:this.deleteMember,confirmBtnText:(0,h.AP)("Delete"),toggleDialog:this.toggleDeleteMemberDialog})]})}}])}(o.Component),Ti=function(e){function t(e){var i;return(0,n.default)(this,t),(i=(0,r.default)(this,t,[e])).deleteRepo=function(){var e=i.props.repo;L.k.orgAdminDeleteDepartmentRepo(h.Id,i.props.groupID,i.props.repo.repo_id).then((function(t){t.data.success&&i.props.onDeleteRepo(e.repo_id)})).catch((function(e){var t=E.Aq.getErrorMsg(e);U.A.danger(t)}))},i}return(0,s.default)(t,e),(0,a.default)(t,[{key:"render",value:function(){var e=(0,h.AP)("Are you sure you want to delete {placeholder} ?");return e=e.replace("{placeholder}",'<span class="op-target">'+E.Aq.HTMLescape(this.props.repo.name)+"</span>"),(0,p.jsxs)(ze.A,{isOpen:!0,toggle:this.props.toggle,children:[(0,p.jsx)(Ve.A,{toggle:this.props.toggle,children:(0,h.AP)("Delete Library")}),(0,p.jsx)(Ue.A,{children:(0,p.jsx)("div",{dangerouslySetInnerHTML:{__html:e}})}),(0,p.jsxs)(Ye.A,{children:[(0,p.jsx)(S.A,{color:"secondary",onClick:this.props.toggle,children:(0,h.AP)("Cancel")}),(0,p.jsx)(S.A,{color:"primary",onClick:this.deleteRepo,children:(0,h.AP)("Delete")})]})]})}}])}(o.Component);y().locale(h.vV);var Ri=function(e){function t(e){var i;return(0,n.default)(this,t),(i=(0,r.default)(this,t,[e])).onMouseEnter=function(){i.setState({highlight:!0})},i.onMouseLeave=function(){i.setState({highlight:!1})},i.toggleDeleteDialog=function(){i.setState({isDeleteDialogOpen:!i.state.isDeleteDialogOpen})},i.state={highlight:!1,isDeleteDialogOpen:!1},i}return(0,s.default)(t,e),(0,a.default)(t,[{key:"render",value:function(){var e=this.props,t=e.repo,i=e.groupID,n=this.state,a=n.highlight,r=n.isDeleteDialogOpen,s=E.Aq.getLibIconUrl(t);return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)("tr",{className:a?"tr-highlight":"",onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave,children:[(0,p.jsx)("td",{children:(0,p.jsx)("img",{src:s,width:"24",alt:(0,h.AP)("icon")})}),(0,p.jsx)("td",{children:t.name}),(0,p.jsxs)("td",{children:[E.Aq.bytesToSize(t.size)," "]}),(0,p.jsx)("td",{className:"cursor-pointer text-center",children:(0,p.jsx)("span",{onClick:this.toggleDeleteDialog,className:"sf3-font-delete1 sf3-font op-icon ".concat(a?"":"vh"),title:"Delete"})})]}),r&&(0,p.jsx)(Fe.A,{children:(0,p.jsx)(Ti,{toggle:this.toggleDeleteDialog,onDeleteRepo:this.props.onDeleteRepo,repo:t,groupID:i})})]})}}])}(o.Component),Ei=Ri,Fi=function(e){function t(e){var i;return(0,n.default)(this,t),(i=(0,r.default)(this,t,[e])).freezeItem=function(){i.setState({isItemFreezed:!0})},i.unfreezeItem=function(){i.setState({isItemFreezed:!1})},i.getCurrentDepartment=function(){var e=i.props,t=e.rootNodes,n=e.checkedDepartmentId;if(!t)return{};for(var a={},r=(0,Pi.default)(t);!a.id&&r.length>0;){var s=r.shift();s.id===n?a=s:s.children&&s.children.length>0&&r.push.apply(r,(0,Pi.default)(s.children))}return a},i.sortByName=function(e){e.preventDefault();var t=i.props.sortOrder;t="asc"===t?"desc":"asc",i.props.sortItems("name",t)},i.sortByRole=function(e){e.preventDefault();var t=i.props.sortOrder;t="asc"===t?"desc":"asc",i.props.sortItems("role",t)},i.changeActiveNav=function(e){i.setState({activeNav:e})},i.getRepos=function(e){i.props.getRepos(e,(function(e){i.setState({repos:e})}))},i.dropdownToggle=function(e){e.stopPropagation(),i.setState({dropdownOpen:!i.state.dropdownOpen})},i.onDeleteRepo=function(e){var t=i.state.repos;i.setState({repos:t.filter((function(t){return t.repo_id!=e}))})},i.state={isItemFreezed:!1,activeNav:"members",repos:[],dropdownOpen:!1},i}return(0,s.default)(t,e),(0,a.default)(t,[{key:"componentDidMount",value:function(){this.getRepos(this.props.checkedDepartmentId)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.props.checkedDepartmentId===e.checkedDepartmentId&&this.props.isAddNewRepo===e.isAddNewRepo||this.getRepos(e.checkedDepartmentId)}},{key:"render",value:function(){var e=this,t=this.state,i=t.activeNav,n=t.repos,a=this.props,r=a.membersList,s=a.isMembersListLoading,o=a.sortBy,l=a.sortOrder,c="name"===o,d="role"===o,u=(0,p.jsx)("span",{className:"sort-dirent sf3-font sf3-font-down ".concat("asc"===l?"rotate-180":"")}),f=this.getCurrentDepartment();return(0,p.jsxs)("div",{className:"department-content-main d-flex flex-column",children:[(0,p.jsxs)("div",{className:"cur-view-path justify-content-start",children:[(0,p.jsx)("h4",{className:"sf-heading",children:f.name}),(0,p.jsxs)(Ne.A,{isOpen:this.state.dropdownOpen,toggle:function(t){return e.dropdownToggle(t)},direction:"down",className:"department-dropdown-menu",children:[(0,p.jsx)(Ce.A,{tag:"span",role:"button",className:"sf3-font-down sf3-font ml-1 sf-dropdown-toggle",title:(0,h.AP)("More operations"),"aria-label":(0,h.AP)("More operations"),"data-toggle":"dropdown"}),(0,p.jsx)(Ni,{node:f,toggleAddDepartment:this.props.toggleAddDepartment,toggleSetQuotaDialog:this.props.toggleSetQuotaDialog,toggleAddLibrary:this.props.toggleAddLibrary,toggleAddMembers:this.props.toggleAddMembers,toggleRename:this.props.toggleRename,toggleDelete:this.props.toggleDelete})]})]}),(0,p.jsx)("div",{className:"cur-view-path tab-nav-container",children:(0,p.jsxs)("ul",{className:"nav",children:[(0,p.jsx)("li",{className:"nav-item",children:(0,p.jsx)("span",{className:"nav-link ".concat("members"===i?"active":""),onClick:function(){return e.changeActiveNav("members")},children:(0,h.AP)("Members")})}),(0,p.jsx)("li",{className:"nav-item",children:(0,p.jsx)("span",{className:"nav-link ".concat("repos"===i?"active":""),onClick:function(){return e.changeActiveNav("repos")},children:(0,h.AP)("Libraries")})})]})}),"members"===i&&(0,p.jsxs)(p.Fragment,{children:[s&&(0,p.jsx)(F.A,{}),!s&&r.length>0&&(0,p.jsx)("div",{className:"cur-view-content",children:(0,p.jsxs)("table",{children:[(0,p.jsx)("thead",{children:(0,p.jsxs)("tr",{children:[(0,p.jsx)("th",{width:"60px"}),(0,p.jsxs)("th",{width:"25%",onClick:this.sortByName,children:[(0,h.AP)("Name")," ",c&&u]}),(0,p.jsxs)("th",{width:"23%",onClick:this.sortByRole,children:[(0,h.AP)("Role")," ",d&&u]}),(0,p.jsx)("th",{width:"35%",children:(0,h.AP)("Contact email")}),(0,p.jsx)("th",{width:"calc(17% - 60px)"})]})}),(0,p.jsx)("tbody",{children:r.map((function(t,i){return(0,p.jsx)(Li,{member:t,deleteMember:e.props.deleteMember,setMemberStaff:e.props.setMemberStaff,unfreezeItem:e.unfreezeItem,freezeItem:e.freezeItem,isItemFreezed:e.state.isItemFreezed},i)}))})]})}),!s&&0===r.length&&(0,p.jsx)(ae.A,{text:(0,h.AP)("No members")})]}),"repos"===i&&n.length>0&&(0,p.jsx)("div",{className:"cur-view-content",children:(0,p.jsxs)("table",{children:[(0,p.jsx)("thead",{children:(0,p.jsxs)("tr",{children:[(0,p.jsx)("th",{width:"5%"}),(0,p.jsx)("th",{width:"50%",children:(0,h.AP)("Name")}),(0,p.jsx)("th",{width:"30%",children:(0,h.AP)("Size")}),(0,p.jsx)("th",{width:"15%"})]})}),(0,p.jsx)("tbody",{children:n.map((function(t,i){return(0,p.jsx)(Ei,{repo:t,groupID:e.props.checkedDepartmentId,onDeleteRepo:e.onDeleteRepo},i)}))})]})}),"repos"===i&&0===n.length&&(0,p.jsx)(ae.A,{text:(0,h.AP)("No libraries")})]})}}])}(o.Component),zi=(i(2201),function(e){function t(e){var i;return(0,n.default)(this,t),(i=(0,r.default)(this,t,[e])).onChangeDepartment=function(e){i.setState({checkedDepartmentId:e},i.loadDepartmentMembers(e))},i.loadDepartmentMembers=function(e){-1!==e?(i.setState({isMembersListLoading:!0}),L.k.orgAdminListGroupInfo(h.Id,e,!0).then((function(e){i.setState({membersList:e.data.members,isMembersListLoading:!1})})).catch((function(e){var t=E.Aq.getErrorMsg(e);U.A.danger(t)}))):i.setState({isMembersListLoading:!1,membersList:[]})},i.listSubDepartments=function(e,t){var n=i.state.rootNodes,a=null;n.forEach((function(t){a||(a=t.findNodeById(e))})),a&&L.k.orgAdminListGroupInfo(h.Id,e,!0).then((function(e){var i=e.data.groups.map((function(e){return new Mi({id:e.id,name:e.name,parentGroupId:e.parent_group_id,orgId:e.org_id,parentNode:a,quota:e.quota})}));a.setChildren(i),t&&t(i)})).catch((function(e){var t=E.Aq.getErrorMsg(e);U.A.danger(t)}))},i.getRepos=function(e,t){L.k.orgAdminListGroupRepos(h.Id,e).then((function(e){t&&t(e.data.libraries)})).catch((function(e){if(e.response&&404===e.response.status)t&&t(null);else{var i=E.Aq.getErrorMsg(e);U.A.danger(i)}}))},i.toggleAddLibrary=function(e){i.setState({operateNode:e,isShowAddRepoDialog:!i.state.isShowAddRepoDialog})},i.toggleAddDepartment=function(e){i.setState({operateNode:e,isAddDepartmentDialogShow:!i.state.isAddDepartmentDialogShow})},i.toggleAddMembers=function(e){i.setState({operateNode:e,isAddMembersDialogShow:!i.state.isAddMembersDialogShow})},i.toggleRename=function(e){i.setState({operateNode:e,isRenameDepartmentDialogShow:!i.state.isRenameDepartmentDialogShow})},i.toggleDelete=function(e){i.setState({operateNode:e,isDeleteDepartmentDialogShow:!i.state.isDeleteDepartmentDialogShow})},i.addDepartment=function(e,t){e.addChildren([new Mi({id:t.id,name:t.name,parentNode:e,orgId:t.org_id})])},i.setRootNode=function(e){var t=new Mi({id:e.id,name:e.name,orgId:e.org_id}),n=i.state.rootNodes.slice(0);n.push(t),i.setState({rootNodes:n,checkedDepartmentId:t.id}),i.loadDepartmentMembers(t.id)},i.renameDepartment=function(e,t){e.id=t.id,e.name=t.name},i.onDelete=function(){var e=i.state,t=e.operateNode,n=e.checkedDepartmentId;L.k.orgAdminDeleteDepartGroup(h.Id,t.id).then((function(e){if(i.toggleDelete(),t.parentNode)t.parentNode.deleteChildById(t.id),t.id===n&&-1!==t.parentNode.id&&i.onChangeDepartment(t.parentNode.id);else{var a=i.state.rootNodes.slice(0),r=a.findIndex((function(e){return e.id===t.id}));a.splice(r,1),0===a.length?i.setState({rootNodes:a,checkedDepartmentId:-1}):(i.setState({rootNodes:a,checkedDepartmentId:a[0].id}),i.loadDepartmentMembers(a[0].id))}})).catch((function(e){if(e.response&&400===e.response.status)U.A.danger(e.response.data.error_msg);else{var t=E.Aq.getErrorMsg(e);U.A.danger(t)}}))},i.onMemberChanged=function(){var e=i.state,t=e.checkedDepartmentId,n=e.operateNode;t&&n&&t!==n.id||i.loadDepartmentMembers(n.id)},i.setMemberStaff=function(e,t){var n=i.state,a=n.checkedDepartmentId,r=n.membersList;L.k.orgAdminSetGroupMemberRole(h.Id,a,e,t).then((function(t){var n=t.data,a=r.map((function(t){return t.email===e?n:t}));i.setState({membersList:a})})).catch((function(e){var t=E.Aq.getErrorMsg(e);U.A.danger(t)}))},i.deleteMember=function(e){var t=i.state,n=t.checkedDepartmentId,a=t.membersList;L.k.orgAdminDeleteGroupMember(h.Id,n,e).then((function(t){var n=a.filter((function(t){return t.email!==e}));i.setState({membersList:n})})).catch((function(e){var t=E.Aq.getErrorMsg(e);U.A.danger(t)}))},i.sortMembers=function(e,t,i){var n;switch("".concat(t,"-").concat(i)){case"name-asc":n=function(e,t){return E.Aq.compareTwoWord(e.name,t.name)};break;case"name-desc":n=function(e,t){return-E.Aq.compareTwoWord(e.name,t.name)};break;case"role-asc":n=function(e,t){return"Admin"==e.role?-1:1};break;case"role-desc":n=function(e,t){return"Admin"==e.role?1:-1}}return e.sort((function(e,t){return n(e,t)})),e},i.sortItems=function(e,t){i.setState({sortBy:e,sortOrder:t,membersList:i.sortMembers(i.state.membersList,e,t)})},i.toggleSetQuotaDialog=function(e){i.setState({operateNode:e,isSetQuotaDialogShow:!i.state.isSetQuotaDialogShow})},i.onSetQuota=function(e){var t=i.state.rootNodes.slice(0);i._setQuota(t[0],e),i.setState({rootNodes:t})},i._setQuota=function(e,t){e.id===t.id?e.quota=t.quota:e.children.forEach((function(e){i._setQuota(e,t)}))},i.state={rootNodes:[],checkedDepartmentId:-1,operateNode:null,isAddDepartmentDialogShow:!1,isAddMembersDialogShow:!1,isRenameDepartmentDialogShow:!1,isDeleteDepartmentDialogShow:!1,isShowAddRepoDialog:!1,isSetQuotaDialogShow:!1,membersList:[],isTopDepartmentLoading:!1,isMembersListLoading:!1,sortBy:"name",sortOrder:"asc"},i}return(0,s.default)(t,e),(0,a.default)(t,[{key:"componentDidMount",value:function(){var e=this;this.setState({isTopDepartmentLoading:!0},(function(){L.k.orgAdminListDepartGroups(h.Id).then((function(t){var i=t.data.data;if(i&&i.length>0){var n=i.map((function(e){return new Mi({id:e.id,name:e.name,orgId:e.org_id,quota:e.quota})}));e.setState({rootNodes:n,checkedDepartmentId:n[0].id}),e.loadDepartmentMembers(n[0].id)}e.setState({isTopDepartmentLoading:!1})}))}))}},{key:"render",value:function(){var e=this,t=this.state,i=t.rootNodes,n=t.operateNode,a=t.checkedDepartmentId,r=t.isAddDepartmentDialogShow,s=t.isAddMembersDialogShow,l=t.membersList,c=t.isMembersListLoading,d=t.isTopDepartmentLoading,u=t.isRenameDepartmentDialogShow,f=t.isDeleteDepartmentDialogShow,g=t.sortBy,m=t.sortOrder;return(0,p.jsxs)(o.Fragment,{children:[(0,p.jsx)(_,{}),(0,p.jsx)("div",{className:"main-panel-center",children:(0,p.jsxs)("div",{className:"cur-view-container",children:[(0,p.jsx)("div",{className:"cur-view-path",children:(0,p.jsx)("h3",{className:"sf-heading",children:(0,h.AP)("Departments")})}),(0,p.jsxs)("div",{className:"cur-view-content d-flex flex-row p-0",children:[d&&(0,p.jsx)(F.A,{}),!d&&i.length>0&&(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(Oi,{rootNodes:i,checkedDepartmentId:a,onChangeDepartment:this.onChangeDepartment,listSubDepartments:this.listSubDepartments,toggleAddDepartment:this.toggleAddDepartment,toggleSetQuotaDialog:this.toggleSetQuotaDialog,toggleAddLibrary:this.toggleAddLibrary,toggleAddMembers:this.toggleAddMembers,toggleRename:this.toggleRename,toggleDelete:this.toggleDelete}),(0,p.jsx)(Fi,{rootNodes:i,checkedDepartmentId:a,membersList:l,isMembersListLoading:c,isAddNewRepo:this.state.isAddNewRepo,setMemberStaff:this.setMemberStaff,deleteMember:this.deleteMember,sortItems:this.sortItems,sortBy:g,sortOrder:m,getRepos:this.getRepos,deleteGroup:this.deleteGroup,createGroup:this.createGroup,toggleAddDepartment:this.toggleAddDepartment,toggleSetQuotaDialog:this.toggleSetQuotaDialog,toggleAddLibrary:this.toggleAddLibrary,toggleAddMembers:this.toggleAddMembers,toggleRename:this.toggleRename,toggleDelete:this.toggleDelete})]}),!d&&0===i.length&&(0,p.jsx)("div",{className:"top-department-button-container h-100 w-100",children:(0,p.jsx)(S.A,{onClick:this.toggleAddDepartment.bind(this,null),children:(0,h.AP)("Enable departments feature")})})]})]})}),s&&(0,p.jsx)(ji.A,{orgID:h.Id,toggle:this.toggleAddMembers,nodeId:n.id,onMemberChanged:this.onMemberChanged}),u&&(0,p.jsx)(wi.A,{orgID:h.Id,node:n,toggle:this.toggleRename,renameDepartment:this.renameDepartment}),f&&(0,p.jsx)(Si.A,{node:n,toggle:this.toggleDelete,onDelete:this.onDelete}),r&&(0,p.jsx)(ki.A,{parentNode:n,toggle:this.toggleAddDepartment,addDepartment:this.addDepartment,setRootNode:this.setRootNode,orgID:h.Id}),this.state.isShowAddRepoDialog&&(0,p.jsx)(Di,{toggle:this.toggleAddLibrary,onAddNewRepo:function(){e.setState({isAddNewRepo:!e.state.isAddNewRepo})},groupID:String(n.id)}),this.state.isSetQuotaDialogShow&&(0,p.jsx)(_i,{group:n,onSetQuota:this.onSetQuota,toggle:this.toggleSetQuotaDialog})]})}}])}(o.Component)),Ui=i(71361),Bi=i(61599),Yi=function(e){function t(e){var i;return(0,n.default)(this,t),(i=(0,r.default)(this,t,[e])).downloadExcel=function(){if(i.isValidDateStr())switch(i.props.logType){case"fileaudit":i.orgAdminExportLogs("fileaudit");break;case"file-update":i.orgAdminExportLogs("fileupdate");break;case"perm-audit":i.orgAdminExportLogs("permaudit")}},i.queryIOStatus=function(e,t){Ui.E.queryIOStatus(e).then((function(n){!0===n.data.is_finished?(i.setState({isShowIODialog:!1}),i.props.toggle(),location.href=h.Yc+"api/v2.1/org/admin/log/export-excel/?task_id="+e+"&log_type="+t):setTimeout((function(){i.queryIOStatus(e,t)}),1e3)})).catch((function(e){i.setState({isShowIODialog:!1}),i.props.toggle(),U.A.danger((0,h.AP)("Failed to export. Please check whether the size of table attachments exceeds the limit."))}))},i.orgAdminExportLogs=function(e){var t=i.state,n=t.startDateStr,a=t.endDateStr,r="";i.setState({isShowIODialog:!0},(function(){L.k.orgAdminExportLogsExcel(h.Id,n,a,e).then((function(e){return r=e.data.task_id,i.setState({taskId:r}),Ui.E.queryIOStatus(r)})).then((function(t){!0===t.data.is_finished?(i.setState({isShowIODialog:!1}),i.props.toggle(),location.href=h.Yc+"api/v2.1/org/admin/log/export-excel/?task_id="+r+"&log_type="+e):i.queryIOStatus(r,e)})).catch((function(e){if(e.response&&500===e.response.status){var t=e.response.data?e.response.data.error_msg:null;t&&"Internal Server Error"!==t?U.A.danger(t):U.A.danger((0,h.AP)("Internal Server Error"))}else{var n=E.Aq.getErrorMsg(e);U.A.danger(n)}i.props.toggle()}))}))},i.isValidDateStr=function(){var e=i.state,t=e.startDateStr,n=e.endDateStr;return!!(y()(t,"YYYY-MM-DD",!0).isValid()&&y()(n,"YYYY-MM-DD",!0).isValid()&&y()(t).isBefore(n))||(i.setState({errMsg:(0,h.AP)("Date Invalid.")}),!1)},i.handleStartChange=function(e){var t=e.target.value.trim();i.setState({startDateStr:t,errMsg:""})},i.handleEndChange=function(e){var t=e.target.value.trim();i.setState({endDateStr:t,errMsg:""})},i.onExportToggle=function(e){i.setState({isShowIODialog:!i.state.isShowIODialog}),i.props.toggle()},i.state={loading:!0,startDateStr:"",endDateStr:"",errMsg:"",taskId:"",isShowIODialog:!1},i}return(0,s.default)(t,e),(0,a.default)(t,[{key:"render",value:function(){return(0,p.jsxs)(o.Fragment,{children:[!this.state.isShowIODialog&&(0,p.jsxs)(ze.A,{isOpen:!0,toggle:this.props.toggle,autoFocus:!1,children:[(0,p.jsx)(Ve.A,{toggle:this.props.toggle,children:(0,h.AP)("Choose date")}),(0,p.jsxs)(Ue.A,{children:[(0,p.jsxs)(We.A,{children:[(0,p.jsx)(Ge.A,{children:(0,h.AP)("Start date")}),(0,p.jsx)(V.A,{value:this.state.startDateStr,onChange:this.handleStartChange,placeholder:"yyyy-mm-dd",autoFocus:!0})]}),(0,p.jsxs)(We.A,{children:[(0,p.jsx)(Ge.A,{children:(0,h.AP)("End date")}),(0,p.jsx)(V.A,{value:this.state.endDateStr,onChange:this.handleEndChange,placeholder:"yyyy-mm-dd"})]}),this.state.errMsg&&(0,p.jsx)(Be.A,{className:"mt-2",color:"danger",children:(0,h.AP)(this.state.errMsg)})]}),(0,p.jsxs)(Ye.A,{children:[(0,p.jsx)(S.A,{color:"secondary",onClick:this.props.toggle,children:(0,h.AP)("Cancel")}),(0,p.jsx)(S.A,{color:"primary",onClick:this.downloadExcel,children:(0,h.AP)("Submit")})]})]}),this.state.isShowIODialog&&(0,p.jsx)(Bi.A,{toggle:this.onExportToggle})]})}}])}(o.Component),Vi=function(e){function t(e){var i;return(0,n.default)(this,t),(i=(0,r.default)(this,t,[e])).toggleExportExcelDialog=function(){i.setState({isExportExcelDialogOpen:!i.state.isExportExcelDialogOpen})},i.tabItemClick=function(e){i.setState({logType:e}),i.props.tabItemClick(e)},i.state={isExportExcelDialogOpen:!1,logType:""},i}return(0,s.default)(t,e),(0,a.default)(t,[{key:"componentDidMount",value:function(){var e=window.location.href.split("/"),t=e[e.length-2];"logadmin"===t&&(t="fileaudit"),this.setState({logType:t})}},{key:"render",value:function(){var e=this,t=this.state,i=t.isExportExcelDialogOpen,n=t.logType;return(0,p.jsxs)(o.Fragment,{children:["repo-transfer"===this.props.currentTab||"group-member-audit"===this.props.currentTab?(0,p.jsx)(_,{}):(0,p.jsx)(_,{children:(0,p.jsx)(S.A,{className:"btn btn-secondary operation-item",onClick:this.toggleExportExcelDialog,children:(0,h.AP)("Export Excel")})}),(0,p.jsx)("div",{className:"main-panel-center flex-row",children:(0,p.jsxs)("div",{className:"cur-view-container h-100",children:[(0,p.jsx)("div",{className:"cur-view-path org-user-nav",children:(0,p.jsxs)("ul",{className:"nav",children:[(0,p.jsx)("li",{className:"nav-item",onClick:function(){return e.tabItemClick("fileaudit")},children:(0,p.jsx)(c.N_,{className:"nav-link ".concat("fileaudit"===this.props.currentTab?"active":""),to:h.Yc+"org/logadmin/",title:(0,h.AP)("File Access"),children:(0,h.AP)("File Access")})}),(0,p.jsx)("li",{className:"nav-item",onClick:function(){return e.tabItemClick("file-update")},children:(0,p.jsx)(c.N_,{className:"nav-link ".concat("file-update"===this.props.currentTab?"active":""),to:h.Yc+"org/logadmin/file-update/",title:(0,h.AP)("File Update"),children:(0,h.AP)("File Update")})}),(0,p.jsx)("li",{className:"nav-item",onClick:function(){return e.tabItemClick("perm-audit")},children:(0,p.jsx)(c.N_,{className:"nav-link ".concat("perm-audit"===this.props.currentTab?"active":""),to:h.Yc+"org/logadmin/perm-audit/",title:(0,h.AP)("Permission"),children:(0,h.AP)("Permission")})}),(0,p.jsx)("li",{className:"nav-item",onClick:function(){return e.tabItemClick("repo-transfer")},children:(0,p.jsx)(c.N_,{className:"nav-link ".concat("repo-transfer"===this.props.currentTab?"active":""),to:h.Yc+"org/logadmin/repo-transfer/",title:(0,h.AP)("Repo Transfer"),children:(0,h.AP)("Repo Transfer")})}),(0,p.jsx)("li",{className:"nav-item",onClick:function(){return e.tabItemClick("group-member-audit")},children:(0,p.jsx)(c.N_,{className:"nav-link ".concat("group-member-audit"===this.props.currentTab?"active":""),to:h.Yc+"org/logadmin/group-member-audit/",title:(0,h.AP)("Group Invite"),children:(0,h.AP)("Group Invite")})})]})}),(0,p.jsx)("div",{className:"h-100 o-auto",children:this.props.children})]})}),i&&(0,p.jsx)(Fe.A,{children:(0,p.jsx)(Yi,{logType:n,toggle:this.toggleExportExcelDialog})})]})}}])}(o.Component);y().locale(h.vV);var qi=(0,a.default)((function e(t){(0,n.default)(this,e),this.ip=t.ip,this.type=t.type,this.device=t.device,this.repo_id=t.repo_id,this.repo_name=t.repo_name,this.file_name=t.file_name,this.file_path=t.file_path,this.user_name=t.user_name,this.user_email=t.user_email,this.user_contact_email=t.user_contact_email,this.time=y()(t.time).format("YYYY-MM-DD HH:mm:ss")}));y().locale(h.vV);var Hi=function(e){function t(e){var i;return(0,n.default)(this,t),(i=(0,r.default)(this,t,[e])).initData=function(e,t,n){L.k.orgAdminListFileAudit(e,t,n).then((function(e){var t=e.data.log_list.map((function(e){return new qi(e)}));i.setState({eventList:t,pageNext:e.data.page_next,page:e.data.page,userSelected:e.data.user_selected,repoSelected:e.data.repo_selected})})).catch((function(e){var t=E.Aq.getErrorMsg(e);U.A.danger(t)}))},i.onChangePageNum=function(e,t){e.preventDefault();var n=i.state.page;1==t?n+=1:n-=1;var a=i.state.userSelected,r=i.state.repoSelected;i.initData(a,r,n)},i.filterUser=function(e){i.setState({userSelected:e})},i.filterRepo=function(e){i.setState({repoSelected:e})},i.state={page:1,pageNext:!1,eventList:[],userSelected:"",repoSelected:"",isItemFreezed:!1},i}return(0,s.default)(t,e),(0,a.default)(t,[{key:"componentDidMount",value:function(){var e=this.state.page,t=this.state.userSelected,i=this.state.repoSelected;this.initData(t,i,e)}},{key:"render",value:function(){var e=this,t=this.state.eventList;return(0,p.jsxs)("div",{className:"cur-view-content",children:[(this.state.userSelected||this.state.repoSelected)&&(0,p.jsxs)(o.Fragment,{children:[this.state.userSelected&&(0,p.jsxs)("span",{className:"audit-unselect-item",onClick:this.filterUser.bind(this,null),children:[(0,p.jsx)("span",{className:"no-deco",children:this.state.userSelected})," \u2716"]}),this.state.repoSelected&&(0,p.jsxs)("span",{className:"audit-unselect-item",onClick:this.filterRepo.bind(this,null),children:[(0,p.jsx)("span",{className:"no-deco",children:this.state.repoSelected})," \u2716"]})]}),(0,p.jsxs)("table",{children:[(0,p.jsx)("thead",{children:(0,p.jsxs)("tr",{children:[(0,p.jsx)("th",{width:"24%",children:(0,h.AP)("User")}),(0,p.jsx)("th",{width:"10%",children:(0,h.AP)("Type")}),(0,p.jsx)("th",{width:"13%",children:(0,h.AP)("IP")}),(0,p.jsx)("th",{width:"17%",children:(0,h.AP)("Date")}),(0,p.jsx)("th",{width:"18%",children:(0,h.AP)("Library")}),(0,p.jsx)("th",{width:"18%",children:(0,h.AP)("File")})]})}),(0,p.jsx)("tbody",{children:t.map((function(t,i){return(0,p.jsx)(Wi,{fileEvent:t,isItemFreezed:e.state.isItemFreezed,filterUser:e.filterUser,filterRepo:e.filterRepo,userSelected:e.state.userSelected,repoSelected:e.state.repoSelected},i)}))})]}),(0,p.jsxs)("div",{className:"paginator",children:[1!=this.state.page&&(0,p.jsx)("a",{href:"#",onClick:function(t){return e.onChangePageNum(t,-1)},children:(0,h.AP)("Previous")}),1!=this.state.page&&this.state.pageNext&&(0,p.jsx)("span",{children:" | "}),this.state.pageNext&&(0,p.jsx)("a",{href:"#",onClick:function(t){return e.onChangePageNum(t,1)},children:(0,h.AP)("Next")})]})]})}}])}(o.Component),Wi=function(e){function t(e){var i;return(0,n.default)(this,t),(i=(0,r.default)(this,t,[e])).onMouseEnter=function(){i.props.isItemFreezed||i.setState({showMenu:!0,highlight:!0})},i.onMouseLeave=function(){i.props.isItemFreezed||i.setState({showMenu:!1,highlight:!1})},i.toggleUserDropdown=function(){i.setState({userDropdownOpen:!i.state.userDropdownOpen})},i.renderUser=function(e){return e.user_email?(0,p.jsxs)("span",{children:[(0,p.jsx)("a",{href:h.Yc+"org/useradmin/info/"+e.user_email+"/",children:e.user_name})," ",(0,p.jsxs)(Ne.A,{size:"sm",isOpen:i.state.userDropdownOpen,toggle:i.toggleUserDropdown,className:i.state.highlight?"":"vh",tag:"span",children:[(0,p.jsx)(Ce.A,{tag:"i",className:"op-icon sf-dropdown-toggle sf3-font-more sf3-font"}),(0,p.jsx)(Ie.A,{children:(0,p.jsxs)(Oe.A,{onClick:i.props.filterUser.bind(i,e.user_email),children:[(0,h.AP)("Only Show")," ",(0,p.jsx)("span",{className:"font-weight-bold",children:e.user_name})]})})]})]}):(0,h.AP)("Anonymous User")},i.renderType=function(e){return-1!=e.indexOf("web")&&(e="web"),-1!=e.indexOf("api")&&(e="api"),-1!=e.indexOf("share-link")&&(e="share link"),e},i.toggleRepoDropdown=function(){i.setState({repoDropdownOpen:!i.state.repoDropdownOpen})},i.renderRepo=function(e){var t="Deleted";return e.repo_name&&(t=e.repo_name),(0,p.jsxs)("span",{children:[(0,p.jsx)("span",{children:t}),e.repo_name&&(0,p.jsxs)(Ne.A,{size:"sm",isOpen:i.state.repoDropdownOpen,toggle:i.toggleRepoDropdown,className:i.state.highlight?"":"vh",children:[(0,p.jsx)(Ce.A,{tag:"i",className:"op-icon sf-dropdown-toggle sf3-font-more sf3-font"}),(0,p.jsx)(Ie.A,{children:(0,p.jsxs)(Oe.A,{size:"sm",onClick:i.props.filterRepo.bind(i,e.repo_name),children:[(0,h.AP)("Only Show")," ",(0,p.jsx)("span",{className:"font-weight-bold",children:e.repo_name})]})})]})]})},i.state={highlight:!1,showMenu:!1,isItemMenuShow:!1,userDropdownOpen:!1,repoDropdownOpen:!1},i}return(0,s.default)(t,e),(0,a.default)(t,[{key:"render",value:function(){var e=this.props.fileEvent;return this.props.userSelected&&e.user_email!==this.props.userSelected||this.props.repoSelected&&e.repo_name!==this.props.repoSelected?null:(0,p.jsxs)("tr",{className:this.state.highlight?"tr-highlight":"",onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave,children:[(0,p.jsx)("td",{children:this.renderUser(e)}),(0,p.jsx)("td",{children:this.renderType(e.type)}),(0,p.jsx)("td",{children:e.ip}),(0,p.jsx)("td",{children:y()(e.time).format("YYYY-MM-DD HH:mm:ss")}),(0,p.jsx)("td",{children:this.renderRepo(e)}),(0,p.jsx)("td",{children:(0,p.jsx)("span",{title:e.file_path,children:e.file_name})})]})}}])}(o.Component),Gi=Hi;y().locale(h.vV);var Qi=(0,a.default)((function e(t){(0,n.default)(this,e),this.repo_id=t.repo_id,this.description=t.description,this.repo_name=t.repo_name,this.user_name=t.user_name,this.user_email=t.user_email,this.repo_encrypted=t.repo_encrypted,this.repo_commit_id=t.repo_commit_id,this.user_contact_email=t.user_contact_email,this.time=y()(t.time).format("YYYY-MM-DD HH:mm:ss")})),Xi=function(e){function t(e){var i;return(0,n.default)(this,t),(i=(0,r.default)(this,t,[e])).renderContentItem=function(e){var t="";t+='<ul class="list-group list-group-flush">';for(var i=0,n=e.length;i<n;i++)t+='<li class="list-group-item">'+e[i]+"</li>";return{__html:t+="</ul>"}},i.renderContent=function(){return i.state.newfile.length>0?(0,p.jsxs)("div",{children:[(0,p.jsx)("h4",{children:(0,h.AP)("New files")}),(0,p.jsx)("p",{children:i.state.time}),(0,p.jsx)("div",{dangerouslySetInnerHTML:i.renderContentItem(i.state.newfile)})]}):i.state.removed.length>0?(0,p.jsxs)("div",{children:[(0,p.jsx)("h4",{children:(0,h.AP)("Deleted files")}),(0,p.jsx)("p",{children:i.state.time}),(0,p.jsx)("div",{dangerouslySetInnerHTML:i.renderContentItem(i.state.removed)})]}):i.state.renamed.length>0?(0,p.jsxs)("div",{children:[(0,p.jsx)("h4",{children:(0,h.AP)("Renamed or Moved files")}),(0,p.jsx)("p",{children:i.state.time}),(0,p.jsx)("div",{dangerouslySetInnerHTML:i.renderContentItem(i.state.renamed)})]}):i.state.modified.length>0?(0,p.jsxs)("div",{children:[(0,p.jsx)("h4",{children:(0,h.AP)("Modified files")}),(0,p.jsx)("p",{children:i.state.time}),(0,p.jsx)("div",{dangerouslySetInnerHTML:i.renderContentItem(i.state.modified)})]}):i.state.newdir.length>0?(0,p.jsxs)("div",{children:[(0,p.jsx)("h4",{children:(0,h.AP)("New directories")}),(0,p.jsx)("p",{children:i.state.time}),(0,p.jsx)("div",{dangerouslySetInnerHTML:i.renderContentItem(i.state.newdir)})]}):i.state.deldir.length>0?(0,p.jsxs)("div",{children:[(0,p.jsx)("h4",{children:(0,h.AP)("Deleted directories")}),(0,p.jsx)("p",{children:i.state.time}),(0,p.jsx)("div",{dangerouslySetInnerHTML:i.renderContentItem(i.state.deldir)})]}):void 0},i.state={time:"",renamed:[],deldir:[],modified:[],newdir:[],newfile:[],removed:[]},i}return(0,s.default)(t,e),(0,a.default)(t,[{key:"componentDidMount",value:function(){var e=this;L.k.orgAdminGetFileUpdateDetail(this.props.repoID,this.props.commitID).then((function(t){e.setState({time:t.data.date_time,renamed:e.state.renamed.concat(t.data.renamed),deldir:e.state.deldir.concat(t.data.deldir),modified:e.state.modified.concat(t.data.modified),newdir:e.state.newdir.concat(t.data.newdir),newfile:e.state.newfile.concat(t.data.new),removed:e.state.removed.concat(t.data.removed)})})).catch((function(e){var t=E.Aq.getErrorMsg(e);U.A.danger(t)}))}},{key:"render",value:function(){return(0,p.jsxs)(ze.A,{isOpen:!0,toggle:this.props.toggleCancel,children:[(0,p.jsx)(Ve.A,{toggle:this.props.toggleCancel,children:(0,h.AP)("Modification Details")}),(0,p.jsx)(Ue.A,{children:this.renderContent()})]})}}])}(o.Component);y().locale(h.vV);var Ki=function(e){function t(e){var i;return(0,n.default)(this,t),(i=(0,r.default)(this,t,[e])).initData=function(e,t,n){L.k.orgAdminListFileUpdate(e,t,n).then((function(e){var t=e.data.log_list.map((function(e){return new Qi(e)}));i.setState({eventList:t,pageNext:e.data.page_next,page:e.data.page})})).catch((function(e){var t=E.Aq.getErrorMsg(e);U.A.danger(t)}))},i.onChangePageNum=function(e,t){e.preventDefault();var n=i.state.page;1==t?n+=1:n-=1;var a=i.state.userSelected,r=i.state.repoSelected;i.initData(a,r,n)},i.toggleCancelDetail=function(){i.setState({showDetails:!i.state.showDetails})},i.onDetails=function(e,t){e.preventDefault(),i.setState({showDetails:!i.state.showDetails,repoID:t.repo_id,commitID:t.repo_commit_id})},i.filterUser=function(e){i.setState({userSelected:e})},i.filterRepo=function(e){i.setState({repoSelected:e})},i.state={page:1,pageNext:!1,eventList:[],userSelected:"",repoSelected:"",isItemFreezed:!1,showDetails:!1,repoID:"",commitID:""},i}return(0,s.default)(t,e),(0,a.default)(t,[{key:"componentDidMount",value:function(){var e=this.state.page,t=this.state.userSelected,i=this.state.repoSelected;this.initData(t,i,e)}},{key:"render",value:function(){var e=this,t=this.state.eventList;return(0,p.jsxs)("div",{className:"cur-view-content",children:[(this.state.userSelected||this.state.repoSelected)&&(0,p.jsxs)(o.Fragment,{children:[this.state.userSelected&&(0,p.jsxs)("span",{className:"audit-unselect-item",onClick:this.filterUser.bind(this,null),children:[(0,p.jsx)("span",{className:"no-deco",children:this.state.userSelected})," \u2716"]}),this.state.repoSelected&&(0,p.jsxs)("span",{className:"audit-unselect-item",onClick:this.filterRepo.bind(this,null),children:[(0,p.jsx)("span",{className:"no-deco",children:this.state.repoSelected})," \u2716"]})]}),(0,p.jsxs)("table",{children:[(0,p.jsx)("thead",{children:(0,p.jsxs)("tr",{children:[(0,p.jsx)("th",{width:"25%",children:(0,h.AP)("User")}),(0,p.jsx)("th",{width:"17%",children:(0,h.AP)("Date")}),(0,p.jsx)("th",{width:"25%",children:(0,h.AP)("Library")}),(0,p.jsx)("th",{width:"33%",children:(0,h.AP)("Action")})]})}),(0,p.jsx)("tbody",{children:t.map((function(t,i){return(0,p.jsx)($i,{fileEvent:t,isItemFreezed:e.state.isItemFreezed,onDetails:e.onDetails,filterUser:e.filterUser,filterRepo:e.filterRepo,userSelected:e.state.userSelected,repoSelected:e.state.repoSelected},i)}))})]}),(0,p.jsxs)("div",{className:"paginator",children:[1!=this.state.page&&(0,p.jsx)("a",{href:"#",onClick:function(t){return e.onChangePageNum(t,-1)},children:(0,h.AP)("Previous")}),1!=this.state.page&&this.state.pageNext&&(0,p.jsx)("span",{children:" | "}),this.state.pageNext&&(0,p.jsx)("a",{href:"#",onClick:function(t){return e.onChangePageNum(t,1)},children:(0,h.AP)("Next")})]}),this.state.showDetails&&(0,p.jsx)(Fe.A,{children:(0,p.jsx)(Xi,{repoID:this.state.repoID,commitID:this.state.commitID,toggleCancel:this.toggleCancelDetail})})]})}}])}(o.Component),$i=function(e){function t(e){var i;return(0,n.default)(this,t),(i=(0,r.default)(this,t,[e])).onMouseEnter=function(){i.props.isItemFreezed||i.setState({showMenu:!0,highlight:!0})},i.onMouseLeave=function(){i.props.isItemFreezed||i.setState({showMenu:!1,highlight:!1})},i.toggleUserDropdown=function(){i.setState({userDropdownOpen:!i.state.userDropdownOpen})},i.renderUser=function(e){return e.user_email?(0,p.jsxs)("span",{children:[(0,p.jsx)("a",{href:h.Yc+"org/useradmin/info/"+e.user_email+"/",children:e.user_name})," ",(0,p.jsxs)(Ne.A,{size:"sm",isOpen:i.state.userDropdownOpen,toggle:i.toggleUserDropdown,className:i.state.highlight?"":"vh",tag:"span",children:[(0,p.jsx)(Ce.A,{tag:"i",className:"op-icon sf-dropdown-toggle sf3-font-more sf3-font"}),(0,p.jsx)(Ie.A,{children:(0,p.jsxs)(Oe.A,{onClick:i.props.filterUser.bind(i,e.user_email),children:[(0,h.AP)("Only Show")," ",(0,p.jsx)("span",{className:"font-weight-bold",children:e.user_name})]})})]})]}):(0,h.AP)("Anonymous User")},i.toggleRepoDropdown=function(){i.setState({repoDropdownOpen:!i.state.repoDropdownOpen})},i.renderRepo=function(e){var t="Deleted";return e.repo_name&&(t=e.repo_name),(0,p.jsxs)("span",{children:[(0,p.jsx)("span",{children:t}),e.repo_name&&(0,p.jsxs)(Ne.A,{size:"sm",isOpen:i.state.repoDropdownOpen,toggle:i.toggleRepoDropdown,className:i.state.highlight?"":"vh",children:[(0,p.jsx)(Ce.A,{tag:"i",className:"op-icon sf-dropdown-toggle sf3-font-more sf3-font"}),(0,p.jsx)(Ie.A,{children:(0,p.jsxs)(Oe.A,{size:"sm",onClick:i.props.filterRepo.bind(i,e.repo_name),children:[(0,h.AP)("Only Show")," ",(0,p.jsx)("span",{className:"font-weight-bold",children:e.repo_name})]})})]})]})},i.renderAction=function(e){return e.repo_encrypted||!e.repo_id?(0,p.jsx)("td",{children:e.description}):(0,p.jsxs)("td",{children:[e.description,(0,p.jsx)("a",{className:"font-weight-normal text-muted ml-1",href:"#",onClick:function(t){return i.props.onDetails(t,e)},children:(0,h.AP)("Details")})]})},i.state={highlight:!1,showMenu:!1,isItemMenuShow:!1,userDropdownOpen:!1,repoDropdownOpen:!1},i}return(0,s.default)(t,e),(0,a.default)(t,[{key:"render",value:function(){var e=this.props.fileEvent;return this.props.userSelected&&e.user_email!==this.props.userSelected||this.props.repoSelected&&e.repo_name!==this.props.repoSelected?null:(0,p.jsxs)("tr",{className:this.state.highlight?"tr-highlight":"",onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave,children:[(0,p.jsx)("td",{children:this.renderUser(e)}),(0,p.jsx)("td",{children:y()(e.time).format("YYYY-MM-DD HH:mm:ss")}),(0,p.jsx)("td",{children:this.renderRepo(e)}),this.renderAction(e)]})}}])}(o.Component),Zi=Ki;y().locale(h.vV);var Ji=(0,a.default)((function e(t){(0,n.default)(this,e),this.from_user_name=t.from_user_name,this.from_user_email=t.from_user_email,this.from_user_contact_email=t.from_user_contact_email,this.to_user_email=t.to_user_email,this.to_user_name=t.to_user_name,this.to_user_contact_email=t.to_user_contact_email,this.to_group_name=t.to_group_name,this.to_group_id=t.to_group_id,this.type=t.type,this.repo_id=t.repo_id,this.repo_name=t.repo_name,this.folder_name=t.folder_name,this.folder_path=t.folder_path,this.time=y()(t.time).format("YYYY-MM-DD HH:mm:ss"),this.permission=t.permission}));y().locale(h.vV);var en=function(e){function t(e){var i;return(0,n.default)(this,t),(i=(0,r.default)(this,t,[e])).initData=function(e,t,n){L.k.orgAdminListPermAudit(e,t,n).then((function(e){var t=e.data.log_list.map((function(e){return new Ji(e)}));i.setState({eventList:t,pageNext:e.data.page_next,page:e.data.page})})).catch((function(e){var t=E.Aq.getErrorMsg(e);U.A.danger(t)}))},i.onChangePageNum=function(e,t){e.preventDefault();var n=i.state.page;1==t?n+=1:n-=1,i.initData(n)},i.filterUser=function(e){i.setState({userSelected:e})},i.state={page:1,pageNext:!1,eventList:[],userSelected:"",repoSelected:"",isItemFreezed:!1},i}return(0,s.default)(t,e),(0,a.default)(t,[{key:"componentDidMount",value:function(){var e=this.state.page,t=this.state.userSelected,i=this.state.repoSelected;this.initData(t,i,e)}},{key:"render",value:function(){var e=this,t=this.state.eventList;return(0,p.jsxs)("div",{className:"cur-view-content",children:[this.state.userSelected&&(0,p.jsxs)("span",{className:"audit-unselect-item",onClick:this.filterUser.bind(this,null),children:[(0,p.jsx)("span",{className:"no-deco",children:this.state.userSelected})," \u2716"]}),(0,p.jsxs)("table",{children:[(0,p.jsx)("thead",{children:(0,p.jsxs)("tr",{children:[(0,p.jsx)("th",{width:"18%",children:(0,h.AP)("Share From")}),(0,p.jsx)("th",{width:"15%",children:(0,h.AP)("Share To")}),(0,p.jsx)("th",{width:"8%",children:(0,h.AP)("Actions")}),(0,p.jsx)("th",{width:"13%",children:(0,h.AP)("Permission")}),(0,p.jsx)("th",{width:"15%",children:(0,h.AP)("Library")}),(0,p.jsx)("th",{width:"15%",children:(0,h.AP)("Folder")}),(0,p.jsx)("th",{width:"16%",children:(0,h.AP)("Date")})]})}),(0,p.jsx)("tbody",{children:t.map((function(t,i){return(0,p.jsx)(tn,{permEvent:t,isItemFreezed:e.state.isItemFreezed,filterUser:e.filterUser,userSelected:e.state.userSelected},i)}))})]}),(0,p.jsxs)("div",{className:"paginator",children:[1!=this.state.page&&(0,p.jsx)("a",{href:"#",onClick:function(t){return e.onChangePageNum(t,-1)},children:(0,h.AP)("Previous")}),1!=this.state.page&&this.state.pageNext&&(0,p.jsx)("span",{children:" | "}),this.state.pageNext&&(0,p.jsx)("a",{href:"#",onClick:function(t){return e.onChangePageNum(t,1)},children:(0,h.AP)("Next")})]})]})}}])}(o.Component),tn=function(e){function t(e){var i;return(0,n.default)(this,t),(i=(0,r.default)(this,t,[e])).onMouseEnter=function(){i.props.isItemFreezed||i.setState({showMenu:!0,highlight:!0})},i.onMouseLeave=function(){i.props.isItemFreezed||i.setState({showMenu:!1,highlight:!1})},i.renderFromUser=function(e){return e.from_user_email?(0,p.jsxs)("span",{children:[(0,p.jsx)("a",{href:h.Yc+"org/useradmin/info/"+e.from_user_email+"/",children:e.from_user_name})," ",(0,p.jsxs)(Ne.A,{size:"sm",isOpen:i.state.userDropdownOpen,toggle:i.toggleUserDropdown,className:i.state.highlight?"":"vh",tag:"span",children:[(0,p.jsx)(Ce.A,{tag:"i",className:"op-icon sf-dropdown-toggle sf3-font-more sf3-font"}),(0,p.jsx)(Ie.A,{children:(0,p.jsxs)(Oe.A,{onClick:i.props.filterUser.bind(i,e.from_user_email),children:[(0,h.AP)("Only Show")," ",(0,p.jsx)("span",{className:"font-weight-bold",children:e.from_user_name})]})})]})]}):(0,h.AP)("Anonymous User")},i.toggleUserDropdown=function(){i.setState({userDropdownOpen:!i.state.userDropdownOpen})},i.renderToUser=function(e){return-1!=e.type.indexOf("public")?(0,p.jsx)("a",{href:h.Yc+"org/",children:(0,h.AP)("Organization")}):-1!=e.type.indexOf("group")?e.to_group_name?(0,p.jsx)("a",{href:h.Yc+"org/groupadmin/"+e.to_group_id+"/",children:e.to_group_name}):"Deleted":-1!=e.type.indexOf("user")?(0,p.jsx)("a",{href:h.Yc+"org/useradmin/info/"+e.to_user_email+"/",children:e.to_user_name}):void 0},i.renderType=function(e){return-1!=e.indexOf("add")&&(e="Add"),-1!=e.indexOf("modify")&&(e="Modify"),-1!=e.indexOf("delete")&&(e="Delete"),e},i.renderRepo=function(e){var t="Deleted";return e.repo_name&&(t=e.repo_name),t},i.renderFolder=function(e){var t="/";return e&&(t=e),t},i.state={highlight:!1,showMenu:!1,isItemMenuShow:!1,userDropdownOpen:!1},i}return(0,s.default)(t,e),(0,a.default)(t,[{key:"render",value:function(){var e=this.props.permEvent;return this.props.userSelected&&e.from_user_email!==this.props.userSelected?null:(0,p.jsxs)("tr",{className:this.state.highlight?"tr-highlight":"",onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave,children:[(0,p.jsx)("td",{children:this.renderFromUser(e)}),(0,p.jsx)("td",{children:this.renderToUser(e)}),(0,p.jsx)("td",{children:this.renderType(e.type)}),(0,p.jsx)("td",{children:E.Aq.sharePerms(e.permission)}),(0,p.jsx)("td",{children:this.renderRepo(e)}),(0,p.jsx)("td",{children:this.renderFolder(e.folder_name)}),(0,p.jsx)("td",{children:y()(e.time).format("YYYY-MM-DD HH:mm:ss")})]})}}])}(o.Component),nn=en;y().locale(h.vV);var an=(0,a.default)((function e(t){(0,n.default)(this,e),this.from_group_id=t.from_group_id,this.from_group_name=t.from_group_name,this.from_type=t.from_type,this.from_user_contact_email=t.from_user_contact_email,this.from_user_email=t.from_user_email,this.from_user_name=t.from_user_name,this.repo_id=t.repo_id,this.repo_name=t.repo_name,this.to_group_id=t.to_group_id,this.to_group_name=t.to_group_name,this.to_type=t.to_type,this.to_user_contact_email=t.to_user_contact_email,this.to_user_email=t.to_user_email,this.to_user_name=t.to_user_name,this.operator_email=t.operator_email,this.operator_name=t.operator_name,this.operator_contact_email=t.operator_contact_email,this.time=y()(t.date).format("YYYY-MM-DD HH:mm:ss")}));y().locale(h.vV);var rn=function(e){function t(e){var i;return(0,n.default)(this,t),(i=(0,r.default)(this,t,[e])).initData=function(e,t){L.k.orgAdminListFileTransfer(e,t).then((function(e){var t=e.data.log_list.map((function(e){return new an(e)}));i.setState({eventList:t,pageNext:e.data.page_next,page:e.data.page})})).catch((function(e){var t=E.Aq.getErrorMsg(e);U.A.danger(t)}))},i.onChangePageNum=function(e,t){e.preventDefault();var n=i.state.page,a=i.state.perPage;1==t?n+=1:n-=1,i.initData(n,a)},i.state={page:1,perPage:25,pageNext:!1,eventList:[],isItemFreezed:!1},i}return(0,s.default)(t,e),(0,a.default)(t,[{key:"componentDidMount",value:function(){var e=this.state.page,t=this.state.perPage;this.initData(e,t)}},{key:"render",value:function(){var e=this,t=this.state.eventList;return(0,p.jsxs)("div",{className:"cur-view-content",children:[(0,p.jsxs)("table",{children:[(0,p.jsx)("thead",{children:(0,p.jsxs)("tr",{children:[(0,p.jsx)("th",{width:"20%",children:(0,h.AP)("Transfer From")}),(0,p.jsx)("th",{width:"20%",children:(0,h.AP)("Transfer To")}),(0,p.jsx)("th",{width:"20%",children:(0,h.AP)("Operator")}),(0,p.jsx)("th",{width:"25%",children:(0,h.AP)("Library")}),(0,p.jsx)("th",{width:"15%",children:(0,h.AP)("Date")})]})}),(0,p.jsx)("tbody",{children:t.map((function(t,i){return(0,p.jsx)(sn,{fileEvent:t,isItemFreezed:e.state.isItemFreezed},i)}))})]}),(0,p.jsxs)("div",{className:"paginator",children:[1!=this.state.page&&(0,p.jsx)("a",{href:"#",onClick:function(t){return e.onChangePageNum(t,-1)},children:(0,h.AP)("Previous")}),1!=this.state.page&&this.state.pageNext&&(0,p.jsx)("span",{children:" | "}),this.state.pageNext&&(0,p.jsx)("a",{href:"#",onClick:function(t){return e.onChangePageNum(t,1)},children:(0,h.AP)("Next")})]})]})}}])}(o.Component),sn=function(e){function t(e){var i;return(0,n.default)(this,t),(i=(0,r.default)(this,t,[e])).onMouseEnter=function(){i.props.isItemFreezed||i.setState({showMenu:!0,highlight:!0})},i.onMouseLeave=function(){i.props.isItemFreezed||i.setState({showMenu:!1,highlight:!1})},i.getTransferTo=function(e){switch(e.to_type){case"user":return(0,p.jsx)(he,{email:e.to_user_email,name:e.to_user_name});case"group":return(0,p.jsx)(c.N_,{to:"".concat(h.Yc,"org/groupadmin/").concat(e.to_group_id,"/"),children:e.to_group_name});default:return(0,h.AP)("Deleted")}},i.getTransferFrom=function(e){switch(e.from_type){case"user":return(0,p.jsx)(he,{email:e.from_user_email,name:e.from_user_name});case"group":return(0,p.jsx)(c.N_,{to:"".concat(h.Yc,"org/groupadmin/").concat(e.from_group_id,"/"),children:e.from_group_name});default:return(0,h.AP)("Deleted")}},i.getOperator=function(e){return(0,p.jsx)(he,{email:e.operator_email,name:e.operator_name})},i.state={highlight:!1,showMenu:!1,isItemMenuShow:!1},i}return(0,s.default)(t,e),(0,a.default)(t,[{key:"render",value:function(){var e=this.props.fileEvent;return(0,p.jsxs)("tr",{className:this.state.highlight?"tr-highlight":"",onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave,children:[(0,p.jsx)("td",{children:this.getTransferFrom(e)}),(0,p.jsx)("td",{children:this.getTransferTo(e)}),(0,p.jsx)("td",{children:this.getOperator(e)}),(0,p.jsx)("td",{children:e.repo_name?e.repo_name:(0,h.AP)("Deleted")}),(0,p.jsx)("td",{children:y()(e.time).fromNow()})]})}}])}(o.Component),on=rn;y().locale(h.vV);var ln=(0,a.default)((function e(t){(0,n.default)(this,e),this.group_id=t.group_id,this.group_name=t.group_name,this.user_contact_email=t.user_contact_email,this.user_email=t.user_email,this.user_name=t.user_name,this.operator_email=t.operator_email,this.operator_name=t.operator_name,this.operator_contact_email=t.operator_contact_email,this.operation=t.operation,this.time=y()(t.date).format("YYYY-MM-DD HH:mm:ss")}));y().locale(h.vV);var cn=function(e){function t(e){var i;return(0,n.default)(this,t),(i=(0,r.default)(this,t,[e])).initData=function(e,t){L.k.orgAdminListGroupInvite(e,t).then((function(e){var t=e.data.log_list.map((function(e){return new ln(e)}));i.setState({eventList:t,pageNext:e.data.page_next,page:e.data.page})})).catch((function(e){var t=E.Aq.getErrorMsg(e);U.A.danger(t)}))},i.onChangePageNum=function(e,t){e.preventDefault();var n=i.state.page,a=i.state.perPage;1==t?n+=1:n-=1,i.initData(n,a)},i.state={page:1,perPage:25,pageNext:!1,eventList:[]},i}return(0,s.default)(t,e),(0,a.default)(t,[{key:"componentDidMount",value:function(){var e=this.state.page,t=this.state.perPage;this.initData(e,t)}},{key:"render",value:function(){var e=this,t=this.state.eventList;return(0,p.jsxs)("div",{className:"cur-view-content",children:[(0,p.jsxs)("table",{children:[(0,p.jsx)("thead",{children:(0,p.jsxs)("tr",{children:[(0,p.jsx)("th",{width:"20%",children:(0,h.AP)("User")}),(0,p.jsx)("th",{width:"20%",children:(0,h.AP)("Group")}),(0,p.jsx)("th",{width:"20%",children:(0,h.AP)("Operator")}),(0,p.jsx)("th",{width:"20%",children:(0,h.AP)("Action")}),(0,p.jsx)("th",{width:"20%",children:(0,h.AP)("Date")})]})}),(0,p.jsx)("tbody",{children:t.map((function(e,t){return(0,p.jsx)(dn,{groupEvent:e},t)}))})]}),(0,p.jsxs)("div",{className:"paginator",children:[1!=this.state.page&&(0,p.jsx)("a",{href:"#",onClick:function(t){return e.onChangePageNum(t,-1)},children:(0,h.AP)("Previous")}),1!=this.state.page&&this.state.pageNext&&(0,p.jsx)("span",{children:" | "}),this.state.pageNext&&(0,p.jsx)("a",{href:"#",onClick:function(t){return e.onChangePageNum(t,1)},children:(0,h.AP)("Next")})]})]})}}])}(o.Component),dn=function(e){function t(e){var i;return(0,n.default)(this,t),(i=(0,r.default)(this,t,[e])).handleMouseOver=function(){i.setState({highlight:!0})},i.handleMouseOut=function(){i.setState({highlight:!1})},i.getActionTextByEType=function(e){return-1!=e.indexOf("group_member_add")?(0,h.AP)("Add member"):-1!=e.indexOf("group_member_delete")?(0,h.AP)("Delete member"):""},i.state={highlight:!1},i}return(0,s.default)(t,e),(0,a.default)(t,[{key:"render",value:function(){var e=this.props.groupEvent;return(0,p.jsxs)("tr",{className:this.state.highlight?"tr-highlight":"",onMouseOver:this.handleMouseOver,onMouseOut:this.handleMouseOut,children:[(0,p.jsx)("td",{children:(0,p.jsx)(he,{email:e.user_email,name:e.user_name})}),(0,p.jsx)("td",{children:(0,p.jsx)(c.N_,{to:"".concat(h.Yc,"org/groupadmin/").concat(e.group_id,"/"),children:e.group_name})}),(0,p.jsx)("td",{children:(0,p.jsx)(he,{email:e.operator_email,name:e.operator_name})}),(0,p.jsx)("td",{children:this.getActionTextByEType(e.operation)}),(0,p.jsx)("td",{children:y()(e.time).fromNow()})]})}}])}(o.Component),un=cn,hn=i(97176),fn=i(67243),gn=i.n(fn),pn=function(e){function t(e){return(0,n.default)(this,t),(0,r.default)(this,t,[e])}return(0,s.default)(t,e),(0,a.default)(t,[{key:"render",value:function(){var e=this.props,t=e.headingText,i=e.children;return(0,p.jsxs)("div",{className:"mb-4",children:[(0,p.jsx)("h4",{className:"border-bottom font-weight-normal mb-2 pb-1",children:t}),i]})}}])}(o.Component),mn=function(e){function t(e){var i;return(0,n.default)(this,t),(i=(0,r.default)(this,t,[e])).toggleBtns=function(){i.setState({isBtnsShown:!i.state.isBtnsShown})},i.hideBtns=function(){i.state.isBtnsShown&&(i.props.value!=i.state.value&&i.setState({value:i.props.value}),i.toggleBtns())},i.onInputChange=function(e){i.setState({value:e.target.value})},i.onSubmit=function(){var e=i.props.changeType,t=i.state.value.trim();t!=i.props.value&&i.props.changeValue(e,t),i.toggleBtns()},i.state={isBtnsShown:!1,value:i.props.value},i}return(0,s.default)(t,e),(0,a.default)(t,[{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.setState({value:e.value})}},{key:"render",value:function(){var e=this.state,t=e.isBtnsShown,i=e.value,n=this.props.displayName,a=this.props.isCertificate?"textarea":"text";return(0,p.jsx)(o.Fragment,{children:(0,p.jsxs)(hn.A,{className:"my-4",children:[(0,p.jsx)(tt.A,{md:"3",children:(0,p.jsx)(Ge.A,{className:"web-setting-label",children:n})}),(0,p.jsxs)(tt.A,{md:"5",children:[(0,p.jsxs)(Ae.A,{children:[(0,p.jsx)(V.A,{type:a,value:i,onChange:this.onInputChange,onFocus:this.toggleBtns,onBlur:this.hideBtns}),this.props.domainVerified&&(0,p.jsx)(S.A,{color:"success",className:"border-0",children:(0,h.AP)("Verified")})]}),this.props.isCertificate&&(0,p.jsxs)("p",{className:"small text-secondary mt-1",children:[(0,h.AP)("Copy the IdP's certificate and paste it here. The certificate format is as follows:"),(0,p.jsx)("br",{}),"-----BEGIN CERTIFICATE-----",(0,p.jsx)("br",{}),"xxxxxxxxxxxxxxxxxxxx",(0,p.jsx)("br",{}),"-----END CERTIFICATE-----"]})]}),(0,p.jsx)(tt.A,{md:"4",children:t&&(0,p.jsxs)(o.Fragment,{children:[(0,p.jsx)(S.A,{color:"primary",className:"sf2-icon-tick web-setting-icon-btn web-setting-icon-btn-submit",onMouseDown:this.onSubmit,title:(0,h.AP)("Submit")}),(0,p.jsx)(S.A,{className:"ml-1 sf2-icon-x2 web-setting-icon-btn web-setting-icon-btn-cancel",title:(0,h.AP)("Cancel")})]})})]})})}}])}(o.Component),vn=function(e){function t(e){var i;return(0,n.default)(this,t),(i=(0,r.default)(this,t,[e])).updateSamlConfig=function(e,t){var n=null,a=null,r=null;"metadataUrl"===e&&(n=t),"domain"===e&&(a=t),"idpCertificate"===e&&(r=t),L.k.orgAdminUpdateSamlConfig(h.Id,n,a,r).then((function(e){i.setState({samlConfigID:e.data.saml_config.id,metadataUrl:e.data.saml_config.metadata_url,domain:e.data.saml_config.domain||"",dnsTxt:e.data.saml_config.dns_txt||"",domainVerified:e.data.saml_config.domain_verified||!1,idpCertificate:e.data.saml_config.idp_certificate||""}),U.A.success((0,h.AP)("SAML config updated"))})).catch((function(e){var t=E.Aq.getErrorMsg(e);U.A.danger(t)}))},i.verifyDomain=function(){var e=i.state.domain;L.k.orgAdminVerifyDomain(h.Id,e).then((function(e){i.setState({domainVerified:e.data.domain_verified}),U.A.success((0,h.AP)("Domain verified"))})).catch((function(e){var t=E.Aq.getErrorMsg(e);U.A.danger(t)}))},i.onCopyValue=function(e){gn()(e),U.A.success((0,h.AP)("Copied"))},i.state={loading:!0,errorMsg:"",samlConfigID:"",metadataUrl:"",domain:"",dnsTxt:"",domainVerified:!1,idpCertificate:""},i}return(0,s.default)(t,e),(0,a.default)(t,[{key:"componentDidMount",value:function(){var e=this;L.k.orgAdminGetSamlConfig(h.Id).then((function(t){e.setState({loading:!1,samlConfigID:t.data.saml_config.id,metadataUrl:t.data.saml_config.metadata_url||"",domain:t.data.saml_config.domain||"",dnsTxt:t.data.saml_config.dns_txt||"",domainVerified:t.data.saml_config.domain_verified||!1,idpCertificate:t.data.saml_config.idp_certificate||""})})).catch((function(t){e.setState({loading:!1,errorMsg:E.Aq.getErrorMsg(t,!0)})}))}},{key:"render",value:function(){var e=this.state,t=e.loading,i=e.errorMsg,n=e.metadataUrl,a=e.domain,r=e.dnsTxt,s=e.domainVerified,l=e.idpCertificate,c="".concat(h.xW,"/org/custom/").concat(h.Id,"/saml2/metadata/"),d="".concat(h.xW,"/org/custom/").concat(h.Id,"/saml2/acs/"),u="".concat(h.xW,"/org/custom/").concat(h.Id,"/saml2/ls/");return(0,p.jsxs)(o.Fragment,{children:[(0,p.jsx)(_,{}),(0,p.jsx)("div",{className:"main-panel-center flex-row",children:(0,p.jsxs)("div",{className:"cur-view-container",children:[(0,p.jsx)("div",{className:"cur-view-path",children:(0,p.jsx)("h3",{className:"sf-heading",children:(0,h.AP)("SAML config")})}),(0,p.jsxs)("div",{className:"cur-view-content container mw-100",children:[t&&(0,p.jsx)(F.A,{}),i&&(0,p.jsx)("p",{className:"error text-center mt-4",children:i}),!t&&!i&&(0,p.jsxs)(o.Fragment,{children:[(0,p.jsxs)(pn,{headingText:(0,h.AP)("Configure your Identity Provider"),children:[(0,p.jsx)("p",{className:"text-secondary mt-1",children:(0,h.AP)("Use these values to configure your Identity Provider")}),(0,p.jsxs)(o.Fragment,{children:[(0,p.jsxs)(hn.A,{className:"my-4",children:[(0,p.jsx)(tt.A,{md:"3",children:(0,p.jsx)(Ge.A,{className:"web-setting-label",children:"Identifier (Entity ID)"})}),(0,p.jsx)(tt.A,{md:"5",children:(0,p.jsxs)(Ae.A,{children:[(0,p.jsx)(V.A,{type:"text",readOnly:!0,value:c}),(0,p.jsx)(S.A,{color:"primary",onClick:this.onCopyValue.bind(this,c),className:"border-0",children:(0,h.AP)("Copy")})]})})]}),(0,p.jsxs)(hn.A,{className:"my-4",children:[(0,p.jsx)(tt.A,{md:"3",children:(0,p.jsx)(Ge.A,{className:"web-setting-label",children:"Reply URL (Assertion Consumer Service URL)"})}),(0,p.jsx)(tt.A,{md:"5",children:(0,p.jsxs)(Ae.A,{children:[(0,p.jsx)(V.A,{type:"text",readOnly:!0,value:d}),(0,p.jsx)(S.A,{color:"primary",onClick:this.onCopyValue.bind(this,d),className:"border-0",children:(0,h.AP)("Copy")})]})})]}),(0,p.jsxs)(hn.A,{className:"my-4",children:[(0,p.jsx)(tt.A,{md:"3",children:(0,p.jsx)(Ge.A,{className:"web-setting-label",children:"Sign on URL"})}),(0,p.jsx)(tt.A,{md:"5",children:(0,p.jsxs)(Ae.A,{children:[(0,p.jsx)(V.A,{type:"text",readOnly:!0,value:h.xW}),(0,p.jsx)(S.A,{color:"primary",onClick:this.onCopyValue.bind(this,h.xW),className:"border-0",children:(0,h.AP)("Copy")})]})})]}),(0,p.jsxs)(hn.A,{className:"my-4",children:[(0,p.jsx)(tt.A,{md:"3",children:(0,p.jsx)(Ge.A,{className:"web-setting-label",children:"Logout URL"})}),(0,p.jsx)(tt.A,{md:"5",children:(0,p.jsxs)(Ae.A,{children:[(0,p.jsx)(V.A,{type:"text",readOnly:!0,value:u}),(0,p.jsx)(S.A,{color:"primary",onClick:this.onCopyValue.bind(this,u),className:"border-0",children:(0,h.AP)("Copy")})]})})]})]})]}),(0,p.jsxs)(pn,{headingText:(0,h.AP)("Configure Seafile"),children:[(0,p.jsx)("p",{className:"text-secondary mt-1",children:(0,h.AP)("Use information from your Identity Provider to configure Seafile")}),(0,p.jsxs)(o.Fragment,{children:[(0,p.jsx)(mn,{value:n,changeType:"metadataUrl",changeValue:this.updateSamlConfig,displayName:"SAML App Federation Metadata URL"}),(0,p.jsx)(mn,{value:l,changeType:"idpCertificate",changeValue:this.updateSamlConfig,displayName:(0,h.AP)("Certificate"),isCertificate:!0})]})]}),(0,p.jsxs)(pn,{headingText:(0,h.AP)("Verify Domain"),children:[(0,p.jsx)("p",{className:"text-secondary mt-1",children:(0,h.AP)("Create a DNS TXT record to confirm the ownership of your Email Domain.")}),(0,p.jsxs)(o.Fragment,{children:[(0,p.jsx)(mn,{value:a,changeType:"domain",changeValue:this.updateSamlConfig,displayName:(0,h.AP)("Email Domain"),domainVerified:s}),(0,p.jsxs)(hn.A,{className:"my-4",children:[(0,p.jsx)(tt.A,{md:"3",children:(0,p.jsx)(Ge.A,{className:"web-setting-label",children:(0,h.AP)("DNS TXT Value")})}),(0,p.jsxs)(tt.A,{md:"5",children:[(0,p.jsxs)(Ae.A,{children:[(0,p.jsx)(V.A,{type:"text",readOnly:!0,value:r}),r&&!s&&(0,p.jsx)(S.A,{color:"primary",onClick:this.onCopyValue.bind(this,r),className:"border-0",children:(0,h.AP)("Copy")})]}),r&&!s&&(0,p.jsx)("p",{className:"small text-secondary mt-1",children:(0,h.AP)("Copy the domain DNS TXT and add it to your domain's DNS records, then click the button to verify domain ownership. You must verify the ownership of domain before Single Sign-On.")})]}),(0,p.jsx)(tt.A,{md:"4",children:a&&r&&!s&&(0,p.jsx)(S.A,{color:"secondary",onClick:this.verifyDomain,children:(0,h.AP)("Verify")})})]})]})]})]})]})]})})]})}}])}(o.Component),xn=i(7039),yn=function(e){function t(){return(0,n.default)(this,t),(0,r.default)(this,t,arguments)}return(0,s.default)(t,e),(0,a.default)(t,[{key:"render",value:function(){return(0,p.jsxs)(o.Fragment,{children:[(0,p.jsx)(_,{onCloseSidePanel:this.props.onCloseSidePanel}),(0,p.jsx)("div",{className:"main-panel-center flex-row",children:(0,p.jsxs)("div",{className:"cur-view-container",children:[(0,p.jsx)("div",{className:"cur-view-path",children:(0,p.jsx)("h2",{className:"sf-heading",children:"\u4ed8\u8d39\u7ba1\u7406"})}),(0,p.jsx)("div",{className:"pt-2 h-100 o-auto",children:(0,p.jsx)(xn.A,{isOrgContext:!0})})]})})]})}}])}(o.Component),bn=yn,An=(i(16322),i(18291),function(e){function t(e){var i;return(0,n.default)(this,t),(i=(0,r.default)(this,t,[e])).onCloseSidePanel=function(){i.setState({isSidePanelClosed:!i.state.isSidePanelClosed})},i.tabItemClick=function(e){i.setState({currentTab:e})},i.state={isSidePanelClosed:!1,currentTab:"users"},i}return(0,s.default)(t,e),(0,a.default)(t,[{key:"componentDidMount",value:function(){var e=window.location.href.split("/"),t=e[e.length-2];-1!=location.href.indexOf("".concat(h.Yc,"org/useradmin"))&&(t="users"),-1!=location.href.indexOf("".concat(h.Yc,"org/statistics-admin/"))&&(t="statistics-admin"),-1!=location.href.indexOf("".concat(h.Yc,"org/deviceadmin/"))&&(t="deviceadmin"),-1!=location.href.indexOf("".concat(h.Yc,"org/groupadmin"))&&(t="groupadmin"),-1!=location.href.indexOf("".concat(h.Yc,"org/departmentadmin"))&&(t="departmentadmin"),-1!=location.href.indexOf("".concat(h.Yc,"org/logadmin/"))&&"logadmin"===t&&(t="fileaudit"),this.setState({currentTab:t})}},{key:"render",value:function(){var e=this.state,t=e.isSidePanelClosed,i=e.currentTab;return(0,p.jsxs)("div",{id:"main",className:"org-admin",children:[(0,p.jsx)(v,{isSidePanelClosed:t,onCloseSidePanel:this.onCloseSidePanel,currentTab:i,tabItemClick:this.tabItemClick}),(0,p.jsx)("div",{className:"main-panel",children:(0,p.jsxs)(c.Ix,{className:"reach-router",children:[(0,p.jsx)(vi,{path:h.Yc+"org/info/"}),(0,p.jsx)(B,{path:h.Yc+"org/statistics-admin/file/"}),(0,p.jsx)(Y,{path:h.Yc+"org/statistics-admin/total-storage/"}),(0,p.jsx)(K,{path:h.Yc+"org/statistics-admin/active-users/"}),(0,p.jsx)(X,{path:h.Yc+"org/statistics-admin/traffic/"}),(0,p.jsx)($,{path:h.Yc+"org/statistics-admin/reports/"}),(0,p.jsx)(ce,{path:h.Yc+"org/deviceadmin/desktop-devices/"}),(0,p.jsx)(de,{path:h.Yc+"org/deviceadmin/mobile-devices/"}),(0,p.jsx)(pe,{path:h.Yc+"org/deviceadmin/devices-errors/"}),(0,p.jsx)(De,{path:h.Yc+"org/web-settings"}),(0,p.jsx)(bn,{path:h.Yc+"org/subscription",onCloseSidePanel:this.onCloseSidePanel}),(0,p.jsx)(et,{path:h.Yc+"org/useradmin"}),(0,p.jsx)(nt,{path:h.Yc+"org/useradmin/search-users"}),(0,p.jsx)(lt,{path:h.Yc+"org/useradmin/admins/"}),(0,p.jsx)(kt,{path:h.Yc+"org/useradmin/info/:email/"}),(0,p.jsx)(Mt,{path:h.Yc+"org/useradmin/info/:email/repos/"}),(0,p.jsx)(Lt,{path:h.Yc+"org/useradmin/info/:email/shared-repos/"}),(0,p.jsx)(Ut,{path:h.Yc+"org/groupadmin"}),(0,p.jsx)(Vt,{path:h.Yc+"org/groupadmin/search-groups"}),(0,p.jsx)(Xt,{path:h.Yc+"org/groupadmin/:groupID/"}),(0,p.jsx)(ei,{path:h.Yc+"org/groupadmin/:groupID/repos/"}),(0,p.jsx)(ri,{path:h.Yc+"org/groupadmin/:groupID/members/"}),(0,p.jsx)(hi,{path:h.Yc+"org/repoadmin"}),(0,p.jsx)(mi,{path:h.Yc+"org/repoadmin-trash"}),(0,p.jsx)(Ai,{path:h.Yc+"org/publinkadmin"}),(0,p.jsx)(zi,{path:h.Yc+"org/departmentadmin/"}),(0,p.jsxs)(Vi,{path:h.Yc+"org/logadmin",currentTab:i,tabItemClick:this.tabItemClick,children:[(0,p.jsx)(Gi,{path:"/"}),(0,p.jsx)(Zi,{path:"file-update"}),(0,p.jsx)(nn,{path:"perm-audit"}),(0,p.jsx)(on,{path:"repo-transfer"}),(0,p.jsx)(un,{path:"group-member-audit"})]}),h.bH&&(0,p.jsx)(vn,{path:h.Yc+"org/samlconfig/"})]})})]})}}])}(o.Component));(0,l.createRoot)(document.getElementById("wrapper")).render((0,p.jsx)(d.I18nextProvider,{value:u.A,children:(0,p.jsx)(c.dP,{history:c.W7,children:(0,p.jsx)(An,{})})}))},37696:function(){},2201:function(){},63864:function(){},35298:function(e,t,i){i.d(t,{PP:function(){return zr},t1:function(){return Ha},s$:function(){return yr},ZT:function(){return un},No:function(){return sr},kc:function(){return Vr},FN:function(){return lr},hE:function(){return Ar},m_:function(){return Rr}});var n=i(89379),a=i(39874),r=i(5182),s=i(85501),o=i(5544),l=i(24765),c=i(64467),d=i(60436),u=i(23029),h=i(92901);function f(e){return e+.5|0}var g=function(e,t,i){return Math.max(Math.min(e,i),t)};function p(e){return g(f(2.55*e),0,255)}function m(e){return g(f(255*e),0,255)}function v(e){return g(f(e/2.55)/100,0,1)}function x(e){return g(f(100*e),0,100)}var y={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},b=(0,d.default)("0123456789ABCDEF"),A=function(e){return b[15&e]},_=function(e){return b[(240&e)>>4]+b[15&e]},k=function(e){return(240&e)>>4===(15&e)};function j(e){var t=function(e){return k(e.r)&&k(e.g)&&k(e.b)&&k(e.a)}(e)?A:_;return e?"#"+t(e.r)+t(e.g)+t(e.b)+function(e,t){return e<255?t(e):""}(e.a,t):void 0}var w=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function S(e,t,i){var n=t*Math.min(i,1-i),a=function(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(t+e/30)%12;return i-n*Math.max(Math.min(a-3,9-a,1),-1)};return[a(0),a(8),a(4)]}function D(e,t,i){var n=function(n){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(n+e/60)%6;return i-i*t*Math.max(Math.min(a,4-a,1),0)};return[n(5),n(3),n(1)]}function P(e,t,i){var n,a=S(e,1,.5);for(t+i>1&&(t*=n=1/(t+i),i*=n),n=0;n<3;n++)a[n]*=1-t-i,a[n]+=t;return a}function M(e){var t,i,n,a=e.r/255,r=e.g/255,s=e.b/255,o=Math.max(a,r,s),l=Math.min(a,r,s),c=(o+l)/2;return o!==l&&(n=o-l,i=c>.5?n/(2-o-l):n/(o+l),t=function(e,t,i,n,a){return e===a?(t-i)/n+(t<i?6:0):t===a?(i-e)/n+2:(e-t)/n+4}(a,r,s,n,o),t=60*t+.5),[0|t,i||0,c]}function N(e,t,i,n){return(Array.isArray(t)?e(t[0],t[1],t[2]):e(t,i,n)).map(m)}function C(e,t,i){return N(S,e,t,i)}function I(e){return(e%360+360)%360}function O(e){var t,i=w.exec(e),n=255;if(i){i[5]!==t&&(n=i[6]?p(+i[5]):m(+i[5]));var a=I(+i[2]),r=+i[3]/100,s=+i[4]/100;return{r:(t="hwb"===i[1]?function(e,t,i){return N(P,e,t,i)}(a,r,s):"hsv"===i[1]?function(e,t,i){return N(D,e,t,i)}(a,r,s):C(a,r,s))[0],g:t[1],b:t[2],a:n}}}var L,T={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},R={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function E(e){L||((L=function(){var e,t,i,n,a,r={},s=Object.keys(R),o=Object.keys(T);for(e=0;e<s.length;e++){for(n=a=s[e],t=0;t<o.length;t++)i=o[t],a=a.replace(i,T[i]);i=parseInt(R[n],16),r[a]=[i>>16&255,i>>8&255,255&i]}return r}()).transparent=[0,0,0,0]);var t=L[e.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:4===t.length?t[3]:255}}var F=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;var z=function(e){return e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055},U=function(e){return e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)};function B(e,t,i){if(e){var n=M(e);n[t]=Math.max(0,Math.min(n[t]+n[t]*i,0===t?360:1)),n=C(n),e.r=n[0],e.g=n[1],e.b=n[2]}}function Y(e,t){return e?Object.assign(t||{},e):e}function V(e){var t={r:0,g:0,b:0,a:255};return Array.isArray(e)?e.length>=3&&(t={r:e[0],g:e[1],b:e[2],a:255},e.length>3&&(t.a=m(e[3]))):(t=Y(e,{r:0,g:0,b:0,a:1})).a=m(t.a),t}function q(e){return"r"===e.charAt(0)?function(e){var t,i,n,a=F.exec(e),r=255;if(a){if(a[7]!==t){var s=+a[7];r=a[8]?p(s):g(255*s,0,255)}return t=+a[1],i=+a[3],n=+a[5],{r:t=255&(a[2]?p(t):g(t,0,255)),g:i=255&(a[4]?p(i):g(i,0,255)),b:n=255&(a[6]?p(n):g(n,0,255)),a:r}}}(e):O(e)}var H=function(){function e(t){if((0,u.default)(this,e),t instanceof e)return t;var i,n=typeof t;"object"===n?i=V(t):"string"===n&&(i=function(e){var t,i=e.length;return"#"===e[0]&&(4===i||5===i?t={r:255&17*y[e[1]],g:255&17*y[e[2]],b:255&17*y[e[3]],a:5===i?17*y[e[4]]:255}:7!==i&&9!==i||(t={r:y[e[1]]<<4|y[e[2]],g:y[e[3]]<<4|y[e[4]],b:y[e[5]]<<4|y[e[6]],a:9===i?y[e[7]]<<4|y[e[8]]:255})),t}(t)||E(t)||q(t)),this._rgb=i,this._valid=!!i}return(0,h.default)(e,[{key:"valid",get:function(){return this._valid}},{key:"rgb",get:function(){var e=Y(this._rgb);return e&&(e.a=v(e.a)),e},set:function(e){this._rgb=V(e)}},{key:"rgbString",value:function(){return this._valid?(e=this._rgb)&&(e.a<255?"rgba(".concat(e.r,", ").concat(e.g,", ").concat(e.b,", ").concat(v(e.a),")"):"rgb(".concat(e.r,", ").concat(e.g,", ").concat(e.b,")")):void 0;var e}},{key:"hexString",value:function(){return this._valid?j(this._rgb):void 0}},{key:"hslString",value:function(){return this._valid?function(e){if(e){var t=M(e),i=t[0],n=x(t[1]),a=x(t[2]);return e.a<255?"hsla(".concat(i,", ").concat(n,"%, ").concat(a,"%, ").concat(v(e.a),")"):"hsl(".concat(i,", ").concat(n,"%, ").concat(a,"%)")}}(this._rgb):void 0}},{key:"mix",value:function(e,t){if(e){var i,n=this.rgb,a=e.rgb,r=t===i?.5:t,s=2*r-1,o=n.a-a.a,l=((s*o===-1?s:(s+o)/(1+s*o))+1)/2;i=1-l,n.r=255&l*n.r+i*a.r+.5,n.g=255&l*n.g+i*a.g+.5,n.b=255&l*n.b+i*a.b+.5,n.a=r*n.a+(1-r)*a.a,this.rgb=n}return this}},{key:"interpolate",value:function(e,t){return e&&(this._rgb=function(e,t,i){var n=U(v(e.r)),a=U(v(e.g)),r=U(v(e.b));return{r:m(z(n+i*(U(v(t.r))-n))),g:m(z(a+i*(U(v(t.g))-a))),b:m(z(r+i*(U(v(t.b))-r))),a:e.a+i*(t.a-e.a)}}(this._rgb,e._rgb,t)),this}},{key:"clone",value:function(){return new e(this.rgb)}},{key:"alpha",value:function(e){return this._rgb.a=m(e),this}},{key:"clearer",value:function(e){return this._rgb.a*=1-e,this}},{key:"greyscale",value:function(){var e=this._rgb,t=f(.3*e.r+.59*e.g+.11*e.b);return e.r=e.g=e.b=t,this}},{key:"opaquer",value:function(e){return this._rgb.a*=1+e,this}},{key:"negate",value:function(){var e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}},{key:"lighten",value:function(e){return B(this._rgb,2,e),this}},{key:"darken",value:function(e){return B(this._rgb,2,-e),this}},{key:"saturate",value:function(e){return B(this._rgb,1,e),this}},{key:"desaturate",value:function(e){return B(this._rgb,1,-e),this}},{key:"rotate",value:function(e){return function(e,t){var i=M(e);i[0]=I(i[0]+t),i=C(i),e.r=i[0],e.g=i[1],e.b=i[2]}(this._rgb,e),this}}])}();function W(){}var G=function(){var e=0;return function(){return e++}}();function Q(e){return null===e||void 0===e}function X(e){if(Array.isArray&&Array.isArray(e))return!0;var t=Object.prototype.toString.call(e);return"[object"===t.slice(0,7)&&"Array]"===t.slice(-6)}function K(e){return null!==e&&"[object Object]"===Object.prototype.toString.call(e)}function $(e){return("number"===typeof e||e instanceof Number)&&isFinite(+e)}function Z(e,t){return $(e)?e:t}function J(e,t){return"undefined"===typeof e?t:e}var ee=function(e,t){return"string"===typeof e&&e.endsWith("%")?parseFloat(e)/100*t:+e};function te(e,t,i){if(e&&"function"===typeof e.call)return e.apply(i,t)}function ie(e,t,i,n){var a,r,s;if(X(e))if(r=e.length,n)for(a=r-1;a>=0;a--)t.call(i,e[a],a);else for(a=0;a<r;a++)t.call(i,e[a],a);else if(K(e))for(r=(s=Object.keys(e)).length,a=0;a<r;a++)t.call(i,e[s[a]],s[a])}function ne(e,t){var i,n,a,r;if(!e||!t||e.length!==t.length)return!1;for(i=0,n=e.length;i<n;++i)if(a=e[i],r=t[i],a.datasetIndex!==r.datasetIndex||a.index!==r.index)return!1;return!0}function ae(e){if(X(e))return e.map(ae);if(K(e)){for(var t=Object.create(null),i=Object.keys(e),n=i.length,a=0;a<n;++a)t[i[a]]=ae(e[i[a]]);return t}return e}function re(e){return-1===["__proto__","prototype","constructor"].indexOf(e)}function se(e,t,i,n){if(re(e)){var a=t[e],r=i[e];K(a)&&K(r)?oe(a,r,n):t[e]=ae(r)}}function oe(e,t,i){var n=X(t)?t:[t],a=n.length;if(!K(e))return e;for(var r,s=(i=i||{}).merger||se,o=0;o<a;++o)if(K(r=n[o]))for(var l=Object.keys(r),c=0,d=l.length;c<d;++c)s(l[c],e,r,i);return e}function le(e,t){return oe(e,t,{merger:ce})}function ce(e,t,i){if(re(e)){var n=t[e],a=i[e];K(n)&&K(a)?le(n,a):Object.prototype.hasOwnProperty.call(t,e)||(t[e]=ae(a))}}var de={"":function(e){return e},x:function(e){return e.x},y:function(e){return e.y}};function ue(e){var t=function(e){var t,i=e.split("."),n=[],a="",r=(0,l.default)(i);try{for(r.s();!(t=r.n()).done;)(a+=t.value).endsWith("\\")?a=a.slice(0,-1)+".":(n.push(a),a="")}catch(s){r.e(s)}finally{r.f()}return n}(e);return function(e){var i,n=(0,l.default)(t);try{for(n.s();!(i=n.n()).done;){var a=i.value;if(""===a)break;e=e&&e[a]}}catch(r){n.e(r)}finally{n.f()}return e}}function he(e,t){return(de[t]||(de[t]=ue(t)))(e)}function fe(e){return e.charAt(0).toUpperCase()+e.slice(1)}var ge=function(e){return"undefined"!==typeof e},pe=function(e){return"function"===typeof e},me=function(e,t){if(e.size!==t.size)return!1;var i,n=(0,l.default)(e);try{for(n.s();!(i=n.n()).done;){var a=i.value;if(!t.has(a))return!1}}catch(r){n.e(r)}finally{n.f()}return!0};var ve=Math.PI,xe=2*ve,ye=xe+ve,be=Number.POSITIVE_INFINITY,Ae=ve/180,_e=ve/2,ke=ve/4,je=2*ve/3,we=Math.log10,Se=Math.sign;function De(e,t,i){return Math.abs(e-t)<i}function Pe(e){var t=Math.round(e);e=De(e,t,e/1e3)?t:e;var i=Math.pow(10,Math.floor(we(e))),n=e/i;return(n<=1?1:n<=2?2:n<=5?5:10)*i}function Me(e){return!isNaN(parseFloat(e))&&isFinite(e)}function Ne(e,t,i){var n,a,r;for(n=0,a=e.length;n<a;n++)r=e[n][i],isNaN(r)||(t.min=Math.min(t.min,r),t.max=Math.max(t.max,r))}function Ce(e){return e*(ve/180)}function Ie(e){return e*(180/ve)}function Oe(e){if($(e)){for(var t=1,i=0;Math.round(e*t)/t!==e;)t*=10,i++;return i}}function Le(e,t){var i=t.x-e.x,n=t.y-e.y,a=Math.sqrt(i*i+n*n),r=Math.atan2(n,i);return r<-.5*ve&&(r+=xe),{angle:r,distance:a}}function Te(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function Re(e,t){return(e-t+ye)%xe-ve}function Ee(e){return(e%xe+xe)%xe}function Fe(e,t,i,n){var a=Ee(e),r=Ee(t),s=Ee(i),o=Ee(r-a),l=Ee(s-a),c=Ee(a-r),d=Ee(a-s);return a===r||a===s||n&&r===s||o>l&&c<d}function ze(e,t,i){return Math.max(t,Math.min(i,e))}function Ue(e,t,i){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1e-6;return e>=Math.min(t,i)-n&&e<=Math.max(t,i)+n}function Be(e,t,i){i=i||function(i){return e[i]<t};for(var n,a=e.length-1,r=0;a-r>1;)i(n=r+a>>1)?r=n:a=n;return{lo:r,hi:a}}var Ye=function(e,t,i,n){return Be(e,i,n?function(n){var a=e[n][t];return a<i||a===i&&e[n+1][t]===i}:function(n){return e[n][t]<i})},Ve=function(e,t,i){return Be(e,i,(function(n){return e[n][t]>=i}))};var qe=["push","pop","shift","splice","unshift"];function He(e,t){var i=e._chartjs;if(i){var n=i.listeners,a=n.indexOf(t);-1!==a&&n.splice(a,1),n.length>0||(qe.forEach((function(t){delete e[t]})),delete e._chartjs)}}function We(e){var t=new Set(e);return t.size===e.length?e:Array.from(t)}var Ge="undefined"===typeof window?function(e){return e()}:window.requestAnimationFrame;function Qe(e,t){var i=[],n=!1;return function(){for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];i=r,n||(n=!0,Ge.call(window,(function(){n=!1,e.apply(t,i)})))}}var Xe=function(e){return"start"===e?"left":"end"===e?"right":"center"},Ke=function(e,t,i){return"start"===e?t:"end"===e?i:(t+i)/2};function $e(e,t,i){var n=t.length,a=0,r=n;if(e._sorted){var s=e.iScale,o=e._parsed,l=s.axis,c=s.getUserBounds(),d=c.min,u=c.max,h=c.minDefined,f=c.maxDefined;h&&(a=ze(Math.min(Ye(o,l,d).lo,i?n:Ye(t,l,s.getPixelForValue(d)).lo),0,n-1)),r=f?ze(Math.max(Ye(o,s.axis,u,!0).hi+1,i?0:Ye(t,l,s.getPixelForValue(u),!0).hi+1),a,n)-a:n-a}return{start:a,count:r}}function Ze(e){var t=e.xScale,i=e.yScale,n=e._scaleRanges,a={xmin:t.min,xmax:t.max,ymin:i.min,ymax:i.max};if(!n)return e._scaleRanges=a,!0;var r=n.xmin!==t.min||n.xmax!==t.max||n.ymin!==i.min||n.ymax!==i.max;return Object.assign(n,a),r}var Je=function(e){return 0===e||1===e},et=function(e,t,i){return-Math.pow(2,10*(e-=1))*Math.sin((e-t)*xe/i)},tt=function(e,t,i){return Math.pow(2,-10*e)*Math.sin((e-t)*xe/i)+1},it={linear:function(e){return e},easeInQuad:function(e){return e*e},easeOutQuad:function(e){return-e*(e-2)},easeInOutQuad:function(e){return(e/=.5)<1?.5*e*e:-.5*(--e*(e-2)-1)},easeInCubic:function(e){return e*e*e},easeOutCubic:function(e){return(e-=1)*e*e+1},easeInOutCubic:function(e){return(e/=.5)<1?.5*e*e*e:.5*((e-=2)*e*e+2)},easeInQuart:function(e){return e*e*e*e},easeOutQuart:function(e){return-((e-=1)*e*e*e-1)},easeInOutQuart:function(e){return(e/=.5)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2)},easeInQuint:function(e){return e*e*e*e*e},easeOutQuint:function(e){return(e-=1)*e*e*e*e+1},easeInOutQuint:function(e){return(e/=.5)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2)},easeInSine:function(e){return 1-Math.cos(e*_e)},easeOutSine:function(e){return Math.sin(e*_e)},easeInOutSine:function(e){return-.5*(Math.cos(ve*e)-1)},easeInExpo:function(e){return 0===e?0:Math.pow(2,10*(e-1))},easeOutExpo:function(e){return 1===e?1:1-Math.pow(2,-10*e)},easeInOutExpo:function(e){return Je(e)?e:e<.5?.5*Math.pow(2,10*(2*e-1)):.5*(2-Math.pow(2,-10*(2*e-1)))},easeInCirc:function(e){return e>=1?e:-(Math.sqrt(1-e*e)-1)},easeOutCirc:function(e){return Math.sqrt(1-(e-=1)*e)},easeInOutCirc:function(e){return(e/=.5)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)},easeInElastic:function(e){return Je(e)?e:et(e,.075,.3)},easeOutElastic:function(e){return Je(e)?e:tt(e,.075,.3)},easeInOutElastic:function(e){var t=.1125;return Je(e)?e:e<.5?.5*et(2*e,t,.45):.5+.5*tt(2*e-1,t,.45)},easeInBack:function(e){var t=1.70158;return e*e*((t+1)*e-t)},easeOutBack:function(e){var t=1.70158;return(e-=1)*e*((t+1)*e+t)+1},easeInOutBack:function(e){var t=1.70158;return(e/=.5)<1?e*e*((1+(t*=1.525))*e-t)*.5:.5*((e-=2)*e*((1+(t*=1.525))*e+t)+2)},easeInBounce:function(e){return 1-it.easeOutBounce(1-e)},easeOutBounce:function(e){var t=7.5625,i=2.75;return e<1/i?t*e*e:e<2/i?t*(e-=1.5/i)*e+.75:e<2.5/i?t*(e-=2.25/i)*e+.9375:t*(e-=2.625/i)*e+.984375},easeInOutBounce:function(e){return e<.5?.5*it.easeInBounce(2*e):.5*it.easeOutBounce(2*e-1)+.5}};function nt(e){if(e&&"object"===typeof e){var t=e.toString();return"[object CanvasPattern]"===t||"[object CanvasGradient]"===t}return!1}function at(e){return nt(e)?e:new H(e)}function rt(e){return nt(e)?e:new H(e).saturate(.5).darken(.1).hexString()}var st=["x","y","borderWidth","radius","tension"],ot=["color","borderColor","backgroundColor"];var lt=new Map;function ct(e,t,i){return function(e,t){t=t||{};var i=e+JSON.stringify(t),n=lt.get(i);return n||(n=new Intl.NumberFormat(e,t),lt.set(i,n)),n}(t,i).format(e)}var dt={values:function(e){return X(e)?e:""+e},numeric:function(e,t,i){if(0===e)return"0";var n,a=this.chart.options.locale,r=e;if(i.length>1){var s=Math.max(Math.abs(i[0].value),Math.abs(i[i.length-1].value));(s<1e-4||s>1e15)&&(n="scientific"),r=function(e,t){var i=t.length>3?t[2].value-t[1].value:t[1].value-t[0].value;Math.abs(i)>=1&&e!==Math.floor(e)&&(i=e-Math.floor(e));return i}(e,i)}var o=we(Math.abs(r)),l=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),c={notation:n,minimumFractionDigits:l,maximumFractionDigits:l};return Object.assign(c,this.options.ticks.format),ct(e,a,c)},logarithmic:function(e,t,i){if(0===e)return"0";var n=i[t].significand||e/Math.pow(10,Math.floor(we(e)));return[1,2,3,5,10,15].includes(n)||t>.8*i.length?dt.numeric.call(this,e,t,i):""}};var ut={formatters:dt};var ht=Object.create(null),ft=Object.create(null);function gt(e,t){if(!t)return e;for(var i=t.split("."),n=0,a=i.length;n<a;++n){var r=i[n];e=e[r]||(e[r]=Object.create(null))}return e}function pt(e,t,i){return"string"===typeof t?oe(gt(e,t),i):oe(gt(e,""),t)}var mt=function(){return(0,h.default)((function e(t,i){(0,u.default)(this,e),this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=function(e){return e.chart.platform.getDevicePixelRatio()},this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=function(e,t){return rt(t.backgroundColor)},this.hoverBorderColor=function(e,t){return rt(t.borderColor)},this.hoverColor=function(e,t){return rt(t.color)},this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(t),this.apply(i)}),[{key:"set",value:function(e,t){return pt(this,e,t)}},{key:"get",value:function(e){return gt(this,e)}},{key:"describe",value:function(e,t){return pt(ft,e,t)}},{key:"override",value:function(e,t){return pt(ht,e,t)}},{key:"route",value:function(e,t,i,n){var a=gt(this,e),r=gt(this,i),s="_"+t;Object.defineProperties(a,(0,c.default)((0,c.default)({},s,{value:a[t],writable:!0}),t,{enumerable:!0,get:function(){var e=this[s],t=r[n];return K(e)?Object.assign({},t,e):J(e,t)},set:function(e){this[s]=e}}))}},{key:"apply",value:function(e){var t=this;e.forEach((function(e){return e(t)}))}}])}(),vt=new mt({_scriptable:function(e){return!e.startsWith("on")},_indexable:function(e){return"events"!==e},hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[function(e){e.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),e.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:function(e){return"onProgress"!==e&&"onComplete"!==e&&"fn"!==e}}),e.set("animations",{colors:{type:"color",properties:ot},numbers:{type:"number",properties:st}}),e.describe("animations",{_fallback:"animation"}),e.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:function(e){return 0|e}}}}})},function(e){e.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})},function(e){e.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:function(e,t){return t.lineWidth},tickColor:function(e,t){return t.color},offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:ut.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),e.route("scale.ticks","color","","color"),e.route("scale.grid","color","","borderColor"),e.route("scale.border","color","","borderColor"),e.route("scale.title","color","","color"),e.describe("scale",{_fallback:!1,_scriptable:function(e){return!e.startsWith("before")&&!e.startsWith("after")&&"callback"!==e&&"parser"!==e},_indexable:function(e){return"borderDash"!==e&&"tickBorderDash"!==e&&"dash"!==e}}),e.describe("scales",{_fallback:"scale"}),e.describe("scale.ticks",{_scriptable:function(e){return"backdropPadding"!==e&&"callback"!==e},_indexable:function(e){return"backdropPadding"!==e}})}]);function xt(e,t,i,n,a){var r=t[a];return r||(r=t[a]=e.measureText(a).width,i.push(a)),r>n&&(n=r),n}function yt(e,t,i,n){var a=(n=n||{}).data=n.data||{},r=n.garbageCollect=n.garbageCollect||[];n.font!==t&&(a=n.data={},r=n.garbageCollect=[],n.font=t),e.save(),e.font=t;var s,o,l,c,d,u=0,h=i.length;for(s=0;s<h;s++)if(void 0===(c=i[s])||null===c||X(c)){if(X(c))for(o=0,l=c.length;o<l;o++)void 0===(d=c[o])||null===d||X(d)||(u=xt(e,a,r,u,d))}else u=xt(e,a,r,u,c);e.restore();var f=r.length/2;if(f>i.length){for(s=0;s<f;s++)delete a[r[s]];r.splice(0,f)}return u}function bt(e,t,i){var n=e.currentDevicePixelRatio,a=0!==i?Math.max(i/2,.5):0;return Math.round((t-a)*n)/n+a}function At(e,t){(t||e)&&((t=t||e.getContext("2d")).save(),t.resetTransform(),t.clearRect(0,0,e.width,e.height),t.restore())}function _t(e,t,i,n){kt(e,t,i,n,null)}function kt(e,t,i,n,a){var r,s,o,l,c,d,u,h,f=t.pointStyle,g=t.rotation,p=t.radius,m=(g||0)*Ae;if(f&&"object"===typeof f&&("[object HTMLImageElement]"===(r=f.toString())||"[object HTMLCanvasElement]"===r))return e.save(),e.translate(i,n),e.rotate(m),e.drawImage(f,-f.width/2,-f.height/2,f.width,f.height),void e.restore();if(!(isNaN(p)||p<=0)){switch(e.beginPath(),f){default:a?e.ellipse(i,n,a/2,p,0,0,xe):e.arc(i,n,p,0,xe),e.closePath();break;case"triangle":d=a?a/2:p,e.moveTo(i+Math.sin(m)*d,n-Math.cos(m)*p),m+=je,e.lineTo(i+Math.sin(m)*d,n-Math.cos(m)*p),m+=je,e.lineTo(i+Math.sin(m)*d,n-Math.cos(m)*p),e.closePath();break;case"rectRounded":l=p-(c=.516*p),s=Math.cos(m+ke)*l,u=Math.cos(m+ke)*(a?a/2-c:l),o=Math.sin(m+ke)*l,h=Math.sin(m+ke)*(a?a/2-c:l),e.arc(i-u,n-o,c,m-ve,m-_e),e.arc(i+h,n-s,c,m-_e,m),e.arc(i+u,n+o,c,m,m+_e),e.arc(i-h,n+s,c,m+_e,m+ve),e.closePath();break;case"rect":if(!g){l=Math.SQRT1_2*p,d=a?a/2:l,e.rect(i-d,n-l,2*d,2*l);break}m+=ke;case"rectRot":u=Math.cos(m)*(a?a/2:p),s=Math.cos(m)*p,o=Math.sin(m)*p,h=Math.sin(m)*(a?a/2:p),e.moveTo(i-u,n-o),e.lineTo(i+h,n-s),e.lineTo(i+u,n+o),e.lineTo(i-h,n+s),e.closePath();break;case"crossRot":m+=ke;case"cross":u=Math.cos(m)*(a?a/2:p),s=Math.cos(m)*p,o=Math.sin(m)*p,h=Math.sin(m)*(a?a/2:p),e.moveTo(i-u,n-o),e.lineTo(i+u,n+o),e.moveTo(i+h,n-s),e.lineTo(i-h,n+s);break;case"star":u=Math.cos(m)*(a?a/2:p),s=Math.cos(m)*p,o=Math.sin(m)*p,h=Math.sin(m)*(a?a/2:p),e.moveTo(i-u,n-o),e.lineTo(i+u,n+o),e.moveTo(i+h,n-s),e.lineTo(i-h,n+s),m+=ke,u=Math.cos(m)*(a?a/2:p),s=Math.cos(m)*p,o=Math.sin(m)*p,h=Math.sin(m)*(a?a/2:p),e.moveTo(i-u,n-o),e.lineTo(i+u,n+o),e.moveTo(i+h,n-s),e.lineTo(i-h,n+s);break;case"line":s=a?a/2:Math.cos(m)*p,o=Math.sin(m)*p,e.moveTo(i-s,n-o),e.lineTo(i+s,n+o);break;case"dash":e.moveTo(i,n),e.lineTo(i+Math.cos(m)*(a?a/2:p),n+Math.sin(m)*p);break;case!1:e.closePath()}e.fill(),t.borderWidth>0&&e.stroke()}}function jt(e,t,i){return i=i||.5,!t||e&&e.x>t.left-i&&e.x<t.right+i&&e.y>t.top-i&&e.y<t.bottom+i}function wt(e,t){e.save(),e.beginPath(),e.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),e.clip()}function St(e){e.restore()}function Dt(e,t,i,n,a){if(!t)return e.lineTo(i.x,i.y);if("middle"===a){var r=(t.x+i.x)/2;e.lineTo(r,t.y),e.lineTo(r,i.y)}else"after"===a!==!!n?e.lineTo(t.x,i.y):e.lineTo(i.x,t.y);e.lineTo(i.x,i.y)}function Pt(e,t,i,n){if(!t)return e.lineTo(i.x,i.y);e.bezierCurveTo(n?t.cp1x:t.cp2x,n?t.cp1y:t.cp2y,n?i.cp2x:i.cp1x,n?i.cp2y:i.cp1y,i.x,i.y)}function Mt(e,t,i,n,a){if(a.strikethrough||a.underline){var r=e.measureText(n),s=t-r.actualBoundingBoxLeft,o=t+r.actualBoundingBoxRight,l=i-r.actualBoundingBoxAscent,c=i+r.actualBoundingBoxDescent,d=a.strikethrough?(l+c)/2:c;e.strokeStyle=e.fillStyle,e.beginPath(),e.lineWidth=a.decorationWidth||2,e.moveTo(s,d),e.lineTo(o,d),e.stroke()}}function Nt(e,t){var i=e.fillStyle;e.fillStyle=t.color,e.fillRect(t.left,t.top,t.width,t.height),e.fillStyle=i}function Ct(e,t,i,n,a){var r,s,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},l=X(t)?t:[t],c=o.strokeWidth>0&&""!==o.strokeColor;for(e.save(),e.font=a.string,function(e,t){t.translation&&e.translate(t.translation[0],t.translation[1]),Q(t.rotation)||e.rotate(t.rotation),t.color&&(e.fillStyle=t.color),t.textAlign&&(e.textAlign=t.textAlign),t.textBaseline&&(e.textBaseline=t.textBaseline)}(e,o),r=0;r<l.length;++r)s=l[r],o.backdrop&&Nt(e,o.backdrop),c&&(o.strokeColor&&(e.strokeStyle=o.strokeColor),Q(o.strokeWidth)||(e.lineWidth=o.strokeWidth),e.strokeText(s,i,n,o.maxWidth)),e.fillText(s,i,n,o.maxWidth),Mt(e,i,n,s,o),n+=Number(a.lineHeight);e.restore()}function It(e,t){var i=t.x,n=t.y,a=t.w,r=t.h,s=t.radius;e.arc(i+s.topLeft,n+s.topLeft,s.topLeft,1.5*ve,ve,!0),e.lineTo(i,n+r-s.bottomLeft),e.arc(i+s.bottomLeft,n+r-s.bottomLeft,s.bottomLeft,ve,_e,!0),e.lineTo(i+a-s.bottomRight,n+r),e.arc(i+a-s.bottomRight,n+r-s.bottomRight,s.bottomRight,_e,0,!0),e.lineTo(i+a,n+s.topRight),e.arc(i+a-s.topRight,n+s.topRight,s.topRight,0,-_e,!0),e.lineTo(i+s.topLeft,n)}var Ot=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,Lt=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function Tt(e,t){var i=(""+e).match(Ot);if(!i||"normal"===i[1])return 1.2*t;switch(e=+i[2],i[3]){case"px":return e;case"%":e/=100}return t*e}function Rt(e,t){var i,n={},a=K(t),r=a?Object.keys(t):t,s=K(e)?a?function(i){return J(e[i],e[t[i]])}:function(t){return e[t]}:function(){return e},o=(0,l.default)(r);try{for(o.s();!(i=o.n()).done;){var c=i.value;n[c]=+s(c)||0}}catch(d){o.e(d)}finally{o.f()}return n}function Et(e){return Rt(e,{top:"y",right:"x",bottom:"y",left:"x"})}function Ft(e){return Rt(e,["topLeft","topRight","bottomLeft","bottomRight"])}function zt(e){var t=Et(e);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function Ut(e,t){e=e||{},t=t||vt.font;var i=J(e.size,t.size);"string"===typeof i&&(i=parseInt(i,10));var n=J(e.style,t.style);n&&!(""+n).match(Lt)&&(console.warn('Invalid font style specified: "'+n+'"'),n=void 0);var a={family:J(e.family,t.family),lineHeight:Tt(J(e.lineHeight,t.lineHeight),i),size:i,style:n,weight:J(e.weight,t.weight),string:""};return a.string=function(e){return!e||Q(e.size)||Q(e.family)?null:(e.style?e.style+" ":"")+(e.weight?e.weight+" ":"")+e.size+"px "+e.family}(a),a}function Bt(e,t,i,n){var a,r,s,o=!0;for(a=0,r=e.length;a<r;++a)if(void 0!==(s=e[a])&&(void 0!==t&&"function"===typeof s&&(s=s(t),o=!1),void 0!==i&&X(s)&&(s=s[i%s.length],o=!1),void 0!==s))return n&&!o&&(n.cacheable=!1),s}function Yt(e,t){return Object.assign(Object.create(e),t)}function Vt(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[""],i=arguments.length>3?arguments[3]:void 0,n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:function(){return e[0]},a=(arguments.length>2?arguments[2]:void 0)||e;"undefined"===typeof i&&(i=ei("_fallback",e));var r=(0,c.default)((0,c.default)((0,c.default)((0,c.default)((0,c.default)((0,c.default)((0,c.default)({},Symbol.toStringTag,"Object"),"_cacheable",!0),"_scopes",e),"_rootScopes",a),"_fallback",i),"_getTarget",n),"override",(function(n){return Vt([n].concat((0,d.default)(e)),t,a,i)}));return new Proxy(r,{deleteProperty:function(t,i){return delete t[i],delete t._keys,delete e[0][i],!0},get:function(i,n){return Qt(i,n,(function(){return function(e,t,i,n){var a,r,s=(0,l.default)(t);try{for(s.s();!(r=s.n()).done;){var o=r.value;if("undefined"!==typeof(a=ei(Wt(o,e),i)))return Gt(e,a)?Zt(i,n,e,a):a}}catch(c){s.e(c)}finally{s.f()}}(n,t,e,i)}))},getOwnPropertyDescriptor:function(e,t){return Reflect.getOwnPropertyDescriptor(e._scopes[0],t)},getPrototypeOf:function(){return Reflect.getPrototypeOf(e[0])},has:function(e,t){return ti(e).includes(t)},ownKeys:function(e){return ti(e)},set:function(e,t,i){var a=e._storage||(e._storage=n());return e[t]=a[t]=i,delete e._keys,!0}})}function qt(e,t,i,n){var a={_cacheable:!1,_proxy:e,_context:t,_subProxy:i,_stack:new Set,_descriptors:Ht(e,n),setContext:function(t){return qt(e,t,i,n)},override:function(a){return qt(e.override(a),t,i,n)}};return new Proxy(a,{deleteProperty:function(t,i){return delete t[i],delete e[i],!0},get:function(e,t,i){return Qt(e,t,(function(){return function(e,t,i){var n=e._proxy,a=e._context,r=e._subProxy,s=e._descriptors,o=n[t];pe(o)&&s.isScriptable(t)&&(o=function(e,t,i,n){var a=i._proxy,r=i._context,s=i._subProxy,o=i._stack;if(o.has(e))throw new Error("Recursion detected: "+Array.from(o).join("->")+"->"+e);o.add(e);var l=t(r,s||n);o.delete(e),Gt(e,l)&&(l=Zt(a._scopes,a,e,l));return l}(t,o,e,i));X(o)&&o.length&&(o=function(e,t,i,n){var a=i._proxy,r=i._context,s=i._subProxy,o=i._descriptors;if("undefined"!==typeof r.index&&n(e))return t[r.index%t.length];if(K(t[0])){var c=t,d=a._scopes.filter((function(e){return e!==c}));t=[];var u,h=(0,l.default)(c);try{for(h.s();!(u=h.n()).done;){var f=Zt(d,a,e,u.value);t.push(qt(f,r,s&&s[e],o))}}catch(g){h.e(g)}finally{h.f()}}return t}(t,o,e,s.isIndexable));Gt(t,o)&&(o=qt(o,a,r&&r[t],s));return o}(e,t,i)}))},getOwnPropertyDescriptor:function(t,i){return t._descriptors.allKeys?Reflect.has(e,i)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(e,i)},getPrototypeOf:function(){return Reflect.getPrototypeOf(e)},has:function(t,i){return Reflect.has(e,i)},ownKeys:function(){return Reflect.ownKeys(e)},set:function(t,i,n){return e[i]=n,delete t[i],!0}})}function Ht(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{scriptable:!0,indexable:!0},i=e._scriptable,n=void 0===i?t.scriptable:i,a=e._indexable,r=void 0===a?t.indexable:a,s=e._allKeys;return{allKeys:void 0===s?t.allKeys:s,scriptable:n,indexable:r,isScriptable:pe(n)?n:function(){return n},isIndexable:pe(r)?r:function(){return r}}}var Wt=function(e,t){return e?e+fe(t):t},Gt=function(e,t){return K(t)&&"adapters"!==e&&(null===Object.getPrototypeOf(t)||t.constructor===Object)};function Qt(e,t,i){if(Object.prototype.hasOwnProperty.call(e,t)||"constructor"===t)return e[t];var n=i();return e[t]=n,n}function Xt(e,t,i){return pe(e)?e(t,i):e}var Kt=function(e,t){return!0===e?t:"string"===typeof e?he(t,e):void 0};function $t(e,t,i,n,a){var r,s=(0,l.default)(t);try{for(s.s();!(r=s.n()).done;){var o=r.value,c=Kt(i,o);if(c){e.add(c);var d=Xt(c._fallback,i,a);if("undefined"!==typeof d&&d!==i&&d!==n)return d}else if(!1===c&&"undefined"!==typeof n&&i!==n)return null}}catch(u){s.e(u)}finally{s.f()}return!1}function Zt(e,t,i,n){var a=t._rootScopes,r=Xt(t._fallback,i,n),s=[].concat((0,d.default)(e),(0,d.default)(a)),o=new Set;o.add(n);var l=Jt(o,s,i,r||i,n);return null!==l&&(("undefined"===typeof r||r===i||null!==(l=Jt(o,s,r,l,n)))&&Vt(Array.from(o),[""],a,r,(function(){return function(e,t,i){var n=e._getTarget();t in n||(n[t]={});var a=n[t];if(X(a)&&K(i))return i;return a||{}}(t,i,n)})))}function Jt(e,t,i,n,a){for(;i;)i=$t(e,t,i,n,a);return i}function ei(e,t){var i,n=(0,l.default)(t);try{for(n.s();!(i=n.n()).done;){var a=i.value;if(a){var r=a[e];if("undefined"!==typeof r)return r}}}catch(s){n.e(s)}finally{n.f()}}function ti(e){var t=e._keys;return t||(t=e._keys=function(e){var t,i=new Set,n=(0,l.default)(e);try{for(n.s();!(t=n.n()).done;){var a,r=t.value,s=(0,l.default)(Object.keys(r).filter((function(e){return!e.startsWith("_")})));try{for(s.s();!(a=s.n()).done;){var o=a.value;i.add(o)}}catch(c){s.e(c)}finally{s.f()}}}catch(c){n.e(c)}finally{n.f()}return Array.from(i)}(e._scopes)),t}function ii(e,t,i,n){var a,r,s,o,l=e.iScale,c=this._parsing.key,d=void 0===c?"r":c,u=new Array(n);for(a=0,r=n;a<r;++a)o=t[s=a+i],u[a]={r:l.parse(he(o,d),s)};return u}var ni=Number.EPSILON||1e-14,ai=function(e,t){return t<e.length&&!e[t].skip&&e[t]},ri=function(e){return"x"===e?"y":"x"};function si(e,t,i,n){var a=e.skip?t:e,r=t,s=i.skip?t:i,o=Te(r,a),l=Te(s,r),c=o/(o+l),d=l/(o+l),u=n*(c=isNaN(c)?0:c),h=n*(d=isNaN(d)?0:d);return{previous:{x:r.x-u*(s.x-a.x),y:r.y-u*(s.y-a.y)},next:{x:r.x+h*(s.x-a.x),y:r.y+h*(s.y-a.y)}}}function oi(e){var t,i,n,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"x",r=ri(a),s=e.length,o=Array(s).fill(0),l=Array(s),c=ai(e,0);for(t=0;t<s;++t)if(i=n,n=c,c=ai(e,t+1),n){if(c){var d=c[a]-n[a];o[t]=0!==d?(c[r]-n[r])/d:0}l[t]=i?c?Se(o[t-1])!==Se(o[t])?0:(o[t-1]+o[t])/2:o[t-1]:o[t]}!function(e,t,i){for(var n,a,r,s,o,l=e.length,c=ai(e,0),d=0;d<l-1;++d)o=c,c=ai(e,d+1),o&&c&&(De(t[d],0,ni)?i[d]=i[d+1]=0:(n=i[d]/t[d],a=i[d+1]/t[d],(s=Math.pow(n,2)+Math.pow(a,2))<=9||(r=3/Math.sqrt(s),i[d]=n*r*t[d],i[d+1]=a*r*t[d])))}(e,o,l),function(e,t){for(var i,n,a,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"x",s=ri(r),o=e.length,l=ai(e,0),c=0;c<o;++c)if(n=a,a=l,l=ai(e,c+1),a){var d=a[r],u=a[s];n&&(i=(d-n[r])/3,a["cp1".concat(r)]=d-i,a["cp1".concat(s)]=u-i*t[c]),l&&(i=(l[r]-d)/3,a["cp2".concat(r)]=d+i,a["cp2".concat(s)]=u+i*t[c])}}(e,l,a)}function li(e,t,i){return Math.max(Math.min(e,i),t)}function ci(e,t,i,n,a){var r,s,o,l;if(t.spanGaps&&(e=e.filter((function(e){return!e.skip}))),"monotone"===t.cubicInterpolationMode)oi(e,a);else{var c=n?e[e.length-1]:e[0];for(r=0,s=e.length;r<s;++r)l=si(c,o=e[r],e[Math.min(r+1,s-(n?0:1))%s],t.tension),o.cp1x=l.previous.x,o.cp1y=l.previous.y,o.cp2x=l.next.x,o.cp2y=l.next.y,c=o}t.capBezierPoints&&function(e,t){var i,n,a,r,s,o=jt(e[0],t);for(i=0,n=e.length;i<n;++i)s=r,r=o,o=i<n-1&&jt(e[i+1],t),r&&(a=e[i],s&&(a.cp1x=li(a.cp1x,t.left,t.right),a.cp1y=li(a.cp1y,t.top,t.bottom)),o&&(a.cp2x=li(a.cp2x,t.left,t.right),a.cp2y=li(a.cp2y,t.top,t.bottom)))}(e,i)}function di(){return"undefined"!==typeof window&&"undefined"!==typeof document}function ui(e){var t=e.parentNode;return t&&"[object ShadowRoot]"===t.toString()&&(t=t.host),t}function hi(e,t,i){var n;return"string"===typeof e?(n=parseInt(e,10),-1!==e.indexOf("%")&&(n=n/100*t.parentNode[i])):n=e,n}var fi=function(e){return e.ownerDocument.defaultView.getComputedStyle(e,null)};var gi=["top","right","bottom","left"];function pi(e,t,i){var n={};i=i?"-"+i:"";for(var a=0;a<4;a++){var r=gi[a];n[r]=parseFloat(e[t+"-"+r+i])||0}return n.width=n.left+n.right,n.height=n.top+n.bottom,n}function mi(e,t){if("native"in e)return e;var i=t.canvas,n=t.currentDevicePixelRatio,a=fi(i),r="border-box"===a.boxSizing,s=pi(a,"padding"),o=pi(a,"border","width"),l=function(e,t){var i,n,a=e.touches,r=a&&a.length?a[0]:e,s=r.offsetX,o=r.offsetY,l=!1;if(function(e,t,i){return(e>0||t>0)&&(!i||!i.shadowRoot)}(s,o,e.target))i=s,n=o;else{var c=t.getBoundingClientRect();i=r.clientX-c.left,n=r.clientY-c.top,l=!0}return{x:i,y:n,box:l}}(e,i),c=l.x,d=l.y,u=l.box,h=s.left+(u&&o.left),f=s.top+(u&&o.top),g=t.width,p=t.height;return r&&(g-=s.width+o.width,p-=s.height+o.height),{x:Math.round((c-h)/g*i.width/n),y:Math.round((d-f)/p*i.height/n)}}var vi=function(e){return Math.round(10*e)/10};function xi(e,t,i,n){var a=fi(e),r=pi(a,"margin"),s=hi(a.maxWidth,e,"clientWidth")||be,o=hi(a.maxHeight,e,"clientHeight")||be,l=function(e,t,i){var n,a;if(void 0===t||void 0===i){var r=e&&ui(e);if(r){var s=r.getBoundingClientRect(),o=fi(r),l=pi(o,"border","width"),c=pi(o,"padding");t=s.width-c.width-l.width,i=s.height-c.height-l.height,n=hi(o.maxWidth,r,"clientWidth"),a=hi(o.maxHeight,r,"clientHeight")}else t=e.clientWidth,i=e.clientHeight}return{width:t,height:i,maxWidth:n||be,maxHeight:a||be}}(e,t,i),c=l.width,d=l.height;if("content-box"===a.boxSizing){var u=pi(a,"border","width"),h=pi(a,"padding");c-=h.width+u.width,d-=h.height+u.height}return c=Math.max(0,c-r.width),d=Math.max(0,n?c/n:d-r.height),c=vi(Math.min(c,s,l.maxWidth)),d=vi(Math.min(d,o,l.maxHeight)),c&&!d&&(d=vi(c/2)),(void 0!==t||void 0!==i)&&n&&l.height&&d>l.height&&(d=l.height,c=vi(Math.floor(d*n))),{width:c,height:d}}function yi(e,t,i){var n=t||1,a=Math.floor(e.height*n),r=Math.floor(e.width*n);e.height=Math.floor(e.height),e.width=Math.floor(e.width);var s=e.canvas;return s.style&&(i||!s.style.height&&!s.style.width)&&(s.style.height="".concat(e.height,"px"),s.style.width="".concat(e.width,"px")),(e.currentDevicePixelRatio!==n||s.height!==a||s.width!==r)&&(e.currentDevicePixelRatio=n,s.height=a,s.width=r,e.ctx.setTransform(n,0,0,n,0,0),!0)}var bi=function(){var e=!1;try{var t={get passive(){return e=!0,!1}};di()&&(window.addEventListener("test",null,t),window.removeEventListener("test",null,t))}catch(i){}return e}();function Ai(e,t){var i=function(e,t){return fi(e).getPropertyValue(t)}(e,t),n=i&&i.match(/^(\d+)(\.\d+)?px$/);return n?+n[1]:void 0}function _i(e,t,i,n){return{x:e.x+i*(t.x-e.x),y:e.y+i*(t.y-e.y)}}function ki(e,t,i,n){return{x:e.x+i*(t.x-e.x),y:"middle"===n?i<.5?e.y:t.y:"after"===n?i<1?e.y:t.y:i>0?t.y:e.y}}function ji(e,t,i,n){var a={x:e.cp2x,y:e.cp2y},r={x:t.cp1x,y:t.cp1y},s=_i(e,a,i),o=_i(a,r,i),l=_i(r,t,i),c=_i(s,o,i),d=_i(o,l,i);return _i(c,d,i)}function wi(e,t,i){return e?function(e,t){return{x:function(i){return e+e+t-i},setWidth:function(e){t=e},textAlign:function(e){return"center"===e?e:"right"===e?"left":"right"},xPlus:function(e,t){return e-t},leftForLtr:function(e,t){return e-t}}}(t,i):{x:function(e){return e},setWidth:function(e){},textAlign:function(e){return e},xPlus:function(e,t){return e+t},leftForLtr:function(e,t){return e}}}function Si(e,t){var i,n;"ltr"!==t&&"rtl"!==t||(n=[(i=e.canvas.style).getPropertyValue("direction"),i.getPropertyPriority("direction")],i.setProperty("direction",t,"important"),e.prevTextDirection=n)}function Di(e,t){void 0!==t&&(delete e.prevTextDirection,e.canvas.style.setProperty("direction",t[0],t[1]))}function Pi(e){return"angle"===e?{between:Fe,compare:Re,normalize:Ee}:{between:Ue,compare:function(e,t){return e-t},normalize:function(e){return e}}}function Mi(e){var t=e.start,i=e.end,n=e.count;return{start:t%n,end:i%n,loop:e.loop&&(i-t+1)%n===0,style:e.style}}function Ni(e,t,i){if(!i)return[e];for(var n,a,r,s=i.property,o=i.start,l=i.end,c=t.length,d=Pi(s),u=d.compare,h=d.between,f=d.normalize,g=function(e,t,i){var n,a,r=i.property,s=i.start,o=i.end,l=Pi(r),c=l.between,d=l.normalize,u=t.length,h=e.start,f=e.end,g=e.loop;if(g){for(h+=u,f+=u,n=0,a=u;n<a&&c(d(t[h%u][r]),s,o);++n)h--,f--;h%=u,f%=u}return f<h&&(f+=u),{start:h,end:f,loop:g,style:e.style}}(e,t,i),p=g.start,m=g.end,v=g.loop,x=g.style,y=[],b=!1,A=null,_=function(){return b||h(o,r,n)&&0!==u(o,r)},k=function(){return!b||0===u(l,n)||h(l,r,n)},j=p,w=p;j<=m;++j)(a=t[j%c]).skip||(n=f(a[s]))!==r&&(b=h(n,o,l),null===A&&_()&&(A=0===u(n,o)?j:w),null!==A&&k()&&(y.push(Mi({start:A,end:j,loop:v,count:c,style:x})),A=null),w=j,r=n);return null!==A&&y.push(Mi({start:A,end:m,loop:v,count:c,style:x})),y}function Ci(e,t){for(var i=[],n=e.segments,a=0;a<n.length;a++){var r=Ni(n[a],e.points,t);r.length&&i.push.apply(i,(0,d.default)(r))}return i}function Ii(e,t,i,n){return n&&n.setContext&&i?function(e,t,i,n){var a=e._chart.getContext(),r=Oi(e.options),s=e._datasetIndex,o=e.options.spanGaps,c=i.length,d=[],u=r,h=t[0].start,f=h;function g(e,t,n,a){var r=o?-1:1;if(e!==t){for(e+=c;i[e%c].skip;)e-=r;for(;i[t%c].skip;)t+=r;e%c!==t%c&&(d.push({start:e%c,end:t%c,loop:n,style:a}),u=a,h=t%c)}}var p,m=(0,l.default)(t);try{for(m.s();!(p=m.n()).done;){var v=p.value;h=o?h:v.start;var x=i[h%c],y=void 0;for(f=h+1;f<=v.end;f++){var b=i[f%c];Li(y=Oi(n.setContext(Yt(a,{type:"segment",p0:x,p1:b,p0DataIndex:(f-1)%c,p1DataIndex:f%c,datasetIndex:s}))),u)&&g(h,f-1,v.loop,u),x=b,u=y}h<f-1&&g(h,f-1,v.loop,u)}}catch(A){m.e(A)}finally{m.f()}return d}(e,t,i,n):t}function Oi(e){return{backgroundColor:e.backgroundColor,borderCapStyle:e.borderCapStyle,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderJoinStyle:e.borderJoinStyle,borderWidth:e.borderWidth,borderColor:e.borderColor}}function Li(e,t){if(!t)return!1;var i=[],n=function(e,t){return nt(t)?(i.includes(t)||i.push(t),i.indexOf(t)):t};return JSON.stringify(e,n)!==JSON.stringify(t,n)}var Ti=function(){return(0,h.default)((function e(){(0,u.default)(this,e),this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}),[{key:"_notify",value:function(e,t,i,n){var a=t.listeners[n],r=t.duration;a.forEach((function(n){return n({chart:e,initial:t.initial,numSteps:r,currentStep:Math.min(i-t.start,r)})}))}},{key:"_refresh",value:function(){var e=this;this._request||(this._running=!0,this._request=Ge.call(window,(function(){e._update(),e._request=null,e._running&&e._refresh()})))}},{key:"_update",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Date.now(),i=0;this._charts.forEach((function(n,a){if(n.running&&n.items.length){for(var r,s=n.items,o=s.length-1,l=!1;o>=0;--o)(r=s[o])._active?(r._total>n.duration&&(n.duration=r._total),r.tick(t),l=!0):(s[o]=s[s.length-1],s.pop());l&&(a.draw(),e._notify(a,n,t,"progress")),s.length||(n.running=!1,e._notify(a,n,t,"complete"),n.initial=!1),i+=s.length}})),this._lastDate=t,0===i&&(this._running=!1)}},{key:"_getAnims",value:function(e){var t=this._charts,i=t.get(e);return i||(i={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},t.set(e,i)),i}},{key:"listen",value:function(e,t,i){this._getAnims(e).listeners[t].push(i)}},{key:"add",value:function(e,t){var i;t&&t.length&&(i=this._getAnims(e).items).push.apply(i,(0,d.default)(t))}},{key:"has",value:function(e){return this._getAnims(e).items.length>0}},{key:"start",value:function(e){var t=this._charts.get(e);t&&(t.running=!0,t.start=Date.now(),t.duration=t.items.reduce((function(e,t){return Math.max(e,t._duration)}),0),this._refresh())}},{key:"running",value:function(e){if(!this._running)return!1;var t=this._charts.get(e);return!!(t&&t.running&&t.items.length)}},{key:"stop",value:function(e){var t=this._charts.get(e);if(t&&t.items.length){for(var i=t.items,n=i.length-1;n>=0;--n)i[n].cancel();t.items=[],this._notify(e,t,Date.now(),"complete")}}},{key:"remove",value:function(e){return this._charts.delete(e)}}])}(),Ri=new Ti,Ei="transparent",Fi={boolean:function(e,t,i){return i>.5?t:e},color:function(e,t,i){var n=at(e||Ei),a=n.valid&&at(t||Ei);return a&&a.valid?a.mix(n,i).hexString():t},number:function(e,t,i){return e+(t-e)*i}},zi=function(){return(0,h.default)((function e(t,i,n,a){(0,u.default)(this,e);var r=i[n];a=Bt([t.to,a,r,t.from]);var s=Bt([t.from,r,a]);this._active=!0,this._fn=t.fn||Fi[t.type||typeof s],this._easing=it[t.easing]||it.linear,this._start=Math.floor(Date.now()+(t.delay||0)),this._duration=this._total=Math.floor(t.duration),this._loop=!!t.loop,this._target=i,this._prop=n,this._from=s,this._to=a,this._promises=void 0}),[{key:"active",value:function(){return this._active}},{key:"update",value:function(e,t,i){if(this._active){this._notify(!1);var n=this._target[this._prop],a=i-this._start,r=this._duration-a;this._start=i,this._duration=Math.floor(Math.max(r,e.duration)),this._total+=a,this._loop=!!e.loop,this._to=Bt([e.to,t,n,e.from]),this._from=Bt([e.from,n,t])}}},{key:"cancel",value:function(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}},{key:"tick",value:function(e){var t,i=e-this._start,n=this._duration,a=this._prop,r=this._from,s=this._loop,o=this._to;if(this._active=r!==o&&(s||i<n),!this._active)return this._target[a]=o,void this._notify(!0);i<0?this._target[a]=r:(t=i/n%2,t=s&&t>1?2-t:t,t=this._easing(Math.min(1,Math.max(0,t))),this._target[a]=this._fn(r,o,t))}},{key:"wait",value:function(){var e=this._promises||(this._promises=[]);return new Promise((function(t,i){e.push({res:t,rej:i})}))}},{key:"_notify",value:function(e){for(var t=e?"res":"rej",i=this._promises||[],n=0;n<i.length;n++)i[n][t]()}}])}(),Ui=function(){return(0,h.default)((function e(t,i){(0,u.default)(this,e),this._chart=t,this._properties=new Map,this.configure(i)}),[{key:"configure",value:function(e){if(K(e)){var t=Object.keys(vt.animation),i=this._properties;Object.getOwnPropertyNames(e).forEach((function(n){var a=e[n];if(K(a)){for(var r={},s=0,o=t;s<o.length;s++){var l=o[s];r[l]=a[l]}(X(a.properties)&&a.properties||[n]).forEach((function(e){e!==n&&i.has(e)||i.set(e,r)}))}}))}}},{key:"_animateOptions",value:function(e,t){var i=t.options,n=function(e,t){if(!t)return;var i=e.options;if(!i)return void(e.options=t);i.$shared&&(e.options=i=Object.assign({},i,{$shared:!1,$animations:{}}));return i}(e,i);if(!n)return[];var a=this._createAnimations(n,i);return i.$shared&&function(e,t){for(var i=[],n=Object.keys(t),a=0;a<n.length;a++){var r=e[n[a]];r&&r.active()&&i.push(r.wait())}return Promise.all(i)}(e.options.$animations,i).then((function(){e.options=i}),(function(){})),a}},{key:"_createAnimations",value:function(e,t){var i,n=this._properties,a=[],r=e.$animations||(e.$animations={}),s=Object.keys(t),o=Date.now();for(i=s.length-1;i>=0;--i){var l=s[i];if("$"!==l.charAt(0))if("options"!==l){var c=t[l],u=r[l],h=n.get(l);if(u){if(h&&u.active()){u.update(h,c,o);continue}u.cancel()}h&&h.duration?(r[l]=u=new zi(h,e,l,c),a.push(u)):e[l]=c}else a.push.apply(a,(0,d.default)(this._animateOptions(e,t)))}return a}},{key:"update",value:function(e,t){if(0!==this._properties.size){var i=this._createAnimations(e,t);return i.length?(Ri.add(this._chart,i),!0):void 0}Object.assign(e,t)}}])}();function Bi(e,t){var i=e&&e.options||{},n=i.reverse,a=void 0===i.min?t:0,r=void 0===i.max?t:0;return{start:n?r:a,end:n?a:r}}function Yi(e,t){var i,n,a=[],r=e._getSortedDatasetMetas(t);for(i=0,n=r.length;i<n;++i)a.push(r[i].index);return a}function Vi(e,t,i){var n,a,r,s,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},l=e.keys,c="single"===o.mode;if(null!==t){var d=!1;for(n=0,a=l.length;n<a;++n){if((r=+l[n])===i){if(d=!0,o.all)continue;break}$(s=e.values[r])&&(c||0===t||Se(t)===Se(s))&&(t+=s)}return d||o.all?t:0}}function qi(e,t){var i=e&&e.options.stacked;return i||void 0===i&&void 0!==t.stack}function Hi(e,t,i){var n=e[t]||(e[t]={});return n[i]||(n[i]={})}function Wi(e,t,i,n){var a,r=(0,l.default)(t.getMatchingVisibleMetas(n).reverse());try{for(r.s();!(a=r.n()).done;){var s=a.value,o=e[s.index];if(i&&o>0||!i&&o<0)return s.index}}catch(c){r.e(c)}finally{r.f()}return null}function Gi(e,t){for(var i,n=e.chart,a=e._cachedMeta,r=n._stacks||(n._stacks={}),s=a.iScale,o=a.vScale,l=a.index,c=s.axis,d=o.axis,u=function(e,t,i){return"".concat(e.id,".").concat(t.id,".").concat(i.stack||i.type)}(s,o,a),h=t.length,f=0;f<h;++f){var g=t[f],p=g[c],m=g[d];(i=(g._stacks||(g._stacks={}))[d]=Hi(r,u,p))[l]=m,i._top=Wi(i,o,!0,a.type),i._bottom=Wi(i,o,!1,a.type),(i._visualValues||(i._visualValues={}))[l]=m}}function Qi(e,t){var i=e.scales;return Object.keys(i).filter((function(e){return i[e].axis===t})).shift()}function Xi(e,t){var i=e.controller.index,n=e.vScale&&e.vScale.axis;if(n){t=t||e._parsed;var a,r=(0,l.default)(t);try{for(r.s();!(a=r.n()).done;){var s=a.value._stacks;if(!s||void 0===s[n]||void 0===s[n][i])return;delete s[n][i],void 0!==s[n]._visualValues&&void 0!==s[n]._visualValues[i]&&delete s[n]._visualValues[i]}}catch(o){r.e(o)}finally{r.f()}}}var Ki=function(e){return"reset"===e||"none"===e},$i=function(e,t){return t?e:Object.assign({},e)},Zi=function(){return(0,h.default)((function e(t,i){(0,u.default)(this,e),this.chart=t,this._ctx=t.ctx,this.index=i,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=(this instanceof e?this.constructor:void 0).datasetElementType,this.dataElementType=(this instanceof e?this.constructor:void 0).dataElementType,this.initialize()}),[{key:"initialize",value:function(){var e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=qi(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}},{key:"updateIndex",value:function(e){this.index!==e&&Xi(this._cachedMeta),this.index=e}},{key:"linkScales",value:function(){var e=this.chart,t=this._cachedMeta,i=this.getDataset(),n=function(e,t,i,n){return"x"===e?t:"r"===e?n:i},a=t.xAxisID=J(i.xAxisID,Qi(e,"x")),r=t.yAxisID=J(i.yAxisID,Qi(e,"y")),s=t.rAxisID=J(i.rAxisID,Qi(e,"r")),o=t.indexAxis,l=t.iAxisID=n(o,a,r,s),c=t.vAxisID=n(o,r,a,s);t.xScale=this.getScaleForId(a),t.yScale=this.getScaleForId(r),t.rScale=this.getScaleForId(s),t.iScale=this.getScaleForId(l),t.vScale=this.getScaleForId(c)}},{key:"getDataset",value:function(){return this.chart.data.datasets[this.index]}},{key:"getMeta",value:function(){return this.chart.getDatasetMeta(this.index)}},{key:"getScaleForId",value:function(e){return this.chart.scales[e]}},{key:"_getOtherScale",value:function(e){var t=this._cachedMeta;return e===t.iScale?t.vScale:t.iScale}},{key:"reset",value:function(){this._update("reset")}},{key:"_destroy",value:function(){var e=this._cachedMeta;this._data&&He(this._data,this),e._stacked&&Xi(e)}},{key:"_dataCheck",value:function(){var e,t,i=this.getDataset(),n=i.data||(i.data=[]),a=this._data;if(K(n)){var r=this._cachedMeta;this._data=function(e,t){var i,n,a,r=t.iScale,s=t.vScale,o="x"===r.axis?"x":"y",l="x"===s.axis?"x":"y",d=Object.keys(e),u=new Array(d.length);for(i=0,n=d.length;i<n;++i)a=d[i],u[i]=(0,c.default)((0,c.default)({},o,a),l,e[a]);return u}(n,r)}else if(a!==n){if(a){He(a,this);var s=this._cachedMeta;Xi(s),s._parsed=[]}n&&Object.isExtensible(n)&&(t=this,(e=n)._chartjs?e._chartjs.listeners.push(t):(Object.defineProperty(e,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[t]}}),qe.forEach((function(t){var i="_onData"+fe(t),n=e[t];Object.defineProperty(e,t,{configurable:!0,enumerable:!1,value:function(){for(var t=arguments.length,a=new Array(t),r=0;r<t;r++)a[r]=arguments[r];var s=n.apply(this,a);return e._chartjs.listeners.forEach((function(e){"function"===typeof e[i]&&e[i].apply(e,a)})),s}})})))),this._syncList=[],this._data=n}}},{key:"addElements",value:function(){var e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}},{key:"buildOrUpdateElements",value:function(e){var t=this._cachedMeta,i=this.getDataset(),n=!1;this._dataCheck();var a=t._stacked;t._stacked=qi(t.vScale,t),t.stack!==i.stack&&(n=!0,Xi(t),t.stack=i.stack),this._resyncElements(e),(n||a!==t._stacked)&&(Gi(this,t._parsed),t._stacked=qi(t.vScale,t))}},{key:"configure",value:function(){var e=this.chart.config,t=e.datasetScopeKeys(this._type),i=e.getOptionScopes(this.getDataset(),t,!0);this.options=e.createResolver(i,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}},{key:"parse",value:function(e,t){var i,n,a,r=this._cachedMeta,s=this._data,o=r.iScale,l=r._stacked,c=o.axis,d=0===e&&t===s.length||r._sorted,u=e>0&&r._parsed[e-1];if(!1===this._parsing)r._parsed=s,r._sorted=!0,a=s;else{a=X(s[e])?this.parseArrayData(r,s,e,t):K(s[e])?this.parseObjectData(r,s,e,t):this.parsePrimitiveData(r,s,e,t);for(i=0;i<t;++i)r._parsed[i+e]=n=a[i],d&&((null===n[c]||u&&n[c]<u[c])&&(d=!1),u=n);r._sorted=d}l&&Gi(this,a)}},{key:"parsePrimitiveData",value:function(e,t,i,n){var a,r,s,o=e.iScale,l=e.vScale,d=o.axis,u=l.axis,h=o.getLabels(),f=o===l,g=new Array(n);for(a=0,r=n;a<r;++a)s=a+i,g[a]=(0,c.default)((0,c.default)({},d,f||o.parse(h[s],s)),u,l.parse(t[s],s));return g}},{key:"parseArrayData",value:function(e,t,i,n){var a,r,s,o,l=e.xScale,c=e.yScale,d=new Array(n);for(a=0,r=n;a<r;++a)o=t[s=a+i],d[a]={x:l.parse(o[0],s),y:c.parse(o[1],s)};return d}},{key:"parseObjectData",value:function(e,t,i,n){var a,r,s,o,l=e.xScale,c=e.yScale,d=this._parsing,u=d.xAxisKey,h=void 0===u?"x":u,f=d.yAxisKey,g=void 0===f?"y":f,p=new Array(n);for(a=0,r=n;a<r;++a)o=t[s=a+i],p[a]={x:l.parse(he(o,h),s),y:c.parse(he(o,g),s)};return p}},{key:"getParsed",value:function(e){return this._cachedMeta._parsed[e]}},{key:"getDataElement",value:function(e){return this._cachedMeta.data[e]}},{key:"applyStack",value:function(e,t,i){var n=this.chart,a=this._cachedMeta,r=t[e.axis];return Vi({keys:Yi(n,!0),values:t._stacks[e.axis]._visualValues},r,a.index,{mode:i})}},{key:"updateRangeFromParsed",value:function(e,t,i,n){var a=i[t.axis],r=null===a?NaN:a,s=n&&i._stacks[t.axis];n&&s&&(n.values=s,r=Vi(n,a,this._cachedMeta.index)),e.min=Math.min(e.min,r),e.max=Math.max(e.max,r)}},{key:"getMinMax",value:function(e,t){var i,n,a=this._cachedMeta,r=a._parsed,s=a._sorted&&e===a.iScale,o=r.length,l=this._getOtherScale(e),c=function(e,t,i){return e&&!t.hidden&&t._stacked&&{keys:Yi(i,!0),values:null}}(t,a,this.chart),d={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},u=function(e){var t=e.getUserBounds(),i=t.min,n=t.max,a=t.minDefined,r=t.maxDefined;return{min:a?i:Number.NEGATIVE_INFINITY,max:r?n:Number.POSITIVE_INFINITY}}(l),h=u.min,f=u.max;function g(){var t=(n=r[i])[l.axis];return!$(n[e.axis])||h>t||f<t}for(i=0;i<o&&(g()||(this.updateRangeFromParsed(d,e,n,c),!s));++i);if(s)for(i=o-1;i>=0;--i)if(!g()){this.updateRangeFromParsed(d,e,n,c);break}return d}},{key:"getAllParsedValues",value:function(e){var t,i,n,a=this._cachedMeta._parsed,r=[];for(t=0,i=a.length;t<i;++t)$(n=a[t][e.axis])&&r.push(n);return r}},{key:"getMaxOverflow",value:function(){return!1}},{key:"getLabelAndValue",value:function(e){var t=this._cachedMeta,i=t.iScale,n=t.vScale,a=this.getParsed(e);return{label:i?""+i.getLabelForValue(a[i.axis]):"",value:n?""+n.getLabelForValue(a[n.axis]):""}}},{key:"_update",value:function(e){var t=this._cachedMeta;this.update(e||"default"),t._clip=function(e){var t,i,n,a;return K(e)?(t=e.top,i=e.right,n=e.bottom,a=e.left):t=i=n=a=e,{top:t,right:i,bottom:n,left:a,disabled:!1===e}}(J(this.options.clip,function(e,t,i){if(!1===i)return!1;var n=Bi(e,i),a=Bi(t,i);return{top:a.end,right:n.end,bottom:a.start,left:n.start}}(t.xScale,t.yScale,this.getMaxOverflow())))}},{key:"update",value:function(e){}},{key:"draw",value:function(){var e,t=this._ctx,i=this.chart,n=this._cachedMeta,a=n.data||[],r=i.chartArea,s=[],o=this._drawStart||0,l=this._drawCount||a.length-o,c=this.options.drawActiveElementsOnTop;for(n.dataset&&n.dataset.draw(t,r,o,l),e=o;e<o+l;++e){var d=a[e];d.hidden||(d.active&&c?s.push(d):d.draw(t,r))}for(e=0;e<s.length;++e)s[e].draw(t,r)}},{key:"getStyle",value:function(e,t){var i=t?"active":"default";return void 0===e&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(i):this.resolveDataElementOptions(e||0,i)}},{key:"getContext",value:function(e,t,i){var n,a=this.getDataset();if(e>=0&&e<this._cachedMeta.data.length){var r=this._cachedMeta.data[e];n=r.$context||(r.$context=function(e,t,i){return Yt(e,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:i,index:t,mode:"default",type:"data"})}(this.getContext(),e,r)),n.parsed=this.getParsed(e),n.raw=a.data[e],n.index=n.dataIndex=e}else n=this.$context||(this.$context=function(e,t){return Yt(e,{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}(this.chart.getContext(),this.index)),n.dataset=a,n.index=n.datasetIndex=this.index;return n.active=!!t,n.mode=i,n}},{key:"resolveDatasetElementOptions",value:function(e){return this._resolveElementOptions(this.datasetElementType.id,e)}},{key:"resolveDataElementOptions",value:function(e,t){return this._resolveElementOptions(this.dataElementType.id,t,e)}},{key:"_resolveElementOptions",value:function(e){var t=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default",n=arguments.length>2?arguments[2]:void 0,a="active"===i,r=this._cachedDataOpts,s=e+"-"+i,o=r[s],l=this.enableOptionSharing&&ge(n);if(o)return $i(o,l);var c=this.chart.config,d=c.datasetElementScopeKeys(this._type,e),u=a?["".concat(e,"Hover"),"hover",e,""]:[e,""],h=c.getOptionScopes(this.getDataset(),d),f=Object.keys(vt.elements[e]),g=c.resolveNamedOptions(h,f,(function(){return t.getContext(n,a,i)}),u);return g.$shared&&(g.$shared=l,r[s]=Object.freeze($i(g,l))),g}},{key:"_resolveAnimations",value:function(e,t,i){var n,a=this.chart,r=this._cachedDataOpts,s="animation-".concat(t),o=r[s];if(o)return o;if(!1!==a.options.animation){var l=this.chart.config,c=l.datasetAnimationScopeKeys(this._type,t),d=l.getOptionScopes(this.getDataset(),c);n=l.createResolver(d,this.getContext(e,i,t))}var u=new Ui(a,n&&n.animations);return n&&n._cacheable&&(r[s]=Object.freeze(u)),u}},{key:"getSharedOptions",value:function(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}},{key:"includeOptions",value:function(e,t){return!t||Ki(e)||this.chart._animationsDisabled}},{key:"_getSharedOptions",value:function(e,t){var i=this.resolveDataElementOptions(e,t),n=this._sharedOptions,a=this.getSharedOptions(i),r=this.includeOptions(t,a)||a!==n;return this.updateSharedOptions(a,t,i),{sharedOptions:a,includeOptions:r}}},{key:"updateElement",value:function(e,t,i,n){Ki(n)?Object.assign(e,i):this._resolveAnimations(t,n).update(e,i)}},{key:"updateSharedOptions",value:function(e,t,i){e&&!Ki(t)&&this._resolveAnimations(void 0,t).update(e,i)}},{key:"_setStyle",value:function(e,t,i,n){e.active=n;var a=this.getStyle(t,n);this._resolveAnimations(t,i,n).update(e,{options:!n&&this.getSharedOptions(a)||a})}},{key:"removeHoverStyle",value:function(e,t,i){this._setStyle(e,i,"active",!1)}},{key:"setHoverStyle",value:function(e,t,i){this._setStyle(e,i,"active",!0)}},{key:"_removeDatasetHoverStyle",value:function(){var e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}},{key:"_setDatasetHoverStyle",value:function(){var e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}},{key:"_resyncElements",value:function(e){var t,i=this._data,n=this._cachedMeta.data,a=(0,l.default)(this._syncList);try{for(a.s();!(t=a.n()).done;){var r=(0,o.default)(t.value,3),s=r[0],c=r[1],d=r[2];this[s](c,d)}}catch(g){a.e(g)}finally{a.f()}this._syncList=[];var u=n.length,h=i.length,f=Math.min(h,u);f&&this.parse(0,f),h>u?this._insertElements(u,h-u,e):h<u&&this._removeElements(h,u-h)}},{key:"_insertElements",value:function(e,t){var i,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],a=this._cachedMeta,r=a.data,s=e+t,o=function(e){for(e.length+=t,i=e.length-1;i>=s;i--)e[i]=e[i-t]};for(o(r),i=e;i<s;++i)r[i]=new this.dataElementType;this._parsing&&o(a._parsed),this.parse(e,t),n&&this.updateElements(r,e,t,"reset")}},{key:"updateElements",value:function(e,t,i,n){}},{key:"_removeElements",value:function(e,t){var i=this._cachedMeta;if(this._parsing){var n=i._parsed.splice(e,t);i._stacked&&Xi(i,n)}i.data.splice(e,t)}},{key:"_sync",value:function(e){if(this._parsing)this._syncList.push(e);else{var t=(0,o.default)(e,3),i=t[0],n=t[1],a=t[2];this[i](n,a)}this.chart._dataChanges.push([this.index].concat((0,d.default)(e)))}},{key:"_onDataPush",value:function(){var e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}},{key:"_onDataPop",value:function(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}},{key:"_onDataShift",value:function(){this._sync(["_removeElements",0,1])}},{key:"_onDataSplice",value:function(e,t){t&&this._sync(["_removeElements",e,t]);var i=arguments.length-2;i&&this._sync(["_insertElements",e,i])}},{key:"_onDataUnshift",value:function(){this._sync(["_insertElements",0,arguments.length])}}])}();function Ji(e){var t,i,n,a,r=e.iScale,s=function(e,t){if(!e._cache.$bar){for(var i=e.getMatchingVisibleMetas(t),n=[],a=0,r=i.length;a<r;a++)n=n.concat(i[a].controller.getAllParsedValues(e));e._cache.$bar=We(n.sort((function(e,t){return e-t})))}return e._cache.$bar}(r,e.type),o=r._length,l=function(){32767!==n&&-32768!==n&&(ge(a)&&(o=Math.min(o,Math.abs(n-a)||o)),a=n)};for(t=0,i=s.length;t<i;++t)n=r.getPixelForValue(s[t]),l();for(a=void 0,t=0,i=r.ticks.length;t<i;++t)n=r.getPixelForTick(t),l();return o}function en(e,t,i,n){return X(e)?function(e,t,i,n){var a=i.parse(e[0],n),r=i.parse(e[1],n),s=Math.min(a,r),o=Math.max(a,r),l=s,c=o;Math.abs(s)>Math.abs(o)&&(l=o,c=s),t[i.axis]=c,t._custom={barStart:l,barEnd:c,start:a,end:r,min:s,max:o}}(e,t,i,n):t[i.axis]=i.parse(e,n),t}function tn(e,t,i,n){var a,r,s,o,l=e.iScale,c=e.vScale,d=l.getLabels(),u=l===c,h=[];for(a=i,r=i+n;a<r;++a)o=t[a],(s={})[l.axis]=u||l.parse(d[a],a),h.push(en(o,s,c,a));return h}function nn(e){return e&&void 0!==e.barStart&&void 0!==e.barEnd}function an(e,t,i,n){var a=t.borderSkipped,r={};if(a)if(!0!==a){var s=function(e){var t,i,n,a,r;return e.horizontal?(t=e.base>e.x,i="left",n="right"):(t=e.base<e.y,i="bottom",n="top"),t?(a="end",r="start"):(a="start",r="end"),{start:i,end:n,reverse:t,top:a,bottom:r}}(e),o=s.start,l=s.end,c=s.reverse,d=s.top,u=s.bottom;"middle"===a&&i&&(e.enableBorderRadius=!0,(i._top||0)===n?a=d:(i._bottom||0)===n?a=u:(r[rn(u,o,l,c)]=!0,a=d)),r[rn(a,o,l,c)]=!0,e.borderSkipped=r}else e.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};else e.borderSkipped=r}function rn(e,t,i,n){var a,r,s;return n?(s=i,e=sn(e=(a=e)===(r=t)?s:a===s?r:a,i,t)):e=sn(e,t,i),e}function sn(e,t,i){return"start"===e?t:"end"===e?i:e}function on(e,t,i){var n=t.inflateAmount;e.inflateAmount="auto"===n?1===i?.33:0:n}(0,c.default)(Zi,"defaults",{}),(0,c.default)(Zi,"datasetElementType",null),(0,c.default)(Zi,"dataElementType",null);var ln=function(e){function t(){return(0,u.default)(this,t),(0,a.default)(this,t,arguments)}return(0,s.default)(t,e),(0,h.default)(t,[{key:"parsePrimitiveData",value:function(e,t,i,n){return tn(e,t,i,n)}},{key:"parseArrayData",value:function(e,t,i,n){return tn(e,t,i,n)}},{key:"parseObjectData",value:function(e,t,i,n){var a,r,s,o,l=e.iScale,c=e.vScale,d=this._parsing,u=d.xAxisKey,h=void 0===u?"x":u,f=d.yAxisKey,g=void 0===f?"y":f,p="x"===l.axis?h:g,m="x"===c.axis?h:g,v=[];for(a=i,r=i+n;a<r;++a)o=t[a],(s={})[l.axis]=l.parse(he(o,p),a),v.push(en(he(o,m),s,c,a));return v}},{key:"updateRangeFromParsed",value:function(e,i,n,a){(0,r.A)(t,"updateRangeFromParsed",this,3)([e,i,n,a]);var s=n._custom;s&&i===this._cachedMeta.vScale&&(e.min=Math.min(e.min,s.min),e.max=Math.max(e.max,s.max))}},{key:"getMaxOverflow",value:function(){return 0}},{key:"getLabelAndValue",value:function(e){var t=this._cachedMeta,i=t.iScale,n=t.vScale,a=this.getParsed(e),r=a._custom,s=nn(r)?"["+r.start+", "+r.end+"]":""+n.getLabelForValue(a[n.axis]);return{label:""+i.getLabelForValue(a[i.axis]),value:s}}},{key:"initialize",value:function(){this.enableOptionSharing=!0,(0,r.A)(t,"initialize",this,3)([]),this._cachedMeta.stack=this.getDataset().stack}},{key:"update",value:function(e){var t=this._cachedMeta;this.updateElements(t.data,0,t.data.length,e)}},{key:"updateElements",value:function(e,t,i,n){for(var a="reset"===n,r=this.index,s=this._cachedMeta.vScale,o=s.getBasePixel(),l=s.isHorizontal(),c=this._getRuler(),d=this._getSharedOptions(t,n),u=d.sharedOptions,h=d.includeOptions,f=t;f<t+i;f++){var g=this.getParsed(f),p=a||Q(g[s.axis])?{base:o,head:o}:this._calculateBarValuePixels(f),m=this._calculateBarIndexPixels(f,c),v=(g._stacks||{})[s.axis],x={horizontal:l,base:p.base,enableBorderRadius:!v||nn(g._custom)||r===v._top||r===v._bottom,x:l?p.head:m.center,y:l?m.center:p.head,height:l?m.size:Math.abs(p.size),width:l?Math.abs(p.size):m.size};h&&(x.options=u||this.resolveDataElementOptions(f,e[f].active?"active":n));var y=x.options||e[f].options;an(x,y,v,r),on(x,y,c.ratio),this.updateElement(e[f],f,x,n)}}},{key:"_getStacks",value:function(e,t){var i,n=this._cachedMeta.iScale,a=n.getMatchingVisibleMetas(this._type).filter((function(e){return e.controller.options.grouped})),r=n.options.stacked,s=[],o=this._cachedMeta.controller.getParsed(t),c=o&&o[n.axis],d=function(e){var t=e._parsed.find((function(e){return e[n.axis]===c})),i=t&&t[e.vScale.axis];if(Q(i)||isNaN(i))return!0},u=(0,l.default)(a);try{for(u.s();!(i=u.n()).done;){var h=i.value;if((void 0===t||!d(h))&&((!1===r||-1===s.indexOf(h.stack)||void 0===r&&void 0===h.stack)&&s.push(h.stack),h.index===e))break}}catch(f){u.e(f)}finally{u.f()}return s.length||s.push(void 0),s}},{key:"_getStackCount",value:function(e){return this._getStacks(void 0,e).length}},{key:"_getStackIndex",value:function(e,t,i){var n=this._getStacks(e,i),a=void 0!==t?n.indexOf(t):-1;return-1===a?n.length-1:a}},{key:"_getRuler",value:function(){var e,t,i=this.options,n=this._cachedMeta,a=n.iScale,r=[];for(e=0,t=n.data.length;e<t;++e)r.push(a.getPixelForValue(this.getParsed(e)[a.axis],e));var s=i.barThickness;return{min:s||Ji(n),pixels:r,start:a._startPixel,end:a._endPixel,stackCount:this._getStackCount(),scale:a,grouped:i.grouped,ratio:s?1:i.categoryPercentage*i.barPercentage}}},{key:"_calculateBarValuePixels",value:function(e){var t,i,n=this._cachedMeta,a=n.vScale,r=n._stacked,s=n.index,o=this.options,l=o.base,c=o.minBarLength,d=l||0,u=this.getParsed(e),h=u._custom,f=nn(h),g=u[a.axis],p=0,m=r?this.applyStack(a,u,r):g;m!==g&&(p=m-g,m=g),f&&(g=h.barStart,m=h.barEnd-h.barStart,0!==g&&Se(g)!==Se(h.barEnd)&&(p=0),p+=g);var v=Q(l)||f?p:l,x=a.getPixelForValue(v);if(i=(t=this.chart.getDataVisibility(e)?a.getPixelForValue(p+m):x)-x,Math.abs(i)<c){i=function(e,t,i){return 0!==e?Se(e):(t.isHorizontal()?1:-1)*(t.min>=i?1:-1)}(i,a,d)*c,g===d&&(x-=i/2);var y=a.getPixelForDecimal(0),b=a.getPixelForDecimal(1),A=Math.min(y,b),_=Math.max(y,b);t=(x=Math.max(Math.min(x,_),A))+i,r&&!f&&(u._stacks[a.axis]._visualValues[s]=a.getValueForPixel(t)-a.getValueForPixel(x))}if(x===a.getPixelForValue(d)){var k=Se(i)*a.getLineWidthForValue(d)/2;x+=k,i-=k}return{size:i,base:x,head:t,center:t+i/2}}},{key:"_calculateBarIndexPixels",value:function(e,t){var i,n,a=t.scale,r=this.options,s=r.skipNull,o=J(r.maxBarThickness,1/0);if(t.grouped){var l=s?this._getStackCount(e):t.stackCount,c="flex"===r.barThickness?function(e,t,i,n){var a=t.pixels,r=a[e],s=e>0?a[e-1]:null,o=e<a.length-1?a[e+1]:null,l=i.categoryPercentage;null===s&&(s=r-(null===o?t.end-t.start:o-r)),null===o&&(o=r+r-s);var c=r-(r-Math.min(s,o))/2*l;return{chunk:Math.abs(o-s)/2*l/n,ratio:i.barPercentage,start:c}}(e,t,r,l):function(e,t,i,n){var a,r,s=i.barThickness;return Q(s)?(a=t.min*i.categoryPercentage,r=i.barPercentage):(a=s*n,r=1),{chunk:a/n,ratio:r,start:t.pixels[e]-a/2}}(e,t,r,l),d=this._getStackIndex(this.index,this._cachedMeta.stack,s?e:void 0);i=c.start+c.chunk*d+c.chunk/2,n=Math.min(o,c.chunk*c.ratio)}else i=a.getPixelForValue(this.getParsed(e)[a.axis],e),n=Math.min(o,t.min*t.ratio);return{base:i-n/2,head:i+n/2,center:i,size:n}}},{key:"draw",value:function(){for(var e=this._cachedMeta,t=e.vScale,i=e.data,n=i.length,a=0;a<n;++a)null===this.getParsed(a)[t.axis]||i[a].hidden||i[a].draw(this._ctx)}}])}(Zi);(0,c.default)(ln,"id","bar"),(0,c.default)(ln,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),(0,c.default)(ln,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}});var cn=function(e){function t(){return(0,u.default)(this,t),(0,a.default)(this,t,arguments)}return(0,s.default)(t,e),(0,h.default)(t,[{key:"initialize",value:function(){this.enableOptionSharing=!0,(0,r.A)(t,"initialize",this,3)([])}},{key:"parsePrimitiveData",value:function(e,i,n,a){for(var s=(0,r.A)(t,"parsePrimitiveData",this,3)([e,i,n,a]),o=0;o<s.length;o++)s[o]._custom=this.resolveDataElementOptions(o+n).radius;return s}},{key:"parseArrayData",value:function(e,i,n,a){for(var s=(0,r.A)(t,"parseArrayData",this,3)([e,i,n,a]),o=0;o<s.length;o++){var l=i[n+o];s[o]._custom=J(l[2],this.resolveDataElementOptions(o+n).radius)}return s}},{key:"parseObjectData",value:function(e,i,n,a){for(var s=(0,r.A)(t,"parseObjectData",this,3)([e,i,n,a]),o=0;o<s.length;o++){var l=i[n+o];s[o]._custom=J(l&&l.r&&+l.r,this.resolveDataElementOptions(o+n).radius)}return s}},{key:"getMaxOverflow",value:function(){for(var e=this._cachedMeta.data,t=0,i=e.length-1;i>=0;--i)t=Math.max(t,e[i].size(this.resolveDataElementOptions(i))/2);return t>0&&t}},{key:"getLabelAndValue",value:function(e){var t=this._cachedMeta,i=this.chart.data.labels||[],n=t.xScale,a=t.yScale,r=this.getParsed(e),s=n.getLabelForValue(r.x),o=a.getLabelForValue(r.y),l=r._custom;return{label:i[e]||"",value:"("+s+", "+o+(l?", "+l:"")+")"}}},{key:"update",value:function(e){var t=this._cachedMeta.data;this.updateElements(t,0,t.length,e)}},{key:"updateElements",value:function(e,t,i,n){for(var a="reset"===n,r=this._cachedMeta,s=r.iScale,o=r.vScale,l=this._getSharedOptions(t,n),c=l.sharedOptions,d=l.includeOptions,u=s.axis,h=o.axis,f=t;f<t+i;f++){var g=e[f],p=!a&&this.getParsed(f),m={},v=m[u]=a?s.getPixelForDecimal(.5):s.getPixelForValue(p[u]),x=m[h]=a?o.getBasePixel():o.getPixelForValue(p[h]);m.skip=isNaN(v)||isNaN(x),d&&(m.options=c||this.resolveDataElementOptions(f,g.active?"active":n),a&&(m.options.radius=0)),this.updateElement(g,f,m,n)}}},{key:"resolveDataElementOptions",value:function(e,i){var n=this.getParsed(e),a=(0,r.A)(t,"resolveDataElementOptions",this,3)([e,i]);a.$shared&&(a=Object.assign({},a,{$shared:!1}));var s=a.radius;return"active"!==i&&(a.radius=0),a.radius+=J(n&&n._custom,s),a}}])}(Zi);(0,c.default)(cn,"id","bubble"),(0,c.default)(cn,"defaults",{datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}}),(0,c.default)(cn,"overrides",{scales:{x:{type:"linear"},y:{type:"linear"}}});var dn=function(e){function t(e,i){var n;return(0,u.default)(this,t),(n=(0,a.default)(this,t,[e,i])).enableOptionSharing=!0,n.innerRadius=void 0,n.outerRadius=void 0,n.offsetX=void 0,n.offsetY=void 0,n}return(0,s.default)(t,e),(0,h.default)(t,[{key:"linkScales",value:function(){}},{key:"parse",value:function(e,t){var i=this.getDataset().data,n=this._cachedMeta;if(!1===this._parsing)n._parsed=i;else{var a,r,s=function(e){return+i[e]};if(K(i[e])){var o=this._parsing.key,l=void 0===o?"value":o;s=function(e){return+he(i[e],l)}}for(a=e,r=e+t;a<r;++a)n._parsed[a]=s(a)}}},{key:"_getRotation",value:function(){return Ce(this.options.rotation-90)}},{key:"_getCircumference",value:function(){return Ce(this.options.circumference)}},{key:"_getRotationExtents",value:function(){for(var e=xe,t=-xe,i=0;i<this.chart.data.datasets.length;++i)if(this.chart.isDatasetVisible(i)&&this.chart.getDatasetMeta(i).type===this._type){var n=this.chart.getDatasetMeta(i).controller,a=n._getRotation(),r=n._getCircumference();e=Math.min(e,a),t=Math.max(t,a+r)}return{rotation:e,circumference:t-e}}},{key:"update",value:function(e){var t,i,n=this.chart.chartArea,a=this._cachedMeta,r=a.data,s=this.getMaxBorderWidth()+this.getMaxOffset(r)+this.options.spacing,o=Math.max((Math.min(n.width,n.height)-s)/2,0),l=Math.min((t=this.options.cutout,i=o,"string"===typeof t&&t.endsWith("%")?parseFloat(t)/100:+t/i),1),c=this._getRingWeight(this.index),d=this._getRotationExtents(),u=d.circumference,h=function(e,t,i){var n=1,a=1,r=0,s=0;if(t<xe){var o=e,l=o+t,c=Math.cos(o),d=Math.sin(o),u=Math.cos(l),h=Math.sin(l),f=function(e,t,n){return Fe(e,o,l,!0)?1:Math.max(t,t*i,n,n*i)},g=function(e,t,n){return Fe(e,o,l,!0)?-1:Math.min(t,t*i,n,n*i)},p=f(0,c,u),m=f(_e,d,h),v=g(ve,c,u),x=g(ve+_e,d,h);n=(p-v)/2,a=(m-x)/2,r=-(p+v)/2,s=-(m+x)/2}return{ratioX:n,ratioY:a,offsetX:r,offsetY:s}}(d.rotation,u,l),f=h.ratioX,g=h.ratioY,p=h.offsetX,m=h.offsetY,v=(n.width-s)/f,x=(n.height-s)/g,y=Math.max(Math.min(v,x)/2,0),b=ee(this.options.radius,y),A=(b-Math.max(b*l,0))/this._getVisibleDatasetWeightTotal();this.offsetX=p*b,this.offsetY=m*b,a.total=this.calculateTotal(),this.outerRadius=b-A*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-A*c,0),this.updateElements(r,0,r.length,e)}},{key:"_circumference",value:function(e,t){var i=this.options,n=this._cachedMeta,a=this._getCircumference();return t&&i.animation.animateRotate||!this.chart.getDataVisibility(e)||null===n._parsed[e]||n.data[e].hidden?0:this.calculateCircumference(n._parsed[e]*a/xe)}},{key:"updateElements",value:function(e,t,i,n){var a,r="reset"===n,s=this.chart,o=s.chartArea,l=s.options.animation,c=(o.left+o.right)/2,d=(o.top+o.bottom)/2,u=r&&l.animateScale,h=u?0:this.innerRadius,f=u?0:this.outerRadius,g=this._getSharedOptions(t,n),p=g.sharedOptions,m=g.includeOptions,v=this._getRotation();for(a=0;a<t;++a)v+=this._circumference(a,r);for(a=t;a<t+i;++a){var x=this._circumference(a,r),y=e[a],b={x:c+this.offsetX,y:d+this.offsetY,startAngle:v,endAngle:v+x,circumference:x,outerRadius:f,innerRadius:h};m&&(b.options=p||this.resolveDataElementOptions(a,y.active?"active":n)),v+=x,this.updateElement(y,a,b,n)}}},{key:"calculateTotal",value:function(){var e,t=this._cachedMeta,i=t.data,n=0;for(e=0;e<i.length;e++){var a=t._parsed[e];null===a||isNaN(a)||!this.chart.getDataVisibility(e)||i[e].hidden||(n+=Math.abs(a))}return n}},{key:"calculateCircumference",value:function(e){var t=this._cachedMeta.total;return t>0&&!isNaN(e)?xe*(Math.abs(e)/t):0}},{key:"getLabelAndValue",value:function(e){var t=this._cachedMeta,i=this.chart,n=i.data.labels||[],a=ct(t._parsed[e],i.options.locale);return{label:n[e]||"",value:a}}},{key:"getMaxBorderWidth",value:function(e){var t,i,n,a,r,s=0,o=this.chart;if(!e)for(t=0,i=o.data.datasets.length;t<i;++t)if(o.isDatasetVisible(t)){e=(n=o.getDatasetMeta(t)).data,a=n.controller;break}if(!e)return 0;for(t=0,i=e.length;t<i;++t)"inner"!==(r=a.resolveDataElementOptions(t)).borderAlign&&(s=Math.max(s,r.borderWidth||0,r.hoverBorderWidth||0));return s}},{key:"getMaxOffset",value:function(e){for(var t=0,i=0,n=e.length;i<n;++i){var a=this.resolveDataElementOptions(i);t=Math.max(t,a.offset||0,a.hoverOffset||0)}return t}},{key:"_getRingWeightOffset",value:function(e){for(var t=0,i=0;i<e;++i)this.chart.isDatasetVisible(i)&&(t+=this._getRingWeight(i));return t}},{key:"_getRingWeight",value:function(e){return Math.max(J(this.chart.data.datasets[e].weight,1),0)}},{key:"_getVisibleDatasetWeightTotal",value:function(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}])}(Zi);(0,c.default)(dn,"id","doughnut"),(0,c.default)(dn,"defaults",{datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"}),(0,c.default)(dn,"descriptors",{_scriptable:function(e){return"spacing"!==e},_indexable:function(e){return"spacing"!==e&&!e.startsWith("borderDash")&&!e.startsWith("hoverBorderDash")}}),(0,c.default)(dn,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels:function(e){var t=e.data;if(t.labels.length&&t.datasets.length){var i=e.legend.options.labels,n=i.pointStyle,a=i.color;return t.labels.map((function(t,i){var r=e.getDatasetMeta(0).controller.getStyle(i);return{text:t,fillStyle:r.backgroundColor,strokeStyle:r.borderColor,fontColor:a,lineWidth:r.borderWidth,pointStyle:n,hidden:!e.getDataVisibility(i),index:i}}))}return[]}},onClick:function(e,t,i){i.chart.toggleDataVisibility(t.index),i.chart.update()}}}});var un=function(e){function t(){return(0,u.default)(this,t),(0,a.default)(this,t,arguments)}return(0,s.default)(t,e),(0,h.default)(t,[{key:"initialize",value:function(){this.enableOptionSharing=!0,this.supportsDecimation=!0,(0,r.A)(t,"initialize",this,3)([])}},{key:"update",value:function(e){var t=this._cachedMeta,i=t.dataset,n=t.data,a=void 0===n?[]:n,r=t._dataset,s=this.chart._animationsDisabled,o=$e(t,a,s),l=o.start,c=o.count;this._drawStart=l,this._drawCount=c,Ze(t)&&(l=0,c=a.length),i._chart=this.chart,i._datasetIndex=this.index,i._decimated=!!r._decimated,i.points=a;var d=this.resolveDatasetElementOptions(e);this.options.showLine||(d.borderWidth=0),d.segment=this.options.segment,this.updateElement(i,void 0,{animated:!s,options:d},e),this.updateElements(a,l,c,e)}},{key:"updateElements",value:function(e,t,i,n){for(var a="reset"===n,r=this._cachedMeta,s=r.iScale,o=r.vScale,l=r._stacked,c=r._dataset,d=this._getSharedOptions(t,n),u=d.sharedOptions,h=d.includeOptions,f=s.axis,g=o.axis,p=this.options,m=p.spanGaps,v=p.segment,x=Me(m)?m:Number.POSITIVE_INFINITY,y=this.chart._animationsDisabled||a||"none"===n,b=t+i,A=e.length,_=t>0&&this.getParsed(t-1),k=0;k<A;++k){var j=e[k],w=y?j:{};if(k<t||k>=b)w.skip=!0;else{var S=this.getParsed(k),D=Q(S[g]),P=w[f]=s.getPixelForValue(S[f],k),M=w[g]=a||D?o.getBasePixel():o.getPixelForValue(l?this.applyStack(o,S,l):S[g],k);w.skip=isNaN(P)||isNaN(M)||D,w.stop=k>0&&Math.abs(S[f]-_[f])>x,v&&(w.parsed=S,w.raw=c.data[k]),h&&(w.options=u||this.resolveDataElementOptions(k,j.active?"active":n)),y||this.updateElement(j,k,w,n),_=S}}}},{key:"getMaxOverflow",value:function(){var e=this._cachedMeta,t=e.dataset,i=t.options&&t.options.borderWidth||0,n=e.data||[];if(!n.length)return i;var a=n[0].size(this.resolveDataElementOptions(0)),r=n[n.length-1].size(this.resolveDataElementOptions(n.length-1));return Math.max(i,a,r)/2}},{key:"draw",value:function(){var e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),(0,r.A)(t,"draw",this,3)([])}}])}(Zi);(0,c.default)(un,"id","line"),(0,c.default)(un,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),(0,c.default)(un,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});var hn=function(e){function t(e,i){var n;return(0,u.default)(this,t),(n=(0,a.default)(this,t,[e,i])).innerRadius=void 0,n.outerRadius=void 0,n}return(0,s.default)(t,e),(0,h.default)(t,[{key:"getLabelAndValue",value:function(e){var t=this._cachedMeta,i=this.chart,n=i.data.labels||[],a=ct(t._parsed[e].r,i.options.locale);return{label:n[e]||"",value:a}}},{key:"parseObjectData",value:function(e,t,i,n){return ii.bind(this)(e,t,i,n)}},{key:"update",value:function(e){var t=this._cachedMeta.data;this._updateRadius(),this.updateElements(t,0,t.length,e)}},{key:"getMinMax",value:function(){var e=this,t=this._cachedMeta,i={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return t.data.forEach((function(t,n){var a=e.getParsed(n).r;!isNaN(a)&&e.chart.getDataVisibility(n)&&(a<i.min&&(i.min=a),a>i.max&&(i.max=a))})),i}},{key:"_updateRadius",value:function(){var e=this.chart,t=e.chartArea,i=e.options,n=Math.min(t.right-t.left,t.bottom-t.top),a=Math.max(n/2,0),r=(a-Math.max(i.cutoutPercentage?a/100*i.cutoutPercentage:1,0))/e.getVisibleDatasetCount();this.outerRadius=a-r*this.index,this.innerRadius=this.outerRadius-r}},{key:"updateElements",value:function(e,t,i,n){var a,r="reset"===n,s=this.chart,o=s.options.animation,l=this._cachedMeta.rScale,c=l.xCenter,d=l.yCenter,u=l.getIndexAngle(0)-.5*ve,h=u,f=360/this.countVisibleElements();for(a=0;a<t;++a)h+=this._computeAngle(a,n,f);for(a=t;a<t+i;a++){var g=e[a],p=h,m=h+this._computeAngle(a,n,f),v=s.getDataVisibility(a)?l.getDistanceFromCenterForValue(this.getParsed(a).r):0;h=m,r&&(o.animateScale&&(v=0),o.animateRotate&&(p=m=u));var x={x:c,y:d,innerRadius:0,outerRadius:v,startAngle:p,endAngle:m,options:this.resolveDataElementOptions(a,g.active?"active":n)};this.updateElement(g,a,x,n)}}},{key:"countVisibleElements",value:function(){var e=this,t=this._cachedMeta,i=0;return t.data.forEach((function(t,n){!isNaN(e.getParsed(n).r)&&e.chart.getDataVisibility(n)&&i++})),i}},{key:"_computeAngle",value:function(e,t,i){return this.chart.getDataVisibility(e)?Ce(this.resolveDataElementOptions(e,t).angle||i):0}}])}(Zi);(0,c.default)(hn,"id","polarArea"),(0,c.default)(hn,"defaults",{dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0}),(0,c.default)(hn,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels:function(e){var t=e.data;if(t.labels.length&&t.datasets.length){var i=e.legend.options.labels,n=i.pointStyle,a=i.color;return t.labels.map((function(t,i){var r=e.getDatasetMeta(0).controller.getStyle(i);return{text:t,fillStyle:r.backgroundColor,strokeStyle:r.borderColor,fontColor:a,lineWidth:r.borderWidth,pointStyle:n,hidden:!e.getDataVisibility(i),index:i}}))}return[]}},onClick:function(e,t,i){i.chart.toggleDataVisibility(t.index),i.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}});var fn=function(e){function t(){return(0,u.default)(this,t),(0,a.default)(this,t,arguments)}return(0,s.default)(t,e),(0,h.default)(t)}(dn);(0,c.default)(fn,"id","pie"),(0,c.default)(fn,"defaults",{cutout:0,rotation:0,circumference:360,radius:"100%"});var gn=function(e){function t(){return(0,u.default)(this,t),(0,a.default)(this,t,arguments)}return(0,s.default)(t,e),(0,h.default)(t,[{key:"getLabelAndValue",value:function(e){var t=this._cachedMeta.vScale,i=this.getParsed(e);return{label:t.getLabels()[e],value:""+t.getLabelForValue(i[t.axis])}}},{key:"parseObjectData",value:function(e,t,i,n){return ii.bind(this)(e,t,i,n)}},{key:"update",value:function(e){var t=this._cachedMeta,i=t.dataset,n=t.data||[],a=t.iScale.getLabels();if(i.points=n,"resize"!==e){var r=this.resolveDatasetElementOptions(e);this.options.showLine||(r.borderWidth=0);var s={_loop:!0,_fullLoop:a.length===n.length,options:r};this.updateElement(i,void 0,s,e)}this.updateElements(n,0,n.length,e)}},{key:"updateElements",value:function(e,t,i,n){for(var a=this._cachedMeta.rScale,r="reset"===n,s=t;s<t+i;s++){var o=e[s],l=this.resolveDataElementOptions(s,o.active?"active":n),c=a.getPointPositionForValue(s,this.getParsed(s).r),d=r?a.xCenter:c.x,u=r?a.yCenter:c.y,h={x:d,y:u,angle:c.angle,skip:isNaN(d)||isNaN(u),options:l};this.updateElement(o,s,h,n)}}}])}(Zi);(0,c.default)(gn,"id","radar"),(0,c.default)(gn,"defaults",{datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}}),(0,c.default)(gn,"overrides",{aspectRatio:1,scales:{r:{type:"radialLinear"}}});var pn=function(e){function t(){return(0,u.default)(this,t),(0,a.default)(this,t,arguments)}return(0,s.default)(t,e),(0,h.default)(t,[{key:"getLabelAndValue",value:function(e){var t=this._cachedMeta,i=this.chart.data.labels||[],n=t.xScale,a=t.yScale,r=this.getParsed(e),s=n.getLabelForValue(r.x),o=a.getLabelForValue(r.y);return{label:i[e]||"",value:"("+s+", "+o+")"}}},{key:"update",value:function(e){var t=this._cachedMeta,i=t.data,n=void 0===i?[]:i,a=this.chart._animationsDisabled,r=$e(t,n,a),s=r.start,o=r.count;if(this._drawStart=s,this._drawCount=o,Ze(t)&&(s=0,o=n.length),this.options.showLine){this.datasetElementType||this.addElements();var l=t.dataset,c=t._dataset;l._chart=this.chart,l._datasetIndex=this.index,l._decimated=!!c._decimated,l.points=n;var d=this.resolveDatasetElementOptions(e);d.segment=this.options.segment,this.updateElement(l,void 0,{animated:!a,options:d},e)}else this.datasetElementType&&(delete t.dataset,this.datasetElementType=!1);this.updateElements(n,s,o,e)}},{key:"addElements",value:function(){var e=this.options.showLine;!this.datasetElementType&&e&&(this.datasetElementType=this.chart.registry.getElement("line")),(0,r.A)(t,"addElements",this,3)([])}},{key:"updateElements",value:function(e,t,i,n){for(var a="reset"===n,r=this._cachedMeta,s=r.iScale,o=r.vScale,l=r._stacked,c=r._dataset,d=this.resolveDataElementOptions(t,n),u=this.getSharedOptions(d),h=this.includeOptions(n,u),f=s.axis,g=o.axis,p=this.options,m=p.spanGaps,v=p.segment,x=Me(m)?m:Number.POSITIVE_INFINITY,y=this.chart._animationsDisabled||a||"none"===n,b=t>0&&this.getParsed(t-1),A=t;A<t+i;++A){var _=e[A],k=this.getParsed(A),j=y?_:{},w=Q(k[g]),S=j[f]=s.getPixelForValue(k[f],A),D=j[g]=a||w?o.getBasePixel():o.getPixelForValue(l?this.applyStack(o,k,l):k[g],A);j.skip=isNaN(S)||isNaN(D)||w,j.stop=A>0&&Math.abs(k[f]-b[f])>x,v&&(j.parsed=k,j.raw=c.data[A]),h&&(j.options=u||this.resolveDataElementOptions(A,_.active?"active":n)),y||this.updateElement(_,A,j,n),b=k}this.updateSharedOptions(u,n,d)}},{key:"getMaxOverflow",value:function(){var e=this._cachedMeta,t=e.data||[];if(!this.options.showLine){for(var i=0,n=t.length-1;n>=0;--n)i=Math.max(i,t[n].size(this.resolveDataElementOptions(n))/2);return i>0&&i}var a=e.dataset,r=a.options&&a.options.borderWidth||0;if(!t.length)return r;var s=t[0].size(this.resolveDataElementOptions(0)),o=t[t.length-1].size(this.resolveDataElementOptions(t.length-1));return Math.max(r,s,o)/2}}])}(Zi);(0,c.default)(pn,"id","scatter"),(0,c.default)(pn,"defaults",{datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1}),(0,c.default)(pn,"overrides",{interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}});function mn(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}var vn={_date:function(){function e(t){(0,u.default)(this,e),(0,c.default)(this,"options",void 0),this.options=t||{}}return(0,h.default)(e,[{key:"init",value:function(){}},{key:"formats",value:function(){return mn()}},{key:"parse",value:function(){return mn()}},{key:"format",value:function(){return mn()}},{key:"add",value:function(){return mn()}},{key:"diff",value:function(){return mn()}},{key:"startOf",value:function(){return mn()}},{key:"endOf",value:function(){return mn()}}],[{key:"override",value:function(t){Object.assign(e.prototype,t)}}])}()};function xn(e,t,i,n){var a=e.controller,r=e.data,s=e._sorted,o=a._cachedMeta.iScale;if(o&&t===o.axis&&"r"!==t&&s&&r.length){var l=o._reversePixels?Ve:Ye;if(!n)return l(r,t,i);if(a._sharedOptions){var c=r[0],d="function"===typeof c.getRange&&c.getRange(t);if(d){var u=l(r,t,i-d),h=l(r,t,i+d);return{lo:u.lo,hi:h.hi}}}}return{lo:0,hi:r.length-1}}function yn(e,t,i,n,a){for(var r=e.getSortedVisibleDatasetMetas(),s=i[t],o=0,l=r.length;o<l;++o)for(var c=r[o],d=c.index,u=c.data,h=xn(r[o],t,s,a),f=h.lo,g=h.hi,p=f;p<=g;++p){var m=u[p];m.skip||n(m,d,p)}}function bn(e,t,i,n,a){var r=[];if(!a&&!e.isPointInArea(t))return r;return yn(e,i,t,(function(i,s,o){(a||jt(i,e.chartArea,0))&&i.inRange(t.x,t.y,n)&&r.push({element:i,datasetIndex:s,index:o})}),!0),r}function An(e,t,i,n,a,r){var s=[],o=function(e){var t=-1!==e.indexOf("x"),i=-1!==e.indexOf("y");return function(e,n){var a=t?Math.abs(e.x-n.x):0,r=i?Math.abs(e.y-n.y):0;return Math.sqrt(Math.pow(a,2)+Math.pow(r,2))}}(i),l=Number.POSITIVE_INFINITY;return yn(e,i,t,(function(i,c,d){var u=i.inRange(t.x,t.y,a);if(!n||u){var h=i.getCenterPoint(a);if(!!r||e.isPointInArea(h)||u){var f=o(t,h);f<l?(s=[{element:i,datasetIndex:c,index:d}],l=f):f===l&&s.push({element:i,datasetIndex:c,index:d})}}})),s}function _n(e,t,i,n,a,r){return r||e.isPointInArea(t)?"r"!==i||n?An(e,t,i,n,a,r):function(e,t,i,n){var a=[];return yn(e,i,t,(function(e,i,r){var s=e.getProps(["startAngle","endAngle"],n),o=s.startAngle,l=s.endAngle;Fe(Le(e,{x:t.x,y:t.y}).angle,o,l)&&a.push({element:e,datasetIndex:i,index:r})})),a}(e,t,i,a):[]}function kn(e,t,i,n,a){var r=[],s="x"===i?"inXRange":"inYRange",o=!1;return yn(e,i,t,(function(e,n,l){e[s]&&e[s](t[i],a)&&(r.push({element:e,datasetIndex:n,index:l}),o=o||e.inRange(t.x,t.y,a))})),n&&!o?[]:r}var jn={evaluateInteractionItems:yn,modes:{index:function(e,t,i,n){var a=mi(t,e),r=i.axis||"x",s=i.includeInvisible||!1,o=i.intersect?bn(e,a,r,n,s):_n(e,a,r,!1,n,s),l=[];return o.length?(e.getSortedVisibleDatasetMetas().forEach((function(e){var t=o[0].index,i=e.data[t];i&&!i.skip&&l.push({element:i,datasetIndex:e.index,index:t})})),l):[]},dataset:function(e,t,i,n){var a=mi(t,e),r=i.axis||"xy",s=i.includeInvisible||!1,o=i.intersect?bn(e,a,r,n,s):_n(e,a,r,!1,n,s);if(o.length>0){var l=o[0].datasetIndex,c=e.getDatasetMeta(l).data;o=[];for(var d=0;d<c.length;++d)o.push({element:c[d],datasetIndex:l,index:d})}return o},point:function(e,t,i,n){return bn(e,mi(t,e),i.axis||"xy",n,i.includeInvisible||!1)},nearest:function(e,t,i,n){var a=mi(t,e),r=i.axis||"xy",s=i.includeInvisible||!1;return _n(e,a,r,i.intersect,n,s)},x:function(e,t,i,n){return kn(e,mi(t,e),"x",i.intersect,n)},y:function(e,t,i,n){return kn(e,mi(t,e),"y",i.intersect,n)}}},wn=["left","top","right","bottom"];function Sn(e,t){return e.filter((function(e){return e.pos===t}))}function Dn(e,t){return e.filter((function(e){return-1===wn.indexOf(e.pos)&&e.box.axis===t}))}function Pn(e,t){return e.sort((function(e,i){var n=t?i:e,a=t?e:i;return n.weight===a.weight?n.index-a.index:n.weight-a.weight}))}function Mn(e,t){var i,n,a,r=function(e){var t,i={},n=(0,l.default)(e);try{for(n.s();!(t=n.n()).done;){var a=t.value,r=a.stack,s=a.pos,o=a.stackWeight;if(r&&wn.includes(s)){var c=i[r]||(i[r]={count:0,placed:0,weight:0,size:0});c.count++,c.weight+=o}}}catch(d){n.e(d)}finally{n.f()}return i}(e),s=t.vBoxMaxWidth,o=t.hBoxMaxHeight;for(i=0,n=e.length;i<n;++i){var c=(a=e[i]).box.fullSize,d=r[a.stack],u=d&&a.stackWeight/d.weight;a.horizontal?(a.width=u?u*s:c&&t.availableWidth,a.height=o):(a.width=s,a.height=u?u*o:c&&t.availableHeight)}return r}function Nn(e,t,i,n){return Math.max(e[i],t[i])+Math.max(e[n],t[n])}function Cn(e,t){e.top=Math.max(e.top,t.top),e.left=Math.max(e.left,t.left),e.bottom=Math.max(e.bottom,t.bottom),e.right=Math.max(e.right,t.right)}function In(e,t,i,n){var a=i.pos,r=i.box,s=e.maxPadding;if(!K(a)){i.size&&(e[a]-=i.size);var o=n[i.stack]||{size:0,count:1};o.size=Math.max(o.size,i.horizontal?r.height:r.width),i.size=o.size/o.count,e[a]+=i.size}r.getPadding&&Cn(s,r.getPadding());var l=Math.max(0,t.outerWidth-Nn(s,e,"left","right")),c=Math.max(0,t.outerHeight-Nn(s,e,"top","bottom")),d=l!==e.w,u=c!==e.h;return e.w=l,e.h=c,i.horizontal?{same:d,other:u}:{same:u,other:d}}function On(e,t){var i=t.maxPadding;function n(e){var n={left:0,top:0,right:0,bottom:0};return e.forEach((function(e){n[e]=Math.max(t[e],i[e])})),n}return n(e?["left","right"]:["top","bottom"])}function Ln(e,t,i,n){var a,r,s,o,l,c,d=[];for(a=0,r=e.length,l=0;a<r;++a){(o=(s=e[a]).box).update(s.width||t.w,s.height||t.h,On(s.horizontal,t));var u=In(t,i,s,n),h=u.same,f=u.other;l|=h&&d.length,c=c||f,o.fullSize||d.push(s)}return l&&Ln(d,t,i,n)||c}function Tn(e,t,i,n,a){e.top=i,e.left=t,e.right=t+n,e.bottom=i+a,e.width=n,e.height=a}function Rn(e,t,i,n){var a,r=i.padding,s=t.x,o=t.y,c=(0,l.default)(e);try{for(c.s();!(a=c.n()).done;){var d=a.value,u=d.box,h=n[d.stack]||{count:1,placed:0,weight:1},f=d.stackWeight/h.weight||1;if(d.horizontal){var g=t.w*f,p=h.size||u.height;ge(h.start)&&(o=h.start),u.fullSize?Tn(u,r.left,o,i.outerWidth-r.right-r.left,p):Tn(u,t.left+h.placed,o,g,p),h.start=o,h.placed+=g,o=u.bottom}else{var m=t.h*f,v=h.size||u.width;ge(h.start)&&(s=h.start),u.fullSize?Tn(u,s,r.top,v,i.outerHeight-r.bottom-r.top):Tn(u,s,t.top+h.placed,v,m),h.start=s,h.placed+=m,s=u.right}}}catch(x){c.e(x)}finally{c.f()}t.x=s,t.y=o}var En=function(e,t){e.boxes||(e.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw:function(e){t.draw(e)}}]},e.boxes.push(t)},Fn=function(e,t){var i=e.boxes?e.boxes.indexOf(t):-1;-1!==i&&e.boxes.splice(i,1)},zn=function(e,t,i){t.fullSize=i.fullSize,t.position=i.position,t.weight=i.weight},Un=function(e,t,i,n){if(e){var a=zt(e.options.layout.padding),r=Math.max(t-a.width,0),s=Math.max(i-a.height,0),o=function(e){var t=function(e){var t,i,n,a,r,s,o=[];for(t=0,i=(e||[]).length;t<i;++t){var l=n=e[t];a=l.position;var c=l.options;r=c.stack;var d=c.stackWeight;s=void 0===d?1:d,o.push({index:t,box:n,pos:a,horizontal:n.isHorizontal(),weight:n.weight,stack:r&&a+r,stackWeight:s})}return o}(e),i=Pn(t.filter((function(e){return e.box.fullSize})),!0),n=Pn(Sn(t,"left"),!0),a=Pn(Sn(t,"right")),r=Pn(Sn(t,"top"),!0),s=Pn(Sn(t,"bottom")),o=Dn(t,"x"),l=Dn(t,"y");return{fullSize:i,leftAndTop:n.concat(r),rightAndBottom:a.concat(l).concat(s).concat(o),chartArea:Sn(t,"chartArea"),vertical:n.concat(a).concat(l),horizontal:r.concat(s).concat(o)}}(e.boxes),l=o.vertical,c=o.horizontal;ie(e.boxes,(function(e){"function"===typeof e.beforeLayout&&e.beforeLayout()}));var d=l.reduce((function(e,t){return t.box.options&&!1===t.box.options.display?e:e+1}),0)||1,u=Object.freeze({outerWidth:t,outerHeight:i,padding:a,availableWidth:r,availableHeight:s,vBoxMaxWidth:r/2/d,hBoxMaxHeight:s/2}),h=Object.assign({},a);Cn(h,zt(n));var f=Object.assign({maxPadding:h,w:r,h:s,x:a.left,y:a.top},a),g=Mn(l.concat(c),u);Ln(o.fullSize,f,u,g),Ln(l,f,u,g),Ln(c,f,u,g)&&Ln(l,f,u,g),function(e){var t=e.maxPadding;function i(i){var n=Math.max(t[i]-e[i],0);return e[i]+=n,n}e.y+=i("top"),e.x+=i("left"),i("right"),i("bottom")}(f),Rn(o.leftAndTop,f,u,g),f.x+=f.w,f.y+=f.h,Rn(o.rightAndBottom,f,u,g),e.chartArea={left:f.left,top:f.top,right:f.left+f.w,bottom:f.top+f.h,height:f.h,width:f.w},ie(o.chartArea,(function(t){var i=t.box;Object.assign(i,e.chartArea),i.update(f.w,f.h,{left:0,top:0,right:0,bottom:0})}))}},Bn=function(){return(0,h.default)((function e(){(0,u.default)(this,e)}),[{key:"acquireContext",value:function(e,t){}},{key:"releaseContext",value:function(e){return!1}},{key:"addEventListener",value:function(e,t,i){}},{key:"removeEventListener",value:function(e,t,i){}},{key:"getDevicePixelRatio",value:function(){return 1}},{key:"getMaximumSize",value:function(e,t,i,n){return t=Math.max(0,t||e.width),i=i||e.height,{width:t,height:Math.max(0,n?Math.floor(t/n):i)}}},{key:"isAttached",value:function(e){return!0}},{key:"updateConfig",value:function(e){}}])}(),Yn=function(e){function t(){return(0,u.default)(this,t),(0,a.default)(this,t,arguments)}return(0,s.default)(t,e),(0,h.default)(t,[{key:"acquireContext",value:function(e){return e&&e.getContext&&e.getContext("2d")||null}},{key:"updateConfig",value:function(e){e.options.animation=!1}}])}(Bn),Vn="$chartjs",qn={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},Hn=function(e){return null===e||""===e};var Wn=!!bi&&{passive:!0};function Gn(e,t,i){e&&e.canvas&&e.canvas.removeEventListener(t,i,Wn)}function Qn(e,t){var i,n=(0,l.default)(e);try{for(n.s();!(i=n.n()).done;){var a=i.value;if(a===t||a.contains(t))return!0}}catch(r){n.e(r)}finally{n.f()}}function Xn(e,t,i){var n=e.canvas,a=new MutationObserver((function(e){var t,a=!1,r=(0,l.default)(e);try{for(r.s();!(t=r.n()).done;){var s=t.value;a=(a=a||Qn(s.addedNodes,n))&&!Qn(s.removedNodes,n)}}catch(o){r.e(o)}finally{r.f()}a&&i()}));return a.observe(document,{childList:!0,subtree:!0}),a}function Kn(e,t,i){var n=e.canvas,a=new MutationObserver((function(e){var t,a=!1,r=(0,l.default)(e);try{for(r.s();!(t=r.n()).done;){var s=t.value;a=(a=a||Qn(s.removedNodes,n))&&!Qn(s.addedNodes,n)}}catch(o){r.e(o)}finally{r.f()}a&&i()}));return a.observe(document,{childList:!0,subtree:!0}),a}var $n=new Map,Zn=0;function Jn(){var e=window.devicePixelRatio;e!==Zn&&(Zn=e,$n.forEach((function(t,i){i.currentDevicePixelRatio!==e&&t()})))}function ea(e,t,i){var n=e.canvas,a=n&&ui(n);if(a){var r=Qe((function(e,t){var n=a.clientWidth;i(e,t),n<a.clientWidth&&i()}),window),s=new ResizeObserver((function(e){var t=e[0],i=t.contentRect.width,n=t.contentRect.height;0===i&&0===n||r(i,n)}));return s.observe(a),function(e,t){$n.size||window.addEventListener("resize",Jn),$n.set(e,t)}(e,r),s}}function ta(e,t,i){i&&i.disconnect(),"resize"===t&&function(e){$n.delete(e),$n.size||window.removeEventListener("resize",Jn)}(e)}function ia(e,t,i){var n=e.canvas,a=Qe((function(t){null!==e.ctx&&i(function(e,t){var i=qn[e.type]||e.type,n=mi(e,t),a=n.x,r=n.y;return{type:i,chart:t,native:e,x:void 0!==a?a:null,y:void 0!==r?r:null}}(t,e))}),e);return function(e,t,i){e&&e.addEventListener(t,i,Wn)}(n,t,a),a}var na=function(e){function t(){return(0,u.default)(this,t),(0,a.default)(this,t,arguments)}return(0,s.default)(t,e),(0,h.default)(t,[{key:"acquireContext",value:function(e,t){var i=e&&e.getContext&&e.getContext("2d");return i&&i.canvas===e?(function(e,t){var i=e.style,n=e.getAttribute("height"),a=e.getAttribute("width");if(e[Vn]={initial:{height:n,width:a,style:{display:i.display,height:i.height,width:i.width}}},i.display=i.display||"block",i.boxSizing=i.boxSizing||"border-box",Hn(a)){var r=Ai(e,"width");void 0!==r&&(e.width=r)}if(Hn(n))if(""===e.style.height)e.height=e.width/(t||2);else{var s=Ai(e,"height");void 0!==s&&(e.height=s)}}(e,t),i):null}},{key:"releaseContext",value:function(e){var t=e.canvas;if(!t[Vn])return!1;var i=t[Vn].initial;["height","width"].forEach((function(e){var n=i[e];Q(n)?t.removeAttribute(e):t.setAttribute(e,n)}));var n=i.style||{};return Object.keys(n).forEach((function(e){t.style[e]=n[e]})),t.width=t.width,delete t[Vn],!0}},{key:"addEventListener",value:function(e,t,i){this.removeEventListener(e,t);var n=e.$proxies||(e.$proxies={}),a={attach:Xn,detach:Kn,resize:ea}[t]||ia;n[t]=a(e,t,i)}},{key:"removeEventListener",value:function(e,t){var i=e.$proxies||(e.$proxies={}),n=i[t];n&&(({attach:ta,detach:ta,resize:ta}[t]||Gn)(e,t,n),i[t]=void 0)}},{key:"getDevicePixelRatio",value:function(){return window.devicePixelRatio}},{key:"getMaximumSize",value:function(e,t,i,n){return xi(e,t,i,n)}},{key:"isAttached",value:function(e){var t=e&&ui(e);return!(!t||!t.isConnected)}}])}(Bn);var aa=function(){return(0,h.default)((function e(){(0,u.default)(this,e),(0,c.default)(this,"x",void 0),(0,c.default)(this,"y",void 0),(0,c.default)(this,"active",!1),(0,c.default)(this,"options",void 0),(0,c.default)(this,"$animations",void 0)}),[{key:"tooltipPosition",value:function(e){var t=this.getProps(["x","y"],e);return{x:t.x,y:t.y}}},{key:"hasValue",value:function(){return Me(this.x)&&Me(this.y)}},{key:"getProps",value:function(e,t){var i=this,n=this.$animations;if(!t||!n)return this;var a={};return e.forEach((function(e){a[e]=n[e]&&n[e].active()?n[e]._to:i[e]})),a}}])}();function ra(e,t){var i=e.options.ticks,n=function(e){var t=e.options.offset,i=e._tickSize(),n=e._length/i+(t?0:1),a=e._maxLength/i;return Math.floor(Math.min(n,a))}(e),a=Math.min(i.maxTicksLimit||n,n),r=i.major.enabled?function(e){var t,i,n=[];for(t=0,i=e.length;t<i;t++)e[t].major&&n.push(t);return n}(t):[],s=r.length,o=r[0],l=r[s-1],c=[];if(s>a)return function(e,t,i,n){var a,r=0,s=i[0];for(n=Math.ceil(n),a=0;a<e.length;a++)a===s&&(t.push(e[a]),s=i[++r*n])}(t,c,r,s/a),c;var d=function(e,t,i){var n=function(e){var t,i,n=e.length;if(n<2)return!1;for(i=e[0],t=1;t<n;++t)if(e[t]-e[t-1]!==i)return!1;return i}(e),a=t.length/i;if(!n)return Math.max(a,1);for(var r=function(e){var t,i=[],n=Math.sqrt(e);for(t=1;t<n;t++)e%t===0&&(i.push(t),i.push(e/t));return n===(0|n)&&i.push(n),i.sort((function(e,t){return e-t})).pop(),i}(n),s=0,o=r.length-1;s<o;s++){var l=r[s];if(l>a)return l}return Math.max(a,1)}(r,t,a);if(s>0){var u,h,f=s>1?Math.round((l-o)/(s-1)):null;for(sa(t,c,d,Q(f)?0:o-f,o),u=0,h=s-1;u<h;u++)sa(t,c,d,r[u],r[u+1]);return sa(t,c,d,l,Q(f)?t.length:l+f),c}return sa(t,c,d),c}function sa(e,t,i,n,a){var r,s,o,l=J(n,0),c=Math.min(J(a,e.length),e.length),d=0;for(i=Math.ceil(i),a&&(i=(r=a-n)/Math.floor(r/i)),o=l;o<0;)d++,o=Math.round(l+d*i);for(s=Math.max(l,0);s<c;s++)s===o&&(t.push(e[s]),d++,o=Math.round(l+d*i))}(0,c.default)(aa,"defaults",{}),(0,c.default)(aa,"defaultRoutes",void 0);var oa=function(e,t,i){return"top"===t||"left"===t?e[t]+i:e[t]-i},la=function(e,t){return Math.min(t||e,e)};function ca(e,t){for(var i=[],n=e.length/t,a=e.length,r=0;r<a;r+=n)i.push(e[Math.floor(r)]);return i}function da(e,t,i){var n,a=e.ticks.length,r=Math.min(t,a-1),s=e._startPixel,o=e._endPixel,l=1e-6,c=e.getPixelForTick(r);if(!(i&&(n=1===a?Math.max(c-s,o-c):0===t?(e.getPixelForTick(1)-c)/2:(c-e.getPixelForTick(r-1))/2,(c+=r<t?n:-n)<s-l||c>o+l)))return c}function ua(e){return e.drawTicks?e.tickLength:0}function ha(e,t){if(!e.display)return 0;var i=Ut(e.font,t),n=zt(e.padding);return(X(e.text)?e.text.length:1)*i.lineHeight+n.height}function fa(e,t,i){var n=Xe(e);return(i&&"right"!==t||!i&&"right"===t)&&(n=function(e){return"left"===e?"right":"right"===e?"left":e}(n)),n}var ga=function(e){function t(e){var i;return(0,u.default)(this,t),(i=(0,a.default)(this,t)).id=e.id,i.type=e.type,i.options=void 0,i.ctx=e.ctx,i.chart=e.chart,i.top=void 0,i.bottom=void 0,i.left=void 0,i.right=void 0,i.width=void 0,i.height=void 0,i._margins={left:0,right:0,top:0,bottom:0},i.maxWidth=void 0,i.maxHeight=void 0,i.paddingTop=void 0,i.paddingBottom=void 0,i.paddingLeft=void 0,i.paddingRight=void 0,i.axis=void 0,i.labelRotation=void 0,i.min=void 0,i.max=void 0,i._range=void 0,i.ticks=[],i._gridLineItems=null,i._labelItems=null,i._labelSizes=null,i._length=0,i._maxLength=0,i._longestTextCache={},i._startPixel=void 0,i._endPixel=void 0,i._reversePixels=!1,i._userMax=void 0,i._userMin=void 0,i._suggestedMax=void 0,i._suggestedMin=void 0,i._ticksLength=0,i._borderValue=0,i._cache={},i._dataLimitsCached=!1,i.$context=void 0,i}return(0,s.default)(t,e),(0,h.default)(t,[{key:"init",value:function(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}},{key:"parse",value:function(e,t){return e}},{key:"getUserBounds",value:function(){var e=this._userMin,t=this._userMax,i=this._suggestedMin,n=this._suggestedMax;return e=Z(e,Number.POSITIVE_INFINITY),t=Z(t,Number.NEGATIVE_INFINITY),i=Z(i,Number.POSITIVE_INFINITY),n=Z(n,Number.NEGATIVE_INFINITY),{min:Z(e,i),max:Z(t,n),minDefined:$(e),maxDefined:$(t)}}},{key:"getMinMax",value:function(e){var t,i=this.getUserBounds(),n=i.min,a=i.max,r=i.minDefined,s=i.maxDefined;if(r&&s)return{min:n,max:a};for(var o=this.getMatchingVisibleMetas(),l=0,c=o.length;l<c;++l)t=o[l].controller.getMinMax(this,e),r||(n=Math.min(n,t.min)),s||(a=Math.max(a,t.max));return{min:Z(n=s&&n>a?a:n,Z(a=r&&n>a?n:a,n)),max:Z(a,Z(n,a))}}},{key:"getPadding",value:function(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}},{key:"getTicks",value:function(){return this.ticks}},{key:"getLabels",value:function(){var e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}},{key:"getLabelItems",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.chart.chartArea;return this._labelItems||(this._labelItems=this._computeLabelItems(e))}},{key:"beforeLayout",value:function(){this._cache={},this._dataLimitsCached=!1}},{key:"beforeUpdate",value:function(){te(this.options.beforeUpdate,[this])}},{key:"update",value:function(e,t,i){var n=this.options,a=n.beginAtZero,r=n.grace,s=n.ticks,o=s.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=t,this._margins=i=Object.assign({left:0,right:0,top:0,bottom:0},i),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+i.left+i.right:this.height+i.top+i.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=function(e,t,i){var n=e.min,a=e.max,r=ee(t,(a-n)/2),s=function(e,t){return i&&0===e?0:e+t};return{min:s(n,-Math.abs(r)),max:s(a,r)}}(this,r,a),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();var l=o<this.ticks.length;this._convertTicksToLabels(l?ca(this.ticks,o):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),s.display&&(s.autoSkip||"auto"===s.source)&&(this.ticks=ra(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}},{key:"configure",value:function(){var e,t,i=this.options.reverse;this.isHorizontal()?(e=this.left,t=this.right):(e=this.top,t=this.bottom,i=!i),this._startPixel=e,this._endPixel=t,this._reversePixels=i,this._length=t-e,this._alignToPixels=this.options.alignToPixels}},{key:"afterUpdate",value:function(){te(this.options.afterUpdate,[this])}},{key:"beforeSetDimensions",value:function(){te(this.options.beforeSetDimensions,[this])}},{key:"setDimensions",value:function(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}},{key:"afterSetDimensions",value:function(){te(this.options.afterSetDimensions,[this])}},{key:"_callHooks",value:function(e){this.chart.notifyPlugins(e,this.getContext()),te(this.options[e],[this])}},{key:"beforeDataLimits",value:function(){this._callHooks("beforeDataLimits")}},{key:"determineDataLimits",value:function(){}},{key:"afterDataLimits",value:function(){this._callHooks("afterDataLimits")}},{key:"beforeBuildTicks",value:function(){this._callHooks("beforeBuildTicks")}},{key:"buildTicks",value:function(){return[]}},{key:"afterBuildTicks",value:function(){this._callHooks("afterBuildTicks")}},{key:"beforeTickToLabelConversion",value:function(){te(this.options.beforeTickToLabelConversion,[this])}},{key:"generateTickLabels",value:function(e){var t,i,n,a=this.options.ticks;for(t=0,i=e.length;t<i;t++)(n=e[t]).label=te(a.callback,[n.value,t,e],this)}},{key:"afterTickToLabelConversion",value:function(){te(this.options.afterTickToLabelConversion,[this])}},{key:"beforeCalculateLabelRotation",value:function(){te(this.options.beforeCalculateLabelRotation,[this])}},{key:"calculateLabelRotation",value:function(){var e,t,i,n=this.options,a=n.ticks,r=la(this.ticks.length,n.ticks.maxTicksLimit),s=a.minRotation||0,o=a.maxRotation,l=s;if(!this._isVisible()||!a.display||s>=o||r<=1||!this.isHorizontal())this.labelRotation=s;else{var c=this._getLabelSizes(),d=c.widest.width,u=c.highest.height,h=ze(this.chart.width-d,0,this.maxWidth);d+6>(e=n.offset?this.maxWidth/r:h/(r-1))&&(e=h/(r-(n.offset?.5:1)),t=this.maxHeight-ua(n.grid)-a.padding-ha(n.title,this.chart.options.font),i=Math.sqrt(d*d+u*u),l=Ie(Math.min(Math.asin(ze((c.highest.height+6)/e,-1,1)),Math.asin(ze(t/i,-1,1))-Math.asin(ze(u/i,-1,1)))),l=Math.max(s,Math.min(o,l))),this.labelRotation=l}}},{key:"afterCalculateLabelRotation",value:function(){te(this.options.afterCalculateLabelRotation,[this])}},{key:"afterAutoSkip",value:function(){}},{key:"beforeFit",value:function(){te(this.options.beforeFit,[this])}},{key:"fit",value:function(){var e={width:0,height:0},t=this.chart,i=this.options,n=i.ticks,a=i.title,r=i.grid,s=this._isVisible(),o=this.isHorizontal();if(s){var l=ha(a,t.options.font);if(o?(e.width=this.maxWidth,e.height=ua(r)+l):(e.height=this.maxHeight,e.width=ua(r)+l),n.display&&this.ticks.length){var c=this._getLabelSizes(),d=c.first,u=c.last,h=c.widest,f=c.highest,g=2*n.padding,p=Ce(this.labelRotation),m=Math.cos(p),v=Math.sin(p);if(o){var x=n.mirror?0:v*h.width+m*f.height;e.height=Math.min(this.maxHeight,e.height+x+g)}else{var y=n.mirror?0:m*h.width+v*f.height;e.width=Math.min(this.maxWidth,e.width+y+g)}this._calculatePadding(d,u,v,m)}}this._handleMargins(),o?(this.width=this._length=t.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=t.height-this._margins.top-this._margins.bottom)}},{key:"_calculatePadding",value:function(e,t,i,n){var a=this.options,r=a.ticks,s=r.align,o=r.padding,l=a.position,c=0!==this.labelRotation,d="top"!==l&&"x"===this.axis;if(this.isHorizontal()){var u=this.getPixelForTick(0)-this.left,h=this.right-this.getPixelForTick(this.ticks.length-1),f=0,g=0;c?d?(f=n*e.width,g=i*t.height):(f=i*e.height,g=n*t.width):"start"===s?g=t.width:"end"===s?f=e.width:"inner"!==s&&(f=e.width/2,g=t.width/2),this.paddingLeft=Math.max((f-u+o)*this.width/(this.width-u),0),this.paddingRight=Math.max((g-h+o)*this.width/(this.width-h),0)}else{var p=t.height/2,m=e.height/2;"start"===s?(p=0,m=e.height):"end"===s&&(p=t.height,m=0),this.paddingTop=p+o,this.paddingBottom=m+o}}},{key:"_handleMargins",value:function(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}},{key:"afterFit",value:function(){te(this.options.afterFit,[this])}},{key:"isHorizontal",value:function(){var e=this.options,t=e.axis,i=e.position;return"top"===i||"bottom"===i||"x"===t}},{key:"isFullSize",value:function(){return this.options.fullSize}},{key:"_convertTicksToLabels",value:function(e){var t,i;for(this.beforeTickToLabelConversion(),this.generateTickLabels(e),t=0,i=e.length;t<i;t++)Q(e[t].label)&&(e.splice(t,1),i--,t--);this.afterTickToLabelConversion()}},{key:"_getLabelSizes",value:function(){var e=this._labelSizes;if(!e){var t=this.options.ticks.sampleSize,i=this.ticks;t<i.length&&(i=ca(i,t)),this._labelSizes=e=this._computeLabelSizes(i,i.length,this.options.ticks.maxTicksLimit)}return e}},{key:"_computeLabelSizes",value:function(e,t,i){var n,a,r,s,o,l,c,d,u,h,f,g=this.ctx,p=this._longestTextCache,m=[],v=[],x=Math.floor(t/la(t,i)),y=0,b=0;for(n=0;n<t;n+=x){if(s=e[n].label,o=this._resolveTickFontOptions(n),g.font=l=o.string,c=p[l]=p[l]||{data:{},gc:[]},d=o.lineHeight,u=h=0,Q(s)||X(s)){if(X(s))for(a=0,r=s.length;a<r;++a)Q(f=s[a])||X(f)||(u=xt(g,c.data,c.gc,u,f),h+=d)}else u=xt(g,c.data,c.gc,u,s),h=d;m.push(u),v.push(h),y=Math.max(u,y),b=Math.max(h,b)}!function(e,t){ie(e,(function(e){var i,n=e.gc,a=n.length/2;if(a>t){for(i=0;i<a;++i)delete e.data[n[i]];n.splice(0,a)}}))}(p,t);var A=m.indexOf(y),_=v.indexOf(b),k=function(e){return{width:m[e]||0,height:v[e]||0}};return{first:k(0),last:k(t-1),widest:k(A),highest:k(_),widths:m,heights:v}}},{key:"getLabelForValue",value:function(e){return e}},{key:"getPixelForValue",value:function(e,t){return NaN}},{key:"getValueForPixel",value:function(e){}},{key:"getPixelForTick",value:function(e){var t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}},{key:"getPixelForDecimal",value:function(e){this._reversePixels&&(e=1-e);var t=this._startPixel+e*this._length;return ze(this._alignToPixels?bt(this.chart,t,0):t,-32768,32767)}},{key:"getDecimalForPixel",value:function(e){var t=(e-this._startPixel)/this._length;return this._reversePixels?1-t:t}},{key:"getBasePixel",value:function(){return this.getPixelForValue(this.getBaseValue())}},{key:"getBaseValue",value:function(){var e=this.min,t=this.max;return e<0&&t<0?t:e>0&&t>0?e:0}},{key:"getContext",value:function(e){var t=this.ticks||[];if(e>=0&&e<t.length){var i=t[e];return i.$context||(i.$context=function(e,t,i){return Yt(e,{tick:i,index:t,type:"tick"})}(this.getContext(),e,i))}return this.$context||(this.$context=Yt(this.chart.getContext(),{scale:this,type:"scale"}))}},{key:"_tickSize",value:function(){var e=this.options.ticks,t=Ce(this.labelRotation),i=Math.abs(Math.cos(t)),n=Math.abs(Math.sin(t)),a=this._getLabelSizes(),r=e.autoSkipPadding||0,s=a?a.widest.width+r:0,o=a?a.highest.height+r:0;return this.isHorizontal()?o*i>s*n?s/i:o/n:o*n<s*i?o/i:s/n}},{key:"_isVisible",value:function(){var e=this.options.display;return"auto"!==e?!!e:this.getMatchingVisibleMetas().length>0}},{key:"_computeGridLineItems",value:function(e){var t,i,n,a,r,s,o,l,c,d,u,h,f=this.axis,g=this.chart,p=this.options,m=p.grid,v=p.position,x=p.border,y=m.offset,b=this.isHorizontal(),A=this.ticks.length+(y?1:0),_=ua(m),k=[],j=x.setContext(this.getContext()),w=j.display?j.width:0,S=w/2,D=function(e){return bt(g,e,w)};if("top"===v)t=D(this.bottom),s=this.bottom-_,l=t-S,d=D(e.top)+S,h=e.bottom;else if("bottom"===v)t=D(this.top),d=e.top,h=D(e.bottom)-S,s=t+S,l=this.top+_;else if("left"===v)t=D(this.right),r=this.right-_,o=t-S,c=D(e.left)+S,u=e.right;else if("right"===v)t=D(this.left),c=e.left,u=D(e.right)-S,r=t+S,o=this.left+_;else if("x"===f){if("center"===v)t=D((e.top+e.bottom)/2+.5);else if(K(v)){var P=Object.keys(v)[0],M=v[P];t=D(this.chart.scales[P].getPixelForValue(M))}d=e.top,h=e.bottom,l=(s=t+S)+_}else if("y"===f){if("center"===v)t=D((e.left+e.right)/2);else if(K(v)){var N=Object.keys(v)[0],C=v[N];t=D(this.chart.scales[N].getPixelForValue(C))}o=(r=t-S)-_,c=e.left,u=e.right}var I=J(p.ticks.maxTicksLimit,A),O=Math.max(1,Math.ceil(A/I));for(i=0;i<A;i+=O){var L=this.getContext(i),T=m.setContext(L),R=x.setContext(L),E=T.lineWidth,F=T.color,z=R.dash||[],U=R.dashOffset,B=T.tickWidth,Y=T.tickColor,V=T.tickBorderDash||[],q=T.tickBorderDashOffset;void 0!==(n=da(this,i,y))&&(a=bt(g,n,E),b?r=o=c=u=a:s=l=d=h=a,k.push({tx1:r,ty1:s,tx2:o,ty2:l,x1:c,y1:d,x2:u,y2:h,width:E,color:F,borderDash:z,borderDashOffset:U,tickWidth:B,tickColor:Y,tickBorderDash:V,tickBorderDashOffset:q}))}return this._ticksLength=A,this._borderValue=t,k}},{key:"_computeLabelItems",value:function(e){var t,i,n,a,r,s,o,l,c,d,u,h=this.axis,f=this.options,g=f.position,p=f.ticks,m=this.isHorizontal(),v=this.ticks,x=p.align,y=p.crossAlign,b=p.padding,A=p.mirror,_=ua(f.grid),k=_+b,j=A?-b:k,w=-Ce(this.labelRotation),S=[],D="middle";if("top"===g)r=this.bottom-j,s=this._getXAxisLabelAlignment();else if("bottom"===g)r=this.top+j,s=this._getXAxisLabelAlignment();else if("left"===g){var P=this._getYAxisLabelAlignment(_);s=P.textAlign,a=P.x}else if("right"===g){var M=this._getYAxisLabelAlignment(_);s=M.textAlign,a=M.x}else if("x"===h){if("center"===g)r=(e.top+e.bottom)/2+k;else if(K(g)){var N=Object.keys(g)[0],C=g[N];r=this.chart.scales[N].getPixelForValue(C)+k}s=this._getXAxisLabelAlignment()}else if("y"===h){if("center"===g)a=(e.left+e.right)/2-k;else if(K(g)){var I=Object.keys(g)[0],O=g[I];a=this.chart.scales[I].getPixelForValue(O)}s=this._getYAxisLabelAlignment(_).textAlign}"y"===h&&("start"===x?D="top":"end"===x&&(D="bottom"));var L=this._getLabelSizes();for(t=0,i=v.length;t<i;++t){n=v[t].label;var T=p.setContext(this.getContext(t));o=this.getPixelForTick(t)+p.labelOffset,c=(l=this._resolveTickFontOptions(t)).lineHeight;var R=(d=X(n)?n.length:1)/2,E=T.color,F=T.textStrokeColor,z=T.textStrokeWidth,U=s;m?(a=o,"inner"===s&&(U=t===i-1?this.options.reverse?"left":"right":0===t?this.options.reverse?"right":"left":"center"),u="top"===g?"near"===y||0!==w?-d*c+c/2:"center"===y?-L.highest.height/2-R*c+c:-L.highest.height+c/2:"near"===y||0!==w?c/2:"center"===y?L.highest.height/2-R*c:L.highest.height-d*c,A&&(u*=-1),0===w||T.showLabelBackdrop||(a+=c/2*Math.sin(w))):(r=o,u=(1-d)*c/2);var B=void 0;if(T.showLabelBackdrop){var Y=zt(T.backdropPadding),V=L.heights[t],q=L.widths[t],H=u-Y.top,W=0-Y.left;switch(D){case"middle":H-=V/2;break;case"bottom":H-=V}switch(s){case"center":W-=q/2;break;case"right":W-=q;break;case"inner":t===i-1?W-=q:t>0&&(W-=q/2)}B={left:W,top:H,width:q+Y.width,height:V+Y.height,color:T.backdropColor}}S.push({label:n,font:l,textOffset:u,options:{rotation:w,color:E,strokeColor:F,strokeWidth:z,textAlign:U,textBaseline:D,translation:[a,r],backdrop:B}})}return S}},{key:"_getXAxisLabelAlignment",value:function(){var e=this.options,t=e.position,i=e.ticks;if(-Ce(this.labelRotation))return"top"===t?"left":"right";var n="center";return"start"===i.align?n="left":"end"===i.align?n="right":"inner"===i.align&&(n="inner"),n}},{key:"_getYAxisLabelAlignment",value:function(e){var t,i,n=this.options,a=n.position,r=n.ticks,s=r.crossAlign,o=r.mirror,l=r.padding,c=e+l,d=this._getLabelSizes().widest.width;return"left"===a?o?(i=this.right+l,"near"===s?t="left":"center"===s?(t="center",i+=d/2):(t="right",i+=d)):(i=this.right-c,"near"===s?t="right":"center"===s?(t="center",i-=d/2):(t="left",i=this.left)):"right"===a?o?(i=this.left+l,"near"===s?t="right":"center"===s?(t="center",i-=d/2):(t="left",i-=d)):(i=this.left+c,"near"===s?t="left":"center"===s?(t="center",i+=d/2):(t="right",i=this.right)):t="right",{textAlign:t,x:i}}},{key:"_computeLabelArea",value:function(){if(!this.options.ticks.mirror){var e=this.chart,t=this.options.position;return"left"===t||"right"===t?{top:0,left:this.left,bottom:e.height,right:this.right}:"top"===t||"bottom"===t?{top:this.top,left:0,bottom:this.bottom,right:e.width}:void 0}}},{key:"drawBackground",value:function(){var e=this.ctx,t=this.options.backgroundColor,i=this.left,n=this.top,a=this.width,r=this.height;t&&(e.save(),e.fillStyle=t,e.fillRect(i,n,a,r),e.restore())}},{key:"getLineWidthForValue",value:function(e){var t=this.options.grid;if(!this._isVisible()||!t.display)return 0;var i=this.ticks.findIndex((function(t){return t.value===e}));return i>=0?t.setContext(this.getContext(i)).lineWidth:0}},{key:"drawGrid",value:function(e){var t,i,n=this.options.grid,a=this.ctx,r=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e)),s=function(e,t,i){i.width&&i.color&&(a.save(),a.lineWidth=i.width,a.strokeStyle=i.color,a.setLineDash(i.borderDash||[]),a.lineDashOffset=i.borderDashOffset,a.beginPath(),a.moveTo(e.x,e.y),a.lineTo(t.x,t.y),a.stroke(),a.restore())};if(n.display)for(t=0,i=r.length;t<i;++t){var o=r[t];n.drawOnChartArea&&s({x:o.x1,y:o.y1},{x:o.x2,y:o.y2},o),n.drawTicks&&s({x:o.tx1,y:o.ty1},{x:o.tx2,y:o.ty2},{color:o.tickColor,width:o.tickWidth,borderDash:o.tickBorderDash,borderDashOffset:o.tickBorderDashOffset})}}},{key:"drawBorder",value:function(){var e=this.chart,t=this.ctx,i=this.options,n=i.border,a=i.grid,r=n.setContext(this.getContext()),s=n.display?r.width:0;if(s){var o,l,c,d,u=a.setContext(this.getContext(0)).lineWidth,h=this._borderValue;this.isHorizontal()?(o=bt(e,this.left,s)-s/2,l=bt(e,this.right,u)+u/2,c=d=h):(c=bt(e,this.top,s)-s/2,d=bt(e,this.bottom,u)+u/2,o=l=h),t.save(),t.lineWidth=r.width,t.strokeStyle=r.color,t.beginPath(),t.moveTo(o,c),t.lineTo(l,d),t.stroke(),t.restore()}}},{key:"drawLabels",value:function(e){if(this.options.ticks.display){var t=this.ctx,i=this._computeLabelArea();i&&wt(t,i);var n,a=this.getLabelItems(e),r=(0,l.default)(a);try{for(r.s();!(n=r.n()).done;){var s=n.value,o=s.options,c=s.font;Ct(t,s.label,0,s.textOffset,c,o)}}catch(d){r.e(d)}finally{r.f()}i&&St(t)}}},{key:"drawTitle",value:function(){var e=this.ctx,t=this.options,i=t.position,n=t.title,a=t.reverse;if(n.display){var r=Ut(n.font),s=zt(n.padding),o=n.align,l=r.lineHeight/2;"bottom"===i||"center"===i||K(i)?(l+=s.bottom,X(n.text)&&(l+=r.lineHeight*(n.text.length-1))):l+=s.top;var c=function(e,t,i,n){var a,r,s,o=e.top,l=e.left,c=e.bottom,d=e.right,u=e.chart,h=u.chartArea,f=u.scales,g=0,p=c-o,m=d-l;if(e.isHorizontal()){if(r=Ke(n,l,d),K(i)){var v=Object.keys(i)[0],x=i[v];s=f[v].getPixelForValue(x)+p-t}else s="center"===i?(h.bottom+h.top)/2+p-t:oa(e,i,t);a=d-l}else{if(K(i)){var y=Object.keys(i)[0],b=i[y];r=f[y].getPixelForValue(b)-m+t}else r="center"===i?(h.left+h.right)/2-m+t:oa(e,i,t);s=Ke(n,c,o),g="left"===i?-_e:_e}return{titleX:r,titleY:s,maxWidth:a,rotation:g}}(this,l,i,o),d=c.titleX,u=c.titleY,h=c.maxWidth,f=c.rotation;Ct(e,n.text,0,0,r,{color:n.color,maxWidth:h,rotation:f,textAlign:fa(o,i,a),textBaseline:"middle",translation:[d,u]})}}},{key:"draw",value:function(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}},{key:"_layers",value:function(){var e=this,i=this.options,n=i.ticks&&i.ticks.z||0,a=J(i.grid&&i.grid.z,-1),r=J(i.border&&i.border.z,0);return this._isVisible()&&this.draw===t.prototype.draw?[{z:a,draw:function(t){e.drawBackground(),e.drawGrid(t),e.drawTitle()}},{z:r,draw:function(){e.drawBorder()}},{z:n,draw:function(t){e.drawLabels(t)}}]:[{z:n,draw:function(t){e.draw(t)}}]}},{key:"getMatchingVisibleMetas",value:function(e){var t,i,n=this.chart.getSortedVisibleDatasetMetas(),a=this.axis+"AxisID",r=[];for(t=0,i=n.length;t<i;++t){var s=n[t];s[a]!==this.id||e&&s.type!==e||r.push(s)}return r}},{key:"_resolveTickFontOptions",value:function(e){return Ut(this.options.ticks.setContext(this.getContext(e)).font)}},{key:"_maxDigits",value:function(){var e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}])}(aa),pa=function(){return(0,h.default)((function e(t,i,n){(0,u.default)(this,e),this.type=t,this.scope=i,this.override=n,this.items=Object.create(null)}),[{key:"isForType",value:function(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}},{key:"register",value:function(e){var t,i=Object.getPrototypeOf(e);(function(e){return"id"in e&&"defaults"in e})(i)&&(t=this.register(i));var n=this.items,a=e.id,r=this.scope+"."+a;if(!a)throw new Error("class does not have id: "+e);return a in n||(n[a]=e,function(e,t,i){var n=oe(Object.create(null),[i?vt.get(i):{},vt.get(t),e.defaults]);vt.set(t,n),e.defaultRoutes&&function(e,t){Object.keys(t).forEach((function(i){var n=i.split("."),a=n.pop(),r=[e].concat(n).join("."),s=t[i].split("."),o=s.pop(),l=s.join(".");vt.route(r,a,l,o)}))}(t,e.defaultRoutes);e.descriptors&&vt.describe(t,e.descriptors)}(e,r,t),this.override&&vt.override(e.id,e.overrides)),r}},{key:"get",value:function(e){return this.items[e]}},{key:"unregister",value:function(e){var t=this.items,i=e.id,n=this.scope;i in t&&delete t[i],n&&i in vt[n]&&(delete vt[n][i],this.override&&delete ht[i])}}])}();var ma=function(){return(0,h.default)((function e(){(0,u.default)(this,e),this.controllers=new pa(Zi,"datasets",!0),this.elements=new pa(aa,"elements"),this.plugins=new pa(Object,"plugins"),this.scales=new pa(ga,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}),[{key:"add",value:function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];this._each("register",t)}},{key:"remove",value:function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];this._each("unregister",t)}},{key:"addControllers",value:function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];this._each("register",t,this.controllers)}},{key:"addElements",value:function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];this._each("register",t,this.elements)}},{key:"addPlugins",value:function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];this._each("register",t,this.plugins)}},{key:"addScales",value:function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];this._each("register",t,this.scales)}},{key:"getController",value:function(e){return this._get(e,this.controllers,"controller")}},{key:"getElement",value:function(e){return this._get(e,this.elements,"element")}},{key:"getPlugin",value:function(e){return this._get(e,this.plugins,"plugin")}},{key:"getScale",value:function(e){return this._get(e,this.scales,"scale")}},{key:"removeControllers",value:function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];this._each("unregister",t,this.controllers)}},{key:"removeElements",value:function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];this._each("unregister",t,this.elements)}},{key:"removePlugins",value:function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];this._each("unregister",t,this.plugins)}},{key:"removeScales",value:function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];this._each("unregister",t,this.scales)}},{key:"_each",value:function(e,t,i){var n=this;(0,d.default)(t).forEach((function(t){var a=i||n._getRegistryForType(t);i||a.isForType(t)||a===n.plugins&&t.id?n._exec(e,a,t):ie(t,(function(t){var a=i||n._getRegistryForType(t);n._exec(e,a,t)}))}))}},{key:"_exec",value:function(e,t,i){var n=fe(e);te(i["before"+n],[],i),t[e](i),te(i["after"+n],[],i)}},{key:"_getRegistryForType",value:function(e){for(var t=0;t<this._typedRegistries.length;t++){var i=this._typedRegistries[t];if(i.isForType(e))return i}return this.plugins}},{key:"_get",value:function(e,t,i){var n=t.get(e);if(void 0===n)throw new Error('"'+e+'" is not a registered '+i+".");return n}}])}(),va=new ma,xa=function(){return(0,h.default)((function e(){(0,u.default)(this,e),this._init=[]}),[{key:"notify",value:function(e,t,i,n){"beforeInit"===t&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));var a=n?this._descriptors(e).filter(n):this._descriptors(e),r=this._notify(a,e,t,i);return"afterDestroy"===t&&(this._notify(a,e,"stop"),this._notify(this._init,e,"uninstall")),r}},{key:"_notify",value:function(e,t,i,n){n=n||{};var a,r=(0,l.default)(e);try{for(r.s();!(a=r.n()).done;){var s=a.value,o=s.plugin;if(!1===te(o[i],[t,n,s.options],o)&&n.cancelable)return!1}}catch(c){r.e(c)}finally{r.f()}return!0}},{key:"invalidate",value:function(){Q(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}},{key:"_descriptors",value:function(e){if(this._cache)return this._cache;var t=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),t}},{key:"_createDescriptors",value:function(e,t){var i=e&&e.config,n=J(i.options&&i.options.plugins,{}),a=function(e){for(var t={},i=[],n=Object.keys(va.plugins.items),a=0;a<n.length;a++)i.push(va.getPlugin(n[a]));for(var r=e.plugins||[],s=0;s<r.length;s++){var o=r[s];-1===i.indexOf(o)&&(i.push(o),t[o.id]=!0)}return{plugins:i,localIds:t}}(i);return!1!==n||t?function(e,t,i,n){var a,r=t.plugins,s=t.localIds,o=[],c=e.getContext(),d=(0,l.default)(r);try{for(d.s();!(a=d.n()).done;){var u=a.value,h=u.id,f=ya(i[h],n);null!==f&&o.push({plugin:u,options:ba(e.config,{plugin:u,local:s[h]},f,c)})}}catch(g){d.e(g)}finally{d.f()}return o}(e,a,n,t):[]}},{key:"_notifyStateChanges",value:function(e){var t=this._oldCache||[],i=this._cache,n=function(e,t){return e.filter((function(e){return!t.some((function(t){return e.plugin.id===t.plugin.id}))}))};this._notify(n(t,i),e,"stop"),this._notify(n(i,t),e,"start")}}])}();function ya(e,t){return t||!1!==e?!0===e?{}:e:null}function ba(e,t,i,n){var a=t.plugin,r=t.local,s=e.pluginScopeKeys(a),o=e.getOptionScopes(i,s);return r&&a.defaults&&o.push(a.defaults),e.createResolver(o,n,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function Aa(e,t){var i=vt.datasets[e]||{};return((t.datasets||{})[e]||{}).indexAxis||t.indexAxis||i.indexAxis||"x"}function _a(e){if("x"===e||"y"===e||"r"===e)return e}function ka(e){if(_a(e))return e;for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];for(var a=0,r=i;a<r.length;a++){var s=r[a],o=s.axis||("top"===(l=s.position)||"bottom"===l?"x":"left"===l||"right"===l?"y":void 0)||e.length>1&&_a(e[0].toLowerCase());if(o)return o}var l;throw new Error("Cannot determine type of '".concat(e,"' axis. Please provide 'axis' or 'position' option."))}function ja(e,t,i){if(i[t+"AxisID"]===e)return{axis:t}}function wa(e,t){var i=ht[e.type]||{scales:{}},n=t.scales||{},a=Aa(e.type,t),r=Object.create(null);return Object.keys(n).forEach((function(t){var s=n[t];if(!K(s))return console.error("Invalid scale configuration for scale: ".concat(t));if(s._proxy)return console.warn("Ignoring resolver passed as options for scale: ".concat(t));var o=ka(t,s,function(e,t){if(t.data&&t.data.datasets){var i=t.data.datasets.filter((function(t){return t.xAxisID===e||t.yAxisID===e}));if(i.length)return ja(e,"x",i[0])||ja(e,"y",i[0])}return{}}(t,e),vt.scales[s.type]),l=function(e,t){return e===t?"_index_":"_value_"}(o,a),c=i.scales||{};r[t]=le(Object.create(null),[{axis:o},s,c[o],c[l]])})),e.data.datasets.forEach((function(i){var a=i.type||e.type,s=i.indexAxis||Aa(a,t),o=(ht[a]||{}).scales||{};Object.keys(o).forEach((function(e){var t=function(e,t){var i=e;return"_index_"===e?i=t:"_value_"===e&&(i="x"===t?"y":"x"),i}(e,s),a=i[t+"AxisID"]||t;r[a]=r[a]||Object.create(null),le(r[a],[{axis:t},n[a],o[e]])}))})),Object.keys(r).forEach((function(e){var t=r[e];le(t,[vt.scales[t.type],vt.scale])})),r}function Sa(e){var t=e.options||(e.options={});t.plugins=J(t.plugins,{}),t.scales=wa(e,t)}function Da(e){return(e=e||{}).datasets=e.datasets||[],e.labels=e.labels||[],e}var Pa=new Map,Ma=new Set;function Na(e,t){var i=Pa.get(e);return i||(i=t(),Pa.set(e,i),Ma.add(i)),i}var Ca=function(e,t,i){var n=he(t,i);void 0!==n&&e.add(n)},Ia=function(){return(0,h.default)((function e(t){(0,u.default)(this,e),this._config=function(e){return(e=e||{}).data=Da(e.data),Sa(e),e}(t),this._scopeCache=new Map,this._resolverCache=new Map}),[{key:"platform",get:function(){return this._config.platform}},{key:"type",get:function(){return this._config.type},set:function(e){this._config.type=e}},{key:"data",get:function(){return this._config.data},set:function(e){this._config.data=Da(e)}},{key:"options",get:function(){return this._config.options},set:function(e){this._config.options=e}},{key:"plugins",get:function(){return this._config.plugins}},{key:"update",value:function(){var e=this._config;this.clearCache(),Sa(e)}},{key:"clearCache",value:function(){this._scopeCache.clear(),this._resolverCache.clear()}},{key:"datasetScopeKeys",value:function(e){return Na(e,(function(){return[["datasets.".concat(e),""]]}))}},{key:"datasetAnimationScopeKeys",value:function(e,t){return Na("".concat(e,".transition.").concat(t),(function(){return[["datasets.".concat(e,".transitions.").concat(t),"transitions.".concat(t)],["datasets.".concat(e),""]]}))}},{key:"datasetElementScopeKeys",value:function(e,t){return Na("".concat(e,"-").concat(t),(function(){return[["datasets.".concat(e,".elements.").concat(t),"datasets.".concat(e),"elements.".concat(t),""]]}))}},{key:"pluginScopeKeys",value:function(e){var t=e.id,i=this.type;return Na("".concat(i,"-plugin-").concat(t),(function(){return[["plugins.".concat(t)].concat((0,d.default)(e.additionalOptionScopes||[]))]}))}},{key:"_cachedScopes",value:function(e,t){var i=this._scopeCache,n=i.get(e);return n&&!t||(n=new Map,i.set(e,n)),n}},{key:"getOptionScopes",value:function(e,t,i){var n=this.options,a=this.type,r=this._cachedScopes(e,i),s=r.get(t);if(s)return s;var o=new Set;t.forEach((function(t){e&&(o.add(e),t.forEach((function(t){return Ca(o,e,t)}))),t.forEach((function(e){return Ca(o,n,e)})),t.forEach((function(e){return Ca(o,ht[a]||{},e)})),t.forEach((function(e){return Ca(o,vt,e)})),t.forEach((function(e){return Ca(o,ft,e)}))}));var l=Array.from(o);return 0===l.length&&l.push(Object.create(null)),Ma.has(t)&&r.set(t,l),l}},{key:"chartOptionScopes",value:function(){var e=this.options,t=this.type;return[e,ht[t]||{},vt.datasets[t]||{},{type:t},vt,ft]}},{key:"resolveNamedOptions",value:function(e,t,i){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[""],a={$shared:!0},r=Oa(this._resolverCache,e,n),s=r.resolver,o=r.subPrefixes,c=s;(function(e,t){var i,n=Ht(e),a=n.isScriptable,r=n.isIndexable,s=(0,l.default)(t);try{for(s.s();!(i=s.n()).done;){var o=i.value,c=a(o),d=r(o),u=(d||c)&&e[o];if(c&&(pe(u)||La(u))||d&&X(u))return!0}}catch(h){s.e(h)}finally{s.f()}return!1})(s,t)&&(a.$shared=!1,c=qt(s,i=pe(i)?i():i,this.createResolver(e,i,o)));var d,u=(0,l.default)(t);try{for(u.s();!(d=u.n()).done;){var h=d.value;a[h]=c[h]}}catch(f){u.e(f)}finally{u.f()}return a}},{key:"createResolver",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[""],n=arguments.length>3?arguments[3]:void 0,a=Oa(this._resolverCache,e,i).resolver;return K(t)?qt(a,t,void 0,n):a}}])}();function Oa(e,t,i){var n=e.get(t);n||(n=new Map,e.set(t,n));var a=i.join(),r=n.get(a);r||(r={resolver:Vt(t,i),subPrefixes:i.filter((function(e){return!e.toLowerCase().includes("hover")}))},n.set(a,r));return r}var La=function(e){return K(e)&&Object.getOwnPropertyNames(e).some((function(t){return pe(e[t])}))};var Ta=["top","bottom","left","right","chartArea"];function Ra(e,t){return"top"===e||"bottom"===e||-1===Ta.indexOf(e)&&"x"===t}function Ea(e,t){return function(i,n){return i[e]===n[e]?i[t]-n[t]:i[e]-n[e]}}function Fa(e){var t=e.chart,i=t.options.animation;t.notifyPlugins("afterRender"),te(i&&i.onComplete,[e],t)}function za(e){var t=e.chart,i=t.options.animation;te(i&&i.onProgress,[e],t)}function Ua(e){return di()&&"string"===typeof e?e=document.getElementById(e):e&&e.length&&(e=e[0]),e&&e.canvas&&(e=e.canvas),e}var Ba={},Ya=function(e){var t=Ua(e);return Object.values(Ba).filter((function(e){return e.canvas===t})).pop()};function Va(e,t,i){for(var n=0,a=Object.keys(e);n<a.length;n++){var r=a[n],s=+r;if(s>=t){var o=e[r];delete e[r],(i>0||s>t)&&(e[s+i]=o)}}}function qa(e,t,i){return e.options.clip?e[i]:t[i]}var Ha=function(){return(0,h.default)((function e(t,i){var n=this;(0,u.default)(this,e);var a=this.config=new Ia(i),r=Ua(t),s=Ya(r);if(s)throw new Error("Canvas is already in use. Chart with ID '"+s.id+"' must be destroyed before the canvas with ID '"+s.canvas.id+"' can be reused.");var o=a.createResolver(a.chartOptionScopes(),this.getContext());this.platform=new(a.platform||function(e){return!di()||"undefined"!==typeof OffscreenCanvas&&e instanceof OffscreenCanvas?Yn:na}(r)),this.platform.updateConfig(a);var l=this.platform.acquireContext(r,o.aspectRatio),c=l&&l.canvas,d=c&&c.height,h=c&&c.width;this.id=G(),this.ctx=l,this.canvas=c,this.width=h,this.height=d,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new xa,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=function(e,t){var i;return function(){for(var n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];return t?(clearTimeout(i),i=setTimeout(e,t,a)):e.apply(this,a),t}}((function(e){return n.update(e)}),o.resizeDelay||0),this._dataChanges=[],Ba[this.id]=this,l&&c?(Ri.listen(this,"complete",Fa),Ri.listen(this,"progress",za),this._initialize(),this.attached&&this.update()):console.error("Failed to create chart: can't acquire context from the given item")}),[{key:"aspectRatio",get:function(){var e=this.options,t=e.aspectRatio,i=e.maintainAspectRatio,n=this.width,a=this.height,r=this._aspectRatio;return Q(t)?i&&r?r:a?n/a:null:t}},{key:"data",get:function(){return this.config.data},set:function(e){this.config.data=e}},{key:"options",get:function(){return this._options},set:function(e){this.config.options=e}},{key:"registry",get:function(){return va}},{key:"_initialize",value:function(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():yi(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}},{key:"clear",value:function(){return At(this.canvas,this.ctx),this}},{key:"stop",value:function(){return Ri.stop(this),this}},{key:"resize",value:function(e,t){Ri.running(this)?this._resizeBeforeDraw={width:e,height:t}:this._resize(e,t)}},{key:"_resize",value:function(e,t){var i=this.options,n=this.canvas,a=i.maintainAspectRatio&&this.aspectRatio,r=this.platform.getMaximumSize(n,e,t,a),s=i.devicePixelRatio||this.platform.getDevicePixelRatio(),o=this.width?"resize":"attach";this.width=r.width,this.height=r.height,this._aspectRatio=this.aspectRatio,yi(this,s,!0)&&(this.notifyPlugins("resize",{size:r}),te(i.onResize,[this,r],this),this.attached&&this._doResize(o)&&this.render())}},{key:"ensureScalesHaveIDs",value:function(){ie(this.options.scales||{},(function(e,t){e.id=t}))}},{key:"buildOrUpdateScales",value:function(){var e=this,t=this.options,i=t.scales,n=this.scales,a=Object.keys(n).reduce((function(e,t){return e[t]=!1,e}),{}),r=[];i&&(r=r.concat(Object.keys(i).map((function(e){var t=i[e],n=ka(e,t),a="r"===n,r="x"===n;return{options:t,dposition:a?"chartArea":r?"bottom":"left",dtype:a?"radialLinear":r?"category":"linear"}})))),ie(r,(function(i){var r=i.options,s=r.id,o=ka(s,r),l=J(r.type,i.dtype);void 0!==r.position&&Ra(r.position,o)===Ra(i.dposition)||(r.position=i.dposition),a[s]=!0;var c=null;s in n&&n[s].type===l?c=n[s]:(c=new(va.getScale(l))({id:s,type:l,ctx:e.ctx,chart:e}),n[c.id]=c);c.init(r,t)})),ie(a,(function(e,t){e||delete n[t]})),ie(n,(function(t){zn(e,t,t.options),En(e,t)}))}},{key:"_updateMetasets",value:function(){var e=this._metasets,t=this.data.datasets.length,i=e.length;if(e.sort((function(e,t){return e.index-t.index})),i>t){for(var n=t;n<i;++n)this._destroyDatasetMeta(n);e.splice(t,i-t)}this._sortedMetasets=e.slice(0).sort(Ea("order","index"))}},{key:"_removeUnreferencedMetasets",value:function(){var e=this,t=this._metasets,i=this.data.datasets;t.length>i.length&&delete this._stacks,t.forEach((function(t,n){0===i.filter((function(e){return e===t._dataset})).length&&e._destroyDatasetMeta(n)}))}},{key:"buildOrUpdateControllers",value:function(){var e,t,i=[],n=this.data.datasets;for(this._removeUnreferencedMetasets(),e=0,t=n.length;e<t;e++){var a=n[e],r=this.getDatasetMeta(e),s=a.type||this.config.type;if(r.type&&r.type!==s&&(this._destroyDatasetMeta(e),r=this.getDatasetMeta(e)),r.type=s,r.indexAxis=a.indexAxis||Aa(s,this.options),r.order=a.order||0,r.index=e,r.label=""+a.label,r.visible=this.isDatasetVisible(e),r.controller)r.controller.updateIndex(e),r.controller.linkScales();else{var o=va.getController(s),l=vt.datasets[s],c=l.datasetElementType,d=l.dataElementType;Object.assign(o,{dataElementType:va.getElement(d),datasetElementType:c&&va.getElement(c)}),r.controller=new o(this,e),i.push(r.controller)}}return this._updateMetasets(),i}},{key:"_resetElements",value:function(){var e=this;ie(this.data.datasets,(function(t,i){e.getDatasetMeta(i).controller.reset()}),this)}},{key:"reset",value:function(){this._resetElements(),this.notifyPlugins("reset")}},{key:"update",value:function(e){var t=this.config;t.update();var i=this._options=t.createResolver(t.chartOptionScopes(),this.getContext()),n=this._animationsDisabled=!i.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),!1!==this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})){var a=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");for(var r=0,s=0,o=this.data.datasets.length;s<o;s++){var l=this.getDatasetMeta(s).controller,c=!n&&-1===a.indexOf(l);l.buildOrUpdateElements(c),r=Math.max(+l.getMaxOverflow(),r)}r=this._minPadding=i.layout.autoPadding?r:0,this._updateLayout(r),n||ie(a,(function(e){e.reset()})),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(Ea("z","_idx"));var d=this._active,u=this._lastEvent;u?this._eventHandler(u,!0):d.length&&this._updateHoverStyles(d,d,!0),this.render()}}},{key:"_updateScales",value:function(){var e=this;ie(this.scales,(function(t){Fn(e,t)})),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}},{key:"_checkEventBindings",value:function(){var e=this.options,t=new Set(Object.keys(this._listeners)),i=new Set(e.events);me(t,i)&&!!this._responsiveListeners===e.responsive||(this.unbindEvents(),this.bindEvents())}},{key:"_updateHiddenIndices",value:function(){var e,t=this._hiddenIndices,i=this._getUniformDataChanges()||[],n=(0,l.default)(i);try{for(n.s();!(e=n.n()).done;){var a=e.value,r=a.method,s=a.start,o=a.count;Va(t,s,"_removeElements"===r?-o:o)}}catch(c){n.e(c)}finally{n.f()}}},{key:"_getUniformDataChanges",value:function(){var e=this._dataChanges;if(e&&e.length){this._dataChanges=[];for(var t=this.data.datasets.length,i=function(t){return new Set(e.filter((function(e){return e[0]===t})).map((function(e,t){return t+","+e.splice(1).join(",")})))},n=i(0),a=1;a<t;a++)if(!me(n,i(a)))return;return Array.from(n).map((function(e){return e.split(",")})).map((function(e){return{method:e[1],start:+e[2],count:+e[3]}}))}}},{key:"_updateLayout",value:function(e){var t=this;if(!1!==this.notifyPlugins("beforeLayout",{cancelable:!0})){Un(this,this.width,this.height,e);var i=this.chartArea,n=i.width<=0||i.height<=0;this._layers=[],ie(this.boxes,(function(e){var i;n&&"chartArea"===e.position||(e.configure&&e.configure(),(i=t._layers).push.apply(i,(0,d.default)(e._layers())))}),this),this._layers.forEach((function(e,t){e._idx=t})),this.notifyPlugins("afterLayout")}}},{key:"_updateDatasets",value:function(e){if(!1!==this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})){for(var t=0,i=this.data.datasets.length;t<i;++t)this.getDatasetMeta(t).controller.configure();for(var n=0,a=this.data.datasets.length;n<a;++n)this._updateDataset(n,pe(e)?e({datasetIndex:n}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}},{key:"_updateDataset",value:function(e,t){var i=this.getDatasetMeta(e),n={meta:i,index:e,mode:t,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetUpdate",n)&&(i.controller._update(t),n.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",n))}},{key:"render",value:function(){!1!==this.notifyPlugins("beforeRender",{cancelable:!0})&&(Ri.has(this)?this.attached&&!Ri.running(this)&&Ri.start(this):(this.draw(),Fa({chart:this})))}},{key:"draw",value:function(){var e;if(this._resizeBeforeDraw){var t=this._resizeBeforeDraw,i=t.width,n=t.height;this._resizeBeforeDraw=null,this._resize(i,n)}if(this.clear(),!(this.width<=0||this.height<=0)&&!1!==this.notifyPlugins("beforeDraw",{cancelable:!0})){var a=this._layers;for(e=0;e<a.length&&a[e].z<=0;++e)a[e].draw(this.chartArea);for(this._drawDatasets();e<a.length;++e)a[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}}},{key:"_getSortedDatasetMetas",value:function(e){var t,i,n=this._sortedMetasets,a=[];for(t=0,i=n.length;t<i;++t){var r=n[t];e&&!r.visible||a.push(r)}return a}},{key:"getSortedVisibleDatasetMetas",value:function(){return this._getSortedDatasetMetas(!0)}},{key:"_drawDatasets",value:function(){if(!1!==this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})){for(var e=this.getSortedVisibleDatasetMetas(),t=e.length-1;t>=0;--t)this._drawDataset(e[t]);this.notifyPlugins("afterDatasetsDraw")}}},{key:"_drawDataset",value:function(e){var t=this.ctx,i=e._clip,n=!i.disabled,a=function(e,t){var i=e.xScale,n=e.yScale;return i&&n?{left:qa(i,t,"left"),right:qa(i,t,"right"),top:qa(n,t,"top"),bottom:qa(n,t,"bottom")}:t}(e,this.chartArea),r={meta:e,index:e.index,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetDraw",r)&&(n&&wt(t,{left:!1===i.left?0:a.left-i.left,right:!1===i.right?this.width:a.right+i.right,top:!1===i.top?0:a.top-i.top,bottom:!1===i.bottom?this.height:a.bottom+i.bottom}),e.controller.draw(),n&&St(t),r.cancelable=!1,this.notifyPlugins("afterDatasetDraw",r))}},{key:"isPointInArea",value:function(e){return jt(e,this.chartArea,this._minPadding)}},{key:"getElementsAtEventForMode",value:function(e,t,i,n){var a=jn.modes[t];return"function"===typeof a?a(this,e,i,n):[]}},{key:"getDatasetMeta",value:function(e){var t=this.data.datasets[e],i=this._metasets,n=i.filter((function(e){return e&&e._dataset===t})).pop();return n||(n={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:t&&t.order||0,index:e,_dataset:t,_parsed:[],_sorted:!1},i.push(n)),n}},{key:"getContext",value:function(){return this.$context||(this.$context=Yt(null,{chart:this,type:"chart"}))}},{key:"getVisibleDatasetCount",value:function(){return this.getSortedVisibleDatasetMetas().length}},{key:"isDatasetVisible",value:function(e){var t=this.data.datasets[e];if(!t)return!1;var i=this.getDatasetMeta(e);return"boolean"===typeof i.hidden?!i.hidden:!t.hidden}},{key:"setDatasetVisibility",value:function(e,t){this.getDatasetMeta(e).hidden=!t}},{key:"toggleDataVisibility",value:function(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}},{key:"getDataVisibility",value:function(e){return!this._hiddenIndices[e]}},{key:"_updateVisibility",value:function(e,t,i){var n=i?"show":"hide",a=this.getDatasetMeta(e),r=a.controller._resolveAnimations(void 0,n);ge(t)?(a.data[t].hidden=!i,this.update()):(this.setDatasetVisibility(e,i),r.update(a,{visible:i}),this.update((function(t){return t.datasetIndex===e?n:void 0})))}},{key:"hide",value:function(e,t){this._updateVisibility(e,t,!1)}},{key:"show",value:function(e,t){this._updateVisibility(e,t,!0)}},{key:"_destroyDatasetMeta",value:function(e){var t=this._metasets[e];t&&t.controller&&t.controller._destroy(),delete this._metasets[e]}},{key:"_stop",value:function(){var e,t;for(this.stop(),Ri.remove(this),e=0,t=this.data.datasets.length;e<t;++e)this._destroyDatasetMeta(e)}},{key:"destroy",value:function(){this.notifyPlugins("beforeDestroy");var e=this.canvas,t=this.ctx;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),At(e,t),this.platform.releaseContext(t),this.canvas=null,this.ctx=null),delete Ba[this.id],this.notifyPlugins("afterDestroy")}},{key:"toBase64Image",value:function(){var e;return(e=this.canvas).toDataURL.apply(e,arguments)}},{key:"bindEvents",value:function(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}},{key:"bindUserEvents",value:function(){var e=this,t=this._listeners,i=this.platform,n=function(t,i,n){t.offsetX=i,t.offsetY=n,e._eventHandler(t)};ie(this.options.events,(function(a){return function(n,a){i.addEventListener(e,n,a),t[n]=a}(a,n)}))}},{key:"bindResponsiveEvents",value:function(){var e=this;this._responsiveListeners||(this._responsiveListeners={});var t,i=this._responsiveListeners,n=this.platform,a=function(t,a){n.addEventListener(e,t,a),i[t]=a},r=function(t,a){i[t]&&(n.removeEventListener(e,t,a),delete i[t])},s=function(t,i){e.canvas&&e.resize(t,i)},o=function(){r("attach",o),e.attached=!0,e.resize(),a("resize",s),a("detach",t)};t=function(){e.attached=!1,r("resize",s),e._stop(),e._resize(0,0),a("attach",o)},n.isAttached(this.canvas)?o():t()}},{key:"unbindEvents",value:function(){var e=this;ie(this._listeners,(function(t,i){e.platform.removeEventListener(e,i,t)})),this._listeners={},ie(this._responsiveListeners,(function(t,i){e.platform.removeEventListener(e,i,t)})),this._responsiveListeners=void 0}},{key:"updateHoverStyle",value:function(e,t,i){var n,a,r,s=i?"set":"remove";for("dataset"===t&&this.getDatasetMeta(e[0].datasetIndex).controller["_"+s+"DatasetHoverStyle"](),a=0,r=e.length;a<r;++a){var o=(n=e[a])&&this.getDatasetMeta(n.datasetIndex).controller;o&&o[s+"HoverStyle"](n.element,n.datasetIndex,n.index)}}},{key:"getActiveElements",value:function(){return this._active||[]}},{key:"setActiveElements",value:function(e){var t=this,i=this._active||[],n=e.map((function(e){var i=e.datasetIndex,n=e.index,a=t.getDatasetMeta(i);if(!a)throw new Error("No dataset found at index "+i);return{datasetIndex:i,element:a.data[n],index:n}}));!ne(n,i)&&(this._active=n,this._lastEvent=null,this._updateHoverStyles(n,i))}},{key:"notifyPlugins",value:function(e,t,i){return this._plugins.notify(this,e,t,i)}},{key:"isPluginEnabled",value:function(e){return 1===this._plugins._cache.filter((function(t){return t.plugin.id===e})).length}},{key:"_updateHoverStyles",value:function(e,t,i){var n=this.options.hover,a=function(e,t){return e.filter((function(e){return!t.some((function(t){return e.datasetIndex===t.datasetIndex&&e.index===t.index}))}))},r=a(t,e),s=i?e:a(e,t);r.length&&this.updateHoverStyle(r,n.mode,!1),s.length&&n.mode&&this.updateHoverStyle(s,n.mode,!0)}},{key:"_eventHandler",value:function(e,t){var i=this,n={event:e,replay:t,cancelable:!0,inChartArea:this.isPointInArea(e)},a=function(t){return(t.options.events||i.options.events).includes(e.native.type)};if(!1!==this.notifyPlugins("beforeEvent",n,a)){var r=this._handleEvent(e,t,n.inChartArea);return n.cancelable=!1,this.notifyPlugins("afterEvent",n,a),(r||n.changed)&&this.render(),this}}},{key:"_handleEvent",value:function(e,t,i){var n=this._active,a=void 0===n?[]:n,r=this.options,s=t,o=this._getActiveElements(e,a,i,s),l=function(e){return"mouseup"===e.type||"click"===e.type||"contextmenu"===e.type}(e),c=function(e,t,i,n){return i&&"mouseout"!==e.type?n?t:e:null}(e,this._lastEvent,i,l);i&&(this._lastEvent=null,te(r.onHover,[e,o,this],this),l&&te(r.onClick,[e,o,this],this));var d=!ne(o,a);return(d||t)&&(this._active=o,this._updateHoverStyles(o,a,t)),this._lastEvent=c,d}},{key:"_getActiveElements",value:function(e,t,i,n){if("mouseout"===e.type)return[];if(!i)return t;var a=this.options.hover;return this.getElementsAtEventForMode(e,a.mode,a,n)}}],[{key:"register",value:function(){va.add.apply(va,arguments),Wa()}},{key:"unregister",value:function(){va.remove.apply(va,arguments),Wa()}}])}();function Wa(){return ie(Ha.instances,(function(e){return e._plugins.invalidate()}))}function Ga(e,t,i,n){var a=Rt(e.options.borderRadius,["outerStart","outerEnd","innerStart","innerEnd"]),r=(i-t)/2,s=Math.min(r,n*t/2),o=function(e){var t=(i-Math.min(r,e))*n/2;return ze(e,0,Math.min(r,t))};return{outerStart:o(a.outerStart),outerEnd:o(a.outerEnd),innerStart:ze(a.innerStart,0,s),innerEnd:ze(a.innerEnd,0,s)}}function Qa(e,t,i,n){return{x:i+e*Math.cos(t),y:n+e*Math.sin(t)}}function Xa(e,t,i,n,a,r){var s=t.x,o=t.y,l=t.startAngle,c=t.pixelMargin,d=t.innerRadius,u=Math.max(t.outerRadius+n+i-c,0),h=d>0?d+n+i+c:0,f=0,g=a-l;if(n){var p=((d>0?d-n:0)+(u>0?u-n:0))/2;f=(g-(0!==p?g*p/(p+n):g))/2}var m=(g-Math.max(.001,g*u-i/ve)/u)/2,v=l+m+f,x=a-m-f,y=Ga(t,h,u,x-v),b=y.outerStart,A=y.outerEnd,_=y.innerStart,k=y.innerEnd,j=u-b,w=u-A,S=v+b/j,D=x-A/w,P=h+_,M=h+k,N=v+_/P,C=x-k/M;if(e.beginPath(),r){var I=(S+D)/2;if(e.arc(s,o,u,S,I),e.arc(s,o,u,I,D),A>0){var O=Qa(w,D,s,o);e.arc(O.x,O.y,A,D,x+_e)}var L=Qa(M,x,s,o);if(e.lineTo(L.x,L.y),k>0){var T=Qa(M,C,s,o);e.arc(T.x,T.y,k,x+_e,C+Math.PI)}var R=(x-k/h+(v+_/h))/2;if(e.arc(s,o,h,x-k/h,R,!0),e.arc(s,o,h,R,v+_/h,!0),_>0){var E=Qa(P,N,s,o);e.arc(E.x,E.y,_,N+Math.PI,v-_e)}var F=Qa(j,v,s,o);if(e.lineTo(F.x,F.y),b>0){var z=Qa(j,S,s,o);e.arc(z.x,z.y,b,v-_e,S)}}else{e.moveTo(s,o);var U=Math.cos(S)*u+s,B=Math.sin(S)*u+o;e.lineTo(U,B);var Y=Math.cos(D)*u+s,V=Math.sin(D)*u+o;e.lineTo(Y,V)}e.closePath()}function Ka(e,t,i,n,a){var r=t.fullCircles,s=t.startAngle,o=t.circumference,l=t.options,c=l.borderWidth,d=l.borderJoinStyle,u=l.borderDash,h=l.borderDashOffset,f="inner"===l.borderAlign;if(c){e.setLineDash(u||[]),e.lineDashOffset=h,f?(e.lineWidth=2*c,e.lineJoin=d||"round"):(e.lineWidth=c,e.lineJoin=d||"bevel");var g=t.endAngle;if(r){Xa(e,t,i,n,g,a);for(var p=0;p<r;++p)e.stroke();isNaN(o)||(g=s+(o%xe||xe))}f&&function(e,t,i){var n=t.startAngle,a=t.pixelMargin,r=t.x,s=t.y,o=t.outerRadius,l=t.innerRadius,c=a/o;e.beginPath(),e.arc(r,s,o,n-c,i+c),l>a?(c=a/l,e.arc(r,s,l,i+c,n-c,!0)):e.arc(r,s,a,i+_e,n-_e),e.closePath(),e.clip()}(e,t,g),r||(Xa(e,t,i,n,g,a),e.stroke())}}(0,c.default)(Ha,"defaults",vt),(0,c.default)(Ha,"instances",Ba),(0,c.default)(Ha,"overrides",ht),(0,c.default)(Ha,"registry",va),(0,c.default)(Ha,"version","4.4.7"),(0,c.default)(Ha,"getChart",Ya);var $a=function(e){function t(e){var i;return(0,u.default)(this,t),i=(0,a.default)(this,t),(0,c.default)(i,"circumference",void 0),(0,c.default)(i,"endAngle",void 0),(0,c.default)(i,"fullCircles",void 0),(0,c.default)(i,"innerRadius",void 0),(0,c.default)(i,"outerRadius",void 0),(0,c.default)(i,"pixelMargin",void 0),(0,c.default)(i,"startAngle",void 0),i.options=void 0,i.circumference=void 0,i.startAngle=void 0,i.endAngle=void 0,i.innerRadius=void 0,i.outerRadius=void 0,i.pixelMargin=0,i.fullCircles=0,e&&Object.assign(i,e),i}return(0,s.default)(t,e),(0,h.default)(t,[{key:"inRange",value:function(e,t,i){var n=Le(this.getProps(["x","y"],i),{x:e,y:t}),a=n.angle,r=n.distance,s=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],i),o=s.startAngle,l=s.endAngle,c=s.innerRadius,d=s.outerRadius,u=s.circumference,h=(this.options.spacing+this.options.borderWidth)/2,f=J(u,l-o),g=Fe(a,o,l)&&o!==l,p=f>=xe||g,m=Ue(r,c+h,d+h);return p&&m}},{key:"getCenterPoint",value:function(e){var t=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],e),i=t.x,n=t.y,a=t.startAngle,r=t.endAngle,s=t.innerRadius,o=t.outerRadius,l=this.options,c=l.offset,d=(a+r)/2,u=(s+o+l.spacing+c)/2;return{x:i+Math.cos(d)*u,y:n+Math.sin(d)*u}}},{key:"tooltipPosition",value:function(e){return this.getCenterPoint(e)}},{key:"draw",value:function(e){var t=this.options,i=this.circumference,n=(t.offset||0)/4,a=(t.spacing||0)/2,r=t.circular;if(this.pixelMargin="inner"===t.borderAlign?.33:0,this.fullCircles=i>xe?Math.floor(i/xe):0,!(0===i||this.innerRadius<0||this.outerRadius<0)){e.save();var s=(this.startAngle+this.endAngle)/2;e.translate(Math.cos(s)*n,Math.sin(s)*n);var o=n*(1-Math.sin(Math.min(ve,i||0)));e.fillStyle=t.backgroundColor,e.strokeStyle=t.borderColor,function(e,t,i,n,a){var r=t.fullCircles,s=t.startAngle,o=t.circumference,l=t.endAngle;if(r){Xa(e,t,i,n,l,a);for(var c=0;c<r;++c)e.fill();isNaN(o)||(l=s+(o%xe||xe))}Xa(e,t,i,n,l,a),e.fill()}(e,this,o,a,r),Ka(e,this,o,a,r),e.restore()}}}])}(aa);function Za(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t;e.lineCap=J(i.borderCapStyle,t.borderCapStyle),e.setLineDash(J(i.borderDash,t.borderDash)),e.lineDashOffset=J(i.borderDashOffset,t.borderDashOffset),e.lineJoin=J(i.borderJoinStyle,t.borderJoinStyle),e.lineWidth=J(i.borderWidth,t.borderWidth),e.strokeStyle=J(i.borderColor,t.borderColor)}function Ja(e,t,i){e.lineTo(i.x,i.y)}function er(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=e.length,a=i.start,r=void 0===a?0:a,s=i.end,o=void 0===s?n-1:s,l=t.start,c=t.end,d=Math.max(r,l),u=Math.min(o,c),h=r<l&&o<l||r>c&&o>c;return{count:n,start:d,loop:t.loop,ilen:u<d&&!h?n+u-d:u-d}}function tr(e,t,i,n){var a,r,s,o=t.points,l=t.options,c=er(o,i,n),d=c.count,u=c.start,h=c.loop,f=c.ilen,g=function(e){return e.stepped?Dt:e.tension||"monotone"===e.cubicInterpolationMode?Pt:Ja}(l),p=n||{},m=p.move,v=void 0===m||m,x=p.reverse;for(a=0;a<=f;++a)(r=o[(u+(x?f-a:a))%d]).skip||(v?(e.moveTo(r.x,r.y),v=!1):g(e,s,r,x,l.stepped),s=r);return h&&g(e,s,r=o[(u+(x?f:0))%d],x,l.stepped),!!h}function ir(e,t,i,n){var a,r,s,o,l,c,d=t.points,u=er(d,i,n),h=u.count,f=u.start,g=u.ilen,p=n||{},m=p.move,v=void 0===m||m,x=p.reverse,y=0,b=0,A=function(e){return(f+(x?g-e:e))%h},_=function(){o!==l&&(e.lineTo(y,l),e.lineTo(y,o),e.lineTo(y,c))};for(v&&(r=d[A(0)],e.moveTo(r.x,r.y)),a=0;a<=g;++a)if(!(r=d[A(a)]).skip){var k=r.x,j=r.y,w=0|k;w===s?(j<o?o=j:j>l&&(l=j),y=(b*y+k)/++b):(_(),e.lineTo(k,j),s=w,b=0,o=l=j),c=j}_()}function nr(e){var t=e.options,i=t.borderDash&&t.borderDash.length;return!e._decimated&&!e._loop&&!t.tension&&"monotone"!==t.cubicInterpolationMode&&!t.stepped&&!i?ir:tr}(0,c.default)($a,"id","arc"),(0,c.default)($a,"defaults",{borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0}),(0,c.default)($a,"defaultRoutes",{backgroundColor:"backgroundColor"}),(0,c.default)($a,"descriptors",{_scriptable:!0,_indexable:function(e){return"borderDash"!==e}});var ar="function"===typeof Path2D;function rr(e,t,i,n){ar&&!t.options.segment?function(e,t,i,n){var a=t._path;a||(a=t._path=new Path2D,t.path(a,i,n)&&a.closePath()),Za(e,t.options),e.stroke(a)}(e,t,i,n):function(e,t,i,n){var a,r=t.segments,s=t.options,o=nr(t),c=(0,l.default)(r);try{for(c.s();!(a=c.n()).done;){var d=a.value;Za(e,s,d.style),e.beginPath(),o(e,t,d,{start:i,end:i+n-1})&&e.closePath(),e.stroke()}}catch(u){c.e(u)}finally{c.f()}}(e,t,i,n)}var sr=function(e){function t(e){var i;return(0,u.default)(this,t),(i=(0,a.default)(this,t)).animated=!0,i.options=void 0,i._chart=void 0,i._loop=void 0,i._fullLoop=void 0,i._path=void 0,i._points=void 0,i._segments=void 0,i._decimated=!1,i._pointsUpdated=!1,i._datasetIndex=void 0,e&&Object.assign(i,e),i}return(0,s.default)(t,e),(0,h.default)(t,[{key:"updateControlPoints",value:function(e,t){var i=this.options;if((i.tension||"monotone"===i.cubicInterpolationMode)&&!i.stepped&&!this._pointsUpdated){var n=i.spanGaps?this._loop:this._fullLoop;ci(this._points,i,e,n,t),this._pointsUpdated=!0}}},{key:"points",get:function(){return this._points},set:function(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}},{key:"segments",get:function(){return this._segments||(this._segments=function(e,t){var i=e.points,n=e.options.spanGaps,a=i.length;if(!a)return[];var r=!!e._loop,s=function(e,t,i,n){var a=0,r=t-1;if(i&&!n)for(;a<t&&!e[a].skip;)a++;for(;a<t&&e[a].skip;)a++;for(a%=t,i&&(r+=a);r>a&&e[r%t].skip;)r--;return{start:a,end:r%=t}}(i,a,r,n),o=s.start,l=s.end;return Ii(e,!0===n?[{start:o,end:l,loop:r}]:function(e,t,i,n){var a,r=e.length,s=[],o=t,l=e[t];for(a=t+1;a<=i;++a){var c=e[a%r];c.skip||c.stop?l.skip||(n=!1,s.push({start:t%r,end:(a-1)%r,loop:n}),t=o=c.stop?a:null):(o=a,l.skip&&(t=a)),l=c}return null!==o&&s.push({start:t%r,end:o%r,loop:n}),s}(i,o,l<o?l+a:l,!!e._fullLoop&&0===o&&l===a-1),i,t)}(this,this.options.segment))}},{key:"first",value:function(){var e=this.segments,t=this.points;return e.length&&t[e[0].start]}},{key:"last",value:function(){var e=this.segments,t=this.points,i=e.length;return i&&t[e[i-1].end]}},{key:"interpolate",value:function(e,t){var i=this.options,n=e[t],a=this.points,r=Ci(this,{property:t,start:n,end:n});if(r.length){var s,o,l=[],c=function(e){return e.stepped?ki:e.tension||"monotone"===e.cubicInterpolationMode?ji:_i}(i);for(s=0,o=r.length;s<o;++s){var d=r[s],u=d.start,h=d.end,f=a[u],g=a[h];if(f!==g){var p=c(f,g,Math.abs((n-f[t])/(g[t]-f[t])),i.stepped);p[t]=e[t],l.push(p)}else l.push(f)}return 1===l.length?l[0]:l}}},{key:"pathSegment",value:function(e,t,i){return nr(this)(e,this,t,i)}},{key:"path",value:function(e,t,i){var n=this.segments,a=nr(this),r=this._loop;t=t||0,i=i||this.points.length-t;var s,o=(0,l.default)(n);try{for(o.s();!(s=o.n()).done;){r&=a(e,this,s.value,{start:t,end:t+i-1})}}catch(c){o.e(c)}finally{o.f()}return!!r}},{key:"draw",value:function(e,t,i,n){var a=this.options||{};(this.points||[]).length&&a.borderWidth&&(e.save(),rr(e,this,i,n),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}])}(aa);function or(e,t,i,n){var a=e.options,r=e.getProps([i],n)[i];return Math.abs(t-r)<a.radius+a.hitRadius}(0,c.default)(sr,"id","line"),(0,c.default)(sr,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),(0,c.default)(sr,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),(0,c.default)(sr,"descriptors",{_scriptable:!0,_indexable:function(e){return"borderDash"!==e&&"fill"!==e}});var lr=function(e){function t(e){var i;return(0,u.default)(this,t),i=(0,a.default)(this,t),(0,c.default)(i,"parsed",void 0),(0,c.default)(i,"skip",void 0),(0,c.default)(i,"stop",void 0),i.options=void 0,i.parsed=void 0,i.skip=void 0,i.stop=void 0,e&&Object.assign(i,e),i}return(0,s.default)(t,e),(0,h.default)(t,[{key:"inRange",value:function(e,t,i){var n=this.options,a=this.getProps(["x","y"],i),r=a.x,s=a.y;return Math.pow(e-r,2)+Math.pow(t-s,2)<Math.pow(n.hitRadius+n.radius,2)}},{key:"inXRange",value:function(e,t){return or(this,e,"x",t)}},{key:"inYRange",value:function(e,t){return or(this,e,"y",t)}},{key:"getCenterPoint",value:function(e){var t=this.getProps(["x","y"],e);return{x:t.x,y:t.y}}},{key:"size",value:function(e){var t=(e=e||this.options||{}).radius||0;return 2*((t=Math.max(t,t&&e.hoverRadius||0))+(t&&e.borderWidth||0))}},{key:"draw",value:function(e,t){var i=this.options;this.skip||i.radius<.1||!jt(this,t,this.size(i)/2)||(e.strokeStyle=i.borderColor,e.lineWidth=i.borderWidth,e.fillStyle=i.backgroundColor,_t(e,i,this.x,this.y))}},{key:"getRange",value:function(){var e=this.options||{};return e.radius+e.hitRadius}}])}(aa);function cr(e,t){var i,n,a,r,s,o=e.getProps(["x","y","base","width","height"],t),l=o.x,c=o.y,d=o.base,u=o.width,h=o.height;return e.horizontal?(s=h/2,i=Math.min(l,d),n=Math.max(l,d),a=c-s,r=c+s):(i=l-(s=u/2),n=l+s,a=Math.min(c,d),r=Math.max(c,d)),{left:i,top:a,right:n,bottom:r}}function dr(e,t,i,n){return e?0:ze(t,i,n)}function ur(e){var t=cr(e),i=t.right-t.left,n=t.bottom-t.top,a=function(e,t,i){var n=e.options.borderWidth,a=e.borderSkipped,r=Et(n);return{t:dr(a.top,r.top,0,i),r:dr(a.right,r.right,0,t),b:dr(a.bottom,r.bottom,0,i),l:dr(a.left,r.left,0,t)}}(e,i/2,n/2),r=function(e,t,i){var n=e.getProps(["enableBorderRadius"]).enableBorderRadius,a=e.options.borderRadius,r=Ft(a),s=Math.min(t,i),o=e.borderSkipped,l=n||K(a);return{topLeft:dr(!l||o.top||o.left,r.topLeft,0,s),topRight:dr(!l||o.top||o.right,r.topRight,0,s),bottomLeft:dr(!l||o.bottom||o.left,r.bottomLeft,0,s),bottomRight:dr(!l||o.bottom||o.right,r.bottomRight,0,s)}}(e,i/2,n/2);return{outer:{x:t.left,y:t.top,w:i,h:n,radius:r},inner:{x:t.left+a.l,y:t.top+a.t,w:i-a.l-a.r,h:n-a.t-a.b,radius:{topLeft:Math.max(0,r.topLeft-Math.max(a.t,a.l)),topRight:Math.max(0,r.topRight-Math.max(a.t,a.r)),bottomLeft:Math.max(0,r.bottomLeft-Math.max(a.b,a.l)),bottomRight:Math.max(0,r.bottomRight-Math.max(a.b,a.r))}}}}function hr(e,t,i,n){var a=null===t,r=null===i,s=e&&!(a&&r)&&cr(e,n);return s&&(a||Ue(t,s.left,s.right))&&(r||Ue(i,s.top,s.bottom))}function fr(e,t){e.rect(t.x,t.y,t.w,t.h)}function gr(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=e.x!==i.x?-t:0,a=e.y!==i.y?-t:0,r=(e.x+e.w!==i.x+i.w?t:0)-n,s=(e.y+e.h!==i.y+i.h?t:0)-a;return{x:e.x+n,y:e.y+a,w:e.w+r,h:e.h+s,radius:e.radius}}(0,c.default)(lr,"id","point"),(0,c.default)(lr,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),(0,c.default)(lr,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});var pr=function(e){function t(e){var i;return(0,u.default)(this,t),(i=(0,a.default)(this,t)).options=void 0,i.horizontal=void 0,i.base=void 0,i.width=void 0,i.height=void 0,i.inflateAmount=void 0,e&&Object.assign(i,e),i}return(0,s.default)(t,e),(0,h.default)(t,[{key:"draw",value:function(e){var t,i=this.inflateAmount,n=this.options,a=n.borderColor,r=n.backgroundColor,s=ur(this),o=s.inner,l=s.outer,c=(t=l.radius).topLeft||t.topRight||t.bottomLeft||t.bottomRight?It:fr;e.save(),l.w===o.w&&l.h===o.h||(e.beginPath(),c(e,gr(l,i,o)),e.clip(),c(e,gr(o,-i,l)),e.fillStyle=a,e.fill("evenodd")),e.beginPath(),c(e,gr(o,i)),e.fillStyle=r,e.fill(),e.restore()}},{key:"inRange",value:function(e,t,i){return hr(this,e,t,i)}},{key:"inXRange",value:function(e,t){return hr(this,e,null,t)}},{key:"inYRange",value:function(e,t){return hr(this,null,e,t)}},{key:"getCenterPoint",value:function(e){var t=this.getProps(["x","y","base","horizontal"],e),i=t.x,n=t.y,a=t.base,r=t.horizontal;return{x:r?(i+a)/2:i,y:r?n:(n+a)/2}}},{key:"getRange",value:function(e){return"x"===e?this.width/2:this.height/2}}])}(aa);(0,c.default)(pr,"id","bar"),(0,c.default)(pr,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),(0,c.default)(pr,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});var mr=function(e,t){var i=e.boxHeight,n=void 0===i?t:i,a=e.boxWidth,r=void 0===a?t:a;return e.usePointStyle&&(n=Math.min(n,t),r=e.pointStyleWidth||Math.min(r,t)),{boxWidth:r,boxHeight:n,itemHeight:Math.max(t,n)}},vr=function(e){function t(e){var i;return(0,u.default)(this,t),(i=(0,a.default)(this,t))._added=!1,i.legendHitBoxes=[],i._hoveredItem=null,i.doughnutMode=!1,i.chart=e.chart,i.options=e.options,i.ctx=e.ctx,i.legendItems=void 0,i.columnSizes=void 0,i.lineWidths=void 0,i.maxHeight=void 0,i.maxWidth=void 0,i.top=void 0,i.bottom=void 0,i.left=void 0,i.right=void 0,i.height=void 0,i.width=void 0,i._margins=void 0,i.position=void 0,i.weight=void 0,i.fullSize=void 0,i}return(0,s.default)(t,e),(0,h.default)(t,[{key:"update",value:function(e,t,i){this.maxWidth=e,this.maxHeight=t,this._margins=i,this.setDimensions(),this.buildLabels(),this.fit()}},{key:"setDimensions",value:function(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}},{key:"buildLabels",value:function(){var e=this,t=this.options.labels||{},i=te(t.generateLabels,[this.chart],this)||[];t.filter&&(i=i.filter((function(i){return t.filter(i,e.chart.data)}))),t.sort&&(i=i.sort((function(i,n){return t.sort(i,n,e.chart.data)}))),this.options.reverse&&i.reverse(),this.legendItems=i}},{key:"fit",value:function(){var e=this.options,t=this.ctx;if(e.display){var i,n,a=e.labels,r=Ut(a.font),s=r.size,o=this._computeTitleHeight(),l=mr(a,s),c=l.boxWidth,d=l.itemHeight;t.font=r.string,this.isHorizontal()?(i=this.maxWidth,n=this._fitRows(o,s,c,d)+10):(n=this.maxHeight,i=this._fitCols(o,r,c,d)+10),this.width=Math.min(i,e.maxWidth||this.maxWidth),this.height=Math.min(n,e.maxHeight||this.maxHeight)}else this.width=this.height=0}},{key:"_fitRows",value:function(e,t,i,n){var a=this.ctx,r=this.maxWidth,s=this.options.labels.padding,o=this.legendHitBoxes=[],l=this.lineWidths=[0],c=n+s,d=e;a.textAlign="left",a.textBaseline="middle";var u=-1,h=-c;return this.legendItems.forEach((function(e,f){var g=i+t/2+a.measureText(e.text).width;(0===f||l[l.length-1]+g+2*s>r)&&(d+=c,l[l.length-(f>0?0:1)]=0,h+=c,u++),o[f]={left:0,top:h,row:u,width:g,height:n},l[l.length-1]+=g+s})),d}},{key:"_fitCols",value:function(e,t,i,n){var a=this.ctx,r=this.maxHeight,s=this.options.labels.padding,o=this.legendHitBoxes=[],l=this.columnSizes=[],c=r-e,d=s,u=0,h=0,f=0,g=0;return this.legendItems.forEach((function(e,r){var p=function(e,t,i,n,a){var r=function(e,t,i,n){var a=e.text;a&&"string"!==typeof a&&(a=a.reduce((function(e,t){return e.length>t.length?e:t})));return t+i.size/2+n.measureText(a).width}(n,e,t,i),s=function(e,t,i){var n=e;"string"!==typeof t.text&&(n=xr(t,i));return n}(a,n,t.lineHeight);return{itemWidth:r,itemHeight:s}}(i,t,a,e,n),m=p.itemWidth,v=p.itemHeight;r>0&&h+v+2*s>c&&(d+=u+s,l.push({width:u,height:h}),f+=u+s,g++,u=h=0),o[r]={left:f,top:h,col:g,width:m,height:v},u=Math.max(u,m),h+=v+s})),d+=u,l.push({width:u,height:h}),d}},{key:"adjustHitBoxes",value:function(){if(this.options.display){var e=this._computeTitleHeight(),t=this.legendHitBoxes,i=this.options,n=i.align,a=i.labels.padding,r=wi(i.rtl,this.left,this.width);if(this.isHorizontal()){var s,o=0,c=Ke(n,this.left+a,this.right-this.lineWidths[o]),d=(0,l.default)(t);try{for(d.s();!(s=d.n()).done;){var u=s.value;o!==u.row&&(o=u.row,c=Ke(n,this.left+a,this.right-this.lineWidths[o])),u.top+=this.top+e+a,u.left=r.leftForLtr(r.x(c),u.width),c+=u.width+a}}catch(v){d.e(v)}finally{d.f()}}else{var h,f=0,g=Ke(n,this.top+e+a,this.bottom-this.columnSizes[f].height),p=(0,l.default)(t);try{for(p.s();!(h=p.n()).done;){var m=h.value;m.col!==f&&(f=m.col,g=Ke(n,this.top+e+a,this.bottom-this.columnSizes[f].height)),m.top=g,m.left+=this.left+a,m.left=r.leftForLtr(r.x(m.left),m.width),g+=m.height+a}}catch(v){p.e(v)}finally{p.f()}}}}},{key:"isHorizontal",value:function(){return"top"===this.options.position||"bottom"===this.options.position}},{key:"draw",value:function(){if(this.options.display){var e=this.ctx;wt(e,this),this._draw(),St(e)}}},{key:"_draw",value:function(){var e,t=this,i=this.options,n=this.columnSizes,a=this.lineWidths,r=this.ctx,s=i.align,o=i.labels,l=vt.color,c=wi(i.rtl,this.left,this.width),d=Ut(o.font),u=o.padding,h=d.size,f=h/2;this.drawTitle(),r.textAlign=c.textAlign("left"),r.textBaseline="middle",r.lineWidth=.5,r.font=d.string;var g=mr(o,h),p=g.boxWidth,m=g.boxHeight,v=g.itemHeight,x=this.isHorizontal(),y=this._computeTitleHeight();e=x?{x:Ke(s,this.left+u,this.right-a[0]),y:this.top+u+y,line:0}:{x:this.left+u,y:Ke(s,this.top+y+u,this.bottom-n[0].height),line:0},Si(this.ctx,i.textDirection);var b=v+u;this.legendItems.forEach((function(g,A){r.strokeStyle=g.fontColor,r.fillStyle=g.fontColor;var _=r.measureText(g.text).width,k=c.textAlign(g.textAlign||(g.textAlign=o.textAlign)),j=p+f+_,w=e.x,S=e.y;if(c.setWidth(t.width),x?A>0&&w+j+u>t.right&&(S=e.y+=b,e.line++,w=e.x=Ke(s,t.left+u,t.right-a[e.line])):A>0&&S+b>t.bottom&&(w=e.x=w+n[e.line].width+u,e.line++,S=e.y=Ke(s,t.top+y+u,t.bottom-n[e.line].height)),function(e,t,i){if(!(isNaN(p)||p<=0||isNaN(m)||m<0)){r.save();var n=J(i.lineWidth,1);if(r.fillStyle=J(i.fillStyle,l),r.lineCap=J(i.lineCap,"butt"),r.lineDashOffset=J(i.lineDashOffset,0),r.lineJoin=J(i.lineJoin,"miter"),r.lineWidth=n,r.strokeStyle=J(i.strokeStyle,l),r.setLineDash(J(i.lineDash,[])),o.usePointStyle){var a={radius:m*Math.SQRT2/2,pointStyle:i.pointStyle,rotation:i.rotation,borderWidth:n},s=c.xPlus(e,p/2);kt(r,a,s,t+f,o.pointStyleWidth&&p)}else{var d=t+Math.max((h-m)/2,0),u=c.leftForLtr(e,p),g=Ft(i.borderRadius);r.beginPath(),Object.values(g).some((function(e){return 0!==e}))?It(r,{x:u,y:d,w:p,h:m,radius:g}):r.rect(u,d,p,m),r.fill(),0!==n&&r.stroke()}r.restore()}}(c.x(w),S,g),w=function(e,t,i,n){return e===(n?"left":"right")?i:"center"===e?(t+i)/2:t}(k,w+p+f,x?w+j:t.right,i.rtl),function(e,t,i){Ct(r,i.text,e,t+v/2,d,{strikethrough:i.hidden,textAlign:c.textAlign(i.textAlign)})}(c.x(w),S,g),x)e.x+=j+u;else if("string"!==typeof g.text){var D=d.lineHeight;e.y+=xr(g,D)+u}else e.y+=b})),Di(this.ctx,i.textDirection)}},{key:"drawTitle",value:function(){var e=this.options,t=e.title,i=Ut(t.font),n=zt(t.padding);if(t.display){var a,r=wi(e.rtl,this.left,this.width),s=this.ctx,o=t.position,l=i.size/2,c=n.top+l,u=this.left,h=this.width;if(this.isHorizontal())h=Math.max.apply(Math,(0,d.default)(this.lineWidths)),a=this.top+c,u=Ke(e.align,u,this.right-h);else{var f=this.columnSizes.reduce((function(e,t){return Math.max(e,t.height)}),0);a=c+Ke(e.align,this.top,this.bottom-f-e.labels.padding-this._computeTitleHeight())}var g=Ke(o,u,u+h);s.textAlign=r.textAlign(Xe(o)),s.textBaseline="middle",s.strokeStyle=t.color,s.fillStyle=t.color,s.font=i.string,Ct(s,t.text,g,a,i)}}},{key:"_computeTitleHeight",value:function(){var e=this.options.title,t=Ut(e.font),i=zt(e.padding);return e.display?t.lineHeight+i.height:0}},{key:"_getLegendItemAt",value:function(e,t){var i,n,a;if(Ue(e,this.left,this.right)&&Ue(t,this.top,this.bottom))for(a=this.legendHitBoxes,i=0;i<a.length;++i)if(Ue(e,(n=a[i]).left,n.left+n.width)&&Ue(t,n.top,n.top+n.height))return this.legendItems[i];return null}},{key:"handleEvent",value:function(e){var t=this.options;if(function(e,t){if(("mousemove"===e||"mouseout"===e)&&(t.onHover||t.onLeave))return!0;if(t.onClick&&("click"===e||"mouseup"===e))return!0;return!1}(e.type,t)){var i,n,a=this._getLegendItemAt(e.x,e.y);if("mousemove"===e.type||"mouseout"===e.type){var r=this._hoveredItem,s=(n=a,null!==(i=r)&&null!==n&&i.datasetIndex===n.datasetIndex&&i.index===n.index);r&&!s&&te(t.onLeave,[e,r,this],this),this._hoveredItem=a,a&&!s&&te(t.onHover,[e,a,this],this)}else a&&te(t.onClick,[e,a,this],this)}}}])}(aa);function xr(e,t){return t*(e.text?e.text.length:0)}var yr={id:"legend",_element:vr,start:function(e,t,i){var n=e.legend=new vr({ctx:e.ctx,options:i,chart:e});zn(e,n,i),En(e,n)},stop:function(e){Fn(e,e.legend),delete e.legend},beforeUpdate:function(e,t,i){var n=e.legend;zn(e,n,i),n.options=i},afterUpdate:function(e){var t=e.legend;t.buildLabels(),t.adjustHitBoxes()},afterEvent:function(e,t){t.replay||e.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick:function(e,t,i){var n=t.datasetIndex,a=i.chart;a.isDatasetVisible(n)?(a.hide(n),t.hidden=!0):(a.show(n),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:function(e){return e.chart.options.color},boxWidth:40,padding:10,generateLabels:function(e){var t=e.data.datasets,i=e.legend.options.labels,n=i.usePointStyle,a=i.pointStyle,r=i.textAlign,s=i.color,o=i.useBorderRadius,l=i.borderRadius;return e._getSortedDatasetMetas().map((function(e){var i=e.controller.getStyle(n?0:void 0),c=zt(i.borderWidth);return{text:t[e.index].label,fillStyle:i.backgroundColor,fontColor:s,hidden:!e.visible,lineCap:i.borderCapStyle,lineDash:i.borderDash,lineDashOffset:i.borderDashOffset,lineJoin:i.borderJoinStyle,lineWidth:(c.width+c.height)/4,strokeStyle:i.borderColor,pointStyle:a||i.pointStyle,rotation:i.rotation,textAlign:r||i.textAlign,borderRadius:o&&(l||i.borderRadius),datasetIndex:e.index}}),this)}},title:{color:function(e){return e.chart.options.color},display:!1,position:"center",text:""}},descriptors:{_scriptable:function(e){return!e.startsWith("on")},labels:{_scriptable:function(e){return!["generateLabels","filter","sort"].includes(e)}}}},br=function(e){function t(e){var i;return(0,u.default)(this,t),(i=(0,a.default)(this,t)).chart=e.chart,i.options=e.options,i.ctx=e.ctx,i._padding=void 0,i.top=void 0,i.bottom=void 0,i.left=void 0,i.right=void 0,i.width=void 0,i.height=void 0,i.position=void 0,i.weight=void 0,i.fullSize=void 0,i}return(0,s.default)(t,e),(0,h.default)(t,[{key:"update",value:function(e,t){var i=this.options;if(this.left=0,this.top=0,i.display){this.width=this.right=e,this.height=this.bottom=t;var n=X(i.text)?i.text.length:1;this._padding=zt(i.padding);var a=n*Ut(i.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=a:this.width=a}else this.width=this.height=this.right=this.bottom=0}},{key:"isHorizontal",value:function(){var e=this.options.position;return"top"===e||"bottom"===e}},{key:"_drawArgs",value:function(e){var t,i,n,a=this.top,r=this.left,s=this.bottom,o=this.right,l=this.options,c=l.align,d=0;return this.isHorizontal()?(i=Ke(c,r,o),n=a+e,t=o-r):("left"===l.position?(i=r+e,n=Ke(c,s,a),d=-.5*ve):(i=o-e,n=Ke(c,a,s),d=.5*ve),t=s-a),{titleX:i,titleY:n,maxWidth:t,rotation:d}}},{key:"draw",value:function(){var e=this.ctx,t=this.options;if(t.display){var i=Ut(t.font),n=i.lineHeight/2+this._padding.top,a=this._drawArgs(n),r=a.titleX,s=a.titleY,o=a.maxWidth,l=a.rotation;Ct(e,t.text,0,0,i,{color:t.color,maxWidth:o,rotation:l,textAlign:Xe(t.align),textBaseline:"middle",translation:[r,s]})}}}])}(aa);var Ar={id:"title",_element:br,start:function(e,t,i){!function(e,t){var i=new br({ctx:e.ctx,options:t,chart:e});zn(e,i,t),En(e,i),e.titleBlock=i}(e,i)},stop:function(e){var t=e.titleBlock;Fn(e,t),delete e.titleBlock},beforeUpdate:function(e,t,i){var n=e.titleBlock;zn(e,n,i),n.options=i},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}},_r=(new WeakMap,{average:function(e){if(!e.length)return!1;var t,i,n=new Set,a=0,r=0;for(t=0,i=e.length;t<i;++t){var s=e[t].element;if(s&&s.hasValue()){var o=s.tooltipPosition();n.add(o.x),a+=o.y,++r}}return 0!==r&&0!==n.size&&{x:(0,d.default)(n).reduce((function(e,t){return e+t}))/n.size,y:a/r}},nearest:function(e,t){if(!e.length)return!1;var i,n,a,r=t.x,s=t.y,o=Number.POSITIVE_INFINITY;for(i=0,n=e.length;i<n;++i){var l=e[i].element;if(l&&l.hasValue()){var c=Te(t,l.getCenterPoint());c<o&&(o=c,a=l)}}if(a){var d=a.tooltipPosition();r=d.x,s=d.y}return{x:r,y:s}}});function kr(e,t){return t&&(X(t)?Array.prototype.push.apply(e,t):e.push(t)),e}function jr(e){return("string"===typeof e||e instanceof String)&&e.indexOf("\n")>-1?e.split("\n"):e}function wr(e,t){var i=t.element,n=t.datasetIndex,a=t.index,r=e.getDatasetMeta(n).controller,s=r.getLabelAndValue(a),o=s.label,l=s.value;return{chart:e,label:o,parsed:r.getParsed(a),raw:e.data.datasets[n].data[a],formattedValue:l,dataset:r.getDataset(),dataIndex:a,datasetIndex:n,element:i}}function Sr(e,t){var i=e.chart.ctx,n=e.body,a=e.footer,r=e.title,s=t.boxWidth,o=t.boxHeight,l=Ut(t.bodyFont),c=Ut(t.titleFont),d=Ut(t.footerFont),u=r.length,h=a.length,f=n.length,g=zt(t.padding),p=g.height,m=0,v=n.reduce((function(e,t){return e+t.before.length+t.lines.length+t.after.length}),0);(v+=e.beforeBody.length+e.afterBody.length,u&&(p+=u*c.lineHeight+(u-1)*t.titleSpacing+t.titleMarginBottom),v)&&(p+=f*(t.displayColors?Math.max(o,l.lineHeight):l.lineHeight)+(v-f)*l.lineHeight+(v-1)*t.bodySpacing);h&&(p+=t.footerMarginTop+h*d.lineHeight+(h-1)*t.footerSpacing);var x=0,y=function(e){m=Math.max(m,i.measureText(e).width+x)};return i.save(),i.font=c.string,ie(e.title,y),i.font=l.string,ie(e.beforeBody.concat(e.afterBody),y),x=t.displayColors?s+2+t.boxPadding:0,ie(n,(function(e){ie(e.before,y),ie(e.lines,y),ie(e.after,y)})),x=0,i.font=d.string,ie(e.footer,y),i.restore(),{width:m+=g.width,height:p}}function Dr(e,t,i,n){var a=i.x,r=i.width,s=e.width,o=e.chartArea,l=o.left,c=o.right,d="center";return"center"===n?d=a<=(l+c)/2?"left":"right":a<=r/2?d="left":a>=s-r/2&&(d="right"),function(e,t,i,n){var a=n.x,r=n.width,s=i.caretSize+i.caretPadding;return"left"===e&&a+r+s>t.width||"right"===e&&a-r-s<0||void 0}(d,e,t,i)&&(d="center"),d}function Pr(e,t,i){var n=i.yAlign||t.yAlign||function(e,t){var i=t.y,n=t.height;return i<n/2?"top":i>e.height-n/2?"bottom":"center"}(e,i);return{xAlign:i.xAlign||t.xAlign||Dr(e,t,i,n),yAlign:n}}function Mr(e,t,i,n){var a=e.caretSize,r=e.caretPadding,s=e.cornerRadius,o=i.xAlign,l=i.yAlign,c=a+r,d=Ft(s),u=d.topLeft,h=d.topRight,f=d.bottomLeft,g=d.bottomRight,p=function(e,t){var i=e.x,n=e.width;return"right"===t?i-=n:"center"===t&&(i-=n/2),i}(t,o),m=function(e,t,i){var n=e.y,a=e.height;return"top"===t?n+=i:n-="bottom"===t?a+i:a/2,n}(t,l,c);return"center"===l?"left"===o?p+=c:"right"===o&&(p-=c):"left"===o?p-=Math.max(u,f)+a:"right"===o&&(p+=Math.max(h,g)+a),{x:ze(p,0,n.width-t.width),y:ze(m,0,n.height-t.height)}}function Nr(e,t,i){var n=zt(i.padding);return"center"===t?e.x+e.width/2:"right"===t?e.x+e.width-n.right:e.x+n.left}function Cr(e){return kr([],jr(e))}function Ir(e,t){var i=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return i?e.override(i):e}var Or={beforeTitle:W,title:function(e){if(e.length>0){var t=e[0],i=t.chart.data.labels,n=i?i.length:0;if(this&&this.options&&"dataset"===this.options.mode)return t.dataset.label||"";if(t.label)return t.label;if(n>0&&t.dataIndex<n)return i[t.dataIndex]}return""},afterTitle:W,beforeBody:W,beforeLabel:W,label:function(e){if(this&&this.options&&"dataset"===this.options.mode)return e.label+": "+e.formattedValue||e.formattedValue;var t=e.dataset.label||"";t&&(t+=": ");var i=e.formattedValue;return Q(i)||(t+=i),t},labelColor:function(e){var t=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{borderColor:t.borderColor,backgroundColor:t.backgroundColor,borderWidth:t.borderWidth,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderRadius:0}},labelTextColor:function(){return this.options.bodyColor},labelPointStyle:function(e){var t=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{pointStyle:t.pointStyle,rotation:t.rotation}},afterLabel:W,afterBody:W,beforeFooter:W,footer:W,afterFooter:W};function Lr(e,t,i,n){var a=e[t].call(i,n);return"undefined"===typeof a?Or[t].call(i,n):a}var Tr=function(e){function t(e){var i;return(0,u.default)(this,t),(i=(0,a.default)(this,t)).opacity=0,i._active=[],i._eventPosition=void 0,i._size=void 0,i._cachedAnimations=void 0,i._tooltipItems=[],i.$animations=void 0,i.$context=void 0,i.chart=e.chart,i.options=e.options,i.dataPoints=void 0,i.title=void 0,i.beforeBody=void 0,i.body=void 0,i.afterBody=void 0,i.footer=void 0,i.xAlign=void 0,i.yAlign=void 0,i.x=void 0,i.y=void 0,i.height=void 0,i.width=void 0,i.caretX=void 0,i.caretY=void 0,i.labelColors=void 0,i.labelPointStyles=void 0,i.labelTextColors=void 0,i}return(0,s.default)(t,e),(0,h.default)(t,[{key:"initialize",value:function(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}},{key:"_resolveAnimations",value:function(){var e=this._cachedAnimations;if(e)return e;var t=this.chart,i=this.options.setContext(this.getContext()),n=i.enabled&&t.options.animation&&i.animations,a=new Ui(this.chart,n);return n._cacheable&&(this._cachedAnimations=Object.freeze(a)),a}},{key:"getContext",value:function(){return this.$context||(this.$context=(e=this.chart.getContext(),t=this,i=this._tooltipItems,Yt(e,{tooltip:t,tooltipItems:i,type:"tooltip"})));var e,t,i}},{key:"getTitle",value:function(e,t){var i=t.callbacks,n=Lr(i,"beforeTitle",this,e),a=Lr(i,"title",this,e),r=Lr(i,"afterTitle",this,e),s=[];return s=kr(s,jr(n)),s=kr(s,jr(a)),s=kr(s,jr(r))}},{key:"getBeforeBody",value:function(e,t){return Cr(Lr(t.callbacks,"beforeBody",this,e))}},{key:"getBody",value:function(e,t){var i=this,n=t.callbacks,a=[];return ie(e,(function(e){var t={before:[],lines:[],after:[]},r=Ir(n,e);kr(t.before,jr(Lr(r,"beforeLabel",i,e))),kr(t.lines,Lr(r,"label",i,e)),kr(t.after,jr(Lr(r,"afterLabel",i,e))),a.push(t)})),a}},{key:"getAfterBody",value:function(e,t){return Cr(Lr(t.callbacks,"afterBody",this,e))}},{key:"getFooter",value:function(e,t){var i=t.callbacks,n=Lr(i,"beforeFooter",this,e),a=Lr(i,"footer",this,e),r=Lr(i,"afterFooter",this,e),s=[];return s=kr(s,jr(n)),s=kr(s,jr(a)),s=kr(s,jr(r))}},{key:"_createItems",value:function(e){var t,i,n=this,a=this._active,r=this.chart.data,s=[],o=[],l=[],c=[];for(t=0,i=a.length;t<i;++t)c.push(wr(this.chart,a[t]));return e.filter&&(c=c.filter((function(t,i,n){return e.filter(t,i,n,r)}))),e.itemSort&&(c=c.sort((function(t,i){return e.itemSort(t,i,r)}))),ie(c,(function(t){var i=Ir(e.callbacks,t);s.push(Lr(i,"labelColor",n,t)),o.push(Lr(i,"labelPointStyle",n,t)),l.push(Lr(i,"labelTextColor",n,t))})),this.labelColors=s,this.labelPointStyles=o,this.labelTextColors=l,this.dataPoints=c,c}},{key:"update",value:function(e,t){var i,n=this.options.setContext(this.getContext()),a=this._active,r=[];if(a.length){var s=_r[n.position].call(this,a,this._eventPosition);r=this._createItems(n),this.title=this.getTitle(r,n),this.beforeBody=this.getBeforeBody(r,n),this.body=this.getBody(r,n),this.afterBody=this.getAfterBody(r,n),this.footer=this.getFooter(r,n);var o=this._size=Sr(this,n),l=Object.assign({},s,o),c=Pr(this.chart,n,l),d=Mr(n,l,c,this.chart);this.xAlign=c.xAlign,this.yAlign=c.yAlign,i={opacity:1,x:d.x,y:d.y,width:o.width,height:o.height,caretX:s.x,caretY:s.y}}else 0!==this.opacity&&(i={opacity:0});this._tooltipItems=r,this.$context=void 0,i&&this._resolveAnimations().update(this,i),e&&n.external&&n.external.call(this,{chart:this.chart,tooltip:this,replay:t})}},{key:"drawCaret",value:function(e,t,i,n){var a=this.getCaretPosition(e,i,n);t.lineTo(a.x1,a.y1),t.lineTo(a.x2,a.y2),t.lineTo(a.x3,a.y3)}},{key:"getCaretPosition",value:function(e,t,i){var n,a,r,s,o,l,c=this.xAlign,d=this.yAlign,u=i.caretSize,h=Ft(i.cornerRadius),f=h.topLeft,g=h.topRight,p=h.bottomLeft,m=h.bottomRight,v=e.x,x=e.y,y=t.width,b=t.height;return"center"===d?(o=x+b/2,"left"===c?(a=(n=v)-u,s=o+u,l=o-u):(a=(n=v+y)+u,s=o-u,l=o+u),r=n):(a="left"===c?v+Math.max(f,p)+u:"right"===c?v+y-Math.max(g,m)-u:this.caretX,"top"===d?(o=(s=x)-u,n=a-u,r=a+u):(o=(s=x+b)+u,n=a+u,r=a-u),l=s),{x1:n,x2:a,x3:r,y1:s,y2:o,y3:l}}},{key:"drawTitle",value:function(e,t,i){var n,a,r,s=this.title,o=s.length;if(o){var l=wi(i.rtl,this.x,this.width);for(e.x=Nr(this,i.titleAlign,i),t.textAlign=l.textAlign(i.titleAlign),t.textBaseline="middle",n=Ut(i.titleFont),a=i.titleSpacing,t.fillStyle=i.titleColor,t.font=n.string,r=0;r<o;++r)t.fillText(s[r],l.x(e.x),e.y+n.lineHeight/2),e.y+=n.lineHeight+a,r+1===o&&(e.y+=i.titleMarginBottom-a)}}},{key:"_drawColorBox",value:function(e,t,i,n,a){var r=this.labelColors[i],s=this.labelPointStyles[i],o=a.boxHeight,l=a.boxWidth,c=Ut(a.bodyFont),u=Nr(this,"left",a),h=n.x(u),f=o<c.lineHeight?(c.lineHeight-o)/2:0,g=t.y+f;if(a.usePointStyle){var p={radius:Math.min(l,o)/2,pointStyle:s.pointStyle,rotation:s.rotation,borderWidth:1},m=n.leftForLtr(h,l)+l/2,v=g+o/2;e.strokeStyle=a.multiKeyBackground,e.fillStyle=a.multiKeyBackground,_t(e,p,m,v),e.strokeStyle=r.borderColor,e.fillStyle=r.backgroundColor,_t(e,p,m,v)}else{e.lineWidth=K(r.borderWidth)?Math.max.apply(Math,(0,d.default)(Object.values(r.borderWidth))):r.borderWidth||1,e.strokeStyle=r.borderColor,e.setLineDash(r.borderDash||[]),e.lineDashOffset=r.borderDashOffset||0;var x=n.leftForLtr(h,l),y=n.leftForLtr(n.xPlus(h,1),l-2),b=Ft(r.borderRadius);Object.values(b).some((function(e){return 0!==e}))?(e.beginPath(),e.fillStyle=a.multiKeyBackground,It(e,{x:x,y:g,w:l,h:o,radius:b}),e.fill(),e.stroke(),e.fillStyle=r.backgroundColor,e.beginPath(),It(e,{x:y,y:g+1,w:l-2,h:o-2,radius:b}),e.fill()):(e.fillStyle=a.multiKeyBackground,e.fillRect(x,g,l,o),e.strokeRect(x,g,l,o),e.fillStyle=r.backgroundColor,e.fillRect(y,g+1,l-2,o-2))}e.fillStyle=this.labelTextColors[i]}},{key:"drawBody",value:function(e,t,i){var n,a,r,s,o,l,c,d=this.body,u=i.bodySpacing,h=i.bodyAlign,f=i.displayColors,g=i.boxHeight,p=i.boxWidth,m=i.boxPadding,v=Ut(i.bodyFont),x=v.lineHeight,y=0,b=wi(i.rtl,this.x,this.width),A=function(i){t.fillText(i,b.x(e.x+y),e.y+x/2),e.y+=x+u},_=b.textAlign(h);for(t.textAlign=h,t.textBaseline="middle",t.font=v.string,e.x=Nr(this,_,i),t.fillStyle=i.bodyColor,ie(this.beforeBody,A),y=f&&"right"!==_?"center"===h?p/2+m:p+2+m:0,s=0,l=d.length;s<l;++s){for(n=d[s],a=this.labelTextColors[s],t.fillStyle=a,ie(n.before,A),r=n.lines,f&&r.length&&(this._drawColorBox(t,e,s,b,i),x=Math.max(v.lineHeight,g)),o=0,c=r.length;o<c;++o)A(r[o]),x=v.lineHeight;ie(n.after,A)}y=0,x=v.lineHeight,ie(this.afterBody,A),e.y-=u}},{key:"drawFooter",value:function(e,t,i){var n,a,r=this.footer,s=r.length;if(s){var o=wi(i.rtl,this.x,this.width);for(e.x=Nr(this,i.footerAlign,i),e.y+=i.footerMarginTop,t.textAlign=o.textAlign(i.footerAlign),t.textBaseline="middle",n=Ut(i.footerFont),t.fillStyle=i.footerColor,t.font=n.string,a=0;a<s;++a)t.fillText(r[a],o.x(e.x),e.y+n.lineHeight/2),e.y+=n.lineHeight+i.footerSpacing}}},{key:"drawBackground",value:function(e,t,i,n){var a=this.xAlign,r=this.yAlign,s=e.x,o=e.y,l=i.width,c=i.height,d=Ft(n.cornerRadius),u=d.topLeft,h=d.topRight,f=d.bottomLeft,g=d.bottomRight;t.fillStyle=n.backgroundColor,t.strokeStyle=n.borderColor,t.lineWidth=n.borderWidth,t.beginPath(),t.moveTo(s+u,o),"top"===r&&this.drawCaret(e,t,i,n),t.lineTo(s+l-h,o),t.quadraticCurveTo(s+l,o,s+l,o+h),"center"===r&&"right"===a&&this.drawCaret(e,t,i,n),t.lineTo(s+l,o+c-g),t.quadraticCurveTo(s+l,o+c,s+l-g,o+c),"bottom"===r&&this.drawCaret(e,t,i,n),t.lineTo(s+f,o+c),t.quadraticCurveTo(s,o+c,s,o+c-f),"center"===r&&"left"===a&&this.drawCaret(e,t,i,n),t.lineTo(s,o+u),t.quadraticCurveTo(s,o,s+u,o),t.closePath(),t.fill(),n.borderWidth>0&&t.stroke()}},{key:"_updateAnimationTarget",value:function(e){var t=this.chart,i=this.$animations,n=i&&i.x,a=i&&i.y;if(n||a){var r=_r[e.position].call(this,this._active,this._eventPosition);if(!r)return;var s=this._size=Sr(this,e),o=Object.assign({},r,this._size),l=Pr(t,e,o),c=Mr(e,o,l,t);n._to===c.x&&a._to===c.y||(this.xAlign=l.xAlign,this.yAlign=l.yAlign,this.width=s.width,this.height=s.height,this.caretX=r.x,this.caretY=r.y,this._resolveAnimations().update(this,c))}}},{key:"_willRender",value:function(){return!!this.opacity}},{key:"draw",value:function(e){var t=this.options.setContext(this.getContext()),i=this.opacity;if(i){this._updateAnimationTarget(t);var n={width:this.width,height:this.height},a={x:this.x,y:this.y};i=Math.abs(i)<.001?0:i;var r=zt(t.padding),s=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;t.enabled&&s&&(e.save(),e.globalAlpha=i,this.drawBackground(a,e,n,t),Si(e,t.textDirection),a.y+=r.top,this.drawTitle(a,e,t),this.drawBody(a,e,t),this.drawFooter(a,e,t),Di(e,t.textDirection),e.restore())}}},{key:"getActiveElements",value:function(){return this._active||[]}},{key:"setActiveElements",value:function(e,t){var i=this,n=this._active,a=e.map((function(e){var t=e.datasetIndex,n=e.index,a=i.chart.getDatasetMeta(t);if(!a)throw new Error("Cannot find a dataset at index "+t);return{datasetIndex:t,element:a.data[n],index:n}})),r=!ne(n,a),s=this._positionChanged(a,t);(r||s)&&(this._active=a,this._eventPosition=t,this._ignoreReplayEvents=!0,this.update(!0))}},{key:"handleEvent",value:function(e,t){var i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(t&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;var n=this.options,a=this._active||[],r=this._getActiveElements(e,a,t,i),s=this._positionChanged(r,e),o=t||!ne(r,a)||s;return o&&(this._active=r,(n.enabled||n.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,t))),o}},{key:"_getActiveElements",value:function(e,t,i,n){var a=this,r=this.options;if("mouseout"===e.type)return[];if(!n)return t.filter((function(e){return a.chart.data.datasets[e.datasetIndex]&&void 0!==a.chart.getDatasetMeta(e.datasetIndex).controller.getParsed(e.index)}));var s=this.chart.getElementsAtEventForMode(e,r.mode,r,i);return r.reverse&&s.reverse(),s}},{key:"_positionChanged",value:function(e,t){var i=this.caretX,n=this.caretY,a=this.options,r=_r[a.position].call(this,e,t);return!1!==r&&(i!==r.x||n!==r.y)}}])}(aa);(0,c.default)(Tr,"positioners",_r);var Rr={id:"tooltip",_element:Tr,positioners:_r,afterInit:function(e,t,i){i&&(e.tooltip=new Tr({chart:e,options:i}))},beforeUpdate:function(e,t,i){e.tooltip&&e.tooltip.initialize(i)},reset:function(e,t,i){e.tooltip&&e.tooltip.initialize(i)},afterDraw:function(e){var t=e.tooltip;if(t&&t._willRender()){var i={tooltip:t};if(!1===e.notifyPlugins("beforeTooltipDraw",(0,n.default)((0,n.default)({},i),{},{cancelable:!0})))return;t.draw(e.ctx),e.notifyPlugins("afterTooltipDraw",i)}},afterEvent:function(e,t){if(e.tooltip){var i=t.replay;e.tooltip.handleEvent(t.event,i,t.inChartArea)&&(t.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:function(e,t){return t.bodyFont.size},boxWidth:function(e,t){return t.bodyFont.size},multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:Or},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:function(e){return"filter"!==e&&"itemSort"!==e&&"external"!==e},_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};function Er(e,t,i,n){var a=e.indexOf(t);return-1===a?function(e,t,i,n){return"string"===typeof t?(i=e.push(t)-1,n.unshift({index:i,label:t})):isNaN(t)&&(i=null),i}(e,t,i,n):a!==e.lastIndexOf(t)?i:a}function Fr(e){var t=this.getLabels();return e>=0&&e<t.length?t[e]:e}var zr=function(e){function t(e){var i;return(0,u.default)(this,t),(i=(0,a.default)(this,t,[e]))._startValue=void 0,i._valueRange=0,i._addedLabels=[],i}return(0,s.default)(t,e),(0,h.default)(t,[{key:"init",value:function(e){var i=this._addedLabels;if(i.length){var n,a=this.getLabels(),s=(0,l.default)(i);try{for(s.s();!(n=s.n()).done;){var o=n.value,c=o.index,d=o.label;a[c]===d&&a.splice(c,1)}}catch(u){s.e(u)}finally{s.f()}this._addedLabels=[]}(0,r.A)(t,"init",this,3)([e])}},{key:"parse",value:function(e,t){if(Q(e))return null;var i=this.getLabels();return function(e,t){return null===e?null:ze(Math.round(e),0,t)}(t=isFinite(t)&&i[t]===e?t:Er(i,e,J(t,e),this._addedLabels),i.length-1)}},{key:"determineDataLimits",value:function(){var e=this.getUserBounds(),t=e.minDefined,i=e.maxDefined,n=this.getMinMax(!0),a=n.min,r=n.max;"ticks"===this.options.bounds&&(t||(a=0),i||(r=this.getLabels().length-1)),this.min=a,this.max=r}},{key:"buildTicks",value:function(){var e=this.min,t=this.max,i=this.options.offset,n=[],a=this.getLabels();a=0===e&&t===a.length-1?a:a.slice(e,t+1),this._valueRange=Math.max(a.length-(i?0:1),1),this._startValue=this.min-(i?.5:0);for(var r=e;r<=t;r++)n.push({value:r});return n}},{key:"getLabelForValue",value:function(e){return Fr.call(this,e)}},{key:"configure",value:function(){(0,r.A)(t,"configure",this,3)([]),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}},{key:"getPixelForValue",value:function(e){return"number"!==typeof e&&(e=this.parse(e)),null===e?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}},{key:"getPixelForTick",value:function(e){var t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}},{key:"getValueForPixel",value:function(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}},{key:"getBasePixel",value:function(){return this.bottom}}])}(ga);function Ur(e,t){var i,n,a,r,s=[],o=e.bounds,l=e.step,c=e.min,d=e.max,u=e.precision,h=e.count,f=e.maxTicks,g=e.maxDigits,p=e.includeBounds,m=l||1,v=f-1,x=t.min,y=t.max,b=!Q(c),A=!Q(d),_=!Q(h),k=(y-x)/(g+1),j=Pe((y-x)/v/m)*m;if(j<1e-14&&!b&&!A)return[{value:x},{value:y}];(r=Math.ceil(y/j)-Math.floor(x/j))>v&&(j=Pe(r*j/v/m)*m),Q(u)||(i=Math.pow(10,u),j=Math.ceil(j*i)/i),"ticks"===o?(n=Math.floor(x/j)*j,a=Math.ceil(y/j)*j):(n=x,a=y),b&&A&&l&&function(e,t){var i=Math.round(e);return i-t<=e&&i+t>=e}((d-c)/l,j/1e3)?(j=(d-c)/(r=Math.round(Math.min((d-c)/j,f))),n=c,a=d):_?j=((a=A?d:a)-(n=b?c:n))/(r=h-1):r=De(r=(a-n)/j,Math.round(r),j/1e3)?Math.round(r):Math.ceil(r);var w=Math.max(Oe(j),Oe(n));i=Math.pow(10,Q(u)?w:u),n=Math.round(n*i)/i,a=Math.round(a*i)/i;var S=0;for(b&&(p&&n!==c?(s.push({value:c}),n<c&&S++,De(Math.round((n+S*j)*i)/i,c,Br(c,k,e))&&S++):n<c&&S++);S<r;++S){var D=Math.round((n+S*j)*i)/i;if(A&&D>d)break;s.push({value:D})}return A&&p&&a!==d?s.length&&De(s[s.length-1].value,d,Br(d,k,e))?s[s.length-1].value=d:s.push({value:d}):A&&a!==d||s.push({value:a}),s}function Br(e,t,i){var n=i.horizontal,a=Ce(i.minRotation),r=(n?Math.sin(a):Math.cos(a))||.001,s=.75*t*(""+e).length;return Math.min(t/r,s)}(0,c.default)(zr,"id","category"),(0,c.default)(zr,"defaults",{ticks:{callback:Fr}});var Yr=function(e){function t(e){var i;return(0,u.default)(this,t),(i=(0,a.default)(this,t,[e])).start=void 0,i.end=void 0,i._startValue=void 0,i._endValue=void 0,i._valueRange=0,i}return(0,s.default)(t,e),(0,h.default)(t,[{key:"parse",value:function(e,t){return Q(e)||("number"===typeof e||e instanceof Number)&&!isFinite(+e)?null:+e}},{key:"handleTickRangeOptions",value:function(){var e=this.options.beginAtZero,t=this.getUserBounds(),i=t.minDefined,n=t.maxDefined,a=this.min,r=this.max,s=function(e){return a=i?a:e},o=function(e){return r=n?r:e};if(e){var l=Se(a),c=Se(r);l<0&&c<0?o(0):l>0&&c>0&&s(0)}if(a===r){var d=0===r?1:Math.abs(.05*r);o(r+d),e||s(a-d)}this.min=a,this.max=r}},{key:"getTickLimit",value:function(){var e,t=this.options.ticks,i=t.maxTicksLimit,n=t.stepSize;return n?(e=Math.ceil(this.max/n)-Math.floor(this.min/n)+1)>1e3&&(console.warn("scales.".concat(this.id,".ticks.stepSize: ").concat(n," would result generating up to ").concat(e," ticks. Limiting to 1000.")),e=1e3):(e=this.computeTickLimit(),i=i||11),i&&(e=Math.min(i,e)),e}},{key:"computeTickLimit",value:function(){return Number.POSITIVE_INFINITY}},{key:"buildTicks",value:function(){var e=this.options,t=e.ticks,i=this.getTickLimit(),n=Ur({maxTicks:i=Math.max(2,i),bounds:e.bounds,min:e.min,max:e.max,precision:t.precision,step:t.stepSize,count:t.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:t.minRotation||0,includeBounds:!1!==t.includeBounds},this._range||this);return"ticks"===e.bounds&&Ne(n,this,"value"),e.reverse?(n.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),n}},{key:"configure",value:function(){var e=this.ticks,i=this.min,n=this.max;if((0,r.A)(t,"configure",this,3)([]),this.options.offset&&e.length){var a=(n-i)/Math.max(e.length-1,1)/2;i-=a,n+=a}this._startValue=i,this._endValue=n,this._valueRange=n-i}},{key:"getLabelForValue",value:function(e){return ct(e,this.chart.options.locale,this.options.ticks.format)}}])}(ga),Vr=function(e){function t(){return(0,u.default)(this,t),(0,a.default)(this,t,arguments)}return(0,s.default)(t,e),(0,h.default)(t,[{key:"determineDataLimits",value:function(){var e=this.getMinMax(!0),t=e.min,i=e.max;this.min=$(t)?t:0,this.max=$(i)?i:1,this.handleTickRangeOptions()}},{key:"computeTickLimit",value:function(){var e=this.isHorizontal(),t=e?this.width:this.height,i=Ce(this.options.ticks.minRotation),n=(e?Math.sin(i):Math.cos(i))||.001,a=this._resolveTickFontOptions(0);return Math.ceil(t/Math.min(40,a.lineHeight/n))}},{key:"getPixelForValue",value:function(e){return null===e?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}},{key:"getValueForPixel",value:function(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}])}(Yr);(0,c.default)(Vr,"id","linear"),(0,c.default)(Vr,"defaults",{ticks:{callback:ut.formatters.numeric}});var qr=function(e){return Math.floor(we(e))},Hr=function(e,t){return Math.pow(10,qr(e)+t)};function Wr(e){return 1===e/Math.pow(10,qr(e))}function Gr(e,t,i){var n=Math.pow(10,i),a=Math.floor(e/n);return Math.ceil(t/n)-a}function Qr(e,t){var i=t.min,n=t.max;i=Z(e.min,i);for(var a=[],r=qr(i),s=function(e,t){for(var i=qr(t-e);Gr(e,t,i)>10;)i++;for(;Gr(e,t,i)<10;)i--;return Math.min(i,qr(e))}(i,n),o=s<0?Math.pow(10,Math.abs(s)):1,l=Math.pow(10,s),c=r>s?Math.pow(10,r):0,d=Math.round((i-c)*o)/o,u=Math.floor((i-c)/l/10)*l*10,h=Math.floor((d-u)/Math.pow(10,s)),f=Z(e.min,Math.round((c+u+h*Math.pow(10,s))*o)/o);f<n;)a.push({value:f,major:Wr(f),significand:h}),h>=10?h=h<15?15:20:h++,h>=20&&(h=2,o=++s>=0?1:o),f=Math.round((c+u+h*Math.pow(10,s))*o)/o;var g=Z(e.max,f);return a.push({value:g,major:Wr(g),significand:h}),a}var Xr=function(e){function t(e){var i;return(0,u.default)(this,t),(i=(0,a.default)(this,t,[e])).start=void 0,i.end=void 0,i._startValue=void 0,i._valueRange=0,i}return(0,s.default)(t,e),(0,h.default)(t,[{key:"parse",value:function(e,t){var i=Yr.prototype.parse.apply(this,[e,t]);if(0!==i)return $(i)&&i>0?i:null;this._zero=!0}},{key:"determineDataLimits",value:function(){var e=this.getMinMax(!0),t=e.min,i=e.max;this.min=$(t)?Math.max(0,t):null,this.max=$(i)?Math.max(0,i):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!$(this._userMin)&&(this.min=t===Hr(this.min,0)?Hr(this.min,-1):Hr(this.min,0)),this.handleTickRangeOptions()}},{key:"handleTickRangeOptions",value:function(){var e=this.getUserBounds(),t=e.minDefined,i=e.maxDefined,n=this.min,a=this.max,r=function(e){return n=t?n:e},s=function(e){return a=i?a:e};n===a&&(n<=0?(r(1),s(10)):(r(Hr(n,-1)),s(Hr(a,1)))),n<=0&&r(Hr(a,-1)),a<=0&&s(Hr(n,1)),this.min=n,this.max=a}},{key:"buildTicks",value:function(){var e=this.options,t=Qr({min:this._userMin,max:this._userMax},this);return"ticks"===e.bounds&&Ne(t,this,"value"),e.reverse?(t.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),t}},{key:"getLabelForValue",value:function(e){return void 0===e?"0":ct(e,this.chart.options.locale,this.options.ticks.format)}},{key:"configure",value:function(){var e=this.min;(0,r.A)(t,"configure",this,3)([]),this._startValue=we(e),this._valueRange=we(this.max)-we(e)}},{key:"getPixelForValue",value:function(e){return void 0!==e&&0!==e||(e=this.min),null===e||isNaN(e)?NaN:this.getPixelForDecimal(e===this.min?0:(we(e)-this._startValue)/this._valueRange)}},{key:"getValueForPixel",value:function(e){var t=this.getDecimalForPixel(e);return Math.pow(10,this._startValue+t*this._valueRange)}}])}(ga);function Kr(e){var t=e.ticks;if(t.display&&e.display){var i=zt(t.backdropPadding);return J(t.font&&t.font.size,vt.font.size)+i.height}return 0}function $r(e,t,i,n,a){return e===n||e===a?{start:t-i/2,end:t+i/2}:e<n||e>a?{start:t-i,end:t}:{start:t,end:t+i}}function Zr(e){for(var t,i,n,a={l:e.left+e._padding.left,r:e.right-e._padding.right,t:e.top+e._padding.top,b:e.bottom-e._padding.bottom},r=Object.assign({},a),s=[],o=[],l=e._pointLabels.length,c=e.options.pointLabels,d=c.centerPointLabels?ve/l:0,u=0;u<l;u++){var h=c.setContext(e.getPointLabelContext(u));o[u]=h.padding;var f=e.getPointPosition(u,e.drawingArea+o[u],d),g=Ut(h.font),p=(t=e.ctx,i=g,n=X(n=e._pointLabels[u])?n:[n],{w:yt(t,i.string,n),h:n.length*i.lineHeight});s[u]=p;var m=Ee(e.getIndexAngle(u)+d),v=Math.round(Ie(m));Jr(r,a,m,$r(v,f.x,p.w,0,180),$r(v,f.y,p.h,90,270))}e.setCenterPoint(a.l-r.l,r.r-a.r,a.t-r.t,r.b-a.b),e._pointLabelItems=function(e,t,i){for(var n,a=[],r=e._pointLabels.length,s=e.options,o=s.pointLabels,l=o.centerPointLabels,c=o.display,d={extra:Kr(s)/2,additionalAngle:l?ve/r:0},u=0;u<r;u++){d.padding=i[u],d.size=t[u];var h=es(e,u,d);a.push(h),"auto"===c&&(h.visible=ts(h,n),h.visible&&(n=h))}return a}(e,s,o)}function Jr(e,t,i,n,a){var r=Math.abs(Math.sin(i)),s=Math.abs(Math.cos(i)),o=0,l=0;n.start<t.l?(o=(t.l-n.start)/r,e.l=Math.min(e.l,t.l-o)):n.end>t.r&&(o=(n.end-t.r)/r,e.r=Math.max(e.r,t.r+o)),a.start<t.t?(l=(t.t-a.start)/s,e.t=Math.min(e.t,t.t-l)):a.end>t.b&&(l=(a.end-t.b)/s,e.b=Math.max(e.b,t.b+l))}function es(e,t,i){var n=e.drawingArea,a=i.extra,r=i.additionalAngle,s=i.padding,o=i.size,l=e.getPointPosition(t,n+a+s,r),c=Math.round(Ie(Ee(l.angle+_e))),d=function(e,t,i){90===i||270===i?e-=t/2:(i>270||i<90)&&(e-=t);return e}(l.y,o.h,c),u=function(e){if(0===e||180===e)return"center";if(e<180)return"left";return"right"}(c),h=function(e,t,i){"right"===i?e-=t:"center"===i&&(e-=t/2);return e}(l.x,o.w,u);return{visible:!0,x:l.x,y:d,textAlign:u,left:h,top:d,right:h+o.w,bottom:d+o.h}}function ts(e,t){if(!t)return!0;var i=e.left,n=e.top,a=e.right,r=e.bottom;return!(jt({x:i,y:n},t)||jt({x:i,y:r},t)||jt({x:a,y:n},t)||jt({x:a,y:r},t))}function is(e,t,i){var n=i.left,a=i.top,r=i.right,s=i.bottom,o=t.backdropColor;if(!Q(o)){var l=Ft(t.borderRadius),c=zt(t.backdropPadding);e.fillStyle=o;var d=n-c.left,u=a-c.top,h=r-n+c.width,f=s-a+c.height;Object.values(l).some((function(e){return 0!==e}))?(e.beginPath(),It(e,{x:d,y:u,w:h,h:f,radius:l}),e.fill()):e.fillRect(d,u,h,f)}}function ns(e,t,i,n){var a=e.ctx;if(i)a.arc(e.xCenter,e.yCenter,t,0,xe);else{var r=e.getPointPosition(0,t);a.moveTo(r.x,r.y);for(var s=1;s<n;s++)r=e.getPointPosition(s,t),a.lineTo(r.x,r.y)}}(0,c.default)(Xr,"id","logarithmic"),(0,c.default)(Xr,"defaults",{ticks:{callback:ut.formatters.logarithmic,major:{enabled:!0}}});var as=function(e){function t(e){var i;return(0,u.default)(this,t),(i=(0,a.default)(this,t,[e])).xCenter=void 0,i.yCenter=void 0,i.drawingArea=void 0,i._pointLabels=[],i._pointLabelItems=[],i}return(0,s.default)(t,e),(0,h.default)(t,[{key:"setDimensions",value:function(){var e=this._padding=zt(Kr(this.options)/2),t=this.width=this.maxWidth-e.width,i=this.height=this.maxHeight-e.height;this.xCenter=Math.floor(this.left+t/2+e.left),this.yCenter=Math.floor(this.top+i/2+e.top),this.drawingArea=Math.floor(Math.min(t,i)/2)}},{key:"determineDataLimits",value:function(){var e=this.getMinMax(!1),t=e.min,i=e.max;this.min=$(t)&&!isNaN(t)?t:0,this.max=$(i)&&!isNaN(i)?i:0,this.handleTickRangeOptions()}},{key:"computeTickLimit",value:function(){return Math.ceil(this.drawingArea/Kr(this.options))}},{key:"generateTickLabels",value:function(e){var t=this;Yr.prototype.generateTickLabels.call(this,e),this._pointLabels=this.getLabels().map((function(e,i){var n=te(t.options.pointLabels.callback,[e,i],t);return n||0===n?n:""})).filter((function(e,i){return t.chart.getDataVisibility(i)}))}},{key:"fit",value:function(){var e=this.options;e.display&&e.pointLabels.display?Zr(this):this.setCenterPoint(0,0,0,0)}},{key:"setCenterPoint",value:function(e,t,i,n){this.xCenter+=Math.floor((e-t)/2),this.yCenter+=Math.floor((i-n)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(e,t,i,n))}},{key:"getIndexAngle",value:function(e){return Ee(e*(xe/(this._pointLabels.length||1))+Ce(this.options.startAngle||0))}},{key:"getDistanceFromCenterForValue",value:function(e){if(Q(e))return NaN;var t=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-e)*t:(e-this.min)*t}},{key:"getValueForDistanceFromCenter",value:function(e){if(Q(e))return NaN;var t=e/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-t:this.min+t}},{key:"getPointLabelContext",value:function(e){var t=this._pointLabels||[];if(e>=0&&e<t.length){var i=t[e];return function(e,t,i){return Yt(e,{label:i,index:t,type:"pointLabel"})}(this.getContext(),e,i)}}},{key:"getPointPosition",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=this.getIndexAngle(e)-_e+i;return{x:Math.cos(n)*t+this.xCenter,y:Math.sin(n)*t+this.yCenter,angle:n}}},{key:"getPointPositionForValue",value:function(e,t){return this.getPointPosition(e,this.getDistanceFromCenterForValue(t))}},{key:"getBasePosition",value:function(e){return this.getPointPositionForValue(e||0,this.getBaseValue())}},{key:"getPointLabelPosition",value:function(e){var t=this._pointLabelItems[e];return{left:t.left,top:t.top,right:t.right,bottom:t.bottom}}},{key:"drawBackground",value:function(){var e=this.options,t=e.backgroundColor,i=e.grid.circular;if(t){var n=this.ctx;n.save(),n.beginPath(),ns(this,this.getDistanceFromCenterForValue(this._endValue),i,this._pointLabels.length),n.closePath(),n.fillStyle=t,n.fill(),n.restore()}}},{key:"drawGrid",value:function(){var e,t,i,n=this,a=this.ctx,r=this.options,s=r.angleLines,o=r.grid,l=r.border,c=this._pointLabels.length;if(r.pointLabels.display&&function(e,t){for(var i=e.ctx,n=e.options.pointLabels,a=t-1;a>=0;a--){var r=e._pointLabelItems[a];if(r.visible){var s=n.setContext(e.getPointLabelContext(a));is(i,s,r);var o=Ut(s.font),l=r.x,c=r.y,d=r.textAlign;Ct(i,e._pointLabels[a],l,c+o.lineHeight/2,o,{color:s.color,textAlign:d,textBaseline:"middle"})}}}(this,c),o.display&&this.ticks.forEach((function(e,i){if(0!==i||0===i&&n.min<0){t=n.getDistanceFromCenterForValue(e.value);var a=n.getContext(i),r=o.setContext(a),s=l.setContext(a);!function(e,t,i,n,a){var r=e.ctx,s=t.circular,o=t.color,l=t.lineWidth;!s&&!n||!o||!l||i<0||(r.save(),r.strokeStyle=o,r.lineWidth=l,r.setLineDash(a.dash||[]),r.lineDashOffset=a.dashOffset,r.beginPath(),ns(e,i,s,n),r.closePath(),r.stroke(),r.restore())}(n,r,t,c,s)}})),s.display){for(a.save(),e=c-1;e>=0;e--){var d=s.setContext(this.getPointLabelContext(e)),u=d.color,h=d.lineWidth;h&&u&&(a.lineWidth=h,a.strokeStyle=u,a.setLineDash(d.borderDash),a.lineDashOffset=d.borderDashOffset,t=this.getDistanceFromCenterForValue(r.reverse?this.min:this.max),i=this.getPointPosition(e,t),a.beginPath(),a.moveTo(this.xCenter,this.yCenter),a.lineTo(i.x,i.y),a.stroke())}a.restore()}}},{key:"drawBorder",value:function(){}},{key:"drawLabels",value:function(){var e=this,t=this.ctx,i=this.options,n=i.ticks;if(n.display){var a,r,s=this.getIndexAngle(0);t.save(),t.translate(this.xCenter,this.yCenter),t.rotate(s),t.textAlign="center",t.textBaseline="middle",this.ticks.forEach((function(s,o){if(!(0===o&&e.min>=0)||i.reverse){var l=n.setContext(e.getContext(o)),c=Ut(l.font);if(a=e.getDistanceFromCenterForValue(e.ticks[o].value),l.showLabelBackdrop){t.font=c.string,r=t.measureText(s.label).width,t.fillStyle=l.backdropColor;var d=zt(l.backdropPadding);t.fillRect(-r/2-d.left,-a-c.size/2-d.top,r+d.width,c.size+d.height)}Ct(t,s.label,0,-a,c,{color:l.color,strokeColor:l.textStrokeColor,strokeWidth:l.textStrokeWidth})}})),t.restore()}}},{key:"drawTitle",value:function(){}}])}(Yr);(0,c.default)(as,"id","radialLinear"),(0,c.default)(as,"defaults",{display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:ut.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback:function(e){return e},padding:5,centerPointLabels:!1}}),(0,c.default)(as,"defaultRoutes",{"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"}),(0,c.default)(as,"descriptors",{angleLines:{_fallback:"grid"}});var rs={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},ss=Object.keys(rs);function os(e,t){return e-t}function ls(e,t){if(Q(t))return null;var i=e._adapter,n=e._parseOpts,a=n.parser,r=n.round,s=n.isoWeekday,o=t;return"function"===typeof a&&(o=a(o)),$(o)||(o="string"===typeof a?i.parse(o,a):i.parse(o)),null===o?null:(r&&(o="week"!==r||!Me(s)&&!0!==s?i.startOf(o,r):i.startOf(o,"isoWeek",s)),+o)}function cs(e,t,i,n){for(var a=ss.length,r=ss.indexOf(e);r<a-1;++r){var s=rs[ss[r]],o=s.steps?s.steps:Number.MAX_SAFE_INTEGER;if(s.common&&Math.ceil((i-t)/(o*s.size))<=n)return ss[r]}return ss[a-1]}function ds(e,t,i){if(i){if(i.length){var n=Be(i,t),a=n.lo,r=n.hi;e[i[a]>=t?i[a]:i[r]]=!0}}else e[t]=!0}function us(e,t,i){var n,a,r=[],s={},o=t.length;for(n=0;n<o;++n)s[a=t[n]]=n,r.push({value:a,major:!1});return 0!==o&&i?function(e,t,i,n){var a,r,s=e._adapter,o=+s.startOf(t[0].value,n),l=t[t.length-1].value;for(a=o;a<=l;a=+s.add(a,1,n))(r=i[a])>=0&&(t[r].major=!0);return t}(e,r,s,i):r}var hs=function(e){function t(e){var i;return(0,u.default)(this,t),(i=(0,a.default)(this,t,[e]))._cache={data:[],labels:[],all:[]},i._unit="day",i._majorUnit=void 0,i._offsets={},i._normalized=!1,i._parseOpts=void 0,i}return(0,s.default)(t,e),(0,h.default)(t,[{key:"init",value:function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.time||(e.time={}),a=this._adapter=new vn._date(e.adapters.date);a.init(i),le(n.displayFormats,a.formats()),this._parseOpts={parser:n.parser,round:n.round,isoWeekday:n.isoWeekday},(0,r.A)(t,"init",this,3)([e]),this._normalized=i.normalized}},{key:"parse",value:function(e,t){return void 0===e?null:ls(this,e)}},{key:"beforeLayout",value:function(){(0,r.A)(t,"beforeLayout",this,3)([]),this._cache={data:[],labels:[],all:[]}}},{key:"determineDataLimits",value:function(){var e=this.options,t=this._adapter,i=e.time.unit||"day",n=this.getUserBounds(),a=n.min,r=n.max,s=n.minDefined,o=n.maxDefined;function l(e){s||isNaN(e.min)||(a=Math.min(a,e.min)),o||isNaN(e.max)||(r=Math.max(r,e.max))}s&&o||(l(this._getLabelBounds()),"ticks"===e.bounds&&"labels"===e.ticks.source||l(this.getMinMax(!1))),a=$(a)&&!isNaN(a)?a:+t.startOf(Date.now(),i),r=$(r)&&!isNaN(r)?r:+t.endOf(Date.now(),i)+1,this.min=Math.min(a,r-1),this.max=Math.max(a+1,r)}},{key:"_getLabelBounds",value:function(){var e=this.getLabelTimestamps(),t=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY;return e.length&&(t=e[0],i=e[e.length-1]),{min:t,max:i}}},{key:"buildTicks",value:function(){var e=this.options,t=e.time,i=e.ticks,n="labels"===i.source?this.getLabelTimestamps():this._generate();"ticks"===e.bounds&&n.length&&(this.min=this._userMin||n[0],this.max=this._userMax||n[n.length-1]);var a=this.min,r=function(e,t,i){for(var n=0,a=e.length;n<a&&e[n]<t;)n++;for(;a>n&&e[a-1]>i;)a--;return n>0||a<e.length?e.slice(n,a):e}(n,a,this.max);return this._unit=t.unit||(i.autoSkip?cs(t.minUnit,this.min,this.max,this._getLabelCapacity(a)):function(e,t,i,n,a){for(var r=ss.length-1;r>=ss.indexOf(i);r--){var s=ss[r];if(rs[s].common&&e._adapter.diff(a,n,s)>=t-1)return s}return ss[i?ss.indexOf(i):0]}(this,r.length,t.minUnit,this.min,this.max)),this._majorUnit=i.major.enabled&&"year"!==this._unit?function(e){for(var t=ss.indexOf(e)+1,i=ss.length;t<i;++t)if(rs[ss[t]].common)return ss[t]}(this._unit):void 0,this.initOffsets(n),e.reverse&&r.reverse(),us(this,r,this._majorUnit)}},{key:"afterAutoSkip",value:function(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map((function(e){return+e.value})))}},{key:"initOffsets",value:function(){var e,t,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=0,a=0;this.options.offset&&i.length&&(e=this.getDecimalForValue(i[0]),n=1===i.length?1-e:(this.getDecimalForValue(i[1])-e)/2,t=this.getDecimalForValue(i[i.length-1]),a=1===i.length?t:(t-this.getDecimalForValue(i[i.length-2]))/2);var r=i.length<3?.5:.25;n=ze(n,0,r),a=ze(a,0,r),this._offsets={start:n,end:a,factor:1/(n+1+a)}}},{key:"_generate",value:function(){var e,t,i=this._adapter,n=this.min,a=this.max,r=this.options,s=r.time,o=s.unit||cs(s.minUnit,n,a,this._getLabelCapacity(n)),l=J(r.ticks.stepSize,1),c="week"===o&&s.isoWeekday,d=Me(c)||!0===c,u={},h=n;if(d&&(h=+i.startOf(h,"isoWeek",c)),h=+i.startOf(h,d?"day":o),i.diff(a,n,o)>1e5*l)throw new Error(n+" and "+a+" are too far apart with stepSize of "+l+" "+o);var f="data"===r.ticks.source&&this.getDataTimestamps();for(e=h,t=0;e<a;e=+i.add(e,l,o),t++)ds(u,e,f);return e!==a&&"ticks"!==r.bounds&&1!==t||ds(u,e,f),Object.keys(u).sort(os).map((function(e){return+e}))}},{key:"getLabelForValue",value:function(e){var t=this._adapter,i=this.options.time;return i.tooltipFormat?t.format(e,i.tooltipFormat):t.format(e,i.displayFormats.datetime)}},{key:"format",value:function(e,t){var i=this.options.time.displayFormats,n=this._unit,a=t||i[n];return this._adapter.format(e,a)}},{key:"_tickFormatFunction",value:function(e,t,i,n){var a=this.options,r=a.ticks.callback;if(r)return te(r,[e,t,i],this);var s=a.time.displayFormats,o=this._unit,l=this._majorUnit,c=o&&s[o],d=l&&s[l],u=i[t],h=l&&d&&u&&u.major;return this._adapter.format(e,n||(h?d:c))}},{key:"generateTickLabels",value:function(e){var t,i,n;for(t=0,i=e.length;t<i;++t)(n=e[t]).label=this._tickFormatFunction(n.value,t,e)}},{key:"getDecimalForValue",value:function(e){return null===e?NaN:(e-this.min)/(this.max-this.min)}},{key:"getPixelForValue",value:function(e){var t=this._offsets,i=this.getDecimalForValue(e);return this.getPixelForDecimal((t.start+i)*t.factor)}},{key:"getValueForPixel",value:function(e){var t=this._offsets,i=this.getDecimalForPixel(e)/t.factor-t.end;return this.min+i*(this.max-this.min)}},{key:"_getLabelSize",value:function(e){var t=this.options.ticks,i=this.ctx.measureText(e).width,n=Ce(this.isHorizontal()?t.maxRotation:t.minRotation),a=Math.cos(n),r=Math.sin(n),s=this._resolveTickFontOptions(0).size;return{w:i*a+s*r,h:i*r+s*a}}},{key:"_getLabelCapacity",value:function(e){var t=this.options.time,i=t.displayFormats,n=i[t.unit]||i.millisecond,a=this._tickFormatFunction(e,0,us(this,[e],this._majorUnit),n),r=this._getLabelSize(a),s=Math.floor(this.isHorizontal()?this.width/r.w:this.height/r.h)-1;return s>0?s:1}},{key:"getDataTimestamps",value:function(){var e,t,i=this._cache.data||[];if(i.length)return i;var n=this.getMatchingVisibleMetas();if(this._normalized&&n.length)return this._cache.data=n[0].controller.getAllParsedValues(this);for(e=0,t=n.length;e<t;++e)i=i.concat(n[e].controller.getAllParsedValues(this));return this._cache.data=this.normalize(i)}},{key:"getLabelTimestamps",value:function(){var e,t,i=this._cache.labels||[];if(i.length)return i;var n=this.getLabels();for(e=0,t=n.length;e<t;++e)i.push(ls(this,n[e]));return this._cache.labels=this._normalized?i:this.normalize(i)}},{key:"normalize",value:function(e){return We(e.sort(os))}}])}(ga);function fs(e,t,i){var n,a,r,s,o=0,l=e.length-1;if(i){if(t>=e[o].pos&&t<=e[l].pos){var c=Ye(e,"pos",t);o=c.lo,l=c.hi}var d=e[o];n=d.pos,r=d.time;var u=e[l];a=u.pos,s=u.time}else{if(t>=e[o].time&&t<=e[l].time){var h=Ye(e,"time",t);o=h.lo,l=h.hi}var f=e[o];n=f.time,r=f.pos;var g=e[l];a=g.time,s=g.pos}var p=a-n;return p?r+(s-r)*(t-n)/p:r}(0,c.default)(hs,"id","time"),(0,c.default)(hs,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});var gs=function(e){function t(e){var i;return(0,u.default)(this,t),(i=(0,a.default)(this,t,[e]))._table=[],i._minPos=void 0,i._tableRange=void 0,i}return(0,s.default)(t,e),(0,h.default)(t,[{key:"initOffsets",value:function(){var e=this._getTimestampsForTable(),i=this._table=this.buildLookupTable(e);this._minPos=fs(i,this.min),this._tableRange=fs(i,this.max)-this._minPos,(0,r.A)(t,"initOffsets",this,3)([e])}},{key:"buildLookupTable",value:function(e){var t,i,n,a,r,s=this.min,o=this.max,l=[],c=[];for(t=0,i=e.length;t<i;++t)(a=e[t])>=s&&a<=o&&l.push(a);if(l.length<2)return[{time:s,pos:0},{time:o,pos:1}];for(t=0,i=l.length;t<i;++t)r=l[t+1],n=l[t-1],a=l[t],Math.round((r+n)/2)!==a&&c.push({time:a,pos:t/(i-1)});return c}},{key:"_generate",value:function(){var e=this.min,i=this.max,n=(0,r.A)(t,"getDataTimestamps",this,3)([]);return n.includes(e)&&n.length||n.splice(0,0,e),n.includes(i)&&1!==n.length||n.push(i),n.sort((function(e,t){return e-t}))}},{key:"_getTimestampsForTable",value:function(){var e=this._cache.all||[];if(e.length)return e;var t=this.getDataTimestamps(),i=this.getLabelTimestamps();return e=t.length&&i.length?this.normalize(t.concat(i)):t.length?t:i,e=this._cache.all=e}},{key:"getDecimalForValue",value:function(e){return(fs(this._table,e)-this._minPos)/this._tableRange}},{key:"getValueForPixel",value:function(e){var t=this._offsets,i=this.getDecimalForPixel(e)/t.factor-t.end;return fs(this._table,i*this._tableRange+this._minPos,!0)}}])}(hs);(0,c.default)(gs,"id","timeseries"),(0,c.default)(gs,"defaults",hs.defaults)},66187:function(e,t,i){i.d(t,{N1:function(){return m}});var n=i(80045),a=i(89379),r=i(9950),s=i(35298),o=["height","width","redraw","datasetIdKey","type","data","options","plugins","fallbackContent","updateMode"],l="label";function c(e,t){"function"===typeof e?e(t):e&&(e.current=t)}function d(e,t){e.labels=t}function u(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:l,n=[];e.datasets=t.map((function(t){var r=e.datasets.find((function(e){return e[i]===t[i]}));return r&&t.data&&!n.includes(r)?(n.push(r),Object.assign(r,t),r):(0,a.default)({},t)}))}function h(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l,i={labels:[],datasets:[]};return d(i,e.labels),u(i,e.datasets,t),i}function f(e,t){var i=e.height,l=void 0===i?150:i,f=e.width,g=void 0===f?300:f,p=e.redraw,m=void 0!==p&&p,v=e.datasetIdKey,x=e.type,y=e.data,b=e.options,A=e.plugins,_=void 0===A?[]:A,k=e.fallbackContent,j=e.updateMode,w=(0,n.default)(e,o),S=(0,r.useRef)(null),D=(0,r.useRef)(null),P=function(){S.current&&(D.current=new s.t1(S.current,{type:x,data:h(y,v),options:b&&(0,a.default)({},b),plugins:_}),c(t,D.current))},M=function(){c(t,null),D.current&&(D.current.destroy(),D.current=null)};return(0,r.useEffect)((function(){!m&&D.current&&b&&function(e,t){var i=e.options;i&&t&&Object.assign(i,t)}(D.current,b)}),[m,b]),(0,r.useEffect)((function(){!m&&D.current&&d(D.current.config.data,y.labels)}),[m,y.labels]),(0,r.useEffect)((function(){!m&&D.current&&y.datasets&&u(D.current.config.data,y.datasets,v)}),[m,y.datasets]),(0,r.useEffect)((function(){D.current&&(m?(M(),setTimeout(P)):D.current.update(j))}),[m,b,y.labels,y.datasets,j]),(0,r.useEffect)((function(){D.current&&(M(),setTimeout(P))}),[x]),(0,r.useEffect)((function(){return P(),function(){return M()}}),[]),r.createElement("canvas",(0,a.default)({ref:S,role:"img",height:l,width:g},w),k)}var g=(0,r.forwardRef)(f);function p(e,t){return s.t1.register(t),(0,r.forwardRef)((function(t,i){return r.createElement(g,(0,a.default)((0,a.default)({},t),{},{ref:i,type:e}))}))}var m=p("line",s.ZT)}},function(e){e.O(0,[4223],(function(){return t=91298,e(e.s=t);var t}));e.O()}]);