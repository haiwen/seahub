{"version":3,"sources":["components/dialog/create-folder-dialog.js","../node_modules/lodash/_createAggregator.js","../node_modules/lodash/_arrayAggregator.js","../node_modules/lodash/_baseAggregator.js","../node_modules/lodash/_baseEach.js","../node_modules/lodash/_baseForOwn.js","../node_modules/lodash/_baseFor.js","../node_modules/lodash/_createBaseFor.js","../node_modules/lodash/_createBaseEach.js","../node_modules/lodash/_baseIteratee.js","../node_modules/lodash/_baseMatches.js","../node_modules/lodash/_baseIsMatch.js","../node_modules/lodash/_getMatchData.js","../node_modules/lodash/_baseMatchesProperty.js","../node_modules/lodash/get.js","../node_modules/lodash/hasIn.js","../node_modules/lodash/_baseHasIn.js","../node_modules/lodash/_hasPath.js","../node_modules/lodash/property.js","../node_modules/lodash/_baseProperty.js","../node_modules/lodash/_basePropertyDeep.js","pages/sys-admin/side-panel.js","pages/sys-admin/main-panel.js","pages/sys-admin/main-panel-topbar.js","pages/sys-admin/info.js","pages/sys-admin/statistic/statistic-nav.js","pages/sys-admin/statistic/picker.js","pages/sys-admin/statistic/statistic-common-tool.js","pages/sys-admin/statistic/statistic-chart.js","pages/sys-admin/statistic/statistic-file.js","pages/sys-admin/statistic/statistic-storage.js","pages/sys-admin/statistic/traffic-table.js","pages/sys-admin/statistic/traffic-table-body.js","pages/sys-admin/statistic/statistic-traffic-orgs.js","pages/sys-admin/statistic/statistic-traffic-users.js","pages/sys-admin/statistic/statistic-traffic.js","pages/sys-admin/statistic/statistic-users.js","pages/sys-admin/statistic/statistic-reports.js","pages/sys-admin/devices/devices-nav.js","components/dialog/sysadmin-dialog/sysadmin-unlink-device-dialog.js","pages/sys-admin/devices/devices-by-platform.js","pages/sys-admin/devices/desktop-devices.js","pages/sys-admin/devices/mobile-devices.js","pages/sys-admin/user-link.js","pages/sys-admin/devices/devices-errors.js","pages/sys-admin/abuse-reports.js","components/dialog/sysadmin-dialog/set-quota.js","components/dialog/sysadmin-dialog/sysadmin-import-user-dialog.js","components/select-editor/sysadmin-user-role-editor.js","components/dialog/sysadmin-dialog/sysadmin-add-user-dialog.js","components/dialog/sysadmin-dialog/sysadmin-batch-add-admin-dialog.js","components/dialog/common-operation-confirmation-dialog.js","models/sysadmin-user.js","models/sysadmin-admin-user.js","pages/sys-admin/search.js","pages/sys-admin/users/users-nav.js","components/select-editor/sysadmin-user-status-editor.js","components/dialog/op-menu.js","pages/sys-admin/users/users-content.js","pages/sys-admin/users/users.js","pages/sys-admin/users/admin-users.js","pages/sys-admin/users/ldap-imported-users.js","pages/sys-admin/users/ldap-users.js","pages/sys-admin/users/search-users.js","components/dialog/sysadmin-dialog/update-user.js","pages/sys-admin/users/user-nav.js","pages/sys-admin/users/user-info.js","pages/sys-admin/users/user-repos.js","pages/sys-admin/users/user-shared-repos.js","pages/sys-admin/users/user-links.js","pages/sys-admin/users/user-groups.js","components/dialog/sysadmin-dialog/sysadmin-create-repo-dialog.js","pages/sys-admin/repos/repos-nav.js","components/dialog/sysadmin-dialog/sysadmin-share-to-user.js","components/dialog/sysadmin-dialog/sysadmin-share-to-group.js","components/dialog/sysadmin-dialog/sysadmin-share-dialog.js","components/dialog/sysadmin-dialog/sysadmin-lib-history-setting-dialog.js","pages/sys-admin/repos/repos.js","pages/sys-admin/repos/all-repos.js","pages/sys-admin/repos/system-repo.js","pages/sys-admin/repos/trash-repos.js","pages/sys-admin/repos/search-repos.js","models/system-admin/dirent.js","pages/sys-admin/repos/dir-path-bar.js","pages/sys-admin/repos/dir-content.js","pages/sys-admin/repos/dir-view.js","components/dialog/sysadmin-dialog/sysadmin-create-group-dialog.js","components/dialog/sysadmin-dialog/sysadmin-group-transfer-dialog.js","pages/sys-admin/groups/groups-content.js","pages/sys-admin/groups/groups.js","pages/sys-admin/groups/search-groups.js","pages/sys-admin/groups/group-nav.js","pages/sys-admin/groups/group-repos.js","components/dialog/sysadmin-dialog/sysadmin-group-add-member-dialog.js","components/select-editor/sysadmin-group-role-editor.js","pages/sys-admin/groups/group-members.js","pages/sys-admin/departments/departments.js","components/dialog/sysadmin-dialog/sysadmin-add-department-dialog.js","components/dialog/sysadmin-dialog/sysadmin-delete-department-dialog.js","components/dialog/sysadmin-dialog/sysadmin-set-group-quota-dialog.js","pages/sys-admin/departments/group-item.js","pages/sys-admin/departments/departments-list.js","components/dialog/sysadmin-dialog/sysadmin-add-member-dialog.js","components/dialog/sysadmin-dialog/sysadmin-delete-member-dialog.js","components/dialog/sysadmin-dialog/sysadmin-add-repo-dialog.js","components/dialog/sysadmin-dialog/sysadmin-delete-repo-dialog.js","pages/sys-admin/departments/member-item.js","pages/sys-admin/departments/repo-item.js","pages/sys-admin/departments/department-detail.js","pages/sys-admin/links/links-nav.js","pages/sys-admin/links/share-links.js","pages/sys-admin/links/upload-links.js","components/dialog/sysadmin-dialog/sysadmin-add-org-dialog.js","pages/sys-admin/orgs/orgs-content.js","pages/sys-admin/orgs/orgs.js","pages/sys-admin/orgs/search-orgs.js","components/dialog/sysadmin-dialog/sysadmin-set-org-name-dialog.js","components/dialog/sysadmin-dialog/sysadmin-set-org-max-user-number-dialog.js","pages/sys-admin/orgs/org-nav.js","pages/sys-admin/orgs/org-info.js","pages/sys-admin/orgs/org-users.js","pages/sys-admin/orgs/org-groups.js","pages/sys-admin/orgs/org-repos.js","components/dialog/sysadmin-dialog/sysadmin-add-institution-dialog.js","pages/sys-admin/institutions/institutions.js","pages/sys-admin/institutions/institution-nav.js","pages/sys-admin/institutions/institution-info.js","components/dialog/sysadmin-dialog/sysadmin-add-institution-member-dialog.js","pages/sys-admin/institutions/institution-users.js","pages/sys-admin/institutions/institution-admins.js","pages/sys-admin/logs-page/logs-nav.js","components/dialog/sysadmin-dialog/sysadmin-logs-export-excel-dialog.js","pages/sys-admin/logs-page/login-logs.js","pages/sys-admin/logs-page/file-access-item-menu.js","pages/sys-admin/logs-page/file-access-toggle-filter.js","pages/sys-admin/logs-page/file-access-logs.js","pages/sys-admin/logs-page/file-update-logs.js","pages/sys-admin/logs-page/share-permission-logs.js","pages/sys-admin/web-settings/section.js","pages/sys-admin/web-settings/setting-item-base.js","pages/sys-admin/web-settings/input-item.js","pages/sys-admin/web-settings/file-item.js","pages/sys-admin/web-settings/checkbox-item.js","pages/sys-admin/web-settings/web-settings.js","components/dialog/sysadmin-dialog/sysadmin-add-sys-notification-dialog.js","pages/sys-admin/notifications/notifications.js","pages/sys-admin/file-scan-records.js","pages/sys-admin/work-weixin/work-weixin-department-members-list.js","pages/sys-admin/work-weixin/work-weixin-departments-tree-node.js","pages/sys-admin/work-weixin/work-weixin-departments-tree-panel.js","components/dialog/import-work-weixin-department-dialog.js","pages/sys-admin/work-weixin-departments.js","pages/sys-admin/dingtalk/dingtalk-department-members-list.js","pages/sys-admin/dingtalk/dingtalk-departments-tree-node.js","pages/sys-admin/dingtalk/dingtalk-departments-tree-panel.js","components/dialog/import-dingtalk-department-dialog.js","pages/sys-admin/dingtalk-departments.js","pages/sys-admin/invitations/invitations.js","components/dialog/terms-editor-dialog.js","components/dialog/sysadmin-dialog/sysadmin-add-or-update-term-dialog.js","utils/markdown-utils.js","components/dialog/terms-preview-dialog.js","pages/sys-admin/terms-and-conditions/item.js","pages/sys-admin/terms-and-conditions/content.js","pages/sys-admin/terms-and-conditions/terms-and-conditions.js","pages/sys-admin/virus-scan/nav.js","pages/sys-admin/virus-scan/all-virus-files.js","pages/sys-admin/virus-scan/unhandled-virus-files.js","pages/sys-admin/admin-logs/logs-nav.js","pages/sys-admin/admin-logs/operation-logs.js","pages/sys-admin/admin-logs/login-logs.js","pages/sys-admin/index.js","components/dialog/share-admin-link.js","../node_modules/chart.js/dist/Chart.js","../../src/utils.js","../../src/Container.js","../../src/Row.js","../../src/Col.js","../../src/Navbar.js","../../src/NavbarBrand.js","../../src/NavbarToggler.js","../../src/Nav.js","../../src/NavItem.js","../../src/Dropdown.js","../../src/NavLink.js","../../src/Breadcrumb.js","../../src/BreadcrumbItem.js","../../src/Button.js","../../src/ButtonDropdown.js","../../src/ButtonGroup.js","../../src/ButtonToolbar.js","../../src/DropdownItem.js","../../src/DropdownMenu.js","../../src/DropdownToggle.js","../../node_modules/react-transition-group/utils/PropTypes.js","../../node_modules/react-transition-group/Transition.js","../../src/Fade.js","../../src/Badge.js","../../src/Card.js","../../src/CardGroup.js","../../src/CardDeck.js","../../src/CardColumns.js","../../src/CardBody.js","../../src/CardLink.js","../../src/CardFooter.js","../../src/CardHeader.js","../../src/CardImg.js","../../src/CardImgOverlay.js","../../src/CarouselItem.js","../../src/Carousel.js","../../src/CarouselControl.js","../../src/CarouselIndicators.js","../../src/CarouselCaption.js","../../src/UncontrolledCarousel.js","../../src/CardSubtitle.js","../../src/CardText.js","../../src/CardTitle.js","../../src/PopperContent.js","../../src/PopperTargetHelper.js","../../src/Popover.js","../../src/PopoverHeader.js","../../src/PopoverBody.js","../../src/Progress.js","../../src/Portal.js","../../src/Modal.js","../../src/ModalHeader.js","../../src/ModalBody.js","../../src/ModalFooter.js","../../src/Tooltip.js","../../src/Table.js","../../src/ListGroup.js","../../src/Form.js","../../src/FormFeedback.js","../../src/FormGroup.js","../../src/FormText.js","../../src/Input.js","../../src/InputGroup.js","../../src/InputGroupText.js","../../src/InputGroupAddon.js","../../src/InputGroupButton.js","../../src/InputGroupButtonDropdown.js","../../src/Label.js","../../src/Media.js","../../src/Pagination.js","../../src/PaginationItem.js","../../src/PaginationLink.js","../../src/TabContent.js","../../src/TabPane.js","../../src/Jumbotron.js","../../src/Alert.js","../../src/Collapse.js","../../src/ListGroupItem.js","../../src/ListGroupItemHeading.js","../../src/ListGroupItemText.js","../../src/UncontrolledAlert.js","../../src/UncontrolledButtonDropdown.js","../../src/UncontrolledDropdown.js","../../src/UncontrolledTooltip.js","../node_modules/is-url/index.js","components/dialog/commit-details.js","../node_modules/@seafile/seafile-editor/dist/components/topbar-component/header-list.js","../node_modules/@seafile/seafile-editor/dist/components/topbar-component/button-group.js","../node_modules/@seafile/seafile-editor/dist/components/topbar-component/icon-button.js","../node_modules/@seafile/seafile-editor/dist/components/add-link-dialog.js","../node_modules/@seafile/seafile-editor/dist/components/add-image-dialog.js","../node_modules/@seafile/seafile-editor/dist/components/add-formula-dialog.js","../node_modules/@seafile/seafile-editor/dist/components/topbar-component/table-toolbar.js","../node_modules/@seafile/seafile-editor/dist/components/topbar-component/upload-img.js","../node_modules/@seafile/seafile-editor/dist/components/toolbar.js","../../src/history.ts","../../src/history-command.ts","../../src/history-editor.ts","../../src/with-history.ts","../node_modules/@seafile/seafile-editor/dist/editor/editor-utils/range-utils.js","../node_modules/@seafile/seafile-editor/dist/editor/editor-component/textlink-hovermenu.js","../node_modules/@seafile/seafile-editor/dist/components/context-menu.js","../node_modules/@seafile/seafile-editor/dist/editor/element-model/link.js","../node_modules/@seafile/seafile-editor/dist/editor/element-model/image.js","../node_modules/@seafile/seafile-editor/dist/editor/controller/block-element-controller.js","../node_modules/@seafile/seafile-editor/dist/editor/controller/inline-element-controller.js","../node_modules/@seafile/seafile-editor/dist/editor/controller/void-element-controller.js","../node_modules/@seafile/seafile-editor/dist/editor/editor-utils/text-utils.js","../node_modules/@seafile/seafile-editor/dist/editor/controller/shortcut-controller.js","../node_modules/@seafile/seafile-editor/dist/editor/controller/normalize-controller.js","../node_modules/@seafile/seafile-editor/dist/editor/custom/set-event-transfer.js","../node_modules/@seafile/seafile-editor/dist/editor/editor-plugin.js","../node_modules/@seafile/seafile-editor/dist/components/shortcut-dialog.js","../node_modules/@seafile/seafile-editor/dist/editor/simple-editor.js","../node_modules/@seafile/seafile-editor/dist/components/user-help.js","../node_modules/@seafile/seafile-editor/dist/components/comment-dialog.js","../node_modules/@seafile/seafile-editor/dist/components/participants-list.js","../node_modules/@seafile/seafile-editor/dist/css/react-mentions-default-style.js","../node_modules/@seafile/seafile-editor/dist/components/comment-panel.js","../node_modules/@seafile/seafile-editor/dist/components/detail-list-view.js","../node_modules/@seafile/seafile-editor/dist/components/side-panel.js","../node_modules/@seafile/seafile-editor/dist/editor/rich-markdown-editor.js","../node_modules/@seafile/seafile-editor/dist/editor/plain-markdown-editor.js","../node_modules/@seafile/seafile-editor/dist/editor/seafile-editor.js","../node_modules/@seafile/seafile-editor/dist/editor/editor.js","components/empty-tip.js","../node_modules/react-popper/lib/Manager.js","../node_modules/react-popper/lib/Target.js","../node_modules/react-popper/lib/Popper.js","../node_modules/react-popper/lib/Arrow.js","../node_modules/codemirror/mode/markdown/markdown.js","../node_modules/codemirror/mode/meta.js","../node_modules/@seafile/seafile-editor/dist/components/toast/alert.js","../node_modules/@seafile/seafile-editor/dist/components/toast/toast.js","../node_modules/@seafile/seafile-editor/dist/components/toast/toastManager.js","../node_modules/@seafile/seafile-editor/dist/components/toast/toaster.js","../node_modules/@seafile/seafile-editor/dist/components/toast/index.js","../node_modules/lodash/_isStrictComparable.js","../node_modules/lodash/_matchesStrictComparable.js","../node_modules/react-chartjs-2/es/index.js","../node_modules/lodash/keyBy.js","../node_modules/react-popper/lib/react-popper.js"],"names":["CreateForder","props","handleChange","e","target","value","trim","setState","isSubmitBtnActive","childName","handleSubmit","state","newName","checkDuplicatedName","errMessage","gettext","replace","Utils","HTMLescape","path","parentPath","onAddFolder","handleKeyPress","key","preventDefault","toggle","addFolderCancel","newInput","React","createRef","this","length","focus","setSelectionRange","isOpen","for","id","innerRef","input","onKeyPress","onChange","color","className","onClick","disabled","Component","arrayAggregator","require","baseAggregator","baseIteratee","isArray","module","exports","setter","initializer","collection","iteratee","func","accumulator","array","index","baseEach","baseForOwn","createBaseEach","baseFor","keys","object","createBaseFor","fromRight","keysFunc","iterable","Object","isArrayLike","eachFunc","baseMatches","baseMatchesProperty","identity","property","baseIsMatch","getMatchData","matchesStrictComparable","source","matchData","Stack","baseIsEqual","customizer","noCustomizer","data","objValue","srcValue","undefined","stack","result","COMPARE_PARTIAL_FLAG","isStrictComparable","get","hasIn","isKey","toKey","baseGet","defaultValue","baseHasIn","hasPath","castPath","isArguments","isIndex","isLength","hasFunc","baseProperty","basePropertyDeep","SidePanel","getActiveClass","tab","currentTab","isSidePanelClosed","onCloseSidePanel","canViewSystemInfo","to","siteRoot","tabItemClick","aria-hidden","isPro","canViewStatistic","otherPermission","constanceEnabled","canConfigSystem","canManageLibrary","canManageUser","canManageGroup","multiTenancy","multiInstitution","sysadminExtraEnabled","canViewUserLog","enableFileScan","enableGuestInvitation","enableTermsAndConditions","canViewAdminLog","enableWorkWeixin","enableDingtalk","enableShareLinkReportAbuse","MainPanel","children","MainPanelTopbar","title","search","isAdminPanel","Info","uploadLicenseFile","fileInput","current","files","file","seafileAPI","sysAdminUploadLicense","then","res","info","sysInfo","assign","with_license","catch","error","errMsg","getErrorMsg","toaster","danger","openFileInput","click","renderLicenseDescString","license_mode","license_to","license_expiration","window","app","config","lang","loading","errorMsg","sysAdminGetSysInfo","org_count","repos_count","total_files_count","total_storage","total_devices_count","current_connected_devices_count","license_maxusers","multi_tenancy_enabled","active_users_count","users_count","groups_count","isDefaultAdmin","type","ref","href","bytesToSize","Nav","navItems","name","urlPart","text","currentItem","map","item","propsTypes","disabledDate","PropTypes","isRequired","FORMAT","Picker","defaultCalendarValue","moment","locale","clone","calendar","format","translateCalendar","placeholder","tabIndex","readOnly","StatisticCommonTool","changeActive","statisticTypeName","statisticType","startTime","endTime","subtract","getActiviesFiles","disabledStartDate","startValue","today","endValue","isBefore","disabledEndDate","field","onSubmit","bind","StatisticChart","titleCallback","tooltipItem","datasets","datasetIndex","label","yLabel","ticksCallback","values","opations","labels","filesData","isTitleCallback","isTicksCallback","suggestedMaxNumbers","isLegendStatus","chartTitle","_this","options","display","fontSize","elements","line","fill","tension","borderWidth","legend","usePointStyle","tooltips","callbacks","layout","padding","right","scales","yAxes","ticks","beginAtZero","suggestedMax","callback","xAxes","maxTicksLimit","nextProps","StatisticFile","groupBy","sysAdminStatisticFiles","added","deleted","visited","modified","Array","forEach","push","datetime","addedData","borderColor","backgroundColor","visitedData","modifiedData","deletedData","isLoading","err","StatisticStorage","sysAdminStatisticStorages","totalStorage","TrafficTable","sortBy","sortIcon","sortOrder","width","sortItems","TrafficTableBody","trafficName","userTrafficItem","email","org_name","syncUploadSize","sync_file_upload","syncDownloadSize","sync_file_download","webUploadSize","web_file_upload","webDownloadSize","web_file_download","linkUploadSize","link_file_upload","linkDownloadSize","link_file_download","OrgsTraffic","getPreviousPage","getTrafficList","month","currentPage","getNextPage","test","errorMessage","initPage","blur","page","perPage","orderBy","sysAdminListOrgTraffic","orgTrafficList","org_monthly_traffic_list","slice","hasNextPage","has_next_page","resetPerPage","newPerPage","initMonth","urlParams","URL","location","searchParams","parseInt","gotoPreviousPage","gotoNextPage","curPerPage","UsersTraffic","sysAdminListUserTraffic","userTrafficList","user_monthly_traffic_list","StatisticTraffic","changeTabActive","activeName","tabActive","sysAdminStatisticTraffic","total_upload","total_download","link_upload","link_download","sync_upload","sync_download","web_upload","web_download","linkData","syncData","webData","renderCommonTool","StatisticUsers","sysAdminStatisticActiveUsers","count","userCount","StatisticReports","onGenerateReports","url","SysAdminUnlinkDevice","handleInputChange","inputChecked","checked","unlinkDevice","toggleDialog","htmlFor","Content","getPreviousPageDevicesList","getDevicesListByPage","pageInfo","current_page","getNextPageDevicesList","items","emptyTip","table","Item","handleMouseOver","isOpIconShown","handleMouseOut","handleUnlink","is_desktop_client","toggleUnlinkDeviceDialog","isUnlinkDeviceDialogOpen","deleteFiles","platform","device_id","user","sysAdminUnlinkDevice","unlinked","message","success","onMouseEnter","onMouseLeave","user_name","client_version","device_name","last_login_ip","last_accessed","fromNow","DevicesByPlatform","devicesPlatform","per_page","sysAdminListDevices","devicesData","devices","page_info","DesktopDevices","MobileDevices","UserLink","encodeURIComponent","device_ip","repo_id","repo_name","error_msg","error_time","DeviceErrors","clean","sysAdminClearDeviceErrors","devicesErrors","isCleanBtnShown","sysAdminListDeviceErrors","AbuseReports","listAbuseReports","sysAdminListAbuseReports","abuseReportList","abuse_report_list","handleError","updateAbuseReport","handled","abuseReportId","sysAdminUpdateAbuseReport","response","detail","duration","isDesktop","AbuseReportList","toString","fileUrl","file_path","reporter","abuse_type","description","time","SetQuotaDialog","handleQuotaChange","quota","updateQuota","addonType","SysAdminImportUserDialog","fileInputRef","uploadFile","fileName","substr","lastIndexOf","importUserInBatch","SysAdminUserRoleEditor","translateRoles","role","isTextMode","isEditIconShow","roleOptions","currentOption","currentRole","onOptionChanged","onRoleChanged","translateOption","SysAdminAddUserDialog","checkSubmitBtnActive","password","passwordAgain","btnActive","togglePasswordVisible","isPasswordVisible","inputPassword","passwd","inputPasswordAgain","generatePassword","val","inputEmail","inputName","updateRole","showRole","addUser","dialogTitle","autoComplete","availableRoles","SysAdminBatchAddAdminDialog","handleSelectChange","addAdminInBatch","isMulti","onSelectChange","CommonOperationConfirmationDialog","executeOperation","confirmBtnText","dangerouslySetInnerHTML","__html","SysAdminUser","contact_email","login_id","last_login","last_access_time","create_time","is_active","is_staff","reference_id","department","quota_total","quota_usage","institution","org_id","isSelected","SysAdminAdminUser","admin_role","Search","submit","style","haveLDAP","SysAdminUserStatusEditor","translateStatus","status","statusOptions","currentStatus","onStatusChanged","OpMenu","onMenuItemClick","operation","getEventData","onDropdownToggleClick","toggleOperationMenu","isItemMenuShow","onFreezedItem","onUnfreezedItem","operations","translateOperations","tag","data-toggle","aria-expanded","data-op","sysadmin","pageOptions","availableAdminRoles","institutions","isItemFreezed","getListByPage","sortByQuotaUsage","isAdmin","isAllUsersSelected","columns","spaceText","spaceEl","colSpaceText","colNameText","colCreatedText","toggleSelectAllUsers","updateUser","deleteUser","updateAdminRole","revokeAdmin","onUserSelected","isLDAPImported","isSearchResult","handleMouseEnter","highlight","handleMouseLeave","isOpIconShow","toggleSetQuotaDialog","isSetQuotaDialogOpen","toggleDeleteUserDialog","isDeleteUserDialogOpen","toggleResetUserPasswordDialog","isResetUserPasswordDialogOpen","toggleRevokeAdminDialog","isRevokeAdminDialogOpen","updateStatus","isActive","notify","translateAdminRole","updateInstitution","translateInstitution","inst","resetPassword","sysAdminResetUserPassword","reset_tip","getMenuOperations","list","translateResult","itemName","deleteDialogMsg","resetPasswordDialogMsg","revokeAdminDialogMsg","username","Users","toggleImportUserDialog","isImportUserDialogOpen","toggleAddUserDialog","isAddUserDialogOpen","toggleBatchSetQuotaDialog","isBatchSetQuotaDialogOpen","toggleBatchDeleteUserDialog","isBatchDeleteUserDialogOpen","hasUserSelected","selectedUserList","users","userList","filter","thisuser","getUserList","sysAdminListAdmins","admin_user_list","getUsersListByPage","sysAdminListUsers","total_count","URLSearchParams","set","navigate","sysAdminDeleteUser","newUserList","setUserQuotaInBatch","quotaTotal","emails","sysAdminSetUserQuotaInBatch","resultUser","deleteUserInBatch","sysAdminDeleteUserInBatch","oldUser","some","deletedUser","msg","failed","sysAdminImportUserViaFile","concat","sysAdminAddUser","unshift","add_user_tip","sysAdminUpdateUser","update_status_tip","sysAdminUpdateAdminRole","getOperationsForAll","toggleBatchAddAdminDialog","getCurrentNavItem","isBatchAddAdminDialogOpen","sysAdminAddAdminInBatch","getSearch","searchItems","keyword","AdminUsers","LDAPImportedUsers","sysAdminListLDAPUsers","ldap_user_list","SearchUsers","getItems","sysAdminSearchUsers","query","user_list","getPreviousPageList","getNextPageList","params","document","row","sm","size","UpdateUser","updateValue","userName","twoFactorAuthEnabled","currentKey","isUpdateUserDialogOpen","toggleSetNameDialog","toggleSetUserLoginIDDialog","toggleSetUserComtactEmailDialog","toggleSetUserReferenceIDDialog","toggleUpdateUserDialog","showEditIcon","action","userInfo","src","avatar_url","alt","has_default_device","disable2FA","check","is_force_2fa","toggleForce2fa","User","sysAdminDeleteTwoFactorAuth","sysAdminSetForceTwoFactorAuth","sysAdminGetUser","enableSysAdminViewRepo","deleteRepo","transferRepo","toggleDeleteDialog","isDeleteDialogOpen","toggleTransferDialog","isTransferDialogOpen","owner","renderRepoName","repo","encrypted","iconUrl","getLibIconUrl","iconTitle","getLibIconTitle","last_modified","canTransferToDept","Repos","repoID","sysAdminDeleteRepo","newRepoList","repoList","sysAdminTransferRepo","sysAdminListReposByOwner","repos","getOwnerLink","link","owner_email","indexOf","owner_name","groupID","substring","last_modify","sysAdminListShareInRepos","repo_list","deleteItem","toggleLinkDialog","isLinkDialogOpen","getRoleText","roleText","getIconUrl","is_dir","getFolderIconUrl","getFileIconUrl","obj_name","view_cnt","Links","token","sysAdminDeleteShareLink","shareLinkItems","sysAdminDeleteUploadLink","uploadLinkItems","sysAdminListShareLinksByUser","share_link_list","sort","a","b","sysAdminListUploadLinksByUser","upload_link_list","parent_group_id","created_at","Groups","sysAdminDismissGroupByID","sysAdminListGroupsJoinedByUser","group_list","SysAdminCreateRepoDialog","handleRepoNameChange","repoName","ownerEmail","createRepo","option","UserItem","isOperationShow","deleteShareItem","user_email","onChangeUserPermission","permission","currentPermission","is_admin","permissions","onPermissionChanged","UserList","SysAdminShareToUser","selectedOption","setPermission","shareToUser","i","sysAdminAddRepoSharedItem","newItems","sharedItems","refs","userSelect","clearSelect","useremail","sysAdminDeleteRepoSharedItem","userEmail","sysAdminUpdateRepoSharedItemPermission","updateSharedItems","sharedItem","sharedItemUsername","sysAdminListRepoSharedItems","colSpan","GroupItem","group_id","group_name","GroupList","NoOptionsMessage","innerProps","margin","textAlign","SysAdminShareToGroup","loadOptions","shareableGroups","obj","listSharedGroups","shareToGroup","groups","sharedItemGroupID","components","makeAnimated","maxMenuHeight","inputId","SysAdminShareDialog","getInitialActiveTab","activeTab","renderDirContent","enableDirPrivateShare","isGroupOwnedRepo","pills","tabId","itemType","itemPath","isRepoOwner","maxWidth","SysAdminLibHistorySettingDialog","days","keepDays","autoHistory","expireDays","sysAdminUpdateRepoHistorySetting","keep_days","errorInfo","num","setLimitDays","allHistory","noHistory","sysAdminGetRepoHistorySetting","onKeyDown","sortByFileCount","sortBySize","initialSortIcon","onDeleteRepo","onTransferRepo","isRepoDeleted","toggleShareDialog","toggleHistorySettingDialog","isShareDialogOpen","isHistorySettingDialogOpen","getOperations","departmentID","file_count","repoEncrypted","userPerm","AllRepos","toggleCreateRepoDialog","isCreateRepoDialogOpen","getReposByPage","sysAdminListAllRepos","Owner","sysAdminCreateRepo","targetRepo","searchRepos","SystemRepo","sysAdminGetSystemRepoInfo","trashReposExpireDays","onRestoreRepo","sysAdminDeleteTrashRepo","sysAdminRestoreTrashRepo","toggleDeleteRepoDialog","isDeleteRepoDialogOpen","toggleRestoreRepoDialog","isRestoreRepoDialogOpen","delete_time","TrashRepos","toggleCleanTrashDialog","isCleanTrashDialogOpen","sysAdminListTrashRepos","cleanTrash","sysAdminCleanTrashRepos","sysAdminSearchTrashRepos","SearchRepos","getRepos","sysAdminSearchRepos","handleNameInputChange","offset","Dirent","mtime","last_update","file_size","is_file","DirPath","onPathClick","turnPathToLink","pathList","split","nodePath","data-path","isSystemRepo","currentPath","pathElem","DirentItem","openFolder","dirent","deleteDirent","downloadDirent","fromSystemRepo","getDirentIcon","DirContent","direntList","DirView","loadDirentList","toggleNewFolderDialog","isNewFolderDialogOpen","createNewFolder","folderName","getFileName","sysAdminCreateSysRepoFolder","new_dirent","direntPath","joinPath","sysAdminListRepoDirents","is_system_library","dirent_list","encodePath","history","replaceState","sysAdminDeleteRepoDirent","sysAdminGetRepoFileDownloadURL","download_url","onFileInputChange","sydAdminGetSysRepoItemUploadURL","formData","FormData","append","post","upload_link","fileObj","newDirent","Date","getTime","dirs","splice","SysAdminCreateGroupDialog","groupName","createGroup","SysAdminTransferGroupDialog","submitBtnDisabled","receiver","transferGroup","deleteGroup","groupUrl","toggleCreateGroupDialog","isCreateGroupDialogOpen","getGroupListByPage","sysAdminListAllGroups","groupList","OnwerEmail","sysAdminCreateNewGroup","newGroupList","receiverEmail","sysAdminTransferGroup","searchGroups","SearchGroups","getGroups","sysAdminSearchGroups","unshareRepo","toggleUnshareRepoDialog","isUnshareRepoDialogOpen","dialogMsg","shared_by","shared_by_name","GroupRepos","sysAdminUnshareRepoFromGroup","sysAdminListGroupRepos","libraries","SysAdminGroupAddMemberDialog","selectedOptions","isSubmitBtnDisabled","addMembers","SysAdminGroupRoleEditor","removeMember","updateMemberRole","GroupMembers","sysAdminListGroupMembers","memberList","members","toggleAddMemgerDialog","isAddMemberDialogOpen","sysAdminAddGroupMember","newMemberList","sysAdminDeleteGroupMember","sysAdminUpdateGroupMemberRole","Departments","AddDepartDialog","validateName","parentGroup","parentGroupID","sysAdminAddNewDepartment","departName","onDepartChanged","header","DeleteDepartDialog","deleteDepart","sysAdminDeleteDepartment","tipMessage","SetGroupQuotaDialog","setGroupQuota","newQuota","sysAdminUpdateDepartmentQuota","group","newHref","showSetGroupQuotaDialog","showDeleteDepartDialog","DepartmentsList","listDepartGroups","sysAdminListAllDepartments","toggleAddDepartDialog","isShowAddDepartDialog","toggleCancel","topbarChildren","AddMemberDialog","orgSelect","onMemberChanged","DeleteMemberDialog","deleteMember","member","AddRepoDialog","sysAdminAddRepoInDepartment","onRepoChanged","DeleteRepoDialog","sysAdminDeleteRepoInDepartment","MemberItem","toggleMemberRoleMenu","showRoleMenu","onChangeUserRole","roles","toggleItemFreezed","showDeleteMemberDialog","RepoItem","showDeleteRepoDialog","DepartmentDetail","listGroupRepo","getDepartmentInfo","sysAdminGetDepartmentInfo","ancestorGroups","ancestor_groups","listMembers","membersPageInfo","membersErrorMsg","membersPerPage","listSubDepartGroups","onSubDepartChanged","isFreezed","deletedMember","deletedRepo","toggleAddRepoDialog","isShowAddRepoDialog","toggleAddMemberDialog","isShowAddMemberDialog","subGroup","subGroupID","subGroupName","membersPage","topBtn","ancestor","getShareLinksByPage","sortByTime","sortByCount","deleteShareLink","renderExpiration","expire_date","expire_time","is_expired","deleteIcon","onMouseOver","onMouseOut","creator_email","creator_name","ctime","ShareLinks","sysAdminListShareLinks","shareLinkList","linkToken","newShareLinkList","getUploadLinksByPage","deleteUploadLink","UploadLinks","sysAdminListAllUploadLinks","uploadLinkList","newUploadLinkList","SysAdminAddOrgDialog","orgName","addOrg","deleteOrg","sysAdminGetOrg","repoCount","Orgs","getItemsByPage","sysAdminListOrgs","orgList","organizations","toggleAddOrgDialog","isAddOrgDialogOpen","orgID","orgInfo","sysAdminUpdateOrg","newOrgList","org","sysAdminAddOrg","sysAdminDeleteOrg","SearchOrgs","sysAdminSearchOrgs","organization_list","SysAdminSetOrgNameDialog","updateName","SysAdminSetOrgMaxUserNumberDialog","isSetNameDialogOpen","toggleSetMaxUserNumberDialog","isSetMaxUserNumberDialogOpen","max_user_number","updateMaxUserNumber","OrgInfo","newOrgInfo","newValue","maxUserNumber","toggleResetPasswordDialog","isResetPasswordDialogOpen","statusValue","active","OrgUsers","newUserInfo","sysAdminAddOrgUser","sysAdminDeleteOrgUser","sysAdminUpdateOrgUser","sysAdminListOrgUsers","OrgGroups","sysAdminListOrgGroups","OrgRepos","sysAdminListOrgRepos","SysAdminAddInstitutionDialog","addInstitution","getInstitutionsByPage","deleteInstitution","institutionName","Institutions","sysAdminListInstitutions","institutionList","institution_list","toggleAddInstitutionDialog","isAddInstitutionDialogOpen","sysAdminAddInstitution","institutionID","sysAdminDeleteInstitution","institutionInfo","user_count","quota_used","InstitutionInfo","sysAdminUpdateInstitution","newInstitutionInfo","sysAdminGetInstitution","getInstitutionUsersByPage","setAdmin","toggleSetAdminDialog","isSetAdminDialogOpen","is_institution_admin","InstitutionUsers","sysAdminListInstitutionUsers","sysAdminUpdateInstitutionUser","sysAdminAddInstitutionUserBatch","successArray","failedArray","sysAdminDeleteInstitutionUser","InstitutionAdmins","sysAdminListInstitutionAdmins","LogsExportExcelDialog","downloadExcel","isValidDateStr","startDateStr","endDateStr","logType","isValid","handleStartChange","handleEndChange","getLogsByPage","login_ip","log_success","login_time","LoginLogs","toggleExportExcelDialog","isExportExcelDialogOpen","sysAdminListLoginLogs","logList","login_log_list","FilterMenu","toggleMenu","isMenuShown","toggleFreezeItem","onItemClick","filterItems","filterBy","ToggleFilter","toggleFilter","toggleFilterByUser","filterByUser","toggleFilterByRepo","filterByRepo","freezed","userFilteredBy","repoFilteredBy","isHighlighted","event_type","ip","device","file_or_dir_name","FileAccessLogs","sysAdminListFileAccessLogs","file_access_log_list","updateURL","delete","toggleCommitDetailsDialog","isCommitDetailsDialogOpen","showCommitDetails","file_operation","repo_encrypted","commitID","commit_id","commitTime","FileUpdateLogs","sysAdminListFileUpdateLogs","file_update_log_list","getActionTextByEType","etype","getShareTo","share_type","to_user_email","to_user_name","to_group_id","to_group_name","from_user_email","from_user_name","sharePerms","folder","date","SharePermissionLogs","sysAdminListSharePermissionLogs","share_permission_log_list","Section","headingText","SettingItemBase","helpTip","displayName","mainContent","extraContent","md","WebSettingInput","toggleBtns","isBtnsShown","hideBtns","onInputChange","saveSetting","keyText","inputType","onFocus","onBlur","onMouseDown","WebSettingFile","postFile","filePath","fileWidth","fileHeight","height","WebSettingCheckbox","valueToNum","WebSettings","sysAdminSetSysSettingInfo","config_dict","fileType","sysAdminUpdateLogo","sysAdminUpdateFavicon","sysAdminUpdateLoginBG","logoPath","logo_path","faviconPath","favicon_path","loginBGPath","login_bg_image_path","mediaUrl","sysAdminGetSysSettingInfo","SysAdminAddSysNotificationDialog","addNotification","deleteNotification","setToCurrent","is_current","Notifications","toggleAddNotificationDialog","isAddNotificationDialogOpen","sysAdminAddSysNotification","notificationList","notification","sysAdminDeleteSysNotification","sysAdminSetSysNotificationToCurrent","sysAdminListAllSysNotifications","notifications","Table","records","record","suggestion","FileScanRecords","listFileScanRecords","record_list","Fragment","WorkWeixinDepartmentMembersList","newUsersTempObj","checkedDepartmentId","isMembersListLoading","canCheckUserIds","membersList","avatar","userid","onUserChecked","mobile","hover","isCheckedAll","onAllUsersChecked","WorkWeixinDepartmentsTreeNode","toggleChildren","stopPropagation","isChildrenShow","dropdownToggle","dropdownOpen","importDepartmentDialogToggle","depart","renderTreeNodes","departmentsTree","onChangeDepartment","changeDept","toggleClass","classNames","nodeInnerClass","direction","opacity","WorkWeixinDepartmentsTreePanel","isTreeLoading","ImportWorkWeixinDepartmentDialog","onImportDepartmentSubmit","departmentsCount","membersCount","departmentName","WorkWeixinDepartments","getDepartmentsTree","childIds","parentIds","parentid","intersection","v","rootIds","cloneData","_","cloneDeep","father","branchArr","child","getWorkWeixinDepartmentsList","adminListWorkWeixinDepartments","importDepartmentChildrenCount","importDepartmentMembersCount","membersTempObj","getWorkWeixinDepartmentMembersList","department_id","adminListWorkWeixinDepartmentMembers","fetch_child","userlist","getCanCheckUserIds","userIds","newUsersTempList","JSON","stringify","adminAddWorkWeixinUsersBatch","handleSubmitSuccess","fails","j","departmentId","k","importDepartment","isImportDepartmentDialogShow","adminImportWorkWeixinDepartment","handleImportDepartmentSubmitSuccess","handleImportDepartmentSubmitFailed","successes","len","successMsg","department_name","api_user_name","fail","failName","btnClass","canImportDepartment","renderNav","DingtalkDepartmentMembersList","DingtalkDepartmentsTreeNode","DingtalkDepartmentsTreePanel","ImportDingtalkDepartmentDialog","DingtalkDepartments","getDingtalkDepartmentsList","adminListDingtalkDepartments","getDingtalkDepartmentMembersList","adminListDingtalkDepartmentMembers","adminAddDingtalkUsersBatch","adminImportDingtalkDepartment","getInviteTypeText","invite_type","inviter_email","inviter_name","accept_time","accepter_email","accepter_name","invite_time","Invitations","sysAdminListInvitations","invitation_list","targetItem","sysAdminDeleteInvitation","deleteItemInBatch","sysAdminDeleteExpiredInvitations","prevItems","totalItemCount","TermsEditorDialog","event","isContentChanged","currentContent","getCurrentContent","onCommit","onCloseEditorDialog","simpleEditor","hasContentChange","getMarkdown","setSimpleEditorRef","editor","content","wrapClassName","contentClassName","onRef","defaultProps","AddOrUpdateTermDialog","handleNameChange","handleVersionNumberChange","versionNumber","handleTextChange","setActive","setInActive","addTerm","isNaN","isUpdate","updateTerm","onContentClick","isConditionsEditorDialogShow","onUpdateContent","oldTermObj","version_number","activate_time","hrefReg","imageReg1","imageReg2","linkReg1","linkReg2","getPreviewContent","markdownContent","previewText","newMarkdownContent","hrefs","match","hrefObj","links","images","imageSrcs","imageSrcs1","getLinks","TermsPreviewDialog","onClosePreviewDialog","toggleUpdateDialog","isUpdateDialogOpen","toggleTermsContentDialog","isTermsPerviewDialogOpen","deleteTerm","itemContent","mdFile","processor","process","innerHtml","String","previewContent","TermsAndConditions","toggleAddTermDialog","isAddTermDialogOpen","sysAdminAddTermAndCondition","reload","termID","sysAdminUpdateTermAndCondition","termList","sysAdminDeleteTermAndCondition","sysAdminListTermsAndConditions","term_and_condition_list","VirusFileItem","handleFile","virusFile","virus_id","fileStatus","fileOpList","has_deleted","has_ignored","repo_owner","virusFiles","AllVirusFiles","listVirusFiles","virus_file_list","virusID","op","request","deleteVirusFile","toggleIgnoreVirusFile","virus_file","toggleItemSelected","isAllItemsSelected","toggleAllSelected","UnhandledVirusFiles","prevState","handleSelectedItems","virusIDs","batchProcessVirusFiles","fileList","find","deleteSelectedItems","ignoreSelectedItems","selectedItems","LogsNav","getOperationText","operationType","getOperationDetail","ownerPageUrl","userPageUrl","detailText","repoPageUrl","groupPageUrl","from","AdminOperationLogs","sysAdminListAdminLogs","login_success","AdminLoginLogs","sysAdminListAdminLoginLogs","SysAdmin","getCurrentTabForPageList","pageList","urlPartList","urlBase","jlen","param","tmpTab","ReactDOM","render","getElementById","ShareAdminLink","copyToClipboard","copy","createCommonjsModule","fn","getCjsExportFromNamespace","n","hasOwnProperty","colorName","conversions","reverseKeywords","convert","rgb","channels","hsl","hsv","hwb","cmyk","xyz","lab","lch","hex","ansi16","ansi256","hcg","apple","gray","model","Error","defineProperty","comparativeDistance","x","y","Math","pow","h","l","r","g","min","max","delta","rdif","gdif","bdif","s","diff","diffc","c","reversed","currentClosestKeyword","currentClosestDistance","Infinity","distance","z","t1","t2","t3","smin","lmin","hi","floor","f","p","q","t","sl","vmin","wh","bl","ratio","m","y2","x2","z2","atan2","PI","sqrt","hr","cos","sin","args","arguments","round","ansi","mult","rem","string","toUpperCase","colorString","char","join","integer","hue","chroma","pure","w","mg","buildGraph","graph","models","parent","deriveBFS","fromModel","queue","pop","adjacents","adjacent","node","wrapConversion","toModel","cur","conversion","route","wrapRaw","wrappedFn","prototype","call","wrapRounded","routes","raw","colorConvert","colorName$1","getRgba","getHsla","getRgb","getHsl","getHwb","getAlpha","hexString","rgbString","rgbaString","percentString","percentaString","hslString","hslaString","hwbString","abbr","rgba","per","hexAlpha","parseFloat","scale","alpha","hsla","vals","hexDouble","reverseNames","str","Color","valid","setValues","red","lightness","whiteness","cyan","setSpace","rgbArray","hslArray","hsvArray","hwbArray","cmykArray","rgbaArray","hslaArray","setChannel","green","blue","saturation","saturationv","blackness","magenta","yellow","black","rgbNumber","luminosity","lum","chan","contrast","color2","lum1","lum2","level","contrastRatio","dark","light","negate","lighten","darken","saturate","desaturate","whiten","blacken","greyscale","clearer","opaquer","rotate","degrees","mix","mixinColor","weight","color1","w1","w2","toJSON","prop","console","spaces","maxes","getValues","space","charAt","capped","chans","sname","svalues","chartjsColor","isValidKey","helpers","noop","uid","isNullOrUndef","isObject","isFinite","Number","valueOrDefault","valueAtIndexOrDefault","thisArg","apply","each","loopable","reverse","arrayEquals","a0","a1","ilen","v0","v1","create","klen","_merger","tval","sval","merge","_mergerIf","mergeIf","sources","merger","extend","dst","inherits","extensions","me","ChartElement","constructor","Surrogate","__super__","_deprecated","scope","previous","warn","helpers_core","callCallback","fromIndex","getValueOrDefault","getValueAtIndexOrDefault","effects","linear","easeInQuad","easeOutQuad","easeInOutQuad","easeInCubic","easeOutCubic","easeInOutCubic","easeInQuart","easeOutQuart","easeInOutQuart","easeInQuint","easeOutQuint","easeInOutQuint","easeInSine","easeOutSine","easeInOutSine","easeInExpo","easeOutExpo","easeInOutExpo","easeInCirc","easeOutCirc","easeInOutCirc","easeInElastic","asin","easeOutElastic","easeInOutElastic","easeInBack","easeOutBack","easeInOutBack","easeInBounce","easeOutBounce","easeInOutBounce","helpers_easing","easingEffects","RAD_PER_DEG","DOUBLE_PI","HALF_PI","QUARTER_PI","TWO_THIRDS_PI","exports$1","clear","chart","ctx","clearRect","roundedRect","radius","left","top","bottom","moveTo","arc","closePath","rect","drawPoint","rotation","xOffset","yOffset","cornerRadius","rad","save","translate","drawImage","restore","beginPath","lineTo","SQRT1_2","stroke","_isPointInArea","point","area","epsilon","clipArea","clip","unclipArea","flip","stepped","steppedLine","midpoint","bezierCurveTo","controlPointPreviousX","controlPointNextX","controlPointPreviousY","controlPointNextY","helpers_canvas","drawRoundedRectangle","defaults","_set","defaultColor","defaultFontColor","defaultFontFamily","defaultFontSize","defaultFontStyle","defaultLineHeight","showLines","core_defaults","toFontString","font","family","helpers_options","toLineHeight","matches","toPadding","_parseFont","globalDefaults","global","fontFamily","lineHeight","fontStyle","resolve","inputs","context","cacheable","exports$2","_factorize","log10","exponent","log","LOG10E","powerOf10","helpers_math","getRtlAdapter","rectX","setWidth","align","xPlus","leftForLtr","itemWidth","getLtrAdapter","_itemWidth","helpers$1","easing","canvas","math","rtl","overrideTextDirection","original","getPropertyValue","getPropertyPriority","setProperty","prevTextDirection","restoreTextDirection","interpolate","start","view","ease","actual","origin","c0","c1","Element","configuration","initialize","_type","hidden","pivot","_view","_model","_start","transition","tooltipPosition","hasValue","isNumber","core_element","exports$3","currentStep","numSteps","onAnimationProgress","onAnimationComplete","core_animation","animation","onProgress","onComplete","core_animations","animations","addAnimation","lazy","now","animating","requestAnimationFrame","cancelAnimation","findIndex","requestAnimFrame","startDigest","advance","nextStep","arrayEvents","listenArrayEvents","listener","_chartjs","listeners","configurable","enumerable","method","base","unlistenArrayEvents","stub","DatasetController","datasetElementType","dataElementType","_datasetElementOptions","_dataElementOptions","linkScales","addElements","getMeta","updateIndex","meta","dataset","getDataset","scalesOpts","xAxisID","yAxisID","getDatasetMeta","getScaleForId","scaleID","_getValueScaleId","_getIndexScaleId","_getValueScale","_getIndexScale","reset","_update","destroy","_data","createMetaDataset","_chart","_datasetIndex","createMetaData","_index","metaData","addElementAndReset","element","updateElement","buildOrUpdateElements","isExtensible","resyncElements","_configure","_config","_cachedDataOpts","update","easingValue","draw","getStyle","_resolveDatasetElementOptions","_resolveDataElementOptions","readKey","datasetOpts","custom","elementOptions","cached","dataIndex","freeze","removeHoverStyle","$previousStyle","setHoverStyle","getHoverColor","hoverBackgroundColor","hoverBorderColor","hoverBorderWidth","_removeDatasetHoverStyle","_setDatasetHoverStyle","hoverOptions","prev","numMeta","numData","insertElements","onDataPush","onDataPop","onDataShift","shift","onDataSplice","onDataUnshift","core_datasetController","TAU","clipArc","startAngle","endAngle","pixelMargin","angleMargin","outerRadius","innerRadius","drawFullCircleBorders","vm","inner","fullCircles","drawBorder","borderAlign","lineWidth","lineJoin","element_arc","inLabelRange","mouseX","hoverRadius","inRange","chartX","chartY","pointRelativePosition","getAngleFromPoint","angle","betweenAngles","withinRadius","getCenterPoint","halfAngle","halfRadius","getArea","centreAngle","rangeFromCentre","circumference","fillStyle","strokeStyle","valueOrDefault$1","borderCapStyle","borderDash","borderDashOffset","borderJoinStyle","capBezierPoints","element_line","currentVM","spanGaps","points","_children","globalOptionLineElements","lastDrawnIndex","_loop","previousItem","skip","lineCap","setLineDash","lineDashOffset","valueOrDefault$2","defaultColor$1","xRange","abs","hitRadius","yRange","mouseY","pointStyle","element_point","inXRange","inYRange","chartArea","defaultColor$2","isVertical","getBarBounds","x1","y1","half","swap","orig","v2","parseBorderSkipped","edge","borderSkipped","horizontal","parseBorderWidth","maxW","maxH","boundingRects","bounds","border","outer","skipX","skipY","rectangle","element_rectangle","rects","fillRect","Arc","Line","Point","Rectangle","deprecated","valueOrDefault$3","computeMinSampleSize","pixels","curr","_length","getTicks","getPixelForTick","computeFitCategoryTraits","ruler","thickness","barThickness","stackCount","categoryPercentage","barPercentage","chunk","computeFlexCategoryTraits","next","percent","end","mode","gridLines","offsetGridLines","bar","controller_bar","scaleOpts","minBarLength","maxBarThickness","_ruler","getRuler","_xScale","_yScale","datasetLabel","_updateElementGeometry","vscale","getBasePixel","isHorizontal","vpixels","calculateBarValuePixels","ipixels","calculateBarIndexPixels","head","center","_getStacks","last","metasets","_getMatchingVisibleMetas","stacked","stacks","getStackCount","getStackIndex","getPixelForValue","_startPixel","_endPixel","imeta","ivalue","stackLength","_parseValue","range","stackIndex","indexOpts","valueOpts","valueOrDefault$4","resolve$1","position","dataPoint","xLabel","controller_bubble","xScale","yScale","dsIndex","getPixelForDecimal","NaN","_options","valueOrDefault$5","PI$1","DOUBLE_PI$1","HALF_PI$1","animateRotate","animateScale","legendCallback","listItem","createElement","setAttribute","appendChild","createTextNode","outerHTML","generateLabels","controller","legendItem","cutoutPercentage","dataLabel","controller_doughnut","getRingIndex","ringIndex","isDatasetVisible","maxHeight","opts","ratioX","ratioY","offsetX","offsetY","arcs","cutout","chartWeight","_getRingWeight","startX","startY","endX","endY","contains0","contains90","contains270","minX","minY","maxX","maxY","getMaxBorderWidth","radiusLength","_getVisibleDatasetWeightTotal","total","calculateTotal","_getRingWeightOffset","animationOpts","centerX","centerY","calculateCircumference","hoverWidth","ringWeightOffset","dataSetIndex","axis","horizontalBar","controller_horizontalBar","valueOrDefault$6","resolve$2","isPointInArea","scaleClip","halfBorderWidth","tickOpts","defaultClip","toClip","controller_line","showLine","_showLine","lineTension","_scale","updateBezierControlPoints","lineModel","calculatePointY","lineOptions","ds","dsMeta","stackedRightValue","rightValue","sumPos","sumNeg","getRightValue","_getSortedVisibleDatasetMetas","controlPoints","capControlPoint","pt","cubicInterpolationMode","splineCurveMonotone","splineCurve","nextItem","resolve$3","angleLines","circular","pointLabels","controller_polarArea","starts","_starts","angles","_angles","_updateRadius","countVisibleElements","_computeAngle","minSize","getVisibleDatasetCount","xCenter","yCenter","datasetStartAngle","getDistanceFromCenterForValue","resetRadius","doughnut","controller_pie","valueOrDefault$7","controller_radar","pointPosition","getPointPositionForValue","scatter","controllers","bubble","polarArea","pie","radar","getRelativePosition","native","parseVisibleItems","handler","metadata","getIntersectItems","getNearestItems","intersect","distanceMetric","minDistance","POSITIVE_INFINITY","nearestItems","getDistanceMetricForAxis","useX","useY","pt1","pt2","deltaX","deltaY","indexMode","core_interaction","modes","single","nearest","intersectsItem","filterByPosition","where","pos","sortByWeight","wrapBoxes","boxes","box","layoutBoxes","setLayoutDims","layouts","fullWidth","availableWidth","vBoxMaxWidth","hBoxMaxHeight","buildLayoutBoxes","leftAndTop","rightAndBottom","vertical","getCombinedMax","maxPadding","updateDims","newWidth","newHeight","getPadding","boxPadding","outerWidth","outerHeight","sizes","handleMaxPadding","updatePos","change","getMargins","marginForPositions","positions","fitBoxes","refit","changed","refitBoxes","placeBoxes","userPadding","core_layouts","addBox","_layers","removeBox","layoutItem","configure","layoutOptions","availableHeight","verticalBoxes","horizontalBoxes","platform_basic","acquireContext","getContext","platform_dom","stylesheet","__proto__","EXPANDO_KEY","CSS_PREFIX","CSS_SIZE_MONITOR","CSS_RENDER_MONITOR","CSS_RENDER_ANIMATION","ANIMATION_START_EVENTS","EVENT_TYPES","touchstart","touchmove","touchend","pointerenter","pointerdown","pointermove","pointerup","pointerleave","pointerout","readUsedSize","initCanvas","renderHeight","getAttribute","renderWidth","initial","displayWidth","aspectRatio","displayHeight","eventListenerOptions","supports","addEventListener","passive","addListener","removeListener","removeEventListener","createEvent","nativeEvent","fromNativeEvent","throttled","ticking","createDiv","cls","el","createResizer","maxSize","resizer","expand","shrink","_reset","scrollLeft","scrollTop","onScroll","watchForRender","expando","proxy","renderProxy","animationName","reflow","offsetParent","classList","add","unwatchForRender","remove","addResizeListener","container","maintainAspectRatio","parentNode","clientWidth","insertBefore","firstChild","removeResizeListener","removeChild","injectCSS","rootNode","css","containsStyles","platform_dom$2","disableCSSInjection","_enabled","_ensureLoaded","root","getRootNode","host","releaseContext","removeAttribute","proxies","addEvent","removeEvent","implementation","plugins","core_plugins","_plugins","_cacheId","register","plugin","unregister","idx","getAll","hook","descriptor","descriptors","cache","$plugins","_invalidate","core_scaleService","constructors","registerScaleType","scaleConstructor","scaleDefaults","getScaleConstructor","getScaleDefaults","updateScaleDefaults","additions","addScalesToLayout","valueOrDefault$8","getRtlHelper","enabled","titleFontStyle","titleSpacing","titleMarginBottom","titleFontColor","titleAlign","bodySpacing","bodyFontColor","bodyAlign","footerFontStyle","footerSpacing","footerMarginTop","footerFontColor","footerAlign","yPadding","xPadding","caretPadding","caretSize","multiKeyBackground","displayColors","beforeTitle","tooltipItems","labelCount","afterTitle","beforeBody","beforeLabel","labelColor","labelTextColor","afterLabel","afterBody","beforeFooter","footer","afterFooter","positioners","average","eventPosition","nearestElement","d","distanceBetweenPoints","tp","pushOrConcat","toPush","splitNewlines","createTooltipItem","indexScale","valueScale","getLabelForIndex","getBaseModel","tooltipOpts","xAlign","yAlign","textDirection","_bodyFontFamily","bodyFontFamily","_bodyFontStyle","bodyFontStyle","_bodyAlign","bodyFontSize","_titleFontFamily","titleFontFamily","_titleFontStyle","titleFontSize","_titleAlign","_footerFontFamily","footerFontFamily","_footerFontStyle","footerFontSize","_footerAlign","legendColorBackground","getTooltipSize","tooltip","body","combinedBodyLength","reduce","bodyItem","before","lines","after","titleLineCount","footerLineCount","widthPadding","maxLineWidth","measureText","fontString","determineAlignment","lf","rf","olf","orf","yf","midX","midY","getBackgroundPoint","alignment","paddingAndSize","radiusAndPadding","getAlignedX","getBeforeAfterBodyLines","exports$4","_lastActive","getTitle","getBeforeBody","getBody","bodyItems","getAfterBody","getFooter","existingModel","_active","backgroundPoint","tooltipSize","caretX","caretY","labelColors","labelTextColors","_eventPosition","itemSort","dataPoints","drawCaret","tooltipPoint","caretPosition","getCaretPosition","x3","y3","ptX","ptY","tmp","drawTitle","rtlHelper","textBaseline","fillText","drawBody","textColor","drawColorBoxes","xLinePadding","colorX","fillLineOfText","bodyAlignForCalculation","rtlColorX","strokeRect","drawFooter","drawBackground","quadraticCurveTo","hasTooltipContent","globalAlpha","handleEvent","getElementsAtEventForMode","positioners_1","core_tooltip","valueOrDefault$9","mergeScaleConfig","slen","mergeConfig","initConfig","updateConfig","newOptions","ensureScalesHaveIDs","buildOrUpdateScales","nextAvailableScaleId","axesOpts","prefix","hasId","positionIsHorizontal","compare2Level","l1","l2","events","onHover","animationDuration","responsive","responsiveAnimationDuration","Chart","construct","_bufferedRender","instances","retinaScale","devicePixelRatio","bindEvents","resize","initToolTip","stop","silent","getMaximumWidth","getMaximumHeight","newSize","onResize","scalesOptions","scaleOptions","xAxisOptions","yAxisOptions","updated","dtype","dposition","isDefault","scaleType","scaleClass","mergeTicksOptions","hasUpdated","buildOrUpdateControllers","newControllers","destroyDatasetMeta","order","ControllerClass","resetElements","updateLayout","updateDatasets","lastActive","_bufferedRequest","_idx","updateDataset","animationOptions","animationObject","easingFunction","stepDecimal","layers","drawDatasets","_drawTooltip","_getSortedDatasetMetas","filterVisible","drawDataset","getElementAtEvent","getElementsAtEvent","getElementsAtXAxis","getDatasetAtEvent","_meta","generateLegend","unbindEvents","toBase64Image","toDataURL","_chartInstance","_listeners","eventHandler","updateHoverStyle","bufferedRequest","core_controller","Controller","types","configMerge","scaleMerge","core_helpers","parseMaxStyle","styleValue","parentProperty","valueInPixels","isConstrainedValue","getConstraintDimension","domNode","maxStyle","percentageProperty","defaultView","_getParentNode","constrainedNode","getComputedStyle","constrainedContainer","hasCNode","hasCContainer","infinity","filterCallback","filtered","findNextWhere","arrayToSearch","startIndex","findPreviousWhere","almostEquals","almostWhole","rounded","NEGATIVE_INFINITY","sign","toRadians","toDegrees","radians","_decimalPlaces","centrePoint","anglePoint","distanceFromXCenter","distanceFromYCenter","radialDistanceFromCenter","aliasPixel","pixelWidth","_alignPixel","pixel","currentDevicePixelRatio","halfWidth","firstPoint","middlePoint","afterPoint","d01","d12","s01","s12","fa","fb","EPSILON","pointBefore","pointCurrent","pointAfter","alphaK","betaK","tauK","squaredMagnitude","pointsWithTangents","deltaK","mK","pointsLen","slopeDeltaX","loop","niceNum","fraction","webkitRequestAnimationFrame","mozRequestAnimationFrame","oRequestAnimationFrame","msRequestAnimationFrame","setTimeout","evt","originalEvent","srcElement","boundingRect","getBoundingClientRect","touches","clientX","clientY","paddingLeft","paddingTop","paddingRight","paddingBottom","getConstraintWidth","getConstraintHeight","_calculatePadding","parentDimension","cw","clientHeight","ch","currentStyle","forceRatio","pixelRatio","pixelSize","longestText","arrayOfThings","gc","garbageCollect","thing","nestedThing","longest","gcLen","textWidth","numberOfLabelLines","numberOfLines","CanvasGradient","colorValue","CanvasPattern","abstract","DateAdapter","formats","parse","startOf","endOf","_create","override","core_adapters","_date","core_ticks","formatters","tickValue","logDelta","tickString","logTick","numExponential","toExponential","numDecimal","toFixed","logarithmic","remain","valueOrDefault$a","sample","arr","numItems","increment","getPixelForGridLine","validIndex","lineValue","caches","computeLabelSizes","tickFonts","tickFont","nestedLabel","widest","highest","widths","heights","offsets","widestLabelSize","highestLabelSize","major","minor","valueAt","first","getTickMarkLength","drawTicks","tickMarkLength","getScaleLabelHeight","parseFontOptions","nestedOpts","fontColor","parseTickFontOptions","nonSkipped","ticksToFilter","getEvenSpacing","calculateSpacing","majorIndices","axisLength","ticksLimit","factors","factor","evenMajorSpacing","spacing","getMajorIndices","skipMajors","tick","ceil","majorStart","majorEnd","drawOnChartArea","zeroLineWidth","zeroLineColor","zeroLineBorderDash","zeroLineBorderDashOffset","scaleLabel","labelString","minRotation","maxRotation","mirror","autoSkip","autoSkipPadding","labelOffset","Scale","zeroLineIndex","_ticks","_getLabels","xLabels","yLabels","beforeUpdate","margins","samplingEnabled","sampleSize","_labelSizes","_maxLabelLines","longestLabelWidth","longestTextCache","_gridLineItems","_labelItems","beforeSetDimensions","setDimensions","afterSetDimensions","beforeDataLimits","determineDataLimits","afterDataLimits","beforeBuildTicks","buildTicks","afterBuildTicks","_convertTicksToLabels","beforeCalculateTickRotation","calculateTickRotation","afterCalculateTickRotation","beforeFit","fit","afterFit","_ticksToDraw","_autoSkip","afterUpdate","startPixel","endPixel","reversePixels","_reversePixels","beforeTickToLabelConversion","convertTicksToLabels","userCallback","afterTickToLabelConversion","labelSizes","maxLabelWidth","maxLabelHeight","tickWidth","maxLabelDiagonal","numTicks","labelRotation","_isVisible","_getLabelSizes","scaleLabelOpts","gridLineOpts","isBottom","firstLabelSize","lastLabelSize","lineSpace","tickPadding","isRotated","angleRadians","cosRotation","sinRotation","labelHeight","offsetLeft","offsetRight","labelWidth","handleMargins","isFullWidth","rawValue","_getScaleLabel","getValueForPixel","decimal","getDecimalForPixel","getBaseValue","avgMajorSpacing","_tickSize","numMajorIndices","optionTicks","rot","_computeGridLineItems","borderValue","alignedLineValue","tx1","ty1","tx2","ty2","lineColor","ticksLength","tl","axisWidth","axisHalfWidth","alignPixel","alignBorderValue","_computeLabelItems","lineCount","textOffset","isMirrored","fonts","_drawGrid","firstLineWidth","lastLineWidth","_drawLabels","_drawTitle","scaleLabelX","scaleLabelY","scaleLabelFontColor","scaleLabelFont","scaleLabelPadding","halfLineHeight","isLeft","tz","gz","_draw","core_scale","isNullOrUndef$1","defaultConfig","scale_category","ticksOpts","minIndex","maxIndex","_startValue","_valueRange","valueCategory","_defaults","isNullOrUndef$2","generateTicks","generationOptions","dataRange","niceMin","niceMax","numSpaces","MIN_SPACING","stepSize","unit","maxNumSpaces","maxTicks","precision","rmin","rmax","scale_linearbase","handleTickRangeOptions","minSign","maxSign","setMin","suggestedMin","setMax","getTickLimit","_computeTickLimit","handleDirectionalChanges","numericGeneratorOptions","fixedStepSize","ticksAsNumbers","_endValue","defaultConfig$1","DEFAULT_MIN","DEFAULT_MAX","getOrCreateStack","neg","stackData","relativePoints","updateMinMax","scale_linear","hasStacks","stackValues","_defaults$1","valueOrDefault$b","generateTicks$1","exp","significand","tickVal","endExp","endSignificand","minNotZero","lastTick","defaultConfig$2","nonNegativeOrDefault","scale_logarithmic","IDMatches","valuesPerStack","valuesForType","minVal","maxVal","tickValues","_getFirstTickValue","_valueOffset","_defaults$2","valueOrDefault$c","valueAtIndexOrDefault$1","resolve$4","defaultConfig$3","animate","showLabelBackdrop","backdropColor","backdropPaddingY","backdropPaddingX","getTickBackdropHeight","measureLabelSize","determineLimits","fitWithPointLabels","textSize","plFont","furthestLimits","furthestAngles","_pointLabelSizes","valueCount","getPointPosition","drawingArea","getIndexAngle","hLimits","vLimits","setReductions","getTextAlignForAngle","adjustPointPositionForLabelHeight","drawPointLabels","pointLabelOpts","tickBackdropHeight","outerDistance","extra","pointLabelPosition","pointLabelFontColor","drawRadiusLine","numberOrZero","scale_radialLinear","setCenterPoint","largestPossibleRadius","radiusReductionLeft","radiusReductionRight","radiusReductionTop","radiusReductionBottom","leftMovement","rightMovement","topMovement","bottomMovement","maxRight","maxLeft","maxTop","maxBottom","scalingFactor","distanceFromCenter","thisAngle","getBasePosition","angleLineOpts","tickFontColor","_defaults$3","deprecated$1","resolve$5","valueOrDefault$d","MIN_INTEGER","MIN_SAFE_INTEGER","MAX_INTEGER","MAX_SAFE_INTEGER","INTERVALS","millisecond","common","steps","second","minute","hour","day","week","quarter","year","UNITS","sorter","arrayUnique","hash","out","getMin","getMax","buildLookupTable","timestamps","distribution","lookup","mid","i0","i1","lo","interpolate$1","skey","tkey","span","toTimestamp","adapter","_adapter","parser","determineUnitForAutoTicks","minUnit","capacity","interval","determineUnitForFormatting","determineMajorUnit","generate","timeOpts","unitStepSize","weekday","isoWeekday","computeOffsets","setMajorTicks","majorUnit","ticksFromTimestamps","defaultConfig$4","adapters","displayFormat","displayFormats","scale_time","timestamp","labelsAdded","dataLabels","_table","_timestamps","getLabelCapacity","_unit","_majorUnit","_offsets","tooltipFormat","tickFormatFunction","minorFormat","majorFormat","nestedTickOpts","formatter","getPixelForOffset","_getLabelSize","tickLabelWidth","tickFontSize","getLabelWidth","exampleTime","exampleLabel","_defaults$4","category","radialLinear","FORMATS","_id","valueOf","amount","filler","propagate","mappers","boundary","decodeFill","computeLinearBoundary","scaleBottom","scaleTop","scaleZero","computeCircularBoundary","cx","cy","computeBoundary","resolveTarget","visible","createMapper","isDrawable","drawArea","curve0","curve1","len0","len1","doFill","mapper","p0","p1","d0","d1","loopOffset","plugin_filler","afterDatasetsUpdate","$filler","beforeDatasetsDraw","getRtlHelper$1","noop$1","valueOrDefault$e","getBoxWidth","labelOpts","boxWidth","ci","onLeave","lineDash","Legend","legendHitBoxes","_hoveredItem","doughnutMode","beforeBuildLabels","buildLabels","afterBuildLabels","legendItems","labelFont","hitboxes","lineWidths","totalHeight","vPadding","columnWidths","columnHeights","totalWidth","currentColWidth","currentColHeight","lineDefault","legendHeight","legendWidth","cursor","drawLegendBox","SQRT2","halfFontSize","xLeft","yMiddle","alignmentOffset","dimension","blockSize","itemHeight","realX","_getLegendItemAt","hitBox","lh","hoveredItem","createNewLegendAndAttach","legendOpts","plugin_legend","_element","beforeInit","afterEvent","noop$2","Title","titleX","titleY","fontOpts","createNewTitleBlockAndAttach","titleOpts","titleBlock","_adapters","Animation","animationService","Interaction","scaleService","Ticks","Tooltip","pluginService","PluginBase","canvasHelpers","layoutService","LinearScaleBase","klass","cfg","toLowerCase","factory","getScrollbarWidth","scrollDiv","scrollbarWidth","setScrollbarWidth","isBodyOverflowing","getOriginalBodyPadding","conditionallyUpdateScrollbar","fixedContent","bodyPadding","globalCssModule","mapToCssModules","cssModule","omit","omitKeys","pick","pickKeys","warned","warnOnce","propType","explanation","propName","componentName","rest","DOMElement","getTarget","isFunction","selection","TransitionTimeouts","TransitionPropTypeKeys","TransitionStatuses","keyCodes","PopperPlacements","canUseDOM","propTypes","Container","fluid","Tag","attributes","classes","Row","noGutters","stringOrNumberProp","columnProps","getColumnSizeClass","isXs","colWidth","colSize","Col","colClasses","columnProp","isobject","colSizeInterfix","colClass","toggleableToExpand","Navbar","toggleable","inverse","fixed","sticky","getExpandClass","getToggleableClass","NavbarBrand","NavbarToggler","tabs","justified","navbar","card","getVerticalClass","NavItem","bool","childContextTypes","Dropdown","inNavbar","prevProps","menuClass","itemClass","disabledClass","dropup","nav","attrs","any","NavLink","Breadcrumb","BreadcrumbItem","Button","block","outline","ButtonDropdown","ButtonGroup","ButtonToolbar","contextTypes","DropdownItem","divider","noFlipModifier","directionPositionMap","DropdownMenu","position1","position2","DropdownToggle","caret","ariaLabel","timeoutPropName","transitionType","enabledPropName","_propTypes2","default","oneOfType","shape","number","newObj","_interopRequireWildcard","_react2","_interopRequireDefault","_reactDom2","UNMOUNTED","EXITED","ENTERING","ENTERED","EXITING","Transition","_React$Component","instance","TypeError","ReferenceError","_possibleConstructorReturn","appear","initialStatus","superClass","subClass","writable","transitionGroup","pendingState","timeout","exit","enter","mounting","nextStatus","unmountOnExit","_this2","appearing","timeouts","_this3","nextCallback","nextState","_this4","setNextCallback","_this5","_props","childProps","_objectWithoutProperties","Fade","baseClass","baseClassActive","otherProps","transitionProps","Badge","pill","Card","CardGroup","CardDeck","CardColumns","CardBody","CardLink","CardFooter","CardHeader","CardImg","cardImgClassName","CardImgOverlay","CarouselItem","isAppearing","startAnimation","offsetHeight","CustomEvent","isIn","slide","onExited","directionClassName","orderClassName","itemClasses","Carousel","ride","activeIndex","indicatorClicked","setInterval","pause","carouselItems","outerClasses","innerClasses","every","controlLeft","controlRight","indicators","wrappedIndicators","onClickHandler","CarouselControl","directionText","anchorClasses","iconClasses","screenReaderClasses","CarouselIndicators","listClasses","indicatorClasses","CarouselCaption","captionHeader","captionText","UncontrolledCarousel","nextIndex","newIndex","autoPlay","controls","goToIndex","slides","CardSubtitle","CardText","CardTitle","PopperContent","getTargetNode","placement","childNodes","fallbackPlacement","placementPrefix","hideArrow","modifiers","arrowClassName","popperClassName","extendedModifiers","behavior","handlePlacementChange","component","PopperTargetHelper","show","hide","DEFAULT_DELAYS","Popover","delay","getDelay","_target","contains","_popover","popperClasses","PopoverHeader","PopoverBody","Progress","barClassName","animated","striped","multi","toNumber","progressClasses","progressBarClasses","ProgressBar","Portal","FadePropTypes","propsToOmit","Modal","autoFocus","modalTransition","onEntered","_dialog","backdrop","modalOpenClassName","modalOpenClassNameRegex","RegExp","dialogBaseClass","modalClassName","backdropClassName","labelledBy","external","modalAttributes","hasTransition","backdropTransition","ModalHeader","closeButton","WrapTag","closeAriaLabel","aria-label","ModalBody","ModalFooter","onMouseLeaveTooltipContent","bordered","ResponsiveTag","responsiveClassName","ListGroup","flush","Form","inline","FormFeedback","FormGroup","FormText","Input","bsSize","invalid","addon","staticInput","plaintext","checkInput","isNotaNumber","formControlClass","InputGroup","InputGroupText","InputGroupAddon","Label","Pagination","PaginationItem","PaginationLink","defaultAriaLabel","defaultCaret","TabContent","TabPane","Jumbotron","Alert","closeClassName","closeClasses","in","Collapse","transitionStatusToClassHash","getHeight","collapseClass","getTransitionClass","handleDisabledOnClick","ListGroupItem","ListGroupItemHeading","ListGroupItemText","UncontrolledAlert","UncontrolledButtonDropdown","UncontrolledDropdown","UncontrolledTooltip","protocolAndDomainRE","everythingAfterProtocol","localhostDomainRE","nonLocalhostDomainRE","CommitDetails","getCommitDetails","commitDetails","centered","renderDetails","detailsData","showDesc","cmt_desc","HeaderList","_React$PureComponent","_classCallCheck","_getPrototypeOf","handleClick","getContainer","_inherits","_createClass","findDOMNode","headerType","onClickHeader","PureComponent","withTranslation","IconButton","tooltipOpen","that","_assertThisInitialized","getClassName","isRichEditor","icon","AddLinkDialog","setInitialValue","editorUtils","getSelectedText","isLinkActive","linkNode","getCurrentLinkNode","getLinkText","handleUrlChange","handleTitleChange","setLink","editorSelection","insertLink","EditorUtils","AddImageDialog","insertImage","onToggleImageDialog","AddFormulaDialog","nodes","Editor","formula","formulaNode","handleFormulaChange","renderFormula","formulaPreviewer","innerHTML","dom","MathJax","tex2svg","setFormula","at","onAddFormula","toggleFormulaDialog","_ref","TableToolBar","DropList","handle","onSetAlign","onInsertColumn","onRemoveColumn","onInsertRow","onRemoveRow","onRemoveTable","_React$PureComponent2","marginRight","UploadImg","_getPrototypeOf2","_len","_key","imgtoggle","uploadLocalImage","editorApi","onInsertImage","handleFileChange","onInputFile","stopImmediatePropagation","isSimpleEditor","insertRepoFile","accept","ToolBar","onToggleLink","unwrapLink","onToggleLinkDialog","toolbarStatus","isTableActive","isHeadActive","isCodeActive","isBoldActive","isItalicActive","isInlineCodeActive","isBlockquoteActive","isOrderedListActive","isUnorderedListActive","isCheckListActive","isFormulaActive","isListActive","onClickMark","onClickBlock","onToggleCheckItem","onAddTable","canInsertFormula","onToggleFormulaDialog","hasSidePanel","isShowSidePanel","toggleSidePanel","isShowLinkDialog","isShowFormulaDialog","isShowImageDialog","History","isPlainObject","Operation","HistoryCommand","Command","SAVING","MERGING","HistoryEditor","isHistoryEditor","isMerging","isSaving","withoutMerging","withoutSaving","withHistory","exec","undos","redos","command","batch","inverseOps","lastBatch","lastOp","overwrite","shouldOverwrite","shouldSave","shouldMerge","shouldClear","Path","isRangeCollapsed","Range","isCollapsed","TextLinkHoverMenu","saveRef","refDom","getLinkUrl","linkUrl","setMenuPosition","getSelection","anchorOffset","focusOffset","getRangeAt","navigator","userAgent","collapsed","startOffset","setEnd","endContainer","setStart","startContainer","getClientRects","zIndex","componentDidMount","componentWillUnmount","componentWillMount","ContextMenu","menuHeight","menu","contextStyle","tableUtils","contextMenuPosition","insertRow","insertColumn","removeRow","removeColumn","Link","generateLinkElement","Image","generateImage","withBlock","listUtils","ListUtils","codeUtils","CodeUtils","TableUtils","blockquoteUtils","BlockquoteUtils","formulaUtils","FormulaUtils","setNodes","_getEventTransfer","getEventTransfer","fragment","html","isUrl","isInCodeBlock","endsWith","img","generateImageElement","insertNodes","isInternalFileLink","decodeURIComponent","SfEditor","isInternalDirLink","dirName","isInTable","pasteContentInTable","isInlist","pasteContentInList","pasteContentInCodeBlock","isInBlockquote","pasteContentInBlockquote","insertText","_Editor$match","_Editor$match2","_slicedToArray","currentBlock","insertFragment","isEmptyParagraph","_fragment","htmlDeserializer","newText","wrapBlockquote","unwrapBlockquote","wrapList","unwrapList","getCurrentListItem","nearestItem","listItems","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","Symbol","iterator","done","return","wrapCodeBlock","unwrapCodeBlock","splitNodes","always","anchor","_toConsumableArray","insertTable","removeTable","setAlign","exitTable","insertFormula","withInline","isInline","elementData","wrapNodes","select","collapse","unwrapNodes","removeNodes","newNodeLink","linkPath","voids","includes","withVoid","isVoid","VOID_ELEMENTS","BOLDITALICREG","BOLDREG","ITALICREG","CODEREG","TextUtils","_editor","getTextInfoBeforeSelection","_Editor$nodes","beforeText","setTextMarkByShortCut","marks","markText","matched","_Editor$node","_Editor$node2","textNode","textPath","lastChart","BOLD","ITALIC","CODE","_objectSpread","selectedPath","SHORTCUTS","withMarkdownShortcut","textUtils","_node","isEnd","_Editor$nodes3","image","imagePath","imageIndex","_Editor$nodes5","Node","_node2","getNodesByTypeAtRange","splitNodesAtPoint","splitCodeLine","_textUtils$getTextInf","_block","_textUtils$getTextInf2","_beforeText","_range","increaseListDepth","_Editor$nodes7","_block2","blockDepth","_Editor$nodes9","listNode","codeBlock","_block3","blockPath","blockNode","normalizeNode","_ref2","previousSibling","nextSiblings","mergeNodes","childPath","Text","isText","TRANSFER_TYPES","setEventTransfer","mime","transfer","dataTransfer","clipboardData","encodedContent","btoa","setData","getData","Plugin","keyCode","isHotKey","onSave","properties","byKey","richMarkdownEditor","voidNode","onCut","onCopy","getSelectedTableCells","controlKey","KeyboardShortcuts","renderShortcut","renderContainer","shortcutData","_this$props","toggleShortcutDialog","userHelp","userHelpData","SimpleEditor","isShowContextMenu","o","contentChanged","foucsEditor","editorRef","onContextMenu","isShowShortcutDialog","withReact","createEditor","deserialize","isShowBigImage","serialize","_this$state","getToolbarStatus","selectionCollapsed","Slate","Editable","renderElement","renderNode","renderLeaf","decorate","decorationNode","ModalPortal","returnObjects","ShortCut","platfrom","shortcutName","ShortCutRight","shortcuts","shortcut","shortcutFirKey","shortcutSecnKey","HelpShortcutList","shortcutType","dataList","liArr","shortcutKeyArr","UserHelpDialog","_React$PureComponent3","hideHelpDialog","CommentDialog","handleCommentChange","comment","submitComment","quote","commentPosition","detailJSON","postComment","onCommentAdded","setQuoteText","mdQuote","toggleCommentDialog","ParticipantsList","openDialogs","tooltipToggle","participants","Participant","_React$Component2","toggleAvatarTooltip","showAvatarTooltip","defaultStyle","control","fontWeight","highlighter","overflow","minHeight","borderRadius","overfflowY","outlineOffset","outlineColor","outlineStyle","outlineWidth","suggestions","overflowX","borderBottom","CommentPanel","toggleResolvedComment","showResolvedComment","listComments","isScroll","commentsList","comments","scrollTo","resolveComment","updateComment","deleteComment","editComment","commentID","newComment","listRepoRelatedUsers","showParticipants","relatedUsers","addComment","addParticipant","toBeAddedParticipant","addFileParticipants","onParticipantsChange","checkParticipant","participant","renderUserSuggestion","entry","highlightedDisplay","focused","relistComment","oldTime","CommentItem","scrollToQuote","MentionsInput","Mention","trigger","displayTransform","renderSuggestion","onAdd","appendSpaceOnAdd","clos","rows","warp","toggleDropDownMenu","convertComment","toggleEditComment","editable","resolved","DetailListView","onEditFileTagToggle","onListRelatedFileToggle","bytes","fileTagList","relatedFiles","fileInfo","_this$props$editorApi","serviceUrl","fileTag","tag_color","tag_name","relatedFile","rel","navItem","onOutlineClick","toggleCommentBtn","onMarkdownHintClick","onDetailClick","onCommentsPanelClick","openMarkdownHint","issues","issue_list","outlineActive","commentsPanel","detailList","OutlineView","getDomNodeByPath","querySelector","setBtnPosition","showCommentBtn","timmer","commentbtn","clearTimeout","focusNodePath","focusNode","offsetTop","initialSidePanel","mainPanelWidth","getCookie","scrollToNode","editorContainer","encodeURI","showHelpDialog","isShowHelpDialog","insertRepoImage","onResizeMouseUp","resizeFlag","setCookie","onResizeMouseDown","onResizeMouseMove","movementX","innerWidth","handleCommentOpen","cookie","getQuote","showCommentDialog","ca","ReactEditor","toDOMNode","addLink","isImage","leftNavMode","resetRichValue","collabUsers","ele","is_editing","myself","warning","texts","_this$state2","onResizeMove","mainPanelClass","mainPanelStyle","onMouseMove","onMouseUp","onSelect","lodash","CodeMirror","isFocused","codeMirror","focusChanged","onFocusChange","cursorActivity","cm","onCursorActivity","scrollChanged","getScrollInfo","codemirrorValueChanged","doc","getValue","codeMirrorInstance","getCodeMirrorInstance","fromTextArea","textareaNode","on","toTextArea","initialValue","preserveScrollPosition","prevScrollPosition","setValue","editorClassName","PlainMarkdownEditor","leftIsBindScroll","rightIsBindScroll","scrollData","scrollPercentage","leftPanel","rightPanel","updateCode","newCode","onLeftScroll","scrollHeight","onRightScroll","onEnterLeftPanel","onLeaveLeftPanel","onEnterRightPanel","onLeaveRightPanel","onHotKey","isHotkey","lineNumbers","lineWrapping","scrollbarStyle","setContent","throttle","vfile","Prism","highlightAll","typesetPromise","querySelectorAll","SeafileEditor","switchToPlainTextEditor","editorMode","richValue","setEditorMode","initialPlainValue","collabServer","emitSwitchEditor","switchToRichTextEditor","onUnload","confirmationMessage","clearTimer","deleteDraft","returnValue","setDraftValue","onContentChanged","autoSave","autoSaveDraft","saveContent","onSaving","lastModifyTime","getFileInfo","setFileInfoMtime","addParticipants","isParticipant","onRichEditorSave","onPlainEditorSave","resetContentChanged","isEditMode","isDraft","seafileEditor","isTreeDataLoaded","firstNode","RichMarkdownEditor","saving","switchToMarkDownViewer","toggleStar","draftID","SimpleEditorWithErrorBoundary","forceUpdate","SeafileEditorWithErrorBundary","LoadScript","scriptSource","EmptyTip","forDialog","defineProperties","Constructor","protoProps","staticProps","_react","_propTypes","__esModule","self","Manager","_Component","_temp","getPrototypeOf","_setTargetNode","_targetNode","_getTargetNode","setPrototypeOf","popperManager","setTargetNode","restProps","_extends","Target","_props$component","targetRef","targetProps","componentProps","_popper2","Popper","_setArrowNode","_arrowNode","_getOffsets","_isDataDirty","_updateStateModifier","_getPopperStyle","_popper","popper","styles","pointerEvents","_getPopperPlacement","_getPopperHide","_getArrowStyle","arrow","_this$state$data$offs","_handlePopperRef","_popperNode","_createPopper","_destroyPopper","_scheduleUpdate","scheduleUpdate","setArrowNode","getArrowStyle","lastProps","eventsEnabled","applyStyle","updateState","_props2","popperStyle","popperPlacement","popperHide","popperProps","oneOf","placements","Arrow","arrowRef","arrowStyle","arrowProps","defineMode","cmCfg","modeCfg","htmlMode","getMode","htmlModeMissing","findModeByName","found","mimes","highlightFormatting","maxBlockquoteDepth","taskLists","strikethrough","emoji","fencedCodeBlockHighlighting","xml","tokenTypeOverrides","tokenTypes","code","list1","list2","list3","imageAltText","imageMarker","formatting","linkInline","linkEmail","linkText","linkHref","em","strong","tokenType","hrRE","listRE","taskListRE","atxHeaderRE","allowAtxHeaderWithoutSpace","setextHeaderRE","textRE","fencedCodeRE","linkDefRE","punctuation","expandedTab","switchInline","stream","switchBlock","lineIsEmpty","blankLine","linkTitle","indentedCode","htmlBlock","innerMode","htmlState","tagStart","tokenize","isInText","inlineNormal","blockNormal","trailingSpace","trailingSpaceNewLine","prevLine","thisLine","firstTokenOnLine","column","indentation","prevLineLineIsEmpty","prevLineIsIndentedCode","prevLineIsHr","prevLineIsList","maxNonCodeIndentation","listStack","lineIndentation","indentationDiff","allowsInlineContinuation","fencedCodeEnd","isHr","skipToEnd","eatSpace","getType","eat","setext","listType","taskList","fencedEndRE","localMode","localState","startState","local","lookAhead","peek","footnoteLink","md_inside","returnType","currListInd","hasExitedList","maxFencedEndInd","taskOpen","taskClosed","listMod","handleText","matchCh","regex","previousFormatting","eatWhile","formattingEscape","atts","backUp","leftFlanking","rightFlanking","setEm","setStrong","retType","getLinkHrefInside","linkRE","endChar","returnState","footnoteLinkInside","footnoteUrl","copyState","indent","textAfter","Pass","blockCommentStart","blockCommentEnd","closeBrackets","fold","defineMIME","mod","modeInfo","ext","alias","findModeByMIME","findModeByExtension","findModeByFileName","filename","dot","containerStyle","boxSizing","boxShadow","justifyContent","flexDirection","containerBorderSuccess","borderLeft","containerBorderWarn","containerBorderDanger","containerBorderNotify","toastTextTitle","toastTextChild","toastClose","marginLeft","toastIcon","intent","borderStyle","iconColor","iconClass","toastStyle","getContainerStyle","toastTextContainer","onRemove","animationEasing","openAnimation","keyframes","transform","closeAnimation","animationStyles","alignItems","Toast","isShown","close","clearCloseTimer","startCloseTimer","closeTimer","marginBottom","isRemoveable","hasCloseButton","wrapperClass","hasCustomId","settings","ToastManager","getToasts","toasts","closeAll","toast","startsWith","closeToast","createToastInstance","previousState","uniqueId","idCounter","removeToast","bindNotify","bindGetToasts","bindCloseAll","isBrowser","Toaster","_bindNotify","notifyHandler","_bindGetToasts","getToastsHandler","_bindCloseAll","closeAllHandler","NODE_ENV","ChartComponent","handleOnClick","chartInstance","onElementsClick","renderChart","componentDidUpdate","redraw","destroyChart","updateChart","shouldComponentUpdate","isEqual","nextData","transformDataProp","shadowDataProp","memoizeDataProps","saveCurrentDatasets","checkDatasets","isDev","usingCustomKeyProvider","datasetKeyProvider","getLabelAsKey","multipleDatasets","shouldWarn","getCurrentDatasets","currentDatasets","nextDatasets","currentDatasetsIndexed","keyBy","pid","_props3","arrayOf","Doughnut","_React$Component3","Pie","_this7","_React$Component4","_this9","_ref3","_React$Component5","Bar","_this11","_ref4","_React$Component6","HorizontalBar","_this13","_ref5","_React$Component7","Radar","_this15","_ref6","_React$Component8","Polar","_this17","_ref7","_React$Component9","Bubble","_this19","_ref8","_React$Component10","Scatter","_this21","_ref9","baseAssignValue","createAggregator","_Manager3","_Target3","_Popper3","_Arrow3"],"mappings":"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","file":"static/js/sysAdmin.chunk.js","sourcesContent":["import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Modal, ModalHeader, Input, ModalBody, ModalFooter, Form, FormGroup, Label, Alert } from 'reactstrap';\nimport { gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\n\nconst propTypes = {\n  fileType: PropTypes.string,\n  parentPath: PropTypes.string.isRequired,\n  onAddFolder: PropTypes.func.isRequired,\n  checkDuplicatedName: PropTypes.func.isRequired,\n  addFolderCancel: PropTypes.func.isRequired,\n};\n\nclass CreateForder extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      parentPath: '',\n      childName: '',\n      errMessage: '',\n      isSubmitBtnActive: false,\n    };\n    this.newInput = React.createRef();\n  }\n\n  componentDidMount() {\n    let parentPath = this.props.parentPath;\n    if (parentPath[parentPath.length - 1] === '/') {  // mainPanel\n      this.setState({parentPath: parentPath});\n    } else {\n      this.setState({parentPath: parentPath + '/'}); // sidePanel\n    }\n    this.newInput.focus();\n    this.newInput.setSelectionRange(0,0);\n  }\n\n  handleChange = (e) => {\n    if (!e.target.value.trim()) {\n      this.setState({isSubmitBtnActive: false});\n    } else {\n      this.setState({isSubmitBtnActive: true});\n    }\n\n    this.setState({childName: e.target.value});\n  }\n\n  handleSubmit = () => {\n    if (!this.state.isSubmitBtnActive) {\n      return;\n    }\n\n    let newName = this.state.childName;\n    let isDuplicated = this.checkDuplicatedName();\n\n    if (isDuplicated) {\n      let errMessage = gettext('The name \"{name}\" is already taken. Please choose a different name.');\n      errMessage = errMessage.replace('{name}', Utils.HTMLescape(newName));\n      this.setState({errMessage: errMessage});\n    } else {\n      let path = this.state.parentPath + newName;\n      this.props.onAddFolder(path);\n    }\n  }\n\n  handleKeyPress = (e) => {\n    if (e.key === 'Enter') {\n      this.handleSubmit();\n      e.preventDefault();\n    }\n  }\n\n  toggle = () => {\n    this.props.addFolderCancel();\n  }\n\n  checkDuplicatedName = () => {\n    let isDuplicated = this.props.checkDuplicatedName(this.state.childName);\n    return isDuplicated;\n  }\n\n  render() {\n    return (\n      <Modal isOpen={true} toggle={this.toggle}>\n        <ModalHeader toggle={this.toggle}>{gettext('New Folder')}</ModalHeader>\n        <ModalBody>\n          <Form>\n            <FormGroup>\n              <Label for=\"folderName\">{gettext('Name')}</Label>\n              <Input\n                id=\"folderName\"\n                value={this.state.childName}\n                innerRef={input => {this.newInput = input;}}\n                onKeyPress={this.handleKeyPress}\n                onChange={this.handleChange}\n              />\n            </FormGroup>\n          </Form>\n          {this.state.errMessage && <Alert color=\"danger\" className=\"mt-2\">{this.state.errMessage}</Alert>}\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.toggle}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.handleSubmit} disabled={!this.state.isSubmitBtnActive}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nCreateForder.propTypes = propTypes;\n\nexport default CreateForder;\n","var arrayAggregator = require('./_arrayAggregator'),\n    baseAggregator = require('./_baseAggregator'),\n    baseIteratee = require('./_baseIteratee'),\n    isArray = require('./isArray');\n\n/**\n * Creates a function like `_.groupBy`.\n *\n * @private\n * @param {Function} setter The function to set accumulator values.\n * @param {Function} [initializer] The accumulator object initializer.\n * @returns {Function} Returns the new aggregator function.\n */\nfunction createAggregator(setter, initializer) {\n  return function(collection, iteratee) {\n    var func = isArray(collection) ? arrayAggregator : baseAggregator,\n        accumulator = initializer ? initializer() : {};\n\n    return func(collection, setter, baseIteratee(iteratee, 2), accumulator);\n  };\n}\n\nmodule.exports = createAggregator;\n","/**\n * A specialized version of `baseAggregator` for arrays.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} setter The function to set `accumulator` values.\n * @param {Function} iteratee The iteratee to transform keys.\n * @param {Object} accumulator The initial aggregated object.\n * @returns {Function} Returns `accumulator`.\n */\nfunction arrayAggregator(array, setter, iteratee, accumulator) {\n  var index = -1,\n      length = array == null ? 0 : array.length;\n\n  while (++index < length) {\n    var value = array[index];\n    setter(accumulator, value, iteratee(value), array);\n  }\n  return accumulator;\n}\n\nmodule.exports = arrayAggregator;\n","var baseEach = require('./_baseEach');\n\n/**\n * Aggregates elements of `collection` on `accumulator` with keys transformed\n * by `iteratee` and values set by `setter`.\n *\n * @private\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function} setter The function to set `accumulator` values.\n * @param {Function} iteratee The iteratee to transform keys.\n * @param {Object} accumulator The initial aggregated object.\n * @returns {Function} Returns `accumulator`.\n */\nfunction baseAggregator(collection, setter, iteratee, accumulator) {\n  baseEach(collection, function(value, key, collection) {\n    setter(accumulator, value, iteratee(value), collection);\n  });\n  return accumulator;\n}\n\nmodule.exports = baseAggregator;\n","var baseForOwn = require('./_baseForOwn'),\n    createBaseEach = require('./_createBaseEach');\n\n/**\n * The base implementation of `_.forEach` without support for iteratee shorthands.\n *\n * @private\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array|Object} Returns `collection`.\n */\nvar baseEach = createBaseEach(baseForOwn);\n\nmodule.exports = baseEach;\n","var baseFor = require('./_baseFor'),\n    keys = require('./keys');\n\n/**\n * The base implementation of `_.forOwn` without support for iteratee shorthands.\n *\n * @private\n * @param {Object} object The object to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Object} Returns `object`.\n */\nfunction baseForOwn(object, iteratee) {\n  return object && baseFor(object, iteratee, keys);\n}\n\nmodule.exports = baseForOwn;\n","var createBaseFor = require('./_createBaseFor');\n\n/**\n * The base implementation of `baseForOwn` which iterates over `object`\n * properties returned by `keysFunc` and invokes `iteratee` for each property.\n * Iteratee functions may exit iteration early by explicitly returning `false`.\n *\n * @private\n * @param {Object} object The object to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @param {Function} keysFunc The function to get the keys of `object`.\n * @returns {Object} Returns `object`.\n */\nvar baseFor = createBaseFor();\n\nmodule.exports = baseFor;\n","/**\n * Creates a base function for methods like `_.forIn` and `_.forOwn`.\n *\n * @private\n * @param {boolean} [fromRight] Specify iterating from right to left.\n * @returns {Function} Returns the new base function.\n */\nfunction createBaseFor(fromRight) {\n  return function(object, iteratee, keysFunc) {\n    var index = -1,\n        iterable = Object(object),\n        props = keysFunc(object),\n        length = props.length;\n\n    while (length--) {\n      var key = props[fromRight ? length : ++index];\n      if (iteratee(iterable[key], key, iterable) === false) {\n        break;\n      }\n    }\n    return object;\n  };\n}\n\nmodule.exports = createBaseFor;\n","var isArrayLike = require('./isArrayLike');\n\n/**\n * Creates a `baseEach` or `baseEachRight` function.\n *\n * @private\n * @param {Function} eachFunc The function to iterate over a collection.\n * @param {boolean} [fromRight] Specify iterating from right to left.\n * @returns {Function} Returns the new base function.\n */\nfunction createBaseEach(eachFunc, fromRight) {\n  return function(collection, iteratee) {\n    if (collection == null) {\n      return collection;\n    }\n    if (!isArrayLike(collection)) {\n      return eachFunc(collection, iteratee);\n    }\n    var length = collection.length,\n        index = fromRight ? length : -1,\n        iterable = Object(collection);\n\n    while ((fromRight ? index-- : ++index < length)) {\n      if (iteratee(iterable[index], index, iterable) === false) {\n        break;\n      }\n    }\n    return collection;\n  };\n}\n\nmodule.exports = createBaseEach;\n","var baseMatches = require('./_baseMatches'),\n    baseMatchesProperty = require('./_baseMatchesProperty'),\n    identity = require('./identity'),\n    isArray = require('./isArray'),\n    property = require('./property');\n\n/**\n * The base implementation of `_.iteratee`.\n *\n * @private\n * @param {*} [value=_.identity] The value to convert to an iteratee.\n * @returns {Function} Returns the iteratee.\n */\nfunction baseIteratee(value) {\n  // Don't store the `typeof` result in a variable to avoid a JIT bug in Safari 9.\n  // See https://bugs.webkit.org/show_bug.cgi?id=156034 for more details.\n  if (typeof value == 'function') {\n    return value;\n  }\n  if (value == null) {\n    return identity;\n  }\n  if (typeof value == 'object') {\n    return isArray(value)\n      ? baseMatchesProperty(value[0], value[1])\n      : baseMatches(value);\n  }\n  return property(value);\n}\n\nmodule.exports = baseIteratee;\n","var baseIsMatch = require('./_baseIsMatch'),\n    getMatchData = require('./_getMatchData'),\n    matchesStrictComparable = require('./_matchesStrictComparable');\n\n/**\n * The base implementation of `_.matches` which doesn't clone `source`.\n *\n * @private\n * @param {Object} source The object of property values to match.\n * @returns {Function} Returns the new spec function.\n */\nfunction baseMatches(source) {\n  var matchData = getMatchData(source);\n  if (matchData.length == 1 && matchData[0][2]) {\n    return matchesStrictComparable(matchData[0][0], matchData[0][1]);\n  }\n  return function(object) {\n    return object === source || baseIsMatch(object, source, matchData);\n  };\n}\n\nmodule.exports = baseMatches;\n","var Stack = require('./_Stack'),\n    baseIsEqual = require('./_baseIsEqual');\n\n/** Used to compose bitmasks for value comparisons. */\nvar COMPARE_PARTIAL_FLAG = 1,\n    COMPARE_UNORDERED_FLAG = 2;\n\n/**\n * The base implementation of `_.isMatch` without support for iteratee shorthands.\n *\n * @private\n * @param {Object} object The object to inspect.\n * @param {Object} source The object of property values to match.\n * @param {Array} matchData The property names, values, and compare flags to match.\n * @param {Function} [customizer] The function to customize comparisons.\n * @returns {boolean} Returns `true` if `object` is a match, else `false`.\n */\nfunction baseIsMatch(object, source, matchData, customizer) {\n  var index = matchData.length,\n      length = index,\n      noCustomizer = !customizer;\n\n  if (object == null) {\n    return !length;\n  }\n  object = Object(object);\n  while (index--) {\n    var data = matchData[index];\n    if ((noCustomizer && data[2])\n          ? data[1] !== object[data[0]]\n          : !(data[0] in object)\n        ) {\n      return false;\n    }\n  }\n  while (++index < length) {\n    data = matchData[index];\n    var key = data[0],\n        objValue = object[key],\n        srcValue = data[1];\n\n    if (noCustomizer && data[2]) {\n      if (objValue === undefined && !(key in object)) {\n        return false;\n      }\n    } else {\n      var stack = new Stack;\n      if (customizer) {\n        var result = customizer(objValue, srcValue, key, object, source, stack);\n      }\n      if (!(result === undefined\n            ? baseIsEqual(srcValue, objValue, COMPARE_PARTIAL_FLAG | COMPARE_UNORDERED_FLAG, customizer, stack)\n            : result\n          )) {\n        return false;\n      }\n    }\n  }\n  return true;\n}\n\nmodule.exports = baseIsMatch;\n","var isStrictComparable = require('./_isStrictComparable'),\n    keys = require('./keys');\n\n/**\n * Gets the property names, values, and compare flags of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the match data of `object`.\n */\nfunction getMatchData(object) {\n  var result = keys(object),\n      length = result.length;\n\n  while (length--) {\n    var key = result[length],\n        value = object[key];\n\n    result[length] = [key, value, isStrictComparable(value)];\n  }\n  return result;\n}\n\nmodule.exports = getMatchData;\n","var baseIsEqual = require('./_baseIsEqual'),\n    get = require('./get'),\n    hasIn = require('./hasIn'),\n    isKey = require('./_isKey'),\n    isStrictComparable = require('./_isStrictComparable'),\n    matchesStrictComparable = require('./_matchesStrictComparable'),\n    toKey = require('./_toKey');\n\n/** Used to compose bitmasks for value comparisons. */\nvar COMPARE_PARTIAL_FLAG = 1,\n    COMPARE_UNORDERED_FLAG = 2;\n\n/**\n * The base implementation of `_.matchesProperty` which doesn't clone `srcValue`.\n *\n * @private\n * @param {string} path The path of the property to get.\n * @param {*} srcValue The value to match.\n * @returns {Function} Returns the new spec function.\n */\nfunction baseMatchesProperty(path, srcValue) {\n  if (isKey(path) && isStrictComparable(srcValue)) {\n    return matchesStrictComparable(toKey(path), srcValue);\n  }\n  return function(object) {\n    var objValue = get(object, path);\n    return (objValue === undefined && objValue === srcValue)\n      ? hasIn(object, path)\n      : baseIsEqual(srcValue, objValue, COMPARE_PARTIAL_FLAG | COMPARE_UNORDERED_FLAG);\n  };\n}\n\nmodule.exports = baseMatchesProperty;\n","var baseGet = require('./_baseGet');\n\n/**\n * Gets the value at `path` of `object`. If the resolved value is\n * `undefined`, the `defaultValue` is returned in its place.\n *\n * @static\n * @memberOf _\n * @since 3.7.0\n * @category Object\n * @param {Object} object The object to query.\n * @param {Array|string} path The path of the property to get.\n * @param {*} [defaultValue] The value returned for `undefined` resolved values.\n * @returns {*} Returns the resolved value.\n * @example\n *\n * var object = { 'a': [{ 'b': { 'c': 3 } }] };\n *\n * _.get(object, 'a[0].b.c');\n * // => 3\n *\n * _.get(object, ['a', '0', 'b', 'c']);\n * // => 3\n *\n * _.get(object, 'a.b.c', 'default');\n * // => 'default'\n */\nfunction get(object, path, defaultValue) {\n  var result = object == null ? undefined : baseGet(object, path);\n  return result === undefined ? defaultValue : result;\n}\n\nmodule.exports = get;\n","var baseHasIn = require('./_baseHasIn'),\n    hasPath = require('./_hasPath');\n\n/**\n * Checks if `path` is a direct or inherited property of `object`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Object\n * @param {Object} object The object to query.\n * @param {Array|string} path The path to check.\n * @returns {boolean} Returns `true` if `path` exists, else `false`.\n * @example\n *\n * var object = _.create({ 'a': _.create({ 'b': 2 }) });\n *\n * _.hasIn(object, 'a');\n * // => true\n *\n * _.hasIn(object, 'a.b');\n * // => true\n *\n * _.hasIn(object, ['a', 'b']);\n * // => true\n *\n * _.hasIn(object, 'b');\n * // => false\n */\nfunction hasIn(object, path) {\n  return object != null && hasPath(object, path, baseHasIn);\n}\n\nmodule.exports = hasIn;\n","/**\n * The base implementation of `_.hasIn` without support for deep paths.\n *\n * @private\n * @param {Object} [object] The object to query.\n * @param {Array|string} key The key to check.\n * @returns {boolean} Returns `true` if `key` exists, else `false`.\n */\nfunction baseHasIn(object, key) {\n  return object != null && key in Object(object);\n}\n\nmodule.exports = baseHasIn;\n","var castPath = require('./_castPath'),\n    isArguments = require('./isArguments'),\n    isArray = require('./isArray'),\n    isIndex = require('./_isIndex'),\n    isLength = require('./isLength'),\n    toKey = require('./_toKey');\n\n/**\n * Checks if `path` exists on `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {Array|string} path The path to check.\n * @param {Function} hasFunc The function to check properties.\n * @returns {boolean} Returns `true` if `path` exists, else `false`.\n */\nfunction hasPath(object, path, hasFunc) {\n  path = castPath(path, object);\n\n  var index = -1,\n      length = path.length,\n      result = false;\n\n  while (++index < length) {\n    var key = toKey(path[index]);\n    if (!(result = object != null && hasFunc(object, key))) {\n      break;\n    }\n    object = object[key];\n  }\n  if (result || ++index != length) {\n    return result;\n  }\n  length = object == null ? 0 : object.length;\n  return !!length && isLength(length) && isIndex(key, length) &&\n    (isArray(object) || isArguments(object));\n}\n\nmodule.exports = hasPath;\n","var baseProperty = require('./_baseProperty'),\n    basePropertyDeep = require('./_basePropertyDeep'),\n    isKey = require('./_isKey'),\n    toKey = require('./_toKey');\n\n/**\n * Creates a function that returns the value at `path` of a given object.\n *\n * @static\n * @memberOf _\n * @since 2.4.0\n * @category Util\n * @param {Array|string} path The path of the property to get.\n * @returns {Function} Returns the new accessor function.\n * @example\n *\n * var objects = [\n *   { 'a': { 'b': 2 } },\n *   { 'a': { 'b': 1 } }\n * ];\n *\n * _.map(objects, _.property('a.b'));\n * // => [2, 1]\n *\n * _.map(_.sortBy(objects, _.property(['a', 'b'])), 'a.b');\n * // => [1, 2]\n */\nfunction property(path) {\n  return isKey(path) ? baseProperty(toKey(path)) : basePropertyDeep(path);\n}\n\nmodule.exports = property;\n","/**\n * The base implementation of `_.property` without support for deep paths.\n *\n * @private\n * @param {string} key The key of the property to get.\n * @returns {Function} Returns the new accessor function.\n */\nfunction baseProperty(key) {\n  return function(object) {\n    return object == null ? undefined : object[key];\n  };\n}\n\nmodule.exports = baseProperty;\n","var baseGet = require('./_baseGet');\n\n/**\n * A specialized version of `baseProperty` which supports deep paths.\n *\n * @private\n * @param {Array|string} path The path of the property to get.\n * @returns {Function} Returns the new accessor function.\n */\nfunction basePropertyDeep(path) {\n  return function(object) {\n    return baseGet(object, path);\n  };\n}\n\nmodule.exports = basePropertyDeep;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Link } from '@reach/router';\nimport Logo from '../../components/logo';\nimport { gettext, siteRoot, isPro, otherPermission, canViewSystemInfo, canViewStatistic,\n  canConfigSystem, canManageLibrary, canManageUser, canManageGroup, canViewUserLog,\n  canViewAdminLog, constanceEnabled, multiTenancy, multiInstitution, sysadminExtraEnabled,\n  enableGuestInvitation, enableTermsAndConditions, enableFileScan, enableWorkWeixin, enableDingtalk,\n  enableShareLinkReportAbuse } from '../../utils/constants';\n\nconst propTypes = {\n  isSidePanelClosed: PropTypes.bool.isRequired,\n  onCloseSidePanel: PropTypes.func.isRequired,\n  currentTab: PropTypes.string.isRequired,\n  tabItemClick: PropTypes.func.isRequired\n};\n\nclass SidePanel extends React.Component {\n\n  getActiveClass = (tab) => {\n    return this.props.currentTab == tab ? 'active' : '';\n  }\n\n  render() {\n    return (\n      <div className={`side-panel ${this.props.isSidePanelClosed ? '' : 'left-zero'}`}>\n        <div className=\"side-panel-north\">\n          <Logo onCloseSidePanel={this.props.onCloseSidePanel}/>\n        </div>\n        <div className=\"side-panel-center\">\n          <div className=\"side-nav\">\n            <div className=\"side-nav-con\">\n              <h3 className=\"sf-heading\">{gettext('System Admin')}</h3>\n              <ul className=\"nav nav-pills flex-column nav-container\">\n                {canViewSystemInfo &&\n                <li className=\"nav-item\">\n                  <Link\n                    className={`nav-link ellipsis ${this.getActiveClass('info')}`}\n                    to={siteRoot + 'sys/info/'}\n                    onClick={() => this.props.tabItemClick('info')}\n                  >\n                    <span className=\"sf2-icon-info\" aria-hidden=\"true\"></span>\n                    <span className=\"nav-text\">{gettext('Info')}</span>\n                  </Link>\n                </li>\n                }\n                {isPro && canViewStatistic &&\n                  <li className=\"nav-item\">\n                    <Link className={`nav-link ellipsis ${this.getActiveClass('statistic')}`}\n                      to={siteRoot + 'sys/statistics/file/'}\n                      onClick={() => this.props.tabItemClick('statistic')}\n                    >\n                      <span className=\"sf2-icon-histogram\" aria-hidden=\"true\"></span>\n                      <span className=\"nav-text\">{gettext('Statistic')}</span>\n                    </Link>\n                  </li>\n                }\n                {otherPermission &&\n                  <li className=\"nav-item\">\n                    <Link\n                      className={`nav-link ellipsis ${this.getActiveClass('devices')}`}\n                      to={siteRoot + 'sys/desktop-devices/'}\n                      onClick={() => this.props.tabItemClick('devices')}\n                    >\n                      <span className=\"sf2-icon-monitor\" aria-hidden=\"true\"></span>\n                      <span className=\"nav-text\">{gettext('Devices')}</span>\n                    </Link>\n                  </li>\n                }\n                {constanceEnabled && canConfigSystem &&\n                  <li className=\"nav-item\">\n                    <Link\n                      className={`nav-link ellipsis ${this.getActiveClass('web-settings')}`}\n                      to={siteRoot + 'sys/web-settings/'}\n                      onClick={() => this.props.tabItemClick('web-settings')}\n                    >\n                      <span className=\"sf2-icon-cog2\" aria-hidden=\"true\"></span>\n                      <span className=\"nav-text\">{gettext('Settings')}</span>\n                    </Link>\n                  </li>\n                }\n                {canManageLibrary &&\n                  <li className=\"nav-item\">\n                    <Link\n                      className={`nav-link ellipsis ${this.getActiveClass('libraries')}`}\n                      to={siteRoot + 'sys/all-libraries/'}\n                      onClick={() => this.props.tabItemClick('libraries')}\n                    >\n                      <span className=\"sf2-icon-library\" aria-hidden=\"true\"></span>\n                      <span className=\"nav-text\">{gettext('Libraries')}</span>\n                    </Link>\n                  </li>\n                }\n                {canManageUser &&\n                  <li className=\"nav-item\">\n                    <Link\n                      className={`nav-link ellipsis ${this.getActiveClass('users')}`}\n                      to={siteRoot + 'sys/users/'}\n                      onClick={() => this.props.tabItemClick('users')}\n                    >\n                      <span className=\"sf2-icon-user\" aria-hidden=\"true\"></span>\n                      <span className=\"nav-text\">{gettext('Users')}</span>\n                    </Link>\n                  </li>\n                }\n                {canManageGroup &&\n                  <li className=\"nav-item\">\n                    <Link\n                      className={`nav-link ellipsis ${this.getActiveClass('groups')}`}\n                      to={siteRoot + 'sys/groups/'}\n                      onClick={() => this.props.tabItemClick('groups')}\n                    >\n                      <span className=\"sf2-icon-group\" aria-hidden=\"true\"></span>\n                      <span className=\"nav-text\">{gettext('Groups')}</span>\n                    </Link>\n                  </li>\n                }\n                {isPro && canManageGroup &&\n                  <li className=\"nav-item\">\n                    <Link\n                      className={`nav-link ellipsis ${this.getActiveClass('departments')}`}\n                      to={siteRoot + 'sys/departments/'}\n                      onClick={() => this.props.tabItemClick('departments')}\n                    >\n                      <span className=\"sf2-icon-organization\" aria-hidden=\"true\"></span>\n                      <span className=\"nav-text\">{gettext('Departments')}</span>\n                    </Link>\n                  </li>\n                }\n                {multiTenancy && otherPermission &&\n                  <li className=\"nav-item\">\n                    <Link\n                      className={`nav-link ellipsis ${this.getActiveClass('organizations')}`}\n                      to={siteRoot + 'sys/organizations/'}\n                      onClick={() => this.props.tabItemClick('organizations')}\n                    >\n                      <span className=\"sf2-icon-organization\" aria-hidden=\"true\"></span>\n                      <span className=\"nav-text\">{gettext('Organizations')}</span>\n                    </Link>\n                  </li>\n                }\n                {multiInstitution && otherPermission &&\n                  <li className=\"nav-item\">\n                    <Link\n                      className={`nav-link ellipsis ${this.getActiveClass('institutions')}`}\n                      to={siteRoot + 'sys/institutions/'}\n                      onClick={() => this.props.tabItemClick('institutions')}\n                    >\n                      <span className=\"sf2-icon-organization\" aria-hidden=\"true\"></span>\n                      <span className=\"nav-text\">{gettext('Institutions')}</span>\n                    </Link>\n                  </li>\n                }\n                {otherPermission &&\n                  <li className=\"nav-item\">\n                    <Link\n                      className={`nav-link ellipsis ${this.getActiveClass('notifications')}`}\n                      to={siteRoot + 'sys/notifications/'}\n                      onClick={() => this.props.tabItemClick('notifications')}\n                    >\n                      <span className=\"sf2-icon-msgs\" aria-hidden=\"true\"></span>\n                      <span className=\"nav-text\">{gettext('Notifications')}</span>\n                    </Link>\n                  </li>\n                }\n                {otherPermission &&\n                  <li className=\"nav-item\">\n                    <Link\n                      className={`nav-link ellipsis ${this.getActiveClass('links')}`}\n                      to={siteRoot + 'sys/share-links/'}\n                      onClick={() => this.props.tabItemClick('links')}\n                    >\n                      <span className=\"sf2-icon-link\" aria-hidden=\"true\"></span>\n                      <span className=\"nav-text\">{gettext('Links')}</span>\n                    </Link>\n                  </li>\n                }\n                {sysadminExtraEnabled && canViewUserLog &&\n                  <li className=\"nav-item\">\n                    <Link\n                      className={`nav-link ellipsis ${this.getActiveClass('logs')}`}\n                      to={siteRoot + 'sys/logs/login'}\n                      onClick={() => this.props.tabItemClick('logs')}\n                    >\n                      <span className=\"sf2-icon-clock\" aria-hidden=\"true\"></span>\n                      <span className=\"nav-text\">{gettext('Logs')}</span>\n                    </Link>\n                  </li>\n                }\n                {isPro && otherPermission && enableFileScan &&\n                  <li className=\"nav-item\">\n                    <Link\n                      className={`nav-link ellipsis ${this.getActiveClass('file-scan-records')}`}\n                      to={siteRoot + 'sys/file-scan-records/'}\n                      onClick={() => this.props.tabItemClick('file-scan-records')}\n                    >\n                      <span className=\"sf2-icon-security\" aria-hidden=\"true\"></span>\n                      <span className=\"nav-text\">{gettext('File Scan')}</span>\n                    </Link>\n                  </li>\n                }\n                {isPro && otherPermission &&\n                  <li className=\"nav-item\">\n                    <Link\n                      className={`nav-link ellipsis ${this.getActiveClass('virus-files')}`}\n                      to={siteRoot + 'sys/virus-files/all/'}\n                      onClick={() => this.props.tabItemClick('virus-files')}\n                    >\n                      <span className=\"sf2-icon-security\" aria-hidden=\"true\"></span>\n                      <span className=\"nav-text\">{gettext('Virus Scan')}</span>\n                    </Link>\n                  </li>\n                }\n                {isPro && enableGuestInvitation && otherPermission &&\n                  <li className=\"nav-item\">\n                    <Link\n                      className={`nav-link ellipsis ${this.getActiveClass('invitations')}`}\n                      to={siteRoot + 'sys/invitations/'}\n                      onClick={() => this.props.tabItemClick('invitations')}\n                    >\n                      <span className=\"sf2-icon-invite\" aria-hidden=\"true\"></span>\n                      <span className=\"nav-text\">{gettext('Invitations')}</span>\n                    </Link>\n                  </li>\n                }\n                {otherPermission && enableTermsAndConditions &&\n                  <li className=\"nav-item\">\n                    <Link\n                      className={`nav-link ellipsis ${this.getActiveClass('termsandconditions')}`}\n                      to={siteRoot + 'sys/terms-and-conditions/'}\n                      onClick={() => this.props.tabItemClick('termsandconditions')}\n                    >\n                      <span className=\"sf2-icon-wiki\" aria-hidden=\"true\"></span>\n                      <span className=\"nav-text\">{gettext('Terms and Conditions')}</span>\n                    </Link>\n                  </li>\n                }\n                {isPro && canViewAdminLog &&\n                  <li className=\"nav-item\">\n                    <Link\n                      className={`nav-link ellipsis ${this.getActiveClass('adminLogs')}`}\n                      to={siteRoot + 'sys/admin-logs/operation'}\n                      onClick={() => this.props.tabItemClick('adminLogs')}\n                    >\n                      <span className=\"sf2-icon-admin-log\" aria-hidden=\"true\"></span>\n                      <span className=\"nav-text\">{gettext('Admin Logs')}</span>\n                    </Link>\n                  </li>\n                }\n                {otherPermission && enableWorkWeixin &&\n                  <li className=\"nav-item\">\n                    <Link\n                      className={`nav-link ellipsis ${this.getActiveClass('work-weixin')}`}\n                      to={siteRoot + 'sys/work-weixin/'}\n                      onClick={() => this.props.tabItemClick('work-weixin')}\n                    >\n                      <span className=\"sf3-font-enterprise-wechat sf3-font\" aria-hidden=\"true\"></span>\n                      <span className=\"nav-text\">{''}</span>\n                    </Link>\n                  </li>\n                }\n\n                {otherPermission && enableDingtalk &&\n                  <li className=\"nav-item\">\n                    <Link\n                      className={`nav-link ellipsis ${this.getActiveClass('dingtalk')}`}\n                      to={siteRoot + 'sys/dingtalk/'}\n                      onClick={() => this.props.tabItemClick('dingtalk')}\n                    >\n                      <span className=\"sf3-font-dingtalk sf3-font\" aria-hidden=\"true\"></span>\n                      <span className=\"nav-text\">{''}</span>\n                    </Link>\n                  </li>\n                }\n\n                {otherPermission && enableShareLinkReportAbuse &&\n                  <li className=\"nav-item\">\n                    <Link\n                      className={`nav-link ellipsis ${this.getActiveClass('abuse-reports')}`}\n                      to={siteRoot + 'sys/abuse-reports/'}\n                      onClick={() => this.props.tabItemClick('abuse-reports')}\n                    >\n                      <span className=\"sf2-icon-monitor\" aria-hidden=\"true\"></span>\n                      <span className=\"nav-text\">{gettext('Abuse Reports')}</span>\n                    </Link>\n                  </li>\n                }\n              </ul>\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nSidePanel.propTypes = propTypes;\n\nexport default SidePanel;\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\n\nconst propTypes = {\n  children: PropTypes.object.isRequired,\n};\n\nclass MainPanel extends Component {\n\n  render() {\n    return (\n      <div className=\"main-panel o-hidden\">\n        {this.props.children}\n      </div>\n    );\n  }\n}\n\nMainPanel.propTypes = propTypes;\n\nexport default MainPanel;\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport Account from '../../components/common/account';\n\nconst propTypes = {\n  children: PropTypes.object\n};\n\nclass MainPanelTopbar extends Component {\n\n  render() {\n    return (\n      <div className={`main-panel-north ${this.props.children ? 'border-left-show' : ''}`}>\n        <div className=\"cur-view-toolbar\">\n          <span className=\"sf2-icon-menu side-nav-toggle hidden-md-up d-md-none\" title=\"Side Nav Menu\"></span>\n          <div className=\"operation\">\n            {this.props.children}\n          </div>\n        </div>\n        <div className=\"common-toolbar\">\n          {this.props.search && this.props.search}\n          <Account isAdminPanel={true} />\n        </div>\n      </div>\n    );\n  }\n}\n\nMainPanelTopbar.propTypes = propTypes;\n\nexport default MainPanelTopbar;\n","import React, { Component, Fragment } from 'react';\nimport { Button } from 'reactstrap';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { gettext, isPro, isDefaultAdmin } from '../../utils/constants';\nimport toaster from '../../components/toast';\nimport { Utils } from '../../utils/utils';\nimport Loading from '../../components/loading';\nimport MainPanelTopbar from './main-panel-topbar';\n\nimport '../../css/system-info.css';\n\nclass Info extends Component {\n\n  constructor(props) {\n    super(props);\n    this.fileInput = React.createRef();\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      sysInfo: {}\n    };\n  }\n\n  componentDidMount () {\n    seafileAPI.sysAdminGetSysInfo().then((res) => {\n      this.setState({\n        loading: false,\n        sysInfo: res.data\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  uploadLicenseFile = (e) => {\n\n    // no file selected\n    if (!this.fileInput.current.files.length) {\n      return;\n    }\n    const file = this.fileInput.current.files[0];\n    seafileAPI.sysAdminUploadLicense(file).then((res) => {\n      let info = this.state.sysInfo;\n      Object.assign(info, res.data, {with_license: true});\n      this.setState({\n        sysInfo: info\n      });\n    }).catch((error) => {\n      let errMsg = Utils.getErrorMsg(error);\n      toaster.danger(errMsg);\n    });\n  }\n\n  openFileInput = () => {\n    this.fileInput.current.click();\n  }\n\n  renderLicenseDescString = (license_mode, license_to, license_expiration) => {\n    if (license_mode == 'life-time') {\n      if (window.app.config.lang == 'zh-cn') {\n        return ' ' + license_to + ' ' + license_expiration + ' ';\n      } else {\n        return gettext('licensed to {placeholder_license_to}, upgrade service expired in {placeholder_license_expiration}')\n          .replace('{placeholder_license_to}', license_to).replace('{placeholder_license_expiration}', license_expiration);\n      }\n    } else {\n      return gettext('licensed to {placeholder_license_to}, expires on {placeholder_license_expiration}')\n        .replace('{placeholder_license_to}', license_to).replace('{placeholder_license_expiration}', license_expiration);\n    }\n  }\n\n  render() {\n    let { license_mode, license_to, license_expiration, org_count,\n      repos_count, total_files_count, total_storage, total_devices_count,\n      current_connected_devices_count, license_maxusers, multi_tenancy_enabled,\n      active_users_count, users_count, groups_count, with_license } = this.state.sysInfo;\n    let { loading, errorMsg } = this.state;\n\n    return (\n      <Fragment>\n        <MainPanelTopbar />\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container system-admin-info\">\n            <h2 className=\"heading\">{gettext('Info')}</h2>\n            <div className=\"content\">\n              {loading && <Loading />}\n              {errorMsg && <p className=\"error text-center mt-4\">{errorMsg}</p>}\n              {(!loading && !errorMsg) &&\n              <dl className=\"flex-1 m-0\">\n                <dt className=\"info-item-heading\">{gettext('System Info')}</dt>\n                {isPro ?\n                  <dd className=\"info-item-content\">\n                    {gettext('Professional Edition')}\n                    {with_license &&\n                      ' ' + this.renderLicenseDescString(license_mode, license_to, license_expiration)\n                    }<br/>\n                    {isDefaultAdmin &&\n                      <Fragment>\n                        <Button type=\"button\" className=\"mt-2\" onClick={this.openFileInput}>{gettext('Upload license')}</Button>\n                        <input className=\"d-none\" type=\"file\" onChange={this.uploadLicenseFile} ref={this.fileInput} />\n                      </Fragment>\n                    }\n                  </dd> :\n                  <dd className=\"info-item-content\">\n                    {gettext('Community Edition')}\n                    <a className=\"ml-1\" href=\"https://download.seafile.com/published/seafile-manual/deploy_pro/migrate_from_seafile_community_server.md\" target=\"_blank\">{gettext('Upgrade to Pro Edition')}</a>\n                  </dd>\n                }\n                <dt className=\"info-item-heading\">{gettext('Libraries')} / {gettext('Files')}</dt>\n                <dd className=\"info-item-content\">{repos_count} / {total_files_count}</dd>\n\n                <dt className=\"info-item-heading\">{gettext('Storage Used')}</dt>\n                <dd className=\"info-item-content\">{Utils.bytesToSize(total_storage)}</dd>\n\n                <dt className=\"info-item-heading\">{gettext('Total Devices')} / {gettext('Current Connected Devices')}</dt>\n                <dd className=\"info-item-content\">{total_devices_count} / {current_connected_devices_count}</dd>\n\n                {isPro ?\n                  <Fragment>\n                    <dt className=\"info-item-heading\">{gettext('Activated Users')} / {gettext('Total Users')} / {gettext('Limits')}</dt>\n                    <dd className=\"info-item-content\">{active_users_count}{' / '}{users_count}{' / '}{with_license ? license_maxusers : '--'}</dd>\n                  </Fragment> :\n                  <Fragment>\n                    <dt className=\"info-item-heading\">{gettext('Activated Users')} / {gettext('Total Users')}</dt>\n                    <dd className=\"info-item-content\">{active_users_count} / {users_count}</dd>\n                  </Fragment>\n                }\n\n                <dt className=\"info-item-heading\">{gettext('Groups')}</dt>\n                <dd className=\"info-item-content\">{groups_count}</dd>\n\n                {multi_tenancy_enabled &&\n                  <Fragment>\n                    <dt className=\"info-item-heading\">{gettext('Organizations')}</dt>\n                    <dd className=\"info-item-content\">{org_count}</dd>\n                  </Fragment>\n                }\n              </dl>\n              }\n            </div>\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nexport default Info;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Link } from '@reach/router';\nimport { siteRoot, gettext } from '../../../utils/constants';\n\nconst propTypes = {\n  currentItem: PropTypes.string.isRequired\n};\n\nclass Nav extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.navItems = [\n      {name: 'fileStatistic', urlPart: 'statistics/file', text: gettext('File')},\n      {name: 'storageStatistic', urlPart: 'statistics/storage', text: gettext('Storage')},\n      {name: 'usersStatistic', urlPart: 'statistics/user', text: gettext('Users')},\n      {name: 'trafficStatistic', urlPart: 'statistics/traffic', text: gettext('Traffic')},\n      {name: 'reportsStatistic', urlPart: 'statistics/reports', text: gettext('Reports')},\n    ];\n  }\n\n  render() {\n    const { currentItem } = this.props;\n    return (\n      <div className=\"cur-view-path tab-nav-container\">\n        <ul className=\"nav\">\n          {this.navItems.map((item, index) => {\n            return (\n              <li className=\"nav-item\" key={index}>\n                <Link to={`${siteRoot}sys/${item.urlPart}/`} className={`nav-link${currentItem == item.name ? ' active' : ''}`}>{item.text}</Link>\n              </li>\n            );\n          })}\n        </ul>\n      </div>\n    );\n  }\n}\n\nNav.propTypes = propTypes;\n\nexport default Nav;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport moment from 'moment';\nimport Calendar from '@seafile/seafile-calendar';\nimport DatePicker from '@seafile/seafile-calendar/lib/Picker';\nimport { translateCalendar } from '../../../utils/date-format-utils';\n\nimport '@seafile/seafile-calendar/assets/index.css';\n\nconst propsTypes = {\n  disabledDate: PropTypes.func.isRequired,\n  value: PropTypes.object,\n  onChange: PropTypes.func.isRequired,\n};\n\nconst FORMAT = 'YYYY-MM-DD';\n\nclass Picker extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.defaultCalendarValue = null;\n  }\n\n  componentDidMount() {\n    let lang = window.app.config.lang;\n    this.defaultCalendarValue = moment().locale(lang).clone();\n  }\n\n  render() {\n    const props = this.props;\n    const calendar = (<Calendar\n      defaultValue={this.defaultCalendarValue}\n      disabledDate={props.disabledDate}\n      format={FORMAT}\n      locale={translateCalendar()}\n    />);\n    return (\n      <DatePicker\n        calendar={calendar}\n        value={props.value}\n        onChange={props.onChange}\n      >\n        {\n          ({value}) => {\n            return (\n              <span>\n                <input\n                  placeholder=\"yyyy-mm-dd\"\n                  tabIndex=\"-1\"\n                  readOnly\n                  value={value && value.format(FORMAT) || ''}\n                  className=\"form-control system-statistic-input\"\n                />\n              </span>\n            );\n          }\n        }\n      </DatePicker>\n    );\n  }\n}\n\nPicker.propsTypes = propsTypes;\n\nexport default Picker;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Button } from 'reactstrap';\nimport moment from 'moment';\nimport { gettext } from '../../../utils/constants';\nimport Picker from './picker';\n\nconst propTypes = {\n  getActiviesFiles: PropTypes.func.isRequired,\n  children: PropTypes.object,\n};\n\nclass StatisticCommonTool extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      statisticType: 'oneWeek',\n      startValue: null,\n      endValue: null,\n    };\n  }\n\n  componentDidMount() {\n    let today = moment().format('YYYY-MM-DD 00:00:00');\n    let endTime = today;\n    let startTime = moment().subtract(6,'d').format('YYYY-MM-DD 00:00:00');\n    let group_by = 'day';\n    this.props.getActiviesFiles(startTime, endTime, group_by);\n  }\n\n  changeActive = (statisticTypeName) => {\n    let { statisticType } = this.state;\n    if (statisticType === statisticTypeName) {\n      return;\n    }\n    let today = moment().format('YYYY-MM-DD 00:00:00');\n    let endTime = today;\n    let startTime;\n    switch(statisticTypeName) {\n      case 'oneWeek' :\n        startTime = moment().subtract(6,'d').format('YYYY-MM-DD 00:00:00');\n        break;\n      case 'oneMonth' :\n        startTime = moment().subtract(29,'d').format('YYYY-MM-DD 00:00:00');\n        break;\n      case 'oneYear' :\n        startTime = moment().subtract(364,'d').format('YYYY-MM-DD 00:00:00');\n        break;\n    }\n    this.setState({\n      statisticType: statisticTypeName,\n    });\n    let group_by = 'day';\n    this.props.getActiviesFiles(startTime, endTime, group_by);\n  }\n\n  disabledStartDate = (startValue) => {\n    if (!startValue) {\n      return false;\n    }\n    let today = moment().format();\n\n    const endValue = this.state.endValue;\n    if (!endValue) {\n      let startTime = moment(startValue).format();\n      return today < startTime;\n    }\n    return endValue.isBefore(startValue) || moment(startValue).format() > today;\n  }\n\n  disabledEndDate = (endValue) => {\n    if (!endValue) {\n      return false;\n    }\n    let today = moment().format();\n    const startValue = this.state.startValue;\n    if (!startValue) {\n      let endTime = moment(endValue).format();\n      return today < endTime;\n    }\n    return endValue.isBefore(startValue) || moment(endValue).format() > today;\n  }\n\n  onChange = (field, value) => {\n    this.setState({\n      [field]: value,\n    });\n  }\n\n  onSubmit = () => {\n    let { startValue, endValue } = this.state;\n    if(!startValue || !endValue) {\n      return;\n    }\n    this.setState({\n      statisticType: 'itemButton',\n    });\n    let startTime = moment(startValue).format('YYYY-MM-DD 00:00:00');\n    let endTime = moment(endValue).format('YYYY-MM-DD 00:00:00');\n    let group_by = 'day';\n    this.props.getActiviesFiles(startTime, endTime, group_by);\n  }\n\n  render() {\n    let { statisticType, endValue, startValue } = this.state;\n    return(\n      <Fragment>\n        {this.props.children}\n        <div className=\"system-statistic-time-range\">\n          <div className=\"sys-stat-tool\">\n            <div className={`system-statistic-item border-right-0 rounded-left ${statisticType === 'oneWeek' ? 'item-active' : ''}`} onClick={this.changeActive.bind(this, 'oneWeek')}>{gettext('7 Days')}</div>\n            <div className={`system-statistic-item border-right-0 ${statisticType === 'oneMonth' ? 'item-active' : ''}`}  onClick={this.changeActive.bind(this, 'oneMonth')}>{gettext('30 Days')}</div>\n            <div className={`system-statistic-item rounded-right ${statisticType === 'oneYear' ? 'item-active' : ''}`}  onClick={this.changeActive.bind(this, 'oneYear')}>{gettext('1 Year')}</div>\n          </div>\n          <div className=\"system-statistic-input-container\">\n            <Picker\n              disabledDate={this.disabledStartDate}\n              value={startValue}\n              onChange={this.onChange.bind(this, 'startValue')}\n            />\n            <span className=\"system-statistic-connect\">-</span>\n            <Picker\n              disabledDate={this.disabledEndDate}\n              value={endValue}\n              onChange={this.onChange.bind(this, 'endValue')}\n            />\n            <Button className=\"operation-item system-statistic-button\" onClick={this.onSubmit}>{gettext('Submit')}</Button>\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nStatisticCommonTool.propTypes = propTypes;\n\nexport default StatisticCommonTool;\n","import React from 'react';\nimport { Line } from 'react-chartjs-2';\nimport PropTypes from 'prop-types';\nimport { Utils } from '../../../utils/utils';\n\nconst propTypes = {\n  labels: PropTypes.array.isRequired,\n  filesData: PropTypes.array.isRequired,\n  suggestedMaxNumbers: PropTypes.number.isRequired,\n  isLegendStatus: PropTypes.bool.isRequired,\n  chartTitle: PropTypes.string.isRequired,\n  isTitleCallback: PropTypes.bool,\n  isTicksCallback: PropTypes.bool,\n};\n\nclass StatisticChart extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      data: {},\n      opations: {}\n    };\n  }\n\n  componentDidMount() {\n    let { labels, filesData, isTitleCallback, isTicksCallback, suggestedMaxNumbers, isLegendStatus, chartTitle } = this.props;\n    let _this = this;\n    let data = {\n      labels: labels,\n      datasets: filesData\n    };\n    let options = {\n      title: {\n        display: true,\n        fontSize: 14,\n        text: chartTitle,\n      },\n      elements: {\n        line: {\n          fill: false,\n          tension: 0, // disable bezier curves, i.e, draw straight lines\n          borderWidth: 2\n        }\n      },\n      legend: {\n        display: isLegendStatus,\n        labels: {\n          usePointStyle: true\n        }\n      },\n      tooltips: {\n        callbacks: {\n          label: function(tooltipItem, data) {\n            if (isTitleCallback) {\n              return _this.titleCallback(tooltipItem, data);\n            }\n            return data.datasets[tooltipItem.datasetIndex].label + ': ' + tooltipItem.yLabel;\n          }\n        }\n      },\n      layout: {\n        padding: {\n          right: 100,\n        }\n      },\n      scales: {\n        yAxes: [{\n          ticks: {\n            beginAtZero: true,\n            suggestedMax: suggestedMaxNumbers,\n            callback: function(value, index, values) {\n              if (isTicksCallback) {\n                return _this.ticksCallback(value, index, values);\n              }\n              return value;\n            }\n          }\n        }],\n        xAxes: [{\n          ticks: {\n            maxTicksLimit: 20\n          }\n        }]\n      }\n    };\n    this.setState({\n      data: data,\n      options: options\n    });\n  }\n\n  componentWillReceiveProps(nextProps) {\n    let data = {\n      labels: nextProps.labels,\n      datasets: nextProps.filesData\n    };\n    this.setState({data: data});\n  }\n\n  titleCallback = (tooltipItem, data) => {\n    return data.datasets[tooltipItem.datasetIndex].label + ': ' + Utils.bytesToSize(tooltipItem.yLabel);\n  }\n\n  ticksCallback = (value, index, values) => {\n    return Utils.bytesToSize(value);\n  }\n\n  render() {\n\n    let { data, options } = this.state;\n    return (\n      <Line\n        data={data}\n        options={options}\n      />\n    );\n  }\n}\n\nStatisticChart.propTypes = propTypes;\n\nexport default StatisticChart;\n","import React, { Fragment } from 'react';\nimport moment from 'moment';\nimport MainPanelTopbar from '../main-panel-topbar';\nimport StatisticNav from './statistic-nav';\nimport StatisticCommonTool from './statistic-common-tool';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport StatisticChart from './statistic-chart';\nimport Loading from '../../../components/loading';\nimport { gettext } from '../../../utils/constants';\nimport { Utils } from '../../../utils/utils';\nimport toaster from '../../../components/toast';\n\nimport '../../../css/system-stat.css';\n\nclass StatisticFile extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      filesData: [],\n      labels: [],\n      isLoading: true\n    };\n  }\n\n  getActiviesFiles = (startTime, endTime, groupBy) => {\n    let { filesData } = this.state;\n    seafileAPI.sysAdminStatisticFiles(startTime, endTime, groupBy).then((res) => {\n      let labels = [],\n        added = [],\n        deleted = [],\n        visited = [],\n        modified = [];\n      let data = res.data;\n      if (Array.isArray(data)) {\n        data.forEach(item => {\n          labels.push(moment(item.datetime).format('YYYY-MM-DD'));\n          added.push(item.added);\n          deleted.push(item.deleted);\n          modified.push(item.modified);\n          visited.push(item.visited);\n        });\n        let addedData = {\n          label: gettext('Added'),\n          data: added,\n          borderColor: '#57cd6b',\n          backgroundColor: '#57cd6b'};\n        let visitedData = {\n          label: gettext('Visited'),\n          data: visited,\n          borderColor: '#fd913a',\n          backgroundColor: '#fd913a'};\n        let modifiedData = {\n          label: gettext('Modified'),\n          data: modified,\n          borderColor: '#72c3fc',\n          backgroundColor: '#72c3fc'};\n        let deletedData = {\n          label: gettext('Deleted'),\n          data: deleted,\n          borderColor: '#f75356',\n          backgroundColor: '#f75356'};\n        filesData = [visitedData, addedData, modifiedData, deletedData];\n      }\n      this.setState({\n        filesData: filesData,\n        labels: labels,\n        isLoading: false\n      });\n    }).catch(err => {\n      let errMessage = Utils.getErrorMsg(err);\n      toaster.danger(errMessage);\n    });\n  }\n\n  render() {\n    let { labels, filesData, isLoading } = this.state;\n\n    return(\n      <Fragment>\n        <MainPanelTopbar />\n        <div className=\"cur-view-container\">\n          <StatisticNav currentItem=\"fileStatistic\" />\n          <div className=\"cur-view-content\">\n            <StatisticCommonTool getActiviesFiles={this.getActiviesFiles} />\n            {isLoading && <Loading />}\n            {!isLoading && labels.length > 0 &&\n              <StatisticChart\n                labels={labels}\n                filesData={filesData}\n                suggestedMaxNumbers={10}\n                isLegendStatus={true}\n                chartTitle={gettext('File Operations')}\n              />\n            }\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nexport default StatisticFile;\n","import React, { Fragment } from 'react';\nimport moment from 'moment';\nimport MainPanelTopbar from '../main-panel-topbar';\nimport StatisticNav from './statistic-nav';\nimport StatisticCommonTool from './statistic-common-tool';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport StatisticChart from './statistic-chart';\nimport Loading from '../../../components/loading';\nimport { gettext } from '../../../utils/constants';\nimport { Utils } from '../../../utils/utils';\nimport toaster from '../../../components/toast';\n\nclass StatisticStorage extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      filesData: [],\n      labels: [],\n      isLoading: true\n    };\n  }\n\n  getActiviesFiles = (startTime, endTime, groupBy) => {\n    let { filesData } = this.state;\n    seafileAPI.sysAdminStatisticStorages(startTime, endTime, groupBy).then((res) => {\n      let labels = [],\n        totalStorage = [];\n      let data = res.data;\n      if (Array.isArray(data)) {\n        data.forEach(item => {\n          labels.push(moment(item.datetime).format('YYYY-MM-DD'));\n          totalStorage.push(item.total_storage);\n        });\n        let total_storage = {\n          label: gettext('Total Storage'),\n          data: totalStorage,\n          borderColor: '#fd913a',\n          backgroundColor: '#fd913a'};\n        filesData = [total_storage];\n      }\n      this.setState({\n        filesData: filesData,\n        labels: labels,\n        isLoading: false\n      });\n    }).catch(err => {\n      let errMessage = Utils.getErrorMsg(err);\n      toaster.danger(errMessage);\n    });\n  }\n\n  render() {\n    let { labels, filesData, isLoading } = this.state;\n    return(\n      <Fragment>\n        <MainPanelTopbar />\n        <div className=\"cur-view-container\">\n          <StatisticNav currentItem=\"storageStatistic\" />\n          <div className=\"cur-view-content\">\n            <StatisticCommonTool getActiviesFiles={this.getActiviesFiles} />\n            {isLoading && <Loading />}\n            {!isLoading && labels.length > 0 &&\n              <StatisticChart\n                labels={labels}\n                filesData={filesData}\n                suggestedMaxNumbers={10*1000*1000}\n                isTitleCallback={true}\n                isTicksCallback={true}\n                isLegendStatus={false}\n                chartTitle={gettext('Total Storage')}\n              />\n            }\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nexport default StatisticStorage;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../../../utils/constants';\n\nconst propTypes = {\n  type: PropTypes.string.isRequired,\n  sortBy: PropTypes.string.isRequired,\n  sortOrder: PropTypes.string.isRequired,\n  sortItems: PropTypes.func.isRequired,\n  children: PropTypes.oneOfType([PropTypes.bool, PropTypes.array]),\n};\n\nclass TrafficTable extends React.Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    const { type, sortBy, sortOrder } = this.props;\n    const sortIcon = sortOrder == 'asc' ? <span className=\"fas fa-caret-up\"></span> : <span className=\"fas fa-caret-down\"></span>;\n\n    return (\n      <table className=\"table-hover\">\n        <thead>\n          <tr>\n            <th width=\"16%\">{type == 'user' ? gettext('User') : gettext('Organization')}</th>\n            <th width=\"11%\"><div className=\"d-block table-sort-op cursor-pointer\" onClick={this.props.sortItems.bind(this, 'sync_file_upload')}>{gettext('Sync Upload')} {sortBy === 'sync_file_upload' && sortIcon}</div></th>\n            <th width=\"14%\"><div className=\"d-block table-sort-op cursor-pointer\" onClick={this.props.sortItems.bind(this, 'sync_file_download')}>{gettext('Sync Download')} {sortBy === 'sync_file_download' && sortIcon}</div></th>\n            <th width=\"11%\"><div className=\"d-block table-sort-op cursor-pointer\" onClick={this.props.sortItems.bind(this, 'web_file_upload')}>{gettext('Web Upload')} {sortBy === 'web_file_upload' && sortIcon}</div></th>\n            <th width=\"14%\"><div className=\"d-block table-sort-op cursor-pointer\" onClick={this.props.sortItems.bind(this, 'web_file_download')}>{gettext('Web Download')} {sortBy === 'web_file_download' && sortIcon}</div></th>\n            <th width=\"17%\"><div className=\"d-block table-sort-op cursor-pointer\" onClick={this.props.sortItems.bind(this, 'link_file_upload')}>{gettext('Share link upload')} {sortBy === 'link_file_upload' && sortIcon}</div></th>\n            <th width=\"17%\"><div className=\"d-block table-sort-op cursor-pointer\" onClick={this.props.sortItems.bind(this, 'link_file_download')}>{gettext('Share link download')} {sortBy === 'link_file_download' && sortIcon}</div></th>\n          </tr>\n        </thead>\n        <tbody>\n          {this.props.children}\n        </tbody>\n      </table>\n    );\n  }\n}\n\nTrafficTable.propTypes = propTypes;\n\nexport default TrafficTable;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Utils } from '../../../utils/utils';\nimport { siteRoot } from '../../../utils/constants';\n\nconst propTypes = {\n  type: PropTypes.string.isRequired,\n  userTrafficItem: PropTypes.object.isRequired,\n};\n\nclass TrafficTableBody extends React.Component {\n\n  trafficName = () => {\n    let { userTrafficItem, type } = this.props;\n    switch(type) {\n      case 'user':\n        if (userTrafficItem.name) {\n          return (\n            <a href={siteRoot + 'useradmin/info/' + userTrafficItem.email + '/'}>{userTrafficItem.name}</a>\n          );\n        }\n        return(<span>{'--'}</span>);\n      case 'org':\n        return(<span>{userTrafficItem.org_name}</span>);\n    }\n  }\n\n  render() {\n    let { userTrafficItem } = this.props;\n\n    let syncUploadSize = Utils.bytesToSize(userTrafficItem.sync_file_upload);\n    let syncDownloadSize = Utils.bytesToSize(userTrafficItem.sync_file_download);\n    let webUploadSize = Utils.bytesToSize(userTrafficItem.web_file_upload);\n    let webDownloadSize = Utils.bytesToSize(userTrafficItem.web_file_download);\n    let linkUploadSize = Utils.bytesToSize(userTrafficItem.link_file_upload);\n    let linkDownloadSize = Utils.bytesToSize(userTrafficItem.link_file_download);\n\n    return(\n      <tr>\n        <td>{this.trafficName()}</td>\n        <td>{syncUploadSize}</td>\n        <td>{syncDownloadSize}</td>\n        <td>{webUploadSize}</td>\n        <td>{webDownloadSize}</td>\n        <td>{linkUploadSize}</td>\n        <td>{linkDownloadSize}</td>\n      </tr>\n    );\n  }\n}\n\nTrafficTableBody.propTypes = propTypes;\n\nexport default TrafficTableBody;\n","import React, { Fragment } from 'react';\nimport { Input } from 'reactstrap';\nimport moment from 'moment';\nimport { gettext } from '../../../utils/constants';\nimport TrafficTable from './traffic-table';\nimport TrafficTableBody from './traffic-table-body';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport Paginator from '../../../components/paginator';\nimport Loading from '../../../components/loading';\nimport { Utils } from '../../../utils/utils';\nimport toaster from '../../../components/toast';\n\nclass OrgsTraffic extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      orgTrafficList: [],\n      perPage: 25,\n      currentPage: 1,\n      hasNextPage: false,\n      month: moment().format('YYYYMM'),\n      isLoading: false,\n      errorMessage: '',\n      sortBy: 'link_file_download',\n      sortOrder: 'desc'\n    };\n    this.initPage = 1;\n    this.initMonth = moment().format('YYYYMM');\n  }\n\n  componentDidMount() {\n    let urlParams = (new URL(window.location)).searchParams;\n    const { currentPage, perPage } = this.state;\n    this.setState({\n      perPage: parseInt(urlParams.get('per_page') || perPage),\n      currentPage: parseInt(urlParams.get('page') || currentPage)\n    }, () => {\n      this.getTrafficList(this.initMonth, this.state.currentPage);\n    });\n  }\n\n  getPreviousPage = () => {\n    this.getTrafficList(this.state.month, this.state.currentPage - 1);\n  }\n\n  getNextPage = () => {\n    this.getTrafficList(this.state.month, this.state.currentPage + 1);\n  }\n\n  handleChange = (e) => {\n    let month = e.target.value;\n    this.setState({\n      month: month\n    });\n  }\n\n  handleKeyPress = (e) => {\n    let { month } = this.state;\n    if (e.key === 'Enter') {\n      let pattern = /^([012]\\d{3})(0[1-9]|1[012])$/;\n      if (!pattern.test(month)) {\n        let errorMessage = gettext('Invalid month, should be yyyymm.');\n        this.setState({\n          errorMessage: errorMessage\n        });\n        return;\n      }\n      this.getTrafficList(month, this.initPage);\n      e.target.blur();\n      e.preventDefault();\n    }\n  }\n\n  getTrafficList = (month, page) => {\n    const { perPage, sortBy, sortOrder } = this.state;\n    const orderBy = sortOrder == 'asc' ? sortBy : `${sortBy}_${sortOrder}`;\n    this.setState({isLoading: true, errorMessage: ''});\n    seafileAPI.sysAdminListOrgTraffic(month, page, perPage, orderBy).then(res => {\n      let orgTrafficList = res.data.org_monthly_traffic_list.slice(0);\n      this.setState({\n        month: month,\n        currentPage: page,\n        orgTrafficList: orgTrafficList,\n        hasNextPage: res.data.has_next_page,\n        isLoading: false\n      });\n    }).catch(err => {\n      let errMessage = Utils.getErrorMsg(err);\n      toaster.danger(errMessage);\n    });\n  }\n\n  sortItems = (sortBy) => {\n    this.setState({\n      sortBy: sortBy,\n      sortOrder: this.state.sortOrder == 'asc' ? 'desc' : 'asc'\n    }, () => {\n      const { month, currentPage } = this.state;\n      this.getTrafficList(month, currentPage);\n    });\n  }\n\n  resetPerPage = (newPerPage) => {\n    this.setState({\n      perPage: newPerPage,\n    }, () => this.getTrafficList(this.initPage, this.initMonth));\n  }\n\n  render() {\n    const {\n      isLoading, errorMessage, orgTrafficList,\n      currentPage, hasNextPage, perPage,\n      sortBy, sortOrder\n    } = this.state;\n    return (\n      <Fragment>\n        <div className=\"d-flex align-items-center mt-4\">\n          <span className=\"statistic-reports-tip\">{gettext('Month:')}</span>\n          <Input\n            className=\"statistic-reports-input\"\n            defaultValue={moment().format('YYYYMM')}\n            onChange={this.handleChange}\n            onKeyPress={this.handleKeyPress}\n          />\n          {errorMessage && <div className=\"error\">{errorMessage}</div>}\n        </div>\n        {isLoading && <Loading />}\n        {!isLoading &&\n          <TrafficTable type={'org'} sortItems={this.sortItems} sortBy={sortBy} sortOrder={sortOrder}>\n            {orgTrafficList.length > 0 && orgTrafficList.map((item, index) => {\n              return(\n                <TrafficTableBody\n                  key={index}\n                  userTrafficItem={item}\n                  type={'org'}\n                />\n              );\n            })}\n          </TrafficTable>\n        }\n        <Paginator\n          gotoPreviousPage={this.getPreviousPage}\n          gotoNextPage={this.getNextPage}\n          currentPage={currentPage}\n          hasNextPage={hasNextPage}\n          curPerPage={perPage}\n          resetPerPage={this.resetPerPage}\n        />\n      </Fragment>\n    );\n  }\n}\n\nexport default OrgsTraffic;\n","import React, { Fragment } from 'react';\nimport { Input } from 'reactstrap';\nimport TrafficTable from './traffic-table';\nimport TrafficTableBody from './traffic-table-body';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport Paginator from '../../../components/paginator';\nimport moment from 'moment';\nimport Loading from '../../../components/loading';\nimport { gettext } from '../../../utils/constants';\nimport { Utils } from '../../../utils/utils';\nimport toaster from '../../../components/toast';\n\nclass UsersTraffic extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      userTrafficList: [],\n      hasNextPage: false,\n      perPage: 25,\n      currentPage: 1,\n      month: moment().format('YYYYMM'),\n      isLoading: false,\n      errorMessage: '',\n      sortBy: 'link_file_download',\n      sortOrder: 'desc'\n    };\n    this.initPage = 1;\n    this.initMonth = moment().format('YYYYMM');\n  }\n\n  componentDidMount() {\n    let urlParams = (new URL(window.location)).searchParams;\n    const { currentPage, perPage } = this.state;\n    this.setState({\n      perPage: parseInt(urlParams.get('per_page') || perPage),\n      currentPage: parseInt(urlParams.get('page') || currentPage)\n    }, () => {\n      this.getTrafficList(this.initMonth, this.state.currentPage);\n    });\n  }\n\n  getPreviousPage = () => {\n    this.getTrafficList(this.state.month, this.state.currentPage - 1);\n  }\n\n  getNextPage = () => {\n    this.getTrafficList(this.state.month, this.state.currentPage + 1);\n  }\n\n  handleChange = (e) => {\n    let month = e.target.value;\n    this.setState({\n      month: month\n    });\n  }\n\n  handleKeyPress = (e) => {\n    let { month } = this.state;\n    if (e.key === 'Enter') {\n      let pattern = /^([012]\\d{3})(0[1-9]|1[012])$/;\n      if (!pattern.test(month)) {\n        let errorMessage = gettext('Invalid month, should be yyyymm.');\n        this.setState({\n          errorMessage: errorMessage\n        });\n        return;\n      }\n      this.getTrafficList(month, this.initPage);\n      e.target.blur();\n      e.preventDefault();\n    }\n  }\n\n  getTrafficList = (month, page) => {\n    const { perPage, sortBy, sortOrder } = this.state;\n    const orderBy = sortOrder == 'asc' ? sortBy : `${sortBy}_${sortOrder}`;\n    this.setState({\n      isLoading: true,\n      errorMessage: ''\n    });\n    seafileAPI.sysAdminListUserTraffic(month, page, perPage, orderBy).then(res => {\n      let userTrafficList = res.data.user_monthly_traffic_list.slice(0);\n      this.setState({\n        month: month,\n        currentPage: page,\n        userTrafficList: userTrafficList,\n        hasNextPage: res.data.has_next_page,\n        isLoading: false\n      });\n    }).catch(err => {\n      let errMessage = Utils.getErrorMsg(err);\n      toaster.danger(errMessage);\n    });\n  }\n\n  sortItems = (sortBy) => {\n    this.setState({\n      sortBy: sortBy,\n      sortOrder: this.state.sortOrder == 'asc' ? 'desc' : 'asc'\n    }, () => {\n      const { month, currentPage } = this.state;\n      this.getTrafficList(month, currentPage);\n    });\n  }\n\n  resetPerPage = (newPerPage) => {\n    this.setState({\n      perPage: newPerPage,\n    }, () => this.getTrafficList(this.initMonth, this.initPage));\n  }\n\n  render() {\n    const {\n      isLoading, errorMessage, userTrafficList,\n      currentPage, hasNextPage, perPage,\n      sortBy, sortOrder\n    } = this.state;\n    return (\n      <Fragment>\n        <div className=\"d-flex align-items-center mt-4\">\n          <span className=\"statistic-reports-tip\">{gettext('Month:')}</span>\n          <Input\n            className=\"statistic-reports-input\"\n            defaultValue={moment().format('YYYYMM')}\n            onChange={this.handleChange}\n            onKeyPress={this.handleKeyPress}\n          />\n          {errorMessage && <div className=\"error\">{errorMessage}</div>}\n        </div>\n        {isLoading && <Loading />}\n        {!isLoading &&\n          <TrafficTable type={'user'} sortItems={this.sortItems} sortBy={sortBy} sortOrder={sortOrder}>\n            {userTrafficList.length > 0 && userTrafficList.map((item, index) => {\n              return(\n                <TrafficTableBody\n                  key={index}\n                  userTrafficItem={item}\n                  type={'user'}\n                />\n              );\n            })}\n          </TrafficTable>\n        }\n        <Paginator\n          gotoPreviousPage={this.getPreviousPage}\n          gotoNextPage={this.getNextPage}\n          currentPage={currentPage}\n          hasNextPage={hasNextPage}\n          curPerPage={perPage}\n          resetPerPage={this.resetPerPage}\n        />\n      </Fragment>\n    );\n  }\n}\n\nexport default UsersTraffic;\n","import React, { Fragment } from 'react';\nimport moment from 'moment';\nimport { gettext } from '../../../utils/constants';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport MainPanelTopbar from '../main-panel-topbar';\nimport StatisticNav from './statistic-nav';\nimport StatisticCommonTool from './statistic-common-tool';\nimport Loading from '../../../components/loading';\nimport OrgsTraffic from './statistic-traffic-orgs';\nimport UsersTraffic from './statistic-traffic-users';\nimport StatisticChart from './statistic-chart';\nimport { Utils } from '../../../utils/utils';\nimport toaster from '../../../components/toast';\n\nclass StatisticTraffic extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      filesData: [],\n      linkData: [],\n      syncData: [],\n      webData: [],\n      labels: [],\n      isLoading: true,\n      tabActive: 'system'\n    };\n  }\n\n  changeTabActive = activeName => {\n    this.setState({tabActive: activeName});\n  }\n\n  getActiviesFiles = (startTime, endTime, groupBy) => {\n    seafileAPI.sysAdminStatisticTraffic(startTime, endTime, groupBy).then((res) => {\n      let labels = [];\n      let total_upload = [],\n        total_download = [],\n        link_upload = [],\n        link_download = [],\n        sync_upload = [],\n        sync_download = [],\n        web_upload = [],\n        web_download = [];\n      let data = res.data;\n      if (Array.isArray(data)) {\n        data.forEach(item => {\n          labels.push(moment(item.datetime).format('YYYY-MM-DD'));\n          link_upload.push(item['link-file-upload']);\n          link_download.push(item['link-file-download']);\n          sync_upload.push(item['sync-file-upload']);\n          sync_download.push(item['sync-file-download']);\n          web_upload.push(item['web-file-upload']);\n          web_download.push(item['web-file-download']);\n          total_upload.push(item['link-file-upload'] + item['sync-file-upload'] + item['web-file-upload']);\n          total_download.push(item['link-file-download'] + item['sync-file-download'] + item['web-file-download']);\n        });\n        let linkUpload = {\n          label: gettext('Upload'),\n          data: link_upload,\n          borderColor: '#fd913a',\n          backgroundColor: '#fd913a'};\n        let linkDownload = {\n          label: gettext('Download'),\n          data: link_download,\n          borderColor: '#57cd6b',\n          backgroundColor: '#57cd6b'};\n        let syncUpload = {\n          label: gettext('Upload'),\n          data: sync_upload,\n          borderColor: '#fd913a',\n          backgroundColor: '#fd913a'};\n        let syncDownload = {\n          label: gettext('Download'),\n          data: sync_download,\n          borderColor: '#57cd6b',\n          backgroundColor: '#57cd6b'};\n        let webUpload = {\n          label: gettext('Upload'),\n          data: web_upload,\n          borderColor: '#fd913a',\n          backgroundColor: '#fd913a'};\n        let webDownload = {\n          label: gettext('Download'),\n          data: web_download,\n          borderColor: '#57cd6b',\n          backgroundColor: '#57cd6b'};\n        let totalUpload = {\n          label: gettext('Upload'),\n          data: total_upload,\n          borderColor: '#fd913a',\n          backgroundColor: '#fd913a'};\n        let totalDownload = {\n          label: gettext('Download'),\n          data: total_download,\n          borderColor: '#57cd6b',\n          backgroundColor: '#57cd6b'};\n        let linkData = [linkUpload, linkDownload];\n        let syncData = [syncUpload, syncDownload];\n        let webData = [webUpload, webDownload];\n        let filesData = [totalUpload, totalDownload];\n        this.setState({\n          linkData: linkData,\n          syncData: syncData,\n          webData: webData,\n          filesData: filesData,\n          labels: labels,\n          isLoading: false\n        });\n      }\n    }).catch(err => {\n      let errMessage = Utils.getErrorMsg(err);\n      toaster.danger(errMessage);\n    });\n  }\n\n  renderCommonTool = () => {\n    let { tabActive } = this.state;\n    if (tabActive === 'system') {\n      return (\n        <StatisticCommonTool getActiviesFiles={this.getActiviesFiles}>\n          <div className=\"statistic-traffic-tab\">\n            <div className={`statistic-traffic-tab-item ${tabActive === 'system' ? 'active' : ''}`} onClick={this.changeTabActive.bind(this, 'system')}>{gettext('System')}</div>\n            <div className={`statistic-traffic-tab-item ${tabActive === 'user' ? 'active' : ''}`} onClick={this.changeTabActive.bind(this, 'user')}>{gettext('Users')}</div>\n            <div className={`statistic-traffic-tab-item ${tabActive === 'organizations' ? 'active' : ''}`} onClick={this.changeTabActive.bind(this, 'organizations')}>{gettext('Organizations')}</div>\n          </div>\n        </StatisticCommonTool>\n      );\n    }\n    return (\n      <div className=\"statistic-traffic-tab\">\n        <div className={`statistic-traffic-tab-item ${tabActive === 'system' ? 'active' : ''}`} onClick={this.changeTabActive.bind(this, 'system')}>{gettext('System')}</div>\n        <div className={`statistic-traffic-tab-item ${tabActive === 'user' ? 'active' : ''}`} onClick={this.changeTabActive.bind(this, 'user')}>{gettext('Users')}</div>\n        <div className={`statistic-traffic-tab-item ${tabActive === 'organizations' ? 'active' : ''}`} onClick={this.changeTabActive.bind(this, 'organizations')}>{gettext('Organizations')}</div>\n      </div>\n    );\n  }\n\n  render() {\n    let { labels, filesData, linkData, syncData, webData, isLoading, tabActive } = this.state;\n\n    return (\n      <Fragment>\n        <MainPanelTopbar />\n        <div className=\"cur-view-container\">\n          <StatisticNav currentItem=\"trafficStatistic\" />\n          <div className=\"cur-view-content\">\n            {this.renderCommonTool()}\n            {isLoading && <Loading />}\n            {!isLoading && tabActive === 'system' &&\n              <div className=\"statistic-traffic-chart-container\">\n                <div className=\"mb-4\">\n                  {labels.length > 0 &&\n                    <StatisticChart\n                      labels={labels}\n                      filesData={filesData}\n                      chartTitle={gettext('Total Traffic')}\n                      suggestedMaxNumbers={10*1000*1000}\n                      isTitleCallback={true}\n                      isTicksCallback={true}\n                      isLegendStatus={true}\n                    />\n                  }\n                </div>\n                <div className=\"mb-4\">\n                  {labels.length > 0 &&\n                    <StatisticChart\n                      labels={labels}\n                      filesData={webData}\n                      chartTitle={gettext('Web Traffic')}\n                      suggestedMaxNumbers={10*1000*1000}\n                      isTitleCallback={true}\n                      isTicksCallback={true}\n                      isLegendStatus={true}\n                    />\n                  }\n                </div>\n                <div className=\"mb-4\">\n                  {labels.length > 0 &&\n                    <StatisticChart\n                      labels={labels}\n                      filesData={linkData}\n                      chartTitle={gettext('Share Link Traffic')}\n                      suggestedMaxNumbers={10*1000*1000}\n                      isTitleCallback={true}\n                      isTicksCallback={true}\n                      isLegendStatus={true}\n                    />\n                  }\n                </div>\n                <div className=\"mb-4\">\n                  {labels.length > 0 &&\n                    <StatisticChart\n                      labels={labels}\n                      filesData={syncData}\n                      chartTitle={gettext('Sync Traffic')}\n                      suggestedMaxNumbers={10*1000*1000}\n                      isTitleCallback={true}\n                      isTicksCallback={true}\n                      isLegendStatus={true}\n                    />\n                  }\n                </div>\n              </div>\n            }\n            {!isLoading && tabActive === 'user' &&\n              <UsersTraffic />\n            }\n            {!isLoading && tabActive === 'organizations' &&\n              <OrgsTraffic />\n            }\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nexport default StatisticTraffic;\n","import React, { Fragment } from 'react';\nimport moment from 'moment';\nimport { gettext } from '../../../utils/constants';\nimport MainPanelTopbar from '../main-panel-topbar';\nimport StatisticNav from './statistic-nav';\nimport StatisticCommonTool from './statistic-common-tool';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport StatisticChart from './statistic-chart';\nimport Loading from '../../../components/loading';\nimport { Utils } from '../../../utils/utils';\nimport toaster from '../../../components/toast';\n\nclass StatisticUsers extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      filesData: [],\n      labels: [],\n      isLoading: true,\n    };\n  }\n\n  getActiviesFiles = (startTime, endTime, groupBy) => {\n    let { filesData } = this.state;\n    seafileAPI.sysAdminStatisticActiveUsers(startTime, endTime, groupBy).then((res) => {\n      let labels = [],\n        count = [];\n      let data = res.data;\n      if (Array.isArray(data)) {\n        data.forEach(item => {\n          labels.push(moment(item.datetime).format('YYYY-MM-DD'));\n          count.push(item.count);\n        });\n        let userCount = {\n          label: gettext('Active Users'),\n          data: count,\n          borderColor: '#fd913a',\n          backgroundColor: '#fd913a'};\n        filesData = [userCount];\n      }\n      this.setState({\n        filesData: filesData,\n        labels: labels,\n        isLoading: false\n      });\n    }).catch(err => {\n      let errMessage = Utils.getErrorMsg(err);\n      toaster.danger(errMessage);\n    });\n  }\n\n  render() {\n    let { labels, filesData, isLoading } = this.state;\n    return (\n      <Fragment>\n        <MainPanelTopbar />\n        <div className=\"cur-view-container\">\n          <StatisticNav currentItem=\"usersStatistic\" />\n          <div className=\"cur-view-content\">\n            <StatisticCommonTool getActiviesFiles={this.getActiviesFiles} />\n            {isLoading && <Loading />}\n            {!isLoading && labels.length > 0 &&\n              <StatisticChart\n                labels={labels}\n                filesData={filesData}\n                suggestedMaxNumbers={10}\n                isLegendStatus={false}\n                chartTitle={gettext('Active Users')}\n              />\n            }\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nexport default StatisticUsers;\n","import React, { Fragment } from 'react';\nimport MainPanelTopbar from '../main-panel-topbar';\nimport moment from 'moment';\nimport StatisticNav from './statistic-nav';\nimport { Button, Input } from 'reactstrap';\nimport { siteRoot, gettext } from '../../../utils/constants';\n\nclass StatisticReports extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      month: moment().format('YYYYMM'),\n      errorMessage: ''\n    };\n  }\n\n  handleChange = (e) => {\n    let month = e.target.value;\n    this.setState({\n      month: month\n    });\n  }\n\n  onGenerateReports = (type) => {\n    let url = siteRoot + 'api/v2.1/admin/statistics/';\n    let { month } = this.state;\n    if (!month) {\n      let errorMessage = gettext('It is required.');\n      this.setState({\n        errorMessage: errorMessage\n      });\n      return;\n    }\n    if (type === 'month') {\n      let pattern = /^([012]\\d{3})(0[1-9]|1[012])$/;\n      if (!pattern.test(month)) {\n        let errorMessage = gettext('Invalid month, should be yyyymm.');\n        this.setState({\n          errorMessage: errorMessage\n        });\n        return;\n      }\n    }\n    switch(type) {\n      case 'month':\n        url += 'system-user-traffic/excel/?month=' + month;\n        break;\n      case 'storage':\n        url += 'system-user-storage/excel/?';\n        break;\n    }\n    this.setState({\n      errorMessage: ''\n    });\n    window.location.href = url;\n  }\n\n  render() {\n\n    let { errorMessage } = this.state;\n    return(\n      <Fragment>\n        <MainPanelTopbar />\n        <div className=\"cur-view-container\">\n          <StatisticNav currentItem=\"reportsStatistic\" />\n          <div className=\"cur-view-content\">\n            <div className=\"statistic-reports\">\n              <div className=\"statistic-reports-title\">{gettext('Monthly User Traffic')}</div>\n              <div className=\"d-flex align-items-center mt-4\">\n                <span className=\"statistic-reports-tip\">{gettext('Month:')}</span>\n                <Input className=\"statistic-reports-input\" defaultValue={moment().format('YYYYMM')} onChange={this.handleChange} />\n                <Button className=\"statistic-reports-submit operation-item\" onClick={this.onGenerateReports.bind(this, 'month')}>{gettext('Create Report')}</Button>\n              </div>\n              {errorMessage && <div className=\"error\">{errorMessage}</div>}\n            </div>\n            <div className=\"statistic-reports\">\n              <div className=\"statistic-reports-title\">{gettext('User Storage')}</div>\n              <Button className=\"mt-4 operation-item\" onClick={this.onGenerateReports.bind(this, 'storage')}>{gettext('Create Report')}</Button>\n            </div>\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nexport default StatisticReports;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Link } from '@reach/router';\nimport { siteRoot, gettext, isPro } from '../../../utils/constants';\n\nconst propTypes = {\n  currentItem: PropTypes.string.isRequired\n};\n\nclass Nav extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.navItems = [\n      {name: 'desktop', urlPart:'desktop-devices', text: gettext('Desktop')},\n      {name: 'mobile', urlPart:'mobile-devices', text: gettext('Mobile')}\n    ];\n    if (isPro) {\n      this.navItems.push({name: 'errors', urlPart:'device-errors', text: gettext('Errors')});\n    }\n  }\n\n  render() {\n    const { currentItem } = this.props;\n    return (\n      <div className=\"cur-view-path tab-nav-container\">\n        <ul className=\"nav\">\n          {this.navItems.map((item, index) => {\n            return (\n              <li className=\"nav-item\" key={index}>\n                <Link to={`${siteRoot}sys/${item.urlPart}/`} className={`nav-link${currentItem == item.name ? ' active' : ''}`}>{item.text}</Link>\n              </li>\n            );\n          })}\n        </ul>\n      </div>\n    );\n  }\n}\n\nNav.propTypes = propTypes;\n\nexport default Nav;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../../../utils/constants';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter } from 'reactstrap';\n\nconst propTypes = {\n  unlinkDevice: PropTypes.func.isRequired,\n  toggleDialog: PropTypes.func.isRequired\n};\n\nclass SysAdminUnlinkDevice extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      inputChecked: false\n    };\n  }\n\n  handleInputChange = (e) => {\n    this.setState({\n      inputChecked: e.target.checked\n    });\n  }\n\n  unlinkDevice = () => {\n    this.props.toggleDialog();\n    this.props.unlinkDevice(this.state.inputChecked);\n  }\n\n  render() {\n    const { inputChecked } = this.state;\n    const toggle = this.props.toggleDialog;\n    return (\n      <Modal isOpen={true} toggle={toggle}>\n        <ModalHeader toggle={toggle}>{gettext('Unlink device')}</ModalHeader>\n        <ModalBody>\n          <p>{gettext('Are you sure you want to unlink this device?')}</p>\n          <div className=\"d-flex align-items-center\">\n            <input id=\"delete-files\" className=\"mr-1\" type=\"checkbox\" checked={inputChecked} onChange={this.handleInputChange} />\n            <label htmlFor=\"delete-files\" className=\"m-0\">{gettext('Delete files from this device the next time it comes online.')}</label>\n          </div>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={toggle}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.unlinkDevice}>{gettext('Unlink')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nSysAdminUnlinkDevice.propTypes = propTypes;\n\nexport default SysAdminUnlinkDevice;\n","import React, { Component, Fragment } from 'react';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { gettext, isPro } from '../../../utils/constants';\nimport toaster from '../../../components/toast';\nimport { Utils } from '../../../utils/utils';\nimport EmptyTip from '../../../components/empty-tip';\nimport moment from 'moment';\nimport Loading from '../../../components/loading';\nimport Paginator from '../../../components/paginator';\nimport SysAdminUnlinkDevice from '../../../components/dialog/sysadmin-dialog/sysadmin-unlink-device-dialog';\n\nclass Content extends Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  getPreviousPageDevicesList = () => {\n    this.props.getDevicesListByPage(this.props.pageInfo.current_page - 1);\n  }\n\n  getNextPageDevicesList = () => {\n    this.props.getDevicesListByPage(this.props.pageInfo.current_page + 1);\n  }\n\n  render() {\n    const { loading, errorMsg, items, pageInfo, curPerPage } = this.props;\n    if (loading) {\n      return <Loading />;\n    } else if (errorMsg) {\n      return <p className=\"error text-center\">{errorMsg}</p>;\n    } else {\n      const emptyTip = (\n        <EmptyTip>\n          <h2>{gettext('No connected devices')}</h2>\n        </EmptyTip>\n      );\n      const table = (\n        <Fragment>\n          <table className=\"table-hover\">\n            <thead>\n              <tr>\n                <th width=\"19%\">{gettext('User')}</th>\n                <th width=\"19%\">{gettext('Platform')}{' / '}{gettext('Version')}</th>\n                <th width=\"19%\">{gettext('Device Name')}</th>\n                <th width=\"19%\">{gettext('IP')}</th>\n                <th width=\"19%\">{gettext('Last Access')}</th>\n                <th width=\"5%\">{/*Operations*/}</th>\n              </tr>\n            </thead>\n            <tbody>\n              {items.map((item, index) => {\n                return (<Item key={index} item={item} />);\n              })}\n            </tbody>\n          </table>\n          <Paginator\n            gotoPreviousPage={this.getPreviousPageDevicesList}\n            gotoNextPage={this.getNextPageDevicesList}\n            currentPage={pageInfo.current_page}\n            hasNextPage={pageInfo.has_next_page}\n            curPerPage={curPerPage}\n            resetPerPage={this.props.resetPerPage}\n          />\n        </Fragment>\n      );\n\n      return items.length ? table : emptyTip;\n    }\n  }\n}\n\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      unlinked: false,\n      isOpIconShown: false,\n      isUnlinkDeviceDialogOpen: false\n    };\n  }\n\n  handleMouseOver = () => {\n    this.setState({isOpIconShown: true});\n  }\n\n  handleMouseOut = () => {\n    this.setState({isOpIconShown: false});\n  }\n\n  handleUnlink = (e) => {\n    e.preventDefault();\n    if (this.props.item.is_desktop_client) {\n      this.toggleUnlinkDeviceDialog();\n    } else {\n      this.unlinkDevice(true);\n    }\n  }\n\n  toggleUnlinkDeviceDialog = () => {\n    this.setState({isUnlinkDeviceDialogOpen: !this.state.isUnlinkDeviceDialogOpen});\n  }\n\n  unlinkDevice = (deleteFiles) => {\n    const { platform, device_id, user } = this.props.item;\n    seafileAPI.sysAdminUnlinkDevice(platform, device_id, user, deleteFiles).then((res) => {\n      this.setState({unlinked: true});\n      let message = gettext('Successfully unlinked the device.');\n      toaster.success(message);\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  render() {\n    const item = this.props.item;\n    const { unlinked, isUnlinkDeviceDialogOpen, isOpIconShown } = this.state;\n\n    if (unlinked) {\n      return null;\n    }\n\n    return (\n      <Fragment>\n        <tr onMouseEnter={this.handleMouseOver} onMouseLeave={this.handleMouseOut}>\n          <td>{item.user_name}</td>\n          <td>{item.platform}{' / '}{item.client_version}</td>\n          <td>{item.device_name}</td>\n          <td>{item.last_login_ip}</td>\n          <td>\n            <span title={moment(item.last_accessed).format('llll')}>{moment(item.last_accessed).fromNow()}</span>\n          </td>\n          <td>\n            {isPro &&\n            <a href=\"#\" className={`sf2-icon-delete action-icon ${isOpIconShown ? '' : 'invisible'}`} title={gettext('Unlink')} onClick={this.handleUnlink}></a>\n            }\n          </td>\n        </tr>\n        {isUnlinkDeviceDialogOpen &&\n          <SysAdminUnlinkDevice\n            unlinkDevice={this.unlinkDevice}\n            toggleDialog={this.toggleUnlinkDeviceDialog}\n          />\n        }\n      </Fragment>\n    );\n  }\n}\n\nclass DevicesByPlatform extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      devicesData: {},\n      pageInfo: {},\n      perPage: 25\n    };\n  }\n\n  componentDidMount () {\n    let urlParams = (new URL(window.location)).searchParams;\n    const { currentPage = 1, perPage } = this.state;\n    this.setState({\n      perPage: parseInt(urlParams.get('per_page') || perPage),\n      currentPage: parseInt(urlParams.get('page') || currentPage)\n    }, () => {\n      this.getDevicesListByPage(this.state.currentPage);\n    });\n  }\n\n  getDevicesListByPage = (page) => {\n    let platform = this.props.devicesPlatform;\n    let per_page = this.state.perPage;\n    seafileAPI.sysAdminListDevices(platform, page, per_page).then((res) => {\n      this.setState({\n        devicesData: res.data.devices,\n        pageInfo: res.data.page_info,\n        loading: false\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  resetPerPage = (perPage) => {\n    this.setState({\n      perPage: perPage\n    }, () => {\n      this.getDevicesListByPage(1);\n    });\n  }\n\n  render() {\n    return (\n      <div className=\"cur-view-content\">\n        <Content\n          loading={this.state.loading}\n          errorMsg={this.state.errorMsg}\n          items={this.state.devicesData}\n          getDevicesListByPage={this.getDevicesListByPage}\n          curPerPage={this.state.perPage}\n          resetPerPage={this.resetPerPage}\n          pageInfo={this.state.pageInfo}\n        />\n      </div>\n    );\n  }\n}\n\nexport default DevicesByPlatform;\n","import React, { Component, Fragment } from 'react';\nimport DevicesNav from './devices-nav';\nimport DevicesByPlatform from './devices-by-platform';\nimport MainPanelTopbar from '../main-panel-topbar';\n\nclass DesktopDevices extends Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    return (\n      <Fragment>\n        <MainPanelTopbar />\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <DevicesNav currentItem=\"desktop\" />\n            <DevicesByPlatform\n              devicesPlatform={'desktop'}\n            />\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nexport default DesktopDevices;\n","import React, { Component, Fragment } from 'react';\nimport DevicesNav from './devices-nav';\nimport DevicesByPlatform from './devices-by-platform';\nimport MainPanelTopbar from '../main-panel-topbar';\n\nclass MobileDevices extends Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    return (\n      <Fragment>\n        <MainPanelTopbar />\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <DevicesNav currentItem=\"mobile\" />\n            <DevicesByPlatform\n              devicesPlatform={'mobile'}\n            />\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nexport default MobileDevices;\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { Link } from '@reach/router';\nimport { siteRoot } from '../../utils/constants';\n\nconst propTypes = {\n  email: PropTypes.string.isRequired,\n  name: PropTypes.string.isRequired\n};\n\nclass UserLink extends Component {\n\n  render() {\n    return <Link to={`${siteRoot}sys/users/${encodeURIComponent(this.props.email)}/`}>{this.props.name}</Link>;\n  }\n}\n\nUserLink.propTypes = propTypes;\n\nexport default UserLink;\n","import React, { Component, Fragment } from 'react';\nimport { Button } from 'reactstrap';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { siteRoot, gettext } from '../../../utils/constants';\nimport toaster from '../../../components/toast';\nimport { Utils } from '../../../utils/utils';\nimport EmptyTip from '../../../components/empty-tip';\nimport moment from 'moment';\nimport Loading from '../../../components/loading';\nimport { Link } from '@reach/router';\nimport DevicesNav from './devices-nav';\nimport MainPanelTopbar from '../main-panel-topbar';\nimport UserLink from '../user-link';\n\nclass Content extends Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    const { loading, errorMsg, items } = this.props;\n    if (loading) {\n      return <Loading />;\n    } else if (errorMsg) {\n      return <p className=\"error text-center\">{errorMsg}</p>;\n    } else {\n      const emptyTip = (\n        <EmptyTip>\n          <h2>{gettext('No sync errors')}</h2>\n        </EmptyTip>\n      );\n      const table = (\n        <Fragment>\n          <table className=\"table-hover\">\n            <thead>\n              <tr>\n                <th width=\"16%\">{gettext('User')}</th>\n                <th width=\"20%\">{gettext('Device')}{' / '}{gettext('Version')}</th>\n                <th width=\"16%\">{gettext('IP')}</th>\n                <th width=\"16%\">{gettext('Library')}</th>\n                <th width=\"16%\">{gettext('Error')}</th>\n                <th width=\"16%\">{gettext('Time')}</th>\n              </tr>\n            </thead>\n            <tbody>\n              {items.map((item, index) => {\n                return (<Item key={index} item={item} />);\n              })}\n            </tbody>\n          </table>\n        </Fragment>\n      );\n      return items.length ? table : emptyTip;\n    }\n  }\n}\n\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOpIconShown: false,\n    };\n  }\n\n  handleMouseOver = () => {\n    this.setState({isOpIconShown: true});\n  }\n\n  handleMouseOut = () => {\n    this.setState({isOpIconShown: false});\n  }\n\n  render() {\n    let item = this.props.item;\n    return (\n      <tr onMouseEnter={this.handleMouseOver} onMouseLeave={this.handleMouseOut}>\n        <td><UserLink email={item.email} name={item.name} /></td>\n        <td>{item.device_name}{' / '}{item.client_version}</td>\n        <td>{item.device_ip}</td>\n        <td><Link to={`${siteRoot}sysadmin/#libs/${item.repo_id}`}>{item.repo_name}</Link></td>\n        <td>{item.error_msg}</td>\n        <td>\n          <span className=\"item-meta-info\" title={moment(item.last_accessed).format('llll')}>{moment(item.error_time).fromNow()}</span>\n        </td>\n      </tr>\n    );\n  }\n}\n\nclass DeviceErrors extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      devicesErrors: [],\n      isCleanBtnShown: false\n    };\n  }\n\n  componentDidMount () {\n    seafileAPI.sysAdminListDeviceErrors().then((res) => {\n      this.setState({\n        loading: false,\n        devicesErrors: res.data,\n        isCleanBtnShown: res.data.length > 0\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  clean = () => {\n    seafileAPI.sysAdminClearDeviceErrors().then((res) => {\n      this.setState({\n        devicesErrors: [],\n        isCleanBtnShown: false\n      });\n      let message = gettext('Successfully cleaned all errors.');\n      toaster.success(message);\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  render() {\n    return (\n      <Fragment>\n        {this.state.isCleanBtnShown ? (\n          <MainPanelTopbar>\n            <Button className=\"operation-item\" onClick={this.clean}>{gettext('Clean')}</Button>\n          </MainPanelTopbar>\n        ) : (\n          <MainPanelTopbar />\n        )}\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <DevicesNav currentItem=\"errors\" />\n            <div className=\"cur-view-content\">\n              <Content\n                loading={this.state.loading}\n                errorMsg={this.state.errorMsg}\n                items={this.state.devicesErrors}\n              />\n            </div>\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nexport default DeviceErrors;\n","import React, { Component, Fragment } from 'react';\nimport Account from '../../components/common/account';\nimport { gettext, siteRoot, mediaUrl } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport toaster from '../../components/toast';\nimport moment from 'moment';\n\nclass AbuseReports extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      abuseReportList: [],\n    };\n  }\n\n  listAbuseReports = () => {\n    seafileAPI.sysAdminListAbuseReports().then((res) => {\n      this.setState({\n        abuseReportList: res.data.abuse_report_list,\n      });\n    }).catch((error) => {\n      this.handleError(error);\n    });\n  };\n\n  updateAbuseReport = (handled, abuseReportId) => {\n    seafileAPI.sysAdminUpdateAbuseReport(handled, abuseReportId).then((res) => {\n      const abuseReportList = this.state.abuseReportList.map((item, index) => {\n        if (item.id === abuseReportId) {\n          item.handled = res.data.handled;\n        }\n        return item;\n      });\n      this.setState({\n        abuseReportList: abuseReportList,\n      });\n    }).catch((error) => {\n      this.handleError(error);\n    });\n  };\n\n  handleError = (e) => {\n    if (e.response) {\n      toaster.danger(e.response.data.error_msg || e.response.data.detail || gettext('Error'), {duration: 3});\n    } else {\n      toaster.danger(gettext('Please check the network.'), {duration: 3});\n    }\n  };\n\n  componentDidMount() {\n    this.listAbuseReports();\n  }\n\n  render() {\n    const isDesktop = Utils.isDesktop();\n    const AbuseReportList = this.state.abuseReportList.map((item, index) => {\n      const handled = (!item.handled).toString();\n      const abuseReportId = item.id;\n      const fileUrl = siteRoot + 'lib/' + item.repo_id + '/file' + item.file_path;\n      return (\n        <tr key={index}>\n          <td>{item.repo_name}</td>\n          <td><a href={fileUrl} target=\"_blank\">{item.file_path}</a></td>\n          <td>{item.reporter}</td>\n          <td>{item.abuse_type}</td>\n          <td>{item.description}</td>\n          <td>{moment(item.time).format('YYYY-MM-DD')}</td>\n          <td><p onClick={this.updateAbuseReport.bind(this, handled, abuseReportId)}\n            className=\"op-target ellipsis ellipsis-op-target cursor-pointer\"\n          >{gettext(item.handled.toString())}</p></td>\n        </tr>\n      );\n    });\n\n    return (\n      <Fragment>\n        <div className=\"main-panel-north\">\n          <div className=\"cur-view-toolbar\">\n            <span className=\"sf2-icon-menu side-nav-toggle hidden-md-up d-md-none\" title=\"Side Nav Menu\"></span>\n          </div>\n          <div className=\"common-toolbar\">\n            <Account isAdminPanel={true}/>\n          </div>\n        </div>\n        <div className=\"main-panel-center\">\n          <div className=\"cur-view-container\">\n            <div className=\"cur-view-path\">\n              <h3 className=\"sf-heading\">{gettext('Abuse Reports')}</h3>\n            </div>\n            <div className=\"cur-view-content\">\n              <table className={`table-hover${isDesktop ? '' : ' table-thead-hidden'}`}>\n                <thead>\n                  {isDesktop ?\n                    <tr>\n                      <th width=\"20%\">{gettext('Library')}</th>\n                      <th width=\"20%\">{gettext('File')}</th>\n                      <th width=\"10%\">{gettext('Reporter')}</th>\n                      <th width=\"15%\">{gettext('Abuse Type')}</th>\n                      <th width=\"20%\">{gettext('Description')}</th>\n                      <th width=\"10%\">{gettext('Time')}</th>\n                      <th width=\"5%\">{gettext('Handled')}</th>\n                    </tr>\n                    :\n                    <tr>\n                      <th width=\"92%\"></th>\n                      <th width=\"8%\"></th>\n                    </tr>\n                  }\n                </thead>\n                <tbody>\n                  {AbuseReportList}\n                </tbody>\n              </table>\n            </div>\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nexport default AbuseReports;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Alert, Modal, ModalHeader, ModalBody, ModalFooter, Button, Form, FormGroup, Input, InputGroup, InputGroupAddon, InputGroupText } from 'reactstrap';\nimport { gettext } from '../../../utils/constants';\nimport { Utils } from '../../../utils/utils';\n\nconst propTypes = {\n  toggle: PropTypes.func.isRequired,\n  updateQuota: PropTypes.func.isRequired\n};\n\nclass SetQuotaDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      quota: '',\n      isSubmitBtnActive: false\n    };\n  }\n\n  toggle = () => {\n    this.props.toggle();\n  }\n\n  handleQuotaChange = (e) => {\n    const value = e.target.value;\n    this.setState({\n      quota: value,\n      isSubmitBtnActive: value.trim() != ''\n    });\n  }\n\n  handleKeyPress = (e) => {\n    if (e.key == 'Enter') {\n      this.handleSubmit();\n      e.preventDefault();\n    }\n  }\n\n  handleSubmit = () => {\n    this.props.updateQuota(this.state.quota.trim());\n    this.toggle();\n  }\n\n  render() {\n    const { quota, isSubmitBtnActive } = this.state;\n    return (\n      <Modal isOpen={true} toggle={this.toggle}>\n        <ModalHeader toggle={this.toggle}>{gettext('Set Quota')}</ModalHeader>\n        <ModalBody>\n          <Form>\n            <FormGroup>\n              <InputGroup>\n                <Input\n                  type=\"text\"\n                  className=\"form-control\"\n                  value={quota}\n                  onKeyPress={this.handleKeyPress}\n                  onChange={this.handleQuotaChange}\n                />\n                <InputGroupAddon addonType=\"append\">\n                  <InputGroupText>MB</InputGroupText>\n                </InputGroupAddon>\n              </InputGroup>\n              <p className=\"small text-secondary mt-2 mb-2\">\n                {gettext('An integer that is greater than or equal to 0.')}\n                <br />\n                {gettext('Tip: 0 means default limit')}\n              </p>\n            </FormGroup>\n          </Form>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.toggle}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.handleSubmit} disabled={!isSubmitBtnActive}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nSetQuotaDialog.propTypes = propTypes;\n\nexport default SetQuotaDialog;\n","\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { Alert, Modal, ModalHeader, ModalBody, ModalFooter, Button } from 'reactstrap';\nimport { gettext, siteRoot } from '../../../utils/constants';\n\nconst propTypes = {\n  toggle: PropTypes.func.isRequired,\n  importUserInBatch: PropTypes.func.isRequired,\n};\n\nclass SysAdminImportUserDialog extends React.Component {\n  constructor(props) {\n    super(props);\n    this.fileInputRef = React.createRef();\n    this.state = {\n      errorMsg: ''\n    };\n  }\n\n  toggle = () => {\n    this.props.toggle();\n  }\n\n  openFileInput = () => {\n    this.fileInputRef.current.click();\n  }\n\n  uploadFile = (e) => {\n    // no file selected\n    if (!this.fileInputRef.current.files.length) {\n      return;\n    }\n    // check file extension\n    let fileName = this.fileInputRef.current.files[0].name;\n    if(fileName.substr(fileName.lastIndexOf('.') + 1) != 'xlsx') {\n      this.setState({\n        errorMsg: gettext('Please choose a .xlsx file.')\n      });\n      return;\n    }\n    const file = this.fileInputRef.current.files[0];\n    this.props.importUserInBatch(file);\n    this.toggle();\n  }\n\n  render() {\n    let { errorMsg } = this.state;\n    return (\n      <Modal isOpen={true} toggle={this.toggle}>\n        <ModalHeader toggle={this.toggle}>{gettext('Import users from a .xlsx file')}</ModalHeader>\n        <ModalBody>\n          <p><a className=\"text-secondary small\" href={`${siteRoot}useradmin/batchadduser/example/`}>{gettext('Download an example file')}</a></p>\n          <button className=\"btn btn-outline-primary\" onClick={this.openFileInput}>{gettext('Upload file')}</button>\n          <input className=\"d-none\" type=\"file\" onChange={this.uploadFile} ref={this.fileInputRef} />\n          {errorMsg && <Alert color=\"danger\">{errorMsg}</Alert>}\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.toggle}>{gettext('Cancel')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nSysAdminImportUserDialog.propTypes = propTypes;\n\nexport default SysAdminImportUserDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../../utils/constants';\nimport SelectEditor from './select-editor';\n\nconst propTypes = {\n  isTextMode: PropTypes.bool.isRequired,\n  isEditIconShow: PropTypes.bool.isRequired,\n  roleOptions: PropTypes.array.isRequired,\n  currentRole: PropTypes.string.isRequired,\n  onRoleChanged: PropTypes.func.isRequired\n};\n\nclass SysAdminUserRoleEditor extends React.Component {\n\n  translateRoles = (role) => {\n    switch (role) {\n      case 'default':\n        return gettext('Default');\n      case 'guest':\n        return gettext('Guest');\n      default:\n        return role;\n    }\n  }\n\n  render() {\n    return (\n      <SelectEditor\n        isTextMode={this.props.isTextMode}\n        isEditIconShow={this.props.isEditIconShow}\n        options={this.props.roleOptions}\n        currentOption={this.props.currentRole}\n        onOptionChanged={this.props.onRoleChanged}\n        translateOption={this.translateRoles}\n      />\n    );\n  }\n}\n\nSysAdminUserRoleEditor.propTypes = propTypes;\n\nexport default SysAdminUserRoleEditor;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Alert, Modal, ModalHeader, ModalBody, ModalFooter, Button, Form, FormGroup, Label, Input, InputGroup, InputGroupAddon } from 'reactstrap';\nimport { gettext } from '../../../utils/constants';\nimport { Utils } from '../../../utils/utils';\nimport SysAdminUserRoleEditor from '../../../components/select-editor/sysadmin-user-role-editor';\n\nconst propTypes = {\n  toggleDialog: PropTypes.func.isRequired,\n  addUser: PropTypes.func.isRequired\n};\n\nclass SysAdminAddUserDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      errorMsg: '',\n      isPasswordVisible: false,\n      password: '',\n      passwordAgain: '',\n      email: '',\n      name: '',\n      role: 'default',\n      isSubmitBtnActive: false\n    };\n  }\n\n  checkSubmitBtnActive = () => {\n    const { email, password, passwordAgain } = this.state;\n    let btnActive = true;\n    if (email.trim() &&\n      password.trim() &&\n      passwordAgain.trim()) {\n      btnActive = true;\n    } else {\n      btnActive = false;\n    }\n    this.setState({\n      isSubmitBtnActive: btnActive\n    });\n  }\n\n  toggle = () => {\n    this.props.toggleDialog();\n  }\n\n  togglePasswordVisible = () => {\n    this.setState({isPasswordVisible: !this.state.isPasswordVisible});\n  }\n\n  inputPassword = (e) => {\n    let passwd = e.target.value;\n    this.setState({\n      password: passwd,\n      errorMsg: ''\n    }, this.checkSubmitBtnActive);\n  }\n\n  inputPasswordAgain = (e) => {\n    let passwd = e.target.value;\n    this.setState({\n      passwordAgain: passwd,\n      errorMsg: ''\n    }, this.checkSubmitBtnActive);\n  }\n\n  generatePassword = () => {\n    let val = Utils.generatePassword(8);\n    this.setState({\n      password: val,\n      passwordAgain: val\n    }, this.checkSubmitBtnActive);\n  }\n\n  inputEmail = (e) => {\n    let email = e.target.value;\n    this.setState({\n      email: email\n    }, this.checkSubmitBtnActive);\n  }\n\n  inputName = (e) => {\n    let name = e.target.value;\n    this.setState({\n      name: name\n    });\n  }\n\n  updateRole = (role) => {\n    this.setState({\n      role: role\n    });\n  }\n\n  handleSubmit = () => {\n    const { email, password, passwordAgain, name, role } = this.state;\n    if (password != passwordAgain) {\n      this.setState({errorMsg: gettext('Passwords do not match.')});\n      return;\n    }\n    let data = {\n      email: email.trim(),\n      name: name.trim(),\n      password: password.trim()\n    };\n    if (this.props.showRole) {\n      data.role = role;\n    }\n    this.props.addUser(data);\n    this.toggle();\n  }\n\n  render() {\n    const { dialogTitle, showRole } = this.props;\n    const {\n      errorMsg, isPasswordVisible,\n      email, name, role, password, passwordAgain,\n      isSubmitBtnActive\n    } = this.state;\n    return (\n      <Modal isOpen={true} toggle={this.toggle}>\n        <ModalHeader toggle={this.toggle}>{dialogTitle || gettext('Add Member')}</ModalHeader>\n        <ModalBody>\n          <Form autoComplete=\"off\">\n            <FormGroup>\n              <Label>{gettext('Email')}</Label>\n              <Input value={email} onChange={this.inputEmail} />\n            </FormGroup>\n            <FormGroup>\n              <Label>{gettext('Name(optional)')}</Label>\n              <Input type=\"text\" value={name} onChange={this.inputName} />\n            </FormGroup>\n            {showRole &&\n            <FormGroup>\n              <Label>\n                {gettext('Role')}\n                <span className=\"small text-secondary ml-1 fas fa-question-circle\" title={gettext('You can also add a user as a guest, who will not be allowed to create libraries and groups.')}></span>\n              </Label>\n              <SysAdminUserRoleEditor\n                isTextMode={false}\n                isEditIconShow={false}\n                currentRole={role}\n                roleOptions={this.props.availableRoles}\n                onRoleChanged={this.updateRole}\n              />\n            </FormGroup>\n            }\n            <FormGroup>\n              <Label>{gettext('Password')}</Label>\n              <InputGroup>\n                <Input autoComplete=\"new-password\" type={isPasswordVisible ? 'text' : 'password'} value={password || ''} onChange={this.inputPassword} />\n                <InputGroupAddon addonType=\"append\">\n                  <Button className=\"mt-0\" onClick={this.togglePasswordVisible}><i className={`link-operation-icon fas ${this.state.isPasswordVisible ? 'fa-eye': 'fa-eye-slash'}`}></i></Button>\n                  <Button className=\"mt-0\" onClick={this.generatePassword}><i className=\"link-operation-icon fas fa-magic\"></i></Button>\n                </InputGroupAddon>\n              </InputGroup>\n            </FormGroup>\n            <FormGroup>\n              <Label>{gettext('Password again')}</Label>\n              <Input type={isPasswordVisible ? 'text' : 'password'} value={passwordAgain || ''} onChange={this.inputPasswordAgain} />\n            </FormGroup>\n          </Form>\n          {errorMsg && <Alert color=\"danger\">{errorMsg}</Alert>}\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.toggle}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.handleSubmit} disabled={!isSubmitBtnActive}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nSysAdminAddUserDialog.propTypes = propTypes;\n\nexport default SysAdminAddUserDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Modal, ModalHeader, ModalBody, ModalFooter, Button } from 'reactstrap';\nimport UserSelect from '../../user-select';\nimport { gettext } from '../../../utils/constants';\n\nconst propTypes = {\n  toggle: PropTypes.func.isRequired,\n  addAdminInBatch: PropTypes.func.isRequired,\n};\n\nclass SysAdminBatchAddAdminDialog extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      options: null,\n      isSubmitBtnActive: false\n    };\n  }\n\n  toggle = () => {\n    this.props.toggle();\n  }\n\n handleSelectChange = (options) => {\n   this.setState({\n     options: options,\n     isSubmitBtnActive: options.length > 0\n   });\n }\n\n handleSubmit = () => {\n   this.props.addAdminInBatch(this.state.options.map(item => item.email));\n   this.toggle();\n }\n\n  handleKeyPress = (e) => {\n    if (e.key === 'Enter') {\n      this.handleSubmit();\n      e.preventDefault();\n    }\n  }\n\n  render() {\n    return (\n      <Modal isOpen={true} toggle={this.toggle}>\n        <ModalHeader toggle={this.toggle}>{gettext('Add Admin')}</ModalHeader>\n        <ModalBody>\n          <UserSelect\n            isMulti={true}\n            className=\"reviewer-select\"\n            placeholder={gettext('Search users...')}\n            onSelectChange={this.handleSelectChange}\n          />\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.toggle}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.handleSubmit} disabled={!this.state.isSubmitBtnActive}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nSysAdminBatchAddAdminDialog.propTypes = propTypes;\n\nexport default SysAdminBatchAddAdminDialog;\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { Modal, ModalHeader, ModalBody, ModalFooter, Button } from 'reactstrap';\nimport { gettext } from '../../utils/constants';\n\nconst propTypes = {\n  title: PropTypes.string.isRequired,\n  message: PropTypes.string.isRequired,\n  confirmBtnText: PropTypes.string,\n  executeOperation: PropTypes.func.isRequired,\n  toggleDialog: PropTypes.func.isRequired\n};\n\nclass CommonOperationConfirmationDialog extends Component {\n\n  toggle = () => {\n    this.props.toggleDialog();\n  }\n\n  executeOperation = () => {\n    this.toggle();\n    this.props.executeOperation();\n  }\n\n  render() {\n    let { title, message, confirmBtnText } = this.props;\n    return (\n      <Modal isOpen={true} toggle={this.toggle}>\n        <ModalHeader toggle={this.toggle}>{title}</ModalHeader>\n        <ModalBody>\n          <p dangerouslySetInnerHTML={{__html: message}}></p>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.toggle}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.executeOperation}>{confirmBtnText || gettext('Confirm')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nCommonOperationConfirmationDialog.propTypes = propTypes;\n\nexport default CommonOperationConfirmationDialog;\n","class SysAdminUser {\n  constructor(object) {\n    this.email = object.email;\n    this.name = object.name;\n    this.contact_email = object.contact_email;\n    this.login_id = object.login_id;\n    this.last_login = object.last_login;\n    this.last_access_time = object.last_access_time;\n    this.create_time = object.create_time;\n    this.is_active = object.is_active;\n    this.is_staff = object.is_staff;\n    this.reference_id = object.reference_id;\n    this.department = object.department;\n    this.quota_total = object.quota_total;\n    this.quota_usage = object.quota_usage;\n    this.role = object.role;\n    this.institution = object.institution;\n    if (object.org_id) {\n      this.org_id = object.org_id;\n    }\n    if (object.org_name) {\n      this.org_name = object.org_name;\n    }\n    this.isSelected = false;\n  }\n}\n\nexport default SysAdminUser;\n","\nclass SysAdminAdminUser {\n  constructor(object) {\n    this.email = object.email;\n    this.name = object.name;\n    this.contact_email = object.contact_email;\n    this.login_id = object.login_id;\n    this.last_login = object.last_login;\n    this.last_access_time = object.last_access_time;\n    this.create_time = object.create_time;\n    this.is_active = object.is_active;\n    this.is_staff = object.is_staff;\n    this.quota_total = object.quota_total;\n    this.quota_usage = object.quota_usage;\n    this.admin_role = object.admin_role;\n    this.isSelected = false;\n  }\n}\n\nexport default SysAdminAdminUser;\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nconst propTypes = {\n  placeholder: PropTypes.string.isRequired,\n  submit: PropTypes.func.isRequired\n};\n\nclass Search extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      value: ''\n    };\n  }\n\n  handleInputChange = (e) => {\n    this.setState({\n      value: e.target.value\n    });\n  }\n\n  handleKeyPress = (e) => {\n    if (e.key == 'Enter') {\n      e.preventDefault();\n      this.handleSubmit();\n    }\n  }\n\n  handleSubmit = () => {\n    const value = this.state.value.trim();\n    if (!value) {\n      return false;\n    }\n    this.props.submit(value);\n  }\n\n  render() {\n    return (\n      <div className=\"input-icon\">\n        <i className=\"d-flex input-icon-addon fas fa-search\"></i>\n        <input\n          type=\"text\"\n          className=\"form-control search-input h-6 mr-1\"\n          style={{width: '15rem'}}\n          placeholder={this.props.placeholder}\n          value={this.state.value}\n          onChange={this.handleInputChange}\n          onKeyPress={this.handleKeyPress}\n          autoComplete=\"off\"\n        />\n      </div>\n    );\n  }\n}\n\nSearch.propTypes = propTypes;\n\nexport default Search;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Link } from '@reach/router';\nimport { siteRoot, gettext, haveLDAP, isDefaultAdmin } from '../../../utils/constants';\n\nconst propTypes = {\n  currentItem: PropTypes.string.isRequired\n};\n\nclass Nav extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.navItems = [\n      {name: 'database', urlPart: 'users', text: gettext('Database')}\n    ];\n    if (haveLDAP) {\n      this.navItems.push(\n        {name: 'ldap', urlPart: 'users/ldap', text: gettext('LDAP')},\n        {name: 'ldap-imported', urlPart: 'users/ldap-imported', text: gettext('LDAP(imported)')}\n      );\n    }\n    if (isDefaultAdmin) {\n      this.navItems.push(\n        {name: 'admin', urlPart: 'users/admins', text: gettext('Admin')}\n      );\n    }\n  }\n\n  render() {\n    const { currentItem } = this.props;\n    return (\n      <div className=\"cur-view-path tab-nav-container\">\n        <ul className=\"nav\">\n          {this.navItems.map((item, index) => {\n            return (\n              <li className=\"nav-item\" key={index}>\n                <Link to={`${siteRoot}sys/${item.urlPart}/`} className={`nav-link${currentItem == item.name ? ' active' : ''}`}>{item.text}</Link>\n              </li>\n            );\n          })}\n        </ul>\n      </div>\n    );\n  }\n}\n\nNav.propTypes = propTypes;\n\nexport default Nav;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../../utils/constants';\nimport SelectEditor from './select-editor';\n\nconst propTypes = {\n  isTextMode: PropTypes.bool.isRequired,\n  isEditIconShow: PropTypes.bool.isRequired,\n  statusOptions: PropTypes.array.isRequired,\n  currentStatus: PropTypes.string.isRequired,\n  onStatusChanged: PropTypes.func.isRequired\n};\n\nclass SysAdminUserStatusEditor extends React.Component {\n\n  translateStatus = (status) => {\n    switch (status) {\n      case 'active':\n        return gettext('Active');\n      case 'inactive':\n        return gettext('Inactive');\n    }\n  }\n\n  render() {\n    return (\n      <SelectEditor\n        isTextMode={this.props.isTextMode}\n        isEditIconShow={this.props.isEditIconShow}\n        options={this.props.statusOptions}\n        currentOption={this.props.currentStatus}\n        onOptionChanged={this.props.onStatusChanged}\n        translateOption={this.translateStatus}\n      />\n    );\n  }\n}\n\nSysAdminUserStatusEditor.propTypes = propTypes;\n\nexport default SysAdminUserStatusEditor;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Dropdown, DropdownMenu, DropdownToggle, DropdownItem } from 'reactstrap';\nimport { gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\n\nconst propTypes = {\n  onFreezedItem: PropTypes.func.isRequired,\n  onUnfreezedItem: PropTypes.func.isRequired,\n  onMenuItemClick: PropTypes.func.isRequired,\n  operations: PropTypes.array.isRequired,\n  translateOperations: PropTypes.func.isRequired\n};\n\nclass OpMenu extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isItemMenuShow: false\n    };\n  }\n\n  onMenuItemClick = (e) => {\n    let operation = Utils.getEventData(e, 'op');\n    this.props.onMenuItemClick(operation);\n  }\n\n  onDropdownToggleClick = (e) => {\n    this.toggleOperationMenu(e);\n  }\n\n  toggleOperationMenu = (e) => {\n    this.setState(\n      {isItemMenuShow: !this.state.isItemMenuShow},\n      () => {\n        if (this.state.isItemMenuShow) {\n          this.props.onFreezedItem();\n        } else {\n          this.props.onUnfreezedItem();\n        }\n      }\n    );\n  }\n\n  render() {\n    const { operations, translateOperations } = this.props;\n    return (\n      <Dropdown isOpen={this.state.isItemMenuShow} toggle={this.toggleOperationMenu}>\n        <DropdownToggle\n          tag=\"i\"\n          className=\"d-flex w-5 h-5 align-items-center justify-content-center sf-dropdown-toggle fa fa-ellipsis-v\"\n          title={gettext('More Operations')}\n          data-toggle=\"dropdown\"\n          aria-expanded={this.state.isItemMenuShow}\n        />\n        <DropdownMenu className=\"my-1 mr-2\">\n          {operations.map((item, index )=> {\n            return (<DropdownItem key={index} data-op={item} onClick={this.onMenuItemClick}>{translateOperations(item)}</DropdownItem>);\n          })}\n        </DropdownMenu>\n      </Dropdown>\n    );\n  }\n}\n\nOpMenu.propTypes = propTypes;\n\nexport default OpMenu;\n","import React, { Component, Fragment } from 'react';\nimport moment from 'moment';\nimport { Link } from '@reach/router';\nimport { Utils } from '../../../utils/utils';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { isPro, username, gettext, multiInstitution, siteRoot } from '../../../utils/constants';\nimport toaster from '../../../components/toast';\nimport EmptyTip from '../../../components/empty-tip';\nimport Loading from '../../../components/loading';\nimport Paginator from '../../../components/paginator';\nimport SysAdminUserStatusEditor from '../../../components/select-editor/sysadmin-user-status-editor';\nimport SysAdminUserRoleEditor from '../../../components/select-editor/sysadmin-user-role-editor';\nimport SelectEditor from '../../../components/select-editor/select-editor';\nimport OpMenu from '../../../components/dialog/op-menu';\nimport SysAdminUserSetQuotaDialog from '../../../components/dialog/sysadmin-dialog/set-quota';\nimport CommonOperationConfirmationDialog from '../../../components/dialog/common-operation-confirmation-dialog';\nimport UserLink from '../user-link';\n\nconst { availableRoles, availableAdminRoles, institutions } = window.sysadmin.pageOptions;\n\nclass Content extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isItemFreezed: false\n    };\n  }\n\n  onFreezedItem = () => {\n    this.setState({isItemFreezed: true});\n  }\n\n  onUnfreezedItem = () => {\n    this.setState({isItemFreezed: false});\n  }\n\n  getPreviousPage = () => {\n    this.props.getListByPage(this.props.currentPage - 1);\n  }\n\n  getNextPage = () => {\n    this.props.getListByPage(this.props.currentPage + 1);\n  }\n\n  sortByQuotaUsage = (e) => {\n    e.preventDefault();\n    this.props.sortByQuotaUsage();\n  }\n\n  render() {\n    const {\n      isAdmin, loading, errorMsg, items, isAllUsersSelected,\n      curPerPage, hasNextPage, currentPage,\n      sortBy, sortOrder\n    } = this.props;\n    if (loading) {\n      return <Loading />;\n    } else if (errorMsg) {\n      return <p className=\"error text-center mt-4\">{errorMsg}</p>;\n    } else {\n      const emptyTip = (\n        <EmptyTip>\n          <h2>{gettext('No users')}</h2>\n        </EmptyTip>\n      );\n\n\n      let columns = [];\n\n      let sortIcon;\n      if (sortBy == '') {\n        // initial sort icon\n        sortIcon = <span className=\"fas fa-sort\"></span>;\n      } else {\n        sortIcon = <span className={`fas ${sortOrder == 'asc' ? 'fa-caret-up' : 'fa-caret-down'}`}></span>;\n      }\n      const spaceText = gettext('Space Used');\n      const spaceEl =\n        sortBy != undefined ? // only offer 'sort' for 'DB' & 'LDAPImported' users\n        <a className=\"d-inline-block table-sort-op\" href=\"#\" onClick={this.sortByQuotaUsage}>{spaceText} {sortIcon}</a> :\n          spaceText;\n      const colSpaceText = <Fragment>{spaceEl}{` / ${gettext('Quota')}`}</Fragment>;\n\n      const colNameText = `${gettext('Name')} / ${gettext('Contact Email')}`;\n      const colCreatedText = `${gettext('Created At')} / ${gettext('Last Login')} / ${gettext('Last Access')}`;\n      if (isPro) {\n        columns.push(\n          {width: '20%', text: colNameText},\n          {width: '15%', text: gettext('Status')},\n          {width: '15%', text: gettext('Role')}\n        );\n      } else {\n        columns.push(\n          {width: '30%', text: colNameText},\n          {width: '20%', text: gettext('Status')}\n        );\n      }\n      if (multiInstitution && !isAdmin) {\n        columns.push(\n          {width: '14%', text: colSpaceText},\n          {width: '14%', text: gettext('Institution')},\n          {width: '14%', text: colCreatedText},\n          {width: '5%', text: ''}\n        );\n      } else {\n        columns.push(\n          {width: '20%', text: colSpaceText},\n          {width: '22%', text: colCreatedText},\n          {width: '5%', text: ''}\n        );\n      }\n\n      const table = (\n        <Fragment>\n          <table>\n            <thead>\n              <tr>\n                <th width=\"3%\" className=\"pl-2\">\n                  <input type=\"checkbox\" className=\"vam\" onChange={this.props.toggleSelectAllUsers} checked={isAllUsersSelected} />\n                </th>\n                {columns.map((item, index) => {\n                  return <th width={item.width} key={index}>{item.text}</th>;\n                })}\n              </tr>\n            </thead>\n            <tbody>\n              {items.map((item, index) => {\n                return (<Item\n                  key={index}\n                  item={item}\n                  isItemFreezed={this.state.isItemFreezed}\n                  onFreezedItem={this.onFreezedItem}\n                  onUnfreezedItem={this.onUnfreezedItem}\n                  updateUser={this.props.updateUser}\n                  deleteUser={this.props.deleteUser}\n                  updateAdminRole={this.props.updateAdminRole}\n                  revokeAdmin={this.props.revokeAdmin}\n                  onUserSelected={this.props.onUserSelected}\n                  isAdmin={this.props.isAdmin}\n                  isLDAPImported={this.props.isLDAPImported}\n                />);\n              })}\n            </tbody>\n          </table>\n          {(!this.props.isAdmin && !this.props.isSearchResult) &&\n          <Paginator\n            gotoPreviousPage={this.getPreviousPage}\n            gotoNextPage={this.getNextPage}\n            currentPage={currentPage}\n            hasNextPage={hasNextPage}\n            curPerPage={curPerPage}\n            resetPerPage={this.props.resetPerPage}\n          />\n          }\n        </Fragment>\n      );\n\n      return items.length ? table : emptyTip;\n    }\n  }\n}\n\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOpIconShown: false,\n      highlight: false,\n      isSetQuotaDialogOpen: false,\n      isDeleteUserDialogOpen: false,\n      isResetUserPasswordDialogOpen: false,\n      isRevokeAdminDialogOpen: false\n    };\n  }\n\n  handleMouseEnter = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        isOpIconShown: true,\n        highlight: true\n      });\n    }\n  }\n\n  handleMouseLeave = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        isOpIconShown: false,\n        highlight: false\n      });\n    }\n  }\n\n  onUnfreezedItem = () => {\n    this.setState({\n      highlight: false,\n      isOpIconShow: false\n    });\n    this.props.onUnfreezedItem();\n  }\n\n  toggleSetQuotaDialog = () => {\n    this.setState({isSetQuotaDialogOpen: !this.state.isSetQuotaDialogOpen});\n  }\n\n  toggleDeleteUserDialog = () => {\n    this.setState({isDeleteUserDialogOpen: !this.state.isDeleteUserDialogOpen});\n  }\n\n  toggleResetUserPasswordDialog = () => {\n    this.setState({isResetUserPasswordDialogOpen: !this.state.isResetUserPasswordDialogOpen});\n  }\n\n  toggleRevokeAdminDialog = () => {\n    this.setState({isRevokeAdminDialogOpen: !this.state.isRevokeAdminDialogOpen});\n  }\n\n  onUserSelected = () => {\n    this.props.onUserSelected(this.props.item);\n  }\n\n  updateStatus= (value) => {\n    const isActive = value == 'active';\n    if (isActive) {\n      toaster.notify(gettext('It may take some time, please wait.'));\n    }\n    this.props.updateUser(this.props.item.email, 'is_active', isActive);\n  }\n\n  updateRole = (value) => {\n    this.props.updateUser(this.props.item.email, 'role', value);\n  }\n\n  updateAdminRole = (value) => {\n    this.props.updateAdminRole(this.props.item.email, value);\n  }\n\n  translateAdminRole = (role) => {\n    switch (role) {\n      case 'default_admin':\n        return gettext('Default Admin');\n      case 'system_admin':\n        return gettext('System Admin');\n      case 'daily_admin':\n        return gettext('Daily Admin');\n      case 'audit_admin':\n        return gettext('Audit Admin');\n      default:\n        return role;\n    }\n  }\n\n  updateInstitution = (value) => {\n    this.props.updateUser(this.props.item.email, 'institution', value);\n  }\n\n  translateInstitution = (inst) => {\n    return inst;\n  }\n\n  updateQuota = (value) => {\n    this.props.updateUser(this.props.item.email, 'quota_total', value);\n  }\n\n  deleteUser = () => {\n    toaster.notify(gettext('It may take some time, please wait.'));\n    this.props.deleteUser(this.props.item.email);\n  }\n\n  resetPassword = () => {\n    toaster.notify(gettext('It may take some time, please wait.'));\n    seafileAPI.sysAdminResetUserPassword(this.props.item.email).then(res => {\n      toaster.success(res.data.reset_tip);\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  revokeAdmin = () => {\n    const { item } = this.props;\n    this.props.revokeAdmin(item.email, item.name);\n  }\n\n  getMenuOperations = () => {\n    const {\n      isAdmin, isLDAPImported,\n      isSearchResult, item\n    } = this.props;\n    let list = ['Delete'];\n    if (!isLDAPImported ||\n      (isSearchResult && item.source == 'db')) {\n      list.push('Reset Password');\n    }\n    if (isAdmin) {\n      list = ['Revoke Admin'];\n    }\n    return list;\n  }\n\n  translateOperations = (item) => {\n    let translateResult = '';\n    switch (item) {\n      case 'Delete':\n        translateResult = gettext('Delete');\n        break;\n      case 'Reset Password':\n        translateResult = gettext('Reset Password');\n        break;\n      case 'Revoke Admin':\n        translateResult = gettext('Revoke Admin');\n        break;\n    }\n\n    return translateResult;\n  }\n\n  onMenuItemClick = (operation) => {\n    switch(operation) {\n      case 'Delete':\n        this.toggleDeleteUserDialog();\n        break;\n      case 'Reset Password':\n        this.toggleResetUserPasswordDialog();\n        break;\n      case 'Revoke Admin':\n        this.toggleRevokeAdminDialog();\n        break;\n      default:\n        break;\n    }\n  }\n\n  render() {\n    const { item, isAdmin } = this.props;\n    const {\n      isOpIconShown,\n      isSetQuotaDialogOpen,\n      isDeleteUserDialogOpen,\n      isResetUserPasswordDialogOpen,\n      isRevokeAdminDialogOpen\n    } = this.state;\n\n    const itemName = '<span class=\"op-target\">' + Utils.HTMLescape(item.name) + '</span>';\n    const deleteDialogMsg = gettext('Are you sure you want to delete {placeholder} ?').replace('{placeholder}', itemName);\n    const resetPasswordDialogMsg = gettext('Are you sure you want to reset the password of {placeholder} ?').replace('{placeholder}', itemName);\n    const revokeAdminDialogMsg = gettext('Are you sure you want to revoke the admin permission of {placeholder} ?').replace('{placeholder}', itemName);\n\n    return (\n      <Fragment>\n        <tr className={this.state.highlight ? 'tr-highlight' : ''} onMouseEnter={this.handleMouseEnter} onMouseLeave={this.handleMouseLeave}>\n          <td className=\"pl-2\">\n            <input type=\"checkbox\" className=\"vam\" onChange={this.onUserSelected} checked={item.isSelected} />\n          </td>\n          <td>\n            <UserLink email={item.email} name={item.name} />\n            {item.contact_email &&\n              <Fragment>\n                <br />\n                {item.contact_email}\n              </Fragment>}\n            {item.org_id &&\n              <Fragment>\n                <br />\n                <Link to={`${siteRoot}sys/organizations/${item.org_id}/info/`}>({item.org_name})</Link>\n              </Fragment>\n            }\n          </td>\n          <td>\n            <SysAdminUserStatusEditor\n              isTextMode={true}\n              isEditIconShow={isOpIconShown}\n              currentStatus={item.is_active ? 'active' : 'inactive'}\n              statusOptions={['active', 'inactive']}\n              onStatusChanged={this.updateStatus}\n            />\n          </td>\n          {isPro &&\n          <td>\n            {isAdmin ?\n              <SelectEditor\n                isTextMode={true}\n                isEditIconShow={isOpIconShown}\n                options={availableAdminRoles}\n                currentOption={item.admin_role}\n                onOptionChanged={this.updateAdminRole}\n                translateOption={this.translateAdminRole}\n              /> :\n              <SysAdminUserRoleEditor\n                isTextMode={true}\n                isEditIconShow={isOpIconShown}\n                currentRole={item.role}\n                roleOptions={availableRoles}\n                onRoleChanged={this.updateRole}\n              />\n            }\n          </td>\n          }\n          <td>\n            {`${Utils.bytesToSize(item.quota_usage)} / ${item.quota_total > 0 ? Utils.bytesToSize(item.quota_total) : '--'}`}\n            <span\n              title={gettext('Edit')}\n              className={`fa fa-pencil-alt attr-action-icon ${isOpIconShown ? '' : 'invisible'}`}\n              onClick={this.toggleSetQuotaDialog}>\n            </span>\n          </td>\n          {(multiInstitution && !isAdmin) &&\n            <td>\n              <SelectEditor\n                isTextMode={true}\n                isEditIconShow={isOpIconShown && institutions.length > 0}\n                options={institutions}\n                currentOption={item.institution}\n                onOptionChanged={this.updateInstitution}\n                translateOption={this.translateInstitution}\n              />\n            </td>\n          }\n          <td>\n            {`${item.create_time ? moment(item.create_time).format('YYYY-MM-DD HH:mm') : '--'} /`}\n            <br />\n            {`${item.last_login ? moment(item.last_login).fromNow() : '--'}`}\n            <br />\n            {`${item.last_access_time ? moment(item.last_access_time).fromNow() : '--'}`}\n          </td>\n          <td>\n            {(item.email != username && isOpIconShown) &&\n            <OpMenu\n              operations={this.getMenuOperations()}\n              translateOperations={this.translateOperations}\n              onMenuItemClick={this.onMenuItemClick}\n              onFreezedItem={this.props.onFreezedItem}\n              onUnfreezedItem={this.onUnfreezedItem}\n            />\n            }\n          </td>\n        </tr>\n        {isSetQuotaDialogOpen &&\n          <SysAdminUserSetQuotaDialog\n            toggle={this.toggleSetQuotaDialog}\n            updateQuota={this.updateQuota}\n          />\n        }\n        {isDeleteUserDialogOpen &&\n          <CommonOperationConfirmationDialog\n            title={gettext('Delete User')}\n            message={deleteDialogMsg}\n            executeOperation={this.deleteUser}\n            confirmBtnText={gettext('Delete')}\n            toggleDialog={this.toggleDeleteUserDialog}\n          />\n        }\n        {isResetUserPasswordDialogOpen &&\n          <CommonOperationConfirmationDialog\n            title={gettext('Reset Password')}\n            message={resetPasswordDialogMsg}\n            executeOperation={this.resetPassword}\n            confirmBtnText={gettext('Reset')}\n            toggleDialog={this.toggleResetUserPasswordDialog}\n          />\n        }\n        {isRevokeAdminDialogOpen &&\n          <CommonOperationConfirmationDialog\n            title={gettext('Revoke Admin')}\n            message={revokeAdminDialogMsg}\n            executeOperation={this.revokeAdmin}\n            confirmBtnText={gettext('Revoke')}\n            toggleDialog={this.toggleRevokeAdminDialog}\n          />\n        }\n      </Fragment>\n    );\n  }\n}\n\nexport default Content;\n","import React, { Component, Fragment } from 'react';\nimport { navigate } from '@reach/router';\nimport { Button } from 'reactstrap';\nimport PropTypes from 'prop-types';\nimport { Utils } from '../../../utils/utils';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { isPro, gettext, siteRoot } from '../../../utils/constants';\nimport toaster from '../../../components/toast';\nimport SysAdminUserSetQuotaDialog from '../../../components/dialog/sysadmin-dialog/set-quota';\nimport SysAdminImportUserDialog from '../../../components/dialog/sysadmin-dialog/sysadmin-import-user-dialog';\nimport SysAdminAddUserDialog from '../../../components/dialog/sysadmin-dialog/sysadmin-add-user-dialog';\nimport SysAdminBatchAddAdminDialog from '../../../components/dialog/sysadmin-dialog/sysadmin-batch-add-admin-dialog';\nimport CommonOperationConfirmationDialog from '../../../components/dialog/common-operation-confirmation-dialog';\nimport SysAdminUser from '../../../models/sysadmin-user';\nimport SysAdminAdminUser from '../../../models/sysadmin-admin-user';\nimport MainPanelTopbar from '../main-panel-topbar';\nimport Search from '../search';\nimport UsersNav from './users-nav';\nimport Content from './users-content';\n\nconst { availableRoles } = window.sysadmin.pageOptions;\n\nconst propTypes = {\n  isAdmin: PropTypes.bool,\n  isLDAPImported: PropTypes.bool\n};\n\nclass Users extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      userList: [],\n      hasNextPage: false,\n      currentPage: 1,\n      perPage: 25,\n      hasUserSelected: false,\n      selectedUserList: [],\n      isAllUsersSelected: false,\n      isImportUserDialogOpen: false,\n      isAddUserDialogOpen: false,\n      isBatchSetQuotaDialogOpen: false,\n      isBatchDeleteUserDialogOpen: false,\n      isBatchAddAdminDialogOpen: false\n    };\n  }\n\n  componentDidMount () {\n    if (this.props.isAdmin) { // 'Admin' page\n      this.getUserList(); // no pagination\n    } else {\n      let urlParams = (new URL(window.location)).searchParams;\n      const {\n        currentPage, perPage,\n        sortBy = '',\n        sortOrder = 'asc'\n      } = this.state;\n      this.setState({\n        perPage: parseInt(urlParams.get('per_page') || perPage),\n        currentPage: parseInt(urlParams.get('page') || currentPage),\n        sortBy: urlParams.get('order_by') || sortBy,\n        sortOrder: urlParams.get('direction') || sortOrder\n      }, () => {\n        this.getUsersListByPage(this.state.currentPage);\n      });\n    }\n  }\n\n  toggleImportUserDialog = () => {\n    this.setState({isImportUserDialogOpen: !this.state.isImportUserDialogOpen});\n  }\n\n  toggleAddUserDialog = () => {\n    this.setState({isAddUserDialogOpen: !this.state.isAddUserDialogOpen});\n  }\n\n  toggleBatchSetQuotaDialog = () => {\n    this.setState({isBatchSetQuotaDialogOpen: !this.state.isBatchSetQuotaDialogOpen});\n  }\n\n  toggleBatchDeleteUserDialog = () => {\n    this.setState({isBatchDeleteUserDialogOpen: !this.state.isBatchDeleteUserDialogOpen});\n  }\n\n  onUserSelected = (item) => {\n    let hasUserSelected = false;\n    let selectedUserList = [];\n    // traverse all users, toggle its selected status\n    let users = this.state.userList.map(user => {\n      // toggle status\n      if (user.email === item.email) {\n        user.isSelected = !user.isSelected;\n      }\n      // update selectedUserList\n      // if current user is now selected, push it to selectedUserList\n      // if current user is now not selected, drop it from selectedUserList\n      if (user.isSelected == true) {\n        hasUserSelected = true;\n        selectedUserList.push(user);\n      } else {\n        selectedUserList = selectedUserList.filter(thisuser => {\n          return thisuser.email != user.email;\n        });\n      }\n      return user;\n    });\n    // finally update state\n    this.setState({\n      userList: users,\n      hasUserSelected: hasUserSelected,\n      selectedUserList: selectedUserList,\n    });\n  }\n\n  toggleSelectAllUsers = () => {\n    if (this.state.isAllUsersSelected) {\n      // if previous state is allSelected, toggle to not select\n      let users = this.state.userList.map(user => {\n        user.isSelected = false;\n        return user;\n      });\n      this.setState({\n        userList: users,\n        hasUserSelected: false,\n        isAllUsersSelected: false,\n        selectedUserList: [],\n      });\n    } else {\n      // if previous state is not allSelected, toggle to selectAll\n      let users = this.state.userList.map(user => {\n        user.isSelected = true;\n        return user;\n      });\n      this.setState({\n        userList: users,\n        hasUserSelected: true,\n        isAllUsersSelected: true,\n        selectedUserList: users\n      });\n    }\n  }\n\n  getUserList = () => {\n  // get admins\n    seafileAPI.sysAdminListAdmins().then(res => {\n      let users = res.data.admin_user_list.map(user => {\n        return new SysAdminAdminUser(user);\n      });\n      this.setState({\n        userList: users,\n        loading: false\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  getUsersListByPage = (page) => {\n    const { perPage, sortBy, sortOrder } = this.state;\n    const { isLDAPImported } = this.props;\n    seafileAPI.sysAdminListUsers(page, perPage, isLDAPImported, sortBy, sortOrder).then(res => {\n      let users = res.data.data.map(user => {return new SysAdminUser(user);});\n      this.setState({\n        userList: users,\n        loading: false,\n        hasNextPage: Utils.hasNextPage(page, perPage, res.data.total_count),\n        currentPage: page\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  sortByQuotaUsage = () => {\n    this.setState({\n      sortBy: 'quota_usage',\n      sortOrder: this.state.sortOrder == 'asc' ? 'desc' : 'asc',\n      currentPage: 1\n    }, () => {\n      let url = new URL(location.href);\n      let searchParams = new URLSearchParams(url.search);\n      const { currentPage, sortBy, sortOrder } = this.state;\n      searchParams.set('page', currentPage);\n      searchParams.set('order_by', sortBy);\n      searchParams.set('direction', sortOrder);\n      url.search = searchParams.toString();\n      navigate(url.toString());\n      this.getUsersListByPage(currentPage);\n    });\n  }\n\n  deleteUser = (email) => {\n    seafileAPI.sysAdminDeleteUser(email).then(res => {\n      let newUserList = this.state.userList.filter(item => {\n        return item.email != email;\n      });\n      this.setState({userList: newUserList});\n      toaster.success(gettext('Successfully deleted 1 item.'));\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  setUserQuotaInBatch = (quotaTotal) => {\n    let emails = this.state.selectedUserList.map(user => {\n      return user.email;\n    });\n    seafileAPI.sysAdminSetUserQuotaInBatch(emails, quotaTotal).then(res => {\n      let userList = this.state.userList.map(item => {\n        res.data.success.map(resultUser => {\n          if (item.email == resultUser.email) {\n            item.quota_total = resultUser.quota_total;\n          }\n        });\n        return item;\n      });\n      this.setState({userList: userList});\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  deleteUserInBatch = () => {\n    let emails = this.state.selectedUserList.map(user => {\n      return user.email;\n    });\n    seafileAPI.sysAdminDeleteUserInBatch(emails).then(res => {\n      if (res.data.success.length) {\n        let oldUserList = this.state.userList;\n        let newUserList = oldUserList.filter(oldUser => {\n          return !res.data.success.some(deletedUser =>{\n            return deletedUser.email == oldUser.email;\n          });\n        });\n        this.setState({\n          userList: newUserList,\n          hasUserSelected: emails.length != res.data.success.length\n        });\n        const length = res.data.success.length;\n        const msg = length == 1 ?\n          gettext('Successfully deleted 1 user.') :\n          gettext('Successfully deleted {user_number_placeholder} users.')\n            .replace('{user_number_placeholder}', length);\n        toaster.success(msg);\n      }\n      res.data.failed.map(item => {\n        const msg = `${item.email}: ${item.error_msg}`;\n        toaster.danger(msg);\n      });\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  importUserInBatch = (file) => {\n    toaster.notify(gettext('It may take some time, please wait.'));\n    seafileAPI.sysAdminImportUserViaFile(file).then((res) => {\n      if (res.data.success.length) {\n        const users = res.data.success.map(item => {\n          if (item.institution == undefined) {\n            item.institution = '';\n          }\n          return new SysAdminUser(item);\n        });\n        this.setState({\n          userList: users.concat(this.state.userList)\n        });\n      }\n      res.data.failed.map(item => {\n        const msg = `${item.email}: ${item.error_msg}`;\n        toaster.danger(msg);\n      });\n    }).catch((error) => {\n      let errMsg = Utils.getErrorMsg(error);\n      toaster.danger(errMsg);\n    });\n  }\n\n  addUser = (data) => {\n    toaster.notify(gettext('It may take some time, please wait.'));\n    const { email, name, role, password } = data;\n    seafileAPI.sysAdminAddUser(email, name, role, password).then((res) => {\n      let userList = this.state.userList;\n      userList.unshift(res.data);\n      this.setState({\n        userList: userList\n      });\n      toaster.success(res.data.add_user_tip);\n    }).catch((error) => {\n      let errMsg = Utils.getErrorMsg(error);\n      toaster.danger(errMsg);\n    });\n  }\n\n  resetPerPage = (perPage) => {\n    this.setState({\n      perPage: perPage\n    }, () => {\n      this.getUsersListByPage(1);\n    });\n  }\n\n  updateUser = (email, key, value) => {\n    seafileAPI.sysAdminUpdateUser(email, key, value).then(res => {\n      let newUserList = this.state.userList.map(item => {\n        if (item.email == email) {\n          item[key]= res.data[key];\n        }\n        return item;\n      });\n      this.setState({userList: newUserList});\n      const msg = (key == 'is_active' && value) ?\n        res.data.update_status_tip : gettext('Edit succeeded');\n      toaster.success(msg);\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  updateAdminRole = (email, role) => {\n    seafileAPI.sysAdminUpdateAdminRole(email, role).then(res => {\n      let newUserList = this.state.userList.map(item => {\n        if (item.email == email) {\n          item.admin_role = res.data.role;\n        }\n        return item;\n      });\n      this.setState({userList: newUserList});\n      toaster.success(gettext('Edit succeeded'));\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  revokeAdmin = (email, name) => {\n    seafileAPI.sysAdminUpdateUser(email, 'is_staff', false).then(res => {\n      let userList = this.state.userList.filter(item => {\n        return item.email != email;\n      });\n      this.setState({\n        userList: userList\n      });\n      toaster.success(gettext('Successfully revoked the admin permission of {placeholder}.').replace('{placeholder}', name));\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  getOperationsForAll = () => {\n    const { isAdmin, isLDAPImported } = this.props;\n\n    if (isAdmin) {\n      return <Button className=\"btn btn-secondary operation-item\" onClick={this.toggleBatchAddAdminDialog}>{gettext('Add Admin')}</Button>;\n    }\n\n    if (isLDAPImported) {\n      return <a className=\"btn btn-secondary operation-item\" href={`${siteRoot}sys/useradmin/export-excel/`}>{gettext('Export Excel')}</a>;\n    }\n\n    // 'database'\n    return (\n      <Fragment>\n        <Button className=\"btn btn-secondary operation-item\" onClick={this.toggleImportUserDialog}>{gettext('Import Users')}</Button>\n        <Button className=\"btn btn-secondary operation-item\" onClick={this.toggleAddUserDialog}>{gettext('Add User')}</Button>\n        <a className=\"btn btn-secondary operation-item\" href={`${siteRoot}sys/useradmin/export-excel/`}>{gettext('Export Excel')}</a>\n      </Fragment>\n    );\n  }\n\n  getCurrentNavItem = () => {\n    const { isAdmin, isLDAPImported } = this.props;\n    let item = 'database';\n    if (isAdmin) {\n      item = 'admin';\n    } else if (isLDAPImported) {\n      item = 'ldap-imported';\n    }\n    return item;\n  }\n\n  toggleBatchAddAdminDialog = () => {\n    this.setState({isBatchAddAdminDialogOpen: !this.state.isBatchAddAdminDialogOpen});\n  }\n\n  addAdminInBatch = (emails) => {\n    seafileAPI.sysAdminAddAdminInBatch(emails).then(res => {\n      let users = res.data.success.map(user => {\n        return new SysAdminAdminUser(user);\n      });\n      this.setState({\n        userList: users.concat(this.state.userList)\n      });\n      res.data.failed.map(item => {\n        const msg = `${item.email}: ${item.error_msg}`;\n        toaster.danger(msg);\n      });\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  getSearch = () => {\n    if (this.props.isAdmin) {\n      return null;\n    }\n    // offer 'Search' for 'DB' & 'LDAPImported' users\n    return <Search\n      placeholder={gettext('Search users')}\n      submit={this.searchItems}\n    />;\n  }\n\n  searchItems = (keyword) => {\n    navigate(`${siteRoot}sys/search-users/?query=${encodeURIComponent(keyword)}`);\n  }\n\n  render() {\n    const { isAdmin, isLDAPImported } = this.props;\n    const {\n      hasUserSelected,\n      isImportUserDialogOpen,\n      isAddUserDialogOpen,\n      isBatchDeleteUserDialogOpen,\n      isBatchSetQuotaDialogOpen,\n      isBatchAddAdminDialogOpen\n    } = this.state;\n    return (\n      <Fragment>\n        <MainPanelTopbar search={this.getSearch()}>\n          {hasUserSelected ?\n            <Fragment>\n              <Button className=\"btn btn-secondary operation-item\" onClick={this.toggleBatchSetQuotaDialog}>{gettext('Set Quota')}</Button>\n              <Button className=\"btn btn-secondary operation-item\" onClick={this.toggleBatchDeleteUserDialog}>{gettext('Delete Users')}</Button>\n            </Fragment>\n            : this.getOperationsForAll()\n          }\n        </MainPanelTopbar>\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <UsersNav currentItem={this.getCurrentNavItem()} />\n            <div className=\"cur-view-content\">\n              <Content\n                isAdmin={isAdmin}\n                isLDAPImported={isLDAPImported}\n                loading={this.state.loading}\n                errorMsg={this.state.errorMsg}\n                items={this.state.userList}\n                sortBy={this.state.sortBy}\n                sortOrder={this.state.sortOrder}\n                sortByQuotaUsage={this.sortByQuotaUsage}\n                currentPage={this.state.currentPage}\n                hasNextPage={this.state.hasNextPage}\n                curPerPage={this.state.perPage}\n                resetPerPage={this.resetPerPage}\n                getListByPage={this.getUsersListByPage}\n                updateUser={this.updateUser}\n                deleteUser={this.deleteUser}\n                updateAdminRole={this.updateAdminRole}\n                revokeAdmin={this.revokeAdmin}\n                onUserSelected={this.onUserSelected}\n                isAllUsersSelected={this.isAllUsersSelected}\n                toggleSelectAllUsers={this.toggleSelectAllUsers}\n              />\n            </div>\n          </div>\n        </div>\n        {isImportUserDialogOpen &&\n        <SysAdminImportUserDialog\n          toggle={this.toggleImportUserDialog}\n          importUserInBatch={this.importUserInBatch}\n        />\n        }\n        {isAddUserDialogOpen &&\n          <SysAdminAddUserDialog\n            dialogTitle={gettext('Add User')}\n            showRole={isPro}\n            availableRoles={availableRoles}\n            addUser={this.addUser}\n            toggleDialog={this.toggleAddUserDialog}\n          />\n        }\n        {isBatchSetQuotaDialogOpen &&\n          <SysAdminUserSetQuotaDialog\n            toggle={this.toggleBatchSetQuotaDialog}\n            updateQuota={this.setUserQuotaInBatch}\n          />\n        }\n        {isBatchDeleteUserDialogOpen &&\n          <CommonOperationConfirmationDialog\n            title={gettext('Delete Users')}\n            message={gettext('Are you sure you want to delete the selected user(s) ?')}\n            executeOperation={this.deleteUserInBatch}\n            confirmBtnText={gettext('Delete')}\n            toggleDialog={this.toggleBatchDeleteUserDialog}\n          />\n        }\n        {isBatchAddAdminDialogOpen &&\n          <SysAdminBatchAddAdminDialog\n            addAdminInBatch={this.addAdminInBatch}\n            toggle={this.toggleBatchAddAdminDialog}\n          />\n        }\n      </Fragment>\n    );\n  }\n}\n\nUsers.propTypes = propTypes;\n\nexport default Users;\n","import React, { Component, Fragment } from 'react';\nimport Users from './users';\n\nclass AdminUsers extends Component {\n\n  render() {\n    return <Users isAdmin={true} />;\n  }\n}\n\nexport default AdminUsers;\n","import React, { Component, Fragment } from 'react';\nimport Users from './users';\n\nclass LDAPImportedUsers extends Component {\n\n  render() {\n    return <Users isLDAPImported={true} />;\n  }\n}\n\nexport default LDAPImportedUsers;\n","import React, { Component, Fragment } from 'react';\nimport moment from 'moment';\nimport { Utils } from '../../../utils/utils';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { gettext, siteRoot } from '../../../utils/constants';\nimport EmptyTip from '../../../components/empty-tip';\nimport Loading from '../../../components/loading';\nimport Paginator from '../../../components/paginator';\nimport UsersNav from './users-nav';\nimport MainPanelTopbar from '../main-panel-topbar';\nimport UserLink from '../user-link';\n\nclass Content extends Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  getPreviousPage = () => {\n    this.props.getListByPage(this.props.currentPage - 1);\n  }\n\n  getNextPage = () => {\n    this.props.getListByPage(this.props.currentPage + 1);\n  }\n\n  render() {\n    const { loading, errorMsg, items, curPerPage, hasNextPage, currentPage } = this.props;\n    if (loading) {\n      return <Loading />;\n    } else if (errorMsg) {\n      return <p className=\"error text-center mt-4\">{errorMsg}</p>;\n    } else {\n      const emptyTip = (\n        <EmptyTip>\n          <h2>{gettext('No users')}</h2>\n        </EmptyTip>\n      );\n      const table = (\n        <Fragment>\n          <table className=\"table-hover\">\n            <thead>\n              <tr>\n                <th width=\"40%\">{gettext('Email')}</th>\n                <th width=\"30%\">{gettext('Space Used')}{' / '}{gettext('Quota')}</th>\n                <th width=\"30%\">{gettext('Last Login')}</th>\n              </tr>\n            </thead>\n            <tbody>\n              {items.map((item, index) => {\n                return (<Item\n                  key={index}\n                  item={item}\n                />);\n              })}\n            </tbody>\n          </table>\n          <Paginator\n            gotoPreviousPage={this.getPreviousPage}\n            gotoNextPage={this.getNextPage}\n            currentPage={currentPage}\n            hasNextPage={hasNextPage}\n            curPerPage={curPerPage}\n            resetPerPage={this.props.resetPerPage}\n          />\n        </Fragment>\n      );\n\n      return items.length ? table : emptyTip;\n    }\n  }\n}\n\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    const { item } = this.props;\n    let email = '<span class=\"op-target\">' + Utils.HTMLescape(item.email) + '</span>';\n    return (\n      <Fragment>\n        <tr>\n          <td><UserLink email={item.email} name={item.email} /></td>\n          <td>\n            {`${Utils.bytesToSize(item.quota_usage)} / ${item.quota_total > 0 ? Utils.bytesToSize(item.quota_total) : '--'}`}\n          </td>\n          <td>\n            {item.last_login ? moment(item.last_login).fromNow() : '--'}\n          </td>\n        </tr>\n      </Fragment>\n    );\n  }\n}\n\nclass Users extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      userList: {},\n      hasNextPage: false,\n      currentPage: 1,\n      perPage: 25\n    };\n  }\n\n  componentDidMount () {\n    let urlParams = (new URL(window.location)).searchParams;\n    const { currentPage, perPage } = this.state;\n    this.setState({\n      perPage: parseInt(urlParams.get('per_page') || perPage),\n      currentPage: parseInt(urlParams.get('page') || currentPage)\n    }, () => {\n      this.getUsersListByPage(this.state.currentPage);\n    });\n  }\n\n  getUsersListByPage = (page) => {\n    let { perPage } = this.state;\n    seafileAPI.sysAdminListLDAPUsers(page, perPage).then(res => {\n      this.setState({\n        loading: false,\n        userList: res.data.ldap_user_list,\n        hasNextPage: res.data.has_next_page,\n        currentPage: page\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  resetPerPage = (perPage) => {\n    this.setState({\n      perPage: perPage\n    }, () => {\n      this.getUsersListByPage(1);\n    });\n  }\n\n  render() {\n    return (\n      <Fragment>\n        <MainPanelTopbar />\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <UsersNav currentItem=\"ldap\" />\n            <div className=\"cur-view-content\">\n              <Content\n                resetPerPage={this.resetPerPage}\n                loading={this.state.loading}\n                errorMsg={this.state.errorMsg}\n                items={this.state.userList}\n                currentPage={this.state.currentPage}\n                hasNextPage={this.state.hasNextPage}\n                curPerPage={this.state.perPage}\n                getListByPage={this.getUsersListByPage}\n              />\n            </div>\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nexport default Users;\n","import React, { Component, Fragment } from 'react';\nimport { Button, Form, FormGroup, Input, Col } from 'reactstrap';\nimport { Utils } from '../../../utils/utils';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { gettext } from '../../../utils/constants';\nimport Paginator from '../../../components/paginator';\nimport toaster from '../../../components/toast';\nimport SysAdminUserSetQuotaDialog from '../../../components/dialog/sysadmin-dialog/set-quota';\nimport CommonOperationConfirmationDialog from '../../../components/dialog/common-operation-confirmation-dialog';\nimport MainPanelTopbar from '../main-panel-topbar';\nimport Content from './users-content';\n\n\nclass SearchUsers extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      query: '',\n      isSubmitBtnActive: false,\n      loading: true,\n      errorMsg: '',\n      userList: [],\n      pageInfo: {\n        has_next_page: false,\n        current_page: 1,\n      },\n      currentPage: 1,\n      perPage: 25,\n      hasUserSelected: false,\n      selectedUserList: [],\n      isAllUsersSelected: false,\n      isBatchSetQuotaDialogOpen: false,\n      isBatchDeleteUserDialogOpen: false\n    };\n  }\n\n  componentDidMount () {\n    let params = (new URL(document.location)).searchParams;\n    const { currentPage, perPage } = this.state;\n    this.setState({\n      query: params.get('query') || '',\n      currentPage: parseInt(params.get('page') || currentPage),\n      perPage: parseInt(params.get('per_page') || perPage)\n    }, () => {this.getItems(this.state.currentPage);});\n  }\n\n  toggleBatchSetQuotaDialog = () => {\n    this.setState({isBatchSetQuotaDialogOpen: !this.state.isBatchSetQuotaDialogOpen});\n  }\n\n  toggleBatchDeleteUserDialog = () => {\n    this.setState({isBatchDeleteUserDialogOpen: !this.state.isBatchDeleteUserDialogOpen});\n  }\n\n  onUserSelected = (item) => {\n    let hasUserSelected = false;\n    let selectedUserList = [];\n    // traverse all users, toggle its selected status\n    let users = this.state.userList.map(user => {\n      // toggle status\n      if (user.email === item.email) {\n        user.isSelected = !user.isSelected;\n      }\n      // update selectedUserList\n      // if current user is now selected, push it to selectedUserList\n      // if current user is now not selected, drop it from selectedUserList\n      if (user.isSelected == true) {\n        hasUserSelected = true;\n        selectedUserList.push(user);\n      } else {\n        selectedUserList = selectedUserList.filter(thisuser => {\n          return thisuser.email != user.email;\n        });\n      }\n      return user;\n    });\n    // finally update state\n    this.setState({\n      userList: users,\n      hasUserSelected: hasUserSelected,\n      selectedUserList: selectedUserList,\n    });\n  }\n\n  toggleSelectAllUsers = () => {\n    if (this.state.isAllUsersSelected) {\n      // if previous state is allSelected, toggle to not select\n      let users = this.state.userList.map(user => {\n        user.isSelected = false;\n        return user;\n      });\n      this.setState({\n        userList: users,\n        hasUserSelected: false,\n        isAllUsersSelected: false,\n        selectedUserList: [],\n      });\n    } else {\n      // if previous state is not allSelected, toggle to selectAll\n      let users = this.state.userList.map(user => {\n        user.isSelected = true;\n        return user;\n      });\n      this.setState({\n        userList: users,\n        hasUserSelected: true,\n        isAllUsersSelected: true,\n        selectedUserList: users\n      });\n    }\n  }\n\n  getItems = (page) => {\n    seafileAPI.sysAdminSearchUsers(this.state.query.trim(), page, this.state.perPage).then(res => {\n      this.setState({\n        userList: res.data.user_list,\n        loading: false,\n        pageInfo: res.data.page_info\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  resetPerPage = (perPage) => {\n    this.setState({\n      perPage: perPage\n    }, () => {\n      this.getItems(1);\n    });\n  }\n\n  deleteUser = (email) => {\n    seafileAPI.sysAdminDeleteUser(email).then(res => {\n      let newUserList = this.state.userList.filter(item => {\n        return item.email != email;\n      });\n      this.setState({userList: newUserList});\n      toaster.success(gettext('Successfully deleted 1 item.'));\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  setUserQuotaInBatch = (quotaTotal) => {\n    let emails = this.state.selectedUserList.map(user => {\n      return user.email;\n    });\n    seafileAPI.sysAdminSetUserQuotaInBatch(emails, quotaTotal).then(res => {\n      let userList = this.state.userList.map(item => {\n        res.data.success.map(resultUser => {\n          if (item.email == resultUser.email) {\n            item.quota_total = resultUser.quota_total;\n          }\n        });\n        return item;\n      });\n      this.setState({userList: userList});\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  deleteUserInBatch = () => {\n    let emails = this.state.selectedUserList.map(user => {\n      return user.email;\n    });\n    seafileAPI.sysAdminDeleteUserInBatch(emails).then(res => {\n      if (res.data.success.length) {\n        let oldUserList = this.state.userList;\n        let newUserList = oldUserList.filter(oldUser => {\n          return !res.data.success.some(deletedUser =>{\n            return deletedUser.email == oldUser.email;\n          });\n        });\n        this.setState({\n          userList: newUserList,\n          hasUserSelected: emails.length != res.data.success.length\n        });\n        const length = res.data.success.length;\n        const msg = length == 1 ?\n          gettext('Successfully deleted 1 user.') :\n          gettext('Successfully deleted {user_number_placeholder} users.')\n            .replace('{user_number_placeholder}', length);\n        toaster.success(msg);\n      }\n      res.data.failed.map(item => {\n        const msg = `${item.email}: ${item.error_msg}`;\n        toaster.danger(msg);\n      });\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  updateUser = (email, key, value) => {\n    seafileAPI.sysAdminUpdateUser(email, key, value).then(res => {\n      let newUserList = this.state.userList.map(item => {\n        if (item.email == email) {\n          item[key]= res.data[key];\n        }\n        return item;\n      });\n      this.setState({userList: newUserList});\n      const msg = (key == 'is_active' && value) ?\n        res.data.update_status_tip : gettext('Edit succeeded');\n      toaster.success(msg);\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  updateAdminRole = (email, role) => {\n    seafileAPI.sysAdminUpdateAdminRole(email, role).then(res => {\n      let newUserList = this.state.userList.map(item => {\n        if (item.email == email) {\n          item.admin_role = res.data.role;\n        }\n        return item;\n      });\n      this.setState({userList: newUserList});\n      toaster.success(gettext('Edit succeeded'));\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  revokeAdmin = (email, name) => {\n    seafileAPI.sysAdminUpdateUser(email, 'is_staff', false).then(res => {\n      let userList = this.state.userList.filter(item => {\n        return item.email != email;\n      });\n      this.setState({\n        userList: userList\n      });\n      toaster.success(gettext('Successfully revoked the admin permission of {placeholder}.').replace('{placeholder}', name));\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  handleInputChange = (e) => {\n    this.setState({\n      query: e.target.value\n    }, this.checkSubmitBtnActive);\n  }\n\n  checkSubmitBtnActive = () => {\n    const { query } = this.state;\n    this.setState({\n      isSubmitBtnActive: query.trim()\n    });\n  }\n\n  getPreviousPageList = () => {\n    this.getItems(this.state.pageInfo.current_page - 1);\n  }\n\n  getNextPageList = () => {\n    this.getItems(this.state.pageInfo.current_page + 1);\n  }\n\n  render() {\n    const { query, isSubmitBtnActive } = this.state;\n    const {\n      hasUserSelected,\n      isBatchDeleteUserDialogOpen,\n      isBatchSetQuotaDialogOpen\n    } = this.state;\n    return (\n      <Fragment>\n        {hasUserSelected ?\n          <MainPanelTopbar>\n            <Fragment>\n              <Button className=\"btn btn-secondary operation-item\" onClick={this.toggleBatchSetQuotaDialog}>{gettext('Set Quota')}</Button>\n              <Button className=\"btn btn-secondary operation-item\" onClick={this.toggleBatchDeleteUserDialog}>{gettext('Delete Users')}</Button>\n            </Fragment>\n          </MainPanelTopbar> :\n          <MainPanelTopbar />\n        }\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <div className=\"cur-view-path\">\n              <h3 className=\"sf-heading\">{gettext('Users')}</h3>\n            </div>\n            <div className=\"cur-view-content\">\n              <div className=\"mt-4 mb-6\">\n                <h4 className=\"border-bottom font-weight-normal mb-2 pb-1\">{gettext('Search Users')}</h4>\n                <Form>\n                  <FormGroup row>\n                    <Col sm={5}>\n                      <Input type=\"text\" name=\"query\" value={query} placeholder={gettext('Search users')} onChange={this.handleInputChange} />\n                    </Col>\n                  </FormGroup>\n                  <FormGroup row>\n                    <Col sm={{size: 5}}>\n                      <button className=\"btn btn-outline-primary\" disabled={!isSubmitBtnActive} onClick={this.getItems}>{gettext('Submit')}</button>\n                    </Col>\n                  </FormGroup>\n                </Form>\n              </div>\n              <div className=\"mt-4 mb-6\">\n                <h4 className=\"border-bottom font-weight-normal mb-2 pb-1\">{gettext('Result')}</h4>\n                <Content\n                  isLDAPImported={false}\n                  isAdmin={false}\n                  isSearchResult={true}\n                  loading={this.state.loading}\n                  errorMsg={this.state.errorMsg}\n                  items={this.state.userList}\n                  updateUser={this.updateUser}\n                  deleteUser={this.deleteUser}\n                  updateAdminRole={this.updateAdminRole}\n                  revokeAdmin={this.revokeAdmin}\n                  onUserSelected={this.onUserSelected}\n                  isAllUsersSelected={this.isAllUsersSelected}\n                  toggleSelectAllUsers={this.toggleSelectAllUsers}\n                />\n              </div>\n            </div>\n          </div>\n        </div>\n        {isBatchSetQuotaDialogOpen &&\n          <SysAdminUserSetQuotaDialog\n            toggle={this.toggleBatchSetQuotaDialog}\n            updateQuota={this.setUserQuotaInBatch}\n          />\n        }\n        {isBatchDeleteUserDialogOpen &&\n          <CommonOperationConfirmationDialog\n            title={gettext('Delete Users')}\n            message={gettext('Are you sure you want to delete the selected user(s) ?')}\n            executeOperation={this.deleteUserInBatch}\n            confirmBtnText={gettext('Delete')}\n            toggleDialog={this.toggleBatchDeleteUserDialog}\n          />\n        }\n        {this.state.pageInfo &&\n        <Paginator\n          gotoPreviousPage={this.getPreviousPageList}\n          gotoNextPage={this.getNextPageList}\n          currentPage={this.state.pageInfo.current_page}\n          hasNextPage={this.state.pageInfo.has_next_page}\n          curPerPage={this.state.perPage}\n          resetPerPage={this.resetPerPage}\n        />\n        }\n      </Fragment>\n    );\n  }\n}\n\nexport default SearchUsers;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Alert, Modal, ModalHeader, ModalBody, ModalFooter, Button, Form, FormGroup, Input, InputGroup, InputGroupAddon, InputGroupText } from 'reactstrap';\nimport { gettext } from '../../../utils/constants';\nimport { Utils } from '../../../utils/utils';\n\nconst propTypes = {\n  dialogTitle: PropTypes.string.isRequired,\n  updateValue: PropTypes.func.isRequired,\n  toggleDialog: PropTypes.func.isRequired\n};\n\nclass UpdateUser extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      value: this.props.value,\n      isSubmitBtnActive: false\n    };\n  }\n\n  handleInputChange = (e) => {\n    const value = e.target.value;\n    this.setState({\n      value: value\n    });\n  }\n\n  handleKeyPress = (e) => {\n    if (e.key == 'Enter') {\n      this.handleSubmit();\n      e.preventDefault();\n    }\n  }\n\n  handleSubmit = () => {\n    this.props.updateValue(this.state.value.trim());\n    this.props.toggleDialog();\n  }\n\n  render() {\n    const  { dialogTitle, toggleDialog } = this.props;\n    return (\n      <Modal isOpen={true} toggle={toggleDialog}>\n        <ModalHeader toggle={toggleDialog}>{this.props.dialogTitle}</ModalHeader>\n        <ModalBody>\n          <Form>\n            <FormGroup>\n              <Input\n                type=\"text\"\n                value={this.state.value}\n                onKeyPress={this.handleKeyPress}\n                onChange={this.handleInputChange}\n              />\n            </FormGroup>\n          </Form>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={toggleDialog}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.handleSubmit}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nUpdateUser.propTypes = propTypes;\n\nexport default UpdateUser;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Link } from '@reach/router';\nimport { siteRoot, gettext } from '../../../utils/constants';\n\nconst propTypes = {\n  currentItem: PropTypes.string.isRequired\n};\n\nclass Nav extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.navItems = [\n      {name: 'info', urlPart: '', text: gettext('Info')},\n      {name: 'owned-repos', urlPart: 'owned-libraries', text: gettext('Owned Libraries')},\n      {name: 'shared-repos', urlPart: 'shared-libraries', text: gettext('Shared Libraries')},\n      {name: 'links', urlPart: 'shared-links', text: gettext('Shared Links')},\n      {name: 'groups', urlPart: 'groups', text: gettext('Groups')}\n    ];\n  }\n\n  render() {\n    const { currentItem, email, userName } = this.props;\n    return (\n      <div>\n        <div className=\"cur-view-path\">\n          <h3 className=\"sf-heading\"><Link to={`${siteRoot}sys/users/`}>{gettext('Users')}</Link> / {userName}</h3>\n        </div>\n        <ul className=\"nav border-bottom mx-4\">\n          {this.navItems.map((item, index) => {\n            return (\n              <li className=\"nav-item mr-2\" key={index}>\n                <Link to={`${siteRoot}sys/users/${encodeURIComponent(email)}/${item.urlPart}`} className={`nav-link ${currentItem == item.name ? ' active' : ''}`}>{item.text}</Link>\n              </li>\n            );\n          })}\n        </ul>\n      </div>\n    );\n  }\n}\n\nNav.propTypes = propTypes;\n\nexport default Nav;\n","import React, { Component, Fragment } from 'react';\nimport { FormGroup, Label, Input, Button } from 'reactstrap';\nimport { Utils } from '../../../utils/utils';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { gettext } from '../../../utils/constants';\nimport toaster from '../../../components/toast';\nimport Loading from '../../../components/loading';\nimport SysAdminSetQuotaDialog from '../../../components/dialog/sysadmin-dialog/set-quota';\nimport SysAdminUpdateUserDialog from '../../../components/dialog/sysadmin-dialog/update-user';\nimport MainPanelTopbar from '../main-panel-topbar';\nimport Nav from './user-nav';\n\nconst { twoFactorAuthEnabled } = window.sysadmin.pageOptions;\n\nclass Content extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      currentKey: '',\n      dialogTitle: '',\n      isSetQuotaDialogOpen: false,\n      isUpdateUserDialogOpen: false\n    };\n  }\n\n  toggleSetQuotaDialog = () => {\n    this.setState({isSetQuotaDialogOpen: !this.state.isSetQuotaDialogOpen});\n  }\n\n  updateQuota = (value) => {\n    this.props.updateUser('quota_total', value);\n  }\n\n  toggleDialog = (key, dialogTitle) => {\n    this.setState({\n      currentKey: key,\n      dialogTitle: dialogTitle,\n      isUpdateUserDialogOpen: !this.state.isUpdateUserDialogOpen\n    });\n  }\n\n  toggleSetNameDialog = () => {\n    this.toggleDialog('name', gettext('Set Name'));\n  }\n\n  toggleSetUserLoginIDDialog = () => {\n    this.toggleDialog('login_id', gettext('Set Login ID'));\n  }\n\n toggleSetUserComtactEmailDialog = () => {\n   this.toggleDialog('contact_email', gettext('Set Contact Email'));\n }\n\n  toggleSetUserReferenceIDDialog = () => {\n    this.toggleDialog('reference_id', gettext('Set Reference ID'));\n  }\n\n  updateValue = (value) => {\n    this.props.updateUser(this.state.currentKey, value);\n  }\n\n  toggleUpdateUserDialog = () => {\n    this.toggleDialog('', '');\n  }\n\n  showEditIcon = (action) => {\n    return (\n      <span\n        title={gettext('Edit')}\n        className=\"fa fa-pencil-alt attr-action-icon\"\n        onClick={action}>\n      </span>\n    );\n  }\n\n  render() {\n    const { loading, errorMsg, userInfo } = this.props;\n    if (loading) {\n      return <Loading />;\n    } else if (errorMsg) {\n      return <p className=\"error text-center mt-4\">{errorMsg}</p>;\n    } else {\n      const user = this.props.userInfo;\n      const {\n        currentKey, dialogTitle,\n        isSetQuotaDialogOpen, isUpdateUserDialogOpen\n      } = this.state;\n      return (\n        <Fragment>\n          <dl className=\"m-0\">\n            <dt className=\"info-item-heading\">{gettext('Avatar')}</dt>\n            <dd className=\"info-item-content\">\n              <img src={user.avatar_url} alt={user.name} width=\"80\" className=\"rounded\"  />\n            </dd>\n\n            <dt className=\"info-item-heading\">{gettext('Email')}</dt>\n            <dd className=\"info-item-content\">{user.email}</dd>\n\n            {user.org_name &&\n              <Fragment>\n                <dt className=\"info-item-heading\">{gettext('Organization')}</dt>\n                <dd className=\"info-item-content\">{user.org_name}</dd>\n              </Fragment>\n            }\n\n            <dt className=\"info-item-heading\">{gettext('Name')}</dt>\n            <dd className=\"info-item-content\">\n              {user.name || '--'}\n              {this.showEditIcon(this.toggleSetNameDialog)}\n            </dd>\n\n            <dt className=\"info-item-heading\">{gettext('Login ID')}</dt>\n            <dd className=\"info-item-content\">\n              {user.login_id || '--'}\n              {this.showEditIcon(this.toggleSetUserLoginIDDialog)}\n            </dd>\n\n            <dt className=\"info-item-heading\">{gettext('Contact Email')}</dt>\n            <dd className=\"info-item-content\">\n              {user.contact_email || '--'}\n              {this.showEditIcon(this.toggleSetUserComtactEmailDialog)}\n            </dd>\n\n            <dt className=\"info-item-heading\">{gettext('Reference ID')}</dt>\n            <dd className=\"info-item-content\">\n              {user.reference_id|| '--'}\n              {this.showEditIcon(this.toggleSetUserReferenceIDDialog)}\n            </dd>\n\n            <dt className=\"info-item-heading\">{gettext('Space Used / Quota')}</dt>\n            <dd className=\"info-item-content\">\n              {`${Utils.bytesToSize(user.quota_usage)} / ${user.quota_total > 0 ? Utils.bytesToSize(user.quota_total) : '--'}`}\n              {this.showEditIcon(this.toggleSetQuotaDialog)}\n            </dd>\n\n            {twoFactorAuthEnabled &&\n              <Fragment>\n                <dt className=\"info-item-heading\">{gettext('Two-Factor Authentication')}</dt>\n                <dd className=\"info-item-content\">\n                  {user.has_default_device ?\n                    <FormGroup>\n                      <p className=\"mb-1\">{gettext('Status: enabled')}</p>\n                      <Button onClick={this.props.disable2FA}>{gettext('Disable Two-Factor Authentication')}</Button>\n                    </FormGroup> :\n                    <FormGroup>\n                      <Button disabled={true}>{gettext('Disable Two-Factor Authentication')}</Button>\n                    </FormGroup>\n                  }\n                  <FormGroup check>\n                    <Label check>\n                      <Input type=\"checkbox\" checked={user.is_force_2fa} onChange={this.props.toggleForce2fa} />\n                      <span>{gettext('Force Two-Factor Authentication')}</span>\n                    </Label>\n                  </FormGroup>\n                </dd>\n              </Fragment>\n            }\n          </dl>\n          {isSetQuotaDialogOpen &&\n          <SysAdminSetQuotaDialog\n            updateQuota={this.updateQuota}\n            toggle={this.toggleSetQuotaDialog}\n          />\n          }\n          {isUpdateUserDialogOpen &&\n          <SysAdminUpdateUserDialog\n            dialogTitle={dialogTitle}\n            value={user[currentKey]}\n            updateValue={this.updateValue}\n            toggleDialog={this.toggleUpdateUserDialog}\n          />\n          }\n        </Fragment>\n      );\n    }\n  }\n}\n\nclass User extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      userInfo: {}\n    };\n  }\n\n  componentDidMount () {\n    // avatar size: 160\n    seafileAPI.sysAdminGetUser(this.props.email, 160).then((res) => {\n      this.setState({\n        loading: false,\n        userInfo: res.data\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  updateUser = (key, value) => {\n    const email = this.state.userInfo.email;\n    seafileAPI.sysAdminUpdateUser(email, key, value).then(res => {\n      let userInfo = this.state.userInfo;\n      userInfo[key]= res.data[key];\n      this.setState({\n        userInfo: userInfo\n      });\n      toaster.success(gettext('Edit succeeded'));\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  disable2FA = () => {\n    const email = this.state.userInfo.email;\n    seafileAPI.sysAdminDeleteTwoFactorAuth(email).then(res => {\n      let userInfo = this.state.userInfo;\n      userInfo.has_default_device = false;\n      this.setState({\n        userInfo: userInfo\n      });\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  toggleForce2fa = (e) => {\n    const email = this.state.userInfo.email;\n    const checked = e.target.checked;\n    seafileAPI.sysAdminSetForceTwoFactorAuth(email, checked).then(res => {\n      let userInfo = this.state.userInfo;\n      userInfo.is_force_2fa = checked;\n      this.setState({\n        userInfo: userInfo\n      });\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  render() {\n    const { userInfo } = this.state;\n    return (\n      <Fragment>\n        <MainPanelTopbar />\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <Nav currentItem=\"info\" email={this.props.email} userName={userInfo.name} />\n            <div className=\"cur-view-content\">\n              <Content\n                loading={this.state.loading}\n                errorMsg={this.state.errorMsg}\n                userInfo={this.state.userInfo}\n                updateUser={this.updateUser}\n                disable2FA={this.disable2FA}\n                toggleForce2fa={this.toggleForce2fa}\n              />\n            </div>\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nexport default User;\n","import React, { Component, Fragment } from 'react';\nimport { Link } from '@reach/router';\nimport moment from 'moment';\nimport { Utils } from '../../../utils/utils';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { isPro, siteRoot, gettext } from '../../../utils/constants';\nimport toaster from '../../../components/toast';\nimport EmptyTip from '../../../components/empty-tip';\nimport Loading from '../../../components/loading';\nimport CommonOperationConfirmationDialog from '../../../components/dialog/common-operation-confirmation-dialog';\nimport TransferDialog from '../../../components/dialog/transfer-dialog';\nimport OpMenu from '../../../components/dialog/op-menu';\nimport MainPanelTopbar from '../main-panel-topbar';\nimport Nav from './user-nav';\n\nconst { enableSysAdminViewRepo } = window.sysadmin.pageOptions;\n\nclass Content extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isItemFreezed: false\n    };\n  }\n\n  onFreezedItem = () => {\n    this.setState({isItemFreezed: true});\n  }\n\n  onUnfreezedItem = () => {\n    this.setState({isItemFreezed: false});\n  }\n\n  render() {\n    const { loading, errorMsg, items } = this.props;\n    if (loading) {\n      return <Loading />;\n    } else if (errorMsg) {\n      return <p className=\"error text-center mt-4\">{errorMsg}</p>;\n    } else {\n      const emptyTip = (\n        <EmptyTip>\n          <h2>{gettext('No libraries')}</h2>\n        </EmptyTip>\n      );\n      const table = (\n        <Fragment>\n          <table>\n            <thead>\n              <tr>\n                <th width=\"5%\"></th>\n                <th width=\"35%\">{gettext('Name')}</th>\n                <th width=\"30%\">{gettext('Size')}</th>\n                <th width=\"25%\">{gettext('Last Update')}</th>\n                <th width=\"5%\">{/* Operations */}</th>\n              </tr>\n            </thead>\n            <tbody>\n              {items.map((item, index) => {\n                return (<Item\n                  key={index}\n                  item={item}\n                  isItemFreezed={this.state.isItemFreezed}\n                  onFreezedItem={this.onFreezedItem}\n                  onUnfreezedItem={this.onUnfreezedItem}\n                  deleteRepo={this.props.deleteRepo}\n                  transferRepo={this.props.transferRepo}\n                />);\n              })}\n            </tbody>\n          </table>\n        </Fragment>\n      );\n      return items.length ? table : emptyTip;\n    }\n  }\n}\n\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOpIconShown: false,\n      highlight: false,\n      isDeleteDialogOpen: false,\n      isTransferDialogOpen: false\n    };\n  }\n\n  handleMouseEnter = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        isOpIconShown: true,\n        highlight: true\n      });\n    }\n  }\n\n  handleMouseLeave = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        isOpIconShown: false,\n        highlight: false\n      });\n    }\n  }\n\n  onUnfreezedItem = () => {\n    this.setState({\n      highlight: false,\n      isOpIconShow: false\n    });\n    this.props.onUnfreezedItem();\n  }\n\n  toggleDeleteDialog = () => {\n    this.setState({isDeleteDialogOpen: !this.state.isDeleteDialogOpen});\n  }\n\n  deleteRepo = () => {\n    this.props.deleteRepo(this.props.item.id);\n  }\n\n  toggleTransferDialog = () => {\n    this.setState({isTransferDialogOpen: !this.state.isTransferDialogOpen});\n  }\n\n  transferRepo = (owner) => {\n    this.props.transferRepo(this.props.item.id, owner.email);\n    this.toggleTransferDialog();\n  }\n\n  renderRepoName = () => {\n    const { item } = this.props;\n    const repo = item;\n    if (repo.name) {\n      if (isPro && enableSysAdminViewRepo && !repo.encrypted) {\n        return <Link to={`${siteRoot}sys/libraries/${repo.id}/`}>{repo.name}</Link>;\n      } else {\n        return repo.name;\n      }\n    } else {\n      return gettext('Broken ({repo_id_placeholder})')\n        .replace('{repo_id_placeholder}', repo.id);\n    }\n  }\n\n  translateOperations = (item) => {\n    let translateResult = '';\n    switch (item) {\n      case 'Delete':\n        translateResult = gettext('Delete');\n        break;\n      case 'Transfer':\n        translateResult = gettext('Transfer');\n        break;\n    }\n\n    return translateResult;\n  }\n\n  onMenuItemClick = (operation) => {\n    switch(operation) {\n      case 'Delete':\n        this.toggleDeleteDialog();\n        break;\n      case 'Transfer':\n        this.toggleTransferDialog();\n        break;\n    }\n  }\n\n  render() {\n    const { item } = this.props;\n    const { isOpIconShown, isDeleteDialogOpen, isTransferDialogOpen } = this.state;\n\n    const iconUrl = Utils.getLibIconUrl(item);\n    const iconTitle = Utils.getLibIconTitle(item);\n\n    const itemName = '<span class=\"op-target\">' + Utils.HTMLescape(item.name) + '</span>';\n    const deleteDialogMsg = gettext('Are you sure you want to delete {placeholder} ?').replace('{placeholder}', itemName);\n\n    return (\n      <Fragment>\n        <tr className={this.state.highlight ? 'tr-highlight' : ''} onMouseEnter={this.handleMouseEnter} onMouseLeave={this.handleMouseLeave}>\n          <td><img src={iconUrl} title={iconTitle} alt={iconTitle} width=\"24\" /></td>\n          <td>{this.renderRepoName()}</td>\n          <td>{Utils.bytesToSize(item.size)}</td>\n          <td>{moment(item.last_modified).fromNow()}</td>\n          <td>\n            {isOpIconShown &&\n            <OpMenu\n              operations={['Delete', 'Transfer']}\n              translateOperations={this.translateOperations}\n              onMenuItemClick={this.onMenuItemClick}\n              onFreezedItem={this.props.onFreezedItem}\n              onUnfreezedItem={this.onUnfreezedItem}\n            />\n            }\n          </td>\n        </tr>\n        {isDeleteDialogOpen &&\n          <CommonOperationConfirmationDialog\n            title={gettext('Delete Library')}\n            message={deleteDialogMsg}\n            executeOperation={this.deleteRepo}\n            confirmBtnText={gettext('Delete')}\n            toggleDialog={this.toggleDeleteDialog}\n          />\n        }\n        {isTransferDialogOpen &&\n        <TransferDialog\n          itemName={item.name}\n          submit={this.transferRepo}\n          canTransferToDept={false}\n          toggleDialog={this.toggleTransferDialog}\n        />\n        }\n      </Fragment>\n    );\n  }\n}\n\nclass Repos extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      userInfo: {},\n      repoList: []\n    };\n  }\n\n  componentDidMount () {\n    seafileAPI.sysAdminGetUser(this.props.email).then((res) => {\n      this.setState({\n        userInfo: res.data\n      });\n    });\n    seafileAPI.sysAdminListReposByOwner(this.props.email).then(res => {\n      this.setState({\n        loading: false,\n        repoList: res.data.repos\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  deleteRepo = (repoID) => {\n    seafileAPI.sysAdminDeleteRepo(repoID).then(res => {\n      let newRepoList = this.state.repoList.filter(item => {\n        return item.id != repoID;\n      });\n      this.setState({repoList: newRepoList});\n      toaster.success(gettext('Successfully deleted 1 item.'));\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  transferRepo = (repoID, email) => {\n    seafileAPI.sysAdminTransferRepo(repoID, email).then((res) => {\n      let newRepoList = this.state.repoList.filter(item => {\n        return item.id != repoID;\n      });\n      this.setState({repoList: newRepoList});\n      let message = gettext('Successfully transferred the library.');\n      toaster.success(message);\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  render() {\n    return (\n      <Fragment>\n        <MainPanelTopbar />\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <Nav currentItem=\"owned-repos\" email={this.props.email} userName={this.state.userInfo.name} />\n            <div className=\"cur-view-content\">\n              <Content\n                loading={this.state.loading}\n                errorMsg={this.state.errorMsg}\n                items={this.state.repoList}\n                deleteRepo={this.deleteRepo}\n                transferRepo={this.transferRepo}\n              />\n            </div>\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nexport default Repos;\n","import React, { Component, Fragment } from 'react';\nimport { Link } from '@reach/router';\nimport moment from 'moment';\nimport { Utils } from '../../../utils/utils';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { isPro, siteRoot, gettext } from '../../../utils/constants';\nimport EmptyTip from '../../../components/empty-tip';\nimport Loading from '../../../components/loading';\nimport MainPanelTopbar from '../main-panel-topbar';\nimport UserLink from '../user-link';\nimport Nav from './user-nav';\n\nconst { enableSysAdminViewRepo } = window.sysadmin.pageOptions;\n\nclass Content extends Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    const { loading, errorMsg, items } = this.props;\n    if (loading) {\n      return <Loading />;\n    } else if (errorMsg) {\n      return <p className=\"error text-center mt-4\">{errorMsg}</p>;\n    } else {\n      const emptyTip = (\n        <EmptyTip>\n          <h2>{gettext('No libraries')}</h2>\n        </EmptyTip>\n      );\n      const table = (\n        <Fragment>\n          <table className=\"table-hover\">\n            <thead>\n              <tr>\n                <th width=\"5%\"></th>\n                <th width=\"35%\">{gettext('Name')}</th>\n                <th width=\"20%\">{gettext('Share From')}</th>\n                <th width=\"20%\">{gettext('Size')}</th>\n                <th width=\"20%\">{gettext('Last Update')}</th>\n              </tr>\n            </thead>\n            <tbody>\n              {items.map((item, index) => {\n                return (<Item\n                  key={index}\n                  item={item}\n                />);\n              })}\n            </tbody>\n          </table>\n        </Fragment>\n      );\n      return items.length ? table : emptyTip;\n    }\n  }\n}\n\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  renderRepoName = () => {\n    const { item } = this.props;\n    const repo = item;\n    if (repo.name) {\n      if (isPro && enableSysAdminViewRepo && !repo.encrypted) {\n        return <Link to={`${siteRoot}sys/libraries/${repo.id}/`}>{repo.name}</Link>;\n      } else {\n        return repo.name;\n      }\n    } else {\n      return gettext('Broken ({repo_id_placeholder})')\n        .replace('{repo_id_placeholder}', repo.id);\n    }\n  }\n\n  getOwnerLink = () => {\n    let link;\n    const { item } = this.props;\n    const index = item.owner_email.indexOf('@seafile_group');\n    if (index == -1) {\n      link = <UserLink email={item.owner_email} name={item.owner_name} />;\n    } else {\n      const groupID = item.owner_email.substring(0, index);\n      link = <Link to={`${siteRoot}sys/departments/${groupID}/`}>{item.owner_name}</Link>;\n    }\n    return link;\n  }\n\n  render() {\n    const { item } = this.props;\n    const iconUrl = Utils.getLibIconUrl(item);\n    const iconTitle = Utils.getLibIconTitle(item);\n    return (\n      <Fragment>\n        <tr>\n          <td><img src={iconUrl} title={iconTitle} alt={iconTitle} width=\"24\" /></td>\n          <td>{this.renderRepoName()}</td>\n          <td>{this.getOwnerLink()}</td>\n          <td>{Utils.bytesToSize(item.size)}</td>\n          <td>{moment(item.last_modify).fromNow()}</td>\n        </tr>\n      </Fragment>\n    );\n  }\n}\n\nclass Repos extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      userInfo: {},\n      repoList: []\n    };\n  }\n\n  componentDidMount () {\n    seafileAPI.sysAdminGetUser(this.props.email).then((res) => {\n      this.setState({\n        userInfo: res.data\n      });\n    });\n    seafileAPI.sysAdminListShareInRepos(this.props.email).then(res => {\n      this.setState({\n        loading: false,\n        repoList: res.data.repo_list\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  render() {\n    return (\n      <Fragment>\n        <MainPanelTopbar />\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <Nav currentItem=\"shared-repos\" email={this.props.email} userName={this.state.userInfo.name} />\n            <div className=\"cur-view-content\">\n              <Content\n                loading={this.state.loading}\n                errorMsg={this.state.errorMsg}\n                items={this.state.repoList}\n              />\n            </div>\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nexport default Repos;\n","import React, { Component, Fragment } from 'react';\nimport { Utils } from '../../../utils/utils';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { gettext } from '../../../utils/constants';\nimport toaster from '../../../components/toast';\nimport EmptyTip from '../../../components/empty-tip';\nimport Loading from '../../../components/loading';\nimport OpMenu from '../../../components/dialog/op-menu';\nimport LinkDialog from '../../../components/dialog/share-admin-link';\nimport MainPanelTopbar from '../main-panel-topbar';\nimport Nav from './user-nav';\n\nclass Content extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isItemFreezed: false\n    };\n  }\n\n  onFreezedItem = () => {\n    this.setState({isItemFreezed: true});\n  }\n\n  onUnfreezedItem = () => {\n    this.setState({isItemFreezed: false});\n  }\n\n  render() {\n    const { loading, errorMsg, items } = this.props;\n    if (loading) {\n      return <Loading />;\n    } else if (errorMsg) {\n      return <p className=\"error text-center mt-4\">{errorMsg}</p>;\n    } else {\n      const emptyTip = (\n        <EmptyTip>\n          <h2>{gettext('No shared links')}</h2>\n        </EmptyTip>\n      );\n      const table = (\n        <Fragment>\n          <table>\n            <thead>\n              <tr>\n                <th width=\"5%\">{/* icon */}</th>\n                <th width=\"30%\">{gettext('Name')}</th>\n                <th width=\"20%\">{gettext('Size')}</th>\n                <th width=\"20%\">{gettext('Type')}</th>\n                <th width=\"20%\">{gettext('Visits')}</th>\n                <th width=\"5%\">{/* Operations */}</th>\n              </tr>\n            </thead>\n            <tbody>\n              {items.map((item, index) => {\n                return (<Item\n                  key={index}\n                  item={item}\n                  isItemFreezed={this.state.isItemFreezed}\n                  onFreezedItem={this.onFreezedItem}\n                  onUnfreezedItem={this.onUnfreezedItem}\n                  deleteItem={this.props.deleteItem}\n                />);\n              })}\n            </tbody>\n          </table>\n        </Fragment>\n      );\n      return items.length ? table : emptyTip;\n    }\n  }\n}\n\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOpIconShown: false,\n      highlight: false,\n      isLinkDialogOpen: false\n    };\n  }\n\n  handleMouseEnter = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        isOpIconShown: true,\n        highlight: true\n      });\n    }\n  }\n\n  handleMouseLeave = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        isOpIconShown: false,\n        highlight: false\n      });\n    }\n  }\n\n  onUnfreezedItem = () => {\n    this.setState({\n      highlight: false,\n      isOpIconShow: false\n    });\n    this.props.onUnfreezedItem();\n  }\n\n  toggleLinkDialog = () => {\n    this.setState({isLinkDialogOpen: !this.state.isLinkDialogOpen});\n  }\n\n  deleteItem = () => {\n    this.props.deleteItem(this.props.item);\n  }\n\n  translateOperations = (item) => {\n    let translateResult = '';\n    switch (item) {\n      case 'View':\n        translateResult = gettext('View');\n        break;\n      case 'Delete':\n        translateResult = gettext('Delete');\n        break;\n    }\n\n    return translateResult;\n  }\n\n  onMenuItemClick = (operation) => {\n    switch(operation) {\n      case 'View':\n        this.toggleLinkDialog();\n        break;\n      case 'Delete':\n        this.deleteItem();\n        break;\n    }\n  }\n\n  getRoleText = () => {\n    let roleText;\n    const { item } = this.props;\n    switch(item.role) {\n      case 'Owner':\n        roleText = gettext('Owner');\n        break;\n      case 'Admin':\n        roleText = gettext('Admin');\n        break;\n      case 'Member':\n        roleText = gettext('Member');\n        break;\n    }\n    return roleText;\n  }\n\n  getIconUrl = () => {\n    const { item } = this.props;\n    let url;\n    if (item.type == 'upload') {\n      url = Utils.getFolderIconUrl();\n    } else { // share link\n      if (item.is_dir) {\n        url = Utils.getFolderIconUrl();\n      } else {\n        url = Utils.getFileIconUrl(item.obj_name);\n      }\n    }\n    return url;\n  }\n\n  render() {\n    const { item } = this.props;\n    const { isOpIconShown, isLinkDialogOpen } = this.state;\n\n    return (\n      <Fragment>\n        <tr className={this.state.highlight ? 'tr-highlight' : ''} onMouseEnter={this.handleMouseEnter} onMouseLeave={this.handleMouseLeave}>\n          <td><img src={this.getIconUrl()} alt=\"\" width=\"24\" /></td>\n          <td>{item.obj_name == '/' ? item.repo_name : item.obj_name}</td>\n          {item.type == 'upload' ?\n            <Fragment>\n              <td></td>\n              <td>{gettext('Upload')}</td>\n            </Fragment> :\n            <Fragment>\n              <td>{item.is_dir ? null : Utils.bytesToSize(item.size)}</td>\n              <td>{gettext('Download')}</td>\n            </Fragment>\n          }\n          <td>{item.view_cnt}</td>\n          <td>\n            {isOpIconShown &&\n            <OpMenu\n              operations={['View', 'Delete']}\n              translateOperations={this.translateOperations}\n              onMenuItemClick={this.onMenuItemClick}\n              onFreezedItem={this.props.onFreezedItem}\n              onUnfreezedItem={this.onUnfreezedItem}\n            />\n            }\n          </td>\n        </tr>\n        {isLinkDialogOpen &&\n          <LinkDialog\n            link={item.link}\n            toggleDialog={this.toggleLinkDialog}\n          />\n        }\n      </Fragment>\n    );\n  }\n}\n\nclass Links extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      userInfo: {},\n      uploadLinkItems: [],\n      shareLinkItems: []\n    };\n  }\n\n  componentDidMount () {\n    seafileAPI.sysAdminGetUser(this.props.email).then((res) => {\n      this.setState({\n        userInfo: res.data\n      });\n    });\n\n    seafileAPI.sysAdminListShareLinksByUser(this.props.email).then(res => {\n      const items = res.data.share_link_list.map(item => {\n        item.type = 'download';\n        return item;\n      });\n      items.sort((a, b) => {\n        return a.is_dir ? -1 : 1;\n      });\n      this.setState({\n        loading: false,\n        shareLinkItems: items\n      });\n    });\n    seafileAPI.sysAdminListUploadLinksByUser(this.props.email).then(res => {\n      const items = res.data.upload_link_list.map(item => {\n        item.type = 'upload';\n        return item;\n      });\n      this.setState({\n        loading: false,\n        uploadLinkItems: items\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  deleteItem = (item) => {\n    const type = item.type;\n    const token = item.token;\n    if (type == 'download') {\n      seafileAPI.sysAdminDeleteShareLink(token).then(res => {\n        let items = this.state.shareLinkItems.filter(item=> {\n          return item.token != token;\n        });\n        this.setState({\n          shareLinkItems: items\n        });\n        toaster.success(gettext('Successfully deleted 1 item.'));\n      }).catch((error) => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    } else {\n      seafileAPI.sysAdminDeleteUploadLink(token).then(res => {\n        let items = this.state.uploadLinkItems.filter(item=> {\n          return item.token != token;\n        });\n        this.setState({\n          uploadLinkItems: items\n        });\n        toaster.success(gettext('Successfully deleted 1 item.'));\n      }).catch((error) => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    }\n  }\n\n  render() {\n    const { shareLinkItems, uploadLinkItems } = this.state;\n    return (\n      <Fragment>\n        <MainPanelTopbar />\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <Nav currentItem=\"links\" email={this.props.email} userName={this.state.userInfo.name} />\n            <div className=\"cur-view-content\">\n              <Content\n                loading={this.state.loading}\n                errorMsg={this.state.errorMsg}\n                items={[].concat(uploadLinkItems, shareLinkItems)}\n                deleteItem={this.deleteItem}\n              />\n            </div>\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nexport default Links;\n","import React, { Component, Fragment } from 'react';\nimport { Link } from '@reach/router';\nimport moment from 'moment';\nimport { Utils } from '../../../utils/utils';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { siteRoot, gettext } from '../../../utils/constants';\nimport toaster from '../../../components/toast';\nimport EmptyTip from '../../../components/empty-tip';\nimport Loading from '../../../components/loading';\nimport OpMenu from '../../../components/dialog/op-menu';\nimport CommonOperationConfirmationDialog from '../../../components/dialog/common-operation-confirmation-dialog';\nimport MainPanelTopbar from '../main-panel-topbar';\nimport Nav from './user-nav';\n\nclass Content extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isItemFreezed: false\n    };\n  }\n\n  onFreezedItem = () => {\n    this.setState({isItemFreezed: true});\n  }\n\n  onUnfreezedItem = () => {\n    this.setState({isItemFreezed: false});\n  }\n\n  render() {\n    const { loading, errorMsg, items } = this.props;\n    if (loading) {\n      return <Loading />;\n    } else if (errorMsg) {\n      return <p className=\"error text-center mt-4\">{errorMsg}</p>;\n    } else {\n      const emptyTip = (\n        <EmptyTip>\n          <h2>{gettext('No groups')}</h2>\n        </EmptyTip>\n      );\n      const table = (\n        <Fragment>\n          <table>\n            <thead>\n              <tr>\n                <th width=\"35%\">{gettext('Name')}</th>\n                <th width=\"30%\">{gettext('Role')}</th>\n                <th width=\"30%\">{gettext('Created At')}</th>\n                <th width=\"5%\">{/* Operations */}</th>\n              </tr>\n            </thead>\n            <tbody>\n              {items.map((item, index) => {\n                return (<Item\n                  key={index}\n                  item={item}\n                  isItemFreezed={this.state.isItemFreezed}\n                  onFreezedItem={this.onFreezedItem}\n                  onUnfreezedItem={this.onUnfreezedItem}\n                  deleteItem={this.props.deleteItem}\n                />);\n              })}\n            </tbody>\n          </table>\n        </Fragment>\n      );\n      return items.length ? table : emptyTip;\n    }\n  }\n}\n\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOpIconShown: false,\n      highlight: false,\n      isDeleteDialogOpen: false\n    };\n  }\n\n  handleMouseEnter = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        isOpIconShown: true,\n        highlight: true\n      });\n    }\n  }\n\n  handleMouseLeave = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        isOpIconShown: false,\n        highlight: false\n      });\n    }\n  }\n\n  onUnfreezedItem = () => {\n    this.setState({\n      highlight: false,\n      isOpIconShow: false\n    });\n    this.props.onUnfreezedItem();\n  }\n\n  toggleDeleteDialog = () => {\n    this.setState({isDeleteDialogOpen: !this.state.isDeleteDialogOpen});\n  }\n\n  deleteItem = () => {\n    this.props.deleteItem(this.props.item.id);\n  }\n\n  translateOperations = (item) => {\n    let translateResult = '';\n    switch (item) {\n      case 'Delete':\n        translateResult = gettext('Delete');\n        break;\n    }\n\n    return translateResult;\n  }\n\n  onMenuItemClick = (operation) => {\n    switch(operation) {\n      case 'Delete':\n        this.toggleDeleteDialog();\n        break;\n    }\n  }\n\n  getRoleText = () => {\n    let roleText;\n    const { item } = this.props;\n    switch(item.role) {\n      case 'Owner':\n        roleText = gettext('Owner');\n        break;\n      case 'Admin':\n        roleText = gettext('Admin');\n        break;\n      case 'Member':\n        roleText = gettext('Member');\n        break;\n    }\n    return roleText;\n  }\n\n  render() {\n    const { item } = this.props;\n    const { isOpIconShown, isDeleteDialogOpen } = this.state;\n\n    const itemName = '<span class=\"op-target\">' + Utils.HTMLescape(item.name) + '</span>';\n    const deleteDialogMsg = gettext('Are you sure you want to delete {placeholder} ?').replace('{placeholder}', itemName);\n\n    const url = item.parent_group_id == 0 ?\n      `${siteRoot}sys/groups/${item.id}/libraries/` :\n      `${siteRoot}sys/departments/${item.id}/`;\n\n    return (\n      <Fragment>\n        <tr className={this.state.highlight ? 'tr-highlight' : ''} onMouseEnter={this.handleMouseEnter} onMouseLeave={this.handleMouseLeave}>\n          <td><Link to={url}>{item.name}</Link></td>\n          <td>{this.getRoleText()}</td>\n          <td>{moment(item.created_at).format('YYYY-MM-DD HH:mm')}</td>\n          <td>\n            {(isOpIconShown && item.parent_group_id == 0) &&\n            <OpMenu\n              operations={['Delete']}\n              translateOperations={this.translateOperations}\n              onMenuItemClick={this.onMenuItemClick}\n              onFreezedItem={this.props.onFreezedItem}\n              onUnfreezedItem={this.onUnfreezedItem}\n            />\n            }\n          </td>\n        </tr>\n        {isDeleteDialogOpen &&\n          <CommonOperationConfirmationDialog\n            title={gettext('Delete Group')}\n            message={deleteDialogMsg}\n            executeOperation={this.deleteItem}\n            confirmBtnText={gettext('Delete')}\n            toggleDialog={this.toggleDeleteDialog}\n          />\n        }\n      </Fragment>\n    );\n  }\n}\n\nclass Groups extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      userInfo: {},\n      items: []\n    };\n  }\n\n  componentDidMount () {\n    seafileAPI.sysAdminGetUser(this.props.email).then((res) => {\n      this.setState({\n        userInfo: res.data\n      });\n    });\n    seafileAPI.sysAdminListGroupsJoinedByUser(this.props.email).then(res => {\n      this.setState({\n        loading: false,\n        items: res.data.group_list\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  deleteItem = (groupID) => {\n    seafileAPI.sysAdminDismissGroupByID(groupID).then(res => {\n      let items = this.state.items.filter(item => {\n        return item.id != groupID;\n      });\n      this.setState({items: items});\n      toaster.success(gettext('Successfully deleted 1 item.'));\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  render() {\n    return (\n      <Fragment>\n        <MainPanelTopbar />\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <Nav currentItem=\"groups\" email={this.props.email} userName={this.state.userInfo.name} />\n            <div className=\"cur-view-content\">\n              <Content\n                loading={this.state.loading}\n                errorMsg={this.state.errorMsg}\n                items={this.state.items}\n                deleteItem={this.deleteItem}\n              />\n            </div>\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nexport default Groups;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Modal, ModalHeader, Input, ModalBody, ModalFooter, Form, FormGroup, Label, Alert } from 'reactstrap';\nimport { gettext } from '../../../utils/constants';\nimport UserSelect from '../../user-select';\n\n\nconst propTypes = {\n  createRepo: PropTypes.func.isRequired,\n  toggleDialog: PropTypes.func.isRequired,\n};\n\nclass SysAdminCreateRepoDialog extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      repoName: '',\n      ownerEmail: '',\n      errMessage: '',\n      isSubmitBtnActive: false\n    };\n    this.newInput = React.createRef();\n  }\n\n  handleRepoNameChange = (e) => {\n    const value = e.target.value;\n    this.setState({\n      repoName: value,\n      isSubmitBtnActive: value.trim()\n    });\n  }\n\n  handleSubmit = () => {\n    const { repoName, ownerEmail } = this.state;\n    this.props.createRepo(repoName.trim(), ownerEmail);\n    this.toggle();\n  }\n\n  handleSelectChange = (option) => {\n    // option can be null\n    this.setState({\n      ownerEmail: option ? option.email : ''\n    });\n  }\n\n  handleKeyPress = (e) => {\n    if (e.key === 'Enter') {\n      this.handleSubmit();\n      e.preventDefault();\n    }\n  }\n\n  toggle = () => {\n    this.props.toggleDialog();\n  }\n\n  componentDidMount() {\n    this.newInput.focus();\n  }\n\n  render() {\n    return (\n      <Modal isOpen={true} toggle={this.toggle}>\n        <ModalHeader toggle={this.toggle}>{gettext('New Library')}</ModalHeader>\n        <ModalBody>\n          <Form>\n            <FormGroup>\n              <Label for=\"repoName\">{gettext('Name')}</Label>\n              <Input\n                id=\"repoName\"\n                onKeyPress={this.handleKeyPress}\n                innerRef={input => {this.newInput = input;}}\n                value={this.state.repoName}\n                onChange={this.handleRepoNameChange}\n              />\n            </FormGroup>\n            <FormGroup>\n              <Label for=\"userSelect\">\n                {gettext('Owner')}\n                <span className=\"small text-secondary\">{gettext('(If left blank, owner will be admin)')}</span>\n              </Label>\n              <UserSelect\n                id=\"userSelect\"\n                isMulti={false}\n                className=\"reviewer-select\"\n                placeholder={gettext('Select a user')}\n                onSelectChange={this.handleSelectChange}\n              />\n            </FormGroup>\n          </Form>\n          {this.state.errMessage && <Alert color=\"danger\">{this.state.errMessage}</Alert>}\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.toggle}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.handleSubmit} disabled={!this.state.isSubmitBtnActive}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nSysAdminCreateRepoDialog.propTypes = propTypes;\n\nexport default SysAdminCreateRepoDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Link } from '@reach/router';\nimport { siteRoot, gettext } from '../../../utils/constants';\n\nconst propTypes = {\n  currentItem: PropTypes.string.isRequired\n};\n\nclass Nav extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.navItems = [\n      {name: 'all', urlPart: 'all-libraries', text: gettext('All')},\n      {name: 'system', urlPart: 'system-library', text: gettext('System')},\n      {name: 'trash', urlPart: 'trash-libraries', text: gettext('Trash')}\n    ];\n  }\n\n  render() {\n    const { currentItem } = this.props;\n    return (\n      <div className=\"cur-view-path tab-nav-container\">\n        <ul className=\"nav\">\n          {this.navItems.map((item, index) => {\n            return (\n              <li className=\"nav-item\" key={index}>\n                <Link to={`${siteRoot}sys/${item.urlPart}/`} className={`nav-link${currentItem == item.name ? ' active' : ''}`}>{item.text}</Link>\n              </li>\n            );\n          })}\n        </ul>\n      </div>\n    );\n  }\n}\n\nNav.propTypes = propTypes;\n\nexport default Nav;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { isPro, gettext, siteRoot } from '../../../utils/constants';\nimport { Button } from 'reactstrap';\nimport { seafileAPI } from '../../../utils/seafile-api.js';\nimport { Utils } from '../../../utils/utils';\nimport toaster from '../../toast';\nimport UserSelect from '../../user-select';\nimport SharePermissionEditor from '../../select-editor/share-permission-editor';\n\nclass UserItem extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOperationShow: false\n    };\n  }\n\n  onMouseEnter = () => {\n    this.setState({isOperationShow: true});\n  }\n\n  onMouseLeave = () => {\n    this.setState({isOperationShow: false});\n  }\n\n  deleteShareItem = () => {\n    let item = this.props.item;\n    this.props.deleteShareItem(item.user_email);\n  }\n\n  onChangeUserPermission = (permission) => {\n    let item = this.props.item;\n    this.props.onChangeUserPermission(item, permission);\n  }\n\n  render() {\n    let item = this.props.item;\n    let currentPermission = item.is_admin ? 'admin' : item.permission;\n    return (\n      <tr onMouseEnter={this.onMouseEnter} onMouseLeave={this.onMouseLeave}>\n        <td className=\"name\">{item.user_name}</td>\n        <td>\n          <SharePermissionEditor\n            isTextMode={true}\n            isEditIconShow={this.state.isOperationShow}\n            currentPermission={currentPermission}\n            permissions={this.props.permissions}\n            onPermissionChanged={this.onChangeUserPermission}\n          />\n        </td>\n        <td>\n          <span\n            className={`sf2-icon-x3 action-icon ${this.state.isOperationShow ? '' : 'hide'}`}\n            onClick={this.deleteShareItem}\n            title={gettext('Delete')}\n          >\n          </span>\n        </td>\n      </tr>\n    );\n  }\n}\n\nclass UserList extends React.Component {\n\n  render() {\n    let items = this.props.items;\n    return (\n      <tbody>\n        {items.map((item, index) => {\n          return (\n            <UserItem\n              key={index}\n              item={item}\n              permissions={this.props.permissions}\n              deleteShareItem={this.props.deleteShareItem}\n              onChangeUserPermission={this.props.onChangeUserPermission}\n            />\n          );\n        })}\n      </tbody>\n    );\n  }\n}\n\nconst propTypes = {\n  isGroupOwnedRepo: PropTypes.bool,\n  itemPath: PropTypes.string.isRequired,\n  itemType: PropTypes.string.isRequired,\n  repoID: PropTypes.string.isRequired\n};\n\nclass SysAdminShareToUser extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      selectedOption: null,\n      errorMsg: [],\n      permission: 'rw',\n      sharedItems: []\n    };\n    this.options = [];\n    this.permissions = ['rw', 'r'];\n    if (isPro) {\n      this.permissions.push('admin', 'cloud-edit', 'preview');\n    }\n  }\n\n  handleSelectChange = (option) => {\n    this.setState({selectedOption: option});\n    this.options = [];\n  }\n\n  componentDidMount() {\n    let repoID = this.props.repoID;\n    seafileAPI.sysAdminListRepoSharedItems(repoID, 'user').then((res) => {\n      if(res.data.length !== 0) {\n        this.setState({sharedItems: res.data});\n      }\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  setPermission = (permission) => {\n    this.setState({permission: permission});\n  }\n\n  shareToUser = () => {\n    let users = [];\n    let repoID = this.props.repoID;\n    if (this.state.selectedOption && this.state.selectedOption.length > 0 ) {\n      for (let i = 0; i < this.state.selectedOption.length; i ++) {\n        users[i] = this.state.selectedOption[i].email;\n      }\n    }\n    seafileAPI.sysAdminAddRepoSharedItem(repoID, 'user' , users, this.state.permission).then(res => {\n      let errorMsg = [];\n      if (res.data.failed.length > 0) {\n        for (let i = 0 ; i < res.data.failed.length ; i++) {\n          errorMsg[i] = res.data.failed[i];\n        }\n      }\n      let newItems = res.data.success;\n      this.setState({\n        errorMsg: errorMsg,\n        sharedItems: this.state.sharedItems.concat(newItems),\n        selectedOption: null,\n        permission: 'rw',\n      });\n      this.refs.userSelect.clearSelect();\n    }).catch(error => {\n      if (error.response) {\n        let message = gettext('Library can not be shared to owner.');\n        let errMessage = [];\n        errMessage.push(message);\n        this.setState({\n          errorMsg: errMessage,\n          selectedOption: null,\n        });\n      }\n    });\n  }\n\n  deleteShareItem = (useremail) => {\n    let repoID = this.props.repoID;\n    seafileAPI.sysAdminDeleteRepoSharedItem(repoID, 'user', useremail).then(res => {\n      this.setState({\n        sharedItems: this.state.sharedItems.filter( item => { return item.user_email !== useremail; })\n      });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  onChangeUserPermission = (item, permission) => {\n    let repoID = this.props.repoID;\n    let userEmail = item.user_email;\n    seafileAPI.sysAdminUpdateRepoSharedItemPermission(repoID, 'user', userEmail, permission).then(() => {\n      this.updateSharedItems(item, permission);\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  updateSharedItems = (item, permission) => {\n    let username = item.user_name;\n    let sharedItems = this.state.sharedItems.map(sharedItem => {\n      let sharedItemUsername = sharedItem.user_name;\n      if (username === sharedItemUsername) {\n        sharedItem.permission = permission;\n        sharedItem.is_admin = permission === 'admin' ? true : false;\n      }\n      return sharedItem;\n    });\n    this.setState({sharedItems: sharedItems});\n  }\n\n  render() {\n    let { sharedItems } = this.state;\n    return (\n      <Fragment>\n        <table>\n          <thead>\n            <tr>\n              <th width=\"50%\">{gettext('User')}</th>\n              <th width=\"35%\">{gettext('Permission')}</th>\n              <th width=\"15%\"></th>\n            </tr>\n          </thead>\n          <tbody>\n            <tr>\n              <td>\n                <UserSelect\n                  ref=\"userSelect\"\n                  isMulti={true}\n                  className=\"reviewer-select\"\n                  placeholder={gettext('Search users...')}\n                  onSelectChange={this.handleSelectChange}\n                />\n              </td>\n              <td>\n                <SharePermissionEditor\n                  isTextMode={false}\n                  isEditIconShow={false}\n                  currentPermission={this.state.permission}\n                  permissions={this.permissions}\n                  onPermissionChanged={this.setPermission}\n                />\n              </td>\n              <td>\n                <Button onClick={this.shareToUser}>{gettext('Submit')}</Button>\n              </td>\n            </tr>\n            {this.state.errorMsg.length > 0 &&\n              this.state.errorMsg.map((item, index) => {\n                let errMessage = '';\n                if (item.email) {\n                  errMessage = item.email + ': ' + item.error_msg;\n                } else {\n                  errMessage = item;\n                }\n                return (\n                  <tr key={index}>\n                    <td colSpan={3}><p className=\"error\">{errMessage}</p></td>\n                  </tr>\n                );\n              })\n            }\n          </tbody>\n        </table>\n        <div className=\"share-list-container\">\n          <table className=\"table-thead-hidden\">\n            <thead>\n              <tr>\n                <th width=\"50%\">{gettext('User')}</th>\n                <th width=\"35%\">{gettext('Permission')}</th>\n                <th width=\"15%\"></th>\n              </tr>\n            </thead>\n            <UserList\n              items={sharedItems}\n              permissions={this.permissions}\n              deleteShareItem={this.deleteShareItem}\n              onChangeUserPermission={this.onChangeUserPermission}\n            />\n          </table>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nSysAdminShareToUser.propTypes = propTypes;\n\nexport default SysAdminShareToUser;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Button } from 'reactstrap';\nimport Select from 'react-select';\nimport makeAnimated from 'react-select/lib/animated';\nimport { isPro, gettext } from '../../../utils/constants';\nimport { seafileAPI } from '../../../utils/seafile-api.js';\nimport { Utils } from '../../../utils/utils';\nimport toaster from '../../toast';\nimport SharePermissionEditor from '../../select-editor/share-permission-editor';\n\nclass GroupItem extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOperationShow: false\n    };\n  }\n\n  onMouseEnter = () => {\n    this.setState({isOperationShow: true});\n  }\n\n  onMouseLeave = () => {\n    this.setState({isOperationShow: false});\n  }\n\n  deleteShareItem = () => {\n    let item = this.props.item;\n    this.props.deleteShareItem(item.group_id);\n  }\n\n  onChangeUserPermission = (permission) => {\n    let item = this.props.item;\n    this.props.onChangeUserPermission(item, permission);\n  }\n\n  render() {\n    let item = this.props.item;\n    let currentPermission = item.is_admin ? 'admin' : item.permission;\n    return (\n      <tr onMouseEnter={this.onMouseEnter} onMouseLeave={this.onMouseLeave}>\n        <td className='name'>{item.group_name}</td>\n        <td>\n          <SharePermissionEditor\n            isTextMode={true}\n            isEditIconShow={this.state.isOperationShow}\n            currentPermission={currentPermission}\n            permissions={this.props.permissions}\n            onPermissionChanged={this.onChangeUserPermission}\n          />\n        </td>\n        <td>\n          <span\n            className={`sf2-icon-x3 action-icon ${this.state.isOperationShow ? '' : 'hide'}`}\n            onClick={this.deleteShareItem}\n            title={gettext('Delete')}\n          >\n          </span>\n        </td>\n      </tr>\n    );\n  }\n}\n\nclass GroupList extends React.Component {\n\n  render() {\n    let items = this.props.items;\n    return (\n      <tbody>\n        {items.map((item, index) => {\n          return (\n            <GroupItem\n              key={index}\n              item={item}\n              permissions={this.props.permissions}\n              deleteShareItem={this.props.deleteShareItem}\n              onChangeUserPermission={this.props.onChangeUserPermission}\n            />\n          );\n        })}\n      </tbody>\n    );\n  }\n}\n\nconst propTypes = {\n  isGroupOwnedRepo: PropTypes.bool,\n  itemPath: PropTypes.string.isRequired,\n  itemType: PropTypes.string.isRequired,\n  repoID: PropTypes.string.isRequired,\n  isRepoOwner: PropTypes.bool.isRequired,\n};\n\nconst NoOptionsMessage = (props) => {\n  return (\n    <div {...props.innerProps} style={{margin: '6px 10px', textAlign: 'center', color: 'hsl(0,0%,50%)'}}>{gettext('Group not found')}</div>\n  );\n};\n\nclass SysAdminShareToGroup extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      selectedOption: null,\n      errorMsg: [],\n      permission: 'rw',\n      sharedItems: []\n    };\n    this.options = [];\n    this.permissions = ['rw', 'r'];\n    if (isPro) {\n      this.permissions.push('admin', 'cloud-edit', 'preview');\n    }\n  }\n\n  handleSelectChange = (option) => {\n    this.setState({selectedOption: option});\n  }\n\n  componentDidMount() {\n    this.loadOptions();\n    this.listSharedGroups();\n  }\n\n  loadOptions = () => {\n    seafileAPI.shareableGroups().then((res) => {\n      this.options = [];\n      for (let i = 0 ; i < res.data.length; i++) {\n        let obj = {};\n        obj.value = res.data[i].name;\n        obj.id = res.data[i].id;\n        obj.label = res.data[i].name;\n        this.options.push(obj);\n      }\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  listSharedGroups = () => {\n    let repoID = this.props.repoID;\n    seafileAPI.sysAdminListRepoSharedItems(repoID, 'group').then((res) => {\n      if(res.data.length !== 0) {\n        this.setState({\n          sharedItems: res.data\n        });\n      }\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  setPermission = (permission) => {\n    this.setState({permission: permission});\n  }\n\n  shareToGroup = () => {\n    let groups = [];\n    let repoID = this.props.repoID;\n    if (this.state.selectedOption && this.state.selectedOption.length > 0 ) {\n      for (let i = 0; i < this.state.selectedOption.length; i ++) {\n        groups[i] = this.state.selectedOption[i].id;\n      }\n    }\n    seafileAPI.sysAdminAddRepoSharedItem(repoID, 'group', groups, this.state.permission).then(res => {\n      let errorMsg = [];\n      if (res.data.failed.length > 0) {\n        for (let i = 0 ; i < res.data.failed.length ; i++) {\n          errorMsg[i] = res.data.failed[i];\n        }\n      }\n      let items = res.data.success;\n      this.setState({\n        errorMsg: errorMsg,\n        sharedItems: this.state.sharedItems.concat(items),\n        selectedOption: null,\n        permission: 'rw',\n      });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  deleteShareItem = (groupID) => {\n    let repoID = this.props.repoID;\n    seafileAPI.sysAdminDeleteRepoSharedItem(repoID, 'group', groupID).then(() => {\n      this.setState({\n        sharedItems: this.state.sharedItems.filter(item => { return item.group_id !== groupID; })\n      });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  onChangeUserPermission = (item, permission) => {\n    let repoID = this.props.repoID;\n    let groupID = item.group_id;\n    seafileAPI.sysAdminUpdateRepoSharedItemPermission(repoID, 'group', groupID, permission).then(() => {\n      this.updateSharedItems(item, permission);\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  updateSharedItems = (item, permission) => {\n    let groupID = item.group_id;\n    let sharedItems = this.state.sharedItems.map(sharedItem => {\n      let sharedItemGroupID = sharedItem.group_id;\n      if (groupID === sharedItemGroupID) {\n        sharedItem.permission = permission;\n        sharedItem.is_admin = permission === 'admin' ? true : false;\n      }\n      return sharedItem;\n    });\n    this.setState({sharedItems: sharedItems});\n  }\n\n  render() {\n    return (\n      <Fragment>\n        <table>\n          <thead>\n            <tr>\n              <th width=\"50%\">{gettext('Group')}</th>\n              <th width=\"35%\">{gettext('Permission')}</th>\n              <th width=\"15%\"></th>\n            </tr>\n          </thead>\n          <tbody>\n            <tr>\n              <td>\n                <Select\n                  isMulti\n                  onChange={this.handleSelectChange}\n                  options={this.options}\n                  placeholder={gettext('Select groups...')}\n                  components={makeAnimated()}\n                  maxMenuHeight={200}\n                  inputId={'react-select-2-input'}\n                  value={this.state.selectedOption}\n                  components={{ NoOptionsMessage }}\n                />\n              </td>\n              <td>\n                <SharePermissionEditor\n                  isTextMode={false}\n                  isEditIconShow={false}\n                  currentPermission={this.state.permission}\n                  permissions={this.permissions}\n                  onPermissionChanged={this.setPermission}\n                />\n              </td>\n              <td>\n                <Button onClick={this.shareToGroup}>{gettext('Submit')}</Button>\n              </td>\n            </tr>\n            {this.state.errorMsg.length > 0 &&\n              this.state.errorMsg.map((item, index) => {\n                let errMessage = item.group_name + ': ' + item.error_msg;\n                return (\n                  <tr key={index}>\n                    <td colSpan={3}><p className=\"error\">{errMessage}</p></td>\n                  </tr>\n                );\n              })\n            }\n          </tbody>\n        </table>\n        <div className=\"share-list-container\">\n          <table className=\"table-thead-hidden\">\n            <thead>\n              <tr>\n                <th width=\"50%\">{gettext('Group')}</th>\n                <th width=\"35%\">{gettext('Permission')}</th>\n                <th width=\"15%\"></th>\n              </tr>\n            </thead>\n            <GroupList\n              items={this.state.sharedItems}\n              permissions={this.permissions}\n              deleteShareItem={this.deleteShareItem}\n              onChangeUserPermission={this.onChangeUserPermission}\n            />\n          </table>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nSysAdminShareToGroup.propTypes = propTypes;\n\nexport default SysAdminShareToGroup;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Modal, ModalHeader, ModalBody, TabContent, TabPane, Nav, NavItem, NavLink } from 'reactstrap';\nimport { gettext } from '../../../utils/constants';\nimport SysAdminShareToUser from './sysadmin-share-to-user';\nimport SysAdminShareToGroup from './sysadmin-share-to-group';\nimport '../../../css/share-link-dialog.css';\n\nconst propTypes = {\n  itemName: PropTypes.string.isRequired,\n  itemPath: PropTypes.string.isRequired,\n  toggleDialog: PropTypes.func.isRequired,\n  repoID: PropTypes.string.isRequired,\n  isGroupOwnedRepo: PropTypes.bool.isRequired,\n  repoEncrypted: PropTypes.bool,\n  userPerm: PropTypes.string,\n  enableDirPrivateShare: PropTypes.bool\n};\n\nclass SysAdminShareDialog extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      activeTab: this.getInitialActiveTab(),\n      isRepoOwner: false\n    };\n  }\n\n  getInitialActiveTab = () => {\n    return 'shareToUser';\n  }\n\n  toggle = (tab) => {\n    if (this.state.activeTab !== tab) {\n      this.setState({activeTab: tab});\n    }\n  }\n\n  renderDirContent = () => {\n    let activeTab = this.state.activeTab;\n    const { enableDirPrivateShare, isGroupOwnedRepo } = this.props;\n    return (\n      <Fragment>\n        <div className=\"share-dialog-side\">\n          <Nav pills>\n            {enableDirPrivateShare &&\n              <Fragment>\n                <NavItem>\n                  <NavLink className={activeTab === 'shareToUser' ? 'active' : ''} onClick={this.toggle.bind(this, 'shareToUser')}>\n                    {gettext('Share to user')}\n                  </NavLink>\n                </NavItem>\n                <NavItem>\n                  <NavLink className={activeTab === 'shareToGroup' ? 'active' : ''} onClick={this.toggle.bind(this, 'shareToGroup')}>\n                    {gettext('Share to group')}\n                  </NavLink>\n                </NavItem>\n              </Fragment>\n            }\n          </Nav>\n        </div>\n        <div className=\"share-dialog-main\">\n          <TabContent activeTab={this.state.activeTab}>\n            {enableDirPrivateShare &&\n              <Fragment>\n                <TabPane tabId=\"shareToUser\">\n                  <SysAdminShareToUser itemType={'library'} isGroupOwnedRepo={isGroupOwnedRepo} itemPath={this.props.itemPath} repoID={this.props.repoID} isRepoOwner={this.state.isRepoOwner}/>\n                </TabPane>\n                <TabPane tabId=\"shareToGroup\">\n                  <SysAdminShareToGroup itemType={'library'} isGroupOwnedRepo={isGroupOwnedRepo} itemPath={this.props.itemPath} repoID={this.props.repoID} isRepoOwner={this.state.isRepoOwner}/>\n                </TabPane>\n              </Fragment>\n            }\n          </TabContent>\n        </div>\n      </Fragment>\n    );\n  }\n\n  render() {\n    return (\n      <div>\n        <Modal isOpen={true} style={{maxWidth: '720px'}} className=\"share-dialog\" toggle={this.props.toggleDialog}>\n          <ModalHeader toggle={this.props.toggleDialog}>{gettext('Share')} <span className=\"op-target\" title={this.props.itemName}>{this.props.itemName}</span></ModalHeader>\n          <ModalBody className=\"share-dialog-content\">\n            {this.renderDirContent()}\n          </ModalBody>\n        </Modal>\n      </div>\n    );\n  }\n}\n\nSysAdminShareDialog.propTypes = propTypes;\n\nexport default SysAdminShareDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter, Form, FormGroup, Label, Input, Alert } from 'reactstrap';\nimport { gettext } from '../../../utils/constants';\nimport { seafileAPI } from '../../../utils/seafile-api.js';\nimport { Utils } from '../../../utils/utils';\nimport toaster from '../../toast';\n\nconst propTypes = {\n  itemName: PropTypes.string.isRequired,\n  toggleDialog: PropTypes.func.isRequired,\n  repoID: PropTypes.string.isRequired,\n};\n\nclass SysAdminLibHistorySettingDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      keepDays: -1,\n      expireDays: 30,\n      disabled: true,\n      allHistory: true,\n      noHistory: false,\n      autoHistory: false,\n      errorInfo: ''\n    };\n  }\n\n  componentDidMount() {\n    seafileAPI.sysAdminGetRepoHistorySetting(this.props.repoID).then(res => {\n      this.setState({\n        keepDays: res.data.keep_days,\n        allHistory: res.data.keep_days < 0 ? true : false,\n        noHistory: res.data.keep_days === 0 ? true : false,\n        autoHistory: res.data.keep_days > 0 ? true : false,\n        disabled: res.data.keep_days > 0 ? false : true,\n        expireDays: res.data.keep_days > 0 ? res.data.keep_days : 30,\n      });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  submit = () => {\n    let days = this.state.keepDays;\n    if (this.state.autoHistory) {\n      days = this.state.expireDays;\n    }\n    let repoID = this.props.repoID;\n    let reg = /^-?\\d+$/;\n    let flag = reg.test(days);\n    if (flag) {\n      let message = gettext('Successfully set library history.');\n      seafileAPI.sysAdminUpdateRepoHistorySetting(repoID, days).then(res => {\n        toaster.success(message);\n        this.setState({keepDays: res.data.keep_days});\n        this.props.toggleDialog();\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    } else {\n      this.setState({\n        errorInfo: gettext('Please enter a non-negative integer'),\n      });\n    }\n  }\n\n  handleKeyPress = (e) => {\n    if (e.key === 'Enter') {\n      this.submit();\n      e.preventDefault();\n    }\n  }\n\n  onChange = (e) => {\n    let num = e.target.value;\n    this.setState({\n      keepDays: num,\n      expireDays: num,\n    });\n  }\n\n  setLimitDays = (type) => {\n    if (type === 'allHistory') {\n      this.setState({\n        keepDays: -1,\n      });\n    } else if (type === 'noHistory') {\n      this.setState({\n        keepDays: 0,\n      });\n    } else {\n      this.setState({\n        disabled: false\n      });\n    }\n\n    this.setState({\n      allHistory: type === 'allHistory' ? true : false,\n      noHistory: type === 'noHistory' ? true : false,\n      autoHistory: type === 'autoHistory' ? true : false,\n    });\n  }\n\n  render() {\n    const itemName = this.props.itemName;\n    return (\n      <Modal isOpen={true}>\n        <ModalHeader toggle={this.props.toggleDialog}>\n          <span className=\"op-target\" title={itemName}>{itemName}</span>{' '}\n          {gettext('History Setting')}\n        </ModalHeader>\n        <ModalBody>\n          <Form>\n            <FormGroup check>\n              <Input type=\"radio\" name=\"radio1\" checked={this.state.allHistory} onChange={() => {this.setLimitDays('allHistory');}}/>{' '}\n              <Label>{gettext('Keep full history')}</Label>\n            </FormGroup>\n            <FormGroup check>\n              <Input type=\"radio\" name=\"radio1\" checked={this.state.noHistory} onChange={() =>{this.setLimitDays('noHistory');}}/>{' '}\n              <Label>{gettext('Don\\'t keep history')}</Label>\n            </FormGroup>\n            <FormGroup check>\n              <Input type=\"radio\" name=\"radio1\" checked={this.state.autoHistory} onChange={() =>{this.setLimitDays('autoHistory');}}/>{' '}\n              <Label>{gettext('Only keep a period of history:')}</Label>\n              <Input\n                type=\"text\"\n                className=\"expire-input\"\n                value={this.state.expireDays}\n                onChange={this.onChange}\n                disabled={this.state.disabled}\n                onKeyDown={this.handleKeyPress}\n              />{' '}\n              <Label><span>{gettext('days')}</span></Label>\n            </FormGroup>\n            {this.state.errorInfo && <Alert color=\"danger\">{this.state.errorInfo}</Alert>}\n          </Form>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.props.toggleDialog}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.submit}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nSysAdminLibHistorySettingDialog.propTypes = propTypes;\n\nexport default SysAdminLibHistorySettingDialog;\n","import React, { Component, Fragment } from 'react';\nimport { Link } from '@reach/router';\nimport { Utils } from '../../../utils/utils';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { gettext, siteRoot, isPro } from '../../../utils/constants';\nimport toaster from '../../../components/toast';\nimport EmptyTip from '../../../components/empty-tip';\nimport Loading from '../../../components/loading';\nimport Paginator from '../../../components/paginator';\nimport ModalPortal from '../../../components/modal-portal';\nimport OpMenu from '../../../components/dialog/op-menu';\nimport TransferDialog from '../../../components/dialog/transfer-dialog';\nimport DeleteRepoDialog from '../../../components/dialog/delete-repo-dialog';\nimport SysAdminShareDialog from '../../../components/dialog/sysadmin-dialog/sysadmin-share-dialog';\nimport SysAdminLibHistorySettingDialog from '../../../components/dialog/sysadmin-dialog/sysadmin-lib-history-setting-dialog';\nimport UserLink from '../user-link';\n\nconst { enableSysAdminViewRepo } = window.sysadmin.pageOptions;\n\nclass Content extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isItemFreezed: false\n    };\n  }\n\n  onFreezedItem = () => {\n    this.setState({isItemFreezed: true});\n  }\n\n  onUnfreezedItem = () => {\n    this.setState({isItemFreezed: false});\n  }\n\n  getPreviousPageList = () => {\n    this.props.getListByPage(this.props.pageInfo.current_page - 1);\n  }\n\n  getNextPageList = () => {\n    this.props.getListByPage(this.props.pageInfo.current_page + 1);\n  }\n\n  sortByFileCount = (e) => {\n    e.preventDefault();\n    this.props.sortItems('file_count');\n  }\n\n  sortBySize = (e) => {\n    e.preventDefault();\n    this.props.sortItems('size');\n  }\n\n  render() {\n    // offer 'sort' only for 'all repos'\n    const { loading, errorMsg, items, pageInfo, curPerPage, sortBy } = this.props;\n    if (loading) {\n      return <Loading />;\n    } else if (errorMsg) {\n      return <p className=\"error text-center\">{errorMsg}</p>;\n    } else {\n      const emptyTip = (\n        <EmptyTip>\n          <h2>{gettext('No libraries')}</h2>\n        </EmptyTip>\n      );\n      const initialSortIcon = <span className=\"fas fa-sort\"></span>;\n      const sortIcon = <span className=\"fas fa-caret-down\"></span>;\n      const table = (\n        <Fragment>\n          <table>\n            <thead>\n              <tr>\n                <th width=\"5%\">{/*icon*/}</th>\n                <th width=\"25%\">{gettext('Name')}</th>\n                <th width=\"15%\">\n                  {sortBy != undefined ?\n                    <Fragment>\n                      <a className=\"d-inline-block table-sort-op\" href=\"#\" onClick={this.sortByFileCount}>{gettext('Files')} {sortBy == 'file_count' ? sortIcon : initialSortIcon}</a>{' / '}\n                      <a className=\"d-inline-block table-sort-op\" href=\"#\" onClick={this.sortBySize}>{gettext('Size')} {sortBy == 'size' ? sortIcon : initialSortIcon}</a>\n                    </Fragment> :\n                    gettext('Files') / gettext('Size')\n                  }\n                </th>\n                <th width=\"32%\">ID</th>\n                <th width=\"18%\">{gettext('Owner')}</th>\n                <th width=\"5%\">{/*Operations*/}</th>\n              </tr>\n            </thead>\n            <tbody>\n              {items.map((item, index) => {\n                return (<Item\n                  key={index}\n                  repo={item}\n                  isItemFreezed={this.state.isItemFreezed}\n                  onFreezedItem={this.onFreezedItem}\n                  onUnfreezedItem={this.onUnfreezedItem}\n                  onDeleteRepo={this.props.onDeleteRepo}\n                  onTransferRepo={this.props.onTransferRepo}\n                />);\n              })}\n            </tbody>\n          </table>\n          {pageInfo &&\n          <Paginator\n            gotoPreviousPage={this.getPreviousPageList}\n            gotoNextPage={this.getNextPageList}\n            currentPage={pageInfo.current_page}\n            hasNextPage={pageInfo.has_next_page}\n            curPerPage={curPerPage}\n            resetPerPage={this.props.resetPerPage}\n          />\n          }\n        </Fragment>\n      );\n\n      return items.length ? table : emptyTip;\n    }\n  }\n}\n\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOpIconShown: false,\n      highlight: false,\n      isShareDialogOpen: false,\n      isDeleteDialogOpen: false,\n      isTransferDialogOpen: false,\n      isHistorySettingDialogOpen: false,\n      isRepoDeleted: false,\n    };\n  }\n\n  onDeleteRepo = (repo) => {\n    seafileAPI.sysAdminDeleteRepo(repo.id).then((res) => {\n      this.props.onDeleteRepo(repo);\n      this.setState({\n        isDeleteDialogOpen: false,\n        isRepoDeleted: true,\n      });\n      const msg = gettext('Successfully deleted {name}.').replace('{name}', repo.name);\n      toaster.success(msg);\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n\n      this.setState({isRepoDeleted: false});\n    });\n  }\n\n  onTransferRepo = (owner) => {\n    seafileAPI.sysAdminTransferRepo(this.props.repo.id, owner.email).then((res) => {\n      this.props.onTransferRepo(res.data);\n      let message = gettext('Successfully transferred the library.');\n      toaster.success(message);\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n    this.toggleTransferDialog();\n  }\n\n  handleMouseOver = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        isOpIconShown: true,\n        highlight: true\n      });\n    }\n  }\n\n  handleMouseOut = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        isOpIconShown: false,\n        highlight: false\n      });\n    }\n  }\n\n  onUnfreezedItem = () => {\n    this.setState({\n      highlight: false,\n      isOpIconShow: false\n    });\n    this.props.onUnfreezedItem();\n  }\n\n  onMenuItemClick = (operation) => {\n    switch(operation) {\n      case 'Share':\n        this.toggleShareDialog();\n        break;\n      case 'Delete':\n        this.toggleDeleteDialog();\n        break;\n      case 'Transfer':\n        this.toggleTransferDialog();\n        break;\n      case 'History Setting':\n        this.toggleHistorySettingDialog();\n        break;\n      default:\n        break;\n    }\n  }\n\n  toggleShareDialog = () => {\n    this.setState({isShareDialogOpen: !this.state.isShareDialogOpen});\n  }\n\n  toggleDeleteDialog = () => {\n    this.setState({isDeleteDialogOpen: !this.state.isDeleteDialogOpen});\n  }\n\n  toggleTransferDialog = () => {\n    this.setState({isTransferDialogOpen: !this.state.isTransferDialogOpen});\n  }\n\n  toggleHistorySettingDialog = () => {\n    this.setState({isHistorySettingDialogOpen: !this.state.isHistorySettingDialogOpen});\n  }\n\n  renderRepoName = () => {\n    const { repo } = this.props;\n    if (repo.name) {\n      if (isPro && enableSysAdminViewRepo && !repo.encrypted) {\n        return <Link to={`${siteRoot}sys/libraries/${repo.id}/`}>{repo.name}</Link>;\n      } else {\n        return repo.name;\n      }\n    } else {\n      return '--';\n    }\n  }\n\n  translateOperations = (item) => {\n    let translateResult = '';\n    switch(item) {\n      case 'Share':\n        translateResult = gettext('Share');\n        break;\n      case 'Delete':\n        translateResult = gettext('Delete');\n        break;\n      case 'Transfer':\n        translateResult = gettext('Transfer');\n        break;\n      case 'History Setting':\n        translateResult = gettext('History Setting');\n        break;\n      default:\n        break;\n    }\n\n    return translateResult;\n  }\n\n  getOperations = () => {\n    const { repo } = this.props;\n    let operations = ['Delete', 'Transfer'];\n    if (!repo.encrypted) {\n      operations.push('Share');\n    }\n    operations.push('History Setting');\n    return operations;\n  }\n\n  render () {\n    const { repo } = this.props;\n    const {\n      isOpIconShown,\n      isShareDialogOpen,\n      isDeleteDialogOpen,\n      isTransferDialogOpen,\n      isHistorySettingDialogOpen\n    } = this.state;\n    let iconUrl = Utils.getLibIconUrl(repo);\n    let iconTitle = Utils.getLibIconTitle(repo);\n    const index = repo.owner_email.indexOf('@seafile_group');\n    let isGroupOwnedRepo = index != -1;\n    let departmentID;\n    if (isGroupOwnedRepo) {\n      departmentID = repo.owner_email.substring(0, index);\n    }\n\n    return (\n      <Fragment>\n        <tr className={this.state.highlight ? 'tr-highlight' : ''} onMouseEnter={this.handleMouseOver} onMouseLeave={this.handleMouseOut}>\n          <td><img src={iconUrl} title={iconTitle} alt={iconTitle} width=\"24\" /></td>\n          <td>{this.renderRepoName()}</td>\n          <td>{`${repo.file_count} / ${Utils.bytesToSize(repo.size)}`}</td>\n          <td>{repo.id}</td>\n          <td>\n            {isGroupOwnedRepo ?\n              <Link to={`${siteRoot}sys/departments/${departmentID}/`}>{repo.owner_name}</Link> :\n              <UserLink email={repo.owner_email} name={repo.owner_name} />\n            }\n          </td>\n          <td>\n            {(!isGroupOwnedRepo && isOpIconShown) &&\n            <OpMenu\n              operations={this.getOperations()}\n              translateOperations={this.translateOperations}\n              onMenuItemClick={this.onMenuItemClick}\n              onFreezedItem={this.props.onFreezedItem}\n              onUnfreezedItem={this.onUnfreezedItem}\n            />\n            }\n          </td>\n        </tr>\n        {isShareDialogOpen &&\n          <ModalPortal>\n            <SysAdminShareDialog\n              itemName={repo.name}\n              itemPath={'/'}\n              repoID={repo.id}\n              isGroupOwnedRepo={isGroupOwnedRepo}\n              repoEncrypted={repo.encrypted}\n              enableDirPrivateShare={true}\n              userPerm={repo.permission}\n              toggleDialog={this.toggleShareDialog}\n            />\n          </ModalPortal>\n        }\n        {isDeleteDialogOpen &&\n          <ModalPortal>\n            <DeleteRepoDialog\n              repo={repo}\n              isRepoDeleted={this.state.isRepoDeleted}\n              onDeleteRepo={this.onDeleteRepo}\n              toggle={this.toggleDeleteDialog}\n            />\n          </ModalPortal>\n        }\n        {isTransferDialogOpen &&\n          <ModalPortal>\n            <TransferDialog\n              itemName={repo.name}\n              submit={this.onTransferRepo}\n              canTransferToDept={false}\n              toggleDialog={this.toggleTransferDialog}\n            />\n          </ModalPortal>\n        }\n        {isHistorySettingDialogOpen &&\n          <ModalPortal>\n            <SysAdminLibHistorySettingDialog\n              repoID={repo.id}\n              itemName={repo.name}\n              toggleDialog={this.toggleHistorySettingDialog}\n            />\n          </ModalPortal>\n        }\n      </Fragment>\n    );\n  }\n}\n\nexport default Content;\n","import React, { Component, Fragment } from 'react';\nimport { navigate } from '@reach/router';\nimport { Button } from 'reactstrap';\nimport { Utils } from '../../../utils/utils';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { gettext, siteRoot } from '../../../utils/constants';\nimport toaster from '../../../components/toast';\nimport SysAdminCreateRepoDialog from '../../../components/dialog/sysadmin-dialog/sysadmin-create-repo-dialog';\nimport MainPanelTopbar from '../main-panel-topbar';\nimport Search from '../search';\nimport ReposNav from './repos-nav';\nimport Content from './repos';\n\nclass AllRepos extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      repos: [],\n      pageInfo: {},\n      perPage: 25,\n      sortBy: '',\n      isCreateRepoDialogOpen: false\n    };\n  }\n\n  componentDidMount () {\n    let urlParams = (new URL(window.location)).searchParams;\n    const { currentPage = 1, perPage, sortBy } = this.state;\n    this.setState({\n      sortBy: urlParams.get('order_by') || sortBy,\n      perPage: parseInt(urlParams.get('per_page') || perPage),\n      currentPage: parseInt(urlParams.get('page') || currentPage)\n    }, () => {\n      this.getReposByPage(this.state.currentPage);\n    });\n  }\n\n  toggleCreateRepoDialog = () => {\n    this.setState({isCreateRepoDialogOpen: !this.state.isCreateRepoDialogOpen});\n  }\n\n  getReposByPage = (page) => {\n    const { perPage, sortBy } = this.state;\n    seafileAPI.sysAdminListAllRepos(page, perPage, sortBy).then((res) => {\n      this.setState({\n        loading: false,\n        repos: res.data.repos,\n        pageInfo: res.data.page_info\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  sortItems = (sortBy) => {\n    this.setState({\n      currentPage: 1,\n      sortBy: sortBy\n    }, () => {\n      let url = new URL(location.href);\n      let searchParams = new URLSearchParams(url.search);\n      const { currentPage, sortBy } = this.state;\n      searchParams.set('page', currentPage);\n      searchParams.set('order_by', sortBy);\n      url.search = searchParams.toString();\n      navigate(url.toString());\n      this.getReposByPage(currentPage);\n    });\n  }\n\n  resetPerPage = (perPage) => {\n    this.setState({\n      perPage: perPage\n    }, () => {\n      this.getReposByPage(1);\n    });\n  }\n\n  createRepo = (repoName, Owner) => {\n    seafileAPI.sysAdminCreateRepo(repoName, Owner).then(res => {\n      this.state.repos.unshift(res.data);\n      this.setState({\n        repos: this.state.repos\n      });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  onDeleteRepo = (targetRepo) => {\n    let repos = this.state.repos.filter(repo => {\n      return repo.id != targetRepo.id;\n    });\n    this.setState({\n      repos: repos\n    });\n  }\n\n  onTransferRepo = (targetRepo) => {\n    let repos = this.state.repos.map((item) => {\n      return item.id == targetRepo.id ? targetRepo : item;\n    });\n    this.setState({\n      repos: repos\n    });\n  }\n\n  getSearch = () => {\n    return <Search\n      placeholder={gettext('Search libraries by name')}\n      submit={this.searchRepos}\n    />;\n  }\n\n  searchRepos = (repoName) => {\n    navigate(`${siteRoot}sys/search-libraries/?name=${encodeURIComponent(repoName)}`);\n  }\n\n  render() {\n    let { isCreateRepoDialogOpen } = this.state;\n    return (\n      <Fragment>\n        <MainPanelTopbar search={this.getSearch()}>\n          <Button className=\"btn btn-secondary operation-item\" onClick={this.toggleCreateRepoDialog}>\n            <i className=\"fas fa-plus-square text-secondary mr-1\"></i>{gettext('New Library')}\n          </Button>\n        </MainPanelTopbar>\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <ReposNav currentItem=\"all\" />\n            <div className=\"cur-view-content\">\n              <Content\n                loading={this.state.loading}\n                errorMsg={this.state.errorMsg}\n                items={this.state.repos}\n                sortBy={this.state.sortBy}\n                sortItems={this.sortItems}\n                pageInfo={this.state.pageInfo}\n                curPerPage={this.state.perPage}\n                getListByPage={this.getReposByPage}\n                resetPerPage={this.resetPerPage}\n                onDeleteRepo={this.onDeleteRepo}\n                onTransferRepo={this.onTransferRepo}\n              />\n            </div>\n          </div>\n        </div>\n        {isCreateRepoDialogOpen &&\n        <SysAdminCreateRepoDialog\n          createRepo={this.createRepo}\n          toggleDialog={this.toggleCreateRepoDialog}\n        />\n        }\n      </Fragment>\n    );\n  }\n}\n\nexport default AllRepos;\n","import React, { Component, Fragment } from 'react';\nimport { Link } from '@reach/router';\nimport { Utils } from '../../../utils/utils';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { gettext, siteRoot } from '../../../utils/constants';\nimport toaster from '../../../components/toast';\nimport Loading from '../../../components/loading';\nimport MainPanelTopbar from '../main-panel-topbar';\nimport ReposNav from './repos-nav';\n\nclass Content extends Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    const { loading, errorMsg, items } = this.props;\n    if (loading) {\n      return <Loading />;\n    } else if (errorMsg) {\n      return <p className=\"error text-center\">{errorMsg}</p>;\n    } else {\n      const table = (\n        <Fragment>\n          <table className=\"table-hover\">\n            <thead>\n              <tr>\n                <th width=\"33%\">{gettext('Name')}</th>\n                <th width=\"34%\">ID</th>\n                <th width=\"33%\">{gettext('Description')}</th>\n              </tr>\n            </thead>\n            <tbody>\n              {items.map((item, index) => {\n                return (<Item key={index} item={item}/>);\n              })}\n            </tbody>\n          </table>\n        </Fragment>\n      );\n      return table;\n    }\n  }\n}\n\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    const item = this.props.item;\n    return (\n      <tr>\n        <td><Link to={`${siteRoot}sys/libraries/${item.id}/`}>{item.name}</Link></td>\n        <td>{item.id}</td>\n        <td>{item.description}</td>\n      </tr>\n    );\n  }\n}\n\nclass SystemRepo extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      items: []\n    };\n  }\n\n  componentDidMount () {\n    seafileAPI.sysAdminGetSystemRepoInfo().then((res) => {\n      let items = [];\n      items.push(res.data);\n      this.setState({\n        items: items,\n        loading: false\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  render() {\n    return (\n      <Fragment>\n        <MainPanelTopbar/>\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <ReposNav currentItem=\"system\" />\n            <div className=\"cur-view-content\">\n              <Content\n                loading={this.state.loading}\n                errorMsg={this.state.errorMsg}\n                items={this.state.items}\n              />\n            </div>\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nexport default SystemRepo;\n","import React, { Component, Fragment } from 'react';\nimport { Button } from 'reactstrap';\nimport moment from 'moment';\nimport { Utils } from '../../../utils/utils';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { gettext } from '../../../utils/constants';\nimport toaster from '../../../components/toast';\nimport EmptyTip from '../../../components/empty-tip';\nimport Loading from '../../../components/loading';\nimport Paginator from '../../../components/paginator';\nimport ModalPortal from '../../../components/modal-portal';\nimport OpMenu from '../../../components/dialog/op-menu';\nimport CommonOperationConfirmationDialog from '../../../components/dialog/common-operation-confirmation-dialog';\nimport MainPanelTopbar from '../main-panel-topbar';\nimport Search from '../search';\nimport UserLink from '../user-link';\nimport ReposNav from './repos-nav';\n\nconst { trashReposExpireDays } = window.sysadmin.pageOptions;\n\nclass Content extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isItemFreezed: false\n    };\n  }\n\n  onFreezedItem = () => {\n    this.setState({isItemFreezed: true});\n  }\n\n  onUnfreezedItem = () => {\n    this.setState({isItemFreezed: false});\n  }\n\n  getPreviousPageList = () => {\n    this.props.getListByPage(this.props.pageInfo.current_page - 1);\n  }\n\n  getNextPageList = () => {\n    this.props.getListByPage(this.props.pageInfo.current_page + 1);\n  }\n\n  render() {\n    const { loading, errorMsg, items, pageInfo, curPerPage } = this.props;\n    if (loading) {\n      return <Loading />;\n    } else if (errorMsg) {\n      return <p className=\"error text-center mt-4\">{errorMsg}</p>;\n    } else {\n      const emptyTip = (\n        <EmptyTip>\n          <h2>{gettext('No deleted libraries')}</h2>\n        </EmptyTip>\n      );\n      const table = (\n        <Fragment>\n          <p className=\"mt-4 small text-secondary\">{gettext('Tip: libraries deleted {trashReposExpireDays} days ago will be cleaned automatically.').replace('{trashReposExpireDays}', trashReposExpireDays)}</p>\n          <table className=\"table-hover\">\n            <thead>\n              <tr>\n                <th width=\"5%\">{/*icon*/}</th>\n                <th width=\"43%\">{gettext('Name')}</th>\n                <th width=\"27%\">{gettext('Owner')}</th>\n                <th width=\"20%\">{gettext('Deleted Time')}</th>\n                <th width=\"5%\">{/*Operations*/}</th>\n              </tr>\n            </thead>\n            <tbody>\n              {items.map((item, index) => {\n                return (<Item\n                  key={index}\n                  repo={item}\n                  isItemFreezed={this.state.isItemFreezed}\n                  onFreezedItem={this.onFreezedItem}\n                  onUnfreezedItem={this.onUnfreezedItem}\n                  onDeleteRepo={this.props.onDeleteRepo}\n                  onRestoreRepo={this.props.onRestoreRepo}\n                />);\n              })}\n            </tbody>\n          </table>\n          {pageInfo &&\n          <Paginator\n            gotoPreviousPage={this.getPreviousPageList}\n            gotoNextPage={this.getNextPageList}\n            currentPage={pageInfo.current_page}\n            hasNextPage={pageInfo.has_next_page}\n            curPerPage={curPerPage}\n            resetPerPage={this.props.resetPerPage}\n          />\n          }\n        </Fragment>\n      );\n\n      return items.length ? table : emptyTip;\n    }\n  }\n}\n\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      highlight: false,\n      isOpIconShown: false,\n      isDeleteRepoDialogOpen: false,\n      isRestoreRepoDialogOpen: false\n    };\n  }\n\n  handleMouseOver = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        isOpIconShown: true,\n        highlight: true\n      });\n    }\n  }\n\n  handleMouseOut = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        isOpIconShown: false,\n        highlight: false\n      });\n    }\n  }\n\n  onUnfreezedItem = () => {\n    this.setState({\n      highlight: false,\n      isOpIconShow: false\n    });\n    this.props.onUnfreezedItem();\n  }\n\n  onDeleteRepo = () => {\n    const repo = this.props.repo;\n    seafileAPI.sysAdminDeleteTrashRepo(repo.id).then((res) => {\n      this.props.onDeleteRepo(repo);\n      const msg = gettext('Successfully deleted {name}.').replace('{name}', repo.name);\n      toaster.success(msg);\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  onRestoreRepo = () => {\n    const repo = this.props.repo;\n    seafileAPI.sysAdminRestoreTrashRepo(repo.id).then((res) => {\n      this.props.onRestoreRepo(repo);\n      let message = gettext('Successfully restored the library.');\n      toaster.success(message);\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  toggleDeleteRepoDialog = (e) => {\n    if (e) {\n      e.preventDefault();\n    }\n    this.setState({isDeleteRepoDialogOpen: !this.state.isDeleteRepoDialogOpen});\n  }\n\n  toggleRestoreRepoDialog = (e) => {\n    if (e) {\n      e.preventDefault();\n    }\n    this.setState({isRestoreRepoDialogOpen: !this.state.isRestoreRepoDialogOpen});\n  }\n\n  translateOperations = (item) => {\n    let translateResult = '';\n    switch(item) {\n      case 'Restore':\n        translateResult = gettext('Restore');\n        break;\n      case 'Delete':\n        translateResult = gettext('Delete');\n        break;\n      default:\n        break;\n    }\n\n    return translateResult;\n  }\n\n  onMenuItemClick = (operation) => {\n    switch(operation) {\n      case 'Restore':\n        this.toggleRestoreRepoDialog();\n        break;\n      case 'Delete':\n        this.toggleDeleteRepoDialog();\n        break;\n      default:\n        break;\n    }\n  }\n\n  render () {\n    const { repo } = this.props;\n    const { isOpIconShown, isDeleteRepoDialogOpen, isRestoreRepoDialogOpen } = this.state;\n    const iconUrl = Utils.getLibIconUrl(repo);\n    const iconTitle = Utils.getLibIconTitle(repo);\n    const repoName = '<span class=\"op-target\">' + Utils.HTMLescape(repo.name) + '</span>';\n\n    return (\n      <Fragment>\n        <tr onMouseEnter={this.handleMouseOver} onMouseLeave={this.handleMouseOut}>\n          <td><img src={iconUrl} title={iconTitle} alt={iconTitle} width=\"24\" /></td>\n          <td>{repo.name}</td>\n          <td>\n            {repo.owner.indexOf('@seafile_group') == -1 ?\n              <UserLink email={repo.owner} name={repo.owner_name} /> :\n              repo.group_name}\n          </td>\n          <td>{moment(repo.delete_time).fromNow()}</td>\n          <td>\n            {isOpIconShown && (\n              <OpMenu\n                operations={['Restore', 'Delete']}\n                translateOperations={this.translateOperations}\n                onMenuItemClick={this.onMenuItemClick}\n                onFreezedItem={this.props.onFreezedItem}\n                onUnfreezedItem={this.onUnfreezedItem}\n              />\n            )}\n          </td>\n        </tr>\n        {isDeleteRepoDialogOpen &&\n          <ModalPortal>\n            <CommonOperationConfirmationDialog\n              title={gettext('Delete Library')}\n              message={gettext('Are you sure you want to delete {placeholder} completely?').replace('{placeholder}', repoName)}\n              executeOperation={this.onDeleteRepo}\n              confirmBtnText={gettext('Delete')}\n              toggleDialog={this.toggleDeleteRepoDialog}\n            />\n          </ModalPortal>\n        }\n        {isRestoreRepoDialogOpen &&\n          <ModalPortal>\n            <CommonOperationConfirmationDialog\n              title={gettext('Restore Library')}\n              message={gettext('Are you sure you want to restore {placeholder}?').replace('{placeholder}', repoName)}\n              executeOperation={this.onRestoreRepo}\n              confirmBtnText={gettext('Restore')}\n              toggleDialog={this.toggleRestoreRepoDialog}\n            />\n          </ModalPortal>\n        }\n      </Fragment>\n    );\n  }\n}\n\nclass TrashRepos extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      repos: [],\n      pageInfo: {},\n      perPage: 25,\n      isCleanTrashDialogOpen: false\n    };\n  }\n\n  componentDidMount () {\n    let urlParams = (new URL(window.location)).searchParams;\n    const { currentPage = 1, perPage } = this.state;\n    this.setState({\n      perPage: parseInt(urlParams.get('per_page') || perPage),\n      currentPage: parseInt(urlParams.get('page') || currentPage)\n    }, () => {\n      this.getReposByPage(this.state.currentPage);\n    });\n  }\n\n  toggleCleanTrashDialog = () => {\n    this.setState({isCleanTrashDialogOpen: !this.state.isCleanTrashDialogOpen});\n  }\n\n  getReposByPage = (page) => {\n    let perPage = this.state.perPage;\n    seafileAPI.sysAdminListTrashRepos(page, perPage).then((res) => {\n      this.setState({\n        repos: res.data.repos,\n        pageInfo: res.data.page_info,\n        loading: false\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  resetPerPage = (perPage) => {\n    this.setState({\n      perPage: perPage\n    }, () => {\n      this.getReposByPage(1);\n    });\n  }\n\n  onDeleteRepo = (targetRepo) => {\n    let repos = this.state.repos.filter(repo => {\n      return repo.id != targetRepo.id;\n    });\n    this.setState({\n      repos: repos\n    });\n  }\n\n  onRestoreRepo = (targetRepo) => {\n    let repos = this.state.repos.filter(repo => {\n      return repo.id != targetRepo.id;\n    });\n    this.setState({\n      repos: repos\n    });\n  }\n\n  cleanTrash = () => {\n    seafileAPI.sysAdminCleanTrashRepos().then(res => {\n      this.setState({repos: []});\n      toaster.success(gettext('Successfully cleared trash.'));\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  getSearch = () => {\n    return <Search\n      placeholder={gettext('Search libraries by owner')}\n      submit={this.searchRepos}\n    />;\n  }\n\n  searchRepos = (owner) => {\n    seafileAPI.sysAdminSearchTrashRepos(owner).then((res) => {\n      this.setState({\n        repos: res.data.repos,\n        pageInfo: null,\n        errorMsg: '', // necessary!\n        loading: false\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  render() {\n    const { isCleanTrashDialogOpen } = this.state;\n\n    // enable 'search': <MainPanelTopbar search={this.getSearch()}>\n    return (\n      <Fragment>\n        {this.state.repos.length ? (\n          <MainPanelTopbar>\n            <Button className=\"operation-item\" onClick={this.toggleCleanTrashDialog}>{gettext('Clean')}</Button>\n          </MainPanelTopbar>\n        ) : <MainPanelTopbar />\n        }\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <ReposNav currentItem=\"trash\" />\n            <div className=\"cur-view-content\">\n              <Content\n                loading={this.state.loading}\n                errorMsg={this.state.errorMsg}\n                items={this.state.repos}\n                pageInfo={this.state.pageInfo}\n                onDeleteRepo={this.onDeleteRepo}\n                onRestoreRepo={this.onRestoreRepo}\n                getListByPage={this.getReposByPage}\n                resetPerPage={this.resetPerPage}\n                curPerPage={this.state.perPage}\n              />\n            </div>\n          </div>\n        </div>\n        {isCleanTrashDialogOpen &&\n          <CommonOperationConfirmationDialog\n            title={gettext('Clear Trash')}\n            message={gettext('Are you sure you want to clear trash?')}\n            executeOperation={this.cleanTrash}\n            confirmBtnText={gettext('Clear')}\n            toggleDialog={this.toggleCleanTrashDialog}\n          />\n        }\n      </Fragment>\n    );\n  }\n}\n\nexport default TrashRepos;\n","import React, { Component, Fragment } from 'react';\nimport { Form, FormGroup, Input, Label, Col } from 'reactstrap';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { gettext } from '../../../utils/constants';\nimport { Utils } from '../../../utils/utils';\nimport MainPanelTopbar from '../main-panel-topbar';\nimport Content from './repos';\n\n\nclass SearchRepos extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      name: '',\n      isSubmitBtnActive: false,\n      loading: true,\n      errorMsg: '',\n      repos: []\n    };\n  }\n\n  componentDidMount() {\n    let params = (new URL(document.location)).searchParams;\n    this.setState({\n      name: params.get('name') || ''\n    }, this.getRepos);\n  }\n\n  getRepos = () => {\n    const { name } = this.state;\n    seafileAPI.sysAdminSearchRepos(name).then((res) => {\n      this.setState({\n        loading: false,\n        repos: res.data.repo_list\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  searchRepos = () => {\n    this.getRepos();\n  }\n\n  onDeleteRepo = (targetRepo) => {\n    let repos = this.state.repos.filter(repo => {\n      return repo.id != targetRepo.id;\n    });\n    this.setState({\n      repos: repos\n    });\n  }\n\n  onTransferRepo = (targetRepo) => {\n    let repos = this.state.repos.map((item) => {\n      return item.id == targetRepo.id ? targetRepo : item;\n    });\n    this.setState({\n      repos: repos\n    });\n  }\n\n  handleNameInputChange = (e) => {\n    this.setState({\n      name: e.target.value\n    }, this.checkSubmitBtnActive);\n  }\n\n  checkSubmitBtnActive = () => {\n    const { name } = this.state;\n    this.setState({\n      isSubmitBtnActive: name.trim()\n    });\n  }\n\n  render() {\n    const { name, isSubmitBtnActive } = this.state;\n    return (\n      <Fragment>\n        <MainPanelTopbar />\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <div className=\"cur-view-path\">\n              <h3 className=\"sf-heading\">{gettext('Libraries')}</h3>\n            </div>\n            <div className=\"cur-view-content\">\n              <div className=\"mt-4 mb-6\">\n                <h4 className=\"border-bottom font-weight-normal mb-2 pb-1\">{gettext('Search Libraries')}</h4>\n                <p className=\"text-secondary small\">{gettext('Tip: you can search by keyword in name.')}</p>\n                <Form>\n                  <FormGroup row>\n                    <Label for=\"name\" sm={1}>{gettext('Name')}</Label>\n                    <Col sm={5}>\n                      <Input type=\"text\" name=\"name\" id=\"name\" value={name} onChange={this.handleNameInputChange} />\n                    </Col>\n                  </FormGroup>\n                  <FormGroup row>\n                    <Col sm={{size: 5, offset: 1}}>\n                      <button className=\"btn btn-outline-primary\" disabled={!isSubmitBtnActive} onClick={this.searchRepos}>{gettext('Submit')}</button>\n                    </Col>\n                  </FormGroup>\n                </Form>\n              </div>\n              <div className=\"mt-4 mb-6\">\n                <h4 className=\"border-bottom font-weight-normal mb-2 pb-1\">{gettext('Result')}</h4>\n                <Content\n                  loading={this.state.loading}\n                  errorMsg={this.state.errorMsg}\n                  items={this.state.repos}\n                  onDeleteRepo={this.onDeleteRepo}\n                  onTransferRepo={this.onTransferRepo}\n                />\n              </div>\n            </div>\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nexport default SearchRepos;\n","class Dirent {\n  constructor(obj) {\n    this.name = obj.obj_name;\n    this.mtime = obj.last_update;\n    this.size = obj.file_size;\n    this.is_file = obj.is_file;\n  }\n\n  isDir() {\n    return !this.is_file;\n  }\n}\n\nexport default Dirent;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { siteRoot, gettext } from '../../../utils/constants';\nimport { Utils } from '../../../utils/utils';\n\nconst propTypes = {\n  repoName: PropTypes.string.isRequired,\n  currentPath: PropTypes.string.isRequired,\n  onPathClick: PropTypes.func.isRequired,\n  repoID: PropTypes.string.isRequired,\n};\n\nclass DirPath extends React.Component {\n\n  onPathClick = (e) => {\n    let path = Utils.getEventData(e, 'path');\n    this.props.onPathClick(path);\n  }\n\n  turnPathToLink = (path) => {\n    path = path[path.length - 1] === '/' ? path.slice(0, path.length - 1) : path;\n    let pathList = path.split('/');\n    let nodePath = '';\n    let pathElem = pathList.map((item, index) => {\n      if (item === '') {\n        return;\n      }\n      if (index === (pathList.length - 1)) {\n        return (\n          <Fragment key={index}>\n            <span className=\"path-split\">/</span>\n            <span className=\"path-file-name\">{item}</span>\n          </Fragment>\n        );\n      } else {\n        nodePath += '/' + item;\n        return (\n          <Fragment key={index} >\n            <span className=\"path-split\">/</span>\n            <a className=\"path-link\" data-path={nodePath} onClick={this.onPathClick}>{item}</a>\n          </Fragment>\n        );\n      }\n    });\n    return pathElem;\n  }\n\n  render() {\n    let { isSystemRepo, currentPath, repoName } = this.props;\n    let pathElem = this.turnPathToLink(currentPath);\n\n    return (\n      <div className=\"path-container\">\n        {isSystemRepo ?\n          <a href={`${siteRoot}sys/system-library/`}>{gettext('System')}</a> :\n          <a href={`${siteRoot}sys/all-libraries/`}>{gettext('All')}</a>\n        }\n        <span className=\"path-split\">/</span>\n        {(currentPath === '/' || currentPath === '') ?\n          <span className=\"path-repo-name\">{repoName}</span>:\n          <a className=\"path-link\" data-path=\"/\" onClick={this.onPathClick}>{repoName}</a>\n        }\n        {pathElem}\n      </div>\n    );\n  }\n}\n\nDirPath.propTypes = propTypes;\n\nexport default DirPath;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Link } from '@reach/router';\nimport moment from 'moment';\nimport { gettext } from '../../../utils/constants';\nimport { Utils } from '../../../utils/utils';\nimport Loading from '../../../components/loading';\n\nclass DirentItem extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOpIconShown: false\n    };\n  }\n\n  handleMouseOver = () => {\n    this.setState({\n      isOpIconShown: true\n    });\n  }\n\n  handleMouseOut = () => {\n    this.setState({\n      isOpIconShown: false\n    });\n  }\n\n  openFolder = () => {\n    this.props.openFolder(this.props.dirent);\n  }\n\n  deleteDirent = (e) => {\n    e.preventDefault();\n    this.props.deleteDirent(this.props.dirent);\n  }\n\n  downloadDirent = (e) => {\n    e.preventDefault();\n    this.props.downloadDirent(this.props.dirent);\n  }\n\n  render () {\n    let { isOpIconShown, isDeleteDialogOpen } = this.state;\n    let { dirent, fromSystemRepo } = this.props;\n    let iconUrl = Utils.getDirentIcon(dirent);\n\n    return (\n      <Fragment>\n        <tr onMouseEnter={this.handleMouseOver} onMouseLeave={this.handleMouseOut}>\n          <td className=\"text-center\"><img src={iconUrl} width=\"24\" alt='' /></td>\n          <td>\n            {dirent.is_file ?\n              dirent.name :\n              <Link to=\"#\" onClick={this.openFolder}>{dirent.name}</Link>\n            }\n          </td>\n          <td>\n            {isOpIconShown && fromSystemRepo &&\n              <a href=\"#\" className=\"op-icon sf2-icon-delete\" title={gettext('Delete')} onClick={this.deleteDirent}></a>\n            }\n            {isOpIconShown && dirent.is_file &&\n            <a href=\"#\" className=\"op-icon sf2-icon-download\" title={gettext('Download')} onClick={this.downloadDirent}></a>\n            }\n          </td>\n          <td>{dirent.size}</td>\n          <td>{moment(dirent.mtime).fromNow()}</td>\n        </tr>\n      </Fragment>\n    );\n  }\n}\n\n\nconst propTypes = {\n  direntList: PropTypes.array.isRequired\n};\n\nclass DirContent extends React.Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    let { loading, errorMsg, direntList } = this.props;\n\n    if (loading) {\n      return <Loading />;\n    }\n\n    if (errorMsg) {\n      return <p className=\"error text-center mt-4\">{errorMsg}</p>;\n    }\n\n    return (\n      <Fragment>\n        <table className=\"table-hover\">\n          <thead>\n            <tr>\n              <th width=\"5%\">{/*icon*/}</th>\n              <th width=\"55%\">{gettext('Name')}</th>\n              <th width=\"10%\">{/*operation*/}</th>\n              <th width=\"15%\">{gettext('Size')}</th>\n              <th width=\"15%\">{gettext('Last Update')}</th>\n            </tr>\n          </thead>\n          <tbody>\n            {direntList.map((dirent, index) => {\n              return <DirentItem\n                key={index}\n                dirent={dirent}\n                openFolder={this.props.openFolder}\n                deleteDirent={this.props.deleteDirent}\n                downloadDirent={this.props.downloadDirent}\n                fromSystemRepo={this.props.fromSystemRepo}\n              />;\n            })}\n          </tbody>\n        </table>\n      </Fragment>\n    );\n  }\n}\n\nDirContent.propTypes = propTypes;\n\nexport default DirContent;\n","import React, { Component, Fragment } from 'react';\nimport { Button } from 'reactstrap';\nimport { post } from 'axios';\nimport { Utils } from '../../../utils/utils';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { siteRoot, gettext } from '../../../utils/constants';\nimport toaster from '../../../components/toast';\nimport CreateFolderDialog from '../../../components/dialog/create-folder-dialog';\nimport Dirent from '../../../models/system-admin/dirent';\nimport MainPanelTopbar from '../main-panel-topbar';\nimport DirPathBar from './dir-path-bar';\nimport DirContent from './dir-content';\n\nclass DirView extends Component {\n\n  constructor(props) {\n    super(props);\n    this.fileInput = React.createRef();\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      isSystemRepo: false,\n      repoName: '',\n      path: '',\n      direntList: [],\n      isNewFolderDialogOpen: false\n    };\n  }\n\n  componentDidMount () {\n    this.loadDirentList('/');\n  }\n\n  onPathClick = (path) => {\n    this.loadDirentList(path);\n  }\n\n  toggleNewFolderDialog = () => {\n    this.setState({isNewFolderDialogOpen: !this.state.isNewFolderDialogOpen});\n  }\n\n  createNewFolder = (path) => {\n    let folderName = Utils.getFileName(path);\n    seafileAPI.sysAdminCreateSysRepoFolder(this.props.repoID, this.state.path, folderName).then(res => {\n      let new_dirent = new Dirent(res.data);\n      let direntList = this.state.direntList;\n      direntList.unshift(new_dirent);\n      this.setState({\n        direntList: direntList\n      });\n      this.toggleNewFolderDialog();\n    }).catch((err) => {\n      let errMessage = Utils.getErrorMsg(err);\n      toaster.danger(errMessage);\n    });\n  }\n\n  openFolder = (dirent) => {\n    let direntPath = Utils.joinPath(this.state.path, dirent.name);\n    if (!dirent.is_file) {\n      this.loadDirentList(direntPath);\n    }\n  }\n\n  loadDirentList = (path) => {\n    const repoID = this.props.repoID;\n    seafileAPI.sysAdminListRepoDirents(repoID, path).then(res => {\n      const { is_system_library: isSystemRepo, repo_name: repoName, dirent_list } = res.data;\n      let direntList = [];\n      dirent_list.forEach(item => {\n        let dirent = new Dirent(item);\n        direntList.push(dirent);\n      });\n      this.setState({\n        loading: false,\n        repoName: repoName,\n        isSystemRepo: isSystemRepo,\n        direntList: direntList,\n        path: path,\n      }, () => {\n        let url = siteRoot + 'sys/libraries/' + repoID + '/' + encodeURIComponent(this.state.repoName) + Utils.encodePath(path);\n        window.history.replaceState({url: url, path: path}, path, url);\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  deleteDirent = (dirent) => {\n    let path = Utils.joinPath(this.state.path, dirent.name);\n    seafileAPI.sysAdminDeleteRepoDirent(this.props.repoID, path).then(res => {\n      toaster.success(gettext('Successfully deleted 1 item.'));\n      let direntList = this.state.direntList.filter(item => {\n        return item.name != dirent.name;\n      });\n      this.setState({\n        direntList: direntList\n      });\n    }).catch((err) => {\n      let errMessage = Utils.getErrorMsg(err);\n      toaster.danger(errMessage);\n    });\n  }\n\n  downloadDirent = (dirent) => {\n    let path = Utils.joinPath(this.state.path, dirent.name);\n    seafileAPI.sysAdminGetRepoFileDownloadURL(this.props.repoID, path).then(res => {\n      location.href = res.data.download_url;\n    }).catch((err) => {\n      let errMessage = Utils.getErrorMsg(err);\n      toaster.danger(errMessage);\n    });\n  }\n\n  openFileInput = () => {\n    this.fileInput.current.click();\n  }\n\n  onFileInputChange = () => {\n    if (!this.fileInput.current.files.length) {\n      return;\n    }\n    const file = this.fileInput.current.files[0];\n\n    let { path } = this.state;\n    seafileAPI.sydAdminGetSysRepoItemUploadURL(path).then(res => {\n      let formData = new FormData();\n      formData.append('parent_dir', path);\n      formData.append('file', file);\n      post(res.data.upload_link, formData).then(res => {\n        const fileObj = res.data[0];\n        let newDirent = new Dirent({\n          'is_file': true,\n          'obj_name': fileObj.name,\n          'file_size': Utils.bytesToSize(fileObj.size),\n          'last_update': (new Date()).getTime()\n        });\n        let direntList = this.state.direntList;\n        const dirs = direntList.filter(item => { return !item.is_file; });\n        direntList.splice(dirs.length, 0, newDirent);\n        this.setState({\n          direntList: direntList\n        });\n      });\n    }).catch((err) => {\n      let errMessage = Utils.getErrorMsg(err);\n      toaster.danger(errMessage);\n    });\n  }\n\n  checkDuplicatedName = (newName) => {\n    let direntList = this.state.direntList;\n    let isDuplicated = direntList.some(object => {\n      return object.name === newName;\n    });\n    return isDuplicated;\n  }\n\n  render() {\n    const { loading, errorMsg,\n      repoName, direntList, isSystemRepo, path,\n      isNewFolderDialogOpen } = this.state;\n    const { repoID } = this.props;\n\n    return (\n      <Fragment>\n        {isSystemRepo ?\n          <MainPanelTopbar>\n            <Fragment>\n              <input className=\"d-none\" type=\"file\" onChange={this.onFileInputChange} ref={this.fileInput} />\n              <Button className=\"operation-item\" onClick={this.openFileInput}>{gettext('Upload')}</Button>\n              <Button className=\"operation-item\" onClick={this.toggleNewFolderDialog}>{gettext('New Folder')}</Button>\n            </Fragment>\n          </MainPanelTopbar> : <MainPanelTopbar />\n        }\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <div className=\"cur-view-path align-items-center\">\n              <DirPathBar\n                isSystemRepo={isSystemRepo}\n                repoID={repoID}\n                repoName={repoName}\n                currentPath={path}\n                onPathClick={this.onPathClick}\n              />\n            </div>\n            <div className=\"cur-view-content\">\n              <DirContent\n                loading={loading}\n                errorMsg={errorMsg}\n                fromSystemRepo={isSystemRepo}\n                direntList={direntList}\n                openFolder={this.openFolder}\n                deleteDirent={this.deleteDirent}\n                downloadDirent={this.downloadDirent}\n              />\n            </div>\n          </div>\n        </div>\n        {isNewFolderDialogOpen &&\n          <CreateFolderDialog\n            parentPath={path}\n            checkDuplicatedName={this.checkDuplicatedName}\n            onAddFolder={this.createNewFolder}\n            addFolderCancel={this.toggleNewFolderDialog}\n          />\n        }\n      </Fragment>\n    );\n  }\n}\n\nexport default DirView;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Modal, ModalHeader, Input, ModalBody, ModalFooter, Form, FormGroup, Label, Alert } from 'reactstrap';\nimport { gettext } from '../../../utils/constants';\nimport UserSelect from '../../user-select';\n\n\nconst propTypes = {\n  createGroup: PropTypes.func.isRequired,\n  toggleDialog: PropTypes.func.isRequired\n};\n\nclass SysAdminCreateGroupDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      groupName: '',\n      ownerEmail: '',\n      errMessage: '',\n      isSubmitBtnActive: false\n    };\n    this.newInput = React.createRef();\n  }\n\n  handleRepoNameChange = (e) => {\n    if (!e.target.value.trim()) {\n      this.setState({isSubmitBtnActive: false});\n    } else {\n      this.setState({isSubmitBtnActive: true});\n    }\n\n    this.setState({groupName: e.target.value});\n  }\n\n  handleSubmit = () => {\n    let groupName = this.state.groupName.trim();\n    this.props.createGroup(groupName, this.state.ownerEmail);\n  }\n\n  handleSelectChange = (option) => {\n    // option can be null\n    this.setState({\n      ownerEmail: option ? option.email : ''\n    });\n  }\n\n  handleKeyPress = (e) => {\n    if (e.key === 'Enter') {\n      this.handleSubmit();\n      e.preventDefault();\n    }\n  }\n\n  toggle = () => {\n    this.props.toggleDialog();\n  }\n\n  componentDidMount() {\n    this.newInput.focus();\n  }\n\n  render() {\n    return (\n      <Modal isOpen={true} toggle={this.toggle}>\n        <ModalHeader toggle={this.toggle}>{gettext('New Group')}</ModalHeader>\n        <ModalBody>\n          <Form>\n            <FormGroup>\n              <Label for=\"groupName\">{gettext('Name')}</Label>\n              <Input\n                id=\"groupName\"\n                onKeyPress={this.handleKeyPress}\n                innerRef={input => {this.newInput = input;}}\n                value={this.state.groupName}\n                onChange={this.handleRepoNameChange}\n              />\n              <Label className=\"mt-2\">\n                {gettext('Owner')}\n                <span className=\"small text-secondary\">{gettext('(If left blank, owner will be admin)')}</span>\n              </Label>\n              <UserSelect\n                isMulti={false}\n                className=\"reviewer-select\"\n                placeholder={gettext('Select a user')}\n                onSelectChange={this.handleSelectChange}\n              />\n            </FormGroup>\n          </Form>\n          {this.state.errMessage && <Alert color=\"danger\">{this.state.errMessage}</Alert>}\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.toggle}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.handleSubmit} disabled={!this.state.isSubmitBtnActive}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nSysAdminCreateGroupDialog.propTypes = propTypes;\n\nexport default SysAdminCreateGroupDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter } from 'reactstrap';\nimport { Utils } from '../../../utils/utils';\nimport { gettext } from '../../../utils/constants';\nimport UserSelect from '../../user-select';\n\nconst propTypes = {\n  groupName: PropTypes.string.isRequired,\n  transferGroup: PropTypes.func.isRequired,\n  toggleDialog: PropTypes.func.isRequired\n};\n\nclass SysAdminTransferGroupDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      selectedOption: null,\n      submitBtnDisabled: true\n    };\n  }\n\n  handleSelectChange = (option) => {\n    this.setState({\n      selectedOption: option,\n      submitBtnDisabled: option == null\n    });\n  }\n\n  submit = () => {\n    const receiver = this.state.selectedOption.email;\n    this.props.transferGroup(receiver);\n    this.props.toggleDialog();\n  }\n\n  render() {\n    const { submitBtnDisabled } = this.state;\n    const groupName = '<span class=\"op-target\">' + Utils.HTMLescape(this.props.groupName) +'</span>';\n    const msg = gettext('Transfer Group {placeholder} to').replace('{placeholder}', groupName);\n    return (\n      <Modal isOpen={true}>\n        <ModalHeader toggle={this.props.toggleDialog}>\n          <span dangerouslySetInnerHTML={{__html: msg}}></span>\n        </ModalHeader>\n        <ModalBody>\n          <UserSelect\n            ref=\"userSelect\"\n            isMulti={false}\n            className=\"reviewer-select\"\n            placeholder={gettext('Select a user')}\n            onSelectChange={this.handleSelectChange}\n          />\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.props.toggleDialog}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.submit} disabled={submitBtnDisabled}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nSysAdminTransferGroupDialog.propTypes = propTypes;\n\nexport default SysAdminTransferGroupDialog;\n","import React, { Component, Fragment } from 'react';\nimport { Link } from '@reach/router';\nimport moment from 'moment';\nimport { Utils } from '../../../utils/utils';\nimport { siteRoot, gettext } from '../../../utils/constants';\nimport Loading from '../../../components/loading';\nimport EmptyTip from '../../../components/empty-tip';\nimport Paginator from '../../../components/paginator';\nimport OpMenu from '../../../components/dialog/op-menu';\nimport CommonOperationConfirmationDialog from '../../../components/dialog/common-operation-confirmation-dialog';\nimport SysAdminTransferGroupDialog from '../../../components/dialog/sysadmin-dialog/sysadmin-group-transfer-dialog';\nimport UserLink from '../user-link';\n\nclass Content extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isItemFreezed: false\n    };\n  }\n\n  onFreezedItem = () => {\n    this.setState({isItemFreezed: true});\n  }\n\n  onUnfreezedItem = () => {\n    this.setState({isItemFreezed: false});\n  }\n\n  getPreviousPage = () => {\n    this.props.getListByPage(this.props.pageInfo.current_page - 1);\n  }\n\n  getNextPage = () => {\n    this.props.getListByPage(this.props.pageInfo.current_page + 1);\n  }\n\n  render() {\n    const { loading, errorMsg, items, pageInfo, curPerPage } = this.props;\n    if (loading) {\n      return <Loading />;\n    } else if (errorMsg) {\n      return <p className=\"error text-center mt-4\">{errorMsg}</p>;\n    } else {\n      const emptyTip = (\n        <EmptyTip>\n          <h2>{gettext('No groups')}</h2>\n        </EmptyTip>\n      );\n      const table = (\n        <Fragment>\n          <table>\n            <thead>\n              <tr>\n                <th width=\"35%\">{gettext('Name')}</th>\n                <th width=\"40%\">{gettext('Owner')}</th>\n                <th width=\"20%\">{gettext('Created At')}</th>\n                <th width=\"5%\">{/* operation */}</th>\n              </tr>\n            </thead>\n            <tbody>\n              {items.map((item, index) => {\n                return (<Item\n                  key={index}\n                  item={item}\n                  isItemFreezed={this.state.isItemFreezed}\n                  onFreezedItem={this.onFreezedItem}\n                  onUnfreezedItem={this.onUnfreezedItem}\n                  deleteGroup={this.props.deleteGroup}\n                  transferGroup={this.props.transferGroup}\n                />);\n              })}\n            </tbody>\n          </table>\n          {pageInfo &&\n          <Paginator\n            gotoPreviousPage={this.getPreviousPage}\n            gotoNextPage={this.getNextPage}\n            currentPage={pageInfo.current_page}\n            hasNextPage={pageInfo.has_next_page}\n            curPerPage={curPerPage}\n            resetPerPage={this.props.resetPerPage}\n          />\n          }\n        </Fragment>\n      );\n      return items.length ? table : emptyTip;\n    }\n  }\n}\n\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOpIconShown: false,\n      highlight: false,\n      isDeleteDialogOpen: false,\n      isTransferDialogOpen: false\n    };\n  }\n\n  handleMouseEnter = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        isOpIconShown: true,\n        highlight: true\n      });\n    }\n  }\n\n  handleMouseLeave = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        isOpIconShown: false,\n        highlight: false\n      });\n    }\n  }\n\n  onUnfreezedItem = () => {\n    this.setState({\n      highlight: false,\n      isOpIconShow: false\n    });\n    this.props.onUnfreezedItem();\n  }\n\n  onMenuItemClick = (operation) => {\n    switch(operation) {\n      case 'Delete':\n        this.toggleDeleteDialog();\n        break;\n      case 'Transfer':\n        this.toggleTransferDialog();\n        break;\n      default:\n        break;\n    }\n  }\n\n  toggleDeleteDialog = (e) => {\n    if (e) {\n      e.preventDefault();\n    }\n    this.setState({isDeleteDialogOpen: !this.state.isDeleteDialogOpen});\n  }\n\n  toggleTransferDialog = (e) => {\n    if (e) {\n      e.preventDefault();\n    }\n    this.setState({isTransferDialogOpen: !this.state.isTransferDialogOpen});\n  }\n\n  deleteGroup = () => {\n    this.props.deleteGroup(this.props.item.id);\n  }\n\n  transferGroup = (receiver) => {\n    this.props.transferGroup(this.props.item.id, receiver);\n  }\n\n  translateOperations = (item) => {\n    let translateResult = '';\n    switch(item) {\n      case 'Delete':\n        translateResult = gettext('Delete');\n        break;\n      case 'Transfer':\n        translateResult = gettext('Transfer');\n        break;\n    }\n\n    return translateResult;\n  }\n\n  render() {\n    const { item } = this.props;\n    const { isOpIconShown, isDeleteDialogOpen, isTransferDialogOpen } = this.state;\n\n    let groupName = '<span class=\"op-target\">' + Utils.HTMLescape(item.name) + '</span>';\n    let deleteDialogMsg = gettext('Are you sure you want to delete {placeholder} ?').replace('{placeholder}', groupName);\n\n    const groupUrl = item.parent_group_id == 0 ?\n      `${siteRoot}sys/groups/${item.id}/libraries/` :\n      `${siteRoot}sys/departments/${item.id}/`;\n\n    return (\n      <Fragment>\n        <tr className={this.state.highlight ? 'tr-highlight' : ''} onMouseEnter={this.handleMouseEnter} onMouseLeave={this.handleMouseLeave}>\n          <td><Link to={groupUrl}>{item.name}</Link></td>\n          <td>\n            {item.owner == 'system admin' ?\n              '--' :\n              <UserLink email={item.owner} name={item.owner_name} />\n            }\n          </td>\n          <td>\n            <span title={moment(item.created_at).format('llll')}>{moment(item.created_at).fromNow()}</span>\n          </td>\n          <td>\n            {(isOpIconShown && item.owner != 'system admin') &&\n            <OpMenu\n              operations={['Delete', 'Transfer']}\n              translateOperations={this.translateOperations}\n              onMenuItemClick={this.onMenuItemClick}\n              onFreezedItem={this.props.onFreezedItem}\n              onUnfreezedItem={this.onUnfreezedItem}\n            />\n            }\n          </td>\n        </tr>\n        {isDeleteDialogOpen &&\n          <CommonOperationConfirmationDialog\n            title={gettext('Delete Group')}\n            message={deleteDialogMsg}\n            executeOperation={this.deleteGroup}\n            confirmBtnText={gettext('Delete')}\n            toggleDialog={this.toggleDeleteDialog}\n          />\n        }\n        {isTransferDialogOpen &&\n          <SysAdminTransferGroupDialog\n            groupName={item.name}\n            transferGroup={this.transferGroup}\n            toggleDialog={this.toggleTransferDialog}\n          />\n        }\n      </Fragment>\n    );\n  }\n}\n\nexport default Content;\n","import React, { Component, Fragment } from 'react';\nimport { navigate } from '@reach/router';\nimport { Button } from 'reactstrap';\nimport { Utils } from '../../../utils/utils';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { siteRoot, gettext } from '../../../utils/constants';\nimport toaster from '../../../components/toast';\nimport SysAdminCreateGroupDialog from '../../../components/dialog/sysadmin-dialog/sysadmin-create-group-dialog';\nimport MainPanelTopbar from '../main-panel-topbar';\nimport Search from '../search';\nimport Content from './groups-content';\n\nclass Groups extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      groupList: [],\n      pageInfo: {},\n      perPage: 25,\n      isCreateGroupDialogOpen: false\n    };\n  }\n\n  componentDidMount () {\n    let urlParams = (new URL(window.location)).searchParams;\n    const { currentPage = 1, perPage } = this.state;\n    this.setState({\n      perPage: parseInt(urlParams.get('per_page') || perPage),\n      currentPage: parseInt(urlParams.get('page') || currentPage)\n    }, () => {\n      this.getGroupListByPage(this.state.currentPage);\n    });\n  }\n\n  toggleCreateGroupDialog = () => {\n    this.setState({isCreateGroupDialogOpen: !this.state.isCreateGroupDialogOpen});\n  }\n\n  getGroupListByPage = (page) => {\n    seafileAPI.sysAdminListAllGroups(page, this.state.perPage).then((res) => {\n      this.setState({\n        loading: false,\n        groupList: res.data.groups,\n        pageInfo: res.data.page_info\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  resetPerPage = (perPage) => {\n    this.setState({\n      perPage: perPage\n    }, () => {\n      this.getGroupListByPage(1);\n    });\n  }\n\n  createGroup = (groupName, OnwerEmail) => {\n    seafileAPI.sysAdminCreateNewGroup(groupName, OnwerEmail).then(res => {\n      let newGroupList = this.state.groupList;\n      newGroupList.unshift(res.data);\n      this.setState({\n        groupList: newGroupList\n      });\n      this.toggleCreateGroupDialog();\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  deleteGroup = (groupID) => {\n    seafileAPI.sysAdminDismissGroupByID(groupID).then(res => {\n      let newGroupList = this.state.groupList.filter(item => {\n        return item.id != groupID;\n      });\n      this.setState({\n        groupList: newGroupList\n      });\n      toaster.success(gettext('Successfully deleted 1 item.'));\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  transferGroup = (groupID, receiverEmail) => {\n    seafileAPI.sysAdminTransferGroup(receiverEmail, groupID).then(res => {\n      let newGroupList = this.state.groupList.map(item => {\n        if (item.id == groupID) {\n          item = res.data;\n        }\n        return item;\n      });\n      this.setState({\n        groupList: newGroupList\n      });\n      toaster.success(gettext('Successfully transferred the group.'));\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  getSearch = () => {\n    return <Search\n      placeholder={gettext('Search groups by name')}\n      submit={this.searchGroups}\n    />;\n  }\n\n  searchGroups = (name) => {\n    navigate(`${siteRoot}sys/search-groups/?name=${encodeURIComponent(name)}`);\n  }\n\n  render() {\n    let { isCreateGroupDialogOpen } = this.state;\n\n    return (\n      <Fragment>\n        <MainPanelTopbar search={this.getSearch()}>\n          <Fragment>\n            <Button className=\"operation-item\" onClick={this.toggleCreateGroupDialog}>{gettext('New Group')}</Button>\n            <a className=\"btn btn-secondary operation-item\" href={`${siteRoot}sys/groupadmin/export-excel/`}>{gettext('Export Excel')}</a>\n          </Fragment>\n        </MainPanelTopbar>\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <div className=\"cur-view-path\">\n              <h3 className=\"sf-heading\">{gettext('Groups')}</h3>\n            </div>\n            <div className=\"cur-view-content\">\n              <Content\n                loading={this.state.loading}\n                errorMsg={this.state.errorMsg}\n                items={this.state.groupList}\n                pageInfo={this.state.pageInfo}\n                deleteGroup={this.deleteGroup}\n                transferGroup={this.transferGroup}\n                getListByPage={this.getGroupListByPage}\n                resetPerPage={this.resetPerPage}\n                curPerPage={this.state.perPage}\n              />\n            </div>\n          </div>\n        </div>\n        {isCreateGroupDialogOpen &&\n          <SysAdminCreateGroupDialog\n            createGroup={this.createGroup}\n            toggleDialog={this.toggleCreateGroupDialog}\n          />\n        }\n      </Fragment>\n    );\n  }\n}\n\nexport default Groups;\n","import React, { Component, Fragment } from 'react';\nimport { Form, FormGroup, Input, Label, Col } from 'reactstrap';\nimport { Utils } from '../../../utils/utils';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { gettext } from '../../../utils/constants';\nimport toaster from '../../../components/toast';\nimport MainPanelTopbar from '../main-panel-topbar';\nimport Content from './groups-content';\n\nclass SearchGroups extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      name: '',\n      isSubmitBtnActive: false,\n      loading: true,\n      errorMsg: '',\n      groupList: [],\n      pageInfo: null\n    };\n  }\n\n  componentDidMount () {\n    let params = (new URL(document.location)).searchParams;\n    this.setState({\n      name: params.get('name') || ''\n    }, this.getGroups);\n  }\n\n  getGroups = () => {\n    const { name } = this.state;\n    seafileAPI.sysAdminSearchGroups(name).then((res) => {\n      this.setState({\n        loading: false,\n        groupList: res.data.group_list\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  deleteGroup = (groupID) => {\n    seafileAPI.sysAdminDismissGroupByID(groupID).then(res => {\n      let newGroupList = this.state.groupList.filter(item => {\n        return item.id != groupID;\n      });\n      this.setState({\n        groupList: newGroupList\n      });\n      toaster.success(gettext('Successfully deleted 1 item.'));\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  transferGroup = (groupID, receiverEmail) => {\n    seafileAPI.sysAdminTransferGroup(receiverEmail, groupID).then(res => {\n      let newGroupList = this.state.groupList.map(item => {\n        if (item.id == groupID) {\n          item = res.data;\n        }\n        return item;\n      });\n      this.setState({\n        groupList: newGroupList\n      });\n      toaster.success(gettext('Successfully transferred the group.'));\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  handleNameInputChange = (e) => {\n    this.setState({\n      name: e.target.value\n    }, this.checkSubmitBtnActive);\n  }\n\n  checkSubmitBtnActive = () => {\n    const { name } = this.state;\n    this.setState({\n      isSubmitBtnActive: name.trim()\n    });\n  }\n\n  render() {\n    const { name, isSubmitBtnActive } = this.state;\n\n    return (\n      <Fragment>\n        <MainPanelTopbar />\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <div className=\"cur-view-path\">\n              <h3 className=\"sf-heading\">{gettext('Groups')}</h3>\n            </div>\n            <div className=\"cur-view-content\">\n              <div className=\"mt-4 mb-6\">\n                <h4 className=\"border-bottom font-weight-normal mb-2 pb-1\">{gettext('Search Groups')}</h4>\n                <p className=\"text-secondary small\">{gettext('Tip: you can search by keyword in name.')}</p>\n                <Form>\n                  <FormGroup row>\n                    <Label for=\"name\" sm={1}>{gettext('Name')}</Label>\n                    <Col sm={5}>\n                      <Input type=\"text\" name=\"name\" id=\"name\" value={name} onChange={this.handleNameInputChange} />\n                    </Col>\n                  </FormGroup>\n                  <FormGroup row>\n                    <Col sm={{size: 5, offset: 1}}>\n                      <button className=\"btn btn-outline-primary\" disabled={!isSubmitBtnActive} onClick={this.getGroups}>{gettext('Submit')}</button>\n                    </Col>\n                  </FormGroup>\n                </Form>\n              </div>\n              <div className=\"mt-4 mb-6\">\n                <h4 className=\"border-bottom font-weight-normal mb-2 pb-1\">{gettext('Result')}</h4>\n                <Content\n                  loading={this.state.loading}\n                  errorMsg={this.state.errorMsg}\n                  items={this.state.groupList}\n                  deleteGroup={this.deleteGroup}\n                  transferGroup={this.transferGroup}\n                />\n              </div>\n            </div>\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nexport default SearchGroups;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Link } from '@reach/router';\nimport { siteRoot, gettext } from '../../../utils/constants';\n\nconst propTypes = {\n  currentItem: PropTypes.string.isRequired,\n  groupID: PropTypes.string.isRequired\n};\n\nclass Nav extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.navItems = [\n      {name: 'repos', urlPart: 'groups/' + this.props.groupID + '/libraries', text: gettext('Libraries')},\n      {name: 'members', urlPart: 'groups/' + this.props.groupID + '/members', text: gettext('Members')}\n    ];\n  }\n\n  render() {\n    const { groupName, currentItem } = this.props;\n    return (\n      <div>\n        <div className=\"cur-view-path\">\n          <h3 className=\"sf-heading\"><Link to={`${siteRoot}sys/groups/`}>{gettext('Groups')}</Link> / {groupName}</h3>\n        </div>\n        <ul className=\"nav border-bottom mx-4\">\n          {this.navItems.map((item, index) => {\n            return (\n              <li className=\"nav-item mr-2\" key={index}>\n                <Link to={`${siteRoot}sys/${item.urlPart}/`} className={`nav-link ${currentItem == item.name ? ' active' : ''}`}>{item.text}</Link>\n              </li>\n            );\n          })}\n        </ul>\n      </div>\n    );\n  }\n}\n\nNav.propTypes = propTypes;\n\nexport default Nav;\n","import React, { Component, Fragment } from 'react';\nimport { Utils } from '../../../utils/utils';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { siteRoot, gettext, isPro } from '../../../utils/constants';\nimport toaster from '../../../components/toast';\nimport EmptyTip from '../../../components/empty-tip';\nimport Loading from '../../../components/loading';\nimport CommonOperationConfirmationDialog from '../../../components/dialog/common-operation-confirmation-dialog';\nimport MainPanelTopbar from '../main-panel-topbar';\nimport UserLink from '../user-link';\nimport GroupNav from './group-nav';\n\nconst { enableSysAdminViewRepo } = window.sysadmin.pageOptions;\n\nclass Content extends Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    const { loading, errorMsg, items } = this.props;\n    if (loading) {\n      return <Loading />;\n    } else if (errorMsg) {\n      return <p className=\"error text-center mt-4\">{errorMsg}</p>;\n    } else {\n      const emptyTip = (\n        <EmptyTip>\n          <h2>{gettext('No libraries')}</h2>\n        </EmptyTip>\n      );\n      const table = (\n        <Fragment>\n          <table className=\"table-hover\">\n            <thead>\n              <tr>\n                <th width=\"5%\">{/* icon */}</th>\n                <th width=\"30%\">{gettext('Name')}</th>\n                <th width=\"30%\">{gettext('Size')}</th>\n                <th width=\"25%\">{gettext('Shared By')}</th>\n                <th width=\"10%\">{/*Operations*/}</th>\n              </tr>\n            </thead>\n            <tbody>\n              {items.map((item, index) => {\n                return (<Item\n                  key={index}\n                  item={item}\n                  unshareRepo={this.props.unshareRepo}\n                />);\n              })}\n            </tbody>\n          </table>\n        </Fragment>\n      );\n      return items.length ? table : emptyTip;\n    }\n  }\n}\n\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOpIconShown: false,\n      isUnshareRepoDialogOpen: false\n    };\n  }\n\n  handleMouseEnter = () => {\n    this.setState({isOpIconShown: true});\n  }\n\n  handleMouseLeave = () => {\n    this.setState({isOpIconShown: false});\n  }\n\n  toggleUnshareRepoDialog = (e) => {\n    if (e) {\n      e.preventDefault();\n    }\n    this.setState({isUnshareRepoDialogOpen: !this.state.isUnshareRepoDialogOpen});\n  }\n\n  unshareRepo = () => {\n    const { item } = this.props;\n    this.props.unshareRepo(item.repo_id, item.name);\n    this.toggleUnshareRepoDialog();\n  }\n\n  renderRepoName = () => {\n    const { item } = this.props;\n    const repo = item;\n    repo.id = item.repo_id;\n    if (repo.name) {\n      if (isPro && enableSysAdminViewRepo && !repo.encrypted) {\n        return <a href={`${siteRoot}sys/libraries/${repo.id}/`}>{repo.name}</a>;\n      } else {\n        return repo.name;\n      }\n    } else {\n      return '--';\n    }\n  }\n\n  render() {\n    let { isOpIconShown, isUnshareRepoDialogOpen } = this.state;\n    let { item } = this.props;\n\n    let iconUrl = Utils.getLibIconUrl(item);\n    let iconTitle = Utils.getLibIconTitle(item);\n\n    let repoName = '<span class=\"op-target\">' + Utils.HTMLescape(item.name) + '</span>';\n    let dialogMsg = gettext('Are you sure you want to unshare {placeholder} ?').replace('{placeholder}', repoName);\n\n    return (\n      <Fragment>\n        <tr onMouseEnter={this.handleMouseEnter} onMouseLeave={this.handleMouseLeave}>\n          <td><img src={iconUrl} title={iconTitle} alt={iconTitle} width=\"24\" /></td>\n          <td>{this.renderRepoName()}</td>\n          <td>{Utils.bytesToSize(item.size)}</td>\n          <td>\n            <UserLink email={item.shared_by} name={item.shared_by_name} />\n          </td>\n          <td>\n            <a href=\"#\" className={`action-icon sf2-icon-x3 ${isOpIconShown ? '' : 'invisible'}`} title={gettext('Unshare')} onClick={this.toggleUnshareRepoDialog}></a>\n          </td>\n        </tr>\n        {isUnshareRepoDialogOpen &&\n          <CommonOperationConfirmationDialog\n            title={gettext('Unshare Library')}\n            message={dialogMsg}\n            executeOperation={this.unshareRepo}\n            confirmBtnText={gettext('Unshare')}\n            toggleDialog={this.toggleUnshareRepoDialog}\n          />\n        }\n      </Fragment>\n    );\n  }\n}\n\nclass GroupRepos extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      groupName: '',\n      repoList: []\n    };\n  }\n\n  componentDidMount () {\n    seafileAPI.sysAdminListGroupRepos(this.props.groupID).then((res) => {\n      this.setState({\n        loading: false,\n        repoList: res.data.libraries,\n        groupName: res.data.group_name\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  unshareRepo = (repoID, repoName) => {\n    seafileAPI.sysAdminUnshareRepoFromGroup(this.props.groupID, repoID).then(res => {\n      let newRepoList = this.state.repoList.filter(item => {\n        return item.repo_id != repoID;\n      });\n      this.setState({\n        repoList: newRepoList\n      });\n      const msg = gettext('Successfully unshared library {placeholder}')\n        .replace('{placeholder}', repoName);\n      toaster.success(msg);\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  render() {\n    return (\n      <Fragment>\n        <MainPanelTopbar />\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <GroupNav\n              groupID={this.props.groupID}\n              groupName={this.state.groupName}\n              currentItem=\"repos\"\n            />\n            <div className=\"cur-view-content\">\n              <Content\n                loading={this.state.loading}\n                errorMsg={this.state.errorMsg}\n                items={this.state.repoList}\n                unshareRepo={this.unshareRepo}\n              />\n            </div>\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nexport default GroupRepos;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter } from 'reactstrap';\nimport { gettext } from '../../../utils/constants';\nimport UserSelect from '../../user-select';\n\nconst propTypes = {\n  toggle: PropTypes.func.isRequired,\n  addMembers: PropTypes.func.isRequired\n};\n\nclass SysAdminGroupAddMemberDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      selectedOptions: null,\n      isSubmitBtnDisabled: true\n    };\n  }\n\n  handleSelectChange = (options) => {\n    this.setState({\n      selectedOptions: options,\n      isSubmitBtnDisabled: !options.length\n    });\n  }\n\n  addMembers = () => {\n    let emails = this.state.selectedOptions.map(item => item.email);\n    this.props.addMembers(emails);\n    this.props.toggle();\n  }\n\n  render() {\n    const { isSubmitBtnDisabled } = this.state;\n    return (\n      <Modal isOpen={true}>\n        <ModalHeader toggle={this.props.toggle}>{gettext('Add Member')}</ModalHeader>\n        <ModalBody>\n          <UserSelect\n            ref=\"userSelect\"\n            isMulti={true}\n            className=\"reviewer-select\"\n            placeholder={gettext('Search users...')}\n            onSelectChange={this.handleSelectChange}\n          />\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.props.toggle}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.addMembers} disabled={isSubmitBtnDisabled}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nSysAdminGroupAddMemberDialog.propTypes = propTypes;\n\nexport default SysAdminGroupAddMemberDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../../utils/constants';\nimport SelectEditor from './select-editor';\n\nconst propTypes = {\n  isTextMode: PropTypes.bool.isRequired,\n  isEditIconShow: PropTypes.bool.isRequired,\n  roleOptions: PropTypes.array.isRequired,\n  currentRole: PropTypes.string.isRequired,\n  onRoleChanged: PropTypes.func.isRequired\n};\n\nclass SysAdminGroupRoleEditor extends React.Component {\n\n  translateRoles = (role) => {\n    switch (role) {\n      case 'Member':\n        return gettext('Member');\n      case 'Admin':\n        return gettext('Admin');\n      default:\n        return role;\n    }\n  }\n\n  render() {\n    return (\n      <SelectEditor\n        isTextMode={this.props.isTextMode}\n        isEditIconShow={this.props.isEditIconShow}\n        options={this.props.roleOptions}\n        currentOption={this.props.currentRole}\n        onOptionChanged={this.props.onRoleChanged}\n        translateOption={this.translateRoles}\n      />\n    );\n  }\n}\n\nSysAdminGroupRoleEditor.propTypes = propTypes;\n\nexport default SysAdminGroupRoleEditor;","import React, { Component, Fragment } from 'react';\nimport { Button } from 'reactstrap';\nimport { Utils } from '../../../utils/utils';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { siteRoot, gettext } from '../../../utils/constants';\nimport toaster from '../../../components/toast';\nimport EmptyTip from '../../../components/empty-tip';\nimport Loading from '../../../components/loading';\nimport Paginator from '../../../components/paginator';\nimport CommonOperationConfirmationDialog from '../../../components/dialog/common-operation-confirmation-dialog';\nimport SysAdminGroupAddMemberDialog from '../../../components/dialog/sysadmin-dialog/sysadmin-group-add-member-dialog';\nimport SysAdminGroupRoleEditor from '../../../components/select-editor/sysadmin-group-role-editor';\nimport MainPanelTopbar from '../main-panel-topbar';\nimport UserLink from '../user-link';\nimport GroupNav from './group-nav';\n\nclass Content extends Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  getPreviousPageList = () => {\n    this.props.getListByPage(this.props.pageInfo.current_page - 1);\n  }\n\n  getNextPageList = () => {\n    this.props.getListByPage(this.props.pageInfo.current_page + 1);\n  }\n\n  render() {\n    const { loading, errorMsg, items, pageInfo, curPerPage } = this.props;\n    if (loading) {\n      return <Loading />;\n    } else if (errorMsg) {\n      return <p className=\"error text-center mt-4\">{errorMsg}</p>;\n    } else {\n      const emptyTip = (\n        <EmptyTip>\n          <h2>{gettext('No members')}</h2>\n        </EmptyTip>\n      );\n      const table = (\n        <Fragment>\n          <table className=\"table-hover\">\n            <thead>\n              <tr>\n                <th width=\"5%\">{/* icon */}</th>\n                <th width=\"55%\">{gettext('Name')}</th>\n                <th width=\"30%\">{gettext('Role')}</th>\n                <th width=\"10%\">{/*Operations*/}</th>\n              </tr>\n            </thead>\n            <tbody>\n              {items.map((item, index) => {\n                return (<Item\n                  key={index}\n                  item={item}\n                  removeMember={this.props.removeMember}\n                  updateMemberRole={this.props.updateMemberRole}\n                />);\n              })}\n            </tbody>\n          </table>\n          {pageInfo &&\n          <Paginator\n            gotoPreviousPage={this.getPreviousPageList}\n            gotoNextPage={this.getNextPageList}\n            currentPage={pageInfo.current_page}\n            hasNextPage={pageInfo.has_next_page}\n            curPerPage={curPerPage}\n            resetPerPage={this.props.resetPerPage}\n          />\n          }\n        </Fragment>\n      );\n      return items.length ? table : emptyTip;\n    }\n  }\n}\n\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOpIconShown: false,\n      isDeleteDialogOpen: false\n    };\n  }\n\n  handleMouseEnter = () => {\n    this.setState({isOpIconShown: true});\n  }\n\n  handleMouseLeave = () => {\n    this.setState({isOpIconShown: false});\n  }\n\n  toggleDeleteDialog = (e) => {\n    if (e) {\n      e.preventDefault();\n    }\n    this.setState({isDeleteDialogOpen: !this.state.isDeleteDialogOpen});\n  }\n\n  removeMember = () => {\n    const { item } = this.props;\n    this.props.removeMember(item.email, item.name);\n    this.toggleDeleteDialog();\n  }\n\n  updateMemberRole = (role) => {\n    this.props.updateMemberRole(this.props.item.email, role);\n  }\n\n  render() {\n    let { isOpIconShown, isDeleteDialogOpen } = this.state;\n    let { item } = this.props;\n\n    let itemName = '<span class=\"op-target\">' + Utils.HTMLescape(item.name) + '</span>';\n    let dialogMsg = gettext('Are you sure you want to remove {placeholder} ?').replace('{placeholder}', itemName);\n\n    return (\n      <Fragment>\n        <tr onMouseEnter={this.handleMouseEnter} onMouseLeave={this.handleMouseLeave}>\n          <td><img src={item.avatar_url} alt=\"\" className=\"rounded-circle\" width=\"24\" /></td>\n          <td><UserLink email={item.email} name={item.name} /></td>\n          <td>\n            {item.role == 'Owner' ?\n              gettext('Owner') :\n              <SysAdminGroupRoleEditor\n                isTextMode={true}\n                isEditIconShow={isOpIconShown}\n                roleOptions={['Member', 'Admin']}\n                currentRole={item.role}\n                onRoleChanged={this.updateMemberRole}\n              />\n            }\n          </td>\n          <td>\n            {item.role != 'Owner' &&\n            <a href=\"#\" className={`action-icon sf2-icon-x3 ${isOpIconShown ? '' : 'invisible'}`} title={gettext('Remove')} onClick={this.toggleDeleteDialog}></a>\n            }\n          </td>\n        </tr>\n        {isDeleteDialogOpen &&\n          <CommonOperationConfirmationDialog\n            title={gettext('Remove Member')}\n            message={dialogMsg}\n            executeOperation={this.removeMember}\n            confirmBtnText={gettext('Remove')}\n            toggleDialog={this.toggleDeleteDialog}\n          />\n        }\n      </Fragment>\n    );\n  }\n}\n\nclass GroupMembers extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      groupName: '',\n      memberList: [],\n      pageInfo: {},\n      currentPage: 1,\n      perPage: 25,\n      isAddMemberDialogOpen: false\n    };\n  }\n\n  componentDidMount () {\n\n    let urlParams = (new URL(window.location)).searchParams;\n    const { currentPage, perPage } = this.state;\n    this.setState({\n      currentPage: parseInt(urlParams.get('page') || currentPage),\n      perPage: parseInt(urlParams.get('per_page') || perPage)\n    }, () => {\n      this.getListByPage(this.state.currentPage);\n    });\n  }\n\n  getListByPage = (page) => {\n    const { perPage } = this.state;\n    seafileAPI.sysAdminListGroupMembers(this.props.groupID, page, perPage).then((res) => {\n      this.setState({\n        loading: false,\n        memberList: res.data.members,\n        groupName: res.data.group_name,\n        pageInfo: res.data.page_info\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  resetPerPage = (perPage) => {\n    this.setState({\n      perPage: perPage\n    }, () => {\n      this.getListByPage(1);\n    });\n  }\n\n  toggleAddMemgerDialog = () => {\n    this.setState({isAddMemberDialogOpen: !this.state.isAddMemberDialogOpen});\n  }\n\n  addMembers = (emails) => {\n    seafileAPI.sysAdminAddGroupMember(this.props.groupID, emails).then(res => {\n      let newMemberList = res.data.success;\n      if (newMemberList.length) {\n        this.setState({\n          memberList: newMemberList.concat(this.state.memberList)\n        });\n        newMemberList.map(item => {\n          const msg = gettext('Successfully added {email_placeholder}')\n            .replace('{email_placeholder}', item.email);\n          toaster.success(msg);\n        });\n      }\n      res.data.failed.map(item => {\n        const msg = gettext('Failed to add {email_placeholder}: {error_msg_placeholder}')\n          .replace('{email_placeholder}', item.email)\n          .replace('{error_msg_placeholder}', item.error_msg);\n        toaster.danger(msg, {duration: 3});\n      });\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  removeMember = (email, name) => {\n    seafileAPI.sysAdminDeleteGroupMember(this.props.groupID, email).then(res => {\n      let newRepoList = this.state.memberList.filter(item => {\n        return item.email != email;\n      });\n      this.setState({\n        memberList: newRepoList\n      });\n      toaster.success(gettext('Successfully removed {placeholder}.').replace('{placeholder}', name));\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  updateMemberRole = (email, role) => {\n    let isAdmin = role == 'Admin';\n    seafileAPI.sysAdminUpdateGroupMemberRole(this.props.groupID, email, isAdmin).then(res => {\n      let newRepoList = this.state.memberList.map(item => {\n        if (item.email == email) {\n          item.role = role;\n        }\n        return item;\n      });\n      this.setState({\n        memberList: newRepoList\n      });\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  render() {\n    let { isAddMemberDialogOpen } = this.state;\n    return (\n      <Fragment>\n        <MainPanelTopbar>\n          <Button className=\"btn btn-secondary operation-item\" onClick={this.toggleAddMemgerDialog}>{gettext('Add Member')}</Button>\n        </MainPanelTopbar>\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <GroupNav\n              currentItem=\"members\"\n              groupID={this.props.groupID}\n              groupName={this.state.groupName}\n            />\n            <div className=\"cur-view-content\">\n              <Content\n                loading={this.state.loading}\n                errorMsg={this.state.errorMsg}\n                items={this.state.memberList}\n                removeMember={this.removeMember}\n                updateMemberRole={this.updateMemberRole}\n                pageInfo={this.state.pageInfo}\n                curPerPage={this.state.perPage}\n                getListByPage={this.getListByPage}\n                resetPerPage={this.resetPerPage}\n              />\n            </div>\n          </div>\n        </div>\n        {isAddMemberDialogOpen &&\n          <SysAdminGroupAddMemberDialog\n            addMembers={this.addMembers}\n            toggle={this.toggleAddMemgerDialog}\n          />\n        }\n      </Fragment>\n    );\n  }\n}\n\nexport default GroupMembers;\n","import React from 'react';\nimport '../../../css/org-department-item.css';\n\nclass Departments extends React.Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    return (\n      <div className=\"h-100 org-departments\">\n        {this.props.children}\n      </div>\n    );\n  }\n}\n\nexport default Departments;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter, Input, Form, FormGroup, Label } from 'reactstrap';\nimport { gettext, orgID } from '../../../utils/constants';\nimport { seafileAPI } from '../../../utils/seafile-api';\n\nconst propTypes = {\n  groupID: PropTypes.string,\n  parentGroupID: PropTypes.string,\n  toggle: PropTypes.func.isRequired,\n  onDepartChanged: PropTypes.func.isRequired,\n};\n\nclass AddDepartDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      departName: '',\n      errMessage: '',\n    };\n    this.newInput = React.createRef();\n  }\n\n  componentDidMount() {\n    this.newInput.focus();\n    this.newInput.setSelectionRange(0, 0);\n  }\n\n  handleSubmit = () => {\n    let isValid = this.validateName();\n    if (isValid) {\n      let parentGroup = -1;\n      if (this.props.parentGroupID) {\n        parentGroup = this.props.parentGroupID;\n      }\n      seafileAPI.sysAdminAddNewDepartment(parentGroup, this.state.departName.trim()).then((res) => {\n        this.props.toggle();\n        this.props.onDepartChanged();\n      }).catch(error => {\n        let errorMsg = gettext(error.response.data.error_msg);\n        this.setState({ errMessage: errorMsg });\n      });\n    }\n  }\n\n  validateName = () => {\n    let errMessage = '';\n    const name = this.state.departName.trim();\n    if (!name.length) {\n      errMessage = gettext('Name is required');\n      this.setState({ errMessage: errMessage });\n      return false;\n    }\n    return true;\n  }\n\n  handleChange = (e) => {\n    this.setState({\n      departName: e.target.value,\n    });\n  }\n\n  handleKeyPress = (e) => {\n    if (e.key === 'Enter') {\n      this.handleSubmit();\n      e.preventDefault();\n    }\n  }\n\n  render() {\n    let header = this.props.parentGroupID ? gettext('New Sub-department') : gettext('New Department');\n    return (\n      <Modal isOpen={true} toggle={this.props.toggle}>\n        <ModalHeader toggle={this.props.toggle}>{header}</ModalHeader>\n        <ModalBody>\n          <Form>\n            <FormGroup>\n              <Label for=\"departName\">{gettext('Name')}</Label>\n              <Input\n                id=\"departName\"\n                onKeyPress={this.handleKeyPress}\n                value={this.state.departName}\n                onChange={this.handleChange}\n                innerRef={input => {this.newInput = input;}}\n              />\n            </FormGroup>\n          </Form>\n          { this.state.errMessage && <p className=\"error\">{this.state.errMessage}</p> }\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"primary\" onClick={this.handleSubmit}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nAddDepartDialog.propTypes = propTypes;\n\nexport default AddDepartDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter } from 'reactstrap';\nimport { gettext } from '../../../utils/constants';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { Utils } from '../../../utils/utils';\nimport toaster from '../../../components/toast';\n\nconst propTypes = {\n  groupName: PropTypes.string,\n  groupID: PropTypes.number.isRequired,\n  toggle: PropTypes.func.isRequired,\n  onDepartChanged: PropTypes.func.isRequired\n};\n\nclass DeleteDepartDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  deleteDepart = () => {\n    this.props.toggle();\n    seafileAPI.sysAdminDeleteDepartment(this.props.groupID).then((res) => {\n      this.props.onDepartChanged();\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  render() {\n    let tipMessage = gettext('Are you sure you want to delete {placeholder} ?');\n    tipMessage = tipMessage.replace('{placeholder}', '<span class=\"op-target\">' + Utils.HTMLescape(this.props.groupName) + '</span>');\n    return (\n      <Modal isOpen={true} toggle={this.props.toggle}>\n        <ModalHeader toggle={this.props.toggle}>{gettext('Delete Department')}</ModalHeader>\n        <ModalBody>\n          <p dangerouslySetInnerHTML={{__html: tipMessage}}></p>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.props.toggle}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.deleteDepart}>{gettext('Delete')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nDeleteDepartDialog.propTypes = propTypes;\n\nexport default DeleteDepartDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter, Input, InputGroupAddon, InputGroup } from 'reactstrap';\nimport { gettext } from '../../../utils/constants';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { Utils } from '../../../utils/utils';\nimport toaster from '../../toast';\n\nconst propTypes = {\n  toggle: PropTypes.func.isRequired,\n  groupID: PropTypes.number.isRequired,\n  onDepartChanged: PropTypes.func.isRequired,\n};\n\nclass SetGroupQuotaDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      quota: '',\n      errMessage: '',\n    };\n    this.newInput = React.createRef();\n  }\n\n  componentDidMount() {\n    this.newInput.focus();\n    this.newInput.setSelectionRange(0, 0);\n  }\n\n  setGroupQuota = () => {\n    const numberReg = /^[1-9]\\d*$/im;\n    let quota = this.state.quota;\n    if ((quota.length && numberReg.test(quota)) || quota == -2) {\n      this.setState({ errMessage: '' });\n      let newQuota = this.state.quota == -2 ? this.state.quota : this.state.quota * 1000000;\n      seafileAPI.sysAdminUpdateDepartmentQuota(this.props.groupID, newQuota).then((res) => {\n        this.props.toggle();\n        this.props.onDepartChanged();\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    } else {\n      const err = gettext('Quota is invalid.');\n      this.setState({ errMessage: err });\n    }\n  }\n\n  handleChange = (e) => {\n    const quota = e.target.value.trim();\n    this.setState({ quota: quota });\n  }\n\n  handleKeyPress = (e) => {\n    if (e.key === 'Enter') {\n      this.setGroupQuota();\n      e.preventDefault();\n    }\n  }\n\n  render() {\n    return (\n      <Modal isOpen={true} toggle={this.props.toggle}>\n        <ModalHeader toggle={this.props.toggle}>{gettext('Set Quota')}</ModalHeader>\n        <ModalBody>\n          <InputGroup>\n            <Input\n              onKeyPress={this.handleKeyPress}\n              value={this.state.quota}\n              onChange={this.handleChange}\n              innerRef={input => {this.newInput = input;}}\n            />\n            <InputGroupAddon addonType=\"append\">{'MB'}</InputGroupAddon>\n          </InputGroup>\n          <p className=\"tip\">\n            <br/><span>{gettext('An integer that is greater than 0 or equal to -2.')}</span><br/>\n            <span>{gettext('Tip: -2 means no limit.')}</span>\n          </p>\n          { this.state.errMessage && <p className=\"error\">{this.state.errMessage}</p> }\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"primary\" onClick={this.setGroupQuota}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nSetGroupQuotaDialog.propTypes = propTypes;\n\nexport default SetGroupQuotaDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport moment from 'moment';\nimport { Link } from '@reach/router';\nimport { Utils } from '../../../utils/utils.js';\nimport { siteRoot } from '../../../utils/constants';\n\nconst GroupItemPropTypes = {\n  group: PropTypes.object.isRequired,\n  showSetGroupQuotaDialog: PropTypes.func.isRequired,\n  showDeleteDepartDialog: PropTypes.func.isRequired,\n};\n\nclass GroupItem extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      highlight: false,\n    };\n  }\n\n  onMouseEnter = () => {\n    this.setState({ highlight: true });\n  }\n\n  onMouseLeave = () => {\n    this.setState({ highlight: false });\n  }\n\n  render() {\n    const group = this.props.group;\n    const highlight = this.state.highlight;\n    const newHref = siteRoot+ 'sys/departments/' + group.id + '/';\n    return (\n      <tr className={highlight ? 'tr-highlight' : ''} onMouseEnter={this.onMouseEnter} onMouseLeave={this.onMouseLeave}>\n        <td><Link to={newHref}>{group.name}</Link></td>\n        <td>{moment(group.created_at).fromNow()}</td>\n        <td onClick={this.props.showSetGroupQuotaDialog.bind(this, group.id)}>\n          {Utils.bytesToSize(group.quota)}{' '}\n          <span title=\"Edit Quota\" className={`fa fa-pencil-alt attr-action-icon ${highlight ? '' : 'vh'}`}></span>\n        </td>\n        <td className=\"cursor-pointer text-center\" onClick={this.props.showDeleteDepartDialog.bind(this, group)}>\n          <span className={`sf2-icon-delete action-icon  ${highlight ? '' : 'vh'}`} title=\"Delete\"></span>\n        </td>\n      </tr>\n    );\n  }\n}\n\nGroupItem.propTypes = GroupItemPropTypes;\n\nexport default GroupItem;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport moment from 'moment';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport MainPanelTopbar from '../main-panel-topbar';\nimport ModalPortal from '../../../components/modal-portal';\nimport AddDepartDialog from '../../../components/dialog/sysadmin-dialog/sysadmin-add-department-dialog';\nimport DeleteDepartDialog from '../../../components/dialog/sysadmin-dialog/sysadmin-delete-department-dialog';\nimport SetGroupQuotaDialog from '../../../components/dialog/sysadmin-dialog/sysadmin-set-group-quota-dialog';\nimport { gettext, lang } from '../../../utils/constants';\nimport GroupItem from './group-item';\nimport '../../../css/org-department-item.css';\n\nmoment.locale(lang);\n\nclass DepartmentsList extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      groups: null,\n      groupID: '',\n      groupName: '',\n      showDeleteDepartDialog: false,\n      showSetGroupQuotaDialog: false,\n      isShowAddDepartDialog: false,\n    };\n  }\n\n  componentDidMount() {\n    this.listDepartGroups();\n  }\n\n  listDepartGroups = () => {\n    seafileAPI.sysAdminListAllDepartments().then(res => {\n      this.setState({ groups: res.data.data });\n    });\n  }\n\n  showDeleteDepartDialog = (group) => {\n    this.setState({ showDeleteDepartDialog: true, groupID: group.id, groupName: group.name });\n  }\n\n  showSetGroupQuotaDialog = (groupID) => {\n    this.setState({ showSetGroupQuotaDialog: true, groupID: groupID });\n  }\n\n  toggleAddDepartDialog = () => {\n    this.setState({ isShowAddDepartDialog: !this.state.isShowAddDepartDialog});\n  }\n\n  toggleCancel = () => {\n    this.setState({\n      showDeleteDepartDialog: false,\n      showSetGroupQuotaDialog: false,\n    });\n  }\n\n  onDepartChanged = () => {\n    this.listDepartGroups();\n  }\n\n  render() {\n    const groups = this.state.groups;\n    const topbarChildren = (\n      <Fragment>\n        <button className='btn btn-secondary operation-item' title={gettext('New Department')} onClick={this.toggleAddDepartDialog}>{gettext('New Department')}\n        </button>\n        {this.state.isShowAddDepartDialog && (\n          <ModalPortal>\n            <AddDepartDialog\n              onDepartChanged={this.onDepartChanged}\n              groupID={this.state.groupID}\n              toggle={this.toggleAddDepartDialog}\n            />\n          </ModalPortal>\n        )}\n      </Fragment>\n    );\n    return (\n      <Fragment>\n        <MainPanelTopbar children={topbarChildren}/>\n        <div className=\"main-panel-center flex-row h-100\">\n          <div className=\"cur-view-container o-auto\">\n            <div className=\"cur-view-path\">\n              <div className=\"fleft\">\n                <h3 className=\"sf-heading\">{gettext('Departments')}</h3>\n              </div>\n            </div>\n            <div className=\"cur-view-content\">\n              {groups && groups.length > 0 ?\n                <table>\n                  <thead>\n                    <tr>\n                      <th width=\"40%\">{gettext('Name')}</th>\n                      <th width=\"25%\">{gettext('Created At')}</th>\n                      <th width=\"20%\">{gettext('Quota')}</th>\n                      <th width=\"15%\"></th>\n                    </tr>\n                  </thead>\n                  <tbody>\n                    {groups.map((group, index) => {\n                      return(\n                        <Fragment key={group.id}>\n                          <GroupItem\n                            group={group}\n                            showDeleteDepartDialog={this.showDeleteDepartDialog}\n                            showSetGroupQuotaDialog={this.showSetGroupQuotaDialog}\n                          />\n                        </Fragment>\n                      );\n                    })}\n                  </tbody>\n                </table>\n                :\n                <p className=\"no-group\">{gettext('No departments')}</p>\n              }\n            </div>\n            {this.state.showDeleteDepartDialog && (\n              <ModalPortal>\n                <DeleteDepartDialog\n                  toggle={this.toggleCancel}\n                  groupID={this.state.groupID}\n                  groupName={this.state.groupName}\n                  onDepartChanged={this.onDepartChanged}\n                />\n              </ModalPortal>\n            )}\n            {this.state.showSetGroupQuotaDialog && (\n              <ModalPortal>\n                <SetGroupQuotaDialog\n                  toggle={this.toggleCancel}\n                  groupID={this.state.groupID}\n                  onDepartChanged={this.onDepartChanged}\n                />\n              </ModalPortal>\n            )}\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nexport default DepartmentsList;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter } from 'reactstrap';\nimport { gettext, orgID } from '../../../utils/constants';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { Utils } from '../../../utils/utils';\nimport toaster from '../../toast';\nimport UserSelect from '../../user-select.js';\n\nconst propTypes = {\n  toggle: PropTypes.func.isRequired,\n  groupID:  PropTypes.string.isRequired,\n  onMemberChanged: PropTypes.func.isRequired\n};\n\nclass AddMemberDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      selectedOption: null,\n      errMessage: '',\n    };\n  }\n\n  handleSelectChange = (option) => {\n    this.setState({ selectedOption: option });\n  }\n\n  handleSubmit = () => {\n    if (!this.state.selectedOption) return;\n    const emails = this.state.selectedOption.map(item => item.email);\n    this.refs.orgSelect.clearSelect();\n    this.setState({ errMessage: [] });\n    seafileAPI.sysAdminAddGroupMember(this.props.groupID, emails).then((res) => {\n      this.setState({ selectedOption: null });\n      if (res.data.failed.length > 0) {\n        this.setState({ errMessage: res.data.failed[0].error_msg });\n      }\n      if (res.data.success.length > 0) {\n        this.props.onMemberChanged();\n        this.props.toggle();\n      }\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  render() {\n    return (\n      <Modal isOpen={true} toggle={this.props.toggle}>\n        <ModalHeader toggle={this.props.toggle}>{gettext('Add Member')}</ModalHeader>\n        <ModalBody>\n          <UserSelect\n            placeholder={gettext('Search users...')}\n            onSelectChange={this.handleSelectChange}\n            ref=\"orgSelect\"\n            isMulti={true}\n            className='org-add-member-select'\n          />\n          { this.state.errMessage && <p className=\"error\">{this.state.errMessage}</p> }\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"primary\" onClick={this.handleSubmit}>{gettext('Submit')}</Button>\n          <Button color=\"secondary\" onClick={this.props.toggle}>{gettext('Cancel')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nAddMemberDialog.propTypes = propTypes;\n\nexport default AddMemberDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter } from 'reactstrap';\nimport { gettext } from '../../../utils/constants';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { Utils } from '../../../utils/utils';\nimport toaster from '../../toast';\n\nconst propTypes = {\n  member: PropTypes.object.isRequired,\n  groupID: PropTypes.string.isRequired,\n  toggle: PropTypes.func.isRequired,\n  onMemberChanged: PropTypes.func.isRequired\n};\n\nclass DeleteMemberDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  deleteMember = () => {\n    const userEmail = this.props.member.email;\n    seafileAPI.sysAdminDeleteGroupMember(this.props.groupID, userEmail).then((res) => {\n      if (res.data.success) {\n        this.props.onMemberChanged();\n        this.props.toggle();\n      }\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  render() {\n    let tipMessage = gettext('Are you sure you want to delete {placeholder} ?');\n    tipMessage = tipMessage.replace('{placeholder}', '<span class=\"op-target\">' + Utils.HTMLescape(this.props.member.name) + '</span>');\n    return (\n      <Modal isOpen={true} toggle={this.props.toggle}>\n        <ModalHeader toggle={this.props.toggle}>{gettext('Delete Member')}</ModalHeader>\n        <ModalBody>\n          <div dangerouslySetInnerHTML={{__html: tipMessage}}></div>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"primary\" onClick={this.deleteMember}>{gettext('Delete')}</Button>\n          <Button color=\"secondary\" onClick={this.props.toggle}>{gettext('Cancel')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nDeleteMemberDialog.propTypes = propTypes;\n\nexport default DeleteMemberDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter, Input, Form, FormGroup, Label } from 'reactstrap';\nimport { gettext } from '../../../utils/constants';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { Utils } from '../../../utils/utils';\n\nconst propTypes = {\n  toggle: PropTypes.func.isRequired,\n  groupID: PropTypes.string.isRequired,\n  onRepoChanged: PropTypes.func.isRequired,\n};\n\nclass AddRepoDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      repoName: '',\n      errMessage: '',\n    };\n    this.newInput = React.createRef();\n  }\n\n  componentDidMount() {\n    this.newInput.focus();\n    this.newInput.setSelectionRange(0, 0);\n  }\n\n  handleSubmit = () => {\n    let isValid = this.validateName();\n    if (isValid) {\n      seafileAPI.sysAdminAddRepoInDepartment(this.props.groupID, this.state.repoName.trim()).then((res) => {\n        this.props.toggle();\n        this.props.onRepoChanged();\n      }).catch(error => {\n        let errorMsg = Utils.getErrorMsg(error);\n        this.setState({ errMessage: errorMsg });\n      });\n    }\n  }\n\n  validateName = () => {\n    let errMessage = '';\n    const name = this.state.repoName.trim();\n    if (!name.length) {\n      errMessage = gettext('Name is required');\n      this.setState({ errMessage: errMessage });\n      return false;\n    }\n    return true;\n  }\n\n  handleChange = (e) => {\n    this.setState({\n      repoName: e.target.value,\n    });\n  }\n\n  handleKeyPress = (e) => {\n    if (e.key === 'Enter') {\n      this.handleSubmit();\n      e.preventDefault();\n    }\n  }\n\n  render() {\n    return (\n      <Modal isOpen={true} toggle={this.props.toggle}>\n        <ModalHeader toggle={this.props.toggle}>{gettext('New Library')}</ModalHeader>\n        <ModalBody>\n          <Form>\n            <FormGroup>\n              <Label for=\"repoName\">{gettext('Name')}</Label>\n              <Input\n                id=\"repoName\"\n                onKeyPress={this.handleKeyPress}\n                value={this.state.repoName}\n                onChange={this.handleChange}\n                innerRef={input => {this.newInput = input;}}\n              />\n            </FormGroup>\n          </Form>\n          {this.state.errMessage && <p className=\"error\">{this.state.errMessage}</p> }\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"primary\" onClick={this.handleSubmit}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nAddRepoDialog.propTypes = propTypes;\n\nexport default AddRepoDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter } from 'reactstrap';\nimport { gettext } from '../../../utils/constants';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { Utils } from '../../../utils/utils';\nimport toaster from '../../toast';\n\nclass DeleteRepoDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  deleteRepo = () => {\n    seafileAPI.sysAdminDeleteRepoInDepartment(this.props.groupID, this.props.repo.repo_id).then((res) => {\n      if (res.data.success) {\n        this.props.onRepoChanged();\n        this.props.toggle();\n      }\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  render() {\n    let tipMessage = gettext('Are you sure you want to delete {placeholder} ?');\n    tipMessage = tipMessage.replace('{placeholder}', '<span class=\"op-target\">' + Utils.HTMLescape(this.props.repo.name) + '</span>');\n    return (\n      <Modal isOpen={true} toggle={this.props.toggle}>\n        <ModalHeader toggle={this.props.toggle}>{gettext('Delete Library')}</ModalHeader>\n        <ModalBody>\n          <div dangerouslySetInnerHTML={{__html: tipMessage}}></div>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"primary\" onClick={this.deleteRepo}>{gettext('Delete')}</Button>\n          <Button color=\"secondary\" onClick={this.props.toggle}>{gettext('Cancel')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nconst propTypes = {\n  repo: PropTypes.object.isRequired,\n  toggle: PropTypes.func.isRequired,\n  groupID: PropTypes.string.isRequired,\n  onRepoChanged: PropTypes.func.isRequired\n};\n\nDeleteRepoDialog.propTypes = propTypes;\n\nexport default DeleteRepoDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { Utils } from '../../../utils/utils.js';\nimport toaster from '../../../components/toast';\nimport RoleEditor from '../../../components/select-editor/role-editor';\nimport UserLink from '../user-link';\n\nconst MemberItemPropTypes = {\n  groupID: PropTypes.string.isRequired,\n  member: PropTypes.object.isRequired,\n  isItemFreezed: PropTypes.bool.isRequired,\n  onMemberChanged: PropTypes.func.isRequired,\n  showDeleteMemberDialog: PropTypes.func.isRequired,\n  toggleItemFreezed: PropTypes.func.isRequired,\n};\n\nclass MemberItem extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      highlight: false,\n      showRoleMenu: false,\n    };\n    this.roles = ['Admin', 'Member'];\n  }\n\n  onMouseEnter = () => {\n    if (this.props.isItemFreezed) return;\n    this.setState({ highlight: true });\n  }\n\n  onMouseLeave = () => {\n    if (this.props.isItemFreezed) return;\n    this.setState({ highlight: false });\n  }\n\n  toggleMemberRoleMenu = () => {\n    this.setState({ showRoleMenu: !this.state.showRoleMenu });\n  }\n\n  onChangeUserRole = (role) => {\n    let isAdmin = role === 'Admin' ? true : false;\n    seafileAPI.sysAdminUpdateGroupMemberRole(this.props.groupID, this.props.member.email, isAdmin).then((res) => {\n      this.props.onMemberChanged();\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n    this.setState({\n      highlight: false\n    });\n  }\n\n  render() {\n    const member = this.props.member;\n    const highlight = this.state.highlight;\n    if (member.role === 'Owner') return null;\n    return (\n      <tr className={highlight ? 'tr-highlight' : ''} onMouseEnter={this.onMouseEnter} onMouseLeave={this.onMouseLeave}>\n        <td><img src={member.avatar_url} alt=\"member-header\" width=\"24\" className=\"avatar\"/></td>\n        <td><UserLink email={member.email} name={member.name} /></td>\n        <td>\n          <RoleEditor\n            isTextMode={true}\n            isEditIconShow={highlight}\n            currentRole={member.role}\n            roles={this.roles}\n            onRoleChanged={this.onChangeUserRole}\n            toggleItemFreezed={this.props.toggleItemFreezed}\n          />\n        </td>\n        {!this.props.isItemFreezed ?\n          <td className=\"cursor-pointer text-center\" onClick={this.props.showDeleteMemberDialog.bind(this, member)}>\n            <span className={`sf2-icon-x3 action-icon ${highlight ? '' : 'vh'}`} title=\"Delete\"></span>\n          </td> : <td></td>\n        }\n      </tr>\n    );\n  }\n}\n\nMemberItem.propTypes = MemberItemPropTypes;\n\nexport default MemberItem;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Utils } from '../../../utils/utils.js';\nimport { siteRoot, gettext } from '../../../utils/constants';\n\nconst RepoItemPropTypes = {\n  repo: PropTypes.object.isRequired,\n  showDeleteRepoDialog: PropTypes.func.isRequired,\n};\n\nclass RepoItem extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      highlight: false,\n    };\n  }\n\n  onMouseEnter = () => {\n    this.setState({ highlight: true });\n  }\n\n  onMouseLeave = () => {\n    this.setState({ highlight: false });\n  }\n\n  render() {\n    const repo = this.props.repo;\n    const highlight = this.state.highlight;\n    let iconUrl = Utils.getLibIconUrl(repo);\n    return (\n      <tr className={highlight ? 'tr-highlight' : ''} onMouseEnter={this.onMouseEnter} onMouseLeave={this.onMouseLeave}>\n        <td><img src={iconUrl} width=\"24\" alt={gettext('icon')}/></td>\n        <td><a href={siteRoot + 'sys/libraries/' + repo.repo_id + '/' + repo.name + '/'}>{repo.name}</a></td>\n        <td>{Utils.bytesToSize(repo.size)}{' '}</td>\n        <td className=\"cursor-pointer text-center\" onClick={this.props.showDeleteRepoDialog.bind(this, repo)}>\n          <span className={`sf2-icon-delete action-icon ${highlight ? '' : 'vh'}`} title=\"Delete\"></span>\n        </td>\n      </tr>\n    );\n  }\n}\n\nRepoItem.propTypes = RepoItemPropTypes;\n\nexport default RepoItem;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport moment from 'moment';\nimport { Link } from '@reach/router';\nimport Paginator from '../../../components/paginator';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { Utils } from '../../../utils/utils.js';\nimport toaster from '../../../components/toast';\nimport MainPanelTopbar from '../main-panel-topbar';\nimport ModalPortal from '../../../components/modal-portal';\nimport AddDepartDialog from '../../../components/dialog/sysadmin-dialog/sysadmin-add-department-dialog';\nimport AddMemberDialog from '../../../components/dialog/sysadmin-dialog/sysadmin-add-member-dialog';\nimport DeleteMemberDialog from '../../../components/dialog/sysadmin-dialog/sysadmin-delete-member-dialog';\nimport AddRepoDialog from '../../../components/dialog/sysadmin-dialog/sysadmin-add-repo-dialog';\nimport DeleteRepoDialog from '../../../components/dialog/sysadmin-dialog/sysadmin-delete-repo-dialog';\nimport DeleteDepartDialog from '../../../components/dialog/sysadmin-dialog/sysadmin-delete-department-dialog';\nimport SetGroupQuotaDialog from '../../../components/dialog/sysadmin-dialog/sysadmin-set-group-quota-dialog';\nimport { siteRoot, gettext, lang } from '../../../utils/constants';\nimport GroupItem from './group-item';\nimport MemberItem from './member-item';\nimport RepoItem from './repo-item';\nimport '../../../css/org-department-item.css';\n\nmoment.locale(lang);\n\nconst DepartmentDetailPropTypes = {\n  groupID: PropTypes.string,\n};\n\nclass DepartmentDetail extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      groupName: '',\n      isItemFreezed: false,\n      ancestorGroups: [],\n      members: [],\n      membersErrorMsg: '',\n      membersPageInfo: {\n      },\n      membersPage: 1,\n      membersPerPage: 25,\n      deletedMember: {},\n      isShowAddMemberDialog: false,\n      showDeleteMemberDialog: false,\n      repos: [],\n      deletedRepo: {},\n      isShowAddRepoDialog: false,\n      showDeleteRepoDialog: false,\n      groups: [],\n      subGroupID: '',\n      subGroupName: '',\n      isShowAddDepartDialog: false,\n      showDeleteDepartDialog: false,\n      showSetGroupQuotaDialog: false,\n    };\n  }\n\n  componentDidMount() {\n    const groupID = this.props.groupID;\n    this.listGroupRepo(groupID);\n    this.getDepartmentInfo(groupID);\n    this.listMembers(groupID, this.state.membersPage, this.state.membersPerPage);\n  }\n\n  componentWillReceiveProps(nextProps) {\n    if (this.props.groupID !== nextProps.groupID) {\n      this.listGroupRepo(nextProps.groupID);\n      this.getDepartmentInfo(nextProps.groupID);\n      this.listMembers(nextProps.groupID, this.state.membersPage, this.state.membersPerPage);\n    }\n  }\n\n  listGroupRepo = (groupID) => {\n    seafileAPI.sysAdminListGroupRepos(groupID).then(res => {\n      this.setState({ repos: res.data.libraries });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  getDepartmentInfo = (groupID) => {\n    seafileAPI.sysAdminGetDepartmentInfo(groupID, true).then(res => {\n      this.setState({\n        groups: res.data.groups,\n        ancestorGroups: res.data.ancestor_groups,\n        groupName: res.data.name,\n      });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  listMembers = (groupID, page, perPage) => {\n    seafileAPI.sysAdminListGroupMembers(groupID, page, perPage).then((res) => {\n      this.setState({\n        members: res.data.members,\n        membersPageInfo: res.data.page_info\n      });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      this.setState({membersErrorMsg: errMessage});\n    });\n  }\n\n  getPreviousPageList = () => {\n    this.listMembers(this.props.groupID, this.state.membersPageInfo.current_page - 1, this.state.membersPerPage);\n  }\n\n  getNextPageList = () => {\n    this.listMembers(this.props.groupID, this.state.membersPageInfo.current_page + 1, this.state.membersPerPage);\n  }\n\n  resetPerPage = (perPage) => {\n    this.setState({\n      membersPerPage: perPage\n    }, () => {\n      this.listMembers(this.props.groupID, 1, perPage);\n    });\n  }\n\n  listSubDepartGroups = (groupID) => {\n    seafileAPI.sysAdminGetDepartmentInfo(groupID, true).then(res => {\n      this.setState({ groups: res.data.groups });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  toggleCancel = () => {\n    this.setState({\n      showDeleteMemberDialog: false,\n      showDeleteRepoDialog: false,\n      showDeleteDepartDialog: false,\n      showSetGroupQuotaDialog: false,\n    });\n  }\n\n  onSubDepartChanged = () => {\n    this.listSubDepartGroups(this.props.groupID);\n  }\n\n  onRepoChanged = () => {\n    this.listGroupRepo(this.props.groupID);\n  }\n\n  onMemberChanged = () => {\n    this.listMembers(this.props.groupID, this.state.membersPageInfo.current_page, this.state.membersPerPage);\n  }\n\n  toggleItemFreezed = (isFreezed) => {\n    this.setState({ isItemFreezed: isFreezed });\n  }\n\n  showDeleteMemberDialog = (member) => {\n    this.setState({ showDeleteMemberDialog: true, deletedMember: member });\n  }\n\n  showDeleteRepoDialog = (repo) => {\n    this.setState({ showDeleteRepoDialog: true, deletedRepo: repo });\n  }\n\n  toggleAddRepoDialog = () => {\n    this.setState({ isShowAddRepoDialog: !this.state.isShowAddRepoDialog });\n  }\n\n  toggleAddMemberDialog = () => {\n    this.setState({ isShowAddMemberDialog: !this.state.isShowAddMemberDialog });\n  }\n\n  toggleAddDepartDialog = () => {\n    this.setState({ isShowAddDepartDialog: !this.state.isShowAddDepartDialog});\n  }\n\n  showDeleteDepartDialog = (subGroup) => {\n    this.setState({\n      showDeleteDepartDialog: true,\n      subGroupID: subGroup.id,\n      subGroupName: subGroup.name\n    });\n  }\n\n  showSetGroupQuotaDialog = (subGroupID) => {\n    this.setState({\n      showSetGroupQuotaDialog: true,\n      subGroupID: subGroupID\n    });\n  }\n\n  render() {\n    const { members, membersErrorMsg, repos, groups } = this.state;\n    const groupID = this.props.groupID;\n    const topBtn = 'btn btn-secondary operation-item';\n    const topbarChildren = (\n      <Fragment>\n        {groupID &&\n          <Fragment>\n            <button className={topBtn} title={gettext('New Sub-department')} onClick={this.toggleAddDepartDialog}>{gettext('New Sub-department')}</button>\n            <button className={topBtn} title={gettext('Add Member')} onClick={this.toggleAddMemberDialog}>{gettext('Add Member')}</button>\n            <button className={topBtn} onClick={this.toggleAddRepoDialog} title={gettext('New Library')}>{gettext('New Library')}</button>\n          </Fragment>\n        }\n        {this.state.isShowAddMemberDialog && (\n          <ModalPortal>\n            <AddMemberDialog\n              toggle={this.toggleAddMemberDialog}\n              onMemberChanged={this.onMemberChanged}\n              groupID={groupID}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isShowAddRepoDialog && (\n          <ModalPortal>\n            <AddRepoDialog\n              toggle={this.toggleAddRepoDialog}\n              onRepoChanged={this.onRepoChanged}\n              groupID={groupID}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isShowAddDepartDialog && (\n          <ModalPortal>\n            <AddDepartDialog\n              onDepartChanged={this.onSubDepartChanged}\n              parentGroupID={groupID}\n              toggle={this.toggleAddDepartDialog}\n            />\n          </ModalPortal>\n        )}\n      </Fragment>\n    );\n\n    return (\n      <Fragment>\n        <MainPanelTopbar children={topbarChildren} />\n        <div className=\"main-panel-center flex-row h-100\">\n          <div className=\"cur-view-container o-auto\">\n            <div className=\"cur-view-path\">\n              <div className=\"fleft\">\n                <h3 className=\"sf-heading\">\n                  {groupID ?\n                    <Link to={siteRoot + 'sys/departments/'}>{gettext('Departments')}</Link>\n                    : <span>{gettext('Departments')}</span>\n                  }\n                  {this.state.ancestorGroups.map(ancestor => {\n                    let newHref = siteRoot + 'sys/departments/' + ancestor.id + '/';\n                    return <span key={ancestor.id}>{' / '}<Link to={newHref}>{ancestor.name}</Link></span>;\n                  })}\n                  {groupID && <span>{' / '}{this.state.groupName}</span>}\n                </h3>\n              </div>\n            </div>\n\n            <div className=\"cur-view-subcontainer org-groups\">\n              <div className=\"cur-view-path\">\n                <div className=\"fleft\"><h3 className=\"sf-heading\">{gettext('Sub-departments')}</h3></div>\n              </div>\n              <div className=\"cur-view-content\">\n                {groups && groups.length > 0 ?\n                  <table>\n                    <thead>\n                      <tr>\n                        <th width=\"40%\">{gettext('Name')}</th>\n                        <th width=\"25%\">{gettext('Created At')}</th>\n                        <th width=\"20%\">{gettext('Quota')}</th>\n                        <th width=\"15%\"></th>\n                      </tr>\n                    </thead>\n                    <tbody>\n                      {groups.map((group, index) => {\n                        return(\n                          <Fragment key={group.id}>\n                            <GroupItem\n                              group={group}\n                              showDeleteDepartDialog={this.showDeleteDepartDialog}\n                              showSetGroupQuotaDialog={this.showSetGroupQuotaDialog}\n                            />\n                          </Fragment>\n                        );\n                      })}\n                    </tbody>\n                  </table>\n                  : <p className=\"no-group\">{gettext('No sub-departments')}</p>\n                }\n              </div>\n            </div>\n\n            <div className=\"cur-view-subcontainer org-members\">\n              <div className=\"cur-view-path\">\n                <div className=\"fleft\"><h3 className=\"sf-heading\">{gettext('Members')}</h3></div>\n              </div>\n              <div className=\"cur-view-content\">\n                {membersErrorMsg ? <p className=\"error text-center\">{membersErrorMsg}</p> :\n                  members.length == 0 ?\n                  <p className=\"no-member\">{gettext('No members')}</p> :\n                  <Fragment>\n                  <table>\n                    <thead>\n                      <tr>\n                        <th width=\"5%\"></th>\n                        <th width=\"50%\">{gettext('Name')}</th>\n                        <th width=\"15%\">{gettext('Role')}</th>\n                        <th width=\"30%\"></th>\n                      </tr>\n                    </thead>\n                    <tbody>\n                      {members.map((member, index) => {\n                        return (\n                          <Fragment key={index}>\n                            <MemberItem\n                              member={member}\n                              showDeleteMemberDialog={this.showDeleteMemberDialog}\n                              isItemFreezed={this.state.isItemFreezed}\n                              onMemberChanged={this.onMemberChanged}\n                              toggleItemFreezed={this.toggleItemFreezed}\n                              groupID={groupID}\n                            />\n                          </Fragment>\n                        );\n                      })}\n                    </tbody>\n                  </table>\n                  {this.state.membersPageInfo &&\n                  <Paginator\n                    gotoPreviousPage={this.getPreviousPageList}\n                    gotoNextPage={this.getNextPageList}\n                    currentPage={this.state.membersPageInfo.current_page}\n                    hasNextPage={this.state.membersPageInfo.has_next_page}\n                    curPerPage={this.state.membersPerPage}\n                    resetPerPage={this.resetPerPage}\n                  />\n                  }\n                  </Fragment>\n                }\n              </div>\n            </div>\n\n            <div className=\"cur-view-subcontainer org-libriries\">\n              <div className=\"cur-view-path\">\n                <div className=\"fleft\"><h3 className=\"sf-heading\">{gettext('Libraries')}</h3></div>\n              </div>\n              { repos.length > 0 ?\n                <div className=\"cur-view-content\">\n                  <table>\n                    <thead>\n                      <tr>\n                        <th width=\"5%\"></th>\n                        <th width=\"50%\">{gettext('Name')}</th>\n                        <th width=\"30%\">{gettext('Size')}</th>\n                        <th width=\"15%\"></th>\n                      </tr>\n                    </thead>\n                    <tbody>\n                      {repos.map((repo, index) => {\n                        return(\n                          <Fragment key={index}>\n                            <RepoItem repo={repo} showDeleteRepoDialog={this.showDeleteRepoDialog}/>\n                          </Fragment>\n                        );\n                      })}\n                    </tbody>\n                  </table>\n                </div>\n                : <p className=\"no-libraty\">{gettext('No libraries')}</p>\n              }\n            </div>\n\n          </div>\n          {this.state.showDeleteMemberDialog && (\n            <ModalPortal>\n              <DeleteMemberDialog\n                toggle={this.toggleCancel}\n                onMemberChanged={this.onMemberChanged}\n                member={this.state.deletedMember}\n                groupID={groupID}\n              />\n            </ModalPortal>\n          )}\n          {this.state.showDeleteRepoDialog && (\n            <ModalPortal>\n              <DeleteRepoDialog\n                toggle={this.toggleCancel}\n                onRepoChanged={this.onRepoChanged}\n                repo={this.state.deletedRepo}\n                groupID={groupID}\n              />\n            </ModalPortal>\n          )}\n          {this.state.showDeleteDepartDialog && (\n            <ModalPortal>\n              <DeleteDepartDialog\n                toggle={this.toggleCancel}\n                groupID={this.state.subGroupID}\n                groupName={this.state.subGroupName}\n                onDepartChanged={this.onSubDepartChanged}\n              />\n            </ModalPortal>\n          )}\n          {this.state.showSetGroupQuotaDialog && (\n            <ModalPortal>\n              <SetGroupQuotaDialog\n                toggle={this.toggleCancel}\n                groupID={this.state.subGroupID}\n                onDepartChanged={this.onSubDepartChanged}\n              />\n            </ModalPortal>\n          )}\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nDepartmentDetail.propTypes = DepartmentDetailPropTypes;\n\nexport default DepartmentDetail;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Link } from '@reach/router';\nimport { siteRoot, gettext } from '../../../utils/constants';\n\nconst propTypes = {\n  currentItem: PropTypes.string.isRequired\n};\n\nclass Nav extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.navItems = [\n      {name: 'shareLinks', urlPart:'share-links', text: gettext('Share Links')},\n      {name: 'uploadLinks', urlPart:'upload-links', text: gettext('Upload Links')},\n    ];\n  }\n\n  render() {\n    const { currentItem } = this.props;\n    return (\n      <div className=\"cur-view-path tab-nav-container\">\n        <ul className=\"nav\">\n          {this.navItems.map((item, index) => {\n            return (\n              <li className=\"nav-item\" key={index}>\n                <Link to={`${siteRoot}sys/${item.urlPart}/`} className={`nav-link${currentItem == item.name ? ' active' : ''}`}>{item.text}</Link>\n              </li>\n            );\n          })}\n        </ul>\n      </div>\n    );\n  }\n}\n\nNav.propTypes = propTypes;\n\nexport default Nav;\n","import React, { Component, Fragment } from 'react';\nimport { navigate } from '@reach/router';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { gettext, siteRoot } from '../../../utils/constants';\nimport toaster from '../../../components/toast';\nimport { Utils } from '../../../utils/utils';\nimport EmptyTip from '../../../components/empty-tip';\nimport moment from 'moment';\nimport Loading from '../../../components/loading';\nimport Paginator from '../../../components/paginator';\nimport LinksNav from './links-nav';\nimport MainPanelTopbar from '../main-panel-topbar';\nimport UserLink from '../user-link';\n\nclass Content extends Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  getPreviousPage = () => {\n    this.props.getShareLinksByPage(this.props.currentPage - 1);\n  }\n\n  getNextPage = () => {\n    this.props.getShareLinksByPage(this.props.currentPage + 1);\n  }\n\n  sortByTime = (e) => {\n    e.preventDefault();\n    this.props.sortItems('ctime');\n  }\n\n  sortByCount = (e) => {\n    e.preventDefault();\n    this.props.sortItems('view_cnt');\n  }\n\n  render() {\n    const {\n      loading, errorMsg, items,\n      perPage, currentPage, hasNextPage,\n      sortBy, sortOrder\n    } = this.props;\n    if (loading) {\n      return <Loading />;\n    } else if (errorMsg) {\n      return <p className=\"error text-center\">{errorMsg}</p>;\n    } else {\n      const emptyTip = (\n        <EmptyTip>\n          <h2>{gettext('No share links')}</h2>\n        </EmptyTip>\n      );\n\n      const initialSortIcon = <span className=\"fas fa-sort\"></span>;\n      const sortIcon = <span className={`fas ${sortOrder == 'asc' ? 'fa-caret-up' : 'fa-caret-down'}`}></span>;\n      const table = (\n        <Fragment>\n          <table className=\"table-hover\">\n            <thead>\n              <tr>\n                <th width=\"18%\">{gettext('Name')}</th>\n                <th width=\"18%\">{gettext('Token')}</th>\n                <th width=\"18%\">{gettext('Owner')}</th>\n                <th width=\"15%\">\n                  <a className=\"d-inline-block table-sort-op\" href=\"#\" onClick={this.sortByTime}>{gettext('Created At')} {sortBy == 'ctime' ? sortIcon : initialSortIcon}</a>\n                </th>\n                <th width=\"10%\">\n                  <a className=\"d-inline-block table-sort-op\" href=\"#\" onClick={this.sortByCount}>{gettext('Count')} {sortBy == 'view_cnt' ? sortIcon : initialSortIcon}</a>\n                </th>\n                <th width=\"11%\">{gettext('Expiration')}</th>\n                <th width=\"10%\">{/*Operations*/}</th>\n              </tr>\n            </thead>\n            {items &&\n              <tbody>\n                {items.map((item, index) => {\n                  return (<Item\n                    key={index}\n                    item={item}\n                    deleteShareLink={this.props.deleteShareLink}\n                  />);\n                })}\n              </tbody>\n            }\n          </table>\n          <Paginator\n            gotoPreviousPage={this.getPreviousPage}\n            gotoNextPage={this.getNextPage}\n            currentPage={currentPage}\n            hasNextPage={hasNextPage}\n            curPerPage={perPage}\n            resetPerPage={this.props.resetPerPage}\n          />\n        </Fragment>\n      );\n      return items.length ? table : emptyTip;\n    }\n  }\n}\n\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOpIconShown: false,\n    };\n  }\n\n  handleMouseOver = () => {\n    this.setState({\n      isOpIconShown: true\n    });\n  }\n\n  handleMouseOut = () => {\n    this.setState({\n      isOpIconShown: false\n    });\n  }\n\n  deleteShareLink = () => {\n    this.props.deleteShareLink(this.props.item.token);\n  }\n\n  renderExpiration = () => {\n    const item = this.props.item;\n    if (!item.expire_date) {\n      return '--';\n    }\n    const expire_date = moment(item.expire_date).format('YYYY-MM-DD');\n    const expire_time = moment(item.expire_date).format('YYYY-MM-DD HH:mm:ss');\n    return (<span className={item.is_expired ? 'error' : ''} title={expire_time}>{expire_date}</span>);\n  }\n\n  render() {\n    let { isOpIconShown } = this.state;\n    let { item } = this.props;\n    let deleteIcon = `action-icon sf2-icon-delete ${isOpIconShown ? '' : 'invisible'}`;\n    return (\n      <tr onMouseOver={this.handleMouseOver} onMouseOut={this.handleMouseOut}>\n        <td>{item.obj_name}</td>\n        <td>{item.token}</td>\n        <td><UserLink email={item.creator_email} name={item.creator_name} /></td>\n        <td>{moment(item.ctime).fromNow()}</td>\n        <td>{item.view_cnt}</td>\n        <td>{this.renderExpiration()}</td>\n        <td>\n          <a href=\"#\" className={deleteIcon} title={gettext('Remove')} onClick={this.deleteShareLink}></a>\n        </td>\n      </tr>\n    );\n  }\n}\n\nclass ShareLinks extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      shareLinkList: [],\n      perPage: 25,\n      currentPage: 1,\n      hasNextPage: false,\n      sortBy: '',\n      sortOrder: 'asc'\n    };\n    this.initPage = 1;\n  }\n\n  componentDidMount () {\n    let urlParams = (new URL(window.location)).searchParams;\n    const { currentPage, perPage, sortBy, sortOrder } = this.state;\n    this.setState({\n      perPage: parseInt(urlParams.get('per_page') || perPage),\n      currentPage: parseInt(urlParams.get('page') || currentPage),\n      sortBy: urlParams.get('order_by') || sortBy,\n      sortOrder: urlParams.get('direction') || sortOrder\n    }, () => {\n      this.getShareLinksByPage(this.state.currentPage);\n    });\n  }\n\n  getShareLinksByPage = (page) => {\n    const { perPage, sortBy, sortOrder } = this.state;\n    seafileAPI.sysAdminListShareLinks(page, perPage, sortBy, sortOrder).then((res) => {\n      this.setState({\n        shareLinkList: res.data.share_link_list,\n        loading: false,\n        currentPage: page,\n        hasNextPage: Utils.hasNextPage(page, perPage, res.data.count),\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  sortItems = (sortBy) => {\n    this.setState({\n      currentPage: 1,\n      sortBy: sortBy,\n      sortOrder: this.state.sortOrder == 'asc' ? 'desc' : 'asc'\n    }, () => {\n      let url = new URL(location.href);\n      let searchParams = new URLSearchParams(url.search);\n      const { currentPage, sortBy, sortOrder } = this.state;\n      searchParams.set('page', currentPage);\n      searchParams.set('order_by', sortBy);\n      searchParams.set('direction', sortOrder);\n      url.search = searchParams.toString();\n      navigate(url.toString());\n      this.getShareLinksByPage(currentPage);\n    });\n  }\n\n  deleteShareLink = (linkToken) => {\n    seafileAPI.sysAdminDeleteShareLink(linkToken).then(res => {\n      let newShareLinkList = this.state.shareLinkList.filter(item =>\n        item.token != linkToken\n      );\n      this.setState({shareLinkList: newShareLinkList});\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  resetPerPage = (newPerPage) => {\n    this.setState({\n      perPage: newPerPage,\n    }, () => this.getShareLinksByPage(this.initPage));\n  }\n\n  render() {\n    let { shareLinkList, currentPage, perPage, hasNextPage } = this.state;\n    return (\n      <Fragment>\n        <MainPanelTopbar />\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <LinksNav currentItem=\"shareLinks\" />\n            <div className=\"cur-view-content\">\n              <Content\n                loading={this.state.loading}\n                errorMsg={this.state.errorMsg}\n                items={shareLinkList}\n                currentPage={currentPage}\n                perPage={perPage}\n                hasNextPage={hasNextPage}\n                getShareLinksByPage={this.getShareLinksByPage}\n                resetPerPage={this.resetPerPage}\n                sortBy={this.state.sortBy}\n                sortOrder={this.state.sortOrder}\n                sortItems={this.sortItems}\n                deleteShareLink={this.deleteShareLink}\n              />\n            </div>\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nexport default ShareLinks;\n","import React, { Component, Fragment } from 'react';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { gettext, siteRoot } from '../../../utils/constants';\nimport toaster from '../../../components/toast';\nimport { Utils } from '../../../utils/utils';\nimport EmptyTip from '../../../components/empty-tip';\nimport moment from 'moment';\nimport Loading from '../../../components/loading';\nimport Paginator from '../../../components/paginator';\nimport LinksNav from './links-nav';\nimport MainPanelTopbar from '../main-panel-topbar';\nimport UserLink from '../user-link';\n\n\nclass Content extends Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  getPreviousPage = () => {\n    this.props.getUploadLinksByPage(this.props.currentPage - 1);\n  }\n\n  getNextPage = () => {\n    this.props.getUploadLinksByPage(this.props.currentPage + 1);\n  }\n\n  render() {\n    const { loading, errorMsg, items, perPage, currentPage, hasNextPage } = this.props;\n    if (loading) {\n      return <Loading />;\n    } else if (errorMsg) {\n      return <p className=\"error text-center\">{errorMsg}</p>;\n    } else {\n      const emptyTip = (\n        <EmptyTip>\n          <h2>{gettext('No upload links')}</h2>\n        </EmptyTip>\n      );\n      const table = (\n        <Fragment>\n          <table className=\"table-hover\">\n            <thead>\n              <tr>\n                <th width=\"18%\">{gettext('Name')}</th>\n                <th width=\"18%\">{gettext('Token')}</th>\n                <th width=\"18%\">{gettext('Owner')}</th>\n                <th width=\"15%\">{gettext('Created At')}</th>\n                <th width=\"10%\">{gettext('Count')}</th>\n                <th width=\"11%\">{gettext('Expiration')}</th>\n                <th width=\"10%\">{/*Operations*/}</th>\n              </tr>\n            </thead>\n            {items &&\n              <tbody>\n                {items.map((item, index) => {\n                  return (<Item\n                    key={index}\n                    item={item}\n                    deleteUploadLink={this.props.deleteUploadLink}\n                  />);\n                })}\n              </tbody>\n            }\n          </table>\n          <Paginator\n            gotoPreviousPage={this.getPreviousPage}\n            gotoNextPage={this.getNextPage}\n            currentPage={currentPage}\n            hasNextPage={hasNextPage}\n            curPerPage={perPage}\n            resetPerPage={this.props.resetPerPage}\n          />\n        </Fragment>\n      );\n      return items.length ? table : emptyTip;\n    }\n  }\n}\n\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOpIconShown: false,\n    };\n  }\n\n  handleMouseOver = () => {\n    this.setState({\n      isOpIconShown: true\n    });\n  }\n\n  handleMouseOut = () => {\n    this.setState({\n      isOpIconShown: false\n    });\n  }\n\n  deleteUploadLink = () => {\n    this.props.deleteUploadLink(this.props.item.token);\n  }\n\n  renderExpiration = () => {\n    let item = this.props.item;\n    if (!item.expire_date) {\n      return '--';\n    }\n    const expire_date = moment(item.expire_date).format('YYYY-MM-DD');\n    const expire_time = moment(item.expire_date).format('YYYY-MM-DD HH:mm:ss');\n    return (<span className={item.is_expired ? 'error' : ''} title={expire_time}>{expire_date}</span>);\n  }\n\n  render() {\n    let { isOpIconShown } = this.state;\n    let { item } = this.props;\n    let deleteIcon = `action-icon sf2-icon-delete ${isOpIconShown ? '' : 'invisible'}`;\n    return (\n      <Fragment>\n        <tr onMouseOver={this.handleMouseOver} onMouseOut={this.handleMouseOut}>\n          <td>{item.path}</td>\n          <td>{item.token}</td>\n          <td><UserLink email={item.creator_email} name={item.creator_name} /></td>\n          <td>{moment(item.ctime).fromNow()}</td>\n          <td>{item.view_cnt}</td>\n          <td>{this.renderExpiration()}</td>\n          <td>\n            <a href=\"#\" className={deleteIcon} title={gettext('Remove')} onClick={this.deleteUploadLink}></a>\n          </td>\n        </tr>\n      </Fragment>\n    );\n  }\n}\n\nclass UploadLinks extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      uploadLinkList: [],\n      perPage: 25,\n      currentPage: 1,\n      hasNextPage: false,\n    };\n    this.initPage = 1;\n  }\n\n  componentDidMount() {\n    let urlParams = (new URL(window.location)).searchParams;\n    const { currentPage, perPage } = this.state;\n    this.setState({\n      perPage: parseInt(urlParams.get('per_page') || perPage),\n      currentPage: parseInt(urlParams.get('page') || currentPage)\n    }, () => {\n      this.getUploadLinksByPage(this.state.currentPage);\n    });\n  }\n\n  getUploadLinksByPage = (page) => {\n    let { perPage } = this.state;\n    seafileAPI.sysAdminListAllUploadLinks(page, perPage).then((res) => {\n      this.setState({\n        uploadLinkList: res.data.upload_link_list,\n        loading: false,\n        currentPage: page,\n        hasNextPage: Utils.hasNextPage(page, perPage, res.data.count),\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  deleteUploadLink = (linkToken) => {\n    seafileAPI.sysAdminDeleteUploadLink(linkToken).then(res => {\n      let newUploadLinkList = this.state.uploadLinkList.filter(item =>\n        item.token != linkToken\n      );\n      this.setState({uploadLinkList: newUploadLinkList});\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  resetPerPage = (newPerPage) => {\n    this.setState({\n      perPage: newPerPage,\n    }, () => this.getUploadLinksByPage(this.initPage));\n  }\n\n  render() {\n    let { uploadLinkList, currentPage, perPage, hasNextPage } = this.state;\n    return (\n      <Fragment>\n        <MainPanelTopbar />\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <LinksNav currentItem=\"uploadLinks\" />\n            <div className=\"cur-view-content\">\n              <Content\n                loading={this.state.loading}\n                errorMsg={this.state.errorMsg}\n                items={uploadLinkList}\n                currentPage={currentPage}\n                perPage={perPage}\n                hasNextPage={hasNextPage}\n                getUploadLinksByPage={this.getUploadLinksByPage}\n                resetPerPage={this.resetPerPage}\n                deleteUploadLink={this.deleteUploadLink}\n              />\n            </div>\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nexport default UploadLinks;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Alert, Modal, ModalHeader, ModalBody, ModalFooter, Button, Form, FormGroup, Label, Input } from 'reactstrap';\nimport { gettext } from '../../../utils/constants';\n\nconst propTypes = {\n  toggleDialog: PropTypes.func.isRequired,\n  addOrg: PropTypes.func.isRequired\n};\n\nclass SysAdminAddOrgDialog extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      name: '',\n      email: '',\n      password: '',\n      passwordAgain: '',\n      errorMsg: '',\n      isSubmitBtnActive: false\n    };\n  }\n\n  checkSubmitBtnActive = () => {\n    const { name, email, password, passwordAgain } = this.state;\n    let btnActive = true;\n    if (name.trim() !='' &&\n      email.trim() != '' &&\n      password.trim() != '' &&\n      passwordAgain.trim() != '') {\n      btnActive = true;\n    } else {\n      btnActive = false;\n    }\n    this.setState({\n      isSubmitBtnActive: btnActive\n    });\n  }\n\n  toggle = () => {\n    this.props.toggleDialog();\n  }\n\n  inputPassword = (e) => {\n    let passwd = e.target.value;\n    this.setState({\n      password: passwd\n    }, this.checkSubmitBtnActive);\n  }\n\n  inputPasswordAgain = (e) => {\n    let passwd = e.target.value;\n    this.setState({\n      passwordAgain: passwd\n    }, this.checkSubmitBtnActive);\n  }\n\n  inputEmail = (e) => {\n    let email = e.target.value;\n    this.setState({\n      email: email\n    }, this.checkSubmitBtnActive);\n  }\n\n  inputName = (e) => {\n    let name = e.target.value;\n    this.setState({\n      name: name\n    }, this.checkSubmitBtnActive);\n  }\n\n  handleSubmit = () => {\n    let { name, email, password, passwordAgain } = this.state;\n    if (password != passwordAgain) {\n      this.setState({errorMsg: gettext('Passwords do not match.')});\n      return;\n    }\n    const data = {\n      orgName: name.trim(),\n      ownerEmail: email.trim(),\n      password: password.trim()\n    };\n    this.props.addOrg(data);\n    this.toggle();\n  }\n\n  render() {\n    const { errorMsg, password, passwordAgain, email, name, isSubmitBtnActive } = this.state;\n    return (\n      <Modal isOpen={true} toggle={this.toggle}>\n        <ModalHeader toggle={this.toggle}>{gettext('Add Organization')}</ModalHeader>\n        <ModalBody>\n          <Form autoComplete=\"off\">\n            <FormGroup>\n              <Label>{gettext('Name')}</Label>\n              <Input value={name} onChange={this.inputName} />\n            </FormGroup>\n            <FormGroup>\n              <Label>\n                {gettext('Owner')}\n                <span className=\"small text-secondary ml-1 fas fa-question-circle\" title={gettext('Owner can use admin panel in an organization, must be a new account.')}></span>\n              </Label>\n              <Input value={email} onChange={this.inputEmail} />\n            </FormGroup>\n            <FormGroup>\n              <Label>{gettext('Password')}</Label>\n              <Input type=\"password\" value={password} onChange={this.inputPassword} />\n            </FormGroup>\n            <FormGroup>\n              <Label>{gettext('Password again')}</Label>\n              <Input type=\"password\" value={passwordAgain} onChange={this.inputPasswordAgain} />\n            </FormGroup>\n          </Form>\n          {errorMsg && <Alert color=\"danger\">{errorMsg}</Alert>}\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.toggle}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.handleSubmit} disabled={!isSubmitBtnActive}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nSysAdminAddOrgDialog.propTypes = propTypes;\n\nexport default SysAdminAddOrgDialog;\n","import React, { Component, Fragment } from 'react';\nimport { Link } from '@reach/router';\nimport moment from 'moment';\nimport { Utils } from '../../../utils/utils';\nimport { siteRoot, gettext } from '../../../utils/constants';\nimport EmptyTip from '../../../components/empty-tip';\nimport Loading from '../../../components/loading';\nimport Paginator from '../../../components/paginator';\nimport { seafileAPI } from '../../../utils/seafile-api.js';\nimport SysAdminUserRoleEditor from '../../../components/select-editor/sysadmin-user-role-editor';\nimport CommonOperationConfirmationDialog from '../../../components/dialog/common-operation-confirmation-dialog';\nimport UserLink from '../user-link';\nimport toaster from '../../../components/toast';\n\nconst { availableRoles } = window.sysadmin.pageOptions;\n\nclass Content extends Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  getPreviousPage = () => {\n    this.props.getListByPage(this.props.currentPage - 1);\n  }\n\n  getNextPage = () => {\n    this.props.getListByPage(this.props.currentPage + 1);\n  }\n\n  render() {\n    const { loading, errorMsg, items } = this.props;\n    if (loading) {\n      return <Loading />;\n    } else if (errorMsg) {\n      return <p className=\"error text-center mt-4\">{errorMsg}</p>;\n    } else {\n      const emptyTip = (\n        <EmptyTip>\n          <h2>{gettext('No organizations')}</h2>\n        </EmptyTip>\n      );\n      const table = (\n        <Fragment>\n          <table className=\"table-hover\">\n            <thead>\n              <tr>\n                <th width=\"20%\">{gettext('Name')}</th>\n                <th width=\"20%\">{gettext('Creator')}</th>\n                <th width=\"20%\">{gettext('Role')}</th>\n                <th width=\"15%\">{gettext('Space Used')}</th>\n                <th width=\"20%\">{gettext('Created At')}</th>\n                <th width=\"5%\">{/* Operations */}</th>\n              </tr>\n            </thead>\n            <tbody>\n              {items.map((item, index) => {\n                return (<Item\n                  key={index}\n                  item={item}\n                  updateRole={this.props.updateRole}\n                  deleteOrg={this.props.deleteOrg}\n                />);\n              })}\n            </tbody>\n          </table>\n          {this.props.currentPage &&\n          <Paginator\n            currentPage={this.props.currentPage}\n            hasNextPage={this.props.hasNextPage}\n            curPerPage={this.props.curPerPage}\n            resetPerPage={this.props.resetPerPage}\n            gotoPreviousPage={this.getPreviousPage}\n            gotoNextPage={this.getNextPage}\n          />\n          }\n        </Fragment>\n      );\n      return items.length ? table : emptyTip;\n    }\n  }\n}\n\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOpIconShown: false,\n      isDeleteDialogOpen: false,\n      deleteDialogMsg: '',\n    };\n  }\n\n  handleMouseEnter = () => {\n    this.setState({isOpIconShown: true});\n  }\n\n  handleMouseLeave = () => {\n    this.setState({isOpIconShown: false});\n  }\n\n  toggleDeleteDialog = (e) => {\n    if (e) {\n      e.preventDefault();\n    }\n    this.setState({isDeleteDialogOpen: !this.state.isDeleteDialogOpen}, () => {\n      if (this.state.isDeleteDialogOpen) {\n        seafileAPI.sysAdminGetOrg(this.props.item.org_id).then((res) => {\n          let orgName = '<span class=\"op-target\">' + Utils.HTMLescape(res.data.org_name) + '</span>';\n          let userCount = '<span class=\"op-target\">' + Utils.HTMLescape(res.data.users_count) + '</span>';\n          let repoCount = '<span class=\"op-target\">' + Utils.HTMLescape(res.data.repos_count) + '</span>';\n          let deleteDialogMsg = gettext('Are you sure you want to delete {placeholder} ?')\n            .replace('{placeholder}', orgName) + '<br/>' +\n            gettext('{userCount} user(s) and {repoCount} libraries of this organization will also be deleted.')\n              .replace('{userCount}', userCount)\n              .replace('{repoCount}', repoCount);\n          this.setState({deleteDialogMsg: deleteDialogMsg});\n        }).catch(error => {\n          let errorMsg = Utils.getErrorMsg(error);\n          toaster.danger(errorMsg);\n        });\n      }\n    });\n  }\n\n  updateRole = (role) => {\n    this.props.updateRole(this.props.item.org_id, role);\n  }\n\n  deleteOrg = () => {\n    toaster.notify(gettext('It may take some time, please wait.'));\n    this.props.deleteOrg(this.props.item.org_id);\n  }\n\n  render() {\n    const { item } = this.props;\n    const { isOpIconShown, isDeleteDialogOpen, deleteDialogMsg } = this.state;\n\n    return (\n      <Fragment>\n        <tr onMouseEnter={this.handleMouseEnter} onMouseLeave={this.handleMouseLeave}>\n          <td><Link to={`${siteRoot}sys/organizations/${item.org_id}/info/`}>{item.org_name}</Link></td>\n          <td>\n            <UserLink email={item.creator_email} name={item.creator_name} />\n          </td>\n          <td>\n            <SysAdminUserRoleEditor\n              isTextMode={true}\n              isEditIconShow={isOpIconShown}\n              currentRole={item.role}\n              roleOptions={availableRoles}\n              onRoleChanged={this.updateRole}\n            />\n          </td>\n          <td>{`${Utils.bytesToSize(item.quota_usage)} / ${item.quota > 0 ? Utils.bytesToSize(item.quota) : '--'}`}</td>\n          <td>{moment(item.ctime).format('YYYY-MM-DD HH:mm:ss')}</td>\n          <td>\n            <a href=\"#\" className={`action-icon sf2-icon-delete ${isOpIconShown ? '' : 'invisible'}`} title={gettext('Delete')} onClick={this.toggleDeleteDialog}></a>\n          </td>\n        </tr>\n        {isDeleteDialogOpen &&\n          <CommonOperationConfirmationDialog\n            title={gettext('Delete Organization')}\n            message={deleteDialogMsg}\n            executeOperation={this.deleteOrg}\n            confirmBtnText={gettext('Delete')}\n            toggleDialog={this.toggleDeleteDialog}\n          />\n        }\n      </Fragment>\n    );\n  }\n}\n\nexport default Content;\n","import React, { Component, Fragment } from 'react';\nimport { navigate } from '@reach/router';\nimport { Button } from 'reactstrap';\nimport { Utils } from '../../../utils/utils';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { siteRoot, gettext } from '../../../utils/constants';\nimport toaster from '../../../components/toast';\nimport SysAdminAddOrgDialog from '../../../components/dialog/sysadmin-dialog/sysadmin-add-org-dialog';\nimport MainPanelTopbar from '../main-panel-topbar';\nimport Search from '../search';\nimport Content from './orgs-content';\n\n\nclass Orgs extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      orgList: [],\n      currentPage: 1,\n      perPage: 25,\n      hasNextPage: false,\n      isAddOrgDialogOpen: false\n    };\n  }\n\n  componentDidMount() {\n    let urlParams = (new URL(window.location)).searchParams;\n    const { currentPage, perPage } = this.state;\n    this.setState({\n      perPage: parseInt(urlParams.get('per_page') || perPage),\n      currentPage: parseInt(urlParams.get('page') || currentPage)\n    }, () => {\n      this.getItemsByPage(this.state.currentPage);\n    });\n  }\n\n  getItemsByPage = (page) => {\n    const { perPage } = this.state;\n    seafileAPI.sysAdminListOrgs(page, perPage).then((res) => {\n      this.setState({\n        loading: false,\n        orgList: res.data.organizations,\n        currentPage: page,\n        hasNextPage: Utils.hasNextPage(page, perPage, res.data.total_count)\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  resetPerPage = (perPage) => {\n    this.setState({\n      perPage: perPage\n    }, () => {\n      this.getItemsByPage(1);\n    });\n  }\n\n  toggleAddOrgDialog = () => {\n    this.setState({isAddOrgDialogOpen: !this.state.isAddOrgDialogOpen});\n  }\n\n  updateRole = (orgID, role) => {\n    let orgInfo = {};\n    orgInfo.role = role;\n    seafileAPI.sysAdminUpdateOrg(orgID, orgInfo).then(res => {\n      let newOrgList = this.state.orgList.map(org => {\n        if (org.org_id == orgID) {\n          org.role = role;\n        }\n        return org;\n      });\n      this.setState({orgList: newOrgList});\n      toaster.success(gettext('Edit succeeded'));\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  addOrg = (data) => {\n    const { orgName, ownerEmail, password } = data;\n    seafileAPI.sysAdminAddOrg(orgName, ownerEmail, password).then(res => {\n      let orgList = this.state.orgList;\n      orgList.unshift(res.data);\n      this.setState({orgList: orgList});\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  deleteOrg = (orgID) => {\n    seafileAPI.sysAdminDeleteOrg(orgID).then(res => {\n      let orgList = this.state.orgList.filter(org => {\n        return org.org_id != orgID;\n      });\n      this.setState({orgList: orgList});\n      toaster.success(gettext('Successfully deleted 1 item.'));\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  getSearch = () => {\n    return <Search\n      placeholder={gettext('Search organizations')}\n      submit={this.searchItems}\n    />;\n  }\n\n  searchItems = (keyword) => {\n    navigate(`${siteRoot}sys/search-organizations/?query=${encodeURIComponent(keyword)}`);\n  }\n\n  render() {\n    const { isAddOrgDialogOpen } = this.state;\n    return (\n      <Fragment>\n        <MainPanelTopbar search={this.getSearch()}>\n          <Button className=\"btn btn-secondary operation-item\" onClick={this.toggleAddOrgDialog}>{gettext('Add Organization')}</Button>\n        </MainPanelTopbar>\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <div className=\"cur-view-path\">\n              <h3 className=\"sf-heading\">{gettext('Organizations')}</h3>\n            </div>\n            <div className=\"cur-view-content\">\n              <Content\n                loading={this.state.loading}\n                errorMsg={this.state.errorMsg}\n                items={this.state.orgList}\n                currentPage={this.state.currentPage}\n                hasNextPage={this.state.hasNextPage}\n                curPerPage={this.state.perPage}\n                resetPerPage={this.resetPerPage}\n                getListByPage={this.getItemsByPage}\n                updateRole={this.updateRole}\n                deleteOrg={this.deleteOrg}\n              />\n            </div>\n          </div>\n        </div>\n        {isAddOrgDialogOpen &&\n          <SysAdminAddOrgDialog\n            addOrg={this.addOrg}\n            toggleDialog={this.toggleAddOrgDialog}\n          />\n        }\n      </Fragment>\n    );\n  }\n}\n\nexport default Orgs;\n","import React, { Component, Fragment } from 'react';\nimport { Form, FormGroup, Input, Label, Col } from 'reactstrap';\nimport { Utils } from '../../../utils/utils';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { gettext } from '../../../utils/constants';\nimport toaster from '../../../components/toast';\nimport MainPanelTopbar from '../main-panel-topbar';\nimport Content from './orgs-content';\n\n\nclass SearchOrgs extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      query: '',\n      isSubmitBtnActive: false,\n      loading: true,\n      errorMsg: '',\n      orgList: []\n    };\n  }\n\n  componentDidMount () {\n    let params = (new URL(document.location)).searchParams;\n    this.setState({\n      query: params.get('query') || ''\n    }, this.getItems);\n  }\n\n  getItems = () => {\n    seafileAPI.sysAdminSearchOrgs(this.state.query.trim()).then(res => {\n      this.setState({\n        loading: false,\n        orgList: res.data.organization_list\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  updateRole = (orgID, role) => {\n    let orgInfo = {};\n    orgInfo.role = role;\n    seafileAPI.sysAdminUpdateOrg(orgID, orgInfo).then(res => {\n      let newOrgList = this.state.orgList.map(org => {\n        if (org.org_id == orgID) {\n          org.role = role;\n        }\n        return org;\n      });\n      this.setState({orgList: newOrgList});\n      toaster.success(gettext('Edit succeeded'));\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  deleteOrg = (orgID) => {\n    seafileAPI.sysAdminDeleteOrg(orgID).then(res => {\n      let orgList = this.state.orgList.filter(org => {\n        return org.org_id != orgID;\n      });\n      this.setState({orgList: orgList});\n      toaster.success(gettext('Successfully deleted 1 item.'));\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  handleInputChange = (e) => {\n    this.setState({\n      query: e.target.value\n    }, this.checkSubmitBtnActive);\n  }\n\n  checkSubmitBtnActive = () => {\n    const { query } = this.state;\n    this.setState({\n      isSubmitBtnActive: query.trim()\n    });\n  }\n\n  render() {\n    const { query, isSubmitBtnActive } = this.state;\n    return (\n      <Fragment>\n        <MainPanelTopbar />\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <div className=\"cur-view-path\">\n              <h3 className=\"sf-heading\">{gettext('Organizations')}</h3>\n            </div>\n            <div className=\"cur-view-content\">\n              <div className=\"mt-4 mb-6\">\n                <h4 className=\"border-bottom font-weight-normal mb-2 pb-1\">{gettext('Search Organizations')}</h4>\n                <p className=\"text-secondary small\">{gettext('Tip: you can search by keyword in name.')}</p>\n                <Form>\n                  <FormGroup row>\n                    <Label for=\"name\" sm={1}>{gettext('Name')}</Label>\n                    <Col sm={5}>\n                      <Input type=\"text\" name=\"query\" id=\"name\" value={query} onChange={this.handleInputChange} />\n                    </Col>\n                  </FormGroup>\n                  <FormGroup row>\n                    <Col sm={{size: 5, offset: 1}}>\n                      <button className=\"btn btn-outline-primary\" disabled={!isSubmitBtnActive} onClick={this.getItems}>{gettext('Submit')}</button>\n                    </Col>\n                  </FormGroup>\n                </Form>\n              </div>\n              <div className=\"mt-4 mb-6\">\n                <h4 className=\"border-bottom font-weight-normal mb-2 pb-1\">{gettext('Result')}</h4>\n                <Content\n                  loading={this.state.loading}\n                  errorMsg={this.state.errorMsg}\n                  items={this.state.orgList}\n                  updateRole={this.updateRole}\n                  deleteOrg={this.deleteOrg}\n                />\n              </div>\n            </div>\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nexport default SearchOrgs;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Alert, Modal, ModalHeader, ModalBody, ModalFooter, Button, Form, FormGroup, Input, InputGroup, InputGroupAddon, InputGroupText } from 'reactstrap';\nimport { gettext } from '../../../utils/constants';\nimport { Utils } from '../../../utils/utils';\n\nconst propTypes = {\n  toggle: PropTypes.func.isRequired,\n  updateName: PropTypes.func.isRequired\n};\n\nclass SysAdminSetOrgNameDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      name: this.props.name,\n      isSubmitBtnActive: false\n    };\n  }\n\n  toggle = () => {\n    this.props.toggle();\n  }\n\n  handleInputChange = (e) => {\n    const value = e.target.value;\n    this.setState({\n      name: value,\n      isSubmitBtnActive: value.trim() != ''\n    });\n  }\n\n  handleKeyPress = (e) => {\n    if (e.key == 'Enter') {\n      this.handleSubmit();\n      e.preventDefault();\n    }\n  }\n\n  handleSubmit = () => {\n    this.props.updateName(this.state.name.trim());\n    this.toggle();\n  }\n\n  render() {\n    const { name, isSubmitBtnActive } = this.state;\n    return (\n      <Modal isOpen={true} toggle={this.toggle}>\n        <ModalHeader toggle={this.toggle}>{gettext('Set Name')}</ModalHeader>\n        <ModalBody>\n          <Form>\n            <FormGroup>\n              <Input\n                type=\"text\"\n                value={name}\n                onKeyPress={this.handleKeyPress}\n                onChange={this.handleInputChange}\n              />\n            </FormGroup>\n          </Form>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.toggle}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.handleSubmit} disabled={!isSubmitBtnActive}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nSysAdminSetOrgNameDialog.propTypes = propTypes;\n\nexport default SysAdminSetOrgNameDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Alert, Modal, ModalHeader, ModalBody, ModalFooter, Button, Form, FormGroup, Input, InputGroup, InputGroupAddon, InputGroupText } from 'reactstrap';\nimport { gettext } from '../../../utils/constants';\nimport { Utils } from '../../../utils/utils';\n\nconst propTypes = {\n  toggle: PropTypes.func.isRequired,\n  updateValue: PropTypes.func.isRequired\n};\n\nclass SysAdminSetOrgMaxUserNumberDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      value: this.props.value,\n      isSubmitBtnActive: false\n    };\n  }\n\n  toggle = () => {\n    this.props.toggle();\n  }\n\n  handleInputChange = (e) => {\n    const value = e.target.value;\n    this.setState({\n      value: value,\n      isSubmitBtnActive: value.trim() != ''\n    });\n  }\n\n  handleKeyPress = (e) => {\n    if (e.key == 'Enter') {\n      this.handleSubmit();\n      e.preventDefault();\n    }\n  }\n\n  handleSubmit = () => {\n    this.props.updateValue(this.state.value.trim());\n    this.toggle();\n  }\n\n  render() {\n    const { value, isSubmitBtnActive } = this.state;\n    return (\n      <Modal isOpen={true} toggle={this.toggle}>\n        <ModalHeader toggle={this.toggle}>{gettext('Set max number of members')}</ModalHeader>\n        <ModalBody>\n          <Form>\n            <FormGroup>\n              <Input\n                type=\"text\"\n                className=\"form-control\"\n                value={value}\n                onKeyPress={this.handleKeyPress}\n                onChange={this.handleInputChange}\n              />\n            </FormGroup>\n          </Form>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.toggle}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.handleSubmit} disabled={!isSubmitBtnActive}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nSysAdminSetOrgMaxUserNumberDialog.propTypes = propTypes;\n\nexport default SysAdminSetOrgMaxUserNumberDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Link } from '@reach/router';\nimport { siteRoot, gettext } from '../../../utils/constants';\n\nconst propTypes = {\n  currentItem: PropTypes.string.isRequired\n};\n\nclass Nav extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.navItems = [\n      {name: 'info', urlPart: 'info', text: gettext('Info')},\n      {name: 'users', urlPart: 'users', text: gettext('Members')},\n      {name: 'groups', urlPart: 'groups', text: gettext('Groups')},\n      {name: 'repos', urlPart: 'libraries', text: gettext('Libraries')},\n      //{name: 'traffic', urlPart: 'traffic', text: gettext('traffic')},\n      //{name: 'settings', urlPart: 'settings', text: gettext('Settings')}\n    ];\n  }\n\n  render() {\n    const { currentItem, orgID, orgName } = this.props;\n    return (\n      <div>\n        <div className=\"cur-view-path\">\n          <h3 className=\"sf-heading\"><Link to={`${siteRoot}sys/organizations/`}>{gettext('Organizations')}</Link> / {orgName}</h3>\n        </div>\n        <ul className=\"nav border-bottom mx-4\">\n          {this.navItems.map((item, index) => {\n            return (\n              <li className=\"nav-item mr-2\" key={index}>\n                <Link to={`${siteRoot}sys/organizations/${orgID}/${item.urlPart}/`} className={`nav-link ${currentItem == item.name ? ' active' : ''}`}>{item.text}</Link>\n              </li>\n            );\n          })}\n        </ul>\n      </div>\n    );\n  }\n}\n\nNav.propTypes = propTypes;\n\nexport default Nav;\n","import React, { Component, Fragment } from 'react';\nimport { Utils } from '../../../utils/utils';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { gettext } from '../../../utils/constants';\nimport toaster from '../../../components/toast';\nimport Loading from '../../../components/loading';\nimport SysAdminSetOrgQuotaDialog from '../../../components/dialog/sysadmin-dialog/set-quota';\nimport SysAdminSetOrgNameDialog from '../../../components/dialog/sysadmin-dialog/sysadmin-set-org-name-dialog';\nimport SysAdminSetOrgMaxUserNumberDialog from '../../../components/dialog/sysadmin-dialog/sysadmin-set-org-max-user-number-dialog';\nimport MainPanelTopbar from '../main-panel-topbar';\nimport OrgNav from './org-nav';\n\nclass Content extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isSetQuotaDialogOpen: false,\n      isSetNameDialogOpen: false,\n      isSetMaxUserNumberDialogOpen: false\n    };\n  }\n\n  toggleSetQuotaDialog = () => {\n    this.setState({isSetQuotaDialogOpen: !this.state.isSetQuotaDialogOpen});\n  }\n\n  toggleSetNameDialog = () => {\n    this.setState({isSetNameDialogOpen: !this.state.isSetNameDialogOpen});\n  }\n\n  toggleSetMaxUserNumberDialog = () => {\n    this.setState({isSetMaxUserNumberDialogOpen: !this.state.isSetMaxUserNumberDialogOpen});\n  }\n\n  showEditIcon = (action) => {\n    return (\n      <span\n        title={gettext('Edit')}\n        className=\"fa fa-pencil-alt attr-action-icon\"\n        onClick={action}>\n      </span>\n    );\n  }\n\n  render() {\n    const { loading, errorMsg, orgInfo } = this.props;\n    if (loading) {\n      return <Loading />;\n    } else if (errorMsg) {\n      return <p className=\"error text-center\">{errorMsg}</p>;\n    } else {\n      const { org_name, users_count, max_user_number, groups_count, quota, quota_usage } = this.props.orgInfo;\n      const { isSetQuotaDialogOpen, isSetNameDialogOpen, isSetMaxUserNumberDialogOpen } = this.state;\n      return (\n        <Fragment>\n          <dl className=\"m-0\">\n            <dt className=\"info-item-heading\">{gettext('Name')}</dt>\n            <dd className=\"info-item-content\">\n              {org_name}\n              {this.showEditIcon(this.toggleSetNameDialog)}\n            </dd>\n\n            <dt className=\"info-item-heading\">{gettext('Number of members')}</dt>\n            <dd className=\"info-item-content\">{users_count}</dd>\n\n            {max_user_number &&\n              <Fragment>\n                <dt className=\"info-item-heading\">{gettext('Max number of members')}</dt>\n                <dd className=\"info-item-content\">\n                  {max_user_number}\n                  {this.showEditIcon(this.toggleSetMaxUserNumberDialog)}\n                </dd>\n              </Fragment>\n            }\n\n            <dt className=\"info-item-heading\">{gettext('Number of groups')}</dt>\n            <dd className=\"info-item-content\">{groups_count}</dd>\n\n            <dt className=\"info-item-heading\">{gettext('Space Used')}</dt>\n            <dd className=\"info-item-content\">\n              {`${Utils.bytesToSize(quota_usage)} / ${quota > 0 ? Utils.bytesToSize(quota) : '--'}`}\n              {this.showEditIcon(this.toggleSetQuotaDialog)}\n            </dd>\n          </dl>\n          {isSetQuotaDialogOpen &&\n          <SysAdminSetOrgQuotaDialog\n            updateQuota={this.props.updateQuota}\n            toggle={this.toggleSetQuotaDialog}\n          />\n          }\n          {isSetNameDialogOpen &&\n          <SysAdminSetOrgNameDialog\n            name={org_name}\n            updateName={this.props.updateName}\n            toggle={this.toggleSetNameDialog}\n          />\n          }\n          {isSetMaxUserNumberDialogOpen &&\n          <SysAdminSetOrgMaxUserNumberDialog\n            value={max_user_number}\n            updateValue={this.props.updateMaxUserNumber}\n            toggle={this.toggleSetMaxUserNumberDialog}\n          />\n          }\n        </Fragment>\n      );\n    }\n  }\n}\n\nclass OrgInfo extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      orgInfo: {}\n    };\n  }\n\n  componentDidMount () {\n    seafileAPI.sysAdminGetOrg(this.props.orgID).then((res) => {\n      this.setState({\n        loading: false,\n        orgInfo: res.data\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  updateQuota = (quota) => {\n    const data = {quota: quota};\n    seafileAPI.sysAdminUpdateOrg(this.props.orgID, data).then(res => {\n      const newOrgInfo = Object.assign(this.state.orgInfo, {\n        quota: res.data.quota\n      });\n      this.setState({orgInfo: newOrgInfo});\n      toaster.success(gettext('Successfully set quota.'));\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  updateName = (orgName) => {\n    const data = {orgName: orgName};\n    seafileAPI.sysAdminUpdateOrg(this.props.orgID, data).then(res => {\n      const newOrgInfo = Object.assign(this.state.orgInfo, {\n        org_name: res.data.org_name\n      });\n      this.setState({orgInfo: newOrgInfo});\n      toaster.success(gettext('Successfully set name.'));\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  updateMaxUserNumber = (newValue) => {\n    const data = {maxUserNumber: newValue};\n    seafileAPI.sysAdminUpdateOrg(this.props.orgID, data).then(res => {\n      const newOrgInfo = Object.assign(this.state.orgInfo, {\n        max_user_number: res.data.max_user_number\n      });\n      this.setState({orgInfo: newOrgInfo});\n      toaster.success(gettext('Successfully set max number of members.'));\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  render() {\n    const { orgInfo } = this.state;\n    return (\n      <Fragment>\n        <MainPanelTopbar />\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <OrgNav currentItem=\"info\" orgID={this.props.orgID} orgName={orgInfo.org_name} />\n            <div className=\"cur-view-content\">\n              <Content\n                orgID={this.props.orgID}\n                loading={this.state.loading}\n                errorMsg={this.state.errorMsg}\n                orgInfo={this.state.orgInfo}\n                updateQuota={this.updateQuota}\n                updateName={this.updateName}\n                updateMaxUserNumber={this.updateMaxUserNumber}\n              />\n            </div>\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nexport default OrgInfo;\n","import React, { Component, Fragment } from 'react';\nimport { Button } from 'reactstrap';\nimport moment from 'moment';\nimport { Utils } from '../../../utils/utils';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { siteRoot, gettext, username } from '../../../utils/constants';\nimport toaster from '../../../components/toast';\nimport EmptyTip from '../../../components/empty-tip';\nimport Loading from '../../../components/loading';\nimport SysAdminUserStatusEditor from '../../../components/select-editor/sysadmin-user-status-editor';\nimport SysAdminAddUserDialog from '../../../components/dialog/sysadmin-dialog/sysadmin-add-user-dialog';\nimport CommonOperationConfirmationDialog from '../../../components/dialog/common-operation-confirmation-dialog';\nimport OpMenu from '../../../components/dialog/op-menu';\nimport MainPanelTopbar from '../main-panel-topbar';\nimport UserLink from '../user-link';\nimport OrgNav from './org-nav';\n\nclass Content extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isItemFreezed: false\n    };\n  }\n\n  onFreezedItem = () => {\n    this.setState({isItemFreezed: true});\n  }\n\n  onUnfreezedItem = () => {\n    this.setState({isItemFreezed: false});\n  }\n\n  render() {\n    const { loading, errorMsg, items } = this.props;\n    if (loading) {\n      return <Loading />;\n    } else if (errorMsg) {\n      return <p className=\"error text-center mt-4\">{errorMsg}</p>;\n    } else {\n      const emptyTip = (\n        <EmptyTip>\n          <h2>{gettext('No members')}</h2>\n        </EmptyTip>\n      );\n      const table = (\n        <Fragment>\n          <table>\n            <thead>\n              <tr>\n                <th width=\"25%\">{gettext('Name')}</th>\n                <th width=\"20%\">{gettext('Status')}</th>\n                <th width=\"20%\">{gettext('Space Used')}</th>\n                <th width=\"30%\">{gettext('Created At')}{' / '}{gettext('Last Login')}</th>\n                <th width=\"5%\">{/* Operations */}</th>\n              </tr>\n            </thead>\n            <tbody>\n              {items.map((item, index) => {\n                return (<Item\n                  key={index}\n                  item={item}\n                  isItemFreezed={this.state.isItemFreezed}\n                  onFreezedItem={this.onFreezedItem}\n                  onUnfreezedItem={this.onUnfreezedItem}\n                  updateStatus={this.props.updateStatus}\n                  deleteUser={this.props.deleteUser}\n                />);\n              })}\n            </tbody>\n          </table>\n        </Fragment>\n      );\n      return items.length ? table : emptyTip;\n    }\n  }\n}\n\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOpIconShown: false,\n      highlight: false,\n      isDeleteDialogOpen: false,\n      isResetPasswordDialogOpen: false\n    };\n  }\n\n  handleMouseEnter = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        isOpIconShown: true,\n        highlight: true\n      });\n    }\n  }\n\n  handleMouseLeave = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        isOpIconShown: false,\n        highlight: false\n      });\n    }\n  }\n\n  onUnfreezedItem = () => {\n    this.setState({\n      highlight: false,\n      isOpIconShow: false\n    });\n    this.props.onUnfreezedItem();\n  }\n\n  onMenuItemClick = (operation) => {\n    switch(operation) {\n      case 'Delete':\n        this.toggleDeleteDialog();\n        break;\n      case 'Reset Password':\n        this.toggleResetPasswordDialog();\n        break;\n      default:\n        break;\n    }\n  }\n\n  toggleDeleteDialog = (e) => {\n    if (e) {\n      e.preventDefault();\n    }\n    this.setState({isDeleteDialogOpen: !this.state.isDeleteDialogOpen});\n  }\n\n  toggleResetPasswordDialog = (e) => {\n    if (e) {\n      e.preventDefault();\n    }\n    this.setState({isResetPasswordDialogOpen: !this.state.isResetPasswordDialogOpen});\n  }\n\n  updateStatus= (statusValue) => {\n    this.props.updateStatus(this.props.item.email, statusValue);\n  }\n\n  deleteUser = () => {\n    const { item } = this.props;\n    this.props.deleteUser(item.org_id, item.email);\n  }\n\n  resetPassword = () => {\n    seafileAPI.sysAdminResetUserPassword(this.props.item.email).then(res => {\n      toaster.success(res.data.reset_tip);\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  translateOperations = (item) => {\n    let translateResult = '';\n    switch(item) {\n      case 'Delete':\n        translateResult = gettext('Delete');\n        break;\n      case 'Reset Password':\n        translateResult = gettext('Reset Password');\n        break;\n    }\n\n    return translateResult;\n  }\n\n  render() {\n    const { item } = this.props;\n    const { isOpIconShown, isDeleteDialogOpen, isResetPasswordDialogOpen } = this.state;\n\n    const itemName = '<span class=\"op-target\">' + Utils.HTMLescape(item.name) + '</span>';\n    let deleteDialogMsg = gettext('Are you sure you want to delete {placeholder} ?').replace('{placeholder}', itemName);\n    let resetPasswordDialogMsg = gettext('Are you sure you want to reset the password of {placeholder} ?').replace('{placeholder}', itemName);\n\n    return (\n      <Fragment>\n        <tr className={this.state.highlight ? 'tr-highlight' : ''} onMouseEnter={this.handleMouseEnter} onMouseLeave={this.handleMouseLeave}>\n          <td><UserLink email={item.email} name={item.name} /></td>\n          <td>\n            <SysAdminUserStatusEditor\n              isTextMode={true}\n              isEditIconShow={isOpIconShown}\n              currentStatus={item.active ? 'active' : 'inactive'}\n              statusOptions={['active', 'inactive']}\n              onStatusChanged={this.updateStatus}\n            />\n          </td>\n          <td>{`${Utils.bytesToSize(item.quota_usage)} / ${item.quota_total > 0 ? Utils.bytesToSize(item.quota_total) : '--'}`}</td>\n          <td>\n            {moment(item.create_time).format('YYYY-MM-DD HH:mm:ss')}{' / '}{item.last_login ? moment(item.last_login).fromNow() : '--'}\n          </td>\n          <td>\n            {(isOpIconShown && item.email != username) &&\n            <OpMenu\n              operations={['Delete', 'Reset Password']}\n              translateOperations={this.translateOperations}\n              onMenuItemClick={this.onMenuItemClick}\n              onFreezedItem={this.props.onFreezedItem}\n              onUnfreezedItem={this.onUnfreezedItem}\n            />\n            }\n          </td>\n        </tr>\n        {isDeleteDialogOpen &&\n          <CommonOperationConfirmationDialog\n            title={gettext('Delete Member')}\n            message={deleteDialogMsg}\n            executeOperation={this.deleteUser}\n            confirmBtnText={gettext('Delete')}\n            toggleDialog={this.toggleDeleteDialog}\n          />\n        }\n        {isResetPasswordDialogOpen &&\n          <CommonOperationConfirmationDialog\n            title={gettext('Reset Password')}\n            message={resetPasswordDialogMsg}\n            executeOperation={this.resetPassword}\n            confirmBtnText={gettext('Reset')}\n            toggleDialog={this.toggleResetPasswordDialog}\n          />\n        }\n      </Fragment>\n    );\n  }\n}\n\nclass OrgUsers extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      orgName: '',\n      userList: [],\n      isAddUserDialogOpen: false\n    };\n  }\n\n  componentDidMount () {\n    seafileAPI.sysAdminGetOrg(this.props.orgID).then((res) => {\n      this.setState({\n        orgName: res.data.org_name\n      });\n    });\n    seafileAPI.sysAdminListOrgUsers(this.props.orgID).then((res) => {\n      this.setState({\n        loading: false,\n        userList: res.data.users\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  toggleAddUserDialog = () => {\n    this.setState({isAddUserDialogOpen: !this.state.isAddUserDialogOpen});\n  }\n\n  addUser = (newUserInfo) => {\n    const { email, name, password } = newUserInfo;\n    seafileAPI.sysAdminAddOrgUser(this.props.orgID, email, name, password).then(res => {\n      let userList = this.state.userList;\n      userList.unshift(res.data);\n      this.setState({userList: userList});\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  deleteUser = (orgID, email) => {\n    seafileAPI.sysAdminDeleteOrgUser(orgID, email).then(res => {\n      let newUserList = this.state.userList.filter(item => {\n        return item.email != email;\n      });\n      this.setState({userList: newUserList});\n      toaster.success(gettext('Successfully deleted 1 item.'));\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  updateStatus = (email, statusValue) => {\n    const isActive = statusValue == 'active';\n    seafileAPI.sysAdminUpdateOrgUser(this.props.orgID, email, 'active', isActive).then(res => {\n      let newUserList = this.state.userList.map(item => {\n        if (item.email == email) {\n          item.active = res.data.active;\n        }\n        return item;\n      });\n      this.setState({userList: newUserList});\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  render() {\n    const { isAddUserDialogOpen, orgName } = this.state;\n    return (\n      <Fragment>\n        <MainPanelTopbar>\n          <Button className=\"btn btn-secondary operation-item\" onClick={this.toggleAddUserDialog}>{gettext('Add Member')}</Button>\n        </MainPanelTopbar>\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <OrgNav\n              currentItem=\"users\"\n              orgID={this.props.orgID}\n              orgName={orgName}\n            />\n            <div className=\"cur-view-content\">\n              <Content\n                loading={this.state.loading}\n                errorMsg={this.state.errorMsg}\n                items={this.state.userList}\n                updateStatus={this.updateStatus}\n                deleteUser={this.deleteUser}\n              />\n            </div>\n          </div>\n        </div>\n        {isAddUserDialogOpen &&\n          <SysAdminAddUserDialog\n            addUser={this.addUser}\n            toggleDialog={this.toggleAddUserDialog}\n          />\n        }\n      </Fragment>\n    );\n  }\n}\n\nexport default OrgUsers;\n","import React, { Component, Fragment } from 'react';\nimport moment from 'moment';\nimport { Utils } from '../../../utils/utils';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { siteRoot, gettext } from '../../../utils/constants';\nimport toaster from '../../../components/toast';\nimport EmptyTip from '../../../components/empty-tip';\nimport Loading from '../../../components/loading';\nimport CommonOperationConfirmationDialog from '../../../components/dialog/common-operation-confirmation-dialog';\nimport MainPanelTopbar from '../main-panel-topbar';\nimport UserLink from '../user-link';\nimport OrgNav from './org-nav';\n\nclass Content extends Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    const { loading, errorMsg, items } = this.props;\n    if (loading) {\n      return <Loading />;\n    } else if (errorMsg) {\n      return <p className=\"error text-center mt-4\">{errorMsg}</p>;\n    } else {\n      const emptyTip = (\n        <EmptyTip>\n          <h2>{gettext('No groups')}</h2>\n        </EmptyTip>\n      );\n      const table = (\n        <Fragment>\n          <table className=\"table-hover\">\n            <thead>\n              <tr>\n                <th width=\"30%\">{gettext('Name')}</th>\n                <th width=\"30%\">{gettext('Creator')}</th>\n                <th width=\"30%\">{gettext('Created At')}</th>\n                <th width=\"10%\">{/* Operations */}</th>\n              </tr>\n            </thead>\n            <tbody>\n              {items.map((item, index) => {\n                return (<Item\n                  key={index}\n                  item={item}\n                  deleteGroup={this.props.deleteGroup}\n                />);\n              })}\n            </tbody>\n          </table>\n        </Fragment>\n      );\n      return items.length ? table : emptyTip;\n    }\n  }\n}\n\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOpIconShown: false,\n      isDeleteDialogOpen: false\n    };\n  }\n\n  handleMouseEnter = () => {\n    this.setState({isOpIconShown: true});\n  }\n\n  handleMouseLeave = () => {\n    this.setState({isOpIconShown: false});\n  }\n\n  toggleDeleteDialog = (e) => {\n    if (e) {\n      e.preventDefault();\n    }\n    this.setState({isDeleteDialogOpen: !this.state.isDeleteDialogOpen});\n  }\n\n  deleteGroup = () => {\n    this.toggleDeleteDialog();\n    this.props.deleteGroup(this.props.item.group_id);\n  }\n\n  render() {\n    const { item } = this.props;\n    const { isOpIconShown, isDeleteDialogOpen } = this.state;\n\n    const itemName = '<span class=\"op-target\">' + Utils.HTMLescape(item.group_name) + '</span>';\n    const deleteDialogMsg = gettext('Are you sure you want to delete {placeholder} ?').replace('{placeholder}', itemName);\n\n    const groupUrl = item.parent_group_id == 0 ?\n      `${siteRoot}sys/groups/${item.group_id}/libraries/` :\n      `${siteRoot}sysadmin/#address-book/groups/${item.group_id}/`;\n\n    return (\n      <Fragment>\n        <tr onMouseEnter={this.handleMouseEnter} onMouseLeave={this.handleMouseLeave}>\n          <td><a href={groupUrl}>{item.group_name}</a></td>\n          <td><UserLink email={item.creator_email} name={item.creator_name} /></td>\n          <td>{moment(item.created_at).format('YYYY-MM-DD HH:mm:ss')}</td>\n          <td>\n            <a href=\"#\" className={`action-icon sf2-icon-delete ${isOpIconShown ? '' : 'invisible'}`} title={gettext('Delete')} onClick={this.toggleDeleteDialog}></a>\n          </td>\n        </tr>\n        {isDeleteDialogOpen &&\n          <CommonOperationConfirmationDialog\n            title={gettext('Delete Group')}\n            message={deleteDialogMsg}\n            executeOperation={this.deleteGroup}\n            confirmBtnText={gettext('Delete')}\n            toggleDialog={this.toggleDeleteDialog}\n          />\n        }\n      </Fragment>\n    );\n  }\n}\n\nclass OrgGroups extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      orgName: '',\n      groupList: []\n    };\n  }\n\n  componentDidMount () {\n    seafileAPI.sysAdminGetOrg(this.props.orgID).then((res) => {\n      this.setState({\n        orgName: res.data.org_name\n      });\n    });\n    seafileAPI.sysAdminListOrgGroups(this.props.orgID).then((res) => {\n      this.setState({\n        loading: false,\n        groupList: res.data.group_list\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  deleteGroup = (groupID) => {\n    seafileAPI.sysAdminDismissGroupByID(groupID).then(res => {\n      let newGroupList = this.state.groupList.filter(item => {\n        return item.group_id != groupID;\n      });\n      this.setState({groupList: newGroupList});\n      toaster.success(gettext('Successfully deleted 1 item.'));\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  render() {\n    return (\n      <Fragment>\n        <MainPanelTopbar />\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <OrgNav\n              currentItem=\"groups\"\n              orgID={this.props.orgID}\n              orgName={this.state.orgName}\n            />\n            <div className=\"cur-view-content\">\n              <Content\n                loading={this.state.loading}\n                errorMsg={this.state.errorMsg}\n                items={this.state.groupList}\n                deleteGroup={this.deleteGroup}\n              />\n            </div>\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nexport default OrgGroups;\n","import React, { Component, Fragment } from 'react';\nimport { Utils } from '../../../utils/utils';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { siteRoot, gettext } from '../../../utils/constants';\nimport toaster from '../../../components/toast';\nimport EmptyTip from '../../../components/empty-tip';\nimport Loading from '../../../components/loading';\nimport CommonOperationConfirmationDialog from '../../../components/dialog/common-operation-confirmation-dialog';\nimport MainPanelTopbar from '../main-panel-topbar';\nimport UserLink from '../user-link';\nimport OrgNav from './org-nav';\n\nclass Content extends Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    const { loading, errorMsg, items } = this.props;\n    if (loading) {\n      return <Loading />;\n    } else if (errorMsg) {\n      return <p className=\"error text-center mt-4\">{errorMsg}</p>;\n    } else {\n      const emptyTip = (\n        <EmptyTip>\n          <h2>{gettext('No libraries')}</h2>\n        </EmptyTip>\n      );\n      const table = (\n        <Fragment>\n          <table className=\"table-hover\">\n            <thead>\n              <tr>\n                <th width=\"5%\"></th>\n                <th width=\"30%\">{gettext('Name')}</th>\n                <th width=\"35%\">{gettext('ID')}</th>\n                <th width=\"20%\">{gettext('Owner')}</th>\n                <th width=\"10%\">{/* Operations */}</th>\n              </tr>\n            </thead>\n            <tbody>\n              {items.map((item, index) => {\n                return (<Item\n                  key={index}\n                  item={item}\n                  deleteRepo={this.props.deleteRepo}\n                />);\n              })}\n            </tbody>\n          </table>\n        </Fragment>\n      );\n      return items.length ? table : emptyTip;\n    }\n  }\n}\n\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOpIconShown: false,\n      isDeleteDialogOpen: false\n    };\n  }\n\n  handleMouseEnter = () => {\n    this.setState({isOpIconShown: true});\n  }\n\n  handleMouseLeave = () => {\n    this.setState({isOpIconShown: false});\n  }\n\n  toggleDeleteDialog = (e) => {\n    if (e) {\n      e.preventDefault();\n    }\n    this.setState({isDeleteDialogOpen: !this.state.isDeleteDialogOpen});\n  }\n\n  deleteRepo = () => {\n    this.props.deleteRepo(this.props.item.repo_id);\n  }\n\n  render() {\n    const { item } = this.props;\n    const { isOpIconShown, isDeleteDialogOpen } = this.state;\n\n    const iconUrl = Utils.getLibIconUrl(item);\n    const iconTitle = Utils.getLibIconTitle(item);\n\n    const itemName = '<span class=\"op-target\">' + Utils.HTMLescape(item.repo_name) + '</span>';\n    const deleteDialogMsg = gettext('Are you sure you want to delete {placeholder} ?').replace('{placeholder}', itemName);\n\n    return (\n      <Fragment>\n        <tr onMouseEnter={this.handleMouseEnter} onMouseLeave={this.handleMouseLeave}>\n          <td><img src={iconUrl} title={iconTitle} alt={iconTitle} width=\"24\" /></td>\n          <td>{item.repo_name}</td>\n          <td>{item.repo_id}</td>\n          <td>\n            {!item.owner_email ?\n              '--' :\n              item.owner_email.indexOf('@seafile_group') == -1 ?\n              <UserLink email={item.owner_email} name={item.owner_name} /> :\n              item.owner_name\n            }\n          </td>\n          <td>\n            <a href=\"#\" className={`action-icon sf2-icon-delete ${isOpIconShown ? '' : 'invisible'}`} title={gettext('Delete')} onClick={this.toggleDeleteDialog}></a>\n          </td>\n        </tr>\n        {isDeleteDialogOpen &&\n          <CommonOperationConfirmationDialog\n            title={gettext('Delete Library')}\n            message={deleteDialogMsg}\n            executeOperation={this.deleteRepo}\n            confirmBtnText={gettext('Delete')}\n            toggleDialog={this.toggleDeleteDialog}\n          />\n        }\n      </Fragment>\n    );\n  }\n}\n\nclass OrgRepos extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      orgName: '',\n      repoList: []\n    };\n  }\n\n  componentDidMount () {\n    seafileAPI.sysAdminGetOrg(this.props.orgID).then((res) => {\n      this.setState({\n        orgName: res.data.org_name\n      });\n    });\n    seafileAPI.sysAdminListOrgRepos(this.props.orgID).then((res) => {\n      this.setState({\n        loading: false,\n        repoList: res.data.repo_list\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  deleteRepo = (repoID) => {\n    seafileAPI.sysAdminDeleteRepo(repoID).then(res => {\n      let newRepoList = this.state.repoList.filter(item => {\n        return item.repo_id != repoID;\n      });\n      this.setState({repoList: newRepoList});\n      toaster.success(gettext('Successfully deleted 1 item.'));\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  render() {\n    return (\n      <Fragment>\n        <MainPanelTopbar />\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <OrgNav\n              currentItem=\"repos\"\n              orgID={this.props.orgID}\n              orgName={this.state.orgName}\n            />\n            <div className=\"cur-view-content\">\n              <Content\n                loading={this.state.loading}\n                errorMsg={this.state.errorMsg}\n                items={this.state.repoList}\n                deleteRepo={this.deleteRepo}\n              />\n            </div>\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nexport default OrgRepos;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter, Form, FormGroup, Input } from 'reactstrap';\nimport { gettext } from '../../../utils/constants';\n\nconst propTypes = {\n  toggle: PropTypes.func.isRequired,\n  addInstitution: PropTypes.func.isRequired\n};\n\nclass SysAdminAddInstitutionDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      value: '',\n      isSubmitBtnActive: false\n    };\n  }\n\n  handleChange = (e) => {\n    const value = e.target.value;\n    this.setState({\n      value: value,\n      isSubmitBtnActive: value.trim() != ''\n    });\n  }\n\n  handleSubmit = () => {\n    this.toggle();\n    this.props.addInstitution(this.state.value.trim());\n  }\n\n  toggle = () => {\n    this.props.toggle();\n  }\n\n  render() {\n    return (\n      <Modal isOpen={true} toggle={this.toggle}>\n        <ModalHeader toggle={this.toggle}>{gettext('Add institution')}</ModalHeader>\n        <ModalBody>\n          <Form>\n            <p>{gettext('Name')}</p>\n            <FormGroup>\n              <Input\n                value={this.state.value}\n                onChange={this.handleChange}\n              />\n            </FormGroup>\n          </Form>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"primary\" onClick={this.handleSubmit} disabled={!this.state.isSubmitBtnActive}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nSysAdminAddInstitutionDialog.propTypes = propTypes;\n\nexport default SysAdminAddInstitutionDialog;\n","import React, { Component, Fragment } from 'react';\nimport { Link } from '@reach/router';\nimport { Button } from 'reactstrap';\nimport moment from 'moment';\nimport { Utils } from '../../../utils/utils';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { siteRoot, gettext } from '../../../utils/constants';\nimport toaster from '../../../components/toast';\nimport EmptyTip from '../../../components/empty-tip';\nimport Loading from '../../../components/loading';\nimport CommonOperationConfirmationDialog from '../../../components/dialog/common-operation-confirmation-dialog';\nimport MainPanelTopbar from '../main-panel-topbar';\nimport SysAdminAddInstitutionDialog from '../../../components/dialog/sysadmin-dialog/sysadmin-add-institution-dialog';\nimport Paginator from '../../../components/paginator';\n\nclass Content extends Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  getPreviousPage = () => {\n    this.props.getInstitutionsByPage(this.props.currentPage - 1);\n  }\n\n  getNextPage = () => {\n    this.props.getInstitutionsByPage(this.props.currentPage + 1);\n  }\n\n  render() {\n    const { loading, errorMsg, items, perPage, currentPage, hasNextPage } = this.props;\n    if (loading) {\n      return <Loading />;\n    } else if (errorMsg) {\n      return <p className=\"error text-center mt-4\">{errorMsg}</p>;\n    } else {\n      const emptyTip = (\n        <EmptyTip>\n          <h2>{gettext('No institutions')}</h2>\n        </EmptyTip>\n      );\n      const table = (\n        <Fragment>\n          <table className=\"table-hover\">\n            <thead>\n              <tr>\n                <th width=\"75%\">{gettext('Name')}</th>\n                <th width=\"20%\">{gettext('Created At')}</th>\n                <th width=\"5%\">{/* Operations */}</th>\n              </tr>\n            </thead>\n            <tbody>\n              {items.map((item, index) => {\n                return (<Item\n                  key={index}\n                  item={item}\n                  deleteInstitution={this.props.deleteInstitution}\n                />);\n              })}\n            </tbody>\n          </table>\n          <Paginator\n            gotoPreviousPage={this.getPreviousPage}\n            gotoNextPage={this.getNextPage}\n            currentPage={currentPage}\n            hasNextPage={hasNextPage}\n            curPerPage={perPage}\n            resetPerPage={this.props.resetPerPage}\n          />\n        </Fragment>\n      );\n      return items.length ? table : emptyTip;\n    }\n  }\n}\n\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOpIconShown: false,\n      isDeleteDialogOpen: false\n    };\n  }\n\n  handleMouseEnter = () => {\n    this.setState({isOpIconShown: true});\n  }\n\n  handleMouseLeave = () => {\n    this.setState({isOpIconShown: false});\n  }\n\n  toggleDeleteDialog = (e) => {\n    if (e) {\n      e.preventDefault();\n    }\n    this.setState({isDeleteDialogOpen: !this.state.isDeleteDialogOpen});\n  }\n\n  deleteInstitution = () => {\n    this.props.deleteInstitution(this.props.item.id);\n  }\n\n  render() {\n    const { item } = this.props;\n    const { isOpIconShown, isDeleteDialogOpen } = this.state;\n\n    const institutionName = '<span class=\"op-target\">' + Utils.HTMLescape(item.name) + '</span>';\n    const deleteDialogMsg = gettext('Are you sure you want to delete {placeholder} ?').replace('{placeholder}', institutionName);\n\n    return (\n      <Fragment>\n        <tr onMouseEnter={this.handleMouseEnter} onMouseLeave={this.handleMouseLeave}>\n          <td><Link to={`${siteRoot}sys/institutions/${item.id}/info/`}>{item.name}</Link></td>\n          <td>{moment(item.ctime).fromNow()}</td>\n          <td>\n            <a href=\"#\" className={`action-icon sf2-icon-delete ${isOpIconShown ? '' : 'invisible'}`} title={gettext('Delete')} onClick={this.toggleDeleteDialog}></a>\n          </td>\n        </tr>\n        {isDeleteDialogOpen &&\n          <CommonOperationConfirmationDialog\n            title={gettext('Delete Institution')}\n            message={deleteDialogMsg}\n            executeOperation={this.deleteInstitution}\n            confirmBtnText={gettext('Delete')}\n            toggleDialog={this.toggleDeleteDialog}\n          />\n        }\n      </Fragment>\n    );\n  }\n}\n\nclass Institutions extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      institutionList: [],\n      perPage: 25,\n      currentPage: 1,\n      hasNextPage: false,\n      isAddInstitutionDialogOpen: false,\n    };\n    this.initPage = 1;\n  }\n\n  componentDidMount () {\n    let urlParams = (new URL(window.location)).searchParams;\n    const { currentPage, perPage } = this.state;\n    this.setState({\n      perPage: parseInt(urlParams.get('per_page') || perPage),\n      currentPage: parseInt(urlParams.get('page') || currentPage)\n    }, () => {\n      this.getInstitutionsByPage(this.state.currentPage);\n    });\n  }\n\n  getInstitutionsByPage = (page) => {\n    let { perPage } = this.state;\n    seafileAPI.sysAdminListInstitutions(page, perPage).then((res) => {\n      this.setState({\n        loading: false,\n        institutionList: res.data.institution_list,\n        currentPage: page,\n        hasNextPage: Utils.hasNextPage(page, perPage, res.data.total_count),\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  resetPerPage = (newPerPage) => {\n    this.setState({\n      perPage: newPerPage,\n    }, () => this.getInstitutionsByPage(this.initPage));\n  }\n\n  toggleAddInstitutionDialog = () => {\n    this.setState({isAddInstitutionDialogOpen: !this.state.isAddInstitutionDialogOpen});\n  }\n\n  addInstitution = (name) => {\n    seafileAPI.sysAdminAddInstitution(name).then(res => {\n      let institutionList = this.state.institutionList;\n      institutionList.push(res.data);\n      this.setState({institutionList: institutionList});\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  deleteInstitution = (institutionID) => {\n    seafileAPI.sysAdminDeleteInstitution(institutionID).then(res => {\n      let institutionList = this.state.institutionList.filter(inst => {\n        return inst.id != institutionID;\n      });\n      this.setState({institutionList: institutionList});\n      toaster.success(gettext('Successfully deleted 1 item.'));\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  render() {\n    const { isAddInstitutionDialogOpen, hasNextPage, currentPage, perPage } = this.state;\n    return (\n      <Fragment>\n        <MainPanelTopbar>\n          <Button className=\"btn btn-secondary operation-item\" onClick={this.toggleAddInstitutionDialog}>{gettext('Add Institution')}</Button>\n        </MainPanelTopbar>\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <div className=\"cur-view-path\">\n              <h3 className=\"sf-heading\">{gettext('Institutions')}</h3>\n            </div>\n            <div className=\"cur-view-content\">\n              <Content\n                loading={this.state.loading}\n                errorMsg={this.state.errorMsg}\n                items={this.state.institutionList}\n                deleteInstitution={this.deleteInstitution}\n                currentPage={currentPage}\n                perPage={perPage}\n                hasNextPage={hasNextPage}\n                getInstitutionsByPage={this.getInstitutionsByPage}\n                resetPerPage={this.resetPerPage}\n              />\n            </div>\n          </div>\n        </div>\n        {isAddInstitutionDialogOpen &&\n          <SysAdminAddInstitutionDialog\n            addInstitution={this.addInstitution}\n            toggle={this.toggleAddInstitutionDialog}\n          />\n        }\n      </Fragment>\n    );\n  }\n}\n\nexport default Institutions;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Link } from '@reach/router';\nimport { siteRoot, gettext } from '../../../utils/constants';\n\nconst propTypes = {\n  currentItem: PropTypes.string.isRequired\n};\n\nclass Nav extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.navItems = [\n      {name: 'info', urlPart: 'info', text: gettext('Info')},\n      {name: 'members', urlPart: 'members', text: gettext('Members')},\n      {name: 'admins', urlPart: 'admins', text: gettext('Admins')},\n    ];\n  }\n\n  render() {\n    const { currentItem, institutionID, institutionName } = this.props;\n    return (\n      <div>\n        <div className=\"cur-view-path\">\n          <h3 className=\"sf-heading\"><Link to={`${siteRoot}sys/institutions/`}>{gettext('Institutions')}</Link> / {institutionName}</h3>\n        </div>\n        <ul className=\"nav border-bottom mx-4\">\n          {this.navItems.map((item, index) => {\n            return (\n              <li className=\"nav-item mr-2\" key={index}>\n                <Link to={`${siteRoot}sys/institutions/${institutionID}/${item.urlPart}/`} className={`nav-link ${currentItem == item.name ? ' active' : ''}`}>{item.text}</Link>\n              </li>\n            );\n          })}\n        </ul>\n      </div>\n    );\n  }\n}\n\nNav.propTypes = propTypes;\n\nexport default Nav;\n","import React, { Component, Fragment } from 'react';\nimport { Utils } from '../../../utils/utils';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { gettext } from '../../../utils/constants';\nimport toaster from '../../../components/toast';\nimport Loading from '../../../components/loading';\nimport SysAdminSetInstitutionQuotaDialog from '../../../components/dialog/sysadmin-dialog/set-quota';\nimport MainPanelTopbar from '../main-panel-topbar';\nimport InstitutionNav from './institution-nav';\n\nclass Content extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isSetQuotaDialogOpen: false,\n    };\n  }\n\n  toggleSetQuotaDialog = () => {\n    this.setState({isSetQuotaDialogOpen: !this.state.isSetQuotaDialogOpen});\n  }\n\n  showEditIcon = (action) => {\n    return (\n      <span\n        title={gettext('Edit')}\n        className=\"fa fa-pencil-alt attr-action-icon\"\n        onClick={action}>\n      </span>\n    );\n  }\n\n  render() {\n    const { loading, errorMsg, institutionInfo } = this.props;\n    if (loading) {\n      return <Loading />;\n    } else if (errorMsg) {\n      return <p className=\"error text-center\">{errorMsg}</p>;\n    } else {\n      const { name, user_count, quota_total, quota_used } = institutionInfo;\n      const { isSetQuotaDialogOpen } = this.state;\n      return (\n        <Fragment>\n          <dl className=\"m-0\">\n            <dt className=\"info-item-heading\">{gettext('Name')}</dt>\n            <dd className=\"info-item-content\">\n              {name}\n            </dd>\n\n            <dt className=\"info-item-heading\">{gettext('Number of members')}</dt>\n            <dd className=\"info-item-content\">{user_count}</dd>\n\n            <dt className=\"info-item-heading\">{gettext('Space Used')}</dt>\n            <dd className=\"info-item-content\">\n              {`${Utils.bytesToSize(quota_used)} / ${quota_total > 0 ? Utils.bytesToSize(quota_total) : '--'}`}\n              {this.showEditIcon(this.toggleSetQuotaDialog)}\n            </dd>\n          </dl>\n          {isSetQuotaDialogOpen &&\n          <SysAdminSetInstitutionQuotaDialog\n            updateQuota={this.props.updateQuota}\n            toggle={this.toggleSetQuotaDialog}\n          />\n          }\n        </Fragment>\n      );\n    }\n  }\n}\n\nclass InstitutionInfo extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      institutionInfo: {}\n    };\n  }\n\n  componentDidMount () {\n    seafileAPI.sysAdminGetInstitution(this.props.institutionID).then((res) => {\n      this.setState({\n        loading: false,\n        institutionInfo: res.data\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  updateQuota = (quota) => {\n    seafileAPI.sysAdminUpdateInstitution(this.props.institutionID, quota).then(res => {\n      const newInstitutionInfo = Object.assign(this.state.institutionInfo, {\n        quota_total: res.data.quota_total,\n      });\n      this.setState({institutionInfo: newInstitutionInfo});\n      toaster.success(gettext('Successfully set quota.'));\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n\n  render() {\n    const { institutionInfo } = this.state;\n    return (\n      <Fragment>\n        <MainPanelTopbar />\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <InstitutionNav currentItem=\"info\" institutionID={this.props.institutionID} institutionName={institutionInfo.name} />\n            <div className=\"cur-view-content\">\n              <Content\n                loading={this.state.loading}\n                errorMsg={this.state.errorMsg}\n                institutionInfo={this.state.institutionInfo}\n                updateQuota={this.updateQuota}\n              />\n            </div>\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nexport default InstitutionInfo;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter } from 'reactstrap';\nimport { gettext } from '../../../utils/constants';\nimport UserSelect from '../../user-select.js';\n\nconst propTypes = {\n  toggle: PropTypes.func.isRequired,\n  addUser: PropTypes.func.isRequired\n};\n\nclass AddMemberDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      selectedOption: [],\n    };\n  }\n\n  handleSelectChange = (option) => {\n    this.setState({ selectedOption: option });\n  }\n\n  handleSubmit = () => {\n    if (!this.state.selectedOption) return;\n    const emails = this.state.selectedOption.map(item => item.email);\n    this.props.addUser(emails);\n  }\n\n  render() {\n    return (\n      <Modal isOpen={true} toggle={this.props.toggle}>\n        <ModalHeader toggle={this.props.toggle}>{gettext('Add Member')}</ModalHeader>\n        <ModalBody>\n          <UserSelect\n            placeholder={gettext('Search users...')}\n            onSelectChange={this.handleSelectChange}\n            isMulti={true}\n            className='org-add-member-select'\n          />\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"primary\" onClick={this.handleSubmit}>{gettext('Submit')}</Button>\n          <Button color=\"secondary\" onClick={this.props.toggle}>{gettext('Cancel')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nAddMemberDialog.propTypes = propTypes;\n\nexport default AddMemberDialog;\n","import React, { Component, Fragment } from 'react';\nimport { Button } from 'reactstrap';\nimport moment from 'moment';\nimport { Utils } from '../../../utils/utils';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { gettext } from '../../../utils/constants';\nimport toaster from '../../../components/toast';\nimport EmptyTip from '../../../components/empty-tip';\nimport Loading from '../../../components/loading';\nimport Paginator from '../../../components/paginator';\nimport OpMenu from '../../../components/dialog/op-menu';\nimport AddMemberDialog from '../../../components/dialog/sysadmin-dialog/sysadmin-add-institution-member-dialog';\nimport CommonOperationConfirmationDialog from '../../../components/dialog/common-operation-confirmation-dialog';\nimport UserLink from '../user-link';\nimport MainPanelTopbar from '../main-panel-topbar';\nimport InstitutionNav from './institution-nav';\n\nclass Content extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isItemFreezed: false\n    };\n  }\n\n  onFreezedItem = () => {\n    this.setState({isItemFreezed: true});\n  }\n\n  onUnfreezedItem = () => {\n    this.setState({isItemFreezed: false});\n  }\n\n  getPreviousPage = () => {\n    this.props.getInstitutionUsersByPage(this.props.currentPage - 1);\n  }\n\n  getNextPage = () => {\n    this.props.getInstitutionUsersByPage(this.props.currentPage + 1);\n  }\n\n  render() {\n    const { loading, errorMsg, items, perPage, currentPage, hasNextPage } = this.props;\n    if (loading) {\n      return <Loading />;\n    } else if (errorMsg) {\n      return <p className=\"error text-center mt-4\">{errorMsg}</p>;\n    } else {\n      const emptyTip = (\n        <EmptyTip>\n          <h2>{gettext('No members')}</h2>\n        </EmptyTip>\n      );\n      const table = (\n        <Fragment>\n          <table>\n            <thead>\n              <tr>\n                <th width=\"25%\">{gettext('Name')}</th>\n                <th width=\"10%\">{gettext('Status')}</th>\n                <th width=\"20%\">{gettext('Space Used')}</th>\n                <th width=\"40%\">{gettext('Created At')}{' / '}{gettext('Last Login')}</th>\n                <th width=\"5%\">{/* Operations */}</th>\n              </tr>\n            </thead>\n            <tbody>\n              {items.map((item, index) => {\n                return (<Item\n                  key={index}\n                  item={item}\n                  isItemFreezed={this.state.isItemFreezed}\n                  onFreezedItem={this.onFreezedItem}\n                  onUnfreezedItem={this.onUnfreezedItem}\n                  setAdmin={this.props.setAdmin}\n                  deleteUser={this.props.deleteUser}\n                />);\n              })}\n            </tbody>\n          </table>\n          <Paginator\n            gotoPreviousPage={this.getPreviousPage}\n            gotoNextPage={this.getNextPage}\n            currentPage={currentPage}\n            hasNextPage={hasNextPage}\n            curPerPage={perPage}\n            resetPerPage={this.props.resetPerPage}\n          />\n        </Fragment>\n      );\n      return items.length ? table : emptyTip;\n    }\n  }\n}\n\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOpIconShown: false,\n      highlight: false,\n      isSetAdminDialogOpen: false,\n    };\n  }\n\n  handleMouseEnter = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        isOpIconShown: true,\n        highlight: true\n      });\n    }\n  }\n\n  handleMouseLeave = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        isOpIconShown: false,\n        highlight: false\n      });\n    }\n  }\n\n  onUnfreezedItem = () => {\n    this.setState({\n      highlight: false,\n      isOpIconShow: false\n    });\n    this.props.onUnfreezedItem();\n  }\n\n  toggleSetAdminDialog = (e) => {\n    if (e) {\n      e.preventDefault();\n    }\n    this.setState({isSetAdminDialogOpen: !this.state.isSetAdminDialogOpen});\n  }\n\n  setAdmin = () => {\n    this.props.setAdmin(this.props.item.email);\n  }\n\n  onMenuItemClick = (operation) => {\n    switch (operation) {\n      case 'Delete':\n        this.props.deleteUser(this.props.item.email);\n        break;\n      case 'Set Admin':\n        this.toggleSetAdminDialog();\n        break;\n    }\n  }\n\n  getOperations = () => {\n    let operations = [];\n    if (!this.props.item.is_institution_admin) {\n      operations.push('Set Admin');\n    }\n    operations.push('Delete');\n    return operations;\n  }\n\n  translateOperations = (item) => {\n    let translateResult = '';\n    switch(item) {\n      case 'Delete':\n        translateResult = gettext('Delete');\n        break;\n      case 'Set Admin':\n        translateResult = gettext('Set Admin');\n        break;\n    }\n\n    return translateResult;\n  }\n\n  render() {\n    const { item } = this.props;\n    const { isOpIconShown, isSetAdminDialogOpen } = this.state;\n\n    const itemName = '<span class=\"op-target\">' + Utils.HTMLescape(item.name) + '</span>';\n    const dialogMsg = gettext('Are you sure you want to set {placeholder} as Admin?').replace('{placeholder}', itemName);\n\n    return (\n      <Fragment>\n        <tr className={this.state.highlight ? 'tr-highlight' : ''} onMouseEnter={this.handleMouseEnter} onMouseLeave={this.handleMouseLeave}>\n          <td>\n            <UserLink email={item.email} name={item.name} />\n          </td>\n          <td>\n            {item.is_active ? gettext('Active') : gettext('Inactive')}\n          </td>\n          <td>{`${Utils.bytesToSize(item.quota_usage)} / ${item.quota_total > 0 ? Utils.bytesToSize(item.quota_total) : '--'}`}</td>\n          <td>\n            {moment(item.create_time).format('YYYY-MM-DD HH:mm:ss')}{' / '}{item.last_login ? moment(item.last_login).fromNow() : '--'}\n          </td>\n          <td>\n            {isOpIconShown &&\n              <OpMenu\n                operations={this.getOperations()}\n                translateOperations={this.translateOperations}\n                onMenuItemClick={this.onMenuItemClick}\n                onFreezedItem={this.props.onFreezedItem}\n                onUnfreezedItem={this.onUnfreezedItem}\n              />\n            }\n          </td>\n        </tr>\n        {isSetAdminDialogOpen &&\n          <CommonOperationConfirmationDialog\n            title={gettext('Set Admin')}\n            message={dialogMsg}\n            executeOperation={this.setAdmin}\n            toggleDialog={this.toggleSetAdminDialog}\n            confirmBtnText={gettext('Set Admin')}\n          />\n        }\n      </Fragment>\n    );\n  }\n}\n\nclass InstitutionUsers extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      institutionName: '',\n      userList: [],\n      perPage: 25,\n      currentPage: 1,\n      hasNextPage: false,\n      isAddUserDialogOpen: false\n    };\n    this.initPage = 1;\n  }\n\n  componentDidMount () {\n    seafileAPI.sysAdminGetInstitution(this.props.institutionID).then((res) => {\n      this.setState({\n        institutionName: res.data.name\n      });\n    });\n\n    let urlParams = (new URL(window.location)).searchParams;\n    const { currentPage, perPage } = this.state;\n    this.setState({\n      perPage: parseInt(urlParams.get('per_page') || perPage),\n      currentPage: parseInt(urlParams.get('page') || currentPage)\n    }, () => {\n      this.getInstitutionUsersByPage(this.state.currentPage);\n    });\n  }\n\n  getInstitutionUsersByPage = (page) => {\n    let { perPage } = this.state;\n    seafileAPI.sysAdminListInstitutionUsers(this.props.institutionID, page, perPage).then((res) => {\n      this.setState({\n        loading: false,\n        userList: res.data.user_list,\n        currentPage: page,\n        hasNextPage: Utils.hasNextPage(page, perPage, res.data.total_count),\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  setAdmin = (email) => {\n    seafileAPI.sysAdminUpdateInstitutionUser(this.props.institutionID, email, true).then(res => {\n      let userList = this.state.userList.map(user => {\n        if (user.email == email) {\n          user.is_institution_admin = true;\n        }\n        return user;\n      });\n      this.setState({userList: userList});\n      toaster.success(gettext('Success'));\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  toggleAddUserDialog = () => {\n    this.setState({isAddUserDialogOpen: !this.state.isAddUserDialogOpen});\n  }\n\n  resetPerPage = (newPerPage) => {\n    this.setState({\n      perPage: newPerPage,\n    }, () => this.getInstitutionUsersByPage(this.initPage));\n  }\n\n  addUser = (emails) => {\n    seafileAPI.sysAdminAddInstitutionUserBatch(this.props.institutionID, emails).then(res => {\n      this.toggleAddUserDialog();\n      let successArray = res.data.success;\n      let failedArray = res.data.failed;\n      if (successArray.length) {\n        let newUserList = this.state.userList.concat(successArray);\n        this.setState({userList: newUserList});\n      }\n      failedArray.map((item) => {\n        toaster.danger(item.error_msg);\n      });\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  deleteUser = (email) => {\n    seafileAPI.sysAdminDeleteInstitutionUser(this.props.institutionID, email).then(res => {\n      let newUserList = this.state.userList.filter(user => {\n        return user.email != email;\n      });\n      this.setState({userList: newUserList});\n      toaster.success('success');\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  render() {\n    const { isAddUserDialogOpen, institutionName, hasNextPage, currentPage, perPage } = this.state;\n    return (\n      <Fragment>\n        <MainPanelTopbar>\n          <Button className=\"btn btn-secondary operation-item\" onClick={this.toggleAddUserDialog}>{gettext('Add Member')}</Button>\n        </MainPanelTopbar>\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <InstitutionNav\n              currentItem=\"members\"\n              institutionID={this.props.institutionID}\n              institutionName={institutionName}\n            />\n            <div className=\"cur-view-content\">\n              <Content\n                loading={this.state.loading}\n                errorMsg={this.state.errorMsg}\n                items={this.state.userList}\n                setAdmin={this.setAdmin}\n                deleteUser={this.deleteUser}\n                currentPage={currentPage}\n                perPage={perPage}\n                hasNextPage={hasNextPage}\n                getInstitutionUsersByPage={this.getInstitutionUsersByPage}\n                resetPerPage={this.resetPerPage}\n              />\n            </div>\n          </div>\n        </div>\n        {isAddUserDialogOpen &&\n          <AddMemberDialog\n            addUser={this.addUser}\n            toggle={this.toggleAddUserDialog}\n          />\n        }\n      </Fragment>\n    );\n  }\n}\n\nexport default InstitutionUsers;\n","import React, { Component, Fragment } from 'react';\nimport moment from 'moment';\nimport { Utils } from '../../../utils/utils';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { gettext } from '../../../utils/constants';\nimport toaster from '../../../components/toast';\nimport EmptyTip from '../../../components/empty-tip';\nimport Loading from '../../../components/loading';\nimport OpMenu from '../../../components/dialog/op-menu';\nimport CommonOperationConfirmationDialog from '../../../components/dialog/common-operation-confirmation-dialog';\nimport UserLink from '../user-link';\nimport MainPanelTopbar from '../main-panel-topbar';\nimport InstitutionNav from './institution-nav';\n\nclass Content extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isItemFreezed: false\n    };\n  }\n\n  onFreezedItem = () => {\n    this.setState({isItemFreezed: true});\n  }\n\n  onUnfreezedItem = () => {\n    this.setState({isItemFreezed: false});\n  }\n\n  render() {\n    const { loading, errorMsg, items } = this.props;\n    if (loading) {\n      return <Loading />;\n    } else if (errorMsg) {\n      return <p className=\"error text-center mt-4\">{errorMsg}</p>;\n    } else {\n      const emptyTip = (\n        <EmptyTip>\n          <h2>{gettext('No admins')}</h2>\n        </EmptyTip>\n      );\n      const table = (\n        <Fragment>\n          <table>\n            <thead>\n              <tr>\n                <th width=\"25%\">{gettext('Name')}</th>\n                <th width=\"10%\">{gettext('Status')}</th>\n                <th width=\"20%\">{gettext('Space Used')}</th>\n                <th width=\"40%\">{gettext('Created At')}{' / '}{gettext('Last Login')}</th>\n                <th width=\"5%\">{/* Operations */}</th>\n              </tr>\n            </thead>\n            <tbody>\n              {items.map((item, index) => {\n                return (<Item\n                  key={index}\n                  item={item}\n                  isItemFreezed={this.state.isItemFreezed}\n                  onFreezedItem={this.onFreezedItem}\n                  onUnfreezedItem={this.onUnfreezedItem}\n                  revokeAdmin={this.props.revokeAdmin}\n                  deleteUser={this.props.deleteUser}\n                />);\n              })}\n            </tbody>\n          </table>\n        </Fragment>\n      );\n      return items.length ? table : emptyTip;\n    }\n  }\n}\n\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOpIconShown: false,\n      highlight: false,\n      isRevokeAdminDialogOpen: false,\n    };\n  }\n\n  handleMouseEnter = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        isOpIconShown: true,\n        highlight: true\n      });\n    }\n  }\n\n  handleMouseLeave = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        isOpIconShown: false,\n        highlight: false\n      });\n    }\n  }\n\n  onUnfreezedItem = () => {\n    this.setState({\n      highlight: false,\n      isOpIconShow: false\n    });\n    this.props.onUnfreezedItem();\n  }\n\n  toggleRevokeAdminDialog = (e) => {\n    if (e) {\n      e.preventDefault();\n    }\n    this.setState({isRevokeAdminDialogOpen: !this.state.isRevokeAdminDialogOpen});\n  }\n\n  revokeAdmin = () => {\n    this.props.revokeAdmin(this.props.item);\n  }\n\n  onMenuItemClick = (operation) => {\n    switch (operation) {\n      case 'Revoke Admin':\n        this.toggleRevokeAdminDialog();\n        break;\n    }\n  }\n\n  translateOperations = (item) => {\n    let translateResult = '';\n    switch(item) {\n      case 'Revoke Admin':\n        translateResult = gettext('Revoke Admin');\n        break;\n    }\n    return translateResult;\n  }\n\n  render() {\n    const { item } = this.props;\n    const { isOpIconShown, isRevokeAdminDialogOpen } = this.state;\n\n    const itemName = '<span class=\"op-target\">' + Utils.HTMLescape(item.name) + '</span>';\n    const revokeAdminDialogMsg = gettext('Are you sure you want to revoke the admin permission of {placeholder} ?').replace('{placeholder}', itemName);\n\n    return (\n      <Fragment>\n        <tr className={this.state.highlight ? 'tr-highlight' : ''} onMouseEnter={this.handleMouseEnter} onMouseLeave={this.handleMouseLeave}>\n          <td>\n            <UserLink email={item.email} name={item.name} />\n          </td>\n          <td>\n            {item.is_active ? gettext('Active') : gettext('Inactive')}\n          </td>\n          <td>{`${Utils.bytesToSize(item.quota_usage)} / ${item.quota_total > 0 ? Utils.bytesToSize(item.quota_total) : '--'}`}</td>\n          <td>\n            {moment(item.create_time).format('YYYY-MM-DD HH:mm:ss')}{' / '}{item.last_login ? moment(item.last_login).fromNow() : '--'}\n          </td>\n          <td>\n            {isOpIconShown &&\n            <OpMenu\n              operations={['Revoke Admin']}\n              translateOperations={this.translateOperations}\n              onMenuItemClick={this.onMenuItemClick}\n              onFreezedItem={this.props.onFreezedItem}\n              onUnfreezedItem={this.onUnfreezedItem}\n            />\n            }\n          </td>\n        </tr>\n        {isRevokeAdminDialogOpen &&\n          <CommonOperationConfirmationDialog\n            title={gettext('Revoke Admin')}\n            message={revokeAdminDialogMsg}\n            executeOperation={this.revokeAdmin}\n            confirmBtnText={gettext('Revoke')}\n            toggleDialog={this.toggleRevokeAdminDialog}\n          />\n        }\n      </Fragment>\n    );\n  }\n}\n\nclass InstitutionAdmins extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      institutionName: '',\n      userList: [],\n      isAddUserDialogOpen: false\n    };\n  }\n\n  componentDidMount () {\n    seafileAPI.sysAdminGetInstitution(this.props.institutionID).then((res) => {\n      this.setState({\n        institutionName: res.data.name\n      });\n    });\n    seafileAPI.sysAdminListInstitutionAdmins(this.props.institutionID).then((res) => {\n      this.setState({\n        loading: false,\n        userList: res.data.user_list,\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  revokeAdmin = (item) => {\n    const email = item.email;\n    const name = item.name;\n    seafileAPI.sysAdminUpdateInstitutionUser(this.props.institutionID, email, false).then(res => {\n      let userList = this.state.userList.filter(user => {\n        return user.email != email;\n      });\n      this.setState({userList: userList});\n      toaster.success(gettext('Successfully revoked the admin permission of {placeholder}.').replace('{placeholder}', name));\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  deleteUser = (email) => {\n    seafileAPI.sysAdminDeleteInstitutionUser(this.props.institutionID, email).then(res => {\n      let newUserList = this.state.userList.filter(user => {\n        return user.email != email;\n      });\n      this.setState({userList: newUserList});\n      toaster.success('success');\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  render() {\n    const { institutionName } = this.state;\n    return (\n      <Fragment>\n        <MainPanelTopbar />\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <InstitutionNav\n              currentItem=\"admins\"\n              institutionID={this.props.institutionID}\n              institutionName={institutionName}\n            />\n            <div className=\"cur-view-content\">\n              <Content\n                loading={this.state.loading}\n                errorMsg={this.state.errorMsg}\n                items={this.state.userList}\n                revokeAdmin={this.revokeAdmin}\n                deleteUser={this.deleteUser}\n              />\n            </div>\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nexport default InstitutionAdmins;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Link } from '@reach/router';\nimport { siteRoot, gettext } from '../../../utils/constants';\n\nconst propTypes = {\n  currentItem: PropTypes.string.isRequired\n};\n\nclass Nav extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.navItems = [\n      {name: 'loginLogs', urlPart:'logs/login', text: gettext('Login')},\n      {name: 'fileAccessLogs', urlPart:'logs/file-access', text: gettext('File Access')},\n      {name: 'fileUpdateLogs', urlPart:'logs/file-update', text: gettext('File Update')},\n      {name: 'sharePermissionLogs', urlPart:'logs/share-permission', text: gettext('Permission')},\n    ];\n  }\n\n  render() {\n    const { currentItem } = this.props;\n    return (\n      <div className=\"cur-view-path tab-nav-container\">\n        <ul className=\"nav\">\n          {this.navItems.map((item, index) => {\n            return (\n              <li className=\"nav-item\" key={index}>\n                <Link to={`${siteRoot}sys/${item.urlPart}/`} className={`nav-link${currentItem == item.name ? ' active' : ''}`}>{item.text}</Link>\n              </li>\n            );\n          })}\n        </ul>\n      </div>\n    );\n  }\n}\n\nNav.propTypes = propTypes;\n\nexport default Nav;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter, FormGroup, Label, Input, Alert } from 'reactstrap';\nimport { gettext, siteRoot } from '../../../utils/constants';\nimport moment from 'moment';\n\nclass LogsExportExcelDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      startDateStr: '',\n      endDateStr: '',\n      errMsg: '',\n    };\n    this.newInput = React.createRef();\n  }\n\n  componentDidMount() {\n    this.newInput.focus();\n  }\n\n  downloadExcel = () => {\n    if (!this.isValidDateStr()) {\n      return;\n    }\n    let { startDateStr, endDateStr } = this.state;\n    let url = siteRoot;\n\n    switch (this.props.logType) {\n      case 'login':\n        url += 'sys/loginadmin/export-excel/';\n        break;\n      case 'fileAccess':\n        url += 'sys/log/fileaudit/export-excel/';\n        break;\n      case 'fileUpdate':\n        url += 'sys/log/fileupdate/export-excel/';\n        break;\n      case 'sharePermission':\n        url += 'sys/log/permaudit/export-excel/';\n        break;\n    }\n    location.href = url + '?start=' + startDateStr + '&end=' + endDateStr;\n    this.props.toggle();\n  }\n\n  isValidDateStr = () => {\n    let { startDateStr, endDateStr } = this.state;\n    if (moment(startDateStr, 'YYYY-MM-DD', true).isValid() &&\n      moment(endDateStr, 'YYYY-MM-DD', true).isValid() &&\n      moment(startDateStr).isBefore(endDateStr)\n    ) {\n      return true;\n    } else {\n      this.setState({\n        errMsg: gettext('Date Invalid.')\n      });\n      return false;\n    }\n  }\n\n  handleStartChange = (e) => {\n    const startDateStr = e.target.value.trim();\n    this.setState({\n      startDateStr: startDateStr,\n      errMsg: ''\n    });\n  }\n\n  handleEndChange = (e) => {\n    const endDateStr = e.target.value.trim();\n    this.setState({\n      endDateStr: endDateStr,\n      errMsg: '',\n    });\n  }\n\n  render() {\n    return (\n      <Modal isOpen={true} toggle={this.props.toggle}>\n        <ModalHeader toggle={this.props.toggle}>{gettext('Choose date')}</ModalHeader>\n        <ModalBody>\n          <FormGroup>\n            <Label>{gettext('Start date')}</Label>\n            <Input\n              value={this.state.startDateStr}\n              onChange={this.handleStartChange}\n              placeholder='yyyy-mm-dd'\n              innerRef={input => {this.newInput = input;}}\n            />\n          </FormGroup>\n          <FormGroup>\n            <Label>{gettext('End date')}</Label>\n            <Input\n              value={this.state.endDateStr}\n              onChange={this.handleEndChange}\n              placeholder='yyyy-mm-dd'\n            />\n          </FormGroup>\n          {this.state.errMsg &&\n            <Alert className=\"mt-2\" color=\"danger\">\n              {gettext(this.state.errMsg)}\n            </Alert>\n          }\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.props.toggle}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.downloadExcel}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nconst propTypes = {\n  toggle: PropTypes.func.isRequired,\n  logType: PropTypes.string.isRequired,\n};\n\nLogsExportExcelDialog.propTypes = propTypes;\n\nexport default LogsExportExcelDialog;\n","import React, { Component, Fragment } from 'react';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { gettext, siteRoot } from '../../../utils/constants';\nimport { Utils } from '../../../utils/utils';\nimport { Button } from 'reactstrap';\nimport EmptyTip from '../../../components/empty-tip';\nimport moment from 'moment';\nimport Loading from '../../../components/loading';\nimport Paginator from '../../../components/paginator';\nimport LogsNav from './logs-nav';\nimport MainPanelTopbar from '../main-panel-topbar';\nimport UserLink from '../user-link';\nimport LogsExportExcelDialog from '../../../components/dialog/sysadmin-dialog/sysadmin-logs-export-excel-dialog';\nimport ModalPortal from '../../../components/modal-portal';\n\n\nclass Content extends Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  getPreviousPage = () => {\n    this.props.getLogsByPage(this.props.currentPage - 1);\n  }\n\n  getNextPage = () => {\n    this.props.getLogsByPage(this.props.currentPage + 1);\n  }\n\n  render() {\n    const { loading, errorMsg, items, perPage, currentPage, hasNextPage } = this.props;\n    if (loading) {\n      return <Loading />;\n    } else if (errorMsg) {\n      return <p className=\"error text-center\">{errorMsg}</p>;\n    } else {\n      const emptyTip = (\n        <EmptyTip>\n          <h2>{gettext('No login logs')}</h2>\n        </EmptyTip>\n      );\n      const table = (\n        <Fragment>\n          <table className=\"table-hover\">\n            <thead>\n              <tr>\n                <th width=\"25%\">{gettext('Name')}</th>\n                <th width=\"25%\">{gettext('IP')}</th>\n                <th width=\"25%\">{gettext('Status')}</th>\n                <th width=\"25%\">{gettext('Time')}</th>\n              </tr>\n            </thead>\n            {items &&\n              <tbody>\n                {items.map((item, index) => {\n                  return (<Item\n                    key={index}\n                    item={item}\n                  />);\n                })}\n              </tbody>\n            }\n          </table>\n          <Paginator\n            gotoPreviousPage={this.getPreviousPage}\n            gotoNextPage={this.getNextPage}\n            currentPage={currentPage}\n            hasNextPage={hasNextPage}\n            curPerPage={perPage}\n            resetPerPage={this.props.resetPerPage}\n          />\n        </Fragment>\n      );\n      return items.length ? table : emptyTip;\n    }\n  }\n}\n\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOpIconShown: false,\n    };\n  }\n\n  handleMouseOver = () => {\n    this.setState({\n      isOpIconShown: true\n    });\n  }\n\n  handleMouseOut = () => {\n    this.setState({\n      isOpIconShown: false\n    });\n  }\n\n  render() {\n    let { item } = this.props;\n    return (\n      <tr onMouseOver={this.handleMouseOver} onMouseOut={this.handleMouseOut}>\n        <td><UserLink email={item.email} name={item.name} /></td>\n        <td>{item.login_ip}</td>\n        <td>{item.log_success ? gettext('Success') : gettext('Failed')}</td>\n        <td>{moment(item.login_time).fromNow()}</td>\n      </tr>\n    );\n  }\n}\n\nclass LoginLogs extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      logList: [],\n      perPage: 25,\n      currentPage: 1,\n      hasNextPage: false,\n      isExportExcelDialogOpen: false,\n    };\n    this.initPage = 1;\n  }\n\n  toggleExportExcelDialog = () => {\n    this.setState({isExportExcelDialogOpen: !this.state.isExportExcelDialogOpen});\n  }\n\n  componentDidMount () {\n    let urlParams = (new URL(window.location)).searchParams;\n    const { currentPage, perPage } = this.state;\n    this.setState({\n      perPage: parseInt(urlParams.get('per_page') || perPage),\n      currentPage: parseInt(urlParams.get('page') || currentPage)\n    }, () => {\n      this.getLogsByPage(this.state.currentPage);\n    });\n  }\n\n  getLogsByPage = (page) => {\n    let { perPage } = this.state;\n    seafileAPI.sysAdminListLoginLogs(page, perPage).then((res) => {\n      this.setState({\n        logList: res.data.login_log_list,\n        loading: false,\n        currentPage: page,\n        hasNextPage: Utils.hasNextPage(page, perPage, res.data.total_count),\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  resetPerPage = (newPerPage) => {\n    this.setState({\n      perPage: newPerPage,\n    }, () => this.getLogsByPage(this.initPage));\n  }\n\n  render() {\n    let { logList, currentPage, perPage, hasNextPage, isExportExcelDialogOpen } = this.state;\n    return (\n      <Fragment>\n        <MainPanelTopbar>\n          <Button className=\"btn btn-secondary operation-item\" onClick={this.toggleExportExcelDialog}>{gettext('Export Excel')}</Button>\n        </MainPanelTopbar>\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <LogsNav currentItem=\"loginLogs\" />\n            <div className=\"cur-view-content\">\n              <Content\n                loading={this.state.loading}\n                errorMsg={this.state.errorMsg}\n                items={logList}\n                currentPage={currentPage}\n                perPage={perPage}\n                hasNextPage={hasNextPage}\n                getLogsByPage={this.getLogsByPage}\n                resetPerPage={this.resetPerPage}\n              />\n            </div>\n          </div>\n        </div>\n        {isExportExcelDialogOpen &&\n        <ModalPortal>\n          <LogsExportExcelDialog\n            logType={'login'}\n            toggle={this.toggleExportExcelDialog}\n          />\n        </ModalPortal>\n        }\n      </Fragment>\n    );\n  }\n}\n\nexport default LoginLogs;\n","import React from 'react';\nimport { gettext } from '../../../utils/constants';\nimport { Dropdown, DropdownMenu, DropdownToggle, DropdownItem } from 'reactstrap';\n\nclass FilterMenu extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = { \n      isMenuShown: false\n    };  \n  }\n\n  toggleMenu = () => {\n    this.setState({\n      isMenuShown: !this.state.isMenuShown\n    }, () => {\n      this.props.toggleFreezeItem(this.state.isMenuShown);\n    });\n  }\n\n  onItemClick = () => {\n    this.props.filterItems();\n    this.props.toggleFreezeItem(false);\n  }\n\n  render() {\n    const { filterBy } = this.props;\n    return (\n      <Dropdown isOpen={this.state.isMenuShown} toggle={this.toggleMenu}>\n        <DropdownToggle\n          tag=\"i\"\n          className=\"sf-dropdown-toggle sf2-icon-caret-down\"\n          title={gettext('More Operations')}\n          data-toggle=\"dropdown\"\n          aria-expanded={this.state.isMenuShown}\n        />\n        <DropdownMenu>\n          <DropdownItem onClick={this.onItemClick}>{gettext('only show {placeholder}').replace('{placeholder}', filterBy)}</DropdownItem>\n        </DropdownMenu>\n      </Dropdown>\n    );\n  }\n}\n\nexport default FilterMenu;\n","import React from 'react';\nimport { Button } from 'reactstrap';\n\nclass ToggleFilter extends React.Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    const { filterBy } = this.props;\n    return (\n      <Button\n        color='secondary'\n        className=\"my-2 mr-2\"\n        onClick={this.props.toggleFilter}\n      >   \n        <span className=\"text-primary\">{filterBy}</span>\n        <span className=\"ml-2 close\" style={{fontSize: '1.2rem'}}>x</span>\n      </Button>\n    );\n\n  }\n\n}\n\nexport default ToggleFilter;\n","import React, { Component, Fragment } from 'react';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { gettext } from '../../../utils/constants';\nimport { Utils } from '../../../utils/utils';\nimport EmptyTip from '../../../components/empty-tip';\nimport { Button } from 'reactstrap';\nimport { navigate } from '@reach/router';\nimport moment from 'moment';\nimport Loading from '../../../components/loading';\nimport Paginator from '../../../components/paginator';\nimport LogsExportExcelDialog from '../../../components/dialog/sysadmin-dialog/sysadmin-logs-export-excel-dialog';\nimport ModalPortal from '../../../components/modal-portal';\nimport LogsNav from './logs-nav';\nimport FilterMenu from './file-access-item-menu';\nimport ToggleFilter from './file-access-toggle-filter';\nimport MainPanelTopbar from '../main-panel-topbar';\nimport UserLink from '../user-link';\n\n\nclass Content extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isItemFreezed: false\n    };\n  }\n\n  getPreviousPage = () => {\n    this.props.getLogsByPage(this.props.currentPage - 1);\n  }\n\n  getNextPage = () => {\n    this.props.getLogsByPage(this.props.currentPage + 1);\n  }\n\n  toggleFilterByUser = () => {\n    this.props.filterByUser(null);\n  }\n\n  toggleFilterByRepo = () => {\n    this.props.filterByRepo(null);\n  }\n\n  toggleFreezeItem = (freezed) => {\n    this.setState({\n      isItemFreezed: freezed\n    });\n  }\n\n  render() {\n    const {\n      loading, errorMsg, items, \n      userFilteredBy, repoFilteredBy,\n      perPage, currentPage, hasNextPage\n    } = this.props;\n    if (loading) {\n      return <Loading />;\n    } else if (errorMsg) {\n      return <p className=\"error text-center\">{errorMsg}</p>;\n    } else {\n      const emptyTip = (\n        <EmptyTip>\n          <h2>{gettext('No file access logs')}</h2>\n        </EmptyTip>\n      );\n      const table = (\n        <Fragment>\n          <div>\n            {userFilteredBy && (\n              <ToggleFilter\n                filterBy={items[0].name}\n                toggleFilter={this.toggleFilterByUser}\n              />\n            )}\n            {repoFilteredBy && (\n              <ToggleFilter\n                filterBy={items[0].repo_name}\n                toggleFilter={this.toggleFilterByRepo}\n              />\n            )}\n          </div>\n          <table>\n            <thead>\n              <tr>\n                <th width=\"20%\">{gettext('Name')}</th>\n                <th width=\"10%\">{gettext('Type')}</th>\n                <th width=\"20%\">{gettext('IP')}{' / '}{gettext('Device')}</th>\n                <th width=\"20%\">{gettext('Date')}</th>\n                <th width=\"15%\">{gettext('Library')}</th>\n                <th width=\"15%\">{gettext('File')}{' / '}{gettext('Folder')}</th>\n              </tr>\n            </thead>\n            {items &&\n              <tbody>\n                {items.map((item, index) => {\n                  return (<Item\n                    key={index}\n                    item={item}\n                    isFreezed={this.state.isItemFreezed}\n                    toggleFreezeItem={this.toggleFreezeItem}\n                    userFilteredBy={userFilteredBy}\n                    repoFilteredBy={repoFilteredBy}\n                    filterByUser={this.props.filterByUser}\n                    filterByRepo={this.props.filterByRepo}\n                  />);\n                })}\n              </tbody>\n            }\n          </table>\n          <Paginator\n            gotoPreviousPage={this.getPreviousPage}\n            gotoNextPage={this.getNextPage}\n            currentPage={currentPage}\n            hasNextPage={hasNextPage}\n            curPerPage={perPage}\n            resetPerPage={this.props.resetPerPage}\n          />\n        </Fragment>\n      );\n      return items.length ? table : emptyTip;\n    }\n  }\n}\n\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isHighlighted: false,\n      isOpIconShown: false\n    };\n  }\n\n  handleMouseEnter = () => {\n    if (!this.props.isFreezed) {\n      this.setState({\n        isHighlighted: true,\n        isOpIconShown: true\n      });\n    }\n  }\n\n  handleMouseLeave = () => {\n    if (!this.props.isFreezed) {\n      this.setState({\n        isHighlighted: false,\n        isOpIconShown: false\n      });\n    }\n  }\n\n  filterByUser = () => {\n    const { item } = this.props;\n    this.props.filterByUser(item.email);\n  }\n\n  filterByRepo = () => {\n    const { item } = this.props;\n    this.props.filterByRepo(item.repo_id);\n  }\n\n  toggleFreezeItem = (freezed) => {\n    this.props.toggleFreezeItem(freezed);\n    if (!freezed) {\n      this.setState({\n        isHighlighted: false,\n        isOpIconShown: false\n      });\n    }\n  }\n\n  render() {\n    const { isHighlighted, isOpIconShown } = this.state;\n    const { item, userFilteredBy, repoFilteredBy } = this.props;\n    return (\n      <tr className={isHighlighted ? 'tr-highlight' : ''} onMouseEnter={this.handleMouseEnter} onMouseLeave={this.handleMouseLeave}>\n        <td>\n          <UserLink email={item.email} name={item.name} />\n          {isOpIconShown && !userFilteredBy && (\n            <FilterMenu\n              filterBy={item.name}\n              filterItems={this.filterByUser}\n              toggleFreezeItem={this.toggleFreezeItem}\n            />\n          )}\n        </td>\n        <td>{item.event_type}</td>\n        <td>{item.ip}{' / '}{item.device || '--'}</td>\n        <td>{moment(item.time).fromNow()}</td>\n        <td>\n          {item.repo_name ? item.repo_name : gettext('Deleted')}\n          {isOpIconShown && item.repo_name && !repoFilteredBy && (\n            <FilterMenu\n              filterBy={item.repo_name}\n              filterItems={this.filterByRepo}\n              toggleFreezeItem={this.toggleFreezeItem}\n            />\n          )}\n        </td>\n        <td>{item.file_or_dir_name}</td>\n      </tr>\n    );\n  }\n}\n\nclass FileAccessLogs extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      logList: [],\n      perPage: 25,\n      currentPage: 1,\n      hasNextPage: false,\n      isExportExcelDialogOpen: false,\n    };\n    this.initPage = 1;\n  }\n\n  toggleExportExcelDialog = () => {\n    this.setState({isExportExcelDialogOpen: !this.state.isExportExcelDialogOpen});\n  }\n\n  componentDidMount () {\n    let urlParams = (new URL(window.location)).searchParams;\n    const { currentPage, perPage } = this.state;\n    this.setState({\n      perPage: parseInt(urlParams.get('per_page') || perPage),\n      currentPage: parseInt(urlParams.get('page') || currentPage),\n      userFilteredBy: urlParams.get('email'),\n      repoFilteredBy: urlParams.get('repo_id')\n    }, () => {\n      this.getLogsByPage(this.state.currentPage);\n    });\n  }\n\n  getLogsByPage = (page) => {\n    const { perPage, userFilteredBy, repoFilteredBy } = this.state;\n    seafileAPI.sysAdminListFileAccessLogs(page, perPage, userFilteredBy, repoFilteredBy).then((res) => {\n      this.setState({\n        logList: res.data.file_access_log_list,\n        loading: false,\n        currentPage: page,\n        hasNextPage: res.data.has_next_page,\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  resetPerPage = (newPerPage) => {\n    this.setState({\n      perPage: newPerPage,\n    }, () => this.getLogsByPage(this.initPage));\n  }\n\n  updateURL = (obj) => {\n    let url = new URL(location.href);\n    let searchParams = new URLSearchParams(url.search);\n    for (let key in obj) {\n      obj[key] == null ? \n        searchParams.delete(key) :\n        searchParams.set(key, obj[key]);\n    }\n    url.search = searchParams.toString();\n    navigate(url.toString());\n  }\n\n  filterByUser = (email) => {\n    this.setState({\n      userFilteredBy: email \n    }, () => {\n      this.getLogsByPage(this.initPage);\n      this.updateURL({'email': email});\n    });\n  }\n\n  filterByRepo = (repoID) => {\n    this.setState({\n      repoFilteredBy: repoID \n    }, () => {\n      this.getLogsByPage(this.initPage);\n      this.updateURL({'repo_id': repoID});\n    });\n  } \n\n  render() {\n    const {\n      logList,\n      userFilteredBy, repoFilteredBy, \n      currentPage, perPage, hasNextPage,\n      isExportExcelDialogOpen\n    } = this.state;\n    return (\n      <Fragment>\n        <MainPanelTopbar>\n          <Button className=\"btn btn-secondary operation-item\" onClick={this.toggleExportExcelDialog}>{gettext('Export Excel')}</Button>\n        </MainPanelTopbar>\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <LogsNav currentItem=\"fileAccessLogs\" />\n            <div className=\"cur-view-content\">\n              <Content\n                loading={this.state.loading}\n                errorMsg={this.state.errorMsg}\n                items={logList}\n                userFilteredBy={userFilteredBy}\n                repoFilteredBy={repoFilteredBy}\n                filterByUser={this.filterByUser}\n                filterByRepo={this.filterByRepo}\n                currentPage={currentPage}\n                perPage={perPage}\n                hasNextPage={hasNextPage}\n                getLogsByPage={this.getLogsByPage}\n                resetPerPage={this.resetPerPage}\n              />\n            </div>\n          </div>\n        </div>\n        {isExportExcelDialogOpen &&\n        <ModalPortal>\n          <LogsExportExcelDialog\n            logType={'fileAccess'}\n            toggle={this.toggleExportExcelDialog}\n          />\n        </ModalPortal>\n        }\n      </Fragment>\n    );\n  }\n}\n\nexport default FileAccessLogs;\n","import React, { Component, Fragment } from 'react';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { gettext, siteRoot } from '../../../utils/constants';\nimport { Utils } from '../../../utils/utils';\nimport EmptyTip from '../../../components/empty-tip';\nimport moment from 'moment';\nimport Loading from '../../../components/loading';\nimport Paginator from '../../../components/paginator';\nimport LogsNav from './logs-nav';\nimport { Button } from 'reactstrap';\nimport MainPanelTopbar from '../main-panel-topbar';\nimport UserLink from '../user-link';\nimport ModalPortal from '../../../components/modal-portal';\nimport CommitDetails from '../../../components/dialog/commit-details';\nimport LogsExportExcelDialog from '../../../components/dialog/sysadmin-dialog/sysadmin-logs-export-excel-dialog';\n\nclass Content extends Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  getPreviousPage = () => {\n    this.props.getLogsByPage(this.props.currentPage - 1);\n  }\n\n  getNextPage = () => {\n    this.props.getLogsByPage(this.props.currentPage + 1);\n  }\n\n  render() {\n    const { loading, errorMsg, items, perPage, currentPage, hasNextPage } = this.props;\n    if (loading) {\n      return <Loading />;\n    } else if (errorMsg) {\n      return <p className=\"error text-center\">{errorMsg}</p>;\n    } else {\n      const emptyTip = (\n        <EmptyTip>\n          <h2>{gettext('No file update logs')}</h2>\n        </EmptyTip>\n      );\n      const table = (\n        <Fragment>\n          <table className=\"table-hover\">\n            <thead>\n              <tr>\n                <th width=\"25%\">{gettext('Name')}</th>\n                <th width=\"25%\">{gettext('Date')}</th>\n                <th width=\"25%\">{gettext('Library')}</th>\n                <th width=\"25%\">{gettext('Action')}</th>\n              </tr>\n            </thead>\n            {items &&\n              <tbody>\n                {items.map((item, index) => {\n                  return (<Item\n                    key={index}\n                    item={item}\n                  />);\n                })}\n              </tbody>\n            }\n          </table>\n          <Paginator\n            gotoPreviousPage={this.getPreviousPage}\n            gotoNextPage={this.getNextPage}\n            currentPage={currentPage}\n            hasNextPage={hasNextPage}\n            curPerPage={perPage}\n            resetPerPage={this.props.resetPerPage}\n          />\n        </Fragment>\n      );\n      return items.length ? table : emptyTip;\n    }\n  }\n}\n\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOpIconShown: false,\n      isCommitDetailsDialogOpen: false,\n    };\n  }\n\n  handleMouseOver = () => {\n    this.setState({\n      isOpIconShown: true\n    });\n  }\n\n  handleMouseOut = () => {\n    this.setState({\n      isOpIconShown: false\n    });\n  }\n\n\n  toggleCommitDetailsDialog = () => {\n    this.setState({\n      isCommitDetailsDialogOpen: !this.state.isCommitDetailsDialogOpen\n    });\n  }\n\n  showCommitDetails = (e) => {\n    e.preventDefault();\n    this.setState({\n      isCommitDetailsDialogOpen: !this.state.isCommitDetailsDialogOpen\n    });\n  }\n\n  render() {\n    let { item } = this.props;\n    return (\n      <Fragment>\n        <tr onMouseOver={this.handleMouseOver} onMouseOut={this.handleMouseOut}>\n          <td><UserLink email={item.email} name={item.name} /></td>\n          <td>{moment(item.time).fromNow()}</td>\n          <td>{item.repo_name ? item.repo_name : gettext('Deleted')}</td>\n          <td>\n            {item.file_operation}\n            {item.repo_name && !item.repo_encrypted &&\n              <a className=\"ml-1\" href=\"#\" onClick={this.showCommitDetails}>{gettext('Details')}</a>\n            }\n          </td>\n        </tr>\n        {this.state.isCommitDetailsDialogOpen &&\n          <ModalPortal>\n            <CommitDetails\n              repoID={item.repo_id}\n              commitID={item.commit_id}\n              commitTime={item.time}\n              toggleDialog={this.toggleCommitDetailsDialog}\n            />\n          </ModalPortal>\n        }\n      </Fragment>\n    );\n  }\n}\n\nclass FileUpdateLogs extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      logList: [],\n      perPage: 25,\n      currentPage: 1,\n      hasNextPage: false,\n      isExportExcelDialogOpen: false,\n    };\n    this.initPage = 1;\n  }\n\n  toggleExportExcelDialog = () => {\n    this.setState({isExportExcelDialogOpen: !this.state.isExportExcelDialogOpen});\n  }\n\n  componentDidMount () {\n    let urlParams = (new URL(window.location)).searchParams;\n    const { currentPage, perPage } = this.state;\n    this.setState({\n      perPage: parseInt(urlParams.get('per_page') || perPage),\n      currentPage: parseInt(urlParams.get('page') || currentPage)\n    }, () => {\n      this.getLogsByPage(this.state.currentPage);\n    });\n  }\n\n  getLogsByPage = (page) => {\n    let { perPage } = this.state;\n    seafileAPI.sysAdminListFileUpdateLogs(page, perPage).then((res) => {\n      this.setState({\n        logList: res.data.file_update_log_list,\n        loading: false,\n        currentPage: page,\n        hasNextPage: res.data.has_next_page,\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  resetPerPage = (newPerPage) => {\n    this.setState({\n      perPage: newPerPage,\n    }, () => this.getLogsByPage(this.initPage));\n  }\n\n  render() {\n    let { logList, currentPage, perPage, hasNextPage, isExportExcelDialogOpen } = this.state;\n    return (\n      <Fragment>\n        <MainPanelTopbar>\n          <Button className=\"btn btn-secondary operation-item\" onClick={this.toggleExportExcelDialog}>{gettext('Export Excel')}</Button>\n        </MainPanelTopbar>\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <LogsNav currentItem=\"fileUpdateLogs\" />\n            <div className=\"cur-view-content\">\n              <Content\n                loading={this.state.loading}\n                errorMsg={this.state.errorMsg}\n                items={logList}\n                currentPage={currentPage}\n                perPage={perPage}\n                hasNextPage={hasNextPage}\n                getLogsByPage={this.getLogsByPage}\n                resetPerPage={this.resetPerPage}\n              />\n            </div>\n          </div>\n        </div>\n        {isExportExcelDialogOpen &&\n        <ModalPortal>\n          <LogsExportExcelDialog\n            logType={'fileUpdate'}\n            toggle={this.toggleExportExcelDialog}\n          />\n        </ModalPortal>\n        }\n      </Fragment>\n    );\n  }\n}\n\nexport default FileUpdateLogs;\n","import React, { Component, Fragment } from 'react';\nimport { Link } from '@reach/router';\nimport moment from 'moment';\nimport { Button } from 'reactstrap';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { gettext, siteRoot } from '../../../utils/constants';\nimport { Utils } from '../../../utils/utils';\nimport LogsExportExcelDialog from '../../../components/dialog/sysadmin-dialog/sysadmin-logs-export-excel-dialog';\nimport ModalPortal from '../../../components/modal-portal';\nimport EmptyTip from '../../../components/empty-tip';\nimport Loading from '../../../components/loading';\nimport Paginator from '../../../components/paginator';\nimport MainPanelTopbar from '../main-panel-topbar';\nimport UserLink from '../user-link';\nimport LogsNav from './logs-nav';\n\nclass Content extends Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  getPreviousPage = () => {\n    this.props.getLogsByPage(this.props.currentPage - 1);\n  }\n\n  getNextPage = () => {\n    this.props.getLogsByPage(this.props.currentPage + 1);\n  }\n\n  render() {\n    const { loading, errorMsg, items, perPage, currentPage, hasNextPage } = this.props;\n    if (loading) {\n      return <Loading />;\n    } else if (errorMsg) {\n      return <p className=\"error text-center\">{errorMsg}</p>;\n    } else {\n      const emptyTip = (\n        <EmptyTip>\n          <h2>{gettext('No permission logs')}</h2>\n        </EmptyTip>\n      );\n      const table = (\n        <Fragment>\n          <table className=\"table-hover\">\n            <thead>\n              <tr>\n                <th width=\"15%\">{gettext('Share From')}</th>\n                <th width=\"15%\">{gettext('Share To')}</th>\n                <th width=\"10%\">{gettext('Actions')}</th>\n                <th width=\"13%\">{gettext('Permission')}</th>\n                <th width=\"20%\">{gettext('Library')}</th>\n                <th width=\"12%\">{gettext('Folder')}</th>\n                <th width=\"15%\">{gettext('Date')}</th>\n              </tr>\n            </thead>\n            {items &&\n              <tbody>\n                {items.map((item, index) => {\n                  return (<Item\n                    key={index}\n                    item={item}\n                  />);\n                })}\n              </tbody>\n            }\n          </table>\n          <Paginator\n            gotoPreviousPage={this.getPreviousPage}\n            gotoNextPage={this.getNextPage}\n            currentPage={currentPage}\n            hasNextPage={hasNextPage}\n            curPerPage={perPage}\n            resetPerPage={this.props.resetPerPage}\n          />\n        </Fragment>\n      );\n      return items.length ? table : emptyTip;\n    }\n  }\n}\n\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOpIconShown: false,\n    };\n  }\n\n  handleMouseOver = () => {\n    this.setState({\n      isOpIconShown: true\n    });\n  }\n\n  handleMouseOut = () => {\n    this.setState({\n      isOpIconShown: false\n    });\n  }\n\n  getActionTextByEType = (etype) => {\n    if (etype.indexOf('add') != -1) {\n      return gettext('Add');\n    } else if (etype.indexOf('modify') != -1) {\n      return gettext('Modify');\n    } else if (etype.indexOf('delete') != -1) {\n      return gettext('Delete');\n    } else {\n      return '';\n    }\n  }\n\n  getShareTo = (item) => {\n    switch(item.share_type) {\n      case 'user':\n        return <UserLink email={item.to_user_email} name={item.to_user_name} />;\n      case 'group':\n        return <Link to={`${siteRoot}sys/groups/${item.to_group_id}/libraries/`}>{item.to_group_name}</Link>;\n      case 'department':\n        return <Link to={`${siteRoot}sys/departments/${item.to_group_id}/`}>{item.to_group_name}</Link>;\n      case 'all':\n        return <Link to={`${siteRoot}org/`}>{gettext('All')}</Link>;\n      default:\n        return gettext('Deleted');\n    }\n  }\n\n  render() {\n    let { item } = this.props;\n    return (\n      <tr onMouseOver={this.handleMouseOver} onMouseOut={this.handleMouseOut}>\n        <td><UserLink email={item.from_user_email} name={item.from_user_name} /></td>\n        <td>{this.getShareTo(item)}</td>\n        <td>{this.getActionTextByEType(item.etype)}</td>\n        <td>{Utils.sharePerms(item.permission)}</td>\n        <td>{item.repo_name ? item.repo_name : gettext('Deleted')}</td>\n        <td>{item.folder}</td>\n        <td>{moment(item.date).fromNow()}</td>\n      </tr>\n    );\n  }\n}\n\nclass SharePermissionLogs extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      logList: [],\n      perPage: 25,\n      currentPage: 1,\n      hasNextPage: false,\n      isExportExcelDialogOpen: false,\n    };\n    this.initPage = 1;\n  }\n\n  toggleExportExcelDialog = () => {\n    this.setState({isExportExcelDialogOpen: !this.state.isExportExcelDialogOpen});\n  }\n\n  componentDidMount () {\n    let urlParams = (new URL(window.location)).searchParams;\n    const { currentPage, perPage } = this.state;\n    this.setState({\n      perPage: parseInt(urlParams.get('per_page') || perPage),\n      currentPage: parseInt(urlParams.get('page') || currentPage)\n    }, () => {\n      this.getLogsByPage(this.state.currentPage);\n    });\n  }\n\n  getLogsByPage = (page) => {\n    let { perPage } = this.state;\n    seafileAPI.sysAdminListSharePermissionLogs(page, perPage).then((res) => {\n      this.setState({\n        logList: res.data.share_permission_log_list,\n        loading: false,\n        currentPage: page,\n        hasNextPage: res.data.has_next_page,\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  resetPerPage = (newPerPage) => {\n    this.setState({\n      perPage: newPerPage,\n    }, () => this.getLogsByPage(this.initPage));\n  }\n\n  render() {\n    let { logList, currentPage, perPage, hasNextPage, isExportExcelDialogOpen } = this.state;\n    return (\n      <Fragment>\n        <MainPanelTopbar>\n          <Button className=\"btn btn-secondary operation-item\" onClick={this.toggleExportExcelDialog}>{gettext('Export Excel')}</Button>\n        </MainPanelTopbar>\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <LogsNav currentItem=\"sharePermissionLogs\" />\n            <div className=\"cur-view-content\">\n              <Content\n                loading={this.state.loading}\n                errorMsg={this.state.errorMsg}\n                items={logList}\n                currentPage={currentPage}\n                perPage={perPage}\n                hasNextPage={hasNextPage}\n                getLogsByPage={this.getLogsByPage}\n                resetPerPage={this.resetPerPage}\n              />\n            </div>\n          </div>\n        </div>\n        {isExportExcelDialogOpen &&\n        <ModalPortal>\n          <LogsExportExcelDialog\n            logType={'sharePermission'}\n            toggle={this.toggleExportExcelDialog}\n          />\n        </ModalPortal>\n        }\n      </Fragment>\n    );\n  }\n}\n\nexport default SharePermissionLogs;\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\n\nconst propTypes = {\n  headingText: PropTypes.string.isRequired,\n  children: PropTypes.object.isRequired\n};\n\nclass Section extends Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    const { headingText, children} = this.props;\n    return (\n      <div className=\"mb-4\">\n        <h4 className=\"border-bottom font-weight-normal mb-2 pb-1\">{headingText}</h4>\n        {children}\n      </div>\n    );\n  }\n}\n\nSection.propTypes = propTypes;\n\nexport default Section;\n","import React, { Component, Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Row, Col, Label } from 'reactstrap';\n\nconst propTypes = {\n  displayName: PropTypes.string.isRequired,\n  helpTip: PropTypes.string,\n  mainContent: PropTypes.object.isRequired,\n  extraContent: PropTypes.object\n};\n\nclass SettingItemBase extends Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    const { helpTip, displayName, mainContent, extraContent } = this.props;\n    return (\n      <Fragment>\n        <Row className=\"my-4\">\n          <Col md=\"3\">\n            <Label className=\"web-setting-label\">{displayName}</Label>\n          </Col>\n          <Col md=\"5\">\n            {mainContent}\n            {helpTip && <p className=\"small text-secondary mt-1\">{helpTip}</p>}\n          </Col>\n          <Col md=\"4\">\n            {extraContent}\n          </Col>\n        </Row>\n      </Fragment>\n    );\n  }\n}\n\nSettingItemBase.propTypes = propTypes;\n\nexport default SettingItemBase;\n","import React, { Component, Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Input, Button } from 'reactstrap';\nimport { gettext } from '../../../utils/constants';\nimport SettingItemBase from './setting-item-base';\n\nconst propTypes = {\n  inputType: PropTypes.string,\n  saveSetting: PropTypes.func.isRequired,\n  keyText: PropTypes.string.isRequired,\n  value: PropTypes.oneOfType([PropTypes.string,PropTypes.number]),\n  helpTip: PropTypes.string.isRequired,\n  displayName: PropTypes.string.isRequired\n};\n\nclass WebSettingInput extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isBtnsShown: false,\n      value: this.props.value\n    };\n  }\n\n  toggleBtns = () => {\n    this.setState({isBtnsShown: !this.state.isBtnsShown});\n  }\n\n  hideBtns = (e) => {\n    if (!this.state.isBtnsShown) {\n      return;\n    }\n    if (this.props.value != this.state.value) {\n      this.setState({value: this.props.value});\n    }\n    this.toggleBtns();\n  }\n\n  onInputChange = (e) => {\n    this.setState({ value: e.target.value });\n  }\n\n  onSubmit = (e) => {\n    const value = this.state.value.trim();\n    if (value != this.props.value) {\n      this.props.saveSetting(this.props.keyText, value);\n    }\n    this.toggleBtns();\n  }\n\n  render() {\n    const { isBtnsShown, value } = this.state;\n    const { helpTip, displayName, inputType } = this.props;\n    return (\n      <SettingItemBase\n        displayName={displayName}\n        helpTip={helpTip}\n        mainContent={\n          <Input type={inputType || 'text'} className={inputType == 'textarea' ? 'web-setting-textarea' : ''} onChange={this.onInputChange} onFocus={this.toggleBtns} onBlur={this.hideBtns} value={value} />\n        }\n        extraContent={\n          isBtnsShown ?\n            <Fragment>\n              <Button className=\"sf2-icon-tick web-setting-icon-btn web-setting-icon-btn-submit\" onMouseDown={this.onSubmit} title={gettext('Submit')}></Button>\n              <Button className=\"ml-1 sf2-icon-x2 web-setting-icon-btn web-setting-icon-btn-cancel\" title={gettext('Cancel')}></Button>\n            </Fragment> : null\n        }\n      />\n    );\n  }\n}\n\nWebSettingInput.propTypes = propTypes;\n\nexport default WebSettingInput;\n","import React, { Component, Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Button } from 'reactstrap';\nimport { gettext } from '../../../utils/constants';\nimport SettingItemBase from './setting-item-base';\n\nconst propTypes = {\n  postFile: PropTypes.func.isRequired,\n  keyText: PropTypes.string.isRequired,\n  filePath: PropTypes.string.isRequired,\n  helpTip: PropTypes.string.isRequired,\n  fileWidth: PropTypes.number.isRequired,\n  fileHeight: PropTypes.number.isRequired,\n  displayName: PropTypes.string.isRequired\n};\n\nclass WebSettingFile extends Component {\n\n  constructor(props) {\n    super(props);\n    this.fileInput = React.createRef();\n  }\n\n  uploadFile = () => {\n    if (!this.fileInput.current.files.length) {\n      return;\n    }\n    const file = this.fileInput.current.files[0];\n    this.props.postFile(file, this.props.keyText);\n  }\n\n  openFileInput = () => {\n    this.fileInput.current.click();\n  }\n\n  render() {\n    const { helpTip, filePath, fileWidth, fileHeight, displayName } = this.props;\n    return (\n      <SettingItemBase\n        displayName={displayName}\n        helpTip={helpTip}\n        mainContent={\n          <img src={filePath + '?t=' + new Date().getTime()} alt={displayName} width={fileWidth} height={fileHeight} className=\"mb-1\" />\n        }\n        extraContent={\n          <Fragment>\n            <Button color=\"secondary\" onClick={this.openFileInput}>{gettext('Change')}</Button>\n            <input className=\"d-none\" type=\"file\" onChange={this.uploadFile} ref={this.fileInput} />\n          </Fragment>\n        }\n      />\n    );\n  }\n}\n\nWebSettingFile.propTypes = propTypes;\n\nexport default WebSettingFile;\n","import React, { Component, Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Input } from 'reactstrap';\nimport SettingItemBase from './setting-item-base';\n\nconst propTypes = {\n  saveSetting: PropTypes.func.isRequired,\n  keyText: PropTypes.string.isRequired,\n  value: PropTypes.oneOfType([PropTypes.bool, PropTypes.number]),\n  helpTip: PropTypes.string.isRequired,\n  displayName: PropTypes.string.isRequired\n};\n\nclass WebSettingCheckbox extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      inputChecked: this.props.value\n    };\n  }\n\n  onInputChange = (e) => {\n    const checked = e.target.checked;\n    const valueToNum = checked ? 1 : 0;\n    this.setState({\n      inputChecked: checked\n    });\n    this.props.saveSetting(this.props.keyText, valueToNum);\n  }\n\n  render() {\n    const { inputChecked } = this.state;\n    const { helpTip, displayName } = this.props;\n    return (\n      <SettingItemBase\n        displayName={displayName}\n        mainContent={\n          <Fragment>\n            <Input className=\"ml-0\" checked={inputChecked} type='checkbox' onChange={this.onInputChange} />\n            <p className=\"ml-4\">{helpTip}</p>\n          </Fragment>\n        }\n      />\n    );\n  }\n}\n\nWebSettingCheckbox.propTypes = propTypes;\n\nexport default WebSettingCheckbox;\n","import React, { Component, Fragment } from 'react';\nimport { Utils } from '../../../utils/utils';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { gettext, isPro, mediaUrl, logoPath, faviconPath, loginBGPath } from '../../../utils/constants';\nimport Loading from '../../../components/loading';\nimport toaster from '../../../components/toast';\nimport MainPanelTopbar from '../main-panel-topbar';\nimport Section from './section';\nimport InputItem from './input-item';\nimport FileItem from './file-item';\nimport CheckboxItem from './checkbox-item';\n\nimport '../../../css/system-admin-web-settings.css';\n\nclass WebSettings extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      config_dict: null,\n      logoPath: mediaUrl + logoPath,\n      faviconPath: mediaUrl + faviconPath,\n      loginBGPath: mediaUrl + loginBGPath\n    };\n  }\n\n  componentDidMount () {\n    seafileAPI.sysAdminGetSysSettingInfo().then((res) => {\n      this.setState({\n        loading: false,\n        config_dict: res.data\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  saveSetting = (key, value) => {\n    seafileAPI.sysAdminSetSysSettingInfo(key, value).then((res) => {\n      this.setState({\n        config_dict: res.data\n      });\n      toaster.success(gettext('Success'));\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  postFile = (file, fileType) => {\n    let postFile;\n    if (fileType == 'Logo') {\n      postFile = seafileAPI.sysAdminUpdateLogo(file);\n    } else if (fileType == 'Favicon') {\n      postFile = seafileAPI.sysAdminUpdateFavicon(file);\n    } else if (fileType == 'loginBGImage') {\n      postFile = seafileAPI.sysAdminUpdateLoginBG(file);\n    }\n    postFile.then((res) => {\n      if (fileType == 'Logo') {\n        this.setState({\n          logoPath: res.data.logo_path\n        });\n      } else if (fileType == 'Favicon') {\n        this.setState({\n          faviconPath: res.data.favicon_path\n        });\n      } else if (fileType == 'loginBGImage') {\n        this.setState({\n          loginBGPath: res.data.login_bg_image_path\n        });\n      }\n      toaster.success(gettext('Success'));\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  render() {\n    const { loading, errorMsg, config_dict, logoPath, faviconPath, loginBGPath } = this.state;\n    return (\n      <Fragment>\n        <MainPanelTopbar />\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <div className=\"cur-view-path\">\n              <h3 className=\"sf-heading\">{gettext('Settings')}</h3>\n            </div>\n            <div className=\"cur-view-content container mw-100\">\n              {loading && <Loading />}\n              {errorMsg && <p className=\"error text-center mt-4\">{errorMsg}</p>}\n              {(!loading && !errorMsg) && config_dict &&\n              <Fragment>\n                <p className=\"small text-secondary my-4\">{gettext('Note: Settings via web interface are saved in database table (seahub-db/constance_config). They have a higher priority over the settings in config files.')}</p>\n\n                <Section headingText='URL'>\n                  <Fragment>\n                    <InputItem\n                      saveSetting={this.saveSetting}\n                      displayName='SERVICE_URL'\n                      keyText='SERVICE_URL'\n                      value={config_dict['SERVICE_URL']}\n                      helpTip={gettext('The URL of the server, like https://seafile.example.com or http://192.168.1.2:8000')}\n                    />\n                    <InputItem\n                      saveSetting={this.saveSetting}\n                      displayName='FILE_SERVER_ROOT'\n                      keyText='FILE_SERVER_ROOT'\n                      value={config_dict['FILE_SERVER_ROOT']}\n                      helpTip={gettext('The internal URL for downloading/uploading files. Users will not be able to download/upload files if this is not set correctly. If you config Seafile behind Nginx/Apache, it should be SERVICE_URL/seafhttp, like https://seafile.example.com/seafhttp .')}\n                    />\n                  </Fragment>\n                </Section>\n\n                <Section headingText={gettext('Branding')}>\n                  <Fragment>\n                    <InputItem\n                      saveSetting={this.saveSetting}\n                      displayName='SITE_TITLE'\n                      keyText='SITE_TITLE'\n                      value={config_dict['SITE_TITLE']}\n                      helpTip={gettext('Site title shown in a browser tab')}\n                    />\n                    <InputItem\n                      saveSetting={this.saveSetting}\n                      displayName='SITE_NAME'\n                      keyText='SITE_NAME'\n                      value={config_dict['SITE_NAME']}\n                      helpTip={gettext('Site name used in email sending')}\n                    />\n                    <FileItem\n                      postFile={this.postFile}\n                      displayName='Logo'\n                      keyText='Logo'\n                      filePath={logoPath}\n                      fileWidth={256}\n                      fileHeight={64}\n                      helpTip='logo.png, 256px * 64px'\n                    />\n                    <FileItem\n                      postFile={this.postFile}\n                      displayName='Favicon'\n                      keyText='Favicon'\n                      filePath={faviconPath}\n                      fileWidth={32}\n                      fileHeight={32}\n                      helpTip='favicon.ico, 32px * 32px'\n                    />\n                    <FileItem\n                      postFile={this.postFile}\n                      displayName={gettext('Login Background Image')}\n                      keyText='loginBGImage'\n                      filePath={loginBGPath}\n                      fileWidth={240}\n                      fileHeight={160}\n                      helpTip='login-bg.jpg, 2400px * 1600px'\n                    />\n                    <CheckboxItem\n                      saveSetting={this.saveSetting}\n                      displayName='ENABLE_BRANDING_CSS'\n                      keyText='ENABLE_BRANDING_CSS'\n                      value={config_dict['ENABLE_BRANDING_CSS']}\n                      helpTip={gettext('Use custom CSS')}\n                    />\n                    <InputItem\n                      inputType=\"textarea\"\n                      saveSetting={this.saveSetting}\n                      displayName={gettext('Custom CSS')}\n                      keyText='CUSTOM_CSS'\n                      value={config_dict['CUSTOM_CSS']}\n                      helpTip=''\n                    />\n                  </Fragment>\n                </Section>\n\n                <Section headingText={gettext('User')}>\n                  <Fragment>\n                    <CheckboxItem\n                      saveSetting={this.saveSetting}\n                      displayName={gettext('allow new registrations')}\n                      keyText='ENABLE_SIGNUP'\n                      value={config_dict['ENABLE_SIGNUP']}\n                      helpTip={gettext('Allow new user registrations. Uncheck this to prevent anyone from creating a new account.')}\n                    />\n                    <CheckboxItem\n                      saveSetting={this.saveSetting}\n                      displayName={gettext('activate after registration')}\n                      keyText='ACTIVATE_AFTER_REGISTRATION'\n                      value={config_dict['ACTIVATE_AFTER_REGISTRATION']}\n                      helpTip={gettext('Activate user immediately after registration. If unchecked, a user need to be activated by administrator or via activation email')}\n                    />\n                    <CheckboxItem\n                      saveSetting={this.saveSetting}\n                      displayName={gettext('send activation email')}\n                      keyText='REGISTRATION_SEND_MAIL'\n                      value={config_dict['REGISTRATION_SEND_MAIL']}\n                      helpTip={gettext('Send activation Email after user registration.')}\n                    />\n                    <InputItem\n                      saveSetting={this.saveSetting}\n                      displayName={gettext('keep sign in')}\n                      keyText='LOGIN_REMEMBER_DAYS'\n                      value={config_dict['LOGIN_REMEMBER_DAYS']}\n                      helpTip={gettext('Number of days that keep user sign in.')}\n                    />\n                    <InputItem\n                      saveSetting={this.saveSetting}\n                      displayName='LOGIN_ATTEMPT_LIMIT'\n                      keyText='LOGIN_ATTEMPT_LIMIT'\n                      value={config_dict['LOGIN_ATTEMPT_LIMIT']}\n                      helpTip={gettext('The maximum number of failed login attempts before showing CAPTCHA.')}\n                    />\n                    <CheckboxItem\n                      saveSetting={this.saveSetting}\n                      displayName='FREEZE_USER_ON_LOGIN_FAILED'\n                      keyText='FREEZE_USER_ON_LOGIN_FAILED'\n                      value={config_dict['FREEZE_USER_ON_LOGIN_FAILED']}\n                      helpTip={gettext('Freeze user account when failed login attempts exceed limit.')}\n                    />\n                  </Fragment>\n                </Section>\n\n                <Section headingText={gettext('Groups')}>\n                  <CheckboxItem\n                    saveSetting={this.saveSetting}\n                    displayName='ENABLE_SHARE_TO_ALL_GROUPS'\n                    keyText='ENABLE_SHARE_TO_ALL_GROUPS'\n                    value={config_dict['ENABLE_SHARE_TO_ALL_GROUPS']}\n                    helpTip={gettext('Enable users to share libraries to any groups in the system.')}\n                  />\n                </Section>\n\n                <Section headingText={gettext('Password')}>\n                  <Fragment>\n                    <CheckboxItem\n                      saveSetting={this.saveSetting}\n                      displayName='strong password'\n                      keyText='USER_STRONG_PASSWORD_REQUIRED'\n                      value={config_dict['USER_STRONG_PASSWORD_REQUIRED']}\n                      helpTip={gettext('Force user to use a strong password when sign up or change password.')}\n                    />\n                    <CheckboxItem\n                      saveSetting={this.saveSetting}\n                      displayName='force password change'\n                      keyText='FORCE_PASSWORD_CHANGE'\n                      value={config_dict['FORCE_PASSWORD_CHANGE']}\n                      helpTip={gettext('Force user to change password when account is newly added or reset by admin')}\n                    />\n                    <InputItem\n                      saveSetting={this.saveSetting}\n                      displayName={gettext('password minimum length')}\n                      keyText='USER_PASSWORD_MIN_LENGTH'\n                      value={config_dict['USER_PASSWORD_MIN_LENGTH']}\n                      helpTip={gettext('The least number of characters an account password should include.')}\n                    />\n                    <InputItem\n                      saveSetting={this.saveSetting}\n                      displayName={gettext('password strength level')}\n                      keyText='USER_PASSWORD_STRENGTH_LEVEL'\n                      value={config_dict['USER_PASSWORD_STRENGTH_LEVEL']}\n                      helpTip={gettext('The level(1-4) of an account password\\'s strength. For example, \\'3\\' means password must have at least 3 of the following: num, upper letter, lower letter and other symbols')}\n                    />\n                    <CheckboxItem\n                      saveSetting={this.saveSetting}\n                      displayName='enable two factor authentication'\n                      keyText='ENABLE_TWO_FACTOR_AUTH'\n                      value={config_dict['ENABLE_TWO_FACTOR_AUTH']}\n                      helpTip={gettext('Enable two factor authentication')}\n                    />\n                  </Fragment>\n                </Section>\n\n                <Section headingText={gettext('Library')}>\n                  <Fragment>\n                    <CheckboxItem\n                      saveSetting={this.saveSetting}\n                      displayName='library history'\n                      keyText='ENABLE_REPO_HISTORY_SETTING'\n                      value={config_dict['ENABLE_REPO_HISTORY_SETTING']}\n                      helpTip={gettext('Allow user to change library history settings')}\n                    />\n                    <CheckboxItem\n                      saveSetting={this.saveSetting}\n                      displayName='encrypted library'\n                      keyText='ENABLE_ENCRYPTED_LIBRARY'\n                      value={config_dict['ENABLE_ENCRYPTED_LIBRARY']}\n                      helpTip={gettext('Allow user to create encrypted libraries')}\n                    />\n                    <InputItem\n                      saveSetting={this.saveSetting}\n                      displayName={gettext('library password minimum length')}\n                      keyText='REPO_PASSWORD_MIN_LENGTH'\n                      value={config_dict['REPO_PASSWORD_MIN_LENGTH']}\n                      helpTip={gettext('The least number of characters an encrypted library password should include.')}\n                    />\n                    <InputItem\n                      saveSetting={this.saveSetting}\n                      displayName={gettext('download/upload link password minimum length')}\n                      keyText='SHARE_LINK_PASSWORD_MIN_LENGTH'\n                      value={config_dict['SHARE_LINK_PASSWORD_MIN_LENGTH']}\n                      helpTip={gettext('The least number of characters a download/upload link password should include.')}\n                    />\n                    <CheckboxItem\n                      saveSetting={this.saveSetting}\n                      displayName='ENABLE_USER_CREATE_ORG_REPO'\n                      keyText='ENABLE_USER_CREATE_ORG_REPO'\n                      value={config_dict['ENABLE_USER_CREATE_ORG_REPO']}\n                      helpTip={gettext('Allow user to add organization libraries. Otherwise, only system admin can add organization libraries.')}\n                    />\n                    <CheckboxItem\n                      saveSetting={this.saveSetting}\n                      displayName='ENABLE_USER_CLEAN_TRASH'\n                      keyText='ENABLE_USER_CLEAN_TRASH'\n                      value={config_dict['ENABLE_USER_CLEAN_TRASH']}\n                      helpTip={gettext('Allow user to clean library trash')}\n                    />\n                  </Fragment>\n                </Section>\n\n                <Section headingText={gettext('Online Preview')}>\n                  <InputItem\n                    inputType=\"textarea\"\n                    saveSetting={this.saveSetting}\n                    displayName={gettext('text file extensions')}\n                    keyText='TEXT_PREVIEW_EXT'\n                    value={config_dict['TEXT_PREVIEW_EXT']}\n                    helpTip={gettext('Extensions of text files that can be online previewed, each suffix is separated by a comma.')}\n                  />\n                </Section>\n\n                <Section headingText={gettext('Sync')}>\n                  <CheckboxItem\n                    saveSetting={this.saveSetting}\n                    displayName='DISABLE_SYNC_WITH_ANY_FOLDER'\n                    keyText='DISABLE_SYNC_WITH_ANY_FOLDER'\n                    value={config_dict['DISABLE_SYNC_WITH_ANY_FOLDER']}\n                    helpTip={gettext('If turn on, the desktop clients will not be able to sync a folder outside the default Seafile folder.')}\n                  />\n                </Section>\n\n                {isPro && <Section headingText={gettext('Terms')}>\n                  <CheckboxItem\n                    saveSetting={this.saveSetting}\n                    displayName='ENABLE_TERMS_AND_CONDITIONS'\n                    keyText='ENABLE_TERMS_AND_CONDITIONS'\n                    value={config_dict['ENABLE_TERMS_AND_CONDITIONS']}\n                    helpTip={gettext('Enable system admin to add Terms and Conditions, and all users will have to accept the terms.')}\n                  />\n                </Section>}\n              </Fragment>\n              }\n            </div>\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nexport default WebSettings;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter, Form, FormGroup, Input } from 'reactstrap';\nimport { gettext } from '../../../utils/constants';\n\nconst propTypes = {\n  toggle: PropTypes.func.isRequired,\n  addNotification: PropTypes.func.isRequired\n};\n\nclass SysAdminAddSysNotificationDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      value: '',\n      isSubmitBtnActive: false\n    };\n  }\n\n  handleChange = (e) => {\n    const value = e.target.value;\n    this.setState({\n      value: value,\n      isSubmitBtnActive: value.trim() != ''\n    });\n  }\n\n  handleSubmit = () => {\n    this.toggle();\n    this.props.addNotification(this.state.value.trim());\n  }\n\n  toggle = () => {\n    this.props.toggle();\n  }\n\n  render() {\n    return (\n      <Modal isOpen={true} toggle={this.toggle}>\n        <ModalHeader toggle={this.toggle}>{gettext('Add new notification')}</ModalHeader>\n        <ModalBody>\n          <Form>\n            <FormGroup>\n              <Input\n                type=\"textarea\"\n                value={this.state.value}\n                onChange={this.handleChange}\n              />\n            </FormGroup>\n          </Form>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.toggle}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.handleSubmit} disabled={!this.state.isSubmitBtnActive}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nSysAdminAddSysNotificationDialog.propTypes = propTypes;\n\nexport default SysAdminAddSysNotificationDialog;\n","import React, { Component, Fragment } from 'react';\nimport { Button } from 'reactstrap';\nimport { Utils } from '../../../utils/utils';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { gettext } from '../../../utils/constants';\nimport toaster from '../../../components/toast';\nimport EmptyTip from '../../../components/empty-tip';\nimport Loading from '../../../components/loading';\nimport OpMenu from '../../../components/dialog/op-menu';\nimport CommonOperationConfirmationDialog from '../../../components/dialog/common-operation-confirmation-dialog';\nimport SysAdminAddSysNotificationDialog from '../../../components/dialog/sysadmin-dialog/sysadmin-add-sys-notification-dialog';\nimport MainPanelTopbar from '../main-panel-topbar';\n\nclass Content extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isItemFreezed: false\n    };\n  }\n\n  onFreezedItem = () => {\n    this.setState({isItemFreezed: true});\n  }\n\n  onUnfreezedItem = () => {\n    this.setState({isItemFreezed: false});\n  }\n\n  render() {\n    const { loading, errorMsg, items } = this.props;\n    if (loading) {\n      return <Loading />;\n    } else if (errorMsg) {\n      return <p className=\"error text-center mt-4\">{errorMsg}</p>;\n    } else {\n      const emptyTip = (\n        <EmptyTip>\n          <h2>{gettext('No notifications')}</h2>\n        </EmptyTip>\n      );\n      const table = (\n        <table>\n          <thead>\n            <tr>\n              <th width=\"95%\">{gettext('Notification Detail')}</th>\n              <th width=\"5%\">{/*Operations*/}</th>\n            </tr>\n          </thead>\n          <tbody>\n            {items.map((item, index) => {\n              return (<Item\n                key={index}\n                item={item}\n                isItemFreezed={this.state.isItemFreezed}\n                onFreezedItem={this.onFreezedItem}\n                onUnfreezedItem={this.onUnfreezedItem}\n                deleteNotification={this.props.deleteNotification}\n                setToCurrent={this.props.setToCurrent}\n              />);\n            })}\n          </tbody>\n        </table>\n      );\n      return items.length ? table : emptyTip;\n    }\n  }\n}\n\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOpIconShown: false,\n      highlight: false,\n      isDeleteDialogOpen: false\n    };\n  }\n\n  handleMouseEnter = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        isOpIconShown: true,\n        highlight: true\n      });\n    }\n  }\n\n  handleMouseLeave = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        isOpIconShown: false,\n        highlight: false\n      });\n    }\n  }\n\n  onUnfreezedItem = () => {\n    this.setState({\n      highlight: false,\n      isOpIconShow: false\n    });\n    this.props.onUnfreezedItem();\n  }\n\n  toggleDeleteDialog = (e) => {\n    if (e) {\n      e.preventDefault();\n    }\n    this.setState({isDeleteDialogOpen: !this.state.isDeleteDialogOpen});\n  }\n\n  deleteNotification = () => {\n    this.props.deleteNotification(this.props.item.id);\n    this.toggleDeleteDialog();\n  }\n\n  setToCurrent = () => {\n    this.props.setToCurrent(this.props.item.id);\n  }\n\n  onMenuItemClick = (operation) => {\n    switch(operation) {\n      case 'Set to current':\n        this.setToCurrent();\n        break;\n      case 'Delete':\n        this.toggleDeleteDialog();\n        break;\n    }\n  }\n\n  translateOperations = (item) => {\n    let translateResult = '';\n    switch (item) {\n      case 'Set to current':\n        translateResult = gettext('Set to current');\n        break;\n      case 'Delete':\n        translateResult = gettext('Delete');\n        break;\n      default:\n        break;\n    }\n    return translateResult;\n  }\n\n  getOperations = () => {\n    const { item } = this.props;\n    let operations = [];\n    if (!item.is_current) {\n      operations.push('Set to current');\n    }\n    operations.push('Delete');\n    return operations;\n  }\n\n  render() {\n    const { item } = this.props;\n    const { isOpIconShown, isDeleteDialogOpen } = this.state;\n\n    return (\n      <Fragment>\n        <tr className={this.state.highlight ? 'tr-highlight' : ''} onMouseEnter={this.handleMouseEnter} onMouseLeave={this.handleMouseLeave}>\n          <td>\n            {item.msg}\n            {item.is_current &&\n              <span className=\"small text-orange\">{gettext('(current notification)')}</span>\n            }\n          </td>\n          <td>\n            {isOpIconShown &&\n            <OpMenu\n              operations={this.getOperations()}\n              translateOperations={this.translateOperations}\n              onMenuItemClick={this.onMenuItemClick}\n              onFreezedItem={this.props.onFreezedItem}\n              onUnfreezedItem={this.onUnfreezedItem}\n            />\n            }\n          </td>\n        </tr>\n        {isDeleteDialogOpen &&\n          <CommonOperationConfirmationDialog\n            title={gettext('Delete Notification')}\n            message={gettext('Are you sure you want to delete the notification ?')}\n            toggleDialog={this.toggleDeleteDialog}\n            executeOperation={this.deleteNotification}\n            confirmBtnText={gettext('Delete')}\n          />\n        }\n      </Fragment>\n    );\n  }\n}\n\nclass Notifications extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      notificationList: [],\n      isAddNotificationDialogOpen: false\n    };\n  }\n\n  componentDidMount () {\n    seafileAPI.sysAdminListAllSysNotifications().then((res) => {\n      this.setState({\n        loading: false,\n        notificationList: res.data.notifications\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  toggleAddNotificationDialog = () => {\n    this.setState({isAddNotificationDialogOpen: !this.state.isAddNotificationDialogOpen});\n  }\n\n  addNotification = (msg) => {\n    seafileAPI.sysAdminAddSysNotification(msg).then(res => {\n      let notificationList = this.state.notificationList;\n      notificationList.unshift(res.data.notification);\n      this.setState({notificationList: notificationList});\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  deleteNotification = (id) => {\n    seafileAPI.sysAdminDeleteSysNotification(id).then(res => {\n      let notificationList = this.state.notificationList.filter(item => {\n        return item.id != id;\n      });\n      this.setState({notificationList: notificationList});\n      toaster.success(gettext('Successfully deleted 1 item.'));\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  setToCurrent = (id) => {\n    seafileAPI.sysAdminSetSysNotificationToCurrent(id).then(res => {\n      let notificationList = this.state.notificationList.map(item => {\n        if (item.id == id) {\n          item.is_current = true;\n        } else {\n          item.is_current = false;\n        }\n        return item;\n      });\n      this.setState({notificationList: notificationList});\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  render() {\n    const { isAddNotificationDialogOpen } = this.state;\n    return (\n      <Fragment>\n        <MainPanelTopbar>\n          <Button className=\"btn btn-secondary operation-item\" onClick={this.toggleAddNotificationDialog}>{gettext('Add new notification')}</Button>\n        </MainPanelTopbar>\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <div className=\"cur-view-path\">\n              <h3 className=\"sf-heading\">{gettext('All Notifications')}</h3>\n            </div>\n            <div className=\"cur-view-content\">\n              <Content\n                loading={this.state.loading}\n                errorMsg={this.state.errorMsg}\n                items={this.state.notificationList}\n                deleteNotification={this.deleteNotification}\n                setToCurrent={this.setToCurrent}\n              />\n            </div>\n          </div>\n        </div>\n        {isAddNotificationDialogOpen &&\n          <SysAdminAddSysNotificationDialog\n            addNotification={this.addNotification}\n            toggle={this.toggleAddNotificationDialog}\n          />\n        }\n      </Fragment>\n    );\n  }\n}\n\nexport default Notifications;\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport Account from '../../components/common/account';\n\n\nconst tablePropTypes = {\n  loading: PropTypes.bool.isRequired,\n  errorMsg: PropTypes.string.isRequired,\n  records: PropTypes.array.isRequired,\n};\n\nclass Table extends Component {\n\n  render() {\n    let { loading, errorMsg, records } = this.props;\n\n    if (loading) {\n      return <span className=\"loading-icon loading-tip\"></span>;\n    } else if (errorMsg) {\n      return <p className=\"error text-center\">{errorMsg}</p>;\n    } else {\n      return (\n        <table width=\"100%\" className=\"table table-hover table-vcenter\">\n          <thead>\n            <tr>\n              <th width=\"16%\">{gettext('Library')}</th>\n              <th width=\"30%\">ID</th>\n              <th width=\"30%\">{gettext('Path')}</th>\n              <th width=\"12%\">{gettext('Label')}</th>\n              <th width=\"12%\">{gettext('Suggestion')}</th>\n            </tr>\n          </thead>\n          <tbody>\n            {records.map((record, index) => {\n              return (\n                <Item key={index} record={record} />\n              );\n            })}\n          </tbody>\n        </table>\n      );\n    }\n  }\n}\n\nTable.propTypes = tablePropTypes;\n\n\nconst itemPropTypes = {\n  record: PropTypes.object.isRequired,\n};\n\nclass Item extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {};\n  }\n\n  render() {\n    let record = this.props.record;\n\n    return (\n      <tr>\n        <td>{record.repo_name}</td>\n        <td>{record.repo_id}</td>\n        <td>{record.path}</td>\n        <td>{record.detail.label}</td>\n        <td>{record.detail.suggestion}</td>\n      </tr>\n    );\n  }\n}\n\nItem.propTypes = itemPropTypes;\n\n\nclass FileScanRecords extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      records: [],\n    };\n  }\n\n  componentDidMount() {\n    seafileAPI.listFileScanRecords().then((res) => {\n      this.setState({\n        loading: false,\n        records: res.data.record_list,\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  render() {\n    return (\n      <React.Fragment>\n        <div className=\"main-panel-north border-left-show\">\n          <div className=\"cur-view-toolbar\">\n            <span className=\"sf2-icon-menu side-nav-toggle hidden-md-up d-md-none\" title=\"Side Nav Menu\"></span>\n          </div>\n          <div className=\"common-toolbar\">\n            <Account isAdminPanel={true} />\n          </div>\n        </div>\n        <div className=\"main-panel-center\">\n          <div className=\"cur-view-container\" id=\"content-scan-records\">\n            <div className=\"cur-view-path\">\n              <h3 className=\"sf-heading\">{gettext('Content Scan Records')}</h3>\n            </div>\n            <div className=\"cur-view-content\">\n              <Table\n                loading={this.state.loading}\n                errorMsg={this.state.errorMsg}\n                records={this.state.records}\n              />\n            </div>\n          </div>\n        </div>\n      </React.Fragment>\n    );\n  }\n}\n\nexport default FileScanRecords;\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { Table } from 'reactstrap';\nimport { siteRoot } from '../../../utils/constants';\nimport Loading from '../../../components/loading';\n\nconst WorkWeixinDepartmentMembersListPropTypes = {\n  isMembersListLoading: PropTypes.bool.isRequired,\n  membersList: PropTypes.array.isRequired,\n  newUsersTempObj: PropTypes.object.isRequired,\n  checkedDepartmentId: PropTypes.number.isRequired,\n  onUserChecked: PropTypes.func.isRequired,\n  onAllUsersChecked: PropTypes.func.isRequired,\n  isCheckedAll: PropTypes.bool.isRequired,\n  canCheckUserIds: PropTypes.array.isRequired,\n};\n\nclass WorkWeixinDepartmentMembersList extends Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    const { newUsersTempObj, checkedDepartmentId, isMembersListLoading, canCheckUserIds } = this.props;\n    const membersList = this.props.membersList.map((member, index) => {\n      let avatar = member.avatar;\n      if (member.avatar.length > 0) {\n        avatar = member.avatar.substring(0, member.avatar.length - 1) + '100';// get smaller avatar\n      } else {\n        avatar = siteRoot + 'media/avatars/default.png';\n      }\n      return (\n        <tr key={checkedDepartmentId.toString() + member.userid}>\n          <td>\n            {!member.email &&\n              <input type=\"checkbox\" className=\"vam\" onChange={() => this.props.onUserChecked(member)}\n                checked={(member.userid in newUsersTempObj) ? 'checked' : ''}></input>}\n          </td>\n          <td><img className=\"avatar\" src={avatar} alt=\"\"></img></td>\n          <td>{member.name}</td>\n          <td>{member.mobile}</td>\n          <td>{member.contact_email}</td>\n          <td>{member.email && <i className=\"sf2-icon-tick\"></i>}</td>\n        </tr>\n      );\n    });\n\n    return (\n      <div className=\"dir-content-main\">\n        {isMembersListLoading && <Loading/>}\n        {!isMembersListLoading && this.props.membersList.length > 0 &&\n          <Table hover>\n            <thead>\n              <tr>\n                <th width=\"5%\">\n                  {canCheckUserIds.length > 0 &&\n                    <input type=\"checkbox\" className=\"vam\" checked={this.props.isCheckedAll}\n                      onChange={() => this.props.onAllUsersChecked()}></input>}\n                </th>\n                <th width=\"10%\"></th>\n                <th width=\"20%\">{''}</th>\n                <th width=\"20%\">{''}</th>\n                <th width=\"30%\">{''}</th>\n                <th width=\"15%\">{''}</th>\n              </tr>\n            </thead>\n            <tbody>{membersList}</tbody>\n          </Table>\n        }\n        {!isMembersListLoading && this.props.membersList.length === 0 &&\n          <div className=\"message empty-tip text-center\">\n            <img src={`${siteRoot}media/img/member-list-empty-2x.png`} alt=\"\"/>\n            <h4>{''}</h4>\n          </div>\n        }\n      </div>\n    );\n  }\n}\n\nWorkWeixinDepartmentMembersList.propTypes = WorkWeixinDepartmentMembersListPropTypes;\n\nexport default WorkWeixinDepartmentMembersList;\n","import React, { Component, Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport { Dropdown, DropdownItem, DropdownMenu, DropdownToggle } from 'reactstrap';\nimport { gettext, isPro } from '../../../utils/constants';\n\nconst WorkWeixinDepartmentsTreeNodePropTypes = {\n  index: PropTypes.number,\n  department: PropTypes.object.isRequired,\n  isChildrenShow: PropTypes.bool.isRequired,\n  onChangeDepartment: PropTypes.func.isRequired,\n  checkedDepartmentId: PropTypes.number.isRequired,\n  importDepartmentDialogToggle: PropTypes.func.isRequired,\n};\n\nclass WorkWeixinDepartmentsTreeNode extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isChildrenShow: false,\n      dropdownOpen: false,\n      active: false,\n    };\n  }\n\n  toggleChildren = (e) => {\n    e.preventDefault();\n    e.stopPropagation();\n    this.setState({\n      isChildrenShow: !this.state.isChildrenShow,\n    });\n  };\n\n  dropdownToggle = (e) => {\n    e.stopPropagation();\n    this.setState({ dropdownOpen: !this.state.dropdownOpen });\n  };\n\n  onMouseEnter = () => {\n    this.setState({ active: true });\n  };\n\n  onMouseLeave = () => {\n    if (this.state.dropdownOpen) return;\n    this.setState({ active: false });\n  };\n\n  importDepartmentDialogToggle = (depart) => {\n    this.setState({ active: false });\n    this.props.importDepartmentDialogToggle(depart);\n  }\n\n  componentDidMount() {\n    if (this.props.index === 0) {\n      this.setState({ isChildrenShow: true });\n      this.props.onChangeDepartment(this.props.department.id);\n    }\n  }\n\n  renderTreeNodes = (departmentsTree) => {\n    if (departmentsTree.length > 0) {\n      return departmentsTree.map((department) => {\n        return (\n          <WorkWeixinDepartmentsTreeNode\n            key={department.id}\n            department={department}\n            isChildrenShow={this.state.isChildrenShow}\n            onChangeDepartment={this.props.onChangeDepartment}\n            checkedDepartmentId={this.props.checkedDepartmentId}\n            importDepartmentDialogToggle={this.importDepartmentDialogToggle}\n          />\n        );\n      });\n    }\n  };\n\n  changeDept = (departmentID) => {\n    const { department, checkedDepartmentId } = this.props;\n    this.props.onChangeDepartment(departmentID);\n    if (checkedDepartmentId === department.id && !this.state.isChildrenShow) {\n      this.setState({ isChildrenShow: true });\n    }\n  }\n\n  render() {\n    const { isChildrenShow, department, checkedDepartmentId } = this.props;\n    let toggleClass = classNames({\n      'folder-toggle-icon fa fa-caret-down': department.children && this.state.isChildrenShow,\n      'folder-toggle-icon fa fa-caret-right': department.children && !this.state.isChildrenShow,\n    });\n    let nodeInnerClass = classNames({\n      'tree-node-inner': true,\n      'tree-node-inner-hover': this.state.active,\n      'tree-node-hight-light': checkedDepartmentId === department.id\n    });\n    return (\n      <Fragment>\n        {isChildrenShow &&\n          <div\n            className={nodeInnerClass}\n            onClick={() => this.changeDept(department.id)}\n            onMouseEnter={this.onMouseEnter}\n            onMouseLeave={this.onMouseLeave}\n          >\n            <span className=\"tree-node-icon\" onClick={(e) => this.toggleChildren(e)}>\n              <i className={toggleClass}></i>\n            </span>\n            <span className=\"tree-node-text\">{department.name}</span>\n            {isPro &&\n            <Dropdown\n              isOpen={this.state.dropdownOpen}\n              toggle={(e) => this.dropdownToggle(e)}\n              direction=\"down\"\n              style={this.state.active ? {} : { opacity: 0 }}\n            >\n              <DropdownToggle\n                tag='i'\n                className='fa fa-ellipsis-v cursor-pointer attr-action-icon'\n                title={gettext('More Operations')}\n                data-toggle=\"dropdown\"\n                aria-expanded={this.state.dropdownOpen}\n              >\n              </DropdownToggle>\n              <DropdownMenu className=\"drop-list\" right={true}>\n                <DropdownItem\n                  onClick={this.importDepartmentDialogToggle.bind(this, department)}\n                  id={department.id}\n                >{''}</DropdownItem>\n              </DropdownMenu>\n            </Dropdown>\n            }\n          </div>\n        }\n        {this.state.isChildrenShow &&\n          <div className=\"department-children\">\n            {department.children && this.renderTreeNodes(department.children)}\n          </div>\n        }\n      </Fragment>\n    );\n  }\n}\n\nWorkWeixinDepartmentsTreeNode.propTypes = WorkWeixinDepartmentsTreeNodePropTypes;\n\nexport default WorkWeixinDepartmentsTreeNode;\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport Loading from '../../../components/loading';\nimport WorkWeixinDepartmentsTreeNode from './work-weixin-departments-tree-node';\n\nconst WorkWeixinDepartmentsTreePanelPropTypes = {\n  isTreeLoading: PropTypes.bool.isRequired,\n  departmentsTree: PropTypes.array.isRequired,\n  onChangeDepartment: PropTypes.func.isRequired,\n  checkedDepartmentId: PropTypes.number.isRequired,\n  importDepartmentDialogToggle: PropTypes.func.isRequired,\n};\n\nclass WorkWeixinDepartmentsTreePanel extends Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    const { departmentsTree } = this.props;\n    return (\n      <div className=\"dir-content-nav\">\n        <div className=\"tree-view tree\">\n          {this.props.isTreeLoading ?\n            <Loading/> :\n            <div className=\"tree-node\">\n              {departmentsTree.length > 0 && departmentsTree.map((department, index) => {\n                return (\n                  <WorkWeixinDepartmentsTreeNode\n                    key={department.id}\n                    index={index}\n                    department={department}\n                    isChildrenShow={true}\n                    onChangeDepartment={this.props.onChangeDepartment}\n                    checkedDepartmentId={this.props.checkedDepartmentId}\n                    importDepartmentDialogToggle={this.props.importDepartmentDialogToggle}\n                  />\n                );\n              })}\n            </div>\n          }\n        </div>\n      </div>\n    );\n  }\n}\n\nWorkWeixinDepartmentsTreePanel.propTypes = WorkWeixinDepartmentsTreePanelPropTypes;\n\nexport default WorkWeixinDepartmentsTreePanel;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter } from 'reactstrap';\nimport Loading from '../loading';\n\nconst propTypes = {\n  importDepartmentDialogToggle: PropTypes.func.isRequired,\n  onImportDepartmentSubmit: PropTypes.func.isRequired,\n  departmentsCount: PropTypes.number.isRequired,\n  membersCount: PropTypes.number.isRequired,\n  departmentName: PropTypes.string.isRequired,\n};\n\nclass ImportWorkWeixinDepartmentDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isLoading : false,\n    };\n  }\n\n  toggle = () => {\n    this.props.importDepartmentDialogToggle(null);\n  };\n\n  handleSubmit = () => {\n    this.props.onImportDepartmentSubmit();\n    this.setState({ isLoading : true });\n  };\n\n  render() {\n    const { departmentsCount, membersCount, departmentName } = this.props;\n    return (\n      <Modal isOpen={true} toggle={this.toggle}>\n        <ModalHeader toggle={this.toggle}>\n          <span>{' '}</span><span className=\"op-target\" title={departmentName}>{departmentName}</span>\n        </ModalHeader>\n        <ModalBody>\n          <p>{' '}<strong>{departmentsCount}</strong>{'  '}<strong>{membersCount}</strong>{' '}</p>\n          {this.state.isLoading && <Loading/>}\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.toggle}>{''}</Button>\n          <Button color=\"primary\" onClick={this.handleSubmit}>{''}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nImportWorkWeixinDepartmentDialog.propTypes = propTypes;\n\nexport default ImportWorkWeixinDepartmentDialog;\n","import React, { Component, Fragment } from 'react';\nimport { Button } from 'reactstrap';\nimport _ from 'lodash';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { gettext, siteRoot, isPro } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../../components/toast';\nimport Account from '../../components/common/account';\nimport { WorkWeixinDepartmentMembersList, WorkWeixinDepartmentsTreePanel } from './work-weixin';\nimport ImportWorkWeixinDepartmentDialog from '../../components/dialog/import-work-weixin-department-dialog';\n\nimport '../../css/work-weixin-departments.css';\n\nclass WorkWeixinDepartments extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isTreeLoading: true,\n      isMembersListLoading: true,\n      departmentsTree: [],\n      checkedDepartmentId: 0,\n      membersTempObj: {},\n      membersList: [],\n      newUsersTempObj: {},\n      isCheckedAll: false,\n      canCheckUserIds: [],\n      isImportDepartmentDialogShow: false,\n      importDepartment: null,\n      importDepartmentChildrenCount: 0,\n      importDepartmentMembersCount: 0,\n    };\n  }\n\n  getDepartmentsTree = (list) => {\n    let childIds = [];\n    let parentIds = [];\n    for (let i = 0; i < list.length; i++) {\n      if (childIds.indexOf(list[i].id) === -1) {\n        childIds.push(list[i].id);\n      }\n      if (parentIds.indexOf(list[i].parentid) === -1) {\n        parentIds.push(list[i].parentid);\n      }\n    }\n    let intersection = parentIds.filter((v) => {\n      return childIds.indexOf(v) !== -1;\n    });\n    let rootIds = parentIds.concat(intersection).filter((v) => {\n      return parentIds.indexOf(v) === -1 || intersection.indexOf(v) === -1;\n    });\n    let cloneData = _.cloneDeep(list);\n    return cloneData.filter(father => {\n      let branchArr = cloneData.filter(child => father.id === child.parentid);\n      branchArr.length > 0 ? father.children = branchArr : '';\n      return rootIds.indexOf(father.parentid) !== -1;\n    });\n  };\n\n  getWorkWeixinDepartmentsList = (departmentID) => {\n    seafileAPI.adminListWorkWeixinDepartments(departmentID).then((res) => {\n      if (!departmentID) {\n        let departmentsTree = this.getDepartmentsTree(res.data.department);\n        this.setState({\n          isTreeLoading: false,\n          departmentsTree: departmentsTree,\n        });\n      } else {\n        this.setState({\n          importDepartmentChildrenCount: res.data.department.length,\n          importDepartmentMembersCount: this.state.membersTempObj[departmentID].length,\n        });\n      }\n    }).catch((error) => {\n      this.handleError(error);\n      this.setState({\n        isTreeLoading: false,\n        isMembersListLoading: false,\n      });\n      if (error.response && error.response.status === 403) {\n        window.location = siteRoot + 'sys/useradmin/';\n      }\n    });\n  };\n\n  getWorkWeixinDepartmentMembersList = (department_id) => {\n    this.setState({\n      isMembersListLoading: true,\n    });\n    seafileAPI.adminListWorkWeixinDepartmentMembers(department_id, {fetch_child: true}).then((res) => {\n      let membersTempObj = this.state.membersTempObj;\n      membersTempObj[department_id] = res.data.userlist;\n      let canCheckUserIds = this.getCanCheckUserIds(res.data.userlist);\n      this.setState({\n        membersTempObj: membersTempObj,\n        membersList: res.data.userlist,\n        isMembersListLoading: false,\n        canCheckUserIds: canCheckUserIds,\n      });\n    }).catch((error) => {\n      this.setState({isMembersListLoading: false});\n      this.handleError(error);\n    });\n  };\n\n  getCanCheckUserIds = (membersList) => {\n    let userIds = [];\n    membersList.forEach((member) => {\n      if (!member.email) userIds.push(member.userid);\n    });\n    return userIds;\n  };\n\n  onChangeDepartment = (department_id) => {\n    this.setState({\n      newUsersTempObj: {},\n      isCheckedAll: false,\n      checkedDepartmentId: department_id,\n    });\n    if (!(department_id in this.state.membersTempObj)) {\n      this.getWorkWeixinDepartmentMembersList(department_id);\n    } else {\n      let canCheckUserIds = this.getCanCheckUserIds(this.state.membersTempObj[department_id]);\n      this.setState({\n        membersList: this.state.membersTempObj[department_id],\n        canCheckUserIds: canCheckUserIds,\n      });\n    }\n  };\n\n  onUserChecked = (user) => {\n    if (this.state.canCheckUserIds.indexOf(user.userid) !== -1) {\n      let newUsersTempObj = this.state.newUsersTempObj;\n      if (user.userid in newUsersTempObj) {\n        delete newUsersTempObj[user.userid];\n        if (this.state.isCheckedAll) {\n          this.setState({ isCheckedAll: false });\n        }\n      } else {\n        newUsersTempObj[user.userid] = user;\n        if (Object.keys(newUsersTempObj).length === this.state.canCheckUserIds.length) {\n          this.setState({ isCheckedAll: true });\n        }\n      }\n      this.setState({ newUsersTempObj: newUsersTempObj });\n    }\n  };\n\n  onAllUsersChecked = () => {\n    this.setState({\n      isCheckedAll: !this.state.isCheckedAll,\n    }, () => {\n      if (this.state.isCheckedAll) {\n        let newUsersTempObj = {};\n        let newUsersTempList = this.state.membersList.filter(user => {\n          return this.state.canCheckUserIds.indexOf(user.userid) !== -1;\n        });\n        for (let i = 0; i < newUsersTempList.length; i++) {\n          newUsersTempObj[newUsersTempList[i].userid] = newUsersTempList[i];\n        }\n        this.setState({ newUsersTempObj: newUsersTempObj });\n      } else {\n        this.setState({ newUsersTempObj: {} });\n      }\n    });\n  };\n\n  onSubmit = () => {\n    const { newUsersTempObj } = this.state;\n    if (JSON.stringify(newUsersTempObj) === '{}') return;\n    let userList = [];\n    for (let i in newUsersTempObj) {\n      userList.push(newUsersTempObj[i]);\n    }\n    if (userList.length === 0) {\n      toaster.danger('', {duration: 3});\n      return;\n    }\n    seafileAPI.adminAddWorkWeixinUsersBatch(userList).then((res) => {\n      this.setState({\n        newUsersTempObj: {},\n        isCheckedAll: false,\n      });\n      if (res.data.success) {\n        this.handleSubmitSuccess(res.data.success);\n      }\n      if (res.data.failed) {\n        const fails= res.data.failed;\n        for (let i = 0; i < fails.length; i++) {\n          toaster.danger(fails[i].name + ' ' + fails[i].error_msg, {duration: 3});\n        }\n      }\n    }).catch((error) => {\n      this.handleError(error);\n    });\n\n  };\n\n  handleSubmitSuccess = (success) => {\n    let { membersTempObj, membersList, canCheckUserIds } = this.state;\n    for (let i = 0; i < success.length; i++) {\n      let { userid, name, email } = success[i];\n      toaster.success(name + ' ', {duration: 1});\n      // refresh all temp\n      if (canCheckUserIds.indexOf(userid) !== -1) {\n        canCheckUserIds.splice(canCheckUserIds.indexOf(userid), 1);\n      }\n      for (let j = 0; j < membersList.length; j++) {\n        if (membersList[j].userid === userid) {\n          membersList[j].email = email;\n          break;\n        }\n      }\n      for (let departmentId in membersTempObj) {\n        for (let k = 0; k < membersTempObj[departmentId].length; k++) {\n          if (membersTempObj[departmentId][k].userid === userid) {\n            membersTempObj[departmentId][k].email = email;\n            break;\n          }\n        }\n      }\n    }\n    this.setState({\n      membersTempObj: membersTempObj,\n      membersList: membersList,\n      canCheckUserIds: canCheckUserIds,\n    });\n  }\n\n  importDepartmentDialogToggle = (importDepartment) => {\n    this.setState({\n      isImportDepartmentDialogShow: !this.state.isImportDepartmentDialogShow,\n      importDepartment: importDepartment,\n    }, () => {\n      if (importDepartment) {\n        this.getWorkWeixinDepartmentsList(importDepartment.id);\n      }\n    });\n  };\n\n  onImportDepartmentSubmit = () => {\n    let importDepartment = this.state.importDepartment;\n    if (!importDepartment) return;\n    seafileAPI.adminImportWorkWeixinDepartment(importDepartment.id).then((res) => {\n      this.setState({\n        isMembersListLoading: true,\n        checkedDepartmentId: importDepartment.id,\n        membersTempObj: {},\n        membersList: [],\n        newUsersTempObj: {},\n        isCheckedAll: false,\n        canCheckUserIds: [],\n      });\n      this.getWorkWeixinDepartmentMembersList(importDepartment.id);\n      this.importDepartmentDialogToggle(null);\n      if (res.data.success) {\n        this.handleImportDepartmentSubmitSuccess(res.data.success);\n      }\n      if (res.data.failed) {\n        this.handleImportDepartmentSubmitFailed(res.data.failed);\n      }\n    }).catch((error) => {\n      this.handleError(error);\n    });\n  };\n\n  handleImportDepartmentSubmitSuccess = (successes) => {\n    for (let i = 0, len = successes.length; i < len; i++) {\n      let success = successes[i];\n      let successMsg = success.type === 'department' ? ' ' + success.department_name + ' ' : success.api_user_name + ' ' ;\n      toaster.success(successMsg, { duration: 3 });\n    }\n  };\n\n  handleImportDepartmentSubmitFailed = (fails) => {\n    for (let i = 0, len = fails.length; i < len; i++) {\n      let fail = fails[i];\n      let failName = fail.type === 'department' ? fail.department_name : fail.api_user_name;\n      toaster.danger(failName + ' ' + fail.msg, { duration: 3} );\n    }\n  };\n\n  handleError = (error) => {\n    const errorMsg = Utils.getErrorMsg(error);\n    toaster.danger(errorMsg);\n  }\n\n  componentDidMount() {\n    this.getWorkWeixinDepartmentsList(null);\n  }\n\n  renderNav() {\n    const btnClass = 'btn btn-secondary operation-item ';\n    return (\n      <div className=\"main-panel-north border-left-show\">\n        <div className=\"cur-view-toolbar\">\n          <span className=\"sf2-icon-menu side-nav-toggle hidden-md-up d-md-none\" title=\"Side Nav Menu\"></span>\n          <Button className={btnClass + 'my-1 d-md-none'} onClick={this.onSubmit}>{''}</Button>\n          <Button className={btnClass + 'hidden-md-up'} onClick={this.onSubmit}>{''}</Button>\n        </div>\n        <div className=\"common-toolbar\">\n          <Account isAdminPanel={true}/>\n        </div>\n      </div>\n    );\n  }\n\n  render() {\n    const { isImportDepartmentDialogShow, isTreeLoading, importDepartment, importDepartmentChildrenCount, importDepartmentMembersCount } = this.state;\n    let canImportDepartment = !!(isPro && isImportDepartmentDialogShow && !isTreeLoading && importDepartment);\n    return (\n      <Fragment>\n        {this.renderNav()}\n        <div className=\"main-panel-center\">\n          <div className=\"cur-view-container\">\n            <div className=\"cur-view-path\">\n              <h3 className=\"sf-heading\">{''}</h3>\n            </div>\n            <div className=\"cur-view-content d-flex flex-row\">\n              <WorkWeixinDepartmentsTreePanel\n                departmentsTree={this.state.departmentsTree}\n                isTreeLoading={this.state.isTreeLoading}\n                onChangeDepartment={this.onChangeDepartment}\n                checkedDepartmentId={this.state.checkedDepartmentId}\n                importDepartmentDialogToggle={this.importDepartmentDialogToggle}\n              />\n              <div className=\"dir-content-resize\"></div>\n              <WorkWeixinDepartmentMembersList\n                isMembersListLoading={this.state.isMembersListLoading}\n                membersList={this.state.membersList}\n                checkedDepartmentId={this.state.checkedDepartmentId}\n                newUsersTempObj={this.state.newUsersTempObj}\n                onUserChecked={this.onUserChecked}\n                onAllUsersChecked={this.onAllUsersChecked}\n                isCheckedAll={this.state.isCheckedAll}\n                canCheckUserIds={this.state.canCheckUserIds}\n              />\n            </div>\n          </div>\n        </div>\n        {canImportDepartment &&\n          <ImportWorkWeixinDepartmentDialog\n            importDepartmentDialogToggle={this.importDepartmentDialogToggle}\n            onImportDepartmentSubmit={this.onImportDepartmentSubmit}\n            departmentsCount={importDepartmentChildrenCount}\n            membersCount={importDepartmentMembersCount}\n            departmentName={importDepartment.name}\n          />\n        }\n      </Fragment>\n    );\n  }\n}\n\nexport default WorkWeixinDepartments;\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { Table } from 'reactstrap';\nimport { siteRoot } from '../../../utils/constants';\nimport Loading from '../../../components/loading';\n\nconst DingtalkDepartmentMembersListPropTypes = {\n  isMembersListLoading: PropTypes.bool.isRequired,\n  membersList: PropTypes.array.isRequired,\n  newUsersTempObj: PropTypes.object.isRequired,\n  checkedDepartmentId: PropTypes.number.isRequired,\n  onUserChecked: PropTypes.func.isRequired,\n  onAllUsersChecked: PropTypes.func.isRequired,\n  isCheckedAll: PropTypes.bool.isRequired,\n  canCheckUserIds: PropTypes.array.isRequired,\n};\n\nclass DingtalkDepartmentMembersList extends Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    const { newUsersTempObj, checkedDepartmentId, isMembersListLoading, canCheckUserIds } = this.props;\n    const membersList = this.props.membersList.map((member, index) => {\n      let avatar = member.avatar;\n      if (member.avatar.length > 0) {\n        avatar = member.avatar;\n      } else {\n        avatar = siteRoot + 'media/avatars/default.png';\n      }\n      return (\n        <tr key={checkedDepartmentId.toString() + member.userid}>\n          <td>\n            {!member.email &&\n              <input type=\"checkbox\" className=\"vam\" onChange={() => this.props.onUserChecked(member)}\n                checked={(member.userid in newUsersTempObj) ? 'checked' : ''}></input>}\n          </td>\n          <td><img className=\"avatar\" src={avatar} alt=\"\"></img></td>\n          <td>{member.name}</td>\n          <td>{member.mobile}</td>\n          <td>{member.contact_email}</td>\n          <td>{member.email && <i className=\"sf2-icon-tick\"></i>}</td>\n        </tr>\n      );\n    });\n\n    return (\n      <div className=\"dir-content-main\">\n        {isMembersListLoading && <Loading/>}\n        {!isMembersListLoading && this.props.membersList.length > 0 &&\n          <Table hover>\n            <thead>\n              <tr>\n                <th width=\"5%\">\n                  {canCheckUserIds.length > 0 &&\n                    <input type=\"checkbox\" className=\"vam\" checked={this.props.isCheckedAll}\n                      onChange={() => this.props.onAllUsersChecked()}></input>}\n                </th>\n                <th width=\"10%\"></th>\n                <th width=\"20%\">{''}</th>\n                <th width=\"20%\">{''}</th>\n                <th width=\"30%\">{''}</th>\n                <th width=\"15%\">{''}</th>\n              </tr>\n            </thead>\n            <tbody>{membersList}</tbody>\n          </Table>\n        }\n        {!isMembersListLoading && this.props.membersList.length === 0 &&\n          <div className=\"message empty-tip text-center\">\n            <img src={`${siteRoot}media/img/member-list-empty-2x.png`} alt=\"\"/>\n            <h4>{''}</h4>\n          </div>\n        }\n      </div>\n    );\n  }\n}\n\nDingtalkDepartmentMembersList.propTypes = DingtalkDepartmentMembersListPropTypes;\n\nexport default DingtalkDepartmentMembersList;\n","import React, { Component, Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport { Dropdown, DropdownItem, DropdownMenu, DropdownToggle } from 'reactstrap';\nimport { gettext, isPro } from '../../../utils/constants';\n\nconst DingtalkDepartmentsTreeNodePropTypes = {\n  index: PropTypes.number,\n  department: PropTypes.object.isRequired,\n  isChildrenShow: PropTypes.bool.isRequired,\n  onChangeDepartment: PropTypes.func.isRequired,\n  checkedDepartmentId: PropTypes.number.isRequired,\n  importDepartmentDialogToggle: PropTypes.func.isRequired,\n};\n\nclass DingtalkDepartmentsTreeNode extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isChildrenShow: false,\n      dropdownOpen: false,\n      active: false,\n    };\n  }\n\n  toggleChildren = (e) => {\n    e.preventDefault();\n    e.stopPropagation();\n    this.setState({\n      isChildrenShow: !this.state.isChildrenShow,\n    });\n  };\n\n  dropdownToggle = (e) => {\n    e.stopPropagation();\n    this.setState({ dropdownOpen: !this.state.dropdownOpen });\n  };\n\n  onMouseEnter = () => {\n    this.setState({ active: true });\n  };\n\n  onMouseLeave = () => {\n    if (this.state.dropdownOpen) return;\n    this.setState({ active: false });\n  };\n\n  importDepartmentDialogToggle = (depart) => {\n    this.setState({ active: false });\n    this.props.importDepartmentDialogToggle(depart);\n  }\n\n  componentDidMount() {\n    if (this.props.index === 0) {\n      this.setState({ isChildrenShow: true });\n      this.props.onChangeDepartment(this.props.department.id);\n    }\n  }\n\n  renderTreeNodes = (departmentsTree) => {\n    if (departmentsTree.length > 0) {\n      return departmentsTree.map((department) => {\n        return (\n          <DingtalkDepartmentsTreeNode\n            key={department.id}\n            department={department}\n            isChildrenShow={this.state.isChildrenShow}\n            onChangeDepartment={this.props.onChangeDepartment}\n            checkedDepartmentId={this.props.checkedDepartmentId}\n            importDepartmentDialogToggle={this.importDepartmentDialogToggle}\n          />\n        );\n      });\n    }\n  };\n\n  changeDept = (departmentID) => {\n    const { department, checkedDepartmentId } = this.props;\n    this.props.onChangeDepartment(departmentID);\n    if (checkedDepartmentId === department.id && !this.state.isChildrenShow) {\n      this.setState({ isChildrenShow: true });\n    }\n  }\n\n  render() {\n    const { isChildrenShow, department, checkedDepartmentId } = this.props;\n    let toggleClass = classNames({\n      'folder-toggle-icon fa fa-caret-down': department.children && this.state.isChildrenShow,\n      'folder-toggle-icon fa fa-caret-right': department.children && !this.state.isChildrenShow,\n    });\n    let nodeInnerClass = classNames({\n      'tree-node-inner': true,\n      'tree-node-inner-hover': this.state.active,\n      'tree-node-hight-light': checkedDepartmentId === department.id\n    });\n    return (\n      <Fragment>\n        {isChildrenShow &&\n          <div\n            className={nodeInnerClass}\n            onClick={() => this.changeDept(department.id)}\n            onMouseEnter={this.onMouseEnter}\n            onMouseLeave={this.onMouseLeave}\n          >\n            <span className=\"tree-node-icon\" onClick={(e) => this.toggleChildren(e)}>\n              <i className={toggleClass}></i>\n            </span>\n            <span className=\"tree-node-text\">{department.name}</span>\n            {isPro &&\n            <Dropdown\n              isOpen={this.state.dropdownOpen}\n              toggle={(e) => this.dropdownToggle(e)}\n              direction=\"down\"\n              style={this.state.active ? {} : { opacity: 0 }}\n            >\n              <DropdownToggle\n                tag='i'\n                className='fa fa-ellipsis-v cursor-pointer attr-action-icon'\n                title={gettext('More Operations')}\n                data-toggle=\"dropdown\"\n                aria-expanded={this.state.dropdownOpen}\n              >\n              </DropdownToggle>\n              <DropdownMenu className=\"drop-list\" right={true}>\n                <DropdownItem\n                  onClick={this.importDepartmentDialogToggle.bind(this, department)}\n                  id={department.id}\n                >{''}</DropdownItem>\n              </DropdownMenu>\n            </Dropdown>\n            }\n          </div>\n        }\n        {this.state.isChildrenShow &&\n          <div className=\"department-children\">\n            {department.children && this.renderTreeNodes(department.children)}\n          </div>\n        }\n      </Fragment>\n    );\n  }\n}\n\nDingtalkDepartmentsTreeNode.propTypes = DingtalkDepartmentsTreeNodePropTypes;\n\nexport default DingtalkDepartmentsTreeNode;\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport Loading from '../../../components/loading';\nimport DingtalkDepartmentsTreeNode from './dingtalk-departments-tree-node';\n\nconst DingtalkDepartmentsTreePanelPropTypes = {\n  isTreeLoading: PropTypes.bool.isRequired,\n  departmentsTree: PropTypes.array.isRequired,\n  onChangeDepartment: PropTypes.func.isRequired,\n  checkedDepartmentId: PropTypes.number.isRequired,\n  importDepartmentDialogToggle: PropTypes.func.isRequired,\n};\n\nclass DingtalkDepartmentsTreePanel extends Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    const { departmentsTree } = this.props;\n    return (\n      <div className=\"dir-content-nav\">\n        <div className=\"tree-view tree\">\n          {this.props.isTreeLoading ?\n            <Loading/> :\n            <div className=\"tree-node\">\n              {departmentsTree.length > 0 && departmentsTree.map((department, index) => {\n                return (\n                  <DingtalkDepartmentsTreeNode\n                    key={department.id}\n                    index={index}\n                    department={department}\n                    isChildrenShow={true}\n                    onChangeDepartment={this.props.onChangeDepartment}\n                    checkedDepartmentId={this.props.checkedDepartmentId}\n                    importDepartmentDialogToggle={this.props.importDepartmentDialogToggle}\n                  />\n                );\n              })}\n            </div>\n          }\n        </div>\n      </div>\n    );\n  }\n}\n\nDingtalkDepartmentsTreePanel.propTypes = DingtalkDepartmentsTreePanelPropTypes;\n\nexport default DingtalkDepartmentsTreePanel;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter } from 'reactstrap';\nimport Loading from '../loading';\n\nconst propTypes = {\n  importDepartmentDialogToggle: PropTypes.func.isRequired,\n  onImportDepartmentSubmit: PropTypes.func.isRequired,\n  departmentsCount: PropTypes.number.isRequired,\n  membersCount: PropTypes.number.isRequired,\n  departmentName: PropTypes.string.isRequired,\n};\n\nclass ImportDingtalkDepartmentDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isLoading : false,\n    };\n  }\n\n  toggle = () => {\n    this.props.importDepartmentDialogToggle(null);\n  };\n\n  handleSubmit = () => {\n    this.props.onImportDepartmentSubmit();\n    this.setState({ isLoading : true });\n  };\n\n  render() {\n    const { departmentsCount, membersCount, departmentName } = this.props;\n    return (\n      <Modal isOpen={true} toggle={this.toggle}>\n        <ModalHeader toggle={this.toggle}>\n          <span>{' '}</span><span className=\"op-target\" title={departmentName}>{departmentName}</span>\n        </ModalHeader>\n        <ModalBody>\n          <p>{' '}<strong>{departmentsCount}</strong>{'  '}<strong>{membersCount}</strong>{' '}</p>\n          {this.state.isLoading && <Loading/>}\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.toggle}>{''}</Button>\n          <Button color=\"primary\" onClick={this.handleSubmit}>{''}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nImportDingtalkDepartmentDialog.propTypes = propTypes;\n\nexport default ImportDingtalkDepartmentDialog;\n","import React, { Component, Fragment } from 'react';\nimport { Button } from 'reactstrap';\nimport _ from 'lodash';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { gettext, siteRoot, isPro } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../../components/toast';\nimport Account from '../../components/common/account';\nimport { DingtalkDepartmentMembersList, DingtalkDepartmentsTreePanel } from './dingtalk';\nimport ImportDingtalkDepartmentDialog from '../../components/dialog/import-dingtalk-department-dialog';\n\nimport '../../css/work-weixin-departments.css';\nimport '../../css/dingtalk-departments.css';\n\nclass DingtalkDepartments extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isTreeLoading: true,\n      isMembersListLoading: true,\n      departmentsTree: [],\n      checkedDepartmentId: 0,\n      membersTempObj: {},\n      membersList: [],\n      newUsersTempObj: {},\n      isCheckedAll: false,\n      canCheckUserIds: [],\n      isImportDepartmentDialogShow: false,\n      importDepartment: null,\n      importDepartmentChildrenCount: 0,\n      importDepartmentMembersCount: 0,\n    };\n  }\n\n  getDepartmentsTree = (list) => {\n    let childIds = [];\n    let parentIds = [];\n    for (let i = 0; i < list.length; i++) {\n      if (childIds.indexOf(list[i].id) === -1) {\n        childIds.push(list[i].id);\n      }\n      if (parentIds.indexOf(list[i].parentid) === -1) {\n        parentIds.push(list[i].parentid);\n      }\n    }\n    let intersection = parentIds.filter((v) => {\n      return childIds.indexOf(v) !== -1;\n    });\n    let rootIds = parentIds.concat(intersection).filter((v) => {\n      return parentIds.indexOf(v) === -1 || intersection.indexOf(v) === -1;\n    });\n    let cloneData = _.cloneDeep(list);\n    return cloneData.filter(father => {\n      let branchArr = cloneData.filter(child => father.id === child.parentid);\n      branchArr.length > 0 ? father.children = branchArr : '';\n      return rootIds.indexOf(father.parentid) !== -1;\n    });\n  };\n\n  getDingtalkDepartmentsList = (departmentID) => {\n    seafileAPI.adminListDingtalkDepartments(departmentID).then((res) => {\n      if (!departmentID) {\n        let departmentsTree = this.getDepartmentsTree(res.data.department);\n        this.setState({\n          isTreeLoading: false,\n          departmentsTree: departmentsTree,\n        });\n      } else {\n        this.setState({\n          importDepartmentChildrenCount: res.data.department.length,\n          importDepartmentMembersCount: this.state.membersTempObj[departmentID].length,\n        });\n      }\n    }).catch((error) => {\n      this.handleError(error);\n      this.setState({\n        isTreeLoading: false,\n        isMembersListLoading: false,\n      });\n      if (error.response && error.response.status === 403) {\n        window.location = siteRoot + 'sys/useradmin/';\n      }\n    });\n  };\n\n  getDingtalkDepartmentMembersList = (department_id) => {\n    this.setState({\n      isMembersListLoading: true,\n    });\n    seafileAPI.adminListDingtalkDepartmentMembers(department_id).then((res) => {\n      let membersTempObj = this.state.membersTempObj;\n      membersTempObj[department_id] = res.data.userlist;\n      let canCheckUserIds = this.getCanCheckUserIds(res.data.userlist);\n      this.setState({\n        membersTempObj: membersTempObj,\n        membersList: res.data.userlist,\n        isMembersListLoading: false,\n        canCheckUserIds: canCheckUserIds,\n      });\n    }).catch((error) => {\n      this.setState({isMembersListLoading: false});\n      this.handleError(error);\n    });\n  }\n  getCanCheckUserIds = (membersList) => {\n    let userIds = [];\n    membersList.forEach((member) => {\n      if (!member.email) userIds.push(member.userid);\n    });\n    return userIds;\n  };\n\n  onChangeDepartment = (department_id) => {\n    this.setState({\n      newUsersTempObj: {},\n      isCheckedAll: false,\n      checkedDepartmentId: department_id,\n    });\n    if (!(department_id in this.state.membersTempObj)) {\n      this.getDingtalkDepartmentMembersList(department_id);\n    } else {\n      let canCheckUserIds = this.getCanCheckUserIds(this.state.membersTempObj[department_id]);\n      this.setState({\n        membersList: this.state.membersTempObj[department_id],\n        canCheckUserIds: canCheckUserIds,\n      });\n    }\n  };\n\n  onUserChecked = (user) => {\n    if (this.state.canCheckUserIds.indexOf(user.userid) !== -1) {\n      let newUsersTempObj = this.state.newUsersTempObj;\n      if (user.userid in newUsersTempObj) {\n        delete newUsersTempObj[user.userid];\n        if (this.state.isCheckedAll) {\n          this.setState({ isCheckedAll: false });\n        }\n      } else {\n        newUsersTempObj[user.userid] = user;\n        if (Object.keys(newUsersTempObj).length === this.state.canCheckUserIds.length) {\n          this.setState({ isCheckedAll: true });\n        }\n      }\n      this.setState({ newUsersTempObj: newUsersTempObj });\n    }\n  };\n\n  onAllUsersChecked = () => {\n    this.setState({\n      isCheckedAll: !this.state.isCheckedAll,\n    }, () => {\n      if (this.state.isCheckedAll) {\n        let newUsersTempObj = {};\n        let newUsersTempList = this.state.membersList.filter(user => {\n          return this.state.canCheckUserIds.indexOf(user.userid) !== -1;\n        });\n        for (let i = 0; i < newUsersTempList.length; i++) {\n          newUsersTempObj[newUsersTempList[i].userid] = newUsersTempList[i];\n        }\n        this.setState({ newUsersTempObj: newUsersTempObj });\n      } else {\n        this.setState({ newUsersTempObj: {} });\n      }\n    });\n  };\n\n  onSubmit = () => {\n    const { newUsersTempObj } = this.state;\n    if (JSON.stringify(newUsersTempObj) === '{}') return;\n    let userList = [];\n    for (let i in newUsersTempObj) {\n      userList.push(newUsersTempObj[i]);\n    }\n    if (userList.length === 0) {\n      toaster.danger('', {duration: 3});\n      return;\n    }\n    seafileAPI.adminAddDingtalkUsersBatch(userList).then((res) => {\n      this.setState({\n        newUsersTempObj: {},\n        isCheckedAll: false,\n      });\n      if (res.data.success) {\n        this.handleSubmitSuccess(res.data.success);\n      }\n      if (res.data.failed) {\n        const fails= res.data.failed;\n        for (let i = 0; i < fails.length; i++) {\n          toaster.danger(fails[i].name + ' ' + fails[i].error_msg, {duration: 3});\n        }\n      }\n    }).catch((error) => {\n      this.handleError(error);\n    });\n\n  };\n\n  handleSubmitSuccess = (success) => {\n    let { membersTempObj, membersList, canCheckUserIds } = this.state;\n    for (let i = 0; i < success.length; i++) {\n      let { userid, name, email } = success[i];\n      toaster.success(name + ' ', {duration: 1});\n      // refresh all temp\n      if (canCheckUserIds.indexOf(userid) !== -1) {\n        canCheckUserIds.splice(canCheckUserIds.indexOf(userid), 1);\n      }\n      for (let j = 0; j < membersList.length; j++) {\n        if (membersList[j].userid === userid) {\n          membersList[j].email = email;\n          break;\n        }\n      }\n      for (let departmentId in membersTempObj) {\n        for (let k = 0; k < membersTempObj[departmentId].length; k++) {\n          if (membersTempObj[departmentId][k].userid === userid) {\n            membersTempObj[departmentId][k].email = email;\n            break;\n          }\n        }\n      }\n    }\n    this.setState({\n      membersTempObj: membersTempObj,\n      membersList: membersList,\n      canCheckUserIds: canCheckUserIds,\n    });\n  }\n\n  importDepartmentDialogToggle = (importDepartment) => {\n    this.setState({\n      isImportDepartmentDialogShow: !this.state.isImportDepartmentDialogShow,\n      importDepartment: importDepartment,\n    }, () => {\n      if (importDepartment) {\n        this.getDingtalkDepartmentsList(importDepartment.id);\n      }\n    });\n  };\n\n  onImportDepartmentSubmit = () => {\n    let importDepartment = this.state.importDepartment;\n    if (!importDepartment) return;\n    seafileAPI.adminImportDingtalkDepartment(importDepartment.id).then((res) => {\n      this.setState({\n        isMembersListLoading: true,\n        checkedDepartmentId: importDepartment.id,\n        membersTempObj: {},\n        membersList: [],\n        newUsersTempObj: {},\n        isCheckedAll: false,\n        canCheckUserIds: [],\n      });\n      this.getDingtalkDepartmentMembersList(importDepartment.id);\n      this.importDepartmentDialogToggle(null);\n      if (res.data.success) {\n        this.handleImportDepartmentSubmitSuccess(res.data.success);\n      }\n      if (res.data.failed) {\n        this.handleImportDepartmentSubmitFailed(res.data.failed);\n      }\n    }).catch((error) => {\n      this.handleError(error);\n    });\n  };\n\n  handleImportDepartmentSubmitSuccess = (successes) => {\n    for (let i = 0, len = successes.length; i < len; i++) {\n      let success = successes[i];\n      let successMsg = success.type === 'department' ? ' ' + success.department_name + ' ' : success.api_user_name + ' ' ;\n      toaster.success(successMsg, { duration: 3 });\n    }\n  };\n\n  handleImportDepartmentSubmitFailed = (fails) => {\n    for (let i = 0, len = fails.length; i < len; i++) {\n      let fail = fails[i];\n      let failName = fail.type === 'department' ? fail.department_name : fail.api_user_name;\n      toaster.danger(failName + ' ' + fail.msg, { duration: 3} );\n    }\n  };\n\n  handleError = (error) => {\n    const errorMsg = Utils.getErrorMsg(error);\n    toaster.danger(errorMsg);\n  }\n\n  componentDidMount() {\n    this.getDingtalkDepartmentsList(null);\n  }\n\n  renderNav() {\n    const btnClass = 'btn btn-secondary operation-item ';\n    return (\n      <div className=\"main-panel-north border-left-show\">\n        <div className=\"cur-view-toolbar\">\n          <span className=\"sf2-icon-menu side-nav-toggle hidden-md-up d-md-none\" title=\"Side Nav Menu\"></span>\n          <Button className={btnClass + 'my-1 d-md-none'} onClick={this.onSubmit}>{''}</Button>\n          <Button className={btnClass + 'hidden-md-up'} onClick={this.onSubmit}>{''}</Button>\n        </div>\n        <div className=\"common-toolbar\">\n          <Account isAdminPanel={true}/>\n        </div>\n      </div>\n    );\n  }\n\n  render() {\n    const { isImportDepartmentDialogShow, isTreeLoading, importDepartment, importDepartmentChildrenCount, importDepartmentMembersCount } = this.state;\n    let canImportDepartment = !!(isPro && isImportDepartmentDialogShow && !isTreeLoading && importDepartment);\n    return (\n      <Fragment>\n        {this.renderNav()}\n        <div className=\"main-panel-center\">\n          <div className=\"cur-view-container\">\n            <div className=\"cur-view-path\">\n              <h3 className=\"sf-heading\">{''}</h3>\n            </div>\n            <div className=\"cur-view-content d-flex flex-row\">\n              <DingtalkDepartmentsTreePanel\n                departmentsTree={this.state.departmentsTree}\n                isTreeLoading={this.state.isTreeLoading}\n                onChangeDepartment={this.onChangeDepartment}\n                checkedDepartmentId={this.state.checkedDepartmentId}\n                importDepartmentDialogToggle={this.importDepartmentDialogToggle}\n              />\n              <div className=\"dir-content-resize\"></div>\n              <DingtalkDepartmentMembersList\n                isMembersListLoading={this.state.isMembersListLoading}\n                membersList={this.state.membersList}\n                checkedDepartmentId={this.state.checkedDepartmentId}\n                newUsersTempObj={this.state.newUsersTempObj}\n                onUserChecked={this.onUserChecked}\n                onAllUsersChecked={this.onAllUsersChecked}\n                isCheckedAll={this.state.isCheckedAll}\n                canCheckUserIds={this.state.canCheckUserIds}\n              />\n            </div>\n          </div>\n        </div>\n        {canImportDepartment &&\n          <ImportDingtalkDepartmentDialog\n            importDepartmentDialogToggle={this.importDepartmentDialogToggle}\n            onImportDepartmentSubmit={this.onImportDepartmentSubmit}\n            departmentsCount={importDepartmentChildrenCount}\n            membersCount={importDepartmentMembersCount}\n            departmentName={importDepartment.name}\n          />\n        }\n      </Fragment>\n    );\n  }\n}\n\nexport default DingtalkDepartments;\n","import React, { Component, Fragment } from 'react';\nimport { Button } from 'reactstrap';\nimport moment from 'moment';\nimport { Utils } from '../../../utils/utils';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { gettext } from '../../../utils/constants';\nimport toaster from '../../../components/toast';\nimport EmptyTip from '../../../components/empty-tip';\nimport Loading from '../../../components/loading';\nimport Paginator from '../../../components/paginator';\nimport OpMenu from '../../../components/dialog/op-menu';\nimport MainPanelTopbar from '../main-panel-topbar';\nimport UserLink from '../user-link';\n\nclass Content extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isItemFreezed: false\n    };\n  }\n\n  onFreezedItem = () => {\n    this.setState({isItemFreezed: true});\n  }\n\n  onUnfreezedItem = () => {\n    this.setState({isItemFreezed: false});\n  }\n\n  getPreviousPage = () => {\n    this.props.getItemsByPage(this.props.currentPage - 1);\n  }\n\n  getNextPage = () => {\n    this.props.getItemsByPage(this.props.currentPage + 1);\n  }\n\n  render() {\n    const { loading, errorMsg, items, pageInfo, curPerPage, hasNextPage, currentPage } = this.props;\n    if (loading) {\n      return <Loading />;\n    } else if (errorMsg) {\n      return <p className=\"error text-center mt-4\">{errorMsg}</p>;\n    } else {\n      const emptyTip = (\n        <EmptyTip>\n          <h2>{gettext('No invitations')}</h2>\n        </EmptyTip>\n      );\n\n      const table = (\n        <Fragment>\n          <table>\n            <thead>\n              <tr>\n                <th width=\"20%\">{gettext('Inviter')}</th>\n                <th width=\"20%\">{gettext('Accepter')}</th>\n                <th width=\"9%\">{gettext('Type')}</th>\n                <th width=\"14%\">{gettext('Invited at')}</th>\n                <th width=\"14%\">{gettext('Accepted at')}</th>\n                <th width=\"18%\">{gettext('Expired at')}</th>\n                <th width=\"5%\"></th>\n              </tr>\n            </thead>\n            <tbody>\n              {items.map((item, index) => {\n                return (<Item\n                  key={index}\n                  item={item}\n                  isItemFreezed={this.state.isItemFreezed}\n                  onFreezedItem={this.onFreezedItem}\n                  onUnfreezedItem={this.onUnfreezedItem}\n                  deleteItem={this.props.deleteItem}\n                />);\n              })}\n            </tbody>\n          </table>\n          <Paginator\n            gotoPreviousPage={this.getPreviousPage}\n            gotoNextPage={this.getNextPage}\n            currentPage={currentPage}\n            hasNextPage={hasNextPage}\n            curPerPage={curPerPage}\n            resetPerPage={this.props.resetPerPage}\n          />\n        </Fragment>\n      );\n\n      return items.length ? table : emptyTip;\n    }\n  }\n}\n\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOpIconShown: false,\n      highlight: false\n    };\n  }\n\n  handleMouseEnter = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        isOpIconShown: true,\n        highlight: true\n      });\n    }\n  }\n\n  handleMouseLeave = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        isOpIconShown: false,\n        highlight: false\n      });\n    }\n  }\n\n  onUnfreezedItem = () => {\n    this.setState({\n      highlight: false,\n      isOpIconShow: false\n    });\n    this.props.onUnfreezedItem();\n  }\n\n  deleteItem = () => {\n    this.props.deleteItem(this.props.item);\n  }\n\n  translateOperations = (item) => {\n    let translateResult = '';\n    switch (item) {\n      case 'Delete':\n        translateResult = gettext('Delete');\n        break;\n    }\n    return translateResult;\n  }\n\n  onMenuItemClick = (operation) => {\n    switch(operation) {\n      case 'Delete':\n        this.deleteItem();\n        break;\n      default:\n        break;\n    }\n  }\n\n  getInviteTypeText = () => {\n    let translateResult = '';\n    switch (this.props.item.invite_type) {\n      case 'Guest':\n        translateResult = gettext('Guest');\n        break;\n    }\n    return translateResult;\n  }\n\n  render() {\n    const { item } = this.props;\n    const {\n      isOpIconShown\n    } = this.state;\n\n    return (\n      <Fragment>\n        <tr className={this.state.highlight ? 'tr-highlight' : ''} onMouseEnter={this.handleMouseEnter} onMouseLeave={this.handleMouseLeave}>\n          <td>\n            <UserLink email={item.inviter_email} name={item.inviter_name} />\n          </td>\n          <td>\n            {item.accept_time ?\n              <UserLink email={item.accepter_email} name={item.accepter_name} /> :\n              item.accepter_email\n            }\n          </td>\n          <td>{this.getInviteTypeText()}</td>\n          <td>\n            <span title={moment(item.invite_time).format('llll')}>{moment(item.invite_time).fromNow()}</span>\n          </td>\n          <td>\n            {item.accept_time ?\n              <span title={moment(item.accept_time).format('llll')}>{moment(item.accept_time).fromNow()}</span> :\n              '--'\n            }\n          </td>\n          <td>\n            {item.is_expired ?\n              <span className=\"text-red\">{moment(item.expire_time).format('YYYY-MM-DD HH:mm')}</span> :\n              moment(item.expire_time).format('YYYY-MM-DD HH:mm')\n            }\n          </td>\n          <td>\n            {isOpIconShown &&\n            <OpMenu\n              operations={['Delete']}\n              translateOperations={this.translateOperations}\n              onMenuItemClick={this.onMenuItemClick}\n              onFreezedItem={this.props.onFreezedItem}\n              onUnfreezedItem={this.onUnfreezedItem}\n            />\n            }\n          </td>\n        </tr>\n      </Fragment>\n    );\n  }\n}\n\n\nclass Invitations extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      items: [],\n      totalItemCount: 0,\n      hasNextPage: false,\n      currentPage: 1,\n      perPage: 25\n    };\n  }\n\n  componentDidMount () {\n    let urlParams = (new URL(window.location)).searchParams;\n    const { currentPage, perPage } = this.state;\n    this.setState({\n      perPage: parseInt(urlParams.get('per_page') || perPage),\n      currentPage: parseInt(urlParams.get('page') || currentPage)\n    }, () => {\n      this.getItemsByPage(this.state.currentPage);\n    });\n  }\n\n  getItemsByPage = (page) => {\n    let { perPage } = this.state;\n    seafileAPI.sysAdminListInvitations(page, perPage).then(res => {\n      this.setState({\n        loading: false,\n        items: res.data.invitation_list,\n        hasNextPage: Utils.hasNextPage(page, perPage, res.data.total_count),\n        currentPage: page\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  deleteItem = (targetItem) => {\n    const token = targetItem.token;\n    seafileAPI.sysAdminDeleteInvitation(token).then(res => {\n      let items = this.state.items.filter(item => {\n        return item.token != token;\n      });\n      this.setState({items: items});\n      toaster.success(gettext('Successfully deleted 1 item.'));\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  deleteItemInBatch = () => {\n    seafileAPI.sysAdminDeleteExpiredInvitations().then(res => {\n      const prevItems = this.state.items;\n      const items = this.state.items.filter(item => !item.is_expired || item.accept_time);\n      if (items.length < prevItems.length) {\n        this.setState({\n          items: items\n        });\n        toaster.success(gettext('Operation succeeded.'));\n      }\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  resetPerPage = (perPage) => {\n    this.setState({\n      perPage: perPage\n    }, () => {\n      this.getItemsByPage(1);\n    });\n  }\n\n  render() {\n    return (\n      <Fragment>\n        <MainPanelTopbar>\n          <Button className=\"btn btn-secondary operation-item\" onClick={this.deleteItemInBatch}>{gettext('Delete Expired Invitations')}</Button>\n        </MainPanelTopbar>\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <div className=\"cur-view-path\">\n              <h3 className=\"sf-heading\">{gettext('Invitations')}</h3>\n            </div>\n            <div className=\"cur-view-content\">\n              <Content\n                loading={this.state.loading}\n                errorMsg={this.state.errorMsg}\n                items={this.state.items}\n                currentPage={this.state.currentPage}\n                hasNextPage={this.state.hasNextPage}\n                curPerPage={this.state.perPage}\n                resetPerPage={this.resetPerPage}\n                getItemsByPage={this.getItemsByPage}\n                deleteItem={this.deleteItem}\n              />\n            </div>\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nexport default Invitations;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Modal, ModalHeader, ModalBody } from 'reactstrap';\nimport { SimpleEditor } from '@seafile/seafile-editor';\nimport { gettext } from '../../utils/constants';\n\nconst propTypes = {\n  title: PropTypes.string,\n  content: PropTypes.string,\n  onCommit: PropTypes.func.isRequired,\n  onCloseEditorDialog: PropTypes.func.isRequired,\n};\n\nclass TermsEditorDialog extends React.Component {\n\n  static defaultProps = {\n    title: gettext('Terms'),\n  }\n\n  onKeyDown = (event) => {\n    event.stopPropagation();\n  }\n\n  toggle = () => {\n    if (this.isContentChanged()) {\n      let currentContent = this.getCurrentContent();\n      this.props.onCommit(currentContent);\n    }\n    this.props.onCloseEditorDialog();\n  }\n\n  isContentChanged = () => {\n    return this.simpleEditor.hasContentChange();\n  }\n\n  getCurrentContent = () => {\n    let markdownContent = this.simpleEditor.getMarkdown();\n    return markdownContent;\n  }\n\n  setSimpleEditorRef = (editor) => {\n    this.simpleEditor = editor;\n  }\n\n  render() {\n    let { content, title } = this.props;\n    return (\n      <Modal\n        isOpen={true}\n        toggle={this.toggle}\n        onKeyDown={this.onKeyDown}\n        wrapClassName={'conditions-editor-dialog-wrapper'}\n        className={'conditions-editor-dialog'}\n        contentClassName={'conditions-editor-dialog-content'}\n        size={'lg'}\n        style={{width: 770}}\n      >\n        <ModalHeader className=\"conditions-editor-dialog-title\" toggle={this.toggle}>{title}</ModalHeader>\n        <ModalBody className={'conditions-editor-dialog-main'}>\n          <SimpleEditor\n            onRef={this.setSimpleEditorRef.bind(this)}\n            value={content || ''}\n          />\n        </ModalBody>\n      </Modal>\n    );\n  }\n}\n\nTermsEditorDialog.propTypes = propTypes;\n\nexport default TermsEditorDialog;\n","import React, {Fragment} from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter, Input, Alert, FormGroup, Label } from 'reactstrap';\nimport { gettext } from '../../../utils/constants';\nimport TermsPreviewWidget from '../../terms-preview-widget';\nimport TermsEditorDialog from '../terms-editor-dialog';\n\nimport '../../../css/terms-conditions-editor.css';\n\nconst propTypes = {\n  isUpdate: PropTypes.bool,\n  oldTermObj: PropTypes.object,\n  addTerm: PropTypes.func,\n  updateTerm: PropTypes.func,\n  toggle: PropTypes.func.isRequired,\n};\n\nclass AddOrUpdateTermDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      name: '',\n      versionNumber: '',\n      text: '',\n      isActive: true,\n      errorMsg: '',\n      isConditionsEditorDialogShow: false,\n    };\n  }\n\n  componentDidMount() {\n    let oldTermObj = this.props.oldTermObj;\n    if (oldTermObj) {\n      this.setState({\n        name: oldTermObj.name,\n        versionNumber: oldTermObj.version_number,\n        text: oldTermObj.text,\n        isActive: !(oldTermObj.activate_time === ''),\n      });\n    }\n  }\n\n  handleNameChange = (e) => {\n    this.setState({name: e.target.value.trim()});\n  }\n\n  handleVersionNumberChange = (e) => {\n    this.setState({versionNumber: e.target.value.trim()});\n  }\n\n  handleTextChange = (e) => {\n    this.setState({text: e.target.value.trim()});\n  }\n\n  setActive = () => {\n    this.setState({isActive: true});\n  }\n\n  setInActive = () => {\n    this.setState({isActive: false});\n  }\n\n  addTerm = () => {\n    let { name, versionNumber, text, isActive } = this.state;\n    if (name === '') {\n      this.setState({errMsg: gettext('Name is required.')});\n      return;\n    }\n    if (versionNumber === '') {\n      this.setState({errMsg: gettext('Version Number is required.')});\n      return;\n    }\n    if (isNaN(versionNumber)) {\n      this.setState({errMsg: gettext('Version Number must be a number.')});\n      return;\n    }\n    if (text === '') {\n      this.setState({errMsg: gettext('Text is required.')});\n      return;\n    }\n    if (this.props.isUpdate) {\n      this.props.updateTerm(name, versionNumber, text, isActive);\n    } else {\n      this.props.addTerm(name, versionNumber, text, isActive);\n    }\n  }\n\n  onContentClick = () => {\n    this.setState({isConditionsEditorDialogShow: !this.state.isConditionsEditorDialogShow});\n  }\n\n  onCloseEditorDialog = () => {\n    this.setState({isConditionsEditorDialogShow: false});\n  }\n\n  onUpdateContent = (content) => {\n    this.setState({ text: content });\n  }\n\n  render() {\n    let title = this.props.isUpdate ? gettext('Update Terms and Conditions') : gettext('Add Terms and Conditions');\n    return (\n      <Fragment>\n        <Modal isOpen={true} toggle={this.props.toggle}>\n          <ModalHeader toggle={this.props.toggle}>{title}</ModalHeader>\n          <ModalBody>\n            <FormGroup>\n              <Label for=\"name\">{gettext('Name')}</Label>\n              <Input id=\"name\" value={this.state.name} onChange={this.handleNameChange}/>\n            </FormGroup>\n            <FormGroup>\n              <Label>{gettext('Version Number')}</Label>\n              <Input value={this.state.versionNumber} onChange={this.handleVersionNumberChange}/>\n            </FormGroup>\n            <FormGroup className=\"form-content\">\n              <Label>{gettext('Text')}</Label>\n              <TermsPreviewWidget content={this.state.text} onContentClick={this.onContentClick}/>\n            </FormGroup>\n            <FormGroup tag=\"fieldset\">\n              <Label>{gettext('Activated')}</Label>\n              <FormGroup check>\n                <Label check>\n                  <Input type=\"radio\" checked={this.state.isActive} onChange={this.setActive} />\n                  {' '}{gettext('On')}\n                </Label>\n              </FormGroup>\n              <FormGroup check>\n                <Label check>\n                  <Input type=\"radio\" checked={!this.state.isActive} onChange={this.setInActive} />\n                  {' '}{gettext('Off')}\n                </Label>\n              </FormGroup>\n            </FormGroup>\n            {this.state.errMsg && <Alert color=\"danger\">{this.state.errMsg}</Alert>}\n          </ModalBody>\n          <ModalFooter>\n            <Button color=\"primary\" onClick={this.addTerm}>{gettext('Submit')}</Button>\n          </ModalFooter>\n        </Modal>\n        {this.state.isConditionsEditorDialogShow && (\n          <TermsEditorDialog\n            content={this.state.text}\n            onCommit={this.onUpdateContent}\n            onCloseEditorDialog={this.onCloseEditorDialog}\n          />\n        )}\n      </Fragment>\n    );\n  }\n}\n\nAddOrUpdateTermDialog.propTypes = propTypes;\n\nexport default AddOrUpdateTermDialog;\n","const hrefReg = /\\[.+\\]\\(\\S+\\)|<img src=(\\S+).+\\/>|!\\[\\]\\(\\S+\\)|<\\S+>/g,\n  imageReg1 = /^<img src=\"(\\S+)\" .+\\/>/,\n  imageReg2 = /^!\\[\\]\\((\\S+)\\)/,\n  linkReg1 = /^\\[.+\\]\\(\\S+\\)/,\n  linkReg2 = /^<\\S+>$/;\n\nconst getLinks = (hrefs) => {\n  const hrefObj = {\n    links: [],\n    images: []\n  };\n  hrefs.forEach((href) => {\n    if (href.search(linkReg1) >= 0 || href.search(linkReg2) >= 0) {\n      hrefObj.links.push(href);\n    } else {\n      let imageSrcs = href.match(imageReg1);\n      let imageSrcs1 = href.match(imageReg2);\n      if (imageSrcs) {\n        hrefObj.images.push(imageSrcs[1]);\n      } else if (imageSrcs1) {\n        hrefObj.images.push(imageSrcs1[1]);\n      }\n    }\n  });\n  return hrefObj;\n};\n\n\nconst getPreviewContent = (markdownContent) => {\n  let previewText = '';\n  let newMarkdownContent = markdownContent.replace(hrefReg, '');\n  for (let index = 0; index < newMarkdownContent.length; index++) {\n    if (newMarkdownContent[index] === '#') {\n      continue;\n    } else if (newMarkdownContent[index] === '\\n') {\n      previewText += ' ';\n    } else {\n      previewText += newMarkdownContent[index];\n    }\n    if (previewText.length === 30) {\n      break;\n    }\n  }\n\n  const hrefs = markdownContent.match(hrefReg);\n  if (hrefs) {\n    const { images, links } = getLinks(hrefs);\n    return { previewText, images, links };\n  }\n  return { previewText, images: [], links: [] };\n};\n\n\nexport default getPreviewContent;","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Modal, ModalHeader, ModalBody } from 'reactstrap';\nimport TermsPreviewWidget from '../terms-preview-widget';\nimport { gettext } from '../../utils/constants';\n\nconst propTypes = {\n  title: PropTypes.string,\n  content: PropTypes.string,\n  onClosePreviewDialog: PropTypes.func.isRequired,\n};\n\nclass TermsPreviewDialog extends React.Component {\n\n  static defaultProps = {\n    title: gettext('Terms'),\n  }\n\n\n  toggle = () => {\n    this.props.onClosePreviewDialog();\n  }\n\n  render() {\n    let { title, content } = this.props;\n    return (\n      <Modal\n        isOpen={true}\n        size={'lg'}\n        style={{width: 600}}\n        wrapClassName={'conditions-perview-wrapper'}\n        toggle={this.toggle}\n      >\n        <ModalHeader toggle={this.toggle}>{title}</ModalHeader>\n        <ModalBody>\n          <TermsPreviewWidget content={content} />\n        </ModalBody>\n      </Modal>\n    );\n  }\n}\n\nTermsPreviewDialog.propTypes = propTypes;\n\nexport default TermsPreviewDialog;\n","import React, { Component, Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport moment from 'moment';\nimport { processor } from '@seafile/seafile-editor/dist/utils/seafile-markdown2html';\nimport { gettext } from '../../../utils/constants';\nimport { Utils } from '../../../utils/utils';\nimport getPreviewContent from '../../../utils/markdown-utils';\nimport AddOrUpdateTermDialog from '../../../components/dialog/sysadmin-dialog/sysadmin-add-or-update-term-dialog';\nimport CommonOperationConfirmationDialog from '../../../components/dialog/common-operation-confirmation-dialog';\nimport TermsPerviewDialog from '../../../components/dialog/terms-preview-dialog';\nimport ModalPortal from '../../../components/modal-portal';\nimport OpMenu from '../../../components/dialog/op-menu';\n\nconst propsTypes = {\n  item: PropTypes.object.isRequired,\n  isItemFreezed: PropTypes.bool.isRequired,\n  onFreezedItem: PropTypes.func.isRequired,\n  onUnfreezedItem: PropTypes.func.isRequired,\n  deleteTerm: PropTypes.func.isRequired,\n  updateTerm: PropTypes.func.isRequired,\n};\n\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      itemContent: '...',\n      isOpIconShown: false,\n      isUpdateDialogOpen: false,\n      isDeleteDialogOpen: false,\n      isTermsPerviewDialogOpen: false,\n    };\n  }\n\n  componentDidMount() {\n    let mdFile = this.props.item.text;\n    processor.process(mdFile).then((result) => {\n      let innerHtml = String(result);\n      this.setState({itemContent: innerHtml});\n    });\n  }\n\n  componentWillReceiveProps(nextProps) {\n    if (nextProps.item.text !== this.props.item.text) {\n      let mdFile = nextProps.item.text;\n      processor.process(mdFile).then((result) => {\n        let innerHtml = String(result);\n        this.setState({itemContent: innerHtml});\n      });\n    }\n  }\n\n  handleMouseEnter = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        isOpIconShown: true,\n        highlight: true\n      });\n    }\n  }\n\n  handleMouseLeave = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        isOpIconShown: false,\n        highlight: false\n      });\n    }\n  }\n\n  toggleUpdateDialog = (e) => {\n    this.setState({isUpdateDialogOpen: !this.state.isUpdateDialogOpen});\n  }\n\n  toggleDeleteDialog = (e) => {\n    this.setState({isDeleteDialogOpen: !this.state.isDeleteDialogOpen});\n  }\n\n  toggleTermsContentDialog = (e) => {\n    this.setState({isTermsPerviewDialogOpen: !this.state.isTermsPerviewDialogOpen});\n  }\n\n  onMenuItemClick = (operation) => {\n    switch(operation) {\n      case 'Update':\n        this.toggleUpdateDialog();\n        break;\n      case 'Delete':\n        this.toggleDeleteDialog();\n        break;\n    }\n  }\n\n  onUnfreezedItem = () => {\n    this.setState({\n      highlight: false,\n      isOpIconShow: false\n    });\n    this.props.onUnfreezedItem();\n  }\n\n  deleteTerm = () => {\n    this.props.deleteTerm(this.props.item.id);\n    this.toggleDeleteDialog();\n  }\n\n  updateTerm = (name, versionNumber, text, isActive) => {\n    this.props.updateTerm(this.props.item.id, name, versionNumber, text, isActive);\n    this.toggleUpdateDialog();\n  }\n\n  translateOperations = (item) => {\n    let translateResult = '';\n    switch(item) {\n      case 'Update':\n        translateResult = gettext('Update');\n        break;\n      case 'Delete':\n        translateResult = gettext('Delete');\n        break;\n      default:\n        break;\n    }\n\n    return translateResult;\n  }\n\n  render() {\n    let { item } = this.props;\n    let { isDeleteDialogOpen, isUpdateDialogOpen, isTermsPerviewDialogOpen } = this.state;\n    let previewContent = getPreviewContent(item.text);\n    let itemName = '<span class=\"op-target\">' + Utils.HTMLescape(item.name) + '</span>';\n    let deleteDialogMsg = gettext('Are you sure you want to delete {placeholder} ?').replace('{placeholder}', itemName);\n    return (\n      <Fragment>\n        <tr onMouseEnter={this.handleMouseEnter} onMouseLeave={this.handleMouseLeave}>\n          <td>{item.name}</td>\n          <td>{item.version_number}</td>\n          <td className=\"ellipsis\">\n            <a href='#' onClick={this.toggleTermsContentDialog}>{previewContent.previewText}</a>\n          </td>\n          <td>{moment(item.ctime).fromNow()}</td>\n          <td>{item.activate_time ? moment(item.activate_time).fromNow() : '--'}</td>\n          <td>\n            {this.state.isOpIconShown &&\n              <OpMenu\n                operations={['Update', 'Delete']}\n                translateOperations={this.translateOperations}\n                onMenuItemClick={this.onMenuItemClick}\n                onFreezedItem={this.props.onFreezedItem}\n                onUnfreezedItem={this.onUnfreezedItem}\n              />\n            }\n          </td>\n        </tr>\n        {isDeleteDialogOpen &&\n          <ModalPortal>\n            <CommonOperationConfirmationDialog\n              title={gettext('Delete T&C')}\n              message={deleteDialogMsg}\n              toggleDialog={this.toggleDeleteDialog}\n              executeOperation={this.deleteTerm}\n              confirmBtnText={gettext('Delete')}\n            />\n          </ModalPortal>\n        }\n        {isUpdateDialogOpen &&\n          <ModalPortal>\n            <AddOrUpdateTermDialog\n              updateTerm={this.updateTerm}\n              toggle={this.toggleUpdateDialog}\n              isUpdate={true}\n              oldTermObj={item}\n            />\n          </ModalPortal>\n        }\n        {isTermsPerviewDialogOpen &&\n          <ModalPortal>\n            <TermsPerviewDialog\n              content={item.text}\n              onClosePreviewDialog={this.toggleTermsContentDialog}\n            />\n          </ModalPortal>\n        }\n      </Fragment>\n    );\n  }\n}\n\nItem.propTypes = propsTypes;\n\nexport default Item;\n","import React, { Component, Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../../../utils/constants';\nimport EmptyTip from '../../../components/empty-tip';\nimport Loading from '../../../components/loading';\nimport Item from './item';\n\nconst propTypes = {\n  loading: PropTypes.bool.isRequired,\n  items: PropTypes.array.isRequired,\n  errorMsg: PropTypes.string,\n  deleteTerm: PropTypes.func.isRequired,\n  updateTerm: PropTypes.func.isRequired,\n};\n\nclass Content extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isItemFreezed: false\n    };\n  }\n\n  onFreezedItem = () => {\n    this.setState({isItemFreezed: true});\n  }\n\n  onUnfreezedItem = () => {\n    this.setState({isItemFreezed: false});\n  }\n\n  render() {\n    const { loading, errorMsg, items } = this.props;\n    if (loading) {\n      return <Loading />;\n    } else if (errorMsg) {\n      return <p className=\"error text-center\">{errorMsg}</p>;\n    } else {\n      const emptyTip = (\n        <EmptyTip>\n          <h2>{gettext('No terms and conditions')}</h2>\n        </EmptyTip>\n      );\n      const table = (\n        <Fragment>\n          <table className=\"table-hover\">\n            <thead>\n              <tr>\n                <th width=\"20%\">{gettext('Name')}</th>\n                <th width=\"10%\">{gettext('Version')}</th>\n                <th width=\"25%\">{gettext('Text')}</th>\n                <th width=\"20%\">{gettext('Created')}</th>\n                <th width=\"20%\">{gettext('Activated')}</th>\n                <th width=\"5%\">{/* operation */}</th>\n              </tr>\n            </thead>\n            {items &&\n              <tbody>\n                {items.map((item, index) => {\n                  return (<Item\n                    key={index}\n                    item={item}\n                    isItemFreezed={this.state.isItemFreezed}\n                    onFreezedItem={this.onFreezedItem}\n                    onUnfreezedItem={this.onUnfreezedItem}\n                    deleteTerm={this.props.deleteTerm}\n                    updateTerm={this.props.updateTerm}\n                  />);\n                })}\n              </tbody>\n            }\n          </table>\n        </Fragment>\n      );\n      return items.length ? table : emptyTip;\n    }\n  }\n}\n\nContent.propTypes = propTypes;\n\nexport default Content;\n\n","import React, { Component, Fragment } from 'react';\nimport { Button } from 'reactstrap';\nimport { Utils } from '../../../utils/utils';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { gettext } from '../../../utils/constants';\nimport AddOrUpdateTermDialog from '../../../components/dialog/sysadmin-dialog/sysadmin-add-or-update-term-dialog';\nimport ModalPortal from '../../../components/modal-portal';\nimport toaster from '../../../components/toast';\nimport MainPanelTopbar from '../main-panel-topbar';\nimport Content from './content';\n\nclass TermsAndConditions extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      termList: [],\n      isAddTermDialogOpen: false,\n    };\n  }\n\n  toggleAddTermDialog = () => {\n    this.setState({isAddTermDialogOpen: !this.state.isAddTermDialogOpen});\n  }\n\n  componentDidMount () {\n    seafileAPI.sysAdminListTermsAndConditions().then((res) => {\n      this.setState({\n        termList: res.data.term_and_condition_list,\n        loading: false,\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  addTerm = (name, versionNumber, text, isActive) => {\n    seafileAPI.sysAdminAddTermAndCondition(name, versionNumber, text, isActive).then(res => {\n      // After adding the terms, you need to refresh the page.\n      location.reload();\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  updateTerm = (termID, name, versionNumber, text, isActive) => {\n    seafileAPI.sysAdminUpdateTermAndCondition(termID, name, versionNumber, text, isActive).then(res => {\n      let termList = this.state.termList.map(item => {\n        if (item.id == termID) {\n          return res.data;\n        } else {\n          return item;\n        }\n      });\n      this.setState({termList: termList});\n      toaster.success(gettext('Update succeeded.'));\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  deleteTerm = (termID) => {\n    seafileAPI.sysAdminDeleteTermAndCondition(termID).then(res => {\n      let termList = this.state.termList.filter(item => item.id != termID);\n      this.setState({termList: termList});\n      toaster.success(gettext('Successfully deleted 1 item.'));\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  render() {\n    let { termList, isAddTermDialogOpen } = this.state;\n    return (\n      <Fragment>\n        <MainPanelTopbar>\n          <Button className=\"btn btn-secondary operation-item\" onClick={this.toggleAddTermDialog}>{gettext('Add')}</Button>\n        </MainPanelTopbar>\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <div className=\"cur-view-path\">\n              <h3 className=\"sf-heading\">{gettext('Terms and Conditions')}</h3>\n            </div>\n            <div className=\"cur-view-content\">\n              <Content\n                loading={this.state.loading}\n                errorMsg={this.state.errorMsg}\n                items={termList}\n                deleteTerm={this.deleteTerm}\n                updateTerm={this.updateTerm}\n              />\n            </div>\n          </div>\n        </div>\n        {isAddTermDialogOpen &&\n        <ModalPortal>\n          <AddOrUpdateTermDialog\n            isUpdate={false}\n            addTerm={this.addTerm}\n            toggle={this.toggleAddTermDialog}\n          />\n        </ModalPortal>\n        }\n      </Fragment>\n    );\n  }\n}\n\nexport default TermsAndConditions;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Link } from '@reach/router';\nimport { siteRoot, gettext } from '../../../utils/constants';\n\nconst propTypes = {\n  currentItem: PropTypes.string.isRequired\n};\n\nclass Nav extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.navItems = [\n      {name: 'all', urlPart: 'all', text: gettext('All')},\n      {name: 'unhandled', urlPart: 'unhandled', text: gettext('Unhandled')}\n    ];\n  }\n\n  render() {\n    const { currentItem } = this.props;\n    return (\n      <div className=\"cur-view-path tab-nav-container\">\n        <ul className=\"nav\">\n          {this.navItems.map((item, index) => {\n            return (\n              <li className=\"nav-item\" key={index}>\n                <Link to={`${siteRoot}sys/virus-files/${item.urlPart}/`} className={`nav-link${currentItem == item.name ? ' active' : ''}`}>{item.text}</Link>\n              </li>\n            );\n          })}\n        </ul>\n      </div>\n    );\n  }\n}\n\nNav.propTypes = propTypes;\n\nexport default Nav;\n","import React, { Component, Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { gettext } from '../../../utils/constants';\nimport { Utils } from '../../../utils/utils';\nimport toaster from '../../../components/toast';\nimport OpMenu from '../../../components/dialog/op-menu';\nimport Loading from '../../../components/loading';\nimport Paginator from '../../../components/paginator';\nimport MainPanelTopbar from '../main-panel-topbar';\nimport Nav from './nav';\n\nconst virusFileItemPropTypes = {\n  virusFile: PropTypes.object.isRequired,\n  isItemFreezed: PropTypes.bool.isRequired,\n  onFreezedItem: PropTypes.func.isRequired,\n  onUnfreezedItem: PropTypes.func.isRequired\n};\n\nclass VirusFileItem extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      highlight: false,\n      isOpIconShown: false\n    };\n  }\n\n  handleMouseEnter = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        isOpIconShown: true,\n        highlight: true\n      });\n    }\n  }\n\n  handleMouseLeave = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        isOpIconShown: false,\n        highlight: false\n      });\n    }\n  }\n\n  onUnfreezedItem = () => {\n    this.setState({\n      highlight: false,\n      isOpIconShow: false\n    });\n    this.props.onUnfreezedItem();\n  }\n\n  onMenuItemClick = (operation) => {\n    this.props.handleFile(this.props.virusFile.virus_id, operation);\n  }\n\n  translateOperations = (item) => {\n    let translateResult = '';\n    switch(item) {\n      case 'delete':\n        translateResult = gettext('Delete');\n        break;\n      case 'ignore':\n        translateResult = gettext('Ignore');\n        break;\n      case 'do-not-ignore':\n        translateResult = gettext('Don\\'t ignore');\n        break;\n    }\n    return translateResult;\n  }\n\n  render() {\n    const virusFile = this.props.virusFile;\n    let fileStatus = '',\n      fileOpList = [];\n    if (virusFile.has_deleted) {\n      fileStatus = <span className=\"text-green\">{gettext('Deleted')}</span>;\n    } else if (virusFile.has_ignored) {\n      fileStatus = <span className=\"text-orange\">{gettext('Ignored')}</span>;\n      fileOpList = ['do-not-ignore'];\n    } else {\n      fileStatus = <span className=\"text-red\">{gettext('Unhandled')}</span>;\n      fileOpList = ['delete', 'ignore'];\n    }\n\n    return (\n      <tr className={this.state.highlight ? 'tr-highlight' : ''} onMouseEnter={this.handleMouseEnter} onMouseLeave={this.handleMouseLeave}>\n        <td>{virusFile.repo_name}</td>\n        <td>{virusFile.repo_owner}</td>\n        <td>{virusFile.file_path}</td>\n        <td>{fileStatus}</td>\n        <td>\n          {fileOpList.length > 0 && this.state.isOpIconShown &&\n            <OpMenu\n              operations={fileOpList}\n              translateOperations={this.translateOperations}\n              onMenuItemClick={this.onMenuItemClick}\n              onFreezedItem={this.props.onFreezedItem}\n              onUnfreezedItem={this.onUnfreezedItem}\n            />\n          }\n        </td>\n      </tr>\n    );\n  }\n}\n\nVirusFileItem.propTypes = virusFileItemPropTypes;\n\n\nconst virusFileListPropTypes = {\n  loading: PropTypes.bool.isRequired,\n  errorMsg: PropTypes.string.isRequired,\n  virusFiles: PropTypes.array.isRequired\n};\n\nclass Content extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isItemFreezed: false\n    };\n  }\n\n  onFreezedItem = () => {\n    this.setState({isItemFreezed: true});\n  }\n\n  onUnfreezedItem = () => {\n    this.setState({isItemFreezed: false});\n  }\n\n  getPreviousPage = () => {\n    this.props.getListByPage(this.props.currentPage - 1);\n  }\n\n  getNextPage = () => {\n    this.props.getListByPage(this.props.currentPage + 1);\n  }\n\n  render() {\n    const {\n      loading, errorMsg, virusFiles,\n      curPerPage, hasNextPage, currentPage\n    } = this.props;\n\n    if (loading) {\n      return <Loading />;\n    } else if (errorMsg) {\n      return <p className=\"error text-center mt-4\">{errorMsg}</p>;\n    } else {\n      return (\n        <Fragment>\n          <table>\n            <thead>\n              <tr>\n                <th width=\"27%\">{gettext('Library')}</th>\n                <th width=\"25%\">{gettext('Owner')}</th>\n                <th width=\"28%\">{gettext('Virus File')}</th>\n                <th width=\"15%\">{gettext('Status')}</th>\n                <th width=\"5%\">{/* Operations */}</th>\n              </tr>\n            </thead>\n            <tbody>\n              {virusFiles.map((virusFile, index) => {\n                return (\n                  <VirusFileItem\n                    key={index}\n                    virusFile={virusFile}\n                    isItemFreezed={this.state.isItemFreezed}\n                    onFreezedItem={this.onFreezedItem}\n                    onUnfreezedItem={this.onUnfreezedItem}\n                    handleFile={this.props.handleFile}\n                  />\n                );\n              })}\n            </tbody>\n          </table>\n          {virusFiles.length > 0 &&\n          <Paginator\n            gotoPreviousPage={this.getPreviousPage}\n            gotoNextPage={this.getNextPage}\n            currentPage={currentPage}\n            hasNextPage={hasNextPage}\n            curPerPage={curPerPage}\n            resetPerPage={this.props.resetPerPage}\n          />\n          }\n        </Fragment>\n      );\n    }\n  }\n}\n\nContent.propTypes = virusFileListPropTypes;\n\n\nclass AllVirusFiles extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      virusFiles: [],\n      currentPage: 1,\n      perPage: 25,\n      hasNextPage: false\n    };\n  }\n\n  componentDidMount() {\n    let urlParams = (new URL(window.location)).searchParams;\n    const {\n      currentPage, perPage\n    } = this.state;\n    this.setState({\n      perPage: parseInt(urlParams.get('per_page') || perPage),\n      currentPage: parseInt(urlParams.get('page') || currentPage)\n    }, () => {\n      this.getListByPage(this.state.currentPage);\n    });\n  }\n\n  getListByPage = (page) => {\n    const { perPage } = this.state;\n    seafileAPI.listVirusFiles(page, perPage).then((res) => {\n      const data = res.data;\n      this.setState({\n        loading: false,\n        virusFiles: data.virus_file_list,\n        hasNextPage: data.has_next_page\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  resetPerPage = (perPage) => {\n    this.setState({\n      perPage: perPage\n    }, () => {\n      this.getListByPage(1);\n    });\n  }\n\n  handleFile = (virusID, op) => {\n    let request;\n    switch(op) {\n      case 'delete':\n        request = seafileAPI.deleteVirusFile(virusID);\n        break;\n      case 'ignore':\n        request = seafileAPI.toggleIgnoreVirusFile(virusID, true);\n        break;\n      case 'do-not-ignore':\n        request = seafileAPI.toggleIgnoreVirusFile(virusID, false);\n        break;\n    }\n    request.then((res) => {\n      this.setState({\n        virusFiles: this.state.virusFiles.map((item) => {\n          if (item.virus_id == virusID) {\n            if (op == 'delete') {\n              item.has_deleted = true;\n            } else {\n              item = res.data.virus_file;\n            }\n          }\n          return item;\n        })\n      });\n    }).catch((error) => {\n      toaster.danger(Utils.getErrorMsg(error));\n    });\n  }\n\n  render() {\n    return (\n      <Fragment>\n        <MainPanelTopbar />\n        <div className=\"main-panel-center\">\n          <div className=\"cur-view-container\">\n            <Nav currentItem=\"all\" />\n            <div className=\"cur-view-content\">\n              <Content\n                loading={this.state.loading}\n                errorMsg={this.state.errorMsg}\n                virusFiles={this.state.virusFiles}\n                currentPage={this.state.currentPage}\n                hasNextPage={this.state.hasNextPage}\n                curPerPage={this.state.perPage}\n                resetPerPage={this.resetPerPage}\n                getListByPage={this.getListByPage}\n                handleFile={this.handleFile}\n              />\n            </div>\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nexport default AllVirusFiles;\n","import React, { Component, Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Button } from 'reactstrap';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { gettext } from '../../../utils/constants';\nimport { Utils } from '../../../utils/utils';\nimport toaster from '../../../components/toast';\nimport OpMenu from '../../../components/dialog/op-menu';\nimport Loading from '../../../components/loading';\nimport Paginator from '../../../components/paginator';\nimport MainPanelTopbar from '../main-panel-topbar';\nimport Nav from './nav';\n\nconst virusFileItemPropTypes = {\n  virusFile: PropTypes.object.isRequired,\n  isItemFreezed: PropTypes.bool.isRequired,\n  onFreezedItem: PropTypes.func.isRequired,\n  onUnfreezedItem: PropTypes.func.isRequired\n};\n\nclass VirusFileItem extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      highlight: false,\n      isOpIconShown: false\n    };\n  }\n\n  handleMouseEnter = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        isOpIconShown: true,\n        highlight: true\n      });\n    }\n  }\n\n  handleMouseLeave = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        isOpIconShown: false,\n        highlight: false\n      });\n    }\n  }\n\n  onUnfreezedItem = () => {\n    this.setState({\n      highlight: false,\n      isOpIconShow: false\n    });\n    this.props.onUnfreezedItem();\n  }\n\n  onMenuItemClick = (operation) => {\n    this.props.handleFile(this.props.virusFile.virus_id, operation);\n  }\n\n  translateOperations = (item) => {\n    let translateResult = '';\n    switch(item) {\n      case 'delete':\n        translateResult = gettext('Delete');\n        break;\n      case 'ignore':\n        translateResult = gettext('Ignore');\n        break;\n      case 'do-not-ignore':\n        translateResult = gettext('Don\\'t ignore');\n        break;\n    }\n    return translateResult;\n  }\n\n  toggleItemSelected = (e) => {\n    this.props.toggleItemSelected(this.props.virusFile, e.target.checked);\n  }\n\n  render() {\n    const virusFile = this.props.virusFile;\n    let fileStatus = '',\n      fileOpList = [];\n    if (virusFile.has_deleted) {\n      fileStatus = <span className=\"text-green\">{gettext('Deleted')}</span>;\n    } else if (virusFile.has_ignored) {\n      fileStatus = <span className=\"text-orange\">{gettext('Ignored')}</span>;\n      fileOpList = ['do-not-ignore'];\n    } else {\n      fileStatus = <span className=\"text-red\">{gettext('Unhandled')}</span>;\n      fileOpList = ['delete', 'ignore'];\n    }\n\n    return (\n      <tr className={this.state.highlight ? 'tr-highlight' : ''} onMouseEnter={this.handleMouseEnter} onMouseLeave={this.handleMouseLeave}>\n        <td className=\"text-center\">\n          <input type=\"checkbox\" checked={virusFile.isSelected} onChange={this.toggleItemSelected} />\n        </td>\n        <td>{virusFile.repo_name}</td>\n        <td>{virusFile.repo_owner}</td>\n        <td>{virusFile.file_path}</td>\n        <td>{fileStatus}</td>\n        <td>\n          {fileOpList.length > 0 && this.state.isOpIconShown &&\n            <OpMenu\n              operations={fileOpList}\n              translateOperations={this.translateOperations}\n              onMenuItemClick={this.onMenuItemClick}\n              onFreezedItem={this.props.onFreezedItem}\n              onUnfreezedItem={this.onUnfreezedItem}\n            />\n          }\n        </td>\n      </tr>\n    );\n  }\n}\n\nVirusFileItem.propTypes = virusFileItemPropTypes;\n\n\nconst virusFileListPropTypes = {\n  loading: PropTypes.bool.isRequired,\n  errorMsg: PropTypes.string.isRequired,\n  virusFiles: PropTypes.array.isRequired\n};\n\nclass Content extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isItemFreezed: false\n    };\n  }\n\n  onFreezedItem = () => {\n    this.setState({isItemFreezed: true});\n  }\n\n  onUnfreezedItem = () => {\n    this.setState({isItemFreezed: false});\n  }\n\n  getPreviousPage = () => {\n    this.props.getListByPage(this.props.currentPage - 1);\n  }\n\n  getNextPage = () => {\n    this.props.getListByPage(this.props.currentPage + 1);\n  }\n\n  render() {\n    const {\n      loading, errorMsg, virusFiles,\n      curPerPage, hasNextPage, currentPage,\n      isAllItemsSelected\n    } = this.props;\n\n    if (loading) {\n      return <Loading />;\n    } else if (errorMsg) {\n      return <p className=\"error text-center mt-4\">{errorMsg}</p>;\n    } else {\n      return (\n        <Fragment>\n          <table>\n            <thead>\n              <tr>\n                <th width=\"3%\" className=\"text-center\">\n                  <input type=\"checkbox\" checked={isAllItemsSelected} onChange={this.props.toggleAllSelected} />\n                </th>\n                <th width=\"24%\">{gettext('Library')}</th>\n                <th width=\"25%\">{gettext('Owner')}</th>\n                <th width=\"28%\">{gettext('Virus File')}</th>\n                <th width=\"15%\">{gettext('Status')}</th>\n                <th width=\"5%\">{/* Operations */}</th>\n              </tr>\n            </thead>\n            <tbody>\n              {virusFiles.map((virusFile, index) => {\n                return (\n                  <VirusFileItem\n                    key={index}\n                    virusFile={virusFile}\n                    isItemFreezed={this.state.isItemFreezed}\n                    onFreezedItem={this.onFreezedItem}\n                    onUnfreezedItem={this.onUnfreezedItem}\n                    handleFile={this.props.handleFile}\n                    toggleItemSelected={this.props.toggleItemSelected}\n                  />\n                );\n              })}\n            </tbody>\n          </table>\n          {virusFiles.length > 0 &&\n          <Paginator\n            gotoPreviousPage={this.getPreviousPage}\n            gotoNextPage={this.getNextPage}\n            currentPage={currentPage}\n            hasNextPage={hasNextPage}\n            curPerPage={curPerPage}\n            resetPerPage={this.props.resetPerPage}\n          />\n          }\n        </Fragment>\n      );\n    }\n  }\n}\n\nContent.propTypes = virusFileListPropTypes;\n\n\nclass UnhandledVirusFiles extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      virusFiles: [],\n\n      isAllItemsSelected: false,\n      selectedItems: [],\n\n      currentPage: 1,\n      perPage: 25,\n      hasNextPage: false\n    };\n  }\n\n  componentDidMount() {\n    let urlParams = (new URL(window.location)).searchParams;\n    const {\n      currentPage, perPage\n    } = this.state;\n    this.setState({\n      perPage: parseInt(urlParams.get('per_page') || perPage),\n      currentPage: parseInt(urlParams.get('page') || currentPage)\n    }, () => {\n      this.getListByPage(this.state.currentPage);\n    });\n  }\n\n  getListByPage = (page) => {\n    const { perPage } = this.state;\n    const hasHandled = false;\n    seafileAPI.listVirusFiles(page, perPage, hasHandled).then((res) => {\n      const data = res.data;\n      const items = data.virus_file_list.map(item => {\n        item.isSelected = false;\n        return item;\n      });\n      this.setState({\n        loading: false,\n        virusFiles: items,\n        hasNextPage: data.has_next_page\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  resetPerPage = (perPage) => {\n    this.setState({\n      perPage: perPage\n    }, () => {\n      this.getListByPage(1);\n    });\n  }\n\n  handleFile = (virusID, op) => {\n    let request;\n    switch(op) {\n      case 'delete':\n        request = seafileAPI.deleteVirusFile(virusID);\n        break;\n      case 'ignore':\n        request = seafileAPI.toggleIgnoreVirusFile(virusID, true);\n        break;\n      case 'do-not-ignore':\n        request = seafileAPI.toggleIgnoreVirusFile(virusID, false);\n        break;\n    }\n    request.then((res) => {\n      this.setState({\n        virusFiles: this.state.virusFiles.map((item) => {\n          if (item.virus_id == virusID) {\n            if (op == 'delete') {\n              item.has_deleted = true;\n            } else {\n              item = res.data.virus_file;\n            }\n          }\n          return item;\n        })\n      });\n    }).catch((error) => {\n      toaster.danger(Utils.getErrorMsg(error));\n    });\n  }\n\n  toggleAllSelected = () => {\n    this.setState((prevState) => ({\n      isAllItemsSelected: !prevState.isAllItemsSelected,\n      virusFiles: this.state.virusFiles.map((item) => {\n        item.isSelected = !prevState.isAllItemsSelected;\n        return item;\n      })\n    }));\n  }\n\n  toggleItemSelected = (targetItem, isSelected) => {\n    this.setState({\n      virusFiles: this.state.virusFiles.map((item) => {\n        if (item === targetItem) {\n          item.isSelected = isSelected;\n        }\n        return item;\n      })\n    }, () => {\n      this.setState({\n        isAllItemsSelected: !this.state.virusFiles.some(item => !item.isSelected)\n      });\n    });\n  }\n\n  handleSelectedItems = (op) => {\n    // op: 'delete-virus', 'ignore-virus'\n    const virusIDs = this.state.virusFiles\n      .filter(item => {\n        if (op == 'delete-virus') {\n          return item.isSelected && !item.has_deleted;\n        } else {\n          return item.isSelected && !item.has_ignored;\n        }\n      })\n      .map(item => item.virus_id);\n    seafileAPI.batchProcessVirusFiles(virusIDs, op).then((res) => {\n      let fileList = this.state.virusFiles;\n      res.data.success.forEach(item => {\n        let file = fileList.find(file => file.virus_id == item.virus_id);\n        if (op == 'delete-virus') {\n          file.has_deleted = true;\n        } else {\n          file.has_ignored = true;\n        }\n      });\n      this.setState({\n        virusFiles: fileList\n      });\n\n      res.data.failed.forEach(item => {\n        const file = fileList.find(file => file.virus_id == item.virus_id);\n        let errMsg = op == 'delete-virus' ?\n          gettext('Failed to delete %(virus_file) from library %(library): %(error_msg)') :\n          gettext('Failed to ignore %(virus_file) from library %(library): %(error_msg)');\n        errMsg = errMsg.replace('%(virus_file)', file.file_path)\n          .replace('%(library)', file.repo_name)\n          .replace('%(error_msg)', item.error_msg);\n        toaster.danger(errMsg);\n      });\n    }).catch((error) => {\n      toaster.danger(Utils.getErrorMsg(error));\n    });\n  }\n\n  deleteSelectedItems = () => {\n    const op = 'delete-virus';\n    this.handleSelectedItems(op);\n  }\n\n  ignoreSelectedItems = () => {\n    const op = 'ignore-virus';\n    this.handleSelectedItems(op);\n  }\n\n  render() {\n    return (\n      <Fragment>\n        {this.state.virusFiles.some(item => item.isSelected) ? (\n          <MainPanelTopbar>\n            <Fragment>\n              <Button onClick={this.deleteSelectedItems} className=\"operation-item\">{gettext('Delete')}</Button>\n              <Button onClick={this.ignoreSelectedItems} className=\"operation-item\">{gettext('Ignore')}</Button>\n            </Fragment>\n          </MainPanelTopbar>\n        ) : <MainPanelTopbar />\n        }\n        <div className=\"main-panel-center\">\n          <div className=\"cur-view-container\">\n            <Nav currentItem=\"unhandled\" />\n            <div className=\"cur-view-content\">\n              <Content\n                loading={this.state.loading}\n                errorMsg={this.state.errorMsg}\n                virusFiles={this.state.virusFiles}\n                currentPage={this.state.currentPage}\n                hasNextPage={this.state.hasNextPage}\n                curPerPage={this.state.perPage}\n                resetPerPage={this.resetPerPage}\n                getListByPage={this.getListByPage}\n                handleFile={this.handleFile}\n                isAllItemsSelected={this.state.isAllItemsSelected}\n                toggleAllSelected={this.toggleAllSelected}\n                toggleItemSelected={this.toggleItemSelected}\n              />\n            </div>\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nexport default UnhandledVirusFiles;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Link } from '@reach/router';\nimport { siteRoot, gettext } from '../../../utils/constants';\n\nconst propTypes = {\n  currentItem: PropTypes.string.isRequired\n};\n\nclass LogsNav extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.navItems = [\n      {name: 'adminOperationLogs', urlPart:'admin-logs/operation', text: gettext('Admin Operation Logs')},\n      {name: 'adminLoginLogs', urlPart:'admin-logs/login', text: gettext('Admin Login Logs')},\n    ];\n  }\n\n  render() {\n    const { currentItem } = this.props;\n    return (\n      <div className=\"cur-view-path tab-nav-container\">\n        <ul className=\"nav\">\n          {this.navItems.map((item, index) => {\n            return (\n              <li className=\"nav-item\" key={index}>\n                <Link to={`${siteRoot}sys/${item.urlPart}/`} className={`nav-link${currentItem == item.name ? ' active' : ''}`}>{item.text}</Link>\n              </li>\n            );\n          })}\n        </ul>\n      </div>\n    );\n  }\n}\n\nLogsNav.propTypes = propTypes;\n\nexport default LogsNav;\n","import React, { Component, Fragment } from 'react';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { gettext, siteRoot, enableSysAdminViewRepo, isPro } from '../../../utils/constants';\nimport { Utils } from '../../../utils/utils';\nimport EmptyTip from '../../../components/empty-tip';\nimport moment from 'moment';\nimport Loading from '../../../components/loading';\nimport Paginator from '../../../components/paginator';\nimport LogsNav from './logs-nav';\nimport MainPanelTopbar from '../main-panel-topbar';\nimport UserLink from '../user-link';\n\nclass Content extends Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  getPreviousPage = () => {\n    this.props.getLogsByPage(this.props.currentPage - 1);\n  }\n\n  getNextPage = () => {\n    this.props.getLogsByPage(this.props.currentPage + 1);\n  }\n\n  render() {\n    const { loading, errorMsg, items, perPage, currentPage, hasNextPage } = this.props;\n    if (loading) {\n      return <Loading />;\n    } else if (errorMsg) {\n      return <p className=\"error text-center\">{errorMsg}</p>;\n    } else {\n      const emptyTip = (\n        <EmptyTip>\n          <h2>{gettext('No Admin operation logs')}</h2>\n        </EmptyTip>\n      );\n      const table = (\n        <Fragment>\n          <table className=\"table-hover\">\n            <thead>\n              <tr>\n                <th width=\"20%\">{gettext('Name')}</th>\n                <th width=\"15%\">{gettext('Operation')}</th>\n                <th width=\"50%\">{gettext('Detail')}</th>\n                <th width=\"15%\">{gettext('Time')}</th>\n              </tr>\n            </thead>\n            {items &&\n              <tbody>\n                {items.map((item, index) => {\n                  return (<Item\n                    key={index}\n                    item={item}\n                  />);\n                })}\n              </tbody>\n            }\n          </table>\n          <Paginator\n            gotoPreviousPage={this.getPreviousPage}\n            gotoNextPage={this.getNextPage}\n            currentPage={currentPage}\n            hasNextPage={hasNextPage}\n            curPerPage={perPage}\n            resetPerPage={this.props.resetPerPage}\n          />\n        </Fragment>\n      );\n      return items.length ? table : emptyTip;\n    }\n  }\n}\n\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOpIconShown: false,\n    };\n  }\n\n  getOperationText = (operationType) => {\n    switch (operationType) {\n      case 'repo_create': return gettext('Create Library');\n      case 'repo_delete': return gettext('Delete Library');\n      case 'repo_transfer': return gettext('Transfer Library');\n      case 'group_create': return gettext('Create Group');\n      case 'group_transfer': return gettext('Transfer Group');\n      case 'group_delete': return gettext('Delete Group');\n      case 'user_add': return gettext('Add User');\n      case 'user_delete': return gettext('Delete User');\n      default: return '';\n    }\n  }\n\n  getOperationDetail = (item) => {\n    let detail = item.detail;\n\n    let ownerPageUrl = '';\n    if (detail.owner) {\n      ownerPageUrl = siteRoot + 'sys/users/' + encodeURIComponent(detail.owner) + '/';\n    }\n    let userPageUrl = '';\n    if (detail.email) {\n      userPageUrl = siteRoot + 'sys/users/' + encodeURIComponent(detail.email) + '/';\n    }\n    let detailText = '';\n    let repoPageUrl = '';\n    let groupPageUrl = '';\n    if (item.operation == 'repo_create' || item.operation == 'repo_delete' || item.operation == 'repo_transfer') {\n      repoPageUrl = siteRoot + 'sys/libraries/' + detail.id + '/' + encodeURIComponent(detail.name) + '/';\n    }\n    if (item.operation == 'group_create' || item.operation == 'group_delete' || item.operation == 'group_transfer') {\n      groupPageUrl = siteRoot + 'sys/groups/' + detail.id + '/libraries/';\n    }\n\n    switch (item.operation) {\n      case 'repo_create':\n        detailText = gettext('Created library {library_name} with {owner} as its owner')\n          .replace('{owner}', '<a href=\"' + ownerPageUrl + '\">' + detail.owner + '</a>');\n        if (isPro && enableSysAdminViewRepo) {\n          detailText = detailText.replace('{library_name}', '<a href=\"' + repoPageUrl + '\">' + detail.name + '</a>');\n        } else {\n          detailText = detailText.replace('{library_name}', '<span class=\"font-weight-bold\">' + detail.name + '</span>');\n        }\n        return detailText;\n\n      case 'repo_delete':\n        detailText = gettext('Deleted library {library_name}')\n          .replace('{library_name}', '<span class=\"font-weight-bold\">' + detail.name + '</span>');\n        return detailText;\n\n      case 'repo_transfer':\n        detailText = gettext('Transferred library {library_name} from {user_from} to {user_to}')\n          .replace('{user_from}', '<span class=\"font-weight-bold\">' + detail.from + '</span>')\n          .replace('{user_to}', '<span class=\"font-weight-bold\">' + detail.to+ '</span>');\n        if (isPro && enableSysAdminViewRepo) {\n          detailText = detailText.replace('{library_name}', '<a href=\"' + repoPageUrl + '\">' + detail.name + '</a>');\n        } else {\n          detailText = detailText.replace('{library_name}', '<span class=\"font-weight-bold\">' + detail.name + '</span>');\n        }\n        return detailText;\n\n      case 'group_create':\n        detailText = gettext('Created group {group_name}')\n          .replace('{group_name}', '<a href=\"' + groupPageUrl + '\">' + detail.name+ '</a>');\n        return detailText;\n\n      case 'group_transfer':\n        detailText = gettext('Transferred group {group_name} from {user_from} to {user_to}')\n          .replace('{user_from}', '<span class=\"font-weight-bold\">' + detail.from + '</span>')\n          .replace('{user_to}', '<span class=\"font-weight-bold\">' + detail.to+ '</span>')\n          .replace('{group_name}', '<a href=\"' + groupPageUrl + '\">' + detail.name+ '</a>');\n        return detailText;\n\n      case 'group_delete':\n        detailText = gettext('Deleted group {group_name}')\n          .replace('{group_name}', '<span class=\"font-weight-bold\">' + detail.name + '</span>');\n        return detailText;\n\n      case 'user_add':\n        detailText = gettext('Added user {user}')\n          .replace('{user}', '<a href=\"' + userPageUrl + '\">' + detail.email+ '</a>');\n        return detailText;\n\n      case 'user_delete':\n        detailText = gettext('Deleted user {user}')\n          .replace('{user}', '<span class=\"font-weight-bold\">' + detail.email+ '</span>');\n        return detailText;\n\n      default: return '';\n    }\n  }\n\n  render() {\n    let { item } = this.props;\n    return (\n      <tr onMouseOver={this.handleMouseOver} onMouseOut={this.handleMouseOut}>\n        <td><UserLink email={item.email} name={item.name} /></td>\n        <td>{this.getOperationText(item.operation)}</td>\n        <td>\n          <span dangerouslySetInnerHTML={{__html: this.getOperationDetail(item)}}></span>\n        </td>\n        <td>{moment(item.datetime).fromNow()}</td>\n      </tr>\n    );\n  }\n}\n\nclass AdminOperationLogs extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      logList: [],\n      perPage: 25,\n      currentPage: 1,\n      hasNextPage: false,\n    };\n    this.initPage = 1;\n  }\n\n  componentDidMount () {\n    let urlParams = (new URL(window.location)).searchParams;\n    const { currentPage, perPage } = this.state;\n    this.setState({\n      perPage: parseInt(urlParams.get('per_page') || perPage),\n      currentPage: parseInt(urlParams.get('page') || currentPage)\n    }, () => {\n      this.getLogsByPage(this.state.currentPage);\n    });\n  }\n\n  getLogsByPage = (page) => {\n    let { perPage } = this.state;\n    seafileAPI.sysAdminListAdminLogs(page, perPage).then((res) => {\n      this.setState({\n        logList: res.data.data,\n        loading: false,\n        currentPage: page,\n        hasNextPage: Utils.hasNextPage(page, perPage, res.data.total_count),\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  resetPerPage = (newPerPage) => {\n    this.setState({\n      perPage: newPerPage,\n    }, () => this.getLogsByPage(this.initPage));\n  }\n\n  render() {\n    let { logList, currentPage, perPage, hasNextPage } = this.state;\n    return (\n      <Fragment>\n        <MainPanelTopbar />\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <LogsNav currentItem=\"adminOperationLogs\" />\n            <div className=\"cur-view-content\">\n              <Content\n                loading={this.state.loading}\n                errorMsg={this.state.errorMsg}\n                items={logList}\n                currentPage={currentPage}\n                perPage={perPage}\n                hasNextPage={hasNextPage}\n                getLogsByPage={this.getLogsByPage}\n                resetPerPage={this.resetPerPage}\n              />\n            </div>\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nexport default AdminOperationLogs;\n","import React, { Component, Fragment } from 'react';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { gettext, siteRoot } from '../../../utils/constants';\nimport { Utils } from '../../../utils/utils';\nimport EmptyTip from '../../../components/empty-tip';\nimport moment from 'moment';\nimport Loading from '../../../components/loading';\nimport Paginator from '../../../components/paginator';\nimport LogsNav from './logs-nav';\nimport MainPanelTopbar from '../main-panel-topbar';\nimport UserLink from '../user-link';\n\n\nclass Content extends Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  getPreviousPage = () => {\n    this.props.getLogsByPage(this.props.currentPage - 1);\n  }\n\n  getNextPage = () => {\n    this.props.getLogsByPage(this.props.currentPage + 1);\n  }\n\n  render() {\n    const { loading, errorMsg, items, perPage, currentPage, hasNextPage } = this.props;\n    if (loading) {\n      return <Loading />;\n    } else if (errorMsg) {\n      return <p className=\"error text-center\">{errorMsg}</p>;\n    } else {\n      const emptyTip = (\n        <EmptyTip>\n          <h2>{gettext('No Admin login logs')}</h2>\n        </EmptyTip>\n      );\n      const table = (\n        <Fragment>\n          <table className=\"table-hover\">\n            <thead>\n              <tr>\n                <th width=\"25%\">{gettext('Name')}</th>\n                <th width=\"25%\">{gettext('IP')}</th>\n                <th width=\"25%\">{gettext('Status')}</th>\n                <th width=\"25%\">{gettext('Time')}</th>\n              </tr>\n            </thead>\n            {items &&\n              <tbody>\n                {items.map((item, index) => {\n                  return (<Item\n                    key={index}\n                    item={item}\n                  />);\n                })}\n              </tbody>\n            }\n          </table>\n          <Paginator\n            gotoPreviousPage={this.getPreviousPage}\n            gotoNextPage={this.getNextPage}\n            currentPage={currentPage}\n            hasNextPage={hasNextPage}\n            curPerPage={perPage}\n            resetPerPage={this.props.resetPerPage}\n          />\n        </Fragment>\n      );\n      return items.length ? table : emptyTip;\n    }\n  }\n}\n\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    let { item } = this.props;\n    return (\n      <tr onMouseOver={this.handleMouseOver} onMouseOut={this.handleMouseOut}>\n        <td><UserLink email={item.email} name={item.name} /></td>\n        <td>{item.login_ip}</td>\n        <td>{item.login_success ? gettext('Success') : gettext('Failed')}</td>\n        <td>{moment(item.login_time).fromNow()}</td>\n      </tr>\n    );\n  }\n}\n\nclass AdminLoginLogs extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      logList: [],\n      perPage: 25,\n      currentPage: 1,\n      hasNextPage: false,\n    };\n    this.initPage = 1;\n  }\n\n  componentDidMount () {\n    let urlParams = (new URL(window.location)).searchParams;\n    const { currentPage, perPage } = this.state;\n    this.setState({\n      perPage: parseInt(urlParams.get('per_page') || perPage),\n      currentPage: parseInt(urlParams.get('page') || currentPage)\n    }, () => {\n      this.getLogsByPage(this.state.currentPage);\n    });\n  }\n\n  getLogsByPage = (page) => {\n    let { perPage } = this.state;\n    seafileAPI.sysAdminListAdminLoginLogs(page, perPage).then((res) => {\n      this.setState({\n        logList: res.data.data,\n        loading: false,\n        currentPage: page,\n        hasNextPage: Utils.hasNextPage(page, perPage, res.data.total_count),\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  resetPerPage = (newPerPage) => {\n    this.setState({\n      perPage: newPerPage,\n    }, () => this.getLogsByPage(this.initPage));\n  }\n\n  render() {\n    let { logList, currentPage, perPage, hasNextPage } = this.state;\n    return (\n      <Fragment>\n        <MainPanelTopbar />\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <LogsNav currentItem=\"adminLoginLogs\" />\n            <div className=\"cur-view-content\">\n              <Content\n                loading={this.state.loading}\n                errorMsg={this.state.errorMsg}\n                items={logList}\n                currentPage={currentPage}\n                perPage={perPage}\n                hasNextPage={hasNextPage}\n                getLogsByPage={this.getLogsByPage}\n                resetPerPage={this.resetPerPage}\n              />\n            </div>\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nexport default AdminLoginLogs;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { Router } from '@reach/router';\nimport { siteRoot } from '../../utils/constants';\nimport SidePanel from './side-panel';\nimport MainPanel from './main-panel';\n\nimport Info from './info';\n\nimport StatisticFile from './statistic/statistic-file';\nimport StatisticStorage from './statistic/statistic-storage';\nimport StatisticTraffic from './statistic/statistic-traffic';\nimport StatisticUsers from './statistic/statistic-users';\nimport StatisticReport from './statistic/statistic-reports';\n\nimport DesktopDevices from './devices/desktop-devices';\nimport MobileDevices from './devices/mobile-devices';\nimport DeviceErrors from './devices/devices-errors';\nimport AbuseReports from './abuse-reports';\n\nimport Users from './users/users';\nimport AdminUsers from './users/admin-users';\nimport LDAPImportedUsers from './users/ldap-imported-users';\nimport LDAPUsers from './users/ldap-users';\nimport SearchUsers from './users/search-users';\nimport User from './users/user-info';\nimport UserOwnedRepos from './users/user-repos';\nimport UserSharedRepos from './users/user-shared-repos';\nimport UserLinks from './users/user-links';\nimport UserGroups from './users/user-groups';\n\nimport AllRepos from './repos/all-repos';\nimport SystemRepo from './repos/system-repo';\nimport TrashRepos from './repos/trash-repos';\nimport SearchRepos from './repos/search-repos';\nimport DirView from './repos/dir-view';\n\nimport Groups from './groups/groups';\nimport SearchGroups from './groups/search-groups';\nimport GroupRepos from './groups/group-repos';\nimport GroupMembers from './groups/group-members';\n\nimport Departments from './departments/departments';\nimport DepartmentsList from './departments/departments-list';\nimport DepartmentDetail from './departments/department-detail';\n\nimport ShareLinks from './links/share-links';\nimport UploadLinks from './links/upload-links';\n\nimport Orgs from './orgs/orgs';\nimport SearchOrgs from './orgs/search-orgs';\nimport OrgInfo from './orgs/org-info';\nimport OrgUsers from './orgs/org-users';\nimport OrgGroups from './orgs/org-groups';\nimport OrgRepos from './orgs/org-repos';\n\nimport Institutions from './institutions/institutions';\nimport InstitutionInfo from './institutions/institution-info';\nimport InstitutionUsers from './institutions/institution-users';\nimport InstitutionAdmins from './institutions/institution-admins';\n\nimport LoginLogs from './logs-page/login-logs';\nimport FileAccessLogs from './logs-page/file-access-logs';\nimport FileUpdateLogs from './logs-page/file-update-logs';\nimport SharePermissionLogs from './logs-page/share-permission-logs';\n\nimport WebSettings from './web-settings/web-settings';\nimport Notifications from './notifications/notifications';\nimport FileScanRecords from './file-scan-records';\nimport WorkWeixinDepartments from './work-weixin-departments';\nimport DingtalkDepartments from './dingtalk-departments';\nimport Invitations from './invitations/invitations';\nimport TermsAndConditions from './terms-and-conditions/terms-and-conditions';\n\nimport AllVirusFiles from './virus-scan/all-virus-files';\nimport UnhandledVirusFiles from './virus-scan/unhandled-virus-files';\n\nimport AdminOperationLogs from './admin-logs/operation-logs';\nimport AdminLoginLogs from './admin-logs/login-logs';\n\nimport '../../css/layout.css';\nimport '../../css/toolbar.css';\n\nclass SysAdmin extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      isSidePanelClosed: false,\n      currentTab: 'file-scan'\n    };\n  }\n\n  componentDidMount() {\n    let href = window.location.href.split('/');\n    let currentTab = href[href.length - 2];\n\n    const pageList = [\n      {\n        tab: 'devices',\n        urlPartList: ['desktop-devices', 'mobile-devices', 'device-errors']\n      },\n      {\n        tab: 'libraries',\n        urlPartList: ['all-libraries', 'search-libraries', 'system-library', 'trash-libraries', 'libraries/']\n      },\n      {\n        tab: 'statistic',\n        urlPartList: ['statistics/file', 'statistics/storage', 'statistics/user', 'statistics/traffic', 'statistics/reports']\n      },\n      {\n        tab: 'users',\n        urlPartList: ['users/', 'search-users/']\n      },\n      {\n        tab: 'groups',\n        urlPartList: ['groups/', 'search-groups/']\n      },\n      {\n        tab: 'organizations',\n        urlPartList: ['organizations/', 'search-organizations/']\n      },\n      {\n        tab: 'links',\n        urlPartList: ['share-links/', 'upload-links/']\n      },\n      {\n        tab: 'institutions',\n        urlPartList: ['institutions/']\n      },\n      {\n        tab: 'termsandconditions',\n        urlPartList: ['terms-and-conditions/']\n      },\n      {\n        tab: 'departments',\n        urlPartList: ['departments/']\n      },\n      {\n        tab: 'logs',\n        urlPartList: ['logs/']\n      },\n      {\n        tab: 'virus-files',\n        urlPartList: ['virus-files/']\n      },\n      {\n        tab: 'adminLogs',\n        urlPartList: ['admin-logs/']\n      }\n    ];\n    const tmpTab = this.getCurrentTabForPageList(pageList);\n    currentTab = tmpTab ? tmpTab : currentTab;\n\n    this.setState({currentTab: currentTab});\n  }\n\n  getCurrentTabForPageList = (pageList) => {\n    let urlPartList, tab;\n    const urlBase = `${siteRoot}sys/`;\n    for (let i = 0, len = pageList.length; i < len; i++) {\n      urlPartList = pageList[i].urlPartList;\n      tab = pageList[i].tab;\n      for (let j = 0, jlen = urlPartList.length; j < jlen; j++) {\n        if (location.href.indexOf(`${urlBase}${urlPartList[j]}`) != -1) {\n          return tab;\n        }\n      }\n    }\n  }\n\n  onCloseSidePanel = () => {\n    this.setState({isSidePanelClosed: !this.state.isSidePanelClosed});\n  }\n\n  tabItemClick = (param) => {\n    this.setState({currentTab: param});\n  }\n\n  render() {\n    let { currentTab, isSidePanelClosed } = this.state;\n\n    return (\n      <div id=\"main\">\n        <SidePanel\n          isSidePanelClosed={isSidePanelClosed}\n          onCloseSidePanel={this.onCloseSidePanel}\n          currentTab={currentTab}\n          tabItemClick={this.tabItemClick}\n        />\n        <MainPanel>\n          <Router className=\"reach-router\">\n            <Info path={siteRoot + 'sys/info'} />\n            <StatisticFile path={siteRoot + 'sys/statistics/file'} />\n            <StatisticStorage path={siteRoot + 'sys/statistics/storage'} />\n            <StatisticUsers path={siteRoot + 'sys/statistics/user'} />\n            <StatisticTraffic path={siteRoot + 'sys/statistics/traffic'} />\n            <StatisticReport path={siteRoot + 'sys/statistics/reports'} />\n            <DesktopDevices path={siteRoot + 'sys/desktop-devices'} />\n            <MobileDevices path={siteRoot + 'sys/mobile-devices'} />\n            <DeviceErrors path={siteRoot + 'sys/device-errors'} />\n            <AllRepos path={siteRoot + 'sys/all-libraries'} />\n            <SystemRepo path={siteRoot + 'sys/system-library'} />\n            <TrashRepos path={siteRoot + 'sys/trash-libraries'} />\n            <SearchRepos path={siteRoot + 'sys/search-libraries'} />\n            <DirView path={siteRoot + 'sys/libraries/:repoID/*'} />\n            <WebSettings path={siteRoot + 'sys/web-settings'} />\n            <Notifications path={siteRoot + 'sys/notifications'} />\n            <Groups path={siteRoot + 'sys/groups'} />\n            <SearchGroups path={siteRoot + 'sys/search-groups'} />\n            <GroupRepos path={siteRoot + 'sys/groups/:groupID/libraries'} />\n            <GroupMembers path={siteRoot + 'sys/groups/:groupID/members'} />\n            <Departments path={siteRoot + 'sys/departments'}>\n              <DepartmentsList path='/'/>\n              <DepartmentDetail path='/:groupID'/>\n            </Departments>\n            <ShareLinks path={siteRoot + 'sys/share-links'} />\n            <UploadLinks path={siteRoot + 'sys/upload-links'} />\n            <Orgs path={siteRoot + 'sys/organizations'} />\n            <SearchOrgs path={siteRoot + 'sys/search-organizations'} />\n            <OrgInfo path={siteRoot + 'sys/organizations/:orgID/info'} />\n            <OrgUsers path={siteRoot + 'sys/organizations/:orgID/users'} />\n            <OrgGroups path={siteRoot + 'sys/organizations/:orgID/groups'} />\n            <OrgRepos path={siteRoot + 'sys/organizations/:orgID/libraries'} />\n            <Institutions path={siteRoot + 'sys/institutions'} />\n            <InstitutionInfo path={siteRoot + 'sys/institutions/:institutionID/info'} />\n            <InstitutionUsers path={siteRoot + 'sys/institutions/:institutionID/members'} />\n            <InstitutionAdmins path={siteRoot + 'sys/institutions/:institutionID/admins'} />\n            <LoginLogs path={siteRoot + 'sys/logs/login'} />\n            <FileAccessLogs path={siteRoot + 'sys/logs/file-access'} />\n            <FileUpdateLogs path={siteRoot + 'sys/logs/file-update'} />\n            <SharePermissionLogs path={siteRoot + 'sys/logs/share-permission'} />\n            <AdminOperationLogs path={siteRoot + 'sys/admin-logs/operation'} />\n            <AdminLoginLogs path={siteRoot + 'sys/admin-logs/login'} />\n\n            <Users path={siteRoot + 'sys/users'} />\n            <AdminUsers path={siteRoot + 'sys/users/admins'} />\n            <LDAPImportedUsers path={siteRoot + 'sys/users/ldap-imported'} />\n            <LDAPUsers path={siteRoot + 'sys/users/ldap'} />\n            <SearchUsers path={siteRoot + 'sys/search-users'} />\n            <User path={siteRoot + 'sys/users/:email'} />\n            <UserOwnedRepos path={siteRoot + 'sys/users/:email/owned-libraries'} />\n            <UserSharedRepos path={siteRoot + 'sys/users/:email/shared-libraries'} />\n            <UserLinks path={siteRoot + 'sys/users/:email/shared-links'} />\n            <UserGroups path={siteRoot + 'sys/users/:email/groups'} />\n\n            <Invitations path={siteRoot + 'sys/invitations'} />\n            <TermsAndConditions path={siteRoot + 'sys/terms-and-conditions/'} />\n\n            <AllVirusFiles path={siteRoot + 'sys/virus-files/all'} />\n            <UnhandledVirusFiles path={siteRoot + 'sys/virus-files/unhandled'} />\n\n            <FileScanRecords\n              path={siteRoot + 'sys/file-scan-records'}\n              currentTab={currentTab}\n              tabItemClick={this.tabItemClick}\n            />\n\n            <WorkWeixinDepartments\n              path={siteRoot + 'sys/work-weixin'}\n              currentTab={currentTab}\n              tabItemClick={this.tabItemClick}\n            />\n            <DingtalkDepartments\n              path={siteRoot + 'sys/dingtalk'}\n              currentTab={currentTab}\n              tabItemClick={this.tabItemClick}\n            />\n            <AbuseReports path={siteRoot + 'sys/abuse-reports'} />\n          </Router>\n        </MainPanel>\n      </div>\n    );\n  }\n}\n\nReactDOM.render(\n  <SysAdmin />,\n  document.getElementById('wrapper')\n);\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Modal, ModalHeader, ModalBody, ModalFooter, Button } from 'reactstrap';\nimport copy from '../copy-to-clipboard';\nimport { gettext } from '../../utils/constants';\nimport toaster from '../../components/toast';\n\nconst propTypes = {\n  link: PropTypes.string.isRequired,\n  toggleDialog: PropTypes.func.isRequired\n};\n\nclass ShareAdminLink extends React.Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n copyToClipboard = () => {\n   copy(this.props.link);\n   this.props.toggleDialog();\n   toaster.success(gettext('The link is copied to the clipboard.')), {duration: 2};\n }\n\n render() {\n   const { link, toggleDialog } = this.props;\n   return (\n     <Modal isOpen={true} toggle={toggleDialog}>\n       <ModalHeader toggle={toggleDialog}>{gettext('Link')}</ModalHeader>\n       <ModalBody>\n         <a href={link}>{link}</a>\n       </ModalBody>\n       <ModalFooter>\n         <Button color=\"primary\" onClick={this.copyToClipboard}>{gettext('Copy')}</Button>\n         <Button color=\"secondary\" onClick={toggleDialog}>{gettext('Close')}</Button>\n       </ModalFooter>\n     </Modal>\n   );\n }\n}\n\nShareAdminLink.propTypes = propTypes;\n\nexport default ShareAdminLink;\n","/*!\n * Chart.js v2.9.4\n * https://www.chartjs.org\n * (c) 2020 Chart.js Contributors\n * Released under the MIT License\n */\n(function (global, factory) {\ntypeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory(function() { try { return require('moment'); } catch(e) { } }()) :\ntypeof define === 'function' && define.amd ? define(['require'], function(require) { return factory(function() { try { return require('moment'); } catch(e) { } }()); }) :\n(global = global || self, global.Chart = factory(global.moment));\n}(this, (function (moment) { 'use strict';\n\nmoment = moment && moment.hasOwnProperty('default') ? moment['default'] : moment;\n\nfunction createCommonjsModule(fn, module) {\n\treturn module = { exports: {} }, fn(module, module.exports), module.exports;\n}\n\nfunction getCjsExportFromNamespace (n) {\n\treturn n && n['default'] || n;\n}\n\nvar colorName = {\r\n\t\"aliceblue\": [240, 248, 255],\r\n\t\"antiquewhite\": [250, 235, 215],\r\n\t\"aqua\": [0, 255, 255],\r\n\t\"aquamarine\": [127, 255, 212],\r\n\t\"azure\": [240, 255, 255],\r\n\t\"beige\": [245, 245, 220],\r\n\t\"bisque\": [255, 228, 196],\r\n\t\"black\": [0, 0, 0],\r\n\t\"blanchedalmond\": [255, 235, 205],\r\n\t\"blue\": [0, 0, 255],\r\n\t\"blueviolet\": [138, 43, 226],\r\n\t\"brown\": [165, 42, 42],\r\n\t\"burlywood\": [222, 184, 135],\r\n\t\"cadetblue\": [95, 158, 160],\r\n\t\"chartreuse\": [127, 255, 0],\r\n\t\"chocolate\": [210, 105, 30],\r\n\t\"coral\": [255, 127, 80],\r\n\t\"cornflowerblue\": [100, 149, 237],\r\n\t\"cornsilk\": [255, 248, 220],\r\n\t\"crimson\": [220, 20, 60],\r\n\t\"cyan\": [0, 255, 255],\r\n\t\"darkblue\": [0, 0, 139],\r\n\t\"darkcyan\": [0, 139, 139],\r\n\t\"darkgoldenrod\": [184, 134, 11],\r\n\t\"darkgray\": [169, 169, 169],\r\n\t\"darkgreen\": [0, 100, 0],\r\n\t\"darkgrey\": [169, 169, 169],\r\n\t\"darkkhaki\": [189, 183, 107],\r\n\t\"darkmagenta\": [139, 0, 139],\r\n\t\"darkolivegreen\": [85, 107, 47],\r\n\t\"darkorange\": [255, 140, 0],\r\n\t\"darkorchid\": [153, 50, 204],\r\n\t\"darkred\": [139, 0, 0],\r\n\t\"darksalmon\": [233, 150, 122],\r\n\t\"darkseagreen\": [143, 188, 143],\r\n\t\"darkslateblue\": [72, 61, 139],\r\n\t\"darkslategray\": [47, 79, 79],\r\n\t\"darkslategrey\": [47, 79, 79],\r\n\t\"darkturquoise\": [0, 206, 209],\r\n\t\"darkviolet\": [148, 0, 211],\r\n\t\"deeppink\": [255, 20, 147],\r\n\t\"deepskyblue\": [0, 191, 255],\r\n\t\"dimgray\": [105, 105, 105],\r\n\t\"dimgrey\": [105, 105, 105],\r\n\t\"dodgerblue\": [30, 144, 255],\r\n\t\"firebrick\": [178, 34, 34],\r\n\t\"floralwhite\": [255, 250, 240],\r\n\t\"forestgreen\": [34, 139, 34],\r\n\t\"fuchsia\": [255, 0, 255],\r\n\t\"gainsboro\": [220, 220, 220],\r\n\t\"ghostwhite\": [248, 248, 255],\r\n\t\"gold\": [255, 215, 0],\r\n\t\"goldenrod\": [218, 165, 32],\r\n\t\"gray\": [128, 128, 128],\r\n\t\"green\": [0, 128, 0],\r\n\t\"greenyellow\": [173, 255, 47],\r\n\t\"grey\": [128, 128, 128],\r\n\t\"honeydew\": [240, 255, 240],\r\n\t\"hotpink\": [255, 105, 180],\r\n\t\"indianred\": [205, 92, 92],\r\n\t\"indigo\": [75, 0, 130],\r\n\t\"ivory\": [255, 255, 240],\r\n\t\"khaki\": [240, 230, 140],\r\n\t\"lavender\": [230, 230, 250],\r\n\t\"lavenderblush\": [255, 240, 245],\r\n\t\"lawngreen\": [124, 252, 0],\r\n\t\"lemonchiffon\": [255, 250, 205],\r\n\t\"lightblue\": [173, 216, 230],\r\n\t\"lightcoral\": [240, 128, 128],\r\n\t\"lightcyan\": [224, 255, 255],\r\n\t\"lightgoldenrodyellow\": [250, 250, 210],\r\n\t\"lightgray\": [211, 211, 211],\r\n\t\"lightgreen\": [144, 238, 144],\r\n\t\"lightgrey\": [211, 211, 211],\r\n\t\"lightpink\": [255, 182, 193],\r\n\t\"lightsalmon\": [255, 160, 122],\r\n\t\"lightseagreen\": [32, 178, 170],\r\n\t\"lightskyblue\": [135, 206, 250],\r\n\t\"lightslategray\": [119, 136, 153],\r\n\t\"lightslategrey\": [119, 136, 153],\r\n\t\"lightsteelblue\": [176, 196, 222],\r\n\t\"lightyellow\": [255, 255, 224],\r\n\t\"lime\": [0, 255, 0],\r\n\t\"limegreen\": [50, 205, 50],\r\n\t\"linen\": [250, 240, 230],\r\n\t\"magenta\": [255, 0, 255],\r\n\t\"maroon\": [128, 0, 0],\r\n\t\"mediumaquamarine\": [102, 205, 170],\r\n\t\"mediumblue\": [0, 0, 205],\r\n\t\"mediumorchid\": [186, 85, 211],\r\n\t\"mediumpurple\": [147, 112, 219],\r\n\t\"mediumseagreen\": [60, 179, 113],\r\n\t\"mediumslateblue\": [123, 104, 238],\r\n\t\"mediumspringgreen\": [0, 250, 154],\r\n\t\"mediumturquoise\": [72, 209, 204],\r\n\t\"mediumvioletred\": [199, 21, 133],\r\n\t\"midnightblue\": [25, 25, 112],\r\n\t\"mintcream\": [245, 255, 250],\r\n\t\"mistyrose\": [255, 228, 225],\r\n\t\"moccasin\": [255, 228, 181],\r\n\t\"navajowhite\": [255, 222, 173],\r\n\t\"navy\": [0, 0, 128],\r\n\t\"oldlace\": [253, 245, 230],\r\n\t\"olive\": [128, 128, 0],\r\n\t\"olivedrab\": [107, 142, 35],\r\n\t\"orange\": [255, 165, 0],\r\n\t\"orangered\": [255, 69, 0],\r\n\t\"orchid\": [218, 112, 214],\r\n\t\"palegoldenrod\": [238, 232, 170],\r\n\t\"palegreen\": [152, 251, 152],\r\n\t\"paleturquoise\": [175, 238, 238],\r\n\t\"palevioletred\": [219, 112, 147],\r\n\t\"papayawhip\": [255, 239, 213],\r\n\t\"peachpuff\": [255, 218, 185],\r\n\t\"peru\": [205, 133, 63],\r\n\t\"pink\": [255, 192, 203],\r\n\t\"plum\": [221, 160, 221],\r\n\t\"powderblue\": [176, 224, 230],\r\n\t\"purple\": [128, 0, 128],\r\n\t\"rebeccapurple\": [102, 51, 153],\r\n\t\"red\": [255, 0, 0],\r\n\t\"rosybrown\": [188, 143, 143],\r\n\t\"royalblue\": [65, 105, 225],\r\n\t\"saddlebrown\": [139, 69, 19],\r\n\t\"salmon\": [250, 128, 114],\r\n\t\"sandybrown\": [244, 164, 96],\r\n\t\"seagreen\": [46, 139, 87],\r\n\t\"seashell\": [255, 245, 238],\r\n\t\"sienna\": [160, 82, 45],\r\n\t\"silver\": [192, 192, 192],\r\n\t\"skyblue\": [135, 206, 235],\r\n\t\"slateblue\": [106, 90, 205],\r\n\t\"slategray\": [112, 128, 144],\r\n\t\"slategrey\": [112, 128, 144],\r\n\t\"snow\": [255, 250, 250],\r\n\t\"springgreen\": [0, 255, 127],\r\n\t\"steelblue\": [70, 130, 180],\r\n\t\"tan\": [210, 180, 140],\r\n\t\"teal\": [0, 128, 128],\r\n\t\"thistle\": [216, 191, 216],\r\n\t\"tomato\": [255, 99, 71],\r\n\t\"turquoise\": [64, 224, 208],\r\n\t\"violet\": [238, 130, 238],\r\n\t\"wheat\": [245, 222, 179],\r\n\t\"white\": [255, 255, 255],\r\n\t\"whitesmoke\": [245, 245, 245],\r\n\t\"yellow\": [255, 255, 0],\r\n\t\"yellowgreen\": [154, 205, 50]\r\n};\n\nvar conversions = createCommonjsModule(function (module) {\n/* MIT license */\n\n\n// NOTE: conversions should only return primitive values (i.e. arrays, or\n//       values that give correct `typeof` results).\n//       do not use box values types (i.e. Number(), String(), etc.)\n\nvar reverseKeywords = {};\nfor (var key in colorName) {\n\tif (colorName.hasOwnProperty(key)) {\n\t\treverseKeywords[colorName[key]] = key;\n\t}\n}\n\nvar convert = module.exports = {\n\trgb: {channels: 3, labels: 'rgb'},\n\thsl: {channels: 3, labels: 'hsl'},\n\thsv: {channels: 3, labels: 'hsv'},\n\thwb: {channels: 3, labels: 'hwb'},\n\tcmyk: {channels: 4, labels: 'cmyk'},\n\txyz: {channels: 3, labels: 'xyz'},\n\tlab: {channels: 3, labels: 'lab'},\n\tlch: {channels: 3, labels: 'lch'},\n\thex: {channels: 1, labels: ['hex']},\n\tkeyword: {channels: 1, labels: ['keyword']},\n\tansi16: {channels: 1, labels: ['ansi16']},\n\tansi256: {channels: 1, labels: ['ansi256']},\n\thcg: {channels: 3, labels: ['h', 'c', 'g']},\n\tapple: {channels: 3, labels: ['r16', 'g16', 'b16']},\n\tgray: {channels: 1, labels: ['gray']}\n};\n\n// hide .channels and .labels properties\nfor (var model in convert) {\n\tif (convert.hasOwnProperty(model)) {\n\t\tif (!('channels' in convert[model])) {\n\t\t\tthrow new Error('missing channels property: ' + model);\n\t\t}\n\n\t\tif (!('labels' in convert[model])) {\n\t\t\tthrow new Error('missing channel labels property: ' + model);\n\t\t}\n\n\t\tif (convert[model].labels.length !== convert[model].channels) {\n\t\t\tthrow new Error('channel and label counts mismatch: ' + model);\n\t\t}\n\n\t\tvar channels = convert[model].channels;\n\t\tvar labels = convert[model].labels;\n\t\tdelete convert[model].channels;\n\t\tdelete convert[model].labels;\n\t\tObject.defineProperty(convert[model], 'channels', {value: channels});\n\t\tObject.defineProperty(convert[model], 'labels', {value: labels});\n\t}\n}\n\nconvert.rgb.hsl = function (rgb) {\n\tvar r = rgb[0] / 255;\n\tvar g = rgb[1] / 255;\n\tvar b = rgb[2] / 255;\n\tvar min = Math.min(r, g, b);\n\tvar max = Math.max(r, g, b);\n\tvar delta = max - min;\n\tvar h;\n\tvar s;\n\tvar l;\n\n\tif (max === min) {\n\t\th = 0;\n\t} else if (r === max) {\n\t\th = (g - b) / delta;\n\t} else if (g === max) {\n\t\th = 2 + (b - r) / delta;\n\t} else if (b === max) {\n\t\th = 4 + (r - g) / delta;\n\t}\n\n\th = Math.min(h * 60, 360);\n\n\tif (h < 0) {\n\t\th += 360;\n\t}\n\n\tl = (min + max) / 2;\n\n\tif (max === min) {\n\t\ts = 0;\n\t} else if (l <= 0.5) {\n\t\ts = delta / (max + min);\n\t} else {\n\t\ts = delta / (2 - max - min);\n\t}\n\n\treturn [h, s * 100, l * 100];\n};\n\nconvert.rgb.hsv = function (rgb) {\n\tvar rdif;\n\tvar gdif;\n\tvar bdif;\n\tvar h;\n\tvar s;\n\n\tvar r = rgb[0] / 255;\n\tvar g = rgb[1] / 255;\n\tvar b = rgb[2] / 255;\n\tvar v = Math.max(r, g, b);\n\tvar diff = v - Math.min(r, g, b);\n\tvar diffc = function (c) {\n\t\treturn (v - c) / 6 / diff + 1 / 2;\n\t};\n\n\tif (diff === 0) {\n\t\th = s = 0;\n\t} else {\n\t\ts = diff / v;\n\t\trdif = diffc(r);\n\t\tgdif = diffc(g);\n\t\tbdif = diffc(b);\n\n\t\tif (r === v) {\n\t\t\th = bdif - gdif;\n\t\t} else if (g === v) {\n\t\t\th = (1 / 3) + rdif - bdif;\n\t\t} else if (b === v) {\n\t\t\th = (2 / 3) + gdif - rdif;\n\t\t}\n\t\tif (h < 0) {\n\t\t\th += 1;\n\t\t} else if (h > 1) {\n\t\t\th -= 1;\n\t\t}\n\t}\n\n\treturn [\n\t\th * 360,\n\t\ts * 100,\n\t\tv * 100\n\t];\n};\n\nconvert.rgb.hwb = function (rgb) {\n\tvar r = rgb[0];\n\tvar g = rgb[1];\n\tvar b = rgb[2];\n\tvar h = convert.rgb.hsl(rgb)[0];\n\tvar w = 1 / 255 * Math.min(r, Math.min(g, b));\n\n\tb = 1 - 1 / 255 * Math.max(r, Math.max(g, b));\n\n\treturn [h, w * 100, b * 100];\n};\n\nconvert.rgb.cmyk = function (rgb) {\n\tvar r = rgb[0] / 255;\n\tvar g = rgb[1] / 255;\n\tvar b = rgb[2] / 255;\n\tvar c;\n\tvar m;\n\tvar y;\n\tvar k;\n\n\tk = Math.min(1 - r, 1 - g, 1 - b);\n\tc = (1 - r - k) / (1 - k) || 0;\n\tm = (1 - g - k) / (1 - k) || 0;\n\ty = (1 - b - k) / (1 - k) || 0;\n\n\treturn [c * 100, m * 100, y * 100, k * 100];\n};\n\n/**\n * See https://en.m.wikipedia.org/wiki/Euclidean_distance#Squared_Euclidean_distance\n * */\nfunction comparativeDistance(x, y) {\n\treturn (\n\t\tMath.pow(x[0] - y[0], 2) +\n\t\tMath.pow(x[1] - y[1], 2) +\n\t\tMath.pow(x[2] - y[2], 2)\n\t);\n}\n\nconvert.rgb.keyword = function (rgb) {\n\tvar reversed = reverseKeywords[rgb];\n\tif (reversed) {\n\t\treturn reversed;\n\t}\n\n\tvar currentClosestDistance = Infinity;\n\tvar currentClosestKeyword;\n\n\tfor (var keyword in colorName) {\n\t\tif (colorName.hasOwnProperty(keyword)) {\n\t\t\tvar value = colorName[keyword];\n\n\t\t\t// Compute comparative distance\n\t\t\tvar distance = comparativeDistance(rgb, value);\n\n\t\t\t// Check if its less, if so set as closest\n\t\t\tif (distance < currentClosestDistance) {\n\t\t\t\tcurrentClosestDistance = distance;\n\t\t\t\tcurrentClosestKeyword = keyword;\n\t\t\t}\n\t\t}\n\t}\n\n\treturn currentClosestKeyword;\n};\n\nconvert.keyword.rgb = function (keyword) {\n\treturn colorName[keyword];\n};\n\nconvert.rgb.xyz = function (rgb) {\n\tvar r = rgb[0] / 255;\n\tvar g = rgb[1] / 255;\n\tvar b = rgb[2] / 255;\n\n\t// assume sRGB\n\tr = r > 0.04045 ? Math.pow(((r + 0.055) / 1.055), 2.4) : (r / 12.92);\n\tg = g > 0.04045 ? Math.pow(((g + 0.055) / 1.055), 2.4) : (g / 12.92);\n\tb = b > 0.04045 ? Math.pow(((b + 0.055) / 1.055), 2.4) : (b / 12.92);\n\n\tvar x = (r * 0.4124) + (g * 0.3576) + (b * 0.1805);\n\tvar y = (r * 0.2126) + (g * 0.7152) + (b * 0.0722);\n\tvar z = (r * 0.0193) + (g * 0.1192) + (b * 0.9505);\n\n\treturn [x * 100, y * 100, z * 100];\n};\n\nconvert.rgb.lab = function (rgb) {\n\tvar xyz = convert.rgb.xyz(rgb);\n\tvar x = xyz[0];\n\tvar y = xyz[1];\n\tvar z = xyz[2];\n\tvar l;\n\tvar a;\n\tvar b;\n\n\tx /= 95.047;\n\ty /= 100;\n\tz /= 108.883;\n\n\tx = x > 0.008856 ? Math.pow(x, 1 / 3) : (7.787 * x) + (16 / 116);\n\ty = y > 0.008856 ? Math.pow(y, 1 / 3) : (7.787 * y) + (16 / 116);\n\tz = z > 0.008856 ? Math.pow(z, 1 / 3) : (7.787 * z) + (16 / 116);\n\n\tl = (116 * y) - 16;\n\ta = 500 * (x - y);\n\tb = 200 * (y - z);\n\n\treturn [l, a, b];\n};\n\nconvert.hsl.rgb = function (hsl) {\n\tvar h = hsl[0] / 360;\n\tvar s = hsl[1] / 100;\n\tvar l = hsl[2] / 100;\n\tvar t1;\n\tvar t2;\n\tvar t3;\n\tvar rgb;\n\tvar val;\n\n\tif (s === 0) {\n\t\tval = l * 255;\n\t\treturn [val, val, val];\n\t}\n\n\tif (l < 0.5) {\n\t\tt2 = l * (1 + s);\n\t} else {\n\t\tt2 = l + s - l * s;\n\t}\n\n\tt1 = 2 * l - t2;\n\n\trgb = [0, 0, 0];\n\tfor (var i = 0; i < 3; i++) {\n\t\tt3 = h + 1 / 3 * -(i - 1);\n\t\tif (t3 < 0) {\n\t\t\tt3++;\n\t\t}\n\t\tif (t3 > 1) {\n\t\t\tt3--;\n\t\t}\n\n\t\tif (6 * t3 < 1) {\n\t\t\tval = t1 + (t2 - t1) * 6 * t3;\n\t\t} else if (2 * t3 < 1) {\n\t\t\tval = t2;\n\t\t} else if (3 * t3 < 2) {\n\t\t\tval = t1 + (t2 - t1) * (2 / 3 - t3) * 6;\n\t\t} else {\n\t\t\tval = t1;\n\t\t}\n\n\t\trgb[i] = val * 255;\n\t}\n\n\treturn rgb;\n};\n\nconvert.hsl.hsv = function (hsl) {\n\tvar h = hsl[0];\n\tvar s = hsl[1] / 100;\n\tvar l = hsl[2] / 100;\n\tvar smin = s;\n\tvar lmin = Math.max(l, 0.01);\n\tvar sv;\n\tvar v;\n\n\tl *= 2;\n\ts *= (l <= 1) ? l : 2 - l;\n\tsmin *= lmin <= 1 ? lmin : 2 - lmin;\n\tv = (l + s) / 2;\n\tsv = l === 0 ? (2 * smin) / (lmin + smin) : (2 * s) / (l + s);\n\n\treturn [h, sv * 100, v * 100];\n};\n\nconvert.hsv.rgb = function (hsv) {\n\tvar h = hsv[0] / 60;\n\tvar s = hsv[1] / 100;\n\tvar v = hsv[2] / 100;\n\tvar hi = Math.floor(h) % 6;\n\n\tvar f = h - Math.floor(h);\n\tvar p = 255 * v * (1 - s);\n\tvar q = 255 * v * (1 - (s * f));\n\tvar t = 255 * v * (1 - (s * (1 - f)));\n\tv *= 255;\n\n\tswitch (hi) {\n\t\tcase 0:\n\t\t\treturn [v, t, p];\n\t\tcase 1:\n\t\t\treturn [q, v, p];\n\t\tcase 2:\n\t\t\treturn [p, v, t];\n\t\tcase 3:\n\t\t\treturn [p, q, v];\n\t\tcase 4:\n\t\t\treturn [t, p, v];\n\t\tcase 5:\n\t\t\treturn [v, p, q];\n\t}\n};\n\nconvert.hsv.hsl = function (hsv) {\n\tvar h = hsv[0];\n\tvar s = hsv[1] / 100;\n\tvar v = hsv[2] / 100;\n\tvar vmin = Math.max(v, 0.01);\n\tvar lmin;\n\tvar sl;\n\tvar l;\n\n\tl = (2 - s) * v;\n\tlmin = (2 - s) * vmin;\n\tsl = s * vmin;\n\tsl /= (lmin <= 1) ? lmin : 2 - lmin;\n\tsl = sl || 0;\n\tl /= 2;\n\n\treturn [h, sl * 100, l * 100];\n};\n\n// http://dev.w3.org/csswg/css-color/#hwb-to-rgb\nconvert.hwb.rgb = function (hwb) {\n\tvar h = hwb[0] / 360;\n\tvar wh = hwb[1] / 100;\n\tvar bl = hwb[2] / 100;\n\tvar ratio = wh + bl;\n\tvar i;\n\tvar v;\n\tvar f;\n\tvar n;\n\n\t// wh + bl cant be > 1\n\tif (ratio > 1) {\n\t\twh /= ratio;\n\t\tbl /= ratio;\n\t}\n\n\ti = Math.floor(6 * h);\n\tv = 1 - bl;\n\tf = 6 * h - i;\n\n\tif ((i & 0x01) !== 0) {\n\t\tf = 1 - f;\n\t}\n\n\tn = wh + f * (v - wh); // linear interpolation\n\n\tvar r;\n\tvar g;\n\tvar b;\n\tswitch (i) {\n\t\tdefault:\n\t\tcase 6:\n\t\tcase 0: r = v; g = n; b = wh; break;\n\t\tcase 1: r = n; g = v; b = wh; break;\n\t\tcase 2: r = wh; g = v; b = n; break;\n\t\tcase 3: r = wh; g = n; b = v; break;\n\t\tcase 4: r = n; g = wh; b = v; break;\n\t\tcase 5: r = v; g = wh; b = n; break;\n\t}\n\n\treturn [r * 255, g * 255, b * 255];\n};\n\nconvert.cmyk.rgb = function (cmyk) {\n\tvar c = cmyk[0] / 100;\n\tvar m = cmyk[1] / 100;\n\tvar y = cmyk[2] / 100;\n\tvar k = cmyk[3] / 100;\n\tvar r;\n\tvar g;\n\tvar b;\n\n\tr = 1 - Math.min(1, c * (1 - k) + k);\n\tg = 1 - Math.min(1, m * (1 - k) + k);\n\tb = 1 - Math.min(1, y * (1 - k) + k);\n\n\treturn [r * 255, g * 255, b * 255];\n};\n\nconvert.xyz.rgb = function (xyz) {\n\tvar x = xyz[0] / 100;\n\tvar y = xyz[1] / 100;\n\tvar z = xyz[2] / 100;\n\tvar r;\n\tvar g;\n\tvar b;\n\n\tr = (x * 3.2406) + (y * -1.5372) + (z * -0.4986);\n\tg = (x * -0.9689) + (y * 1.8758) + (z * 0.0415);\n\tb = (x * 0.0557) + (y * -0.2040) + (z * 1.0570);\n\n\t// assume sRGB\n\tr = r > 0.0031308\n\t\t? ((1.055 * Math.pow(r, 1.0 / 2.4)) - 0.055)\n\t\t: r * 12.92;\n\n\tg = g > 0.0031308\n\t\t? ((1.055 * Math.pow(g, 1.0 / 2.4)) - 0.055)\n\t\t: g * 12.92;\n\n\tb = b > 0.0031308\n\t\t? ((1.055 * Math.pow(b, 1.0 / 2.4)) - 0.055)\n\t\t: b * 12.92;\n\n\tr = Math.min(Math.max(0, r), 1);\n\tg = Math.min(Math.max(0, g), 1);\n\tb = Math.min(Math.max(0, b), 1);\n\n\treturn [r * 255, g * 255, b * 255];\n};\n\nconvert.xyz.lab = function (xyz) {\n\tvar x = xyz[0];\n\tvar y = xyz[1];\n\tvar z = xyz[2];\n\tvar l;\n\tvar a;\n\tvar b;\n\n\tx /= 95.047;\n\ty /= 100;\n\tz /= 108.883;\n\n\tx = x > 0.008856 ? Math.pow(x, 1 / 3) : (7.787 * x) + (16 / 116);\n\ty = y > 0.008856 ? Math.pow(y, 1 / 3) : (7.787 * y) + (16 / 116);\n\tz = z > 0.008856 ? Math.pow(z, 1 / 3) : (7.787 * z) + (16 / 116);\n\n\tl = (116 * y) - 16;\n\ta = 500 * (x - y);\n\tb = 200 * (y - z);\n\n\treturn [l, a, b];\n};\n\nconvert.lab.xyz = function (lab) {\n\tvar l = lab[0];\n\tvar a = lab[1];\n\tvar b = lab[2];\n\tvar x;\n\tvar y;\n\tvar z;\n\n\ty = (l + 16) / 116;\n\tx = a / 500 + y;\n\tz = y - b / 200;\n\n\tvar y2 = Math.pow(y, 3);\n\tvar x2 = Math.pow(x, 3);\n\tvar z2 = Math.pow(z, 3);\n\ty = y2 > 0.008856 ? y2 : (y - 16 / 116) / 7.787;\n\tx = x2 > 0.008856 ? x2 : (x - 16 / 116) / 7.787;\n\tz = z2 > 0.008856 ? z2 : (z - 16 / 116) / 7.787;\n\n\tx *= 95.047;\n\ty *= 100;\n\tz *= 108.883;\n\n\treturn [x, y, z];\n};\n\nconvert.lab.lch = function (lab) {\n\tvar l = lab[0];\n\tvar a = lab[1];\n\tvar b = lab[2];\n\tvar hr;\n\tvar h;\n\tvar c;\n\n\thr = Math.atan2(b, a);\n\th = hr * 360 / 2 / Math.PI;\n\n\tif (h < 0) {\n\t\th += 360;\n\t}\n\n\tc = Math.sqrt(a * a + b * b);\n\n\treturn [l, c, h];\n};\n\nconvert.lch.lab = function (lch) {\n\tvar l = lch[0];\n\tvar c = lch[1];\n\tvar h = lch[2];\n\tvar a;\n\tvar b;\n\tvar hr;\n\n\thr = h / 360 * 2 * Math.PI;\n\ta = c * Math.cos(hr);\n\tb = c * Math.sin(hr);\n\n\treturn [l, a, b];\n};\n\nconvert.rgb.ansi16 = function (args) {\n\tvar r = args[0];\n\tvar g = args[1];\n\tvar b = args[2];\n\tvar value = 1 in arguments ? arguments[1] : convert.rgb.hsv(args)[2]; // hsv -> ansi16 optimization\n\n\tvalue = Math.round(value / 50);\n\n\tif (value === 0) {\n\t\treturn 30;\n\t}\n\n\tvar ansi = 30\n\t\t+ ((Math.round(b / 255) << 2)\n\t\t| (Math.round(g / 255) << 1)\n\t\t| Math.round(r / 255));\n\n\tif (value === 2) {\n\t\tansi += 60;\n\t}\n\n\treturn ansi;\n};\n\nconvert.hsv.ansi16 = function (args) {\n\t// optimization here; we already know the value and don't need to get\n\t// it converted for us.\n\treturn convert.rgb.ansi16(convert.hsv.rgb(args), args[2]);\n};\n\nconvert.rgb.ansi256 = function (args) {\n\tvar r = args[0];\n\tvar g = args[1];\n\tvar b = args[2];\n\n\t// we use the extended greyscale palette here, with the exception of\n\t// black and white. normal palette only has 4 greyscale shades.\n\tif (r === g && g === b) {\n\t\tif (r < 8) {\n\t\t\treturn 16;\n\t\t}\n\n\t\tif (r > 248) {\n\t\t\treturn 231;\n\t\t}\n\n\t\treturn Math.round(((r - 8) / 247) * 24) + 232;\n\t}\n\n\tvar ansi = 16\n\t\t+ (36 * Math.round(r / 255 * 5))\n\t\t+ (6 * Math.round(g / 255 * 5))\n\t\t+ Math.round(b / 255 * 5);\n\n\treturn ansi;\n};\n\nconvert.ansi16.rgb = function (args) {\n\tvar color = args % 10;\n\n\t// handle greyscale\n\tif (color === 0 || color === 7) {\n\t\tif (args > 50) {\n\t\t\tcolor += 3.5;\n\t\t}\n\n\t\tcolor = color / 10.5 * 255;\n\n\t\treturn [color, color, color];\n\t}\n\n\tvar mult = (~~(args > 50) + 1) * 0.5;\n\tvar r = ((color & 1) * mult) * 255;\n\tvar g = (((color >> 1) & 1) * mult) * 255;\n\tvar b = (((color >> 2) & 1) * mult) * 255;\n\n\treturn [r, g, b];\n};\n\nconvert.ansi256.rgb = function (args) {\n\t// handle greyscale\n\tif (args >= 232) {\n\t\tvar c = (args - 232) * 10 + 8;\n\t\treturn [c, c, c];\n\t}\n\n\targs -= 16;\n\n\tvar rem;\n\tvar r = Math.floor(args / 36) / 5 * 255;\n\tvar g = Math.floor((rem = args % 36) / 6) / 5 * 255;\n\tvar b = (rem % 6) / 5 * 255;\n\n\treturn [r, g, b];\n};\n\nconvert.rgb.hex = function (args) {\n\tvar integer = ((Math.round(args[0]) & 0xFF) << 16)\n\t\t+ ((Math.round(args[1]) & 0xFF) << 8)\n\t\t+ (Math.round(args[2]) & 0xFF);\n\n\tvar string = integer.toString(16).toUpperCase();\n\treturn '000000'.substring(string.length) + string;\n};\n\nconvert.hex.rgb = function (args) {\n\tvar match = args.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);\n\tif (!match) {\n\t\treturn [0, 0, 0];\n\t}\n\n\tvar colorString = match[0];\n\n\tif (match[0].length === 3) {\n\t\tcolorString = colorString.split('').map(function (char) {\n\t\t\treturn char + char;\n\t\t}).join('');\n\t}\n\n\tvar integer = parseInt(colorString, 16);\n\tvar r = (integer >> 16) & 0xFF;\n\tvar g = (integer >> 8) & 0xFF;\n\tvar b = integer & 0xFF;\n\n\treturn [r, g, b];\n};\n\nconvert.rgb.hcg = function (rgb) {\n\tvar r = rgb[0] / 255;\n\tvar g = rgb[1] / 255;\n\tvar b = rgb[2] / 255;\n\tvar max = Math.max(Math.max(r, g), b);\n\tvar min = Math.min(Math.min(r, g), b);\n\tvar chroma = (max - min);\n\tvar grayscale;\n\tvar hue;\n\n\tif (chroma < 1) {\n\t\tgrayscale = min / (1 - chroma);\n\t} else {\n\t\tgrayscale = 0;\n\t}\n\n\tif (chroma <= 0) {\n\t\thue = 0;\n\t} else\n\tif (max === r) {\n\t\thue = ((g - b) / chroma) % 6;\n\t} else\n\tif (max === g) {\n\t\thue = 2 + (b - r) / chroma;\n\t} else {\n\t\thue = 4 + (r - g) / chroma + 4;\n\t}\n\n\thue /= 6;\n\thue %= 1;\n\n\treturn [hue * 360, chroma * 100, grayscale * 100];\n};\n\nconvert.hsl.hcg = function (hsl) {\n\tvar s = hsl[1] / 100;\n\tvar l = hsl[2] / 100;\n\tvar c = 1;\n\tvar f = 0;\n\n\tif (l < 0.5) {\n\t\tc = 2.0 * s * l;\n\t} else {\n\t\tc = 2.0 * s * (1.0 - l);\n\t}\n\n\tif (c < 1.0) {\n\t\tf = (l - 0.5 * c) / (1.0 - c);\n\t}\n\n\treturn [hsl[0], c * 100, f * 100];\n};\n\nconvert.hsv.hcg = function (hsv) {\n\tvar s = hsv[1] / 100;\n\tvar v = hsv[2] / 100;\n\n\tvar c = s * v;\n\tvar f = 0;\n\n\tif (c < 1.0) {\n\t\tf = (v - c) / (1 - c);\n\t}\n\n\treturn [hsv[0], c * 100, f * 100];\n};\n\nconvert.hcg.rgb = function (hcg) {\n\tvar h = hcg[0] / 360;\n\tvar c = hcg[1] / 100;\n\tvar g = hcg[2] / 100;\n\n\tif (c === 0.0) {\n\t\treturn [g * 255, g * 255, g * 255];\n\t}\n\n\tvar pure = [0, 0, 0];\n\tvar hi = (h % 1) * 6;\n\tvar v = hi % 1;\n\tvar w = 1 - v;\n\tvar mg = 0;\n\n\tswitch (Math.floor(hi)) {\n\t\tcase 0:\n\t\t\tpure[0] = 1; pure[1] = v; pure[2] = 0; break;\n\t\tcase 1:\n\t\t\tpure[0] = w; pure[1] = 1; pure[2] = 0; break;\n\t\tcase 2:\n\t\t\tpure[0] = 0; pure[1] = 1; pure[2] = v; break;\n\t\tcase 3:\n\t\t\tpure[0] = 0; pure[1] = w; pure[2] = 1; break;\n\t\tcase 4:\n\t\t\tpure[0] = v; pure[1] = 0; pure[2] = 1; break;\n\t\tdefault:\n\t\t\tpure[0] = 1; pure[1] = 0; pure[2] = w;\n\t}\n\n\tmg = (1.0 - c) * g;\n\n\treturn [\n\t\t(c * pure[0] + mg) * 255,\n\t\t(c * pure[1] + mg) * 255,\n\t\t(c * pure[2] + mg) * 255\n\t];\n};\n\nconvert.hcg.hsv = function (hcg) {\n\tvar c = hcg[1] / 100;\n\tvar g = hcg[2] / 100;\n\n\tvar v = c + g * (1.0 - c);\n\tvar f = 0;\n\n\tif (v > 0.0) {\n\t\tf = c / v;\n\t}\n\n\treturn [hcg[0], f * 100, v * 100];\n};\n\nconvert.hcg.hsl = function (hcg) {\n\tvar c = hcg[1] / 100;\n\tvar g = hcg[2] / 100;\n\n\tvar l = g * (1.0 - c) + 0.5 * c;\n\tvar s = 0;\n\n\tif (l > 0.0 && l < 0.5) {\n\t\ts = c / (2 * l);\n\t} else\n\tif (l >= 0.5 && l < 1.0) {\n\t\ts = c / (2 * (1 - l));\n\t}\n\n\treturn [hcg[0], s * 100, l * 100];\n};\n\nconvert.hcg.hwb = function (hcg) {\n\tvar c = hcg[1] / 100;\n\tvar g = hcg[2] / 100;\n\tvar v = c + g * (1.0 - c);\n\treturn [hcg[0], (v - c) * 100, (1 - v) * 100];\n};\n\nconvert.hwb.hcg = function (hwb) {\n\tvar w = hwb[1] / 100;\n\tvar b = hwb[2] / 100;\n\tvar v = 1 - b;\n\tvar c = v - w;\n\tvar g = 0;\n\n\tif (c < 1) {\n\t\tg = (v - c) / (1 - c);\n\t}\n\n\treturn [hwb[0], c * 100, g * 100];\n};\n\nconvert.apple.rgb = function (apple) {\n\treturn [(apple[0] / 65535) * 255, (apple[1] / 65535) * 255, (apple[2] / 65535) * 255];\n};\n\nconvert.rgb.apple = function (rgb) {\n\treturn [(rgb[0] / 255) * 65535, (rgb[1] / 255) * 65535, (rgb[2] / 255) * 65535];\n};\n\nconvert.gray.rgb = function (args) {\n\treturn [args[0] / 100 * 255, args[0] / 100 * 255, args[0] / 100 * 255];\n};\n\nconvert.gray.hsl = convert.gray.hsv = function (args) {\n\treturn [0, 0, args[0]];\n};\n\nconvert.gray.hwb = function (gray) {\n\treturn [0, 100, gray[0]];\n};\n\nconvert.gray.cmyk = function (gray) {\n\treturn [0, 0, 0, gray[0]];\n};\n\nconvert.gray.lab = function (gray) {\n\treturn [gray[0], 0, 0];\n};\n\nconvert.gray.hex = function (gray) {\n\tvar val = Math.round(gray[0] / 100 * 255) & 0xFF;\n\tvar integer = (val << 16) + (val << 8) + val;\n\n\tvar string = integer.toString(16).toUpperCase();\n\treturn '000000'.substring(string.length) + string;\n};\n\nconvert.rgb.gray = function (rgb) {\n\tvar val = (rgb[0] + rgb[1] + rgb[2]) / 3;\n\treturn [val / 255 * 100];\n};\n});\nvar conversions_1 = conversions.rgb;\nvar conversions_2 = conversions.hsl;\nvar conversions_3 = conversions.hsv;\nvar conversions_4 = conversions.hwb;\nvar conversions_5 = conversions.cmyk;\nvar conversions_6 = conversions.xyz;\nvar conversions_7 = conversions.lab;\nvar conversions_8 = conversions.lch;\nvar conversions_9 = conversions.hex;\nvar conversions_10 = conversions.keyword;\nvar conversions_11 = conversions.ansi16;\nvar conversions_12 = conversions.ansi256;\nvar conversions_13 = conversions.hcg;\nvar conversions_14 = conversions.apple;\nvar conversions_15 = conversions.gray;\n\n/*\n\tthis function routes a model to all other models.\n\n\tall functions that are routed have a property `.conversion` attached\n\tto the returned synthetic function. This property is an array\n\tof strings, each with the steps in between the 'from' and 'to'\n\tcolor models (inclusive).\n\n\tconversions that are not possible simply are not included.\n*/\n\nfunction buildGraph() {\n\tvar graph = {};\n\t// https://jsperf.com/object-keys-vs-for-in-with-closure/3\n\tvar models = Object.keys(conversions);\n\n\tfor (var len = models.length, i = 0; i < len; i++) {\n\t\tgraph[models[i]] = {\n\t\t\t// http://jsperf.com/1-vs-infinity\n\t\t\t// micro-opt, but this is simple.\n\t\t\tdistance: -1,\n\t\t\tparent: null\n\t\t};\n\t}\n\n\treturn graph;\n}\n\n// https://en.wikipedia.org/wiki/Breadth-first_search\nfunction deriveBFS(fromModel) {\n\tvar graph = buildGraph();\n\tvar queue = [fromModel]; // unshift -> queue -> pop\n\n\tgraph[fromModel].distance = 0;\n\n\twhile (queue.length) {\n\t\tvar current = queue.pop();\n\t\tvar adjacents = Object.keys(conversions[current]);\n\n\t\tfor (var len = adjacents.length, i = 0; i < len; i++) {\n\t\t\tvar adjacent = adjacents[i];\n\t\t\tvar node = graph[adjacent];\n\n\t\t\tif (node.distance === -1) {\n\t\t\t\tnode.distance = graph[current].distance + 1;\n\t\t\t\tnode.parent = current;\n\t\t\t\tqueue.unshift(adjacent);\n\t\t\t}\n\t\t}\n\t}\n\n\treturn graph;\n}\n\nfunction link(from, to) {\n\treturn function (args) {\n\t\treturn to(from(args));\n\t};\n}\n\nfunction wrapConversion(toModel, graph) {\n\tvar path = [graph[toModel].parent, toModel];\n\tvar fn = conversions[graph[toModel].parent][toModel];\n\n\tvar cur = graph[toModel].parent;\n\twhile (graph[cur].parent) {\n\t\tpath.unshift(graph[cur].parent);\n\t\tfn = link(conversions[graph[cur].parent][cur], fn);\n\t\tcur = graph[cur].parent;\n\t}\n\n\tfn.conversion = path;\n\treturn fn;\n}\n\nvar route = function (fromModel) {\n\tvar graph = deriveBFS(fromModel);\n\tvar conversion = {};\n\n\tvar models = Object.keys(graph);\n\tfor (var len = models.length, i = 0; i < len; i++) {\n\t\tvar toModel = models[i];\n\t\tvar node = graph[toModel];\n\n\t\tif (node.parent === null) {\n\t\t\t// no possible conversion, or this node is the source model.\n\t\t\tcontinue;\n\t\t}\n\n\t\tconversion[toModel] = wrapConversion(toModel, graph);\n\t}\n\n\treturn conversion;\n};\n\nvar convert = {};\n\nvar models = Object.keys(conversions);\n\nfunction wrapRaw(fn) {\n\tvar wrappedFn = function (args) {\n\t\tif (args === undefined || args === null) {\n\t\t\treturn args;\n\t\t}\n\n\t\tif (arguments.length > 1) {\n\t\t\targs = Array.prototype.slice.call(arguments);\n\t\t}\n\n\t\treturn fn(args);\n\t};\n\n\t// preserve .conversion property if there is one\n\tif ('conversion' in fn) {\n\t\twrappedFn.conversion = fn.conversion;\n\t}\n\n\treturn wrappedFn;\n}\n\nfunction wrapRounded(fn) {\n\tvar wrappedFn = function (args) {\n\t\tif (args === undefined || args === null) {\n\t\t\treturn args;\n\t\t}\n\n\t\tif (arguments.length > 1) {\n\t\t\targs = Array.prototype.slice.call(arguments);\n\t\t}\n\n\t\tvar result = fn(args);\n\n\t\t// we're assuming the result is an array here.\n\t\t// see notice in conversions.js; don't use box types\n\t\t// in conversion functions.\n\t\tif (typeof result === 'object') {\n\t\t\tfor (var len = result.length, i = 0; i < len; i++) {\n\t\t\t\tresult[i] = Math.round(result[i]);\n\t\t\t}\n\t\t}\n\n\t\treturn result;\n\t};\n\n\t// preserve .conversion property if there is one\n\tif ('conversion' in fn) {\n\t\twrappedFn.conversion = fn.conversion;\n\t}\n\n\treturn wrappedFn;\n}\n\nmodels.forEach(function (fromModel) {\n\tconvert[fromModel] = {};\n\n\tObject.defineProperty(convert[fromModel], 'channels', {value: conversions[fromModel].channels});\n\tObject.defineProperty(convert[fromModel], 'labels', {value: conversions[fromModel].labels});\n\n\tvar routes = route(fromModel);\n\tvar routeModels = Object.keys(routes);\n\n\trouteModels.forEach(function (toModel) {\n\t\tvar fn = routes[toModel];\n\n\t\tconvert[fromModel][toModel] = wrapRounded(fn);\n\t\tconvert[fromModel][toModel].raw = wrapRaw(fn);\n\t});\n});\n\nvar colorConvert = convert;\n\nvar colorName$1 = {\r\n\t\"aliceblue\": [240, 248, 255],\r\n\t\"antiquewhite\": [250, 235, 215],\r\n\t\"aqua\": [0, 255, 255],\r\n\t\"aquamarine\": [127, 255, 212],\r\n\t\"azure\": [240, 255, 255],\r\n\t\"beige\": [245, 245, 220],\r\n\t\"bisque\": [255, 228, 196],\r\n\t\"black\": [0, 0, 0],\r\n\t\"blanchedalmond\": [255, 235, 205],\r\n\t\"blue\": [0, 0, 255],\r\n\t\"blueviolet\": [138, 43, 226],\r\n\t\"brown\": [165, 42, 42],\r\n\t\"burlywood\": [222, 184, 135],\r\n\t\"cadetblue\": [95, 158, 160],\r\n\t\"chartreuse\": [127, 255, 0],\r\n\t\"chocolate\": [210, 105, 30],\r\n\t\"coral\": [255, 127, 80],\r\n\t\"cornflowerblue\": [100, 149, 237],\r\n\t\"cornsilk\": [255, 248, 220],\r\n\t\"crimson\": [220, 20, 60],\r\n\t\"cyan\": [0, 255, 255],\r\n\t\"darkblue\": [0, 0, 139],\r\n\t\"darkcyan\": [0, 139, 139],\r\n\t\"darkgoldenrod\": [184, 134, 11],\r\n\t\"darkgray\": [169, 169, 169],\r\n\t\"darkgreen\": [0, 100, 0],\r\n\t\"darkgrey\": [169, 169, 169],\r\n\t\"darkkhaki\": [189, 183, 107],\r\n\t\"darkmagenta\": [139, 0, 139],\r\n\t\"darkolivegreen\": [85, 107, 47],\r\n\t\"darkorange\": [255, 140, 0],\r\n\t\"darkorchid\": [153, 50, 204],\r\n\t\"darkred\": [139, 0, 0],\r\n\t\"darksalmon\": [233, 150, 122],\r\n\t\"darkseagreen\": [143, 188, 143],\r\n\t\"darkslateblue\": [72, 61, 139],\r\n\t\"darkslategray\": [47, 79, 79],\r\n\t\"darkslategrey\": [47, 79, 79],\r\n\t\"darkturquoise\": [0, 206, 209],\r\n\t\"darkviolet\": [148, 0, 211],\r\n\t\"deeppink\": [255, 20, 147],\r\n\t\"deepskyblue\": [0, 191, 255],\r\n\t\"dimgray\": [105, 105, 105],\r\n\t\"dimgrey\": [105, 105, 105],\r\n\t\"dodgerblue\": [30, 144, 255],\r\n\t\"firebrick\": [178, 34, 34],\r\n\t\"floralwhite\": [255, 250, 240],\r\n\t\"forestgreen\": [34, 139, 34],\r\n\t\"fuchsia\": [255, 0, 255],\r\n\t\"gainsboro\": [220, 220, 220],\r\n\t\"ghostwhite\": [248, 248, 255],\r\n\t\"gold\": [255, 215, 0],\r\n\t\"goldenrod\": [218, 165, 32],\r\n\t\"gray\": [128, 128, 128],\r\n\t\"green\": [0, 128, 0],\r\n\t\"greenyellow\": [173, 255, 47],\r\n\t\"grey\": [128, 128, 128],\r\n\t\"honeydew\": [240, 255, 240],\r\n\t\"hotpink\": [255, 105, 180],\r\n\t\"indianred\": [205, 92, 92],\r\n\t\"indigo\": [75, 0, 130],\r\n\t\"ivory\": [255, 255, 240],\r\n\t\"khaki\": [240, 230, 140],\r\n\t\"lavender\": [230, 230, 250],\r\n\t\"lavenderblush\": [255, 240, 245],\r\n\t\"lawngreen\": [124, 252, 0],\r\n\t\"lemonchiffon\": [255, 250, 205],\r\n\t\"lightblue\": [173, 216, 230],\r\n\t\"lightcoral\": [240, 128, 128],\r\n\t\"lightcyan\": [224, 255, 255],\r\n\t\"lightgoldenrodyellow\": [250, 250, 210],\r\n\t\"lightgray\": [211, 211, 211],\r\n\t\"lightgreen\": [144, 238, 144],\r\n\t\"lightgrey\": [211, 211, 211],\r\n\t\"lightpink\": [255, 182, 193],\r\n\t\"lightsalmon\": [255, 160, 122],\r\n\t\"lightseagreen\": [32, 178, 170],\r\n\t\"lightskyblue\": [135, 206, 250],\r\n\t\"lightslategray\": [119, 136, 153],\r\n\t\"lightslategrey\": [119, 136, 153],\r\n\t\"lightsteelblue\": [176, 196, 222],\r\n\t\"lightyellow\": [255, 255, 224],\r\n\t\"lime\": [0, 255, 0],\r\n\t\"limegreen\": [50, 205, 50],\r\n\t\"linen\": [250, 240, 230],\r\n\t\"magenta\": [255, 0, 255],\r\n\t\"maroon\": [128, 0, 0],\r\n\t\"mediumaquamarine\": [102, 205, 170],\r\n\t\"mediumblue\": [0, 0, 205],\r\n\t\"mediumorchid\": [186, 85, 211],\r\n\t\"mediumpurple\": [147, 112, 219],\r\n\t\"mediumseagreen\": [60, 179, 113],\r\n\t\"mediumslateblue\": [123, 104, 238],\r\n\t\"mediumspringgreen\": [0, 250, 154],\r\n\t\"mediumturquoise\": [72, 209, 204],\r\n\t\"mediumvioletred\": [199, 21, 133],\r\n\t\"midnightblue\": [25, 25, 112],\r\n\t\"mintcream\": [245, 255, 250],\r\n\t\"mistyrose\": [255, 228, 225],\r\n\t\"moccasin\": [255, 228, 181],\r\n\t\"navajowhite\": [255, 222, 173],\r\n\t\"navy\": [0, 0, 128],\r\n\t\"oldlace\": [253, 245, 230],\r\n\t\"olive\": [128, 128, 0],\r\n\t\"olivedrab\": [107, 142, 35],\r\n\t\"orange\": [255, 165, 0],\r\n\t\"orangered\": [255, 69, 0],\r\n\t\"orchid\": [218, 112, 214],\r\n\t\"palegoldenrod\": [238, 232, 170],\r\n\t\"palegreen\": [152, 251, 152],\r\n\t\"paleturquoise\": [175, 238, 238],\r\n\t\"palevioletred\": [219, 112, 147],\r\n\t\"papayawhip\": [255, 239, 213],\r\n\t\"peachpuff\": [255, 218, 185],\r\n\t\"peru\": [205, 133, 63],\r\n\t\"pink\": [255, 192, 203],\r\n\t\"plum\": [221, 160, 221],\r\n\t\"powderblue\": [176, 224, 230],\r\n\t\"purple\": [128, 0, 128],\r\n\t\"rebeccapurple\": [102, 51, 153],\r\n\t\"red\": [255, 0, 0],\r\n\t\"rosybrown\": [188, 143, 143],\r\n\t\"royalblue\": [65, 105, 225],\r\n\t\"saddlebrown\": [139, 69, 19],\r\n\t\"salmon\": [250, 128, 114],\r\n\t\"sandybrown\": [244, 164, 96],\r\n\t\"seagreen\": [46, 139, 87],\r\n\t\"seashell\": [255, 245, 238],\r\n\t\"sienna\": [160, 82, 45],\r\n\t\"silver\": [192, 192, 192],\r\n\t\"skyblue\": [135, 206, 235],\r\n\t\"slateblue\": [106, 90, 205],\r\n\t\"slategray\": [112, 128, 144],\r\n\t\"slategrey\": [112, 128, 144],\r\n\t\"snow\": [255, 250, 250],\r\n\t\"springgreen\": [0, 255, 127],\r\n\t\"steelblue\": [70, 130, 180],\r\n\t\"tan\": [210, 180, 140],\r\n\t\"teal\": [0, 128, 128],\r\n\t\"thistle\": [216, 191, 216],\r\n\t\"tomato\": [255, 99, 71],\r\n\t\"turquoise\": [64, 224, 208],\r\n\t\"violet\": [238, 130, 238],\r\n\t\"wheat\": [245, 222, 179],\r\n\t\"white\": [255, 255, 255],\r\n\t\"whitesmoke\": [245, 245, 245],\r\n\t\"yellow\": [255, 255, 0],\r\n\t\"yellowgreen\": [154, 205, 50]\r\n};\n\n/* MIT license */\n\n\nvar colorString = {\n   getRgba: getRgba,\n   getHsla: getHsla,\n   getRgb: getRgb,\n   getHsl: getHsl,\n   getHwb: getHwb,\n   getAlpha: getAlpha,\n\n   hexString: hexString,\n   rgbString: rgbString,\n   rgbaString: rgbaString,\n   percentString: percentString,\n   percentaString: percentaString,\n   hslString: hslString,\n   hslaString: hslaString,\n   hwbString: hwbString,\n   keyword: keyword\n};\n\nfunction getRgba(string) {\n   if (!string) {\n      return;\n   }\n   var abbr =  /^#([a-fA-F0-9]{3,4})$/i,\n       hex =  /^#([a-fA-F0-9]{6}([a-fA-F0-9]{2})?)$/i,\n       rgba = /^rgba?\\(\\s*([+-]?\\d+)\\s*,\\s*([+-]?\\d+)\\s*,\\s*([+-]?\\d+)\\s*(?:,\\s*([+-]?[\\d\\.]+)\\s*)?\\)$/i,\n       per = /^rgba?\\(\\s*([+-]?[\\d\\.]+)\\%\\s*,\\s*([+-]?[\\d\\.]+)\\%\\s*,\\s*([+-]?[\\d\\.]+)\\%\\s*(?:,\\s*([+-]?[\\d\\.]+)\\s*)?\\)$/i,\n       keyword = /(\\w+)/;\n\n   var rgb = [0, 0, 0],\n       a = 1,\n       match = string.match(abbr),\n       hexAlpha = \"\";\n   if (match) {\n      match = match[1];\n      hexAlpha = match[3];\n      for (var i = 0; i < rgb.length; i++) {\n         rgb[i] = parseInt(match[i] + match[i], 16);\n      }\n      if (hexAlpha) {\n         a = Math.round((parseInt(hexAlpha + hexAlpha, 16) / 255) * 100) / 100;\n      }\n   }\n   else if (match = string.match(hex)) {\n      hexAlpha = match[2];\n      match = match[1];\n      for (var i = 0; i < rgb.length; i++) {\n         rgb[i] = parseInt(match.slice(i * 2, i * 2 + 2), 16);\n      }\n      if (hexAlpha) {\n         a = Math.round((parseInt(hexAlpha, 16) / 255) * 100) / 100;\n      }\n   }\n   else if (match = string.match(rgba)) {\n      for (var i = 0; i < rgb.length; i++) {\n         rgb[i] = parseInt(match[i + 1]);\n      }\n      a = parseFloat(match[4]);\n   }\n   else if (match = string.match(per)) {\n      for (var i = 0; i < rgb.length; i++) {\n         rgb[i] = Math.round(parseFloat(match[i + 1]) * 2.55);\n      }\n      a = parseFloat(match[4]);\n   }\n   else if (match = string.match(keyword)) {\n      if (match[1] == \"transparent\") {\n         return [0, 0, 0, 0];\n      }\n      rgb = colorName$1[match[1]];\n      if (!rgb) {\n         return;\n      }\n   }\n\n   for (var i = 0; i < rgb.length; i++) {\n      rgb[i] = scale(rgb[i], 0, 255);\n   }\n   if (!a && a != 0) {\n      a = 1;\n   }\n   else {\n      a = scale(a, 0, 1);\n   }\n   rgb[3] = a;\n   return rgb;\n}\n\nfunction getHsla(string) {\n   if (!string) {\n      return;\n   }\n   var hsl = /^hsla?\\(\\s*([+-]?\\d+)(?:deg)?\\s*,\\s*([+-]?[\\d\\.]+)%\\s*,\\s*([+-]?[\\d\\.]+)%\\s*(?:,\\s*([+-]?[\\d\\.]+)\\s*)?\\)/;\n   var match = string.match(hsl);\n   if (match) {\n      var alpha = parseFloat(match[4]);\n      var h = scale(parseInt(match[1]), 0, 360),\n          s = scale(parseFloat(match[2]), 0, 100),\n          l = scale(parseFloat(match[3]), 0, 100),\n          a = scale(isNaN(alpha) ? 1 : alpha, 0, 1);\n      return [h, s, l, a];\n   }\n}\n\nfunction getHwb(string) {\n   if (!string) {\n      return;\n   }\n   var hwb = /^hwb\\(\\s*([+-]?\\d+)(?:deg)?\\s*,\\s*([+-]?[\\d\\.]+)%\\s*,\\s*([+-]?[\\d\\.]+)%\\s*(?:,\\s*([+-]?[\\d\\.]+)\\s*)?\\)/;\n   var match = string.match(hwb);\n   if (match) {\n    var alpha = parseFloat(match[4]);\n      var h = scale(parseInt(match[1]), 0, 360),\n          w = scale(parseFloat(match[2]), 0, 100),\n          b = scale(parseFloat(match[3]), 0, 100),\n          a = scale(isNaN(alpha) ? 1 : alpha, 0, 1);\n      return [h, w, b, a];\n   }\n}\n\nfunction getRgb(string) {\n   var rgba = getRgba(string);\n   return rgba && rgba.slice(0, 3);\n}\n\nfunction getHsl(string) {\n  var hsla = getHsla(string);\n  return hsla && hsla.slice(0, 3);\n}\n\nfunction getAlpha(string) {\n   var vals = getRgba(string);\n   if (vals) {\n      return vals[3];\n   }\n   else if (vals = getHsla(string)) {\n      return vals[3];\n   }\n   else if (vals = getHwb(string)) {\n      return vals[3];\n   }\n}\n\n// generators\nfunction hexString(rgba, a) {\n   var a = (a !== undefined && rgba.length === 3) ? a : rgba[3];\n   return \"#\" + hexDouble(rgba[0]) \n              + hexDouble(rgba[1])\n              + hexDouble(rgba[2])\n              + (\n                 (a >= 0 && a < 1)\n                 ? hexDouble(Math.round(a * 255))\n                 : \"\"\n              );\n}\n\nfunction rgbString(rgba, alpha) {\n   if (alpha < 1 || (rgba[3] && rgba[3] < 1)) {\n      return rgbaString(rgba, alpha);\n   }\n   return \"rgb(\" + rgba[0] + \", \" + rgba[1] + \", \" + rgba[2] + \")\";\n}\n\nfunction rgbaString(rgba, alpha) {\n   if (alpha === undefined) {\n      alpha = (rgba[3] !== undefined ? rgba[3] : 1);\n   }\n   return \"rgba(\" + rgba[0] + \", \" + rgba[1] + \", \" + rgba[2]\n           + \", \" + alpha + \")\";\n}\n\nfunction percentString(rgba, alpha) {\n   if (alpha < 1 || (rgba[3] && rgba[3] < 1)) {\n      return percentaString(rgba, alpha);\n   }\n   var r = Math.round(rgba[0]/255 * 100),\n       g = Math.round(rgba[1]/255 * 100),\n       b = Math.round(rgba[2]/255 * 100);\n\n   return \"rgb(\" + r + \"%, \" + g + \"%, \" + b + \"%)\";\n}\n\nfunction percentaString(rgba, alpha) {\n   var r = Math.round(rgba[0]/255 * 100),\n       g = Math.round(rgba[1]/255 * 100),\n       b = Math.round(rgba[2]/255 * 100);\n   return \"rgba(\" + r + \"%, \" + g + \"%, \" + b + \"%, \" + (alpha || rgba[3] || 1) + \")\";\n}\n\nfunction hslString(hsla, alpha) {\n   if (alpha < 1 || (hsla[3] && hsla[3] < 1)) {\n      return hslaString(hsla, alpha);\n   }\n   return \"hsl(\" + hsla[0] + \", \" + hsla[1] + \"%, \" + hsla[2] + \"%)\";\n}\n\nfunction hslaString(hsla, alpha) {\n   if (alpha === undefined) {\n      alpha = (hsla[3] !== undefined ? hsla[3] : 1);\n   }\n   return \"hsla(\" + hsla[0] + \", \" + hsla[1] + \"%, \" + hsla[2] + \"%, \"\n           + alpha + \")\";\n}\n\n// hwb is a bit different than rgb(a) & hsl(a) since there is no alpha specific syntax\n// (hwb have alpha optional & 1 is default value)\nfunction hwbString(hwb, alpha) {\n   if (alpha === undefined) {\n      alpha = (hwb[3] !== undefined ? hwb[3] : 1);\n   }\n   return \"hwb(\" + hwb[0] + \", \" + hwb[1] + \"%, \" + hwb[2] + \"%\"\n           + (alpha !== undefined && alpha !== 1 ? \", \" + alpha : \"\") + \")\";\n}\n\nfunction keyword(rgb) {\n  return reverseNames[rgb.slice(0, 3)];\n}\n\n// helpers\nfunction scale(num, min, max) {\n   return Math.min(Math.max(min, num), max);\n}\n\nfunction hexDouble(num) {\n  var str = num.toString(16).toUpperCase();\n  return (str.length < 2) ? \"0\" + str : str;\n}\n\n\n//create a list of reverse color names\nvar reverseNames = {};\nfor (var name in colorName$1) {\n   reverseNames[colorName$1[name]] = name;\n}\n\n/* MIT license */\n\n\n\nvar Color = function (obj) {\n\tif (obj instanceof Color) {\n\t\treturn obj;\n\t}\n\tif (!(this instanceof Color)) {\n\t\treturn new Color(obj);\n\t}\n\n\tthis.valid = false;\n\tthis.values = {\n\t\trgb: [0, 0, 0],\n\t\thsl: [0, 0, 0],\n\t\thsv: [0, 0, 0],\n\t\thwb: [0, 0, 0],\n\t\tcmyk: [0, 0, 0, 0],\n\t\talpha: 1\n\t};\n\n\t// parse Color() argument\n\tvar vals;\n\tif (typeof obj === 'string') {\n\t\tvals = colorString.getRgba(obj);\n\t\tif (vals) {\n\t\t\tthis.setValues('rgb', vals);\n\t\t} else if (vals = colorString.getHsla(obj)) {\n\t\t\tthis.setValues('hsl', vals);\n\t\t} else if (vals = colorString.getHwb(obj)) {\n\t\t\tthis.setValues('hwb', vals);\n\t\t}\n\t} else if (typeof obj === 'object') {\n\t\tvals = obj;\n\t\tif (vals.r !== undefined || vals.red !== undefined) {\n\t\t\tthis.setValues('rgb', vals);\n\t\t} else if (vals.l !== undefined || vals.lightness !== undefined) {\n\t\t\tthis.setValues('hsl', vals);\n\t\t} else if (vals.v !== undefined || vals.value !== undefined) {\n\t\t\tthis.setValues('hsv', vals);\n\t\t} else if (vals.w !== undefined || vals.whiteness !== undefined) {\n\t\t\tthis.setValues('hwb', vals);\n\t\t} else if (vals.c !== undefined || vals.cyan !== undefined) {\n\t\t\tthis.setValues('cmyk', vals);\n\t\t}\n\t}\n};\n\nColor.prototype = {\n\tisValid: function () {\n\t\treturn this.valid;\n\t},\n\trgb: function () {\n\t\treturn this.setSpace('rgb', arguments);\n\t},\n\thsl: function () {\n\t\treturn this.setSpace('hsl', arguments);\n\t},\n\thsv: function () {\n\t\treturn this.setSpace('hsv', arguments);\n\t},\n\thwb: function () {\n\t\treturn this.setSpace('hwb', arguments);\n\t},\n\tcmyk: function () {\n\t\treturn this.setSpace('cmyk', arguments);\n\t},\n\n\trgbArray: function () {\n\t\treturn this.values.rgb;\n\t},\n\thslArray: function () {\n\t\treturn this.values.hsl;\n\t},\n\thsvArray: function () {\n\t\treturn this.values.hsv;\n\t},\n\thwbArray: function () {\n\t\tvar values = this.values;\n\t\tif (values.alpha !== 1) {\n\t\t\treturn values.hwb.concat([values.alpha]);\n\t\t}\n\t\treturn values.hwb;\n\t},\n\tcmykArray: function () {\n\t\treturn this.values.cmyk;\n\t},\n\trgbaArray: function () {\n\t\tvar values = this.values;\n\t\treturn values.rgb.concat([values.alpha]);\n\t},\n\thslaArray: function () {\n\t\tvar values = this.values;\n\t\treturn values.hsl.concat([values.alpha]);\n\t},\n\talpha: function (val) {\n\t\tif (val === undefined) {\n\t\t\treturn this.values.alpha;\n\t\t}\n\t\tthis.setValues('alpha', val);\n\t\treturn this;\n\t},\n\n\tred: function (val) {\n\t\treturn this.setChannel('rgb', 0, val);\n\t},\n\tgreen: function (val) {\n\t\treturn this.setChannel('rgb', 1, val);\n\t},\n\tblue: function (val) {\n\t\treturn this.setChannel('rgb', 2, val);\n\t},\n\thue: function (val) {\n\t\tif (val) {\n\t\t\tval %= 360;\n\t\t\tval = val < 0 ? 360 + val : val;\n\t\t}\n\t\treturn this.setChannel('hsl', 0, val);\n\t},\n\tsaturation: function (val) {\n\t\treturn this.setChannel('hsl', 1, val);\n\t},\n\tlightness: function (val) {\n\t\treturn this.setChannel('hsl', 2, val);\n\t},\n\tsaturationv: function (val) {\n\t\treturn this.setChannel('hsv', 1, val);\n\t},\n\twhiteness: function (val) {\n\t\treturn this.setChannel('hwb', 1, val);\n\t},\n\tblackness: function (val) {\n\t\treturn this.setChannel('hwb', 2, val);\n\t},\n\tvalue: function (val) {\n\t\treturn this.setChannel('hsv', 2, val);\n\t},\n\tcyan: function (val) {\n\t\treturn this.setChannel('cmyk', 0, val);\n\t},\n\tmagenta: function (val) {\n\t\treturn this.setChannel('cmyk', 1, val);\n\t},\n\tyellow: function (val) {\n\t\treturn this.setChannel('cmyk', 2, val);\n\t},\n\tblack: function (val) {\n\t\treturn this.setChannel('cmyk', 3, val);\n\t},\n\n\thexString: function () {\n\t\treturn colorString.hexString(this.values.rgb);\n\t},\n\trgbString: function () {\n\t\treturn colorString.rgbString(this.values.rgb, this.values.alpha);\n\t},\n\trgbaString: function () {\n\t\treturn colorString.rgbaString(this.values.rgb, this.values.alpha);\n\t},\n\tpercentString: function () {\n\t\treturn colorString.percentString(this.values.rgb, this.values.alpha);\n\t},\n\thslString: function () {\n\t\treturn colorString.hslString(this.values.hsl, this.values.alpha);\n\t},\n\thslaString: function () {\n\t\treturn colorString.hslaString(this.values.hsl, this.values.alpha);\n\t},\n\thwbString: function () {\n\t\treturn colorString.hwbString(this.values.hwb, this.values.alpha);\n\t},\n\tkeyword: function () {\n\t\treturn colorString.keyword(this.values.rgb, this.values.alpha);\n\t},\n\n\trgbNumber: function () {\n\t\tvar rgb = this.values.rgb;\n\t\treturn (rgb[0] << 16) | (rgb[1] << 8) | rgb[2];\n\t},\n\n\tluminosity: function () {\n\t\t// http://www.w3.org/TR/WCAG20/#relativeluminancedef\n\t\tvar rgb = this.values.rgb;\n\t\tvar lum = [];\n\t\tfor (var i = 0; i < rgb.length; i++) {\n\t\t\tvar chan = rgb[i] / 255;\n\t\t\tlum[i] = (chan <= 0.03928) ? chan / 12.92 : Math.pow(((chan + 0.055) / 1.055), 2.4);\n\t\t}\n\t\treturn 0.2126 * lum[0] + 0.7152 * lum[1] + 0.0722 * lum[2];\n\t},\n\n\tcontrast: function (color2) {\n\t\t// http://www.w3.org/TR/WCAG20/#contrast-ratiodef\n\t\tvar lum1 = this.luminosity();\n\t\tvar lum2 = color2.luminosity();\n\t\tif (lum1 > lum2) {\n\t\t\treturn (lum1 + 0.05) / (lum2 + 0.05);\n\t\t}\n\t\treturn (lum2 + 0.05) / (lum1 + 0.05);\n\t},\n\n\tlevel: function (color2) {\n\t\tvar contrastRatio = this.contrast(color2);\n\t\tif (contrastRatio >= 7.1) {\n\t\t\treturn 'AAA';\n\t\t}\n\n\t\treturn (contrastRatio >= 4.5) ? 'AA' : '';\n\t},\n\n\tdark: function () {\n\t\t// YIQ equation from http://24ways.org/2010/calculating-color-contrast\n\t\tvar rgb = this.values.rgb;\n\t\tvar yiq = (rgb[0] * 299 + rgb[1] * 587 + rgb[2] * 114) / 1000;\n\t\treturn yiq < 128;\n\t},\n\n\tlight: function () {\n\t\treturn !this.dark();\n\t},\n\n\tnegate: function () {\n\t\tvar rgb = [];\n\t\tfor (var i = 0; i < 3; i++) {\n\t\t\trgb[i] = 255 - this.values.rgb[i];\n\t\t}\n\t\tthis.setValues('rgb', rgb);\n\t\treturn this;\n\t},\n\n\tlighten: function (ratio) {\n\t\tvar hsl = this.values.hsl;\n\t\thsl[2] += hsl[2] * ratio;\n\t\tthis.setValues('hsl', hsl);\n\t\treturn this;\n\t},\n\n\tdarken: function (ratio) {\n\t\tvar hsl = this.values.hsl;\n\t\thsl[2] -= hsl[2] * ratio;\n\t\tthis.setValues('hsl', hsl);\n\t\treturn this;\n\t},\n\n\tsaturate: function (ratio) {\n\t\tvar hsl = this.values.hsl;\n\t\thsl[1] += hsl[1] * ratio;\n\t\tthis.setValues('hsl', hsl);\n\t\treturn this;\n\t},\n\n\tdesaturate: function (ratio) {\n\t\tvar hsl = this.values.hsl;\n\t\thsl[1] -= hsl[1] * ratio;\n\t\tthis.setValues('hsl', hsl);\n\t\treturn this;\n\t},\n\n\twhiten: function (ratio) {\n\t\tvar hwb = this.values.hwb;\n\t\thwb[1] += hwb[1] * ratio;\n\t\tthis.setValues('hwb', hwb);\n\t\treturn this;\n\t},\n\n\tblacken: function (ratio) {\n\t\tvar hwb = this.values.hwb;\n\t\thwb[2] += hwb[2] * ratio;\n\t\tthis.setValues('hwb', hwb);\n\t\treturn this;\n\t},\n\n\tgreyscale: function () {\n\t\tvar rgb = this.values.rgb;\n\t\t// http://en.wikipedia.org/wiki/Grayscale#Converting_color_to_grayscale\n\t\tvar val = rgb[0] * 0.3 + rgb[1] * 0.59 + rgb[2] * 0.11;\n\t\tthis.setValues('rgb', [val, val, val]);\n\t\treturn this;\n\t},\n\n\tclearer: function (ratio) {\n\t\tvar alpha = this.values.alpha;\n\t\tthis.setValues('alpha', alpha - (alpha * ratio));\n\t\treturn this;\n\t},\n\n\topaquer: function (ratio) {\n\t\tvar alpha = this.values.alpha;\n\t\tthis.setValues('alpha', alpha + (alpha * ratio));\n\t\treturn this;\n\t},\n\n\trotate: function (degrees) {\n\t\tvar hsl = this.values.hsl;\n\t\tvar hue = (hsl[0] + degrees) % 360;\n\t\thsl[0] = hue < 0 ? 360 + hue : hue;\n\t\tthis.setValues('hsl', hsl);\n\t\treturn this;\n\t},\n\n\t/**\n\t * Ported from sass implementation in C\n\t * https://github.com/sass/libsass/blob/0e6b4a2850092356aa3ece07c6b249f0221caced/functions.cpp#L209\n\t */\n\tmix: function (mixinColor, weight) {\n\t\tvar color1 = this;\n\t\tvar color2 = mixinColor;\n\t\tvar p = weight === undefined ? 0.5 : weight;\n\n\t\tvar w = 2 * p - 1;\n\t\tvar a = color1.alpha() - color2.alpha();\n\n\t\tvar w1 = (((w * a === -1) ? w : (w + a) / (1 + w * a)) + 1) / 2.0;\n\t\tvar w2 = 1 - w1;\n\n\t\treturn this\n\t\t\t.rgb(\n\t\t\t\tw1 * color1.red() + w2 * color2.red(),\n\t\t\t\tw1 * color1.green() + w2 * color2.green(),\n\t\t\t\tw1 * color1.blue() + w2 * color2.blue()\n\t\t\t)\n\t\t\t.alpha(color1.alpha() * p + color2.alpha() * (1 - p));\n\t},\n\n\ttoJSON: function () {\n\t\treturn this.rgb();\n\t},\n\n\tclone: function () {\n\t\t// NOTE(SB): using node-clone creates a dependency to Buffer when using browserify,\n\t\t// making the final build way to big to embed in Chart.js. So let's do it manually,\n\t\t// assuming that values to clone are 1 dimension arrays containing only numbers,\n\t\t// except 'alpha' which is a number.\n\t\tvar result = new Color();\n\t\tvar source = this.values;\n\t\tvar target = result.values;\n\t\tvar value, type;\n\n\t\tfor (var prop in source) {\n\t\t\tif (source.hasOwnProperty(prop)) {\n\t\t\t\tvalue = source[prop];\n\t\t\t\ttype = ({}).toString.call(value);\n\t\t\t\tif (type === '[object Array]') {\n\t\t\t\t\ttarget[prop] = value.slice(0);\n\t\t\t\t} else if (type === '[object Number]') {\n\t\t\t\t\ttarget[prop] = value;\n\t\t\t\t} else {\n\t\t\t\t\tconsole.error('unexpected color value:', value);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn result;\n\t}\n};\n\nColor.prototype.spaces = {\n\trgb: ['red', 'green', 'blue'],\n\thsl: ['hue', 'saturation', 'lightness'],\n\thsv: ['hue', 'saturation', 'value'],\n\thwb: ['hue', 'whiteness', 'blackness'],\n\tcmyk: ['cyan', 'magenta', 'yellow', 'black']\n};\n\nColor.prototype.maxes = {\n\trgb: [255, 255, 255],\n\thsl: [360, 100, 100],\n\thsv: [360, 100, 100],\n\thwb: [360, 100, 100],\n\tcmyk: [100, 100, 100, 100]\n};\n\nColor.prototype.getValues = function (space) {\n\tvar values = this.values;\n\tvar vals = {};\n\n\tfor (var i = 0; i < space.length; i++) {\n\t\tvals[space.charAt(i)] = values[space][i];\n\t}\n\n\tif (values.alpha !== 1) {\n\t\tvals.a = values.alpha;\n\t}\n\n\t// {r: 255, g: 255, b: 255, a: 0.4}\n\treturn vals;\n};\n\nColor.prototype.setValues = function (space, vals) {\n\tvar values = this.values;\n\tvar spaces = this.spaces;\n\tvar maxes = this.maxes;\n\tvar alpha = 1;\n\tvar i;\n\n\tthis.valid = true;\n\n\tif (space === 'alpha') {\n\t\talpha = vals;\n\t} else if (vals.length) {\n\t\t// [10, 10, 10]\n\t\tvalues[space] = vals.slice(0, space.length);\n\t\talpha = vals[space.length];\n\t} else if (vals[space.charAt(0)] !== undefined) {\n\t\t// {r: 10, g: 10, b: 10}\n\t\tfor (i = 0; i < space.length; i++) {\n\t\t\tvalues[space][i] = vals[space.charAt(i)];\n\t\t}\n\n\t\talpha = vals.a;\n\t} else if (vals[spaces[space][0]] !== undefined) {\n\t\t// {red: 10, green: 10, blue: 10}\n\t\tvar chans = spaces[space];\n\n\t\tfor (i = 0; i < space.length; i++) {\n\t\t\tvalues[space][i] = vals[chans[i]];\n\t\t}\n\n\t\talpha = vals.alpha;\n\t}\n\n\tvalues.alpha = Math.max(0, Math.min(1, (alpha === undefined ? values.alpha : alpha)));\n\n\tif (space === 'alpha') {\n\t\treturn false;\n\t}\n\n\tvar capped;\n\n\t// cap values of the space prior converting all values\n\tfor (i = 0; i < space.length; i++) {\n\t\tcapped = Math.max(0, Math.min(maxes[space][i], values[space][i]));\n\t\tvalues[space][i] = Math.round(capped);\n\t}\n\n\t// convert to all the other color spaces\n\tfor (var sname in spaces) {\n\t\tif (sname !== space) {\n\t\t\tvalues[sname] = colorConvert[space][sname](values[space]);\n\t\t}\n\t}\n\n\treturn true;\n};\n\nColor.prototype.setSpace = function (space, args) {\n\tvar vals = args[0];\n\n\tif (vals === undefined) {\n\t\t// color.rgb()\n\t\treturn this.getValues(space);\n\t}\n\n\t// color.rgb(10, 10, 10)\n\tif (typeof vals === 'number') {\n\t\tvals = Array.prototype.slice.call(args);\n\t}\n\n\tthis.setValues(space, vals);\n\treturn this;\n};\n\nColor.prototype.setChannel = function (space, index, val) {\n\tvar svalues = this.values[space];\n\tif (val === undefined) {\n\t\t// color.red()\n\t\treturn svalues[index];\n\t} else if (val === svalues[index]) {\n\t\t// color.red(color.red())\n\t\treturn this;\n\t}\n\n\t// color.red(100)\n\tsvalues[index] = val;\n\tthis.setValues(space, svalues);\n\n\treturn this;\n};\n\nif (typeof window !== 'undefined') {\n\twindow.Color = Color;\n}\n\nvar chartjsColor = Color;\n\nfunction isValidKey(key) {\r\n\treturn ['__proto__', 'prototype', 'constructor'].indexOf(key) === -1;\r\n}\r\n\r\n/**\r\n * @namespace Chart.helpers\r\n */\r\nvar helpers = {\r\n\t/**\r\n\t * An empty function that can be used, for example, for optional callback.\r\n\t */\r\n\tnoop: function() {},\r\n\r\n\t/**\r\n\t * Returns a unique id, sequentially generated from a global variable.\r\n\t * @returns {number}\r\n\t * @function\r\n\t */\r\n\tuid: (function() {\r\n\t\tvar id = 0;\r\n\t\treturn function() {\r\n\t\t\treturn id++;\r\n\t\t};\r\n\t}()),\r\n\r\n\t/**\r\n\t * Returns true if `value` is neither null nor undefined, else returns false.\r\n\t * @param {*} value - The value to test.\r\n\t * @returns {boolean}\r\n\t * @since 2.7.0\r\n\t */\r\n\tisNullOrUndef: function(value) {\r\n\t\treturn value === null || typeof value === 'undefined';\r\n\t},\r\n\r\n\t/**\r\n\t * Returns true if `value` is an array (including typed arrays), else returns false.\r\n\t * @param {*} value - The value to test.\r\n\t * @returns {boolean}\r\n\t * @function\r\n\t */\r\n\tisArray: function(value) {\r\n\t\tif (Array.isArray && Array.isArray(value)) {\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\tvar type = Object.prototype.toString.call(value);\r\n\t\tif (type.substr(0, 7) === '[object' && type.substr(-6) === 'Array]') {\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\treturn false;\r\n\t},\r\n\r\n\t/**\r\n\t * Returns true if `value` is an object (excluding null), else returns false.\r\n\t * @param {*} value - The value to test.\r\n\t * @returns {boolean}\r\n\t * @since 2.7.0\r\n\t */\r\n\tisObject: function(value) {\r\n\t\treturn value !== null && Object.prototype.toString.call(value) === '[object Object]';\r\n\t},\r\n\r\n\t/**\r\n\t * Returns true if `value` is a finite number, else returns false\r\n\t * @param {*} value  - The value to test.\r\n\t * @returns {boolean}\r\n\t */\r\n\tisFinite: function(value) {\r\n\t\treturn (typeof value === 'number' || value instanceof Number) && isFinite(value);\r\n\t},\r\n\r\n\t/**\r\n\t * Returns `value` if defined, else returns `defaultValue`.\r\n\t * @param {*} value - The value to return if defined.\r\n\t * @param {*} defaultValue - The value to return if `value` is undefined.\r\n\t * @returns {*}\r\n\t */\r\n\tvalueOrDefault: function(value, defaultValue) {\r\n\t\treturn typeof value === 'undefined' ? defaultValue : value;\r\n\t},\r\n\r\n\t/**\r\n\t * Returns value at the given `index` in array if defined, else returns `defaultValue`.\r\n\t * @param {Array} value - The array to lookup for value at `index`.\r\n\t * @param {number} index - The index in `value` to lookup for value.\r\n\t * @param {*} defaultValue - The value to return if `value[index]` is undefined.\r\n\t * @returns {*}\r\n\t */\r\n\tvalueAtIndexOrDefault: function(value, index, defaultValue) {\r\n\t\treturn helpers.valueOrDefault(helpers.isArray(value) ? value[index] : value, defaultValue);\r\n\t},\r\n\r\n\t/**\r\n\t * Calls `fn` with the given `args` in the scope defined by `thisArg` and returns the\r\n\t * value returned by `fn`. If `fn` is not a function, this method returns undefined.\r\n\t * @param {function} fn - The function to call.\r\n\t * @param {Array|undefined|null} args - The arguments with which `fn` should be called.\r\n\t * @param {object} [thisArg] - The value of `this` provided for the call to `fn`.\r\n\t * @returns {*}\r\n\t */\r\n\tcallback: function(fn, args, thisArg) {\r\n\t\tif (fn && typeof fn.call === 'function') {\r\n\t\t\treturn fn.apply(thisArg, args);\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t * Note(SB) for performance sake, this method should only be used when loopable type\r\n\t * is unknown or in none intensive code (not called often and small loopable). Else\r\n\t * it's preferable to use a regular for() loop and save extra function calls.\r\n\t * @param {object|Array} loopable - The object or array to be iterated.\r\n\t * @param {function} fn - The function to call for each item.\r\n\t * @param {object} [thisArg] - The value of `this` provided for the call to `fn`.\r\n\t * @param {boolean} [reverse] - If true, iterates backward on the loopable.\r\n\t */\r\n\teach: function(loopable, fn, thisArg, reverse) {\r\n\t\tvar i, len, keys;\r\n\t\tif (helpers.isArray(loopable)) {\r\n\t\t\tlen = loopable.length;\r\n\t\t\tif (reverse) {\r\n\t\t\t\tfor (i = len - 1; i >= 0; i--) {\r\n\t\t\t\t\tfn.call(thisArg, loopable[i], i);\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tfor (i = 0; i < len; i++) {\r\n\t\t\t\t\tfn.call(thisArg, loopable[i], i);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} else if (helpers.isObject(loopable)) {\r\n\t\t\tkeys = Object.keys(loopable);\r\n\t\t\tlen = keys.length;\r\n\t\t\tfor (i = 0; i < len; i++) {\r\n\t\t\t\tfn.call(thisArg, loopable[keys[i]], keys[i]);\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t * Returns true if the `a0` and `a1` arrays have the same content, else returns false.\r\n\t * @see https://stackoverflow.com/a/14853974\r\n\t * @param {Array} a0 - The array to compare\r\n\t * @param {Array} a1 - The array to compare\r\n\t * @returns {boolean}\r\n\t */\r\n\tarrayEquals: function(a0, a1) {\r\n\t\tvar i, ilen, v0, v1;\r\n\r\n\t\tif (!a0 || !a1 || a0.length !== a1.length) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tfor (i = 0, ilen = a0.length; i < ilen; ++i) {\r\n\t\t\tv0 = a0[i];\r\n\t\t\tv1 = a1[i];\r\n\r\n\t\t\tif (v0 instanceof Array && v1 instanceof Array) {\r\n\t\t\t\tif (!helpers.arrayEquals(v0, v1)) {\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t} else if (v0 !== v1) {\r\n\t\t\t\t// NOTE: two different object instances will never be equal: {x:20} != {x:20}\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn true;\r\n\t},\r\n\r\n\t/**\r\n\t * Returns a deep copy of `source` without keeping references on objects and arrays.\r\n\t * @param {*} source - The value to clone.\r\n\t * @returns {*}\r\n\t */\r\n\tclone: function(source) {\r\n\t\tif (helpers.isArray(source)) {\r\n\t\t\treturn source.map(helpers.clone);\r\n\t\t}\r\n\r\n\t\tif (helpers.isObject(source)) {\r\n\t\t\tvar target = Object.create(source);\r\n\t\t\tvar keys = Object.keys(source);\r\n\t\t\tvar klen = keys.length;\r\n\t\t\tvar k = 0;\r\n\r\n\t\t\tfor (; k < klen; ++k) {\r\n\t\t\t\ttarget[keys[k]] = helpers.clone(source[keys[k]]);\r\n\t\t\t}\r\n\r\n\t\t\treturn target;\r\n\t\t}\r\n\r\n\t\treturn source;\r\n\t},\r\n\r\n\t/**\r\n\t * The default merger when Chart.helpers.merge is called without merger option.\r\n\t * Note(SB): also used by mergeConfig and mergeScaleConfig as fallback.\r\n\t * @private\r\n\t */\r\n\t_merger: function(key, target, source, options) {\r\n\t\tif (!isValidKey(key)) {\r\n\t\t\t// We want to ensure we do not copy prototypes over\r\n\t\t\t// as this can pollute global namespaces\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tvar tval = target[key];\r\n\t\tvar sval = source[key];\r\n\r\n\t\tif (helpers.isObject(tval) && helpers.isObject(sval)) {\r\n\t\t\thelpers.merge(tval, sval, options);\r\n\t\t} else {\r\n\t\t\ttarget[key] = helpers.clone(sval);\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t * Merges source[key] in target[key] only if target[key] is undefined.\r\n\t * @private\r\n\t */\r\n\t_mergerIf: function(key, target, source) {\r\n\t\tif (!isValidKey(key)) {\r\n\t\t\t// We want to ensure we do not copy prototypes over\r\n\t\t\t// as this can pollute global namespaces\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tvar tval = target[key];\r\n\t\tvar sval = source[key];\r\n\r\n\t\tif (helpers.isObject(tval) && helpers.isObject(sval)) {\r\n\t\t\thelpers.mergeIf(tval, sval);\r\n\t\t} else if (!target.hasOwnProperty(key)) {\r\n\t\t\ttarget[key] = helpers.clone(sval);\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t * Recursively deep copies `source` properties into `target` with the given `options`.\r\n\t * IMPORTANT: `target` is not cloned and will be updated with `source` properties.\r\n\t * @param {object} target - The target object in which all sources are merged into.\r\n\t * @param {object|object[]} source - Object(s) to merge into `target`.\r\n\t * @param {object} [options] - Merging options:\r\n\t * @param {function} [options.merger] - The merge method (key, target, source, options)\r\n\t * @returns {object} The `target` object.\r\n\t */\r\n\tmerge: function(target, source, options) {\r\n\t\tvar sources = helpers.isArray(source) ? source : [source];\r\n\t\tvar ilen = sources.length;\r\n\t\tvar merge, i, keys, klen, k;\r\n\r\n\t\tif (!helpers.isObject(target)) {\r\n\t\t\treturn target;\r\n\t\t}\r\n\r\n\t\toptions = options || {};\r\n\t\tmerge = options.merger || helpers._merger;\r\n\r\n\t\tfor (i = 0; i < ilen; ++i) {\r\n\t\t\tsource = sources[i];\r\n\t\t\tif (!helpers.isObject(source)) {\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\r\n\t\t\tkeys = Object.keys(source);\r\n\t\t\tfor (k = 0, klen = keys.length; k < klen; ++k) {\r\n\t\t\t\tmerge(keys[k], target, source, options);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn target;\r\n\t},\r\n\r\n\t/**\r\n\t * Recursively deep copies `source` properties into `target` *only* if not defined in target.\r\n\t * IMPORTANT: `target` is not cloned and will be updated with `source` properties.\r\n\t * @param {object} target - The target object in which all sources are merged into.\r\n\t * @param {object|object[]} source - Object(s) to merge into `target`.\r\n\t * @returns {object} The `target` object.\r\n\t */\r\n\tmergeIf: function(target, source) {\r\n\t\treturn helpers.merge(target, source, {merger: helpers._mergerIf});\r\n\t},\r\n\r\n\t/**\r\n\t * Applies the contents of two or more objects together into the first object.\r\n\t * @param {object} target - The target object in which all objects are merged into.\r\n\t * @param {object} arg1 - Object containing additional properties to merge in target.\r\n\t * @param {object} argN - Additional objects containing properties to merge in target.\r\n\t * @returns {object} The `target` object.\r\n\t */\r\n\textend: Object.assign || function(target) {\r\n\t\treturn helpers.merge(target, [].slice.call(arguments, 1), {\r\n\t\t\tmerger: function(key, dst, src) {\r\n\t\t\t\tdst[key] = src[key];\r\n\t\t\t}\r\n\t\t});\r\n\t},\r\n\r\n\t/**\r\n\t * Basic javascript inheritance based on the model created in Backbone.js\r\n\t */\r\n\tinherits: function(extensions) {\r\n\t\tvar me = this;\r\n\t\tvar ChartElement = (extensions && extensions.hasOwnProperty('constructor')) ? extensions.constructor : function() {\r\n\t\t\treturn me.apply(this, arguments);\r\n\t\t};\r\n\r\n\t\tvar Surrogate = function() {\r\n\t\t\tthis.constructor = ChartElement;\r\n\t\t};\r\n\r\n\t\tSurrogate.prototype = me.prototype;\r\n\t\tChartElement.prototype = new Surrogate();\r\n\t\tChartElement.extend = helpers.inherits;\r\n\r\n\t\tif (extensions) {\r\n\t\t\thelpers.extend(ChartElement.prototype, extensions);\r\n\t\t}\r\n\r\n\t\tChartElement.__super__ = me.prototype;\r\n\t\treturn ChartElement;\r\n\t},\r\n\r\n\t_deprecated: function(scope, value, previous, current) {\r\n\t\tif (value !== undefined) {\r\n\t\t\tconsole.warn(scope + ': \"' + previous +\r\n\t\t\t\t'\" is deprecated. Please use \"' + current + '\" instead');\r\n\t\t}\r\n\t}\r\n};\r\n\r\nvar helpers_core = helpers;\r\n\r\n// DEPRECATIONS\r\n\r\n/**\r\n * Provided for backward compatibility, use Chart.helpers.callback instead.\r\n * @function Chart.helpers.callCallback\r\n * @deprecated since version 2.6.0\r\n * @todo remove at version 3\r\n * @private\r\n */\r\nhelpers.callCallback = helpers.callback;\r\n\r\n/**\r\n * Provided for backward compatibility, use Array.prototype.indexOf instead.\r\n * Array.prototype.indexOf compatibility: Chrome, Opera, Safari, FF1.5+, IE9+\r\n * @function Chart.helpers.indexOf\r\n * @deprecated since version 2.7.0\r\n * @todo remove at version 3\r\n * @private\r\n */\r\nhelpers.indexOf = function(array, item, fromIndex) {\r\n\treturn Array.prototype.indexOf.call(array, item, fromIndex);\r\n};\r\n\r\n/**\r\n * Provided for backward compatibility, use Chart.helpers.valueOrDefault instead.\r\n * @function Chart.helpers.getValueOrDefault\r\n * @deprecated since version 2.7.0\r\n * @todo remove at version 3\r\n * @private\r\n */\r\nhelpers.getValueOrDefault = helpers.valueOrDefault;\r\n\r\n/**\r\n * Provided for backward compatibility, use Chart.helpers.valueAtIndexOrDefault instead.\r\n * @function Chart.helpers.getValueAtIndexOrDefault\r\n * @deprecated since version 2.7.0\r\n * @todo remove at version 3\r\n * @private\r\n */\r\nhelpers.getValueAtIndexOrDefault = helpers.valueAtIndexOrDefault;\n\n/**\r\n * Easing functions adapted from Robert Penner's easing equations.\r\n * @namespace Chart.helpers.easingEffects\r\n * @see http://www.robertpenner.com/easing/\r\n */\r\nvar effects = {\r\n\tlinear: function(t) {\r\n\t\treturn t;\r\n\t},\r\n\r\n\teaseInQuad: function(t) {\r\n\t\treturn t * t;\r\n\t},\r\n\r\n\teaseOutQuad: function(t) {\r\n\t\treturn -t * (t - 2);\r\n\t},\r\n\r\n\teaseInOutQuad: function(t) {\r\n\t\tif ((t /= 0.5) < 1) {\r\n\t\t\treturn 0.5 * t * t;\r\n\t\t}\r\n\t\treturn -0.5 * ((--t) * (t - 2) - 1);\r\n\t},\r\n\r\n\teaseInCubic: function(t) {\r\n\t\treturn t * t * t;\r\n\t},\r\n\r\n\teaseOutCubic: function(t) {\r\n\t\treturn (t = t - 1) * t * t + 1;\r\n\t},\r\n\r\n\teaseInOutCubic: function(t) {\r\n\t\tif ((t /= 0.5) < 1) {\r\n\t\t\treturn 0.5 * t * t * t;\r\n\t\t}\r\n\t\treturn 0.5 * ((t -= 2) * t * t + 2);\r\n\t},\r\n\r\n\teaseInQuart: function(t) {\r\n\t\treturn t * t * t * t;\r\n\t},\r\n\r\n\teaseOutQuart: function(t) {\r\n\t\treturn -((t = t - 1) * t * t * t - 1);\r\n\t},\r\n\r\n\teaseInOutQuart: function(t) {\r\n\t\tif ((t /= 0.5) < 1) {\r\n\t\t\treturn 0.5 * t * t * t * t;\r\n\t\t}\r\n\t\treturn -0.5 * ((t -= 2) * t * t * t - 2);\r\n\t},\r\n\r\n\teaseInQuint: function(t) {\r\n\t\treturn t * t * t * t * t;\r\n\t},\r\n\r\n\teaseOutQuint: function(t) {\r\n\t\treturn (t = t - 1) * t * t * t * t + 1;\r\n\t},\r\n\r\n\teaseInOutQuint: function(t) {\r\n\t\tif ((t /= 0.5) < 1) {\r\n\t\t\treturn 0.5 * t * t * t * t * t;\r\n\t\t}\r\n\t\treturn 0.5 * ((t -= 2) * t * t * t * t + 2);\r\n\t},\r\n\r\n\teaseInSine: function(t) {\r\n\t\treturn -Math.cos(t * (Math.PI / 2)) + 1;\r\n\t},\r\n\r\n\teaseOutSine: function(t) {\r\n\t\treturn Math.sin(t * (Math.PI / 2));\r\n\t},\r\n\r\n\teaseInOutSine: function(t) {\r\n\t\treturn -0.5 * (Math.cos(Math.PI * t) - 1);\r\n\t},\r\n\r\n\teaseInExpo: function(t) {\r\n\t\treturn (t === 0) ? 0 : Math.pow(2, 10 * (t - 1));\r\n\t},\r\n\r\n\teaseOutExpo: function(t) {\r\n\t\treturn (t === 1) ? 1 : -Math.pow(2, -10 * t) + 1;\r\n\t},\r\n\r\n\teaseInOutExpo: function(t) {\r\n\t\tif (t === 0) {\r\n\t\t\treturn 0;\r\n\t\t}\r\n\t\tif (t === 1) {\r\n\t\t\treturn 1;\r\n\t\t}\r\n\t\tif ((t /= 0.5) < 1) {\r\n\t\t\treturn 0.5 * Math.pow(2, 10 * (t - 1));\r\n\t\t}\r\n\t\treturn 0.5 * (-Math.pow(2, -10 * --t) + 2);\r\n\t},\r\n\r\n\teaseInCirc: function(t) {\r\n\t\tif (t >= 1) {\r\n\t\t\treturn t;\r\n\t\t}\r\n\t\treturn -(Math.sqrt(1 - t * t) - 1);\r\n\t},\r\n\r\n\teaseOutCirc: function(t) {\r\n\t\treturn Math.sqrt(1 - (t = t - 1) * t);\r\n\t},\r\n\r\n\teaseInOutCirc: function(t) {\r\n\t\tif ((t /= 0.5) < 1) {\r\n\t\t\treturn -0.5 * (Math.sqrt(1 - t * t) - 1);\r\n\t\t}\r\n\t\treturn 0.5 * (Math.sqrt(1 - (t -= 2) * t) + 1);\r\n\t},\r\n\r\n\teaseInElastic: function(t) {\r\n\t\tvar s = 1.70158;\r\n\t\tvar p = 0;\r\n\t\tvar a = 1;\r\n\t\tif (t === 0) {\r\n\t\t\treturn 0;\r\n\t\t}\r\n\t\tif (t === 1) {\r\n\t\t\treturn 1;\r\n\t\t}\r\n\t\tif (!p) {\r\n\t\t\tp = 0.3;\r\n\t\t}\r\n\t\tif (a < 1) {\r\n\t\t\ta = 1;\r\n\t\t\ts = p / 4;\r\n\t\t} else {\r\n\t\t\ts = p / (2 * Math.PI) * Math.asin(1 / a);\r\n\t\t}\r\n\t\treturn -(a * Math.pow(2, 10 * (t -= 1)) * Math.sin((t - s) * (2 * Math.PI) / p));\r\n\t},\r\n\r\n\teaseOutElastic: function(t) {\r\n\t\tvar s = 1.70158;\r\n\t\tvar p = 0;\r\n\t\tvar a = 1;\r\n\t\tif (t === 0) {\r\n\t\t\treturn 0;\r\n\t\t}\r\n\t\tif (t === 1) {\r\n\t\t\treturn 1;\r\n\t\t}\r\n\t\tif (!p) {\r\n\t\t\tp = 0.3;\r\n\t\t}\r\n\t\tif (a < 1) {\r\n\t\t\ta = 1;\r\n\t\t\ts = p / 4;\r\n\t\t} else {\r\n\t\t\ts = p / (2 * Math.PI) * Math.asin(1 / a);\r\n\t\t}\r\n\t\treturn a * Math.pow(2, -10 * t) * Math.sin((t - s) * (2 * Math.PI) / p) + 1;\r\n\t},\r\n\r\n\teaseInOutElastic: function(t) {\r\n\t\tvar s = 1.70158;\r\n\t\tvar p = 0;\r\n\t\tvar a = 1;\r\n\t\tif (t === 0) {\r\n\t\t\treturn 0;\r\n\t\t}\r\n\t\tif ((t /= 0.5) === 2) {\r\n\t\t\treturn 1;\r\n\t\t}\r\n\t\tif (!p) {\r\n\t\t\tp = 0.45;\r\n\t\t}\r\n\t\tif (a < 1) {\r\n\t\t\ta = 1;\r\n\t\t\ts = p / 4;\r\n\t\t} else {\r\n\t\t\ts = p / (2 * Math.PI) * Math.asin(1 / a);\r\n\t\t}\r\n\t\tif (t < 1) {\r\n\t\t\treturn -0.5 * (a * Math.pow(2, 10 * (t -= 1)) * Math.sin((t - s) * (2 * Math.PI) / p));\r\n\t\t}\r\n\t\treturn a * Math.pow(2, -10 * (t -= 1)) * Math.sin((t - s) * (2 * Math.PI) / p) * 0.5 + 1;\r\n\t},\r\n\teaseInBack: function(t) {\r\n\t\tvar s = 1.70158;\r\n\t\treturn t * t * ((s + 1) * t - s);\r\n\t},\r\n\r\n\teaseOutBack: function(t) {\r\n\t\tvar s = 1.70158;\r\n\t\treturn (t = t - 1) * t * ((s + 1) * t + s) + 1;\r\n\t},\r\n\r\n\teaseInOutBack: function(t) {\r\n\t\tvar s = 1.70158;\r\n\t\tif ((t /= 0.5) < 1) {\r\n\t\t\treturn 0.5 * (t * t * (((s *= (1.525)) + 1) * t - s));\r\n\t\t}\r\n\t\treturn 0.5 * ((t -= 2) * t * (((s *= (1.525)) + 1) * t + s) + 2);\r\n\t},\r\n\r\n\teaseInBounce: function(t) {\r\n\t\treturn 1 - effects.easeOutBounce(1 - t);\r\n\t},\r\n\r\n\teaseOutBounce: function(t) {\r\n\t\tif (t < (1 / 2.75)) {\r\n\t\t\treturn 7.5625 * t * t;\r\n\t\t}\r\n\t\tif (t < (2 / 2.75)) {\r\n\t\t\treturn 7.5625 * (t -= (1.5 / 2.75)) * t + 0.75;\r\n\t\t}\r\n\t\tif (t < (2.5 / 2.75)) {\r\n\t\t\treturn 7.5625 * (t -= (2.25 / 2.75)) * t + 0.9375;\r\n\t\t}\r\n\t\treturn 7.5625 * (t -= (2.625 / 2.75)) * t + 0.984375;\r\n\t},\r\n\r\n\teaseInOutBounce: function(t) {\r\n\t\tif (t < 0.5) {\r\n\t\t\treturn effects.easeInBounce(t * 2) * 0.5;\r\n\t\t}\r\n\t\treturn effects.easeOutBounce(t * 2 - 1) * 0.5 + 0.5;\r\n\t}\r\n};\r\n\r\nvar helpers_easing = {\r\n\teffects: effects\r\n};\r\n\r\n// DEPRECATIONS\r\n\r\n/**\r\n * Provided for backward compatibility, use Chart.helpers.easing.effects instead.\r\n * @function Chart.helpers.easingEffects\r\n * @deprecated since version 2.7.0\r\n * @todo remove at version 3\r\n * @private\r\n */\r\nhelpers_core.easingEffects = effects;\n\nvar PI = Math.PI;\r\nvar RAD_PER_DEG = PI / 180;\r\nvar DOUBLE_PI = PI * 2;\r\nvar HALF_PI = PI / 2;\r\nvar QUARTER_PI = PI / 4;\r\nvar TWO_THIRDS_PI = PI * 2 / 3;\r\n\r\n/**\r\n * @namespace Chart.helpers.canvas\r\n */\r\nvar exports$1 = {\r\n\t/**\r\n\t * Clears the entire canvas associated to the given `chart`.\r\n\t * @param {Chart} chart - The chart for which to clear the canvas.\r\n\t */\r\n\tclear: function(chart) {\r\n\t\tchart.ctx.clearRect(0, 0, chart.width, chart.height);\r\n\t},\r\n\r\n\t/**\r\n\t * Creates a \"path\" for a rectangle with rounded corners at position (x, y) with a\r\n\t * given size (width, height) and the same `radius` for all corners.\r\n\t * @param {CanvasRenderingContext2D} ctx - The canvas 2D Context.\r\n\t * @param {number} x - The x axis of the coordinate for the rectangle starting point.\r\n\t * @param {number} y - The y axis of the coordinate for the rectangle starting point.\r\n\t * @param {number} width - The rectangle's width.\r\n\t * @param {number} height - The rectangle's height.\r\n\t * @param {number} radius - The rounded amount (in pixels) for the four corners.\r\n\t * @todo handle `radius` as top-left, top-right, bottom-right, bottom-left array/object?\r\n\t */\r\n\troundedRect: function(ctx, x, y, width, height, radius) {\r\n\t\tif (radius) {\r\n\t\t\tvar r = Math.min(radius, height / 2, width / 2);\r\n\t\t\tvar left = x + r;\r\n\t\t\tvar top = y + r;\r\n\t\t\tvar right = x + width - r;\r\n\t\t\tvar bottom = y + height - r;\r\n\r\n\t\t\tctx.moveTo(x, top);\r\n\t\t\tif (left < right && top < bottom) {\r\n\t\t\t\tctx.arc(left, top, r, -PI, -HALF_PI);\r\n\t\t\t\tctx.arc(right, top, r, -HALF_PI, 0);\r\n\t\t\t\tctx.arc(right, bottom, r, 0, HALF_PI);\r\n\t\t\t\tctx.arc(left, bottom, r, HALF_PI, PI);\r\n\t\t\t} else if (left < right) {\r\n\t\t\t\tctx.moveTo(left, y);\r\n\t\t\t\tctx.arc(right, top, r, -HALF_PI, HALF_PI);\r\n\t\t\t\tctx.arc(left, top, r, HALF_PI, PI + HALF_PI);\r\n\t\t\t} else if (top < bottom) {\r\n\t\t\t\tctx.arc(left, top, r, -PI, 0);\r\n\t\t\t\tctx.arc(left, bottom, r, 0, PI);\r\n\t\t\t} else {\r\n\t\t\t\tctx.arc(left, top, r, -PI, PI);\r\n\t\t\t}\r\n\t\t\tctx.closePath();\r\n\t\t\tctx.moveTo(x, y);\r\n\t\t} else {\r\n\t\t\tctx.rect(x, y, width, height);\r\n\t\t}\r\n\t},\r\n\r\n\tdrawPoint: function(ctx, style, radius, x, y, rotation) {\r\n\t\tvar type, xOffset, yOffset, size, cornerRadius;\r\n\t\tvar rad = (rotation || 0) * RAD_PER_DEG;\r\n\r\n\t\tif (style && typeof style === 'object') {\r\n\t\t\ttype = style.toString();\r\n\t\t\tif (type === '[object HTMLImageElement]' || type === '[object HTMLCanvasElement]') {\r\n\t\t\t\tctx.save();\r\n\t\t\t\tctx.translate(x, y);\r\n\t\t\t\tctx.rotate(rad);\r\n\t\t\t\tctx.drawImage(style, -style.width / 2, -style.height / 2, style.width, style.height);\r\n\t\t\t\tctx.restore();\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (isNaN(radius) || radius <= 0) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tctx.beginPath();\r\n\r\n\t\tswitch (style) {\r\n\t\t// Default includes circle\r\n\t\tdefault:\r\n\t\t\tctx.arc(x, y, radius, 0, DOUBLE_PI);\r\n\t\t\tctx.closePath();\r\n\t\t\tbreak;\r\n\t\tcase 'triangle':\r\n\t\t\tctx.moveTo(x + Math.sin(rad) * radius, y - Math.cos(rad) * radius);\r\n\t\t\trad += TWO_THIRDS_PI;\r\n\t\t\tctx.lineTo(x + Math.sin(rad) * radius, y - Math.cos(rad) * radius);\r\n\t\t\trad += TWO_THIRDS_PI;\r\n\t\t\tctx.lineTo(x + Math.sin(rad) * radius, y - Math.cos(rad) * radius);\r\n\t\t\tctx.closePath();\r\n\t\t\tbreak;\r\n\t\tcase 'rectRounded':\r\n\t\t\t// NOTE: the rounded rect implementation changed to use `arc` instead of\r\n\t\t\t// `quadraticCurveTo` since it generates better results when rect is\r\n\t\t\t// almost a circle. 0.516 (instead of 0.5) produces results with visually\r\n\t\t\t// closer proportion to the previous impl and it is inscribed in the\r\n\t\t\t// circle with `radius`. For more details, see the following PRs:\r\n\t\t\t// https://github.com/chartjs/Chart.js/issues/5597\r\n\t\t\t// https://github.com/chartjs/Chart.js/issues/5858\r\n\t\t\tcornerRadius = radius * 0.516;\r\n\t\t\tsize = radius - cornerRadius;\r\n\t\t\txOffset = Math.cos(rad + QUARTER_PI) * size;\r\n\t\t\tyOffset = Math.sin(rad + QUARTER_PI) * size;\r\n\t\t\tctx.arc(x - xOffset, y - yOffset, cornerRadius, rad - PI, rad - HALF_PI);\r\n\t\t\tctx.arc(x + yOffset, y - xOffset, cornerRadius, rad - HALF_PI, rad);\r\n\t\t\tctx.arc(x + xOffset, y + yOffset, cornerRadius, rad, rad + HALF_PI);\r\n\t\t\tctx.arc(x - yOffset, y + xOffset, cornerRadius, rad + HALF_PI, rad + PI);\r\n\t\t\tctx.closePath();\r\n\t\t\tbreak;\r\n\t\tcase 'rect':\r\n\t\t\tif (!rotation) {\r\n\t\t\t\tsize = Math.SQRT1_2 * radius;\r\n\t\t\t\tctx.rect(x - size, y - size, 2 * size, 2 * size);\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\trad += QUARTER_PI;\r\n\t\t\t/* falls through */\r\n\t\tcase 'rectRot':\r\n\t\t\txOffset = Math.cos(rad) * radius;\r\n\t\t\tyOffset = Math.sin(rad) * radius;\r\n\t\t\tctx.moveTo(x - xOffset, y - yOffset);\r\n\t\t\tctx.lineTo(x + yOffset, y - xOffset);\r\n\t\t\tctx.lineTo(x + xOffset, y + yOffset);\r\n\t\t\tctx.lineTo(x - yOffset, y + xOffset);\r\n\t\t\tctx.closePath();\r\n\t\t\tbreak;\r\n\t\tcase 'crossRot':\r\n\t\t\trad += QUARTER_PI;\r\n\t\t\t/* falls through */\r\n\t\tcase 'cross':\r\n\t\t\txOffset = Math.cos(rad) * radius;\r\n\t\t\tyOffset = Math.sin(rad) * radius;\r\n\t\t\tctx.moveTo(x - xOffset, y - yOffset);\r\n\t\t\tctx.lineTo(x + xOffset, y + yOffset);\r\n\t\t\tctx.moveTo(x + yOffset, y - xOffset);\r\n\t\t\tctx.lineTo(x - yOffset, y + xOffset);\r\n\t\t\tbreak;\r\n\t\tcase 'star':\r\n\t\t\txOffset = Math.cos(rad) * radius;\r\n\t\t\tyOffset = Math.sin(rad) * radius;\r\n\t\t\tctx.moveTo(x - xOffset, y - yOffset);\r\n\t\t\tctx.lineTo(x + xOffset, y + yOffset);\r\n\t\t\tctx.moveTo(x + yOffset, y - xOffset);\r\n\t\t\tctx.lineTo(x - yOffset, y + xOffset);\r\n\t\t\trad += QUARTER_PI;\r\n\t\t\txOffset = Math.cos(rad) * radius;\r\n\t\t\tyOffset = Math.sin(rad) * radius;\r\n\t\t\tctx.moveTo(x - xOffset, y - yOffset);\r\n\t\t\tctx.lineTo(x + xOffset, y + yOffset);\r\n\t\t\tctx.moveTo(x + yOffset, y - xOffset);\r\n\t\t\tctx.lineTo(x - yOffset, y + xOffset);\r\n\t\t\tbreak;\r\n\t\tcase 'line':\r\n\t\t\txOffset = Math.cos(rad) * radius;\r\n\t\t\tyOffset = Math.sin(rad) * radius;\r\n\t\t\tctx.moveTo(x - xOffset, y - yOffset);\r\n\t\t\tctx.lineTo(x + xOffset, y + yOffset);\r\n\t\t\tbreak;\r\n\t\tcase 'dash':\r\n\t\t\tctx.moveTo(x, y);\r\n\t\t\tctx.lineTo(x + Math.cos(rad) * radius, y + Math.sin(rad) * radius);\r\n\t\t\tbreak;\r\n\t\t}\r\n\r\n\t\tctx.fill();\r\n\t\tctx.stroke();\r\n\t},\r\n\r\n\t/**\r\n\t * Returns true if the point is inside the rectangle\r\n\t * @param {object} point - The point to test\r\n\t * @param {object} area - The rectangle\r\n\t * @returns {boolean}\r\n\t * @private\r\n\t */\r\n\t_isPointInArea: function(point, area) {\r\n\t\tvar epsilon = 1e-6; // 1e-6 is margin in pixels for accumulated error.\r\n\r\n\t\treturn point.x > area.left - epsilon && point.x < area.right + epsilon &&\r\n\t\t\tpoint.y > area.top - epsilon && point.y < area.bottom + epsilon;\r\n\t},\r\n\r\n\tclipArea: function(ctx, area) {\r\n\t\tctx.save();\r\n\t\tctx.beginPath();\r\n\t\tctx.rect(area.left, area.top, area.right - area.left, area.bottom - area.top);\r\n\t\tctx.clip();\r\n\t},\r\n\r\n\tunclipArea: function(ctx) {\r\n\t\tctx.restore();\r\n\t},\r\n\r\n\tlineTo: function(ctx, previous, target, flip) {\r\n\t\tvar stepped = target.steppedLine;\r\n\t\tif (stepped) {\r\n\t\t\tif (stepped === 'middle') {\r\n\t\t\t\tvar midpoint = (previous.x + target.x) / 2.0;\r\n\t\t\t\tctx.lineTo(midpoint, flip ? target.y : previous.y);\r\n\t\t\t\tctx.lineTo(midpoint, flip ? previous.y : target.y);\r\n\t\t\t} else if ((stepped === 'after' && !flip) || (stepped !== 'after' && flip)) {\r\n\t\t\t\tctx.lineTo(previous.x, target.y);\r\n\t\t\t} else {\r\n\t\t\t\tctx.lineTo(target.x, previous.y);\r\n\t\t\t}\r\n\t\t\tctx.lineTo(target.x, target.y);\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif (!target.tension) {\r\n\t\t\tctx.lineTo(target.x, target.y);\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tctx.bezierCurveTo(\r\n\t\t\tflip ? previous.controlPointPreviousX : previous.controlPointNextX,\r\n\t\t\tflip ? previous.controlPointPreviousY : previous.controlPointNextY,\r\n\t\t\tflip ? target.controlPointNextX : target.controlPointPreviousX,\r\n\t\t\tflip ? target.controlPointNextY : target.controlPointPreviousY,\r\n\t\t\ttarget.x,\r\n\t\t\ttarget.y);\r\n\t}\r\n};\r\n\r\nvar helpers_canvas = exports$1;\r\n\r\n// DEPRECATIONS\r\n\r\n/**\r\n * Provided for backward compatibility, use Chart.helpers.canvas.clear instead.\r\n * @namespace Chart.helpers.clear\r\n * @deprecated since version 2.7.0\r\n * @todo remove at version 3\r\n * @private\r\n */\r\nhelpers_core.clear = exports$1.clear;\r\n\r\n/**\r\n * Provided for backward compatibility, use Chart.helpers.canvas.roundedRect instead.\r\n * @namespace Chart.helpers.drawRoundedRectangle\r\n * @deprecated since version 2.7.0\r\n * @todo remove at version 3\r\n * @private\r\n */\r\nhelpers_core.drawRoundedRectangle = function(ctx) {\r\n\tctx.beginPath();\r\n\texports$1.roundedRect.apply(exports$1, arguments);\r\n};\n\nvar defaults = {\r\n\t/**\r\n\t * @private\r\n\t */\r\n\t_set: function(scope, values) {\r\n\t\treturn helpers_core.merge(this[scope] || (this[scope] = {}), values);\r\n\t}\r\n};\r\n\r\n// TODO(v3): remove 'global' from namespace.  all default are global and\r\n// there's inconsistency around which options are under 'global'\r\ndefaults._set('global', {\r\n\tdefaultColor: 'rgba(0,0,0,0.1)',\r\n\tdefaultFontColor: '#666',\r\n\tdefaultFontFamily: \"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif\",\r\n\tdefaultFontSize: 12,\r\n\tdefaultFontStyle: 'normal',\r\n\tdefaultLineHeight: 1.2,\r\n\tshowLines: true\r\n});\r\n\r\nvar core_defaults = defaults;\n\nvar valueOrDefault = helpers_core.valueOrDefault;\r\n\r\n/**\r\n * Converts the given font object into a CSS font string.\r\n * @param {object} font - A font object.\r\n * @return {string} The CSS font string. See https://developer.mozilla.org/en-US/docs/Web/CSS/font\r\n * @private\r\n */\r\nfunction toFontString(font) {\r\n\tif (!font || helpers_core.isNullOrUndef(font.size) || helpers_core.isNullOrUndef(font.family)) {\r\n\t\treturn null;\r\n\t}\r\n\r\n\treturn (font.style ? font.style + ' ' : '')\r\n\t\t+ (font.weight ? font.weight + ' ' : '')\r\n\t\t+ font.size + 'px '\r\n\t\t+ font.family;\r\n}\r\n\r\n/**\r\n * @alias Chart.helpers.options\r\n * @namespace\r\n */\r\nvar helpers_options = {\r\n\t/**\r\n\t * Converts the given line height `value` in pixels for a specific font `size`.\r\n\t * @param {number|string} value - The lineHeight to parse (eg. 1.6, '14px', '75%', '1.6em').\r\n\t * @param {number} size - The font size (in pixels) used to resolve relative `value`.\r\n\t * @returns {number} The effective line height in pixels (size * 1.2 if value is invalid).\r\n\t * @see https://developer.mozilla.org/en-US/docs/Web/CSS/line-height\r\n\t * @since 2.7.0\r\n\t */\r\n\ttoLineHeight: function(value, size) {\r\n\t\tvar matches = ('' + value).match(/^(normal|(\\d+(?:\\.\\d+)?)(px|em|%)?)$/);\r\n\t\tif (!matches || matches[1] === 'normal') {\r\n\t\t\treturn size * 1.2;\r\n\t\t}\r\n\r\n\t\tvalue = +matches[2];\r\n\r\n\t\tswitch (matches[3]) {\r\n\t\tcase 'px':\r\n\t\t\treturn value;\r\n\t\tcase '%':\r\n\t\t\tvalue /= 100;\r\n\t\t\tbreak;\r\n\t\t}\r\n\r\n\t\treturn size * value;\r\n\t},\r\n\r\n\t/**\r\n\t * Converts the given value into a padding object with pre-computed width/height.\r\n\t * @param {number|object} value - If a number, set the value to all TRBL component,\r\n\t *  else, if and object, use defined properties and sets undefined ones to 0.\r\n\t * @returns {object} The padding values (top, right, bottom, left, width, height)\r\n\t * @since 2.7.0\r\n\t */\r\n\ttoPadding: function(value) {\r\n\t\tvar t, r, b, l;\r\n\r\n\t\tif (helpers_core.isObject(value)) {\r\n\t\t\tt = +value.top || 0;\r\n\t\t\tr = +value.right || 0;\r\n\t\t\tb = +value.bottom || 0;\r\n\t\t\tl = +value.left || 0;\r\n\t\t} else {\r\n\t\t\tt = r = b = l = +value || 0;\r\n\t\t}\r\n\r\n\t\treturn {\r\n\t\t\ttop: t,\r\n\t\t\tright: r,\r\n\t\t\tbottom: b,\r\n\t\t\tleft: l,\r\n\t\t\theight: t + b,\r\n\t\t\twidth: l + r\r\n\t\t};\r\n\t},\r\n\r\n\t/**\r\n\t * Parses font options and returns the font object.\r\n\t * @param {object} options - A object that contains font options to be parsed.\r\n\t * @return {object} The font object.\r\n\t * @todo Support font.* options and renamed to toFont().\r\n\t * @private\r\n\t */\r\n\t_parseFont: function(options) {\r\n\t\tvar globalDefaults = core_defaults.global;\r\n\t\tvar size = valueOrDefault(options.fontSize, globalDefaults.defaultFontSize);\r\n\t\tvar font = {\r\n\t\t\tfamily: valueOrDefault(options.fontFamily, globalDefaults.defaultFontFamily),\r\n\t\t\tlineHeight: helpers_core.options.toLineHeight(valueOrDefault(options.lineHeight, globalDefaults.defaultLineHeight), size),\r\n\t\t\tsize: size,\r\n\t\t\tstyle: valueOrDefault(options.fontStyle, globalDefaults.defaultFontStyle),\r\n\t\t\tweight: null,\r\n\t\t\tstring: ''\r\n\t\t};\r\n\r\n\t\tfont.string = toFontString(font);\r\n\t\treturn font;\r\n\t},\r\n\r\n\t/**\r\n\t * Evaluates the given `inputs` sequentially and returns the first defined value.\r\n\t * @param {Array} inputs - An array of values, falling back to the last value.\r\n\t * @param {object} [context] - If defined and the current value is a function, the value\r\n\t * is called with `context` as first argument and the result becomes the new input.\r\n\t * @param {number} [index] - If defined and the current value is an array, the value\r\n\t * at `index` become the new input.\r\n\t * @param {object} [info] - object to return information about resolution in\r\n\t * @param {boolean} [info.cacheable] - Will be set to `false` if option is not cacheable.\r\n\t * @since 2.7.0\r\n\t */\r\n\tresolve: function(inputs, context, index, info) {\r\n\t\tvar cacheable = true;\r\n\t\tvar i, ilen, value;\r\n\r\n\t\tfor (i = 0, ilen = inputs.length; i < ilen; ++i) {\r\n\t\t\tvalue = inputs[i];\r\n\t\t\tif (value === undefined) {\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\t\t\tif (context !== undefined && typeof value === 'function') {\r\n\t\t\t\tvalue = value(context);\r\n\t\t\t\tcacheable = false;\r\n\t\t\t}\r\n\t\t\tif (index !== undefined && helpers_core.isArray(value)) {\r\n\t\t\t\tvalue = value[index];\r\n\t\t\t\tcacheable = false;\r\n\t\t\t}\r\n\t\t\tif (value !== undefined) {\r\n\t\t\t\tif (info && !cacheable) {\r\n\t\t\t\t\tinfo.cacheable = false;\r\n\t\t\t\t}\r\n\t\t\t\treturn value;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n};\n\n/**\r\n * @alias Chart.helpers.math\r\n * @namespace\r\n */\r\nvar exports$2 = {\r\n\t/**\r\n\t * Returns an array of factors sorted from 1 to sqrt(value)\r\n\t * @private\r\n\t */\r\n\t_factorize: function(value) {\r\n\t\tvar result = [];\r\n\t\tvar sqrt = Math.sqrt(value);\r\n\t\tvar i;\r\n\r\n\t\tfor (i = 1; i < sqrt; i++) {\r\n\t\t\tif (value % i === 0) {\r\n\t\t\t\tresult.push(i);\r\n\t\t\t\tresult.push(value / i);\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (sqrt === (sqrt | 0)) { // if value is a square number\r\n\t\t\tresult.push(sqrt);\r\n\t\t}\r\n\r\n\t\tresult.sort(function(a, b) {\r\n\t\t\treturn a - b;\r\n\t\t}).pop();\r\n\t\treturn result;\r\n\t},\r\n\r\n\tlog10: Math.log10 || function(x) {\r\n\t\tvar exponent = Math.log(x) * Math.LOG10E; // Math.LOG10E = 1 / Math.LN10.\r\n\t\t// Check for whole powers of 10,\r\n\t\t// which due to floating point rounding error should be corrected.\r\n\t\tvar powerOf10 = Math.round(exponent);\r\n\t\tvar isPowerOf10 = x === Math.pow(10, powerOf10);\r\n\r\n\t\treturn isPowerOf10 ? powerOf10 : exponent;\r\n\t}\r\n};\r\n\r\nvar helpers_math = exports$2;\r\n\r\n// DEPRECATIONS\r\n\r\n/**\r\n * Provided for backward compatibility, use Chart.helpers.math.log10 instead.\r\n * @namespace Chart.helpers.log10\r\n * @deprecated since version 2.9.0\r\n * @todo remove at version 3\r\n * @private\r\n */\r\nhelpers_core.log10 = exports$2.log10;\n\nvar getRtlAdapter = function(rectX, width) {\r\n\treturn {\r\n\t\tx: function(x) {\r\n\t\t\treturn rectX + rectX + width - x;\r\n\t\t},\r\n\t\tsetWidth: function(w) {\r\n\t\t\twidth = w;\r\n\t\t},\r\n\t\ttextAlign: function(align) {\r\n\t\t\tif (align === 'center') {\r\n\t\t\t\treturn align;\r\n\t\t\t}\r\n\t\t\treturn align === 'right' ? 'left' : 'right';\r\n\t\t},\r\n\t\txPlus: function(x, value) {\r\n\t\t\treturn x - value;\r\n\t\t},\r\n\t\tleftForLtr: function(x, itemWidth) {\r\n\t\t\treturn x - itemWidth;\r\n\t\t},\r\n\t};\r\n};\r\n\r\nvar getLtrAdapter = function() {\r\n\treturn {\r\n\t\tx: function(x) {\r\n\t\t\treturn x;\r\n\t\t},\r\n\t\tsetWidth: function(w) { // eslint-disable-line no-unused-vars\r\n\t\t},\r\n\t\ttextAlign: function(align) {\r\n\t\t\treturn align;\r\n\t\t},\r\n\t\txPlus: function(x, value) {\r\n\t\t\treturn x + value;\r\n\t\t},\r\n\t\tleftForLtr: function(x, _itemWidth) { // eslint-disable-line no-unused-vars\r\n\t\t\treturn x;\r\n\t\t},\r\n\t};\r\n};\r\n\r\nvar getAdapter = function(rtl, rectX, width) {\r\n\treturn rtl ? getRtlAdapter(rectX, width) : getLtrAdapter();\r\n};\r\n\r\nvar overrideTextDirection = function(ctx, direction) {\r\n\tvar style, original;\r\n\tif (direction === 'ltr' || direction === 'rtl') {\r\n\t\tstyle = ctx.canvas.style;\r\n\t\toriginal = [\r\n\t\t\tstyle.getPropertyValue('direction'),\r\n\t\t\tstyle.getPropertyPriority('direction'),\r\n\t\t];\r\n\r\n\t\tstyle.setProperty('direction', direction, 'important');\r\n\t\tctx.prevTextDirection = original;\r\n\t}\r\n};\r\n\r\nvar restoreTextDirection = function(ctx) {\r\n\tvar original = ctx.prevTextDirection;\r\n\tif (original !== undefined) {\r\n\t\tdelete ctx.prevTextDirection;\r\n\t\tctx.canvas.style.setProperty('direction', original[0], original[1]);\r\n\t}\r\n};\r\n\r\nvar helpers_rtl = {\r\n\tgetRtlAdapter: getAdapter,\r\n\toverrideTextDirection: overrideTextDirection,\r\n\trestoreTextDirection: restoreTextDirection,\r\n};\n\nvar helpers$1 = helpers_core;\r\nvar easing = helpers_easing;\r\nvar canvas = helpers_canvas;\r\nvar options = helpers_options;\r\nvar math = helpers_math;\r\nvar rtl = helpers_rtl;\nhelpers$1.easing = easing;\nhelpers$1.canvas = canvas;\nhelpers$1.options = options;\nhelpers$1.math = math;\nhelpers$1.rtl = rtl;\n\nfunction interpolate(start, view, model, ease) {\r\n\tvar keys = Object.keys(model);\r\n\tvar i, ilen, key, actual, origin, target, type, c0, c1;\r\n\r\n\tfor (i = 0, ilen = keys.length; i < ilen; ++i) {\r\n\t\tkey = keys[i];\r\n\r\n\t\ttarget = model[key];\r\n\r\n\t\t// if a value is added to the model after pivot() has been called, the view\r\n\t\t// doesn't contain it, so let's initialize the view to the target value.\r\n\t\tif (!view.hasOwnProperty(key)) {\r\n\t\t\tview[key] = target;\r\n\t\t}\r\n\r\n\t\tactual = view[key];\r\n\r\n\t\tif (actual === target || key[0] === '_') {\r\n\t\t\tcontinue;\r\n\t\t}\r\n\r\n\t\tif (!start.hasOwnProperty(key)) {\r\n\t\t\tstart[key] = actual;\r\n\t\t}\r\n\r\n\t\torigin = start[key];\r\n\r\n\t\ttype = typeof target;\r\n\r\n\t\tif (type === typeof origin) {\r\n\t\t\tif (type === 'string') {\r\n\t\t\t\tc0 = chartjsColor(origin);\r\n\t\t\t\tif (c0.valid) {\r\n\t\t\t\t\tc1 = chartjsColor(target);\r\n\t\t\t\t\tif (c1.valid) {\r\n\t\t\t\t\t\tview[key] = c1.mix(c0, ease).rgbString();\r\n\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t} else if (helpers$1.isFinite(origin) && helpers$1.isFinite(target)) {\r\n\t\t\t\tview[key] = origin + (target - origin) * ease;\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tview[key] = target;\r\n\t}\r\n}\r\n\r\nvar Element = function(configuration) {\r\n\thelpers$1.extend(this, configuration);\r\n\tthis.initialize.apply(this, arguments);\r\n};\r\n\r\nhelpers$1.extend(Element.prototype, {\r\n\t_type: undefined,\r\n\r\n\tinitialize: function() {\r\n\t\tthis.hidden = false;\r\n\t},\r\n\r\n\tpivot: function() {\r\n\t\tvar me = this;\r\n\t\tif (!me._view) {\r\n\t\t\tme._view = helpers$1.extend({}, me._model);\r\n\t\t}\r\n\t\tme._start = {};\r\n\t\treturn me;\r\n\t},\r\n\r\n\ttransition: function(ease) {\r\n\t\tvar me = this;\r\n\t\tvar model = me._model;\r\n\t\tvar start = me._start;\r\n\t\tvar view = me._view;\r\n\r\n\t\t// No animation -> No Transition\r\n\t\tif (!model || ease === 1) {\r\n\t\t\tme._view = helpers$1.extend({}, model);\r\n\t\t\tme._start = null;\r\n\t\t\treturn me;\r\n\t\t}\r\n\r\n\t\tif (!view) {\r\n\t\t\tview = me._view = {};\r\n\t\t}\r\n\r\n\t\tif (!start) {\r\n\t\t\tstart = me._start = {};\r\n\t\t}\r\n\r\n\t\tinterpolate(start, view, model, ease);\r\n\r\n\t\treturn me;\r\n\t},\r\n\r\n\ttooltipPosition: function() {\r\n\t\treturn {\r\n\t\t\tx: this._model.x,\r\n\t\t\ty: this._model.y\r\n\t\t};\r\n\t},\r\n\r\n\thasValue: function() {\r\n\t\treturn helpers$1.isNumber(this._model.x) && helpers$1.isNumber(this._model.y);\r\n\t}\r\n});\r\n\r\nElement.extend = helpers$1.inherits;\r\n\r\nvar core_element = Element;\n\nvar exports$3 = core_element.extend({\r\n\tchart: null, // the animation associated chart instance\r\n\tcurrentStep: 0, // the current animation step\r\n\tnumSteps: 60, // default number of steps\r\n\teasing: '', // the easing to use for this animation\r\n\trender: null, // render function used by the animation service\r\n\r\n\tonAnimationProgress: null, // user specified callback to fire on each step of the animation\r\n\tonAnimationComplete: null, // user specified callback to fire when the animation finishes\r\n});\r\n\r\nvar core_animation = exports$3;\r\n\r\n// DEPRECATIONS\r\n\r\n/**\r\n * Provided for backward compatibility, use Chart.Animation instead\r\n * @prop Chart.Animation#animationObject\r\n * @deprecated since version 2.6.0\r\n * @todo remove at version 3\r\n */\r\nObject.defineProperty(exports$3.prototype, 'animationObject', {\r\n\tget: function() {\r\n\t\treturn this;\r\n\t}\r\n});\r\n\r\n/**\r\n * Provided for backward compatibility, use Chart.Animation#chart instead\r\n * @prop Chart.Animation#chartInstance\r\n * @deprecated since version 2.6.0\r\n * @todo remove at version 3\r\n */\r\nObject.defineProperty(exports$3.prototype, 'chartInstance', {\r\n\tget: function() {\r\n\t\treturn this.chart;\r\n\t},\r\n\tset: function(value) {\r\n\t\tthis.chart = value;\r\n\t}\r\n});\n\ncore_defaults._set('global', {\r\n\tanimation: {\r\n\t\tduration: 1000,\r\n\t\teasing: 'easeOutQuart',\r\n\t\tonProgress: helpers$1.noop,\r\n\t\tonComplete: helpers$1.noop\r\n\t}\r\n});\r\n\r\nvar core_animations = {\r\n\tanimations: [],\r\n\trequest: null,\r\n\r\n\t/**\r\n\t * @param {Chart} chart - The chart to animate.\r\n\t * @param {Chart.Animation} animation - The animation that we will animate.\r\n\t * @param {number} duration - The animation duration in ms.\r\n\t * @param {boolean} lazy - if true, the chart is not marked as animating to enable more responsive interactions\r\n\t */\r\n\taddAnimation: function(chart, animation, duration, lazy) {\r\n\t\tvar animations = this.animations;\r\n\t\tvar i, ilen;\r\n\r\n\t\tanimation.chart = chart;\r\n\t\tanimation.startTime = Date.now();\r\n\t\tanimation.duration = duration;\r\n\r\n\t\tif (!lazy) {\r\n\t\t\tchart.animating = true;\r\n\t\t}\r\n\r\n\t\tfor (i = 0, ilen = animations.length; i < ilen; ++i) {\r\n\t\t\tif (animations[i].chart === chart) {\r\n\t\t\t\tanimations[i] = animation;\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tanimations.push(animation);\r\n\r\n\t\t// If there are no animations queued, manually kickstart a digest, for lack of a better word\r\n\t\tif (animations.length === 1) {\r\n\t\t\tthis.requestAnimationFrame();\r\n\t\t}\r\n\t},\r\n\r\n\tcancelAnimation: function(chart) {\r\n\t\tvar index = helpers$1.findIndex(this.animations, function(animation) {\r\n\t\t\treturn animation.chart === chart;\r\n\t\t});\r\n\r\n\t\tif (index !== -1) {\r\n\t\t\tthis.animations.splice(index, 1);\r\n\t\t\tchart.animating = false;\r\n\t\t}\r\n\t},\r\n\r\n\trequestAnimationFrame: function() {\r\n\t\tvar me = this;\r\n\t\tif (me.request === null) {\r\n\t\t\t// Skip animation frame requests until the active one is executed.\r\n\t\t\t// This can happen when processing mouse events, e.g. 'mousemove'\r\n\t\t\t// and 'mouseout' events will trigger multiple renders.\r\n\t\t\tme.request = helpers$1.requestAnimFrame.call(window, function() {\r\n\t\t\t\tme.request = null;\r\n\t\t\t\tme.startDigest();\r\n\t\t\t});\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t * @private\r\n\t */\r\n\tstartDigest: function() {\r\n\t\tvar me = this;\r\n\r\n\t\tme.advance();\r\n\r\n\t\t// Do we have more stuff to animate?\r\n\t\tif (me.animations.length > 0) {\r\n\t\t\tme.requestAnimationFrame();\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t * @private\r\n\t */\r\n\tadvance: function() {\r\n\t\tvar animations = this.animations;\r\n\t\tvar animation, chart, numSteps, nextStep;\r\n\t\tvar i = 0;\r\n\r\n\t\t// 1 animation per chart, so we are looping charts here\r\n\t\twhile (i < animations.length) {\r\n\t\t\tanimation = animations[i];\r\n\t\t\tchart = animation.chart;\r\n\t\t\tnumSteps = animation.numSteps;\r\n\r\n\t\t\t// Make sure that currentStep starts at 1\r\n\t\t\t// https://github.com/chartjs/Chart.js/issues/6104\r\n\t\t\tnextStep = Math.floor((Date.now() - animation.startTime) / animation.duration * numSteps) + 1;\r\n\t\t\tanimation.currentStep = Math.min(nextStep, numSteps);\r\n\r\n\t\t\thelpers$1.callback(animation.render, [chart, animation], chart);\r\n\t\t\thelpers$1.callback(animation.onAnimationProgress, [animation], chart);\r\n\r\n\t\t\tif (animation.currentStep >= numSteps) {\r\n\t\t\t\thelpers$1.callback(animation.onAnimationComplete, [animation], chart);\r\n\t\t\t\tchart.animating = false;\r\n\t\t\t\tanimations.splice(i, 1);\r\n\t\t\t} else {\r\n\t\t\t\t++i;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n};\n\nvar resolve = helpers$1.options.resolve;\r\n\r\nvar arrayEvents = ['push', 'pop', 'shift', 'splice', 'unshift'];\r\n\r\n/**\r\n * Hooks the array methods that add or remove values ('push', pop', 'shift', 'splice',\r\n * 'unshift') and notify the listener AFTER the array has been altered. Listeners are\r\n * called on the 'onData*' callbacks (e.g. onDataPush, etc.) with same arguments.\r\n */\r\nfunction listenArrayEvents(array, listener) {\r\n\tif (array._chartjs) {\r\n\t\tarray._chartjs.listeners.push(listener);\r\n\t\treturn;\r\n\t}\r\n\r\n\tObject.defineProperty(array, '_chartjs', {\r\n\t\tconfigurable: true,\r\n\t\tenumerable: false,\r\n\t\tvalue: {\r\n\t\t\tlisteners: [listener]\r\n\t\t}\r\n\t});\r\n\r\n\tarrayEvents.forEach(function(key) {\r\n\t\tvar method = 'onData' + key.charAt(0).toUpperCase() + key.slice(1);\r\n\t\tvar base = array[key];\r\n\r\n\t\tObject.defineProperty(array, key, {\r\n\t\t\tconfigurable: true,\r\n\t\t\tenumerable: false,\r\n\t\t\tvalue: function() {\r\n\t\t\t\tvar args = Array.prototype.slice.call(arguments);\r\n\t\t\t\tvar res = base.apply(this, args);\r\n\r\n\t\t\t\thelpers$1.each(array._chartjs.listeners, function(object) {\r\n\t\t\t\t\tif (typeof object[method] === 'function') {\r\n\t\t\t\t\t\tobject[method].apply(object, args);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\r\n\t\t\t\treturn res;\r\n\t\t\t}\r\n\t\t});\r\n\t});\r\n}\r\n\r\n/**\r\n * Removes the given array event listener and cleanup extra attached properties (such as\r\n * the _chartjs stub and overridden methods) if array doesn't have any more listeners.\r\n */\r\nfunction unlistenArrayEvents(array, listener) {\r\n\tvar stub = array._chartjs;\r\n\tif (!stub) {\r\n\t\treturn;\r\n\t}\r\n\r\n\tvar listeners = stub.listeners;\r\n\tvar index = listeners.indexOf(listener);\r\n\tif (index !== -1) {\r\n\t\tlisteners.splice(index, 1);\r\n\t}\r\n\r\n\tif (listeners.length > 0) {\r\n\t\treturn;\r\n\t}\r\n\r\n\tarrayEvents.forEach(function(key) {\r\n\t\tdelete array[key];\r\n\t});\r\n\r\n\tdelete array._chartjs;\r\n}\r\n\r\n// Base class for all dataset controllers (line, bar, etc)\r\nvar DatasetController = function(chart, datasetIndex) {\r\n\tthis.initialize(chart, datasetIndex);\r\n};\r\n\r\nhelpers$1.extend(DatasetController.prototype, {\r\n\r\n\t/**\r\n\t * Element type used to generate a meta dataset (e.g. Chart.element.Line).\r\n\t * @type {Chart.core.element}\r\n\t */\r\n\tdatasetElementType: null,\r\n\r\n\t/**\r\n\t * Element type used to generate a meta data (e.g. Chart.element.Point).\r\n\t * @type {Chart.core.element}\r\n\t */\r\n\tdataElementType: null,\r\n\r\n\t/**\r\n\t * Dataset element option keys to be resolved in _resolveDatasetElementOptions.\r\n\t * A derived controller may override this to resolve controller-specific options.\r\n\t * The keys defined here are for backward compatibility for legend styles.\r\n\t * @private\r\n\t */\r\n\t_datasetElementOptions: [\r\n\t\t'backgroundColor',\r\n\t\t'borderCapStyle',\r\n\t\t'borderColor',\r\n\t\t'borderDash',\r\n\t\t'borderDashOffset',\r\n\t\t'borderJoinStyle',\r\n\t\t'borderWidth'\r\n\t],\r\n\r\n\t/**\r\n\t * Data element option keys to be resolved in _resolveDataElementOptions.\r\n\t * A derived controller may override this to resolve controller-specific options.\r\n\t * The keys defined here are for backward compatibility for legend styles.\r\n\t * @private\r\n\t */\r\n\t_dataElementOptions: [\r\n\t\t'backgroundColor',\r\n\t\t'borderColor',\r\n\t\t'borderWidth',\r\n\t\t'pointStyle'\r\n\t],\r\n\r\n\tinitialize: function(chart, datasetIndex) {\r\n\t\tvar me = this;\r\n\t\tme.chart = chart;\r\n\t\tme.index = datasetIndex;\r\n\t\tme.linkScales();\r\n\t\tme.addElements();\r\n\t\tme._type = me.getMeta().type;\r\n\t},\r\n\r\n\tupdateIndex: function(datasetIndex) {\r\n\t\tthis.index = datasetIndex;\r\n\t},\r\n\r\n\tlinkScales: function() {\r\n\t\tvar me = this;\r\n\t\tvar meta = me.getMeta();\r\n\t\tvar chart = me.chart;\r\n\t\tvar scales = chart.scales;\r\n\t\tvar dataset = me.getDataset();\r\n\t\tvar scalesOpts = chart.options.scales;\r\n\r\n\t\tif (meta.xAxisID === null || !(meta.xAxisID in scales) || dataset.xAxisID) {\r\n\t\t\tmeta.xAxisID = dataset.xAxisID || scalesOpts.xAxes[0].id;\r\n\t\t}\r\n\t\tif (meta.yAxisID === null || !(meta.yAxisID in scales) || dataset.yAxisID) {\r\n\t\t\tmeta.yAxisID = dataset.yAxisID || scalesOpts.yAxes[0].id;\r\n\t\t}\r\n\t},\r\n\r\n\tgetDataset: function() {\r\n\t\treturn this.chart.data.datasets[this.index];\r\n\t},\r\n\r\n\tgetMeta: function() {\r\n\t\treturn this.chart.getDatasetMeta(this.index);\r\n\t},\r\n\r\n\tgetScaleForId: function(scaleID) {\r\n\t\treturn this.chart.scales[scaleID];\r\n\t},\r\n\r\n\t/**\r\n\t * @private\r\n\t */\r\n\t_getValueScaleId: function() {\r\n\t\treturn this.getMeta().yAxisID;\r\n\t},\r\n\r\n\t/**\r\n\t * @private\r\n\t */\r\n\t_getIndexScaleId: function() {\r\n\t\treturn this.getMeta().xAxisID;\r\n\t},\r\n\r\n\t/**\r\n\t * @private\r\n\t */\r\n\t_getValueScale: function() {\r\n\t\treturn this.getScaleForId(this._getValueScaleId());\r\n\t},\r\n\r\n\t/**\r\n\t * @private\r\n\t */\r\n\t_getIndexScale: function() {\r\n\t\treturn this.getScaleForId(this._getIndexScaleId());\r\n\t},\r\n\r\n\treset: function() {\r\n\t\tthis._update(true);\r\n\t},\r\n\r\n\t/**\r\n\t * @private\r\n\t */\r\n\tdestroy: function() {\r\n\t\tif (this._data) {\r\n\t\t\tunlistenArrayEvents(this._data, this);\r\n\t\t}\r\n\t},\r\n\r\n\tcreateMetaDataset: function() {\r\n\t\tvar me = this;\r\n\t\tvar type = me.datasetElementType;\r\n\t\treturn type && new type({\r\n\t\t\t_chart: me.chart,\r\n\t\t\t_datasetIndex: me.index\r\n\t\t});\r\n\t},\r\n\r\n\tcreateMetaData: function(index) {\r\n\t\tvar me = this;\r\n\t\tvar type = me.dataElementType;\r\n\t\treturn type && new type({\r\n\t\t\t_chart: me.chart,\r\n\t\t\t_datasetIndex: me.index,\r\n\t\t\t_index: index\r\n\t\t});\r\n\t},\r\n\r\n\taddElements: function() {\r\n\t\tvar me = this;\r\n\t\tvar meta = me.getMeta();\r\n\t\tvar data = me.getDataset().data || [];\r\n\t\tvar metaData = meta.data;\r\n\t\tvar i, ilen;\r\n\r\n\t\tfor (i = 0, ilen = data.length; i < ilen; ++i) {\r\n\t\t\tmetaData[i] = metaData[i] || me.createMetaData(i);\r\n\t\t}\r\n\r\n\t\tmeta.dataset = meta.dataset || me.createMetaDataset();\r\n\t},\r\n\r\n\taddElementAndReset: function(index) {\r\n\t\tvar element = this.createMetaData(index);\r\n\t\tthis.getMeta().data.splice(index, 0, element);\r\n\t\tthis.updateElement(element, index, true);\r\n\t},\r\n\r\n\tbuildOrUpdateElements: function() {\r\n\t\tvar me = this;\r\n\t\tvar dataset = me.getDataset();\r\n\t\tvar data = dataset.data || (dataset.data = []);\r\n\r\n\t\t// In order to correctly handle data addition/deletion animation (an thus simulate\r\n\t\t// real-time charts), we need to monitor these data modifications and synchronize\r\n\t\t// the internal meta data accordingly.\r\n\t\tif (me._data !== data) {\r\n\t\t\tif (me._data) {\r\n\t\t\t\t// This case happens when the user replaced the data array instance.\r\n\t\t\t\tunlistenArrayEvents(me._data, me);\r\n\t\t\t}\r\n\r\n\t\t\tif (data && Object.isExtensible(data)) {\r\n\t\t\t\tlistenArrayEvents(data, me);\r\n\t\t\t}\r\n\t\t\tme._data = data;\r\n\t\t}\r\n\r\n\t\t// Re-sync meta data in case the user replaced the data array or if we missed\r\n\t\t// any updates and so make sure that we handle number of datapoints changing.\r\n\t\tme.resyncElements();\r\n\t},\r\n\r\n\t/**\r\n\t * Returns the merged user-supplied and default dataset-level options\r\n\t * @private\r\n\t */\r\n\t_configure: function() {\r\n\t\tvar me = this;\r\n\t\tme._config = helpers$1.merge(Object.create(null), [\r\n\t\t\tme.chart.options.datasets[me._type],\r\n\t\t\tme.getDataset(),\r\n\t\t], {\r\n\t\t\tmerger: function(key, target, source) {\r\n\t\t\t\tif (key !== '_meta' && key !== 'data') {\r\n\t\t\t\t\thelpers$1._merger(key, target, source);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t},\r\n\r\n\t_update: function(reset) {\r\n\t\tvar me = this;\r\n\t\tme._configure();\r\n\t\tme._cachedDataOpts = null;\r\n\t\tme.update(reset);\r\n\t},\r\n\r\n\tupdate: helpers$1.noop,\r\n\r\n\ttransition: function(easingValue) {\r\n\t\tvar meta = this.getMeta();\r\n\t\tvar elements = meta.data || [];\r\n\t\tvar ilen = elements.length;\r\n\t\tvar i = 0;\r\n\r\n\t\tfor (; i < ilen; ++i) {\r\n\t\t\telements[i].transition(easingValue);\r\n\t\t}\r\n\r\n\t\tif (meta.dataset) {\r\n\t\t\tmeta.dataset.transition(easingValue);\r\n\t\t}\r\n\t},\r\n\r\n\tdraw: function() {\r\n\t\tvar meta = this.getMeta();\r\n\t\tvar elements = meta.data || [];\r\n\t\tvar ilen = elements.length;\r\n\t\tvar i = 0;\r\n\r\n\t\tif (meta.dataset) {\r\n\t\t\tmeta.dataset.draw();\r\n\t\t}\r\n\r\n\t\tfor (; i < ilen; ++i) {\r\n\t\t\telements[i].draw();\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t * Returns a set of predefined style properties that should be used to represent the dataset\r\n\t * or the data if the index is specified\r\n\t * @param {number} index - data index\r\n\t * @return {IStyleInterface} style object\r\n\t */\r\n\tgetStyle: function(index) {\r\n\t\tvar me = this;\r\n\t\tvar meta = me.getMeta();\r\n\t\tvar dataset = meta.dataset;\r\n\t\tvar style;\r\n\r\n\t\tme._configure();\r\n\t\tif (dataset && index === undefined) {\r\n\t\t\tstyle = me._resolveDatasetElementOptions(dataset || {});\r\n\t\t} else {\r\n\t\t\tindex = index || 0;\r\n\t\t\tstyle = me._resolveDataElementOptions(meta.data[index] || {}, index);\r\n\t\t}\r\n\r\n\t\tif (style.fill === false || style.fill === null) {\r\n\t\t\tstyle.backgroundColor = style.borderColor;\r\n\t\t}\r\n\r\n\t\treturn style;\r\n\t},\r\n\r\n\t/**\r\n\t * @private\r\n\t */\r\n\t_resolveDatasetElementOptions: function(element, hover) {\r\n\t\tvar me = this;\r\n\t\tvar chart = me.chart;\r\n\t\tvar datasetOpts = me._config;\r\n\t\tvar custom = element.custom || {};\r\n\t\tvar options = chart.options.elements[me.datasetElementType.prototype._type] || {};\r\n\t\tvar elementOptions = me._datasetElementOptions;\r\n\t\tvar values = {};\r\n\t\tvar i, ilen, key, readKey;\r\n\r\n\t\t// Scriptable options\r\n\t\tvar context = {\r\n\t\t\tchart: chart,\r\n\t\t\tdataset: me.getDataset(),\r\n\t\t\tdatasetIndex: me.index,\r\n\t\t\thover: hover\r\n\t\t};\r\n\r\n\t\tfor (i = 0, ilen = elementOptions.length; i < ilen; ++i) {\r\n\t\t\tkey = elementOptions[i];\r\n\t\t\treadKey = hover ? 'hover' + key.charAt(0).toUpperCase() + key.slice(1) : key;\r\n\t\t\tvalues[key] = resolve([\r\n\t\t\t\tcustom[readKey],\r\n\t\t\t\tdatasetOpts[readKey],\r\n\t\t\t\toptions[readKey]\r\n\t\t\t], context);\r\n\t\t}\r\n\r\n\t\treturn values;\r\n\t},\r\n\r\n\t/**\r\n\t * @private\r\n\t */\r\n\t_resolveDataElementOptions: function(element, index) {\r\n\t\tvar me = this;\r\n\t\tvar custom = element && element.custom;\r\n\t\tvar cached = me._cachedDataOpts;\r\n\t\tif (cached && !custom) {\r\n\t\t\treturn cached;\r\n\t\t}\r\n\t\tvar chart = me.chart;\r\n\t\tvar datasetOpts = me._config;\r\n\t\tvar options = chart.options.elements[me.dataElementType.prototype._type] || {};\r\n\t\tvar elementOptions = me._dataElementOptions;\r\n\t\tvar values = {};\r\n\r\n\t\t// Scriptable options\r\n\t\tvar context = {\r\n\t\t\tchart: chart,\r\n\t\t\tdataIndex: index,\r\n\t\t\tdataset: me.getDataset(),\r\n\t\t\tdatasetIndex: me.index\r\n\t\t};\r\n\r\n\t\t// `resolve` sets cacheable to `false` if any option is indexed or scripted\r\n\t\tvar info = {cacheable: !custom};\r\n\r\n\t\tvar keys, i, ilen, key;\r\n\r\n\t\tcustom = custom || {};\r\n\r\n\t\tif (helpers$1.isArray(elementOptions)) {\r\n\t\t\tfor (i = 0, ilen = elementOptions.length; i < ilen; ++i) {\r\n\t\t\t\tkey = elementOptions[i];\r\n\t\t\t\tvalues[key] = resolve([\r\n\t\t\t\t\tcustom[key],\r\n\t\t\t\t\tdatasetOpts[key],\r\n\t\t\t\t\toptions[key]\r\n\t\t\t\t], context, index, info);\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tkeys = Object.keys(elementOptions);\r\n\t\t\tfor (i = 0, ilen = keys.length; i < ilen; ++i) {\r\n\t\t\t\tkey = keys[i];\r\n\t\t\t\tvalues[key] = resolve([\r\n\t\t\t\t\tcustom[key],\r\n\t\t\t\t\tdatasetOpts[elementOptions[key]],\r\n\t\t\t\t\tdatasetOpts[key],\r\n\t\t\t\t\toptions[key]\r\n\t\t\t\t], context, index, info);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (info.cacheable) {\r\n\t\t\tme._cachedDataOpts = Object.freeze(values);\r\n\t\t}\r\n\r\n\t\treturn values;\r\n\t},\r\n\r\n\tremoveHoverStyle: function(element) {\r\n\t\thelpers$1.merge(element._model, element.$previousStyle || {});\r\n\t\tdelete element.$previousStyle;\r\n\t},\r\n\r\n\tsetHoverStyle: function(element) {\r\n\t\tvar dataset = this.chart.data.datasets[element._datasetIndex];\r\n\t\tvar index = element._index;\r\n\t\tvar custom = element.custom || {};\r\n\t\tvar model = element._model;\r\n\t\tvar getHoverColor = helpers$1.getHoverColor;\r\n\r\n\t\telement.$previousStyle = {\r\n\t\t\tbackgroundColor: model.backgroundColor,\r\n\t\t\tborderColor: model.borderColor,\r\n\t\t\tborderWidth: model.borderWidth\r\n\t\t};\r\n\r\n\t\tmodel.backgroundColor = resolve([custom.hoverBackgroundColor, dataset.hoverBackgroundColor, getHoverColor(model.backgroundColor)], undefined, index);\r\n\t\tmodel.borderColor = resolve([custom.hoverBorderColor, dataset.hoverBorderColor, getHoverColor(model.borderColor)], undefined, index);\r\n\t\tmodel.borderWidth = resolve([custom.hoverBorderWidth, dataset.hoverBorderWidth, model.borderWidth], undefined, index);\r\n\t},\r\n\r\n\t/**\r\n\t * @private\r\n\t */\r\n\t_removeDatasetHoverStyle: function() {\r\n\t\tvar element = this.getMeta().dataset;\r\n\r\n\t\tif (element) {\r\n\t\t\tthis.removeHoverStyle(element);\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t * @private\r\n\t */\r\n\t_setDatasetHoverStyle: function() {\r\n\t\tvar element = this.getMeta().dataset;\r\n\t\tvar prev = {};\r\n\t\tvar i, ilen, key, keys, hoverOptions, model;\r\n\r\n\t\tif (!element) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tmodel = element._model;\r\n\t\thoverOptions = this._resolveDatasetElementOptions(element, true);\r\n\r\n\t\tkeys = Object.keys(hoverOptions);\r\n\t\tfor (i = 0, ilen = keys.length; i < ilen; ++i) {\r\n\t\t\tkey = keys[i];\r\n\t\t\tprev[key] = model[key];\r\n\t\t\tmodel[key] = hoverOptions[key];\r\n\t\t}\r\n\r\n\t\telement.$previousStyle = prev;\r\n\t},\r\n\r\n\t/**\r\n\t * @private\r\n\t */\r\n\tresyncElements: function() {\r\n\t\tvar me = this;\r\n\t\tvar meta = me.getMeta();\r\n\t\tvar data = me.getDataset().data;\r\n\t\tvar numMeta = meta.data.length;\r\n\t\tvar numData = data.length;\r\n\r\n\t\tif (numData < numMeta) {\r\n\t\t\tmeta.data.splice(numData, numMeta - numData);\r\n\t\t} else if (numData > numMeta) {\r\n\t\t\tme.insertElements(numMeta, numData - numMeta);\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t * @private\r\n\t */\r\n\tinsertElements: function(start, count) {\r\n\t\tfor (var i = 0; i < count; ++i) {\r\n\t\t\tthis.addElementAndReset(start + i);\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t * @private\r\n\t */\r\n\tonDataPush: function() {\r\n\t\tvar count = arguments.length;\r\n\t\tthis.insertElements(this.getDataset().data.length - count, count);\r\n\t},\r\n\r\n\t/**\r\n\t * @private\r\n\t */\r\n\tonDataPop: function() {\r\n\t\tthis.getMeta().data.pop();\r\n\t},\r\n\r\n\t/**\r\n\t * @private\r\n\t */\r\n\tonDataShift: function() {\r\n\t\tthis.getMeta().data.shift();\r\n\t},\r\n\r\n\t/**\r\n\t * @private\r\n\t */\r\n\tonDataSplice: function(start, count) {\r\n\t\tthis.getMeta().data.splice(start, count);\r\n\t\tthis.insertElements(start, arguments.length - 2);\r\n\t},\r\n\r\n\t/**\r\n\t * @private\r\n\t */\r\n\tonDataUnshift: function() {\r\n\t\tthis.insertElements(0, arguments.length);\r\n\t}\r\n});\r\n\r\nDatasetController.extend = helpers$1.inherits;\r\n\r\nvar core_datasetController = DatasetController;\n\nvar TAU = Math.PI * 2;\r\n\r\ncore_defaults._set('global', {\r\n\telements: {\r\n\t\tarc: {\r\n\t\t\tbackgroundColor: core_defaults.global.defaultColor,\r\n\t\t\tborderColor: '#fff',\r\n\t\t\tborderWidth: 2,\r\n\t\t\tborderAlign: 'center'\r\n\t\t}\r\n\t}\r\n});\r\n\r\nfunction clipArc(ctx, arc) {\r\n\tvar startAngle = arc.startAngle;\r\n\tvar endAngle = arc.endAngle;\r\n\tvar pixelMargin = arc.pixelMargin;\r\n\tvar angleMargin = pixelMargin / arc.outerRadius;\r\n\tvar x = arc.x;\r\n\tvar y = arc.y;\r\n\r\n\t// Draw an inner border by cliping the arc and drawing a double-width border\r\n\t// Enlarge the clipping arc by 0.33 pixels to eliminate glitches between borders\r\n\tctx.beginPath();\r\n\tctx.arc(x, y, arc.outerRadius, startAngle - angleMargin, endAngle + angleMargin);\r\n\tif (arc.innerRadius > pixelMargin) {\r\n\t\tangleMargin = pixelMargin / arc.innerRadius;\r\n\t\tctx.arc(x, y, arc.innerRadius - pixelMargin, endAngle + angleMargin, startAngle - angleMargin, true);\r\n\t} else {\r\n\t\tctx.arc(x, y, pixelMargin, endAngle + Math.PI / 2, startAngle - Math.PI / 2);\r\n\t}\r\n\tctx.closePath();\r\n\tctx.clip();\r\n}\r\n\r\nfunction drawFullCircleBorders(ctx, vm, arc, inner) {\r\n\tvar endAngle = arc.endAngle;\r\n\tvar i;\r\n\r\n\tif (inner) {\r\n\t\tarc.endAngle = arc.startAngle + TAU;\r\n\t\tclipArc(ctx, arc);\r\n\t\tarc.endAngle = endAngle;\r\n\t\tif (arc.endAngle === arc.startAngle && arc.fullCircles) {\r\n\t\t\tarc.endAngle += TAU;\r\n\t\t\tarc.fullCircles--;\r\n\t\t}\r\n\t}\r\n\r\n\tctx.beginPath();\r\n\tctx.arc(arc.x, arc.y, arc.innerRadius, arc.startAngle + TAU, arc.startAngle, true);\r\n\tfor (i = 0; i < arc.fullCircles; ++i) {\r\n\t\tctx.stroke();\r\n\t}\r\n\r\n\tctx.beginPath();\r\n\tctx.arc(arc.x, arc.y, vm.outerRadius, arc.startAngle, arc.startAngle + TAU);\r\n\tfor (i = 0; i < arc.fullCircles; ++i) {\r\n\t\tctx.stroke();\r\n\t}\r\n}\r\n\r\nfunction drawBorder(ctx, vm, arc) {\r\n\tvar inner = vm.borderAlign === 'inner';\r\n\r\n\tif (inner) {\r\n\t\tctx.lineWidth = vm.borderWidth * 2;\r\n\t\tctx.lineJoin = 'round';\r\n\t} else {\r\n\t\tctx.lineWidth = vm.borderWidth;\r\n\t\tctx.lineJoin = 'bevel';\r\n\t}\r\n\r\n\tif (arc.fullCircles) {\r\n\t\tdrawFullCircleBorders(ctx, vm, arc, inner);\r\n\t}\r\n\r\n\tif (inner) {\r\n\t\tclipArc(ctx, arc);\r\n\t}\r\n\r\n\tctx.beginPath();\r\n\tctx.arc(arc.x, arc.y, vm.outerRadius, arc.startAngle, arc.endAngle);\r\n\tctx.arc(arc.x, arc.y, arc.innerRadius, arc.endAngle, arc.startAngle, true);\r\n\tctx.closePath();\r\n\tctx.stroke();\r\n}\r\n\r\nvar element_arc = core_element.extend({\r\n\t_type: 'arc',\r\n\r\n\tinLabelRange: function(mouseX) {\r\n\t\tvar vm = this._view;\r\n\r\n\t\tif (vm) {\r\n\t\t\treturn (Math.pow(mouseX - vm.x, 2) < Math.pow(vm.radius + vm.hoverRadius, 2));\r\n\t\t}\r\n\t\treturn false;\r\n\t},\r\n\r\n\tinRange: function(chartX, chartY) {\r\n\t\tvar vm = this._view;\r\n\r\n\t\tif (vm) {\r\n\t\t\tvar pointRelativePosition = helpers$1.getAngleFromPoint(vm, {x: chartX, y: chartY});\r\n\t\t\tvar angle = pointRelativePosition.angle;\r\n\t\t\tvar distance = pointRelativePosition.distance;\r\n\r\n\t\t\t// Sanitise angle range\r\n\t\t\tvar startAngle = vm.startAngle;\r\n\t\t\tvar endAngle = vm.endAngle;\r\n\t\t\twhile (endAngle < startAngle) {\r\n\t\t\t\tendAngle += TAU;\r\n\t\t\t}\r\n\t\t\twhile (angle > endAngle) {\r\n\t\t\t\tangle -= TAU;\r\n\t\t\t}\r\n\t\t\twhile (angle < startAngle) {\r\n\t\t\t\tangle += TAU;\r\n\t\t\t}\r\n\r\n\t\t\t// Check if within the range of the open/close angle\r\n\t\t\tvar betweenAngles = (angle >= startAngle && angle <= endAngle);\r\n\t\t\tvar withinRadius = (distance >= vm.innerRadius && distance <= vm.outerRadius);\r\n\r\n\t\t\treturn (betweenAngles && withinRadius);\r\n\t\t}\r\n\t\treturn false;\r\n\t},\r\n\r\n\tgetCenterPoint: function() {\r\n\t\tvar vm = this._view;\r\n\t\tvar halfAngle = (vm.startAngle + vm.endAngle) / 2;\r\n\t\tvar halfRadius = (vm.innerRadius + vm.outerRadius) / 2;\r\n\t\treturn {\r\n\t\t\tx: vm.x + Math.cos(halfAngle) * halfRadius,\r\n\t\t\ty: vm.y + Math.sin(halfAngle) * halfRadius\r\n\t\t};\r\n\t},\r\n\r\n\tgetArea: function() {\r\n\t\tvar vm = this._view;\r\n\t\treturn Math.PI * ((vm.endAngle - vm.startAngle) / (2 * Math.PI)) * (Math.pow(vm.outerRadius, 2) - Math.pow(vm.innerRadius, 2));\r\n\t},\r\n\r\n\ttooltipPosition: function() {\r\n\t\tvar vm = this._view;\r\n\t\tvar centreAngle = vm.startAngle + ((vm.endAngle - vm.startAngle) / 2);\r\n\t\tvar rangeFromCentre = (vm.outerRadius - vm.innerRadius) / 2 + vm.innerRadius;\r\n\r\n\t\treturn {\r\n\t\t\tx: vm.x + (Math.cos(centreAngle) * rangeFromCentre),\r\n\t\t\ty: vm.y + (Math.sin(centreAngle) * rangeFromCentre)\r\n\t\t};\r\n\t},\r\n\r\n\tdraw: function() {\r\n\t\tvar ctx = this._chart.ctx;\r\n\t\tvar vm = this._view;\r\n\t\tvar pixelMargin = (vm.borderAlign === 'inner') ? 0.33 : 0;\r\n\t\tvar arc = {\r\n\t\t\tx: vm.x,\r\n\t\t\ty: vm.y,\r\n\t\t\tinnerRadius: vm.innerRadius,\r\n\t\t\touterRadius: Math.max(vm.outerRadius - pixelMargin, 0),\r\n\t\t\tpixelMargin: pixelMargin,\r\n\t\t\tstartAngle: vm.startAngle,\r\n\t\t\tendAngle: vm.endAngle,\r\n\t\t\tfullCircles: Math.floor(vm.circumference / TAU)\r\n\t\t};\r\n\t\tvar i;\r\n\r\n\t\tctx.save();\r\n\r\n\t\tctx.fillStyle = vm.backgroundColor;\r\n\t\tctx.strokeStyle = vm.borderColor;\r\n\r\n\t\tif (arc.fullCircles) {\r\n\t\t\tarc.endAngle = arc.startAngle + TAU;\r\n\t\t\tctx.beginPath();\r\n\t\t\tctx.arc(arc.x, arc.y, arc.outerRadius, arc.startAngle, arc.endAngle);\r\n\t\t\tctx.arc(arc.x, arc.y, arc.innerRadius, arc.endAngle, arc.startAngle, true);\r\n\t\t\tctx.closePath();\r\n\t\t\tfor (i = 0; i < arc.fullCircles; ++i) {\r\n\t\t\t\tctx.fill();\r\n\t\t\t}\r\n\t\t\tarc.endAngle = arc.startAngle + vm.circumference % TAU;\r\n\t\t}\r\n\r\n\t\tctx.beginPath();\r\n\t\tctx.arc(arc.x, arc.y, arc.outerRadius, arc.startAngle, arc.endAngle);\r\n\t\tctx.arc(arc.x, arc.y, arc.innerRadius, arc.endAngle, arc.startAngle, true);\r\n\t\tctx.closePath();\r\n\t\tctx.fill();\r\n\r\n\t\tif (vm.borderWidth) {\r\n\t\t\tdrawBorder(ctx, vm, arc);\r\n\t\t}\r\n\r\n\t\tctx.restore();\r\n\t}\r\n});\n\nvar valueOrDefault$1 = helpers$1.valueOrDefault;\r\n\r\nvar defaultColor = core_defaults.global.defaultColor;\r\n\r\ncore_defaults._set('global', {\r\n\telements: {\r\n\t\tline: {\r\n\t\t\ttension: 0.4,\r\n\t\t\tbackgroundColor: defaultColor,\r\n\t\t\tborderWidth: 3,\r\n\t\t\tborderColor: defaultColor,\r\n\t\t\tborderCapStyle: 'butt',\r\n\t\t\tborderDash: [],\r\n\t\t\tborderDashOffset: 0.0,\r\n\t\t\tborderJoinStyle: 'miter',\r\n\t\t\tcapBezierPoints: true,\r\n\t\t\tfill: true, // do we fill in the area between the line and its base axis\r\n\t\t}\r\n\t}\r\n});\r\n\r\nvar element_line = core_element.extend({\r\n\t_type: 'line',\r\n\r\n\tdraw: function() {\r\n\t\tvar me = this;\r\n\t\tvar vm = me._view;\r\n\t\tvar ctx = me._chart.ctx;\r\n\t\tvar spanGaps = vm.spanGaps;\r\n\t\tvar points = me._children.slice(); // clone array\r\n\t\tvar globalDefaults = core_defaults.global;\r\n\t\tvar globalOptionLineElements = globalDefaults.elements.line;\r\n\t\tvar lastDrawnIndex = -1;\r\n\t\tvar closePath = me._loop;\r\n\t\tvar index, previous, currentVM;\r\n\r\n\t\tif (!points.length) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif (me._loop) {\r\n\t\t\tfor (index = 0; index < points.length; ++index) {\r\n\t\t\t\tprevious = helpers$1.previousItem(points, index);\r\n\t\t\t\t// If the line has an open path, shift the point array\r\n\t\t\t\tif (!points[index]._view.skip && previous._view.skip) {\r\n\t\t\t\t\tpoints = points.slice(index).concat(points.slice(0, index));\r\n\t\t\t\t\tclosePath = spanGaps;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t// If the line has a close path, add the first point again\r\n\t\t\tif (closePath) {\r\n\t\t\t\tpoints.push(points[0]);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tctx.save();\r\n\r\n\t\t// Stroke Line Options\r\n\t\tctx.lineCap = vm.borderCapStyle || globalOptionLineElements.borderCapStyle;\r\n\r\n\t\t// IE 9 and 10 do not support line dash\r\n\t\tif (ctx.setLineDash) {\r\n\t\t\tctx.setLineDash(vm.borderDash || globalOptionLineElements.borderDash);\r\n\t\t}\r\n\r\n\t\tctx.lineDashOffset = valueOrDefault$1(vm.borderDashOffset, globalOptionLineElements.borderDashOffset);\r\n\t\tctx.lineJoin = vm.borderJoinStyle || globalOptionLineElements.borderJoinStyle;\r\n\t\tctx.lineWidth = valueOrDefault$1(vm.borderWidth, globalOptionLineElements.borderWidth);\r\n\t\tctx.strokeStyle = vm.borderColor || globalDefaults.defaultColor;\r\n\r\n\t\t// Stroke Line\r\n\t\tctx.beginPath();\r\n\r\n\t\t// First point moves to it's starting position no matter what\r\n\t\tcurrentVM = points[0]._view;\r\n\t\tif (!currentVM.skip) {\r\n\t\t\tctx.moveTo(currentVM.x, currentVM.y);\r\n\t\t\tlastDrawnIndex = 0;\r\n\t\t}\r\n\r\n\t\tfor (index = 1; index < points.length; ++index) {\r\n\t\t\tcurrentVM = points[index]._view;\r\n\t\t\tprevious = lastDrawnIndex === -1 ? helpers$1.previousItem(points, index) : points[lastDrawnIndex];\r\n\r\n\t\t\tif (!currentVM.skip) {\r\n\t\t\t\tif ((lastDrawnIndex !== (index - 1) && !spanGaps) || lastDrawnIndex === -1) {\r\n\t\t\t\t\t// There was a gap and this is the first point after the gap\r\n\t\t\t\t\tctx.moveTo(currentVM.x, currentVM.y);\r\n\t\t\t\t} else {\r\n\t\t\t\t\t// Line to next point\r\n\t\t\t\t\thelpers$1.canvas.lineTo(ctx, previous._view, currentVM);\r\n\t\t\t\t}\r\n\t\t\t\tlastDrawnIndex = index;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (closePath) {\r\n\t\t\tctx.closePath();\r\n\t\t}\r\n\r\n\t\tctx.stroke();\r\n\t\tctx.restore();\r\n\t}\r\n});\n\nvar valueOrDefault$2 = helpers$1.valueOrDefault;\r\n\r\nvar defaultColor$1 = core_defaults.global.defaultColor;\r\n\r\ncore_defaults._set('global', {\r\n\telements: {\r\n\t\tpoint: {\r\n\t\t\tradius: 3,\r\n\t\t\tpointStyle: 'circle',\r\n\t\t\tbackgroundColor: defaultColor$1,\r\n\t\t\tborderColor: defaultColor$1,\r\n\t\t\tborderWidth: 1,\r\n\t\t\t// Hover\r\n\t\t\thitRadius: 1,\r\n\t\t\thoverRadius: 4,\r\n\t\t\thoverBorderWidth: 1\r\n\t\t}\r\n\t}\r\n});\r\n\r\nfunction xRange(mouseX) {\r\n\tvar vm = this._view;\r\n\treturn vm ? (Math.abs(mouseX - vm.x) < vm.radius + vm.hitRadius) : false;\r\n}\r\n\r\nfunction yRange(mouseY) {\r\n\tvar vm = this._view;\r\n\treturn vm ? (Math.abs(mouseY - vm.y) < vm.radius + vm.hitRadius) : false;\r\n}\r\n\r\nvar element_point = core_element.extend({\r\n\t_type: 'point',\r\n\r\n\tinRange: function(mouseX, mouseY) {\r\n\t\tvar vm = this._view;\r\n\t\treturn vm ? ((Math.pow(mouseX - vm.x, 2) + Math.pow(mouseY - vm.y, 2)) < Math.pow(vm.hitRadius + vm.radius, 2)) : false;\r\n\t},\r\n\r\n\tinLabelRange: xRange,\r\n\tinXRange: xRange,\r\n\tinYRange: yRange,\r\n\r\n\tgetCenterPoint: function() {\r\n\t\tvar vm = this._view;\r\n\t\treturn {\r\n\t\t\tx: vm.x,\r\n\t\t\ty: vm.y\r\n\t\t};\r\n\t},\r\n\r\n\tgetArea: function() {\r\n\t\treturn Math.PI * Math.pow(this._view.radius, 2);\r\n\t},\r\n\r\n\ttooltipPosition: function() {\r\n\t\tvar vm = this._view;\r\n\t\treturn {\r\n\t\t\tx: vm.x,\r\n\t\t\ty: vm.y,\r\n\t\t\tpadding: vm.radius + vm.borderWidth\r\n\t\t};\r\n\t},\r\n\r\n\tdraw: function(chartArea) {\r\n\t\tvar vm = this._view;\r\n\t\tvar ctx = this._chart.ctx;\r\n\t\tvar pointStyle = vm.pointStyle;\r\n\t\tvar rotation = vm.rotation;\r\n\t\tvar radius = vm.radius;\r\n\t\tvar x = vm.x;\r\n\t\tvar y = vm.y;\r\n\t\tvar globalDefaults = core_defaults.global;\r\n\t\tvar defaultColor = globalDefaults.defaultColor; // eslint-disable-line no-shadow\r\n\r\n\t\tif (vm.skip) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t// Clipping for Points.\r\n\t\tif (chartArea === undefined || helpers$1.canvas._isPointInArea(vm, chartArea)) {\r\n\t\t\tctx.strokeStyle = vm.borderColor || defaultColor;\r\n\t\t\tctx.lineWidth = valueOrDefault$2(vm.borderWidth, globalDefaults.elements.point.borderWidth);\r\n\t\t\tctx.fillStyle = vm.backgroundColor || defaultColor;\r\n\t\t\thelpers$1.canvas.drawPoint(ctx, pointStyle, radius, x, y, rotation);\r\n\t\t}\r\n\t}\r\n});\n\nvar defaultColor$2 = core_defaults.global.defaultColor;\r\n\r\ncore_defaults._set('global', {\r\n\telements: {\r\n\t\trectangle: {\r\n\t\t\tbackgroundColor: defaultColor$2,\r\n\t\t\tborderColor: defaultColor$2,\r\n\t\t\tborderSkipped: 'bottom',\r\n\t\t\tborderWidth: 0\r\n\t\t}\r\n\t}\r\n});\r\n\r\nfunction isVertical(vm) {\r\n\treturn vm && vm.width !== undefined;\r\n}\r\n\r\n/**\r\n * Helper function to get the bounds of the bar regardless of the orientation\r\n * @param bar {Chart.Element.Rectangle} the bar\r\n * @return {Bounds} bounds of the bar\r\n * @private\r\n */\r\nfunction getBarBounds(vm) {\r\n\tvar x1, x2, y1, y2, half;\r\n\r\n\tif (isVertical(vm)) {\r\n\t\thalf = vm.width / 2;\r\n\t\tx1 = vm.x - half;\r\n\t\tx2 = vm.x + half;\r\n\t\ty1 = Math.min(vm.y, vm.base);\r\n\t\ty2 = Math.max(vm.y, vm.base);\r\n\t} else {\r\n\t\thalf = vm.height / 2;\r\n\t\tx1 = Math.min(vm.x, vm.base);\r\n\t\tx2 = Math.max(vm.x, vm.base);\r\n\t\ty1 = vm.y - half;\r\n\t\ty2 = vm.y + half;\r\n\t}\r\n\r\n\treturn {\r\n\t\tleft: x1,\r\n\t\ttop: y1,\r\n\t\tright: x2,\r\n\t\tbottom: y2\r\n\t};\r\n}\r\n\r\nfunction swap(orig, v1, v2) {\r\n\treturn orig === v1 ? v2 : orig === v2 ? v1 : orig;\r\n}\r\n\r\nfunction parseBorderSkipped(vm) {\r\n\tvar edge = vm.borderSkipped;\r\n\tvar res = {};\r\n\r\n\tif (!edge) {\r\n\t\treturn res;\r\n\t}\r\n\r\n\tif (vm.horizontal) {\r\n\t\tif (vm.base > vm.x) {\r\n\t\t\tedge = swap(edge, 'left', 'right');\r\n\t\t}\r\n\t} else if (vm.base < vm.y) {\r\n\t\tedge = swap(edge, 'bottom', 'top');\r\n\t}\r\n\r\n\tres[edge] = true;\r\n\treturn res;\r\n}\r\n\r\nfunction parseBorderWidth(vm, maxW, maxH) {\r\n\tvar value = vm.borderWidth;\r\n\tvar skip = parseBorderSkipped(vm);\r\n\tvar t, r, b, l;\r\n\r\n\tif (helpers$1.isObject(value)) {\r\n\t\tt = +value.top || 0;\r\n\t\tr = +value.right || 0;\r\n\t\tb = +value.bottom || 0;\r\n\t\tl = +value.left || 0;\r\n\t} else {\r\n\t\tt = r = b = l = +value || 0;\r\n\t}\r\n\r\n\treturn {\r\n\t\tt: skip.top || (t < 0) ? 0 : t > maxH ? maxH : t,\r\n\t\tr: skip.right || (r < 0) ? 0 : r > maxW ? maxW : r,\r\n\t\tb: skip.bottom || (b < 0) ? 0 : b > maxH ? maxH : b,\r\n\t\tl: skip.left || (l < 0) ? 0 : l > maxW ? maxW : l\r\n\t};\r\n}\r\n\r\nfunction boundingRects(vm) {\r\n\tvar bounds = getBarBounds(vm);\r\n\tvar width = bounds.right - bounds.left;\r\n\tvar height = bounds.bottom - bounds.top;\r\n\tvar border = parseBorderWidth(vm, width / 2, height / 2);\r\n\r\n\treturn {\r\n\t\touter: {\r\n\t\t\tx: bounds.left,\r\n\t\t\ty: bounds.top,\r\n\t\t\tw: width,\r\n\t\t\th: height\r\n\t\t},\r\n\t\tinner: {\r\n\t\t\tx: bounds.left + border.l,\r\n\t\t\ty: bounds.top + border.t,\r\n\t\t\tw: width - border.l - border.r,\r\n\t\t\th: height - border.t - border.b\r\n\t\t}\r\n\t};\r\n}\r\n\r\nfunction inRange(vm, x, y) {\r\n\tvar skipX = x === null;\r\n\tvar skipY = y === null;\r\n\tvar bounds = !vm || (skipX && skipY) ? false : getBarBounds(vm);\r\n\r\n\treturn bounds\r\n\t\t&& (skipX || x >= bounds.left && x <= bounds.right)\r\n\t\t&& (skipY || y >= bounds.top && y <= bounds.bottom);\r\n}\r\n\r\nvar element_rectangle = core_element.extend({\r\n\t_type: 'rectangle',\r\n\r\n\tdraw: function() {\r\n\t\tvar ctx = this._chart.ctx;\r\n\t\tvar vm = this._view;\r\n\t\tvar rects = boundingRects(vm);\r\n\t\tvar outer = rects.outer;\r\n\t\tvar inner = rects.inner;\r\n\r\n\t\tctx.fillStyle = vm.backgroundColor;\r\n\t\tctx.fillRect(outer.x, outer.y, outer.w, outer.h);\r\n\r\n\t\tif (outer.w === inner.w && outer.h === inner.h) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tctx.save();\r\n\t\tctx.beginPath();\r\n\t\tctx.rect(outer.x, outer.y, outer.w, outer.h);\r\n\t\tctx.clip();\r\n\t\tctx.fillStyle = vm.borderColor;\r\n\t\tctx.rect(inner.x, inner.y, inner.w, inner.h);\r\n\t\tctx.fill('evenodd');\r\n\t\tctx.restore();\r\n\t},\r\n\r\n\theight: function() {\r\n\t\tvar vm = this._view;\r\n\t\treturn vm.base - vm.y;\r\n\t},\r\n\r\n\tinRange: function(mouseX, mouseY) {\r\n\t\treturn inRange(this._view, mouseX, mouseY);\r\n\t},\r\n\r\n\tinLabelRange: function(mouseX, mouseY) {\r\n\t\tvar vm = this._view;\r\n\t\treturn isVertical(vm)\r\n\t\t\t? inRange(vm, mouseX, null)\r\n\t\t\t: inRange(vm, null, mouseY);\r\n\t},\r\n\r\n\tinXRange: function(mouseX) {\r\n\t\treturn inRange(this._view, mouseX, null);\r\n\t},\r\n\r\n\tinYRange: function(mouseY) {\r\n\t\treturn inRange(this._view, null, mouseY);\r\n\t},\r\n\r\n\tgetCenterPoint: function() {\r\n\t\tvar vm = this._view;\r\n\t\tvar x, y;\r\n\t\tif (isVertical(vm)) {\r\n\t\t\tx = vm.x;\r\n\t\t\ty = (vm.y + vm.base) / 2;\r\n\t\t} else {\r\n\t\t\tx = (vm.x + vm.base) / 2;\r\n\t\t\ty = vm.y;\r\n\t\t}\r\n\r\n\t\treturn {x: x, y: y};\r\n\t},\r\n\r\n\tgetArea: function() {\r\n\t\tvar vm = this._view;\r\n\r\n\t\treturn isVertical(vm)\r\n\t\t\t? vm.width * Math.abs(vm.y - vm.base)\r\n\t\t\t: vm.height * Math.abs(vm.x - vm.base);\r\n\t},\r\n\r\n\ttooltipPosition: function() {\r\n\t\tvar vm = this._view;\r\n\t\treturn {\r\n\t\t\tx: vm.x,\r\n\t\t\ty: vm.y\r\n\t\t};\r\n\t}\r\n});\n\nvar elements = {};\r\nvar Arc = element_arc;\r\nvar Line = element_line;\r\nvar Point = element_point;\r\nvar Rectangle = element_rectangle;\nelements.Arc = Arc;\nelements.Line = Line;\nelements.Point = Point;\nelements.Rectangle = Rectangle;\n\nvar deprecated = helpers$1._deprecated;\r\nvar valueOrDefault$3 = helpers$1.valueOrDefault;\r\n\r\ncore_defaults._set('bar', {\r\n\thover: {\r\n\t\tmode: 'label'\r\n\t},\r\n\r\n\tscales: {\r\n\t\txAxes: [{\r\n\t\t\ttype: 'category',\r\n\t\t\toffset: true,\r\n\t\t\tgridLines: {\r\n\t\t\t\toffsetGridLines: true\r\n\t\t\t}\r\n\t\t}],\r\n\r\n\t\tyAxes: [{\r\n\t\t\ttype: 'linear'\r\n\t\t}]\r\n\t}\r\n});\r\n\r\ncore_defaults._set('global', {\r\n\tdatasets: {\r\n\t\tbar: {\r\n\t\t\tcategoryPercentage: 0.8,\r\n\t\t\tbarPercentage: 0.9\r\n\t\t}\r\n\t}\r\n});\r\n\r\n/**\r\n * Computes the \"optimal\" sample size to maintain bars equally sized while preventing overlap.\r\n * @private\r\n */\r\nfunction computeMinSampleSize(scale, pixels) {\r\n\tvar min = scale._length;\r\n\tvar prev, curr, i, ilen;\r\n\r\n\tfor (i = 1, ilen = pixels.length; i < ilen; ++i) {\r\n\t\tmin = Math.min(min, Math.abs(pixels[i] - pixels[i - 1]));\r\n\t}\r\n\r\n\tfor (i = 0, ilen = scale.getTicks().length; i < ilen; ++i) {\r\n\t\tcurr = scale.getPixelForTick(i);\r\n\t\tmin = i > 0 ? Math.min(min, Math.abs(curr - prev)) : min;\r\n\t\tprev = curr;\r\n\t}\r\n\r\n\treturn min;\r\n}\r\n\r\n/**\r\n * Computes an \"ideal\" category based on the absolute bar thickness or, if undefined or null,\r\n * uses the smallest interval (see computeMinSampleSize) that prevents bar overlapping. This\r\n * mode currently always generates bars equally sized (until we introduce scriptable options?).\r\n * @private\r\n */\r\nfunction computeFitCategoryTraits(index, ruler, options) {\r\n\tvar thickness = options.barThickness;\r\n\tvar count = ruler.stackCount;\r\n\tvar curr = ruler.pixels[index];\r\n\tvar min = helpers$1.isNullOrUndef(thickness)\r\n\t\t? computeMinSampleSize(ruler.scale, ruler.pixels)\r\n\t\t: -1;\r\n\tvar size, ratio;\r\n\r\n\tif (helpers$1.isNullOrUndef(thickness)) {\r\n\t\tsize = min * options.categoryPercentage;\r\n\t\tratio = options.barPercentage;\r\n\t} else {\r\n\t\t// When bar thickness is enforced, category and bar percentages are ignored.\r\n\t\t// Note(SB): we could add support for relative bar thickness (e.g. barThickness: '50%')\r\n\t\t// and deprecate barPercentage since this value is ignored when thickness is absolute.\r\n\t\tsize = thickness * count;\r\n\t\tratio = 1;\r\n\t}\r\n\r\n\treturn {\r\n\t\tchunk: size / count,\r\n\t\tratio: ratio,\r\n\t\tstart: curr - (size / 2)\r\n\t};\r\n}\r\n\r\n/**\r\n * Computes an \"optimal\" category that globally arranges bars side by side (no gap when\r\n * percentage options are 1), based on the previous and following categories. This mode\r\n * generates bars with different widths when data are not evenly spaced.\r\n * @private\r\n */\r\nfunction computeFlexCategoryTraits(index, ruler, options) {\r\n\tvar pixels = ruler.pixels;\r\n\tvar curr = pixels[index];\r\n\tvar prev = index > 0 ? pixels[index - 1] : null;\r\n\tvar next = index < pixels.length - 1 ? pixels[index + 1] : null;\r\n\tvar percent = options.categoryPercentage;\r\n\tvar start, size;\r\n\r\n\tif (prev === null) {\r\n\t\t// first data: its size is double based on the next point or,\r\n\t\t// if it's also the last data, we use the scale size.\r\n\t\tprev = curr - (next === null ? ruler.end - ruler.start : next - curr);\r\n\t}\r\n\r\n\tif (next === null) {\r\n\t\t// last data: its size is also double based on the previous point.\r\n\t\tnext = curr + curr - prev;\r\n\t}\r\n\r\n\tstart = curr - (curr - Math.min(prev, next)) / 2 * percent;\r\n\tsize = Math.abs(next - prev) / 2 * percent;\r\n\r\n\treturn {\r\n\t\tchunk: size / ruler.stackCount,\r\n\t\tratio: options.barPercentage,\r\n\t\tstart: start\r\n\t};\r\n}\r\n\r\nvar controller_bar = core_datasetController.extend({\r\n\r\n\tdataElementType: elements.Rectangle,\r\n\r\n\t/**\r\n\t * @private\r\n\t */\r\n\t_dataElementOptions: [\r\n\t\t'backgroundColor',\r\n\t\t'borderColor',\r\n\t\t'borderSkipped',\r\n\t\t'borderWidth',\r\n\t\t'barPercentage',\r\n\t\t'barThickness',\r\n\t\t'categoryPercentage',\r\n\t\t'maxBarThickness',\r\n\t\t'minBarLength'\r\n\t],\r\n\r\n\tinitialize: function() {\r\n\t\tvar me = this;\r\n\t\tvar meta, scaleOpts;\r\n\r\n\t\tcore_datasetController.prototype.initialize.apply(me, arguments);\r\n\r\n\t\tmeta = me.getMeta();\r\n\t\tmeta.stack = me.getDataset().stack;\r\n\t\tmeta.bar = true;\r\n\r\n\t\tscaleOpts = me._getIndexScale().options;\r\n\t\tdeprecated('bar chart', scaleOpts.barPercentage, 'scales.[x/y]Axes.barPercentage', 'dataset.barPercentage');\r\n\t\tdeprecated('bar chart', scaleOpts.barThickness, 'scales.[x/y]Axes.barThickness', 'dataset.barThickness');\r\n\t\tdeprecated('bar chart', scaleOpts.categoryPercentage, 'scales.[x/y]Axes.categoryPercentage', 'dataset.categoryPercentage');\r\n\t\tdeprecated('bar chart', me._getValueScale().options.minBarLength, 'scales.[x/y]Axes.minBarLength', 'dataset.minBarLength');\r\n\t\tdeprecated('bar chart', scaleOpts.maxBarThickness, 'scales.[x/y]Axes.maxBarThickness', 'dataset.maxBarThickness');\r\n\t},\r\n\r\n\tupdate: function(reset) {\r\n\t\tvar me = this;\r\n\t\tvar rects = me.getMeta().data;\r\n\t\tvar i, ilen;\r\n\r\n\t\tme._ruler = me.getRuler();\r\n\r\n\t\tfor (i = 0, ilen = rects.length; i < ilen; ++i) {\r\n\t\t\tme.updateElement(rects[i], i, reset);\r\n\t\t}\r\n\t},\r\n\r\n\tupdateElement: function(rectangle, index, reset) {\r\n\t\tvar me = this;\r\n\t\tvar meta = me.getMeta();\r\n\t\tvar dataset = me.getDataset();\r\n\t\tvar options = me._resolveDataElementOptions(rectangle, index);\r\n\r\n\t\trectangle._xScale = me.getScaleForId(meta.xAxisID);\r\n\t\trectangle._yScale = me.getScaleForId(meta.yAxisID);\r\n\t\trectangle._datasetIndex = me.index;\r\n\t\trectangle._index = index;\r\n\t\trectangle._model = {\r\n\t\t\tbackgroundColor: options.backgroundColor,\r\n\t\t\tborderColor: options.borderColor,\r\n\t\t\tborderSkipped: options.borderSkipped,\r\n\t\t\tborderWidth: options.borderWidth,\r\n\t\t\tdatasetLabel: dataset.label,\r\n\t\t\tlabel: me.chart.data.labels[index]\r\n\t\t};\r\n\r\n\t\tif (helpers$1.isArray(dataset.data[index])) {\r\n\t\t\trectangle._model.borderSkipped = null;\r\n\t\t}\r\n\r\n\t\tme._updateElementGeometry(rectangle, index, reset, options);\r\n\r\n\t\trectangle.pivot();\r\n\t},\r\n\r\n\t/**\r\n\t * @private\r\n\t */\r\n\t_updateElementGeometry: function(rectangle, index, reset, options) {\r\n\t\tvar me = this;\r\n\t\tvar model = rectangle._model;\r\n\t\tvar vscale = me._getValueScale();\r\n\t\tvar base = vscale.getBasePixel();\r\n\t\tvar horizontal = vscale.isHorizontal();\r\n\t\tvar ruler = me._ruler || me.getRuler();\r\n\t\tvar vpixels = me.calculateBarValuePixels(me.index, index, options);\r\n\t\tvar ipixels = me.calculateBarIndexPixels(me.index, index, ruler, options);\r\n\r\n\t\tmodel.horizontal = horizontal;\r\n\t\tmodel.base = reset ? base : vpixels.base;\r\n\t\tmodel.x = horizontal ? reset ? base : vpixels.head : ipixels.center;\r\n\t\tmodel.y = horizontal ? ipixels.center : reset ? base : vpixels.head;\r\n\t\tmodel.height = horizontal ? ipixels.size : undefined;\r\n\t\tmodel.width = horizontal ? undefined : ipixels.size;\r\n\t},\r\n\r\n\t/**\r\n\t * Returns the stacks based on groups and bar visibility.\r\n\t * @param {number} [last] - The dataset index\r\n\t * @returns {string[]} The list of stack IDs\r\n\t * @private\r\n\t */\r\n\t_getStacks: function(last) {\r\n\t\tvar me = this;\r\n\t\tvar scale = me._getIndexScale();\r\n\t\tvar metasets = scale._getMatchingVisibleMetas(me._type);\r\n\t\tvar stacked = scale.options.stacked;\r\n\t\tvar ilen = metasets.length;\r\n\t\tvar stacks = [];\r\n\t\tvar i, meta;\r\n\r\n\t\tfor (i = 0; i < ilen; ++i) {\r\n\t\t\tmeta = metasets[i];\r\n\t\t\t// stacked   | meta.stack\r\n\t\t\t//           | found | not found | undefined\r\n\t\t\t// false     |   x   |     x     |     x\r\n\t\t\t// true      |       |     x     |\r\n\t\t\t// undefined |       |     x     |     x\r\n\t\t\tif (stacked === false || stacks.indexOf(meta.stack) === -1 ||\r\n\t\t\t\t(stacked === undefined && meta.stack === undefined)) {\r\n\t\t\t\tstacks.push(meta.stack);\r\n\t\t\t}\r\n\t\t\tif (meta.index === last) {\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn stacks;\r\n\t},\r\n\r\n\t/**\r\n\t * Returns the effective number of stacks based on groups and bar visibility.\r\n\t * @private\r\n\t */\r\n\tgetStackCount: function() {\r\n\t\treturn this._getStacks().length;\r\n\t},\r\n\r\n\t/**\r\n\t * Returns the stack index for the given dataset based on groups and bar visibility.\r\n\t * @param {number} [datasetIndex] - The dataset index\r\n\t * @param {string} [name] - The stack name to find\r\n\t * @returns {number} The stack index\r\n\t * @private\r\n\t */\r\n\tgetStackIndex: function(datasetIndex, name) {\r\n\t\tvar stacks = this._getStacks(datasetIndex);\r\n\t\tvar index = (name !== undefined)\r\n\t\t\t? stacks.indexOf(name)\r\n\t\t\t: -1; // indexOf returns -1 if element is not present\r\n\r\n\t\treturn (index === -1)\r\n\t\t\t? stacks.length - 1\r\n\t\t\t: index;\r\n\t},\r\n\r\n\t/**\r\n\t * @private\r\n\t */\r\n\tgetRuler: function() {\r\n\t\tvar me = this;\r\n\t\tvar scale = me._getIndexScale();\r\n\t\tvar pixels = [];\r\n\t\tvar i, ilen;\r\n\r\n\t\tfor (i = 0, ilen = me.getMeta().data.length; i < ilen; ++i) {\r\n\t\t\tpixels.push(scale.getPixelForValue(null, i, me.index));\r\n\t\t}\r\n\r\n\t\treturn {\r\n\t\t\tpixels: pixels,\r\n\t\t\tstart: scale._startPixel,\r\n\t\t\tend: scale._endPixel,\r\n\t\t\tstackCount: me.getStackCount(),\r\n\t\t\tscale: scale\r\n\t\t};\r\n\t},\r\n\r\n\t/**\r\n\t * Note: pixel values are not clamped to the scale area.\r\n\t * @private\r\n\t */\r\n\tcalculateBarValuePixels: function(datasetIndex, index, options) {\r\n\t\tvar me = this;\r\n\t\tvar chart = me.chart;\r\n\t\tvar scale = me._getValueScale();\r\n\t\tvar isHorizontal = scale.isHorizontal();\r\n\t\tvar datasets = chart.data.datasets;\r\n\t\tvar metasets = scale._getMatchingVisibleMetas(me._type);\r\n\t\tvar value = scale._parseValue(datasets[datasetIndex].data[index]);\r\n\t\tvar minBarLength = options.minBarLength;\r\n\t\tvar stacked = scale.options.stacked;\r\n\t\tvar stack = me.getMeta().stack;\r\n\t\tvar start = value.start === undefined ? 0 : value.max >= 0 && value.min >= 0 ? value.min : value.max;\r\n\t\tvar length = value.start === undefined ? value.end : value.max >= 0 && value.min >= 0 ? value.max - value.min : value.min - value.max;\r\n\t\tvar ilen = metasets.length;\r\n\t\tvar i, imeta, ivalue, base, head, size, stackLength;\r\n\r\n\t\tif (stacked || (stacked === undefined && stack !== undefined)) {\r\n\t\t\tfor (i = 0; i < ilen; ++i) {\r\n\t\t\t\timeta = metasets[i];\r\n\r\n\t\t\t\tif (imeta.index === datasetIndex) {\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (imeta.stack === stack) {\r\n\t\t\t\t\tstackLength = scale._parseValue(datasets[imeta.index].data[index]);\r\n\t\t\t\t\tivalue = stackLength.start === undefined ? stackLength.end : stackLength.min >= 0 && stackLength.max >= 0 ? stackLength.max : stackLength.min;\r\n\r\n\t\t\t\t\tif ((value.min < 0 && ivalue < 0) || (value.max >= 0 && ivalue > 0)) {\r\n\t\t\t\t\t\tstart += ivalue;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tbase = scale.getPixelForValue(start);\r\n\t\thead = scale.getPixelForValue(start + length);\r\n\t\tsize = head - base;\r\n\r\n\t\tif (minBarLength !== undefined && Math.abs(size) < minBarLength) {\r\n\t\t\tsize = minBarLength;\r\n\t\t\tif (length >= 0 && !isHorizontal || length < 0 && isHorizontal) {\r\n\t\t\t\thead = base - minBarLength;\r\n\t\t\t} else {\r\n\t\t\t\thead = base + minBarLength;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn {\r\n\t\t\tsize: size,\r\n\t\t\tbase: base,\r\n\t\t\thead: head,\r\n\t\t\tcenter: head + size / 2\r\n\t\t};\r\n\t},\r\n\r\n\t/**\r\n\t * @private\r\n\t */\r\n\tcalculateBarIndexPixels: function(datasetIndex, index, ruler, options) {\r\n\t\tvar me = this;\r\n\t\tvar range = options.barThickness === 'flex'\r\n\t\t\t? computeFlexCategoryTraits(index, ruler, options)\r\n\t\t\t: computeFitCategoryTraits(index, ruler, options);\r\n\r\n\t\tvar stackIndex = me.getStackIndex(datasetIndex, me.getMeta().stack);\r\n\t\tvar center = range.start + (range.chunk * stackIndex) + (range.chunk / 2);\r\n\t\tvar size = Math.min(\r\n\t\t\tvalueOrDefault$3(options.maxBarThickness, Infinity),\r\n\t\t\trange.chunk * range.ratio);\r\n\r\n\t\treturn {\r\n\t\t\tbase: center - size / 2,\r\n\t\t\thead: center + size / 2,\r\n\t\t\tcenter: center,\r\n\t\t\tsize: size\r\n\t\t};\r\n\t},\r\n\r\n\tdraw: function() {\r\n\t\tvar me = this;\r\n\t\tvar chart = me.chart;\r\n\t\tvar scale = me._getValueScale();\r\n\t\tvar rects = me.getMeta().data;\r\n\t\tvar dataset = me.getDataset();\r\n\t\tvar ilen = rects.length;\r\n\t\tvar i = 0;\r\n\r\n\t\thelpers$1.canvas.clipArea(chart.ctx, chart.chartArea);\r\n\r\n\t\tfor (; i < ilen; ++i) {\r\n\t\t\tvar val = scale._parseValue(dataset.data[i]);\r\n\t\t\tif (!isNaN(val.min) && !isNaN(val.max)) {\r\n\t\t\t\trects[i].draw();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\thelpers$1.canvas.unclipArea(chart.ctx);\r\n\t},\r\n\r\n\t/**\r\n\t * @private\r\n\t */\r\n\t_resolveDataElementOptions: function() {\r\n\t\tvar me = this;\r\n\t\tvar values = helpers$1.extend({}, core_datasetController.prototype._resolveDataElementOptions.apply(me, arguments));\r\n\t\tvar indexOpts = me._getIndexScale().options;\r\n\t\tvar valueOpts = me._getValueScale().options;\r\n\r\n\t\tvalues.barPercentage = valueOrDefault$3(indexOpts.barPercentage, values.barPercentage);\r\n\t\tvalues.barThickness = valueOrDefault$3(indexOpts.barThickness, values.barThickness);\r\n\t\tvalues.categoryPercentage = valueOrDefault$3(indexOpts.categoryPercentage, values.categoryPercentage);\r\n\t\tvalues.maxBarThickness = valueOrDefault$3(indexOpts.maxBarThickness, values.maxBarThickness);\r\n\t\tvalues.minBarLength = valueOrDefault$3(valueOpts.minBarLength, values.minBarLength);\r\n\r\n\t\treturn values;\r\n\t}\r\n\r\n});\n\nvar valueOrDefault$4 = helpers$1.valueOrDefault;\r\nvar resolve$1 = helpers$1.options.resolve;\r\n\r\ncore_defaults._set('bubble', {\r\n\thover: {\r\n\t\tmode: 'single'\r\n\t},\r\n\r\n\tscales: {\r\n\t\txAxes: [{\r\n\t\t\ttype: 'linear', // bubble should probably use a linear scale by default\r\n\t\t\tposition: 'bottom',\r\n\t\t\tid: 'x-axis-0' // need an ID so datasets can reference the scale\r\n\t\t}],\r\n\t\tyAxes: [{\r\n\t\t\ttype: 'linear',\r\n\t\t\tposition: 'left',\r\n\t\t\tid: 'y-axis-0'\r\n\t\t}]\r\n\t},\r\n\r\n\ttooltips: {\r\n\t\tcallbacks: {\r\n\t\t\ttitle: function() {\r\n\t\t\t\t// Title doesn't make sense for scatter since we format the data as a point\r\n\t\t\t\treturn '';\r\n\t\t\t},\r\n\t\t\tlabel: function(item, data) {\r\n\t\t\t\tvar datasetLabel = data.datasets[item.datasetIndex].label || '';\r\n\t\t\t\tvar dataPoint = data.datasets[item.datasetIndex].data[item.index];\r\n\t\t\t\treturn datasetLabel + ': (' + item.xLabel + ', ' + item.yLabel + ', ' + dataPoint.r + ')';\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n});\r\n\r\nvar controller_bubble = core_datasetController.extend({\r\n\t/**\r\n\t * @protected\r\n\t */\r\n\tdataElementType: elements.Point,\r\n\r\n\t/**\r\n\t * @private\r\n\t */\r\n\t_dataElementOptions: [\r\n\t\t'backgroundColor',\r\n\t\t'borderColor',\r\n\t\t'borderWidth',\r\n\t\t'hoverBackgroundColor',\r\n\t\t'hoverBorderColor',\r\n\t\t'hoverBorderWidth',\r\n\t\t'hoverRadius',\r\n\t\t'hitRadius',\r\n\t\t'pointStyle',\r\n\t\t'rotation'\r\n\t],\r\n\r\n\t/**\r\n\t * @protected\r\n\t */\r\n\tupdate: function(reset) {\r\n\t\tvar me = this;\r\n\t\tvar meta = me.getMeta();\r\n\t\tvar points = meta.data;\r\n\r\n\t\t// Update Points\r\n\t\thelpers$1.each(points, function(point, index) {\r\n\t\t\tme.updateElement(point, index, reset);\r\n\t\t});\r\n\t},\r\n\r\n\t/**\r\n\t * @protected\r\n\t */\r\n\tupdateElement: function(point, index, reset) {\r\n\t\tvar me = this;\r\n\t\tvar meta = me.getMeta();\r\n\t\tvar custom = point.custom || {};\r\n\t\tvar xScale = me.getScaleForId(meta.xAxisID);\r\n\t\tvar yScale = me.getScaleForId(meta.yAxisID);\r\n\t\tvar options = me._resolveDataElementOptions(point, index);\r\n\t\tvar data = me.getDataset().data[index];\r\n\t\tvar dsIndex = me.index;\r\n\r\n\t\tvar x = reset ? xScale.getPixelForDecimal(0.5) : xScale.getPixelForValue(typeof data === 'object' ? data : NaN, index, dsIndex);\r\n\t\tvar y = reset ? yScale.getBasePixel() : yScale.getPixelForValue(data, index, dsIndex);\r\n\r\n\t\tpoint._xScale = xScale;\r\n\t\tpoint._yScale = yScale;\r\n\t\tpoint._options = options;\r\n\t\tpoint._datasetIndex = dsIndex;\r\n\t\tpoint._index = index;\r\n\t\tpoint._model = {\r\n\t\t\tbackgroundColor: options.backgroundColor,\r\n\t\t\tborderColor: options.borderColor,\r\n\t\t\tborderWidth: options.borderWidth,\r\n\t\t\thitRadius: options.hitRadius,\r\n\t\t\tpointStyle: options.pointStyle,\r\n\t\t\trotation: options.rotation,\r\n\t\t\tradius: reset ? 0 : options.radius,\r\n\t\t\tskip: custom.skip || isNaN(x) || isNaN(y),\r\n\t\t\tx: x,\r\n\t\t\ty: y,\r\n\t\t};\r\n\r\n\t\tpoint.pivot();\r\n\t},\r\n\r\n\t/**\r\n\t * @protected\r\n\t */\r\n\tsetHoverStyle: function(point) {\r\n\t\tvar model = point._model;\r\n\t\tvar options = point._options;\r\n\t\tvar getHoverColor = helpers$1.getHoverColor;\r\n\r\n\t\tpoint.$previousStyle = {\r\n\t\t\tbackgroundColor: model.backgroundColor,\r\n\t\t\tborderColor: model.borderColor,\r\n\t\t\tborderWidth: model.borderWidth,\r\n\t\t\tradius: model.radius\r\n\t\t};\r\n\r\n\t\tmodel.backgroundColor = valueOrDefault$4(options.hoverBackgroundColor, getHoverColor(options.backgroundColor));\r\n\t\tmodel.borderColor = valueOrDefault$4(options.hoverBorderColor, getHoverColor(options.borderColor));\r\n\t\tmodel.borderWidth = valueOrDefault$4(options.hoverBorderWidth, options.borderWidth);\r\n\t\tmodel.radius = options.radius + options.hoverRadius;\r\n\t},\r\n\r\n\t/**\r\n\t * @private\r\n\t */\r\n\t_resolveDataElementOptions: function(point, index) {\r\n\t\tvar me = this;\r\n\t\tvar chart = me.chart;\r\n\t\tvar dataset = me.getDataset();\r\n\t\tvar custom = point.custom || {};\r\n\t\tvar data = dataset.data[index] || {};\r\n\t\tvar values = core_datasetController.prototype._resolveDataElementOptions.apply(me, arguments);\r\n\r\n\t\t// Scriptable options\r\n\t\tvar context = {\r\n\t\t\tchart: chart,\r\n\t\t\tdataIndex: index,\r\n\t\t\tdataset: dataset,\r\n\t\t\tdatasetIndex: me.index\r\n\t\t};\r\n\r\n\t\t// In case values were cached (and thus frozen), we need to clone the values\r\n\t\tif (me._cachedDataOpts === values) {\r\n\t\t\tvalues = helpers$1.extend({}, values);\r\n\t\t}\r\n\r\n\t\t// Custom radius resolution\r\n\t\tvalues.radius = resolve$1([\r\n\t\t\tcustom.radius,\r\n\t\t\tdata.r,\r\n\t\t\tme._config.radius,\r\n\t\t\tchart.options.elements.point.radius\r\n\t\t], context, index);\r\n\r\n\t\treturn values;\r\n\t}\r\n});\n\nvar valueOrDefault$5 = helpers$1.valueOrDefault;\r\n\r\nvar PI$1 = Math.PI;\r\nvar DOUBLE_PI$1 = PI$1 * 2;\r\nvar HALF_PI$1 = PI$1 / 2;\r\n\r\ncore_defaults._set('doughnut', {\r\n\tanimation: {\r\n\t\t// Boolean - Whether we animate the rotation of the Doughnut\r\n\t\tanimateRotate: true,\r\n\t\t// Boolean - Whether we animate scaling the Doughnut from the centre\r\n\t\tanimateScale: false\r\n\t},\r\n\thover: {\r\n\t\tmode: 'single'\r\n\t},\r\n\tlegendCallback: function(chart) {\r\n\t\tvar list = document.createElement('ul');\r\n\t\tvar data = chart.data;\r\n\t\tvar datasets = data.datasets;\r\n\t\tvar labels = data.labels;\r\n\t\tvar i, ilen, listItem, listItemSpan;\r\n\r\n\t\tlist.setAttribute('class', chart.id + '-legend');\r\n\t\tif (datasets.length) {\r\n\t\t\tfor (i = 0, ilen = datasets[0].data.length; i < ilen; ++i) {\r\n\t\t\t\tlistItem = list.appendChild(document.createElement('li'));\r\n\t\t\t\tlistItemSpan = listItem.appendChild(document.createElement('span'));\r\n\t\t\t\tlistItemSpan.style.backgroundColor = datasets[0].backgroundColor[i];\r\n\t\t\t\tif (labels[i]) {\r\n\t\t\t\t\tlistItem.appendChild(document.createTextNode(labels[i]));\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn list.outerHTML;\r\n\t},\r\n\tlegend: {\r\n\t\tlabels: {\r\n\t\t\tgenerateLabels: function(chart) {\r\n\t\t\t\tvar data = chart.data;\r\n\t\t\t\tif (data.labels.length && data.datasets.length) {\r\n\t\t\t\t\treturn data.labels.map(function(label, i) {\r\n\t\t\t\t\t\tvar meta = chart.getDatasetMeta(0);\r\n\t\t\t\t\t\tvar style = meta.controller.getStyle(i);\r\n\r\n\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\ttext: label,\r\n\t\t\t\t\t\t\tfillStyle: style.backgroundColor,\r\n\t\t\t\t\t\t\tstrokeStyle: style.borderColor,\r\n\t\t\t\t\t\t\tlineWidth: style.borderWidth,\r\n\t\t\t\t\t\t\thidden: isNaN(data.datasets[0].data[i]) || meta.data[i].hidden,\r\n\r\n\t\t\t\t\t\t\t// Extra data used for toggling the correct item\r\n\t\t\t\t\t\t\tindex: i\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\treturn [];\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tonClick: function(e, legendItem) {\r\n\t\t\tvar index = legendItem.index;\r\n\t\t\tvar chart = this.chart;\r\n\t\t\tvar i, ilen, meta;\r\n\r\n\t\t\tfor (i = 0, ilen = (chart.data.datasets || []).length; i < ilen; ++i) {\r\n\t\t\t\tmeta = chart.getDatasetMeta(i);\r\n\t\t\t\t// toggle visibility of index if exists\r\n\t\t\t\tif (meta.data[index]) {\r\n\t\t\t\t\tmeta.data[index].hidden = !meta.data[index].hidden;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tchart.update();\r\n\t\t}\r\n\t},\r\n\r\n\t// The percentage of the chart that we cut out of the middle.\r\n\tcutoutPercentage: 50,\r\n\r\n\t// The rotation of the chart, where the first data arc begins.\r\n\trotation: -HALF_PI$1,\r\n\r\n\t// The total circumference of the chart.\r\n\tcircumference: DOUBLE_PI$1,\r\n\r\n\t// Need to override these to give a nice default\r\n\ttooltips: {\r\n\t\tcallbacks: {\r\n\t\t\ttitle: function() {\r\n\t\t\t\treturn '';\r\n\t\t\t},\r\n\t\t\tlabel: function(tooltipItem, data) {\r\n\t\t\t\tvar dataLabel = data.labels[tooltipItem.index];\r\n\t\t\t\tvar value = ': ' + data.datasets[tooltipItem.datasetIndex].data[tooltipItem.index];\r\n\r\n\t\t\t\tif (helpers$1.isArray(dataLabel)) {\r\n\t\t\t\t\t// show value on first line of multiline label\r\n\t\t\t\t\t// need to clone because we are changing the value\r\n\t\t\t\t\tdataLabel = dataLabel.slice();\r\n\t\t\t\t\tdataLabel[0] += value;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tdataLabel += value;\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn dataLabel;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n});\r\n\r\nvar controller_doughnut = core_datasetController.extend({\r\n\r\n\tdataElementType: elements.Arc,\r\n\r\n\tlinkScales: helpers$1.noop,\r\n\r\n\t/**\r\n\t * @private\r\n\t */\r\n\t_dataElementOptions: [\r\n\t\t'backgroundColor',\r\n\t\t'borderColor',\r\n\t\t'borderWidth',\r\n\t\t'borderAlign',\r\n\t\t'hoverBackgroundColor',\r\n\t\t'hoverBorderColor',\r\n\t\t'hoverBorderWidth',\r\n\t],\r\n\r\n\t// Get index of the dataset in relation to the visible datasets. This allows determining the inner and outer radius correctly\r\n\tgetRingIndex: function(datasetIndex) {\r\n\t\tvar ringIndex = 0;\r\n\r\n\t\tfor (var j = 0; j < datasetIndex; ++j) {\r\n\t\t\tif (this.chart.isDatasetVisible(j)) {\r\n\t\t\t\t++ringIndex;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn ringIndex;\r\n\t},\r\n\r\n\tupdate: function(reset) {\r\n\t\tvar me = this;\r\n\t\tvar chart = me.chart;\r\n\t\tvar chartArea = chart.chartArea;\r\n\t\tvar opts = chart.options;\r\n\t\tvar ratioX = 1;\r\n\t\tvar ratioY = 1;\r\n\t\tvar offsetX = 0;\r\n\t\tvar offsetY = 0;\r\n\t\tvar meta = me.getMeta();\r\n\t\tvar arcs = meta.data;\r\n\t\tvar cutout = opts.cutoutPercentage / 100 || 0;\r\n\t\tvar circumference = opts.circumference;\r\n\t\tvar chartWeight = me._getRingWeight(me.index);\r\n\t\tvar maxWidth, maxHeight, i, ilen;\r\n\r\n\t\t// If the chart's circumference isn't a full circle, calculate size as a ratio of the width/height of the arc\r\n\t\tif (circumference < DOUBLE_PI$1) {\r\n\t\t\tvar startAngle = opts.rotation % DOUBLE_PI$1;\r\n\t\t\tstartAngle += startAngle >= PI$1 ? -DOUBLE_PI$1 : startAngle < -PI$1 ? DOUBLE_PI$1 : 0;\r\n\t\t\tvar endAngle = startAngle + circumference;\r\n\t\t\tvar startX = Math.cos(startAngle);\r\n\t\t\tvar startY = Math.sin(startAngle);\r\n\t\t\tvar endX = Math.cos(endAngle);\r\n\t\t\tvar endY = Math.sin(endAngle);\r\n\t\t\tvar contains0 = (startAngle <= 0 && endAngle >= 0) || endAngle >= DOUBLE_PI$1;\r\n\t\t\tvar contains90 = (startAngle <= HALF_PI$1 && endAngle >= HALF_PI$1) || endAngle >= DOUBLE_PI$1 + HALF_PI$1;\r\n\t\t\tvar contains180 = startAngle === -PI$1 || endAngle >= PI$1;\r\n\t\t\tvar contains270 = (startAngle <= -HALF_PI$1 && endAngle >= -HALF_PI$1) || endAngle >= PI$1 + HALF_PI$1;\r\n\t\t\tvar minX = contains180 ? -1 : Math.min(startX, startX * cutout, endX, endX * cutout);\r\n\t\t\tvar minY = contains270 ? -1 : Math.min(startY, startY * cutout, endY, endY * cutout);\r\n\t\t\tvar maxX = contains0 ? 1 : Math.max(startX, startX * cutout, endX, endX * cutout);\r\n\t\t\tvar maxY = contains90 ? 1 : Math.max(startY, startY * cutout, endY, endY * cutout);\r\n\t\t\tratioX = (maxX - minX) / 2;\r\n\t\t\tratioY = (maxY - minY) / 2;\r\n\t\t\toffsetX = -(maxX + minX) / 2;\r\n\t\t\toffsetY = -(maxY + minY) / 2;\r\n\t\t}\r\n\r\n\t\tfor (i = 0, ilen = arcs.length; i < ilen; ++i) {\r\n\t\t\tarcs[i]._options = me._resolveDataElementOptions(arcs[i], i);\r\n\t\t}\r\n\r\n\t\tchart.borderWidth = me.getMaxBorderWidth();\r\n\t\tmaxWidth = (chartArea.right - chartArea.left - chart.borderWidth) / ratioX;\r\n\t\tmaxHeight = (chartArea.bottom - chartArea.top - chart.borderWidth) / ratioY;\r\n\t\tchart.outerRadius = Math.max(Math.min(maxWidth, maxHeight) / 2, 0);\r\n\t\tchart.innerRadius = Math.max(chart.outerRadius * cutout, 0);\r\n\t\tchart.radiusLength = (chart.outerRadius - chart.innerRadius) / (me._getVisibleDatasetWeightTotal() || 1);\r\n\t\tchart.offsetX = offsetX * chart.outerRadius;\r\n\t\tchart.offsetY = offsetY * chart.outerRadius;\r\n\r\n\t\tmeta.total = me.calculateTotal();\r\n\r\n\t\tme.outerRadius = chart.outerRadius - chart.radiusLength * me._getRingWeightOffset(me.index);\r\n\t\tme.innerRadius = Math.max(me.outerRadius - chart.radiusLength * chartWeight, 0);\r\n\r\n\t\tfor (i = 0, ilen = arcs.length; i < ilen; ++i) {\r\n\t\t\tme.updateElement(arcs[i], i, reset);\r\n\t\t}\r\n\t},\r\n\r\n\tupdateElement: function(arc, index, reset) {\r\n\t\tvar me = this;\r\n\t\tvar chart = me.chart;\r\n\t\tvar chartArea = chart.chartArea;\r\n\t\tvar opts = chart.options;\r\n\t\tvar animationOpts = opts.animation;\r\n\t\tvar centerX = (chartArea.left + chartArea.right) / 2;\r\n\t\tvar centerY = (chartArea.top + chartArea.bottom) / 2;\r\n\t\tvar startAngle = opts.rotation; // non reset case handled later\r\n\t\tvar endAngle = opts.rotation; // non reset case handled later\r\n\t\tvar dataset = me.getDataset();\r\n\t\tvar circumference = reset && animationOpts.animateRotate ? 0 : arc.hidden ? 0 : me.calculateCircumference(dataset.data[index]) * (opts.circumference / DOUBLE_PI$1);\r\n\t\tvar innerRadius = reset && animationOpts.animateScale ? 0 : me.innerRadius;\r\n\t\tvar outerRadius = reset && animationOpts.animateScale ? 0 : me.outerRadius;\r\n\t\tvar options = arc._options || {};\r\n\r\n\t\thelpers$1.extend(arc, {\r\n\t\t\t// Utility\r\n\t\t\t_datasetIndex: me.index,\r\n\t\t\t_index: index,\r\n\r\n\t\t\t// Desired view properties\r\n\t\t\t_model: {\r\n\t\t\t\tbackgroundColor: options.backgroundColor,\r\n\t\t\t\tborderColor: options.borderColor,\r\n\t\t\t\tborderWidth: options.borderWidth,\r\n\t\t\t\tborderAlign: options.borderAlign,\r\n\t\t\t\tx: centerX + chart.offsetX,\r\n\t\t\t\ty: centerY + chart.offsetY,\r\n\t\t\t\tstartAngle: startAngle,\r\n\t\t\t\tendAngle: endAngle,\r\n\t\t\t\tcircumference: circumference,\r\n\t\t\t\touterRadius: outerRadius,\r\n\t\t\t\tinnerRadius: innerRadius,\r\n\t\t\t\tlabel: helpers$1.valueAtIndexOrDefault(dataset.label, index, chart.data.labels[index])\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tvar model = arc._model;\r\n\r\n\t\t// Set correct angles if not resetting\r\n\t\tif (!reset || !animationOpts.animateRotate) {\r\n\t\t\tif (index === 0) {\r\n\t\t\t\tmodel.startAngle = opts.rotation;\r\n\t\t\t} else {\r\n\t\t\t\tmodel.startAngle = me.getMeta().data[index - 1]._model.endAngle;\r\n\t\t\t}\r\n\r\n\t\t\tmodel.endAngle = model.startAngle + model.circumference;\r\n\t\t}\r\n\r\n\t\tarc.pivot();\r\n\t},\r\n\r\n\tcalculateTotal: function() {\r\n\t\tvar dataset = this.getDataset();\r\n\t\tvar meta = this.getMeta();\r\n\t\tvar total = 0;\r\n\t\tvar value;\r\n\r\n\t\thelpers$1.each(meta.data, function(element, index) {\r\n\t\t\tvalue = dataset.data[index];\r\n\t\t\tif (!isNaN(value) && !element.hidden) {\r\n\t\t\t\ttotal += Math.abs(value);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\t/* if (total === 0) {\r\n\t\t\ttotal = NaN;\r\n\t\t}*/\r\n\r\n\t\treturn total;\r\n\t},\r\n\r\n\tcalculateCircumference: function(value) {\r\n\t\tvar total = this.getMeta().total;\r\n\t\tif (total > 0 && !isNaN(value)) {\r\n\t\t\treturn DOUBLE_PI$1 * (Math.abs(value) / total);\r\n\t\t}\r\n\t\treturn 0;\r\n\t},\r\n\r\n\t// gets the max border or hover width to properly scale pie charts\r\n\tgetMaxBorderWidth: function(arcs) {\r\n\t\tvar me = this;\r\n\t\tvar max = 0;\r\n\t\tvar chart = me.chart;\r\n\t\tvar i, ilen, meta, arc, controller, options, borderWidth, hoverWidth;\r\n\r\n\t\tif (!arcs) {\r\n\t\t\t// Find the outmost visible dataset\r\n\t\t\tfor (i = 0, ilen = chart.data.datasets.length; i < ilen; ++i) {\r\n\t\t\t\tif (chart.isDatasetVisible(i)) {\r\n\t\t\t\t\tmeta = chart.getDatasetMeta(i);\r\n\t\t\t\t\tarcs = meta.data;\r\n\t\t\t\t\tif (i !== me.index) {\r\n\t\t\t\t\t\tcontroller = meta.controller;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (!arcs) {\r\n\t\t\treturn 0;\r\n\t\t}\r\n\r\n\t\tfor (i = 0, ilen = arcs.length; i < ilen; ++i) {\r\n\t\t\tarc = arcs[i];\r\n\t\t\tif (controller) {\r\n\t\t\t\tcontroller._configure();\r\n\t\t\t\toptions = controller._resolveDataElementOptions(arc, i);\r\n\t\t\t} else {\r\n\t\t\t\toptions = arc._options;\r\n\t\t\t}\r\n\t\t\tif (options.borderAlign !== 'inner') {\r\n\t\t\t\tborderWidth = options.borderWidth;\r\n\t\t\t\thoverWidth = options.hoverBorderWidth;\r\n\r\n\t\t\t\tmax = borderWidth > max ? borderWidth : max;\r\n\t\t\t\tmax = hoverWidth > max ? hoverWidth : max;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn max;\r\n\t},\r\n\r\n\t/**\r\n\t * @protected\r\n\t */\r\n\tsetHoverStyle: function(arc) {\r\n\t\tvar model = arc._model;\r\n\t\tvar options = arc._options;\r\n\t\tvar getHoverColor = helpers$1.getHoverColor;\r\n\r\n\t\tarc.$previousStyle = {\r\n\t\t\tbackgroundColor: model.backgroundColor,\r\n\t\t\tborderColor: model.borderColor,\r\n\t\t\tborderWidth: model.borderWidth,\r\n\t\t};\r\n\r\n\t\tmodel.backgroundColor = valueOrDefault$5(options.hoverBackgroundColor, getHoverColor(options.backgroundColor));\r\n\t\tmodel.borderColor = valueOrDefault$5(options.hoverBorderColor, getHoverColor(options.borderColor));\r\n\t\tmodel.borderWidth = valueOrDefault$5(options.hoverBorderWidth, options.borderWidth);\r\n\t},\r\n\r\n\t/**\r\n\t * Get radius length offset of the dataset in relation to the visible datasets weights. This allows determining the inner and outer radius correctly\r\n\t * @private\r\n\t */\r\n\t_getRingWeightOffset: function(datasetIndex) {\r\n\t\tvar ringWeightOffset = 0;\r\n\r\n\t\tfor (var i = 0; i < datasetIndex; ++i) {\r\n\t\t\tif (this.chart.isDatasetVisible(i)) {\r\n\t\t\t\tringWeightOffset += this._getRingWeight(i);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn ringWeightOffset;\r\n\t},\r\n\r\n\t/**\r\n\t * @private\r\n\t */\r\n\t_getRingWeight: function(dataSetIndex) {\r\n\t\treturn Math.max(valueOrDefault$5(this.chart.data.datasets[dataSetIndex].weight, 1), 0);\r\n\t},\r\n\r\n\t/**\r\n\t * Returns the sum of all visibile data set weights.  This value can be 0.\r\n\t * @private\r\n\t */\r\n\t_getVisibleDatasetWeightTotal: function() {\r\n\t\treturn this._getRingWeightOffset(this.chart.data.datasets.length);\r\n\t}\r\n});\n\ncore_defaults._set('horizontalBar', {\r\n\thover: {\r\n\t\tmode: 'index',\r\n\t\taxis: 'y'\r\n\t},\r\n\r\n\tscales: {\r\n\t\txAxes: [{\r\n\t\t\ttype: 'linear',\r\n\t\t\tposition: 'bottom'\r\n\t\t}],\r\n\r\n\t\tyAxes: [{\r\n\t\t\ttype: 'category',\r\n\t\t\tposition: 'left',\r\n\t\t\toffset: true,\r\n\t\t\tgridLines: {\r\n\t\t\t\toffsetGridLines: true\r\n\t\t\t}\r\n\t\t}]\r\n\t},\r\n\r\n\telements: {\r\n\t\trectangle: {\r\n\t\t\tborderSkipped: 'left'\r\n\t\t}\r\n\t},\r\n\r\n\ttooltips: {\r\n\t\tmode: 'index',\r\n\t\taxis: 'y'\r\n\t}\r\n});\r\n\r\ncore_defaults._set('global', {\r\n\tdatasets: {\r\n\t\thorizontalBar: {\r\n\t\t\tcategoryPercentage: 0.8,\r\n\t\t\tbarPercentage: 0.9\r\n\t\t}\r\n\t}\r\n});\r\n\r\nvar controller_horizontalBar = controller_bar.extend({\r\n\t/**\r\n\t * @private\r\n\t */\r\n\t_getValueScaleId: function() {\r\n\t\treturn this.getMeta().xAxisID;\r\n\t},\r\n\r\n\t/**\r\n\t * @private\r\n\t */\r\n\t_getIndexScaleId: function() {\r\n\t\treturn this.getMeta().yAxisID;\r\n\t}\r\n});\n\nvar valueOrDefault$6 = helpers$1.valueOrDefault;\r\nvar resolve$2 = helpers$1.options.resolve;\r\nvar isPointInArea = helpers$1.canvas._isPointInArea;\r\n\r\ncore_defaults._set('line', {\r\n\tshowLines: true,\r\n\tspanGaps: false,\r\n\r\n\thover: {\r\n\t\tmode: 'label'\r\n\t},\r\n\r\n\tscales: {\r\n\t\txAxes: [{\r\n\t\t\ttype: 'category',\r\n\t\t\tid: 'x-axis-0'\r\n\t\t}],\r\n\t\tyAxes: [{\r\n\t\t\ttype: 'linear',\r\n\t\t\tid: 'y-axis-0'\r\n\t\t}]\r\n\t}\r\n});\r\n\r\nfunction scaleClip(scale, halfBorderWidth) {\r\n\tvar tickOpts = scale && scale.options.ticks || {};\r\n\tvar reverse = tickOpts.reverse;\r\n\tvar min = tickOpts.min === undefined ? halfBorderWidth : 0;\r\n\tvar max = tickOpts.max === undefined ? halfBorderWidth : 0;\r\n\treturn {\r\n\t\tstart: reverse ? max : min,\r\n\t\tend: reverse ? min : max\r\n\t};\r\n}\r\n\r\nfunction defaultClip(xScale, yScale, borderWidth) {\r\n\tvar halfBorderWidth = borderWidth / 2;\r\n\tvar x = scaleClip(xScale, halfBorderWidth);\r\n\tvar y = scaleClip(yScale, halfBorderWidth);\r\n\r\n\treturn {\r\n\t\ttop: y.end,\r\n\t\tright: x.end,\r\n\t\tbottom: y.start,\r\n\t\tleft: x.start\r\n\t};\r\n}\r\n\r\nfunction toClip(value) {\r\n\tvar t, r, b, l;\r\n\r\n\tif (helpers$1.isObject(value)) {\r\n\t\tt = value.top;\r\n\t\tr = value.right;\r\n\t\tb = value.bottom;\r\n\t\tl = value.left;\r\n\t} else {\r\n\t\tt = r = b = l = value;\r\n\t}\r\n\r\n\treturn {\r\n\t\ttop: t,\r\n\t\tright: r,\r\n\t\tbottom: b,\r\n\t\tleft: l\r\n\t};\r\n}\r\n\r\n\r\nvar controller_line = core_datasetController.extend({\r\n\r\n\tdatasetElementType: elements.Line,\r\n\r\n\tdataElementType: elements.Point,\r\n\r\n\t/**\r\n\t * @private\r\n\t */\r\n\t_datasetElementOptions: [\r\n\t\t'backgroundColor',\r\n\t\t'borderCapStyle',\r\n\t\t'borderColor',\r\n\t\t'borderDash',\r\n\t\t'borderDashOffset',\r\n\t\t'borderJoinStyle',\r\n\t\t'borderWidth',\r\n\t\t'cubicInterpolationMode',\r\n\t\t'fill'\r\n\t],\r\n\r\n\t/**\r\n\t * @private\r\n\t */\r\n\t_dataElementOptions: {\r\n\t\tbackgroundColor: 'pointBackgroundColor',\r\n\t\tborderColor: 'pointBorderColor',\r\n\t\tborderWidth: 'pointBorderWidth',\r\n\t\thitRadius: 'pointHitRadius',\r\n\t\thoverBackgroundColor: 'pointHoverBackgroundColor',\r\n\t\thoverBorderColor: 'pointHoverBorderColor',\r\n\t\thoverBorderWidth: 'pointHoverBorderWidth',\r\n\t\thoverRadius: 'pointHoverRadius',\r\n\t\tpointStyle: 'pointStyle',\r\n\t\tradius: 'pointRadius',\r\n\t\trotation: 'pointRotation'\r\n\t},\r\n\r\n\tupdate: function(reset) {\r\n\t\tvar me = this;\r\n\t\tvar meta = me.getMeta();\r\n\t\tvar line = meta.dataset;\r\n\t\tvar points = meta.data || [];\r\n\t\tvar options = me.chart.options;\r\n\t\tvar config = me._config;\r\n\t\tvar showLine = me._showLine = valueOrDefault$6(config.showLine, options.showLines);\r\n\t\tvar i, ilen;\r\n\r\n\t\tme._xScale = me.getScaleForId(meta.xAxisID);\r\n\t\tme._yScale = me.getScaleForId(meta.yAxisID);\r\n\r\n\t\t// Update Line\r\n\t\tif (showLine) {\r\n\t\t\t// Compatibility: If the properties are defined with only the old name, use those values\r\n\t\t\tif (config.tension !== undefined && config.lineTension === undefined) {\r\n\t\t\t\tconfig.lineTension = config.tension;\r\n\t\t\t}\r\n\r\n\t\t\t// Utility\r\n\t\t\tline._scale = me._yScale;\r\n\t\t\tline._datasetIndex = me.index;\r\n\t\t\t// Data\r\n\t\t\tline._children = points;\r\n\t\t\t// Model\r\n\t\t\tline._model = me._resolveDatasetElementOptions(line);\r\n\r\n\t\t\tline.pivot();\r\n\t\t}\r\n\r\n\t\t// Update Points\r\n\t\tfor (i = 0, ilen = points.length; i < ilen; ++i) {\r\n\t\t\tme.updateElement(points[i], i, reset);\r\n\t\t}\r\n\r\n\t\tif (showLine && line._model.tension !== 0) {\r\n\t\t\tme.updateBezierControlPoints();\r\n\t\t}\r\n\r\n\t\t// Now pivot the point for animation\r\n\t\tfor (i = 0, ilen = points.length; i < ilen; ++i) {\r\n\t\t\tpoints[i].pivot();\r\n\t\t}\r\n\t},\r\n\r\n\tupdateElement: function(point, index, reset) {\r\n\t\tvar me = this;\r\n\t\tvar meta = me.getMeta();\r\n\t\tvar custom = point.custom || {};\r\n\t\tvar dataset = me.getDataset();\r\n\t\tvar datasetIndex = me.index;\r\n\t\tvar value = dataset.data[index];\r\n\t\tvar xScale = me._xScale;\r\n\t\tvar yScale = me._yScale;\r\n\t\tvar lineModel = meta.dataset._model;\r\n\t\tvar x, y;\r\n\r\n\t\tvar options = me._resolveDataElementOptions(point, index);\r\n\r\n\t\tx = xScale.getPixelForValue(typeof value === 'object' ? value : NaN, index, datasetIndex);\r\n\t\ty = reset ? yScale.getBasePixel() : me.calculatePointY(value, index, datasetIndex);\r\n\r\n\t\t// Utility\r\n\t\tpoint._xScale = xScale;\r\n\t\tpoint._yScale = yScale;\r\n\t\tpoint._options = options;\r\n\t\tpoint._datasetIndex = datasetIndex;\r\n\t\tpoint._index = index;\r\n\r\n\t\t// Desired view properties\r\n\t\tpoint._model = {\r\n\t\t\tx: x,\r\n\t\t\ty: y,\r\n\t\t\tskip: custom.skip || isNaN(x) || isNaN(y),\r\n\t\t\t// Appearance\r\n\t\t\tradius: options.radius,\r\n\t\t\tpointStyle: options.pointStyle,\r\n\t\t\trotation: options.rotation,\r\n\t\t\tbackgroundColor: options.backgroundColor,\r\n\t\t\tborderColor: options.borderColor,\r\n\t\t\tborderWidth: options.borderWidth,\r\n\t\t\ttension: valueOrDefault$6(custom.tension, lineModel ? lineModel.tension : 0),\r\n\t\t\tsteppedLine: lineModel ? lineModel.steppedLine : false,\r\n\t\t\t// Tooltip\r\n\t\t\thitRadius: options.hitRadius\r\n\t\t};\r\n\t},\r\n\r\n\t/**\r\n\t * @private\r\n\t */\r\n\t_resolveDatasetElementOptions: function(element) {\r\n\t\tvar me = this;\r\n\t\tvar config = me._config;\r\n\t\tvar custom = element.custom || {};\r\n\t\tvar options = me.chart.options;\r\n\t\tvar lineOptions = options.elements.line;\r\n\t\tvar values = core_datasetController.prototype._resolveDatasetElementOptions.apply(me, arguments);\r\n\r\n\t\t// The default behavior of lines is to break at null values, according\r\n\t\t// to https://github.com/chartjs/Chart.js/issues/2435#issuecomment-216718158\r\n\t\t// This option gives lines the ability to span gaps\r\n\t\tvalues.spanGaps = valueOrDefault$6(config.spanGaps, options.spanGaps);\r\n\t\tvalues.tension = valueOrDefault$6(config.lineTension, lineOptions.tension);\r\n\t\tvalues.steppedLine = resolve$2([custom.steppedLine, config.steppedLine, lineOptions.stepped]);\r\n\t\tvalues.clip = toClip(valueOrDefault$6(config.clip, defaultClip(me._xScale, me._yScale, values.borderWidth)));\r\n\r\n\t\treturn values;\r\n\t},\r\n\r\n\tcalculatePointY: function(value, index, datasetIndex) {\r\n\t\tvar me = this;\r\n\t\tvar chart = me.chart;\r\n\t\tvar yScale = me._yScale;\r\n\t\tvar sumPos = 0;\r\n\t\tvar sumNeg = 0;\r\n\t\tvar i, ds, dsMeta, stackedRightValue, rightValue, metasets, ilen;\r\n\r\n\t\tif (yScale.options.stacked) {\r\n\t\t\trightValue = +yScale.getRightValue(value);\r\n\t\t\tmetasets = chart._getSortedVisibleDatasetMetas();\r\n\t\t\tilen = metasets.length;\r\n\r\n\t\t\tfor (i = 0; i < ilen; ++i) {\r\n\t\t\t\tdsMeta = metasets[i];\r\n\t\t\t\tif (dsMeta.index === datasetIndex) {\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tds = chart.data.datasets[dsMeta.index];\r\n\t\t\t\tif (dsMeta.type === 'line' && dsMeta.yAxisID === yScale.id) {\r\n\t\t\t\t\tstackedRightValue = +yScale.getRightValue(ds.data[index]);\r\n\t\t\t\t\tif (stackedRightValue < 0) {\r\n\t\t\t\t\t\tsumNeg += stackedRightValue || 0;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tsumPos += stackedRightValue || 0;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (rightValue < 0) {\r\n\t\t\t\treturn yScale.getPixelForValue(sumNeg + rightValue);\r\n\t\t\t}\r\n\t\t\treturn yScale.getPixelForValue(sumPos + rightValue);\r\n\t\t}\r\n\t\treturn yScale.getPixelForValue(value);\r\n\t},\r\n\r\n\tupdateBezierControlPoints: function() {\r\n\t\tvar me = this;\r\n\t\tvar chart = me.chart;\r\n\t\tvar meta = me.getMeta();\r\n\t\tvar lineModel = meta.dataset._model;\r\n\t\tvar area = chart.chartArea;\r\n\t\tvar points = meta.data || [];\r\n\t\tvar i, ilen, model, controlPoints;\r\n\r\n\t\t// Only consider points that are drawn in case the spanGaps option is used\r\n\t\tif (lineModel.spanGaps) {\r\n\t\t\tpoints = points.filter(function(pt) {\r\n\t\t\t\treturn !pt._model.skip;\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tfunction capControlPoint(pt, min, max) {\r\n\t\t\treturn Math.max(Math.min(pt, max), min);\r\n\t\t}\r\n\r\n\t\tif (lineModel.cubicInterpolationMode === 'monotone') {\r\n\t\t\thelpers$1.splineCurveMonotone(points);\r\n\t\t} else {\r\n\t\t\tfor (i = 0, ilen = points.length; i < ilen; ++i) {\r\n\t\t\t\tmodel = points[i]._model;\r\n\t\t\t\tcontrolPoints = helpers$1.splineCurve(\r\n\t\t\t\t\thelpers$1.previousItem(points, i)._model,\r\n\t\t\t\t\tmodel,\r\n\t\t\t\t\thelpers$1.nextItem(points, i)._model,\r\n\t\t\t\t\tlineModel.tension\r\n\t\t\t\t);\r\n\t\t\t\tmodel.controlPointPreviousX = controlPoints.previous.x;\r\n\t\t\t\tmodel.controlPointPreviousY = controlPoints.previous.y;\r\n\t\t\t\tmodel.controlPointNextX = controlPoints.next.x;\r\n\t\t\t\tmodel.controlPointNextY = controlPoints.next.y;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (chart.options.elements.line.capBezierPoints) {\r\n\t\t\tfor (i = 0, ilen = points.length; i < ilen; ++i) {\r\n\t\t\t\tmodel = points[i]._model;\r\n\t\t\t\tif (isPointInArea(model, area)) {\r\n\t\t\t\t\tif (i > 0 && isPointInArea(points[i - 1]._model, area)) {\r\n\t\t\t\t\t\tmodel.controlPointPreviousX = capControlPoint(model.controlPointPreviousX, area.left, area.right);\r\n\t\t\t\t\t\tmodel.controlPointPreviousY = capControlPoint(model.controlPointPreviousY, area.top, area.bottom);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (i < points.length - 1 && isPointInArea(points[i + 1]._model, area)) {\r\n\t\t\t\t\t\tmodel.controlPointNextX = capControlPoint(model.controlPointNextX, area.left, area.right);\r\n\t\t\t\t\t\tmodel.controlPointNextY = capControlPoint(model.controlPointNextY, area.top, area.bottom);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\tdraw: function() {\r\n\t\tvar me = this;\r\n\t\tvar chart = me.chart;\r\n\t\tvar meta = me.getMeta();\r\n\t\tvar points = meta.data || [];\r\n\t\tvar area = chart.chartArea;\r\n\t\tvar canvas = chart.canvas;\r\n\t\tvar i = 0;\r\n\t\tvar ilen = points.length;\r\n\t\tvar clip;\r\n\r\n\t\tif (me._showLine) {\r\n\t\t\tclip = meta.dataset._model.clip;\r\n\r\n\t\t\thelpers$1.canvas.clipArea(chart.ctx, {\r\n\t\t\t\tleft: clip.left === false ? 0 : area.left - clip.left,\r\n\t\t\t\tright: clip.right === false ? canvas.width : area.right + clip.right,\r\n\t\t\t\ttop: clip.top === false ? 0 : area.top - clip.top,\r\n\t\t\t\tbottom: clip.bottom === false ? canvas.height : area.bottom + clip.bottom\r\n\t\t\t});\r\n\r\n\t\t\tmeta.dataset.draw();\r\n\r\n\t\t\thelpers$1.canvas.unclipArea(chart.ctx);\r\n\t\t}\r\n\r\n\t\t// Draw the points\r\n\t\tfor (; i < ilen; ++i) {\r\n\t\t\tpoints[i].draw(area);\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t * @protected\r\n\t */\r\n\tsetHoverStyle: function(point) {\r\n\t\tvar model = point._model;\r\n\t\tvar options = point._options;\r\n\t\tvar getHoverColor = helpers$1.getHoverColor;\r\n\r\n\t\tpoint.$previousStyle = {\r\n\t\t\tbackgroundColor: model.backgroundColor,\r\n\t\t\tborderColor: model.borderColor,\r\n\t\t\tborderWidth: model.borderWidth,\r\n\t\t\tradius: model.radius\r\n\t\t};\r\n\r\n\t\tmodel.backgroundColor = valueOrDefault$6(options.hoverBackgroundColor, getHoverColor(options.backgroundColor));\r\n\t\tmodel.borderColor = valueOrDefault$6(options.hoverBorderColor, getHoverColor(options.borderColor));\r\n\t\tmodel.borderWidth = valueOrDefault$6(options.hoverBorderWidth, options.borderWidth);\r\n\t\tmodel.radius = valueOrDefault$6(options.hoverRadius, options.radius);\r\n\t},\r\n});\n\nvar resolve$3 = helpers$1.options.resolve;\r\n\r\ncore_defaults._set('polarArea', {\r\n\tscale: {\r\n\t\ttype: 'radialLinear',\r\n\t\tangleLines: {\r\n\t\t\tdisplay: false\r\n\t\t},\r\n\t\tgridLines: {\r\n\t\t\tcircular: true\r\n\t\t},\r\n\t\tpointLabels: {\r\n\t\t\tdisplay: false\r\n\t\t},\r\n\t\tticks: {\r\n\t\t\tbeginAtZero: true\r\n\t\t}\r\n\t},\r\n\r\n\t// Boolean - Whether to animate the rotation of the chart\r\n\tanimation: {\r\n\t\tanimateRotate: true,\r\n\t\tanimateScale: true\r\n\t},\r\n\r\n\tstartAngle: -0.5 * Math.PI,\r\n\tlegendCallback: function(chart) {\r\n\t\tvar list = document.createElement('ul');\r\n\t\tvar data = chart.data;\r\n\t\tvar datasets = data.datasets;\r\n\t\tvar labels = data.labels;\r\n\t\tvar i, ilen, listItem, listItemSpan;\r\n\r\n\t\tlist.setAttribute('class', chart.id + '-legend');\r\n\t\tif (datasets.length) {\r\n\t\t\tfor (i = 0, ilen = datasets[0].data.length; i < ilen; ++i) {\r\n\t\t\t\tlistItem = list.appendChild(document.createElement('li'));\r\n\t\t\t\tlistItemSpan = listItem.appendChild(document.createElement('span'));\r\n\t\t\t\tlistItemSpan.style.backgroundColor = datasets[0].backgroundColor[i];\r\n\t\t\t\tif (labels[i]) {\r\n\t\t\t\t\tlistItem.appendChild(document.createTextNode(labels[i]));\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn list.outerHTML;\r\n\t},\r\n\tlegend: {\r\n\t\tlabels: {\r\n\t\t\tgenerateLabels: function(chart) {\r\n\t\t\t\tvar data = chart.data;\r\n\t\t\t\tif (data.labels.length && data.datasets.length) {\r\n\t\t\t\t\treturn data.labels.map(function(label, i) {\r\n\t\t\t\t\t\tvar meta = chart.getDatasetMeta(0);\r\n\t\t\t\t\t\tvar style = meta.controller.getStyle(i);\r\n\r\n\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\ttext: label,\r\n\t\t\t\t\t\t\tfillStyle: style.backgroundColor,\r\n\t\t\t\t\t\t\tstrokeStyle: style.borderColor,\r\n\t\t\t\t\t\t\tlineWidth: style.borderWidth,\r\n\t\t\t\t\t\t\thidden: isNaN(data.datasets[0].data[i]) || meta.data[i].hidden,\r\n\r\n\t\t\t\t\t\t\t// Extra data used for toggling the correct item\r\n\t\t\t\t\t\t\tindex: i\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\treturn [];\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tonClick: function(e, legendItem) {\r\n\t\t\tvar index = legendItem.index;\r\n\t\t\tvar chart = this.chart;\r\n\t\t\tvar i, ilen, meta;\r\n\r\n\t\t\tfor (i = 0, ilen = (chart.data.datasets || []).length; i < ilen; ++i) {\r\n\t\t\t\tmeta = chart.getDatasetMeta(i);\r\n\t\t\t\tmeta.data[index].hidden = !meta.data[index].hidden;\r\n\t\t\t}\r\n\r\n\t\t\tchart.update();\r\n\t\t}\r\n\t},\r\n\r\n\t// Need to override these to give a nice default\r\n\ttooltips: {\r\n\t\tcallbacks: {\r\n\t\t\ttitle: function() {\r\n\t\t\t\treturn '';\r\n\t\t\t},\r\n\t\t\tlabel: function(item, data) {\r\n\t\t\t\treturn data.labels[item.index] + ': ' + item.yLabel;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n});\r\n\r\nvar controller_polarArea = core_datasetController.extend({\r\n\r\n\tdataElementType: elements.Arc,\r\n\r\n\tlinkScales: helpers$1.noop,\r\n\r\n\t/**\r\n\t * @private\r\n\t */\r\n\t_dataElementOptions: [\r\n\t\t'backgroundColor',\r\n\t\t'borderColor',\r\n\t\t'borderWidth',\r\n\t\t'borderAlign',\r\n\t\t'hoverBackgroundColor',\r\n\t\t'hoverBorderColor',\r\n\t\t'hoverBorderWidth',\r\n\t],\r\n\r\n\t/**\r\n\t * @private\r\n\t */\r\n\t_getIndexScaleId: function() {\r\n\t\treturn this.chart.scale.id;\r\n\t},\r\n\r\n\t/**\r\n\t * @private\r\n\t */\r\n\t_getValueScaleId: function() {\r\n\t\treturn this.chart.scale.id;\r\n\t},\r\n\r\n\tupdate: function(reset) {\r\n\t\tvar me = this;\r\n\t\tvar dataset = me.getDataset();\r\n\t\tvar meta = me.getMeta();\r\n\t\tvar start = me.chart.options.startAngle || 0;\r\n\t\tvar starts = me._starts = [];\r\n\t\tvar angles = me._angles = [];\r\n\t\tvar arcs = meta.data;\r\n\t\tvar i, ilen, angle;\r\n\r\n\t\tme._updateRadius();\r\n\r\n\t\tmeta.count = me.countVisibleElements();\r\n\r\n\t\tfor (i = 0, ilen = dataset.data.length; i < ilen; i++) {\r\n\t\t\tstarts[i] = start;\r\n\t\t\tangle = me._computeAngle(i);\r\n\t\t\tangles[i] = angle;\r\n\t\t\tstart += angle;\r\n\t\t}\r\n\r\n\t\tfor (i = 0, ilen = arcs.length; i < ilen; ++i) {\r\n\t\t\tarcs[i]._options = me._resolveDataElementOptions(arcs[i], i);\r\n\t\t\tme.updateElement(arcs[i], i, reset);\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t * @private\r\n\t */\r\n\t_updateRadius: function() {\r\n\t\tvar me = this;\r\n\t\tvar chart = me.chart;\r\n\t\tvar chartArea = chart.chartArea;\r\n\t\tvar opts = chart.options;\r\n\t\tvar minSize = Math.min(chartArea.right - chartArea.left, chartArea.bottom - chartArea.top);\r\n\r\n\t\tchart.outerRadius = Math.max(minSize / 2, 0);\r\n\t\tchart.innerRadius = Math.max(opts.cutoutPercentage ? (chart.outerRadius / 100) * (opts.cutoutPercentage) : 1, 0);\r\n\t\tchart.radiusLength = (chart.outerRadius - chart.innerRadius) / chart.getVisibleDatasetCount();\r\n\r\n\t\tme.outerRadius = chart.outerRadius - (chart.radiusLength * me.index);\r\n\t\tme.innerRadius = me.outerRadius - chart.radiusLength;\r\n\t},\r\n\r\n\tupdateElement: function(arc, index, reset) {\r\n\t\tvar me = this;\r\n\t\tvar chart = me.chart;\r\n\t\tvar dataset = me.getDataset();\r\n\t\tvar opts = chart.options;\r\n\t\tvar animationOpts = opts.animation;\r\n\t\tvar scale = chart.scale;\r\n\t\tvar labels = chart.data.labels;\r\n\r\n\t\tvar centerX = scale.xCenter;\r\n\t\tvar centerY = scale.yCenter;\r\n\r\n\t\t// var negHalfPI = -0.5 * Math.PI;\r\n\t\tvar datasetStartAngle = opts.startAngle;\r\n\t\tvar distance = arc.hidden ? 0 : scale.getDistanceFromCenterForValue(dataset.data[index]);\r\n\t\tvar startAngle = me._starts[index];\r\n\t\tvar endAngle = startAngle + (arc.hidden ? 0 : me._angles[index]);\r\n\r\n\t\tvar resetRadius = animationOpts.animateScale ? 0 : scale.getDistanceFromCenterForValue(dataset.data[index]);\r\n\t\tvar options = arc._options || {};\r\n\r\n\t\thelpers$1.extend(arc, {\r\n\t\t\t// Utility\r\n\t\t\t_datasetIndex: me.index,\r\n\t\t\t_index: index,\r\n\t\t\t_scale: scale,\r\n\r\n\t\t\t// Desired view properties\r\n\t\t\t_model: {\r\n\t\t\t\tbackgroundColor: options.backgroundColor,\r\n\t\t\t\tborderColor: options.borderColor,\r\n\t\t\t\tborderWidth: options.borderWidth,\r\n\t\t\t\tborderAlign: options.borderAlign,\r\n\t\t\t\tx: centerX,\r\n\t\t\t\ty: centerY,\r\n\t\t\t\tinnerRadius: 0,\r\n\t\t\t\touterRadius: reset ? resetRadius : distance,\r\n\t\t\t\tstartAngle: reset && animationOpts.animateRotate ? datasetStartAngle : startAngle,\r\n\t\t\t\tendAngle: reset && animationOpts.animateRotate ? datasetStartAngle : endAngle,\r\n\t\t\t\tlabel: helpers$1.valueAtIndexOrDefault(labels, index, labels[index])\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tarc.pivot();\r\n\t},\r\n\r\n\tcountVisibleElements: function() {\r\n\t\tvar dataset = this.getDataset();\r\n\t\tvar meta = this.getMeta();\r\n\t\tvar count = 0;\r\n\r\n\t\thelpers$1.each(meta.data, function(element, index) {\r\n\t\t\tif (!isNaN(dataset.data[index]) && !element.hidden) {\r\n\t\t\t\tcount++;\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\treturn count;\r\n\t},\r\n\r\n\t/**\r\n\t * @protected\r\n\t */\r\n\tsetHoverStyle: function(arc) {\r\n\t\tvar model = arc._model;\r\n\t\tvar options = arc._options;\r\n\t\tvar getHoverColor = helpers$1.getHoverColor;\r\n\t\tvar valueOrDefault = helpers$1.valueOrDefault;\r\n\r\n\t\tarc.$previousStyle = {\r\n\t\t\tbackgroundColor: model.backgroundColor,\r\n\t\t\tborderColor: model.borderColor,\r\n\t\t\tborderWidth: model.borderWidth,\r\n\t\t};\r\n\r\n\t\tmodel.backgroundColor = valueOrDefault(options.hoverBackgroundColor, getHoverColor(options.backgroundColor));\r\n\t\tmodel.borderColor = valueOrDefault(options.hoverBorderColor, getHoverColor(options.borderColor));\r\n\t\tmodel.borderWidth = valueOrDefault(options.hoverBorderWidth, options.borderWidth);\r\n\t},\r\n\r\n\t/**\r\n\t * @private\r\n\t */\r\n\t_computeAngle: function(index) {\r\n\t\tvar me = this;\r\n\t\tvar count = this.getMeta().count;\r\n\t\tvar dataset = me.getDataset();\r\n\t\tvar meta = me.getMeta();\r\n\r\n\t\tif (isNaN(dataset.data[index]) || meta.data[index].hidden) {\r\n\t\t\treturn 0;\r\n\t\t}\r\n\r\n\t\t// Scriptable options\r\n\t\tvar context = {\r\n\t\t\tchart: me.chart,\r\n\t\t\tdataIndex: index,\r\n\t\t\tdataset: dataset,\r\n\t\t\tdatasetIndex: me.index\r\n\t\t};\r\n\r\n\t\treturn resolve$3([\r\n\t\t\tme.chart.options.elements.arc.angle,\r\n\t\t\t(2 * Math.PI) / count\r\n\t\t], context, index);\r\n\t}\r\n});\n\ncore_defaults._set('pie', helpers$1.clone(core_defaults.doughnut));\r\ncore_defaults._set('pie', {\r\n\tcutoutPercentage: 0\r\n});\r\n\r\n// Pie charts are Doughnut chart with different defaults\r\nvar controller_pie = controller_doughnut;\n\nvar valueOrDefault$7 = helpers$1.valueOrDefault;\r\n\r\ncore_defaults._set('radar', {\r\n\tspanGaps: false,\r\n\tscale: {\r\n\t\ttype: 'radialLinear'\r\n\t},\r\n\telements: {\r\n\t\tline: {\r\n\t\t\tfill: 'start',\r\n\t\t\ttension: 0 // no bezier in radar\r\n\t\t}\r\n\t}\r\n});\r\n\r\nvar controller_radar = core_datasetController.extend({\r\n\tdatasetElementType: elements.Line,\r\n\r\n\tdataElementType: elements.Point,\r\n\r\n\tlinkScales: helpers$1.noop,\r\n\r\n\t/**\r\n\t * @private\r\n\t */\r\n\t_datasetElementOptions: [\r\n\t\t'backgroundColor',\r\n\t\t'borderWidth',\r\n\t\t'borderColor',\r\n\t\t'borderCapStyle',\r\n\t\t'borderDash',\r\n\t\t'borderDashOffset',\r\n\t\t'borderJoinStyle',\r\n\t\t'fill'\r\n\t],\r\n\r\n\t/**\r\n\t * @private\r\n\t */\r\n\t_dataElementOptions: {\r\n\t\tbackgroundColor: 'pointBackgroundColor',\r\n\t\tborderColor: 'pointBorderColor',\r\n\t\tborderWidth: 'pointBorderWidth',\r\n\t\thitRadius: 'pointHitRadius',\r\n\t\thoverBackgroundColor: 'pointHoverBackgroundColor',\r\n\t\thoverBorderColor: 'pointHoverBorderColor',\r\n\t\thoverBorderWidth: 'pointHoverBorderWidth',\r\n\t\thoverRadius: 'pointHoverRadius',\r\n\t\tpointStyle: 'pointStyle',\r\n\t\tradius: 'pointRadius',\r\n\t\trotation: 'pointRotation'\r\n\t},\r\n\r\n\t/**\r\n\t * @private\r\n\t */\r\n\t_getIndexScaleId: function() {\r\n\t\treturn this.chart.scale.id;\r\n\t},\r\n\r\n\t/**\r\n\t * @private\r\n\t */\r\n\t_getValueScaleId: function() {\r\n\t\treturn this.chart.scale.id;\r\n\t},\r\n\r\n\tupdate: function(reset) {\r\n\t\tvar me = this;\r\n\t\tvar meta = me.getMeta();\r\n\t\tvar line = meta.dataset;\r\n\t\tvar points = meta.data || [];\r\n\t\tvar scale = me.chart.scale;\r\n\t\tvar config = me._config;\r\n\t\tvar i, ilen;\r\n\r\n\t\t// Compatibility: If the properties are defined with only the old name, use those values\r\n\t\tif (config.tension !== undefined && config.lineTension === undefined) {\r\n\t\t\tconfig.lineTension = config.tension;\r\n\t\t}\r\n\r\n\t\t// Utility\r\n\t\tline._scale = scale;\r\n\t\tline._datasetIndex = me.index;\r\n\t\t// Data\r\n\t\tline._children = points;\r\n\t\tline._loop = true;\r\n\t\t// Model\r\n\t\tline._model = me._resolveDatasetElementOptions(line);\r\n\r\n\t\tline.pivot();\r\n\r\n\t\t// Update Points\r\n\t\tfor (i = 0, ilen = points.length; i < ilen; ++i) {\r\n\t\t\tme.updateElement(points[i], i, reset);\r\n\t\t}\r\n\r\n\t\t// Update bezier control points\r\n\t\tme.updateBezierControlPoints();\r\n\r\n\t\t// Now pivot the point for animation\r\n\t\tfor (i = 0, ilen = points.length; i < ilen; ++i) {\r\n\t\t\tpoints[i].pivot();\r\n\t\t}\r\n\t},\r\n\r\n\tupdateElement: function(point, index, reset) {\r\n\t\tvar me = this;\r\n\t\tvar custom = point.custom || {};\r\n\t\tvar dataset = me.getDataset();\r\n\t\tvar scale = me.chart.scale;\r\n\t\tvar pointPosition = scale.getPointPositionForValue(index, dataset.data[index]);\r\n\t\tvar options = me._resolveDataElementOptions(point, index);\r\n\t\tvar lineModel = me.getMeta().dataset._model;\r\n\t\tvar x = reset ? scale.xCenter : pointPosition.x;\r\n\t\tvar y = reset ? scale.yCenter : pointPosition.y;\r\n\r\n\t\t// Utility\r\n\t\tpoint._scale = scale;\r\n\t\tpoint._options = options;\r\n\t\tpoint._datasetIndex = me.index;\r\n\t\tpoint._index = index;\r\n\r\n\t\t// Desired view properties\r\n\t\tpoint._model = {\r\n\t\t\tx: x, // value not used in dataset scale, but we want a consistent API between scales\r\n\t\t\ty: y,\r\n\t\t\tskip: custom.skip || isNaN(x) || isNaN(y),\r\n\t\t\t// Appearance\r\n\t\t\tradius: options.radius,\r\n\t\t\tpointStyle: options.pointStyle,\r\n\t\t\trotation: options.rotation,\r\n\t\t\tbackgroundColor: options.backgroundColor,\r\n\t\t\tborderColor: options.borderColor,\r\n\t\t\tborderWidth: options.borderWidth,\r\n\t\t\ttension: valueOrDefault$7(custom.tension, lineModel ? lineModel.tension : 0),\r\n\r\n\t\t\t// Tooltip\r\n\t\t\thitRadius: options.hitRadius\r\n\t\t};\r\n\t},\r\n\r\n\t/**\r\n\t * @private\r\n\t */\r\n\t_resolveDatasetElementOptions: function() {\r\n\t\tvar me = this;\r\n\t\tvar config = me._config;\r\n\t\tvar options = me.chart.options;\r\n\t\tvar values = core_datasetController.prototype._resolveDatasetElementOptions.apply(me, arguments);\r\n\r\n\t\tvalues.spanGaps = valueOrDefault$7(config.spanGaps, options.spanGaps);\r\n\t\tvalues.tension = valueOrDefault$7(config.lineTension, options.elements.line.tension);\r\n\r\n\t\treturn values;\r\n\t},\r\n\r\n\tupdateBezierControlPoints: function() {\r\n\t\tvar me = this;\r\n\t\tvar meta = me.getMeta();\r\n\t\tvar area = me.chart.chartArea;\r\n\t\tvar points = meta.data || [];\r\n\t\tvar i, ilen, model, controlPoints;\r\n\r\n\t\t// Only consider points that are drawn in case the spanGaps option is used\r\n\t\tif (meta.dataset._model.spanGaps) {\r\n\t\t\tpoints = points.filter(function(pt) {\r\n\t\t\t\treturn !pt._model.skip;\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tfunction capControlPoint(pt, min, max) {\r\n\t\t\treturn Math.max(Math.min(pt, max), min);\r\n\t\t}\r\n\r\n\t\tfor (i = 0, ilen = points.length; i < ilen; ++i) {\r\n\t\t\tmodel = points[i]._model;\r\n\t\t\tcontrolPoints = helpers$1.splineCurve(\r\n\t\t\t\thelpers$1.previousItem(points, i, true)._model,\r\n\t\t\t\tmodel,\r\n\t\t\t\thelpers$1.nextItem(points, i, true)._model,\r\n\t\t\t\tmodel.tension\r\n\t\t\t);\r\n\r\n\t\t\t// Prevent the bezier going outside of the bounds of the graph\r\n\t\t\tmodel.controlPointPreviousX = capControlPoint(controlPoints.previous.x, area.left, area.right);\r\n\t\t\tmodel.controlPointPreviousY = capControlPoint(controlPoints.previous.y, area.top, area.bottom);\r\n\t\t\tmodel.controlPointNextX = capControlPoint(controlPoints.next.x, area.left, area.right);\r\n\t\t\tmodel.controlPointNextY = capControlPoint(controlPoints.next.y, area.top, area.bottom);\r\n\t\t}\r\n\t},\r\n\r\n\tsetHoverStyle: function(point) {\r\n\t\tvar model = point._model;\r\n\t\tvar options = point._options;\r\n\t\tvar getHoverColor = helpers$1.getHoverColor;\r\n\r\n\t\tpoint.$previousStyle = {\r\n\t\t\tbackgroundColor: model.backgroundColor,\r\n\t\t\tborderColor: model.borderColor,\r\n\t\t\tborderWidth: model.borderWidth,\r\n\t\t\tradius: model.radius\r\n\t\t};\r\n\r\n\t\tmodel.backgroundColor = valueOrDefault$7(options.hoverBackgroundColor, getHoverColor(options.backgroundColor));\r\n\t\tmodel.borderColor = valueOrDefault$7(options.hoverBorderColor, getHoverColor(options.borderColor));\r\n\t\tmodel.borderWidth = valueOrDefault$7(options.hoverBorderWidth, options.borderWidth);\r\n\t\tmodel.radius = valueOrDefault$7(options.hoverRadius, options.radius);\r\n\t}\r\n});\n\ncore_defaults._set('scatter', {\r\n\thover: {\r\n\t\tmode: 'single'\r\n\t},\r\n\r\n\tscales: {\r\n\t\txAxes: [{\r\n\t\t\tid: 'x-axis-1',    // need an ID so datasets can reference the scale\r\n\t\t\ttype: 'linear',    // scatter should not use a category axis\r\n\t\t\tposition: 'bottom'\r\n\t\t}],\r\n\t\tyAxes: [{\r\n\t\t\tid: 'y-axis-1',\r\n\t\t\ttype: 'linear',\r\n\t\t\tposition: 'left'\r\n\t\t}]\r\n\t},\r\n\r\n\ttooltips: {\r\n\t\tcallbacks: {\r\n\t\t\ttitle: function() {\r\n\t\t\t\treturn '';     // doesn't make sense for scatter since data are formatted as a point\r\n\t\t\t},\r\n\t\t\tlabel: function(item) {\r\n\t\t\t\treturn '(' + item.xLabel + ', ' + item.yLabel + ')';\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n});\r\n\r\ncore_defaults._set('global', {\r\n\tdatasets: {\r\n\t\tscatter: {\r\n\t\t\tshowLine: false\r\n\t\t}\r\n\t}\r\n});\r\n\r\n// Scatter charts use line controllers\r\nvar controller_scatter = controller_line;\n\n// NOTE export a map in which the key represents the controller type, not\r\n// the class, and so must be CamelCase in order to be correctly retrieved\r\n// by the controller in core.controller.js (`controllers[meta.type]`).\r\n\r\nvar controllers = {\r\n\tbar: controller_bar,\r\n\tbubble: controller_bubble,\r\n\tdoughnut: controller_doughnut,\r\n\thorizontalBar: controller_horizontalBar,\r\n\tline: controller_line,\r\n\tpolarArea: controller_polarArea,\r\n\tpie: controller_pie,\r\n\tradar: controller_radar,\r\n\tscatter: controller_scatter\r\n};\n\n/**\r\n * Helper function to get relative position for an event\r\n * @param {Event|IEvent} event - The event to get the position for\r\n * @param {Chart} chart - The chart\r\n * @returns {object} the event position\r\n */\r\nfunction getRelativePosition(e, chart) {\r\n\tif (e.native) {\r\n\t\treturn {\r\n\t\t\tx: e.x,\r\n\t\t\ty: e.y\r\n\t\t};\r\n\t}\r\n\r\n\treturn helpers$1.getRelativePosition(e, chart);\r\n}\r\n\r\n/**\r\n * Helper function to traverse all of the visible elements in the chart\r\n * @param {Chart} chart - the chart\r\n * @param {function} handler - the callback to execute for each visible item\r\n */\r\nfunction parseVisibleItems(chart, handler) {\r\n\tvar metasets = chart._getSortedVisibleDatasetMetas();\r\n\tvar metadata, i, j, ilen, jlen, element;\r\n\r\n\tfor (i = 0, ilen = metasets.length; i < ilen; ++i) {\r\n\t\tmetadata = metasets[i].data;\r\n\t\tfor (j = 0, jlen = metadata.length; j < jlen; ++j) {\r\n\t\t\telement = metadata[j];\r\n\t\t\tif (!element._view.skip) {\r\n\t\t\t\thandler(element);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n\r\n/**\r\n * Helper function to get the items that intersect the event position\r\n * @param {ChartElement[]} items - elements to filter\r\n * @param {object} position - the point to be nearest to\r\n * @return {ChartElement[]} the nearest items\r\n */\r\nfunction getIntersectItems(chart, position) {\r\n\tvar elements = [];\r\n\r\n\tparseVisibleItems(chart, function(element) {\r\n\t\tif (element.inRange(position.x, position.y)) {\r\n\t\t\telements.push(element);\r\n\t\t}\r\n\t});\r\n\r\n\treturn elements;\r\n}\r\n\r\n/**\r\n * Helper function to get the items nearest to the event position considering all visible items in teh chart\r\n * @param {Chart} chart - the chart to look at elements from\r\n * @param {object} position - the point to be nearest to\r\n * @param {boolean} intersect - if true, only consider items that intersect the position\r\n * @param {function} distanceMetric - function to provide the distance between points\r\n * @return {ChartElement[]} the nearest items\r\n */\r\nfunction getNearestItems(chart, position, intersect, distanceMetric) {\r\n\tvar minDistance = Number.POSITIVE_INFINITY;\r\n\tvar nearestItems = [];\r\n\r\n\tparseVisibleItems(chart, function(element) {\r\n\t\tif (intersect && !element.inRange(position.x, position.y)) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tvar center = element.getCenterPoint();\r\n\t\tvar distance = distanceMetric(position, center);\r\n\t\tif (distance < minDistance) {\r\n\t\t\tnearestItems = [element];\r\n\t\t\tminDistance = distance;\r\n\t\t} else if (distance === minDistance) {\r\n\t\t\t// Can have multiple items at the same distance in which case we sort by size\r\n\t\t\tnearestItems.push(element);\r\n\t\t}\r\n\t});\r\n\r\n\treturn nearestItems;\r\n}\r\n\r\n/**\r\n * Get a distance metric function for two points based on the\r\n * axis mode setting\r\n * @param {string} axis - the axis mode. x|y|xy\r\n */\r\nfunction getDistanceMetricForAxis(axis) {\r\n\tvar useX = axis.indexOf('x') !== -1;\r\n\tvar useY = axis.indexOf('y') !== -1;\r\n\r\n\treturn function(pt1, pt2) {\r\n\t\tvar deltaX = useX ? Math.abs(pt1.x - pt2.x) : 0;\r\n\t\tvar deltaY = useY ? Math.abs(pt1.y - pt2.y) : 0;\r\n\t\treturn Math.sqrt(Math.pow(deltaX, 2) + Math.pow(deltaY, 2));\r\n\t};\r\n}\r\n\r\nfunction indexMode(chart, e, options) {\r\n\tvar position = getRelativePosition(e, chart);\r\n\t// Default axis for index mode is 'x' to match old behaviour\r\n\toptions.axis = options.axis || 'x';\r\n\tvar distanceMetric = getDistanceMetricForAxis(options.axis);\r\n\tvar items = options.intersect ? getIntersectItems(chart, position) : getNearestItems(chart, position, false, distanceMetric);\r\n\tvar elements = [];\r\n\r\n\tif (!items.length) {\r\n\t\treturn [];\r\n\t}\r\n\r\n\tchart._getSortedVisibleDatasetMetas().forEach(function(meta) {\r\n\t\tvar element = meta.data[items[0]._index];\r\n\r\n\t\t// don't count items that are skipped (null data)\r\n\t\tif (element && !element._view.skip) {\r\n\t\t\telements.push(element);\r\n\t\t}\r\n\t});\r\n\r\n\treturn elements;\r\n}\r\n\r\n/**\r\n * @interface IInteractionOptions\r\n */\r\n/**\r\n * If true, only consider items that intersect the point\r\n * @name IInterfaceOptions#boolean\r\n * @type Boolean\r\n */\r\n\r\n/**\r\n * Contains interaction related functions\r\n * @namespace Chart.Interaction\r\n */\r\nvar core_interaction = {\r\n\t// Helper function for different modes\r\n\tmodes: {\r\n\t\tsingle: function(chart, e) {\r\n\t\t\tvar position = getRelativePosition(e, chart);\r\n\t\t\tvar elements = [];\r\n\r\n\t\t\tparseVisibleItems(chart, function(element) {\r\n\t\t\t\tif (element.inRange(position.x, position.y)) {\r\n\t\t\t\t\telements.push(element);\r\n\t\t\t\t\treturn elements;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\treturn elements.slice(0, 1);\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * @function Chart.Interaction.modes.label\r\n\t\t * @deprecated since version 2.4.0\r\n\t\t * @todo remove at version 3\r\n\t\t * @private\r\n\t\t */\r\n\t\tlabel: indexMode,\r\n\r\n\t\t/**\r\n\t\t * Returns items at the same index. If the options.intersect parameter is true, we only return items if we intersect something\r\n\t\t * If the options.intersect mode is false, we find the nearest item and return the items at the same index as that item\r\n\t\t * @function Chart.Interaction.modes.index\r\n\t\t * @since v2.4.0\r\n\t\t * @param {Chart} chart - the chart we are returning items from\r\n\t\t * @param {Event} e - the event we are find things at\r\n\t\t * @param {IInteractionOptions} options - options to use during interaction\r\n\t\t * @return {Chart.Element[]} Array of elements that are under the point. If none are found, an empty array is returned\r\n\t\t */\r\n\t\tindex: indexMode,\r\n\r\n\t\t/**\r\n\t\t * Returns items in the same dataset. If the options.intersect parameter is true, we only return items if we intersect something\r\n\t\t * If the options.intersect is false, we find the nearest item and return the items in that dataset\r\n\t\t * @function Chart.Interaction.modes.dataset\r\n\t\t * @param {Chart} chart - the chart we are returning items from\r\n\t\t * @param {Event} e - the event we are find things at\r\n\t\t * @param {IInteractionOptions} options - options to use during interaction\r\n\t\t * @return {Chart.Element[]} Array of elements that are under the point. If none are found, an empty array is returned\r\n\t\t */\r\n\t\tdataset: function(chart, e, options) {\r\n\t\t\tvar position = getRelativePosition(e, chart);\r\n\t\t\toptions.axis = options.axis || 'xy';\r\n\t\t\tvar distanceMetric = getDistanceMetricForAxis(options.axis);\r\n\t\t\tvar items = options.intersect ? getIntersectItems(chart, position) : getNearestItems(chart, position, false, distanceMetric);\r\n\r\n\t\t\tif (items.length > 0) {\r\n\t\t\t\titems = chart.getDatasetMeta(items[0]._datasetIndex).data;\r\n\t\t\t}\r\n\r\n\t\t\treturn items;\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * @function Chart.Interaction.modes.x-axis\r\n\t\t * @deprecated since version 2.4.0. Use index mode and intersect == true\r\n\t\t * @todo remove at version 3\r\n\t\t * @private\r\n\t\t */\r\n\t\t'x-axis': function(chart, e) {\r\n\t\t\treturn indexMode(chart, e, {intersect: false});\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Point mode returns all elements that hit test based on the event position\r\n\t\t * of the event\r\n\t\t * @function Chart.Interaction.modes.intersect\r\n\t\t * @param {Chart} chart - the chart we are returning items from\r\n\t\t * @param {Event} e - the event we are find things at\r\n\t\t * @return {Chart.Element[]} Array of elements that are under the point. If none are found, an empty array is returned\r\n\t\t */\r\n\t\tpoint: function(chart, e) {\r\n\t\t\tvar position = getRelativePosition(e, chart);\r\n\t\t\treturn getIntersectItems(chart, position);\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * nearest mode returns the element closest to the point\r\n\t\t * @function Chart.Interaction.modes.intersect\r\n\t\t * @param {Chart} chart - the chart we are returning items from\r\n\t\t * @param {Event} e - the event we are find things at\r\n\t\t * @param {IInteractionOptions} options - options to use\r\n\t\t * @return {Chart.Element[]} Array of elements that are under the point. If none are found, an empty array is returned\r\n\t\t */\r\n\t\tnearest: function(chart, e, options) {\r\n\t\t\tvar position = getRelativePosition(e, chart);\r\n\t\t\toptions.axis = options.axis || 'xy';\r\n\t\t\tvar distanceMetric = getDistanceMetricForAxis(options.axis);\r\n\t\t\treturn getNearestItems(chart, position, options.intersect, distanceMetric);\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * x mode returns the elements that hit-test at the current x coordinate\r\n\t\t * @function Chart.Interaction.modes.x\r\n\t\t * @param {Chart} chart - the chart we are returning items from\r\n\t\t * @param {Event} e - the event we are find things at\r\n\t\t * @param {IInteractionOptions} options - options to use\r\n\t\t * @return {Chart.Element[]} Array of elements that are under the point. If none are found, an empty array is returned\r\n\t\t */\r\n\t\tx: function(chart, e, options) {\r\n\t\t\tvar position = getRelativePosition(e, chart);\r\n\t\t\tvar items = [];\r\n\t\t\tvar intersectsItem = false;\r\n\r\n\t\t\tparseVisibleItems(chart, function(element) {\r\n\t\t\t\tif (element.inXRange(position.x)) {\r\n\t\t\t\t\titems.push(element);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (element.inRange(position.x, position.y)) {\r\n\t\t\t\t\tintersectsItem = true;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\t// If we want to trigger on an intersect and we don't have any items\r\n\t\t\t// that intersect the position, return nothing\r\n\t\t\tif (options.intersect && !intersectsItem) {\r\n\t\t\t\titems = [];\r\n\t\t\t}\r\n\t\t\treturn items;\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * y mode returns the elements that hit-test at the current y coordinate\r\n\t\t * @function Chart.Interaction.modes.y\r\n\t\t * @param {Chart} chart - the chart we are returning items from\r\n\t\t * @param {Event} e - the event we are find things at\r\n\t\t * @param {IInteractionOptions} options - options to use\r\n\t\t * @return {Chart.Element[]} Array of elements that are under the point. If none are found, an empty array is returned\r\n\t\t */\r\n\t\ty: function(chart, e, options) {\r\n\t\t\tvar position = getRelativePosition(e, chart);\r\n\t\t\tvar items = [];\r\n\t\t\tvar intersectsItem = false;\r\n\r\n\t\t\tparseVisibleItems(chart, function(element) {\r\n\t\t\t\tif (element.inYRange(position.y)) {\r\n\t\t\t\t\titems.push(element);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (element.inRange(position.x, position.y)) {\r\n\t\t\t\t\tintersectsItem = true;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\t// If we want to trigger on an intersect and we don't have any items\r\n\t\t\t// that intersect the position, return nothing\r\n\t\t\tif (options.intersect && !intersectsItem) {\r\n\t\t\t\titems = [];\r\n\t\t\t}\r\n\t\t\treturn items;\r\n\t\t}\r\n\t}\r\n};\n\nvar extend = helpers$1.extend;\r\n\r\nfunction filterByPosition(array, position) {\r\n\treturn helpers$1.where(array, function(v) {\r\n\t\treturn v.pos === position;\r\n\t});\r\n}\r\n\r\nfunction sortByWeight(array, reverse) {\r\n\treturn array.sort(function(a, b) {\r\n\t\tvar v0 = reverse ? b : a;\r\n\t\tvar v1 = reverse ? a : b;\r\n\t\treturn v0.weight === v1.weight ?\r\n\t\t\tv0.index - v1.index :\r\n\t\t\tv0.weight - v1.weight;\r\n\t});\r\n}\r\n\r\nfunction wrapBoxes(boxes) {\r\n\tvar layoutBoxes = [];\r\n\tvar i, ilen, box;\r\n\r\n\tfor (i = 0, ilen = (boxes || []).length; i < ilen; ++i) {\r\n\t\tbox = boxes[i];\r\n\t\tlayoutBoxes.push({\r\n\t\t\tindex: i,\r\n\t\t\tbox: box,\r\n\t\t\tpos: box.position,\r\n\t\t\thorizontal: box.isHorizontal(),\r\n\t\t\tweight: box.weight\r\n\t\t});\r\n\t}\r\n\treturn layoutBoxes;\r\n}\r\n\r\nfunction setLayoutDims(layouts, params) {\r\n\tvar i, ilen, layout;\r\n\tfor (i = 0, ilen = layouts.length; i < ilen; ++i) {\r\n\t\tlayout = layouts[i];\r\n\t\t// store width used instead of chartArea.w in fitBoxes\r\n\t\tlayout.width = layout.horizontal\r\n\t\t\t? layout.box.fullWidth && params.availableWidth\r\n\t\t\t: params.vBoxMaxWidth;\r\n\t\t// store height used instead of chartArea.h in fitBoxes\r\n\t\tlayout.height = layout.horizontal && params.hBoxMaxHeight;\r\n\t}\r\n}\r\n\r\nfunction buildLayoutBoxes(boxes) {\r\n\tvar layoutBoxes = wrapBoxes(boxes);\r\n\tvar left = sortByWeight(filterByPosition(layoutBoxes, 'left'), true);\r\n\tvar right = sortByWeight(filterByPosition(layoutBoxes, 'right'));\r\n\tvar top = sortByWeight(filterByPosition(layoutBoxes, 'top'), true);\r\n\tvar bottom = sortByWeight(filterByPosition(layoutBoxes, 'bottom'));\r\n\r\n\treturn {\r\n\t\tleftAndTop: left.concat(top),\r\n\t\trightAndBottom: right.concat(bottom),\r\n\t\tchartArea: filterByPosition(layoutBoxes, 'chartArea'),\r\n\t\tvertical: left.concat(right),\r\n\t\thorizontal: top.concat(bottom)\r\n\t};\r\n}\r\n\r\nfunction getCombinedMax(maxPadding, chartArea, a, b) {\r\n\treturn Math.max(maxPadding[a], chartArea[a]) + Math.max(maxPadding[b], chartArea[b]);\r\n}\r\n\r\nfunction updateDims(chartArea, params, layout) {\r\n\tvar box = layout.box;\r\n\tvar maxPadding = chartArea.maxPadding;\r\n\tvar newWidth, newHeight;\r\n\r\n\tif (layout.size) {\r\n\t\t// this layout was already counted for, lets first reduce old size\r\n\t\tchartArea[layout.pos] -= layout.size;\r\n\t}\r\n\tlayout.size = layout.horizontal ? box.height : box.width;\r\n\tchartArea[layout.pos] += layout.size;\r\n\r\n\tif (box.getPadding) {\r\n\t\tvar boxPadding = box.getPadding();\r\n\t\tmaxPadding.top = Math.max(maxPadding.top, boxPadding.top);\r\n\t\tmaxPadding.left = Math.max(maxPadding.left, boxPadding.left);\r\n\t\tmaxPadding.bottom = Math.max(maxPadding.bottom, boxPadding.bottom);\r\n\t\tmaxPadding.right = Math.max(maxPadding.right, boxPadding.right);\r\n\t}\r\n\r\n\tnewWidth = params.outerWidth - getCombinedMax(maxPadding, chartArea, 'left', 'right');\r\n\tnewHeight = params.outerHeight - getCombinedMax(maxPadding, chartArea, 'top', 'bottom');\r\n\r\n\tif (newWidth !== chartArea.w || newHeight !== chartArea.h) {\r\n\t\tchartArea.w = newWidth;\r\n\t\tchartArea.h = newHeight;\r\n\r\n\t\t// return true if chart area changed in layout's direction\r\n\t\tvar sizes = layout.horizontal ? [newWidth, chartArea.w] : [newHeight, chartArea.h];\r\n\t\treturn sizes[0] !== sizes[1] && (!isNaN(sizes[0]) || !isNaN(sizes[1]));\r\n\t}\r\n}\r\n\r\nfunction handleMaxPadding(chartArea) {\r\n\tvar maxPadding = chartArea.maxPadding;\r\n\r\n\tfunction updatePos(pos) {\r\n\t\tvar change = Math.max(maxPadding[pos] - chartArea[pos], 0);\r\n\t\tchartArea[pos] += change;\r\n\t\treturn change;\r\n\t}\r\n\tchartArea.y += updatePos('top');\r\n\tchartArea.x += updatePos('left');\r\n\tupdatePos('right');\r\n\tupdatePos('bottom');\r\n}\r\n\r\nfunction getMargins(horizontal, chartArea) {\r\n\tvar maxPadding = chartArea.maxPadding;\r\n\r\n\tfunction marginForPositions(positions) {\r\n\t\tvar margin = {left: 0, top: 0, right: 0, bottom: 0};\r\n\t\tpositions.forEach(function(pos) {\r\n\t\t\tmargin[pos] = Math.max(chartArea[pos], maxPadding[pos]);\r\n\t\t});\r\n\t\treturn margin;\r\n\t}\r\n\r\n\treturn horizontal\r\n\t\t? marginForPositions(['left', 'right'])\r\n\t\t: marginForPositions(['top', 'bottom']);\r\n}\r\n\r\nfunction fitBoxes(boxes, chartArea, params) {\r\n\tvar refitBoxes = [];\r\n\tvar i, ilen, layout, box, refit, changed;\r\n\r\n\tfor (i = 0, ilen = boxes.length; i < ilen; ++i) {\r\n\t\tlayout = boxes[i];\r\n\t\tbox = layout.box;\r\n\r\n\t\tbox.update(\r\n\t\t\tlayout.width || chartArea.w,\r\n\t\t\tlayout.height || chartArea.h,\r\n\t\t\tgetMargins(layout.horizontal, chartArea)\r\n\t\t);\r\n\t\tif (updateDims(chartArea, params, layout)) {\r\n\t\t\tchanged = true;\r\n\t\t\tif (refitBoxes.length) {\r\n\t\t\t\t// Dimensions changed and there were non full width boxes before this\r\n\t\t\t\t// -> we have to refit those\r\n\t\t\t\trefit = true;\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (!box.fullWidth) { // fullWidth boxes don't need to be re-fitted in any case\r\n\t\t\trefitBoxes.push(layout);\r\n\t\t}\r\n\t}\r\n\r\n\treturn refit ? fitBoxes(refitBoxes, chartArea, params) || changed : changed;\r\n}\r\n\r\nfunction placeBoxes(boxes, chartArea, params) {\r\n\tvar userPadding = params.padding;\r\n\tvar x = chartArea.x;\r\n\tvar y = chartArea.y;\r\n\tvar i, ilen, layout, box;\r\n\r\n\tfor (i = 0, ilen = boxes.length; i < ilen; ++i) {\r\n\t\tlayout = boxes[i];\r\n\t\tbox = layout.box;\r\n\t\tif (layout.horizontal) {\r\n\t\t\tbox.left = box.fullWidth ? userPadding.left : chartArea.left;\r\n\t\t\tbox.right = box.fullWidth ? params.outerWidth - userPadding.right : chartArea.left + chartArea.w;\r\n\t\t\tbox.top = y;\r\n\t\t\tbox.bottom = y + box.height;\r\n\t\t\tbox.width = box.right - box.left;\r\n\t\t\ty = box.bottom;\r\n\t\t} else {\r\n\t\t\tbox.left = x;\r\n\t\t\tbox.right = x + box.width;\r\n\t\t\tbox.top = chartArea.top;\r\n\t\t\tbox.bottom = chartArea.top + chartArea.h;\r\n\t\t\tbox.height = box.bottom - box.top;\r\n\t\t\tx = box.right;\r\n\t\t}\r\n\t}\r\n\r\n\tchartArea.x = x;\r\n\tchartArea.y = y;\r\n}\r\n\r\ncore_defaults._set('global', {\r\n\tlayout: {\r\n\t\tpadding: {\r\n\t\t\ttop: 0,\r\n\t\t\tright: 0,\r\n\t\t\tbottom: 0,\r\n\t\t\tleft: 0\r\n\t\t}\r\n\t}\r\n});\r\n\r\n/**\r\n * @interface ILayoutItem\r\n * @prop {string} position - The position of the item in the chart layout. Possible values are\r\n * 'left', 'top', 'right', 'bottom', and 'chartArea'\r\n * @prop {number} weight - The weight used to sort the item. Higher weights are further away from the chart area\r\n * @prop {boolean} fullWidth - if true, and the item is horizontal, then push vertical boxes down\r\n * @prop {function} isHorizontal - returns true if the layout item is horizontal (ie. top or bottom)\r\n * @prop {function} update - Takes two parameters: width and height. Returns size of item\r\n * @prop {function} getPadding -  Returns an object with padding on the edges\r\n * @prop {number} width - Width of item. Must be valid after update()\r\n * @prop {number} height - Height of item. Must be valid after update()\r\n * @prop {number} left - Left edge of the item. Set by layout system and cannot be used in update\r\n * @prop {number} top - Top edge of the item. Set by layout system and cannot be used in update\r\n * @prop {number} right - Right edge of the item. Set by layout system and cannot be used in update\r\n * @prop {number} bottom - Bottom edge of the item. Set by layout system and cannot be used in update\r\n */\r\n\r\n// The layout service is very self explanatory.  It's responsible for the layout within a chart.\r\n// Scales, Legends and Plugins all rely on the layout service and can easily register to be placed anywhere they need\r\n// It is this service's responsibility of carrying out that layout.\r\nvar core_layouts = {\r\n\tdefaults: {},\r\n\r\n\t/**\r\n\t * Register a box to a chart.\r\n\t * A box is simply a reference to an object that requires layout. eg. Scales, Legend, Title.\r\n\t * @param {Chart} chart - the chart to use\r\n\t * @param {ILayoutItem} item - the item to add to be layed out\r\n\t */\r\n\taddBox: function(chart, item) {\r\n\t\tif (!chart.boxes) {\r\n\t\t\tchart.boxes = [];\r\n\t\t}\r\n\r\n\t\t// initialize item with default values\r\n\t\titem.fullWidth = item.fullWidth || false;\r\n\t\titem.position = item.position || 'top';\r\n\t\titem.weight = item.weight || 0;\r\n\t\titem._layers = item._layers || function() {\r\n\t\t\treturn [{\r\n\t\t\t\tz: 0,\r\n\t\t\t\tdraw: function() {\r\n\t\t\t\t\titem.draw.apply(item, arguments);\r\n\t\t\t\t}\r\n\t\t\t}];\r\n\t\t};\r\n\r\n\t\tchart.boxes.push(item);\r\n\t},\r\n\r\n\t/**\r\n\t * Remove a layoutItem from a chart\r\n\t * @param {Chart} chart - the chart to remove the box from\r\n\t * @param {ILayoutItem} layoutItem - the item to remove from the layout\r\n\t */\r\n\tremoveBox: function(chart, layoutItem) {\r\n\t\tvar index = chart.boxes ? chart.boxes.indexOf(layoutItem) : -1;\r\n\t\tif (index !== -1) {\r\n\t\t\tchart.boxes.splice(index, 1);\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t * Sets (or updates) options on the given `item`.\r\n\t * @param {Chart} chart - the chart in which the item lives (or will be added to)\r\n\t * @param {ILayoutItem} item - the item to configure with the given options\r\n\t * @param {object} options - the new item options.\r\n\t */\r\n\tconfigure: function(chart, item, options) {\r\n\t\tvar props = ['fullWidth', 'position', 'weight'];\r\n\t\tvar ilen = props.length;\r\n\t\tvar i = 0;\r\n\t\tvar prop;\r\n\r\n\t\tfor (; i < ilen; ++i) {\r\n\t\t\tprop = props[i];\r\n\t\t\tif (options.hasOwnProperty(prop)) {\r\n\t\t\t\titem[prop] = options[prop];\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t * Fits boxes of the given chart into the given size by having each box measure itself\r\n\t * then running a fitting algorithm\r\n\t * @param {Chart} chart - the chart\r\n\t * @param {number} width - the width to fit into\r\n\t * @param {number} height - the height to fit into\r\n\t */\r\n\tupdate: function(chart, width, height) {\r\n\t\tif (!chart) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tvar layoutOptions = chart.options.layout || {};\r\n\t\tvar padding = helpers$1.options.toPadding(layoutOptions.padding);\r\n\r\n\t\tvar availableWidth = width - padding.width;\r\n\t\tvar availableHeight = height - padding.height;\r\n\t\tvar boxes = buildLayoutBoxes(chart.boxes);\r\n\t\tvar verticalBoxes = boxes.vertical;\r\n\t\tvar horizontalBoxes = boxes.horizontal;\r\n\r\n\t\t// Essentially we now have any number of boxes on each of the 4 sides.\r\n\t\t// Our canvas looks like the following.\r\n\t\t// The areas L1 and L2 are the left axes. R1 is the right axis, T1 is the top axis and\r\n\t\t// B1 is the bottom axis\r\n\t\t// There are also 4 quadrant-like locations (left to right instead of clockwise) reserved for chart overlays\r\n\t\t// These locations are single-box locations only, when trying to register a chartArea location that is already taken,\r\n\t\t// an error will be thrown.\r\n\t\t//\r\n\t\t// |----------------------------------------------------|\r\n\t\t// |                  T1 (Full Width)                   |\r\n\t\t// |----------------------------------------------------|\r\n\t\t// |    |    |                 T2                  |    |\r\n\t\t// |    |----|-------------------------------------|----|\r\n\t\t// |    |    | C1 |                           | C2 |    |\r\n\t\t// |    |    |----|                           |----|    |\r\n\t\t// |    |    |                                     |    |\r\n\t\t// | L1 | L2 |           ChartArea (C0)            | R1 |\r\n\t\t// |    |    |                                     |    |\r\n\t\t// |    |    |----|                           |----|    |\r\n\t\t// |    |    | C3 |                           | C4 |    |\r\n\t\t// |    |----|-------------------------------------|----|\r\n\t\t// |    |    |                 B1                  |    |\r\n\t\t// |----------------------------------------------------|\r\n\t\t// |                  B2 (Full Width)                   |\r\n\t\t// |----------------------------------------------------|\r\n\t\t//\r\n\r\n\t\tvar params = Object.freeze({\r\n\t\t\touterWidth: width,\r\n\t\t\touterHeight: height,\r\n\t\t\tpadding: padding,\r\n\t\t\tavailableWidth: availableWidth,\r\n\t\t\tvBoxMaxWidth: availableWidth / 2 / verticalBoxes.length,\r\n\t\t\thBoxMaxHeight: availableHeight / 2\r\n\t\t});\r\n\t\tvar chartArea = extend({\r\n\t\t\tmaxPadding: extend({}, padding),\r\n\t\t\tw: availableWidth,\r\n\t\t\th: availableHeight,\r\n\t\t\tx: padding.left,\r\n\t\t\ty: padding.top\r\n\t\t}, padding);\r\n\r\n\t\tsetLayoutDims(verticalBoxes.concat(horizontalBoxes), params);\r\n\r\n\t\t// First fit vertical boxes\r\n\t\tfitBoxes(verticalBoxes, chartArea, params);\r\n\r\n\t\t// Then fit horizontal boxes\r\n\t\tif (fitBoxes(horizontalBoxes, chartArea, params)) {\r\n\t\t\t// if the area changed, re-fit vertical boxes\r\n\t\t\tfitBoxes(verticalBoxes, chartArea, params);\r\n\t\t}\r\n\r\n\t\thandleMaxPadding(chartArea);\r\n\r\n\t\t// Finally place the boxes to correct coordinates\r\n\t\tplaceBoxes(boxes.leftAndTop, chartArea, params);\r\n\r\n\t\t// Move to opposite side of chart\r\n\t\tchartArea.x += chartArea.w;\r\n\t\tchartArea.y += chartArea.h;\r\n\r\n\t\tplaceBoxes(boxes.rightAndBottom, chartArea, params);\r\n\r\n\t\tchart.chartArea = {\r\n\t\t\tleft: chartArea.left,\r\n\t\t\ttop: chartArea.top,\r\n\t\t\tright: chartArea.left + chartArea.w,\r\n\t\t\tbottom: chartArea.top + chartArea.h\r\n\t\t};\r\n\r\n\t\t// Finally update boxes in chartArea (radial scale for example)\r\n\t\thelpers$1.each(boxes.chartArea, function(layout) {\r\n\t\t\tvar box = layout.box;\r\n\t\t\textend(box, chart.chartArea);\r\n\t\t\tbox.update(chartArea.w, chartArea.h);\r\n\t\t});\r\n\t}\r\n};\n\n/**\r\n * Platform fallback implementation (minimal).\r\n * @see https://github.com/chartjs/Chart.js/pull/4591#issuecomment-319575939\r\n */\r\n\r\nvar platform_basic = {\r\n\tacquireContext: function(item) {\r\n\t\tif (item && item.canvas) {\r\n\t\t\t// Support for any object associated to a canvas (including a context2d)\r\n\t\t\titem = item.canvas;\r\n\t\t}\r\n\r\n\t\treturn item && item.getContext('2d') || null;\r\n\t}\r\n};\n\nvar platform_dom = \"/*\\r\\n * DOM element rendering detection\\r\\n * https://davidwalsh.name/detect-node-insertion\\r\\n */\\r\\n@keyframes chartjs-render-animation {\\r\\n\\tfrom { opacity: 0.99; }\\r\\n\\tto { opacity: 1; }\\r\\n}\\r\\n\\r\\n.chartjs-render-monitor {\\r\\n\\tanimation: chartjs-render-animation 0.001s;\\r\\n}\\r\\n\\r\\n/*\\r\\n * DOM element resizing detection\\r\\n * https://github.com/marcj/css-element-queries\\r\\n */\\r\\n.chartjs-size-monitor,\\r\\n.chartjs-size-monitor-expand,\\r\\n.chartjs-size-monitor-shrink {\\r\\n\\tposition: absolute;\\r\\n\\tdirection: ltr;\\r\\n\\tleft: 0;\\r\\n\\ttop: 0;\\r\\n\\tright: 0;\\r\\n\\tbottom: 0;\\r\\n\\toverflow: hidden;\\r\\n\\tpointer-events: none;\\r\\n\\tvisibility: hidden;\\r\\n\\tz-index: -1;\\r\\n}\\r\\n\\r\\n.chartjs-size-monitor-expand > div {\\r\\n\\tposition: absolute;\\r\\n\\twidth: 1000000px;\\r\\n\\theight: 1000000px;\\r\\n\\tleft: 0;\\r\\n\\ttop: 0;\\r\\n}\\r\\n\\r\\n.chartjs-size-monitor-shrink > div {\\r\\n\\tposition: absolute;\\r\\n\\twidth: 200%;\\r\\n\\theight: 200%;\\r\\n\\tleft: 0;\\r\\n\\ttop: 0;\\r\\n}\\r\\n\";\n\nvar platform_dom$1 = /*#__PURE__*/Object.freeze({\n__proto__: null,\n'default': platform_dom\n});\n\nvar stylesheet = getCjsExportFromNamespace(platform_dom$1);\n\nvar EXPANDO_KEY = '$chartjs';\r\nvar CSS_PREFIX = 'chartjs-';\r\nvar CSS_SIZE_MONITOR = CSS_PREFIX + 'size-monitor';\r\nvar CSS_RENDER_MONITOR = CSS_PREFIX + 'render-monitor';\r\nvar CSS_RENDER_ANIMATION = CSS_PREFIX + 'render-animation';\r\nvar ANIMATION_START_EVENTS = ['animationstart', 'webkitAnimationStart'];\r\n\r\n/**\r\n * DOM event types -> Chart.js event types.\r\n * Note: only events with different types are mapped.\r\n * @see https://developer.mozilla.org/en-US/docs/Web/Events\r\n */\r\nvar EVENT_TYPES = {\r\n\ttouchstart: 'mousedown',\r\n\ttouchmove: 'mousemove',\r\n\ttouchend: 'mouseup',\r\n\tpointerenter: 'mouseenter',\r\n\tpointerdown: 'mousedown',\r\n\tpointermove: 'mousemove',\r\n\tpointerup: 'mouseup',\r\n\tpointerleave: 'mouseout',\r\n\tpointerout: 'mouseout'\r\n};\r\n\r\n/**\r\n * The \"used\" size is the final value of a dimension property after all calculations have\r\n * been performed. This method uses the computed style of `element` but returns undefined\r\n * if the computed style is not expressed in pixels. That can happen in some cases where\r\n * `element` has a size relative to its parent and this last one is not yet displayed,\r\n * for example because of `display: none` on a parent node.\r\n * @see https://developer.mozilla.org/en-US/docs/Web/CSS/used_value\r\n * @returns {number} Size in pixels or undefined if unknown.\r\n */\r\nfunction readUsedSize(element, property) {\r\n\tvar value = helpers$1.getStyle(element, property);\r\n\tvar matches = value && value.match(/^(\\d+)(\\.\\d+)?px$/);\r\n\treturn matches ? Number(matches[1]) : undefined;\r\n}\r\n\r\n/**\r\n * Initializes the canvas style and render size without modifying the canvas display size,\r\n * since responsiveness is handled by the controller.resize() method. The config is used\r\n * to determine the aspect ratio to apply in case no explicit height has been specified.\r\n */\r\nfunction initCanvas(canvas, config) {\r\n\tvar style = canvas.style;\r\n\r\n\t// NOTE(SB) canvas.getAttribute('width') !== canvas.width: in the first case it\r\n\t// returns null or '' if no explicit value has been set to the canvas attribute.\r\n\tvar renderHeight = canvas.getAttribute('height');\r\n\tvar renderWidth = canvas.getAttribute('width');\r\n\r\n\t// Chart.js modifies some canvas values that we want to restore on destroy\r\n\tcanvas[EXPANDO_KEY] = {\r\n\t\tinitial: {\r\n\t\t\theight: renderHeight,\r\n\t\t\twidth: renderWidth,\r\n\t\t\tstyle: {\r\n\t\t\t\tdisplay: style.display,\r\n\t\t\t\theight: style.height,\r\n\t\t\t\twidth: style.width\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\t// Force canvas to display as block to avoid extra space caused by inline\r\n\t// elements, which would interfere with the responsive resize process.\r\n\t// https://github.com/chartjs/Chart.js/issues/2538\r\n\tstyle.display = style.display || 'block';\r\n\r\n\tif (renderWidth === null || renderWidth === '') {\r\n\t\tvar displayWidth = readUsedSize(canvas, 'width');\r\n\t\tif (displayWidth !== undefined) {\r\n\t\t\tcanvas.width = displayWidth;\r\n\t\t}\r\n\t}\r\n\r\n\tif (renderHeight === null || renderHeight === '') {\r\n\t\tif (canvas.style.height === '') {\r\n\t\t\t// If no explicit render height and style height, let's apply the aspect ratio,\r\n\t\t\t// which one can be specified by the user but also by charts as default option\r\n\t\t\t// (i.e. options.aspectRatio). If not specified, use canvas aspect ratio of 2.\r\n\t\t\tcanvas.height = canvas.width / (config.options.aspectRatio || 2);\r\n\t\t} else {\r\n\t\t\tvar displayHeight = readUsedSize(canvas, 'height');\r\n\t\t\tif (displayWidth !== undefined) {\r\n\t\t\t\tcanvas.height = displayHeight;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\treturn canvas;\r\n}\r\n\r\n/**\r\n * Detects support for options object argument in addEventListener.\r\n * https://developer.mozilla.org/en-US/docs/Web/API/EventTarget/addEventListener#Safely_detecting_option_support\r\n * @private\r\n */\r\nvar supportsEventListenerOptions = (function() {\r\n\tvar supports = false;\r\n\ttry {\r\n\t\tvar options = Object.defineProperty({}, 'passive', {\r\n\t\t\t// eslint-disable-next-line getter-return\r\n\t\t\tget: function() {\r\n\t\t\t\tsupports = true;\r\n\t\t\t}\r\n\t\t});\r\n\t\twindow.addEventListener('e', null, options);\r\n\t} catch (e) {\r\n\t\t// continue regardless of error\r\n\t}\r\n\treturn supports;\r\n}());\r\n\r\n// Default passive to true as expected by Chrome for 'touchstart' and 'touchend' events.\r\n// https://github.com/chartjs/Chart.js/issues/4287\r\nvar eventListenerOptions = supportsEventListenerOptions ? {passive: true} : false;\r\n\r\nfunction addListener(node, type, listener) {\r\n\tnode.addEventListener(type, listener, eventListenerOptions);\r\n}\r\n\r\nfunction removeListener(node, type, listener) {\r\n\tnode.removeEventListener(type, listener, eventListenerOptions);\r\n}\r\n\r\nfunction createEvent(type, chart, x, y, nativeEvent) {\r\n\treturn {\r\n\t\ttype: type,\r\n\t\tchart: chart,\r\n\t\tnative: nativeEvent || null,\r\n\t\tx: x !== undefined ? x : null,\r\n\t\ty: y !== undefined ? y : null,\r\n\t};\r\n}\r\n\r\nfunction fromNativeEvent(event, chart) {\r\n\tvar type = EVENT_TYPES[event.type] || event.type;\r\n\tvar pos = helpers$1.getRelativePosition(event, chart);\r\n\treturn createEvent(type, chart, pos.x, pos.y, event);\r\n}\r\n\r\nfunction throttled(fn, thisArg) {\r\n\tvar ticking = false;\r\n\tvar args = [];\r\n\r\n\treturn function() {\r\n\t\targs = Array.prototype.slice.call(arguments);\r\n\t\tthisArg = thisArg || this;\r\n\r\n\t\tif (!ticking) {\r\n\t\t\tticking = true;\r\n\t\t\thelpers$1.requestAnimFrame.call(window, function() {\r\n\t\t\t\tticking = false;\r\n\t\t\t\tfn.apply(thisArg, args);\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n}\r\n\r\nfunction createDiv(cls) {\r\n\tvar el = document.createElement('div');\r\n\tel.className = cls || '';\r\n\treturn el;\r\n}\r\n\r\n// Implementation based on https://github.com/marcj/css-element-queries\r\nfunction createResizer(handler) {\r\n\tvar maxSize = 1000000;\r\n\r\n\t// NOTE(SB) Don't use innerHTML because it could be considered unsafe.\r\n\t// https://github.com/chartjs/Chart.js/issues/5902\r\n\tvar resizer = createDiv(CSS_SIZE_MONITOR);\r\n\tvar expand = createDiv(CSS_SIZE_MONITOR + '-expand');\r\n\tvar shrink = createDiv(CSS_SIZE_MONITOR + '-shrink');\r\n\r\n\texpand.appendChild(createDiv());\r\n\tshrink.appendChild(createDiv());\r\n\r\n\tresizer.appendChild(expand);\r\n\tresizer.appendChild(shrink);\r\n\tresizer._reset = function() {\r\n\t\texpand.scrollLeft = maxSize;\r\n\t\texpand.scrollTop = maxSize;\r\n\t\tshrink.scrollLeft = maxSize;\r\n\t\tshrink.scrollTop = maxSize;\r\n\t};\r\n\r\n\tvar onScroll = function() {\r\n\t\tresizer._reset();\r\n\t\thandler();\r\n\t};\r\n\r\n\taddListener(expand, 'scroll', onScroll.bind(expand, 'expand'));\r\n\taddListener(shrink, 'scroll', onScroll.bind(shrink, 'shrink'));\r\n\r\n\treturn resizer;\r\n}\r\n\r\n// https://davidwalsh.name/detect-node-insertion\r\nfunction watchForRender(node, handler) {\r\n\tvar expando = node[EXPANDO_KEY] || (node[EXPANDO_KEY] = {});\r\n\tvar proxy = expando.renderProxy = function(e) {\r\n\t\tif (e.animationName === CSS_RENDER_ANIMATION) {\r\n\t\t\thandler();\r\n\t\t}\r\n\t};\r\n\r\n\thelpers$1.each(ANIMATION_START_EVENTS, function(type) {\r\n\t\taddListener(node, type, proxy);\r\n\t});\r\n\r\n\t// #4737: Chrome might skip the CSS animation when the CSS_RENDER_MONITOR class\r\n\t// is removed then added back immediately (same animation frame?). Accessing the\r\n\t// `offsetParent` property will force a reflow and re-evaluate the CSS animation.\r\n\t// https://gist.github.com/paulirish/5d52fb081b3570c81e3a#box-metrics\r\n\t// https://github.com/chartjs/Chart.js/issues/4737\r\n\texpando.reflow = !!node.offsetParent;\r\n\r\n\tnode.classList.add(CSS_RENDER_MONITOR);\r\n}\r\n\r\nfunction unwatchForRender(node) {\r\n\tvar expando = node[EXPANDO_KEY] || {};\r\n\tvar proxy = expando.renderProxy;\r\n\r\n\tif (proxy) {\r\n\t\thelpers$1.each(ANIMATION_START_EVENTS, function(type) {\r\n\t\t\tremoveListener(node, type, proxy);\r\n\t\t});\r\n\r\n\t\tdelete expando.renderProxy;\r\n\t}\r\n\r\n\tnode.classList.remove(CSS_RENDER_MONITOR);\r\n}\r\n\r\nfunction addResizeListener(node, listener, chart) {\r\n\tvar expando = node[EXPANDO_KEY] || (node[EXPANDO_KEY] = {});\r\n\r\n\t// Let's keep track of this added resizer and thus avoid DOM query when removing it.\r\n\tvar resizer = expando.resizer = createResizer(throttled(function() {\r\n\t\tif (expando.resizer) {\r\n\t\t\tvar container = chart.options.maintainAspectRatio && node.parentNode;\r\n\t\t\tvar w = container ? container.clientWidth : 0;\r\n\t\t\tlistener(createEvent('resize', chart));\r\n\t\t\tif (container && container.clientWidth < w && chart.canvas) {\r\n\t\t\t\t// If the container size shrank during chart resize, let's assume\r\n\t\t\t\t// scrollbar appeared. So we resize again with the scrollbar visible -\r\n\t\t\t\t// effectively making chart smaller and the scrollbar hidden again.\r\n\t\t\t\t// Because we are inside `throttled`, and currently `ticking`, scroll\r\n\t\t\t\t// events are ignored during this whole 2 resize process.\r\n\t\t\t\t// If we assumed wrong and something else happened, we are resizing\r\n\t\t\t\t// twice in a frame (potential performance issue)\r\n\t\t\t\tlistener(createEvent('resize', chart));\r\n\t\t\t}\r\n\t\t}\r\n\t}));\r\n\r\n\t// The resizer needs to be attached to the node parent, so we first need to be\r\n\t// sure that `node` is attached to the DOM before injecting the resizer element.\r\n\twatchForRender(node, function() {\r\n\t\tif (expando.resizer) {\r\n\t\t\tvar container = node.parentNode;\r\n\t\t\tif (container && container !== resizer.parentNode) {\r\n\t\t\t\tcontainer.insertBefore(resizer, container.firstChild);\r\n\t\t\t}\r\n\r\n\t\t\t// The container size might have changed, let's reset the resizer state.\r\n\t\t\tresizer._reset();\r\n\t\t}\r\n\t});\r\n}\r\n\r\nfunction removeResizeListener(node) {\r\n\tvar expando = node[EXPANDO_KEY] || {};\r\n\tvar resizer = expando.resizer;\r\n\r\n\tdelete expando.resizer;\r\n\tunwatchForRender(node);\r\n\r\n\tif (resizer && resizer.parentNode) {\r\n\t\tresizer.parentNode.removeChild(resizer);\r\n\t}\r\n}\r\n\r\n/**\r\n * Injects CSS styles inline if the styles are not already present.\r\n * @param {HTMLDocument|ShadowRoot} rootNode - the node to contain the <style>.\r\n * @param {string} css - the CSS to be injected.\r\n */\r\nfunction injectCSS(rootNode, css) {\r\n\t// https://stackoverflow.com/q/3922139\r\n\tvar expando = rootNode[EXPANDO_KEY] || (rootNode[EXPANDO_KEY] = {});\r\n\tif (!expando.containsStyles) {\r\n\t\texpando.containsStyles = true;\r\n\t\tcss = '/* Chart.js */\\n' + css;\r\n\t\tvar style = document.createElement('style');\r\n\t\tstyle.setAttribute('type', 'text/css');\r\n\t\tstyle.appendChild(document.createTextNode(css));\r\n\t\trootNode.appendChild(style);\r\n\t}\r\n}\r\n\r\nvar platform_dom$2 = {\r\n\t/**\r\n\t * When `true`, prevents the automatic injection of the stylesheet required to\r\n\t * correctly detect when the chart is added to the DOM and then resized. This\r\n\t * switch has been added to allow external stylesheet (`dist/Chart(.min)?.js`)\r\n\t * to be manually imported to make this library compatible with any CSP.\r\n\t * See https://github.com/chartjs/Chart.js/issues/5208\r\n\t */\r\n\tdisableCSSInjection: false,\r\n\r\n\t/**\r\n\t * This property holds whether this platform is enabled for the current environment.\r\n\t * Currently used by platform.js to select the proper implementation.\r\n\t * @private\r\n\t */\r\n\t_enabled: typeof window !== 'undefined' && typeof document !== 'undefined',\r\n\r\n\t/**\r\n\t * Initializes resources that depend on platform options.\r\n\t * @param {HTMLCanvasElement} canvas - The Canvas element.\r\n\t * @private\r\n\t */\r\n\t_ensureLoaded: function(canvas) {\r\n\t\tif (!this.disableCSSInjection) {\r\n\t\t\t// If the canvas is in a shadow DOM, then the styles must also be inserted\r\n\t\t\t// into the same shadow DOM.\r\n\t\t\t// https://github.com/chartjs/Chart.js/issues/5763\r\n\t\t\tvar root = canvas.getRootNode ? canvas.getRootNode() : document;\r\n\t\t\tvar targetNode = root.host ? root : document.head;\r\n\t\t\tinjectCSS(targetNode, stylesheet);\r\n\t\t}\r\n\t},\r\n\r\n\tacquireContext: function(item, config) {\r\n\t\tif (typeof item === 'string') {\r\n\t\t\titem = document.getElementById(item);\r\n\t\t} else if (item.length) {\r\n\t\t\t// Support for array based queries (such as jQuery)\r\n\t\t\titem = item[0];\r\n\t\t}\r\n\r\n\t\tif (item && item.canvas) {\r\n\t\t\t// Support for any object associated to a canvas (including a context2d)\r\n\t\t\titem = item.canvas;\r\n\t\t}\r\n\r\n\t\t// To prevent canvas fingerprinting, some add-ons undefine the getContext\r\n\t\t// method, for example: https://github.com/kkapsner/CanvasBlocker\r\n\t\t// https://github.com/chartjs/Chart.js/issues/2807\r\n\t\tvar context = item && item.getContext && item.getContext('2d');\r\n\r\n\t\t// `instanceof HTMLCanvasElement/CanvasRenderingContext2D` fails when the item is\r\n\t\t// inside an iframe or when running in a protected environment. We could guess the\r\n\t\t// types from their toString() value but let's keep things flexible and assume it's\r\n\t\t// a sufficient condition if the item has a context2D which has item as `canvas`.\r\n\t\t// https://github.com/chartjs/Chart.js/issues/3887\r\n\t\t// https://github.com/chartjs/Chart.js/issues/4102\r\n\t\t// https://github.com/chartjs/Chart.js/issues/4152\r\n\t\tif (context && context.canvas === item) {\r\n\t\t\t// Load platform resources on first chart creation, to make it possible to\r\n\t\t\t// import the library before setting platform options.\r\n\t\t\tthis._ensureLoaded(item);\r\n\t\t\tinitCanvas(item, config);\r\n\t\t\treturn context;\r\n\t\t}\r\n\r\n\t\treturn null;\r\n\t},\r\n\r\n\treleaseContext: function(context) {\r\n\t\tvar canvas = context.canvas;\r\n\t\tif (!canvas[EXPANDO_KEY]) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tvar initial = canvas[EXPANDO_KEY].initial;\r\n\t\t['height', 'width'].forEach(function(prop) {\r\n\t\t\tvar value = initial[prop];\r\n\t\t\tif (helpers$1.isNullOrUndef(value)) {\r\n\t\t\t\tcanvas.removeAttribute(prop);\r\n\t\t\t} else {\r\n\t\t\t\tcanvas.setAttribute(prop, value);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\thelpers$1.each(initial.style || {}, function(value, key) {\r\n\t\t\tcanvas.style[key] = value;\r\n\t\t});\r\n\r\n\t\t// The canvas render size might have been changed (and thus the state stack discarded),\r\n\t\t// we can't use save() and restore() to restore the initial state. So make sure that at\r\n\t\t// least the canvas context is reset to the default state by setting the canvas width.\r\n\t\t// https://www.w3.org/TR/2011/WD-html5-20110525/the-canvas-element.html\r\n\t\t// eslint-disable-next-line no-self-assign\r\n\t\tcanvas.width = canvas.width;\r\n\r\n\t\tdelete canvas[EXPANDO_KEY];\r\n\t},\r\n\r\n\taddEventListener: function(chart, type, listener) {\r\n\t\tvar canvas = chart.canvas;\r\n\t\tif (type === 'resize') {\r\n\t\t\t// Note: the resize event is not supported on all browsers.\r\n\t\t\taddResizeListener(canvas, listener, chart);\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tvar expando = listener[EXPANDO_KEY] || (listener[EXPANDO_KEY] = {});\r\n\t\tvar proxies = expando.proxies || (expando.proxies = {});\r\n\t\tvar proxy = proxies[chart.id + '_' + type] = function(event) {\r\n\t\t\tlistener(fromNativeEvent(event, chart));\r\n\t\t};\r\n\r\n\t\taddListener(canvas, type, proxy);\r\n\t},\r\n\r\n\tremoveEventListener: function(chart, type, listener) {\r\n\t\tvar canvas = chart.canvas;\r\n\t\tif (type === 'resize') {\r\n\t\t\t// Note: the resize event is not supported on all browsers.\r\n\t\t\tremoveResizeListener(canvas);\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tvar expando = listener[EXPANDO_KEY] || {};\r\n\t\tvar proxies = expando.proxies || {};\r\n\t\tvar proxy = proxies[chart.id + '_' + type];\r\n\t\tif (!proxy) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tremoveListener(canvas, type, proxy);\r\n\t}\r\n};\r\n\r\n// DEPRECATIONS\r\n\r\n/**\r\n * Provided for backward compatibility, use EventTarget.addEventListener instead.\r\n * EventTarget.addEventListener compatibility: Chrome, Opera 7, Safari, FF1.5+, IE9+\r\n * @see https://developer.mozilla.org/en-US/docs/Web/API/EventTarget/addEventListener\r\n * @function Chart.helpers.addEvent\r\n * @deprecated since version 2.7.0\r\n * @todo remove at version 3\r\n * @private\r\n */\r\nhelpers$1.addEvent = addListener;\r\n\r\n/**\r\n * Provided for backward compatibility, use EventTarget.removeEventListener instead.\r\n * EventTarget.removeEventListener compatibility: Chrome, Opera 7, Safari, FF1.5+, IE9+\r\n * @see https://developer.mozilla.org/en-US/docs/Web/API/EventTarget/removeEventListener\r\n * @function Chart.helpers.removeEvent\r\n * @deprecated since version 2.7.0\r\n * @todo remove at version 3\r\n * @private\r\n */\r\nhelpers$1.removeEvent = removeListener;\n\n// @TODO Make possible to select another platform at build time.\r\nvar implementation = platform_dom$2._enabled ? platform_dom$2 : platform_basic;\r\n\r\n/**\r\n * @namespace Chart.platform\r\n * @see https://chartjs.gitbooks.io/proposals/content/Platform.html\r\n * @since 2.4.0\r\n */\r\nvar platform = helpers$1.extend({\r\n\t/**\r\n\t * @since 2.7.0\r\n\t */\r\n\tinitialize: function() {},\r\n\r\n\t/**\r\n\t * Called at chart construction time, returns a context2d instance implementing\r\n\t * the [W3C Canvas 2D Context API standard]{@link https://www.w3.org/TR/2dcontext/}.\r\n\t * @param {*} item - The native item from which to acquire context (platform specific)\r\n\t * @param {object} options - The chart options\r\n\t * @returns {CanvasRenderingContext2D} context2d instance\r\n\t */\r\n\tacquireContext: function() {},\r\n\r\n\t/**\r\n\t * Called at chart destruction time, releases any resources associated to the context\r\n\t * previously returned by the acquireContext() method.\r\n\t * @param {CanvasRenderingContext2D} context - The context2d instance\r\n\t * @returns {boolean} true if the method succeeded, else false\r\n\t */\r\n\treleaseContext: function() {},\r\n\r\n\t/**\r\n\t * Registers the specified listener on the given chart.\r\n\t * @param {Chart} chart - Chart from which to listen for event\r\n\t * @param {string} type - The ({@link IEvent}) type to listen for\r\n\t * @param {function} listener - Receives a notification (an object that implements\r\n\t * the {@link IEvent} interface) when an event of the specified type occurs.\r\n\t */\r\n\taddEventListener: function() {},\r\n\r\n\t/**\r\n\t * Removes the specified listener previously registered with addEventListener.\r\n\t * @param {Chart} chart - Chart from which to remove the listener\r\n\t * @param {string} type - The ({@link IEvent}) type to remove\r\n\t * @param {function} listener - The listener function to remove from the event target.\r\n\t */\r\n\tremoveEventListener: function() {}\r\n\r\n}, implementation);\n\ncore_defaults._set('global', {\r\n\tplugins: {}\r\n});\r\n\r\n/**\r\n * The plugin service singleton\r\n * @namespace Chart.plugins\r\n * @since 2.1.0\r\n */\r\nvar core_plugins = {\r\n\t/**\r\n\t * Globally registered plugins.\r\n\t * @private\r\n\t */\r\n\t_plugins: [],\r\n\r\n\t/**\r\n\t * This identifier is used to invalidate the descriptors cache attached to each chart\r\n\t * when a global plugin is registered or unregistered. In this case, the cache ID is\r\n\t * incremented and descriptors are regenerated during following API calls.\r\n\t * @private\r\n\t */\r\n\t_cacheId: 0,\r\n\r\n\t/**\r\n\t * Registers the given plugin(s) if not already registered.\r\n\t * @param {IPlugin[]|IPlugin} plugins plugin instance(s).\r\n\t */\r\n\tregister: function(plugins) {\r\n\t\tvar p = this._plugins;\r\n\t\t([]).concat(plugins).forEach(function(plugin) {\r\n\t\t\tif (p.indexOf(plugin) === -1) {\r\n\t\t\t\tp.push(plugin);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tthis._cacheId++;\r\n\t},\r\n\r\n\t/**\r\n\t * Unregisters the given plugin(s) only if registered.\r\n\t * @param {IPlugin[]|IPlugin} plugins plugin instance(s).\r\n\t */\r\n\tunregister: function(plugins) {\r\n\t\tvar p = this._plugins;\r\n\t\t([]).concat(plugins).forEach(function(plugin) {\r\n\t\t\tvar idx = p.indexOf(plugin);\r\n\t\t\tif (idx !== -1) {\r\n\t\t\t\tp.splice(idx, 1);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tthis._cacheId++;\r\n\t},\r\n\r\n\t/**\r\n\t * Remove all registered plugins.\r\n\t * @since 2.1.5\r\n\t */\r\n\tclear: function() {\r\n\t\tthis._plugins = [];\r\n\t\tthis._cacheId++;\r\n\t},\r\n\r\n\t/**\r\n\t * Returns the number of registered plugins?\r\n\t * @returns {number}\r\n\t * @since 2.1.5\r\n\t */\r\n\tcount: function() {\r\n\t\treturn this._plugins.length;\r\n\t},\r\n\r\n\t/**\r\n\t * Returns all registered plugin instances.\r\n\t * @returns {IPlugin[]} array of plugin objects.\r\n\t * @since 2.1.5\r\n\t */\r\n\tgetAll: function() {\r\n\t\treturn this._plugins;\r\n\t},\r\n\r\n\t/**\r\n\t * Calls enabled plugins for `chart` on the specified hook and with the given args.\r\n\t * This method immediately returns as soon as a plugin explicitly returns false. The\r\n\t * returned value can be used, for instance, to interrupt the current action.\r\n\t * @param {Chart} chart - The chart instance for which plugins should be called.\r\n\t * @param {string} hook - The name of the plugin method to call (e.g. 'beforeUpdate').\r\n\t * @param {Array} [args] - Extra arguments to apply to the hook call.\r\n\t * @returns {boolean} false if any of the plugins return false, else returns true.\r\n\t */\r\n\tnotify: function(chart, hook, args) {\r\n\t\tvar descriptors = this.descriptors(chart);\r\n\t\tvar ilen = descriptors.length;\r\n\t\tvar i, descriptor, plugin, params, method;\r\n\r\n\t\tfor (i = 0; i < ilen; ++i) {\r\n\t\t\tdescriptor = descriptors[i];\r\n\t\t\tplugin = descriptor.plugin;\r\n\t\t\tmethod = plugin[hook];\r\n\t\t\tif (typeof method === 'function') {\r\n\t\t\t\tparams = [chart].concat(args || []);\r\n\t\t\t\tparams.push(descriptor.options);\r\n\t\t\t\tif (method.apply(plugin, params) === false) {\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn true;\r\n\t},\r\n\r\n\t/**\r\n\t * Returns descriptors of enabled plugins for the given chart.\r\n\t * @returns {object[]} [{ plugin, options }]\r\n\t * @private\r\n\t */\r\n\tdescriptors: function(chart) {\r\n\t\tvar cache = chart.$plugins || (chart.$plugins = {});\r\n\t\tif (cache.id === this._cacheId) {\r\n\t\t\treturn cache.descriptors;\r\n\t\t}\r\n\r\n\t\tvar plugins = [];\r\n\t\tvar descriptors = [];\r\n\t\tvar config = (chart && chart.config) || {};\r\n\t\tvar options = (config.options && config.options.plugins) || {};\r\n\r\n\t\tthis._plugins.concat(config.plugins || []).forEach(function(plugin) {\r\n\t\t\tvar idx = plugins.indexOf(plugin);\r\n\t\t\tif (idx !== -1) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tvar id = plugin.id;\r\n\t\t\tvar opts = options[id];\r\n\t\t\tif (opts === false) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tif (opts === true) {\r\n\t\t\t\topts = helpers$1.clone(core_defaults.global.plugins[id]);\r\n\t\t\t}\r\n\r\n\t\t\tplugins.push(plugin);\r\n\t\t\tdescriptors.push({\r\n\t\t\t\tplugin: plugin,\r\n\t\t\t\toptions: opts || {}\r\n\t\t\t});\r\n\t\t});\r\n\r\n\t\tcache.descriptors = descriptors;\r\n\t\tcache.id = this._cacheId;\r\n\t\treturn descriptors;\r\n\t},\r\n\r\n\t/**\r\n\t * Invalidates cache for the given chart: descriptors hold a reference on plugin option,\r\n\t * but in some cases, this reference can be changed by the user when updating options.\r\n\t * https://github.com/chartjs/Chart.js/issues/5111#issuecomment-355934167\r\n\t * @private\r\n\t */\r\n\t_invalidate: function(chart) {\r\n\t\tdelete chart.$plugins;\r\n\t}\r\n};\n\nvar core_scaleService = {\r\n\t// Scale registration object. Extensions can register new scale types (such as log or DB scales) and then\r\n\t// use the new chart options to grab the correct scale\r\n\tconstructors: {},\r\n\t// Use a registration function so that we can move to an ES6 map when we no longer need to support\r\n\t// old browsers\r\n\r\n\t// Scale config defaults\r\n\tdefaults: {},\r\n\tregisterScaleType: function(type, scaleConstructor, scaleDefaults) {\r\n\t\tthis.constructors[type] = scaleConstructor;\r\n\t\tthis.defaults[type] = helpers$1.clone(scaleDefaults);\r\n\t},\r\n\tgetScaleConstructor: function(type) {\r\n\t\treturn this.constructors.hasOwnProperty(type) ? this.constructors[type] : undefined;\r\n\t},\r\n\tgetScaleDefaults: function(type) {\r\n\t\t// Return the scale defaults merged with the global settings so that we always use the latest ones\r\n\t\treturn this.defaults.hasOwnProperty(type) ? helpers$1.merge(Object.create(null), [core_defaults.scale, this.defaults[type]]) : {};\r\n\t},\r\n\tupdateScaleDefaults: function(type, additions) {\r\n\t\tvar me = this;\r\n\t\tif (me.defaults.hasOwnProperty(type)) {\r\n\t\t\tme.defaults[type] = helpers$1.extend(me.defaults[type], additions);\r\n\t\t}\r\n\t},\r\n\taddScalesToLayout: function(chart) {\r\n\t\t// Adds each scale to the chart.boxes array to be sized accordingly\r\n\t\thelpers$1.each(chart.scales, function(scale) {\r\n\t\t\t// Set ILayoutItem parameters for backwards compatibility\r\n\t\t\tscale.fullWidth = scale.options.fullWidth;\r\n\t\t\tscale.position = scale.options.position;\r\n\t\t\tscale.weight = scale.options.weight;\r\n\t\t\tcore_layouts.addBox(chart, scale);\r\n\t\t});\r\n\t}\r\n};\n\nvar valueOrDefault$8 = helpers$1.valueOrDefault;\r\nvar getRtlHelper = helpers$1.rtl.getRtlAdapter;\r\n\r\ncore_defaults._set('global', {\r\n\ttooltips: {\r\n\t\tenabled: true,\r\n\t\tcustom: null,\r\n\t\tmode: 'nearest',\r\n\t\tposition: 'average',\r\n\t\tintersect: true,\r\n\t\tbackgroundColor: 'rgba(0,0,0,0.8)',\r\n\t\ttitleFontStyle: 'bold',\r\n\t\ttitleSpacing: 2,\r\n\t\ttitleMarginBottom: 6,\r\n\t\ttitleFontColor: '#fff',\r\n\t\ttitleAlign: 'left',\r\n\t\tbodySpacing: 2,\r\n\t\tbodyFontColor: '#fff',\r\n\t\tbodyAlign: 'left',\r\n\t\tfooterFontStyle: 'bold',\r\n\t\tfooterSpacing: 2,\r\n\t\tfooterMarginTop: 6,\r\n\t\tfooterFontColor: '#fff',\r\n\t\tfooterAlign: 'left',\r\n\t\tyPadding: 6,\r\n\t\txPadding: 6,\r\n\t\tcaretPadding: 2,\r\n\t\tcaretSize: 5,\r\n\t\tcornerRadius: 6,\r\n\t\tmultiKeyBackground: '#fff',\r\n\t\tdisplayColors: true,\r\n\t\tborderColor: 'rgba(0,0,0,0)',\r\n\t\tborderWidth: 0,\r\n\t\tcallbacks: {\r\n\t\t\t// Args are: (tooltipItems, data)\r\n\t\t\tbeforeTitle: helpers$1.noop,\r\n\t\t\ttitle: function(tooltipItems, data) {\r\n\t\t\t\tvar title = '';\r\n\t\t\t\tvar labels = data.labels;\r\n\t\t\t\tvar labelCount = labels ? labels.length : 0;\r\n\r\n\t\t\t\tif (tooltipItems.length > 0) {\r\n\t\t\t\t\tvar item = tooltipItems[0];\r\n\t\t\t\t\tif (item.label) {\r\n\t\t\t\t\t\ttitle = item.label;\r\n\t\t\t\t\t} else if (item.xLabel) {\r\n\t\t\t\t\t\ttitle = item.xLabel;\r\n\t\t\t\t\t} else if (labelCount > 0 && item.index < labelCount) {\r\n\t\t\t\t\t\ttitle = labels[item.index];\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn title;\r\n\t\t\t},\r\n\t\t\tafterTitle: helpers$1.noop,\r\n\r\n\t\t\t// Args are: (tooltipItems, data)\r\n\t\t\tbeforeBody: helpers$1.noop,\r\n\r\n\t\t\t// Args are: (tooltipItem, data)\r\n\t\t\tbeforeLabel: helpers$1.noop,\r\n\t\t\tlabel: function(tooltipItem, data) {\r\n\t\t\t\tvar label = data.datasets[tooltipItem.datasetIndex].label || '';\r\n\r\n\t\t\t\tif (label) {\r\n\t\t\t\t\tlabel += ': ';\r\n\t\t\t\t}\r\n\t\t\t\tif (!helpers$1.isNullOrUndef(tooltipItem.value)) {\r\n\t\t\t\t\tlabel += tooltipItem.value;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tlabel += tooltipItem.yLabel;\r\n\t\t\t\t}\r\n\t\t\t\treturn label;\r\n\t\t\t},\r\n\t\t\tlabelColor: function(tooltipItem, chart) {\r\n\t\t\t\tvar meta = chart.getDatasetMeta(tooltipItem.datasetIndex);\r\n\t\t\t\tvar activeElement = meta.data[tooltipItem.index];\r\n\t\t\t\tvar view = activeElement._view;\r\n\t\t\t\treturn {\r\n\t\t\t\t\tborderColor: view.borderColor,\r\n\t\t\t\t\tbackgroundColor: view.backgroundColor\r\n\t\t\t\t};\r\n\t\t\t},\r\n\t\t\tlabelTextColor: function() {\r\n\t\t\t\treturn this._options.bodyFontColor;\r\n\t\t\t},\r\n\t\t\tafterLabel: helpers$1.noop,\r\n\r\n\t\t\t// Args are: (tooltipItems, data)\r\n\t\t\tafterBody: helpers$1.noop,\r\n\r\n\t\t\t// Args are: (tooltipItems, data)\r\n\t\t\tbeforeFooter: helpers$1.noop,\r\n\t\t\tfooter: helpers$1.noop,\r\n\t\t\tafterFooter: helpers$1.noop\r\n\t\t}\r\n\t}\r\n});\r\n\r\nvar positioners = {\r\n\t/**\r\n\t * Average mode places the tooltip at the average position of the elements shown\r\n\t * @function Chart.Tooltip.positioners.average\r\n\t * @param elements {ChartElement[]} the elements being displayed in the tooltip\r\n\t * @returns {object} tooltip position\r\n\t */\r\n\taverage: function(elements) {\r\n\t\tif (!elements.length) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tvar i, len;\r\n\t\tvar x = 0;\r\n\t\tvar y = 0;\r\n\t\tvar count = 0;\r\n\r\n\t\tfor (i = 0, len = elements.length; i < len; ++i) {\r\n\t\t\tvar el = elements[i];\r\n\t\t\tif (el && el.hasValue()) {\r\n\t\t\t\tvar pos = el.tooltipPosition();\r\n\t\t\t\tx += pos.x;\r\n\t\t\t\ty += pos.y;\r\n\t\t\t\t++count;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn {\r\n\t\t\tx: x / count,\r\n\t\t\ty: y / count\r\n\t\t};\r\n\t},\r\n\r\n\t/**\r\n\t * Gets the tooltip position nearest of the item nearest to the event position\r\n\t * @function Chart.Tooltip.positioners.nearest\r\n\t * @param elements {Chart.Element[]} the tooltip elements\r\n\t * @param eventPosition {object} the position of the event in canvas coordinates\r\n\t * @returns {object} the tooltip position\r\n\t */\r\n\tnearest: function(elements, eventPosition) {\r\n\t\tvar x = eventPosition.x;\r\n\t\tvar y = eventPosition.y;\r\n\t\tvar minDistance = Number.POSITIVE_INFINITY;\r\n\t\tvar i, len, nearestElement;\r\n\r\n\t\tfor (i = 0, len = elements.length; i < len; ++i) {\r\n\t\t\tvar el = elements[i];\r\n\t\t\tif (el && el.hasValue()) {\r\n\t\t\t\tvar center = el.getCenterPoint();\r\n\t\t\t\tvar d = helpers$1.distanceBetweenPoints(eventPosition, center);\r\n\r\n\t\t\t\tif (d < minDistance) {\r\n\t\t\t\t\tminDistance = d;\r\n\t\t\t\t\tnearestElement = el;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (nearestElement) {\r\n\t\t\tvar tp = nearestElement.tooltipPosition();\r\n\t\t\tx = tp.x;\r\n\t\t\ty = tp.y;\r\n\t\t}\r\n\r\n\t\treturn {\r\n\t\t\tx: x,\r\n\t\t\ty: y\r\n\t\t};\r\n\t}\r\n};\r\n\r\n// Helper to push or concat based on if the 2nd parameter is an array or not\r\nfunction pushOrConcat(base, toPush) {\r\n\tif (toPush) {\r\n\t\tif (helpers$1.isArray(toPush)) {\r\n\t\t\t// base = base.concat(toPush);\r\n\t\t\tArray.prototype.push.apply(base, toPush);\r\n\t\t} else {\r\n\t\t\tbase.push(toPush);\r\n\t\t}\r\n\t}\r\n\r\n\treturn base;\r\n}\r\n\r\n/**\r\n * Returns array of strings split by newline\r\n * @param {string} value - The value to split by newline.\r\n * @returns {string[]} value if newline present - Returned from String split() method\r\n * @function\r\n */\r\nfunction splitNewlines(str) {\r\n\tif ((typeof str === 'string' || str instanceof String) && str.indexOf('\\n') > -1) {\r\n\t\treturn str.split('\\n');\r\n\t}\r\n\treturn str;\r\n}\r\n\r\n\r\n/**\r\n * Private helper to create a tooltip item model\r\n * @param element - the chart element (point, arc, bar) to create the tooltip item for\r\n * @return new tooltip item\r\n */\r\nfunction createTooltipItem(element) {\r\n\tvar xScale = element._xScale;\r\n\tvar yScale = element._yScale || element._scale; // handle radar || polarArea charts\r\n\tvar index = element._index;\r\n\tvar datasetIndex = element._datasetIndex;\r\n\tvar controller = element._chart.getDatasetMeta(datasetIndex).controller;\r\n\tvar indexScale = controller._getIndexScale();\r\n\tvar valueScale = controller._getValueScale();\r\n\r\n\treturn {\r\n\t\txLabel: xScale ? xScale.getLabelForIndex(index, datasetIndex) : '',\r\n\t\tyLabel: yScale ? yScale.getLabelForIndex(index, datasetIndex) : '',\r\n\t\tlabel: indexScale ? '' + indexScale.getLabelForIndex(index, datasetIndex) : '',\r\n\t\tvalue: valueScale ? '' + valueScale.getLabelForIndex(index, datasetIndex) : '',\r\n\t\tindex: index,\r\n\t\tdatasetIndex: datasetIndex,\r\n\t\tx: element._model.x,\r\n\t\ty: element._model.y\r\n\t};\r\n}\r\n\r\n/**\r\n * Helper to get the reset model for the tooltip\r\n * @param tooltipOpts {object} the tooltip options\r\n */\r\nfunction getBaseModel(tooltipOpts) {\r\n\tvar globalDefaults = core_defaults.global;\r\n\r\n\treturn {\r\n\t\t// Positioning\r\n\t\txPadding: tooltipOpts.xPadding,\r\n\t\tyPadding: tooltipOpts.yPadding,\r\n\t\txAlign: tooltipOpts.xAlign,\r\n\t\tyAlign: tooltipOpts.yAlign,\r\n\r\n\t\t// Drawing direction and text direction\r\n\t\trtl: tooltipOpts.rtl,\r\n\t\ttextDirection: tooltipOpts.textDirection,\r\n\r\n\t\t// Body\r\n\t\tbodyFontColor: tooltipOpts.bodyFontColor,\r\n\t\t_bodyFontFamily: valueOrDefault$8(tooltipOpts.bodyFontFamily, globalDefaults.defaultFontFamily),\r\n\t\t_bodyFontStyle: valueOrDefault$8(tooltipOpts.bodyFontStyle, globalDefaults.defaultFontStyle),\r\n\t\t_bodyAlign: tooltipOpts.bodyAlign,\r\n\t\tbodyFontSize: valueOrDefault$8(tooltipOpts.bodyFontSize, globalDefaults.defaultFontSize),\r\n\t\tbodySpacing: tooltipOpts.bodySpacing,\r\n\r\n\t\t// Title\r\n\t\ttitleFontColor: tooltipOpts.titleFontColor,\r\n\t\t_titleFontFamily: valueOrDefault$8(tooltipOpts.titleFontFamily, globalDefaults.defaultFontFamily),\r\n\t\t_titleFontStyle: valueOrDefault$8(tooltipOpts.titleFontStyle, globalDefaults.defaultFontStyle),\r\n\t\ttitleFontSize: valueOrDefault$8(tooltipOpts.titleFontSize, globalDefaults.defaultFontSize),\r\n\t\t_titleAlign: tooltipOpts.titleAlign,\r\n\t\ttitleSpacing: tooltipOpts.titleSpacing,\r\n\t\ttitleMarginBottom: tooltipOpts.titleMarginBottom,\r\n\r\n\t\t// Footer\r\n\t\tfooterFontColor: tooltipOpts.footerFontColor,\r\n\t\t_footerFontFamily: valueOrDefault$8(tooltipOpts.footerFontFamily, globalDefaults.defaultFontFamily),\r\n\t\t_footerFontStyle: valueOrDefault$8(tooltipOpts.footerFontStyle, globalDefaults.defaultFontStyle),\r\n\t\tfooterFontSize: valueOrDefault$8(tooltipOpts.footerFontSize, globalDefaults.defaultFontSize),\r\n\t\t_footerAlign: tooltipOpts.footerAlign,\r\n\t\tfooterSpacing: tooltipOpts.footerSpacing,\r\n\t\tfooterMarginTop: tooltipOpts.footerMarginTop,\r\n\r\n\t\t// Appearance\r\n\t\tcaretSize: tooltipOpts.caretSize,\r\n\t\tcornerRadius: tooltipOpts.cornerRadius,\r\n\t\tbackgroundColor: tooltipOpts.backgroundColor,\r\n\t\topacity: 0,\r\n\t\tlegendColorBackground: tooltipOpts.multiKeyBackground,\r\n\t\tdisplayColors: tooltipOpts.displayColors,\r\n\t\tborderColor: tooltipOpts.borderColor,\r\n\t\tborderWidth: tooltipOpts.borderWidth\r\n\t};\r\n}\r\n\r\n/**\r\n * Get the size of the tooltip\r\n */\r\nfunction getTooltipSize(tooltip, model) {\r\n\tvar ctx = tooltip._chart.ctx;\r\n\r\n\tvar height = model.yPadding * 2; // Tooltip Padding\r\n\tvar width = 0;\r\n\r\n\t// Count of all lines in the body\r\n\tvar body = model.body;\r\n\tvar combinedBodyLength = body.reduce(function(count, bodyItem) {\r\n\t\treturn count + bodyItem.before.length + bodyItem.lines.length + bodyItem.after.length;\r\n\t}, 0);\r\n\tcombinedBodyLength += model.beforeBody.length + model.afterBody.length;\r\n\r\n\tvar titleLineCount = model.title.length;\r\n\tvar footerLineCount = model.footer.length;\r\n\tvar titleFontSize = model.titleFontSize;\r\n\tvar bodyFontSize = model.bodyFontSize;\r\n\tvar footerFontSize = model.footerFontSize;\r\n\r\n\theight += titleLineCount * titleFontSize; // Title Lines\r\n\theight += titleLineCount ? (titleLineCount - 1) * model.titleSpacing : 0; // Title Line Spacing\r\n\theight += titleLineCount ? model.titleMarginBottom : 0; // Title's bottom Margin\r\n\theight += combinedBodyLength * bodyFontSize; // Body Lines\r\n\theight += combinedBodyLength ? (combinedBodyLength - 1) * model.bodySpacing : 0; // Body Line Spacing\r\n\theight += footerLineCount ? model.footerMarginTop : 0; // Footer Margin\r\n\theight += footerLineCount * (footerFontSize); // Footer Lines\r\n\theight += footerLineCount ? (footerLineCount - 1) * model.footerSpacing : 0; // Footer Line Spacing\r\n\r\n\t// Title width\r\n\tvar widthPadding = 0;\r\n\tvar maxLineWidth = function(line) {\r\n\t\twidth = Math.max(width, ctx.measureText(line).width + widthPadding);\r\n\t};\r\n\r\n\tctx.font = helpers$1.fontString(titleFontSize, model._titleFontStyle, model._titleFontFamily);\r\n\thelpers$1.each(model.title, maxLineWidth);\r\n\r\n\t// Body width\r\n\tctx.font = helpers$1.fontString(bodyFontSize, model._bodyFontStyle, model._bodyFontFamily);\r\n\thelpers$1.each(model.beforeBody.concat(model.afterBody), maxLineWidth);\r\n\r\n\t// Body lines may include some extra width due to the color box\r\n\twidthPadding = model.displayColors ? (bodyFontSize + 2) : 0;\r\n\thelpers$1.each(body, function(bodyItem) {\r\n\t\thelpers$1.each(bodyItem.before, maxLineWidth);\r\n\t\thelpers$1.each(bodyItem.lines, maxLineWidth);\r\n\t\thelpers$1.each(bodyItem.after, maxLineWidth);\r\n\t});\r\n\r\n\t// Reset back to 0\r\n\twidthPadding = 0;\r\n\r\n\t// Footer width\r\n\tctx.font = helpers$1.fontString(footerFontSize, model._footerFontStyle, model._footerFontFamily);\r\n\thelpers$1.each(model.footer, maxLineWidth);\r\n\r\n\t// Add padding\r\n\twidth += 2 * model.xPadding;\r\n\r\n\treturn {\r\n\t\twidth: width,\r\n\t\theight: height\r\n\t};\r\n}\r\n\r\n/**\r\n * Helper to get the alignment of a tooltip given the size\r\n */\r\nfunction determineAlignment(tooltip, size) {\r\n\tvar model = tooltip._model;\r\n\tvar chart = tooltip._chart;\r\n\tvar chartArea = tooltip._chart.chartArea;\r\n\tvar xAlign = 'center';\r\n\tvar yAlign = 'center';\r\n\r\n\tif (model.y < size.height) {\r\n\t\tyAlign = 'top';\r\n\t} else if (model.y > (chart.height - size.height)) {\r\n\t\tyAlign = 'bottom';\r\n\t}\r\n\r\n\tvar lf, rf; // functions to determine left, right alignment\r\n\tvar olf, orf; // functions to determine if left/right alignment causes tooltip to go outside chart\r\n\tvar yf; // function to get the y alignment if the tooltip goes outside of the left or right edges\r\n\tvar midX = (chartArea.left + chartArea.right) / 2;\r\n\tvar midY = (chartArea.top + chartArea.bottom) / 2;\r\n\r\n\tif (yAlign === 'center') {\r\n\t\tlf = function(x) {\r\n\t\t\treturn x <= midX;\r\n\t\t};\r\n\t\trf = function(x) {\r\n\t\t\treturn x > midX;\r\n\t\t};\r\n\t} else {\r\n\t\tlf = function(x) {\r\n\t\t\treturn x <= (size.width / 2);\r\n\t\t};\r\n\t\trf = function(x) {\r\n\t\t\treturn x >= (chart.width - (size.width / 2));\r\n\t\t};\r\n\t}\r\n\r\n\tolf = function(x) {\r\n\t\treturn x + size.width + model.caretSize + model.caretPadding > chart.width;\r\n\t};\r\n\torf = function(x) {\r\n\t\treturn x - size.width - model.caretSize - model.caretPadding < 0;\r\n\t};\r\n\tyf = function(y) {\r\n\t\treturn y <= midY ? 'top' : 'bottom';\r\n\t};\r\n\r\n\tif (lf(model.x)) {\r\n\t\txAlign = 'left';\r\n\r\n\t\t// Is tooltip too wide and goes over the right side of the chart.?\r\n\t\tif (olf(model.x)) {\r\n\t\t\txAlign = 'center';\r\n\t\t\tyAlign = yf(model.y);\r\n\t\t}\r\n\t} else if (rf(model.x)) {\r\n\t\txAlign = 'right';\r\n\r\n\t\t// Is tooltip too wide and goes outside left edge of canvas?\r\n\t\tif (orf(model.x)) {\r\n\t\t\txAlign = 'center';\r\n\t\t\tyAlign = yf(model.y);\r\n\t\t}\r\n\t}\r\n\r\n\tvar opts = tooltip._options;\r\n\treturn {\r\n\t\txAlign: opts.xAlign ? opts.xAlign : xAlign,\r\n\t\tyAlign: opts.yAlign ? opts.yAlign : yAlign\r\n\t};\r\n}\r\n\r\n/**\r\n * Helper to get the location a tooltip needs to be placed at given the initial position (via the vm) and the size and alignment\r\n */\r\nfunction getBackgroundPoint(vm, size, alignment, chart) {\r\n\t// Background Position\r\n\tvar x = vm.x;\r\n\tvar y = vm.y;\r\n\r\n\tvar caretSize = vm.caretSize;\r\n\tvar caretPadding = vm.caretPadding;\r\n\tvar cornerRadius = vm.cornerRadius;\r\n\tvar xAlign = alignment.xAlign;\r\n\tvar yAlign = alignment.yAlign;\r\n\tvar paddingAndSize = caretSize + caretPadding;\r\n\tvar radiusAndPadding = cornerRadius + caretPadding;\r\n\r\n\tif (xAlign === 'right') {\r\n\t\tx -= size.width;\r\n\t} else if (xAlign === 'center') {\r\n\t\tx -= (size.width / 2);\r\n\t\tif (x + size.width > chart.width) {\r\n\t\t\tx = chart.width - size.width;\r\n\t\t}\r\n\t\tif (x < 0) {\r\n\t\t\tx = 0;\r\n\t\t}\r\n\t}\r\n\r\n\tif (yAlign === 'top') {\r\n\t\ty += paddingAndSize;\r\n\t} else if (yAlign === 'bottom') {\r\n\t\ty -= size.height + paddingAndSize;\r\n\t} else {\r\n\t\ty -= (size.height / 2);\r\n\t}\r\n\r\n\tif (yAlign === 'center') {\r\n\t\tif (xAlign === 'left') {\r\n\t\t\tx += paddingAndSize;\r\n\t\t} else if (xAlign === 'right') {\r\n\t\t\tx -= paddingAndSize;\r\n\t\t}\r\n\t} else if (xAlign === 'left') {\r\n\t\tx -= radiusAndPadding;\r\n\t} else if (xAlign === 'right') {\r\n\t\tx += radiusAndPadding;\r\n\t}\r\n\r\n\treturn {\r\n\t\tx: x,\r\n\t\ty: y\r\n\t};\r\n}\r\n\r\nfunction getAlignedX(vm, align) {\r\n\treturn align === 'center'\r\n\t\t? vm.x + vm.width / 2\r\n\t\t: align === 'right'\r\n\t\t\t? vm.x + vm.width - vm.xPadding\r\n\t\t\t: vm.x + vm.xPadding;\r\n}\r\n\r\n/**\r\n * Helper to build before and after body lines\r\n */\r\nfunction getBeforeAfterBodyLines(callback) {\r\n\treturn pushOrConcat([], splitNewlines(callback));\r\n}\r\n\r\nvar exports$4 = core_element.extend({\r\n\tinitialize: function() {\r\n\t\tthis._model = getBaseModel(this._options);\r\n\t\tthis._lastActive = [];\r\n\t},\r\n\r\n\t// Get the title\r\n\t// Args are: (tooltipItem, data)\r\n\tgetTitle: function() {\r\n\t\tvar me = this;\r\n\t\tvar opts = me._options;\r\n\t\tvar callbacks = opts.callbacks;\r\n\r\n\t\tvar beforeTitle = callbacks.beforeTitle.apply(me, arguments);\r\n\t\tvar title = callbacks.title.apply(me, arguments);\r\n\t\tvar afterTitle = callbacks.afterTitle.apply(me, arguments);\r\n\r\n\t\tvar lines = [];\r\n\t\tlines = pushOrConcat(lines, splitNewlines(beforeTitle));\r\n\t\tlines = pushOrConcat(lines, splitNewlines(title));\r\n\t\tlines = pushOrConcat(lines, splitNewlines(afterTitle));\r\n\r\n\t\treturn lines;\r\n\t},\r\n\r\n\t// Args are: (tooltipItem, data)\r\n\tgetBeforeBody: function() {\r\n\t\treturn getBeforeAfterBodyLines(this._options.callbacks.beforeBody.apply(this, arguments));\r\n\t},\r\n\r\n\t// Args are: (tooltipItem, data)\r\n\tgetBody: function(tooltipItems, data) {\r\n\t\tvar me = this;\r\n\t\tvar callbacks = me._options.callbacks;\r\n\t\tvar bodyItems = [];\r\n\r\n\t\thelpers$1.each(tooltipItems, function(tooltipItem) {\r\n\t\t\tvar bodyItem = {\r\n\t\t\t\tbefore: [],\r\n\t\t\t\tlines: [],\r\n\t\t\t\tafter: []\r\n\t\t\t};\r\n\t\t\tpushOrConcat(bodyItem.before, splitNewlines(callbacks.beforeLabel.call(me, tooltipItem, data)));\r\n\t\t\tpushOrConcat(bodyItem.lines, callbacks.label.call(me, tooltipItem, data));\r\n\t\t\tpushOrConcat(bodyItem.after, splitNewlines(callbacks.afterLabel.call(me, tooltipItem, data)));\r\n\r\n\t\t\tbodyItems.push(bodyItem);\r\n\t\t});\r\n\r\n\t\treturn bodyItems;\r\n\t},\r\n\r\n\t// Args are: (tooltipItem, data)\r\n\tgetAfterBody: function() {\r\n\t\treturn getBeforeAfterBodyLines(this._options.callbacks.afterBody.apply(this, arguments));\r\n\t},\r\n\r\n\t// Get the footer and beforeFooter and afterFooter lines\r\n\t// Args are: (tooltipItem, data)\r\n\tgetFooter: function() {\r\n\t\tvar me = this;\r\n\t\tvar callbacks = me._options.callbacks;\r\n\r\n\t\tvar beforeFooter = callbacks.beforeFooter.apply(me, arguments);\r\n\t\tvar footer = callbacks.footer.apply(me, arguments);\r\n\t\tvar afterFooter = callbacks.afterFooter.apply(me, arguments);\r\n\r\n\t\tvar lines = [];\r\n\t\tlines = pushOrConcat(lines, splitNewlines(beforeFooter));\r\n\t\tlines = pushOrConcat(lines, splitNewlines(footer));\r\n\t\tlines = pushOrConcat(lines, splitNewlines(afterFooter));\r\n\r\n\t\treturn lines;\r\n\t},\r\n\r\n\tupdate: function(changed) {\r\n\t\tvar me = this;\r\n\t\tvar opts = me._options;\r\n\r\n\t\t// Need to regenerate the model because its faster than using extend and it is necessary due to the optimization in Chart.Element.transition\r\n\t\t// that does _view = _model if ease === 1. This causes the 2nd tooltip update to set properties in both the view and model at the same time\r\n\t\t// which breaks any animations.\r\n\t\tvar existingModel = me._model;\r\n\t\tvar model = me._model = getBaseModel(opts);\r\n\t\tvar active = me._active;\r\n\r\n\t\tvar data = me._data;\r\n\r\n\t\t// In the case where active.length === 0 we need to keep these at existing values for good animations\r\n\t\tvar alignment = {\r\n\t\t\txAlign: existingModel.xAlign,\r\n\t\t\tyAlign: existingModel.yAlign\r\n\t\t};\r\n\t\tvar backgroundPoint = {\r\n\t\t\tx: existingModel.x,\r\n\t\t\ty: existingModel.y\r\n\t\t};\r\n\t\tvar tooltipSize = {\r\n\t\t\twidth: existingModel.width,\r\n\t\t\theight: existingModel.height\r\n\t\t};\r\n\t\tvar tooltipPosition = {\r\n\t\t\tx: existingModel.caretX,\r\n\t\t\ty: existingModel.caretY\r\n\t\t};\r\n\r\n\t\tvar i, len;\r\n\r\n\t\tif (active.length) {\r\n\t\t\tmodel.opacity = 1;\r\n\r\n\t\t\tvar labelColors = [];\r\n\t\t\tvar labelTextColors = [];\r\n\t\t\ttooltipPosition = positioners[opts.position].call(me, active, me._eventPosition);\r\n\r\n\t\t\tvar tooltipItems = [];\r\n\t\t\tfor (i = 0, len = active.length; i < len; ++i) {\r\n\t\t\t\ttooltipItems.push(createTooltipItem(active[i]));\r\n\t\t\t}\r\n\r\n\t\t\t// If the user provided a filter function, use it to modify the tooltip items\r\n\t\t\tif (opts.filter) {\r\n\t\t\t\ttooltipItems = tooltipItems.filter(function(a) {\r\n\t\t\t\t\treturn opts.filter(a, data);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\t// If the user provided a sorting function, use it to modify the tooltip items\r\n\t\t\tif (opts.itemSort) {\r\n\t\t\t\ttooltipItems = tooltipItems.sort(function(a, b) {\r\n\t\t\t\t\treturn opts.itemSort(a, b, data);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\t// Determine colors for boxes\r\n\t\t\thelpers$1.each(tooltipItems, function(tooltipItem) {\r\n\t\t\t\tlabelColors.push(opts.callbacks.labelColor.call(me, tooltipItem, me._chart));\r\n\t\t\t\tlabelTextColors.push(opts.callbacks.labelTextColor.call(me, tooltipItem, me._chart));\r\n\t\t\t});\r\n\r\n\r\n\t\t\t// Build the Text Lines\r\n\t\t\tmodel.title = me.getTitle(tooltipItems, data);\r\n\t\t\tmodel.beforeBody = me.getBeforeBody(tooltipItems, data);\r\n\t\t\tmodel.body = me.getBody(tooltipItems, data);\r\n\t\t\tmodel.afterBody = me.getAfterBody(tooltipItems, data);\r\n\t\t\tmodel.footer = me.getFooter(tooltipItems, data);\r\n\r\n\t\t\t// Initial positioning and colors\r\n\t\t\tmodel.x = tooltipPosition.x;\r\n\t\t\tmodel.y = tooltipPosition.y;\r\n\t\t\tmodel.caretPadding = opts.caretPadding;\r\n\t\t\tmodel.labelColors = labelColors;\r\n\t\t\tmodel.labelTextColors = labelTextColors;\r\n\r\n\t\t\t// data points\r\n\t\t\tmodel.dataPoints = tooltipItems;\r\n\r\n\t\t\t// We need to determine alignment of the tooltip\r\n\t\t\ttooltipSize = getTooltipSize(this, model);\r\n\t\t\talignment = determineAlignment(this, tooltipSize);\r\n\t\t\t// Final Size and Position\r\n\t\t\tbackgroundPoint = getBackgroundPoint(model, tooltipSize, alignment, me._chart);\r\n\t\t} else {\r\n\t\t\tmodel.opacity = 0;\r\n\t\t}\r\n\r\n\t\tmodel.xAlign = alignment.xAlign;\r\n\t\tmodel.yAlign = alignment.yAlign;\r\n\t\tmodel.x = backgroundPoint.x;\r\n\t\tmodel.y = backgroundPoint.y;\r\n\t\tmodel.width = tooltipSize.width;\r\n\t\tmodel.height = tooltipSize.height;\r\n\r\n\t\t// Point where the caret on the tooltip points to\r\n\t\tmodel.caretX = tooltipPosition.x;\r\n\t\tmodel.caretY = tooltipPosition.y;\r\n\r\n\t\tme._model = model;\r\n\r\n\t\tif (changed && opts.custom) {\r\n\t\t\topts.custom.call(me, model);\r\n\t\t}\r\n\r\n\t\treturn me;\r\n\t},\r\n\r\n\tdrawCaret: function(tooltipPoint, size) {\r\n\t\tvar ctx = this._chart.ctx;\r\n\t\tvar vm = this._view;\r\n\t\tvar caretPosition = this.getCaretPosition(tooltipPoint, size, vm);\r\n\r\n\t\tctx.lineTo(caretPosition.x1, caretPosition.y1);\r\n\t\tctx.lineTo(caretPosition.x2, caretPosition.y2);\r\n\t\tctx.lineTo(caretPosition.x3, caretPosition.y3);\r\n\t},\r\n\tgetCaretPosition: function(tooltipPoint, size, vm) {\r\n\t\tvar x1, x2, x3, y1, y2, y3;\r\n\t\tvar caretSize = vm.caretSize;\r\n\t\tvar cornerRadius = vm.cornerRadius;\r\n\t\tvar xAlign = vm.xAlign;\r\n\t\tvar yAlign = vm.yAlign;\r\n\t\tvar ptX = tooltipPoint.x;\r\n\t\tvar ptY = tooltipPoint.y;\r\n\t\tvar width = size.width;\r\n\t\tvar height = size.height;\r\n\r\n\t\tif (yAlign === 'center') {\r\n\t\t\ty2 = ptY + (height / 2);\r\n\r\n\t\t\tif (xAlign === 'left') {\r\n\t\t\t\tx1 = ptX;\r\n\t\t\t\tx2 = x1 - caretSize;\r\n\t\t\t\tx3 = x1;\r\n\r\n\t\t\t\ty1 = y2 + caretSize;\r\n\t\t\t\ty3 = y2 - caretSize;\r\n\t\t\t} else {\r\n\t\t\t\tx1 = ptX + width;\r\n\t\t\t\tx2 = x1 + caretSize;\r\n\t\t\t\tx3 = x1;\r\n\r\n\t\t\t\ty1 = y2 - caretSize;\r\n\t\t\t\ty3 = y2 + caretSize;\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tif (xAlign === 'left') {\r\n\t\t\t\tx2 = ptX + cornerRadius + (caretSize);\r\n\t\t\t\tx1 = x2 - caretSize;\r\n\t\t\t\tx3 = x2 + caretSize;\r\n\t\t\t} else if (xAlign === 'right') {\r\n\t\t\t\tx2 = ptX + width - cornerRadius - caretSize;\r\n\t\t\t\tx1 = x2 - caretSize;\r\n\t\t\t\tx3 = x2 + caretSize;\r\n\t\t\t} else {\r\n\t\t\t\tx2 = vm.caretX;\r\n\t\t\t\tx1 = x2 - caretSize;\r\n\t\t\t\tx3 = x2 + caretSize;\r\n\t\t\t}\r\n\t\t\tif (yAlign === 'top') {\r\n\t\t\t\ty1 = ptY;\r\n\t\t\t\ty2 = y1 - caretSize;\r\n\t\t\t\ty3 = y1;\r\n\t\t\t} else {\r\n\t\t\t\ty1 = ptY + height;\r\n\t\t\t\ty2 = y1 + caretSize;\r\n\t\t\t\ty3 = y1;\r\n\t\t\t\t// invert drawing order\r\n\t\t\t\tvar tmp = x3;\r\n\t\t\t\tx3 = x1;\r\n\t\t\t\tx1 = tmp;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn {x1: x1, x2: x2, x3: x3, y1: y1, y2: y2, y3: y3};\r\n\t},\r\n\r\n\tdrawTitle: function(pt, vm, ctx) {\r\n\t\tvar title = vm.title;\r\n\t\tvar length = title.length;\r\n\t\tvar titleFontSize, titleSpacing, i;\r\n\r\n\t\tif (length) {\r\n\t\t\tvar rtlHelper = getRtlHelper(vm.rtl, vm.x, vm.width);\r\n\r\n\t\t\tpt.x = getAlignedX(vm, vm._titleAlign);\r\n\r\n\t\t\tctx.textAlign = rtlHelper.textAlign(vm._titleAlign);\r\n\t\t\tctx.textBaseline = 'middle';\r\n\r\n\t\t\ttitleFontSize = vm.titleFontSize;\r\n\t\t\ttitleSpacing = vm.titleSpacing;\r\n\r\n\t\t\tctx.fillStyle = vm.titleFontColor;\r\n\t\t\tctx.font = helpers$1.fontString(titleFontSize, vm._titleFontStyle, vm._titleFontFamily);\r\n\r\n\t\t\tfor (i = 0; i < length; ++i) {\r\n\t\t\t\tctx.fillText(title[i], rtlHelper.x(pt.x), pt.y + titleFontSize / 2);\r\n\t\t\t\tpt.y += titleFontSize + titleSpacing; // Line Height and spacing\r\n\r\n\t\t\t\tif (i + 1 === length) {\r\n\t\t\t\t\tpt.y += vm.titleMarginBottom - titleSpacing; // If Last, add margin, remove spacing\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\tdrawBody: function(pt, vm, ctx) {\r\n\t\tvar bodyFontSize = vm.bodyFontSize;\r\n\t\tvar bodySpacing = vm.bodySpacing;\r\n\t\tvar bodyAlign = vm._bodyAlign;\r\n\t\tvar body = vm.body;\r\n\t\tvar drawColorBoxes = vm.displayColors;\r\n\t\tvar xLinePadding = 0;\r\n\t\tvar colorX = drawColorBoxes ? getAlignedX(vm, 'left') : 0;\r\n\r\n\t\tvar rtlHelper = getRtlHelper(vm.rtl, vm.x, vm.width);\r\n\r\n\t\tvar fillLineOfText = function(line) {\r\n\t\t\tctx.fillText(line, rtlHelper.x(pt.x + xLinePadding), pt.y + bodyFontSize / 2);\r\n\t\t\tpt.y += bodyFontSize + bodySpacing;\r\n\t\t};\r\n\r\n\t\tvar bodyItem, textColor, labelColors, lines, i, j, ilen, jlen;\r\n\t\tvar bodyAlignForCalculation = rtlHelper.textAlign(bodyAlign);\r\n\r\n\t\tctx.textAlign = bodyAlign;\r\n\t\tctx.textBaseline = 'middle';\r\n\t\tctx.font = helpers$1.fontString(bodyFontSize, vm._bodyFontStyle, vm._bodyFontFamily);\r\n\r\n\t\tpt.x = getAlignedX(vm, bodyAlignForCalculation);\r\n\r\n\t\t// Before body lines\r\n\t\tctx.fillStyle = vm.bodyFontColor;\r\n\t\thelpers$1.each(vm.beforeBody, fillLineOfText);\r\n\r\n\t\txLinePadding = drawColorBoxes && bodyAlignForCalculation !== 'right'\r\n\t\t\t? bodyAlign === 'center' ? (bodyFontSize / 2 + 1) : (bodyFontSize + 2)\r\n\t\t\t: 0;\r\n\r\n\t\t// Draw body lines now\r\n\t\tfor (i = 0, ilen = body.length; i < ilen; ++i) {\r\n\t\t\tbodyItem = body[i];\r\n\t\t\ttextColor = vm.labelTextColors[i];\r\n\t\t\tlabelColors = vm.labelColors[i];\r\n\r\n\t\t\tctx.fillStyle = textColor;\r\n\t\t\thelpers$1.each(bodyItem.before, fillLineOfText);\r\n\r\n\t\t\tlines = bodyItem.lines;\r\n\t\t\tfor (j = 0, jlen = lines.length; j < jlen; ++j) {\r\n\t\t\t\t// Draw Legend-like boxes if needed\r\n\t\t\t\tif (drawColorBoxes) {\r\n\t\t\t\t\tvar rtlColorX = rtlHelper.x(colorX);\r\n\r\n\t\t\t\t\t// Fill a white rect so that colours merge nicely if the opacity is < 1\r\n\t\t\t\t\tctx.fillStyle = vm.legendColorBackground;\r\n\t\t\t\t\tctx.fillRect(rtlHelper.leftForLtr(rtlColorX, bodyFontSize), pt.y, bodyFontSize, bodyFontSize);\r\n\r\n\t\t\t\t\t// Border\r\n\t\t\t\t\tctx.lineWidth = 1;\r\n\t\t\t\t\tctx.strokeStyle = labelColors.borderColor;\r\n\t\t\t\t\tctx.strokeRect(rtlHelper.leftForLtr(rtlColorX, bodyFontSize), pt.y, bodyFontSize, bodyFontSize);\r\n\r\n\t\t\t\t\t// Inner square\r\n\t\t\t\t\tctx.fillStyle = labelColors.backgroundColor;\r\n\t\t\t\t\tctx.fillRect(rtlHelper.leftForLtr(rtlHelper.xPlus(rtlColorX, 1), bodyFontSize - 2), pt.y + 1, bodyFontSize - 2, bodyFontSize - 2);\r\n\t\t\t\t\tctx.fillStyle = textColor;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfillLineOfText(lines[j]);\r\n\t\t\t}\r\n\r\n\t\t\thelpers$1.each(bodyItem.after, fillLineOfText);\r\n\t\t}\r\n\r\n\t\t// Reset back to 0 for after body\r\n\t\txLinePadding = 0;\r\n\r\n\t\t// After body lines\r\n\t\thelpers$1.each(vm.afterBody, fillLineOfText);\r\n\t\tpt.y -= bodySpacing; // Remove last body spacing\r\n\t},\r\n\r\n\tdrawFooter: function(pt, vm, ctx) {\r\n\t\tvar footer = vm.footer;\r\n\t\tvar length = footer.length;\r\n\t\tvar footerFontSize, i;\r\n\r\n\t\tif (length) {\r\n\t\t\tvar rtlHelper = getRtlHelper(vm.rtl, vm.x, vm.width);\r\n\r\n\t\t\tpt.x = getAlignedX(vm, vm._footerAlign);\r\n\t\t\tpt.y += vm.footerMarginTop;\r\n\r\n\t\t\tctx.textAlign = rtlHelper.textAlign(vm._footerAlign);\r\n\t\t\tctx.textBaseline = 'middle';\r\n\r\n\t\t\tfooterFontSize = vm.footerFontSize;\r\n\r\n\t\t\tctx.fillStyle = vm.footerFontColor;\r\n\t\t\tctx.font = helpers$1.fontString(footerFontSize, vm._footerFontStyle, vm._footerFontFamily);\r\n\r\n\t\t\tfor (i = 0; i < length; ++i) {\r\n\t\t\t\tctx.fillText(footer[i], rtlHelper.x(pt.x), pt.y + footerFontSize / 2);\r\n\t\t\t\tpt.y += footerFontSize + vm.footerSpacing;\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\tdrawBackground: function(pt, vm, ctx, tooltipSize) {\r\n\t\tctx.fillStyle = vm.backgroundColor;\r\n\t\tctx.strokeStyle = vm.borderColor;\r\n\t\tctx.lineWidth = vm.borderWidth;\r\n\t\tvar xAlign = vm.xAlign;\r\n\t\tvar yAlign = vm.yAlign;\r\n\t\tvar x = pt.x;\r\n\t\tvar y = pt.y;\r\n\t\tvar width = tooltipSize.width;\r\n\t\tvar height = tooltipSize.height;\r\n\t\tvar radius = vm.cornerRadius;\r\n\r\n\t\tctx.beginPath();\r\n\t\tctx.moveTo(x + radius, y);\r\n\t\tif (yAlign === 'top') {\r\n\t\t\tthis.drawCaret(pt, tooltipSize);\r\n\t\t}\r\n\t\tctx.lineTo(x + width - radius, y);\r\n\t\tctx.quadraticCurveTo(x + width, y, x + width, y + radius);\r\n\t\tif (yAlign === 'center' && xAlign === 'right') {\r\n\t\t\tthis.drawCaret(pt, tooltipSize);\r\n\t\t}\r\n\t\tctx.lineTo(x + width, y + height - radius);\r\n\t\tctx.quadraticCurveTo(x + width, y + height, x + width - radius, y + height);\r\n\t\tif (yAlign === 'bottom') {\r\n\t\t\tthis.drawCaret(pt, tooltipSize);\r\n\t\t}\r\n\t\tctx.lineTo(x + radius, y + height);\r\n\t\tctx.quadraticCurveTo(x, y + height, x, y + height - radius);\r\n\t\tif (yAlign === 'center' && xAlign === 'left') {\r\n\t\t\tthis.drawCaret(pt, tooltipSize);\r\n\t\t}\r\n\t\tctx.lineTo(x, y + radius);\r\n\t\tctx.quadraticCurveTo(x, y, x + radius, y);\r\n\t\tctx.closePath();\r\n\r\n\t\tctx.fill();\r\n\r\n\t\tif (vm.borderWidth > 0) {\r\n\t\t\tctx.stroke();\r\n\t\t}\r\n\t},\r\n\r\n\tdraw: function() {\r\n\t\tvar ctx = this._chart.ctx;\r\n\t\tvar vm = this._view;\r\n\r\n\t\tif (vm.opacity === 0) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tvar tooltipSize = {\r\n\t\t\twidth: vm.width,\r\n\t\t\theight: vm.height\r\n\t\t};\r\n\t\tvar pt = {\r\n\t\t\tx: vm.x,\r\n\t\t\ty: vm.y\r\n\t\t};\r\n\r\n\t\t// IE11/Edge does not like very small opacities, so snap to 0\r\n\t\tvar opacity = Math.abs(vm.opacity < 1e-3) ? 0 : vm.opacity;\r\n\r\n\t\t// Truthy/falsey value for empty tooltip\r\n\t\tvar hasTooltipContent = vm.title.length || vm.beforeBody.length || vm.body.length || vm.afterBody.length || vm.footer.length;\r\n\r\n\t\tif (this._options.enabled && hasTooltipContent) {\r\n\t\t\tctx.save();\r\n\t\t\tctx.globalAlpha = opacity;\r\n\r\n\t\t\t// Draw Background\r\n\t\t\tthis.drawBackground(pt, vm, ctx, tooltipSize);\r\n\r\n\t\t\t// Draw Title, Body, and Footer\r\n\t\t\tpt.y += vm.yPadding;\r\n\r\n\t\t\thelpers$1.rtl.overrideTextDirection(ctx, vm.textDirection);\r\n\r\n\t\t\t// Titles\r\n\t\t\tthis.drawTitle(pt, vm, ctx);\r\n\r\n\t\t\t// Body\r\n\t\t\tthis.drawBody(pt, vm, ctx);\r\n\r\n\t\t\t// Footer\r\n\t\t\tthis.drawFooter(pt, vm, ctx);\r\n\r\n\t\t\thelpers$1.rtl.restoreTextDirection(ctx, vm.textDirection);\r\n\r\n\t\t\tctx.restore();\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t * Handle an event\r\n\t * @private\r\n\t * @param {IEvent} event - The event to handle\r\n\t * @returns {boolean} true if the tooltip changed\r\n\t */\r\n\thandleEvent: function(e) {\r\n\t\tvar me = this;\r\n\t\tvar options = me._options;\r\n\t\tvar changed = false;\r\n\r\n\t\tme._lastActive = me._lastActive || [];\r\n\r\n\t\t// Find Active Elements for tooltips\r\n\t\tif (e.type === 'mouseout') {\r\n\t\t\tme._active = [];\r\n\t\t} else {\r\n\t\t\tme._active = me._chart.getElementsAtEventForMode(e, options.mode, options);\r\n\t\t\tif (options.reverse) {\r\n\t\t\t\tme._active.reverse();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// Remember Last Actives\r\n\t\tchanged = !helpers$1.arrayEquals(me._active, me._lastActive);\r\n\r\n\t\t// Only handle target event on tooltip change\r\n\t\tif (changed) {\r\n\t\t\tme._lastActive = me._active;\r\n\r\n\t\t\tif (options.enabled || options.custom) {\r\n\t\t\t\tme._eventPosition = {\r\n\t\t\t\t\tx: e.x,\r\n\t\t\t\t\ty: e.y\r\n\t\t\t\t};\r\n\r\n\t\t\t\tme.update(true);\r\n\t\t\t\tme.pivot();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn changed;\r\n\t}\r\n});\r\n\r\n/**\r\n * @namespace Chart.Tooltip.positioners\r\n */\r\nvar positioners_1 = positioners;\r\n\r\nvar core_tooltip = exports$4;\ncore_tooltip.positioners = positioners_1;\n\nvar valueOrDefault$9 = helpers$1.valueOrDefault;\r\n\r\ncore_defaults._set('global', {\r\n\telements: {},\r\n\tevents: [\r\n\t\t'mousemove',\r\n\t\t'mouseout',\r\n\t\t'click',\r\n\t\t'touchstart',\r\n\t\t'touchmove'\r\n\t],\r\n\thover: {\r\n\t\tonHover: null,\r\n\t\tmode: 'nearest',\r\n\t\tintersect: true,\r\n\t\tanimationDuration: 400\r\n\t},\r\n\tonClick: null,\r\n\tmaintainAspectRatio: true,\r\n\tresponsive: true,\r\n\tresponsiveAnimationDuration: 0\r\n});\r\n\r\n/**\r\n * Recursively merge the given config objects representing the `scales` option\r\n * by incorporating scale defaults in `xAxes` and `yAxes` array items, then\r\n * returns a deep copy of the result, thus doesn't alter inputs.\r\n */\r\nfunction mergeScaleConfig(/* config objects ... */) {\r\n\treturn helpers$1.merge(Object.create(null), [].slice.call(arguments), {\r\n\t\tmerger: function(key, target, source, options) {\r\n\t\t\tif (key === 'xAxes' || key === 'yAxes') {\r\n\t\t\t\tvar slen = source[key].length;\r\n\t\t\t\tvar i, type, scale;\r\n\r\n\t\t\t\tif (!target[key]) {\r\n\t\t\t\t\ttarget[key] = [];\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfor (i = 0; i < slen; ++i) {\r\n\t\t\t\t\tscale = source[key][i];\r\n\t\t\t\t\ttype = valueOrDefault$9(scale.type, key === 'xAxes' ? 'category' : 'linear');\r\n\r\n\t\t\t\t\tif (i >= target[key].length) {\r\n\t\t\t\t\t\ttarget[key].push({});\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (!target[key][i].type || (scale.type && scale.type !== target[key][i].type)) {\r\n\t\t\t\t\t\t// new/untyped scale or type changed: let's apply the new defaults\r\n\t\t\t\t\t\t// then merge source scale to correctly overwrite the defaults.\r\n\t\t\t\t\t\thelpers$1.merge(target[key][i], [core_scaleService.getScaleDefaults(type), scale]);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t// scales type are the same\r\n\t\t\t\t\t\thelpers$1.merge(target[key][i], scale);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\thelpers$1._merger(key, target, source, options);\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n}\r\n\r\n/**\r\n * Recursively merge the given config objects as the root options by handling\r\n * default scale options for the `scales` and `scale` properties, then returns\r\n * a deep copy of the result, thus doesn't alter inputs.\r\n */\r\nfunction mergeConfig(/* config objects ... */) {\r\n\treturn helpers$1.merge(Object.create(null), [].slice.call(arguments), {\r\n\t\tmerger: function(key, target, source, options) {\r\n\t\t\tvar tval = target[key] || Object.create(null);\r\n\t\t\tvar sval = source[key];\r\n\r\n\t\t\tif (key === 'scales') {\r\n\t\t\t\t// scale config merging is complex. Add our own function here for that\r\n\t\t\t\ttarget[key] = mergeScaleConfig(tval, sval);\r\n\t\t\t} else if (key === 'scale') {\r\n\t\t\t\t// used in polar area & radar charts since there is only one scale\r\n\t\t\t\ttarget[key] = helpers$1.merge(tval, [core_scaleService.getScaleDefaults(sval.type), sval]);\r\n\t\t\t} else {\r\n\t\t\t\thelpers$1._merger(key, target, source, options);\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n}\r\n\r\nfunction initConfig(config) {\r\n\tconfig = config || Object.create(null);\r\n\r\n\t// Do NOT use mergeConfig for the data object because this method merges arrays\r\n\t// and so would change references to labels and datasets, preventing data updates.\r\n\tvar data = config.data = config.data || {};\r\n\tdata.datasets = data.datasets || [];\r\n\tdata.labels = data.labels || [];\r\n\r\n\tconfig.options = mergeConfig(\r\n\t\tcore_defaults.global,\r\n\t\tcore_defaults[config.type],\r\n\t\tconfig.options || {});\r\n\r\n\treturn config;\r\n}\r\n\r\nfunction updateConfig(chart) {\r\n\tvar newOptions = chart.options;\r\n\r\n\thelpers$1.each(chart.scales, function(scale) {\r\n\t\tcore_layouts.removeBox(chart, scale);\r\n\t});\r\n\r\n\tnewOptions = mergeConfig(\r\n\t\tcore_defaults.global,\r\n\t\tcore_defaults[chart.config.type],\r\n\t\tnewOptions);\r\n\r\n\tchart.options = chart.config.options = newOptions;\r\n\tchart.ensureScalesHaveIDs();\r\n\tchart.buildOrUpdateScales();\r\n\r\n\t// Tooltip\r\n\tchart.tooltip._options = newOptions.tooltips;\r\n\tchart.tooltip.initialize();\r\n}\r\n\r\nfunction nextAvailableScaleId(axesOpts, prefix, index) {\r\n\tvar id;\r\n\tvar hasId = function(obj) {\r\n\t\treturn obj.id === id;\r\n\t};\r\n\r\n\tdo {\r\n\t\tid = prefix + index++;\r\n\t} while (helpers$1.findIndex(axesOpts, hasId) >= 0);\r\n\r\n\treturn id;\r\n}\r\n\r\nfunction positionIsHorizontal(position) {\r\n\treturn position === 'top' || position === 'bottom';\r\n}\r\n\r\nfunction compare2Level(l1, l2) {\r\n\treturn function(a, b) {\r\n\t\treturn a[l1] === b[l1]\r\n\t\t\t? a[l2] - b[l2]\r\n\t\t\t: a[l1] - b[l1];\r\n\t};\r\n}\r\n\r\nvar Chart = function(item, config) {\r\n\tthis.construct(item, config);\r\n\treturn this;\r\n};\r\n\r\nhelpers$1.extend(Chart.prototype, /** @lends Chart */ {\r\n\t/**\r\n\t * @private\r\n\t */\r\n\tconstruct: function(item, config) {\r\n\t\tvar me = this;\r\n\r\n\t\tconfig = initConfig(config);\r\n\r\n\t\tvar context = platform.acquireContext(item, config);\r\n\t\tvar canvas = context && context.canvas;\r\n\t\tvar height = canvas && canvas.height;\r\n\t\tvar width = canvas && canvas.width;\r\n\r\n\t\tme.id = helpers$1.uid();\r\n\t\tme.ctx = context;\r\n\t\tme.canvas = canvas;\r\n\t\tme.config = config;\r\n\t\tme.width = width;\r\n\t\tme.height = height;\r\n\t\tme.aspectRatio = height ? width / height : null;\r\n\t\tme.options = config.options;\r\n\t\tme._bufferedRender = false;\r\n\t\tme._layers = [];\r\n\r\n\t\t/**\r\n\t\t * Provided for backward compatibility, Chart and Chart.Controller have been merged,\r\n\t\t * the \"instance\" still need to be defined since it might be called from plugins.\r\n\t\t * @prop Chart#chart\r\n\t\t * @deprecated since version 2.6.0\r\n\t\t * @todo remove at version 3\r\n\t\t * @private\r\n\t\t */\r\n\t\tme.chart = me;\r\n\t\tme.controller = me; // chart.chart.controller #inception\r\n\r\n\t\t// Add the chart instance to the global namespace\r\n\t\tChart.instances[me.id] = me;\r\n\r\n\t\t// Define alias to the config data: `chart.data === chart.config.data`\r\n\t\tObject.defineProperty(me, 'data', {\r\n\t\t\tget: function() {\r\n\t\t\t\treturn me.config.data;\r\n\t\t\t},\r\n\t\t\tset: function(value) {\r\n\t\t\t\tme.config.data = value;\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tif (!context || !canvas) {\r\n\t\t\t// The given item is not a compatible context2d element, let's return before finalizing\r\n\t\t\t// the chart initialization but after setting basic chart / controller properties that\r\n\t\t\t// can help to figure out that the chart is not valid (e.g chart.canvas !== null);\r\n\t\t\t// https://github.com/chartjs/Chart.js/issues/2807\r\n\t\t\tconsole.error(\"Failed to create chart: can't acquire context from the given item\");\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tme.initialize();\r\n\t\tme.update();\r\n\t},\r\n\r\n\t/**\r\n\t * @private\r\n\t */\r\n\tinitialize: function() {\r\n\t\tvar me = this;\r\n\r\n\t\t// Before init plugin notification\r\n\t\tcore_plugins.notify(me, 'beforeInit');\r\n\r\n\t\thelpers$1.retinaScale(me, me.options.devicePixelRatio);\r\n\r\n\t\tme.bindEvents();\r\n\r\n\t\tif (me.options.responsive) {\r\n\t\t\t// Initial resize before chart draws (must be silent to preserve initial animations).\r\n\t\t\tme.resize(true);\r\n\t\t}\r\n\r\n\t\tme.initToolTip();\r\n\r\n\t\t// After init plugin notification\r\n\t\tcore_plugins.notify(me, 'afterInit');\r\n\r\n\t\treturn me;\r\n\t},\r\n\r\n\tclear: function() {\r\n\t\thelpers$1.canvas.clear(this);\r\n\t\treturn this;\r\n\t},\r\n\r\n\tstop: function() {\r\n\t\t// Stops any current animation loop occurring\r\n\t\tcore_animations.cancelAnimation(this);\r\n\t\treturn this;\r\n\t},\r\n\r\n\tresize: function(silent) {\r\n\t\tvar me = this;\r\n\t\tvar options = me.options;\r\n\t\tvar canvas = me.canvas;\r\n\t\tvar aspectRatio = (options.maintainAspectRatio && me.aspectRatio) || null;\r\n\r\n\t\t// the canvas render width and height will be casted to integers so make sure that\r\n\t\t// the canvas display style uses the same integer values to avoid blurring effect.\r\n\r\n\t\t// Set to 0 instead of canvas.size because the size defaults to 300x150 if the element is collapsed\r\n\t\tvar newWidth = Math.max(0, Math.floor(helpers$1.getMaximumWidth(canvas)));\r\n\t\tvar newHeight = Math.max(0, Math.floor(aspectRatio ? newWidth / aspectRatio : helpers$1.getMaximumHeight(canvas)));\r\n\r\n\t\tif (me.width === newWidth && me.height === newHeight) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tcanvas.width = me.width = newWidth;\r\n\t\tcanvas.height = me.height = newHeight;\r\n\t\tcanvas.style.width = newWidth + 'px';\r\n\t\tcanvas.style.height = newHeight + 'px';\r\n\r\n\t\thelpers$1.retinaScale(me, options.devicePixelRatio);\r\n\r\n\t\tif (!silent) {\r\n\t\t\t// Notify any plugins about the resize\r\n\t\t\tvar newSize = {width: newWidth, height: newHeight};\r\n\t\t\tcore_plugins.notify(me, 'resize', [newSize]);\r\n\r\n\t\t\t// Notify of resize\r\n\t\t\tif (options.onResize) {\r\n\t\t\t\toptions.onResize(me, newSize);\r\n\t\t\t}\r\n\r\n\t\t\tme.stop();\r\n\t\t\tme.update({\r\n\t\t\t\tduration: options.responsiveAnimationDuration\r\n\t\t\t});\r\n\t\t}\r\n\t},\r\n\r\n\tensureScalesHaveIDs: function() {\r\n\t\tvar options = this.options;\r\n\t\tvar scalesOptions = options.scales || {};\r\n\t\tvar scaleOptions = options.scale;\r\n\r\n\t\thelpers$1.each(scalesOptions.xAxes, function(xAxisOptions, index) {\r\n\t\t\tif (!xAxisOptions.id) {\r\n\t\t\t\txAxisOptions.id = nextAvailableScaleId(scalesOptions.xAxes, 'x-axis-', index);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\thelpers$1.each(scalesOptions.yAxes, function(yAxisOptions, index) {\r\n\t\t\tif (!yAxisOptions.id) {\r\n\t\t\t\tyAxisOptions.id = nextAvailableScaleId(scalesOptions.yAxes, 'y-axis-', index);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tif (scaleOptions) {\r\n\t\t\tscaleOptions.id = scaleOptions.id || 'scale';\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t * Builds a map of scale ID to scale object for future lookup.\r\n\t */\r\n\tbuildOrUpdateScales: function() {\r\n\t\tvar me = this;\r\n\t\tvar options = me.options;\r\n\t\tvar scales = me.scales || {};\r\n\t\tvar items = [];\r\n\t\tvar updated = Object.keys(scales).reduce(function(obj, id) {\r\n\t\t\tobj[id] = false;\r\n\t\t\treturn obj;\r\n\t\t}, {});\r\n\r\n\t\tif (options.scales) {\r\n\t\t\titems = items.concat(\r\n\t\t\t\t(options.scales.xAxes || []).map(function(xAxisOptions) {\r\n\t\t\t\t\treturn {options: xAxisOptions, dtype: 'category', dposition: 'bottom'};\r\n\t\t\t\t}),\r\n\t\t\t\t(options.scales.yAxes || []).map(function(yAxisOptions) {\r\n\t\t\t\t\treturn {options: yAxisOptions, dtype: 'linear', dposition: 'left'};\r\n\t\t\t\t})\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t\tif (options.scale) {\r\n\t\t\titems.push({\r\n\t\t\t\toptions: options.scale,\r\n\t\t\t\tdtype: 'radialLinear',\r\n\t\t\t\tisDefault: true,\r\n\t\t\t\tdposition: 'chartArea'\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\thelpers$1.each(items, function(item) {\r\n\t\t\tvar scaleOptions = item.options;\r\n\t\t\tvar id = scaleOptions.id;\r\n\t\t\tvar scaleType = valueOrDefault$9(scaleOptions.type, item.dtype);\r\n\r\n\t\t\tif (positionIsHorizontal(scaleOptions.position) !== positionIsHorizontal(item.dposition)) {\r\n\t\t\t\tscaleOptions.position = item.dposition;\r\n\t\t\t}\r\n\r\n\t\t\tupdated[id] = true;\r\n\t\t\tvar scale = null;\r\n\t\t\tif (id in scales && scales[id].type === scaleType) {\r\n\t\t\t\tscale = scales[id];\r\n\t\t\t\tscale.options = scaleOptions;\r\n\t\t\t\tscale.ctx = me.ctx;\r\n\t\t\t\tscale.chart = me;\r\n\t\t\t} else {\r\n\t\t\t\tvar scaleClass = core_scaleService.getScaleConstructor(scaleType);\r\n\t\t\t\tif (!scaleClass) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tscale = new scaleClass({\r\n\t\t\t\t\tid: id,\r\n\t\t\t\t\ttype: scaleType,\r\n\t\t\t\t\toptions: scaleOptions,\r\n\t\t\t\t\tctx: me.ctx,\r\n\t\t\t\t\tchart: me\r\n\t\t\t\t});\r\n\t\t\t\tscales[scale.id] = scale;\r\n\t\t\t}\r\n\r\n\t\t\tscale.mergeTicksOptions();\r\n\r\n\t\t\t// TODO(SB): I think we should be able to remove this custom case (options.scale)\r\n\t\t\t// and consider it as a regular scale part of the \"scales\"\" map only! This would\r\n\t\t\t// make the logic easier and remove some useless? custom code.\r\n\t\t\tif (item.isDefault) {\r\n\t\t\t\tme.scale = scale;\r\n\t\t\t}\r\n\t\t});\r\n\t\t// clear up discarded scales\r\n\t\thelpers$1.each(updated, function(hasUpdated, id) {\r\n\t\t\tif (!hasUpdated) {\r\n\t\t\t\tdelete scales[id];\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tme.scales = scales;\r\n\r\n\t\tcore_scaleService.addScalesToLayout(this);\r\n\t},\r\n\r\n\tbuildOrUpdateControllers: function() {\r\n\t\tvar me = this;\r\n\t\tvar newControllers = [];\r\n\t\tvar datasets = me.data.datasets;\r\n\t\tvar i, ilen;\r\n\r\n\t\tfor (i = 0, ilen = datasets.length; i < ilen; i++) {\r\n\t\t\tvar dataset = datasets[i];\r\n\t\t\tvar meta = me.getDatasetMeta(i);\r\n\t\t\tvar type = dataset.type || me.config.type;\r\n\r\n\t\t\tif (meta.type && meta.type !== type) {\r\n\t\t\t\tme.destroyDatasetMeta(i);\r\n\t\t\t\tmeta = me.getDatasetMeta(i);\r\n\t\t\t}\r\n\t\t\tmeta.type = type;\r\n\t\t\tmeta.order = dataset.order || 0;\r\n\t\t\tmeta.index = i;\r\n\r\n\t\t\tif (meta.controller) {\r\n\t\t\t\tmeta.controller.updateIndex(i);\r\n\t\t\t\tmeta.controller.linkScales();\r\n\t\t\t} else {\r\n\t\t\t\tvar ControllerClass = controllers[meta.type];\r\n\t\t\t\tif (ControllerClass === undefined) {\r\n\t\t\t\t\tthrow new Error('\"' + meta.type + '\" is not a chart type.');\r\n\t\t\t\t}\r\n\r\n\t\t\t\tmeta.controller = new ControllerClass(me, i);\r\n\t\t\t\tnewControllers.push(meta.controller);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn newControllers;\r\n\t},\r\n\r\n\t/**\r\n\t * Reset the elements of all datasets\r\n\t * @private\r\n\t */\r\n\tresetElements: function() {\r\n\t\tvar me = this;\r\n\t\thelpers$1.each(me.data.datasets, function(dataset, datasetIndex) {\r\n\t\t\tme.getDatasetMeta(datasetIndex).controller.reset();\r\n\t\t}, me);\r\n\t},\r\n\r\n\t/**\r\n\t* Resets the chart back to it's state before the initial animation\r\n\t*/\r\n\treset: function() {\r\n\t\tthis.resetElements();\r\n\t\tthis.tooltip.initialize();\r\n\t},\r\n\r\n\tupdate: function(config) {\r\n\t\tvar me = this;\r\n\t\tvar i, ilen;\r\n\r\n\t\tif (!config || typeof config !== 'object') {\r\n\t\t\t// backwards compatibility\r\n\t\t\tconfig = {\r\n\t\t\t\tduration: config,\r\n\t\t\t\tlazy: arguments[1]\r\n\t\t\t};\r\n\t\t}\r\n\r\n\t\tupdateConfig(me);\r\n\r\n\t\t// plugins options references might have change, let's invalidate the cache\r\n\t\t// https://github.com/chartjs/Chart.js/issues/5111#issuecomment-355934167\r\n\t\tcore_plugins._invalidate(me);\r\n\r\n\t\tif (core_plugins.notify(me, 'beforeUpdate') === false) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t// In case the entire data object changed\r\n\t\tme.tooltip._data = me.data;\r\n\r\n\t\t// Make sure dataset controllers are updated and new controllers are reset\r\n\t\tvar newControllers = me.buildOrUpdateControllers();\r\n\r\n\t\t// Make sure all dataset controllers have correct meta data counts\r\n\t\tfor (i = 0, ilen = me.data.datasets.length; i < ilen; i++) {\r\n\t\t\tme.getDatasetMeta(i).controller.buildOrUpdateElements();\r\n\t\t}\r\n\r\n\t\tme.updateLayout();\r\n\r\n\t\t// Can only reset the new controllers after the scales have been updated\r\n\t\tif (me.options.animation && me.options.animation.duration) {\r\n\t\t\thelpers$1.each(newControllers, function(controller) {\r\n\t\t\t\tcontroller.reset();\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tme.updateDatasets();\r\n\r\n\t\t// Need to reset tooltip in case it is displayed with elements that are removed\r\n\t\t// after update.\r\n\t\tme.tooltip.initialize();\r\n\r\n\t\t// Last active contains items that were previously in the tooltip.\r\n\t\t// When we reset the tooltip, we need to clear it\r\n\t\tme.lastActive = [];\r\n\r\n\t\t// Do this before render so that any plugins that need final scale updates can use it\r\n\t\tcore_plugins.notify(me, 'afterUpdate');\r\n\r\n\t\tme._layers.sort(compare2Level('z', '_idx'));\r\n\r\n\t\tif (me._bufferedRender) {\r\n\t\t\tme._bufferedRequest = {\r\n\t\t\t\tduration: config.duration,\r\n\t\t\t\teasing: config.easing,\r\n\t\t\t\tlazy: config.lazy\r\n\t\t\t};\r\n\t\t} else {\r\n\t\t\tme.render(config);\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t * Updates the chart layout unless a plugin returns `false` to the `beforeLayout`\r\n\t * hook, in which case, plugins will not be called on `afterLayout`.\r\n\t * @private\r\n\t */\r\n\tupdateLayout: function() {\r\n\t\tvar me = this;\r\n\r\n\t\tif (core_plugins.notify(me, 'beforeLayout') === false) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tcore_layouts.update(this, this.width, this.height);\r\n\r\n\t\tme._layers = [];\r\n\t\thelpers$1.each(me.boxes, function(box) {\r\n\t\t\t// _configure is called twice, once in core.scale.update and once here.\r\n\t\t\t// Here the boxes are fully updated and at their final positions.\r\n\t\t\tif (box._configure) {\r\n\t\t\t\tbox._configure();\r\n\t\t\t}\r\n\t\t\tme._layers.push.apply(me._layers, box._layers());\r\n\t\t}, me);\r\n\r\n\t\tme._layers.forEach(function(item, index) {\r\n\t\t\titem._idx = index;\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t * Provided for backward compatibility, use `afterLayout` instead.\r\n\t\t * @method IPlugin#afterScaleUpdate\r\n\t\t * @deprecated since version 2.5.0\r\n\t\t * @todo remove at version 3\r\n\t\t * @private\r\n\t\t */\r\n\t\tcore_plugins.notify(me, 'afterScaleUpdate');\r\n\t\tcore_plugins.notify(me, 'afterLayout');\r\n\t},\r\n\r\n\t/**\r\n\t * Updates all datasets unless a plugin returns `false` to the `beforeDatasetsUpdate`\r\n\t * hook, in which case, plugins will not be called on `afterDatasetsUpdate`.\r\n\t * @private\r\n\t */\r\n\tupdateDatasets: function() {\r\n\t\tvar me = this;\r\n\r\n\t\tif (core_plugins.notify(me, 'beforeDatasetsUpdate') === false) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tfor (var i = 0, ilen = me.data.datasets.length; i < ilen; ++i) {\r\n\t\t\tme.updateDataset(i);\r\n\t\t}\r\n\r\n\t\tcore_plugins.notify(me, 'afterDatasetsUpdate');\r\n\t},\r\n\r\n\t/**\r\n\t * Updates dataset at index unless a plugin returns `false` to the `beforeDatasetUpdate`\r\n\t * hook, in which case, plugins will not be called on `afterDatasetUpdate`.\r\n\t * @private\r\n\t */\r\n\tupdateDataset: function(index) {\r\n\t\tvar me = this;\r\n\t\tvar meta = me.getDatasetMeta(index);\r\n\t\tvar args = {\r\n\t\t\tmeta: meta,\r\n\t\t\tindex: index\r\n\t\t};\r\n\r\n\t\tif (core_plugins.notify(me, 'beforeDatasetUpdate', [args]) === false) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tmeta.controller._update();\r\n\r\n\t\tcore_plugins.notify(me, 'afterDatasetUpdate', [args]);\r\n\t},\r\n\r\n\trender: function(config) {\r\n\t\tvar me = this;\r\n\r\n\t\tif (!config || typeof config !== 'object') {\r\n\t\t\t// backwards compatibility\r\n\t\t\tconfig = {\r\n\t\t\t\tduration: config,\r\n\t\t\t\tlazy: arguments[1]\r\n\t\t\t};\r\n\t\t}\r\n\r\n\t\tvar animationOptions = me.options.animation;\r\n\t\tvar duration = valueOrDefault$9(config.duration, animationOptions && animationOptions.duration);\r\n\t\tvar lazy = config.lazy;\r\n\r\n\t\tif (core_plugins.notify(me, 'beforeRender') === false) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tvar onComplete = function(animation) {\r\n\t\t\tcore_plugins.notify(me, 'afterRender');\r\n\t\t\thelpers$1.callback(animationOptions && animationOptions.onComplete, [animation], me);\r\n\t\t};\r\n\r\n\t\tif (animationOptions && duration) {\r\n\t\t\tvar animation = new core_animation({\r\n\t\t\t\tnumSteps: duration / 16.66, // 60 fps\r\n\t\t\t\teasing: config.easing || animationOptions.easing,\r\n\r\n\t\t\t\trender: function(chart, animationObject) {\r\n\t\t\t\t\tvar easingFunction = helpers$1.easing.effects[animationObject.easing];\r\n\t\t\t\t\tvar currentStep = animationObject.currentStep;\r\n\t\t\t\t\tvar stepDecimal = currentStep / animationObject.numSteps;\r\n\r\n\t\t\t\t\tchart.draw(easingFunction(stepDecimal), stepDecimal, currentStep);\r\n\t\t\t\t},\r\n\r\n\t\t\t\tonAnimationProgress: animationOptions.onProgress,\r\n\t\t\t\tonAnimationComplete: onComplete\r\n\t\t\t});\r\n\r\n\t\t\tcore_animations.addAnimation(me, animation, duration, lazy);\r\n\t\t} else {\r\n\t\t\tme.draw();\r\n\r\n\t\t\t// See https://github.com/chartjs/Chart.js/issues/3781\r\n\t\t\tonComplete(new core_animation({numSteps: 0, chart: me}));\r\n\t\t}\r\n\r\n\t\treturn me;\r\n\t},\r\n\r\n\tdraw: function(easingValue) {\r\n\t\tvar me = this;\r\n\t\tvar i, layers;\r\n\r\n\t\tme.clear();\r\n\r\n\t\tif (helpers$1.isNullOrUndef(easingValue)) {\r\n\t\t\teasingValue = 1;\r\n\t\t}\r\n\r\n\t\tme.transition(easingValue);\r\n\r\n\t\tif (me.width <= 0 || me.height <= 0) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif (core_plugins.notify(me, 'beforeDraw', [easingValue]) === false) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t// Because of plugin hooks (before/afterDatasetsDraw), datasets can't\r\n\t\t// currently be part of layers. Instead, we draw\r\n\t\t// layers <= 0 before(default, backward compat), and the rest after\r\n\t\tlayers = me._layers;\r\n\t\tfor (i = 0; i < layers.length && layers[i].z <= 0; ++i) {\r\n\t\t\tlayers[i].draw(me.chartArea);\r\n\t\t}\r\n\r\n\t\tme.drawDatasets(easingValue);\r\n\r\n\t\t// Rest of layers\r\n\t\tfor (; i < layers.length; ++i) {\r\n\t\t\tlayers[i].draw(me.chartArea);\r\n\t\t}\r\n\r\n\t\tme._drawTooltip(easingValue);\r\n\r\n\t\tcore_plugins.notify(me, 'afterDraw', [easingValue]);\r\n\t},\r\n\r\n\t/**\r\n\t * @private\r\n\t */\r\n\ttransition: function(easingValue) {\r\n\t\tvar me = this;\r\n\r\n\t\tfor (var i = 0, ilen = (me.data.datasets || []).length; i < ilen; ++i) {\r\n\t\t\tif (me.isDatasetVisible(i)) {\r\n\t\t\t\tme.getDatasetMeta(i).controller.transition(easingValue);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tme.tooltip.transition(easingValue);\r\n\t},\r\n\r\n\t/**\r\n\t * @private\r\n\t */\r\n\t_getSortedDatasetMetas: function(filterVisible) {\r\n\t\tvar me = this;\r\n\t\tvar datasets = me.data.datasets || [];\r\n\t\tvar result = [];\r\n\t\tvar i, ilen;\r\n\r\n\t\tfor (i = 0, ilen = datasets.length; i < ilen; ++i) {\r\n\t\t\tif (!filterVisible || me.isDatasetVisible(i)) {\r\n\t\t\t\tresult.push(me.getDatasetMeta(i));\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tresult.sort(compare2Level('order', 'index'));\r\n\r\n\t\treturn result;\r\n\t},\r\n\r\n\t/**\r\n\t * @private\r\n\t */\r\n\t_getSortedVisibleDatasetMetas: function() {\r\n\t\treturn this._getSortedDatasetMetas(true);\r\n\t},\r\n\r\n\t/**\r\n\t * Draws all datasets unless a plugin returns `false` to the `beforeDatasetsDraw`\r\n\t * hook, in which case, plugins will not be called on `afterDatasetsDraw`.\r\n\t * @private\r\n\t */\r\n\tdrawDatasets: function(easingValue) {\r\n\t\tvar me = this;\r\n\t\tvar metasets, i;\r\n\r\n\t\tif (core_plugins.notify(me, 'beforeDatasetsDraw', [easingValue]) === false) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tmetasets = me._getSortedVisibleDatasetMetas();\r\n\t\tfor (i = metasets.length - 1; i >= 0; --i) {\r\n\t\t\tme.drawDataset(metasets[i], easingValue);\r\n\t\t}\r\n\r\n\t\tcore_plugins.notify(me, 'afterDatasetsDraw', [easingValue]);\r\n\t},\r\n\r\n\t/**\r\n\t * Draws dataset at index unless a plugin returns `false` to the `beforeDatasetDraw`\r\n\t * hook, in which case, plugins will not be called on `afterDatasetDraw`.\r\n\t * @private\r\n\t */\r\n\tdrawDataset: function(meta, easingValue) {\r\n\t\tvar me = this;\r\n\t\tvar args = {\r\n\t\t\tmeta: meta,\r\n\t\t\tindex: meta.index,\r\n\t\t\teasingValue: easingValue\r\n\t\t};\r\n\r\n\t\tif (core_plugins.notify(me, 'beforeDatasetDraw', [args]) === false) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tmeta.controller.draw(easingValue);\r\n\r\n\t\tcore_plugins.notify(me, 'afterDatasetDraw', [args]);\r\n\t},\r\n\r\n\t/**\r\n\t * Draws tooltip unless a plugin returns `false` to the `beforeTooltipDraw`\r\n\t * hook, in which case, plugins will not be called on `afterTooltipDraw`.\r\n\t * @private\r\n\t */\r\n\t_drawTooltip: function(easingValue) {\r\n\t\tvar me = this;\r\n\t\tvar tooltip = me.tooltip;\r\n\t\tvar args = {\r\n\t\t\ttooltip: tooltip,\r\n\t\t\teasingValue: easingValue\r\n\t\t};\r\n\r\n\t\tif (core_plugins.notify(me, 'beforeTooltipDraw', [args]) === false) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\ttooltip.draw();\r\n\r\n\t\tcore_plugins.notify(me, 'afterTooltipDraw', [args]);\r\n\t},\r\n\r\n\t/**\r\n\t * Get the single element that was clicked on\r\n\t * @return An object containing the dataset index and element index of the matching element. Also contains the rectangle that was draw\r\n\t */\r\n\tgetElementAtEvent: function(e) {\r\n\t\treturn core_interaction.modes.single(this, e);\r\n\t},\r\n\r\n\tgetElementsAtEvent: function(e) {\r\n\t\treturn core_interaction.modes.label(this, e, {intersect: true});\r\n\t},\r\n\r\n\tgetElementsAtXAxis: function(e) {\r\n\t\treturn core_interaction.modes['x-axis'](this, e, {intersect: true});\r\n\t},\r\n\r\n\tgetElementsAtEventForMode: function(e, mode, options) {\r\n\t\tvar method = core_interaction.modes[mode];\r\n\t\tif (typeof method === 'function') {\r\n\t\t\treturn method(this, e, options);\r\n\t\t}\r\n\r\n\t\treturn [];\r\n\t},\r\n\r\n\tgetDatasetAtEvent: function(e) {\r\n\t\treturn core_interaction.modes.dataset(this, e, {intersect: true});\r\n\t},\r\n\r\n\tgetDatasetMeta: function(datasetIndex) {\r\n\t\tvar me = this;\r\n\t\tvar dataset = me.data.datasets[datasetIndex];\r\n\t\tif (!dataset._meta) {\r\n\t\t\tdataset._meta = {};\r\n\t\t}\r\n\r\n\t\tvar meta = dataset._meta[me.id];\r\n\t\tif (!meta) {\r\n\t\t\tmeta = dataset._meta[me.id] = {\r\n\t\t\t\ttype: null,\r\n\t\t\t\tdata: [],\r\n\t\t\t\tdataset: null,\r\n\t\t\t\tcontroller: null,\r\n\t\t\t\thidden: null,\t\t\t// See isDatasetVisible() comment\r\n\t\t\t\txAxisID: null,\r\n\t\t\t\tyAxisID: null,\r\n\t\t\t\torder: dataset.order || 0,\r\n\t\t\t\tindex: datasetIndex\r\n\t\t\t};\r\n\t\t}\r\n\r\n\t\treturn meta;\r\n\t},\r\n\r\n\tgetVisibleDatasetCount: function() {\r\n\t\tvar count = 0;\r\n\t\tfor (var i = 0, ilen = this.data.datasets.length; i < ilen; ++i) {\r\n\t\t\tif (this.isDatasetVisible(i)) {\r\n\t\t\t\tcount++;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn count;\r\n\t},\r\n\r\n\tisDatasetVisible: function(datasetIndex) {\r\n\t\tvar meta = this.getDatasetMeta(datasetIndex);\r\n\r\n\t\t// meta.hidden is a per chart dataset hidden flag override with 3 states: if true or false,\r\n\t\t// the dataset.hidden value is ignored, else if null, the dataset hidden state is returned.\r\n\t\treturn typeof meta.hidden === 'boolean' ? !meta.hidden : !this.data.datasets[datasetIndex].hidden;\r\n\t},\r\n\r\n\tgenerateLegend: function() {\r\n\t\treturn this.options.legendCallback(this);\r\n\t},\r\n\r\n\t/**\r\n\t * @private\r\n\t */\r\n\tdestroyDatasetMeta: function(datasetIndex) {\r\n\t\tvar id = this.id;\r\n\t\tvar dataset = this.data.datasets[datasetIndex];\r\n\t\tvar meta = dataset._meta && dataset._meta[id];\r\n\r\n\t\tif (meta) {\r\n\t\t\tmeta.controller.destroy();\r\n\t\t\tdelete dataset._meta[id];\r\n\t\t}\r\n\t},\r\n\r\n\tdestroy: function() {\r\n\t\tvar me = this;\r\n\t\tvar canvas = me.canvas;\r\n\t\tvar i, ilen;\r\n\r\n\t\tme.stop();\r\n\r\n\t\t// dataset controllers need to cleanup associated data\r\n\t\tfor (i = 0, ilen = me.data.datasets.length; i < ilen; ++i) {\r\n\t\t\tme.destroyDatasetMeta(i);\r\n\t\t}\r\n\r\n\t\tif (canvas) {\r\n\t\t\tme.unbindEvents();\r\n\t\t\thelpers$1.canvas.clear(me);\r\n\t\t\tplatform.releaseContext(me.ctx);\r\n\t\t\tme.canvas = null;\r\n\t\t\tme.ctx = null;\r\n\t\t}\r\n\r\n\t\tcore_plugins.notify(me, 'destroy');\r\n\r\n\t\tdelete Chart.instances[me.id];\r\n\t},\r\n\r\n\ttoBase64Image: function() {\r\n\t\treturn this.canvas.toDataURL.apply(this.canvas, arguments);\r\n\t},\r\n\r\n\tinitToolTip: function() {\r\n\t\tvar me = this;\r\n\t\tme.tooltip = new core_tooltip({\r\n\t\t\t_chart: me,\r\n\t\t\t_chartInstance: me, // deprecated, backward compatibility\r\n\t\t\t_data: me.data,\r\n\t\t\t_options: me.options.tooltips\r\n\t\t}, me);\r\n\t},\r\n\r\n\t/**\r\n\t * @private\r\n\t */\r\n\tbindEvents: function() {\r\n\t\tvar me = this;\r\n\t\tvar listeners = me._listeners = {};\r\n\t\tvar listener = function() {\r\n\t\t\tme.eventHandler.apply(me, arguments);\r\n\t\t};\r\n\r\n\t\thelpers$1.each(me.options.events, function(type) {\r\n\t\t\tplatform.addEventListener(me, type, listener);\r\n\t\t\tlisteners[type] = listener;\r\n\t\t});\r\n\r\n\t\t// Elements used to detect size change should not be injected for non responsive charts.\r\n\t\t// See https://github.com/chartjs/Chart.js/issues/2210\r\n\t\tif (me.options.responsive) {\r\n\t\t\tlistener = function() {\r\n\t\t\t\tme.resize();\r\n\t\t\t};\r\n\r\n\t\t\tplatform.addEventListener(me, 'resize', listener);\r\n\t\t\tlisteners.resize = listener;\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t * @private\r\n\t */\r\n\tunbindEvents: function() {\r\n\t\tvar me = this;\r\n\t\tvar listeners = me._listeners;\r\n\t\tif (!listeners) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tdelete me._listeners;\r\n\t\thelpers$1.each(listeners, function(listener, type) {\r\n\t\t\tplatform.removeEventListener(me, type, listener);\r\n\t\t});\r\n\t},\r\n\r\n\tupdateHoverStyle: function(elements, mode, enabled) {\r\n\t\tvar prefix = enabled ? 'set' : 'remove';\r\n\t\tvar element, i, ilen;\r\n\r\n\t\tfor (i = 0, ilen = elements.length; i < ilen; ++i) {\r\n\t\t\telement = elements[i];\r\n\t\t\tif (element) {\r\n\t\t\t\tthis.getDatasetMeta(element._datasetIndex).controller[prefix + 'HoverStyle'](element);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (mode === 'dataset') {\r\n\t\t\tthis.getDatasetMeta(elements[0]._datasetIndex).controller['_' + prefix + 'DatasetHoverStyle']();\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t * @private\r\n\t */\r\n\teventHandler: function(e) {\r\n\t\tvar me = this;\r\n\t\tvar tooltip = me.tooltip;\r\n\r\n\t\tif (core_plugins.notify(me, 'beforeEvent', [e]) === false) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t// Buffer any update calls so that renders do not occur\r\n\t\tme._bufferedRender = true;\r\n\t\tme._bufferedRequest = null;\r\n\r\n\t\tvar changed = me.handleEvent(e);\r\n\t\t// for smooth tooltip animations issue #4989\r\n\t\t// the tooltip should be the source of change\r\n\t\t// Animation check workaround:\r\n\t\t// tooltip._start will be null when tooltip isn't animating\r\n\t\tif (tooltip) {\r\n\t\t\tchanged = tooltip._start\r\n\t\t\t\t? tooltip.handleEvent(e)\r\n\t\t\t\t: changed | tooltip.handleEvent(e);\r\n\t\t}\r\n\r\n\t\tcore_plugins.notify(me, 'afterEvent', [e]);\r\n\r\n\t\tvar bufferedRequest = me._bufferedRequest;\r\n\t\tif (bufferedRequest) {\r\n\t\t\t// If we have an update that was triggered, we need to do a normal render\r\n\t\t\tme.render(bufferedRequest);\r\n\t\t} else if (changed && !me.animating) {\r\n\t\t\t// If entering, leaving, or changing elements, animate the change via pivot\r\n\t\t\tme.stop();\r\n\r\n\t\t\t// We only need to render at this point. Updating will cause scales to be\r\n\t\t\t// recomputed generating flicker & using more memory than necessary.\r\n\t\t\tme.render({\r\n\t\t\t\tduration: me.options.hover.animationDuration,\r\n\t\t\t\tlazy: true\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tme._bufferedRender = false;\r\n\t\tme._bufferedRequest = null;\r\n\r\n\t\treturn me;\r\n\t},\r\n\r\n\t/**\r\n\t * Handle an event\r\n\t * @private\r\n\t * @param {IEvent} event the event to handle\r\n\t * @return {boolean} true if the chart needs to re-render\r\n\t */\r\n\thandleEvent: function(e) {\r\n\t\tvar me = this;\r\n\t\tvar options = me.options || {};\r\n\t\tvar hoverOptions = options.hover;\r\n\t\tvar changed = false;\r\n\r\n\t\tme.lastActive = me.lastActive || [];\r\n\r\n\t\t// Find Active Elements for hover and tooltips\r\n\t\tif (e.type === 'mouseout') {\r\n\t\t\tme.active = [];\r\n\t\t} else {\r\n\t\t\tme.active = me.getElementsAtEventForMode(e, hoverOptions.mode, hoverOptions);\r\n\t\t}\r\n\r\n\t\t// Invoke onHover hook\r\n\t\t// Need to call with native event here to not break backwards compatibility\r\n\t\thelpers$1.callback(options.onHover || options.hover.onHover, [e.native, me.active], me);\r\n\r\n\t\tif (e.type === 'mouseup' || e.type === 'click') {\r\n\t\t\tif (options.onClick) {\r\n\t\t\t\t// Use e.native here for backwards compatibility\r\n\t\t\t\toptions.onClick.call(me, e.native, me.active);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// Remove styling for last active (even if it may still be active)\r\n\t\tif (me.lastActive.length) {\r\n\t\t\tme.updateHoverStyle(me.lastActive, hoverOptions.mode, false);\r\n\t\t}\r\n\r\n\t\t// Built in hover styling\r\n\t\tif (me.active.length && hoverOptions.mode) {\r\n\t\t\tme.updateHoverStyle(me.active, hoverOptions.mode, true);\r\n\t\t}\r\n\r\n\t\tchanged = !helpers$1.arrayEquals(me.active, me.lastActive);\r\n\r\n\t\t// Remember Last Actives\r\n\t\tme.lastActive = me.active;\r\n\r\n\t\treturn changed;\r\n\t}\r\n});\r\n\r\n/**\r\n * NOTE(SB) We actually don't use this container anymore but we need to keep it\r\n * for backward compatibility. Though, it can still be useful for plugins that\r\n * would need to work on multiple charts?!\r\n */\r\nChart.instances = {};\r\n\r\nvar core_controller = Chart;\r\n\r\n// DEPRECATIONS\r\n\r\n/**\r\n * Provided for backward compatibility, use Chart instead.\r\n * @class Chart.Controller\r\n * @deprecated since version 2.6\r\n * @todo remove at version 3\r\n * @private\r\n */\r\nChart.Controller = Chart;\r\n\r\n/**\r\n * Provided for backward compatibility, not available anymore.\r\n * @namespace Chart\r\n * @deprecated since version 2.8\r\n * @todo remove at version 3\r\n * @private\r\n */\r\nChart.types = {};\r\n\r\n/**\r\n * Provided for backward compatibility, not available anymore.\r\n * @namespace Chart.helpers.configMerge\r\n * @deprecated since version 2.8.0\r\n * @todo remove at version 3\r\n * @private\r\n */\r\nhelpers$1.configMerge = mergeConfig;\r\n\r\n/**\r\n * Provided for backward compatibility, not available anymore.\r\n * @namespace Chart.helpers.scaleMerge\r\n * @deprecated since version 2.8.0\r\n * @todo remove at version 3\r\n * @private\r\n */\r\nhelpers$1.scaleMerge = mergeScaleConfig;\n\nvar core_helpers = function() {\r\n\r\n\t// -- Basic js utility methods\r\n\r\n\thelpers$1.where = function(collection, filterCallback) {\r\n\t\tif (helpers$1.isArray(collection) && Array.prototype.filter) {\r\n\t\t\treturn collection.filter(filterCallback);\r\n\t\t}\r\n\t\tvar filtered = [];\r\n\r\n\t\thelpers$1.each(collection, function(item) {\r\n\t\t\tif (filterCallback(item)) {\r\n\t\t\t\tfiltered.push(item);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\treturn filtered;\r\n\t};\r\n\thelpers$1.findIndex = Array.prototype.findIndex ?\r\n\t\tfunction(array, callback, scope) {\r\n\t\t\treturn array.findIndex(callback, scope);\r\n\t\t} :\r\n\t\tfunction(array, callback, scope) {\r\n\t\t\tscope = scope === undefined ? array : scope;\r\n\t\t\tfor (var i = 0, ilen = array.length; i < ilen; ++i) {\r\n\t\t\t\tif (callback.call(scope, array[i], i, array)) {\r\n\t\t\t\t\treturn i;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn -1;\r\n\t\t};\r\n\thelpers$1.findNextWhere = function(arrayToSearch, filterCallback, startIndex) {\r\n\t\t// Default to start of the array\r\n\t\tif (helpers$1.isNullOrUndef(startIndex)) {\r\n\t\t\tstartIndex = -1;\r\n\t\t}\r\n\t\tfor (var i = startIndex + 1; i < arrayToSearch.length; i++) {\r\n\t\t\tvar currentItem = arrayToSearch[i];\r\n\t\t\tif (filterCallback(currentItem)) {\r\n\t\t\t\treturn currentItem;\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\thelpers$1.findPreviousWhere = function(arrayToSearch, filterCallback, startIndex) {\r\n\t\t// Default to end of the array\r\n\t\tif (helpers$1.isNullOrUndef(startIndex)) {\r\n\t\t\tstartIndex = arrayToSearch.length;\r\n\t\t}\r\n\t\tfor (var i = startIndex - 1; i >= 0; i--) {\r\n\t\t\tvar currentItem = arrayToSearch[i];\r\n\t\t\tif (filterCallback(currentItem)) {\r\n\t\t\t\treturn currentItem;\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\t// -- Math methods\r\n\thelpers$1.isNumber = function(n) {\r\n\t\treturn !isNaN(parseFloat(n)) && isFinite(n);\r\n\t};\r\n\thelpers$1.almostEquals = function(x, y, epsilon) {\r\n\t\treturn Math.abs(x - y) < epsilon;\r\n\t};\r\n\thelpers$1.almostWhole = function(x, epsilon) {\r\n\t\tvar rounded = Math.round(x);\r\n\t\treturn ((rounded - epsilon) <= x) && ((rounded + epsilon) >= x);\r\n\t};\r\n\thelpers$1.max = function(array) {\r\n\t\treturn array.reduce(function(max, value) {\r\n\t\t\tif (!isNaN(value)) {\r\n\t\t\t\treturn Math.max(max, value);\r\n\t\t\t}\r\n\t\t\treturn max;\r\n\t\t}, Number.NEGATIVE_INFINITY);\r\n\t};\r\n\thelpers$1.min = function(array) {\r\n\t\treturn array.reduce(function(min, value) {\r\n\t\t\tif (!isNaN(value)) {\r\n\t\t\t\treturn Math.min(min, value);\r\n\t\t\t}\r\n\t\t\treturn min;\r\n\t\t}, Number.POSITIVE_INFINITY);\r\n\t};\r\n\thelpers$1.sign = Math.sign ?\r\n\t\tfunction(x) {\r\n\t\t\treturn Math.sign(x);\r\n\t\t} :\r\n\t\tfunction(x) {\r\n\t\t\tx = +x; // convert to a number\r\n\t\t\tif (x === 0 || isNaN(x)) {\r\n\t\t\t\treturn x;\r\n\t\t\t}\r\n\t\t\treturn x > 0 ? 1 : -1;\r\n\t\t};\r\n\thelpers$1.toRadians = function(degrees) {\r\n\t\treturn degrees * (Math.PI / 180);\r\n\t};\r\n\thelpers$1.toDegrees = function(radians) {\r\n\t\treturn radians * (180 / Math.PI);\r\n\t};\r\n\r\n\t/**\r\n\t * Returns the number of decimal places\r\n\t * i.e. the number of digits after the decimal point, of the value of this Number.\r\n\t * @param {number} x - A number.\r\n\t * @returns {number} The number of decimal places.\r\n\t * @private\r\n\t */\r\n\thelpers$1._decimalPlaces = function(x) {\r\n\t\tif (!helpers$1.isFinite(x)) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tvar e = 1;\r\n\t\tvar p = 0;\r\n\t\twhile (Math.round(x * e) / e !== x) {\r\n\t\t\te *= 10;\r\n\t\t\tp++;\r\n\t\t}\r\n\t\treturn p;\r\n\t};\r\n\r\n\t// Gets the angle from vertical upright to the point about a centre.\r\n\thelpers$1.getAngleFromPoint = function(centrePoint, anglePoint) {\r\n\t\tvar distanceFromXCenter = anglePoint.x - centrePoint.x;\r\n\t\tvar distanceFromYCenter = anglePoint.y - centrePoint.y;\r\n\t\tvar radialDistanceFromCenter = Math.sqrt(distanceFromXCenter * distanceFromXCenter + distanceFromYCenter * distanceFromYCenter);\r\n\r\n\t\tvar angle = Math.atan2(distanceFromYCenter, distanceFromXCenter);\r\n\r\n\t\tif (angle < (-0.5 * Math.PI)) {\r\n\t\t\tangle += 2.0 * Math.PI; // make sure the returned angle is in the range of (-PI/2, 3PI/2]\r\n\t\t}\r\n\r\n\t\treturn {\r\n\t\t\tangle: angle,\r\n\t\t\tdistance: radialDistanceFromCenter\r\n\t\t};\r\n\t};\r\n\thelpers$1.distanceBetweenPoints = function(pt1, pt2) {\r\n\t\treturn Math.sqrt(Math.pow(pt2.x - pt1.x, 2) + Math.pow(pt2.y - pt1.y, 2));\r\n\t};\r\n\r\n\t/**\r\n\t * Provided for backward compatibility, not available anymore\r\n\t * @function Chart.helpers.aliasPixel\r\n\t * @deprecated since version 2.8.0\r\n\t * @todo remove at version 3\r\n\t */\r\n\thelpers$1.aliasPixel = function(pixelWidth) {\r\n\t\treturn (pixelWidth % 2 === 0) ? 0 : 0.5;\r\n\t};\r\n\r\n\t/**\r\n\t * Returns the aligned pixel value to avoid anti-aliasing blur\r\n\t * @param {Chart} chart - The chart instance.\r\n\t * @param {number} pixel - A pixel value.\r\n\t * @param {number} width - The width of the element.\r\n\t * @returns {number} The aligned pixel value.\r\n\t * @private\r\n\t */\r\n\thelpers$1._alignPixel = function(chart, pixel, width) {\r\n\t\tvar devicePixelRatio = chart.currentDevicePixelRatio;\r\n\t\tvar halfWidth = width / 2;\r\n\t\treturn Math.round((pixel - halfWidth) * devicePixelRatio) / devicePixelRatio + halfWidth;\r\n\t};\r\n\r\n\thelpers$1.splineCurve = function(firstPoint, middlePoint, afterPoint, t) {\r\n\t\t// Props to Rob Spencer at scaled innovation for his post on splining between points\r\n\t\t// http://scaledinnovation.com/analytics/splines/aboutSplines.html\r\n\r\n\t\t// This function must also respect \"skipped\" points\r\n\r\n\t\tvar previous = firstPoint.skip ? middlePoint : firstPoint;\r\n\t\tvar current = middlePoint;\r\n\t\tvar next = afterPoint.skip ? middlePoint : afterPoint;\r\n\r\n\t\tvar d01 = Math.sqrt(Math.pow(current.x - previous.x, 2) + Math.pow(current.y - previous.y, 2));\r\n\t\tvar d12 = Math.sqrt(Math.pow(next.x - current.x, 2) + Math.pow(next.y - current.y, 2));\r\n\r\n\t\tvar s01 = d01 / (d01 + d12);\r\n\t\tvar s12 = d12 / (d01 + d12);\r\n\r\n\t\t// If all points are the same, s01 & s02 will be inf\r\n\t\ts01 = isNaN(s01) ? 0 : s01;\r\n\t\ts12 = isNaN(s12) ? 0 : s12;\r\n\r\n\t\tvar fa = t * s01; // scaling factor for triangle Ta\r\n\t\tvar fb = t * s12;\r\n\r\n\t\treturn {\r\n\t\t\tprevious: {\r\n\t\t\t\tx: current.x - fa * (next.x - previous.x),\r\n\t\t\t\ty: current.y - fa * (next.y - previous.y)\r\n\t\t\t},\r\n\t\t\tnext: {\r\n\t\t\t\tx: current.x + fb * (next.x - previous.x),\r\n\t\t\t\ty: current.y + fb * (next.y - previous.y)\r\n\t\t\t}\r\n\t\t};\r\n\t};\r\n\thelpers$1.EPSILON = Number.EPSILON || 1e-14;\r\n\thelpers$1.splineCurveMonotone = function(points) {\r\n\t\t// This function calculates Bzier control points in a similar way than |splineCurve|,\r\n\t\t// but preserves monotonicity of the provided data and ensures no local extremums are added\r\n\t\t// between the dataset discrete points due to the interpolation.\r\n\t\t// See : https://en.wikipedia.org/wiki/Monotone_cubic_interpolation\r\n\r\n\t\tvar pointsWithTangents = (points || []).map(function(point) {\r\n\t\t\treturn {\r\n\t\t\t\tmodel: point._model,\r\n\t\t\t\tdeltaK: 0,\r\n\t\t\t\tmK: 0\r\n\t\t\t};\r\n\t\t});\r\n\r\n\t\t// Calculate slopes (deltaK) and initialize tangents (mK)\r\n\t\tvar pointsLen = pointsWithTangents.length;\r\n\t\tvar i, pointBefore, pointCurrent, pointAfter;\r\n\t\tfor (i = 0; i < pointsLen; ++i) {\r\n\t\t\tpointCurrent = pointsWithTangents[i];\r\n\t\t\tif (pointCurrent.model.skip) {\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\r\n\t\t\tpointBefore = i > 0 ? pointsWithTangents[i - 1] : null;\r\n\t\t\tpointAfter = i < pointsLen - 1 ? pointsWithTangents[i + 1] : null;\r\n\t\t\tif (pointAfter && !pointAfter.model.skip) {\r\n\t\t\t\tvar slopeDeltaX = (pointAfter.model.x - pointCurrent.model.x);\r\n\r\n\t\t\t\t// In the case of two points that appear at the same x pixel, slopeDeltaX is 0\r\n\t\t\t\tpointCurrent.deltaK = slopeDeltaX !== 0 ? (pointAfter.model.y - pointCurrent.model.y) / slopeDeltaX : 0;\r\n\t\t\t}\r\n\r\n\t\t\tif (!pointBefore || pointBefore.model.skip) {\r\n\t\t\t\tpointCurrent.mK = pointCurrent.deltaK;\r\n\t\t\t} else if (!pointAfter || pointAfter.model.skip) {\r\n\t\t\t\tpointCurrent.mK = pointBefore.deltaK;\r\n\t\t\t} else if (this.sign(pointBefore.deltaK) !== this.sign(pointCurrent.deltaK)) {\r\n\t\t\t\tpointCurrent.mK = 0;\r\n\t\t\t} else {\r\n\t\t\t\tpointCurrent.mK = (pointBefore.deltaK + pointCurrent.deltaK) / 2;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// Adjust tangents to ensure monotonic properties\r\n\t\tvar alphaK, betaK, tauK, squaredMagnitude;\r\n\t\tfor (i = 0; i < pointsLen - 1; ++i) {\r\n\t\t\tpointCurrent = pointsWithTangents[i];\r\n\t\t\tpointAfter = pointsWithTangents[i + 1];\r\n\t\t\tif (pointCurrent.model.skip || pointAfter.model.skip) {\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\r\n\t\t\tif (helpers$1.almostEquals(pointCurrent.deltaK, 0, this.EPSILON)) {\r\n\t\t\t\tpointCurrent.mK = pointAfter.mK = 0;\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\r\n\t\t\talphaK = pointCurrent.mK / pointCurrent.deltaK;\r\n\t\t\tbetaK = pointAfter.mK / pointCurrent.deltaK;\r\n\t\t\tsquaredMagnitude = Math.pow(alphaK, 2) + Math.pow(betaK, 2);\r\n\t\t\tif (squaredMagnitude <= 9) {\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\r\n\t\t\ttauK = 3 / Math.sqrt(squaredMagnitude);\r\n\t\t\tpointCurrent.mK = alphaK * tauK * pointCurrent.deltaK;\r\n\t\t\tpointAfter.mK = betaK * tauK * pointCurrent.deltaK;\r\n\t\t}\r\n\r\n\t\t// Compute control points\r\n\t\tvar deltaX;\r\n\t\tfor (i = 0; i < pointsLen; ++i) {\r\n\t\t\tpointCurrent = pointsWithTangents[i];\r\n\t\t\tif (pointCurrent.model.skip) {\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\r\n\t\t\tpointBefore = i > 0 ? pointsWithTangents[i - 1] : null;\r\n\t\t\tpointAfter = i < pointsLen - 1 ? pointsWithTangents[i + 1] : null;\r\n\t\t\tif (pointBefore && !pointBefore.model.skip) {\r\n\t\t\t\tdeltaX = (pointCurrent.model.x - pointBefore.model.x) / 3;\r\n\t\t\t\tpointCurrent.model.controlPointPreviousX = pointCurrent.model.x - deltaX;\r\n\t\t\t\tpointCurrent.model.controlPointPreviousY = pointCurrent.model.y - deltaX * pointCurrent.mK;\r\n\t\t\t}\r\n\t\t\tif (pointAfter && !pointAfter.model.skip) {\r\n\t\t\t\tdeltaX = (pointAfter.model.x - pointCurrent.model.x) / 3;\r\n\t\t\t\tpointCurrent.model.controlPointNextX = pointCurrent.model.x + deltaX;\r\n\t\t\t\tpointCurrent.model.controlPointNextY = pointCurrent.model.y + deltaX * pointCurrent.mK;\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\thelpers$1.nextItem = function(collection, index, loop) {\r\n\t\tif (loop) {\r\n\t\t\treturn index >= collection.length - 1 ? collection[0] : collection[index + 1];\r\n\t\t}\r\n\t\treturn index >= collection.length - 1 ? collection[collection.length - 1] : collection[index + 1];\r\n\t};\r\n\thelpers$1.previousItem = function(collection, index, loop) {\r\n\t\tif (loop) {\r\n\t\t\treturn index <= 0 ? collection[collection.length - 1] : collection[index - 1];\r\n\t\t}\r\n\t\treturn index <= 0 ? collection[0] : collection[index - 1];\r\n\t};\r\n\t// Implementation of the nice number algorithm used in determining where axis labels will go\r\n\thelpers$1.niceNum = function(range, round) {\r\n\t\tvar exponent = Math.floor(helpers$1.log10(range));\r\n\t\tvar fraction = range / Math.pow(10, exponent);\r\n\t\tvar niceFraction;\r\n\r\n\t\tif (round) {\r\n\t\t\tif (fraction < 1.5) {\r\n\t\t\t\tniceFraction = 1;\r\n\t\t\t} else if (fraction < 3) {\r\n\t\t\t\tniceFraction = 2;\r\n\t\t\t} else if (fraction < 7) {\r\n\t\t\t\tniceFraction = 5;\r\n\t\t\t} else {\r\n\t\t\t\tniceFraction = 10;\r\n\t\t\t}\r\n\t\t} else if (fraction <= 1.0) {\r\n\t\t\tniceFraction = 1;\r\n\t\t} else if (fraction <= 2) {\r\n\t\t\tniceFraction = 2;\r\n\t\t} else if (fraction <= 5) {\r\n\t\t\tniceFraction = 5;\r\n\t\t} else {\r\n\t\t\tniceFraction = 10;\r\n\t\t}\r\n\r\n\t\treturn niceFraction * Math.pow(10, exponent);\r\n\t};\r\n\t// Request animation polyfill - https://www.paulirish.com/2011/requestanimationframe-for-smart-animating/\r\n\thelpers$1.requestAnimFrame = (function() {\r\n\t\tif (typeof window === 'undefined') {\r\n\t\t\treturn function(callback) {\r\n\t\t\t\tcallback();\r\n\t\t\t};\r\n\t\t}\r\n\t\treturn window.requestAnimationFrame ||\r\n\t\t\twindow.webkitRequestAnimationFrame ||\r\n\t\t\twindow.mozRequestAnimationFrame ||\r\n\t\t\twindow.oRequestAnimationFrame ||\r\n\t\t\twindow.msRequestAnimationFrame ||\r\n\t\t\tfunction(callback) {\r\n\t\t\t\treturn window.setTimeout(callback, 1000 / 60);\r\n\t\t\t};\r\n\t}());\r\n\t// -- DOM methods\r\n\thelpers$1.getRelativePosition = function(evt, chart) {\r\n\t\tvar mouseX, mouseY;\r\n\t\tvar e = evt.originalEvent || evt;\r\n\t\tvar canvas = evt.target || evt.srcElement;\r\n\t\tvar boundingRect = canvas.getBoundingClientRect();\r\n\r\n\t\tvar touches = e.touches;\r\n\t\tif (touches && touches.length > 0) {\r\n\t\t\tmouseX = touches[0].clientX;\r\n\t\t\tmouseY = touches[0].clientY;\r\n\r\n\t\t} else {\r\n\t\t\tmouseX = e.clientX;\r\n\t\t\tmouseY = e.clientY;\r\n\t\t}\r\n\r\n\t\t// Scale mouse coordinates into canvas coordinates\r\n\t\t// by following the pattern laid out by 'jerryj' in the comments of\r\n\t\t// https://www.html5canvastutorials.com/advanced/html5-canvas-mouse-coordinates/\r\n\t\tvar paddingLeft = parseFloat(helpers$1.getStyle(canvas, 'padding-left'));\r\n\t\tvar paddingTop = parseFloat(helpers$1.getStyle(canvas, 'padding-top'));\r\n\t\tvar paddingRight = parseFloat(helpers$1.getStyle(canvas, 'padding-right'));\r\n\t\tvar paddingBottom = parseFloat(helpers$1.getStyle(canvas, 'padding-bottom'));\r\n\t\tvar width = boundingRect.right - boundingRect.left - paddingLeft - paddingRight;\r\n\t\tvar height = boundingRect.bottom - boundingRect.top - paddingTop - paddingBottom;\r\n\r\n\t\t// We divide by the current device pixel ratio, because the canvas is scaled up by that amount in each direction. However\r\n\t\t// the backend model is in unscaled coordinates. Since we are going to deal with our model coordinates, we go back here\r\n\t\tmouseX = Math.round((mouseX - boundingRect.left - paddingLeft) / (width) * canvas.width / chart.currentDevicePixelRatio);\r\n\t\tmouseY = Math.round((mouseY - boundingRect.top - paddingTop) / (height) * canvas.height / chart.currentDevicePixelRatio);\r\n\r\n\t\treturn {\r\n\t\t\tx: mouseX,\r\n\t\t\ty: mouseY\r\n\t\t};\r\n\r\n\t};\r\n\r\n\t// Private helper function to convert max-width/max-height values that may be percentages into a number\r\n\tfunction parseMaxStyle(styleValue, node, parentProperty) {\r\n\t\tvar valueInPixels;\r\n\t\tif (typeof styleValue === 'string') {\r\n\t\t\tvalueInPixels = parseInt(styleValue, 10);\r\n\r\n\t\t\tif (styleValue.indexOf('%') !== -1) {\r\n\t\t\t\t// percentage * size in dimension\r\n\t\t\t\tvalueInPixels = valueInPixels / 100 * node.parentNode[parentProperty];\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tvalueInPixels = styleValue;\r\n\t\t}\r\n\r\n\t\treturn valueInPixels;\r\n\t}\r\n\r\n\t/**\r\n\t * Returns if the given value contains an effective constraint.\r\n\t * @private\r\n\t */\r\n\tfunction isConstrainedValue(value) {\r\n\t\treturn value !== undefined && value !== null && value !== 'none';\r\n\t}\r\n\r\n\t/**\r\n\t * Returns the max width or height of the given DOM node in a cross-browser compatible fashion\r\n\t * @param {HTMLElement} domNode - the node to check the constraint on\r\n\t * @param {string} maxStyle - the style that defines the maximum for the direction we are using ('max-width' / 'max-height')\r\n\t * @param {string} percentageProperty - property of parent to use when calculating width as a percentage\r\n\t * @see {@link https://www.nathanaeljones.com/blog/2013/reading-max-width-cross-browser}\r\n\t */\r\n\tfunction getConstraintDimension(domNode, maxStyle, percentageProperty) {\r\n\t\tvar view = document.defaultView;\r\n\t\tvar parentNode = helpers$1._getParentNode(domNode);\r\n\t\tvar constrainedNode = view.getComputedStyle(domNode)[maxStyle];\r\n\t\tvar constrainedContainer = view.getComputedStyle(parentNode)[maxStyle];\r\n\t\tvar hasCNode = isConstrainedValue(constrainedNode);\r\n\t\tvar hasCContainer = isConstrainedValue(constrainedContainer);\r\n\t\tvar infinity = Number.POSITIVE_INFINITY;\r\n\r\n\t\tif (hasCNode || hasCContainer) {\r\n\t\t\treturn Math.min(\r\n\t\t\t\thasCNode ? parseMaxStyle(constrainedNode, domNode, percentageProperty) : infinity,\r\n\t\t\t\thasCContainer ? parseMaxStyle(constrainedContainer, parentNode, percentageProperty) : infinity);\r\n\t\t}\r\n\r\n\t\treturn 'none';\r\n\t}\r\n\t// returns Number or undefined if no constraint\r\n\thelpers$1.getConstraintWidth = function(domNode) {\r\n\t\treturn getConstraintDimension(domNode, 'max-width', 'clientWidth');\r\n\t};\r\n\t// returns Number or undefined if no constraint\r\n\thelpers$1.getConstraintHeight = function(domNode) {\r\n\t\treturn getConstraintDimension(domNode, 'max-height', 'clientHeight');\r\n\t};\r\n\t/**\r\n\t * @private\r\n \t */\r\n\thelpers$1._calculatePadding = function(container, padding, parentDimension) {\r\n\t\tpadding = helpers$1.getStyle(container, padding);\r\n\r\n\t\treturn padding.indexOf('%') > -1 ? parentDimension * parseInt(padding, 10) / 100 : parseInt(padding, 10);\r\n\t};\r\n\t/**\r\n\t * @private\r\n\t */\r\n\thelpers$1._getParentNode = function(domNode) {\r\n\t\tvar parent = domNode.parentNode;\r\n\t\tif (parent && parent.toString() === '[object ShadowRoot]') {\r\n\t\t\tparent = parent.host;\r\n\t\t}\r\n\t\treturn parent;\r\n\t};\r\n\thelpers$1.getMaximumWidth = function(domNode) {\r\n\t\tvar container = helpers$1._getParentNode(domNode);\r\n\t\tif (!container) {\r\n\t\t\treturn domNode.clientWidth;\r\n\t\t}\r\n\r\n\t\tvar clientWidth = container.clientWidth;\r\n\t\tvar paddingLeft = helpers$1._calculatePadding(container, 'padding-left', clientWidth);\r\n\t\tvar paddingRight = helpers$1._calculatePadding(container, 'padding-right', clientWidth);\r\n\r\n\t\tvar w = clientWidth - paddingLeft - paddingRight;\r\n\t\tvar cw = helpers$1.getConstraintWidth(domNode);\r\n\t\treturn isNaN(cw) ? w : Math.min(w, cw);\r\n\t};\r\n\thelpers$1.getMaximumHeight = function(domNode) {\r\n\t\tvar container = helpers$1._getParentNode(domNode);\r\n\t\tif (!container) {\r\n\t\t\treturn domNode.clientHeight;\r\n\t\t}\r\n\r\n\t\tvar clientHeight = container.clientHeight;\r\n\t\tvar paddingTop = helpers$1._calculatePadding(container, 'padding-top', clientHeight);\r\n\t\tvar paddingBottom = helpers$1._calculatePadding(container, 'padding-bottom', clientHeight);\r\n\r\n\t\tvar h = clientHeight - paddingTop - paddingBottom;\r\n\t\tvar ch = helpers$1.getConstraintHeight(domNode);\r\n\t\treturn isNaN(ch) ? h : Math.min(h, ch);\r\n\t};\r\n\thelpers$1.getStyle = function(el, property) {\r\n\t\treturn el.currentStyle ?\r\n\t\t\tel.currentStyle[property] :\r\n\t\t\tdocument.defaultView.getComputedStyle(el, null).getPropertyValue(property);\r\n\t};\r\n\thelpers$1.retinaScale = function(chart, forceRatio) {\r\n\t\tvar pixelRatio = chart.currentDevicePixelRatio = forceRatio || (typeof window !== 'undefined' && window.devicePixelRatio) || 1;\r\n\t\tif (pixelRatio === 1) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tvar canvas = chart.canvas;\r\n\t\tvar height = chart.height;\r\n\t\tvar width = chart.width;\r\n\r\n\t\tcanvas.height = height * pixelRatio;\r\n\t\tcanvas.width = width * pixelRatio;\r\n\t\tchart.ctx.scale(pixelRatio, pixelRatio);\r\n\r\n\t\t// If no style has been set on the canvas, the render size is used as display size,\r\n\t\t// making the chart visually bigger, so let's enforce it to the \"correct\" values.\r\n\t\t// See https://github.com/chartjs/Chart.js/issues/3575\r\n\t\tif (!canvas.style.height && !canvas.style.width) {\r\n\t\t\tcanvas.style.height = height + 'px';\r\n\t\t\tcanvas.style.width = width + 'px';\r\n\t\t}\r\n\t};\r\n\t// -- Canvas methods\r\n\thelpers$1.fontString = function(pixelSize, fontStyle, fontFamily) {\r\n\t\treturn fontStyle + ' ' + pixelSize + 'px ' + fontFamily;\r\n\t};\r\n\thelpers$1.longestText = function(ctx, font, arrayOfThings, cache) {\r\n\t\tcache = cache || {};\r\n\t\tvar data = cache.data = cache.data || {};\r\n\t\tvar gc = cache.garbageCollect = cache.garbageCollect || [];\r\n\r\n\t\tif (cache.font !== font) {\r\n\t\t\tdata = cache.data = {};\r\n\t\t\tgc = cache.garbageCollect = [];\r\n\t\t\tcache.font = font;\r\n\t\t}\r\n\r\n\t\tctx.font = font;\r\n\t\tvar longest = 0;\r\n\t\tvar ilen = arrayOfThings.length;\r\n\t\tvar i, j, jlen, thing, nestedThing;\r\n\t\tfor (i = 0; i < ilen; i++) {\r\n\t\t\tthing = arrayOfThings[i];\r\n\r\n\t\t\t// Undefined strings and arrays should not be measured\r\n\t\t\tif (thing !== undefined && thing !== null && helpers$1.isArray(thing) !== true) {\r\n\t\t\t\tlongest = helpers$1.measureText(ctx, data, gc, longest, thing);\r\n\t\t\t} else if (helpers$1.isArray(thing)) {\r\n\t\t\t\t// if it is an array lets measure each element\r\n\t\t\t\t// to do maybe simplify this function a bit so we can do this more recursively?\r\n\t\t\t\tfor (j = 0, jlen = thing.length; j < jlen; j++) {\r\n\t\t\t\t\tnestedThing = thing[j];\r\n\t\t\t\t\t// Undefined strings and arrays should not be measured\r\n\t\t\t\t\tif (nestedThing !== undefined && nestedThing !== null && !helpers$1.isArray(nestedThing)) {\r\n\t\t\t\t\t\tlongest = helpers$1.measureText(ctx, data, gc, longest, nestedThing);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tvar gcLen = gc.length / 2;\r\n\t\tif (gcLen > arrayOfThings.length) {\r\n\t\t\tfor (i = 0; i < gcLen; i++) {\r\n\t\t\t\tdelete data[gc[i]];\r\n\t\t\t}\r\n\t\t\tgc.splice(0, gcLen);\r\n\t\t}\r\n\t\treturn longest;\r\n\t};\r\n\thelpers$1.measureText = function(ctx, data, gc, longest, string) {\r\n\t\tvar textWidth = data[string];\r\n\t\tif (!textWidth) {\r\n\t\t\ttextWidth = data[string] = ctx.measureText(string).width;\r\n\t\t\tgc.push(string);\r\n\t\t}\r\n\t\tif (textWidth > longest) {\r\n\t\t\tlongest = textWidth;\r\n\t\t}\r\n\t\treturn longest;\r\n\t};\r\n\r\n\t/**\r\n\t * @deprecated\r\n\t */\r\n\thelpers$1.numberOfLabelLines = function(arrayOfThings) {\r\n\t\tvar numberOfLines = 1;\r\n\t\thelpers$1.each(arrayOfThings, function(thing) {\r\n\t\t\tif (helpers$1.isArray(thing)) {\r\n\t\t\t\tif (thing.length > numberOfLines) {\r\n\t\t\t\t\tnumberOfLines = thing.length;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t\treturn numberOfLines;\r\n\t};\r\n\r\n\thelpers$1.color = !chartjsColor ?\r\n\t\tfunction(value) {\r\n\t\t\tconsole.error('Color.js not found!');\r\n\t\t\treturn value;\r\n\t\t} :\r\n\t\tfunction(value) {\r\n\t\t\t/* global CanvasGradient */\r\n\t\t\tif (value instanceof CanvasGradient) {\r\n\t\t\t\tvalue = core_defaults.global.defaultColor;\r\n\t\t\t}\r\n\r\n\t\t\treturn chartjsColor(value);\r\n\t\t};\r\n\r\n\thelpers$1.getHoverColor = function(colorValue) {\r\n\t\t/* global CanvasPattern */\r\n\t\treturn (colorValue instanceof CanvasPattern || colorValue instanceof CanvasGradient) ?\r\n\t\t\tcolorValue :\r\n\t\t\thelpers$1.color(colorValue).saturate(0.5).darken(0.1).rgbString();\r\n\t};\r\n};\n\nfunction abstract() {\r\n\tthrow new Error(\r\n\t\t'This method is not implemented: either no adapter can ' +\r\n\t\t'be found or an incomplete integration was provided.'\r\n\t);\r\n}\r\n\r\n/**\r\n * Date adapter (current used by the time scale)\r\n * @namespace Chart._adapters._date\r\n * @memberof Chart._adapters\r\n * @private\r\n */\r\n\r\n/**\r\n * Currently supported unit string values.\r\n * @typedef {('millisecond'|'second'|'minute'|'hour'|'day'|'week'|'month'|'quarter'|'year')}\r\n * @memberof Chart._adapters._date\r\n * @name Unit\r\n */\r\n\r\n/**\r\n * @class\r\n */\r\nfunction DateAdapter(options) {\r\n\tthis.options = options || {};\r\n}\r\n\r\nhelpers$1.extend(DateAdapter.prototype, /** @lends DateAdapter */ {\r\n\t/**\r\n\t * Returns a map of time formats for the supported formatting units defined\r\n\t * in Unit as well as 'datetime' representing a detailed date/time string.\r\n\t * @returns {{string: string}}\r\n\t */\r\n\tformats: abstract,\r\n\r\n\t/**\r\n\t * Parses the given `value` and return the associated timestamp.\r\n\t * @param {any} value - the value to parse (usually comes from the data)\r\n\t * @param {string} [format] - the expected data format\r\n\t * @returns {(number|null)}\r\n\t * @function\r\n\t */\r\n\tparse: abstract,\r\n\r\n\t/**\r\n\t * Returns the formatted date in the specified `format` for a given `timestamp`.\r\n\t * @param {number} timestamp - the timestamp to format\r\n\t * @param {string} format - the date/time token\r\n\t * @return {string}\r\n\t * @function\r\n\t */\r\n\tformat: abstract,\r\n\r\n\t/**\r\n\t * Adds the specified `amount` of `unit` to the given `timestamp`.\r\n\t * @param {number} timestamp - the input timestamp\r\n\t * @param {number} amount - the amount to add\r\n\t * @param {Unit} unit - the unit as string\r\n\t * @return {number}\r\n\t * @function\r\n\t */\r\n\tadd: abstract,\r\n\r\n\t/**\r\n\t * Returns the number of `unit` between the given timestamps.\r\n\t * @param {number} max - the input timestamp (reference)\r\n\t * @param {number} min - the timestamp to substract\r\n\t * @param {Unit} unit - the unit as string\r\n\t * @return {number}\r\n\t * @function\r\n\t */\r\n\tdiff: abstract,\r\n\r\n\t/**\r\n\t * Returns start of `unit` for the given `timestamp`.\r\n\t * @param {number} timestamp - the input timestamp\r\n\t * @param {Unit} unit - the unit as string\r\n\t * @param {number} [weekday] - the ISO day of the week with 1 being Monday\r\n\t * and 7 being Sunday (only needed if param *unit* is `isoWeek`).\r\n\t * @function\r\n\t */\r\n\tstartOf: abstract,\r\n\r\n\t/**\r\n\t * Returns end of `unit` for the given `timestamp`.\r\n\t * @param {number} timestamp - the input timestamp\r\n\t * @param {Unit} unit - the unit as string\r\n\t * @function\r\n\t */\r\n\tendOf: abstract,\r\n\r\n\t// DEPRECATIONS\r\n\r\n\t/**\r\n\t * Provided for backward compatibility for scale.getValueForPixel(),\r\n\t * this method should be overridden only by the moment adapter.\r\n\t * @deprecated since version 2.8.0\r\n\t * @todo remove at version 3\r\n\t * @private\r\n\t */\r\n\t_create: function(value) {\r\n\t\treturn value;\r\n\t}\r\n});\r\n\r\nDateAdapter.override = function(members) {\r\n\thelpers$1.extend(DateAdapter.prototype, members);\r\n};\r\n\r\nvar _date = DateAdapter;\n\nvar core_adapters = {\n\t_date: _date\n};\n\n/**\r\n * Namespace to hold static tick generation functions\r\n * @namespace Chart.Ticks\r\n */\r\nvar core_ticks = {\r\n\t/**\r\n\t * Namespace to hold formatters for different types of ticks\r\n\t * @namespace Chart.Ticks.formatters\r\n\t */\r\n\tformatters: {\r\n\t\t/**\r\n\t\t * Formatter for value labels\r\n\t\t * @method Chart.Ticks.formatters.values\r\n\t\t * @param value the value to display\r\n\t\t * @return {string|string[]} the label to display\r\n\t\t */\r\n\t\tvalues: function(value) {\r\n\t\t\treturn helpers$1.isArray(value) ? value : '' + value;\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Formatter for linear numeric ticks\r\n\t\t * @method Chart.Ticks.formatters.linear\r\n\t\t * @param tickValue {number} the value to be formatted\r\n\t\t * @param index {number} the position of the tickValue parameter in the ticks array\r\n\t\t * @param ticks {number[]} the list of ticks being converted\r\n\t\t * @return {string} string representation of the tickValue parameter\r\n\t\t */\r\n\t\tlinear: function(tickValue, index, ticks) {\r\n\t\t\t// If we have lots of ticks, don't use the ones\r\n\t\t\tvar delta = ticks.length > 3 ? ticks[2] - ticks[1] : ticks[1] - ticks[0];\r\n\r\n\t\t\t// If we have a number like 2.5 as the delta, figure out how many decimal places we need\r\n\t\t\tif (Math.abs(delta) > 1) {\r\n\t\t\t\tif (tickValue !== Math.floor(tickValue)) {\r\n\t\t\t\t\t// not an integer\r\n\t\t\t\t\tdelta = tickValue - Math.floor(tickValue);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tvar logDelta = helpers$1.log10(Math.abs(delta));\r\n\t\t\tvar tickString = '';\r\n\r\n\t\t\tif (tickValue !== 0) {\r\n\t\t\t\tvar maxTick = Math.max(Math.abs(ticks[0]), Math.abs(ticks[ticks.length - 1]));\r\n\t\t\t\tif (maxTick < 1e-4) { // all ticks are small numbers; use scientific notation\r\n\t\t\t\t\tvar logTick = helpers$1.log10(Math.abs(tickValue));\r\n\t\t\t\t\tvar numExponential = Math.floor(logTick) - Math.floor(logDelta);\r\n\t\t\t\t\tnumExponential = Math.max(Math.min(numExponential, 20), 0);\r\n\t\t\t\t\ttickString = tickValue.toExponential(numExponential);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tvar numDecimal = -1 * Math.floor(logDelta);\r\n\t\t\t\t\tnumDecimal = Math.max(Math.min(numDecimal, 20), 0); // toFixed has a max of 20 decimal places\r\n\t\t\t\t\ttickString = tickValue.toFixed(numDecimal);\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\ttickString = '0'; // never show decimal places for 0\r\n\t\t\t}\r\n\r\n\t\t\treturn tickString;\r\n\t\t},\r\n\r\n\t\tlogarithmic: function(tickValue, index, ticks) {\r\n\t\t\tvar remain = tickValue / (Math.pow(10, Math.floor(helpers$1.log10(tickValue))));\r\n\r\n\t\t\tif (tickValue === 0) {\r\n\t\t\t\treturn '0';\r\n\t\t\t} else if (remain === 1 || remain === 2 || remain === 5 || index === 0 || index === ticks.length - 1) {\r\n\t\t\t\treturn tickValue.toExponential();\r\n\t\t\t}\r\n\t\t\treturn '';\r\n\t\t}\r\n\t}\r\n};\n\nvar isArray = helpers$1.isArray;\r\nvar isNullOrUndef = helpers$1.isNullOrUndef;\r\nvar valueOrDefault$a = helpers$1.valueOrDefault;\r\nvar valueAtIndexOrDefault = helpers$1.valueAtIndexOrDefault;\r\n\r\ncore_defaults._set('scale', {\r\n\tdisplay: true,\r\n\tposition: 'left',\r\n\toffset: false,\r\n\r\n\t// grid line settings\r\n\tgridLines: {\r\n\t\tdisplay: true,\r\n\t\tcolor: 'rgba(0,0,0,0.1)',\r\n\t\tlineWidth: 1,\r\n\t\tdrawBorder: true,\r\n\t\tdrawOnChartArea: true,\r\n\t\tdrawTicks: true,\r\n\t\ttickMarkLength: 10,\r\n\t\tzeroLineWidth: 1,\r\n\t\tzeroLineColor: 'rgba(0,0,0,0.25)',\r\n\t\tzeroLineBorderDash: [],\r\n\t\tzeroLineBorderDashOffset: 0.0,\r\n\t\toffsetGridLines: false,\r\n\t\tborderDash: [],\r\n\t\tborderDashOffset: 0.0\r\n\t},\r\n\r\n\t// scale label\r\n\tscaleLabel: {\r\n\t\t// display property\r\n\t\tdisplay: false,\r\n\r\n\t\t// actual label\r\n\t\tlabelString: '',\r\n\r\n\t\t// top/bottom padding\r\n\t\tpadding: {\r\n\t\t\ttop: 4,\r\n\t\t\tbottom: 4\r\n\t\t}\r\n\t},\r\n\r\n\t// label settings\r\n\tticks: {\r\n\t\tbeginAtZero: false,\r\n\t\tminRotation: 0,\r\n\t\tmaxRotation: 50,\r\n\t\tmirror: false,\r\n\t\tpadding: 0,\r\n\t\treverse: false,\r\n\t\tdisplay: true,\r\n\t\tautoSkip: true,\r\n\t\tautoSkipPadding: 0,\r\n\t\tlabelOffset: 0,\r\n\t\t// We pass through arrays to be rendered as multiline labels, we convert Others to strings here.\r\n\t\tcallback: core_ticks.formatters.values,\r\n\t\tminor: {},\r\n\t\tmajor: {}\r\n\t}\r\n});\r\n\r\n/** Returns a new array containing numItems from arr */\r\nfunction sample(arr, numItems) {\r\n\tvar result = [];\r\n\tvar increment = arr.length / numItems;\r\n\tvar i = 0;\r\n\tvar len = arr.length;\r\n\r\n\tfor (; i < len; i += increment) {\r\n\t\tresult.push(arr[Math.floor(i)]);\r\n\t}\r\n\treturn result;\r\n}\r\n\r\nfunction getPixelForGridLine(scale, index, offsetGridLines) {\r\n\tvar length = scale.getTicks().length;\r\n\tvar validIndex = Math.min(index, length - 1);\r\n\tvar lineValue = scale.getPixelForTick(validIndex);\r\n\tvar start = scale._startPixel;\r\n\tvar end = scale._endPixel;\r\n\tvar epsilon = 1e-6; // 1e-6 is margin in pixels for accumulated error.\r\n\tvar offset;\r\n\r\n\tif (offsetGridLines) {\r\n\t\tif (length === 1) {\r\n\t\t\toffset = Math.max(lineValue - start, end - lineValue);\r\n\t\t} else if (index === 0) {\r\n\t\t\toffset = (scale.getPixelForTick(1) - lineValue) / 2;\r\n\t\t} else {\r\n\t\t\toffset = (lineValue - scale.getPixelForTick(validIndex - 1)) / 2;\r\n\t\t}\r\n\t\tlineValue += validIndex < index ? offset : -offset;\r\n\r\n\t\t// Return undefined if the pixel is out of the range\r\n\t\tif (lineValue < start - epsilon || lineValue > end + epsilon) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t}\r\n\treturn lineValue;\r\n}\r\n\r\nfunction garbageCollect(caches, length) {\r\n\thelpers$1.each(caches, function(cache) {\r\n\t\tvar gc = cache.gc;\r\n\t\tvar gcLen = gc.length / 2;\r\n\t\tvar i;\r\n\t\tif (gcLen > length) {\r\n\t\t\tfor (i = 0; i < gcLen; ++i) {\r\n\t\t\t\tdelete cache.data[gc[i]];\r\n\t\t\t}\r\n\t\t\tgc.splice(0, gcLen);\r\n\t\t}\r\n\t});\r\n}\r\n\r\n/**\r\n * Returns {width, height, offset} objects for the first, last, widest, highest tick\r\n * labels where offset indicates the anchor point offset from the top in pixels.\r\n */\r\nfunction computeLabelSizes(ctx, tickFonts, ticks, caches) {\r\n\tvar length = ticks.length;\r\n\tvar widths = [];\r\n\tvar heights = [];\r\n\tvar offsets = [];\r\n\tvar widestLabelSize = 0;\r\n\tvar highestLabelSize = 0;\r\n\tvar i, j, jlen, label, tickFont, fontString, cache, lineHeight, width, height, nestedLabel, widest, highest;\r\n\r\n\tfor (i = 0; i < length; ++i) {\r\n\t\tlabel = ticks[i].label;\r\n\t\ttickFont = ticks[i].major ? tickFonts.major : tickFonts.minor;\r\n\t\tctx.font = fontString = tickFont.string;\r\n\t\tcache = caches[fontString] = caches[fontString] || {data: {}, gc: []};\r\n\t\tlineHeight = tickFont.lineHeight;\r\n\t\twidth = height = 0;\r\n\t\t// Undefined labels and arrays should not be measured\r\n\t\tif (!isNullOrUndef(label) && !isArray(label)) {\r\n\t\t\twidth = helpers$1.measureText(ctx, cache.data, cache.gc, width, label);\r\n\t\t\theight = lineHeight;\r\n\t\t} else if (isArray(label)) {\r\n\t\t\t// if it is an array let's measure each element\r\n\t\t\tfor (j = 0, jlen = label.length; j < jlen; ++j) {\r\n\t\t\t\tnestedLabel = label[j];\r\n\t\t\t\t// Undefined labels and arrays should not be measured\r\n\t\t\t\tif (!isNullOrUndef(nestedLabel) && !isArray(nestedLabel)) {\r\n\t\t\t\t\twidth = helpers$1.measureText(ctx, cache.data, cache.gc, width, nestedLabel);\r\n\t\t\t\t\theight += lineHeight;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\twidths.push(width);\r\n\t\theights.push(height);\r\n\t\toffsets.push(lineHeight / 2);\r\n\t\twidestLabelSize = Math.max(width, widestLabelSize);\r\n\t\thighestLabelSize = Math.max(height, highestLabelSize);\r\n\t}\r\n\tgarbageCollect(caches, length);\r\n\r\n\twidest = widths.indexOf(widestLabelSize);\r\n\thighest = heights.indexOf(highestLabelSize);\r\n\r\n\tfunction valueAt(idx) {\r\n\t\treturn {\r\n\t\t\twidth: widths[idx] || 0,\r\n\t\t\theight: heights[idx] || 0,\r\n\t\t\toffset: offsets[idx] || 0\r\n\t\t};\r\n\t}\r\n\r\n\treturn {\r\n\t\tfirst: valueAt(0),\r\n\t\tlast: valueAt(length - 1),\r\n\t\twidest: valueAt(widest),\r\n\t\thighest: valueAt(highest)\r\n\t};\r\n}\r\n\r\nfunction getTickMarkLength(options) {\r\n\treturn options.drawTicks ? options.tickMarkLength : 0;\r\n}\r\n\r\nfunction getScaleLabelHeight(options) {\r\n\tvar font, padding;\r\n\r\n\tif (!options.display) {\r\n\t\treturn 0;\r\n\t}\r\n\r\n\tfont = helpers$1.options._parseFont(options);\r\n\tpadding = helpers$1.options.toPadding(options.padding);\r\n\r\n\treturn font.lineHeight + padding.height;\r\n}\r\n\r\nfunction parseFontOptions(options, nestedOpts) {\r\n\treturn helpers$1.extend(helpers$1.options._parseFont({\r\n\t\tfontFamily: valueOrDefault$a(nestedOpts.fontFamily, options.fontFamily),\r\n\t\tfontSize: valueOrDefault$a(nestedOpts.fontSize, options.fontSize),\r\n\t\tfontStyle: valueOrDefault$a(nestedOpts.fontStyle, options.fontStyle),\r\n\t\tlineHeight: valueOrDefault$a(nestedOpts.lineHeight, options.lineHeight)\r\n\t}), {\r\n\t\tcolor: helpers$1.options.resolve([nestedOpts.fontColor, options.fontColor, core_defaults.global.defaultFontColor])\r\n\t});\r\n}\r\n\r\nfunction parseTickFontOptions(options) {\r\n\tvar minor = parseFontOptions(options, options.minor);\r\n\tvar major = options.major.enabled ? parseFontOptions(options, options.major) : minor;\r\n\r\n\treturn {minor: minor, major: major};\r\n}\r\n\r\nfunction nonSkipped(ticksToFilter) {\r\n\tvar filtered = [];\r\n\tvar item, index, len;\r\n\tfor (index = 0, len = ticksToFilter.length; index < len; ++index) {\r\n\t\titem = ticksToFilter[index];\r\n\t\tif (typeof item._index !== 'undefined') {\r\n\t\t\tfiltered.push(item);\r\n\t\t}\r\n\t}\r\n\treturn filtered;\r\n}\r\n\r\nfunction getEvenSpacing(arr) {\r\n\tvar len = arr.length;\r\n\tvar i, diff;\r\n\r\n\tif (len < 2) {\r\n\t\treturn false;\r\n\t}\r\n\r\n\tfor (diff = arr[0], i = 1; i < len; ++i) {\r\n\t\tif (arr[i] - arr[i - 1] !== diff) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t}\r\n\treturn diff;\r\n}\r\n\r\nfunction calculateSpacing(majorIndices, ticks, axisLength, ticksLimit) {\r\n\tvar evenMajorSpacing = getEvenSpacing(majorIndices);\r\n\tvar spacing = (ticks.length - 1) / ticksLimit;\r\n\tvar factors, factor, i, ilen;\r\n\r\n\t// If the major ticks are evenly spaced apart, place the minor ticks\r\n\t// so that they divide the major ticks into even chunks\r\n\tif (!evenMajorSpacing) {\r\n\t\treturn Math.max(spacing, 1);\r\n\t}\r\n\r\n\tfactors = helpers$1.math._factorize(evenMajorSpacing);\r\n\tfor (i = 0, ilen = factors.length - 1; i < ilen; i++) {\r\n\t\tfactor = factors[i];\r\n\t\tif (factor > spacing) {\r\n\t\t\treturn factor;\r\n\t\t}\r\n\t}\r\n\treturn Math.max(spacing, 1);\r\n}\r\n\r\nfunction getMajorIndices(ticks) {\r\n\tvar result = [];\r\n\tvar i, ilen;\r\n\tfor (i = 0, ilen = ticks.length; i < ilen; i++) {\r\n\t\tif (ticks[i].major) {\r\n\t\t\tresult.push(i);\r\n\t\t}\r\n\t}\r\n\treturn result;\r\n}\r\n\r\nfunction skipMajors(ticks, majorIndices, spacing) {\r\n\tvar count = 0;\r\n\tvar next = majorIndices[0];\r\n\tvar i, tick;\r\n\r\n\tspacing = Math.ceil(spacing);\r\n\tfor (i = 0; i < ticks.length; i++) {\r\n\t\ttick = ticks[i];\r\n\t\tif (i === next) {\r\n\t\t\ttick._index = i;\r\n\t\t\tcount++;\r\n\t\t\tnext = majorIndices[count * spacing];\r\n\t\t} else {\r\n\t\t\tdelete tick.label;\r\n\t\t}\r\n\t}\r\n}\r\n\r\nfunction skip(ticks, spacing, majorStart, majorEnd) {\r\n\tvar start = valueOrDefault$a(majorStart, 0);\r\n\tvar end = Math.min(valueOrDefault$a(majorEnd, ticks.length), ticks.length);\r\n\tvar count = 0;\r\n\tvar length, i, tick, next;\r\n\r\n\tspacing = Math.ceil(spacing);\r\n\tif (majorEnd) {\r\n\t\tlength = majorEnd - majorStart;\r\n\t\tspacing = length / Math.floor(length / spacing);\r\n\t}\r\n\r\n\tnext = start;\r\n\r\n\twhile (next < 0) {\r\n\t\tcount++;\r\n\t\tnext = Math.round(start + count * spacing);\r\n\t}\r\n\r\n\tfor (i = Math.max(start, 0); i < end; i++) {\r\n\t\ttick = ticks[i];\r\n\t\tif (i === next) {\r\n\t\t\ttick._index = i;\r\n\t\t\tcount++;\r\n\t\t\tnext = Math.round(start + count * spacing);\r\n\t\t} else {\r\n\t\t\tdelete tick.label;\r\n\t\t}\r\n\t}\r\n}\r\n\r\nvar Scale = core_element.extend({\r\n\r\n\tzeroLineIndex: 0,\r\n\r\n\t/**\r\n\t * Get the padding needed for the scale\r\n\t * @method getPadding\r\n\t * @private\r\n\t * @returns {Padding} the necessary padding\r\n\t */\r\n\tgetPadding: function() {\r\n\t\tvar me = this;\r\n\t\treturn {\r\n\t\t\tleft: me.paddingLeft || 0,\r\n\t\t\ttop: me.paddingTop || 0,\r\n\t\t\tright: me.paddingRight || 0,\r\n\t\t\tbottom: me.paddingBottom || 0\r\n\t\t};\r\n\t},\r\n\r\n\t/**\r\n\t * Returns the scale tick objects ({label, major})\r\n\t * @since 2.7\r\n\t */\r\n\tgetTicks: function() {\r\n\t\treturn this._ticks;\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\t_getLabels: function() {\r\n\t\tvar data = this.chart.data;\r\n\t\treturn this.options.labels || (this.isHorizontal() ? data.xLabels : data.yLabels) || data.labels || [];\r\n\t},\r\n\r\n\t// These methods are ordered by lifecyle. Utilities then follow.\r\n\t// Any function defined here is inherited by all scale types.\r\n\t// Any function can be extended by the scale type\r\n\r\n\t/**\r\n\t * Provided for backward compatibility, not available anymore\r\n\t * @function Chart.Scale.mergeTicksOptions\r\n\t * @deprecated since version 2.8.0\r\n\t * @todo remove at version 3\r\n\t */\r\n\tmergeTicksOptions: function() {\r\n\t\t// noop\r\n\t},\r\n\r\n\tbeforeUpdate: function() {\r\n\t\thelpers$1.callback(this.options.beforeUpdate, [this]);\r\n\t},\r\n\r\n\t/**\r\n\t * @param {number} maxWidth - the max width in pixels\r\n\t * @param {number} maxHeight - the max height in pixels\r\n\t * @param {object} margins - the space between the edge of the other scales and edge of the chart\r\n\t *   This space comes from two sources:\r\n\t *     - padding - space that's required to show the labels at the edges of the scale\r\n\t *     - thickness of scales or legends in another orientation\r\n\t */\r\n\tupdate: function(maxWidth, maxHeight, margins) {\r\n\t\tvar me = this;\r\n\t\tvar tickOpts = me.options.ticks;\r\n\t\tvar sampleSize = tickOpts.sampleSize;\r\n\t\tvar i, ilen, labels, ticks, samplingEnabled;\r\n\r\n\t\t// Update Lifecycle - Probably don't want to ever extend or overwrite this function ;)\r\n\t\tme.beforeUpdate();\r\n\r\n\t\t// Absorb the master measurements\r\n\t\tme.maxWidth = maxWidth;\r\n\t\tme.maxHeight = maxHeight;\r\n\t\tme.margins = helpers$1.extend({\r\n\t\t\tleft: 0,\r\n\t\t\tright: 0,\r\n\t\t\ttop: 0,\r\n\t\t\tbottom: 0\r\n\t\t}, margins);\r\n\r\n\t\tme._ticks = null;\r\n\t\tme.ticks = null;\r\n\t\tme._labelSizes = null;\r\n\t\tme._maxLabelLines = 0;\r\n\t\tme.longestLabelWidth = 0;\r\n\t\tme.longestTextCache = me.longestTextCache || {};\r\n\t\tme._gridLineItems = null;\r\n\t\tme._labelItems = null;\r\n\r\n\t\t// Dimensions\r\n\t\tme.beforeSetDimensions();\r\n\t\tme.setDimensions();\r\n\t\tme.afterSetDimensions();\r\n\r\n\t\t// Data min/max\r\n\t\tme.beforeDataLimits();\r\n\t\tme.determineDataLimits();\r\n\t\tme.afterDataLimits();\r\n\r\n\t\t// Ticks - `this.ticks` is now DEPRECATED!\r\n\t\t// Internal ticks are now stored as objects in the PRIVATE `this._ticks` member\r\n\t\t// and must not be accessed directly from outside this class. `this.ticks` being\r\n\t\t// around for long time and not marked as private, we can't change its structure\r\n\t\t// without unexpected breaking changes. If you need to access the scale ticks,\r\n\t\t// use scale.getTicks() instead.\r\n\r\n\t\tme.beforeBuildTicks();\r\n\r\n\t\t// New implementations should return an array of objects but for BACKWARD COMPAT,\r\n\t\t// we still support no return (`this.ticks` internally set by calling this method).\r\n\t\tticks = me.buildTicks() || [];\r\n\r\n\t\t// Allow modification of ticks in callback.\r\n\t\tticks = me.afterBuildTicks(ticks) || ticks;\r\n\r\n\t\t// Ensure ticks contains ticks in new tick format\r\n\t\tif ((!ticks || !ticks.length) && me.ticks) {\r\n\t\t\tticks = [];\r\n\t\t\tfor (i = 0, ilen = me.ticks.length; i < ilen; ++i) {\r\n\t\t\t\tticks.push({\r\n\t\t\t\t\tvalue: me.ticks[i],\r\n\t\t\t\t\tmajor: false\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tme._ticks = ticks;\r\n\r\n\t\t// Compute tick rotation and fit using a sampled subset of labels\r\n\t\t// We generally don't need to compute the size of every single label for determining scale size\r\n\t\tsamplingEnabled = sampleSize < ticks.length;\r\n\t\tlabels = me._convertTicksToLabels(samplingEnabled ? sample(ticks, sampleSize) : ticks);\r\n\r\n\t\t// _configure is called twice, once here, once from core.controller.updateLayout.\r\n\t\t// Here we haven't been positioned yet, but dimensions are correct.\r\n\t\t// Variables set in _configure are needed for calculateTickRotation, and\r\n\t\t// it's ok that coordinates are not correct there, only dimensions matter.\r\n\t\tme._configure();\r\n\r\n\t\t// Tick Rotation\r\n\t\tme.beforeCalculateTickRotation();\r\n\t\tme.calculateTickRotation();\r\n\t\tme.afterCalculateTickRotation();\r\n\r\n\t\tme.beforeFit();\r\n\t\tme.fit();\r\n\t\tme.afterFit();\r\n\r\n\t\t// Auto-skip\r\n\t\tme._ticksToDraw = tickOpts.display && (tickOpts.autoSkip || tickOpts.source === 'auto') ? me._autoSkip(ticks) : ticks;\r\n\r\n\t\tif (samplingEnabled) {\r\n\t\t\t// Generate labels using all non-skipped ticks\r\n\t\t\tlabels = me._convertTicksToLabels(me._ticksToDraw);\r\n\t\t}\r\n\r\n\t\tme.ticks = labels;   // BACKWARD COMPATIBILITY\r\n\r\n\t\t// IMPORTANT: after this point, we consider that `this.ticks` will NEVER change!\r\n\r\n\t\tme.afterUpdate();\r\n\r\n\t\t// TODO(v3): remove minSize as a public property and return value from all layout boxes. It is unused\r\n\t\t// make maxWidth and maxHeight private\r\n\t\treturn me.minSize;\r\n\t},\r\n\r\n\t/**\r\n\t * @private\r\n\t */\r\n\t_configure: function() {\r\n\t\tvar me = this;\r\n\t\tvar reversePixels = me.options.ticks.reverse;\r\n\t\tvar startPixel, endPixel;\r\n\r\n\t\tif (me.isHorizontal()) {\r\n\t\t\tstartPixel = me.left;\r\n\t\t\tendPixel = me.right;\r\n\t\t} else {\r\n\t\t\tstartPixel = me.top;\r\n\t\t\tendPixel = me.bottom;\r\n\t\t\t// by default vertical scales are from bottom to top, so pixels are reversed\r\n\t\t\treversePixels = !reversePixels;\r\n\t\t}\r\n\t\tme._startPixel = startPixel;\r\n\t\tme._endPixel = endPixel;\r\n\t\tme._reversePixels = reversePixels;\r\n\t\tme._length = endPixel - startPixel;\r\n\t},\r\n\r\n\tafterUpdate: function() {\r\n\t\thelpers$1.callback(this.options.afterUpdate, [this]);\r\n\t},\r\n\r\n\t//\r\n\r\n\tbeforeSetDimensions: function() {\r\n\t\thelpers$1.callback(this.options.beforeSetDimensions, [this]);\r\n\t},\r\n\tsetDimensions: function() {\r\n\t\tvar me = this;\r\n\t\t// Set the unconstrained dimension before label rotation\r\n\t\tif (me.isHorizontal()) {\r\n\t\t\t// Reset position before calculating rotation\r\n\t\t\tme.width = me.maxWidth;\r\n\t\t\tme.left = 0;\r\n\t\t\tme.right = me.width;\r\n\t\t} else {\r\n\t\t\tme.height = me.maxHeight;\r\n\r\n\t\t\t// Reset position before calculating rotation\r\n\t\t\tme.top = 0;\r\n\t\t\tme.bottom = me.height;\r\n\t\t}\r\n\r\n\t\t// Reset padding\r\n\t\tme.paddingLeft = 0;\r\n\t\tme.paddingTop = 0;\r\n\t\tme.paddingRight = 0;\r\n\t\tme.paddingBottom = 0;\r\n\t},\r\n\tafterSetDimensions: function() {\r\n\t\thelpers$1.callback(this.options.afterSetDimensions, [this]);\r\n\t},\r\n\r\n\t// Data limits\r\n\tbeforeDataLimits: function() {\r\n\t\thelpers$1.callback(this.options.beforeDataLimits, [this]);\r\n\t},\r\n\tdetermineDataLimits: helpers$1.noop,\r\n\tafterDataLimits: function() {\r\n\t\thelpers$1.callback(this.options.afterDataLimits, [this]);\r\n\t},\r\n\r\n\t//\r\n\tbeforeBuildTicks: function() {\r\n\t\thelpers$1.callback(this.options.beforeBuildTicks, [this]);\r\n\t},\r\n\tbuildTicks: helpers$1.noop,\r\n\tafterBuildTicks: function(ticks) {\r\n\t\tvar me = this;\r\n\t\t// ticks is empty for old axis implementations here\r\n\t\tif (isArray(ticks) && ticks.length) {\r\n\t\t\treturn helpers$1.callback(me.options.afterBuildTicks, [me, ticks]);\r\n\t\t}\r\n\t\t// Support old implementations (that modified `this.ticks` directly in buildTicks)\r\n\t\tme.ticks = helpers$1.callback(me.options.afterBuildTicks, [me, me.ticks]) || me.ticks;\r\n\t\treturn ticks;\r\n\t},\r\n\r\n\tbeforeTickToLabelConversion: function() {\r\n\t\thelpers$1.callback(this.options.beforeTickToLabelConversion, [this]);\r\n\t},\r\n\tconvertTicksToLabels: function() {\r\n\t\tvar me = this;\r\n\t\t// Convert ticks to strings\r\n\t\tvar tickOpts = me.options.ticks;\r\n\t\tme.ticks = me.ticks.map(tickOpts.userCallback || tickOpts.callback, this);\r\n\t},\r\n\tafterTickToLabelConversion: function() {\r\n\t\thelpers$1.callback(this.options.afterTickToLabelConversion, [this]);\r\n\t},\r\n\r\n\t//\r\n\r\n\tbeforeCalculateTickRotation: function() {\r\n\t\thelpers$1.callback(this.options.beforeCalculateTickRotation, [this]);\r\n\t},\r\n\tcalculateTickRotation: function() {\r\n\t\tvar me = this;\r\n\t\tvar options = me.options;\r\n\t\tvar tickOpts = options.ticks;\r\n\t\tvar numTicks = me.getTicks().length;\r\n\t\tvar minRotation = tickOpts.minRotation || 0;\r\n\t\tvar maxRotation = tickOpts.maxRotation;\r\n\t\tvar labelRotation = minRotation;\r\n\t\tvar labelSizes, maxLabelWidth, maxLabelHeight, maxWidth, tickWidth, maxHeight, maxLabelDiagonal;\r\n\r\n\t\tif (!me._isVisible() || !tickOpts.display || minRotation >= maxRotation || numTicks <= 1 || !me.isHorizontal()) {\r\n\t\t\tme.labelRotation = minRotation;\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tlabelSizes = me._getLabelSizes();\r\n\t\tmaxLabelWidth = labelSizes.widest.width;\r\n\t\tmaxLabelHeight = labelSizes.highest.height - labelSizes.highest.offset;\r\n\r\n\t\t// Estimate the width of each grid based on the canvas width, the maximum\r\n\t\t// label width and the number of tick intervals\r\n\t\tmaxWidth = Math.min(me.maxWidth, me.chart.width - maxLabelWidth);\r\n\t\ttickWidth = options.offset ? me.maxWidth / numTicks : maxWidth / (numTicks - 1);\r\n\r\n\t\t// Allow 3 pixels x2 padding either side for label readability\r\n\t\tif (maxLabelWidth + 6 > tickWidth) {\r\n\t\t\ttickWidth = maxWidth / (numTicks - (options.offset ? 0.5 : 1));\r\n\t\t\tmaxHeight = me.maxHeight - getTickMarkLength(options.gridLines)\r\n\t\t\t\t- tickOpts.padding - getScaleLabelHeight(options.scaleLabel);\r\n\t\t\tmaxLabelDiagonal = Math.sqrt(maxLabelWidth * maxLabelWidth + maxLabelHeight * maxLabelHeight);\r\n\t\t\tlabelRotation = helpers$1.toDegrees(Math.min(\r\n\t\t\t\tMath.asin(Math.min((labelSizes.highest.height + 6) / tickWidth, 1)),\r\n\t\t\t\tMath.asin(Math.min(maxHeight / maxLabelDiagonal, 1)) - Math.asin(maxLabelHeight / maxLabelDiagonal)\r\n\t\t\t));\r\n\t\t\tlabelRotation = Math.max(minRotation, Math.min(maxRotation, labelRotation));\r\n\t\t}\r\n\r\n\t\tme.labelRotation = labelRotation;\r\n\t},\r\n\tafterCalculateTickRotation: function() {\r\n\t\thelpers$1.callback(this.options.afterCalculateTickRotation, [this]);\r\n\t},\r\n\r\n\t//\r\n\r\n\tbeforeFit: function() {\r\n\t\thelpers$1.callback(this.options.beforeFit, [this]);\r\n\t},\r\n\tfit: function() {\r\n\t\tvar me = this;\r\n\t\t// Reset\r\n\t\tvar minSize = me.minSize = {\r\n\t\t\twidth: 0,\r\n\t\t\theight: 0\r\n\t\t};\r\n\r\n\t\tvar chart = me.chart;\r\n\t\tvar opts = me.options;\r\n\t\tvar tickOpts = opts.ticks;\r\n\t\tvar scaleLabelOpts = opts.scaleLabel;\r\n\t\tvar gridLineOpts = opts.gridLines;\r\n\t\tvar display = me._isVisible();\r\n\t\tvar isBottom = opts.position === 'bottom';\r\n\t\tvar isHorizontal = me.isHorizontal();\r\n\r\n\t\t// Width\r\n\t\tif (isHorizontal) {\r\n\t\t\tminSize.width = me.maxWidth;\r\n\t\t} else if (display) {\r\n\t\t\tminSize.width = getTickMarkLength(gridLineOpts) + getScaleLabelHeight(scaleLabelOpts);\r\n\t\t}\r\n\r\n\t\t// height\r\n\t\tif (!isHorizontal) {\r\n\t\t\tminSize.height = me.maxHeight; // fill all the height\r\n\t\t} else if (display) {\r\n\t\t\tminSize.height = getTickMarkLength(gridLineOpts) + getScaleLabelHeight(scaleLabelOpts);\r\n\t\t}\r\n\r\n\t\t// Don't bother fitting the ticks if we are not showing the labels\r\n\t\tif (tickOpts.display && display) {\r\n\t\t\tvar tickFonts = parseTickFontOptions(tickOpts);\r\n\t\t\tvar labelSizes = me._getLabelSizes();\r\n\t\t\tvar firstLabelSize = labelSizes.first;\r\n\t\t\tvar lastLabelSize = labelSizes.last;\r\n\t\t\tvar widestLabelSize = labelSizes.widest;\r\n\t\t\tvar highestLabelSize = labelSizes.highest;\r\n\t\t\tvar lineSpace = tickFonts.minor.lineHeight * 0.4;\r\n\t\t\tvar tickPadding = tickOpts.padding;\r\n\r\n\t\t\tif (isHorizontal) {\r\n\t\t\t\t// A horizontal axis is more constrained by the height.\r\n\t\t\t\tvar isRotated = me.labelRotation !== 0;\r\n\t\t\t\tvar angleRadians = helpers$1.toRadians(me.labelRotation);\r\n\t\t\t\tvar cosRotation = Math.cos(angleRadians);\r\n\t\t\t\tvar sinRotation = Math.sin(angleRadians);\r\n\r\n\t\t\t\tvar labelHeight = sinRotation * widestLabelSize.width\r\n\t\t\t\t\t+ cosRotation * (highestLabelSize.height - (isRotated ? highestLabelSize.offset : 0))\r\n\t\t\t\t\t+ (isRotated ? 0 : lineSpace); // padding\r\n\r\n\t\t\t\tminSize.height = Math.min(me.maxHeight, minSize.height + labelHeight + tickPadding);\r\n\r\n\t\t\t\tvar offsetLeft = me.getPixelForTick(0) - me.left;\r\n\t\t\t\tvar offsetRight = me.right - me.getPixelForTick(me.getTicks().length - 1);\r\n\t\t\t\tvar paddingLeft, paddingRight;\r\n\r\n\t\t\t\t// Ensure that our ticks are always inside the canvas. When rotated, ticks are right aligned\r\n\t\t\t\t// which means that the right padding is dominated by the font height\r\n\t\t\t\tif (isRotated) {\r\n\t\t\t\t\tpaddingLeft = isBottom ?\r\n\t\t\t\t\t\tcosRotation * firstLabelSize.width + sinRotation * firstLabelSize.offset :\r\n\t\t\t\t\t\tsinRotation * (firstLabelSize.height - firstLabelSize.offset);\r\n\t\t\t\t\tpaddingRight = isBottom ?\r\n\t\t\t\t\t\tsinRotation * (lastLabelSize.height - lastLabelSize.offset) :\r\n\t\t\t\t\t\tcosRotation * lastLabelSize.width + sinRotation * lastLabelSize.offset;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tpaddingLeft = firstLabelSize.width / 2;\r\n\t\t\t\t\tpaddingRight = lastLabelSize.width / 2;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Adjust padding taking into account changes in offsets\r\n\t\t\t\t// and add 3 px to move away from canvas edges\r\n\t\t\t\tme.paddingLeft = Math.max((paddingLeft - offsetLeft) * me.width / (me.width - offsetLeft), 0) + 3;\r\n\t\t\t\tme.paddingRight = Math.max((paddingRight - offsetRight) * me.width / (me.width - offsetRight), 0) + 3;\r\n\t\t\t} else {\r\n\t\t\t\t// A vertical axis is more constrained by the width. Labels are the\r\n\t\t\t\t// dominant factor here, so get that length first and account for padding\r\n\t\t\t\tvar labelWidth = tickOpts.mirror ? 0 :\r\n\t\t\t\t\t// use lineSpace for consistency with horizontal axis\r\n\t\t\t\t\t// tickPadding is not implemented for horizontal\r\n\t\t\t\t\twidestLabelSize.width + tickPadding + lineSpace;\r\n\r\n\t\t\t\tminSize.width = Math.min(me.maxWidth, minSize.width + labelWidth);\r\n\r\n\t\t\t\tme.paddingTop = firstLabelSize.height / 2;\r\n\t\t\t\tme.paddingBottom = lastLabelSize.height / 2;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tme.handleMargins();\r\n\r\n\t\tif (isHorizontal) {\r\n\t\t\tme.width = me._length = chart.width - me.margins.left - me.margins.right;\r\n\t\t\tme.height = minSize.height;\r\n\t\t} else {\r\n\t\t\tme.width = minSize.width;\r\n\t\t\tme.height = me._length = chart.height - me.margins.top - me.margins.bottom;\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t * Handle margins and padding interactions\r\n\t * @private\r\n\t */\r\n\thandleMargins: function() {\r\n\t\tvar me = this;\r\n\t\tif (me.margins) {\r\n\t\t\tme.margins.left = Math.max(me.paddingLeft, me.margins.left);\r\n\t\t\tme.margins.top = Math.max(me.paddingTop, me.margins.top);\r\n\t\t\tme.margins.right = Math.max(me.paddingRight, me.margins.right);\r\n\t\t\tme.margins.bottom = Math.max(me.paddingBottom, me.margins.bottom);\r\n\t\t}\r\n\t},\r\n\r\n\tafterFit: function() {\r\n\t\thelpers$1.callback(this.options.afterFit, [this]);\r\n\t},\r\n\r\n\t// Shared Methods\r\n\tisHorizontal: function() {\r\n\t\tvar pos = this.options.position;\r\n\t\treturn pos === 'top' || pos === 'bottom';\r\n\t},\r\n\tisFullWidth: function() {\r\n\t\treturn this.options.fullWidth;\r\n\t},\r\n\r\n\t// Get the correct value. NaN bad inputs, If the value type is object get the x or y based on whether we are horizontal or not\r\n\tgetRightValue: function(rawValue) {\r\n\t\t// Null and undefined values first\r\n\t\tif (isNullOrUndef(rawValue)) {\r\n\t\t\treturn NaN;\r\n\t\t}\r\n\t\t// isNaN(object) returns true, so make sure NaN is checking for a number; Discard Infinite values\r\n\t\tif ((typeof rawValue === 'number' || rawValue instanceof Number) && !isFinite(rawValue)) {\r\n\t\t\treturn NaN;\r\n\t\t}\r\n\r\n\t\t// If it is in fact an object, dive in one more level\r\n\t\tif (rawValue) {\r\n\t\t\tif (this.isHorizontal()) {\r\n\t\t\t\tif (rawValue.x !== undefined) {\r\n\t\t\t\t\treturn this.getRightValue(rawValue.x);\r\n\t\t\t\t}\r\n\t\t\t} else if (rawValue.y !== undefined) {\r\n\t\t\t\treturn this.getRightValue(rawValue.y);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// Value is good, return it\r\n\t\treturn rawValue;\r\n\t},\r\n\r\n\t_convertTicksToLabels: function(ticks) {\r\n\t\tvar me = this;\r\n\t\tvar labels, i, ilen;\r\n\r\n\t\tme.ticks = ticks.map(function(tick) {\r\n\t\t\treturn tick.value;\r\n\t\t});\r\n\r\n\t\tme.beforeTickToLabelConversion();\r\n\r\n\t\t// New implementations should return the formatted tick labels but for BACKWARD\r\n\t\t// COMPAT, we still support no return (`this.ticks` internally changed by calling\r\n\t\t// this method and supposed to contain only string values).\r\n\t\tlabels = me.convertTicksToLabels(ticks) || me.ticks;\r\n\r\n\t\tme.afterTickToLabelConversion();\r\n\r\n\t\t// BACKWARD COMPAT: synchronize `_ticks` with labels (so potentially `this.ticks`)\r\n\t\tfor (i = 0, ilen = ticks.length; i < ilen; ++i) {\r\n\t\t\tticks[i].label = labels[i];\r\n\t\t}\r\n\r\n\t\treturn labels;\r\n\t},\r\n\r\n\t/**\r\n\t * @private\r\n\t */\r\n\t_getLabelSizes: function() {\r\n\t\tvar me = this;\r\n\t\tvar labelSizes = me._labelSizes;\r\n\r\n\t\tif (!labelSizes) {\r\n\t\t\tme._labelSizes = labelSizes = computeLabelSizes(me.ctx, parseTickFontOptions(me.options.ticks), me.getTicks(), me.longestTextCache);\r\n\t\t\tme.longestLabelWidth = labelSizes.widest.width;\r\n\t\t}\r\n\r\n\t\treturn labelSizes;\r\n\t},\r\n\r\n\t/**\r\n\t * @private\r\n\t */\r\n\t_parseValue: function(value) {\r\n\t\tvar start, end, min, max;\r\n\r\n\t\tif (isArray(value)) {\r\n\t\t\tstart = +this.getRightValue(value[0]);\r\n\t\t\tend = +this.getRightValue(value[1]);\r\n\t\t\tmin = Math.min(start, end);\r\n\t\t\tmax = Math.max(start, end);\r\n\t\t} else {\r\n\t\t\tvalue = +this.getRightValue(value);\r\n\t\t\tstart = undefined;\r\n\t\t\tend = value;\r\n\t\t\tmin = value;\r\n\t\t\tmax = value;\r\n\t\t}\r\n\r\n\t\treturn {\r\n\t\t\tmin: min,\r\n\t\t\tmax: max,\r\n\t\t\tstart: start,\r\n\t\t\tend: end\r\n\t\t};\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\t_getScaleLabel: function(rawValue) {\r\n\t\tvar v = this._parseValue(rawValue);\r\n\t\tif (v.start !== undefined) {\r\n\t\t\treturn '[' + v.start + ', ' + v.end + ']';\r\n\t\t}\r\n\r\n\t\treturn +this.getRightValue(rawValue);\r\n\t},\r\n\r\n\t/**\r\n\t * Used to get the value to display in the tooltip for the data at the given index\r\n\t * @param index\r\n\t * @param datasetIndex\r\n\t */\r\n\tgetLabelForIndex: helpers$1.noop,\r\n\r\n\t/**\r\n\t * Returns the location of the given data point. Value can either be an index or a numerical value\r\n\t * The coordinate (0, 0) is at the upper-left corner of the canvas\r\n\t * @param value\r\n\t * @param index\r\n\t * @param datasetIndex\r\n\t */\r\n\tgetPixelForValue: helpers$1.noop,\r\n\r\n\t/**\r\n\t * Used to get the data value from a given pixel. This is the inverse of getPixelForValue\r\n\t * The coordinate (0, 0) is at the upper-left corner of the canvas\r\n\t * @param pixel\r\n\t */\r\n\tgetValueForPixel: helpers$1.noop,\r\n\r\n\t/**\r\n\t * Returns the location of the tick at the given index\r\n\t * The coordinate (0, 0) is at the upper-left corner of the canvas\r\n\t */\r\n\tgetPixelForTick: function(index) {\r\n\t\tvar me = this;\r\n\t\tvar offset = me.options.offset;\r\n\t\tvar numTicks = me._ticks.length;\r\n\t\tvar tickWidth = 1 / Math.max(numTicks - (offset ? 0 : 1), 1);\r\n\r\n\t\treturn index < 0 || index > numTicks - 1\r\n\t\t\t? null\r\n\t\t\t: me.getPixelForDecimal(index * tickWidth + (offset ? tickWidth / 2 : 0));\r\n\t},\r\n\r\n\t/**\r\n\t * Utility for getting the pixel location of a percentage of scale\r\n\t * The coordinate (0, 0) is at the upper-left corner of the canvas\r\n\t */\r\n\tgetPixelForDecimal: function(decimal) {\r\n\t\tvar me = this;\r\n\r\n\t\tif (me._reversePixels) {\r\n\t\t\tdecimal = 1 - decimal;\r\n\t\t}\r\n\r\n\t\treturn me._startPixel + decimal * me._length;\r\n\t},\r\n\r\n\tgetDecimalForPixel: function(pixel) {\r\n\t\tvar decimal = (pixel - this._startPixel) / this._length;\r\n\t\treturn this._reversePixels ? 1 - decimal : decimal;\r\n\t},\r\n\r\n\t/**\r\n\t * Returns the pixel for the minimum chart value\r\n\t * The coordinate (0, 0) is at the upper-left corner of the canvas\r\n\t */\r\n\tgetBasePixel: function() {\r\n\t\treturn this.getPixelForValue(this.getBaseValue());\r\n\t},\r\n\r\n\tgetBaseValue: function() {\r\n\t\tvar me = this;\r\n\t\tvar min = me.min;\r\n\t\tvar max = me.max;\r\n\r\n\t\treturn me.beginAtZero ? 0 :\r\n\t\t\tmin < 0 && max < 0 ? max :\r\n\t\t\tmin > 0 && max > 0 ? min :\r\n\t\t\t0;\r\n\t},\r\n\r\n\t/**\r\n\t * Returns a subset of ticks to be plotted to avoid overlapping labels.\r\n\t * @private\r\n\t */\r\n\t_autoSkip: function(ticks) {\r\n\t\tvar me = this;\r\n\t\tvar tickOpts = me.options.ticks;\r\n\t\tvar axisLength = me._length;\r\n\t\tvar ticksLimit = tickOpts.maxTicksLimit || axisLength / me._tickSize() + 1;\r\n\t\tvar majorIndices = tickOpts.major.enabled ? getMajorIndices(ticks) : [];\r\n\t\tvar numMajorIndices = majorIndices.length;\r\n\t\tvar first = majorIndices[0];\r\n\t\tvar last = majorIndices[numMajorIndices - 1];\r\n\t\tvar i, ilen, spacing, avgMajorSpacing;\r\n\r\n\t\t// If there are too many major ticks to display them all\r\n\t\tif (numMajorIndices > ticksLimit) {\r\n\t\t\tskipMajors(ticks, majorIndices, numMajorIndices / ticksLimit);\r\n\t\t\treturn nonSkipped(ticks);\r\n\t\t}\r\n\r\n\t\tspacing = calculateSpacing(majorIndices, ticks, axisLength, ticksLimit);\r\n\r\n\t\tif (numMajorIndices > 0) {\r\n\t\t\tfor (i = 0, ilen = numMajorIndices - 1; i < ilen; i++) {\r\n\t\t\t\tskip(ticks, spacing, majorIndices[i], majorIndices[i + 1]);\r\n\t\t\t}\r\n\t\t\tavgMajorSpacing = numMajorIndices > 1 ? (last - first) / (numMajorIndices - 1) : null;\r\n\t\t\tskip(ticks, spacing, helpers$1.isNullOrUndef(avgMajorSpacing) ? 0 : first - avgMajorSpacing, first);\r\n\t\t\tskip(ticks, spacing, last, helpers$1.isNullOrUndef(avgMajorSpacing) ? ticks.length : last + avgMajorSpacing);\r\n\t\t\treturn nonSkipped(ticks);\r\n\t\t}\r\n\t\tskip(ticks, spacing);\r\n\t\treturn nonSkipped(ticks);\r\n\t},\r\n\r\n\t/**\r\n\t * @private\r\n\t */\r\n\t_tickSize: function() {\r\n\t\tvar me = this;\r\n\t\tvar optionTicks = me.options.ticks;\r\n\r\n\t\t// Calculate space needed by label in axis direction.\r\n\t\tvar rot = helpers$1.toRadians(me.labelRotation);\r\n\t\tvar cos = Math.abs(Math.cos(rot));\r\n\t\tvar sin = Math.abs(Math.sin(rot));\r\n\r\n\t\tvar labelSizes = me._getLabelSizes();\r\n\t\tvar padding = optionTicks.autoSkipPadding || 0;\r\n\t\tvar w = labelSizes ? labelSizes.widest.width + padding : 0;\r\n\t\tvar h = labelSizes ? labelSizes.highest.height + padding : 0;\r\n\r\n\t\t// Calculate space needed for 1 tick in axis direction.\r\n\t\treturn me.isHorizontal()\r\n\t\t\t? h * cos > w * sin ? w / cos : h / sin\r\n\t\t\t: h * sin < w * cos ? h / cos : w / sin;\r\n\t},\r\n\r\n\t/**\r\n\t * @private\r\n\t */\r\n\t_isVisible: function() {\r\n\t\tvar me = this;\r\n\t\tvar chart = me.chart;\r\n\t\tvar display = me.options.display;\r\n\t\tvar i, ilen, meta;\r\n\r\n\t\tif (display !== 'auto') {\r\n\t\t\treturn !!display;\r\n\t\t}\r\n\r\n\t\t// When 'auto', the scale is visible if at least one associated dataset is visible.\r\n\t\tfor (i = 0, ilen = chart.data.datasets.length; i < ilen; ++i) {\r\n\t\t\tif (chart.isDatasetVisible(i)) {\r\n\t\t\t\tmeta = chart.getDatasetMeta(i);\r\n\t\t\t\tif (meta.xAxisID === me.id || meta.yAxisID === me.id) {\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn false;\r\n\t},\r\n\r\n\t/**\r\n\t * @private\r\n\t */\r\n\t_computeGridLineItems: function(chartArea) {\r\n\t\tvar me = this;\r\n\t\tvar chart = me.chart;\r\n\t\tvar options = me.options;\r\n\t\tvar gridLines = options.gridLines;\r\n\t\tvar position = options.position;\r\n\t\tvar offsetGridLines = gridLines.offsetGridLines;\r\n\t\tvar isHorizontal = me.isHorizontal();\r\n\t\tvar ticks = me._ticksToDraw;\r\n\t\tvar ticksLength = ticks.length + (offsetGridLines ? 1 : 0);\r\n\r\n\t\tvar tl = getTickMarkLength(gridLines);\r\n\t\tvar items = [];\r\n\t\tvar axisWidth = gridLines.drawBorder ? valueAtIndexOrDefault(gridLines.lineWidth, 0, 0) : 0;\r\n\t\tvar axisHalfWidth = axisWidth / 2;\r\n\t\tvar alignPixel = helpers$1._alignPixel;\r\n\t\tvar alignBorderValue = function(pixel) {\r\n\t\t\treturn alignPixel(chart, pixel, axisWidth);\r\n\t\t};\r\n\t\tvar borderValue, i, tick, lineValue, alignedLineValue;\r\n\t\tvar tx1, ty1, tx2, ty2, x1, y1, x2, y2, lineWidth, lineColor, borderDash, borderDashOffset;\r\n\r\n\t\tif (position === 'top') {\r\n\t\t\tborderValue = alignBorderValue(me.bottom);\r\n\t\t\tty1 = me.bottom - tl;\r\n\t\t\tty2 = borderValue - axisHalfWidth;\r\n\t\t\ty1 = alignBorderValue(chartArea.top) + axisHalfWidth;\r\n\t\t\ty2 = chartArea.bottom;\r\n\t\t} else if (position === 'bottom') {\r\n\t\t\tborderValue = alignBorderValue(me.top);\r\n\t\t\ty1 = chartArea.top;\r\n\t\t\ty2 = alignBorderValue(chartArea.bottom) - axisHalfWidth;\r\n\t\t\tty1 = borderValue + axisHalfWidth;\r\n\t\t\tty2 = me.top + tl;\r\n\t\t} else if (position === 'left') {\r\n\t\t\tborderValue = alignBorderValue(me.right);\r\n\t\t\ttx1 = me.right - tl;\r\n\t\t\ttx2 = borderValue - axisHalfWidth;\r\n\t\t\tx1 = alignBorderValue(chartArea.left) + axisHalfWidth;\r\n\t\t\tx2 = chartArea.right;\r\n\t\t} else {\r\n\t\t\tborderValue = alignBorderValue(me.left);\r\n\t\t\tx1 = chartArea.left;\r\n\t\t\tx2 = alignBorderValue(chartArea.right) - axisHalfWidth;\r\n\t\t\ttx1 = borderValue + axisHalfWidth;\r\n\t\t\ttx2 = me.left + tl;\r\n\t\t}\r\n\r\n\t\tfor (i = 0; i < ticksLength; ++i) {\r\n\t\t\ttick = ticks[i] || {};\r\n\r\n\t\t\t// autoskipper skipped this tick (#4635)\r\n\t\t\tif (isNullOrUndef(tick.label) && i < ticks.length) {\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\r\n\t\t\tif (i === me.zeroLineIndex && options.offset === offsetGridLines) {\r\n\t\t\t\t// Draw the first index specially\r\n\t\t\t\tlineWidth = gridLines.zeroLineWidth;\r\n\t\t\t\tlineColor = gridLines.zeroLineColor;\r\n\t\t\t\tborderDash = gridLines.zeroLineBorderDash || [];\r\n\t\t\t\tborderDashOffset = gridLines.zeroLineBorderDashOffset || 0.0;\r\n\t\t\t} else {\r\n\t\t\t\tlineWidth = valueAtIndexOrDefault(gridLines.lineWidth, i, 1);\r\n\t\t\t\tlineColor = valueAtIndexOrDefault(gridLines.color, i, 'rgba(0,0,0,0.1)');\r\n\t\t\t\tborderDash = gridLines.borderDash || [];\r\n\t\t\t\tborderDashOffset = gridLines.borderDashOffset || 0.0;\r\n\t\t\t}\r\n\r\n\t\t\tlineValue = getPixelForGridLine(me, tick._index || i, offsetGridLines);\r\n\r\n\t\t\t// Skip if the pixel is out of the range\r\n\t\t\tif (lineValue === undefined) {\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\r\n\t\t\talignedLineValue = alignPixel(chart, lineValue, lineWidth);\r\n\r\n\t\t\tif (isHorizontal) {\r\n\t\t\t\ttx1 = tx2 = x1 = x2 = alignedLineValue;\r\n\t\t\t} else {\r\n\t\t\t\tty1 = ty2 = y1 = y2 = alignedLineValue;\r\n\t\t\t}\r\n\r\n\t\t\titems.push({\r\n\t\t\t\ttx1: tx1,\r\n\t\t\t\tty1: ty1,\r\n\t\t\t\ttx2: tx2,\r\n\t\t\t\tty2: ty2,\r\n\t\t\t\tx1: x1,\r\n\t\t\t\ty1: y1,\r\n\t\t\t\tx2: x2,\r\n\t\t\t\ty2: y2,\r\n\t\t\t\twidth: lineWidth,\r\n\t\t\t\tcolor: lineColor,\r\n\t\t\t\tborderDash: borderDash,\r\n\t\t\t\tborderDashOffset: borderDashOffset,\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\titems.ticksLength = ticksLength;\r\n\t\titems.borderValue = borderValue;\r\n\r\n\t\treturn items;\r\n\t},\r\n\r\n\t/**\r\n\t * @private\r\n\t */\r\n\t_computeLabelItems: function() {\r\n\t\tvar me = this;\r\n\t\tvar options = me.options;\r\n\t\tvar optionTicks = options.ticks;\r\n\t\tvar position = options.position;\r\n\t\tvar isMirrored = optionTicks.mirror;\r\n\t\tvar isHorizontal = me.isHorizontal();\r\n\t\tvar ticks = me._ticksToDraw;\r\n\t\tvar fonts = parseTickFontOptions(optionTicks);\r\n\t\tvar tickPadding = optionTicks.padding;\r\n\t\tvar tl = getTickMarkLength(options.gridLines);\r\n\t\tvar rotation = -helpers$1.toRadians(me.labelRotation);\r\n\t\tvar items = [];\r\n\t\tvar i, ilen, tick, label, x, y, textAlign, pixel, font, lineHeight, lineCount, textOffset;\r\n\r\n\t\tif (position === 'top') {\r\n\t\t\ty = me.bottom - tl - tickPadding;\r\n\t\t\ttextAlign = !rotation ? 'center' : 'left';\r\n\t\t} else if (position === 'bottom') {\r\n\t\t\ty = me.top + tl + tickPadding;\r\n\t\t\ttextAlign = !rotation ? 'center' : 'right';\r\n\t\t} else if (position === 'left') {\r\n\t\t\tx = me.right - (isMirrored ? 0 : tl) - tickPadding;\r\n\t\t\ttextAlign = isMirrored ? 'left' : 'right';\r\n\t\t} else {\r\n\t\t\tx = me.left + (isMirrored ? 0 : tl) + tickPadding;\r\n\t\t\ttextAlign = isMirrored ? 'right' : 'left';\r\n\t\t}\r\n\r\n\t\tfor (i = 0, ilen = ticks.length; i < ilen; ++i) {\r\n\t\t\ttick = ticks[i];\r\n\t\t\tlabel = tick.label;\r\n\r\n\t\t\t// autoskipper skipped this tick (#4635)\r\n\t\t\tif (isNullOrUndef(label)) {\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\r\n\t\t\tpixel = me.getPixelForTick(tick._index || i) + optionTicks.labelOffset;\r\n\t\t\tfont = tick.major ? fonts.major : fonts.minor;\r\n\t\t\tlineHeight = font.lineHeight;\r\n\t\t\tlineCount = isArray(label) ? label.length : 1;\r\n\r\n\t\t\tif (isHorizontal) {\r\n\t\t\t\tx = pixel;\r\n\t\t\t\ttextOffset = position === 'top'\r\n\t\t\t\t\t? ((!rotation ? 0.5 : 1) - lineCount) * lineHeight\r\n\t\t\t\t\t: (!rotation ? 0.5 : 0) * lineHeight;\r\n\t\t\t} else {\r\n\t\t\t\ty = pixel;\r\n\t\t\t\ttextOffset = (1 - lineCount) * lineHeight / 2;\r\n\t\t\t}\r\n\r\n\t\t\titems.push({\r\n\t\t\t\tx: x,\r\n\t\t\t\ty: y,\r\n\t\t\t\trotation: rotation,\r\n\t\t\t\tlabel: label,\r\n\t\t\t\tfont: font,\r\n\t\t\t\ttextOffset: textOffset,\r\n\t\t\t\ttextAlign: textAlign\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\treturn items;\r\n\t},\r\n\r\n\t/**\r\n\t * @private\r\n\t */\r\n\t_drawGrid: function(chartArea) {\r\n\t\tvar me = this;\r\n\t\tvar gridLines = me.options.gridLines;\r\n\r\n\t\tif (!gridLines.display) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tvar ctx = me.ctx;\r\n\t\tvar chart = me.chart;\r\n\t\tvar alignPixel = helpers$1._alignPixel;\r\n\t\tvar axisWidth = gridLines.drawBorder ? valueAtIndexOrDefault(gridLines.lineWidth, 0, 0) : 0;\r\n\t\tvar items = me._gridLineItems || (me._gridLineItems = me._computeGridLineItems(chartArea));\r\n\t\tvar width, color, i, ilen, item;\r\n\r\n\t\tfor (i = 0, ilen = items.length; i < ilen; ++i) {\r\n\t\t\titem = items[i];\r\n\t\t\twidth = item.width;\r\n\t\t\tcolor = item.color;\r\n\r\n\t\t\tif (width && color) {\r\n\t\t\t\tctx.save();\r\n\t\t\t\tctx.lineWidth = width;\r\n\t\t\t\tctx.strokeStyle = color;\r\n\t\t\t\tif (ctx.setLineDash) {\r\n\t\t\t\t\tctx.setLineDash(item.borderDash);\r\n\t\t\t\t\tctx.lineDashOffset = item.borderDashOffset;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tctx.beginPath();\r\n\r\n\t\t\t\tif (gridLines.drawTicks) {\r\n\t\t\t\t\tctx.moveTo(item.tx1, item.ty1);\r\n\t\t\t\t\tctx.lineTo(item.tx2, item.ty2);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (gridLines.drawOnChartArea) {\r\n\t\t\t\t\tctx.moveTo(item.x1, item.y1);\r\n\t\t\t\t\tctx.lineTo(item.x2, item.y2);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tctx.stroke();\r\n\t\t\t\tctx.restore();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (axisWidth) {\r\n\t\t\t// Draw the line at the edge of the axis\r\n\t\t\tvar firstLineWidth = axisWidth;\r\n\t\t\tvar lastLineWidth = valueAtIndexOrDefault(gridLines.lineWidth, items.ticksLength - 1, 1);\r\n\t\t\tvar borderValue = items.borderValue;\r\n\t\t\tvar x1, x2, y1, y2;\r\n\r\n\t\t\tif (me.isHorizontal()) {\r\n\t\t\t\tx1 = alignPixel(chart, me.left, firstLineWidth) - firstLineWidth / 2;\r\n\t\t\t\tx2 = alignPixel(chart, me.right, lastLineWidth) + lastLineWidth / 2;\r\n\t\t\t\ty1 = y2 = borderValue;\r\n\t\t\t} else {\r\n\t\t\t\ty1 = alignPixel(chart, me.top, firstLineWidth) - firstLineWidth / 2;\r\n\t\t\t\ty2 = alignPixel(chart, me.bottom, lastLineWidth) + lastLineWidth / 2;\r\n\t\t\t\tx1 = x2 = borderValue;\r\n\t\t\t}\r\n\r\n\t\t\tctx.lineWidth = axisWidth;\r\n\t\t\tctx.strokeStyle = valueAtIndexOrDefault(gridLines.color, 0);\r\n\t\t\tctx.beginPath();\r\n\t\t\tctx.moveTo(x1, y1);\r\n\t\t\tctx.lineTo(x2, y2);\r\n\t\t\tctx.stroke();\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t * @private\r\n\t */\r\n\t_drawLabels: function() {\r\n\t\tvar me = this;\r\n\t\tvar optionTicks = me.options.ticks;\r\n\r\n\t\tif (!optionTicks.display) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tvar ctx = me.ctx;\r\n\t\tvar items = me._labelItems || (me._labelItems = me._computeLabelItems());\r\n\t\tvar i, j, ilen, jlen, item, tickFont, label, y;\r\n\r\n\t\tfor (i = 0, ilen = items.length; i < ilen; ++i) {\r\n\t\t\titem = items[i];\r\n\t\t\ttickFont = item.font;\r\n\r\n\t\t\t// Make sure we draw text in the correct color and font\r\n\t\t\tctx.save();\r\n\t\t\tctx.translate(item.x, item.y);\r\n\t\t\tctx.rotate(item.rotation);\r\n\t\t\tctx.font = tickFont.string;\r\n\t\t\tctx.fillStyle = tickFont.color;\r\n\t\t\tctx.textBaseline = 'middle';\r\n\t\t\tctx.textAlign = item.textAlign;\r\n\r\n\t\t\tlabel = item.label;\r\n\t\t\ty = item.textOffset;\r\n\t\t\tif (isArray(label)) {\r\n\t\t\t\tfor (j = 0, jlen = label.length; j < jlen; ++j) {\r\n\t\t\t\t\t// We just make sure the multiline element is a string here..\r\n\t\t\t\t\tctx.fillText('' + label[j], 0, y);\r\n\t\t\t\t\ty += tickFont.lineHeight;\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tctx.fillText(label, 0, y);\r\n\t\t\t}\r\n\t\t\tctx.restore();\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t * @private\r\n\t */\r\n\t_drawTitle: function() {\r\n\t\tvar me = this;\r\n\t\tvar ctx = me.ctx;\r\n\t\tvar options = me.options;\r\n\t\tvar scaleLabel = options.scaleLabel;\r\n\r\n\t\tif (!scaleLabel.display) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tvar scaleLabelFontColor = valueOrDefault$a(scaleLabel.fontColor, core_defaults.global.defaultFontColor);\r\n\t\tvar scaleLabelFont = helpers$1.options._parseFont(scaleLabel);\r\n\t\tvar scaleLabelPadding = helpers$1.options.toPadding(scaleLabel.padding);\r\n\t\tvar halfLineHeight = scaleLabelFont.lineHeight / 2;\r\n\t\tvar position = options.position;\r\n\t\tvar rotation = 0;\r\n\t\tvar scaleLabelX, scaleLabelY;\r\n\r\n\t\tif (me.isHorizontal()) {\r\n\t\t\tscaleLabelX = me.left + me.width / 2; // midpoint of the width\r\n\t\t\tscaleLabelY = position === 'bottom'\r\n\t\t\t\t? me.bottom - halfLineHeight - scaleLabelPadding.bottom\r\n\t\t\t\t: me.top + halfLineHeight + scaleLabelPadding.top;\r\n\t\t} else {\r\n\t\t\tvar isLeft = position === 'left';\r\n\t\t\tscaleLabelX = isLeft\r\n\t\t\t\t? me.left + halfLineHeight + scaleLabelPadding.top\r\n\t\t\t\t: me.right - halfLineHeight - scaleLabelPadding.top;\r\n\t\t\tscaleLabelY = me.top + me.height / 2;\r\n\t\t\trotation = isLeft ? -0.5 * Math.PI : 0.5 * Math.PI;\r\n\t\t}\r\n\r\n\t\tctx.save();\r\n\t\tctx.translate(scaleLabelX, scaleLabelY);\r\n\t\tctx.rotate(rotation);\r\n\t\tctx.textAlign = 'center';\r\n\t\tctx.textBaseline = 'middle';\r\n\t\tctx.fillStyle = scaleLabelFontColor; // render in correct colour\r\n\t\tctx.font = scaleLabelFont.string;\r\n\t\tctx.fillText(scaleLabel.labelString, 0, 0);\r\n\t\tctx.restore();\r\n\t},\r\n\r\n\tdraw: function(chartArea) {\r\n\t\tvar me = this;\r\n\r\n\t\tif (!me._isVisible()) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tme._drawGrid(chartArea);\r\n\t\tme._drawTitle();\r\n\t\tme._drawLabels();\r\n\t},\r\n\r\n\t/**\r\n\t * @private\r\n\t */\r\n\t_layers: function() {\r\n\t\tvar me = this;\r\n\t\tvar opts = me.options;\r\n\t\tvar tz = opts.ticks && opts.ticks.z || 0;\r\n\t\tvar gz = opts.gridLines && opts.gridLines.z || 0;\r\n\r\n\t\tif (!me._isVisible() || tz === gz || me.draw !== me._draw) {\r\n\t\t\t// backward compatibility: draw has been overridden by custom scale\r\n\t\t\treturn [{\r\n\t\t\t\tz: tz,\r\n\t\t\t\tdraw: function() {\r\n\t\t\t\t\tme.draw.apply(me, arguments);\r\n\t\t\t\t}\r\n\t\t\t}];\r\n\t\t}\r\n\r\n\t\treturn [{\r\n\t\t\tz: gz,\r\n\t\t\tdraw: function() {\r\n\t\t\t\tme._drawGrid.apply(me, arguments);\r\n\t\t\t\tme._drawTitle.apply(me, arguments);\r\n\t\t\t}\r\n\t\t}, {\r\n\t\t\tz: tz,\r\n\t\t\tdraw: function() {\r\n\t\t\t\tme._drawLabels.apply(me, arguments);\r\n\t\t\t}\r\n\t\t}];\r\n\t},\r\n\r\n\t/**\r\n\t * @private\r\n\t */\r\n\t_getMatchingVisibleMetas: function(type) {\r\n\t\tvar me = this;\r\n\t\tvar isHorizontal = me.isHorizontal();\r\n\t\treturn me.chart._getSortedVisibleDatasetMetas()\r\n\t\t\t.filter(function(meta) {\r\n\t\t\t\treturn (!type || meta.type === type)\r\n\t\t\t\t\t&& (isHorizontal ? meta.xAxisID === me.id : meta.yAxisID === me.id);\r\n\t\t\t});\r\n\t}\r\n});\r\n\r\nScale.prototype._draw = Scale.prototype.draw;\r\n\r\nvar core_scale = Scale;\n\nvar isNullOrUndef$1 = helpers$1.isNullOrUndef;\r\n\r\nvar defaultConfig = {\r\n\tposition: 'bottom'\r\n};\r\n\r\nvar scale_category = core_scale.extend({\r\n\tdetermineDataLimits: function() {\r\n\t\tvar me = this;\r\n\t\tvar labels = me._getLabels();\r\n\t\tvar ticksOpts = me.options.ticks;\r\n\t\tvar min = ticksOpts.min;\r\n\t\tvar max = ticksOpts.max;\r\n\t\tvar minIndex = 0;\r\n\t\tvar maxIndex = labels.length - 1;\r\n\t\tvar findIndex;\r\n\r\n\t\tif (min !== undefined) {\r\n\t\t\t// user specified min value\r\n\t\t\tfindIndex = labels.indexOf(min);\r\n\t\t\tif (findIndex >= 0) {\r\n\t\t\t\tminIndex = findIndex;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (max !== undefined) {\r\n\t\t\t// user specified max value\r\n\t\t\tfindIndex = labels.indexOf(max);\r\n\t\t\tif (findIndex >= 0) {\r\n\t\t\t\tmaxIndex = findIndex;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tme.minIndex = minIndex;\r\n\t\tme.maxIndex = maxIndex;\r\n\t\tme.min = labels[minIndex];\r\n\t\tme.max = labels[maxIndex];\r\n\t},\r\n\r\n\tbuildTicks: function() {\r\n\t\tvar me = this;\r\n\t\tvar labels = me._getLabels();\r\n\t\tvar minIndex = me.minIndex;\r\n\t\tvar maxIndex = me.maxIndex;\r\n\r\n\t\t// If we are viewing some subset of labels, slice the original array\r\n\t\tme.ticks = (minIndex === 0 && maxIndex === labels.length - 1) ? labels : labels.slice(minIndex, maxIndex + 1);\r\n\t},\r\n\r\n\tgetLabelForIndex: function(index, datasetIndex) {\r\n\t\tvar me = this;\r\n\t\tvar chart = me.chart;\r\n\r\n\t\tif (chart.getDatasetMeta(datasetIndex).controller._getValueScaleId() === me.id) {\r\n\t\t\treturn me.getRightValue(chart.data.datasets[datasetIndex].data[index]);\r\n\t\t}\r\n\r\n\t\treturn me._getLabels()[index];\r\n\t},\r\n\r\n\t_configure: function() {\r\n\t\tvar me = this;\r\n\t\tvar offset = me.options.offset;\r\n\t\tvar ticks = me.ticks;\r\n\r\n\t\tcore_scale.prototype._configure.call(me);\r\n\r\n\t\tif (!me.isHorizontal()) {\r\n\t\t\t// For backward compatibility, vertical category scale reverse is inverted.\r\n\t\t\tme._reversePixels = !me._reversePixels;\r\n\t\t}\r\n\r\n\t\tif (!ticks) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tme._startValue = me.minIndex - (offset ? 0.5 : 0);\r\n\t\tme._valueRange = Math.max(ticks.length - (offset ? 0 : 1), 1);\r\n\t},\r\n\r\n\t// Used to get data value locations.  Value can either be an index or a numerical value\r\n\tgetPixelForValue: function(value, index, datasetIndex) {\r\n\t\tvar me = this;\r\n\t\tvar valueCategory, labels, idx;\r\n\r\n\t\tif (!isNullOrUndef$1(index) && !isNullOrUndef$1(datasetIndex)) {\r\n\t\t\tvalue = me.chart.data.datasets[datasetIndex].data[index];\r\n\t\t}\r\n\r\n\t\t// If value is a data object, then index is the index in the data array,\r\n\t\t// not the index of the scale. We need to change that.\r\n\t\tif (!isNullOrUndef$1(value)) {\r\n\t\t\tvalueCategory = me.isHorizontal() ? value.x : value.y;\r\n\t\t}\r\n\t\tif (valueCategory !== undefined || (value !== undefined && isNaN(index))) {\r\n\t\t\tlabels = me._getLabels();\r\n\t\t\tvalue = helpers$1.valueOrDefault(valueCategory, value);\r\n\t\t\tidx = labels.indexOf(value);\r\n\t\t\tindex = idx !== -1 ? idx : index;\r\n\t\t\tif (isNaN(index)) {\r\n\t\t\t\tindex = value;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn me.getPixelForDecimal((index - me._startValue) / me._valueRange);\r\n\t},\r\n\r\n\tgetPixelForTick: function(index) {\r\n\t\tvar ticks = this.ticks;\r\n\t\treturn index < 0 || index > ticks.length - 1\r\n\t\t\t? null\r\n\t\t\t: this.getPixelForValue(ticks[index], index + this.minIndex);\r\n\t},\r\n\r\n\tgetValueForPixel: function(pixel) {\r\n\t\tvar me = this;\r\n\t\tvar value = Math.round(me._startValue + me.getDecimalForPixel(pixel) * me._valueRange);\r\n\t\treturn Math.min(Math.max(value, 0), me.ticks.length - 1);\r\n\t},\r\n\r\n\tgetBasePixel: function() {\r\n\t\treturn this.bottom;\r\n\t}\r\n});\r\n\r\n// INTERNAL: static default options, registered in src/index.js\r\nvar _defaults = defaultConfig;\nscale_category._defaults = _defaults;\n\nvar noop = helpers$1.noop;\r\nvar isNullOrUndef$2 = helpers$1.isNullOrUndef;\r\n\r\n/**\r\n * Generate a set of linear ticks\r\n * @param generationOptions the options used to generate the ticks\r\n * @param dataRange the range of the data\r\n * @returns {number[]} array of tick values\r\n */\r\nfunction generateTicks(generationOptions, dataRange) {\r\n\tvar ticks = [];\r\n\t// To get a \"nice\" value for the tick spacing, we will use the appropriately named\r\n\t// \"nice number\" algorithm. See https://stackoverflow.com/questions/8506881/nice-label-algorithm-for-charts-with-minimum-ticks\r\n\t// for details.\r\n\r\n\tvar MIN_SPACING = 1e-14;\r\n\tvar stepSize = generationOptions.stepSize;\r\n\tvar unit = stepSize || 1;\r\n\tvar maxNumSpaces = generationOptions.maxTicks - 1;\r\n\tvar min = generationOptions.min;\r\n\tvar max = generationOptions.max;\r\n\tvar precision = generationOptions.precision;\r\n\tvar rmin = dataRange.min;\r\n\tvar rmax = dataRange.max;\r\n\tvar spacing = helpers$1.niceNum((rmax - rmin) / maxNumSpaces / unit) * unit;\r\n\tvar factor, niceMin, niceMax, numSpaces;\r\n\r\n\t// Beyond MIN_SPACING floating point numbers being to lose precision\r\n\t// such that we can't do the math necessary to generate ticks\r\n\tif (spacing < MIN_SPACING && isNullOrUndef$2(min) && isNullOrUndef$2(max)) {\r\n\t\treturn [rmin, rmax];\r\n\t}\r\n\r\n\tnumSpaces = Math.ceil(rmax / spacing) - Math.floor(rmin / spacing);\r\n\tif (numSpaces > maxNumSpaces) {\r\n\t\t// If the calculated num of spaces exceeds maxNumSpaces, recalculate it\r\n\t\tspacing = helpers$1.niceNum(numSpaces * spacing / maxNumSpaces / unit) * unit;\r\n\t}\r\n\r\n\tif (stepSize || isNullOrUndef$2(precision)) {\r\n\t\t// If a precision is not specified, calculate factor based on spacing\r\n\t\tfactor = Math.pow(10, helpers$1._decimalPlaces(spacing));\r\n\t} else {\r\n\t\t// If the user specified a precision, round to that number of decimal places\r\n\t\tfactor = Math.pow(10, precision);\r\n\t\tspacing = Math.ceil(spacing * factor) / factor;\r\n\t}\r\n\r\n\tniceMin = Math.floor(rmin / spacing) * spacing;\r\n\tniceMax = Math.ceil(rmax / spacing) * spacing;\r\n\r\n\t// If min, max and stepSize is set and they make an evenly spaced scale use it.\r\n\tif (stepSize) {\r\n\t\t// If very close to our whole number, use it.\r\n\t\tif (!isNullOrUndef$2(min) && helpers$1.almostWhole(min / spacing, spacing / 1000)) {\r\n\t\t\tniceMin = min;\r\n\t\t}\r\n\t\tif (!isNullOrUndef$2(max) && helpers$1.almostWhole(max / spacing, spacing / 1000)) {\r\n\t\t\tniceMax = max;\r\n\t\t}\r\n\t}\r\n\r\n\tnumSpaces = (niceMax - niceMin) / spacing;\r\n\t// If very close to our rounded value, use it.\r\n\tif (helpers$1.almostEquals(numSpaces, Math.round(numSpaces), spacing / 1000)) {\r\n\t\tnumSpaces = Math.round(numSpaces);\r\n\t} else {\r\n\t\tnumSpaces = Math.ceil(numSpaces);\r\n\t}\r\n\r\n\tniceMin = Math.round(niceMin * factor) / factor;\r\n\tniceMax = Math.round(niceMax * factor) / factor;\r\n\tticks.push(isNullOrUndef$2(min) ? niceMin : min);\r\n\tfor (var j = 1; j < numSpaces; ++j) {\r\n\t\tticks.push(Math.round((niceMin + j * spacing) * factor) / factor);\r\n\t}\r\n\tticks.push(isNullOrUndef$2(max) ? niceMax : max);\r\n\r\n\treturn ticks;\r\n}\r\n\r\nvar scale_linearbase = core_scale.extend({\r\n\tgetRightValue: function(value) {\r\n\t\tif (typeof value === 'string') {\r\n\t\t\treturn +value;\r\n\t\t}\r\n\t\treturn core_scale.prototype.getRightValue.call(this, value);\r\n\t},\r\n\r\n\thandleTickRangeOptions: function() {\r\n\t\tvar me = this;\r\n\t\tvar opts = me.options;\r\n\t\tvar tickOpts = opts.ticks;\r\n\r\n\t\t// If we are forcing it to begin at 0, but 0 will already be rendered on the chart,\r\n\t\t// do nothing since that would make the chart weird. If the user really wants a weird chart\r\n\t\t// axis, they can manually override it\r\n\t\tif (tickOpts.beginAtZero) {\r\n\t\t\tvar minSign = helpers$1.sign(me.min);\r\n\t\t\tvar maxSign = helpers$1.sign(me.max);\r\n\r\n\t\t\tif (minSign < 0 && maxSign < 0) {\r\n\t\t\t\t// move the top up to 0\r\n\t\t\t\tme.max = 0;\r\n\t\t\t} else if (minSign > 0 && maxSign > 0) {\r\n\t\t\t\t// move the bottom down to 0\r\n\t\t\t\tme.min = 0;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tvar setMin = tickOpts.min !== undefined || tickOpts.suggestedMin !== undefined;\r\n\t\tvar setMax = tickOpts.max !== undefined || tickOpts.suggestedMax !== undefined;\r\n\r\n\t\tif (tickOpts.min !== undefined) {\r\n\t\t\tme.min = tickOpts.min;\r\n\t\t} else if (tickOpts.suggestedMin !== undefined) {\r\n\t\t\tif (me.min === null) {\r\n\t\t\t\tme.min = tickOpts.suggestedMin;\r\n\t\t\t} else {\r\n\t\t\t\tme.min = Math.min(me.min, tickOpts.suggestedMin);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (tickOpts.max !== undefined) {\r\n\t\t\tme.max = tickOpts.max;\r\n\t\t} else if (tickOpts.suggestedMax !== undefined) {\r\n\t\t\tif (me.max === null) {\r\n\t\t\t\tme.max = tickOpts.suggestedMax;\r\n\t\t\t} else {\r\n\t\t\t\tme.max = Math.max(me.max, tickOpts.suggestedMax);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (setMin !== setMax) {\r\n\t\t\t// We set the min or the max but not both.\r\n\t\t\t// So ensure that our range is good\r\n\t\t\t// Inverted or 0 length range can happen when\r\n\t\t\t// ticks.min is set, and no datasets are visible\r\n\t\t\tif (me.min >= me.max) {\r\n\t\t\t\tif (setMin) {\r\n\t\t\t\t\tme.max = me.min + 1;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tme.min = me.max - 1;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (me.min === me.max) {\r\n\t\t\tme.max++;\r\n\r\n\t\t\tif (!tickOpts.beginAtZero) {\r\n\t\t\t\tme.min--;\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\tgetTickLimit: function() {\r\n\t\tvar me = this;\r\n\t\tvar tickOpts = me.options.ticks;\r\n\t\tvar stepSize = tickOpts.stepSize;\r\n\t\tvar maxTicksLimit = tickOpts.maxTicksLimit;\r\n\t\tvar maxTicks;\r\n\r\n\t\tif (stepSize) {\r\n\t\t\tmaxTicks = Math.ceil(me.max / stepSize) - Math.floor(me.min / stepSize) + 1;\r\n\t\t} else {\r\n\t\t\tmaxTicks = me._computeTickLimit();\r\n\t\t\tmaxTicksLimit = maxTicksLimit || 11;\r\n\t\t}\r\n\r\n\t\tif (maxTicksLimit) {\r\n\t\t\tmaxTicks = Math.min(maxTicksLimit, maxTicks);\r\n\t\t}\r\n\r\n\t\treturn maxTicks;\r\n\t},\r\n\r\n\t_computeTickLimit: function() {\r\n\t\treturn Number.POSITIVE_INFINITY;\r\n\t},\r\n\r\n\thandleDirectionalChanges: noop,\r\n\r\n\tbuildTicks: function() {\r\n\t\tvar me = this;\r\n\t\tvar opts = me.options;\r\n\t\tvar tickOpts = opts.ticks;\r\n\r\n\t\t// Figure out what the max number of ticks we can support it is based on the size of\r\n\t\t// the axis area. For now, we say that the minimum tick spacing in pixels must be 40\r\n\t\t// We also limit the maximum number of ticks to 11 which gives a nice 10 squares on\r\n\t\t// the graph. Make sure we always have at least 2 ticks\r\n\t\tvar maxTicks = me.getTickLimit();\r\n\t\tmaxTicks = Math.max(2, maxTicks);\r\n\r\n\t\tvar numericGeneratorOptions = {\r\n\t\t\tmaxTicks: maxTicks,\r\n\t\t\tmin: tickOpts.min,\r\n\t\t\tmax: tickOpts.max,\r\n\t\t\tprecision: tickOpts.precision,\r\n\t\t\tstepSize: helpers$1.valueOrDefault(tickOpts.fixedStepSize, tickOpts.stepSize)\r\n\t\t};\r\n\t\tvar ticks = me.ticks = generateTicks(numericGeneratorOptions, me);\r\n\r\n\t\tme.handleDirectionalChanges();\r\n\r\n\t\t// At this point, we need to update our max and min given the tick values since we have expanded the\r\n\t\t// range of the scale\r\n\t\tme.max = helpers$1.max(ticks);\r\n\t\tme.min = helpers$1.min(ticks);\r\n\r\n\t\tif (tickOpts.reverse) {\r\n\t\t\tticks.reverse();\r\n\r\n\t\t\tme.start = me.max;\r\n\t\t\tme.end = me.min;\r\n\t\t} else {\r\n\t\t\tme.start = me.min;\r\n\t\t\tme.end = me.max;\r\n\t\t}\r\n\t},\r\n\r\n\tconvertTicksToLabels: function() {\r\n\t\tvar me = this;\r\n\t\tme.ticksAsNumbers = me.ticks.slice();\r\n\t\tme.zeroLineIndex = me.ticks.indexOf(0);\r\n\r\n\t\tcore_scale.prototype.convertTicksToLabels.call(me);\r\n\t},\r\n\r\n\t_configure: function() {\r\n\t\tvar me = this;\r\n\t\tvar ticks = me.getTicks();\r\n\t\tvar start = me.min;\r\n\t\tvar end = me.max;\r\n\t\tvar offset;\r\n\r\n\t\tcore_scale.prototype._configure.call(me);\r\n\r\n\t\tif (me.options.offset && ticks.length) {\r\n\t\t\toffset = (end - start) / Math.max(ticks.length - 1, 1) / 2;\r\n\t\t\tstart -= offset;\r\n\t\t\tend += offset;\r\n\t\t}\r\n\t\tme._startValue = start;\r\n\t\tme._endValue = end;\r\n\t\tme._valueRange = end - start;\r\n\t}\r\n});\n\nvar defaultConfig$1 = {\r\n\tposition: 'left',\r\n\tticks: {\r\n\t\tcallback: core_ticks.formatters.linear\r\n\t}\r\n};\r\n\r\nvar DEFAULT_MIN = 0;\r\nvar DEFAULT_MAX = 1;\r\n\r\nfunction getOrCreateStack(stacks, stacked, meta) {\r\n\tvar key = [\r\n\t\tmeta.type,\r\n\t\t// we have a separate stack for stack=undefined datasets when the opts.stacked is undefined\r\n\t\tstacked === undefined && meta.stack === undefined ? meta.index : '',\r\n\t\tmeta.stack\r\n\t].join('.');\r\n\r\n\tif (stacks[key] === undefined) {\r\n\t\tstacks[key] = {\r\n\t\t\tpos: [],\r\n\t\t\tneg: []\r\n\t\t};\r\n\t}\r\n\r\n\treturn stacks[key];\r\n}\r\n\r\nfunction stackData(scale, stacks, meta, data) {\r\n\tvar opts = scale.options;\r\n\tvar stacked = opts.stacked;\r\n\tvar stack = getOrCreateStack(stacks, stacked, meta);\r\n\tvar pos = stack.pos;\r\n\tvar neg = stack.neg;\r\n\tvar ilen = data.length;\r\n\tvar i, value;\r\n\r\n\tfor (i = 0; i < ilen; ++i) {\r\n\t\tvalue = scale._parseValue(data[i]);\r\n\t\tif (isNaN(value.min) || isNaN(value.max) || meta.data[i].hidden) {\r\n\t\t\tcontinue;\r\n\t\t}\r\n\r\n\t\tpos[i] = pos[i] || 0;\r\n\t\tneg[i] = neg[i] || 0;\r\n\r\n\t\tif (opts.relativePoints) {\r\n\t\t\tpos[i] = 100;\r\n\t\t} else if (value.min < 0 || value.max < 0) {\r\n\t\t\tneg[i] += value.min;\r\n\t\t} else {\r\n\t\t\tpos[i] += value.max;\r\n\t\t}\r\n\t}\r\n}\r\n\r\nfunction updateMinMax(scale, meta, data) {\r\n\tvar ilen = data.length;\r\n\tvar i, value;\r\n\r\n\tfor (i = 0; i < ilen; ++i) {\r\n\t\tvalue = scale._parseValue(data[i]);\r\n\t\tif (isNaN(value.min) || isNaN(value.max) || meta.data[i].hidden) {\r\n\t\t\tcontinue;\r\n\t\t}\r\n\r\n\t\tscale.min = Math.min(scale.min, value.min);\r\n\t\tscale.max = Math.max(scale.max, value.max);\r\n\t}\r\n}\r\n\r\nvar scale_linear = scale_linearbase.extend({\r\n\tdetermineDataLimits: function() {\r\n\t\tvar me = this;\r\n\t\tvar opts = me.options;\r\n\t\tvar chart = me.chart;\r\n\t\tvar datasets = chart.data.datasets;\r\n\t\tvar metasets = me._getMatchingVisibleMetas();\r\n\t\tvar hasStacks = opts.stacked;\r\n\t\tvar stacks = {};\r\n\t\tvar ilen = metasets.length;\r\n\t\tvar i, meta, data, values;\r\n\r\n\t\tme.min = Number.POSITIVE_INFINITY;\r\n\t\tme.max = Number.NEGATIVE_INFINITY;\r\n\r\n\t\tif (hasStacks === undefined) {\r\n\t\t\tfor (i = 0; !hasStacks && i < ilen; ++i) {\r\n\t\t\t\tmeta = metasets[i];\r\n\t\t\t\thasStacks = meta.stack !== undefined;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfor (i = 0; i < ilen; ++i) {\r\n\t\t\tmeta = metasets[i];\r\n\t\t\tdata = datasets[meta.index].data;\r\n\t\t\tif (hasStacks) {\r\n\t\t\t\tstackData(me, stacks, meta, data);\r\n\t\t\t} else {\r\n\t\t\t\tupdateMinMax(me, meta, data);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\thelpers$1.each(stacks, function(stackValues) {\r\n\t\t\tvalues = stackValues.pos.concat(stackValues.neg);\r\n\t\t\tme.min = Math.min(me.min, helpers$1.min(values));\r\n\t\t\tme.max = Math.max(me.max, helpers$1.max(values));\r\n\t\t});\r\n\r\n\t\tme.min = helpers$1.isFinite(me.min) && !isNaN(me.min) ? me.min : DEFAULT_MIN;\r\n\t\tme.max = helpers$1.isFinite(me.max) && !isNaN(me.max) ? me.max : DEFAULT_MAX;\r\n\r\n\t\t// Common base implementation to handle ticks.min, ticks.max, ticks.beginAtZero\r\n\t\tme.handleTickRangeOptions();\r\n\t},\r\n\r\n\t// Returns the maximum number of ticks based on the scale dimension\r\n\t_computeTickLimit: function() {\r\n\t\tvar me = this;\r\n\t\tvar tickFont;\r\n\r\n\t\tif (me.isHorizontal()) {\r\n\t\t\treturn Math.ceil(me.width / 40);\r\n\t\t}\r\n\t\ttickFont = helpers$1.options._parseFont(me.options.ticks);\r\n\t\treturn Math.ceil(me.height / tickFont.lineHeight);\r\n\t},\r\n\r\n\t// Called after the ticks are built. We need\r\n\thandleDirectionalChanges: function() {\r\n\t\tif (!this.isHorizontal()) {\r\n\t\t\t// We are in a vertical orientation. The top value is the highest. So reverse the array\r\n\t\t\tthis.ticks.reverse();\r\n\t\t}\r\n\t},\r\n\r\n\tgetLabelForIndex: function(index, datasetIndex) {\r\n\t\treturn this._getScaleLabel(this.chart.data.datasets[datasetIndex].data[index]);\r\n\t},\r\n\r\n\t// Utils\r\n\tgetPixelForValue: function(value) {\r\n\t\tvar me = this;\r\n\t\treturn me.getPixelForDecimal((+me.getRightValue(value) - me._startValue) / me._valueRange);\r\n\t},\r\n\r\n\tgetValueForPixel: function(pixel) {\r\n\t\treturn this._startValue + this.getDecimalForPixel(pixel) * this._valueRange;\r\n\t},\r\n\r\n\tgetPixelForTick: function(index) {\r\n\t\tvar ticks = this.ticksAsNumbers;\r\n\t\tif (index < 0 || index > ticks.length - 1) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\treturn this.getPixelForValue(ticks[index]);\r\n\t}\r\n});\r\n\r\n// INTERNAL: static default options, registered in src/index.js\r\nvar _defaults$1 = defaultConfig$1;\nscale_linear._defaults = _defaults$1;\n\nvar valueOrDefault$b = helpers$1.valueOrDefault;\r\nvar log10 = helpers$1.math.log10;\r\n\r\n/**\r\n * Generate a set of logarithmic ticks\r\n * @param generationOptions the options used to generate the ticks\r\n * @param dataRange the range of the data\r\n * @returns {number[]} array of tick values\r\n */\r\nfunction generateTicks$1(generationOptions, dataRange) {\r\n\tvar ticks = [];\r\n\r\n\tvar tickVal = valueOrDefault$b(generationOptions.min, Math.pow(10, Math.floor(log10(dataRange.min))));\r\n\r\n\tvar endExp = Math.floor(log10(dataRange.max));\r\n\tvar endSignificand = Math.ceil(dataRange.max / Math.pow(10, endExp));\r\n\tvar exp, significand;\r\n\r\n\tif (tickVal === 0) {\r\n\t\texp = Math.floor(log10(dataRange.minNotZero));\r\n\t\tsignificand = Math.floor(dataRange.minNotZero / Math.pow(10, exp));\r\n\r\n\t\tticks.push(tickVal);\r\n\t\ttickVal = significand * Math.pow(10, exp);\r\n\t} else {\r\n\t\texp = Math.floor(log10(tickVal));\r\n\t\tsignificand = Math.floor(tickVal / Math.pow(10, exp));\r\n\t}\r\n\tvar precision = exp < 0 ? Math.pow(10, Math.abs(exp)) : 1;\r\n\r\n\tdo {\r\n\t\tticks.push(tickVal);\r\n\r\n\t\t++significand;\r\n\t\tif (significand === 10) {\r\n\t\t\tsignificand = 1;\r\n\t\t\t++exp;\r\n\t\t\tprecision = exp >= 0 ? 1 : precision;\r\n\t\t}\r\n\r\n\t\ttickVal = Math.round(significand * Math.pow(10, exp) * precision) / precision;\r\n\t} while (exp < endExp || (exp === endExp && significand < endSignificand));\r\n\r\n\tvar lastTick = valueOrDefault$b(generationOptions.max, tickVal);\r\n\tticks.push(lastTick);\r\n\r\n\treturn ticks;\r\n}\r\n\r\nvar defaultConfig$2 = {\r\n\tposition: 'left',\r\n\r\n\t// label settings\r\n\tticks: {\r\n\t\tcallback: core_ticks.formatters.logarithmic\r\n\t}\r\n};\r\n\r\n// TODO(v3): change this to positiveOrDefault\r\nfunction nonNegativeOrDefault(value, defaultValue) {\r\n\treturn helpers$1.isFinite(value) && value >= 0 ? value : defaultValue;\r\n}\r\n\r\nvar scale_logarithmic = core_scale.extend({\r\n\tdetermineDataLimits: function() {\r\n\t\tvar me = this;\r\n\t\tvar opts = me.options;\r\n\t\tvar chart = me.chart;\r\n\t\tvar datasets = chart.data.datasets;\r\n\t\tvar isHorizontal = me.isHorizontal();\r\n\t\tfunction IDMatches(meta) {\r\n\t\t\treturn isHorizontal ? meta.xAxisID === me.id : meta.yAxisID === me.id;\r\n\t\t}\r\n\t\tvar datasetIndex, meta, value, data, i, ilen;\r\n\r\n\t\t// Calculate Range\r\n\t\tme.min = Number.POSITIVE_INFINITY;\r\n\t\tme.max = Number.NEGATIVE_INFINITY;\r\n\t\tme.minNotZero = Number.POSITIVE_INFINITY;\r\n\r\n\t\tvar hasStacks = opts.stacked;\r\n\t\tif (hasStacks === undefined) {\r\n\t\t\tfor (datasetIndex = 0; datasetIndex < datasets.length; datasetIndex++) {\r\n\t\t\t\tmeta = chart.getDatasetMeta(datasetIndex);\r\n\t\t\t\tif (chart.isDatasetVisible(datasetIndex) && IDMatches(meta) &&\r\n\t\t\t\t\tmeta.stack !== undefined) {\r\n\t\t\t\t\thasStacks = true;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (opts.stacked || hasStacks) {\r\n\t\t\tvar valuesPerStack = {};\r\n\r\n\t\t\tfor (datasetIndex = 0; datasetIndex < datasets.length; datasetIndex++) {\r\n\t\t\t\tmeta = chart.getDatasetMeta(datasetIndex);\r\n\t\t\t\tvar key = [\r\n\t\t\t\t\tmeta.type,\r\n\t\t\t\t\t// we have a separate stack for stack=undefined datasets when the opts.stacked is undefined\r\n\t\t\t\t\t((opts.stacked === undefined && meta.stack === undefined) ? datasetIndex : ''),\r\n\t\t\t\t\tmeta.stack\r\n\t\t\t\t].join('.');\r\n\r\n\t\t\t\tif (chart.isDatasetVisible(datasetIndex) && IDMatches(meta)) {\r\n\t\t\t\t\tif (valuesPerStack[key] === undefined) {\r\n\t\t\t\t\t\tvaluesPerStack[key] = [];\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tdata = datasets[datasetIndex].data;\r\n\t\t\t\t\tfor (i = 0, ilen = data.length; i < ilen; i++) {\r\n\t\t\t\t\t\tvar values = valuesPerStack[key];\r\n\t\t\t\t\t\tvalue = me._parseValue(data[i]);\r\n\t\t\t\t\t\t// invalid, hidden and negative values are ignored\r\n\t\t\t\t\t\tif (isNaN(value.min) || isNaN(value.max) || meta.data[i].hidden || value.min < 0 || value.max < 0) {\r\n\t\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tvalues[i] = values[i] || 0;\r\n\t\t\t\t\t\tvalues[i] += value.max;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\thelpers$1.each(valuesPerStack, function(valuesForType) {\r\n\t\t\t\tif (valuesForType.length > 0) {\r\n\t\t\t\t\tvar minVal = helpers$1.min(valuesForType);\r\n\t\t\t\t\tvar maxVal = helpers$1.max(valuesForType);\r\n\t\t\t\t\tme.min = Math.min(me.min, minVal);\r\n\t\t\t\t\tme.max = Math.max(me.max, maxVal);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t} else {\r\n\t\t\tfor (datasetIndex = 0; datasetIndex < datasets.length; datasetIndex++) {\r\n\t\t\t\tmeta = chart.getDatasetMeta(datasetIndex);\r\n\t\t\t\tif (chart.isDatasetVisible(datasetIndex) && IDMatches(meta)) {\r\n\t\t\t\t\tdata = datasets[datasetIndex].data;\r\n\t\t\t\t\tfor (i = 0, ilen = data.length; i < ilen; i++) {\r\n\t\t\t\t\t\tvalue = me._parseValue(data[i]);\r\n\t\t\t\t\t\t// invalid, hidden and negative values are ignored\r\n\t\t\t\t\t\tif (isNaN(value.min) || isNaN(value.max) || meta.data[i].hidden || value.min < 0 || value.max < 0) {\r\n\t\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tme.min = Math.min(value.min, me.min);\r\n\t\t\t\t\t\tme.max = Math.max(value.max, me.max);\r\n\r\n\t\t\t\t\t\tif (value.min !== 0) {\r\n\t\t\t\t\t\t\tme.minNotZero = Math.min(value.min, me.minNotZero);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tme.min = helpers$1.isFinite(me.min) ? me.min : null;\r\n\t\tme.max = helpers$1.isFinite(me.max) ? me.max : null;\r\n\t\tme.minNotZero = helpers$1.isFinite(me.minNotZero) ? me.minNotZero : null;\r\n\r\n\t\t// Common base implementation to handle ticks.min, ticks.max\r\n\t\tthis.handleTickRangeOptions();\r\n\t},\r\n\r\n\thandleTickRangeOptions: function() {\r\n\t\tvar me = this;\r\n\t\tvar tickOpts = me.options.ticks;\r\n\t\tvar DEFAULT_MIN = 1;\r\n\t\tvar DEFAULT_MAX = 10;\r\n\r\n\t\tme.min = nonNegativeOrDefault(tickOpts.min, me.min);\r\n\t\tme.max = nonNegativeOrDefault(tickOpts.max, me.max);\r\n\r\n\t\tif (me.min === me.max) {\r\n\t\t\tif (me.min !== 0 && me.min !== null) {\r\n\t\t\t\tme.min = Math.pow(10, Math.floor(log10(me.min)) - 1);\r\n\t\t\t\tme.max = Math.pow(10, Math.floor(log10(me.max)) + 1);\r\n\t\t\t} else {\r\n\t\t\t\tme.min = DEFAULT_MIN;\r\n\t\t\t\tme.max = DEFAULT_MAX;\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (me.min === null) {\r\n\t\t\tme.min = Math.pow(10, Math.floor(log10(me.max)) - 1);\r\n\t\t}\r\n\t\tif (me.max === null) {\r\n\t\t\tme.max = me.min !== 0\r\n\t\t\t\t? Math.pow(10, Math.floor(log10(me.min)) + 1)\r\n\t\t\t\t: DEFAULT_MAX;\r\n\t\t}\r\n\t\tif (me.minNotZero === null) {\r\n\t\t\tif (me.min > 0) {\r\n\t\t\t\tme.minNotZero = me.min;\r\n\t\t\t} else if (me.max < 1) {\r\n\t\t\t\tme.minNotZero = Math.pow(10, Math.floor(log10(me.max)));\r\n\t\t\t} else {\r\n\t\t\t\tme.minNotZero = DEFAULT_MIN;\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\tbuildTicks: function() {\r\n\t\tvar me = this;\r\n\t\tvar tickOpts = me.options.ticks;\r\n\t\tvar reverse = !me.isHorizontal();\r\n\r\n\t\tvar generationOptions = {\r\n\t\t\tmin: nonNegativeOrDefault(tickOpts.min),\r\n\t\t\tmax: nonNegativeOrDefault(tickOpts.max)\r\n\t\t};\r\n\t\tvar ticks = me.ticks = generateTicks$1(generationOptions, me);\r\n\r\n\t\t// At this point, we need to update our max and min given the tick values since we have expanded the\r\n\t\t// range of the scale\r\n\t\tme.max = helpers$1.max(ticks);\r\n\t\tme.min = helpers$1.min(ticks);\r\n\r\n\t\tif (tickOpts.reverse) {\r\n\t\t\treverse = !reverse;\r\n\t\t\tme.start = me.max;\r\n\t\t\tme.end = me.min;\r\n\t\t} else {\r\n\t\t\tme.start = me.min;\r\n\t\t\tme.end = me.max;\r\n\t\t}\r\n\t\tif (reverse) {\r\n\t\t\tticks.reverse();\r\n\t\t}\r\n\t},\r\n\r\n\tconvertTicksToLabels: function() {\r\n\t\tthis.tickValues = this.ticks.slice();\r\n\r\n\t\tcore_scale.prototype.convertTicksToLabels.call(this);\r\n\t},\r\n\r\n\t// Get the correct tooltip label\r\n\tgetLabelForIndex: function(index, datasetIndex) {\r\n\t\treturn this._getScaleLabel(this.chart.data.datasets[datasetIndex].data[index]);\r\n\t},\r\n\r\n\tgetPixelForTick: function(index) {\r\n\t\tvar ticks = this.tickValues;\r\n\t\tif (index < 0 || index > ticks.length - 1) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\treturn this.getPixelForValue(ticks[index]);\r\n\t},\r\n\r\n\t/**\r\n\t * Returns the value of the first tick.\r\n\t * @param {number} value - The minimum not zero value.\r\n\t * @return {number} The first tick value.\r\n\t * @private\r\n\t */\r\n\t_getFirstTickValue: function(value) {\r\n\t\tvar exp = Math.floor(log10(value));\r\n\t\tvar significand = Math.floor(value / Math.pow(10, exp));\r\n\r\n\t\treturn significand * Math.pow(10, exp);\r\n\t},\r\n\r\n\t_configure: function() {\r\n\t\tvar me = this;\r\n\t\tvar start = me.min;\r\n\t\tvar offset = 0;\r\n\r\n\t\tcore_scale.prototype._configure.call(me);\r\n\r\n\t\tif (start === 0) {\r\n\t\t\tstart = me._getFirstTickValue(me.minNotZero);\r\n\t\t\toffset = valueOrDefault$b(me.options.ticks.fontSize, core_defaults.global.defaultFontSize) / me._length;\r\n\t\t}\r\n\r\n\t\tme._startValue = log10(start);\r\n\t\tme._valueOffset = offset;\r\n\t\tme._valueRange = (log10(me.max) - log10(start)) / (1 - offset);\r\n\t},\r\n\r\n\tgetPixelForValue: function(value) {\r\n\t\tvar me = this;\r\n\t\tvar decimal = 0;\r\n\r\n\t\tvalue = +me.getRightValue(value);\r\n\r\n\t\tif (value > me.min && value > 0) {\r\n\t\t\tdecimal = (log10(value) - me._startValue) / me._valueRange + me._valueOffset;\r\n\t\t}\r\n\t\treturn me.getPixelForDecimal(decimal);\r\n\t},\r\n\r\n\tgetValueForPixel: function(pixel) {\r\n\t\tvar me = this;\r\n\t\tvar decimal = me.getDecimalForPixel(pixel);\r\n\t\treturn decimal === 0 && me.min === 0\r\n\t\t\t? 0\r\n\t\t\t: Math.pow(10, me._startValue + (decimal - me._valueOffset) * me._valueRange);\r\n\t}\r\n});\r\n\r\n// INTERNAL: static default options, registered in src/index.js\r\nvar _defaults$2 = defaultConfig$2;\nscale_logarithmic._defaults = _defaults$2;\n\nvar valueOrDefault$c = helpers$1.valueOrDefault;\r\nvar valueAtIndexOrDefault$1 = helpers$1.valueAtIndexOrDefault;\r\nvar resolve$4 = helpers$1.options.resolve;\r\n\r\nvar defaultConfig$3 = {\r\n\tdisplay: true,\r\n\r\n\t// Boolean - Whether to animate scaling the chart from the centre\r\n\tanimate: true,\r\n\tposition: 'chartArea',\r\n\r\n\tangleLines: {\r\n\t\tdisplay: true,\r\n\t\tcolor: 'rgba(0,0,0,0.1)',\r\n\t\tlineWidth: 1,\r\n\t\tborderDash: [],\r\n\t\tborderDashOffset: 0.0\r\n\t},\r\n\r\n\tgridLines: {\r\n\t\tcircular: false\r\n\t},\r\n\r\n\t// label settings\r\n\tticks: {\r\n\t\t// Boolean - Show a backdrop to the scale label\r\n\t\tshowLabelBackdrop: true,\r\n\r\n\t\t// String - The colour of the label backdrop\r\n\t\tbackdropColor: 'rgba(255,255,255,0.75)',\r\n\r\n\t\t// Number - The backdrop padding above & below the label in pixels\r\n\t\tbackdropPaddingY: 2,\r\n\r\n\t\t// Number - The backdrop padding to the side of the label in pixels\r\n\t\tbackdropPaddingX: 2,\r\n\r\n\t\tcallback: core_ticks.formatters.linear\r\n\t},\r\n\r\n\tpointLabels: {\r\n\t\t// Boolean - if true, show point labels\r\n\t\tdisplay: true,\r\n\r\n\t\t// Number - Point label font size in pixels\r\n\t\tfontSize: 10,\r\n\r\n\t\t// Function - Used to convert point labels\r\n\t\tcallback: function(label) {\r\n\t\t\treturn label;\r\n\t\t}\r\n\t}\r\n};\r\n\r\nfunction getTickBackdropHeight(opts) {\r\n\tvar tickOpts = opts.ticks;\r\n\r\n\tif (tickOpts.display && opts.display) {\r\n\t\treturn valueOrDefault$c(tickOpts.fontSize, core_defaults.global.defaultFontSize) + tickOpts.backdropPaddingY * 2;\r\n\t}\r\n\treturn 0;\r\n}\r\n\r\nfunction measureLabelSize(ctx, lineHeight, label) {\r\n\tif (helpers$1.isArray(label)) {\r\n\t\treturn {\r\n\t\t\tw: helpers$1.longestText(ctx, ctx.font, label),\r\n\t\t\th: label.length * lineHeight\r\n\t\t};\r\n\t}\r\n\r\n\treturn {\r\n\t\tw: ctx.measureText(label).width,\r\n\t\th: lineHeight\r\n\t};\r\n}\r\n\r\nfunction determineLimits(angle, pos, size, min, max) {\r\n\tif (angle === min || angle === max) {\r\n\t\treturn {\r\n\t\t\tstart: pos - (size / 2),\r\n\t\t\tend: pos + (size / 2)\r\n\t\t};\r\n\t} else if (angle < min || angle > max) {\r\n\t\treturn {\r\n\t\t\tstart: pos - size,\r\n\t\t\tend: pos\r\n\t\t};\r\n\t}\r\n\r\n\treturn {\r\n\t\tstart: pos,\r\n\t\tend: pos + size\r\n\t};\r\n}\r\n\r\n/**\r\n * Helper function to fit a radial linear scale with point labels\r\n */\r\nfunction fitWithPointLabels(scale) {\r\n\r\n\t// Right, this is really confusing and there is a lot of maths going on here\r\n\t// The gist of the problem is here: https://gist.github.com/nnnick/696cc9c55f4b0beb8fe9\r\n\t//\r\n\t// Reaction: https://dl.dropboxusercontent.com/u/34601363/toomuchscience.gif\r\n\t//\r\n\t// Solution:\r\n\t//\r\n\t// We assume the radius of the polygon is half the size of the canvas at first\r\n\t// at each index we check if the text overlaps.\r\n\t//\r\n\t// Where it does, we store that angle and that index.\r\n\t//\r\n\t// After finding the largest index and angle we calculate how much we need to remove\r\n\t// from the shape radius to move the point inwards by that x.\r\n\t//\r\n\t// We average the left and right distances to get the maximum shape radius that can fit in the box\r\n\t// along with labels.\r\n\t//\r\n\t// Once we have that, we can find the centre point for the chart, by taking the x text protrusion\r\n\t// on each side, removing that from the size, halving it and adding the left x protrusion width.\r\n\t//\r\n\t// This will mean we have a shape fitted to the canvas, as large as it can be with the labels\r\n\t// and position it in the most space efficient manner\r\n\t//\r\n\t// https://dl.dropboxusercontent.com/u/34601363/yeahscience.gif\r\n\r\n\tvar plFont = helpers$1.options._parseFont(scale.options.pointLabels);\r\n\r\n\t// Get maximum radius of the polygon. Either half the height (minus the text width) or half the width.\r\n\t// Use this to calculate the offset + change. - Make sure L/R protrusion is at least 0 to stop issues with centre points\r\n\tvar furthestLimits = {\r\n\t\tl: 0,\r\n\t\tr: scale.width,\r\n\t\tt: 0,\r\n\t\tb: scale.height - scale.paddingTop\r\n\t};\r\n\tvar furthestAngles = {};\r\n\tvar i, textSize, pointPosition;\r\n\r\n\tscale.ctx.font = plFont.string;\r\n\tscale._pointLabelSizes = [];\r\n\r\n\tvar valueCount = scale.chart.data.labels.length;\r\n\tfor (i = 0; i < valueCount; i++) {\r\n\t\tpointPosition = scale.getPointPosition(i, scale.drawingArea + 5);\r\n\t\ttextSize = measureLabelSize(scale.ctx, plFont.lineHeight, scale.pointLabels[i]);\r\n\t\tscale._pointLabelSizes[i] = textSize;\r\n\r\n\t\t// Add quarter circle to make degree 0 mean top of circle\r\n\t\tvar angleRadians = scale.getIndexAngle(i);\r\n\t\tvar angle = helpers$1.toDegrees(angleRadians) % 360;\r\n\t\tvar hLimits = determineLimits(angle, pointPosition.x, textSize.w, 0, 180);\r\n\t\tvar vLimits = determineLimits(angle, pointPosition.y, textSize.h, 90, 270);\r\n\r\n\t\tif (hLimits.start < furthestLimits.l) {\r\n\t\t\tfurthestLimits.l = hLimits.start;\r\n\t\t\tfurthestAngles.l = angleRadians;\r\n\t\t}\r\n\r\n\t\tif (hLimits.end > furthestLimits.r) {\r\n\t\t\tfurthestLimits.r = hLimits.end;\r\n\t\t\tfurthestAngles.r = angleRadians;\r\n\t\t}\r\n\r\n\t\tif (vLimits.start < furthestLimits.t) {\r\n\t\t\tfurthestLimits.t = vLimits.start;\r\n\t\t\tfurthestAngles.t = angleRadians;\r\n\t\t}\r\n\r\n\t\tif (vLimits.end > furthestLimits.b) {\r\n\t\t\tfurthestLimits.b = vLimits.end;\r\n\t\t\tfurthestAngles.b = angleRadians;\r\n\t\t}\r\n\t}\r\n\r\n\tscale.setReductions(scale.drawingArea, furthestLimits, furthestAngles);\r\n}\r\n\r\nfunction getTextAlignForAngle(angle) {\r\n\tif (angle === 0 || angle === 180) {\r\n\t\treturn 'center';\r\n\t} else if (angle < 180) {\r\n\t\treturn 'left';\r\n\t}\r\n\r\n\treturn 'right';\r\n}\r\n\r\nfunction fillText(ctx, text, position, lineHeight) {\r\n\tvar y = position.y + lineHeight / 2;\r\n\tvar i, ilen;\r\n\r\n\tif (helpers$1.isArray(text)) {\r\n\t\tfor (i = 0, ilen = text.length; i < ilen; ++i) {\r\n\t\t\tctx.fillText(text[i], position.x, y);\r\n\t\t\ty += lineHeight;\r\n\t\t}\r\n\t} else {\r\n\t\tctx.fillText(text, position.x, y);\r\n\t}\r\n}\r\n\r\nfunction adjustPointPositionForLabelHeight(angle, textSize, position) {\r\n\tif (angle === 90 || angle === 270) {\r\n\t\tposition.y -= (textSize.h / 2);\r\n\t} else if (angle > 270 || angle < 90) {\r\n\t\tposition.y -= textSize.h;\r\n\t}\r\n}\r\n\r\nfunction drawPointLabels(scale) {\r\n\tvar ctx = scale.ctx;\r\n\tvar opts = scale.options;\r\n\tvar pointLabelOpts = opts.pointLabels;\r\n\tvar tickBackdropHeight = getTickBackdropHeight(opts);\r\n\tvar outerDistance = scale.getDistanceFromCenterForValue(opts.ticks.reverse ? scale.min : scale.max);\r\n\tvar plFont = helpers$1.options._parseFont(pointLabelOpts);\r\n\r\n\tctx.save();\r\n\r\n\tctx.font = plFont.string;\r\n\tctx.textBaseline = 'middle';\r\n\r\n\tfor (var i = scale.chart.data.labels.length - 1; i >= 0; i--) {\r\n\t\t// Extra pixels out for some label spacing\r\n\t\tvar extra = (i === 0 ? tickBackdropHeight / 2 : 0);\r\n\t\tvar pointLabelPosition = scale.getPointPosition(i, outerDistance + extra + 5);\r\n\r\n\t\t// Keep this in loop since we may support array properties here\r\n\t\tvar pointLabelFontColor = valueAtIndexOrDefault$1(pointLabelOpts.fontColor, i, core_defaults.global.defaultFontColor);\r\n\t\tctx.fillStyle = pointLabelFontColor;\r\n\r\n\t\tvar angleRadians = scale.getIndexAngle(i);\r\n\t\tvar angle = helpers$1.toDegrees(angleRadians);\r\n\t\tctx.textAlign = getTextAlignForAngle(angle);\r\n\t\tadjustPointPositionForLabelHeight(angle, scale._pointLabelSizes[i], pointLabelPosition);\r\n\t\tfillText(ctx, scale.pointLabels[i], pointLabelPosition, plFont.lineHeight);\r\n\t}\r\n\tctx.restore();\r\n}\r\n\r\nfunction drawRadiusLine(scale, gridLineOpts, radius, index) {\r\n\tvar ctx = scale.ctx;\r\n\tvar circular = gridLineOpts.circular;\r\n\tvar valueCount = scale.chart.data.labels.length;\r\n\tvar lineColor = valueAtIndexOrDefault$1(gridLineOpts.color, index - 1);\r\n\tvar lineWidth = valueAtIndexOrDefault$1(gridLineOpts.lineWidth, index - 1);\r\n\tvar pointPosition;\r\n\r\n\tif ((!circular && !valueCount) || !lineColor || !lineWidth) {\r\n\t\treturn;\r\n\t}\r\n\r\n\tctx.save();\r\n\tctx.strokeStyle = lineColor;\r\n\tctx.lineWidth = lineWidth;\r\n\tif (ctx.setLineDash) {\r\n\t\tctx.setLineDash(gridLineOpts.borderDash || []);\r\n\t\tctx.lineDashOffset = gridLineOpts.borderDashOffset || 0.0;\r\n\t}\r\n\r\n\tctx.beginPath();\r\n\tif (circular) {\r\n\t\t// Draw circular arcs between the points\r\n\t\tctx.arc(scale.xCenter, scale.yCenter, radius, 0, Math.PI * 2);\r\n\t} else {\r\n\t\t// Draw straight lines connecting each index\r\n\t\tpointPosition = scale.getPointPosition(0, radius);\r\n\t\tctx.moveTo(pointPosition.x, pointPosition.y);\r\n\r\n\t\tfor (var i = 1; i < valueCount; i++) {\r\n\t\t\tpointPosition = scale.getPointPosition(i, radius);\r\n\t\t\tctx.lineTo(pointPosition.x, pointPosition.y);\r\n\t\t}\r\n\t}\r\n\tctx.closePath();\r\n\tctx.stroke();\r\n\tctx.restore();\r\n}\r\n\r\nfunction numberOrZero(param) {\r\n\treturn helpers$1.isNumber(param) ? param : 0;\r\n}\r\n\r\nvar scale_radialLinear = scale_linearbase.extend({\r\n\tsetDimensions: function() {\r\n\t\tvar me = this;\r\n\r\n\t\t// Set the unconstrained dimension before label rotation\r\n\t\tme.width = me.maxWidth;\r\n\t\tme.height = me.maxHeight;\r\n\t\tme.paddingTop = getTickBackdropHeight(me.options) / 2;\r\n\t\tme.xCenter = Math.floor(me.width / 2);\r\n\t\tme.yCenter = Math.floor((me.height - me.paddingTop) / 2);\r\n\t\tme.drawingArea = Math.min(me.height - me.paddingTop, me.width) / 2;\r\n\t},\r\n\r\n\tdetermineDataLimits: function() {\r\n\t\tvar me = this;\r\n\t\tvar chart = me.chart;\r\n\t\tvar min = Number.POSITIVE_INFINITY;\r\n\t\tvar max = Number.NEGATIVE_INFINITY;\r\n\r\n\t\thelpers$1.each(chart.data.datasets, function(dataset, datasetIndex) {\r\n\t\t\tif (chart.isDatasetVisible(datasetIndex)) {\r\n\t\t\t\tvar meta = chart.getDatasetMeta(datasetIndex);\r\n\r\n\t\t\t\thelpers$1.each(dataset.data, function(rawValue, index) {\r\n\t\t\t\t\tvar value = +me.getRightValue(rawValue);\r\n\t\t\t\t\tif (isNaN(value) || meta.data[index].hidden) {\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tmin = Math.min(value, min);\r\n\t\t\t\t\tmax = Math.max(value, max);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tme.min = (min === Number.POSITIVE_INFINITY ? 0 : min);\r\n\t\tme.max = (max === Number.NEGATIVE_INFINITY ? 0 : max);\r\n\r\n\t\t// Common base implementation to handle ticks.min, ticks.max, ticks.beginAtZero\r\n\t\tme.handleTickRangeOptions();\r\n\t},\r\n\r\n\t// Returns the maximum number of ticks based on the scale dimension\r\n\t_computeTickLimit: function() {\r\n\t\treturn Math.ceil(this.drawingArea / getTickBackdropHeight(this.options));\r\n\t},\r\n\r\n\tconvertTicksToLabels: function() {\r\n\t\tvar me = this;\r\n\r\n\t\tscale_linearbase.prototype.convertTicksToLabels.call(me);\r\n\r\n\t\t// Point labels\r\n\t\tme.pointLabels = me.chart.data.labels.map(function() {\r\n\t\t\tvar label = helpers$1.callback(me.options.pointLabels.callback, arguments, me);\r\n\t\t\treturn label || label === 0 ? label : '';\r\n\t\t});\r\n\t},\r\n\r\n\tgetLabelForIndex: function(index, datasetIndex) {\r\n\t\treturn +this.getRightValue(this.chart.data.datasets[datasetIndex].data[index]);\r\n\t},\r\n\r\n\tfit: function() {\r\n\t\tvar me = this;\r\n\t\tvar opts = me.options;\r\n\r\n\t\tif (opts.display && opts.pointLabels.display) {\r\n\t\t\tfitWithPointLabels(me);\r\n\t\t} else {\r\n\t\t\tme.setCenterPoint(0, 0, 0, 0);\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t * Set radius reductions and determine new radius and center point\r\n\t * @private\r\n\t */\r\n\tsetReductions: function(largestPossibleRadius, furthestLimits, furthestAngles) {\r\n\t\tvar me = this;\r\n\t\tvar radiusReductionLeft = furthestLimits.l / Math.sin(furthestAngles.l);\r\n\t\tvar radiusReductionRight = Math.max(furthestLimits.r - me.width, 0) / Math.sin(furthestAngles.r);\r\n\t\tvar radiusReductionTop = -furthestLimits.t / Math.cos(furthestAngles.t);\r\n\t\tvar radiusReductionBottom = -Math.max(furthestLimits.b - (me.height - me.paddingTop), 0) / Math.cos(furthestAngles.b);\r\n\r\n\t\tradiusReductionLeft = numberOrZero(radiusReductionLeft);\r\n\t\tradiusReductionRight = numberOrZero(radiusReductionRight);\r\n\t\tradiusReductionTop = numberOrZero(radiusReductionTop);\r\n\t\tradiusReductionBottom = numberOrZero(radiusReductionBottom);\r\n\r\n\t\tme.drawingArea = Math.min(\r\n\t\t\tMath.floor(largestPossibleRadius - (radiusReductionLeft + radiusReductionRight) / 2),\r\n\t\t\tMath.floor(largestPossibleRadius - (radiusReductionTop + radiusReductionBottom) / 2));\r\n\t\tme.setCenterPoint(radiusReductionLeft, radiusReductionRight, radiusReductionTop, radiusReductionBottom);\r\n\t},\r\n\r\n\tsetCenterPoint: function(leftMovement, rightMovement, topMovement, bottomMovement) {\r\n\t\tvar me = this;\r\n\t\tvar maxRight = me.width - rightMovement - me.drawingArea;\r\n\t\tvar maxLeft = leftMovement + me.drawingArea;\r\n\t\tvar maxTop = topMovement + me.drawingArea;\r\n\t\tvar maxBottom = (me.height - me.paddingTop) - bottomMovement - me.drawingArea;\r\n\r\n\t\tme.xCenter = Math.floor(((maxLeft + maxRight) / 2) + me.left);\r\n\t\tme.yCenter = Math.floor(((maxTop + maxBottom) / 2) + me.top + me.paddingTop);\r\n\t},\r\n\r\n\tgetIndexAngle: function(index) {\r\n\t\tvar chart = this.chart;\r\n\t\tvar angleMultiplier = 360 / chart.data.labels.length;\r\n\t\tvar options = chart.options || {};\r\n\t\tvar startAngle = options.startAngle || 0;\r\n\r\n\t\t// Start from the top instead of right, so remove a quarter of the circle\r\n\t\tvar angle = (index * angleMultiplier + startAngle) % 360;\r\n\r\n\t\treturn (angle < 0 ? angle + 360 : angle) * Math.PI * 2 / 360;\r\n\t},\r\n\r\n\tgetDistanceFromCenterForValue: function(value) {\r\n\t\tvar me = this;\r\n\r\n\t\tif (helpers$1.isNullOrUndef(value)) {\r\n\t\t\treturn NaN;\r\n\t\t}\r\n\r\n\t\t// Take into account half font size + the yPadding of the top value\r\n\t\tvar scalingFactor = me.drawingArea / (me.max - me.min);\r\n\t\tif (me.options.ticks.reverse) {\r\n\t\t\treturn (me.max - value) * scalingFactor;\r\n\t\t}\r\n\t\treturn (value - me.min) * scalingFactor;\r\n\t},\r\n\r\n\tgetPointPosition: function(index, distanceFromCenter) {\r\n\t\tvar me = this;\r\n\t\tvar thisAngle = me.getIndexAngle(index) - (Math.PI / 2);\r\n\t\treturn {\r\n\t\t\tx: Math.cos(thisAngle) * distanceFromCenter + me.xCenter,\r\n\t\t\ty: Math.sin(thisAngle) * distanceFromCenter + me.yCenter\r\n\t\t};\r\n\t},\r\n\r\n\tgetPointPositionForValue: function(index, value) {\r\n\t\treturn this.getPointPosition(index, this.getDistanceFromCenterForValue(value));\r\n\t},\r\n\r\n\tgetBasePosition: function(index) {\r\n\t\tvar me = this;\r\n\t\tvar min = me.min;\r\n\t\tvar max = me.max;\r\n\r\n\t\treturn me.getPointPositionForValue(index || 0,\r\n\t\t\tme.beginAtZero ? 0 :\r\n\t\t\tmin < 0 && max < 0 ? max :\r\n\t\t\tmin > 0 && max > 0 ? min :\r\n\t\t\t0);\r\n\t},\r\n\r\n\t/**\r\n\t * @private\r\n\t */\r\n\t_drawGrid: function() {\r\n\t\tvar me = this;\r\n\t\tvar ctx = me.ctx;\r\n\t\tvar opts = me.options;\r\n\t\tvar gridLineOpts = opts.gridLines;\r\n\t\tvar angleLineOpts = opts.angleLines;\r\n\t\tvar lineWidth = valueOrDefault$c(angleLineOpts.lineWidth, gridLineOpts.lineWidth);\r\n\t\tvar lineColor = valueOrDefault$c(angleLineOpts.color, gridLineOpts.color);\r\n\t\tvar i, offset, position;\r\n\r\n\t\tif (opts.pointLabels.display) {\r\n\t\t\tdrawPointLabels(me);\r\n\t\t}\r\n\r\n\t\tif (gridLineOpts.display) {\r\n\t\t\thelpers$1.each(me.ticks, function(label, index) {\r\n\t\t\t\tif (index !== 0) {\r\n\t\t\t\t\toffset = me.getDistanceFromCenterForValue(me.ticksAsNumbers[index]);\r\n\t\t\t\t\tdrawRadiusLine(me, gridLineOpts, offset, index);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tif (angleLineOpts.display && lineWidth && lineColor) {\r\n\t\t\tctx.save();\r\n\t\t\tctx.lineWidth = lineWidth;\r\n\t\t\tctx.strokeStyle = lineColor;\r\n\t\t\tif (ctx.setLineDash) {\r\n\t\t\t\tctx.setLineDash(resolve$4([angleLineOpts.borderDash, gridLineOpts.borderDash, []]));\r\n\t\t\t\tctx.lineDashOffset = resolve$4([angleLineOpts.borderDashOffset, gridLineOpts.borderDashOffset, 0.0]);\r\n\t\t\t}\r\n\r\n\t\t\tfor (i = me.chart.data.labels.length - 1; i >= 0; i--) {\r\n\t\t\t\toffset = me.getDistanceFromCenterForValue(opts.ticks.reverse ? me.min : me.max);\r\n\t\t\t\tposition = me.getPointPosition(i, offset);\r\n\t\t\t\tctx.beginPath();\r\n\t\t\t\tctx.moveTo(me.xCenter, me.yCenter);\r\n\t\t\t\tctx.lineTo(position.x, position.y);\r\n\t\t\t\tctx.stroke();\r\n\t\t\t}\r\n\r\n\t\t\tctx.restore();\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t * @private\r\n\t */\r\n\t_drawLabels: function() {\r\n\t\tvar me = this;\r\n\t\tvar ctx = me.ctx;\r\n\t\tvar opts = me.options;\r\n\t\tvar tickOpts = opts.ticks;\r\n\r\n\t\tif (!tickOpts.display) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tvar startAngle = me.getIndexAngle(0);\r\n\t\tvar tickFont = helpers$1.options._parseFont(tickOpts);\r\n\t\tvar tickFontColor = valueOrDefault$c(tickOpts.fontColor, core_defaults.global.defaultFontColor);\r\n\t\tvar offset, width;\r\n\r\n\t\tctx.save();\r\n\t\tctx.font = tickFont.string;\r\n\t\tctx.translate(me.xCenter, me.yCenter);\r\n\t\tctx.rotate(startAngle);\r\n\t\tctx.textAlign = 'center';\r\n\t\tctx.textBaseline = 'middle';\r\n\r\n\t\thelpers$1.each(me.ticks, function(label, index) {\r\n\t\t\tif (index === 0 && !tickOpts.reverse) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\toffset = me.getDistanceFromCenterForValue(me.ticksAsNumbers[index]);\r\n\r\n\t\t\tif (tickOpts.showLabelBackdrop) {\r\n\t\t\t\twidth = ctx.measureText(label).width;\r\n\t\t\t\tctx.fillStyle = tickOpts.backdropColor;\r\n\r\n\t\t\t\tctx.fillRect(\r\n\t\t\t\t\t-width / 2 - tickOpts.backdropPaddingX,\r\n\t\t\t\t\t-offset - tickFont.size / 2 - tickOpts.backdropPaddingY,\r\n\t\t\t\t\twidth + tickOpts.backdropPaddingX * 2,\r\n\t\t\t\t\ttickFont.size + tickOpts.backdropPaddingY * 2\r\n\t\t\t\t);\r\n\t\t\t}\r\n\r\n\t\t\tctx.fillStyle = tickFontColor;\r\n\t\t\tctx.fillText(label, 0, -offset);\r\n\t\t});\r\n\r\n\t\tctx.restore();\r\n\t},\r\n\r\n\t/**\r\n\t * @private\r\n\t */\r\n\t_drawTitle: helpers$1.noop\r\n});\r\n\r\n// INTERNAL: static default options, registered in src/index.js\r\nvar _defaults$3 = defaultConfig$3;\nscale_radialLinear._defaults = _defaults$3;\n\nvar deprecated$1 = helpers$1._deprecated;\r\nvar resolve$5 = helpers$1.options.resolve;\r\nvar valueOrDefault$d = helpers$1.valueOrDefault;\r\n\r\n// Integer constants are from the ES6 spec.\r\nvar MIN_INTEGER = Number.MIN_SAFE_INTEGER || -9007199254740991;\r\nvar MAX_INTEGER = Number.MAX_SAFE_INTEGER || 9007199254740991;\r\n\r\nvar INTERVALS = {\r\n\tmillisecond: {\r\n\t\tcommon: true,\r\n\t\tsize: 1,\r\n\t\tsteps: 1000\r\n\t},\r\n\tsecond: {\r\n\t\tcommon: true,\r\n\t\tsize: 1000,\r\n\t\tsteps: 60\r\n\t},\r\n\tminute: {\r\n\t\tcommon: true,\r\n\t\tsize: 60000,\r\n\t\tsteps: 60\r\n\t},\r\n\thour: {\r\n\t\tcommon: true,\r\n\t\tsize: 3600000,\r\n\t\tsteps: 24\r\n\t},\r\n\tday: {\r\n\t\tcommon: true,\r\n\t\tsize: 86400000,\r\n\t\tsteps: 30\r\n\t},\r\n\tweek: {\r\n\t\tcommon: false,\r\n\t\tsize: 604800000,\r\n\t\tsteps: 4\r\n\t},\r\n\tmonth: {\r\n\t\tcommon: true,\r\n\t\tsize: 2.628e9,\r\n\t\tsteps: 12\r\n\t},\r\n\tquarter: {\r\n\t\tcommon: false,\r\n\t\tsize: 7.884e9,\r\n\t\tsteps: 4\r\n\t},\r\n\tyear: {\r\n\t\tcommon: true,\r\n\t\tsize: 3.154e10\r\n\t}\r\n};\r\n\r\nvar UNITS = Object.keys(INTERVALS);\r\n\r\nfunction sorter(a, b) {\r\n\treturn a - b;\r\n}\r\n\r\nfunction arrayUnique(items) {\r\n\tvar hash = {};\r\n\tvar out = [];\r\n\tvar i, ilen, item;\r\n\r\n\tfor (i = 0, ilen = items.length; i < ilen; ++i) {\r\n\t\titem = items[i];\r\n\t\tif (!hash[item]) {\r\n\t\t\thash[item] = true;\r\n\t\t\tout.push(item);\r\n\t\t}\r\n\t}\r\n\r\n\treturn out;\r\n}\r\n\r\nfunction getMin(options) {\r\n\treturn helpers$1.valueOrDefault(options.time.min, options.ticks.min);\r\n}\r\n\r\nfunction getMax(options) {\r\n\treturn helpers$1.valueOrDefault(options.time.max, options.ticks.max);\r\n}\r\n\r\n/**\r\n * Returns an array of {time, pos} objects used to interpolate a specific `time` or position\r\n * (`pos`) on the scale, by searching entries before and after the requested value. `pos` is\r\n * a decimal between 0 and 1: 0 being the start of the scale (left or top) and 1 the other\r\n * extremity (left + width or top + height). Note that it would be more optimized to directly\r\n * store pre-computed pixels, but the scale dimensions are not guaranteed at the time we need\r\n * to create the lookup table. The table ALWAYS contains at least two items: min and max.\r\n *\r\n * @param {number[]} timestamps - timestamps sorted from lowest to highest.\r\n * @param {string} distribution - If 'linear', timestamps will be spread linearly along the min\r\n * and max range, so basically, the table will contains only two items: {min, 0} and {max, 1}.\r\n * If 'series', timestamps will be positioned at the same distance from each other. In this\r\n * case, only timestamps that break the time linearity are registered, meaning that in the\r\n * best case, all timestamps are linear, the table contains only min and max.\r\n */\r\nfunction buildLookupTable(timestamps, min, max, distribution) {\r\n\tif (distribution === 'linear' || !timestamps.length) {\r\n\t\treturn [\r\n\t\t\t{time: min, pos: 0},\r\n\t\t\t{time: max, pos: 1}\r\n\t\t];\r\n\t}\r\n\r\n\tvar table = [];\r\n\tvar items = [min];\r\n\tvar i, ilen, prev, curr, next;\r\n\r\n\tfor (i = 0, ilen = timestamps.length; i < ilen; ++i) {\r\n\t\tcurr = timestamps[i];\r\n\t\tif (curr > min && curr < max) {\r\n\t\t\titems.push(curr);\r\n\t\t}\r\n\t}\r\n\r\n\titems.push(max);\r\n\r\n\tfor (i = 0, ilen = items.length; i < ilen; ++i) {\r\n\t\tnext = items[i + 1];\r\n\t\tprev = items[i - 1];\r\n\t\tcurr = items[i];\r\n\r\n\t\t// only add points that breaks the scale linearity\r\n\t\tif (prev === undefined || next === undefined || Math.round((next + prev) / 2) !== curr) {\r\n\t\t\ttable.push({time: curr, pos: i / (ilen - 1)});\r\n\t\t}\r\n\t}\r\n\r\n\treturn table;\r\n}\r\n\r\n// @see adapted from https://www.anujgakhar.com/2014/03/01/binary-search-in-javascript/\r\nfunction lookup(table, key, value) {\r\n\tvar lo = 0;\r\n\tvar hi = table.length - 1;\r\n\tvar mid, i0, i1;\r\n\r\n\twhile (lo >= 0 && lo <= hi) {\r\n\t\tmid = (lo + hi) >> 1;\r\n\t\ti0 = table[mid - 1] || null;\r\n\t\ti1 = table[mid];\r\n\r\n\t\tif (!i0) {\r\n\t\t\t// given value is outside table (before first item)\r\n\t\t\treturn {lo: null, hi: i1};\r\n\t\t} else if (i1[key] < value) {\r\n\t\t\tlo = mid + 1;\r\n\t\t} else if (i0[key] > value) {\r\n\t\t\thi = mid - 1;\r\n\t\t} else {\r\n\t\t\treturn {lo: i0, hi: i1};\r\n\t\t}\r\n\t}\r\n\r\n\t// given value is outside table (after last item)\r\n\treturn {lo: i1, hi: null};\r\n}\r\n\r\n/**\r\n * Linearly interpolates the given source `value` using the table items `skey` values and\r\n * returns the associated `tkey` value. For example, interpolate(table, 'time', 42, 'pos')\r\n * returns the position for a timestamp equal to 42. If value is out of bounds, values at\r\n * index [0, 1] or [n - 1, n] are used for the interpolation.\r\n */\r\nfunction interpolate$1(table, skey, sval, tkey) {\r\n\tvar range = lookup(table, skey, sval);\r\n\r\n\t// Note: the lookup table ALWAYS contains at least 2 items (min and max)\r\n\tvar prev = !range.lo ? table[0] : !range.hi ? table[table.length - 2] : range.lo;\r\n\tvar next = !range.lo ? table[1] : !range.hi ? table[table.length - 1] : range.hi;\r\n\r\n\tvar span = next[skey] - prev[skey];\r\n\tvar ratio = span ? (sval - prev[skey]) / span : 0;\r\n\tvar offset = (next[tkey] - prev[tkey]) * ratio;\r\n\r\n\treturn prev[tkey] + offset;\r\n}\r\n\r\nfunction toTimestamp(scale, input) {\r\n\tvar adapter = scale._adapter;\r\n\tvar options = scale.options.time;\r\n\tvar parser = options.parser;\r\n\tvar format = parser || options.format;\r\n\tvar value = input;\r\n\r\n\tif (typeof parser === 'function') {\r\n\t\tvalue = parser(value);\r\n\t}\r\n\r\n\t// Only parse if its not a timestamp already\r\n\tif (!helpers$1.isFinite(value)) {\r\n\t\tvalue = typeof format === 'string'\r\n\t\t\t? adapter.parse(value, format)\r\n\t\t\t: adapter.parse(value);\r\n\t}\r\n\r\n\tif (value !== null) {\r\n\t\treturn +value;\r\n\t}\r\n\r\n\t// Labels are in an incompatible format and no `parser` has been provided.\r\n\t// The user might still use the deprecated `format` option for parsing.\r\n\tif (!parser && typeof format === 'function') {\r\n\t\tvalue = format(input);\r\n\r\n\t\t// `format` could return something else than a timestamp, if so, parse it\r\n\t\tif (!helpers$1.isFinite(value)) {\r\n\t\t\tvalue = adapter.parse(value);\r\n\t\t}\r\n\t}\r\n\r\n\treturn value;\r\n}\r\n\r\nfunction parse(scale, input) {\r\n\tif (helpers$1.isNullOrUndef(input)) {\r\n\t\treturn null;\r\n\t}\r\n\r\n\tvar options = scale.options.time;\r\n\tvar value = toTimestamp(scale, scale.getRightValue(input));\r\n\tif (value === null) {\r\n\t\treturn value;\r\n\t}\r\n\r\n\tif (options.round) {\r\n\t\tvalue = +scale._adapter.startOf(value, options.round);\r\n\t}\r\n\r\n\treturn value;\r\n}\r\n\r\n/**\r\n * Figures out what unit results in an appropriate number of auto-generated ticks\r\n */\r\nfunction determineUnitForAutoTicks(minUnit, min, max, capacity) {\r\n\tvar ilen = UNITS.length;\r\n\tvar i, interval, factor;\r\n\r\n\tfor (i = UNITS.indexOf(minUnit); i < ilen - 1; ++i) {\r\n\t\tinterval = INTERVALS[UNITS[i]];\r\n\t\tfactor = interval.steps ? interval.steps : MAX_INTEGER;\r\n\r\n\t\tif (interval.common && Math.ceil((max - min) / (factor * interval.size)) <= capacity) {\r\n\t\t\treturn UNITS[i];\r\n\t\t}\r\n\t}\r\n\r\n\treturn UNITS[ilen - 1];\r\n}\r\n\r\n/**\r\n * Figures out what unit to format a set of ticks with\r\n */\r\nfunction determineUnitForFormatting(scale, numTicks, minUnit, min, max) {\r\n\tvar i, unit;\r\n\r\n\tfor (i = UNITS.length - 1; i >= UNITS.indexOf(minUnit); i--) {\r\n\t\tunit = UNITS[i];\r\n\t\tif (INTERVALS[unit].common && scale._adapter.diff(max, min, unit) >= numTicks - 1) {\r\n\t\t\treturn unit;\r\n\t\t}\r\n\t}\r\n\r\n\treturn UNITS[minUnit ? UNITS.indexOf(minUnit) : 0];\r\n}\r\n\r\nfunction determineMajorUnit(unit) {\r\n\tfor (var i = UNITS.indexOf(unit) + 1, ilen = UNITS.length; i < ilen; ++i) {\r\n\t\tif (INTERVALS[UNITS[i]].common) {\r\n\t\t\treturn UNITS[i];\r\n\t\t}\r\n\t}\r\n}\r\n\r\n/**\r\n * Generates a maximum of `capacity` timestamps between min and max, rounded to the\r\n * `minor` unit using the given scale time `options`.\r\n * Important: this method can return ticks outside the min and max range, it's the\r\n * responsibility of the calling code to clamp values if needed.\r\n */\r\nfunction generate(scale, min, max, capacity) {\r\n\tvar adapter = scale._adapter;\r\n\tvar options = scale.options;\r\n\tvar timeOpts = options.time;\r\n\tvar minor = timeOpts.unit || determineUnitForAutoTicks(timeOpts.minUnit, min, max, capacity);\r\n\tvar stepSize = resolve$5([timeOpts.stepSize, timeOpts.unitStepSize, 1]);\r\n\tvar weekday = minor === 'week' ? timeOpts.isoWeekday : false;\r\n\tvar first = min;\r\n\tvar ticks = [];\r\n\tvar time;\r\n\r\n\t// For 'week' unit, handle the first day of week option\r\n\tif (weekday) {\r\n\t\tfirst = +adapter.startOf(first, 'isoWeek', weekday);\r\n\t}\r\n\r\n\t// Align first ticks on unit\r\n\tfirst = +adapter.startOf(first, weekday ? 'day' : minor);\r\n\r\n\t// Prevent browser from freezing in case user options request millions of milliseconds\r\n\tif (adapter.diff(max, min, minor) > 100000 * stepSize) {\r\n\t\tthrow min + ' and ' + max + ' are too far apart with stepSize of ' + stepSize + ' ' + minor;\r\n\t}\r\n\r\n\tfor (time = first; time < max; time = +adapter.add(time, stepSize, minor)) {\r\n\t\tticks.push(time);\r\n\t}\r\n\r\n\tif (time === max || options.bounds === 'ticks') {\r\n\t\tticks.push(time);\r\n\t}\r\n\r\n\treturn ticks;\r\n}\r\n\r\n/**\r\n * Returns the start and end offsets from edges in the form of {start, end}\r\n * where each value is a relative width to the scale and ranges between 0 and 1.\r\n * They add extra margins on the both sides by scaling down the original scale.\r\n * Offsets are added when the `offset` option is true.\r\n */\r\nfunction computeOffsets(table, ticks, min, max, options) {\r\n\tvar start = 0;\r\n\tvar end = 0;\r\n\tvar first, last;\r\n\r\n\tif (options.offset && ticks.length) {\r\n\t\tfirst = interpolate$1(table, 'time', ticks[0], 'pos');\r\n\t\tif (ticks.length === 1) {\r\n\t\t\tstart = 1 - first;\r\n\t\t} else {\r\n\t\t\tstart = (interpolate$1(table, 'time', ticks[1], 'pos') - first) / 2;\r\n\t\t}\r\n\t\tlast = interpolate$1(table, 'time', ticks[ticks.length - 1], 'pos');\r\n\t\tif (ticks.length === 1) {\r\n\t\t\tend = last;\r\n\t\t} else {\r\n\t\t\tend = (last - interpolate$1(table, 'time', ticks[ticks.length - 2], 'pos')) / 2;\r\n\t\t}\r\n\t}\r\n\r\n\treturn {start: start, end: end, factor: 1 / (start + 1 + end)};\r\n}\r\n\r\nfunction setMajorTicks(scale, ticks, map, majorUnit) {\r\n\tvar adapter = scale._adapter;\r\n\tvar first = +adapter.startOf(ticks[0].value, majorUnit);\r\n\tvar last = ticks[ticks.length - 1].value;\r\n\tvar major, index;\r\n\r\n\tfor (major = first; major <= last; major = +adapter.add(major, 1, majorUnit)) {\r\n\t\tindex = map[major];\r\n\t\tif (index >= 0) {\r\n\t\t\tticks[index].major = true;\r\n\t\t}\r\n\t}\r\n\treturn ticks;\r\n}\r\n\r\nfunction ticksFromTimestamps(scale, values, majorUnit) {\r\n\tvar ticks = [];\r\n\tvar map = {};\r\n\tvar ilen = values.length;\r\n\tvar i, value;\r\n\r\n\tfor (i = 0; i < ilen; ++i) {\r\n\t\tvalue = values[i];\r\n\t\tmap[value] = i;\r\n\r\n\t\tticks.push({\r\n\t\t\tvalue: value,\r\n\t\t\tmajor: false\r\n\t\t});\r\n\t}\r\n\r\n\t// We set the major ticks separately from the above loop because calling startOf for every tick\r\n\t// is expensive when there is a large number of ticks\r\n\treturn (ilen === 0 || !majorUnit) ? ticks : setMajorTicks(scale, ticks, map, majorUnit);\r\n}\r\n\r\nvar defaultConfig$4 = {\r\n\tposition: 'bottom',\r\n\r\n\t/**\r\n\t * Data distribution along the scale:\r\n\t * - 'linear': data are spread according to their time (distances can vary),\r\n\t * - 'series': data are spread at the same distance from each other.\r\n\t * @see https://github.com/chartjs/Chart.js/pull/4507\r\n\t * @since 2.7.0\r\n\t */\r\n\tdistribution: 'linear',\r\n\r\n\t/**\r\n\t * Scale boundary strategy (bypassed by min/max time options)\r\n\t * - `data`: make sure data are fully visible, ticks outside are removed\r\n\t * - `ticks`: make sure ticks are fully visible, data outside are truncated\r\n\t * @see https://github.com/chartjs/Chart.js/pull/4556\r\n\t * @since 2.7.0\r\n\t */\r\n\tbounds: 'data',\r\n\r\n\tadapters: {},\r\n\ttime: {\r\n\t\tparser: false, // false == a pattern string from https://momentjs.com/docs/#/parsing/string-format/ or a custom callback that converts its argument to a moment\r\n\t\tunit: false, // false == automatic or override with week, month, year, etc.\r\n\t\tround: false, // none, or override with week, month, year, etc.\r\n\t\tdisplayFormat: false, // DEPRECATED\r\n\t\tisoWeekday: false, // override week start day - see https://momentjs.com/docs/#/get-set/iso-weekday/\r\n\t\tminUnit: 'millisecond',\r\n\t\tdisplayFormats: {}\r\n\t},\r\n\tticks: {\r\n\t\tautoSkip: false,\r\n\r\n\t\t/**\r\n\t\t * Ticks generation input values:\r\n\t\t * - 'auto': generates \"optimal\" ticks based on scale size and time options.\r\n\t\t * - 'data': generates ticks from data (including labels from data {t|x|y} objects).\r\n\t\t * - 'labels': generates ticks from user given `data.labels` values ONLY.\r\n\t\t * @see https://github.com/chartjs/Chart.js/pull/4507\r\n\t\t * @since 2.7.0\r\n\t\t */\r\n\t\tsource: 'auto',\r\n\r\n\t\tmajor: {\r\n\t\t\tenabled: false\r\n\t\t}\r\n\t}\r\n};\r\n\r\nvar scale_time = core_scale.extend({\r\n\tinitialize: function() {\r\n\t\tthis.mergeTicksOptions();\r\n\t\tcore_scale.prototype.initialize.call(this);\r\n\t},\r\n\r\n\tupdate: function() {\r\n\t\tvar me = this;\r\n\t\tvar options = me.options;\r\n\t\tvar time = options.time || (options.time = {});\r\n\t\tvar adapter = me._adapter = new core_adapters._date(options.adapters.date);\r\n\r\n\t\t// DEPRECATIONS: output a message only one time per update\r\n\t\tdeprecated$1('time scale', time.format, 'time.format', 'time.parser');\r\n\t\tdeprecated$1('time scale', time.min, 'time.min', 'ticks.min');\r\n\t\tdeprecated$1('time scale', time.max, 'time.max', 'ticks.max');\r\n\r\n\t\t// Backward compatibility: before introducing adapter, `displayFormats` was\r\n\t\t// supposed to contain *all* unit/string pairs but this can't be resolved\r\n\t\t// when loading the scale (adapters are loaded afterward), so let's populate\r\n\t\t// missing formats on update\r\n\t\thelpers$1.mergeIf(time.displayFormats, adapter.formats());\r\n\r\n\t\treturn core_scale.prototype.update.apply(me, arguments);\r\n\t},\r\n\r\n\t/**\r\n\t * Allows data to be referenced via 't' attribute\r\n\t */\r\n\tgetRightValue: function(rawValue) {\r\n\t\tif (rawValue && rawValue.t !== undefined) {\r\n\t\t\trawValue = rawValue.t;\r\n\t\t}\r\n\t\treturn core_scale.prototype.getRightValue.call(this, rawValue);\r\n\t},\r\n\r\n\tdetermineDataLimits: function() {\r\n\t\tvar me = this;\r\n\t\tvar chart = me.chart;\r\n\t\tvar adapter = me._adapter;\r\n\t\tvar options = me.options;\r\n\t\tvar unit = options.time.unit || 'day';\r\n\t\tvar min = MAX_INTEGER;\r\n\t\tvar max = MIN_INTEGER;\r\n\t\tvar timestamps = [];\r\n\t\tvar datasets = [];\r\n\t\tvar labels = [];\r\n\t\tvar i, j, ilen, jlen, data, timestamp, labelsAdded;\r\n\t\tvar dataLabels = me._getLabels();\r\n\r\n\t\tfor (i = 0, ilen = dataLabels.length; i < ilen; ++i) {\r\n\t\t\tlabels.push(parse(me, dataLabels[i]));\r\n\t\t}\r\n\r\n\t\tfor (i = 0, ilen = (chart.data.datasets || []).length; i < ilen; ++i) {\r\n\t\t\tif (chart.isDatasetVisible(i)) {\r\n\t\t\t\tdata = chart.data.datasets[i].data;\r\n\r\n\t\t\t\t// Let's consider that all data have the same format.\r\n\t\t\t\tif (helpers$1.isObject(data[0])) {\r\n\t\t\t\t\tdatasets[i] = [];\r\n\r\n\t\t\t\t\tfor (j = 0, jlen = data.length; j < jlen; ++j) {\r\n\t\t\t\t\t\ttimestamp = parse(me, data[j]);\r\n\t\t\t\t\t\ttimestamps.push(timestamp);\r\n\t\t\t\t\t\tdatasets[i][j] = timestamp;\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tdatasets[i] = labels.slice(0);\r\n\t\t\t\t\tif (!labelsAdded) {\r\n\t\t\t\t\t\ttimestamps = timestamps.concat(labels);\r\n\t\t\t\t\t\tlabelsAdded = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tdatasets[i] = [];\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (labels.length) {\r\n\t\t\tmin = Math.min(min, labels[0]);\r\n\t\t\tmax = Math.max(max, labels[labels.length - 1]);\r\n\t\t}\r\n\r\n\t\tif (timestamps.length) {\r\n\t\t\ttimestamps = ilen > 1 ? arrayUnique(timestamps).sort(sorter) : timestamps.sort(sorter);\r\n\t\t\tmin = Math.min(min, timestamps[0]);\r\n\t\t\tmax = Math.max(max, timestamps[timestamps.length - 1]);\r\n\t\t}\r\n\r\n\t\tmin = parse(me, getMin(options)) || min;\r\n\t\tmax = parse(me, getMax(options)) || max;\r\n\r\n\t\t// In case there is no valid min/max, set limits based on unit time option\r\n\t\tmin = min === MAX_INTEGER ? +adapter.startOf(Date.now(), unit) : min;\r\n\t\tmax = max === MIN_INTEGER ? +adapter.endOf(Date.now(), unit) + 1 : max;\r\n\r\n\t\t// Make sure that max is strictly higher than min (required by the lookup table)\r\n\t\tme.min = Math.min(min, max);\r\n\t\tme.max = Math.max(min + 1, max);\r\n\r\n\t\t// PRIVATE\r\n\t\tme._table = [];\r\n\t\tme._timestamps = {\r\n\t\t\tdata: timestamps,\r\n\t\t\tdatasets: datasets,\r\n\t\t\tlabels: labels\r\n\t\t};\r\n\t},\r\n\r\n\tbuildTicks: function() {\r\n\t\tvar me = this;\r\n\t\tvar min = me.min;\r\n\t\tvar max = me.max;\r\n\t\tvar options = me.options;\r\n\t\tvar tickOpts = options.ticks;\r\n\t\tvar timeOpts = options.time;\r\n\t\tvar timestamps = me._timestamps;\r\n\t\tvar ticks = [];\r\n\t\tvar capacity = me.getLabelCapacity(min);\r\n\t\tvar source = tickOpts.source;\r\n\t\tvar distribution = options.distribution;\r\n\t\tvar i, ilen, timestamp;\r\n\r\n\t\tif (source === 'data' || (source === 'auto' && distribution === 'series')) {\r\n\t\t\ttimestamps = timestamps.data;\r\n\t\t} else if (source === 'labels') {\r\n\t\t\ttimestamps = timestamps.labels;\r\n\t\t} else {\r\n\t\t\ttimestamps = generate(me, min, max, capacity);\r\n\t\t}\r\n\r\n\t\tif (options.bounds === 'ticks' && timestamps.length) {\r\n\t\t\tmin = timestamps[0];\r\n\t\t\tmax = timestamps[timestamps.length - 1];\r\n\t\t}\r\n\r\n\t\t// Enforce limits with user min/max options\r\n\t\tmin = parse(me, getMin(options)) || min;\r\n\t\tmax = parse(me, getMax(options)) || max;\r\n\r\n\t\t// Remove ticks outside the min/max range\r\n\t\tfor (i = 0, ilen = timestamps.length; i < ilen; ++i) {\r\n\t\t\ttimestamp = timestamps[i];\r\n\t\t\tif (timestamp >= min && timestamp <= max) {\r\n\t\t\t\tticks.push(timestamp);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tme.min = min;\r\n\t\tme.max = max;\r\n\r\n\t\t// PRIVATE\r\n\t\t// determineUnitForFormatting relies on the number of ticks so we don't use it when\r\n\t\t// autoSkip is enabled because we don't yet know what the final number of ticks will be\r\n\t\tme._unit = timeOpts.unit || (tickOpts.autoSkip\r\n\t\t\t? determineUnitForAutoTicks(timeOpts.minUnit, me.min, me.max, capacity)\r\n\t\t\t: determineUnitForFormatting(me, ticks.length, timeOpts.minUnit, me.min, me.max));\r\n\t\tme._majorUnit = !tickOpts.major.enabled || me._unit === 'year' ? undefined\r\n\t\t\t: determineMajorUnit(me._unit);\r\n\t\tme._table = buildLookupTable(me._timestamps.data, min, max, distribution);\r\n\t\tme._offsets = computeOffsets(me._table, ticks, min, max, options);\r\n\r\n\t\tif (tickOpts.reverse) {\r\n\t\t\tticks.reverse();\r\n\t\t}\r\n\r\n\t\treturn ticksFromTimestamps(me, ticks, me._majorUnit);\r\n\t},\r\n\r\n\tgetLabelForIndex: function(index, datasetIndex) {\r\n\t\tvar me = this;\r\n\t\tvar adapter = me._adapter;\r\n\t\tvar data = me.chart.data;\r\n\t\tvar timeOpts = me.options.time;\r\n\t\tvar label = data.labels && index < data.labels.length ? data.labels[index] : '';\r\n\t\tvar value = data.datasets[datasetIndex].data[index];\r\n\r\n\t\tif (helpers$1.isObject(value)) {\r\n\t\t\tlabel = me.getRightValue(value);\r\n\t\t}\r\n\t\tif (timeOpts.tooltipFormat) {\r\n\t\t\treturn adapter.format(toTimestamp(me, label), timeOpts.tooltipFormat);\r\n\t\t}\r\n\t\tif (typeof label === 'string') {\r\n\t\t\treturn label;\r\n\t\t}\r\n\t\treturn adapter.format(toTimestamp(me, label), timeOpts.displayFormats.datetime);\r\n\t},\r\n\r\n\t/**\r\n\t * Function to format an individual tick mark\r\n\t * @private\r\n\t */\r\n\ttickFormatFunction: function(time, index, ticks, format) {\r\n\t\tvar me = this;\r\n\t\tvar adapter = me._adapter;\r\n\t\tvar options = me.options;\r\n\t\tvar formats = options.time.displayFormats;\r\n\t\tvar minorFormat = formats[me._unit];\r\n\t\tvar majorUnit = me._majorUnit;\r\n\t\tvar majorFormat = formats[majorUnit];\r\n\t\tvar tick = ticks[index];\r\n\t\tvar tickOpts = options.ticks;\r\n\t\tvar major = majorUnit && majorFormat && tick && tick.major;\r\n\t\tvar label = adapter.format(time, format ? format : major ? majorFormat : minorFormat);\r\n\t\tvar nestedTickOpts = major ? tickOpts.major : tickOpts.minor;\r\n\t\tvar formatter = resolve$5([\r\n\t\t\tnestedTickOpts.callback,\r\n\t\t\tnestedTickOpts.userCallback,\r\n\t\t\ttickOpts.callback,\r\n\t\t\ttickOpts.userCallback\r\n\t\t]);\r\n\r\n\t\treturn formatter ? formatter(label, index, ticks) : label;\r\n\t},\r\n\r\n\tconvertTicksToLabels: function(ticks) {\r\n\t\tvar labels = [];\r\n\t\tvar i, ilen;\r\n\r\n\t\tfor (i = 0, ilen = ticks.length; i < ilen; ++i) {\r\n\t\t\tlabels.push(this.tickFormatFunction(ticks[i].value, i, ticks));\r\n\t\t}\r\n\r\n\t\treturn labels;\r\n\t},\r\n\r\n\t/**\r\n\t * @private\r\n\t */\r\n\tgetPixelForOffset: function(time) {\r\n\t\tvar me = this;\r\n\t\tvar offsets = me._offsets;\r\n\t\tvar pos = interpolate$1(me._table, 'time', time, 'pos');\r\n\t\treturn me.getPixelForDecimal((offsets.start + pos) * offsets.factor);\r\n\t},\r\n\r\n\tgetPixelForValue: function(value, index, datasetIndex) {\r\n\t\tvar me = this;\r\n\t\tvar time = null;\r\n\r\n\t\tif (index !== undefined && datasetIndex !== undefined) {\r\n\t\t\ttime = me._timestamps.datasets[datasetIndex][index];\r\n\t\t}\r\n\r\n\t\tif (time === null) {\r\n\t\t\ttime = parse(me, value);\r\n\t\t}\r\n\r\n\t\tif (time !== null) {\r\n\t\t\treturn me.getPixelForOffset(time);\r\n\t\t}\r\n\t},\r\n\r\n\tgetPixelForTick: function(index) {\r\n\t\tvar ticks = this.getTicks();\r\n\t\treturn index >= 0 && index < ticks.length ?\r\n\t\t\tthis.getPixelForOffset(ticks[index].value) :\r\n\t\t\tnull;\r\n\t},\r\n\r\n\tgetValueForPixel: function(pixel) {\r\n\t\tvar me = this;\r\n\t\tvar offsets = me._offsets;\r\n\t\tvar pos = me.getDecimalForPixel(pixel) / offsets.factor - offsets.end;\r\n\t\tvar time = interpolate$1(me._table, 'pos', pos, 'time');\r\n\r\n\t\t// DEPRECATION, we should return time directly\r\n\t\treturn me._adapter._create(time);\r\n\t},\r\n\r\n\t/**\r\n\t * @private\r\n\t */\r\n\t_getLabelSize: function(label) {\r\n\t\tvar me = this;\r\n\t\tvar ticksOpts = me.options.ticks;\r\n\t\tvar tickLabelWidth = me.ctx.measureText(label).width;\r\n\t\tvar angle = helpers$1.toRadians(me.isHorizontal() ? ticksOpts.maxRotation : ticksOpts.minRotation);\r\n\t\tvar cosRotation = Math.cos(angle);\r\n\t\tvar sinRotation = Math.sin(angle);\r\n\t\tvar tickFontSize = valueOrDefault$d(ticksOpts.fontSize, core_defaults.global.defaultFontSize);\r\n\r\n\t\treturn {\r\n\t\t\tw: (tickLabelWidth * cosRotation) + (tickFontSize * sinRotation),\r\n\t\t\th: (tickLabelWidth * sinRotation) + (tickFontSize * cosRotation)\r\n\t\t};\r\n\t},\r\n\r\n\t/**\r\n\t * Crude approximation of what the label width might be\r\n\t * @private\r\n\t */\r\n\tgetLabelWidth: function(label) {\r\n\t\treturn this._getLabelSize(label).w;\r\n\t},\r\n\r\n\t/**\r\n\t * @private\r\n\t */\r\n\tgetLabelCapacity: function(exampleTime) {\r\n\t\tvar me = this;\r\n\t\tvar timeOpts = me.options.time;\r\n\t\tvar displayFormats = timeOpts.displayFormats;\r\n\r\n\t\t// pick the longest format (milliseconds) for guestimation\r\n\t\tvar format = displayFormats[timeOpts.unit] || displayFormats.millisecond;\r\n\t\tvar exampleLabel = me.tickFormatFunction(exampleTime, 0, ticksFromTimestamps(me, [exampleTime], me._majorUnit), format);\r\n\t\tvar size = me._getLabelSize(exampleLabel);\r\n\t\tvar capacity = Math.floor(me.isHorizontal() ? me.width / size.w : me.height / size.h);\r\n\r\n\t\tif (me.options.offset) {\r\n\t\t\tcapacity--;\r\n\t\t}\r\n\r\n\t\treturn capacity > 0 ? capacity : 1;\r\n\t}\r\n});\r\n\r\n// INTERNAL: static default options, registered in src/index.js\r\nvar _defaults$4 = defaultConfig$4;\nscale_time._defaults = _defaults$4;\n\nvar scales = {\r\n\tcategory: scale_category,\r\n\tlinear: scale_linear,\r\n\tlogarithmic: scale_logarithmic,\r\n\tradialLinear: scale_radialLinear,\r\n\ttime: scale_time\r\n};\n\nvar FORMATS = {\r\n\tdatetime: 'MMM D, YYYY, h:mm:ss a',\r\n\tmillisecond: 'h:mm:ss.SSS a',\r\n\tsecond: 'h:mm:ss a',\r\n\tminute: 'h:mm a',\r\n\thour: 'hA',\r\n\tday: 'MMM D',\r\n\tweek: 'll',\r\n\tmonth: 'MMM YYYY',\r\n\tquarter: '[Q]Q - YYYY',\r\n\tyear: 'YYYY'\r\n};\r\n\r\ncore_adapters._date.override(typeof moment === 'function' ? {\r\n\t_id: 'moment', // DEBUG ONLY\r\n\r\n\tformats: function() {\r\n\t\treturn FORMATS;\r\n\t},\r\n\r\n\tparse: function(value, format) {\r\n\t\tif (typeof value === 'string' && typeof format === 'string') {\r\n\t\t\tvalue = moment(value, format);\r\n\t\t} else if (!(value instanceof moment)) {\r\n\t\t\tvalue = moment(value);\r\n\t\t}\r\n\t\treturn value.isValid() ? value.valueOf() : null;\r\n\t},\r\n\r\n\tformat: function(time, format) {\r\n\t\treturn moment(time).format(format);\r\n\t},\r\n\r\n\tadd: function(time, amount, unit) {\r\n\t\treturn moment(time).add(amount, unit).valueOf();\r\n\t},\r\n\r\n\tdiff: function(max, min, unit) {\r\n\t\treturn moment(max).diff(moment(min), unit);\r\n\t},\r\n\r\n\tstartOf: function(time, unit, weekday) {\r\n\t\ttime = moment(time);\r\n\t\tif (unit === 'isoWeek') {\r\n\t\t\treturn time.isoWeekday(weekday).valueOf();\r\n\t\t}\r\n\t\treturn time.startOf(unit).valueOf();\r\n\t},\r\n\r\n\tendOf: function(time, unit) {\r\n\t\treturn moment(time).endOf(unit).valueOf();\r\n\t},\r\n\r\n\t// DEPRECATIONS\r\n\r\n\t/**\r\n\t * Provided for backward compatibility with scale.getValueForPixel().\r\n\t * @deprecated since version 2.8.0\r\n\t * @todo remove at version 3\r\n\t * @private\r\n\t */\r\n\t_create: function(time) {\r\n\t\treturn moment(time);\r\n\t},\r\n} : {});\n\ncore_defaults._set('global', {\r\n\tplugins: {\r\n\t\tfiller: {\r\n\t\t\tpropagate: true\r\n\t\t}\r\n\t}\r\n});\r\n\r\nvar mappers = {\r\n\tdataset: function(source) {\r\n\t\tvar index = source.fill;\r\n\t\tvar chart = source.chart;\r\n\t\tvar meta = chart.getDatasetMeta(index);\r\n\t\tvar visible = meta && chart.isDatasetVisible(index);\r\n\t\tvar points = (visible && meta.dataset._children) || [];\r\n\t\tvar length = points.length || 0;\r\n\r\n\t\treturn !length ? null : function(point, i) {\r\n\t\t\treturn (i < length && points[i]._view) || null;\r\n\t\t};\r\n\t},\r\n\r\n\tboundary: function(source) {\r\n\t\tvar boundary = source.boundary;\r\n\t\tvar x = boundary ? boundary.x : null;\r\n\t\tvar y = boundary ? boundary.y : null;\r\n\r\n\t\tif (helpers$1.isArray(boundary)) {\r\n\t\t\treturn function(point, i) {\r\n\t\t\t\treturn boundary[i];\r\n\t\t\t};\r\n\t\t}\r\n\r\n\t\treturn function(point) {\r\n\t\t\treturn {\r\n\t\t\t\tx: x === null ? point.x : x,\r\n\t\t\t\ty: y === null ? point.y : y,\r\n\t\t\t};\r\n\t\t};\r\n\t}\r\n};\r\n\r\n// @todo if (fill[0] === '#')\r\nfunction decodeFill(el, index, count) {\r\n\tvar model = el._model || {};\r\n\tvar fill = model.fill;\r\n\tvar target;\r\n\r\n\tif (fill === undefined) {\r\n\t\tfill = !!model.backgroundColor;\r\n\t}\r\n\r\n\tif (fill === false || fill === null) {\r\n\t\treturn false;\r\n\t}\r\n\r\n\tif (fill === true) {\r\n\t\treturn 'origin';\r\n\t}\r\n\r\n\ttarget = parseFloat(fill, 10);\r\n\tif (isFinite(target) && Math.floor(target) === target) {\r\n\t\tif (fill[0] === '-' || fill[0] === '+') {\r\n\t\t\ttarget = index + target;\r\n\t\t}\r\n\r\n\t\tif (target === index || target < 0 || target >= count) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\treturn target;\r\n\t}\r\n\r\n\tswitch (fill) {\r\n\t// compatibility\r\n\tcase 'bottom':\r\n\t\treturn 'start';\r\n\tcase 'top':\r\n\t\treturn 'end';\r\n\tcase 'zero':\r\n\t\treturn 'origin';\r\n\t// supported boundaries\r\n\tcase 'origin':\r\n\tcase 'start':\r\n\tcase 'end':\r\n\t\treturn fill;\r\n\t// invalid fill values\r\n\tdefault:\r\n\t\treturn false;\r\n\t}\r\n}\r\n\r\nfunction computeLinearBoundary(source) {\r\n\tvar model = source.el._model || {};\r\n\tvar scale = source.el._scale || {};\r\n\tvar fill = source.fill;\r\n\tvar target = null;\r\n\tvar horizontal;\r\n\r\n\tif (isFinite(fill)) {\r\n\t\treturn null;\r\n\t}\r\n\r\n\t// Backward compatibility: until v3, we still need to support boundary values set on\r\n\t// the model (scaleTop, scaleBottom and scaleZero) because some external plugins and\r\n\t// controllers might still use it (e.g. the Smith chart).\r\n\r\n\tif (fill === 'start') {\r\n\t\ttarget = model.scaleBottom === undefined ? scale.bottom : model.scaleBottom;\r\n\t} else if (fill === 'end') {\r\n\t\ttarget = model.scaleTop === undefined ? scale.top : model.scaleTop;\r\n\t} else if (model.scaleZero !== undefined) {\r\n\t\ttarget = model.scaleZero;\r\n\t} else if (scale.getBasePixel) {\r\n\t\ttarget = scale.getBasePixel();\r\n\t}\r\n\r\n\tif (target !== undefined && target !== null) {\r\n\t\tif (target.x !== undefined && target.y !== undefined) {\r\n\t\t\treturn target;\r\n\t\t}\r\n\r\n\t\tif (helpers$1.isFinite(target)) {\r\n\t\t\thorizontal = scale.isHorizontal();\r\n\t\t\treturn {\r\n\t\t\t\tx: horizontal ? target : null,\r\n\t\t\t\ty: horizontal ? null : target\r\n\t\t\t};\r\n\t\t}\r\n\t}\r\n\r\n\treturn null;\r\n}\r\n\r\nfunction computeCircularBoundary(source) {\r\n\tvar scale = source.el._scale;\r\n\tvar options = scale.options;\r\n\tvar length = scale.chart.data.labels.length;\r\n\tvar fill = source.fill;\r\n\tvar target = [];\r\n\tvar start, end, center, i, point;\r\n\r\n\tif (!length) {\r\n\t\treturn null;\r\n\t}\r\n\r\n\tstart = options.ticks.reverse ? scale.max : scale.min;\r\n\tend = options.ticks.reverse ? scale.min : scale.max;\r\n\tcenter = scale.getPointPositionForValue(0, start);\r\n\tfor (i = 0; i < length; ++i) {\r\n\t\tpoint = fill === 'start' || fill === 'end'\r\n\t\t\t? scale.getPointPositionForValue(i, fill === 'start' ? start : end)\r\n\t\t\t: scale.getBasePosition(i);\r\n\t\tif (options.gridLines.circular) {\r\n\t\t\tpoint.cx = center.x;\r\n\t\t\tpoint.cy = center.y;\r\n\t\t\tpoint.angle = scale.getIndexAngle(i) - Math.PI / 2;\r\n\t\t}\r\n\t\ttarget.push(point);\r\n\t}\r\n\treturn target;\r\n}\r\n\r\nfunction computeBoundary(source) {\r\n\tvar scale = source.el._scale || {};\r\n\r\n\tif (scale.getPointPositionForValue) {\r\n\t\treturn computeCircularBoundary(source);\r\n\t}\r\n\treturn computeLinearBoundary(source);\r\n}\r\n\r\nfunction resolveTarget(sources, index, propagate) {\r\n\tvar source = sources[index];\r\n\tvar fill = source.fill;\r\n\tvar visited = [index];\r\n\tvar target;\r\n\r\n\tif (!propagate) {\r\n\t\treturn fill;\r\n\t}\r\n\r\n\twhile (fill !== false && visited.indexOf(fill) === -1) {\r\n\t\tif (!isFinite(fill)) {\r\n\t\t\treturn fill;\r\n\t\t}\r\n\r\n\t\ttarget = sources[fill];\r\n\t\tif (!target) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tif (target.visible) {\r\n\t\t\treturn fill;\r\n\t\t}\r\n\r\n\t\tvisited.push(fill);\r\n\t\tfill = target.fill;\r\n\t}\r\n\r\n\treturn false;\r\n}\r\n\r\nfunction createMapper(source) {\r\n\tvar fill = source.fill;\r\n\tvar type = 'dataset';\r\n\r\n\tif (fill === false) {\r\n\t\treturn null;\r\n\t}\r\n\r\n\tif (!isFinite(fill)) {\r\n\t\ttype = 'boundary';\r\n\t}\r\n\r\n\treturn mappers[type](source);\r\n}\r\n\r\nfunction isDrawable(point) {\r\n\treturn point && !point.skip;\r\n}\r\n\r\nfunction drawArea(ctx, curve0, curve1, len0, len1) {\r\n\tvar i, cx, cy, r;\r\n\r\n\tif (!len0 || !len1) {\r\n\t\treturn;\r\n\t}\r\n\r\n\t// building first area curve (normal)\r\n\tctx.moveTo(curve0[0].x, curve0[0].y);\r\n\tfor (i = 1; i < len0; ++i) {\r\n\t\thelpers$1.canvas.lineTo(ctx, curve0[i - 1], curve0[i]);\r\n\t}\r\n\r\n\tif (curve1[0].angle !== undefined) {\r\n\t\tcx = curve1[0].cx;\r\n\t\tcy = curve1[0].cy;\r\n\t\tr = Math.sqrt(Math.pow(curve1[0].x - cx, 2) + Math.pow(curve1[0].y - cy, 2));\r\n\t\tfor (i = len1 - 1; i > 0; --i) {\r\n\t\t\tctx.arc(cx, cy, r, curve1[i].angle, curve1[i - 1].angle, true);\r\n\t\t}\r\n\t\treturn;\r\n\t}\r\n\r\n\t// joining the two area curves\r\n\tctx.lineTo(curve1[len1 - 1].x, curve1[len1 - 1].y);\r\n\r\n\t// building opposite area curve (reverse)\r\n\tfor (i = len1 - 1; i > 0; --i) {\r\n\t\thelpers$1.canvas.lineTo(ctx, curve1[i], curve1[i - 1], true);\r\n\t}\r\n}\r\n\r\nfunction doFill(ctx, points, mapper, view, color, loop) {\r\n\tvar count = points.length;\r\n\tvar span = view.spanGaps;\r\n\tvar curve0 = [];\r\n\tvar curve1 = [];\r\n\tvar len0 = 0;\r\n\tvar len1 = 0;\r\n\tvar i, ilen, index, p0, p1, d0, d1, loopOffset;\r\n\r\n\tctx.beginPath();\r\n\r\n\tfor (i = 0, ilen = count; i < ilen; ++i) {\r\n\t\tindex = i % count;\r\n\t\tp0 = points[index]._view;\r\n\t\tp1 = mapper(p0, index, view);\r\n\t\td0 = isDrawable(p0);\r\n\t\td1 = isDrawable(p1);\r\n\r\n\t\tif (loop && loopOffset === undefined && d0) {\r\n\t\t\tloopOffset = i + 1;\r\n\t\t\tilen = count + loopOffset;\r\n\t\t}\r\n\r\n\t\tif (d0 && d1) {\r\n\t\t\tlen0 = curve0.push(p0);\r\n\t\t\tlen1 = curve1.push(p1);\r\n\t\t} else if (len0 && len1) {\r\n\t\t\tif (!span) {\r\n\t\t\t\tdrawArea(ctx, curve0, curve1, len0, len1);\r\n\t\t\t\tlen0 = len1 = 0;\r\n\t\t\t\tcurve0 = [];\r\n\t\t\t\tcurve1 = [];\r\n\t\t\t} else {\r\n\t\t\t\tif (d0) {\r\n\t\t\t\t\tcurve0.push(p0);\r\n\t\t\t\t}\r\n\t\t\t\tif (d1) {\r\n\t\t\t\t\tcurve1.push(p1);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tdrawArea(ctx, curve0, curve1, len0, len1);\r\n\r\n\tctx.closePath();\r\n\tctx.fillStyle = color;\r\n\tctx.fill();\r\n}\r\n\r\nvar plugin_filler = {\r\n\tid: 'filler',\r\n\r\n\tafterDatasetsUpdate: function(chart, options) {\r\n\t\tvar count = (chart.data.datasets || []).length;\r\n\t\tvar propagate = options.propagate;\r\n\t\tvar sources = [];\r\n\t\tvar meta, i, el, source;\r\n\r\n\t\tfor (i = 0; i < count; ++i) {\r\n\t\t\tmeta = chart.getDatasetMeta(i);\r\n\t\t\tel = meta.dataset;\r\n\t\t\tsource = null;\r\n\r\n\t\t\tif (el && el._model && el instanceof elements.Line) {\r\n\t\t\t\tsource = {\r\n\t\t\t\t\tvisible: chart.isDatasetVisible(i),\r\n\t\t\t\t\tfill: decodeFill(el, i, count),\r\n\t\t\t\t\tchart: chart,\r\n\t\t\t\t\tel: el\r\n\t\t\t\t};\r\n\t\t\t}\r\n\r\n\t\t\tmeta.$filler = source;\r\n\t\t\tsources.push(source);\r\n\t\t}\r\n\r\n\t\tfor (i = 0; i < count; ++i) {\r\n\t\t\tsource = sources[i];\r\n\t\t\tif (!source) {\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\r\n\t\t\tsource.fill = resolveTarget(sources, i, propagate);\r\n\t\t\tsource.boundary = computeBoundary(source);\r\n\t\t\tsource.mapper = createMapper(source);\r\n\t\t}\r\n\t},\r\n\r\n\tbeforeDatasetsDraw: function(chart) {\r\n\t\tvar metasets = chart._getSortedVisibleDatasetMetas();\r\n\t\tvar ctx = chart.ctx;\r\n\t\tvar meta, i, el, view, points, mapper, color;\r\n\r\n\t\tfor (i = metasets.length - 1; i >= 0; --i) {\r\n\t\t\tmeta = metasets[i].$filler;\r\n\r\n\t\t\tif (!meta || !meta.visible) {\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\r\n\t\t\tel = meta.el;\r\n\t\t\tview = el._view;\r\n\t\t\tpoints = el._children || [];\r\n\t\t\tmapper = meta.mapper;\r\n\t\t\tcolor = view.backgroundColor || core_defaults.global.defaultColor;\r\n\r\n\t\t\tif (mapper && color && points.length) {\r\n\t\t\t\thelpers$1.canvas.clipArea(ctx, chart.chartArea);\r\n\t\t\t\tdoFill(ctx, points, mapper, view, color, el._loop);\r\n\t\t\t\thelpers$1.canvas.unclipArea(ctx);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n};\n\nvar getRtlHelper$1 = helpers$1.rtl.getRtlAdapter;\r\nvar noop$1 = helpers$1.noop;\r\nvar valueOrDefault$e = helpers$1.valueOrDefault;\r\n\r\ncore_defaults._set('global', {\r\n\tlegend: {\r\n\t\tdisplay: true,\r\n\t\tposition: 'top',\r\n\t\talign: 'center',\r\n\t\tfullWidth: true,\r\n\t\treverse: false,\r\n\t\tweight: 1000,\r\n\r\n\t\t// a callback that will handle\r\n\t\tonClick: function(e, legendItem) {\r\n\t\t\tvar index = legendItem.datasetIndex;\r\n\t\t\tvar ci = this.chart;\r\n\t\t\tvar meta = ci.getDatasetMeta(index);\r\n\r\n\t\t\t// See controller.isDatasetVisible comment\r\n\t\t\tmeta.hidden = meta.hidden === null ? !ci.data.datasets[index].hidden : null;\r\n\r\n\t\t\t// We hid a dataset ... rerender the chart\r\n\t\t\tci.update();\r\n\t\t},\r\n\r\n\t\tonHover: null,\r\n\t\tonLeave: null,\r\n\r\n\t\tlabels: {\r\n\t\t\tboxWidth: 40,\r\n\t\t\tpadding: 10,\r\n\t\t\t// Generates labels shown in the legend\r\n\t\t\t// Valid properties to return:\r\n\t\t\t// text : text to display\r\n\t\t\t// fillStyle : fill of coloured box\r\n\t\t\t// strokeStyle: stroke of coloured box\r\n\t\t\t// hidden : if this legend item refers to a hidden item\r\n\t\t\t// lineCap : cap style for line\r\n\t\t\t// lineDash\r\n\t\t\t// lineDashOffset :\r\n\t\t\t// lineJoin :\r\n\t\t\t// lineWidth :\r\n\t\t\tgenerateLabels: function(chart) {\r\n\t\t\t\tvar datasets = chart.data.datasets;\r\n\t\t\t\tvar options = chart.options.legend || {};\r\n\t\t\t\tvar usePointStyle = options.labels && options.labels.usePointStyle;\r\n\r\n\t\t\t\treturn chart._getSortedDatasetMetas().map(function(meta) {\r\n\t\t\t\t\tvar style = meta.controller.getStyle(usePointStyle ? 0 : undefined);\r\n\r\n\t\t\t\t\treturn {\r\n\t\t\t\t\t\ttext: datasets[meta.index].label,\r\n\t\t\t\t\t\tfillStyle: style.backgroundColor,\r\n\t\t\t\t\t\thidden: !chart.isDatasetVisible(meta.index),\r\n\t\t\t\t\t\tlineCap: style.borderCapStyle,\r\n\t\t\t\t\t\tlineDash: style.borderDash,\r\n\t\t\t\t\t\tlineDashOffset: style.borderDashOffset,\r\n\t\t\t\t\t\tlineJoin: style.borderJoinStyle,\r\n\t\t\t\t\t\tlineWidth: style.borderWidth,\r\n\t\t\t\t\t\tstrokeStyle: style.borderColor,\r\n\t\t\t\t\t\tpointStyle: style.pointStyle,\r\n\t\t\t\t\t\trotation: style.rotation,\r\n\r\n\t\t\t\t\t\t// Below is extra data used for toggling the datasets\r\n\t\t\t\t\t\tdatasetIndex: meta.index\r\n\t\t\t\t\t};\r\n\t\t\t\t}, this);\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\tlegendCallback: function(chart) {\r\n\t\tvar list = document.createElement('ul');\r\n\t\tvar datasets = chart.data.datasets;\r\n\t\tvar i, ilen, listItem, listItemSpan;\r\n\r\n\t\tlist.setAttribute('class', chart.id + '-legend');\r\n\r\n\t\tfor (i = 0, ilen = datasets.length; i < ilen; i++) {\r\n\t\t\tlistItem = list.appendChild(document.createElement('li'));\r\n\t\t\tlistItemSpan = listItem.appendChild(document.createElement('span'));\r\n\t\t\tlistItemSpan.style.backgroundColor = datasets[i].backgroundColor;\r\n\t\t\tif (datasets[i].label) {\r\n\t\t\t\tlistItem.appendChild(document.createTextNode(datasets[i].label));\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn list.outerHTML;\r\n\t}\r\n});\r\n\r\n/**\r\n * Helper function to get the box width based on the usePointStyle option\r\n * @param {object} labelopts - the label options on the legend\r\n * @param {number} fontSize - the label font size\r\n * @return {number} width of the color box area\r\n */\r\nfunction getBoxWidth(labelOpts, fontSize) {\r\n\treturn labelOpts.usePointStyle && labelOpts.boxWidth > fontSize ?\r\n\t\tfontSize :\r\n\t\tlabelOpts.boxWidth;\r\n}\r\n\r\n/**\r\n * IMPORTANT: this class is exposed publicly as Chart.Legend, backward compatibility required!\r\n */\r\nvar Legend = core_element.extend({\r\n\r\n\tinitialize: function(config) {\r\n\t\tvar me = this;\r\n\t\thelpers$1.extend(me, config);\r\n\r\n\t\t// Contains hit boxes for each dataset (in dataset order)\r\n\t\tme.legendHitBoxes = [];\r\n\r\n\t\t/**\r\n \t\t * @private\r\n \t\t */\r\n\t\tme._hoveredItem = null;\r\n\r\n\t\t// Are we in doughnut mode which has a different data type\r\n\t\tme.doughnutMode = false;\r\n\t},\r\n\r\n\t// These methods are ordered by lifecycle. Utilities then follow.\r\n\t// Any function defined here is inherited by all legend types.\r\n\t// Any function can be extended by the legend type\r\n\r\n\tbeforeUpdate: noop$1,\r\n\tupdate: function(maxWidth, maxHeight, margins) {\r\n\t\tvar me = this;\r\n\r\n\t\t// Update Lifecycle - Probably don't want to ever extend or overwrite this function ;)\r\n\t\tme.beforeUpdate();\r\n\r\n\t\t// Absorb the master measurements\r\n\t\tme.maxWidth = maxWidth;\r\n\t\tme.maxHeight = maxHeight;\r\n\t\tme.margins = margins;\r\n\r\n\t\t// Dimensions\r\n\t\tme.beforeSetDimensions();\r\n\t\tme.setDimensions();\r\n\t\tme.afterSetDimensions();\r\n\t\t// Labels\r\n\t\tme.beforeBuildLabels();\r\n\t\tme.buildLabels();\r\n\t\tme.afterBuildLabels();\r\n\r\n\t\t// Fit\r\n\t\tme.beforeFit();\r\n\t\tme.fit();\r\n\t\tme.afterFit();\r\n\t\t//\r\n\t\tme.afterUpdate();\r\n\r\n\t\treturn me.minSize;\r\n\t},\r\n\tafterUpdate: noop$1,\r\n\r\n\t//\r\n\r\n\tbeforeSetDimensions: noop$1,\r\n\tsetDimensions: function() {\r\n\t\tvar me = this;\r\n\t\t// Set the unconstrained dimension before label rotation\r\n\t\tif (me.isHorizontal()) {\r\n\t\t\t// Reset position before calculating rotation\r\n\t\t\tme.width = me.maxWidth;\r\n\t\t\tme.left = 0;\r\n\t\t\tme.right = me.width;\r\n\t\t} else {\r\n\t\t\tme.height = me.maxHeight;\r\n\r\n\t\t\t// Reset position before calculating rotation\r\n\t\t\tme.top = 0;\r\n\t\t\tme.bottom = me.height;\r\n\t\t}\r\n\r\n\t\t// Reset padding\r\n\t\tme.paddingLeft = 0;\r\n\t\tme.paddingTop = 0;\r\n\t\tme.paddingRight = 0;\r\n\t\tme.paddingBottom = 0;\r\n\r\n\t\t// Reset minSize\r\n\t\tme.minSize = {\r\n\t\t\twidth: 0,\r\n\t\t\theight: 0\r\n\t\t};\r\n\t},\r\n\tafterSetDimensions: noop$1,\r\n\r\n\t//\r\n\r\n\tbeforeBuildLabels: noop$1,\r\n\tbuildLabels: function() {\r\n\t\tvar me = this;\r\n\t\tvar labelOpts = me.options.labels || {};\r\n\t\tvar legendItems = helpers$1.callback(labelOpts.generateLabels, [me.chart], me) || [];\r\n\r\n\t\tif (labelOpts.filter) {\r\n\t\t\tlegendItems = legendItems.filter(function(item) {\r\n\t\t\t\treturn labelOpts.filter(item, me.chart.data);\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tif (me.options.reverse) {\r\n\t\t\tlegendItems.reverse();\r\n\t\t}\r\n\r\n\t\tme.legendItems = legendItems;\r\n\t},\r\n\tafterBuildLabels: noop$1,\r\n\r\n\t//\r\n\r\n\tbeforeFit: noop$1,\r\n\tfit: function() {\r\n\t\tvar me = this;\r\n\t\tvar opts = me.options;\r\n\t\tvar labelOpts = opts.labels;\r\n\t\tvar display = opts.display;\r\n\r\n\t\tvar ctx = me.ctx;\r\n\r\n\t\tvar labelFont = helpers$1.options._parseFont(labelOpts);\r\n\t\tvar fontSize = labelFont.size;\r\n\r\n\t\t// Reset hit boxes\r\n\t\tvar hitboxes = me.legendHitBoxes = [];\r\n\r\n\t\tvar minSize = me.minSize;\r\n\t\tvar isHorizontal = me.isHorizontal();\r\n\r\n\t\tif (isHorizontal) {\r\n\t\t\tminSize.width = me.maxWidth; // fill all the width\r\n\t\t\tminSize.height = display ? 10 : 0;\r\n\t\t} else {\r\n\t\t\tminSize.width = display ? 10 : 0;\r\n\t\t\tminSize.height = me.maxHeight; // fill all the height\r\n\t\t}\r\n\r\n\t\t// Increase sizes here\r\n\t\tif (!display) {\r\n\t\t\tme.width = minSize.width = me.height = minSize.height = 0;\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tctx.font = labelFont.string;\r\n\r\n\t\tif (isHorizontal) {\r\n\t\t\t// Labels\r\n\r\n\t\t\t// Width of each line of legend boxes. Labels wrap onto multiple lines when there are too many to fit on one\r\n\t\t\tvar lineWidths = me.lineWidths = [0];\r\n\t\t\tvar totalHeight = 0;\r\n\r\n\t\t\tctx.textAlign = 'left';\r\n\t\t\tctx.textBaseline = 'middle';\r\n\r\n\t\t\thelpers$1.each(me.legendItems, function(legendItem, i) {\r\n\t\t\t\tvar boxWidth = getBoxWidth(labelOpts, fontSize);\r\n\t\t\t\tvar width = boxWidth + (fontSize / 2) + ctx.measureText(legendItem.text).width;\r\n\r\n\t\t\t\tif (i === 0 || lineWidths[lineWidths.length - 1] + width + 2 * labelOpts.padding > minSize.width) {\r\n\t\t\t\t\ttotalHeight += fontSize + labelOpts.padding;\r\n\t\t\t\t\tlineWidths[lineWidths.length - (i > 0 ? 0 : 1)] = 0;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Store the hitbox width and height here. Final position will be updated in `draw`\r\n\t\t\t\thitboxes[i] = {\r\n\t\t\t\t\tleft: 0,\r\n\t\t\t\t\ttop: 0,\r\n\t\t\t\t\twidth: width,\r\n\t\t\t\t\theight: fontSize\r\n\t\t\t\t};\r\n\r\n\t\t\t\tlineWidths[lineWidths.length - 1] += width + labelOpts.padding;\r\n\t\t\t});\r\n\r\n\t\t\tminSize.height += totalHeight;\r\n\r\n\t\t} else {\r\n\t\t\tvar vPadding = labelOpts.padding;\r\n\t\t\tvar columnWidths = me.columnWidths = [];\r\n\t\t\tvar columnHeights = me.columnHeights = [];\r\n\t\t\tvar totalWidth = labelOpts.padding;\r\n\t\t\tvar currentColWidth = 0;\r\n\t\t\tvar currentColHeight = 0;\r\n\r\n\t\t\thelpers$1.each(me.legendItems, function(legendItem, i) {\r\n\t\t\t\tvar boxWidth = getBoxWidth(labelOpts, fontSize);\r\n\t\t\t\tvar itemWidth = boxWidth + (fontSize / 2) + ctx.measureText(legendItem.text).width;\r\n\r\n\t\t\t\t// If too tall, go to new column\r\n\t\t\t\tif (i > 0 && currentColHeight + fontSize + 2 * vPadding > minSize.height) {\r\n\t\t\t\t\ttotalWidth += currentColWidth + labelOpts.padding;\r\n\t\t\t\t\tcolumnWidths.push(currentColWidth); // previous column width\r\n\t\t\t\t\tcolumnHeights.push(currentColHeight);\r\n\t\t\t\t\tcurrentColWidth = 0;\r\n\t\t\t\t\tcurrentColHeight = 0;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Get max width\r\n\t\t\t\tcurrentColWidth = Math.max(currentColWidth, itemWidth);\r\n\t\t\t\tcurrentColHeight += fontSize + vPadding;\r\n\r\n\t\t\t\t// Store the hitbox width and height here. Final position will be updated in `draw`\r\n\t\t\t\thitboxes[i] = {\r\n\t\t\t\t\tleft: 0,\r\n\t\t\t\t\ttop: 0,\r\n\t\t\t\t\twidth: itemWidth,\r\n\t\t\t\t\theight: fontSize\r\n\t\t\t\t};\r\n\t\t\t});\r\n\r\n\t\t\ttotalWidth += currentColWidth;\r\n\t\t\tcolumnWidths.push(currentColWidth);\r\n\t\t\tcolumnHeights.push(currentColHeight);\r\n\t\t\tminSize.width += totalWidth;\r\n\t\t}\r\n\r\n\t\tme.width = minSize.width;\r\n\t\tme.height = minSize.height;\r\n\t},\r\n\tafterFit: noop$1,\r\n\r\n\t// Shared Methods\r\n\tisHorizontal: function() {\r\n\t\treturn this.options.position === 'top' || this.options.position === 'bottom';\r\n\t},\r\n\r\n\t// Actually draw the legend on the canvas\r\n\tdraw: function() {\r\n\t\tvar me = this;\r\n\t\tvar opts = me.options;\r\n\t\tvar labelOpts = opts.labels;\r\n\t\tvar globalDefaults = core_defaults.global;\r\n\t\tvar defaultColor = globalDefaults.defaultColor;\r\n\t\tvar lineDefault = globalDefaults.elements.line;\r\n\t\tvar legendHeight = me.height;\r\n\t\tvar columnHeights = me.columnHeights;\r\n\t\tvar legendWidth = me.width;\r\n\t\tvar lineWidths = me.lineWidths;\r\n\r\n\t\tif (!opts.display) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tvar rtlHelper = getRtlHelper$1(opts.rtl, me.left, me.minSize.width);\r\n\t\tvar ctx = me.ctx;\r\n\t\tvar fontColor = valueOrDefault$e(labelOpts.fontColor, globalDefaults.defaultFontColor);\r\n\t\tvar labelFont = helpers$1.options._parseFont(labelOpts);\r\n\t\tvar fontSize = labelFont.size;\r\n\t\tvar cursor;\r\n\r\n\t\t// Canvas setup\r\n\t\tctx.textAlign = rtlHelper.textAlign('left');\r\n\t\tctx.textBaseline = 'middle';\r\n\t\tctx.lineWidth = 0.5;\r\n\t\tctx.strokeStyle = fontColor; // for strikethrough effect\r\n\t\tctx.fillStyle = fontColor; // render in correct colour\r\n\t\tctx.font = labelFont.string;\r\n\r\n\t\tvar boxWidth = getBoxWidth(labelOpts, fontSize);\r\n\t\tvar hitboxes = me.legendHitBoxes;\r\n\r\n\t\t// current position\r\n\t\tvar drawLegendBox = function(x, y, legendItem) {\r\n\t\t\tif (isNaN(boxWidth) || boxWidth <= 0) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\t// Set the ctx for the box\r\n\t\t\tctx.save();\r\n\r\n\t\t\tvar lineWidth = valueOrDefault$e(legendItem.lineWidth, lineDefault.borderWidth);\r\n\t\t\tctx.fillStyle = valueOrDefault$e(legendItem.fillStyle, defaultColor);\r\n\t\t\tctx.lineCap = valueOrDefault$e(legendItem.lineCap, lineDefault.borderCapStyle);\r\n\t\t\tctx.lineDashOffset = valueOrDefault$e(legendItem.lineDashOffset, lineDefault.borderDashOffset);\r\n\t\t\tctx.lineJoin = valueOrDefault$e(legendItem.lineJoin, lineDefault.borderJoinStyle);\r\n\t\t\tctx.lineWidth = lineWidth;\r\n\t\t\tctx.strokeStyle = valueOrDefault$e(legendItem.strokeStyle, defaultColor);\r\n\r\n\t\t\tif (ctx.setLineDash) {\r\n\t\t\t\t// IE 9 and 10 do not support line dash\r\n\t\t\t\tctx.setLineDash(valueOrDefault$e(legendItem.lineDash, lineDefault.borderDash));\r\n\t\t\t}\r\n\r\n\t\t\tif (labelOpts && labelOpts.usePointStyle) {\r\n\t\t\t\t// Recalculate x and y for drawPoint() because its expecting\r\n\t\t\t\t// x and y to be center of figure (instead of top left)\r\n\t\t\t\tvar radius = boxWidth * Math.SQRT2 / 2;\r\n\t\t\t\tvar centerX = rtlHelper.xPlus(x, boxWidth / 2);\r\n\t\t\t\tvar centerY = y + fontSize / 2;\r\n\r\n\t\t\t\t// Draw pointStyle as legend symbol\r\n\t\t\t\thelpers$1.canvas.drawPoint(ctx, legendItem.pointStyle, radius, centerX, centerY, legendItem.rotation);\r\n\t\t\t} else {\r\n\t\t\t\t// Draw box as legend symbol\r\n\t\t\t\tctx.fillRect(rtlHelper.leftForLtr(x, boxWidth), y, boxWidth, fontSize);\r\n\t\t\t\tif (lineWidth !== 0) {\r\n\t\t\t\t\tctx.strokeRect(rtlHelper.leftForLtr(x, boxWidth), y, boxWidth, fontSize);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tctx.restore();\r\n\t\t};\r\n\r\n\t\tvar fillText = function(x, y, legendItem, textWidth) {\r\n\t\t\tvar halfFontSize = fontSize / 2;\r\n\t\t\tvar xLeft = rtlHelper.xPlus(x, boxWidth + halfFontSize);\r\n\t\t\tvar yMiddle = y + halfFontSize;\r\n\r\n\t\t\tctx.fillText(legendItem.text, xLeft, yMiddle);\r\n\r\n\t\t\tif (legendItem.hidden) {\r\n\t\t\t\t// Strikethrough the text if hidden\r\n\t\t\t\tctx.beginPath();\r\n\t\t\t\tctx.lineWidth = 2;\r\n\t\t\t\tctx.moveTo(xLeft, yMiddle);\r\n\t\t\t\tctx.lineTo(rtlHelper.xPlus(xLeft, textWidth), yMiddle);\r\n\t\t\t\tctx.stroke();\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tvar alignmentOffset = function(dimension, blockSize) {\r\n\t\t\tswitch (opts.align) {\r\n\t\t\tcase 'start':\r\n\t\t\t\treturn labelOpts.padding;\r\n\t\t\tcase 'end':\r\n\t\t\t\treturn dimension - blockSize;\r\n\t\t\tdefault: // center\r\n\t\t\t\treturn (dimension - blockSize + labelOpts.padding) / 2;\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\t// Horizontal\r\n\t\tvar isHorizontal = me.isHorizontal();\r\n\t\tif (isHorizontal) {\r\n\t\t\tcursor = {\r\n\t\t\t\tx: me.left + alignmentOffset(legendWidth, lineWidths[0]),\r\n\t\t\t\ty: me.top + labelOpts.padding,\r\n\t\t\t\tline: 0\r\n\t\t\t};\r\n\t\t} else {\r\n\t\t\tcursor = {\r\n\t\t\t\tx: me.left + labelOpts.padding,\r\n\t\t\t\ty: me.top + alignmentOffset(legendHeight, columnHeights[0]),\r\n\t\t\t\tline: 0\r\n\t\t\t};\r\n\t\t}\r\n\r\n\t\thelpers$1.rtl.overrideTextDirection(me.ctx, opts.textDirection);\r\n\r\n\t\tvar itemHeight = fontSize + labelOpts.padding;\r\n\t\thelpers$1.each(me.legendItems, function(legendItem, i) {\r\n\t\t\tvar textWidth = ctx.measureText(legendItem.text).width;\r\n\t\t\tvar width = boxWidth + (fontSize / 2) + textWidth;\r\n\t\t\tvar x = cursor.x;\r\n\t\t\tvar y = cursor.y;\r\n\r\n\t\t\trtlHelper.setWidth(me.minSize.width);\r\n\r\n\t\t\t// Use (me.left + me.minSize.width) and (me.top + me.minSize.height)\r\n\t\t\t// instead of me.right and me.bottom because me.width and me.height\r\n\t\t\t// may have been changed since me.minSize was calculated\r\n\t\t\tif (isHorizontal) {\r\n\t\t\t\tif (i > 0 && x + width + labelOpts.padding > me.left + me.minSize.width) {\r\n\t\t\t\t\ty = cursor.y += itemHeight;\r\n\t\t\t\t\tcursor.line++;\r\n\t\t\t\t\tx = cursor.x = me.left + alignmentOffset(legendWidth, lineWidths[cursor.line]);\r\n\t\t\t\t}\r\n\t\t\t} else if (i > 0 && y + itemHeight > me.top + me.minSize.height) {\r\n\t\t\t\tx = cursor.x = x + me.columnWidths[cursor.line] + labelOpts.padding;\r\n\t\t\t\tcursor.line++;\r\n\t\t\t\ty = cursor.y = me.top + alignmentOffset(legendHeight, columnHeights[cursor.line]);\r\n\t\t\t}\r\n\r\n\t\t\tvar realX = rtlHelper.x(x);\r\n\r\n\t\t\tdrawLegendBox(realX, y, legendItem);\r\n\r\n\t\t\thitboxes[i].left = rtlHelper.leftForLtr(realX, hitboxes[i].width);\r\n\t\t\thitboxes[i].top = y;\r\n\r\n\t\t\t// Fill the actual label\r\n\t\t\tfillText(realX, y, legendItem, textWidth);\r\n\r\n\t\t\tif (isHorizontal) {\r\n\t\t\t\tcursor.x += width + labelOpts.padding;\r\n\t\t\t} else {\r\n\t\t\t\tcursor.y += itemHeight;\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\thelpers$1.rtl.restoreTextDirection(me.ctx, opts.textDirection);\r\n\t},\r\n\r\n\t/**\r\n\t * @private\r\n\t */\r\n\t_getLegendItemAt: function(x, y) {\r\n\t\tvar me = this;\r\n\t\tvar i, hitBox, lh;\r\n\r\n\t\tif (x >= me.left && x <= me.right && y >= me.top && y <= me.bottom) {\r\n\t\t\t// See if we are touching one of the dataset boxes\r\n\t\t\tlh = me.legendHitBoxes;\r\n\t\t\tfor (i = 0; i < lh.length; ++i) {\r\n\t\t\t\thitBox = lh[i];\r\n\r\n\t\t\t\tif (x >= hitBox.left && x <= hitBox.left + hitBox.width && y >= hitBox.top && y <= hitBox.top + hitBox.height) {\r\n\t\t\t\t\t// Touching an element\r\n\t\t\t\t\treturn me.legendItems[i];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn null;\r\n\t},\r\n\r\n\t/**\r\n\t * Handle an event\r\n\t * @private\r\n\t * @param {IEvent} event - The event to handle\r\n\t */\r\n\thandleEvent: function(e) {\r\n\t\tvar me = this;\r\n\t\tvar opts = me.options;\r\n\t\tvar type = e.type === 'mouseup' ? 'click' : e.type;\r\n\t\tvar hoveredItem;\r\n\r\n\t\tif (type === 'mousemove') {\r\n\t\t\tif (!opts.onHover && !opts.onLeave) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t} else if (type === 'click') {\r\n\t\t\tif (!opts.onClick) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t// Chart event already has relative position in it\r\n\t\thoveredItem = me._getLegendItemAt(e.x, e.y);\r\n\r\n\t\tif (type === 'click') {\r\n\t\t\tif (hoveredItem && opts.onClick) {\r\n\t\t\t\t// use e.native for backwards compatibility\r\n\t\t\t\topts.onClick.call(me, e.native, hoveredItem);\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tif (opts.onLeave && hoveredItem !== me._hoveredItem) {\r\n\t\t\t\tif (me._hoveredItem) {\r\n\t\t\t\t\topts.onLeave.call(me, e.native, me._hoveredItem);\r\n\t\t\t\t}\r\n\t\t\t\tme._hoveredItem = hoveredItem;\r\n\t\t\t}\r\n\r\n\t\t\tif (opts.onHover && hoveredItem) {\r\n\t\t\t\t// use e.native for backwards compatibility\r\n\t\t\t\topts.onHover.call(me, e.native, hoveredItem);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n});\r\n\r\nfunction createNewLegendAndAttach(chart, legendOpts) {\r\n\tvar legend = new Legend({\r\n\t\tctx: chart.ctx,\r\n\t\toptions: legendOpts,\r\n\t\tchart: chart\r\n\t});\r\n\r\n\tcore_layouts.configure(chart, legend, legendOpts);\r\n\tcore_layouts.addBox(chart, legend);\r\n\tchart.legend = legend;\r\n}\r\n\r\nvar plugin_legend = {\r\n\tid: 'legend',\r\n\r\n\t/**\r\n\t * Backward compatibility: since 2.1.5, the legend is registered as a plugin, making\r\n\t * Chart.Legend obsolete. To avoid a breaking change, we export the Legend as part of\r\n\t * the plugin, which one will be re-exposed in the chart.js file.\r\n\t * https://github.com/chartjs/Chart.js/pull/2640\r\n\t * @private\r\n\t */\r\n\t_element: Legend,\r\n\r\n\tbeforeInit: function(chart) {\r\n\t\tvar legendOpts = chart.options.legend;\r\n\r\n\t\tif (legendOpts) {\r\n\t\t\tcreateNewLegendAndAttach(chart, legendOpts);\r\n\t\t}\r\n\t},\r\n\r\n\tbeforeUpdate: function(chart) {\r\n\t\tvar legendOpts = chart.options.legend;\r\n\t\tvar legend = chart.legend;\r\n\r\n\t\tif (legendOpts) {\r\n\t\t\thelpers$1.mergeIf(legendOpts, core_defaults.global.legend);\r\n\r\n\t\t\tif (legend) {\r\n\t\t\t\tcore_layouts.configure(chart, legend, legendOpts);\r\n\t\t\t\tlegend.options = legendOpts;\r\n\t\t\t} else {\r\n\t\t\t\tcreateNewLegendAndAttach(chart, legendOpts);\r\n\t\t\t}\r\n\t\t} else if (legend) {\r\n\t\t\tcore_layouts.removeBox(chart, legend);\r\n\t\t\tdelete chart.legend;\r\n\t\t}\r\n\t},\r\n\r\n\tafterEvent: function(chart, e) {\r\n\t\tvar legend = chart.legend;\r\n\t\tif (legend) {\r\n\t\t\tlegend.handleEvent(e);\r\n\t\t}\r\n\t}\r\n};\n\nvar noop$2 = helpers$1.noop;\r\n\r\ncore_defaults._set('global', {\r\n\ttitle: {\r\n\t\tdisplay: false,\r\n\t\tfontStyle: 'bold',\r\n\t\tfullWidth: true,\r\n\t\tpadding: 10,\r\n\t\tposition: 'top',\r\n\t\ttext: '',\r\n\t\tweight: 2000         // by default greater than legend (1000) to be above\r\n\t}\r\n});\r\n\r\n/**\r\n * IMPORTANT: this class is exposed publicly as Chart.Legend, backward compatibility required!\r\n */\r\nvar Title = core_element.extend({\r\n\tinitialize: function(config) {\r\n\t\tvar me = this;\r\n\t\thelpers$1.extend(me, config);\r\n\r\n\t\t// Contains hit boxes for each dataset (in dataset order)\r\n\t\tme.legendHitBoxes = [];\r\n\t},\r\n\r\n\t// These methods are ordered by lifecycle. Utilities then follow.\r\n\r\n\tbeforeUpdate: noop$2,\r\n\tupdate: function(maxWidth, maxHeight, margins) {\r\n\t\tvar me = this;\r\n\r\n\t\t// Update Lifecycle - Probably don't want to ever extend or overwrite this function ;)\r\n\t\tme.beforeUpdate();\r\n\r\n\t\t// Absorb the master measurements\r\n\t\tme.maxWidth = maxWidth;\r\n\t\tme.maxHeight = maxHeight;\r\n\t\tme.margins = margins;\r\n\r\n\t\t// Dimensions\r\n\t\tme.beforeSetDimensions();\r\n\t\tme.setDimensions();\r\n\t\tme.afterSetDimensions();\r\n\t\t// Labels\r\n\t\tme.beforeBuildLabels();\r\n\t\tme.buildLabels();\r\n\t\tme.afterBuildLabels();\r\n\r\n\t\t// Fit\r\n\t\tme.beforeFit();\r\n\t\tme.fit();\r\n\t\tme.afterFit();\r\n\t\t//\r\n\t\tme.afterUpdate();\r\n\r\n\t\treturn me.minSize;\r\n\r\n\t},\r\n\tafterUpdate: noop$2,\r\n\r\n\t//\r\n\r\n\tbeforeSetDimensions: noop$2,\r\n\tsetDimensions: function() {\r\n\t\tvar me = this;\r\n\t\t// Set the unconstrained dimension before label rotation\r\n\t\tif (me.isHorizontal()) {\r\n\t\t\t// Reset position before calculating rotation\r\n\t\t\tme.width = me.maxWidth;\r\n\t\t\tme.left = 0;\r\n\t\t\tme.right = me.width;\r\n\t\t} else {\r\n\t\t\tme.height = me.maxHeight;\r\n\r\n\t\t\t// Reset position before calculating rotation\r\n\t\t\tme.top = 0;\r\n\t\t\tme.bottom = me.height;\r\n\t\t}\r\n\r\n\t\t// Reset padding\r\n\t\tme.paddingLeft = 0;\r\n\t\tme.paddingTop = 0;\r\n\t\tme.paddingRight = 0;\r\n\t\tme.paddingBottom = 0;\r\n\r\n\t\t// Reset minSize\r\n\t\tme.minSize = {\r\n\t\t\twidth: 0,\r\n\t\t\theight: 0\r\n\t\t};\r\n\t},\r\n\tafterSetDimensions: noop$2,\r\n\r\n\t//\r\n\r\n\tbeforeBuildLabels: noop$2,\r\n\tbuildLabels: noop$2,\r\n\tafterBuildLabels: noop$2,\r\n\r\n\t//\r\n\r\n\tbeforeFit: noop$2,\r\n\tfit: function() {\r\n\t\tvar me = this;\r\n\t\tvar opts = me.options;\r\n\t\tvar minSize = me.minSize = {};\r\n\t\tvar isHorizontal = me.isHorizontal();\r\n\t\tvar lineCount, textSize;\r\n\r\n\t\tif (!opts.display) {\r\n\t\t\tme.width = minSize.width = me.height = minSize.height = 0;\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tlineCount = helpers$1.isArray(opts.text) ? opts.text.length : 1;\r\n\t\ttextSize = lineCount * helpers$1.options._parseFont(opts).lineHeight + opts.padding * 2;\r\n\r\n\t\tme.width = minSize.width = isHorizontal ? me.maxWidth : textSize;\r\n\t\tme.height = minSize.height = isHorizontal ? textSize : me.maxHeight;\r\n\t},\r\n\tafterFit: noop$2,\r\n\r\n\t// Shared Methods\r\n\tisHorizontal: function() {\r\n\t\tvar pos = this.options.position;\r\n\t\treturn pos === 'top' || pos === 'bottom';\r\n\t},\r\n\r\n\t// Actually draw the title block on the canvas\r\n\tdraw: function() {\r\n\t\tvar me = this;\r\n\t\tvar ctx = me.ctx;\r\n\t\tvar opts = me.options;\r\n\r\n\t\tif (!opts.display) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tvar fontOpts = helpers$1.options._parseFont(opts);\r\n\t\tvar lineHeight = fontOpts.lineHeight;\r\n\t\tvar offset = lineHeight / 2 + opts.padding;\r\n\t\tvar rotation = 0;\r\n\t\tvar top = me.top;\r\n\t\tvar left = me.left;\r\n\t\tvar bottom = me.bottom;\r\n\t\tvar right = me.right;\r\n\t\tvar maxWidth, titleX, titleY;\r\n\r\n\t\tctx.fillStyle = helpers$1.valueOrDefault(opts.fontColor, core_defaults.global.defaultFontColor); // render in correct colour\r\n\t\tctx.font = fontOpts.string;\r\n\r\n\t\t// Horizontal\r\n\t\tif (me.isHorizontal()) {\r\n\t\t\ttitleX = left + ((right - left) / 2); // midpoint of the width\r\n\t\t\ttitleY = top + offset;\r\n\t\t\tmaxWidth = right - left;\r\n\t\t} else {\r\n\t\t\ttitleX = opts.position === 'left' ? left + offset : right - offset;\r\n\t\t\ttitleY = top + ((bottom - top) / 2);\r\n\t\t\tmaxWidth = bottom - top;\r\n\t\t\trotation = Math.PI * (opts.position === 'left' ? -0.5 : 0.5);\r\n\t\t}\r\n\r\n\t\tctx.save();\r\n\t\tctx.translate(titleX, titleY);\r\n\t\tctx.rotate(rotation);\r\n\t\tctx.textAlign = 'center';\r\n\t\tctx.textBaseline = 'middle';\r\n\r\n\t\tvar text = opts.text;\r\n\t\tif (helpers$1.isArray(text)) {\r\n\t\t\tvar y = 0;\r\n\t\t\tfor (var i = 0; i < text.length; ++i) {\r\n\t\t\t\tctx.fillText(text[i], 0, y, maxWidth);\r\n\t\t\t\ty += lineHeight;\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tctx.fillText(text, 0, 0, maxWidth);\r\n\t\t}\r\n\r\n\t\tctx.restore();\r\n\t}\r\n});\r\n\r\nfunction createNewTitleBlockAndAttach(chart, titleOpts) {\r\n\tvar title = new Title({\r\n\t\tctx: chart.ctx,\r\n\t\toptions: titleOpts,\r\n\t\tchart: chart\r\n\t});\r\n\r\n\tcore_layouts.configure(chart, title, titleOpts);\r\n\tcore_layouts.addBox(chart, title);\r\n\tchart.titleBlock = title;\r\n}\r\n\r\nvar plugin_title = {\r\n\tid: 'title',\r\n\r\n\t/**\r\n\t * Backward compatibility: since 2.1.5, the title is registered as a plugin, making\r\n\t * Chart.Title obsolete. To avoid a breaking change, we export the Title as part of\r\n\t * the plugin, which one will be re-exposed in the chart.js file.\r\n\t * https://github.com/chartjs/Chart.js/pull/2640\r\n\t * @private\r\n\t */\r\n\t_element: Title,\r\n\r\n\tbeforeInit: function(chart) {\r\n\t\tvar titleOpts = chart.options.title;\r\n\r\n\t\tif (titleOpts) {\r\n\t\t\tcreateNewTitleBlockAndAttach(chart, titleOpts);\r\n\t\t}\r\n\t},\r\n\r\n\tbeforeUpdate: function(chart) {\r\n\t\tvar titleOpts = chart.options.title;\r\n\t\tvar titleBlock = chart.titleBlock;\r\n\r\n\t\tif (titleOpts) {\r\n\t\t\thelpers$1.mergeIf(titleOpts, core_defaults.global.title);\r\n\r\n\t\t\tif (titleBlock) {\r\n\t\t\t\tcore_layouts.configure(chart, titleBlock, titleOpts);\r\n\t\t\t\ttitleBlock.options = titleOpts;\r\n\t\t\t} else {\r\n\t\t\t\tcreateNewTitleBlockAndAttach(chart, titleOpts);\r\n\t\t\t}\r\n\t\t} else if (titleBlock) {\r\n\t\t\tcore_layouts.removeBox(chart, titleBlock);\r\n\t\t\tdelete chart.titleBlock;\r\n\t\t}\r\n\t}\r\n};\n\nvar plugins = {};\r\nvar filler = plugin_filler;\r\nvar legend = plugin_legend;\r\nvar title = plugin_title;\nplugins.filler = filler;\nplugins.legend = legend;\nplugins.title = title;\n\n/**\r\n * @namespace Chart\r\n */\r\n\r\n\r\ncore_controller.helpers = helpers$1;\r\n\r\n// @todo dispatch these helpers into appropriated helpers/helpers.* file and write unit tests!\r\ncore_helpers();\r\n\r\ncore_controller._adapters = core_adapters;\r\ncore_controller.Animation = core_animation;\r\ncore_controller.animationService = core_animations;\r\ncore_controller.controllers = controllers;\r\ncore_controller.DatasetController = core_datasetController;\r\ncore_controller.defaults = core_defaults;\r\ncore_controller.Element = core_element;\r\ncore_controller.elements = elements;\r\ncore_controller.Interaction = core_interaction;\r\ncore_controller.layouts = core_layouts;\r\ncore_controller.platform = platform;\r\ncore_controller.plugins = core_plugins;\r\ncore_controller.Scale = core_scale;\r\ncore_controller.scaleService = core_scaleService;\r\ncore_controller.Ticks = core_ticks;\r\ncore_controller.Tooltip = core_tooltip;\r\n\r\n// Register built-in scales\r\n\r\ncore_controller.helpers.each(scales, function(scale, type) {\r\n\tcore_controller.scaleService.registerScaleType(type, scale, scale._defaults);\r\n});\r\n\r\n// Load to register built-in adapters (as side effects)\r\n\r\n\r\n// Loading built-in plugins\r\n\r\nfor (var k in plugins) {\r\n\tif (plugins.hasOwnProperty(k)) {\r\n\t\tcore_controller.plugins.register(plugins[k]);\r\n\t}\r\n}\r\n\r\ncore_controller.platform.initialize();\r\n\r\nvar src = core_controller;\r\nif (typeof window !== 'undefined') {\r\n\twindow.Chart = core_controller;\r\n}\r\n\r\n// DEPRECATIONS\r\n\r\n/**\r\n * Provided for backward compatibility, not available anymore\r\n * @namespace Chart.Chart\r\n * @deprecated since version 2.8.0\r\n * @todo remove at version 3\r\n * @private\r\n */\r\ncore_controller.Chart = core_controller;\r\n\r\n/**\r\n * Provided for backward compatibility, not available anymore\r\n * @namespace Chart.Legend\r\n * @deprecated since version 2.1.5\r\n * @todo remove at version 3\r\n * @private\r\n */\r\ncore_controller.Legend = plugins.legend._element;\r\n\r\n/**\r\n * Provided for backward compatibility, not available anymore\r\n * @namespace Chart.Title\r\n * @deprecated since version 2.1.5\r\n * @todo remove at version 3\r\n * @private\r\n */\r\ncore_controller.Title = plugins.title._element;\r\n\r\n/**\r\n * Provided for backward compatibility, use Chart.plugins instead\r\n * @namespace Chart.pluginService\r\n * @deprecated since version 2.1.5\r\n * @todo remove at version 3\r\n * @private\r\n */\r\ncore_controller.pluginService = core_controller.plugins;\r\n\r\n/**\r\n * Provided for backward compatibility, inheriting from Chart.PlugingBase has no\r\n * effect, instead simply create/register plugins via plain JavaScript objects.\r\n * @interface Chart.PluginBase\r\n * @deprecated since version 2.5.0\r\n * @todo remove at version 3\r\n * @private\r\n */\r\ncore_controller.PluginBase = core_controller.Element.extend({});\r\n\r\n/**\r\n * Provided for backward compatibility, use Chart.helpers.canvas instead.\r\n * @namespace Chart.canvasHelpers\r\n * @deprecated since version 2.6.0\r\n * @todo remove at version 3\r\n * @private\r\n */\r\ncore_controller.canvasHelpers = core_controller.helpers.canvas;\r\n\r\n/**\r\n * Provided for backward compatibility, use Chart.layouts instead.\r\n * @namespace Chart.layoutService\r\n * @deprecated since version 2.7.3\r\n * @todo remove at version 3\r\n * @private\r\n */\r\ncore_controller.layoutService = core_controller.layouts;\r\n\r\n/**\r\n * Provided for backward compatibility, not available anymore.\r\n * @namespace Chart.LinearScaleBase\r\n * @deprecated since version 2.8\r\n * @todo remove at version 3\r\n * @private\r\n */\r\ncore_controller.LinearScaleBase = scale_linearbase;\r\n\r\n/**\r\n * Provided for backward compatibility, instead we should create a new Chart\r\n * by setting the type in the config (`new Chart(id, {type: '{chart-type}'}`).\r\n * @deprecated since version 2.8.0\r\n * @todo remove at version 3\r\n */\r\ncore_controller.helpers.each(\r\n\t[\r\n\t\t'Bar',\r\n\t\t'Bubble',\r\n\t\t'Doughnut',\r\n\t\t'Line',\r\n\t\t'PolarArea',\r\n\t\t'Radar',\r\n\t\t'Scatter'\r\n\t],\r\n\tfunction(klass) {\r\n\t\tcore_controller[klass] = function(ctx, cfg) {\r\n\t\t\treturn new core_controller(ctx, core_controller.helpers.merge(cfg || {}, {\r\n\t\t\t\ttype: klass.charAt(0).toLowerCase() + klass.slice(1)\r\n\t\t\t}));\r\n\t\t};\r\n\t}\r\n);\n\nreturn src;\n\n})));\n","import isFunction from 'lodash.isfunction';\n\n// https://github.com/twbs/bootstrap/blob/v4.0.0-alpha.4/js/src/modal.js#L436-L443\nexport function getScrollbarWidth() {\n  let scrollDiv = document.createElement('div');\n  // .modal-scrollbar-measure styles // https://github.com/twbs/bootstrap/blob/v4.0.0-alpha.4/scss/_modal.scss#L106-L113\n  scrollDiv.style.position = 'absolute';\n  scrollDiv.style.top = '-9999px';\n  scrollDiv.style.width = '50px';\n  scrollDiv.style.height = '50px';\n  scrollDiv.style.overflow = 'scroll';\n  document.body.appendChild(scrollDiv);\n  const scrollbarWidth = scrollDiv.offsetWidth - scrollDiv.clientWidth;\n  document.body.removeChild(scrollDiv);\n  return scrollbarWidth;\n}\n\nexport function setScrollbarWidth(padding) {\n  document.body.style.paddingRight = padding > 0 ? `${padding}px` : null;\n}\n\nexport function isBodyOverflowing() {\n  return document.body.clientWidth < window.innerWidth;\n}\n\nexport function getOriginalBodyPadding() {\n  const style = window.getComputedStyle(document.body, null);\n\n  return parseInt(\n    (style && style.getPropertyValue('padding-right')) || 0,\n    10\n  );\n}\n\nexport function conditionallyUpdateScrollbar() {\n  const scrollbarWidth = getScrollbarWidth();\n  // https://github.com/twbs/bootstrap/blob/v4.0.0-alpha.6/js/src/modal.js#L433\n  const fixedContent = document.querySelectorAll('.fixed-top, .fixed-bottom, .is-fixed, .sticky-top')[0];\n  const bodyPadding = fixedContent ? parseInt(\n    fixedContent.style.paddingRight || 0,\n    10\n  ) : 0;\n\n  if (isBodyOverflowing()) {\n    setScrollbarWidth(bodyPadding + scrollbarWidth);\n  }\n}\n\nlet globalCssModule;\n\nexport function setGlobalCssModule(cssModule) {\n  globalCssModule = cssModule;\n}\n\nexport function mapToCssModules(className = '', cssModule = globalCssModule) {\n  if (!cssModule) return className;\n  return className.split(' ').map(c => cssModule[c] || c).join(' ');\n}\n\n/**\n * Returns a new object with the key/value pairs from `obj` that are not in the array `omitKeys`.\n */\nexport function omit(obj, omitKeys) {\n  const result = {};\n  Object.keys(obj).forEach((key) => {\n    if (omitKeys.indexOf(key) === -1) {\n      result[key] = obj[key];\n    }\n  });\n  return result;\n}\n\n/**\n * Returns a filtered copy of an object with only the specified keys.\n */\nexport function pick(obj, keys) {\n  const pickKeys = Array.isArray(keys) ? keys : [keys];\n  let length = pickKeys.length;\n  let key;\n  const result = {};\n\n  while (length > 0) {\n    length -= 1;\n    key = pickKeys[length];\n    result[key] = obj[key];\n  }\n  return result;\n}\n\nlet warned = {};\n\nexport function warnOnce(message) {\n  if (!warned[message]) {\n    /* istanbul ignore else */\n    if (typeof console !== 'undefined') {\n      console.error(message); // eslint-disable-line no-console\n    }\n    warned[message] = true;\n  }\n}\n\nexport function deprecated(propType, explanation) {\n  return function validate(props, propName, componentName, ...rest) {\n    if (props[propName] !== null && typeof props[propName] !== 'undefined') {\n      warnOnce(`\"${propName}\" property of \"${componentName}\" has been deprecated.\\n${explanation}`);\n    }\n\n    return propType(props, propName, componentName, ...rest);\n  };\n}\n\nexport function DOMElement(props, propName, componentName) {\n  if (!(props[propName] instanceof Element)) {\n    return new Error(\n      'Invalid prop `' + propName + '` supplied to `' + componentName +\n      '`. Expected prop to be an instance of Element. Validation failed.'\n    );\n  }\n}\n\nexport function getTarget(target) {\n  if (isFunction(target)) {\n    return target();\n  }\n\n  if (typeof target === 'string' && document) {\n    let selection = document.querySelector(target);\n    if (selection === null) {\n      selection = document.querySelector(`#${target}`);\n    }\n    if (selection === null) {\n      throw new Error(`The target '${target}' could not be identified in the dom, tip: check spelling`);\n    }\n    return selection;\n  }\n\n  return target;\n}\n\n\n/* eslint key-spacing: [\"error\", { afterColon: true, align: \"value\" }] */\n// These are all setup to match what is in the bootstrap _variables.scss\n// https://github.com/twbs/bootstrap/blob/v4-dev/scss/_variables.scss\nexport const TransitionTimeouts = {\n  Fade:     150, // $transition-fade\n  Collapse: 350, // $transition-collapse\n  Modal:    300, // $modal-transition\n  Carousel: 600, // $carousel-transition\n};\n\n// Duplicated Transition.propType keys to ensure that Reactstrap builds\n// for distribution properly exclude these keys for nested child HTML attributes\n// since `react-transition-group` removes propTypes in production builds.\nexport const TransitionPropTypeKeys = [\n  'in',\n  'mountOnEnter',\n  'unmountOnExit',\n  'appear',\n  'enter',\n  'exit',\n  'timeout',\n  'onEnter',\n  'onEntering',\n  'onEntered',\n  'onExit',\n  'onExiting',\n  'onExited',\n];\n\nexport const TransitionStatuses = {\n  ENTERING: 'entering',\n  ENTERED:  'entered',\n  EXITING:  'exiting',\n  EXITED:   'exited',\n};\n\nexport const keyCodes = {\n  esc:   27,\n  space: 32,\n  tab:   9,\n  up:    38,\n  down:  40,\n};\n\nexport const PopperPlacements = [\n  'auto-start',\n  'auto',\n  'auto-end',\n  'top-start',\n  'top',\n  'top-end',\n  'right-start',\n  'right',\n  'right-end',\n  'bottom-end',\n  'bottom',\n  'bottom-start',\n  'left-end',\n  'left',\n  'left-start',\n];\n\nexport const canUseDOM = !!(\n  typeof window !== 'undefined' &&\n  window.document &&\n  window.document.createElement\n);\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport { mapToCssModules } from './utils';\n\nconst propTypes = {\n  tag: PropTypes.oneOfType([PropTypes.func, PropTypes.string]),\n  fluid: PropTypes.bool,\n  className: PropTypes.string,\n  cssModule: PropTypes.object,\n};\n\nconst defaultProps = {\n  tag: 'div',\n};\n\nconst Container = (props) => {\n  const {\n    className,\n    cssModule,\n    fluid,\n    tag: Tag,\n    ...attributes\n  } = props;\n\n  const classes = mapToCssModules(classNames(\n    className,\n    fluid ? 'container-fluid' : 'container'\n  ), cssModule);\n\n  return (\n    <Tag {...attributes} className={classes} />\n  );\n};\n\nContainer.propTypes = propTypes;\nContainer.defaultProps = defaultProps;\n\nexport default Container;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport { mapToCssModules } from './utils';\n\nconst propTypes = {\n  tag: PropTypes.oneOfType([PropTypes.func, PropTypes.string]),\n  noGutters: PropTypes.bool,\n  className: PropTypes.string,\n  cssModule: PropTypes.object,\n};\n\nconst defaultProps = {\n  tag: 'div'\n};\n\nconst Row = (props) => {\n  const {\n    className,\n    cssModule,\n    noGutters,\n    tag: Tag,\n    ...attributes\n  } = props;\n\n  const classes = mapToCssModules(classNames(\n    className,\n    noGutters ? 'no-gutters' : null,\n    'row'\n  ), cssModule);\n\n  return (\n    <Tag {...attributes} className={classes} />\n  );\n};\n\nRow.propTypes = propTypes;\nRow.defaultProps = defaultProps;\n\nexport default Row;\n","import isobject from 'lodash.isobject';\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport { mapToCssModules, deprecated } from './utils';\n\nconst colWidths = ['xs', 'sm', 'md', 'lg', 'xl'];\nconst stringOrNumberProp = PropTypes.oneOfType([PropTypes.number, PropTypes.string]);\n\nconst columnProps = PropTypes.oneOfType([\n  PropTypes.bool,\n  PropTypes.number,\n  PropTypes.string,\n  PropTypes.shape({\n    size: PropTypes.oneOfType([PropTypes.bool, PropTypes.number, PropTypes.string]),\n    push: deprecated(stringOrNumberProp, 'Please use the prop \"order\"'),\n    pull: deprecated(stringOrNumberProp, 'Please use the prop \"order\"'),\n    order: stringOrNumberProp,\n    offset: stringOrNumberProp\n  })\n]);\n\nconst propTypes = {\n  tag: PropTypes.oneOfType([PropTypes.func, PropTypes.string]),\n  xs: columnProps,\n  sm: columnProps,\n  md: columnProps,\n  lg: columnProps,\n  xl: columnProps,\n  className: PropTypes.string,\n  cssModule: PropTypes.object,\n  widths: PropTypes.array,\n};\n\nconst defaultProps = {\n  tag: 'div',\n  widths: colWidths,\n};\n\nconst getColumnSizeClass = (isXs, colWidth, colSize) => {\n  if (colSize === true || colSize === '') {\n    return isXs ? 'col' : `col-${colWidth}`;\n  } else if (colSize === 'auto') {\n    return isXs ? 'col-auto' : `col-${colWidth}-auto`;\n  }\n\n  return isXs ? `col-${colSize}` : `col-${colWidth}-${colSize}`;\n};\n\nconst Col = (props) => {\n  const {\n    className,\n    cssModule,\n    widths,\n    tag: Tag,\n    ...attributes\n  } = props;\n  const colClasses = [];\n\n  widths.forEach((colWidth, i) => {\n    let columnProp = props[colWidth];\n\n    delete attributes[colWidth];\n\n    if (!columnProp && columnProp !== '') {\n      return;\n    }\n\n    const isXs = !i;\n\n    if (isobject(columnProp)) {\n      const colSizeInterfix = isXs ? '-' : `-${colWidth}-`;\n      const colClass = getColumnSizeClass(isXs, colWidth, columnProp.size);\n\n      colClasses.push(mapToCssModules(classNames({\n        [colClass]: columnProp.size || columnProp.size === '',\n        [`order${colSizeInterfix}${columnProp.order}`]: columnProp.order || columnProp.order === 0,\n        [`offset${colSizeInterfix}${columnProp.offset}`]: columnProp.offset || columnProp.offset === 0\n      }), cssModule));\n    } else {\n      const colClass = getColumnSizeClass(isXs, colWidth, columnProp);\n      colClasses.push(colClass);\n    }\n  });\n\n  if (!colClasses.length) {\n    colClasses.push('col');\n  }\n\n  const classes = mapToCssModules(classNames(\n    className,\n    colClasses\n  ), cssModule);\n\n  return (\n    <Tag {...attributes} className={classes} />\n  );\n};\n\nCol.propTypes = propTypes;\nCol.defaultProps = defaultProps;\n\nexport default Col;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport { mapToCssModules, deprecated } from './utils';\n\nconst propTypes = {\n  light: PropTypes.bool,\n  dark: PropTypes.bool,\n  inverse: deprecated(PropTypes.bool, 'Please use the prop \"dark\"'),\n  full: PropTypes.bool,\n  fixed: PropTypes.string,\n  sticky: PropTypes.string,\n  color: PropTypes.string,\n  role: PropTypes.string,\n  tag: PropTypes.oneOfType([PropTypes.func, PropTypes.string]),\n  className: PropTypes.string,\n  cssModule: PropTypes.object,\n  toggleable: deprecated(PropTypes.oneOfType([PropTypes.bool, PropTypes.string]), 'Please use the prop \"expand\"'),\n  expand: PropTypes.oneOfType([PropTypes.bool, PropTypes.string]),\n};\n\nconst defaultProps = {\n  tag: 'nav',\n  expand: false,\n};\n\nconst getExpandClass = (expand) => {\n  if (expand === false) {\n    return false;\n  } else if (expand === true || expand === 'xs') {\n    return 'navbar-expand';\n  }\n\n  return `navbar-expand-${expand}`;\n};\n\n// To better maintain backwards compatibility while toggleable is deprecated.\n// We must map breakpoints to the next breakpoint so that toggleable and expand do the same things at the same breakpoint.\nconst toggleableToExpand = {\n  xs: 'sm',\n  sm: 'md',\n  md: 'lg',\n  lg: 'xl',\n};\n\nconst getToggleableClass = (toggleable) => {\n  if (toggleable === undefined || toggleable === 'xl') {\n    return false;\n  } else if (toggleable === false) {\n    return 'navbar-expand';\n  }\n\n  return `navbar-expand-${toggleable === true ? 'sm' : (toggleableToExpand[toggleable] || toggleable)}`;\n};\n\nconst Navbar = (props) => {\n  const {\n    toggleable,\n    expand,\n    className,\n    cssModule,\n    light,\n    dark,\n    inverse,\n    fixed,\n    sticky,\n    color,\n    tag: Tag,\n    ...attributes\n  } = props;\n\n  const classes = mapToCssModules(classNames(\n    className,\n    'navbar',\n    getExpandClass(expand) || getToggleableClass(toggleable),\n    {\n      'navbar-light': light,\n      'navbar-dark': inverse || dark,\n      [`bg-${color}`]: color,\n      [`fixed-${fixed}`]: fixed,\n      [`sticky-${sticky}`]: sticky,\n    }\n  ), cssModule);\n\n  return (\n    <Tag {...attributes} className={classes} />\n  );\n};\n\nNavbar.propTypes = propTypes;\nNavbar.defaultProps = defaultProps;\n\nexport default Navbar;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport { mapToCssModules } from './utils';\n\nconst propTypes = {\n  tag: PropTypes.oneOfType([PropTypes.func, PropTypes.string]),\n  className: PropTypes.string,\n  cssModule: PropTypes.object,\n};\n\nconst defaultProps = {\n  tag: 'a'\n};\n\nconst NavbarBrand = (props) => {\n  const {\n    className,\n    cssModule,\n    tag: Tag,\n    ...attributes\n  } = props;\n\n  const classes = mapToCssModules(classNames(\n    className,\n    'navbar-brand'\n  ), cssModule);\n\n  return (\n    <Tag {...attributes} className={classes} />\n  );\n};\n\nNavbarBrand.propTypes = propTypes;\nNavbarBrand.defaultProps = defaultProps;\n\nexport default NavbarBrand;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport { mapToCssModules } from './utils';\n\nconst propTypes = {\n  tag: PropTypes.oneOfType([PropTypes.func, PropTypes.string]),\n  type: PropTypes.string,\n  className: PropTypes.string,\n  cssModule: PropTypes.object,\n  children: PropTypes.node,\n};\n\nconst defaultProps = {\n  tag: 'button',\n  type: 'button'\n};\n\nconst NavbarToggler = (props) => {\n  const {\n    className,\n    cssModule,\n    children,\n    tag: Tag,\n    ...attributes\n  } = props;\n\n  const classes = mapToCssModules(classNames(\n    className,\n    'navbar-toggler'\n  ), cssModule);\n\n  return (\n    <Tag {...attributes} className={classes}>\n      {children || <span className={mapToCssModules('navbar-toggler-icon', cssModule)} />}\n    </Tag>\n  );\n};\n\nNavbarToggler.propTypes = propTypes;\nNavbarToggler.defaultProps = defaultProps;\n\nexport default NavbarToggler;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport { mapToCssModules } from './utils';\n\nconst propTypes = {\n  tabs: PropTypes.bool,\n  pills: PropTypes.bool,\n  vertical: PropTypes.oneOfType([PropTypes.bool, PropTypes.string]),\n  horizontal: PropTypes.string,\n  justified: PropTypes.bool,\n  fill: PropTypes.bool,\n  navbar: PropTypes.bool,\n  card: PropTypes.bool,\n  tag: PropTypes.oneOfType([PropTypes.func, PropTypes.string]),\n  className: PropTypes.string,\n  cssModule: PropTypes.object,\n};\n\nconst defaultProps = {\n  tag: 'ul',\n  vertical: false,\n};\n\nconst getVerticalClass = (vertical) => {\n  if (vertical === false) {\n    return false;\n  } else if (vertical === true || vertical === 'xs') {\n    return 'flex-column';\n  }\n\n  return `flex-${vertical}-column`;\n};\n\nconst Nav = (props) => {\n  const {\n    className,\n    cssModule,\n    tabs,\n    pills,\n    vertical,\n    horizontal,\n    justified,\n    fill,\n    navbar,\n    card,\n    tag: Tag,\n    ...attributes\n  } = props;\n\n  const classes = mapToCssModules(classNames(\n    className,\n    navbar ? 'navbar-nav' : 'nav',\n    horizontal ? `justify-content-${horizontal}` : false,\n    getVerticalClass(vertical),\n    {\n      'nav-tabs': tabs,\n      'card-header-tabs': card && tabs,\n      'nav-pills': pills,\n      'card-header-pills': card && pills,\n      'nav-justified': justified,\n      'nav-fill': fill,\n    }\n  ), cssModule);\n\n  return (\n    <Tag {...attributes} className={classes} />\n  );\n};\n\nNav.propTypes = propTypes;\nNav.defaultProps = defaultProps;\n\nexport default Nav;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport { mapToCssModules } from './utils';\n\nconst propTypes = {\n  tag: PropTypes.oneOfType([PropTypes.func, PropTypes.string]),\n  active: PropTypes.bool,\n  className: PropTypes.string,\n  cssModule: PropTypes.object,\n};\n\nconst defaultProps = {\n  tag: 'li'\n};\n\nconst NavItem = (props) => {\n  const {\n    className,\n    cssModule,\n    active,\n    tag: Tag,\n    ...attributes\n  } = props;\n\n  const classes = mapToCssModules(classNames(\n    className,\n    'nav-item',\n    active ? 'active' : false\n  ), cssModule);\n\n  return (\n    <Tag {...attributes} className={classes} />\n  );\n};\n\nNavItem.propTypes = propTypes;\nNavItem.defaultProps = defaultProps;\n\nexport default NavItem;\n","/* eslint react/no-find-dom-node: 0 */\n// https://github.com/yannickcr/eslint-plugin-react/blob/master/docs/rules/no-find-dom-node.md\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport ReactDOM from 'react-dom';\nimport { Manager } from 'react-popper';\nimport classNames from 'classnames';\nimport { mapToCssModules, omit, keyCodes, deprecated } from './utils';\n\nconst propTypes = {\n  disabled: PropTypes.bool,\n  dropup: deprecated(PropTypes.bool, 'Please use the prop \"direction\" with the value \"up\".'),\n  direction: PropTypes.oneOf(['up', 'down', 'left', 'right']),\n  group: PropTypes.bool,\n  isOpen: PropTypes.bool,\n  nav: PropTypes.bool,\n  active: PropTypes.bool,\n  addonType: PropTypes.oneOfType([PropTypes.bool, PropTypes.oneOf(['prepend', 'append'])]),\n  size: PropTypes.string,\n  tag: PropTypes.string,\n  toggle: PropTypes.func,\n  children: PropTypes.node,\n  className: PropTypes.string,\n  cssModule: PropTypes.object,\n  inNavbar: PropTypes.bool,\n};\n\nconst defaultProps = {\n  isOpen: false,\n  direction: 'down',\n  nav: false,\n  active: false,\n  addonType: false,\n  inNavbar: false,\n};\n\nconst childContextTypes = {\n  toggle: PropTypes.func.isRequired,\n  isOpen: PropTypes.bool.isRequired,\n  direction: PropTypes.oneOf(['up', 'down', 'left', 'right']).isRequired,\n  inNavbar: PropTypes.bool.isRequired,\n};\n\nclass Dropdown extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.addEvents = this.addEvents.bind(this);\n    this.handleDocumentClick = this.handleDocumentClick.bind(this);\n    this.handleKeyDown = this.handleKeyDown.bind(this);\n    this.removeEvents = this.removeEvents.bind(this);\n    this.toggle = this.toggle.bind(this);\n  }\n\n  getChildContext() {\n    return {\n      toggle: this.props.toggle,\n      isOpen: this.props.isOpen,\n      direction: (this.props.direction === 'down' && this.props.dropup) ? 'up' : this.props.direction,\n      inNavbar: this.props.inNavbar,\n    };\n  }\n\n  componentDidMount() {\n    this.handleProps();\n  }\n\n  componentDidUpdate(prevProps) {\n    if (this.props.isOpen !== prevProps.isOpen) {\n      this.handleProps();\n    }\n  }\n\n  componentWillUnmount() {\n    this.removeEvents();\n  }\n\n  getContainer() {\n    return ReactDOM.findDOMNode(this);\n  }\n\n  addEvents() {\n    ['click', 'touchstart', 'keyup'].forEach(event =>\n      document.addEventListener(event, this.handleDocumentClick, true)\n    );\n  }\n\n  removeEvents() {\n    ['click', 'touchstart', 'keyup'].forEach(event =>\n      document.removeEventListener(event, this.handleDocumentClick, true)\n    );\n  }\n\n  handleDocumentClick(e) {\n    if (e && (e.which === 3 || (e.type === 'keyup' && e.which !== keyCodes.tab))) return;\n    const container = this.getContainer();\n\n    if (container.contains(e.target) && container !== e.target && (e.type !== 'keyup' || e.which === keyCodes.tab)) {\n      return;\n    }\n\n    this.toggle(e);\n  }\n\n  handleKeyDown(e) {\n    if ([keyCodes.esc, keyCodes.up, keyCodes.down, keyCodes.space].indexOf(e.which) === -1 ||\n      (/button/i.test(e.target.tagName) && e.which === keyCodes.space) ||\n      /input|textarea/i.test(e.target.tagName)) {\n      return;\n    }\n\n    e.preventDefault();\n    if (this.props.disabled) return;\n\n    const container = this.getContainer();\n\n    if (e.which === keyCodes.space && this.props.isOpen && container !== e.target) {\n      e.target.click();\n    }\n\n    if (e.which === keyCodes.esc || !this.props.isOpen) {\n      this.toggle(e);\n      container.querySelector('[aria-expanded]').focus();\n      return;\n    }\n\n    const menuClass = mapToCssModules('dropdown-menu', this.props.cssModule);\n    const itemClass = mapToCssModules('dropdown-item', this.props.cssModule);\n    const disabledClass = mapToCssModules('disabled', this.props.cssModule);\n\n    const items = container.querySelectorAll(`.${menuClass} .${itemClass}:not(.${disabledClass})`);\n\n    if (!items.length) return;\n\n    let index = -1;\n    for (let i = 0; i < items.length; i += 1) {\n      if (items[i] === e.target) {\n        index = i;\n        break;\n      }\n    }\n\n    if (e.which === keyCodes.up && index > 0) {\n      index -= 1;\n    }\n\n    if (e.which === keyCodes.down && index < items.length - 1) {\n      index += 1;\n    }\n\n    if (index < 0) {\n      index = 0;\n    }\n\n    items[index].focus();\n  }\n\n  handleProps() {\n    if (this.props.isOpen) {\n      this.addEvents();\n    } else {\n      this.removeEvents();\n    }\n  }\n\n  toggle(e) {\n    if (this.props.disabled) {\n      return e && e.preventDefault();\n    }\n\n    return this.props.toggle(e);\n  }\n\n  render() {\n    const {\n      className,\n      cssModule,\n      dropup,\n      isOpen,\n      group,\n      size,\n      nav,\n      active,\n      addonType,\n      ...attrs\n    } = omit(this.props, ['toggle', 'disabled', 'inNavbar', 'direction']);\n\n    const direction = (this.props.direction === 'down' && dropup) ? 'up' : this.props.direction;\n\n    attrs.tag = attrs.tag || (nav ? 'li' : 'div');\n\n    const classes = mapToCssModules(classNames(\n      className,\n      direction !== 'down' && `drop${direction}`,\n      nav && active ? 'active' : false,\n      {\n        [`input-group-${addonType}`]: addonType,\n        'btn-group': group,\n        [`btn-group-${size}`]: !!size,\n        dropdown: !group && !addonType,\n        show: isOpen,\n        'nav-item': nav\n      }\n    ), cssModule);\n    return <Manager {...attrs} className={classes} onKeyDown={this.handleKeyDown} />;\n  }\n}\n\nDropdown.propTypes = propTypes;\nDropdown.defaultProps = defaultProps;\nDropdown.childContextTypes = childContextTypes;\n\nexport default Dropdown;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport { mapToCssModules } from './utils';\n\nconst propTypes = {\n  tag: PropTypes.oneOfType([PropTypes.func, PropTypes.string]),\n  innerRef: PropTypes.oneOfType([PropTypes.func, PropTypes.string]),\n  disabled: PropTypes.bool,\n  active: PropTypes.bool,\n  className: PropTypes.string,\n  cssModule: PropTypes.object,\n  onClick: PropTypes.func,\n  href: PropTypes.any,\n};\n\nconst defaultProps = {\n  tag: 'a',\n};\n\nclass NavLink extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.onClick = this.onClick.bind(this);\n  }\n\n  onClick(e) {\n    if (this.props.disabled) {\n      e.preventDefault();\n      return;\n    }\n\n    if (this.props.href === '#') {\n      e.preventDefault();\n    }\n\n    if (this.props.onClick) {\n      this.props.onClick(e);\n    }\n  }\n\n  render() {\n    let {\n      className,\n      cssModule,\n      active,\n      tag: Tag,\n      innerRef,\n      ...attributes\n    } = this.props;\n\n    const classes = mapToCssModules(classNames(\n      className,\n      'nav-link',\n      {\n        disabled: attributes.disabled,\n        active: active\n      }\n    ), cssModule);\n\n    return (\n      <Tag {...attributes} ref={innerRef} onClick={this.onClick} className={classes} />\n    );\n  }\n}\n\nNavLink.propTypes = propTypes;\nNavLink.defaultProps = defaultProps;\n\nexport default NavLink;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport { mapToCssModules } from './utils';\n\nconst propTypes = {\n  tag: PropTypes.string,\n  className: PropTypes.string,\n  cssModule: PropTypes.object,\n};\n\nconst defaultProps = {\n  tag: 'ol'\n};\n\nconst Breadcrumb = (props) => {\n  const {\n    className,\n    cssModule,\n    tag: Tag,\n    ...attributes\n  } = props;\n  const classes = mapToCssModules(classNames(\n    className,\n    'breadcrumb'\n  ), cssModule);\n\n  return (\n    <Tag {...attributes} className={classes} />\n  );\n};\n\nBreadcrumb.propTypes = propTypes;\nBreadcrumb.defaultProps = defaultProps;\n\nexport default Breadcrumb;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport { mapToCssModules } from './utils';\n\nconst propTypes = {\n  tag: PropTypes.oneOfType([PropTypes.func, PropTypes.string]),\n  active: PropTypes.bool,\n  className: PropTypes.string,\n  cssModule: PropTypes.object,\n};\n\nconst defaultProps = {\n  tag: 'li'\n};\n\nconst BreadcrumbItem = (props) => {\n  const {\n    className,\n    cssModule,\n    active,\n    tag: Tag,\n    ...attributes\n  } = props;\n  const classes = mapToCssModules(classNames(\n    className,\n    active ? 'active' : false,\n    'breadcrumb-item'\n  ), cssModule);\n\n  return (\n    <Tag {...attributes} className={classes} />\n  );\n};\n\nBreadcrumbItem.propTypes = propTypes;\nBreadcrumbItem.defaultProps = defaultProps;\n\nexport default BreadcrumbItem;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport { mapToCssModules } from './utils';\n\nconst propTypes = {\n  active: PropTypes.bool,\n  block: PropTypes.bool,\n  color: PropTypes.string,\n  disabled: PropTypes.bool,\n  outline: PropTypes.bool,\n  tag: PropTypes.oneOfType([PropTypes.func, PropTypes.string]),\n  innerRef: PropTypes.oneOfType([PropTypes.func, PropTypes.string]),\n  onClick: PropTypes.func,\n  size: PropTypes.string,\n  children: PropTypes.node,\n  className: PropTypes.string,\n  cssModule: PropTypes.object,\n};\n\nconst defaultProps = {\n  color: 'secondary',\n  tag: 'button',\n};\n\nclass Button extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.onClick = this.onClick.bind(this);\n  }\n\n  onClick(e) {\n    if (this.props.disabled) {\n      e.preventDefault();\n      return;\n    }\n\n    if (this.props.onClick) {\n      this.props.onClick(e);\n    }\n  }\n\n  render() {\n    let {\n      active,\n      block,\n      className,\n      cssModule,\n      color,\n      outline,\n      size,\n      tag: Tag,\n      innerRef,\n      ...attributes\n    } = this.props;\n\n    const classes = mapToCssModules(classNames(\n      className,\n      'btn',\n      `btn${outline ? '-outline' : ''}-${color}`,\n      size ? `btn-${size}` : false,\n      block ? 'btn-block' : false,\n      { active, disabled: this.props.disabled }\n    ), cssModule);\n\n    if (attributes.href && Tag === 'button') {\n      Tag = 'a';\n    }\n\n    return (\n      <Tag\n        type={(Tag === 'button' && attributes.onClick) ? 'button' : undefined}\n        {...attributes}\n        className={classes}\n        ref={innerRef}\n        onClick={this.onClick}\n      />\n    );\n  }\n}\n\nButton.propTypes = propTypes;\nButton.defaultProps = defaultProps;\n\nexport default Button;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport Dropdown from './Dropdown';\n\nconst propTypes = {\n  children: PropTypes.node,\n};\n\nconst ButtonDropdown = (props) => {\n  return (\n    <Dropdown group {...props} />\n  );\n};\n\nButtonDropdown.propTypes = propTypes;\n\nexport default ButtonDropdown;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport { mapToCssModules } from './utils';\n\nconst propTypes = {\n  tag: PropTypes.oneOfType([PropTypes.func, PropTypes.string]),\n  'aria-label': PropTypes.string,\n  className: PropTypes.string,\n  cssModule: PropTypes.object,\n  role: PropTypes.string,\n  size: PropTypes.string,\n  vertical: PropTypes.bool,\n};\n\nconst defaultProps = {\n  tag: 'div',\n  role: 'group',\n};\n\nconst ButtonGroup = (props) => {\n  const {\n    className,\n    cssModule,\n    size,\n    vertical,\n    tag: Tag,\n    ...attributes\n  } = props;\n\n  const classes = mapToCssModules(classNames(\n    className,\n    size ? 'btn-group-' + size : false,\n    vertical ? 'btn-group-vertical' : 'btn-group'\n  ), cssModule);\n\n  return (\n    <Tag {...attributes} className={classes} />\n  );\n};\n\nButtonGroup.propTypes = propTypes;\nButtonGroup.defaultProps = defaultProps;\n\nexport default ButtonGroup;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport { mapToCssModules } from './utils';\n\nconst propTypes = {\n  tag: PropTypes.oneOfType([PropTypes.func, PropTypes.string]),\n  'aria-label': PropTypes.string,\n  className: PropTypes.string,\n  cssModule: PropTypes.object,\n  role: PropTypes.string,\n};\n\nconst defaultProps = {\n  tag: 'div',\n  role: 'toolbar',\n};\n\nconst ButtonToolbar = (props) => {\n  const {\n    className,\n    cssModule,\n    tag: Tag,\n    ...attributes\n  } = props;\n\n  const classes = mapToCssModules(classNames(\n    className,\n    'btn-toolbar'\n  ), cssModule);\n\n  return (\n    <Tag {...attributes} className={classes} />\n  );\n};\n\nButtonToolbar.propTypes = propTypes;\nButtonToolbar.defaultProps = defaultProps;\n\nexport default ButtonToolbar;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport { mapToCssModules, omit } from './utils';\n\nconst propTypes = {\n  children: PropTypes.node,\n  active: PropTypes.bool,\n  disabled: PropTypes.bool,\n  divider: PropTypes.bool,\n  tag: PropTypes.oneOfType([PropTypes.func, PropTypes.string]),\n  header: PropTypes.bool,\n  onClick: PropTypes.func,\n  className: PropTypes.string,\n  cssModule: PropTypes.object,\n  toggle: PropTypes.bool\n};\n\nconst contextTypes = {\n  toggle: PropTypes.func\n};\n\nconst defaultProps = {\n  tag: 'button',\n  toggle: true\n};\n\nclass DropdownItem extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.onClick = this.onClick.bind(this);\n    this.getTabIndex = this.getTabIndex.bind(this);\n  }\n\n  onClick(e) {\n    if (this.props.disabled || this.props.header || this.props.divider) {\n      e.preventDefault();\n      return;\n    }\n\n    if (this.props.onClick) {\n      this.props.onClick(e);\n    }\n\n    if (this.props.toggle) {\n      this.context.toggle(e);\n    }\n  }\n\n  getTabIndex() {\n    if (this.props.disabled || this.props.header || this.props.divider) {\n      return '-1';\n    }\n\n    return '0';\n  }\n\n  render() {\n    const tabIndex = this.getTabIndex();\n    let {\n      className,\n      cssModule,\n      divider,\n      tag: Tag,\n      header,\n      active,\n      ...props } = omit(this.props, ['toggle']);\n\n    const classes = mapToCssModules(classNames(\n      className,\n      {\n        disabled: props.disabled,\n        'dropdown-item': !divider && !header,\n        active: active,\n        'dropdown-header': header,\n        'dropdown-divider': divider\n      }\n    ), cssModule);\n\n    if (Tag === 'button') {\n      if (header) {\n        Tag = 'h6';\n      } else if (divider) {\n        Tag = 'div';\n      } else if (props.href) {\n        Tag = 'a';\n      }\n    }\n\n    return (\n      <Tag\n        type={(Tag === 'button' && (props.onClick || this.props.toggle)) ? 'button' : undefined}\n        {...props}\n        tabIndex={tabIndex}\n        className={classes}\n        onClick={this.onClick}\n      />\n    );\n  }\n}\n\nDropdownItem.propTypes = propTypes;\nDropdownItem.defaultProps = defaultProps;\nDropdownItem.contextTypes = contextTypes;\n\nexport default DropdownItem;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport { Popper } from 'react-popper';\nimport { mapToCssModules } from './utils';\n\nconst propTypes = {\n  tag: PropTypes.string,\n  children: PropTypes.node.isRequired,\n  right: PropTypes.bool,\n  flip: PropTypes.bool,\n  className: PropTypes.string,\n  cssModule: PropTypes.object,\n};\n\nconst defaultProps = {\n  tag: 'div',\n  flip: true,\n};\n\nconst contextTypes = {\n  isOpen: PropTypes.bool.isRequired,\n  direction: PropTypes.oneOf(['up', 'down', 'left', 'right']).isRequired,\n  inNavbar: PropTypes.bool.isRequired,\n};\n\nconst noFlipModifier = { flip: { enabled: false } };\n\nconst directionPositionMap = {\n  up: 'top',\n  left: 'left',\n  right: 'right',\n  down: 'bottom',\n};\n\nconst DropdownMenu = (props, context) => {\n  const { className, cssModule, right, tag, flip, ...attrs } = props;\n  const classes = mapToCssModules(classNames(\n    className,\n    'dropdown-menu',\n    {\n      'dropdown-menu-right': right,\n      show: context.isOpen,\n    }\n  ), cssModule);\n\n  let Tag = tag;\n\n  if (context.isOpen && !context.inNavbar) {\n    Tag = Popper;\n\n    const position1 = directionPositionMap[context.direction] || 'bottom';\n    const position2 = right ? 'end' : 'start';\n    attrs.placement = `${position1}-${position2}`;\n    attrs.component = tag;\n    attrs.modifiers = !flip ? noFlipModifier : undefined;\n  }\n\n  return (\n    <Tag\n      tabIndex=\"-1\"\n      role=\"menu\"\n      {...attrs}\n      aria-hidden={!context.isOpen}\n      className={classes}\n    />\n  );\n};\n\nDropdownMenu.propTypes = propTypes;\nDropdownMenu.defaultProps = defaultProps;\nDropdownMenu.contextTypes = contextTypes;\n\nexport default DropdownMenu;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport { Target } from 'react-popper';\nimport { mapToCssModules } from './utils';\nimport Button from './Button';\n\nconst propTypes = {\n  caret: PropTypes.bool,\n  color: PropTypes.string,\n  children: PropTypes.node,\n  className: PropTypes.string,\n  cssModule: PropTypes.object,\n  disabled: PropTypes.bool,\n  onClick: PropTypes.func,\n  'aria-haspopup': PropTypes.bool,\n  split: PropTypes.bool,\n  tag: PropTypes.oneOfType([PropTypes.func, PropTypes.string]),\n  nav: PropTypes.bool,\n};\n\nconst defaultProps = {\n  'aria-haspopup': true,\n  color: 'secondary',\n};\n\nconst contextTypes = {\n  isOpen: PropTypes.bool.isRequired,\n  toggle: PropTypes.func.isRequired,\n  inNavbar: PropTypes.bool.isRequired,\n};\n\nclass DropdownToggle extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.onClick = this.onClick.bind(this);\n  }\n\n  onClick(e) {\n    if (this.props.disabled) {\n      e.preventDefault();\n      return;\n    }\n\n    if (this.props.nav && !this.props.tag) {\n      e.preventDefault();\n    }\n\n    if (this.props.onClick) {\n      this.props.onClick(e);\n    }\n\n    this.context.toggle(e);\n  }\n\n  render() {\n    const { className, color, cssModule, caret, split, nav, tag, ...props } = this.props;\n    const ariaLabel = props['aria-label'] || 'Toggle Dropdown';\n    const classes = mapToCssModules(classNames(\n      className,\n      {\n        'dropdown-toggle': caret || split,\n        'dropdown-toggle-split': split,\n        'nav-link': nav\n      }\n    ), cssModule);\n    const children = props.children || <span className=\"sr-only\">{ariaLabel}</span>;\n\n    let Tag;\n\n    if (nav && !tag) {\n      Tag = 'a';\n      props.href = '#';\n    } else if (!tag) {\n      Tag = Button;\n      props.color = color;\n      props.cssModule = cssModule;\n    } else {\n      Tag = tag;\n    }\n\n    if (this.context.inNavbar) {\n      return (\n        <Tag\n          {...props}\n          className={classes}\n          onClick={this.onClick}\n          aria-expanded={this.context.isOpen}\n          children={children}\n        />\n      );\n    }\n\n    return (\n      <Target\n        {...props}\n        className={classes}\n        component={Tag}\n        onClick={this.onClick}\n        aria-expanded={this.context.isOpen}\n        children={children}\n      />\n    );\n  }\n}\n\nDropdownToggle.propTypes = propTypes;\nDropdownToggle.defaultProps = defaultProps;\nDropdownToggle.contextTypes = contextTypes;\n\nexport default DropdownToggle;\n","'use strict';\n\nexports.__esModule = true;\nexports.classNamesShape = exports.timeoutsShape = undefined;\nexports.transitionTimeout = transitionTimeout;\n\nvar _propTypes = require('prop-types');\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction transitionTimeout(transitionType) {\n  var timeoutPropName = 'transition' + transitionType + 'Timeout';\n  var enabledPropName = 'transition' + transitionType;\n\n  return function (props) {\n    // If the transition is enabled\n    if (props[enabledPropName]) {\n      // If no timeout duration is provided\n      if (props[timeoutPropName] == null) {\n        return new Error(timeoutPropName + ' wasn\\'t supplied to CSSTransitionGroup: ' + 'this can cause unreliable animations and won\\'t be supported in ' + 'a future version of React. See ' + 'https://fb.me/react-animation-transition-group-timeout for more ' + 'information.');\n\n        // If the duration isn't a number\n      } else if (typeof props[timeoutPropName] !== 'number') {\n        return new Error(timeoutPropName + ' must be a number (in milliseconds)');\n      }\n    }\n\n    return null;\n  };\n}\n\nvar timeoutsShape = exports.timeoutsShape = _propTypes2.default.oneOfType([_propTypes2.default.number, _propTypes2.default.shape({\n  enter: _propTypes2.default.number,\n  exit: _propTypes2.default.number\n}).isRequired]);\n\nvar classNamesShape = exports.classNamesShape = _propTypes2.default.oneOfType([_propTypes2.default.string, _propTypes2.default.shape({\n  enter: _propTypes2.default.string,\n  exit: _propTypes2.default.string,\n  active: _propTypes2.default.string\n}), _propTypes2.default.shape({\n  enter: _propTypes2.default.string,\n  enterActive: _propTypes2.default.string,\n  exit: _propTypes2.default.string,\n  exitActive: _propTypes2.default.string\n})]);","'use strict';\n\nexports.__esModule = true;\nexports.EXITING = exports.ENTERED = exports.ENTERING = exports.EXITED = exports.UNMOUNTED = undefined;\n\nvar _propTypes = require('prop-types');\n\nvar PropTypes = _interopRequireWildcard(_propTypes);\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _reactDom = require('react-dom');\n\nvar _reactDom2 = _interopRequireDefault(_reactDom);\n\nvar _PropTypes = require('./utils/PropTypes');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _objectWithoutProperties(obj, keys) { var target = {}; for (var i in obj) { if (keys.indexOf(i) >= 0) continue; if (!Object.prototype.hasOwnProperty.call(obj, i)) continue; target[i] = obj[i]; } return target; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar UNMOUNTED = exports.UNMOUNTED = 'unmounted';\nvar EXITED = exports.EXITED = 'exited';\nvar ENTERING = exports.ENTERING = 'entering';\nvar ENTERED = exports.ENTERED = 'entered';\nvar EXITING = exports.EXITING = 'exiting';\n\n/**\n * The Transition component lets you describe a transition from one component\n * state to another _over time_ with a simple declarative API. Most commonly\n * it's used to animate the mounting and unmounting of a component, but can also\n * be used to describe in-place transition states as well.\n *\n * By default the `Transition` component does not alter the behavior of the\n * component it renders, it only tracks \"enter\" and \"exit\" states for the components.\n * It's up to you to give meaning and effect to those states. For example we can\n * add styles to a component when it enters or exits:\n *\n * ```jsx\n * import Transition from 'react-transition-group/Transition';\n *\n * const duration = 300;\n *\n * const defaultStyle = {\n *   transition: `opacity ${duration}ms ease-in-out`,\n *   opacity: 0,\n * }\n *\n * const transitionStyles = {\n *   entering: { opacity: 0 },\n *   entered:  { opacity: 1 },\n * };\n *\n * const Fade = ({ in: inProp }) => (\n *   <Transition in={inProp} timeout={duration}>\n *     {(state) => (\n *       <div style={{\n *         ...defaultStyle,\n *         ...transitionStyles[state]\n *       }}>\n *         I'm A fade Transition!\n *       </div>\n *     )}\n *   </Transition>\n * );\n * ```\n *\n * As noted the `Transition` component doesn't _do_ anything by itself to its child component.\n * What it does do is track transition states over time so you can update the\n * component (such as by adding styles or classes) when it changes states.\n *\n * There are 4 main states a Transition can be in:\n *  - `ENTERING`\n *  - `ENTERED`\n *  - `EXITING`\n *  - `EXITED`\n *\n * Transition state is toggled via the `in` prop. When `true` the component begins the\n * \"Enter\" stage. During this stage, the component will shift from its current transition state,\n * to `'entering'` for the duration of the transition and then to the `'entered'` stage once\n * it's complete. Let's take the following example:\n *\n * ```jsx\n * state= { in: false };\n *\n * toggleEnterState = () => {\n *   this.setState({ in: true });\n * }\n *\n * render() {\n *   return (\n *     <div>\n *       <Transition in={this.state.in} timeout={500} />\n *       <button onClick={this.toggleEnterState}>Click to Enter</button>\n *     </div>\n *   );\n * }\n * ```\n *\n * When the button is clicked the component will shift to the `'entering'` state and\n * stay there for 500ms (the value of `timeout`) when finally switches to `'entered'`.\n *\n * When `in` is `false` the same thing happens except the state moves from `'exiting'` to `'exited'`.\n */\n\nvar Transition = function (_React$Component) {\n  _inherits(Transition, _React$Component);\n\n  function Transition(props, context) {\n    _classCallCheck(this, Transition);\n\n    var _this = _possibleConstructorReturn(this, _React$Component.call(this, props, context));\n\n    var parentGroup = context.transitionGroup;\n    // In the context of a TransitionGroup all enters are really appears\n    var appear = parentGroup && !parentGroup.isMounting ? props.enter : props.appear;\n\n    var initialStatus = void 0;\n    _this.nextStatus = null;\n\n    if (props.in) {\n      if (appear) {\n        initialStatus = EXITED;\n        _this.nextStatus = ENTERING;\n      } else {\n        initialStatus = ENTERED;\n      }\n    } else {\n      if (props.unmountOnExit || props.mountOnEnter) {\n        initialStatus = UNMOUNTED;\n      } else {\n        initialStatus = EXITED;\n      }\n    }\n\n    _this.state = { status: initialStatus };\n\n    _this.nextCallback = null;\n    return _this;\n  }\n\n  Transition.prototype.getChildContext = function getChildContext() {\n    return { transitionGroup: null }; // allows for nested Transitions\n  };\n\n  Transition.prototype.componentDidMount = function componentDidMount() {\n    this.updateStatus(true);\n  };\n\n  Transition.prototype.componentWillReceiveProps = function componentWillReceiveProps(nextProps) {\n    var _ref = this.pendingState || this.state,\n        status = _ref.status;\n\n    if (nextProps.in) {\n      if (status === UNMOUNTED) {\n        this.setState({ status: EXITED });\n      }\n      if (status !== ENTERING && status !== ENTERED) {\n        this.nextStatus = ENTERING;\n      }\n    } else {\n      if (status === ENTERING || status === ENTERED) {\n        this.nextStatus = EXITING;\n      }\n    }\n  };\n\n  Transition.prototype.componentDidUpdate = function componentDidUpdate() {\n    this.updateStatus();\n  };\n\n  Transition.prototype.componentWillUnmount = function componentWillUnmount() {\n    this.cancelNextCallback();\n  };\n\n  Transition.prototype.getTimeouts = function getTimeouts() {\n    var timeout = this.props.timeout;\n\n    var exit = void 0,\n        enter = void 0,\n        appear = void 0;\n\n    exit = enter = appear = timeout;\n\n    if (timeout != null && typeof timeout !== 'number') {\n      exit = timeout.exit;\n      enter = timeout.enter;\n      appear = timeout.appear;\n    }\n    return { exit: exit, enter: enter, appear: appear };\n  };\n\n  Transition.prototype.updateStatus = function updateStatus() {\n    var mounting = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n\n    var nextStatus = this.nextStatus;\n\n    if (nextStatus !== null) {\n      this.nextStatus = null;\n      // nextStatus will always be ENTERING or EXITING.\n      this.cancelNextCallback();\n      var node = _reactDom2.default.findDOMNode(this);\n\n      if (nextStatus === ENTERING) {\n        this.performEnter(node, mounting);\n      } else {\n        this.performExit(node);\n      }\n    } else if (this.props.unmountOnExit && this.state.status === EXITED) {\n      this.setState({ status: UNMOUNTED });\n    }\n  };\n\n  Transition.prototype.performEnter = function performEnter(node, mounting) {\n    var _this2 = this;\n\n    var enter = this.props.enter;\n\n    var appearing = this.context.transitionGroup ? this.context.transitionGroup.isMounting : mounting;\n\n    var timeouts = this.getTimeouts();\n\n    // no enter animation skip right to ENTERED\n    // if we are mounting and running this it means appear _must_ be set\n    if (!mounting && !enter) {\n      this.safeSetState({ status: ENTERED }, function () {\n        _this2.props.onEntered(node);\n      });\n      return;\n    }\n\n    this.props.onEnter(node, appearing);\n\n    this.safeSetState({ status: ENTERING }, function () {\n      _this2.props.onEntering(node, appearing);\n\n      // FIXME: appear timeout?\n      _this2.onTransitionEnd(node, timeouts.enter, function () {\n        _this2.safeSetState({ status: ENTERED }, function () {\n          _this2.props.onEntered(node, appearing);\n        });\n      });\n    });\n  };\n\n  Transition.prototype.performExit = function performExit(node) {\n    var _this3 = this;\n\n    var exit = this.props.exit;\n\n    var timeouts = this.getTimeouts();\n\n    // no exit animation skip right to EXITED\n    if (!exit) {\n      this.safeSetState({ status: EXITED }, function () {\n        _this3.props.onExited(node);\n      });\n      return;\n    }\n    this.props.onExit(node);\n\n    this.safeSetState({ status: EXITING }, function () {\n      _this3.props.onExiting(node);\n\n      _this3.onTransitionEnd(node, timeouts.exit, function () {\n        _this3.safeSetState({ status: EXITED }, function () {\n          _this3.props.onExited(node);\n        });\n      });\n    });\n  };\n\n  Transition.prototype.cancelNextCallback = function cancelNextCallback() {\n    if (this.nextCallback !== null) {\n      this.nextCallback.cancel();\n      this.nextCallback = null;\n    }\n  };\n\n  Transition.prototype.safeSetState = function safeSetState(nextState, callback) {\n    var _this4 = this;\n\n    // We need to track pending updates for instances where a cWRP fires quickly\n    // after cDM and before the state flushes, which would double trigger a\n    // transition\n    this.pendingState = nextState;\n\n    // This shouldn't be necessary, but there are weird race conditions with\n    // setState callbacks and unmounting in testing, so always make sure that\n    // we can cancel any pending setState callbacks after we unmount.\n    callback = this.setNextCallback(callback);\n    this.setState(nextState, function () {\n      _this4.pendingState = null;\n      callback();\n    });\n  };\n\n  Transition.prototype.setNextCallback = function setNextCallback(callback) {\n    var _this5 = this;\n\n    var active = true;\n\n    this.nextCallback = function (event) {\n      if (active) {\n        active = false;\n        _this5.nextCallback = null;\n\n        callback(event);\n      }\n    };\n\n    this.nextCallback.cancel = function () {\n      active = false;\n    };\n\n    return this.nextCallback;\n  };\n\n  Transition.prototype.onTransitionEnd = function onTransitionEnd(node, timeout, handler) {\n    this.setNextCallback(handler);\n\n    if (node) {\n      if (this.props.addEndListener) {\n        this.props.addEndListener(node, this.nextCallback);\n      }\n      if (timeout != null) {\n        setTimeout(this.nextCallback, timeout);\n      }\n    } else {\n      setTimeout(this.nextCallback, 0);\n    }\n  };\n\n  Transition.prototype.render = function render() {\n    var status = this.state.status;\n    if (status === UNMOUNTED) {\n      return null;\n    }\n\n    var _props = this.props,\n        children = _props.children,\n        childProps = _objectWithoutProperties(_props, ['children']);\n    // filter props for Transtition\n\n\n    delete childProps.in;\n    delete childProps.mountOnEnter;\n    delete childProps.unmountOnExit;\n    delete childProps.appear;\n    delete childProps.enter;\n    delete childProps.exit;\n    delete childProps.timeout;\n    delete childProps.addEndListener;\n    delete childProps.onEnter;\n    delete childProps.onEntering;\n    delete childProps.onEntered;\n    delete childProps.onExit;\n    delete childProps.onExiting;\n    delete childProps.onExited;\n\n    if (typeof children === 'function') {\n      return children(status, childProps);\n    }\n\n    var child = _react2.default.Children.only(children);\n    return _react2.default.cloneElement(child, childProps);\n  };\n\n  return Transition;\n}(_react2.default.Component);\n\nTransition.contextTypes = {\n  transitionGroup: PropTypes.object\n};\nTransition.childContextTypes = {\n  transitionGroup: function transitionGroup() {}\n};\n\n\nTransition.propTypes = process.env.NODE_ENV !== \"production\" ? {\n  /**\n   * A `function` child can be used instead of a React element.\n   * This function is called with the current transition status\n   * ('entering', 'entered', 'exiting', 'exited', 'unmounted'), which can used\n   * to apply context specific props to a component.\n   *\n   * ```jsx\n   * <Transition timeout={150}>\n   *   {(status) => (\n   *     <MyComponent className={`fade fade-${status}`} />\n   *   )}\n   * </Transition>\n   * ```\n   */\n  children: PropTypes.oneOfType([PropTypes.func.isRequired, PropTypes.element.isRequired]).isRequired,\n\n  /**\n   * Show the component; triggers the enter or exit states\n   */\n  in: PropTypes.bool,\n\n  /**\n   * By default the child component is mounted immediately along with\n   * the parent `Transition` component. If you want to \"lazy mount\" the component on the\n   * first `in={true}` you can set `mountOnEnter`. After the first enter transition the component will stay\n   * mounted, even on \"exited\", unless you also specify `unmountOnExit`.\n   */\n  mountOnEnter: PropTypes.bool,\n\n  /**\n   * By default the child component stays mounted after it reaches the `'exited'` state.\n   * Set `unmountOnExit` if you'd prefer to unmount the component after it finishes exiting.\n   */\n  unmountOnExit: PropTypes.bool,\n\n  /**\n   * Normally a component is not transitioned if it is shown when the `<Transition>` component mounts.\n   * If you want to transition on the first mount set `appear` to `true`, and the\n   * component will transition in as soon as the `<Transition>` mounts.\n   *\n   * > Note: there are no specific \"appear\" states. `appear` only adds an additional `enter` transition.\n   */\n  appear: PropTypes.bool,\n\n  /**\n   * Enable or disable enter transitions.\n   */\n  enter: PropTypes.bool,\n\n  /**\n   * Enable or disable exit transitions.\n   */\n  exit: PropTypes.bool,\n\n  /**\n   * The duration of the transition, in milliseconds.\n   * Required unless `addEventListener` is provided\n   *\n   * You may specify a single timeout for all transitions like: `timeout={500}`,\n   * or individually like:\n   *\n   * ```jsx\n   * timeout={{\n   *  enter: 300,\n   *  exit: 500,\n   * }}\n   * ```\n   *\n   * @type {number | { enter?: number, exit?: number }}\n   */\n  timeout: function timeout(props) {\n    for (var _len = arguments.length, args = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n      args[_key - 1] = arguments[_key];\n    }\n\n    var pt = _PropTypes.timeoutsShape;\n    if (!props.addEndListener) pt = pt.isRequired;\n    return pt.apply(undefined, [props].concat(args));\n  },\n\n  /**\n   * Add a custom transition end trigger. Called with the transitioning\n   * DOM node and a `done` callback. Allows for more fine grained transition end\n   * logic. **Note:** Timeouts are still used as a fallback if provided.\n   *\n   * ```jsx\n   * addEndListener={(node, done) => {\n   *   // use the css transitionend event to mark the finish of a transition\n   *   node.addEventListener('transitionend', done, false);\n   * }}\n   * ```\n   */\n  addEndListener: PropTypes.func,\n\n  /**\n   * Callback fired before the \"entering\" status is applied. An extra parameter\n   * `isAppearing` is supplied to indicate if the enter stage is occurring on the initial mount\n   *\n   * @type Function(node: HtmlElement, isAppearing: bool) -> void\n   */\n  onEnter: PropTypes.func,\n\n  /**\n   * Callback fired after the \"entering\" status is applied. An extra parameter\n   * `isAppearing` is supplied to indicate if the enter stage is occurring on the initial mount\n   *\n   * @type Function(node: HtmlElement, isAppearing: bool)\n   */\n  onEntering: PropTypes.func,\n\n  /**\n   * Callback fired after the \"entered\" status is applied. An extra parameter\n   * `isAppearing` is supplied to indicate if the enter stage is occurring on the initial mount\n   *\n   * @type Function(node: HtmlElement, isAppearing: bool) -> void\n   */\n  onEntered: PropTypes.func,\n\n  /**\n   * Callback fired before the \"exiting\" status is applied.\n   *\n   * @type Function(node: HtmlElement) -> void\n   */\n  onExit: PropTypes.func,\n\n  /**\n   * Callback fired after the \"exiting\" status is applied.\n   *\n   * @type Function(node: HtmlElement) -> void\n   */\n  onExiting: PropTypes.func,\n\n  /**\n   * Callback fired after the \"exited\" status is applied.\n   *\n   * @type Function(node: HtmlElement) -> void\n   */\n  onExited: PropTypes.func\n} : {};\n\n// Name the function so it is clearer in the documentation\nfunction noop() {}\n\nTransition.defaultProps = {\n  in: false,\n  mountOnEnter: false,\n  unmountOnExit: false,\n  appear: false,\n  enter: true,\n  exit: true,\n\n  onEnter: noop,\n  onEntering: noop,\n  onEntered: noop,\n\n  onExit: noop,\n  onExiting: noop,\n  onExited: noop\n};\n\nTransition.UNMOUNTED = 0;\nTransition.EXITED = 1;\nTransition.ENTERING = 2;\nTransition.ENTERED = 3;\nTransition.EXITING = 4;\n\nexports.default = Transition;","import React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport Transition from 'react-transition-group/Transition';\nimport { mapToCssModules, omit, pick, TransitionPropTypeKeys, TransitionTimeouts } from './utils';\n\nconst propTypes = {\n  ...Transition.propTypes,\n  children: PropTypes.oneOfType([\n    PropTypes.arrayOf(PropTypes.node),\n    PropTypes.node\n  ]),\n  tag: PropTypes.oneOfType([PropTypes.string, PropTypes.func]),\n  baseClass: PropTypes.string,\n  baseClassActive: PropTypes.string,\n  className: PropTypes.string,\n  cssModule: PropTypes.object,\n};\n\nconst defaultProps = {\n  ...Transition.defaultProps,\n  tag: 'div',\n  baseClass: 'fade',\n  baseClassActive: 'show',\n  timeout: TransitionTimeouts.Fade,\n  appear: true,\n  enter: true,\n  exit: true,\n  in: true,\n};\n\nfunction Fade(props) {\n  const {\n    tag: Tag,\n    baseClass,\n    baseClassActive,\n    className,\n    cssModule,\n    children,\n    ...otherProps\n  } = props;\n\n  // In NODE_ENV=production the Transition.propTypes are wrapped which results in an\n  // empty object \"{}\". This is the result of the `react-transition-group` babel\n  // configuration settings. Therefore, to ensure that production builds work without\n  // error, we can either explicitly define keys or use the Transition.defaultProps.\n  // Using the Transition.defaultProps excludes any required props. Thus, the best\n  // solution is to explicitly define required props in our utilities and reference these.\n  // This also gives us more flexibility in the future to remove the prop-types\n  // dependency in distribution builds (Similar to how `react-transition-group` does).\n  // Note: Without omitting the `react-transition-group` props, the resulting child\n  // Tag component would inherit the Transition properties as attributes for the HTML\n  // element which results in errors/warnings for non-valid attributes.\n  const transitionProps = pick(otherProps, TransitionPropTypeKeys);\n  const childProps = omit(otherProps, TransitionPropTypeKeys);\n\n  return (\n    <Transition {...transitionProps}>\n      {(status) => {\n        const isActive = status === 'entered';\n        const classes = mapToCssModules(classNames(\n          className,\n          baseClass,\n          isActive && baseClassActive\n        ), cssModule);\n        return (\n          <Tag className={classes} {...childProps}>\n            {children}\n          </Tag>\n        );\n      }}\n    </Transition>\n  );\n}\n\nFade.propTypes = propTypes;\nFade.defaultProps = defaultProps;\n\nexport default Fade;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport { mapToCssModules } from './utils';\n\nconst propTypes = {\n  color: PropTypes.string,\n  pill: PropTypes.bool,\n  tag: PropTypes.oneOfType([PropTypes.func, PropTypes.string]),\n  children: PropTypes.node,\n  className: PropTypes.string,\n  cssModule: PropTypes.object,\n};\n\nconst defaultProps = {\n  color: 'secondary',\n  pill: false,\n  tag: 'span'\n};\n\nconst Badge = (props) => {\n  let {\n    className,\n    cssModule,\n    color,\n    pill,\n    tag: Tag,\n    ...attributes\n  } = props;\n\n  const classes = mapToCssModules(classNames(\n    className,\n    'badge',\n    'badge-' + color,\n    pill ? 'badge-pill' : false\n  ), cssModule);\n\n  if (attributes.href && Tag === 'span') {\n    Tag = 'a';\n  }\n\n  return (\n    <Tag {...attributes} className={classes} />\n  );\n};\n\nBadge.propTypes = propTypes;\nBadge.defaultProps = defaultProps;\n\nexport default Badge;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport { mapToCssModules, deprecated } from './utils';\n\nconst propTypes = {\n  tag: PropTypes.oneOfType([PropTypes.func, PropTypes.string]),\n  inverse: PropTypes.bool,\n  color: PropTypes.string,\n  block: deprecated(PropTypes.bool, 'Please use the props \"body\"'),\n  body: PropTypes.bool,\n  outline: PropTypes.bool,\n  className: PropTypes.string,\n  cssModule: PropTypes.object,\n};\n\nconst defaultProps = {\n  tag: 'div'\n};\n\nconst Card = (props) => {\n  const {\n    className,\n    cssModule,\n    color,\n    block,\n    body,\n    inverse,\n    outline,\n    tag: Tag,\n    ...attributes\n  } = props;\n  const classes = mapToCssModules(classNames(\n    className,\n    'card',\n    inverse ? 'text-white' : false,\n    block || body ? 'card-body' : false,\n    color ? `${outline ? 'border' : 'bg'}-${color}` : false\n  ), cssModule);\n\n  return (\n    <Tag {...attributes} className={classes} />\n  );\n};\n\nCard.propTypes = propTypes;\nCard.defaultProps = defaultProps;\n\nexport default Card;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport { mapToCssModules } from './utils';\n\nconst propTypes = {\n  tag: PropTypes.oneOfType([PropTypes.func, PropTypes.string]),\n  className: PropTypes.string,\n  cssModule: PropTypes.object,\n};\n\nconst defaultProps = {\n  tag: 'div'\n};\n\nconst CardGroup = (props) => {\n  const {\n    className,\n    cssModule,\n    tag: Tag,\n    ...attributes\n  } = props;\n  const classes = mapToCssModules(classNames(\n    className,\n    'card-group'\n  ), cssModule);\n\n  return (\n    <Tag {...attributes} className={classes} />\n  );\n};\n\nCardGroup.propTypes = propTypes;\nCardGroup.defaultProps = defaultProps;\n\nexport default CardGroup;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport { mapToCssModules } from './utils';\n\nconst propTypes = {\n  tag: PropTypes.oneOfType([PropTypes.func, PropTypes.string]),\n  className: PropTypes.string,\n  cssModule: PropTypes.object,\n};\n\nconst defaultProps = {\n  tag: 'div',\n};\n\nconst CardDeck = (props) => {\n  const {\n    className,\n    cssModule,\n    tag: Tag,\n    ...attributes\n  } = props;\n  const classes = mapToCssModules(classNames(\n    className,\n    'card-deck'\n  ), cssModule);\n\n  return (\n    <Tag {...attributes} className={classes} />\n  );\n};\n\nCardDeck.propTypes = propTypes;\nCardDeck.defaultProps = defaultProps;\n\nexport default CardDeck;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport { mapToCssModules } from './utils';\n\nconst propTypes = {\n  tag: PropTypes.oneOfType([PropTypes.func, PropTypes.string]),\n  className: PropTypes.string,\n  cssModule: PropTypes.object,\n};\n\nconst defaultProps = {\n  tag: 'div'\n};\n\nconst CardColumns = (props) => {\n  const {\n    className,\n    cssModule,\n    tag: Tag,\n    ...attributes\n  } = props;\n  const classes = mapToCssModules(classNames(\n    className,\n    'card-columns'\n  ), cssModule);\n\n  return (\n    <Tag {...attributes} className={classes} />\n  );\n};\n\nCardColumns.propTypes = propTypes;\nCardColumns.defaultProps = defaultProps;\n\nexport default CardColumns;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport { mapToCssModules } from './utils';\n\nconst propTypes = {\n  tag: PropTypes.oneOfType([PropTypes.func, PropTypes.string]),\n  className: PropTypes.string,\n  cssModule: PropTypes.object,\n};\n\nconst defaultProps = {\n  tag: 'div'\n};\n\nconst CardBody = (props) => {\n  const {\n    className,\n    cssModule,\n    tag: Tag,\n    ...attributes\n  } = props;\n  const classes = mapToCssModules(classNames(\n    className,\n    'card-body'\n  ), cssModule);\n\n  return (\n    <Tag {...attributes} className={classes} />\n  );\n};\n\nCardBody.propTypes = propTypes;\nCardBody.defaultProps = defaultProps;\n\nexport default CardBody;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport { mapToCssModules } from './utils';\n\nconst propTypes = {\n  tag: PropTypes.oneOfType([PropTypes.func, PropTypes.string]),\n  innerRef: PropTypes.oneOfType([PropTypes.func, PropTypes.string]),\n  className: PropTypes.string,\n  cssModule: PropTypes.object,\n};\n\nconst defaultProps = {\n  tag: 'a'\n};\n\nconst CardLink = (props) => {\n  const {\n    className,\n    cssModule,\n    tag: Tag,\n    innerRef,\n    ...attributes\n  } = props;\n  const classes = mapToCssModules(classNames(\n    className,\n    'card-link'\n  ), cssModule);\n\n  return (\n    <Tag {...attributes} ref={innerRef} className={classes} />\n  );\n};\n\nCardLink.propTypes = propTypes;\nCardLink.defaultProps = defaultProps;\n\nexport default CardLink;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport { mapToCssModules } from './utils';\n\nconst propTypes = {\n  tag: PropTypes.oneOfType([PropTypes.func, PropTypes.string]),\n  className: PropTypes.string,\n  cssModule: PropTypes.object,\n};\n\nconst defaultProps = {\n  tag: 'div'\n};\n\nconst CardFooter = (props) => {\n  const {\n    className,\n    cssModule,\n    tag: Tag,\n    ...attributes\n  } = props;\n  const classes = mapToCssModules(classNames(\n    className,\n    'card-footer'\n  ), cssModule);\n\n  return (\n    <Tag {...attributes} className={classes} />\n  );\n};\n\nCardFooter.propTypes = propTypes;\nCardFooter.defaultProps = defaultProps;\n\nexport default CardFooter;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport { mapToCssModules } from './utils';\n\nconst propTypes = {\n  tag: PropTypes.oneOfType([PropTypes.func, PropTypes.string]),\n  className: PropTypes.string,\n  cssModule: PropTypes.object,\n};\n\nconst defaultProps = {\n  tag: 'div'\n};\n\nconst CardHeader = (props) => {\n  const {\n    className,\n    cssModule,\n    tag: Tag,\n    ...attributes\n  } = props;\n  const classes = mapToCssModules(classNames(\n    className,\n    'card-header'\n  ), cssModule);\n\n  return (\n    <Tag {...attributes} className={classes} />\n  );\n};\n\nCardHeader.propTypes = propTypes;\nCardHeader.defaultProps = defaultProps;\n\nexport default CardHeader;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport { mapToCssModules } from './utils';\n\nconst propTypes = {\n  tag: PropTypes.oneOfType([PropTypes.func, PropTypes.string]),\n  top: PropTypes.bool,\n  bottom: PropTypes.bool,\n  className: PropTypes.string,\n  cssModule: PropTypes.object,\n};\n\nconst defaultProps = {\n  tag: 'img'\n};\n\nconst CardImg = (props) => {\n  const {\n    className,\n    cssModule,\n    top,\n    bottom,\n    tag: Tag,\n    ...attributes\n  } = props;\n\n  let cardImgClassName = 'card-img';\n  if (top) {\n    cardImgClassName = 'card-img-top';\n  }\n  if (bottom) {\n    cardImgClassName = 'card-img-bottom';\n  }\n\n  const classes = mapToCssModules(classNames(\n    className,\n    cardImgClassName\n  ), cssModule);\n\n  return (\n    <Tag {...attributes} className={classes} />\n  );\n};\n\nCardImg.propTypes = propTypes;\nCardImg.defaultProps = defaultProps;\n\nexport default CardImg;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport { mapToCssModules } from './utils';\n\nconst propTypes = {\n  tag: PropTypes.oneOfType([PropTypes.func, PropTypes.string]),\n  className: PropTypes.string,\n  cssModule: PropTypes.object,\n};\n\nconst defaultProps = {\n  tag: 'div'\n};\n\nconst CardImgOverlay = (props) => {\n  const {\n    className,\n    cssModule,\n    tag: Tag,\n    ...attributes\n  } = props;\n  const classes = mapToCssModules(classNames(\n    className,\n    'card-img-overlay'\n  ), cssModule);\n\n  return (\n    <Tag {...attributes} className={classes} />\n  );\n};\n\nCardImgOverlay.propTypes = propTypes;\nCardImgOverlay.defaultProps = defaultProps;\n\nexport default CardImgOverlay;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport Transition from 'react-transition-group/Transition';\nimport { mapToCssModules, TransitionTimeouts, TransitionStatuses } from './utils';\n\nclass CarouselItem extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      startAnimation: false,\n    };\n\n    this.onEnter = this.onEnter.bind(this);\n    this.onEntering = this.onEntering.bind(this);\n    this.onExit = this.onExit.bind(this);\n    this.onExiting = this.onExiting.bind(this);\n    this.onExited = this.onExited.bind(this);\n  }\n\n  onEnter(node, isAppearing) {\n    this.setState({ startAnimation: false });\n    this.props.onEnter(node, isAppearing);\n  }\n\n  onEntering(node, isAppearing) {\n    // getting this variable triggers a reflow\n    const offsetHeight = node.offsetHeight;\n    this.setState({ startAnimation: true });\n    this.props.onEntering(node, isAppearing);\n    return offsetHeight;\n  }\n\n  onExit(node) {\n    this.setState({ startAnimation: false });\n    this.props.onExit(node);\n  }\n\n  onExiting(node) {\n    this.setState({ startAnimation: true });\n    node.dispatchEvent(new CustomEvent('slide.bs.carousel'));\n    this.props.onExiting(node);\n  }\n\n  onExited(node) {\n    node.dispatchEvent(new CustomEvent('slid.bs.carousel'));\n    this.props.onExited(node);\n  }\n\n  render() {\n    const { in: isIn, children, cssModule, slide, tag: Tag, className, ...transitionProps } = this.props;\n\n    return (\n      <Transition\n        {...transitionProps}\n        enter={slide}\n        exit={slide}\n        in={isIn}\n        onEnter={this.onEnter}\n        onEntering={this.onEntering}\n        onExit={this.onExit}\n        onExiting={this.onExiting}\n        onExited={this.onExited}\n      >\n        {(status) => {\n          const { direction } = this.context;\n          const isActive = (status === TransitionStatuses.ENTERED) || (status === TransitionStatuses.EXITING);\n          const directionClassName = (status === TransitionStatuses.ENTERING || status === TransitionStatuses.EXITING) &&\n            this.state.startAnimation &&\n            (direction === 'right' ? 'carousel-item-left' : 'carousel-item-right');\n          const orderClassName = (status === TransitionStatuses.ENTERING) &&\n            (direction === 'right' ? 'carousel-item-next' : 'carousel-item-prev');\n          const itemClasses = mapToCssModules(classNames(\n            className,\n            'carousel-item',\n            isActive && 'active',\n            directionClassName,\n            orderClassName,\n          ), cssModule);\n\n          return (\n            <Tag className={itemClasses}>\n              {children}\n            </Tag>\n          );\n        }}\n      </Transition>\n    );\n  }\n}\n\nCarouselItem.propTypes = {\n  ...Transition.propTypes,\n  tag: PropTypes.oneOfType([PropTypes.func, PropTypes.string]),\n  in: PropTypes.bool,\n  cssModule: PropTypes.object,\n  children: PropTypes.node,\n  slide: PropTypes.bool,\n  className: PropTypes.string,\n};\n\nCarouselItem.defaultProps = {\n  ...Transition.defaultProps,\n  tag: 'div',\n  timeout: TransitionTimeouts.Carousel,\n  slide: true,\n};\n\nCarouselItem.contextTypes = {\n  direction: PropTypes.string\n};\n\nexport default CarouselItem;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport CarouselItem from './CarouselItem';\nimport { mapToCssModules } from './utils';\n\nclass Carousel extends React.Component {\n  constructor(props) {\n    super(props);\n    this.handleKeyPress = this.handleKeyPress.bind(this);\n    this.renderItems = this.renderItems.bind(this);\n    this.hoverStart = this.hoverStart.bind(this);\n    this.hoverEnd = this.hoverEnd.bind(this);\n    this.state = {\n      direction: 'right',\n      indicatorClicked: false,\n    };\n  }\n\n  getChildContext() {\n    return { direction: this.state.direction };\n  }\n\n  componentDidMount() {\n    // Set up the cycle\n    if (this.props.ride === 'carousel') {\n      this.setInterval();\n    }\n\n    // TODO: move this to the specific carousel like bootstrap. Currently it will trigger ALL carousels on the page.\n    document.addEventListener('keyup', this.handleKeyPress);\n  }\n\n  componentWillReceiveProps(nextProps) {\n    this.setInterval(nextProps);\n    // Calculate the direction to turn\n    if (this.props.activeIndex + 1 === nextProps.activeIndex) {\n      this.setState({ direction: 'right' });\n    } else if (this.props.activeIndex - 1 === nextProps.activeIndex) {\n      this.setState({ direction: 'left' });\n    } else if (this.props.activeIndex > nextProps.activeIndex) {\n      this.setState({ direction: this.state.indicatorClicked ? 'left' : 'right' });\n    } else if (this.props.activeIndex !== nextProps.activeIndex) {\n      this.setState({ direction: this.state.indicatorClicked ? 'right' : 'left' });\n    }\n    this.setState({ indicatorClicked: false });\n  }\n\n  componentWillUnmount() {\n    this.clearInterval();\n    document.removeEventListener('keyup', this.handleKeyPress);\n  }\n\n  setInterval(props = this.props) {\n    // make sure not to have multiple intervals going...\n    this.clearInterval();\n    if (props.interval) {\n      this.cycleInterval = setInterval(() => {\n        props.next();\n      }, parseInt(props.interval, 10));\n    }\n  }\n\n  clearInterval() {\n    clearInterval(this.cycleInterval);\n  }\n\n  hoverStart(...args) {\n    if (this.props.pause === 'hover') {\n      this.clearInterval();\n    }\n    if (this.props.mouseEnter) {\n      this.props.mouseEnter(...args);\n    }\n  }\n\n  hoverEnd(...args) {\n    if (this.props.pause === 'hover') {\n      this.setInterval();\n    }\n    if (this.props.mouseLeave) {\n      this.props.mouseLeave(...args);\n    }\n  }\n\n  handleKeyPress(evt) {\n    if (this.props.keyboard) {\n      if (evt.keyCode === 37) {\n        this.props.previous();\n      } else if (evt.keyCode === 39) {\n        this.props.next();\n      }\n    }\n  }\n\n  renderItems(carouselItems, className) {\n    const { slide } = this.props;\n    return (\n      <div role=\"listbox\" className={className}>\n        {carouselItems.map((item, index) => {\n          const isIn = (index === this.props.activeIndex);\n          return React.cloneElement(item, {\n            in: isIn,\n            slide: slide,\n          });\n        })}\n      </div>\n    );\n  }\n\n  render() {\n    const { children, cssModule, slide, className } = this.props;\n    const outerClasses = mapToCssModules(classNames(\n      className,\n      'carousel',\n      slide && 'slide'\n    ), cssModule);\n\n    const innerClasses = mapToCssModules(classNames(\n      'carousel-inner'\n    ), cssModule);\n\n\n    const slidesOnly = children.every(child => child.type === CarouselItem);\n\n    // Rendering only slides\n    if (slidesOnly) {\n      return (\n        <div className={outerClasses} onMouseEnter={this.hoverStart} onMouseLeave={this.hoverEnd}>\n          {this.renderItems(children, innerClasses)}\n        </div>\n      );\n    }\n\n    // Rendering slides and controls\n    if (children[0] instanceof Array) {\n      const carouselItems = children[0];\n      const controlLeft = children[1];\n      const controlRight = children[2];\n\n      return (\n        <div className={outerClasses} onMouseEnter={this.hoverStart} onMouseLeave={this.hoverEnd}>\n          {this.renderItems(carouselItems, innerClasses)}\n          {controlLeft}\n          {controlRight}\n        </div>\n      );\n    }\n\n    // Rendering indicators, slides and controls\n    const indicators = children[0];\n    const wrappedOnClick = (e) => {\n      if (typeof indicators.props.onClickHandler === 'function') {\n        this.setState({ indicatorClicked: true }, () => indicators.props.onClickHandler(e));\n      }\n    };\n    const wrappedIndicators = React.cloneElement(indicators, { onClickHandler: wrappedOnClick });\n    const carouselItems = children[1];\n    const controlLeft = children[2];\n    const controlRight = children[3];\n\n    return (\n      <div className={outerClasses} onMouseEnter={this.hoverStart} onMouseLeave={this.hoverEnd}>\n        {wrappedIndicators}\n        {this.renderItems(carouselItems, innerClasses)}\n        {controlLeft}\n        {controlRight}\n      </div>\n    );\n  }\n}\n\nCarousel.propTypes = {\n  // the current active slide of the carousel\n  activeIndex: PropTypes.number,\n  // a function which should advance the carousel to the next slide (via activeIndex)\n  next: PropTypes.func.isRequired,\n  // a function which should advance the carousel to the previous slide (via activeIndex)\n  previous: PropTypes.func.isRequired,\n  // controls if the left and right arrow keys should control the carousel\n  keyboard: PropTypes.bool,\n  /* If set to \"hover\", pauses the cycling of the carousel on mouseenter and resumes the cycling of the carousel on\n   * mouseleave. If set to false, hovering over the carousel won't pause it. (default: \"hover\")\n   */\n  pause: PropTypes.oneOf(['hover', false]),\n  // Autoplays the carousel after the user manually cycles the first item. If \"carousel\", autoplays the carousel on load.\n  // This is how bootstrap defines it... I would prefer a bool named autoplay or something...\n  ride: PropTypes.oneOf(['carousel']),\n  // the interval at which the carousel automatically cycles (default: 5000)\n  // eslint-disable-next-line react/no-unused-prop-types\n  interval: PropTypes.oneOfType([\n    PropTypes.number,\n    PropTypes.string,\n    PropTypes.bool,\n  ]),\n  children: PropTypes.array,\n  // called when the mouse enters the Carousel\n  mouseEnter: PropTypes.func,\n  // called when the mouse exits the Carousel\n  mouseLeave: PropTypes.func,\n  // controls whether the slide animation on the Carousel works or not\n  slide: PropTypes.bool,\n  cssModule: PropTypes.object,\n  className: PropTypes.string,\n};\n\nCarousel.defaultProps = {\n  interval: 5000,\n  pause: 'hover',\n  keyboard: true,\n  slide: true,\n};\n\nCarousel.childContextTypes = {\n  direction: PropTypes.string\n};\n\nexport default Carousel;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport { mapToCssModules } from './utils';\n\nconst CarouselControl = (props) => {\n  const { direction, onClickHandler, cssModule, directionText, className } = props;\n\n  const anchorClasses = mapToCssModules(classNames(\n    className,\n    `carousel-control-${direction}`\n  ), cssModule);\n\n  const iconClasses = mapToCssModules(classNames(\n    `carousel-control-${direction}-icon`\n  ), cssModule);\n\n  const screenReaderClasses = mapToCssModules(classNames(\n    'sr-only'\n  ), cssModule);\n\n\n  return (\n    <a\n      className={anchorClasses}\n      role=\"button\"\n      tabIndex=\"0\"\n      onClick={(e) => {\n        e.preventDefault();\n        onClickHandler();\n      }}\n    >\n      <span className={iconClasses} aria-hidden=\"true\" />\n      <span className={screenReaderClasses}>{directionText || direction}</span>\n    </a>\n  );\n};\n\nCarouselControl.propTypes = {\n  direction: PropTypes.oneOf(['prev', 'next']).isRequired,\n  onClickHandler: PropTypes.func.isRequired,\n  cssModule: PropTypes.object,\n  directionText: PropTypes.string,\n  className: PropTypes.string,\n};\n\nexport default CarouselControl;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport { mapToCssModules } from './utils';\n\nconst CarouselIndicators = (props) => {\n  const { items, activeIndex, cssModule, onClickHandler, className } = props;\n\n  const listClasses = mapToCssModules(classNames(className, 'carousel-indicators'), cssModule);\n  const indicators = items.map((item, idx) => {\n    const indicatorClasses = mapToCssModules(classNames(\n      { active: activeIndex === idx }\n    ), cssModule);\n    return (\n      <li\n        key={`${item.key || item.src}${item.caption}${item.altText}`}\n        onClick={(e) => {\n          e.preventDefault();\n          onClickHandler(idx);\n        }}\n        className={indicatorClasses}\n      />);\n  });\n\n  return (\n    <ol className={listClasses}>\n      {indicators}\n    </ol>\n  );\n};\n\nCarouselIndicators.propTypes = {\n  items: PropTypes.array.isRequired,\n  activeIndex: PropTypes.number.isRequired,\n  cssModule: PropTypes.object,\n  onClickHandler: PropTypes.func.isRequired,\n  className: PropTypes.string,\n};\n\nexport default CarouselIndicators;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport { mapToCssModules } from './utils';\n\nconst CarouselCaption = (props) => {\n  const { captionHeader, captionText, cssModule, className } = props;\n  const classes = mapToCssModules(classNames(\n    className,\n    'carousel-caption',\n    'd-none',\n    'd-md-block'\n  ), cssModule);\n\n  return (\n    <div className={classes}>\n      <h3>{captionHeader}</h3>\n      <p>{captionText}</p>\n    </div>\n  );\n};\n\nCarouselCaption.propTypes = {\n  captionHeader: PropTypes.string,\n  captionText: PropTypes.string.isRequired,\n  cssModule: PropTypes.object,\n  className: PropTypes.string,\n};\n\nexport default CarouselCaption;\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport Carousel from './Carousel';\nimport CarouselItem from './CarouselItem';\nimport CarouselControl from './CarouselControl';\nimport CarouselIndicators from './CarouselIndicators';\nimport CarouselCaption from './CarouselCaption';\n\nconst propTypes = {\n  items: PropTypes.array.isRequired,\n  indicators: PropTypes.bool,\n  controls: PropTypes.bool,\n  autoPlay: PropTypes.bool,\n  activeIndex: PropTypes.number,\n  next: PropTypes.func,\n  previous: PropTypes.func,\n  goToIndex: PropTypes.func,\n};\n\nclass UncontrolledCarousel extends Component {\n  constructor(props) {\n    super(props);\n    this.animating = false;\n    this.state = { activeIndex: 0 };\n    this.next = this.next.bind(this);\n    this.previous = this.previous.bind(this);\n    this.goToIndex = this.goToIndex.bind(this);\n    this.onExiting = this.onExiting.bind(this);\n    this.onExited = this.onExited.bind(this);\n  }\n\n  onExiting() {\n    this.animating = true;\n  }\n\n  onExited() {\n    this.animating = false;\n  }\n\n  next() {\n    if (this.animating) return;\n    const nextIndex = this.state.activeIndex === this.props.items.length - 1 ? 0 : this.state.activeIndex + 1;\n    this.setState({ activeIndex: nextIndex });\n  }\n\n  previous() {\n    if (this.animating) return;\n    const nextIndex = this.state.activeIndex === 0 ? this.props.items.length - 1 : this.state.activeIndex - 1;\n    this.setState({ activeIndex: nextIndex });\n  }\n\n  goToIndex(newIndex) {\n    if (this.animating) return;\n    this.setState({ activeIndex: newIndex });\n  }\n\n  render() {\n    const { autoPlay, indicators, controls, items, goToIndex, ...props } = this.props;\n    const { activeIndex } = this.state;\n\n    const slides = items.map((item) => {\n      return (\n        <CarouselItem\n          onExiting={this.onExiting}\n          onExited={this.onExited}\n          key={item.src}\n        >\n          <img src={item.src} alt={item.altText} />\n          <CarouselCaption captionText={item.caption} captionHeader={item.caption} />\n        </CarouselItem>\n      );\n    });\n\n    return (\n      <Carousel\n        activeIndex={activeIndex}\n        next={this.next}\n        previous={this.previous}\n        ride={autoPlay ? 'carousel' : undefined}\n        {...props}\n      >\n        {indicators && <CarouselIndicators\n          items={items}\n          activeIndex={props.activeIndex || activeIndex}\n          onClickHandler={goToIndex || this.goToIndex}\n        />}\n        {slides}\n        {controls && <CarouselControl\n          direction=\"prev\"\n          directionText=\"Previous\"\n          onClickHandler={props.previous || this.previous}\n        />}\n        {controls && <CarouselControl\n          direction=\"next\"\n          directionText=\"Next\"\n          onClickHandler={props.next || this.next}\n        />}\n      </Carousel>\n    );\n  }\n}\n\nUncontrolledCarousel.propTypes = propTypes;\nUncontrolledCarousel.defaultProps = {\n  controls: true,\n  indicators: true,\n  autoPlay: true,\n};\n\nexport default UncontrolledCarousel;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport { mapToCssModules } from './utils';\n\nconst propTypes = {\n  tag: PropTypes.oneOfType([PropTypes.func, PropTypes.string]),\n  className: PropTypes.string,\n  cssModule: PropTypes.object,\n};\n\nconst defaultProps = {\n  tag: 'h6'\n};\n\nconst CardSubtitle = (props) => {\n  const {\n    className,\n    cssModule,\n    tag: Tag,\n    ...attributes\n  } = props;\n  const classes = mapToCssModules(classNames(\n    className,\n    'card-subtitle'\n  ), cssModule);\n\n  return (\n    <Tag {...attributes} className={classes} />\n  );\n};\n\nCardSubtitle.propTypes = propTypes;\nCardSubtitle.defaultProps = defaultProps;\n\nexport default CardSubtitle;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport { mapToCssModules } from './utils';\n\nconst propTypes = {\n  tag: PropTypes.oneOfType([PropTypes.func, PropTypes.string]),\n  className: PropTypes.string,\n  cssModule: PropTypes.object,\n};\n\nconst defaultProps = {\n  tag: 'p'\n};\n\nconst CardText = (props) => {\n  const {\n    className,\n    cssModule,\n    tag: Tag,\n    ...attributes\n  } = props;\n  const classes = mapToCssModules(classNames(\n    className,\n    'card-text'\n  ), cssModule);\n\n  return (\n    <Tag {...attributes} className={classes} />\n  );\n};\n\nCardText.propTypes = propTypes;\nCardText.defaultProps = defaultProps;\n\nexport default CardText;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport { mapToCssModules } from './utils';\n\nconst propTypes = {\n  tag: PropTypes.oneOfType([PropTypes.func, PropTypes.string]),\n  className: PropTypes.string,\n  cssModule: PropTypes.object,\n};\n\nconst defaultProps = {\n  tag: 'h5'\n};\n\nconst CardTitle = (props) => {\n  const {\n    className,\n    cssModule,\n    tag: Tag,\n    ...attributes\n  } = props;\n  const classes = mapToCssModules(classNames(\n    className,\n    'card-title'\n  ), cssModule);\n\n  return (\n    <Tag {...attributes} className={classes} />\n  );\n};\n\nCardTitle.propTypes = propTypes;\nCardTitle.defaultProps = defaultProps;\n\nexport default CardTitle;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport ReactDOM from 'react-dom';\nimport classNames from 'classnames';\nimport { Arrow, Popper as ReactPopper } from 'react-popper';\nimport { getTarget, DOMElement, mapToCssModules } from './utils';\n\nconst propTypes = {\n  children: PropTypes.node.isRequired,\n  className: PropTypes.string,\n  placement: PropTypes.string,\n  placementPrefix: PropTypes.string,\n  hideArrow: PropTypes.bool,\n  tag: PropTypes.string,\n  isOpen: PropTypes.bool.isRequired,\n  cssModule: PropTypes.object,\n  offset: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\n  fallbackPlacement: PropTypes.oneOfType([PropTypes.string, PropTypes.array]),\n  flip: PropTypes.bool,\n  container: PropTypes.oneOfType([PropTypes.string, PropTypes.func, DOMElement]),\n  target: PropTypes.oneOfType([PropTypes.string, PropTypes.func, DOMElement]).isRequired,\n  modifiers: PropTypes.object,\n};\n\nconst defaultProps = {\n  placement: 'auto',\n  hideArrow: false,\n  isOpen: false,\n  offset: 0,\n  fallbackPlacement: 'flip',\n  flip: true,\n  container: 'body',\n  modifiers: {},\n};\n\nconst childContextTypes = {\n  popperManager: PropTypes.object.isRequired,\n};\n\nclass PopperContent extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.handlePlacementChange = this.handlePlacementChange.bind(this);\n    this.setTargetNode = this.setTargetNode.bind(this);\n    this.getTargetNode = this.getTargetNode.bind(this);\n    this.state = {};\n  }\n\n  getChildContext() {\n    return {\n      popperManager: {\n        setTargetNode: this.setTargetNode,\n        getTargetNode: this.getTargetNode,\n      },\n    };\n  }\n\n  componentDidMount() {\n    this.handleProps();\n  }\n\n  componentDidUpdate(prevProps) {\n    if (this.props.isOpen !== prevProps.isOpen) {\n      this.handleProps();\n    } else if (this._element) {\n      // rerender\n      this.renderIntoSubtree();\n    }\n  }\n\n  componentWillUnmount() {\n    this.hide();\n  }\n\n  setTargetNode(node) {\n    this.targetNode = node;\n  }\n\n  getTargetNode() {\n    return this.targetNode;\n  }\n\n  getContainerNode() {\n    return getTarget(this.props.container);\n  }\n\n  handlePlacementChange(data) {\n    if (this.state.placement !== data.placement) {\n      this.setState({ placement: data.placement });\n    }\n    return data;\n  }\n\n  handleProps() {\n    if (this.props.container !== 'inline') {\n      if (this.props.isOpen) {\n        this.show();\n      } else {\n        this.hide();\n      }\n    }\n  }\n\n  hide() {\n    if (this._element) {\n      this.getContainerNode().removeChild(this._element);\n      ReactDOM.unmountComponentAtNode(this._element);\n      this._element = null;\n    }\n  }\n\n  show() {\n    this._element = document.createElement('div');\n    this.getContainerNode().appendChild(this._element);\n    this.renderIntoSubtree();\n    if (this._element.childNodes && this._element.childNodes[0] && this._element.childNodes[0].focus) {\n      this._element.childNodes[0].focus();\n    }\n  }\n\n  renderIntoSubtree() {\n    ReactDOM.unstable_renderSubtreeIntoContainer(\n      this,\n      this.renderChildren(),\n      this._element\n    );\n  }\n\n  renderChildren() {\n    const {\n      cssModule,\n      children,\n      isOpen,\n      flip,\n      target,\n      offset,\n      fallbackPlacement,\n      placementPrefix,\n      hideArrow,\n      className,\n      tag,\n      container,\n      modifiers,\n      ...attrs\n    } = this.props;\n    const arrowClassName = mapToCssModules('arrow', cssModule);\n    const placement = (this.state.placement || attrs.placement).split('-')[0];\n    const popperClassName = mapToCssModules(classNames(\n      className,\n      placementPrefix ? `${placementPrefix}-${placement}` : placement\n    ), this.props.cssModule);\n\n    const extendedModifiers = {\n      offset: { offset },\n      flip: { enabled: flip, behavior: fallbackPlacement },\n      update: {\n        enabled: true,\n        order: 950,\n        fn: this.handlePlacementChange,\n      },\n      ...modifiers,\n    };\n\n    return (\n      <ReactPopper modifiers={extendedModifiers} {...attrs} component={tag} className={popperClassName}>\n        {children}\n        {!hideArrow && <Arrow className={arrowClassName} />}\n      </ReactPopper>\n    );\n  }\n\n  render() {\n    this.setTargetNode(getTarget(this.props.target));\n\n    if (this.props.container === 'inline') {\n      return this.props.isOpen ? this.renderChildren() : null;\n    }\n\n    return null;\n  }\n}\n\nPopperContent.propTypes = propTypes;\nPopperContent.defaultProps = defaultProps;\nPopperContent.childContextTypes = childContextTypes;\n\nexport default PopperContent;\n","import PropTypes from 'prop-types';\nimport { getTarget, DOMElement } from './utils';\n\nconst PopperTargetHelper = (props, context) => {\n  context.popperManager.setTargetNode(getTarget(props.target));\n  return null;\n};\n\nPopperTargetHelper.contextTypes = {\n  popperManager: PropTypes.object.isRequired,\n};\n\nPopperTargetHelper.propTypes = {\n  target: PropTypes.oneOfType([PropTypes.string, PropTypes.func, DOMElement]).isRequired,\n};\n\nexport default PopperTargetHelper;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport PopperContent from './PopperContent';\nimport { getTarget, DOMElement, mapToCssModules, omit, PopperPlacements } from './utils';\n\nconst propTypes = {\n  placement: PropTypes.oneOf(PopperPlacements),\n  target: PropTypes.oneOfType([\n    PropTypes.string,\n    PropTypes.func,\n    DOMElement,\n  ]).isRequired,\n  container: PropTypes.oneOfType([\n    PropTypes.string,\n    PropTypes.func,\n    DOMElement,\n  ]),\n  isOpen: PropTypes.bool,\n  disabled: PropTypes.bool,\n  hideArrow: PropTypes.bool,\n  className: PropTypes.string,\n  innerClassName: PropTypes.string,\n  placementPrefix: PropTypes.string,\n  cssModule: PropTypes.object,\n  toggle: PropTypes.func,\n  delay: PropTypes.oneOfType([\n    PropTypes.shape({ show: PropTypes.number, hide: PropTypes.number }),\n    PropTypes.number,\n  ]),\n  modifiers: PropTypes.object,\n};\n\nconst DEFAULT_DELAYS = {\n  show: 0,\n  hide: 0,\n};\n\nconst defaultProps = {\n  isOpen: false,\n  hideArrow: false,\n  placement: 'right',\n  placementPrefix: 'bs-popover',\n  delay: DEFAULT_DELAYS,\n  toggle: () => {},\n};\n\nclass Popover extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.addTargetEvents = this.addTargetEvents.bind(this);\n    this.handleDocumentClick = this.handleDocumentClick.bind(this);\n    this.removeTargetEvents = this.removeTargetEvents.bind(this);\n    this.getRef = this.getRef.bind(this);\n    this.toggle = this.toggle.bind(this);\n    this.show = this.show.bind(this);\n    this.hide = this.hide.bind(this);\n  }\n\n  componentDidMount() {\n    this._target = getTarget(this.props.target);\n    this.handleProps();\n  }\n\n  componentDidUpdate() {\n    this.handleProps();\n  }\n\n  componentWillUnmount() {\n    this.clearShowTimeout();\n    this.clearHideTimeout();\n    this.removeTargetEvents();\n  }\n\n  getRef(ref) {\n    this._popover = ref;\n  }\n\n  getDelay(key) {\n    const { delay } = this.props;\n    if (typeof delay === 'object') {\n      return isNaN(delay[key]) ? DEFAULT_DELAYS[key] : delay[key];\n    }\n    return delay;\n  }\n\n  handleProps() {\n    if (this.props.isOpen) {\n      this.show();\n    } else {\n      this.hide();\n    }\n  }\n\n  show() {\n    this.clearHideTimeout();\n    this.addTargetEvents();\n    if (!this.props.isOpen) {\n      this.clearShowTimeout();\n      this._showTimeout = setTimeout(this.toggle, this.getDelay('show'));\n    }\n  }\n\n  hide() {\n    this.clearShowTimeout();\n    this.removeTargetEvents();\n    if (this.props.isOpen) {\n      this.clearHideTimeout();\n      this._hideTimeout = setTimeout(this.toggle, this.getDelay('hide'));\n    }\n  }\n\n  clearShowTimeout() {\n    clearTimeout(this._showTimeout);\n    this._showTimeout = undefined;\n  }\n\n  clearHideTimeout() {\n    clearTimeout(this._hideTimeout);\n    this._hideTimeout = undefined;\n  }\n\n  handleDocumentClick(e) {\n    if (e.target !== this._target && !this._target.contains(e.target) && e.target !== this._popover && !(this._popover && this._popover.contains(e.target))) {\n      if (this._hideTimeout) {\n        this.clearHideTimeout();\n      }\n\n      if (this.props.isOpen) {\n        this.toggle(e);\n      }\n    }\n  }\n\n  addTargetEvents() {\n    ['click', 'touchstart'].forEach(event =>\n      document.addEventListener(event, this.handleDocumentClick, true)\n    );\n  }\n\n  removeTargetEvents() {\n    ['click', 'touchstart'].forEach(event =>\n      document.removeEventListener(event, this.handleDocumentClick, true)\n    );\n  }\n\n  toggle(e) {\n    if (this.props.disabled) {\n      return e && e.preventDefault();\n    }\n\n    return this.props.toggle(e);\n  }\n\n  render() {\n    if (!this.props.isOpen) {\n      return null;\n    }\n\n    const attributes = omit(this.props, Object.keys(propTypes));\n    const classes = mapToCssModules(classNames(\n      'popover-inner',\n      this.props.innerClassName\n    ), this.props.cssModule);\n\n    const popperClasses = mapToCssModules(classNames(\n      'popover',\n      'show',\n      this.props.className\n    ), this.props.cssModule);\n\n    return (\n      <PopperContent\n        className={popperClasses}\n        target={this.props.target}\n        isOpen={this.props.isOpen}\n        hideArrow={this.props.hideArrow}\n        placement={this.props.placement}\n        placementPrefix={this.props.placementPrefix}\n        container={this.props.container}\n        modifiers={this.props.modifiers}\n      >\n        <div {...attributes} className={classes} ref={this.getRef} />\n      </PopperContent>\n    );\n  }\n}\n\nPopover.propTypes = propTypes;\nPopover.defaultProps = defaultProps;\n\nexport default Popover;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport { mapToCssModules } from './utils';\n\nconst propTypes = {\n  tag: PropTypes.oneOfType([PropTypes.func, PropTypes.string]),\n  className: PropTypes.string,\n  cssModule: PropTypes.object,\n};\n\nconst defaultProps = {\n  tag: 'h3'\n};\n\nconst PopoverHeader = (props) => {\n  const {\n    className,\n    cssModule,\n    tag: Tag,\n    ...attributes\n  } = props;\n\n  const classes = mapToCssModules(classNames(\n    className,\n    'popover-header'\n  ), cssModule);\n\n  return (\n    <Tag {...attributes} className={classes} />\n  );\n};\n\nPopoverHeader.propTypes = propTypes;\nPopoverHeader.defaultProps = defaultProps;\n\nexport default PopoverHeader;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport { mapToCssModules } from './utils';\n\nconst propTypes = {\n  tag: PropTypes.oneOfType([PropTypes.func, PropTypes.string]),\n  className: PropTypes.string,\n  cssModule: PropTypes.object,\n};\n\nconst defaultProps = {\n  tag: 'div'\n};\n\nconst PopoverBody = (props) => {\n  const {\n    className,\n    cssModule,\n    tag: Tag,\n    ...attributes\n  } = props;\n\n  const classes = mapToCssModules(classNames(\n    className,\n    'popover-body'\n  ), cssModule);\n\n  return (\n    <Tag {...attributes} className={classes} />\n  );\n};\n\nPopoverBody.propTypes = propTypes;\nPopoverBody.defaultProps = defaultProps;\n\nexport default PopoverBody;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport toNumber from 'lodash.tonumber';\nimport { mapToCssModules } from './utils';\n\nconst propTypes = {\n  children: PropTypes.node,\n  bar: PropTypes.bool,\n  multi: PropTypes.bool,\n  tag: PropTypes.string,\n  value: PropTypes.oneOfType([\n    PropTypes.string,\n    PropTypes.number,\n  ]),\n  max: PropTypes.oneOfType([\n    PropTypes.string,\n    PropTypes.number,\n  ]),\n  animated: PropTypes.bool,\n  striped: PropTypes.bool,\n  color: PropTypes.string,\n  className: PropTypes.string,\n  barClassName: PropTypes.string,\n  cssModule: PropTypes.object,\n};\n\nconst defaultProps = {\n  tag: 'div',\n  value: 0,\n  max: 100,\n};\n\nconst Progress = (props) => {\n  const {\n    children,\n    className,\n    barClassName,\n    cssModule,\n    value,\n    max,\n    animated,\n    striped,\n    color,\n    bar,\n    multi,\n    tag: Tag,\n    ...attributes\n  } = props;\n\n  const percent = ((toNumber(value) / toNumber(max)) * 100);\n\n  const progressClasses = mapToCssModules(classNames(\n    className,\n    'progress'\n  ), cssModule);\n\n  const progressBarClasses = mapToCssModules(classNames(\n    'progress-bar',\n    bar ? className || barClassName : barClassName,\n    animated ? 'progress-bar-animated' : null,\n    color ? `bg-${color}` : null,\n    striped || animated ? 'progress-bar-striped' : null\n  ), cssModule);\n\n  const ProgressBar = multi ? children : (\n    <div\n      className={progressBarClasses}\n      style={{ width: `${percent}%` }}\n      role=\"progressbar\"\n      aria-valuenow={value}\n      aria-valuemin=\"0\"\n      aria-valuemax={max}\n      children={children}\n    />\n  );\n\n  if (bar) {\n    return ProgressBar;\n  }\n\n  return (\n    <Tag {...attributes} className={progressClasses} children={ProgressBar} />\n  );\n};\n\nProgress.propTypes = propTypes;\nProgress.defaultProps = defaultProps;\n\nexport default Progress;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport PropTypes from 'prop-types';\nimport { canUseDOM } from './utils';\n\nconst propTypes = {\n  children: PropTypes.node.isRequired,\n  node: PropTypes.any\n};\n\nclass Portal extends React.Component {\n  componentWillUnmount() {\n    if (this.defaultNode) {\n      document.body.removeChild(this.defaultNode);\n    }\n    this.defaultNode = null;\n  }\n\n  render() {\n    if (!canUseDOM) {\n      return null;\n    }\n\n    if (!this.props.node && !this.defaultNode) {\n      this.defaultNode = document.createElement('div');\n      document.body.appendChild(this.defaultNode);\n    }\n\n    return ReactDOM.createPortal(\n      this.props.children,\n      this.props.node || this.defaultNode\n    );\n  }\n}\n\nPortal.propTypes = propTypes;\n\nexport default Portal;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport Portal from './Portal';\nimport Fade from './Fade';\nimport {\n  getOriginalBodyPadding,\n  conditionallyUpdateScrollbar,\n  setScrollbarWidth,\n  mapToCssModules,\n  omit,\n  TransitionTimeouts\n} from './utils';\n\nfunction noop() { }\n\nconst FadePropTypes = PropTypes.shape(Fade.propTypes);\n\nconst propTypes = {\n  isOpen: PropTypes.bool,\n  autoFocus: PropTypes.bool,\n  centered: PropTypes.bool,\n  size: PropTypes.string,\n  toggle: PropTypes.func,\n  keyboard: PropTypes.bool,\n  role: PropTypes.string,\n  labelledBy: PropTypes.string,\n  backdrop: PropTypes.oneOfType([\n    PropTypes.bool,\n    PropTypes.oneOf(['static'])\n  ]),\n  onEnter: PropTypes.func,\n  onExit: PropTypes.func,\n  onOpened: PropTypes.func,\n  onClosed: PropTypes.func,\n  children: PropTypes.node,\n  className: PropTypes.string,\n  wrapClassName: PropTypes.string,\n  modalClassName: PropTypes.string,\n  backdropClassName: PropTypes.string,\n  contentClassName: PropTypes.string,\n  external: PropTypes.node,\n  fade: PropTypes.bool,\n  cssModule: PropTypes.object,\n  zIndex: PropTypes.oneOfType([\n    PropTypes.number,\n    PropTypes.string,\n  ]),\n  backdropTransition: FadePropTypes,\n  modalTransition: FadePropTypes,\n};\n\nconst propsToOmit = Object.keys(propTypes);\n\nconst defaultProps = {\n  isOpen: false,\n  autoFocus: true,\n  centered: false,\n  role: 'dialog',\n  backdrop: true,\n  keyboard: true,\n  zIndex: 1050,\n  fade: true,\n  onOpened: noop,\n  onClosed: noop,\n  modalTransition: {\n    timeout: TransitionTimeouts.Modal,\n  },\n  backdropTransition: {\n    mountOnEnter: true,\n    timeout: TransitionTimeouts.Fade, // uses standard fade transition\n  },\n};\n\nclass Modal extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this._element = null;\n    this._originalBodyPadding = null;\n    this.handleBackdropClick = this.handleBackdropClick.bind(this);\n    this.handleEscape = this.handleEscape.bind(this);\n    this.onOpened = this.onOpened.bind(this);\n    this.onClosed = this.onClosed.bind(this);\n\n    this.state = {\n      isOpen: props.isOpen,\n    };\n\n    if (props.isOpen) {\n      this.init();\n    }\n  }\n\n  componentDidMount() {\n    if (this.props.onEnter) {\n      this.props.onEnter();\n    }\n\n    if (this.state.isOpen && this.props.autoFocus) {\n      this.setFocus();\n    }\n\n    this._isMounted = true;\n  }\n\n  componentWillReceiveProps(nextProps) {\n    if (nextProps.isOpen && !this.props.isOpen) {\n      this.setState({ isOpen: nextProps.isOpen });\n    }\n  }\n\n  componentWillUpdate(nextProps, nextState) {\n    if (nextState.isOpen && !this.state.isOpen) {\n      this.init();\n    }\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    if (this.props.autoFocus && this.state.isOpen && !prevState.isOpen) {\n      this.setFocus();\n    }\n  }\n\n  componentWillUnmount() {\n    if (this.props.onExit) {\n      this.props.onExit();\n    }\n\n    if (this.state.isOpen) {\n      this.destroy();\n    }\n\n    this._isMounted = false;\n  }\n\n  onOpened(node, isAppearing) {\n    this.props.onOpened();\n    (this.props.modalTransition.onEntered || noop)(node, isAppearing);\n  }\n\n  onClosed(node) {\n    // so all methods get called before it is unmounted\n    this.props.onClosed();\n    (this.props.modalTransition.onExited || noop)(node);\n    this.destroy();\n\n    if (this._isMounted) {\n      this.setState({ isOpen: false });\n    }\n  }\n\n  setFocus() {\n    if (this._dialog && this._dialog.parentNode && typeof this._dialog.parentNode.focus === 'function') {\n      this._dialog.parentNode.focus();\n    }\n  }\n\n  handleBackdropClick(e) {\n    e.stopPropagation();\n    if (!this.props.isOpen || this.props.backdrop !== true) return;\n\n    const container = this._dialog;\n\n    if (e.target && !container.contains(e.target) && this.props.toggle) {\n      this.props.toggle(e);\n    }\n  }\n\n  handleEscape(e) {\n    if (this.props.isOpen && this.props.keyboard && e.keyCode === 27 && this.props.toggle) {\n      this.props.toggle(e);\n    }\n  }\n\n  init() {\n    this._element = document.createElement('div');\n    this._element.setAttribute('tabindex', '-1');\n    this._element.style.position = 'relative';\n    this._element.style.zIndex = this.props.zIndex;\n    this._originalBodyPadding = getOriginalBodyPadding();\n\n    conditionallyUpdateScrollbar();\n\n    document.body.appendChild(this._element);\n\n    if (!this.bodyClassAdded) {\n      document.body.className = classNames(\n        document.body.className,\n        mapToCssModules('modal-open', this.props.cssModule)\n      );\n      this.bodyClassAdded = true;\n    }\n  }\n\n  destroy() {\n    if (this._element) {\n      document.body.removeChild(this._element);\n      this._element = null;\n    }\n\n    if (this.bodyClassAdded) {\n      const modalOpenClassName = mapToCssModules('modal-open', this.props.cssModule);\n      // Use regex to prevent matching `modal-open` as part of a different class, e.g. `my-modal-opened`\n      const modalOpenClassNameRegex = new RegExp(`(^| )${modalOpenClassName}( |$)`);\n      document.body.className = document.body.className.replace(modalOpenClassNameRegex, ' ').trim();\n      this.bodyClassAdded = false;\n    }\n\n    setScrollbarWidth(this._originalBodyPadding);\n  }\n\n  renderModalDialog() {\n    const attributes = omit(this.props, propsToOmit);\n    const dialogBaseClass = 'modal-dialog';\n\n    return (\n      <div\n        {...attributes}\n        className={mapToCssModules(classNames(dialogBaseClass, this.props.className, {\n          [`modal-${this.props.size}`]: this.props.size,\n          [`${dialogBaseClass}-centered`]: this.props.centered,\n        }), this.props.cssModule)}\n        role=\"document\"\n        ref={(c) => {\n          this._dialog = c;\n        }}\n      >\n        <div\n          className={mapToCssModules(\n            classNames('modal-content', this.props.contentClassName),\n            this.props.cssModule\n          )}\n        >\n          {this.props.children}\n        </div>\n      </div>\n    );\n  }\n\n  render() {\n    if (this.state.isOpen) {\n      const {\n        wrapClassName,\n        modalClassName,\n        backdropClassName,\n        cssModule,\n        isOpen,\n        backdrop,\n        role,\n        labelledBy,\n        external,\n      } = this.props;\n\n      const modalAttributes = {\n        onClick: this.handleBackdropClick,\n        onKeyUp: this.handleEscape,\n        style: { display: 'block' },\n        'aria-labelledby': labelledBy,\n        role,\n        tabIndex: '-1'\n      };\n\n      const hasTransition = this.props.fade;\n      const modalTransition = {\n        ...Fade.defaultProps,\n        ...this.props.modalTransition,\n        baseClass: hasTransition ? this.props.modalTransition.baseClass : '',\n        timeout: hasTransition ? this.props.modalTransition.timeout : 0,\n      };\n      const backdropTransition = {\n        ...Fade.defaultProps,\n        ...this.props.backdropTransition,\n        baseClass: hasTransition ? this.props.backdropTransition.baseClass : '',\n        timeout: hasTransition ? this.props.backdropTransition.timeout : 0,\n      };\n\n      return (\n        <Portal node={this._element}>\n          <div className={mapToCssModules(wrapClassName)}>\n            <Fade\n              {...modalAttributes}\n              {...modalTransition}\n              in={isOpen}\n              onEntered={this.onOpened}\n              onExited={this.onClosed}\n              cssModule={cssModule}\n              className={mapToCssModules(classNames('modal', modalClassName), cssModule)}\n            >\n              {external}\n              {this.renderModalDialog()}\n            </Fade>\n            <Fade\n              {...backdropTransition}\n              in={isOpen && !!backdrop}\n              cssModule={cssModule}\n              className={mapToCssModules(classNames('modal-backdrop', backdropClassName), cssModule)}\n            />\n          </div>\n        </Portal>\n      );\n    }\n\n    return null;\n  }\n}\n\nModal.propTypes = propTypes;\nModal.defaultProps = defaultProps;\n\nexport default Modal;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport { mapToCssModules } from './utils';\n\nconst propTypes = {\n  tag: PropTypes.oneOfType([PropTypes.func, PropTypes.string]),\n  wrapTag: PropTypes.oneOfType([PropTypes.func, PropTypes.string]),\n  toggle: PropTypes.func,\n  className: PropTypes.string,\n  cssModule: PropTypes.object,\n  children: PropTypes.node,\n  closeAriaLabel: PropTypes.string,\n};\n\nconst defaultProps = {\n  tag: 'h5',\n  wrapTag: 'div',\n  closeAriaLabel: 'Close',\n};\n\nconst ModalHeader = (props) => {\n  let closeButton;\n  const {\n    className,\n    cssModule,\n    children,\n    toggle,\n    tag: Tag,\n    wrapTag: WrapTag,\n    closeAriaLabel,\n    ...attributes } = props;\n\n  const classes = mapToCssModules(classNames(\n    className,\n    'modal-header'\n  ), cssModule);\n\n  if (toggle) {\n    closeButton = (\n      <button type=\"button\" onClick={toggle} className={mapToCssModules('close', cssModule)} aria-label={closeAriaLabel}>\n        <span aria-hidden=\"true\">{String.fromCharCode(215)}</span>\n      </button>\n    );\n  }\n\n  return (\n    <WrapTag {...attributes} className={classes}>\n      <Tag className={mapToCssModules('modal-title', cssModule)}>\n        {children}\n      </Tag>\n      {closeButton}\n    </WrapTag>\n  );\n};\n\nModalHeader.propTypes = propTypes;\nModalHeader.defaultProps = defaultProps;\n\nexport default ModalHeader;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport { mapToCssModules } from './utils';\n\nconst propTypes = {\n  tag: PropTypes.oneOfType([PropTypes.func, PropTypes.string]),\n  className: PropTypes.string,\n  cssModule: PropTypes.object,\n};\n\nconst defaultProps = {\n  tag: 'div',\n};\n\nconst ModalBody = (props) => {\n  const {\n    className,\n    cssModule,\n    tag: Tag,\n    ...attributes } = props;\n  const classes = mapToCssModules(classNames(\n    className,\n    'modal-body'\n  ), cssModule);\n\n  return (\n    <Tag {...attributes} className={classes} />\n  );\n};\n\nModalBody.propTypes = propTypes;\nModalBody.defaultProps = defaultProps;\n\nexport default ModalBody;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport { mapToCssModules } from './utils';\n\nconst propTypes = {\n  tag: PropTypes.oneOfType([PropTypes.func, PropTypes.string]),\n  className: PropTypes.string,\n  cssModule: PropTypes.object,\n};\n\nconst defaultProps = {\n  tag: 'div',\n};\n\nconst ModalFooter = (props) => {\n  const {\n    className,\n    cssModule,\n    tag: Tag,\n    ...attributes } = props;\n  const classes = mapToCssModules(classNames(\n    className,\n    'modal-footer'\n  ), cssModule);\n\n  return (\n    <Tag {...attributes} className={classes} />\n  );\n};\n\nModalFooter.propTypes = propTypes;\nModalFooter.defaultProps = defaultProps;\n\nexport default ModalFooter;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport PopperContent from './PopperContent';\nimport { getTarget, DOMElement, mapToCssModules, omit, PopperPlacements } from './utils';\n\nconst propTypes = {\n  placement: PropTypes.oneOf(PopperPlacements),\n  target: PropTypes.oneOfType([\n    PropTypes.string,\n    PropTypes.func,\n    DOMElement,\n  ]).isRequired,\n  container: PropTypes.oneOfType([\n    PropTypes.string,\n    PropTypes.func,\n    DOMElement,\n  ]),\n  isOpen: PropTypes.bool,\n  disabled: PropTypes.bool,\n  hideArrow: PropTypes.bool,\n  className: PropTypes.string,\n  innerClassName: PropTypes.string,\n  cssModule: PropTypes.object,\n  toggle: PropTypes.func,\n  autohide: PropTypes.bool,\n  placementPrefix: PropTypes.string,\n  delay: PropTypes.oneOfType([\n    PropTypes.shape({ show: PropTypes.number, hide: PropTypes.number }),\n    PropTypes.number,\n  ]),\n  modifiers: PropTypes.object,\n};\n\nconst DEFAULT_DELAYS = {\n  show: 0,\n  hide: 250\n};\n\nconst defaultProps = {\n  isOpen: false,\n  hideArrow: false,\n  placement: 'top',\n  placementPrefix: 'bs-tooltip',\n  delay: DEFAULT_DELAYS,\n  autohide: true,\n  toggle: function () {}\n};\n\nclass Tooltip extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.addTargetEvents = this.addTargetEvents.bind(this);\n    this.handleDocumentClick = this.handleDocumentClick.bind(this);\n    this.removeTargetEvents = this.removeTargetEvents.bind(this);\n    this.toggle = this.toggle.bind(this);\n    this.onMouseOverTooltip = this.onMouseOverTooltip.bind(this);\n    this.onMouseLeaveTooltip = this.onMouseLeaveTooltip.bind(this);\n    this.onMouseOverTooltipContent = this.onMouseOverTooltipContent.bind(this);\n    this.onMouseLeaveTooltipContent = this.onMouseLeaveTooltipContent.bind(this);\n    this.show = this.show.bind(this);\n    this.hide = this.hide.bind(this);\n  }\n\n  componentDidMount() {\n    this._target = getTarget(this.props.target);\n    this.addTargetEvents();\n  }\n\n  componentWillUnmount() {\n    this.removeTargetEvents();\n  }\n\n  onMouseOverTooltip() {\n    if (this._hideTimeout) {\n      this.clearHideTimeout();\n    }\n    this._showTimeout = setTimeout(this.show, this.getDelay('show'));\n  }\n\n  onMouseLeaveTooltip() {\n    if (this._showTimeout) {\n      this.clearShowTimeout();\n    }\n    this._hideTimeout = setTimeout(this.hide, this.getDelay('hide'));\n  }\n\n  onMouseOverTooltipContent() {\n    if (this.props.autohide) {\n      return;\n    }\n    if (this._hideTimeout) {\n      this.clearHideTimeout();\n    }\n  }\n\n  onMouseLeaveTooltipContent() {\n    if (this.props.autohide) {\n      return;\n    }\n    if (this._showTimeout) {\n      this.clearShowTimeout();\n    }\n    this._hideTimeout = setTimeout(this.hide, this.getDelay('hide'));\n  }\n\n  getDelay(key) {\n    const { delay } = this.props;\n    if (typeof delay === 'object') {\n      return isNaN(delay[key]) ? DEFAULT_DELAYS[key] : delay[key];\n    }\n    return delay;\n  }\n\n  show() {\n    if (!this.props.isOpen) {\n      this.clearShowTimeout();\n      this.toggle();\n    }\n  }\n\n  hide() {\n    if (this.props.isOpen) {\n      this.clearHideTimeout();\n      this.toggle();\n    }\n  }\n\n  clearShowTimeout() {\n    clearTimeout(this._showTimeout);\n    this._showTimeout = undefined;\n  }\n\n  clearHideTimeout() {\n    clearTimeout(this._hideTimeout);\n    this._hideTimeout = undefined;\n  }\n\n  handleDocumentClick(e) {\n    if (e.target === this._target || this._target.contains(e.target)) {\n      if (this._hideTimeout) {\n        this.clearHideTimeout();\n      }\n\n      if (!this.props.isOpen) {\n        this.toggle();\n      }\n    }\n  }\n\n  addTargetEvents() {\n    this._target.addEventListener('mouseover', this.onMouseOverTooltip, true);\n    this._target.addEventListener('mouseout', this.onMouseLeaveTooltip, true);\n    ['click', 'touchstart'].forEach(event =>\n      document.addEventListener(event, this.handleDocumentClick, true)\n    );\n  }\n\n  removeTargetEvents() {\n    this._target.removeEventListener('mouseover', this.onMouseOverTooltip, true);\n    this._target.removeEventListener('mouseout', this.onMouseLeaveTooltip, true);\n    ['click', 'touchstart'].forEach(event =>\n      document.removeEventListener(event, this.handleDocumentClick, true)\n    );\n  }\n\n  toggle(e) {\n    if (this.props.disabled) {\n      return e && e.preventDefault();\n    }\n\n    return this.props.toggle();\n  }\n\n  render() {\n    if (!this.props.isOpen) {\n      return null;\n    }\n\n    const attributes = omit(this.props, Object.keys(propTypes));\n    const classes = mapToCssModules(classNames(\n      'tooltip-inner',\n      this.props.innerClassName\n    ), this.props.cssModule);\n\n    const popperClasses = mapToCssModules(classNames(\n      'tooltip',\n      'show',\n      this.props.className\n    ), this.props.cssModule);\n\n    return (\n      <PopperContent\n        className={popperClasses}\n        target={this.props.target}\n        isOpen={this.props.isOpen}\n        hideArrow={this.props.hideArrow}\n        placement={this.props.placement}\n        placementPrefix={this.props.placementPrefix}\n        container={this.props.container}\n        modifiers={this.props.modifiers}\n      >\n        <div\n          {...attributes}\n          className={classes}\n          onMouseOver={this.onMouseOverTooltipContent}\n          onMouseLeave={this.onMouseLeaveTooltipContent}\n        />\n      </PopperContent>\n    );\n  }\n}\n\nTooltip.propTypes = propTypes;\nTooltip.defaultProps = defaultProps;\n\nexport default Tooltip;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport { mapToCssModules, deprecated } from './utils';\n\nconst propTypes = {\n  className: PropTypes.string,\n  cssModule: PropTypes.object,\n  size: PropTypes.string,\n  bordered: PropTypes.bool,\n  striped: PropTypes.bool,\n  inverse: deprecated(PropTypes.bool, 'Please use the prop \"dark\"'),\n  dark: PropTypes.bool,\n  hover: PropTypes.bool,\n  responsive: PropTypes.oneOfType([PropTypes.bool, PropTypes.string]),\n  tag: PropTypes.oneOfType([PropTypes.func, PropTypes.string]),\n  responsiveTag: PropTypes.oneOfType([PropTypes.func, PropTypes.string]),\n};\n\nconst defaultProps = {\n  tag: 'table',\n  responsiveTag: 'div',\n};\n\nconst Table = (props) => {\n  const {\n    className,\n    cssModule,\n    size,\n    bordered,\n    striped,\n    inverse,\n    dark,\n    hover,\n    responsive,\n    tag: Tag,\n    responsiveTag: ResponsiveTag,\n    ...attributes\n  } = props;\n\n  const classes = mapToCssModules(classNames(\n    className,\n    'table',\n    size ? 'table-' + size : false,\n    bordered ? 'table-bordered' : false,\n    striped ? 'table-striped' : false,\n    (dark || inverse) ? 'table-dark' : false,\n    hover ? 'table-hover' : false,\n  ), cssModule);\n\n  const table = <Tag {...attributes} className={classes} />;\n\n  if (responsive) {\n    const responsiveClassName = responsive === true ? 'table-responsive' : `table-responsive-${responsive}`;\n\n    return (\n      <ResponsiveTag className={responsiveClassName}>{table}</ResponsiveTag>\n    );\n  }\n\n  return table;\n};\n\nTable.propTypes = propTypes;\nTable.defaultProps = defaultProps;\n\nexport default Table;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport { mapToCssModules } from './utils';\n\nconst propTypes = {\n  tag: PropTypes.oneOfType([PropTypes.func, PropTypes.string]),\n  flush: PropTypes.bool,\n  className: PropTypes.string,\n  cssModule: PropTypes.object,\n};\n\nconst defaultProps = {\n  tag: 'ul'\n};\n\nconst ListGroup = (props) => {\n  const {\n    className,\n    cssModule,\n    tag: Tag,\n    flush,\n    ...attributes\n  } = props;\n  const classes = mapToCssModules(classNames(\n    className,\n    'list-group',\n    flush ? 'list-group-flush' : false\n  ), cssModule);\n\n  return (\n    <Tag {...attributes} className={classes} />\n  );\n};\n\nListGroup.propTypes = propTypes;\nListGroup.defaultProps = defaultProps;\n\nexport default ListGroup;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport { mapToCssModules } from './utils';\n\nconst propTypes = {\n  children: PropTypes.node,\n  inline: PropTypes.bool,\n  tag: PropTypes.oneOfType([PropTypes.func, PropTypes.string]),\n  innerRef: PropTypes.oneOfType([PropTypes.func, PropTypes.string]),\n  className: PropTypes.string,\n  cssModule: PropTypes.object,\n};\n\nconst defaultProps = {\n  tag: 'form',\n};\n\nconst Form = (props) => {\n  const {\n    className,\n    cssModule,\n    inline,\n    tag: Tag,\n    innerRef,\n    ...attributes\n  } = props;\n\n  const classes = mapToCssModules(classNames(\n    className,\n    inline ? 'form-inline' : false\n  ), cssModule);\n\n  return (\n    <Tag {...attributes} ref={innerRef} className={classes} />\n  );\n};\n\nForm.propTypes = propTypes;\nForm.defaultProps = defaultProps;\n\nexport default Form;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport { mapToCssModules } from './utils';\n\nconst propTypes = {\n  children: PropTypes.node,\n  tag: PropTypes.string,\n  className: PropTypes.string,\n  cssModule: PropTypes.object,\n  valid: PropTypes.bool\n};\n\nconst defaultProps = {\n  tag: 'div',\n  valid: undefined\n};\n\nconst FormFeedback = (props) => {\n  const {\n    className,\n    cssModule,\n    valid,\n    tag: Tag,\n    ...attributes\n  } = props;\n\n  const classes = mapToCssModules(classNames(\n    className,\n    valid ? 'valid-feedback' : 'invalid-feedback'\n  ), cssModule);\n\n  return (\n    <Tag {...attributes} className={classes} />\n  );\n};\n\nFormFeedback.propTypes = propTypes;\nFormFeedback.defaultProps = defaultProps;\n\nexport default FormFeedback;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport { mapToCssModules } from './utils';\n\nconst propTypes = {\n  children: PropTypes.node,\n  row: PropTypes.bool,\n  check: PropTypes.bool,\n  inline: PropTypes.bool,\n  disabled: PropTypes.bool,\n  tag: PropTypes.string,\n  className: PropTypes.string,\n  cssModule: PropTypes.object,\n};\n\nconst defaultProps = {\n  tag: 'div',\n};\n\nconst FormGroup = (props) => {\n  const {\n    className,\n    cssModule,\n    row,\n    disabled,\n    check,\n    inline,\n    tag: Tag,\n    ...attributes\n  } = props;\n\n  const classes = mapToCssModules(classNames(\n    className,\n    row ? 'row' : false,\n    check ? 'form-check' : 'form-group',\n    check && inline ? 'form-check-inline' : false,\n    check && disabled ? 'disabled' : false\n  ), cssModule);\n\n  return (\n    <Tag {...attributes} className={classes} />\n  );\n};\n\nFormGroup.propTypes = propTypes;\nFormGroup.defaultProps = defaultProps;\n\nexport default FormGroup;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport { mapToCssModules } from './utils';\n\nconst propTypes = {\n  children: PropTypes.node,\n  inline: PropTypes.bool,\n  tag: PropTypes.oneOfType([PropTypes.func, PropTypes.string]),\n  color: PropTypes.string,\n  className: PropTypes.string,\n  cssModule: PropTypes.object,\n};\n\nconst defaultProps = {\n  tag: 'small',\n  color: 'muted',\n};\n\nconst FormText = (props) => {\n  const {\n    className,\n    cssModule,\n    inline,\n    color,\n    tag: Tag,\n    ...attributes\n  } = props;\n\n  const classes = mapToCssModules(classNames(\n    className,\n    !inline ? 'form-text' : false,\n    color ? `text-${color}` : false\n  ), cssModule);\n\n  return (\n    <Tag {...attributes} className={classes} />\n  );\n};\n\nFormText.propTypes = propTypes;\nFormText.defaultProps = defaultProps;\n\nexport default FormText;\n","/* eslint react/prefer-stateless-function: 0 */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport { mapToCssModules, deprecated, warnOnce } from './utils';\n\nconst propTypes = {\n  children: PropTypes.node,\n  type: PropTypes.string,\n  size: PropTypes.string,\n  bsSize: PropTypes.string,\n  state: deprecated(PropTypes.string, 'Please use the props \"valid\" and \"invalid\" to indicate the state.'),\n  valid: PropTypes.bool,\n  invalid: PropTypes.bool,\n  tag: PropTypes.oneOfType([PropTypes.func, PropTypes.string]),\n  innerRef: PropTypes.oneOfType([PropTypes.func, PropTypes.string]),\n  static: deprecated(PropTypes.bool, 'Please use the prop \"plaintext\"'),\n  plaintext: PropTypes.bool,\n  addon: PropTypes.bool,\n  className: PropTypes.string,\n  cssModule: PropTypes.object,\n};\n\nconst defaultProps = {\n  type: 'text',\n};\n\nclass Input extends React.Component {\n  render() {\n    let {\n      className,\n      cssModule,\n      type,\n      bsSize,\n      state,\n      valid,\n      invalid,\n      tag,\n      addon,\n      static: staticInput,\n      plaintext,\n      innerRef,\n      ...attributes\n    } = this.props;\n\n    const checkInput = ['radio', 'checkbox'].indexOf(type) > -1;\n    const isNotaNumber = new RegExp('\\\\D', 'g');\n\n    const fileInput = type === 'file';\n    const textareaInput = type === 'textarea';\n    const selectInput = type === 'select';\n    let Tag = tag || ((selectInput || textareaInput) ? type : 'input');\n\n    let formControlClass = 'form-control';\n\n    if (plaintext || staticInput) {\n      formControlClass = `${formControlClass}-plaintext`;\n      Tag = tag || 'p';\n    } else if (fileInput) {\n      formControlClass = `${formControlClass}-file`;\n    } else if (checkInput) {\n      if (addon) {\n        formControlClass = null;\n      } else {\n        formControlClass = 'form-check-input';\n      }\n    }\n\n    if (state && typeof valid === 'undefined' && typeof invalid === 'undefined') {\n      if (state === 'danger') {\n        invalid = true;\n      } else if (state === 'success') {\n        valid = true;\n      }\n    }\n\n    if (attributes.size && isNotaNumber.test(attributes.size)) {\n      warnOnce('Please use the prop \"bsSize\" instead of the \"size\" to bootstrap\\'s input sizing.');\n      bsSize = attributes.size;\n      delete attributes.size;\n    }\n\n    const classes = mapToCssModules(classNames(\n      className,\n      invalid && 'is-invalid',\n      valid && 'is-valid',\n      bsSize ? `form-control-${bsSize}` : false,\n      formControlClass\n    ), cssModule);\n\n    if (Tag === 'input' || typeof tag !== 'string') {\n      attributes.type = type;\n    }\n\n    return (\n      <Tag {...attributes} ref={innerRef} className={classes} />\n    );\n  }\n}\n\nInput.propTypes = propTypes;\nInput.defaultProps = defaultProps;\n\nexport default Input;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport { mapToCssModules } from './utils';\n\nconst propTypes = {\n  tag: PropTypes.oneOfType([PropTypes.func, PropTypes.string]),\n  size: PropTypes.string,\n  className: PropTypes.string,\n  cssModule: PropTypes.object,\n};\n\nconst defaultProps = {\n  tag: 'div'\n};\n\nconst InputGroup = (props) => {\n  const {\n    className,\n    cssModule,\n    tag: Tag,\n    size,\n    ...attributes\n  } = props;\n  const classes = mapToCssModules(classNames(\n    className,\n    'input-group',\n    size ? `input-group-${size}` : null\n  ), cssModule);\n\n  return (\n    <Tag {...attributes} className={classes} />\n  );\n};\n\nInputGroup.propTypes = propTypes;\nInputGroup.defaultProps = defaultProps;\n\nexport default InputGroup;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport { mapToCssModules } from './utils';\n\nconst propTypes = {\n  tag: PropTypes.oneOfType([PropTypes.func, PropTypes.string]),\n  className: PropTypes.string,\n  cssModule: PropTypes.object,\n};\n\nconst defaultProps = {\n  tag: 'span'\n};\n\nconst InputGroupText = (props) => {\n  const {\n    className,\n    cssModule,\n    tag: Tag,\n    ...attributes\n  } = props;\n\n  const classes = mapToCssModules(classNames(\n    className,\n    'input-group-text'\n  ), cssModule);\n\n  return (\n    <Tag {...attributes} className={classes} />\n  );\n};\n\nInputGroupText.propTypes = propTypes;\nInputGroupText.defaultProps = defaultProps;\n\nexport default InputGroupText;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport { mapToCssModules } from './utils';\nimport InputGroupText from './InputGroupText';\n\nconst propTypes = {\n  tag: PropTypes.oneOfType([PropTypes.func, PropTypes.string]),\n  addonType: PropTypes.oneOf(['prepend', 'append']).isRequired,\n  children: PropTypes.node,\n  className: PropTypes.string,\n  cssModule: PropTypes.object,\n};\n\nconst defaultProps = {\n  tag: 'div'\n};\n\nconst InputGroupAddon = (props) => {\n  const {\n    className,\n    cssModule,\n    tag: Tag,\n    addonType,\n    children,\n    ...attributes\n  } = props;\n\n  const classes = mapToCssModules(classNames(\n    className,\n    'input-group-' + addonType\n  ), cssModule);\n\n  // Convenience to assist with transition\n  if (typeof children === 'string') {\n    return (\n      <Tag {...attributes} className={classes}>\n        <InputGroupText children={children} />\n      </Tag>\n    );\n  }\n\n  return (\n    <Tag {...attributes} className={classes} children={children} />\n  );\n};\n\nInputGroupAddon.propTypes = propTypes;\nInputGroupAddon.defaultProps = defaultProps;\n\nexport default InputGroupAddon;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport Button from './Button';\nimport InputGroupAddon from './InputGroupAddon';\nimport { warnOnce } from './utils';\n\nconst propTypes = {\n  tag: PropTypes.oneOfType([PropTypes.func, PropTypes.string]),\n  addonType: PropTypes.oneOf(['prepend', 'append']).isRequired,\n  children: PropTypes.node,\n  groupClassName: PropTypes.string,\n  groupAttributes: PropTypes.object,\n  className: PropTypes.string,\n  cssModule: PropTypes.object,\n};\n\nconst InputGroupButton = (props) => {\n  warnOnce('The \"InputGroupButton\" component has been deprecated.\\nPlease use component \"InputGroupAddon\".');\n\n  let {\n    children,\n    groupClassName,\n    groupAttributes,\n    ...propsWithoutGroup\n  } = props;\n\n  if (typeof children === 'string') {\n    let {\n      cssModule,\n      tag,\n      addonType,\n      ...attributes\n    } = propsWithoutGroup;\n\n    const allGroupAttributes = {\n      ...groupAttributes,\n      cssModule,\n      tag,\n      addonType\n    };\n\n    return (\n      <InputGroupAddon {...allGroupAttributes} className={groupClassName}>\n        <Button {...attributes} children={children} />\n      </InputGroupAddon>\n    );\n  }\n\n  return (\n    <InputGroupAddon {...props} children={children} />\n  );\n};\n\nInputGroupButton.propTypes = propTypes;\n\nexport default InputGroupButton;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport Dropdown from './Dropdown';\n\nconst propTypes = {\n  addonType: PropTypes.oneOf(['prepend', 'append']).isRequired,\n  children: PropTypes.node,\n};\n\nconst InputGroupButtonDropdown = (props) => {\n  return (\n    <Dropdown {...props} />\n  );\n};\n\nInputGroupButtonDropdown.propTypes = propTypes;\n\nexport default InputGroupButtonDropdown;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport isobject from 'lodash.isobject';\nimport { mapToCssModules, deprecated } from './utils';\n\nconst colWidths = ['xs', 'sm', 'md', 'lg', 'xl'];\n\nconst stringOrNumberProp = PropTypes.oneOfType([PropTypes.number, PropTypes.string]);\n\nconst columnProps = PropTypes.oneOfType([\n  PropTypes.string,\n  PropTypes.number,\n  PropTypes.shape({\n    size: stringOrNumberProp,\n    push: deprecated(stringOrNumberProp, 'Please use the prop \"order\"'),\n    pull: deprecated(stringOrNumberProp, 'Please use the prop \"order\"'),\n    order: stringOrNumberProp,\n    offset: stringOrNumberProp,\n  }),\n]);\n\nconst propTypes = {\n  children: PropTypes.node,\n  hidden: PropTypes.bool,\n  check: PropTypes.bool,\n  size: PropTypes.string,\n  for: PropTypes.string,\n  tag: PropTypes.string,\n  className: PropTypes.string,\n  cssModule: PropTypes.object,\n  xs: columnProps,\n  sm: columnProps,\n  md: columnProps,\n  lg: columnProps,\n  xl: columnProps,\n  widths: PropTypes.array,\n};\n\nconst defaultProps = {\n  tag: 'label',\n  widths: colWidths,\n};\n\nconst getColumnSizeClass = (isXs, colWidth, colSize) => {\n  if (colSize === true || colSize === '') {\n    return isXs ? 'col' : `col-${colWidth}`;\n  } else if (colSize === 'auto') {\n    return isXs ? 'col-auto' : `col-${colWidth}-auto`;\n  }\n\n  return isXs ? `col-${colSize}` : `col-${colWidth}-${colSize}`;\n};\n\nconst Label = (props) => {\n  const {\n    className,\n    cssModule,\n    hidden,\n    widths,\n    tag: Tag,\n    check,\n    size,\n    for: htmlFor,\n    ...attributes\n  } = props;\n\n  const colClasses = [];\n\n  widths.forEach((colWidth, i) => {\n    let columnProp = props[colWidth];\n\n    delete attributes[colWidth];\n\n    if (!columnProp && columnProp !== '') {\n      return;\n    }\n\n    const isXs = !i;\n    let colClass;\n\n    if (isobject(columnProp)) {\n      const colSizeInterfix = isXs ? '-' : `-${colWidth}-`;\n      colClass = getColumnSizeClass(isXs, colWidth, columnProp.size);\n\n      colClasses.push(mapToCssModules(classNames({\n        [colClass]: columnProp.size || columnProp.size === '',\n        [`order${colSizeInterfix}${columnProp.order}`]: columnProp.order || columnProp.order === 0,\n        [`offset${colSizeInterfix}${columnProp.offset}`]: columnProp.offset || columnProp.offset === 0\n      })), cssModule);\n    } else {\n      colClass = getColumnSizeClass(isXs, colWidth, columnProp);\n      colClasses.push(colClass);\n    }\n  });\n\n  const classes = mapToCssModules(classNames(\n    className,\n    hidden ? 'sr-only' : false,\n    check ? 'form-check-label' : false,\n    size ? `col-form-label-${size}` : false,\n    colClasses,\n    colClasses.length ? 'col-form-label' : false\n  ), cssModule);\n\n  return (\n    <Tag htmlFor={htmlFor} {...attributes} className={classes} />\n  );\n};\n\nLabel.propTypes = propTypes;\nLabel.defaultProps = defaultProps;\n\nexport default Label;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport { mapToCssModules } from './utils';\n\nconst propTypes = {\n  body: PropTypes.bool,\n  bottom: PropTypes.bool,\n  children: PropTypes.node,\n  className: PropTypes.string,\n  cssModule: PropTypes.object,\n  heading: PropTypes.bool,\n  left: PropTypes.bool,\n  list: PropTypes.bool,\n  middle: PropTypes.bool,\n  object: PropTypes.bool,\n  right: PropTypes.bool,\n  tag: PropTypes.oneOfType([PropTypes.func, PropTypes.string]),\n  top: PropTypes.bool,\n};\n\nconst Media = (props) => {\n  const {\n    body,\n    bottom,\n    className,\n    cssModule,\n    heading,\n    left,\n    list,\n    middle,\n    object,\n    right,\n    tag,\n    top,\n    ...attributes\n  } = props;\n\n  let defaultTag;\n  if (heading) {\n    defaultTag = 'h4';\n  } else if (left || right) {\n    defaultTag = 'a';\n  } else if (object) {\n    defaultTag = 'img';\n  } else if (list) {\n    defaultTag = 'ul';\n  } else {\n    defaultTag = 'div';\n  }\n  const Tag = tag || defaultTag;\n\n  const classes = mapToCssModules(classNames(\n    className,\n    {\n      'media-body': body,\n      'media-heading': heading,\n      'media-left': left,\n      'media-right': right,\n      'media-top': top,\n      'media-bottom': bottom,\n      'media-middle': middle,\n      'media-object': object,\n      'media-list': list,\n      media: !body && !heading && !left && !right && !top && !bottom && !middle && !object && !list,\n    }\n  ), cssModule);\n\n  return (\n    <Tag {...attributes} className={classes} />\n  );\n};\n\nMedia.propTypes = propTypes;\n\nexport default Media;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport { mapToCssModules } from './utils';\n\nconst propTypes = {\n  children: PropTypes.node,\n  className: PropTypes.string,\n  cssModule: PropTypes.object,\n  size: PropTypes.string,\n  tag: PropTypes.oneOfType([PropTypes.func, PropTypes.string]),\n};\n\nconst defaultProps = {\n  tag: 'ul',\n};\n\nconst Pagination = (props) => {\n  const {\n    className,\n    cssModule,\n    size,\n    tag: Tag,\n    ...attributes\n  } = props;\n\n  const classes = mapToCssModules(classNames(\n    className,\n    'pagination',\n    {\n      [`pagination-${size}`]: !!size,\n    }\n  ), cssModule);\n\n  return (\n    <Tag {...attributes} className={classes} />\n  );\n};\n\nPagination.propTypes = propTypes;\nPagination.defaultProps = defaultProps;\n\nexport default Pagination;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport { mapToCssModules } from './utils';\n\nconst propTypes = {\n  active: PropTypes.bool,\n  children: PropTypes.node,\n  className: PropTypes.string,\n  cssModule: PropTypes.object,\n  disabled: PropTypes.bool,\n  tag: PropTypes.oneOfType([PropTypes.func, PropTypes.string]),\n};\n\nconst defaultProps = {\n  tag: 'li',\n};\n\nconst PaginationItem = (props) => {\n  const {\n    active,\n    className,\n    cssModule,\n    disabled,\n    tag: Tag,\n    ...attributes\n  } = props;\n\n  const classes = mapToCssModules(classNames(\n    className,\n    'page-item',\n    {\n      active,\n      disabled,\n    }\n  ), cssModule);\n\n  return (\n    <Tag {...attributes} className={classes} />\n  );\n};\n\nPaginationItem.propTypes = propTypes;\nPaginationItem.defaultProps = defaultProps;\n\nexport default PaginationItem;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport { mapToCssModules } from './utils';\n\nconst propTypes = {\n  'aria-label': PropTypes.string,\n  children: PropTypes.node,\n  className: PropTypes.string,\n  cssModule: PropTypes.object,\n  next: PropTypes.bool,\n  previous: PropTypes.bool,\n  tag: PropTypes.oneOfType([PropTypes.func, PropTypes.string]),\n};\n\nconst defaultProps = {\n  tag: 'a',\n};\n\nconst PaginationLink = (props) => {\n  const {\n    className,\n    cssModule,\n    next,\n    previous,\n    tag: Tag,\n    ...attributes\n  } = props;\n\n  const classes = mapToCssModules(classNames(\n    className,\n    'page-link'\n  ), cssModule);\n\n  let defaultAriaLabel;\n  if (previous) {\n    defaultAriaLabel = 'Previous';\n  } else if (next) {\n    defaultAriaLabel = 'Next';\n  }\n  const ariaLabel = props['aria-label'] || defaultAriaLabel;\n\n  let defaultCaret;\n  if (previous) {\n    defaultCaret = '\\u00ab';\n  } else if (next) {\n    defaultCaret = '\\u00bb';\n  }\n\n  let children = props.children;\n  if (children && Array.isArray(children) && children.length === 0) {\n    children = null;\n  }\n\n  if (previous || next) {\n    children = [\n      <span\n        aria-hidden=\"true\"\n        key=\"caret\"\n      >\n        {children || defaultCaret}\n      </span>,\n      <span\n        className=\"sr-only\"\n        key=\"sr\"\n      >\n        {ariaLabel}\n      </span>,\n    ];\n  }\n\n  return (\n    <Tag\n      {...attributes}\n      className={classes}\n      aria-label={ariaLabel}\n    >\n      {children}\n    </Tag>\n  );\n};\n\nPaginationLink.propTypes = propTypes;\nPaginationLink.defaultProps = defaultProps;\n\nexport default PaginationLink;\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport { mapToCssModules, omit } from './utils';\n\nconst propTypes = {\n  tag: PropTypes.oneOfType([PropTypes.func, PropTypes.string]),\n  activeTab: PropTypes.any,\n  className: PropTypes.string,\n  cssModule: PropTypes.object,\n};\n\nconst defaultProps = {\n  tag: 'div',\n};\n\nconst childContextTypes = {\n  activeTabId: PropTypes.any\n};\n\nexport default class TabContent extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      activeTab: this.props.activeTab\n    };\n  }\n  getChildContext() {\n    return {\n      activeTabId: this.state.activeTab\n    };\n  }\n  componentWillReceiveProps(nextProps) {\n    if (this.state.activeTab !== nextProps.activeTab) {\n      this.setState({\n        activeTab: nextProps.activeTab\n      });\n    }\n  }\n  render() {\n    const {\n      className,\n      cssModule,\n      tag: Tag,\n    } = this.props;\n\n    const attributes = omit(this.props, Object.keys(propTypes));\n\n    const classes = mapToCssModules(classNames('tab-content', className), cssModule);\n\n    return (\n      <Tag {...attributes} className={classes} />\n    );\n  }\n}\nTabContent.propTypes = propTypes;\nTabContent.defaultProps = defaultProps;\nTabContent.childContextTypes = childContextTypes;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport { mapToCssModules } from './utils';\n\nconst propTypes = {\n  tag: PropTypes.oneOfType([PropTypes.func, PropTypes.string]),\n  className: PropTypes.string,\n  cssModule: PropTypes.object,\n  tabId: PropTypes.any,\n};\n\nconst defaultProps = {\n  tag: 'div',\n};\n\nconst contextTypes = {\n  activeTabId: PropTypes.any\n};\n\nexport default function TabPane(props, context) {\n  const {\n    className,\n    cssModule,\n    tabId,\n    tag: Tag,\n    ...attributes\n  } = props;\n  const classes = mapToCssModules(classNames('tab-pane', className, { active: tabId === context.activeTabId }), cssModule);\n  return (\n    <Tag {...attributes} className={classes} />\n  );\n}\nTabPane.propTypes = propTypes;\nTabPane.defaultProps = defaultProps;\nTabPane.contextTypes = contextTypes;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport { mapToCssModules } from './utils';\n\nconst propTypes = {\n  tag: PropTypes.oneOfType([PropTypes.func, PropTypes.string]),\n  fluid: PropTypes.bool,\n  className: PropTypes.string,\n  cssModule: PropTypes.object,\n};\n\nconst defaultProps = {\n  tag: 'div'\n};\n\nconst Jumbotron = (props) => {\n  const {\n    className,\n    cssModule,\n    tag: Tag,\n    fluid,\n    ...attributes\n  } = props;\n\n  const classes = mapToCssModules(classNames(\n    className,\n    'jumbotron',\n    fluid ? 'jumbotron-fluid' : false\n  ), cssModule);\n\n  return (\n    <Tag {...attributes} className={classes} />\n  );\n};\n\nJumbotron.propTypes = propTypes;\nJumbotron.defaultProps = defaultProps;\n\nexport default Jumbotron;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport { mapToCssModules } from './utils';\nimport Fade from './Fade';\n\nconst propTypes = {\n  children: PropTypes.node,\n  className: PropTypes.string,\n  closeClassName: PropTypes.string,\n  closeAriaLabel: PropTypes.string,\n  cssModule: PropTypes.object,\n  color: PropTypes.string,\n  isOpen: PropTypes.bool,\n  toggle: PropTypes.func,\n  tag: PropTypes.oneOfType([PropTypes.func, PropTypes.string]),\n  transition: PropTypes.shape(Fade.propTypes),\n};\n\nconst defaultProps = {\n  color: 'success',\n  isOpen: true,\n  tag: 'div',\n  closeAriaLabel: 'Close',\n  transition: {\n    ...Fade.defaultProps,\n    unmountOnExit: true,\n  },\n};\n\nfunction Alert(props) {\n  const {\n    className,\n    closeClassName,\n    closeAriaLabel,\n    cssModule,\n    tag: Tag,\n    color,\n    isOpen,\n    toggle,\n    children,\n    transition,\n    ...attributes\n  } = props;\n\n  const classes = mapToCssModules(classNames(\n    className,\n    'alert',\n    `alert-${color}`,\n    { 'alert-dismissible': toggle }\n  ), cssModule);\n\n  const closeClasses = mapToCssModules(classNames('close', closeClassName), cssModule);\n\n  return (\n    <Fade {...attributes} {...transition} tag={Tag} className={classes} in={isOpen} role=\"alert\">\n      {toggle ?\n        <button type=\"button\" className={closeClasses} aria-label={closeAriaLabel} onClick={toggle}>\n          <span aria-hidden=\"true\">&times;</span>\n        </button>\n        : null}\n      {children}\n    </Fade>\n  );\n}\n\nAlert.propTypes = propTypes;\nAlert.defaultProps = defaultProps;\n\nexport default Alert;\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport Transition from 'react-transition-group/Transition';\nimport { mapToCssModules, omit, pick, TransitionTimeouts, TransitionPropTypeKeys, TransitionStatuses } from './utils';\n\nconst propTypes = {\n  ...Transition.propTypes,\n  isOpen: PropTypes.bool,\n  children: PropTypes.oneOfType([\n    PropTypes.arrayOf(PropTypes.node),\n    PropTypes.node\n  ]),\n  tag: PropTypes.oneOfType([PropTypes.func, PropTypes.string]),\n  className: PropTypes.node,\n  navbar: PropTypes.bool,\n  cssModule: PropTypes.object,\n};\n\nconst defaultProps = {\n  ...Transition.defaultProps,\n  isOpen: false,\n  appear: false,\n  enter: true,\n  exit: true,\n  tag: 'div',\n  timeout: TransitionTimeouts.Collapse,\n};\n\nconst transitionStatusToClassHash = {\n  [TransitionStatuses.ENTERING]: 'collapsing',\n  [TransitionStatuses.ENTERED]: 'collapse show',\n  [TransitionStatuses.EXITING]: 'collapsing',\n  [TransitionStatuses.EXITED]: 'collapse',\n};\n\nfunction getTransitionClass(status) {\n  return transitionStatusToClassHash[status] || 'collapse';\n}\n\nfunction getHeight(node) {\n  return node.scrollHeight;\n}\n\nclass Collapse extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      height: null\n    };\n\n    ['onEntering', 'onEntered', 'onExit', 'onExiting', 'onExited'].forEach((name) => {\n      this[name] = this[name].bind(this);\n    });\n  }\n\n  onEntering(node, isAppearing) {\n    this.setState({ height: getHeight(node) });\n    this.props.onEntering(node, isAppearing);\n  }\n\n  onEntered(node, isAppearing) {\n    this.setState({ height: null });\n    this.props.onEntered(node, isAppearing);\n  }\n\n  onExit(node) {\n    this.setState({ height: getHeight(node) });\n    this.props.onExit(node);\n  }\n\n  onExiting(node) {\n    // getting this variable triggers a reflow\n    const _unused = node.offsetHeight; // eslint-disable-line no-unused-vars\n    this.setState({ height: 0 });\n    this.props.onExiting(node);\n  }\n\n  onExited(node) {\n    this.setState({ height: null });\n    this.props.onExited(node);\n  }\n\n  render() {\n    const {\n      tag: Tag,\n      isOpen,\n      className,\n      navbar,\n      cssModule,\n      children,\n      ...otherProps\n    } = this.props;\n\n    const { height } = this.state;\n\n    // In NODE_ENV=production the Transition.propTypes are wrapped which results in an\n    // empty object \"{}\". This is the result of the `react-transition-group` babel\n    // configuration settings. Therefore, to ensure that production builds work without\n    // error, we can either explicitly define keys or use the Transition.defaultProps.\n    // Using the Transition.defaultProps excludes any required props. Thus, the best\n    // solution is to explicitly define required props in our utilities and reference these.\n    // This also gives us more flexibility in the future to remove the prop-types\n    // dependency in distribution builds (Similar to how `react-transition-group` does).\n    // Note: Without omitting the `react-transition-group` props, the resulting child\n    // Tag component would inherit the Transition properties as attributes for the HTML\n    // element which results in errors/warnings for non-valid attributes.\n    const transitionProps = pick(otherProps, TransitionPropTypeKeys);\n    const childProps = omit(otherProps, TransitionPropTypeKeys);\n\n    return (\n      <Transition\n        {...transitionProps}\n        in={isOpen}\n        onEntering={this.onEntering}\n        onEntered={this.onEntered}\n        onExit={this.onExit}\n        onExiting={this.onExiting}\n        onExited={this.onExited}\n      >\n        {(status) => {\n          let collapseClass = getTransitionClass(status);\n          const classes = mapToCssModules(classNames(\n            className,\n            collapseClass,\n            navbar && 'navbar-collapse'\n          ), cssModule);\n          const style = height === null ? null : { height };\n          return (\n            <Tag\n              {...childProps}\n              style={{ ...childProps.style, ...style }}\n              className={classes}\n            >\n              {children}\n            </Tag>\n          );\n        }}\n      </Transition>\n    );\n  }\n}\n\nCollapse.propTypes = propTypes;\nCollapse.defaultProps = defaultProps;\nexport default Collapse;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport { mapToCssModules } from './utils';\n\nconst propTypes = {\n  tag: PropTypes.oneOfType([PropTypes.func, PropTypes.string]),\n  active: PropTypes.bool,\n  disabled: PropTypes.bool,\n  color: PropTypes.string,\n  action: PropTypes.bool,\n  className: PropTypes.any,\n  cssModule: PropTypes.object,\n};\n\nconst defaultProps = {\n  tag: 'li'\n};\n\nconst handleDisabledOnClick = (e) => {\n  e.preventDefault();\n};\n\nconst ListGroupItem = (props) => {\n  const {\n    className,\n    cssModule,\n    tag: Tag,\n    active,\n    disabled,\n    action,\n    color,\n    ...attributes\n  } = props;\n  const classes = mapToCssModules(classNames(\n    className,\n    active ? 'active' : false,\n    disabled ? 'disabled' : false,\n    action ? 'list-group-item-action' : false,\n    color ? `list-group-item-${color}` : false,\n    'list-group-item'\n  ), cssModule);\n\n  // Prevent click event when disabled.\n  if (disabled) {\n    attributes.onClick = handleDisabledOnClick;\n  }\n  return (\n    <Tag {...attributes} className={classes} />\n  );\n};\n\nListGroupItem.propTypes = propTypes;\nListGroupItem.defaultProps = defaultProps;\n\nexport default ListGroupItem;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport { mapToCssModules } from './utils';\n\nconst propTypes = {\n  tag: PropTypes.oneOfType([PropTypes.func, PropTypes.string]),\n  className: PropTypes.any,\n  cssModule: PropTypes.object,\n};\n\nconst defaultProps = {\n  tag: 'h5'\n};\n\nconst ListGroupItemHeading = (props) => {\n  const {\n    className,\n    cssModule,\n    tag: Tag,\n    ...attributes\n  } = props;\n  const classes = mapToCssModules(classNames(\n    className,\n    'list-group-item-heading'\n  ), cssModule);\n\n  return (\n    <Tag {...attributes} className={classes} />\n  );\n};\n\nListGroupItemHeading.propTypes = propTypes;\nListGroupItemHeading.defaultProps = defaultProps;\n\nexport default ListGroupItemHeading;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport { mapToCssModules } from './utils';\n\nconst propTypes = {\n  tag: PropTypes.oneOfType([PropTypes.func, PropTypes.string]),\n  className: PropTypes.any,\n  cssModule: PropTypes.object,\n};\n\nconst defaultProps = {\n  tag: 'p'\n};\n\nconst ListGroupItemText = (props) => {\n  const {\n    className,\n    cssModule,\n    tag: Tag,\n    ...attributes\n  } = props;\n  const classes = mapToCssModules(classNames(\n    className,\n    'list-group-item-text'\n  ), cssModule);\n\n  return (\n    <Tag {...attributes} className={classes} />\n  );\n};\n\nListGroupItemText.propTypes = propTypes;\nListGroupItemText.defaultProps = defaultProps;\n\nexport default ListGroupItemText;\n","import React, { Component } from 'react';\nimport Alert from './Alert';\n\nexport default class UncontrolledAlert extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = { isOpen: true };\n    this.toggle = this.toggle.bind(this);\n  }\n\n  toggle() {\n    this.setState({ isOpen: !this.state.isOpen });\n  }\n\n  render() {\n    return <Alert isOpen={this.state.isOpen} toggle={this.toggle} {...this.props} />;\n  }\n}\n","import React, { Component } from 'react';\nimport ButtonDropdown from './ButtonDropdown';\n\nexport default class UncontrolledButtonDropdown extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = { isOpen: false };\n    this.toggle = this.toggle.bind(this);\n  }\n\n  toggle() {\n    this.setState({ isOpen: !this.state.isOpen });\n  }\n\n  render() {\n    return <ButtonDropdown isOpen={this.state.isOpen} toggle={this.toggle} {...this.props} />;\n  }\n}\n","import React, { Component } from 'react';\nimport Dropdown from './Dropdown';\n\nexport default class UncontrolledDropdown extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = { isOpen: false };\n    this.toggle = this.toggle.bind(this);\n  }\n\n  toggle() {\n    this.setState({ isOpen: !this.state.isOpen });\n  }\n\n  render() {\n    return <Dropdown isOpen={this.state.isOpen} toggle={this.toggle} {...this.props} />;\n  }\n}\n","import React, { Component } from 'react';\nimport Tooltip from './Tooltip';\n\nexport default class UncontrolledTooltip extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = { isOpen: false };\n    this.toggle = this.toggle.bind(this);\n  }\n\n  toggle() {\n    this.setState({ isOpen: !this.state.isOpen });\n  }\n\n  render() {\n    return <Tooltip isOpen={this.state.isOpen} toggle={this.toggle} {...this.props} />;\n  }\n}\n","\n/**\n * Expose `isUrl`.\n */\n\nmodule.exports = isUrl;\n\n/**\n * RegExps.\n * A URL must match #1 and then at least one of #2/#3.\n * Use two levels of REs to avoid REDOS.\n */\n\nvar protocolAndDomainRE = /^(?:\\w+:)?\\/\\/(\\S+)$/;\n\nvar localhostDomainRE = /^localhost[\\:?\\d]*(?:[^\\:?\\d]\\S*)?$/\nvar nonLocalhostDomainRE = /^[^\\s\\.]+\\.\\S{2,}$/;\n\n/**\n * Loosely validate a URL `string`.\n *\n * @param {String} string\n * @return {Boolean}\n */\n\nfunction isUrl(string){\n  if (typeof string !== 'string') {\n    return false;\n  }\n\n  var match = string.match(protocolAndDomainRE);\n  if (!match) {\n    return false;\n  }\n\n  var everythingAfterProtocol = match[1];\n  if (!everythingAfterProtocol) {\n    return false;\n  }\n\n  if (localhostDomainRE.test(everythingAfterProtocol) ||\n      nonLocalhostDomainRE.test(everythingAfterProtocol)) {\n    return true;\n  }\n\n  return false;\n}\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Modal, ModalHeader, ModalBody } from 'reactstrap';\nimport moment from 'moment';\nimport { gettext, fileServerRoot } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport Loading from '../loading';\n\nimport '../../css/commit-details.css';\n\nconst propTypes = {\n  repoID: PropTypes.string.isRequired,\n  commitID: PropTypes.string.isRequired,\n  commitTime: PropTypes.string.isRequired,\n  toggleDialog: PropTypes.func.isRequired\n};\n\nclass CommitDetails extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      isLoading: true,\n      errorMsg: '',\n    };\n  }\n\n  componentDidMount() {\n    const {repoID, commitID} = this.props;\n    seafileAPI.getCommitDetails(repoID, commitID).then((res) => {\n      this.setState({\n        isLoading: false,\n        errorMsg: '',\n        commitDetails: res.data\n      });\n    }).catch((error) => {\n      let errorMsg = Utils.getErrorMsg(error);\n      this.setState({\n        isLoading: false,\n        errorMsg: errorMsg\n      });\n    });\n  }\n\n  render() {\n    const { toggleDialog, commitTime} = this.props;\n    return (\n      <Modal isOpen={true} centered={true} toggle={toggleDialog}>\n        <ModalHeader toggle={toggleDialog}>{gettext('Modification Details')}</ModalHeader>\n        <ModalBody>\n          <p className=\"small\">{moment(this.props.commitTime).format('YYYY-MM-DD HH:mm:ss')}</p>\n          <Content data={this.state} />\n        </ModalBody>\n      </Modal>\n    );\n  }\n}\n\nclass Content extends React.Component {\n\n  renderDetails = (data) => {\n    const detailsData = [\n      {type: 'new', title: gettext('New files')},\n      {type: 'removed', title: gettext('Deleted files')},\n      {type: 'renamed', title: gettext('Renamed or Moved files')},\n      {type: 'modified', title: gettext('Modified files')},\n      {type: 'newdir', title: gettext('New directories')},\n      {type: 'deldir', title: gettext('Deleted directories')}\n    ];\n\n    let showDesc = true;\n    for (let i = 0, len = detailsData.length; i < len; i++) {\n      if (data[detailsData[i].type].length) {\n        showDesc = false;\n        break;\n      }\n    }\n    if (showDesc) {\n      return <p>{data.cmt_desc}</p>;\n    }\n\n    return (\n      <React.Fragment>\n        {detailsData.map((item, index) => {\n          if (!data[item.type].length) {\n            return;\n          }\n          return (\n            <React.Fragment key={index}>\n              <h6>{item.title}</h6>\n              <ul>\n                {\n                  data[item.type].map((item, index) => {\n                    return <li key={index} dangerouslySetInnerHTML={{__html: item}} className=\"commit-detail-item\"></li>;\n                  })\n                }\n              </ul>\n            </React.Fragment>\n          );\n        })}\n      </React.Fragment>\n    );\n  }\n\n  render() {\n    const {isLoading, errorMsg, commitDetails} = this.props.data;\n\n    if (isLoading) {\n      return <Loading />;\n    }\n\n    if (errorMsg) {\n      return <p className=\"error mt-4 text-center\">{errorMsg}</p>;\n    }\n\n    return this.renderDetails(commitDetails);\n  }\n}\n\nCommitDetails.propTypes = propTypes;\n\nexport default CommitDetails;\n","import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport { withTranslation } from 'react-i18next';\n\nvar HeaderList = /*#__PURE__*/function (_React$PureComponent) {\n  _inherits(HeaderList, _React$PureComponent);\n\n  function HeaderList(props) {\n    var _this;\n\n    _classCallCheck(this, HeaderList);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(HeaderList).call(this, props));\n\n    _this.handleClick = function (event) {\n      if (_this.props.disabled) return;\n\n      var container = _this.getContainer();\n\n      if (container.contains(event.target)) {\n        _this.toggle();\n      } else {\n        if (_this.state.dropdownOpen) {\n          _this.setState({\n            dropdownOpen: !_this.state.dropdownOpen\n          });\n        }\n      }\n    };\n\n    _this.toggle = function () {\n      _this.setState({\n        dropdownOpen: !_this.state.dropdownOpen\n      });\n    };\n\n    _this.state = {\n      dropdownOpen: false\n    };\n    return _this;\n  }\n\n  _createClass(HeaderList, [{\n    key: \"getContainer\",\n    value: function getContainer() {\n      return ReactDOM.findDOMNode(this);\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      document.addEventListener('click', this.handleClick);\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      document.removeEventListener('click', this.handleClick);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      /*\n      *  here need to use click event in DropdownItem instead of onMouseDown, reactStrap listen click, keyUp, to trigger toggle function,\n      *  if we listen mouseDown event the tool bar will render,the position of the component will change\n      *  and then the click event of this component will not be triggered\n      * */\n      return React.createElement(\"div\", {\n        className: 'header-list'\n      }, React.createElement(\"div\", {\n        className: 'list-body ' + (this.props.disabled ? '' : 'header-list-body-hover') + (this.state.dropdownOpen ? ' header-list-body-highlight' : '')\n      }, React.createElement(\"div\", {\n        className: 'list-title'\n      }, this.props.t(this.props.headerType)), React.createElement(\"div\", {\n        className: 'list-caret'\n      }, React.createElement(\"i\", {\n        className: this.state.dropdownOpen ? 'iconfont icon-caret-up' : 'iconfont icon-drop-down'\n      }))), this.state.dropdownOpen && React.createElement(\"div\", {\n        className: 'list-dropdown'\n      }, React.createElement(\"div\", {\n        className: 'list-dropdown-item',\n        onClick: function onClick(event) {\n          _this2.props.onClickHeader(event, 'paragraph');\n        }\n      }, this.props.t('paragraph')), React.createElement(\"div\", {\n        className: 'list-dropdown-item',\n        onClick: function onClick(event) {\n          _this2.props.onClickHeader(event, 'header_one');\n        }\n      }, this.props.t('header_one')), React.createElement(\"div\", {\n        className: 'list-dropdown-item',\n        onClick: function onClick(event) {\n          _this2.props.onClickHeader(event, 'header_two');\n        }\n      }, this.props.t('header_two')), React.createElement(\"div\", {\n        className: 'list-dropdown-item',\n        onClick: function onClick(event) {\n          _this2.props.onClickHeader(event, 'header_three');\n        }\n      }, this.props.t('header_three')), React.createElement(\"div\", {\n        className: 'list-dropdown-item',\n        onClick: function onClick(event) {\n          _this2.props.onClickHeader(event, 'header_four');\n        }\n      }, this.props.t('header_four')), React.createElement(\"div\", {\n        className: 'list-dropdown-item',\n        onClick: function onClick(event) {\n          _this2.props.onClickHeader(event, 'header_five');\n        }\n      }, this.props.t('header_five')), React.createElement(\"div\", {\n        className: 'list-dropdown-item',\n        onClick: function onClick(event) {\n          _this2.props.onClickHeader(event, 'header_six');\n        }\n      }, this.props.t('header_six'))));\n    }\n  }]);\n\n  return HeaderList;\n}(React.PureComponent);\n\nexport default withTranslation('seafile-editor')(HeaderList);","import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport React from 'react';\n\nvar ButtonGroup = /*#__PURE__*/function (_React$PureComponent) {\n  _inherits(ButtonGroup, _React$PureComponent);\n\n  function ButtonGroup() {\n    _classCallCheck(this, ButtonGroup);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(ButtonGroup).apply(this, arguments));\n  }\n\n  _createClass(ButtonGroup, [{\n    key: \"render\",\n    value: function render() {\n      return React.createElement(\"div\", {\n        className: 'btn-group ' + this.props.className,\n        role: 'group'\n      }, this.props.children);\n    }\n  }]);\n\n  return ButtonGroup;\n}(React.PureComponent);\n\nexport default ButtonGroup;","import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport React from 'react';\nimport { Tooltip } from 'reactstrap';\nimport { withTranslation } from 'react-i18next';\n\nvar IconButton = /*#__PURE__*/function (_React$Component) {\n  _inherits(IconButton, _React$Component);\n\n  function IconButton(props) {\n    var _this;\n\n    _classCallCheck(this, IconButton);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(IconButton).call(this, props));\n\n    _this.toggle = function () {\n      if (_this.props.disabled || _this.state.isFreezed && !_this.state.tooltipOpen) return;\n\n      _this.setState({\n        tooltipOpen: !_this.state.tooltipOpen,\n        isFreezed: true\n      });\n\n      var that = _assertThisInitialized(_this);\n\n      setTimeout(function () {\n        that.setState({\n          isFreezed: false\n        });\n      }, 100);\n    };\n\n    _this.getClassName = function () {\n      var className = _this.props.isRichEditor ? 'rich-icon-btn ' + (_this.props.disabled ? 'rich-icon-btn-disabled' : 'rich-icon-btn-hover') : 'btn btn-icon btn-secondary btn-active';\n      className = className + ' ' + (_this.props.className || '');\n      return className;\n    };\n\n    _this.state = {\n      tooltipOpen: false,\n      isFreezed: false\n    };\n    return _this;\n  }\n\n  _createClass(IconButton, [{\n    key: \"shouldComponentUpdate\",\n    value: function shouldComponentUpdate(nextProps, nextState) {\n      if (this.props.disabled !== nextProps.disabled) {\n        this.setState({\n          tooltipOpen: false\n        });\n        return true;\n      } // only render iconButton when the button is active or show show tooltip\n\n\n      if (nextState.tooltipOpen === this.state.tooltipOpen && nextProps.isActive === this.props.isActive) {\n        return false;\n      }\n\n      return true;\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var className = this.getClassName();\n      return React.createElement(\"button\", {\n        id: this.props.id,\n        type: 'button',\n        onClick: this.props.disabled ? null : this.props.onClick,\n        onMouseDown: this.props.disabled ? null : this.props.onMouseDown,\n        className: className,\n        \"data-active\": this.props.isActive || false,\n        disabled: this.props.disabled\n      }, React.createElement(\"i\", {\n        className: this.props.icon\n      }), React.createElement(Tooltip, {\n        toggle: this.toggle,\n        delay: {\n          show: 0,\n          hide: 0\n        },\n        target: this.props.id,\n        placement: \"bottom\",\n        isOpen: this.state.tooltipOpen\n      }, this.props.text));\n    }\n  }]);\n\n  return IconButton;\n}(React.Component);\n\nexport default withTranslation('seafile-editor')(IconButton);","import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport React, { Fragment } from 'react';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter } from 'reactstrap';\nimport { withTranslation } from 'react-i18next';\nimport { EditorUtils } from '../editor/editor-utils/common-editor-utils';\n\nvar AddLinkDialog = /*#__PURE__*/function (_React$PureComponent) {\n  _inherits(AddLinkDialog, _React$PureComponent);\n\n  function AddLinkDialog(props) {\n    var _this;\n\n    _classCallCheck(this, AddLinkDialog);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(AddLinkDialog).call(this, props));\n\n    _this.setInitialValue = function () {\n      var text = _this.editorUtils.getSelectedText();\n\n      if (_this.isLinkActive) {\n        var linkNode = _this.editorUtils.getCurrentLinkNode();\n\n        _this.setState({\n          title: _this.editorUtils.getLinkText(linkNode),\n          url: linkNode.data.href\n        });\n      } else {\n        _this.setState({\n          title: text,\n          url: ''\n        });\n      }\n    };\n\n    _this.handleUrlChange = function (event) {\n      _this.setState({\n        url: event.target.value\n      });\n    };\n\n    _this.handleTitleChange = function (event) {\n      _this.setState({\n        title: event.target.value\n      });\n    };\n\n    _this.handleSubmit = function (event) {\n      event.preventDefault();\n      if (_this.state.title.length === 0 || _this.state.url.length === 0) return;\n\n      if (!_this.isLinkActive) {\n        _this.editorUtils.insertLink({\n          text: _this.state.title,\n          url: _this.state.url,\n          selection: _this.editorSelection\n        });\n      } else {\n        _this.editorUtils.setLink({\n          text: _this.state.title,\n          url: _this.state.url,\n          selection: _this.editorSelection\n        });\n      }\n\n      _this.props.toggleLinkDialog();\n    };\n\n    _this.editorUtils = new EditorUtils(window.editor);\n    _this.isLinkActive = _this.editorUtils.isLinkActive();\n    _this.editorSelection = null;\n    _this.state = {\n      url: '',\n      title: ''\n    };\n    return _this;\n  }\n\n  _createClass(AddLinkDialog, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.editorSelection = window.editor.selection;\n    }\n  }, {\n    key: \"componentWillMount\",\n    value: function componentWillMount() {\n      this.setInitialValue();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(Modal, {\n        isOpen: true,\n        toggle: this.props.toggleLinkDialog,\n        className: this.props.className\n      }, React.createElement(ModalHeader, {\n        toggle: this.props.toggleLinkDialog\n      }, this.props.t('insert_link')), React.createElement(ModalBody, null, React.createElement(Fragment, null, React.createElement(\"div\", {\n        className: \"form-group\"\n      }, React.createElement(\"label\", {\n        className: \"form-check-label\",\n        htmlFor: \"addLink\"\n      }, this.props.t('link_address')), React.createElement(\"input\", {\n        type: \"url\",\n        className: \"form-control\",\n        id: \"addLink\",\n        value: this.state.url,\n        onChange: this.handleUrlChange\n      })), React.createElement(\"div\", {\n        className: \"form-group\"\n      }, React.createElement(\"label\", {\n        className: \"form-check-label\",\n        htmlFor: \"addTitle\"\n      }, this.props.t('link_title')), React.createElement(\"input\", {\n        type: \"text\",\n        className: \"form-control\",\n        id: \"addTitle\",\n        value: this.state.title,\n        onChange: this.handleTitleChange\n      })))), React.createElement(ModalFooter, null, React.createElement(Button, {\n        color: \"secondary\",\n        onClick: this.props.toggleLinkDialog\n      }, this.props.t('cancel')), React.createElement(Button, {\n        color: \"primary\",\n        disabled: false,\n        onClick: this.handleSubmit\n      }, this.props.t('add_link'))));\n    }\n  }]);\n\n  return AddLinkDialog;\n}(React.PureComponent);\n\nexport default withTranslation('seafile-editor')(AddLinkDialog);","import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport React from 'react';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter, Form, FormGroup, Label, Input } from 'reactstrap';\nimport { withTranslation } from 'react-i18next';\n\nvar AddImageDialog = /*#__PURE__*/function (_React$PureComponent) {\n  _inherits(AddImageDialog, _React$PureComponent);\n\n  function AddImageDialog(props) {\n    var _this;\n\n    _classCallCheck(this, AddImageDialog);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(AddImageDialog).call(this, props));\n\n    _this.handleUrlChange = function (event) {\n      _this.setState({\n        url: event.target.value\n      });\n    };\n\n    _this.handleSubmit = function (event) {\n      _this.props.insertImage({\n        url: _this.state.url,\n        selection: _this.editorSelection\n      });\n\n      _this.props.onToggleImageDialog();\n    };\n\n    _this.state = {\n      url: ''\n    };\n    _this.editorSelection = null;\n    return _this;\n  }\n\n  _createClass(AddImageDialog, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.editorSelection = window.editor.selection;\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(Modal, {\n        isOpen: true,\n        toggle: this.props.onToggleImageDialog,\n        className: this.props.className\n      }, React.createElement(ModalHeader, {\n        toggle: this.props.onToggleImageDialog\n      }, this.props.t('insert_image')), React.createElement(ModalBody, null, React.createElement(Form, null, React.createElement(FormGroup, null, React.createElement(Label, {\n        for: \"columnName\"\n      }, this.props.t('image_address')), React.createElement(Input, {\n        id: \"columnName\",\n        value: this.state.value,\n        onChange: this.handleUrlChange,\n        autoFocus: true\n      })))), React.createElement(ModalFooter, null, React.createElement(Button, {\n        color: \"secondary\",\n        onClick: this.props.onToggleImageDialog\n      }, this.props.t('cancel')), React.createElement(Button, {\n        color: \"primary\",\n        disabled: this.state.url.length === 0,\n        onClick: this.handleSubmit\n      }, this.props.t('submit')), ' '));\n    }\n  }]);\n\n  return AddImageDialog;\n}(React.PureComponent);\n\nexport default withTranslation('seafile-editor')(AddImageDialog);","import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport React, { Fragment } from 'react';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter, Input } from 'reactstrap';\nimport { withTranslation } from 'react-i18next';\nimport { Editor } from 'slate';\nimport { EditorUtils } from '../editor/editor-utils/common-editor-utils';\n\nvar AddFormulaDialog = /*#__PURE__*/function (_React$PureComponent) {\n  _inherits(AddFormulaDialog, _React$PureComponent);\n\n  function AddFormulaDialog(props) {\n    var _this;\n\n    _classCallCheck(this, AddFormulaDialog);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(AddFormulaDialog).call(this, props));\n\n    _this.setInitialValue = function () {\n      var nodes = Editor.match(window.editor, window.editor.selection, {\n        type: 'formula'\n      });\n\n      if (nodes) {\n        var data = nodes[0].data;\n\n        _this.setState({\n          formula: data.formula\n        });\n\n        _this.formulaNode = nodes;\n      }\n    };\n\n    _this.handleFormulaChange = function (event) {\n      _this.renderFormula(event.target.value);\n\n      _this.setState({\n        formula: event.target.value\n      });\n    };\n\n    _this.renderFormula = function (formula) {\n      _this.formulaPreviewer.innerHTML = '';\n      var dom = window.MathJax.tex2svg(formula);\n\n      _this.formulaPreviewer.appendChild(dom);\n    };\n\n    _this.handleSubmit = function (event) {\n      event.preventDefault();\n      var formula = _this.state.formula;\n\n      if (_this.formulaNode) {\n        _this.editorUtils.setFormula({\n          formula: formula,\n          at: _this.formulaNode[1]\n        });\n      } else {\n        _this.editorUtils.onAddFormula({\n          formula: formula,\n          at: _this.editorSelection\n        });\n      }\n\n      _this.props.toggleFormulaDialog();\n    };\n\n    _this.editorUtils = new EditorUtils(window.editor);\n    _this.state = {\n      formula: ''\n    };\n    _this.formulaNode = null;\n    _this.editorSelection = null;\n    return _this;\n  }\n\n  _createClass(AddFormulaDialog, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.editorSelection = window.editor.selection;\n\n      if (this.formulaNode) {\n        this.renderFormula(this.state.formula);\n      }\n    }\n  }, {\n    key: \"componentWillMount\",\n    value: function componentWillMount() {\n      this.setInitialValue();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      return React.createElement(Modal, {\n        isOpen: true,\n        toggle: this.props.toggleFormulaDialog,\n        className: this.props.className\n      }, React.createElement(ModalHeader, {\n        toggle: this.props.toggleFormulaDialog\n      }, this.props.t('insert_formula')), React.createElement(ModalBody, null, React.createElement(Fragment, null, React.createElement(\"div\", {\n        className: \"form-group\"\n      }, React.createElement(\"label\", {\n        className: \"form-check-label\"\n      }, this.props.t('formula')), React.createElement(Input, {\n        type: \"textarea\",\n        className: \"form-control\",\n        value: this.state.formula,\n        onChange: this.handleFormulaChange\n      })), React.createElement(\"div\", {\n        ref: function ref(_ref) {\n          return _this2.formulaPreviewer = _ref;\n        },\n        className: \"formula-preview\"\n      }))), React.createElement(ModalFooter, null, React.createElement(Button, {\n        color: \"secondary\",\n        onClick: this.props.toggleFormulaDialog\n      }, this.props.t('cancel')), React.createElement(Button, {\n        color: \"primary\",\n        disabled: false,\n        onClick: this.handleSubmit\n      }, this.props.t('insert_formula'))));\n    }\n  }]);\n\n  return AddFormulaDialog;\n}(React.PureComponent);\n\nexport default withTranslation('seafile-editor')(AddFormulaDialog);","import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport IconButton from './icon-button';\nimport ButtonGroup from './button-group';\nimport { withTranslation } from 'react-i18next';\n\nvar TableToolBar = /*#__PURE__*/function (_React$PureComponent) {\n  _inherits(TableToolBar, _React$PureComponent);\n\n  function TableToolBar() {\n    _classCallCheck(this, TableToolBar);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(TableToolBar).apply(this, arguments));\n  }\n\n  _createClass(TableToolBar, [{\n    key: \"render\",\n    value: function render() {\n      var _this = this;\n\n      return React.createElement(ButtonGroup, {\n        className: 'editor-btn-group'\n      }, React.createElement(DropList, {\n        icon: 'iconfont icon-left-alignment',\n        items: [{\n          handle: function handle(e) {\n            _this.props.onSetAlign(e, 'left');\n          },\n          icon: 'iconfont icon-left-alignment',\n          text: this.props.t('left')\n        }, {\n          handle: function handle(e) {\n            _this.props.onSetAlign(e, 'center');\n          },\n          icon: 'iconfont icon-center-horizontally',\n          text: this.props.t('center')\n        }, {\n          handle: function handle(e) {\n            _this.props.onSetAlign(e, 'right');\n          },\n          icon: 'icon icon-align-right',\n          text: this.props.t('right')\n        }]\n      }), React.createElement(DropList, {\n        icon: 'iconfont icon-column',\n        items: [{\n          handle: this.props.onInsertColumn,\n          text: this.props.t('Insert_Column')\n        }, {\n          handle: this.props.onRemoveColumn,\n          text: this.props.t('Remove_Column')\n        }]\n      }), React.createElement(DropList, {\n        icon: 'iconfont icon-row',\n        items: [{\n          handle: this.props.onInsertRow,\n          text: this.props.t('Insert_Row')\n        }, {\n          handle: this.props.onRemoveRow,\n          text: this.props.t('Remove_Row')\n        }]\n      }), React.createElement(IconButton, {\n        disabled: false,\n        isRichEditor: true,\n        text: this.props.t('remove_table'),\n        id: 'removeTable',\n        icon: 'iconfont icon-delete-table',\n        onMouseDown: this.props.onRemoveTable\n      }));\n    }\n  }]);\n\n  return TableToolBar;\n}(React.PureComponent);\n\nvar DropList = /*#__PURE__*/function (_React$PureComponent2) {\n  _inherits(DropList, _React$PureComponent2);\n\n  function DropList(props) {\n    var _this2;\n\n    _classCallCheck(this, DropList);\n\n    _this2 = _possibleConstructorReturn(this, _getPrototypeOf(DropList).call(this, props));\n\n    _this2.handleClick = function (event) {\n      if (_this2.props.disabled) return;\n\n      var container = _this2.getContainer();\n\n      if (container.contains(event.target)) {\n        _this2.toggle();\n      } else {\n        if (_this2.state.dropdownOpen) {\n          _this2.setState({\n            dropdownOpen: !_this2.state.dropdownOpen\n          });\n        }\n      }\n    };\n\n    _this2.toggle = function () {\n      _this2.setState({\n        dropdownOpen: !_this2.state.dropdownOpen\n      });\n    };\n\n    _this2.state = {\n      dropdownOpen: false\n    };\n    return _this2;\n  }\n\n  _createClass(DropList, [{\n    key: \"getContainer\",\n    value: function getContainer() {\n      return ReactDOM.findDOMNode(this);\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      document.addEventListener('click', this.handleClick);\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      document.removeEventListener('click', this.handleClick);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var items = [];\n      this.props.items.forEach(function (item, index) {\n        items.push(React.createElement(\"button\", {\n          key: 'dropdown-item' + index,\n          onMouseDown: item.handle,\n          className: 'dropdown-item'\n        }, item.icon ? React.createElement(\"i\", {\n          className: item.icon,\n          style: {\n            marginRight: '6px'\n          }\n        }) : null, item.text));\n      });\n      return React.createElement(\"div\", {\n        className: 'custom-dropdown-list'\n      }, React.createElement(\"div\", {\n        id: 'list_toggle',\n        className: 'dropdown-list-toggle'\n      }, React.createElement(\"i\", {\n        className: this.props.icon,\n        style: {\n          marginRight: '3px'\n        }\n      }), React.createElement(\"i\", {\n        className: this.state.dropdownOpen ? 'iconfont icon-caret-up' : 'iconfont icon-drop-down'\n      })), this.state.dropdownOpen && React.createElement(\"div\", {\n        role: 'menu',\n        className: 'custom-dropdown-menu dropdown-menu'\n      }, items));\n    }\n  }]);\n\n  return DropList;\n}(React.PureComponent);\n\nexport default withTranslation('seafile-editor')(TableToolBar);","import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport React from 'react';\nimport { Dropdown, DropdownToggle, DropdownMenu, DropdownItem, Tooltip, Label, Input } from 'reactstrap';\nimport { withTranslation } from 'react-i18next';\n\nvar UploadImg = /*#__PURE__*/function (_React$Component) {\n  _inherits(UploadImg, _React$Component);\n\n  function UploadImg() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, UploadImg);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(UploadImg)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      dropdownOpen: false,\n      tooltipOpen: false\n    };\n\n    _this.imgtoggle = function () {\n      _this.setState({\n        dropdownOpen: !_this.state.dropdownOpen\n      });\n    };\n\n    _this.toggle = function () {\n      if (_this.props.disabled) {\n        _this.setState({\n          tooltipOpen: false\n        });\n\n        return;\n      }\n\n      _this.setState({\n        tooltipOpen: !_this.state.tooltipOpen\n      });\n    };\n\n    _this.uploadLocalImage = function (event) {\n      if (window.editor.editorApi.uploadLocalImage) {\n        window.editor.editorApi.uploadLocalImage(event.target.files[0]).then(function (res) {\n          _this.props.onInsertImage({\n            url: res\n          });\n        });\n      }\n    };\n\n    _this.handleFileChange = function (event) {\n      _this.uploadLocalImage(event);\n\n      _this.setState({\n        dropdownOpen: false\n      });\n    };\n\n    _this.onInputFile = function (event) {\n      event.target.value = null;\n      event.nativeEvent.stopImmediatePropagation();\n      event.stopPropagation();\n    };\n\n    return _this;\n  }\n\n  _createClass(UploadImg, [{\n    key: \"render\",\n    value: function render() {\n      var t = this.props.t;\n      return React.createElement(React.Fragment, null, React.createElement(Dropdown, {\n        isOpen: this.state.dropdownOpen,\n        toggle: this.imgtoggle,\n        className: this.props.disabled ? 'upload-localimg upload-localimg-disabled' : 'upload-localimg upload-localimg-hover'\n      }, React.createElement(DropdownToggle, {\n        id: this.props.id,\n        disabled: this.props.disabled\n      }, React.createElement(\"i\", {\n        className: \"iconfont icon-image\"\n      }), React.createElement(Tooltip, {\n        toggle: this.toggle,\n        delay: {\n          show: 0,\n          hide: 0\n        },\n        target: this.props.id,\n        placement: \"bottom\",\n        isOpen: this.state.tooltipOpen\n      }, t('insert_image'))), React.createElement(DropdownMenu, null, React.createElement(DropdownItem, {\n        onClick: this.props.onToggleImageDialog\n      }, t('insert_network_image')), !this.props.isSimpleEditor && React.createElement(DropdownItem, {\n        onMouseDown: this.props.insertRepoFile\n      }, t('Insert_library_image')), React.createElement(DropdownItem, {\n        className: \"image-uploader-btn\"\n      }, React.createElement(Label, {\n        className: \"image-uploader-label\",\n        for: \"image-uploader\",\n        onClick: this.onInputFile\n      }, t('upload_local_image')), React.createElement(Input, {\n        type: \"file\",\n        accept: \"image/*\",\n        onChange: this.handleFileChange,\n        onClick: this.onInputFile,\n        className: \"image-uploader\",\n        id: \"image-uploader\"\n      })))));\n    }\n  }]);\n\n  return UploadImg;\n}(React.Component);\n\nexport default withTranslation('seafile-editor')(UploadImg);","import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport React from 'react';\nimport HeaderList from '../components/topbar-component/header-list';\nimport ButtonGroup from '../components/topbar-component/button-group';\nimport IconButton from '../components/topbar-component/icon-button';\nimport { withTranslation } from 'react-i18next';\nimport AddLinkDialog from './add-link-dialog';\nimport AddImageDialog from './add-image-dialog';\nimport AddFormulaDialog from './add-formula-dialog';\nimport TableToolBar from './topbar-component/table-toolbar';\nimport { EditorUtils } from '../editor/editor-utils/common-editor-utils';\nimport UploadImg from './topbar-component/upload-img'; // import InsertFile from './topbarcomponent/insertFile';\n\nvar ToolBar = /*#__PURE__*/function (_React$Component) {\n  _inherits(ToolBar, _React$Component);\n\n  function ToolBar(props) {\n    var _this;\n\n    _classCallCheck(this, ToolBar);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(ToolBar).call(this, props));\n\n    _this.onToggleLink = function (event) {\n      var isLinkActive = _this.editorUtils.isLinkActive();\n\n      if (!isLinkActive) {\n        _this.props.onToggleLinkDialog();\n\n        return;\n      } else {\n        _this.editorUtils.unwrapLink();\n      }\n    };\n\n    _this.editor = window.editor;\n    _this.editorUtils = new EditorUtils(_this.editor);\n    return _this;\n  }\n\n  _createClass(ToolBar, [{\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var t = this.props.t;\n      var toolbarStatus = this.props.toolbarStatus;\n      var readOnly = this.props.readOnly;\n      var isTableActive = toolbarStatus.isTableActive,\n          isHeadActive = toolbarStatus.isHeadActive,\n          isCodeActive = toolbarStatus.isCodeActive,\n          isBoldActive = toolbarStatus.isBoldActive,\n          isItalicActive = toolbarStatus.isItalicActive,\n          isInlineCodeActive = toolbarStatus.isInlineCodeActive,\n          isLinkActive = toolbarStatus.isLinkActive,\n          isBlockquoteActive = toolbarStatus.isBlockquoteActive,\n          isOrderedListActive = toolbarStatus.isOrderedListActive,\n          isUnorderedListActive = toolbarStatus.isUnorderedListActive,\n          isCheckListActive = toolbarStatus.isCheckListActive,\n          isFormulaActive = toolbarStatus.isFormulaActive;\n      var isListActive = isOrderedListActive || isUnorderedListActive || isCheckListActive;\n      return React.createElement(\"div\", {\n        className: 'sf-editor-rich-menu ' + (this.props.isSimpleEditor ? '' : 'rich-menu')\n      }, React.createElement(\"div\", {\n        className: 'button-container'\n      }, !readOnly && React.createElement(\"div\", {\n        className: 'header-list-container'\n      }, React.createElement(HeaderList, {\n        disabled: isFormulaActive || isCodeActive || isTableActive,\n        headerType: toolbarStatus.headerType,\n        onClickHeader: this.editorUtils.onClickHeader\n      })), React.createElement(ButtonGroup, {\n        className: 'editor-btn-group'\n      }, React.createElement(IconButton, {\n        disabled: isFormulaActive || isCodeActive || isHeadActive,\n        isRichEditor: true,\n        text: t('bold'),\n        id: 'BOLDButton',\n        icon: 'iconfont icon-bold',\n        isActive: isBoldActive,\n        onMouseDown: function onMouseDown(event) {\n          return _this2.editorUtils.onClickMark(event, 'BOLD');\n        }\n      }), React.createElement(IconButton, {\n        disabled: isFormulaActive || isCodeActive || isHeadActive,\n        isRichEditor: true,\n        text: t('italic'),\n        id: 'ITALICButton',\n        icon: 'iconfont icon-italic',\n        isActive: isItalicActive,\n        onMouseDown: function onMouseDown(event) {\n          return _this2.editorUtils.onClickMark(event, 'ITALIC');\n        }\n      }), React.createElement(IconButton, {\n        disabled: isFormulaActive || isCodeActive || isHeadActive,\n        isRichEditor: true,\n        text: t('code'),\n        id: 'CODEButton',\n        icon: 'iconfont icon-code',\n        isActive: isInlineCodeActive,\n        onMouseDown: function onMouseDown(event) {\n          return _this2.editorUtils.onClickMark(event, 'CODE');\n        }\n      }), React.createElement(IconButton, {\n        disabled: isFormulaActive || isCodeActive || isHeadActive,\n        isRichEditor: true,\n        text: t('insert_link'),\n        id: 'linkButton',\n        icon: 'iconfont icon-link',\n        isActive: isLinkActive,\n        onMouseDown: this.onToggleLink\n      })), React.createElement(ButtonGroup, {\n        className: 'editor-btn-group'\n      }, React.createElement(IconButton, {\n        disabled: isFormulaActive || isTableActive || isCodeActive || isHeadActive,\n        isRichEditor: true,\n        text: t('quote'),\n        id: 'block-quoteButton',\n        icon: 'iconfont icon-quote-left',\n        isActive: isBlockquoteActive,\n        onMouseDown: function onMouseDown(event) {\n          return _this2.editorUtils.onClickBlock(event, 'blockquote');\n        }\n      }), React.createElement(IconButton, {\n        disabled: isFormulaActive || isTableActive || isCodeActive || isHeadActive,\n        isRichEditor: true,\n        text: t('ordered_list'),\n        id: 'ordered_listButton',\n        icon: 'iconfont icon-list-ol',\n        isActive: isOrderedListActive,\n        onMouseDown: function onMouseDown(event) {\n          return _this2.editorUtils.onClickBlock(event, 'ordered_list');\n        }\n      }), React.createElement(IconButton, {\n        disabled: isFormulaActive || isTableActive || isCodeActive || isHeadActive,\n        isRichEditor: true,\n        text: t('unordered_list'),\n        id: 'unordered_listButton',\n        icon: 'iconfont icon-list-ul',\n        isActive: isUnorderedListActive,\n        onMouseDown: function onMouseDown(event) {\n          return _this2.editorUtils.onClickBlock(event, 'unordered_list');\n        }\n      }), React.createElement(IconButton, {\n        disabled: isFormulaActive || isTableActive || isCodeActive || isHeadActive,\n        isRichEditor: true,\n        text: t('check_list_item'),\n        id: 'checkListItemButton',\n        icon: 'iconfont icon-check-square',\n        isActive: isCheckListActive,\n        onMouseDown: this.editorUtils.onToggleCheckItem\n      })), React.createElement(ButtonGroup, {\n        className: 'editor-btn-group'\n      }, React.createElement(IconButton, {\n        disabled: isFormulaActive || isTableActive || isHeadActive,\n        isRichEditor: true,\n        text: t('code_block'),\n        id: 'codeButton',\n        icon: 'iconfont icon-code-block',\n        onMouseDown: function onMouseDown(event) {\n          return _this2.editorUtils.onClickBlock(event, 'code_block');\n        },\n        isActive: isCodeActive && !readOnly\n      }), React.createElement(IconButton, {\n        disabled: isFormulaActive || isCodeActive || isTableActive || isHeadActive,\n        isRichEditor: true,\n        text: t('insert_table'),\n        id: 'tableButton',\n        icon: 'iconfont icon-table',\n        onMouseDown: this.editorUtils.onAddTable\n      }), window.canInsertFormula && React.createElement(IconButton, {\n        disabled: isFormulaActive || isCodeActive || isTableActive || isHeadActive || isListActive,\n        isRichEditor: true,\n        text: t('insert_formula'),\n        id: 'formulaButton',\n        icon: 'iconfont icon-formula',\n        onMouseDown: this.props.onToggleFormulaDialog\n      }), React.createElement(UploadImg, {\n        disabled: isFormulaActive || isCodeActive || isHeadActive,\n        text: 'insert_image',\n        id: 'insertImageButton',\n        insertRepoFile: this.props.insertRepoFile,\n        isSimpleEditor: this.props.isSimpleEditor,\n        onInsertImage: this.editorUtils.insertImage,\n        toolbarStatus: this.props.toolbarStatus,\n        onToggleImageDialog: this.props.onToggleImageDialog\n      })), isTableActive && !readOnly && React.createElement(TableToolBar, {\n        onRemoveTable: this.editorUtils.onRemoveTable,\n        onInsertColumn: this.editorUtils.onInsertColumn,\n        onRemoveColumn: this.editorUtils.onRemoveColumn,\n        onInsertRow: this.editorUtils.onInsertRow,\n        onRemoveRow: this.editorUtils.onRemoveRow,\n        onSetAlign: this.editorUtils.onSetAlign\n      })), this.props.hasSidePanel && React.createElement(\"div\", {\n        className: \"button-container\"\n      }, !this.props.isShowSidePanel && React.createElement(ButtonGroup, {\n        className: \"editor-btn-group position-absolute dropdown-menu-right\"\n      }, React.createElement(IconButton, {\n        isRichEditor: true,\n        text: t('Show_side_panel'),\n        id: \"showSidepanel\",\n        icon: \"iconfont icon-angle-double-left\",\n        isActive: false,\n        onMouseDown: this.props.toggleSidePanel\n      })), this.props.isShowSidePanel && React.createElement(ButtonGroup, {\n        className: \"editor-btn-group position-absolute dropdown-menu-right\"\n      }, React.createElement(IconButton, {\n        isRichEditor: true,\n        text: t('Hide_side_panel'),\n        id: \"hideSidepanel\",\n        icon: \"iconfont icon-angle-double-right\",\n        isActive: false,\n        onMouseDown: this.props.toggleSidePanel\n      }))), this.props.isShowLinkDialog && React.createElement(AddLinkDialog, {\n        toggleLinkDialog: this.props.onToggleLinkDialog\n      }), this.props.isShowFormulaDialog && React.createElement(AddFormulaDialog, {\n        toggleFormulaDialog: this.props.onToggleFormulaDialog\n      }), this.props.isShowImageDialog && React.createElement(AddImageDialog, {\n        onToggleImageDialog: this.props.onToggleImageDialog,\n        insertImage: this.editorUtils.insertImage\n      }));\n    }\n  }]);\n\n  return ToolBar;\n}(React.Component);\n\nexport default withTranslation('seafile-editor')(ToolBar);","import isPlainObject from 'is-plain-object'\nimport { Operation } from 'slate'\n\n/**\n * `History` objects hold all of the operations that are applied to a value, so\n * they can be undone or redone as necessary.\n */\n\nexport interface History {\n  redos: Operation[][]\n  undos: Operation[][]\n}\n\nexport const History = {\n  /**\n   * Check if a value is a `History` object.\n   */\n\n  isHistory(value: any): value is History {\n    return (\n      isPlainObject(value) &&\n      Array.isArray(value.redos) &&\n      Array.isArray(value.undos) &&\n      (value.redos.length === 0 || Operation.isOperationList(value.redos[0])) &&\n      (value.undos.length === 0 || Operation.isOperationList(value.undos[0]))\n    )\n  },\n}\n","import { Command } from 'slate'\n\nexport interface RedoCommand {\n  type: 'redo'\n}\n\nexport interface UndoCommand {\n  type: 'undo'\n}\n\nexport type HistoryCommand = RedoCommand | UndoCommand\n\nexport const HistoryCommand = {\n  /**\n   * Check if a value is a `HistoryCommand` object.\n   */\n\n  isHistoryCommand(value: any): value is HistoryCommand {\n    if (Command.isCommand(value)) {\n      switch (value.type) {\n        case 'redo':\n        case 'undo':\n          return true\n      }\n    }\n\n    return false\n  },\n}\n","import { Editor } from 'slate'\nimport { History } from './history'\n\n/**\n * Weakmaps for attaching state to the editor.\n */\n\nexport const HISTORY = new WeakMap<Editor, History>()\nexport const SAVING = new WeakMap<Editor, boolean | undefined>()\nexport const MERGING = new WeakMap<Editor, boolean | undefined>()\n\n/**\n * `HistoryEditor` contains helpers for history-enabled editors.\n */\n\nexport interface HistoryEditor extends Editor {\n  history: History\n}\n\nexport const HistoryEditor = {\n  /**\n   * Check if a value is a `HistoryEditor` object.\n   */\n\n  isHistoryEditor(value: any): value is HistoryEditor {\n    return Editor.isEditor(value) && History.isHistory(value.history)\n  },\n\n  /**\n   * Get the merge flag's current value.\n   */\n\n  isMerging(editor: Editor): boolean | undefined {\n    return MERGING.get(editor)\n  },\n\n  /**\n   * Get the saving flag's current value.\n   */\n\n  isSaving(editor: Editor): boolean | undefined {\n    return SAVING.get(editor)\n  },\n\n  /**\n   * Apply a series of changes inside a synchronous `fn`, without merging any of\n   * the new operations into previous save point in the history.\n   */\n\n  withoutMerging(editor: Editor, fn: () => void): void {\n    const prev = HistoryEditor.isMerging(editor)\n    MERGING.set(editor, false)\n    fn()\n    MERGING.set(editor, prev)\n  },\n\n  /**\n   * Apply a series of changes inside a synchronous `fn`, without saving any of\n   * their operations into the history.\n   */\n\n  withoutSaving(editor: Editor, fn: () => void): void {\n    const prev = HistoryEditor.isSaving(editor)\n    SAVING.set(editor, false)\n    fn()\n    SAVING.set(editor, prev)\n  },\n}\n","import { Editor, Command, Operation, Path } from 'slate'\n\nimport { HistoryCommand } from './history-command'\nimport { HistoryEditor } from './history-editor'\n\n/**\n * The `withHistory` plugin keeps track of the operation history of a Slate\n * editor as operations are applied to it, using undo and redo stacks.\n */\n\nexport const withHistory = (editor: Editor): HistoryEditor => {\n  const { apply, exec } = editor\n  editor.history = { undos: [], redos: [] }\n\n  editor.exec = (command: Command) => {\n    if (\n      HistoryEditor.isHistoryEditor(editor) &&\n      HistoryCommand.isHistoryCommand(command)\n    ) {\n      const { history } = editor\n      const { undos, redos } = history\n\n      if (command.type === 'redo' && redos.length > 0) {\n        const batch = redos[redos.length - 1]\n\n        HistoryEditor.withoutSaving(editor, () => {\n          Editor.withoutNormalizing(editor, () => {\n            for (const op of batch) {\n              editor.apply(op)\n            }\n          })\n        })\n\n        history.redos.pop()\n        history.undos.push(batch)\n        return\n      }\n\n      if (command.type === 'undo' && undos.length > 0) {\n        const batch = undos[undos.length - 1]\n\n        HistoryEditor.withoutSaving(editor, () => {\n          Editor.withoutNormalizing(editor, () => {\n            const inverseOps = batch.map(Operation.inverse).reverse()\n\n            for (const op of inverseOps) {\n              // If the final operation is deselecting the editor, skip it. This is\n              if (\n                op === inverseOps[inverseOps.length - 1] &&\n                op.type === 'set_selection' &&\n                op.newProperties == null\n              ) {\n                continue\n              } else {\n                editor.apply(op)\n              }\n            }\n          })\n        })\n\n        history.redos.push(batch)\n        history.undos.pop()\n        return\n      }\n    }\n\n    exec(command)\n  }\n\n  editor.apply = (op: Operation) => {\n    if (HistoryEditor.isHistoryEditor(editor)) {\n      const { operations, history } = editor\n      const { undos } = history\n      const lastBatch = undos[undos.length - 1]\n      const lastOp = lastBatch && lastBatch[lastBatch.length - 1]\n      const overwrite = shouldOverwrite(op, lastOp)\n      let save = HistoryEditor.isSaving(editor)\n      let merge = HistoryEditor.isMerging(editor)\n\n      if (save == null) {\n        save = shouldSave(op, lastOp)\n      }\n\n      if (save) {\n        if (merge == null) {\n          if (lastBatch == null) {\n            merge = false\n          } else if (operations.length !== 0) {\n            merge = true\n          } else {\n            merge = shouldMerge(op, lastOp) || overwrite\n          }\n        }\n\n        if (lastBatch && merge) {\n          if (overwrite) {\n            lastBatch.pop()\n          }\n\n          lastBatch.push(op)\n        } else {\n          const batch = [op]\n          undos.push(batch)\n        }\n\n        while (undos.length > 100) {\n          undos.shift()\n        }\n\n        if (shouldClear(op)) {\n          history.redos = []\n        }\n      }\n    }\n\n    apply(op)\n  }\n\n  return editor as HistoryEditor\n}\n\n/**\n * Check whether to merge an operation into the previous operation.\n */\n\nconst shouldMerge = (op: Operation, prev: Operation | undefined): boolean => {\n  if (op.type === 'set_selection') {\n    return true\n  }\n\n  if (\n    prev &&\n    op.type === 'insert_text' &&\n    prev.type === 'insert_text' &&\n    op.offset === prev.offset + prev.text.length &&\n    Path.equals(op.path, prev.path)\n  ) {\n    return true\n  }\n\n  if (\n    prev &&\n    op.type === 'remove_text' &&\n    prev.type === 'remove_text' &&\n    op.offset + op.text.length === prev.offset &&\n    Path.equals(op.path, prev.path)\n  ) {\n    return true\n  }\n\n  return false\n}\n\n/**\n * Check whether an operation needs to be saved to the history.\n */\n\nconst shouldSave = (op: Operation, prev: Operation | undefined): boolean => {\n  if (op.type === 'set_selection' && op.newProperties == null) {\n    return false\n  }\n\n  return true\n}\n\n/**\n * Check whether an operation should overwrite the previous one.\n */\n\nconst shouldOverwrite = (\n  op: Operation,\n  prev: Operation | undefined\n): boolean => {\n  if (prev && op.type === 'set_selection' && prev.type === 'set_selection') {\n    return true\n  }\n\n  return false\n}\n\n/**\n * Check whether an operation should clear the redos stack.\n */\n\nconst shouldClear = (op: Operation): boolean => {\n  if (op.type === 'set_selection') {\n    return false\n  }\n\n  return true\n}\n","import { Range } from 'slate';\n\nvar isRangeCollapsed = function isRangeCollapsed(range) {\n  if (range) {\n    return Range.isCollapsed(range);\n  }\n};\n\nexport { isRangeCollapsed };","import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport React from 'react';\nimport { Button } from 'reactstrap';\nimport { withTranslation } from 'react-i18next';\n\nvar TextLinkHoverMenu = /*#__PURE__*/function (_React$Component) {\n  _inherits(TextLinkHoverMenu, _React$Component);\n\n  function TextLinkHoverMenu(props) {\n    var _this;\n\n    _classCallCheck(this, TextLinkHoverMenu);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(TextLinkHoverMenu).call(this, props));\n\n    _this.saveRef = function (ref) {\n      _this.refDom = ref;\n    };\n\n    _this.getLinkUrl = function () {\n      var linkNode = _this.props.editorUtils.getCurrentLinkNode();\n\n      if (linkNode) {\n        _this.linkUrl = linkNode.data.href;\n      }\n    };\n\n    _this.setMenuPosition = function () {\n      if (window.getSelection().anchorOffset !== 0 && window.getSelection().focusOffset !== 0) {\n        var native = window.getSelection();\n        var range = native.getRangeAt(0);\n        var rect = range.getBoundingClientRect();\n\n        if (navigator.userAgent.indexOf('Chrome') < 0 && navigator.userAgent.indexOf('Safari') > 0) {\n          if (range.collapsed && rect.top === 0 && rect.height === 0) {\n            if (range.startOffset === 0) {\n              range.setEnd(range.endContainer, 1);\n            } else {\n              range.setStart(range.startContainer, range.startOffset - 1);\n            }\n\n            rect = range.getBoundingClientRect();\n\n            if (rect.top === 0 && rect.height === 0) {\n              if (range.getClientRects().length) {\n                rect = range.getClientRects()[0];\n              }\n            }\n          }\n        }\n\n        var style = _this.refDom.style;\n        style.zIndex = '1050';\n        style.top = \"\".concat(rect.top - 45, \"px\");\n        var left = parseInt(rect.x - 125);\n\n        if (left < 0) {\n          style.left = '0px';\n        } else if (left + 250 > document.body.clientWidth) {\n          style.left = \"\".concat(document.body.clientWidth - 250, \"px\");\n        } else {\n          style.left = \"\".concat(rect.x - 125, \"px\");\n        }\n      }\n    };\n\n    _this.componentDidMount = function () {\n      requestAnimationFrame(function () {\n        _this.setMenuPosition();\n      });\n    };\n\n    _this.componentWillUnmount = function () {\n      _this.refDom = null;\n    };\n\n    _this.componentWillMount = function () {\n      _this.getLinkUrl();\n    };\n\n    _this.linkUrl = '';\n    return _this;\n  }\n\n  _createClass(TextLinkHoverMenu, [{\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate() {\n      this.setMenuPosition();\n    }\n  }, {\n    key: \"componentWillReceiveProps\",\n    value: function componentWillReceiveProps() {\n      this.getLinkUrl();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      return React.createElement(\"div\", {\n        className: \"seafile-ed-hovermenu\",\n        ref: function ref(_ref) {\n          return _this2.refDom = _ref;\n        }\n      }, React.createElement(\"a\", {\n        href: this.linkUrl,\n        target: \"blank\",\n        className: \"seafile-ed-hovermenu-link\"\n      }, this.linkUrl), React.createElement(Button, {\n        color: \"\",\n        className: \"seafile-ed-hovermenu-btn\",\n        onClick: this.props.editorUtils.unwrapLink\n      }, React.createElement(\"i\", {\n        className: \"iconfont icon-delete\"\n      })), React.createElement(Button, {\n        color: \"\",\n        onClick: this.props.onToggleLinkDialog,\n        className: \"seafile-ed-hovermenu-btn\"\n      }, React.createElement(\"i\", {\n        className: \"iconfont icon-edit\"\n      })), React.createElement(\"span\", {\n        className: \"seafile-ed-hovermenu-triangle\"\n      }));\n    }\n  }]);\n\n  return TextLinkHoverMenu;\n}(React.Component);\n\nexport default withTranslation('seafile-editor')(TextLinkHoverMenu);","import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport React from 'react';\nimport { withTranslation } from 'react-i18next';\n\nvar ContextMenu = /*#__PURE__*/function (_React$Component) {\n  _inherits(ContextMenu, _React$Component);\n\n  function ContextMenu(props) {\n    var _this;\n\n    _classCallCheck(this, ContextMenu);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(ContextMenu).call(this, props));\n\n    _this.setMenuPosition = function () {\n      var menuHeight = _this.menu.offsetHeight; // get height of context menu when the menu is drawing completed in this page\n\n      if (menuHeight === 0) {\n        requestAnimationFrame(_this.setMenuPosition);\n      }\n\n      var top = 0;\n\n      if (_this.position.top + menuHeight > document.body.clientHeight) {\n        top = document.body.clientHeight - menuHeight - 5;\n      } else {\n        top = _this.position.top;\n      }\n\n      var left = _this.position.left + 3;\n\n      _this.setState({\n        contextStyle: {\n          top: top,\n          left: left,\n          zIndex: '1051',\n          display: 'block'\n        }\n      });\n    };\n\n    _this.tableUtils = props.tableUtils;\n    _this.state = {\n      contextStyle: {}\n    };\n    return _this;\n  }\n\n  _createClass(ContextMenu, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.position = this.props.contextMenuPosition;\n      this.setMenuPosition();\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      this.menu = null;\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      return React.createElement(\"div\", {\n        role: 'menu',\n        style: this.state.contextStyle,\n        ref: function ref(_ref) {\n          return _this2.menu = _ref;\n        },\n        className: 'seafile-contextmenu dropdown-menu'\n      }, React.createElement(\"button\", {\n        onMouseDown: function onMouseDown(event) {\n          return _this2.tableUtils.insertRow('before');\n        },\n        className: 'seafile-contextmenu-item dropdown-item'\n      }, this.props.t('Insert_Row_Before')), React.createElement(\"button\", {\n        onMouseDown: function onMouseDown(event) {\n          return _this2.tableUtils.insertRow('after');\n        },\n        className: 'seafile-contextmenu-item dropdown-item'\n      }, this.props.t('Insert_Row_After')), React.createElement(\"button\", {\n        onMouseDown: function onMouseDown(event) {\n          return _this2.tableUtils.insertColumn('before');\n        },\n        className: 'seafile-contextmenu-item dropdown-item'\n      }, this.props.t('Insert_Column_Before')), React.createElement(\"button\", {\n        onMouseDown: function onMouseDown(event) {\n          return _this2.tableUtils.insertColumn('after');\n        },\n        className: 'seafile-contextmenu-item dropdown-item'\n      }, this.props.t('Insert_Column_After')), React.createElement(\"div\", {\n        className: 'seafile-divider dropdown-divider'\n      }), React.createElement(\"button\", {\n        onMouseDown: this.tableUtils.removeRow,\n        className: 'seafile-contextmenu-item dropdown-item'\n      }, this.props.t('Remove_Row')), React.createElement(\"button\", {\n        onMouseDown: this.tableUtils.removeColumn,\n        className: 'seafile-contextmenu-item dropdown-item'\n      }, this.props.t('Remove_Column')));\n    }\n  }]);\n\n  return ContextMenu;\n}(React.Component);\n\nexport default withTranslation('seafile-editor')(ContextMenu);","import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\n\nvar Link = function Link(options) {\n  _classCallCheck(this, Link);\n\n  this.type = options.type || 'link';\n  this.children = options.children || [{\n    text: ''\n  }];\n  this.data = options.data || {\n    href: ''\n  };\n};\n\nvar generateLinkElement = function generateLinkElement(options) {\n  return Object.assign({}, new Link(options));\n};\n\nexport default generateLinkElement;","import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\n\nvar Image = function Image(options) {\n  _classCallCheck(this, Image);\n\n  this.type = options.type || 'image';\n  this.data = options.data || {\n    src: ''\n  };\n  this.children = options.children || [{\n    text: ''\n  }];\n};\n\nvar generateImage = function generateImage(options) {\n  return Object.assign({}, new Image(options));\n};\n\nexport default generateImage;","import _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport { Editor } from 'slate';\nimport ListUtils from '../editor-utils/block-element-utils/list-utils';\nimport CodeUtils from '../editor-utils/block-element-utils/code-utils';\nimport { isRangeCollapsed } from '../editor-utils/range-utils';\nimport TableUtils from '../editor-utils/block-element-utils/table-utils';\nimport getEventTransfer from '../custom/get-event-transfer';\nimport BlockquoteUtils from '../editor-utils/block-element-utils/blockquote-utils';\nimport FormulaUtils from '../editor-utils/block-element-utils/formula-utils';\nimport { htmlDeserializer } from '../../utils/deserialize-html';\nimport generateLinkElement from '../element-model/link';\nimport generateImageElement from '../element-model/image';\nimport isUrl from 'is-url';\nimport { SfEditor } from '../custom/custom';\n\nvar withBlock = function withBlock(editor) {\n  var exec = editor.exec;\n  var listUtils = new ListUtils(editor);\n  var codeUtils = new CodeUtils(editor);\n  var tableUtils = new TableUtils(editor);\n  var blockquoteUtils = new BlockquoteUtils(editor);\n  var formulaUtils = new FormulaUtils(editor);\n\n  editor.exec = function (command) {\n    var data = command.data;\n    var selection = editor.selection;\n\n    switch (command.type) {\n      case 'set_header':\n        Editor.setNodes(editor, {\n          type: command.headerType\n        });\n        break;\n\n      case 'insert_data':\n        var _getEventTransfer = getEventTransfer(data),\n            fragment = _getEventTransfer.fragment,\n            type = _getEventTransfer.type,\n            html = _getEventTransfer.html,\n            text = _getEventTransfer.text;\n\n        if (type === 'file') {\n          exec(command);\n          return;\n        } // insert a link if text content is a url\n\n\n        if (isUrl(text) && !codeUtils.isInCodeBlock()) {\n          if (text.endsWith('png') || text.endsWith('PNG') || text.endsWith('jpg') || text.endsWith('JPG') || text.endsWith('gif') || text.endsWith('GIF')) {\n            var img = generateImageElement({\n              data: {\n                src: text\n              }\n            });\n            Editor.insertNodes(editor, img);\n            return;\n          }\n\n          if (window.editor.editorApi.isInternalFileLink(text)) {\n            var index = text.lastIndexOf('/');\n\n            if (index > 0) {\n              var name = text.substring(index + 1);\n              var fileName = decodeURIComponent(name);\n              SfEditor.insertNodes(editor, [generateLinkElement({\n                data: {\n                  href: text\n                },\n                children: [{\n                  text: fileName\n                }]\n              }), {\n                text: ' '\n              }]);\n              return;\n            }\n          }\n\n          if (window.editor.editorApi.isInternalDirLink(text)) {\n            var _index = text.lastIndexOf('/');\n\n            if (_index > 0) {\n              var name = text.substring(_index + 1);\n              var dirName = decodeURIComponent(name);\n              SfEditor.insertNodes(editor, [generateLinkElement({\n                data: {\n                  href: text\n                },\n                children: [{\n                  text: dirName\n                }]\n              }), {\n                text: ' '\n              }]);\n              return;\n            }\n          }\n\n          SfEditor.insertNodes(editor, [generateLinkElement({\n            data: {\n              href: text\n            },\n            children: [{\n              text: text\n            }]\n          }), {\n            text: ' '\n          }]);\n          return;\n        }\n\n        try {\n          if (tableUtils.isInTable()) {\n            tableUtils.pasteContentInTable(command);\n            return;\n          }\n\n          if (listUtils.isInlist()) {\n            listUtils.pasteContentInList(command);\n            return;\n          }\n\n          if (codeUtils.isInCodeBlock()) {\n            codeUtils.pasteContentInCodeBlock(command);\n            return;\n          }\n\n          if (blockquoteUtils.isInBlockquote()) {\n            blockquoteUtils.pasteContentInBlockquote(command);\n            return;\n          }\n        } catch (error) {\n          Editor.insertText(editor, text);\n        }\n\n        if (type === 'fragment') {\n          var _Editor$match = Editor.match(editor, editor.selection, 'block'),\n              _Editor$match2 = _slicedToArray(_Editor$match, 2),\n              currentBlock = _Editor$match2[0],\n              path = _Editor$match2[1];\n\n          var firstFragmentNode = fragment[0]; // if first fragment node is paragraph insert the content of it into previous sibling\n          // and insert other node\n\n          if (firstFragmentNode.type === 'paragraph') {\n            Editor.insertFragment(editor, fragment);\n            return;\n          } // if current node is an empty paragraph, insert the fragment and\n          // delete the empty paragraph\n\n\n          if (SfEditor.isEmptyParagraph(currentBlock)) {\n            Editor.insertNodes(editor, fragment);\n            Editor.delete(editor, {\n              at: path\n            });\n            return;\n          } // insert the fragment below the current selection node\n\n\n          Editor.insertNodes(editor, fragment);\n          return;\n        }\n\n        if (type === 'html') {\n          try {\n            var _fragment = htmlDeserializer(html);\n\n            Editor.insertNodes(editor, _fragment);\n          } catch (error) {\n            var newText = text.replace(/\\n|\\r\\n/g, ' ');\n            Editor.insertText(editor, newText);\n          }\n\n          return;\n        } // remove text line break and insert text\n\n\n        if (type === 'text') {\n          var textArray = text.split(/\\r\\n|\\n/g);\n          textArray.forEach(function (text, index) {\n            if (index === 0) {\n              Editor.insertText(editor, text);\n            } else {\n              Editor.insertNodes(editor, {\n                type: 'paragraph',\n                children: [{\n                  text: text\n                }]\n              });\n            }\n          });\n          return;\n        }\n\n        exec(command);\n        break;\n\n      case 'set_blockquote':\n        if (!selection) {\n          return;\n        }\n\n        blockquoteUtils.wrapBlockquote();\n        break;\n\n      case 'unwrap_blockquote':\n        blockquoteUtils.unwrapBlockquote();\n        break;\n\n      case 'set_ordered_list':\n        if (!selection) {\n          return;\n        }\n\n        listUtils.wrapList('ordered_list');\n        break;\n\n      case 'set_unordered_list':\n        if (!selection) {\n          return;\n        }\n\n        listUtils.wrapList('unordered_list');\n        break;\n\n      case 'unwrap_unordered_list':\n      case 'unwrap_ordered_list':\n        listUtils.unwrapList();\n        break;\n\n      case 'wrap_check_list_item':\n        var listItem = listUtils.getCurrentListItem();\n\n        if (listItem.length === 0) {\n          // not in list, add list\n          listUtils.wrapList('unordered_list');\n          Editor.setNodes(editor, {\n            data: {\n              checked: false\n            }\n          }, {\n            match: {\n              type: 'list_item'\n            }\n          });\n        } else {\n          var listItems = Editor.nodes(editor, {\n            at: editor.selection,\n            match: {\n              type: 'list_item'\n            }\n          });\n          var nearestItem;\n          var _iteratorNormalCompletion = true;\n          var _didIteratorError = false;\n          var _iteratorError = undefined;\n\n          try {\n            for (var _iterator = listItems[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n              var _listItem = _step.value;\n              nearestItem = _listItem;\n            }\n          } catch (err) {\n            _didIteratorError = true;\n            _iteratorError = err;\n          } finally {\n            try {\n              if (!_iteratorNormalCompletion && _iterator.return != null) {\n                _iterator.return();\n              }\n            } finally {\n              if (_didIteratorError) {\n                throw _iteratorError;\n              }\n            }\n          }\n\n          Editor.setNodes(editor, {\n            data: {\n              checked: false\n            }\n          }, {\n            at: nearestItem[1]\n          });\n        }\n\n        break;\n\n      case 'unwrap_check_list_item':\n        var item = listUtils.getCurrentListItem();\n        Editor.setNodes(editor, {\n          data: {}\n        }, {\n          at: item[0][1]\n        });\n        break;\n\n      case 'set_code_block':\n        codeUtils.wrapCodeBlock();\n        break;\n\n      case 'unwrap_code_block':\n        codeUtils.unwrapCodeBlock();\n        break;\n\n      case 'exit_code_block':\n        Editor.splitNodes(editor, {\n          match: 'block',\n          always: true\n        });\n        codeUtils.unwrapCodeBlock(true);\n        break;\n\n      case 'increase_code_block_indent':\n        if (isRangeCollapsed(editor.selection)) {\n          var block = Editor.match(editor, editor.selection, 'block');\n          Editor.insertText(editor, '\\t', {\n            at: {\n              anchor: {\n                path: [].concat(_toConsumableArray(block[1]), [0]),\n                offset: 0\n              },\n              focus: {\n                path: [].concat(_toConsumableArray(block[1]), [0]),\n                offset: 0\n              }\n            }\n          });\n        }\n\n        break;\n\n      case 'insert_table':\n        tableUtils.insertTable();\n        break;\n\n      case 'remove_table':\n        tableUtils.removeTable();\n        break;\n\n      case 'insert_row':\n        tableUtils.insertRow();\n        break;\n\n      case 'insert_column':\n        tableUtils.insertColumn();\n        break;\n\n      case 'remove_row':\n        tableUtils.removeRow();\n        break;\n\n      case 'remove_column':\n        tableUtils.removeColumn();\n        break;\n\n      case 'set_table_cell_align':\n        tableUtils.setAlign(command.align);\n        break;\n\n      case 'exit_table':\n        tableUtils.exitTable();\n        break;\n\n      case 'insert_formula':\n        formulaUtils.insertFormula(command.data);\n        break;\n\n      case 'set_formula':\n        formulaUtils.setFormula(command.data);\n        break;\n\n      default:\n        exec(command);\n        break;\n    }\n  };\n\n  return editor;\n};\n\nexport default withBlock;","import _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport { Editor, Range } from 'slate';\nimport generateLinkElement from '../element-model/link';\nimport generateImageElement from '../element-model/image';\n\nvar withInline = function withInline(editor) {\n  var exec = editor.exec,\n      isInline = editor.isInline;\n\n  editor.isInline = function (element) {\n    return element.type === 'link' || element.type === 'image' ? true : isInline(element);\n  };\n\n  editor.exec = function (command) {\n    var data = command.data;\n    var selection = editor.selection;\n\n    switch (command.type) {\n      case 'insert_link_at_selection':\n        selection = command.elementData.selection;\n        var isCollapsed = selection && Range.isCollapsed(selection);\n        var link = generateLinkElement({\n          type: 'link',\n          children: [{\n            text: command.elementData.text\n          }],\n          data: {\n            href: command.elementData.url\n          }\n        });\n\n        if (isCollapsed) {\n          Editor.insertNodes(editor, link, {\n            at: selection\n          });\n        } else {\n          Editor.wrapNodes(editor, link, {\n            split: true,\n            at: selection\n          });\n          Editor.select(editor, selection);\n          Editor.collapse(editor, {\n            edge: 'end'\n          });\n        }\n\n        break;\n\n      case 'unwrap_link':\n        Editor.unwrapNodes(editor, {\n          match: {\n            type: 'link'\n          }\n        });\n        break;\n\n      case 'set_link':\n        selection = command.elementData.selection;\n        Editor.removeNodes(editor, {\n          match: {\n            type: 'link'\n          },\n          at: selection\n        });\n        var newNodeLink = generateLinkElement({\n          type: 'link',\n          data: {\n            href: command.elementData.url\n          },\n          children: [{\n            text: command.elementData.text\n          }]\n        }); // Insert a new link at previous link path\n\n        var linkPath = _toConsumableArray(selection.anchor.path);\n\n        linkPath.pop();\n        Editor.insertNodes(editor, newNodeLink, {\n          at: linkPath\n        });\n        break;\n\n      case 'insert_image_at_selection':\n        var img = generateImageElement({\n          data: command.data\n        });\n        Editor.insertNodes(editor, img, {\n          at: command.at\n        });\n        break;\n\n      case 'set_image':\n        Editor.setNodes(editor, {\n          data: data\n        }, {\n          match: {\n            type: 'image'\n          },\n          at: editor.selection,\n          voids: true\n        });\n        break;\n\n      case 'insert_data':\n        if (data.types.includes('Files') && data.files[0].type.includes('image') && window.editor.editorApi.uploadLocalImage) {\n          window.editor.editorApi.uploadLocalImage(command.data.files[0]).then(function (res) {\n            var img = generateImageElement({\n              data: {\n                src: res\n              }\n            });\n            Editor.insertNodes(editor, img);\n          });\n          return;\n        }\n\n        exec(command);\n        break;\n\n      default:\n        exec(command);\n        break;\n    }\n  };\n\n  return editor;\n};\n\nexport default withInline;","var withVoid = function withVoid(editor) {\n  var isVoid = editor.isVoid;\n  var VOID_ELEMENTS = ['image', 'formula'];\n\n  editor.isVoid = function (element) {\n    return VOID_ELEMENTS.includes(element.type) ? true : isVoid(element);\n  };\n\n  return editor;\n};\n\nexport default withVoid;","import _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport { Editor, Path } from 'slate';\nvar BOLDITALICREG = /\\*\\*\\*(\\S+)\\*\\*\\*|\\_\\_\\_(\\S+)\\_\\_\\_|\\*\\_\\_(\\S+)\\_\\_\\*|\\_\\*\\*(\\S+)\\*\\*\\_|\\_\\_\\*(\\S+)\\*\\_\\_|\\*\\*\\_(\\S+)_\\*\\*/;\nvar BOLDREG = /\\*\\*(\\S+)\\*\\*|\\_\\_(\\S+)\\_\\_/;\nvar ITALICREG = /\\*(\\S+)\\*|_(\\S+)_/;\nvar CODEREG = /\\`(\\S+)\\`/;\n\nvar TextUtils = function TextUtils(_editor) {\n  var _this = this;\n\n  _classCallCheck(this, TextUtils);\n\n  this.getTextInfoBeforeSelection = function () {\n    var editor = _this.editor;\n    var selection = _this.editor.selection;\n    var anchor = selection.anchor;\n\n    var _Editor$nodes = Editor.nodes(editor, {\n      match: 'block'\n    }),\n        _Editor$nodes2 = _slicedToArray(_Editor$nodes, 1),\n        block = _Editor$nodes2[0];\n\n    var path = block ? block[1] : [];\n    var start = Editor.start(editor, path);\n    var range = {\n      anchor: anchor,\n      focus: start\n    };\n    var beforeText = Editor.text(editor, range);\n    return {\n      range: range,\n      beforeText: beforeText,\n      block: block\n    };\n  };\n\n  this.setTextMarkByShortCut = function (exec, command) {\n    var editor = _this.editor;\n    var selection = editor.selection;\n\n    var _Editor$node = Editor.node(editor, selection),\n        _Editor$node2 = _slicedToArray(_Editor$node, 2),\n        textNode = _Editor$node2[0],\n        textPath = _Editor$node2[1];\n\n    var text = textNode.text;\n    var offset = selection.anchor.offset;\n    var lastChart = text[offset - 1];\n    var marks, markText, startOffset;\n    var matched;\n\n    if (lastChart === '_' || lastChart === '`' || lastChart === '*') {\n      if (matched = text.match(BOLDITALICREG)) {\n        startOffset = matched.index;\n        marks = {\n          BOLD: true,\n          ITALIC: true\n        };\n      } else if (matched = text.match(BOLDREG)) {\n        startOffset = matched.index;\n        marks = {\n          BOLD: true\n        };\n      } else if (matched = text.match(ITALICREG)) {\n        startOffset = matched.index;\n        marks = {\n          ITALIC: true\n        };\n      } else if (matched = text.match(CODEREG)) {\n        startOffset = matched.index;\n        marks = {\n          CODE: true\n        };\n      }\n\n      if (matched) {\n        for (var index = 1; index < matched.length; index++) {\n          if (matched[index]) {\n            markText = matched[index];\n            break;\n          }\n        }\n\n        marks = Object.assign({\n          BOLD: false,\n          ITALIC: false,\n          CODE: false\n        }, marks);\n        Editor.select(editor, {\n          anchor: {\n            path: textPath,\n            offset: startOffset\n          },\n          focus: {\n            path: textPath,\n            offset: offset\n          }\n        });\n        Editor.delete(editor, editor.selection); // insert a space before mark\n\n        Editor.insertText(editor, ' ');\n        Editor.insertNodes(editor, [_objectSpread({\n          text: markText\n        }, marks), {\n          text: ' '\n        }]);\n        var selectedPath = Path.next(Path.next(textPath)); // select the next empty text node to escape the mark\n\n        Editor.select(editor, selectedPath);\n        Editor.collapse(editor, {\n          edge: 'end'\n        });\n        return;\n      }\n    }\n\n    exec(command);\n  };\n\n  this.editor = _editor;\n} // Get text related variables before current selection\n// block: Parent of current text node\n// range: From start of block to current selection\n// beforeText: The text of block from start to selection\n;\n\nexport default TextUtils;","import _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport { Editor, Node, Range, Path } from 'slate';\nimport ListUtils from '../editor-utils/block-element-utils/list-utils';\nimport { isRangeCollapsed } from '../editor-utils/range-utils';\nimport { SfEditor } from '../custom/custom';\nimport CodeUtils from '../editor-utils/block-element-utils/code-utils';\nimport TextUtils from '../editor-utils/text-utils';\nimport TableUtils from '../editor-utils/block-element-utils/table-utils';\nimport BlockquoteUtils from '../editor-utils/block-element-utils/blockquote-utils';\nvar SHORTCUTS = {\n  '1.': 'ordered_list',\n  '*': 'unordered_list',\n  '-': 'unordered_list',\n  '>': 'blockquote',\n  '#': 'header_one',\n  '##': 'header_two',\n  '###': 'header_three',\n  '####': 'header_four',\n  '#####': 'header_five',\n  '######': 'header_six',\n  '   ': 'code_block'\n};\n\nvar withMarkdownShortcut = function withMarkdownShortcut(editor) {\n  var exec = editor.exec;\n  var listUtils = new ListUtils(editor);\n  var codeUtils = new CodeUtils(editor);\n  var tableUtils = new TableUtils(editor);\n  var textUtils = new TextUtils(editor);\n  var blockquoteUtils = new BlockquoteUtils(editor);\n\n  editor.exec = function (command) {\n    var selection = editor.selection;\n\n    switch (command.type) {\n      case 'split_list_item':\n        Editor.splitNodes(editor, {\n          match: 'block',\n          always: true\n        });\n        break;\n\n      case 'insert_break':\n        if (!Range.isCollapsed(editor.selection)) {\n          var _node = Editor.node(editor, [editor.selection.anchor.path[0]]);\n\n          if (_node && _node[0].type.includes('header')) {\n            exec(command);\n            Editor.setNodes(editor, {\n              type: 'paragraph'\n            });\n            return;\n          } // if the expand selection is in table delete the selected and insert a new row when press enter\n\n\n          if (tableUtils.isInTable()) {\n            Editor.collapse(editor, {\n              edge: 'end'\n            });\n            tableUtils.insertRow();\n            return;\n          }\n\n          exec(command);\n          return;\n        }\n\n        var _Editor$nodes = Editor.nodes(editor, {\n          match: {\n            type: 'link'\n          }\n        }),\n            _Editor$nodes2 = _slicedToArray(_Editor$nodes, 1),\n            link = _Editor$nodes2[0]; // when selection is at the end of link, select the text node after the link\n        // to prevent split a empty link node\n\n\n        if (link) {\n          var linkPath = link[1];\n\n          if (Editor.isEnd(editor, editor.selection.anchor, linkPath)) {\n            var nextPath = Path.next(linkPath);\n            var point = {\n              path: nextPath,\n              offset: 0\n            };\n            Editor.select(editor, point);\n          }\n        } // When a picture is selected, a blank line is inserted when press Enter\n\n\n        var _Editor$nodes3 = Editor.nodes(editor, {\n          match: {\n            type: 'image'\n          }\n        }),\n            _Editor$nodes4 = _slicedToArray(_Editor$nodes3, 1),\n            image = _Editor$nodes4[0];\n\n        if (image) {\n          var imagePath = image[1].slice();\n          var imageIndex = imagePath.pop(); // insert new table row when selection is in table\n\n          Editor.insertNodes(editor, {\n            text: ''\n          }, {\n            at: [].concat(_toConsumableArray(imagePath), [imageIndex + 1])\n          });\n\n          if (tableUtils.isInTable()) {\n            tableUtils.insertRow();\n            return;\n          }\n\n          exec(command);\n          return;\n        } // unwrap blockquote when press enter at an empty blockquote line;\n\n\n        if (blockquoteUtils.isInBlockquote()) {\n          var _Editor$nodes5 = Editor.nodes(editor, {\n            match: 'block'\n          }),\n              _Editor$nodes6 = _slicedToArray(_Editor$nodes5, 1),\n              block = _Editor$nodes6[0];\n\n          if (Node.text(block[0]).length === 0) {\n            Editor.unwrapNodes(editor, {\n              match: {\n                type: 'blockquote'\n              },\n              split: true\n            });\n            return;\n          }\n        } // if press enter in a list unwrap the list or insert a new list item\n\n\n        if (listUtils.isInlist()) {\n          var _node2 = SfEditor.getNodesByTypeAtRange(editor, 'list_item'); // unwrap list if the list item text is none\n\n\n          if (Node.text(_node2[0]).length === 0) {\n            listUtils.unwrapList();\n            return;\n          } // insert a new list item\n\n\n          if (isRangeCollapsed(editor.selection)) {\n            SfEditor.splitNodesAtPoint(editor, {\n              at: editor.selection.anchor,\n              match: {\n                type: 'list_item'\n              },\n              always: true\n            });\n            return;\n          }\n        }\n\n        if (codeUtils.isInCodeBlock()) {\n          codeUtils.splitCodeLine();\n          return;\n        }\n\n        if (tableUtils.isInTable()) {\n          tableUtils.insertRow();\n          return;\n        }\n\n        var node = Editor.node(editor, [editor.selection.anchor.path[0]]);\n\n        if (node && node[0].type.includes('header')) {\n          var header = node[0]; // get the offset of the selection\n\n          var offset = editor.selection.anchor.offset; // split the header\n\n          exec(command); // if the selection is at the end of the header\n          // set the splited header sibling to paragraph \n\n          if (offset === Node.text(header).length) {\n            Editor.setNodes(editor, {\n              type: 'paragraph'\n            });\n          }\n\n          return;\n        }\n\n        exec(command);\n        break;\n\n      case 'insert_text':\n        // set element by markdown shortcut;\n        if (command.text === ' ' && isRangeCollapsed(selection)) {\n          // if current selection is in table or code block exec default command\n          if (tableUtils.isInTable() || codeUtils.isInCodeBlock()) {\n            exec(command);\n            return;\n          }\n\n          var _textUtils$getTextInf = textUtils.getTextInfoBeforeSelection(),\n              beforeText = _textUtils$getTextInf.beforeText,\n              range = _textUtils$getTextInf.range,\n              _block = _textUtils$getTextInf.block;\n\n          var path = _block[1];\n          var type = SHORTCUTS[beforeText]; // set block element by shortcut\n\n          if (type) {\n            Editor.select(editor, range);\n            Editor.delete(editor);\n\n            if (type === 'blockquote') {\n              if (!blockquoteUtils.isInBlockquote()) {\n                editor.exec({\n                  type: 'set_blockquote'\n                });\n              }\n            }\n\n            if (type.includes('header')) {\n              // set the outest  paragraph into header \n              if (_block[0].type === 'paragraph' && path.length === 1) {\n                editor.exec({\n                  type: 'set_header',\n                  headerType: type\n                });\n              }\n            }\n\n            if (type === 'ordered_list') {\n              editor.exec({\n                type: 'set_ordered_list'\n              });\n            }\n\n            if (type === 'unordered_list') {\n              editor.exec({\n                type: 'set_unordered_list'\n              });\n            }\n\n            if (type === 'code_block') {\n              if (!codeUtils.isInCodeBlock()) {\n                editor.exec({\n                  type: 'set_code_block'\n                });\n                return;\n              }\n            }\n\n            return;\n          } else {\n            // set text mark by shortcut\n            textUtils.setTextMarkByShortCut(exec, command);\n            return;\n          }\n        }\n\n        if (command.text === '`' && isRangeCollapsed(editor.selection)) {\n          var _textUtils$getTextInf2 = textUtils.getTextInfoBeforeSelection(),\n              _beforeText = _textUtils$getTextInf2.beforeText,\n              _range = _textUtils$getTextInf2.range;\n\n          if (_beforeText === '``' && !codeUtils.isInCodeBlock()) {\n            Editor.select(editor, _range);\n            Editor.delete(editor);\n            editor.exec({\n              type: 'set_code_block'\n            });\n            return;\n          }\n        }\n\n        exec(command);\n        break;\n\n      case 'increase_list_item_depth':\n        listUtils.increaseListDepth();\n        break;\n\n      case 'delete_backward':\n        var anchor = selection.anchor;\n\n        if (anchor.offset === 0 && isRangeCollapsed(selection)) {\n          var _Editor$nodes7 = Editor.nodes(editor, {\n            match: 'block'\n          }),\n              _Editor$nodes8 = _slicedToArray(_Editor$nodes7, 1),\n              match = _Editor$nodes8[0];\n\n          var _block2 = match[0]; // if the header content is none set the header to paragraph when delete\n\n          if (_block2.type.includes('header') && Node.text(_block2).length === 0) {\n            editor.exec({\n              type: 'set_header',\n              headerType: 'paragraph'\n            });\n            return;\n          }\n          /**\n           * If the anchor offset is 0 but not focus the head of the block node such as\n           * an image is selected, the editor shoud delete the image first instead of\n           * execute the delete operation of list or code_block or table\n           */\n\n\n          if (_block2.children.length > 1) {\n            var blockDepth = match[1].length - 1;\n            var inlineIndex = anchor.path[blockDepth + 1]; // If the inline node is the first child of the block, execute default command\n\n            if (inlineIndex !== 0) {\n              exec(command);\n              return;\n            }\n          }\n\n          if (blockquoteUtils.isInBlockquote()) {\n            editor.exec({\n              type: 'unwrap_blockquote'\n            });\n            return;\n          }\n\n          if (listUtils.isInlist()) {\n            var _Editor$nodes9 = Editor.nodes(editor, {\n              match: [{\n                type: 'ordered_list'\n              }, {\n                type: 'unordered_list'\n              }]\n            }),\n                _Editor$nodes10 = _slicedToArray(_Editor$nodes9, 1),\n                _node3 = _Editor$nodes10[0];\n\n            var listNode = _node3[0];\n\n            if (listNode.children.length === 1 && Node.text(listNode).length === 0) {\n              listUtils.unwrapList();\n              return;\n            } // Unwrap the list item when the selection is at the first list item of the first node of document\n\n\n            if (anchor.path[0] === 0 && anchor.path[1] === 0) {\n              listUtils.unwrapList();\n              return;\n            }\n          }\n\n          if (codeUtils.isInCodeBlock()) {\n            var _node4 = Editor.match(editor, editor.selection, {\n              type: 'code_block'\n            });\n\n            var codeBlock = _node4[0];\n            var children = codeBlock.children;\n            var text = Node.text(codeBlock);\n\n            if (text.length === 0 && children.length === 1) {\n              editor.exec({\n                type: 'unwrap_code_block'\n              });\n              return;\n            }\n          }\n\n          if (tableUtils.isInTable()) {\n            var _block3 = Editor.match(editor, editor.selection, 'block');\n\n            var blockPath = _block3[1];\n            var blockNode = _block3[0];\n            var start = Editor.start(editor, blockPath);\n            var _offset = start.offset;\n\n            if (_offset === 0 && blockNode.children.length === 1) {\n              return;\n            }\n          }\n        }\n\n        exec(command);\n        break;\n\n      default:\n        exec(command);\n    }\n  };\n\n  return editor;\n};\n\nexport default withMarkdownShortcut;","import _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport { SfEditor } from '../custom/custom';\nimport { Node, Text } from 'slate';\n\nvar normalizeNode = function normalizeNode(editor) {\n  var normalizeNode = editor.normalizeNode;\n\n  editor.normalizeNode = function (_ref) {\n    var _ref2 = _slicedToArray(_ref, 2),\n        node = _ref2[0],\n        path = _ref2[1];\n\n    // if current node is a list node\n    var type = node.type; // wrap the outest list item into unoreded list\n\n    if (path.length === 1 && type === 'list_item') {\n      SfEditor.wrapNodes(editor, {\n        type: 'unordered_list',\n        children: [node]\n      }, {\n        at: path\n      });\n    }\n\n    if (path.length === 1 && (type === 'ordered_list' || type === 'unordered_list')) {\n      var index = path[0];\n      var previousSibling = editor.children[index - 1];\n      var nextSiblings = editor.children[index + 1];\n\n      if (previousSibling && previousSibling.type === type) {\n        // merge previous same type list node\n        SfEditor.mergeNodes(editor, {\n          at: path\n        });\n      }\n\n      if (nextSiblings && nextSiblings.type === type) {\n        // merge next same type list node\n        SfEditor.mergeNodes(editor, {\n          at: [index + 1]\n        });\n      }\n    } // trailing a paragrph at the end of the document\n\n\n    if (path.length === 1 && path[0] === editor.children.length - 1) {\n      if (node.type !== 'paragraph' || !SfEditor.isEmptyParagraph(node)) {\n        SfEditor.insertNodes(editor, {\n          type: 'paragraph',\n          children: [{\n            text: ''\n          }]\n        }, {\n          at: [path[0] + 1]\n        });\n      }\n    }\n\n    if (type === 'blockquote') {\n      node.children.forEach(function (child, index) {\n        var childPath = [].concat(_toConsumableArray(path), [index]);\n\n        if (child.type === 'blockquote') {\n          SfEditor.unwrapNodes(editor, {\n            at: childPath\n          });\n        }\n      });\n    } // remove empty link\n\n\n    if (type === 'link') {\n      if (Node.text(node) === '' && node.children.length > 0) {\n        SfEditor.removeNodes(editor, {\n          at: path\n        });\n      }\n    } // remove mark when the text node is empty\n\n\n    if (Text.isText(node) && node.text.length === 0) {\n      if (Object.keys(node).length > 1) {\n        SfEditor.setNodes(editor, {\n          CODE: false,\n          BOLD: false,\n          ITALIC: false\n        }, {\n          at: path\n        });\n      }\n    }\n\n    return normalizeNode([node, path]);\n  };\n\n  return editor;\n};\n\nexport default normalizeNode;","var TRANSFER_TYPES = {\n  fragment: 'application/x-slate-fragment',\n  html: 'text/html',\n  text: 'text/plain'\n}; // tranfrom slate fragment and write to clipboard\n\nfunction setEventTransfer(event, type, content) {\n  var mime = TRANSFER_TYPES[type];\n  var transfer = event.dataTransfer || event.clipboardData;\n\n  if (type === 'fragment') {\n    // use the same encoding as slate\n    var encodedContent = window.btoa(encodeURIComponent(JSON.stringify(content)));\n    transfer.setData(mime, encodedContent);\n    transfer.setData('text', transfer.getData('text'));\n  } else if (type === 'html') {\n    transfer.setData(mime, content);\n    transfer.setData('text', transfer.getData('text'));\n  } else {\n    transfer.setData('text', content);\n  }\n}\n\nexport default setEventTransfer;","import _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport isHotKey from 'is-hotkey';\nimport { Range, Editor } from 'slate';\nimport ListUtils from './editor-utils/block-element-utils/list-utils';\nimport CodeUtils from './editor-utils/block-element-utils/code-utils';\nimport TableUtils from './editor-utils/block-element-utils/table-utils';\nimport setEventTransfer from './custom/set-event-transfer';\nimport { SfEditor } from '../editor/custom/custom';\n\nvar Plugin = function Plugin(_editor) {\n  var _this = this;\n\n  _classCallCheck(this, Plugin);\n\n  this.onKeyDown = function (event) {\n    if (event.nativeEvent.keyCode === 13) {\n      event.preventDefault();\n\n      if (isHotKey('shift+enter', event)) {\n        if (_this.listUtils.isInlist()) {\n          _this.editor.exec({\n            type: 'split_list_item'\n          });\n        }\n      } else if (isHotKey('mod+enter', event)) {\n        if (_this.codeUtils.isInCodeBlock()) {\n          _this.editor.exec({\n            type: 'exit_code_block'\n          });\n        }\n\n        if (_this.tableUtils.isInTable()) {\n          _this.editor.exec({\n            type: 'exit_table'\n          });\n        }\n      } else {\n        _this.editor.exec({\n          type: 'insert_break'\n        });\n      }\n    }\n\n    if (isHotKey('shift+tab', event)) {\n      event.preventDefault();\n\n      if (_this.listUtils.isInlist()) {\n        var _Editor$nodes = Editor.nodes(_this.editor, {\n          match: [{\n            type: 'unordered_list'\n          }, {\n            type: 'ordered_list'\n          }],\n          at: _this.editor.selection,\n          mode: 'highest'\n        }),\n            _Editor$nodes2 = _slicedToArray(_Editor$nodes, 1),\n            listNode = _Editor$nodes2[0];\n\n        if (!listNode) return;\n        var type = listNode[0].type;\n\n        _this.editor.exec({\n          type: \"unwrap_\".concat(type)\n        });\n      }\n    }\n\n    if (isHotKey('mod+s', event)) {\n      event.preventDefault();\n      _this.editor.onSave && _this.editor.onSave();\n    }\n\n    if (isHotKey('tab', event) && Range.isCollapsed(_this.editor.selection)) {\n      event.preventDefault();\n\n      if (_this.codeUtils.isInCodeBlock()) {\n        _this.editor.exec({\n          type: 'increase_code_block_indent'\n        });\n      }\n\n      if (_this.listUtils.isInlist()) {\n        _this.editor.exec({\n          type: 'increase_list_item_depth'\n        });\n      }\n    }\n\n    if (isHotKey('mod+b', event)) {\n      event.preventDefault();\n\n      if (!_this.codeUtils.isInCodeBlock()) {\n        _this.editor.exec({\n          type: 'format_text',\n          properties: {\n            BOLD: true\n          }\n        });\n      }\n    }\n\n    if (isHotKey('mod+i', event)) {\n      event.preventDefault();\n\n      if (!_this.codeUtils.isInCodeBlock()) {\n        _this.editor.exec({\n          type: 'format_text',\n          properties: {\n            ITALIC: true\n          }\n        });\n      }\n    }\n\n    if (isHotKey('mod+/', event)) {\n      event.preventDefault();\n\n      if (!_this.codeUtils.isInCodeBlock()) {\n        _this.editor.exec({\n          type: 'format_text',\n          properties: {\n            CODE: true\n          }\n        });\n      }\n    }\n\n    if (isHotKey('mod+4', {\n      byKey: true\n    })(event)) {\n      event.preventDefault();\n      window.richMarkdownEditor.onToggleFormulaDialog();\n      return;\n    } // compate chrome: in chrome press backspace would not exec delete_backward command\n\n\n    if (isHotKey('backspace', event)) {\n      var voidNode = SfEditor.match(_this.editor, _this.editor.selection, 'void');\n\n      if (voidNode && (voidNode[0].type === 'image' || voidNode[0].type === 'formula')) {\n        event.preventDefault();\n\n        _this.editor.exec({\n          type: 'delete_backward',\n          unit: 'character'\n        });\n\n        return;\n      }\n    }\n  };\n\n  this.onCut = function (event, editor) {\n    var image = SfEditor.match(_this.editor, _this.editor.selection, {\n      type: 'image'\n    });\n\n    if (image) {\n      // write the image element to clipboard\n      setEventTransfer(event, 'fragment', [{\n        type: 'paragraph',\n        children: [image[0]]\n      }]); // remove the image element when cut an image due to slate did not has the action when cut a image\n\n      _this.editor.exec({\n        type: 'delete_backward',\n        unit: 'character'\n      });\n\n      return;\n    }\n  };\n\n  this.onCopy = function (event, editor) {\n    if (_this.tableUtils.isInTable()) {\n      event.preventDefault();\n\n      var table = _this.tableUtils.getSelectedTableCells();\n\n      if (!table) {\n        setEventTransfer(event, 'text', SfEditor.text(editor, editor.selection));\n        return;\n      }\n\n      setEventTransfer(event, 'fragment', table);\n      return;\n    }\n  };\n\n  this.editor = _editor;\n  this.listUtils = new ListUtils(_editor);\n  this.codeUtils = new CodeUtils(_editor);\n  this.tableUtils = new TableUtils(_editor);\n  this.onSave = _editor.onSave;\n};\n\nexport default Plugin;","import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport React, { Fragment } from 'react';\nimport { Modal, ModalHeader, ModalBody } from 'reactstrap';\nimport { withTranslation } from 'react-i18next';\nimport '../css/keyboard-shortcuts.css';\nvar isMac = window.navigator.platform.indexOf('Win') < 0 ? true : false;\nvar controlKey = isMac ? '' : 'CTRL';\n\nvar KeyboardShortcuts = /*#__PURE__*/function (_React$PureComponent) {\n  _inherits(KeyboardShortcuts, _React$PureComponent);\n\n  function KeyboardShortcuts(props) {\n    var _this;\n\n    _classCallCheck(this, KeyboardShortcuts);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(KeyboardShortcuts).call(this, props));\n\n    _this.renderShortcut = function (keys) {\n      return React.createElement(Fragment, null, React.createElement(\"span\", {\n        className: \"keyboard-shortcut\"\n      }, keys.map(function (key, index) {\n        return React.createElement(\"kbd\", {\n          key: index\n        }, key);\n      })), React.createElement(\"br\", null));\n    };\n\n    _this.renderContainer = function (keys, description) {\n      return React.createElement(\"div\", {\n        className: \"keyboard-shortcut-container\"\n      }, React.createElement(\"div\", {\n        className: \"col-4\"\n      }, _this.renderShortcut(keys)), React.createElement(\"div\", {\n        className: \"col-8\"\n      }, description));\n    };\n\n    _this.shortcutData = [{\n      'Make_list': [['*', 'space'], ['-', 'space']],\n      'Make_ordered_list': [['1.', 'space']],\n      'Insert_new_item': [['Enter']],\n      'Insert_child_in_item': [['Shift', 'Enter']],\n      'Increase_depth': [['Tab']]\n    }, {\n      'Heading_1': [['#', 'space']],\n      'Heading_2': [['##', 'space']],\n      'Heading_3': [['###', 'space']],\n      'Heading_4': [['####', 'space']],\n      'Heading_5': [['#####', 'space']],\n      'Heading_6': [['######', 'space']]\n    }, {\n      'Make_code_block': [['```'], ['space*4']],\n      'Insert_new_line': [['Enter']],\n      'Escape_code_block': [[controlKey, 'Enter']],\n      'Insert_indent': [['Tab']]\n    }, {\n      'Make_Block_quote': [['>', 'space']],\n      'Escape_Block_quote': [['Enter']]\n    }, {\n      'Insert_Table_Row': [['Enter']],\n      'Escape_table': [[controlKey, 'Enter']]\n    }, {\n      'Bold': [['**bold**', 'space'], ['__bold__', 'space']],\n      'Italic': [['*italic*', 'space'], ['_italic_', 'space']],\n      'Italic_Bold': [['***italic***', 'space'], ['___italic___', 'space']],\n      'Inline_code': [['`code`', 'space']]\n    }, {\n      'Paste_screen_shot': [[controlKey, 'v']],\n      'Drag_image_from_anywhere_to_upload_it': []\n    }];\n    return _this;\n  }\n\n  _createClass(KeyboardShortcuts, [{\n    key: \"render\",\n    value: function render() {\n      var _this$props = this.props,\n          t = _this$props.t,\n          toggleShortcutDialog = _this$props.toggleShortcutDialog,\n          userHelp = _this$props.userHelp;\n      var userHelpData = userHelp.userHelpData;\n      return React.createElement(Modal, {\n        isOpen: true,\n        toggle: toggleShortcutDialog,\n        className: \"keyboard-shortcut-dialog\"\n      }, React.createElement(ModalHeader, {\n        toggle: toggleShortcutDialog\n      }, React.createElement(\"span\", {\n        className: \"mr-2\"\n      }, t(userHelp.title))), React.createElement(ModalBody, null, React.createElement(\"div\", null, React.createElement(\"div\", {\n        className: \"pb-2\"\n      }, React.createElement(\"div\", {\n        className: \"keyboard-shortcut-title pb-1\"\n      }, t(userHelpData[1]['shortcutType'])), this.renderContainer(this.shortcutData[1]['Heading_1'][0], t(userHelpData[1].shortcutData['Heading_1'])), this.renderContainer(this.shortcutData[1]['Heading_2'][0], t(userHelpData[1].shortcutData['Heading_2'])), this.renderContainer(this.shortcutData[1]['Heading_3'][0], t(userHelpData[1].shortcutData['Heading_3'])), this.renderContainer(this.shortcutData[1]['Heading_4'][0], t(userHelpData[1].shortcutData['Heading_4'])), this.renderContainer(this.shortcutData[1]['Heading_5'][0], t(userHelpData[1].shortcutData['Heading_5'])), this.renderContainer(this.shortcutData[1]['Heading_6'][0], t(userHelpData[1].shortcutData['Heading_6']))), React.createElement(\"div\", {\n        className: \"pb-2\"\n      }, React.createElement(\"div\", {\n        className: \"keyboard-shortcut-title pb-1\"\n      }, t(userHelpData[0]['shortcutType'])), React.createElement(\"div\", {\n        className: \"keyboard-shortcut-container\"\n      }, React.createElement(\"div\", {\n        className: \"col-4\"\n      }, this.renderShortcut(this.shortcutData[0]['Make_list'][0]), this.renderShortcut(this.shortcutData[0]['Make_list'][1])), React.createElement(\"div\", {\n        className: \"col-8\"\n      }, t(userHelpData[0].shortcutData['Make_list']))), React.createElement(\"div\", {\n        className: \"keyboard-shortcut-container\"\n      }, React.createElement(\"div\", {\n        className: \"col-4\"\n      }, this.renderShortcut(this.shortcutData[0]['Make_ordered_list'][0])), React.createElement(\"div\", {\n        className: \"col-8\"\n      }, t(userHelpData[0].shortcutData['Make_ordered_list']))), this.renderContainer(this.shortcutData[0]['Increase_depth'][0], t(userHelpData[0].shortcutData['Increase_depth'])), this.renderContainer(this.shortcutData[0]['Insert_child_in_item'][0], t(userHelpData[0].shortcutData['Insert_child_in_item'])), this.renderContainer(this.shortcutData[0]['Insert_new_item'][0], t(userHelpData[0].shortcutData['Insert_new_item']))), React.createElement(\"div\", {\n        className: \"pb-2\"\n      }, React.createElement(\"div\", {\n        className: \"keyboard-shortcut-title pb-1\"\n      }, t(userHelpData[6]['shortcutType'])), React.createElement(\"div\", {\n        className: \"keyboard-shortcut-container\"\n      }, React.createElement(\"div\", {\n        className: \"col-4\"\n      }, this.renderShortcut(this.shortcutData[5]['Bold'][0]), this.renderShortcut(this.shortcutData[5]['Bold'][1])), React.createElement(\"div\", {\n        className: \"col-8\"\n      }, t(userHelpData[5].shortcutData['Bold']))), React.createElement(\"div\", {\n        className: \"keyboard-shortcut-container\"\n      }, React.createElement(\"div\", {\n        className: \"col-4\"\n      }, this.renderShortcut(this.shortcutData[5]['Italic'][0]), this.renderShortcut(this.shortcutData[5]['Italic'][1])), React.createElement(\"div\", {\n        className: \"col-8\"\n      }, t(userHelpData[5].shortcutData['Italic']))), React.createElement(\"div\", {\n        className: \"keyboard-shortcut-container\"\n      }, React.createElement(\"div\", {\n        className: \"col-4\"\n      }, this.renderShortcut(this.shortcutData[5]['Italic_Bold'][0]), this.renderShortcut(this.shortcutData[5]['Italic_Bold'][1])), React.createElement(\"div\", {\n        className: \"col-8\"\n      }, t(userHelpData[5].shortcutData['Italic_Bold']))), this.renderContainer(this.shortcutData[5]['Inline_code'][0], t(userHelpData[5].shortcutData['Inline_code']))), React.createElement(\"div\", {\n        className: \"pb-2\"\n      }, React.createElement(\"div\", {\n        className: \"keyboard-shortcut-title pb-1\"\n      }, t(userHelpData[2]['shortcutType'])), React.createElement(\"div\", {\n        className: \"keyboard-shortcut-container\"\n      }, React.createElement(\"div\", {\n        className: \"col-4\"\n      }, this.renderShortcut(this.shortcutData[2]['Make_code_block'][0]), this.renderShortcut(this.shortcutData[2]['Make_code_block'][1])), React.createElement(\"div\", {\n        className: \"col-8\"\n      }, t(userHelpData[2].shortcutData['Make_code_block']))), this.renderContainer(this.shortcutData[2]['Insert_indent'][0], t(userHelpData[2].shortcutData['Insert_indent'])), this.renderContainer(this.shortcutData[2]['Insert_new_line'][0], t(userHelpData[2].shortcutData['Insert_new_line'])), this.renderContainer(this.shortcutData[2]['Escape_code_block'][0], t(userHelpData[2].shortcutData['Escape_code_block']))), React.createElement(\"div\", {\n        className: \"pb-2\"\n      }, React.createElement(\"div\", {\n        className: \"keyboard-shortcut-title pb-1\"\n      }, t(userHelpData[3]['shortcutType'])), this.renderContainer(this.shortcutData[3]['Make_Block_quote'][0], t(userHelpData[3].shortcutData['Make_Block_quote'])), this.renderContainer(this.shortcutData[3]['Escape_Block_quote'][0], t(userHelpData[3].shortcutData['Escape_Block_quote']))), React.createElement(\"div\", {\n        className: \"pb-2\"\n      }, React.createElement(\"div\", {\n        className: \"keyboard-shortcut-title pb-1\"\n      }, t(userHelpData[4]['shortcutType'])), this.renderContainer(this.shortcutData[4]['Insert_Table_Row'][0], t(userHelpData[4].shortcutData['Insert_Table_Row'])), this.renderContainer(this.shortcutData[4]['Escape_table'][0], t(userHelpData[4].shortcutData['Escape_table']))), React.createElement(\"div\", {\n        className: \"pb-2\"\n      }, React.createElement(\"div\", {\n        className: \"keyboard-shortcut-title pb-1\"\n      }, t(userHelpData[7]['shortcutType'])), this.renderContainer(this.shortcutData[6]['Paste_screen_shot'][0], t(userHelpData[7].shortcutData['Paste_screen_shot']))))));\n    }\n  }]);\n\n  return KeyboardShortcuts;\n}(React.PureComponent);\n\nexport default withTranslation('dtable')(KeyboardShortcuts);","import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport React from 'react';\nimport ToolBar from '../components/toolbar';\nimport { withTranslation } from 'react-i18next';\nimport { renderNode, renderLeaf, EditorUtils, decorationNode } from './editor-utils/common-editor-utils';\nimport { createEditor, Node } from 'slate';\nimport { withHistory } from 'slate-history';\nimport { deserialize, serialize } from '../utils/slate2markdown/index';\nimport { Editable, withReact, Slate } from '@seafile/slate-react';\nimport { isRangeCollapsed } from './editor-utils/range-utils';\nimport ModalPortal from '../components/modal-portal';\nimport TextLinkHoverMenu from './editor-component/textlink-hovermenu';\nimport ContextMenu from '../components/context-menu';\nimport withBlock from './controller/block-element-controller';\nimport withInline from './controller/inline-element-controller';\nimport withVoid from './controller/void-element-controller';\nimport withMarkdownShortcut from './controller/shortcut-controller';\nimport normalizeNode from './controller/normalize-controller';\nimport Plugin from './editor-plugin';\nimport TableUtils from '../editor/editor-utils/block-element-utils/table-utils';\nimport IconButton from '../components/topbar-component/icon-button';\nimport KeyboardShortcuts from '../components/shortcut-dialog';\nimport './code-highlight-package';\nimport '../css/layout.css';\nimport '../css/richeditor/rich-editor-main.css';\nimport '../css/richeditor/navbar-imgbutton.css';\nimport '../css/richeditor/textlink-hovermenu.css';\nimport '../css/richeditor/image.css';\nimport '../css/richeditor/link.css';\nimport '../css/topbar.css';\n\nvar SimpleEditor = /*#__PURE__*/function (_React$Component) {\n  _inherits(SimpleEditor, _React$Component);\n\n  function SimpleEditor(props) {\n    var _this;\n\n    _classCallCheck(this, SimpleEditor);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(SimpleEditor).call(this, props));\n\n    _this.onChange = function (value) {\n      _this.setState({\n        value: value\n      }); // hide context menu when content change\n\n\n      if (_this.state.isShowContextMenu === true) {\n        _this.setState({\n          isShowContextMenu: false\n        });\n\n        _this.contextMenuPosition = {};\n      }\n\n      var operations = _this.editor.operations;\n      var hasChange = operations.some(function (o) {\n        return o.type !== 'set_selection' && o.type !== 'set_value';\n      });\n      if (hasChange) _this.contentChanged = true;\n    };\n\n    _this.foucsEditor = function () {\n      _this.editorRef.firstChild.focus();\n    };\n\n    _this.hasContentChange = function () {\n      return _this.contentChanged;\n    };\n\n    _this.onToggleLinkDialog = function () {\n      _this.setState({\n        isShowLinkDialog: !_this.state.isShowLinkDialog\n      });\n    };\n\n    _this.onToggleImageDialog = function () {\n      _this.setState({\n        isShowImageDialog: !_this.state.isShowImageDialog\n      });\n    };\n\n    _this.onContextMenu = function (event) {\n      if (_this.tableUtils.isInTable()) {\n        event.preventDefault();\n        _this.contextMenuPosition = {\n          left: event.clientX,\n          top: event.clientY\n        };\n\n        _this.setState({\n          isShowContextMenu: !_this.state.isShowContextMenu\n        });\n      }\n    };\n\n    _this.toggleShortcutDialog = function () {\n      _this.setState({\n        isShowShortcutDialog: !_this.state.isShowShortcutDialog\n      });\n    };\n\n    _this.editor = normalizeNode(withMarkdownShortcut(withVoid(withBlock(withInline(withHistory(withReact(createEditor())))))));\n    _this.editor.editorApi = props.editorApi;\n    window.editor = _this.editor;\n    _this.editorUtils = new EditorUtils(_this.editor);\n    _this.tableUtils = new TableUtils(_this.editor);\n    _this.plugin = new Plugin(_this.editor);\n    _this.editorRef = null;\n    _this.contextMenuPosition = {};\n    _this.state = {\n      value: deserialize(props.value),\n      isShowLinkDialog: false,\n      isShowImageDialog: false,\n      isShowBigImage: false,\n      isShowContextMenu: false,\n      isShowShortcutDialog: false\n    };\n    return _this;\n  }\n\n  _createClass(SimpleEditor, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.props.onRef(this);\n    }\n  }, {\n    key: \"getMarkdown\",\n    value: function getMarkdown() {\n      this.contentChanged = false;\n      return serialize(this.state.value);\n    }\n  }, {\n    key: \"getValue\",\n    value: function getValue() {\n      return this.state.value;\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var _this$state = this.state,\n          value = _this$state.value,\n          isShowLinkDialog = _this$state.isShowLinkDialog,\n          isShowImageDialog = _this$state.isShowImageDialog;\n      var editor = this.editor,\n          foucsEditor = this.foucsEditor;\n      var toolbarStatus = this.editorUtils.getToolbarStatus();\n      var _this$props = this.props,\n          readOnly = _this$props.readOnly,\n          t = _this$props.t;\n      var selectionCollapsed = isRangeCollapsed(editor.selection);\n      return React.createElement(\"div\", {\n        className: \"seafile-editor-module seafile-simple-editor\"\n      }, React.createElement(Slate, {\n        editor: this.editor,\n        value: value,\n        onChange: this.onChange\n      }, React.createElement(\"div\", {\n        className: \"seafile-rich-editor-topbar\"\n      }, React.createElement(ToolBar, {\n        onToggleLinkDialog: this.onToggleLinkDialog,\n        onToggleImageDialog: this.onToggleImageDialog,\n        toolbarStatus: toolbarStatus,\n        isSimpleEditor: true,\n        isShowLinkDialog: isShowLinkDialog,\n        isShowImageDialog: isShowImageDialog\n      }), React.createElement(\"div\", {\n        className: 'btn-group editor-btn-group'\n      }, React.createElement(IconButton, {\n        isRichEditor: true,\n        text: t('Shortcut_help'),\n        id: 'helpIcon',\n        className: 'use-help-icon',\n        icon: 'iconfont icon-use-help',\n        onMouseDown: function onMouseDown(event) {\n          return _this2.toggleShortcutDialog();\n        }\n      }))), React.createElement(\"div\", {\n        className: \"editor-container\"\n      }, React.createElement(\"div\", {\n        ref: function ref(_ref) {\n          return _this2.editorRef = _ref;\n        },\n        onClick: value.length === 1 && value[0].type === 'paragraph' && Node.text(value[0].children[0]).length === 0 ? foucsEditor : null,\n        className: \"editor article\"\n      }, React.createElement(Editable, {\n        renderElement: function renderElement(props) {\n          return renderNode(props, editor, readOnly);\n        },\n        className: 'editor-component',\n        renderLeaf: renderLeaf,\n        onContextMenu: this.onContextMenu,\n        onCopy: function onCopy(event) {\n          _this2.plugin.onCopy(event, editor);\n        },\n        onCut: function onCut(event) {\n          return _this2.plugin.onCut(event);\n        },\n        autoFocus: true,\n        onKeyDown: this.plugin.onKeyDown,\n        decorate: decorationNode\n      })), toolbarStatus.isLinkActive && selectionCollapsed ? React.createElement(ModalPortal, null, React.createElement(TextLinkHoverMenu, {\n        onToggleLinkDialog: this.onToggleLinkDialog,\n        editorUtils: this.editorUtils\n      })) : null, this.state.isShowContextMenu && React.createElement(ModalPortal, null, React.createElement(ContextMenu, {\n        tableUtils: this.tableUtils,\n        contextMenuPosition: this.contextMenuPosition\n      })), this.state.isShowShortcutDialog && React.createElement(KeyboardShortcuts, {\n        userHelp: t('userHelp', {\n          returnObjects: true\n        }),\n        toggleShortcutDialog: this.toggleShortcutDialog\n      }))));\n    }\n  }]);\n\n  return SimpleEditor;\n}(React.Component);\n\nexport default withTranslation('seafile-editor')(SimpleEditor);","import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport React from 'react';\n\nvar ShortCut = /*#__PURE__*/function (_React$Component) {\n  _inherits(ShortCut, _React$Component);\n\n  function ShortCut(props) {\n    var _this;\n\n    _classCallCheck(this, ShortCut);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(ShortCut).call(this, props)); // get platform of browser\n\n    _this.platfrom = navigator.platform.indexOf('Win') < 0 ? 'Mac' : 'Win';\n    return _this;\n  }\n\n  _createClass(ShortCut, [{\n    key: \"render\",\n    value: function render() {\n      return React.createElement(\"li\", {\n        className: 'help-shortcut'\n      }, React.createElement(\"div\", {\n        className: 'help-shortcut-left'\n      }, this.props.shortcutName), React.createElement(\"div\", {\n        className: 'help-shortcut-right'\n      }, React.createElement(ShortCutRight, {\n        platfrom: this.platform,\n        shortcuts: this.props.shortcuts\n      })));\n    }\n  }]);\n\n  return ShortCut;\n}(React.Component);\n\nvar ShortCutRight = /*#__PURE__*/function (_React$PureComponent) {\n  _inherits(ShortCutRight, _React$PureComponent);\n\n  function ShortCutRight() {\n    _classCallCheck(this, ShortCutRight);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(ShortCutRight).apply(this, arguments));\n  }\n\n  _createClass(ShortCutRight, [{\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      return React.createElement(React.Fragment, null, this.props.shortcuts.map(function (shortcut) {\n        var shortcutFirKey = shortcut[0];\n        var shortcutSecnKey = shortcut[1];\n\n        if (typeof shortcut[0] === 'object') {\n          if (_this2.platfrom === 'Win') {\n            shortcutFirKey = shortcut[0][0];\n          } else {\n            shortcutFirKey = shortcut[0][1];\n          }\n        }\n\n        return React.createElement(\"div\", {\n          className: 'help-shortcut-right-container',\n          key: 'help' + shortcut[0]\n        }, shortcutFirKey ? React.createElement(\"div\", {\n          className: 'key shortcut-first'\n        }, shortcutFirKey) : null, shortcutSecnKey ? React.createElement(\"div\", {\n          className: 'key shortcut-second'\n        }, shortcutSecnKey) : null);\n      }));\n    }\n  }]);\n\n  return ShortCutRight;\n}(React.PureComponent);\n\nvar HelpShortcutList = /*#__PURE__*/function (_React$PureComponent2) {\n  _inherits(HelpShortcutList, _React$PureComponent2);\n\n  function HelpShortcutList(props) {\n    var _this3;\n\n    _classCallCheck(this, HelpShortcutList);\n\n    _this3 = _possibleConstructorReturn(this, _getPrototypeOf(HelpShortcutList).call(this, props));\n    _this3.shortcutData = [{\n      'Make_list': [['*/-', 'space']],\n      'Make_ordered_list': [['1.', 'space']],\n      'Insert_new_item': [['Enter']],\n      'Insert_child_in_item': [['Shift', 'Enter']],\n      'Increase_depth': [['Tab']]\n    }, {\n      'Heading_1': [['#', 'space']],\n      'Heading_2': [['##', 'space']],\n      'Heading_3': [['###', 'space']],\n      'Heading_4': [['####', 'space']],\n      'Heading_5': [['#####', 'space']],\n      'Heading_6': [['######', 'space']]\n    }, {\n      'Make_code_block': [['```']],\n      'Insert_new_line': [['Enter']],\n      'Escape_code_block': [[['Ctrl', 'Cmd'], 'Enter']],\n      'Insert_indent': [['Tab']]\n    }, {\n      'Make_Block_quote': [['>', 'space']],\n      'Escape_Block_quote': [['Enter']]\n    }, {\n      'Insert_Table_Row': [['Enter']],\n      'Escape_table': [[['Ctrl', 'Cmd'], 'Enter']]\n    }, {\n      'Insert_Formula': [[['Ctrl', 'Cmd'], '$']]\n    }, {\n      'Bold': [['**bold** / __bold__', 'space']],\n      'Italic': [['*italic* / _italic_', 'space']],\n      'Italic_Bold': [['***italic*** / ___italic___', 'space']],\n      'Inline_code': [['`code`', 'space']]\n    }, {\n      'Save_file': [[['Ctrl', 'Cmd'], 's']]\n    }, {\n      'Paste_screen_shot': [[['Ctrl', 'Cmd'], 'v']],\n      'Drag_image_from_anywhere_to_upload_it': []\n    }];\n    return _this3;\n  }\n\n  _createClass(HelpShortcutList, [{\n    key: \"render\",\n    value: function render() {\n      var title = this.props.data.shortcutType;\n      var dataList = this.props.data.shortcutData;\n      var liArr = [];\n\n      for (var prop in dataList) {\n        var shortcutKeyArr = this.shortcutData[this.props.index][prop];\n        liArr.push(React.createElement(ShortCut, {\n          key: 'help ' + prop,\n          shortcutName: dataList[prop],\n          shortcuts: shortcutKeyArr\n        }));\n      }\n\n      return React.createElement(\"div\", {\n        className: 'help-content-container'\n      }, React.createElement(\"h5\", {\n        className: 'help-shortcut-type'\n      }, title), React.createElement(\"ul\", {\n        className: 'help-shortcut-list'\n      }, liArr));\n    }\n  }]);\n\n  return HelpShortcutList;\n}(React.PureComponent);\n\nvar UserHelpDialog = /*#__PURE__*/function (_React$PureComponent3) {\n  _inherits(UserHelpDialog, _React$PureComponent3);\n\n  function UserHelpDialog() {\n    _classCallCheck(this, UserHelpDialog);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(UserHelpDialog).apply(this, arguments));\n  }\n\n  _createClass(UserHelpDialog, [{\n    key: \"render\",\n    value: function render() {\n      return React.createElement(\"div\", {\n        className: 'seafile-editor-help align-self-end'\n      }, React.createElement(\"div\", {\n        className: 'help-header d-flex'\n      }, React.createElement(\"div\", {\n        className: 'help-title'\n      }, this.props.userHelp.title), React.createElement(\"div\", {\n        className: 'help-close',\n        onClick: this.props.hideHelpDialog\n      }, React.createElement(\"i\", {\n        className: 'iconfont icon-times-circle'\n      }))), React.createElement(\"div\", {\n        className: 'help-content'\n      }, this.props.userHelp.userHelpData.map(function (item, index) {\n        return React.createElement(HelpShortcutList, {\n          key: 'help-list' + index,\n          index: index,\n          data: item\n        });\n      })));\n    }\n  }]);\n\n  return UserHelpDialog;\n}(React.PureComponent);\n\nexport default UserHelpDialog;","import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport React from 'react';\nimport { Button } from 'reactstrap';\nimport { processor } from '../utils/seafile-markdown2html';\n\nvar CommentDialog = /*#__PURE__*/function (_React$Component) {\n  _inherits(CommentDialog, _React$Component);\n\n  function CommentDialog(props) {\n    var _this;\n\n    _classCallCheck(this, CommentDialog);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(CommentDialog).call(this, props));\n\n    _this.handleCommentChange = function (event) {\n      var comment = event.target.value;\n\n      _this.setState({\n        comment: comment\n      });\n    };\n\n    _this.submitComment = function () {\n      var comment = _this.state.comment.trim();\n\n      if (comment.length > 0 && _this.props.quote.length > 0) {\n        var detail = {\n          quote: _this.props.quote,\n          position: _this.props.commentPosition\n        };\n        var detailJSON = JSON.stringify(detail);\n\n        _this.props.editorApi.postComment(comment, detailJSON).then(function (res) {\n          _this.props.onCommentAdded();\n        });\n      }\n    };\n\n    _this.setQuoteText = function (mdQuote) {\n      processor.process(mdQuote).then(function (result) {\n        var quote = String(result);\n\n        _this.setState({\n          quote: quote\n        });\n      });\n    };\n\n    _this.state = {\n      comment: '',\n      quote: ''\n    };\n    return _this;\n  }\n\n  _createClass(CommentDialog, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.setQuoteText(this.props.quote);\n    }\n  }, {\n    key: \"componentWillReceiveProps\",\n    value: function componentWillReceiveProps(nextProps) {\n      if (this.props.quote !== nextProps.quote) {\n        this.setQuoteText(nextProps.quote);\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(\"div\", {\n        className: \"comment-dialog\"\n      }, React.createElement(\"div\", null, this.props.editorApi.name), React.createElement(\"blockquote\", {\n        className: \"comment-dialog-quote\"\n      }, React.createElement(\"div\", {\n        dangerouslySetInnerHTML: {\n          __html: this.state.quote\n        }\n      })), React.createElement(\"textarea\", {\n        value: this.state.comment,\n        onChange: this.handleCommentChange\n      }), React.createElement(\"div\", {\n        className: \"button-group\"\n      }, React.createElement(Button, {\n        size: \"sm\",\n        color: \"primary\",\n        onClick: this.submitComment\n      }, this.props.t('submit')), React.createElement(Button, {\n        size: \"sm\",\n        color: \"secondary\",\n        onClick: this.props.toggleCommentDialog\n      }, this.props.t('cancel'))), React.createElement(\"span\", {\n        className: \"comment-dialog-triangle\"\n      }));\n    }\n  }]);\n\n  return CommentDialog;\n}(React.Component);\n\nexport default CommentDialog;","import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport React from 'react';\nimport { Tooltip } from 'reactstrap';\nimport '../css/richeditor/participants-list.css';\n\nvar ParticipantsList = /*#__PURE__*/function (_React$Component) {\n  _inherits(ParticipantsList, _React$Component);\n\n  function ParticipantsList(props) {\n    var _this;\n\n    _classCallCheck(this, ParticipantsList);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(ParticipantsList).call(this, props));\n\n    _this.handleClick = function () {\n      _this.props.openDialogs && _this.props.openDialogs('add-participant');\n    };\n\n    _this.tooltipToggle = function () {\n      _this.setState({\n        tooltipOpen: !_this.state.tooltipOpen\n      });\n    };\n\n    _this.state = {\n      tooltipOpen: false\n    };\n    return _this;\n  }\n\n  _createClass(ParticipantsList, [{\n    key: \"render\",\n    value: function render() {\n      var participants = this.props.participants;\n      return React.createElement(\"div\", {\n        className: \"participants mb-2 position-relative\"\n      }, participants.map(function (item, index) {\n        return React.createElement(Participant, {\n          item: item,\n          index: index,\n          key: index\n        });\n      }), React.createElement(\"span\", {\n        className: \"add-participants\",\n        onClick: this.handleClick,\n        id: \"add-participant-icon\"\n      }, React.createElement(\"i\", {\n        className: \"iconfont icon-plus-circle\"\n      })), React.createElement(Tooltip, {\n        toggle: this.tooltipToggle,\n        delay: {\n          show: 0,\n          hide: 0\n        },\n        target: \"add-participant-icon\",\n        placement: \"bottom\",\n        isOpen: this.state.tooltipOpen\n      }, this.props.t('Add_participants')));\n    }\n  }]);\n\n  return ParticipantsList;\n}(React.Component);\n\nvar Participant = /*#__PURE__*/function (_React$Component2) {\n  _inherits(Participant, _React$Component2);\n\n  function Participant(props) {\n    var _this2;\n\n    _classCallCheck(this, Participant);\n\n    _this2 = _possibleConstructorReturn(this, _getPrototypeOf(Participant).call(this, props));\n\n    _this2.toggleAvatarTooltip = function () {\n      _this2.setState({\n        showAvatarTooltip: !_this2.state.showAvatarTooltip\n      });\n    };\n\n    _this2.state = {\n      showAvatarTooltip: false\n    };\n    return _this2;\n  }\n\n  _createClass(Participant, [{\n    key: \"render\",\n    value: function render() {\n      var _this$props = this.props,\n          item = _this$props.item,\n          index = _this$props.index;\n      var target = 'participant-avatar-' + index;\n      return React.createElement(\"span\", {\n        className: \"participant-avatar\"\n      }, React.createElement(\"img\", {\n        src: item.avatar_url,\n        className: \"avatar\",\n        id: target,\n        alt: \"avatar\",\n        key: index\n      }), React.createElement(Tooltip, {\n        toggle: this.toggleAvatarTooltip,\n        delay: {\n          show: 0,\n          hide: 0\n        },\n        target: target,\n        placement: \"bottom\",\n        isOpen: this.state.showAvatarTooltip\n      }, item.name));\n    }\n  }]);\n\n  return Participant;\n}(React.Component);\n\nexport default ParticipantsList;","var defaultStyle = {\n  control: {\n    backgroundColor: '#fff',\n    fontSize: 14,\n    fontWeight: 'normal'\n  },\n  highlighter: {\n    overflow: 'hidden'\n  },\n  input: {\n    margin: 0\n  },\n  '&singleLine': {\n    control: {\n      display: 'inline-block',\n      width: 130\n    },\n    highlighter: {\n      padding: 1,\n      border: '2px inset transparent'\n    },\n    input: {\n      padding: 1,\n      border: '2px inset'\n    }\n  },\n  '&multiLine': {\n    control: {},\n    highlighter: {\n      padding: 9\n    },\n    input: {\n      padding: '8px 6px',\n      minHeight: 90,\n      height: 90,\n      border: '1px solid #e6e6dd',\n      borderRadius: '5px',\n      overfflowY: 'auto',\n      '&focused': {\n        backgroundColor: '#cee4e5',\n        outlineOffset: '-2px',\n        outlineColor: '-webkit-focus-ring-color',\n        outlineStyle: 'auto',\n        outlineWidth: '5px'\n      }\n    }\n  },\n  suggestions: {\n    list: {\n      backgroundColor: 'white',\n      border: '1px solid rgba(0,0,0,0.15)',\n      fontSize: 14,\n      maxHeight: 200,\n      overflow: 'auto',\n      position: 'absolute',\n      bottom: 14,\n      width: '150px'\n    },\n    item: {\n      width: 'auto',\n      padding: '5px 15px',\n      overflowX: 'auto',\n      borderBottom: '1px solid rgba(0,0,0,0.15)',\n      '&focused': {\n        backgroundColor: '#f19654',\n        color: '#fff',\n        fontWeight: '400'\n      }\n    }\n  }\n};\nexport { defaultStyle };","import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport React from 'react';\nimport moment from 'moment';\nimport { processor } from '../utils/seafile-markdown2html';\nimport { Button, Dropdown, DropdownToggle, DropdownMenu, DropdownItem } from 'reactstrap';\nimport ParticipantsList from './participants-list';\nimport toaster from '../components/toast';\nimport { MentionsInput, Mention } from 'react-mentions';\nimport { defaultStyle } from '../css/react-mentions-default-style';\nimport '../css/richeditor/comments-list.css';\n\nvar CommentPanel = /*#__PURE__*/function (_React$Component) {\n  _inherits(CommentPanel, _React$Component);\n\n  function CommentPanel(props) {\n    var _this;\n\n    _classCallCheck(this, CommentPanel);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(CommentPanel).call(this, props));\n\n    _this.toggleResolvedComment = function () {\n      _this.setState({\n        showResolvedComment: !_this.state.showResolvedComment\n      });\n    };\n\n    _this.listComments = function (isScroll) {\n      _this.props.editorApi.listComments().then(function (res) {\n        _this.setState({\n          commentsList: res.data.comments\n        });\n\n        if (isScroll) {\n          var that = _assertThisInitialized(_this);\n\n          setTimeout(function () {\n            that.refs.commentsList.scrollTo(0, 10000);\n          }, 100);\n        }\n      });\n    };\n\n    _this.handleCommentChange = function (event) {\n      _this.setState({\n        comment: event.target.value\n      });\n    };\n\n    _this.resolveComment = function (event) {\n      _this.props.editorApi.updateComment(event.target.id, 'true').then(function () {\n        _this.listComments();\n      });\n    };\n\n    _this.deleteComment = function (event) {\n      _this.props.editorApi.deleteComment(event.target.id).then(function () {\n        _this.listComments();\n      });\n    };\n\n    _this.editComment = function (commentID, newComment) {\n      _this.props.editorApi.updateComment(commentID, null, null, newComment).then(function (res) {\n        _this.listComments();\n      });\n    };\n\n    _this.listRepoRelatedUsers = function () {\n      if (!window.showParticipants) return;\n\n      _this.props.editorApi.listRepoRelatedUsers().then(function (res) {\n        var users = res.data.user_list.map(function (item) {\n          return {\n            id: item.email,\n            display: item.name\n          };\n        });\n\n        _this.setState({\n          relatedUsers: users\n        });\n      });\n    };\n\n    _this.addComment = function () {\n      if (!_this.state.comment.trim()) return;\n\n      _this.props.editorApi.postComment(_this.state.comment.trim()).then(function () {\n        _this.listComments(true);\n      }).catch(function (err) {\n        if (err.response.data) {\n          toaster.danger(err.response.data['error_msg'], {\n            duration: 3\n          });\n        }\n      });\n\n      _this.setState({\n        comment: ''\n      });\n    };\n\n    _this.onSubmit = function () {\n      if (window.showParticipants) {\n        _this.addParticipant(_this.props.editorApi.userName);\n      }\n\n      if (_this.toBeAddedParticipant.length === 0 || !window.showParticipants) {\n        _this.addComment();\n      } else {\n        _this.props.editorApi.addFileParticipants(_this.toBeAddedParticipant).then(function (res) {\n          _this.toBeAddedParticipant = [];\n\n          _this.addComment();\n\n          _this.props.onParticipantsChange();\n        }).catch(function (err) {\n          if (err.response.data) {\n            toaster.danger(err.response.data['error_msg'], {\n              duration: 3\n            });\n          }\n        });\n      }\n    };\n\n    _this.checkParticipant = function (email) {\n      return _this.props.participants.map(function (participant) {\n        return participant.email;\n      }).includes(email);\n    };\n\n    _this.addParticipant = function (email) {\n      if (_this.checkParticipant(email)) return;\n\n      _this.toBeAddedParticipant.push(email);\n    };\n\n    _this.renderUserSuggestion = function (entry, search, highlightedDisplay, index, focused) {\n      return React.createElement(\"div\", {\n        className: \"user \".concat(focused ? 'focused' : '')\n      }, highlightedDisplay);\n    };\n\n    _this.state = {\n      commentsList: [],\n      showResolvedComment: true,\n      comment: '',\n      relatedUsers: null\n    };\n    _this.toBeAddedParticipant = [];\n    return _this;\n  }\n\n  _createClass(CommentPanel, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.listComments();\n      this.listRepoRelatedUsers();\n    }\n  }, {\n    key: \"componentWillReceiveProps\",\n    value: function componentWillReceiveProps(nextProps) {\n      if (this.props.relistComment !== nextProps.relistComment) this.listComments(true);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var t = this.props.t;\n      var participants = this.props.participants;\n      return React.createElement(\"div\", {\n        className: \"seafile-comment\"\n      }, React.createElement(\"div\", {\n        className: \"seafile-comment-toggle-resolved\"\n      }, React.createElement(\"div\", {\n        className: 'seafile-comment-title-text'\n      }, t('Show_resolved_comments')), React.createElement(\"div\", {\n        className: 'seafile-comment-title-toggle d-flex'\n      }, React.createElement(\"label\", {\n        className: \"custom-switch\",\n        id: \"toggle-resolved-comments\"\n      }, React.createElement(\"input\", {\n        type: \"checkbox\",\n        name: \"option\",\n        className: \"custom-switch-input\",\n        onChange: this.toggleResolvedComment,\n        checked: this.state.showResolvedComment && 'checked'\n      }), React.createElement(\"span\", {\n        className: \"custom-switch-indicator\"\n      })))), React.createElement(\"ul\", {\n        className: window.showParticipants ? 'seafile-comment-list show-participants' : 'seafile-comment-list',\n        ref: \"commentsList\"\n      }, this.state.commentsList.length > 0 && this.state.commentsList.map(function (item) {\n        var index = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n        var arr = arguments.length > 2 ? arguments[2] : undefined;\n        var oldTime = new Date(item.created_at).getTime();\n        var time = moment(oldTime).format('YYYY-MM-DD HH:mm');\n        return React.createElement(React.Fragment, {\n          key: item.id\n        }, React.createElement(CommentItem, {\n          item: item,\n          time: time,\n          t: _this2.props.t,\n          deleteComment: _this2.deleteComment,\n          resolveComment: _this2.resolveComment,\n          editComment: _this2.editComment,\n          showResolvedComment: _this2.state.showResolvedComment,\n          editorApi: _this2.props.editorApi,\n          scrollToQuote: _this2.props.scrollToQuote\n        }));\n      }), this.state.commentsList.length === 0 && React.createElement(\"li\", {\n        className: \"comment-vacant\"\n      }, t('no_comment_yet'))), React.createElement(\"div\", {\n        className: \"seafile-comment-footer\"\n      }, participants && window.showParticipants && React.createElement(ParticipantsList, {\n        openDialogs: this.props.openDialogs,\n        participants: participants,\n        t: this.props.t\n      }), window.showParticipants ? React.createElement(MentionsInput, {\n        value: this.state.comment,\n        onChange: this.handleCommentChange,\n        placeholder: t('add_a_comment'),\n        style: defaultStyle\n      }, React.createElement(Mention, {\n        trigger: \"@\",\n        displayTransform: function displayTransform(username, display) {\n          return \"@\".concat(display);\n        },\n        data: this.state.relatedUsers,\n        renderSuggestion: this.renderUserSuggestion,\n        onAdd: function onAdd(id, display) {\n          _this2.addParticipant(id);\n        },\n        appendSpaceOnAdd: true\n      })) : React.createElement(\"textarea\", {\n        className: \"add-comment-input\",\n        onChange: this.handleCommentChange,\n        value: this.state.comment,\n        placeholder: t('add_a_comment'),\n        clos: \"100\",\n        rows: \"3\",\n        warp: \"virtual\"\n      }), React.createElement(Button, {\n        className: \"submit-comment\",\n        color: \"primary\",\n        size: \"sm\",\n        onClick: this.onSubmit\n      }, t('submit'))));\n    }\n  }]);\n\n  return CommentPanel;\n}(React.Component);\n\nvar CommentItem = /*#__PURE__*/function (_React$Component2) {\n  _inherits(CommentItem, _React$Component2);\n\n  function CommentItem(props) {\n    var _this3;\n\n    _classCallCheck(this, CommentItem);\n\n    _this3 = _possibleConstructorReturn(this, _getPrototypeOf(CommentItem).call(this, props));\n\n    _this3.toggleDropDownMenu = function () {\n      _this3.setState({\n        dropdownOpen: !_this3.state.dropdownOpen\n      });\n    };\n\n    _this3.convertComment = function (item) {\n      processor.process(item.comment).then(function (result) {\n        var html = String(result);\n\n        _this3.setState({\n          html: html\n        });\n      });\n\n      if (item.detail) {\n        var detail = JSON.parse(item.detail);\n        processor.process(detail.quote).then(function (result) {\n          var quote = String(result);\n\n          _this3.setState({\n            quote: quote,\n            position: detail.position\n          });\n        });\n      }\n    };\n\n    _this3.toggleEditComment = function () {\n      _this3.setState({\n        editable: !_this3.state.editable\n      });\n    };\n\n    _this3.updateComment = function (event) {\n      var newComment = _this3.state.newComment;\n\n      if (_this3.props.item.comment !== newComment) {\n        _this3.props.editComment(event.target.id, newComment);\n      }\n\n      _this3.toggleEditComment();\n    };\n\n    _this3.handleCommentChange = function (event) {\n      _this3.setState({\n        newComment: event.target.value\n      });\n    };\n\n    _this3.state = {\n      dropdownOpen: false,\n      html: '',\n      newComment: _this3.props.item.comment,\n      editable: false,\n      quote: '',\n      position: null\n    };\n    return _this3;\n  }\n\n  _createClass(CommentItem, [{\n    key: \"componentWillMount\",\n    value: function componentWillMount() {\n      this.convertComment(this.props.item);\n    }\n  }, {\n    key: \"componentWillReceiveProps\",\n    value: function componentWillReceiveProps(nextProps) {\n      this.convertComment(nextProps.item);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$props = this.props,\n          item = _this$props.item,\n          t = _this$props.t,\n          editorApi = _this$props.editorApi;\n\n      if (item.resolved && !this.props.showResolvedComment) {\n        return null;\n      }\n\n      if (this.state.editable) {\n        return React.createElement(\"li\", {\n          className: \"seafile-comment-item\",\n          id: item.id\n        }, React.createElement(\"div\", {\n          className: \"seafile-comment-info\"\n        }, React.createElement(\"img\", {\n          className: \"avatar\",\n          src: item.avatar_url,\n          alt: \"\"\n        }), React.createElement(\"div\", {\n          className: \"reviewer-info\"\n        }, React.createElement(\"div\", {\n          className: \"reviewer-name ellipsis\"\n        }, item.user_name), React.createElement(\"div\", {\n          className: \"review-time\"\n        }, this.props.time))), React.createElement(\"div\", {\n          className: \"seafile-edit-comment\"\n        }, React.createElement(\"textarea\", {\n          className: \"edit-comment-input\",\n          value: this.state.newComment,\n          onChange: this.handleCommentChange,\n          clos: \"100\",\n          rows: \"3\",\n          warp: \"virtual\"\n        }), React.createElement(Button, {\n          className: \"comment-btn\",\n          color: \"primary\",\n          size: \"sm\",\n          onClick: this.updateComment,\n          id: item.id\n        }, t('Update')), ' ', React.createElement(Button, {\n          className: \"comment-btn\",\n          color: \"secondary\",\n          size: \"sm\",\n          onClick: this.toggleEditComment\n        }, t('cancel'))));\n      }\n\n      return React.createElement(\"li\", {\n        className: item.resolved ? 'seafile-comment-item seafile-comment-item-resolved' : 'seafile-comment-item',\n        id: item.id\n      }, React.createElement(\"div\", {\n        className: \"seafile-comment-info\"\n      }, React.createElement(\"img\", {\n        className: \"avatar\",\n        src: item.avatar_url,\n        alt: \"\"\n      }), React.createElement(\"div\", {\n        className: \"reviewer-info\"\n      }, React.createElement(\"div\", {\n        className: \"reviewer-name ellipsis\"\n      }, item.user_name), React.createElement(\"div\", {\n        className: \"review-time\"\n      }, this.props.time)), React.createElement(Dropdown, {\n        isOpen: this.state.dropdownOpen,\n        size: \"sm\",\n        className: \"seafile-comment-dropdown\",\n        toggle: this.toggleDropDownMenu\n      }, React.createElement(DropdownToggle, {\n        className: \"seafile-comment-dropdown-btn\"\n      }, React.createElement(\"i\", {\n        className: \"iconfont icon-ellipsis-v\"\n      })), React.createElement(DropdownMenu, null, item.user_email === editorApi.userName && React.createElement(DropdownItem, {\n        onClick: this.props.deleteComment,\n        className: \"delete-comment\",\n        id: item.id\n      }, t('delete')), item.user_email === editorApi.userName && React.createElement(DropdownItem, {\n        onClick: this.toggleEditComment,\n        className: \"edit-comment\",\n        id: item.id\n      }, t('edit')), !item.resolved && React.createElement(DropdownItem, {\n        onClick: this.props.resolveComment,\n        className: \"seafile-comment-resolved\",\n        id: item.id\n      }, t('Mark_as_Resolved'))))), item.detail && React.createElement(\"blockquote\", {\n        className: \"seafile-comment-content\"\n      }, React.createElement(\"div\", {\n        onClick: this.props.scrollToQuote.bind(this, this.state.position),\n        dangerouslySetInnerHTML: {\n          __html: this.state.quote\n        }\n      })), React.createElement(\"div\", {\n        className: \"seafile-comment-content\",\n        dangerouslySetInnerHTML: {\n          __html: this.state.html\n        }\n      }));\n    }\n  }]);\n\n  return CommentItem;\n}(React.Component);\n\nexport default CommentPanel;","import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport React from 'react';\nimport moment from 'moment';\nimport ParticipantsList from './participants-list';\nimport '../css/richeditor/detail-list-view.css';\n\nvar DetailListView = /*#__PURE__*/function (_React$Component) {\n  _inherits(DetailListView, _React$Component);\n\n  function DetailListView() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, DetailListView);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(DetailListView)).call.apply(_getPrototypeOf2, [this].concat(args)));\n\n    _this.onEditFileTagToggle = function () {\n      _this.props.openDialogs && _this.props.openDialogs('file_tags');\n    };\n\n    _this.onListRelatedFileToggle = function () {\n      _this.props.openDialogs && _this.props.openDialogs('related_files');\n    };\n\n    _this.bytesToSize = function (bytes) {\n      if (bytes < 0) return '--';\n      var sizes = ['bytes', 'KB', 'MB', 'GB', 'TB', 'PB'];\n\n      if (bytes === 0) {\n        return bytes + ' ' + sizes[0];\n      }\n\n      var i = parseInt(Math.floor(Math.log(bytes) / Math.log(1000)), 10);\n\n      if (i === 0) {\n        return bytes + ' ' + sizes[i];\n      } else {\n        return (bytes / Math.pow(1000, i)).toFixed(1) + ' ' + sizes[i];\n      }\n    };\n\n    return _this;\n  }\n\n  _createClass(DetailListView, [{\n    key: \"render\",\n    value: function render() {\n      var _this$props = this.props,\n          fileTagList = _this$props.fileTagList,\n          relatedFiles = _this$props.relatedFiles,\n          fileInfo = _this$props.fileInfo;\n      var _this$props$editorApi = this.props.editorApi,\n          filePath = _this$props$editorApi.filePath,\n          serviceUrl = _this$props$editorApi.serviceUrl;\n      return React.createElement(\"div\", {\n        className: \"dirent-table-container\"\n      }, React.createElement(\"table\", {\n        className: \"table-thead-hidden\"\n      }, React.createElement(\"thead\", null, React.createElement(\"tr\", null, React.createElement(\"th\", {\n        width: \"40%\"\n      }), React.createElement(\"th\", {\n        width: \"60%\"\n      }))), React.createElement(\"tbody\", null, React.createElement(\"tr\", null, React.createElement(\"th\", null, this.props.t('Size')), React.createElement(\"td\", null, this.bytesToSize(fileInfo.size))), React.createElement(\"tr\", null, React.createElement(\"th\", null, this.props.t('Location')), React.createElement(\"td\", null, filePath)), React.createElement(\"tr\", null, React.createElement(\"th\", null, this.props.t('Last_Update')), React.createElement(\"td\", null, moment(fileInfo.last_modified).fromNow())), React.createElement(\"tr\", {\n        className: \"file-tag-container\"\n      }, React.createElement(\"th\", null, this.props.t('Tags')), React.createElement(\"td\", null, fileTagList.length > 0 && React.createElement(\"ul\", {\n        className: \"file-tag-list\"\n      }, fileTagList.map(function (fileTag) {\n        return React.createElement(\"li\", {\n          key: fileTag.id,\n          className: \"file-tag-item\"\n        }, React.createElement(\"span\", {\n          className: \"file-tag\",\n          style: {\n            backgroundColor: fileTag.tag_color\n          }\n        }), React.createElement(\"span\", {\n          className: \"tag-name\",\n          title: fileTag.tag_name\n        }, fileTag.tag_name));\n      })), React.createElement(\"i\", {\n        className: \"iconfont icon-pencil attr-action-icon\",\n        onClick: this.onEditFileTagToggle\n      }))), React.createElement(\"tr\", {\n        className: \"file-related-files\"\n      }, React.createElement(\"th\", null, this.props.t('Related_Files')), React.createElement(\"td\", null, relatedFiles.length > 0 && React.createElement(\"ul\", null, relatedFiles.map(function (relatedFile, index) {\n        var href = serviceUrl + '/lib/' + relatedFile.repo_id + '/file' + encodeURIComponent(relatedFile.path);\n        return React.createElement(\"li\", {\n          key: index\n        }, React.createElement(\"a\", {\n          href: href,\n          rel: \"noopener noreferrer\",\n          target: \"_blank\"\n        }, relatedFile.name));\n      })), React.createElement(\"i\", {\n        className: \"iconfont icon-pencil attr-action-icon\",\n        onClick: this.onListRelatedFileToggle\n      }))), this.props.participants && window.showParticipants && React.createElement(\"tr\", {\n        className: \"file-participants\"\n      }, React.createElement(\"th\", null, this.props.t('Participants')), React.createElement(\"td\", null, React.createElement(ParticipantsList, {\n        openDialogs: this.props.openDialogs,\n        participants: this.props.participants,\n        t: this.props.t\n      }))))));\n    }\n  }]);\n\n  return DetailListView;\n}(React.Component);\n\nexport default DetailListView;","import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport React from 'react';\nimport OutlineView from './outline';\nimport CommentPanel from './comment-panel';\nimport DetailListView from './detail-list-view';\n\nvar SidePanel = /*#__PURE__*/function (_React$PureComponent) {\n  _inherits(SidePanel, _React$PureComponent);\n\n  function SidePanel() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, SidePanel);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(SidePanel)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      navItem: 'outline'\n    };\n\n    _this.onOutlineClick = function (event) {\n      event.preventDefault();\n\n      _this.props.toggleCommentBtn(false);\n\n      _this.setState({\n        navItem: 'outline'\n      });\n    };\n\n    _this.onMarkdownHintClick = function (event) {\n      event.preventDefault();\n\n      _this.props.toggleCommentBtn(false);\n\n      _this.setState({\n        navItem: 'markdownHint'\n      });\n    };\n\n    _this.onDetailClick = function (event) {\n      event.preventDefault();\n\n      _this.props.toggleCommentBtn(false);\n\n      _this.setState({\n        navItem: 'detail'\n      });\n    };\n\n    _this.onCommentsPanelClick = function (event) {\n      event.preventDefault();\n\n      _this.props.toggleCommentBtn(true);\n\n      _this.setState({\n        navItem: 'commentsPanel'\n      });\n    };\n\n    _this.openMarkdownHint = function () {\n      _this.setState({\n        navItem: 'markdownHint'\n      });\n    };\n\n    return _this;\n  }\n\n  _createClass(SidePanel, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      window.openMarkdownHint = this.openMarkdownHint;\n    }\n  }, {\n    key: \"componentWillReceiveProps\",\n    value: function componentWillReceiveProps(nextProps) {\n      if (nextProps.issues !== this.props.issues) {\n        if (nextProps.issues.issue_list.length > 0) {\n          this.setState({\n            navItem: 'markdownHint'\n          });\n        }\n      }\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      window.openMarkdownHint = null;\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var outlineActive = '';\n      var markdownHint = '';\n      var commentsPanel = '';\n      var detailList = '';\n\n      if (this.state.navItem === 'outline') {\n        outlineActive = 'active';\n      } else if (this.state.navItem === 'commentsPanel') {\n        commentsPanel = 'active';\n      } else if (this.state.navItem === 'detail') {\n        detailList = 'active';\n      } else {\n        markdownHint = 'active';\n      }\n\n      return React.createElement(\"div\", {\n        className: \"side-panel\"\n      }, React.createElement(\"ul\", {\n        className: \"nav justify-content-center\"\n      }, React.createElement(\"li\", {\n        className: \"nav-item\"\n      }, React.createElement(\"a\", {\n        className: 'nav-link ' + outlineActive,\n        href: \"\",\n        onClick: this.onOutlineClick\n      }, React.createElement(\"i\", {\n        className: \"iconfont icon-list-ul\"\n      }))), React.createElement(\"li\", {\n        className: \"nav-item\"\n      }, React.createElement(\"a\", {\n        className: 'nav-link ' + detailList,\n        href: \"\",\n        onClick: this.onDetailClick\n      }, React.createElement(\"i\", {\n        className: 'iconfont icon-info-circle'\n      }))), React.createElement(\"li\", {\n        className: \"nav-item\"\n      }, React.createElement(\"a\", {\n        className: 'nav-link ' + commentsPanel,\n        href: \"\",\n        onClick: this.onCommentsPanelClick\n      }, React.createElement(\"i\", {\n        className: 'iconfont icon-comment'\n      })))), React.createElement(\"div\", {\n        className: \"side-panel-content\"\n      }, this.state.navItem === 'outline' && React.createElement(OutlineView, {\n        editor: this.props.editor,\n        document: this.props.document,\n        t: this.props.t\n      }), this.state.navItem === 'commentsPanel' && React.createElement(CommentPanel, {\n        editorApi: this.props.editorApi,\n        t: this.props.t,\n        scrollToQuote: this.props.scrollToQuote,\n        relistComment: this.props.relistComment,\n        openDialogs: this.props.openDialogs,\n        participants: this.props.participants,\n        onParticipantsChange: this.props.onParticipantsChange\n      }), this.state.navItem === 'detail' && React.createElement(DetailListView, {\n        t: this.props.t,\n        relatedFiles: this.props.relatedFiles,\n        fileTagList: this.props.fileTagList,\n        editorApi: this.props.editorApi,\n        openDialogs: this.props.openDialogs,\n        fileInfo: this.props.fileInfo,\n        participants: this.props.participants\n      })));\n    }\n  }]);\n\n  return SidePanel;\n}(React.PureComponent);\n\nexport default SidePanel;","import _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport React from 'react';\nimport ToolBar from '../components/toolbar';\nimport { withTranslation } from 'react-i18next';\nimport { renderNode, renderLeaf, EditorUtils, decorationNode } from './editor-utils/common-editor-utils';\nimport { createEditor, Node, Editor, Range } from 'slate';\nimport { withHistory } from 'slate-history';\nimport { serialize } from '../utils/slate2markdown/index';\nimport { Editable, withReact, Slate, ReactEditor } from '@seafile/slate-react';\nimport { isRangeCollapsed } from './editor-utils/range-utils';\nimport ModalPortal from '../components/modal-portal';\nimport TextLinkHoverMenu from './editor-component/textlink-hovermenu';\nimport ContextMenu from '../components/context-menu';\nimport withBlock from './controller/block-element-controller';\nimport withInline from './controller/inline-element-controller';\nimport withVoid from './controller/void-element-controller';\nimport withMarkdownShortcut from './controller/shortcut-controller';\nimport normalizeNode from './controller/normalize-controller';\nimport Plugin from './editor-plugin';\nimport TableUtils from '../editor/editor-utils/block-element-utils/table-utils';\nimport UserHelpDialog from '../components/user-help';\nimport CommentDialog from '../components/comment-dialog';\nimport SidePanel from '../components/side-panel';\nimport toaster from '../components/toast';\nimport '../css/richeditor/right-panel.css';\nimport '../css/richeditor/side-panel.css';\nimport '../css/richeditor/navbar-imgbutton.css';\nimport '../css/richeditor/textlink-hovermenu.css';\nimport '../css/richeditor/comments-list.css';\nimport '../css/richeditor/image.css';\nimport '../css/richeditor/link.css';\nimport '../css/richeditor/tree-view.css';\n\nvar SimpleEditor = /*#__PURE__*/function (_React$Component) {\n  _inherits(SimpleEditor, _React$Component);\n\n  function SimpleEditor(props) {\n    var _this;\n\n    _classCallCheck(this, SimpleEditor);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(SimpleEditor).call(this, props));\n\n    _this.getDomNodeByPath = function (path) {\n      var node,\n          parent = document.querySelector('.editor-component');\n\n      while (typeof path[0] === 'number' && parent) {\n        node = parent.children[path[0]];\n        path.shift();\n        parent = node;\n      }\n\n      return node;\n    };\n\n    _this.setBtnPosition = function () {\n      if (!_this.state.showCommentBtn) {\n        return;\n      }\n\n      if (_this.timmer) return;\n      _this.timmer = setTimeout(function () {\n        var selection = _this.editor.selection;\n\n        if (!selection || Range.isCollapsed(selection)) {\n          var _style = _this.refs.commentbtn.style;\n          _style.top = '-1000px';\n          clearTimeout(_this.timmer);\n          _this.timmer = null;\n          return;\n        }\n\n        var focusNodePath = selection.anchor.path.slice();\n        focusNodePath.pop();\n\n        var focusNode = _this.getDomNodeByPath(focusNodePath);\n\n        var style = _this.refs.commentbtn.style;\n        style.right = '40px';\n\n        if (focusNode) {\n          style.top = \"\".concat(focusNode.offsetTop, \"px\");\n        } else {\n          style.top = '-1000px';\n        }\n\n        clearTimeout(_this.timmer);\n        _this.timmer = null;\n      }, 40);\n    };\n\n    _this.initialSidePanel = function () {\n      var mainPanelWidth = _this.getCookie('md-editor-main-panel-width');\n\n      if (mainPanelWidth) _this.setState({\n        mainPanelWidth: mainPanelWidth * 1\n      });\n\n      var isShowSidePanel = _this.getCookie('md-editor-show-side-panel');\n\n      if (isShowSidePanel === 'true') {\n        _this.setState({\n          isShowSidePanel: true\n        });\n      } else if (isShowSidePanel === 'false') {\n        _this.setState({\n          isShowSidePanel: false\n        });\n      }\n    };\n\n    _this.scrollToNode = function (node) {\n      var editor = document.querySelector('.editor-component');\n      var element = editor.childNodes[node.path[0]];\n\n      _this.refs.editorContainer.scrollTo(0, element.offsetTop);\n\n      window.location.hash = encodeURI(node.children[0].text);\n      Editor.select(_this.editor, node.path);\n    };\n\n    _this.showHelpDialog = function () {\n      _this.setState({\n        isShowSidePanel: false,\n        isShowHelpDialog: true\n      });\n    };\n\n    _this.hideHelpDialog = function () {\n      _this.setState({\n        isShowHelpDialog: false\n      });\n    };\n\n    _this.insertRepoImage = function (event) {\n      event.preventDefault();\n      if (_this.props.readOnly) return;\n      _this.props.openDialogs && _this.props.openDialogs('insert_repo_image');\n    };\n\n    _this.onResizeMouseUp = function (event) {\n      if (_this.state.resizeFlag) {\n        _this.setState({\n          resizeFlag: false\n        });\n      }\n\n      _this.setCookie('md-editor-main-panel-width', _this.state.mainPanelWidth);\n    };\n\n    _this.onResizeMouseDown = function (event) {\n      _this.setState({\n        resizeFlag: true\n      });\n    };\n\n    _this.onResizeMouseMove = function (event) {\n      var mainPanelWidth = _this.state.mainPanelWidth + event.nativeEvent.movementX / event.view.innerWidth * 100;\n\n      if (mainPanelWidth >= 82 || mainPanelWidth <= 30) {\n        _this.setState({\n          resizeFlag: false\n        });\n\n        return;\n      }\n\n      _this.setState({\n        mainPanelWidth: mainPanelWidth\n      });\n    };\n\n    _this.toggleSidePanel = function () {\n      if (_this.state.isShowSidePanel) {\n        _this.setState({\n          isShowSidePanel: false\n        });\n\n        _this.setCookie('md-editor-show-side-panel', 'false');\n      } else {\n        _this.setState({\n          isShowSidePanel: true\n        });\n\n        _this.setCookie('md-editor-show-side-panel', 'true');\n      }\n\n      _this.setState({\n        isShowHelpDialog: false\n      });\n    };\n\n    _this.handleCommentOpen = function () {\n      _this.setState({\n        mainPanelWidth: 70,\n        isShowHelpDialog: false\n      });\n    };\n\n    _this.setCookie = function (key, value) {\n      document.cookie = key + '=' + value + '; ';\n    };\n\n    _this.onSave = function (event) {\n      _this.props.onSave();\n    };\n\n    _this.insertRepoFile = function () {\n      if (_this.props.readOnly) return;\n      _this.editorSelection = window.editor.selection;\n      _this.props.openDialogs && _this.props.openDialogs('insert_file');\n    };\n\n    _this.onCommentAdded = function () {\n      _this.toggleCommentDialog();\n\n      _this.setState({\n        relistComment: _this.state.relistComment + 1\n      });\n    };\n\n    _this.toggleCommentBtn = function (value) {\n      _this.setState({\n        showCommentBtn: value\n      });\n    };\n\n    _this.addComment = function (e) {\n      e.stopPropagation();\n\n      _this.getQuote();\n\n      _this.toggleCommentDialog();\n    };\n\n    _this.toggleCommentDialog = function () {\n      _this.setState({\n        showCommentDialog: !_this.state.showCommentDialog\n      });\n    };\n\n    _this.getQuote = function () {\n      _this.quote = serialize(Editor.fragment(_this.editor, _this.editor.selection));\n\n      _this.setState({\n        commentPosition: _this.editor.selection.anchor.path\n      });\n    };\n\n    _this.onChange = function (value) {\n      _this.setState({\n        value: value\n      }); // hide context menu when content change\n\n\n      if (_this.state.isShowContextMenu === true) {\n        _this.setState({\n          isShowContextMenu: false\n        });\n\n        _this.contextMenuPosition = {};\n      }\n\n      _this.props.onChange(value, _this.editor.operations);\n    };\n\n    _this.foucsEditor = function () {\n      _this.editorRef.firstChild.focus();\n    };\n\n    _this.onToggleLinkDialog = function () {\n      _this.setState({\n        isShowLinkDialog: !_this.state.isShowLinkDialog\n      });\n    };\n\n    _this.onToggleFormulaDialog = function () {\n      _this.setState({\n        isShowFormulaDialog: !_this.state.isShowFormulaDialog\n      });\n    };\n\n    _this.onToggleImageDialog = function () {\n      _this.setState({\n        isShowImageDialog: !_this.state.isShowImageDialog\n      });\n    };\n\n    _this.getCookie = function (key) {\n      var name = key + '=';\n      var ca = document.cookie.split(';');\n\n      for (var i = 0; i < ca.length; i++) {\n        var c = ca[i].trim();\n\n        if (c.indexOf(name) === 0) {\n          return c.substring(name.length, c.length);\n        }\n      }\n\n      return '';\n    };\n\n    _this.addComment = function (e) {\n      e.stopPropagation();\n\n      _this.getQuote();\n\n      _this.toggleCommentDialog();\n    };\n\n    _this.scrollToQuote = function (path) {\n      if (!path) return;\n      var editor = _this.editor;\n      var node = editor.children[path[0]];\n      var element = ReactEditor.toDOMNode(editor, node);\n\n      _this.refs.editorContainer.scrollTo(0, element.offsetTop);\n\n      Editor.select(_this.editor, path);\n    };\n\n    _this.onContextMenu = function (event) {\n      if (_this.tableUtils.isInTable()) {\n        event.preventDefault();\n        _this.contextMenuPosition = {\n          left: event.clientX,\n          top: event.clientY\n        };\n\n        _this.setState({\n          isShowContextMenu: !_this.state.isShowContextMenu\n        });\n      }\n    };\n\n    _this.addLink = function (fileName, url, isImage) {\n      if (isImage) {\n        _this.editorUtils.insertImage({\n          url: url,\n          selection: _this.editorSelection\n        });\n\n        return;\n      }\n\n      _this.editorUtils.insertLink({\n        text: fileName,\n        url: url,\n        selection: _this.editorSelection\n      });\n    };\n\n    _this.editor = normalizeNode(withMarkdownShortcut(withVoid(withBlock(withInline(withHistory(withReact(createEditor())))))));\n    _this.editor.editorApi = props.editorApi;\n    _this.editor.onSave = props.onSave;\n    window.editor = _this.editor;\n    window.canInsertFormula = true;\n    _this.editorUtils = new EditorUtils(_this.editor);\n    _this.tableUtils = new TableUtils(_this.editor);\n    _this.plugin = new Plugin(_this.editor);\n    _this.editorRef = null;\n    _this.timmer = null;\n    _this.contextMenuPosition = {};\n    _this.state = {\n      value: props.value,\n      leftNavMode: 'files',\n      mainPanelWidth: 80,\n      resizeFlag: false,\n      isShowHelpDialog: false,\n      isShowSidePanel: false,\n      isShowLinkDialog: false,\n      isShowImageDialog: false,\n      isShowFormulaDialog: false,\n      isShowContextMenu: false,\n      showCommentBtn: false,\n      showCommentDialog: false,\n      commentPosition: null,\n      relistComment: 0\n    };\n    return _this;\n  }\n\n  _createClass(SimpleEditor, [{\n    key: \"componentDidCatch\",\n    value: function componentDidCatch(error) {\n      this.props.resetRichValue();\n      console.log(error);\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      window.richMarkdownEditor = this; // notify current user if others are also editing this file\n\n      var editingUsers = this.props.collabUsers.filter(function (ele) {\n        return ele.is_editing === true && ele.myself === undefined;\n      });\n\n      if (editingUsers.length > 0) {\n        toaster.danger('Another user is editing this file!', {\n          duration: 3\n        });\n      }\n\n      var userAgent = navigator.userAgent.toLowerCase();\n\n      if (userAgent.indexOf('chrome') === -1) {\n        toaster.warning(this.props.t('Editing_files_in_this_browser_can_lead_to_slight_display_problems'), {\n          duration: 4\n        });\n      } // get first text node of the document and focus at the start of the text node\n\n\n      var _Array$from$ = _slicedToArray(Array.from(Node.texts(this.editor.children[0]))[0], 2),\n          textPath = _Array$from$[1];\n\n      textPath.unshift(0);\n      Editor.select(this.editor, {\n        path: textPath,\n        offset: 0\n      });\n    }\n  }, {\n    key: \"componentWillReceiveProps\",\n    value: function componentWillReceiveProps(nextProps) {\n      if (this.props.issues !== nextProps.issues && nextProps.issues.issue_list.length > 0 && !this.state.isShowSidePanel) {\n        this.setState({\n          isShowSidePanel: true\n        }, function () {\n          window.openMarkdownHint && window.openMarkdownHint();\n        });\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var _this$state = this.state,\n          value = _this$state.value,\n          isShowLinkDialog = _this$state.isShowLinkDialog,\n          isShowImageDialog = _this$state.isShowImageDialog,\n          isShowFormulaDialog = _this$state.isShowFormulaDialog;\n      var _this$props = this.props,\n          t = _this$props.t,\n          mode = _this$props.mode,\n          editorApi = _this$props.editorApi;\n      var _this$state2 = this.state,\n          mainPanelWidth = _this$state2.mainPanelWidth,\n          isShowHelpDialog = _this$state2.isShowHelpDialog,\n          isShowSidePanel = _this$state2.isShowSidePanel;\n      var onResizeMove = this.state.resizeFlag ? this.onResizeMouseMove : null;\n      var mainPanelClass = \"seafile-editor-main-panel d-flex align-self-end \".concat(!isShowSidePanel && !isShowHelpDialog ? 'seafile-editor-all-panel' : '');\n      var mainPanelStyle = {\n        width: isShowSidePanel ? mainPanelWidth + '%' : '100%'\n      };\n      var editor = this.editor,\n          foucsEditor = this.foucsEditor;\n      var toolbarStatus = this.editorUtils.getToolbarStatus();\n      var readOnly = this.props.readOnly;\n      var selectionCollapsed = isRangeCollapsed(editor.selection);\n      return React.createElement(\"div\", {\n        className: \"seafile-editor-module seafile-editor\"\n      }, React.createElement(Slate, {\n        editor: this.editor,\n        value: value,\n        onChange: this.onChange\n      }, React.createElement(\"div\", {\n        className: \"seafile-rich-editor-topbar\"\n      }, React.createElement(ToolBar, {\n        onToggleLinkDialog: this.onToggleLinkDialog,\n        onToggleImageDialog: this.onToggleImageDialog,\n        onToggleFormulaDialog: this.onToggleFormulaDialog,\n        toolbarStatus: toolbarStatus,\n        toggleSidePanel: this.toggleSidePanel,\n        insertRepoFile: this.insertRepoFile,\n        isShowLinkDialog: isShowLinkDialog,\n        isShowImageDialog: isShowImageDialog,\n        isShowSidePanel: isShowSidePanel,\n        hasSidePanel: true,\n        mode: mode,\n        readOnly: readOnly,\n        isShowFormulaDialog: isShowFormulaDialog\n      })), React.createElement(\"div\", {\n        className: \"seafile-editor-main d-flex\",\n        onMouseMove: onResizeMove,\n        onMouseUp: this.onResizeMouseUp\n      }, React.createElement(\"div\", {\n        className: mainPanelClass,\n        style: mainPanelStyle\n      }, React.createElement(\"div\", {\n        className: \"editor-container align-self-start\",\n        ref: \"editorContainer\"\n      }, React.createElement(\"div\", {\n        ref: function ref(_ref) {\n          return _this2.editorRef = _ref;\n        },\n        onClick: value.length === 2 && value[0].type === 'paragraph' && Node.text(value[0].children[0]).length === 0 ? foucsEditor : null,\n        className: \"editor article\"\n      }, React.createElement(Editable, {\n        renderElement: function renderElement(props) {\n          return renderNode(props, editor, readOnly);\n        },\n        className: 'editor-component',\n        renderLeaf: renderLeaf,\n        onContextMenu: this.onContextMenu,\n        onCopy: function onCopy(event) {\n          _this2.plugin.onCopy(event, editor);\n        },\n        onCut: function onCut(event) {\n          return _this2.plugin.onCut(event);\n        },\n        autoFocus: true,\n        onKeyDown: this.plugin.onKeyDown,\n        decorate: decorationNode,\n        onSelect: this.setBtnPosition\n      }), this.state.showCommentBtn && React.createElement(\"i\", {\n        className: \"iconfont icon-plus-square seafile-viewer-comment-btn\",\n        ref: \"commentbtn\",\n        onMouseDown: this.addComment\n      })), toolbarStatus.isLinkActive && selectionCollapsed ? React.createElement(ModalPortal, null, React.createElement(TextLinkHoverMenu, {\n        onToggleLinkDialog: this.onToggleLinkDialog,\n        editorUtils: this.editorUtils\n      })) : null, this.state.isShowContextMenu && React.createElement(ModalPortal, null, React.createElement(ContextMenu, {\n        tableUtils: this.tableUtils,\n        contextMenuPosition: this.contextMenuPosition\n      })))), !isShowHelpDialog && isShowSidePanel && React.createElement(React.Fragment, null, React.createElement(\"div\", {\n        className: \"seafile-editor-resize\",\n        style: {\n          right: 100 - mainPanelWidth + '%'\n        },\n        onMouseDown: this.onResizeMouseDown\n      }), React.createElement(\"div\", {\n        className: \"seafile-editor-side-panel align-self-start\",\n        style: {\n          width: 100 - mainPanelWidth + '%'\n        }\n      }, React.createElement(SidePanel, {\n        editor: this,\n        document: value,\n        issues: this.props.issues,\n        scrollToNode: this.scrollToNode,\n        scrollToQuote: this.scrollToQuote,\n        t: this.props.t,\n        editorApi: editorApi,\n        toggleCommentBtn: this.toggleCommentBtn,\n        relistComment: this.state.relistComment,\n        relatedFiles: this.props.relatedFiles,\n        fileTagList: this.props.fileTagList,\n        openDialogs: this.props.openDialogs,\n        fileInfo: this.props.fileInfo,\n        participants: this.props.participants,\n        onParticipantsChange: this.props.onParticipantsChange\n      }))), isShowHelpDialog && React.createElement(UserHelpDialog, {\n        userHelp: t('userHelp', {\n          returnObjects: true\n        }),\n        hideHelpDialog: this.hideHelpDialog\n      }), this.state.showCommentDialog && React.createElement(CommentDialog, {\n        editorApi: editorApi,\n        t: t,\n        quote: this.quote,\n        scrollToQuote: this.scrollToQuote,\n        commentPosition: this.state.commentPosition,\n        onCommentAdded: this.onCommentAdded,\n        toggleCommentDialog: this.toggleCommentDialog\n      }))));\n    }\n  }]);\n\n  return SimpleEditor;\n}(React.Component);\n\nexport default withTranslation('seafile-editor')(SimpleEditor);","import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport React from 'react';\nimport { processor } from '../utils/seafile-markdown2html';\nimport toaster from '../components/toast';\nimport isHotkey from 'is-hotkey';\nimport { withTranslation } from 'react-i18next';\nimport Prism from 'prismjs';\n\nvar className = require('classnames');\n\nvar lodash = require('lodash');\n\nrequire('codemirror/lib/codemirror.css');\n\nrequire('codemirror/mode/markdown/markdown');\n\nrequire('../css/plaineditor/markdown-editor.css');\n\nrequire('prismjs/themes/prism.css');\n\nvar CodeMirror = /*#__PURE__*/function (_React$Component) {\n  _inherits(CodeMirror, _React$Component);\n\n  function CodeMirror() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, CodeMirror);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(CodeMirror)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      isFocused: false\n    };\n\n    _this.focus = function () {\n      if (_this.codeMirror) {\n        _this.codeMirror.focus();\n      }\n    };\n\n    _this.focusChanged = function (focused) {\n      _this.setState({\n        isFocused: focused\n      });\n\n      _this.props.onFocusChange && _this.props.onFocusChange(focused);\n    };\n\n    _this.cursorActivity = function (cm) {\n      _this.props.onCursorActivity && _this.props.onCursorActivity(cm);\n    };\n\n    _this.scrollChanged = function (cm) {\n      _this.props.onScroll && _this.props.onScroll(cm.getScrollInfo());\n    };\n\n    _this.codemirrorValueChanged = function (doc, change) {\n      if (_this.props.onChange && change.origin !== 'setValue') {\n        _this.props.onChange(doc.getValue(), change);\n      }\n    };\n\n    return _this;\n  }\n\n  _createClass(CodeMirror, [{\n    key: \"getCodeMirrorInstance\",\n    value: function getCodeMirrorInstance() {\n      return this.props.codeMirrorInstance || require('codemirror');\n    }\n  }, {\n    key: \"componentWillMount\",\n    value: function componentWillMount() {\n      if (this.props.path) {\n        console.error('Warning: react-codemirror: the `path` prop has been changed to `name`');\n      }\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var codeMirrorInstance = this.getCodeMirrorInstance();\n      this.codeMirror = codeMirrorInstance.fromTextArea(this.textareaNode, this.props.options);\n      this.codeMirror.on('change', this.codemirrorValueChanged);\n      this.codeMirror.on('cursorActivity', this.cursorActivity);\n      this.codeMirror.on('focus', this.focusChanged.bind(this, true));\n      this.codeMirror.on('blur', this.focusChanged.bind(this, false));\n      this.codeMirror.on('scroll', this.scrollChanged);\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      // is there a lighter-weight way to remove the cm instance?\n      if (this.codeMirror) {\n        this.codeMirror.toTextArea();\n      }\n    }\n  }, {\n    key: \"componentWillReceiveProps\",\n    value: function componentWillReceiveProps(nextProps) {\n      if (this.codeMirror && nextProps.initialValue !== undefined && nextProps.initialValue !== this.props.initialValue) {\n        if (this.props.preserveScrollPosition) {\n          var prevScrollPosition = this.codeMirror.getScrollInfo();\n          this.codeMirror.setValue(nextProps.initialValue);\n          this.codeMirror.scrollTo(prevScrollPosition.left, prevScrollPosition.top);\n        } else {\n          this.codeMirror.setValue(nextProps.initialValue);\n        }\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var editorClassName = className('ReactCodeMirror', this.state.isFocused ? 'ReactCodeMirror--focused' : null, this.props.className);\n      return React.createElement(\"div\", {\n        className: editorClassName\n      }, React.createElement(\"textarea\", {\n        ref: function ref(_ref) {\n          return _this2.textareaNode = _ref;\n        },\n        name: this.props.name || this.props.path,\n        defaultValue: this.props.initialValue,\n        autoComplete: \"off\",\n        autoFocus: this.props.autoFocus\n      }));\n    }\n  }]);\n\n  return CodeMirror;\n}(React.Component);\n/*\n\nWhen loading a new file:\n\n             markdownContent                    initialValue\n  index.js  -----------------> PlainMarkdownEditor --------> CodeMirror --> Real CodeMirror\n\nWhen user type in CodeMirror\n\n                    value             value\n   Real CodeMirror ------> CodeMirror ------> PlainMarkdownEditor\n\nOn Save:\n\n                 value\n  MarkdownEditor -----> index.js\n\n*/\n\n\nvar PlainMarkdownEditor = /*#__PURE__*/function (_React$Component2) {\n  _inherits(PlainMarkdownEditor, _React$Component2);\n\n  function PlainMarkdownEditor(props) {\n    var _this3;\n\n    _classCallCheck(this, PlainMarkdownEditor);\n\n    _this3 = _possibleConstructorReturn(this, _getPrototypeOf(PlainMarkdownEditor).call(this, props));\n    _this3.state = {\n      html: '',\n      leftIsBindScroll: false,\n      rightIsBindScroll: false\n    };\n    _this3.scrollData = {\n      scrollPercentage: 0,\n      leftPanel: null,\n      rightPanel: null\n    };\n\n    _this3.updateCode = function (newCode) {\n      _this3.props.onChange(newCode);\n    };\n\n    _this3.onLeftScroll = function (e) {\n      var srcElement = _this3.scrollData.leftPanel;\n      _this3.scrollData.scrollPercentage = srcElement.scrollTop / srcElement.scrollHeight;\n      _this3.scrollData.rightPanel.scrollTop = _this3.scrollData.scrollPercentage * _this3.scrollData.rightPanel.scrollHeight;\n    };\n\n    _this3.onRightScroll = function (e) {\n      var srcElement = _this3.scrollData.rightPanel;\n      _this3.scrollData.scrollPercentage = srcElement.scrollTop / srcElement.scrollHeight;\n      _this3.scrollData.leftPanel.scrollTop = _this3.scrollData.scrollPercentage * _this3.scrollData.leftPanel.scrollHeight;\n    };\n\n    _this3.onEnterLeftPanel = function () {\n      _this3.setState({\n        leftIsBindScroll: true\n      });\n    };\n\n    _this3.onLeaveLeftPanel = function () {\n      _this3.setState({\n        leftIsBindScroll: false\n      });\n    };\n\n    _this3.onEnterRightPanel = function () {\n      _this3.setState({\n        rightIsBindScroll: true\n      });\n    };\n\n    _this3.onLeaveRightPanel = function () {\n      _this3.setState({\n        rightIsBindScroll: false\n      });\n    };\n\n    _this3.onHotKey = function (event) {\n      if (isHotkey('mod+s', event)) {\n        event.preventDefault();\n\n        _this3.props.onSave(event);\n\n        return true;\n      }\n    };\n\n    _this3.options = {\n      lineNumbers: true,\n      mode: 'markdown',\n      lineWrapping: true,\n      scrollbarStyle: null\n    };\n    _this3.setContent = lodash.throttle(_this3.setContent, 1000);\n    return _this3;\n  }\n\n  _createClass(PlainMarkdownEditor, [{\n    key: \"setContent\",\n    value: function setContent(markdownContent) {\n      var _this4 = this;\n\n      processor.process(markdownContent, function (error, vfile) {\n        var html = String(vfile);\n\n        _this4.setState({\n          html: html\n        });\n      });\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      // get relevant dom when component mounted instead of get them when scrolling to improve performance\n      this.scrollData.leftPanel = document.querySelector('.plain-editor-left-panel');\n      this.scrollData.rightPanel = document.querySelector('.plain-editor-right-panel');\n      this.setContent(this.props.currentContent); // notify current user if others are also editing this file\n\n      var editingUsers = this.props.collabUsers.filter(function (ele) {\n        return ele.is_editing === true && ele.myself === undefined;\n      });\n\n      if (editingUsers.length > 0) {\n        toaster.danger('Another user is editing this file!', {\n          duration: 3\n        });\n      }\n    }\n  }, {\n    key: \"componentWillReceiveProps\",\n    value: function componentWillReceiveProps(nextProps) {\n      this.setContent(nextProps.currentContent);\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate() {\n      Prism.highlightAll(); // render math formula\n\n      window.MathJax.typesetPromise(document.querySelectorAll('.math-display'));\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(\"div\", {\n        className: \"seafile-editor-module seafile-editor\"\n      }, React.createElement(\"div\", {\n        className: \"seafile-editor-main plain-editor-main d-flex\"\n      }, React.createElement(\"div\", {\n        className: \"plain-editor-left-panel\",\n        onKeyDown: this.onHotKey,\n        onMouseLeave: this.onLeaveLeftPanel,\n        onMouseEnter: this.onEnterLeftPanel,\n        onScroll: this.state.leftIsBindScroll ? this.onLeftScroll : null\n      }, React.createElement(CodeMirror, {\n        initialValue: this.props.initialValue,\n        onChange: this.updateCode,\n        options: this.options\n      })), React.createElement(\"div\", {\n        className: \"plain-editor-right-panel\",\n        onMouseEnter: this.onEnterRightPanel,\n        onMouseLeave: this.onLeaveRightPanel,\n        onScroll: this.state.rightIsBindScroll ? this.onRightScroll : null\n      }, React.createElement(\"div\", {\n        className: \"preview\"\n      }, React.createElement(\"div\", {\n        className: \"rendered-markdown article\",\n        dangerouslySetInnerHTML: {\n          __html: this.state.html\n        }\n      })))));\n    }\n  }]);\n\n  return PlainMarkdownEditor;\n}(React.Component);\n\nPlainMarkdownEditor.defaultProps = {\n  collabUsers: []\n};\nexport default withTranslation('seafile-editor')(PlainMarkdownEditor);","import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport React from 'react';\nimport toaster from '../components/toast';\nimport { withTranslation } from 'react-i18next';\nimport { Text } from 'slate';\nimport '../css/layout.css';\nimport '../css/topbar.css';\nimport RichMarkdownEditor from './rich-markdown-editor';\nimport PlainMarkdownEditor from './plain-markdown-editor';\nimport { serialize, deserialize } from '../utils/slate2markdown';\n\nvar SeafileEditor = /*#__PURE__*/function (_React$Component) {\n  _inherits(SeafileEditor, _React$Component);\n\n  function SeafileEditor(props) {\n    var _this;\n\n    _classCallCheck(this, SeafileEditor);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(SeafileEditor).call(this, props));\n\n    _this.switchToPlainTextEditor = function () {\n      // TODO: performance, change to do serialize in async way\n      if (_this.props.editorMode === 'rich') {\n        var value = _this.state.richValue;\n        var str = serialize(value);\n\n        _this.props.setEditorMode('plain');\n\n        _this.setState({\n          initialPlainValue: str,\n          currentContent: str\n        });\n      }\n\n      if (_this.props.collabServer) {\n        _this.props.emitSwitchEditor(false);\n      }\n    };\n\n    _this.switchToRichTextEditor = function () {\n      // TODO: performance, change to do deserialize in async way\n      _this.setState({\n        richValue: deserialize(_this.state.currentContent)\n      });\n\n      _this.props.setEditorMode('rich');\n\n      if (_this.props.collabServer) {\n        _this.props.emitSwitchEditor(false);\n      }\n    };\n\n    _this.onUnload = function (event) {\n      if (!_this.props.contentChanged) return;\n      var confirmationMessage = 'Leave this page? The system may not save your changes.';\n\n      _this.props.clearTimer();\n\n      _this.props.deleteDraft && _this.props.deleteDraft();\n      event.returnValue = confirmationMessage;\n      return confirmationMessage;\n    };\n\n    _this.onChange = function (value, operations) {\n      if (_this.props.editorMode === 'rich') {\n        _this.setState({\n          richValue: value\n        });\n\n        _this.props.setDraftValue('rich', _this.state.richValue);\n\n        var ops = operations.filter(function (o) {\n          return o.type !== 'set_selection' && o.type !== 'set_value';\n        });\n\n        if (ops.length !== 0) {\n          _this.props.onContentChanged(true);\n\n          if (_this.autoSave) _this.props.autoSaveDraft();\n        }\n      } else {\n        _this.setState({\n          currentContent: value\n        });\n\n        _this.props.onContentChanged(true);\n\n        _this.props.setDraftValue('rich', _this.state.richValue);\n\n        _this.props.autoSaveDraft();\n      }\n    };\n\n    _this.saveContent = function (str) {\n      _this.props.editorApi.saveContent(str).then(function () {\n        _this.props.onSaving(false);\n\n        _this.props.onContentChanged(false); // remove markdown lint temporarily\n        // if (this.props.markdownLint) {\n        //   const slateValue = this.state.richValue;\n        //   this.props.editorApi.markdownLint(JSON.stringify(slateValue)).then((res) => {\n        //     this.setState({\n        //       issues: res.data\n        //     });\n        //   });\n        // }\n\n\n        _this.lastModifyTime = new Date();\n        toaster.success(_this.props.t('file_saved'), {\n          duration: 2\n        });\n\n        _this.props.editorApi.getFileInfo().then(function (res) {\n          _this.props.setFileInfoMtime(res.data);\n        });\n\n        _this.addParticipants();\n      }, function () {\n        _this.props.onSaving(false);\n\n        toaster.danger(_this.props.t('file_failed_to_save'), {\n          duration: 2\n        });\n      });\n\n      _this.props.onSaving(true);\n    };\n\n    _this.addParticipants = function () {\n      if (_this.isParticipant || !window.showParticipants) return;\n      var _this$props$editorApi = _this.props.editorApi,\n          userName = _this$props$editorApi.userName,\n          addFileParticipants = _this$props$editorApi.addFileParticipants;\n      var participants = _this.props.participants;\n\n      if (participants && participants.length !== 0) {\n        _this.isParticipant = participants.every(function (participant) {\n          return participant.email === userName;\n        });\n        if (_this.isParticipant) return;\n      }\n\n      var emails = [userName];\n      addFileParticipants(emails).then(function (res) {\n        _this.isParticipant = true;\n\n        _this.props.onParticipantsChange();\n      });\n    };\n\n    _this.onRichEditorSave = function () {\n      if (_this.props.isSaving) return;\n      var value = _this.state.richValue;\n      var str = serialize(value);\n\n      _this.saveContent(str);\n\n      _this.props.clearTimer();\n\n      _this.props.deleteDraft && _this.props.deleteDraft();\n    };\n\n    _this.resetRichValue = function () {\n      var value = _this.state.richValue;\n\n      _this.setState({\n        richValue: value\n      });\n    };\n\n    _this.onPlainEditorSave = function () {\n      if (_this.props.isSaving) return;\n      var str = _this.state.currentContent;\n\n      _this.saveContent(str);\n\n      _this.props.clearTimer();\n\n      _this.props.deleteDraft && _this.props.deleteDraft();\n    };\n\n    _this.resetContentChanged = function () {\n      if (_this.props.contentChanged) {\n        _this.props.onContentChanged(false);\n      }\n\n      _this.autoSave = true;\n    };\n\n    var markdownContent = _this.props.markdownContent;\n    var isEditMode = _this.props.mode === 'editor';\n    var isDraft = _this.props.isDraft;\n    _this.lastModifyTime = null;\n    _this.autoSave = false;\n    _this.isParticipant = false;\n    window.seafileEditor = _assertThisInitialized(_this);\n    _this.state = {\n      isTreeDataLoaded: false,\n      initialPlainValue: '',\n      // for plain editor\n      currentContent: markdownContent,\n      // for plain editor and viewer\n      richValue: isEditMode || isDraft ? deserialize(markdownContent) : deserialize(''),\n      // for rich editor\n      issues: {\n        issue_list: []\n      }\n    };\n    return _this;\n  } // componentWillReceiveProps(nextProps) {\n  //   if (this.props.markdownContent !== nextProps.markdownContent) {\n  //     this.setState({ richValue: deserialize(nextProps.markdownContent) });\n  //   }\n  // }\n  // from rich editor to plain editor\n\n\n  _createClass(SeafileEditor, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      // window.seafileEditor = this;\n      window.addEventListener('beforeunload', this.onUnload);\n    }\n  }, {\n    key: \"componentWillMount\",\n\n    /*\n    *  when seafileEditor first mounted check the content\n    *  if the content is empty add h1 to document\n    * */\n    value: function componentWillMount() {\n      if (this.props.editorMode === 'rich') {\n        var document = this.state.richValue;\n        var firstNode = document[0];\n        /**\n         *  if the markdown content is empty, the rich value contains\n         *  only a paragraph which contains a empty text node \n         * \n        */\n\n        if (document.length === 1 && firstNode.type === 'paragraph' && firstNode.children.length === 1 && Text.isText(firstNode.children[0]) && firstNode.children[0].text.length === 0) {\n          var headerContent = this.props.fileInfo.name.slice(0, this.props.fileInfo.name.lastIndexOf('.'));\n          var header = {\n            type: 'header_one',\n            children: [{\n              text: headerContent,\n              marks: []\n            }]\n          };\n          document.push(header);\n          document.shift();\n          this.setState({\n            richValue: document\n          });\n        }\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var dom = '';\n\n      if (this.props.editorMode === 'rich') {\n        dom = React.createElement(RichMarkdownEditor, {\n          editorApi: this.props.editorApi,\n          onChange: this.onChange,\n          onSave: this.onRichEditorSave,\n          value: this.state.richValue,\n          resetRichValue: this.resetRichValue,\n          contentChanged: this.props.contentChanged,\n          saving: this.props.saving,\n          switchToMarkDownViewer: this.switchToMarkDownViewer,\n          switchToPlainTextEditor: this.switchToPlainTextEditor,\n          fileInfo: this.props.fileInfo,\n          toggleStar: this.props.toggleStar,\n          issues: this.state.issues,\n          resetContentChanged: this.resetContentChanged,\n          collabUsers: this.props.collabUsers,\n          mode: this.props.editorMode,\n          draftID: this.props.draftID,\n          isDraft: this.props.isDraft,\n          openDialogs: this.props.openDialogs,\n          readOnly: this.props.readOnly,\n          relatedFiles: this.props.relatedFiles,\n          fileTagList: this.props.fileTagList,\n          participants: this.props.participants,\n          onParticipantsChange: this.props.onParticipantsChange\n        });\n      } else if (this.props.editorMode === 'plain') {\n        dom = React.createElement(PlainMarkdownEditor, {\n          editorApi: this.props.editorApi,\n          initialValue: this.state.initialPlainValue,\n          currentContent: this.state.currentContent,\n          contentChanged: this.props.contentChanged,\n          switchToRichTextEditor: this.switchToRichTextEditor,\n          switchToMarkDownViewer: this.switchToMarkDownViewer,\n          onSave: this.onPlainEditorSave,\n          onChange: this.onChange,\n          fileInfo: this.props.fileInfo,\n          toggleStar: this.props.toggleStar,\n          collabUsers: this.props.collabUsers,\n          mode: this.props.editorMode,\n          draftID: this.props.draftID,\n          isDraft: this.props.isDraft\n        });\n      }\n\n      return dom;\n    }\n  }]);\n\n  return SeafileEditor;\n}(React.Component);\n\nSeafileEditor.defaultProps = {\n  userInfo: null\n};\nexport default withTranslation('seafile-editor')(SeafileEditor);","import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport React from 'react';\nimport SimpleEditor from './simple-editor';\nimport SeafileEditor from './seafile-editor';\nimport LoadScript from './load-script';\n\nvar SimpleEditorWithErrorBoundary = /*#__PURE__*/function (_React$Component) {\n  _inherits(SimpleEditorWithErrorBoundary, _React$Component);\n\n  function SimpleEditorWithErrorBoundary() {\n    _classCallCheck(this, SimpleEditorWithErrorBoundary);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(SimpleEditorWithErrorBoundary).apply(this, arguments));\n  }\n\n  _createClass(SimpleEditorWithErrorBoundary, [{\n    key: \"componentDidCatch\",\n    value: function componentDidCatch(error) {\n      console.error(error);\n      this.forceUpdate();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(SimpleEditor, this.props);\n    }\n  }]);\n\n  return SimpleEditorWithErrorBoundary;\n}(React.Component);\n\nvar SeafileEditorWithErrorBundary = /*#__PURE__*/function (_React$Component2) {\n  _inherits(SeafileEditorWithErrorBundary, _React$Component2);\n\n  function SeafileEditorWithErrorBundary() {\n    _classCallCheck(this, SeafileEditorWithErrorBundary);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(SeafileEditorWithErrorBundary).apply(this, arguments));\n  }\n\n  _createClass(SeafileEditorWithErrorBundary, [{\n    key: \"componentDidCatch\",\n    value: function componentDidCatch(error) {\n      console.error(error);\n      this.forceUpdate();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(LoadScript, {\n        scriptSource: this.props.scriptSource\n      }, React.createElement(SeafileEditor, this.props));\n    }\n  }]);\n\n  return SeafileEditorWithErrorBundary;\n}(React.Component);\n\nexport { SimpleEditorWithErrorBoundary as SimpleEditor, SeafileEditorWithErrorBundary as SeafileEditor };","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { mediaUrl } from '../utils/constants';\n\nconst propTypes = {\n  forDialog: PropTypes.bool\n};\n\nclass EmptyTip extends React.Component {\n\n  render() {\n    return (\n      <div className={this.props.forDialog ? 'text-center mt-8' : 'empty-tip'}>\n        <img src={`${mediaUrl}img/no-items-tip.png`} alt=\"\" width=\"100\" height=\"100\" className=\"no-items-img-tip\" />\n        {this.props.children}\n      </div>\n    );\n  }\n}\n\nEmptyTip.propTypes = propTypes;\n\nexport default EmptyTip;\n","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _react = require('react');\n\nvar _propTypes = require('prop-types');\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _objectWithoutProperties(obj, keys) { var target = {}; for (var i in obj) { if (keys.indexOf(i) >= 0) continue; if (!Object.prototype.hasOwnProperty.call(obj, i)) continue; target[i] = obj[i]; } return target; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar Manager = function (_Component) {\n  _inherits(Manager, _Component);\n\n  function Manager() {\n    var _ref;\n\n    var _temp, _this, _ret;\n\n    _classCallCheck(this, Manager);\n\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    return _ret = (_temp = (_this = _possibleConstructorReturn(this, (_ref = Manager.__proto__ || Object.getPrototypeOf(Manager)).call.apply(_ref, [this].concat(args))), _this), _this._setTargetNode = function (node) {\n      _this._targetNode = node;\n    }, _this._getTargetNode = function () {\n      return _this._targetNode;\n    }, _temp), _possibleConstructorReturn(_this, _ret);\n  }\n\n  _createClass(Manager, [{\n    key: 'getChildContext',\n    value: function getChildContext() {\n      return {\n        popperManager: {\n          setTargetNode: this._setTargetNode,\n          getTargetNode: this._getTargetNode\n        }\n      };\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      var _props = this.props,\n          tag = _props.tag,\n          children = _props.children,\n          restProps = _objectWithoutProperties(_props, ['tag', 'children']);\n\n      if (tag !== false) {\n        return (0, _react.createElement)(tag, restProps, children);\n      } else {\n        return children;\n      }\n    }\n  }]);\n\n  return Manager;\n}(_react.Component);\n\nManager.childContextTypes = {\n  popperManager: _propTypes2.default.object.isRequired\n};\nManager.propTypes = {\n  tag: _propTypes2.default.oneOfType([_propTypes2.default.string, _propTypes2.default.bool]),\n  children: _propTypes2.default.oneOfType([_propTypes2.default.node, _propTypes2.default.func])\n};\nManager.defaultProps = {\n  tag: 'div'\n};\nexports.default = Manager;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _react = require('react');\n\nvar _propTypes = require('prop-types');\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _objectWithoutProperties(obj, keys) { var target = {}; for (var i in obj) { if (keys.indexOf(i) >= 0) continue; if (!Object.prototype.hasOwnProperty.call(obj, i)) continue; target[i] = obj[i]; } return target; }\n\nvar Target = function Target(props, context) {\n  var _props$component = props.component,\n      component = _props$component === undefined ? 'div' : _props$component,\n      innerRef = props.innerRef,\n      children = props.children,\n      restProps = _objectWithoutProperties(props, ['component', 'innerRef', 'children']);\n\n  var popperManager = context.popperManager;\n\n  var targetRef = function targetRef(node) {\n    popperManager.setTargetNode(node);\n    if (typeof innerRef === 'function') {\n      innerRef(node);\n    }\n  };\n\n  if (typeof children === 'function') {\n    var targetProps = { ref: targetRef };\n    return children({ targetProps: targetProps, restProps: restProps });\n  }\n\n  var componentProps = _extends({}, restProps);\n\n  if (typeof component === 'string') {\n    componentProps.ref = targetRef;\n  } else {\n    componentProps.innerRef = targetRef;\n  }\n\n  return (0, _react.createElement)(component, componentProps, children);\n};\n\nTarget.contextTypes = {\n  popperManager: _propTypes2.default.object.isRequired\n};\n\nTarget.propTypes = {\n  component: _propTypes2.default.oneOfType([_propTypes2.default.node, _propTypes2.default.func]),\n  innerRef: _propTypes2.default.func,\n  children: _propTypes2.default.oneOfType([_propTypes2.default.node, _propTypes2.default.func])\n};\n\nexports.default = Target;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _react = require('react');\n\nvar _propTypes = require('prop-types');\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _popper = require('popper.js');\n\nvar _popper2 = _interopRequireDefault(_popper);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _objectWithoutProperties(obj, keys) { var target = {}; for (var i in obj) { if (keys.indexOf(i) >= 0) continue; if (!Object.prototype.hasOwnProperty.call(obj, i)) continue; target[i] = obj[i]; } return target; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar Popper = function (_Component) {\n  _inherits(Popper, _Component);\n\n  function Popper() {\n    var _ref;\n\n    var _temp, _this, _ret;\n\n    _classCallCheck(this, Popper);\n\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    return _ret = (_temp = (_this = _possibleConstructorReturn(this, (_ref = Popper.__proto__ || Object.getPrototypeOf(Popper)).call.apply(_ref, [this].concat(args))), _this), _this.state = {}, _this._setArrowNode = function (node) {\n      _this._arrowNode = node;\n    }, _this._getTargetNode = function () {\n      return _this.context.popperManager.getTargetNode();\n    }, _this._getOffsets = function (data) {\n      return Object.keys(data.offsets).map(function (key) {\n        return data.offsets[key];\n      });\n    }, _this._isDataDirty = function (data) {\n      if (_this.state.data) {\n        return JSON.stringify(_this._getOffsets(_this.state.data)) !== JSON.stringify(_this._getOffsets(data));\n      } else {\n        return true;\n      }\n    }, _this._updateStateModifier = {\n      enabled: true,\n      order: 900,\n      fn: function fn(data) {\n        if (_this._isDataDirty(data)) {\n          _this.setState({ data: data });\n        }\n        return data;\n      }\n    }, _this._getPopperStyle = function () {\n      var data = _this.state.data;\n\n\n      if (!_this._popper || !data) {\n        return {\n          position: 'absolute',\n          pointerEvents: 'none',\n          opacity: 0\n        };\n      }\n\n      return _extends({\n        position: data.offsets.popper.position\n      }, data.styles);\n    }, _this._getPopperPlacement = function () {\n      return _this.state.data ? _this.state.data.placement : undefined;\n    }, _this._getPopperHide = function () {\n      return !!_this.state.data && _this.state.data.hide ? '' : undefined;\n    }, _this._getArrowStyle = function () {\n      if (!_this.state.data || !_this.state.data.offsets.arrow) {\n        return {};\n      } else {\n        var _this$state$data$offs = _this.state.data.offsets.arrow,\n            top = _this$state$data$offs.top,\n            left = _this$state$data$offs.left;\n\n        return { top: top, left: left };\n      }\n    }, _this._handlePopperRef = function (node) {\n      _this._popperNode = node;\n      if (node) {\n        _this._createPopper();\n      } else {\n        _this._destroyPopper();\n      }\n      if (_this.props.innerRef) {\n        _this.props.innerRef(node);\n      }\n    }, _this._scheduleUpdate = function () {\n      _this._popper && _this._popper.scheduleUpdate();\n    }, _temp), _possibleConstructorReturn(_this, _ret);\n  }\n\n  _createClass(Popper, [{\n    key: 'getChildContext',\n    value: function getChildContext() {\n      return {\n        popper: {\n          setArrowNode: this._setArrowNode,\n          getArrowStyle: this._getArrowStyle\n        }\n      };\n    }\n  }, {\n    key: 'componentDidUpdate',\n    value: function componentDidUpdate(lastProps) {\n      if (lastProps.placement !== this.props.placement || lastProps.eventsEnabled !== this.props.eventsEnabled) {\n        this._destroyPopper();\n        this._createPopper();\n      }\n      if (lastProps.children !== this.props.children) {\n        this._scheduleUpdate();\n      }\n    }\n  }, {\n    key: 'componentWillUnmount',\n    value: function componentWillUnmount() {\n      this._destroyPopper();\n    }\n  }, {\n    key: '_createPopper',\n    value: function _createPopper() {\n      var _this2 = this;\n\n      var _props = this.props,\n          placement = _props.placement,\n          eventsEnabled = _props.eventsEnabled;\n\n      var modifiers = _extends({}, this.props.modifiers, {\n        applyStyle: { enabled: false },\n        updateState: this._updateStateModifier\n      });\n      if (this._arrowNode) {\n        modifiers.arrow = {\n          element: this._arrowNode\n        };\n      }\n      this._popper = new _popper2.default(this._getTargetNode(), this._popperNode, {\n        placement: placement,\n        eventsEnabled: eventsEnabled,\n        modifiers: modifiers\n      });\n\n      // TODO: look into setTimeout scheduleUpdate call, without it, the popper will not position properly on creation\n      setTimeout(function () {\n        return _this2._scheduleUpdate();\n      });\n    }\n  }, {\n    key: '_destroyPopper',\n    value: function _destroyPopper() {\n      if (this._popper) {\n        this._popper.destroy();\n      }\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      var _props2 = this.props,\n          component = _props2.component,\n          innerRef = _props2.innerRef,\n          placement = _props2.placement,\n          eventsEnabled = _props2.eventsEnabled,\n          modifiers = _props2.modifiers,\n          children = _props2.children,\n          restProps = _objectWithoutProperties(_props2, ['component', 'innerRef', 'placement', 'eventsEnabled', 'modifiers', 'children']);\n\n      var popperStyle = this._getPopperStyle();\n      var popperPlacement = this._getPopperPlacement();\n      var popperHide = this._getPopperHide();\n\n      if (typeof children === 'function') {\n        var popperProps = {\n          ref: this._handlePopperRef,\n          style: popperStyle,\n          'data-placement': popperPlacement,\n          'data-x-out-of-boundaries': popperHide\n        };\n        return children({\n          popperProps: popperProps,\n          restProps: restProps,\n          scheduleUpdate: this._scheduleUpdate\n        });\n      }\n\n      var componentProps = _extends({}, restProps, {\n        style: _extends({}, restProps.style, popperStyle),\n        'data-placement': popperPlacement,\n        'data-x-out-of-boundaries': popperHide\n      });\n\n      if (typeof component === 'string') {\n        componentProps.ref = this._handlePopperRef;\n      } else {\n        componentProps.innerRef = this._handlePopperRef;\n      }\n\n      return (0, _react.createElement)(component, componentProps, children);\n    }\n  }]);\n\n  return Popper;\n}(_react.Component);\n\nPopper.contextTypes = {\n  popperManager: _propTypes2.default.object.isRequired\n};\nPopper.childContextTypes = {\n  popper: _propTypes2.default.object.isRequired\n};\nPopper.propTypes = {\n  component: _propTypes2.default.oneOfType([_propTypes2.default.node, _propTypes2.default.func]),\n  innerRef: _propTypes2.default.func,\n  placement: _propTypes2.default.oneOf(_popper2.default.placements),\n  eventsEnabled: _propTypes2.default.bool,\n  modifiers: _propTypes2.default.object,\n  children: _propTypes2.default.oneOfType([_propTypes2.default.node, _propTypes2.default.func])\n};\nPopper.defaultProps = {\n  component: 'div',\n  placement: 'bottom',\n  eventsEnabled: true,\n  modifiers: {}\n};\nexports.default = Popper;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _react = require('react');\n\nvar _propTypes = require('prop-types');\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _objectWithoutProperties(obj, keys) { var target = {}; for (var i in obj) { if (keys.indexOf(i) >= 0) continue; if (!Object.prototype.hasOwnProperty.call(obj, i)) continue; target[i] = obj[i]; } return target; }\n\nvar Arrow = function Arrow(props, context) {\n  var _props$component = props.component,\n      component = _props$component === undefined ? 'span' : _props$component,\n      innerRef = props.innerRef,\n      children = props.children,\n      restProps = _objectWithoutProperties(props, ['component', 'innerRef', 'children']);\n\n  var popper = context.popper;\n\n  var arrowRef = function arrowRef(node) {\n    popper.setArrowNode(node);\n    if (typeof innerRef === 'function') {\n      innerRef(node);\n    }\n  };\n  var arrowStyle = popper.getArrowStyle();\n\n  if (typeof children === 'function') {\n    var arrowProps = {\n      ref: arrowRef,\n      style: arrowStyle\n    };\n    return children({ arrowProps: arrowProps, restProps: restProps });\n  }\n\n  var componentProps = _extends({}, restProps, {\n    style: _extends({}, arrowStyle, restProps.style)\n  });\n\n  if (typeof component === 'string') {\n    componentProps.ref = arrowRef;\n  } else {\n    componentProps.innerRef = arrowRef;\n  }\n\n  return (0, _react.createElement)(component, componentProps, children);\n};\n\nArrow.contextTypes = {\n  popper: _propTypes2.default.object.isRequired\n};\n\nArrow.propTypes = {\n  component: _propTypes2.default.oneOfType([_propTypes2.default.node, _propTypes2.default.func]),\n  innerRef: _propTypes2.default.func,\n  children: _propTypes2.default.oneOfType([_propTypes2.default.node, _propTypes2.default.func])\n};\n\nexports.default = Arrow;","// CodeMirror, copyright (c) by Marijn Haverbeke and others\n// Distributed under an MIT license: https://codemirror.net/LICENSE\n\n(function(mod) {\n  if (typeof exports == \"object\" && typeof module == \"object\") // CommonJS\n    mod(require(\"../../lib/codemirror\"), require(\"../xml/xml\"), require(\"../meta\"));\n  else if (typeof define == \"function\" && define.amd) // AMD\n    define([\"../../lib/codemirror\", \"../xml/xml\", \"../meta\"], mod);\n  else // Plain browser env\n    mod(CodeMirror);\n})(function(CodeMirror) {\n\"use strict\";\n\nCodeMirror.defineMode(\"markdown\", function(cmCfg, modeCfg) {\n\n  var htmlMode = CodeMirror.getMode(cmCfg, \"text/html\");\n  var htmlModeMissing = htmlMode.name == \"null\"\n\n  function getMode(name) {\n    if (CodeMirror.findModeByName) {\n      var found = CodeMirror.findModeByName(name);\n      if (found) name = found.mime || found.mimes[0];\n    }\n    var mode = CodeMirror.getMode(cmCfg, name);\n    return mode.name == \"null\" ? null : mode;\n  }\n\n  // Should characters that affect highlighting be highlighted separate?\n  // Does not include characters that will be output (such as `1.` and `-` for lists)\n  if (modeCfg.highlightFormatting === undefined)\n    modeCfg.highlightFormatting = false;\n\n  // Maximum number of nested blockquotes. Set to 0 for infinite nesting.\n  // Excess `>` will emit `error` token.\n  if (modeCfg.maxBlockquoteDepth === undefined)\n    modeCfg.maxBlockquoteDepth = 0;\n\n  // Turn on task lists? (\"- [ ] \" and \"- [x] \")\n  if (modeCfg.taskLists === undefined) modeCfg.taskLists = false;\n\n  // Turn on strikethrough syntax\n  if (modeCfg.strikethrough === undefined)\n    modeCfg.strikethrough = false;\n\n  if (modeCfg.emoji === undefined)\n    modeCfg.emoji = false;\n\n  if (modeCfg.fencedCodeBlockHighlighting === undefined)\n    modeCfg.fencedCodeBlockHighlighting = true;\n\n  if (modeCfg.xml === undefined)\n    modeCfg.xml = true;\n\n  // Allow token types to be overridden by user-provided token types.\n  if (modeCfg.tokenTypeOverrides === undefined)\n    modeCfg.tokenTypeOverrides = {};\n\n  var tokenTypes = {\n    header: \"header\",\n    code: \"comment\",\n    quote: \"quote\",\n    list1: \"variable-2\",\n    list2: \"variable-3\",\n    list3: \"keyword\",\n    hr: \"hr\",\n    image: \"image\",\n    imageAltText: \"image-alt-text\",\n    imageMarker: \"image-marker\",\n    formatting: \"formatting\",\n    linkInline: \"link\",\n    linkEmail: \"link\",\n    linkText: \"link\",\n    linkHref: \"string\",\n    em: \"em\",\n    strong: \"strong\",\n    strikethrough: \"strikethrough\",\n    emoji: \"builtin\"\n  };\n\n  for (var tokenType in tokenTypes) {\n    if (tokenTypes.hasOwnProperty(tokenType) && modeCfg.tokenTypeOverrides[tokenType]) {\n      tokenTypes[tokenType] = modeCfg.tokenTypeOverrides[tokenType];\n    }\n  }\n\n  var hrRE = /^([*\\-_])(?:\\s*\\1){2,}\\s*$/\n  ,   listRE = /^(?:[*\\-+]|^[0-9]+([.)]))\\s+/\n  ,   taskListRE = /^\\[(x| )\\](?=\\s)/i // Must follow listRE\n  ,   atxHeaderRE = modeCfg.allowAtxHeaderWithoutSpace ? /^(#+)/ : /^(#+)(?: |$)/\n  ,   setextHeaderRE = /^ *(?:\\={1,}|-{1,})\\s*$/\n  ,   textRE = /^[^#!\\[\\]*_\\\\<>` \"'(~:]+/\n  ,   fencedCodeRE = /^(~~~+|```+)[ \\t]*([\\w+#-]*)[^\\n`]*$/\n  ,   linkDefRE = /^\\s*\\[[^\\]]+?\\]:.*$/ // naive link-definition\n  ,   punctuation = /[!\"#$%&'()*+,\\-.\\/:;<=>?@\\[\\\\\\]^_`{|}~\\xA1\\xA7\\xAB\\xB6\\xB7\\xBB\\xBF\\u037E\\u0387\\u055A-\\u055F\\u0589\\u058A\\u05BE\\u05C0\\u05C3\\u05C6\\u05F3\\u05F4\\u0609\\u060A\\u060C\\u060D\\u061B\\u061E\\u061F\\u066A-\\u066D\\u06D4\\u0700-\\u070D\\u07F7-\\u07F9\\u0830-\\u083E\\u085E\\u0964\\u0965\\u0970\\u0AF0\\u0DF4\\u0E4F\\u0E5A\\u0E5B\\u0F04-\\u0F12\\u0F14\\u0F3A-\\u0F3D\\u0F85\\u0FD0-\\u0FD4\\u0FD9\\u0FDA\\u104A-\\u104F\\u10FB\\u1360-\\u1368\\u1400\\u166D\\u166E\\u169B\\u169C\\u16EB-\\u16ED\\u1735\\u1736\\u17D4-\\u17D6\\u17D8-\\u17DA\\u1800-\\u180A\\u1944\\u1945\\u1A1E\\u1A1F\\u1AA0-\\u1AA6\\u1AA8-\\u1AAD\\u1B5A-\\u1B60\\u1BFC-\\u1BFF\\u1C3B-\\u1C3F\\u1C7E\\u1C7F\\u1CC0-\\u1CC7\\u1CD3\\u2010-\\u2027\\u2030-\\u2043\\u2045-\\u2051\\u2053-\\u205E\\u207D\\u207E\\u208D\\u208E\\u2308-\\u230B\\u2329\\u232A\\u2768-\\u2775\\u27C5\\u27C6\\u27E6-\\u27EF\\u2983-\\u2998\\u29D8-\\u29DB\\u29FC\\u29FD\\u2CF9-\\u2CFC\\u2CFE\\u2CFF\\u2D70\\u2E00-\\u2E2E\\u2E30-\\u2E42\\u3001-\\u3003\\u3008-\\u3011\\u3014-\\u301F\\u3030\\u303D\\u30A0\\u30FB\\uA4FE\\uA4FF\\uA60D-\\uA60F\\uA673\\uA67E\\uA6F2-\\uA6F7\\uA874-\\uA877\\uA8CE\\uA8CF\\uA8F8-\\uA8FA\\uA8FC\\uA92E\\uA92F\\uA95F\\uA9C1-\\uA9CD\\uA9DE\\uA9DF\\uAA5C-\\uAA5F\\uAADE\\uAADF\\uAAF0\\uAAF1\\uABEB\\uFD3E\\uFD3F\\uFE10-\\uFE19\\uFE30-\\uFE52\\uFE54-\\uFE61\\uFE63\\uFE68\\uFE6A\\uFE6B\\uFF01-\\uFF03\\uFF05-\\uFF0A\\uFF0C-\\uFF0F\\uFF1A\\uFF1B\\uFF1F\\uFF20\\uFF3B-\\uFF3D\\uFF3F\\uFF5B\\uFF5D\\uFF5F-\\uFF65]|\\uD800[\\uDD00-\\uDD02\\uDF9F\\uDFD0]|\\uD801\\uDD6F|\\uD802[\\uDC57\\uDD1F\\uDD3F\\uDE50-\\uDE58\\uDE7F\\uDEF0-\\uDEF6\\uDF39-\\uDF3F\\uDF99-\\uDF9C]|\\uD804[\\uDC47-\\uDC4D\\uDCBB\\uDCBC\\uDCBE-\\uDCC1\\uDD40-\\uDD43\\uDD74\\uDD75\\uDDC5-\\uDDC9\\uDDCD\\uDDDB\\uDDDD-\\uDDDF\\uDE38-\\uDE3D\\uDEA9]|\\uD805[\\uDCC6\\uDDC1-\\uDDD7\\uDE41-\\uDE43\\uDF3C-\\uDF3E]|\\uD809[\\uDC70-\\uDC74]|\\uD81A[\\uDE6E\\uDE6F\\uDEF5\\uDF37-\\uDF3B\\uDF44]|\\uD82F\\uDC9F|\\uD836[\\uDE87-\\uDE8B]/\n  ,   expandedTab = \"    \" // CommonMark specifies tab as 4 spaces\n\n  function switchInline(stream, state, f) {\n    state.f = state.inline = f;\n    return f(stream, state);\n  }\n\n  function switchBlock(stream, state, f) {\n    state.f = state.block = f;\n    return f(stream, state);\n  }\n\n  function lineIsEmpty(line) {\n    return !line || !/\\S/.test(line.string)\n  }\n\n  // Blocks\n\n  function blankLine(state) {\n    // Reset linkTitle state\n    state.linkTitle = false;\n    state.linkHref = false;\n    state.linkText = false;\n    // Reset EM state\n    state.em = false;\n    // Reset STRONG state\n    state.strong = false;\n    // Reset strikethrough state\n    state.strikethrough = false;\n    // Reset state.quote\n    state.quote = 0;\n    // Reset state.indentedCode\n    state.indentedCode = false;\n    if (state.f == htmlBlock) {\n      var exit = htmlModeMissing\n      if (!exit) {\n        var inner = CodeMirror.innerMode(htmlMode, state.htmlState)\n        exit = inner.mode.name == \"xml\" && inner.state.tagStart === null &&\n          (!inner.state.context && inner.state.tokenize.isInText)\n      }\n      if (exit) {\n        state.f = inlineNormal;\n        state.block = blockNormal;\n        state.htmlState = null;\n      }\n    }\n    // Reset state.trailingSpace\n    state.trailingSpace = 0;\n    state.trailingSpaceNewLine = false;\n    // Mark this line as blank\n    state.prevLine = state.thisLine\n    state.thisLine = {stream: null}\n    return null;\n  }\n\n  function blockNormal(stream, state) {\n    var firstTokenOnLine = stream.column() === state.indentation;\n    var prevLineLineIsEmpty = lineIsEmpty(state.prevLine.stream);\n    var prevLineIsIndentedCode = state.indentedCode;\n    var prevLineIsHr = state.prevLine.hr;\n    var prevLineIsList = state.list !== false;\n    var maxNonCodeIndentation = (state.listStack[state.listStack.length - 1] || 0) + 3;\n\n    state.indentedCode = false;\n\n    var lineIndentation = state.indentation;\n    // compute once per line (on first token)\n    if (state.indentationDiff === null) {\n      state.indentationDiff = state.indentation;\n      if (prevLineIsList) {\n        // Reset inline styles which shouldn't propagate aross list items\n        state.em = false;\n        state.strong = false;\n        state.code = false;\n        state.strikethrough = false;\n\n        state.list = null;\n        // While this list item's marker's indentation is less than the deepest\n        //  list item's content's indentation,pop the deepest list item\n        //  indentation off the stack, and update block indentation state\n        while (lineIndentation < state.listStack[state.listStack.length - 1]) {\n          state.listStack.pop();\n          if (state.listStack.length) {\n            state.indentation = state.listStack[state.listStack.length - 1];\n          // less than the first list's indent -> the line is no longer a list\n          } else {\n            state.list = false;\n          }\n        }\n        if (state.list !== false) {\n          state.indentationDiff = lineIndentation - state.listStack[state.listStack.length - 1]\n        }\n      }\n    }\n\n    // not comprehensive (currently only for setext detection purposes)\n    var allowsInlineContinuation = (\n        !prevLineLineIsEmpty && !prevLineIsHr && !state.prevLine.header &&\n        (!prevLineIsList || !prevLineIsIndentedCode) &&\n        !state.prevLine.fencedCodeEnd\n    );\n\n    var isHr = (state.list === false || prevLineIsHr || prevLineLineIsEmpty) &&\n      state.indentation <= maxNonCodeIndentation && stream.match(hrRE);\n\n    var match = null;\n    if (state.indentationDiff >= 4 && (prevLineIsIndentedCode || state.prevLine.fencedCodeEnd ||\n         state.prevLine.header || prevLineLineIsEmpty)) {\n      stream.skipToEnd();\n      state.indentedCode = true;\n      return tokenTypes.code;\n    } else if (stream.eatSpace()) {\n      return null;\n    } else if (firstTokenOnLine && state.indentation <= maxNonCodeIndentation && (match = stream.match(atxHeaderRE)) && match[1].length <= 6) {\n      state.quote = 0;\n      state.header = match[1].length;\n      state.thisLine.header = true;\n      if (modeCfg.highlightFormatting) state.formatting = \"header\";\n      state.f = state.inline;\n      return getType(state);\n    } else if (state.indentation <= maxNonCodeIndentation && stream.eat('>')) {\n      state.quote = firstTokenOnLine ? 1 : state.quote + 1;\n      if (modeCfg.highlightFormatting) state.formatting = \"quote\";\n      stream.eatSpace();\n      return getType(state);\n    } else if (!isHr && !state.setext && firstTokenOnLine && state.indentation <= maxNonCodeIndentation && (match = stream.match(listRE))) {\n      var listType = match[1] ? \"ol\" : \"ul\";\n\n      state.indentation = lineIndentation + stream.current().length;\n      state.list = true;\n      state.quote = 0;\n\n      // Add this list item's content's indentation to the stack\n      state.listStack.push(state.indentation);\n\n      if (modeCfg.taskLists && stream.match(taskListRE, false)) {\n        state.taskList = true;\n      }\n      state.f = state.inline;\n      if (modeCfg.highlightFormatting) state.formatting = [\"list\", \"list-\" + listType];\n      return getType(state);\n    } else if (firstTokenOnLine && state.indentation <= maxNonCodeIndentation && (match = stream.match(fencedCodeRE, true))) {\n      state.quote = 0;\n      state.fencedEndRE = new RegExp(match[1] + \"+ *$\");\n      // try switching mode\n      state.localMode = modeCfg.fencedCodeBlockHighlighting && getMode(match[2]);\n      if (state.localMode) state.localState = CodeMirror.startState(state.localMode);\n      state.f = state.block = local;\n      if (modeCfg.highlightFormatting) state.formatting = \"code-block\";\n      state.code = -1\n      return getType(state);\n    // SETEXT has lowest block-scope precedence after HR, so check it after\n    //  the others (code, blockquote, list...)\n    } else if (\n      // if setext set, indicates line after ---/===\n      state.setext || (\n        // line before ---/===\n        (!allowsInlineContinuation || !prevLineIsList) && !state.quote && state.list === false &&\n        !state.code && !isHr && !linkDefRE.test(stream.string) &&\n        (match = stream.lookAhead(1)) && (match = match.match(setextHeaderRE))\n      )\n    ) {\n      if ( !state.setext ) {\n        state.header = match[0].charAt(0) == '=' ? 1 : 2;\n        state.setext = state.header;\n      } else {\n        state.header = state.setext;\n        // has no effect on type so we can reset it now\n        state.setext = 0;\n        stream.skipToEnd();\n        if (modeCfg.highlightFormatting) state.formatting = \"header\";\n      }\n      state.thisLine.header = true;\n      state.f = state.inline;\n      return getType(state);\n    } else if (isHr) {\n      stream.skipToEnd();\n      state.hr = true;\n      state.thisLine.hr = true;\n      return tokenTypes.hr;\n    } else if (stream.peek() === '[') {\n      return switchInline(stream, state, footnoteLink);\n    }\n\n    return switchInline(stream, state, state.inline);\n  }\n\n  function htmlBlock(stream, state) {\n    var style = htmlMode.token(stream, state.htmlState);\n    if (!htmlModeMissing) {\n      var inner = CodeMirror.innerMode(htmlMode, state.htmlState)\n      if ((inner.mode.name == \"xml\" && inner.state.tagStart === null &&\n           (!inner.state.context && inner.state.tokenize.isInText)) ||\n          (state.md_inside && stream.current().indexOf(\">\") > -1)) {\n        state.f = inlineNormal;\n        state.block = blockNormal;\n        state.htmlState = null;\n      }\n    }\n    return style;\n  }\n\n  function local(stream, state) {\n    var currListInd = state.listStack[state.listStack.length - 1] || 0;\n    var hasExitedList = state.indentation < currListInd;\n    var maxFencedEndInd = currListInd + 3;\n    if (state.fencedEndRE && state.indentation <= maxFencedEndInd && (hasExitedList || stream.match(state.fencedEndRE))) {\n      if (modeCfg.highlightFormatting) state.formatting = \"code-block\";\n      var returnType;\n      if (!hasExitedList) returnType = getType(state)\n      state.localMode = state.localState = null;\n      state.block = blockNormal;\n      state.f = inlineNormal;\n      state.fencedEndRE = null;\n      state.code = 0\n      state.thisLine.fencedCodeEnd = true;\n      if (hasExitedList) return switchBlock(stream, state, state.block);\n      return returnType;\n    } else if (state.localMode) {\n      return state.localMode.token(stream, state.localState);\n    } else {\n      stream.skipToEnd();\n      return tokenTypes.code;\n    }\n  }\n\n  // Inline\n  function getType(state) {\n    var styles = [];\n\n    if (state.formatting) {\n      styles.push(tokenTypes.formatting);\n\n      if (typeof state.formatting === \"string\") state.formatting = [state.formatting];\n\n      for (var i = 0; i < state.formatting.length; i++) {\n        styles.push(tokenTypes.formatting + \"-\" + state.formatting[i]);\n\n        if (state.formatting[i] === \"header\") {\n          styles.push(tokenTypes.formatting + \"-\" + state.formatting[i] + \"-\" + state.header);\n        }\n\n        // Add `formatting-quote` and `formatting-quote-#` for blockquotes\n        // Add `error` instead if the maximum blockquote nesting depth is passed\n        if (state.formatting[i] === \"quote\") {\n          if (!modeCfg.maxBlockquoteDepth || modeCfg.maxBlockquoteDepth >= state.quote) {\n            styles.push(tokenTypes.formatting + \"-\" + state.formatting[i] + \"-\" + state.quote);\n          } else {\n            styles.push(\"error\");\n          }\n        }\n      }\n    }\n\n    if (state.taskOpen) {\n      styles.push(\"meta\");\n      return styles.length ? styles.join(' ') : null;\n    }\n    if (state.taskClosed) {\n      styles.push(\"property\");\n      return styles.length ? styles.join(' ') : null;\n    }\n\n    if (state.linkHref) {\n      styles.push(tokenTypes.linkHref, \"url\");\n    } else { // Only apply inline styles to non-url text\n      if (state.strong) { styles.push(tokenTypes.strong); }\n      if (state.em) { styles.push(tokenTypes.em); }\n      if (state.strikethrough) { styles.push(tokenTypes.strikethrough); }\n      if (state.emoji) { styles.push(tokenTypes.emoji); }\n      if (state.linkText) { styles.push(tokenTypes.linkText); }\n      if (state.code) { styles.push(tokenTypes.code); }\n      if (state.image) { styles.push(tokenTypes.image); }\n      if (state.imageAltText) { styles.push(tokenTypes.imageAltText, \"link\"); }\n      if (state.imageMarker) { styles.push(tokenTypes.imageMarker); }\n    }\n\n    if (state.header) { styles.push(tokenTypes.header, tokenTypes.header + \"-\" + state.header); }\n\n    if (state.quote) {\n      styles.push(tokenTypes.quote);\n\n      // Add `quote-#` where the maximum for `#` is modeCfg.maxBlockquoteDepth\n      if (!modeCfg.maxBlockquoteDepth || modeCfg.maxBlockquoteDepth >= state.quote) {\n        styles.push(tokenTypes.quote + \"-\" + state.quote);\n      } else {\n        styles.push(tokenTypes.quote + \"-\" + modeCfg.maxBlockquoteDepth);\n      }\n    }\n\n    if (state.list !== false) {\n      var listMod = (state.listStack.length - 1) % 3;\n      if (!listMod) {\n        styles.push(tokenTypes.list1);\n      } else if (listMod === 1) {\n        styles.push(tokenTypes.list2);\n      } else {\n        styles.push(tokenTypes.list3);\n      }\n    }\n\n    if (state.trailingSpaceNewLine) {\n      styles.push(\"trailing-space-new-line\");\n    } else if (state.trailingSpace) {\n      styles.push(\"trailing-space-\" + (state.trailingSpace % 2 ? \"a\" : \"b\"));\n    }\n\n    return styles.length ? styles.join(' ') : null;\n  }\n\n  function handleText(stream, state) {\n    if (stream.match(textRE, true)) {\n      return getType(state);\n    }\n    return undefined;\n  }\n\n  function inlineNormal(stream, state) {\n    var style = state.text(stream, state);\n    if (typeof style !== 'undefined')\n      return style;\n\n    if (state.list) { // List marker (*, +, -, 1., etc)\n      state.list = null;\n      return getType(state);\n    }\n\n    if (state.taskList) {\n      var taskOpen = stream.match(taskListRE, true)[1] === \" \";\n      if (taskOpen) state.taskOpen = true;\n      else state.taskClosed = true;\n      if (modeCfg.highlightFormatting) state.formatting = \"task\";\n      state.taskList = false;\n      return getType(state);\n    }\n\n    state.taskOpen = false;\n    state.taskClosed = false;\n\n    if (state.header && stream.match(/^#+$/, true)) {\n      if (modeCfg.highlightFormatting) state.formatting = \"header\";\n      return getType(state);\n    }\n\n    var ch = stream.next();\n\n    // Matches link titles present on next line\n    if (state.linkTitle) {\n      state.linkTitle = false;\n      var matchCh = ch;\n      if (ch === '(') {\n        matchCh = ')';\n      }\n      matchCh = (matchCh+'').replace(/([.?*+^\\[\\]\\\\(){}|-])/g, \"\\\\$1\");\n      var regex = '^\\\\s*(?:[^' + matchCh + '\\\\\\\\]+|\\\\\\\\\\\\\\\\|\\\\\\\\.)' + matchCh;\n      if (stream.match(new RegExp(regex), true)) {\n        return tokenTypes.linkHref;\n      }\n    }\n\n    // If this block is changed, it may need to be updated in GFM mode\n    if (ch === '`') {\n      var previousFormatting = state.formatting;\n      if (modeCfg.highlightFormatting) state.formatting = \"code\";\n      stream.eatWhile('`');\n      var count = stream.current().length\n      if (state.code == 0 && (!state.quote || count == 1)) {\n        state.code = count\n        return getType(state)\n      } else if (count == state.code) { // Must be exact\n        var t = getType(state)\n        state.code = 0\n        return t\n      } else {\n        state.formatting = previousFormatting\n        return getType(state)\n      }\n    } else if (state.code) {\n      return getType(state);\n    }\n\n    if (ch === '\\\\') {\n      stream.next();\n      if (modeCfg.highlightFormatting) {\n        var type = getType(state);\n        var formattingEscape = tokenTypes.formatting + \"-escape\";\n        return type ? type + \" \" + formattingEscape : formattingEscape;\n      }\n    }\n\n    if (ch === '!' && stream.match(/\\[[^\\]]*\\] ?(?:\\(|\\[)/, false)) {\n      state.imageMarker = true;\n      state.image = true;\n      if (modeCfg.highlightFormatting) state.formatting = \"image\";\n      return getType(state);\n    }\n\n    if (ch === '[' && state.imageMarker && stream.match(/[^\\]]*\\](\\(.*?\\)| ?\\[.*?\\])/, false)) {\n      state.imageMarker = false;\n      state.imageAltText = true\n      if (modeCfg.highlightFormatting) state.formatting = \"image\";\n      return getType(state);\n    }\n\n    if (ch === ']' && state.imageAltText) {\n      if (modeCfg.highlightFormatting) state.formatting = \"image\";\n      var type = getType(state);\n      state.imageAltText = false;\n      state.image = false;\n      state.inline = state.f = linkHref;\n      return type;\n    }\n\n    if (ch === '[' && !state.image) {\n      if (state.linkText && stream.match(/^.*?\\]/)) return getType(state)\n      state.linkText = true;\n      if (modeCfg.highlightFormatting) state.formatting = \"link\";\n      return getType(state);\n    }\n\n    if (ch === ']' && state.linkText) {\n      if (modeCfg.highlightFormatting) state.formatting = \"link\";\n      var type = getType(state);\n      state.linkText = false;\n      state.inline = state.f = stream.match(/\\(.*?\\)| ?\\[.*?\\]/, false) ? linkHref : inlineNormal\n      return type;\n    }\n\n    if (ch === '<' && stream.match(/^(https?|ftps?):\\/\\/(?:[^\\\\>]|\\\\.)+>/, false)) {\n      state.f = state.inline = linkInline;\n      if (modeCfg.highlightFormatting) state.formatting = \"link\";\n      var type = getType(state);\n      if (type){\n        type += \" \";\n      } else {\n        type = \"\";\n      }\n      return type + tokenTypes.linkInline;\n    }\n\n    if (ch === '<' && stream.match(/^[^> \\\\]+@(?:[^\\\\>]|\\\\.)+>/, false)) {\n      state.f = state.inline = linkInline;\n      if (modeCfg.highlightFormatting) state.formatting = \"link\";\n      var type = getType(state);\n      if (type){\n        type += \" \";\n      } else {\n        type = \"\";\n      }\n      return type + tokenTypes.linkEmail;\n    }\n\n    if (modeCfg.xml && ch === '<' && stream.match(/^(!--|\\?|!\\[CDATA\\[|[a-z][a-z0-9-]*(?:\\s+[a-z_:.\\-]+(?:\\s*=\\s*[^>]+)?)*\\s*(?:>|$))/i, false)) {\n      var end = stream.string.indexOf(\">\", stream.pos);\n      if (end != -1) {\n        var atts = stream.string.substring(stream.start, end);\n        if (/markdown\\s*=\\s*('|\"){0,1}1('|\"){0,1}/.test(atts)) state.md_inside = true;\n      }\n      stream.backUp(1);\n      state.htmlState = CodeMirror.startState(htmlMode);\n      return switchBlock(stream, state, htmlBlock);\n    }\n\n    if (modeCfg.xml && ch === '<' && stream.match(/^\\/\\w*?>/)) {\n      state.md_inside = false;\n      return \"tag\";\n    } else if (ch === \"*\" || ch === \"_\") {\n      var len = 1, before = stream.pos == 1 ? \" \" : stream.string.charAt(stream.pos - 2)\n      while (len < 3 && stream.eat(ch)) len++\n      var after = stream.peek() || \" \"\n      // See http://spec.commonmark.org/0.27/#emphasis-and-strong-emphasis\n      var leftFlanking = !/\\s/.test(after) && (!punctuation.test(after) || /\\s/.test(before) || punctuation.test(before))\n      var rightFlanking = !/\\s/.test(before) && (!punctuation.test(before) || /\\s/.test(after) || punctuation.test(after))\n      var setEm = null, setStrong = null\n      if (len % 2) { // Em\n        if (!state.em && leftFlanking && (ch === \"*\" || !rightFlanking || punctuation.test(before)))\n          setEm = true\n        else if (state.em == ch && rightFlanking && (ch === \"*\" || !leftFlanking || punctuation.test(after)))\n          setEm = false\n      }\n      if (len > 1) { // Strong\n        if (!state.strong && leftFlanking && (ch === \"*\" || !rightFlanking || punctuation.test(before)))\n          setStrong = true\n        else if (state.strong == ch && rightFlanking && (ch === \"*\" || !leftFlanking || punctuation.test(after)))\n          setStrong = false\n      }\n      if (setStrong != null || setEm != null) {\n        if (modeCfg.highlightFormatting) state.formatting = setEm == null ? \"strong\" : setStrong == null ? \"em\" : \"strong em\"\n        if (setEm === true) state.em = ch\n        if (setStrong === true) state.strong = ch\n        var t = getType(state)\n        if (setEm === false) state.em = false\n        if (setStrong === false) state.strong = false\n        return t\n      }\n    } else if (ch === ' ') {\n      if (stream.eat('*') || stream.eat('_')) { // Probably surrounded by spaces\n        if (stream.peek() === ' ') { // Surrounded by spaces, ignore\n          return getType(state);\n        } else { // Not surrounded by spaces, back up pointer\n          stream.backUp(1);\n        }\n      }\n    }\n\n    if (modeCfg.strikethrough) {\n      if (ch === '~' && stream.eatWhile(ch)) {\n        if (state.strikethrough) {// Remove strikethrough\n          if (modeCfg.highlightFormatting) state.formatting = \"strikethrough\";\n          var t = getType(state);\n          state.strikethrough = false;\n          return t;\n        } else if (stream.match(/^[^\\s]/, false)) {// Add strikethrough\n          state.strikethrough = true;\n          if (modeCfg.highlightFormatting) state.formatting = \"strikethrough\";\n          return getType(state);\n        }\n      } else if (ch === ' ') {\n        if (stream.match(/^~~/, true)) { // Probably surrounded by space\n          if (stream.peek() === ' ') { // Surrounded by spaces, ignore\n            return getType(state);\n          } else { // Not surrounded by spaces, back up pointer\n            stream.backUp(2);\n          }\n        }\n      }\n    }\n\n    if (modeCfg.emoji && ch === \":\" && stream.match(/^(?:[a-z_\\d+][a-z_\\d+-]*|\\-[a-z_\\d+][a-z_\\d+-]*):/)) {\n      state.emoji = true;\n      if (modeCfg.highlightFormatting) state.formatting = \"emoji\";\n      var retType = getType(state);\n      state.emoji = false;\n      return retType;\n    }\n\n    if (ch === ' ') {\n      if (stream.match(/^ +$/, false)) {\n        state.trailingSpace++;\n      } else if (state.trailingSpace) {\n        state.trailingSpaceNewLine = true;\n      }\n    }\n\n    return getType(state);\n  }\n\n  function linkInline(stream, state) {\n    var ch = stream.next();\n\n    if (ch === \">\") {\n      state.f = state.inline = inlineNormal;\n      if (modeCfg.highlightFormatting) state.formatting = \"link\";\n      var type = getType(state);\n      if (type){\n        type += \" \";\n      } else {\n        type = \"\";\n      }\n      return type + tokenTypes.linkInline;\n    }\n\n    stream.match(/^[^>]+/, true);\n\n    return tokenTypes.linkInline;\n  }\n\n  function linkHref(stream, state) {\n    // Check if space, and return NULL if so (to avoid marking the space)\n    if(stream.eatSpace()){\n      return null;\n    }\n    var ch = stream.next();\n    if (ch === '(' || ch === '[') {\n      state.f = state.inline = getLinkHrefInside(ch === \"(\" ? \")\" : \"]\");\n      if (modeCfg.highlightFormatting) state.formatting = \"link-string\";\n      state.linkHref = true;\n      return getType(state);\n    }\n    return 'error';\n  }\n\n  var linkRE = {\n    \")\": /^(?:[^\\\\\\(\\)]|\\\\.|\\((?:[^\\\\\\(\\)]|\\\\.)*\\))*?(?=\\))/,\n    \"]\": /^(?:[^\\\\\\[\\]]|\\\\.|\\[(?:[^\\\\\\[\\]]|\\\\.)*\\])*?(?=\\])/\n  }\n\n  function getLinkHrefInside(endChar) {\n    return function(stream, state) {\n      var ch = stream.next();\n\n      if (ch === endChar) {\n        state.f = state.inline = inlineNormal;\n        if (modeCfg.highlightFormatting) state.formatting = \"link-string\";\n        var returnState = getType(state);\n        state.linkHref = false;\n        return returnState;\n      }\n\n      stream.match(linkRE[endChar])\n      state.linkHref = true;\n      return getType(state);\n    };\n  }\n\n  function footnoteLink(stream, state) {\n    if (stream.match(/^([^\\]\\\\]|\\\\.)*\\]:/, false)) {\n      state.f = footnoteLinkInside;\n      stream.next(); // Consume [\n      if (modeCfg.highlightFormatting) state.formatting = \"link\";\n      state.linkText = true;\n      return getType(state);\n    }\n    return switchInline(stream, state, inlineNormal);\n  }\n\n  function footnoteLinkInside(stream, state) {\n    if (stream.match(/^\\]:/, true)) {\n      state.f = state.inline = footnoteUrl;\n      if (modeCfg.highlightFormatting) state.formatting = \"link\";\n      var returnType = getType(state);\n      state.linkText = false;\n      return returnType;\n    }\n\n    stream.match(/^([^\\]\\\\]|\\\\.)+/, true);\n\n    return tokenTypes.linkText;\n  }\n\n  function footnoteUrl(stream, state) {\n    // Check if space, and return NULL if so (to avoid marking the space)\n    if(stream.eatSpace()){\n      return null;\n    }\n    // Match URL\n    stream.match(/^[^\\s]+/, true);\n    // Check for link title\n    if (stream.peek() === undefined) { // End of line, set flag to check next line\n      state.linkTitle = true;\n    } else { // More content on line, check if link title\n      stream.match(/^(?:\\s+(?:\"(?:[^\"\\\\]|\\\\\\\\|\\\\.)+\"|'(?:[^'\\\\]|\\\\\\\\|\\\\.)+'|\\((?:[^)\\\\]|\\\\\\\\|\\\\.)+\\)))?/, true);\n    }\n    state.f = state.inline = inlineNormal;\n    return tokenTypes.linkHref + \" url\";\n  }\n\n  var mode = {\n    startState: function() {\n      return {\n        f: blockNormal,\n\n        prevLine: {stream: null},\n        thisLine: {stream: null},\n\n        block: blockNormal,\n        htmlState: null,\n        indentation: 0,\n\n        inline: inlineNormal,\n        text: handleText,\n\n        formatting: false,\n        linkText: false,\n        linkHref: false,\n        linkTitle: false,\n        code: 0,\n        em: false,\n        strong: false,\n        header: 0,\n        setext: 0,\n        hr: false,\n        taskList: false,\n        list: false,\n        listStack: [],\n        quote: 0,\n        trailingSpace: 0,\n        trailingSpaceNewLine: false,\n        strikethrough: false,\n        emoji: false,\n        fencedEndRE: null\n      };\n    },\n\n    copyState: function(s) {\n      return {\n        f: s.f,\n\n        prevLine: s.prevLine,\n        thisLine: s.thisLine,\n\n        block: s.block,\n        htmlState: s.htmlState && CodeMirror.copyState(htmlMode, s.htmlState),\n        indentation: s.indentation,\n\n        localMode: s.localMode,\n        localState: s.localMode ? CodeMirror.copyState(s.localMode, s.localState) : null,\n\n        inline: s.inline,\n        text: s.text,\n        formatting: false,\n        linkText: s.linkText,\n        linkTitle: s.linkTitle,\n        linkHref: s.linkHref,\n        code: s.code,\n        em: s.em,\n        strong: s.strong,\n        strikethrough: s.strikethrough,\n        emoji: s.emoji,\n        header: s.header,\n        setext: s.setext,\n        hr: s.hr,\n        taskList: s.taskList,\n        list: s.list,\n        listStack: s.listStack.slice(0),\n        quote: s.quote,\n        indentedCode: s.indentedCode,\n        trailingSpace: s.trailingSpace,\n        trailingSpaceNewLine: s.trailingSpaceNewLine,\n        md_inside: s.md_inside,\n        fencedEndRE: s.fencedEndRE\n      };\n    },\n\n    token: function(stream, state) {\n\n      // Reset state.formatting\n      state.formatting = false;\n\n      if (stream != state.thisLine.stream) {\n        state.header = 0;\n        state.hr = false;\n\n        if (stream.match(/^\\s*$/, true)) {\n          blankLine(state);\n          return null;\n        }\n\n        state.prevLine = state.thisLine\n        state.thisLine = {stream: stream}\n\n        // Reset state.taskList\n        state.taskList = false;\n\n        // Reset state.trailingSpace\n        state.trailingSpace = 0;\n        state.trailingSpaceNewLine = false;\n\n        if (!state.localState) {\n          state.f = state.block;\n          if (state.f != htmlBlock) {\n            var indentation = stream.match(/^\\s*/, true)[0].replace(/\\t/g, expandedTab).length;\n            state.indentation = indentation;\n            state.indentationDiff = null;\n            if (indentation > 0) return null;\n          }\n        }\n      }\n      return state.f(stream, state);\n    },\n\n    innerMode: function(state) {\n      if (state.block == htmlBlock) return {state: state.htmlState, mode: htmlMode};\n      if (state.localState) return {state: state.localState, mode: state.localMode};\n      return {state: state, mode: mode};\n    },\n\n    indent: function(state, textAfter, line) {\n      if (state.block == htmlBlock && htmlMode.indent) return htmlMode.indent(state.htmlState, textAfter, line)\n      if (state.localState && state.localMode.indent) return state.localMode.indent(state.localState, textAfter, line)\n      return CodeMirror.Pass\n    },\n\n    blankLine: blankLine,\n\n    getType: getType,\n\n    blockCommentStart: \"<!--\",\n    blockCommentEnd: \"-->\",\n    closeBrackets: \"()[]{}''\\\"\\\"``\",\n    fold: \"markdown\"\n  };\n  return mode;\n}, \"xml\");\n\nCodeMirror.defineMIME(\"text/markdown\", \"markdown\");\n\nCodeMirror.defineMIME(\"text/x-markdown\", \"markdown\");\n\n});\n","// CodeMirror, copyright (c) by Marijn Haverbeke and others\n// Distributed under an MIT license: https://codemirror.net/LICENSE\n\n(function(mod) {\n  if (typeof exports == \"object\" && typeof module == \"object\") // CommonJS\n    mod(require(\"../lib/codemirror\"));\n  else if (typeof define == \"function\" && define.amd) // AMD\n    define([\"../lib/codemirror\"], mod);\n  else // Plain browser env\n    mod(CodeMirror);\n})(function(CodeMirror) {\n  \"use strict\";\n\n  CodeMirror.modeInfo = [\n    {name: \"APL\", mime: \"text/apl\", mode: \"apl\", ext: [\"dyalog\", \"apl\"]},\n    {name: \"PGP\", mimes: [\"application/pgp\", \"application/pgp-encrypted\", \"application/pgp-keys\", \"application/pgp-signature\"], mode: \"asciiarmor\", ext: [\"asc\", \"pgp\", \"sig\"]},\n    {name: \"ASN.1\", mime: \"text/x-ttcn-asn\", mode: \"asn.1\", ext: [\"asn\", \"asn1\"]},\n    {name: \"Asterisk\", mime: \"text/x-asterisk\", mode: \"asterisk\", file: /^extensions\\.conf$/i},\n    {name: \"Brainfuck\", mime: \"text/x-brainfuck\", mode: \"brainfuck\", ext: [\"b\", \"bf\"]},\n    {name: \"C\", mime: \"text/x-csrc\", mode: \"clike\", ext: [\"c\", \"h\", \"ino\"]},\n    {name: \"C++\", mime: \"text/x-c++src\", mode: \"clike\", ext: [\"cpp\", \"c++\", \"cc\", \"cxx\", \"hpp\", \"h++\", \"hh\", \"hxx\"], alias: [\"cpp\"]},\n    {name: \"Cobol\", mime: \"text/x-cobol\", mode: \"cobol\", ext: [\"cob\", \"cpy\"]},\n    {name: \"C#\", mime: \"text/x-csharp\", mode: \"clike\", ext: [\"cs\"], alias: [\"csharp\"]},\n    {name: \"Clojure\", mime: \"text/x-clojure\", mode: \"clojure\", ext: [\"clj\", \"cljc\", \"cljx\"]},\n    {name: \"ClojureScript\", mime: \"text/x-clojurescript\", mode: \"clojure\", ext: [\"cljs\"]},\n    {name: \"Closure Stylesheets (GSS)\", mime: \"text/x-gss\", mode: \"css\", ext: [\"gss\"]},\n    {name: \"CMake\", mime: \"text/x-cmake\", mode: \"cmake\", ext: [\"cmake\", \"cmake.in\"], file: /^CMakeLists.txt$/},\n    {name: \"CoffeeScript\", mimes: [\"application/vnd.coffeescript\", \"text/coffeescript\", \"text/x-coffeescript\"], mode: \"coffeescript\", ext: [\"coffee\"], alias: [\"coffee\", \"coffee-script\"]},\n    {name: \"Common Lisp\", mime: \"text/x-common-lisp\", mode: \"commonlisp\", ext: [\"cl\", \"lisp\", \"el\"], alias: [\"lisp\"]},\n    {name: \"Cypher\", mime: \"application/x-cypher-query\", mode: \"cypher\", ext: [\"cyp\", \"cypher\"]},\n    {name: \"Cython\", mime: \"text/x-cython\", mode: \"python\", ext: [\"pyx\", \"pxd\", \"pxi\"]},\n    {name: \"Crystal\", mime: \"text/x-crystal\", mode: \"crystal\", ext: [\"cr\"]},\n    {name: \"CSS\", mime: \"text/css\", mode: \"css\", ext: [\"css\"]},\n    {name: \"CQL\", mime: \"text/x-cassandra\", mode: \"sql\", ext: [\"cql\"]},\n    {name: \"D\", mime: \"text/x-d\", mode: \"d\", ext: [\"d\"]},\n    {name: \"Dart\", mimes: [\"application/dart\", \"text/x-dart\"], mode: \"dart\", ext: [\"dart\"]},\n    {name: \"diff\", mime: \"text/x-diff\", mode: \"diff\", ext: [\"diff\", \"patch\"]},\n    {name: \"Django\", mime: \"text/x-django\", mode: \"django\"},\n    {name: \"Dockerfile\", mime: \"text/x-dockerfile\", mode: \"dockerfile\", file: /^Dockerfile$/},\n    {name: \"DTD\", mime: \"application/xml-dtd\", mode: \"dtd\", ext: [\"dtd\"]},\n    {name: \"Dylan\", mime: \"text/x-dylan\", mode: \"dylan\", ext: [\"dylan\", \"dyl\", \"intr\"]},\n    {name: \"EBNF\", mime: \"text/x-ebnf\", mode: \"ebnf\"},\n    {name: \"ECL\", mime: \"text/x-ecl\", mode: \"ecl\", ext: [\"ecl\"]},\n    {name: \"edn\", mime: \"application/edn\", mode: \"clojure\", ext: [\"edn\"]},\n    {name: \"Eiffel\", mime: \"text/x-eiffel\", mode: \"eiffel\", ext: [\"e\"]},\n    {name: \"Elm\", mime: \"text/x-elm\", mode: \"elm\", ext: [\"elm\"]},\n    {name: \"Embedded Javascript\", mime: \"application/x-ejs\", mode: \"htmlembedded\", ext: [\"ejs\"]},\n    {name: \"Embedded Ruby\", mime: \"application/x-erb\", mode: \"htmlembedded\", ext: [\"erb\"]},\n    {name: \"Erlang\", mime: \"text/x-erlang\", mode: \"erlang\", ext: [\"erl\"]},\n    {name: \"Esper\", mime: \"text/x-esper\", mode: \"sql\"},\n    {name: \"Factor\", mime: \"text/x-factor\", mode: \"factor\", ext: [\"factor\"]},\n    {name: \"FCL\", mime: \"text/x-fcl\", mode: \"fcl\"},\n    {name: \"Forth\", mime: \"text/x-forth\", mode: \"forth\", ext: [\"forth\", \"fth\", \"4th\"]},\n    {name: \"Fortran\", mime: \"text/x-fortran\", mode: \"fortran\", ext: [\"f\", \"for\", \"f77\", \"f90\", \"f95\"]},\n    {name: \"F#\", mime: \"text/x-fsharp\", mode: \"mllike\", ext: [\"fs\"], alias: [\"fsharp\"]},\n    {name: \"Gas\", mime: \"text/x-gas\", mode: \"gas\", ext: [\"s\"]},\n    {name: \"Gherkin\", mime: \"text/x-feature\", mode: \"gherkin\", ext: [\"feature\"]},\n    {name: \"GitHub Flavored Markdown\", mime: \"text/x-gfm\", mode: \"gfm\", file: /^(readme|contributing|history).md$/i},\n    {name: \"Go\", mime: \"text/x-go\", mode: \"go\", ext: [\"go\"]},\n    {name: \"Groovy\", mime: \"text/x-groovy\", mode: \"groovy\", ext: [\"groovy\", \"gradle\"], file: /^Jenkinsfile$/},\n    {name: \"HAML\", mime: \"text/x-haml\", mode: \"haml\", ext: [\"haml\"]},\n    {name: \"Haskell\", mime: \"text/x-haskell\", mode: \"haskell\", ext: [\"hs\"]},\n    {name: \"Haskell (Literate)\", mime: \"text/x-literate-haskell\", mode: \"haskell-literate\", ext: [\"lhs\"]},\n    {name: \"Haxe\", mime: \"text/x-haxe\", mode: \"haxe\", ext: [\"hx\"]},\n    {name: \"HXML\", mime: \"text/x-hxml\", mode: \"haxe\", ext: [\"hxml\"]},\n    {name: \"ASP.NET\", mime: \"application/x-aspx\", mode: \"htmlembedded\", ext: [\"aspx\"], alias: [\"asp\", \"aspx\"]},\n    {name: \"HTML\", mime: \"text/html\", mode: \"htmlmixed\", ext: [\"html\", \"htm\", \"handlebars\", \"hbs\"], alias: [\"xhtml\"]},\n    {name: \"HTTP\", mime: \"message/http\", mode: \"http\"},\n    {name: \"IDL\", mime: \"text/x-idl\", mode: \"idl\", ext: [\"pro\"]},\n    {name: \"Pug\", mime: \"text/x-pug\", mode: \"pug\", ext: [\"jade\", \"pug\"], alias: [\"jade\"]},\n    {name: \"Java\", mime: \"text/x-java\", mode: \"clike\", ext: [\"java\"]},\n    {name: \"Java Server Pages\", mime: \"application/x-jsp\", mode: \"htmlembedded\", ext: [\"jsp\"], alias: [\"jsp\"]},\n    {name: \"JavaScript\", mimes: [\"text/javascript\", \"text/ecmascript\", \"application/javascript\", \"application/x-javascript\", \"application/ecmascript\"],\n     mode: \"javascript\", ext: [\"js\"], alias: [\"ecmascript\", \"js\", \"node\"]},\n    {name: \"JSON\", mimes: [\"application/json\", \"application/x-json\"], mode: \"javascript\", ext: [\"json\", \"map\"], alias: [\"json5\"]},\n    {name: \"JSON-LD\", mime: \"application/ld+json\", mode: \"javascript\", ext: [\"jsonld\"], alias: [\"jsonld\"]},\n    {name: \"JSX\", mime: \"text/jsx\", mode: \"jsx\", ext: [\"jsx\"]},\n    {name: \"Jinja2\", mime: \"text/jinja2\", mode: \"jinja2\", ext: [\"j2\", \"jinja\", \"jinja2\"]},\n    {name: \"Julia\", mime: \"text/x-julia\", mode: \"julia\", ext: [\"jl\"]},\n    {name: \"Kotlin\", mime: \"text/x-kotlin\", mode: \"clike\", ext: [\"kt\"]},\n    {name: \"LESS\", mime: \"text/x-less\", mode: \"css\", ext: [\"less\"]},\n    {name: \"LiveScript\", mime: \"text/x-livescript\", mode: \"livescript\", ext: [\"ls\"], alias: [\"ls\"]},\n    {name: \"Lua\", mime: \"text/x-lua\", mode: \"lua\", ext: [\"lua\"]},\n    {name: \"Markdown\", mime: \"text/x-markdown\", mode: \"markdown\", ext: [\"markdown\", \"md\", \"mkd\"]},\n    {name: \"mIRC\", mime: \"text/mirc\", mode: \"mirc\"},\n    {name: \"MariaDB SQL\", mime: \"text/x-mariadb\", mode: \"sql\"},\n    {name: \"Mathematica\", mime: \"text/x-mathematica\", mode: \"mathematica\", ext: [\"m\", \"nb\"]},\n    {name: \"Modelica\", mime: \"text/x-modelica\", mode: \"modelica\", ext: [\"mo\"]},\n    {name: \"MUMPS\", mime: \"text/x-mumps\", mode: \"mumps\", ext: [\"mps\"]},\n    {name: \"MS SQL\", mime: \"text/x-mssql\", mode: \"sql\"},\n    {name: \"mbox\", mime: \"application/mbox\", mode: \"mbox\", ext: [\"mbox\"]},\n    {name: \"MySQL\", mime: \"text/x-mysql\", mode: \"sql\"},\n    {name: \"Nginx\", mime: \"text/x-nginx-conf\", mode: \"nginx\", file: /nginx.*\\.conf$/i},\n    {name: \"NSIS\", mime: \"text/x-nsis\", mode: \"nsis\", ext: [\"nsh\", \"nsi\"]},\n    {name: \"NTriples\", mimes: [\"application/n-triples\", \"application/n-quads\", \"text/n-triples\"],\n     mode: \"ntriples\", ext: [\"nt\", \"nq\"]},\n    {name: \"Objective-C\", mime: \"text/x-objectivec\", mode: \"clike\", ext: [\"m\", \"mm\"], alias: [\"objective-c\", \"objc\"]},\n    {name: \"OCaml\", mime: \"text/x-ocaml\", mode: \"mllike\", ext: [\"ml\", \"mli\", \"mll\", \"mly\"]},\n    {name: \"Octave\", mime: \"text/x-octave\", mode: \"octave\", ext: [\"m\"]},\n    {name: \"Oz\", mime: \"text/x-oz\", mode: \"oz\", ext: [\"oz\"]},\n    {name: \"Pascal\", mime: \"text/x-pascal\", mode: \"pascal\", ext: [\"p\", \"pas\"]},\n    {name: \"PEG.js\", mime: \"null\", mode: \"pegjs\", ext: [\"jsonld\"]},\n    {name: \"Perl\", mime: \"text/x-perl\", mode: \"perl\", ext: [\"pl\", \"pm\"]},\n    {name: \"PHP\", mimes: [\"text/x-php\", \"application/x-httpd-php\", \"application/x-httpd-php-open\"], mode: \"php\", ext: [\"php\", \"php3\", \"php4\", \"php5\", \"php7\", \"phtml\"]},\n    {name: \"Pig\", mime: \"text/x-pig\", mode: \"pig\", ext: [\"pig\"]},\n    {name: \"Plain Text\", mime: \"text/plain\", mode: \"null\", ext: [\"txt\", \"text\", \"conf\", \"def\", \"list\", \"log\"]},\n    {name: \"PLSQL\", mime: \"text/x-plsql\", mode: \"sql\", ext: [\"pls\"]},\n    {name: \"PowerShell\", mime: \"application/x-powershell\", mode: \"powershell\", ext: [\"ps1\", \"psd1\", \"psm1\"]},\n    {name: \"Properties files\", mime: \"text/x-properties\", mode: \"properties\", ext: [\"properties\", \"ini\", \"in\"], alias: [\"ini\", \"properties\"]},\n    {name: \"ProtoBuf\", mime: \"text/x-protobuf\", mode: \"protobuf\", ext: [\"proto\"]},\n    {name: \"Python\", mime: \"text/x-python\", mode: \"python\", ext: [\"BUILD\", \"bzl\", \"py\", \"pyw\"], file: /^(BUCK|BUILD)$/},\n    {name: \"Puppet\", mime: \"text/x-puppet\", mode: \"puppet\", ext: [\"pp\"]},\n    {name: \"Q\", mime: \"text/x-q\", mode: \"q\", ext: [\"q\"]},\n    {name: \"R\", mime: \"text/x-rsrc\", mode: \"r\", ext: [\"r\", \"R\"], alias: [\"rscript\"]},\n    {name: \"reStructuredText\", mime: \"text/x-rst\", mode: \"rst\", ext: [\"rst\"], alias: [\"rst\"]},\n    {name: \"RPM Changes\", mime: \"text/x-rpm-changes\", mode: \"rpm\"},\n    {name: \"RPM Spec\", mime: \"text/x-rpm-spec\", mode: \"rpm\", ext: [\"spec\"]},\n    {name: \"Ruby\", mime: \"text/x-ruby\", mode: \"ruby\", ext: [\"rb\"], alias: [\"jruby\", \"macruby\", \"rake\", \"rb\", \"rbx\"]},\n    {name: \"Rust\", mime: \"text/x-rustsrc\", mode: \"rust\", ext: [\"rs\"]},\n    {name: \"SAS\", mime: \"text/x-sas\", mode: \"sas\", ext: [\"sas\"]},\n    {name: \"Sass\", mime: \"text/x-sass\", mode: \"sass\", ext: [\"sass\"]},\n    {name: \"Scala\", mime: \"text/x-scala\", mode: \"clike\", ext: [\"scala\"]},\n    {name: \"Scheme\", mime: \"text/x-scheme\", mode: \"scheme\", ext: [\"scm\", \"ss\"]},\n    {name: \"SCSS\", mime: \"text/x-scss\", mode: \"css\", ext: [\"scss\"]},\n    {name: \"Shell\", mimes: [\"text/x-sh\", \"application/x-sh\"], mode: \"shell\", ext: [\"sh\", \"ksh\", \"bash\"], alias: [\"bash\", \"sh\", \"zsh\"], file: /^PKGBUILD$/},\n    {name: \"Sieve\", mime: \"application/sieve\", mode: \"sieve\", ext: [\"siv\", \"sieve\"]},\n    {name: \"Slim\", mimes: [\"text/x-slim\", \"application/x-slim\"], mode: \"slim\", ext: [\"slim\"]},\n    {name: \"Smalltalk\", mime: \"text/x-stsrc\", mode: \"smalltalk\", ext: [\"st\"]},\n    {name: \"Smarty\", mime: \"text/x-smarty\", mode: \"smarty\", ext: [\"tpl\"]},\n    {name: \"Solr\", mime: \"text/x-solr\", mode: \"solr\"},\n    {name: \"SML\", mime: \"text/x-sml\", mode: \"mllike\", ext: [\"sml\", \"sig\", \"fun\", \"smackspec\"]},\n    {name: \"Soy\", mime: \"text/x-soy\", mode: \"soy\", ext: [\"soy\"], alias: [\"closure template\"]},\n    {name: \"SPARQL\", mime: \"application/sparql-query\", mode: \"sparql\", ext: [\"rq\", \"sparql\"], alias: [\"sparul\"]},\n    {name: \"Spreadsheet\", mime: \"text/x-spreadsheet\", mode: \"spreadsheet\", alias: [\"excel\", \"formula\"]},\n    {name: \"SQL\", mime: \"text/x-sql\", mode: \"sql\", ext: [\"sql\"]},\n    {name: \"SQLite\", mime: \"text/x-sqlite\", mode: \"sql\"},\n    {name: \"Squirrel\", mime: \"text/x-squirrel\", mode: \"clike\", ext: [\"nut\"]},\n    {name: \"Stylus\", mime: \"text/x-styl\", mode: \"stylus\", ext: [\"styl\"]},\n    {name: \"Swift\", mime: \"text/x-swift\", mode: \"swift\", ext: [\"swift\"]},\n    {name: \"sTeX\", mime: \"text/x-stex\", mode: \"stex\"},\n    {name: \"LaTeX\", mime: \"text/x-latex\", mode: \"stex\", ext: [\"text\", \"ltx\", \"tex\"], alias: [\"tex\"]},\n    {name: \"SystemVerilog\", mime: \"text/x-systemverilog\", mode: \"verilog\", ext: [\"v\", \"sv\", \"svh\"]},\n    {name: \"Tcl\", mime: \"text/x-tcl\", mode: \"tcl\", ext: [\"tcl\"]},\n    {name: \"Textile\", mime: \"text/x-textile\", mode: \"textile\", ext: [\"textile\"]},\n    {name: \"TiddlyWiki \", mime: \"text/x-tiddlywiki\", mode: \"tiddlywiki\"},\n    {name: \"Tiki wiki\", mime: \"text/tiki\", mode: \"tiki\"},\n    {name: \"TOML\", mime: \"text/x-toml\", mode: \"toml\", ext: [\"toml\"]},\n    {name: \"Tornado\", mime: \"text/x-tornado\", mode: \"tornado\"},\n    {name: \"troff\", mime: \"text/troff\", mode: \"troff\", ext: [\"1\", \"2\", \"3\", \"4\", \"5\", \"6\", \"7\", \"8\", \"9\"]},\n    {name: \"TTCN\", mime: \"text/x-ttcn\", mode: \"ttcn\", ext: [\"ttcn\", \"ttcn3\", \"ttcnpp\"]},\n    {name: \"TTCN_CFG\", mime: \"text/x-ttcn-cfg\", mode: \"ttcn-cfg\", ext: [\"cfg\"]},\n    {name: \"Turtle\", mime: \"text/turtle\", mode: \"turtle\", ext: [\"ttl\"]},\n    {name: \"TypeScript\", mime: \"application/typescript\", mode: \"javascript\", ext: [\"ts\"], alias: [\"ts\"]},\n    {name: \"TypeScript-JSX\", mime: \"text/typescript-jsx\", mode: \"jsx\", ext: [\"tsx\"], alias: [\"tsx\"]},\n    {name: \"Twig\", mime: \"text/x-twig\", mode: \"twig\"},\n    {name: \"Web IDL\", mime: \"text/x-webidl\", mode: \"webidl\", ext: [\"webidl\"]},\n    {name: \"VB.NET\", mime: \"text/x-vb\", mode: \"vb\", ext: [\"vb\"]},\n    {name: \"VBScript\", mime: \"text/vbscript\", mode: \"vbscript\", ext: [\"vbs\"]},\n    {name: \"Velocity\", mime: \"text/velocity\", mode: \"velocity\", ext: [\"vtl\"]},\n    {name: \"Verilog\", mime: \"text/x-verilog\", mode: \"verilog\", ext: [\"v\"]},\n    {name: \"VHDL\", mime: \"text/x-vhdl\", mode: \"vhdl\", ext: [\"vhd\", \"vhdl\"]},\n    {name: \"Vue.js Component\", mimes: [\"script/x-vue\", \"text/x-vue\"], mode: \"vue\", ext: [\"vue\"]},\n    {name: \"XML\", mimes: [\"application/xml\", \"text/xml\"], mode: \"xml\", ext: [\"xml\", \"xsl\", \"xsd\", \"svg\"], alias: [\"rss\", \"wsdl\", \"xsd\"]},\n    {name: \"XQuery\", mime: \"application/xquery\", mode: \"xquery\", ext: [\"xy\", \"xquery\"]},\n    {name: \"Yacas\", mime: \"text/x-yacas\", mode: \"yacas\", ext: [\"ys\"]},\n    {name: \"YAML\", mimes: [\"text/x-yaml\", \"text/yaml\"], mode: \"yaml\", ext: [\"yaml\", \"yml\"], alias: [\"yml\"]},\n    {name: \"Z80\", mime: \"text/x-z80\", mode: \"z80\", ext: [\"z80\"]},\n    {name: \"mscgen\", mime: \"text/x-mscgen\", mode: \"mscgen\", ext: [\"mscgen\", \"mscin\", \"msc\"]},\n    {name: \"xu\", mime: \"text/x-xu\", mode: \"mscgen\", ext: [\"xu\"]},\n    {name: \"msgenny\", mime: \"text/x-msgenny\", mode: \"mscgen\", ext: [\"msgenny\"]}\n  ];\n  // Ensure all modes have a mime property for backwards compatibility\n  for (var i = 0; i < CodeMirror.modeInfo.length; i++) {\n    var info = CodeMirror.modeInfo[i];\n    if (info.mimes) info.mime = info.mimes[0];\n  }\n\n  CodeMirror.findModeByMIME = function(mime) {\n    mime = mime.toLowerCase();\n    for (var i = 0; i < CodeMirror.modeInfo.length; i++) {\n      var info = CodeMirror.modeInfo[i];\n      if (info.mime == mime) return info;\n      if (info.mimes) for (var j = 0; j < info.mimes.length; j++)\n        if (info.mimes[j] == mime) return info;\n    }\n    if (/\\+xml$/.test(mime)) return CodeMirror.findModeByMIME(\"application/xml\")\n    if (/\\+json$/.test(mime)) return CodeMirror.findModeByMIME(\"application/json\")\n  };\n\n  CodeMirror.findModeByExtension = function(ext) {\n    for (var i = 0; i < CodeMirror.modeInfo.length; i++) {\n      var info = CodeMirror.modeInfo[i];\n      if (info.ext) for (var j = 0; j < info.ext.length; j++)\n        if (info.ext[j] == ext) return info;\n    }\n  };\n\n  CodeMirror.findModeByFileName = function(filename) {\n    for (var i = 0; i < CodeMirror.modeInfo.length; i++) {\n      var info = CodeMirror.modeInfo[i];\n      if (info.file && info.file.test(filename)) return info;\n    }\n    var dot = filename.lastIndexOf(\".\");\n    var ext = dot > -1 && filename.substring(dot + 1, filename.length);\n    if (ext) return CodeMirror.findModeByExtension(ext);\n  };\n\n  CodeMirror.findModeByName = function(name) {\n    name = name.toLowerCase();\n    for (var i = 0; i < CodeMirror.modeInfo.length; i++) {\n      var info = CodeMirror.modeInfo[i];\n      if (info.name.toLowerCase() == name) return info;\n      if (info.alias) for (var j = 0; j < info.alias.length; j++)\n        if (info.alias[j].toLowerCase() == name) return info;\n    }\n  };\n});\n","import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport React from 'react';\nimport { css } from 'glamor';\n\nvar Alert = /*#__PURE__*/function (_React$PureComponent) {\n  _inherits(Alert, _React$PureComponent);\n\n  function Alert(props) {\n    var _this;\n\n    _classCallCheck(this, Alert);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Alert).call(this, props));\n    _this.containerStyle = css({\n      borderRadius: '3px',\n      backgroundColor: '#fff',\n      padding: '10px 16px',\n      display: 'flex',\n      boxSizing: 'border-box',\n      boxShadow: 'rgba(67, 90, 111, 0.3) 0px 0px 1px, rgba(67, 90, 111, 0.47) 0px 8px 10px -4px',\n      justifyContent: 'space-between',\n      flexDirection: 'row'\n    });\n    _this.containerBorderSuccess = css({\n      borderLeft: '3px solid rgb(71, 184, 129)'\n    });\n    _this.containerBorderWarn = css({\n      borderLeft: '3px solid rgb(217, 130, 43)'\n    });\n    _this.containerBorderDanger = css({\n      borderLeft: '3px solid rgb(236, 76, 71)'\n    });\n    _this.containerBorderNotify = css({\n      borderLeft: '3px solid rgb(16, 112, 202)'\n    });\n    _this.toastTextTitle = css({\n      fontWeight: '600',\n      fontSize: '14px',\n      color: '#435a6f',\n      margin: '0'\n    });\n    _this.toastTextChild = css({\n      fontSize: '14px',\n      color: '#999',\n      margin: '0'\n    });\n    _this.toastClose = css({\n      marginLeft: '15px',\n      height: '24px',\n      width: '24px',\n      lineHeight: '22px',\n      fontWeight: '700',\n      textAlign: 'center',\n      fontSize: '20px',\n      color: '#000',\n      cursor: 'pointer',\n      opacity: '0.5',\n      ':hover': {\n        opacity: 1\n      }\n    });\n    _this.toastIcon = css({\n      marginRight: '10px',\n      width: '14px',\n      height: '20px',\n      lineHeight: '20px'\n    });\n    return _this;\n  }\n\n  _createClass(Alert, [{\n    key: \"getContainerStyle\",\n    value: function getContainerStyle(intent) {\n      switch (intent) {\n        case 'success':\n          return {\n            borderStyle: this.containerBorderSuccess,\n            iconColor: css({\n              color: 'rgb(71, 184, 129)'\n            }),\n            iconClass: 'iconfont icon-check-circle'\n          };\n\n        case 'warning':\n          return {\n            borderStyle: this.containerBorderWarn,\n            iconColor: css({\n              color: 'rgb(217, 130, 43)'\n            }),\n            iconClass: 'iconfont icon-exclamation-triangle'\n          };\n\n        case 'none':\n          return {\n            borderStyle: this.containerBorderNotify,\n            iconColor: css({\n              color: 'rgb(16, 112, 202)'\n            }),\n            iconClass: 'iconfont icon-exclamation-circle'\n          };\n\n        case 'danger':\n          return {\n            borderStyle: this.containerBorderDanger,\n            iconColor: css({\n              color: 'rgb(236, 76, 71)'\n            }),\n            iconClass: 'iconfont icon-exclamation-circle'\n          };\n\n        default:\n          return {\n            borderStyle: this.containerBorderNotify,\n            iconColor: css({\n              color: 'rgb(16, 112, 202)'\n            }),\n            iconClass: 'iconfont icon-exclamation-circle'\n          };\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var toastStyle = this.getContainerStyle(this.props.intent);\n      return React.createElement(\"div\", css(toastStyle.borderStyle, this.containerStyle), React.createElement(\"div\", {\n        className: this.toastIcon\n      }, React.createElement(\"i\", Object.assign({\n        className: toastStyle.iconClass\n      }, toastStyle.iconColor))), React.createElement(\"div\", {\n        className: this.toastTextContainer\n      }, React.createElement(\"p\", {\n        className: this.toastTextTitle\n      }, this.props.title), this.props.children ? React.createElement(\"p\", {\n        className: this.toastTextChild\n      }, this.props.children) : null), React.createElement(\"div\", {\n        onClick: this.props.onRemove,\n        className: this.toastClose\n      }, React.createElement(\"span\", null, \"\\xD7\")));\n    }\n  }]);\n\n  return Alert;\n}(React.PureComponent);\n\nexport default Alert;","import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport React from 'react';\nimport { css } from 'glamor';\nimport Transition from 'react-transition-group/Transition';\nimport Alert from './alert';\nvar animationEasing = {\n  deceleration: 'cubic-bezier(0.0, 0.0, 0.2, 1)',\n  acceleration: 'cubic-bezier(0.4, 0.0, 1, 1)',\n  spring: 'cubic-bezier(0.175, 0.885, 0.320, 1.175)'\n};\nvar ANIMATION_DURATION = 240;\nvar openAnimation = css.keyframes('openAnimation', {\n  from: {\n    opacity: 0,\n    transform: 'translateY(-120%)'\n  },\n  to: {\n    transform: 'translateY(0)'\n  }\n});\nvar closeAnimation = css.keyframes('closeAnimation', {\n  from: {\n    transform: 'scale(1)',\n    opacity: 1\n  },\n  to: {\n    transform: 'scale(0.9)',\n    opacity: 0\n  }\n});\nvar animationStyles = css({\n  display: 'flex',\n  flexDirection: 'column',\n  alignItems: 'center',\n  height: 0,\n  transition: \"all \".concat(ANIMATION_DURATION, \"ms \").concat(animationEasing.deceleration),\n  '&[data-state=\"entering\"], &[data-state=\"entered\"]': {\n    animation: \"\".concat(openAnimation, \" \").concat(ANIMATION_DURATION, \"ms \").concat(animationEasing.spring, \" both\")\n  },\n  '&[data-state=\"exiting\"]': {\n    animation: \"\".concat(closeAnimation, \" 120ms \").concat(animationEasing.acceleration, \" both\")\n  }\n});\n\nvar Toast = /*#__PURE__*/function (_React$PureComponent) {\n  _inherits(Toast, _React$PureComponent);\n\n  function Toast() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, Toast);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(Toast)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      isShown: true,\n      height: 0\n    };\n\n    _this.close = function () {\n      _this.clearCloseTimer();\n\n      _this.setState({\n        isShown: false\n      });\n    };\n\n    _this.startCloseTimer = function () {\n      if (_this.props.duration) {\n        _this.closeTimer = setTimeout(function () {\n          _this.close();\n        }, _this.props.duration * 1000);\n      }\n    };\n\n    _this.clearCloseTimer = function () {\n      if (_this.closeTimer) {\n        clearTimeout(_this.closeTimer);\n        _this.closeTimer = null;\n      }\n    };\n\n    _this.handleMouseEnter = function () {\n      _this.clearCloseTimer();\n    };\n\n    _this.handleMouseLeave = function () {\n      _this.startCloseTimer();\n    };\n\n    _this.onRef = function (ref) {\n      if (ref === null) return;\n\n      var _ref$getBoundingClien = ref.getBoundingClientRect(),\n          height = _ref$getBoundingClien.height;\n\n      _this.setState({\n        height: height\n      });\n    };\n\n    return _this;\n  }\n\n  _createClass(Toast, [{\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps) {\n      if (prevProps.isShown !== this.props.isShown) {\n        // eslint-disable-next-line react/no-did-update-set-state\n        this.setState({\n          isShown: this.props.isShown\n        });\n      }\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.startCloseTimer();\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      this.clearCloseTimer();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      return React.createElement(Transition, {\n        appear: true,\n        unmountOnExit: true,\n        timeout: ANIMATION_DURATION,\n        in: this.state.isShown,\n        onExited: this.props.onRemove\n      }, function (state) {\n        return React.createElement(\"div\", {\n          \"data-state\": state,\n          className: animationStyles,\n          onMouseEnter: _this2.handleMouseEnter,\n          onMouseLeave: _this2.handleMouseLeave,\n          style: {\n            height: _this2.state.height,\n            zIndex: _this2.props.zIndex,\n            marginBottom: _this2.state.isShown ? 0 : -_this2.state.height\n          }\n        }, React.createElement(\"div\", {\n          ref: _this2.onRef,\n          style: {\n            padding: 8\n          }\n        }, React.createElement(Alert, {\n          intent: _this2.props.intent,\n          title: _this2.props.title,\n          children: _this2.props.children,\n          isRemoveable: _this2.props.hasCloseButton,\n          onRemove: function onRemove() {\n            return _this2.close();\n          }\n        })));\n      });\n    }\n  }]);\n\n  return Toast;\n}(React.PureComponent);\n\nToast.defaultProps = {\n  intent: 'none'\n};\nexport { Toast as default };","import _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\nimport _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport React from 'react';\nimport { css } from 'glamor';\nimport Toast from './toast';\nvar wrapperClass = css({\n  maxWidth: 560,\n  margin: '0 auto',\n  top: 0,\n  left: 0,\n  right: 0,\n  position: 'fixed',\n  zIndex: 30\n});\n\nvar hasCustomId = function hasCustomId(settings) {\n  return Object.hasOwnProperty.call(settings, 'id');\n};\n\nvar ToastManager = /*#__PURE__*/function (_React$PureComponent) {\n  _inherits(ToastManager, _React$PureComponent);\n\n  function ToastManager(props, context) {\n    var _this;\n\n    _classCallCheck(this, ToastManager);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(ToastManager).call(this, props, context));\n\n    _this.getToasts = function () {\n      return _this.state.toasts;\n    };\n\n    _this.closeAll = function () {\n      _this.getToasts().forEach(function (toast) {\n        return toast.close();\n      });\n    };\n\n    _this.notify = function (title, settings) {\n      // If there's a custom toast ID passed, close existing toasts with the same custom ID\n      if (hasCustomId(settings)) {\n        var _iteratorNormalCompletion = true;\n        var _didIteratorError = false;\n        var _iteratorError = undefined;\n\n        try {\n          for (var _iterator = _this.state.toasts[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n            var toast = _step.value;\n\n            // Since unique ID is still appended to a custom ID, skip the unique ID and check only prefix\n            if (String(toast.id).startsWith(settings.id)) {\n              _this.closeToast(toast.id);\n            }\n          }\n        } catch (err) {\n          _didIteratorError = true;\n          _iteratorError = err;\n        } finally {\n          try {\n            if (!_iteratorNormalCompletion && _iterator.return != null) {\n              _iterator.return();\n            }\n          } finally {\n            if (_didIteratorError) {\n              throw _iteratorError;\n            }\n          }\n        }\n      }\n\n      var instance = _this.createToastInstance(title, settings);\n\n      _this.setState(function (previousState) {\n        return {\n          toasts: [instance].concat(_toConsumableArray(previousState.toasts))\n        };\n      });\n\n      return instance;\n    };\n\n    _this.createToastInstance = function (title, settings) {\n      var uniqueId = ++ToastManager.idCounter;\n      var id = hasCustomId(settings) ? \"\".concat(settings.id, \"-\").concat(uniqueId) : uniqueId;\n      return {\n        id: id,\n        title: title,\n        description: settings.description,\n        hasCloseButton: settings.hasCloseButton || true,\n        duration: settings.duration || 2,\n        close: function close() {\n          return _this.closeToast(id);\n        },\n        intent: settings.intent\n      };\n    };\n\n    _this.closeToast = function (id) {\n      _this.setState(function (previousState) {\n        return {\n          toasts: previousState.toasts.map(function (toast) {\n            if (toast.id === id) {\n              return _objectSpread(_objectSpread({}, toast), {}, {\n                isShown: false\n              });\n            }\n\n            return toast;\n          })\n        };\n      });\n    };\n\n    _this.removeToast = function (id) {\n      _this.setState(function (previousState) {\n        return {\n          toasts: previousState.toasts.filter(function (toast) {\n            return toast.id !== id;\n          })\n        };\n      });\n    };\n\n    props.bindNotify(_this.notify);\n    props.bindGetToasts(_this.getToasts);\n    props.bindCloseAll(_this.closeAll);\n    _this.state = {\n      toasts: []\n    };\n    return _this;\n  }\n\n  _createClass(ToastManager, [{\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      return React.createElement(\"span\", {\n        className: wrapperClass\n      }, this.state.toasts.map(function (_ref) {\n        var id = _ref.id,\n            description = _ref.description,\n            props = _objectWithoutProperties(_ref, [\"id\", \"description\"]);\n\n        return React.createElement(Toast, Object.assign({\n          key: id,\n          onRemove: function onRemove() {\n            return _this2.removeToast(id);\n          }\n        }, props), description);\n      }));\n    }\n  }]);\n\n  return ToastManager;\n}(React.PureComponent);\n\nToastManager.idCounter = 0;\nexport { ToastManager as default };","import _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport ToastManager from './toastManager';\nvar isBrowser = typeof window !== 'undefined' && typeof window.document !== 'undefined';\n/**\n * The Toaster manages the interactionsb between\n * the ToasterManger and the toast API.\n */\n\nvar Toaster = function Toaster() {\n  var _this = this;\n\n  _classCallCheck(this, Toaster);\n\n  this._bindNotify = function (handler) {\n    _this.notifyHandler = handler;\n  };\n\n  this._bindGetToasts = function (handler) {\n    _this.getToastsHandler = handler;\n  };\n\n  this._bindCloseAll = function (handler) {\n    _this.closeAllHandler = handler;\n  };\n\n  this.getToasts = function () {\n    return _this.getToastsHandler();\n  };\n\n  this.closeAll = function () {\n    return _this.closeAllHandler();\n  };\n\n  this.notify = function (title) {\n    var settings = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    return _this.notifyHandler(title, _objectSpread(_objectSpread({}, settings), {}, {\n      intent: 'none'\n    }));\n  };\n\n  this.success = function (title) {\n    var settings = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    return _this.notifyHandler(title, _objectSpread(_objectSpread({}, settings), {}, {\n      intent: 'success'\n    }));\n  };\n\n  this.warning = function (title) {\n    var settings = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    return _this.notifyHandler(title, _objectSpread(_objectSpread({}, settings), {}, {\n      intent: 'warning'\n    }));\n  };\n\n  this.danger = function (title) {\n    var settings = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    return _this.notifyHandler(title, _objectSpread(_objectSpread({}, settings), {}, {\n      intent: 'danger'\n    }));\n  };\n\n  if (!isBrowser) return;\n  var container = document.createElement('div');\n  container.setAttribute('data-evergreen-toaster-container', '');\n  document.body.appendChild(container);\n  ReactDOM.render(React.createElement(ToastManager, {\n    bindNotify: this._bindNotify,\n    bindGetToasts: this._bindGetToasts,\n    bindCloseAll: this._bindCloseAll\n  }), container);\n};\n\nexport { Toaster as default };","import Toaster from './toaster';\nvar toaster = new Toaster();\nexport default toaster;","var isObject = require('./isObject');\n\n/**\n * Checks if `value` is suitable for strict equality comparisons, i.e. `===`.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` if suitable for strict\n *  equality comparisons, else `false`.\n */\nfunction isStrictComparable(value) {\n  return value === value && !isObject(value);\n}\n\nmodule.exports = isStrictComparable;\n","/**\n * A specialized version of `matchesProperty` for source values suitable\n * for strict equality comparisons, i.e. `===`.\n *\n * @private\n * @param {string} key The key of the property to get.\n * @param {*} srcValue The value to match.\n * @returns {Function} Returns the new spec function.\n */\nfunction matchesStrictComparable(key, srcValue) {\n  return function(object) {\n    if (object == null) {\n      return false;\n    }\n    return object[key] === srcValue &&\n      (srcValue !== undefined || (key in Object(object)));\n  };\n}\n\nmodule.exports = matchesStrictComparable;\n","var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nfunction _objectWithoutProperties(obj, keys) { var target = {}; for (var i in obj) { if (keys.indexOf(i) >= 0) continue; if (!Object.prototype.hasOwnProperty.call(obj, i)) continue; target[i] = obj[i]; } return target; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport Chart from 'chart.js';\nimport isEqual from 'lodash/isEqual';\nimport keyBy from 'lodash/keyBy';\n\nvar NODE_ENV = typeof process !== 'undefined' && process.env && process.env.NODE_ENV;\n\nvar ChartComponent = function (_React$Component) {\n  _inherits(ChartComponent, _React$Component);\n\n  function ChartComponent() {\n    _classCallCheck(this, ChartComponent);\n\n    var _this = _possibleConstructorReturn(this, _React$Component.call(this));\n\n    _this.handleOnClick = function (event) {\n      var instance = _this.chartInstance;\n\n      var _this$props = _this.props,\n          getDatasetAtEvent = _this$props.getDatasetAtEvent,\n          getElementAtEvent = _this$props.getElementAtEvent,\n          getElementsAtEvent = _this$props.getElementsAtEvent,\n          onElementsClick = _this$props.onElementsClick;\n\n\n      getDatasetAtEvent && getDatasetAtEvent(instance.getDatasetAtEvent(event), event);\n      getElementAtEvent && getElementAtEvent(instance.getElementAtEvent(event), event);\n      getElementsAtEvent && getElementsAtEvent(instance.getElementsAtEvent(event), event);\n      onElementsClick && onElementsClick(instance.getElementsAtEvent(event), event); // Backward compatibility\n    };\n\n    _this.ref = function (element) {\n      _this.element = element;\n    };\n\n    _this.chartInstance = undefined;\n    return _this;\n  }\n\n  ChartComponent.prototype.componentDidMount = function componentDidMount() {\n    this.renderChart();\n  };\n\n  ChartComponent.prototype.componentDidUpdate = function componentDidUpdate() {\n    if (this.props.redraw) {\n      this.destroyChart();\n      this.renderChart();\n      return;\n    }\n\n    this.updateChart();\n  };\n\n  ChartComponent.prototype.shouldComponentUpdate = function shouldComponentUpdate(nextProps) {\n    var _props = this.props,\n        redraw = _props.redraw,\n        type = _props.type,\n        options = _props.options,\n        plugins = _props.plugins,\n        legend = _props.legend,\n        height = _props.height,\n        width = _props.width;\n\n\n    if (nextProps.redraw === true) {\n      return true;\n    }\n\n    if (height !== nextProps.height || width !== nextProps.width) {\n      return true;\n    }\n\n    if (type !== nextProps.type) {\n      return true;\n    }\n\n    if (!isEqual(legend, nextProps.legend)) {\n      return true;\n    }\n\n    if (!isEqual(options, nextProps.options)) {\n      return true;\n    }\n\n    var nextData = this.transformDataProp(nextProps);\n\n    if (!isEqual(this.shadowDataProp, nextData)) {\n      return true;\n    }\n\n    return !isEqual(plugins, nextProps.plugins);\n  };\n\n  ChartComponent.prototype.componentWillUnmount = function componentWillUnmount() {\n    this.destroyChart();\n  };\n\n  ChartComponent.prototype.transformDataProp = function transformDataProp(props) {\n    var data = props.data;\n\n    if (typeof data == 'function') {\n      var node = this.element;\n      return data(node);\n    } else {\n      return data;\n    }\n  };\n\n  // Chart.js directly mutates the data.dataset objects by adding _meta proprerty\n  // this makes impossible to compare the current and next data changes\n  // therefore we memoize the data prop while sending a fake to Chart.js for mutation.\n  // see https://github.com/chartjs/Chart.js/blob/master/src/core/core.controller.js#L615-L617\n\n\n  ChartComponent.prototype.memoizeDataProps = function memoizeDataProps() {\n    if (!this.props.data) {\n      return;\n    }\n\n    var data = this.transformDataProp(this.props);\n\n    this.shadowDataProp = _extends({}, data, {\n      datasets: data.datasets && data.datasets.map(function (set) {\n        return _extends({}, set);\n      })\n    });\n\n    this.saveCurrentDatasets(); // to remove the dataset metadata from this chart when the chart is destroyed\n\n    return data;\n  };\n\n  ChartComponent.prototype.checkDatasets = function checkDatasets(datasets) {\n    var isDev = NODE_ENV !== 'production' && NODE_ENV !== 'prod';\n    var usingCustomKeyProvider = this.props.datasetKeyProvider !== ChartComponent.getLabelAsKey;\n    var multipleDatasets = datasets.length > 1;\n\n    if (isDev && multipleDatasets && !usingCustomKeyProvider) {\n      var shouldWarn = false;\n      datasets.forEach(function (dataset) {\n        if (!dataset.label) {\n          shouldWarn = true;\n        }\n      });\n\n      if (shouldWarn) {\n        console.error('[react-chartjs-2] Warning: Each dataset needs a unique key. By default, the \"label\" property on each dataset is used. Alternatively, you may provide a \"datasetKeyProvider\" as a prop that returns a unique key.');\n      }\n    }\n  };\n\n  ChartComponent.prototype.getCurrentDatasets = function getCurrentDatasets() {\n    return this.chartInstance && this.chartInstance.config.data && this.chartInstance.config.data.datasets || [];\n  };\n\n  ChartComponent.prototype.saveCurrentDatasets = function saveCurrentDatasets() {\n    var _this2 = this;\n\n    this.datasets = this.datasets || {};\n    var currentDatasets = this.getCurrentDatasets();\n    currentDatasets.forEach(function (d) {\n      _this2.datasets[_this2.props.datasetKeyProvider(d)] = d;\n    });\n  };\n\n  ChartComponent.prototype.updateChart = function updateChart() {\n    var _this3 = this;\n\n    var options = this.props.options;\n\n\n    var data = this.memoizeDataProps(this.props);\n\n    if (!this.chartInstance) return;\n\n    if (options) {\n      this.chartInstance.options = Chart.helpers.configMerge(this.chartInstance.options, options);\n    }\n\n    // Pipe datasets to chart instance datasets enabling\n    // seamless transitions\n    var currentDatasets = this.getCurrentDatasets();\n    var nextDatasets = data.datasets || [];\n    this.checkDatasets(currentDatasets);\n\n    var currentDatasetsIndexed = keyBy(currentDatasets, this.props.datasetKeyProvider);\n\n    // We can safely replace the dataset array, as long as we retain the _meta property\n    // on each dataset.\n    this.chartInstance.config.data.datasets = nextDatasets.map(function (next) {\n      var current = currentDatasetsIndexed[_this3.props.datasetKeyProvider(next)];\n\n      if (current && current.type === next.type && next.data) {\n        // Be robust to no data. Relevant for other update mechanisms as in chartjs-plugin-streaming.\n        // The data array must be edited in place. As chart.js adds listeners to it.\n        current.data.splice(next.data.length);\n        next.data.forEach(function (point, pid) {\n          current.data[pid] = next.data[pid];\n        });\n\n        var _data = next.data,\n            otherProps = _objectWithoutProperties(next, ['data']);\n        // Merge properties. Notice a weakness here. If a property is removed\n        // from next, it will be retained by current and never disappears.\n        // Workaround is to set value to null or undefined in next.\n\n\n        return _extends({}, current, otherProps);\n      } else {\n        return next;\n      }\n    });\n\n    var datasets = data.datasets,\n        rest = _objectWithoutProperties(data, ['datasets']);\n\n    this.chartInstance.config.data = _extends({}, this.chartInstance.config.data, rest);\n\n    this.chartInstance.update();\n  };\n\n  ChartComponent.prototype.renderChart = function renderChart() {\n    var _props2 = this.props,\n        options = _props2.options,\n        legend = _props2.legend,\n        type = _props2.type,\n        plugins = _props2.plugins;\n\n    var node = this.element;\n    var data = this.memoizeDataProps();\n\n    if (typeof legend !== 'undefined' && !isEqual(ChartComponent.defaultProps.legend, legend)) {\n      options.legend = legend;\n    }\n\n    this.chartInstance = new Chart(node, {\n      type: type,\n      data: data,\n      options: options,\n      plugins: plugins\n    });\n  };\n\n  ChartComponent.prototype.destroyChart = function destroyChart() {\n    // Put all of the datasets that have existed in the chart back on the chart\n    // so that the metadata associated with this chart get destroyed.\n    // This allows the datasets to be used in another chart. This can happen,\n    // for example, in a tabbed UI where the chart gets created each time the\n    // tab gets switched to the chart and uses the same data).\n    this.saveCurrentDatasets();\n    var datasets = Object.values(this.datasets);\n    this.chartInstance.config.data.datasets = datasets;\n\n    this.chartInstance.destroy();\n  };\n\n  ChartComponent.prototype.render = function render() {\n    var _props3 = this.props,\n        height = _props3.height,\n        width = _props3.width,\n        id = _props3.id;\n\n\n    return React.createElement('canvas', {\n      ref: this.ref,\n      height: height,\n      width: width,\n      id: id,\n      onClick: this.handleOnClick\n    });\n  };\n\n  return ChartComponent;\n}(React.Component);\n\nChartComponent.getLabelAsKey = function (d) {\n  return d.label;\n};\n\nChartComponent.propTypes = {\n  data: PropTypes.oneOfType([PropTypes.object, PropTypes.func]).isRequired,\n  getDatasetAtEvent: PropTypes.func,\n  getElementAtEvent: PropTypes.func,\n  getElementsAtEvent: PropTypes.func,\n  height: PropTypes.number,\n  legend: PropTypes.object,\n  onElementsClick: PropTypes.func,\n  options: PropTypes.object,\n  plugins: PropTypes.arrayOf(PropTypes.object),\n  redraw: PropTypes.bool,\n  type: function type(props, propName, componentName) {\n    if (!Chart.controllers[props[propName]]) {\n      return new Error('Invalid chart type `' + props[propName] + '` supplied to' + ' `' + componentName + '`.');\n    }\n  },\n  width: PropTypes.number,\n  datasetKeyProvider: PropTypes.func\n};\nChartComponent.defaultProps = {\n  legend: {\n    display: true,\n    position: 'bottom'\n  },\n  type: 'doughnut',\n  height: 150,\n  width: 300,\n  redraw: false,\n  options: {},\n  datasetKeyProvider: ChartComponent.getLabelAsKey\n};\n\n\nexport default ChartComponent;\n\nexport var Doughnut = function (_React$Component2) {\n  _inherits(Doughnut, _React$Component2);\n\n  function Doughnut() {\n    _classCallCheck(this, Doughnut);\n\n    return _possibleConstructorReturn(this, _React$Component2.apply(this, arguments));\n  }\n\n  Doughnut.prototype.render = function render() {\n    var _this5 = this;\n\n    return React.createElement(ChartComponent, _extends({}, this.props, {\n      ref: function ref(_ref) {\n        return _this5.chartInstance = _ref && _ref.chartInstance;\n      },\n      type: 'doughnut'\n    }));\n  };\n\n  return Doughnut;\n}(React.Component);\n\nexport var Pie = function (_React$Component3) {\n  _inherits(Pie, _React$Component3);\n\n  function Pie() {\n    _classCallCheck(this, Pie);\n\n    return _possibleConstructorReturn(this, _React$Component3.apply(this, arguments));\n  }\n\n  Pie.prototype.render = function render() {\n    var _this7 = this;\n\n    return React.createElement(ChartComponent, _extends({}, this.props, {\n      ref: function ref(_ref2) {\n        return _this7.chartInstance = _ref2 && _ref2.chartInstance;\n      },\n      type: 'pie'\n    }));\n  };\n\n  return Pie;\n}(React.Component);\n\nexport var Line = function (_React$Component4) {\n  _inherits(Line, _React$Component4);\n\n  function Line() {\n    _classCallCheck(this, Line);\n\n    return _possibleConstructorReturn(this, _React$Component4.apply(this, arguments));\n  }\n\n  Line.prototype.render = function render() {\n    var _this9 = this;\n\n    return React.createElement(ChartComponent, _extends({}, this.props, {\n      ref: function ref(_ref3) {\n        return _this9.chartInstance = _ref3 && _ref3.chartInstance;\n      },\n      type: 'line'\n    }));\n  };\n\n  return Line;\n}(React.Component);\n\nexport var Bar = function (_React$Component5) {\n  _inherits(Bar, _React$Component5);\n\n  function Bar() {\n    _classCallCheck(this, Bar);\n\n    return _possibleConstructorReturn(this, _React$Component5.apply(this, arguments));\n  }\n\n  Bar.prototype.render = function render() {\n    var _this11 = this;\n\n    return React.createElement(ChartComponent, _extends({}, this.props, {\n      ref: function ref(_ref4) {\n        return _this11.chartInstance = _ref4 && _ref4.chartInstance;\n      },\n      type: 'bar'\n    }));\n  };\n\n  return Bar;\n}(React.Component);\n\nexport var HorizontalBar = function (_React$Component6) {\n  _inherits(HorizontalBar, _React$Component6);\n\n  function HorizontalBar() {\n    _classCallCheck(this, HorizontalBar);\n\n    return _possibleConstructorReturn(this, _React$Component6.apply(this, arguments));\n  }\n\n  HorizontalBar.prototype.render = function render() {\n    var _this13 = this;\n\n    return React.createElement(ChartComponent, _extends({}, this.props, {\n      ref: function ref(_ref5) {\n        return _this13.chartInstance = _ref5 && _ref5.chartInstance;\n      },\n      type: 'horizontalBar'\n    }));\n  };\n\n  return HorizontalBar;\n}(React.Component);\n\nexport var Radar = function (_React$Component7) {\n  _inherits(Radar, _React$Component7);\n\n  function Radar() {\n    _classCallCheck(this, Radar);\n\n    return _possibleConstructorReturn(this, _React$Component7.apply(this, arguments));\n  }\n\n  Radar.prototype.render = function render() {\n    var _this15 = this;\n\n    return React.createElement(ChartComponent, _extends({}, this.props, {\n      ref: function ref(_ref6) {\n        return _this15.chartInstance = _ref6 && _ref6.chartInstance;\n      },\n      type: 'radar'\n    }));\n  };\n\n  return Radar;\n}(React.Component);\n\nexport var Polar = function (_React$Component8) {\n  _inherits(Polar, _React$Component8);\n\n  function Polar() {\n    _classCallCheck(this, Polar);\n\n    return _possibleConstructorReturn(this, _React$Component8.apply(this, arguments));\n  }\n\n  Polar.prototype.render = function render() {\n    var _this17 = this;\n\n    return React.createElement(ChartComponent, _extends({}, this.props, {\n      ref: function ref(_ref7) {\n        return _this17.chartInstance = _ref7 && _ref7.chartInstance;\n      },\n      type: 'polarArea'\n    }));\n  };\n\n  return Polar;\n}(React.Component);\n\nexport var Bubble = function (_React$Component9) {\n  _inherits(Bubble, _React$Component9);\n\n  function Bubble() {\n    _classCallCheck(this, Bubble);\n\n    return _possibleConstructorReturn(this, _React$Component9.apply(this, arguments));\n  }\n\n  Bubble.prototype.render = function render() {\n    var _this19 = this;\n\n    return React.createElement(ChartComponent, _extends({}, this.props, {\n      ref: function ref(_ref8) {\n        return _this19.chartInstance = _ref8 && _ref8.chartInstance;\n      },\n      type: 'bubble'\n    }));\n  };\n\n  return Bubble;\n}(React.Component);\n\nexport var Scatter = function (_React$Component10) {\n  _inherits(Scatter, _React$Component10);\n\n  function Scatter() {\n    _classCallCheck(this, Scatter);\n\n    return _possibleConstructorReturn(this, _React$Component10.apply(this, arguments));\n  }\n\n  Scatter.prototype.render = function render() {\n    var _this21 = this;\n\n    return React.createElement(ChartComponent, _extends({}, this.props, {\n      ref: function ref(_ref9) {\n        return _this21.chartInstance = _ref9 && _ref9.chartInstance;\n      },\n      type: 'scatter'\n    }));\n  };\n\n  return Scatter;\n}(React.Component);\n\nexport var defaults = Chart.defaults;\nexport { Chart };","var baseAssignValue = require('./_baseAssignValue'),\n    createAggregator = require('./_createAggregator');\n\n/**\n * Creates an object composed of keys generated from the results of running\n * each element of `collection` thru `iteratee`. The corresponding value of\n * each key is the last element responsible for generating the key. The\n * iteratee is invoked with one argument: (value).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Collection\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function} [iteratee=_.identity] The iteratee to transform keys.\n * @returns {Object} Returns the composed aggregate object.\n * @example\n *\n * var array = [\n *   { 'dir': 'left', 'code': 97 },\n *   { 'dir': 'right', 'code': 100 }\n * ];\n *\n * _.keyBy(array, function(o) {\n *   return String.fromCharCode(o.code);\n * });\n * // => { 'a': { 'dir': 'left', 'code': 97 }, 'd': { 'dir': 'right', 'code': 100 } }\n *\n * _.keyBy(array, 'dir');\n * // => { 'left': { 'dir': 'left', 'code': 97 }, 'right': { 'dir': 'right', 'code': 100 } }\n */\nvar keyBy = createAggregator(function(result, value, key) {\n  baseAssignValue(result, key, value);\n});\n\nmodule.exports = keyBy;\n","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Arrow = exports.Popper = exports.Target = exports.Manager = undefined;\n\nvar _Manager2 = require('./Manager');\n\nvar _Manager3 = _interopRequireDefault(_Manager2);\n\nvar _Target2 = require('./Target');\n\nvar _Target3 = _interopRequireDefault(_Target2);\n\nvar _Popper2 = require('./Popper');\n\nvar _Popper3 = _interopRequireDefault(_Popper2);\n\nvar _Arrow2 = require('./Arrow');\n\nvar _Arrow3 = _interopRequireDefault(_Arrow2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.Manager = _Manager3.default;\nexports.Target = _Target3.default;\nexports.Popper = _Popper3.default;\nexports.Arrow = _Arrow3.default;"],"sourceRoot":""}