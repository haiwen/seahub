"use strict";(self.webpackChunkseahub_frontend=self.webpackChunkseahub_frontend||[]).push([[464],{78507:function(e,t,s){var i,n=s(15671),a=s(43144),r=s(60136),l=s(29388),o=s(72791),h=s(54164),c=s(46480),p=s(263),d=s(93433),u=s(4761),m=s.n(u),f=s(53585),g=s(22228),x=s(72426),y=s.n(x),v=s(95996),j=s(80184),S=function(e){(0,r.Z)(s,e);var t=(0,l.Z)(s);function s(e){var i;return(0,n.Z)(this,s),(i=t.call(this,e)).handlerFileURL=function(e){return e.is_dir?f.ze+"library/"+e.repo_id+"/"+e.repo_name+e.fullpath:f.ze+"lib/"+e.repo_id+"/file"+v.c.encodePath(e.fullpath)},i.handlerParentDirPath=function(e){var t=e.is_dir?e.fullpath.length-e.name.length-1:e.fullpath.length-e.name.length;return e.fullpath.substring(0,t)},i.handlerParentDirURL=function(e){return f.ze+"library/"+e.repo_id+"/"+e.repo_name+i.handlerParentDirPath(e)},i}return(0,a.Z)(s,[{key:"render",value:function(){var e=this.props.item,t=decodeURI(e.fullpath).substring(1),s=t?v.c.getFolderIconUrl(!1,192):v.c.getDefaultLibIconUrl(!0),i=e.is_dir?s:v.c.getFileIconUrl(e.name,192);return""!==e.thumbnail_url&&(i=e.thumbnail_url),(0,j.jsxs)("li",{className:"search-result-item",children:[(0,j.jsx)("img",{className:t?"item-img":"lib-item-img",src:i,alt:""}),(0,j.jsxs)("div",{className:"item-content",children:[(0,j.jsx)("div",{className:"item-name ellipsis",children:(0,j.jsx)("a",{href:this.handlerFileURL(e),target:"_blank",title:e.name,rel:"noreferrer",children:e.name})}),(0,j.jsx)("div",{className:"item-link ellipsis",children:(0,j.jsxs)("a",{href:this.handlerParentDirURL(e),target:"_blank",rel:"noreferrer",children:[e.repo_name,this.handlerParentDirPath(e)]})}),(0,j.jsx)("div",{className:"item-link ellipsis",children:v.c.bytesToSize(e.size)+" "+y()(1e3*e.last_modified).format("YYYY-MM-DD")}),(0,j.jsx)("div",{className:"item-text ellipsis",dangerouslySetInnerHTML:{__html:e.content_highlight}})]})]})}}]),s}(o.Component),b=function(e){(0,r.Z)(s,e);var t=(0,l.Z)(s);function s(e){return(0,n.Z)(this,s),t.call(this,e)}return(0,a.Z)(s,[{key:"render",value:function(){var e=this.props,t=e.resultItems,s=e.total;return(0,j.jsxs)("div",{className:"search-result-container position-static",children:[(0,j.jsx)("p",{className:"tip",children:s>0?s+" "+(1===s?(0,f.ih)("result"):(0,f.ih)("results")):(0,f.ih)("No result")}),(0,j.jsx)("ul",{className:"search-result-list",children:t.map((function(e,t){return(0,j.jsx)(S,{item:e},t)}))})]})}}]),s}(o.Component),Z=s(24805),T=s.n(Z),_=s(87462),C=s(63366),N=s(97326),k=s(94578),F=s(4942),I=s(52007),M=s.n(I),E=s(81694),z=s.n(E),D=s(40661),w=s(15489);function O(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,i)}return s}function R(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?O(Object(s),!0).forEach((function(t){(0,F.Z)(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):O(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var P=R(R({},D.Transition.propTypes),{},{isOpen:M().bool,children:M().oneOfType([M().arrayOf(M().node),M().node]),tag:w.iC,className:M().node,navbar:M().bool,cssModule:M().object,innerRef:M().oneOfType([M().func,M().string,M().object])}),L=R(R({},D.Transition.defaultProps),{},{isOpen:!1,appear:!1,enter:!0,exit:!0,tag:"div",timeout:w.wF.Collapse}),A=((i={})[w.E5.ENTERING]="collapsing",i[w.E5.ENTERED]="collapse show",i[w.E5.EXITING]="collapsing",i[w.E5.EXITED]="collapse",i);function q(e){return e.scrollHeight}var H=function(e){function t(t){var s;return(s=e.call(this,t)||this).state={height:null},["onEntering","onEntered","onExit","onExiting","onExited"].forEach((function(e){s[e]=s[e].bind((0,N.Z)(s))})),s}(0,k.Z)(t,e);var s=t.prototype;return s.onEntering=function(e,t){this.setState({height:q(e)}),this.props.onEntering(e,t)},s.onEntered=function(e,t){this.setState({height:null}),this.props.onEntered(e,t)},s.onExit=function(e){this.setState({height:q(e)}),this.props.onExit(e)},s.onExiting=function(e){e.offsetHeight;this.setState({height:0}),this.props.onExiting(e)},s.onExited=function(e){this.setState({height:null}),this.props.onExited(e)},s.render=function(){var e=this,t=this.props,s=t.tag,i=t.isOpen,n=t.className,a=t.navbar,r=t.cssModule,l=t.children,h=(t.innerRef,(0,C.Z)(t,["tag","isOpen","className","navbar","cssModule","children","innerRef"])),c=this.state.height,p=(0,w.ei)(h,w.rb),d=(0,w.CE)(h,w.rb);return o.createElement(D.Transition,(0,_.Z)({},p,{in:i,onEntering:this.onEntering,onEntered:this.onEntered,onExit:this.onExit,onExiting:this.onExiting,onExited:this.onExited}),(function(t){var i=function(e){return A[e]||"collapse"}(t),h=(0,w.mx)(z()(n,i,a&&"navbar-collapse"),r),p=null===c?null:{height:c};return o.createElement(s,(0,_.Z)({},d,{style:R(R({},d.style),p),className:h,ref:e.props.innerRef}),l)}))},t}(o.Component);H.propTypes=P,H.defaultProps=L;var Y=H,K=s(56153),U=s(27988),V=s(66919),B=s(73002),G=s(54555),W={className:M().string,id:M().oneOfType([M().string,M().number]).isRequired,label:M().node,valid:M().bool,invalid:M().bool,bsSize:M().string,htmlFor:M().string,cssModule:M().object,onChange:M().func,children:M().oneOfType([M().node,M().array,M().func]),innerRef:M().oneOfType([M().object,M().string,M().func])},X=function(e){function t(t){var s;return(s=e.call(this,t)||this).state={files:null},s.onChange=s.onChange.bind((0,N.Z)(s)),s}(0,k.Z)(t,e);var s=t.prototype;return s.onChange=function(e){var t=e.target,s=this.props.onChange,i=this.getSelectedFiles(t);"function"===typeof s&&s.apply(void 0,arguments),this.setState({files:i})},s.getSelectedFiles=function(e){if(this.props.multiple&&e.files)return[].slice.call(e.files).map((function(e){return e.name})).join(", ");if(-1!==e.value.indexOf("fakepath")){var t=e.value.split("\\");return t[t.length-1]}return e.value},s.render=function(){var e=this.props,t=e.className,s=e.label,i=e.valid,n=e.invalid,a=e.cssModule,r=e.children,l=(e.bsSize,e.innerRef),h=e.htmlFor,c=(e.type,e.onChange,e.dataBrowse),p=e.hidden,d=(0,C.Z)(e,["className","label","valid","invalid","cssModule","children","bsSize","innerRef","htmlFor","type","onChange","dataBrowse","hidden"]),u=(0,w.mx)(z()(t,"custom-file"),a),m=(0,w.mx)(z()(n&&"is-invalid",i&&"is-valid"),a),f=h||d.id,g=this.state.files;return o.createElement("div",{className:u,hidden:p||!1},o.createElement("input",(0,_.Z)({type:"file"},d,{ref:l,"aria-invalid":n,className:z()(m,(0,w.mx)("custom-file-input",a)),onChange:this.onChange})),o.createElement("label",{className:(0,w.mx)("custom-file-label",a),htmlFor:f,"data-browse":c},g||s||"Choose file"),r)},t}(o.Component);X.propTypes=W;var J=X,Q={className:M().string,id:M().oneOfType([M().string,M().number]).isRequired,type:M().string.isRequired,label:M().node,inline:M().bool,valid:M().bool,invalid:M().bool,bsSize:M().string,htmlFor:M().string,cssModule:M().object,children:M().oneOfType([M().node,M().array,M().func]),innerRef:M().oneOfType([M().object,M().string,M().func])};function $(e){var t=e.className,s=e.label,i=e.inline,n=e.valid,a=e.invalid,r=e.cssModule,l=e.children,h=e.bsSize,c=e.innerRef,p=e.htmlFor,d=(0,C.Z)(e,["className","label","inline","valid","invalid","cssModule","children","bsSize","innerRef","htmlFor"]),u=d.type,m=(0,w.mx)(z()(t,"custom-"+u,!!h&&"custom-"+u+"-"+h),r),f=(0,w.mx)(z()(a&&"is-invalid",n&&"is-valid"),r),g=p||d.id;if("select"===u){d.type;var x=(0,C.Z)(d,["type"]);return o.createElement("select",(0,_.Z)({},x,{ref:c,className:z()(f,m),"aria-invalid":a}),l)}if("file"===u)return o.createElement(J,e);if("checkbox"!==u&&"radio"!==u&&"switch"!==u)return o.createElement("input",(0,_.Z)({},d,{ref:c,"aria-invalid":a,className:z()(f,m)}));var y=z()(m,(0,w.mx)(z()("custom-control",{"custom-control-inline":i}),r)),v=d.hidden,j=(0,C.Z)(d,["hidden"]);return o.createElement("div",{className:y,hidden:v||!1},o.createElement("input",(0,_.Z)({},j,{type:"switch"===u?"checkbox":u,ref:c,"aria-invalid":a,className:z()(f,(0,w.mx)("custom-control-input",r))})),o.createElement("label",{className:(0,w.mx)("custom-control-label",r),htmlFor:g},s),l)}$.propTypes=Q;var ee=$,te=s(82377),se=s(51840),ie=s(81815),ne=s(39974),ae=window.search.pageOptions,re=ae.repo_name,le=ae.search_repo,oe=function(e){(0,r.Z)(s,e);var t=(0,l.Z)(s);function s(e){var i;return(0,n.Z)(this,s),(i=t.call(this,e)).getFileTypesList=function(e){for(var t=[(0,f.ih)("Text"),(0,f.ih)("Document"),(0,f.ih)("Image"),(0,f.ih)("Video"),(0,f.ih)("Audio"),"PDF","Markdown"],s=[],i=0,n=e.length;i<n;i++)e[i]&&s.push(t[i]);return s},i.disabledStartDate=function(e){if(!e)return!1;var t=e.isAfter(y()(),"day"),s=i.props.stateAndValues.time_to;return s&&e.isAfter(s)||t},i.disabledEndDate=function(e){if(!e)return!1;var t=e.isAfter(y()(),"day"),s=i.props.stateAndValues.time_from;return s&&e.isBefore(s)||t},i}return(0,a.Z)(s,[{key:"render",value:function(){var e=this,t=this.props.stateAndValues,s=t.errorDateMsg,i=t.errorSizeMsg;if(t.isShowSearchFilter){var n=t.size_from,a=t.size_to,r=t.time_from,l=t.time_to,h=t.search_repo,c=t.fileTypeItemsStatus,p=this.getFileTypesList(c),d=p.length;return(0,j.jsxs)("div",{className:"search-filters",children:[h&&(0,j.jsxs)("span",{className:"mr-4",children:[(0,f.ih)("Libraries"),": ","all"==h?(0,f.ih)("All"):re]}),d>0&&(0,j.jsxs)("span",{className:"mr-4",children:[(0,f.ih)("File Types"),": ",p.map((function(e,t){return(0,j.jsxs)("span",{children:[e,t!==d-1&&","," "]},t)}))]}),r&&l&&(0,j.jsxs)("span",{className:"mr-4",children:[(0,f.ih)("Last Update"),": ",r.format("YYYY-MM-DD")," ",(0,f.ih)("to")," ",l.format("YYYY-MM-DD")]}),n&&a&&(0,j.jsxs)("span",{className:"mr-4",children:[(0,f.ih)("Size"),": ",n,"MB - ",a,"MB"]})]})}return(0,j.jsx)("div",{className:"advanced-search",children:(0,j.jsxs)(Y,{isOpen:t.isCollapseOpen,children:["all"!==le&&(0,j.jsx)("div",{className:"search-repo search-catalog",children:(0,j.jsxs)(K.Z,{children:[(0,j.jsxs)(U.Z,{md:"2",lg:"2",children:[(0,f.ih)("Libraries"),": "]}),(0,j.jsx)(U.Z,{md:"4",lg:"4",children:(0,j.jsx)(V.Z,{check:!0,children:(0,j.jsxs)(B.Z,{check:!0,children:[(0,j.jsx)(G.Z,{type:"radio",name:"repo",checked:t.isAllRepoCheck,onChange:function(){return e.props.handlerRepo(!0)}}),(0,f.ih)("In all libraries")]})})}),(0,j.jsx)(U.Z,{md:"4",lg:"4",children:(0,j.jsx)(V.Z,{check:!0,children:(0,j.jsxs)(B.Z,{check:!0,children:[(0,j.jsx)(G.Z,{type:"radio",name:"repo",checked:!t.isAllRepoCheck,onChange:function(){return e.props.handlerRepo(!1)}}),re]})})})]})}),(0,j.jsxs)("div",{className:"search-file-types search-catalog",children:[(0,j.jsxs)(K.Z,{children:[(0,j.jsxs)(U.Z,{md:"2",lg:"2",children:[(0,f.ih)("File Types"),": "]}),(0,j.jsx)(U.Z,{md:"4",lg:"4",children:(0,j.jsx)(V.Z,{check:!0,children:(0,j.jsxs)(B.Z,{check:!0,children:[(0,j.jsx)(G.Z,{type:"radio",name:"types",checked:!t.isFileTypeCollapseOpen,onChange:this.props.closeFileTypeCollapse}),(0,f.ih)("All file types")]})})}),(0,j.jsx)(U.Z,{md:"4",lg:"4",children:(0,j.jsx)(V.Z,{check:!0,children:(0,j.jsxs)(B.Z,{check:!0,children:[(0,j.jsx)(G.Z,{type:"radio",name:"types",checked:t.isFileTypeCollapseOpen,onChange:this.props.openFileTypeCollapse}),(0,f.ih)("Custom file types")]})})})]}),(0,j.jsxs)(K.Z,{children:[(0,j.jsx)(U.Z,{md:"2",lg:"2"}),(0,j.jsx)(U.Z,{md:"10",lg:"10",children:(0,j.jsxs)(Y,{isOpen:t.isFileTypeCollapseOpen,children:[(0,j.jsx)(V.Z,{className:"search-file-types-form",children:(0,j.jsxs)(o.Fragment,{children:[(0,j.jsx)(ee,{type:"checkbox",id:"checkTextFiles",label:(0,f.ih)("Text files"),inline:!0,onChange:function(){return e.props.handlerFileTypes(0)},checked:t.fileTypeItemsStatus[0]}),(0,j.jsx)(ee,{type:"checkbox",id:"checkDocuments",label:(0,f.ih)("Documents"),inline:!0,onChange:function(){return e.props.handlerFileTypes(1)},checked:t.fileTypeItemsStatus[1]}),(0,j.jsx)(ee,{type:"checkbox",id:"checkImages",label:(0,f.ih)("Images"),inline:!0,onChange:function(){return e.props.handlerFileTypes(2)},checked:t.fileTypeItemsStatus[2]}),(0,j.jsx)(ee,{type:"checkbox",id:"checkVideo",label:(0,f.ih)("Video"),inline:!0,onChange:function(){return e.props.handlerFileTypes(3)},checked:t.fileTypeItemsStatus[3]}),(0,j.jsx)(ee,{type:"checkbox",id:"checkAudio",label:(0,f.ih)("Audio"),inline:!0,onChange:function(){return e.props.handlerFileTypes(4)},checked:t.fileTypeItemsStatus[4]}),(0,j.jsx)(ee,{type:"checkbox",id:"checkPdf",label:"PDF",inline:!0,onChange:function(){return e.props.handlerFileTypes(5)},checked:t.fileTypeItemsStatus[5]}),(0,j.jsx)(ee,{type:"checkbox",id:"checkMarkdown",label:"Markdown",inline:!0,onChange:function(){return e.props.handlerFileTypes(6)},checked:t.fileTypeItemsStatus[6]})]})}),(0,j.jsx)("input",{type:"text",className:"form-control search-input",name:"query",autoComplete:"off",placeholder:(0,f.ih)("Input file extensions here, separate with ','"),onChange:this.props.handlerFileTypesInput,value:t.input_fexts,onKeyDown:this.props.handleKeyDown})]})})]})]}),(0,j.jsxs)("div",{className:"search-date search-catalog",children:[(0,j.jsxs)(K.Z,{children:[(0,j.jsxs)(U.Z,{md:"2",lg:"2",className:"mt-2",children:[(0,f.ih)("Last Update"),": "]}),(0,j.jsxs)(U.Z,{md:"4",lg:"4",sm:"4",xs:"5",className:"position-relative",children:[(0,j.jsx)(ne.Z,{inputWidth:"100%",disabledDate:this.disabledStartDate,value:t.time_from,onChange:this.props.handleTimeFromInput,showHourAndMinute:!1}),(0,j.jsx)("span",{className:"select-data-icon",children:(0,j.jsx)("i",{className:"fa fa-calendar-alt"})})]}),(0,j.jsx)("div",{className:"mt-2",children:"-"}),(0,j.jsxs)(U.Z,{md:"4",lg:"4",sm:"4",xs:"5",className:"position-relative",children:[(0,j.jsx)(ne.Z,{inputWidth:"100%",disabledDate:this.disabledEndDate,value:t.time_to,onChange:this.props.handleTimeToInput,showHourAndMinute:!1}),(0,j.jsx)("span",{className:"select-data-icon",children:(0,j.jsx)("i",{className:"fa fa-calendar-alt"})})]})]}),s&&(0,j.jsxs)(K.Z,{children:[(0,j.jsx)(U.Z,{md:"2",lg:"2"}),(0,j.jsx)(U.Z,{md:"8",className:"error mt-2",children:s})]})]}),(0,j.jsx)("div",{className:"search-size search-catalog",children:(0,j.jsxs)(K.Z,{children:[(0,j.jsxs)(U.Z,{md:"2",lg:"2",className:"mt-2",children:[(0,f.ih)("Size"),": "]}),(0,j.jsxs)(U.Z,{md:"4",lg:"4",sm:"4",xs:"5",children:[(0,j.jsx)(V.Z,{children:(0,j.jsxs)(te.Z,{children:[(0,j.jsx)(G.Z,{type:"tel",name:"size_from",onKeyDown:this.props.handleKeyDown,onChange:this.props.handleSizeFromInput,value:t.size_from}),(0,j.jsx)(se.Z,{addonType:"append",children:"MB"})]})}),(0,j.jsxs)(T(),{query:"(min-width: 768px)",children:[i&&(0,j.jsx)("div",{className:"error mb-4",children:i}),(0,j.jsx)(ie.Z,{color:"primary",onClick:this.props.handleSubmit,children:(0,f.ih)("Submit")}),(0,j.jsx)(ie.Z,{className:"ml-2",onClick:this.props.handleReset,children:(0,f.ih)("Reset")})]})]}),(0,j.jsx)("div",{className:"mt-2",children:"-"}),(0,j.jsx)(U.Z,{md:"4",lg:"4",sm:"4",xs:"5",children:(0,j.jsx)(V.Z,{children:(0,j.jsxs)(te.Z,{children:[(0,j.jsx)(G.Z,{type:"tel",name:"size_to",onKeyDown:this.props.handleKeyDown,onChange:this.props.handleSizeToInput,value:t.size_to}),(0,j.jsx)(se.Z,{addonType:"append",children:"MB"})]})})})]})}),(0,j.jsxs)(T(),{query:"(max-width: 767.8px)",children:[i&&(0,j.jsx)("div",{className:"error mb-4",children:i}),(0,j.jsx)(ie.Z,{color:"primary",onClick:this.props.handleSubmit,children:(0,f.ih)("Submit")}),(0,j.jsx)(ie.Z,{className:"ml-2",onClick:this.props.handleReset,children:(0,f.ih)("Reset")})]})]})})}}]),s}(o.Component),he=s(51832),ce=s(63446),pe=(s(29470),window.search.pageOptions),de=pe.q,ue=pe.search_repo,me=pe.search_ftypes,fe=function(e){(0,r.Z)(s,e);var t=(0,l.Z)(s);function s(e){var i;return(0,n.Z)(this,s),(i=t.call(this,e)).onNormalSearch=function(e){var t=m()(i.state);g.I.searchFiles(e,null).then((function(s){var n=s.data,a=n.results,r=n.has_more,l=n.total;i.setState({isLoading:!1,isResultGot:!0,resultItems:a,hasMore:r,total:l,page:e.page,isShowSearchFilter:!0}),i.stateHistory=t,i.stateHistory.resultItems=a,i.stateHistory.hasMore=r,i.stateHistory.page=e.page})).catch((function(e){i.setState({isLoading:!1}),e.response?he.Z.danger(e.response.data.detail||e.response.data.error_msg||(0,f.ih)("Error"),{duration:3}):he.Z.danger((0,f.ih)("Please check the network."),{duration:3})}))},i.onAiSearch=function(e){var t=[];g.I.aiSearchFiles(e,null).then((function(e){t=[].concat((0,d.Z)(t),(0,d.Z)(i.formatResultItems(e.data.results))),i.setState({resultItems:t,isResultGetted:!0,isLoading:!1,hasMore:!1})})).catch((function(e){console.log(e),i.setState({isLoading:!1})}))},i.handleSearchParams=function(e){var t={q:i.state.q.trim(),page:e},s=i.getFileTypesList();i.state.search_repo&&(t.search_repo=i.state.search_repo),i.state.search_ftypes&&(t.search_ftypes=i.state.search_ftypes),i.state.per_page&&(t.per_page=i.state.per_page),i.state.input_fexts&&(t.input_fexts=i.state.input_fexts);var n=i.state,a=n.time_from,r=n.time_to;return a&&(t.time_from=parseInt(a.valueOf()/1e3)),r&&(t.time_to=parseInt(r.valueOf()/1e3)),i.state.size_from&&(t.size_from=1e3*i.state.size_from*1e3),i.state.size_to&&(t.size_to=1e3*i.state.size_to*1e3),0!==s.length&&(t.ftype=s),t},i.handleSubmit=function(){if(i.compareNumber(i.state.size_from,i.state.size_to))i.setState({errorSizeMsg:(0,f.ih)("Invalid file size range.")});else{if(i.getValueLength(i.state.q.trim())<3)0===i.state.q.trim().length?i.setState({errorMsg:(0,f.ih)("It is required.")}):i.setState({errorMsg:(0,f.ih)("Required at least three letters.")}),i.state.isLoading&&i.setState({isLoading:!1});else{var e=i.handleSearchParams(1);i.getSearchResults(e)}i.state.isCollapseOpen&&i.setState({isCollapseOpen:!1})}},i.compareNumber=function(e,t){return!(!e||!t)&&parseInt(e.replace(/\-/g,""))>=parseInt(t.replace(/\-/g,""))},i.showSearchFilter=function(){i.setState({isShowSearchFilter:!0})},i.hideSearchFilter=function(){i.setState({isShowSearchFilter:!1})},i.handleReset=function(){i.setState({q:de.trim(),search_repo:ue,search_ftypes:me,fileTypeItemsStatus:[!1,!1,!1,!1,!1,!1,!1],input_fexts:"",time_from:null,time_to:null,size_from:"",size_to:"",errorMsg:"",errorDateMsg:"",errorSizeMsg:""})},i.handlePrevious=function(e){e.preventDefault(),i.stateHistory&&i.state.page>1?i.setState(i.stateHistory,(function(){var e=i.handleSearchParams(i.state.page-1);i.getSearchResults(e)})):he.Z.danger((0,f.ih)("Error"),{duration:3})},i.handleNext=function(e){e.preventDefault(),i.stateHistory&&i.state.hasMore?i.setState(i.stateHistory,(function(){var e=i.handleSearchParams(i.state.page+1);i.getSearchResults(e)})):he.Z.danger((0,f.ih)("Error"),{duration:3})},i.toggleCollapse=function(){i.setState({isCollapseOpen:!i.state.isCollapseOpen}),i.hideSearchFilter()},i.openFileTypeCollapse=function(){i.setState({isFileTypeCollapseOpen:!0,search_ftypes:"custom"})},i.closeFileTypeCollapse=function(){i.setState({isFileTypeCollapseOpen:!1,fileTypeItemsStatus:Array(7).fill(!1),search_ftypes:"all",input_fexts:""})},i.handleSearchInput=function(e){i.setState({q:e.target.value}),i.state.errorMsg&&i.setState({errorMsg:""}),i.state.errorSizeMsg&&i.setState({errorSizeMsg:""}),i.state.errorDateMsg&&i.setState({errorDateMsg:""})},i.handleKeyDown=function(e){13===e.keyCode&&(e.preventDefault(),i.handleSubmit())},i.handlerRepo=function(e){e?i.setState({isAllRepoCheck:!0,search_repo:"all"}):i.setState({isAllRepoCheck:!1,search_repo:"all"!==ue?ue:""})},i.handlerFileTypes=function(e){var t=i.state.fileTypeItemsStatus;t[e]=!i.state.fileTypeItemsStatus[e],i.setState({fileTypeItemsStatus:t})},i.getFileTypesList=function(){for(var e=["Text","Document","Image","Video","Audio","PDF","Markdown"],t=[],s=0,n=i.state.fileTypeItemsStatus.length;s<n;s++)i.state.fileTypeItemsStatus[s]&&t.push(e[s]);return t},i.handlerFileTypesInput=function(e){i.setState({input_fexts:e.target.value.trim()})},i.handleTimeFromInput=function(e){i.setState({time_from:e?e.hours(0).minutes(0).seconds(0):e}),i.state.errorDateMsg&&i.setState({errorDateMsg:""})},i.handleTimeToInput=function(e){i.setState({time_to:e?e.hours(23).minutes(59).seconds(59):e}),i.state.errorDateMsg&&i.setState({errorDateMsg:""})},i.handleSizeFromInput=function(e){i.setState({size_from:e.target.value>=0?e.target.value:0}),i.state.errorSizeMsg&&i.setState({errorSizeMsg:""})},i.handleSizeToInput=function(e){i.setState({size_to:e.target.value>=0?e.target.value:0}),i.state.errorSizeMsg&&i.setState({errorSizeMsg:""})},i.stateHistory=null,i.state={isCollapseOpen:"all"!==ue,isFileTypeCollapseOpen:!1,isResultGot:!1,isLoading:!0,isAllRepoCheck:"all"===ue,isShowSearchFilter:!1,q:de.trim(),search_repo:ue,search_ftypes:me,fileTypeItemsStatus:[!1,!1,!1,!1,!1,!1,!1],input_fexts:"",time_from:null,time_to:null,size_from:"",size_to:"",hasMore:!1,resultItems:[],page:1,per_page:20,errorMsg:"",errorDateMsg:"",errorSizeMsg:""},i}return(0,a.Z)(s,[{key:"getSearchResults",value:function(e){this.setState({isLoading:!0,isResultGot:!1}),f.wM?this.onAiSearch(e):this.onNormalSearch(e)}},{key:"getValueLength",value:function(e){for(var t,s=0,i=0,n=e.length;i<n;i++)10===(t=e.charCodeAt(i))?s+=2:t<127?s+=1:t>=128&&t<=2047?s+=2:t>=2048&&t<=65535&&(s+=3);return s}},{key:"componentDidMount",value:function(){this.state.q?this.handleSubmit():this.setState({isLoading:!1})}},{key:"render",value:function(){var e=this.state.isCollapseOpen;return(0,j.jsxs)("div",{className:"search-page",children:[(0,j.jsxs)("div",{className:"search-page-container",children:[(0,j.jsxs)("div",{className:"input-icon align-items-center d-flex",children:[(0,j.jsx)("input",{type:"text",className:"form-control search-input",name:"query",autoComplete:"off",value:this.state.q,placeholder:(0,f.ih)("Search files"),onChange:this.handleSearchInput,onKeyDown:this.handleKeyDown}),(0,j.jsx)("i",{className:"search-icon-right input-icon-addon fas fa-search",onClick:this.handleSubmit}),(0,j.jsx)("i",{className:"fas action-icon fa-angle-double-".concat(e?"up":"down"),onClick:this.toggleCollapse})]}),this.state.errorMsg&&(0,j.jsx)("div",{className:"error",children:this.state.errorMsg}),(0,j.jsx)(oe,{openFileTypeCollapse:this.openFileTypeCollapse,closeFileTypeCollapse:this.closeFileTypeCollapse,handlerFileTypes:this.handlerFileTypes,handlerFileTypesInput:this.handlerFileTypesInput,handleSubmit:this.handleSubmit,handleReset:this.handleReset,handlerRepo:this.handlerRepo,handleKeyDown:this.handleKeyDown,handleTimeFromInput:this.handleTimeFromInput,handleTimeToInput:this.handleTimeToInput,handleSizeFromInput:this.handleSizeFromInput,handleSizeToInput:this.handleSizeToInput,stateAndValues:this.state})]}),this.state.isLoading&&(0,j.jsx)(ce.Z,{}),!this.state.isLoading&&this.state.isResultGot&&(0,j.jsx)(b,{resultItems:this.state.resultItems,total:this.state.total}),!this.state.isLoading&&this.state.isResultGot&&(0,j.jsxs)("div",{className:"paginator",children:[1!==this.state.page&&(0,j.jsx)("a",{href:"#",onClick:this.handlePrevious,children:(0,f.ih)("Previous")}),1!==this.state.page&&this.state.hasMore&&(0,j.jsx)("span",{children:" | "}),this.state.hasMore&&(0,j.jsx)("a",{href:"#",onClick:this.handleNext,children:(0,f.ih)("Next")})]})]})}}]),s}(o.Component),ge=(s(28421),s(58108),function(e){(0,r.Z)(s,e);var t=(0,l.Z)(s);function s(e){var i;return(0,n.Z)(this,s),(i=t.call(this,e)).onSearchedClick=function(e){var t=e.is_dir?f.ze+"library/"+e.repo_id+"/"+e.repo_name+e.path:f.ze+"lib/"+e.repo_id+"/file"+v.c.encodePath(e.path);window.open("about:blank").location.href=t},i}return(0,a.Z)(s,[{key:"render",value:function(){return(0,j.jsxs)("div",{className:"w-100 h-100",children:[(0,j.jsxs)("div",{className:"main-panel-north border-left-show",children:[(0,j.jsx)(p.Z,{}),(0,j.jsx)(c.Z,{onSearchedClick:this.onSearchedClick})]}),(0,j.jsx)("div",{className:"main-panel-south",children:(0,j.jsx)(fe,{})})]})}}]),s}(o.Component));h.render((0,j.jsx)(ge,{}),document.getElementById("wrapper"))}},function(e){e.O(0,[351],(function(){return t=78507,e(e.s=t);var t}));e.O()}]);
//# sourceMappingURL=search.164ffc8c.js.map