/*! For license information please see tldrawEditor.54dfe70f.js.LICENSE.txt */
(self.webpackChunkseahub_frontend=self.webpackChunkseahub_frontend||[]).push([[8314],{9961:function(e,t,n){"use strict";n.d(t,{A:function(){return a}});n(9950);var r=n(48738),o=n.n(r),i=n(44414);var a=function(e){var t=e.className;return(0,i.jsx)("span",{className:o()("loading-icon loading-tip",t)})}},4086:function(e,t,n){"use strict";n.d(t,{A:function(){return P}});var r=n(89379),o=n(92901),i=n(23029),a=n(9950),u=n(1352),s=n(80045),c=n(60436),l=n(24765),f=n(39874),d=n(85501),p=n(32448),h=n(44414),v=function(e){function t(){return(0,i.default)(this,t),(0,f.default)(this,t,arguments)}return(0,d.default)(t,e),(0,o.default)(t,[{key:"getIconClass",value:function(e){switch(e){case"success":default:return"sf3-font sf3-font-check-circle";case"warning":return"sf3-font sf3-font-exclamation-triangle";case"none":case"danger":return"sf3-font sf3-font-exclamation-circle";case"notify-in-progress":return"loading-icon"}}},{key:"render",value:function(){var e=this.props,t=e.intent,n=e.title,r=e.children,o=e.isRemovable,i=e.onRemove,a=this.getIconClass(t);return(0,h.jsxs)("div",{className:"seahub-toast-alert-container ".concat(t||"success"),children:[(0,h.jsx)("div",{className:"toast-alert-icon",children:(0,h.jsx)("i",{className:a})}),(0,h.jsxs)("div",{className:"toast-text-container",children:[(0,h.jsx)("p",{className:"toast-text-title",children:n}),r?(0,h.jsx)("p",{className:"toast-text-child",children:r}):null]}),o&&(0,h.jsx)("div",{onClick:i,className:"toast-close",children:(0,h.jsx)("span",{children:"\xd7"})})]})}}])}(a.PureComponent),g=v,y=function(e){function t(){var e;(0,i.default)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=(0,f.default)(this,t,[].concat(r)))._isMounted=!1,e.state={isShown:!0},e.containerRef=a.createRef(),e.close=function(t){t&&(t.nativeEvent.stopImmediatePropagation(),t.stopPropagation()),e.clearCloseTimer(),e._isMounted&&e.setState({isShown:!1})},e.startCloseTimer=function(){e.props.duration&&(e.closeTimer=setTimeout((function(){e.close()}),1e3*e.props.duration))},e.clearCloseTimer=function(){e.closeTimer&&(clearTimeout(e.closeTimer),e.closeTimer=null)},e.handleMouseEnter=function(){e.clearCloseTimer()},e.handleMouseLeave=function(){e.startCloseTimer()},e.onRef=function(t){null!==t&&setTimeout((function(){var n=t.getBoundingClientRect().height;e.containerRef.current.style.height=n+"px"}),1)},e}return(0,d.default)(t,e),(0,o.default)(t,[{key:"componentDidUpdate",value:function(e){e.isShown!==this.props.isShown&&this.setState({isShown:this.props.isShown})}},{key:"componentDidMount",value:function(){this._isMounted=!0,this.startCloseTimer()}},{key:"componentWillUnmount",value:function(){this._isMounted=!1,this.clearCloseTimer()}},{key:"render",value:function(){var e=this;return(0,h.jsx)(p.default,{appear:!0,unmountOnExit:!0,timeout:240,in:this.state.isShown,onExited:this.props.onRemove,children:function(t){return(0,h.jsx)("div",{"data-state":t,className:"seahub-toast-container ".concat(t),onMouseEnter:e.handleMouseEnter,onMouseLeave:e.handleMouseLeave,style:{zIndex:e.props.zIndex},ref:e.containerRef,children:(0,h.jsx)("div",{ref:e.onRef,style:{padding:8},children:(0,h.jsx)(g,{intent:e.props.intent||"none",title:e.props.title,children:e.props.children||"",isRemovable:e.props.hasCloseButton,onRemove:function(t){return e.close(t)}})})})}})}}])}(a.PureComponent),m=["id","description"],b=function(e){return Object.hasOwnProperty.call(e,"id")},w=function(e){function t(e,n){var o;return(0,i.default)(this,t),(o=(0,f.default)(this,t,[e,n])).getToasts=function(){return o.state.toasts},o.closeAll=function(){o.getToasts().forEach((function(e){return e.close()}))},o.notify=function(e,t){if(b(t)){var n,r=(0,l.default)(o.state.toasts);try{for(r.s();!(n=r.n()).done;){var i=n.value;String(i.id).startsWith(t.id)&&o.closeToast(i.id)}}catch(u){r.e(u)}finally{r.f()}}var a=o.createToastInstance(e,t);return o.setState((function(e){return{toasts:[a].concat((0,c.default)(e.toasts))}})),a},o.createToastInstance=function(e,n){var r=++t.idCounter,i=b(n)?"".concat(n.id,"-").concat(r):r,a=n.hasCloseButton||!0,u=n.duration||2;return void 0!==n.hasCloseButton&&(a=n.hasCloseButton),void 0!==n.duration&&(u=n.duration),{id:i,title:e,description:n.description,hasCloseButton:a,duration:u,close:function(){return o.closeToast(i)},intent:n.intent}},o.closeToast=function(e){o.setState((function(t){return{toasts:t.toasts.map((function(t){return t.id===e?(0,r.default)((0,r.default)({},t),{},{isShown:!1}):t}))}}))},o.removeToast=function(e){o.setState((function(t){return{toasts:t.toasts.filter((function(t){return t.id!==e}))}}))},e.bindNotify(o.notify),e.bindGetToasts(o.getToasts),e.bindCloseAll(o.closeAll),o.state={toasts:[]},o}return(0,d.default)(t,e),(0,o.default)(t,[{key:"render",value:function(){var e=this;return(0,h.jsx)("div",{className:"seahub-toast-manager",children:this.state.toasts.map((function(t){var n=t.id,o=t.description,i=(0,s.default)(t,m);return(0,h.jsx)(y,(0,r.default)((0,r.default)({onRemove:function(){return e.removeToast(n)}},i),{},{children:o}),n)}))})}}])}(a.PureComponent);w.idCounter=0;var S="undefined"!==typeof window&&"undefined"!==typeof window.document,x=(0,o.default)((function e(){var t=this;if((0,i.default)(this,e),this._bindNotify=function(e){t.notifyHandler=e},this._bindGetToasts=function(e){t.getToastsHandler=e},this._bindCloseAll=function(e){t.closeAllHandler=e},this.getToasts=function(){return t.getToastsHandler()},this.closeAll=function(){return t.closeAllHandler()},this.notify=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.notifyHandler(e,(0,r.default)((0,r.default)({},n),{},{intent:"none"}))},this.notifyInProgress=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.notifyHandler(e,(0,r.default)((0,r.default)({},n),{},{intent:"notify-in-progress"}))},this.success=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.notifyHandler(e,(0,r.default)((0,r.default)({},n),{},{intent:"success"}))},this.warning=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.notifyHandler(e,(0,r.default)((0,r.default)({},n),{},{intent:"warning"}))},this.danger=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.notifyHandler(e,(0,r.default)((0,r.default)({},n),{},{intent:"danger"}))},S){var n=document.createElement("div");n.setAttribute("data-evergreen-toaster-container",""),document.body.appendChild(n),(0,u.createRoot)(n).render((0,h.jsx)(w,{bindNotify:this._bindNotify,bindGetToasts:this._bindGetToasts,bindCloseAll:this._bindCloseAll}))}})),P=new x},80415:function(e,t,n){"use strict";n.d(t,{AT:function(){return o},EY:function(){return l},Hq:function(){return b},K$:function(){return s},R5:function(){return u},RI:function(){return g},Tm:function(){return y},V0:function(){return f},_5:function(){return m},cK:function(){return r.A},cj:function(){return i},iN:function(){return p},ou:function(){return h},qw:function(){return v},u1:function(){return d},wY:function(){return c},xQ:function(){return a}});var r=n(13920),o=(window.innerHeight,{FILE_EXTENDED_PROPERTIES:"__file_extended_properties",TAGS_PROPERTIES:"__tags_properties"}),i=["#FBD44A","#EAA775","#F4667C","#DC82D2","#9860E5","#9F8CF1","#59CB74","#ADDF84","#89D2EA","#4ECCCB","#46A1FD","#C2C2C2"],a=71,u=28,s={B_MAP:"b_map",G_MAP:"g_map"},c=(s.B_MAP,{CURRENT_AND_OTHER_REPOS:"current_repo_and_other_repos",ONLY_CURRENT_LIBRARY:"only_current_library",ONLY_ALL_REPOS:"only_all_repos",ONLY_OTHER_LIBRARIES:"only_other_libraries",RECENTLY_USED:"recently_used",SEARCH_RESULTS:"search_results"}),l=["/_Internal","/images"],f="sf_dirent_detail_show",d="sf_capture_info_show",p="sf_dir_view_tree_panel_open",h="sf_dir_view_tree_panel_section_state",v="recently_used_list",g={SEARCH_FILENAME_AND_CONTENT:"search_filename_and_content",SEARCH_FILENAME_ONLY:"search_filename_only",CREATOR_LIST:"creator_list",DATE:"date",SUFFIXES:"suffixes"},y={TODAY:"today",LAST_7_DAYS:"last_7_days",LAST_30_DAYS:"last_30_days",CUSTOM:"custom"},m={CREATE_TIME:"create_time",LAST_MODIFIED_TIME:"last_modified_time"},b="search_filters_show"},13920:function(e,t){"use strict";t.A={Backspace:8,Tab:9,Enter:13,Shift:16,Ctrl:17,Alt:18,PauseBreak:19,CapsLock:20,Escape:27,Esc:27,Space:32,PageUp:33,PageDown:34,End:35,Home:36,LeftArrow:37,UpArrow:38,RightArrow:39,DownArrow:40,Insert:45,Delete:46,0:48,1:49,2:50,3:51,4:52,5:53,6:54,7:55,8:56,9:57,a:65,b:66,c:67,d:68,e:69,f:70,g:71,h:72,i:73,j:74,k:75,l:76,m:77,n:78,o:79,p:80,q:81,r:82,s:83,t:84,u:85,v:86,w:87,x:88,y:89,z:90,LeftWindowKey:91,RightWindowKey:92,SelectKey:93,NumPad0:96,NumPad1:97,NumPad2:98,NumPad3:99,NumPad4:100,NumPad5:101,NumPad6:102,NumPad7:103,NumPad8:104,NumPad9:105,Multiply:106,Add:107,Subtract:109,DecimalPoint:110,Divide:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F12:123,NumLock:144,ScrollLock:145,SemiColon:186,EqualSign:187,Comma:188,Dash:189,Period:190,ForwardSlash:191,GraveAccent:192,OpenBracket:219,BackSlash:220,CloseBracket:221,SingleQuote:222,ChineseInputMethod:229}},62523:function(e,t,n){"use strict";var r=n(9950),o=n(1352),i=n(36755),a=n(10467),u=n(5544),s=n(93757),c=n(75168),l=n(23029),f=n(92901),d=n(97011),p=n(65604),h=window.app.pageOptions,v=h.repoID,g=h.filePath,y=h.fileName,m=p.Aq.getDirName(g),b=new(function(){return(0,f.default)((function e(){(0,l.default)(this,e),this.getFileContent=function(){return d.e.getFileDownloadLink(v,g).then((function(e){var t=e.data;return d.e.getFileContent(t)}))}}),[{key:"saveContent",value:function(e){return d.e.getUpdateLink(v,m).then((function(t){var n=t.data;return d.e.updateFile(n,g,y,e)}))}}])}()),w=n(40326),S=n(4086),x=n(44414),P=function(){var e=(0,r.useRef)(null),t=(0,r.useRef)(!1),n=(0,r.useState)({}),o=(0,u.default)(n,2),l=o[0],f=o[1],d=(0,r.useState)(!0),h=(0,u.default)(d,2),v=h[0],g=h[1],y=(0,r.useCallback)((function(e){var t=window.app.pageOptions.docName,n=p.Aq.getFileIconUrl(t);document.getElementById("favicon").href=n}),[]);(0,r.useEffect)((function(){b.getFileContent().then((function(e){f(e.data),g(!1)})),y()}),[]);var m=(0,r.useCallback)((0,a.default)((0,i.default)().mark((function n(){return(0,i.default)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!t.current){n.next=11;break}return n.prev=1,n.next=4,b.saveContent(JSON.stringify(e.current));case 4:t.current=!1,S.A.success((0,w.APU)("Successfully saved"),{duration:2}),n.next=11;break;case 8:n.prev=8,n.t0=n.catch(1),S.A.danger((0,w.APU)("Failed to save"),{duration:2});case 11:case"end":return n.stop()}}),n,null,[[1,8]])}))),[]);(0,r.useEffect)((function(){var e=function(e){(0,c.default)("mod+s")(e)&&e.preventDefault()};return document.addEventListener("keydown",e),function(){document.removeEventListener("keydown",e)}}),[m]),(0,r.useEffect)((function(){var n=setInterval((function(){t.current&&b.saveContent(JSON.stringify(e.current)).then((function(e){t.current=!1}))}),18e4),r=function(e){t.current&&(e.preventDefault(),e.returnValue="")};return window.addEventListener("beforeunload",r),function(){clearInterval(n),window.removeEventListener("beforeunload",r)}}),[m]);var P=(0,r.useCallback)((function(n){e.current=n,t.current=!0}),[]),O=(0,r.useCallback)((function(){m()}),[m]);return(0,x.jsx)(s.Y,{isFetching:v,document:l||{document:null},onContentChanged:P,onSave:O})},O=n(9961);(0,o.createRoot)(document.getElementById("wrapper")).render((0,x.jsx)(r.Suspense,{fallback:(0,x.jsx)(O.A,{}),children:(0,x.jsx)(P,{})}))},40326:function(e,t,n){"use strict";n.d(t,{$0E:function(){return K},$6$:function(){return i},$Ep:function(){return Le},$L0:function(){return St},$j_:function(){return Lt},$zC:function(){return Ye},A8p:function(){return ze},APU:function(){return r},B$7:function(){return g},C24:function(){return _},CJT:function(){return Se},Cpb:function(){return J},DYR:function(){return Wt},E7p:function(){return Ne},EK0:function(){return tt},EKj:function(){return lt},EUo:function(){return ht},Ejc:function(){return ot},Etn:function(){return le},Ez:function(){return p},F1m:function(){return Ge},GCj:function(){return Je},GF3:function(){return ce},GnR:function(){return fe},HFm:function(){return st},HJr:function(){return he},Hh2:function(){return ut},IId:function(){return ft},IX4:function(){return v},IdM:function(){return yt},IhK:function(){return M},IwB:function(){return zt},JC6:function(){return Et},Jif:function(){return it},Kyu:function(){return Z},L5V:function(){return se},LSz:function(){return xt},LpR:function(){return Ht},M$p:function(){return x},M88:function(){return Me},MTv:function(){return Kt},MdH:function(){return pt},MjN:function(){return ke},Nz8:function(){return Re},OFL:function(){return Ee},OZM:function(){return $},OoO:function(){return Xt},Oq6:function(){return It},P95:function(){return Mt},P98:function(){return ge},PAH:function(){return Ve},PI$:function(){return Ue},Q7U:function(){return rt},QU_:function(){return Q},QVk:function(){return H},QdL:function(){return gt},QvE:function(){return Ae},RFo:function(){return F},RVG:function(){return kt},RfZ:function(){return ye},Rip:function(){return ae},SGU:function(){return u},Sr:function(){return Yt},TrM:function(){return Dt},Ts9:function(){return qe},UUu:function(){return I},V6g:function(){return at},VIO:function(){return a},VbL:function(){return D},XHW:function(){return wt},XVl:function(){return Ft},Xh_:function(){return E},YO9:function(){return Be},YX7:function(){return Pe},YcY:function(){return o},Yir:function(){return U},ZDj:function(){return Gt},_Ro:function(){return j},_sK:function(){return C},a5n:function(){return w},a8J:function(){return Ct},aKi:function(){return Fe},amr:function(){return d},ayJ:function(){return He},bHC:function(){return Pt},bdr:function(){return T},bwK:function(){return z},cN8:function(){return et},cT3:function(){return ve},dqD:function(){return pe},eB6:function(){return qt},egB:function(){return me},epk:function(){return L},erw:function(){return ct},ez5:function(){return V},fY9:function(){return N},gAF:function(){return l},gVO:function(){return ne},gjS:function(){return q},gj_:function(){return Qe},hMI:function(){return f},hP6:function(){return Vt},hf:function(){return Oe},hnv:function(){return xe},i$D:function(){return bt},iCS:function(){return Ke},iD7:function(){return ie},ifK:function(){return O},j$Y:function(){return Te},j1s:function(){return Ie},j9L:function(){return te},jQ6:function(){return W},jRp:function(){return Ut},jkr:function(){return De},jup:function(){return Bt},kMM:function(){return re},lU3:function(){return je},m$W:function(){return Rt},mz9:function(){return mt},n5Z:function(){return At},n6J:function(){return Ot},nVy:function(){return Ze},o6L:function(){return We},oCM:function(){return de},oIn:function(){return nt},oiK:function(){return X},ols:function(){return ee},p8I:function(){return _e},pP$:function(){return A},pug:function(){return c},pv8:function(){return Xe},q0L:function(){return s},qX8:function(){return b},qsk:function(){return ue},r8S:function(){return Y},rT4:function(){return k},s$t:function(){return dt},s4E:function(){return Nt},sO:function(){return P},sWS:function(){return Ce},sh1:function(){return _t},siA:function(){return y},uQE:function(){return we},vVe:function(){return h},vXX:function(){return vt},vfT:function(){return oe},vnZ:function(){return be},w47:function(){return Tt},wAC:function(){return jt},wRA:function(){return B},wgO:function(){return S},xF1:function(){return G},xW0:function(){return m},yRH:function(){return $e},zG5:function(){return Zt},znq:function(){return R}});var r=window.gettext||function(e){return e};window.app||(window.app={},window.app.config={},window.app.pageOptions={});var o=window.app.config.siteRoot,i=window.app.config.loginUrl,a=(window.app.config.avatarInfo,window.app.config.logoPath),u=window.app.config.mediaUrl,s=window.app.config.siteTitle,c=window.app.config.siteName,l=window.app.config.logoWidth,f=window.app.config.logoHeight,d="True"===window.app.config.isPro,p=window.app.config.isDBSqlite3,h=window.app.config.lang,v=window.app.config.fileServerRoot,g=window.app.config.useGoFileserver,y=window.app.config.seafileVersion,m=window.app.config.serviceURL,b=window.app.config.enableNotificationServer,w=window.app.config.notificationServerUrl,S=window.app.config.avatarURL,x=window.app.config.faviconPath,P=window.app.config.loginBGPath,O=window.app.config.enableRepoAutoDel,k=window.app.pageOptions.cloudMode,_=window.app.pageOptions.isOrgContext,j=window.app.pageOptions.trashReposExpireDays,I=window.app.pageOptions.name,T=window.app.pageOptions.contactEmail,E=window.app.pageOptions.username,C=window.app.pageOptions.canAddRepo,M=window.app.pageOptions.canShareRepo,A=window.app.pageOptions.canAddGroup,D=window.app.pageOptions.groupImportMembersExtraMsg,R=window.app.pageOptions.canGenerateShareLink,N=window.app.pageOptions.canGenerateUploadLink,L=window.app.pageOptions.canSendShareLinkEmail,U="True"===window.app.pageOptions.canViewOrg,F=window.app.pageOptions.fileAuditEnabled,B=window.app.pageOptions.folderPermEnabled,V="True"===window.app.pageOptions.enableResetEncryptedRepoPassword,z="True"===window.app.pageOptions.isEmailConfigured,H=(window.app.pageOptions.enableUploadFolder,window.app.pageOptions.enableResumableFileUpload,window.app.pageOptions.resumableUploadFileBlockSize),K=window.app.pageOptions.storages,G=window.app.pageOptions.libraryTemplates,q=window.app.pageOptions.enableRepoSnapshotLabel,W=window.app.pageOptions.shareLinkForceUsePassword,Y=window.app.pageOptions.shareLinkPasswordMinLength,X=window.app.pageOptions.shareLinkPasswordStrengthLevel,Z=window.app.pageOptions.shareLinkExpireDaysMin,$=window.app.pageOptions.shareLinkExpireDaysMax,Q=window.app.pageOptions.sideNavFooterCustomHtml,J=window.app.pageOptions.helpLink,ee=window.app.pageOptions.aboutDialogCustomHtml,te=window.app.pageOptions.shareLinkExpireDaysDefault,ne=window.app.pageOptions.uploadLinkExpireDaysMin,re=window.app.pageOptions.uploadLinkExpireDaysMax,oe=window.app.pageOptions.uploadLinkExpireDaysDefault,ie=window.app.pageOptions.enableShareToDepartment,ae=(window.app.pageOptions.maxFileName,window.app.pageOptions.canCreateWiki),ue=window.app.pageOptions.canPublishWiki,se=window.app.pageOptions.enableEncryptedLibrary,ce=window.app.pageOptions.enableRepoHistorySetting,le=window.app.pageOptions.enableUserCleanTrash,fe=window.app.pageOptions.isSystemStaff,de=window.app.pageOptions.thumbnailSizeForOriginal,pe=window.app.pageOptions.thumbnailDefaultSize,he=window.app.pageOptions.thumbnailSizeForGrid,ve=window.app.pageOptions.repoPasswordMinLength,ge=window.app.pageOptions.canAddPublicRepo,ye=window.app.pageOptions.canInvitePeople,me=window.app.pageOptions.canLockUnlockFile,be=window.app.pageOptions.customNavItems,we=window.app.pageOptions.enableShowContactEmailWhenSearchUser,Se=window.app.pageOptions.enableShowLoginIDWhenSearchUser,xe=window.app.pageOptions.maxUploadFileSize,Pe=window.app.pageOptions.maxNumberOfFilesForFileupload,Oe=window.app.pageOptions.enableOCM,ke=window.app.pageOptions.ocmRemoteServers,_e=(window.app.pageOptions.enableOCMViaWebdav,window.app.pageOptions.enableSSOToThirdpartWebsite),je=window.app.pageOptions.enableSeadoc,Ie=(window.app.pageOptions.enableMetadataManagement,window.app.pageOptions.enableSeafileAI),Te=window.app.pageOptions.enableWhiteboard,Ee=window.app.pageOptions.enableExcalidraw,Ce=window.app.pageOptions.enableMultipleOfficeSuite,Me=window.app.pageOptions.curNoteMsg,Ae=window.app.pageOptions.curNoteID,De=window.app.pageOptions.enableTC,Re=window.app.pageOptions.enableVideoThumbnail,Ne=window.app.pageOptions.enablePDFThumbnail,Le=window.app.pageOptions.enableOfficeWebApp||!1,Ue=window.app.pageOptions.officeWebAppEditFileExtension||[],Fe=window.app.pageOptions.enableOnlyoffice||!1,Be=window.app.pageOptions.onlyofficeEditFileExtension||[],Ve=window.app.pageOptions.onlyofficeConverterExtensions||[],ze=window.app.pageOptions.isMultiTenacy,He=(window.app.pageOptions.enableFileTags,window.app.pageOptions.enableShowAbout||!1),Ke=window.app.pageOptions.showWechatSupportGroup||!1,Ge=(window.app.pageOptions.workspaceID,window.app.pageOptions.showLogoutIcon),qe=window.app.pageOptions.additionalShareDialogNote,We=window.app.pageOptions.additionalAboutDialogLinks,Ye=window.app.pageOptions.baiduMapKey,Xe=window.app.pageOptions.googleMapKey,Ze=window.app.pageOptions.googleMapId,$e=(window.app.pageOptions.mineMapKey,window.wiki?window.wiki.config.slug:""),Qe=window.wiki?window.wiki.config.wikiId:"",Je=window.wiki?window.wiki.config.repoId:"",et=window.wiki?window.wiki.config.initial_path:"",tt=window.wiki?"True"===window.wiki.config.permission:"",nt=window.wiki?window.wiki.config.permission:"",rt=window.wiki?window.wiki.config.isDir:"",ot=(window.wiki&&window.wiki.config.serviceUrl,window.wiki?"True"===window.wiki.config.isPublicWiki:""),it=window.wiki?window.wiki.config.sharedToken:"",at=(window.wiki&&window.wiki.config.sharedType,window.wiki?window.wiki.config.hasIndex:""),ut=window.wiki?window.wiki.config.assetsUrl:"",st=!!window.wiki&&window.wiki.config.isWiki2,ct=window.wiki?window.wiki.config.seadocServerUrl:"",lt=(window.wiki&&window.wiki.config.seadocAccessToken,25),ft=window.fileHistory?window.fileHistory.pageOptions.repoID:"",dt=(window.fileHistory&&window.fileHistory.pageOptions.repoName,window.fileHistory?window.fileHistory.pageOptions.filePath:""),pt=window.fileHistory?window.fileHistory.pageOptions.fileName:"",ht=window.fileHistory?window.fileHistory.pageOptions.use_new_api:"",vt=window.fileHistory?window.fileHistory.pageOptions.can_download_file:"",gt=window.fileHistory?window.fileHistory.pageOptions.can_compare:"",yt=window.org?window.org.pageOptions.orgID:"",mt=(window.org&&window.org.pageOptions.orgName,window.org?window.org.pageOptions.invitationLink:""),bt=window.org?window.org.pageOptions.orgMemberQuotaEnabled:"",wt=!!window.org&&"True"===window.org.pageOptions.orgEnableAdminCustomLogo,St=!!window.org&&"True"===window.org.pageOptions.orgEnableAdminCustomName,xt=!!window.org&&"True"===window.org.pageOptions.orgEnableAdminInviteUser,Pt=!!window.org&&"True"===window.org.pageOptions.enableMultiADFS,Ot=!!window.org&&window.org.pageOptions.enableSubscription,kt=!!window.org&&window.org.pageOptions.enableExternalBillingService,_t=window.sysadmin?window.sysadmin.pageOptions.constance_enabled:"",jt=window.sysadmin?window.sysadmin.pageOptions.multi_tenancy:"",It=window.sysadmin?window.sysadmin.pageOptions.multi_institution:"",Tt=window.sysadmin?window.sysadmin.pageOptions.sysadmin_extra_enabled:"",Et=window.sysadmin?window.sysadmin.pageOptions.enable_guest_invitation:"",Ct=window.sysadmin?window.sysadmin.pageOptions.enable_terms_and_conditions:"",Mt=window.sysadmin?window.sysadmin.pageOptions.is_default_admin:"",At=window.sysadmin?window.sysadmin.pageOptions.enable_file_scan:"",Dt=window.sysadmin?window.sysadmin.pageOptions.admin_permissions.can_view_system_info:"",Rt=window.sysadmin?window.sysadmin.pageOptions.admin_permissions.can_view_statistic:"",Nt=window.sysadmin?window.sysadmin.pageOptions.admin_permissions.can_config_system:"",Lt=window.sysadmin?window.sysadmin.pageOptions.admin_permissions.can_manage_library:"",Ut=window.sysadmin?window.sysadmin.pageOptions.admin_permissions.can_manage_user:"",Ft=window.sysadmin?window.sysadmin.pageOptions.admin_permissions.can_manage_group:"",Bt=window.sysadmin?window.sysadmin.pageOptions.admin_permissions.can_view_user_log:"",Vt=window.sysadmin?window.sysadmin.pageOptions.admin_permissions.can_view_admin_log:"",zt=window.sysadmin?window.sysadmin.pageOptions.admin_permissions.other_permission:"",Ht=window.sysadmin?window.sysadmin.pageOptions.enable_work_weixin:"",Kt=window.sysadmin?window.sysadmin.pageOptions.enable_dingtalk:"",Gt=window.sysadmin?window.sysadmin.pageOptions.enableSysAdminViewRepo:"",qt=window.sysadmin?window.sysadmin.pageOptions.haveLDAP:"",Wt=window.sysadmin?window.sysadmin.pageOptions.enable_share_link_report_abuse:"",Yt=window.app?window.app.pageOptions.institutionName:"",Xt={opus:"video/ogg",ogv:"video/ogg",mp4:"video/mp4",mov:"video/mp4",m4v:"video/mp4",mkv:"video/x-matroska",m4a:"audio/mp4",mp3:"audio/mpeg",aac:"audio/aac",caf:"audio/x-caf",flac:"audio/flac",oga:"audio/ogg",wav:"audio/wav",m3u8:"application/x-mpegURL",mpd:"application/dash+xml",jpg:"image/jpeg",jpeg:"image/jpeg",gif:"image/gif",png:"image/png",svg:"image/svg+xml",webp:"image/webp"},Zt={maxWidth:"980px"}},97011:function(e,t,n){"use strict";n.d(t,{e:function(){return f}});var r=n(23029),o=n(92901),i=n(90287),a=n(85520),u=n.n(a),s=n(58801),c=n(40326),l=function(){return(0,o.default)((function e(){var t=this;(0,r.default)(this,e),this.listReplies=function(e,n,r){var o="".concat(t.server,"/api/v2.1/repos/").concat(e,"/file/").concat(n,"/comments/").concat(r,"/replies/");return t.req.get(o)},this.insertReply=function(e,n,r,o){var i="".concat(t.server,"/api/v2.1/repos/").concat(e,"/file/").concat(n,"/comments/").concat(r,"/replies/"),a=new(u());for(var s in o)a.append(s,o[s]);return t._sendPostRequest(i,a)},this.deleteReply=function(e,n,r,o){var i="".concat(t.server,"/api/v2.1/repos/").concat(e,"/file/").concat(n,"/comments/").concat(r,"/replies/").concat(o,"/");return t.req.delete(i)},this.updateReply=function(e,n,r,o,i){var a="".concat(t.server,"/api/v2.1/repos/").concat(e,"/file/").concat(n,"/comments/").concat(r,"/replies/").concat(o,"/");return t.req.put(a,i)}}),[{key:"init",value:function(e){var t=e.server,n=e.username,r=e.password,o=e.token;return this.server=t,this.username=n,this.password=r,this.token=o,this.token&&this.server&&(this.req=i.A.create({baseURL:this.server,headers:{Authorization:"Token "+this.token}})),this}},{key:"initForSeahubUsage",value:function(e){var t=e.siteRoot,n=e.xcsrfHeaders;if(t&&"/"===t.charAt(t.length-1)){var r=t.substring(0,t.length-1);this.server=r}else this.server=t;return this.req=i.A.create({headers:{"X-CSRFToken":n}}),this}},{key:"_sendPostRequest",value:function(e,t){return t.getHeaders?this.req.post(e,t,{headers:t.getHeaders()}):this.req.post(e,t)}},{key:"getAuthTokenBySession",value:function(){var e=this.server+"/api/v2.1/auth-token-by-session/";return this.req.get(e)}},{key:"createAuthTokenBySession",value:function(){var e=this.server+"/api/v2.1/auth-token-by-session/";return this.req.post(e)}},{key:"deleteAuthTokenBySession",value:function(){var e=this.server+"/api/v2.1/auth-token-by-session/";return this.req.delete(e)}},{key:"login",value:function(){var e=this,t=this.server+"/api2/auth-token/";return i.A.post(t,{username:this.username,password:this.password}).then((function(t){e.token=t.data.token,e.req=i.A.create({baseURL:e.server,headers:{Authorization:"Token "+e.token}})}))}},{key:"authPing",value:function(){var e=this.server+"/api2/auth/ping/";return this.req.get(e)}},{key:"getAccountInfo",value:function(){var e=this.server+"/api2/account/info/";return this.req.get(e)}},{key:"listDepartments",value:function(){var e=this.server+"/api/v2.1/departments/";return this.req.get(e)}},{key:"listAddressBookDepartments",value:function(){var e=this.server+"/api/v2.1/address-book/departments/";return this.req.get(e)}},{key:"listAddressBookDepartmentMembers",value:function(e){var t=this.server+"/api/v2.1/address-book/departments/"+e+"/members/";return this.req.get(t)}},{key:"listGroups",value:function(){var e={with_repos:arguments.length>0&&void 0!==arguments[0]&&arguments[0]?1:0},t=this.server+"/api/v2.1/groups/";return this.req.get(t,{params:e})}},{key:"listGroupRepos",value:function(e,t,n){var r=this.server+"/api/v2.1/groups/"+e+"/libraries/",o={};return void 0!=t&&(o.page=t),void 0!=n&&(o.per_page=n),this.req.get(r,{params:o})}},{key:"getGroup",value:function(e){var t=this.server+"/api/v2.1/groups/"+e+"/";return this.req.get(t)}},{key:"createGroup",value:function(e){var t=this.server+"/api/v2.1/groups/",n=new(u());return n.append("name",e),this._sendPostRequest(t,n)}},{key:"renameGroup",value:function(e,t){var n=this.server+"/api/v2.1/groups/"+e+"/",r={name:t};return this.req.put(n,r)}},{key:"deleteGroup",value:function(e){var t=this.server+"/api/v2.1/groups/"+e+"/";return this.req.delete(t)}},{key:"transferGroup",value:function(e,t){var n=this.server+"/api/v2.1/groups/"+e+"/",r={owner:t};return this.req.put(n,r)}},{key:"quitGroup",value:function(e,t){var n=encodeURIComponent(t),r=this.server+"/api/v2.1/groups/"+e+"/members/"+n+"/";return this.req.delete(r)}},{key:"listGroupMembers",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:64,i=this.server+"/api/v2.1/groups/"+e+"/members/",a={page:t||1,per_page:n||100,is_admin:r,avatar_size:o};return this.req.get(i,{params:a})}},{key:"searchGroupMember",value:function(e,t){var n=this.server+"/api/v2.1/groups/"+e+"/search-member/",r={q:t};return this.req.get(n,{params:r})}},{key:"addGroupMember",value:function(e,t){var n=this.server+"/api/v2.1/groups/"+e+"/members/",r={email:t};return this.req.post(n,r)}},{key:"addGroupMembers",value:function(e,t){var n=this.server+"/api/v2.1/groups/"+e+"/members/bulk/",r=new(u());return r.append("emails",t.join(",")),this._sendPostRequest(n,r)}},{key:"importGroupMembersViaFile",value:function(e,t){var n=this.server+"/api/v2.1/groups/"+e+"/members/import/",r=new(u());return r.append("file",t),this._sendPostRequest(n,r)}},{key:"deleteGroupMember",value:function(e,t){var n=encodeURIComponent(t),r=this.server+"/api/v2.1/groups/"+e+"/members/"+n+"/";return this.req.delete(r)}},{key:"setGroupAdmin",value:function(e,t,n){var r=encodeURIComponent(t),o=this.server+"/api/v2.1/groups/"+e+"/members/"+r+"/",i={is_admin:n};return this.req.put(o,i)}},{key:"createGroupOwnedLibrary",value:function(e,t){var n=t.repo_name,r=t.permission?t.permission:"rw",o=this.server+"/api/v2.1/groups/"+e+"/group-owned-libraries/",i=new(u());return i.append("name",n),t.passwd&&i.append("passwd",t.passwd),i.append("permission",r),t.library_template&&i.append("library_template",t.library_template),this._sendPostRequest(o,i)}},{key:"deleteGroupOwnedLibrary",value:function(e,t){var n=this.server+"/api/v2.1/groups/"+e+"/group-owned-libraries/"+t+"/";return this.req.delete(n)}},{key:"renameGroupOwnedLibrary",value:function(e,t,n){var r=this.server+"/api/v2.1/groups/"+e+"/group-owned-libraries/"+t+"/",o=new(u());return o.append("name",n),this.req.put(r,o)}},{key:"shareGroupOwnedRepoToUser",value:function(e,t,n,r){var o=this.server+"/api/v2.1/group-owned-libraries/"+e+"/user-share/",i=new(u());return i.append("permission",t),i.append("path",r),Array.isArray(n)?n.forEach((function(e){i.append("username",e)})):i.append("username",n),this._sendPostRequest(o,i)}},{key:"modifyGroupOwnedRepoUserSharedPermission",value:function(e,t,n,r){var o=this.server+"/api/v2.1/group-owned-libraries/"+e+"/user-share/",i=new(u());return i.append("permission",t),i.append("username",n),i.append("path",r),this.req.put(o,i)}},{key:"deleteGroupOwnedRepoSharedUserItem",value:function(e,t,n){var r=this.server+"/api/v2.1/group-owned-libraries/"+e+"/user-share/",o={username:t,path:n};return this.req.delete(r,{data:o})}},{key:"shareGroupOwnedRepoToGroup",value:function(e,t,n,r){var o=this.server+"/api/v2.1/group-owned-libraries/"+e+"/group-share/",i=new(u());return i.append("permission",t),i.append("path",r),n.forEach((function(e){i.append("group_id",e)})),this._sendPostRequest(o,i)}},{key:"modifyGroupOwnedRepoGroupSharedPermission",value:function(e,t,n,r){var o=this.server+"/api/v2.1/group-owned-libraries/"+e+"/group-share/",i=new(u());return i.append("permission",t),i.append("group_id",n),i.append("path",r),this.req.put(o,i)}},{key:"deleteGroupOwnedRepoSharedGroupItem",value:function(e,t,n){var r=this.server+"/api/v2.1/group-owned-libraries/"+e+"/group-share/",o={group_id:t,path:n};return this.req.delete(r,{data:o})}},{key:"deleteGroupInviteLinks",value:function(e,t){var n="".concat(this.server,"/api/v2.1/groups/").concat(e,"/invite-links/").concat(t,"/");return this.req.delete(n)}},{key:"addGroupInviteLinks",value:function(e){var t="".concat(this.server,"/api/v2.1/groups/").concat(e,"/invite-links/"),n=new(u());return this._sendPostRequest(t,n)}},{key:"getGroupInviteLinks",value:function(e){var t="".concat(this.server,"/api/v2.1/groups/").concat(e,"/invite-links/");return this.req.get(t)}},{key:"listShareLinks",value:function(e){var t=e.repoID,n=e.path,r=e.page,o=e.perPage,i=this.server+"/api/v2.1/share-links/",a={};return t&&n&&(a.repo_id=t,a.path=n),a.page=r||1,a.per_page=o||25,this.req.get(i,{params:a})}},{key:"batchCreateMultiShareLink",value:function(e,t,n,r,o,i){var a=this.server+"/api/v2.1/multi-share-links/batch/",s=new(u());return s.append("path",t),s.append("repo_id",e),s.append("number",n),s.append("auto_generate_password",r),i&&s.append("permissions",i),o&&s.append("expiration_time",o),this._sendPostRequest(a,s)}},{key:"createShareLink",value:function(e,t,n,r,o){var i=this.server+"/api/v2.1/share-links/",a=new(u());return a.append("path",t),a.append("repo_id",e),o&&a.append("permissions",o),n&&a.append("password",n),r&&a.append("expiration_time",r),this._sendPostRequest(i,a)}},{key:"deleteShareLink",value:function(e){var t=this.server+"/api/v2.1/share-links/"+e+"/";return this.req.delete(t)}},{key:"deleteShareLinks",value:function(e){var t=this.server+"/api/v2.1/share-links/",n={tokens:e};return this.req.delete(t,{data:n})}},{key:"cleanInvalidShareLinks",value:function(){var e=this.server+"/api/v2.1/share-links/clean-invalid/";return this.req.delete(e)}},{key:"sendShareLink",value:function(e,t,n){var r=this.server+"/api2/send-share-link/",o=new(u());return o.append("token",e),o.append("email",t),n&&o.append("extra_msg",n),this._sendPostRequest(r,o)}},{key:"getRepoFolderShareInfo",value:function(e,t){var n=this.server+"/api/v2.1/repos/"+e+"/share-info/",r={};return void 0!=t&&(r.path=t),this.req.get(n,{params:r})}},{key:"listRepoShareLinks",value:function(e){var t=this.server+"/api/v2.1/repos/"+e+"/share-links/";return this.req.get(t)}},{key:"deleteRepoShareLink",value:function(e,t){var n=this.server+"/api/v2.1/repos/"+e+"/share-links/"+t+"/";return this.req.delete(n)}},{key:"listSharedRepos",value:function(){var e=this.server+"/api/v2.1/shared-repos/";return this.req.get(e)}},{key:"getShareLinkRepoTags",value:function(e){var t=this.server+"/api/v2.1/share-links/"+e+"/repo-tags/";return this.req.get(t)}},{key:"getShareLinkTaggedFiles",value:function(e,t){var n=this.server+"/api/v2.1/share-links/"+e+"/tagged-files/"+t+"/";return this.req.get(n)}},{key:"getAllRepoFolderShareInfo",value:function(e,t){var n=this.server+"/api/v2.1/repo-folder-share-info/",r={repo_id:e};return t&&(r.share_to=t),this.req.get(n,{params:r})}},{key:"listUserUploadLinks",value:function(){var e=this.server+"/api/v2.1/upload-links/";return this.req.get(e)}},{key:"getUploadLink",value:function(e,t){var n=this.server+"/api/v2.1/upload-links/?repo_id="+e+"&path="+encodeURIComponent(t);return this.req.get(n)}},{key:"createUploadLink",value:function(e,t,n,r){var o=this.server+"/api/v2.1/upload-links/",i=new(u());return i.append("path",t),i.append("repo_id",e),n&&i.append("password",n),r&&i.append("expiration_time",r),this._sendPostRequest(o,i)}},{key:"updateUploadLink",value:function(e,t){var n=this.server+"/api/v2.1/upload-links/"+e+"/",r=new(u());return r.append("expiration_time",t),this.req.put(n,r)}},{key:"deleteUploadLink",value:function(e){var t=this.server+"/api/v2.1/upload-links/"+e+"/";return this.req.delete(t)}},{key:"cleanInvalidUploadLinks",value:function(){var e=this.server+"/api/v2.1/upload-links/clean-invalid/";return this.req.delete(e)}},{key:"sendUploadLink",value:function(e,t,n){var r=this.server+"/api2/send-upload-link/",o=new(u());return o.append("token",e),o.append("email",t),n&&o.append("extra_msg",n),this._sendPostRequest(r,o)}},{key:"listRepoUploadLinks",value:function(e){var t=this.server+"/api/v2.1/repos/"+e+"/upload-links/";return this.req.get(t)}},{key:"deleteRepoUploadLink",value:function(e,t){var n=this.server+"/api/v2.1/repos/"+e+"/upload-links/"+t+"/";return this.req.delete(n)}},{key:"listSharedItems",value:function(e,t,n){t=encodeURIComponent(t);var r=this.server+"/api2/repos/"+e+"/dir/shared_items/?p="+t+"&share_type="+n;return this.req.get(r)}},{key:"getBeSharedRepos",value:function(){var e=this.server+"/api2/beshared-repos/";return this.req.get(e)}},{key:"leaveShareRepo",value:function(e,t){var n=this.server+"/api2/beshared-repos/"+e+"/";return this.req.delete(n,{params:t})}},{key:"deleteShareToUserItem",value:function(e,t,n,r){t=encodeURIComponent(t);var o=this.server+"/api2/repos/"+e+"/dir/shared_items/?p="+t+"&share_type="+n+"&username="+encodeURIComponent(r);return this.req.delete(o)}},{key:"updateShareToUserItemPermission",value:function(e,t,n,r,o){t=encodeURIComponent(t);var i=this.server+"/api2/repos/"+e+"/dir/shared_items/?p="+t+"&share_type="+n+"&username="+encodeURIComponent(r),a=new(u());return a.append("permission",o),this._sendPostRequest(i,a)}},{key:"deleteShareToGroupItem",value:function(e,t,n,r){t=encodeURIComponent(t);var o=this.server+"/api2/repos/"+e+"/dir/shared_items/?p="+t+"&share_type="+n+"&group_id="+r;return this.req.delete(o)}},{key:"updateShareToGroupItemPermission",value:function(e,t,n,r,o){t=encodeURIComponent(t);var i=this.server+"/api2/repos/"+e+"/dir/shared_items/?p="+t+"&share_type="+n+"&group_id="+r,a=new(u());return a.append("permission",o),this._sendPostRequest(i,a)}},{key:"leaveShareGroupOwnedRepo",value:function(e){var t=this.server+"/api/v2.1/group-owned-libraries/user-share-in-libraries/"+e+"/";return this.req.delete(t)}},{key:"shareableGroups",value:function(){var e=this.server+"/api/v2.1/shareable-groups/";return this.req.get(e)}},{key:"getSharedRepos",value:function(){var e=this.server+"/api2/shared-repos/";return this.req.get(e)}},{key:"updateRepoSharePerm",value:function(e,t){var n=this.server+"/api/v2.1/shared-repos/"+e+"/";return this.req.put(n,t)}},{key:"unshareRepo",value:function(e,t){var n=this.server+"/api/v2.1/shared-repos/"+e+"/";return this.req.delete(n,{params:t})}},{key:"unshareRepoToGroup",value:function(e,t){var n=this.server+"/api/v2.1/groups/"+t+"/libraries/"+e+"/";return this.req.delete(n)}},{key:"shareFolder",value:function(e,t,n,r,o){t=encodeURIComponent(t);var i=new(u());if(i.append("share_type",n),i.append("permission",r),"user"==n)for(var a=0;a<o.length;a++)i.append("username",o[a]);else for(var s=0;s<o.length;s++)i.append("group_id",o[s]);var c=this.server+"/api2/repos/"+e+"/dir/shared_items/?p="+t;return this.req.put(c,i)}},{key:"listSharedFolders",value:function(){var e=this.server+"/api/v2.1/shared-folders/";return this.req.get(e)}},{key:"updateFolderSharePerm",value:function(e,t,n){var r=this.server+"/api2/repos/"+e+"/dir/shared_items/";return this.req.post(r,t,{params:n})}},{key:"unshareFolder",value:function(e,t){var n=this.server+"/api2/repos/"+e+"/dir/shared_items/";return this.req.delete(n,{params:t})}},{key:"listCustomPermissions",value:function(e){var t=this.server+"/api/v2.1/repos/"+e+"/custom-share-permissions/";return this.req.get(t)}},{key:"createCustomPermission",value:function(e,t,n,r){var o=this.server+"/api/v2.1/repos/"+e+"/custom-share-permissions/",i={permission_name:t,description:n,permission:JSON.stringify(r)};return this.req.post(o,i)}},{key:"getCustomPermission",value:function(e,t){var n=this.server+"/api/v2.1/repos/"+e+"/custom-share-permissions/"+t+"/";return this.req.get(n)}},{key:"deleteCustomPermission",value:function(e,t){var n=this.server+"/api/v2.1/repos/"+e+"/custom-share-permissions/"+t+"/";return this.req.delete(n)}},{key:"updateCustomPermission",value:function(e,t){var n=this.server+"/api/v2.1/repos/"+e+"/custom-share-permissions/"+t.id+"/",r={permission_name:t.name,description:t.description,permission:JSON.stringify(t.permission)};return this.req.put(n,r)}},{key:"createMineRepo",value:function(e){var t=this.server+"/api2/repos/?from=web";return this.req.post(t,e)}},{key:"createGroupRepo",value:function(e,t){var n=this.server+"/api/v2.1/groups/"+e+"/libraries/",r=new(u());return r.append("repo_name",t.repo_name),t.password&&r.append("password",t.password),r.append("permission",t.permission),t.library_template&&r.append("library_template",t.library_template),this._sendPostRequest(n,r)}},{key:"listRepos",value:function(e){var t=this.server+"/api/v2.1/repos/";return e?this.req.get(t,{params:e,paramsSerializer:{serialize:function(e){var t=[];for(var n in e)if(Array.isArray(e[n]))for(var r=0,o=e[n].length;r<o;r++)t.push(n+"="+encodeURIComponent(e[n][r]));else t.push(n+"="+encodeURIComponent(e[n]));return t.join("&")}}}):this.req.get(t)}},{key:"getRepoInfo",value:function(e){var t=this.server+"/api/v2.1/repos/"+e+"/";return this.req.get(t)}},{key:"getRepoHistoryLimit",value:function(e){var t=this.server+"/api2/repos/"+e+"/history-limit/";return this.req.get(t)}},{key:"setRepoHistoryLimit",value:function(e,t){var n=this.server+"/api2/repos/"+e+"/history-limit/",r=new(u());return r.append("keep_days",t),this.req.put(n,r)}},{key:"resetAndSendEncryptedRepoPassword",value:function(e){var t=this.server+"/api/v2.1/repos/"+e+"/send-new-password/",n=new(u());return this._sendPostRequest(t,n)}},{key:"deleteRepo",value:function(e){var t=this.server+"/api/v2.1/repos/"+e+"/";return this.req.delete(t)}},{key:"renameRepo",value:function(e,t){var n=this.server+"/api2/repos/"+e+"/?op=rename",r=new(u());return r.append("repo_name",t),this._sendPostRequest(n,r)}},{key:"transferRepo",value:function(e,t){var n=this.server+"/api2/repos/"+e+"/owner/",r=new(u());return r.append("owner",t),this.req.put(n,r)}},{key:"setRepoDecryptPassword",value:function(e,t){var n=this.server+"/api/v2.1/repos/"+e+"/set-password/",r=new(u());return r.append("password",t),this._sendPostRequest(n,r)}},{key:"changeEncryptedRepoPassword",value:function(e,t,n){var r=this.server+"/api/v2.1/repos/"+e+"/set-password/",o={old_password:t,new_password:n};return this.req.put(r,o)}},{key:"createPublicRepo",value:function(e){var t=this.server+"/api2/repos/public/";return this.req.post(t,e)}},{key:"selectOwnedRepoToPublic",value:function(e,t){var n=this.server+"/api/v2.1/shared-repos/"+e+"/";return this.req.put(n,t)}},{key:"getSource",value:function(){return i.A.CancelToken.source()}},{key:"searchFilesInPublishedRepo",value:function(e,t,n,r,o){var i=this.server+"/api/v2.1/published-repo-search/",a={repo_id:e,q:t,page:n,per_page:r,search_filename_only:o||!1};return this.req.get(i,{params:a})}},{key:"searchFiles",value:function(e,t){var n=this.server+"/api2/search/";if(n=n+"?q="+e.q,e.search_repo&&(n=n+"&search_repo="+e.search_repo),e.search_ftypes&&(n=n+"&search_ftypes="+e.search_ftypes),e.page&&(n=n+"&page="+e.page),e.per_page&&(n=n+"&per_page="+e.per_page),e.search_path&&(n=n+"&search_path="+encodeURIComponent(e.search_path)),e.obj_type&&(n=n+"&obj_type="+e.obj_type),e.input_fexts&&(n=n+"&input_fexts="+e.input_fexts),e.with_permission&&(n=n+"&with_permission="+e.with_permission),e.time_from&&(n=n+"&time_from="+e.time_from),e.time_to&&(n=n+"&time_to="+e.time_to),e.size_from&&(n=n+"&size_from="+e.size_from),e.size_to&&(n=n+"&size_to="+e.size_to),e.shared_from&&(n=n+"&shared_from="+e.shared_from),e.not_shared_from&&(n=n+"&not_shared_from="+e.not_shared_from),e.search_filename_only&&(n=n+"&search_filename_only="+e.search_filename_only),e.ftype)for(var r=0;r<e.ftype.length;r++)n=n+"&ftype="+e.ftype[r];return this.req.get(n,{cancelToken:t})}},{key:"searchFileInRepo",value:function(e,t){var n=this.server+"/api/v2.1/search-file/",r={repo_id:e,q:t};return this.req.get(n,{params:r})}},{key:"listRepoAPITokens",value:function(e){var t=this.server+"/api/v2.1/repos/"+e+"/repo-api-tokens/";return this.req.get(t)}},{key:"addRepoAPIToken",value:function(e,t,n){var r=this.server+"/api/v2.1/repos/"+e+"/repo-api-tokens/",o=new(u());return o.append("app_name",t),o.append("permission",n),this._sendPostRequest(r,o)}},{key:"deleteRepoAPIToken",value:function(e,t){var n=this.server+"/api/v2.1/repos/"+e+"/repo-api-tokens/"+t+"/";return this.req.delete(n)}},{key:"updateRepoAPIToken",value:function(e,t,n){var r=this.server+"/api/v2.1/repos/"+e+"/repo-api-tokens/"+t+"/",o=new(u());return o.append("permission",n),this.req.put(r,o)}},{key:"listDeletedRepo",value:function(){var e=this.server+"/api/v2.1/deleted-repos/";return this.req.get(e)}},{key:"restoreDeletedRepo",value:function(e){var t=this.server+"/api/v2.1/deleted-repos/",n=new(u());return n.append("repo_id",e),this._sendPostRequest(t,n)}},{key:"listDir",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.recursive,o=void 0!==r&&r,i=n.type,a=void 0===i?"":i,u=n.with_thumbnail,s=void 0!==u&&u,c=n.with_parents,l=void 0!==c&&c,f=this.server+"/api/v2.1/repos/"+e+"/dir/",d={};return d.p=t,o&&(d.recursive=o?1:0),a&&(d.t=a),s&&(d.with_thumbnail=s),l&&(d.with_parents=l),this.req.get(f,{params:d})}},{key:"listWikiDir",value:function(e,t,n){var r=encodeURIComponent(t),o=this.server+"/api/v2.1/wikis/"+encodeURIComponent(e)+"/dir/?p="+r;return n&&(o=this.server+"/api/v2.1/wikis/"+encodeURIComponent(e)+"/dir/?p="+r+"&with_parents="+n),this.req.get(o)}},{key:"getDirInfo",value:function(e,t){var n=encodeURIComponent(t),r=this.server+"/api/v2.1/repos/"+e+"/dir/detail/?path="+n;return this.req.get(r)}},{key:"createDir",value:function(e,t){var n=encodeURIComponent(t),r=this.server+"/api2/repos/"+e+"/dir/?p="+n,o=new(u());return o.append("operation","mkdir"),this._sendPostRequest(r,o)}},{key:"renameDir",value:function(e,t,n){var r=encodeURIComponent(t),o=this.server+"/api2/repos/"+e+"/dir/?p="+r,i=new(u());return i.append("operation","rename"),i.append("newname",n),this._sendPostRequest(o,i)}},{key:"deleteDir",value:function(e,t){var n=encodeURIComponent(t),r=this.server+"/api/v2.1/repos/"+e+"/dir/?p="+n;return this.req.delete(r)}},{key:"copyDir",value:function(e,t,n,r,o){var i=[],a=this.server;a+=e===t?"/api/v2.1/repos/sync-batch-copy-item/":"/api/v2.1/repos/async-batch-copy-item/",Array.isArray(o)?i=o:i.push(o);var u={src_repo_id:e,src_parent_dir:r,dst_repo_id:t,dst_parent_dir:n,src_dirents:i};return this._sendPostRequest(a,u,{headers:{"Content-Type":"application/json"}})}},{key:"moveDir",value:function(e,t,n,r,o){var i=[],a=this.server;a+=e===t?"/api/v2.1/repos/sync-batch-move-item/":"/api/v2.1/repos/async-batch-move-item/",Array.isArray(o)?i=o:i.push(o);var u={src_repo_id:e,src_parent_dir:r,dst_repo_id:t,dst_parent_dir:n,src_dirents:i};return this._sendPostRequest(a,u,{headers:{"Content-Type":"application/json"}})}},{key:"queryAsyncOperationProgress",value:function(e){var t=this.server+"/api/v2.1/query-copy-move-progress/?task_id="+e;return this.req.get(t)}},{key:"cancelCopyMoveOperation",value:function(e){var t=this.server+"/api/v2.1/copy-move-task/",n={task_id:e};return this.req.delete(t,{data:n})}},{key:"deleteMutipleDirents",value:function(e,t,n){var r=this.server+"/api/v2.1/repos/batch-delete-item/",o={repo_id:e,parent_dir:t,dirents:n};return this.req.delete(r,{data:o},{headers:{"Content-Type":"application/json"}})}},{key:"zipDownload",value:function(e,t,n){var r=this.server+"/api/v2.1/repos/"+e+"/zip-task/",o=new(u());return o.append("parent_dir",t),Array.isArray(n)?n.forEach((function(e){o.append("dirents",e)})):o.append("dirents",n),this._sendPostRequest(r,o)}},{key:"queryZipProgress",value:function(e){var t=this.server+"/api/v2.1/query-zip-progress/?token="+e;return this.req.get(t)}},{key:"cancelZipTask",value:function(e){var t=this.server+"/api/v2.1/cancel-zip-task/",n=new(u());return n.append("token",e),this.req.post(t,n)}},{key:"getFileInfo",value:function(e,t){var n=encodeURIComponent(t),r=this.server+"/api2/repos/"+e+"/file/detail/?p="+n;return this.req.get(r)}},{key:"getFileHistory",value:function(e,t){var n=this.server+"/api2/repos/"+e+"/file/history/?p="+encodeURIComponent(t);return this.req.get(n)}},{key:"getFileDownloadLink",value:function(e,t){var n=encodeURIComponent(t),r=this.server+"/api2/repos/"+e+"/file/?p="+n+"&reuse=1";return this.req.get(r)}},{key:"getFileContent",value:function(e){return i.A.create().get(e)}},{key:"createFile",value:function(e,t,n){var r=encodeURIComponent(t),o=this.server+"/api/v2.1/repos/"+e+"/file/?p="+r,i=new(u());return i.append("operation","create"),i.append("is_draft",n),this._sendPostRequest(o,i)}},{key:"renameFile",value:function(e,t,n){var r=encodeURIComponent(t),o=this.server+"/api/v2.1/repos/"+e+"/file/?p="+r,i=new(u());return i.append("operation","rename"),i.append("newname",n),this._sendPostRequest(o,i)}},{key:"convertFile",value:function(e,t,n){var r=encodeURIComponent(t),o=this.server+"/api/v2.1/repos/"+e+"/file/?p="+r,i=new(u());return i.append("operation","convert"),i.append("dst_type",n),this._sendPostRequest(o,i)}},{key:"lockfile",value:function(e,t,n){var r=this.server+"/api/v2.1/repos/"+e+"/file/?p="+encodeURIComponent(t),o=new(u());return o.append("operation","lock"),void 0!=n&&o.append("expire",n),this.req.put(r,o)}},{key:"unlockfile",value:function(e,t){var n=this.server+"/api/v2.1/repos/"+e+"/file/?p="+encodeURIComponent(t),r=new(u());return r.append("operation","unlock"),this.req.put(n,r)}},{key:"revertFile",value:function(e,t,n){var r=this.server+"/api/v2.1/repos/"+e+"/file/?p="+encodeURIComponent(t),o=new(u());return o.append("operation","revert"),o.append("commit_id",n),this._sendPostRequest(r,o)}},{key:"revertFolder",value:function(e,t,n){var r=this.server+"/api/v2.1/repos/"+e+"/dir/?p="+encodeURIComponent(t),o=new(u());return o.append("operation","revert"),o.append("commit_id",n),this._sendPostRequest(r,o)}},{key:"revertRepo",value:function(e,t){var n=this.server+"/api/v2.1/repos/"+e+"/commits/"+t+"/revert/";return this.req.post(n)}},{key:"deleteFile",value:function(e,t){var n=encodeURIComponent(t),r=this.server+"/api/v2.1/repos/"+e+"/file/?p="+n;return this.req.delete(r)}},{key:"getFileServerUploadLink",value:function(e,t){var n=encodeURIComponent(t),r=this.server+"/api2/repos/"+e+"/upload-link/?p="+n+"&from=web";return this.req.get(r)}},{key:"sharedLinkGetFileUploadUrl",value:function(e,t){var n=this.server+"/api/v2.1/share-links/"+e+"/upload/?path="+encodeURIComponent(t);return this.req.get(n)}},{key:"getFileUploadedBytes",value:function(e,t,n){var r=this.server+"/api/v2.1/repos/"+e+"/file-uploaded-bytes/",o={parent_dir:t,file_name:n};return this.req.get(r,{params:o})}},{key:"sharedUploadLinkGetFileUploadUrl",value:function(e){var t=this.server+"/api/v2.1/upload-links/"+e+"/upload/";return this.req.get(t)}},{key:"shareLinksUploadDone",value:function(e,t,n){var r=this.server+"/api/v2.1/share-links/"+e+"/upload/done/",o=new(u());return o.append("file_path",t),void 0!=n&&o.append("is_dir",n),this._sendPostRequest(r,o)}},{key:"uploadImage",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return i.A.create()({method:"post",data:t,url:e,onUploadProgress:n})}},{key:"getUpdateLink",value:function(e,t){var n=this.server+"/api2/repos/"+e+"/update-link/?p="+encodeURIComponent(t);return this.req.get(n)}},{key:"updateFile",value:function(e,t,n,r){var o=new(u());o.append("target_file",t),o.append("filename",n);var a=new Blob([r],{type:"text/plain"});return o.append("file",a),i.A.create()({method:"post",url:e,data:o})}},{key:"listFileHistoryRecords",value:function(e,t,n,r){var o=this.server+"/api/v2.1/repos/"+e+"/file/new_history/",i={path:t,page:n,per_page:r};return this.req.get(o,{params:i})}},{key:"listOldFileHistoryRecords",value:function(e,t,n){var r=this.server+"/api/v2.1/repos/"+e+"/file/history/",o={path:t,commit_id:n};return this.req.get(r,{params:o})}},{key:"getFileRevision",value:function(e,t,n){var r=this.server+"/api2/repos/"+e+"/file/revision/?p="+encodeURIComponent(n)+"&commit_id="+t;return this.req.get(r)}},{key:"getFileExtendedProperties",value:function(e,t){var n=this.server+"/api/v2.1/repos/"+e+"/extended-properties/?path="+t;return this.req.get(n)}},{key:"newFileExtendedProperties",value:function(e,t,n){var r=this.server+"/api/v2.1/repos/"+e+"/extended-properties/",o=new(u());return o.append("path",t),o.append("props_data",JSON.stringify(n)),this._sendPostRequest(r,o)}},{key:"updateFileExtendedProperties",value:function(e,t,n){var r=this.server+"/api/v2.1/repos/"+e+"/extended-properties/",o=new(u());return o.append("path",t),o.append("props_data",JSON.stringify(n)),this.req.put(r,o)}},{key:"deleteFileExtendedProperties",value:function(e,t){var n=this.server+"/api/v2.1/repos/"+e+"/extended-properties/?path="+t;return this.req.delete(n)}},{key:"applyFolderExtendedProperties",value:function(e,t){var n=this.server+"/api/v2.1/repos/"+e+"/apply-folder-extended-properties/",r=new(u());return r.append("path",t),this.req.post(n,r)}},{key:"listComments",value:function(e,t){var n="".concat(this.server,"/api/v2.1/repos/").concat(e,"/file/").concat(t,"/comments/");return this.req.get(n)}},{key:"postComment",value:function(e,t,n){var r="".concat(this.server,"/api/v2.1/repos/").concat(e,"/file/").concat(t,"/comments/"),o=new(u());return o.append("comment",n),this._sendPostRequest(r,o)}},{key:"deleteComment",value:function(e,t,n){var r="".concat(this.server,"/api/v2.1/repos/").concat(e,"/file/").concat(t,"/comments/").concat(n,"/");return this.req.delete(r)}},{key:"updateComment",value:function(e,t,n,r,o,i){var a="".concat(this.server,"/api/v2.1/repos/").concat(e,"/file/").concat(t,"/comments/").concat(n,"/"),u={};return r&&(u.resolved=r),o&&(u.detail=o),i&&(u.comment=i),this.req.put(a,u)}},{key:"listStarredItems",value:function(){var e=this.server+"/api/v2.1/starred-items/";return this.req.get(e)}},{key:"starItem",value:function(e,t){var n=this.server+"/api/v2.1/starred-items/",r=new(u());return r.append("repo_id",e),r.append("path",t),this._sendPostRequest(n,r)}},{key:"unstarItem",value:function(e,t){var n=this.server+"/api/v2.1/starred-items/?repo_id="+e+"&path="+encodeURIComponent(t);return this.req.delete(n)}},{key:"monitorRepo",value:function(e){var t=this.server+"/api/v2.1/monitored-repos/",n=new(u());return n.append("repo_id",e),this._sendPostRequest(t,n)}},{key:"unMonitorRepo",value:function(e){var t=this.server+"/api/v2.1/monitored-repos/"+e+"/";return this.req.delete(t)}},{key:"listRepoTags",value:function(e){var t=this.server+"/api/v2.1/repos/"+e+"/repo-tags/";return this.req.get(t)}},{key:"createRepoTag",value:function(e,t,n){var r=this.server+"/api/v2.1/repos/"+e+"/repo-tags/",o=new(u());return o.append("name",t),o.append("color",n),this._sendPostRequest(r,o)}},{key:"listTaggedFiles",value:function(e,t){var n=this.server+"/api/v2.1/repos/"+e+"/tagged-files/"+t+"/";return this.req.get(n)}},{key:"listFileTags",value:function(e,t){var n=encodeURIComponent(t),r=this.server+"/api/v2.1/repos/"+e+"/file-tags/?file_path="+n;return this.req.get(r)}},{key:"addFileTag",value:function(e,t,n){var r=new(u());r.append("file_path",t),r.append("repo_tag_id",n);var o=this.server+"/api/v2.1/repos/"+e+"/file-tags/";return this._sendPostRequest(o,r)}},{key:"deleteFileTag",value:function(e,t){var n=this.server+"/api/v2.1/repos/"+e+"/file-tags/"+t+"/";return this.req.delete(n)}},{key:"saveSharedFile",value:function(e,t,n,r){var o=this.server+"/api/v2.1/share-links/"+n+"/save-file-to-repo/",i=new(u());return i.append("dst_repo_id",e),i.append("dst_parent_dir",t),r&&i.append("path",r),this._sendPostRequest(o,i)}},{key:"saveSharedDir",value:function(e,t,n,r,o){var i=this.server+"/api/v2.1/share-links/"+n+"/save-items-to-repo/",a=new(u());return a.append("src_parent_dir",r),o.forEach((function(e){a.append("src_dirents",e)})),a.append("dst_repo_id",e),a.append("dst_parent_dir",t),this._sendPostRequest(i,a)}},{key:"addAbuseReport",value:function(e,t,n,r,o){var i=this.server+"/api/v2.1/abuse-reports/",a=new(u());return a.append("share_link_token",e),a.append("abuse_type",t),a.append("description",n),a.append("reporter",r),a.append("file_path",o),this._sendPostRequest(i,a)}},{key:"getInternalLink",value:function(e,t,n){var r="dir"===n,o=encodeURIComponent(t),i=this.server+"/api/v2.1/smart-link/?repo_id="+e+"&path="+o+"&is_dir="+r;return this.req.get(i)}},{key:"getWikiFileContent",value:function(e,t){var n=encodeURIComponent(t),r=(new Date).getTime(),o=this.server+"/api/v2.1/wikis/"+encodeURIComponent(e)+"/content/?p="+n+"&_="+r;return this.req.get(o)}},{key:"getUserAvatar",value:function(e,t){var n=this.server+"/api2/avatars/user/"+encodeURIComponent(e)+"/resized/"+t+"/";return this.req.get(n)}},{key:"listAllNotifications",value:function(e,t){var n=this.server+"/api/v2.1/all-notifications/",r={page:e,per_page:t};return this.req.get(n,{params:r})}},{key:"updateAllNotifications",value:function(){var e=this.server+"/api/v2.1/all-notifications/";return this.req.put(e)}},{key:"listNotifications",value:function(e,t){var n=this.server+"/api/v2.1/notifications/",r={page:e,per_page:t};return this.req.get(n,{params:r})}},{key:"listSdocNotifications",value:function(e,t){var n=this.server+"/api/v2.1/sdoc-notifications/",r={page:e,per_page:t};return this.req.get(n,{params:r})}},{key:"updateNotifications",value:function(){var e=this.server+"/api/v2.1/notifications/";return this.req.put(e)}},{key:"updateSdocNotifications",value:function(){var e=this.server+"/api/v2.1/sdoc-notifications/";return this.req.put(e)}},{key:"deleteNotifications",value:function(){var e=this.server+"/api/v2.1/notifications/";return this.req.delete(e)}},{key:"deleteSdocNotifications",value:function(){var e=this.server+"/api/v2.1/sdoc-notifications/";return this.req.delete(e)}},{key:"getUnseenNotificationCount",value:function(){var e=this.server+"/api/v2.1/notifications/";return this.req.get(e)}},{key:"markNoticeAsRead",value:function(e){var t=this.server+"/api/v2.1/notification/",n=new(u());return n.append("notice_id",e),this.req.put(t,n)}},{key:"markSdocNoticeAsRead",value:function(e){var t=this.server+"/api/v2.1/sdoc-notification/",n=new(u());return n.append("notice_id",e),this.req.put(t,n)}},{key:"listLinkedDevices",value:function(){var e=this.server+"/api2/devices/";return this.req.get(e)}},{key:"unlinkDevice",value:function(e,t,n){var r=this.server+"/api2/devices/",o={platform:e,device_id:t,wipe_device:n?"true":"false"};return this.req.delete(r,{data:o})}},{key:"listActivities",value:function(e,t){var n=this.server+"/api/v2.1/activities/?page="+e;return t&&(n+="&op_user="+encodeURIComponent(t)),this.req.get(n)}},{key:"createThumbnail",value:function(e,t,n){var r=this.server+"/thumbnail/"+e+"/create/?path="+encodeURIComponent(t)+"&size="+n;return this.req.get(r,{headers:{"X-Requested-With":"XMLHttpRequest"}})}},{key:"searchUsers",value:function(e){var t=this.server+"/api2/search-user/?q="+encodeURIComponent(e);return this.req.get(t)}},{key:"listWikis",value:function(e){var t=this.server+"/api/v2.1/wikis/";return e?this.req.get(t,{params:e,paramsSerializer:{serialize:function(e){var t=[];for(var n in e)if(Array.isArray(e[n]))for(var r=0,o=e[n].length;r<o;r++)t.push(n+"="+encodeURIComponent(e[n][r]));else t.push(n+"="+encodeURIComponent(e[n]));return t.join("&")}}}):this.req.get(t)}},{key:"addWiki",value:function(e){var t=this.server+"/api/v2.1/wikis/",n=new(u());return n.append("repo_id",e),this._sendPostRequest(t,n)}},{key:"renameWiki",value:function(e,t){var n=this.server+"/api/v2.1/wikis/"+e+"/",r=new(u());return r.append("wiki_name",t),this._sendPostRequest(n,r)}},{key:"updateWikiPermission",value:function(e,t){var n=this.server+"/api/v2.1/wikis/"+e+"/",r={permission:t};return this.req.put(n,r)}},{key:"deleteWiki",value:function(e){var t=this.server+"/api/v2.1/wikis/"+e+"/";return this.req.delete(t)}},{key:"fileMetaData",value:function(e,t){var n=this.server+"/api2/repos/"+e+"/file/metadata/?p="+encodeURIComponent(t);return this.req.get(n)}},{key:"dirMetaData",value:function(e,t){var n=this.server+"/api2/repos/"+e+"/dir/metadata/?p="+encodeURIComponent(t);return this.req.get(n)}},{key:"markdownLint",value:function(e){var t=this.server+"/api/v2.1/markdown-lint/",n=new(u());return n.append("slate",e),this._sendPostRequest(t,n)}},{key:"queryOfficeFileConvertStatus",value:function(e,t,n,r,o){var i=this.server+"/office-convert/status/",a={repo_id:e,commit_id:t,path:n,doctype:r};return o&&(a.token=o),this.req.get(i,{headers:{"X-Requested-With":"XMLHttpRequest"},params:a})}},{key:"listSharedDir",value:function(e,t,n){var r=this.server+"/api/v2.1/share-links/"+e+"/dirents/",o={thumbnail_size:n,path:t};return this.req.get(r,{params:o})}},{key:"getShareLinkZipTask",value:function(e,t){var n=this.server+"/api/v2.1/share-link-zip-task/",r={share_link_token:e,path:t};return this.req.get(n,{params:r})}},{key:"getShareLinkDirentsZipTask",value:function(e,t,n){var r=this.server+"/api/v2.1/share-link-zip-task/",o={token:e,parent_dir:t,dirents:n};return this.req.post(r,o)}},{key:"getShareLinkThumbnail",value:function(e,t,n){var r=this.server+"/thumbnail/"+e+"/create/",o={path:t,size:n};return this.req.get(r,{params:o})}},{key:"getAllRepoSnapshotLabels",value:function(){var e=this.server+"/api/v2.1/revision-tags/tag-names/";return this.req.get(e)}},{key:"addNewRepoLabels",value:function(e,t){var n=this.server+"/api/v2.1/revision-tags/tagged-items/",r={repo_id:e,tag_names:t};return this.req.post(n,r)}},{key:"updateRepoCommitLabels",value:function(e,t,n){var r=this.server+"/api/v2.1/revision-tags/tagged-items/",o={repo_id:e,commit_id:t,tag_names:n};return this.req.put(r,o)}},{key:"invitePeople",value:function(e){var t=this.server+"/api/v2.1/invitations/batch/",n=new(u());n.append("type","guest");for(var r=0;r<e.length;r++)n.append("accepter",e[r]);return this._sendPostRequest(t,n)}},{key:"listInvitations",value:function(){var e=this.server+"/api/v2.1/invitations/";return this.req.get(e)}},{key:"deleteInvitation",value:function(e){var t=this.server+"/api/v2.1/invitations/"+e+"/";return this.req.delete(t)}},{key:"revokeInvitation",value:function(e){var t=this.server+"/api/v2.1/invitations/"+e+"/revoke/";return this.req.post(t)}},{key:"addRepoShareInvitations",value:function(e,t,n,r){var o=this.server+"/api/v2.1/repos/"+e+"/shared/invitations/batch/",i={type:"guest",accepters:n,path:t,permission:r};return this.req.post(o,i)}},{key:"listRepoShareInvitations",value:function(e,t){var n=this.server+"/api/v2.1/repos/"+e+"/shared/invitations/?path="+t;return this.req.get(n)}},{key:"updateRepoShareInvitation",value:function(e,t,n,r){var o=this.server+"/api/v2.1/repos/"+e+"/shared/invitation/",i={token:n,path:t,permission:r};return this.req.put(o,i)}},{key:"deleteRepoShareInvitation",value:function(e,t,n){var r=this.server+"/api/v2.1/repos/"+e+"/shared/invitation/",o={token:n,path:t};return this.req.delete(r,{data:o})}},{key:"updateUserAvatar",value:function(e){var t=this.server+"/api/v2.1/user-avatar/",n=new(u());return n.append("avatar",e),this._sendPostRequest(t,n)}},{key:"getUserInfo",value:function(){var e=this.server+"/api/v2.1/user/";return this.req.get(e)}},{key:"updateUserInfo",value:function(e){var t=e.name,n=e.telephone,r=e.contact_email,o=e.list_in_address_book,i=this.server+"/api/v2.1/user/",a={};return void 0!=t&&(a.name=t),void 0!=n&&(a.telephone=n),void 0!=r&&(a.contact_email=r),void 0!=o&&(a.list_in_address_book=o),this.req.put(i,a)}},{key:"updateEmailNotificationInterval",value:function(e,t){var n=this.server+"/api2/account/info/",r={file_updates_email_interval:e,collaborate_email_interval:t};return this.req.put(n,r)}},{key:"updateWebdavSecret",value:function(e){var t=this.server+"/api/v2.1/webdav-secret/",n={secret:e};return this.req.put(t,n)}},{key:"listUserFolderPerm",value:function(e,t){var n=this.server+"/api2/repos/"+e+"/user-folder-perm/";return t&&(n=n+"?folder_path="+encodeURIComponent(t)),this.req.get(n)}},{key:"addUserFolderPerm",value:function(e,t,n,r){var o=this.server+"/api2/repos/"+e+"/user-folder-perm/",i=new(u());return i.append("permission",t),i.append("folder_path",n),Array.isArray(r)?r.forEach((function(e){i.append("user_email",e)})):i.append("user_email",r),this._sendPostRequest(o,i)}},{key:"updateUserFolderPerm",value:function(e,t,n,r){var o=this.server+"/api2/repos/"+e+"/user-folder-perm/",i=new(u());return i.append("permission",t),i.append("folder_path",n),i.append("user_email",r),this.req.put(o,i)}},{key:"deleteUserFolderPerm",value:function(e,t,n,r){var o=this.server+"/api2/repos/"+e+"/user-folder-perm/",i={permission:t,folder_path:n,user_email:r};return this.req.delete(o,{data:i})}},{key:"listGroupFolderPerm",value:function(e,t){var n=this.server+"/api2/repos/"+e+"/group-folder-perm/";return t&&(n=n+"?folder_path="+encodeURIComponent(t)),this.req.get(n)}},{key:"addGroupFolderPerm",value:function(e,t,n,r){var o=this.server+"/api2/repos/"+e+"/group-folder-perm/",i=new(u());return i.append("permission",t),i.append("folder_path",n),r.forEach((function(e){i.append("group_id",e)})),this._sendPostRequest(o,i)}},{key:"updateGroupFolderPerm",value:function(e,t,n,r){var o=this.server+"/api2/repos/"+e+"/group-folder-perm/",i=new(u());return i.append("permission",t),i.append("folder_path",n),i.append("group_id",r),this.req.put(o,i)}},{key:"deleteGroupFolderPerm",value:function(e,t,n,r){var o=this.server+"/api2/repos/"+e+"/group-folder-perm/",i={permission:t,folder_path:n,group_id:r};return this.req.delete(o,{data:i})}},{key:"listDepartmentRepoUserFolderPerm",value:function(e,t){var n=this.server+"/api/v2.1/group-owned-libraries/"+e+"/user-folder-permission/";return t&&(n=n+"?folder_path="+encodeURIComponent(t)),this.req.get(n)}},{key:"addDepartmentRepoUserFolderPerm",value:function(e,t,n,r){var o=this.server+"/api/v2.1/group-owned-libraries/"+e+"/user-folder-permission/",i=new(u());return i.append("permission",t),i.append("folder_path",n),Array.isArray(r)?r.forEach((function(e){i.append("user_email",e)})):i.append("user_email",r),this._sendPostRequest(o,i)}},{key:"updateDepartmentRepoUserFolderPerm",value:function(e,t,n,r){var o=this.server+"/api/v2.1/group-owned-libraries/"+e+"/user-folder-permission/",i=new(u());return i.append("permission",t),i.append("folder_path",n),i.append("user_email",r),this.req.put(o,i)}},{key:"deleteDepartmentRepoUserFolderPerm",value:function(e,t,n,r){var o=this.server+"/api/v2.1/group-owned-libraries/"+e+"/user-folder-permission/",i={permission:t,folder_path:n,user_email:r};return this.req.delete(o,{data:i})}},{key:"listDepartmentRepoGroupFolderPerm",value:function(e,t){var n=this.server+"/api/v2.1/group-owned-libraries/"+e+"/group-folder-permission/";return t&&(n=n+"?folder_path="+encodeURIComponent(t)),this.req.get(n)}},{key:"addDepartmentRepoGroupFolderPerm",value:function(e,t,n,r){var o=this.server+"/api/v2.1/group-owned-libraries/"+e+"/group-folder-permission/",i=new(u());return i.append("permission",t),i.append("folder_path",n),r.forEach((function(e){i.append("group_id",e)})),this._sendPostRequest(o,i)}},{key:"updateDepartmentRepoGroupFolderPerm",value:function(e,t,n,r){var o=this.server+"/api/v2.1/group-owned-libraries/"+e+"/group-folder-permission/",i=new(u());return i.append("permission",t),i.append("folder_path",n),i.append("group_id",r),this.req.put(o,i)}},{key:"deleteDepartmentRepoGroupFolderPerm",value:function(e,t,n,r){var o=this.server+"/api/v2.1/group-owned-libraries/"+e+"/group-folder-permission/",i={permission:t,folder_path:n,group_id:r};return this.req.delete(o,{data:i})}},{key:"getRepoHistory",value:function(e,t,n){var r=this.server+"/api/v2.1/repos/"+e+"/history/",o={page:t||1,per_page:n||100};return this.req.get(r,{params:o})}},{key:"getCommitDetails",value:function(e,t){var n=this.server+"/ajax/repo/"+e+"/history/changes/",r={commit_id:t};return this.req.get(n,{headers:{"X-Requested-With":"XMLHttpRequest"},params:r})}},{key:"getRepoFolderTrash",value:function(e,t,n){var r=this.server+"/api/v2.1/repos/"+e+"/trash/",o={path:t};return n&&(o.scan_stat=n),this.req.post(r,o)}},{key:"restoreDirents",value:function(e,t,n){var r=this.server+"/api/v2.1/repos/"+e+"/trash/revert-dirents/",o=new(u());return n.forEach((function(e){o.append("path",e)})),o.append("commit_id",t),this._sendPostRequest(r,o)}},{key:"deleteRepoTrash",value:function(e,t){var n=this.server+"/api/v2.1/repos/"+e+"/trash/",r={keep_days:t};return this.req.delete(n,{data:r})}},{key:"restoreFolder",value:function(e,t,n){var r=this.server+"/api2/repos/"+e+"/dir/revert/",o={commit_id:t,p:n};return this.req.put(r,o)}},{key:"restoreFile",value:function(e,t,n){var r=this.server+"/api2/repos/"+e+"/file/revert/",o={commit_id:t,p:n};return this.req.put(r,o)}},{key:"listCommitDir",value:function(e,t,n){var r=this.server+"/api/v2.1/repos/"+e+"/commits/"+t+"/dir/",o={path:n};return this.req.get(r,{params:o})}},{key:"listRepoRelatedUsers",value:function(e){var t=this.server+"/api/v2.1/repos/"+e+"/related-users/";return this.req.get(t)}},{key:"listFileParticipants",value:function(e,t){var n=encodeURIComponent(t),r=this.server+"/api/v2.1/repos/"+e+"/file/participants/?path="+n;return this.req.get(r)}},{key:"addFileParticipants",value:function(e,t,n){var r=this.server+"/api/v2.1/repos/"+e+"/file/participants/",o={path:t,emails:n};return this.req.post(r,o)}},{key:"deleteFileParticipant",value:function(e,t,n){var r=this.server+"/api/v2.1/repos/"+e+"/file/participant/",o={path:t,email:n};return this.req.delete(r,{data:o})}},{key:"listOCMSharesPrepare",value:function(e){var t=this.server+"/api/v2.1/ocm/shares-prepare/";return e&&(t+="?repo_id="+e),this.req.get(t)}},{key:"addOCMSharePrepare",value:function(e,t,n,r,o){var i=this.server+"/api/v2.1/ocm/shares-prepare/",a={to_user:e,to_server_url:t,repo_id:n,path:r,permission:o};return this.req.post(i,a)}},{key:"deleteOCMSharePrepare",value:function(e){var t=this.server+"/api/v2.1/ocm/shares-prepare/"+e+"/";return this.req.delete(t)}},{key:"listOCMSharesReceived",value:function(){var e=this.server+"/api/v2.1/ocm/shares-received/";return this.req.get(e)}},{key:"deleteOCMShareReceived",value:function(e){var t=this.server+"/api/v2.1/ocm/shares-received/"+e+"/";return this.req.delete(t)}},{key:"listOCMRepoDir",value:function(e,t,n){var r=this.server+"/api/v2.1/ocm/providers/"+e+"/repos/"+t+"/dir/?path="+encodeURIComponent(n);return this.req.get(r)}},{key:"getOCMRepoDownloadURL",value:function(e,t,n){var r=this.server+"/api/v2.1/ocm/providers/"+e+"/repos/"+t+"/download-link/?path="+encodeURIComponent(n);return this.req.get(r)}},{key:"getOCMRepoUploadURL",value:function(e,t,n){var r=this.server+"/api/v2.1/ocm/providers/"+e+"/repos/"+t+"/upload-link/?path="+encodeURIComponent(n);return this.req.get(r)}},{key:"getRepoOldFilesAutoDelDays",value:function(e){var t=this.server+"/api/v2.1/repos/"+e+"/auto-delete/";return this.req.get(t)}},{key:"setRepoOldFilesAutoDelDays",value:function(e,t){var n=this.server+"/api/v2.1/repos/"+e+"/auto-delete/",r=new(u());return r.append("auto_delete_days",t),this.req.put(n,r)}},{key:"sdocCopyHistoryFile",value:function(e,t,n,r){var o=this.server+"/api/v2.1/seadoc/copy-history-file/"+e+"/",i=new(u());return i.append("obj_id",n),i.append("p",t),i.append("ctime",r),this._sendPostRequest(o,i)}},{key:"listSdocHistory",value:function(e,t,n){var r=this.server+"/api/v2.1/seadoc/history/"+e+"/",o={page:t,per_page:n};return this.req.get(r,{params:o})}},{key:"listSdocDailyHistoryDetail",value:function(e,t){var n=this.server+"/api/v2.1/seadoc/daily-history-detail/"+e+"/",r={op_date:t};return this.req.get(n,{params:r})}},{key:"renameSdocHistory",value:function(e,t,n){var r=this.server+"/api/v2.1/seadoc/history/"+e+"/",o={obj_id:t,new_name:n};return this.req.post(r,o)}},{key:"sdocStartRevise",value:function(e,t){var n=this.server+"/api/v2.1/seadoc/revisions/",r=new(u());return r.append("p",t),r.append("repo_id",e),this._sendPostRequest(n,r)}},{key:"sdocPublishRevision",value:function(e){var t=this.server+"/api/v2.1/seadoc/publish-revision/"+e+"/";return this.req.post(t)}},{key:"onlyofficeConvert",value:function(e,t){var n=this.server+"/onlyoffice-api/convert/",r=new(u());return r.append("repo_id",e),r.append("file_path",t),this._sendPostRequest(n,r)}},{key:"importSdoc",value:function(e,t,n){var r=this.server+"/api/v2.1/seadoc/import/"+t+"/",o=new(u());return o.append("file",e),o.append("parent_dir",n),this._sendPostRequest(r,o)}},{key:"sysAdminListFileTransferLogs",value:function(e,t){var n=this.server+"/api/v2.1/admin/logs/repo-transfer-logs/",r={page:e,per_page:t};return this.req.get(n,{params:r})}},{key:"getExdrawToken",value:function(e,t){var n=this.server+"/api/v2.1/exdraw/access-token/".concat(e,"/?p=").concat(t);return this.req.get(n)}}])}(),f=new l,d=s.Ay.load("sfcsrftoken");f.initForSeahubUsage({siteRoot:c.YcY,xcsrfHeaders:d})},94634:function(e,t,n){"use strict";var r=n(40326),o={NEW_FOLDER:{key:"New Folder",value:(0,r.APU)("New Folder")},NEW_FILE:{key:"New File",value:(0,r.APU)("New File")},NEW_MARKDOWN_FILE:{key:"New Markdown File",value:(0,r.APU)("New Markdown File")},NEW_EXCEL_FILE:{key:"New Excel File",value:(0,r.APU)("New Excel File")},NEW_POWERPOINT_FILE:{key:"New PowerPoint File",value:(0,r.APU)("New PowerPoint File")},NEW_WORD_FILE:{key:"New Word File",value:(0,r.APU)("New Word File")},NEW_TLDRAW_FILE:{key:"New Whiteboard File",value:(0,r.APU)("New Whiteboard File")},NEW_EXCALIDRAW_FILE:{key:"New Excalidraw File",value:(0,r.APU)("New Excalidraw File")},NEW_SEADOC_FILE:{key:"New SeaDoc File",value:(0,r.APU)("New SeaDoc File")},SHARE:{key:"Share",value:(0,r.APU)("Share")},DOWNLOAD:{key:"Download",value:(0,r.APU)("Download")},DELETE:{key:"Delete",value:(0,r.APU)("Delete")},RENAME:{key:"Rename",value:(0,r.APU)("Rename")},MOVE:{key:"Move",value:(0,r.APU)("Move")},COPY:{key:"Copy",value:(0,r.APU)("Copy")},PERMISSION:{key:"Permission",value:(0,r.APU)("Permission")},DETAILS:{key:"Details",value:(0,r.APU)("Details")},OPEN_VIA_CLIENT:{key:"Open via Client",value:(0,r.APU)("Open via Client")},LOCK:{key:"Lock",value:(0,r.APU)("Lock")},UNLOCK:{key:"Unlock",value:(0,r.APU)("Unlock")},FREEZE_DOCUMENT:{key:"Freeze Document",value:(0,r.APU)("Freeze Document")},UNFREEZE_DOCUMENT:{key:"Unfreeze Document",value:(0,r.APU)("Unfreeze Document")},FREEZE_PAGE:{key:"Freeze page",value:(0,r.APU)("Freeze page")},EXPORT_PAGE:{key:"Export",value:(0,r.APU)("Export")},CONVERT_AND_EXPORT:{key:"Convert & Export",value:(0,r.APU)("Convert & Export")},CONVERT_TO_MARKDOWN:{key:"Convert to Markdown",value:(0,r.APU)("Convert to Markdown")},CONVERT_TO_SDOC:{key:"Convert to sdoc",value:(0,r.APU)("Convert to sdoc")},CONVERT_TO_DOCX:{key:"Convert to docx",value:(0,r.APU)("Convert to docx")},EXPORT_DOCX:{key:"Export docx",value:(0,r.APU)("Export as docx")},HISTORY:{key:"History",value:(0,r.APU)("History")},ACCESS_LOG:{key:"Access Log",value:(0,r.APU)("Access Log")},PROPERTIES:{key:"Properties",value:(0,r.APU)("Properties")},TAGS:{key:"Tags",value:(0,r.APU)("Tags")},TRASH:{key:"Trash",value:(0,r.APU)("Trash")},ONLYOFFICE_CONVERT:{key:"Convert with ONLYOFFICE",value:(0,r.APU)("Convert with ONLYOFFICE")},DISPLAY_FILES:{key:"Display files",value:(0,r.APU)("Display files")},EXPORT_SDOC:{key:"Export sdoc",value:(0,r.APU)("Export as zip")},STAR:{key:"Star",value:(0,r.APU)("Star")},UNSTAR:{key:"Unstar",value:(0,r.APU)("Unstar")},TRANSFER:{key:"Transfer",value:(0,r.APU)("Transfer")},FOLDER_PERMISSION:{key:"Folder Permission",value:(0,r.APU)("Folder Permission")},SHARE_ADMIN:{key:"Share Admin",value:(0,r.APU)("Share Admin")},CHANGE_PASSWORD:{key:"Change Password",value:(0,r.APU)("Change Password")},RESET_PASSWORD:{key:"Reset Password",value:(0,r.APU)("Reset Password")},ADVANCED:{key:"advanced",value:(0,r.APU)("Advanced")},API_TOKEN:{key:"API Token",value:(0,r.APU)("API Token")},LABEL_CURRENT_STATE:{key:"Label Current State",value:(0,r.APU)("Label Current State")},UNSHARE:{key:"Unshare",value:(0,r.APU)("Unshare")},ADD_FOLDER:{key:"ADD_FOLDER",value:(0,r.APU)("Folder")},ADD_VIEW:{key:"ADD_VIEW",value:(0,r.APU)("Add view")},OPEN_FILE_IN_NEW_TAB:{key:"Open file in new tab",value:(0,r.APU)("Open file in new tab")},OPEN_FOLDER_IN_NEW_TAB:{key:"Open folder in new tab",value:(0,r.APU)("Open folder in new tab")},OPEN_PARENT_FOLDER:{key:"Open parent folder",value:(0,r.APU)("Open parent folder")},EXTRACT_FILE_DETAIL:{key:"Extract file detail",value:(0,r.APU)("Extract file detail")},EXTRACT_FILE_DETAILS:{key:"Extract file details",value:(0,r.APU)("Extract file details")},DELETE_FILE:{key:"Delete file",value:(0,r.APU)("Delete file")},DELETE_FOLDER:{key:"Delete folder",value:(0,r.APU)("Delete folder")},MOVE_FILE:{key:"Move file",value:(0,r.APU)("Move file")},MOVE_FOLDER:{key:"Move folder",value:(0,r.APU)("Move folder")},RENAME_FILE:{key:"Rename file",value:(0,r.APU)("Rename file")},RENAME_FOLDER:{key:"Rename folder",value:(0,r.APU)("Rename folder")},GENERATE_DESCRIPTION:{key:"Generate description",value:(0,r.APU)("Generate description")},GENERATE_TAGS:{key:"Generate tags",value:(0,r.APU)("Generate file tags")},OCR:{key:"OCR",value:(0,r.APU)("Extract text")},MERGE_TAGS:{key:"Merge tags",value:(0,r.APU)("Merge tags")},NEW_CHILD_TAG:{key:"New child tag",value:(0,r.APU)("New child tag")}};t.A=o},65604:function(e,t,n){"use strict";n.d(t,{Aq:function(){return h},sg:function(){return b},OT:function(){return g},Pw:function(){return w},Fr:function(){return v},yS:function(){return m},Oj:function(){return y}});var r=n(89379),o=n(40326),i=n(94634),a=(n(9950),n(4086)),u=n(44414);var s=function(){var e="".concat(o.$6$,"?next=").concat(encodeURIComponent(location.href)),t=(0,o.APU)("Permission denied. Please try {placeholder-left}login again.{placeholder-right}");return t=(t=t.replace("{placeholder-left}",'<a class="action-link p-0" href='+e+">")).replace("{placeholder-right}","</a>"),(0,u.jsx)("span",{className:"error",dangerouslySetInnerHTML:{__html:t}})},c=function(e){return/^[0-9a-zA-Z]+$/.test(e)},l=function(e){return/^[\u4E00-\u9FA5]+$/.test(e)},f=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=[],r=e.match(/\d+|\D+/g),o=0;o<r.length;o++){var i=r[o];isNaN(i)?n=n.concat(i.split("")):t?n.push(i):n=n.concat(i.split(""))}return n},d=n(80415),p=void 0,h={keyCodes:{enter:13,esc:27,space:32,tab:9,up:38,down:40},bytesToSize:function(e){if("undefined"==typeof e)return" ";if(e<0)return"--";var t=["B","KB","MB","GB","TB","PB"];if(0===e)return e+" "+t[0];var n=parseInt(Math.floor(Math.log(e)/Math.log(1e3)),10);return 0===n?e+" "+t[n]:(e/Math.pow(1e3,n)).toFixed(1)+" "+t[n]},isHiDPI:function(){return(window.devicePixelRatio?window.devicePixelRatio:1)>1},isDesktop:function(){return window.innerWidth>=768},isWeChat:function(){var e=window.navigator.userAgent.toLowerCase(),t="micromessenger"==e.match(/MicroMessenger/i);return"micromessenger"==e.match(/MicroMessenger/i)&&"wxwork"==e.match(/wxwork/i)||t},FILEEXT_ICON_MAP:{txt:"txt.png",md:"md.png",pdf:"pdf.png",doc:"word.png",docx:"word.png",odt:"word.png",fodt:"word.png",ppt:"ppt.png",pptx:"ppt.png",odp:"ppt.png",fodp:"ppt.png",xls:"excel.png",xlsx:"excel.png",ods:"excel.png",fods:"excel.png",mp4:"video.png",ogv:"video.png",webm:"video.png",mov:"video.png",flv:"video.png",wmv:"video.png",rmvb:"video.png",mp3:"music.png",oga:"music.png",ogg:"music.png",wav:"music.png",flac:"music.png",opus:"music.png",aac:"music.png",ac3:"music.png",wma:"music.png",jpg:"pic.png",jpeg:"pic.png",png:"pic.png",svg:"pic.png",gif:"pic.png",bmp:"pic.png",ico:"pic.png",heic:"pic.png",tif:"pic.png",tiff:"pic.png",webp:"pic.png",jfif:"pic.png",draw:"draw.png",exdraw:"draw.png",psd:"psd.png",zip:"zip.png",rar:"zip.png",tar:"zip.png",css:"css.png",sdoc:"sdoc.png",sdoc_notification:"sdoc_notification.ico",default:"file.png"},imageCheck:function(e){if(-1==e.lastIndexOf("."))return!1;var t=e.substr(e.lastIndexOf(".")+1).toLowerCase();return["gif","jpeg","jpg","png","ico","bmp","tif","tiff","jfif","heic","webp"].includes(t)},pdfCheck:function(e){return-1!=e.lastIndexOf(".")&&"pdf"===e.substr(e.lastIndexOf(".")+1).toLowerCase()},getShareLinkPermissionList:function(e,t,n,r){var o=[];return h.getUserPermission(t).isCustomPermission?(o.push("preview_download"),o.push("preview_only"),o):("rw"!=t&&"admin"!=t&&"r"!=t||o.push("preview_download"),o.push("preview_only"),"library"==e||"dir"==e?"rw"!=t&&"admin"!=t||o.push("download_upload"):this.isEditableOfficeFile(n)&&("rw"==t||"admin"==t)&&r&&o.push("edit_download"),o)},getShareLinkPermissionStr:function(e){var t=e.can_edit,n=e.can_download,r=e.can_upload;switch("".concat(t," ").concat(n," ").concat(r)){case"false true false":return"preview_download";case"false false false":return"preview_only";case"false true true":return"download_upload";case"true true false":return"edit_download";case"true false false":return"cloud_edit"}},isEditableOfficeFile:function(e){if(-1==e.lastIndexOf("."))return!1;var t=e.substr(e.lastIndexOf(".")+1).toLowerCase();return o.aKi?o.YO9.includes(t):!!o.$Ep&&o.PI$.includes(t)},videoCheck:function(e){if(-1==e.lastIndexOf("."))return!1;var t=e.substr(e.lastIndexOf(".")+1).toLowerCase();return["mp4","ogv","webm","mov"].includes(t)},checkDuplicatedNameInList:function(e,t){return e.some((function(e){return e.name===t}))},encodePath:function(e){if(!e)return"";for(var t=e.split("/"),n=[],r=0,o=t.length;r<o;r++)n.push(encodeURIComponent(t[r]));return n.join("/")},HTMLescape:function(e){return document.createElement("div").appendChild(document.createTextNode(e)).parentNode.innerHTML},generateDialogTitle:function(e,t){return e.replace("{placeholder}",t)},getFileName:function(e){var t=e.lastIndexOf("/");return e.slice(t+1)},getPaths:function(e){for(var t=e.split("/").slice(1),n=[];t.length;)n.push("/"+t.join("/")),t.pop();return n.reverse()},getFolderName:function(e){return"/"===e?e:(e="/"!==e[e.length-1]?e:e.slice(0,e.length-1)).slice(e.lastIndexOf("/")+1)},getDirName:function(e){var t=e.slice(0,e.lastIndexOf("/"));return""===t?"/":t},isChildPath:function(e,t){return this.getDirName(e)===t},isAncestorPath:function(e,t){return t.indexOf(e)>-1},renameAncestorPath:function(e,t,n){return e.replace(t,n)},joinPath:function(e,t){return"/"===e[e.length-1]?e+t:e+"/"+t},isSupportUploadFolder:function(){return-1!=navigator.userAgent.indexOf("Firefox")||navigator.userAgent.indexOf("Chrome")>-1||navigator.userAgent.indexOf("Safari")>-1},isIEBrowser:function(){var e=navigator.userAgent,t=e.indexOf("compatible")>-1&&e.indexOf("MSIE")>-1,n=e.indexOf("Trident")>-1&&e.indexOf("rv:11.0")>-1;return t||n},getDefaultLibIconUrl:function(){return o.SGU+"img/lib/256/lib.png"},getLibIconUrl:function(e){var t=e.permission||e.share_permission,n="lib.png";switch(e.encrypted&&(n="lib-encrypted.png"),t){case"r":n="lib-readonly.png";break;case"preview":n="lib-cloud-preview.png";break;case"cloud-edit":n="lib-cloud-preview-edit.png"}return"read-only"==e.status&&(n="lib-readonly.png"),o.SGU+"img/lib/256/"+n},getDirentIcon:function(e,t){if(!e)return"";var n=h.isHiDPI()?48:24;if(n=t?192:n,"file"==e.type)return h.getFileIconUrl(e.name);var r=!1;return!e.permission||"r"!==e.permission&&"preview"!==e.permission||(r=!0),h.getFolderIconUrl(r,n,e.has_been_shared_out)},getAdminTemplateDirentIcon:function(e){return e.is_file?this.getFileIconUrl(e.obj_name):this.getFolderIconUrl()},getFolderIconUrl:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;return t||(t=h.isHiDPI()?48:24),t=t>24?192:24,"".concat(o.SGU,"img/folder").concat(e?"-read-only":"").concat(n?"-shared-out":"","-").concat(t,".png")},getFileIconName:function(e){if(-1==e.lastIndexOf("."))return h.FILEEXT_ICON_MAP.default;var t=e.substr(e.lastIndexOf(".")+1).toLowerCase();return h.FILEEXT_ICON_MAP[t]?h.FILEEXT_ICON_MAP[t]:h.FILEEXT_ICON_MAP.default},getFileIconUrl:function(e){var t="";return-1==e.lastIndexOf(".")?o.SGU+"img/file/256/"+h.FILEEXT_ICON_MAP.default:(t=e.substr(e.lastIndexOf(".")+1).toLowerCase(),h.FILEEXT_ICON_MAP[t]?o.SGU+"img/file/256/"+h.FILEEXT_ICON_MAP[t]:o.SGU+"img/file/256/"+h.FILEEXT_ICON_MAP.default)},getLibIconTitle:function(e){var t,n=e.permission||e.share_permission;if(e.encrypted)t=(0,o.APU)("Encrypted library");else if(e.is_admin)t=(0,o.APU)("Admin access");else switch(n){case"rw":t=(0,o.APU)("Read-Write library");break;case"r":t=(0,o.APU)("Read-Only library");break;case"cloud-edit":t=(0,o.APU)("Online Read-Write library");break;case"preview":t=(0,o.APU)("Online Read-Only library")}return t},getFolderIconTitle:function(e){var t;switch(e.permission){case"rw":t=(0,o.APU)("Read-Write folder");break;case"r":t=(0,o.APU)("Read-Only folder");break;case"cloud-edit":t=(0,o.APU)("Online Read-Write folder");break;case"preview":t=(0,o.APU)("Online Read-Only folder")}return t},getFolderOperationList:function(e,t,n,r){var a=[],u=i.A.SHARE,s=i.A.DOWNLOAD,c=i.A.DELETE,l=i.A.RENAME,f=i.A.MOVE,d=i.A.COPY,p=i.A.PERMISSION,v=i.A.OPEN_VIA_CLIENT,g=i.A.STAR,y=i.A.UNSTAR,m=n.permission,b=h.getUserPermission(m),w=b.isCustomPermission,S=b.customPermission;return r&&("rw"!=m&&"r"!=m||a.push(s),w&&S.permission.download&&a.push(s),"rw"!=m&&"cloud-edit"!=m||a.push(c,"Divider"),w&&S.permission.delete&&a.push(c,"Divider")),h.isHasPermissionToShare(t,m,n)&&a.push(u),"rw"!=m&&"cloud-edit"!=m||a.push(l,f),w&&S.permission.modify&&a.push(l,f),"rw"!=m&&"cloud-edit"!=m||a.push(d),w&&S.permission.copy&&a.push(d),n.starred?a.push(y):a.push(g),"rw"==m&&(o.wRA&&(e&&t.has_been_shared_out||t.is_admin)&&a.push("Divider",p),a.push("Divider",v)),"r"!=m||t.encrypted||a.push(d),"Divider"===a[a.length-1]&&a.pop(),a},getFileOperationList:function(e,t,n,a){var u=[],s=i.A.SHARE,c=i.A.DOWNLOAD,l=i.A.DELETE,f=i.A.RENAME,d=i.A.MOVE,p=i.A.COPY,v=i.A.UNLOCK,g=i.A.LOCK,y=i.A.UNFREEZE_DOCUMENT,m=i.A.FREEZE_DOCUMENT,b=i.A.HISTORY,w=i.A.ACCESS_LOG,S=i.A.PROPERTIES,x=i.A.OPEN_VIA_CLIENT,P=i.A.ONLYOFFICE_CONVERT,O=i.A.CONVERT_AND_EXPORT,k=i.A.CONVERT_TO_MARKDOWN,_=i.A.CONVERT_TO_DOCX,j=i.A.EXPORT_DOCX,I=i.A.CONVERT_TO_SDOC,T=i.A.EXPORT_SDOC,E=i.A.STAR,C=i.A.UNSTAR,M=n.permission,A=h.getUserPermission(M),D=A.isCustomPermission,R=A.customPermission;if(a&&("rw"!=M&&"r"!=M||u.push(c),D&&R.permission.download&&u.push(c),"rw"!=M&&"cloud-edit"!=M||((!n.is_locked||n.is_locked&&n.locked_by_me)&&u.push(l),u.push("Divider")),D&&R.permission.delete&&((!n.is_locked||n.is_locked&&n.locked_by_me)&&u.push(l),u.push("Divider"))),h.isHasPermissionToShare(t,M,n)&&u.push(s),"rw"!=M&&"cloud-edit"!=M||(!n.is_locked||n.is_locked&&n.locked_by_me)&&u.push(f,d),D&&R.permission.modify&&(!n.is_locked||n.is_locked&&n.locked_by_me)&&u.push(f,d),"rw"!=M&&"cloud-edit"!=M||u.push(p),D&&R.permission.copy&&u.push(p),n.starred?u.push(C):u.push(E),"rw"==M&&(o.amr&&(n.is_locked?(n.locked_by_me||"OnlineOffice"==n.lock_owner||e||t.is_admin)&&(n.name.endsWith(".sdoc")||u.push(v)):n.name.endsWith(".sdoc")||u.push(g)),u.push("Divider"),o.amr&&!n.is_locked&&n.name.endsWith(".sdoc")&&u.push(m),o.amr&&n.is_locked&&n.name.endsWith(".sdoc")&&u.push(y)),("rw"==M||"cloud-edit"==M)&&o.lU3&&!t.encrypted&&((n.name.endsWith(".md")||n.name.endsWith(".docx"))&&u.push(I),n.name.endsWith(".sdoc")))if(h.isDesktop()){var N=[k,_,j,T];u.push((0,r.default)((0,r.default)({},O),{},{subOpList:N}))}else u.push(k),u.push(_),u.push(j),u.push(T);"rw"==M&&(u.push("Divider"),u.push(S,b),o.amr&&o.RFo&&u.push(w),u.push("Divider",x)),"r"==M&&(t.encrypted||u.push(p),u.push(b)),"rw"==M&&t.enable_onlyoffice&&o.PAH.includes(h.getFileExtension(n.name,!1))&&u.push(P),"Divider"===u[u.length-1]&&u.pop();for(var L=0;L<u.length;L++)"Divider"===u[L]&&"Divider"===u[L+1]&&(u.splice(L,1),L--);return u},getFileExtension:function(e,t){var n=e.toLowerCase().split(".");return t?n.pop():"."+n.pop()},getDirentOperationList:function(e,t,n,r){return("dir"===n.type?h.getFolderOperationList:h.getFileOperationList)(e,t,n,r)},getRepoOperationList:function(e){var t=o.amr&&e.encrypted&&o.ez5&&o.bwK,n=[],a="Divider",u=i.A.SHARE,s=i.A.DELETE,c=i.A.RENAME,l=i.A.TRANSFER,f=i.A.FOLDER_PERMISSION,d=i.A.SHARE_ADMIN,p=i.A.CHANGE_PASSWORD,v=i.A.RESET_PASSWORD,g=i.A.ADVANCED;n.push(u,s,a,c,l),o.wRA&&n.push(f),n.push(d,a),e.encrypted&&n.push(p),t&&n.push(v),n.push(a);var y=h.getAdvancedOperations();return n.push((0,r.default)((0,r.default)({},g),{},{subOpList:y})),n.filter((function(e,t,n){return!(e===a&&n[t+1]===a)}))},getAdvancedOperations:function(){var e=[],t=i.A.API_TOKEN,n=i.A.LABEL_CURRENT_STATE;return e.push(t),o.gjS&&e.push(n),e},getSharedLibsOperationList:function(e){var t=i.A.SHARE,n=i.A.UNSHARE,r=[];return o.amr&&e.is_admin&&r.push(t),r.push(n),r},getPublicSharedRepoOperationList:function(e){var t=i.A.UNSHARE,n=[],r=e.owner_email===o.Xh_;return(o.GnR||r)&&n.push(t),n},getSharedRepoOperationList:function(e,t,n){var a=[],u=i.A.SHARE,s=i.A.UNSHARE,c=i.A.DELETE,l=i.A.RENAME,f=i.A.FOLDER_PERMISSION,d=i.A.SHARE_ADMIN,p=i.A.ADVANCED,v=i.A.CHANGE_PASSWORD,g=i.A.RESET_PASSWORD,y=i.A.API_TOKEN,m=t&&t.admins&&t.admins.indexOf(o.Xh_)>-1,b=e.owner_email===o.Xh_,w=e.is_admin,S="Divider";if(n)return(o.GnR||b)&&a.push(s),a;if(o.amr)if(-1!==e.owner_email.indexOf("@seafile_group")){if(m){if(e.owner_email==="".concat(t.id,"@seafile_group")){if(a.push(u,c,l),o.wRA&&a.push(f),a.push(d,S),e.encrypted&&a.push(v),e.encrypted&&o.ez5&&o.bwK&&a.push(g),h.isDesktop()){a.push(S);var x=[y];a.push((0,r.default)((0,r.default)({},p),{},{subOpList:x}))}return a.filter((function(e,t,n){return!(e===S&&n[t+1]===S)}))}a.push(s)}}else(b||w)&&a.push(u),(m||b||w)&&a.push(s);else b&&a.push(u),(m||b)&&a.push(s);return a},sharePerms:function(e){var t;switch(e){case"rw":t=(0,o.APU)("Read-Write");break;case"r":t=(0,o.APU)("Read-Only");break;case"admin":t=(0,o.APU)("Admin");break;case"cloud-edit":t=(0,o.APU)("Online Read-Write");break;case"preview":t=(0,o.APU)("Online Read-Only");break;case"invisible":t=(0,o.APU)("Invisible")}return t},sharePermsExplanation:function(e){var t;switch(e){case"rw":t=(0,o.APU)("User can read, write, upload, download and sync files.");break;case"r":t=(0,o.APU)("User can read, download and sync files.");break;case"admin":t=(0,o.APU)("Besides Write permission, user can also share the library.");break;case"cloud-edit":t=(0,o.APU)("User can view and edit file online via browser. Files can't be downloaded.");break;case"preview":t=(0,o.APU)("User can only view files online via browser. Files can't be downloaded.");break;case"invisible":t=(0,o.APU)("User can not see this folder.")}return t},getShareLinkPermissionObject:function(e){switch(e){case"preview_download":return{value:e,text:(0,o.APU)("Preview and download"),permissionDetails:{can_edit:!1,can_download:!0,can_upload:!1}};case"preview_only":return{value:e,text:(0,o.APU)("Preview only"),permissionDetails:{can_edit:!1,can_download:!1,can_upload:!1}};case"download_upload":return{value:e,text:(0,o.APU)("Download and upload"),permissionDetails:{can_edit:!1,can_download:!0,can_upload:!0}};case"edit_download":return{value:e,text:(0,o.APU)("Edit on cloud and download"),permissionDetails:{can_edit:!0,can_download:!0,can_upload:!1}};case"cloud_edit":return{value:e,text:(0,o.APU)("Edit on cloud only"),permissionDetails:{can_edit:!0,can_download:!1,can_upload:!1}}}return{text:""}},formatSize:function(e){var t=e.bytes,n=e.precision||0,r=1e3,o=1e6,i=1e9,a=1e12;return t>=0&&t<r?t+" B":t>=r&&t<o?(t/r).toFixed(n)+" KB":t>=o&&t<i?(t/o).toFixed(n)+" MB":t>=i&&t<a?(t/i).toFixed(n)+" GB":t>=a?(t/a).toFixed(n)+" TB":t+" B"},formatBitRate:function(e){var t;return"number"!==typeof e?"":(t=e/8)>=1e9?(t/1e9).toFixed(2)+" GB/s":t>=1e6?(t/1e6).toFixed(2)+" MB/s":t>=1e3?(t/1e3).toFixed(2)+" kB/s":t.toFixed(2)+" B/s"},isMarkdownFile:function(e){var t=e.lastIndexOf(".");if(-1===t)return!1;var n=e.substring(t).toLowerCase();return".md"===n||".markdown"===n},isSdocFile:function(e){var t=e.lastIndexOf(".");return-1!==t&&".sdoc"===e.substring(t).toLowerCase()},isDocxFile:function(e){var t=e.lastIndexOf(".");return-1!==t&&".docx"===e.substring(t).toLowerCase()},isPptxFile:function(e){var t=e.lastIndexOf(".");return-1!==t&&".pptx"===e.substring(t).toLowerCase()},isDescriptionSupportedFile:function(e){return h.isSdocFile(e)||h.isMarkdownFile(e)||h.pdfCheck(e)||h.isDocxFile(e)||h.isPptxFile(e)||h.imageCheck(e)},isFileMetadata:function(e){return e===d.AT.FILE_EXTENDED_PROPERTIES},isTags:function(e){return e===d.AT.TAGS_PROPERTIES},isInternalFileLink:function(e,t){return new RegExp(o.xW0+"/lib/"+t+"/file.*").test(e)},isInternalMarkdownLink:function(e,t){return new RegExp(o.xW0+"/lib/"+t+".*(\\.md)$").test(e)},isInternalDirLink:function(e,t){return new RegExp(o.xW0+"/library/"+t+".*").test(e)},getPathFromInternalMarkdownLink:function(e,t){var n=new RegExp(o.xW0+"/lib/"+t+"/file.*(\\.md)$").exec(e);return decodeURIComponent(n[1])},getPathFromInternalDirLink:function(e,t){var n=new RegExp(o.xW0+"/library/"+t+"(/.*)").exec(e),r=decodeURIComponent(n[1]);return r=(r=r.slice(1)).slice(r.indexOf("/"))},isWikiInternalMarkdownLink:function(e,t){return t=encodeURIComponent(t),new RegExp(o.xW0+"/published/"+t+".*(\\.md)$").test(e)},isWikiInternalDirLink:function(e,t){return t=encodeURIComponent(t),new RegExp(o.xW0+"/published/"+t+".*").test(e)},getPathFromWikiInternalMarkdownLink:function(e,t){t=encodeURIComponent(t);var n=new RegExp(o.xW0+"/published/"+t+".*(\\.md)$").exec(e)[1];try{n=decodeURIComponent(n)}catch(r){n=n.replace(/%/g,"%25"),n=decodeURIComponent(n)}return n},getPathFromWikiInternalDirLink:function(e,t){t=encodeURIComponent(t);var n=new RegExp(o.xW0+"/published/"+t+"(/.*)").exec(e)[1];try{n=decodeURIComponent(n)}catch(r){n=n.replace(/%/g,"%25"),n=decodeURIComponent(n)}return n},compareTwoWord:function(e,t){return function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(c(e)&&c(t))return e.localeCompare(t,"zh-Hans-CN",{numeric:!0});if(l(e)&&l(t))return e.localeCompare(t,"zh-Hans-CN",{numeric:!0});for(var r=f(e,n),o=f(t,n),i=0,a=Math.min(r.length,o.length),u=0;u<a;u++){var s=r[u],d=o[u];if(!l(s)&&l(d))return-1;if(l(s)&&!l(d))return 1;if(0!==(i=l(s)&&l(d)?s.localeCompare(d,"zh-Hans-CN"):s.localeCompare(d,"zh-Hans-CN",{numeric:!0})))return i}return r.length>o.length?1:r.length<o.length?-1:0}(e,t)},compareStrWithNumbersIn:function(e,t){var n,r,o,i=/\d+|\D+/g,a=/\d/,u=e.match(i),s=t.match(i),c=Math.min(u.length,s.length);if(u&&s&&(n=a.test(u[0]))==a.test(s[0]))for(var l=0;l<c;l++){if(r=u[l],o=s[l],n&&(r=parseInt(r,10),o=parseInt(o,10)),r!=o)return r<o?-1:1;n=!n}return(e>=t)-(e<=t)},sortRepos:function(e,t,n){var r,o=this;switch("".concat(t,"-").concat(n)){case"name-asc":r=function(e,t){return e.repo_name?t.repo_name?o.compareTwoWord(e.repo_name,t.repo_name):-1:1};break;case"name-desc":r=function(e,t){return e.repo_name?t.repo_name?-o.compareTwoWord(e.repo_name,t.repo_name):1:-1};break;case"time-asc":r=function(e,t){return e.last_modified<t.last_modified?-1:1};break;case"time-desc":r=function(e,t){return e.last_modified<t.last_modified?1:-1};break;case"size-asc":r=function(e,t){return e.size===t.size?o.compareTwoWord(e.repo_name,t.repo_name):e.size_original<t.size_original?-1:1};break;case"size-desc":r=function(e,t){return e.size===t.size?-o.compareTwoWord(e.repo_name,t.repo_name):e.size_original<t.size_original?1:-1}}return e.sort(r),e},sortDirents:function(e,t,n){var r,o=this;switch("".concat(t,"-").concat(n)){case"name-asc":r=function(e,t){return o.compareTwoWord(e.name,t.name)};break;case"name-desc":r=function(e,t){return-o.compareTwoWord(e.name,t.name)};break;case"time-asc":r=function(e,t){return e.mtime<t.mtime?-1:1};break;case"time-desc":r=function(e,t){return e.mtime<t.mtime?1:-1};break;case"size-asc":r=function(e,t){return"dir"==e.type&&"dir"==t.type?0:e.size_original<t.size_original?-1:1};break;case"size-desc":r=function(e,t){return"dir"==e.type&&"dir"==t.type?0:e.size_original<t.size_original?1:-1}}return e.sort((function(e,t){return"dir"==e.type&&"file"==t.type?-1:"file"==e.type&&"dir"==t.type?1:r(e,t)})),e},sortDirentsInSharedDir:function(e,t,n){var r,o=this;switch("".concat(t,"-").concat(n)){case"name-asc":r=function(e,t){return e.is_dir?o.compareTwoWord(e.folder_name,t.folder_name):o.compareTwoWord(e.file_name,t.file_name)};break;case"name-desc":r=function(e,t){return-(e.is_dir?o.compareTwoWord(e.folder_name,t.folder_name):o.compareTwoWord(e.file_name,t.file_name))};break;case"time-asc":r=function(e,t){return e.last_modified<t.last_modified?-1:1};break;case"time-desc":r=function(e,t){return e.last_modified<t.last_modified?1:-1};break;case"size-asc":r=function(e,t){return e.is_dir?0:e.size<t.size?-1:1};break;case"size-desc":r=function(e,t){return e.is_dir?0:e.size<t.size?1:-1}}return e.sort((function(e,t){return e.is_dir&&!t.is_dir?-1:!e.is_dir&&t.is_dir?1:r(e,t)})),e},getErrorMsg:function(e,t){var n="";return e.response?403==e.response.status?(t&&a.A.danger((0,u.jsx)(s,{}),{id:"permission_denied",duration:3600}),n=(0,o.APU)("Permission denied")):n=429==e.response.status?(0,o.APU)("Too many requests"):e.response.data&&e.response.data.error_msg?e.response.data.error_msg:(0,o.APU)("Error"):(n="object"===typeof e&&e.name?e.name:(0,o.APU)("Please check the network."),console.log(e)),n},changeMarkdownNodes:function(e,t){return e.forEach((function(e){t(e),e.children&&e.children.length>0&&h.changeMarkdownNodes(e.children,t)})),e},chooseLanguage:function(e){var t;switch(e){case"py":t="python";break;case"js":t="javascript";break;case"c":t="c";break;case"cpp":t="cpp";break;case"cs":t="csharp";break;case"java":t="java";break;case"mdf":t="text/x-sql";break;case"html":t="html";break;case"sh":t="shell";break;default:t=e}return t},DARK_COLOR_MAP:{red:"#D11507",orange:"#FF8C00",yellow:"#EDEF00",green:"#006400",cyan:"#00E0E1",blue:"#2510A3",indigo:"#350C56",purple:"#551054",pink:"#E3A5B0",azure:"#C4D0D0",lime:"#00E100",teal:"#006A6B",gray:"#545454","#FFA8A8":"#E49090","#FFA94D":"#E39136","#FFD43B":"#E0B815","#A0EC50":"#83CF32","#A9E34B":"#8DC72E","#63E6BE":"#43CAA4","#4FD2C9":"#2DB9B0","#72C3FC":"#57ABE3","#91A7FF":"#7A91E7","#E599F7":"#CC82DE","#B197FC":"#9B82E5","#F783AC":"#DF6D97","#CED4DA":"#A8ADB2"},getDarkColor:function(e){return this.DARK_COLOR_MAP[e]},getCopySuccessfulMessage:function(e){var t=e.length;return(1===t?(0,o.APU)("Successfully copied %(name)s."):2===t?(0,o.APU)("Successfully copied %(name)s and 1 other item."):(0,o.APU)("Successfully copied %(name)s and %(amount)s other items.").replace("%(amount)s",t-1)).replace("%(name)s",e[0])},getMoveSuccessMessage:function(e){var t=e.length;return(1===t?(0,o.APU)("Successfully moved %(name)s."):2===t?(0,o.APU)("Successfully moved %(name)s and 1 other item."):(0,o.APU)("Successfully moved %(name)s and %(amount)s other items.").replace("%(amount)s",t-1)).replace("%(name)s",e[0])},getCopyFailedMessage:function(e){var t=e.length;return(t>1?(0,o.APU)("Failed to copy %(name)s and %(amount)s other item(s).").replace("%(amount)s",t-1):(0,o.APU)("Failed to copy %(name)s.")).replace("%(name)s",e[0])},getMoveFailedMessage:function(e){var t=e.length;return(t>1?(0,o.APU)("Failed to move %(name)s and %(amount)s other item(s).").replace("%(amount)s",t-1):(0,o.APU)("Failed to move %(name)s.")).replace("%(name)s",e[0])},handleSearchedItemClick:function(e){if(!0===e.is_dir){var t=o.YcY+"library/"+e.repo_id+"/"+e.repo_name+e.path;window.open("about:blank").location.href=t}else{var n=o.YcY+"lib/"+e.repo_id+"/file"+h.encodePath(e.path);window.open("about:blank").location.href=n}},generateSecureRandomInRange:function(e,t){var n=Math.min(e,t),r=Math.max(e,t)-n+1,o=Math.ceil(Math.log2(r)/8),i=new Uint8Array(o);return window.crypto.getRandomValues(i),n+Array.from(i).reduce((function(e,t){return e<<8|t}),0)%r},generatePassword:function(e){var t="";t+=String.fromCharCode(this.generateSecureRandomInRange(65,90)),t+=String.fromCharCode(this.generateSecureRandomInRange(97,122)),t+=String.fromCharCode(this.generateSecureRandomInRange(48,57)),t+=String.fromCharCode(this.generateSecureRandomInRange(33,47));for(var n=0;n<e-4;n++)t+=String.fromCharCode(this.generateSecureRandomInRange(33,127));return t},pathNormalize:function(e){for(var t=e.split("/"),n=[],r=0;r<t.length;r++)"."!==t[r]&&""!==t[r]&&(".."===t[r]?n.pop():n.push(t[r]));return n.join("/")},getEventData:function(e,t){return e.target.dataset?e.target.dataset[t]:e.target.getAttribute("data-"+t)},isHasPermissionToShare:function(e,t,n){var r=h.getUserPermission(t),i=r.isCustomPermission,a=r.customPermission;if(i)return a.permission.download_external_link;var u=e.is_admin,s=e.is_virtual,c=e.encrypted,l=e.owner_email===o.Xh_;if(c)return!0;if(n&&("rw"==t||"r"==t))return!0;if(o.znq&&("rw"==t||"r"==t))return!0;if(o.fY9&&"rw"==t)return!0;return!(s||!l&&!u)&&!0},registerGlobalVariable:function(e,t,n){window[e]||(window[e]={}),window[e][t]=n},formatTime:function(e){var t=parseInt(e),n=0,r=0;t>60&&(n=parseInt(t/60),t=parseInt(t%60)),n>60&&(r=parseInt(n/60),n=parseInt(n%60));var o=("00"+parseInt(t)).slice(-2);return o=n>0?("00"+parseInt(n)).slice(-2)+":"+o:"00:"+o,o=r>0?("00"+parseInt(r)).slice(-2)+":"+o:"00:"+o},hasNextPage:function(e,t,n){return e*t<n},getStrengthLevel:function(e){var t=0;if(e.length<o.r8S)return 0;for(var n=0;n<e.length;n++)t|=this.getCharMode(e.charCodeAt(n));return this.calculateBitwise(t)},getCharMode:function(e){return e>=48&&e<=57?1:e>=65&&e<=90?2:e>=97&&e<=122?4:8},calculateBitwise:function(e){for(var t=0,n=0;n<4;n++)1&e&&t++,e>>>=1;return t},getSharedPermission:function(e){var t=e.permission;return e.is_admin&&(t="admin"),e.permission.startsWith("custom-")&&(t=e.permission.slice(7)),t},getUserPermission:function(e){var t=window.custom_permission;if(!t||["rw","r","admin","cloud-edit","preview"].indexOf(e)>-1)return{isCustomPermission:!1};if(t&&t.id===parseInt(e.split("-")[1]))return{isCustomPermission:!0,customPermission:t};return{isCustomPermission:!1}},onKeyDown:function(e){"Enter"!=e.key&&"Space"!=e.key||e.target.click()},updateTabTitle:function(e){document.getElementsByTagName("title")[0].innerText=e},generateHistoryURL:function(e,t,n){return e&&t&&n?e+"repo/file_revisions/"+t+"/?p="+this.encodePath(n):""},generateRevisionURL:function(e,t,n){return e&&t&&n?e+"repo/sdoc_revision/"+t+"/?p="+this.encodePath(n):""},generateRevisionsURL:function(e,t,n){return e&&t&&n?e+"repo/sdoc_revisions/"+t+"/?p="+this.encodePath(n):""},isFunction:function(e){return e&&"[object Function]"==={}.toString.call(e)},getUrlSearches:function(){var e=location.search,t={};return 0===e.length||e.split("?")[1].split("&").forEach((function(e){var n=e.split("=");t[n[0]]=decodeURI(n[1])})),t},updateSearchParameter:function(e,t){var n=location,r=n.origin,o=n.pathname,i=this.getUrlSearches();i[e]=t;var a="?";for(var u in i){var s=i[u];s&&(a="?"===a?"?".concat(u,"=").concat(s):"".concat(a,"&").concat(u,"=").concat(s))}history.replaceState(null,"",r+o+a)},isRelativePath:function(e){return!new RegExp("^(?:[a-z]+:)?//","i").test(e)},isMac:function(){var e=navigator.platform;return"Mac68K"==e||"MacPPC"==e||"Macintosh"==e||"MacIntel"==e}},v="undefined"!==typeof window&&(window.innerWidth<768||null!=navigator.userAgent.toLowerCase().match(/(ipod|ipad|iphone|android|coolpad|mmp|smartphone|midp|wap|xoom|symbian|j2me|blackberry|wince)/i)),g=function(e){var t=0,n=e.length,r=/[A-Z]/.test(e),o=/[a-z]/.test(e),i=/\d/.test(e),a=/[`~!@#$%^&*()_\-+=<>?:"{}|,./;'\\]/.test(e);return 0===n?"empty":(n>=16?t+=4:n>=12?t+=3:n>=8?t+=2:n>=6&&(t+=1),r&&(t+=1),o&&(t+=1),i&&(t+=1),a&&(t+=1),t>=8?"very_strong":t>=6?"strong":t>=4?"medium":"weak")},y=function(e){var t=window.app.pageOptions.userStrongPasswordRequired,n=g(e);return(t?["strong","very_strong"]:["medium","strong","very_strong"]).includes(n)},m=function(e){var t=!0,n="";return e&&e.trim()?e.includes("/")?{isValid:t=!1,errMessage:n=(0,o.APU)("Name cannot contain slash")}:e.includes("`")?{isValid:t=!1,errMessage:n=(0,o.APU)("Name cannot contain backtick")}:e.includes("\\")?{isValid:t=!1,errMessage:n=(0,o.APU)("Name cannot contain backslash")}:".."===e?{isValid:t=!1,errMessage:n=(0,o.APU)("Name cannot be double dots")}:{isValid:t,errMessage:n}:{isValid:t=!1,errMessage:n=(0,o.APU)("Name is required")}},b=function(e,t,n){var r=null;return function(){for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];r&&clearTimeout(r),n&&!r?e.call.apply(e,[p].concat(i)):r=setTimeout((function(){r=null,e.call.apply(e,[p].concat(i))}),t)}},w=function(e){return Object.prototype.toString.call(e).slice(8,-1)}},13472:function(e,t,n){"use strict";n.r(t),n.d(t,{arrow:function(){return P},autoPlacement:function(){return w},autoUpdate:function(){return i.ll},computePosition:function(){return i.rD},detectOverflow:function(){return i.__},flip:function(){return m},getOverflowAncestors:function(){return a.v9},hide:function(){return S},inline:function(){return x},limitShift:function(){return y},offset:function(){return v},platform:function(){return i.iD},shift:function(){return g},size:function(){return b},useFloating:function(){return h}});var r=n(89379),o=n(5544),i=n(32910),a=n(97339),u=n(9950),s=n(17119),c="undefined"!==typeof document?u.useLayoutEffect:u.useEffect;function l(e,t){if(e===t)return!0;if(typeof e!==typeof t)return!1;if("function"===typeof e&&e.toString()===t.toString())return!0;var n,r,o;if(e&&t&&"object"===typeof e){if(Array.isArray(e)){if((n=e.length)!==t.length)return!1;for(r=n;0!==r--;)if(!l(e[r],t[r]))return!1;return!0}if((n=(o=Object.keys(e)).length)!==Object.keys(t).length)return!1;for(r=n;0!==r--;)if(!{}.hasOwnProperty.call(t,o[r]))return!1;for(r=n;0!==r--;){var i=o[r];if(("_owner"!==i||!e.$$typeof)&&!l(e[i],t[i]))return!1}return!0}return e!==e&&t!==t}function f(e){return"undefined"===typeof window?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function d(e,t){var n=f(e);return Math.round(t*n)/n}function p(e){var t=u.useRef(e);return c((function(){t.current=e})),t}function h(e){void 0===e&&(e={});var t=e,n=t.placement,a=void 0===n?"bottom":n,h=t.strategy,v=void 0===h?"absolute":h,g=t.middleware,y=void 0===g?[]:g,m=t.platform,b=t.elements,w=void 0===b?{}:b,S=w.reference,x=w.floating,P=t.transform,O=void 0===P||P,k=t.whileElementsMounted,_=t.open,j=u.useState({x:0,y:0,strategy:v,placement:a,middlewareData:{},isPositioned:!1}),I=(0,o.default)(j,2),T=I[0],E=I[1],C=u.useState(y),M=(0,o.default)(C,2),A=M[0],D=M[1];l(A,y)||D(y);var R=u.useState(null),N=(0,o.default)(R,2),L=N[0],U=N[1],F=u.useState(null),B=(0,o.default)(F,2),V=B[0],z=B[1],H=u.useCallback((function(e){e!==W.current&&(W.current=e,U(e))}),[]),K=u.useCallback((function(e){e!==Y.current&&(Y.current=e,z(e))}),[]),G=S||L,q=x||V,W=u.useRef(null),Y=u.useRef(null),X=u.useRef(T),Z=null!=k,$=p(k),Q=p(m),J=p(_),ee=u.useCallback((function(){if(W.current&&Y.current){var e={placement:a,strategy:v,middleware:A};Q.current&&(e.platform=Q.current),(0,i.rD)(W.current,Y.current,e).then((function(e){var t=(0,r.default)((0,r.default)({},e),{},{isPositioned:!1!==J.current});te.current&&!l(X.current,t)&&(X.current=t,s.flushSync((function(){E(t)})))}))}}),[A,a,v,Q,J]);c((function(){!1===_&&X.current.isPositioned&&(X.current.isPositioned=!1,E((function(e){return(0,r.default)((0,r.default)({},e),{},{isPositioned:!1})})))}),[_]);var te=u.useRef(!1);c((function(){return te.current=!0,function(){te.current=!1}}),[]),c((function(){if(G&&(W.current=G),q&&(Y.current=q),G&&q){if($.current)return $.current(G,q,ee);ee()}}),[G,q,ee,$,Z]);var ne=u.useMemo((function(){return{reference:W,floating:Y,setReference:H,setFloating:K}}),[H,K]),re=u.useMemo((function(){return{reference:G,floating:q}}),[G,q]),oe=u.useMemo((function(){var e={position:v,left:0,top:0};if(!re.floating)return e;var t=d(re.floating,T.x),n=d(re.floating,T.y);return O?(0,r.default)((0,r.default)({},e),{},{transform:"translate("+t+"px, "+n+"px)"},f(re.floating)>=1.5&&{willChange:"transform"}):{position:v,left:t,top:n}}),[v,O,re.floating,T.x,T.y]);return u.useMemo((function(){return(0,r.default)((0,r.default)({},T),{},{update:ee,refs:ne,elements:re,floatingStyles:oe})}),[T,ee,ne,re,oe])}var v=function(e,t){return(0,r.default)((0,r.default)({},(0,i.cY)(e)),{},{options:[e,t]})},g=function(e,t){return(0,r.default)((0,r.default)({},(0,i.BN)(e)),{},{options:[e,t]})},y=function(e,t){return(0,r.default)((0,r.default)({},(0,i.ER)(e)),{},{options:[e,t]})},m=function(e,t){return(0,r.default)((0,r.default)({},(0,i.UU)(e)),{},{options:[e,t]})},b=function(e,t){return(0,r.default)((0,r.default)({},(0,i.Ej)(e)),{},{options:[e,t]})},w=function(e,t){return(0,r.default)((0,r.default)({},(0,i.RK)(e)),{},{options:[e,t]})},S=function(e,t){return(0,r.default)((0,r.default)({},(0,i.jD)(e)),{},{options:[e,t]})},x=function(e,t){return(0,r.default)((0,r.default)({},(0,i.mG)(e)),{},{options:[e,t]})},P=function(e,t){return(0,r.default)((0,r.default)({},function(e){return{name:"arrow",options:e,fn:function(t){var n,r="function"===typeof e?e(t):e,o=r.element,a=r.padding;return o&&(n=o,{}.hasOwnProperty.call(n,"current"))?null!=o.current?(0,i.UE)({element:o.current,padding:a}).fn(t):{}:o?(0,i.UE)({element:o,padding:a}).fn(t):{}}}}(e)),{},{options:[e,t]})}},5131:function(e,t,n){"use strict";var r,o=n(85715).default,i=n(50883).default,a=Object.defineProperty,u=Object.getOwnPropertyDescriptor,s=Object.getOwnPropertyNames,c=Object.prototype.hasOwnProperty,l={};function f(e,t){var n=o(t,2),r=n[0],i=n[1];return Math.min(i,Math.max(r,e))}!function(e,t){for(var n in t)a(e,n,{get:t[n],enumerable:!0})}(l,{clamp:function(){return f}}),e.exports=(r=l,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,l=i(s(t));try{var f=function(){var i=o.value;c.call(e,i)||i===n||a(e,i,{get:function(){return t[i]},enumerable:!(r=u(t,i))||r.enumerable})};for(l.s();!(o=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(a({},"__esModule",{value:!0}),r))},98913:function(e,t,n){"use strict";var r,o=n(50883).default,i=Object.defineProperty,a=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,c={};function l(e,t){var n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).checkForDefaultPrevented,r=void 0===n||n;return function(n){if(null===e||void 0===e||e(n),!1===r||!n.defaultPrevented)return null===t||void 0===t?void 0:t(n)}}!function(e,t){for(var n in t)i(e,n,{get:t[n],enumerable:!0})}(c,{composeEventHandlers:function(){return l}}),e.exports=(r=c,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var c,l=o(u(t));try{var f=function(){var o=c.value;s.call(e,o)||o===n||i(e,o,{get:function(){return t[o]},enumerable:!(r=a(t,o))||r.enumerable})};for(l.s();!(c=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(i({},"__esModule",{value:!0}),r))},25963:function(e,t,n){"use strict";var r,o=n(12897).default,i=n(91847).default,a=n(50883).default,u=["children","width","height"],s=Object.create,c=Object.defineProperty,l=Object.getOwnPropertyDescriptor,f=Object.getOwnPropertyNames,d=Object.getPrototypeOf,p=Object.prototype.hasOwnProperty,h=function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,i=a(f(t));try{var u=function(){var i=o.value;p.call(e,i)||i===n||c(e,i,{get:function(){return t[i]},enumerable:!(r=l(t,i))||r.enumerable})};for(i.s();!(o=i.n()).done;)u()}catch(s){i.e(s)}finally{i.f()}}return e},v={};!function(e,t){for(var n in t)c(e,n,{get:t[n],enumerable:!0})}(v,{Arrow:function(){return b},Root:function(){return w}}),e.exports=(r=v,h(c({},"__esModule",{value:!0}),r));var g=function(e,t,n){return n=null!=e?s(d(e)):{},h(!t&&e&&e.__esModule?n:c(n,"default",{value:e,enumerable:!0}),e)}(n(9950)),y=n(5899),m=n(44414),b=g.forwardRef((function(e,t){var n=e.children,r=e.width,a=void 0===r?10:r,s=e.height,c=void 0===s?5:s,l=i(e,u);return(0,m.jsx)(y.Primitive.svg,o(o({},l),{},{ref:t,width:a,height:c,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?n:(0,m.jsx)("polygon",{points:"0,0 30,0 15,10"})}))}));b.displayName="Arrow";var w=b},19926:function(e,t,n){"use strict";var r,o=n(43693).default,i=n(12897).default,a=n(91847).default,u=n(85715).default,s=n(50883).default,c=["scope","children"],l=Object.create,f=Object.defineProperty,d=Object.getOwnPropertyDescriptor,p=Object.getOwnPropertyNames,h=Object.getPrototypeOf,v=Object.prototype.hasOwnProperty,g=function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,i=s(p(t));try{var a=function(){var i=o.value;v.call(e,i)||i===n||f(e,i,{get:function(){return t[i]},enumerable:!(r=d(t,i))||r.enumerable})};for(i.s();!(o=i.n()).done;)a()}catch(u){i.e(u)}finally{i.f()}}return e},y={};!function(e,t){for(var n in t)f(e,n,{get:t[n],enumerable:!0})}(y,{createCollection:function(){return P}}),e.exports=(r=y,g(f({},"__esModule",{value:!0}),r));var m=function(e,t,n){return n=null!=e?l(h(e)):{},g(!t&&e&&e.__esModule?n:f(n,"default",{value:e,enumerable:!0}),e)}(n(9950)),b=n(98113),w=n(96269),S=n(15798),x=n(44414);function P(e){var t=e+"CollectionProvider",n=(0,b.createContextScope)(t),r=u(n,2),s=r[0],l=r[1],f=s(t,{collectionRef:{current:null},itemMap:new Map}),d=u(f,2),p=d[0],h=d[1],v=function(e){var t=e.scope,n=e.children,r=m.default.useRef(null),o=m.default.useRef(new Map).current;return(0,x.jsx)(p,{scope:t,itemMap:o,collectionRef:r,children:n})};v.displayName=t;var g=e+"CollectionSlot",y=m.default.forwardRef((function(e,t){var n=e.scope,r=e.children,o=h(g,n),i=(0,w.useComposedRefs)(t,o.collectionRef);return(0,x.jsx)(S.Slot,{ref:i,children:r})}));y.displayName=g;var P=e+"CollectionItemSlot",O="data-radix-collection-item",k=m.default.forwardRef((function(e,t){var n=e.scope,r=e.children,u=a(e,c),s=m.default.useRef(null),l=(0,w.useComposedRefs)(t,s),f=h(P,n);return m.default.useEffect((function(){return f.itemMap.set(s,i({ref:s},u)),function(){f.itemMap.delete(s)}})),(0,x.jsx)(S.Slot,i(i({},o({},O,"")),{},{ref:l,children:r}))}));return k.displayName=P,[{Provider:v,Slot:y,ItemSlot:k},function(t){var n=h(e+"CollectionConsumer",t);return m.default.useCallback((function(){var e=n.collectionRef.current;if(!e)return[];var t=Array.from(e.querySelectorAll("[".concat(O,"]")));return Array.from(n.itemMap.values()).sort((function(e,n){return t.indexOf(e.ref.current)-t.indexOf(n.ref.current)}))}),[n.collectionRef,n.itemMap])},l]}},96269:function(e,t,n){"use strict";var r,o=n(50883).default,i=Object.create,a=Object.defineProperty,u=Object.getOwnPropertyDescriptor,s=Object.getOwnPropertyNames,c=Object.getPrototypeOf,l=Object.prototype.hasOwnProperty,f=function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var i,c=o(s(t));try{var f=function(){var o=i.value;l.call(e,o)||o===n||a(e,o,{get:function(){return t[o]},enumerable:!(r=u(t,o))||r.enumerable})};for(c.s();!(i=c.n()).done;)f()}catch(d){c.e(d)}finally{c.f()}}return e},d={};!function(e,t){for(var n in t)a(e,n,{get:t[n],enumerable:!0})}(d,{composeRefs:function(){return v},useComposedRefs:function(){return g}}),e.exports=(r=d,f(a({},"__esModule",{value:!0}),r));var p=function(e,t,n){return n=null!=e?i(c(e)):{},f(!t&&e&&e.__esModule?n:a(n,"default",{value:e,enumerable:!0}),e)}(n(9950));function h(e,t){if("function"===typeof e)return e(t);null!==e&&void 0!==e&&(e.current=t)}function v(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){var n=!1,r=t.map((function(t){var r=h(t,e);return n||"function"!=typeof r||(n=!0),r}));if(n)return function(){for(var e=0;e<r.length;e++){var n=r[e];"function"==typeof n?n():h(t[e],null)}}}}function g(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return p.useCallback(v.apply(void 0,t),t)}},37641:function(e,t,n){"use strict";var r,o=n(91847).default,i=n(12897).default,a=n(85715).default,u=n(50883).default,s=["__scopeContextMenu","disabled"],c=["__scopeContextMenu"],l=["__scopeContextMenu"],f=["__scopeContextMenu"],d=["__scopeContextMenu"],p=["__scopeContextMenu"],h=["__scopeContextMenu"],v=["__scopeContextMenu"],g=["__scopeContextMenu"],y=["__scopeContextMenu"],m=["__scopeContextMenu"],b=["__scopeContextMenu"],w=["__scopeContextMenu"],S=["__scopeContextMenu"],x=Object.create,P=Object.defineProperty,O=Object.getOwnPropertyDescriptor,k=Object.getOwnPropertyNames,_=Object.getPrototypeOf,j=Object.prototype.hasOwnProperty,I=function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,i=u(k(t));try{var a=function(){var i=o.value;j.call(e,i)||i===n||P(e,i,{get:function(){return t[i]},enumerable:!(r=O(t,i))||r.enumerable})};for(i.s();!(o=i.n()).done;)a()}catch(s){i.e(s)}finally{i.f()}}return e},T=function(e,t,n){return n=null!=e?x(_(e)):{},I(!t&&e&&e.__esModule?n:P(n,"default",{value:e,enumerable:!0}),e)},E={};!function(e,t){for(var n in t)P(e,n,{get:t[n],enumerable:!0})}(E,{Arrow:function(){return je},CheckboxItem:function(){return xe},Content:function(){return me},ContextMenu:function(){return Z},ContextMenuArrow:function(){return le},ContextMenuCheckboxItem:function(){return ie},ContextMenuContent:function(){return te},ContextMenuGroup:function(){return ne},ContextMenuItem:function(){return oe},ContextMenuItemIndicator:function(){return se},ContextMenuLabel:function(){return re},ContextMenuPortal:function(){return J},ContextMenuRadioGroup:function(){return ae},ContextMenuRadioItem:function(){return ue},ContextMenuSeparator:function(){return ce},ContextMenuSub:function(){return fe},ContextMenuSubContent:function(){return pe},ContextMenuSubTrigger:function(){return de},ContextMenuTrigger:function(){return Q},Group:function(){return be},Item:function(){return Se},ItemIndicator:function(){return ke},Label:function(){return we},Portal:function(){return ye},RadioGroup:function(){return Pe},RadioItem:function(){return Oe},Root:function(){return ve},Separator:function(){return _e},Sub:function(){return Ie},SubContent:function(){return Ee},SubTrigger:function(){return Te},Trigger:function(){return ge},createContextMenuScope:function(){return K}}),e.exports=(r=E,I(P({},"__esModule",{value:!0}),r));var C=T(n(9950)),M=n(98913),A=n(98113),D=n(5899),R=T(n(7863)),N=n(7863),L=n(64793),U=n(3645),F=n(44414),B="ContextMenu",V=(0,A.createContextScope)(B,[N.createMenuScope]),z=a(V,2),H=z[0],K=z[1],G=(0,N.createMenuScope)(),q=H(B),W=a(q,2),Y=W[0],X=W[1],Z=function(e){var t=e.__scopeContextMenu,n=e.children,r=e.onOpenChange,o=e.dir,u=e.modal,s=void 0===u||u,c=C.useState(!1),l=a(c,2),f=l[0],d=l[1],p=G(t),h=(0,L.useCallbackRef)(r),v=C.useCallback((function(e){d(e),h(e)}),[h]);return(0,F.jsx)(Y,{scope:t,open:f,onOpenChange:v,modal:s,children:(0,F.jsx)(R.Root,i(i({},p),{},{dir:o,open:f,onOpenChange:v,modal:s,children:n}))})};Z.displayName=B;var $="ContextMenuTrigger",Q=C.forwardRef((function(e,t){var n=e.__scopeContextMenu,r=e.disabled,a=void 0!==r&&r,u=o(e,s),c=X($,n),l=G(n),f=C.useRef({x:0,y:0}),d=C.useRef({getBoundingClientRect:function(){return DOMRect.fromRect(i({width:0,height:0},f.current))}}),p=C.useRef(0),h=C.useCallback((function(){return window.clearTimeout(p.current)}),[]),v=function(e){f.current={x:e.clientX,y:e.clientY},c.onOpenChange(!0)};return C.useEffect((function(){return h}),[h]),C.useEffect((function(){a&&h()}),[a,h]),(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(R.Anchor,i(i({},l),{},{virtualRef:d})),(0,F.jsx)(D.Primitive.span,i(i({"data-state":c.open?"open":"closed","data-disabled":a?"":void 0},u),{},{ref:t,style:i({WebkitTouchCallout:"none"},e.style),onContextMenu:a?e.onContextMenu:(0,M.composeEventHandlers)(e.onContextMenu,(function(e){h(),v(e),e.preventDefault()})),onPointerDown:a?e.onPointerDown:(0,M.composeEventHandlers)(e.onPointerDown,he((function(e){h(),p.current=window.setTimeout((function(){return v(e)}),700)}))),onPointerMove:a?e.onPointerMove:(0,M.composeEventHandlers)(e.onPointerMove,he(h)),onPointerCancel:a?e.onPointerCancel:(0,M.composeEventHandlers)(e.onPointerCancel,he(h)),onPointerUp:a?e.onPointerUp:(0,M.composeEventHandlers)(e.onPointerUp,he(h))}))]})}));Q.displayName=$;var J=function(e){var t=e.__scopeContextMenu,n=o(e,c),r=G(t);return(0,F.jsx)(R.Portal,i(i({},r),n))};J.displayName="ContextMenuPortal";var ee="ContextMenuContent",te=C.forwardRef((function(e,t){var n=e.__scopeContextMenu,r=o(e,l),a=X(ee,n),u=G(n),s=C.useRef(!1);return(0,F.jsx)(R.Content,i(i(i({},u),r),{},{ref:t,side:"right",sideOffset:2,align:"start",onCloseAutoFocus:function(t){var n;null===(n=e.onCloseAutoFocus)||void 0===n||n.call(e,t),!t.defaultPrevented&&s.current&&t.preventDefault(),s.current=!1},onInteractOutside:function(t){var n;null===(n=e.onInteractOutside)||void 0===n||n.call(e,t),t.defaultPrevented||a.modal||(s.current=!0)},style:i(i({},e.style),{"--radix-context-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-context-menu-content-available-width":"var(--radix-popper-available-width)","--radix-context-menu-content-available-height":"var(--radix-popper-available-height)","--radix-context-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-context-menu-trigger-height":"var(--radix-popper-anchor-height)"})}))}));te.displayName=ee;var ne=C.forwardRef((function(e,t){var n=e.__scopeContextMenu,r=o(e,f),a=G(n);return(0,F.jsx)(R.Group,i(i(i({},a),r),{},{ref:t}))}));ne.displayName="ContextMenuGroup";var re=C.forwardRef((function(e,t){var n=e.__scopeContextMenu,r=o(e,d),a=G(n);return(0,F.jsx)(R.Label,i(i(i({},a),r),{},{ref:t}))}));re.displayName="ContextMenuLabel";var oe=C.forwardRef((function(e,t){var n=e.__scopeContextMenu,r=o(e,p),a=G(n);return(0,F.jsx)(R.Item,i(i(i({},a),r),{},{ref:t}))}));oe.displayName="ContextMenuItem";var ie=C.forwardRef((function(e,t){var n=e.__scopeContextMenu,r=o(e,h),a=G(n);return(0,F.jsx)(R.CheckboxItem,i(i(i({},a),r),{},{ref:t}))}));ie.displayName="ContextMenuCheckboxItem";var ae=C.forwardRef((function(e,t){var n=e.__scopeContextMenu,r=o(e,v),a=G(n);return(0,F.jsx)(R.RadioGroup,i(i(i({},a),r),{},{ref:t}))}));ae.displayName="ContextMenuRadioGroup";var ue=C.forwardRef((function(e,t){var n=e.__scopeContextMenu,r=o(e,g),a=G(n);return(0,F.jsx)(R.RadioItem,i(i(i({},a),r),{},{ref:t}))}));ue.displayName="ContextMenuRadioItem";var se=C.forwardRef((function(e,t){var n=e.__scopeContextMenu,r=o(e,y),a=G(n);return(0,F.jsx)(R.ItemIndicator,i(i(i({},a),r),{},{ref:t}))}));se.displayName="ContextMenuItemIndicator";var ce=C.forwardRef((function(e,t){var n=e.__scopeContextMenu,r=o(e,m),a=G(n);return(0,F.jsx)(R.Separator,i(i(i({},a),r),{},{ref:t}))}));ce.displayName="ContextMenuSeparator";var le=C.forwardRef((function(e,t){var n=e.__scopeContextMenu,r=o(e,b),a=G(n);return(0,F.jsx)(R.Arrow,i(i(i({},a),r),{},{ref:t}))}));le.displayName="ContextMenuArrow";var fe=function(e){var t=e.__scopeContextMenu,n=e.children,r=e.onOpenChange,o=e.open,u=e.defaultOpen,s=G(t),c=(0,U.useControllableState)({prop:o,defaultProp:u,onChange:r}),l=a(c,2),f=l[0],d=l[1];return(0,F.jsx)(R.Sub,i(i({},s),{},{open:f,onOpenChange:d,children:n}))};fe.displayName="ContextMenuSub";var de=C.forwardRef((function(e,t){var n=e.__scopeContextMenu,r=o(e,w),a=G(n);return(0,F.jsx)(R.SubTrigger,i(i(i({},a),r),{},{ref:t}))}));de.displayName="ContextMenuSubTrigger";var pe=C.forwardRef((function(e,t){var n=e.__scopeContextMenu,r=o(e,S),a=G(n);return(0,F.jsx)(R.SubContent,i(i(i({},a),r),{},{ref:t,style:i(i({},e.style),{"--radix-context-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-context-menu-content-available-width":"var(--radix-popper-available-width)","--radix-context-menu-content-available-height":"var(--radix-popper-available-height)","--radix-context-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-context-menu-trigger-height":"var(--radix-popper-anchor-height)"})}))}));function he(e){return function(t){return"mouse"!==t.pointerType?e(t):void 0}}pe.displayName="ContextMenuSubContent";var ve=Z,ge=Q,ye=J,me=te,be=ne,we=re,Se=oe,xe=ie,Pe=ae,Oe=ue,ke=se,_e=ce,je=le,Ie=fe,Te=de,Ee=pe},98113:function(e,t,n){"use strict";var r,o=n(43693).default,i=n(12897).default,a=n(41132).default,u=n(91847).default,s=n(50883).default,c=["children"],l=["scope","children"],f=Object.create,d=Object.defineProperty,p=Object.getOwnPropertyDescriptor,h=Object.getOwnPropertyNames,v=Object.getPrototypeOf,g=Object.prototype.hasOwnProperty,y=function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,i=s(h(t));try{var a=function(){var i=o.value;g.call(e,i)||i===n||d(e,i,{get:function(){return t[i]},enumerable:!(r=p(t,i))||r.enumerable})};for(i.s();!(o=i.n()).done;)a()}catch(u){i.e(u)}finally{i.f()}}return e},m={};!function(e,t){for(var n in t)d(e,n,{get:t[n],enumerable:!0})}(m,{createContext:function(){return S},createContextScope:function(){return x}}),e.exports=(r=m,y(d({},"__esModule",{value:!0}),r));var b=function(e,t,n){return n=null!=e?f(v(e)):{},y(!t&&e&&e.__esModule?n:d(n,"default",{value:e,enumerable:!0}),e)}(n(9950)),w=n(44414);function S(e,t){var n=b.createContext(t),r=function(e){var t=e.children,r=u(e,c),o=b.useMemo((function(){return r}),Object.values(r));return(0,w.jsx)(n.Provider,{value:o,children:t})};return r.displayName=e+"Provider",[r,function(r){var o=b.useContext(n);if(o)return o;if(void 0!==t)return t;throw new Error("`".concat(r,"` must be used within `").concat(e,"`"))}]}function x(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=[];var r=function(){var t=n.map((function(e){return b.createContext(e)}));return function(n){var r=(null===n||void 0===n?void 0:n[e])||t;return b.useMemo((function(){return o({},"__scope".concat(e),i(i({},n),{},o({},e,r)))}),[n,r])}};return r.scopeName=e,[function(t,r){var o=b.createContext(r),i=n.length;n=[].concat(a(n),[r]);var s=function(t){var n,r=t.scope,a=t.children,s=u(t,l),c=(null===r||void 0===r||null===(n=r[e])||void 0===n?void 0:n[i])||o,f=b.useMemo((function(){return s}),Object.values(s));return(0,w.jsx)(c.Provider,{value:f,children:a})};return s.displayName=t+"Provider",[s,function(n,a){var u,s=(null===a||void 0===a||null===(u=a[e])||void 0===u?void 0:u[i])||o,c=b.useContext(s);if(c)return c;if(void 0!==r)return r;throw new Error("`".concat(n,"` must be used within `").concat(t,"`"))}]},P.apply(void 0,[r].concat(a(t)))]}function P(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t[0];if(1===t.length)return r;var a=function(){var e=t.map((function(e){return{useScope:e(),scopeName:e.scopeName}}));return function(t){var n=e.reduce((function(e,n){var r=n.useScope,o=n.scopeName,a=r(t)["__scope".concat(o)];return i(i({},e),a)}),{});return b.useMemo((function(){return o({},"__scope".concat(r.scopeName),n)}),[n])}};return a.scopeName=r.scopeName,a}},80318:function(e,t,n){"use strict";var r,o=n(12897).default,i=n(91847).default,a=n(85715).default,u=n(50883).default,s=["__scopeDialog"],c=["forceMount"],l=["__scopeDialog"],f=["forceMount"],d=["__scopeDialog","trapFocus","onOpenAutoFocus","onCloseAutoFocus"],p=["__scopeDialog"],h=["__scopeDialog"],v=["__scopeDialog"],g=Object.create,y=Object.defineProperty,m=Object.getOwnPropertyDescriptor,b=Object.getOwnPropertyNames,w=Object.getPrototypeOf,S=Object.prototype.hasOwnProperty,x=function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,i=u(b(t));try{var a=function(){var i=o.value;S.call(e,i)||i===n||y(e,i,{get:function(){return t[i]},enumerable:!(r=m(t,i))||r.enumerable})};for(i.s();!(o=i.n()).done;)a()}catch(s){i.e(s)}finally{i.f()}}return e},P={};!function(e,t){for(var n in t)y(e,n,{get:t[n],enumerable:!0})}(P,{Close:function(){return Ae},Content:function(){return Ee},Description:function(){return Me},Dialog:function(){return X},DialogClose:function(){return ye},DialogContent:function(){return se},DialogDescription:function(){return ve},DialogOverlay:function(){return ie},DialogPortal:function(){return re},DialogTitle:function(){return pe},DialogTrigger:function(){return $},Overlay:function(){return Te},Portal:function(){return Ie},Root:function(){return _e},Title:function(){return Ce},Trigger:function(){return je},WarningProvider:function(){return xe},createDialogScope:function(){return K}}),e.exports=(r=P,x(y({},"__esModule",{value:!0}),r));var O=function(e,t,n){return n=null!=e?g(w(e)):{},x(!t&&e&&e.__esModule?n:y(n,"default",{value:e,enumerable:!0}),e)}(n(9950)),k=n(98913),_=n(96269),j=n(98113),I=n(56541),T=n(3645),E=n(64320),C=n(95011),M=n(66688),A=n(64905),D=n(5899),R=n(8077),N=n(63859),L=n(28159),U=n(15798),F=n(44414),B="Dialog",V=(0,j.createContextScope)(B),z=a(V,2),H=z[0],K=z[1],G=H(B),q=a(G,2),W=q[0],Y=q[1],X=function(e){var t=e.__scopeDialog,n=e.children,r=e.open,o=e.defaultOpen,i=e.onOpenChange,u=e.modal,s=void 0===u||u,c=O.useRef(null),l=O.useRef(null),f=(0,T.useControllableState)({prop:r,defaultProp:o,onChange:i}),d=a(f,2),p=d[0],h=void 0!==p&&p,v=d[1];return(0,F.jsx)(W,{scope:t,triggerRef:c,contentRef:l,contentId:(0,I.useId)(),titleId:(0,I.useId)(),descriptionId:(0,I.useId)(),open:h,onOpenChange:v,onOpenToggle:O.useCallback((function(){return v((function(e){return!e}))}),[v]),modal:s,children:n})};X.displayName=B;var Z="DialogTrigger",$=O.forwardRef((function(e,t){var n=e.__scopeDialog,r=i(e,s),a=Y(Z,n),u=(0,_.useComposedRefs)(t,a.triggerRef);return(0,F.jsx)(D.Primitive.button,o(o({type:"button","aria-haspopup":"dialog","aria-expanded":a.open,"aria-controls":a.contentId,"data-state":me(a.open)},r),{},{ref:u,onClick:(0,k.composeEventHandlers)(e.onClick,a.onOpenToggle)}))}));$.displayName=Z;var Q="DialogPortal",J=H(Q,{forceMount:void 0}),ee=a(J,2),te=ee[0],ne=ee[1],re=function(e){var t=e.__scopeDialog,n=e.forceMount,r=e.children,o=e.container,i=Y(Q,t);return(0,F.jsx)(te,{scope:t,forceMount:n,children:O.Children.map(r,(function(e){return(0,F.jsx)(A.Presence,{present:n||i.open,children:(0,F.jsx)(M.Portal,{asChild:!0,container:o,children:e})})}))})};re.displayName=Q;var oe="DialogOverlay",ie=O.forwardRef((function(e,t){var n=ne(oe,e.__scopeDialog),r=e.forceMount,a=void 0===r?n.forceMount:r,u=i(e,c),s=Y(oe,e.__scopeDialog);return s.modal?(0,F.jsx)(A.Presence,{present:a||s.open,children:(0,F.jsx)(ae,o(o({},u),{},{ref:t}))}):null}));ie.displayName=oe;var ae=O.forwardRef((function(e,t){var n=e.__scopeDialog,r=i(e,l),a=Y(oe,n);return(0,F.jsx)(N.RemoveScroll,{as:U.Slot,allowPinchZoom:!0,shards:[a.contentRef],children:(0,F.jsx)(D.Primitive.div,o(o({"data-state":me(a.open)},r),{},{ref:t,style:o({pointerEvents:"auto"},r.style)}))})})),ue="DialogContent",se=O.forwardRef((function(e,t){var n=ne(ue,e.__scopeDialog),r=e.forceMount,a=void 0===r?n.forceMount:r,u=i(e,f),s=Y(ue,e.__scopeDialog);return(0,F.jsx)(A.Presence,{present:a||s.open,children:s.modal?(0,F.jsx)(ce,o(o({},u),{},{ref:t})):(0,F.jsx)(le,o(o({},u),{},{ref:t}))})}));se.displayName=ue;var ce=O.forwardRef((function(e,t){var n=Y(ue,e.__scopeDialog),r=O.useRef(null),i=(0,_.useComposedRefs)(t,n.contentRef,r);return O.useEffect((function(){var e=r.current;if(e)return(0,L.hideOthers)(e)}),[]),(0,F.jsx)(fe,o(o({},e),{},{ref:i,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:(0,k.composeEventHandlers)(e.onCloseAutoFocus,(function(e){var t;e.preventDefault(),null===(t=n.triggerRef.current)||void 0===t||t.focus()})),onPointerDownOutside:(0,k.composeEventHandlers)(e.onPointerDownOutside,(function(e){var t=e.detail.originalEvent,n=0===t.button&&!0===t.ctrlKey;(2===t.button||n)&&e.preventDefault()})),onFocusOutside:(0,k.composeEventHandlers)(e.onFocusOutside,(function(e){return e.preventDefault()}))}))})),le=O.forwardRef((function(e,t){var n=Y(ue,e.__scopeDialog),r=O.useRef(!1),i=O.useRef(!1);return(0,F.jsx)(fe,o(o({},e),{},{ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:function(t){var o,a;(null===(o=e.onCloseAutoFocus)||void 0===o||o.call(e,t),t.defaultPrevented)||(r.current||null===(a=n.triggerRef.current)||void 0===a||a.focus(),t.preventDefault());r.current=!1,i.current=!1},onInteractOutside:function(t){var o,a;null===(o=e.onInteractOutside)||void 0===o||o.call(e,t),t.defaultPrevented||(r.current=!0,"pointerdown"===t.detail.originalEvent.type&&(i.current=!0));var u=t.target;(null===(a=n.triggerRef.current)||void 0===a?void 0:a.contains(u))&&t.preventDefault(),"focusin"===t.detail.originalEvent.type&&i.current&&t.preventDefault()}}))})),fe=O.forwardRef((function(e,t){var n=e.__scopeDialog,r=e.trapFocus,a=e.onOpenAutoFocus,u=e.onCloseAutoFocus,s=i(e,d),c=Y(ue,n),l=O.useRef(null),f=(0,_.useComposedRefs)(t,l);return(0,R.useFocusGuards)(),(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(C.FocusScope,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:a,onUnmountAutoFocus:u,children:(0,F.jsx)(E.DismissableLayer,o(o({role:"dialog",id:c.contentId,"aria-describedby":c.descriptionId,"aria-labelledby":c.titleId,"data-state":me(c.open)},s),{},{ref:f,onDismiss:function(){return c.onOpenChange(!1)}}))}),(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(Oe,{titleId:c.titleId}),(0,F.jsx)(ke,{contentRef:l,descriptionId:c.descriptionId})]})]})})),de="DialogTitle",pe=O.forwardRef((function(e,t){var n=e.__scopeDialog,r=i(e,p),a=Y(de,n);return(0,F.jsx)(D.Primitive.h2,o(o({id:a.titleId},r),{},{ref:t}))}));pe.displayName=de;var he="DialogDescription",ve=O.forwardRef((function(e,t){var n=e.__scopeDialog,r=i(e,h),a=Y(he,n);return(0,F.jsx)(D.Primitive.p,o(o({id:a.descriptionId},r),{},{ref:t}))}));ve.displayName=he;var ge="DialogClose",ye=O.forwardRef((function(e,t){var n=e.__scopeDialog,r=i(e,v),a=Y(ge,n);return(0,F.jsx)(D.Primitive.button,o(o({type:"button"},r),{},{ref:t,onClick:(0,k.composeEventHandlers)(e.onClick,(function(){return a.onOpenChange(!1)}))}))}));function me(e){return e?"open":"closed"}ye.displayName=ge;var be="DialogTitleWarning",we=(0,j.createContext)(be,{contentName:ue,titleName:de,docsSlug:"dialog"}),Se=a(we,2),xe=Se[0],Pe=Se[1],Oe=function(e){var t=e.titleId,n=Pe(be),r="`".concat(n.contentName,"` requires a `").concat(n.titleName,"` for the component to be accessible for screen reader users.\n\nIf you want to hide the `").concat(n.titleName,"`, you can wrap it with our VisuallyHidden component.\n\nFor more information, see https://radix-ui.com/primitives/docs/components/").concat(n.docsSlug);return O.useEffect((function(){t&&(document.getElementById(t)||console.error(r))}),[r,t]),null},ke=function(e){var t=e.contentRef,n=e.descriptionId,r=Pe("DialogDescriptionWarning"),o="Warning: Missing `Description` or `aria-describedby={undefined}` for {".concat(r.contentName,"}.");return O.useEffect((function(){var e,r=null===(e=t.current)||void 0===e?void 0:e.getAttribute("aria-describedby");n&&r&&(document.getElementById(n)||console.warn(o))}),[o,t,n]),null},_e=X,je=$,Ie=re,Te=ie,Ee=se,Ce=pe,Me=ve,Ae=ye},38263:function(e,t,n){"use strict";var r,o=n(50883).default,i=Object.create,a=Object.defineProperty,u=Object.getOwnPropertyDescriptor,s=Object.getOwnPropertyNames,c=Object.getPrototypeOf,l=Object.prototype.hasOwnProperty,f=function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var i,c=o(s(t));try{var f=function(){var o=i.value;l.call(e,o)||o===n||a(e,o,{get:function(){return t[o]},enumerable:!(r=u(t,o))||r.enumerable})};for(c.s();!(i=c.n()).done;)f()}catch(d){c.e(d)}finally{c.f()}}return e},d={};!function(e,t){for(var n in t)a(e,n,{get:t[n],enumerable:!0})}(d,{DirectionProvider:function(){return g},Provider:function(){return m},useDirection:function(){return y}}),e.exports=(r=d,f(a({},"__esModule",{value:!0}),r));var p=function(e,t,n){return n=null!=e?i(c(e)):{},f(!t&&e&&e.__esModule?n:a(n,"default",{value:e,enumerable:!0}),e)}(n(9950)),h=n(44414),v=p.createContext(void 0),g=function(e){var t=e.dir,n=e.children;return(0,h.jsx)(v.Provider,{value:t,children:n})};function y(e){var t=p.useContext(v);return e||t||"ltr"}var m=g},64320:function(e,t,n){"use strict";var r,o=n(12897).default,i=n(41132).default,a=n(85715).default,u=n(91847).default,s=n(50883).default,c=["disableOutsidePointerEvents","onEscapeKeyDown","onPointerDownOutside","onFocusOutside","onInteractOutside","onDismiss"],l=Object.create,f=Object.defineProperty,d=Object.getOwnPropertyDescriptor,p=Object.getOwnPropertyNames,h=Object.getPrototypeOf,v=Object.prototype.hasOwnProperty,g=function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,i=s(p(t));try{var a=function(){var i=o.value;v.call(e,i)||i===n||f(e,i,{get:function(){return t[i]},enumerable:!(r=d(t,i))||r.enumerable})};for(i.s();!(o=i.n()).done;)a()}catch(u){i.e(u)}finally{i.f()}}return e},y={};!function(e,t){for(var n in t)f(e,n,{get:t[n],enumerable:!0})}(y,{Branch:function(){return R},DismissableLayer:function(){return E},DismissableLayerBranch:function(){return C},Root:function(){return D}}),e.exports=(r=y,g(f({},"__esModule",{value:!0}),r));var m,b=function(e,t,n){return n=null!=e?l(h(e)):{},g(!t&&e&&e.__esModule?n:f(n,"default",{value:e,enumerable:!0}),e)}(n(9950)),w=n(98913),S=n(5899),x=n(96269),P=n(64793),O=n(12863),k=n(44414),_="dismissableLayer.update",j="dismissableLayer.pointerDownOutside",I="dismissableLayer.focusOutside",T=b.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),E=b.forwardRef((function(e,t){var n,r=e.disableOutsidePointerEvents,s=void 0!==r&&r,l=e.onEscapeKeyDown,f=e.onPointerDownOutside,d=e.onFocusOutside,p=e.onInteractOutside,h=e.onDismiss,v=u(e,c),g=b.useContext(T),y=b.useState(null),E=a(y,2),C=E[0],D=E[1],R=null!==(n=null===C||void 0===C?void 0:C.ownerDocument)&&void 0!==n?n:null===globalThis||void 0===globalThis?void 0:globalThis.document,N=b.useState({}),L=a(N,2)[1],U=(0,x.useComposedRefs)(t,(function(e){return D(e)})),F=Array.from(g.layers),B=i(g.layersWithOutsidePointerEventsDisabled).slice(-1),V=a(B,1)[0],z=F.indexOf(V),H=C?F.indexOf(C):-1,K=g.layersWithOutsidePointerEventsDisabled.size>0,G=H>=z,q=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null===globalThis||void 0===globalThis?void 0:globalThis.document,n=(0,P.useCallbackRef)(e),r=b.useRef(!1),o=b.useRef((function(){}));return b.useEffect((function(){var e=function(e){if(e.target&&!r.current){var i=function(){A(j,n,a,{discrete:!0})},a={originalEvent:e};"touch"===e.pointerType?(t.removeEventListener("click",o.current),o.current=i,t.addEventListener("click",o.current,{once:!0})):i()}else t.removeEventListener("click",o.current);r.current=!1},i=window.setTimeout((function(){t.addEventListener("pointerdown",e)}),0);return function(){window.clearTimeout(i),t.removeEventListener("pointerdown",e),t.removeEventListener("click",o.current)}}),[t,n]),{onPointerDownCapture:function(){return r.current=!0}}}((function(e){var t=e.target,n=i(g.branches).some((function(e){return e.contains(t)}));G&&!n&&(null===f||void 0===f||f(e),null===p||void 0===p||p(e),e.defaultPrevented||null===h||void 0===h||h())}),R),W=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null===globalThis||void 0===globalThis?void 0:globalThis.document,n=(0,P.useCallbackRef)(e),r=b.useRef(!1);return b.useEffect((function(){var e=function(e){e.target&&!r.current&&A(I,n,{originalEvent:e},{discrete:!1})};return t.addEventListener("focusin",e),function(){return t.removeEventListener("focusin",e)}}),[t,n]),{onFocusCapture:function(){return r.current=!0},onBlurCapture:function(){return r.current=!1}}}((function(e){var t=e.target;i(g.branches).some((function(e){return e.contains(t)}))||(null===d||void 0===d||d(e),null===p||void 0===p||p(e),e.defaultPrevented||null===h||void 0===h||h())}),R);return(0,O.useEscapeKeydown)((function(e){H===g.layers.size-1&&(null===l||void 0===l||l(e),!e.defaultPrevented&&h&&(e.preventDefault(),h()))}),R),b.useEffect((function(){if(C)return s&&(0===g.layersWithOutsidePointerEventsDisabled.size&&(m=R.body.style.pointerEvents,R.body.style.pointerEvents="none"),g.layersWithOutsidePointerEventsDisabled.add(C)),g.layers.add(C),M(),function(){s&&1===g.layersWithOutsidePointerEventsDisabled.size&&(R.body.style.pointerEvents=m)}}),[C,R,s,g]),b.useEffect((function(){return function(){C&&(g.layers.delete(C),g.layersWithOutsidePointerEventsDisabled.delete(C),M())}}),[C,g]),b.useEffect((function(){var e=function(){return L({})};return document.addEventListener(_,e),function(){return document.removeEventListener(_,e)}}),[]),(0,k.jsx)(S.Primitive.div,o(o({},v),{},{ref:U,style:o({pointerEvents:K?G?"auto":"none":void 0},e.style),onFocusCapture:(0,w.composeEventHandlers)(e.onFocusCapture,W.onFocusCapture),onBlurCapture:(0,w.composeEventHandlers)(e.onBlurCapture,W.onBlurCapture),onPointerDownCapture:(0,w.composeEventHandlers)(e.onPointerDownCapture,q.onPointerDownCapture)}))}));E.displayName="DismissableLayer";var C=b.forwardRef((function(e,t){var n=b.useContext(T),r=b.useRef(null),i=(0,x.useComposedRefs)(t,r);return b.useEffect((function(){var e=r.current;if(e)return n.branches.add(e),function(){n.branches.delete(e)}}),[n.branches]),(0,k.jsx)(S.Primitive.div,o(o({},e),{},{ref:i}))}));function M(){var e=new CustomEvent(_);document.dispatchEvent(e)}function A(e,t,n,r){var o=r.discrete,i=n.originalEvent.target,a=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:n});t&&i.addEventListener(e,t,{once:!0}),o?(0,S.dispatchDiscreteCustomEvent)(i,a):i.dispatchEvent(a)}C.displayName="DismissableLayerBranch";var D=E,R=C},95549:function(e,t,n){"use strict";var r,o=n(91847).default,i=n(12897).default,a=n(85715).default,u=n(50883).default,s=["__scopeDropdownMenu","disabled"],c=["__scopeDropdownMenu"],l=["__scopeDropdownMenu"],f=["__scopeDropdownMenu"],d=["__scopeDropdownMenu"],p=["__scopeDropdownMenu"],h=["__scopeDropdownMenu"],v=["__scopeDropdownMenu"],g=["__scopeDropdownMenu"],y=["__scopeDropdownMenu"],m=["__scopeDropdownMenu"],b=["__scopeDropdownMenu"],w=["__scopeDropdownMenu"],S=["__scopeDropdownMenu"],x=Object.create,P=Object.defineProperty,O=Object.getOwnPropertyDescriptor,k=Object.getOwnPropertyNames,_=Object.getPrototypeOf,j=Object.prototype.hasOwnProperty,I=function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,i=u(k(t));try{var a=function(){var i=o.value;j.call(e,i)||i===n||P(e,i,{get:function(){return t[i]},enumerable:!(r=O(t,i))||r.enumerable})};for(i.s();!(o=i.n()).done;)a()}catch(s){i.e(s)}finally{i.f()}}return e},T=function(e,t,n){return n=null!=e?x(_(e)):{},I(!t&&e&&e.__esModule?n:P(n,"default",{value:e,enumerable:!0}),e)},E={};!function(e,t){for(var n in t)P(e,n,{get:t[n],enumerable:!0})}(E,{Arrow:function(){return je},CheckboxItem:function(){return xe},Content:function(){return me},DropdownMenu:function(){return $},DropdownMenuArrow:function(){return fe},DropdownMenuCheckboxItem:function(){return ae},DropdownMenuContent:function(){return ne},DropdownMenuGroup:function(){return re},DropdownMenuItem:function(){return ie},DropdownMenuItemIndicator:function(){return ce},DropdownMenuLabel:function(){return oe},DropdownMenuPortal:function(){return ee},DropdownMenuRadioGroup:function(){return ue},DropdownMenuRadioItem:function(){return se},DropdownMenuSeparator:function(){return le},DropdownMenuSub:function(){return de},DropdownMenuSubContent:function(){return he},DropdownMenuSubTrigger:function(){return pe},DropdownMenuTrigger:function(){return J},Group:function(){return be},Item:function(){return Se},ItemIndicator:function(){return ke},Label:function(){return we},Portal:function(){return ye},RadioGroup:function(){return Pe},RadioItem:function(){return Oe},Root:function(){return ve},Separator:function(){return _e},Sub:function(){return Ie},SubContent:function(){return Ee},SubTrigger:function(){return Te},Trigger:function(){return ge},createDropdownMenuScope:function(){return G}}),e.exports=(r=E,I(P({},"__esModule",{value:!0}),r));var C=T(n(9950)),M=n(98913),A=n(96269),D=n(98113),R=n(3645),N=n(5899),L=T(n(7863)),U=n(7863),F=n(56541),B=n(44414),V="DropdownMenu",z=(0,D.createContextScope)(V,[U.createMenuScope]),H=a(z,2),K=H[0],G=H[1],q=(0,U.createMenuScope)(),W=K(V),Y=a(W,2),X=Y[0],Z=Y[1],$=function(e){var t=e.__scopeDropdownMenu,n=e.children,r=e.dir,o=e.open,u=e.defaultOpen,s=e.onOpenChange,c=e.modal,l=void 0===c||c,f=q(t),d=C.useRef(null),p=(0,R.useControllableState)({prop:o,defaultProp:u,onChange:s}),h=a(p,2),v=h[0],g=void 0!==v&&v,y=h[1];return(0,B.jsx)(X,{scope:t,triggerId:(0,F.useId)(),triggerRef:d,contentId:(0,F.useId)(),open:g,onOpenChange:y,onOpenToggle:C.useCallback((function(){return y((function(e){return!e}))}),[y]),modal:l,children:(0,B.jsx)(L.Root,i(i({},f),{},{open:g,onOpenChange:y,dir:r,modal:l,children:n}))})};$.displayName=V;var Q="DropdownMenuTrigger",J=C.forwardRef((function(e,t){var n=e.__scopeDropdownMenu,r=e.disabled,a=void 0!==r&&r,u=o(e,s),c=Z(Q,n),l=q(n);return(0,B.jsx)(L.Anchor,i(i({asChild:!0},l),{},{children:(0,B.jsx)(N.Primitive.button,i(i({type:"button",id:c.triggerId,"aria-haspopup":"menu","aria-expanded":c.open,"aria-controls":c.open?c.contentId:void 0,"data-state":c.open?"open":"closed","data-disabled":a?"":void 0,disabled:a},u),{},{ref:(0,A.composeRefs)(t,c.triggerRef),onPointerDown:(0,M.composeEventHandlers)(e.onPointerDown,(function(e){a||0!==e.button||!1!==e.ctrlKey||(c.onOpenToggle(),c.open||e.preventDefault())})),onKeyDown:(0,M.composeEventHandlers)(e.onKeyDown,(function(e){a||(["Enter"," "].includes(e.key)&&c.onOpenToggle(),"ArrowDown"===e.key&&c.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(e.key)&&e.preventDefault())}))}))}))}));J.displayName=Q;var ee=function(e){var t=e.__scopeDropdownMenu,n=o(e,c),r=q(t);return(0,B.jsx)(L.Portal,i(i({},r),n))};ee.displayName="DropdownMenuPortal";var te="DropdownMenuContent",ne=C.forwardRef((function(e,t){var n=e.__scopeDropdownMenu,r=o(e,l),a=Z(te,n),u=q(n),s=C.useRef(!1);return(0,B.jsx)(L.Content,i(i(i({id:a.contentId,"aria-labelledby":a.triggerId},u),r),{},{ref:t,onCloseAutoFocus:(0,M.composeEventHandlers)(e.onCloseAutoFocus,(function(e){var t;s.current||null===(t=a.triggerRef.current)||void 0===t||t.focus(),s.current=!1,e.preventDefault()})),onInteractOutside:(0,M.composeEventHandlers)(e.onInteractOutside,(function(e){var t=e.detail.originalEvent,n=0===t.button&&!0===t.ctrlKey,r=2===t.button||n;a.modal&&!r||(s.current=!0)})),style:i(i({},e.style),{"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"})}))}));ne.displayName=te;var re=C.forwardRef((function(e,t){var n=e.__scopeDropdownMenu,r=o(e,f),a=q(n);return(0,B.jsx)(L.Group,i(i(i({},a),r),{},{ref:t}))}));re.displayName="DropdownMenuGroup";var oe=C.forwardRef((function(e,t){var n=e.__scopeDropdownMenu,r=o(e,d),a=q(n);return(0,B.jsx)(L.Label,i(i(i({},a),r),{},{ref:t}))}));oe.displayName="DropdownMenuLabel";var ie=C.forwardRef((function(e,t){var n=e.__scopeDropdownMenu,r=o(e,p),a=q(n);return(0,B.jsx)(L.Item,i(i(i({},a),r),{},{ref:t}))}));ie.displayName="DropdownMenuItem";var ae=C.forwardRef((function(e,t){var n=e.__scopeDropdownMenu,r=o(e,h),a=q(n);return(0,B.jsx)(L.CheckboxItem,i(i(i({},a),r),{},{ref:t}))}));ae.displayName="DropdownMenuCheckboxItem";var ue=C.forwardRef((function(e,t){var n=e.__scopeDropdownMenu,r=o(e,v),a=q(n);return(0,B.jsx)(L.RadioGroup,i(i(i({},a),r),{},{ref:t}))}));ue.displayName="DropdownMenuRadioGroup";var se=C.forwardRef((function(e,t){var n=e.__scopeDropdownMenu,r=o(e,g),a=q(n);return(0,B.jsx)(L.RadioItem,i(i(i({},a),r),{},{ref:t}))}));se.displayName="DropdownMenuRadioItem";var ce=C.forwardRef((function(e,t){var n=e.__scopeDropdownMenu,r=o(e,y),a=q(n);return(0,B.jsx)(L.ItemIndicator,i(i(i({},a),r),{},{ref:t}))}));ce.displayName="DropdownMenuItemIndicator";var le=C.forwardRef((function(e,t){var n=e.__scopeDropdownMenu,r=o(e,m),a=q(n);return(0,B.jsx)(L.Separator,i(i(i({},a),r),{},{ref:t}))}));le.displayName="DropdownMenuSeparator";var fe=C.forwardRef((function(e,t){var n=e.__scopeDropdownMenu,r=o(e,b),a=q(n);return(0,B.jsx)(L.Arrow,i(i(i({},a),r),{},{ref:t}))}));fe.displayName="DropdownMenuArrow";var de=function(e){var t=e.__scopeDropdownMenu,n=e.children,r=e.open,o=e.onOpenChange,u=e.defaultOpen,s=q(t),c=(0,R.useControllableState)({prop:r,defaultProp:u,onChange:o}),l=a(c,2),f=l[0],d=void 0!==f&&f,p=l[1];return(0,B.jsx)(L.Sub,i(i({},s),{},{open:d,onOpenChange:p,children:n}))},pe=C.forwardRef((function(e,t){var n=e.__scopeDropdownMenu,r=o(e,w),a=q(n);return(0,B.jsx)(L.SubTrigger,i(i(i({},a),r),{},{ref:t}))}));pe.displayName="DropdownMenuSubTrigger";var he=C.forwardRef((function(e,t){var n=e.__scopeDropdownMenu,r=o(e,S),a=q(n);return(0,B.jsx)(L.SubContent,i(i(i({},a),r),{},{ref:t,style:i(i({},e.style),{"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"})}))}));he.displayName="DropdownMenuSubContent";var ve=$,ge=J,ye=ee,me=ne,be=re,we=oe,Se=ie,xe=ae,Pe=ue,Oe=se,ke=ce,_e=le,je=fe,Ie=de,Te=pe,Ee=he},8077:function(e,t,n){"use strict";var r,o=n(50883).default,i=Object.create,a=Object.defineProperty,u=Object.getOwnPropertyDescriptor,s=Object.getOwnPropertyNames,c=Object.getPrototypeOf,l=Object.prototype.hasOwnProperty,f=function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var i,c=o(s(t));try{var f=function(){var o=i.value;l.call(e,o)||o===n||a(e,o,{get:function(){return t[o]},enumerable:!(r=u(t,o))||r.enumerable})};for(c.s();!(i=c.n()).done;)f()}catch(d){c.e(d)}finally{c.f()}}return e},d={};!function(e,t){for(var n in t)a(e,n,{get:t[n],enumerable:!0})}(d,{FocusGuards:function(){return v},Root:function(){return m},useFocusGuards:function(){return g}}),e.exports=(r=d,f(a({},"__esModule",{value:!0}),r));var p=function(e,t,n){return n=null!=e?i(c(e)):{},f(!t&&e&&e.__esModule?n:a(n,"default",{value:e,enumerable:!0}),e)}(n(9950)),h=0;function v(e){return g(),e.children}function g(){p.useEffect((function(){var e,t,n=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",null!==(e=n[0])&&void 0!==e?e:y()),document.body.insertAdjacentElement("beforeend",null!==(t=n[1])&&void 0!==t?t:y()),h++,function(){1===h&&document.querySelectorAll("[data-radix-focus-guard]").forEach((function(e){return e.remove()})),h--}}),[])}function y(){var e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var m=v},95011:function(e,t,n){"use strict";var r,o=n(41132).default,i=n(12897).default,a=n(85715).default,u=n(91847).default,s=n(50883).default,c=["loop","trapped","onMountAutoFocus","onUnmountAutoFocus"],l=Object.create,f=Object.defineProperty,d=Object.getOwnPropertyDescriptor,p=Object.getOwnPropertyNames,h=Object.getPrototypeOf,v=Object.prototype.hasOwnProperty,g=function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,i=s(p(t));try{var a=function(){var i=o.value;v.call(e,i)||i===n||f(e,i,{get:function(){return t[i]},enumerable:!(r=d(t,i))||r.enumerable})};for(i.s();!(o=i.n()).done;)a()}catch(u){i.e(u)}finally{i.f()}}return e},y={};!function(e,t){for(var n in t)f(e,n,{get:t[n],enumerable:!0})}(y,{FocusScope:function(){return _},Root:function(){return A}}),e.exports=(r=y,g(f({},"__esModule",{value:!0}),r));var m=function(e,t,n){return n=null!=e?l(h(e)):{},g(!t&&e&&e.__esModule?n:f(n,"default",{value:e,enumerable:!0}),e)}(n(9950)),b=n(96269),w=n(5899),S=n(64793),x=n(44414),P="focusScope.autoFocusOnMount",O="focusScope.autoFocusOnUnmount",k={bubbles:!1,cancelable:!0},_=m.forwardRef((function(e,t){var n=e.loop,r=void 0!==n&&n,o=e.trapped,l=void 0!==o&&o,f=e.onMountAutoFocus,d=e.onUnmountAutoFocus,p=u(e,c),h=m.useState(null),v=a(h,2),g=v[0],y=v[1],_=(0,S.useCallbackRef)(f),T=(0,S.useCallbackRef)(d),M=m.useRef(null),A=(0,b.useComposedRefs)(t,(function(e){return y(e)})),D=m.useRef({paused:!1,pause:function(){this.paused=!0},resume:function(){this.paused=!1}}).current;m.useEffect((function(){if(l){var e=function(e){if(!D.paused&&g){var t=e.target;g.contains(t)?M.current=t:E(M.current,{select:!0})}},t=function(e){if(!D.paused&&g){var t=e.relatedTarget;null!==t&&(g.contains(t)||E(M.current,{select:!0}))}},n=function(e){if(document.activeElement===document.body){var t,n=s(e);try{for(n.s();!(t=n.n()).done;){t.value.removedNodes.length>0&&E(g)}}catch(r){n.e(r)}finally{n.f()}}};document.addEventListener("focusin",e),document.addEventListener("focusout",t);var r=new MutationObserver(n);return g&&r.observe(g,{childList:!0,subtree:!0}),function(){document.removeEventListener("focusin",e),document.removeEventListener("focusout",t),r.disconnect()}}}),[l,g,D.paused]),m.useEffect((function(){if(g){C.add(D);var e=document.activeElement;if(!g.contains(e)){var t=new CustomEvent(P,k);g.addEventListener(P,_),g.dispatchEvent(t),t.defaultPrevented||(!function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.select,o=void 0!==r&&r,i=document.activeElement,a=s(e);try{for(a.s();!(t=a.n()).done;){if(E(t.value,{select:o}),document.activeElement!==i)return}}catch(u){a.e(u)}finally{a.f()}}((n=j(g),n.filter((function(e){return"A"!==e.tagName}))),{select:!0}),document.activeElement===e&&E(g))}return function(){g.removeEventListener(P,_),setTimeout((function(){var t=new CustomEvent(O,k);g.addEventListener(O,T),g.dispatchEvent(t),t.defaultPrevented||E(null!==e&&void 0!==e?e:document.body,{select:!0}),g.removeEventListener(O,T),C.remove(D)}),0)}}var n}),[g,_,T,D]);var R=m.useCallback((function(e){if((r||l)&&!D.paused){var t="Tab"===e.key&&!e.altKey&&!e.ctrlKey&&!e.metaKey,n=document.activeElement;if(t&&n){var o=e.currentTarget,i=function(e){var t=j(e),n=I(t,e),r=I(t.reverse(),e);return[n,r]}(o),u=a(i,2),s=u[0],c=u[1];s&&c?e.shiftKey||n!==c?e.shiftKey&&n===s&&(e.preventDefault(),r&&E(c,{select:!0})):(e.preventDefault(),r&&E(s,{select:!0})):n===o&&e.preventDefault()}}}),[r,l,D.paused]);return(0,x.jsx)(w.Primitive.div,i(i({tabIndex:-1},p),{},{ref:A,onKeyDown:R}))}));function j(e){for(var t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:function(e){var t="INPUT"===e.tagName&&"hidden"===e.type;return e.disabled||e.hidden||t?NodeFilter.FILTER_SKIP:e.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});n.nextNode();)t.push(n.currentNode);return t}function I(e,t){var n,r=s(e);try{for(r.s();!(n=r.n()).done;){var o=n.value;if(!T(o,{upTo:t}))return o}}catch(i){r.e(i)}finally{r.f()}}function T(e,t){var n=t.upTo;if("hidden"===getComputedStyle(e).visibility)return!0;for(;e;){if(void 0!==n&&e===n)return!1;if("none"===getComputedStyle(e).display)return!0;e=e.parentElement}return!1}function E(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).select,n=void 0!==t&&t;if(e&&e.focus){var r=document.activeElement;e.focus({preventScroll:!0}),e!==r&&function(e){return e instanceof HTMLInputElement&&"select"in e}(e)&&n&&e.select()}}_.displayName="FocusScope";var C=function(){var e=[];return{add:function(t){var n=e[0];t!==n&&(null===n||void 0===n||n.pause()),(e=M(e,t)).unshift(t)},remove:function(t){var n;null===(n=(e=M(e,t))[0])||void 0===n||n.resume()}}}();function M(e,t){var n=o(e),r=n.indexOf(t);return-1!==r&&n.splice(r,1),n}var A=_},56541:function(e,t,n){"use strict";var r,o=n(85715).default,i=n(50883).default,a=Object.create,u=Object.defineProperty,s=Object.getOwnPropertyDescriptor,c=Object.getOwnPropertyNames,l=Object.getPrototypeOf,f=Object.prototype.hasOwnProperty,d=function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,a=i(c(t));try{var l=function(){var i=o.value;f.call(e,i)||i===n||u(e,i,{get:function(){return t[i]},enumerable:!(r=s(t,i))||r.enumerable})};for(a.s();!(o=a.n()).done;)l()}catch(d){a.e(d)}finally{a.f()}}return e},p={};!function(e,t){for(var n in t)u(e,n,{get:t[n],enumerable:!0})}(p,{useId:function(){return m}}),e.exports=(r=p,d(u({},"__esModule",{value:!0}),r));var h=function(e,t,n){return n=null!=e?a(l(e)):{},d(!t&&e&&e.__esModule?n:u(n,"default",{value:e,enumerable:!0}),e)}(n(9950)),v=n(67066),g=h["useId".toString()]||function(){},y=0;function m(e){var t=h.useState(g()),n=o(t,2),r=n[0],i=n[1];return(0,v.useLayoutEffect)((function(){e||i((function(e){return null!==e&&void 0!==e?e:String(y++)}))}),[e]),e||(r?"radix-".concat(r):"")}},7863:function(e,t,n){"use strict";var r,o=n(91847).default,i=n(12897).default,a=n(85715).default,u=n(50883).default,s=["__scopeMenu"],c=["forceMount"],l=["__scopeMenu","loop","trapFocus","onOpenAutoFocus","onCloseAutoFocus","disableOutsidePointerEvents","onEntryFocus","onEscapeKeyDown","onPointerDownOutside","onFocusOutside","onInteractOutside","onDismiss","disableOutsideScroll"],f=["__scopeMenu"],d=["__scopeMenu"],p=["disabled","onSelect"],h=["__scopeMenu","disabled","textValue"],v=["checked","onCheckedChange"],g=["value","onValueChange"],y=["value"],m=["__scopeMenu","forceMount"],b=["__scopeMenu"],w=["__scopeMenu"],S=["forceMount"],x=Object.create,P=Object.defineProperty,O=Object.getOwnPropertyDescriptor,k=Object.getOwnPropertyNames,_=Object.getPrototypeOf,j=Object.prototype.hasOwnProperty,I=function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,i=u(k(t));try{var a=function(){var i=o.value;j.call(e,i)||i===n||P(e,i,{get:function(){return t[i]},enumerable:!(r=O(t,i))||r.enumerable})};for(i.s();!(o=i.n()).done;)a()}catch(s){i.e(s)}finally{i.f()}}return e},T=function(e,t,n){return n=null!=e?x(_(e)):{},I(!t&&e&&e.__esModule?n:P(n,"default",{value:e,enumerable:!0}),e)},E={};!function(e,t){for(var n in t)P(e,n,{get:t[n],enumerable:!0})}(E,{Anchor:function(){return kt},Arrow:function(){return Nt},CheckboxItem:function(){return Ct},Content:function(){return jt},Group:function(){return It},Item:function(){return Et},ItemIndicator:function(){return Dt},Label:function(){return Tt},Menu:function(){return Oe},MenuAnchor:function(){return ke},MenuArrow:function(){return ct},MenuCheckboxItem:function(){return We},MenuContent:function(){return Le},MenuGroup:function(){return Ve},MenuItem:function(){return Ge},MenuItemIndicator:function(){return ut},MenuLabel:function(){return ze},MenuPortal:function(){return Ce},MenuRadioGroup:function(){return Je},MenuRadioItem:function(){return tt},MenuSeparator:function(){return st},MenuSub:function(){return vt},MenuSubContent:function(){return bt},MenuSubTrigger:function(){return yt},Portal:function(){return _t},RadioGroup:function(){return Mt},RadioItem:function(){return At},Root:function(){return Ot},Separator:function(){return Rt},Sub:function(){return Lt},SubContent:function(){return Ft},SubTrigger:function(){return Ut},createMenuScope:function(){return pe}}),e.exports=(r=E,I(P({},"__esModule",{value:!0}),r));var C=T(n(9950)),M=n(98913),A=n(19926),D=n(96269),R=n(98113),N=n(38263),L=n(64320),U=n(8077),F=n(95011),B=n(56541),V=T(n(36964)),z=n(36964),H=n(66688),K=n(64905),G=n(5899),q=T(n(19454)),W=n(19454),Y=n(15798),X=n(64793),Z=n(28159),$=n(63859),Q=n(44414),J=["Enter"," "],ee=["ArrowUp","PageDown","End"],te=[].concat(["ArrowDown","PageUp","Home"],ee),ne={ltr:[].concat(J,["ArrowRight"]),rtl:[].concat(J,["ArrowLeft"])},re={ltr:["ArrowLeft"],rtl:["ArrowRight"]},oe="Menu",ie=(0,A.createCollection)(oe),ae=a(ie,3),ue=ae[0],se=ae[1],ce=ae[2],le=(0,R.createContextScope)(oe,[ce,z.createPopperScope,W.createRovingFocusGroupScope]),fe=a(le,2),de=fe[0],pe=fe[1],he=(0,z.createPopperScope)(),ve=(0,W.createRovingFocusGroupScope)(),ge=de(oe),ye=a(ge,2),me=ye[0],be=ye[1],we=de(oe),Se=a(we,2),xe=Se[0],Pe=Se[1],Oe=function(e){var t=e.__scopeMenu,n=e.open,r=void 0!==n&&n,o=e.children,u=e.dir,s=e.onOpenChange,c=e.modal,l=void 0===c||c,f=he(t),d=C.useState(null),p=a(d,2),h=p[0],v=p[1],g=C.useRef(!1),y=(0,X.useCallbackRef)(s),m=(0,N.useDirection)(u);return C.useEffect((function(){var e=function(){g.current=!0,document.addEventListener("pointerdown",t,{capture:!0,once:!0}),document.addEventListener("pointermove",t,{capture:!0,once:!0})},t=function(){return g.current=!1};return document.addEventListener("keydown",e,{capture:!0}),function(){document.removeEventListener("keydown",e,{capture:!0}),document.removeEventListener("pointerdown",t,{capture:!0}),document.removeEventListener("pointermove",t,{capture:!0})}}),[]),(0,Q.jsx)(V.Root,i(i({},f),{},{children:(0,Q.jsx)(me,{scope:t,open:r,onOpenChange:y,content:h,onContentChange:v,children:(0,Q.jsx)(xe,{scope:t,onClose:C.useCallback((function(){return y(!1)}),[y]),isUsingKeyboardRef:g,dir:m,modal:l,children:o})})}))};Oe.displayName=oe;var ke=C.forwardRef((function(e,t){var n=e.__scopeMenu,r=o(e,s),a=he(n);return(0,Q.jsx)(V.Anchor,i(i(i({},a),r),{},{ref:t}))}));ke.displayName="MenuAnchor";var _e="MenuPortal",je=de(_e,{forceMount:void 0}),Ie=a(je,2),Te=Ie[0],Ee=Ie[1],Ce=function(e){var t=e.__scopeMenu,n=e.forceMount,r=e.children,o=e.container,i=be(_e,t);return(0,Q.jsx)(Te,{scope:t,forceMount:n,children:(0,Q.jsx)(K.Presence,{present:n||i.open,children:(0,Q.jsx)(H.Portal,{asChild:!0,container:o,children:r})})})};Ce.displayName=_e;var Me="MenuContent",Ae=de(Me),De=a(Ae,2),Re=De[0],Ne=De[1],Le=C.forwardRef((function(e,t){var n=Ee(Me,e.__scopeMenu),r=e.forceMount,a=void 0===r?n.forceMount:r,u=o(e,c),s=be(Me,e.__scopeMenu),l=Pe(Me,e.__scopeMenu);return(0,Q.jsx)(ue.Provider,{scope:e.__scopeMenu,children:(0,Q.jsx)(K.Presence,{present:a||s.open,children:(0,Q.jsx)(ue.Slot,{scope:e.__scopeMenu,children:l.modal?(0,Q.jsx)(Ue,i(i({},u),{},{ref:t})):(0,Q.jsx)(Fe,i(i({},u),{},{ref:t}))})})})})),Ue=C.forwardRef((function(e,t){var n=be(Me,e.__scopeMenu),r=C.useRef(null),o=(0,D.useComposedRefs)(t,r);return C.useEffect((function(){var e=r.current;if(e)return(0,Z.hideOthers)(e)}),[]),(0,Q.jsx)(Be,i(i({},e),{},{ref:o,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:(0,M.composeEventHandlers)(e.onFocusOutside,(function(e){return e.preventDefault()}),{checkForDefaultPrevented:!1}),onDismiss:function(){return n.onOpenChange(!1)}}))})),Fe=C.forwardRef((function(e,t){var n=be(Me,e.__scopeMenu);return(0,Q.jsx)(Be,i(i({},e),{},{ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:function(){return n.onOpenChange(!1)}}))})),Be=C.forwardRef((function(e,t){var n=e.__scopeMenu,r=e.loop,s=void 0!==r&&r,c=e.trapFocus,f=e.onOpenAutoFocus,d=e.onCloseAutoFocus,p=e.disableOutsidePointerEvents,h=e.onEntryFocus,v=e.onEscapeKeyDown,g=e.onPointerDownOutside,y=e.onFocusOutside,m=e.onInteractOutside,b=e.onDismiss,w=e.disableOutsideScroll,S=o(e,l),x=be(Me,n),P=Pe(Me,n),O=he(n),k=ve(n),_=se(n),j=C.useState(null),I=a(j,2),T=I[0],E=I[1],A=C.useRef(null),R=(0,D.useComposedRefs)(t,A,x.onContentChange),N=C.useRef(0),B=C.useRef(""),z=C.useRef(0),H=C.useRef(null),K=C.useRef("right"),G=C.useRef(0),W=w?$.RemoveScroll:C.Fragment,X=w?{as:Y.Slot,allowPinchZoom:!0}:void 0,Z=function(e){var t,n,r=B.current+e,o=_().filter((function(e){return!e.disabled})),i=document.activeElement,a=null===(t=o.find((function(e){return e.ref.current===i})))||void 0===t?void 0:t.textValue,u=function(e,t,n){var r=t.length>1&&Array.from(t).every((function(e){return e===t[0]})),o=r?t[0]:t,i=n?e.indexOf(n):-1,a=(u=e,s=Math.max(i,0),u.map((function(e,t){return u[(s+t)%u.length]})));var u,s;1===o.length&&(a=a.filter((function(e){return e!==n})));var c=a.find((function(e){return e.toLowerCase().startsWith(o.toLowerCase())}));return c!==n?c:void 0}(o.map((function(e){return e.textValue})),r,a),s=null===(n=o.find((function(e){return e.textValue===u})))||void 0===n?void 0:n.ref.current;!function e(t){B.current=t,window.clearTimeout(N.current),""!==t&&(N.current=window.setTimeout((function(){return e("")}),1e3))}(r),s&&setTimeout((function(){return s.focus()}))};C.useEffect((function(){return function(){return window.clearTimeout(N.current)}}),[]),(0,U.useFocusGuards)();var J=C.useCallback((function(e){var t,n;return K.current===(null===(t=H.current)||void 0===t?void 0:t.side)&&function(e,t){if(!t)return!1;var n={x:e.clientX,y:e.clientY};return function(e,t){for(var n=e.x,r=e.y,o=!1,i=0,a=t.length-1;i<t.length;a=i++){var u=t[i].x,s=t[i].y,c=t[a].x,l=t[a].y;s>r!==l>r&&n<(c-u)*(r-s)/(l-s)+u&&(o=!o)}return o}(n,t)}(e,null===(n=H.current)||void 0===n?void 0:n.area)}),[]);return(0,Q.jsx)(Re,{scope:n,searchRef:B,onItemEnter:C.useCallback((function(e){J(e)&&e.preventDefault()}),[J]),onItemLeave:C.useCallback((function(e){var t;J(e)||(null===(t=A.current)||void 0===t||t.focus(),E(null))}),[J]),onTriggerLeave:C.useCallback((function(e){J(e)&&e.preventDefault()}),[J]),pointerGraceTimerRef:z,onPointerGraceIntentChange:C.useCallback((function(e){H.current=e}),[]),children:(0,Q.jsx)(W,i(i({},X),{},{children:(0,Q.jsx)(F.FocusScope,{asChild:!0,trapped:c,onMountAutoFocus:(0,M.composeEventHandlers)(f,(function(e){var t;e.preventDefault(),null===(t=A.current)||void 0===t||t.focus({preventScroll:!0})})),onUnmountAutoFocus:d,children:(0,Q.jsx)(L.DismissableLayer,{asChild:!0,disableOutsidePointerEvents:p,onEscapeKeyDown:v,onPointerDownOutside:g,onFocusOutside:y,onInteractOutside:m,onDismiss:b,children:(0,Q.jsx)(q.Root,i(i({asChild:!0},k),{},{dir:P.dir,orientation:"vertical",loop:s,currentTabStopId:T,onCurrentTabStopIdChange:E,onEntryFocus:(0,M.composeEventHandlers)(h,(function(e){P.isUsingKeyboardRef.current||e.preventDefault()})),preventScrollOnEntryFocus:!0,children:(0,Q.jsx)(V.Content,i(i(i({role:"menu","aria-orientation":"vertical","data-state":wt(x.open),"data-radix-menu-content":"",dir:P.dir},O),S),{},{ref:R,style:i({outline:"none"},S.style),onKeyDown:(0,M.composeEventHandlers)(S.onKeyDown,(function(e){var t=e.target.closest("[data-radix-menu-content]")===e.currentTarget,n=e.ctrlKey||e.altKey||e.metaKey,r=1===e.key.length;t&&("Tab"===e.key&&e.preventDefault(),!n&&r&&Z(e.key));var o=A.current;if(e.target===o&&te.includes(e.key)){e.preventDefault();var i=_().filter((function(e){return!e.disabled})).map((function(e){return e.ref.current}));ee.includes(e.key)&&i.reverse(),function(e){var t,n=document.activeElement,r=u(e);try{for(r.s();!(t=r.n()).done;){var o=t.value;if(o===n)return;if(o.focus(),document.activeElement!==n)return}}catch(i){r.e(i)}finally{r.f()}}(i)}})),onBlur:(0,M.composeEventHandlers)(e.onBlur,(function(e){e.currentTarget.contains(e.target)||(window.clearTimeout(N.current),B.current="")})),onPointerMove:(0,M.composeEventHandlers)(e.onPointerMove,Pt((function(e){var t=e.target,n=G.current!==e.clientX;if(e.currentTarget.contains(t)&&n){var r=e.clientX>G.current?"right":"left";K.current=r,G.current=e.clientX}})))}))}))})})}))})}));Le.displayName=Me;var Ve=C.forwardRef((function(e,t){e.__scopeMenu;var n=o(e,f);return(0,Q.jsx)(G.Primitive.div,i(i({role:"group"},n),{},{ref:t}))}));Ve.displayName="MenuGroup";var ze=C.forwardRef((function(e,t){e.__scopeMenu;var n=o(e,d);return(0,Q.jsx)(G.Primitive.div,i(i({},n),{},{ref:t}))}));ze.displayName="MenuLabel";var He="MenuItem",Ke="menu.itemSelect",Ge=C.forwardRef((function(e,t){var n=e.disabled,r=void 0!==n&&n,a=e.onSelect,u=o(e,p),s=C.useRef(null),c=Pe(He,e.__scopeMenu),l=Ne(He,e.__scopeMenu),f=(0,D.useComposedRefs)(t,s),d=C.useRef(!1);return(0,Q.jsx)(qe,i(i({},u),{},{ref:f,disabled:r,onClick:(0,M.composeEventHandlers)(e.onClick,(function(){var e=s.current;if(!r&&e){var t=new CustomEvent(Ke,{bubbles:!0,cancelable:!0});e.addEventListener(Ke,(function(e){return null===a||void 0===a?void 0:a(e)}),{once:!0}),(0,G.dispatchDiscreteCustomEvent)(e,t),t.defaultPrevented?d.current=!1:c.onClose()}})),onPointerDown:function(t){var n;null===(n=e.onPointerDown)||void 0===n||n.call(e,t),d.current=!0},onPointerUp:(0,M.composeEventHandlers)(e.onPointerUp,(function(e){var t;d.current||null===(t=e.currentTarget)||void 0===t||t.click()})),onKeyDown:(0,M.composeEventHandlers)(e.onKeyDown,(function(e){var t=""!==l.searchRef.current;r||t&&" "===e.key||J.includes(e.key)&&(e.currentTarget.click(),e.preventDefault())}))}))}));Ge.displayName=He;var qe=C.forwardRef((function(e,t){var n=e.__scopeMenu,r=e.disabled,u=void 0!==r&&r,s=e.textValue,c=o(e,h),l=Ne(He,n),f=ve(n),d=C.useRef(null),p=(0,D.useComposedRefs)(t,d),v=C.useState(!1),g=a(v,2),y=g[0],m=g[1],b=C.useState(""),w=a(b,2),S=w[0],x=w[1];return C.useEffect((function(){var e,t=d.current;t&&x((null!==(e=t.textContent)&&void 0!==e?e:"").trim())}),[c.children]),(0,Q.jsx)(ue.ItemSlot,{scope:n,disabled:u,textValue:null!==s&&void 0!==s?s:S,children:(0,Q.jsx)(q.Item,i(i({asChild:!0},f),{},{focusable:!u,children:(0,Q.jsx)(G.Primitive.div,i(i({role:"menuitem","data-highlighted":y?"":void 0,"aria-disabled":u||void 0,"data-disabled":u?"":void 0},c),{},{ref:p,onPointerMove:(0,M.composeEventHandlers)(e.onPointerMove,Pt((function(e){u?l.onItemLeave(e):(l.onItemEnter(e),e.defaultPrevented||e.currentTarget.focus({preventScroll:!0}))}))),onPointerLeave:(0,M.composeEventHandlers)(e.onPointerLeave,Pt((function(e){return l.onItemLeave(e)}))),onFocus:(0,M.composeEventHandlers)(e.onFocus,(function(){return m(!0)})),onBlur:(0,M.composeEventHandlers)(e.onBlur,(function(){return m(!1)}))}))}))})})),We=C.forwardRef((function(e,t){var n=e.checked,r=void 0!==n&&n,a=e.onCheckedChange,u=o(e,v);return(0,Q.jsx)(it,{scope:e.__scopeMenu,checked:r,children:(0,Q.jsx)(Ge,i(i({role:"menuitemcheckbox","aria-checked":St(r)?"mixed":r},u),{},{ref:t,"data-state":xt(r),onSelect:(0,M.composeEventHandlers)(u.onSelect,(function(){return null===a||void 0===a?void 0:a(!!St(r)||!r)}),{checkForDefaultPrevented:!1})}))})}));We.displayName="MenuCheckboxItem";var Ye="MenuRadioGroup",Xe=de(Ye,{value:void 0,onValueChange:function(){}}),Ze=a(Xe,2),$e=Ze[0],Qe=Ze[1],Je=C.forwardRef((function(e,t){var n=e.value,r=e.onValueChange,a=o(e,g),u=(0,X.useCallbackRef)(r);return(0,Q.jsx)($e,{scope:e.__scopeMenu,value:n,onValueChange:u,children:(0,Q.jsx)(Ve,i(i({},a),{},{ref:t}))})}));Je.displayName=Ye;var et="MenuRadioItem",tt=C.forwardRef((function(e,t){var n=e.value,r=o(e,y),a=Qe(et,e.__scopeMenu),u=n===a.value;return(0,Q.jsx)(it,{scope:e.__scopeMenu,checked:u,children:(0,Q.jsx)(Ge,i(i({role:"menuitemradio","aria-checked":u},r),{},{ref:t,"data-state":xt(u),onSelect:(0,M.composeEventHandlers)(r.onSelect,(function(){var e;return null===(e=a.onValueChange)||void 0===e?void 0:e.call(a,n)}),{checkForDefaultPrevented:!1})}))})}));tt.displayName=et;var nt="MenuItemIndicator",rt=de(nt,{checked:!1}),ot=a(rt,2),it=ot[0],at=ot[1],ut=C.forwardRef((function(e,t){var n=e.__scopeMenu,r=e.forceMount,a=o(e,m),u=at(nt,n);return(0,Q.jsx)(K.Presence,{present:r||St(u.checked)||!0===u.checked,children:(0,Q.jsx)(G.Primitive.span,i(i({},a),{},{ref:t,"data-state":xt(u.checked)}))})}));ut.displayName=nt;var st=C.forwardRef((function(e,t){e.__scopeMenu;var n=o(e,b);return(0,Q.jsx)(G.Primitive.div,i(i({role:"separator","aria-orientation":"horizontal"},n),{},{ref:t}))}));st.displayName="MenuSeparator";var ct=C.forwardRef((function(e,t){var n=e.__scopeMenu,r=o(e,w),a=he(n);return(0,Q.jsx)(V.Arrow,i(i(i({},a),r),{},{ref:t}))}));ct.displayName="MenuArrow";var lt="MenuSub",ft=de(lt),dt=a(ft,2),pt=dt[0],ht=dt[1],vt=function(e){var t=e.__scopeMenu,n=e.children,r=e.open,o=void 0!==r&&r,u=e.onOpenChange,s=be(lt,t),c=he(t),l=C.useState(null),f=a(l,2),d=f[0],p=f[1],h=C.useState(null),v=a(h,2),g=v[0],y=v[1],m=(0,X.useCallbackRef)(u);return C.useEffect((function(){return!1===s.open&&m(!1),function(){return m(!1)}}),[s.open,m]),(0,Q.jsx)(V.Root,i(i({},c),{},{children:(0,Q.jsx)(me,{scope:t,open:o,onOpenChange:m,content:g,onContentChange:y,children:(0,Q.jsx)(pt,{scope:t,contentId:(0,B.useId)(),triggerId:(0,B.useId)(),trigger:d,onTriggerChange:p,children:n})})}))};vt.displayName=lt;var gt="MenuSubTrigger",yt=C.forwardRef((function(e,t){var n=be(gt,e.__scopeMenu),r=Pe(gt,e.__scopeMenu),o=ht(gt,e.__scopeMenu),a=Ne(gt,e.__scopeMenu),u=C.useRef(null),s=a.pointerGraceTimerRef,c=a.onPointerGraceIntentChange,l={__scopeMenu:e.__scopeMenu},f=C.useCallback((function(){u.current&&window.clearTimeout(u.current),u.current=null}),[]);return C.useEffect((function(){return f}),[f]),C.useEffect((function(){var e=s.current;return function(){window.clearTimeout(e),c(null)}}),[s,c]),(0,Q.jsx)(ke,i(i({asChild:!0},l),{},{children:(0,Q.jsx)(qe,i(i({id:o.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":o.contentId,"data-state":wt(n.open)},e),{},{ref:(0,D.composeRefs)(t,o.onTriggerChange),onClick:function(t){var r;null===(r=e.onClick)||void 0===r||r.call(e,t),e.disabled||t.defaultPrevented||(t.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:(0,M.composeEventHandlers)(e.onPointerMove,Pt((function(t){a.onItemEnter(t),t.defaultPrevented||e.disabled||n.open||u.current||(a.onPointerGraceIntentChange(null),u.current=window.setTimeout((function(){n.onOpenChange(!0),f()}),100))}))),onPointerLeave:(0,M.composeEventHandlers)(e.onPointerLeave,Pt((function(e){var t;f();var r=null===(t=n.content)||void 0===t?void 0:t.getBoundingClientRect();if(r){var o,i=null===(o=n.content)||void 0===o?void 0:o.dataset.side,u="right"===i,c=u?-5:5,l=r[u?"left":"right"],d=r[u?"right":"left"];a.onPointerGraceIntentChange({area:[{x:e.clientX+c,y:e.clientY},{x:l,y:r.top},{x:d,y:r.top},{x:d,y:r.bottom},{x:l,y:r.bottom}],side:i}),window.clearTimeout(s.current),s.current=window.setTimeout((function(){return a.onPointerGraceIntentChange(null)}),300)}else{if(a.onTriggerLeave(e),e.defaultPrevented)return;a.onPointerGraceIntentChange(null)}}))),onKeyDown:(0,M.composeEventHandlers)(e.onKeyDown,(function(t){var o,i=""!==a.searchRef.current;e.disabled||i&&" "===t.key||ne[r.dir].includes(t.key)&&(n.onOpenChange(!0),null===(o=n.content)||void 0===o||o.focus(),t.preventDefault())}))}))}))}));yt.displayName=gt;var mt="MenuSubContent",bt=C.forwardRef((function(e,t){var n=Ee(Me,e.__scopeMenu),r=e.forceMount,a=void 0===r?n.forceMount:r,u=o(e,S),s=be(Me,e.__scopeMenu),c=Pe(Me,e.__scopeMenu),l=ht(mt,e.__scopeMenu),f=C.useRef(null),d=(0,D.useComposedRefs)(t,f);return(0,Q.jsx)(ue.Provider,{scope:e.__scopeMenu,children:(0,Q.jsx)(K.Presence,{present:a||s.open,children:(0,Q.jsx)(ue.Slot,{scope:e.__scopeMenu,children:(0,Q.jsx)(Be,i(i({id:l.contentId,"aria-labelledby":l.triggerId},u),{},{ref:d,align:"start",side:"rtl"===c.dir?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:function(e){var t;c.isUsingKeyboardRef.current&&(null===(t=f.current)||void 0===t||t.focus()),e.preventDefault()},onCloseAutoFocus:function(e){return e.preventDefault()},onFocusOutside:(0,M.composeEventHandlers)(e.onFocusOutside,(function(e){e.target!==l.trigger&&s.onOpenChange(!1)})),onEscapeKeyDown:(0,M.composeEventHandlers)(e.onEscapeKeyDown,(function(e){c.onClose(),e.preventDefault()})),onKeyDown:(0,M.composeEventHandlers)(e.onKeyDown,(function(e){var t,n=e.currentTarget.contains(e.target),r=re[c.dir].includes(e.key);n&&r&&(s.onOpenChange(!1),null===(t=l.trigger)||void 0===t||t.focus(),e.preventDefault())}))}))})})})}));function wt(e){return e?"open":"closed"}function St(e){return"indeterminate"===e}function xt(e){return St(e)?"indeterminate":e?"checked":"unchecked"}function Pt(e){return function(t){return"mouse"===t.pointerType?e(t):void 0}}bt.displayName=mt;var Ot=Oe,kt=ke,_t=Ce,jt=Le,It=Ve,Tt=ze,Et=Ge,Ct=We,Mt=Je,At=tt,Dt=ut,Rt=st,Nt=ct,Lt=vt,Ut=yt,Ft=bt},92263:function(e,t,n){"use strict";var r,o=n(91847).default,i=n(12897).default,a=n(85715).default,u=n(50883).default,s=["__scopePopover"],c=["__scopePopover"],l=["forceMount"],f=["__scopePopover","trapFocus","onOpenAutoFocus","onCloseAutoFocus","disableOutsidePointerEvents","onEscapeKeyDown","onPointerDownOutside","onFocusOutside","onInteractOutside"],d=["__scopePopover"],p=["__scopePopover"],h=Object.create,v=Object.defineProperty,g=Object.getOwnPropertyDescriptor,y=Object.getOwnPropertyNames,m=Object.getPrototypeOf,b=Object.prototype.hasOwnProperty,w=function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,i=u(y(t));try{var a=function(){var i=o.value;b.call(e,i)||i===n||v(e,i,{get:function(){return t[i]},enumerable:!(r=g(t,i))||r.enumerable})};for(i.s();!(o=i.n()).done;)a()}catch(s){i.e(s)}finally{i.f()}}return e},S=function(e,t,n){return n=null!=e?h(m(e)):{},w(!t&&e&&e.__esModule?n:v(n,"default",{value:e,enumerable:!0}),e)},x={};!function(e,t){for(var n in t)v(e,n,{get:t[n],enumerable:!0})}(x,{Anchor:function(){return me},Arrow:function(){return Pe},Close:function(){return xe},Content:function(){return Se},Popover:function(){return $},PopoverAnchor:function(){return J},PopoverArrow:function(){return ve},PopoverClose:function(){return he},PopoverContent:function(){return ce},PopoverPortal:function(){return ue},PopoverTrigger:function(){return te},Portal:function(){return we},Root:function(){return ye},Trigger:function(){return be},createPopoverScope:function(){return G}}),e.exports=(r=x,w(v({},"__esModule",{value:!0}),r));var P=S(n(9950)),O=n(98913),k=n(96269),_=n(98113),j=n(64320),I=n(8077),T=n(95011),E=n(56541),C=S(n(36964)),M=n(36964),A=n(66688),D=n(64905),R=n(5899),N=n(15798),L=n(3645),U=n(28159),F=n(63859),B=n(44414),V="Popover",z=(0,_.createContextScope)(V,[M.createPopperScope]),H=a(z,2),K=H[0],G=H[1],q=(0,M.createPopperScope)(),W=K(V),Y=a(W,2),X=Y[0],Z=Y[1],$=function(e){var t=e.__scopePopover,n=e.children,r=e.open,o=e.defaultOpen,u=e.onOpenChange,s=e.modal,c=void 0!==s&&s,l=q(t),f=P.useRef(null),d=P.useState(!1),p=a(d,2),h=p[0],v=p[1],g=(0,L.useControllableState)({prop:r,defaultProp:o,onChange:u}),y=a(g,2),m=y[0],b=void 0!==m&&m,w=y[1];return(0,B.jsx)(C.Root,i(i({},l),{},{children:(0,B.jsx)(X,{scope:t,contentId:(0,E.useId)(),triggerRef:f,open:b,onOpenChange:w,onOpenToggle:P.useCallback((function(){return w((function(e){return!e}))}),[w]),hasCustomAnchor:h,onCustomAnchorAdd:P.useCallback((function(){return v(!0)}),[]),onCustomAnchorRemove:P.useCallback((function(){return v(!1)}),[]),modal:c,children:n})}))};$.displayName=V;var Q="PopoverAnchor",J=P.forwardRef((function(e,t){var n=e.__scopePopover,r=o(e,s),a=Z(Q,n),u=q(n),c=a.onCustomAnchorAdd,l=a.onCustomAnchorRemove;return P.useEffect((function(){return c(),function(){return l()}}),[c,l]),(0,B.jsx)(C.Anchor,i(i(i({},u),r),{},{ref:t}))}));J.displayName=Q;var ee="PopoverTrigger",te=P.forwardRef((function(e,t){var n=e.__scopePopover,r=o(e,c),a=Z(ee,n),u=q(n),s=(0,k.useComposedRefs)(t,a.triggerRef),l=(0,B.jsx)(R.Primitive.button,i(i({type:"button","aria-haspopup":"dialog","aria-expanded":a.open,"aria-controls":a.contentId,"data-state":ge(a.open)},r),{},{ref:s,onClick:(0,O.composeEventHandlers)(e.onClick,a.onOpenToggle)}));return a.hasCustomAnchor?l:(0,B.jsx)(C.Anchor,i(i({asChild:!0},u),{},{children:l}))}));te.displayName=ee;var ne="PopoverPortal",re=K(ne,{forceMount:void 0}),oe=a(re,2),ie=oe[0],ae=oe[1],ue=function(e){var t=e.__scopePopover,n=e.forceMount,r=e.children,o=e.container,i=Z(ne,t);return(0,B.jsx)(ie,{scope:t,forceMount:n,children:(0,B.jsx)(D.Presence,{present:n||i.open,children:(0,B.jsx)(A.Portal,{asChild:!0,container:o,children:r})})})};ue.displayName=ne;var se="PopoverContent",ce=P.forwardRef((function(e,t){var n=ae(se,e.__scopePopover),r=e.forceMount,a=void 0===r?n.forceMount:r,u=o(e,l),s=Z(se,e.__scopePopover);return(0,B.jsx)(D.Presence,{present:a||s.open,children:s.modal?(0,B.jsx)(le,i(i({},u),{},{ref:t})):(0,B.jsx)(fe,i(i({},u),{},{ref:t}))})}));ce.displayName=se;var le=P.forwardRef((function(e,t){var n=Z(se,e.__scopePopover),r=P.useRef(null),o=(0,k.useComposedRefs)(t,r),a=P.useRef(!1);return P.useEffect((function(){var e=r.current;if(e)return(0,U.hideOthers)(e)}),[]),(0,B.jsx)(F.RemoveScroll,{as:N.Slot,allowPinchZoom:!0,children:(0,B.jsx)(de,i(i({},e),{},{ref:o,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:(0,O.composeEventHandlers)(e.onCloseAutoFocus,(function(e){var t;e.preventDefault(),a.current||null===(t=n.triggerRef.current)||void 0===t||t.focus()})),onPointerDownOutside:(0,O.composeEventHandlers)(e.onPointerDownOutside,(function(e){var t=e.detail.originalEvent,n=0===t.button&&!0===t.ctrlKey,r=2===t.button||n;a.current=r}),{checkForDefaultPrevented:!1}),onFocusOutside:(0,O.composeEventHandlers)(e.onFocusOutside,(function(e){return e.preventDefault()}),{checkForDefaultPrevented:!1})}))})})),fe=P.forwardRef((function(e,t){var n=Z(se,e.__scopePopover),r=P.useRef(!1),o=P.useRef(!1);return(0,B.jsx)(de,i(i({},e),{},{ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:function(t){var i,a;(null===(i=e.onCloseAutoFocus)||void 0===i||i.call(e,t),t.defaultPrevented)||(r.current||null===(a=n.triggerRef.current)||void 0===a||a.focus(),t.preventDefault());r.current=!1,o.current=!1},onInteractOutside:function(t){var i,a;null===(i=e.onInteractOutside)||void 0===i||i.call(e,t),t.defaultPrevented||(r.current=!0,"pointerdown"===t.detail.originalEvent.type&&(o.current=!0));var u=t.target;(null===(a=n.triggerRef.current)||void 0===a?void 0:a.contains(u))&&t.preventDefault(),"focusin"===t.detail.originalEvent.type&&o.current&&t.preventDefault()}}))})),de=P.forwardRef((function(e,t){var n=e.__scopePopover,r=e.trapFocus,a=e.onOpenAutoFocus,u=e.onCloseAutoFocus,s=e.disableOutsidePointerEvents,c=e.onEscapeKeyDown,l=e.onPointerDownOutside,d=e.onFocusOutside,p=e.onInteractOutside,h=o(e,f),v=Z(se,n),g=q(n);return(0,I.useFocusGuards)(),(0,B.jsx)(T.FocusScope,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:a,onUnmountAutoFocus:u,children:(0,B.jsx)(j.DismissableLayer,{asChild:!0,disableOutsidePointerEvents:s,onInteractOutside:p,onEscapeKeyDown:c,onPointerDownOutside:l,onFocusOutside:d,onDismiss:function(){return v.onOpenChange(!1)},children:(0,B.jsx)(C.Content,i(i(i({"data-state":ge(v.open),role:"dialog",id:v.contentId},g),h),{},{ref:t,style:i(i({},h.style),{"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"})}))})})})),pe="PopoverClose",he=P.forwardRef((function(e,t){var n=e.__scopePopover,r=o(e,d),a=Z(pe,n);return(0,B.jsx)(R.Primitive.button,i(i({type:"button"},r),{},{ref:t,onClick:(0,O.composeEventHandlers)(e.onClick,(function(){return a.onOpenChange(!1)}))}))}));he.displayName=pe;var ve=P.forwardRef((function(e,t){var n=e.__scopePopover,r=o(e,p),a=q(n);return(0,B.jsx)(C.Arrow,i(i(i({},a),r),{},{ref:t}))}));function ge(e){return e?"open":"closed"}ve.displayName="PopoverArrow";var ye=$,me=J,be=te,we=ue,Se=ce,xe=he,Pe=ve},36964:function(e,t,n){"use strict";var r,o=n(43693).default,i=n(12897).default,a=n(91847).default,u=n(85715).default,s=n(50883).default,c=["__scopePopper","virtualRef"],l=["__scopePopper","side","sideOffset","align","alignOffset","arrowPadding","avoidCollisions","collisionBoundary","collisionPadding","sticky","hideWhenDetached","updatePositionStrategy","onPlaced"],f=["__scopePopper"],d=Object.create,p=Object.defineProperty,h=Object.getOwnPropertyDescriptor,v=Object.getOwnPropertyNames,g=Object.getPrototypeOf,y=Object.prototype.hasOwnProperty,m=function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,i=s(v(t));try{var a=function(){var i=o.value;y.call(e,i)||i===n||p(e,i,{get:function(){return t[i]},enumerable:!(r=h(t,i))||r.enumerable})};for(i.s();!(o=i.n()).done;)a()}catch(u){i.e(u)}finally{i.f()}}return e},b=function(e,t,n){return n=null!=e?d(g(e)):{},m(!t&&e&&e.__esModule?n:p(n,"default",{value:e,enumerable:!0}),e)},w={};!function(e,t){for(var n in t)p(e,n,{get:t[n],enumerable:!0})}(w,{ALIGN_OPTIONS:function(){return M},Anchor:function(){return oe},Arrow:function(){return ae},Content:function(){return ie},Popper:function(){return z},PopperAnchor:function(){return K},PopperArrow:function(){return J},PopperContent:function(){return Z},Root:function(){return re},SIDE_OPTIONS:function(){return C},createPopperScope:function(){return L}}),e.exports=(r=w,m(p({},"__esModule",{value:!0}),r));var S=b(n(9950)),x=n(13472),P=b(n(25963)),O=n(96269),k=n(98113),_=n(5899),j=n(64793),I=n(67066),T=n(92775),E=n(44414),C=["top","right","bottom","left"],M=["start","center","end"],A="Popper",D=(0,k.createContextScope)(A),R=u(D,2),N=R[0],L=R[1],U=N(A),F=u(U,2),B=F[0],V=F[1],z=function(e){var t=e.__scopePopper,n=e.children,r=S.useState(null),o=u(r,2),i=o[0],a=o[1];return(0,E.jsx)(B,{scope:t,anchor:i,onAnchorChange:a,children:n})};z.displayName=A;var H="PopperAnchor",K=S.forwardRef((function(e,t){var n=e.__scopePopper,r=e.virtualRef,o=a(e,c),u=V(H,n),s=S.useRef(null),l=(0,O.useComposedRefs)(t,s);return S.useEffect((function(){u.onAnchorChange((null===r||void 0===r?void 0:r.current)||s.current)})),r?null:(0,E.jsx)(_.Primitive.div,i(i({},o),{},{ref:l}))}));K.displayName=H;var G="PopperContent",q=N(G),W=u(q,2),Y=W[0],X=W[1],Z=S.forwardRef((function(e,t){var n,r,s,c,f,d,p,h,v=e.__scopePopper,g=e.side,y=void 0===g?"bottom":g,m=e.sideOffset,b=void 0===m?0:m,w=e.align,P=void 0===w?"center":w,k=e.alignOffset,C=void 0===k?0:k,M=e.arrowPadding,A=void 0===M?0:M,D=e.avoidCollisions,R=void 0===D||D,N=e.collisionBoundary,L=void 0===N?[]:N,U=e.collisionPadding,F=void 0===U?0:U,B=e.sticky,z=void 0===B?"partial":B,H=e.hideWhenDetached,K=void 0!==H&&H,q=e.updatePositionStrategy,W=void 0===q?"optimized":q,X=e.onPlaced,Z=a(e,l),$=V(G,v),Q=S.useState(null),J=u(Q,2),re=J[0],oe=J[1],ie=(0,O.useComposedRefs)(t,(function(e){return oe(e)})),ae=S.useState(null),ue=u(ae,2),se=ue[0],ce=ue[1],le=(0,T.useSize)(se),fe=null!==(n=null===le||void 0===le?void 0:le.width)&&void 0!==n?n:0,de=null!==(r=null===le||void 0===le?void 0:le.height)&&void 0!==r?r:0,pe=y+("center"!==P?"-"+P:""),he="number"===typeof F?F:i({top:0,right:0,bottom:0,left:0},F),ve=Array.isArray(L)?L:[L],ge=ve.length>0,ye={padding:he,boundary:ve.filter(ee),altBoundary:ge},me=(0,x.useFloating)({strategy:"fixed",placement:pe,whileElementsMounted:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return x.autoUpdate.apply(void 0,t.concat([{animationFrame:"always"===W}]))},elements:{reference:$.anchor},middleware:[(0,x.offset)({mainAxis:b+de,alignmentAxis:C}),R&&(0,x.shift)(i({mainAxis:!0,crossAxis:!1,limiter:"partial"===z?(0,x.limitShift)():void 0},ye)),R&&(0,x.flip)(i({},ye)),(0,x.size)(i(i({},ye),{},{apply:function(e){var t=e.elements,n=e.rects,r=e.availableWidth,o=e.availableHeight,i=n.reference,a=i.width,u=i.height,s=t.floating.style;s.setProperty("--radix-popper-available-width","".concat(r,"px")),s.setProperty("--radix-popper-available-height","".concat(o,"px")),s.setProperty("--radix-popper-anchor-width","".concat(a,"px")),s.setProperty("--radix-popper-anchor-height","".concat(u,"px"))}})),se&&(0,x.arrow)({element:se,padding:A}),te({arrowWidth:fe,arrowHeight:de}),K&&(0,x.hide)(i({strategy:"referenceHidden"},ye))]}),be=me.refs,we=me.floatingStyles,Se=me.placement,xe=me.isPositioned,Pe=me.middlewareData,Oe=ne(Se),ke=u(Oe,2),_e=ke[0],je=ke[1],Ie=(0,j.useCallbackRef)(X);(0,I.useLayoutEffect)((function(){xe&&(null===Ie||void 0===Ie||Ie())}),[xe,Ie]);var Te=null===(s=Pe.arrow)||void 0===s?void 0:s.x,Ee=null===(c=Pe.arrow)||void 0===c?void 0:c.y,Ce=0!==(null===(f=Pe.arrow)||void 0===f?void 0:f.centerOffset),Me=S.useState(),Ae=u(Me,2),De=Ae[0],Re=Ae[1];return(0,I.useLayoutEffect)((function(){re&&Re(window.getComputedStyle(re).zIndex)}),[re]),(0,E.jsx)("div",{ref:be.setFloating,"data-radix-popper-content-wrapper":"",style:i(i({},we),{},o({transform:xe?we.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:De},"--radix-popper-transform-origin",[null===(d=Pe.transformOrigin)||void 0===d?void 0:d.x,null===(p=Pe.transformOrigin)||void 0===p?void 0:p.y].join(" ")),(null===(h=Pe.hide)||void 0===h?void 0:h.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}),dir:e.dir,children:(0,E.jsx)(Y,{scope:v,placedSide:_e,onArrowChange:ce,arrowX:Te,arrowY:Ee,shouldHideArrow:Ce,children:(0,E.jsx)(_.Primitive.div,i(i({"data-side":_e,"data-align":je},Z),{},{ref:ie,style:i(i({},Z.style),{},{animation:xe?void 0:"none"})}))})})}));Z.displayName=G;var $="PopperArrow",Q={top:"bottom",right:"left",bottom:"top",left:"right"},J=S.forwardRef((function(e,t){var n=e.__scopePopper,r=a(e,f),u=X($,n),s=Q[u.placedSide];return(0,E.jsx)("span",{ref:u.onArrowChange,style:o(o(o(o({position:"absolute",left:u.arrowX,top:u.arrowY},s,0),"transformOrigin",{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[u.placedSide]),"transform",{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[u.placedSide]),"visibility",u.shouldHideArrow?"hidden":void 0),children:(0,E.jsx)(P.Root,i(i({},r),{},{ref:t,style:i(i({},r.style),{},{display:"block"})}))})}));function ee(e){return null!==e}J.displayName=$;var te=function(e){return{name:"transformOrigin",options:e,fn:function(t){var n,r,o,i,a,s=t.placement,c=t.rects,l=t.middlewareData,f=0!==(null===(n=l.arrow)||void 0===n?void 0:n.centerOffset),d=f?0:e.arrowWidth,p=f?0:e.arrowHeight,h=ne(s),v=u(h,2),g=v[0],y={start:"0%",center:"50%",end:"100%"}[v[1]],m=(null!==(r=null===(o=l.arrow)||void 0===o?void 0:o.x)&&void 0!==r?r:0)+d/2,b=(null!==(i=null===(a=l.arrow)||void 0===a?void 0:a.y)&&void 0!==i?i:0)+p/2,w="",S="";return"bottom"===g?(w=f?y:"".concat(m,"px"),S="".concat(-p,"px")):"top"===g?(w=f?y:"".concat(m,"px"),S="".concat(c.floating.height+p,"px")):"right"===g?(w="".concat(-p,"px"),S=f?y:"".concat(b,"px")):"left"===g&&(w="".concat(c.floating.width+p,"px"),S=f?y:"".concat(b,"px")),{data:{x:w,y:S}}}}};function ne(e){var t=e.split("-"),n=u(t,2),r=n[0],o=n[1];return[r,void 0===o?"center":o]}var re=z,oe=K,ie=Z,ae=J},66688:function(e,t,n){"use strict";var r,o=n(12897).default,i=n(85715).default,a=n(91847).default,u=n(50883).default,s=["container"],c=Object.create,l=Object.defineProperty,f=Object.getOwnPropertyDescriptor,d=Object.getOwnPropertyNames,p=Object.getPrototypeOf,h=Object.prototype.hasOwnProperty,v=function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,i=u(d(t));try{var a=function(){var i=o.value;h.call(e,i)||i===n||l(e,i,{get:function(){return t[i]},enumerable:!(r=f(t,i))||r.enumerable})};for(i.s();!(o=i.n()).done;)a()}catch(s){i.e(s)}finally{i.f()}}return e},g=function(e,t,n){return n=null!=e?c(p(e)):{},v(!t&&e&&e.__esModule?n:l(n,"default",{value:e,enumerable:!0}),e)},y={};!function(e,t){for(var n in t)l(e,n,{get:t[n],enumerable:!0})}(y,{Portal:function(){return P},Root:function(){return O}}),e.exports=(r=y,v(l({},"__esModule",{value:!0}),r));var m=g(n(9950)),b=g(n(17119)),w=n(5899),S=n(67066),x=n(44414),P=m.forwardRef((function(e,t){var n,r=e.container,u=a(e,s),c=m.useState(!1),l=i(c,2),f=l[0],d=l[1];(0,S.useLayoutEffect)((function(){return d(!0)}),[]);var p=r||f&&(null===globalThis||void 0===globalThis||null===(n=globalThis.document)||void 0===n?void 0:n.body);return p?b.default.createPortal((0,x.jsx)(w.Primitive.div,o(o({},u),{},{ref:t})),p):null}));P.displayName="Portal";var O=P},64905:function(e,t,n){"use strict";var r,o=n(85715).default,i=n(50883).default,a=Object.create,u=Object.defineProperty,s=Object.getOwnPropertyDescriptor,c=Object.getOwnPropertyNames,l=Object.getPrototypeOf,f=Object.prototype.hasOwnProperty,d=function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,a=i(c(t));try{var l=function(){var i=o.value;f.call(e,i)||i===n||u(e,i,{get:function(){return t[i]},enumerable:!(r=s(t,i))||r.enumerable})};for(a.s();!(o=a.n()).done;)l()}catch(d){a.e(d)}finally{a.f()}}return e},p=function(e,t,n){return n=null!=e?a(l(e)):{},d(!t&&e&&e.__esModule?n:u(n,"default",{value:e,enumerable:!0}),e)},h={};!function(e,t){for(var n in t)u(e,n,{get:t[n],enumerable:!0})}(h,{Presence:function(){return b}}),e.exports=(r=h,d(u({},"__esModule",{value:!0}),r));var v=p(n(9950)),g=n(96269),y=n(67066),m=p(n(9950));var b=function(e){var t=e.present,n=e.children,r=function(e){var t=v.useState(),n=o(t,2),r=n[0],i=n[1],a=v.useRef({}),u=v.useRef(e),s=v.useRef("none"),c=e?"mounted":"unmounted",l=function(e,t){return m.useReducer((function(e,n){var r=t[e][n];return null!==r&&void 0!==r?r:e}),e)}(c,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}}),f=o(l,2),d=f[0],p=f[1];return v.useEffect((function(){var e=w(a.current);s.current="mounted"===d?e:"none"}),[d]),(0,y.useLayoutEffect)((function(){var t=a.current,n=u.current;if(n!==e){var r=s.current,o=w(t);if(e)p("MOUNT");else if("none"===o||"none"===(null===t||void 0===t?void 0:t.display))p("UNMOUNT");else{p(n&&r!==o?"ANIMATION_OUT":"UNMOUNT")}u.current=e}}),[e,p]),(0,y.useLayoutEffect)((function(){if(r){var e,t,n=null!==(e=r.ownerDocument.defaultView)&&void 0!==e?e:window,o=function(e){var o=w(a.current).includes(e.animationName);if(e.target===r&&o&&(p("ANIMATION_END"),!u.current)){var i=r.style.animationFillMode;r.style.animationFillMode="forwards",t=n.setTimeout((function(){"forwards"===r.style.animationFillMode&&(r.style.animationFillMode=i)}))}},i=function(e){e.target===r&&(s.current=w(a.current))};return r.addEventListener("animationstart",i),r.addEventListener("animationcancel",o),r.addEventListener("animationend",o),function(){n.clearTimeout(t),r.removeEventListener("animationstart",i),r.removeEventListener("animationcancel",o),r.removeEventListener("animationend",o)}}p("ANIMATION_END")}),[r,p]),{isPresent:["mounted","unmountSuspended"].includes(d),ref:v.useCallback((function(e){e&&(a.current=getComputedStyle(e)),i(e)}),[])}}(t),i="function"===typeof n?n({present:r.isPresent}):v.Children.only(n),a=(0,g.useComposedRefs)(r.ref,function(e){var t,n,r=null===(t=Object.getOwnPropertyDescriptor(e.props,"ref"))||void 0===t?void 0:t.get,o=r&&"isReactWarning"in r&&r.isReactWarning;if(o)return e.ref;if(r=null===(n=Object.getOwnPropertyDescriptor(e,"ref"))||void 0===n?void 0:n.get,o=r&&"isReactWarning"in r&&r.isReactWarning)return e.props.ref;return e.props.ref||e.ref}(i));return"function"===typeof n||r.isPresent?v.cloneElement(i,{ref:a}):null};function w(e){return(null===e||void 0===e?void 0:e.animationName)||"none"}b.displayName="Presence"},5899:function(e,t,n){"use strict";var r,o=n(43693).default,i=n(12897).default,a=n(91847).default,u=n(50883).default,s=["asChild"],c=Object.create,l=Object.defineProperty,f=Object.getOwnPropertyDescriptor,d=Object.getOwnPropertyNames,p=Object.getPrototypeOf,h=Object.prototype.hasOwnProperty,v=function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,i=u(d(t));try{var a=function(){var i=o.value;h.call(e,i)||i===n||l(e,i,{get:function(){return t[i]},enumerable:!(r=f(t,i))||r.enumerable})};for(i.s();!(o=i.n()).done;)a()}catch(s){i.e(s)}finally{i.f()}}return e},g=function(e,t,n){return n=null!=e?c(p(e)):{},v(!t&&e&&e.__esModule?n:l(n,"default",{value:e,enumerable:!0}),e)},y={};!function(e,t){for(var n in t)l(e,n,{get:t[n],enumerable:!0})}(y,{Primitive:function(){return x},Root:function(){return O},dispatchDiscreteCustomEvent:function(){return P}}),e.exports=(r=y,v(l({},"__esModule",{value:!0}),r));var m=g(n(9950)),b=g(n(17119)),w=n(15798),S=n(44414),x=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"].reduce((function(e,t){var n=m.forwardRef((function(e,n){var r=e.asChild,o=a(e,s),u=r?w.Slot:t;return"undefined"!==typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,S.jsx)(u,i(i({},o),{},{ref:n}))}));return n.displayName="Primitive.".concat(t),i(i({},e),{},o({},t,n))}),{});function P(e,t){e&&b.flushSync((function(){return e.dispatchEvent(t)}))}var O=x},19454:function(e,t,n){"use strict";var r,o=n(41132).default,i=n(91847).default,a=n(12897).default,u=n(85715).default,s=n(50883).default,c=["__scopeRovingFocusGroup","orientation","loop","dir","currentTabStopId","defaultCurrentTabStopId","onCurrentTabStopIdChange","onEntryFocus","preventScrollOnEntryFocus"],l=["__scopeRovingFocusGroup","focusable","active","tabStopId"],f=Object.create,d=Object.defineProperty,p=Object.getOwnPropertyDescriptor,h=Object.getOwnPropertyNames,v=Object.getPrototypeOf,g=Object.prototype.hasOwnProperty,y=function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,i=s(h(t));try{var a=function(){var i=o.value;g.call(e,i)||i===n||d(e,i,{get:function(){return t[i]},enumerable:!(r=p(t,i))||r.enumerable})};for(i.s();!(o=i.n()).done;)a()}catch(u){i.e(u)}finally{i.f()}}return e},m={};!function(e,t){for(var n in t)d(e,n,{get:t[n],enumerable:!0})}(m,{Item:function(){return J},Root:function(){return Q},RovingFocusGroup:function(){return q},RovingFocusGroupItem:function(){return X},createRovingFocusGroupScope:function(){return V}}),e.exports=(r=m,y(d({},"__esModule",{value:!0}),r));var b=function(e,t,n){return n=null!=e?f(v(e)):{},y(!t&&e&&e.__esModule?n:d(n,"default",{value:e,enumerable:!0}),e)}(n(9950)),w=n(98913),S=n(19926),x=n(96269),P=n(98113),O=n(56541),k=n(5899),_=n(64793),j=n(3645),I=n(38263),T=n(44414),E="rovingFocusGroup.onEntryFocus",C={bubbles:!1,cancelable:!0},M="RovingFocusGroup",A=(0,S.createCollection)(M),D=u(A,3),R=D[0],N=D[1],L=D[2],U=(0,P.createContextScope)(M,[L]),F=u(U,2),B=F[0],V=F[1],z=B(M),H=u(z,2),K=H[0],G=H[1],q=b.forwardRef((function(e,t){return(0,T.jsx)(R.Provider,{scope:e.__scopeRovingFocusGroup,children:(0,T.jsx)(R.Slot,{scope:e.__scopeRovingFocusGroup,children:(0,T.jsx)(W,a(a({},e),{},{ref:t}))})})}));q.displayName=M;var W=b.forwardRef((function(e,t){var n=e.__scopeRovingFocusGroup,r=e.orientation,s=e.loop,l=void 0!==s&&s,f=e.dir,d=e.currentTabStopId,p=e.defaultCurrentTabStopId,h=e.onCurrentTabStopIdChange,v=e.onEntryFocus,g=e.preventScrollOnEntryFocus,y=void 0!==g&&g,m=i(e,c),S=b.useRef(null),P=(0,x.useComposedRefs)(t,S),O=(0,I.useDirection)(f),M=(0,j.useControllableState)({prop:d,defaultProp:p,onChange:h}),A=u(M,2),D=A[0],R=void 0===D?null:D,L=A[1],U=b.useState(!1),F=u(U,2),B=F[0],V=F[1],z=(0,_.useCallbackRef)(v),H=N(n),G=b.useRef(!1),q=b.useState(0),W=u(q,2),Y=W[0],X=W[1];return b.useEffect((function(){var e=S.current;if(e)return e.addEventListener(E,z),function(){return e.removeEventListener(E,z)}}),[z]),(0,T.jsx)(K,{scope:n,orientation:r,dir:O,loop:l,currentTabStopId:R,onItemFocus:b.useCallback((function(e){return L(e)}),[L]),onItemShiftTab:b.useCallback((function(){return V(!0)}),[]),onFocusableItemAdd:b.useCallback((function(){return X((function(e){return e+1}))}),[]),onFocusableItemRemove:b.useCallback((function(){return X((function(e){return e-1}))}),[]),children:(0,T.jsx)(k.Primitive.div,a(a({tabIndex:B||0===Y?-1:0,"data-orientation":r},m),{},{ref:P,style:a({outline:"none"},e.style),onMouseDown:(0,w.composeEventHandlers)(e.onMouseDown,(function(){G.current=!0})),onFocus:(0,w.composeEventHandlers)(e.onFocus,(function(e){var t=!G.current;if(e.target===e.currentTarget&&t&&!B){var n=new CustomEvent(E,C);if(e.currentTarget.dispatchEvent(n),!n.defaultPrevented){var r=H().filter((function(e){return e.focusable}));$([r.find((function(e){return e.active})),r.find((function(e){return e.id===R}))].concat(o(r)).filter(Boolean).map((function(e){return e.ref.current})),y)}}G.current=!1})),onBlur:(0,w.composeEventHandlers)(e.onBlur,(function(){return V(!1)}))}))})})),Y="RovingFocusGroupItem",X=b.forwardRef((function(e,t){var n=e.__scopeRovingFocusGroup,r=e.focusable,o=void 0===r||r,u=e.active,s=void 0!==u&&u,c=e.tabStopId,f=i(e,l),d=(0,O.useId)(),p=c||d,h=G(Y,n),v=h.currentTabStopId===p,g=N(n),y=h.onFocusableItemAdd,m=h.onFocusableItemRemove;return b.useEffect((function(){if(o)return y(),function(){return m()}}),[o,y,m]),(0,T.jsx)(R.ItemSlot,{scope:n,id:p,focusable:o,active:s,children:(0,T.jsx)(k.Primitive.span,a(a({tabIndex:v?0:-1,"data-orientation":h.orientation},f),{},{ref:t,onMouseDown:(0,w.composeEventHandlers)(e.onMouseDown,(function(e){o?h.onItemFocus(p):e.preventDefault()})),onFocus:(0,w.composeEventHandlers)(e.onFocus,(function(){return h.onItemFocus(p)})),onKeyDown:(0,w.composeEventHandlers)(e.onKeyDown,(function(e){if("Tab"===e.key&&e.shiftKey)h.onItemShiftTab();else if(e.target===e.currentTarget){var t,n,r=function(e,t,n){var r=function(e,t){return"rtl"!==t?e:"ArrowLeft"===e?"ArrowRight":"ArrowRight"===e?"ArrowLeft":e}(e.key,n);return"vertical"===t&&["ArrowLeft","ArrowRight"].includes(r)||"horizontal"===t&&["ArrowUp","ArrowDown"].includes(r)?void 0:Z[r]}(e,h.orientation,h.dir);if(void 0!==r){if(e.metaKey||e.ctrlKey||e.altKey||e.shiftKey)return;e.preventDefault();var o=g().filter((function(e){return e.focusable})).map((function(e){return e.ref.current}));if("last"===r)o.reverse();else if("prev"===r||"next"===r){"prev"===r&&o.reverse();var i=o.indexOf(e.currentTarget);o=h.loop?(n=i+1,(t=o).map((function(e,r){return t[(n+r)%t.length]}))):o.slice(i+1)}setTimeout((function(){return $(o)}))}}}))}))})}));X.displayName=Y;var Z={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function $(e){var t,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=document.activeElement,o=s(e);try{for(o.s();!(t=o.n()).done;){var i=t.value;if(i===r)return;if(i.focus({preventScroll:n}),document.activeElement!==r)return}}catch(a){o.e(a)}finally{o.f()}}var Q=q,J=X},46369:function(e,t,n){"use strict";var r,o=n(43693).default,i=n(12897).default,a=n(41132).default,u=n(91847).default,s=n(85715).default,c=n(50883).default,l=["name","min","max","step","orientation","disabled","minStepsBetweenThumbs","defaultValue","value","onValueChange","onValueCommit","inverted","form"],f=["min","max","dir","inverted","onSlideStart","onSlideMove","onSlideEnd","onStepKeyDown"],d=["min","max","inverted","onSlideStart","onSlideMove","onSlideEnd","onStepKeyDown"],p=["__scopeSlider","onSlideStart","onSlideMove","onSlideEnd","onHomeKeyDown","onEndKeyDown","onStepKeyDown"],h=["__scopeSlider"],v=["__scopeSlider"],g=["__scopeSlider","index","name"],y=["value"],m=Object.create,b=Object.defineProperty,w=Object.getOwnPropertyDescriptor,S=Object.getOwnPropertyNames,x=Object.getPrototypeOf,P=Object.prototype.hasOwnProperty,O=function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,i=c(S(t));try{var a=function(){var i=o.value;P.call(e,i)||i===n||b(e,i,{get:function(){return t[i]},enumerable:!(r=w(t,i))||r.enumerable})};for(i.s();!(o=i.n()).done;)a()}catch(u){i.e(u)}finally{i.f()}}return e},k={};!function(e,t){for(var n in t)b(e,n,{get:t[n],enumerable:!0})}(k,{Range:function(){return Se},Root:function(){return be},Slider:function(){return te},SliderRange:function(){return de},SliderThumb:function(){return he},SliderTrack:function(){return le},Thumb:function(){return xe},Track:function(){return we},createSliderScope:function(){return Z}}),e.exports=(r=k,O(b({},"__esModule",{value:!0}),r));var _=function(e,t,n){return n=null!=e?m(x(e)):{},O(!t&&e&&e.__esModule?n:b(n,"default",{value:e,enumerable:!0}),e)}(n(9950)),j=n(5131),I=n(98913),T=n(96269),E=n(98113),C=n(3645),M=n(38263),A=n(70787),D=n(92775),R=n(5899),N=n(19926),L=n(44414),U=["PageUp","PageDown"],F=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],B={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},V="Slider",z=(0,N.createCollection)(V),H=s(z,3),K=H[0],G=H[1],q=H[2],W=(0,E.createContextScope)(V,[q]),Y=s(W,2),X=Y[0],Z=Y[1],$=X(V),Q=s($,2),J=Q[0],ee=Q[1],te=_.forwardRef((function(e,t){var n=e.name,r=e.min,o=void 0===r?0:r,c=e.max,f=void 0===c?100:c,d=e.step,p=void 0===d?1:d,h=e.orientation,v=void 0===h?"horizontal":h,g=e.disabled,y=void 0!==g&&g,m=e.minStepsBetweenThumbs,b=void 0===m?0:m,w=e.defaultValue,S=void 0===w?[o]:w,x=e.value,P=e.onValueChange,O=void 0===P?function(){}:P,k=e.onValueCommit,T=void 0===k?function(){}:k,E=e.inverted,M=void 0!==E&&E,A=e.form,D=u(e,l),R=_.useRef(new Set),N=_.useRef(0),B="horizontal"===v?ae:ue,V=(0,C.useControllableState)({prop:x,defaultProp:S,onChange:function(e){var t;null===(t=a(R.current)[N.current])||void 0===t||t.focus(),O(e)}}),z=s(V,2),H=z[0],G=void 0===H?[]:H,q=z[1],W=_.useRef(G);function Y(e,t){var n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{commit:!1}).commit,r=function(e){return(String(e).split(".")[1]||"").length}(p),i=function(e,t){var n=Math.pow(10,t);return Math.round(e*n)/n}(Math.round((e-o)/p)*p+o,r),u=(0,j.clamp)(i,[o,f]);q((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,r=a(e);return r[n]=t,r.sort((function(e,t){return e-t}))}(e,u,t);if(function(e,t){if(t>0){var n=function(e){return e.slice(0,-1).map((function(t,n){return e[n+1]-t}))}(e);return Math.min.apply(Math,a(n))>=t}return!0}(r,b*p)){N.current=r.indexOf(u);var o=String(r)!==String(e);return o&&n&&T(r),o?r:e}return e}))}return(0,L.jsx)(J,{scope:e.__scopeSlider,name:n,disabled:y,min:o,max:f,valueIndexToChangeRef:N,thumbs:R.current,values:G,orientation:v,form:A,children:(0,L.jsx)(K.Provider,{scope:e.__scopeSlider,children:(0,L.jsx)(K.Slot,{scope:e.__scopeSlider,children:(0,L.jsx)(B,i(i({"aria-disabled":y,"data-disabled":y?"":void 0},D),{},{ref:t,onPointerDown:(0,I.composeEventHandlers)(D.onPointerDown,(function(){y||(W.current=G)})),min:o,max:f,inverted:M,onSlideStart:y?void 0:function(e){var t=function(e,t){if(1===e.length)return 0;var n=e.map((function(e){return Math.abs(e-t)})),r=Math.min.apply(Math,a(n));return n.indexOf(r)}(G,e);Y(e,t)},onSlideMove:y?void 0:function(e){Y(e,N.current)},onSlideEnd:y?void 0:function(){var e=W.current[N.current];G[N.current]!==e&&T(G)},onHomeKeyDown:function(){return!y&&Y(o,0,{commit:!0})},onEndKeyDown:function(){return!y&&Y(f,G.length-1,{commit:!0})},onStepKeyDown:function(e){var t=e.event,n=e.direction;if(!y){var r=U.includes(t.key)||t.shiftKey&&F.includes(t.key)?10:1,o=N.current;Y(G[o]+p*r*n,o,{commit:!0})}}}))})})})}));te.displayName=V;var ne=X(V,{startEdge:"left",endEdge:"right",size:"width",direction:1}),re=s(ne,2),oe=re[0],ie=re[1],ae=_.forwardRef((function(e,t){var n=e.min,r=e.max,a=e.dir,c=e.inverted,l=e.onSlideStart,d=e.onSlideMove,p=e.onSlideEnd,h=e.onStepKeyDown,v=u(e,f),g=_.useState(null),y=s(g,2),m=y[0],b=y[1],w=(0,T.useComposedRefs)(t,(function(e){return b(e)})),S=_.useRef(void 0),x=(0,M.useDirection)(a),P="ltr"===x,O=P&&!c||!P&&c;function k(e){var t=S.current||m.getBoundingClientRect(),o=me([0,t.width],O?[n,r]:[r,n]);return S.current=t,o(e-t.left)}return(0,L.jsx)(oe,{scope:e.__scopeSlider,startEdge:O?"left":"right",endEdge:O?"right":"left",direction:O?1:-1,size:"width",children:(0,L.jsx)(se,i(i({dir:x,"data-orientation":"horizontal"},v),{},{ref:w,style:i(i({},v.style),{},o({},"--radix-slider-thumb-transform","translateX(-50%)")),onSlideStart:function(e){var t=k(e.clientX);null===l||void 0===l||l(t)},onSlideMove:function(e){var t=k(e.clientX);null===d||void 0===d||d(t)},onSlideEnd:function(){S.current=void 0,null===p||void 0===p||p()},onStepKeyDown:function(e){var t=B[O?"from-left":"from-right"].includes(e.key);null===h||void 0===h||h({event:e,direction:t?-1:1})}}))})})),ue=_.forwardRef((function(e,t){var n=e.min,r=e.max,a=e.inverted,s=e.onSlideStart,c=e.onSlideMove,l=e.onSlideEnd,f=e.onStepKeyDown,p=u(e,d),h=_.useRef(null),v=(0,T.useComposedRefs)(t,h),g=_.useRef(void 0),y=!a;function m(e){var t=g.current||h.current.getBoundingClientRect(),o=me([0,t.height],y?[r,n]:[n,r]);return g.current=t,o(e-t.top)}return(0,L.jsx)(oe,{scope:e.__scopeSlider,startEdge:y?"bottom":"top",endEdge:y?"top":"bottom",size:"height",direction:y?1:-1,children:(0,L.jsx)(se,i(i({"data-orientation":"vertical"},p),{},{ref:v,style:i(i({},p.style),{},o({},"--radix-slider-thumb-transform","translateY(50%)")),onSlideStart:function(e){var t=m(e.clientY);null===s||void 0===s||s(t)},onSlideMove:function(e){var t=m(e.clientY);null===c||void 0===c||c(t)},onSlideEnd:function(){g.current=void 0,null===l||void 0===l||l()},onStepKeyDown:function(e){var t=B[y?"from-bottom":"from-top"].includes(e.key);null===f||void 0===f||f({event:e,direction:t?-1:1})}}))})})),se=_.forwardRef((function(e,t){var n=e.__scopeSlider,r=e.onSlideStart,o=e.onSlideMove,a=e.onSlideEnd,s=e.onHomeKeyDown,c=e.onEndKeyDown,l=e.onStepKeyDown,f=u(e,p),d=ee(V,n);return(0,L.jsx)(R.Primitive.span,i(i({},f),{},{ref:t,onKeyDown:(0,I.composeEventHandlers)(e.onKeyDown,(function(e){"Home"===e.key?(s(e),e.preventDefault()):"End"===e.key?(c(e),e.preventDefault()):U.concat(F).includes(e.key)&&(l(e),e.preventDefault())})),onPointerDown:(0,I.composeEventHandlers)(e.onPointerDown,(function(e){var t=e.target;t.setPointerCapture(e.pointerId),e.preventDefault(),d.thumbs.has(t)?t.focus():r(e)})),onPointerMove:(0,I.composeEventHandlers)(e.onPointerMove,(function(e){e.target.hasPointerCapture(e.pointerId)&&o(e)})),onPointerUp:(0,I.composeEventHandlers)(e.onPointerUp,(function(e){var t=e.target;t.hasPointerCapture(e.pointerId)&&(t.releasePointerCapture(e.pointerId),a(e))}))}))})),ce="SliderTrack",le=_.forwardRef((function(e,t){var n=e.__scopeSlider,r=u(e,h),o=ee(ce,n);return(0,L.jsx)(R.Primitive.span,i(i({"data-disabled":o.disabled?"":void 0,"data-orientation":o.orientation},r),{},{ref:t}))}));le.displayName=ce;var fe="SliderRange",de=_.forwardRef((function(e,t){var n=e.__scopeSlider,r=u(e,v),s=ee(fe,n),c=ie(fe,n),l=_.useRef(null),f=(0,T.useComposedRefs)(t,l),d=s.values.length,p=s.values.map((function(e){return ye(e,s.min,s.max)})),h=d>1?Math.min.apply(Math,a(p)):0,g=100-Math.max.apply(Math,a(p));return(0,L.jsx)(R.Primitive.span,i(i({"data-orientation":s.orientation,"data-disabled":s.disabled?"":void 0},r),{},{ref:f,style:i(i({},e.style),{},o(o({},c.startEdge,h+"%"),c.endEdge,g+"%"))}))}));de.displayName=fe;var pe="SliderThumb",he=_.forwardRef((function(e,t){var n=G(e.__scopeSlider),r=_.useState(null),o=s(r,2),a=o[0],u=o[1],c=(0,T.useComposedRefs)(t,(function(e){return u(e)})),l=_.useMemo((function(){return a?n().findIndex((function(e){return e.ref.current===a})):-1}),[n,a]);return(0,L.jsx)(ve,i(i({},e),{},{ref:c,index:l}))})),ve=_.forwardRef((function(e,t){var n=e.__scopeSlider,r=e.index,a=e.name,c=u(e,g),l=ee(pe,n),f=ie(pe,n),d=_.useState(null),p=s(d,2),h=p[0],v=p[1],y=(0,T.useComposedRefs)(t,(function(e){return v(e)})),m=!h||(l.form||!!h.closest("form")),b=(0,D.useSize)(h),w=l.values[r],S=void 0===w?0:ye(w,l.min,l.max),x=function(e,t){return t>2?"Value ".concat(e+1," of ").concat(t):2===t?["Minimum","Maximum"][e]:void 0}(r,l.values.length),P=null===b||void 0===b?void 0:b[f.size],O=P?function(e,t,n){var r=e/2,o=me([0,50],[0,r]);return(r-o(t)*n)*n}(P,S,f.direction):0;return _.useEffect((function(){if(h)return l.thumbs.add(h),function(){l.thumbs.delete(h)}}),[h,l.thumbs]),(0,L.jsxs)("span",{style:o({transform:"var(--radix-slider-thumb-transform)",position:"absolute"},f.startEdge,"calc(".concat(S,"% + ").concat(O,"px)")),children:[(0,L.jsx)(K.ItemSlot,{scope:e.__scopeSlider,children:(0,L.jsx)(R.Primitive.span,i(i({role:"slider","aria-label":e["aria-label"]||x,"aria-valuemin":l.min,"aria-valuenow":w,"aria-valuemax":l.max,"aria-orientation":l.orientation,"data-orientation":l.orientation,"data-disabled":l.disabled?"":void 0,tabIndex:l.disabled?void 0:0},c),{},{ref:y,style:void 0===w?{display:"none"}:e.style,onFocus:(0,I.composeEventHandlers)(e.onFocus,(function(){l.valueIndexToChangeRef.current=r}))}))}),m&&(0,L.jsx)(ge,{name:null!==a&&void 0!==a?a:l.name?l.name+(l.values.length>1?"[]":""):void 0,form:l.form,value:w},r)]})}));he.displayName=pe;var ge=function(e){var t=e.value,n=u(e,y),r=_.useRef(null),o=(0,A.usePrevious)(t);return _.useEffect((function(){var e=r.current,n=window.HTMLInputElement.prototype,i=Object.getOwnPropertyDescriptor(n,"value").set;if(o!==t&&i){var a=new Event("input",{bubbles:!0});i.call(e,t),e.dispatchEvent(a)}}),[o,t]),(0,L.jsx)("input",i(i({style:{display:"none"}},n),{},{ref:r,defaultValue:t}))};function ye(e,t,n){var r=100/(n-t)*(e-t);return(0,j.clamp)(r,[0,100])}function me(e,t){return function(n){if(e[0]===e[1]||t[0]===t[1])return t[0];var r=(t[1]-t[0])/(e[1]-e[0]);return t[0]+r*(n-e[0])}}var be=te,we=le,Se=de,xe=he},15798:function(e,t,n){"use strict";var r,o=n(12897).default,i=n(91847).default,a=n(50883).default,u=["children"],s=["children"],c=Object.create,l=Object.defineProperty,f=Object.getOwnPropertyDescriptor,d=Object.getOwnPropertyNames,p=Object.getPrototypeOf,h=Object.prototype.hasOwnProperty,v=function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,i=a(d(t));try{var u=function(){var i=o.value;h.call(e,i)||i===n||l(e,i,{get:function(){return t[i]},enumerable:!(r=f(t,i))||r.enumerable})};for(i.s();!(o=i.n()).done;)u()}catch(s){i.e(s)}finally{i.f()}}return e},g={};!function(e,t){for(var n in t)l(e,n,{get:t[n],enumerable:!0})}(g,{Root:function(){return O},Slot:function(){return w},Slottable:function(){return x}}),e.exports=(r=g,v(l({},"__esModule",{value:!0}),r));var y=function(e,t,n){return n=null!=e?c(p(e)):{},v(!t&&e&&e.__esModule?n:l(n,"default",{value:e,enumerable:!0}),e)}(n(9950)),m=n(96269),b=n(44414),w=y.forwardRef((function(e,t){var n=e.children,r=i(e,u),a=y.Children.toArray(n),s=a.find(P);if(s){var c=s.props.children,l=a.map((function(e){return e===s?y.Children.count(c)>1?y.Children.only(null):y.isValidElement(c)?c.props.children:null:e}));return(0,b.jsx)(S,o(o({},r),{},{ref:t,children:y.isValidElement(c)?y.cloneElement(c,void 0,l):null}))}return(0,b.jsx)(S,o(o({},r),{},{ref:t,children:n}))}));w.displayName="Slot";var S=y.forwardRef((function(e,t){var n=e.children,r=i(e,s);if(y.isValidElement(n)){var a=function(e){var t,n,r=null===(t=Object.getOwnPropertyDescriptor(e.props,"ref"))||void 0===t?void 0:t.get,o=r&&"isReactWarning"in r&&r.isReactWarning;if(o)return e.ref;if(r=null===(n=Object.getOwnPropertyDescriptor(e,"ref"))||void 0===n?void 0:n.get,o=r&&"isReactWarning"in r&&r.isReactWarning)return e.props.ref;return e.props.ref||e.ref}(n),u=function(e,t){var n=o({},t),r=function(){var r=e[i],a=t[i];/^on[A-Z]/.test(i)?r&&a?n[i]=function(){a.apply(void 0,arguments),r.apply(void 0,arguments)}:r&&(n[i]=r):"style"===i?n[i]=o(o({},r),a):"className"===i&&(n[i]=[r,a].filter(Boolean).join(" "))};for(var i in t)r();return o(o({},e),n)}(r,n.props);return n.type!==y.Fragment&&(u.ref=t?(0,m.composeRefs)(t,a):a),y.cloneElement(n,u)}return y.Children.count(n)>1?y.Children.only(null):null}));S.displayName="SlotClone";var x=function(e){var t=e.children;return(0,b.jsx)(b.Fragment,{children:t})};function P(e){return y.isValidElement(e)&&e.type===x}var O=w},56637:function(e,t,n){"use strict";var r,o=n(12897).default,i=n(41132).default,a=n(91847).default,u=n(85715).default,s=n(50883).default,c=["__scopeToast","hotkey","label"],l=["__scopeToast","onFocusFromOutsideViewport"],f=["forceMount","open","defaultOpen","onOpenChange"],d=["__scopeToast","type","duration","open","onClose","onEscapeKeyDown","onPause","onResume","onSwipeStart","onSwipeMove","onSwipeCancel","onSwipeEnd"],p=["__scopeToast","children"],h=["__scopeToast"],v=["__scopeToast"],g=["altText"],y=["__scopeToast"],m=["__scopeToast","altText"],b=Object.create,w=Object.defineProperty,S=Object.getOwnPropertyDescriptor,x=Object.getOwnPropertyNames,P=Object.getPrototypeOf,O=Object.prototype.hasOwnProperty,k=function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,i=s(x(t));try{var a=function(){var i=o.value;O.call(e,i)||i===n||w(e,i,{get:function(){return t[i]},enumerable:!(r=S(t,i))||r.enumerable})};for(i.s();!(o=i.n()).done;)a()}catch(u){i.e(u)}finally{i.f()}}return e},_=function(e,t,n){return n=null!=e?b(P(e)):{},k(!t&&e&&e.__esModule?n:w(n,"default",{value:e,enumerable:!0}),e)},j={};!function(e,t){for(var n in t)w(e,n,{get:t[n],enumerable:!0})}(j,{Action:function(){return Re},Close:function(){return Ne},Description:function(){return De},Provider:function(){return Ee},Root:function(){return Me},Title:function(){return Ae},Toast:function(){return de},ToastAction:function(){return xe},ToastClose:function(){return Oe},ToastDescription:function(){return we},ToastProvider:function(){return re},ToastTitle:function(){return be},ToastViewport:function(){return se},Viewport:function(){return Ce},createToastScope:function(){return Q}}),e.exports=(r=j,k(w({},"__esModule",{value:!0}),r));var I=_(n(9950)),T=_(n(17119)),E=n(98913),C=n(96269),M=n(19926),A=n(98113),D=_(n(64320)),R=n(66688),N=n(64905),L=n(5899),U=n(64793),F=n(3645),B=n(67066),V=n(60585),z=n(44414),H="ToastProvider",K=(0,M.createCollection)("Toast"),G=u(K,3),q=G[0],W=G[1],Y=G[2],X=(0,A.createContextScope)("Toast",[Y]),Z=u(X,2),$=Z[0],Q=Z[1],J=$(H),ee=u(J,2),te=ee[0],ne=ee[1],re=function(e){var t=e.__scopeToast,n=e.label,r=void 0===n?"Notification":n,o=e.duration,i=void 0===o?5e3:o,a=e.swipeDirection,s=void 0===a?"right":a,c=e.swipeThreshold,l=void 0===c?50:c,f=e.children,d=I.useState(null),p=u(d,2),h=p[0],v=p[1],g=I.useState(0),y=u(g,2),m=y[0],b=y[1],w=I.useRef(!1),S=I.useRef(!1);return r.trim()||console.error("Invalid prop `label` supplied to `".concat(H,"`. Expected non-empty `string`.")),(0,z.jsx)(q.Provider,{scope:t,children:(0,z.jsx)(te,{scope:t,label:r,duration:i,swipeDirection:s,swipeThreshold:l,toastCount:m,viewport:h,onViewportChange:v,onToastAdd:I.useCallback((function(){return b((function(e){return e+1}))}),[]),onToastRemove:I.useCallback((function(){return b((function(e){return e-1}))}),[]),isFocusedToastEscapeKeyDownRef:w,isClosePausedRef:S,children:f})})};re.displayName=H;var oe="ToastViewport",ie=["F8"],ae="toast.viewportPause",ue="toast.viewportResume",se=I.forwardRef((function(e,t){var n=e.__scopeToast,r=e.hotkey,u=void 0===r?ie:r,s=e.label,l=void 0===s?"Notifications ({hotkey})":s,f=a(e,c),d=ne(oe,n),p=W(n),h=I.useRef(null),v=I.useRef(null),g=I.useRef(null),y=I.useRef(null),m=(0,C.useComposedRefs)(t,y,d.onViewportChange),b=u.join("+").replace(/Key/g,"").replace(/Digit/g,""),w=d.toastCount>0;I.useEffect((function(){var e=function(e){var t;0!==u.length&&u.every((function(t){return e[t]||e.code===t}))&&(null===(t=y.current)||void 0===t||t.focus())};return document.addEventListener("keydown",e),function(){return document.removeEventListener("keydown",e)}}),[u]),I.useEffect((function(){var e=h.current,t=y.current;if(w&&e&&t){var n=function(){if(!d.isClosePausedRef.current){var e=new CustomEvent(ae);t.dispatchEvent(e),d.isClosePausedRef.current=!0}},r=function(){if(d.isClosePausedRef.current){var e=new CustomEvent(ue);t.dispatchEvent(e),d.isClosePausedRef.current=!1}},o=function(t){!e.contains(t.relatedTarget)&&r()},i=function(){e.contains(document.activeElement)||r()};return e.addEventListener("focusin",n),e.addEventListener("focusout",o),e.addEventListener("pointermove",n),e.addEventListener("pointerleave",i),window.addEventListener("blur",n),window.addEventListener("focus",r),function(){e.removeEventListener("focusin",n),e.removeEventListener("focusout",o),e.removeEventListener("pointermove",n),e.removeEventListener("pointerleave",i),window.removeEventListener("blur",n),window.removeEventListener("focus",r)}}}),[w,d.isClosePausedRef]);var S=I.useCallback((function(e){var t=e.tabbingDirection,n=p().map((function(e){var n=e.ref.current,r=[n].concat(i(function(e){var t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:function(e){var t="INPUT"===e.tagName&&"hidden"===e.type;return e.disabled||e.hidden||t?NodeFilter.FILTER_SKIP:e.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}(n)));return"forwards"===t?r:r.reverse()}));return("forwards"===t?n.reverse():n).flat()}),[p]);return I.useEffect((function(){var e=y.current;if(e){var t=function(t){var n=t.altKey||t.ctrlKey||t.metaKey;if("Tab"===t.key&&!n){var r,o=document.activeElement,i=t.shiftKey;if(t.target===e&&i)return void(null===(r=v.current)||void 0===r||r.focus());var a,u,s=S({tabbingDirection:i?"backwards":"forwards"}),c=s.findIndex((function(e){return e===o}));if(Te(s.slice(c+1)))t.preventDefault();else i?null===(a=v.current)||void 0===a||a.focus():null===(u=g.current)||void 0===u||u.focus()}};return e.addEventListener("keydown",t),function(){return e.removeEventListener("keydown",t)}}}),[p,S]),(0,z.jsxs)(D.Branch,{ref:h,role:"region","aria-label":l.replace("{hotkey}",b),tabIndex:-1,style:{pointerEvents:w?void 0:"none"},children:[w&&(0,z.jsx)(le,{ref:v,onFocusFromOutsideViewport:function(){Te(S({tabbingDirection:"forwards"}))}}),(0,z.jsx)(q.Slot,{scope:n,children:(0,z.jsx)(L.Primitive.ol,o(o({tabIndex:-1},f),{},{ref:m}))}),w&&(0,z.jsx)(le,{ref:g,onFocusFromOutsideViewport:function(){Te(S({tabbingDirection:"backwards"}))}})]})}));se.displayName=oe;var ce="ToastFocusProxy",le=I.forwardRef((function(e,t){var n=e.__scopeToast,r=e.onFocusFromOutsideViewport,i=a(e,l),u=ne(ce,n);return(0,z.jsx)(V.VisuallyHidden,o(o({"aria-hidden":!0,tabIndex:0},i),{},{ref:t,style:{position:"fixed"},onFocus:function(e){var t,n=e.relatedTarget;!(null!==(t=u.viewport)&&void 0!==t&&t.contains(n))&&r()}}))}));le.displayName=ce;var fe="Toast",de=I.forwardRef((function(e,t){var n=e.forceMount,r=e.open,i=e.defaultOpen,s=e.onOpenChange,c=a(e,f),l=(0,F.useControllableState)({prop:r,defaultProp:i,onChange:s}),d=u(l,2),p=d[0],h=void 0===p||p,v=d[1];return(0,z.jsx)(N.Presence,{present:n||h,children:(0,z.jsx)(ye,o(o({open:h},c),{},{ref:t,onClose:function(){return v(!1)},onPause:(0,U.useCallbackRef)(e.onPause),onResume:(0,U.useCallbackRef)(e.onResume),onSwipeStart:(0,E.composeEventHandlers)(e.onSwipeStart,(function(e){e.currentTarget.setAttribute("data-swipe","start")})),onSwipeMove:(0,E.composeEventHandlers)(e.onSwipeMove,(function(e){var t=e.detail.delta,n=t.x,r=t.y;e.currentTarget.setAttribute("data-swipe","move"),e.currentTarget.style.setProperty("--radix-toast-swipe-move-x","".concat(n,"px")),e.currentTarget.style.setProperty("--radix-toast-swipe-move-y","".concat(r,"px"))})),onSwipeCancel:(0,E.composeEventHandlers)(e.onSwipeCancel,(function(e){e.currentTarget.setAttribute("data-swipe","cancel"),e.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),e.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),e.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),e.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")})),onSwipeEnd:(0,E.composeEventHandlers)(e.onSwipeEnd,(function(e){var t=e.detail.delta,n=t.x,r=t.y;e.currentTarget.setAttribute("data-swipe","end"),e.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),e.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),e.currentTarget.style.setProperty("--radix-toast-swipe-end-x","".concat(n,"px")),e.currentTarget.style.setProperty("--radix-toast-swipe-end-y","".concat(r,"px")),v(!1)}))}))})}));de.displayName=fe;var pe=$(fe,{onClose:function(){}}),he=u(pe,2),ve=he[0],ge=he[1],ye=I.forwardRef((function(e,t){var n=e.__scopeToast,r=e.type,i=void 0===r?"foreground":r,s=e.duration,c=e.open,l=e.onClose,f=e.onEscapeKeyDown,p=e.onPause,h=e.onResume,v=e.onSwipeStart,g=e.onSwipeMove,y=e.onSwipeCancel,m=e.onSwipeEnd,b=a(e,d),w=ne(fe,n),S=I.useState(null),x=u(S,2),P=x[0],O=x[1],k=(0,C.useComposedRefs)(t,(function(e){return O(e)})),_=I.useRef(null),j=I.useRef(null),M=s||w.duration,A=I.useRef(0),R=I.useRef(M),N=I.useRef(0),F=w.onToastAdd,B=w.onToastRemove,V=(0,U.useCallbackRef)((function(){var e;(null===P||void 0===P?void 0:P.contains(document.activeElement))&&(null===(e=w.viewport)||void 0===e||e.focus()),l()})),H=I.useCallback((function(e){e&&e!==1/0&&(window.clearTimeout(N.current),A.current=(new Date).getTime(),N.current=window.setTimeout(V,e))}),[V]);I.useEffect((function(){var e=w.viewport;if(e){var t=function(){H(R.current),null===h||void 0===h||h()},n=function(){var e=(new Date).getTime()-A.current;R.current=R.current-e,window.clearTimeout(N.current),null===p||void 0===p||p()};return e.addEventListener(ae,n),e.addEventListener(ue,t),function(){e.removeEventListener(ae,n),e.removeEventListener(ue,t)}}}),[w.viewport,M,p,h,H]),I.useEffect((function(){c&&!w.isClosePausedRef.current&&H(M)}),[c,M,w.isClosePausedRef,H]),I.useEffect((function(){return F(),function(){return B()}}),[F,B]);var K=I.useMemo((function(){return P?_e(P):null}),[P]);return w.viewport?(0,z.jsxs)(z.Fragment,{children:[K&&(0,z.jsx)(me,{__scopeToast:n,role:"status","aria-live":"foreground"===i?"assertive":"polite","aria-atomic":!0,children:K}),(0,z.jsx)(ve,{scope:n,onClose:V,children:T.createPortal((0,z.jsx)(q.ItemSlot,{scope:n,children:(0,z.jsx)(D.Root,{asChild:!0,onEscapeKeyDown:(0,E.composeEventHandlers)(f,(function(){w.isFocusedToastEscapeKeyDownRef.current||V(),w.isFocusedToastEscapeKeyDownRef.current=!1})),children:(0,z.jsx)(L.Primitive.li,o(o({role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":c?"open":"closed","data-swipe-direction":w.swipeDirection},b),{},{ref:k,style:o({userSelect:"none",touchAction:"none"},e.style),onKeyDown:(0,E.composeEventHandlers)(e.onKeyDown,(function(e){"Escape"===e.key&&(null===f||void 0===f||f(e.nativeEvent),e.nativeEvent.defaultPrevented||(w.isFocusedToastEscapeKeyDownRef.current=!0,V()))})),onPointerDown:(0,E.composeEventHandlers)(e.onPointerDown,(function(e){0===e.button&&(_.current={x:e.clientX,y:e.clientY})})),onPointerMove:(0,E.composeEventHandlers)(e.onPointerMove,(function(e){if(_.current){var t=e.clientX-_.current.x,n=e.clientY-_.current.y,r=Boolean(j.current),o=["left","right"].includes(w.swipeDirection),i=["left","up"].includes(w.swipeDirection)?Math.min:Math.max,a=o?i(0,t):0,u=o?0:i(0,n),s="touch"===e.pointerType?10:2,c={x:a,y:u},l={originalEvent:e,delta:c};r?(j.current=c,je("toast.swipeMove",g,l,{discrete:!1})):Ie(c,w.swipeDirection,s)?(j.current=c,je("toast.swipeStart",v,l,{discrete:!1}),e.target.setPointerCapture(e.pointerId)):(Math.abs(t)>s||Math.abs(n)>s)&&(_.current=null)}})),onPointerUp:(0,E.composeEventHandlers)(e.onPointerUp,(function(e){var t=j.current,n=e.target;if(n.hasPointerCapture(e.pointerId)&&n.releasePointerCapture(e.pointerId),j.current=null,_.current=null,t){var r=e.currentTarget,o={originalEvent:e,delta:t};Ie(t,w.swipeDirection,w.swipeThreshold)?je("toast.swipeEnd",m,o,{discrete:!0}):je("toast.swipeCancel",y,o,{discrete:!0}),r.addEventListener("click",(function(e){return e.preventDefault()}),{once:!0})}}))}))})}),w.viewport)})]}):null})),me=function(e){var t=e.__scopeToast,n=e.children,r=a(e,p),i=ne(fe,t),s=I.useState(!1),c=u(s,2),l=c[0],f=c[1],d=I.useState(!1),h=u(d,2),v=h[0],g=h[1];return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){},t=(0,U.useCallbackRef)(e);(0,B.useLayoutEffect)((function(){var e=0,n=0;return e=window.requestAnimationFrame((function(){return n=window.requestAnimationFrame(t)})),function(){window.cancelAnimationFrame(e),window.cancelAnimationFrame(n)}}),[t])}((function(){return f(!0)})),I.useEffect((function(){var e=window.setTimeout((function(){return g(!0)}),1e3);return function(){return window.clearTimeout(e)}}),[]),v?null:(0,z.jsx)(R.Portal,{asChild:!0,children:(0,z.jsx)(V.VisuallyHidden,o(o({},r),{},{children:l&&(0,z.jsxs)(z.Fragment,{children:[i.label," ",n]})}))})},be=I.forwardRef((function(e,t){e.__scopeToast;var n=a(e,h);return(0,z.jsx)(L.Primitive.div,o(o({},n),{},{ref:t}))}));be.displayName="ToastTitle";var we=I.forwardRef((function(e,t){e.__scopeToast;var n=a(e,v);return(0,z.jsx)(L.Primitive.div,o(o({},n),{},{ref:t}))}));we.displayName="ToastDescription";var Se="ToastAction",xe=I.forwardRef((function(e,t){var n=e.altText,r=a(e,g);return n.trim()?(0,z.jsx)(ke,{altText:n,asChild:!0,children:(0,z.jsx)(Oe,o(o({},r),{},{ref:t}))}):(console.error("Invalid prop `altText` supplied to `".concat(Se,"`. Expected non-empty `string`.")),null)}));xe.displayName=Se;var Pe="ToastClose",Oe=I.forwardRef((function(e,t){var n=e.__scopeToast,r=a(e,y),i=ge(Pe,n);return(0,z.jsx)(ke,{asChild:!0,children:(0,z.jsx)(L.Primitive.button,o(o({type:"button"},r),{},{ref:t,onClick:(0,E.composeEventHandlers)(e.onClick,i.onClose)}))})}));Oe.displayName=Pe;var ke=I.forwardRef((function(e,t){e.__scopeToast;var n=e.altText,r=a(e,m);return(0,z.jsx)(L.Primitive.div,o(o({"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":n||void 0},r),{},{ref:t}))}));function _e(e){var t=[];return Array.from(e.childNodes).forEach((function(e){if(e.nodeType===e.TEXT_NODE&&e.textContent&&t.push(e.textContent),function(e){return e.nodeType===e.ELEMENT_NODE}(e)){var n=e.ariaHidden||e.hidden||"none"===e.style.display,r=""===e.dataset.radixToastAnnounceExclude;if(!n)if(r){var o=e.dataset.radixToastAnnounceAlt;o&&t.push(o)}else t.push.apply(t,i(_e(e)))}})),t}function je(e,t,n,r){var o=r.discrete,i=n.originalEvent.currentTarget,a=new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:n});t&&i.addEventListener(e,t,{once:!0}),o?(0,L.dispatchDiscreteCustomEvent)(i,a):i.dispatchEvent(a)}var Ie=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=Math.abs(e.x),o=Math.abs(e.y),i=r>o;return"left"===t||"right"===t?i&&r>n:!i&&o>n};function Te(e){var t=document.activeElement;return e.some((function(e){return e===t||(e.focus(),document.activeElement!==t)}))}var Ee=re,Ce=se,Me=de,Ae=be,De=we,Re=xe,Ne=Oe},64793:function(e,t,n){"use strict";var r,o=n(50883).default,i=Object.create,a=Object.defineProperty,u=Object.getOwnPropertyDescriptor,s=Object.getOwnPropertyNames,c=Object.getPrototypeOf,l=Object.prototype.hasOwnProperty,f=function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var i,c=o(s(t));try{var f=function(){var o=i.value;l.call(e,o)||o===n||a(e,o,{get:function(){return t[o]},enumerable:!(r=u(t,o))||r.enumerable})};for(c.s();!(i=c.n()).done;)f()}catch(d){c.e(d)}finally{c.f()}}return e},d={};!function(e,t){for(var n in t)a(e,n,{get:t[n],enumerable:!0})}(d,{useCallbackRef:function(){return h}}),e.exports=(r=d,f(a({},"__esModule",{value:!0}),r));var p=function(e,t,n){return n=null!=e?i(c(e)):{},f(!t&&e&&e.__esModule?n:a(n,"default",{value:e,enumerable:!0}),e)}(n(9950));function h(e){var t=p.useRef(e);return p.useEffect((function(){t.current=e})),p.useMemo((function(){return function(){for(var e,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return null===(e=t.current)||void 0===e?void 0:e.call.apply(e,[t].concat(r))}}),[])}},3645:function(e,t,n){"use strict";var r,o=n(85715).default,i=n(50883).default,a=Object.create,u=Object.defineProperty,s=Object.getOwnPropertyDescriptor,c=Object.getOwnPropertyNames,l=Object.getPrototypeOf,f=Object.prototype.hasOwnProperty,d=function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,a=i(c(t));try{var l=function(){var i=o.value;f.call(e,i)||i===n||u(e,i,{get:function(){return t[i]},enumerable:!(r=s(t,i))||r.enumerable})};for(a.s();!(o=a.n()).done;)l()}catch(d){a.e(d)}finally{a.f()}}return e},p={};!function(e,t){for(var n in t)u(e,n,{get:t[n],enumerable:!0})}(p,{useControllableState:function(){return g}}),e.exports=(r=p,d(u({},"__esModule",{value:!0}),r));var h=function(e,t,n){return n=null!=e?a(l(e)):{},d(!t&&e&&e.__esModule?n:u(n,"default",{value:e,enumerable:!0}),e)}(n(9950)),v=n(64793);function g(e){var t=e.prop,n=e.defaultProp,r=e.onChange,i=void 0===r?function(){}:r,a=function(e){var t=e.defaultProp,n=e.onChange,r=h.useState(t),i=o(r,1)[0],a=h.useRef(i),u=(0,v.useCallbackRef)(n);return h.useEffect((function(){a.current!==i&&(u(i),a.current=i)}),[i,a,u]),r}({defaultProp:n,onChange:i}),u=o(a,2),s=u[0],c=u[1],l=void 0!==t,f=l?t:s,d=(0,v.useCallbackRef)(i);return[f,h.useCallback((function(e){if(l){var n="function"===typeof e?e(t):e;n!==t&&d(n)}else c(e)}),[l,t,c,d])]}},12863:function(e,t,n){"use strict";var r,o=n(50883).default,i=Object.create,a=Object.defineProperty,u=Object.getOwnPropertyDescriptor,s=Object.getOwnPropertyNames,c=Object.getPrototypeOf,l=Object.prototype.hasOwnProperty,f=function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var i,c=o(s(t));try{var f=function(){var o=i.value;l.call(e,o)||o===n||a(e,o,{get:function(){return t[o]},enumerable:!(r=u(t,o))||r.enumerable})};for(c.s();!(i=c.n()).done;)f()}catch(d){c.e(d)}finally{c.f()}}return e},d={};!function(e,t){for(var n in t)a(e,n,{get:t[n],enumerable:!0})}(d,{useEscapeKeydown:function(){return v}}),e.exports=(r=d,f(a({},"__esModule",{value:!0}),r));var p=function(e,t,n){return n=null!=e?i(c(e)):{},f(!t&&e&&e.__esModule?n:a(n,"default",{value:e,enumerable:!0}),e)}(n(9950)),h=n(64793);function v(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null===globalThis||void 0===globalThis?void 0:globalThis.document,n=(0,h.useCallbackRef)(e);p.useEffect((function(){var e=function(e){"Escape"===e.key&&n(e)};return t.addEventListener("keydown",e,{capture:!0}),function(){return t.removeEventListener("keydown",e,{capture:!0})}}),[n,t])}},67066:function(e,t,n){"use strict";var r,o=n(50883).default,i=Object.create,a=Object.defineProperty,u=Object.getOwnPropertyDescriptor,s=Object.getOwnPropertyNames,c=Object.getPrototypeOf,l=Object.prototype.hasOwnProperty,f=function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var i,c=o(s(t));try{var f=function(){var o=i.value;l.call(e,o)||o===n||a(e,o,{get:function(){return t[o]},enumerable:!(r=u(t,o))||r.enumerable})};for(c.s();!(i=c.n()).done;)f()}catch(d){c.e(d)}finally{c.f()}}return e},d={};!function(e,t){for(var n in t)a(e,n,{get:t[n],enumerable:!0})}(d,{useLayoutEffect:function(){return h}}),e.exports=(r=d,f(a({},"__esModule",{value:!0}),r));var p=function(e,t,n){return n=null!=e?i(c(e)):{},f(!t&&e&&e.__esModule?n:a(n,"default",{value:e,enumerable:!0}),e)}(n(9950)),h=Boolean(null===globalThis||void 0===globalThis?void 0:globalThis.document)?p.useLayoutEffect:function(){}},70787:function(e,t,n){"use strict";var r,o=n(50883).default,i=Object.create,a=Object.defineProperty,u=Object.getOwnPropertyDescriptor,s=Object.getOwnPropertyNames,c=Object.getPrototypeOf,l=Object.prototype.hasOwnProperty,f=function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var i,c=o(s(t));try{var f=function(){var o=i.value;l.call(e,o)||o===n||a(e,o,{get:function(){return t[o]},enumerable:!(r=u(t,o))||r.enumerable})};for(c.s();!(i=c.n()).done;)f()}catch(d){c.e(d)}finally{c.f()}}return e},d={};!function(e,t){for(var n in t)a(e,n,{get:t[n],enumerable:!0})}(d,{usePrevious:function(){return h}}),e.exports=(r=d,f(a({},"__esModule",{value:!0}),r));var p=function(e,t,n){return n=null!=e?i(c(e)):{},f(!t&&e&&e.__esModule?n:a(n,"default",{value:e,enumerable:!0}),e)}(n(9950));function h(e){var t=p.useRef({value:e,previous:e});return p.useMemo((function(){return t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous}),[e])}},92775:function(e,t,n){"use strict";var r,o=n(85715).default,i=n(50883).default,a=Object.create,u=Object.defineProperty,s=Object.getOwnPropertyDescriptor,c=Object.getOwnPropertyNames,l=Object.getPrototypeOf,f=Object.prototype.hasOwnProperty,d=function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,a=i(c(t));try{var l=function(){var i=o.value;f.call(e,i)||i===n||u(e,i,{get:function(){return t[i]},enumerable:!(r=s(t,i))||r.enumerable})};for(a.s();!(o=a.n()).done;)l()}catch(d){a.e(d)}finally{a.f()}}return e},p={};!function(e,t){for(var n in t)u(e,n,{get:t[n],enumerable:!0})}(p,{useSize:function(){return g}}),e.exports=(r=p,d(u({},"__esModule",{value:!0}),r));var h=function(e,t,n){return n=null!=e?a(l(e)):{},d(!t&&e&&e.__esModule?n:u(n,"default",{value:e,enumerable:!0}),e)}(n(9950)),v=n(67066);function g(e){var t=h.useState(void 0),n=o(t,2),r=n[0],i=n[1];return(0,v.useLayoutEffect)((function(){if(e){i({width:e.offsetWidth,height:e.offsetHeight});var t=new ResizeObserver((function(t){if(Array.isArray(t)&&t.length){var n,r,o=t[0];if("borderBoxSize"in o){var a=o.borderBoxSize,u=Array.isArray(a)?a[0]:a;n=u.inlineSize,r=u.blockSize}else n=e.offsetWidth,r=e.offsetHeight;i({width:n,height:r})}}));return t.observe(e,{box:"border-box"}),function(){return t.unobserve(e)}}i(void 0)}),[e]),r}},60585:function(e,t,n){"use strict";var r,o=n(12897).default,i=n(50883).default,a=Object.create,u=Object.defineProperty,s=Object.getOwnPropertyDescriptor,c=Object.getOwnPropertyNames,l=Object.getPrototypeOf,f=Object.prototype.hasOwnProperty,d=function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,a=i(c(t));try{var l=function(){var i=o.value;f.call(e,i)||i===n||u(e,i,{get:function(){return t[i]},enumerable:!(r=s(t,i))||r.enumerable})};for(a.s();!(o=a.n()).done;)l()}catch(d){a.e(d)}finally{a.f()}}return e},p={};!function(e,t){for(var n in t)u(e,n,{get:t[n],enumerable:!0})}(p,{Root:function(){return m},VisuallyHidden:function(){return y}}),e.exports=(r=p,d(u({},"__esModule",{value:!0}),r));var h=function(e,t,n){return n=null!=e?a(l(e)):{},d(!t&&e&&e.__esModule?n:u(n,"default",{value:e,enumerable:!0}),e)}(n(9950)),v=n(5899),g=n(44414),y=h.forwardRef((function(e,t){return(0,g.jsx)(v.Primitive.span,o(o({},e),{},{ref:t,style:o({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"},e.style)}))}));y.displayName="VisuallyHidden";var m=y},50841:function(e,t,n){"use strict";var r=n(17383).default,o=n(34579).default,i=n(18336).default,a=n(29511).default,u=n(24994).default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=u(n(9950));n(1848);var c=function(e){function t(){return r(this,t),i(this,t,arguments)}return a(t,e),o(t,[{key:"render",value:function(){return s.default.createElement("div",{className:"empty-loading-page"},s.default.createElement("div",{className:"lds-ripple page-centered"},s.default.createElement("div",null),s.default.createElement("div",null)))}}])}(s.default.Component);t.default=c},79037:function(e,t,n){"use strict";var r=n(24994).default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.onSaveContent,n=e.onContentChanged,r=e.readonly,u=(0,a.useEditor)();return(0,o.useEffect)((function(){u.updateInstanceState({isReadonly:r})}),[]),(0,o.useEffect)((function(){return u.store.listen((function(e){var t=(0,a.getSnapshot)(u.store).document;n(t)}),{scope:"document",source:"user"})}),[u.store,n]),(0,o.useEffect)((function(){var e=function(e){if((0,i.default)("mod+s")(e)){e.preventDefault();var n=(0,a.getSnapshot)(u.store).document;t(n)}};return document.addEventListener("keydown",e),function(){document.removeEventListener("keydown",e)}}),[u.store,t]),null};var o=n(9950),i=r(n(75168)),a=n(74049)},98055:function(e,t,n){"use strict";var r=n(85715).default,o=n(24994).default,i=n(6305).default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(n(9950)),u=n(74049),s=o(n(79037));n(52425);t.default=function(e){var t=e.docContent,n=void 0===t?null:t,o=e.onContentChanged,i=e.onSaveContent,c=e.readonly,l=(0,a.useState)({status:"loading"}),f=r(l,2),d=f[0],p=f[1];return(0,a.useEffect)((function(){var e=(0,u.createTLStore)();(0,u.loadSnapshot)(e,n),p({store:e,status:"ready"})}),[]),a.default.createElement(u.Tldraw,{autoFocus:!0,store:d,persistenceKey:"example"},a.default.createElement(s.default,{onSaveContent:i,onContentChanged:o,readonly:c}))}},93757:function(e,t,n){"use strict";var r=n(24994).default;Object.defineProperty(t,"Y",{enumerable:!0,get:function(){return o.default}});var o=r(n(61338))},61338:function(e,t,n){"use strict";var r=n(24994).default,o=n(6305).default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=o(n(9950)),a=r(n(50841)),u=r(n(98055));n(4310);var s={document:null};t.default=function(e){var t=e.isFetching,n=e.readonly,r=void 0!==n&&n,o=e.document,c=void 0===o?s:o,l=e.onContentChanged,f=e.onSave,d=(0,i.useCallback)((function(e){l&&l(e)}),[l]),p=(0,i.useCallback)((function(e){f&&f(e)}),[f]);return t?i.default.createElement("div",{className:"tldraw-editor-container"},i.default.createElement(a.default,null)):i.default.createElement("div",{className:"tldraw-editor-container"},i.default.createElement(u.default,{docContent:c,onContentChanged:d,onSaveContent:p,readonly:r}))}},57777:function(e,t,n){"use strict";var r,o=n(50883).default,i=Object.defineProperty,a=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,c=function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var c,l=o(u(t));try{var f=function(){var o=c.value;s.call(e,o)||o===n||i(e,o,{get:function(){return t[o]},enumerable:!(r=a(t,o))||r.enumerable})};for(l.s();!(c=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e},l=function(e,t,n){return c(e,t,"default"),n&&c(n,t,"default")},f={};!function(e,t){for(var n in t)i(e,n,{get:t[n],enumerable:!0})}(f,{Arc2d:function(){return Be.Arc2d},BaseBoxShapeTool:function(){return ue.BaseBoxShapeTool},BaseBoxShapeUtil:function(){return ne.BaseBoxShapeUtil},BindingUtil:function(){return q.BindingUtil},BoundsSnaps:function(){return $.BoundsSnaps},Box:function(){return Ne.Box},Circle2d:function(){return Ve.Circle2d},ClickManager:function(){return W.ClickManager},ContainerProvider:function(){return ve.ContainerProvider},CubicBezier2d:function(){return ze.CubicBezier2d},CubicSpline2d:function(){return He.CubicSpline2d},DEFAULT_ANIMATION_OPTIONS:function(){return K.DEFAULT_ANIMATION_OPTIONS},DEFAULT_CAMERA_OPTIONS:function(){return K.DEFAULT_CAMERA_OPTIONS},DefaultBackground:function(){return S.DefaultBackground},DefaultBrush:function(){return x.DefaultBrush},DefaultCanvas:function(){return P.DefaultCanvas},DefaultCollaboratorHint:function(){return O.DefaultCollaboratorHint},DefaultCursor:function(){return k.DefaultCursor},DefaultErrorFallback:function(){return _.DefaultErrorFallback},DefaultGrid:function(){return j.DefaultGrid},DefaultHandle:function(){return I.DefaultHandle},DefaultHandles:function(){return T.DefaultHandles},DefaultScribble:function(){return E.DefaultScribble},DefaultSelectionBackground:function(){return C.DefaultSelectionBackground},DefaultSelectionForeground:function(){return M.DefaultSelectionForeground},DefaultShapeIndicator:function(){return A.DefaultShapeIndicator},DefaultShapeIndicators:function(){return D.DefaultShapeIndicators},DefaultSnapIndicator:function(){return R.DefaultSnapIndicator},DefaultSpinner:function(){return N.DefaultSpinner},DefaultSvgDefs:function(){return L.DefaultSvgDefs},EASINGS:function(){return Fe.EASINGS},EMPTY_ARRAY:function(){return p.EMPTY_ARRAY},EVENT_NAME_MAP:function(){return fe.EVENT_NAME_MAP},Edge2d:function(){return Ke.Edge2d},EdgeScrollManager:function(){return Y.EdgeScrollManager},Editor:function(){return G.Editor},EditorContext:function(){return ye.EditorContext},EffectScheduler:function(){return p.EffectScheduler},Ellipse2d:function(){return Ge.Ellipse2d},ErrorBoundary:function(){return y.ErrorBoundary},ErrorScreen:function(){return g.ErrorScreen},Geometry2d:function(){return qe.Geometry2d},Group2d:function(){return We.Group2d},GroupShapeUtil:function(){return oe.GroupShapeUtil},HALF_PI:function(){return et.HALF_PI},HTMLContainer:function(){return m.HTMLContainer},HandleSnaps:function(){return Q.HandleSnaps},HistoryManager:function(){return X.HistoryManager},LicenseManager:function(){return De.LicenseManager},LoadingScreen:function(){return g.LoadingScreen},LocalIndexedDb:function(){return v.LocalIndexedDb},Mat:function(){return Le.Mat},MenuClickCapture:function(){return b.MenuClickCapture},OptionalErrorBoundary:function(){return y.OptionalErrorBoundary},PI:function(){return et.PI},PI2:function(){return et.PI2},Point2d:function(){return Ye.Point2d},Polygon2d:function(){return Xe.Polygon2d},Polyline2d:function(){return Ze.Polyline2d},ROTATE_CORNER_TO_SELECTION_CORNER:function(){return Ne.ROTATE_CORNER_TO_SELECTION_CORNER},ReadonlySharedStyleMap:function(){return tt.ReadonlySharedStyleMap},Rectangle2d:function(){return $e.Rectangle2d},SIDES:function(){return K.SIDES},SIN:function(){return et.SIN},SVGContainer:function(){return w.SVGContainer},ScribbleManager:function(){return Z.ScribbleManager},ShapeUtil:function(){return re.ShapeUtil},SharedStyleMap:function(){return tt.SharedStyleMap},SnapManager:function(){return J.SnapManager},Stadium2d:function(){return Qe.Stadium2d},StateNode:function(){return ce.StateNode},TAB_ID:function(){return F.TAB_ID},Table:function(){return v.Table},TextManager:function(){return ee.TextManager},TldrawEditor:function(){return g.TldrawEditor},USER_COLORS:function(){return B.USER_COLORS},UserPreferencesManager:function(){return te.UserPreferencesManager},Vec:function(){return Ue.Vec},angleDistance:function(){return et.angleDistance},applyRotationToSnapshotShapes:function(){return pt.applyRotationToSnapshotShapes},approximately:function(){return et.approximately},areAnglesCompatible:function(){return et.areAnglesCompatible},atom:function(){return p.atom},average:function(){return et.average},canonicalizeRotation:function(){return et.canonicalizeRotation},centerOfCircleFromThreePoints:function(){return et.centerOfCircleFromThreePoints},clamp:function(){return et.clamp},clampRadians:function(){return et.clampRadians},clockwiseAngleDist:function(){return et.clockwiseAngleDist},computed:function(){return p.computed},coreShapes:function(){return H.coreShapes},counterClockwiseAngleDist:function(){return et.counterClockwiseAngleDist},createDeepLinkString:function(){return ot.createDeepLinkString},createSessionStateSnapshotSignal:function(){return F.createSessionStateSnapshotSignal},createTLSchemaFromUtils:function(){return V.createTLSchemaFromUtils},createTLStore:function(){return V.createTLStore},createTLUser:function(){return z.createTLUser},dataUrlToFile:function(){return nt.dataUrlToFile},debugEnableLicensing:function(){return mt},debugFlags:function(){return rt.debugFlags},defaultTldrawOptions:function(){return Re.defaultTldrawOptions},defaultUserPreferences:function(){return B.defaultUserPreferences},degreesToRadians:function(){return et.degreesToRadians},extractSessionStateFromLegacySnapshot:function(){return F.extractSessionStateFromLegacySnapshot},featureFlags:function(){return rt.featureFlags},getArcMeasure:function(){return et.getArcMeasure},getCursor:function(){return ge.getCursor},getDefaultCdnBaseUrl:function(){return nt.getDefaultCdnBaseUrl},getFreshUserPreferences:function(){return B.getFreshUserPreferences},getIncrementedName:function(){return at.getIncrementedName},getPerfectDashProps:function(){return ie.getPerfectDashProps},getPointInArcT:function(){return et.getPointInArcT},getPointOnCircle:function(){return et.getPointOnCircle},getPointerInfo:function(){return ut.getPointerInfo},getPointsOnArc:function(){return et.getPointsOnArc},getPolygonVertices:function(){return et.getPolygonVertices},getRotationSnapshot:function(){return pt.getRotationSnapshot},getSnapshot:function(){return U.getSnapshot},getSvgPathFromPoints:function(){return st.getSvgPathFromPoints},getUserPreferences:function(){return B.getUserPreferences},hardReset:function(){return vt.hardReset},hardResetEditor:function(){return ct.hardResetEditor},inlineBase64AssetStore:function(){return V.inlineBase64AssetStore},intersectCircleCircle:function(){return Je.intersectCircleCircle},intersectCirclePolygon:function(){return Je.intersectCirclePolygon},intersectCirclePolyline:function(){return Je.intersectCirclePolyline},intersectLineSegmentCircle:function(){return Je.intersectLineSegmentCircle},intersectLineSegmentLineSegment:function(){return Je.intersectLineSegmentLineSegment},intersectLineSegmentPolygon:function(){return Je.intersectLineSegmentPolygon},intersectLineSegmentPolyline:function(){return Je.intersectLineSegmentPolyline},intersectPolygonBounds:function(){return Je.intersectPolygonBounds},intersectPolygonPolygon:function(){return Je.intersectPolygonPolygon},isAccelKey:function(){return lt.isAccelKey},isSafeFloat:function(){return et.isSafeFloat},linesIntersect:function(){return Je.linesIntersect},loadSessionStateSnapshotIntoStore:function(){return F.loadSessionStateSnapshotIntoStore},loadSnapshot:function(){return U.loadSnapshot},loopToHtmlElement:function(){return it.loopToHtmlElement},maybeSnapToGrid:function(){return se.maybeSnapToGrid},normalizeWheel:function(){return ft.normalizeWheel},openWindow:function(){return yt.openWindow},parseDeepLinkString:function(){return ot.parseDeepLinkString},perimeterOfEllipse:function(){return et.perimeterOfEllipse},pointInPolygon:function(){return et.pointInPolygon},polygonIntersectsPolyline:function(){return Je.polygonIntersectsPolyline},polygonsIntersect:function(){return Je.polygonsIntersect},precise:function(){return et.precise},preventDefault:function(){return it.preventDefault},radiansToDegrees:function(){return et.radiansToDegrees},rangeIntersection:function(){return et.rangeIntersection},react:function(){return p.react},refreshPage:function(){return dt.refreshPage},releasePointerCapture:function(){return it.releasePointerCapture},resizeBox:function(){return ae.resizeBox},rotateSelectionHandle:function(){return Ne.rotateSelectionHandle},runtime:function(){return ht.runtime},sanitizeId:function(){return Ee.sanitizeId},setPointerCapture:function(){return it.setPointerCapture},setRuntimeOverrides:function(){return ht.setRuntimeOverrides},setUserPreferences:function(){return B.setUserPreferences},shortAngleDist:function(){return et.shortAngleDist},snapAngle:function(){return et.snapAngle},stopEventPropagation:function(){return it.stopEventPropagation},suffixSafeId:function(){return Ee.suffixSafeId},tlenv:function(){return de.tlenv},tlmenus:function(){return pe.tlmenus},tltime:function(){return he.tltime},toDomPrecision:function(){return et.toDomPrecision},toFixed:function(){return et.toFixed},toPrecision:function(){return et.toPrecision},track:function(){return h.track},transact:function(){return p.transact},transaction:function(){return p.transaction},uniq:function(){return gt.uniq},useAtom:function(){return h.useAtom},useComputed:function(){return h.useComputed},useContainer:function(){return ve.useContainer},useContainerIfExists:function(){return ve.useContainerIfExists},useDelaySvgExport:function(){return le.useDelaySvgExport},useEditor:function(){return ye.useEditor},useEditorComponents:function(){return me.useEditorComponents},useEvent:function(){return be.useEvent},useGlobalMenuIsOpen:function(){return we.useGlobalMenuIsOpen},useIsCropping:function(){return xe.useIsCropping},useIsDarkMode:function(){return Pe.useIsDarkMode},useIsEditing:function(){return Oe.useIsEditing},useLocalStore:function(){return ke.useLocalStore},useMaybeEditor:function(){return ye.useMaybeEditor},useOnMount:function(){return g.useOnMount},usePassThroughWheelEvents:function(){return _e.usePassThroughWheelEvents},usePeerIds:function(){return je.usePeerIds},usePresence:function(){return Ie.usePresence},useQuickReactor:function(){return h.useQuickReactor},useReactiveEvent:function(){return be.useReactiveEvent},useReactor:function(){return h.useReactor},useRefState:function(){return Te.useRefState},useSelectionEvents:function(){return Ce.useSelectionEvents},useShallowArrayIdentity:function(){return Se.useShallowArrayIdentity},useShallowObjectIdentity:function(){return Se.useShallowObjectIdentity},useSharedSafeId:function(){return Ee.useSharedSafeId},useStateTracking:function(){return h.useStateTracking},useSvgExportContext:function(){return le.useSvgExportContext},useTLSchemaFromUtils:function(){return Me.useTLSchemaFromUtils},useTLStore:function(){return Me.useTLStore},useTldrawUser:function(){return z.useTldrawUser},useTransform:function(){return Ae.useTransform},useUniqueSafeId:function(){return Ee.useUniqueSafeId},useValue:function(){return h.useValue},userTypeValidator:function(){return B.userTypeValidator},whyAmIRunning:function(){return p.whyAmIRunning}}),e.exports=(r=f,c(i({},"__esModule",{value:!0}),r));var d=n(30645),p=(n(70294),n(55039),n(27900),n(69198),n(81589),n(81501)),h=n(61267),v=n(31769);l(f,n(75881),e.exports),l(f,n(85191),e.exports),l(f,n(30645),e.exports),l(f,n(98556),e.exports);var g=n(25862),y=n(23038),m=n(59230),b=n(31185),w=n(36765),S=n(62430),x=n(4816),P=n(34866),O=n(19911),k=n(77316),_=n(8020),j=n(65378),I=n(88400),T=n(76559),E=n(48134),C=n(28182),M=n(2143),A=n(87656),D=n(70775),R=n(78468),N=n(57657),L=n(38898),U=n(68607),F=n(32511),B=n(7115),V=n(41181),z=n(23257),H=n(10155),K=n(63792),G=n(41862),q=n(51851),W=n(23041),Y=n(20779),X=n(97689),Z=n(29403),$=n(25850),Q=n(4923),J=n(57799),ee=n(8806),te=n(47700),ne=n(6071),re=n(16023),oe=n(71004),ie=n(28015),ae=n(39335),ue=n(18956),se=n(47815),ce=n(50646),le=n(73470),fe=n(79741),de=n(55015),pe=n(49098),he=n(61873),ve=n(77374),ge=n(50387),ye=n(10076),me=n(93800),be=n(88797),we=n(32725),Se=n(89019),xe=n(33059),Pe=n(9166),Oe=n(18229),ke=n(58473),_e=n(2321),je=n(89071),Ie=n(97592),Te=n(55367),Ee=n(17625),Ce=n(92194),Me=n(88996),Ae=n(34081),De=n(70759),Re=n(75731),Ne=n(24161),Le=n(84906),Ue=n(45650),Fe=n(19526),Be=n(41435),Ve=n(48415),ze=n(90774),He=n(92368),Ke=n(59490),Ge=n(29261),qe=n(87515),We=n(65388),Ye=n(15657),Xe=n(47961),Ze=n(8779),$e=n(12922),Qe=n(82228),Je=n(40797),et=n(63557),tt=n(80020),nt=n(61114),rt=n(1074),ot=n(82196),it=n(90923),at=n(12136),ut=n(17054),st=n(87485),ct=n(9098),lt=n(95518),ft=n(20573),dt=n(11367),pt=n(83889),ht=n(24403),vt=n(84507),gt=n(44246),yt=n(6196);function mt(){}(0,d.registerTldrawLibraryVersion)("@tldraw/editor","3.7.2","cjs")},25862:function(e,t,n){"use strict";var r,o=n(12897).default,i=n(85715).default,a=n(91847).default,u=n(50883).default,s=["store","components","className","user","options"],c=["store","user"],l=Object.create,f=Object.defineProperty,d=Object.getOwnPropertyDescriptor,p=Object.getOwnPropertyNames,h=Object.getPrototypeOf,v=Object.prototype.hasOwnProperty,g=function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,i=u(p(t));try{var a=function(){var i=o.value;v.call(e,i)||i===n||f(e,i,{get:function(){return t[i]},enumerable:!(r=d(t,i))||r.enumerable})};for(i.s();!(o=i.n()).done;)a()}catch(s){i.e(s)}finally{i.f()}}return e},y=function(e,t,n){return n=null!=e?l(h(e)):{},g(!t&&e&&e.__esModule?n:f(n,"default",{value:e,enumerable:!0}),e)},m={};!function(e,t){for(var n in t)f(e,n,{get:t[n],enumerable:!0})}(m,{ErrorScreen:function(){return te},LoadingScreen:function(){return ee},TL_CONTAINER_CLASS:function(){return q},TldrawEditor:function(){return W},useOnMount:function(){return ne}}),e.exports=(r=m,g(f({},"__esModule",{value:!0}),r));var b=n(44414),w=n(75881),S=n(30645),x=y(n(9950)),P=y(n(48738)),O=n(35057),k=n(23038),_=n(8020),j=n(23257),I=n(41862),T=n(77374),E=n(50387),C=n(99338),M=n(10076),A=n(93800),D=n(88797),R=n(12043),N=n(89019),L=n(58473),U=n(55367),F=n(5367),B=n(59508),V=n(29811),z=n(90923),H=[],K=[],G=[],q="tl-container",W=(0,x.memo)((function(e){var t,n,r,u=e.store,c=e.components,l=e.className,f=e.user,d=e.options,p=a(e,s),h=(0,x.useState)(null),v=i(h,2),g=v[0],y=v[1],m=(0,x.useMemo)((function(){return null!==f&&void 0!==f?f:(0,j.createTLUser)()}),[f]),I=void 0===(null===c||void 0===c?void 0:c.ErrorFallback)?_.DefaultErrorFallback:null===c||void 0===c?void 0:c.ErrorFallback,E=o(o({},p),{},{shapeUtils:null!==(t=p.shapeUtils)&&void 0!==t?t:H,bindingUtils:null!==(n=p.bindingUtils)&&void 0!==n?n:K,tools:null!==(r=p.tools)&&void 0!==r?r:G,components:c,options:(0,N.useShallowObjectIdentity)(d)});return(0,b.jsx)("div",{ref:y,"data-tldraw":O.version,draggable:!1,className:(0,P.default)("".concat(q," tl-theme__light"),l),onPointerDown:z.stopEventPropagation,tabIndex:-1,children:(0,b.jsx)(k.OptionalErrorBoundary,{fallback:I,onError:function(e){return(0,S.annotateError)(e,{tags:{origin:"react.tldraw-before-app"}})},children:g&&(0,b.jsx)(B.LicenseProvider,{licenseKey:p.licenseKey,children:(0,b.jsx)(T.ContainerProvider,{container:g,children:(0,b.jsx)(A.EditorComponentsProvider,{overrides:c,children:u?u instanceof w.Store?(0,b.jsx)($,o(o({},E),{},{store:u,user:m})):(0,b.jsx)(X,o(o({},E),{},{store:u,user:m})):(0,b.jsx)(Y,o(o({},E),{},{store:u,user:m}))})})})})})}));function Y(e){var t=e.defaultName,n=e.snapshot,r=e.initialData,i=e.shapeUtils,a=e.bindingUtils,u=e.persistenceKey,s=e.sessionId,c=e.user,l=e.assets,f=e.migrations,d=(0,L.useLocalStore)({shapeUtils:i,bindingUtils:a,initialData:r,persistenceKey:u,sessionId:s,defaultName:t,snapshot:n,assets:l,migrations:f});return(0,b.jsx)(X,o(o({},e),{},{store:d,user:c}))}var X=(0,x.memo)((function(e){var t=e.store,n=e.user,r=a(e,c),i=(0,T.useContainer)();(0,x.useLayoutEffect)((function(){"dark"===n.userPreferences.get().colorScheme&&(i.classList.remove("tl-theme__light"),i.classList.add("tl-theme__dark"))}),[i,n]);var u=(0,A.useEditorComponents)().LoadingScreen;switch(t.status){case"error":throw t.error;case"loading":return u?(0,b.jsx)(u,{}):null}return(0,b.jsx)($,o(o({},r),{},{store:t.store,user:n}))})),Z=function(){return document.location.search.includes("tldraw_preserve_focus")};function $(e){var t=e.onMount,n=e.children,r=e.store,a=e.tools,u=e.shapeUtils,s=e.bindingUtils,c=e.user,l=e.initialState,f=e.autoFocus,d=void 0===f||f,p=e.inferDarkMode,h=e.cameraOptions,v=e.options,g=e.licenseKey,y=e.deepLinks,m=e.isShapeHidden,w=(0,A.useEditorComponents)().ErrorFallback,S=(0,T.useContainer)(),P=(0,U.useRefState)(null),O=i(P,2),_=O[0],j=O[1],E=(0,x.useRef)(null),C=(0,N.useShallowObjectIdentity)(!0===y?{}:y),D=(0,x.useRef)({autoFocus:d&&!Z(),inferDarkMode:p,initialState:l,cameraOptions:h,deepLinks:C});(0,x.useLayoutEffect)((function(){D.current={autoFocus:d&&!Z(),inferDarkMode:p,initialState:l,cameraOptions:h,deepLinks:C}}),[d,p,l,h,C]),(0,x.useLayoutEffect)((function(){var e,t=D.current,n=t.autoFocus,i=t.inferDarkMode,l=t.initialState,f=t.cameraOptions,d=t.deepLinks,p=new I.Editor({store:r,shapeUtils:u,bindingUtils:s,tools:a,getContainer:function(){return S},user:c,initialState:l,autoFocus:n,inferDarkMode:i,cameraOptions:f,options:v,licenseKey:g,isShapeHidden:m});return p.updateViewportScreenBounds(null!==(e=E.current)&&void 0!==e?e:S),d&&(null!==d&&void 0!==d&&d.getUrl?p.navigateToDeepLink(o(o({},d),{},{url:d.getUrl(p)})):p.navigateToDeepLink(d)),j(p),function(){p.dispose()}}),[s,S,v,u,r,a,c,j,g,m]),(0,x.useLayoutEffect)((function(){if(_)return C?_.registerDeepLinkListener(C):void 0}),[_,C]),(0,x.useLayoutEffect)((function(){_&&h&&_.setCameraOptions(h)}),[_,h]);var R=(0,x.useSyncExternalStore)((0,x.useCallback)((function(e){return _?(_.on("crash",e),function(){return _.off("crash",e)}):function(){}}),[_]),(function(){var e;return null!==(e=null===_||void 0===_?void 0:_.getCrashingError())&&void 0!==e?e:null}));(0,x.useEffect)((function(){if(_)return d&&Z()?(_.getContainer().addEventListener("pointerdown",e),document.body.addEventListener("pointerdown",t),function(){var n;null===(n=_.getContainer())||void 0===n||n.removeEventListener("pointerdown",e),document.body.removeEventListener("pointerdown",t)}):void 0;function e(){_&&_.focus()}function t(){_&&_.blur()}}),[_,d]);var L=(0,A.useEditorComponents)().Canvas;return _?(0,b.jsx)(k.OptionalErrorBoundary,{fallback:w,onError:function(e){return _.annotateError(e,{origin:"react.tldraw",willCrashApp:!0})},children:R?(0,b.jsx)(J,{crashingError:R}):(0,b.jsx)(M.EditorProvider,{editor:_,children:(0,b.jsxs)(Q,{onMount:t,children:[null!==n&&void 0!==n?n:L?(0,b.jsx)(L,{},_.contextId):null,(0,b.jsx)(V.Watermark,{})]})})}):(0,b.jsx)("div",{className:"tl-canvas",ref:E})}function Q(e){var t=e.children,n=e.onMount;return(0,F.useZoomCss)(),(0,E.useCursor)(),(0,C.useDarkMode)(),(0,R.useForceUpdate)(),ne((function(e){var t=e.store.props.onMount(e),r=null===n||void 0===n?void 0:n(e);return function(){null===t||void 0===t||t(),null===r||void 0===r||r()}})),t}function J(e){throw e.crashingError}function ee(e){var t=e.children;return(0,b.jsx)("div",{className:"tl-loading",children:t})}function te(e){var t=e.children;return(0,b.jsx)("div",{className:"tl-loading",children:t})}function ne(e){var t=(0,M.useEditor)(),n=(0,D.useEvent)((function(t){var n=void 0;return t.run((function(){n=null===e||void 0===e?void 0:e(t),t.emit("mount")}),{history:"ignore"}),window.tldrawReady=!0,n}));x.default.useLayoutEffect((function(){if(t)return null===n||void 0===n?void 0:n(t)}),[t,n])}},23038:function(e,t,n){"use strict";var r,o=n(12897).default,i=n(91847).default,a=n(17383).default,u=n(34579).default,s=n(18336).default,c=n(29511).default,l=n(43693).default,f=n(50883).default,d=["children","fallback"],p=Object.create,h=Object.defineProperty,v=Object.getOwnPropertyDescriptor,g=Object.getOwnPropertyNames,y=Object.getPrototypeOf,m=Object.prototype.hasOwnProperty,b=function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,i=f(g(t));try{var a=function(){var i=o.value;m.call(e,i)||i===n||h(e,i,{get:function(){return t[i]},enumerable:!(r=v(t,i))||r.enumerable})};for(i.s();!(o=i.n()).done;)a()}catch(u){i.e(u)}finally{i.f()}}return e},w={};!function(e,t){for(var n in t)h(e,n,{get:t[n],enumerable:!0})}(w,{ErrorBoundary:function(){return O},OptionalErrorBoundary:function(){return k}}),e.exports=(r=w,b(h({},"__esModule",{value:!0}),r));var S=n(44414),x=function(e,t,n){return n=null!=e?p(y(e)):{},b(!t&&e&&e.__esModule?n:h(n,"default",{value:e,enumerable:!0}),e)}(n(9950)),P={error:null},O=function(e){function t(){var e;a(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return e=s(this,t,[].concat(r)),l(e,"state",P),e}return c(t,e),u(t,[{key:"componentDidCatch",value:function(e){var t,n;null===(t=(n=this.props).onError)||void 0===t||t.call(n,e)}},{key:"render",value:function(){var e=this.state.error;if(null!==e){var t=this.props.fallback;return(0,S.jsx)(t,{error:e})}return this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return{error:e}}}])}(x.Component);function k(e){var t=e.children,n=e.fallback,r=i(e,d);return null===n?t:(0,S.jsx)(O,o(o({fallback:n},r),{},{children:t}))}},66491:function(e,t,n){"use strict";var r,o=n(41132).default,i=n(85715).default,a=n(50883).default,u=Object.defineProperty,s=Object.getOwnPropertyDescriptor,c=Object.getOwnPropertyNames,l=Object.prototype.hasOwnProperty,f={};!function(e,t){for(var n in t)u(e,n,{get:t[n],enumerable:!0})}(f,{GeometryDebuggingView:function(){return m}}),e.exports=(r=f,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,i=a(c(t));try{var f=function(){var i=o.value;l.call(e,i)||i===n||u(e,i,{get:function(){return t[i]},enumerable:!(r=s(t,i))||r.enumerable})};for(i.s();!(o=i.n()).done;)f()}catch(d){i.e(d)}finally{i.f()}}return e}(u({},"__esModule",{value:!0}),r));var d=n(44414),p=n(61267),h=n(30645),v=n(9950),g=n(10076),y=n(65388);var m=(0,p.track)((function(e){var t=e.showStroke,n=void 0===t||t,r=e.showVertices,o=void 0===r||r,a=e.showClosestPointOnOutline,u=void 0===a||a,s=(0,g.useEditor)();!function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=(0,v.useState)(0),n=i(t,2),r=(n[0],n[1]),o=(0,g.useEditor)();(0,v.useEffect)((function(){if(e){var t=function(){return r((function(e){return e+1}))};return o.on("tick",t),function(){o.off("tick",t)}}}),[o,e])}(u);var c=s.getZoomLevel(),l=s.getRenderingShapes(),f=s.inputs.currentPagePoint;return(0,d.jsx)("svg",{style:{position:"absolute",pointerEvents:"none",zIndex:999999999,top:0,left:0,overflow:"visible"},children:l.map((function(e){var t,r=s.getShape(e.id);if("group"===r.type)return null;var i=s.getShapeGeometry(r),a=s.getShapePageTransform(r),l=s.getPointInShapeSpace(r,f),p=i.nearestPoint(l),v=i.distanceToPoint(l,!0),g=Math.abs(v)*c,y=v<0,m=i.vertices;return(0,d.jsxs)("g",{transform:a.toCssString(),strokeLinecap:"round",strokeLinejoin:"round",children:[n&&(0,d.jsx)("g",{stroke:null!==(t=i.debugColor)&&void 0!==t?t:"red",opacity:"1",strokeWidth:2/c,fill:"none",children:(0,d.jsx)(b,{geometry:i})}),o&&m.map((function(e,t){return(0,d.jsx)("circle",{cx:e.x,cy:e.y,r:2/c,fill:"hsl(".concat((0,h.modulate)(t,[0,m.length-1],[120,200]),", 100%, 50%)"),stroke:"black",strokeWidth:1/c},"v".concat(t))})),u&&g<150&&(0,d.jsx)("line",{x1:p.x,y1:p.y,x2:l.x,y2:l.y,opacity:1-g/150,stroke:y?"goldenrod":"dodgerblue",strokeWidth:2/c})]},e.id+"_outline")}))})}));function b(e){var t=e.geometry;return t instanceof y.Group2d?(0,d.jsx)(d.Fragment,{children:[].concat(o(t.children),o(t.ignoredChildren)).map((function(e,t){return(0,d.jsx)(b,{geometry:e},t)}))}):(0,d.jsx)("path",{d:t.toSimpleSvgPath()})}},59230:function(e,t,n){"use strict";var r,o=n(12897).default,i=n(91847).default,a=n(50883).default,u=["children","className"],s=Object.create,c=Object.defineProperty,l=Object.getOwnPropertyDescriptor,f=Object.getOwnPropertyNames,d=Object.getPrototypeOf,p=Object.prototype.hasOwnProperty,h=function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,i=a(f(t));try{var u=function(){var i=o.value;p.call(e,i)||i===n||c(e,i,{get:function(){return t[i]},enumerable:!(r=l(t,i))||r.enumerable})};for(i.s();!(o=i.n()).done;)u()}catch(s){i.e(s)}finally{i.f()}}return e},v={};!function(e,t){for(var n in t)c(e,n,{get:t[n],enumerable:!0})}(v,{HTMLContainer:function(){return m}}),e.exports=(r=v,h(c({},"__esModule",{value:!0}),r));var g=n(44414),y=function(e,t,n){return n=null!=e?s(d(e)):{},h(!t&&e&&e.__esModule?n:c(n,"default",{value:e,enumerable:!0}),e)}(n(48738));function m(e){var t=e.children,n=e.className,r=void 0===n?"":n,a=i(e,u);return(0,g.jsx)("div",o(o({},a),{},{className:(0,y.default)("tl-html-container",r),children:t}))}},51585:function(e,t,n){"use strict";var r,o=n(85715).default,i=n(50883).default,a=Object.defineProperty,u=Object.getOwnPropertyDescriptor,s=Object.getOwnPropertyNames,c=Object.prototype.hasOwnProperty,l={};!function(e,t){for(var n in t)a(e,n,{get:t[n],enumerable:!0})}(l,{LiveCollaborators:function(){return m}}),e.exports=(r=l,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,l=i(s(t));try{var f=function(){var i=o.value;c.call(e,i)||i===n||a(e,i,{get:function(){return t[i]},enumerable:!(r=u(t,i))||r.enumerable})};for(l.s();!(o=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(a({},"__esModule",{value:!0}),r));var f=n(44414),d=n(61267),p=n(9950),h=n(10076),v=n(93800),g=n(89071),y=n(97592),m=(0,d.track)((function(){return(0,g.usePeerIds)().map((function(e){return(0,f.jsx)(b,{collaboratorId:e},e)}))})),b=(0,d.track)((function(e){var t=e.collaboratorId,n=(0,h.useEditor)(),r=(0,y.usePresence)(t),i=function(e,t){var n,r,i=(0,p.useRef)(null!==(n=null===t||void 0===t?void 0:t.lastActivityTimestamp)&&void 0!==n?n:-1),a=(0,p.useState)((function(){return S(e,Date.now()-i.current)})),u=o(a,2),s=u[0],c=u[1];(0,p.useEffect)((function(){var t=e.timers.setInterval((function(){c(S(e,Date.now()-i.current))}),e.options.collaboratorCheckIntervalMs);return function(){return clearInterval(t)}}),[e]),t&&(i.current=null!==(r=t.lastActivityTimestamp)&&void 0!==r?r:1/0);return s}(n,r);if(!r||r.currentPageId!==n.getCurrentPageId())return null;switch(i){case"inactive":var a=n.getInstanceState(),u=a.followingUserId,s=a.highlightedUserIds;if(u!==r.userId&&!s.includes(r.userId))return null;break;case"idle":var c=n.getInstanceState().highlightedUserIds;if(r.followingUserId===n.user.getId()&&!r.chatMessage&&!c.includes(r.userId))return null}return(0,f.jsx)(w,{latestPresence:r})})),w=(0,d.track)((function(e){var t=e.latestPresence,n=(0,h.useEditor)(),r=(0,v.useEditorComponents)(),o=r.CollaboratorBrush,i=r.CollaboratorScribble,a=r.CollaboratorCursor,u=r.CollaboratorHint,s=r.CollaboratorShapeIndicator,c=n.getZoomLevel(),l=n.getViewportPageBounds(),d=t.userId,p=t.chatMessage,g=t.brush,y=t.scribbles,m=t.selectedShapeIds,b=t.userName,w=t.cursor,S=t.color;if(!w)return null;var x=!(w.x<l.minX-12/c||w.y<l.minY-16/c||w.x>l.maxX-12/c||w.y>l.maxY-16/c);return(0,f.jsxs)(f.Fragment,{children:[g&&o?(0,f.jsx)(o,{className:"tl-collaborator__brush",brush:g,color:S,opacity:.1},d+"_brush"):null,x&&a?(0,f.jsx)(a,{className:"tl-collaborator__cursor",point:w,color:S,zoom:c,name:"New User"!==b?b:null,chatMessage:null!==p&&void 0!==p?p:""},d+"_cursor"):u?(0,f.jsx)(u,{className:"tl-collaborator__cursor-hint",point:w,color:S,zoom:c,viewport:l},d+"_cursor_hint"):null,i&&y.length?(0,f.jsx)(f.Fragment,{children:y.map((function(e){return(0,f.jsx)(i,{className:"tl-collaborator__scribble",scribble:e,color:S,zoom:c,opacity:"laser"===e.color?.5:.1},d+"_scribble_"+e.id)}))}):null,s&&m.filter((function(e){return!n.isShapeHidden(e)})).map((function(e){return(0,f.jsx)(s,{className:"tl-collaborator__shape-indicator",shapeId:e,color:S,opacity:.5},d+"_"+e)}))]})}));function S(e,t){return t>e.options.collaboratorInactiveTimeoutMs?"inactive":t>e.options.collaboratorIdleTimeoutMs?"idle":"active"}},31185:function(e,t,n){"use strict";var r,o=n(12897).default,i=n(85715).default,a=n(50883).default,u=Object.defineProperty,s=Object.getOwnPropertyDescriptor,c=Object.getOwnPropertyNames,l=Object.prototype.hasOwnProperty,f={};!function(e,t){for(var n in t)u(e,n,{get:t[n],enumerable:!0})}(f,{MenuClickCapture:function(){return m}}),e.exports=(r=f,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,i=a(c(t));try{var f=function(){var i=o.value;l.call(e,i)||i===n||u(e,i,{get:function(){return t[i]},enumerable:!(r=s(t,i))||r.enumerable})};for(i.s();!(o=i.n()).done;)f()}catch(d){i.e(d)}finally{i.f()}}return e}(u({},"__esModule",{value:!0}),r));var d=n(44414),p=n(61267),h=n(9950),v=n(87980),g=n(10076),y=n(45650);function m(){var e=(0,g.useEditor)(),t=(0,p.useValue)("is menu open",(function(){return e.menus.hasAnyOpenMenus()}),[e]),n=(0,h.useState)(!1),r=i(n,2),a=r[0],u=r[1],s=t||a,c=(0,v.useCanvasEvents)(),l=(0,h.useRef)({isDown:!1,isDragging:!1,start:new y.Vec}),f=(0,h.useCallback)((function(t){0===t.button&&(u(!0),l.current={isDown:!0,isDragging:!1,start:new y.Vec(t.clientX,t.clientY)}),e.menus.clearOpenMenus()}),[e]),m=(0,h.useCallback)((function(t){var n;if(l.current.isDown)if(l.current.isDragging)null===(n=c.onPointerMove)||void 0===n||n.call(c,t);else if(y.Vec.Dist2(l.current.start,new y.Vec(t.clientX,t.clientY))>e.options.dragDistanceSquared){var r,i;l.current=o(o({},l.current),{},{isDown:!0,isDragging:!0});var a=l.current.start,u=a.x,s=a.y;null===(r=c.onPointerDown)||void 0===r||r.call(c,o(o({},t),{},{clientX:u,clientY:s,button:0})),null===(i=c.onPointerMove)||void 0===i||i.call(c,t)}}),[c,e]),b=(0,h.useCallback)((function(e){var t;null===(t=c.onPointerUp)||void 0===t||t.call(c,e),u(!1),l.current={isDown:!1,isDragging:!1,start:new y.Vec(e.clientX,e.clientY)}}),[c]);return s&&(0,d.jsx)("div",o(o({className:"tlui-menu-click-capture","data-testid":"menu-click-capture.content"},c),{},{onPointerDown:f,onPointerMove:m,onPointerUp:b}))}},36765:function(e,t,n){"use strict";var r,o=n(12897).default,i=n(91847).default,a=n(50883).default,u=["children","className"],s=Object.create,c=Object.defineProperty,l=Object.getOwnPropertyDescriptor,f=Object.getOwnPropertyNames,d=Object.getPrototypeOf,p=Object.prototype.hasOwnProperty,h=function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,i=a(f(t));try{var u=function(){var i=o.value;p.call(e,i)||i===n||c(e,i,{get:function(){return t[i]},enumerable:!(r=l(t,i))||r.enumerable})};for(i.s();!(o=i.n()).done;)u()}catch(s){i.e(s)}finally{i.f()}}return e},v={};!function(e,t){for(var n in t)c(e,n,{get:t[n],enumerable:!0})}(v,{SVGContainer:function(){return m}}),e.exports=(r=v,h(c({},"__esModule",{value:!0}),r));var g=n(44414),y=function(e,t,n){return n=null!=e?s(d(e)):{},h(!t&&e&&e.__esModule?n:c(n,"default",{value:e,enumerable:!0}),e)}(n(48738));function m(e){var t=e.children,n=e.className,r=void 0===n?"":n,a=i(e,u);return(0,g.jsx)("svg",o(o({},a),{},{className:(0,y.default)("tl-svg-container",r),children:t}))}},8187:function(e,t,n){"use strict";var r,o=n(50883).default,i=Object.defineProperty,a=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,c={};!function(e,t){for(var n in t)i(e,n,{get:t[n],enumerable:!0})}(c,{InnerShape:function(){return b},InnerShapeBackground:function(){return w},Shape:function(){return m}}),e.exports=(r=c,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var c,l=o(u(t));try{var f=function(){var o=c.value;s.call(e,o)||o===n||i(e,o,{get:function(){return t[o]},enumerable:!(r=a(t,o))||r.enumerable})};for(l.s();!(c=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(i({},"__esModule",{value:!0}),r));var l=n(44414),f=n(61267),d=n(9950),p=n(10076),h=n(93800),v=n(84906),g=n(90923),y=n(23038),m=(0,d.memo)((function(e){var t=e.id,n=e.shape,r=e.util,o=e.index,i=e.backgroundIndex,a=e.opacity,u=(0,p.useEditor)(),s=(0,h.useEditorComponents)().ShapeErrorFallback,c=(0,d.useRef)(null),m=(0,d.useRef)(null),S=(0,d.useRef)({transform:"",clipPath:"none",width:0,height:0,x:0,y:0,isCulled:!1});(0,f.useQuickReactor)("set shape stuff",(function(){var e,n=u.getShape(t);if(n){var r=S.current,o=null!==(e=u.getShapeClipPath(t))&&void 0!==e?e:"none";o!==r.clipPath&&((0,g.setStyleProperty)(c.current,"clip-path",o),(0,g.setStyleProperty)(m.current,"clip-path",o),r.clipPath=o);var i=u.getShapePageTransform(t),a=v.Mat.toCssString(i),s=u.getShapeGeometry(n).bounds;a!==r.transform&&((0,g.setStyleProperty)(c.current,"transform",a),(0,g.setStyleProperty)(m.current,"transform",a),r.transform=a);var l=Math.max(s.width,1),f=Math.max(s.height,1);l===r.width&&f===r.height||((0,g.setStyleProperty)(c.current,"width",l+"px"),(0,g.setStyleProperty)(c.current,"height",f+"px"),(0,g.setStyleProperty)(m.current,"width",l+"px"),(0,g.setStyleProperty)(m.current,"height",f+"px"),r.width=l,r.height=f)}}),[u]),(0,f.useQuickReactor)("set opacity and z-index",(function(){var e=c.current,t=m.current;(0,g.setStyleProperty)(e,"opacity",a),(0,g.setStyleProperty)(t,"opacity",a),(0,g.setStyleProperty)(e,"z-index",o),(0,g.setStyleProperty)(t,"z-index",i)}),[a,o,i]),(0,f.useQuickReactor)("set display",(function(){if(u.getShape(t)){var e=u.getCulledShapes().has(t);e!==S.current.isCulled&&((0,g.setStyleProperty)(c.current,"display",e?"none":"block"),(0,g.setStyleProperty)(m.current,"display",e?"none":"block"),S.current.isCulled=e)}}),[u]);var x=(0,d.useCallback)((function(e){return u.annotateError(e,{origin:"shape",willCrashApp:!1})}),[u]);if(!n)return null;var P="fill"in n.props&&"none"!==n.props.fill;return(0,l.jsxs)(l.Fragment,{children:[r.backgroundComponent&&(0,l.jsx)("div",{ref:m,className:"tl-shape tl-shape-background","data-shape-type":n.type,"data-shape-id":n.id,draggable:!1,children:(0,l.jsx)(y.OptionalErrorBoundary,{fallback:s,onError:x,children:(0,l.jsx)(w,{shape:n,util:r})})}),(0,l.jsx)("div",{ref:c,className:"tl-shape","data-shape-type":n.type,"data-shape-is-filled":P,"data-shape-id":n.id,draggable:!1,children:(0,l.jsx)(y.OptionalErrorBoundary,{fallback:s,onError:x,children:(0,l.jsx)(b,{shape:n,util:r})})})]})})),b=(0,d.memo)((function(e){var t=e.shape,n=e.util;return(0,f.useStateTracking)("InnerShape:"+t.type,(function(){return n.component(n.editor.store.unsafeGetWithoutCapture(t.id))}),[n,t.id])}),(function(e,t){return e.shape.props===t.shape.props&&e.shape.meta===t.shape.meta&&e.util===t.util})),w=(0,d.memo)((function(e){var t=e.shape,n=e.util;return(0,f.useStateTracking)("InnerShape:"+t.type,(function(){var e;return null===(e=n.backgroundComponent)||void 0===e?void 0:e.call(n,n.editor.store.unsafeGetWithoutCapture(t.id))}),[n,t.id])}),(function(e,t){return e.shape.props===t.shape.props&&e.shape.meta===t.shape.meta&&e.util===t.util}))},62430:function(e,t,n){"use strict";var r,o=n(50883).default,i=Object.defineProperty,a=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,c={};!function(e,t){for(var n in t)i(e,n,{get:t[n],enumerable:!0})}(c,{DefaultBackground:function(){return f}}),e.exports=(r=c,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var c,l=o(u(t));try{var f=function(){var o=c.value;s.call(e,o)||o===n||i(e,o,{get:function(){return t[o]},enumerable:!(r=a(t,o))||r.enumerable})};for(l.s();!(c=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(i({},"__esModule",{value:!0}),r));var l=n(44414);function f(){return(0,l.jsx)("div",{className:"tl-background"})}},4816:function(e,t,n){"use strict";var r,o=n(50883).default,i=Object.defineProperty,a=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,c={};!function(e,t){for(var n in t)i(e,n,{get:t[n],enumerable:!0})}(c,{DefaultBrush:function(){return h}}),e.exports=(r=c,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var c,l=o(u(t));try{var f=function(){var o=c.value;s.call(e,o)||o===n||i(e,o,{get:function(){return t[o]},enumerable:!(r=a(t,o))||r.enumerable})};for(l.s();!(c=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(i({},"__esModule",{value:!0}),r));var l=n(44414),f=n(9950),d=n(34081),p=n(63557),h=function(e){var t=e.brush,n=e.color,r=e.opacity,o=e.className,i=(0,f.useRef)(null);(0,d.useTransform)(i,t.x,t.y);var a=(0,p.toDomPrecision)(Math.max(1,t.w)),u=(0,p.toDomPrecision)(Math.max(1,t.h));return(0,l.jsx)("svg",{className:"tl-overlays__item",ref:i,children:n?(0,l.jsxs)("g",{className:"tl-brush",opacity:r,children:[(0,l.jsx)("rect",{width:a,height:u,fill:n,opacity:.75}),(0,l.jsx)("rect",{width:a,height:u,fill:"none",stroke:n,opacity:.1})]}):(0,l.jsx)("rect",{className:"tl-brush tl-brush__default ".concat(o),width:a,height:u})})}},34866:function(e,t,n){"use strict";var r,o=n(4633).default,i=n(29293).default,a=n(85715).default,u=n(12897).default,s=n(41132).default,c=n(50883).default,l=Object.create,f=Object.defineProperty,d=Object.getOwnPropertyDescriptor,p=Object.getOwnPropertyNames,h=Object.getPrototypeOf,v=Object.prototype.hasOwnProperty,g=function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,i=c(p(t));try{var a=function(){var i=o.value;v.call(e,i)||i===n||f(e,i,{get:function(){return t[i]},enumerable:!(r=d(t,i))||r.enumerable})};for(i.s();!(o=i.n()).done;)a()}catch(u){i.e(u)}finally{i.f()}}return e},y={};!function(e,t){for(var n in t)f(e,n,{get:t[n],enumerable:!0})}(y,{DefaultCanvas:function(){return G}}),e.exports=(r=y,g(f({},"__esModule",{value:!0}),r));var m=n(44414),b=n(81501),w=n(61267),S=n(30645),x=function(e,t,n){return n=null!=e?l(h(e)):{},g(!t&&e&&e.__esModule?n:f(n,"default",{value:e,enumerable:!0}),e)}(n(48738)),P=n(9950),O=n(55015),k=n(87980),_=n(64115),j=n(77374),I=n(57153),T=n(10076),E=n(93800),C=n(89909),M=n(62767),A=n(49562),D=n(17625),R=n(87456),N=n(84906),L=n(45650),U=n(63557),F=n(1074),B=n(90923),V=n(66491),z=n(51585),H=n(31185),K=n(8187);function G(e){var t=e.className,n=(0,T.useEditor)(),r=(0,E.useEditorComponents)(),o=r.Background,i=r.SvgDefs,a=r.ShapeIndicators,l=(0,P.useRef)(null),f=(0,P.useRef)(null),d=(0,P.useRef)(null),p=(0,j.useContainer)();(0,R.useScreenBounds)(l),(0,I.useDocumentEvents)(),(0,_.useCoarsePointer)(),(0,M.useGestureEvents)(l),(0,C.useFixSafariDoubleTapZoomPencilEvents)(l);var h=(0,P.useRef)({lodDisableTextOutline:!1,allowTextOutline:!0});(0,w.useQuickReactor)("position layers",(function(){var e=n.getCamera(),t=e.x,r=e.y,o=e.z;if(h.current.allowTextOutline&&O.tlenv.isSafari&&(p.style.setProperty("--tl-text-outline","none"),h.current.allowTextOutline=!1),h.current.allowTextOutline&&o<n.options.textShadowLod!==h.current.lodDisableTextOutline){var i=o<n.options.textShadowLod;p.style.setProperty("--tl-text-outline",i?"none":"var(--tl-text-outline-reference)"),h.current.lodDisableTextOutline=i}var a=o>=1?(0,S.modulate)(o,[1,8],[.125,.5],!0):(0,S.modulate)(o,[.1,1],[-2,.125],!0),u="scale(".concat((0,U.toDomPrecision)(o),") translate(").concat((0,U.toDomPrecision)(t+a),"px,").concat((0,U.toDomPrecision)(r+a),"px)");(0,B.setStyleProperty)(f.current,"transform",u),(0,B.setStyleProperty)(d.current,"transform",u)}),[n,p]);var v=(0,k.useCanvasEvents)(),g=(0,w.useValue)("shapeSvgDefs",(function(){var e,t=new Map,r=c((0,S.objectMapValues)(n.shapeUtils));try{for(r.s();!(e=r.n()).done;){var o=e.value;if(!o)return;var i,a=o.getCanvasSvgDefs(),u=c(a);try{for(u.s();!(i=u.n()).done;){var l=i.value,f=l.key,d=l.component;t.has(f)||t.set(f,(0,m.jsx)(d,{},f))}}catch(p){u.e(p)}finally{u.f()}}}catch(p){r.e(p)}finally{r.f()}return s(t.values())}),[n]),y=(0,w.useValue)("debug_shapes",(function(){return F.debugFlags.hideShapes.get()}),[F.debugFlags]),b=(0,w.useValue)("debug_svg",(function(){return F.debugFlags.debugSvg.get()}),[F.debugFlags]),A=(0,w.useValue)("debug_geometry",(function(){return F.debugFlags.debugGeometry.get()}),[F.debugFlags]),D=(0,w.useValue)("isEditingAnything",(function(){return null!==n.getEditingShapeId()}),[n]),N=(0,w.useValue)("isSelectingAnything",(function(){return!!n.getSelectedShapeIds().length}),[n]);return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)("div",u(u({ref:l,draggable:!1,"data-iseditinganything":D,"data-isselectinganything":N,className:(0,x.default)("tl-canvas",t),"data-testid":"canvas"},v),{},{children:[(0,m.jsx)("svg",{className:"tl-svg-context",children:(0,m.jsxs)("defs",{children:[g,(0,m.jsx)(ie,{}),(0,m.jsx)(ae,{}),i&&(0,m.jsx)(i,{})]})}),o&&(0,m.jsx)("div",{className:"tl-background__wrapper",children:(0,m.jsx)(o,{})}),(0,m.jsx)(W,{}),(0,m.jsxs)("div",{ref:f,className:"tl-html-layer tl-shapes",draggable:!1,children:[(0,m.jsx)(le,{}),(0,m.jsx)(ce,{}),y?null:b?(0,m.jsx)(te,{}):(0,m.jsx)(re,{})]}),(0,m.jsx)("div",{className:"tl-overlays",children:(0,m.jsxs)("div",{ref:d,className:"tl-html-layer",children:[A?(0,m.jsx)(V.GeometryDebuggingView,{}):null,(0,m.jsx)(Q,{}),(0,m.jsx)(X,{}),(0,m.jsx)(Y,{}),(0,m.jsx)(Z,{}),a&&(0,m.jsx)(a,{}),(0,m.jsx)(oe,{}),(0,m.jsx)($,{}),(0,m.jsx)(se,{}),(0,m.jsx)(z.LiveCollaborators,{})]})}),(0,m.jsx)(fe,{})]})),(0,m.jsx)(H.MenuClickCapture,{}),(0,m.jsx)(q,{})]})}function q(){var e=(0,E.useEditorComponents)().InFrontOfTheCanvas;return e?(0,m.jsx)(e,{}):null}function W(){var e=(0,T.useEditor)(),t=(0,w.useValue)("gridSize",(function(){return e.getDocumentSettings().gridSize}),[e]),n=(0,w.useValue)("camera",(function(){return e.getCamera()}),[e]),r=n.x,o=n.y,i=n.z,a=(0,w.useValue)("isGridMode",(function(){return e.getInstanceState().isGridMode}),[e]),u=(0,E.useEditorComponents)().Grid;return u&&a?(0,m.jsx)(u,{x:r,y:o,z:i,size:t}):null}function Y(){var e=(0,T.useEditor)(),t=(0,w.useValue)("scribbles",(function(){return e.getInstanceState().scribbles}),[e]),n=(0,w.useValue)("zoomLevel",(function(){return e.getZoomLevel()}),[e]),r=(0,E.useEditorComponents)().Scribble;return r&&t.length?t.map((function(e){return(0,m.jsx)(r,{className:"tl-user-scribble",scribble:e,zoom:n},e.id)})):null}function X(){var e=(0,T.useEditor)(),t=(0,w.useValue)("brush",(function(){return e.getInstanceState().brush}),[e]),n=(0,E.useEditorComponents)().Brush;return n&&t?(0,m.jsx)(n,{className:"tl-user-brush",brush:t}):null}function Z(){var e=(0,T.useEditor)(),t=(0,w.useValue)("zoomBrush",(function(){return e.getInstanceState().zoomBrush}),[e]),n=(0,E.useEditorComponents)().ZoomBrush;return n&&t?(0,m.jsx)(n,{className:"tl-user-brush tl-zoom-brush",brush:t}):null}function $(){var e=(0,T.useEditor)(),t=(0,w.useValue)("snapLines",(function(){return e.snaps.getIndicators()}),[e]),n=(0,w.useValue)("zoomLevel",(function(){return e.getZoomLevel()}),[e]),r=(0,E.useEditorComponents)().SnapIndicator;return r&&t.length>0?t.map((function(e){return(0,m.jsx)(r,{className:"tl-user-snapline",line:e,zoom:n},e.id)})):null}function Q(){var e=(0,T.useEditor)(),t=(0,w.useValue)("handles shapeIdWithHandles",(function(){var t=e.getInstanceState(),n=t.isReadonly,r=t.isChangingStyle;if(n||r)return!1;var o=e.getOnlySelectedShape();return!!o&&(!!e.getShapeHandles(o)&&o.id)}),[e]);return t?(0,m.jsx)(J,{shapeId:t}):null}function J(e){var t=e.shapeId,n=(0,T.useEditor)(),r=(0,E.useEditorComponents)().Handles,o=(0,w.useValue)("zoomLevel",(function(){return n.getZoomLevel()}),[n]),i=(0,w.useValue)("coarse pointer",(function(){return n.getInstanceState().isCoarsePointer}),[n]),a=(0,w.useValue)("handles transform",(function(){return n.getShapePageTransform(t)}),[n,t]),u=(0,w.useValue)("handles",(function(){var e=n.getShapeHandles(t);if(!e)return null;var r=(i?n.options.coarseHandleRadius:n.options.handleRadius)/o*2;return e.filter((function(t){return"virtual"!==t.type||!e.some((function(e){return e!==t&&"vertex"===e.type&&L.Vec.Dist(t,e)<r}))})).sort((function(e){return"vertex"===e.type?1:-1}))}),[n,o,i,t]),s=(0,w.useValue)("isHidden",(function(){return n.isShapeHidden(t)}),[n,t]);return r&&u&&a&&!s?(0,m.jsx)(r,{children:(0,m.jsx)("g",{transform:N.Mat.toCssString(a),children:u.map((function(e){return(0,m.jsx)(ee,{shapeId:t,handle:e,zoom:o,isCoarse:i},e.id)}))})}):null}function ee(e){var t=e.shapeId,n=e.handle,r=e.zoom,o=e.isCoarse,i=(0,A.useHandleEvents)(t,n.id),a=(0,E.useEditorComponents)().Handle;return a?(0,m.jsx)("g",u(u({"aria-label":"handle",transform:"translate(".concat(n.x,", ").concat(n.y,")")},i),{},{children:(0,m.jsx)(a,{shapeId:t,handle:n,zoom:r,isCoarse:o})})):null}function te(){var e=(0,T.useEditor)();return(0,w.useValue)("rendering shapes",(function(){return e.getRenderingShapes()}),[e]).map((function(e){return(0,m.jsxs)(P.Fragment,{children:[(0,m.jsx)(K.Shape,u({},e)),(0,m.jsx)(ue,{id:e.id,mode:"iframe"})]},e.id+"_fragment")}))}function ne(){var e=(0,T.useEditor)(),t=(0,P.useRef)(new Set);return(0,w.useQuickReactor)("reflow for culled shapes",(function(){var n=e.getCulledShapes();if(t.current.size!==n.size||!s(n).every((function(e){return t.current.has(e)}))){t.current=n;var r=document.getElementsByClassName("tl-canvas");if(0!==r.length)r[0].offsetHeight}}),[e]),null}function re(){var e=(0,T.useEditor)(),t=(0,w.useValue)("rendering shapes",(function(){return e.getRenderingShapes()}),[e]);return(0,m.jsxs)(m.Fragment,{children:[t.map((function(e){return(0,m.jsx)(K.Shape,u({},e),e.id+"_shape")})),O.tlenv.isSafari&&(0,m.jsx)(ne,{})]})}function oe(){var e=(0,T.useEditor)(),t=(0,E.useEditorComponents)().ShapeIndicator,n=(0,w.useValue)("hinting shape ids",(function(){return(0,S.dedupe)(e.getHintingShapeIds())}),[e]);return n.length&&t?n.map((function(e){return(0,m.jsx)(t,{className:"tl-user-indicator__hint",shapeId:e},e+"_hinting")})):null}function ie(){return(0,m.jsxs)("g",{id:(0,D.useSharedSafeId)("cursor"),children:[(0,m.jsxs)("g",{fill:"rgba(0,0,0,.2)",transform:"translate(-11,-11)",children:[(0,m.jsx)("path",{d:"m12 24.4219v-16.015l11.591 11.619h-6.781l-.411.124z"}),(0,m.jsx)("path",{d:"m21.0845 25.0962-3.605 1.535-4.682-11.089 3.686-1.553z"})]}),(0,m.jsxs)("g",{fill:"white",transform:"translate(-12,-12)",children:[(0,m.jsx)("path",{d:"m12 24.4219v-16.015l11.591 11.619h-6.781l-.411.124z"}),(0,m.jsx)("path",{d:"m21.0845 25.0962-3.605 1.535-4.682-11.089 3.686-1.553z"})]}),(0,m.jsxs)("g",{fill:"currentColor",transform:"translate(-12,-12)",children:[(0,m.jsx)("path",{d:"m19.751 24.4155-1.844.774-3.1-7.374 1.841-.775z"}),(0,m.jsx)("path",{d:"m13 10.814v11.188l2.969-2.866.428-.139h4.768z"})]})]})}function ae(){var e=(0,D.useSharedSafeId)("cursor_hint");return(0,m.jsx)("path",{id:e,fill:"currentColor",d:"M -2,-5 2,0 -2,5 Z"})}function ue(e){var t=e.id,n=e.mode,r=(0,T.useEditor)(),u=(0,P.useState)(null),s=a(u,2),c=s[0],l=s[1],f=(0,w.useValue)("is in root",(function(){var e=r.getShape(t);return(null===e||void 0===e?void 0:e.parentId)===r.getCurrentPageId()}),[r,t]);return(0,P.useEffect)((function(){if(f){var e=null,n=(0,b.react)("shape to svg",i(o().mark((function n(){var i,a,u,s,c,f;return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(i=Math.random(),e=i,a=r.isShapeOfType(t,"frame"),u=a?0:10,s=r.getShapePageBounds(t)){n.next=7;break}return n.abrupt("return");case 7:return s=s.clone().expandBy(u),n.next=10,r.getSvgString([t],{padding:u,background:r.getInstanceState().exportBackground});case 10:if(c=n.sent,e===i&&c){n.next=13;break}return n.abrupt("return");case 13:f="data:image/svg+xml;utf8,".concat(encodeURIComponent(c.svg)),l({src:f,bounds:s});case 15:case"end":return n.stop()}}),n)}))));return function(){e=null,n()}}}),[r,t,f]),f&&c?"iframe"===n?(0,m.jsx)("iframe",{src:c.src,width:c.bounds.width,height:c.bounds.height,referrerPolicy:"no-referrer",style:{position:"absolute",top:0,left:0,border:"none",transform:"translate(".concat(c.bounds.x,"px, ").concat(c.bounds.maxY+12,"px)"),outline:"1px solid black",maxWidth:"none"}}):(0,m.jsx)("img",{src:c.src,width:c.bounds.width,height:c.bounds.height,referrerPolicy:"no-referrer",style:{position:"absolute",top:0,left:0,transform:"translate(".concat(c.bounds.x,"px, ").concat(c.bounds.maxY+12,"px)"),outline:"1px solid black",maxWidth:"none"}}):null}function se(){var e=(0,T.useEditor)(),t=(0,w.useValue)("selection rotation",(function(){return e.getSelectionRotation()}),[e]),n=(0,w.useValue)("selection bounds",(function(){return e.getSelectionRotatedPageBounds()}),[e]),r=(0,E.useEditorComponents)().SelectionForeground;return n&&r?(0,m.jsx)(r,{bounds:n,rotation:t}):null}function ce(){var e=(0,T.useEditor)(),t=(0,w.useValue)("selection rotation",(function(){return e.getSelectionRotation()}),[e]),n=(0,w.useValue)("selection bounds",(function(){return e.getSelectionRotatedPageBounds()}),[e]),r=(0,E.useEditorComponents)().SelectionBackground;return n&&r?(0,m.jsx)(r,{bounds:n,rotation:t}):null}function le(){var e=(0,E.useEditorComponents)().OnTheCanvas;return e?(0,m.jsx)(e,{}):null}function fe(){var e=(0,T.useEditor)(),t=(0,w.useValue)("camera state",(function(){return e.getCameraState()}),[e]);return(0,m.jsx)("div",{className:(0,x.default)("tl-hit-test-blocker",{"tl-hit-test-blocker__hidden":"idle"===t})})}},19911:function(e,t,n){"use strict";var r,o=n(50883).default,i=Object.create,a=Object.defineProperty,u=Object.getOwnPropertyDescriptor,s=Object.getOwnPropertyNames,c=Object.getPrototypeOf,l=Object.prototype.hasOwnProperty,f=function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var i,c=o(s(t));try{var f=function(){var o=i.value;l.call(e,o)||o===n||a(e,o,{get:function(){return t[o]},enumerable:!(r=u(t,o))||r.enumerable})};for(c.s();!(i=c.n()).done;)f()}catch(d){c.e(d)}finally{c.f()}}return e},d={};!function(e,t){for(var n in t)a(e,n,{get:t[n],enumerable:!0})}(d,{DefaultCollaboratorHint:function(){return w}}),e.exports=(r=d,f(a({},"__esModule",{value:!0}),r));var p=n(44414),h=function(e,t,n){return n=null!=e?i(c(e)):{},f(!t&&e&&e.__esModule?n:a(n,"default",{value:e,enumerable:!0}),e)}(n(48738)),v=n(9950),g=n(17625),y=n(34081),m=n(45650),b=n(63557);function w(e){var t=e.className,n=e.zoom,r=e.point,o=e.color,i=e.viewport,a=e.opacity,u=void 0===a?1:a,s=(0,v.useRef)(null);(0,y.useTransform)(s,(0,b.clamp)(r.x,i.minX+5/n,i.maxX-5/n),(0,b.clamp)(r.y,i.minY+5/n,i.maxY-5/n),1/n,m.Vec.Angle(i.center,r));var c=(0,g.useSharedSafeId)("cursor_hint");return(0,p.jsxs)("svg",{ref:s,className:(0,h.default)("tl-overlays__item",t),children:[(0,p.jsx)("use",{href:"#".concat(c),color:o,strokeWidth:3,stroke:"var(--color-background)"}),(0,p.jsx)("use",{href:"#".concat(c),color:o,opacity:u})]})}},77316:function(e,t,n){"use strict";var r,o=n(50883).default,i=Object.create,a=Object.defineProperty,u=Object.getOwnPropertyDescriptor,s=Object.getOwnPropertyNames,c=Object.getPrototypeOf,l=Object.prototype.hasOwnProperty,f=function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var i,c=o(s(t));try{var f=function(){var o=i.value;l.call(e,o)||o===n||a(e,o,{get:function(){return t[o]},enumerable:!(r=u(t,o))||r.enumerable})};for(c.s();!(i=c.n()).done;)f()}catch(d){c.e(d)}finally{c.f()}}return e},d={};!function(e,t){for(var n in t)a(e,n,{get:t[n],enumerable:!0})}(d,{DefaultCursor:function(){return m}}),e.exports=(r=d,f(a({},"__esModule",{value:!0}),r));var p=n(44414),h=function(e,t,n){return n=null!=e?i(c(e)):{},f(!t&&e&&e.__esModule?n:a(n,"default",{value:e,enumerable:!0}),e)}(n(48738)),v=n(9950),g=n(17625),y=n(34081),m=(0,v.memo)((function(e){var t=e.className,n=e.zoom,r=e.point,o=e.color,i=e.name,a=e.chatMessage,u=(0,v.useRef)(null);(0,y.useTransform)(u,null===r||void 0===r?void 0:r.x,null===r||void 0===r?void 0:r.y,1/n);var s=(0,g.useSharedSafeId)("cursor");return r?(0,p.jsxs)("div",{ref:u,className:(0,h.default)("tl-overlays__item",t),children:[(0,p.jsx)("svg",{className:"tl-cursor",children:(0,p.jsx)("use",{href:"#".concat(s),color:o})}),a?(0,p.jsxs)(p.Fragment,{children:[i&&(0,p.jsx)("div",{className:"tl-nametag-title",style:{color:o},children:i}),(0,p.jsx)("div",{className:"tl-nametag-chat",style:{backgroundColor:o},children:a})]}):i&&(0,p.jsx)("div",{className:"tl-nametag",style:{backgroundColor:o},children:i})]}):null}))},8020:function(e,t,n){"use strict";var r,o=n(4633).default,i=n(29293).default,a=n(85715).default,u=n(50883).default,s=Object.create,c=Object.defineProperty,l=Object.getOwnPropertyDescriptor,f=Object.getOwnPropertyNames,d=Object.getPrototypeOf,p=Object.prototype.hasOwnProperty,h=function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,i=u(f(t));try{var a=function(){var i=o.value;p.call(e,i)||i===n||c(e,i,{get:function(){return t[i]},enumerable:!(r=l(t,i))||r.enumerable})};for(i.s();!(o=i.n()).done;)a()}catch(s){i.e(s)}finally{i.f()}}return e},v={};!function(e,t){for(var n in t)c(e,n,{get:t[n],enumerable:!0})}(v,{DefaultErrorFallback:function(){return _}}),e.exports=(r=v,h(c({},"__esModule",{value:!0}),r));var g=n(44414),y=n(61267),m=n(30645),b=function(e,t,n){return n=null!=e?s(d(e)):{},h(!t&&e&&e.__esModule?n:c(n,"default",{value:e,enumerable:!0}),e)}(n(48738)),w=n(9950),S=n(10076),x=n(93800),P=n(9098),O=n(11367),k=n(23038),_=function(e){var t=e.error,n=e.editor,r=(0,w.useRef)(null),u=(0,w.useState)(!1),s=a(u,2),c=s[0],l=s[1],f=(0,w.useState)(!1),d=a(f,2),p=d[0],h=d[1],v=(0,w.useState)(!1),_=a(v,2),j=_[0],I=_[1],T=null;try{var E;T=null!==(E=(0,x.useEditorComponents)().Canvas)&&void 0!==E?E:null}catch(B){}var C=t instanceof Error?t.message:String(t),M=t instanceof Error?t.stack:null,A=(0,y.useValue)("isDarkMode",(function(){try{if(n)return n.user.getIsDarkMode()}catch(e){}return null}),[n]),D=(0,w.useState)(null),R=a(D,2),N=R[0],L=R[1];(0,w.useLayoutEffect)((function(){var e;null!==A&&L(A);for(var t=null===(e=r.current)||void 0===e?void 0:e.parentElement,n=!1;t;){if(t.classList.contains("tl-theme__dark")||t.classList.contains("tl-theme__light")){n=!0;break}t=t.parentElement}n?L(null):"undefined"!==typeof window&&"matchMedia"in window&&L(window.matchMedia("(prefers-color-scheme: dark)").matches)}),[A]),(0,w.useEffect)((function(){if(p){var e=null===n||void 0===n?void 0:n.timers.setTimeout((function(){h(!1)}),2e3);return function(){return clearTimeout(e)}}}),[p,n]);var U=function(){var e=i(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(0,P.hardResetEditor)();case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),F=new URL("https://github.com/tldraw/tldraw/issues/new");return F.searchParams.set("title",C),F.searchParams.set("labels","bug"),F.searchParams.set("body","Hey, I ran into an error while using tldraw:\n\n```js\n".concat(null!==M&&void 0!==M?M:C,"\n```\n\nMy browser: ").concat(navigator.userAgent)),(0,g.jsxs)("div",{ref:r,className:(0,b.default)("tl-container tl-error-boundary",null===N?"":N?"tl-theme__dark":"tl-theme__light"),children:[(0,g.jsx)("div",{className:"tl-error-boundary__overlay"}),n&&(0,g.jsx)(k.ErrorBoundary,{onError:m.noop,fallback:function(){return null},children:(0,g.jsx)(S.EditorProvider,{editor:n,children:(0,g.jsx)("div",{className:"tl-overlay tl-error-boundary__canvas",children:T?(0,g.jsx)(T,{}):null})})}),(0,g.jsx)("div",{className:(0,b.default)("tl-modal","tl-error-boundary__content",{"tl-error-boundary__content__expanded":c&&!j}),children:j?(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)("h2",{children:"Are you sure?"}),(0,g.jsx)("p",{children:"Resetting your data will delete your drawing and cannot be undone."}),(0,g.jsxs)("div",{className:"tl-error-boundary__content__actions",children:[(0,g.jsx)("button",{onClick:function(){return I(!1)},children:"Cancel"}),(0,g.jsx)("button",{className:"tl-error-boundary__reset",onClick:U,children:"Reset data"})]})]}):(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)("h2",{children:"Something went wrong"}),(0,g.jsx)("p",{children:"Please refresh the page to continue."}),(0,g.jsxs)("p",{children:["If you keep seeing this screen, you can create a"," ",(0,g.jsx)("a",{href:F.toString(),children:"GitHub issue"})," or ask for help on"," ",(0,g.jsx)("a",{href:"https://discord.gg/Cq6cPsTfNy",children:"Discord"}),". If you are still stuck, you can reset the tldraw data on your machine. This may erase the project you were working on, so try to get help first."]}),c&&(0,g.jsxs)(g.Fragment,{children:["Message:",(0,g.jsx)("h4",{children:(0,g.jsx)("code",{children:C})}),"Stack trace:",(0,g.jsxs)("div",{className:"tl-error-boundary__content__error",children:[(0,g.jsx)("pre",{children:(0,g.jsx)("code",{children:null!==M&&void 0!==M?M:C})}),(0,g.jsx)("button",{onClick:function(){var e=document.createElement("textarea");e.value=null!==M&&void 0!==M?M:C,document.body.appendChild(e),e.select(),document.execCommand("copy"),e.remove(),h(!0)},children:p?"Copied!":"Copy"})]})]}),(0,g.jsxs)("div",{className:"tl-error-boundary__content__actions",children:[(0,g.jsx)("button",{onClick:function(){return l(!c)},children:c?"Hide details":"Show details"}),(0,g.jsxs)("div",{className:"tl-error-boundary__content__actions__group",children:[(0,g.jsx)("button",{className:"tl-error-boundary__reset",onClick:function(){return I(!0)},children:"Reset data"}),(0,g.jsx)("button",{className:"tl-error-boundary__refresh",onClick:function(){(0,O.refreshPage)()},children:"Refresh Page"})]})]})]})})]})}},65378:function(e,t,n){"use strict";var r,o=n(50883).default,i=Object.defineProperty,a=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,c={};!function(e,t){for(var n in t)i(e,n,{get:t[n],enumerable:!0})}(c,{DefaultGrid:function(){return h}}),e.exports=(r=c,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var c,l=o(u(t));try{var f=function(){var o=c.value;s.call(e,o)||o===n||i(e,o,{get:function(){return t[o]},enumerable:!(r=a(t,o))||r.enumerable})};for(l.s();!(c=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(i({},"__esModule",{value:!0}),r));var l=n(44414),f=n(30645),d=n(10076),p=n(17625);function h(e){var t=e.x,n=e.y,r=e.z,o=e.size,i=(0,p.useUniqueSafeId)("grid"),a=(0,d.useEditor)().options.gridSteps;return(0,l.jsxs)("svg",{className:"tl-grid",version:"1.1",xmlns:"http://www.w3.org/2000/svg",children:[(0,l.jsx)("defs",{children:a.map((function(e,a){var u=e.min,s=e.mid,c=e.step,d=c*o*r,h=.5+t*r,v=.5+n*r,g=h>0?h%d:d+h%d,y=v>0?v%d:d+v%d,m=r<s?(0,f.modulate)(r,[u,s],[0,1]):1;return(0,l.jsx)("pattern",{id:(0,p.suffixSafeId)(i,"".concat(c)),width:d,height:d,patternUnits:"userSpaceOnUse",children:(0,l.jsx)("circle",{className:"tl-grid-dot",cx:g,cy:y,r:1,opacity:m})},a)}))}),a.map((function(e,t){var n=e.step;return(0,l.jsx)("rect",{width:"100%",height:"100%",fill:"url(#".concat(i,"_").concat(n,")")},t)}))]})}},88400:function(e,t,n){"use strict";var r,o=n(50883).default,i=Object.create,a=Object.defineProperty,u=Object.getOwnPropertyDescriptor,s=Object.getOwnPropertyNames,c=Object.getPrototypeOf,l=Object.prototype.hasOwnProperty,f=function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var i,c=o(s(t));try{var f=function(){var o=i.value;l.call(e,o)||o===n||a(e,o,{get:function(){return t[o]},enumerable:!(r=u(t,o))||r.enumerable})};for(c.s();!(i=c.n()).done;)f()}catch(d){c.e(d)}finally{c.f()}}return e},d={};!function(e,t){for(var n in t)a(e,n,{get:t[n],enumerable:!0})}(d,{DefaultHandle:function(){return y}}),e.exports=(r=d,f(a({},"__esModule",{value:!0}),r));var p=n(44414),h=function(e,t,n){return n=null!=e?i(c(e)):{},f(!t&&e&&e.__esModule?n:a(n,"default",{value:e,enumerable:!0}),e)}(n(48738)),v=n(63792),g=n(10076);function y(e){var t=e.handle,n=e.isCoarse,r=e.className,o=e.zoom,i=(0,g.useEditor)(),a=(n?i.options.coarseHandleRadius:i.options.handleRadius)/o;if("clone"===t.type){var u=3/o,s="M0,".concat(-u," A").concat(u,",").concat(u," 0 0,1 0,").concat(u),c=v.SIDES.indexOf(t.id);return(0,p.jsxs)("g",{className:(0,h.default)("tl-handle tl-handle__".concat(t.type),r),children:[(0,p.jsx)("circle",{className:"tl-handle__bg",r:a}),(0,p.jsx)("path",{className:"tl-handle__fg",d:s,transform:"rotate(".concat(90*c-90,")")})]})}var l=("create"===t.type&&n?3:4)/Math.max(o,.25);return(0,p.jsxs)("g",{className:(0,h.default)("tl-handle tl-handle__".concat(t.type),r),children:[(0,p.jsx)("circle",{className:"tl-handle__bg",r:a}),(0,p.jsx)("circle",{className:"tl-handle__fg",r:l})]})}},76559:function(e,t,n){"use strict";var r,o=n(50883).default,i=Object.defineProperty,a=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,c={};!function(e,t){for(var n in t)i(e,n,{get:t[n],enumerable:!0})}(c,{DefaultHandles:function(){return f}}),e.exports=(r=c,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var c,l=o(u(t));try{var f=function(){var o=c.value;s.call(e,o)||o===n||i(e,o,{get:function(){return t[o]},enumerable:!(r=a(t,o))||r.enumerable})};for(l.s();!(c=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(i({},"__esModule",{value:!0}),r));var l=n(44414),f=function(e){var t=e.children;return(0,l.jsx)("svg",{className:"tl-user-handles tl-overlays__item",children:t})}},64848:function(e,t,n){"use strict";var r,o=n(50883).default,i=Object.defineProperty,a=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,c={};!function(e,t){for(var n in t)i(e,n,{get:t[n],enumerable:!0})}(c,{DefaultLoadingScreen:function(){return p}}),e.exports=(r=c,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var c,l=o(u(t));try{var f=function(){var o=c.value;s.call(e,o)||o===n||i(e,o,{get:function(){return t[o]},enumerable:!(r=a(t,o))||r.enumerable})};for(l.s();!(c=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(i({},"__esModule",{value:!0}),r));var l=n(44414),f=n(25862),d=n(93800),p=function(){var e=(0,d.useEditorComponents)().Spinner;return(0,l.jsx)(f.LoadingScreen,{children:e?(0,l.jsx)(e,{}):null})}},48134:function(e,t,n){"use strict";var r,o=n(50883).default,i=Object.create,a=Object.defineProperty,u=Object.getOwnPropertyDescriptor,s=Object.getOwnPropertyNames,c=Object.getPrototypeOf,l=Object.prototype.hasOwnProperty,f=function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var i,c=o(s(t));try{var f=function(){var o=i.value;l.call(e,o)||o===n||a(e,o,{get:function(){return t[o]},enumerable:!(r=u(t,o))||r.enumerable})};for(c.s();!(i=c.n()).done;)f()}catch(d){c.e(d)}finally{c.f()}}return e},d={};!function(e,t){for(var n in t)a(e,n,{get:t[n],enumerable:!0})}(d,{DefaultScribble:function(){return g}}),e.exports=(r=d,f(a({},"__esModule",{value:!0}),r));var p=n(44414),h=function(e,t,n){return n=null!=e?i(c(e)):{},f(!t&&e&&e.__esModule?n:a(n,"default",{value:e,enumerable:!0}),e)}(n(48738)),v=n(87485);function g(e){var t=e.scribble,n=e.zoom,r=e.color,o=e.opacity,i=e.className;return t.points.length?(0,p.jsx)("svg",{className:i?(0,h.default)("tl-overlays__item",i):i,children:(0,p.jsx)("path",{className:"tl-scribble",d:(0,v.getSvgPathFromPoints)(t.points,!1),stroke:null!==r&&void 0!==r?r:"var(--color-".concat(t.color,")"),fill:"none",strokeWidth:8/n,opacity:null!==o&&void 0!==o?o:t.opacity})}):null}},28182:function(e,t,n){"use strict";var r,o=n(50883).default,i=Object.create,a=Object.defineProperty,u=Object.getOwnPropertyDescriptor,s=Object.getOwnPropertyNames,c=Object.getPrototypeOf,l=Object.prototype.hasOwnProperty,f=function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var i,c=o(s(t));try{var f=function(){var o=i.value;l.call(e,o)||o===n||a(e,o,{get:function(){return t[o]},enumerable:!(r=u(t,o))||r.enumerable})};for(c.s();!(i=c.n()).done;)f()}catch(d){c.e(d)}finally{c.f()}}return e},d={};!function(e,t){for(var n in t)a(e,n,{get:t[n],enumerable:!0})}(d,{DefaultSelectionBackground:function(){return y}}),e.exports=(r=d,f(a({},"__esModule",{value:!0}),r));var p=n(44414),h=function(e,t,n){return n=null!=e?i(c(e)):{},f(!t&&e&&e.__esModule?n:a(n,"default",{value:e,enumerable:!0}),e)}(n(9950)),v=n(34081),g=n(63557);function y(e){var t=e.bounds,n=e.rotation,r=h.useRef(null);return(0,v.useTransform)(r,t.x,t.y,1,n),h.useLayoutEffect((function(){var e=r.current;e&&(e.style.width=(0,g.toDomPrecision)(Math.max(1,t.width))+"px",e.style.height=(0,g.toDomPrecision)(Math.max(1,t.height))+"px")}),[t.width,t.height]),(0,p.jsx)("div",{ref:r,className:"tl-selection__bg",draggable:!1})}},2143:function(e,t,n){"use strict";var r,o=n(50883).default,i=Object.create,a=Object.defineProperty,u=Object.getOwnPropertyDescriptor,s=Object.getOwnPropertyNames,c=Object.getPrototypeOf,l=Object.prototype.hasOwnProperty,f=function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var i,c=o(s(t));try{var f=function(){var o=i.value;l.call(e,o)||o===n||a(e,o,{get:function(){return t[o]},enumerable:!(r=u(t,o))||r.enumerable})};for(c.s();!(i=c.n()).done;)f()}catch(d){c.e(d)}finally{c.f()}}return e},d={};!function(e,t){for(var n in t)a(e,n,{get:t[n],enumerable:!0})}(d,{DefaultSelectionForeground:function(){return S}}),e.exports=(r=d,f(a({},"__esModule",{value:!0}),r));var p=n(44414),h=n(61267),v=function(e,t,n){return n=null!=e?i(c(e)):{},f(!t&&e&&e.__esModule?n:a(n,"default",{value:e,enumerable:!0}),e)}(n(48738)),g=n(9950),y=n(10076),m=n(34081),b=n(24161),w=n(63557);function S(e){var t,n,r=e.bounds,o=e.rotation,i=(0,y.useEditor)(),a=(0,g.useRef)(null),u=(0,h.useValue)("only selected shape",(function(){return i.getOnlySelectedShape()}),[i]),s=u?i.getShapeUtil(u).expandSelectionOutlinePx(u):0;return(0,m.useTransform)(a,null===(t=r)||void 0===t?void 0:t.x,null===(n=r)||void 0===n?void 0:n.y,1,o,{x:-s,y:-s}),r=s instanceof b.Box?r.clone().expand(s).zeroFix():r.clone().expandBy(s).zeroFix(),(0,p.jsx)("svg",{ref:a,className:"tl-overlays__item tl-selection__fg","data-testid":"selection-foreground",children:(0,p.jsx)("rect",{className:(0,v.default)("tl-selection__fg__outline"),width:(0,w.toDomPrecision)(r.width),height:(0,w.toDomPrecision)(r.height)})})}},36857:function(e,t,n){"use strict";var r,o=n(50883).default,i=Object.defineProperty,a=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,c={};!function(e,t){for(var n in t)i(e,n,{get:t[n],enumerable:!0})}(c,{DefaultShapeErrorFallback:function(){return f}}),e.exports=(r=c,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var c,l=o(u(t));try{var f=function(){var o=c.value;s.call(e,o)||o===n||i(e,o,{get:function(){return t[o]},enumerable:!(r=a(t,o))||r.enumerable})};for(l.s();!(c=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(i({},"__esModule",{value:!0}),r));var l=n(44414),f=function(){return(0,l.jsx)("div",{className:"tl-shape-error-boundary"})}},87656:function(e,t,n){"use strict";var r,o=n(50883).default,i=Object.create,a=Object.defineProperty,u=Object.getOwnPropertyDescriptor,s=Object.getOwnPropertyNames,c=Object.getPrototypeOf,l=Object.prototype.hasOwnProperty,f=function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var i,c=o(s(t));try{var f=function(){var o=i.value;l.call(e,o)||o===n||a(e,o,{get:function(){return t[o]},enumerable:!(r=u(t,o))||r.enumerable})};for(c.s();!(i=c.n()).done;)f()}catch(d){c.e(d)}finally{c.f()}}return e},d={};!function(e,t){for(var n in t)a(e,n,{get:t[n],enumerable:!0})}(d,{DefaultShapeIndicator:function(){return x}}),e.exports=(r=d,f(a({},"__esModule",{value:!0}),r));var p=n(44414),h=n(61267),v=function(e,t,n){return n=null!=e?i(c(e)):{},f(!t&&e&&e.__esModule?n:a(n,"default",{value:e,enumerable:!0}),e)}(n(48738)),g=n(9950),y=n(10076),m=n(93800),b=n(23038),w=function(e){var t=e.shape,n=e.util;return(0,h.useStateTracking)("Indicator: "+t.type,(function(){return n.indicator(n.editor.store.unsafeGetWithoutCapture(t.id))}))},S=function(e){var t=e.editor,n=e.id,r=(0,h.useValue)("shape for indicator",(function(){return t.store.get(n)}),[t,n]),o=(0,m.useEditorComponents)().ShapeIndicatorErrorFallback;return!r||r.isLocked?null:(0,p.jsx)(b.OptionalErrorBoundary,{fallback:o,onError:function(e){return t.annotateError(e,{origin:"react.shapeIndicator",willCrashApp:!1})},children:(0,p.jsx)(w,{shape:r,util:t.getShapeUtil(r)},r.id)})},x=(0,g.memo)((function(e){var t=e.shapeId,n=e.className,r=e.color,o=e.hidden,i=e.opacity,a=(0,y.useEditor)(),u=(0,g.useRef)(null);return(0,h.useQuickReactor)("indicator transform",(function(){var e=u.current;if(e){var n=a.getShapePageTransform(t);n&&e.style.setProperty("transform",n.toCssString())}}),[a,t]),(0,g.useLayoutEffect)((function(){var e=u.current;e&&e.style.setProperty("display",o?"none":"block")}),[o]),(0,p.jsx)("svg",{ref:u,className:(0,v.default)("tl-overlays__item",n),children:(0,p.jsx)("g",{className:"tl-shape-indicator",stroke:null!==r&&void 0!==r?r:"var(--color-selected)",opacity:i,children:(0,p.jsx)(S,{editor:a,id:t})})})}))},94106:function(e,t,n){"use strict";var r,o=n(50883).default,i=Object.defineProperty,a=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,c={};!function(e,t){for(var n in t)i(e,n,{get:t[n],enumerable:!0})}(c,{DefaultShapeIndicatorErrorFallback:function(){return f}}),e.exports=(r=c,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var c,l=o(u(t));try{var f=function(){var o=c.value;s.call(e,o)||o===n||i(e,o,{get:function(){return t[o]},enumerable:!(r=a(t,o))||r.enumerable})};for(l.s();!(c=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(i({},"__esModule",{value:!0}),r));var l=n(44414),f=function(){return(0,l.jsx)("circle",{cx:4,cy:4,r:8,strokeWidth:"1",stroke:"red"})}},70775:function(e,t,n){"use strict";var r,o=n(50883).default,i=Object.defineProperty,a=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,c={};!function(e,t){for(var n in t)i(e,n,{get:t[n],enumerable:!0})}(c,{DefaultShapeIndicators:function(){return v}}),e.exports=(r=c,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var c,l=o(u(t));try{var f=function(){var o=c.value;s.call(e,o)||o===n||i(e,o,{get:function(){return t[o]},enumerable:!(r=a(t,o))||r.enumerable})};for(l.s();!(c=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(i({},"__esModule",{value:!0}),r));var l=n(44414),f=n(61267),d=n(9950),p=n(10076),h=n(93800),v=(0,d.memo)((function(){var e=(0,p.useEditor)(),t=(0,d.useRef)(new Set),n=(0,f.useValue)("should display selected ids",(function(){var n=t.current,r=new Set;if(e.isInAny("select.idle","select.brushing","select.scribble_brushing","select.editing_shape","select.pointing_shape","select.pointing_selection","select.pointing_handle")&&!e.getInstanceState().isChangingStyle){var i,a=e.getSelectedShapeIds(),u=o(a);try{for(u.s();!(i=u.n()).done;){var s=i.value;r.add(s)}}catch(h){u.e(h)}finally{u.f()}if(e.isInAny("select.idle","select.editing_shape")){var c=e.getInstanceState();if(c.isHoveringCanvas&&!c.isCoarsePointer){var l=e.getHoveredShapeId();l&&r.add(l)}}}if(n.size!==r.size)return t.current=r,r;var f,d=o(r);try{for(d.s();!(f=d.n()).done;){var p=f.value;if(!n.has(p))return t.current=r,r}}catch(h){d.e(h)}finally{d.f()}return n}),[e]),r=(0,f.useValue)("rendering shapes",(function(){return e.getRenderingShapes()}),[e]),i=(0,h.useEditorComponents)().ShapeIndicator;return i?r.map((function(e){var t=e.id;return(0,l.jsx)(i,{shapeId:t,hidden:!n.has(t)},t+"_indicator")})):null}))},78468:function(e,t,n){"use strict";var r,o=n(12897).default,i=n(50883).default,a=Object.create,u=Object.defineProperty,s=Object.getOwnPropertyDescriptor,c=Object.getOwnPropertyNames,l=Object.getPrototypeOf,f=Object.prototype.hasOwnProperty,d=function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,a=i(c(t));try{var l=function(){var i=o.value;f.call(e,i)||i===n||u(e,i,{get:function(){return t[i]},enumerable:!(r=s(t,i))||r.enumerable})};for(a.s();!(o=a.n()).done;)l()}catch(d){a.e(d)}finally{a.f()}}return e},p=function(e,t,n){return n=null!=e?a(l(e)):{},d(!t&&e&&e.__esModule?n:u(n,"default",{value:e,enumerable:!0}),e)},h={};!function(e,t){for(var n in t)u(e,n,{get:t[n],enumerable:!0})}(h,{DefaultSnapIndicator:function(){return S}}),e.exports=(r=h,d(u({},"__esModule",{value:!0}),r));var v=n(44414),g=p(n(48738)),y=p(n(9950)),m=n(63557);function b(e){var t,n,r,o,i=e.points,a=2.5/e.zoom,u=i.reduce((function(e,t){return Math.min(e,t.x)}),1/0),s=i.reduce((function(e,t){return Math.max(e,t.x)}),-1/0),c=i.reduce((function(e,t){return Math.min(e,t.y)}),1/0),l=i.reduce((function(e,t){return Math.max(e,t.y)}),-1/0);return i.some((function(e){return e.x===u&&e.y===c}))?(t=u,n=c,r=s,o=l):(t=u,n=l,r=s,o=c),(0,v.jsxs)("g",{className:"tl-snap-indicator",stroke:"lime",children:[(0,v.jsx)("line",{x1:t,y1:n,x2:r,y2:o}),i.map((function(e,t){return(0,v.jsx)("g",{transform:"translate(".concat(e.x,",").concat(e.y,")"),children:(0,v.jsx)("path",{className:"tl-snap-point",d:"M ".concat(-a,",").concat(-a," L ").concat(a,",").concat(a," M ").concat(-a,",").concat(a," L ").concat(a,",").concat(-a)})},t)}))]})}function w(e){var t,n=e.gaps,r=e.direction,o=3.5/e.zoom,a=[-1/0,1/0],u=null,s="horizontal"===r,c=i(n);try{for(c.s();!(t=c.n()).done;){var l=t.value;(u=(0,m.rangeIntersection)(a[0],a[1],s?l.startEdge[0].y:l.startEdge[0].x,s?l.startEdge[1].y:l.startEdge[1].x))&&(a=u,(u=(0,m.rangeIntersection)(a[0],a[1],s?l.endEdge[0].y:l.endEdge[0].x,s?l.endEdge[1].y:l.endEdge[1].x))&&(a=u))}}catch(d){c.e(d)}finally{c.f()}if(null===a)return null;var f=(a[0]+a[1])/2;return(0,v.jsx)("g",{className:"tl-snap-indicator",stroke:"cyan",children:n.map((function(e,t){var n=e.startEdge,r=e.endEdge;return(0,v.jsx)(y.Fragment,{children:s?(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)("line",{x1:n[0].x,y1:f-2*o,x2:n[1].x,y2:f+2*o}),(0,v.jsx)("line",{x1:r[0].x,y1:f-2*o,x2:r[1].x,y2:f+2*o}),(0,v.jsx)("line",{x1:n[0].x,y1:f,x2:r[0].x,y2:f}),(0,v.jsx)("line",{x1:(n[0].x+r[0].x)/2,y1:f-o,x2:(n[0].x+r[0].x)/2,y2:f+o})]}):(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)("line",{x1:f-2*o,y1:n[0].y,x2:f+2*o,y2:n[1].y}),(0,v.jsx)("line",{x1:f-2*o,y1:r[0].y,x2:f+2*o,y2:r[1].y}),(0,v.jsx)("line",{x1:f,y1:n[0].y,x2:f,y2:r[0].y}),(0,v.jsx)("line",{x1:f-o,y1:(n[0].y+r[0].y)/2,x2:f+o,y2:(n[0].y+r[0].y)/2})]})},t)}))})}function S(e){var t=e.className,n=e.line,r=e.zoom;return(0,v.jsx)("svg",{className:(0,g.default)("tl-overlays__item",t),children:"points"===n.type?(0,v.jsx)(b,o(o({},n),{},{zoom:r})):"gaps"===n.type?(0,v.jsx)(w,o(o({},n),{},{zoom:r})):null})}},57657:function(e,t,n){"use strict";var r,o=n(50883).default,i=Object.defineProperty,a=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,c={};!function(e,t){for(var n in t)i(e,n,{get:t[n],enumerable:!0})}(c,{DefaultSpinner:function(){return f}}),e.exports=(r=c,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var c,l=o(u(t));try{var f=function(){var o=c.value;s.call(e,o)||o===n||i(e,o,{get:function(){return t[o]},enumerable:!(r=a(t,o))||r.enumerable})};for(l.s();!(c=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(i({},"__esModule",{value:!0}),r));var l=n(44414);function f(){return(0,l.jsx)("svg",{width:16,height:16,viewBox:"0 0 16 16",children:(0,l.jsxs)("g",{strokeWidth:2,fill:"none",fillRule:"evenodd",children:[(0,l.jsx)("circle",{strokeOpacity:.25,cx:8,cy:8,r:7,stroke:"currentColor"}),(0,l.jsx)("path",{strokeLinecap:"round",d:"M15 8c0-4.5-4.5-7-7-7",stroke:"currentColor",children:(0,l.jsx)("animateTransform",{attributeName:"transform",type:"rotate",from:"0 8 8",to:"360 8 8",dur:"1s",repeatCount:"indefinite"})})]})})}},38898:function(e,t,n){"use strict";var r,o=n(50883).default,i=Object.defineProperty,a=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,c={};!function(e,t){for(var n in t)i(e,n,{get:t[n],enumerable:!0})}(c,{DefaultSvgDefs:function(){return l}}),e.exports=(r=c,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var c,l=o(u(t));try{var f=function(){var o=c.value;s.call(e,o)||o===n||i(e,o,{get:function(){return t[o]},enumerable:!(r=a(t,o))||r.enumerable})};for(l.s();!(c=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(i({},"__esModule",{value:!0}),r));var l=function(){return null}},68607:function(e,t,n){"use strict";var r,o=n(12897).default,i=n(50883).default,a=Object.defineProperty,u=Object.getOwnPropertyDescriptor,s=Object.getOwnPropertyNames,c=Object.prototype.hasOwnProperty,l={};!function(e,t){for(var n in t)a(e,n,{get:t[n],enumerable:!0})}(l,{getSnapshot:function(){return g},loadSnapshot:function(){return h}}),e.exports=(r=l,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,l=i(s(t));try{var f=function(){var i=o.value;c.call(e,i)||i===n||a(e,i,{get:function(){return t[i]},enumerable:!(r=u(t,i))||r.enumerable})};for(l.s();!(o=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(a({},"__esModule",{value:!0}),r));var f=n(85191),d=n(30645),p=n(32511);function h(e,t,n){var r={};if("store"in t){var i=e.schema.migrateStoreSnapshot(t);if("success"!==i.type)throw new Error("Failed to migrate store snapshot: "+i.reason);r.document={schema:e.schema.serialize(),store:(0,d.filterEntries)(i.value,(function(t,n){var r=n.typeName;return e.scopedTypes.document.has(r)}))}}else r=t;var a=(0,f.pluckPreservingValues)(e.get(f.TLINSTANCE_ID)),u=v.get(e,p.createSessionStateSnapshotSignal).get();e.atomic((function(){r.document&&e.loadStoreSnapshot(r.document),a&&e.update(f.TLINSTANCE_ID,(function(e){return o(o({},e),a)})),u&&(0,p.loadSessionStateSnapshotIntoStore)(e,u),r.session&&(0,p.loadSessionStateSnapshotIntoStore)(e,r.session,{forceOverwrite:null===n||void 0===n?void 0:n.forceOverwriteSessionState})}))}var v=new d.WeakCache;function g(e){var t=v.get(e,p.createSessionStateSnapshotSignal).get();if(!t)throw new Error("Session state is not ready yet");return{document:e.getStoreSnapshot(),session:t}}},32511:function(e,t,n){"use strict";var r,o,i,a=n(12897).default,u=n(41132).default,s=n(50883).default,c=Object.create,l=Object.defineProperty,f=Object.getOwnPropertyDescriptor,d=Object.getOwnPropertyNames,p=Object.getPrototypeOf,h=Object.prototype.hasOwnProperty,v=function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,i=s(d(t));try{var a=function(){var i=o.value;h.call(e,i)||i===n||l(e,i,{get:function(){return t[i]},enumerable:!(r=f(t,i))||r.enumerable})};for(i.s();!(o=i.n()).done;)a()}catch(u){i.e(u)}finally{i.f()}}return e},g={};!function(e,t){for(var n in t)l(e,n,{get:t[n],enumerable:!0})}(g,{TAB_ID:function(){return k},createSessionStateSnapshotSignal:function(){return E},extractSessionStateFromLegacySnapshot:function(){return M},loadSessionStateSnapshotIntoStore:function(){return C}}),e.exports=(i=g,v(l({},"__esModule",{value:!0}),i));var y=n(81501),m=n(85191),b=n(30645),w=n(98556),S=function(e,t,n){return n=null!=e?c(p(e)):{},v(!t&&e&&e.__esModule?n:l(n,"default",{value:e,enumerable:!0}),e)}(n(51812)),x=n(55015),P="TLDRAW_TAB_ID_v2",O=globalThis.window;var k=O?null!==(r=null!==(o=O[P])&&void 0!==o?o:(0,b.getFromSessionStorage)(P))&&void 0!==r?r:"TLDRAW_INSTANCE_STATE_V1_"+(0,b.uniqueId)():"<error>";O&&(O[P]=k,O&&(["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(O.navigator.platform)||x.tlenv.isDarwin&&"ontouchend"in document)?(0,b.setInSessionStorage)(P,k):(0,b.deleteFromSessionStorage)(P)),null===O||void 0===O||O.addEventListener("beforeunload",(function(){(0,b.setInSessionStorage)(P,k)}));var _={Initial:0},j=Math.max.apply(Math,u(Object.values(_)));var I=w.T.object({version:w.T.number,currentPageId:m.pageIdValidator.optional(),isFocusMode:w.T.boolean.optional(),exportBackground:w.T.boolean.optional(),isDebugMode:w.T.boolean.optional(),isToolLocked:w.T.boolean.optional(),isGridMode:w.T.boolean.optional(),pageStates:w.T.arrayOf(w.T.object({pageId:m.pageIdValidator,camera:w.T.object({x:w.T.number,y:w.T.number,z:w.T.number}).optional(),selectedShapeIds:w.T.arrayOf(m.shapeIdValidator).optional(),focusedGroupId:m.shapeIdValidator.nullable().optional()})).optional()});function T(e){if(!e||"object"!==typeof e)return console.warn("Invalid instance state"),null;if(!("version"in e)||"number"!==typeof e.version)return console.warn("No version in instance state"),null;var t;e.version!==j&&(e=(0,b.structuredClone)(e),(t=e).version,_.Initial,t.version=j);try{return I.validate(e)}catch(n){return console.warn(n),null}}function E(e){var t=e.query.ids("page");return(0,y.computed)("sessionStateSnapshot",(function(){var n=e.get(m.TLINSTANCE_ID);if(!n)return null;var r=u(t.get());return{version:j,currentPageId:n.currentPageId,exportBackground:n.exportBackground,isFocusMode:n.isFocusMode,isDebugMode:n.isDebugMode,isToolLocked:n.isToolLocked,isGridMode:n.isGridMode,pageStates:r.map((function(t){var n,r,o,i,a,u=e.get(m.InstancePageStateRecordType.createId(t)),s=e.get(m.CameraRecordType.createId(t));return{pageId:t,camera:{x:null!==(n=null===s||void 0===s?void 0:s.x)&&void 0!==n?n:0,y:null!==(r=null===s||void 0===s?void 0:s.y)&&void 0!==r?r:0,z:null!==(o=null===s||void 0===s?void 0:s.z)&&void 0!==o?o:1},selectedShapeIds:null!==(i=null===u||void 0===u?void 0:u.selectedShapeIds)&&void 0!==i?i:[],focusedGroupId:null!==(a=null===u||void 0===u?void 0:u.focusedGroupId)&&void 0!==a?a:null}}))}}),{isEqual:S.default})}function C(e,t,n){var r,o,i,u,c,l=T(t);if(l){var f=(0,m.pluckPreservingValues)(e.get(m.TLINSTANCE_ID)),d=null!==n&&void 0!==n&&n.forceOverwrite?l:f,p=null!==n&&void 0!==n&&n.forceOverwrite?f:l,h=e.schema.types.instance.create(a(a({id:m.TLINSTANCE_ID},f),{},{currentPageId:l.currentPageId,isDebugMode:null!==(r=null===d||void 0===d?void 0:d.isDebugMode)&&void 0!==r?r:null===p||void 0===p?void 0:p.isDebugMode,isFocusMode:null!==(o=null===d||void 0===d?void 0:d.isFocusMode)&&void 0!==o?o:null===p||void 0===p?void 0:p.isFocusMode,isToolLocked:null!==(i=null===d||void 0===d?void 0:d.isToolLocked)&&void 0!==i?i:null===p||void 0===p?void 0:p.isToolLocked,isGridMode:null!==(u=null===d||void 0===d?void 0:d.isGridMode)&&void 0!==u?u:null===p||void 0===p?void 0:p.isGridMode,exportBackground:null!==(c=null===d||void 0===d?void 0:d.exportBackground)&&void 0!==c?c:null===p||void 0===p?void 0:p.exportBackground}));e.atomic((function(){var t,n,r=s(null!==(t=l.pageStates)&&void 0!==t?t:[]);try{for(r.s();!(n=r.n()).done;){var o,i,a,u,c,f,d,p,v=n.value;if(e.has(v.pageId)){var g=m.CameraRecordType.createId(v.pageId),y=m.InstancePageStateRecordType.createId(v.pageId),b=e.get(g),w=e.get(y);e.put([m.CameraRecordType.create({id:g,x:null!==(o=null===(i=v.camera)||void 0===i?void 0:i.x)&&void 0!==o?o:null===b||void 0===b?void 0:b.x,y:null!==(a=null===(u=v.camera)||void 0===u?void 0:u.y)&&void 0!==a?a:null===b||void 0===b?void 0:b.y,z:null!==(c=null===(f=v.camera)||void 0===f?void 0:f.z)&&void 0!==c?c:null===b||void 0===b?void 0:b.z}),m.InstancePageStateRecordType.create({id:y,pageId:v.pageId,selectedShapeIds:null!==(d=v.selectedShapeIds)&&void 0!==d?d:null===w||void 0===w?void 0:w.selectedShapeIds,focusedGroupId:null!==(p=v.focusedGroupId)&&void 0!==p?p:null===w||void 0===w?void 0:w.focusedGroupId})])}}}catch(S){r.e(S)}finally{r.f()}e.put([h]),e.ensureStoreIsUsable()}))}}function M(e){for(var t=[],n=0,r=Object.values(e);n<r.length;n++){var o,i=r[n];null!==(o=i.typeName)&&void 0!==o&&o.match(/^(instance.*|pointer|camera)$/)&&t.push(i)}var a=t.filter((function(e){return"instance"===e.typeName&&e.id!==m.TLINSTANCE_ID}))[0];if(!a)return null;var u={version:j,currentPageId:a.currentPageId,exportBackground:!!a.exportBackground,isFocusMode:!!a.isFocusMode,isDebugMode:!!a.isDebugMode,isToolLocked:!!a.isToolLocked,isGridMode:!1,pageStates:t.filter((function(e){return"instance_page_state"===e.typeName&&e.instanceId===a.id})).map((function(t){var n,r=null!==(n=e[t.cameraId])&&void 0!==n?n:{x:0,y:0,z:1};return{pageId:t.pageId,camera:{x:r.x,y:r.y,z:r.z},selectedShapeIds:t.selectedShapeIds,focusedGroupId:t.focusedGroupId}}))};try{return I.validate(u),u}catch(s){return null}}},7115:function(e,t,n){"use strict";var r,o=n(85224),i=n(41132).default,a=n(50883).default,u=Object.defineProperty,s=Object.getOwnPropertyDescriptor,c=Object.getOwnPropertyNames,l=Object.prototype.hasOwnProperty,f={};!function(e,t){for(var n in t)u(e,n,{get:t[n],enumerable:!0})}(f,{USER_COLORS:function(){return w},defaultUserPreferences:function(){return P},getFreshUserPreferences:function(){return O},getUserPreferences:function(){return M},setUserPreferences:function(){return j},userPrefersReducedMotion:function(){return x},userTypeValidator:function(){return y}}),e.exports=(r=f,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,i=a(c(t));try{var f=function(){var i=o.value;l.call(e,i)||i===n||u(e,i,{get:function(){return t[i]},enumerable:!(r=s(t,i))||r.enumerable})};for(i.s();!(o=i.n()).done;)f()}catch(d){i.e(d)}finally{i.f()}}return e}(u({},"__esModule",{value:!0}),r));var d=n(81501),p=n(85191),h=n(30645),v=n(98556),g="TLDRAW_USER_DATA_v3",y=v.T.object({id:v.T.string,name:v.T.string.nullable().optional(),color:v.T.string.nullable().optional(),locale:v.T.string.nullable().optional(),animationSpeed:v.T.number.nullable().optional(),edgeScrollSpeed:v.T.number.nullable().optional(),colorScheme:v.T.literalEnum("light","dark","system").optional(),isSnapMode:v.T.boolean.nullable().optional(),isWrapMode:v.T.boolean.nullable().optional(),isDynamicSizeMode:v.T.boolean.nullable().optional(),isPasteAtCursorMode:v.T.boolean.nullable().optional()}),m={AddAnimationSpeed:1,AddIsSnapMode:2,MakeFieldsNullable:3,AddEdgeScrollSpeed:4,AddExcalidrawSelectMode:5,AddDynamicSizeMode:6,AllowSystemColorScheme:7,AddPasteAtCursor:8},b=Math.max.apply(Math,i(Object.values(m)));var w=["#FF802B","#EC5E41","#F2555A","#F04F88","#E34BA9","#BD54C6","#9D5BD2","#7B66DC","#02B1CC","#11B3A3","#39B178","#55B467"];function S(){return w[Math.floor(Math.random()*w.length)]}function x(){var e,t,n;return"undefined"!==typeof window&&"matchMedia"in window&&(null!==(e=null===(t=(n=window).matchMedia)||void 0===t||null===(t=t.call(n,"(prefers-reduced-motion: reduce)"))||void 0===t?void 0:t.matches)&&void 0!==e&&e)}var P=Object.freeze({name:"New User",locale:(0,p.getDefaultTranslationLocale)(),color:S(),edgeScrollSpeed:1,animationSpeed:x()?0:1,isSnapMode:!1,isWrapMode:!1,isDynamicSizeMode:!1,isPasteAtCursorMode:!1,colorScheme:"light"});function O(){return{id:(0,h.uniqueId)(),color:S()}}function k(e){if(null===e||"object"!==typeof e)return O();if(!("version"in e)||!("user"in e)||"number"!==typeof e.version)return O();var t,n=(0,h.structuredClone)(e);(t=n).version<m.AddAnimationSpeed&&(t.user.animationSpeed=1),t.version<m.AddIsSnapMode&&(t.user.isSnapMode=!1),t.version,m.MakeFieldsNullable,t.version<m.AddEdgeScrollSpeed&&(t.user.edgeScrollSpeed=1),t.version<m.AddExcalidrawSelectMode&&(t.user.isWrapMode=!1),t.version<m.AllowSystemColorScheme&&(!0===t.user.isDarkMode?t.user.colorScheme="dark":!1===t.user.isDarkMode&&(t.user.colorScheme="light"),delete t.user.isDarkMode),t.version<m.AddDynamicSizeMode&&(t.user.isDynamicSizeMode=!1),t.version<m.AddPasteAtCursor&&(t.user.isPasteAtCursorMode=!1),t.version=b;try{return y.validate(n.user)}catch(r){return O()}}var _=(0,d.atom)("globalUserData",null);function j(e){y.validate(e),_.set(e),(0,h.setInLocalStorage)(g,JSON.stringify({version:b,user:_.get()})),null===I||void 0===I||I.postMessage({type:C,origin:E(),data:{user:M(),version:b}})}var I="undefined"===typeof BroadcastChannel||"undefined"!==typeof o&&!1?null:new BroadcastChannel("tldraw-user-sync");null===I||void 0===I||I.addEventListener("message",(function(e){var t=e.data;(null===t||void 0===t?void 0:t.type)===C&&(null===t||void 0===t?void 0:t.origin)!==E()&&_.set(k(t.data))}));var T=null;function E(){return null===T&&(T=(0,h.uniqueId)()),T}var C="tldraw-user-preferences-change";function M(){var e=_.get();return e||j(e=function(){var e;return k(null!==(e=JSON.parse((0,h.getFromLocalStorage)(g)||"null"))&&void 0!==e?e:null)}()),e}},41181:function(e,t,n){"use strict";var r,o=n(91847).default,i=n(50883).default,a=["initialData","defaultName","id","assets","onMount","collaboration"],u=Object.defineProperty,s=Object.getOwnPropertyDescriptor,c=Object.getOwnPropertyNames,l=Object.prototype.hasOwnProperty,f={};!function(e,t){for(var n in t)u(e,n,{get:t[n],enumerable:!0})}(f,{createTLSchemaFromUtils:function(){return S},createTLStore:function(){return x},inlineBase64AssetStore:function(){return w}}),e.exports=(r=f,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,a=i(c(t));try{var f=function(){var i=o.value;l.call(e,i)||i===n||u(e,i,{get:function(){return t[i]},enumerable:!(r=s(t,i))||r.enumerable})};for(a.s();!(o=a.n()).done;)f()}catch(d){a.e(d)}finally{a.f()}}return e}(u({},"__esModule",{value:!0}),r));var d=n(75881),p=n(85191),h=n(30645),v=n(41862),g=n(68607),y=n(88307),m=n(10155),b=function(e){return e.props.src},w={upload:function(e,t){return h.FileHelpers.blobToDataUrl(t)}};function S(e){return"schema"in e&&e.schema?e.schema:(0,p.createTLSchema)({shapes:"shapeUtils"in e&&e.shapeUtils?P((0,m.checkShapesAndAddCore)(e.shapeUtils)):void 0,bindings:"bindingUtils"in e&&e.bindingUtils?P((0,y.checkBindings)(e.bindingUtils)):void 0,migrations:"migrations"in e?e.migrations:void 0})}function x(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.initialData,r=t.defaultName,i=void 0===r?"":r,u=t.id,s=t.assets,c=void 0===s?w:s,l=t.onMount,f=t.collaboration,p=o(t,a),y=S(p),m=new d.Store({id:u,schema:y,initialData:n,props:{defaultName:i,assets:{upload:c.upload,resolve:null!==(e=c.resolve)&&void 0!==e?e:b},onMount:function(e){(0,h.assert)(e instanceof v.Editor),null===l||void 0===l||l(e)},collaboration:f}});if(p.snapshot){if(n)throw new Error("Cannot provide both initialData and snapshot");(0,g.loadSnapshot)(m,p.snapshot)}return m}function P(e){return Object.fromEntries(e.map((function(e){return[e.type,{props:e.props,migrations:e.migrations}]})))}},23257:function(e,t,n){"use strict";var r,o=n(50883).default,i=Object.defineProperty,a=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,c={};!function(e,t){for(var n in t)i(e,n,{get:t[n],enumerable:!0})}(c,{createTLUser:function(){return g},useTldrawUser:function(){return y}}),e.exports=(r=c,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var c,l=o(u(t));try{var f=function(){var o=c.value;s.call(e,o)||o===n||i(e,o,{get:function(){return t[o]},enumerable:!(r=a(t,o))||r.enumerable})};for(l.s();!(c=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(i({},"__esModule",{value:!0}),r));var l=n(81501),f=n(61267),d=n(9950),p=n(89019),h=n(7115),v=(0,l.computed)("defaultLocalStorageUserPrefs",(function(){return(0,h.getUserPreferences)()}));function g(){var e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{userPreferences:null!==(e=n.userPreferences)&&void 0!==e?e:v,setUserPreferences:null!==(t=n.setUserPreferences)&&void 0!==t?t:h.setUserPreferences}}function y(e){var t,n=(0,p.useShallowObjectIdentity)(null!==(t=e.userPreferences)&&void 0!==t?t:v),r=(0,f.useAtom)("userAtom",n);return(0,d.useEffect)((function(){r.set(n)}),[n,r]),(0,d.useMemo)((function(){return g({userPreferences:(0,l.computed)("userPreferences",(function(){var e=r.get();return(0,l.isSignal)(e)?e.get():e})),setUserPreferences:e.setUserPreferences})}),[r,e.setUserPreferences])}},88307:function(e,t,n){"use strict";var r,o=n(50883).default,i=Object.defineProperty,a=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,c={};function l(e){var t,n=[],r=new Set,i=o(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;if(r.has(a.type))throw new Error('Binding type "'.concat(a.type,'" is defined more than once'));n.push(a),r.add(a.type)}}catch(u){i.e(u)}finally{i.f()}return n}!function(e,t){for(var n in t)i(e,n,{get:t[n],enumerable:!0})}(c,{checkBindings:function(){return l}}),e.exports=(r=c,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var c,l=o(u(t));try{var f=function(){var o=c.value;s.call(e,o)||o===n||i(e,o,{get:function(){return t[o]},enumerable:!(r=a(t,o))||r.enumerable})};for(l.s();!(c=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(i({},"__esModule",{value:!0}),r))},10155:function(e,t,n){"use strict";var r,o=n(50883).default,i=Object.defineProperty,a=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,c={};!function(e,t){for(var n in t)i(e,n,{get:t[n],enumerable:!0})}(c,{checkShapesAndAddCore:function(){return d},coreShapes:function(){return l}}),e.exports=(r=c,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var c,l=o(u(t));try{var f=function(){var o=c.value;s.call(e,o)||o===n||i(e,o,{get:function(){return t[o]},enumerable:!(r=a(t,o))||r.enumerable})};for(l.s();!(c=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(i({},"__esModule",{value:!0}),r));var l=[n(71004).GroupShapeUtil],f=new Set(l.map((function(e){return e.type})));function d(e){var t,n=[].concat(l),r=new Set,i=o(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;if(f.has(a.type))throw new Error('Shape type "'.concat(a.type,'" is a core shapes type and cannot be overridden'));if(r.has(a.type))throw new Error('Shape type "'.concat(a.type,'" is defined more than once'));n.push(a),r.add(a.type)}}catch(u){i.e(u)}finally{i.f()}return n}},63792:function(e,t,n){"use strict";var r,o=n(50883).default,i=Object.defineProperty,a=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,c={};!function(e,t){for(var n in t)i(e,n,{get:t[n],enumerable:!0})}(c,{DEFAULT_ANIMATION_OPTIONS:function(){return d},DEFAULT_CAMERA_OPTIONS:function(){return f},INTERNAL_POINTER_IDS:function(){return p},LEFT_MOUSE_BUTTON:function(){return v},MIDDLE_MOUSE_BUTTON:function(){return y},RIGHT_MOUSE_BUTTON:function(){return g},SIDES:function(){return h},STYLUS_ERASER_BUTTON:function(){return m},ZOOM_TO_FIT_PADDING:function(){return b}}),e.exports=(r=c,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var c,l=o(u(t));try{var f=function(){var o=c.value;s.call(e,o)||o===n||i(e,o,{get:function(){return t[o]},enumerable:!(r=a(t,o))||r.enumerable})};for(l.s();!(c=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(i({},"__esModule",{value:!0}),r));var l=n(19526),f={isLocked:!1,wheelBehavior:"pan",panSpeed:1,zoomSpeed:1,zoomSteps:[.1,.25,.5,1,2,4,8]},d={duration:0,easing:l.EASINGS.easeInOutCubic},p={CAMERA_MOVE:-10},h=["top","right","bottom","left"],v=0,g=2,y=1,m=5,b=128},41862:function(e,t,n){"use strict";var r,o=n(85715).default,i=n(8053).default,a=n(4633).default,u=n(29293).default,s=n(91847).default,c=n(41132).default,l=n(43693).default,f=n(12897).default,d=n(17383).default,p=n(34579).default,h=n(18336).default,v=n(29511).default,g=n(11303).default,y=n(50883).default,m=["animation"],b=Object.create,w=Object.defineProperty,S=Object.getOwnPropertyDescriptor,x=Object.getOwnPropertyNames,P=Object.getPrototypeOf,O=Object.prototype.hasOwnProperty,k=function(e,t){return(t=Symbol[e])?t:Symbol.for("Symbol."+e)},_=function(e){throw TypeError(e)},j=function(e,t,n){return t in e?w(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},I=function(e,t){return w(e,"name",{value:t,configurable:!0})},T=function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,i=y(x(t));try{var a=function(){var i=o.value;O.call(e,i)||i===n||w(e,i,{get:function(){return t[i]},enumerable:!(r=S(t,i))||r.enumerable})};for(i.s();!(o=i.n()).done;)a()}catch(u){i.e(u)}finally{i.f()}}return e},E=["class","method","getter","setter","accessor","field","value","get","set"],C=function(e){return void 0!==e&&"function"!==typeof e?_("Function expected"):e},M=function(e,t,n,r,o){return{kind:E[e],name:t,metadata:r,addInitializer:function(e){return n._?_("Already initialized"):o.push(C(e||null))}}},A=function(e,t){return j(t,k("metadata"),e[3])},D=function(e,t,n,r,o,i){var a,u,s,c,l,f=7&t,d=!!(8&t),p=!!(16&t),h=f>3?e.length+1:f?d?1:2:0,v=E[f+5],y=f>3&&(e[h-1]=[]),m=e[h]||(e[h]=[]),b=f&&(!p&&!d&&(o=o.prototype),f<5&&(f>3||!p)&&S(f<4?o:g("set",g("get",{},n,(function(){return U(this,i)})),n,(function(e){return F(this,i,e)})),n));f?p&&f<4&&I(i,(f>2?"set ":f>1?"get ":"")+n):I(o,n);for(var x=r.length-1;x>=0;x--)c=M(f,n,s={},e[3],m),f&&(c.static=d,c.private=p,l=c.access={has:p?function(e){return L(o,e)}:function(e){return n in e}},3^f&&(l.get=p?function(e){return(1^f?U:B)(e,o,4^f?i:b.get)}:function(e){return e[n]}),f>2&&(l.set=p?function(e,t){return F(e,o,t,4^f?i:b.set)}:function(e,t){return e[n]=t})),u=(0,r[x])(f?f<4?p?i:b[v]:f>4?void 0:{get:b.get,set:b.set}:o,c),s._=1,4^f||void 0===u?C(u)&&(f>4?y.unshift(u):f?p?i=u:b[v]=u:o=u):"object"!==typeof u||null===u?_("Object expected"):(C(a=u.get)&&(b.get=a),C(a=u.set)&&(b.set=a),C(a=u.init)&&y.unshift(a));return f||A(e,o),b&&w(o,n,b),p?4^f?i:b:o},R=function(e,t,n){return j(e,"symbol"!==typeof t?t+"":t,n)},N=function(e,t,n){return t.has(e)||_("Cannot "+n)},L=function(e,t){return Object(t)!==t?_('Cannot use the "in" operator on this value'):e.has(t)},U=function(e,t,n){return N(e,t,"read from private field"),n?n.call(e):t.get(e)},F=function(e,t,n,r){return N(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n},B=function(e,t,n){return N(e,t,"access private method"),n},V={};!function(e,t){for(var n in t)w(e,n,{get:t[n],enumerable:!0})}(V,{Editor:function(){return Qt}}),e.exports=(r=V,T(w({},"__esModule",{value:!0}),r));var z,H,K,G,q,W,Y,X,Z,$,Q,J,ee,te,ne,re,oe,ie,ae,ue,se,ce,le,fe,de,pe,he,ve,ge,ye,me,be,we,Se,xe,Pe,Oe,ke,_e,je,Ie,Te,Ee,Ce,Me,Ae,De,Re,Ne,Le,Ue,Fe,Be,Ve,ze,He,Ke,Ge,qe,We,Ye,Xe,Ze,$e,Qe,Je,et,tt,nt,rt,ot,it,at,ut,st=n(81501),ct=n(75881),lt=n(85191),ft=n(30645),dt=function(e,t,n){return n=null!=e?b(P(e)):{},T(!t&&e&&e.__esModule?n:w(n,"default",{value:e,enumerable:!0}),e)}(n(75438)),pt=n(68607),ht=n(23257),vt=n(88307),gt=n(10155),yt=n(63792),mt=n(53366),bt=n(55015),wt=n(49098),St=n(61873),xt=n(75731),Pt=n(24161),Ot=n(84906),kt=n(45650),_t=n(19526),jt=n(65388),It=n(40797),Tt=n(63557),Et=n(80020),Ct=n(61114),Mt=n(1074),At=n(82196),Dt=n(12136),Rt=n(95518),Nt=n(67470),Lt=n(83889),Ut=n(71808),Ft=n(30127),Bt=n(91889),Vt=n(2214),zt=n(23041),Ht=n(20779),Kt=n(91669),Gt=n(97689),qt=n(29403),Wt=n(57799),Yt=n(8806),Xt=n(89496),Zt=n(47700),$t=n(43006),Qt=function(e){function t(e){var n,r,o=e.store,i=e.user,a=e.shapeUtils,u=e.bindingUtils,s=e.tools,g=e.getContainer,m=e.cameraOptions,b=e.initialState,w=e.autoFocus,S=e.inferDarkMode,x=e.options,P=e.isShapeHidden;d(this,t),r=h(this,t),function(e,t,n,r){for(var o=0,i=e[t>>1],a=i&&i.length;o<a;o++)1&t?i[o].call(n):r=i[o].call(n,r)}(ut,5,r),R(r,"_isShapeHiddenPredicate"),R(r,"options"),R(r,"contextId",(0,ft.uniqueId)()),R(r,"store"),R(r,"root"),R(r,"disposables",new Set),R(r,"isDisposed",!1),R(r,"_tickManager"),R(r,"snaps"),R(r,"timers",St.tltime.forContext(r.contextId)),R(r,"user"),R(r,"textMeasure"),R(r,"environment",bt.tlenv),R(r,"scribbles"),R(r,"sideEffects"),R(r,"edgeScrollManager"),R(r,"focusManager"),R(r,"getContainer"),R(r,"shapeUtils"),R(r,"styleProps"),R(r,"bindingUtils"),R(r,"history"),R(r,"_shouldIgnoreShapeLock",!1),R(r,"_crashingError",null),R(r,"_isChangingStyleTimeout",-1),R(r,"menus",wt.tlmenus.forContext(r.contextId)),R(r,"_cameraOptions",(0,st.atom)("camera options",yt.DEFAULT_CAMERA_OPTIONS)),R(r,"_viewportAnimation",null),R(r,"_willSetInitialBounds",!0),R(r,"_isLockedOnFollowingUser",(0,st.atom)("isLockedOnFollowingUser",!1)),R(r,"_cameraState",(0,st.atom)("camera state","idle")),R(r,"_cameraStateTimeoutRemaining",0),R(r,"_currentPageShapeIds"),R(r,"_parentIdsToChildIds"),R(r,"animatingShapes",new Map),R(r,"externalAssetContentHandlers",{file:null,url:null}),R(r,"temporaryAssetPreview",new Map),R(r,"externalContentHandlers",{text:null,files:null,embed:null,"svg-text":null,url:null}),R(r,"inputs",{originPagePoint:new kt.Vec,originScreenPoint:new kt.Vec,previousPagePoint:new kt.Vec,previousScreenPoint:new kt.Vec,currentPagePoint:new kt.Vec,currentScreenPoint:new kt.Vec,keys:new Set,buttons:new Set,isPen:!1,shiftKey:!1,metaKey:!1,ctrlKey:!1,altKey:!1,isDragging:!1,isPointing:!1,isPinching:!1,isEditing:!1,isPanning:!1,isSpacebarPanning:!1,pointerVelocity:new kt.Vec}),R(r,"_clickManager",new zt.ClickManager(r)),R(r,"_prevCursor","default"),R(r,"_shiftKeyTimeout",-1),R(r,"_altKeyTimeout",-1),R(r,"_ctrlKeyTimeout",-1),R(r,"_metaKeyTimeout",-1),R(r,"_restoreToolId","select"),R(r,"_pinchStart",1),R(r,"_didPinch",!1),R(r,"_selectedShapeIdsAtPointerDown",[]),R(r,"_longPressTimeout",-1),R(r,"capturedPointerId",null),R(r,"performanceTracker"),R(r,"performanceTrackerTimeout",-1),R(r,"_pendingEventsForNextTick",[]),r._isShapeHiddenPredicate=P,r.options=f(f({},xt.defaultTldrawOptions),x),r.store=o,r.disposables.add(r.store.dispose.bind(r.store)),r.history=new Gt.HistoryManager({store:o,annotateError:function(e){r.annotateError(e,{origin:"history.batch",willCrashApp:!0}),r.crash(e)}}),r.snaps=new Wt.SnapManager(r),r.disposables.add(r.timers.dispose),r._cameraOptions.set(f(f({},yt.DEFAULT_CAMERA_OPTIONS),m)),r.user=new Zt.UserPreferencesManager(null!==i&&void 0!==i?i:(0,ht.createTLUser)(),null!==S&&void 0!==S&&S),r.disposables.add((function(){return r.user.dispose()})),r.getContainer=g,r.textMeasure=new Yt.TextManager(r),r._tickManager=new Xt.TickManager(r);var O=function(e){function t(){return d(this,t),h(this,t,arguments)}return v(t,e),p(t)}($t.RootState);l(O,"initial",null!==b&&void 0!==b?b:""),r.root=new O(r),r.root.children={};var k,_=(0,gt.checkShapesAndAddCore)(a),j={},I={},T=new Map,E=y(_);try{for(E.s();!(k=E.n()).done;){var C,M=k.value,A=new M(r);j[M.type]=A;var D=(0,lt.getShapePropKeysByStyle)(null!==(C=M.props)&&void 0!==C?C:{});I[M.type]=D;var N,L=y(D.keys());try{for(L.s();!(N=L.n()).done;){var U=N.value;if(T.has(U.id)){if(T.get(U.id)!==U)throw Error('Multiple style props with id "'.concat(U.id,'" in use. Style prop IDs must be unique.'))}else T.set(U.id,U)}}catch(ee){L.e(ee)}finally{L.f()}}}catch(ee){E.e(ee)}finally{E.f()}r.shapeUtils=j,r.styleProps=I;var F,B=(0,vt.checkBindings)(u),V={},z=y(B);try{for(z.s();!(F=z.n()).done;){var H=F.value,K=new H(r);V[H.type]=K}}catch(ee){z.e(ee)}finally{z.f()}r.bindingUtils=V;for(var G=0,q=c(s);G<q.length;G++){var W=q[G];if((0,ft.hasOwnProperty)(r.root.children,W.id))throw Error("Can't override tool with id \"".concat(W.id,'"'));r.root.children[W.id]=new W(r,r.root)}r.scribbles=new qt.ScribbleManager(r);var Y=function(e,t){var n=null,r=e.selectedShapeIds.filter((function(e){return!t.has(e)}));r.length!==e.selectedShapeIds.length&&(n||(n=f({},e)),n.selectedShapeIds=r);var o=e.erasingShapeIds.filter((function(e){return!t.has(e)}));o.length!==e.erasingShapeIds.length&&(n||(n=f({},e)),n.erasingShapeIds=o),e.hoveredShapeId&&t.has(e.hoveredShapeId)&&(n||(n=f({},e)),n.hoveredShapeId=null),e.editingShapeId&&t.has(e.editingShapeId)&&(n||(n=f({},e)),n.editingShapeId=null);var i=e.hintingShapeIds.filter((function(e){return!t.has(e)}));return i.length!==e.hintingShapeIds.length&&(n||(n=f({},e)),n.hintingShapeIds=i),e.focusedGroupId&&t.has(e.focusedGroupId)&&(n||(n=f({},e)),n.focusedGroupId=null),n};r.sideEffects=r.store.sideEffects;var X=new Map,Z=new Set,$=new Set,Q=new Set;if(r.disposables.add(r.sideEffects.registerOperationCompleteHandler((function(){Z.clear();var e,t=y($);try{for(t.s();!(e=t.n()).done;){var n,o=e.value;$.delete(o);var i=r.getShape(o);if(i){var a=r.getShapeUtil(i),u=null===(n=a.onChildrenChange)||void 0===n?void 0:n.call(a,i);null!==u&&void 0!==u&&u.length&&r.updateShapes(u)}}}catch(ee){t.e(ee)}finally{t.f()}if(Q.size){var s=Q;Q=new Set;var c,l=y(s);try{for(l.s();!(c=l.n()).done;){var f,d=c.value,p=r.getBindingUtil(d);null===(f=p.onOperationComplete)||void 0===f||f.call(p)}}catch(ee){l.e(ee)}finally{l.f()}}if(X.size){var h=X;X=new Map;var v,g=y(h.values());try{for(g.s();!(v=g.n()).done;){var m,b,w=v.value;null===(m=(b=r.getBindingUtil(w.binding)).onAfterDelete)||void 0===m||m.call(b,w)}}catch(ee){g.e(ee)}finally{g.f()}}r.emit("update")}))),r.disposables.add(r.sideEffects.register({shape:{afterChange:function(e,t){var n,o=y(r.getBindingsInvolvingShape(t));try{for(o.s();!(n=o.n()).done;){var i,a,u,s,c=n.value;if(Q.add(c.type),c.fromId===t.id)null===(i=(a=r.getBindingUtil(c)).onAfterChangeFromShape)||void 0===i||i.call(a,{binding:c,shapeBefore:e,shapeAfter:t});if(c.toId===t.id)null===(u=(s=r.getBindingUtil(c)).onAfterChangeToShape)||void 0===u||u.call(s,{binding:c,shapeBefore:e,shapeAfter:t})}}catch(ee){o.e(ee)}finally{o.f()}if(e.parentId!==t.parentId){var l=function(e){var t=r.getShape(e);if(t){var n,o=y(r.getBindingsInvolvingShape(t));try{for(o.s();!(n=o.n()).done;){var i,a,u,s,c=n.value;if(Q.add(c.type),c.fromId===t.id)null===(i=(a=r.getBindingUtil(c)).onAfterChangeFromShape)||void 0===i||i.call(a,{binding:c,shapeBefore:t,shapeAfter:t});if(c.toId===t.id)null===(u=(s=r.getBindingUtil(c)).onAfterChangeToShape)||void 0===u||u.call(s,{binding:c,shapeBefore:t,shapeAfter:t})}}catch(ee){o.e(ee)}finally{o.f()}}};l(t.id),r.visitDescendants(t.id,l)}if(e.parentId!==t.parentId&&(0,lt.isPageId)(t.parentId)){var f=new Set([e.id]);r.visitDescendants(e.id,(function(e){f.add(e)}));var d,p=y(r.getPageStates());try{for(p.s();!(d=p.n()).done;){var h=d.value;if(h.pageId!==t.parentId){var v=Y(h,f);v&&r.store.put([v])}}}catch(ee){p.e(ee)}finally{p.f()}}e.parentId&&(0,lt.isShapeId)(e.parentId)&&$.add(e.parentId),t.parentId!==e.parentId&&(0,lt.isShapeId)(t.parentId)&&$.add(t.parentId)},beforeDelete:function(e){if(!Z.has(e.id)){e.parentId&&(0,lt.isShapeId)(e.parentId)&&$.add(e.parentId),Z.add(e.id);var t,n=[],o=y(r.getBindingsInvolvingShape(e));try{for(o.s();!(t=o.n()).done;){var i=t.value;Q.add(i.type),n.push(i.id);var a,u,s,c,l=r.getBindingUtil(i);if(i.fromId===e.id)null===(a=l.onBeforeIsolateToShape)||void 0===a||a.call(l,{binding:i,removedShape:e}),null===(u=l.onBeforeDeleteFromShape)||void 0===u||u.call(l,{binding:i,shape:e});else null===(s=l.onBeforeIsolateFromShape)||void 0===s||s.call(l,{binding:i,removedShape:e}),null===(c=l.onBeforeDeleteToShape)||void 0===c||c.call(l,{binding:i,shape:e})}}catch(ee){o.e(ee)}finally{o.f()}n.length&&r.deleteBindings(n);var f=new Set([e.id]),d=(0,ft.compact)(r.getPageStates().map((function(e){return Y(e,f)})));d.length&&r.store.put(d)}}},binding:{beforeCreate:function(e){var t,n,o=null===(t=(n=r.getBindingUtil(e)).onBeforeCreate)||void 0===t?void 0:t.call(n,{binding:e});return o||e},afterCreate:function(e){var t,n;Q.add(e.type),null===(t=(n=r.getBindingUtil(e)).onAfterCreate)||void 0===t||t.call(n,{binding:e})},beforeChange:function(e,t){var n,o,i=null===(n=(o=r.getBindingUtil(t)).onBeforeChange)||void 0===n?void 0:n.call(o,{bindingBefore:e,bindingAfter:t});return i||t},afterChange:function(e,t){var n,o;Q.add(t.type),null===(n=(o=r.getBindingUtil(t)).onAfterChange)||void 0===n||n.call(o,{bindingBefore:e,bindingAfter:t})},beforeDelete:function(e){var t,n;null===(t=(n=r.getBindingUtil(e)).onBeforeDelete)||void 0===t||t.call(n,{binding:e})},afterDelete:function(e){var t,n;null===(t=(n=r.getBindingUtil(e)).onAfterDelete)||void 0===t||t.call(n,{binding:e}),Q.add(e.type)}},page:{afterCreate:function(e){var t=lt.CameraRecordType.createId(e.id),n=lt.InstancePageStateRecordType.createId(e.id);r.store.has(t)||r.store.put([lt.CameraRecordType.create({id:t})]),r.store.has(n)||r.store.put([lt.InstancePageStateRecordType.create({id:n,pageId:e.id})])},afterDelete:function(e,t){var n;if((null===(n=r.getInstanceState())||void 0===n?void 0:n.currentPageId)===e.id){var o,i=null===(o=r.getPages().find((function(t){return t.id!==e.id})))||void 0===o?void 0:o.id;i?r.store.put([f(f({},r.getInstanceState()),{},{currentPageId:i})]):"user"===t&&r.store.ensureStoreIsUsable()}var a=lt.CameraRecordType.createId(e.id),u=lt.InstancePageStateRecordType.createId(e.id);r.store.remove([a,u])}},instance:{afterChange:function(e,t,n){if(!r.store.has(t.currentPageId)){var o,i=r.store.has(e.currentPageId)?e.currentPageId:null===(o=r.getPages()[0])||void 0===o?void 0:o.id;i?r.store.update(t.id,(function(e){return f(f({},e),{},{currentPageId:i})})):"user"===n&&r.store.ensureStoreIsUsable()}}},instance_page_state:{afterChange:function(e,t){if((null===e||void 0===e?void 0:e.selectedShapeIds)!==(null===t||void 0===t?void 0:t.selectedShapeIds)){var n,o=t.selectedShapeIds.filter((function(e){for(var n,o=null===(n=r.getShape(e))||void 0===n?void 0:n.parentId;(0,lt.isShapeId)(o);){var i;if(t.selectedShapeIds.includes(o))return!1;o=null===(i=r.getShape(o))||void 0===i?void 0:i.parentId}return!0})),i=null;if(o.length>0){var a=r.findCommonAncestor((0,ft.compact)(o.map((function(e){return r.getShape(e)}))),(function(e){return r.isShapeOfType(e,"group")}));a&&(i=a)}else null!==t&&void 0!==t&&t.focusedGroupId&&(i=t.focusedGroupId);if(o.length!==t.selectedShapeIds.length||i!==t.focusedGroupId)r.store.put([f(f({},t),{},{selectedShapeIds:o,focusedGroupId:null!==(n=i)&&void 0!==n?n:null})])}}}})),r._currentPageShapeIds=(0,Vt.deriveShapeIdsInCurrentPage)(r.store,(function(){return r.getCurrentPageId()})),r._parentIdsToChildIds=(0,Bt.parentsToChildren)(r.store),r.disposables.add(r.store.listen((function(e){r.emit("change",e)}))),r.disposables.add(r.history.dispose),r.run((function(){r.store.ensureStoreIsUsable(),r._updateCurrentPageState({editingShapeId:null,hoveredShapeId:null,erasingShapeIds:[]})}),{history:"ignore"}),b&&void 0===r.root.children[b])throw Error('No state found for initialState "'.concat(b,'".'));if(r.root.enter(void 0,"initial"),r.edgeScrollManager=new Ht.EdgeScrollManager(r),r.focusManager=new Kt.FocusManager(r,w),r.disposables.add(r.focusManager.dispose.bind(r.focusManager)),r.getInstanceState().followingUserId&&r.stopFollowingUser(),r.on("tick",r._flushEventsForTick),r.timers.requestAnimationFrame((function(){r._tickManager.start()})),r.performanceTracker=new ft.PerformanceTracker,null!==(n=r.store.props.collaboration)&&void 0!==n&&n.mode){var J=r.store.props.collaboration.mode;r.disposables.add((0,st.react)("update collaboration mode",(function(){r.store.put([f(f({},r.getInstanceState()),{},{isReadonly:"readonly"===J.get()})])})))}return r}return v(t,e),p(t,[{key:"getIsShapeHiddenCache",value:function(){var e=this;return this._isShapeHiddenPredicate?this.store.createComputedCache("isShapeHidden",(function(t){var n;return!!e.findShapeAncestor(t,(function(t){return e.isShapeHidden(t)}))||null!==(n=e._isShapeHiddenPredicate(t,e))&&void 0!==n&&n})):null}},{key:"isShapeHidden",value:function(e){return!!this._isShapeHiddenPredicate&&!!this.getIsShapeHiddenCache().get("string"===typeof e?e:e.id)}},{key:"dispose",value:function(){this.disposables.forEach((function(e){return e()})),this.disposables.clear(),this.isDisposed=!0}},{key:"getShapeUtil",value:function(e){var t="string"===typeof e?e:e.type,n=(0,ft.getOwnProperty)(this.shapeUtils,t);return(0,ft.assert)(n,'No shape util found for type "'.concat(t,'"')),n}},{key:"getBindingUtil",value:function(e){var t="string"===typeof e?e:e.type,n=(0,ft.getOwnProperty)(this.bindingUtils,t);return(0,ft.assert)(n,'No binding util found for type "'.concat(t,'"')),n}},{key:"undo",value:function(){return this._flushEventsForTick(0),this.complete(),this.history.undo(),this}},{key:"getCanUndo",value:function(){return this.history.getNumUndos()>0}},{key:"redo",value:function(){return this._flushEventsForTick(0),this.complete(),this.history.redo(),this}},{key:"clearHistory",value:function(){return this.history.clear(),this}},{key:"getCanRedo",value:function(){return this.history.getNumRedos()>0}},{key:"mark",value:function(e){return"string"===typeof e?console.warn('[tldraw] `editor.history.mark("'.concat(e,'")` is deprecated. Please use `const myMarkId = editor.markHistoryStoppingPoint()` instead.')):console.warn("[tldraw] `editor.mark()` is deprecated. Use `editor.markHistoryStoppingPoint()` instead."),this.history._mark(null!==e&&void 0!==e?e:(0,ft.uniqueId)()),this}},{key:"markHistoryStoppingPoint",value:function(e){var t="[".concat(null!==e&&void 0!==e?e:"stop","]_").concat((0,ft.uniqueId)());return this.history._mark(t),t}},{key:"getMarkIdMatching",value:function(e){return this.history.getMarkIdMatching(e)}},{key:"squashToMark",value:function(e){return this.history.squashToMark(e),this}},{key:"bail",value:function(){return this.history.bail(),this}},{key:"bailToMark",value:function(e){return this.history.bailToMark(e),this}},{key:"run",value:function(e,t){var n,r=this._shouldIgnoreShapeLock;this._shouldIgnoreShapeLock=null!==(n=null===t||void 0===t?void 0:t.ignoreShapeLock)&&void 0!==n?n:r;try{this.history.batch(e,t)}finally{this._shouldIgnoreShapeLock=r}return this}},{key:"batch",value:function(e,t){return this.run(e,t)}},{key:"annotateError",value:function(e,t){var n=t.origin,r=t.willCrashApp,o=t.tags,i=t.extras,a=this.createErrorAnnotations(n,r);return(0,ft.annotateError)(e,{tags:f(f({},a.tags),o),extras:f(f({},a.extras),i)}),r&&this.store.markAsPossiblyCorrupted(),this}},{key:"createErrorAnnotations",value:function(e,t){try{var n=this.getEditingShapeId();return{tags:{origin:e,willCrashApp:t},extras:{activeStateNode:this.root.getPath(),selectedShapes:this.getSelectedShapes(),editingShape:n?this.getShape(n):void 0,inputs:this.inputs}}}catch(r){return{tags:{origin:e,willCrashApp:t},extras:{}}}}},{key:"getCrashingError",value:function(){return this._crashingError}},{key:"crash",value:function(e){return this._crashingError=e,this.store.markAsPossiblyCorrupted(),this.emit("crash",{error:e}),this}},{key:"getPath",value:function(){return this.root.getPath().split("root.")[1]}},{key:"isIn",value:function(e){for(var t=e.split(".").reverse(),n=this.root;t.length>0;){var r=t.pop();if(!r)return!0;var o=n.getCurrent();if((null===o||void 0===o?void 0:o.id)!==r)return!1;if(0===t.length)return!0;n=o}return!1}},{key:"isInAny",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return n.some((function(t){return e.isIn(t)}))}},{key:"setCurrentTool",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.root.transition(e,t),this}},{key:"getCurrentTool",value:function(){return this.root.getCurrent()}},{key:"getCurrentToolId",value:function(){var e,t=this.getCurrentTool();return t?null!==(e=t.getCurrentToolIdMask())&&void 0!==e?e:t.id:""}},{key:"getStateDescendant",value:function(e){for(var t=e.split(".").reverse(),n=this.root;t.length>0;){var r,o=t.pop();if(!o)return n;var i=null===(r=n.children)||void 0===r?void 0:r[o];if(!i)return;n=i}return n}},{key:"getDocumentSettings",value:function(){return this.store.get(lt.TLDOCUMENT_ID)}},{key:"updateDocumentSettings",value:function(e){var t=this;return this.run((function(){t.store.put([f(f({},t.getDocumentSettings()),e)])}),{history:"ignore"}),this}},{key:"getInstanceState",value:function(){return this.store.get(lt.TLINSTANCE_ID)}},{key:"updateInstanceState",value:function(e,t){var n=this;return this._updateInstanceState(e,f({history:"ignore"},t)),void 0!==e.isChangingStyle&&(clearTimeout(this._isChangingStyleTimeout),!0===e.isChangingStyle&&(this._isChangingStyleTimeout=this.timers.setTimeout((function(){n._updateInstanceState({isChangingStyle:!1},{history:"ignore"})}),2e3))),this}},{key:"_updateInstanceState",value:function(e,t){var n=this;this.run((function(){n.store.put([f(f({},n.getInstanceState()),e)])}),t)}},{key:"getOpenMenus",value:function(){return this.menus.getOpenMenus()}},{key:"addOpenMenu",value:function(e){return this.menus.addOpenMenu(e),this}},{key:"deleteOpenMenu",value:function(e){return this.menus.deleteOpenMenu(e),this}},{key:"clearOpenMenus",value:function(){return this.menus.clearOpenMenus(),this}},{key:"getIsMenuOpen",value:function(){return this.menus.hasAnyOpenMenus()}},{key:"setCursor",value:function(e){return this.updateInstanceState({cursor:f(f({},this.getInstanceState().cursor),e)}),this}},{key:"getPageStates",value:function(){return this._getPageStatesQuery().get()}},{key:"_getPageStatesQuery",value:function(){return this.store.query.records("instance_page_state")}},{key:"getCurrentPageState",value:function(){return this.store.get(this._getCurrentPageStateId())}},{key:"_getCurrentPageStateId",value:function(){return lt.InstancePageStateRecordType.createId(this.getCurrentPageId())}},{key:"updateCurrentPageState",value:function(e){return this._updateCurrentPageState(e),this}},{key:"_updateCurrentPageState",value:function(e){var t;this.store.update(null!==(t=e.id)&&void 0!==t?t:this.getCurrentPageState().id,(function(t){return f(f({},t),e)}))}},{key:"getSelectedShapeIds",value:function(){return this.getCurrentPageState().selectedShapeIds}},{key:"getSelectedShapes",value:function(){var e=this,t=this.getCurrentPageState().selectedShapeIds;return(0,ft.compact)(t.map((function(t){return e.store.get(t)})))}},{key:"setSelectedShapes",value:function(e){var t=this;return this.run((function(){var n=e.map((function(e){return"string"===typeof e?e:e.id})),r=t.getCurrentPageState().selectedShapeIds,o=new Set(r);if(n.length===o.size&&n.every((function(e){return o.has(e)})))return null;t.store.put([f(f({},t.getCurrentPageState()),{},{selectedShapeIds:n})])}),{history:"record-preserveRedoStack"})}},{key:"isAncestorSelected",value:function(e){var t,n="string"===typeof e?e:null!==(t=null===e||void 0===e?void 0:e.id)&&void 0!==t?t:null,r=this.getShape(n);if(!r)return!1;var o=this.getSelectedShapeIds();return!!this.findShapeAncestor(r,(function(e){return o.includes(e.id)}))}},{key:"select",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r="string"===typeof t[0]?t:t.map((function(e){return e.id}));return this.setSelectedShapes(r),this}},{key:"deselect",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r="string"===typeof t[0]?t:t.map((function(e){return e.id})),o=this.getSelectedShapeIds();return o.length>0&&r.length>0&&this.setSelectedShapes(o.filter((function(e){return!r.includes(e)}))),this}},{key:"selectAll",value:function(){var e=this.getSortedChildIdsForParent(this.getCurrentPageId());return e.length<=0||this.setSelectedShapes(this._getUnlockedShapeIds(e)),this}},{key:"selectNone",value:function(){return this.getSelectedShapeIds().length>0&&this.setSelectedShapes([]),this}},{key:"getOnlySelectedShapeId",value:function(){var e,t;return null!==(e=null===(t=this.getOnlySelectedShape())||void 0===t?void 0:t.id)&&void 0!==e?e:null}},{key:"getOnlySelectedShape",value:function(){var e=this.getSelectedShapes();return 1===e.length?e[0]:null}},{key:"getShapesPageBounds",value:function(e){var t=this,n=(0,ft.compact)(e.map((function(e){return t.getShapePageBounds(e)})));return 0===n.length?null:Pt.Box.Common(n)}},{key:"getSelectionPageBounds",value:function(){return this.getShapesPageBounds(this.getSelectedShapeIds())}},{key:"getShapesSharedRotation",value:function(e){for(var t=!1,n=0,r=0,o=e.length;r<o;r++){var i=this.getShapePageTransform(e[r]);if(i)if(t){if(i.rotation()!==n)return 0}else t=!0,n=i.rotation()}return n}},{key:"getSelectionRotation",value:function(){return this.getShapesSharedRotation(this.getSelectedShapeIds())}},{key:"getShapesRotatedPageBounds",value:function(e){var t=this;if(0!==e.length){var n,r=this.getShapesSharedRotation(e);if(0===r)return null!==(n=this.getShapesPageBounds(e))&&void 0!==n?n:void 0;if(1===e.length){var o=this.getShapeGeometry(e[0]).bounds.clone(),i=this.getShapePageTransform(e[0]);return o.point=i.applyToPoint(o.point),o}var a=Pt.Box.FromPoints(e.flatMap((function(e){var n=t.getShapePageTransform(e);return n?n.applyToPoints(t.getShapeGeometry(e).bounds.corners):[]})).map((function(e){return e.rot(-r)})));return a.point=a.point.rot(r),a}}},{key:"getSelectionRotatedPageBounds",value:function(){return this.getShapesRotatedPageBounds(this.getSelectedShapeIds())}},{key:"getSelectionRotatedScreenBounds",value:function(){var e=this.getSelectionRotatedPageBounds();if(e){var t=this.pageToScreen(e.point),n=t.x,r=t.y,o=this.getZoomLevel();return new Pt.Box(n,r,e.width*o,e.height*o)}}},{key:"getFocusedGroupId",value:function(){var e;return null!==(e=this.getCurrentPageState().focusedGroupId)&&void 0!==e?e:this.getCurrentPageId()}},{key:"getFocusedGroup",value:function(){var e=this.getFocusedGroupId();return e?this.getShape(e):void 0}},{key:"setFocusedGroup",value:function(e){var t,n=this,r="string"===typeof e?e:null!==(t=null===e||void 0===e?void 0:e.id)&&void 0!==t?t:null;if(null!==r){var o=this.getShape(r);if(!o)throw Error("Editor.setFocusedGroup: Shape with id ".concat(r," does not exist"));if(!this.isShapeOfType(o,"group"))throw Error("Editor.setFocusedGroup: Cannot set focused group to shape of type ".concat(o.type))}return r===this.getFocusedGroupId()?this:this.run((function(){n.store.update(n.getCurrentPageState().id,(function(e){return f(f({},e),{},{focusedGroupId:r})}))}),{history:"record-preserveRedoStack"})}},{key:"popFocusedGroupId",value:function(){var e=this,t=this.getFocusedGroup();if(t){var n,r=this.findShapeAncestor(t,(function(t){return e.isShapeOfType(t,"group")}));this.setFocusedGroup(null!==(n=null===r||void 0===r?void 0:r.id)&&void 0!==n?n:null),this.select(t.id)}else this.setFocusedGroup(null),this.selectNone();return this}},{key:"getEditingShapeId",value:function(){return this.getCurrentPageState().editingShapeId}},{key:"getEditingShape",value:function(){var e=this.getEditingShapeId();return e?this.getShape(e):void 0}},{key:"setEditingShape",value:function(e){var t,n=this,r="string"===typeof e?e:null!==(t=null===e||void 0===e?void 0:e.id)&&void 0!==t?t:null;if(r!==this.getEditingShapeId()){if(r){var o=this.getShape(r);if(o&&this.getShapeUtil(o).canEdit(o))return this.run((function(){n._updateCurrentPageState({editingShapeId:r})}),{history:"ignore"}),this}this.run((function(){n._updateCurrentPageState({editingShapeId:null})}),{history:"ignore"})}return this}},{key:"getHoveredShapeId",value:function(){return this.getCurrentPageState().hoveredShapeId}},{key:"getHoveredShape",value:function(){var e=this.getHoveredShapeId();return e?this.getShape(e):void 0}},{key:"setHoveredShape",value:function(e){var t,n=this,r="string"===typeof e?e:null!==(t=null===e||void 0===e?void 0:e.id)&&void 0!==t?t:null;return r===this.getHoveredShapeId()||this.run((function(){n.updateCurrentPageState({hoveredShapeId:r})}),{history:"ignore"}),this}},{key:"getHintingShapeIds",value:function(){return this.getCurrentPageState().hintingShapeIds}},{key:"getHintingShape",value:function(){var e=this,t=this.getHintingShapeIds();return(0,ft.compact)(t.map((function(t){return e.getShape(t)})))}},{key:"setHintingShapes",value:function(e){var t=this,n="string"===typeof e[0]?e:e.map((function(e){return e.id}));return this.run((function(){t._updateCurrentPageState({hintingShapeIds:(0,ft.dedupe)(n)})}),{history:"ignore"}),this}},{key:"getErasingShapeIds",value:function(){return this.getCurrentPageState().erasingShapeIds}},{key:"getErasingShapes",value:function(){var e=this,t=this.getErasingShapeIds();return(0,ft.compact)(t.map((function(t){return e.getShape(t)})))}},{key:"setErasingShapes",value:function(e){var t=this,n="string"===typeof e[0]?e:e.map((function(e){return e.id}));n.sort();var r=this.getErasingShapeIds();return this.run((function(){if(n.length===r.length){for(var e=0;e<n.length;e++)if(n[e]!==r[e]){t._updateCurrentPageState({erasingShapeIds:n});break}}else t._updateCurrentPageState({erasingShapeIds:n})}),{history:"ignore"}),this}},{key:"getCroppingShapeId",value:function(){return this.getCurrentPageState().croppingShapeId}},{key:"setCroppingShape",value:function(e){var t,n=this,r="string"===typeof e?e:null!==(t=null===e||void 0===e?void 0:e.id)&&void 0!==t?t:null;return r!==this.getCroppingShapeId()&&this.run((function(){if(r){var e=n.getShape(r),t=n.getShapeUtil(e);e&&t.canCrop(e)&&n.updateCurrentPageState({croppingShapeId:r})}else n.updateCurrentPageState({croppingShapeId:null})}),{history:"ignore"}),this}},{key:"_unsafe_getCameraId",value:function(){return lt.CameraRecordType.createId(this.getCurrentPageId())}},{key:"getCamera",value:function(){var e=this.store.get(this._unsafe_getCameraId());if(this._isLockedOnFollowingUser.get()){var t=this.getCameraForFollowing();if(t)return f(f({},e),t)}return e}},{key:"getViewportPageBoundsForFollowing",value:function(){var e=this.getInstanceState().followingUserId;if(!e)return null;var t=this.getCollaborators().find((function(t){return t.userId===e}));if(!t)return null;if(!t.camera||!t.screenBounds)return null;var n=t.screenBounds,r=n.w,o=n.h,i=t.camera,a=i.x,u=i.y,s=i.z,c=new Pt.Box(-a,-u,r/s,o/s),l=this.getViewportScreenBounds().clone(),f=l.width/l.height;return l.width=c.width,l.height=l.width/f,l.height<c.height&&(l.height=c.height,l.width=l.height*f),l.center=c.center,l}},{key:"getCameraForFollowing",value:function(){var e=this.getViewportPageBoundsForFollowing();return e?{x:-e.x,y:-e.y,z:this.getViewportScreenBounds().w/e.width}:null}},{key:"getZoomLevel",value:function(){return this.getCamera().z}},{key:"getInitialZoom",value:function(){var e=this.getCameraOptions();if(!e.constraints)return 1;if("default"===e.constraints.initialZoom)return 1;var t=rn(this,e),n=t.zx,r=t.zy;switch(e.constraints.initialZoom){case"fit-min":return Math.max(n,r);case"fit-max":return Math.min(n,r);case"fit-x":return n;case"fit-y":return r;case"fit-min-100":return Math.min(1,Math.max(n,r));case"fit-max-100":return Math.min(1,Math.min(n,r));case"fit-x-100":return Math.min(1,n);case"fit-y-100":return Math.min(1,r);default:throw(0,ft.exhaustiveSwitchError)(e.constraints.initialZoom)}}},{key:"getBaseZoom",value:function(){var e=this.getCameraOptions();if(!e.constraints)return 1;if("default"===e.constraints.baseZoom)return 1;var t=rn(this,e),n=t.zx,r=t.zy;switch(e.constraints.baseZoom){case"fit-min":return Math.max(n,r);case"fit-max":return Math.min(n,r);case"fit-x":return n;case"fit-y":return r;case"fit-min-100":return Math.min(1,Math.max(n,r));case"fit-max-100":return Math.min(1,Math.min(n,r));case"fit-x-100":return Math.min(1,n);case"fit-y-100":return Math.min(1,r);default:throw(0,ft.exhaustiveSwitchError)(e.constraints.baseZoom)}}},{key:"getCameraOptions",value:function(){return this._cameraOptions.get()}},{key:"setCameraOptions",value:function(e){var t,n=(0,ft.structuredClone)(f(f({},this._cameraOptions.__unsafe__getWithoutCapture()),e));return(null===(t=n.zoomSteps)||void 0===t?void 0:t.length)<1&&(n.zoomSteps=[1]),this._cameraOptions.set(n),this.setCamera(this.getCamera()),this}},{key:"getConstrainedCamera",value:function(e,t){var n=this.getCamera(),r=e.x,o=e.y,i=e.z,a=void 0===i?n.z:i;if(null===t||void 0===t||!t.force){var u=this.getCameraOptions(),s=u.zoomSteps[0],c=(0,ft.last)(u.zoomSteps),l=this.getViewportScreenBounds();if(u.constraints){var f=u.constraints,d=Math.min(f.padding.y,l.w/2),p=Math.min(f.padding.x,l.h/2),h=Pt.Box.From(u.constraints.bounds),v=(l.w-2*p)/h.w,g=(l.h-2*d)/h.h,y=this.getBaseZoom(),m=c*y,b=s*y;if(null!==t&&void 0!==t&&t.reset&&(a=this.getInitialZoom()),a<b||a>m){var w=n.x,S=n.y,x=n.z,P=-w+l.w/x/2,O=-S+l.h/x/2;a=(0,Tt.clamp)(a,b,m),r=w+(-w+l.w/a/2)-P,o=S+(-S+l.h/a/2)-O}var k=p/a-h.x,_=d/a-h.y,j=(l.w-2*p)/a-h.w,I=(l.h-2*d)/a-h.h,T=k+j*f.origin.x,E=_+I*f.origin.y,C="string"===typeof f.behavior?f.behavior:f.behavior.x,M="string"===typeof f.behavior?f.behavior:f.behavior.y;if(null!==t&&void 0!==t&&t.reset)r=T,o=E;else{switch(C){case"fixed":r=T;break;case"contain":r=a<v?T:(0,Tt.clamp)(r,k+j,k);break;case"inside":r=a<v?(0,Tt.clamp)(r,k,(l.w-p)/a-h.w):(0,Tt.clamp)(r,k+j,k);break;case"outside":r=(0,Tt.clamp)(r,p/a-h.w,(l.w-p)/a);break;case"free":break;default:throw(0,ft.exhaustiveSwitchError)(C)}switch(M){case"fixed":o=E;break;case"contain":o=a<g?E:(0,Tt.clamp)(o,_+I,_);break;case"inside":o=a<g?(0,Tt.clamp)(o,_,(l.h-d)/a-h.h):(0,Tt.clamp)(o,_+I,_);break;case"outside":o=(0,Tt.clamp)(o,d/a-h.h,(l.h-d)/a);break;case"free":break;default:throw(0,ft.exhaustiveSwitchError)(M)}}}else if(a>c||a<s){var A=n.x,D=n.y,R=n.z;a=(0,Tt.clamp)(a,s,c),r=A+(-A+l.w/a/2)-(-A+l.w/R/2),o=D+(-D+l.h/a/2)-(-D+l.h/R/2)}}return{x:r,y:o,z:a}}},{key:"_setCamera",value:function(e,t){var n=this,r=this.getCamera(),o=this.getConstrainedCamera(e,t),i=o.x,a=o.y,u=o.z;return r.x===i&&r.y===a&&r.z===u||(0,st.transact)((function(){var e=f(f({},r),{},{x:i,y:a,z:u});n.run((function(){n.store.put([e])}),{history:"ignore"});var o=n.inputs,s=o.currentScreenPoint,c=o.currentPagePoint,l=n.store.unsafeGetWithoutCapture(lt.TLINSTANCE_ID).screenBounds;if(s.x/u-i!==c.x||s.y/u-a!==c.y){var d,p={type:"pointer",target:"canvas",name:"pointer_move",point:kt.Vec.AddXY(s,l.x,l.y),pointerId:yt.INTERNAL_POINTER_IDS.CAMERA_MOVE,ctrlKey:n.inputs.ctrlKey,altKey:n.inputs.altKey,shiftKey:n.inputs.shiftKey,metaKey:n.inputs.metaKey,accelKey:(0,Rt.isAccelKey)(n.inputs),button:0,isPen:null!==(d=n.getInstanceState().isPenMode)&&void 0!==d&&d};null!==t&&void 0!==t&&t.immediate?n._flushEventForTick(p):n.dispatch(p)}n._tickCameraState()})),this}},{key:"setCamera",value:function(e,t){if(this._cameraOptions.__unsafe__getWithoutCapture().isLocked&&(null===t||void 0===t||!t.force))return this;this.stopCameraAnimation(),this.getInstanceState().followingUserId&&this.stopFollowingUser();var n=kt.Vec.Cast(e);Number.isFinite(n.x)||(n.x=0),Number.isFinite(n.y)||(n.y=0),void 0!==n.z&&Number.isFinite(n.z)||(e.z=this.getZoomLevel());var r=this.getConstrainedCamera(n,t);if(null!==t&&void 0!==t&&t.animation){var o=this.getViewportScreenBounds(),i=o.width,a=o.height;this._animateToViewport(new Pt.Box(-r.x,-r.y,i/r.z,a/r.z),t)}else this._setCamera(r,f(f({},t),{},{force:!0}));return this}},{key:"centerOnPoint",value:function(e,t){if(this.getCameraOptions().isLocked&&(null===t||void 0===t||!t.force))return this;var n=this.getViewportPageBounds(),r=n.width,o=n.height;return this.setCamera(new kt.Vec(-(e.x-r/2),-(e.y-o/2),this.getCamera().z),t),this}},{key:"zoomToFit",value:function(e){var t=this,n=c(this.getCurrentPageShapeIds());if(n.length<=0)return this;var r=Pt.Box.Common((0,ft.compact)(n.map((function(e){return t.getShapePageBounds(e)}))));return this.zoomToBounds(r,e),this}},{key:"resetZoom",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.getViewportScreenCenter(),t=arguments.length>1?arguments[1]:void 0,n=this.getCameraOptions(),r=n.isLocked,o=n.constraints;if(r&&(null===t||void 0===t||!t.force))return this;var i=this.getCamera(),a=i.x,u=i.y,s=i.z,c=e.x,l=e.y,f=1;if(o){var d=this.getInitialZoom();s!==d&&(f=d)}return this.setCamera(new kt.Vec(a+(c/f-c)-(c/s-c),u+(l/f-l)-(l/s-l),f),t),this}},{key:"zoomIn",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.getViewportScreenCenter(),t=arguments.length>1?arguments[1]:void 0;if(this.getCameraOptions().isLocked&&(null===t||void 0===t||!t.force))return this;var n=this.getCamera(),r=n.x,o=n.y,i=n.z,a=this.getCameraOptions().zoomSteps;if(null!==a&&a.length>1){for(var u=this.getBaseZoom(),s=(0,ft.last)(a)*u,c=1;c<a.length;c++){var l=a[c-1]*u,f=a[c]*u;if(!(f-i<=(f-l)/2)){s=f;break}}this.setCamera(new kt.Vec(r+(e.x/s-e.x)-(e.x/i-e.x),o+(e.y/s-e.y)-(e.y/i-e.y),s),t)}return this}},{key:"zoomOut",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.getViewportScreenCenter(),t=arguments.length>1?arguments[1]:void 0;if(this.getCameraOptions().isLocked&&(null===t||void 0===t||!t.force))return this;var n=this.getCameraOptions().zoomSteps;if(null!==n&&n.length>1){for(var r=this.getBaseZoom(),o=this.getCamera(),i=o.x,a=o.y,u=o.z,s=n[0]*r,c=n.length-1;c>0;c--){var l=n[c-1]*r,f=n[c]*r;if(!(f-u>=(f-l)/2)){s=l;break}}this.setCamera(new kt.Vec(i+(e.x/s-e.x)-(e.x/u-e.x),a+(e.y/s-e.y)-(e.y/u-e.y),s),t)}return this}},{key:"zoomToSelection",value:function(e){if(this.getCameraOptions().isLocked&&(null===e||void 0===e||!e.force))return this;var t=this.getSelectionPageBounds();return t&&this.zoomToBounds(t,f({targetZoom:Math.max(1,this.getZoomLevel())},e)),this}},{key:"zoomToBounds",value:function(e,t){var n,r=this._cameraOptions.__unsafe__getWithoutCapture();if(r.isLocked&&(null===t||void 0===t||!t.force))return this;var o=this.getViewportScreenBounds(),i=null!==(n=null===t||void 0===t?void 0:t.inset)&&void 0!==n?n:Math.min(yt.ZOOM_TO_FIT_PADDING,.28*o.width),a=this.getBaseZoom(),u=r.zoomSteps[0],s=(0,ft.last)(r.zoomSteps),c=(0,Tt.clamp)(Math.min((o.width-i)/e.w,(o.height-i)/e.h),u*a,s*a);return void 0!==(null===t||void 0===t?void 0:t.targetZoom)&&(c=Math.min(t.targetZoom,c)),this.setCamera(new kt.Vec(-e.x+(o.width-e.w*c)/2/c,-e.y+(o.height-e.h*c)/2/c,c),t),this}},{key:"stopCameraAnimation",value:function(){return this.emit("stop-camera-animation"),this}},{key:"_animateViewport",value:function(e){if(this._viewportAnimation){this._viewportAnimation.elapsed+=e;var t=this._viewportAnimation,n=t.elapsed,r=t.easing,o=t.duration,i=t.start,a=t.end;if(n>o)return this.off("tick",this._animateViewport),this._viewportAnimation=null,void this._setCamera(new kt.Vec(-a.x,-a.y,this.getViewportScreenBounds().width/a.width));var u=r(1-(o-n)/o),s=i.minX+(a.minX-i.minX)*u,c=i.minY+(a.minY-i.minY)*u,l=i.maxX+(a.maxX-i.maxX)*u;this._setCamera(new kt.Vec(-s,-c,this.getViewportScreenBounds().width/(l-s)),{force:!0})}}},{key:"_animateToViewport",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{animation:yt.DEFAULT_ANIMATION_OPTIONS},r=n.animation,o=s(n,m);if(r){var i=r.duration,a=void 0===i?0:i,u=r.easing,c=void 0===u?_t.EASINGS.easeInOutCubic:u,l=this.user.getAnimationSpeed(),d=this.getViewportPageBounds();return this.stopCameraAnimation(),this.getInstanceState().followingUserId&&this.stopFollowingUser(),0===a||0===l?this._setCamera(new kt.Vec(-e.x,-e.y,this.getViewportScreenBounds().width/e.width),f({},o)):(this._viewportAnimation={elapsed:0,duration:a/l,easing:c,start:d.clone(),end:e.clone()},this.once("stop-camera-animation",(function(){t.off("tick",t._animateViewport),t._viewportAnimation=null})),this.on("tick",this._animateViewport),this)}}},{key:"slideCamera",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this.getCameraOptions().isLocked&&(null===t||void 0===t||!t.force))return this;if(0===this.user.getAnimationSpeed())return this;this.stopCameraAnimation();var n=t.speed,r=t.friction,o=void 0===r?this.options.cameraSlideFriction:r,i=t.direction,a=t.speedThreshold,u=void 0===a?.01:a,s=Math.min(n,1),c=function(){e.off("tick",l),e.off("stop-camera-animation",c)};this.once("stop-camera-animation",c);var l=function(t){var n=e.getCamera(),r=n.x,a=n.y,l=n.z,f=kt.Vec.Mul(i,s*t/l);(s*=1-o)<u?c():e._setCamera(new kt.Vec(r+f.x,a+f.y,l))};return this.on("tick",l),this}},{key:"zoomToUser",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{animation:{duration:500}},r=this.getCollaborators().find((function(t){return t.userId===e}));if(!r)return this;var o=r.cursor;return o?(this.run((function(){null!==t.getInstanceState().followingUserId&&t.stopFollowingUser();var i=r.currentPageId===t.getCurrentPageId();i||t.setCurrentPage(r.currentPageId),n&&n.animation&&!i&&(n.animation=void 0),t.centerOnPoint(o,n);var a=t.getInstanceState().highlightedUserIds;t.updateInstanceState({highlightedUserIds:[].concat(c(a),[e])}),t.timers.setTimeout((function(){var n=c(t.getInstanceState().highlightedUserIds),r=n.indexOf(e);r<0||(n.splice(r,1),t.updateInstanceState({highlightedUserIds:n}))}),t.options.collaboratorIdleTimeoutMs)})),this):this}},{key:"updateViewportScreenBounds",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e instanceof HTMLElement){var n=e.getBoundingClientRect();e=new Pt.Box(n.left||n.x,n.top||n.y,Math.max(n.width,1),Math.max(n.height,1))}else e.width=Math.max(e.width,1),e.height=Math.max(e.height,1);var r=[0!==e.minY,!(0,Tt.approximately)(document.body.scrollWidth,e.maxX,1),!(0,Tt.approximately)(document.body.scrollHeight,e.maxY,1),0!==e.minX],o=this._willSetInitialBounds;this._willSetInitialBounds=!1;var i=this.getInstanceState(),a=i.screenBounds,u=i.insets;if(e.equals(a)&&r.every((function(e,t){return e===u[t]})))return this;if(o)this.updateInstanceState({screenBounds:e.toJson(),insets:r}),this.setCamera(this.getCamera());else if(t&&!this.getInstanceState().followingUserId){var s=this.getViewportPageBounds().center;this.updateInstanceState({screenBounds:e.toJson(),insets:r}),this.centerOnPoint(s)}else this.updateInstanceState({screenBounds:e.toJson(),insets:r}),this._setCamera(kt.Vec.From(f({},this.getCamera())));return this._tickCameraState(),this}},{key:"getViewportScreenBounds",value:function(){var e=this.getInstanceState().screenBounds,t=e.x,n=e.y,r=e.w,o=e.h;return new Pt.Box(t,n,r,o)}},{key:"getViewportScreenCenter",value:function(){var e=this.getViewportScreenBounds();return new kt.Vec(e.midX-e.minX,e.midY-e.minY)}},{key:"getViewportPageBounds",value:function(){var e=this.getViewportScreenBounds(),t=e.w,n=e.h,r=this.getCamera(),o=r.x,i=r.y,a=r.z;return new Pt.Box(-o,-i,t/a,n/a)}},{key:"screenToPage",value:function(e){var t,n=this.store.unsafeGetWithoutCapture(lt.TLINSTANCE_ID).screenBounds,r=this.getCamera(),o=r.x,i=r.y,a=r.z,u=void 0===a?1:a;return new kt.Vec((e.x-n.x)/u-o,(e.y-n.y)/u-i,null!==(t=e.z)&&void 0!==t?t:.5)}},{key:"pageToScreen",value:function(e){var t,n=this.store.unsafeGetWithoutCapture(lt.TLINSTANCE_ID).screenBounds,r=this.getCamera(),o=r.x,i=r.y,a=r.z,u=void 0===a?1:a;return new kt.Vec((e.x+o)*u+n.x,(e.y+i)*u+n.y,null!==(t=e.z)&&void 0!==t?t:.5)}},{key:"pageToViewport",value:function(e){var t,n=this.getCamera(),r=n.x,o=n.y,i=n.z,a=void 0===i?1:i;return new kt.Vec((e.x+r)*a,(e.y+o)*a,null!==(t=e.z)&&void 0!==t?t:.5)}},{key:"_getCollaboratorsQuery",value:function(){var e=this;return this.store.query.records("instance_presence",(function(){return{userId:{neq:e.user.getId()}}}))}},{key:"getCollaborators",value:function(){var e=this._getCollaboratorsQuery().get();return e.length?c(new Set(e.map((function(e){return e.userId})))).sort().map((function(t){return(0,ft.maxBy)(e.filter((function(e){return e.userId===t})),(function(e){var t;return null!==(t=e.lastActivityTimestamp)&&void 0!==t?t:0}))})):st.EMPTY_ARRAY}},{key:"getCollaboratorsOnCurrentPage",value:function(){var e=this.getCurrentPageId();return this.getCollaborators().filter((function(t){return t.currentPageId===e}))}},{key:"startFollowingUser",value:function(e){var t=this;this.stopFollowingUser();var n=this._getCollaboratorsQuery().get().filter((function(t){return t.userId===e}));if(!n.length)return console.warn("User not found"),this;var r=this.user.getId();if(r||console.warn("You should set the userId for the current instance before following a user"),n.some((function(e){return e.followingUserId===r})))return this;var o=(0,st.computed)("latestLeaderPresence",(function(){return t.getCollaborators().find((function(t){return t.userId===e}))}));return(0,st.transact)((function(){t.updateInstanceState({followingUserId:e},{history:"ignore"});var n=(0,st.react)("update current page",(function(){var e=o.get();e?e.currentPageId!==t.getCurrentPageId()&&t.getPage(e.currentPageId)&&t.run((function(){t.store.put([f(f({},t.getInstanceState()),{},{currentPageId:e.currentPageId})]),t._isLockedOnFollowingUser.set(!0)}),{history:"ignore"}):t.stopFollowingUser()})),r=function(){n(),t._isLockedOnFollowingUser.set(!1),t.off("frame",i),t.off("stop-following",r)},i=function(){if(o.get()){if(!t._isLockedOnFollowingUser.get()){var e=t.user.getAnimationSpeed();if(0!==e){var n=t.getViewportPageBoundsForFollowing();if(n){var r=t.getViewportPageBounds(),i=Math.abs(n.minX-r.minX)+Math.abs(n.maxX-r.maxX),a=Math.abs(n.minY-r.minY)+Math.abs(n.maxY-r.maxY);if(i<t.options.followChaseViewportSnap&&a<t.options.followChaseViewportSnap)t._isLockedOnFollowingUser.set(!0);else{var u=(0,Tt.clamp)(.5*e,.1,.8),s=new Pt.Box((0,ft.lerp)(r.minX,n.minX,u),(0,ft.lerp)(r.minY,n.minY,u),(0,ft.lerp)(r.width,n.width,u),(0,ft.lerp)(r.height,n.height,u)),c=new kt.Vec(-s.x,-s.y,t.getViewportScreenBounds().width/s.width);t.stopCameraAnimation(),t._setCamera(c)}}else t.stopFollowingUser()}else t._isLockedOnFollowingUser.set(!0)}}else t.stopFollowingUser()};t.once("stop-following",r),t.addListener("frame",i),i()})),this}},{key:"stopFollowingUser",value:function(){var e=this;return this.run((function(){e.store.put([e.getCamera()]),e._isLockedOnFollowingUser.set(!1),e.updateInstanceState({followingUserId:null}),e.emit("stop-following")}),{history:"ignore"}),this}},{key:"getUnorderedRenderingShapes",value:function(e){var t,n=this,r=[],o=2*this.options.maxShapesPerPage,i=this.options.maxShapesPerPage,a=this.getErasingShapeIds(),u=function(t,s,c){var l=n.getShape(t);if(l&&!n.isShapeHidden(l)){s*=l.opacity;var f=!1,d=n.getShapeUtil(l);e&&(f=!c&&a.includes(t))&&(s*=.32),r.push({id:t,shape:l,util:d,index:o,backgroundIndex:i,opacity:s}),o+=1,i+=1;var p=n.getSortedChildIdsForParent(t);if(p.length){var h=null;d.providesBackgroundForChildren(l)&&(h=i,i=o,o+=n.options.maxShapesPerPage);var v,g=y(p);try{for(g.s();!(v=g.n()).done;){var m=v.value;u(m,s,c||f)}}catch(b){g.e(b)}finally{g.f()}null!==h&&(i=h)}}},s=e?[this.getCurrentPage()]:this.getPages(),c=y(s);try{for(c.s();!(t=c.n()).done;){var l,f=t.value,d=y(this.getSortedChildIdsForParent(f.id));try{for(d.s();!(l=d.n()).done;){var p=l.value;u(p,1,!1)}}catch(h){d.e(h)}finally{d.f()}}}catch(h){c.e(h)}finally{c.f()}return r}},{key:"_decayCameraStateTimeout",value:function(e){this._cameraStateTimeoutRemaining-=e,this._cameraStateTimeoutRemaining>0||(this.off("tick",this._decayCameraStateTimeout),this._cameraState.set("idle"))}},{key:"_tickCameraState",value:function(){this._cameraStateTimeoutRemaining=this.options.cameraMovingTimeoutMs,"idle"===this._cameraState.__unsafe__getWithoutCapture()&&(this._cameraState.set("moving"),this.on("tick",this._decayCameraStateTimeout))}},{key:"getCameraState",value:function(){return this._cameraState.get()}},{key:"getRenderingShapes",value:function(){return this.getUnorderedRenderingShapes(!0).sort(ft.sortById)}},{key:"_getAllPagesQuery",value:function(){return this.store.query.records("page")}},{key:"getPages",value:function(){return Array.from(this._getAllPagesQuery().get()).sort(ft.sortByIndex)}},{key:"getCurrentPage",value:function(){return this.getPage(this.getCurrentPageId())}},{key:"getCurrentPageId",value:function(){return this.getInstanceState().currentPageId}},{key:"getPage",value:function(e){return this.store.get("string"===typeof e?e:e.id)}},{key:"getCurrentPageShapeIds",value:function(){return this._currentPageShapeIds.get()}},{key:"getCurrentPageShapeIdsSorted",value:function(){return Array.from(this.getCurrentPageShapeIds()).sort()}},{key:"getPageShapeIds",value:function(e){var t="string"===typeof e?e:e.id,n=this.store.query.exec("shape",{parentId:{eq:t}});return this.getShapeAndDescendantIds(n.map((function(e){return e.id})))}},{key:"setCurrentPage",value:function(e){var t=this,n="string"===typeof e?e:e.id;return this.store.has(n)?(this.stopFollowingUser(),this.complete(),this.run((function(){t.store.put([f(f({},t.getInstanceState()),{},{currentPageId:n})]),t.setCamera(t.getCamera())}),{history:"record-preserveRedoStack"})):(console.error("Tried to set the current page id to a page that doesn't exist."),this)}},{key:"updatePage",value:function(e){var t=this;return this.getIsReadonly()?this:this.getPage(e.id)?this.run((function(){return t.store.update(e.id,(function(t){return f(f({},t),e)}))})):this}},{key:"createPage",value:function(e){var t=this;return this.run((function(){var n;if(!t.getIsReadonly()&&!(t.getPages().length>=t.options.maxPages)){var r=t.getPages(),o=(0,Dt.getIncrementedName)(null!==(n=e.name)&&void 0!==n?n:"Page 1",r.map((function(e){return e.name}))),i=e.index;i&&!r.some((function(e){return e.index===i}))||(i=(0,ft.getIndexAbove)(r[r.length-1].index));var a=lt.PageRecordType.create(f(f({meta:{}},e),{},{name:o,index:i}));t.store.put([a])}})),this}},{key:"deletePage",value:function(e){var t=this,n="string"===typeof e?e:e.id;return this.run((function(){if(!t.getIsReadonly()){var e=t.getPages();if(1!==e.length){var r=t.getPage(n);if(r){if(n===t.getCurrentPageId()){var o,i=e.findIndex((function(e){return e.id===n})),a=null!==(o=e[i-1])&&void 0!==o?o:e[i+1];t.setCurrentPage(a.id)}t.store.remove([r.id])}}}})),this}},{key:"duplicatePage",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:lt.PageRecordType.createId();if(this.getPages().length>=this.options.maxPages)return this;var r="string"===typeof e?e:e.id,o=this.getPage(r);if(!o)return this;var i=f({},this.getCamera()),a=this.getContentFromCurrentPage(this.getSortedChildIdsForParent(o.id));return this.run((function(){var e,r=t.getPages(),u=(0,ft.getIndexBetween)(o.index,null===(e=r[r.indexOf(o)+1])||void 0===e?void 0:e.index);if(t.createPage({name:o.name+" Copy",id:n,index:u}),t.setCurrentPage(n),t.setCamera(i),a)return t.putContentOntoCurrentPage(a)})),this}},{key:"renamePage",value:function(e,t){var n="string"===typeof e?e:e.id;return this.getIsReadonly()||this.updatePage({id:n,name:t}),this}},{key:"_getAllAssetsQuery",value:function(){return this.store.query.records("asset")}},{key:"getAssets",value:function(){return this._getAllAssetsQuery().get()}},{key:"createAssets",value:function(e){var t=this;return this.getIsReadonly()||e.length<=0||this.run((function(){return t.store.put(e)}),{history:"ignore"}),this}},{key:"updateAssets",value:function(e){var t=this;return this.getIsReadonly()||e.length<=0||this.run((function(){t.store.put(e.map((function(e){return f(f({},t.store.get(e.id)),e)})))}),{history:"ignore"}),this}},{key:"deleteAssets",value:function(e){var t=this;if(this.getIsReadonly())return this;var n="string"===typeof e[0]?e:e.map((function(e){return e.id}));return n.length<=0||this.run((function(){return t.store.remove(n)}),{history:"ignore"}),this}},{key:"getAsset",value:function(e){return this.store.get("string"===typeof e?e:e.id)}},{key:"resolveAssetUrl",value:function(){var e=u(a().mark((function e(t,n){var r,o,i,u,s,c,l,f,d;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",null);case 2:if(r=this.getAsset(t)){e.next=5;break}return e.abrupt("return",null);case 5:return o=n.screenScale,i=void 0===o?1:o,u=n.shouldResolveToOriginal,s=void 0!==u&&u,c=function(e){return Math.pow(2,Math.ceil(Math.log2(e)))},l=Math.max(.125,c(i)),f="connection"in navigator?navigator.connection.effectiveType:null,d=this.getInstanceState().devicePixelRatio,e.next=12,this.store.props.assets.resolve(r,{screenScale:i||1,steppedScreenScale:l,dpr:d,networkEffectiveType:f,shouldResolveToOriginal:s});case 12:return e.abrupt("return",e.sent);case 13:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"uploadAsset",value:function(){var e=u(a().mark((function e(t,n,r){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.store.props.assets.upload(t,n,r);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"_getShapeGeometryCache",value:function(){var e=this;return this.store.createComputedCache("bounds",(function(t){return e.getShapeUtil(t).getGeometry(t)}),(function(e,t){return e.props===t.props}))}},{key:"getShapeGeometry",value:function(e){return this._getShapeGeometryCache().get("string"===typeof e?e:e.id)}},{key:"_getShapeHandlesCache",value:function(){var e=this;return this.store.createComputedCache("handles",(function(t){var n,r;return null===(n=(r=e.getShapeUtil(t)).getHandles)||void 0===n?void 0:n.call(r,t)}))}},{key:"getShapeHandles",value:function(e){return this._getShapeHandlesCache().get("string"===typeof e?e:e.id)}},{key:"getShapeLocalTransform",value:function(e){var t="string"===typeof e?e:e.id,n=this.getShape(t);if(!n)throw Error("Editor.getTransform: shape not found");return Ot.Mat.Identity().translate(n.x,n.y).rotate(n.rotation)}},{key:"_getShapePageTransformCache",value:function(){var e=this;return this.store.createComputedCache("pageTransformCache",(function(t){var n;if((0,lt.isPageId)(t.parentId))return e.getShapeLocalTransform(t);var r=null!==(n=e._getShapePageTransformCache().get(t.parentId))&&void 0!==n?n:Ot.Mat.Identity();return Ot.Mat.Compose(r,e.getShapeLocalTransform(t))}))}},{key:"getShapeParentTransform",value:function(e){var t,n="string"===typeof e?e:e.id,r=this.getShape(n);return!r||(0,lt.isPageId)(r.parentId)?Ot.Mat.Identity():null!==(t=this._getShapePageTransformCache().get(r.parentId))&&void 0!==t?t:Ot.Mat.Identity()}},{key:"getShapePageTransform",value:function(e){var t,n="string"===typeof e?e:e.id;return null!==(t=this._getShapePageTransformCache().get(n))&&void 0!==t?t:Ot.Mat.Identity()}},{key:"_getShapePageBoundsCache",value:function(){var e=this;return this.store.createComputedCache("pageBoundsCache",(function(t){var n=e._getShapePageTransformCache().get(t.id);return n?Pt.Box.FromPoints(Ot.Mat.applyToPoints(n,e.getShapeGeometry(t).vertices)):new Pt.Box}))}},{key:"getShapePageBounds",value:function(e){return this._getShapePageBoundsCache().get("string"===typeof e?e:e.id)}},{key:"_getShapeClipPathCache",value:function(){var e=this;return this.store.createComputedCache("clipPathCache",(function(t){var n=e._getShapeMaskCache().get(t.id);if(n){if(0===n.length)return"polygon(0px 0px, 0px 0px, 0px 0px)";var r=e._getShapePageTransformCache().get(t.id);if(r){var o=Ot.Mat.applyToPoints(Ot.Mat.Inverse(r),n);return"polygon(".concat(o.map((function(e){return"".concat(e.x,"px ").concat(e.y,"px")})).join(","),")")}}}))}},{key:"getShapeClipPath",value:function(e){return this._getShapeClipPathCache().get("string"===typeof e?e:e.id)}},{key:"_getShapeMaskCache",value:function(){var e=this;return this.store.createComputedCache("pageMaskCache",(function(t){if(!(0,lt.isPageId)(t.parentId)){var n=e.getShapeAncestors(t.id).filter((function(t){return e.isShapeOfType(t,"frame")}));if(0!==n.length)return n.map((function(t){return e._getShapePageTransformCache().get(t.id).applyToPoints(e.getShapeGeometry(t).vertices)})).reduce((function(e,t){if(t&&e){var n=(0,It.intersectPolygonPolygon)(e,t);return n?n.map(kt.Vec.Cast):[]}}))}}))}},{key:"getShapeMask",value:function(e){return this._getShapeMaskCache().get("string"===typeof e?e:e.id)}},{key:"getShapeMaskedPageBounds",value:function(e){return"string"!==typeof e&&(e=e.id),this._getShapeMaskedPageBoundsCache().get(e)}},{key:"_getShapeMaskedPageBoundsCache",value:function(){var e=this;return this.store.createComputedCache("shapeMaskedPageBoundsCache",(function(t){var n=e._getShapePageBoundsCache().get(t.id);if(n){var r=e._getShapeMaskCache().get(t.id);if(r){if(0===r.length)return;var o=n.corners;if(o.every((function(e,t){return e&&kt.Vec.Equals(e,r[t])})))return n.clone();var i=(0,It.intersectPolygonPolygon)(r,o);if(!i)return;return Pt.Box.FromPoints(i)}return n}}))}},{key:"getShapeAncestors",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n="string"===typeof e?e:e.id,r=this.getShape(n);if(!r)return t;var o=r.parentId;if((0,lt.isPageId)(o))return t.reverse(),t;var i=this.store.get(o);return i?(t.push(i),this.getShapeAncestors(i,t)):t}},{key:"findShapeAncestor",value:function(e,t){var n="string"===typeof e?e:e.id,r=this.getShape(n);if(r){var o=r.parentId;if(!(0,lt.isPageId)(o)){var i=this.getShape(o);if(i)return t(i)?i:this.findShapeAncestor(i,t)}}}},{key:"hasAncestor",value:function(e,t){var n="string"===typeof e?e:null===e||void 0===e?void 0:e.id,r=n&&this.getShape(n);return!!r&&(r.parentId===t||this.hasAncestor(this.getShapeParent(r),t))}},{key:"findCommonAncestor",value:function(e,t){var n=this;if(0!==e.length){var r="string"===typeof e[0]?e:e.map((function(e){return e.id})),o=(0,ft.compact)(r.map((function(e){return n.getShape(e)})));if(1===o.length){var a,u=o[0].parentId;if((0,lt.isPageId)(u))return;return t?null===(a=this.findShapeAncestor(o[0],t))||void 0===a?void 0:a.id:u}for(var s=i(o),c=s[0],l=s.slice(1),f=this.getShapeParent(c);f;)if(!t||t(f)){if(l.every((function(e){return n.hasAncestor(e,f.id)})))return f.id;f=this.getShapeParent(f)}else f=this.getShapeParent(f)}}},{key:"isShapeOrAncestorLocked",value:function(e){var t="string"===typeof e?this.getShape(e):e;return void 0!==t&&(!!t.isLocked||this.isShapeOrAncestorLocked(this.getShapeParent(t)))}},{key:"_notVisibleShapes",value:function(){return(0,Ft.notVisibleShapes)(this)}},{key:"getCulledShapes",value:function(){var e=this._notVisibleShapes().get(),t=this.getSelectedShapeIds(),n=this.getEditingShapeId(),r=new Set(e);return n&&r.delete(n),t.forEach((function(e){r.delete(e)})),r}},{key:"getCurrentPageBounds",value:function(){var e,t=this;return this.getCurrentPageShapeIdsSorted().forEach((function(n){var r=t.getShapeMaskedPageBounds(n);r&&(e=e?e.expand(r):r.clone())})),e}},{key:"getSelectedShapeAtPoint",value:function(e){var t=this,n=this.getSelectedShapeIds();return this.getCurrentPageShapesSorted().filter((function(e){return"group"!==e.type&&n.includes(e.id)})).reverse().find((function(n){return t.isPointInShape(n,e,{hitInside:!0,margin:0})}))}},{key:"getShapeAtPoint",value:function(e){for(var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=this.getZoomLevel(),o=this.getViewportPageBounds(),i=n.filter,a=n.margin,u=void 0===a?0:a,s=n.hitLocked,c=void 0!==s&&s,l=n.hitLabels,f=void 0!==l&&l,d=n.hitInside,p=void 0!==d&&d,h=n.hitFrameInside,v=void 0!==h&&h,g=1/0,m=null,b=1/0,w=null,S=(n.renderingOnly?this.getCurrentPageRenderingShapesSorted():this.getCurrentPageShapesSorted()).filter((function(n){if(n.isLocked&&!c||t.isShapeHidden(n)||t.isShapeOfType(n,"group"))return!1;var r=t.getShapeMask(n);return!(r&&!(0,Tt.pointInPolygon)(e,r))&&(!i||i(n))})),x=S.length-1;x>=0;x--){var P=S[x],O=this.getShapeGeometry(P),k=O instanceof jt.Group2d,_=this.getPointInShapeSpace(P,e);if(this.isShapeOfType(P,"frame")||(this.isShapeOfType(P,"arrow")||this.isShapeOfType(P,"geo")&&"none"===P.props.fill)&&P.props.text.trim()){var j,I=y(O.children);try{for(I.s();!(j=I.n()).done;){var T=j.value;if(T.isLabel&&T.isPointInBounds(_))return P}}catch(U){I.e(U)}finally{I.f()}}if(this.isShapeOfType(P,"frame")){var E=O.distanceToPoint(_,p);if(Math.abs(E)<=u)return w||P;if(O.hitTestPoint(_,0,!0))return w||m||(v?P:void 0)}else{var C=void 0;if(k){var M,A=1/0,D=y(O.children);try{for(D.s();!(M=D.n()).done;){var R=M.value;if(!R.isLabel||f){var N=R.distanceToPoint(_,p);N<A&&(A=N)}}}catch(U){D.e(U)}finally{D.f()}C=A}else C=0===u&&(O.bounds.w<1||O.bounds.h<1)||O.bounds.containsPoint(_,u)?O.distanceToPoint(_,p):1/0;if(O.isClosed){if(C<=u){if(O.isFilled||k&&O.children[0].isFilled)return w||P;if(this.getShapePageBounds(P).contains(o))continue;if(Math.abs(C)<u)Math.abs(C)<b&&(b=Math.abs(C),w=P);else if(!w){var L=O.area;L<g&&(g=L,m=P)}}}else if(C<this.options.hitTestMargin/r)return P}}return w||m||void 0}},{key:"getShapesAtPoint",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.getCurrentPageShapes().filter((function(r){return!t.isShapeHidden(r)&&t.isPointInShape(r,e,n)}))}},{key:"isPointInShape",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.hitInside,o=void 0!==r&&r,i=n.margin,a=void 0===i?0:i,u="string"===typeof e?e:e.id,s=this.getShapeMask(u);return!(s&&!(0,Tt.pointInPolygon)(t,s))&&this.getShapeGeometry(u).hitTestPoint(this.getPointInShapeSpace(e,t),a,o)}},{key:"getPointInShapeSpace",value:function(e,t){var n="string"===typeof e?e:e.id;return this._getShapePageTransformCache().get(n).clone().invert().applyToPoint(t)}},{key:"getPointInParentSpace",value:function(e,t){var n="string"===typeof e?e:e.id,r=this.getShape(n);if(!r)return new kt.Vec(0,0);if((0,lt.isPageId)(r.parentId))return kt.Vec.From(t);var o=this.getShapePageTransform(r.parentId);return o?o.clone().invert().applyToPoint(t):kt.Vec.From(t)}},{key:"getCurrentPageShapes",value:function(){var e=this;return Array.from(this.getCurrentPageShapeIds(),(function(t){return e.store.get(t)}))}},{key:"getCurrentPageShapesSorted",value:function(){for(var e=[],t=this.getSortedChildIdsForParent(this.getCurrentPageId()),n=0,r=t.length;n<r;n++)tn(this,t[n],e);return e}},{key:"getCurrentPageRenderingShapesSorted",value:function(){var e=this,t=this.getCulledShapes();return this.getCurrentPageShapesSorted().filter((function(n){var r=n.id;return!t.has(r)&&!e.isShapeHidden(r)}))}},{key:"isShapeOfType",value:function(e,t){var n="string"===typeof e?this.getShape(e):e;return!!n&&n.type===t}},{key:"getShape",value:function(e){var t="string"===typeof e?e:e.id;if((0,lt.isShapeId)(t))return this.store.get(t)}},{key:"getShapeParent",value:function(e){var t="string"===typeof e?e:null===e||void 0===e?void 0:e.id;if(t){var n=this.getShape(t);if(void 0!==n&&(0,lt.isShapeId)(n.parentId))return this.store.get(n.parentId)}}},{key:"getShapeNearestSibling",value:function(e,t){if(t)return t.parentId===e.parentId?t:this.findShapeAncestor(t,(function(t){return t.parentId===e.parentId}))}},{key:"isShapeInPage",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.getCurrentPageId(),n="string"===typeof e?e:e.id,r=this.getShape(n);if(!r)return!1;var o=!1;if(r.parentId===t)o=!0;else{var i=this.getShape(r.parentId);e:for(;i;){if(i.parentId===t){o=!0;break e}i=this.getShape(i.parentId)}}return o}},{key:"getAncestorPageId",value:function(e){var t="string"===typeof e?e:null===e||void 0===e?void 0:e.id,n=t&&this.getShape(t);if(n)return(0,lt.isPageId)(n.parentId)?n.parentId:this.getAncestorPageId(this.getShape(n.parentId))}},{key:"reparentShapes",value:function(e,t,n){var r=this,o="string"===typeof e[0]?e:e.map((function(e){return e.id}));if(0===o.length)return this;var i=[],a=(0,lt.isPageId)(t)?Ot.Mat.Identity():this.getShapePageTransform(t),u=a.rotation(),s=[],c=(0,ft.compact)(this.getSortedChildIdsForParent(t).map((function(e){return r.getShape(e)})));if(n){var l=c.find((function(e){return e.index===n}));if(l){var f=c[c.indexOf(l)+1];s=f?(0,ft.getIndicesBetween)(n,f.index,o.length):(0,ft.getIndicesAbove)(n,o.length)}else{var d=c.sort(ft.sortByIndex).find((function(e){return e.index>n}));s=d?(0,ft.getIndicesBetween)(n,d.index,o.length):(0,ft.getIndicesAbove)(n,o.length)}}else{var p=c.length&&c[c.length-1];s=p?(0,ft.getIndicesAbove)(p.index,o.length):(0,ft.getIndices)(o.length)}var h=a.clone().invert(),v=(0,ft.compact)(o.map((function(e){return r.getShape(e)})));return this.run((function(){for(var e=0;e<v.length;e++){var n=v[e],o=r.getShapePageTransform(n);if(o){var a=o.point();if(a){var c=h.applyToPoint(a),l=o.rotation()-u;i.push({id:n.id,type:n.type,parentId:t,x:c.x,y:c.y,rotation:l,index:s[e]})}}}r.updateShapes(i)}),{ignoreShapeLock:!0}),this}},{key:"getHighestIndexForParent",value:function(e){var t="string"===typeof e?e:e.id,n=this._parentIdsToChildIds.get()[t];if(!n||0===n.length)return"a1";var r=this.getShape(n[n.length-1]);return(0,ft.getIndexAbove)(r.index)}},{key:"getSortedChildIdsForParent",value:function(e){var t="string"===typeof e?e:e.id,n=this._parentIdsToChildIds.get()[t];return n||st.EMPTY_ARRAY}},{key:"visitDescendants",value:function(e,t){var n,r="string"===typeof e?e:e.id,o=this.getSortedChildIdsForParent(r),i=y(o);try{for(i.s();!(n=i.n()).done;){var a=n.value;!1!==t(a)&&this.visitDescendants(a,t)}}catch(u){i.e(u)}finally{i.f()}return this}},{key:"getShapeAndDescendantIds",value:function(e){var t,n=this,r=new Set,o=y(e.map((function(e){return n.getShape(e)})).sort(ft.sortByIndex));try{for(o.s();!(t=o.n()).done;){var i=t.value;r.add(i.id),this.visitDescendants(i,(function(e){r.add(e)}))}}catch(a){o.e(a)}finally{o.f()}return r}},{key:"getDroppingOverShape",value:function(e){for(var t,n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],o=this.getCurrentPageShapesSorted(),i=function(){var t=o[a];if(n.isShapeHidden(t)||n.getSelectedShapeIds().includes(t.id)||!n.getShapeUtil(t).canDropShapes(t,r)||r.find((function(e){return e.id===t.id||n.hasAncestor(t,e.id)})))return 0;var i=n.getShapeMaskedPageBounds(t.id);return i&&i.containsPoint(e)&&n.getShapeGeometry(t).hitTestPoint(n.getPointInShapeSpace(t,e),0,!0)?{v:t}:void 0},a=o.length-1;a>=0;a--)if(0!==(t=i())&&t)return t.v}},{key:"getOutermostSelectableShape",value:function(e,t){for(var n="string"===typeof e?e:e.id,r=this.getShape(n),o=r,i=r,a=this.getFocusedGroup();i;){var u;if(!this.isShapeOfType(i,"group")||(null===a||void 0===a?void 0:a.id)===i.id||this.hasAncestor(a,i.id)||null!==(u=null===t||void 0===t?void 0:t(i))&&void 0!==u&&!u){if((null===a||void 0===a?void 0:a.id)===i.id)break}else o=i;i=this.getShapeParent(i)}return o}},{key:"_getBindingsIndexCache",value:function(){var e=(0,Ut.bindingsIndex)(this);return this.store.createComputedCache("bindingsIndex",(function(t){return e.get().get(t.id)}))}},{key:"getBinding",value:function(e){return this.store.get(e)}},{key:"getBindingsFromShape",value:function(e,t){var n="string"===typeof e?e:e.id;return this.getBindingsInvolvingShape(n).filter((function(e){return e.fromId===n&&e.type===t}))}},{key:"getBindingsToShape",value:function(e,t){var n="string"===typeof e?e:e.id;return this.getBindingsInvolvingShape(n).filter((function(e){return e.toId===n&&e.type===t}))}},{key:"getBindingsInvolvingShape",value:function(e,t){var n,r="string"===typeof e?e:e.id,o=null!==(n=this._getBindingsIndexCache().get(r))&&void 0!==n?n:st.EMPTY_ARRAY;return t?o.filter((function(e){return e.type===t})):o}},{key:"createBindings",value:function(e){var t,n=[],r=y(e);try{for(r.s();!(t=r.n()).done;){var o,i=t.value,a=this.getShape(i.fromId),u=this.getShape(i.toId);if(a&&u&&this.canBindShapes({fromShape:a,toShape:u,binding:i})){var s=this.getBindingUtil(i.type).getDefaultProps(),c=this.store.schema.types.binding.create(f(f({},i),{},{id:null!==(o=i.id)&&void 0!==o?o:(0,lt.createBindingId)(),props:f(f({},s),i.props)}));n.push(c)}}}catch(l){r.e(l)}finally{r.f()}return this.store.put(n),this}},{key:"createBinding",value:function(e){return this.createBindings([e])}},{key:"updateBindings",value:function(e){var t,n=[],r=y(e);try{for(r.s();!(t=r.n()).done;){var o=t.value;if(o){var i=this.getBinding(o.id);if(i){var a=en(i,o);if(a!==i){var u=this.getShape(a.fromId),s=this.getShape(a.toId);u&&s&&this.canBindShapes({fromShape:u,toShape:s,binding:a})&&n.push(a)}}}}}catch(c){r.e(c)}finally{r.f()}return this.store.put(n),this}},{key:"updateBinding",value:function(e){return this.updateBindings([e])}},{key:"deleteBindings",value:function(e){var t=this,n=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).isolateShapes,r=void 0!==n&&n,o=e.map((function(e){return"string"===typeof e?e:e.id}));return r?this.store.atomic((function(){var e,n=y(o);try{for(n.s();!(e=n.n()).done;){var r,i,a=e.value,u=t.getBinding(a);if(u){var s=t.getBindingUtil(u);null===(r=s.onBeforeIsolateFromShape)||void 0===r||r.call(s,{binding:u,removedShape:t.getShape(u.toId)}),null===(i=s.onBeforeIsolateToShape)||void 0===i||i.call(s,{binding:u,removedShape:t.getShape(u.fromId)}),t.store.remove([a])}}}catch(c){n.e(c)}finally{n.f()}})):this.store.remove(o),this}},{key:"deleteBinding",value:function(e,t){return this.deleteBindings([e],t)}},{key:"canBindShapes",value:function(e){var t=e.fromShape,n=e.toShape,r=e.binding,o="string"===typeof t?t:t.type,i="string"===typeof n?n:n.type,a={fromShapeType:o,toShapeType:i,bindingType:"string"===typeof r?r:r.type};return o===i?this.getShapeUtil(o).canBind(a):this.getShapeUtil(o).canBind(a)&&this.getShapeUtil(i).canBind(a)}},{key:"rotateShapesBy",value:function(e,t,n){var r="string"===typeof e[0]?e:e.map((function(e){return e.id}));if(r.length<=0)return this;var o=(0,Lt.getRotationSnapshot)({editor:this,ids:r});return o?((0,Lt.applyRotationToSnapshotShapes)({delta:t,snapshot:o,editor:this,stage:"one-off",centerOverride:null===n||void 0===n?void 0:n.center}),this):this}},{key:"getChangesToTranslateShape",value:function(e,t){var n,r,o,i,a,u,s=e,c=this.getShapeUtil(e);return s=en(s,null!==(n=null===(r=c.onTranslateStart)||void 0===r?void 0:r.call(c,s))&&void 0!==n?n:void 0),s=en(s,{id:e.id,type:e.type,x:t.x,y:t.y}),s=en(s,null!==(o=null===(i=c.onTranslate)||void 0===i?void 0:i.call(c,e,s))&&void 0!==o?o:void 0),s=en(s,null!==(a=null===(u=c.onTranslateEnd)||void 0===u?void 0:u.call(c,e,s))&&void 0!==a?a:void 0)}},{key:"nudgeShapes",value:function(e,t){var n="string"===typeof e[0]?e:e.map((function(e){return e.id}));if(n.length<=0)return this;var r,o=[],i=y(n);try{for(i.s();!(r=i.n()).done;){var a=r.value,u=this.getShape(a),s=kt.Vec.From(t),c=this.getShapeParentTransform(u);c&&s.rot(-c.rotation()),o.push(this.getChangesToTranslateShape(u,s.add(u)))}}catch(l){i.e(l)}finally{i.f()}return this.updateShapes(o),this}},{key:"duplicateShapes",value:function(e,t){var n=this;return this.run((function(){var r="string"===typeof e[0]?e:e.map((function(e){return e.id}));if(r.length<=0)return n;var o,i=new Set(r),a=n.getShapeAndDescendantIds(r),u=c(a).reverse(),s=new Map,l=y(a);try{for(l.s();!(o=l.n()).done;){var d=o.value;s.set(d,(0,lt.createShapeId)())}}catch(w){l.e(w)}finally{l.f()}var p=nn(n,a,(function(e){var r,o=[],a=y(e);try{for(a.s();!(r=a.n()).done;){var c=r.value,l=n.getBinding(c);if(l){var d=(0,lt.createBindingId)();o.push(f(f({},l),{},{id:d,fromId:(0,ft.assertExists)(s.get(l.fromId)),toId:(0,ft.assertExists)(s.get(l.toId))}))}}}catch(w){a.e(w)}finally{a.f()}var p,h=[],v=y(u);try{for(v.s();!(p=v.n()).done;){var g,m=p.value,b=(0,ft.assertExists)(s.get(m)),S=n.getShape(m);if(S){var x=0,P=0;if(t&&i.has(m)){var O=n.getShapeParentTransform(S),k=new kt.Vec(t.x,t.y).rot(-O.rotation());x=k.x,P=k.y}h.push({shape:f(f({},S),{},{id:b,x:S.x+x,y:S.y+P,index:"a1",parentId:null!==(g=s.get(S.parentId))&&void 0!==g?g:S.parentId}),originalShape:S})}}}catch(w){v.e(w)}finally{v.f()}return{shapesToCreateWithOriginals:h,bindingsToCreate:o}})),h=p.shapesToCreateWithOriginals,v=p.bindingsToCreate;h.forEach((function(e){var t=e.shape,r=e.originalShape,o=r.parentId,i=n.getSortedChildIdsForParent(o),a=i.indexOf(r.id),u=i[a+1],s=u?n.getShape(u):void 0,c=(0,ft.getIndexBetween)(r.index,null===s||void 0===s?void 0:s.index);t.index=c}));var g=h.map((function(e){return e.shape}));if(g.length+n.getCurrentPageShapeIds().size>n.options.maxShapesPerPage)Jt(n);else if(n.createShapes(g),n.createBindings(v),n.setSelectedShapes((0,ft.compact)(r.map((function(e){return s.get(e)})))),void 0!==t){var m=n.getSelectionPageBounds(),b=n.getViewportPageBounds();m&&!b.contains(m)&&n.centerOnPoint(m.center,{animation:{duration:n.options.animationMediumMs}})}})),this}},{key:"moveShapesToPage",value:function(e,t){var n=this,r="string"===typeof e[0]?e:e.map((function(e){return e.id}));if(0===r.length)return this;if(this.getIsReadonly())return this;var o=this.getCurrentPageId();if(t===o)return this;if(!this.store.has(t))return this;var i=this.getContentFromCurrentPage(r);if(!i)return this;if(this.getPageShapeIds(t).size+i.shapes.length>this.options.maxShapesPerPage)return Jt(this,t),this;var a=this.getCamera().z;return this.run((function(){n.deleteShapes(r),n.setCurrentPage(t),n.setFocusedGroup(null),n.selectNone(),n.putContentOntoCurrentPage(i,{select:!0,preserveIds:!0,preservePosition:!0}),n.setCamera(f(f({},n.getCamera()),{},{z:a})),n.centerOnPoint(n.getSelectionRotatedPageBounds().center)})),this}},{key:"toggleLock",value:function(e){var t=this,n="string"===typeof e[0]?e:e.map((function(e){return e.id}));if(this.getIsReadonly()||0===n.length)return this;var r,o=!0,i=!0,a=[],u=y(n);try{for(u.s();!(r=u.n()).done;){var s=r.value,c=this.getShape(s);c&&(a.push(c),c.isLocked?i=!1:o=!1)}}catch(l){u.e(l)}finally{u.f()}return this.run((function(){i?(t.updateShapes(a.map((function(e){return{id:e.id,type:e.type,isLocked:!0}}))),t.setSelectedShapes([])):o?t.updateShapes(a.map((function(e){return{id:e.id,type:e.type,isLocked:!1}}))):t.updateShapes(a.map((function(e){return{id:e.id,type:e.type,isLocked:!0}})))})),this}},{key:"sendToBack",value:function(e){var t="string"===typeof e[0]?e:e.map((function(e){return e.id})),n=(0,Nt.getReorderingShapesChanges)(this,"toBack",t,{considerAllShapes:!0});return n&&this.updateShapes(n),this}},{key:"sendBackward",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n="string"===typeof e[0]?e:e.map((function(e){return e.id})),r=(0,Nt.getReorderingShapesChanges)(this,"backward",n,t);return r&&this.updateShapes(r),this}},{key:"bringForward",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n="string"===typeof e[0]?e:e.map((function(e){return e.id})),r=(0,Nt.getReorderingShapesChanges)(this,"forward",n,t);return r&&this.updateShapes(r),this}},{key:"bringToFront",value:function(e){var t="string"===typeof e[0]?e:e.map((function(e){return e.id})),n=(0,Nt.getReorderingShapesChanges)(this,"toFront",t);return n&&this.updateShapes(n),this}},{key:"flipShapes",value:function(e,t){var n=this,r="string"===typeof e[0]?e:e.map((function(e){return e.id}));if(this.getIsReadonly())return this;var o=(0,ft.compact)(r.map((function(e){return n.getShape(e)})));if(!o.length)return this;o=(0,ft.compact)(o.map((function(e){return n.isShapeOfType(e,"group")?n.getSortedChildIdsForParent(e.id).map((function(e){return n.getShape(e)})):e})).flat());var i=Pt.Box.Common((0,ft.compact)(o.map((function(e){return n.getShapePageBounds(e)})))).center;return this.run((function(){var e,r=y(o);try{for(r.s();!(e=r.n()).done;){var a=e.value,u=n.getShapeGeometry(a).bounds,s=n.getShapePageTransform(a.id);s&&n.resizeShape(a.id,{x:"horizontal"===t?-1:1,y:"vertical"===t?-1:1},{initialBounds:u,initialPageTransform:s,initialShape:a,mode:"scale_shape",isAspectRatioLocked:n.getShapeUtil(a).isAspectRatioLocked(a),scaleOrigin:i,scaleAxisRotation:0})}}catch(c){r.e(c)}finally{r.f()}})),this}},{key:"stackShapes",value:function(e,t,n){var r=this,o="string"===typeof e[0]?e:e.map((function(e){return e.id}));if(this.getIsReadonly())return this;var i=o.map((function(e){return r.getShape(e)})).filter((function(e){return!!e&&r.getShapeUtil(e).canBeLaidOut(e)})),a=i.length;if(0===n&&a<3||a<2)return this;var u,s,c,d,p,h=Object.fromEntries(i.map((function(e){return[e.id,r.getShapePageBounds(e)]})));if("horizontal"===t?(u="x",s="minX",c="maxX",d="width"):(u="y",s="minY",c="maxY",d="height"),0===n){var v=[];i.sort((function(e,t){return h[e.id][s]-h[t.id][s]}));for(var g=function(){var e=i[y],t=i[y+1],n=h[e.id],r=h[t.id][s]-n[c],o=v.find((function(e){return e.gap===r}));o?o.count++:v.push({gap:r,count:1})},y=0;y<a-1;y++)g();var m=0;v.forEach((function(e){e.count>m&&(m=e.count,p=e.gap)})),1===m&&(p=Math.max(0,v.reduce((function(e,t){return e+t.gap*t.count}),0)/(a-1)))}else p=n;var b=[],w=h[i[0].id][c];return i.forEach((function(e,t){var n,o;if(0!==t){var i={x:0,y:0};i[u]=w+p-h[e.id][u];var a=r.getShapeParent(e),s=a?kt.Vec.Rot(i,-r.getShapePageTransform(a).decompose().rotation):i,c=null===(n=(o=r.getShapeUtil(e)).onTranslateStart)||void 0===n?void 0:n.call(o,e);b.push(c?f(f({},c),{},l({},u,e[u]+s[u])):l({id:e.id,type:e.type},u,e[u]+s[u])),w+=h[e.id][d]+p}})),this.updateShapes(b),this}},{key:"packShapes",value:function(e,t){var n=this,r="string"===typeof e[0]?e:e.map((function(e){return e.id}));if(this.getIsReadonly())return this;if(r.length<2)return this;for(var o,i,a=r.map((function(e){return n.getShape(e)})).filter((function(e){return!!e&&n.getShapeUtil(e).canBeLaidOut(e)})),u={},s={},c=0,l=0;l<a.length;l++)o=a[l],i=this.getShapePageBounds(o),u[o.id]=i,s[o.id]=i.clone(),c+=i.width*i.height;var d=Pt.Box.Common((0,ft.compact)(Object.values(u))),p=d.width;a.sort((function(e,t){return u[t.id].height-u[e.id].height}));for(var h,v,g=Math.max(Math.ceil(Math.sqrt(c/.95)),p),y=[new Pt.Box(d.x,d.y,g,1/0)],m=0,b=0,w=0;w<a.length;w++){i=s[(o=a[w]).id];for(var S=y.length-1;S>=0;S--)if(h=y[S],!(i.width>h.width||i.height>h.height)){i.x=h.x,i.y=h.y,b=Math.max(b,i.maxY),m=Math.max(m,i.maxX),i.width===h.width&&i.height===h.height?(v=y.pop(),S<y.length&&(y[S]=v)):i.height===h.height?(h.x+=i.width+t,h.width-=i.width+t):i.width===h.width?(h.y+=i.height+t,h.height-=i.height+t):(y.push(new Pt.Box(h.x+(i.width+t),h.y,h.width-(i.width+t),i.height)),h.y+=i.height+t,h.height-=i.height+t);break}}for(var x,P=Pt.Box.Common(Object.values(s)),O=kt.Vec.Sub(d.center,P.center),k=[],_=0;_<a.length;_++){var j,I;o=a[_],i=u[o.id],x=s[o.id];var T=kt.Vec.Sub(x.point,i.point).add(O),E=this.getShapeParentTransform(o);E&&T.rot(-E.rotation());var C={id:o.id,type:o.type,x:o.x+T.x,y:o.y+T.y},M=null===(j=(I=this.getShapeUtil(o)).onTranslateStart)||void 0===j?void 0:j.call(I,f(f({},o),C));M?k.push(f(f({},C),M)):k.push(C)}return k.length&&this.updateShapes(k),this}},{key:"alignShapes",value:function(e,t){var n=this,r="string"===typeof e[0]?e:e.map((function(e){return e.id}));if(this.getIsReadonly())return this;if(r.length<2)return this;var o=(0,ft.compact)(r.map((function(e){return n.getShape(e)}))),i=Object.fromEntries(o.map((function(e){return[e.id,n.getShapePageBounds(e)]}))),a=Pt.Box.Common((0,ft.compact)(Object.values(i))),u=[];return o.forEach((function(e){var r=i[e.id];if(r){var o={x:0,y:0};switch(t){case"top":o.y=a.minY-r.minY;break;case"center-vertical":o.y=a.midY-r.minY-r.height/2;break;case"bottom":o.y=a.maxY-r.minY-r.height;break;case"left":o.x=a.minX-r.minX;break;case"center-horizontal":o.x=a.midX-r.minX-r.width/2;break;case"right":o.x=a.maxX-r.minX-r.width}var s=n.getShapeParent(e),c=s?kt.Vec.Rot(o,-n.getShapePageTransform(s).decompose().rotation):o;u.push(n.getChangesToTranslateShape(e,kt.Vec.Add(e,c)))}})),this.updateShapes(u),this}},{key:"distributeShapes",value:function(e,t){var n=this,r="string"===typeof e[0]?e:e.map((function(e){return e.id}));if(this.getIsReadonly())return this;if(r.length<3)return this;var o,i,a,u,s,c=r.length,l=(0,ft.compact)(r.map((function(e){return n.getShape(e)}))),f=Object.fromEntries(l.map((function(e){return[e.id,n.getShapePageBounds(e)]})));"horizontal"===t?(o="x",i="minX",a="maxX",u="midX",s="width"):(o="y",i="minY",a="maxY",u="midY",s="height");var d=[],p=l.sort((function(e,t){return f[e.id][i]-f[t.id][i]}))[0],h=l.sort((function(e,t){return f[t.id][a]-f[e.id][a]}))[0],v=f[p.id][u],g=(f[h.id][u]-v)/(c-1),y=v+g;return l.filter((function(e){return e!==p&&e!==h})).sort((function(e,t){return f[e.id][u]-f[t.id][u]})).forEach((function(e,t){var r={x:0,y:0};r[o]=y+g*t-f[e.id][s]/2-f[e.id][o];var i=n.getShapeParent(e),a=i?kt.Vec.Rot(r,-n.getShapePageTransform(i).rotation()):r;d.push(n.getChangesToTranslateShape(e,kt.Vec.Add(e,a)))})),this.updateShapes(d),this}},{key:"stretchShapes",value:function(e,t){var n=this,r="string"===typeof e[0]?e:e.map((function(e){return e.id}));if(this.getIsReadonly())return this;if(r.length<2)return this;var o=(0,ft.compact)(r.map((function(e){return n.getShape(e)}))),i=Object.fromEntries(r.map((function(e){return[e,n.getShapeGeometry(e).bounds]}))),a=Object.fromEntries(r.map((function(e){return[e,n.getShapePageBounds(e)]}))),u=Pt.Box.Common((0,ft.compact)(Object.values(a)));switch(t){case"vertical":this.run((function(){var e,t=y(o);try{for(t.s();!(e=t.n()).done;){var r=e.value;if(!(n.getShapePageTransform(r).rotation()%Tt.PI2)){var s=i[r.id],c=a[r.id],l=new kt.Vec(0,u.minY-c.minY),f=n.getShapeParentTransform(r);f&&l.rot(-f.rotation());var d=kt.Vec.Add(l,r),p=d.x,h=d.y;n.updateShapes([{id:r.id,type:r.type,x:p,y:h}]);var v=new kt.Vec(1,u.height/c.height);n.resizeShape(r.id,v,{initialBounds:s,scaleOrigin:new kt.Vec(c.center.x,u.minY),isAspectRatioLocked:n.getShapeUtil(r).isAspectRatioLocked(r),scaleAxisRotation:0})}}}catch(g){t.e(g)}finally{t.f()}}));break;case"horizontal":this.run((function(){var e,t=y(o);try{for(t.s();!(e=t.n()).done;){var r=e.value,s=i[r.id],c=a[r.id];if(!(n.getShapePageTransform(r).rotation()%Tt.PI2)){var l=new kt.Vec(u.minX-c.minX,0),f=n.getShapeParentTransform(r);f&&l.rot(-f.rotation());var d=kt.Vec.Add(l,r),p=d.x,h=d.y;n.updateShapes([{id:r.id,type:r.type,x:p,y:h}]);var v=new kt.Vec(u.width/c.width,1);n.resizeShape(r.id,v,{initialBounds:s,scaleOrigin:new kt.Vec(u.minX,c.center.y),isAspectRatioLocked:n.getShapeUtil(r).isAspectRatioLocked(r),scaleAxisRotation:0})}}}catch(g){t.e(g)}finally{t.f()}}))}return this}},{key:"resizeShape",value:function(e,t){var n,r,o,i,a,u,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},c="string"===typeof e?e:e.id;if(this.getIsReadonly())return this;Number.isFinite(t.x)||(t=new kt.Vec(1,t.y)),Number.isFinite(t.y)||(t=new kt.Vec(t.x,1));var l=null!==(n=s.initialShape)&&void 0!==n?n:this.getShape(c);if(!l)return this;var d=null!==(r=s.scaleOrigin)&&void 0!==r?r:null===(o=this.getShapePageBounds(c))||void 0===o?void 0:o.center;if(!d)return this;var p=s.initialPageTransform?Ot.Mat.Cast(s.initialPageTransform):this.getShapePageTransform(c);if(!p)return this;var h=p.rotation();if(null==h)return this;var v=null!==(i=s.scaleAxisRotation)&&void 0!==i?i:h,g=null!==(a=s.initialBounds)&&void 0!==a?a:this.getShapeGeometry(c).bounds;if(!g)return this;var y=null!==(u=s.isAspectRatioLocked)&&void 0!==u?u:this.getShapeUtil(l).isAspectRatioLocked(l);if(!(0,Tt.areAnglesCompatible)(h,v))return this._resizeUnalignedShape(c,t,f(f({},s),{},{initialBounds:g,scaleOrigin:d,scaleAxisRotation:v,initialPageTransform:p,isAspectRatioLocked:y,initialShape:l}));var m=this.getShapeUtil(l);if(y&&(t=Math.abs(t.x)>Math.abs(t.y)?new kt.Vec(t.x,Math.sign(t.y)*Math.abs(t.x)):new kt.Vec(Math.sign(t.x)*Math.abs(t.y),t.y)),m.onResize&&m.canResize(l)){var b,w,S=this._scalePagePoint(Ot.Mat.applyToPoint(p,new kt.Vec(0,0)),d,t,v),x=this.getPointInParentSpace(l.id,S),P=new kt.Vec(t.x,t.y),O=(0,Tt.approximately)((h-v)%Math.PI,0);P.x=O?t.x:t.y,P.y=O?t.y:t.x;var k,_,j,I,T=Ot.Mat.applyToPoint(p,new kt.Vec),E=this.getPointInParentSpace(l.id,T),C=E.x,M=E.y,A=l;if(!s.skipStartAndEndCallbacks)A=en(l,null!==(k=null===(_=m.onResizeStart)||void 0===_?void 0:_.call(m,l))&&void 0!==k?k:void 0);if(A=en(A,f({id:c,type:l.type,x:x.x,y:x.y},m.onResize(f(f({},l),{},{x:C,y:M}),{newPoint:x,handle:null!==(b=s.dragHandle)&&void 0!==b?b:"bottom_right",mode:null!==(w=s.mode)&&void 0!==w?w:"scale_shape",scaleX:P.x,scaleY:P.y,initialBounds:g,initialShape:l}))),!s.skipStartAndEndCallbacks)A=en(A,null!==(j=null===(I=m.onResizeEnd)||void 0===I?void 0:I.call(m,l,A))&&void 0!==j?j:void 0);this.updateShapes([A])}else{var D=Ot.Mat.applyToPoint(p,g.center),R=this._scalePagePoint(D,d,t,v),N=this.getPointInParentSpace(l.id,D),L=this.getPointInParentSpace(l.id,R),U=kt.Vec.Sub(L,N);this.updateShapes([{id:c,type:l.type,x:l.x+U.x,y:l.y+U.y}])}return this}},{key:"_scalePagePoint",value:function(e,t,n,r){var o=kt.Vec.RotWith(e,t,-r).sub(t),i=kt.Vec.MulV(o,n);return kt.Vec.Add(i,t).rotWith(t,r)}},{key:"_resizeUnalignedShape",value:function(e,t,n){var r=n.initialShape.type,o=new kt.Vec(t.x,t.y);if(Math.abs(t.x)>Math.abs(t.y)?o.x=Math.sign(t.x)*Math.abs(t.y):o.y=Math.sign(t.y)*Math.abs(t.x),this.resizeShape(e,o,{initialShape:n.initialShape,initialBounds:n.initialBounds,isAspectRatioLocked:n.isAspectRatioLocked}),Math.sign(t.x)*Math.sign(t.y)<0){var i=Ot.Mat.Decompose(n.initialPageTransform).rotation;i-=2*i,this.updateShapes([{id:e,type:r,rotation:i}])}var a=Ot.Mat.applyToPoint(n.initialPageTransform,n.initialBounds.center),u=this._scalePagePoint(a,n.scaleOrigin,t,n.scaleAxisRotation),s=this.getShapePageBounds(e),c=this.getShapePageTransform(e),l=s.center,f=c.point();if(!l||!f)return this;var d=kt.Vec.Sub(u,l),p=kt.Vec.Add(f,d),h=this.getPointInParentSpace(e,p),v=h.x,g=h.y;return this.updateShapes([{id:e,type:r,x:v,y:g}]),this}},{key:"getInitialMetaForShape",value:function(e){return{}}},{key:"createShape",value:function(e){return this.createShapes([e]),this}},{key:"createShapes",value:function(e){var t=this;if(!Array.isArray(e))throw Error("Editor.createShapes: must provide an array of shapes or shape partials");if(this.getIsReadonly())return this;if(e.length<=0)return this;var n=this.getCurrentPageShapeIds();if(e.length+n.size>this.options.maxShapesPerPage)return Jt(this),this;var r=this.getFocusedGroupId();return this.run((function(){var n,i=t.getCurrentPageShapesSorted(),a=e.map((function(n){if(n.id||(n=f({id:(0,lt.createShapeId)()},n)),!n.parentId||!t.store.has(n.parentId)&&!e.some((function(e){return e.id===n.parentId}))){for(var o=t.getFocusedGroupId(),a=i.length-1;a>=0;a--){var u,s,c=i[a];if(!t.isShapeHidden(c)&&t.getShapeUtil(c).canReceiveNewChildrenOfType(c,n.type)&&t.isPointInShape(c,{x:null!==(u=n.x)&&void 0!==u?u:0,y:null!==(s=n.y)&&void 0!==s?s:0},{margin:0,hitInside:!0})){o=c.id;break}}var l=n.parentId;if(o===n.id&&(o=r),o!==l&&((n=f({},n)).parentId=o,(0,lt.isShapeId)(o))){var d,p,h,v=t.getPointInShapeSpace(t.getShape(o),{x:null!==(d=n.x)&&void 0!==d?d:0,y:null!==(p=n.y)&&void 0!==p?p:0});n.x=v.x,n.y=v.y,n.rotation=-t.getShapePageTransform(o).rotation()+(null!==(h=n.rotation)&&void 0!==h?h:0)}}return n})),u=new Map,s=[],c=t.getInstanceState().opacityForNextShape,l=y(a);try{for(l.s();!(n=l.n()).done;){var d,p,h,v,g=n.value,m=t.getShapeUtil(g),b=g.index;if(!b){var w,S=null!==(w=g.parentId)&&void 0!==w?w:r;u.has(S)||u.set(S,t.getHighestIndexForParent(S)),b=u.get(S),u.set(S,(0,ft.getIndexAbove)(b))}var x,P=m.getDefaultProps(),O=y(t.styleProps[g.type]);try{for(O.s();!(x=O.n()).done;){var k=o(x.value,2),_=k[0];P[k[1]]=t.getStyleForNextShape(_)}}catch(T){O.e(T)}finally{O.f()}var j=t.store.schema.types.shape.create(f(f({},g),{},{index:b,opacity:null!==(d=g.opacity)&&void 0!==d?d:c,parentId:null!==(p=g.parentId)&&void 0!==p?p:r,props:"props"in g?f(f({},P),g.props):P}));if(void 0===j.index)throw Error("no index!");var I=null===(h=(v=t.getShapeUtil(j)).onBeforeCreate)||void 0===h?void 0:h.call(v,j);I&&(j=I),s.push(j)}}catch(T){l.e(T)}finally{l.f()}s.forEach((function(e){e.meta=f(f({},t.getInitialMetaForShape(e)),e.meta)})),t.store.put(s)})),this}},{key:"animateShape",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{animation:yt.DEFAULT_ANIMATION_OPTIONS};return this.animateShapes([e],t)}},{key:"animateShapes",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{animation:yt.DEFAULT_ANIMATION_OPTIONS};if(!n.animation)return this;for(var r,o,i,a=n.animation,u=a.duration,s=void 0===u?500:u,c=a.easing,l=void 0===c?_t.EASINGS.linear:c,d=(0,ft.uniqueId)(),p=s,h=[],v=0,g=e.length;v<g;v++)if(o=e[v]){var y=this.getShape(o.id);y&&(i={start:(0,ft.structuredClone)(y),end:en((0,ft.structuredClone)(y),o)},h.push(i),this.animatingShapes.set(y.id,d))}var m=function(n){if((p-=n)<0){var o=t.animatingShapes,i=e.filter((function(e){return e&&o.get(e.id)===d}));return i.length&&t.updateShapes(i),void t.off("tick",m)}r=l(1-p/s);for(var a=t.animatingShapes,u=[],c=0,v=h.length;c<v;c++){var g,y,b,w=h[c],S=w.start,x=w.end;a.get(S.id)===d&&u.push(f(f({},x),{},{x:S.x+(x.x-S.x)*r,y:S.y+(x.y-S.y)*r,opacity:S.opacity+(x.opacity-S.opacity)*r,rotation:S.rotation+(x.rotation-S.rotation)*r,props:null!==(g=null===(y=(b=t.getShapeUtil(x)).getInterpolatedProps)||void 0===y?void 0:y.call(b,S,x,r))&&void 0!==g?g:x.props}))}t._updateShapes(u)};return this.on("tick",m),this}},{key:"groupShapes",value:function(e){var t,n,r=this,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=o.groupId,a=void 0===i?(0,lt.createShapeId)():i,u=o.select,s=void 0===u||u;if(!Array.isArray(e))throw Error("Editor.groupShapes: must provide an array of shapes or shape ids");if(this.getIsReadonly())return this;var c="string"===typeof e[0]?e:e.map((function(e){return e.id}));if(c.length<=1)return this;var l=(0,ft.compact)((this._shouldIgnoreShapeLock?c:this._getUnlockedShapeIds(c)).map((function(e){return r.getShape(e)}))),f=l.sort(ft.sortByIndex).map((function(e){return e.id})),d=Pt.Box.Common((0,ft.compact)(l.map((function(e){return r.getShapePageBounds(e)})))).point,p=d.x,h=d.y,v=null!==(t=this.findCommonAncestor(l))&&void 0!==t?t:this.getCurrentPageId();if("select"!==this.getCurrentToolId())return this;this.isIn("select.idle")||this.cancel();var g=l.filter((function(e){return e.parentId===v})).sort(ft.sortByIndex),y=null===(n=g[g.length-1])||void 0===n?void 0:n.index;return this.run((function(){r.createShapes([{id:a,type:"group",parentId:v,index:y,x:p,y:h,opacity:1,props:{}}]),r.reparentShapes(f,a),s&&r.select(a)})),this}},{key:"ungroupShapes",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this.getIsReadonly())return this;var r=n.select,o=void 0===r||r,i="string"===typeof e[0]?e:e.map((function(e){return e.id})),a=(0,ft.compact)((this._shouldIgnoreShapeLock?i:this._getUnlockedShapeIds(i)).map((function(e){return t.getShape(e)})));if(0===a.length)return this;if("select"!==this.getCurrentToolId())return this;this.isIn("select.idle")||this.cancel();var u=new Set,s=[];return a.forEach((function(e){t.isShapeOfType(e,"group")?s.push(e):u.add(e.id)})),0===s.length||this.run((function(){for(var e,n=0,r=s.length;n<r;n++){e=s[n];for(var i=t.getSortedChildIdsForParent(e.id),a=0,l=i.length;a<l;a++)u.add(i[a]);t.reparentShapes(i,e.parentId,e.index)}t.deleteShapes(s.map((function(e){return e.id}))),o&&t.select.apply(t,c(u))})),this}},{key:"updateShape",value:function(e){return this.updateShapes([e]),this}},{key:"updateShapes",value:function(e){for(var t=Array(e.length),n=0,r=e.length;n<r;n++){var o=e[n];if(o){var i=this.getShape(o.id);if(i){if(!this._shouldIgnoreShapeLock)if(i.isLocked){if(!Object.hasOwn(o,"isLocked")||o.isLocked)continue}else if(this.isShapeOrAncestorLocked(i))continue;this.animatingShapes.delete(o.id),t.push(o)}}}return this._updateShapes(t),this}},{key:"_updateShapes",value:function(e){var t=this;this.getIsReadonly()||this.run((function(){for(var n,r,o=[],i=0,a=e.length;i<a;i++){var u,s,c,l=e[i];l&&((n=t.getShape(l.id))&&(r=en(n,l))!==n&&(r=null!==(u=null===(s=(c=t.getShapeUtil(n)).onBeforeUpdate)||void 0===s?void 0:s.call(c,n,r))&&void 0!==u?u:r,o.push(r)))}t.store.put(o)}))}},{key:"_getUnlockedShapeIds",value:function(e){var t=this;return e.filter((function(e){var n;return!(null!==(n=t.getShape(e))&&void 0!==n&&n.isLocked)}))}},{key:"deleteShapes",value:function(e){var t=this;if(this.getIsReadonly())return this;if(!Array.isArray(e))throw Error("Editor.deleteShapes: must provide an array of shapes or shapeIds");var n="string"===typeof e[0]?e:e.map((function(e){return e.id})),r=this._shouldIgnoreShapeLock?n:this._getUnlockedShapeIds(n);if(0===r.length)return this;var o,i=new Set(r),a=y(r);try{for(a.s();!(o=a.n()).done;){var u=o.value;this.visitDescendants(u,(function(e){i.add(e)}))}}catch(s){a.e(s)}finally{a.f()}return this.run((function(){return t.store.remove(c(i))}))}},{key:"deleteShape",value:function(e){return this.deleteShapes(["string"===typeof e?e:e.id]),this}},{key:"_extractSharedStyles",value:function(e,t){if(this.isShapeOfType(e,"group")){var n=this._parentIdsToChildIds.get()[e.id];if(!n)return;for(var r=0,i=n.length;r<i;r++)this._extractSharedStyles(this.getShape(n[r]),t)}else{var a,u=y(this.styleProps[e.type]);try{for(u.s();!(a=u.n()).done;){var s=o(a.value,2),c=s[0],l=s[1];t.applyValue(c,(0,ft.getOwnProperty)(e.props,l))}}catch(f){u.e(f)}finally{u.f()}}}},{key:"_getSelectionSharedStyles",value:function(){var e,t=this.getSelectedShapes(),n=new Et.SharedStyleMap,r=y(t);try{for(r.s();!(e=r.n()).done;){var o=e.value;this._extractSharedStyles(o,n)}}catch(i){r.e(i)}finally{r.f()}return n}},{key:"getStyleForNextShape",value:function(e){var t=this.getInstanceState().stylesForNextShape[e.id];return void 0===t?e.defaultValue:t}},{key:"getShapeStyleIfExists",value:function(e,t){var n=this.styleProps[e.type].get(t);if(void 0!==n)return(0,ft.getOwnProperty)(e.props,n)}},{key:"getSharedStyles",value:function(){if(this.isIn("select")&&this.getSelectedShapeIds().length>0)return this._getSelectionSharedStyles();var e=this.root.getCurrent(),t=new Et.SharedStyleMap;if(!e)return t;if(e.shapeType){var n,r=y(this.styleProps[e.shapeType].keys());try{for(r.s();!(n=r.n()).done;){var o=n.value;t.applyValue(o,this.getStyleForNextShape(o))}}catch(i){r.e(i)}finally{r.f()}}return t}},{key:"getSharedOpacity",value:function(){var e=this;if(this.isIn("select")&&this.getSelectedShapeIds().length>0){var t,n=[],r=function(t){var o=e.getShape(t);if(o)if(e.isShapeOfType(o,"group")){var i,a=y(e.getSortedChildIdsForParent(o.id));try{for(a.s();!(i=a.n()).done;){var u=i.value;r(u)}}catch(s){a.e(s)}finally{a.f()}}else n.push(o)},o=y(this.getSelectedShapeIds());try{for(o.s();!(t=o.n()).done;){var i=t.value;r(i)}}catch(l){o.e(l)}finally{o.f()}for(var a=null,u=0,s=n;u<s.length;u++){var c=s[u];if(null===a)a=c.opacity;else if(a!==c.opacity)return{type:"mixed"}}if(null!==a)return{type:"shared",value:a}}return{type:"shared",value:this.getInstanceState().opacityForNextShape}}},{key:"setOpacityForNextShapes",value:function(e,t){return this.updateInstanceState({opacityForNextShape:e},t),this}},{key:"setOpacityForSelectedShapes",value:function(e){var t=this,n=this.getSelectedShapes();if(n.length>0){var r,o=[],i=function(e){if(t.isShapeOfType(e,"group")){var n,r=t.getSortedChildIdsForParent(e),a=y(r);try{for(a.s();!(n=a.n()).done;){var u=n.value;i(t.getShape(u))}}catch(s){a.e(s)}finally{a.f()}}else o.push(e)},a=y(n);try{for(a.s();!(r=a.n()).done;){var u=r.value;i(u)}}catch(s){a.e(s)}finally{a.f()}this.updateShapes(o.map((function(t){return{id:t.id,type:t.type,opacity:e}})))}return this}},{key:"setStyleForNextShapes",value:function(e,t,n){var r=this.getInstanceState().stylesForNextShape;return this.updateInstanceState({stylesForNextShape:f(f({},r),{},l({},e.id,t))},n),this}},{key:"setStyleForSelectedShapes",value:function(e,t){var n=this,r=this.getSelectedShapes();if(r.length>0){var o,i=[],a=function(r){if(n.isShapeOfType(r,"group")){var o,u=n.getSortedChildIdsForParent(r.id),s=y(u);try{for(s.s();!(o=s.n()).done;){var c=o.value;a(n.getShape(c))}}catch(h){s.e(h)}finally{s.f()}}else{var f=n.getShapeUtil(r),d=n.styleProps[r.type].get(e);if(d){var p={id:r.id,type:r.type,props:l({},d,t)};i.push({util:f,originalShape:r,updatePartial:p})}}},u=y(r);try{for(u.s();!(o=u.n()).done;){var s=o.value;a(s)}}catch(c){u.e(c)}finally{u.f()}this.updateShapes(i.map((function(e){return e.updatePartial})))}return this}},{key:"registerExternalAssetHandler",value:function(e,t){return this.externalAssetContentHandlers[e]=t,this}},{key:"createTemporaryAssetPreview",value:function(e,t){var n=this;if(this.temporaryAssetPreview.has(e))return this.temporaryAssetPreview.get(e);var r=URL.createObjectURL(t);return this.temporaryAssetPreview.set(e,r),setTimeout((function(){n.temporaryAssetPreview.delete(e),URL.revokeObjectURL(r)}),this.options.temporaryAssetPreviewLifetimeMs),r}},{key:"getTemporaryAssetPreview",value:function(e){return this.temporaryAssetPreview.get(e)}},{key:"getAssetForExternalContent",value:function(){var e=u(a().mark((function e(t){var n,r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===(n=(r=this.externalAssetContentHandlers)[t.type])||void 0===n?void 0:n.call(r,t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"hasExternalAssetHandler",value:function(e){return!!this.externalAssetContentHandlers[e]}},{key:"registerExternalContentHandler",value:function(e,t){return this.externalContentHandlers[e]=t,this}},{key:"putExternalContent",value:function(){var e=u(a().mark((function e(t){var n,r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",null===(n=(r=this.externalContentHandlers)[t.type])||void 0===n?void 0:n.call(r,t));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getContentFromCurrentPage",value:function(e){var t=this,n="string"===typeof e[0]?e:e.map((function(e){return e.id}));if(n&&0!==n.length){var r=this.getShapeAndDescendantIds(n);return nn(this,r,(function(e){var n,o=[],i=y(e);try{for(i.s();!(n=i.n()).done;){var a=n.value,u=t.getBinding(a);u&&o.push(u)}}catch(k){i.e(k)}finally{i.f()}var s,c=[],l=[],d=y(r);try{for(d.s();!(s=d.n()).done;){var p=s.value,h=t.getShape(p);if(h)if(!r.has(h.parentId)){var v=t.getShapePageTransform(h.id),g=v.point();l.push(f(f({},h),{},{x:g.x,y:g.y,rotation:v.rotation(),parentId:t.getCurrentPageId()})),c.push(h.id)}else l.push(h)}}catch(k){d.e(k)}finally{d.f()}for(var m=[],b=new Set,w=0,S=l;w<S.length;w++){var x=S[w];if("assetId"in x.props){var P=x.props.assetId;if(P&&!b.has(P)){b.add(P);var O=t.getAsset(P);O&&m.push(O)}}}return{schema:t.store.schema.serialize(),shapes:l,rootShapeIds:c,bindings:o,assets:m}}))}}},{key:"resolveAssetsInContent",value:function(){var e=u(a().mark((function e(t){var n,r=this;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",void 0);case 2:return n=[],e.next=5,Promise.allSettled(t.assets.map(function(){var e=u(a().mark((function e(t){var o,i,u,s,c;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("image"!==t.type&&"video"!==t.type||null!==(o=t.props.src)&&void 0!==o&&o.startsWith("data:image")||null!==(i=t.props.src)&&void 0!==i&&i.startsWith("data:video")||null!==(u=t.props.src)&&void 0!==u&&u.startsWith("http")){e.next=15;break}return s=(0,ft.structuredClone)(t),e.next=4,r.store.props.assets.resolve(t,{screenScale:1,steppedScreenScale:1,dpr:1,networkEffectiveType:null,shouldResolveToOriginal:!0});case 4:return c=e.sent,e.t0=ft.FileHelpers,e.next=8,(0,ft.fetch)(c).then((function(e){return e.blob()}));case 8:return e.t1=e.sent,e.next=11,e.t0.blobToDataUrl.call(e.t0,e.t1);case 11:s.props.src=e.sent,n.push(s),e.next=16;break;case 15:n.push(t);case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 5:return t.assets=n,e.abrupt("return",t);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"putContentOntoCurrentPage",value:function(e){var t,n,r=this,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this.getIsReadonly())return this;if(!e.schema)throw Error("Could not put content:\ncontent is missing a schema.");var i=o.select,s=void 0!==i&&i,l=o.preserveIds,d=void 0!==l&&l,p=o.preservePosition,h=void 0!==p&&p,v=o.point,g=void 0===v?void 0:v,m=this.getCurrentPageId(),b=e.rootShapeIds,w=[],S=[],x=[],P={store:f(f(f({},Object.fromEntries(e.assets.map((function(e){return[e.id,e]})))),Object.fromEntries(e.shapes.map((function(e){return[e.id,e]})))),Object.fromEntries(null!==(t=null===(n=e.bindings)||void 0===n?void 0:n.map((function(e){return[e.id,e]})))&&void 0!==t?t:[])),schema:e.schema},O=this.store.schema.migrateStoreSnapshot(P);if("error"===O.type)throw Error("Could not put content: could not migrate content");for(var k=0,_=Object.values(O.value);k<_.length;k++){var j=_[k];switch(j.typeName){case"asset":w.push(j);break;case"shape":S.push(j);break;case"binding":x.push(j)}}var I,T=new Map(d?S.map((function(e){return[e.id,e.id]})):S.map((function(e){return[e.id,(0,lt.createShapeId)()]}))),E=new Map(d?x.map((function(e){return[e.id,e.id]})):x.map((function(e){return[e.id,(0,lt.createBindingId)()]}))),C=this.getCurrentPageId(),M=1/0,A=[],D=y(this.getSelectedShapes());try{for(D.s();!(I=D.n()).done;){var R=I.value;if(0===M)break;var N=this.isShapeOfType(R,"frame"),L=this.getShapeAncestors(R);N&&L.push(R);var U=N?L.length+1:L.length;if(U<M)M=U,A=L,C=N?R.id:R.parentId;else if(U===M){if(A.length!==L.length)throw Error("Ancestors: ".concat(A.length," !== ").concat(L.length));if(0===A.length){C=m;break}C=m;for(var F=0;F<A.length&&L[F]===A[F];F++)C=L[F].id}}}catch(ee){D.e(ee)}finally{D.f()}var B=!1;if(!(0,lt.isPageId)(C)){var V=this.getShape(C);if(V)if(this.getViewportPageBounds().includes(this.getShapePageBounds(V))){if(1===b.length){var z=S.find((function(e){return e.id===b[0]}));this.isShapeOfType(V,"frame")&&this.isShapeOfType(z,"frame")&&z.props.w===(null===V||void 0===V?void 0:V.props.w)&&z.props.h===(null===V||void 0===V?void 0:V.props.h)&&(B=!0)}}else C=m;else C=m}B||(B=T.has(C)),B&&(C=this.getShape(C).parentId);var H=this.getHighestIndexForParent(C),K=[],G=S.map((function(e){var t=T.get(e.id),n=f(f({},e),{},{id:t});return b.includes(e.id)&&(n.parentId=m,K.push(n)),T.has(n.parentId)?n.parentId=T.get(e.parentId):(b.push(n.id),n.index=H,H=(0,ft.getIndexAbove)(H)),n}));if(G.length+this.getCurrentPageShapeIds().size>this.options.maxShapesPerPage)return Jt(this),this;for(var q=x.map((function(e){return f(f({},e),{},{id:(0,ft.assertExists)(E.get(e.id)),fromId:(0,ft.assertExists)(T.get(e.fromId)),toId:(0,ft.assertExists)(T.get(e.toId))})})),W=[],Y=[],X=0,Z=w;X<Z.length;X++){var $,Q,J=Z[X];this.store.has(J.id)||(("image"===J.type&&null!==($=J.props.src)&&void 0!==$&&$.startsWith("data:image")||"video"===J.type&&null!==(Q=J.props.src)&&void 0!==Q&&Q.startsWith("data:video"))&&(Y.push((0,ft.structuredClone)(J)),J.props.src=null),W.push(J))}return Promise.allSettled(Y.map(function(){var e=u(a().mark((function e(t){var n,o,i;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Ct.dataUrlToFile)(t.props.src,t.props.name,null!==(n=t.props.mimeType)&&void 0!==n?n:"image/png");case 2:return o=e.sent,e.next=5,r.getAssetForExternalContent({type:"file",file:o,assetId:t.id});case 5:if(i=e.sent){e.next=9;break}return r.deleteAssets([t.id]),e.abrupt("return");case 9:r.updateAssets([f(f({},i),{},{id:t.id})]);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())),this.run((function(){W.length>0&&r.createAssets(W),r.createShapes(G),r.createBindings(q),s&&r.select.apply(r,c(K.map((function(e){return e.id})))),C!==m&&r.reparentShapes(K.map((function(e){return e.id})),C);var e=G.map((function(e){return r.getShape(e.id)})),t=Pt.Box.Common(e.map((function(e){return r.getShapePageBounds(e)})));if(void 0===g)if((0,lt.isPageId)(C)){var n=r.getViewportPageBounds();g=h||n.includes(Pt.Box.From(t))?t.center:n.center}else{var o=r.getShape(C);g=Ot.Mat.applyToPoint(r.getShapePageTransform(o),r.getShapeGeometry(o).bounds.center)}if(1===K.length){var i=K[0];if(r.isShapeOfType(i,"frame"))for(;r.getShapesAtPoint(g).some((function(e){return r.isShapeOfType(e,"frame")&&e.props.w===i.props.w&&e.props.h===i.props.h}));)g.x+=t.w+16}var a=Pt.Box.Common((0,ft.compact)(K.map((function(e){var t=e.id;return r.getShapePageBounds(t)})))).center,u=kt.Vec.Sub(g,a);r.updateShapes(K.map((function(e){var t=e.id,n=r.getShape(t),o=r.getShapeParentTransform(t).decompose().rotation,i=kt.Vec.Rot(u,-o);return{id:n.id,type:n.type,x:n.x+i.x,y:n.y+i.y}})))})),this}},{key:"getSvgElement",value:function(){var e=u(a().mark((function e(t){var n,r,o=arguments;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=o.length>1&&void 0!==o[1]?o[1]:{},0!==(r="string"===typeof t[0]?t:t.map((function(e){return e.id}))).length){e.next=4;break}return e.abrupt("return",void 0);case 4:return e.abrupt("return",(0,mt.exportToSvg)(this,r,n));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getSvgString",value:function(){var e=u(a().mark((function e(t){var n,r,o,i=arguments;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=i.length>1&&void 0!==i[1]?i[1]:{},e.next=3,this.getSvgElement(t,n);case 3:if(r=e.sent){e.next=6;break}return e.abrupt("return",void 0);case 6:return o=new XMLSerializer,e.abrupt("return",{svg:o.serializeToString(r.svg),width:r.width,height:r.height});case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getSvg",value:function(){var e=u(a().mark((function e(t){var n,r,o=arguments;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=o.length>1&&void 0!==o[1]?o[1]:{},e.next=3,this.getSvgElement(t,n);case 3:if(r=e.sent){e.next=6;break}return e.abrupt("return",void 0);case 6:return e.abrupt("return",r.svg);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_updateInputsFromEvent",value:function(e){var t,n=this,r=this.inputs,o=r.pointerVelocity,i=r.previousScreenPoint,a=r.previousPagePoint,u=r.currentScreenPoint,s=r.currentPagePoint,c=this.store.unsafeGetWithoutCapture(lt.TLINSTANCE_ID).screenBounds,l=(0,st.unsafe__withoutCapture)((function(){return n.getCamera()})),f=l.x,d=l.y,p=l.z,h=e.point.x-c.x,v=e.point.y-c.y,g=null!==(t=e.point.z)&&void 0!==t?t:.5;i.setTo(u),a.setTo(s),u.set(h,v);var y=h/p-f,m=v/p-d;isFinite(y)&&isFinite(m)&&s.set(y,m,g),this.inputs.isPen="pointer"===e.type&&e.isPen,("pointer_down"===e.name||this.inputs.isPinching)&&(o.set(0,0),this.inputs.originScreenPoint.setTo(u),this.inputs.originPagePoint.setTo(s)),this.run((function(){var t,r;n.store.put([{id:lt.TLPOINTER_ID,typeName:"pointer",x:s.x,y:s.y,lastActivityTimestamp:"pointer"===e.type&&e.pointerId===yt.INTERNAL_POINTER_IDS.CAMERA_MOVE&&null!==(t=null===(r=n.store.unsafeGetWithoutCapture(lt.TLPOINTER_ID))||void 0===r?void 0:r.lastActivityTimestamp)&&void 0!==t?t:n._tickManager.now,meta:{}}])}),{history:"ignore"})}},{key:"cancel",value:function(){return this.dispatch({type:"misc",name:"cancel"}),this}},{key:"interrupt",value:function(){return this.dispatch({type:"misc",name:"interrupt"}),this}},{key:"complete",value:function(){return this.dispatch({type:"misc",name:"complete"}),this}},{key:"focus",value:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).focusContainer,t=void 0===e||e;return this.getIsFocused()||(t&&this.focusManager.focus(),this.updateInstanceState({isFocused:!0})),this}},{key:"blur",value:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).blurContainer,t=void 0===e||e;return this.getIsFocused()?(t?this.focusManager.blur():this.complete(),this.updateInstanceState({isFocused:!1}),this):this}},{key:"getIsFocused",value:function(){return this.getInstanceState().isFocused}},{key:"getIsReadonly",value:function(){return this.getInstanceState().isReadonly}},{key:"getSnapshot",value:function(){return(0,pt.getSnapshot)(this.store)}},{key:"loadSnapshot",value:function(e,t){return(0,pt.loadSnapshot)(this.store,e,t),this}},{key:"_zoomToFitPageContentAt100Percent",value:function(){var e=this.getCurrentPageBounds();e&&this.zoomToBounds(e,{immediate:!0,targetZoom:this.getBaseZoom()})}},{key:"_navigateToDeepLink",value:function(e){var t=this;this.run((function(){switch(e.type){case"page":var n=t.getPage(e.pageId);return n&&t.setCurrentPage(n),void t._zoomToFitPageContentAt100Percent();case"shapes":var r,i,a=(0,ft.compact)(e.shapeIds.map((function(e){return t.getShape(e)}))),u={},s=y(a);try{for(s.s();!(i=s.n()).done;){var c,l=i.value,f=t.getAncestorPageId(l);f&&(null!==(c=u[f])&&void 0!==c||(u[f]=[]),u[f].push(l))}}catch(m){s.e(m)}finally{s.f()}var d=null!==(r=Object.entries(u).sort((function(e,t){var n=o(e,2),r=(n[0],n[1]),i=o(t,2);i[0];return i[1].length-r.length}))[0])&&void 0!==r?r:["",[]],p=o(d,2),h=p[0],v=p[1];if(h&&v.length){t.setCurrentPage(h);var g=Pt.Box.Common(v.map((function(e){return t.getShapePageBounds(e)})));t.zoomToBounds(g,{immediate:!0,targetZoom:t.getBaseZoom()})}else t._zoomToFitPageContentAt100Percent();return;case"viewport":if(e.pageId){if(!t.getPage(e.pageId))return void t._zoomToFitPageContentAt100Percent();t.setCurrentPage(e.pageId)}return void t.zoomToBounds(e.bounds,{immediate:!0,inset:0});default:(0,ft.exhaustiveSwitchError)(e)}}))}},{key:"navigateToDeepLink",value:function(e){var t,n;if(e&&"type"in e)return this._navigateToDeepLink(e),this;var r=new URL(null!==(t=null===e||void 0===e?void 0:e.url)&&void 0!==t?t:window.location.href).searchParams.get(null!==(n=null===e||void 0===e?void 0:e.param)&&void 0!==n?n:"d");if(!r)return this._zoomToFitPageContentAt100Percent(),this;try{this._navigateToDeepLink((0,At.parseDeepLinkString)(r))}catch(o){console.warn(o),this._zoomToFitPageContentAt100Percent()}return this}},{key:"createDeepLink",value:function(e){var t,n,r,o=new URL(null!==(t=null===e||void 0===e?void 0:e.url)&&void 0!==t?t:window.location.href);return o.searchParams.set(null!==(n=null===e||void 0===e?void 0:e.param)&&void 0!==n?n:"d",(0,At.createDeepLinkString)(null!==(r=null===e||void 0===e?void 0:e.to)&&void 0!==r?r:{type:"viewport",pageId:1===this.options.maxPages?void 0:this.getCurrentPageId(),bounds:this.getViewportPageBounds()})),o}},{key:"registerDeepLinkListener",value:function(e){var t,n,r=this;if(null!==e&&void 0!==e&&e.getUrl&&(null===e||void 0===e||!e.onChange))throw Error("[tldraw:urlStateSync] If you specify getUrl, you must also specify the onChange callback.");var o=(0,st.computed)("url with state",(function(){var t,n,o,i=null!==(t=null===e||void 0===e||null===(n=e.getUrl)||void 0===n?void 0:n.call(e,r))&&void 0!==t?t:window.location.href;return r.createDeepLink({param:null===e||void 0===e?void 0:e.param,url:i,to:null===e||void 0===e||null===(o=e.getTarget)||void 0===o?void 0:o.call(e,r)}).toString()})),i=null!==(t=null===e||void 0===e?void 0:e.onChange)&&void 0!==t?t:function(){var t,n=r.createDeepLink({param:null===e||void 0===e?void 0:e.param,to:null===e||void 0===e||null===(t=e.getTarget)||void 0===t?void 0:t.call(e,r)});window.history.replaceState({},document.title,n.toString())},a=(0,ft.debounce)((function(e){return e()}),null!==(n=null===e||void 0===e?void 0:e.debounceMs)&&void 0!==n?n:500),u=(0,st.react)("update url on state change",(function(){return i(new URL(o.get()),r)}),{scheduleEffect:a});return function(){u(),a.cancel()}}},{key:"cancelDoubleClick",value:function(){this._clickManager.cancelDoubleClickTimeout()}},{key:"_setShiftKeyTimeout",value:function(){this.inputs.shiftKey=!1,this.dispatch({type:"keyboard",name:"key_up",key:"Shift",shiftKey:this.inputs.shiftKey,ctrlKey:this.inputs.ctrlKey,altKey:this.inputs.altKey,metaKey:this.inputs.metaKey,accelKey:(0,Rt.isAccelKey)(this.inputs),code:"ShiftLeft"})}},{key:"_setAltKeyTimeout",value:function(){this.inputs.altKey=!1,this.dispatch({type:"keyboard",name:"key_up",key:"Alt",shiftKey:this.inputs.shiftKey,ctrlKey:this.inputs.ctrlKey,altKey:this.inputs.altKey,metaKey:this.inputs.metaKey,accelKey:(0,Rt.isAccelKey)(this.inputs),code:"AltLeft"})}},{key:"_setCtrlKeyTimeout",value:function(){this.inputs.ctrlKey=!1,this.dispatch({type:"keyboard",name:"key_up",key:"Ctrl",shiftKey:this.inputs.shiftKey,ctrlKey:this.inputs.ctrlKey,altKey:this.inputs.altKey,metaKey:this.inputs.metaKey,accelKey:(0,Rt.isAccelKey)(this.inputs),code:"ControlLeft"})}},{key:"_setMetaKeyTimeout",value:function(){this.inputs.metaKey=!1,this.dispatch({type:"keyboard",name:"key_up",key:"Meta",shiftKey:this.inputs.shiftKey,ctrlKey:this.inputs.ctrlKey,altKey:this.inputs.altKey,metaKey:this.inputs.metaKey,accelKey:(0,Rt.isAccelKey)(this.inputs),code:"MetaLeft"})}},{key:"dispatch",value:function(e){return this._pendingEventsForNextTick.push(e),"pointer"===e.type&&"pointer_move"===e.name||"wheel"===e.type||"pinch"===e.type||this._flushEventsForTick(0),this}},{key:"_flushEventsForTick",value:function(e){var t=this;this.run((function(){if(t._pendingEventsForNextTick.length>0){var n=c(t._pendingEventsForNextTick);t._pendingEventsForNextTick.length=0;var r,o=y(n);try{for(o.s();!(r=o.n()).done;){var i=r.value;t._flushEventForTick(i)}}catch(a){o.e(a)}finally{o.f()}}e>0&&t.root.handleEvent({type:"misc",name:"tick",elapsed:e}),t.scribbles.tick(e)}))}},{key:"_flushEventForTick",value:function(e){var t=this;if(this.getCrashingError())return this;var n=this.inputs,r=e.type;if("misc"===e.type)return"cancel"!==e.name&&"complete"!==e.name||(this.inputs.isDragging=!1,this.inputs.isPanning&&(this.inputs.isPanning=!1,this.inputs.isSpacebarPanning=!1,this.setCursor({type:this._prevCursor,rotation:0}))),void this.root.handleEvent(e);e.shiftKey?(clearTimeout(this._shiftKeyTimeout),this._shiftKeyTimeout=-1,n.shiftKey=!0):!e.shiftKey&&n.shiftKey&&-1===this._shiftKeyTimeout&&(this._shiftKeyTimeout=this.timers.setTimeout(this._setShiftKeyTimeout,150)),e.altKey?(clearTimeout(this._altKeyTimeout),this._altKeyTimeout=-1,n.altKey=!0):!e.altKey&&n.altKey&&-1===this._altKeyTimeout&&(this._altKeyTimeout=this.timers.setTimeout(this._setAltKeyTimeout,150)),e.ctrlKey?(clearTimeout(this._ctrlKeyTimeout),this._ctrlKeyTimeout=-1,n.ctrlKey=!0):!e.ctrlKey&&n.ctrlKey&&-1===this._ctrlKeyTimeout&&(this._ctrlKeyTimeout=this.timers.setTimeout(this._setCtrlKeyTimeout,150)),e.metaKey?(clearTimeout(this._metaKeyTimeout),this._metaKeyTimeout=-1,n.metaKey=!0):!e.metaKey&&n.metaKey&&-1===this._metaKeyTimeout&&(this._metaKeyTimeout=this.timers.setTimeout(this._setMetaKeyTimeout,150));var o=n.originPagePoint,i=n.currentPagePoint;n.isPointing||(n.isDragging=!1);var a=this.store.unsafeGetWithoutCapture(lt.TLINSTANCE_ID),u=this.store.get(this._getCurrentPageStateId()),s=this._cameraOptions.__unsafe__getWithoutCapture();switch(r){case"pinch":if(s.isLocked)return;switch(clearTimeout(this._longPressTimeout),this._updateInputsFromEvent(e),e.name){case"pinch_start":if(n.isPinching)return;return void(n.isEditing||(this._pinchStart=this.getCamera().z,this._selectedShapeIdsAtPointerDown.length||(this._selectedShapeIdsAtPointerDown=c(u.selectedShapeIds)),this._didPinch=!0,n.isPinching=!0,this.interrupt()));case"pinch":if(!n.isPinching)return;var l=e.point.z,d=void 0===l?1:l,p=e.delta,h=p.x,v=p.y,g=kt.Vec.SubXY(e.point,a.screenBounds.x,a.screenBounds.y),y=g.x,m=g.y;this.stopCameraAnimation(),a.followingUserId&&this.stopFollowingUser();var b=(0,st.unsafe__withoutCapture)((function(){return t.getCamera()})),w=b.x,S=b.y,x=b.z,P=s.panSpeed,O=s.zoomSpeed;return void this._setCamera(new kt.Vec(w+h*P/x-y/x+y/(d*O),S+v*P/x-m/x+m/(d*O),d*O),{immediate:!0});case"pinch_end":if(!n.isPinching)return this;n.isPinching=!1;var k=this._selectedShapeIdsAtPointerDown;return this.setSelectedShapes(this._selectedShapeIdsAtPointerDown),this._selectedShapeIdsAtPointerDown=[],void(this._didPinch&&(this._didPinch=!1,k.length>0&&this.once("tick",(function(){t._didPinch||t.setSelectedShapes(k)}))))}case"wheel":if(s.isLocked)return;this._updateInputsFromEvent(e);var _=s.panSpeed,j=s.zoomSpeed,I=s.wheelBehavior;if("none"!==I){this.stopCameraAnimation(),a.followingUserId&&this.stopFollowingUser();var T=(0,st.unsafe__withoutCapture)((function(){return t.getCamera()})),E=T.x,C=T.y,M=T.z,A=e.delta,D=A.x,R=A.y,N=A.z,L=void 0===N?0:N,U=I;switch(n.ctrlKey&&(U="pan"===I?"zoom":"pan"),U){case"zoom":var F,B=this.inputs.currentScreenPoint,V=B.x,z=B.y,H=L;"zoom"===I&&(H=Math.abs(R)>10?10*Math.sign(R)/100:R/100);var K=M+(null!==(F=H)&&void 0!==F?F:0)*j*M;return this._setCamera(new kt.Vec(E+(V/K-V)-(V/M-V),C+(z/K-z)-(z/M-z),K),{immediate:!0}),void this.maybeTrackPerformance("Zooming");case"pan":return this._setCamera(new kt.Vec(E+D*_/M,C+R*_/M,M),{immediate:!0}),void this.maybeTrackPerformance("Panning")}}break;case"pointer":if(n.isPinching)return;this._updateInputsFromEvent(e);var G=e.isPen,q=a.isPenMode;switch(e.name){case"pointer_down":if(q&&!G)return;if(this.inputs.isPanning||(this._longPressTimeout=this.timers.setTimeout((function(){var n=t.getViewportScreenBounds();t.dispatch(f(f({},e),{},{point:t.inputs.originScreenPoint.clone().addXY(n.x,n.y),name:"long_press"}))}),this.options.longPressDurationMs)),this._selectedShapeIdsAtPointerDown=this.getSelectedShapeIds(),e.button===yt.LEFT_MOUSE_BUTTON&&(this.capturedPointerId=e.pointerId),n.buttons.add(e.button),n.isPointing=!0,n.isDragging=!1,!q&&G&&this.updateInstanceState({isPenMode:!0}),e.button===yt.STYLUS_ERASER_BUTTON?(this._restoreToolId=this.getCurrentToolId(),this.complete(),this.setCurrentTool("eraser")):e.button===yt.MIDDLE_MOUSE_BUTTON&&(this.inputs.isPanning||(this._prevCursor=this.getInstanceState().cursor.type),this.inputs.isPanning=!0,clearTimeout(this._longPressTimeout)),this.inputs.isPanning)return this.stopCameraAnimation(),this.setCursor({type:"grabbing",rotation:0}),this;break;case"pointer_move":if(!G&&q)return;var W=(0,st.unsafe__withoutCapture)((function(){return t.getCamera()})),Y=W.x,X=W.y,Z=W.z;if(this.inputs.isPanning&&this.inputs.isPointing){var $=this.inputs,Q=$.currentScreenPoint,J=$.previousScreenPoint,ee=s.panSpeed,te=kt.Vec.Sub(Q,J);return this.setCamera(new kt.Vec(Y+te.x*ee/Z,X+te.y*ee/Z,Z),{immediate:!0}),void this.maybeTrackPerformance("Panning")}n.isPointing&&!n.isDragging&&kt.Vec.Dist2(o,i)*this.getZoomLevel()>(a.isCoarsePointer?this.options.coarseDragDistanceSquared:this.options.dragDistanceSquared)/Z&&(n.isDragging=!0,clearTimeout(this._longPressTimeout));break;case"pointer_up":if(n.isDragging=!1,n.isPointing=!1,clearTimeout(this._longPressTimeout),n.buttons.delete(e.button),a.isPenMode&&!G)return;if(this.capturedPointerId===e.pointerId&&(this.capturedPointerId=null,e.button=0),n.isPanning){n.keys.has("Space")||(n.isPanning=!1,n.isSpacebarPanning=!1);var ne=this.inputs.pointerVelocity,re=Math.min(2,ne.len());switch(e.button){case yt.LEFT_MOUSE_BUTTON:this.setCursor({type:"grab",rotation:0});break;case yt.MIDDLE_MOUSE_BUTTON:this.inputs.keys.has(" ")?this.setCursor({type:"grab",rotation:0}):this.setCursor({type:this._prevCursor,rotation:0})}re>0&&this.slideCamera({speed:re,direction:ne})}else e.button===yt.STYLUS_ERASER_BUTTON&&(this.complete(),this.setCurrentTool(this._restoreToolId))}break;case"keyboard":switch("ShiftRight"===e.key&&(e.key="ShiftLeft"),"AltRight"===e.key&&(e.key="AltLeft"),"ControlRight"===e.code&&(e.code="ControlLeft"),"MetaRight"===e.code&&(e.code="MetaLeft"),e.name){case"key_down":if(n.keys.add(e.code),"Space"!==e.code||e.ctrlKey||(this.inputs.isPanning||(this._prevCursor=a.cursor.type),this.inputs.isPanning=!0,this.inputs.isSpacebarPanning=!0,clearTimeout(this._longPressTimeout),this.setCursor({type:this.inputs.isPointing?"grabbing":"grab",rotation:0})),this.inputs.isSpacebarPanning){var oe;switch(e.code){case"ArrowUp":oe=new kt.Vec(0,-1);break;case"ArrowRight":oe=new kt.Vec(1,0);break;case"ArrowDown":oe=new kt.Vec(0,1);break;case"ArrowLeft":oe=new kt.Vec(-1,0)}if(oe){var ie=this.getViewportPageBounds(),ae=ie.clone().translate(oe.mulV({x:ie.w,y:ie.h}));this._animateToViewport(ae,{animation:{duration:320}})}}break;case"key_up":n.keys.delete(e.code),"Space"===e.code&&(this.inputs.buttons.has(yt.MIDDLE_MOUSE_BUTTON)||(this.inputs.isPanning=!1,this.inputs.isSpacebarPanning=!1,this.setCursor({type:this._prevCursor,rotation:0})))}}if("pointer"===e.type){e.button===yt.MIDDLE_MOUSE_BUTTON?e.name="middle_click":e.button===yt.RIGHT_MOUSE_BUTTON&&(e.name="right_click");var ue=this.store.unsafeGetWithoutCapture(lt.TLINSTANCE_ID).isPenMode;if(e.isPen===ue){var se=this._clickManager.handlePointerEvent(e);if(e.name!==se.name)return this.root.handleEvent(e),this.emit("event",e),this.root.handleEvent(se),void this.emit("event",se)}}return this.root.handleEvent(e),this.emit("event",e),"pointer"===e.type&&"pointer_down"===e.name&&this.menus.clearOpenMenus(),this}},{key:"maybeTrackPerformance",value:function(e){var t=this;Mt.debugFlags.measurePerformance.get()&&(this.performanceTracker.isStarted()?clearTimeout(this.performanceTrackerTimeout):this.performanceTracker.start(e),this.performanceTrackerTimeout=this.timers.setTimeout((function(){t.performanceTracker.stop()}),50))}}])}((at=dt.default,it=[st.computed],ot=[st.computed],rt=[st.computed],nt=[st.computed],tt=[st.computed],et=[st.computed],Je=[st.computed],Qe=[st.computed],$e=[st.computed],Ze=[st.computed],Xe=[st.computed],Ye=[st.computed],We=[st.computed],qe=[st.computed],Ge=[st.computed],Ke=[st.computed],He=[st.computed],ze=[st.computed],Ve=[st.computed],Be=[st.computed],Fe=[st.computed],Ue=[st.computed],Le=[st.computed],Ne=[st.computed],Re=[st.computed],De=[st.computed],Ae=[st.computed],Me=[st.computed],Ce=[st.computed],Ee=[st.computed],Te=[st.computed],Ie=[st.computed],je=[st.computed],_e=[st.computed],ke=[st.computed],Oe=[st.computed],Pe=[st.computed],xe=[st.computed],Se=[st.computed],we=[st.computed],be=[st.computed],me=[st.computed],ye=[st.computed],ge=[st.computed],ve=[st.computed],he=[st.computed],pe=[st.computed],de=[st.computed],fe=[st.computed],le=[st.computed],ce=[st.computed],se=[st.computed],ue=[st.computed],ae=[st.computed],ie=[st.computed],oe=[st.computed],re=[st.computed],ne=[st.computed],te=[st.computed],ee=[st.computed],J=[st.computed],Q=[st.computed],$=[st.computed],Z=[st.computed],X=[(0,st.computed)({isEqual:function(e,t){return e.equals(t)}})],Y=[st.computed],W=[st.computed],q=[st.computed],G=[ft.bind],K=[ft.bind],H=[ft.bind],z=[ft.bind],at));function Jt(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.getCurrentPageId(),n=e.getPage(t).name;e.emit("max-shapes",{name:n,pageId:t,count:e.options.maxShapesPerPage})}function en(e,t){if(!t)return e;for(var n=null,r=Object.entries(t),i=0,a=r.length;i<a;i++){var u=o(r[i],2),s=u[0],c=u[1];if(void 0!==c&&("id"!==s&&"type"!==s&&"typeName"!==s&&c!==e[s]))if(n||(n=f({},e)),"props"!==s&&"meta"!==s)n[s]=c;else{n[s]=f({},e[s]);for(var l=0,d=Object.entries(c);l<d.length;l++){var p=o(d[l],2),h=p[0],v=p[1];n[s][h]=v}}}return n||e}function tn(e,t,n){var r=e.getShape(t);if(r){n.push(r);for(var o=e.getSortedChildIdsForParent(t),i=0,a=o.length;i<a;i++)tn(e,o[i],n)}}function nn(e,t,n){var r;if(e.run((function(){var o=e.store.extractingChanges((function(){var o,i=new Set,a=new Set,u=y(t);try{for(u.s();!(o=u.n()).done;){var s=o.value;if(e.getShape(s)){var l,f=y(e.getBindingsInvolvingShape(s));try{for(f.s();!(l=f.n()).done;){var d=l.value,p=t.has(d.fromId),h=t.has(d.toId);p&&h?i.add(d.id):p&&h||a.add(d.id)}}catch(v){f.e(v)}finally{f.f()}}}}catch(v){u.e(v)}finally{u.f()}e.deleteBindings(c(a),{isolateShapes:!0});try{r=ft.Result.ok(n(i))}catch(g){r=ft.Result.err(g)}}));e.store.applyDiff((0,ct.reverseRecordsDiff)(o))}),{history:"ignore"}),r.ok)return r.value;throw r.error}function rn(e,t){if(!t.constraints)throw Error("Should have constraints here");var n=t.constraints.padding,r=n.x,o=n.y,i=e.getViewportScreenBounds(),a=Pt.Box.From(t.constraints.bounds);return{zx:(i.w-2*r)/a.w,zy:(i.h-2*o)/a.h}}D(ut=function(e){var t;return[,,,b(null!==(t=null===e||void 0===e?void 0:e[k("metadata")])&&void 0!==t?t:null)]}(at),1,"getIsShapeHiddenCache",it,Qt),D(ut,1,"getCanUndo",ot,Qt),D(ut,1,"getCanRedo",rt,Qt),D(ut,1,"getPath",nt,Qt),D(ut,1,"getCurrentTool",tt,Qt),D(ut,1,"getCurrentToolId",et,Qt),D(ut,1,"getDocumentSettings",Je,Qt),D(ut,1,"getInstanceState",Qe,Qt),D(ut,1,"getOpenMenus",$e,Qt),D(ut,1,"getIsMenuOpen",Ze,Qt),D(ut,1,"getPageStates",Xe,Qt),D(ut,1,"_getPageStatesQuery",Ye,Qt),D(ut,1,"getCurrentPageState",We,Qt),D(ut,1,"_getCurrentPageStateId",qe,Qt),D(ut,1,"getSelectedShapeIds",Ge,Qt),D(ut,1,"getSelectedShapes",Ke,Qt),D(ut,1,"getOnlySelectedShapeId",He,Qt),D(ut,1,"getOnlySelectedShape",ze,Qt),D(ut,1,"getSelectionPageBounds",Ve,Qt),D(ut,1,"getSelectionRotation",Be,Qt),D(ut,1,"getSelectionRotatedPageBounds",Fe,Qt),D(ut,1,"getSelectionRotatedScreenBounds",Ue,Qt),D(ut,1,"getFocusedGroupId",Le,Qt),D(ut,1,"getFocusedGroup",Ne,Qt),D(ut,1,"getEditingShapeId",Re,Qt),D(ut,1,"getEditingShape",De,Qt),D(ut,1,"getHoveredShapeId",Ae,Qt),D(ut,1,"getHoveredShape",Me,Qt),D(ut,1,"getHintingShapeIds",Ce,Qt),D(ut,1,"getHintingShape",Ee,Qt),D(ut,1,"getErasingShapeIds",Te,Qt),D(ut,1,"getErasingShapes",Ie,Qt),D(ut,1,"_unsafe_getCameraId",je,Qt),D(ut,1,"getCamera",_e,Qt),D(ut,1,"getViewportPageBoundsForFollowing",ke,Qt),D(ut,1,"getCameraForFollowing",Oe,Qt),D(ut,1,"getZoomLevel",Pe,Qt),D(ut,1,"getViewportScreenBounds",xe,Qt),D(ut,1,"getViewportScreenCenter",Se,Qt),D(ut,1,"getViewportPageBounds",we,Qt),D(ut,1,"_getCollaboratorsQuery",be,Qt),D(ut,1,"getCollaborators",me,Qt),D(ut,1,"getCollaboratorsOnCurrentPage",ye,Qt),D(ut,1,"getRenderingShapes",ge,Qt),D(ut,1,"_getAllPagesQuery",ve,Qt),D(ut,1,"getPages",he,Qt),D(ut,1,"getCurrentPageId",pe,Qt),D(ut,1,"getCurrentPageShapeIdsSorted",de,Qt),D(ut,1,"_getAllAssetsQuery",fe,Qt),D(ut,1,"_getShapeGeometryCache",le,Qt),D(ut,1,"_getShapeHandlesCache",ce,Qt),D(ut,1,"_getShapePageTransformCache",se,Qt),D(ut,1,"_getShapePageBoundsCache",ue,Qt),D(ut,1,"_getShapeClipPathCache",ae,Qt),D(ut,1,"_getShapeMaskCache",ie,Qt),D(ut,1,"_getShapeMaskedPageBoundsCache",oe,Qt),D(ut,1,"_notVisibleShapes",re,Qt),D(ut,1,"getCulledShapes",ne,Qt),D(ut,1,"getCurrentPageBounds",te,Qt),D(ut,1,"getCurrentPageShapes",ee,Qt),D(ut,1,"getCurrentPageShapesSorted",J,Qt),D(ut,1,"getCurrentPageRenderingShapesSorted",Q,Qt),D(ut,1,"_getBindingsIndexCache",$,Qt),D(ut,1,"_getSelectionSharedStyles",Z,Qt),D(ut,1,"getSharedStyles",X,Qt),D(ut,1,"getSharedOpacity",Y,Qt),D(ut,1,"getIsFocused",W,Qt),D(ut,1,"getIsReadonly",q,Qt),D(ut,1,"_setShiftKeyTimeout",G,Qt),D(ut,1,"_setAltKeyTimeout",K,Qt),D(ut,1,"_setCtrlKeyTimeout",H,Qt),D(ut,1,"_setMetaKeyTimeout",z,Qt),A(ut,Qt)},51851:function(e,t,n){"use strict";var r,o=n(34579).default,i=n(17383).default,a=n(43693).default,u=n(50883).default,s=Object.defineProperty,c=Object.getOwnPropertyDescriptor,l=Object.getOwnPropertyNames,f=Object.prototype.hasOwnProperty,d={};!function(e,t){for(var n in t)s(e,n,{get:t[n],enumerable:!0})}(d,{BindingUtil:function(){return p}}),e.exports=(r=d,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,i=u(l(t));try{var a=function(){var i=o.value;f.call(e,i)||i===n||s(e,i,{get:function(){return t[i]},enumerable:!(r=c(t,i))||r.enumerable})};for(i.s();!(o=i.n()).done;)a()}catch(d){i.e(d)}finally{i.f()}}return e}(s({},"__esModule",{value:!0}),r));var p=o((function e(t){i(this,e),this.editor=t}));a(p,"props",void 0),a(p,"migrations",void 0),a(p,"type",void 0)},71808:function(e,t,n){"use strict";var r,o=n(85715).default,i=n(50883).default,a=Object.defineProperty,u=Object.getOwnPropertyDescriptor,s=Object.getOwnPropertyNames,c=Object.prototype.hasOwnProperty,l={};!function(e,t){for(var n in t)a(e,n,{get:t[n],enumerable:!0})}(l,{bindingsIndex:function(){return p}}),e.exports=(r=l,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,l=i(s(t));try{var f=function(){var i=o.value;c.call(e,i)||i===n||a(e,i,{get:function(){return t[i]},enumerable:!(r=u(t,i))||r.enumerable})};for(l.s();!(o=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(a({},"__esModule",{value:!0}),r));var f=n(81501),d=n(30645),p=function(e){var t=e.store,n=t.query.filterHistory("binding"),r=t.query.records("binding");function a(){var e,t=r.get(),n=new Map,o=i(t);try{for(o.s();!(e=o.n()).done;){var a=e.value,u=a.fromId,s=a.toId,c=n.get(u);c?c.push(a):n.set(u,[a]);var l=n.get(s);l?l.push(a):n.set(s,[a])}}catch(f){o.e(f)}finally{o.f()}return n}return(0,f.computed)("arrowBindingsIndex",(function(e,t){var r;if((0,f.isUninitialized)(e))return a();var u=e,s=n.getDiffSince(t);if(s===f.RESET_VALUE)return a();var c=void 0;function l(e){var t;null!==(t=c)&&void 0!==t||(c=new Map(u));var n=c.get(e.fromId),r=null===n||void 0===n?void 0:n.filter((function(t){return t.id!==e.id}));null!==r&&void 0!==r&&r.length?c.set(e.fromId,r):c.delete(e.fromId);var o=c.get(e.toId),i=null===o||void 0===o?void 0:o.filter((function(t){return t.id!==e.id}));null!==i&&void 0!==i&&i.length?c.set(e.toId,i):c.delete(e.toId)}function p(e){var t;null!==(t=c)&&void 0!==t||(c=new Map(u));var n=c.get(e);return n?n===u.get(e)&&(n=n.slice(0),c.set(e,n)):(n=[],c.set(e,n)),n}function h(e){p(e.fromId).push(e),p(e.toId).push(e)}var v,g=i(s);try{for(g.s();!(v=g.n()).done;){var y,m=v.value,b=i((0,d.objectMapValues)(m.added));try{for(b.s();!(y=b.n()).done;){h(y.value)}}catch(j){b.e(j)}finally{b.f()}var w,S=i((0,d.objectMapValues)(m.updated));try{for(S.s();!(w=S.n()).done;){var x=o(w.value,2),P=x[0],O=x[1];l(P),h(O)}}catch(j){S.e(j)}finally{S.f()}var k,_=i((0,d.objectMapValues)(m.removed));try{for(_.s();!(k=_.n()).done;){l(k.value)}}catch(j){_.e(j)}finally{_.f()}}}catch(j){g.e(j)}finally{g.f()}return null!==(r=c)&&void 0!==r?r:u}))}},30127:function(e,t,n){"use strict";var r,o=n(50883).default,i=Object.defineProperty,a=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,c={};!function(e,t){for(var n in t)i(e,n,{get:t[n],enumerable:!0})}(c,{notVisibleShapes:function(){return f}}),e.exports=(r=c,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var c,l=o(u(t));try{var f=function(){var o=c.value;s.call(e,o)||o===n||i(e,o,{get:function(){return t[o]},enumerable:!(r=a(t,o))||r.enumerable})};for(l.s();!(c=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(i({},"__esModule",{value:!0}),r));var l=n(81501);var f=function(e){function t(e){var t=e.getCurrentPageShapeIds(),n=e.getViewportPageBounds(),r=new Set;return t.forEach((function(t){(function(e,t,n){var r=e.getShapeMaskedPageBounds(t);return void 0===r||!n.includes(r)})(e,t,n)&&r.add(t)})),r}return(0,l.computed)("getCulledShapes",(function(n){if((0,l.isUninitialized)(n))return t(e);var r=t(e);if(n.size!==r.size)return r;var i,a=o(n);try{for(a.s();!(i=a.n()).done;){var u=i.value;if(!r.has(u))return r}}catch(s){a.e(s)}finally{a.f()}return n}))}},91889:function(e,t,n){"use strict";var r,o=n(85715).default,i=n(41132).default,a=n(12897).default,u=n(50883).default,s=Object.defineProperty,c=Object.getOwnPropertyDescriptor,l=Object.getOwnPropertyNames,f=Object.prototype.hasOwnProperty,d={};!function(e,t){for(var n in t)s(e,n,{get:t[n],enumerable:!0})}(d,{parentsToChildren:function(){return g}}),e.exports=(r=d,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,i=u(l(t));try{var a=function(){var i=o.value;f.call(e,i)||i===n||s(e,i,{get:function(){return t[i]},enumerable:!(r=c(t,i))||r.enumerable})};for(i.s();!(o=i.n()).done;)a()}catch(d){i.e(d)}finally{i.f()}}return e}(s({},"__esModule",{value:!0}),r));var p=n(81501),h=n(85191),v=n(30645),g=function(e){var t=e.query.ids("shape"),n=e.query.filterHistory("shape");function r(){var n={},r=t.get(),o=Array(r.size);return r.forEach((function(t){return o.push(e.get(t))})),o.sort(v.sortByIndex),o.forEach((function(e){n[e.parentId]||(n[e.parentId]=[]),n[e.parentId].push(e.id)})),n}return(0,p.computed)("parentsToChildrenWithIndexes",(function(t,s){var c;if((0,p.isUninitialized)(t))return r();var l=n.getDiffSince(s);if(l===p.RESET_VALUE)return r();if(0===l.length)return t;for(var f,d=null,g=function(e){d||(d=a({},t)),d[e]?d[e]===t[e]&&(d[e]=i(d[e])):d[e]=[]},y=new Set,m=0,b=l.length;m<b;m++){f=l[m];for(var w=0,S=Object.values(f.added);w<S.length;w++){var x=S[w];(0,h.isShape)(x)&&(g(x.parentId),d[x.parentId].push(x.id),y.add(d[x.parentId]))}for(var P=0,O=Object.values(f.updated);P<O.length;P++){var k=o(O[P],2),_=k[0],j=k[1];if((0,h.isShape)(j)&&(0,h.isShape)(_))if(_.parentId!==j.parentId)g(_.parentId),g(j.parentId),d[_.parentId].splice(d[_.parentId].indexOf(j.id),1),d[j.parentId].push(j.id),y.add(d[j.parentId]);else if(_.index!==j.index){g(j.parentId);var I=d[j.parentId].indexOf(j.id);d[j.parentId][I]=j.id,y.add(d[j.parentId])}}for(var T=0,E=Object.values(f.removed);T<E.length;T++){var C=E[T];(0,h.isShape)(C)&&(g(C.parentId),d[C.parentId].splice(d[C.parentId].indexOf(C.id),1))}}var M,A=u(y);try{for(A.s();!(M=A.n()).done;){var D=M.value,R=(0,v.compact)(D.map((function(t){return e.get(t)})));R.sort(v.sortByIndex),D.splice.apply(D,[0,D.length].concat(i(R.map((function(e){return e.id})))))}}catch(N){A.e(N)}finally{A.f()}return null!==(c=d)&&void 0!==c?c:t}))}},2214:function(e,t,n){"use strict";var r,o=n(85715).default,i=n(41132).default,a=n(50883).default,u=Object.defineProperty,s=Object.getOwnPropertyDescriptor,c=Object.getOwnPropertyNames,l=Object.prototype.hasOwnProperty,f={};!function(e,t){for(var n in t)u(e,n,{get:t[n],enumerable:!0})}(f,{deriveShapeIdsInCurrentPage:function(){return g}}),e.exports=(r=f,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,i=a(c(t));try{var f=function(){var i=o.value;l.call(e,i)||i===n||u(e,i,{get:function(){return t[i]},enumerable:!(r=s(t,i))||r.enumerable})};for(i.s();!(o=i.n()).done;)f()}catch(d){i.e(d)}finally{i.f()}}return e}(u({},"__esModule",{value:!0}),r));var d=n(81501),p=n(75881),h=n(85191),v=function(e,t,n){for(;!(0,h.isPageId)(n.parentId);){var r=e.get(n.parentId);if(!r)return!1;n=r}return n.parentId===t},g=function(e,t){var n=e.query.ids("shape"),r=null;function u(){var o=t();return r=o,new Set(i(n.get()).filter((function(t){return v(e,o,e.get(t))})))}return(0,d.computed)("_shapeIdsInCurrentPage",(function(n,i){if((0,d.isUninitialized)(n))return u();var s=t();if(s!==r)return u();var c=e.history.getDiffSince(i);if(c===d.RESET_VALUE)return u();var l,f=new p.IncrementalSetConstructor(n),g=a(c);try{for(g.s();!(l=g.n()).done;){for(var y=l.value,m=0,b=Object.values(y.added);m<b.length;m++){var w=b[m];(0,h.isShape)(w)&&v(e,s,w)&&f.add(w.id)}for(var S=0,x=Object.values(y.updated);S<x.length;S++){var P=o(x[S],2),O=(P[0],P[1]);(0,h.isShape)(O)&&(v(e,s,O)?f.add(O.id):f.remove(O.id))}for(var k=0,_=Object.keys(y.removed);k<_.length;k++){var j=_[k];(0,h.isShapeId)(j)&&f.remove(j)}}}catch(T){g.e(T)}finally{g.f()}var I=f.get();return I?(0,d.withDiff)(I.value,I.diff):n}))}},23041:function(e,t,n){"use strict";var r,o=n(12897).default,i=n(17383).default,a=n(34579).default,u=n(11303).default,s=n(50883).default,c=Object.create,l=Object.defineProperty,f=Object.getOwnPropertyDescriptor,d=Object.getOwnPropertyNames,p=Object.prototype.hasOwnProperty,h=function(e,t){return(t=Symbol[e])?t:Symbol.for("Symbol."+e)},v=function(e){throw TypeError(e)},g=function(e,t,n){return t in e?l(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},y=function(e,t){return l(e,"name",{value:t,configurable:!0})},m=["class","method","getter","setter","accessor","field","value","get","set"],b=function(e){return void 0!==e&&"function"!==typeof e?v("Function expected"):e},w=function(e,t,n,r,o){return{kind:m[e],name:t,metadata:r,addInitializer:function(e){return n._?v("Already initialized"):o.push(b(e||null))}}},S=function(e,t){return g(t,h("metadata"),e[3])},x=function(e,t,n,r,o,i){var a,s,c,d,p,h=7&t,g=!!(8&t),x=!!(16&t),P=h>3?e.length+1:h?g?1:2:0,O=m[h+5],T=h>3&&(e[P-1]=[]),E=e[P]||(e[P]=[]),C=h&&(!x&&!g&&(o=o.prototype),h<5&&(h>3||!x)&&f(h<4?o:u("set",u("get",{},n,(function(){return _(this,i)})),n,(function(e){return j(this,i,e)})),n));h?x&&h<4&&y(i,(h>2?"set ":h>1?"get ":"")+n):y(o,n);for(var M=r.length-1;M>=0;M--)d=w(h,n,c={},e[3],E),h&&(d.static=g,d.private=x,p=d.access={has:x?function(e){return k(o,e)}:function(e){return n in e}},3^h&&(p.get=x?function(e){return(1^h?_:I)(e,o,4^h?i:C.get)}:function(e){return e[n]}),h>2&&(p.set=x?function(e,t){return j(e,o,t,4^h?i:C.set)}:function(e,t){return e[n]=t})),s=(0,r[M])(h?h<4?x?i:C[O]:h>4?void 0:{get:C.get,set:C.set}:o,d),c._=1,4^h||void 0===s?b(s)&&(h>4?T.unshift(s):h?x?i=s:C[O]=s:o=s):"object"!==typeof s||null===s?v("Object expected"):(b(a=s.get)&&(C.get=a),b(a=s.set)&&(C.set=a),b(a=s.init)&&T.unshift(a));return h||S(e,o),C&&l(o,n,C),x?4^h?i:C:o},P=function(e,t,n){return g(e,"symbol"!==typeof t?t+"":t,n)},O=function(e,t,n){return t.has(e)||v("Cannot "+n)},k=function(e,t){return Object(t)!==t?v('Cannot use the "in" operator on this value'):e.has(t)},_=function(e,t,n){return O(e,t,"read from private field"),n?n.call(e):t.get(e)},j=function(e,t,n,r){return O(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n},I=function(e,t,n){return O(e,t,"access private method"),n},T={};!function(e,t){for(var n in t)l(e,n,{get:t[n],enumerable:!0})}(T,{ClickManager:function(){return R}}),e.exports=(r=T,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,i=s(d(t));try{var a=function(){var i=o.value;p.call(e,i)||i===n||l(e,i,{get:function(){return t[i]},enumerable:!(r=f(t,i))||r.enumerable})};for(i.s();!(o=i.n()).done;)a()}catch(u){i.e(u)}finally{i.f()}}return e}(l({},"__esModule",{value:!0}),r));var E,C,M,A=n(30645),D=n(45650);C=[A.bind],E=[A.bind];var R=function(){return a((function e(t){i(this,e),this.editor=t,function(e,t,n,r){for(var o=0,i=e[t>>1],a=i&&i.length;o<a;o++)1&t?i[o].call(n):r=i[o].call(n,r)}(M,5,this),P(this,"_clickId",""),P(this,"_clickTimeout"),P(this,"_clickScreenPoint"),P(this,"_previousScreenPoint"),P(this,"_clickState","idle"),P(this,"lastPointerInfo",{})}),[{key:"_getClickTimeout",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(0,A.uniqueId)();this._clickId=n,clearTimeout(this._clickTimeout),this._clickTimeout=this.editor.timers.setTimeout((function(){if(t._clickState===e&&t._clickId===n){switch(t._clickState){case"pendingTriple":t.editor.dispatch(o(o({},t.lastPointerInfo),{},{type:"click",name:"double_click",phase:"settle"}));break;case"pendingQuadruple":t.editor.dispatch(o(o({},t.lastPointerInfo),{},{type:"click",name:"triple_click",phase:"settle"}));break;case"pendingOverflow":t.editor.dispatch(o(o({},t.lastPointerInfo),{},{type:"click",name:"quadruple_click",phase:"settle"}))}t._clickState="idle"}}),"idle"===e||"pendingDouble"===e?this.editor.options.doubleClickDurationMs:this.editor.options.multiClickDurationMs)}},{key:"clickState",get:function(){return this._clickState}},{key:"handlePointerEvent",value:function(e){switch(e.name){case"pointer_down":if(!this._clickState)return e;switch(this._clickScreenPoint=D.Vec.From(e.point),this._previousScreenPoint&&D.Vec.Dist2(this._previousScreenPoint,this._clickScreenPoint)>Math.pow(40,2)&&(this._clickState="idle"),this._previousScreenPoint=this._clickScreenPoint,this.lastPointerInfo=e,this._clickState){case"pendingDouble":return this._clickState="pendingTriple",this._clickTimeout=this._getClickTimeout(this._clickState),o(o({},e),{},{type:"click",name:"double_click",phase:"down"});case"pendingTriple":return this._clickState="pendingQuadruple",this._clickTimeout=this._getClickTimeout(this._clickState),o(o({},e),{},{type:"click",name:"triple_click",phase:"down"});case"pendingQuadruple":return this._clickState="pendingOverflow",this._clickTimeout=this._getClickTimeout(this._clickState),o(o({},e),{},{type:"click",name:"quadruple_click",phase:"down"});case"idle":this._clickState="pendingDouble";break;case"pendingOverflow":this._clickState="overflow"}return this._clickTimeout=this._getClickTimeout(this._clickState),e;case"pointer_up":if(!this._clickState)return e;switch(this._clickScreenPoint=D.Vec.From(e.point),this._clickState){case"pendingTriple":return o(o({},this.lastPointerInfo),{},{type:"click",name:"double_click",phase:"up"});case"pendingQuadruple":return o(o({},this.lastPointerInfo),{},{type:"click",name:"triple_click",phase:"up"});case"pendingOverflow":return o(o({},this.lastPointerInfo),{},{type:"click",name:"quadruple_click",phase:"up"})}return e;case"pointer_move":return"idle"!==this._clickState&&this._clickScreenPoint&&D.Vec.Dist2(this._clickScreenPoint,this.editor.inputs.currentScreenPoint)>(this.editor.getInstanceState().isCoarsePointer?this.editor.options.coarseDragDistanceSquared:this.editor.options.dragDistanceSquared)&&this.cancelDoubleClickTimeout(),e}return e}},{key:"cancelDoubleClickTimeout",value:function(){this._clickTimeout=clearTimeout(this._clickTimeout),this._clickState="idle"}}])}();x(M=function(e){var t;return[,,,c(null!==(t=null===e||void 0===e?void 0:e[h("metadata")])&&void 0!==t?t:null)]}(null),1,"_getClickTimeout",C,R),x(M,1,"cancelDoubleClickTimeout",E,R),S(M,R)},20779:function(e,t,n){"use strict";var r,o=n(85715).default,i=n(17383).default,a=n(34579).default,u=n(43693).default,s=n(50883).default,c=Object.defineProperty,l=Object.getOwnPropertyDescriptor,f=Object.getOwnPropertyNames,d=Object.prototype.hasOwnProperty,p={};!function(e,t){for(var n in t)c(e,n,{get:t[n],enumerable:!0})}(p,{EdgeScrollManager:function(){return g}}),e.exports=(r=p,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,i=s(f(t));try{var a=function(){var i=o.value;d.call(e,i)||i===n||c(e,i,{get:function(){return t[i]},enumerable:!(r=l(t,i))||r.enumerable})};for(i.s();!(o=i.n()).done;)a()}catch(u){i.e(u)}finally{i.f()}}return e}(c({},"__esModule",{value:!0}),r));var h=n(45650),v=n(19526),g=function(){return a((function e(t){i(this,e),u(this,"_isEdgeScrolling",!1),u(this,"_edgeScrollDuration",-1),this.editor=t}),[{key:"updateEdgeScrolling",value:function(e){var t=this.editor,n=this.getEdgeScroll();if(0===n.x&&0===n.y)this._isEdgeScrolling&&(this._isEdgeScrolling=!1,this._edgeScrollDuration=0);else if(this._isEdgeScrolling||(this._isEdgeScrolling=!0,this._edgeScrollDuration=0),this._edgeScrollDuration+=e,this._edgeScrollDuration>t.options.edgeScrollDelay){var r=t.options.edgeScrollEaseDuration>0?v.EASINGS.easeInCubic(Math.min(1,this._edgeScrollDuration/(t.options.edgeScrollDelay+t.options.edgeScrollEaseDuration))):1;this.moveCameraWhenCloseToEdge({x:n.x*r,y:n.y*r})}}},{key:"getEdgeProximityFactors",value:function(e,t,n,r,o){var i=this.editor,a=i.options.edgeScrollDistance,u=n?i.options.coarsePointerWidth:0,s=e-u,c=e+u,l=r?0:a,f=o?t:t-a;return s<l?Math.min(1,(l-s)/a):c>f?-Math.min(1,(c-f)/a):0}},{key:"getEdgeScroll",value:function(){var e=this.editor,t=e.inputs.currentScreenPoint,n=t.x,r=t.y,i=e.getViewportScreenBounds(),a=e.getInstanceState(),u=a.isCoarsePointer,s=o(a.insets,4),c=s[0],l=s[1],f=s[2],d=s[3];return{x:this.getEdgeProximityFactors(n,i.w,u,d,l),y:this.getEdgeProximityFactors(r,i.h,u,c,f)}}},{key:"moveCameraWhenCloseToEdge",value:function(e){var t=this.editor;if(t.inputs.isDragging&&!t.inputs.isPanning&&!t.getCameraOptions().isLocked&&(0!==e.x||0!==e.y)){var n=t.getViewportScreenBounds(),r=n.w<1e3?.612:1,o=n.h<1e3?.612:1,i=t.getZoomLevel(),a=t.user.getEdgeScrollSpeed()*t.options.edgeScrollSpeed,u=a*e.x*r/i,s=a*e.y*o/i,c=t.getCamera(),l=c.x,f=c.y,d=c.z;t.setCamera(new h.Vec(l+u,f+s,d))}}}])}()},91669:function(e,t,n){"use strict";var r,o=n(17383).default,i=n(34579).default,a=n(43693).default,u=n(50883).default,s=Object.defineProperty,c=Object.getOwnPropertyDescriptor,l=Object.getOwnPropertyNames,f=Object.prototype.hasOwnProperty,d={};!function(e,t){for(var n in t)s(e,n,{get:t[n],enumerable:!0})}(d,{FocusManager:function(){return p}}),e.exports=(r=d,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,i=u(l(t));try{var a=function(){var i=o.value;f.call(e,i)||i===n||s(e,i,{get:function(){return t[i]},enumerable:!(r=c(t,i))||r.enumerable})};for(i.s();!(o=i.n()).done;)a()}catch(d){i.e(d)}finally{i.f()}}return e}(s({},"__esModule",{value:!0}),r));var p=function(){return i((function e(t,n){var r=this;o(this,e),a(this,"disposeSideEffectListener",void 0),this.editor=t,this.disposeSideEffectListener=t.sideEffects.registerAfterChangeHandler("instance",(function(e,t){e.isFocused!==t.isFocused&&r.updateContainerClass()})),n!==t.getInstanceState().isFocused&&t.updateInstanceState({isFocused:!!n}),this.updateContainerClass()}),[{key:"updateContainerClass",value:function(){var e=this.editor.getContainer();this.editor.getInstanceState().isFocused?e.classList.add("tl-container__focused"):e.classList.remove("tl-container__focused")}},{key:"focus",value:function(){this.editor.getContainer().focus()}},{key:"blur",value:function(){this.editor.complete(),this.editor.getContainer().blur()}},{key:"dispose",value:function(){var e;null===(e=this.disposeSideEffectListener)||void 0===e||e.call(this)}}])}()},97689:function(e,t,n){"use strict";var r,o=n(17383).default,i=n(34579).default,a=n(43693).default,u=n(50883).default,s=Object.defineProperty,c=Object.getOwnPropertyDescriptor,l=Object.getOwnPropertyNames,f=Object.prototype.hasOwnProperty,d={};!function(e,t){for(var n in t)s(e,n,{get:t[n],enumerable:!0})}(d,{HistoryManager:function(){return y}}),e.exports=(r=d,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,i=u(l(t));try{var a=function(){var i=o.value;f.call(e,i)||i===n||s(e,i,{get:function(){return t[i]},enumerable:!(r=c(t,i))||r.enumerable})};for(i.s();!(o=i.n()).done;)a()}catch(d){i.e(d)}finally{i.f()}}return e}(s({},"__esModule",{value:!0}),r));var p=n(81501),h=n(75881),v=n(30645),g=n(59252),y=function(){return i((function e(t){var n,r=this;o(this,e),a(this,"store",void 0),a(this,"dispose",void 0),a(this,"state","recording"),a(this,"pendingDiff",new b),a(this,"stacks",(0,p.atom)("HistoryManager.stacks",{undos:(0,g.stack)(),redos:(0,g.stack)()},{isEqual:function(e,t){return e.undos===t.undos&&e.redos===t.redos}})),a(this,"annotateError",void 0),a(this,"_isInBatch",!1),this.store=t.store,this.annotateError=null!==(n=t.annotateError)&&void 0!==n?n:v.noop,this.dispose=this.store.addHistoryInterceptor((function(e,t){if("user"===t)switch(r.state){case"recording":r.pendingDiff.apply(e.changes),r.stacks.update((function(e){return{undos:e.undos,redos:(0,g.stack)()}}));break;case"recordingPreserveRedoStack":r.pendingDiff.apply(e.changes);break;case"paused":break;default:(0,v.exhaustiveSwitchError)(r.state)}}))}),[{key:"flushPendingDiff",value:function(){if(!this.pendingDiff.isEmpty()){var e=this.pendingDiff.clear();this.stacks.update((function(t){var n=t.undos,r=t.redos;return{undos:n.push({type:"diff",diff:e}),redos:r}}))}}},{key:"getNumUndos",value:function(){return this.stacks.get().undos.length+(this.pendingDiff.isEmpty()?0:1)}},{key:"getNumRedos",value:function(){return this.stacks.get().redos.length}},{key:"batch",value:function(e,t){var n=this.state;"paused"!==n&&null!==t&&void 0!==t&&t.history&&(this.state=m[t.history]);try{if(this._isInBatch)return(0,p.transact)(e),this;this._isInBatch=!0;try{(0,p.transact)(e)}catch(r){throw this.annotateError(r),r}finally{this._isInBatch=!1}return this}finally{this.state=n}}},{key:"_undo",value:function(e){var t=e.pushToRedoStack,n=e.toMark,r=void 0===n?void 0:n,o=this.state;this.state="paused";try{var i=this.stacks.get(),a=i.undos,u=i.redos,s=this.pendingDiff.clear(),c=(0,h.isRecordsDiffEmpty)(s),l=(0,h.reverseRecordsDiff)(s);t&&!c&&(u=u.push({type:"diff",diff:s}));var f=!1;if(c)for(;"stop"===(null===(d=a.head)||void 0===d?void 0:d.type);){var d,p=a.head;if(a=a.tail,t&&(u=u.push(p)),p.id===r){f=!0;break}}if(!f)e:for(;a.head;){var g=a.head;switch(a=a.tail,t&&(u=u.push(g)),g.type){case"diff":(0,h.squashRecordDiffsMutable)(l,[(0,h.reverseRecordsDiff)(g.diff)]);break;case"stop":if(!r)break e;if(g.id===r){f=!0;break e}break;default:(0,v.exhaustiveSwitchError)(g)}}if(!f&&r)return this;this.store.applyDiff(l,{ignoreEphemeralKeys:!0}),this.store.ensureStoreIsUsable(),this.stacks.set({undos:a,redos:u})}finally{this.state=o}return this}},{key:"undo",value:function(){return this._undo({pushToRedoStack:!0}),this}},{key:"redo",value:function(){var e=this.state;this.state="paused";try{this.flushPendingDiff();var t=this.stacks.get(),n=t.undos,r=t.redos;if(0===r.length)return this;for(;"stop"===(null===(o=r.head)||void 0===o?void 0:o.type);){var o;n=n.push(r.head),r=r.tail}for(var i=(0,h.createEmptyRecordsDiff)();r.head;){var a=r.head;if(n=n.push(a),r=r.tail,"diff"!==a.type)break;(0,h.squashRecordDiffsMutable)(i,[a.diff])}this.store.applyDiff(i,{ignoreEphemeralKeys:!0}),this.store.ensureStoreIsUsable(),this.stacks.set({undos:n,redos:r})}finally{this.state=e}return this}},{key:"bail",value:function(){return this._undo({pushToRedoStack:!1}),this}},{key:"bailToMark",value:function(e){return this._undo({pushToRedoStack:!1,toMark:e}),this}},{key:"squashToMark",value:function(e){for(var t,n=this.stacks.get().undos,r=[];n.head&&("stop"!==n.head.type||n.head.id!==e);)"diff"===n.head.type&&r.push(n.head.diff),n=n.tail;if(!n.head||(null===(t=n.head)||void 0===t?void 0:t.id)!==e)return console.error("Could not find mark to squash to: ",e),this;if(0===r.length)return this;var o=(0,h.createEmptyRecordsDiff)();return(0,h.squashRecordDiffsMutable)(o,r.reverse()),this.stacks.update((function(e){var t=e.redos;return{undos:n.push({type:"diff",diff:o}),redos:t}})),this}},{key:"_mark",value:function(e){var t=this;(0,p.transact)((function(){t.flushPendingDiff(),t.stacks.update((function(t){var n=t.undos,r=t.redos;return{undos:n.push({type:"stop",id:e}),redos:r}}))}))}},{key:"clear",value:function(){this.stacks.set({undos:(0,g.stack)(),redos:(0,g.stack)()}),this.pendingDiff.clear()}},{key:"getMarkIdMatching",value:function(e){for(var t=this.stacks.get().undos;t.head;){if("stop"===t.head.type&&t.head.id.includes(e))return t.head.id;t=t.tail}return null}},{key:"debug",value:function(){var e=this.stacks.get(),t=e.undos,n=e.redos;return{undos:t.toArray(),redos:n.toArray(),pendingDiff:this.pendingDiff.debug(),state:this.state}}}])}(),m={record:"recording","record-preserveRedoStack":"recordingPreserveRedoStack",ignore:"paused"},b=function(){return i((function e(){o(this,e),a(this,"diff",(0,h.createEmptyRecordsDiff)()),a(this,"isEmptyAtom",(0,p.atom)("PendingDiff.isEmpty",!0))}),[{key:"clear",value:function(){var e=this.diff;return this.diff=(0,h.createEmptyRecordsDiff)(),this.isEmptyAtom.set(!0),e}},{key:"isEmpty",value:function(){return this.isEmptyAtom.get()}},{key:"apply",value:function(e){(0,h.squashRecordDiffsMutable)(this.diff,[e]),this.isEmptyAtom.set((0,h.isRecordsDiffEmpty)(this.diff))}},{key:"debug",value:function(){return{diff:this.diff,isEmpty:this.isEmpty()}}}])}()},29403:function(e,t,n){"use strict";var r,o=n(41132).default,i=n(12897).default,a=n(17383).default,u=n(34579).default,s=n(43693).default,c=n(50883).default,l=Object.defineProperty,f=Object.getOwnPropertyDescriptor,d=Object.getOwnPropertyNames,p=Object.prototype.hasOwnProperty,h={};!function(e,t){for(var n in t)l(e,n,{get:t[n],enumerable:!0})}(h,{ScribbleManager:function(){return y}}),e.exports=(r=h,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,i=c(d(t));try{var a=function(){var i=o.value;p.call(e,i)||i===n||l(e,i,{get:function(){return t[i]},enumerable:!(r=f(t,i))||r.enumerable})};for(i.s();!(o=i.n()).done;)a()}catch(u){i.e(u)}finally{i.f()}}return e}(l({},"__esModule",{value:!0}),r));var v=n(30645),g=n(45650),y=function(){return u((function e(t){a(this,e),s(this,"scribbleItems",new Map),s(this,"state","paused"),this.editor=t}),[{key:"addScribble",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(0,v.uniqueId)(),r={id:n,scribble:i(i({id:n,size:20,color:"accent",opacity:.8,delay:0,points:[],shrink:.1,taper:!0},e),{},{state:"starting"}),timeoutMs:0,delayRemaining:null!==(t=e.delay)&&void 0!==t?t:0,prev:null,next:null};return this.scribbleItems.set(n,r),r}},{key:"reset",value:function(){this.editor.updateInstanceState({scribbles:[]}),this.scribbleItems.clear()}},{key:"stop",value:function(e){var t=this.scribbleItems.get(e);if(!t)throw Error("Scribble with id ".concat(e," not found"));return t.delayRemaining=Math.min(t.delayRemaining,200),t.scribble.state="stopping",t}},{key:"addPoint",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,o=this.scribbleItems.get(e);if(!o)throw Error("Scribble with id ".concat(e," not found"));var i=o.prev,a={x:t,y:n,z:r};return(!i||g.Vec.Dist(i,a)>=1)&&(o.next=a),o}},{key:"tick",value:function(e){var t=this;0!==this.scribbleItems.size&&this.editor.run((function(){t.scribbleItems.forEach((function(n){if("starting"===n.scribble.state){var r=n.next,o=n.prev;return r&&r!==o&&(n.prev=r,n.scribble.points.push(r)),void(n.scribble.points.length>8&&(n.scribble.state="active"))}n.delayRemaining>0&&(n.delayRemaining=Math.max(0,n.delayRemaining-e)),n.timeoutMs+=e,n.timeoutMs>=16&&(n.timeoutMs=0);var i=n.delayRemaining,a=n.timeoutMs,u=n.prev,s=n.next,c=n.scribble;switch(c.state){case"active":s&&s!==u?(n.prev=s,c.points.push(s),0===i&&c.points.length>8&&c.points.shift()):0===a&&(c.points.length>1?c.points.shift():n.delayRemaining=c.delay);break;case"stopping":if(0===n.delayRemaining&&0===a){if(1===c.points.length)return void t.scribbleItems.delete(n.id);c.shrink&&(c.size=Math.max(1,c.size*(1-c.shrink))),c.points.shift()}}})),t.editor.updateInstanceState({scribbles:Array.from(t.scribbleItems.values()).map((function(e){var t=e.scribble;return i(i({},t),{},{points:o(t.points)})})).slice(-5)})}))}}])}()},25850:function(e,t,n){"use strict";var r,o=n(17383).default,i=n(34579).default,a=n(41132).default,u=n(11303).default,s=n(50883).default,c=Object.create,l=Object.defineProperty,f=Object.getOwnPropertyDescriptor,d=Object.getOwnPropertyNames,p=Object.prototype.hasOwnProperty,h=function(e,t){return(t=Symbol[e])?t:Symbol.for("Symbol."+e)},v=function(e){throw TypeError(e)},g=function(e,t,n){return t in e?l(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},y=function(e,t){return l(e,"name",{value:t,configurable:!0})},m=["class","method","getter","setter","accessor","field","value","get","set"],b=function(e){return void 0!==e&&"function"!==typeof e?v("Function expected"):e},w=function(e,t,n,r,o){return{kind:m[e],name:t,metadata:r,addInitializer:function(e){return n._?v("Already initialized"):o.push(b(e||null))}}},S=function(e,t){return g(t,h("metadata"),e[3])},x=function(e,t,n,r,o,i){var a,s,c,d,p,h=7&t,g=!!(8&t),x=!!(16&t),P=h>3?e.length+1:h?g?1:2:0,I=m[h+5],T=h>3&&(e[P-1]=[]),E=e[P]||(e[P]=[]),C=h&&(!x&&!g&&(o=o.prototype),h<5&&(h>3||!x)&&f(h<4?o:u("set",u("get",{},n,(function(){return k(this,i)})),n,(function(e){return _(this,i,e)})),n));h?x&&h<4&&y(i,(h>2?"set ":h>1?"get ":"")+n):y(o,n);for(var M=r.length-1;M>=0;M--)d=w(h,n,c={},e[3],E),h&&(d.static=g,d.private=x,p=d.access={has:x?function(e){return O(o,e)}:function(e){return n in e}},3^h&&(p.get=x?function(e){return(1^h?k:j)(e,o,4^h?i:C.get)}:function(e){return e[n]}),h>2&&(p.set=x?function(e,t){return _(e,o,t,4^h?i:C.set)}:function(e,t){return e[n]=t})),s=(0,r[M])(h?h<4?x?i:C[I]:h>4?void 0:{get:C.get,set:C.set}:o,d),c._=1,4^h||void 0===s?b(s)&&(h>4?T.unshift(s):h?x?i=s:C[I]=s:o=s):"object"!==typeof s||null===s?v("Object expected"):(b(a=s.get)&&(C.get=a),b(a=s.set)&&(C.set=a),b(a=s.init)&&T.unshift(a));return h||S(e,o),C&&l(o,n,C),x?4^h?i:C:o},P=function(e,t,n){return t.has(e)||v("Cannot "+n)},O=function(e,t){return Object(t)!==t?v('Cannot use the "in" operator on this value'):e.has(t)},k=function(e,t,n){return P(e,t,"read from private field"),n?n.call(e):t.get(e)},_=function(e,t,n,r){return P(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n},j=function(e,t,n){return P(e,t,"access private method"),n},I={};!function(e,t){for(var n in t)l(e,n,{get:t[n],enumerable:!0})}(I,{BoundsSnaps:function(){return z}}),e.exports=(r=I,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,i=s(d(t));try{var a=function(){var i=o.value;p.call(e,i)||i===n||l(e,i,{get:function(){return t[i]},enumerable:!(r=f(t,i))||r.enumerable})};for(i.s();!(o=i.n()).done;)a()}catch(u){i.e(u)}finally{i.f()}}return e}(l({},"__esModule",{value:!0}),r));var T,E,C,M,A,D=n(81501),R=n(30645),N=n(24161),L=n(84906),U=n(45650),F=n(63557),B=function(e){return Math.round(e*Math.pow(10,8))/Math.pow(10,8)};function V(e,t,n,r,o){var i=e.filter((function(e){return("forward"===r?e.startNode.id===t:e.endNode.id===t)&&B(e.length)===B(n)&&(0,F.rangeIntersection)(e.breadthIntersection[0],e.breadthIntersection[1],o[0],o[1])}));if(0===i.length)return[];var u=new Set;return i.forEach((function(t){var s="forward"===r?t.endNode.id:t.startNode.id;if(!u.has(s)){u.add(s);var c=V(e,s,n,r,(0,F.rangeIntersection)(t.breadthIntersection[0],t.breadthIntersection[1],o[0],o[1]));i.push.apply(i,a(c))}})),i}M=[D.computed],C=[D.computed],E=[D.computed],T=[D.computed];var z=function(){return i((function e(t){var n,r;o(this,e),this.manager=t,function(e,t,n,r){for(var o=0,i=e[t>>1],a=i&&i.length;o<a;o++)1&t?i[o].call(n):r=i[o].call(n,r)}(A,5,this),g(this,"symbol"!==typeof(n="editor")?n+"":n,r),this.editor=t.editor}),[{key:"getSnapPointsCache",value:function(){var e=this.editor;return e.store.createComputedCache("snapPoints",(function(t){var n,r=e.getShapePageTransform(t.id);if(r){var o=null!==(n=e.getShapeUtil(t).getBoundsSnapGeometry(t).points)&&void 0!==n?n:e.getShapeGeometry(t).bounds.cornersAndCenter;if(r&&o)return o.map((function(e,n){var o=L.Mat.applyToPoint(r,e);return{x:o.x,y:o.y,id:"".concat(t.id,":").concat(n)}}))}}))}},{key:"getSnapPoints",value:function(e){var t;return null!==(t=this.getSnapPointsCache().get(e))&&void 0!==t?t:[]}},{key:"getSnappablePoints",value:function(){var e,t=this.getSnapPointsCache(),n=this.manager.getSnappableShapes(),r=[],o=s(n);try{for(o.s();!(e=o.n()).done;){var i=e.value,u=t.get(i);u&&r.push.apply(r,a(u))}}catch(c){o.e(c)}finally{o.f()}return r}},{key:"getSnappableGapNodes",value:function(){var e=this;return Array.from(this.manager.getSnappableShapes(),(function(t){return{id:t,pageBounds:(0,R.assertExists)(e.editor.getShapePageBounds(t))}}))}},{key:"getVisibleGaps",value:function(){for(var e,t,n=[],r=[],o=this.getSnappableGapNodes().sort((function(e,t){return e.pageBounds.minX-t.pageBounds.minX})),i=0;i<o.length;i++){e=o[i];for(var a=i+1;a<o.length;a++)t=o[a],e.pageBounds.maxX<t.pageBounds.minX&&(0,F.rangesOverlap)(e.pageBounds.minY,e.pageBounds.maxY,t.pageBounds.minY,t.pageBounds.maxY)&&n.push({startNode:e,endNode:t,startEdge:[new U.Vec(e.pageBounds.maxX,e.pageBounds.minY),new U.Vec(e.pageBounds.maxX,e.pageBounds.maxY)],endEdge:[new U.Vec(t.pageBounds.minX,t.pageBounds.minY),new U.Vec(t.pageBounds.minX,t.pageBounds.maxY)],length:t.pageBounds.minX-e.pageBounds.maxX,breadthIntersection:(0,F.rangeIntersection)(e.pageBounds.minY,e.pageBounds.maxY,t.pageBounds.minY,t.pageBounds.maxY)})}for(var u=o.sort((function(e,t){return e.pageBounds.minY-t.pageBounds.minY})),s=0;s<u.length;s++){e=u[s];for(var c=s+1;c<u.length;c++)t=u[c],e.pageBounds.maxY<t.pageBounds.minY&&(0,F.rangesOverlap)(e.pageBounds.minX,e.pageBounds.maxX,t.pageBounds.minX,t.pageBounds.maxX)&&r.push({startNode:e,endNode:t,startEdge:[new U.Vec(e.pageBounds.minX,e.pageBounds.maxY),new U.Vec(e.pageBounds.maxX,e.pageBounds.maxY)],endEdge:[new U.Vec(t.pageBounds.minX,t.pageBounds.minY),new U.Vec(t.pageBounds.maxX,t.pageBounds.minY)],length:t.pageBounds.minY-e.pageBounds.maxY,breadthIntersection:(0,F.rangeIntersection)(e.pageBounds.minX,e.pageBounds.maxX,t.pageBounds.minX,t.pageBounds.maxX)})}return{horizontal:n,vertical:r}}},{key:"snapTranslateShapes",value:function(e){var t,n,r,o,i=e.lockedAxis,u=e.initialSelectionPageBounds,s=e.initialSelectionSnapPoints,c=e.dragDelta,l=this.manager.getSnapThreshold(),f=this.getSnappablePoints(),d=u.clone().translate(c),p=s.map((function(e,t){var n=e.x,r=e.y;return{id:"selection:"+t,x:n+c.x,y:r+c.y}})),h=f,v=[],g=[],y=new U.Vec(l,l);this.collectPointSnaps({minOffset:y,nearestSnapsX:v,nearestSnapsY:g,otherNodeSnapPoints:h,selectionSnapPoints:p}),this.collectGapSnaps({selectionPageBounds:d,nearestSnapsX:v,nearestSnapsY:g,minOffset:y});var m=new U.Vec("x"===i?0:null!==(t=null===(n=v[0])||void 0===n?void 0:n.nudge)&&void 0!==t?t:0,"y"===i?0:null!==(r=null===(o=g[0])||void 0===o?void 0:o.nudge)&&void 0!==r?r:0);y.x=0,y.y=0,v.length=0,g.length=0,p.forEach((function(e){e.x+=m.x,e.y+=m.y})),d.translate(m),this.collectPointSnaps({minOffset:y,nearestSnapsX:v,nearestSnapsY:g,otherNodeSnapPoints:h,selectionSnapPoints:p}),this.collectGapSnaps({selectionPageBounds:d,nearestSnapsX:v,nearestSnapsY:g,minOffset:y});var b=this.getPointSnapLines({nearestSnapsX:v,nearestSnapsY:g}),w=this.getGapSnapLines({selectionPageBounds:d,nearestSnapsX:v,nearestSnapsY:g});return this.manager.setIndicators([].concat(a(w),a(b))),{nudge:m}}},{key:"snapResizeShapes",value:function(e){var t,n,r,o,i=e.initialSelectionPageBounds,u=e.dragDelta,s=e.handle,c=e.isAspectRatioLocked,l=e.isResizingFromCenter,f=this.manager.getSnapThreshold(),d=N.Box.Resize(i,s,l?2*u.x:u.x,l?2*u.y:u.y,c),p=d.box,h=d.scaleX,v=d.scaleY,g=s;h<0&&(g=(0,N.flipSelectionHandleX)(g)),v<0&&(g=(0,N.flipSelectionHandleY)(g)),l&&(p.center=i.center);var y="top"===g||"bottom"===g,m="left"===g||"right"===g,b=H(g,p),w=this.getSnappablePoints(),S=[],x=[],P=new U.Vec(f,f);this.collectPointSnaps({minOffset:P,nearestSnapsX:S,nearestSnapsY:x,otherNodeSnapPoints:w,selectionSnapPoints:b});var O=new U.Vec(y?0:null!==(t=null===(n=S[0])||void 0===n?void 0:n.nudge)&&void 0!==t?t:0,m?0:null!==(r=null===(o=x[0])||void 0===o?void 0:o.nudge)&&void 0!==r?r:0);if(c&&(0,N.isSelectionCorner)(g)&&0!==O.len()){var k=S.length&&x.length?Math.abs(O.x)<Math.abs(O.y)?"x":"y":S.length?"x":"y",_=i.aspectRatio;"x"===k?(x.length=0,O.y=O.x/_,"bottom_left"!==g&&"top_right"!==g||(O.y=-O.y)):(S.length=0,O.x=O.y*_,"bottom_left"!==g&&"top_right"!==g||(O.x=-O.x))}var j=U.Vec.Add(u,O),I=N.Box.Resize(i,s,l?2*j.x:j.x,l?2*j.y:j.y,c).box;l&&(I.center=i.center);var T=H("any",I);S.length=0,x.length=0,P.x=0,P.y=0,this.collectPointSnaps({minOffset:P,nearestSnapsX:S,nearestSnapsY:x,otherNodeSnapPoints:w,selectionSnapPoints:T});var E=this.getPointSnapLines({nearestSnapsX:S,nearestSnapsY:x});return this.manager.setIndicators(a(E)),{nudge:O}}},{key:"collectPointSnaps",value:function(e){var t,n=e.selectionSnapPoints,r=e.otherNodeSnapPoints,o=e.minOffset,i=e.nearestSnapsX,a=e.nearestSnapsY,u=s(n);try{for(u.s();!(t=u.n()).done;){var c,l=t.value,f=s(r);try{for(f.s();!(c=f.n()).done;){var d=c.value,p=U.Vec.Sub(l,d),h=Math.abs(p.x),v=Math.abs(p.y);B(h)<=B(o.x)&&(B(h)<B(o.x)&&(i.length=0),i.push({type:"points",points:{thisPoint:l,otherPoint:d},nudge:d.x-l.x}),o.x=h),B(v)<=B(o.y)&&(B(v)<B(o.y)&&(a.length=0),a.push({type:"points",points:{thisPoint:l,otherPoint:d},nudge:d.y-l.y}),o.y=v)}}catch(g){f.e(g)}finally{f.f()}}}catch(g){u.e(g)}finally{u.f()}}},{key:"collectGapSnaps",value:function(e){var t,n=e.selectionPageBounds,r=e.minOffset,o=e.nearestSnapsX,i=e.nearestSnapsY,a=this.getVisibleGaps(),u=a.horizontal,c=a.vertical,l=s(u);try{for(l.s();!(t=l.n()).done;){var f=t.value;if((0,F.rangesOverlap)(f.breadthIntersection[0],f.breadthIntersection[1],n.minY,n.maxY)){var d=f.startEdge[0].x+f.length/2-n.center.x;if(f.length>n.width&&B(Math.abs(d))<=B(r.x)){B(Math.abs(d))<B(r.x)&&(o.length=0),r.x=Math.abs(d);var p={type:"gap_center",gap:f,nudge:d},h=o.find((function(e){return"gap_center"===e.type})),v=h&&(0,F.rangeIntersection)(f.breadthIntersection[0],f.breadthIntersection[1],h.gap.breadthIntersection[0],h.gap.breadthIntersection[1]);h&&h.gap.length>f.length&&v?o[o.indexOf(h)]=p:h&&v||o.push(p)}var g=f.startNode.pageBounds.minX-f.length-n.maxX;B(Math.abs(g))<=B(r.x)&&(B(Math.abs(g))<B(r.x)&&(o.length=0),r.x=Math.abs(g),o.push({type:"gap_duplicate",gap:f,protrusionDirection:"left",nudge:g}));var y=f.endNode.pageBounds.maxX+f.length-n.minX;B(Math.abs(y))<=B(r.x)&&(B(Math.abs(y))<B(r.x)&&(o.length=0),r.x=Math.abs(y),o.push({type:"gap_duplicate",gap:f,protrusionDirection:"right",nudge:y}))}}}catch(j){l.e(j)}finally{l.f()}var m,b=s(c);try{for(b.s();!(m=b.n()).done;){var w=m.value;if((0,F.rangesOverlap)(w.breadthIntersection[0],w.breadthIntersection[1],n.minX,n.maxX)){var S=w.startEdge[0].y+w.length/2-n.center.y;if(w.length>n.height&&B(Math.abs(S))<=B(r.y)){B(Math.abs(S))<B(r.y)&&(i.length=0),r.y=Math.abs(S);var x={type:"gap_center",gap:w,nudge:S},P=i.find((function(e){return"gap_center"===e.type})),O=P&&(0,F.rangesOverlap)(P.gap.breadthIntersection[0],P.gap.breadthIntersection[1],w.breadthIntersection[0],w.breadthIntersection[1]);P&&P.gap.length>w.length&&O?i[i.indexOf(P)]=x:P&&O||i.push(x)}else{var k=w.startNode.pageBounds.minY-w.length-n.maxY;B(Math.abs(k))<=B(r.y)&&(B(Math.abs(k))<B(r.y)&&(i.length=0),r.y=Math.abs(k),i.push({type:"gap_duplicate",gap:w,protrusionDirection:"top",nudge:k}));var _=w.endNode.pageBounds.maxY+w.length-n.minY;B(Math.abs(_))<=B(r.y)&&(B(Math.abs(_))<B(r.y)&&(i.length=0),r.y=Math.abs(_),i.push({type:"gap_duplicate",gap:w,protrusionDirection:"bottom",nudge:_}))}}}}catch(j){b.e(j)}finally{b.f()}}},{key:"getPointSnapLines",value:function(e){var t=e.nearestSnapsX,n=e.nearestSnapsY,r={},o={};if(t.length>0){var i,a=s(t);try{for(a.s();!(i=a.n()).done;){var u=i.value;if("points"===u.type){var c=B(u.points.otherPoint.x);r[c]||(r[c]=[]),r[c].push(u.points)}}}catch(h){a.e(h)}finally{a.f()}}if(n.length>0){var l,f=s(n);try{for(f.s();!(l=f.n()).done;){var d=l.value;if("points"===d.type){var p=B(d.points.otherPoint.y);o[p]||(o[p]=[]),o[p].push(d.points)}}}catch(h){f.e(h)}finally{f.f()}}return Object.values(r).concat(Object.values(o)).map((function(e){return{id:(0,R.uniqueId)(),type:"points",points:(0,R.dedupe)(e.map((function(e){return U.Vec.From(e.otherPoint)})).concat(e.map((function(e){return U.Vec.From(e.thisPoint)}))),(function(e,t){return e.equals(t)}))}}))}},{key:"getGapSnapLines",value:function(e){var t=e.selectionPageBounds,n=e.nearestSnapsX,r=e.nearestSnapsY,o=this.getVisibleGaps(),i=o.vertical,u=o.horizontal,c={top:t.sides[0],right:t.sides[1],bottom:[t.corners[3],t.corners[2]],left:[t.corners[0],t.corners[3]]},l=[];if(n.length>0){var f,d=s(n);try{var p=function(){var e=f.value;if("points"===e.type)return 1;var n=e.gap,r=n.breadthIntersection,o=n.startEdge,i=n.startNode,s=n.endNode,d=n.length,p=n.endEdge;switch(e.type){case"gap_center":var h=(d-t.width)/2,v=(0,F.rangeIntersection)(r[0],r[1],t.minY,t.maxY);l.push({type:"gaps",direction:"horizontal",id:(0,R.uniqueId)(),gaps:[].concat(a(V(u,i.id,h,"backward",v)),[{startEdge:o,endEdge:c.left},{startEdge:c.right,endEdge:p}],a(V(u,s.id,h,"forward",v)))});break;case"gap_duplicate":var g=(0,F.rangeIntersection)(r[0],r[1],t.minY,t.maxY);l.push({type:"gaps",direction:"horizontal",id:(0,R.uniqueId)(),gaps:"left"===e.protrusionDirection?[{startEdge:c.right,endEdge:o.map((function(e){return e.clone().addXY(-i.pageBounds.width,0)}))},{startEdge:o,endEdge:p}].concat(a(V(u,s.id,d,"forward",g))):[].concat(a(V(u,i.id,d,"backward",g)),[{startEdge:o,endEdge:p},{startEdge:p.map((function(t){return t.clone().addXY(e.gap.endNode.pageBounds.width,0)})),endEdge:c.left}])})}};for(d.s();!(f=d.n()).done;)p()}catch(y){d.e(y)}finally{d.f()}}if(r.length>0){var h,v=s(r);try{var g=function(){var e=h.value;if("points"===e.type)return 1;var n=e.gap,r=n.breadthIntersection,o=n.startEdge,u=n.startNode,s=n.endNode,f=n.length,d=n.endEdge;switch(e.type){case"gap_center":var p=(f-t.height)/2,v=(0,F.rangeIntersection)(r[0],r[1],t.minX,t.maxX);l.push({type:"gaps",direction:"vertical",id:(0,R.uniqueId)(),gaps:[].concat(a(V(i,u.id,p,"backward",v)),[{startEdge:o,endEdge:c.top},{startEdge:c.bottom,endEdge:d}],a(V(i,e.gap.endNode.id,p,"forward",v)))});break;case"gap_duplicate":var g=(0,F.rangeIntersection)(r[0],r[1],t.minX,t.maxX);l.push({type:"gaps",direction:"vertical",id:(0,R.uniqueId)(),gaps:"top"===e.protrusionDirection?[{startEdge:c.bottom,endEdge:o.map((function(e){return e.clone().addXY(0,-u.pageBounds.height)}))},{startEdge:o,endEdge:d}].concat(a(V(i,s.id,f,"forward",g))):[].concat(a(V(i,u.id,f,"backward",g)),[{startEdge:o,endEdge:d},{startEdge:d.map((function(e){return e.clone().addXY(0,s.pageBounds.height)})),endEdge:c.top}])})}};for(v.s();!(h=v.n()).done;)g()}catch(y){v.e(y)}finally{v.f()}}return function(e){e.sort((function(e,t){return t.gaps.length-e.gaps.length}));for(var t=e.length-1;t>0;t--)for(var n=e[t],r=function(){var r=e[o];if(r.direction===n.direction&&n.gaps.every((function(e){return r.gaps.some((function(t){return B(e.startEdge[0].x)===B(t.startEdge[0].x)&&B(e.startEdge[0].y)===B(t.startEdge[0].y)&&B(e.startEdge[1].x)===B(t.startEdge[1].x)&&B(e.startEdge[1].y)===B(t.startEdge[1].y)}))&&r.gaps.some((function(t){return B(e.endEdge[0].x)===B(t.endEdge[0].x)&&B(e.endEdge[0].y)===B(t.endEdge[0].y)&&B(e.endEdge[1].x)===B(t.endEdge[1].x)&&B(e.endEdge[1].y)===B(t.endEdge[1].y)}))})))return e.splice(t,1),1},o=t-1;o>=0&&!r();o--);}(l),l}}])}();function H(e,t){var n=t.minX,r=t.maxX,o=t.minY,i=t.maxY,a=[];switch(e){case"top":case"left":case"top_left":case"any":a.push({id:"top_left",handle:"top_left",x:n,y:o})}switch(e){case"top":case"right":case"top_right":case"any":a.push({id:"top_right",handle:"top_right",x:r,y:o})}switch(e){case"bottom":case"right":case"bottom_right":case"any":a.push({id:"bottom_right",handle:"bottom_right",x:r,y:i})}switch(e){case"bottom":case"left":case"bottom_left":case"any":a.push({id:"bottom_left",handle:"bottom_left",x:n,y:i})}return a}x(A=function(e){var t;return[,,,c(null!==(t=null===e||void 0===e?void 0:e[h("metadata")])&&void 0!==t?t:null)]}(null),1,"getSnapPointsCache",M,z),x(A,1,"getSnappablePoints",C,z),x(A,1,"getSnappableGapNodes",E,z),x(A,1,"getVisibleGaps",T,z),S(A,z)},4923:function(e,t,n){"use strict";var r,o=n(4633).default,i=n(17383).default,a=n(34579).default,u=n(11303).default,s=n(50883).default,c=Object.create,l=Object.defineProperty,f=Object.getOwnPropertyDescriptor,d=Object.getOwnPropertyNames,p=Object.prototype.hasOwnProperty,h=function(e,t){return(t=Symbol[e])?t:Symbol.for("Symbol."+e)},v=function(e){throw TypeError(e)},g=function(e,t,n){return t in e?l(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},y=function(e,t){return l(e,"name",{value:t,configurable:!0})},m=["class","method","getter","setter","accessor","field","value","get","set"],b=function(e){return void 0!==e&&"function"!==typeof e?v("Function expected"):e},w=function(e,t,n,r,o){return{kind:m[e],name:t,metadata:r,addInitializer:function(e){return n._?v("Already initialized"):o.push(b(e||null))}}},S=function(e,t){return g(t,h("metadata"),e[3])},x=function(e,t,n){return t.has(e)||v("Cannot "+n)},P=function(e,t){return Object(t)!==t?v('Cannot use the "in" operator on this value'):e.has(t)},O=function(e,t,n){return x(e,t,"read from private field"),n?n.call(e):t.get(e)},k=function(e,t,n,r){return x(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n},_=function(e,t,n){return x(e,t,"access private method"),n},j={};!function(e,t){for(var n in t)l(e,n,{get:t[n],enumerable:!0})}(j,{HandleSnaps:function(){return R}}),e.exports=(r=j,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,i=s(d(t));try{var a=function(){var i=o.value;p.call(e,i)||i===n||l(e,i,{get:function(){return t[i]},enumerable:!(r=f(t,i))||r.enumerable})};for(i.s();!(o=i.n()).done;)a()}catch(u){i.e(u)}finally{i.f()}}return e}(l({},"__esModule",{value:!0}),r));var I,T,E=n(81501),C=n(30645),M=n(45650),A=function(){return null},D=function(){return[]};I=[E.computed];var R=function(){return a((function e(t){var n,r;i(this,e),this.manager=t,function(e,t,n,r){for(var o=0,i=e[t>>1],a=i&&i.length;o<a;o++)1&t?i[o].call(n):r=i[o].call(n,r)}(T,5,this),g(this,"symbol"!==typeof(n="editor")?n+"":n,r),this.editor=t.editor}),[{key:"getSnapGeometryCache",value:function(){var e=this.editor;return e.store.createComputedCache("handle snap geometry",(function(t){var n,r=e.getShapeUtil(t).getHandleSnapGeometry(t),o=r.getSelfSnapOutline?r.getSelfSnapOutline.bind(r):A,i=r.getSelfSnapPoints?r.getSelfSnapPoints.bind(r):D;return{outline:void 0===r.outline?e.getShapeGeometry(t):r.outline,points:null!==(n=r.points)&&void 0!==n?n:[],getSelfSnapOutline:o,getSelfSnapPoints:i}}))}},{key:"iterateSnapPointsInPageSpace",value:o().mark((function e(t,n){var r,i,a,u,c,l,f,d,p,h,v,g,y,m,b;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(i=null===(r=this.getSnapGeometryCache().get(t))||void 0===r?void 0:r.getSelfSnapPoints(n))||!i.length){e.next=20;break}a=(0,C.assertExists)(this.editor.getShapePageTransform(t)),u=s(i),e.prev=4,u.s();case 6:if((c=u.n()).done){e.next=12;break}return l=c.value,e.next=10,a.applyToPoint(l);case 10:e.next=6;break;case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(4),u.e(e.t0);case 17:return e.prev=17,u.f(),e.finish(17);case 20:f=s(this.manager.getSnappableShapes()),e.prev=21,f.s();case 23:if((d=f.n()).done){e.next=50;break}if((h=d.value)!==t){e.next=27;break}return e.abrupt("continue",48);case 27:if((v=null===(p=this.getSnapGeometryCache().get(h))||void 0===p?void 0:p.points)&&v.length){e.next=30;break}return e.abrupt("continue",48);case 30:g=(0,C.assertExists)(this.editor.getShapePageTransform(h)),y=s(v),e.prev=32,y.s();case 34:if((m=y.n()).done){e.next=40;break}return b=m.value,e.next=38,g.applyToPoint(b);case 38:e.next=34;break;case 40:e.next=45;break;case 42:e.prev=42,e.t1=e.catch(32),y.e(e.t1);case 45:return e.prev=45,y.f(),e.finish(45);case 48:e.next=23;break;case 50:e.next=55;break;case 52:e.prev=52,e.t2=e.catch(21),f.e(e.t2);case 55:return e.prev=55,f.f(),e.finish(55);case 58:case"end":return e.stop()}}),e,this,[[4,14,17,20],[21,52,55,58],[32,42,45,48]])}))},{key:"iterateSnapOutlines",value:o().mark((function e(t,n){var r,i,a,u,c,l,f;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(i=null===(r=this.getSnapGeometryCache().get(t))||void 0===r?void 0:r.getSelfSnapOutline(n))){e.next=4;break}return e.next=4,{shapeId:t,outline:i};case 4:a=s(this.manager.getSnappableShapes()),e.prev=5,a.s();case 7:if((u=a.n()).done){e.next=18;break}if((l=u.value)!==t){e.next=11;break}return e.abrupt("continue",16);case 11:if(f=null===(c=this.getSnapGeometryCache().get(l))||void 0===c?void 0:c.outline){e.next=14;break}return e.abrupt("continue",16);case 14:return e.next=16,{shapeId:l,outline:f};case 16:e.next=7;break;case 18:e.next=23;break;case 20:e.prev=20,e.t0=e.catch(5),a.e(e.t0);case 23:return e.prev=23,a.f(),e.finish(23);case 26:case"end":return e.stop()}}),e,this,[[5,20,23,26]])}))},{key:"getHandleSnapPosition",value:function(e){var t,n=e.currentShapeId,r=e.handle,o=e.handleInPageSpace,i=this.manager.getSnapThreshold(),a=i,u=null,c=s(this.iterateSnapPointsInPageSpace(n,r));try{for(c.s();!(t=c.n()).done;){var l=t.value;M.Vec.DistMin(o,l,a)&&(a=M.Vec.Dist(o,l),u=l)}}catch(x){c.e(x)}finally{c.f()}if(u)return u;var f,d=i,p=null,h=s(this.iterateSnapOutlines(n,r));try{for(h.s();!(f=h.n()).done;){var v=f.value,g=v.shapeId,y=v.outline,m=(0,C.assertExists)(this.editor.getShapePageTransform(g)),b=this.editor.getPointInShapeSpace(g,o),w=y.nearestPoint(b),S=m.applyToPoint(w);M.Vec.DistMin(o,S,d)&&(d=M.Vec.Dist(o,S),p=S)}}catch(x){h.e(x)}finally{h.f()}return p||null}},{key:"snapHandle",value:function(e){var t=e.currentShapeId,n=e.handle,r=(0,C.assertExists)(this.editor.getShapePageTransform(t)).applyToPoint(n),o=this.getHandleSnapPosition({currentShapeId:t,handle:n,handleInPageSpace:r});return o?(this.manager.setIndicators([{id:(0,C.uniqueId)(),type:"points",points:[o]}]),{nudge:M.Vec.Sub(o,r)}):null}}])}();(function(e,t,n,r,o,i){var a,s,c,d,p,h=7&t,g=!!(8&t),x=!!(16&t),j=h>3?e.length+1:h?g?1:2:0,I=m[h+5],T=h>3&&(e[j-1]=[]),E=e[j]||(e[j]=[]),C=h&&(!x&&!g&&(o=o.prototype),h<5&&(h>3||!x)&&f(h<4?o:u("set",u("get",{},n,(function(){return O(this,i)})),n,(function(e){return k(this,i,e)})),n));h?x&&h<4&&y(i,(h>2?"set ":h>1?"get ":"")+n):y(o,n);for(var M=r.length-1;M>=0;M--)d=w(h,n,c={},e[3],E),h&&(d.static=g,d.private=x,p=d.access={has:x?function(e){return P(o,e)}:function(e){return n in e}},3^h&&(p.get=x?function(e){return(1^h?O:_)(e,o,4^h?i:C.get)}:function(e){return e[n]}),h>2&&(p.set=x?function(e,t){return k(e,o,t,4^h?i:C.set)}:function(e,t){return e[n]=t})),s=(0,r[M])(h?h<4?x?i:C[I]:h>4?void 0:{get:C.get,set:C.set}:o,d),c._=1,4^h||void 0===s?b(s)&&(h>4?T.unshift(s):h?x?i=s:C[I]=s:o=s):"object"!==typeof s||null===s?v("Object expected"):(b(a=s.get)&&(C.get=a),b(a=s.set)&&(C.set=a),b(a=s.init)&&T.unshift(a));h||S(e,o),C&&l(o,n,C)})(T=function(e){var t;return[,,,c(null!==(t=null===e||void 0===e?void 0:e[h("metadata")])&&void 0!==t?t:null)]}(null),1,"getSnapGeometryCache",I,R),S(T,R)},57799:function(e,t,n){"use strict";var r,o=n(17383).default,i=n(34579).default,a=n(11303).default,u=n(50883).default,s=Object.create,c=Object.defineProperty,l=Object.getOwnPropertyDescriptor,f=Object.getOwnPropertyNames,d=Object.prototype.hasOwnProperty,p=function(e,t){return(t=Symbol[e])?t:Symbol.for("Symbol."+e)},h=function(e){throw TypeError(e)},v=function(e,t,n){return t in e?c(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},g=function(e,t){return c(e,"name",{value:t,configurable:!0})},y=["class","method","getter","setter","accessor","field","value","get","set"],m=function(e){return void 0!==e&&"function"!==typeof e?h("Function expected"):e},b=function(e,t,n,r,o){return{kind:y[e],name:t,metadata:r,addInitializer:function(e){return n._?h("Already initialized"):o.push(m(e||null))}}},w=function(e,t){return v(t,p("metadata"),e[3])},S=function(e,t,n,r,o,i){var u,s,f,d,p,v=7&t,S=!!(8&t),x=!!(16&t),P=v>3?e.length+1:v?S?1:2:0,I=y[v+5],T=v>3&&(e[P-1]=[]),E=e[P]||(e[P]=[]),C=v&&(!x&&!S&&(o=o.prototype),v<5&&(v>3||!x)&&l(v<4?o:a("set",a("get",{},n,(function(){return k(this,i)})),n,(function(e){return _(this,i,e)})),n));v?x&&v<4&&g(i,(v>2?"set ":v>1?"get ":"")+n):g(o,n);for(var M=r.length-1;M>=0;M--)d=b(v,n,f={},e[3],E),v&&(d.static=S,d.private=x,p=d.access={has:x?function(e){return O(o,e)}:function(e){return n in e}},3^v&&(p.get=x?function(e){return(1^v?k:j)(e,o,4^v?i:C.get)}:function(e){return e[n]}),v>2&&(p.set=x?function(e,t){return _(e,o,t,4^v?i:C.set)}:function(e,t){return e[n]=t})),s=(0,r[M])(v?v<4?x?i:C[I]:v>4?void 0:{get:C.get,set:C.set}:o,d),f._=1,4^v||void 0===s?m(s)&&(v>4?T.unshift(s):v?x?i=s:C[I]=s:o=s):"object"!==typeof s||null===s?h("Object expected"):(m(u=s.get)&&(C.get=u),m(u=s.set)&&(C.set=u),m(u=s.init)&&T.unshift(u));return v||w(e,o),C&&c(o,n,C),x?4^v?i:C:o},x=function(e,t,n){return v(e,"symbol"!==typeof t?t+"":t,n)},P=function(e,t,n){return t.has(e)||h("Cannot "+n)},O=function(e,t){return Object(t)!==t?h('Cannot use the "in" operator on this value'):e.has(t)},k=function(e,t,n){return P(e,t,"read from private field"),n?n.call(e):t.get(e)},_=function(e,t,n,r){return P(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n},j=function(e,t,n){return P(e,t,"access private method"),n},I={};!function(e,t){for(var n in t)c(e,n,{get:t[n],enumerable:!0})}(I,{SnapManager:function(){return L}}),e.exports=(r=I,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,i=u(f(t));try{var a=function(){var i=o.value;d.call(e,i)||i===n||c(e,i,{get:function(){return t[i]},enumerable:!(r=l(t,i))||r.enumerable})};for(i.s();!(o=i.n()).done;)a()}catch(s){i.e(s)}finally{i.f()}}return e}(c({},"__esModule",{value:!0}),r));var T,E,C,M,A=n(81501),D=n(85191),R=n(25850),N=n(4923);C=[A.computed],E=[A.computed],T=[A.computed];var L=function(){return i((function e(t){o(this,e),this.editor=t,function(e,t,n,r){for(var o=0,i=e[t>>1],a=i&&i.length;o<a;o++)1&t?i[o].call(n):r=i[o].call(n,r)}(M,5,this),x(this,"shapeBounds"),x(this,"handles"),x(this,"_snapIndicators",(0,A.atom)("snapLines",void 0)),this.shapeBounds=new R.BoundsSnaps(this),this.handles=new N.HandleSnaps(this)}),[{key:"getIndicators",value:function(){var e;return null!==(e=this._snapIndicators.get())&&void 0!==e?e:A.EMPTY_ARRAY}},{key:"clearIndicators",value:function(){this.getIndicators().length&&this._snapIndicators.set(void 0)}},{key:"setIndicators",value:function(e){this._snapIndicators.set(e)}},{key:"getSnapThreshold",value:function(){return 8/this.editor.getZoomLevel()}},{key:"getSnappableShapes",value:function(){var e,t=this.editor,n=t.getViewportPageBounds(),r=t.getSelectedShapeIds(),o=new Set,i=function(e){if((0,D.isShapeId)(e)){var a=t.getShape(e);a&&t.isShapeOfType(a,"frame")&&o.add(e)}var s,c=t.getSortedChildIdsForParent(e),l=u(c);try{for(l.s();!(s=l.n()).done;){var f=s.value;if(!r.includes(f)){var d=t.getShape(f);if(d)if(t.getShapeUtil(d).canSnap(d)){var p=t.getShapePageBounds(f);p&&n.includes(p)&&(t.isShapeOfType(d,"group")?i(f):o.add(f))}}}}catch(h){l.e(h)}finally{l.f()}};return i(null!==(e=this.getCurrentCommonAncestor())&&void 0!==e?e:t.getCurrentPageId()),o}},{key:"getCurrentCommonAncestor",value:function(){return this.editor.findCommonAncestor(this.editor.getSelectedShapes())}}])}();S(M=function(e){var t;return[,,,s(null!==(t=null===e||void 0===e?void 0:e[p("metadata")])&&void 0!==t?t:null)]}(null),1,"getSnapThreshold",C,L),S(M,1,"getSnappableShapes",E,L),S(M,1,"getCurrentCommonAncestor",T,L),w(M,L)},59252:function(e,t,n){"use strict";var r,o=n(17383).default,i=n(34579).default,a=n(43693).default,u=n(50883).default,s=Object.defineProperty,c=Object.getOwnPropertyDescriptor,l=Object.getOwnPropertyNames,f=Object.prototype.hasOwnProperty,d={};!function(e,t){for(var n in t)s(e,n,{get:t[n],enumerable:!0})}(d,{stack:function(){return h}}),e.exports=(r=d,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,i=u(l(t));try{var a=function(){var i=o.value;f.call(e,i)||i===n||s(e,i,{get:function(){return t[i]},enumerable:!(r=c(t,i))||r.enumerable})};for(i.s();!(o=i.n()).done;)a()}catch(d){i.e(d)}finally{i.f()}}return e}(s({},"__esModule",{value:!0}),r));var p=n(81501);function h(e){if(e){for(var t=v;e.length;)t=t.push(e.pop());return t}return v}var v=new(function(){return i((function e(){o(this,e),a(this,"length",0),a(this,"head",null),a(this,"tail",this)}),[{key:"push",value:function(e){return new g(e,this)}},{key:"toArray",value:function(){return p.EMPTY_ARRAY}},{key:Symbol.iterator,value:function(){return{next:function(){return{value:void 0,done:!0}}}}}])}()),g=function(){function e(t,n){o(this,e),a(this,"length",void 0),this.head=t,this.tail=n,this.length=n.length+1}return i(e,[{key:"push",value:function(t){return new e(t,this)}},{key:"toArray",value:function(){return Array.from(this)}},{key:Symbol.iterator,value:function(){var e=this;return{next:function(){if(e.length){var t=e.head;return e=e.tail,{value:t,done:!1}}return{value:void 0,done:!0}}}}}])}()},8806:function(e,t,n){"use strict";var r,o=n(17383).default,i=n(34579).default,a=n(43693).default,u=n(50883).default,s=Object.defineProperty,c=Object.getOwnPropertyDescriptor,l=Object.getOwnPropertyNames,f=Object.prototype.hasOwnProperty,d={};!function(e,t){for(var n in t)s(e,n,{get:t[n],enumerable:!0})}(d,{TextManager:function(){return y}}),e.exports=(r=d,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,i=u(l(t));try{var a=function(){var i=o.value;f.call(e,i)||i===n||s(e,i,{get:function(){return t[i]},enumerable:!(r=c(t,i))||r.enumerable})};for(i.s();!(o=i.n()).done;)a()}catch(d){i.e(d)}finally{i.f()}}return e}(s({},"__esModule",{value:!0}),r));var p=/\r?\n|\r/g;function h(e){return e.replace(p,"\n").split("\n").map((function(e){return e||" "})).join("\n")}var v={start:"left","start-legacy":"left",middle:"center","middle-legacy":"center",end:"right","end-legacy":"right"},g=/\s/,y=function(){return i((function e(t){o(this,e),a(this,"baseElem",void 0),this.editor=t,this.baseElem=document.createElement("div"),this.baseElem.classList.add("tl-text"),this.baseElem.classList.add("tl-text-measure"),this.baseElem.tabIndex=-1}),[{key:"measureText",value:function(e,t){var n=this.baseElem.cloneNode();this.editor.getContainer().appendChild(n),n.setAttribute("dir","auto"),n.style.setProperty("unicode-bidi","plaintext"),n.style.setProperty("font-family",t.fontFamily),n.style.setProperty("font-style",t.fontStyle),n.style.setProperty("font-weight",t.fontWeight),n.style.setProperty("font-size",t.fontSize+"px"),n.style.setProperty("line-height",t.lineHeight*t.fontSize+"px"),n.style.setProperty("max-width",null===t.maxWidth?null:t.maxWidth+"px"),n.style.setProperty("min-width",null===t.minWidth?null:t.minWidth+"px"),n.style.setProperty("padding",t.padding),n.style.setProperty("overflow-wrap",t.disableOverflowWrapBreaking?"normal":"break-word"),n.textContent=h(e);var r=n.scrollWidth,o=n.getBoundingClientRect();return n.remove(),{x:0,y:0,w:o.width,h:o.height,scrollWidth:r}}},{key:"measureElementTextNodeSpans",value:function(e){var t,n=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).shouldTruncateToFirstLine,r=void 0!==n&&n,o=[],i=e.getBoundingClientRect(),a=-i.left,s=-i.top,c=new Range,l=e.childNodes[0],f=0,d=null,p=null,h=0,v=0,y=!1,m=u(e.childNodes);try{for(m.s();!(t=m.n()).done;){var b,w=t.value;if(w.nodeType===Node.TEXT_NODE){var S,x=u(null!==(b=w.textContent)&&void 0!==b?b:"");try{for(x.s();!(S=x.n()).done;){var P=S.value;c.setStart(l,f),c.setEnd(l,f+P.length);var O=c.getClientRects(),k=O[O.length-1],_=k.top+s,j=k.left+a,I=k.right+a,T=j<v,E=g.test(P);if(E===p&&_===h&&d)T&&(d.box.x=j),d.box.w=T?d.box.w+k.width:I-d.box.x,d.text+=P;else{if(d){if(r&&_!==h){y=!0;break}o.push(d)}d={box:{x:j,y:_,w:k.width,h:k.height},text:P},v=j}"\n"===P&&(v=0),p=E,h=_,f+=P.length}}catch(C){x.e(C)}finally{x.f()}}}}catch(C){m.e(C)}finally{m.f()}return d&&o.push(d),{spans:o,didTruncate:y}}},{key:"measureTextSpans",value:function(e,t){if(""===e)return[];var n=this.baseElem.cloneNode();this.editor.getContainer().appendChild(n);var r=Math.ceil(t.width-2*t.padding);n.setAttribute("dir","auto"),n.style.setProperty("unicode-bidi","plaintext"),n.style.setProperty("width","".concat(r,"px")),n.style.setProperty("height","min-content"),n.style.setProperty("font-size","".concat(t.fontSize,"px")),n.style.setProperty("font-family",t.fontFamily),n.style.setProperty("font-weight",t.fontWeight),n.style.setProperty("line-height","".concat(t.lineHeight*t.fontSize,"px")),n.style.setProperty("text-align",v[t.textAlign]);var o="truncate-ellipsis"===t.overflow||"truncate-clip"===t.overflow;o&&(n.style.setProperty("overflow-wrap","anywhere"),n.style.setProperty("word-break","break-all"));var i=h(e);n.textContent=i;var a=this.measureElementTextNodeSpans(n,{shouldTruncateToFirstLine:o}),u=a.spans,s=a.didTruncate;if("truncate-ellipsis"===t.overflow&&s){n.textContent="\u2026";var c=Math.ceil(this.measureElementTextNodeSpans(n).spans[0].box.w);n.style.setProperty("width","".concat(r-c,"px")),n.textContent=i;var l=this.measureElementTextNodeSpans(n,{shouldTruncateToFirstLine:!0}).spans,f=l[l.length-1];return l.push({text:"\u2026",box:{x:Math.min(f.box.x+f.box.w,t.width-t.padding-c),y:f.box.y,w:c,h:f.box.h}}),l}return n.remove(),u}}])}()},89496:function(e,t,n){"use strict";n(85224);var r,o=n(17383).default,i=n(34579).default,a=n(11303).default,u=n(50883).default,s=Object.create,c=Object.defineProperty,l=Object.getOwnPropertyDescriptor,f=Object.getOwnPropertyNames,d=Object.prototype.hasOwnProperty,p=function(e,t){return(t=Symbol[e])?t:Symbol.for("Symbol."+e)},h=function(e){throw TypeError(e)},v=function(e,t,n){return t in e?c(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},g=function(e,t){return c(e,"name",{value:t,configurable:!0})},y=["class","method","getter","setter","accessor","field","value","get","set"],m=function(e){return void 0!==e&&"function"!==typeof e?h("Function expected"):e},b=function(e,t,n,r,o){return{kind:y[e],name:t,metadata:r,addInitializer:function(e){return n._?h("Already initialized"):o.push(m(e||null))}}},w=function(e,t){return v(t,p("metadata"),e[3])},S=function(e,t,n,r,o,i){var u,s,f,d,p,v=7&t,S=!!(8&t),x=!!(16&t),P=v>3?e.length+1:v?S?1:2:0,I=y[v+5],T=v>3&&(e[P-1]=[]),E=e[P]||(e[P]=[]),C=v&&(!x&&!S&&(o=o.prototype),v<5&&(v>3||!x)&&l(v<4?o:a("set",a("get",{},n,(function(){return k(this,i)})),n,(function(e){return _(this,i,e)})),n));v?x&&v<4&&g(i,(v>2?"set ":v>1?"get ":"")+n):g(o,n);for(var M=r.length-1;M>=0;M--)d=b(v,n,f={},e[3],E),v&&(d.static=S,d.private=x,p=d.access={has:x?function(e){return O(o,e)}:function(e){return n in e}},3^v&&(p.get=x?function(e){return(1^v?k:j)(e,o,4^v?i:C.get)}:function(e){return e[n]}),v>2&&(p.set=x?function(e,t){return _(e,o,t,4^v?i:C.set)}:function(e,t){return e[n]=t})),s=(0,r[M])(v?v<4?x?i:C[I]:v>4?void 0:{get:C.get,set:C.set}:o,d),f._=1,4^v||void 0===s?m(s)&&(v>4?T.unshift(s):v?x?i=s:C[I]=s:o=s):"object"!==typeof s||null===s?h("Object expected"):(m(u=s.get)&&(C.get=u),m(u=s.set)&&(C.set=u),m(u=s.init)&&T.unshift(u));return v||w(e,o),C&&c(o,n,C),x?4^v?i:C:o},x=function(e,t,n){return v(e,"symbol"!==typeof t?t+"":t,n)},P=function(e,t,n){return t.has(e)||h("Cannot "+n)},O=function(e,t){return Object(t)!==t?h('Cannot use the "in" operator on this value'):e.has(t)},k=function(e,t,n){return P(e,t,"read from private field"),n?n.call(e):t.get(e)},_=function(e,t,n,r){return P(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n},j=function(e,t,n){return P(e,t,"access private method"),n},I={};!function(e,t){for(var n in t)c(e,n,{get:t[n],enumerable:!0})}(I,{TickManager:function(){return R}}),e.exports=(r=I,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,i=u(f(t));try{var a=function(){var i=o.value;d.call(e,i)||i===n||c(e,i,{get:function(){return t[i]},enumerable:!(r=l(t,i))||r.enumerable})};for(i.s();!(o=i.n()).done;)a()}catch(s){i.e(s)}finally{i.f()}}return e}(c({},"__esModule",{value:!0}),r));var T,E,C,M=n(30645),A=n(45650),D=M.throttleToNextFrame;E=[M.bind],T=[M.bind];var R=function(){return i((function e(t){o(this,e),this.editor=t,function(e,t,n,r){for(var o=0,i=e[t>>1],a=i&&i.length;o<a;o++)1&t?i[o].call(n):r=i[o].call(n,r)}(C,5,this),x(this,"cancelRaf"),x(this,"isPaused",!0),x(this,"now",0),x(this,"prevPoint",new A.Vec),this.editor.disposables.add(this.dispose),this.start()}),[{key:"start",value:function(){var e;this.isPaused=!1,null===(e=this.cancelRaf)||void 0===e||e.call(this),this.cancelRaf=D(this.tick),this.now=Date.now()}},{key:"tick",value:function(){if(!this.isPaused){var e=Date.now(),t=e-this.now;this.now=e,this.updatePointerVelocity(t),this.editor.emit("frame",t),this.editor.emit("tick",t),this.cancelRaf=D(this.tick)}}},{key:"dispose",value:function(){var e;this.isPaused=!0,null===(e=this.cancelRaf)||void 0===e||e.call(this)}},{key:"updatePointerVelocity",value:function(e){var t=this.prevPoint,n=this.editor.inputs,r=n.currentScreenPoint,o=n.pointerVelocity;if(0!==e){var i=A.Vec.Sub(r,t);this.prevPoint=r.clone();var a=i.len(),u=a?i.div(a):new A.Vec(0,0),s=o.clone().lrp(u.mul(a/e),.5);Math.abs(s.x)<.01&&(s.x=0),Math.abs(s.y)<.01&&(s.y=0),o.equals(s)||(this.editor.inputs.pointerVelocity=s)}}}])}();S(C=function(e){var t;return[,,,s(null!==(t=null===e||void 0===e?void 0:e[p("metadata")])&&void 0!==t?t:null)]}(null),1,"tick",E,R),S(C,1,"dispose",T,R),w(C,R)},47700:function(e,t,n){"use strict";var r,o=n(12897).default,i=n(17383).default,a=n(34579).default,u=n(11303).default,s=n(50883).default,c=Object.create,l=Object.defineProperty,f=Object.getOwnPropertyDescriptor,d=Object.getOwnPropertyNames,p=Object.prototype.hasOwnProperty,h=function(e,t){return(t=Symbol[e])?t:Symbol.for("Symbol."+e)},v=function(e){throw TypeError(e)},g=function(e,t,n){return t in e?l(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},y=function(e,t){return l(e,"name",{value:t,configurable:!0})},m=["class","method","getter","setter","accessor","field","value","get","set"],b=function(e){return void 0!==e&&"function"!==typeof e?v("Function expected"):e},w=function(e,t,n,r,o){return{kind:m[e],name:t,metadata:r,addInitializer:function(e){return n._?v("Already initialized"):o.push(b(e||null))}}},S=function(e,t){return g(t,h("metadata"),e[3])},x=function(e,t,n,r,o,i){var a,s,c,d,p,h=7&t,g=!!(8&t),x=!!(16&t),P=h>3?e.length+1:h?g?1:2:0,O=m[h+5],T=h>3&&(e[P-1]=[]),E=e[P]||(e[P]=[]),C=h&&(!x&&!g&&(o=o.prototype),h<5&&(h>3||!x)&&f(h<4?o:u("set",u("get",{},n,(function(){return _(this,i)})),n,(function(e){return j(this,i,e)})),n));h?x&&h<4&&y(i,(h>2?"set ":h>1?"get ":"")+n):y(o,n);for(var M=r.length-1;M>=0;M--)d=w(h,n,c={},e[3],E),h&&(d.static=g,d.private=x,p=d.access={has:x?function(e){return k(o,e)}:function(e){return n in e}},3^h&&(p.get=x?function(e){return(1^h?_:I)(e,o,4^h?i:C.get)}:function(e){return e[n]}),h>2&&(p.set=x?function(e,t){return j(e,o,t,4^h?i:C.set)}:function(e,t){return e[n]=t})),s=(0,r[M])(h?h<4?x?i:C[O]:h>4?void 0:{get:C.get,set:C.set}:o,d),c._=1,4^h||void 0===s?b(s)&&(h>4?T.unshift(s):h?x?i=s:C[O]=s:o=s):"object"!==typeof s||null===s?v("Object expected"):(b(a=s.get)&&(C.get=a),b(a=s.set)&&(C.set=a),b(a=s.init)&&T.unshift(a));return h||S(e,o),C&&l(o,n,C),x?4^h?i:C:o},P=function(e,t,n){return g(e,"symbol"!==typeof t?t+"":t,n)},O=function(e,t,n){return t.has(e)||v("Cannot "+n)},k=function(e,t){return Object(t)!==t?v('Cannot use the "in" operator on this value'):e.has(t)},_=function(e,t,n){return O(e,t,"read from private field"),n?n.call(e):t.get(e)},j=function(e,t,n,r){return O(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n},I=function(e,t,n){return O(e,t,"access private method"),n},T={};!function(e,t){for(var n in t)l(e,n,{get:t[n],enumerable:!0})}(T,{UserPreferencesManager:function(){return G}}),e.exports=(r=T,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,i=s(d(t));try{var a=function(){var i=o.value;p.call(e,i)||i===n||l(e,i,{get:function(){return t[i]},enumerable:!(r=f(t,i))||r.enumerable})};for(i.s();!(o=i.n()).done;)a()}catch(u){i.e(u)}finally{i.f()}}return e}(l({},"__esModule",{value:!0}),r));var E,C,M,A,D,R,N,L,U,F,B,V,z,H=n(81501),K=n(7115);V=[H.computed],B=[H.computed],F=[H.computed],U=[H.computed],L=[H.computed],N=[H.computed],R=[H.computed],D=[H.computed],A=[H.computed],M=[H.computed],C=[H.computed],E=[H.computed];var G=function(){return a((function e(t,n){var r=this;if(i(this,e),this.user=t,this.inferDarkMode=n,function(e,t,n,r){for(var o=0,i=e[t>>1],a=i&&i.length;o<a;o++)1&t?i[o].call(n):r=i[o].call(n,r)}(z,5,this),P(this,"systemColorScheme",(0,H.atom)("systemColorScheme","light")),P(this,"disposables",new Set),"undefined"!==typeof window&&"matchMedia"in window){var o=window.matchMedia("(prefers-color-scheme: dark)");null!==o&&void 0!==o&&o.matches&&this.systemColorScheme.set("dark");var a=function(e){e.matches?r.systemColorScheme.set("dark"):r.systemColorScheme.set("light")};null===o||void 0===o||o.addEventListener("change",a),this.disposables.add((function(){return null===o||void 0===o?void 0:o.removeEventListener("change",a)}))}}),[{key:"dispose",value:function(){this.disposables.forEach((function(e){return e()}))}},{key:"updateUserPreferences",value:function(e){this.user.setUserPreferences(o(o({},this.user.userPreferences.get()),e))}},{key:"getUserPreferences",value:function(){return{id:this.getId(),name:this.getName(),locale:this.getLocale(),color:this.getColor(),animationSpeed:this.getAnimationSpeed(),isSnapMode:this.getIsSnapMode(),colorScheme:this.user.userPreferences.get().colorScheme,isDarkMode:this.getIsDarkMode(),isWrapMode:this.getIsWrapMode(),isDynamicResizeMode:this.getIsDynamicResizeMode()}}},{key:"getIsDarkMode",value:function(){switch(this.user.userPreferences.get().colorScheme){case"dark":return!0;case"light":return!1;case"system":return"dark"===this.systemColorScheme.get();default:return!!this.inferDarkMode&&"dark"===this.systemColorScheme.get()}}},{key:"getEdgeScrollSpeed",value:function(){var e;return null!==(e=this.user.userPreferences.get().edgeScrollSpeed)&&void 0!==e?e:K.defaultUserPreferences.edgeScrollSpeed}},{key:"getAnimationSpeed",value:function(){var e;return null!==(e=this.user.userPreferences.get().animationSpeed)&&void 0!==e?e:K.defaultUserPreferences.animationSpeed}},{key:"getId",value:function(){return this.user.userPreferences.get().id}},{key:"getName",value:function(){var e;return null!==(e=this.user.userPreferences.get().name)&&void 0!==e?e:K.defaultUserPreferences.name}},{key:"getLocale",value:function(){var e;return null!==(e=this.user.userPreferences.get().locale)&&void 0!==e?e:K.defaultUserPreferences.locale}},{key:"getColor",value:function(){var e;return null!==(e=this.user.userPreferences.get().color)&&void 0!==e?e:K.defaultUserPreferences.color}},{key:"getIsSnapMode",value:function(){var e;return null!==(e=this.user.userPreferences.get().isSnapMode)&&void 0!==e?e:K.defaultUserPreferences.isSnapMode}},{key:"getIsWrapMode",value:function(){var e;return null!==(e=this.user.userPreferences.get().isWrapMode)&&void 0!==e?e:K.defaultUserPreferences.isWrapMode}},{key:"getIsDynamicResizeMode",value:function(){var e;return null!==(e=this.user.userPreferences.get().isDynamicSizeMode)&&void 0!==e?e:K.defaultUserPreferences.isDynamicSizeMode}},{key:"getIsPasteAtCursorMode",value:function(){var e;return null!==(e=this.user.userPreferences.get().isPasteAtCursorMode)&&void 0!==e?e:K.defaultUserPreferences.isPasteAtCursorMode}}])}();x(z=function(e){var t;return[,,,c(null!==(t=null===e||void 0===e?void 0:e[h("metadata")])&&void 0!==t?t:null)]}(null),1,"getUserPreferences",V,G),x(z,1,"getIsDarkMode",B,G),x(z,1,"getEdgeScrollSpeed",F,G),x(z,1,"getAnimationSpeed",U,G),x(z,1,"getId",L,G),x(z,1,"getName",N,G),x(z,1,"getLocale",R,G),x(z,1,"getColor",D,G),x(z,1,"getIsSnapMode",A,G),x(z,1,"getIsWrapMode",M,G),x(z,1,"getIsDynamicResizeMode",C,G),x(z,1,"getIsPasteAtCursorMode",E,G),S(z,G)},6071:function(e,t,n){"use strict";var r,o=n(12897).default,i=n(17383).default,a=n(34579).default,u=n(18336).default,s=n(29511).default,c=n(50883).default,l=Object.defineProperty,f=Object.getOwnPropertyDescriptor,d=Object.getOwnPropertyNames,p=Object.prototype.hasOwnProperty,h={};!function(e,t){for(var n in t)l(e,n,{get:t[n],enumerable:!0})}(h,{BaseBoxShapeUtil:function(){return b}}),e.exports=(r=h,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,i=c(d(t));try{var a=function(){var i=o.value;p.call(e,i)||i===n||l(e,i,{get:function(){return t[i]},enumerable:!(r=f(t,i))||r.enumerable})};for(i.s();!(o=i.n()).done;)a()}catch(u){i.e(u)}finally{i.f()}}return e}(l({},"__esModule",{value:!0}),r));var v=n(30645),g=n(12922),y=n(16023),m=n(39335),b=function(e){function t(){return i(this,t),u(this,t,arguments)}return s(t,e),a(t,[{key:"getGeometry",value:function(e){return new g.Rectangle2d({width:e.props.w,height:e.props.h,isFilled:!0})}},{key:"onResize",value:function(e,t){return(0,m.resizeBox)(e,t)}},{key:"getHandleSnapGeometry",value:function(e){return{points:this.getGeometry(e).bounds.cornersAndCenter}}},{key:"getInterpolatedProps",value:function(e,t,n){return o(o({},t.props),{},{w:(0,v.lerp)(e.props.w,t.props.w,n),h:(0,v.lerp)(e.props.h,t.props.h,n)})}}])}(y.ShapeUtil)},16023:function(e,t,n){"use strict";var r,o=n(17383).default,i=n(34579).default,a=n(43693).default,u=n(50883).default,s=Object.defineProperty,c=Object.getOwnPropertyDescriptor,l=Object.getOwnPropertyNames,f=Object.prototype.hasOwnProperty,d={};!function(e,t){for(var n in t)s(e,n,{get:t[n],enumerable:!0})}(d,{ShapeUtil:function(){return p}}),e.exports=(r=d,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,i=u(l(t));try{var a=function(){var i=o.value;f.call(e,i)||i===n||s(e,i,{get:function(){return t[i]},enumerable:!(r=c(t,i))||r.enumerable})};for(i.s();!(o=i.n()).done;)a()}catch(d){i.e(d)}finally{i.f()}}return e}(s({},"__esModule",{value:!0}),r));var p=function(){return i((function e(t){o(this,e),this.editor=t}),[{key:"canSnap",value:function(e){return!0}},{key:"canScroll",value:function(e){return!1}},{key:"canBind",value:function(e){return!0}},{key:"canEdit",value:function(e){return!1}},{key:"canResize",value:function(e){return!0}},{key:"canEditInReadOnly",value:function(e){return!1}},{key:"canCrop",value:function(e){return!1}},{key:"canBeLaidOut",value:function(e){return!0}},{key:"providesBackgroundForChildren",value:function(e){return!1}},{key:"hideResizeHandles",value:function(e){return!1}},{key:"hideRotateHandle",value:function(e){return!1}},{key:"hideSelectionBoundsBg",value:function(e){return!1}},{key:"hideSelectionBoundsFg",value:function(e){return!1}},{key:"isAspectRatioLocked",value:function(e){return!1}},{key:"canReceiveNewChildrenOfType",value:function(e,t){return!1}},{key:"canDropShapes",value:function(e,t){return!1}},{key:"expandSelectionOutlinePx",value:function(e){return 0}},{key:"getCanvasSvgDefs",value:function(){return[]}},{key:"getBoundsSnapGeometry",value:function(e){return{}}},{key:"getHandleSnapGeometry",value:function(e){return{}}},{key:"getText",value:function(e){}}])}();a(p,"props",void 0),a(p,"migrations",void 0),a(p,"type",void 0)},82966:function(e,t,n){"use strict";var r,o=n(50883).default,i=Object.defineProperty,a=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,c={};!function(e,t){for(var n in t)i(e,n,{get:t[n],enumerable:!0})}(c,{DashedOutlineBox:function(){return h}}),e.exports=(r=c,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var c,l=o(u(t));try{var f=function(){var o=c.value;s.call(e,o)||o===n||i(e,o,{get:function(){return t[o]},enumerable:!(r=a(t,o))||r.enumerable})};for(l.s();!(c=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(i({},"__esModule",{value:!0}),r));var l=n(44414),f=n(61267),d=n(10076),p=n(28015);function h(e){var t=e.bounds,n=e.className,r=(0,d.useEditor)(),o=(0,f.useValue)("zoom level",(function(){return r.getZoomLevel()}),[r]);return(0,l.jsx)("g",{className:n,pointerEvents:"none",strokeLinecap:"round",strokeLinejoin:"round",children:t.sides.map((function(e,t){var n=(0,p.getPerfectDashProps)(e[0].dist(e[1]),1/o,{style:"dashed",lengthRatio:4}),r=n.strokeDasharray,i=n.strokeDashoffset;return(0,l.jsx)("line",{x1:e[0].x,y1:e[0].y,x2:e[1].x,y2:e[1].y,strokeDasharray:r,strokeDashoffset:i},t)}))})}},71004:function(e,t,n){"use strict";var r,o=n(17383).default,i=n(34579).default,a=n(18336).default,u=n(29511).default,s=n(43693).default,c=n(50883).default,l=Object.defineProperty,f=Object.getOwnPropertyDescriptor,d=Object.getOwnPropertyNames,p=Object.prototype.hasOwnProperty,h={};!function(e,t){for(var n in t)l(e,n,{get:t[n],enumerable:!0})}(h,{GroupShapeUtil:function(){return O}}),e.exports=(r=h,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,i=c(d(t));try{var a=function(){var i=o.value;p.call(e,i)||i===n||l(e,i,{get:function(){return t[i]},enumerable:!(r=f(t,i))||r.enumerable})};for(i.s();!(o=i.n()).done;)a()}catch(u){i.e(u)}finally{i.f()}}return e}(l({},"__esModule",{value:!0}),r));var v=n(44414),g=n(85191),y=n(36765),m=n(65388),b=n(47961),w=n(8779),S=n(12922),x=n(16023),P=n(82966),O=function(e){function t(){return o(this,t),a(this,t,arguments)}return u(t,e),i(t,[{key:"hideSelectionBoundsFg",value:function(){return!0}},{key:"canBind",value:function(){return!1}},{key:"getDefaultProps",value:function(){return{}}},{key:"getGeometry",value:function(e){var t=this,n=this.editor.getSortedChildIdsForParent(e.id);return 0===n.length?new S.Rectangle2d({width:1,height:1,isFilled:!1}):new m.Group2d({children:n.map((function(e){var n=t.editor.getShape(e),r=t.editor.getShapeGeometry(e),o=t.editor.getShapeLocalTransform(n).applyToPoints(r.vertices);return r.isClosed?new b.Polygon2d({points:o,isFilled:!0}):new w.Polyline2d({points:o})}))})}},{key:"component",value:function(e){var t=this,n=this.editor.getErasingShapeIds().includes(e.id),r=this.editor.getCurrentPageState().hintingShapeIds,o=r.length>0&&r.some((function(n){return n!==e.id&&t.editor.isShapeOfType(t.editor.getShape(n),"group")})),i=this.editor.getCurrentPageState().focusedGroupId!==e.id;if(!n&&(i||o))return null;var a=this.editor.getShapeGeometry(e).bounds;return(0,v.jsx)(y.SVGContainer,{children:(0,v.jsx)(P.DashedOutlineBox,{className:"tl-group",bounds:a})})}},{key:"indicator",value:function(e){var t=this.editor.getShapeGeometry(e).bounds;return(0,v.jsx)(P.DashedOutlineBox,{className:"",bounds:t})}},{key:"onChildrenChange",value:function(e){var t=this.editor.getSortedChildIdsForParent(e.id);return 0===t.length?(this.editor.getCurrentPageState().focusedGroupId===e.id&&this.editor.popFocusedGroupId(),void this.editor.deleteShapes([e.id])):1===t.length?(this.editor.getCurrentPageState().focusedGroupId===e.id&&this.editor.popFocusedGroupId(),this.editor.reparentShapes(t,e.parentId),void this.editor.deleteShapes([e.id])):void 0}}])}(x.ShapeUtil);s(O,"type","group"),s(O,"props",g.groupShapeProps),s(O,"migrations",g.groupShapeMigrations)},28015:function(e,t,n){"use strict";var r,o=n(50883).default,i=Object.defineProperty,a=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,c={};function l(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.closed,o=void 0!==r&&r,i=n.snap,a=void 0===i?1:i,u=n.start,s=void 0===u?"outset":u,c=n.end,l=void 0===c?"outset":c,f=n.lengthRatio,d=void 0===f?2:f,p=n.style,h=void 0===p?"dashed":p,v=n.forceSolid,g=0,y=0,m=1,b=0,w=0;if(void 0!==v&&v)return{strokeDasharray:"none",strokeDashoffset:"none"};switch(h){case"dashed":m=1,g=Math.min(t*d,e/4);break;case"dotted":g=t/(m=100);break;default:return{strokeDasharray:"none",strokeDashoffset:"none"}}return o||("outset"===s?(e+=g/2,w+=g/2):"skip"===s&&(e-=g,w-=g),"outset"===l?e+=g/2:"skip"===l&&(e-=g)),y=Math.floor(e/g/(2*m)),(y-=y%a)<3&&"dashed"===h?e/t<4?(g=e,y=1,b=0):(g=e*(1/3),b=e*(1/3)):(g=e/y/(2*m),o?(w=g/2,b=(e-y*g)/y):b=(e-y*g)/Math.max(1,y-1)),{strokeDasharray:[g,b].join(" "),strokeDashoffset:w.toString()}}!function(e,t){for(var n in t)i(e,n,{get:t[n],enumerable:!0})}(c,{getPerfectDashProps:function(){return l}}),e.exports=(r=c,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var c,l=o(u(t));try{var f=function(){var o=c.value;s.call(e,o)||o===n||i(e,o,{get:function(){return t[o]},enumerable:!(r=a(t,o))||r.enumerable})};for(l.s();!(c=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(i({},"__esModule",{value:!0}),r))},39335:function(e,t,n){"use strict";var r,o=n(12897).default,i=n(50883).default,a=Object.defineProperty,u=Object.getOwnPropertyDescriptor,s=Object.getOwnPropertyNames,c=Object.prototype.hasOwnProperty,l={};!function(e,t){for(var n in t)a(e,n,{get:t[n],enumerable:!0})}(l,{resizeBox:function(){return d}}),e.exports=(r=l,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,l=i(s(t));try{var f=function(){var i=o.value;c.call(e,i)||i===n||a(e,i,{get:function(){return t[i]},enumerable:!(r=u(t,i))||r.enumerable})};for(l.s();!(o=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(a({},"__esModule",{value:!0}),r));var f=n(45650);function d(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=t.newPoint,i=t.handle,a=t.scaleX,u=t.scaleY,s=n.minWidth,c=void 0===s?1:s,l=n.maxWidth,d=void 0===l?1/0:l,p=n.minHeight,h=void 0===p?1:p,v=n.maxHeight,g=void 0===v?1/0:v,y=e.props.w*a,m=e.props.h*u,b=new f.Vec(0,0);if(y>0){if(y<c){switch(i){case"top_left":case"left":case"bottom_left":b.x=y-c;break;case"top":case"bottom":b.x=(y-c)/2;break;default:b.x=0}y=c}}else if(b.x=y,(y=-y)<c){switch(i){case"top_left":case"left":case"bottom_left":b.x=-y;break;default:b.x=-c}y=c}if(m>0){if(m<h){switch(i){case"top_left":case"top":case"top_right":b.y=m-h;break;case"right":case"left":b.y=(m-h)/2;break;default:b.y=0}m=h}}else if(b.y=m,(m=-m)<h){switch(i){case"top_left":case"top":case"top_right":b.y=-m;break;default:b.y=-h}m=h}var w=b.rot(e.rotation).add(r),S=w.x,x=w.y;return o(o({},e),{},{x:S,y:x,props:{w:Math.min(d,y),h:Math.min(g,m)}})}},18956:function(e,t,n){"use strict";var r,o=n(17383).default,i=n(34579).default,a=n(18336).default,u=n(29511).default,s=n(43693).default,c=n(50883).default,l=Object.defineProperty,f=Object.getOwnPropertyDescriptor,d=Object.getOwnPropertyNames,p=Object.prototype.hasOwnProperty,h={};!function(e,t){for(var n in t)l(e,n,{get:t[n],enumerable:!0})}(h,{BaseBoxShapeTool:function(){return m}}),e.exports=(r=h,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,i=c(d(t));try{var a=function(){var i=o.value;p.call(e,i)||i===n||l(e,i,{get:function(){return t[i]},enumerable:!(r=f(t,i))||r.enumerable})};for(i.s();!(o=i.n()).done;)a()}catch(u){i.e(u)}finally{i.f()}}return e}(l({},"__esModule",{value:!0}),r));var v=n(50646),g=n(18711),y=n(47815),m=function(e){function t(){return o(this,t),a(this,t,arguments)}return u(t,e),i(t,null,[{key:"children",value:function(){return[g.Idle,y.Pointing]}}])}(v.StateNode);s(m,"id","box"),s(m,"initial","idle")},18711:function(e,t,n){"use strict";var r,o=n(17383).default,i=n(34579).default,a=n(18336).default,u=n(29511).default,s=n(43693).default,c=n(50883).default,l=Object.defineProperty,f=Object.getOwnPropertyDescriptor,d=Object.getOwnPropertyNames,p=Object.prototype.hasOwnProperty,h={};!function(e,t){for(var n in t)l(e,n,{get:t[n],enumerable:!0})}(h,{Idle:function(){return v}}),e.exports=(r=h,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,i=c(d(t));try{var a=function(){var i=o.value;p.call(e,i)||i===n||l(e,i,{get:function(){return t[i]},enumerable:!(r=f(t,i))||r.enumerable})};for(i.s();!(o=i.n()).done;)a()}catch(u){i.e(u)}finally{i.f()}}return e}(l({},"__esModule",{value:!0}),r));var v=function(e){function t(){return o(this,t),a(this,t,arguments)}return u(t,e),i(t,[{key:"onPointerDown",value:function(e){this.parent.transition("pointing",e)}},{key:"onEnter",value:function(){this.editor.setCursor({type:"cross",rotation:0})}},{key:"onCancel",value:function(){this.editor.setCurrentTool("select")}}])}(n(50646).StateNode);s(v,"id","idle")},47815:function(e,t,n){"use strict";var r,o=n(12897).default,i=n(17383).default,a=n(34579).default,u=n(18336).default,s=n(29511).default,c=n(43693).default,l=n(50883).default,f=Object.defineProperty,d=Object.getOwnPropertyDescriptor,p=Object.getOwnPropertyNames,h=Object.prototype.hasOwnProperty,v={};!function(e,t){for(var n in t)f(e,n,{get:t[n],enumerable:!0})}(v,{Pointing:function(){return b},maybeSnapToGrid:function(){return w}}),e.exports=(r=v,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,i=l(p(t));try{var a=function(){var i=o.value;h.call(e,i)||i===n||f(e,i,{get:function(){return t[i]},enumerable:!(r=d(t,i))||r.enumerable})};for(i.s();!(o=i.n()).done;)a()}catch(u){i.e(u)}finally{i.f()}}return e}(f({},"__esModule",{value:!0}),r));var g=n(85191),y=n(30645),m=n(45650),b=function(e){function t(){return i(this,t),u(this,t,arguments)}return s(t,e),a(t,[{key:"onPointerMove",value:function(e){if(this.editor.inputs.isDragging){var t=this.editor.inputs.originPagePoint,n=this.parent.shapeType,r=(0,g.createShapeId)(),i=this.editor.markHistoryStoppingPoint("creating_box:".concat(r)),a=w(t,this.editor);this.editor.createShapes([{id:r,type:n,x:a.x,y:a.y,props:{w:1,h:1}}]).select(r);var u=this.parent;this.editor.setCurrentTool("select.resizing",o(o({},e),{},{target:"selection",handle:"bottom_right",isCreating:!0,creatingMarkId:i,creationCursorOffset:{x:1,y:1},onInteractionEnd:this.parent.id,onCreate:u.onCreate?function(e){var t;return null===(t=u.onCreate)||void 0===t?void 0:t.call(u,e)}:void 0}))}}},{key:"onPointerUp",value:function(){this.complete()}},{key:"onCancel",value:function(){this.cancel()}},{key:"onComplete",value:function(){this.complete()}},{key:"onInterrupt",value:function(){this.cancel()}},{key:"complete",value:function(){var e=this.editor.inputs.originPagePoint,t=this.parent.shapeType,n=(0,g.createShapeId)();this.editor.markHistoryStoppingPoint("creating_box:".concat(n)),this.editor.createShapes([{id:n,type:t,x:e.x,y:e.y}]);var r=this.editor.getShape(n);if(r){var o=r.props,i=o.w,a=o.h,u=new m.Vec(i/2,a/2),s=this.editor.getShapeParentTransform(r);s&&u.rot(-s.rotation());var c=1;this.editor.user.getIsDynamicResizeMode()&&(i*=c=1/this.editor.getZoomLevel(),a*=c,u.mul(c));var l=(0,y.structuredClone)(r),f=w(new m.Vec(r.x-u.x,r.y-u.y),this.editor);l.x=f.x,l.y=f.y,l.props.w=i,l.props.h=a,"scale"in r.props&&(l.props.scale=c),this.editor.updateShape(l),this.editor.setSelectedShapes([n]),this.editor.getInstanceState().isToolLocked?this.parent.transition("idle"):this.editor.setCurrentTool("select.idle")}else this.cancel()}},{key:"cancel",value:function(){this.parent.transition("idle")}}])}(n(50646).StateNode);function w(e,t){var n=t.getInstanceState().isGridMode,r=t.getDocumentSettings().gridSize;return n?e.clone().snapToGrid(r):e.clone()}c(b,"id","pointing")},43006:function(e,t,n){"use strict";var r,o=n(12897).default,i=n(17383).default,a=n(34579).default,u=n(18336).default,s=n(29511).default,c=n(43693).default,l=n(50883).default,f=Object.defineProperty,d=Object.getOwnPropertyDescriptor,p=Object.getOwnPropertyNames,h=Object.prototype.hasOwnProperty,v={};!function(e,t){for(var n in t)f(e,n,{get:t[n],enumerable:!0})}(v,{RootState:function(){return g}}),e.exports=(r=v,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,i=l(p(t));try{var a=function(){var i=o.value;h.call(e,i)||i===n||f(e,i,{get:function(){return t[i]},enumerable:!(r=d(t,i))||r.enumerable})};for(i.s();!(o=i.n()).done;)a()}catch(u){i.e(u)}finally{i.f()}}return e}(f({},"__esModule",{value:!0}),r));var g=function(e){function t(){return i(this,t),u(this,t,arguments)}return s(t,e),a(t,[{key:"onKeyDown",value:function(e){if("KeyZ"===e.code)if(!e.shiftKey&&!e.ctrlKey){var t,n=this.getCurrent();n&&"idle"===(null===(t=n.getCurrent())||void 0===t?void 0:t.id)&&this.children.zoom&&this.editor.setCurrentTool("zoom",o(o({},e),{},{onInteractionEnd:n.id}))}}}],[{key:"children",value:function(){return[]}}])}(n(50646).StateNode);c(g,"id","root"),c(g,"initial","")},50646:function(e,t,n){"use strict";var r,o=n(17383).default,i=n(34579).default,a=n(43693).default,u=n(50883).default,s=Object.defineProperty,c=Object.getOwnPropertyDescriptor,l=Object.getOwnPropertyNames,f=Object.prototype.hasOwnProperty,d={};!function(e,t){for(var n in t)s(e,n,{get:t[n],enumerable:!0})}(d,{StateNode:function(){return m}}),e.exports=(r=d,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,i=u(l(t));try{var a=function(){var i=o.value;f.call(e,i)||i===n||s(e,i,{get:function(){return t[i]},enumerable:!(r=c(t,i))||r.enumerable})};for(i.s();!(o=i.n()).done;)a()}catch(d){i.e(d)}finally{i.f()}}return e}(s({},"__esModule",{value:!0}),r));var p=n(81501),h=n(30645),v=n(1074),g=n(79741),y=["brushing","cropping","dragging","dragging_handle","drawing","erasing","lasering","resizing","rotating","scribble_brushing","translating"],m=function(){return i((function e(t,n){var r=this;o(this,e),a(this,"performanceTracker",void 0),a(this,"id",void 0),a(this,"type",void 0),a(this,"shapeType",void 0),a(this,"initial",void 0),a(this,"children",void 0),a(this,"isLockable",void 0),a(this,"parent",void 0),a(this,"_path",void 0),a(this,"_current",void 0),a(this,"_isActive",void 0),a(this,"_currentToolIdMask",(0,p.atom)("curent tool id mask",void 0)),this.editor=t;var i=this.constructor,u=i.id,s=i.children,c=i.initial,l=i.isLockable;this.id=u,this._isActive=(0,p.atom)("toolIsActive"+this.id,!1),this._current=(0,p.atom)("toolState"+this.id,void 0),this._path=(0,p.computed)("toolPath"+this.id,(function(){var e=r.getCurrent();return r.id+(e?".".concat(e.getPath()):"")})),this.parent=null!==n&&void 0!==n?n:{},this.parent?s&&c?(this.type="branch",this.initial=c,this.children=Object.fromEntries(s().map((function(e){return[e.id,new e(r.editor,r)]}))),this._current.set(this.children[this.initial])):this.type="leaf":(this.type="root",s&&c&&(this.initial=c,this.children=Object.fromEntries(s().map((function(e){return[e.id,new e(r.editor,r)]}))),this._current.set(this.children[this.initial]))),this.isLockable=l,this.performanceTracker=new h.PerformanceTracker}),[{key:"getPath",value:function(){return this._path.get()}},{key:"getCurrent",value:function(){return this._current.get()}},{key:"getIsActive",value:function(){return this._isActive.get()}},{key:"transition",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.split("."),r=this,o=0;o<n.length;o++){var i,a=n[o],u=r.getCurrent(),s=null===(i=r.children)||void 0===i?void 0:i[a];if(!s)throw Error("".concat(r.id," - no child state exists with the id ").concat(a,"."));if((null===u||void 0===u?void 0:u.id)!==s.id&&(null===u||void 0===u||u.exit(t,a),r._current.set(s),s.enter(t,(null===u||void 0===u?void 0:u.id)||"initial"),!s.getIsActive()))break;r=s}return this}},{key:"handleEvent",value:function(e){var t,n=g.EVENT_NAME_MAP[e.name],r=this._current.__unsafe__getWithoutCapture();null===(t=this[n])||void 0===t||t.call(this,e),this._isActive.__unsafe__getWithoutCapture()&&r&&r===this._current.__unsafe__getWithoutCapture()&&r.handleEvent(e)}},{key:"enter",value:function(e,t){var n;if(v.debugFlags.measurePerformance.get()&&y.includes(this.id)&&this.performanceTracker.start(this.id),this._isActive.set(!0),null===(n=this.onEnter)||void 0===n||n.call(this,e,t),this.children&&this.initial&&this.getIsActive()){var r=this.children[this.initial];this._current.set(r),r.enter(e,t)}}},{key:"exit",value:function(e,t){var n,r;(v.debugFlags.measurePerformance.get()&&this.performanceTracker.isStarted()&&this.performanceTracker.stop(),this._isActive.set(!1),null===(n=this.onExit)||void 0===n||n.call(this,e,t),this.getIsActive())||(null===(r=this.getCurrent())||void 0===r||r.exit(e,t))}},{key:"getCurrentToolIdMask",value:function(){return this._currentToolIdMask.get()}},{key:"setCurrentToolIdMask",value:function(e){this._currentToolIdMask.set(e)}}])}();a(m,"id",void 0),a(m,"initial",void 0),a(m,"children",void 0),a(m,"isLockable",!0)},73470:function(e,t,n){"use strict";var r,o=n(85715).default,i=n(50883).default,a=Object.defineProperty,u=Object.getOwnPropertyDescriptor,s=Object.getOwnPropertyNames,c=Object.prototype.hasOwnProperty,l={};!function(e,t){for(var n in t)a(e,n,{get:t[n],enumerable:!0})}(l,{SvgExportContextProvider:function(){return m},useDelaySvgExport:function(){return w},useSvgExportContext:function(){return b}}),e.exports=(r=l,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,l=i(s(t));try{var f=function(){var i=o.value;c.call(e,i)||i===n||a(e,i,{get:function(){return t[i]},enumerable:!(r=u(t,i))||r.enumerable})};for(l.s();!(o=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(a({},"__esModule",{value:!0}),r));var f=n(44414),d=n(30645),p=n(9950),h=n(77374),v=n(10076),g=n(88797),y=(0,p.createContext)(null);function m(e){var t=e.context,n=e.editor,r=e.children,o=n.options.exportProvider;return(0,f.jsx)(v.EditorProvider,{editor:n,children:(0,f.jsx)(h.ContainerProvider,{container:n.getContainer(),children:(0,f.jsx)(y.Provider,{value:t,children:(0,f.jsx)(o,{children:r})})})})}function b(){return(0,p.useContext)(y)}function w(){var e=(0,p.useContext)(y),t=(0,p.useState)(d.promiseWithResolve),n=o(t,1)[0];return(0,p.useEffect)((function(){return null===e||void 0===e||e.waitUntil(n),function(){n.resolve()}}),[n,e]),(0,g.useEvent)((function(){n.resolve()}))}},79741:function(e,t,n){"use strict";var r,o=n(50883).default,i=Object.defineProperty,a=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,c={};!function(e,t){for(var n in t)i(e,n,{get:t[n],enumerable:!0})}(c,{EVENT_NAME_MAP:function(){return l}}),e.exports=(r=c,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var c,l=o(u(t));try{var f=function(){var o=c.value;s.call(e,o)||o===n||i(e,o,{get:function(){return t[o]},enumerable:!(r=a(t,o))||r.enumerable})};for(l.s();!(c=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(i({},"__esModule",{value:!0}),r));var l={wheel:"onWheel",pointer_down:"onPointerDown",pointer_move:"onPointerMove",long_press:"onLongPress",pointer_up:"onPointerUp",right_click:"onRightClick",middle_click:"onMiddleClick",key_down:"onKeyDown",key_up:"onKeyUp",key_repeat:"onKeyRepeat",cancel:"onCancel",complete:"onComplete",interrupt:"onInterrupt",double_click:"onDoubleClick",triple_click:"onTripleClick",quadruple_click:"onQuadrupleClick",tick:"onTick"}},25020:function(e,t,n){"use strict";var r,o=n(4633).default,i=n(29293).default,a=n(17383).default,u=n(34579).default,s=n(11303).default,c=n(50883).default,l=Object.create,f=Object.defineProperty,d=Object.getOwnPropertyDescriptor,p=Object.getOwnPropertyNames,h=Object.prototype.hasOwnProperty,v=function(e,t){return(t=Symbol[e])?t:Symbol.for("Symbol."+e)},g=function(e){throw TypeError(e)},y=function(e,t,n){return t in e?f(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},m=function(e,t){return f(e,"name",{value:t,configurable:!0})},b=["class","method","getter","setter","accessor","field","value","get","set"],w=function(e){return void 0!==e&&"function"!==typeof e?g("Function expected"):e},S=function(e,t,n,r,o){return{kind:b[e],name:t,metadata:r,addInitializer:function(e){return n._?g("Already initialized"):o.push(w(e||null))}}},x=function(e,t){return y(t,v("metadata"),e[3])},P=function(e,t,n){return y(e,"symbol"!==typeof t?t+"":t,n)},O=function(e,t,n){return t.has(e)||g("Cannot "+n)},k=function(e,t){return Object(t)!==t?g('Cannot use the "in" operator on this value'):e.has(t)},_=function(e,t,n){return O(e,t,"read from private field"),n?n.call(e):t.get(e)},j=function(e,t,n,r){return O(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n},I=function(e,t,n){return O(e,t,"access private method"),n},T={};!function(e,t){for(var n in t)f(e,n,{get:t[n],enumerable:!0})}(T,{ExportDelay:function(){return A}}),e.exports=(r=T,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,i=c(p(t));try{var a=function(){var i=o.value;h.call(e,i)||i===n||f(e,i,{get:function(){return t[i]},enumerable:!(r=d(t,i))||r.enumerable})};for(i.s();!(o=i.n()).done;)a()}catch(u){i.e(u)}finally{i.f()}}return e}(f({},"__esModule",{value:!0}),r));var E,C,M=n(30645);E=[M.bind];var A=function(){return u((function e(t){a(this,e),this.maxDelayTimeMs=t,function(e,t,n,r){for(var o=0,i=e[t>>1],a=i&&i.length;o<a;o++)1&t?i[o].call(n):r=i[o].call(n,r)}(C,5,this),P(this,"isResolved",!1),P(this,"promisesToWaitFor",[])}),[{key:"waitUntil",value:function(e){if(this.isResolved)throw new Error("Cannot `waitUntil` - the export has already been resolved. Make sure to call `waitUntil` as soon as possible during an export - ie within the first react effect after rendering.");this.promisesToWaitFor.push(e.catch((function(e){return console.error("Error whilst waiting for export:",e)})))}},{key:"resolvePromises",value:function(){var e=i(o().mark((function e(){var t;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=null;case 1:if(this.promisesToWaitFor.length===t){e.next=9;break}return t=this.promisesToWaitFor.length,e.next=5,Promise.allSettled(this.promisesToWaitFor);case 5:return e.next=7,(0,M.sleep)(0);case 7:e.next=1;break;case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"resolve",value:function(){var e=i(o().mark((function e(){var t,n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=(0,M.sleep)(this.maxDelayTimeMs).then((function(){return"timeout"})),n=this.resolvePromises().then((function(){return"resolved"})),e.next=4,Promise.race([t,n]);case 4:"timeout"===e.sent&&console.warn("[tldraw] Export delay timed out after ${this.maxDelayTimeMs}ms"),this.isResolved=!0;case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}])}();(function(e,t,n,r,o,i){var a,u,c,l,p,h=7&t,v=!!(8&t),y=!!(16&t),P=h>3?e.length+1:h?v?1:2:0,O=b[h+5],T=h>3&&(e[P-1]=[]),E=e[P]||(e[P]=[]),C=h&&(!y&&!v&&(o=o.prototype),h<5&&(h>3||!y)&&d(h<4?o:s("set",s("get",{},n,(function(){return _(this,i)})),n,(function(e){return j(this,i,e)})),n));h?y&&h<4&&m(i,(h>2?"set ":h>1?"get ":"")+n):m(o,n);for(var M=r.length-1;M>=0;M--)l=S(h,n,c={},e[3],E),h&&(l.static=v,l.private=y,p=l.access={has:y?function(e){return k(o,e)}:function(e){return n in e}},3^h&&(p.get=y?function(e){return(1^h?_:I)(e,o,4^h?i:C.get)}:function(e){return e[n]}),h>2&&(p.set=y?function(e,t){return j(e,o,t,4^h?i:C.set)}:function(e,t){return e[n]=t})),u=(0,r[M])(h?h<4?y?i:C[O]:h>4?void 0:{get:C.get,set:C.set}:o,l),c._=1,4^h||void 0===u?w(u)&&(h>4?T.unshift(u):h?y?i=u:C[O]=u:o=u):"object"!==typeof u||null===u?g("Object expected"):(w(a=u.get)&&(C.get=a),w(a=u.set)&&(C.set=a),w(a=u.init)&&T.unshift(a));h||x(e,o),C&&f(o,n,C)})(C=function(e){var t;return[,,,l(null!==(t=null===e||void 0===e?void 0:e[v("metadata")])&&void 0!==t?t:null)]}(null),1,"waitUntil",E,A),x(C,A)},2700:function(e,t,n){"use strict";var r,o=n(41132).default,i=n(4633).default,a=n(29293).default,u=n(17383).default,s=n(34579).default,c=n(11303).default,l=n(50883).default,f=Object.create,d=Object.defineProperty,p=Object.getOwnPropertyDescriptor,h=Object.getOwnPropertyNames,v=Object.prototype.hasOwnProperty,g=function(e,t){return(t=Symbol[e])?t:Symbol.for("Symbol."+e)},y=function(e){throw TypeError(e)},m=function(e,t,n){return t in e?d(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},b=function(e,t){return d(e,"name",{value:t,configurable:!0})},w=["class","method","getter","setter","accessor","field","value","get","set"],S=function(e){return void 0!==e&&"function"!==typeof e?y("Function expected"):e},x=function(e,t,n,r,o){return{kind:w[e],name:t,metadata:r,addInitializer:function(e){return n._?y("Already initialized"):o.push(S(e||null))}}},P=function(e,t){return m(t,g("metadata"),e[3])},O=function(e,t,n){return m(e,"symbol"!==typeof t?t+"":t,n)},k=function(e,t,n){return t.has(e)||y("Cannot "+n)},_=function(e,t){return Object(t)!==t?y('Cannot use the "in" operator on this value'):e.has(t)},j=function(e,t,n){return k(e,t,"read from private field"),n?n.call(e):t.get(e)},I=function(e,t,n,r){return k(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n},T=function(e,t,n){return k(e,t,"access private method"),n},E={};!function(e,t){for(var n in t)d(e,n,{get:t[n],enumerable:!0})}(E,{FontEmbedder:function(){return N}}),e.exports=(r=E,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,i=l(h(t));try{var a=function(){var i=o.value;v.call(e,i)||i===n||d(e,i,{get:function(){return t[i]},enumerable:!(r=p(t,i))||r.enumerable})};for(i.s();!(o=i.n()).done;)a()}catch(u){i.e(u)}finally{i.f()}}return e}(d({},"__esModule",{value:!0}),r));var C,M,A=n(30645),D=n(51491),R=n(84191);C=[A.bind];var N=function(){return s((function e(){u(this,e),function(e,t,n,r){for(var o=0,i=e[t>>1],a=i&&i.length;o<a;o++)1&t?i[o].call(n):r=i[o].call(n,r)}(M,5,this),O(this,"fontFacesPromise",null),O(this,"foundFontNames",new Set),O(this,"fontFacesToEmbed",new Set),O(this,"pendingPromises",[])}),[{key:"startFindingCurrentDocumentFontFaces",value:function(){(0,A.assert)(!this.fontFacesPromise,"FontEmbedder already started"),this.fontFacesPromise=function(){return L.apply(this,arguments)}()}},{key:"onFontFamilyValue",value:function(e){var t=this;(0,A.assert)(this.fontFacesPromise,"FontEmbedder not started");var n,r=(0,R.parseCssFontFamilyValue)(e),o=l(r);try{var i,a=function(){var e=n.value;if(t.foundFontNames.has(e))return{v:void 0};t.foundFontNames.add(e),t.pendingPromises.push(t.fontFacesPromise.then((function(n){var r,o=n.filter((function(t){return t.fontFamilies.has(e)})),i=l(o);try{for(i.s();!(r=i.n()).done;){var a=r.value;if(!t.fontFacesToEmbed.has(a)){t.fontFacesToEmbed.add(a);var u,s=l(a.urls);try{for(s.s();!(u=s.n()).done;){var c=u.value;c.resolved&&!c.embedded&&(c.embedded=(0,D.resourceToDataUrl)(c.resolved))}}catch(f){s.e(f)}finally{s.f()}}}}catch(f){i.e(f)}finally{i.f()}})))};for(o.s();!(n=o.n()).done;)if(i=a())return i.v}catch(u){o.e(u)}finally{o.f()}}},{key:"createCss",value:function(){var e=a(i().mark((function e(){var t,n,r,o,a,u,s,c,f;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(this.pendingPromises);case 2:t="",n=l(this.fontFacesToEmbed),e.prev=4,n.s();case 6:if((r=n.n()).done){e.next=35;break}o=r.value,a="@font-face {".concat(o.fontFace,"}"),u=l(o.urls),e.prev=10,u.s();case 12:if((s=u.n()).done){e.next=24;break}if((c=s.value).embedded){e.next=16;break}return e.abrupt("continue",22);case 16:return e.next=18,c.embedded;case 18:if(f=e.sent){e.next=21;break}return e.abrupt("continue",22);case 21:a=a.replace(c.original,f);case 22:e.next=12;break;case 24:e.next=29;break;case 26:e.prev=26,e.t0=e.catch(10),u.e(e.t0);case 29:return e.prev=29,u.f(),e.finish(29);case 32:t+=a;case 33:e.next=6;break;case 35:e.next=40;break;case 37:e.prev=37,e.t1=e.catch(4),n.e(e.t1);case 40:return e.prev=40,n.f(),e.finish(40);case 43:return e.abrupt("return",t);case 44:case"end":return e.stop()}}),e,this,[[4,37,40,43],[10,26,29,32]])})));return function(){return e.apply(this,arguments)}}()}])}();function L(){return(L=a(i().mark((function e(){var t,n,r,o,a,u,s,c,f,d,p,h;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=[],n=l(document.styleSheets);try{for(n.s();!(r=n.n()).done;){o=r.value,a=void 0;try{a=o.cssRules}catch(i){}if(a){u=l(o.cssRules);try{for(u.s();!(s=u.n()).done;)(c=s.value)instanceof CSSFontFaceRule?t.push((0,R.parseCssFontFaces)(c.cssText,null!==(f=o.href)&&void 0!==f?f:document.baseURI)):c instanceof CSSImportRule&&(h=new URL(c.href,null!==(d=null===(p=c.parentStyleSheet)||void 0===p?void 0:p.href)&&void 0!==d?d:document.baseURI),t.push(U(h.href)))}catch(v){u.e(v)}finally{u.f()}}else o.href&&t.push(U(o.href))}}catch(v){n.e(v)}finally{n.f()}return e.t0=A.compact,e.next=6,Promise.all(t);case 6:return e.t1=e.sent,e.abrupt("return",(0,e.t0)(e.t1).flat());case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}(function(e,t,n,r,o,i){var a,u,s,l,f,h=7&t,v=!!(8&t),g=!!(16&t),m=h>3?e.length+1:h?v?1:2:0,O=w[h+5],k=h>3&&(e[m-1]=[]),E=e[m]||(e[m]=[]),C=h&&(!g&&!v&&(o=o.prototype),h<5&&(h>3||!g)&&p(h<4?o:c("set",c("get",{},n,(function(){return j(this,i)})),n,(function(e){return I(this,i,e)})),n));h?g&&h<4&&b(i,(h>2?"set ":h>1?"get ":"")+n):b(o,n);for(var M=r.length-1;M>=0;M--)l=x(h,n,s={},e[3],E),h&&(l.static=v,l.private=g,f=l.access={has:g?function(e){return _(o,e)}:function(e){return n in e}},3^h&&(f.get=g?function(e){return(1^h?j:T)(e,o,4^h?i:C.get)}:function(e){return e[n]}),h>2&&(f.set=g?function(e,t){return I(e,o,t,4^h?i:C.set)}:function(e,t){return e[n]=t})),u=(0,r[M])(h?h<4?g?i:C[O]:h>4?void 0:{get:C.get,set:C.set}:o,l),s._=1,4^h||void 0===u?S(u)&&(h>4?k.unshift(u):h?g?i=u:C[O]=u:o=u):"object"!==typeof u||null===u?y("Object expected"):(S(a=u.get)&&(C.get=a),S(a=u.set)&&(C.set=a),S(a=u.init)&&k.unshift(a));h||P(e,o),C&&d(o,n,C)})(M=function(e){var t;return[,,,f(null!==(t=null===e||void 0===e?void 0:e[g("metadata")])&&void 0!==t?t:null)]}(null),1,"onFontFamilyValue",C,N),P(M,N);var U=(0,D.fetchCache)(function(){var e=a(i().mark((function e(t){var n,r;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=R.parseCss,e.next=3,t.text();case 3:return e.t1=e.sent,e.t2=t.url,n=(0,e.t0)(e.t1,e.t2),e.next=8,Promise.all(n.imports.map((function(e){var n=e.url;return U(new URL(n,t.url).href)})));case 8:return r=e.sent,e.abrupt("return",[].concat(o(n.fontFaces),o((0,A.compact)(r).flat())));case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},62843:function(e,t,n){"use strict";var r,o=n(4633).default,i=n(29293).default,a=n(85715).default,u=n(41132).default,s=n(17383).default,c=n(34579).default,l=n(43693).default,f=n(50883).default,d=Object.defineProperty,p=Object.getOwnPropertyDescriptor,h=Object.getOwnPropertyNames,v=Object.prototype.hasOwnProperty,g={};!function(e,t){for(var n in t)d(e,n,{get:t[n],enumerable:!0})}(g,{StyleEmbedder:function(){return O}}),e.exports=(r=g,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,i=f(h(t));try{var a=function(){var i=o.value;v.call(e,i)||i===n||d(e,i,{get:function(){return t[i]},enumerable:!(r=p(t,i))||r.enumerable})};for(i.s();!(o=i.n()).done;)a()}catch(u){i.e(u)}finally{i.f()}}return e}(d({},"__esModule",{value:!0}),r));var y,m=n(30645),b=n(2700),w=n(97528),S=n(51491),x=n(84191),P={},O=function(){return c((function e(t){s(this,e),l(this,"styles",new Map),l(this,"fonts",new b.FontEmbedder),this.root=t}),[{key:"readRootElementStyles",value:function(e){this.readElementStyles(e,{shouldRespectDefaults:!1,shouldSkipInheritedParentStyles:!1});for(var t=Array.from((0,w.getRenderedChildren)(e));t.length;){var n=t.pop();t.push.apply(t,u((0,w.getRenderedChildren)(n))),this.readElementStyles(n,{shouldRespectDefaults:!0,shouldSkipInheritedParentStyles:!0})}}},{key:"readElementStyles",value:function(e,t){var n,r,o=t.shouldRespectDefaults,i=void 0===o||o,a=t.shouldSkipInheritedParentStyles,u=void 0===a||a,s=i?function(e){var t=E[e];if(!t){var n=function(){if(!y){var e=document.createElement("iframe");e.style.display="none",document.body.appendChild(e);var t=(0,m.assertExists)(e.contentDocument,"frame must have a document"),n=document.createElementNS("http://www.w3.org/2000/svg","svg"),r=document.createElementNS("http://www.w3.org/2000/svg","foreignObject");n.appendChild(r),t.body.appendChild(n),y={iframe:e,foreignObject:r,document:t}}return y}(),r=n.foreignObject,o=n.document.createElement(e);r.appendChild(o),t=o.computedStyleMap?j(o.computedStyleMap(),C):I((0,w.getComputedStyle)(o),C),r.removeChild(o),E[e]=t}return t}(e.tagName.toLowerCase()):P,c={self:k(e,{defaultStyles:s,parentStyles:u&&null!==(n=null===(r=this.styles.get(e.parentElement))||void 0===r?void 0:r.self)&&void 0!==n?n:P}),before:_(e,"::before"),after:_(e,"::after")};this.styles.set(e,c)}},{key:"fetchResources",value:function(){var e,t=this,n=[],r=f(this.styles.values());try{for(r.s();!(e=r.n()).done;){var s,c=e.value,l=f((0,m.objectMapValues)(c));try{var d=function(){var e=s.value;if(!e)return 1;for(var r=function(){var r=a(l[c],2),s=r[0],f=r[1];if(!f)return 0;"font-family"===s&&t.fonts.onFontFamilyValue(f);var d=(0,x.parseCssValueUrls)(f);if(0===d.length)return 0;n.push.apply(n,u(d.map(function(){var t=i(o().mark((function t(n){var r,i,a,u;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=n.url,a=n.original,t.next=3,(0,S.resourceToDataUrl)(i);case 3:if(t.t1=r=t.sent,t.t0=null!==t.t1,!t.t0){t.next=7;break}t.t0=void 0!==r;case 7:if(!t.t0){t.next=11;break}t.t2=r,t.next=12;break;case 11:t.t2="data:";case 12:u=t.t2,e[s]=f.replace(a,'url("'.concat(u,'")'));case 14:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())))},c=0,l=Object.entries(e);c<l.length;c++)r()};for(l.s();!(s=l.n()).done;)d()}catch(p){l.e(p)}finally{l.f()}}}catch(p){r.e(p)}finally{r.f()}return Promise.all(n)}},{key:"unwrapCustomElements",value:function(){var e,t=this,n=new Set,r=function(e,o){if(!n.has(e)){n.add(e);var i=e.shadowRoot;if(i){var a=document.createElement("div");t.styles.set(a,t.styles.get(e)),a.setAttribute("data-tl-custom-element",e.tagName),(null!==o&&void 0!==o?o:e.parentElement).appendChild(a);var u,s=f(i.childNodes);try{for(s.s();!(u=s.n()).done;){var c=u.value;c instanceof Element?r(c,a):a.appendChild(c.cloneNode(!0))}}catch(v){s.e(v)}finally{s.f()}e.remove()}else if(o){if("style"===e.tagName.toLowerCase())return;var l=e.cloneNode(!1);t.styles.set(l,t.styles.get(e)),o.appendChild(l);var d,p=f((0,w.getRenderedChildNodes)(e));try{for(p.s();!(d=p.n()).done;){var h=d.value;h instanceof Element?r(h,l):l.appendChild(h.cloneNode(!0))}}catch(v){p.e(v)}finally{p.f()}}}},o=f(this.styles.keys());try{for(o.s();!(e=o.n()).done;){var i=e.value;r(i,null)}}catch(a){o.e(a)}finally{o.f()}}},{key:"embedStyles",value:function(){var e,t="",n=f(this.styles);try{for(n.s();!(e=n.n()).done;){var r=a(e.value,2),o=r[0],i=r[1];if(i.after||i.before){var u="pseudo-".concat((0,m.uniqueId)());o.classList.add(u),i.before&&(t+=".".concat(u,"::before {").concat(T(i.before),"}\n")),i.after&&(t+=".".concat(u,"::after {").concat(T(i.after),"}\n"))}for(var s=(0,w.elementStyle)(o),c=0,l=Object.entries(i.self);c<l.length;c++){var d=a(l[c],2),p=d[0],h=d[1];h&&s.setProperty(p,h)}"auto"===s.fontKerning&&(s.fontKerning="normal")}}catch(v){n.e(v)}finally{n.f()}return t}},{key:"getFontFaceCss",value:function(){var e=i(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.fonts.createCss();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"dispose",value:function(){y&&(document.body.removeChild(y.iframe),y=void 0)}}])}();function k(e,t){var n=t.defaultStyles,r=t.parentStyles;return e.computedStyleMap?j(e.computedStyleMap(),{defaultStyles:n,parentStyles:r}):I((0,w.getComputedStyle)(e),{defaultStyles:n,parentStyles:r})}function _(e,t){var n=(0,w.getComputedStyle)(e,t),r=n.getPropertyValue("content");if(""!==r&&"none"!==r)return I(n,{defaultStyles:P,parentStyles:P})}function j(e,t){var n,r=t.defaultStyles,o=t.parentStyles,i={},a=f(e.keys());try{for(a.s();!(n=a.n()).done;){var u=n.value;if((0,x.shouldIncludeCssProperty)(u)){var s=e.get(u).toString();r[u]!==s&&(o[u]===s&&(0,x.isPropertyInherited)(u)||(i[u]=s))}}}catch(c){a.e(c)}finally{a.f()}return i}function I(e,t){var n,r=t.defaultStyles,o=t.parentStyles,i={},a=f(e);try{for(a.s();!(n=a.n()).done;){var u=n.value;if((0,x.shouldIncludeCssProperty)(u)){var s=e.getPropertyValue(u);r[u]!==s&&(o[u]===s&&(0,x.isPropertyInherited)(u)||(i[u]=s))}}}catch(c){a.e(c)}finally{a.f()}return i}function T(e){for(var t="",n=0,r=Object.entries(e);n<r.length;n++){var o=a(r[n],2),i=o[0],u=o[1];t+="".concat(i,": ").concat(u,";")}return t}var E={};var C={defaultStyles:P,parentStyles:P}},97528:function(e,t,n){"use strict";var r,o=n(4633).default,i=n(50883).default,a=o().mark(p),u=Object.defineProperty,s=Object.getOwnPropertyDescriptor,c=Object.getOwnPropertyNames,l=Object.prototype.hasOwnProperty,f={};function d(e){if(e.shadowRoot)return e.shadowRoot.childNodes;if(function(e){return function(e){return"getRootNode"in e&&function(e){return e instanceof h(e).ShadowRoot}(e.getRootNode())}(e)&&e instanceof h(e).HTMLSlotElement}(e)){var t=e.assignedNodes();if(null!==t&&void 0!==t&&t.length)return t}return e.childNodes}function p(e){var t,n,r;return o().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:t=i(d(e)),o.prev=1,t.s();case 3:if((n=t.n()).done){o.next=10;break}if(!v(r=n.value)){o.next=8;break}return o.next=8,r;case 8:o.next=3;break;case 10:o.next=15;break;case 12:o.prev=12,o.t0=o.catch(1),t.e(o.t0);case 15:return o.prev=15,t.f(),o.finish(15);case 18:case"end":return o.stop()}}),a,null,[[1,12,15,18]])}function h(e){var t,n;return null!==(t=null===(n=e.ownerDocument)||void 0===n?void 0:n.defaultView)&&void 0!==t?t:globalThis}function v(e){return e instanceof h(e).Element}function g(e){return e.style}function y(e,t){return h(e).getComputedStyle(e,t)}!function(e,t){for(var n in t)u(e,n,{get:t[n],enumerable:!0})}(f,{elementStyle:function(){return g},getComputedStyle:function(){return y},getRenderedChildNodes:function(){return d},getRenderedChildren:function(){return p},isElement:function(){return v}}),e.exports=(r=f,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,a=i(c(t));try{var f=function(){var i=o.value;l.call(e,i)||i===n||u(e,i,{get:function(){return t[i]},enumerable:!(r=s(t,i))||r.enumerable})};for(a.s();!(o=a.n()).done;)f()}catch(d){a.e(d)}finally{a.f()}}return e}(u({},"__esModule",{value:!0}),r))},91402:function(e,t,n){"use strict";var r,o=n(4633).default,i=n(29293).default,a=n(50883).default,u=Object.defineProperty,s=Object.getOwnPropertyDescriptor,c=Object.getOwnPropertyNames,l=Object.prototype.hasOwnProperty,f={};!function(e,t){for(var n in t)u(e,n,{get:t[n],enumerable:!0})}(f,{embedMedia:function(){return P}}),e.exports=(r=f,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,i=a(c(t));try{var f=function(){var i=o.value;l.call(e,i)||i===n||u(e,i,{get:function(){return t[i]},enumerable:!(r=s(t,i))||r.enumerable})};for(i.s();!(o=i.n()).done;)f()}catch(d){i.e(d)}finally{i.f()}}return e}(u({},"__esModule",{value:!0}),r));var d=n(30645),p=n(97528),h=n(51491);function v(e,t){Array.from(e.attributes).forEach((function(e){t.setAttribute(e.name,e.value)}))}function g(e,t){return e.replaceWith(t),t}function y(e,t){return m.apply(this,arguments)}function m(){return(m=i(o().mark((function e(t,n){var r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=document.createElement("img"),n&&v(n,r),r.setAttribute("src",null!==t&&void 0!==t?t:"data:"),r.setAttribute("decoding","sync"),r.setAttribute("loading","eager"),e.prev=5,e.next=8,r.decode();case 8:e.next=12;break;case 10:e.prev=10,e.t0=e.catch(5);case 12:return e.abrupt("return",r);case 13:case"end":return e.stop()}}),e,null,[[5,10]])})))).apply(this,arguments)}function b(e){return w.apply(this,arguments)}function w(){return(w=i(o().mark((function e(t){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=t.toDataURL(),e.next=4,y(n,t);case 4:case 11:return e.abrupt("return",e.sent);case 7:return e.prev=7,e.t0=e.catch(0),e.next=11,y(null,t);case 12:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function S(e){return x.apply(this,arguments)}function x(){return(x=i(o().mark((function e(t){var n,r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,d.MediaHelpers.getVideoFrameAsDataUrl(t);case 3:return n=e.sent,e.abrupt("return",y(n,t));case 7:e.prev=7,e.t0=e.catch(0),console.error("Could not get video frame",e.t0);case 10:if(!t.poster){e.next=15;break}return e.next=13,(0,h.resourceToDataUrl)(t.poster);case 13:return r=e.sent,e.abrupt("return",y(r,t));case 15:return e.abrupt("return",y(null,t));case 16:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function P(e){return O.apply(this,arguments)}function O(){return(O=i(o().mark((function e(t){var n,r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t instanceof HTMLCanvasElement)){e.next=9;break}return e.t0=g,e.t1=t,e.next=5,b(t);case 5:return e.t2=e.sent,e.abrupt("return",(0,e.t0)(e.t1,e.t2));case 9:if(!(t instanceof HTMLVideoElement)){e.next=18;break}return e.t3=g,e.t4=t,e.next=14,S(t);case 14:return e.t5=e.sent,e.abrupt("return",(0,e.t3)(e.t4,e.t5));case 18:if(!(t instanceof HTMLImageElement)){e.next=36;break}return n=t.currentSrc||t.src,e.next=22,(0,h.resourceToDataUrl)(n);case 22:return r=e.sent,t.setAttribute("src",null!==r&&void 0!==r?r:"data:"),t.setAttribute("decoding","sync"),t.setAttribute("loading","eager"),e.prev=26,e.next=29,t.decode();case 29:e.next=33;break;case 31:e.prev=31,e.t6=e.catch(26);case 33:return e.abrupt("return",t);case 36:t instanceof HTMLInputElement?t.setAttribute("value",t.value):t instanceof HTMLTextAreaElement&&(t.textContent=t.value);case 37:return e.next=39,Promise.all(Array.from((0,p.getRenderedChildren)(t),(function(e){return P(e)})));case 39:case"end":return e.stop()}}),e,null,[[26,31]])})))).apply(this,arguments)}},53366:function(e,t,n){"use strict";var r,o=n(41132).default,i=n(4633).default,a=n(29293).default,u=n(50883).default,s=Object.defineProperty,c=Object.getOwnPropertyDescriptor,l=Object.getOwnPropertyNames,f=Object.prototype.hasOwnProperty,d={};!function(e,t){for(var n in t)s(e,n,{get:t[n],enumerable:!0})}(d,{exportToSvg:function(){return w}}),e.exports=(r=d,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,i=u(l(t));try{var a=function(){var i=o.value;f.call(e,i)||i===n||s(e,i,{get:function(){return t[i]},enumerable:!(r=c(t,i))||r.enumerable})};for(i.s();!(o=i.n()).done;)a()}catch(d){i.e(d)}finally{i.f()}}return e}(s({},"__esModule",{value:!0}),r));var p=n(30645),h=n(17119),v=n(1352),g=n(62843),y=n(91402),m=n(60386),b=1;function w(e,t){return S.apply(this,arguments)}function S(){return S=a(i().mark((function e(t,n){var r,o,a,u,s,c,l=arguments;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=l.length>2&&void 0!==l[2]?l[2]:{},o=(0,m.getSvgJsx)(t,n,r)){e.next=4;break}return e.abrupt("return",void 0);case 4:return a=t.getContainer(),(u=document.createElement("div")).className="tldraw-svg-export",u.inert=!0,u.tabIndex=-1,Object.assign(u.style,{position:"absolute",top:"0px",left:"0px",width:o.width+"px",height:o.height+"px",pointerEvents:"none",opacity:0}),a.appendChild(u),s=(0,v.createRoot)(u,{identifierPrefix:"export_".concat(b++,"_")}),e.prev=12,e.next=15,Promise.resolve();case 15:return(0,h.flushSync)((function(){s.render(o.jsx)})),e.next=18,o.exportDelay.resolve();case 18:return c=u.firstElementChild,(0,p.assert)(c instanceof SVGSVGElement,"Expected an SVG element"),e.next=22,x(c);case 22:return e.abrupt("return",{svg:c,width:o.width,height:o.height});case 23:return e.prev=23,setTimeout((function(){s.unmount(),a.removeChild(u)}),0),e.finish(23);case 26:case"end":return e.stop()}}),e,null,[[12,,23,26]])}))),S.apply(this,arguments)}function x(e){return P.apply(this,arguments)}function P(){return(P=a(i().mark((function e(t){var n,r,a,s,c,l,f,d;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((n=o(t.querySelectorAll("foreignObject.tl-shape-foreign-object > *"))).length){e.next=3;break}return e.abrupt("return");case 3:return r=new g.StyleEmbedder(t),e.prev=4,r.fonts.startFindingCurrentDocumentFontFaces(),e.next=8,Promise.all(n.map((function(e){return(0,y.embedMedia)(e)})));case 8:a=u(n);try{for(a.s();!(s=a.n()).done;)c=s.value,r.readRootElementStyles(c)}catch(i){a.e(i)}finally{a.f()}return e.next=12,r.fetchResources();case 12:return e.next=14,r.getFontFaceCss();case 14:l=e.sent,r.unwrapCustomElements(),f=r.embedStyles(),(l||f)&&((d=document.createElementNS("http://www.w3.org/2000/svg","style")).textContent="".concat(l,"\n").concat(f),t.prepend(d));case 18:return e.prev=18,r.dispose(),e.finish(18);case 21:case"end":return e.stop()}}),e,null,[[4,,18,21]])})))).apply(this,arguments)}},51491:function(e,t,n){"use strict";var r,o=n(4633).default,i=n(29293).default,a=n(50883).default,u=Object.defineProperty,s=Object.getOwnPropertyDescriptor,c=Object.getOwnPropertyNames,l=Object.prototype.hasOwnProperty,f={};!function(e,t){for(var n in t)u(e,n,{get:t[n],enumerable:!0})}(f,{fetchCache:function(){return p},resourceToDataUrl:function(){return h}}),e.exports=(r=f,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,i=a(c(t));try{var f=function(){var i=o.value;l.call(e,i)||i===n||u(e,i,{get:function(){return t[i]},enumerable:!(r=s(t,i))||r.enumerable})};for(i.s();!(o=i.n()).done;)f()}catch(d){i.e(d)}finally{i.f()}}return e}(u({},"__esModule",{value:!0}),r));var d=n(30645);function p(e,t){var n=new Map;return function(){var r=i(o().mark((function r(a){var u,s;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!(u=n.get(a))){r.next=3;break}return r.abrupt("return",u);case 3:return s=i(o().mark((function n(){var r;return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,(0,d.fetch)(a,t);case 3:return r=n.sent,(0,d.assert)(r.ok),n.next=7,e(r);case 7:return n.abrupt("return",n.sent);case 10:return n.prev=10,n.t0=n.catch(0),console.error(n.t0),n.abrupt("return",null);case 14:case"end":return n.stop()}}),n,null,[[0,10]])})))(),n.set(a,s),r.abrupt("return",s);case 6:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()}var h=p(function(){var e=i(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=d.FileHelpers,e.next=3,t.blob();case 3:return e.t1=e.sent,e.next=6,e.t0.blobToDataUrl.call(e.t0,e.t1);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},60386:function(e,t,n){"use strict";var r,o=n(4633).default,i=n(85715).default,a=n(29293).default,u=n(43693).default,s=n(12897).default,c=n(50883).default,l=Object.defineProperty,f=Object.getOwnPropertyDescriptor,d=Object.getOwnPropertyNames,p=Object.prototype.hasOwnProperty,h={};!function(e,t){for(var n in t)l(e,n,{get:t[n],enumerable:!0})}(h,{getSvgJsx:function(){return T}}),e.exports=(r=h,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,i=c(d(t));try{var a=function(){var i=o.value;p.call(e,i)||i===n||l(e,i,{get:function(){return t[i]},enumerable:!(r=f(t,i))||r.enumerable})};for(i.s();!(o=i.n()).done;)a()}catch(u){i.e(u)}finally{i.f()}}return e}(l({},"__esModule",{value:!0}),r));var v=n(44414),g=n(61267),y=n(85191),m=n(30645),b=n(9950),w=n(17119),S=n(23038),x=n(8187),P=n(73470),O=n(10076),k=n(88797),_=n(17625),j=n(84906),I=n(25020);function T(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!window.document)throw Error("No document");var o=r.scale,i=void 0===o?1:o,a=r.background,u=void 0!==a&&a,s=r.padding,l=void 0===s?e.options.defaultSvgPadding:s,f=r.preserveAspectRatio,d=null!==(n=r.darkMode)&&void 0!==n?n:e.user.getIsDarkMode(),p=e.getShapeAndDescendantIds(t),h=e.getUnorderedRenderingShapes(!1).filter((function(e){var t=e.id;return p.has(t)})),g=null;if(r.bounds)g=r.bounds;else{var y,b=c(h);try{for(b.s();!(y=b.n()).done;){var w=y.value.id,S=e.getShapeMaskedPageBounds(w);S&&(g?g.union(S):g=S.clone())}}catch(C){b.e(C)}finally{b.f()}}if(g){var x=1===t.length&&e.isShapeOfType(e.getShape(t[0]),"frame")?t[0]:null;x||g.expandBy(l);var P=g.width*i,O=g.height*i;try{var k,_;null===(k=(_=document.body).focus)||void 0===k||k.call(_)}catch(M){}var j=new I.ExportDelay(e.options.maxExportDelayMs),T=(0,m.promiseWithResolve)();return j.waitUntil(T),{jsx:(0,v.jsx)(E,{editor:e,preserveAspectRatio:f,scale:i,bbox:g,background:u,singleFrameShapeId:x,isDarkMode:d,renderingShapes:h,onMount:T.resolve,waitUntil:j.waitUntil}),width:P,height:O,exportDelay:j}}}function E(e){var t=e.editor,n=e.preserveAspectRatio,r=e.scale,c=e.bbox,l=e.background,f=e.singleFrameShapeId,d=e.isDarkMode,p=e.renderingShapes,h=e.onMount,S=e.waitUntil,O=(0,_.useUniqueSafeId)(),I=(0,y.getDefaultColorTheme)({isDarkMode:d}),T=(0,g.useAtom)("export state",{defsById:{},shapeElements:null}),E=(0,g.useValue)(T),M=E.defsById,A=E.shapeElements,D=(0,k.useEvent)((function(e){T.update((function(t){if((0,m.hasOwnProperty)(t.defsById,e.key))return t;var n=Promise.resolve(e.getElement());return S(n.then((function(t){T.update((function(n){return s(s({},n),{},{defsById:s(s({},n.defsById),{},u({},e.key,{pending:!1,element:t}))})}))}))),s(s({},t),{},{defsById:s(s({},t.defsById),{},u({},e.key,{pending:!0,element:n}))})}))})),R=(0,b.useMemo)((function(){return{isDarkMode:d,waitUntil:S,addExportDef:D}}),[d,S,D]),N=(0,b.useRef)(!1);return(0,b.useLayoutEffect)((function(){if(N.current)throw new Error("SvgExport should only render once - do not use with react strict mode");N.current=!0,a(o().mark((function e(){var n,r,u;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={},r=p.map(function(){var e=a(o().mark((function e(r){var a,u,s,l,d,p,h,g,y,m,b,w,S,P,k,I,T,E,M;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=r.id,u=r.opacity,s=r.index,l=r.backgroundIndex,a!==f){e.next=3;break}return e.abrupt("return",[]);case 3:if(d=t.getShape(a),!t.isShapeOfType(d,"group")){e.next=6;break}return e.abrupt("return",[]);case 6:if(p=[],!(h=t.getShapeUtil(d)).toSvg&&!h.toBackgroundSvg){e.next=27;break}return e.next=11,Promise.all([null===(g=h.toSvg)||void 0===g?void 0:g.call(h,d,R),null===(y=h.toBackgroundSvg)||void 0===y?void 0:y.call(h,d,R)]);case 11:m=e.sent,b=i(m,2),w=b[0],S=b[1],P=t.getShapePageTransform(d),k=P.toCssString(),I=1,"scale"in d.props&&1!==d.props.scale&&(I=d.props.scale,k="".concat(k," scale(").concat(d.props.scale,", ").concat(d.props.scale,")")),T=t.getShapeMask(d.id),E=T?j.Mat.From(j.Mat.Inverse(P)).applyToPoints(T):null,M=(0,_.suffixSafeId)(O,d.id),E&&(n[M]={pending:!1,element:(0,v.jsx)("clipPath",{id:M,children:(0,v.jsx)("path",{d:"M".concat(E.map((function(e){var t=e.x,n=e.y;return"".concat(t/I,",").concat(n/I)})).join("L"),"Z")})})}),w&&p.push({zIndex:s,element:(0,v.jsx)("g",{transform:k,opacity:u,clipPath:T?"url(#".concat(M,")"):void 0,children:w},"fg_".concat(d.id))}),S&&p.push({zIndex:l,element:(0,v.jsx)("g",{transform:k,opacity:u,clipPath:T?"url(#".concat(M,")"):void 0,children:S},"bg_".concat(d.id))}),e.next=29;break;case 27:p.push({zIndex:s,element:(0,v.jsx)(C,{shape:d,util:h,component:x.InnerShape,className:"tl-shape",bbox:c,opacity:u},"fg_".concat(d.id))}),h.backgroundComponent&&p.push({zIndex:l,element:(0,v.jsx)(C,{shape:d,util:h,component:x.InnerShapeBackground,className:"tl-shape tl-shape-background",bbox:c,opacity:u},"bg_".concat(d.id))});case 29:return e.abrupt("return",p);case 30:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=4,Promise.all(r);case 4:u=e.sent.flat(),(0,w.flushSync)((function(){T.update((function(e){return s(s({},e),{},{shapeElements:u.sort((function(e,t){return e.zIndex-t.zIndex})).map((function(e){return e.element})),defsById:s(s({},e.defsById),n)})}))}));case 6:case"end":return e.stop()}}),e)})))()}),[c,t,R,O,p,f,T]),(0,b.useEffect)((function(){null!==A&&h()}),[h,A]),(0,v.jsx)(P.SvgExportContextProvider,{editor:t,context:R,children:(0,v.jsxs)("svg",{preserveAspectRatio:n,direction:"ltr",width:c.width*r,height:c.height*r,viewBox:"".concat(c.minX," ").concat(c.minY," ").concat(c.width," ").concat(c.height),strokeLinecap:"round",strokeLinejoin:"round",style:{backgroundColor:l?f?I.solid:I.background:"transparent"},"data-color-mode":d?"dark":"light",className:"tl-container tl-theme__force-sRGB ".concat(d?"tl-theme__dark":"tl-theme__light"),children:[(0,v.jsx)("defs",{children:Object.entries(M).map((function(e){var t=i(e,2),n=t[0],r=t[1];return r.pending?null:(0,v.jsx)(b.Fragment,{children:r.element},n)}))}),A]})})}function C(e){var t=e.shape,n=e.util,r=e.className,o=e.component,i=e.bbox,a=e.opacity,u=(0,O.useEditor)(),s=j.Mat.Translate(-i.minX,-i.minY).multiply(u.getShapePageTransform(t.id)),c=u.getShapeGeometry(t.id).bounds,l=Math.max(c.width,1),f=Math.max(c.height,1);return(0,v.jsx)(S.ErrorBoundary,{fallback:function(){return null},children:(0,v.jsx)("foreignObject",{x:i.minX,y:i.minY,width:i.w,height:i.h,className:"tl-shape-foreign-object",children:(0,v.jsx)("div",{className:r,"data-shape-type":t.type,style:{clipPath:u.getShapeClipPath(t.id),transform:s.toCssString(),width:l,height:f,opacity:a},children:(0,v.jsx)(o,{shape:t,util:n})})})})}},84191:function(e,t,n){"use strict";var r,o=n(50883).default,i=Object.defineProperty,a=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,c={};!function(e,t){for(var n in t)i(e,n,{get:t[n],enumerable:!0})}(c,{isPropertyInherited:function(){return x},parseCss:function(){return b},parseCssFontFaces:function(){return g},parseCssFontFamilyValue:function(){return y},parseCssImports:function(){return v},parseCssValueUrls:function(){return w},shouldIncludeCssProperty:function(){return m}}),e.exports=(r=c,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var c,l=o(u(t));try{var f=function(){var o=c.value;s.call(e,o)||o===n||i(e,o,{get:function(){return t[o]},enumerable:!(r=a(t,o))||r.enumerable})};for(l.s();!(c=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(i({},"__esModule",{value:!0}),r));var l=n(30645),f=/@import\s+(?:"([^"]+)"|'([^']+)'|url\s*\(\s*(?:"([^"]+)"|'([^']+)'|([^'")]+))\s*\))([^;]+);/gi,d=/@font-face\s*{([^}]+)}/gi,p=/url\s*\(\s*(?:"([^"]+)"|'([^']+)'|([^'")]+))\s*\)/gi,h=/(?:^|;)\s*font-family\s*:\s*(?:([^'"][^;\n]+)|"([^"]+)"|'([^']+)')\s*(?:;|$)/gi;function v(e){return Array.from(e.matchAll(f),(function(e){return{url:e[1]||e[2]||e[3]||e[4]||e[5],extras:e[6]}}))}function g(e,t){return Array.from(e.matchAll(d),(function(e){var n=e[1],r=Array.from(n.matchAll(p),(function(e){var n,r,o=e[1]||e[2]||e[3];return{original:o,resolved:null!==(n=null===(r=(0,l.safeParseUrl)(o,t))||void 0===r?void 0:r.href)&&void 0!==n?n:null}})),o=new Set(Array.from(n.matchAll(h),(function(e){return(e[1]||e[2]||e[3]).toLowerCase()})));return{fontFace:n,urls:r,fontFamilies:o}}))}function y(e){for(var t=/\s*(?:([^'"][^;\n\s,]+)|"([^"]+)"|'([^']+)')\s*/gi,n=/\s*,\s*/gi,r=new Set;;){var o=t.exec(e);if(!o)break;var i=o[1]||o[2]||o[3];if(r.add(i.toLowerCase()),n.lastIndex=t.lastIndex,!n.exec(e))break;t.lastIndex=n.lastIndex}return r}function m(e){return!e.startsWith("-")&&(!e.startsWith("animation")&&(!e.startsWith("transition")&&("cursor"!==e&&("pointer-events"!==e&&("user-select"!==e&&"touch-action"!==e)))))}function b(e,t){return{imports:v(e),fontFaces:g(e,t)}}function w(e){return Array.from(e.matchAll(p),(function(e){return{original:e[0],url:e[1]||e[2]||e[3]}}))}var S=new Set(["border-collapse","border-spacing","caption-side","color","cursor","direction","empty-cells","font-family","font-size","font-style","font-variant","font-weight","font-size-adjust","font-stretch","font","letter-spacing","line-height","list-style-image","list-style-position","list-style-type","list-style","orphans","quotes","tab-size","text-align","text-align-last","text-decoration-color","text-indent","text-justify","text-shadow","text-transform","visibility","white-space","widows","word-break","word-spacing","word-wrap"]);function x(e){return S.has(e)}},55015:function(e,t,n){"use strict";var r,o=n(50883).default,i=Object.defineProperty,a=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,c={};!function(e,t){for(var n in t)i(e,n,{get:t[n],enumerable:!0})}(c,{tlenv:function(){return l}}),e.exports=(r=c,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var c,l=o(u(t));try{var f=function(){var o=c.value;s.call(e,o)||o===n||i(e,o,{get:function(){return t[o]},enumerable:!(r=a(t,o))||r.enumerable})};for(l.s();!(c=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(i({},"__esModule",{value:!0}),r));var l={isSafari:!1,isIos:!1,isChromeForIos:!1,isFirefox:!1,isAndroid:!1,isWebview:!1,isDarwin:!1};"undefined"!==typeof window&&"navigator"in window&&(l.isSafari=/^((?!chrome|android).)*safari/i.test(navigator.userAgent),l.isIos=!!navigator.userAgent.match(/iPad/i)||!!navigator.userAgent.match(/iPhone/i),l.isChromeForIos=/crios.*safari/i.test(navigator.userAgent),l.isFirefox=/firefox/i.test(navigator.userAgent),l.isAndroid=/android/i.test(navigator.userAgent),l.isDarwin=window.navigator.userAgent.toLowerCase().indexOf("mac")>-1)},49098:function(e,t,n){"use strict";var r,o=n(41132).default,i=n(50883).default,a=Object.defineProperty,u=Object.getOwnPropertyDescriptor,s=Object.getOwnPropertyNames,c=Object.prototype.hasOwnProperty,l={};!function(e,t){for(var n in t)a(e,n,{get:t[n],enumerable:!0})}(l,{tlmenus:function(){return f}}),e.exports=(r=l,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,l=i(s(t));try{var f=function(){var i=o.value;c.call(e,i)||i===n||a(e,i,{get:function(){return t[i]},enumerable:!(r=u(t,i))||r.enumerable})};for(l.s();!(o=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(a({},"__esModule",{value:!0}),r));var f={menus:(0,n(81501).atom)("open menus",[]),getOpenMenus:function(e){return e?this.menus.get().filter((function(t){return t.endsWith("-"+e)})):this.menus.get()},addOpenMenu:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=t?"".concat(e,"-").concat(t):e,r=new Set(this.menus.get());r.has(n)||(r.add(n),this.menus.set(o(r)))},deleteOpenMenu:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=t?"".concat(e,"-").concat(t):e,r=new Set(this.menus.get());r.has(n)&&(r.delete(n),this.menus.set(o(r)))},clearOpenMenus:function(e){this.menus.set(e?this.menus.get().filter((function(t){return!t.endsWith("-"+e)})):[])},_hiddenMenus:[],hideOpenMenus:function(e){if(this._hiddenMenus=o(this.getOpenMenus(e)),0!==this._hiddenMenus.length){var t,n=i(this._hiddenMenus);try{for(n.s();!(t=n.n()).done;){var r=t.value;this.deleteOpenMenu(r,e)}}catch(a){n.e(a)}finally{n.f()}}},showOpenMenus:function(e){if(0!==this._hiddenMenus.length){var t,n=i(this._hiddenMenus);try{for(n.s();!(t=n.n()).done;){var r=t.value;this.addOpenMenu(r,e)}}catch(o){n.e(o)}finally{n.f()}this._hiddenMenus=[]}},isMenuOpen:function(e,t){return this.getOpenMenus(t).includes(e)},hasOpenMenus:function(e){return this.getOpenMenus(e).length>0},hasAnyOpenMenus:function(){return this.getOpenMenus().length>0},forContext:function(e){var t=this;return{getOpenMenus:function(){return t.getOpenMenus(e)},addOpenMenu:function(n){return t.addOpenMenu(n,e)},deleteOpenMenu:function(n){return t.deleteOpenMenu(n,e)},clearOpenMenus:function(){return t.clearOpenMenus(e)},isMenuOpen:function(n){return t.isMenuOpen(n,e)},hasOpenMenus:function(){return t.hasOpenMenus(e)},hasAnyOpenMenus:function(){return t.hasAnyOpenMenus()}}}}},61873:function(e,t,n){"use strict";var r,o=n(50883).default,i=Object.defineProperty,a=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,c={};!function(e,t){for(var n in t)i(e,n,{get:t[n],enumerable:!0})}(c,{tltime:function(){return l}}),e.exports=(r=c,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var c,l=o(u(t));try{var f=function(){var o=c.value;s.call(e,o)||o===n||i(e,o,{get:function(){return t[o]},enumerable:!(r=a(t,o))||r.enumerable})};for(l.s();!(c=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(i({},"__esModule",{value:!0}),r));var l=new(n(30645).Timers)},87980:function(e,t,n){"use strict";var r,o=n(4633).default,i=n(29293).default,a=n(12897).default,u=n(50883).default,s=Object.defineProperty,c=Object.getOwnPropertyDescriptor,l=Object.getOwnPropertyNames,f=Object.prototype.hasOwnProperty,d={};!function(e,t){for(var n in t)s(e,n,{get:t[n],enumerable:!0})}(d,{useCanvasEvents:function(){return m}}),e.exports=(r=d,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,i=u(l(t));try{var a=function(){var i=o.value;f.call(e,i)||i===n||s(e,i,{get:function(){return t[i]},enumerable:!(r=c(t,i))||r.enumerable})};for(i.s();!(o=i.n()).done;)a()}catch(d){i.e(d)}finally{i.f()}}return e}(s({},"__esModule",{value:!0}),r));var p=n(9950),h=n(63792),v=n(90923),g=n(17054),y=n(10076);function m(){var e=(0,y.useEditor)(),t=(0,p.useMemo)((function(){var t,n;function r(){return(r=i(o().mark((function t(n){var r,i;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if((0,v.preventDefault)(n),(0,v.stopEventPropagation)(n),null!==(r=n.dataTransfer)&&void 0!==r&&null!==(r=r.files)&&void 0!==r&&r.length){t.next=4;break}return t.abrupt("return");case 4:return i=Array.from(n.dataTransfer.files),t.next=7,e.putExternalContent({type:"files",files:i,point:e.screenToPage({x:n.clientX,y:n.clientY}),ignoreParent:!1});case 7:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return{onPointerDown:function(t){t.isKilled||(t.button!==h.RIGHT_MOUSE_BUTTON?0!==t.button&&1!==t.button&&5!==t.button||((0,v.setPointerCapture)(t.currentTarget,t),e.dispatch(a({type:"pointer",target:"canvas",name:"pointer_down"},(0,g.getPointerInfo)(t)))):e.dispatch(a({type:"pointer",target:"canvas",name:"right_click"},(0,g.getPointerInfo)(t))))},onPointerMove:function(r){r.isKilled||r.clientX===t&&r.clientY===n||(t=r.clientX,n=r.clientY,e.dispatch(a({type:"pointer",target:"canvas",name:"pointer_move"},(0,g.getPointerInfo)(r))))},onPointerUp:function(r){r.isKilled||0!==r.button&&1!==r.button&&2!==r.button&&5!==r.button||(t=r.clientX,n=r.clientY,(0,v.releasePointerCapture)(r.currentTarget,r),e.dispatch(a({type:"pointer",target:"canvas",name:"pointer_up"},(0,g.getPointerInfo)(r))))},onPointerEnter:function(t){if(!t.isKilled&&(!e.getInstanceState().isPenMode||"pen"===t.pointerType)){var n="mouse"===t.pointerType||"pen"===t.pointerType;e.updateInstanceState({isHoveringCanvas:!!n||null})}},onPointerLeave:function(t){if(!t.isKilled&&(!e.getInstanceState().isPenMode||"pen"===t.pointerType)){var n="mouse"===t.pointerType||"pen"===t.pointerType;e.updateInstanceState({isHoveringCanvas:!n&&null})}},onDragOver:function(e){(0,v.preventDefault)(e)},onDrop:function(e){return r.apply(this,arguments)},onTouchStart:function(e){e.isKilled=!0,(0,v.preventDefault)(e)},onTouchEnd:function(t){t.isKilled=!0,t.target instanceof HTMLElement&&("A"===t.target.tagName||"TEXTAREA"===t.target.tagName||e.getEditingShape()&&t.target.className.includes("tl-text-content")||(0,v.preventDefault)(t))},onClick:function(e){(0,v.stopEventPropagation)(e)}}}),[e]);return t}},64115:function(e,t,n){"use strict";var r,o=n(50883).default,i=Object.defineProperty,a=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,c={};!function(e,t){for(var n in t)i(e,n,{get:t[n],enumerable:!0})}(c,{useCoarsePointer:function(){return p}}),e.exports=(r=c,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var c,l=o(u(t));try{var f=function(){var o=c.value;s.call(e,o)||o===n||i(e,o,{get:function(){return t[o]},enumerable:!(r=a(t,o))||r.enumerable})};for(l.s();!(c=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(i({},"__esModule",{value:!0}),r));var l=n(9950),f=n(55015),d=n(10076);function p(){var e=(0,d.useEditor)();(0,l.useEffect)((function(){var t=e.getInstanceState().isCoarsePointer,n=function(n){var r="mouse"!==n.pointerType;t!==r&&(t=r,e.updateInstanceState({isCoarsePointer:r}))};window.addEventListener("pointerdown",n,{capture:!0});var r=window.matchMedia&&window.matchMedia("(any-pointer: coarse)"),o=f.tlenv.isFirefox&&!f.tlenv.isAndroid&&!f.tlenv.isIos,i=function(){var n=!o&&r.matches;t===n&&(t=n,e.updateInstanceState({isCoarsePointer:n}))};return r&&(r.addEventListener("change",i),i()),function(){window.removeEventListener("pointerdown",n,{capture:!0}),r&&r.removeEventListener("change",i)}}),[e])}},77374:function(e,t,n){"use strict";var r,o=n(50883).default,i=Object.defineProperty,a=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,c={};!function(e,t){for(var n in t)i(e,n,{get:t[n],enumerable:!0})}(c,{ContainerProvider:function(){return h},useContainer:function(){return v},useContainerIfExists:function(){return g}}),e.exports=(r=c,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var c,l=o(u(t));try{var f=function(){var o=c.value;s.call(e,o)||o===n||i(e,o,{get:function(){return t[o]},enumerable:!(r=a(t,o))||r.enumerable})};for(l.s();!(c=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(i({},"__esModule",{value:!0}),r));var l=n(44414),f=n(30645),d=n(9950),p=(0,d.createContext)(null);function h(e){var t=e.container,n=e.children;return(0,l.jsx)(p.Provider,{value:t,children:n})}function v(){return(0,f.assertExists)((0,d.useContext)(p),"useContainer used outside of <Tldraw />")}function g(){return(0,d.useContext)(p)}},50387:function(e,t,n){"use strict";var r,o=n(50883).default,i=Object.defineProperty,a=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,c={};!function(e,t){for(var n in t)i(e,n,{get:t[n],enumerable:!0})}(c,{getCursor:function(){return S},useCursor:function(){return x}}),e.exports=(r=c,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var c,l=o(u(t));try{var f=function(){var o=c.value;s.call(e,o)||o===n||i(e,o,{get:function(){return t[o]},enumerable:!(r=a(t,o))||r.enumerable})};for(l.s();!(c=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(i({},"__esModule",{value:!0}),r));var l=n(61267),f=n(63557),d=n(77374),p=n(10076),h=n(9166),v="<path d='m19.7432 17.0869-4.072 4.068 2.829 2.828-8.473-.013-.013-8.47 2.841 2.842 4.075-4.068 1.414-1.415-2.844-2.842h8.486v8.484l-2.83-2.827z' fill='%23fff'/><path d='m18.6826 16.7334-4.427 4.424 1.828 1.828-5.056-.016-.014-5.054 1.842 1.841 4.428-4.422 2.474-2.475-1.844-1.843h5.073v5.071l-1.83-1.828z' fill='%23000'/>",g="<path d='m9 17.9907v.005l5.997 5.996.001-3.999h1.999 2.02v4l5.98-6.001-5.98-5.999.001 4.019-2.021.002h-2l.001-4.022zm1.411.003 3.587-3.588-.001 2.587h3.5 2.521v-2.585l3.565 3.586-3.564 3.585-.001-2.585h-2.521l-3.499-.001-.001 2.586z' fill='%23fff'/><path d='m17.4971 18.9932h2.521v2.586l3.565-3.586-3.565-3.585v2.605h-2.521-3.5v-2.607l-3.586 3.587 3.586 3.586v-2.587z' fill='%23000'/>",y='<path d="M22.4789 9.45728L25.9935 12.9942L22.4789 16.5283V14.1032C18.126 14.1502 14.6071 17.6737 14.5675 22.0283H17.05L13.513 25.543L9.97889 22.0283H12.5674C12.6071 16.5691 17.0214 12.1503 22.4789 12.1031L22.4789 9.45728Z" fill="black"/><path fill-rule="evenodd" clip-rule="evenodd" d="M21.4789 7.03223L27.4035 12.9945L21.4789 18.9521V15.1868C18.4798 15.6549 16.1113 18.0273 15.649 21.0284H19.475L13.5128 26.953L7.55519 21.0284H11.6189C12.1243 15.8155 16.2679 11.6677 21.4789 11.1559L21.4789 7.03223ZM22.4789 12.1031C17.0214 12.1503 12.6071 16.5691 12.5674 22.0284H9.97889L13.513 25.543L17.05 22.0284H14.5675C14.5705 21.6896 14.5947 21.3558 14.6386 21.0284C15.1157 17.4741 17.9266 14.6592 21.4789 14.1761C21.8063 14.1316 22.1401 14.1069 22.4789 14.1032V16.5284L25.9935 12.9942L22.4789 9.45729L22.4789 12.1031Z" fill="white"/>';function m(e,t,n,r,o){var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:16,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:16,u=(-n-t)*(f.PI/180),s=Math.sin(u),c=Math.cos(u),l=1*c-1*s,d=1*s+1*c;return"url(\"data:image/svg+xml,<svg height='32' width='32' viewBox='0 0 32 32' xmlns='http://www.w3.org/2000/svg' style='color: ".concat(o,";'><defs><filter id='shadow' y='-40%' x='-40%' width='180px' height='180%' color-interpolation-filters='sRGB'><feDropShadow dx='").concat(l,"' dy='").concat(d,"' stdDeviation='1.2' flood-opacity='.5'/></filter></defs><g fill='none' transform='rotate(").concat(t+n," 16 16)").concat(r?" scale(-1,-1) translate(0, -32)":"","' filter='url(%23shadow)'>")+e.replaceAll('"',"'")+'</g></svg>") '.concat(i," ").concat(a,", pointer")}var b=["default","pointer","cross","move","grab","grabbing","text","zoom-in","zoom-out"],w={none:function(){return"none"},"ew-resize":function(e,t,n){return m(g,e,0,t,n)},"ns-resize":function(e,t,n){return m(g,e,90,t,n)},"nesw-resize":function(e,t,n){return m(v,e,0,t,n)},"nwse-resize":function(e,t,n){return m(v,e,90,t,n)},"nwse-rotate":function(e,t,n){return m(y,e,0,t,n)},"nesw-rotate":function(e,t,n){return m(y,e,90,t,n)},"senw-rotate":function(e,t,n){return m(y,e,180,t,n)},"swne-rotate":function(e,t,n){return m(y,e,270,t,n)}};function S(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"black";return w[e]((0,f.radiansToDegrees)(t),!1,n)}function x(){var e=(0,p.useEditor)(),t=(0,d.useContainer)(),n=(0,h.useIsDarkMode)();(0,l.useQuickReactor)("useCursor",(function(){var r=e.getInstanceState().cursor,o=r.type,i=r.rotation;b.includes(o)?t.style.setProperty("--tl-cursor","var(--tl-cursor-".concat(o,")")):t.style.setProperty("--tl-cursor",S(o,i,n?"white":"black"))}),[e,t,n])}},99338:function(e,t,n){"use strict";var r,o=n(50883).default,i=Object.create,a=Object.defineProperty,u=Object.getOwnPropertyDescriptor,s=Object.getOwnPropertyNames,c=Object.getPrototypeOf,l=Object.prototype.hasOwnProperty,f=function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var i,c=o(s(t));try{var f=function(){var o=i.value;l.call(e,o)||o===n||a(e,o,{get:function(){return t[o]},enumerable:!(r=u(t,o))||r.enumerable})};for(c.s();!(i=c.n()).done;)f()}catch(d){c.e(d)}finally{c.f()}}return e},d={};!function(e,t){for(var n in t)a(e,n,{get:t[n],enumerable:!0})}(d,{useDarkMode:function(){return b}}),e.exports=(r=d,f(a({},"__esModule",{value:!0}),r));var p=n(61267),h=function(e,t,n){return n=null!=e?i(c(e)):{},f(!t&&e&&e.__esModule?n:a(n,"default",{value:e,enumerable:!0}),e)}(n(9950)),v=n(1074),g=n(77374),y=n(10076),m=n(9166);function b(){var e=(0,y.useEditor)(),t=(0,g.useContainer)(),n=(0,m.useIsDarkMode)(),r=(0,p.useValue)(v.debugFlags.forceSrgb);h.default.useEffect((function(){n?(t.setAttribute("data-color-mode","dark"),t.classList.remove("tl-theme__light"),t.classList.add("tl-theme__dark")):(t.setAttribute("data-color-mode","light"),t.classList.remove("tl-theme__dark"),t.classList.add("tl-theme__light")),r?t.classList.add("tl-theme__force-sRGB"):t.classList.remove("tl-theme__force-sRGB")}),[e,t,r,n])}},57153:function(e,t,n){"use strict";var r,o=n(50883).default,i=Object.defineProperty,a=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,c={};!function(e,t){for(var n in t)i(e,n,{get:t[n],enumerable:!0})}(c,{useDocumentEvents:function(){return g}}),e.exports=(r=c,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var c,l=o(u(t));try{var f=function(){var o=c.value;s.call(e,o)||o===n||i(e,o,{get:function(){return t[o]},enumerable:!(r=a(t,o))||r.enumerable})};for(l.s();!(c=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(i({},"__esModule",{value:!0}),r));var l=n(61267),f=n(9950),d=n(90923),p=n(95518),h=n(77374),v=n(10076);function g(){var e=(0,v.useEditor)(),t=(0,h.useContainer)(),n=(0,l.useValue)("isFocused",(function(){return e.getIsFocused()}),[e]);(0,f.useEffect)((function(){if(t)return t.addEventListener("dragover",e),t.addEventListener("drop",e),function(){t.removeEventListener("dragover",e),t.removeEventListener("drop",e)};function e(e){if(!e.isSpecialRedispatchedEvent){(0,d.preventDefault)(e),(0,d.stopEventPropagation)(e);var n=t.querySelector(".tl-canvas");if(n){var r=new DragEvent(e.type,e);r.isSpecialRedispatchedEvent=!0,n.dispatchEvent(r)}}}}),[t]),(0,f.useEffect)((function(){if("undefined"!==typeof window&&"matchMedia"in window){var t=null,n=function(){null!=t&&t();var r="(resolution: ".concat(window.devicePixelRatio,"dppx)"),o=matchMedia(r),i=function(e){"change"===e.type&&n()};o.addEventListener?o.addEventListener("change",n):o.addListener&&o.addListener(i),t=function(){o.removeEventListener?o.removeEventListener("change",n):o.removeListener&&o.removeListener(i)},e.updateInstanceState({devicePixelRatio:window.devicePixelRatio})};return n(),function(){var e;null===(e=t)||void 0===e||e()}}}),[e]),(0,f.useEffect)((function(){if(n){var r=function(n){if(!n.altKey||!e.isIn("zoom")&&e.getPath().endsWith(".idle")||m(e)||(0,d.preventDefault)(n),!n.isKilled){switch(n.isKilled=!0,n.key){case"=":case"-":case"0":if(n.metaKey||n.ctrlKey)return void(0,d.preventDefault)(n);break;case"Tab":default:if(m(e))return;break;case",":return;case"Escape":if((e.getEditingShape()||e.getSelectedShapeIds().length>0)&&(0,d.preventDefault)(n),e.menus.getOpenMenus().length>0)return;return void(e.inputs.keys.has("Escape")||(e.inputs.keys.add("Escape"),e.cancel(),t.focus()))}var r={type:"keyboard",name:n.repeat?"key_repeat":"key_down",key:n.key,code:n.code,shiftKey:n.shiftKey,altKey:n.altKey,ctrlKey:n.metaKey||n.ctrlKey,metaKey:n.metaKey,accelKey:(0,p.isAccelKey)(n)};e.dispatch(r)}},o=function(t){if(!t.isKilled&&(t.isKilled=!0,!m(e)&&","!==t.key)){var n={type:"keyboard",name:"key_up",key:t.key,code:t.code,shiftKey:t.shiftKey,altKey:t.altKey,ctrlKey:t.metaKey||t.ctrlKey,metaKey:t.metaKey,accelKey:(0,p.isAccelKey)(t)};e.dispatch(n)}},i=function(e){t.contains(e.target)&&(e.ctrlKey||e.metaKey)&&(0,d.preventDefault)(e)};return t.addEventListener("touchstart",a,{passive:!1}),t.addEventListener("wheel",i,{passive:!1}),document.addEventListener("gesturestart",d.preventDefault),document.addEventListener("gesturechange",d.preventDefault),document.addEventListener("gestureend",d.preventDefault),t.addEventListener("keydown",r),t.addEventListener("keyup",o),function(){t.removeEventListener("touchstart",a),t.removeEventListener("wheel",i),document.removeEventListener("gesturestart",d.preventDefault),document.removeEventListener("gesturechange",d.preventDefault),document.removeEventListener("gestureend",d.preventDefault),t.removeEventListener("keydown",r),t.removeEventListener("keyup",o)}}function a(n){if(t.contains(n.target)){var r=n.touches[0].pageX,o=n.touches[0].radiusX||0;if(r-o<10||r+o>e.getViewportScreenBounds().width-10){var i,a;if("BUTTON"===(null===(i=n.target)||void 0===i?void 0:i.tagName))null===(a=n.target)||void 0===a||a.click();(0,d.preventDefault)(n)}}}}),[e,t,n])}var y=["input","select","button","textarea"];function m(e){var t=document.activeElement;return e.menus.hasOpenMenus()||t&&(t.getAttribute("contenteditable")||y.indexOf(t.tagName.toLowerCase())>-1)}},10076:function(e,t,n){"use strict";var r,o=n(50883).default,i=Object.create,a=Object.defineProperty,u=Object.getOwnPropertyDescriptor,s=Object.getOwnPropertyNames,c=Object.getPrototypeOf,l=Object.prototype.hasOwnProperty,f=function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var i,c=o(s(t));try{var f=function(){var o=i.value;l.call(e,o)||o===n||a(e,o,{get:function(){return t[o]},enumerable:!(r=u(t,o))||r.enumerable})};for(c.s();!(i=c.n()).done;)f()}catch(d){c.e(d)}finally{c.f()}}return e},d={};!function(e,t){for(var n in t)a(e,n,{get:t[n],enumerable:!0})}(d,{EditorContext:function(){return g},EditorProvider:function(){return b},useEditor:function(){return y},useMaybeEditor:function(){return m}}),e.exports=(r=d,f(a({},"__esModule",{value:!0}),r));var p=n(44414),h=function(e,t,n){return n=null!=e?i(c(e)):{},f(!t&&e&&e.__esModule?n:a(n,"default",{value:e,enumerable:!0}),e)}(n(9950)),v=n(17625),g=(0,h.createContext)(null);function y(){var e=h.default.useContext(g);if(!e)throw new Error("useEditor must be used inside of the <Tldraw /> or <TldrawEditor /> components");return e}function m(){return h.default.useContext(g)}function b(e){var t=e.editor,n=e.children;return(0,p.jsx)(g.Provider,{value:t,children:(0,p.jsx)(v.IdProvider,{children:n})})}},93800:function(e,t,n){"use strict";var r,o=n(12897).default,i=n(50883).default,a=Object.defineProperty,u=Object.getOwnPropertyDescriptor,s=Object.getOwnPropertyNames,c=Object.prototype.hasOwnProperty,l={};!function(e,t){for(var n in t)a(e,n,{get:t[n],enumerable:!0})}(l,{EditorComponentsProvider:function(){return R},useEditorComponents:function(){return N}}),e.exports=(r=l,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,l=i(s(t));try{var f=function(){var i=o.value;c.call(e,i)||i===n||a(e,i,{get:function(){return t[i]},enumerable:!(r=u(t,i))||r.enumerable})};for(l.s();!(o=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(a({},"__esModule",{value:!0}),r));var f=n(44414),d=n(9950),p=n(62430),h=n(4816),v=n(34866),g=n(19911),y=n(77316),m=n(8020),b=n(65378),w=n(88400),S=n(76559),x=n(64848),P=n(48134),O=n(28182),k=n(2143),_=n(36857),j=n(87656),I=n(94106),T=n(70775),E=n(78468),C=n(57657),M=n(38898),A=n(89019),D=(0,d.createContext)(null);function R(e){var t=e.overrides,n=void 0===t?{}:t,r=e.children,i=(0,A.useShallowObjectIdentity)(n),a=(0,d.useMemo)((function(){return o({Background:p.DefaultBackground,SvgDefs:M.DefaultSvgDefs,Brush:h.DefaultBrush,ZoomBrush:h.DefaultBrush,CollaboratorBrush:h.DefaultBrush,Cursor:y.DefaultCursor,CollaboratorCursor:y.DefaultCursor,CollaboratorHint:g.DefaultCollaboratorHint,CollaboratorShapeIndicator:j.DefaultShapeIndicator,Grid:b.DefaultGrid,Scribble:P.DefaultScribble,SnapIndicator:E.DefaultSnapIndicator,Handles:S.DefaultHandles,Handle:w.DefaultHandle,CollaboratorScribble:P.DefaultScribble,ErrorFallback:m.DefaultErrorFallback,ShapeErrorFallback:_.DefaultShapeErrorFallback,ShapeIndicatorErrorFallback:I.DefaultShapeIndicatorErrorFallback,Spinner:C.DefaultSpinner,SelectionBackground:O.DefaultSelectionBackground,SelectionForeground:k.DefaultSelectionForeground,ShapeIndicators:T.DefaultShapeIndicators,ShapeIndicator:j.DefaultShapeIndicator,OnTheCanvas:null,InFrontOfTheCanvas:null,Canvas:v.DefaultCanvas,LoadingScreen:x.DefaultLoadingScreen},i)}),[i]);return(0,f.jsx)(D.Provider,{value:a,children:r})}function N(){var e=(0,d.useContext)(D);if(!e)throw new Error("useEditorComponents must be used inside of <EditorComponentsProvider />");return e}},88797:function(e,t,n){"use strict";var r,o=n(50883).default,i=Object.defineProperty,a=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,c={};!function(e,t){for(var n in t)i(e,n,{get:t[n],enumerable:!0})}(c,{useEvent:function(){return p},useReactiveEvent:function(){return h}}),e.exports=(r=c,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var c,l=o(u(t));try{var f=function(){var o=c.value;s.call(e,o)||o===n||i(e,o,{get:function(){return t[o]},enumerable:!(r=a(t,o))||r.enumerable})};for(l.s();!(c=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(i({},"__esModule",{value:!0}),r));var l=n(61267),f=n(30645),d=n(9950);function p(e){var t=(0,d.useRef)();return(0,d.useLayoutEffect)((function(){t.current=e})),(0,d.useDebugValue)(e),(0,d.useCallback)((function(){var e=t.current;return(0,f.assert)(e,"fn does not exist"),e.apply(void 0,arguments)}),[])}function h(e){var t=(0,l.useAtom)("useReactiveEvent",(function(){return e}));return(0,d.useLayoutEffect)((function(){t.set(e)})),(0,d.useDebugValue)(e),(0,d.useCallback)((function(){var e=t.get();return(0,f.assert)(e,"fn does not exist"),e.apply(void 0,arguments)}),[t])}},89909:function(e,t,n){"use strict";var r,o=n(50883).default,i=Object.defineProperty,a=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,c={};!function(e,t){for(var n in t)i(e,n,{get:t[n],enumerable:!0})}(c,{useFixSafariDoubleTapZoomPencilEvents:function(){return h}}),e.exports=(r=c,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var c,l=o(u(t));try{var f=function(){var o=c.value;s.call(e,o)||o===n||i(e,o,{get:function(){return t[o]},enumerable:!(r=a(t,o))||r.enumerable})};for(l.s();!(c=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(i({},"__esModule",{value:!0}),r));var l=n(9950),f=n(90923),d=n(10076),p=["textarea","input"];function h(e){var t=(0,d.useEditor)();(0,l.useEffect)((function(){var n=e.current;if(n){var r=function(e){if(e instanceof PointerEvent&&"pen"===e.pointerType){var n;e.isKilled=!0;var r=e.target;if(p.includes(null===(n=r.tagName)||void 0===n?void 0:n.toLocaleLowerCase())||t.isIn("select.editing_shape"))return;(0,f.preventDefault)(e)}};return n.addEventListener("touchstart",r),n.addEventListener("touchend",r),function(){n.removeEventListener("touchstart",r),n.removeEventListener("touchend",r)}}}),[t,e])}},12043:function(e,t,n){"use strict";var r,o=n(85715).default,i=n(50883).default,a=Object.defineProperty,u=Object.getOwnPropertyDescriptor,s=Object.getOwnPropertyNames,c=Object.prototype.hasOwnProperty,l={};!function(e,t){for(var n in t)a(e,n,{get:t[n],enumerable:!0})}(l,{useForceUpdate:function(){return d}}),e.exports=(r=l,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,l=i(s(t));try{var f=function(){var i=o.value;c.call(e,i)||i===n||a(e,i,{get:function(){return t[i]},enumerable:!(r=u(t,i))||r.enumerable})};for(l.s();!(o=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(a({},"__esModule",{value:!0}),r));var f=n(9950);function d(){var e=(0,f.useState)(0),t=o(e,2),n=(t[0],t[1]);(0,f.useEffect)((function(){return n((function(e){return e+1}))}),[])}},62767:function(e,t,n){"use strict";var r,o=n(50883).default,i=Object.create,a=Object.defineProperty,u=Object.getOwnPropertyDescriptor,s=Object.getOwnPropertyNames,c=Object.getPrototypeOf,l=Object.prototype.hasOwnProperty,f=function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var i,c=o(s(t));try{var f=function(){var o=i.value;l.call(e,o)||o===n||a(e,o,{get:function(){return t[o]},enumerable:!(r=u(t,o))||r.enumerable})};for(c.s();!(i=c.n()).done;)f()}catch(d){c.e(d)}finally{c.f()}}return e},d={};!function(e,t){for(var n in t)a(e,n,{get:t[n],enumerable:!0})}(d,{useGestureEvents:function(){return P}}),e.exports=(r=d,f(a({},"__esModule",{value:!0}),r));var p=n(23493),h=function(e,t,n){return n=null!=e?i(c(e)):{},f(!t&&e&&e.__esModule?n:a(n,"default",{value:e,enumerable:!0}),e)}(n(9950)),v=n(45650),g=n(90923),y=n(95518),m=n(20573),b=n(10076),w=(0,p.createUseGesture)([p.wheelAction,p.pinchAction]),S=void 0,x=function(e){return void 0===S?(S=e,!1):e-S>120&&e-S<160?(S=e,!0):(S=e,!1)};function P(e){var t=(0,b.useEditor)(),n=h.useMemo((function(){var n="not sure",r=1,o=1,i=1,a=0,u=new v.Vec,s=new v.Vec;return{onWheel:function(e){var r=e.event;if(t.getInstanceState().isFocused&&(n="not sure",!x(Date.now()))){var o=t.getEditingShapeId();if(o){var i=t.getShape(o);if(i)if(t.getShapeUtil(i).canScroll(i)){var a=t.getShapePageBounds(o);if(null!==a&&void 0!==a&&a.containsPoint(t.inputs.currentPagePoint))return}}(0,g.preventDefault)(r),(0,g.stopEventPropagation)(r);var u=(0,m.normalizeWheel)(r);if(0!==u.x||0!==u.y){var s={type:"wheel",name:"wheel",delta:u,point:new v.Vec(r.clientX,r.clientY),shiftKey:r.shiftKey,altKey:r.altKey,ctrlKey:r.metaKey||r.ctrlKey,metaKey:r.metaKey,accelKey:(0,y.isAccelKey)(r)};t.dispatch(s)}}},onPinchStart:function(i){var a=e.current;n="not sure";var c=i.event,l=i.origin,f=i.da;c instanceof WheelEvent||(c.target===a||null!==a&&void 0!==a&&a.contains(c.target))&&(s.x=l[0],s.y=l[1],u.x=l[0],u.y=l[1],r=f[0],o=t.getZoomLevel(),t.dispatch({type:"pinch",name:"pinch_start",point:{x:l[0],y:l[1],z:t.getZoomLevel()},delta:{x:0,y:0},shiftKey:c.shiftKey,altKey:c.altKey,ctrlKey:c.metaKey||c.ctrlKey,metaKey:c.metaKey,accelKey:(0,y.isAccelKey)(c)}))},onPinchEnd:function(r){var o=e.current,i=r.event,a=r.origin,u=r.offset;if(!(i instanceof WheelEvent)&&(i.target===o||null!==o&&void 0!==o&&o.contains(i.target))){var s=u[0];n="not sure",t.timers.requestAnimationFrame((function(){t.dispatch({type:"pinch",name:"pinch_end",point:{x:a[0],y:a[1],z:s},delta:{x:a[0],y:a[1]},shiftKey:i.shiftKey,altKey:i.altKey,ctrlKey:i.metaKey||i.ctrlKey,metaKey:i.metaKey,accelKey:(0,y.isAccelKey)(i)})}))}},onPinch:function(c){var l=e.current,f=c.event,d=c.origin,p=c.offset,h=c.da;if(!(f instanceof WheelEvent)&&(f.target===l||null!==l&&void 0!==l&&l.contains(f.target))){var g="gesturechange"===c.type||"gestureend"===c.type;a=h[0];var m=d[0]-s.x,b=d[1]-s.y;switch(s.x=d[0],s.y=d[1],function(e){if(e&&(n="zooming"),"zooming"!==n){var t=Math.abs(a-r),o=v.Vec.Dist(u,s);switch(n){case"not sure":t>24?n="zooming":o>16&&(n="panning");break;case"panning":t>64&&(n="zooming")}}}(g),n){case"zooming":i=p[0],t.dispatch({type:"pinch",name:"pinch",point:{x:d[0],y:d[1],z:i},delta:{x:m,y:b},shiftKey:f.shiftKey,altKey:f.altKey,ctrlKey:f.metaKey||f.ctrlKey,metaKey:f.metaKey,accelKey:(0,y.isAccelKey)(f)});break;case"panning":t.dispatch({type:"pinch",name:"pinch",point:{x:d[0],y:d[1],z:o},delta:{x:m,y:b},shiftKey:f.shiftKey,altKey:f.altKey,ctrlKey:f.metaKey||f.ctrlKey,metaKey:f.metaKey,accelKey:(0,y.isAccelKey)(f)})}}}}}),[t,e]);w(n,{target:e,eventOptions:{passive:!1},pinch:{from:function(){return[t.getZoomLevel(),0]},scaleBounds:function(){var e=t.getBaseZoom(),n=t.getCameraOptions().zoomSteps,r=n[0]*e,o=n[n.length-1]*e;return{from:t.getZoomLevel(),max:o,min:r}}}})}},32725:function(e,t,n){"use strict";var r,o=n(50883).default,i=Object.defineProperty,a=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,c={};!function(e,t){for(var n in t)i(e,n,{get:t[n],enumerable:!0})}(c,{useGlobalMenuIsOpen:function(){return p}}),e.exports=(r=c,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var c,l=o(u(t));try{var f=function(){var o=c.value;s.call(e,o)||o===n||i(e,o,{get:function(){return t[o]},enumerable:!(r=a(t,o))||r.enumerable})};for(l.s();!(c=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(i({},"__esModule",{value:!0}),r));var l=n(61267),f=n(9950),d=n(49098);function p(e,t,n){var r=(0,f.useRef)(!1),o=(0,f.useCallback)((function(n){r.current=n,n?d.tlmenus.addOpenMenu(e):d.tlmenus.deleteOpenMenu(e),null===t||void 0===t||t(n)}),[e,t]),i=(0,l.useValue)("is menu open",(function(){return d.tlmenus.getOpenMenus().includes(e)}),[e]);return(0,f.useEffect)((function(){return r.current&&(null===n||void 0===n||n("open-menu"),d.tlmenus.addOpenMenu(e)),function(){r.current&&(d.tlmenus.deleteOpenMenu(e),d.tlmenus.getOpenMenus().forEach((function(t){t.startsWith(e)&&(null===n||void 0===n||n("close-menu"),d.tlmenus.deleteOpenMenu(t))})),r.current=!1)}}),[e,n]),[i,o]}},49562:function(e,t,n){"use strict";var r,o=n(12897).default,i=n(50883).default,a=Object.create,u=Object.defineProperty,s=Object.getOwnPropertyDescriptor,c=Object.getOwnPropertyNames,l=Object.getPrototypeOf,f=Object.prototype.hasOwnProperty,d=function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,a=i(c(t));try{var l=function(){var i=o.value;f.call(e,i)||i===n||u(e,i,{get:function(){return t[i]},enumerable:!(r=s(t,i))||r.enumerable})};for(a.s();!(o=a.n()).done;)l()}catch(d){a.e(d)}finally{a.f()}}return e},p={};!function(e,t){for(var n in t)u(e,n,{get:t[n],enumerable:!0})}(p,{useHandleEvents:function(){return b}}),e.exports=(r=p,d(u({},"__esModule",{value:!0}),r));var h=function(e,t,n){return n=null!=e?a(l(e)):{},d(!t&&e&&e.__esModule?n:u(n,"default",{value:e,enumerable:!0}),e)}(n(9950)),v=n(90923),g=n(17054),y=n(10076);function m(e,t,n){var r=e.getShape(t);return{shape:r,handle:e.getShapeHandles(r).find((function(e){return e.id===n}))}}function b(e,t){var n=(0,y.useEditor)();return h.useMemo((function(){var r,i;return{onPointerDown:function(r){if(!r.isKilled){var i=(0,v.loopToHtmlElement)(r.currentTarget);(0,v.setPointerCapture)(i,r);var a=m(n,e,t),u=a.shape,s=a.handle;s&&n.dispatch(o({type:"pointer",target:"handle",handle:s,shape:u,name:"pointer_down"},(0,g.getPointerInfo)(r)))}},onPointerMove:function(a){if(!a.isKilled&&(a.clientX!==r||a.clientY!==i)){r=a.clientX,i=a.clientY;var u=m(n,e,t),s=u.shape,c=u.handle;c&&n.dispatch(o({type:"pointer",target:"handle",handle:c,shape:s,name:"pointer_move"},(0,g.getPointerInfo)(a)))}},onPointerUp:function(r){if(!r.isKilled){var i=(0,v.loopToHtmlElement)(r.currentTarget);(0,v.releasePointerCapture)(i,r);var a=m(n,e,t),u=a.shape,s=a.handle;s&&n.dispatch(o({type:"pointer",target:"handle",handle:s,shape:u,name:"pointer_up"},(0,g.getPointerInfo)(r)))}}}}),[n,e,t])}},89019:function(e,t,n){"use strict";var r,o=n(50883).default,i=Object.defineProperty,a=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,c={};!function(e,t){for(var n in t)i(e,n,{get:t[n],enumerable:!0})}(c,{useShallowArrayIdentity:function(){return h},useShallowObjectIdentity:function(){return g}}),e.exports=(r=c,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var c,l=o(u(t));try{var f=function(){var o=c.value;s.call(e,o)||o===n||i(e,o,{get:function(){return t[o]},enumerable:!(r=a(t,o))||r.enumerable})};for(l.s();!(c=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(i({},"__esModule",{value:!0}),r));var l=n(30645),f=n(9950);function d(e,t){var n=(0,f.useRef)(e);return t(e,n.current)?n.current:(n.current=e,e)}var p=function(e,t){var n,r;return null!==(n=e)&&void 0!==n||(e=null),null!==(r=t)&&void 0!==r||(t=null),e===t||!(!e||!t)&&(0,l.areArraysShallowEqual)(e,t)};function h(e){return d(e,p)}var v=function(e,t){var n,r;return null!==(n=e)&&void 0!==n||(e=null),null!==(r=t)&&void 0!==r||(t=null),e===t||!(!e||!t)&&(0,l.areObjectsShallowEqual)(e,t)};function g(e){return d(e,v)}},33059:function(e,t,n){"use strict";var r,o=n(50883).default,i=Object.defineProperty,a=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,c={};!function(e,t){for(var n in t)i(e,n,{get:t[n],enumerable:!0})}(c,{useIsCropping:function(){return d}}),e.exports=(r=c,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var c,l=o(u(t));try{var f=function(){var o=c.value;s.call(e,o)||o===n||i(e,o,{get:function(){return t[o]},enumerable:!(r=a(t,o))||r.enumerable})};for(l.s();!(c=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(i({},"__esModule",{value:!0}),r));var l=n(61267),f=n(10076);function d(e){var t=(0,f.useEditor)();return(0,l.useValue)("isCropping",(function(){return t.getCroppingShapeId()===e}),[t,e])}},9166:function(e,t,n){"use strict";var r,o=n(50883).default,i=Object.defineProperty,a=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,c={};!function(e,t){for(var n in t)i(e,n,{get:t[n],enumerable:!0})}(c,{useIsDarkMode:function(){return p}}),e.exports=(r=c,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var c,l=o(u(t));try{var f=function(){var o=c.value;s.call(e,o)||o===n||i(e,o,{get:function(){return t[o]},enumerable:!(r=a(t,o))||r.enumerable})};for(l.s();!(c=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(i({},"__esModule",{value:!0}),r));var l=n(61267),f=n(73470),d=n(10076);function p(){var e=(0,d.useEditor)(),t=(0,f.useSvgExportContext)();return(0,l.useValue)("isDarkMode",(function(){var n;return null!==(n=null===t||void 0===t?void 0:t.isDarkMode)&&void 0!==n?n:e.user.getIsDarkMode()}),[t,e])}},18229:function(e,t,n){"use strict";var r,o=n(50883).default,i=Object.defineProperty,a=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,c={};!function(e,t){for(var n in t)i(e,n,{get:t[n],enumerable:!0})}(c,{useIsEditing:function(){return d}}),e.exports=(r=c,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var c,l=o(u(t));try{var f=function(){var o=c.value;s.call(e,o)||o===n||i(e,o,{get:function(){return t[o]},enumerable:!(r=a(t,o))||r.enumerable})};for(l.s();!(c=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(i({},"__esModule",{value:!0}),r));var l=n(61267),f=n(10076);function d(e){var t=(0,f.useEditor)();return(0,l.useValue)("isEditing",(function(){return t.getEditingShapeId()===e}),[t,e])}},58473:function(e,t,n){"use strict";var r,o=n(4633).default,i=n(29293).default,a=n(12897).default,u=n(91847).default,s=n(85715).default,c=n(50883).default,l=["persistenceKey","sessionId"],f=Object.defineProperty,d=Object.getOwnPropertyDescriptor,p=Object.getOwnPropertyNames,h=Object.prototype.hasOwnProperty,v={};!function(e,t){for(var n in t)f(e,n,{get:t[n],enumerable:!0})}(v,{useLocalStore:function(){return x}}),e.exports=(r=v,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,i=c(p(t));try{var a=function(){var i=o.value;h.call(e,i)||i===n||f(e,i,{get:function(){return t[i]},enumerable:!(r=d(t,i))||r.enumerable})};for(i.s();!(o=i.n()).done;)a()}catch(u){i.e(u)}finally{i.f()}}return e}(f({},"__esModule",{value:!0}),r));var g=n(30645),y=n(9950),m=n(41181),b=n(83508),w=n(89019),S=n(55367);function x(e){var t=(0,S.useRefState)({status:"loading"}),n=s(t,2),r=n[0],c=n[1];return e=(0,w.useShallowObjectIdentity)(e),(0,y.useEffect)((function(){var t=e,n=t.persistenceKey,r=t.sessionId,s=u(t,l);if(n){c({status:"loading"});var f=new g.WeakCache,d=a({upload:function(){var e=i(o().mark((function e(t,n){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.db.storeAsset(t.id,n);case 2:return e.abrupt("return",t.id);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),resolve:function(){var e=i(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.props.src){e.next=2;break}return e.abrupt("return",null);case 2:if(!t.props.src.startsWith("asset:")){e.next=6;break}return e.next=5,f.get(t,i(o().mark((function e(){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.db.getAsset(t.id);case 2:if(n=e.sent){e.next=5;break}return e.abrupt("return",null);case 5:return e.abrupt("return",URL.createObjectURL(n));case 6:case"end":return e.stop()}}),e)}))));case 5:return e.abrupt("return",e.sent);case 6:return e.abrupt("return",t.props.src);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},s.assets),p=(0,m.createTLStore)(a(a({},s),{},{assets:d})),h=!1,v=new b.TLLocalSyncClient(p,{sessionId:r,persistenceKey:n,onLoad:function(){h||c({store:p,status:"synced-local"})},onLoadError:function(e){h||c({status:"error",error:e})}});return function(){h=!0,v.close()}}c({status:"not-synced",store:(0,m.createTLStore)(s)})}),[e,c]),r}},2321:function(e,t,n){"use strict";var r,o=n(50883).default,i=Object.defineProperty,a=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,c={};!function(e,t){for(var n in t)i(e,n,{get:t[n],enumerable:!0})}(c,{usePassThroughWheelEvents:function(){return p}}),e.exports=(r=c,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var c,l=o(u(t));try{var f=function(){var o=c.value;s.call(e,o)||o===n||i(e,o,{get:function(){return t[o]},enumerable:!(r=a(t,o))||r.enumerable})};for(l.s();!(c=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(i({},"__esModule",{value:!0}),r));var l=n(9950),f=n(90923),d=n(77374);function p(e){if(!e)throw Error("usePassThroughWheelEvents must be passed a ref");var t=(0,d.useContainer)();(0,l.useEffect)((function(){function n(e){if(!e.isSpecialRedispatchedEvent){(0,f.preventDefault)(e);var n=t.querySelector(".tl-canvas");if(n){var r=new WheelEvent("wheel",e);r.isSpecialRedispatchedEvent=!0,n.dispatchEvent(r)}}}var r=e.current;if(r)return r.addEventListener("wheel",n,{passive:!1}),function(){r.removeEventListener("wheel",n)}}),[t,e])}},89071:function(e,t,n){"use strict";var r,o=n(50883).default,i=Object.defineProperty,a=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,c={};!function(e,t){for(var n in t)i(e,n,{get:t[n],enumerable:!0})}(c,{usePeerIds:function(){return p}}),e.exports=(r=c,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var c,l=o(u(t));try{var f=function(){var o=c.value;s.call(e,o)||o===n||i(e,o,{get:function(){return t[o]},enumerable:!(r=a(t,o))||r.enumerable})};for(l.s();!(c=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(i({},"__esModule",{value:!0}),r));var l=n(61267),f=n(44246),d=n(10076);function p(){var e=(0,d.useEditor)(),t=(0,l.useComputed)("userIds",(function(){return(0,f.uniq)(e.getCollaborators().map((function(e){return e.userId}))).sort()}),{isEqual:function(e,t){var n;return e.join(",")===(null===(n=t.join)||void 0===n?void 0:n.call(t,","))}},[e]);return(0,l.useValue)(t)}},97592:function(e,t,n){"use strict";var r,o=n(50883).default,i=Object.defineProperty,a=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,c={};!function(e,t){for(var n in t)i(e,n,{get:t[n],enumerable:!0})}(c,{usePresence:function(){return d}}),e.exports=(r=c,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var c,l=o(u(t));try{var f=function(){var o=c.value;s.call(e,o)||o===n||i(e,o,{get:function(){return t[o]},enumerable:!(r=a(t,o))||r.enumerable})};for(l.s();!(c=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(i({},"__esModule",{value:!0}),r));var l=n(61267),f=n(10076);function d(e){var t=(0,f.useEditor)(),n=(0,l.useValue)("latestPresence:".concat(e),(function(){return t.getCollaborators().find((function(t){return t.userId===e}))}),[t,e]);return null!==n&&void 0!==n?n:null}},55367:function(e,t,n){"use strict";var r,o=n(85715).default,i=n(50883).default,a=Object.defineProperty,u=Object.getOwnPropertyDescriptor,s=Object.getOwnPropertyNames,c=Object.prototype.hasOwnProperty,l={};!function(e,t){for(var n in t)a(e,n,{get:t[n],enumerable:!0})}(l,{useRefState:function(){return d}}),e.exports=(r=l,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,l=i(s(t));try{var f=function(){var i=o.value;c.call(e,i)||i===n||a(e,i,{get:function(){return t[i]},enumerable:!(r=u(t,i))||r.enumerable})};for(l.s();!(o=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(a({},"__esModule",{value:!0}),r));var f=n(9950);function d(e){var t=(0,f.useRef)(e),n=(0,f.useState)(e),r=o(n,2),i=r[0],a=r[1];return i!==t.current&&a(t.current),[i,(0,f.useCallback)((function(e){t.current="function"===typeof e?e(t.current):e,a(t.current)}),[])]}},17625:function(e,t,n){"use strict";var r,o=n(50883).default,i=Object.defineProperty,a=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,c={};!function(e,t){for(var n in t)i(e,n,{get:t[n],enumerable:!0})}(c,{IdProvider:function(){return m},sanitizeId:function(){return g},suffixSafeId:function(){return p},useSharedSafeId:function(){return v},useUniqueSafeId:function(){return h}}),e.exports=(r=c,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var c,l=o(u(t));try{var f=function(){var o=c.value;s.call(e,o)||o===n||i(e,o,{get:function(){return t[o]},enumerable:!(r=a(t,o))||r.enumerable})};for(l.s();!(c=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(i({},"__esModule",{value:!0}),r));var l=n(44414),f=n(30645),d=n(9950);function p(e,t){return g("".concat(e,"_").concat(t))}function h(e){return g("".concat((0,d.useId)()).concat(null!==e&&void 0!==e?e:""))}function v(e){var t=(0,f.assertExists)((0,d.useContext)(y));return g("".concat(t,"_").concat(e))}function g(e){return e.replace(/:/g,"_")}var y=(0,d.createContext)(null);function m(e){var t=e.children,n=h();return(0,l.jsx)(y.Provider,{value:n,children:t})}},87456:function(e,t,n){"use strict";var r,o=n(50883).default,i=Object.defineProperty,a=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,c={};!function(e,t){for(var n in t)i(e,n,{get:t[n],enumerable:!0})}(c,{useScreenBounds:function(){return p}}),e.exports=(r=c,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var c,l=o(u(t));try{var f=function(){var o=c.value;s.call(e,o)||o===n||i(e,o,{get:function(){return t[o]},enumerable:!(r=a(t,o))||r.enumerable})};for(l.s();!(c=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(i({},"__esModule",{value:!0}),r));var l=n(30645),f=n(9950),d=n(10076);function p(e){var t=(0,d.useEditor)();(0,f.useLayoutEffect)((function(){var n=(0,l.throttle)((function(){e.current&&t.updateViewportScreenBounds(e.current)}),200,{trailing:!0}),r=t.timers.setInterval(n,1e3);window.addEventListener("resize",n);var o=new ResizeObserver((function(e){e[0].contentRect&&n()})),i=e.current,a=null;return i&&(o.observe(i),(a=h(i)).addEventListener("scroll",n)),function(){var e;clearInterval(r),window.removeEventListener("resize",n),o.disconnect(),null===(e=a)||void 0===e||e.removeEventListener("scroll",n),n.cancel()}}),[t,e])}var h=function(e){for(var t=e.parentElement;t;){if(t===document.body)return document;var n=window.getComputedStyle(t).overflowY;if(t.scrollHeight>t.clientHeight&&("auto"===n||"scroll"===n||"overlay"===n))return t;t=t.parentElement}return document}},92194:function(e,t,n){"use strict";var r,o=n(12897).default,i=n(50883).default,a=Object.defineProperty,u=Object.getOwnPropertyDescriptor,s=Object.getOwnPropertyNames,c=Object.prototype.hasOwnProperty,l={};!function(e,t){for(var n in t)a(e,n,{get:t[n],enumerable:!0})}(l,{useSelectionEvents:function(){return g}}),e.exports=(r=l,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,l=i(s(t));try{var f=function(){var i=o.value;c.call(e,i)||i===n||a(e,i,{get:function(){return t[i]},enumerable:!(r=u(t,i))||r.enumerable})};for(l.s();!(o=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(a({},"__esModule",{value:!0}),r));var f=n(9950),d=n(63792),p=n(90923),h=n(17054),v=n(10076);function g(e){var t=(0,v.useEditor)();return(0,f.useMemo)((function(){var n,r;return{onPointerDown:function(n){if(!n.isKilled)if(n.button!==d.RIGHT_MOUSE_BUTTON){if(0===n.button){var r=(0,p.loopToHtmlElement)(n.currentTarget);(0,p.setPointerCapture)(r,n),r.addEventListener("pointerup",(function e(){r.removeEventListener("pointerup",e),(0,p.releasePointerCapture)(r,n)})),t.dispatch(o({name:"pointer_down",type:"pointer",target:"selection",handle:e},(0,h.getPointerInfo)(n))),(0,p.stopEventPropagation)(n)}}else t.dispatch(o({type:"pointer",target:"selection",handle:e,name:"right_click"},(0,h.getPointerInfo)(n)))},onPointerMove:function(i){i.isKilled||0===i.button&&(i.clientX===n&&i.clientY===r||(n=i.clientX,r=i.clientY,t.dispatch(o({name:"pointer_move",type:"pointer",target:"selection",handle:e},(0,h.getPointerInfo)(i)))))},onPointerUp:function(n){n.isKilled||0===n.button&&t.dispatch(o({name:"pointer_up",type:"pointer",target:"selection",handle:e},(0,h.getPointerInfo)(n)))}}}),[t,e])}},88996:function(e,t,n){"use strict";var r,o=n(85715).default,i=n(50883).default,a=Object.defineProperty,u=Object.getOwnPropertyDescriptor,s=Object.getOwnPropertyNames,c=Object.prototype.hasOwnProperty,l={};!function(e,t){for(var n in t)a(e,n,{get:t[n],enumerable:!0})}(l,{useTLSchemaFromUtils:function(){return v},useTLStore:function(){return h}}),e.exports=(r=l,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,l=i(s(t));try{var f=function(){var i=o.value;c.call(e,i)||i===n||a(e,i,{get:function(){return t[i]},enumerable:!(r=u(t,i))||r.enumerable})};for(l.s();!(o=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(a({},"__esModule",{value:!0}),r));var f=n(30645),d=n(9950),p=n(41181);function h(e){var t=(0,d.useState)((function(){return{store:(0,p.createTLStore)(e),opts:e}})),n=o(t,2),r=n[0],i=n[1];if(!(0,f.areObjectsShallowEqual)(r.opts,e)){var a={store:(0,p.createTLStore)(e),opts:e};return i(a),a.store}return r.store}function v(e){var t=(0,d.useState)((function(){return{opts:e,schema:(0,p.createTLSchemaFromUtils)(e)}})),n=o(t,2),r=n[0],i=n[1];if(!(0,f.areObjectsShallowEqual)(r.opts,e)){var a=(0,p.createTLSchemaFromUtils)(e);return i({opts:e,schema:a}),a}return r.schema}},34081:function(e,t,n){"use strict";var r,o=n(50883).default,i=Object.defineProperty,a=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,c={};!function(e,t){for(var n in t)i(e,n,{get:t[n],enumerable:!0})}(c,{useTransform:function(){return f}}),e.exports=(r=c,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var c,l=o(u(t));try{var f=function(){var o=c.value;s.call(e,o)||o===n||i(e,o,{get:function(){return t[o]},enumerable:!(r=a(t,o))||r.enumerable})};for(l.s();!(c=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(i({},"__esModule",{value:!0}),r));var l=n(9950);function f(e,t,n,r,o,i){(0,l.useLayoutEffect)((function(){var a=e.current;if(a&&void 0!==t){var u="translate(".concat(t,"px, ").concat(n,"px)");void 0!==r&&(u+=" scale(".concat(r,")")),void 0!==o&&(u+=" rotate(".concat(o,"rad)")),i&&(u+=" translate(".concat(i.x,"px, ").concat(i.y,"px)")),a.style.transform=u}}))}},5367:function(e,t,n){"use strict";var r,o=n(50883).default,i=Object.create,a=Object.defineProperty,u=Object.getOwnPropertyDescriptor,s=Object.getOwnPropertyNames,c=Object.getPrototypeOf,l=Object.prototype.hasOwnProperty,f=function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var i,c=o(s(t));try{var f=function(){var o=i.value;l.call(e,o)||o===n||a(e,o,{get:function(){return t[o]},enumerable:!(r=u(t,o))||r.enumerable})};for(c.s();!(i=c.n()).done;)f()}catch(d){c.e(d)}finally{c.f()}}return e},d={};!function(e,t){for(var n in t)a(e,n,{get:t[n],enumerable:!0})}(d,{useZoomCss:function(){return m}}),e.exports=(r=d,f(a({},"__esModule",{value:!0}),r));var p=n(81501),h=n(30645),v=function(e,t,n){return n=null!=e?i(c(e)):{},f(!t&&e&&e.__esModule?n:a(n,"default",{value:e,enumerable:!0}),e)}(n(9950)),g=n(77374),y=n(10076);function m(){var e=(0,y.useEditor)(),t=(0,g.useContainer)();v.useEffect((function(){var n=function(e){return t.style.setProperty("--tl-zoom",e.toString())},r=(0,h.debounce)(n,100),o=new p.EffectScheduler("useZoomCss",(function(){e.getCurrentPageShapeIds().size<300?n(e.getZoomLevel()):r(e.getZoomLevel())}));return o.attach(),o.execute(),function(){o.detach(),r.cancel()}}),[e,t])}},70759:function(e,t,n){"use strict";var r,o=n(4633).default,i=n(85715).default,a=n(29293).default,u=n(17383).default,s=n(34579).default,c=n(43693).default,l=n(41132).default,f=n(50883).default,d=Object.defineProperty,p=Object.getOwnPropertyDescriptor,h=Object.getOwnPropertyNames,v=Object.prototype.hasOwnProperty,g={};!function(e,t){for(var n in t)d(e,n,{get:t[n],enumerable:!0})}(g,{FLAGS:function(){return x},LicenseManager:function(){return I},PROPERTIES:function(){return O},isEditorUnlicensed:function(){return T}}),e.exports=(r=g,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,i=f(h(t));try{var a=function(){var i=o.value;v.call(e,i)||i===n||d(e,i,{get:function(){return t[i]},enumerable:!(r=p(t,i))||r.enumerable})};for(i.s();!(o=i.n()).done;)a()}catch(u){i.e(u)}finally{i.f()}}return e}(d({},"__esModule",{value:!0}),r));var y=n(81501),m=n(30645),b=n(35057),w=n(61114),S=n(35539),x={ANNUAL_LICENSE:1,PERPETUAL_LICENSE:2,INTERNAL_LICENSE:4,WITH_WATERMARK:8},P=Math.max.apply(Math,l(Object.values(x))),O={ID:0,HOSTS:1,FLAGS:2,EXPIRY_DATE:3},k=Object.keys(O).length,_="sales@tldraw.com",j="".concat((0,w.getDefaultCdnBaseUrl)(),"/watermarks/watermark-track.svg"),I=function(){return s((function e(t,n,r){var o=this;u(this,e),c(this,"publicKey","MFkwEwYHKoZIzj0CAQYIKoZIzj0DAQcDQgAEHJh0uUfxHtCGyerXmmatE368Hd9rI6LH9oPDQihnaCryRFWEVeOvf9U/SPbyxX74LFyJs5tYeAHq5Nc0Ax25LQ"),c(this,"isDevelopment",void 0),c(this,"isTest",void 0),c(this,"isCryptoAvailable",void 0),c(this,"state",(0,y.atom)("license state","pending")),c(this,"verbose",!0),this.isTest=!1,this.isDevelopment=this.getIsDevelopment(r),this.publicKey=n||this.publicKey,this.isCryptoAvailable=!!crypto.subtle,this.getLicenseFromKey(t).then((function(e){var t=T(e);!o.isDevelopment&&t&&(0,m.fetch)(j),t?o.state.set("unlicensed"):e.isLicensedWithWatermark?o.state.set("licensed-with-watermark"):o.state.set("licensed")}))}),[{key:"getIsDevelopment",value:function(e){return"development"===e||"production"!==e&&"https:"!==window.location.protocol}},{key:"extractLicenseKey",value:function(){var e=a(o().mark((function e(t){var n,r,a,u,s,c,l,f,d,p,h;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.split("."),r=i(n,2),a=r[0],u=r[1],s=a.split("/"),c=i(s,2),l=c[0],f=c[1],l.startsWith("tldraw-")){e.next=4;break}throw new Error("Unsupported prefix '".concat(l,"'"));case 4:return e.next=6,(0,S.importPublicKey)(this.publicKey);case 6:return d=e.sent,e.prev=7,e.next=10,crypto.subtle.verify({name:"ECDSA",hash:{name:"SHA-256"}},d,new Uint8Array((0,S.str2ab)(atob(u))),new Uint8Array((0,S.str2ab)(atob(f))));case 10:p=e.sent,e.next=17;break;case 13:throw e.prev=13,e.t0=e.catch(7),console.error(e.t0),new Error("Could not perform signature validation");case 17:if(p){e.next=19;break}throw new Error("Invalid signature");case 19:e.prev=19,h=JSON.parse(atob(f)),e.next=26;break;case 23:throw e.prev=23,e.t1=e.catch(19),new Error("Could not parse object");case 26:return h.length>k&&this.outputMessages(["License key contains some unknown properties.","You may want to update tldraw packages to a newer version to get access to new functionality."]),e.abrupt("return",{id:h[O.ID],hosts:h[O.HOSTS],flags:h[O.FLAGS],expiryDate:h[O.EXPIRY_DATE]});case 28:case"end":return e.stop()}}),e,this,[[7,13],[19,23]])})));return function(t){return e.apply(this,arguments)}}()},{key:"getLicenseFromKey",value:function(){var e=a(o().mark((function e(t){var n,r,i,a,u,s;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=3;break}return this.isDevelopment||this.outputNoLicenseKeyProvided(),e.abrupt("return",{isLicenseParseable:!1,reason:"no-key-provided"});case 3:if(!this.isDevelopment||this.isCryptoAvailable){e.next=6;break}return this.verbose&&(console.log("tldraw: you seem to be in a development environment that does not support crypto. License not verified."),console.log("You should check that this works in production separately.")),e.abrupt("return",{isLicenseParseable:!1,reason:"has-key-development-mode"});case 6:return n=(n=t.replace(/[\u200B-\u200D\uFEFF]/g,"")).replace(/\r?\n|\r/g,""),e.prev=8,e.next=11,this.extractLicenseKey(n);case 11:return r=e.sent,i=new Date(r.expiryDate),a=this.isFlagEnabled(r.flags,x.ANNUAL_LICENSE),u=this.isFlagEnabled(r.flags,x.PERPETUAL_LICENSE),s={license:r,isLicenseParseable:!0,isDevelopment:this.isDevelopment,isDomainValid:this.isDomainValid(r),expiryDate:i,isAnnualLicense:a,isAnnualLicenseExpired:a&&this.isAnnualLicenseExpired(i),isPerpetualLicense:u,isPerpetualLicenseExpired:u&&this.isPerpetualLicenseExpired(i),isInternalLicense:this.isFlagEnabled(r.flags,x.INTERNAL_LICENSE),isLicensedWithWatermark:this.isFlagEnabled(r.flags,x.WITH_WATERMARK)},this.outputLicenseInfoIfNeeded(s),e.abrupt("return",s);case 20:return e.prev=20,e.t0=e.catch(8),this.outputInvalidLicenseKey(e.t0.message),e.abrupt("return",{isLicenseParseable:!1,reason:"invalid-license-key"});case 24:case"end":return e.stop()}}),e,this,[[8,20]])})));return function(t){return e.apply(this,arguments)}}()},{key:"isDomainValid",value:function(e){var t=window.location.hostname.toLowerCase();return e.hosts.some((function(e){var n=e.toLowerCase().trim();if(n===t||"www.".concat(n)===t||n==="www.".concat(t))return!0;if("*"===e)return!0;if(e.includes("*")){var r=new RegExp(e.replace(/\*/g,".*?"));return r.test(t)||r.test("www.".concat(t))}return!1}))}},{key:"getExpirationDateWithoutGracePeriod",value:function(e){return new Date(e.getFullYear(),e.getMonth(),e.getDate())}},{key:"getExpirationDateWithGracePeriod",value:function(e){return new Date(e.getFullYear(),e.getMonth(),e.getDate()+5+1)}},{key:"isAnnualLicenseExpired",value:function(e){var t=this.getExpirationDateWithGracePeriod(e),n=new Date>=t;return!n&&new Date>=this.getExpirationDateWithoutGracePeriod(e)&&this.outputMessages(["tldraw license is about to expire, you are in a grace period.","Please reach out to ".concat(_," if you would like to renew your license.")]),n}},{key:"isPerpetualLicenseExpired",value:function(e){var t=this.getExpirationDateWithGracePeriod(e),n=new Date(b.publishDates.major),r=new Date(b.publishDates.minor);return n>=t||r>=t}},{key:"isFlagEnabled",value:function(e,t){return(e&t)===t}},{key:"outputNoLicenseKeyProvided",value:function(){}},{key:"outputInvalidLicenseKey",value:function(e){this.outputMessages(["Invalid tldraw license key","Reason: ".concat(e)])}},{key:"outputLicenseInfoIfNeeded",value:function(e){e.isAnnualLicenseExpired&&this.outputMessages(["Your tldraw license has expired!","Please reach out to ".concat(_," to renew.")]),e.isDomainValid||e.isDevelopment||this.outputMessages(["This tldraw license key is not valid for this domain!","Please reach out to ".concat(_," if you would like to use tldraw on other domains.")]),e.license.flags>=2*P&&this.outputMessages(["This tldraw license contains some unknown flags.","You may want to update tldraw packages to a newer version to get access to new functionality."])}},{key:"outputMessages",value:function(e){if(!this.isTest&&this.verbose){this.outputDelimiter();var t,n=f(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;console.log("%c".concat(r),"color: white; background: crimson; padding: 2px; border-radius: 3px;")}}catch(o){n.e(o)}finally{n.f()}this.outputDelimiter()}}},{key:"outputDelimiter",value:function(){console.log("%c-------------------------------------------------------------------","color: white; background: crimson; padding: 2px; border-radius: 3px;")}}])}();function T(e){if(!e.isLicenseParseable)return!0;if(!e.isDomainValid&&!e.isDevelopment)return!0;if(e.isPerpetualLicenseExpired||e.isAnnualLicenseExpired){if(e.isInternalLicense)throw new Error("License: Internal license expired.");return!0}return!1}c(I,"className","tl-watermark_SEE-LICENSE")},59508:function(e,t,n){"use strict";var r,o=n(85715).default,i=n(50883).default,a=Object.defineProperty,u=Object.getOwnPropertyDescriptor,s=Object.getOwnPropertyNames,c=Object.prototype.hasOwnProperty,l={};!function(e,t){for(var n in t)a(e,n,{get:t[n],enumerable:!0})}(l,{LicenseContext:function(){return h},LicenseProvider:function(){return g},useLicenseContext:function(){return v}}),e.exports=(r=l,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,l=i(s(t));try{var f=function(){var i=o.value;c.call(e,i)||i===n||a(e,i,{get:function(){return t[i]},enumerable:!(r=u(t,i))||r.enumerable})};for(l.s();!(o=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(a({},"__esModule",{value:!0}),r));var f=n(44414),d=n(9950),p=n(70759),h=(0,d.createContext)({}),v=function(){return(0,d.useContext)(h)};function g(e){var t=e.licenseKey,n=e.children,r=(0,d.useState)((function(){return new p.LicenseManager(t)})),i=o(r,1)[0];return(0,f.jsx)(h.Provider,{value:i,children:n})}},29811:function(e,t,n){"use strict";var r,o=n(12897).default,i=n(50883).default,a=Object.defineProperty,u=Object.getOwnPropertyDescriptor,s=Object.getOwnPropertyNames,c=Object.prototype.hasOwnProperty,l={};!function(e,t){for(var n in t)a(e,n,{get:t[n],enumerable:!0})}(l,{Watermark:function(){return _}}),e.exports=(r=l,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,l=i(s(t));try{var f=function(){var i=o.value;c.call(e,i)||i===n||a(e,i,{get:function(){return t[i]},enumerable:!(r=u(t,i))||r.enumerable})};for(l.s();!(o=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(a({},"__esModule",{value:!0}),r));var f=n(44414),d=n(61267),p=n(9950),h=n(55015),v=n(87980),g=n(10076),y=n(2321),m=n(90923),b=n(24403),w=n(59074),S=n(70759),x=n(59508),P=n(70351),O="data:image/svg+xml;utf8,".concat(encodeURIComponent(w.watermarkDesktopSvg)),k="data:image/svg+xml;utf8,".concat(encodeURIComponent(w.watermarkMobileSvg)),_=(0,p.memo)((function(){var e=(0,x.useLicenseContext)(),t=(0,g.useEditor)(),n=(0,d.useValue)("is mobile",(function(){return t.getViewportScreenBounds().width<700}),[t]),r=(0,P.useLicenseManagerState)(e);return["licensed-with-watermark","unlicensed"].includes(r)?(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(I,{}),(0,f.jsx)(j,{src:n?k:O})]}):null})),j=(0,p.memo)((function(e){var t=e.src,n=(0,g.useEditor)(),r=(0,d.useValue)("debug mode",(function(){return n.getInstanceState().isDebugMode}),[n]),i=(0,d.useValue)("is mobile",(function(){return n.getViewportScreenBounds().width<700}),[n]),a=(0,v.useCanvasEvents)(),u=(0,p.useRef)(null);(0,y.usePassThroughWheelEvents)(u);var s="url('".concat(t,"') center 100% / 100% no-repeat"),c="https://tldraw.dev";return(0,f.jsx)("div",o(o({ref:u,className:S.LicenseManager.className,"data-debug":r,"data-mobile":i,draggable:!1},a),{},{children:h.tlenv.isWebview?(0,f.jsx)("a",{draggable:!1,role:"button",onPointerDown:function(e){(0,m.stopEventPropagation)(e),(0,m.preventDefault)(e)},onClick:function(){return b.runtime.openWindow(c,"_blank")},style:{mask:s,WebkitMask:s}}):(0,f.jsx)("a",{href:c,target:"_blank",rel:"noreferrer",draggable:!1,onPointerDown:function(e){(0,m.stopEventPropagation)(e)},style:{mask:s,WebkitMask:s}})}))})),I=(0,p.memo)((function(){var e=S.LicenseManager.className,t="/* ------------------- SEE LICENSE -------------------\nThe tldraw watermark is part of tldraw's license. It is shown for unlicensed\nor \"licensed-with-watermark\" users. By using this library, you agree to\npreserve the watermark's behavior, keeping it visible, unobscured, and\navailable to user-interaction.\n\nTo remove the watermark, please purchase a license at tldraw.dev.\n*/\n\n\t.".concat(e," {\n\t\tposition: absolute;\n\t\tbottom: var(--space-2);\n\t\tright: var(--space-2);\n\t\twidth: 96px;\n\t\theight: 32px;\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tjustify-content: center;\n\t\tz-index: var(--layer-watermark) !important;\n\t\tbackground-color: color-mix(in srgb, var(--color-background) 62%, transparent);\n\t\topacity: 1;\n\t\tborder-radius: 5px;\n\t\tpointer-events: all;\n\t\tpadding: 2px;\n\t\tbox-sizing: content-box;\n\t}\n\n\t.").concat(e," > a {\n\t\tposition: absolute;\n\t\twidth: 96px;\n\t\theight: 32px;\n\t\tpointer-events: all;\n\t\tcursor: inherit;\n\t\tcolor: var(--color-text);\n\t\topacity: .38;\n\t\tbackground-color: currentColor;\n\t}\n\n\t.").concat(e,"[data-debug='true'] {\n\t\tbottom: 46px;\n\t}\n\n\t.").concat(e,"[data-mobile='true'] {\n\t\tborder-radius: 4px 0px 0px 4px;\n\t\tright: -2px;\n\t\twidth: 8px;\n\t\theight: 48px;\n\t}\n\n\t.").concat(e,"[data-mobile='true'] > a {\n\t\twidth: 8px;\n\t\theight: 32px;\n\t}\n\n\t@media (hover: hover) {\n\t\t.").concat(e," > a {\n\t\t\tpointer-events: none;\n\t\t}\n\n\t\t.").concat(e,":hover {\n\t\t\tbackground-color: var(--color-background);\n\t\t\ttransition: background-color 0.2s ease-in-out;\n\t\t\ttransition-delay: 0.32s;\n\t\t}\n\n\t\t.").concat(e,":hover > a {\n\t\t\tanimation: delayed_link 0.2s forwards ease-in-out;\n\t\t\tanimation-delay: 0.32s;\n\t\t}\n\t}\n\n\t@keyframes delayed_link {\n\t\t0% {\n\t\t\tcursor: inherit;\n\t\t\topacity: .38;\n\t\t\tpointer-events: none;\n\t\t}\n\t\t100% {\n\t\t\tcursor: pointer;\n\t\t\topacity: 1;\n\t\t\tpointer-events: all;\n\t\t}\n\t}");return(0,f.jsx)("style",{children:t})}))},70351:function(e,t,n){"use strict";var r,o=n(50883).default,i=Object.defineProperty,a=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,c={};!function(e,t){for(var n in t)i(e,n,{get:t[n],enumerable:!0})}(c,{useLicenseManagerState:function(){return f}}),e.exports=(r=c,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var c,l=o(u(t));try{var f=function(){var o=c.value;s.call(e,o)||o===n||i(e,o,{get:function(){return t[o]},enumerable:!(r=a(t,o))||r.enumerable})};for(l.s();!(c=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(i({},"__esModule",{value:!0}),r));var l=n(61267);function f(e){return(0,l.useValue)("watermarkState",(function(){return e.state.get()}),[e])}},75731:function(e,t,n){"use strict";var r,o=n(50883).default,i=Object.defineProperty,a=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,c={};!function(e,t){for(var n in t)i(e,n,{get:t[n],enumerable:!0})}(c,{defaultTldrawOptions:function(){return l}}),e.exports=(r=c,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var c,l=o(u(t));try{var f=function(){var o=c.value;s.call(e,o)||o===n||i(e,o,{get:function(){return t[o]},enumerable:!(r=a(t,o))||r.enumerable})};for(l.s();!(c=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(i({},"__esModule",{value:!0}),r));var l={maxShapesPerPage:4e3,maxFilesAtOnce:100,maxPages:40,animationMediumMs:320,followChaseViewportSnap:2,doubleClickDurationMs:450,multiClickDurationMs:200,coarseDragDistanceSquared:36,dragDistanceSquared:16,defaultSvgPadding:32,cameraSlideFriction:.09,maxPointsPerDrawShape:500,gridSteps:[{min:-1,mid:.15,step:64},{min:.05,mid:.375,step:16},{min:.15,mid:1,step:4},{min:.7,mid:2.5,step:1}],collaboratorInactiveTimeoutMs:6e4,collaboratorIdleTimeoutMs:3e3,collaboratorCheckIntervalMs:1200,cameraMovingTimeoutMs:64,hitTestMargin:8,edgeScrollDelay:200,edgeScrollEaseDuration:200,edgeScrollSpeed:25,edgeScrollDistance:8,coarsePointerWidth:12,coarseHandleRadius:20,handleRadius:12,longPressDurationMs:500,textShadowLod:.35,adjacentShapeMargin:10,flattenImageBoundsExpand:64,flattenImageBoundsPadding:16,laserDelayMs:1200,maxExportDelayMs:5e3,temporaryAssetPreviewLifetimeMs:18e4,actionShortcutsLocation:"swap",createTextOnCanvasDoubleClick:!0,exportProvider:n(9950).Fragment}},24161:function(e,t,n){"use strict";var r,o=n(17383).default,i=n(34579).default,a=n(43693).default,u=n(50883).default,s=Object.defineProperty,c=Object.getOwnPropertyDescriptor,l=Object.getOwnPropertyNames,f=Object.prototype.hasOwnProperty,d={};!function(e,t){for(var n in t)s(e,n,{get:t[n],enumerable:!0})}(d,{Box:function(){return v},ROTATE_CORNER_TO_SELECTION_CORNER:function(){return S},flipSelectionHandleX:function(){return y},flipSelectionHandleY:function(){return g},isSelectionCorner:function(){return w},rotateSelectionHandle:function(){return b}}),e.exports=(r=d,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,i=u(l(t));try{var a=function(){var i=o.value;f.call(e,i)||i===n||s(e,i,{get:function(){return t[i]},enumerable:!(r=c(t,i))||r.enumerable})};for(i.s();!(o=i.n()).done;)a()}catch(d){i.e(d)}finally{i.f()}}return e}(s({},"__esModule",{value:!0}),r));var p=n(45650),h=n(63557),v=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;o(this,e),a(this,"x",0),a(this,"y",0),a(this,"w",0),a(this,"h",0),this.x=t,this.y=n,this.w=r,this.h=i}return i(e,[{key:"point",get:function(){return new p.Vec(this.x,this.y)},set:function(e){this.x=e.x,this.y=e.y}},{key:"minX",get:function(){return this.x},set:function(e){this.x=e}},{key:"midX",get:function(){return this.x+this.w/2}},{key:"maxX",get:function(){return this.x+this.w}},{key:"minY",get:function(){return this.y},set:function(e){this.y=e}},{key:"midY",get:function(){return this.y+this.h/2}},{key:"maxY",get:function(){return this.y+this.h}},{key:"width",get:function(){return this.w},set:function(e){this.w=e}},{key:"height",get:function(){return this.h},set:function(e){this.h=e}},{key:"aspectRatio",get:function(){return this.width/this.height}},{key:"center",get:function(){return new p.Vec(this.midX,this.midY)},set:function(e){this.minX=e.x-this.width/2,this.minY=e.y-this.height/2}},{key:"corners",get:function(){return[new p.Vec(this.minX,this.minY),new p.Vec(this.maxX,this.minY),new p.Vec(this.maxX,this.maxY),new p.Vec(this.minX,this.maxY)]}},{key:"cornersAndCenter",get:function(){return[new p.Vec(this.minX,this.minY),new p.Vec(this.maxX,this.minY),new p.Vec(this.maxX,this.maxY),new p.Vec(this.minX,this.maxY),this.center]}},{key:"sides",get:function(){var e=this.corners;return[[e[0],e[1]],[e[1],e[2]],[e[2],e[3]],[e[3],e[0]]]}},{key:"size",get:function(){return new p.Vec(this.w,this.h)}},{key:"toFixed",value:function(){return this.x=(0,h.toPrecision)(this.x),this.y=(0,h.toPrecision)(this.y),this.w=(0,h.toPrecision)(this.w),this.h=(0,h.toPrecision)(this.h),this}},{key:"setTo",value:function(e){return this.x=e.x,this.y=e.y,this.w=e.w,this.h=e.h,this}},{key:"set",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return this.x=e,this.y=t,this.w=n,this.h=r,this}},{key:"expand",value:function(e){var t=Math.min(this.minX,e.minX),n=Math.min(this.minY,e.minY),r=Math.max(this.maxX,e.maxX),o=Math.max(this.maxY,e.maxY);return this.x=t,this.y=n,this.w=r-t,this.h=o-n,this}},{key:"expandBy",value:function(e){return this.x-=e,this.y-=e,this.w+=2*e,this.h+=2*e,this}},{key:"scale",value:function(e){return this.x/=e,this.y/=e,this.w/=e,this.h/=e,this}},{key:"clone",value:function(){return new e(this.x,this.y,this.w,this.h)}},{key:"translate",value:function(e){return this.x+=e.x,this.y+=e.y,this}},{key:"snapToGrid",value:function(e){var t=Math.round(this.minX/e)*e,n=Math.round(this.minY/e)*e,r=Math.round(this.maxX/e)*e,o=Math.round(this.maxY/e)*e;this.minX=t,this.minY=n,this.width=Math.max(1,r-t),this.height=Math.max(1,o-n)}},{key:"collides",value:function(t){return e.Collides(this,t)}},{key:"contains",value:function(t){return e.Contains(this,t)}},{key:"includes",value:function(t){return e.Includes(this,t)}},{key:"containsPoint",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.ContainsPoint(this,t,n)}},{key:"getHandlePoint",value:function(e){switch(e){case"top_left":return new p.Vec(this.minX,this.minY);case"top_right":return new p.Vec(this.maxX,this.minY);case"bottom_left":return new p.Vec(this.minX,this.maxY);case"bottom_right":return new p.Vec(this.maxX,this.maxY);case"top":return new p.Vec(this.midX,this.minY);case"right":return new p.Vec(this.maxX,this.midY);case"bottom":return new p.Vec(this.midX,this.maxY);case"left":return new p.Vec(this.minX,this.midY)}}},{key:"toJson",value:function(){return{x:this.minX,y:this.minY,w:this.w,h:this.h}}},{key:"resize",value:function(e,t,n){var r=this.minX,o=this.minY,i=this.maxX,a=this.maxY,u=this.minX,s=this.minY,c=this.maxX,l=this.maxY;switch(e){case"left":case"top_left":case"bottom_left":u+=t;break;case"right":case"top_right":case"bottom_right":c+=t}switch(e){case"top":case"top_left":case"top_right":s+=n;break;case"bottom":case"bottom_left":case"bottom_right":l+=n}if((c-u)/(i-r)<0){var f=c;c=u,u=f}if((l-s)/(a-o)<0){var d=l;l=s,s=d}this.minX=u,this.minY=s,this.width=Math.abs(c-u),this.height=Math.abs(l-s)}},{key:"union",value:function(e){var t=Math.min(this.minX,e.x),n=Math.min(this.minY,e.y),r=Math.max(this.maxX,e.w+e.x),o=Math.max(this.maxY,e.h+e.y);return this.x=t,this.y=n,this.width=r-t,this.height=o-n,this}},{key:"equals",value:function(t){return e.Equals(this,t)}},{key:"zeroFix",value:function(){return this.w=Math.max(1,this.w),this.h=Math.max(1,this.h),this}}],[{key:"From",value:function(t){return new e(t.x,t.y,t.w,t.h)}},{key:"FromCenter",value:function(t,n){return new e(t.x-n.x/2,t.y-n.y/2,n.x,n.y)}},{key:"FromPoints",value:function(t){if(0===t.length)return new e;for(var n,r=1/0,o=1/0,i=-1/0,a=-1/0,u=0,s=t.length;u<s;u++)n=t[u],r=Math.min(n.x,r),o=Math.min(n.y,o),i=Math.max(n.x,i),a=Math.max(n.y,a);return new e(r,o,i-r,a-o)}},{key:"Expand",value:function(t,n){var r=Math.min(n.minX,t.minX),o=Math.min(n.minY,t.minY);return new e(r,o,Math.max(n.maxX,t.maxX)-r,Math.max(n.maxY,t.maxY)-o)}},{key:"ExpandBy",value:function(t,n){return new e(t.minX-n,t.minY-n,t.width+2*n,t.height+2*n)}},{key:"Collides",value:function(e,t){return!(e.maxX<t.minX||e.minX>t.maxX||e.maxY<t.minY||e.minY>t.maxY)}},{key:"Contains",value:function(e,t){return e.minX<t.minX&&e.minY<t.minY&&e.maxY>t.maxY&&e.maxX>t.maxX}},{key:"Includes",value:function(t,n){return e.Collides(t,n)||e.Contains(t,n)}},{key:"ContainsPoint",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return!(t.x<e.minX-n||t.y<e.minY-n||t.x>e.maxX+n||t.y>e.maxY+n)}},{key:"Common",value:function(t){for(var n=1/0,r=1/0,o=-1/0,i=-1/0,a=0;a<t.length;a++){var u=t[a];n=Math.min(n,u.minX),r=Math.min(r,u.minY),o=Math.max(o,u.maxX),i=Math.max(i,u.maxY)}return new e(n,r,o-n,i-r)}},{key:"Sides",value:function(e){var t=e.corners;return[[t[0],t[1]],[t[1],t[2]],[t[2],t[3]],[t[3],t[0]]]}},{key:"Resize",value:function(t,n,r,o){var i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],a=t.minX,u=t.minY,s=t.maxX,c=t.maxY,l=t.minX,f=t.minY,d=t.maxX,p=t.maxY;switch(n){case"left":case"top_left":case"bottom_left":l+=r;break;case"right":case"top_right":case"bottom_right":d+=r}switch(n){case"top":case"top_left":case"top_right":f+=o;break;case"bottom":case"bottom_left":case"bottom_right":p+=o}var h=(d-l)/(s-a),v=(p-f)/(c-u),g=h<0,y=v<0;if(i){var m=(s-a)/(c-u),b=Math.abs(d-l),w=Math.abs(p-f),S=b*(v<0?1:-1)*(1/m),x=w*(h<0?1:-1)*m,P=m<b/w;switch(n){case"top_left":P?f=p+S:l=d+x;break;case"top_right":P?f=p+S:d=l-x;break;case"bottom_right":P?p=f-S:d=l-x;break;case"bottom_left":P?p=f-S:l=d+x;break;case"bottom":case"top":var O=(l+d)/2,k=w*m;l=O-k/2,d=O+k/2;break;case"left":case"right":var _=(f+p)/2,j=b/m;f=_-j/2,p=_+j/2}}if(g){var I=d;d=l,l=I}if(y){var T=p;p=f,f=T}var E=new e(l,f,Math.abs(d-l),Math.abs(p-f));return{box:E,scaleX:+(E.width/t.width*(h>0?1:-1)).toFixed(5),scaleY:+(E.height/t.height*(v>0?1:-1)).toFixed(5)}}},{key:"Equals",value:function(e,t){return t.x===e.x&&t.y===e.y&&t.w===e.w&&t.h===e.h}},{key:"ZeroFix",value:function(t){return new e(t.x,t.y,Math.max(1,t.w),Math.max(1,t.h))}}])}();function g(e){switch(e){case"top":return"bottom";case"bottom":return"top";case"top_left":return"bottom_left";case"top_right":return"bottom_right";case"bottom_left":return"top_left";case"bottom_right":return"top_right";default:return e}}function y(e){switch(e){case"left":return"right";case"right":return"left";case"top_left":return"top_right";case"top_right":return"top_left";case"bottom_left":return"bottom_right";case"bottom_right":return"bottom_left";default:return e}}var m=["top","top_right","right","bottom_right","bottom","bottom_left","left","top_left"];function b(e,t){t%=h.PI2;var n=Math.round(t/(h.PI/4)),r=m.indexOf(e);return m[(r+n)%m.length]}function w(e){return"top_left"===e||"top_right"===e||"bottom_right"===e||"bottom_left"===e}var S={top_left_rotate:"top_left",top_right_rotate:"top_right",bottom_right_rotate:"bottom_right",bottom_left_rotate:"bottom_left",mobile_rotate:"top_left"}},84906:function(e,t,n){"use strict";var r,o=n(17383).default,i=n(34579).default,a=n(43693).default,u=n(50883).default,s=Object.defineProperty,c=Object.getOwnPropertyDescriptor,l=Object.getOwnPropertyNames,f=Object.prototype.hasOwnProperty,d={};!function(e,t){for(var n in t)s(e,n,{get:t[n],enumerable:!0})}(d,{Mat:function(){return g},decomposeMatrix:function(){return y}}),e.exports=(r=d,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,i=u(l(t));try{var a=function(){var i=o.value;f.call(e,i)||i===n||s(e,i,{get:function(){return t[i]},enumerable:!(r=c(t,i))||r.enumerable})};for(i.s();!(o=i.n()).done;)a()}catch(d){i.e(d)}finally{i.f()}}return e}(s({},"__esModule",{value:!0}),r));var p=n(24161),h=n(63557),v=n(45650),g=function(){function e(t,n,r,i,u,s){o(this,e),a(this,"a",1),a(this,"b",0),a(this,"c",0),a(this,"d",1),a(this,"e",0),a(this,"f",0),this.a=t,this.b=n,this.c=r,this.d=i,this.e=u,this.f=s}return i(e,[{key:"equals",value:function(e){return this===e||this.a===e.a&&this.b===e.b&&this.c===e.c&&this.d===e.d&&this.e===e.e&&this.f===e.f}},{key:"identity",value:function(){return this.a=1,this.b=0,this.c=0,this.d=1,this.e=0,this.f=0,this}},{key:"multiply",value:function(e){var t=e,n=this.a,r=this.b,o=this.c,i=this.d,a=this.e,u=this.f;return this.a=n*t.a+o*t.b,this.c=n*t.c+o*t.d,this.e=n*t.e+o*t.f+a,this.b=r*t.a+i*t.b,this.d=r*t.c+i*t.d,this.f=r*t.e+i*t.f+u,this}},{key:"rotate",value:function(t,n,r){return 0===t?this:void 0===n?this.multiply(e.Rotate(t)):this.translate(n,r).multiply(e.Rotate(t)).translate(-n,-r)}},{key:"translate",value:function(t,n){return this.multiply(e.Translate(t,n))}},{key:"scale",value:function(t,n){return this.multiply(e.Scale(t,n))}},{key:"invert",value:function(){var e=this.a,t=this.b,n=this.c,r=this.d,o=this.e,i=this.f,a=e*r-t*n;return this.a=r/a,this.b=t/-a,this.c=n/-a,this.d=e/a,this.e=(r*o-n*i)/-a,this.f=(t*o-e*i)/a,this}},{key:"applyToPoint",value:function(t){return e.applyToPoint(this,t)}},{key:"applyToPoints",value:function(t){return e.applyToPoints(this,t)}},{key:"rotation",value:function(){return e.Rotation(this)}},{key:"point",value:function(){return e.Point(this)}},{key:"decomposed",value:function(){return e.Decompose(this)}},{key:"toCssString",value:function(){return e.toCssString(this)}},{key:"setTo",value:function(e){return Object.assign(this,e),this}},{key:"decompose",value:function(){return e.Decompose(this)}},{key:"clone",value:function(){return new e(this.a,this.b,this.c,this.d,this.e,this.f)}}],[{key:"Identity",value:function(){return new e(1,0,0,1,0,0)}},{key:"Translate",value:function(t,n){return new e(1,0,0,1,t,n)}},{key:"Rotate",value:function(t,n,r){if(0===t)return e.Identity();var o=Math.cos(t),i=Math.sin(t),a=new e(o,i,-i,o,0,0);return void 0===n?a:e.Compose(e.Translate(n,r),a,e.Translate(-n,-r))}},{key:"Scale",value:function(t,n,r,o){var i=new e(t,0,0,n,0,0);return void 0===r?i:e.Compose(e.Translate(r,o),i,e.Translate(-r,-o))}},{key:"Multiply",value:function(e,t){return{a:e.a*t.a+e.c*t.b,c:e.a*t.c+e.c*t.d,e:e.a*t.e+e.c*t.f+e.e,b:e.b*t.a+e.d*t.b,d:e.b*t.c+e.d*t.d,f:e.b*t.e+e.d*t.f+e.f}}},{key:"Inverse",value:function(e){var t=e.a*e.d-e.b*e.c;return{a:e.d/t,b:e.b/-t,c:e.c/-t,d:e.a/t,e:(e.d*e.e-e.c*e.f)/-t,f:(e.b*e.e-e.a*e.f)/t}}},{key:"Absolute",value:function(e){var t=e.a*e.d-e.b*e.c;return{a:e.d/t,b:e.b/-t,c:e.c/-t,d:e.a/t,e:(e.d*e.e-e.c*e.f)/t,f:(e.b*e.e-e.a*e.f)/-t}}},{key:"Compose",value:function(){for(var t=e.Identity(),n=0,r=arguments.length;n<r;n++)t.multiply(n<0||arguments.length<=n?void 0:arguments[n]);return t}},{key:"Point",value:function(e){return new v.Vec(e.e,e.f)}},{key:"Rotation",value:function(e){var t;if(0!==e.a||0!==e.c){var n=Math.pow(e.a*e.a+e.c*e.c,.5);t=Math.acos(e.a/n)*(e.c>0?-1:1)}else if(0!==e.b||0!==e.d){var r=Math.pow(e.b*e.b+e.d*e.d,.5);t=h.HALF_PI+Math.acos(e.b/r)*(e.d>0?-1:1)}else t=0;return(0,h.clampRadians)(t)}},{key:"Decompose",value:function(e){var t,n,r;if(0!==e.a||0!==e.c){var o=Math.pow(e.a*e.a+e.c*e.c,.5);t=o,n=(e.a*e.d-e.b*e.c)/o,r=Math.acos(e.a/o)*(e.c>0?-1:1)}else if(0!==e.b||0!==e.d){var i=Math.pow(e.b*e.b+e.d*e.d,.5);t=(e.a*e.d-e.b*e.c)/i,n=i,r=h.HALF_PI+Math.acos(e.b/i)*(e.d>0?-1:1)}else t=0,n=0,r=0;return{x:e.e,y:e.f,scaleX:t,scaleY:n,rotation:(0,h.clampRadians)(r)}}},{key:"Smooth",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e10;return e.a=Math.round(e.a*t)/t,e.b=Math.round(e.b*t)/t,e.c=Math.round(e.c*t)/t,e.d=Math.round(e.d*t)/t,e.e=Math.round(e.e*t)/t,e.f=Math.round(e.f*t)/t,e}},{key:"toCssString",value:function(e){return"matrix(".concat((0,h.toDomPrecision)(e.a),", ").concat((0,h.toDomPrecision)(e.b),", ").concat((0,h.toDomPrecision)(e.c),", ").concat((0,h.toDomPrecision)(e.d),", ").concat((0,h.toDomPrecision)(e.e),", ").concat((0,h.toDomPrecision)(e.f),")")}},{key:"applyToPoint",value:function(e,t){return new v.Vec(e.a*t.x+e.c*t.y+e.e,e.b*t.x+e.d*t.y+e.f,t.z)}},{key:"applyToXY",value:function(e,t,n){return[e.a*t+e.c*n+e.e,e.b*t+e.d*n+e.f]}},{key:"applyToPoints",value:function(e,t){return t.map((function(t){return new v.Vec(e.a*t.x+e.c*t.y+e.e,e.b*t.x+e.d*t.y+e.f,t.z)}))}},{key:"applyToBounds",value:function(e,t){return new p.Box(e.e+t.minX,e.f+t.minY,t.width,t.height)}},{key:"From",value:function(t){return new e(t.a,t.b,t.c,t.d,t.e,t.f)}},{key:"Cast",value:function(t){return t instanceof e?t:e.From(t)}}])}();function y(e){return{x:e.e,y:e.f,scaleX:Math.sqrt(e.a*e.a+e.b*e.b),scaleY:Math.sqrt(e.c*e.c+e.d*e.d),rotation:Math.atan2(e.b,e.a)}}},45650:function(e,t,n){"use strict";var r,o=n(17383).default,i=n(34579).default,a=n(50883).default,u=Object.defineProperty,s=Object.getOwnPropertyDescriptor,c=Object.getOwnPropertyNames,l=Object.prototype.hasOwnProperty,f={};!function(e,t){for(var n in t)u(e,n,{get:t[n],enumerable:!0})}(f,{Vec:function(){return h}}),e.exports=(r=f,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,i=a(c(t));try{var f=function(){var i=o.value;l.call(e,i)||i===n||u(e,i,{get:function(){return t[i]},enumerable:!(r=s(t,i))||r.enumerable})};for(i.s();!(o=i.n()).done;)f()}catch(d){i.e(d)}finally{i.f()}}return e}(u({},"__esModule",{value:!0}),r));var d=n(19526),p=n(63557),h=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;o(this,e),this.x=t,this.y=n,this.z=r}return i(e,[{key:"pressure",get:function(){return this.z}},{key:"set",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.x,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.y,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.z;return this.x=e,this.y=t,this.z=n,this}},{key:"setTo",value:function(e){var t=e.x,n=void 0===t?0:t,r=e.y,o=void 0===r?0:r,i=e.z,a=void 0===i?1:i;return this.x=n,this.y=o,this.z=a,this}},{key:"rot",value:function(e){if(0===e)return this;var t=this.x,n=this.y,r=Math.sin(e),o=Math.cos(e);return this.x=t*o-n*r,this.y=t*r+n*o,this}},{key:"rotWith",value:function(e,t){if(0===t)return this;var n=this.x-e.x,r=this.y-e.y,o=Math.sin(t),i=Math.cos(t);return this.x=e.x+(n*i-r*o),this.y=e.y+(n*o+r*i),this}},{key:"clone",value:function(){return new e(this.x,this.y,this.z)}},{key:"sub",value:function(e){return this.x-=e.x,this.y-=e.y,this}},{key:"subXY",value:function(e,t){return this.x-=e,this.y-=t,this}},{key:"subScalar",value:function(e){return this.x-=e,this.y-=e,this}},{key:"add",value:function(e){return this.x+=e.x,this.y+=e.y,this}},{key:"addXY",value:function(e,t){return this.x+=e,this.y+=t,this}},{key:"addScalar",value:function(e){return this.x+=e,this.y+=e,this}},{key:"clamp",value:function(e,t){return this.x=Math.max(this.x,e),this.y=Math.max(this.y,e),void 0!==t&&(this.x=Math.min(this.x,t),this.y=Math.min(this.y,t)),this}},{key:"div",value:function(e){return this.x/=e,this.y/=e,this}},{key:"divV",value:function(e){return this.x/=e.x,this.y/=e.y,this}},{key:"mul",value:function(e){return this.x*=e,this.y*=e,this}},{key:"mulV",value:function(e){return this.x*=e.x,this.y*=e.y,this}},{key:"abs",value:function(){return this.x=Math.abs(this.x),this.y=Math.abs(this.y),this}},{key:"nudge",value:function(t,n){var r=e.Tan(t,this);return this.add(r.mul(n))}},{key:"neg",value:function(){return this.x*=-1,this.y*=-1,this}},{key:"cross",value:function(e){return this.x=this.y*e.z-this.z*e.y,this.y=this.z*e.x-this.x*e.z,this}},{key:"dpr",value:function(t){return e.Dpr(this,t)}},{key:"cpr",value:function(t){return e.Cpr(this,t)}},{key:"len2",value:function(){return e.Len2(this)}},{key:"len",value:function(){return e.Len(this)}},{key:"pry",value:function(t){return e.Pry(this,t)}},{key:"per",value:function(){var e=this.x,t=this.y;return this.x=t,this.y=-e,this}},{key:"uni",value:function(){return e.Uni(this)}},{key:"tan",value:function(t){return e.Tan(this,t)}},{key:"dist",value:function(t){return e.Dist(this,t)}},{key:"distanceToLineSegment",value:function(t,n){return e.DistanceToLineSegment(t,n,this)}},{key:"slope",value:function(t){return e.Slope(this,t)}},{key:"snapToGrid",value:function(e){return this.x=Math.round(this.x/e)*e,this.y=Math.round(this.y/e)*e,this}},{key:"angle",value:function(t){return e.Angle(this,t)}},{key:"toAngle",value:function(){return e.ToAngle(this)}},{key:"lrp",value:function(e,t){return this.x=this.x+(e.x-this.x)*t,this.y=this.y+(e.y-this.y)*t,this}},{key:"equals",value:function(t){return e.Equals(this,t)}},{key:"equalsXY",value:function(t,n){return e.EqualsXY(this,t,n)}},{key:"norm",value:function(){var e=this.len();return this.x=0===e?0:this.x/e,this.y=0===e?0:this.y/e,this}},{key:"toFixed",value:function(){return e.ToFixed(this)}},{key:"toString",value:function(){return e.ToString(e.ToFixed(this))}},{key:"toJson",value:function(){return e.ToJson(this)}},{key:"toArray",value:function(){return e.ToArray(this)}}],[{key:"Add",value:function(t,n){return new e(t.x+n.x,t.y+n.y)}},{key:"AddXY",value:function(t,n,r){return new e(t.x+n,t.y+r)}},{key:"Sub",value:function(t,n){return new e(t.x-n.x,t.y-n.y)}},{key:"SubXY",value:function(t,n,r){return new e(t.x-n,t.y-r)}},{key:"AddScalar",value:function(t,n){return new e(t.x+n,t.y+n)}},{key:"SubScalar",value:function(t,n){return new e(t.x-n,t.y-n)}},{key:"Div",value:function(t,n){return new e(t.x/n,t.y/n)}},{key:"Mul",value:function(t,n){return new e(t.x*n,t.y*n)}},{key:"DivV",value:function(t,n){return new e(t.x/n.x,t.y/n.y)}},{key:"MulV",value:function(t,n){return new e(t.x*n.x,t.y*n.y)}},{key:"Neg",value:function(t){return new e(-t.x,-t.y)}},{key:"Per",value:function(t){return new e(t.y,-t.x)}},{key:"Abs",value:function(t){return new e(Math.abs(t.x),Math.abs(t.y))}},{key:"Dist",value:function(e,t){return Math.pow(Math.pow(e.y-t.y,2)+Math.pow(e.x-t.x,2),.5)}},{key:"DistMin",value:function(e,t,n){return(e.x-t.x)*(e.x-t.x)+(e.y-t.y)*(e.y-t.y)<Math.pow(n,2)}},{key:"Dist2",value:function(e,t){return(e.x-t.x)*(e.x-t.x)+(e.y-t.y)*(e.y-t.y)}},{key:"Dpr",value:function(e,t){return e.x*t.x+e.y*t.y}},{key:"Cross",value:function(t,n){return new e(t.y*n.z-t.z*n.y,t.z*n.x-t.x*n.z)}},{key:"Cpr",value:function(e,t){return e.x*t.y-t.x*e.y}},{key:"Len2",value:function(e){return e.x*e.x+e.y*e.y}},{key:"Len",value:function(e){return Math.pow(e.x*e.x+e.y*e.y,.5)}},{key:"Pry",value:function(t,n){return e.Dpr(t,n)/e.Len(n)}},{key:"Uni",value:function(t){return e.Div(t,e.Len(t))}},{key:"Tan",value:function(t,n){return e.Uni(e.Sub(t,n))}},{key:"Min",value:function(t,n){return new e(Math.min(t.x,n.x),Math.min(t.y,n.y))}},{key:"Max",value:function(t,n){return new e(Math.max(t.x,n.x),Math.max(t.y,n.y))}},{key:"From",value:function(t){var n=t.x,r=t.y,o=t.z;return new e(n,r,void 0===o?1:o)}},{key:"FromArray",value:function(t){return new e(t[0],t[1])}},{key:"Rot",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=Math.sin(n),o=Math.cos(n);return new e(t.x*o-t.y*r,t.x*r+t.y*o)}},{key:"RotWith",value:function(t,n,r){var o=t.x-n.x,i=t.y-n.y,a=Math.sin(r),u=Math.cos(r);return new e(n.x+(o*u-i*a),n.y+(o*a+i*u))}},{key:"NearestPointOnLineThroughPoint",value:function(t,n,r){return e.Mul(n,e.Sub(r,t).pry(n)).add(t)}},{key:"NearestPointOnLineSegment",value:function(t,n,r){var o=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];if(e.Equals(t,r))return e.From(r);if(e.Equals(n,r))return e.From(r);var i=e.Tan(n,t),a=e.Add(t,e.Mul(i,e.Sub(r,t).pry(i)));if(o){if(a.x<Math.min(t.x,n.x))return e.Cast(t.x<n.x?t:n);if(a.x>Math.max(t.x,n.x))return e.Cast(t.x>n.x?t:n);if(a.y<Math.min(t.y,n.y))return e.Cast(t.y<n.y?t:n);if(a.y>Math.max(t.y,n.y))return e.Cast(t.y>n.y?t:n)}return a}},{key:"DistanceToLineThroughPoint",value:function(t,n,r){return e.Dist(r,e.NearestPointOnLineThroughPoint(t,n,r))}},{key:"DistanceToLineSegment",value:function(t,n,r){var o=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];return e.Dist(r,e.NearestPointOnLineSegment(t,n,r,o))}},{key:"Snap",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return new e(Math.round(t.x/n)*n,Math.round(t.y/n)*n)}},{key:"Cast",value:function(t){return t instanceof e?t:e.From(t)}},{key:"Slope",value:function(e,t){return e.x===t.y?NaN:(e.y-t.y)/(e.x-t.x)}},{key:"IsNaN",value:function(e){return isNaN(e.x)||isNaN(e.y)}},{key:"Angle",value:function(e,t){return Math.atan2(t.y-e.y,t.x-e.x)}},{key:"Lrp",value:function(t,n,r){return e.Sub(n,t).mul(r).add(t)}},{key:"Med",value:function(t,n){return new e((t.x+n.x)/2,(t.y+n.y)/2)}},{key:"Equals",value:function(e,t){return Math.abs(e.x-t.x)<1e-4&&Math.abs(e.y-t.y)<1e-4}},{key:"EqualsXY",value:function(e,t,n){return e.x===t&&e.y===n}},{key:"Clockwise",value:function(e,t,n){return(n.x-e.x)*(t.y-e.y)-(t.x-e.x)*(n.y-e.y)<0}},{key:"Rescale",value:function(t,n){var r=e.Len(t);return new e(n*t.x/r,n*t.y/r)}},{key:"ScaleWithOrigin",value:function(t,n,r){return e.Sub(t,r).mul(n).add(r)}},{key:"ToFixed",value:function(t){return new e((0,p.toFixed)(t.x),(0,p.toFixed)(t.y))}},{key:"ToInt",value:function(t){var n;return new e(parseInt(t.x.toFixed(0)),parseInt(t.y.toFixed(0)),parseInt((null!==(n=t.z)&&void 0!==n?n:0).toFixed(0)))}},{key:"ToCss",value:function(e){return"".concat(e.x,",").concat(e.y)}},{key:"Nudge",value:function(t,n,r){return e.Add(t,e.Tan(n,t).mul(r))}},{key:"ToString",value:function(e){return"".concat(e.x,", ").concat(e.y)}},{key:"ToAngle",value:function(e){var t=Math.atan2(e.y,e.x);return t<0&&(t+=2*Math.PI),t}},{key:"FromAngle",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return new e(Math.cos(t)*n,Math.sin(t)*n)}},{key:"ToArray",value:function(e){return[e.x,e.y,e.z]}},{key:"ToJson",value:function(e){return{x:e.x,y:e.y,z:e.z}}},{key:"Average",value:function(t){var n=t.length,r=new e(0,0);if(0===n)return r;for(var o=0;o<n;o++)r.add(t[o]);return r.div(n)}},{key:"Clamp",value:function(t,n,r){return void 0===r?new e(Math.min(Math.max(t.x,n)),Math.min(Math.max(t.y,n))):new e(Math.min(Math.max(t.x,n),r),Math.min(Math.max(t.y,n),r))}},{key:"PointsBetween",value:function(t,n){for(var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:6,o=[],i=0;i<r;i++){var a=d.EASINGS.easeInQuad(i/(r-1)),u=e.Lrp(t,n,a);u.z=Math.min(1,.5+.65*Math.abs(.5-v(a))),o.push(u)}return o}},{key:"SnapToGrid",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:8;return new e(Math.round(t.x/n)*n,Math.round(t.y/n)*n)}}])}(),v=function(e){return e<.5?2*e*e:(4-2*e)*e-1}},19526:function(e,t,n){"use strict";var r,o=n(50883).default,i=Object.defineProperty,a=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,c={};!function(e,t){for(var n in t)i(e,n,{get:t[n],enumerable:!0})}(c,{EASINGS:function(){return l}}),e.exports=(r=c,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var c,l=o(u(t));try{var f=function(){var o=c.value;s.call(e,o)||o===n||i(e,o,{get:function(){return t[o]},enumerable:!(r=a(t,o))||r.enumerable})};for(l.s();!(c=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(i({},"__esModule",{value:!0}),r));var l={linear:function(e){return e},easeInQuad:function(e){return e*e},easeOutQuad:function(e){return e*(2-e)},easeInOutQuad:function(e){return e<.5?2*e*e:(4-2*e)*e-1},easeInCubic:function(e){return e*e*e},easeOutCubic:function(e){return--e*e*e+1},easeInOutCubic:function(e){return e<.5?4*e*e*e:(e-1)*(2*e-2)*(2*e-2)+1},easeInQuart:function(e){return e*e*e*e},easeOutQuart:function(e){return 1- --e*e*e*e},easeInOutQuart:function(e){return e<.5?8*e*e*e*e:1-8*--e*e*e*e},easeInQuint:function(e){return e*e*e*e*e},easeOutQuint:function(e){return 1+--e*e*e*e*e},easeInOutQuint:function(e){return e<.5?16*e*e*e*e*e:1+16*--e*e*e*e*e},easeInSine:function(e){return 1-Math.cos(e*Math.PI/2)},easeOutSine:function(e){return Math.sin(e*Math.PI/2)},easeInOutSine:function(e){return-(Math.cos(Math.PI*e)-1)/2},easeInExpo:function(e){return e<=0?0:Math.pow(2,10*e-10)},easeOutExpo:function(e){return e>=1?1:1-Math.pow(2,-10*e)},easeInOutExpo:function(e){return e<=0?0:e>=1?1:e<.5?Math.pow(2,20*e-10)/2:(2-Math.pow(2,-20*e+10))/2}}},41435:function(e,t,n){"use strict";var r,o=n(12897).default,i=n(17383).default,a=n(34579).default,u=n(18336).default,s=n(29511).default,c=n(43693).default,l=n(50883).default,f=Object.defineProperty,d=Object.getOwnPropertyDescriptor,p=Object.getOwnPropertyNames,h=Object.prototype.hasOwnProperty,v={};!function(e,t){for(var n in t)f(e,n,{get:t[n],enumerable:!0})}(v,{Arc2d:function(){return S}}),e.exports=(r=v,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,i=l(p(t));try{var a=function(){var i=o.value;h.call(e,i)||i===n||f(e,i,{get:function(){return t[i]},enumerable:!(r=d(t,i))||r.enumerable})};for(i.s();!(o=i.n()).done;)a()}catch(u){i.e(u)}finally{i.f()}}return e}(f({},"__esModule",{value:!0}),r));var g=n(45650),y=n(40797),m=n(63557),b=n(87515),w=n(82749),S=function(e){function t(e){var n;i(this,t),n=u(this,t,[o(o({},e),{},{isFilled:!1,isClosed:!1})]),c(n,"_center",void 0),c(n,"radius",void 0),c(n,"start",void 0),c(n,"end",void 0),c(n,"largeArcFlag",void 0),c(n,"sweepFlag",void 0),c(n,"measure",void 0),c(n,"angleStart",void 0),c(n,"angleEnd",void 0);var r=e.center,a=e.sweepFlag,s=e.largeArcFlag,l=e.start,f=e.end;if(l.equals(f))throw Error("Arc must have different start and end points.");return n.angleStart=g.Vec.Angle(r,l),n.angleEnd=g.Vec.Angle(r,f),n.radius=g.Vec.Dist(r,l),n.measure=(0,m.getArcMeasure)(n.angleStart,n.angleEnd,a,s),n.start=l,n.end=f,n.sweepFlag=a,n.largeArcFlag=s,n._center=r,n}return s(t,e),a(t,[{key:"nearestPoint",value:function(e){var t=this._center,n=this.measure,r=this.radius,o=this.angleEnd,i=this.angleStart,a=this.start,u=this.end,s=(0,m.getPointInArcT)(n,i,o,t.angle(e));if(s<=0)return a;if(s>=1)return u;for(var c,l,f=1/0,d=0,p=[a,u,t.clone().add(e.clone().sub(t).uni().mul(r))];d<p.length;d++){var h=p[d];(l=g.Vec.Dist2(e,h))<f&&(c=h,f=l)}if(!c)throw Error("nearest point not found");return c}},{key:"hitTestLineSegment",value:function(e,t){var n=this._center,r=this.radius,o=this.measure,i=this.angleStart,a=this.angleEnd,u=(0,y.intersectLineSegmentCircle)(e,t,n,r);return null!==u&&u.some((function(e){var t=(0,m.getPointInArcT)(o,i,a,n.angle(e));return t>=0&&t<=1}))}},{key:"getVertices",value:function(){for(var e=this._center,t=this.measure,n=this.length,r=this.radius,o=this.angleStart,i=[],a=0,u=(0,w.getVerticesCountForLength)(Math.abs(n));a<u+1;a++){var s=o+a/u*t;i.push((0,m.getPointOnCircle)(e,r,s))}return i}},{key:"getSvgPathData",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=this.start,n=this.end,r=this.radius,o=this.largeArcFlag,i=this.sweepFlag;return"".concat(e?"M".concat(t.toFixed()):""," A").concat(r," ").concat(r," 0 ").concat(o," ").concat(i," ").concat(n.toFixed())}},{key:"getLength",value:function(){return this.measure*this.radius}}])}(b.Geometry2d)},48415:function(e,t,n){"use strict";var r,o=n(12897).default,i=n(17383).default,a=n(34579).default,u=n(18336).default,s=n(29511).default,c=n(43693).default,l=n(50883).default,f=Object.defineProperty,d=Object.getOwnPropertyDescriptor,p=Object.getOwnPropertyNames,h=Object.prototype.hasOwnProperty,v={};!function(e,t){for(var n in t)f(e,n,{get:t[n],enumerable:!0})}(v,{Circle2d:function(){return x}}),e.exports=(r=v,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,i=l(p(t));try{var a=function(){var i=o.value;h.call(e,i)||i===n||f(e,i,{get:function(){return t[i]},enumerable:!(r=d(t,i))||r.enumerable})};for(i.s();!(o=i.n()).done;)a()}catch(u){i.e(u)}finally{i.f()}}return e}(f({},"__esModule",{value:!0}),r));var g=n(24161),y=n(45650),m=n(40797),b=n(63557),w=n(87515),S=n(82749),x=function(e){function t(e){var n;i(this,t),n=u(this,t,[o({isClosed:!0},e)]),c(n,"_center",void 0),c(n,"radius",void 0),c(n,"x",void 0),c(n,"y",void 0),n.config=e;var r=e.x,a=void 0===r?0:r,s=e.y,l=void 0===s?0:s,f=e.radius;return n.x=a,n.y=l,n._center=new y.Vec(f+a,f+l),n.radius=f,n}return s(t,e),a(t,[{key:"getBounds",value:function(){return new g.Box(this.x,this.y,2*this.radius,2*this.radius)}},{key:"getVertices",value:function(){for(var e=this._center,t=this.radius,n=b.PI2*t,r=[],o=0,i=(0,S.getVerticesCountForLength)(n);o<i;o++){var a=o/i*b.PI2;r.push((0,b.getPointOnCircle)(e,t,a))}return r}},{key:"nearestPoint",value:function(e){var t=this._center,n=this.radius;return t.equals(e)?y.Vec.AddXY(t,n,0):t.clone().add(e.clone().sub(t).uni().mul(n))}},{key:"hitTestLineSegment",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=this._center,o=this.radius;return null!==(0,m.intersectLineSegmentCircle)(e,t,r,o+n)}},{key:"getSvgPathData",value:function(){var e=this._center,t=this.radius;return"M".concat(e.x+t,",").concat(e.y," a").concat(t,",").concat(t," 0 1,0 ").concat(2*t,",0a").concat(t,",").concat(t," 0 1,0 -").concat(2*t,",0")}}])}(w.Geometry2d)},90774:function(e,t,n){"use strict";var r,o=n(12897).default,i=n(17383).default,a=n(34579).default,u=n(18336).default,s=n(29511).default,c=n(43693).default,l=n(50883).default,f=Object.defineProperty,d=Object.getOwnPropertyDescriptor,p=Object.getOwnPropertyNames,h=Object.prototype.hasOwnProperty,v={};!function(e,t){for(var n in t)f(e,n,{get:t[n],enumerable:!0})}(v,{CubicBezier2d:function(){return y}}),e.exports=(r=v,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,i=l(p(t));try{var a=function(){var i=o.value;h.call(e,i)||i===n||f(e,i,{get:function(){return t[i]},enumerable:!(r=d(t,i))||r.enumerable})};for(i.s();!(o=i.n()).done;)a()}catch(u){i.e(u)}finally{i.f()}}return e}(f({},"__esModule",{value:!0}),r));var g=n(45650),y=function(e){function t(e){var n;i(this,t);var r=e.start,a=e.cp1,s=e.cp2,l=e.end;return n=u(this,t,[o(o({},e),{},{points:[r,l]})]),c(n,"a",void 0),c(n,"b",void 0),c(n,"c",void 0),c(n,"d",void 0),n.a=r,n.b=a,n.c=s,n.d=l,n}return s(t,e),a(t,[{key:"getVertices",value:function(){for(var e=[],t=this.a,n=this.b,r=this.c,o=this.d,i=0;i<=10;i++){var a=i/10;e.push(new g.Vec((1-a)*(1-a)*(1-a)*t.x+(1-a)*(1-a)*3*a*n.x+3*(1-a)*(a*a)*r.x+a*a*a*o.x,(1-a)*(1-a)*(1-a)*t.y+(1-a)*(1-a)*3*a*n.y+3*(1-a)*(a*a)*r.y+a*a*a*o.y))}return e}},{key:"midPoint",value:function(){return t.GetAtT(this,.5)}},{key:"nearestPoint",value:function(e){var t,n,r,o,i=1/0,a=l(this.segments);try{for(a.s();!(o=a.n()).done;){r=o.value.nearestPoint(e),(n=g.Vec.Dist2(r,e))<i&&(t=r,i=n)}}catch(u){a.e(u)}finally{a.f()}if(!t)throw Error("nearest point not found");return t}},{key:"getSvgPathData",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=this.a,n=this.b,r=this.c,o=this.d;return"".concat(e?"M ".concat(t.toFixed()," "):""," C").concat(n.toFixed()," ").concat(r.toFixed()," ").concat(o.toFixed())}},{key:"getLength",value:function(){for(var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:32,r=this.a,o=0,i=1;i<=n;i++)e=t.GetAtT(this,i/n),o+=g.Vec.Dist(r,e),r=e;return o}}],[{key:"GetAtT",value:function(e,t){var n=e.a,r=e.b,o=e.c,i=e.d;return new g.Vec((1-t)*(1-t)*(1-t)*n.x+(1-t)*(1-t)*3*t*r.x+3*(1-t)*(t*t)*o.x+t*t*t*i.x,(1-t)*(1-t)*(1-t)*n.y+(1-t)*(1-t)*3*t*r.y+3*(1-t)*(t*t)*o.y+t*t*t*i.y)}}])}(n(8779).Polyline2d)},92368:function(e,t,n){"use strict";var r,o=n(12897).default,i=n(17383).default,a=n(34579).default,u=n(18336).default,s=n(29511).default,c=n(43693).default,l=n(50883).default,f=Object.defineProperty,d=Object.getOwnPropertyDescriptor,p=Object.getOwnPropertyNames,h=Object.prototype.hasOwnProperty,v={};!function(e,t){for(var n in t)f(e,n,{get:t[n],enumerable:!0})}(v,{CubicSpline2d:function(){return m}}),e.exports=(r=v,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,i=l(p(t));try{var a=function(){var i=o.value;h.call(e,i)||i===n||f(e,i,{get:function(){return t[i]},enumerable:!(r=d(t,i))||r.enumerable})};for(i.s();!(o=i.n()).done;)a()}catch(u){i.e(u)}finally{i.f()}}return e}(f({},"__esModule",{value:!0}),r));var g=n(45650),y=n(90774),m=function(e){function t(e){var n;i(this,t),n=u(this,t,[o(o({},e),{},{isClosed:!1,isFilled:!1})]),c(n,"points",void 0),c(n,"_segments",void 0);var r=e.points;return n.points=r,n}return s(t,e),a(t,[{key:"segments",get:function(){if(!this._segments){this._segments=[];for(var e=this.points,t=e.length,n=t-2,r=1.25,o=0;o<t-1;o++){var i=0===o?e[0]:e[o-1],a=e[o],u=e[o+1],s=o===n?u:e[o+2],c=a,l=0===o?i:new g.Vec(a.x+(u.x-i.x)/6*r,a.y+(u.y-i.y)/6*r),f=o===n?u:new g.Vec(u.x-(s.x-a.x)/6*r,u.y-(s.y-a.y)/6*r),d=u;this._segments.push(new y.CubicBezier2d({start:c,cp1:l,cp2:f,end:d}))}}return this._segments}},{key:"getLength",value:function(){return this.segments.reduce((function(e,t){return e+t.length}),0)}},{key:"getVertices",value:function(){var e=this.segments.reduce((function(e,t){return e.concat(t.vertices)}),[]);return e.push(this.points[this.points.length-1]),e}},{key:"nearestPoint",value:function(e){var t,n,r,o,i=1/0,a=l(this.segments);try{for(a.s();!(o=a.n()).done;){r=o.value.nearestPoint(e),(n=g.Vec.Dist2(r,e))<i&&(t=r,i=n)}}catch(u){a.e(u)}finally{a.f()}if(!t)throw Error("nearest point not found");return t}},{key:"hitTestLineSegment",value:function(e,t){return this.segments.some((function(n){return n.hitTestLineSegment(e,t)}))}},{key:"getSvgPathData",value:function(){var e=this.segments.reduce((function(e,t,n){return e+t.getSvgPathData(0===n)}),"");return this.isClosed&&(e+="Z"),e}}])}(n(87515).Geometry2d)},59490:function(e,t,n){"use strict";var r,o=n(12897).default,i=n(17383).default,a=n(34579).default,u=n(18336).default,s=n(29511).default,c=n(43693).default,l=n(50883).default,f=Object.defineProperty,d=Object.getOwnPropertyDescriptor,p=Object.getOwnPropertyNames,h=Object.prototype.hasOwnProperty,v={};!function(e,t){for(var n in t)f(e,n,{get:t[n],enumerable:!0})}(v,{Edge2d:function(){return m}}),e.exports=(r=v,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,i=l(p(t));try{var a=function(){var i=o.value;h.call(e,i)||i===n||f(e,i,{get:function(){return t[i]},enumerable:!(r=d(t,i))||r.enumerable})};for(i.s();!(o=i.n()).done;)a()}catch(u){i.e(u)}finally{i.f()}}return e}(f({},"__esModule",{value:!0}),r));var g=n(45650),y=n(40797),m=function(e){function t(e){var n;i(this,t),n=u(this,t,[o(o({},e),{},{isClosed:!1,isFilled:!1})]),c(n,"start",void 0),c(n,"end",void 0),c(n,"d",void 0),c(n,"u",void 0),c(n,"ul",void 0);var r=e.start,a=e.end;return n.start=r,n.end=a,n.d=r.clone().sub(a),n.u=n.d.clone().uni(),n.ul=n.u.len(),n}return s(t,e),a(t,[{key:"getLength",value:function(){return this.d.len()}},{key:"midPoint",value:function(){return this.start.lrp(this.end,.5)}},{key:"getVertices",value:function(){return[this.start,this.end]}},{key:"nearestPoint",value:function(e){var t=this.start,n=this.end,r=this.d,o=this.u,i=this.ul;if(0===r.len())return t;if(0===i)return t;var a=g.Vec.Sub(e,t).dpr(o)/i,u=t.x+o.x*a;if(u<Math.min(t.x,n.x))return t.x<n.x?t:n;if(u>Math.max(t.x,n.x))return t.x>n.x?t:n;var s=t.y+o.y*a;return s<Math.min(t.y,n.y)?t.y<n.y?t:n:s>Math.max(t.y,n.y)?t.y>n.y?t:n:new g.Vec(u,s)}},{key:"hitTestLineSegment",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return(0,y.linesIntersect)(e,t,this.start,this.end)||this.distanceToLineSegment(e,t)<=n}},{key:"getSvgPathData",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=this.start,n=this.end;return"".concat(e?"M".concat(t.toFixed()):""," L").concat(n.toFixed())}}])}(n(87515).Geometry2d)},29261:function(e,t,n){"use strict";var r,o=n(12897).default,i=n(17383).default,a=n(34579).default,u=n(18336).default,s=n(29511).default,c=n(43693).default,l=n(50883).default,f=Object.defineProperty,d=Object.getOwnPropertyDescriptor,p=Object.getOwnPropertyNames,h=Object.prototype.hasOwnProperty,v={};!function(e,t){for(var n in t)f(e,n,{get:t[n],enumerable:!0})}(v,{Ellipse2d:function(){return x}}),e.exports=(r=v,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,i=l(p(t));try{var a=function(){var i=o.value;h.call(e,i)||i===n||f(e,i,{get:function(){return t[i]},enumerable:!(r=d(t,i))||r.enumerable})};for(i.s();!(o=i.n()).done;)a()}catch(u){i.e(u)}finally{i.f()}}return e}(f({},"__esModule",{value:!0}),r));var g=n(24161),y=n(45650),m=n(63557),b=n(59490),w=n(87515),S=n(82749),x=function(e){function t(e){var n;i(this,t),n=u(this,t,[o(o({},e),{},{isClosed:!0})]),c(n,"w",void 0),c(n,"h",void 0),c(n,"_edges",void 0),n.config=e;var r=e.width,a=e.height;return n.w=r,n.h=a,n}return s(t,e),a(t,[{key:"edges",get:function(){if(!this._edges){var e=this.vertices;this._edges=[];for(var t=0,n=e.length;t<n;t++){var r=e[t],o=e[(t+1)%n];this._edges.push(new b.Edge2d({start:r,end:o}))}}return this._edges}},{key:"getVertices",value:function(){for(var e=Math.max(1,this.w)/2,t=Math.max(1,this.h)/2,n=Math.pow(e-t,2)/Math.pow(e+t,2),r=m.PI*(e+t)*(1+3*n/(10+Math.sqrt(4-3*n))),o=(0,S.getVerticesCountForLength)(r),i=m.PI2/o,a=Math.cos(i),u=Math.sin(i),s=0,c=1,l=1,f=Array(o),d=0;d<o;d++)f[d]=new y.Vec(e+e*c,t+t*s),l=a*c-u*s,s=u*c+a*s,c=l;return f}},{key:"nearestPoint",value:function(e){var t,n,r,o,i=1/0,a=l(this.edges);try{for(a.s();!(o=a.n()).done;){r=o.value.nearestPoint(e),(n=y.Vec.Dist2(r,e))<i&&(t=r,i=n)}}catch(u){a.e(u)}finally{a.f()}if(!t)throw Error("nearest point not found");return t}},{key:"hitTestLineSegment",value:function(e,t){return this.edges.some((function(n){return n.hitTestLineSegment(e,t)}))}},{key:"getBounds",value:function(){return new g.Box(0,0,this.w,this.h)}},{key:"getLength",value:function(){var e=this.w/2,t=this.h/2,n=Math.max(0,e),r=Math.max(0,t);return(0,m.perimeterOfEllipse)(n,r)}},{key:"getSvgPathData",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.w/2,n=this.h/2,r=Math.max(0,t),o=Math.max(0,n);return"".concat(e?"M".concat(t-r,",").concat(n):""," a").concat(r,",").concat(o,",0,1,1,").concat(2*r,",0a").concat(r,",").concat(o,",0,1,1,-").concat(2*r,",0")}}])}(w.Geometry2d)},87515:function(e,t,n){"use strict";var r,o=n(17383).default,i=n(34579).default,a=n(43693).default,u=n(50883).default,s=Object.defineProperty,c=Object.getOwnPropertyDescriptor,l=Object.getOwnPropertyNames,f=Object.prototype.hasOwnProperty,d={};!function(e,t){for(var n in t)s(e,n,{get:t[n],enumerable:!0})}(d,{Geometry2d:function(){return g}}),e.exports=(r=d,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,i=u(l(t));try{var a=function(){var i=o.value;f.call(e,i)||i===n||s(e,i,{get:function(){return t[i]},enumerable:!(r=c(t,i))||r.enumerable})};for(i.s();!(o=i.n()).done;)a()}catch(d){i.e(d)}finally{i.f()}}return e}(s({},"__esModule",{value:!0}),r));var p=n(24161),h=n(45650),v=n(63557),g=function(){return i((function e(t){var n;o(this,e),a(this,"isFilled",!1),a(this,"isClosed",!0),a(this,"isLabel",!1),a(this,"debugColor",void 0),a(this,"ignore",void 0),a(this,"_vertices",void 0),a(this,"_bounds",void 0),a(this,"_area",void 0),a(this,"_length",void 0),this.isFilled=t.isFilled,this.isClosed=t.isClosed,this.isLabel=null!==(n=t.isLabel)&&void 0!==n&&n,this.debugColor=t.debugColor,this.ignore=t.ignore}),[{key:"hitTestPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return!(!this.isClosed||!this.isFilled&&!n||!(0,v.pointInPolygon)(e,this.vertices))||h.Vec.Dist2(e,this.nearestPoint(e))<=t*t}},{key:"distanceToPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e.dist(this.nearestPoint(e))*(this.isClosed&&(this.isFilled||t)&&(0,v.pointInPolygon)(e,this.vertices)?-1:1)}},{key:"distanceToLineSegment",value:function(e,t){if(e.equals(t))return this.distanceToPoint(e);for(var n,r,o,i,a=this.vertices,u=1/0,s=0;s<a.length;s++)o=a[s],i=h.Vec.NearestPointOnLineSegment(e,t,o,!0),(r=h.Vec.Dist2(o,i))<u&&(u=r,n=i);if(!n)throw Error("nearest point not found");return this.isClosed&&this.isFilled&&(0,v.pointInPolygon)(n,this.vertices)?-u:u}},{key:"hitTestLineSegment",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return this.distanceToLineSegment(e,t)<=n}},{key:"nearestPointOnLineSegment",value:function(e,t){for(var n,r,o,i,a=this.vertices,u=1/0,s=0;s<a.length;s++)o=a[s],i=h.Vec.NearestPointOnLineSegment(e,t,o,!0),(r=h.Vec.Dist2(o,i))<u&&(u=r,n=i);if(!n)throw Error("nearest point not found");return n}},{key:"isPointInBounds",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.bounds;return!(e.x<n.minX-t||e.y<n.minY-t||e.x>n.maxX+t||e.y>n.maxY+t)}},{key:"vertices",get:function(){return this._vertices||(this._vertices=this.getVertices()),this._vertices}},{key:"getBounds",value:function(){return p.Box.FromPoints(this.vertices)}},{key:"bounds",get:function(){return this._bounds||(this._bounds=this.getBounds()),this._bounds}},{key:"center",get:function(){return this.bounds.center}},{key:"area",get:function(){return this._area||(this._area=this.getArea()),this._area}},{key:"getArea",value:function(){if(!this.isClosed)return 0;for(var e=this.vertices,t=0,n=0,r=e.length;n<r;n++){var o=e[n],i=e[(n+1)%r];t+=o.x*i.y-i.x*o.y}return t/2}},{key:"toSimpleSvgPath",value:function(){var e="",t=this.vertices,n=t.length;if(0===n)return e;e+="M".concat(t[0].x,",").concat(t[0].y);for(var r=1;r<n;r++)e+="L".concat(t[r].x,",").concat(t[r].y);return this.isClosed&&(e+="Z"),e}},{key:"length",get:function(){return this._length||(this._length=this.getLength()),this._length}},{key:"getLength",value:function(){for(var e,t=this.vertices,n=t[0],r=0,o=1;o<t.length;o++)e=t[o],r+=h.Vec.Dist2(n,e),n=e;return Math.sqrt(r)}}])}()},65388:function(e,t,n){"use strict";var r,o=n(41132).default,i=n(12897).default,a=n(17383).default,u=n(34579).default,s=n(18336).default,c=n(29511).default,l=n(43693).default,f=n(50883).default,d=Object.defineProperty,p=Object.getOwnPropertyDescriptor,h=Object.getOwnPropertyNames,v=Object.prototype.hasOwnProperty,g={};!function(e,t){for(var n in t)d(e,n,{get:t[n],enumerable:!0})}(g,{Group2d:function(){return b}}),e.exports=(r=g,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,i=f(h(t));try{var a=function(){var i=o.value;v.call(e,i)||i===n||d(e,i,{get:function(){return t[i]},enumerable:!(r=p(t,i))||r.enumerable})};for(i.s();!(o=i.n()).done;)a()}catch(u){i.e(u)}finally{i.f()}}return e}(d({},"__esModule",{value:!0}),r));var y=n(24161),m=n(45650),b=function(e){function t(e){var n;a(this,t),n=s(this,t,[i(i({},e),{},{isClosed:!0,isFilled:!1})]),l(n,"children",[]),l(n,"ignoredChildren",[]);var r,o=f(e.children);try{for(o.s();!(r=o.n()).done;){var u=r.value;u.ignore?n.ignoredChildren.push(u):n.children.push(u)}}catch(c){o.e(c)}finally{o.f()}if(0===n.children.length)throw Error("Group2d must have at least one child");return n}return c(t,e),u(t,[{key:"getVertices",value:function(){return this.children.filter((function(e){return!e.isLabel})).flatMap((function(e){return e.vertices}))}},{key:"nearestPoint",value:function(e){var t,n,r,o=1/0,i=this.children;if(0===i.length)throw Error("no children");var a,u=f(i);try{for(u.s();!(a=u.n()).done;){n=a.value.nearestPoint(e),(r=m.Vec.Dist2(n,e))<o&&(o=r,t=n)}}catch(s){u.e(s)}finally{u.f()}if(!t)throw Error("nearest point not found");return t}},{key:"distanceToPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return Math.min.apply(Math,o(this.children.map((function(n,r){return n.distanceToPoint(e,t||r>0)}))))}},{key:"hitTestPoint",value:function(e,t,n){return!!this.children.filter((function(e){return!e.isLabel})).find((function(r){return r.hitTestPoint(e,t,n)}))}},{key:"hitTestLineSegment",value:function(e,t,n){return!!this.children.filter((function(e){return!e.isLabel})).find((function(r){return r.hitTestLineSegment(e,t,n)}))}},{key:"getArea",value:function(){return this.children[0].area}},{key:"toSimpleSvgPath",value:function(){var e,t="",n=f(this.children);try{for(n.s();!(e=n.n()).done;){t+=e.value.toSimpleSvgPath()}}catch(v){n.e(v)}finally{n.f()}for(var r=y.Box.FromPoints(this.vertices).corners,o=0,i=r.length;o<i;o++){var a=r[o],u=r[(o-1+i)%i],s=a.dist(u),c=r[(o+1)%i],l=a.dist(c),d=a.clone().lrp(u,4/s),p=a,h=a.clone().lrp(c,4/l);t+="M".concat(d.x,",").concat(d.y," L").concat(p.x,",").concat(p.y," L").concat(h.x,",").concat(h.y," ")}return t}},{key:"getLength",value:function(){return this.children.reduce((function(e,t){return t.isLabel?e:e+t.length}),0)}},{key:"getSvgPathData",value:function(){return this.children.map((function(e,t){return e.isLabel?"":e.getSvgPathData(0===t)})).join(" ")}}])}(n(87515).Geometry2d)},15657:function(e,t,n){"use strict";var r,o=n(12897).default,i=n(17383).default,a=n(34579).default,u=n(18336).default,s=n(29511).default,c=n(43693).default,l=n(50883).default,f=Object.defineProperty,d=Object.getOwnPropertyDescriptor,p=Object.getOwnPropertyNames,h=Object.prototype.hasOwnProperty,v={};!function(e,t){for(var n in t)f(e,n,{get:t[n],enumerable:!0})}(v,{Point2d:function(){return y}}),e.exports=(r=v,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,i=l(p(t));try{var a=function(){var i=o.value;h.call(e,i)||i===n||f(e,i,{get:function(){return t[i]},enumerable:!(r=d(t,i))||r.enumerable})};for(i.s();!(o=i.n()).done;)a()}catch(u){i.e(u)}finally{i.f()}}return e}(f({},"__esModule",{value:!0}),r));var g=n(45650),y=function(e){function t(e){var n;i(this,t),n=u(this,t,[o(o({},e),{},{isClosed:!0,isFilled:!0})]),c(n,"point",void 0);var r=e.point;return n.point=r,n}return s(t,e),a(t,[{key:"getVertices",value:function(){return[this.point]}},{key:"nearestPoint",value:function(){return this.point}},{key:"hitTestLineSegment",value:function(e,t,n){return g.Vec.DistanceToLineSegment(e,t,this.point)<n}},{key:"getSvgPathData",value:function(){var e=this.point;return"M".concat(e.toFixed())}}])}(n(87515).Geometry2d)},47961:function(e,t,n){"use strict";var r,o=n(12897).default,i=n(34579).default,a=n(17383).default,u=n(18336).default,s=n(29511).default,c=n(50883).default,l=Object.defineProperty,f=Object.getOwnPropertyDescriptor,d=Object.getOwnPropertyNames,p=Object.prototype.hasOwnProperty,h={};!function(e,t){for(var n in t)l(e,n,{get:t[n],enumerable:!0})}(h,{Polygon2d:function(){return v}}),e.exports=(r=h,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,i=c(d(t));try{var a=function(){var i=o.value;p.call(e,i)||i===n||l(e,i,{get:function(){return t[i]},enumerable:!(r=f(t,i))||r.enumerable})};for(i.s();!(o=i.n()).done;)a()}catch(u){i.e(u)}finally{i.f()}}return e}(l({},"__esModule",{value:!0}),r));var v=function(e){function t(e){var n;return a(this,t),(n=u(this,t,[o({},e)])).isClosed=!0,n}return s(t,e),i(t)}(n(8779).Polyline2d)},8779:function(e,t,n){"use strict";var r,o=n(12897).default,i=n(17383).default,a=n(34579).default,u=n(18336).default,s=n(29511).default,c=n(43693).default,l=n(50883).default,f=Object.defineProperty,d=Object.getOwnPropertyDescriptor,p=Object.getOwnPropertyNames,h=Object.prototype.hasOwnProperty,v={};!function(e,t){for(var n in t)f(e,n,{get:t[n],enumerable:!0})}(v,{Polyline2d:function(){return m}}),e.exports=(r=v,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,i=l(p(t));try{var a=function(){var i=o.value;h.call(e,i)||i===n||f(e,i,{get:function(){return t[i]},enumerable:!(r=d(t,i))||r.enumerable})};for(i.s();!(o=i.n()).done;)a()}catch(u){i.e(u)}finally{i.f()}}return e}(f({},"__esModule",{value:!0}),r));var g=n(45650),y=n(59490),m=function(e){function t(e){var n;i(this,t),n=u(this,t,[o({isClosed:!1,isFilled:!1},e)]),c(n,"points",void 0),c(n,"_segments",void 0);var r=e.points;return n.points=r,n}return s(t,e),a(t,[{key:"segments",get:function(){if(!this._segments){this._segments=[];for(var e=this.vertices,t=0,n=e.length-1;t<n;t++){var r=e[t],o=e[t+1];this._segments.push(new y.Edge2d({start:r,end:o}))}this.isClosed&&this._segments.push(new y.Edge2d({start:e[e.length-1],end:e[0]}))}return this._segments}},{key:"getLength",value:function(){return this.segments.reduce((function(e,t){return e+t.length}),0)}},{key:"getVertices",value:function(){return this.points}},{key:"nearestPoint",value:function(e){for(var t,n,r=this.segments,o=this.points[0],i=1/0,a=0;a<r.length;a++)t=r[a].nearestPoint(e),(n=g.Vec.Dist2(t,e))<i&&(o=t,i=n);if(!o)throw Error("nearest point not found");return o}},{key:"hitTestLineSegment",value:function(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=this.segments,o=0,i=r.length;o<i;o++)if(r[o].hitTestLineSegment(e,t,n))return!0;return!1}},{key:"getSvgPathData",value:function(){var e=this.vertices;return e.length<2?"":e.reduce((function(e,t,n){return 0===n?"M ".concat(t.x," ").concat(t.y):"".concat(e," L ").concat(t.x," ").concat(t.y)}),"")}}])}(n(87515).Geometry2d)},12922:function(e,t,n){"use strict";var r,o=n(12897).default,i=n(17383).default,a=n(34579).default,u=n(18336).default,s=n(29511).default,c=n(43693).default,l=n(50883).default,f=Object.defineProperty,d=Object.getOwnPropertyDescriptor,p=Object.getOwnPropertyNames,h=Object.prototype.hasOwnProperty,v={};!function(e,t){for(var n in t)f(e,n,{get:t[n],enumerable:!0})}(v,{Rectangle2d:function(){return m}}),e.exports=(r=v,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,i=l(p(t));try{var a=function(){var i=o.value;h.call(e,i)||i===n||f(e,i,{get:function(){return t[i]},enumerable:!(r=d(t,i))||r.enumerable})};for(i.s();!(o=i.n()).done;)a()}catch(u){i.e(u)}finally{i.f()}}return e}(f({},"__esModule",{value:!0}),r));var g=n(24161),y=n(45650),m=function(e){function t(e){var n;i(this,t);var r=e.x,a=void 0===r?0:r,s=e.y,l=void 0===s?0:s,f=e.width,d=e.height;return n=u(this,t,[o(o({},e),{},{points:[new y.Vec(a,l),new y.Vec(a+f,l),new y.Vec(a+f,l+d),new y.Vec(a,l+d)]})]),c(n,"x",void 0),c(n,"y",void 0),c(n,"w",void 0),c(n,"h",void 0),n.x=a,n.y=l,n.w=f,n.h=d,n}return s(t,e),a(t,[{key:"getBounds",value:function(){return new g.Box(this.x,this.y,this.w,this.h)}},{key:"getSvgPathData",value:function(){var e=this.x,t=this.y,n=this.w,r=this.h;return"M".concat(e,",").concat(t," h").concat(n," v").concat(r," h-").concat(n,"z")}}])}(n(47961).Polygon2d)},82228:function(e,t,n){"use strict";var r,o=n(41132).default,i=n(12897).default,a=n(17383).default,u=n(34579).default,s=n(18336).default,c=n(29511).default,l=n(43693).default,f=n(50883).default,d=Object.defineProperty,p=Object.getOwnPropertyDescriptor,h=Object.getOwnPropertyNames,v=Object.prototype.hasOwnProperty,g={};!function(e,t){for(var n in t)d(e,n,{get:t[n],enumerable:!0})}(g,{Stadium2d:function(){return x}}),e.exports=(r=g,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,i=f(h(t));try{var a=function(){var i=o.value;v.call(e,i)||i===n||d(e,i,{get:function(){return t[i]},enumerable:!(r=p(t,i))||r.enumerable})};for(i.s();!(o=i.n()).done;)a()}catch(u){i.e(u)}finally{i.f()}}return e}(d({},"__esModule",{value:!0}),r));var y=n(24161),m=n(45650),b=n(63557),w=n(41435),S=n(59490),x=function(e){function t(e){var n;a(this,t),n=s(this,t,[i(i({},e),{},{isClosed:!0})]),l(n,"w",void 0),l(n,"h",void 0),l(n,"a",void 0),l(n,"b",void 0),l(n,"c",void 0),l(n,"d",void 0),n.config=e;var r=e.width,o=e.height;if(n.w=r,n.h=o,o>r){var u=r/2;n.a=new w.Arc2d({start:new m.Vec(0,u),end:new m.Vec(r,u),center:new m.Vec(r/2,u),sweepFlag:1,largeArcFlag:1}),n.b=new S.Edge2d({start:new m.Vec(r,u),end:new m.Vec(r,o-u)}),n.c=new w.Arc2d({start:new m.Vec(r,o-u),end:new m.Vec(0,o-u),center:new m.Vec(r/2,o-u),sweepFlag:1,largeArcFlag:1}),n.d=new S.Edge2d({start:new m.Vec(0,o-u),end:new m.Vec(0,u)})}else{var c=o/2;n.a=new w.Arc2d({start:new m.Vec(c,o),end:new m.Vec(c,0),center:new m.Vec(c,c),sweepFlag:1,largeArcFlag:1}),n.b=new S.Edge2d({start:new m.Vec(c,0),end:new m.Vec(r-c,0)}),n.c=new w.Arc2d({start:new m.Vec(r-c,0),end:new m.Vec(r-c,o),center:new m.Vec(r-c,c),sweepFlag:1,largeArcFlag:1}),n.d=new S.Edge2d({start:new m.Vec(r-c,o),end:new m.Vec(c,o)})}return n}return c(t,e),u(t,[{key:"nearestPoint",value:function(e){for(var t,n,r,o=1/0,i=0,a=[this.a,this.b,this.c,this.d];i<a.length;i++){r=a[i].nearestPoint(e),(n=m.Vec.Dist2(r,e))<o&&(t=r,o=n)}if(!t)throw Error("nearest point not found");return t}},{key:"hitTestLineSegment",value:function(e,t){return[this.a,this.b,this.c,this.d].some((function(n){return n.hitTestLineSegment(e,t)}))}},{key:"getVertices",value:function(){return[this.a,this.b,this.c,this.d].reduce((function(e,t){return e.push.apply(e,o(t.vertices)),e}),[])}},{key:"getBounds",value:function(){return new y.Box(0,0,this.w,this.h)}},{key:"getLength",value:function(){var e=this.h,t=this.w;return e>t?2*(b.PI*(t/2)+(e-t)):2*(b.PI*(e/2)+(t-e))}},{key:"getSvgPathData",value:function(){return[this.a,this.b,this.c,this.d].map((function(e,t){return e.getSvgPathData(0===t)})).join(" ")+" Z"}}])}(n(87515).Geometry2d)},82749:function(e,t,n){"use strict";var r,o=n(50883).default,i=Object.defineProperty,a=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,c={};!function(e,t){for(var n in t)i(e,n,{get:t[n],enumerable:!0})}(c,{getVerticesCountForLength:function(){return d}}),e.exports=(r=c,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var c,l=o(u(t));try{var f=function(){var o=c.value;s.call(e,o)||o===n||i(e,o,{get:function(){return t[o]},enumerable:!(r=a(t,o))||r.enumerable})};for(l.s();!(c=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(i({},"__esModule",{value:!0}),r));var l=20,f=8;function d(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l;return Math.max(f,Math.ceil(e/t))}},40797:function(e,t,n){"use strict";var r,o=n(41132).default,i=n(50883).default,a=Object.defineProperty,u=Object.getOwnPropertyDescriptor,s=Object.getOwnPropertyNames,c=Object.prototype.hasOwnProperty,l={};!function(e,t){for(var n in t)a(e,n,{get:t[n],enumerable:!0})}(l,{intersectCircleCircle:function(){return y},intersectCirclePolygon:function(){return m},intersectCirclePolyline:function(){return b},intersectLineSegmentCircle:function(){return h},intersectLineSegmentLineSegment:function(){return p},intersectLineSegmentPolygon:function(){return g},intersectLineSegmentPolyline:function(){return v},intersectPolygonBounds:function(){return w},intersectPolygonPolygon:function(){return P},linesIntersect:function(){return x},polygonIntersectsPolyline:function(){return _},polygonsIntersect:function(){return k}}),e.exports=(r=l,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,l=i(s(t));try{var f=function(){var i=o.value;c.call(e,i)||i===n||a(e,i,{get:function(){return t[i]},enumerable:!(r=u(t,i))||r.enumerable})};for(l.s();!(o=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(a({},"__esModule",{value:!0}),r));var f=n(63557),d=n(45650);function p(e,t,n,r){var o=e.x-n.x,i=e.y-n.y,a=r.x-n.x,u=r.y-n.y,s=t.x-e.x,c=t.y-e.y,l=a*i-u*o,f=s*i-c*o,p=u*s-a*c;if(0===l||0===f)return null;if(0===p)return null;if(0!==p){var h=l/p,v=f/p;if(0<=h&&h<=1&&0<=v&&v<=1)return d.Vec.AddXY(e,h*s,h*c)}return null}function h(e,t,n,r){var o=(t.x-e.x)*(t.x-e.x)+(t.y-e.y)*(t.y-e.y),i=2*((t.x-e.x)*(e.x-n.x)+(t.y-e.y)*(e.y-n.y)),a=i*i-4*o*(n.x*n.x+n.y*n.y+e.x*e.x+e.y*e.y-2*(n.x*e.x+n.y*e.y)-r*r);if(a<0)return null;if(0===a)return null;var u=Math.sqrt(a),s=(-i+u)/(2*o),c=(-i-u)/(2*o);if((s<0||s>1)&&(c<0||c>1))return null;var l=[];return 0<=s&&s<=1&&l.push(d.Vec.Lrp(e,t,s)),0<=c&&c<=1&&l.push(d.Vec.Lrp(e,t,c)),0===l.length?null:l}function v(e,t,n){for(var r,o=[],i=0,a=n.length-1;i<a;i++)(r=p(e,t,n[i],n[i+1]))&&o.push(r);return 0===o.length?null:o}function g(e,t,n){for(var r,o=[],i=1,a=n.length;i<a+1;i++)(r=p(e,t,n[i-1],n[i%n.length]))&&o.push(r);return 0===o.length?null:o}function y(e,t,n,r){var o=n.x-e.x,i=n.y-e.y,a=Math.sqrt(o*o+i*i),u=(a*a-r*r+t*t)/(2*a),s=Math.sqrt(t*t-u*u);return o/=a,i/=a,[new d.Vec(e.x+o*u-i*s,e.y+i*u+o*s),new d.Vec(e.x+o*u+i*s,e.y+i*u-o*s)]}function m(e,t,n){for(var r,i=[],a=0,u=n.length;a<u;a++)(r=h(n[a],n[(a+1)%n.length],e,t))&&i.push.apply(i,o(r));return 0===i.length?null:i}function b(e,t,n){for(var r,i=[],a=1,u=n.length;a<u;a++)(r=h(n[a-1],n[a],e,t))&&i.push.apply(i,o(r));return 0===i.length?null:i}function w(e,t){var n,r,a=[],u=i(t.sides);try{for(u.s();!(r=u.n()).done;){var s=r.value;(n=g(s[0],s[1],e))&&a.push.apply(a,o(n))}}catch(c){u.e(c)}finally{u.f()}return 0===a.length?null:a}function S(e,t,n){return(n.y-e.y)*(t.x-e.x)>(t.y-e.y)*(n.x-e.x)}function x(e,t,n,r){return S(e,n,r)!==S(t,n,r)&&S(e,t,n)!==S(e,t,r)}function P(e,t){for(var n,r,i=new Map,a=0,u=e.length;a<u;a++)if(n=e[a],(0,f.pointInPolygon)(n,t)){var s=O(n);i.has(s)||i.set(s,n)}for(var c=0,l=t.length;c<l;c++)if(n=t[c],(0,f.pointInPolygon)(n,e)){var h=O(n);i.has(h)||i.set(h,n)}for(var v=0,g=e.length;v<g;v++){n=e[v],r=e[(v+1)%e.length];for(var y=0,m=t.length;y<m;y++){var b=p(n,r,t[y],t[(y+1)%t.length]);if(null!==b){var w=O(b);i.has(w)||i.set(w,b)}}}return 0===i.size?null:function(e){var t=d.Vec.Average(e);return e.sort((function(e,n){return d.Vec.Angle(t,e)-d.Vec.Angle(t,n)}))}(o(i.values()))}function O(e){return"".concat(e.x,",").concat(e.y)}function k(e,t){for(var n,r,o=0,i=e.length;o<i;o++){n=e[o],r=e[(o+1)%i];for(var a=0,u=t.length;a<u;a++)if(x(n,r,t[a],t[(a+1)%u]))return!0}return!1}function _(e,t){for(var n,r,o=0,i=e.length;o<i;o++){n=e[o],r=e[(o+1)%i];for(var a=1,u=t.length;a<u;a++)if(x(n,r,t[a-1],t[a]))return!0}return!1}},63557:function(e,t,n){"use strict";var r,o=n(50883).default,i=Object.defineProperty,a=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,c={};!function(e,t){for(var n in t)i(e,n,{get:t[n],enumerable:!0})}(c,{HALF_PI:function(){return h},PI:function(){return p},PI2:function(){return v},SIN:function(){return g},angleDistance:function(){return F},approximately:function(){return b},areAnglesCompatible:function(){return j},average:function(){return d},canonicalizeRotation:function(){return S},centerOfCircleFromThreePoints:function(){return z},clamp:function(){return y},clampRadians:function(){return k},clockwiseAngleDist:function(){return x},counterClockwiseAngleDist:function(){return P},degreesToRadians:function(){return I},getArcMeasure:function(){return V},getPointInArcT:function(){return B},getPointOnCircle:function(){return E},getPointsOnArc:function(){return H},getPolygonVertices:function(){return C},isSafeFloat:function(){return U},perimeterOfEllipse:function(){return w},pointInPolygon:function(){return R},precise:function(){return f},radiansToDegrees:function(){return T},rangeIntersection:function(){return A},rangesOverlap:function(){return M},shortAngleDist:function(){return O},snapAngle:function(){return _},toDomPrecision:function(){return N},toFixed:function(){return L},toPrecision:function(){return m}}),e.exports=(r=c,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var c,l=o(u(t));try{var f=function(){var o=c.value;s.call(e,o)||o===n||i(e,o,{get:function(){return t[o]},enumerable:!(r=a(t,o))||r.enumerable})};for(l.s();!(c=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(i({},"__esModule",{value:!0}),r));var l=n(45650);function f(e){return"".concat(N(e.x),",").concat(N(e.y)," ")}function d(e,t){return"".concat(N((e.x+t.x)/2),",").concat(N((e.y+t.y)/2)," ")}var p=Math.PI,h=p/2,v=2*p,g=Math.sin;function y(e,t,n){return Math.max(t,"undefined"!==typeof n?Math.min(e,n):e)}function m(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e10;return e?Math.round(e*t)/t:0}function b(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e-6;return Math.abs(e-t)<=n}function w(e,t){var n=Math.pow(e-t,2)/Math.pow(e+t,2);return p*(e+t)*(1+3*n/(10+Math.sqrt(4-3*n)))}function S(e){return(e%=v)<0?e+=v:0===e&&(e=0),e}function x(e,t){return(e=S(e))>(t=S(t))&&(t+=v),t-e}function P(e,t){return v-x(e,t)}function O(e,t){var n=(t-e)%v;return 2*n%v-n}function k(e){return(v+e)%v}function _(e,t){var n=v/t,r=Math.floor((k(e)+n/2)/n)*n%v;return r<p&&(r+=v),r>p&&(r-=v),r}function j(e,t){return e===t||b(e%(Math.PI/2)-t%(Math.PI/2),0)}function I(e){return e*p/180}function T(e){return 180*e/p}function E(e,t,n){return new l.Vec(e.x,e.y).add(l.Vec.FromAngle(n,t))}function C(e,t,n){for(var r=e/2,o=t/2,i=[],a=1/0,u=-1/0,s=1/0,c=-1/0,f=0;f<n;f++){var d=f*(v/n)-h,p=r+r*Math.cos(d),g=o+o*Math.sin(d);p<a&&(a=p),g<s&&(s=g),p>u&&(u=p),g>c&&(c=g),i.push(new l.Vec(p,g))}var y=u-a,m=c-s;if(0!==e-y||0!==t-m)for(var b=0;b<i.length;b++){var w=i[b];w.x=(w.x-a)/y*e,w.y=(w.y-s)/m*t}return i}function M(e,t,n,r){return e<r&&n<t}function A(e,t,n,r){var o=Math.max(e,n),i=Math.min(t,r);return o<=i?[o,i]:null}function D(e,t,n){return(t.x-e.x)*(n.y-e.y)-(n.x-e.x)*(t.y-e.y)}function R(e,t){for(var n,r,o=0,i=0;i<t.length;i++){if((n=t[i]).x===e.x&&n.y===e.y)return!0;if(r=t[(i+1)%t.length],l.Vec.Dist(e,n)+l.Vec.Dist(e,r)===l.Vec.Dist(n,r))return!0;n.y<=e.y?r.y>e.y&&D(n,r,e)>0&&(o+=1):r.y<=e.y&&D(n,r,e)<0&&(o-=1)}return 0!==o}function N(e){return Math.round(1e4*e)/1e4}function L(e){return Math.round(100*e)/100}var U=function(e){return Math.abs(e)<Number.MAX_SAFE_INTEGER};function F(e,t,n){return n<0?x(e,t):P(e,t)}function B(e,t,n,r){var o;if(Math.abs(e)>p){o=O(t,r);var i=O(r,n);return Math.abs(o)<Math.abs(i)?o/e:(e-i)/e}var a=(o=O(t,r))/e;return Math.sign(o)!==Math.sign(e)?Math.abs(a)>.5?1:0:a}function V(e,t,n,r){var o=(t-e)%v*2%v-(t-e)%v;return r?(v-Math.abs(o))*(n?1:-1):o}function z(e,t,n){var r=-2*(e.x*(t.y-n.y)-e.y*(t.x-n.x)+t.x*n.y-n.x*t.y),o=((e.x*e.x+e.y*e.y)*(n.y-t.y)+(t.x*t.x+t.y*t.y)*(e.y-n.y)+(n.x*n.x+n.y*n.y)*(t.y-e.y))/r,i=((e.x*e.x+e.y*e.y)*(t.x-n.x)+(t.x*t.x+t.y*t.y)*(n.x-e.x)+(n.x*n.x+n.y*n.y)*(e.x-t.x))/r;return Number.isFinite(o)&&Number.isFinite(i)?new l.Vec(o,i):null}function H(e,t,n,r,o){if(null===n)return[l.Vec.From(e),l.Vec.From(t)];for(var i=[],a=l.Vec.Angle(n,e),u=x(a,l.Vec.Angle(n,t)),s=0;s<o;s++){var c=E(n,r,a+u*(s/(o-1)));i.push(c)}return i}},80020:function(e,t,n){"use strict";var r,o=n(18336).default,i=n(29511).default,a=n(85715).default,u=n(17383).default,s=n(34579).default,c=n(43693).default,l=n(50883).default,f=Object.defineProperty,d=Object.getOwnPropertyDescriptor,p=Object.getOwnPropertyNames,h=Object.prototype.hasOwnProperty,v={};!function(e,t){for(var n in t)f(e,n,{get:t[n],enumerable:!0})}(v,{ReadonlySharedStyleMap:function(){return m},SharedStyleMap:function(){return b}}),e.exports=(r=v,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,i=l(p(t));try{var a=function(){var i=o.value;h.call(e,i)||i===n||f(e,i,{get:function(){return t[i]},enumerable:!(r=d(t,i))||r.enumerable})};for(i.s();!(o=i.n()).done;)a()}catch(u){i.e(u)}finally{i.f()}}return e}(f({},"__esModule",{value:!0}),r));var g=n(30645);function y(e,t){if(!t)return!1;switch(e.type){case"mixed":return"mixed"===t.type;case"shared":return"shared"===t.type&&e.value===t.value;default:throw(0,g.exhaustiveSwitchError)(e)}}var m=function(){return s((function e(t){u(this,e),c(this,"map",void 0),this.map=new Map(t)}),[{key:"get",value:function(e){return this.map.get(e)}},{key:"getAsKnownValue",value:function(e){var t=this.get(e);if(t&&"mixed"!==t.type)return t.value}},{key:"size",get:function(){return this.map.size}},{key:"equals",value:function(e){if(this.size!==e.size)return!1;var t,n=new Set,r=l(this);try{for(r.s();!(t=r.n()).done;){var o=a(t.value,2),i=o[0];if(!y(o[1],e.get(i)))return!1;n.add(i)}}catch(p){r.e(p)}finally{r.f()}var u,s=l(e);try{for(s.s();!(u=s.n()).done;){var c=a(u.value,2),f=c[0],d=c[1];if(!n.has(f)&&!y(d,this.get(f)))return!1}}catch(p){s.e(p)}finally{s.f()}return!0}},{key:"keys",value:function(){return this.map.keys()}},{key:"values",value:function(){return this.map.values()}},{key:"entries",value:function(){return this.map.entries()}},{key:Symbol.iterator,value:function(){return this.map[Symbol.iterator]()}}])}(),b=function(e){function t(){return u(this,t),o(this,t,arguments)}return i(t,e),s(t,[{key:"set",value:function(e,t){this.map.set(e,t)}},{key:"applyValue",value:function(e,t){var n=this.get(e);if(n)switch(n.type){case"mixed":return;case"shared":return void(n.value!==t&&this.set(e,{type:"mixed"}));default:(0,g.exhaustiveSwitchError)(n,"type")}else this.set(e,{type:"shared",value:t})}}])}(m)},61114:function(e,t,n){"use strict";var r,o=n(50883).default,i=Object.defineProperty,a=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,c={};!function(e,t){for(var n in t)i(e,n,{get:t[n],enumerable:!0})}(c,{dataUrlToFile:function(){return d},getDefaultCdnBaseUrl:function(){return h}}),e.exports=(r=c,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var c,l=o(u(t));try{var f=function(){var o=c.value;s.call(e,o)||o===n||i(e,o,{get:function(){return t[o]},enumerable:!(r=a(t,o))||r.enumerable})};for(l.s();!(c=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(i({},"__esModule",{value:!0}),r));var l=n(30645),f=n(35057);function d(e,t,n){return(0,l.fetch)(e).then((function(e){return e.arrayBuffer()})).then((function(e){return new File([e],t,{type:n})}))}var p="https://cdn.tldraw.com";function h(){return"".concat(p,"/").concat(f.version)}},1074:function(e,t,n){"use strict";var r,o=n(50883).default,i=Object.defineProperty,a=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,c={};!function(e,t){for(var n in t)i(e,n,{get:t[n],enumerable:!0})}(c,{debugFlags:function(){return h},featureFlags:function(){return d},pointerCaptureTrackingObject:function(){return p}}),e.exports=(r=c,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var c,l=o(u(t));try{var f=function(){var o=c.value;s.call(e,o)||o===n||i(e,o,{get:function(){return t[o]},enumerable:!(r=a(t,o))||r.enumerable})};for(l.s();!(c=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(i({},"__esModule",{value:!0}),r));var l=n(81501),f=n(30645),d={},p=g("pointerCaptureTrackingObject",{defaults:{all:new Map},shouldStoreForSession:!1}),h={logPreventDefaults:g("logPreventDefaults",{defaults:{all:!1}}),logPointerCaptures:g("logPointerCaptures",{defaults:{all:!1}}),logElementRemoves:g("logElementRemoves",{defaults:{all:!1}}),debugSvg:g("debugSvg",{defaults:{all:!1}}),showFps:g("showFps",{defaults:{all:!1}}),measurePerformance:g("measurePerformance",{defaults:{all:!1}}),throwToBlob:g("throwToBlob",{defaults:{all:!1}}),reconnectOnPing:g("reconnectOnPing",{defaults:{all:!1}}),debugCursors:g("debugCursors",{defaults:{all:!1}}),forceSrgb:g("forceSrgbColors",{defaults:{all:!1}}),debugGeometry:g("debugGeometry",{defaults:{all:!1}}),hideShapes:g("hideShapes",{defaults:{all:!1}}),editOnType:g("editOnType",{defaults:{all:!1}})};if("undefined"!==typeof Element){var v=Element.prototype.removeChild;(0,l.react)("element removal logging",(function(){h.logElementRemoves.get()?Element.prototype.removeChild=function(e){return console.warn("[tldraw] removing child:",e),v.call(this,e)}:Element.prototype.removeChild=v}))}function g(e,t){var n=t.defaults,r=t.shouldStoreForSession;return function(e){var t=function(e){var t,n,r,o,i,a;switch(null!==(t=null!==(n=null!==(r=y((function(){return{NODE_ENV:"production",PUBLIC_URL:"http://127.0.0.1:3000/assets/bundles",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.TLDRAW_ENV})))&&void 0!==r?r:y((function(){return{NODE_ENV:"production",PUBLIC_URL:"http://127.0.0.1:3000/assets/bundles",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.VERCEL_PUBLIC_TLDRAW_ENV})))&&void 0!==n?n:y((function(){return{NODE_ENV:"production",PUBLIC_URL:"http://127.0.0.1:3000/assets/bundles",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.NEXT_PUBLIC_TLDRAW_ENV})))&&void 0!==t?t:"production"){case"production":return null!==(o=e.defaults.production)&&void 0!==o?o:e.defaults.all;case"preview":case"staging":return null!==(i=e.defaults.staging)&&void 0!==i?i:e.defaults.all;default:return null!==(a=e.defaults.development)&&void 0!==a?a:e.defaults.all}}(e),n=e.shouldStoreForSession?function(e){try{var t;return JSON.parse(null!==(t=(0,f.getFromSessionStorage)("tldraw_debug:".concat(e)))&&void 0!==t?t:"null")}catch(n){return null}}(e.name):null,r=(0,l.atom)("debug:".concat(e.name),null!==n&&void 0!==n?n:t);"undefined"!==typeof window&&(e.shouldStoreForSession&&(0,l.react)("debug:".concat(e.name),(function(){var n=r.get();n===t?(0,f.deleteFromSessionStorage)("tldraw_debug:".concat(e.name)):(0,f.setInSessionStorage)("tldraw_debug:".concat(e.name),JSON.stringify(n))})),Object.defineProperty(window,"tldraw".concat(e.name.replace(/^[a-z]/,(function(e){return e.toUpperCase()}))),{get:function(){return r.get()},set:function(e){r.set(e)},configurable:!0}));return Object.assign(r,e)}({name:e,defaults:n,shouldStoreForSession:void 0===r||r})}function y(e){try{return e()}catch(t){return null}}},82196:function(e,t,n){"use strict";var r,o=n(85715).default,i=n(50883).default,a=Object.defineProperty,u=Object.getOwnPropertyDescriptor,s=Object.getOwnPropertyNames,c=Object.prototype.hasOwnProperty,l={};!function(e,t){for(var n in t)a(e,n,{get:t[n],enumerable:!0})}(l,{createDeepLinkString:function(){return h},parseDeepLinkString:function(){return v}}),e.exports=(r=l,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,l=i(s(t));try{var f=function(){var i=o.value;c.call(e,i)||i===n||a(e,i,{get:function(){return t[i]},enumerable:!(r=u(t,i))||r.enumerable})};for(l.s();!(o=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(a({},"__esModule",{value:!0}),r));var f=n(85191),d=n(30645),p=n(24161);function h(e){switch(e.type){case"shapes":var t=e.shapeIds.map((function(e){return g(e.slice(6))}));return"s".concat(t.join("."));case"page":return"p"+g(f.PageRecordType.parseId(e.pageId));case"viewport":var n=e.bounds,r=e.pageId,o="v".concat(Math.round(n.x),".").concat(Math.round(n.y),".").concat(Math.round(n.w),".").concat(Math.round(n.h));return r&&(o+="."+g(f.PageRecordType.parseId(r))),o;default:(0,d.exhaustiveSwitchError)(e)}}function v(e){switch(e[0]){case"s":return{type:"shapes",shapeIds:e.slice(1).split(".").filter(Boolean).map((function(e){return(0,f.createShapeId)(decodeURIComponent(e))}))};case"p":return{type:"page",pageId:f.PageRecordType.createId(decodeURIComponent(e.slice(1)))};case"v":var t=e.slice(1).split("."),n=o(t,5),r=n[0],i=n[1],a=n[2],u=n[3],s=n[4];return{type:"viewport",bounds:new p.Box(Number(r),Number(i),Number(a),Number(u)),pageId:s?f.PageRecordType.createId(decodeURIComponent(s)):void 0};default:throw Error("Invalid deep link string")}}function g(e){return encodeURIComponent(e).replace(/\./g,"%2E")}},90923:function(e,t,n){"use strict";var r,o=n(50883).default,i=Object.defineProperty,a=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,c={};!function(e,t){for(var n in t)i(e,n,{get:t[n],enumerable:!0})}(c,{loopToHtmlElement:function(){return f},preventDefault:function(){return d},releasePointerCapture:function(){return h},setPointerCapture:function(){return p},setStyleProperty:function(){return g},stopEventPropagation:function(){return v}}),e.exports=(r=c,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var c,l=o(u(t));try{var f=function(){var o=c.value;s.call(e,o)||o===n||i(e,o,{get:function(){return t[o]},enumerable:!(r=a(t,o))||r.enumerable})};for(l.s();!(c=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(i({},"__esModule",{value:!0}),r));var l=n(1074);function f(e){if(e instanceof HTMLElement)return e;if(e.parentElement)return f(e.parentElement);throw Error("Could not find a parent element of an HTML type!")}function d(e){e.preventDefault(),l.debugFlags.logPreventDefaults.get()&&console.warn("preventDefault called on event:",e)}function p(e,t){if(e.setPointerCapture(t.pointerId),l.debugFlags.logPointerCaptures.get()){var n,r=l.pointerCaptureTrackingObject.get();r.set(e,(null!==(n=r.get(e))&&void 0!==n?n:0)+1),console.warn("setPointerCapture called on element:",e,t)}}function h(e,t){if(e.hasPointerCapture(t.pointerId)&&(e.releasePointerCapture(t.pointerId),l.debugFlags.logPointerCaptures.get())){var n=l.pointerCaptureTrackingObject.get();1===n.get(e)?n.delete(e):n.has(e)?n.set(e,n.get(e)-1):console.warn("Release without capture"),console.warn("releasePointerCapture called on element:",e,t)}}var v=function(e){return e.stopPropagation()},g=function(e,t,n){e&&e.style.setProperty(t,n)}},12136:function(e,t,n){"use strict";var r,o=n(50883).default,i=Object.defineProperty,a=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,c={};function l(e,t){for(var n=e,r=new Set(t);r.has(n);){var o;n=null!==(o=/^.*(\d+)$/.exec(n))&&void 0!==o&&o[1]?n.replace(/(\d+)(?=\D?)$/,(function(e){return(+e+1).toString()})):"".concat(n," 1")}return n}!function(e,t){for(var n in t)i(e,n,{get:t[n],enumerable:!0})}(c,{getIncrementedName:function(){return l}}),e.exports=(r=c,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var c,l=o(u(t));try{var f=function(){var o=c.value;s.call(e,o)||o===n||i(e,o,{get:function(){return t[o]},enumerable:!(r=a(t,o))||r.enumerable})};for(l.s();!(c=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(i({},"__esModule",{value:!0}),r))},17054:function(e,t,n){"use strict";var r,o=n(50883).default,i=Object.defineProperty,a=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,c={};!function(e,t){for(var n in t)i(e,n,{get:t[n],enumerable:!0})}(c,{getPointerInfo:function(){return f}}),e.exports=(r=c,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var c,l=o(u(t));try{var f=function(){var o=c.value;s.call(e,o)||o===n||i(e,o,{get:function(){return t[o]},enumerable:!(r=a(t,o))||r.enumerable})};for(l.s();!(c=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(i({},"__esModule",{value:!0}),r));var l=n(95518);function f(e){return e.isKilled=!0,{point:{x:e.clientX,y:e.clientY,z:e.pressure},shiftKey:e.shiftKey,altKey:e.altKey,ctrlKey:e.metaKey||e.ctrlKey,metaKey:e.metaKey,accelKey:(0,l.isAccelKey)(e),pointerId:e.pointerId,button:e.button,isPen:"pen"===e.pointerType}}},87485:function(e,t,n){"use strict";var r,o=n(50883).default,i=Object.defineProperty,a=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,c={};!function(e,t){for(var n in t)i(e,n,{get:t[n],enumerable:!0})}(c,{getSvgPathFromPoints:function(){return f}}),e.exports=(r=c,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var c,l=o(u(t));try{var f=function(){var o=c.value;s.call(e,o)||o===n||i(e,o,{get:function(){return t[o]},enumerable:!(r=a(t,o))||r.enumerable})};for(l.s();!(c=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(i({},"__esModule",{value:!0}),r));var l=n(63557);function f(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=e.length;if(n<2)return"";var r=e[0],o=e[1];if(2===n)return"M".concat((0,l.precise)(r),"L").concat((0,l.precise)(o));for(var i="",a=2,u=n-1;a<u;a++)r=e[a],o=e[a+1],i+=(0,l.average)(r,o);return t?"M".concat((0,l.average)(e[0],e[1]),"Q").concat((0,l.precise)(e[1])).concat((0,l.average)(e[1],e[2]),"T").concat(i).concat((0,l.average)(e[n-1],e[0])).concat((0,l.average)(e[0],e[1]),"Z"):"M".concat((0,l.precise)(e[0]),"Q").concat((0,l.precise)(e[1])).concat((0,l.average)(e[1],e[2])).concat(e.length>3?"T":"").concat(i,"L").concat((0,l.precise)(e[n-1]))}},9098:function(e,t,n){"use strict";var r,o=n(50883).default,i=Object.defineProperty,a=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,c={};!function(e,t){for(var n in t)i(e,n,{get:t[n],enumerable:!0})}(c,{hardResetEditor:function(){return f}}),e.exports=(r=c,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var c,l=o(u(t));try{var f=function(){var o=c.value;s.call(e,o)||o===n||i(e,o,{get:function(){return t[o]},enumerable:!(r=a(t,o))||r.enumerable})};for(l.s();!(c=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(i({},"__esModule",{value:!0}),r));var l=n(24403);function f(){l.runtime.hardReset()}},95518:function(e,t,n){"use strict";var r,o=n(50883).default,i=Object.defineProperty,a=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,c={};!function(e,t){for(var n in t)i(e,n,{get:t[n],enumerable:!0})}(c,{isAccelKey:function(){return f}}),e.exports=(r=c,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var c,l=o(u(t));try{var f=function(){var o=c.value;s.call(e,o)||o===n||i(e,o,{get:function(){return t[o]},enumerable:!(r=a(t,o))||r.enumerable})};for(l.s();!(c=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(i({},"__esModule",{value:!0}),r));var l=n(55015),f=function(e){return l.tlenv.isDarwin?e.metaKey:e.ctrlKey||e.metaKey}},35539:function(e,t,n){"use strict";var r,o=n(50883).default,i=Object.defineProperty,a=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,c={};function l(e){for(var t=new ArrayBuffer(e.length),n=new Uint8Array(t),r=0,o=e.length;r<o;r++)n[r]=e.charCodeAt(r);return t}function f(e){var t=l(atob(e));return crypto.subtle.importKey("spki",new Uint8Array(t),{name:"ECDSA",namedCurve:"P-256"},!0,["verify"])}!function(e,t){for(var n in t)i(e,n,{get:t[n],enumerable:!0})}(c,{importPublicKey:function(){return f},str2ab:function(){return l}}),e.exports=(r=c,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var c,l=o(u(t));try{var f=function(){var o=c.value;s.call(e,o)||o===n||i(e,o,{get:function(){return t[o]},enumerable:!(r=a(t,o))||r.enumerable})};for(l.s();!(c=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(i({},"__esModule",{value:!0}),r))},20573:function(e,t,n){"use strict";var r,o=n(50883).default,i=Object.defineProperty,a=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,c={};!function(e,t){for(var n in t)i(e,n,{get:t[n],enumerable:!0})}(c,{normalizeWheel:function(){return d}}),e.exports=(r=c,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var c,l=o(u(t));try{var f=function(){var o=c.value;s.call(e,o)||o===n||i(e,o,{get:function(){return t[o]},enumerable:!(r=a(t,o))||r.enumerable})};for(l.s();!(c=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(i({},"__esModule",{value:!0}),r));var l=10,f=/Mac|iPod|iPhone|iPad/.test("undefined"===typeof window?"node":window.navigator.platform);function d(e){var t=e.deltaY,n=e.deltaX,r=0;return e.ctrlKey||e.altKey||e.metaKey?r=(Math.abs(t)>l?l*Math.sign(t):t)/100:e.shiftKey&&!f&&(n=t,t=0),{x:-n,y:-t,z:-r}}},11367:function(e,t,n){"use strict";var r,o=n(50883).default,i=Object.defineProperty,a=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,c={};!function(e,t){for(var n in t)i(e,n,{get:t[n],enumerable:!0})}(c,{refreshPage:function(){return f}}),e.exports=(r=c,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var c,l=o(u(t));try{var f=function(){var o=c.value;s.call(e,o)||o===n||i(e,o,{get:function(){return t[o]},enumerable:!(r=a(t,o))||r.enumerable})};for(l.s();!(c=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(i({},"__esModule",{value:!0}),r));var l=n(24403);function f(){l.runtime.refreshPage()}},67470:function(e,t,n){"use strict";var r,o=n(12897).default,i=n(41132).default,a=n(50883).default,u=Object.defineProperty,s=Object.getOwnPropertyDescriptor,c=Object.getOwnPropertyNames,l=Object.prototype.hasOwnProperty,f={};!function(e,t){for(var n in t)u(e,n,{get:t[n],enumerable:!0})}(f,{getReorderingShapesChanges:function(){return h}}),e.exports=(r=f,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,i=a(c(t));try{var f=function(){var i=o.value;l.call(e,i)||i===n||u(e,i,{get:function(){return t[i]},enumerable:!(r=s(t,i))||r.enumerable})};for(i.s();!(o=i.n()).done;)f()}catch(d){i.e(d)}finally{i.f()}}return e}(u({},"__esModule",{value:!0}),r));var d=n(30645),p=n(40797);function h(e,t,n,r){if(0===n.length)return[];var u,s=new Map,c=a((0,d.compact)(n.map((function(t){return e.getShape(t)}))));try{for(c.s();!(u=c.n()).done;){var l=u.value,f=l.parentId;s.has(f)||s.set(f,{children:(0,d.compact)(e.getSortedChildIdsForParent(f).map((function(t){return e.getShape(t)}))),moving:new Set}),s.get(f).moving.add(l)}}catch(h){c.e(h)}finally{c.f()}var p=[];switch(t){case"toBack":s.forEach((function(e){return function(e,t,n){var r,a,u=t.length;if(e.size===u)return;for(var s=0;s<u;s++){var c=t[s];if(!e.has(c)){a=c.index;break}r=c.index,e.delete(c)}if(0===e.size)return;var l=(0,d.getIndicesBetween)(r,a,e.size);n.push.apply(n,i(Array.from(e.values()).sort(d.sortByIndex).map((function(e,t){return o(o({},e),{},{index:l[t]})}))))}(e.moving,e.children,p)}));break;case"toFront":s.forEach((function(e){return function(e,t,n){var r,a,u=t.length;if(e.size===u)return;for(var s=u-1;s>-1;s--){var c=t[s];if(!e.has(c)){r=c.index;break}a=c.index,e.delete(c)}if(0===e.size)return;var l=(0,d.getIndicesBetween)(r,a,e.size);n.push.apply(n,i(Array.from(e.values()).sort(d.sortByIndex).map((function(e,t){return o(o({},e),{},{index:l[t]})}))))}(e.moving,e.children,p)}));break;case"forward":s.forEach((function(t){var n=t.moving,i=t.children;return function(e,t,n,r,i){var a=g(e,t),u=n.length;if(t.size===u)return;for(var s={name:"skipping"},c=function(){var e=t.has(n[l]);switch(s.name){case"skipping":if(!e)return 0;s={name:"selecting",selectIndex:l};break;case"selecting":var u;if(e)return 0;if((null===i||void 0===i||!i.considerAllShapes)&&!a(n[l]))return 0;var c=s.selectIndex;(0,d.getIndicesBetween)(n[l].index,null===(u=n[l+1])||void 0===u?void 0:u.index,l-c).forEach((function(e,i){var a=n[c+i];t.has(a)&&r.push(o(o({},a),{},{index:e}))})),s={name:"skipping"}}},l=0;l<u;l++)c()}(e,n,i,p,r)}));break;case"backward":s.forEach((function(t){var n=t.moving,i=t.children;return function(e,t,n,r,i){var a=g(e,t),u=n.length;if(t.size===u)return;for(var s={name:"skipping"},c=function(e){var u=t.has(n[e]);switch(s.name){case"skipping":if(!u)return 0;s={name:"selecting",selectIndex:e};break;case"selecting":var c;if(u)return 0;if((null===i||void 0===i||!i.considerAllShapes)&&!a(n[e]))return 0;(0,d.getIndicesBetween)(null===(c=n[e-1])||void 0===c?void 0:c.index,n[e].index,s.selectIndex-e).forEach((function(i,a){var u=n[e+a+1];t.has(u)&&r.push(o(o({},u),{},{index:i}))})),s={name:"skipping"}}},l=u-1;l>-1;l--)c(l)}(e,n,i,p,r)}))}return p}function v(e,t){var n=e.getShapeGeometry(t),r=e.getShapePageTransform(t);return n&&r?r.applyToPoints(n.vertices):null}function g(e,t){var n=Array.from(t).map((function(t){var n=v(e,t);return n?{shape:t,vertices:n}:null})).filter(Boolean);return function(t){var r=v(e,t);return!!r&&n.some((function(e){return(0,p.polygonsIntersect)(e.vertices,r)}))}}},83889:function(e,t,n){"use strict";var r,o=n(50883).default,i=Object.defineProperty,a=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,c={};!function(e,t){for(var n in t)i(e,n,{get:t[n],enumerable:!0})}(c,{applyRotationToSnapshotShapes:function(){return g},getRotationSnapshot:function(){return v}}),e.exports=(r=c,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var c,l=o(u(t));try{var f=function(){var o=c.value;s.call(e,o)||o===n||i(e,o,{get:function(){return t[o]},enumerable:!(r=a(t,o))||r.enumerable})};for(l.s();!(c=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(i({},"__esModule",{value:!0}),r));var l=n(85191),f=n(30645),d=n(84906),p=n(63557),h=n(45650);function v(e){var t=e.editor,n=e.ids,r=(0,f.compact)(n.map((function(e){return t.getShape(e)}))),o=t.getShapesSharedRotation(n),i=t.getShapesRotatedPageBounds(n);if(!i)return null;var a=i.center.clone().rotWith(i.point,o);return{pageCenter:a,initialCursorAngle:a.angle(t.inputs.originPagePoint),initialShapesRotation:o,shapeSnapshots:r.map((function(e){return{shape:e,initialPagePoint:t.getShapePageTransform(e.id).point()}}))}}function g(e){var t=e.delta,n=e.editor,r=e.snapshot,o=e.stage,i=e.centerOverride,a=r.pageCenter,u=r.shapeSnapshots;n.updateShapes(u.map((function(e){var r=e.shape,o=e.initialPagePoint,u=(0,l.isShapeId)(r.parentId)?n.getShapePageTransform(r.parentId):d.Mat.Identity(),s=h.Vec.RotWith(o,null!==i&&void 0!==i?i:a,t),c=d.Mat.applyToPoint(d.Mat.Inverse(u),s),f=(0,p.canonicalizeRotation)(r.rotation+t);return{id:r.id,type:r.type,x:c.x,y:c.y,rotation:f}})));var s=[];u.forEach((function(e){var t,r=e.shape,i=n.getShape(r.id);if(i){var a=n.getShapeUtil(r);if("start"===o||"one-off"===o){var u,c=null===(u=a.onRotateStart)||void 0===u?void 0:u.call(a,r);c&&s.push(c)}var l=null===(t=a.onRotate)||void 0===t?void 0:t.call(a,r,i);if(l&&s.push(l),"end"===o||"one-off"===o){var f,d=null===(f=a.onRotateEnd)||void 0===f?void 0:f.call(a,r,i);d&&s.push(d)}}})),s.length>0&&n.updateShapes(s)}},24403:function(e,t,n){"use strict";var r,o=n(4633).default,i=n(29293).default,a=n(50883).default,u=Object.defineProperty,s=Object.getOwnPropertyDescriptor,c=Object.getOwnPropertyNames,l=Object.prototype.hasOwnProperty,f={};!function(e,t){for(var n in t)u(e,n,{get:t[n],enumerable:!0})}(f,{runtime:function(){return d},setRuntimeOverrides:function(){return p}}),e.exports=(r=f,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,i=a(c(t));try{var f=function(){var i=o.value;l.call(e,i)||i===n||u(e,i,{get:function(){return t[i]},enumerable:!(r=s(t,i))||r.enumerable})};for(i.s();!(o=i.n()).done;)f()}catch(d){i.e(d)}finally{i.f()}}return e}(u({},"__esModule",{value:!0}),r));var d={openWindow:function(e,t){window.open(e,t,"noopener noreferrer")},refreshPage:function(){window.location.reload()},hardReset:function(){return i(o().mark((function e(){var t,n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===(t=(n=window).__tldraw__hardReset)||void 0===t?void 0:t.call(n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))()}};function p(e){Object.assign(d,e)}},31769:function(e,t,n){"use strict";var r,o=n(85715).default,i=n(41132).default,a=n(4633).default,u=n(17383).default,s=n(34579).default,c=n(43693).default,l=n(29293).default,f=n(50883).default,d=Object.defineProperty,p=Object.getOwnPropertyDescriptor,h=Object.getOwnPropertyNames,v=Object.prototype.hasOwnProperty,g={};!function(e,t){for(var n in t)d(e,n,{get:t[n],enumerable:!0})}(g,{LocalIndexedDb:function(){return k},Table:function(){return w},getAllIndexDbNames:function(){return _}}),e.exports=(r=g,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,i=f(h(t));try{var a=function(){var i=o.value;v.call(e,i)||i===n||d(e,i,{get:function(){return t[i]},enumerable:!(r=p(t,i))||r.enumerable})};for(i.s();!(o=i.n()).done;)a()}catch(u){i.e(u)}finally{i.f()}}return e}(d({},"__esModule",{value:!0}),r));var y=n(30645),m=n(44272),b="TLDRAW_DB_NAME_INDEX_v2",w={Records:"records",Schema:"schema",SessionState:"session_state",Assets:"assets"};function S(e){return x.apply(this,arguments)}function x(){return(x=l(a().mark((function e(t){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return j(n="TLDRAW_DOCUMENT_v2"+t),e.next=4,(0,m.openDB)(n,4,{upgrade:function(e){e.objectStoreNames.contains(w.Records)||e.createObjectStore(w.Records),e.objectStoreNames.contains(w.Schema)||e.createObjectStore(w.Schema),e.objectStoreNames.contains(w.SessionState)||e.createObjectStore(w.SessionState),e.objectStoreNames.contains(w.Assets)||e.createObjectStore(w.Assets)}});case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function P(e){return O.apply(this,arguments)}function O(){return O=l(a().mark((function e(t){var n,r,i,u,s,c,d,p,h,v,g,y,b,x,P;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.indexedDB.databases){e.next=6;break}return e.next=3,window.indexedDB.databases();case 3:e.t0=e.sent.map((function(e){return e.name})),e.next=7;break;case 6:e.t0=_();case 7:if(n=e.t0,r="TLDRAW_ASSET_STORE_v1"+t,n.find((function(e){return e===r}))){e.next=12;break}return e.abrupt("return");case 12:return e.next=14,(0,m.openDB)(r,1,{upgrade:function(e){e.objectStoreNames.contains("assets")||e.createObjectStore("assets")}});case 14:if((i=e.sent).objectStoreNames.contains("assets")){e.next=17;break}return e.abrupt("return");case 17:return u=i.transaction(["assets"],"readonly"),s=u.objectStore("assets"),e.next=21,s.getAllKeys();case 21:return c=e.sent,e.next=24,Promise.all(c.map(function(){var e=l(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=t,e.next=3,s.get(t);case 3:return e.t1=e.sent,e.abrupt("return",[e.t0,e.t1]);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 24:return d=e.sent,e.next=27,u.done;case 27:return e.next=29,S(t);case 29:p=e.sent,h=p.transaction([w.Assets],"readwrite"),v=h.objectStore(w.Assets),g=f(d);try{for(g.s();!(y=g.n()).done;)b=o(y.value,2),x=b[0],P=b[1],v.put(P,x)}catch(O){g.e(O)}finally{g.f()}return e.next=36,h.done;case 36:return i.close(),p.close(),e.next=40,(0,m.deleteDB)(r);case 40:case"end":return e.stop()}}),e)}))),O.apply(this,arguments)}var k=function(){function e(t){u(this,e),c(this,"getDbPromise",void 0),c(this,"isClosed",!1),c(this,"pendingTransactionSet",new Set),e.connectedInstances.add(this),this.getDbPromise=l(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P(t);case 2:return e.next=4,S(t);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})))()}return s(e,[{key:"getDb",value:function(){return this.getDbPromise}},{key:"pending",value:function(){return Promise.allSettled([this.getDbPromise].concat(i(this.pendingTransactionSet))).then(y.noop)}},{key:"close",value:function(){var t=l(a().mark((function t(){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.isClosed){t.next=2;break}return t.abrupt("return");case 2:return this.isClosed=!0,t.next=5,this.pending();case 5:return t.next=7,this.getDb();case 7:t.sent.close(),e.connectedInstances.delete(this);case 9:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"tx",value:function(e,t,n){var r=this,o=l(a().mark((function o(){var i,u,s;return a().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return(0,y.assert)(!r.isClosed,"db is closed"),o.next=3,r.getDb();case 3:return i=o.sent,u=i.transaction(t,e),s=u.done.catch((function(e){if(!r.isClosed)throw e})),o.prev=6,o.next=9,n(u);case 9:return o.abrupt("return",o.sent);case 10:if(o.prev=10,r.isClosed){o.next=16;break}return o.next=14,s;case 14:o.next=17;break;case 16:u.abort();case 17:return o.finish(10);case 18:case"end":return o.stop()}}),o,null,[[6,,10,18]])})))();return this.pendingTransactionSet.add(o),o.finally((function(){return r.pendingTransactionSet.delete(o)})),o}},{key:"load",value:function(){var e=l(a().mark((function e(){var t,n=arguments;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=(n.length>0&&void 0!==n[0]?n[0]:{}).sessionId,e.next=3,this.tx("readonly",[w.Records,w.Schema,w.SessionState],function(){var e=l(a().mark((function e(n){var r,o,i,u,s,c,l,f;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=n.objectStore(w.Records),i=n.objectStore(w.Schema),u=n.objectStore(w.SessionState),!t){e.next=18;break}return e.next=6,u.get(t);case 6:if(e.t2=r=e.sent,e.t1=null===e.t2,e.t1){e.next=10;break}e.t1=void 0===r;case 10:if(!e.t1){e.next=14;break}e.t3=void 0,e.next=15;break;case 14:e.t3=r.snapshot;case 15:e.t0=e.t3,e.next=19;break;case 18:e.t0=null;case 19:if(s=e.t0){e.next=25;break}return e.next=23,u.getAll();case 23:l=e.sent,s=null===(c=l.sort((function(e,t){return e.updatedAt-t.updatedAt})).pop())||void 0===c?void 0:c.snapshot;case 25:return e.next=27,o.getAll();case 27:return e.t4=e.sent,e.next=30,i.get(w.Schema);case 30:return e.t5=e.sent,e.t6=s,f={records:e.t4,schema:e.t5,sessionStateSnapshot:e.t6},e.abrupt("return",f);case 34:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"storeChanges",value:function(){var e=l(a().mark((function e(t){var n,r,i,u;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.schema,r=t.changes,i=t.sessionId,u=t.sessionStateSnapshot,e.next=3,this.tx("readwrite",[w.Records,w.Schema,w.SessionState],function(){var e=l(a().mark((function e(t){var s,c,l,f,d,p,h,v,g,y,m,b,S,x,P;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s=t.objectStore(w.Records),c=t.objectStore(w.Schema),l=t.objectStore(w.SessionState),f=0,d=Object.entries(r.added);case 4:if(!(f<d.length)){e.next=11;break}return p=o(d[f],2),h=p[0],v=p[1],e.next=8,s.put(v,h);case 8:f++,e.next=4;break;case 11:g=0,y=Object.values(r.updated);case 12:if(!(g<y.length)){e.next=19;break}return m=o(y[g],2),m[0],b=m[1],e.next=16,s.put(b,b.id);case 16:g++,e.next=12;break;case 19:S=0,x=Object.keys(r.removed);case 20:if(!(S<x.length)){e.next=27;break}return P=x[S],e.next=24,s.delete(P);case 24:S++,e.next=20;break;case 27:c.put(n.serialize(),w.Schema),u&&i?l.put({snapshot:u,updatedAt:Date.now(),id:i},i):(u||i)&&console.error("sessionStateSnapshot and instanceId must be provided together");case 29:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"storeSnapshot",value:function(){var e=l(a().mark((function e(t){var n,r,i,u;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.schema,r=t.snapshot,i=t.sessionId,u=t.sessionStateSnapshot,e.next=3,this.tx("readwrite",[w.Records,w.Schema,w.SessionState],function(){var e=l(a().mark((function e(t){var s,c,l,f,d,p,h,v;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=t.objectStore(w.Records),c=t.objectStore(w.Schema),l=t.objectStore(w.SessionState),e.next=5,s.clear();case 5:f=0,d=Object.entries(r);case 6:if(!(f<d.length)){e.next=13;break}return p=o(d[f],2),h=p[0],v=p[1],e.next=10,s.put(v,h);case 10:f++,e.next=6;break;case 13:c.put(n.serialize(),w.Schema),u&&i?l.put({snapshot:u,updatedAt:Date.now(),id:i},i):(u||i)&&console.error("sessionStateSnapshot and instanceId must be provided together");case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"pruneSessions",value:function(){var e=l(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.tx("readwrite",[w.SessionState],function(){var e=l(a().mark((function e(t){var n,r,o,i,u,s;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.objectStore(w.SessionState),e.next=3,n.getAll();case 3:if(!((r=e.sent.sort((function(e,t){return e.updatedAt-t.updatedAt}))).length<10)){e.next=8;break}return e.next=7,t.done;case 7:return e.abrupt("return");case 8:o=r.slice(0,r.length-10),i=f(o),e.prev=10,i.s();case 12:if((u=i.n()).done){e.next=18;break}return s=u.value.id,e.next=16,n.delete(s);case 16:e.next=12;break;case 18:e.next=23;break;case 20:e.prev=20,e.t0=e.catch(10),i.e(e.t0);case 23:return e.prev=23,i.f(),e.finish(23);case 26:case"end":return e.stop()}}),e,null,[[10,20,23,26]])})));return function(t){return e.apply(this,arguments)}}());case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getAsset",value:function(){var e=l(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.tx("readonly",[w.Assets],function(){var e=l(a().mark((function e(n){var r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.objectStore(w.Assets),e.next=3,r.get(t);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"storeAsset",value:function(){var e=l(a().mark((function e(t,n){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.tx("readwrite",[w.Assets],function(){var e=l(a().mark((function e(r){var o;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=r.objectStore(w.Assets),e.next=3,o.put(n,t);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 2:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}])}();function _(){var e,t=null!==(e=JSON.parse((0,y.getFromLocalStorage)(b)||"[]"))&&void 0!==e?e:[];return Array.isArray(t)?t:[]}function j(e){var t=new Set(_());t.add(e),(0,y.setInLocalStorage)(b,JSON.stringify(i(t)))}c(k,"connectedInstances",new Set)},83508:function(e,t,n){"use strict";var r,o=n(4633).default,i=n(29293).default,a=n(17383).default,u=n(34579).default,s=n(43693).default,c=n(50883).default,l=Object.defineProperty,f=Object.getOwnPropertyDescriptor,d=Object.getOwnPropertyNames,p=Object.prototype.hasOwnProperty,h={};!function(e,t){for(var n in t)l(e,n,{get:t[n],enumerable:!0})}(h,{BroadcastChannelMock:function(){return x},TLLocalSyncClient:function(){return O}}),e.exports=(r=h,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,i=c(d(t));try{var a=function(){var i=o.value;p.call(e,i)||i===n||l(e,i,{get:function(){return t[i]},enumerable:!(r=f(t,i))||r.enumerable})};for(i.s();!(o=i.n()).done;)a()}catch(u){i.e(u)}finally{i.f()}}return e}(l({},"__esModule",{value:!0}),r));var v=n(81501),g=n(75881),y=n(30645),m=n(32511),b=n(31769),w=n(60584),S=Symbol("UPDATE_INSTANCE_STATE"),x=function(){return u((function e(t){a(this,e),s(this,"onmessage",void 0)}),[{key:"postMessage",value:function(e){}},{key:"close",value:function(){}}])}(),P="undefined"===typeof BroadcastChannel?x:BroadcastChannel,O=function(){return u((function e(t,n){var r=this,o=n.persistenceKey,i=n.sessionId,u=void 0===i?m.TAB_ID:i,c=n.onLoad,l=n.onLoadError,f=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new P("tldraw-tab-sync-".concat(o));a(this,e),s(this,"disposables",new Set),s(this,"diffQueue",[]),s(this,"didDispose",!1),s(this,"shouldDoFullDBWrite",!0),s(this,"isReloading",!1),s(this,"persistenceKey",void 0),s(this,"sessionId",void 0),s(this,"serializedSchema",void 0),s(this,"isDebugging",!1),s(this,"documentTypes",void 0),s(this,"$sessionStateSnapshot",void 0),s(this,"db",void 0),s(this,"initTime",Date.now()),s(this,"isPersisting",!1),s(this,"didLastWriteError",!1),s(this,"scheduledPersistTimeout",null),this.store=t,this.channel=f,"undefined"!==typeof window&&(window.tlsync=this),this.persistenceKey=o,this.sessionId=u,this.db=new b.LocalIndexedDb(o),this.disposables.add((function(){return r.db.close()})),this.serializedSchema=this.store.schema.serialize(),this.$sessionStateSnapshot=(0,m.createSessionStateSnapshotSignal)(this.store),this.disposables.add(t.listen((function(e){var t=e.changes;r.diffQueue.push(t),r.channel.postMessage({type:"diff",storeId:r.store.id,changes:t,schema:r.serializedSchema}),r.schedulePersist()}),{source:"user",scope:"document"})),this.disposables.add(t.listen((function(){r.diffQueue.push(S),r.schedulePersist()}),{scope:"session"})),this.connect(c,l),this.documentTypes=new Set(Object.values(this.store.schema.types).filter((function(e){return"document"===e.scope})).map((function(e){return e.typeName})))}),[{key:"debug",value:function(){var e;this.isDebugging&&(e=console).debug.apply(e,arguments)}},{key:"connect",value:function(){var e=i(o().mark((function e(t,n){var r,i,a,u,s,c,l,f=this;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.debug("connecting"),e.prev=1,e.next=4,this.db.load({sessionId:this.sessionId});case 4:r=e.sent,e.next=12;break;case 7:return e.prev=7,e.t0=e.catch(1),n(e.t0),(0,w.showCantReadFromIndexDbAlert)(),e.abrupt("return");case 12:if(this.debug("loaded data from store",r,"didDispose",this.didDispose),!this.didDispose){e.next=15;break}return e.abrupt("return");case 15:if(e.prev=15,!r){e.next=27;break}if(u=Object.fromEntries(r.records.map((function(e){return[e.id,e]}))),s=null!==(i=r.sessionStateSnapshot)&&void 0!==i?i:(0,m.extractSessionStateFromLegacySnapshot)(u),"error"!==(c=this.store.schema.migrateStoreSnapshot({store:u,schema:null!==(a=r.schema)&&void 0!==a?a:this.store.schema.serializeEarliestVersion()})).type){e.next=24;break}return console.error("failed to migrate store",c),n(new Error("Failed to migrate store: ".concat(c.reason))),e.abrupt("return");case 24:(l=Object.values(c.value).filter((function(e){return f.documentTypes.has(e.typeName)}))).length>0&&this.store.mergeRemoteChanges((function(){f.store.put(l,"initialize")})),s&&(0,m.loadSessionStateSnapshotIntoStore)(this.store,s);case 27:this.channel.onmessage=function(e){var t=e.data;f.debug("got message",t);var r,o,i=t,a=f.store.schema.getMigrationsSince(i.schema);return a.ok?a.value.length>0?(f.debug("telling them to reload"),f.channel.postMessage({type:"announce",schema:f.serializedSchema}),f.shouldDoFullDBWrite=!0,void f.persistIfNeeded()):void("diff"===i.type&&(f.debug("applying diff"),(0,v.transact)((function(){f.store.mergeRemoteChanges((function(){f.store.applyDiff(i.changes)}))})))):Date.now()-f.initTime<5e3?void n(new Error("Schema mismatch, please close other tabs and reload the page")):(f.debug("reloading"),f.isReloading=!0,void(null===(r=window)||void 0===r||null===(r=r.location)||void 0===r||null===(o=r.reload)||void 0===o||o.call(r)))},this.channel.postMessage({type:"announce",schema:this.serializedSchema}),this.disposables.add((function(){f.channel.close()})),t(this),e.next=40;break;case 33:if(e.prev=33,e.t1=e.catch(15),this.debug("error loading data from store",e.t1),!this.didDispose){e.next=38;break}return e.abrupt("return");case 38:return n(e.t1),e.abrupt("return");case 40:case"end":return e.stop()}}),e,this,[[1,7],[15,33]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"close",value:function(){this.debug("closing"),this.didDispose=!0,this.disposables.forEach((function(e){return e()}))}},{key:"schedulePersist",value:function(){var e=this;this.debug("schedulePersist",this.scheduledPersistTimeout),this.scheduledPersistTimeout||(this.scheduledPersistTimeout=setTimeout((function(){e.scheduledPersistTimeout=null,e.persistIfNeeded()}),this.didLastWriteError?1e4:350))}},{key:"persistIfNeeded",value:function(){this.debug("persistIfNeeded",{isPersisting:this.isPersisting,isReloading:this.isReloading,shouldDoFullDBWrite:this.shouldDoFullDBWrite,diffQueueLength:this.diffQueue.length,storeIsPossiblyCorrupt:this.store.isPossiblyCorrupted()}),this.scheduledPersistTimeout&&(clearTimeout(this.scheduledPersistTimeout),this.scheduledPersistTimeout=null),this.isPersisting||this.isReloading||this.store.isPossiblyCorrupted()||(this.shouldDoFullDBWrite||this.diffQueue.length>0)&&this.doPersist()}},{key:"doPersist",value:function(){var e=i(o().mark((function e(){var t,n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((0,y.assert)(!this.isPersisting,"persist already in progress"),!this.didDispose){e.next=3;break}return e.abrupt("return");case 3:if(this.isPersisting=!0,this.debug("doPersist start"),t=this.diffQueue,this.diffQueue=[],e.prev=7,!this.shouldDoFullDBWrite){e.next=14;break}return this.shouldDoFullDBWrite=!1,e.next=12,this.db.storeSnapshot({schema:this.store.schema,snapshot:this.store.serialize(),sessionId:this.sessionId,sessionStateSnapshot:this.$sessionStateSnapshot.get()});case 12:e.next=17;break;case 14:return n=(0,g.squashRecordDiffs)(t.filter((function(e){return e!==S}))),e.next=17,this.db.storeChanges({changes:n,schema:this.store.schema,sessionId:this.sessionId,sessionStateSnapshot:this.$sessionStateSnapshot.get()});case 17:this.didLastWriteError=!1,e.next=27;break;case 20:e.prev=20,e.t0=e.catch(7),this.shouldDoFullDBWrite=!0,this.didLastWriteError=!0,console.error("failed to store changes in indexed db",e.t0),(0,w.showCantWriteToIndexDbAlert)(),"undefined"!==typeof window&&window.location.reload();case 27:this.isPersisting=!1,this.debug("doPersist end"),this.schedulePersist();case 30:case"end":return e.stop()}}),e,this,[[7,20]])})));return function(){return e.apply(this,arguments)}}()}])}()},60584:function(e,t,n){"use strict";var r,o=n(50883).default,i=Object.defineProperty,a=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,c={};function l(){window.alert("Oops! We could not save changes to your browser's storage. We now need to reload the page and try again.\n\nKeep seeing this message?\n\u2022 If you're using tldraw in a private or \"incognito\" window, try loading tldraw in a regular window or in a different browser.\n\u2022 If your hard disk is full, try clearing up some space and then reload the page.")}function f(){window.alert("Oops! We could not access your browser's storage\u2014and the app won't work correctly without that. We now need to reload the page and try again.\n\nKeep seeing this message?\n\u2022 If you're using tldraw in a private or \"incognito\" window, try loading tldraw in a regular window or in a different browser.")}!function(e,t){for(var n in t)i(e,n,{get:t[n],enumerable:!0})}(c,{showCantReadFromIndexDbAlert:function(){return f},showCantWriteToIndexDbAlert:function(){return l}}),e.exports=(r=c,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var c,l=o(u(t));try{var f=function(){var o=c.value;s.call(e,o)||o===n||i(e,o,{get:function(){return t[o]},enumerable:!(r=a(t,o))||r.enumerable})};for(l.s();!(c=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(i({},"__esModule",{value:!0}),r))},84507:function(e,t,n){"use strict";var r,o=n(4633).default,i=n(29293).default,a=n(50883).default,u=Object.defineProperty,s=Object.getOwnPropertyDescriptor,c=Object.getOwnPropertyNames,l=Object.prototype.hasOwnProperty,f={};!function(e,t){for(var n in t)u(e,n,{get:t[n],enumerable:!0})}(f,{hardReset:function(){return v}}),e.exports=(r=f,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,i=a(c(t));try{var f=function(){var i=o.value;l.call(e,i)||i===n||u(e,i,{get:function(){return t[i]},enumerable:!(r=s(t,i))||r.enumerable})};for(i.s();!(o=i.n()).done;)f()}catch(d){i.e(d)}finally{i.f()}}return e}(u({},"__esModule",{value:!0}),r));var d=n(30645),p=n(44272),h=n(31769);function v(){return g.apply(this,arguments)}function g(){return g=i(o().mark((function e(){var t,n,r,i,u,s=arguments;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=(s.length>0&&void 0!==s[0]?s[0]:{}).shouldReload,n=void 0===t||t,(0,d.clearSessionStorage)(),r=a(h.LocalIndexedDb.connectedInstances),e.prev=3,r.s();case 5:if((i=r.n()).done){e.next=11;break}return u=i.value,e.next=9,u.close();case 9:e.next=5;break;case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(3),r.e(e.t0);case 16:return e.prev=16,r.f(),e.finish(16);case 19:return e.next=21,Promise.all((0,h.getAllIndexDbNames)().map((function(e){return(0,p.deleteDB)(e)})));case 21:(0,d.clearLocalStorage)(),n&&window.location.reload();case 23:case"end":return e.stop()}}),e,null,[[3,13,16,19]])}))),g.apply(this,arguments)}"undefined"!==typeof window&&(window.__tldraw__hardReset=v)},44246:function(e,t,n){"use strict";var r,o=n(50883).default,i=Object.defineProperty,a=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,c={};!function(e,t){for(var n in t)i(e,n,{get:t[n],enumerable:!0})}(c,{uniq:function(){return f}}),e.exports=(r=c,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var c,l=o(u(t));try{var f=function(){var o=c.value;s.call(e,o)||o===n||i(e,o,{get:function(){return t[o]},enumerable:!(r=a(t,o))||r.enumerable})};for(l.s();!(c=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(i({},"__esModule",{value:!0}),r));var l=n(30645);function f(e){return(0,l.uniq)(e)}},6196:function(e,t,n){"use strict";var r,o=n(50883).default,i=Object.defineProperty,a=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,c={};!function(e,t){for(var n in t)i(e,n,{get:t[n],enumerable:!0})}(c,{openWindow:function(){return f}}),e.exports=(r=c,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var c,l=o(u(t));try{var f=function(){var o=c.value;s.call(e,o)||o===n||i(e,o,{get:function(){return t[o]},enumerable:!(r=a(t,o))||r.enumerable})};for(l.s();!(c=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(i({},"__esModule",{value:!0}),r));var l=n(24403);function f(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"_blank";l.runtime.openWindow(e,t)}},59074:function(e,t,n){"use strict";var r,o=n(50883).default,i=Object.defineProperty,a=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,c={};!function(e,t){for(var n in t)i(e,n,{get:t[n],enumerable:!0})}(c,{watermarkDesktopSvg:function(){return l},watermarkMobileSvg:function(){return f},watermarkTrackSvg:function(){return d}}),e.exports=(r=c,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var c,l=o(u(t));try{var f=function(){var o=c.value;s.call(e,o)||o===n||i(e,o,{get:function(){return t[o]},enumerable:!(r=a(t,o))||r.enumerable})};for(l.s();!(c=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(i({},"__esModule",{value:!0}),r));var l='<svg xmlns="http://www.w3.org/2000/svg" width="3001" height="1000" fill="none"><path fill="#000" d="M590.656 300.449c0 49.706-40.294 90-90 90-49.705 0-90-40.294-90-90 0-49.705 40.295-90 90-90 49.706 0 90 40.295 90 90M569.431 719.011c-15.247 32.821-56.006 91.589-98.338 91.438-32.004-.115-38.642-30.904-17.414-50.856 17.381-16.337 28.246-48.075 31.995-72.719.415-2.728-1.556-5.197-4.272-5.679-39.666-7.04-70.746-40.877-70.746-83.417 0-48.23 38.983-87.329 87.07-87.329 39.936 0 70.172 22.237 83.369 52.397 18.839 43.055 7.117 115.733-11.664 156.165M2613.29 385.681V239.319c0-11.363 9.22-20.569 20.59-20.569h8.26c11.37 0 20.59 9.206 20.59 20.569v36.911c0 8.629 7 15.625 15.63 15.625h35.25c8.63 0 15.63-6.996 15.63-15.625v-36.911c0-11.363 9.22-20.569 20.59-20.569h8.17c11.37 0 20.59 9.206 20.59 20.569v146.362c0 11.363-9.22 20.569-20.59 20.569h-8.17c-11.37 0-20.59-9.206-20.59-20.569v-36.999c0-8.63-7-15.625-15.63-15.625h-35.25c-8.63 0-15.63 6.995-15.63 15.625v36.999c0 11.363-9.22 20.569-20.59 20.569h-8.26c-11.37 0-20.59-9.206-20.59-20.569M2391.97 239.319v146.362c0 11.348-9.16 20.569-20.49 20.569h-8.2c-11.33 0-20.49-9.221-20.49-20.569V239.319c0-11.348 9.16-20.569 20.49-20.569h8.2c11.33 0 20.49 9.221 20.49 20.569M2098.23 391.43l-42.69-146.361c-3.85-13.171 6.06-26.319 19.79-26.319h10.6c9.59 0 17.93 6.611 20.08 15.952l17.01 73.045c1.48 6.348 10.47 6.478 12.14.176l19.47-73.838c2.38-9.04 10.57-15.335 19.93-15.335h12.1c9.37 0 17.56 6.3 19.94 15.346l19.49 74.067c1.66 6.305 10.65 6.178 12.13-.171l17.09-73.294c2.15-9.339 10.49-15.948 20.08-15.948h10.53c13.72 0 23.63 13.141 19.79 26.31l-42.63 146.361c-2.56 8.789-10.63 14.829-19.79 14.829h-15.68c-9.12 0-17.16-5.98-19.76-14.709l-21.17-71.059c-1.77-5.948-10.19-5.957-11.97-.012l-21.33 71.071c-2.6 8.729-10.64 14.709-19.76 14.709h-15.59c-9.17 0-17.23-6.035-19.8-14.82M2443.23 218.75h118.59c11.38 0 20.62 9.195 20.62 20.557s-9.24 20.556-20.62 20.556h-24.79c-5.53 0-10 4.477-10 10v115.818c0 11.368-9.25 20.569-20.63 20.569h-7.65c-11.39 0-20.63-9.201-20.63-20.569V269.863c0-5.523-4.48-10-10-10h-24.89c-11.37 0-20.61-9.195-20.61-20.556s9.24-20.557 20.61-20.557M1174.15 218.75h24.64c8.35 0 15.88 5.042 19.04 12.764l34.61 83.942c2.13 5.161 9.44 5.155 11.56-.01l34.43-83.932a20.58 20.58 0 0 1 19.04-12.764h24.64c11.37 0 20.58 9.208 20.58 20.569v146.362c0 11.361-9.21 20.569-20.58 20.569h-7.09c-11.36 0-20.58-9.208-20.58-20.569l-.12-50.645c-.01-6.888-9.53-8.688-12.06-2.283l-23.46 59.332a20.57 20.57 0 0 1-19.14 13.009h-3.03a20.57 20.57 0 0 1-19.15-13.046l-23.47-59.68c-2.52-6.416-12.05-4.623-12.06 2.271l-.13 51.042c0 11.361-9.21 20.569-20.57 20.569h-7.1c-11.36 0-20.57-9.208-20.57-20.569V239.319c0-11.361 9.21-20.569 20.57-20.569"/><path fill="#000" fill-rule="evenodd" d="m1449.94 391.836 6.12-19.392a6.255 6.255 0 0 1 5.96-4.369l50.22-.061a6.24 6.24 0 0 1 5.96 4.348l6.23 19.486c2.71 8.581 10.71 14.402 19.74 14.402h9.34c14.13 0 24.15-13.791 19.61-27.151l-49.74-146.361c-2.85-8.37-10.74-13.988-19.61-13.988h-33.16c-8.87 0-16.77 5.618-19.61 13.988l-49.74 146.361c-4.54 13.36 5.48 27.151 19.61 27.151h9.32c9.04 0 17.04-5.827 19.75-14.414m31.1-98.858c1.85-5.807 10.08-5.796 11.91.016l8.83 27.916c1.28 4.028-1.73 8.134-5.96 8.134h-17.74c-4.23 0-7.24-4.119-5.95-8.151zM1681.81 406.25c18.91 0 35.39-3.686 49.36-11.168 13.97-7.544 24.73-18.394 32.24-32.489 7.56-14.105 11.29-30.866 11.29-50.182 0-19.256-3.73-35.957-11.29-50.004-7.57-14.094-18.35-24.912-32.32-32.397-13.91-7.545-30.4-11.26-49.37-11.26h-49.5c-11.38 0-20.63 9.201-20.63 20.569v146.362c0 11.368 9.25 20.569 20.63 20.569zm23.13-47.701c-6.62 3.215-14.85 4.886-24.79 4.886-10.49 0-19-8.507-19-19v-64.34c0-10.149 8.23-18.376 18.38-18.376 10.18 0 18.56 1.703 25.23 4.974 6.59 3.149 11.63 8.315 15.08 15.633 3.45 7.269 5.28 17.268 5.28 30.162 0 12.891-1.82 22.951-5.28 30.347-3.39 7.319-8.36 12.509-14.9 15.714" clip-rule="evenodd"/><path fill="#000" d="M1804.21 385.681V239.319c0-11.361 9.21-20.569 20.58-20.569h91.28c11.36 0 20.57 9.202 20.57 20.557s-9.21 20.556-20.57 20.556h-54.64a7.807 7.807 0 0 0-7.81 7.813v16.366a7.806 7.806 0 0 0 7.81 7.812h48.13c11.37 0 20.58 9.246 20.58 20.602s-9.21 20.601-20.58 20.601h-48.13a7.806 7.806 0 0 0-7.81 7.812v16.455a7.807 7.807 0 0 0 7.81 7.813h54.64c11.36 0 20.57 9.202 20.57 20.556s-9.21 20.557-20.57 20.557h-91.28c-11.37 0-20.58-9.208-20.58-20.569"/><path fill="#000" fill-rule="evenodd" d="M2875.5 68.75h-2750c-31.066 0-56.25 25.184-56.25 56.25v750c0 31.066 25.184 56.25 56.25 56.25h2750c31.07 0 56.25-25.184 56.25-56.25V125c0-31.066-25.18-56.25-56.25-56.25M125.5 0C56.464 0 .5 55.964.5 125v750c0 69.036 55.965 125 125 125h2750c69.04 0 125-55.964 125-125V125c0-69.036-55.96-125-125-125z" clip-rule="evenodd"/><path fill="#000" d="M2476.06 804.813c-10.54 0-19.82-6.947-22.81-17.068L2390.79 575.7c-4.49-15.248 6.92-30.534 22.8-30.534h27.75c11.1 0 20.72 7.686 23.18 18.52L2489 671.402c2.07 9.093 14.93 9.321 17.32.308l28.83-108.844c2.76-10.435 12.19-17.7 22.98-17.7h25.17c10.8 0 20.25 7.293 22.99 17.755l28.27 107.739c2.36 9.001 15.18 8.829 17.3-.232l25.01-106.888c2.51-10.763 12.1-18.374 23.14-18.374h27.87c15.88 0 27.29 15.286 22.8 30.534l-62.46 212.045a23.78 23.78 0 0 1-22.81 17.068h-32.12c-10.39 0-19.58-6.763-22.69-16.696l-32.08-102.694c-2.62-8.397-14.51-8.331-17.04.095l-30.74 102.346c-3.02 10.061-12.27 16.949-22.76 16.949zM1742.44 804.813h-75.81c-13.09 0-23.71-10.656-23.71-23.801V568.967c0-13.145 10.62-23.801 23.71-23.801h74.8c26.6 0 49.59 5.198 68.95 15.594 19.45 10.312 34.44 25.187 44.96 44.627 10.61 19.355 15.91 42.556 15.91 69.602q0 40.57-15.78 69.73c-10.53 19.355-25.43 34.231-44.71 44.627-19.28 10.311-42.05 15.467-68.32 15.467m-29.3-83.642c0 13.145 10.61 23.801 23.71 23.801h3.06c12.8 0 23.7-2.07 32.71-6.212 9.09-4.141 16-11.283 20.71-21.426q7.2-15.213 7.2-42.345 0-27.13-7.32-42.344c-4.8-10.143-11.87-17.285-21.22-21.426-9.26-4.142-20.63-6.212-34.1-6.212h-1.04c-13.1 0-23.71 10.656-23.71 23.801zM1460.86 804.813c-13.12 0-23.76-10.656-23.76-23.801V568.967c0-13.145 10.64-23.801 23.76-23.801h22.84c13.13 0 23.76 10.656 23.76 23.801v155.247c0 13.145 10.64 23.801 23.76 23.801h57.27c13.12 0 23.76 10.656 23.76 23.801v9.196c0 13.145-10.64 23.801-23.76 23.801zM1204.45 601.964c-13.13 0-23.77-10.656-23.77-23.801v-9.196c0-13.145 10.64-23.801 23.77-23.801h177.89c13.13 0 23.78 10.656 23.78 23.801v9.196c0 13.145-10.65 23.801-23.78 23.801h-39.38c-8.21 0-14.86 6.66-14.86 14.875v164.173c0 13.145-10.64 23.801-23.78 23.801h-21.85c-13.13 0-23.78-10.656-23.78-23.801V616.839c0-8.215-6.65-14.875-14.86-14.875z"/><path fill="#000" fill-rule="evenodd" d="M2223.05 787.891c-3.02 10.047-12.27 16.922-22.74 16.922h-25.43c-16.19 0-27.64-15.862-22.57-31.261l69.88-212.045c3.21-9.753 12.31-16.341 22.56-16.341h61.84c10.25 0 19.35 6.588 22.56 16.341l69.87 212.045c5.08 15.399-6.37 31.261-22.56 31.261h-25.43c-10.48 0-19.72-6.875-22.74-16.922l-6.7-22.2a14.84 14.84 0 0 0-14.21-10.576h-63.42c-6.55 0-12.32 4.296-14.22 10.576zm76.13-96.945-14.13-48.436c-2.46-8.451-14.36-8.602-17.04-.217l-15.46 48.436c-1.84 5.759 2.45 11.645 8.48 11.645h29.6c5.94 0 10.22-5.715 8.55-11.428" clip-rule="evenodd"/><path fill="#000" d="M1939.6 804.813c-13.13 0-23.77-10.656-23.77-23.801V568.967c0-13.145 10.64-23.801 23.77-23.801h88.13c19.24 0 36.08 3.508 50.51 10.523s25.65 17.115 33.67 30.3q12.03 19.779 12.03 47.416c0 18.595-4.14 34.273-12.41 47.036-7.64 11.913-18.18 21.101-31.63 27.564-16.98 8.159-36 11.104-54.7 11.104h-43.07c-76.56 0 4.08-135.84 4.08-84.706v7.996c0 12.117 9.81 21.941 21.91 21.941 8.12 0 16.3-.345 24.04-3.043 5.91-2.113 10.43-5.451 13.55-10.015 3.2-4.565 4.81-10.523 4.81-17.877 0-7.437-1.61-13.481-4.81-18.129-3.12-4.733-7.64-8.199-13.55-10.396-7.05-2.766-14.67-3.423-22.18-3.423-13.13 0-23.77 10.656-23.77 23.801v47.71c0 11.825 11.14 16.003 19.91 20.752 12.31 6.671 7.58 25.389-6.42 25.389-7.45 0-13.49 6.048-13.49 13.508v48.395c0 13.145-10.63 23.801-23.76 23.801zm134.89-106.758 5.41 9.95 33.51 61.622c8.62 15.86-2.84 35.186-20.87 35.186h-22.27c-8.74 0-16.77-4.798-20.92-12.496l-35.05-65.04a15.52 15.52 0 0 0-13.66-8.168c-42.24 0 40.62-82.154 73.85-21.054M931.652 0h68.748v1000h-68.748z"/></svg>',f='<svg xmlns="http://www.w3.org/2000/svg" width="400" height="1601" fill="none"><path fill="#000" d="M72 1319.8c0-10.73 7.071-20.18 17.372-23.22l215.823-63.62c15.519-4.57 31.078 7.05 31.078 23.22v28.26c0 11.31-7.824 21.1-18.85 23.61l-109.636 24.94c-9.254 2.1-9.487 15.2-.313 17.63l110.784 29.37a24.21 24.21 0 0 1 18.015 23.4v25.64c0 11-7.423 20.62-18.071 23.41l-109.659 28.79c-9.162 2.41-8.986 15.47.236 17.63l108.792 25.46c10.955 2.56 18.702 12.33 18.702 23.57v28.39c0 16.17-15.559 27.79-31.078 23.22l-215.823-63.62c-10.3-3.04-17.372-12.49-17.372-23.22v-32.72c0-10.59 6.883-19.95 16.994-23.11l104.523-32.67c8.547-2.67 8.479-14.79-.096-17.36l-104.17-31.3C79.01 1372.42 72 1363 72 1352.31zM72 572.638V495.43c0-13.336 10.846-24.147 24.225-24.147h215.823c13.379 0 24.225 10.811 24.225 24.147v76.179q0 40.645-15.872 70.228-15.743 29.712-45.422 45.79-29.55 16.206-70.843 16.206-41.292 0-70.971-16.078-29.55-16.077-45.422-45.532Q72 612.767 72 572.638m85.132-29.84c-13.379 0-24.225 10.81-24.225 24.146v3.122q0 19.55 6.323 33.313 6.323 13.89 21.807 21.094 15.485 7.332 43.099 7.331t43.1-7.46q15.484-7.33 21.807-21.608 6.323-14.15 6.323-34.728v-1.064c0-13.336-10.846-24.146-24.225-24.146zM72 285.858c0-13.363 10.846-24.197 24.225-24.197h215.823c13.379 0 24.225 10.834 24.225 24.197v23.27c0 13.364-10.846 24.197-24.225 24.197H154.035c-13.379 0-24.225 10.834-24.225 24.197v58.328c0 13.364-10.846 24.197-24.225 24.197h-9.36C82.845 440.047 72 429.214 72 415.85zM278.463 24.72c0-13.374 10.846-24.216 24.225-24.216h9.36c13.379 0 24.225 10.842 24.225 24.216v181.174c0 13.374-10.846 24.216-24.225 24.216h-9.36c-13.379 0-24.225-10.842-24.225-24.216v-40.108c0-8.359-6.779-15.135-15.141-15.135H96.225c-13.38 0-24.225-10.842-24.225-24.216v-22.256c0-13.374 10.846-24.216 24.225-24.216h167.097c8.362 0 15.141-6.776 15.141-15.135z"/><path fill="#000" fill-rule="evenodd" d="M89.224 1062.13C78.997 1059.04 72 1049.63 72 1038.96v-25.9c0-16.486 16.145-28.147 31.818-22.979l215.823 71.169a24.19 24.19 0 0 1 16.632 22.98v62.97c0 10.45-6.706 19.71-16.632 22.98l-215.823 71.17C88.145 1246.51 72 1234.86 72 1218.37v-25.9c0-10.67 6.997-20.08 17.224-23.17l22.595-6.81a15.13 15.13 0 0 0 10.765-14.48v-64.59a15.13 15.13 0 0 0-10.765-14.48zm98.672 77.53 49.299-14.39c8.601-2.51 8.755-14.62.22-17.35l-49.299-15.75c-5.861-1.88-11.852 2.49-11.852 8.64v30.14c0 6.05 5.817 10.41 11.632 8.71" clip-rule="evenodd"/><path fill="#000" d="M72 773.439c0-13.367 10.846-24.203 24.225-24.203h215.823c13.379 0 24.225 10.836 24.225 24.203v89.762q0 29.395-10.711 51.439-10.71 22.046-30.84 34.293t-48.261 12.248q-28.388 0-47.873-12.635-18.187-11.672-28.056-32.218c-8.303-17.289-11.301-36.661-11.301-55.705v-43.867c0-77.976 138.26 4.16 86.215 4.16h-8.138c-12.334 0-22.332 9.989-22.332 22.311 0 8.269.351 16.6 3.097 24.487q3.225 9.024 10.194 13.794 6.968 4.899 18.194 4.899 11.356 0 18.453-4.899 7.226-4.77 10.581-13.794c2.815-7.188 3.484-14.944 3.484-22.596 0-13.366-10.846-24.202-24.225-24.202h-48.56c-12.036 0-16.288 11.345-21.122 20.272-6.79 12.539-25.841 7.72-25.841-6.536 0-7.586-6.156-13.736-13.749-13.736H96.225C82.845 820.916 72 810.08 72 796.714zm108.66 137.378-10.128 5.511-62.72 34.131C91.67 959.243 72 947.569 72 929.205V906.52a24.2 24.2 0 0 1 12.719-21.299l66.199-35.696a15.82 15.82 0 0 0 8.313-13.921c0-43.012 83.618 41.371 21.429 75.213"/></svg>',d='<svg xmlns="http://www.w3.org/2000/svg" width="1" height="1"/>'},35057:function(e,t,n){"use strict";var r,o=n(50883).default,i=Object.defineProperty,a=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,c={};!function(e,t){for(var n in t)i(e,n,{get:t[n],enumerable:!0})}(c,{publishDates:function(){return f},version:function(){return l}}),e.exports=(r=c,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var c,l=o(u(t));try{var f=function(){var o=c.value;s.call(e,o)||o===n||i(e,o,{get:function(){return t[o]},enumerable:!(r=a(t,o))||r.enumerable})};for(l.s();!(c=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(i({},"__esModule",{value:!0}),r));var l="3.7.2",f={major:"2024-09-13T14:36:29.063Z",minor:"2025-01-07T15:59:09.453Z",patch:"2025-01-16T12:44:39.524Z"}},61267:function(e,t,n){"use strict";var r,o=n(50883).default,i=Object.defineProperty,a=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,c={};!function(e,t){for(var n in t)i(e,n,{get:t[n],enumerable:!0})}(c,{track:function(){return f.track},useAtom:function(){return d.useAtom},useComputed:function(){return p.useComputed},useQuickReactor:function(){return h.useQuickReactor},useReactor:function(){return v.useReactor},useStateTracking:function(){return g.useStateTracking},useValue:function(){return y.useValue}}),e.exports=(r=c,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var c,l=o(u(t));try{var f=function(){var o=c.value;s.call(e,o)||o===n||i(e,o,{get:function(){return t[o]},enumerable:!(r=a(t,o))||r.enumerable})};for(l.s();!(c=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(i({},"__esModule",{value:!0}),r));var l=n(30645),f=n(37012),d=n(3013),p=n(94495),h=n(9111),v=n(45440),g=n(37854),y=n(38111);(0,l.registerTldrawLibraryVersion)("@tldraw/state-react","3.7.2","cjs")},37012:function(e,t,n){"use strict";var r,o=n(50883).default,i=Object.defineProperty,a=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,c={};!function(e,t){for(var n in t)i(e,n,{get:t[n],enumerable:!0})}(c,{ProxyHandlers:function(){return d},ReactForwardRefSymbol:function(){return h},ReactMemoSymbol:function(){return p},track:function(){return v}}),e.exports=(r=c,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var c,l=o(u(t));try{var f=function(){var o=c.value;s.call(e,o)||o===n||i(e,o,{get:function(){return t[o]},enumerable:!(r=a(t,o))||r.enumerable})};for(l.s();!(c=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(i({},"__esModule",{value:!0}),r));var l=n(9950),f=n(37854),d={apply:function(e,t,n){var r,o;return(0,f.useStateTracking)(null!==(r=null!==(o=e.displayName)&&void 0!==o?o:e.name)&&void 0!==r?r:"tracked(???)",(function(){return e.apply(t,n)}))}},p=Symbol.for("react.memo"),h=Symbol.for("react.forward_ref");function v(e){var t=null,n=e.$$typeof;return n===p&&(t=(e=e.type).compare),n===h?(0,l.memo)((0,l.forwardRef)(new Proxy(e.render,d))):(0,l.memo)(new Proxy(e,d),t)}},3013:function(e,t,n){"use strict";var r,o=n(50883).default,i=Object.defineProperty,a=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,c={};!function(e,t){for(var n in t)i(e,n,{get:t[n],enumerable:!0})}(c,{useAtom:function(){return d}}),e.exports=(r=c,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var c,l=o(u(t));try{var f=function(){var o=c.value;s.call(e,o)||o===n||i(e,o,{get:function(){return t[o]},enumerable:!(r=a(t,o))||r.enumerable})};for(l.s();!(c=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(i({},"__esModule",{value:!0}),r));var l=n(81501),f=n(9950);function d(e,t,n){return(0,f.useState)((function(){var r="function"===typeof t?t():t;return(0,l.atom)("useAtom(".concat(e,")"),r,n)}))[0]}},94495:function(e,t,n){"use strict";var r,o=n(50883).default,i=Object.defineProperty,a=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,c={};!function(e,t){for(var n in t)i(e,n,{get:t[n],enumerable:!0})}(c,{useComputed:function(){return d}}),e.exports=(r=c,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var c,l=o(u(t));try{var f=function(){var o=c.value;s.call(e,o)||o===n||i(e,o,{get:function(){return t[o]},enumerable:!(r=a(t,o))||r.enumerable})};for(l.s();!(c=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(i({},"__esModule",{value:!0}),r));var l=n(81501),f=n(9950);function d(){var e=arguments[0],t=arguments[1],n=3===arguments.length?void 0:arguments[2],r=3===arguments.length?arguments[2]:arguments[3];return(0,f.useMemo)((function(){return(0,l.computed)("useComputed(".concat(e,")"),t,n)}),r)}},9111:function(e,t,n){"use strict";var r,o=n(50883).default,i=Object.defineProperty,a=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,c={};!function(e,t){for(var n in t)i(e,n,{get:t[n],enumerable:!0})}(c,{useQuickReactor:function(){return d}}),e.exports=(r=c,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var c,l=o(u(t));try{var f=function(){var o=c.value;s.call(e,o)||o===n||i(e,o,{get:function(){return t[o]},enumerable:!(r=a(t,o))||r.enumerable})};for(l.s();!(c=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(i({},"__esModule",{value:!0}),r));var l=n(81501),f=n(9950);function d(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:l.EMPTY_ARRAY;(0,f.useEffect)((function(){var n=new l.EffectScheduler(e,t);return n.attach(),n.execute(),function(){n.detach()}}),n)}},45440:function(e,t,n){"use strict";var r,o=n(50883).default,i=Object.defineProperty,a=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,c={};!function(e,t){for(var n in t)i(e,n,{get:t[n],enumerable:!0})}(c,{useReactor:function(){return d}}),e.exports=(r=c,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var c,l=o(u(t));try{var f=function(){var o=c.value;s.call(e,o)||o===n||i(e,o,{get:function(){return t[o]},enumerable:!(r=a(t,o))||r.enumerable})};for(l.s();!(c=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(i({},"__esModule",{value:!0}),r));var l=n(81501),f=n(9950);function d(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=(0,f.useRef)(-1),o=(0,f.useMemo)((function(){return new l.EffectScheduler(e,t,{scheduleEffect:function(e){var t=requestAnimationFrame(e);return r.current=t,t}})}),n);(0,f.useEffect)((function(){return o.attach(),o.execute(),function(){o.detach(),cancelAnimationFrame(r.current)}}),[o])}},37854:function(e,t,n){"use strict";var r,o=n(41132).default,i=n(85715).default,a=n(50883).default,u=Object.create,s=Object.defineProperty,c=Object.getOwnPropertyDescriptor,l=Object.getOwnPropertyNames,f=Object.getPrototypeOf,d=Object.prototype.hasOwnProperty,p=function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,i=a(l(t));try{var u=function(){var i=o.value;d.call(e,i)||i===n||s(e,i,{get:function(){return t[i]},enumerable:!(r=c(t,i))||r.enumerable})};for(i.s();!(o=i.n()).done;)u()}catch(f){i.e(f)}finally{i.f()}}return e},h={};!function(e,t){for(var n in t)s(e,n,{get:t[n],enumerable:!0})}(h,{useStateTracking:function(){return y}}),e.exports=(r=h,p(s({},"__esModule",{value:!0}),r));var v=n(81501),g=function(e,t,n){return n=null!=e?u(f(e)):{},p(!t&&e&&e.__esModule?n:s(n,"default",{value:e,enumerable:!0}),e)}(n(9950));function y(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=g.default.useRef(t);r.current=t;var a=g.default.useMemo((function(){var t=null,n=new v.EffectScheduler("useStateTracking(".concat(e,")"),(function(){var e;return null===(e=r.current)||void 0===e?void 0:e.call(r)}),{scheduleEffect:function(){var e;null===(e=t)||void 0===e||e()}});return[n,function(e){return t=e,function(){t=null}},function(){return n.scheduleCount}]}),[e].concat(o(n))),u=i(a,3),s=u[0],c=u[1],l=u[2];return g.default.useSyncExternalStore(c,l,l),g.default.useEffect((function(){return s.attach(),s.maybeScheduleEffect(),function(){s.detach()}}),[s]),s.execute()}},38111:function(e,t,n){"use strict";var r,o=n(50883).default,i=Object.defineProperty,a=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,c={};!function(e,t){for(var n in t)i(e,n,{get:t[n],enumerable:!0})}(c,{useValue:function(){return d}}),e.exports=(r=c,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var c,l=o(u(t));try{var f=function(){var o=c.value;s.call(e,o)||o===n||i(e,o,{get:function(){return t[o]},enumerable:!(r=a(t,o))||r.enumerable})};for(l.s();!(c=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(i({},"__esModule",{value:!0}),r));var l=n(81501),f=n(9950);function d(){var e=arguments,t=3===e.length?e[2]:[e[0]],n=3===e.length?e[0]:"useValue(".concat(e[0].name,")"),r=(0,f.useRef)(!0);r.current=!0;var o=(0,f.useMemo)((function(){return 1===e.length?e[0]:(0,l.computed)(n,(function(){if(r.current)return e[1]();try{return e[1]()}catch(t){return{}}}))}),t);try{var i=(0,f.useMemo)((function(){return{subscribe:function(e){return(0,l.react)("useValue(".concat(n,")"),(function(){o.get(),e()}))},getSnapshot:function(){return o.get()}}}),[o]),a=i.subscribe,u=i.getSnapshot;return(0,f.useSyncExternalStore)(a,u,u)}finally{r.current=!1}}},81501:function(e,t,n){"use strict";var r,o=n(50883).default,i=Object.defineProperty,a=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,c={};!function(e,t){for(var n in t)i(e,n,{get:t[n],enumerable:!0})}(c,{ArraySet:function(){return d.ArraySet},EMPTY_ARRAY:function(){return y.EMPTY_ARRAY},EffectScheduler:function(){return v.EffectScheduler},RESET_VALUE:function(){return w.RESET_VALUE},UNINITIALIZED:function(){return h.UNINITIALIZED},atom:function(){return p.atom},computed:function(){return h.computed},getComputedInstance:function(){return h.getComputedInstance},isAtom:function(){return p.isAtom},isSignal:function(){return m.isSignal},isUninitialized:function(){return h.isUninitialized},react:function(){return v.react},reactor:function(){return v.reactor},transact:function(){return b.transact},transaction:function(){return b.transaction},unsafe__withoutCapture:function(){return g.unsafe__withoutCapture},whyAmIRunning:function(){return g.whyAmIRunning},withDiff:function(){return h.withDiff}}),e.exports=(r=c,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var c,l=o(u(t));try{var f=function(){var o=c.value;s.call(e,o)||o===n||i(e,o,{get:function(){return t[o]},enumerable:!(r=a(t,o))||r.enumerable})};for(l.s();!(c=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(i({},"__esModule",{value:!0}),r));var l=n(30645),f=n(98256),d=n(19726),p=n(62688),h=n(33670),v=n(28719),g=n(88275),y=n(98256),m=n(84733),b=n(15288),w=n(41068);if(1!==(0,f.singleton)("apiVersion",(function(){return 1})))throw new Error("You have multiple incompatible versions of @tldraw/state in your app. Please deduplicate the package.");(0,l.registerTldrawLibraryVersion)("@tldraw/state","3.7.2","cjs")},19726:function(e,t,n){"use strict";var r,o=n(17383).default,i=n(34579).default,a=n(43693).default,u=n(50883).default,s=Object.defineProperty,c=Object.getOwnPropertyDescriptor,l=Object.getOwnPropertyNames,f=Object.prototype.hasOwnProperty,d={};!function(e,t){for(var n in t)s(e,n,{get:t[n],enumerable:!0})}(d,{ARRAY_SIZE_THRESHOLD:function(){return p},ArraySet:function(){return h}}),e.exports=(r=d,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,i=u(l(t));try{var a=function(){var i=o.value;f.call(e,i)||i===n||s(e,i,{get:function(){return t[i]},enumerable:!(r=c(t,i))||r.enumerable})};for(i.s();!(o=i.n()).done;)a()}catch(d){i.e(d)}finally{i.f()}}return e}(s({},"__esModule",{value:!0}),r));var p=8,h=function(){return i((function e(){o(this,e),a(this,"arraySize",0),a(this,"array",Array(p)),a(this,"set",null)}),[{key:"isEmpty",get:function(){if(this.array)return 0===this.arraySize;if(this.set)return 0===this.set.size;throw new Error("no set or array")}},{key:"add",value:function(e){if(this.array)return-1===this.array.indexOf(e)&&(this.arraySize<p?(this.array[this.arraySize]=e,this.arraySize++,!0):(this.set=new Set(this.array),this.array=null,this.set.add(e),!0));if(this.set)return!this.set.has(e)&&(this.set.add(e),!0);throw new Error("no set or array")}},{key:"remove",value:function(e){if(this.array){var t=this.array.indexOf(e);return-1!==t&&(this.array[t]=void 0,this.arraySize--,t!==this.arraySize&&(this.array[t]=this.array[this.arraySize],this.array[this.arraySize]=void 0),!0)}if(this.set)return!!this.set.has(e)&&(this.set.delete(e),!0);throw new Error("no set or array")}},{key:"visit",value:function(e){if(this.array)for(var t=0;t<this.arraySize;t++){var n=this.array[t];"undefined"!==typeof n&&e(n)}else{if(!this.set)throw new Error("no set or array");this.set.forEach(e)}}},{key:"has",value:function(e){return this.array?-1!==this.array.indexOf(e):this.set.has(e)}},{key:"clear",value:function(){this.set?this.set.clear():(this.arraySize=0,this.array=[])}},{key:"size",value:function(){return this.set?this.set.size:this.arraySize}}])}()},62688:function(e,t,n){"use strict";var r,o=n(17383).default,i=n(34579).default,a=n(43693).default,u=n(50883).default,s=Object.defineProperty,c=Object.getOwnPropertyDescriptor,l=Object.getOwnPropertyNames,f=Object.prototype.hasOwnProperty,d={};!function(e,t){for(var n in t)s(e,n,{get:t[n],enumerable:!0})}(d,{_Atom:function(){return w},atom:function(){return S},isAtom:function(){return x}}),e.exports=(r=d,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,i=u(l(t));try{var a=function(){var i=o.value;f.call(e,i)||i===n||s(e,i,{get:function(){return t[i]},enumerable:!(r=c(t,i))||r.enumerable})};for(i.s();!(o=i.n()).done;)a()}catch(d){i.e(d)}finally{i.f()}}return e}(s({},"__esModule",{value:!0}),r));var p=n(19726),h=n(2471),v=n(88275),g=n(98256),y=n(15288),m=n(41068),b=function(){return i((function e(t,n,r){var i;o(this,e),a(this,"isEqual",void 0),a(this,"computeDiff",void 0),a(this,"lastChangedEpoch",(0,y.getGlobalEpoch)()),a(this,"children",new p.ArraySet),a(this,"historyBuffer",void 0),this.name=t,this.current=n,this.isEqual=null!==(i=null===r||void 0===r?void 0:r.isEqual)&&void 0!==i?i:null,r&&(r.historyLength&&(this.historyBuffer=new h.HistoryBuffer(r.historyLength)),this.computeDiff=r.computeDiff)}),[{key:"__unsafe__getWithoutCapture",value:function(e){return this.current}},{key:"get",value:function(){return(0,v.maybeCaptureParent)(this),this.current}},{key:"set",value:function(e,t){var n,r,o,i;if(null!==(n=null===(r=this.isEqual)||void 0===r?void 0:r.call(this,this.current,e))&&void 0!==n?n:(0,g.equals)(this.current,e))return this.current;((0,y.advanceGlobalEpoch)(),this.historyBuffer)&&this.historyBuffer.pushEntry(this.lastChangedEpoch,(0,y.getGlobalEpoch)(),null!==(o=null!==t&&void 0!==t?t:null===(i=this.computeDiff)||void 0===i?void 0:i.call(this,this.current,e,this.lastChangedEpoch,(0,y.getGlobalEpoch)()))&&void 0!==o?o:m.RESET_VALUE);this.lastChangedEpoch=(0,y.getGlobalEpoch)();var a=this.current;return this.current=e,(0,y.atomDidChange)(this,a),e}},{key:"update",value:function(e){return this.set(e(this.current))}},{key:"getDiffSince",value:function(e){var t,n;return(0,v.maybeCaptureParent)(this),e>=this.lastChangedEpoch?g.EMPTY_ARRAY:null!==(t=null===(n=this.historyBuffer)||void 0===n?void 0:n.getChangesSince(e))&&void 0!==t?t:m.RESET_VALUE}}])}(),w=(0,g.singleton)("Atom",(function(){return b}));function S(e,t,n){return new w(e,t,n)}function x(e){return e instanceof w}},33670:function(e,t,n){"use strict";var r,o=n(85715).default,i=n(43693).default,a=n(34579).default,u=n(17383).default,s=n(50883).default,c=Object.defineProperty,l=Object.getOwnPropertyDescriptor,f=Object.getOwnPropertyNames,d=Object.prototype.hasOwnProperty,p={};!function(e,t){for(var n in t)c(e,n,{get:t[n],enumerable:!0})}(p,{UNINITIALIZED:function(){return P},WithDiff:function(){return k},_Computed:function(){return I},computed:function(){return M},getComputedInstance:function(){return C},isComputed:function(){return A},isUninitialized:function(){return O},withDiff:function(){return _}}),e.exports=(r=p,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,i=s(f(t));try{var a=function(){var i=o.value;d.call(e,i)||i===n||c(e,i,{get:function(){return t[i]},enumerable:!(r=l(t,i))||r.enumerable})};for(i.s();!(o=i.n()).done;)a()}catch(u){i.e(u)}finally{i.f()}}return e}(c({},"__esModule",{value:!0}),r));var h=n(30645),v=n(19726),g=n(2471),y=n(88275),m=n(18588),b=n(98256),w=n(15288),S=n(41068),x=n(51352),P=Symbol.for("com.tldraw.state/UNINITIALIZED");function O(e){return e===P}var k=(0,b.singleton)("WithDiff",(function(){return a((function e(t,n){u(this,e),this.value=t,this.diff=n}))}));function _(e,t){return new k(e,t)}var j=function(){return a((function e(t,n,r){var o;u(this,e),i(this,"lastChangedEpoch",m.GLOBAL_START_EPOCH),i(this,"lastTraversedEpoch",m.GLOBAL_START_EPOCH),i(this,"lastCheckedEpoch",m.GLOBAL_START_EPOCH),i(this,"parentSet",new v.ArraySet),i(this,"parents",[]),i(this,"parentEpochs",[]),i(this,"children",new v.ArraySet),i(this,"historyBuffer",void 0),i(this,"state",P),i(this,"error",null),i(this,"computeDiff",void 0),i(this,"isEqual",void 0),this.name=t,this.derive=n,null!==r&&void 0!==r&&r.historyLength&&(this.historyBuffer=new g.HistoryBuffer(r.historyLength)),this.computeDiff=null===r||void 0===r?void 0:r.computeDiff,this.isEqual=null!==(o=null===r||void 0===r?void 0:r.isEqual)&&void 0!==o?o:b.equals}),[{key:"isActivelyListening",get:function(){return!this.children.isEmpty}},{key:"__unsafe__getWithoutCapture",value:function(e){var t=this.lastChangedEpoch===m.GLOBAL_START_EPOCH,n=(0,w.getGlobalEpoch)();if(!t&&(this.lastCheckedEpoch===n||this.isActivelyListening&&(0,w.getIsReacting)()&&this.lastTraversedEpoch<(0,w.getReactionEpoch)()||!(0,b.haveParentsChanged)(this))){if(this.lastCheckedEpoch=n,this.error){if(e)return this.state;throw this.error.thrownValue}return this.state}try{(0,y.startCapturingParents)(this);var r=this.derive(this.state,this.lastCheckedEpoch),o=r instanceof k?r.value:r,i=this.state===P;if(i||!this.isEqual(o,this.state)){if(this.historyBuffer&&!i){var a,u,s=r instanceof k?r.diff:void 0;this.historyBuffer.pushEntry(this.lastChangedEpoch,(0,w.getGlobalEpoch)(),null!==(a=null!==s&&void 0!==s?s:null===(u=this.computeDiff)||void 0===u?void 0:u.call(this,this.state,o,this.lastCheckedEpoch,(0,w.getGlobalEpoch)()))&&void 0!==a?a:S.RESET_VALUE)}this.lastChangedEpoch=(0,w.getGlobalEpoch)(),this.state=o}return this.error=null,this.lastCheckedEpoch=(0,w.getGlobalEpoch)(),this.state}catch(c){if(this.state!==P&&(this.state=P,this.lastChangedEpoch=(0,w.getGlobalEpoch)()),this.lastCheckedEpoch=(0,w.getGlobalEpoch)(),this.historyBuffer&&this.historyBuffer.clear(),this.error={thrownValue:c},!e)throw c;return this.state}finally{(0,y.stopCapturingParents)()}}},{key:"get",value:function(){try{return this.__unsafe__getWithoutCapture()}finally{(0,y.maybeCaptureParent)(this)}}},{key:"getDiffSince",value:function(e){var t,n;return this.__unsafe__getWithoutCapture(!0),(0,y.maybeCaptureParent)(this),e>=this.lastChangedEpoch?b.EMPTY_ARRAY:null!==(t=null===(n=this.historyBuffer)||void 0===n?void 0:n.getChangesSince(e))&&void 0!==t?t:S.RESET_VALUE}}])}(),I=(0,b.singleton)("Computed",(function(){return j}));function T(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;if(2===t.length){var n=o(t,2);return function(e,t,n){(0,h.assert)("method"===n.kind,"@computed can only be used on methods");var r=Symbol.for("__@tldraw/state__computed__"+String(n.name)),o=function(){var o=this[r];return o||(o=new I(String(n.name),t.bind(this),e),Object.defineProperty(this,r,{enumerable:!1,configurable:!1,writable:!1,value:o})),o.get()};return o[E]=!0,o}(e,n[0],n[1])}var r=o(t,3),i=r[0],a=r[1],u=r[2];return u.get?((0,x.logComputedGetterWarning)(),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0,r=n.get,o=Symbol.for("__@tldraw/state__computed__"+t);return n.get=function(){var n=this[o];return n||(n=new I(t,r.bind(this),e),Object.defineProperty(this,o,{enumerable:!1,configurable:!1,writable:!1,value:n})),n.get()},n}(e,i,a,u)):function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0,r=n.value,o=Symbol.for("__@tldraw/state__computed__"+t);return n.value=function(){var n=this[o];return n||(n=new I(t,r.bind(this),e),Object.defineProperty(this,o,{enumerable:!1,configurable:!1,writable:!1,value:n})),n.get()},n.value[E]=!0,n}(e,i,a,u)}var E="@@__isComputedMethod__@@";function C(e,t){var n=Symbol.for("__@tldraw/state__computed__"+t.toString()),r=e[n];if(!r){var o=e[t];"function"===typeof o&&o[E]&&o.call(e),r=e[n]}return r}function M(){if(1===arguments.length){var e=arguments[0];return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return T(e,n)}}return"string"===typeof arguments[0]?new I(arguments[0],arguments[1],arguments[2]):T(void 0,arguments)}function A(e){return e&&e instanceof I}},28719:function(e,t,n){"use strict";var r,o=n(17383).default,i=n(34579).default,a=n(43693).default,u=n(50883).default,s=Object.defineProperty,c=Object.getOwnPropertyDescriptor,l=Object.getOwnPropertyNames,f=Object.prototype.hasOwnProperty,d={};!function(e,t){for(var n in t)s(e,n,{get:t[n],enumerable:!0})}(d,{EffectScheduler:function(){return b},react:function(){return w},reactor:function(){return S}}),e.exports=(r=d,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,i=u(l(t));try{var a=function(){var i=o.value;f.call(e,i)||i===n||s(e,i,{get:function(){return t[i]},enumerable:!(r=c(t,i))||r.enumerable})};for(i.s();!(o=i.n()).done;)a()}catch(d){i.e(d)}finally{i.f()}}return e}(s({},"__esModule",{value:!0}),r));var p=n(19726),h=n(88275),v=n(18588),g=n(98256),y=n(15288),m=function(){return i((function e(t,n,r){var i=this;o(this,e),a(this,"_isActivelyListening",!1),a(this,"lastTraversedEpoch",v.GLOBAL_START_EPOCH),a(this,"lastReactedEpoch",v.GLOBAL_START_EPOCH),a(this,"_scheduleCount",0),a(this,"parentSet",new p.ArraySet),a(this,"parentEpochs",[]),a(this,"parents",[]),a(this,"_scheduleEffect",void 0),a(this,"maybeExecute",(function(){i._isActivelyListening&&i.execute()})),this.name=t,this.runEffect=n,this._scheduleEffect=null===r||void 0===r?void 0:r.scheduleEffect}),[{key:"isActivelyListening",get:function(){return this._isActivelyListening}},{key:"scheduleCount",get:function(){return this._scheduleCount}},{key:"maybeScheduleEffect",value:function(){this._isActivelyListening&&this.lastReactedEpoch!==(0,y.getGlobalEpoch)()&&(!this.parents.length||(0,g.haveParentsChanged)(this)?this.scheduleEffect():this.lastReactedEpoch=(0,y.getGlobalEpoch)())}},{key:"scheduleEffect",value:function(){this._scheduleCount++,this._scheduleEffect?this._scheduleEffect(this.maybeExecute):this.execute()}},{key:"attach",value:function(){this._isActivelyListening=!0;for(var e=0,t=this.parents.length;e<t;e++)(0,g.attach)(this.parents[e],this)}},{key:"detach",value:function(){this._isActivelyListening=!1;for(var e=0,t=this.parents.length;e<t;e++)(0,g.detach)(this.parents[e],this)}},{key:"execute",value:function(){try{(0,h.startCapturingParents)(this);var e=(0,y.getGlobalEpoch)(),t=this.runEffect(this.lastReactedEpoch);return this.lastReactedEpoch=e,t}finally{(0,h.stopCapturingParents)()}}}])}(),b=(0,g.singleton)("EffectScheduler",(function(){return m}));function w(e,t,n){var r=new b(e,t,n);return r.attach(),r.scheduleEffect(),function(){r.detach()}}function S(e,t,n){var r=new b(e,t,n);return{scheduler:r,start:function(e){var t,n=null!==(t=null===e||void 0===e?void 0:e.force)&&void 0!==t&&t;r.attach(),n?r.scheduleEffect():r.maybeScheduleEffect()},stop:function(){r.detach()}}}},2471:function(e,t,n){"use strict";var r,o=n(85715).default,i=n(17383).default,a=n(34579).default,u=n(43693).default,s=n(50883).default,c=Object.defineProperty,l=Object.getOwnPropertyDescriptor,f=Object.getOwnPropertyNames,d=Object.prototype.hasOwnProperty,p={};!function(e,t){for(var n in t)c(e,n,{get:t[n],enumerable:!0})}(p,{HistoryBuffer:function(){return v}}),e.exports=(r=p,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,i=s(f(t));try{var a=function(){var i=o.value;d.call(e,i)||i===n||c(e,i,{get:function(){return t[i]},enumerable:!(r=l(t,i))||r.enumerable})};for(i.s();!(o=i.n()).done;)a()}catch(u){i.e(u)}finally{i.f()}}return e}(c({},"__esModule",{value:!0}),r));var h=n(41068),v=function(){return a((function e(t){i(this,e),u(this,"index",0),u(this,"buffer",void 0),this.capacity=t,this.buffer=new Array(t)}),[{key:"pushEntry",value:function(e,t,n){void 0!==n&&(n!==h.RESET_VALUE?(this.buffer[this.index]=[e,t,n],this.index=(this.index+1)%this.capacity):this.clear())}},{key:"clear",value:function(){this.index=0,this.buffer.fill(void 0)}},{key:"getChangesSince",value:function(e){for(var t=this.index,n=this.capacity,r=this.buffer,i=0;i<n;i++){var a=(t-1+n-i)%n,u=r[a];if(!u)return h.RESET_VALUE;var s=o(u,2),c=s[0],l=s[1];if(0===i&&e>=l)return[];if(c<=e&&e<l){for(var f=i+1,d=new Array(f),p=0;p<f;p++)d[p]=r[(a+p)%n][2];return d}}return h.RESET_VALUE}}])}()},88275:function(e,t,n){"use strict";var r,o=n(34579).default,i=n(17383).default,a=n(43693).default,u=n(50883).default,s=Object.defineProperty,c=Object.getOwnPropertyDescriptor,l=Object.getOwnPropertyNames,f=Object.prototype.hasOwnProperty,d={};!function(e,t){for(var n in t)s(e,n,{get:t[n],enumerable:!0})}(d,{maybeCaptureParent:function(){return b},startCapturingParents:function(){return y},stopCapturingParents:function(){return m},unsafe__withoutCapture:function(){return g},whyAmIRunning:function(){return w}}),e.exports=(r=d,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,i=u(l(t));try{var a=function(){var i=o.value;f.call(e,i)||i===n||s(e,i,{get:function(){return t[i]},enumerable:!(r=c(t,i))||r.enumerable})};for(i.s();!(o=i.n()).done;)a()}catch(d){i.e(d)}finally{i.f()}}return e}(s({},"__esModule",{value:!0}),r));var p=n(98256),h=o((function e(t,n){i(this,e),a(this,"offset",0),a(this,"maybeRemoved",void 0),this.below=t,this.child=n})),v=(0,p.singleton)("capture",(function(){return{stack:null}}));function g(e){var t=v.stack;v.stack=null;try{return e()}finally{v.stack=t}}function y(e){v.stack=new h(v.stack,e),e.parentSet.clear()}function m(){var e=v.stack;if(v.stack=e.below,e.offset<e.child.parents.length){for(var t=e.offset;t<e.child.parents.length;t++){var n=e.child.parents[t];e.child.parentSet.has(n)||(0,p.detach)(n,e.child)}e.child.parents.length=e.offset,e.child.parentEpochs.length=e.offset}if(e.maybeRemoved)for(var r=0;r<e.maybeRemoved.length;r++){var o=e.maybeRemoved[r];e.child.parentSet.has(o)||(0,p.detach)(o,e.child)}}function b(e){if(v.stack){if(v.stack.child.parentSet.has(e))return;if(v.stack.child.parentSet.add(e),v.stack.child.isActivelyListening&&(0,p.attach)(e,v.stack.child),v.stack.offset<v.stack.child.parents.length){var t=v.stack.child.parents[v.stack.offset];t!==e&&(v.stack.maybeRemoved?v.stack.maybeRemoved.push(t):v.stack.maybeRemoved=[t])}v.stack.child.parents[v.stack.offset]=e,v.stack.child.parentEpochs[v.stack.offset]=e.lastChangedEpoch,v.stack.offset++}}function w(){var e,t=null===(e=v.stack)||void 0===e?void 0:e.child;if(!t)throw new Error("whyAmIRunning() called outside of a reactive context");for(var n=[],r=0;r<t.parents.length;r++){var o=t.parents[r];o.lastChangedEpoch>t.parentEpochs[r]&&n.push(o)}if(0===n.length)console.log(t.name,"is running but none of the parents changed");else{console.log(t.name,"is running because:");var i,a=u(n);try{for(a.s();!(i=a.n()).done;){var s=i.value;console.log("\t",s.name,"changed =>",s.__unsafe__getWithoutCapture(!0))}}catch(c){a.e(c)}finally{a.f()}}}},18588:function(e,t,n){"use strict";var r,o=n(50883).default,i=Object.defineProperty,a=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,c={};!function(e,t){for(var n in t)i(e,n,{get:t[n],enumerable:!0})}(c,{GLOBAL_START_EPOCH:function(){return l}}),e.exports=(r=c,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var c,l=o(u(t));try{var f=function(){var o=c.value;s.call(e,o)||o===n||i(e,o,{get:function(){return t[o]},enumerable:!(r=a(t,o))||r.enumerable})};for(l.s();!(c=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(i({},"__esModule",{value:!0}),r));var l=-1},98256:function(e,t,n){"use strict";var r,o=n(50883).default,i=Object.defineProperty,a=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,c={};function l(e){return e&&"object"===typeof e&&"parents"in e}function f(e){for(var t=0,n=e.parents.length;t<n;t++)if(e.parents[t].__unsafe__getWithoutCapture(!0),e.parents[t].lastChangedEpoch!==e.parentEpochs[t])return!0;return!1}function d(e,t){if(e.children.remove(t)&&e.children.isEmpty&&l(e))for(var n=0,r=e.parents.length;n<r;n++)d(e.parents[n],e)}function p(e,t){if(e.children.add(t)&&l(e))for(var n=0,r=e.parents.length;n<r;n++)p(e.parents[n],e)}function h(e,t){return e===t||Object.is(e,t)||Boolean(e&&t&&"function"===typeof e.equals&&e.equals(t))}function v(e,t){var n,r=Symbol.for("com.tldraw.state/".concat(e)),o=globalThis;return null!==(n=o[r])&&void 0!==n||(o[r]=t()),o[r]}!function(e,t){for(var n in t)i(e,n,{get:t[n],enumerable:!0})}(c,{EMPTY_ARRAY:function(){return g},attach:function(){return p},detach:function(){return d},equals:function(){return h},haveParentsChanged:function(){return f},singleton:function(){return v}}),e.exports=(r=c,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var c,l=o(u(t));try{var f=function(){var o=c.value;s.call(e,o)||o===n||i(e,o,{get:function(){return t[o]},enumerable:!(r=a(t,o))||r.enumerable})};for(l.s();!(c=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(i({},"__esModule",{value:!0}),r));var g=v("empty_array",(function(){return Object.freeze([])}))},84733:function(e,t,n){"use strict";var r,o=n(50883).default,i=Object.defineProperty,a=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,c={};!function(e,t){for(var n in t)i(e,n,{get:t[n],enumerable:!0})}(c,{isSignal:function(){return d}}),e.exports=(r=c,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var c,l=o(u(t));try{var f=function(){var o=c.value;s.call(e,o)||o===n||i(e,o,{get:function(){return t[o]},enumerable:!(r=a(t,o))||r.enumerable})};for(l.s();!(c=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(i({},"__esModule",{value:!0}),r));var l=n(62688),f=n(33670);function d(e){return e instanceof l._Atom||e instanceof f._Computed}},15288:function(e,t,n){"use strict";var r,o=n(17383).default,i=n(34579).default,a=n(43693).default,u=n(50883).default,s=Object.defineProperty,c=Object.getOwnPropertyDescriptor,l=Object.getOwnPropertyNames,f=Object.prototype.hasOwnProperty,d={};!function(e,t){for(var n in t)s(e,n,{get:t[n],enumerable:!0})}(d,{advanceGlobalEpoch:function(){return k},atomDidChange:function(){return P},getGlobalEpoch:function(){return b},getIsReacting:function(){return w},getReactionEpoch:function(){return m},transact:function(){return j},transaction:function(){return _}}),e.exports=(r=d,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,i=u(l(t));try{var a=function(){var i=o.value;f.call(e,i)||i===n||s(e,i,{get:function(){return t[i]},enumerable:!(r=c(t,i))||r.enumerable})};for(i.s();!(o=i.n()).done;)a()}catch(d){i.e(d)}finally{i.f()}}return e}(s({},"__esModule",{value:!0}),r));var p=n(28719),h=n(18588),v=n(98256),g=function(){return i((function e(t){o(this,e),a(this,"initialAtomValues",new Map),this.parent=t}),[{key:"isRoot",get:function(){return null===this.parent}},{key:"commit",value:function(){var e=this;if(y.globalIsReacting){var t,n=u(this.initialAtomValues.keys());try{for(n.s();!(t=n.n()).done;){O(t.value)}}catch(r){n.e(r)}finally{n.f()}}else this.isRoot?x(this.initialAtomValues.keys()):this.initialAtomValues.forEach((function(t,n){e.parent.initialAtomValues.has(n)||e.parent.initialAtomValues.set(n,t)}))}},{key:"abort",value:function(){y.globalEpoch++,this.initialAtomValues.forEach((function(e,t){var n;t.set(e),null===(n=t.historyBuffer)||void 0===n||n.clear()})),this.commit()}}])}(),y=(0,v.singleton)("transactions",(function(){return{globalEpoch:h.GLOBAL_START_EPOCH+1,globalIsReacting:!1,currentTransaction:null,cleanupReactors:null,reactionEpoch:h.GLOBAL_START_EPOCH+1}}));function m(){return y.reactionEpoch}function b(){return y.globalEpoch}function w(){return y.globalIsReacting}function S(e,t){t.lastTraversedEpoch!==y.globalEpoch&&(t.lastTraversedEpoch=y.globalEpoch,t instanceof p.EffectScheduler?e.add(t):t.children.visit((function(t){return S(e,t)})))}function x(e){if(y.globalIsReacting)throw new Error("flushChanges cannot be called during a reaction");var t=y.currentTransaction;try{y.currentTransaction=null,y.globalIsReacting=!0,y.reactionEpoch=y.globalEpoch;var n,r=new Set,o=u(e);try{for(o.s();!(n=o.n()).done;){n.value.children.visit((function(e){return S(r,e)}))}}catch(p){o.e(p)}finally{o.f()}var i,a=u(r);try{for(a.s();!(i=a.n()).done;){i.value.maybeScheduleEffect()}}catch(p){a.e(p)}finally{a.f()}for(var s=0;null!==(c=y.cleanupReactors)&&void 0!==c&&c.size;){var c;if(s++>1e3)throw new Error("Reaction update depth limit exceeded");var l=y.cleanupReactors;y.cleanupReactors=null;var f,d=u(l);try{for(d.s();!(f=d.n()).done;){f.value.maybeScheduleEffect()}}catch(p){d.e(p)}finally{d.f()}}}finally{y.cleanupReactors=null,y.globalIsReacting=!1,y.currentTransaction=t}}function P(e,t){y.currentTransaction?y.currentTransaction.initialAtomValues.has(e)||y.currentTransaction.initialAtomValues.set(e,t):y.globalIsReacting?O(e):x([e])}function O(e){var t,n=null!==(t=y.cleanupReactors)&&void 0!==t?t:y.cleanupReactors=new Set;e.children.visit((function(e){return S(n,e)}))}function k(){y.globalEpoch++}function _(e){var t=new g(y.currentTransaction);y.currentTransaction=t;try{var n=void 0,r=!1;try{n=e((function(){return r=!0}))}catch(o){throw t.abort(),o}return r?t.abort():t.commit(),n}finally{y.currentTransaction=y.currentTransaction.parent}}function j(e){return y.currentTransaction?e():_(e)}},41068:function(e,t,n){"use strict";var r,o=n(50883).default,i=Object.defineProperty,a=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,c={};!function(e,t){for(var n in t)i(e,n,{get:t[n],enumerable:!0})}(c,{RESET_VALUE:function(){return l}}),e.exports=(r=c,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var c,l=o(u(t));try{var f=function(){var o=c.value;s.call(e,o)||o===n||i(e,o,{get:function(){return t[o]},enumerable:!(r=a(t,o))||r.enumerable})};for(l.s();!(c=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(i({},"__esModule",{value:!0}),r));var l=Symbol.for("com.tldraw.state/RESET_VALUE")},51352:function(e,t,n){"use strict";var r,o=n(50883).default,i=Object.defineProperty,a=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,c={};!function(e,t){for(var n in t)i(e,n,{get:t[n],enumerable:!0})}(c,{logComputedGetterWarning:function(){return f}}),e.exports=(r=c,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var c,l=o(u(t));try{var f=function(){var o=c.value;s.call(e,o)||o===n||i(e,o,{get:function(){return t[o]},enumerable:!(r=a(t,o))||r.enumerable})};for(l.s();!(c=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(i({},"__esModule",{value:!0}),r));var l=!1;function f(){l||(l=!0,console.warn("Using `@computed` as a decorator for getters is deprecated and will be removed in the near future. Please refactor to use `@computed` as a decorator for methods.\n\n// Before\n@computed\nget foo() {\n\treturn 'foo'\n}\n\n// After\n@computed\ngetFoo() {\n\treturn 'foo'\n}\n"))}},75881:function(e,t,n){"use strict";var r,o=n(50883).default,i=Object.defineProperty,a=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,c={};!function(e,t){for(var n in t)i(e,n,{get:t[n],enumerable:!0})}(c,{IncrementalSetConstructor:function(){return f.IncrementalSetConstructor},MigrationFailureReason:function(){return b.MigrationFailureReason},RecordType:function(){return d.RecordType},Store:function(){return h.Store},StoreQueries:function(){return v.StoreQueries},StoreSchema:function(){return g.StoreSchema},StoreSideEffects:function(){return y.StoreSideEffects},assertIdType:function(){return d.assertIdType},createComputedCache:function(){return h.createComputedCache},createEmptyRecordsDiff:function(){return p.createEmptyRecordsDiff},createMigrationIds:function(){return b.createMigrationIds},createMigrationSequence:function(){return b.createMigrationSequence},createRecordMigrationSequence:function(){return b.createRecordMigrationSequence},createRecordType:function(){return d.createRecordType},defineMigrations:function(){return b.defineMigrations},devFreeze:function(){return m.devFreeze},isRecordsDiffEmpty:function(){return p.isRecordsDiffEmpty},parseMigrationId:function(){return b.parseMigrationId},reverseRecordsDiff:function(){return p.reverseRecordsDiff},squashRecordDiffs:function(){return p.squashRecordDiffs},squashRecordDiffsMutable:function(){return p.squashRecordDiffsMutable}}),e.exports=(r=c,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var c,l=o(u(t));try{var f=function(){var o=c.value;s.call(e,o)||o===n||i(e,o,{get:function(){return t[o]},enumerable:!(r=a(t,o))||r.enumerable})};for(l.s();!(c=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(i({},"__esModule",{value:!0}),r));var l=n(30645),f=n(96041),d=n(76532),p=n(70568),h=n(72248),v=n(64174),g=n(44427),y=n(8313),m=n(12593),b=n(19312);(0,l.registerTldrawLibraryVersion)("@tldraw/store","3.7.2","cjs")},96041:function(e,t,n){"use strict";var r,o=n(17383).default,i=n(34579).default,a=n(43693).default,u=n(50883).default,s=Object.defineProperty,c=Object.getOwnPropertyDescriptor,l=Object.getOwnPropertyNames,f=Object.prototype.hasOwnProperty,d={};!function(e,t){for(var n in t)s(e,n,{get:t[n],enumerable:!0})}(d,{IncrementalSetConstructor:function(){return p}}),e.exports=(r=d,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,i=u(l(t));try{var a=function(){var i=o.value;f.call(e,i)||i===n||s(e,i,{get:function(){return t[i]},enumerable:!(r=c(t,i))||r.enumerable})};for(i.s();!(o=i.n()).done;)a()}catch(d){i.e(d)}finally{i.f()}}return e}(s({},"__esModule",{value:!0}),r));var p=function(){return i((function e(t){o(this,e),a(this,"nextValue",void 0),a(this,"diff",void 0),this.previousValue=t}),[{key:"get",value:function(){var e,t,n,r,o=null!==(e=null===(t=this.diff)||void 0===t||null===(t=t.removed)||void 0===t?void 0:t.size)&&void 0!==e?e:0,i=null!==(n=null===(r=this.diff)||void 0===r||null===(r=r.added)||void 0===r?void 0:r.size)&&void 0!==n?n:0;if(0!==o||0!==i)return{value:this.nextValue,diff:this.diff}}},{key:"_add",value:function(e,t){var n,r,o,i,a;(null!==(n=this.nextValue)&&void 0!==n||(this.nextValue=new Set(this.previousValue)),this.nextValue.add(e),null!==(r=this.diff)&&void 0!==r||(this.diff={}),t)?null===(o=this.diff.removed)||void 0===o||o.delete(e):(null!==(a=(i=this.diff).added)&&void 0!==a||(i.added=new Set),this.diff.added.add(e))}},{key:"add",value:function(e){var t,n=this.previousValue.has(e);if(n){var r;if(!(null===(r=this.diff)||void 0===r||null===(r=r.removed)||void 0===r?void 0:r.has(e)))return;return this._add(e,n)}(null===(t=this.nextValue)||void 0===t?void 0:t.has(e))||this._add(e,n)}},{key:"_remove",value:function(e,t){var n,r,o,i,a;(null!==(n=this.nextValue)&&void 0!==n||(this.nextValue=new Set(this.previousValue)),this.nextValue.delete(e),null!==(r=this.diff)&&void 0!==r||(this.diff={}),t)?(null!==(i=(o=this.diff).removed)&&void 0!==i||(o.removed=new Set),this.diff.removed.add(e)):null===(a=this.diff.added)||void 0===a||a.delete(e)}},{key:"remove",value:function(e){var t,n=this.previousValue.has(e);if(!n){var r;if(!(null===(r=this.diff)||void 0===r||null===(r=r.added)||void 0===r?void 0:r.has(e)))return;return this._remove(e,n)}(null===(t=this.diff)||void 0===t||null===(t=t.removed)||void 0===t?void 0:t.has(e))||this._remove(e,n)}}])}()},76532:function(e,t,n){"use strict";var r,o=n(12897).default,i=n(85715).default,a=n(17383).default,u=n(34579).default,s=n(43693).default,c=n(50883).default,l=Object.defineProperty,f=Object.getOwnPropertyDescriptor,d=Object.getOwnPropertyNames,p=Object.prototype.hasOwnProperty,h={};!function(e,t){for(var n in t)l(e,n,{get:t[n],enumerable:!0})}(h,{RecordType:function(){return g},assertIdType:function(){return m},createRecordType:function(){return y}}),e.exports=(r=h,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,i=c(d(t));try{var a=function(){var i=o.value;p.call(e,i)||i===n||l(e,i,{get:function(){return t[i]},enumerable:!(r=f(t,i))||r.enumerable})};for(i.s();!(o=i.n()).done;)a()}catch(u){i.e(u)}finally{i.f()}}return e}(l({},"__esModule",{value:!0}),r));var v=n(30645),g=function(){function e(t,n){var r,o;a(this,e),s(this,"createDefaultProperties",void 0),s(this,"validator",void 0),s(this,"ephemeralKeys",void 0),s(this,"ephemeralKeySet",void 0),s(this,"scope",void 0),this.typeName=t,this.createDefaultProperties=n.createDefaultProperties,this.validator=null!==(r=n.validator)&&void 0!==r?r:{validate:function(e){return e}},this.scope=null!==(o=n.scope)&&void 0!==o?o:"document",this.ephemeralKeys=n.ephemeralKeys;var u=new Set;if(n.ephemeralKeys){var l,f=c((0,v.objectMapEntries)(n.ephemeralKeys));try{for(f.s();!(l=f.n()).done;){var d=i(l.value,2),p=d[0];d[1]&&u.add(p)}}catch(h){f.e(h)}finally{f.f()}}this.ephemeralKeySet=u}return u(e,[{key:"create",value:function(e){for(var t=o(o({},this.createDefaultProperties()),{},{id:this.createId()}),n=0,r=Object.entries(e);n<r.length;n++){var a=i(r[n],2),u=a[0],s=a[1];void 0!==s&&(t[u]=s)}return t.typeName=this.typeName,t}},{key:"clone",value:function(e){return o(o({},(0,v.structuredClone)(e)),{},{id:this.createId()})}},{key:"createId",value:function(e){return this.typeName+":"+(null!==e&&void 0!==e?e:(0,v.uniqueId)())}},{key:"createCustomId",value:function(e){return this.typeName+":"+e}},{key:"parseId",value:function(e){if(!this.isId(e))throw new Error('ID "'.concat(e,'" is not a valid ID for type "').concat(this.typeName,'"'));return e.slice(this.typeName.length+1)}},{key:"isInstance",value:function(e){return(null===e||void 0===e?void 0:e.typeName)===this.typeName}},{key:"isId",value:function(e){if(!e)return!1;for(var t=0;t<this.typeName.length;t++)if(e[t]!==this.typeName[t])return!1;return":"===e[this.typeName.length]}},{key:"withDefaultProperties",value:function(t){return new e(this.typeName,{createDefaultProperties:t,validator:this.validator,scope:this.scope,ephemeralKeys:this.ephemeralKeys})}},{key:"validate",value:function(e,t){return t&&this.validator.validateUsingKnownGoodVersion?this.validator.validateUsingKnownGoodVersion(t,e):this.validator.validate(e)}}])}();function y(e,t){return new g(e,{createDefaultProperties:function(){return{}},validator:t.validator,scope:t.scope,ephemeralKeys:t.ephemeralKeys})}function m(e,t){if(!e||!t.isId(e))throw new Error("string ".concat(JSON.stringify(e)," is not a valid ").concat(t.typeName," id"))}},70568:function(e,t,n){"use strict";var r,o=n(85715).default,i=n(50883).default,a=Object.defineProperty,u=Object.getOwnPropertyDescriptor,s=Object.getOwnPropertyNames,c=Object.prototype.hasOwnProperty,l={};!function(e,t){for(var n in t)a(e,n,{get:t[n],enumerable:!0})}(l,{createEmptyRecordsDiff:function(){return d},isRecordsDiffEmpty:function(){return h},reverseRecordsDiff:function(){return p},squashRecordDiffs:function(){return v},squashRecordDiffsMutable:function(){return g}}),e.exports=(r=l,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,l=i(s(t));try{var f=function(){var i=o.value;c.call(e,i)||i===n||a(e,i,{get:function(){return t[i]},enumerable:!(r=u(t,i))||r.enumerable})};for(l.s();!(o=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(a({},"__esModule",{value:!0}),r));var f=n(30645);function d(){return{added:{},updated:{},removed:{}}}function p(e){for(var t={added:e.removed,removed:e.added,updated:{}},n=0,r=Object.values(e.updated);n<r.length;n++){var i=o(r[n],2),a=i[0],u=i[1];t.updated[a.id]=[u,a]}return t}function h(e){return 0===Object.keys(e.added).length&&0===Object.keys(e.updated).length&&0===Object.keys(e.removed).length}function v(e){var t={added:{},removed:{},updated:{}};return g(t,e),t}function g(e,t){var n,r=i(t);try{for(r.s();!(n=r.n()).done;){var a,u=n.value,s=i((0,f.objectMapEntries)(u.added));try{for(s.s();!(a=s.n()).done;){var c=o(a.value,2),l=c[0],d=c[1];if(e.removed[l]){var p=e.removed[l];delete e.removed[l],p!==d&&(e.updated[l]=[p,d])}else e.added[l]=d}}catch(k){s.e(k)}finally{s.f()}var h,v=i((0,f.objectMapEntries)(u.updated));try{for(v.s();!(h=v.n()).done;){var g=o(h.value,2),y=g[0],m=o(g[1],2),b=(m[0],m[1]);e.added[y]?(e.added[y]=b,delete e.updated[y],delete e.removed[y]):e.updated[y]?(e.updated[y]=[e.updated[y][0],b],delete e.removed[y]):(e.updated[y]=u.updated[y],delete e.removed[y])}}catch(k){v.e(k)}finally{v.f()}var w,S=i((0,f.objectMapEntries)(u.removed));try{for(S.s();!(w=S.n()).done;){var x=o(w.value,2),P=x[0],O=x[1];e.added[P]?delete e.added[P]:e.updated[P]?(e.removed[P]=e.updated[P][0],delete e.updated[P]):e.removed[P]=O}}catch(k){S.e(k)}finally{S.f()}}}catch(k){r.e(k)}finally{r.f()}}},72248:function(e,t,n){"use strict";var r,o=n(12897).default,i=n(85715).default,a=n(17383).default,u=n(34579).default,s=n(43693).default,c=n(50883).default,l=Object.defineProperty,f=Object.getOwnPropertyDescriptor,d=Object.getOwnPropertyNames,p=Object.prototype.hasOwnProperty,h={};!function(e,t){for(var n in t)l(e,n,{get:t[n],enumerable:!0})}(h,{Store:function(){return S},createComputedCache:function(){return P}}),e.exports=(r=h,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,i=c(d(t));try{var a=function(){var i=o.value;p.call(e,i)||i===n||l(e,i,{get:function(){return t[i]},enumerable:!(r=f(t,i))||r.enumerable})};for(i.s();!(o=i.n()).done;)a()}catch(u){i.e(u)}finally{i.f()}}return e}(l({},"__esModule",{value:!0}),r));var v=n(81501),g=n(30645),y=n(70568),m=n(64174),b=n(8313),w=n(12593),S=function(){return u((function e(t){var n=this;a(this,e),s(this,"id",void 0),s(this,"atoms",(0,v.atom)("store_atoms",{})),s(this,"history",(0,v.atom)("history",0,{historyLength:1e3})),s(this,"query",new m.StoreQueries(this.atoms,this.history)),s(this,"listeners",new Set),s(this,"historyAccumulator",new x),s(this,"historyReactor",void 0),s(this,"schema",void 0),s(this,"props",void 0),s(this,"scopedTypes",void 0),s(this,"sideEffects",new b.StoreSideEffects(this)),s(this,"isMergingRemoteChanges",!1),s(this,"_integrityChecker",void 0),s(this,"_isPossiblyCorrupted",!1),s(this,"pendingAfterEvents",null),s(this,"_isInAtomicOp",!1);var r=t.initialData,o=t.schema,u=t.id;this.id=null!==u&&void 0!==u?u:(0,g.uniqueId)(),this.schema=o,this.props=t.props,r&&this.atoms.set((0,g.objectMapFromEntries)((0,g.objectMapEntries)(r).map((function(e){var t=i(e,2),r=t[0],o=t[1];return[r,(0,v.atom)("atom:"+r,(0,w.devFreeze)(n.schema.validateRecord(n,o,"initialize",null)))]})))),this.historyReactor=(0,v.reactor)("Store.historyReactor",(function(){n.history.get(),n._flushHistory()}),{scheduleEffect:function(e){return n.cancelHistoryReactor=(0,g.throttleToNextFrame)(e)}}),this.scopedTypes={document:new Set((0,g.objectMapValues)(this.schema.types).filter((function(e){return"document"===e.scope})).map((function(e){return e.typeName}))),session:new Set((0,g.objectMapValues)(this.schema.types).filter((function(e){return"session"===e.scope})).map((function(e){return e.typeName}))),presence:new Set((0,g.objectMapValues)(this.schema.types).filter((function(e){return"presence"===e.scope})).map((function(e){return e.typeName})))}}),[{key:"cancelHistoryReactor",value:function(){}},{key:"_flushHistory",value:function(){if(this.historyAccumulator.hasChanges()){var e,t=this.historyAccumulator.flush(),n=c(t);try{for(n.s();!(e=n.n()).done;){var r,o=e.value,i=o.changes,a=o.source,u=null,s=null,l=null,f=c(this.listeners);try{for(f.s();!(r=f.n()).done;){var d=r.value,p=d.onHistory,h=d.filters;if("all"===h.source||h.source===a)if("all"!==h.scope)if("document"===h.scope){var v;if(null!==(v=s)&&void 0!==v||(s=this.filterChangesByScope(i,"document")),!s)continue;p({changes:s,source:a})}else if("session"===h.scope){var g;if(null!==(g=u)&&void 0!==g||(u=this.filterChangesByScope(i,"session")),!u)continue;p({changes:u,source:a})}else{var y;if(null!==(y=l)&&void 0!==y||(l=this.filterChangesByScope(i,"presence")),!l)continue;p({changes:l,source:a})}else p({changes:i,source:a})}}catch(m){f.e(m)}finally{f.f()}}}catch(m){n.e(m)}finally{n.f()}}}},{key:"dispose",value:function(){this.cancelHistoryReactor()}},{key:"filterChangesByScope",value:function(e,t){var n=this,r={added:(0,g.filterEntries)(e.added,(function(e,r){return n.scopedTypes[t].has(r.typeName)})),updated:(0,g.filterEntries)(e.updated,(function(e,r){return n.scopedTypes[t].has(r[1].typeName)})),removed:(0,g.filterEntries)(e.removed,(function(e,r){return n.scopedTypes[t].has(r.typeName)}))};return 0===Object.keys(r.added).length&&0===Object.keys(r.updated).length&&0===Object.keys(r.removed).length?null:r}},{key:"updateHistory",value:function(e){this.historyAccumulator.add({changes:e,source:this.isMergingRemoteChanges?"remote":"user"}),0===this.listeners.size&&this.historyAccumulator.clear(),this.history.set(this.history.get()+1,e)}},{key:"validate",value:function(e){var t=this;this.allRecords().forEach((function(n){return t.schema.validateRecord(t,n,e,null)}))}},{key:"put",value:function(e,t){var n=this;this.atomic((function(){for(var r,i={},a={},u=n.atoms.__unsafe__getWithoutCapture(),s=null,c=!1,l=n.isMergingRemoteChanges?"remote":"user",f=0,d=e.length;f<d;f++){var p,h=(null!==(p=s)&&void 0!==p?p:u)[(r=e[f]).id];if(h){var g=h.__unsafe__getWithoutCapture();if(r=n.sideEffects.handleBeforeChange(g,r,l),n.schema.validateRecord(n,r,null!==t&&void 0!==t?t:"updateRecord",g)===g)continue;h.set((0,w.devFreeze)(r)),c=!0;var y=h.__unsafe__getWithoutCapture();i[r.id]=[g,y],n.addDiffForAfterEvent(g,y)}else r=n.sideEffects.handleBeforeCreate(r,l),c=!0,a[(r=n.schema.validateRecord(n,r,null!==t&&void 0!==t?t:"createRecord",null)).id]=r,n.addDiffForAfterEvent(null,r),s||(s=o({},u)),s[r.id]=(0,v.atom)("atom:"+r.id,r)}s&&n.atoms.set(s),c&&n.updateHistory({added:a,updated:i,removed:{}})}))}},{key:"remove",value:function(e){var t=this;this.atomic((function(){var n=new Set,r=t.isMergingRemoteChanges?"remote":"user";if(t.sideEffects.isEnabled()){var i,a=c(e);try{for(a.s();!(i=a.n()).done;){var u=i.value,s=t.atoms.__unsafe__getWithoutCapture()[u];s&&(!1===t.sideEffects.handleBeforeDelete(s.get(),r)&&n.add(u))}}catch(f){a.e(f)}finally{a.f()}}var l=void 0;t.atoms.update((function(r){var i,a,u=void 0,s=c(e);try{for(s.s();!(a=s.n()).done;){var d=a.value;if(!n.has(d)&&d in r){u||(u=o({},r)),l||(l={}),delete u[d];var p=r[d].get();l[d]=p,t.addDiffForAfterEvent(p,null)}}}catch(f){s.e(f)}finally{s.f()}return null!==(i=u)&&void 0!==i?i:r})),l&&t.updateHistory({added:{},updated:{},removed:l})}))}},{key:"get",value:function(e){var t;return null===(t=this.atoms.get()[e])||void 0===t?void 0:t.get()}},{key:"unsafeGetWithoutCapture",value:function(e){var t;return null===(t=this.atoms.__unsafe__getWithoutCapture()[e])||void 0===t?void 0:t.__unsafe__getWithoutCapture()}},{key:"serialize",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"document",n={},r=c((0,g.objectMapEntries)(this.atoms.get()));try{for(r.s();!(e=r.n()).done;){var o=i(e.value,2),a=o[0],u=o[1].get();("all"===t||this.scopedTypes[t].has(u.typeName))&&(n[a]=u)}}catch(s){r.e(s)}finally{r.f()}return n}},{key:"getStoreSnapshot",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"document";return{store:this.serialize(e),schema:this.schema.serialize()}}},{key:"getSnapshot",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"document";return console.warn("[tldraw] `Store.getSnapshot` is deprecated and will be removed in a future release. Use `getSnapshot` from the `tldraw` package instead."),this.getStoreSnapshot(e)}},{key:"migrateSnapshot",value:function(e){var t=this.schema.migrateStoreSnapshot(e);if("error"===t.type)throw new Error("Failed to migrate snapshot: ".concat(t.reason));return{store:t.value,schema:this.schema.serialize()}}},{key:"loadStoreSnapshot",value:function(e){var t=this,n=this.schema.migrateStoreSnapshot(e);if("error"===n.type)throw new Error("Failed to migrate snapshot: ".concat(n.reason));var r=this.sideEffects.isEnabled();try{this.sideEffects.setIsEnabled(!1),this.atomic((function(){t.clear(),t.put(Object.values(n.value)),t.ensureStoreIsUsable()}))}finally{this.sideEffects.setIsEnabled(r)}}},{key:"loadSnapshot",value:function(e){console.warn("[tldraw] `Store.loadSnapshot` is deprecated and will be removed in a future release. Use `loadSnapshot` from the 'tldraw' package instead."),this.loadStoreSnapshot(e)}},{key:"allRecords",value:function(){return(0,g.objectMapValues)(this.atoms.get()).map((function(e){return e.get()}))}},{key:"clear",value:function(){this.remove((0,g.objectMapKeys)(this.atoms.get()))}},{key:"update",value:function(e,t){var n=this.atoms.get()[e];n?this.put([t(n.__unsafe__getWithoutCapture())]):console.error("Record ".concat(e," not found. This is probably an error"))}},{key:"has",value:function(e){return!!this.atoms.get()[e]}},{key:"listen",value:function(e,t){var n,r,o=this;this._flushHistory();var i={onHistory:e,filters:{source:null!==(n=null===t||void 0===t?void 0:t.source)&&void 0!==n?n:"all",scope:null!==(r=null===t||void 0===t?void 0:t.scope)&&void 0!==r?r:"all"}};return this.historyReactor.scheduler.isActivelyListening||(this.historyReactor.start(),this.historyReactor.scheduler.execute()),this.listeners.add(i),function(){o.listeners.delete(i),0===o.listeners.size&&o.historyReactor.stop()}}},{key:"mergeRemoteChanges",value:function(e){if(this.isMergingRemoteChanges)return e();if(this._isInAtomicOp)throw new Error("Cannot merge remote changes while in atomic operation");try{this.isMergingRemoteChanges=!0,(0,v.transact)(e)}finally{this.isMergingRemoteChanges=!1,this.ensureStoreIsUsable()}}},{key:"extractingChanges",value:function(e){var t=[],n=this.historyAccumulator.addInterceptor((function(e){return t.push(e.changes)}));try{return(0,v.transact)(e),(0,y.squashRecordDiffs)(t)}finally{n()}}},{key:"applyDiff",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.runCallbacks,a=void 0===r||r,u=n.ignoreEphemeralKeys,s=void 0!==u&&u;this.atomic((function(){var n,r=(0,g.objectMapValues)(e.added),a=c((0,g.objectMapValues)(e.updated));try{for(a.s();!(n=a.n()).done;){var u=i(n.value,2),l=(u[0],u[1]),f=t.schema.getType(l.typeName);if(s&&f.ephemeralKeySet.size){var d=t.get(l.id);if(!d){r.push(l);continue}for(var p=null,h=0,v=Object.entries(l);h<v.length;h++){var y=i(v[h],2),m=y[0],b=y[1];f.ephemeralKeySet.has(m)||Object.is(b,(0,g.getOwnProperty)(d,m))||(p||(p=o({},d)),p[m]=b)}p&&r.push(p)}else r.push(l)}}catch(S){a.e(S)}finally{a.f()}var w=(0,g.objectMapKeys)(e.removed);r.length&&t.put(r),w.length&&t.remove(w)}),a)}},{key:"createComputedCache",value:function(e,t,n){var r=this,o=new g.WeakCache;return{get:function(i){var a=r.atoms.get()[i];if(a)return o.get(a,(function(){var r=n?(0,v.computed)(a.name+":equals",(function(){return a.get()}),{isEqual:n}):a;return(0,v.computed)(e+":"+i,(function(){return t(r.get())}))})).get()}}}},{key:"createSelectedComputedCache",value:function(e,t,n){var r=this,o=new g.WeakCache;return{get:function(i){var a=r.atoms.get()[i];if(a)return o.get(a,(function(){var r=(0,v.computed)(e+":"+i+":selector",(function(){return t(a.get())}));return(0,v.computed)(e+":"+i,(function(){return n(r.get())}))})).get()}}}},{key:"ensureStoreIsUsable",value:function(){var e=this;this.atomic((function(){var t,n;null!==(t=e._integrityChecker)&&void 0!==t||(e._integrityChecker=e.schema.createIntegrityChecker(e)),null===(n=e._integrityChecker)||void 0===n||n.call(e)}))}},{key:"markAsPossiblyCorrupted",value:function(){this._isPossiblyCorrupted=!0}},{key:"isPossiblyCorrupted",value:function(){return this._isPossiblyCorrupted}},{key:"addDiffForAfterEvent",value:function(e,t){if((0,g.assert)(this.pendingAfterEvents,"must be in event operation"),e!==t&&(e&&t&&(0,g.assert)(e.id===t.id),e||t)){var n=(e||t).id,r=this.pendingAfterEvents.get(n);r?r.after=t:this.pendingAfterEvents.set(n,{before:e,after:t})}}},{key:"flushAtomicCallbacks",value:function(){for(var e=0,t=this.isMergingRemoteChanges?"remote":"user";this.pendingAfterEvents;){var n=this.pendingAfterEvents;if(this.pendingAfterEvents=null,this.sideEffects.isEnabled()){if(++e>100)throw new Error("Maximum store update depth exceeded, bailing out");var r,o=c(n.values());try{for(o.s();!(r=o.n()).done;){var i=r.value,a=i.before,u=i.after;a&&u?this.sideEffects.handleAfterChange(a,u,t):a&&!u?this.sideEffects.handleAfterDelete(a,t):!a&&u&&this.sideEffects.handleAfterCreate(u,t)}}catch(s){o.e(s)}finally{o.f()}this.pendingAfterEvents||this.sideEffects.handleOperationComplete(t)}}}},{key:"atomic",value:function(e){var t=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return(0,v.transact)((function(){if(t._isInAtomicOp)return t.pendingAfterEvents||(t.pendingAfterEvents=new Map),e();t.pendingAfterEvents=new Map;var r=t.sideEffects.isEnabled();t.sideEffects.setIsEnabled(null!==n&&void 0!==n?n:r),t._isInAtomicOp=!0;try{var o=e();return t.flushAtomicCallbacks(),o}finally{t.pendingAfterEvents=null,t.sideEffects.setIsEnabled(r),t._isInAtomicOp=!1}}))}},{key:"addHistoryInterceptor",value:function(e){var t=this;return this.historyAccumulator.addInterceptor((function(n){return e(n,t.isMergingRemoteChanges?"remote":"user")}))}}])}();var x=function(){return u((function e(){a(this,e),s(this,"_history",[]),s(this,"_interceptors",new Set)}),[{key:"addInterceptor",value:function(e){var t=this;return this._interceptors.add(e),function(){t._interceptors.delete(e)}}},{key:"add",value:function(e){this._history.push(e);var t,n=c(this._interceptors);try{for(n.s();!(t=n.n()).done;){(0,t.value)(e)}}catch(r){n.e(r)}finally{n.f()}}},{key:"flush",value:function(){var e=function(e){if(0===e.length)return[];for(var t,n=[],r=[e[0]],o=1,i=e.length;o<i;o++)t=e[o],r[0].source!==t.source&&(n.push(r),r=[]),r.push(t);return n.push(r),(0,w.devFreeze)(n.map((function(e){return{source:e[0].source,changes:(0,y.squashRecordDiffs)(e.map((function(e){return e.changes})))}})))}(this._history);return this._history=[],e}},{key:"clear",value:function(){this._history=[]}},{key:"hasChanges",value:function(){return this._history.length>0}}])}();function P(e,t,n){var r=new g.WeakCache;return{get:function(o,i){return r.get(o,(function(){return(o instanceof S?o:o.store).createComputedCache(e,(function(e){return t(o,e)}),n)})).get(i)}}}},64174:function(e,t,n){"use strict";var r,o=n(41132).default,i=(n(15407).default,n(85715).default),a=n(17383).default,u=n(34579).default,s=n(43693).default,c=n(50883).default,l=Object.create,f=Object.defineProperty,d=Object.getOwnPropertyDescriptor,p=Object.getOwnPropertyNames,h=Object.getPrototypeOf,v=Object.prototype.hasOwnProperty,g=function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,i=c(p(t));try{var a=function(){var i=o.value;v.call(e,i)||i===n||f(e,i,{get:function(){return t[i]},enumerable:!(r=d(t,i))||r.enumerable})};for(i.s();!(o=i.n()).done;)a()}catch(u){i.e(u)}finally{i.f()}}return e},y={};!function(e,t){for(var n in t)f(e,n,{get:t[n],enumerable:!0})}(y,{StoreQueries:function(){return O}}),e.exports=(r=y,g(f({},"__esModule",{value:!0}),r));var m=n(81501),b=n(30645),w=function(e,t,n){return n=null!=e?l(h(e)):{},g(!t&&e&&e.__esModule?n:f(n,"default",{value:e,enumerable:!0}),e)}(n(51812)),S=n(8332),x=n(96041),P=n(84948),O=function(){return u((function e(t,n){a(this,e),s(this,"indexCache",new Map),s(this,"historyCache",new Map),this.atoms=t,this.history=n}),[{key:"filterHistory",value:function(e){var t=this;if(this.historyCache.has(e))return this.historyCache.get(e);var n=(0,m.computed)("filterHistory:"+e,(function(n,r){if((0,m.isUninitialized)(n))return t.history.get();var o=t.history.getDiffSince(r);if(o===m.RESET_VALUE)return t.history.get();var a,u={added:{},removed:{},updated:{}},s=0,l=0,f=0,d=c(o);try{for(d.s();!(a=d.n()).done;){var p,h=a.value,v=c((0,b.objectMapValues)(h.added));try{for(v.s();!(p=v.n()).done;){var g=p.value;if(g.typeName===e)if(u.removed[g.id]){var y=u.removed[g.id];delete u.removed[g.id],l--,y!==g&&(u.updated[g.id]=[y,g],f++)}else u.added[g.id]=g,s++}}catch(I){v.e(I)}finally{v.f()}var w,S=c((0,b.objectMapValues)(h.updated));try{for(S.s();!(w=S.n()).done;){var x=i(w.value,2),P=x[0],O=x[1];O.typeName===e&&(u.added[O.id]?u.added[O.id]=O:u.updated[O.id]?u.updated[O.id]=[u.updated[O.id][0],O]:(u.updated[O.id]=[P,O],f++))}}catch(I){S.e(I)}finally{S.f()}var k,_=c((0,b.objectMapValues)(h.removed));try{for(_.s();!(k=_.n()).done;){var j=k.value;j.typeName===e&&(u.added[j.id]?(delete u.added[j.id],s--):u.updated[j.id]?(u.removed[j.id]=u.updated[j.id][0],delete u.updated[j.id],f--,l++):(u.removed[j.id]=j,l++))}}catch(I){_.e(I)}finally{_.f()}}}catch(I){d.e(I)}finally{d.f()}return s||l||f?(0,m.withDiff)(t.history.get(),u):n}),{historyLength:100});return this.historyCache.set(e,n),n}},{key:"index",value:function(e,t){var n=e+":"+t;if(this.indexCache.has(n))return this.indexCache.get(n);var r=this.__uncached_createIndex(e,t);return this.indexCache.set(n,r),r}},{key:"__uncached_createIndex",value:function(e,t){var n=this,r=this.filterHistory(e),o=function(){r.get();var o,i=new Map,a=c((0,b.objectMapValues)(n.atoms.get()));try{for(a.s();!(o=a.n()).done;){var u=o.value.get();if(u.typeName===e){var s=u[t];i.has(s)||i.set(s,new Set),i.get(s).add(u.id)}}}catch(l){a.e(l)}finally{a.f()}return i};return(0,m.computed)("index:"+e+":"+t,(function(n,a){if((0,m.isUninitialized)(n))return o();var u=r.getDiffSince(a);if(u===m.RESET_VALUE)return o();var s,l=new Map,f=function(e,t){var r,o=l.get(e);o||(o=new x.IncrementalSetConstructor(null!==(r=n.get(e))&&void 0!==r?r:new Set)),o.add(t),l.set(e,o)},d=function(e,t){var r,o=l.get(e);o||(o=new x.IncrementalSetConstructor(null!==(r=n.get(e))&&void 0!==r?r:new Set)),o.remove(t),l.set(e,o)},p=c(u);try{for(p.s();!(s=p.n()).done;){var h,v=s.value,g=c((0,b.objectMapValues)(v.added));try{for(g.s();!(h=g.n()).done;){var y=h.value;if(y.typeName===e)f(y[t],y.id)}}catch(U){g.e(U)}finally{g.f()}var w,S=c((0,b.objectMapValues)(v.updated));try{for(S.s();!(w=S.n()).done;){var P=i(w.value,2),O=P[0],k=P[1];if(k.typeName===e){var _=O[t],j=k[t];_!==j&&(d(_,k.id),f(j,k.id))}}}catch(U){S.e(U)}finally{S.f()}var I,T=c((0,b.objectMapValues)(v.removed));try{for(T.s();!(I=T.n()).done;){var E=I.value;if(E.typeName===e)d(E[t],E.id)}}catch(U){T.e(U)}finally{T.f()}}}catch(U){p.e(U)}finally{p.f()}var C,M=void 0,A=void 0,D=c(l);try{for(D.s();!(C=D.n()).done;){var R=i(C.value,2),N=R[0],L=R[1].get();L&&(M||(M=new Map(n)),A||(A=new Map),0===L.value.size?M.delete(N):M.set(N,L.value),A.set(N,L.diff))}}catch(U){D.e(U)}finally{D.f()}return M&&A?(0,m.withDiff)(M,A):n}),{historyLength:100})}},{key:"record",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){return{}},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"record:"+e+(n?":"+n.toString():""),o=this.ids(e,n,r);return(0,m.computed)(r,(function(){var e,n=c(o.get());try{for(n.s();!(e=n.n()).done;){var r,i=e.value;return null===(r=t.atoms.get()[i])||void 0===r?void 0:r.get()}}catch(a){n.e(a)}finally{n.f()}}))}},{key:"records",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){return{}},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"records:"+e+(n?":"+n.toString():""),i=this.ids(e,n,"ids:"+r);return(0,m.computed)(r,(function(){var e=t.atoms.get();return o(i.get()).map((function(t){var n=e[t];if(!n)throw new Error("no atom found for record id: "+t);return n.get()}))}),{isEqual:b.areArraysShallowEqual})}},{key:"ids",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){return{}},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"ids:"+e+(n?":"+n.toString():""),o=this.filterHistory(e),a=function(){o.get();var r=n();return 0===Object.keys(r).length?new Set((0,b.objectMapValues)(t.atoms.get()).flatMap((function(t){var n=t.get();return n.typeName===e?n.id:[]}))):(0,S.executeQuery)(t,e,r)},u=function(e){var t=a(),n=(0,P.diffSets)(e,t);return n?(0,m.withDiff)(t,n):e},s=(0,m.computed)("ids_query:"+r,n,{isEqual:w.default});return(0,m.computed)("query:"+r,(function(t,n){var r=s.get();if((0,m.isUninitialized)(t))return a();if(n<s.lastChangedEpoch)return u(t);var l=o.getDiffSince(n);if(l===m.RESET_VALUE)return u(t);var f,d=new x.IncrementalSetConstructor(t),p=c(l);try{for(p.s();!(f=p.n()).done;){var h,v=f.value,g=c((0,b.objectMapValues)(v.added));try{for(g.s();!(h=g.n()).done;){var y=h.value;y.typeName===e&&(0,S.objectMatchesQuery)(r,y)&&d.add(y.id)}}catch(E){g.e(E)}finally{g.f()}var w,P=c((0,b.objectMapValues)(v.updated));try{for(P.s();!(w=P.n()).done;){var O=i(w.value,2),k=(O[0],O[1]);k.typeName===e&&((0,S.objectMatchesQuery)(r,k)?d.add(k.id):d.remove(k.id))}}catch(E){P.e(E)}finally{P.f()}var _,j=c((0,b.objectMapValues)(v.removed));try{for(j.s();!(_=j.n()).done;){var I=_.value;I.typeName===e&&d.remove(I.id)}}catch(E){j.e(E)}finally{j.f()}}}catch(E){p.e(E)}finally{p.f()}var T=d.get();return T?(0,m.withDiff)(T.value,T.diff):t}),{historyLength:50})}},{key:"exec",value:function(e,t){var n=(0,S.executeQuery)(this,e,t);if(0===n.size)return m.EMPTY_ARRAY;var r=this.atoms.get();return o(n).map((function(e){return r[e].get()}))}}])}()},44427:function(e,t,n){"use strict";var r,o=n(17383).default,i=n(34579).default,a=n(43693).default,u=n(85715).default,s=n(50883).default,c=Object.defineProperty,l=Object.getOwnPropertyDescriptor,f=Object.getOwnPropertyNames,d=Object.prototype.hasOwnProperty,p={};!function(e,t){for(var n in t)c(e,n,{get:t[n],enumerable:!0})}(p,{StoreSchema:function(){return y},upgradeSchema:function(){return g}}),e.exports=(r=p,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,i=s(f(t));try{var a=function(){var i=o.value;d.call(e,i)||i===n||c(e,i,{get:function(){return t[i]},enumerable:!(r=l(t,i))||r.enumerable})};for(i.s();!(o=i.n()).done;)a()}catch(u){i.e(u)}finally{i.f()}}return e}(c({},"__esModule",{value:!0}),r));var h=n(30645),v=n(19312);function g(e){if(e.schemaVersion>2||e.schemaVersion<1)return h.Result.err("Bad schema version");if(2===e.schemaVersion)return h.Result.ok(e);for(var t={schemaVersion:2,sequences:{"com.tldraw.store":e.storeVersion}},n=0,r=Object.entries(e.recordVersions);n<r.length;n++){var o=u(r[n],2),i=o[0],a=o[1];if(t.sequences["com.tldraw.".concat(i)]=a.version,"subTypeKey"in a)for(var s=0,c=Object.entries(a.subTypeVersions);s<c.length;s++){var l=u(c[s],2),f=l[0],d=l[1];t.sequences["com.tldraw.".concat(i,".").concat(f)]=d}}return h.Result.ok(t)}var y=function(){function e(t,n){var r;o(this,e),a(this,"migrations",{}),a(this,"sortedMigrations",void 0),this.types=t,this.options=n;var i,u=s(null!==(r=n.migrations)&&void 0!==r?r:[]);try{for(u.s();!(i=u.n()).done;){var c=i.value;(0,h.assert)(!this.migrations[c.sequenceId],"Duplicate migration sequenceId ".concat(c.sequenceId)),(0,v.validateMigrations)(c),this.migrations[c.sequenceId]=c}}catch(w){u.e(w)}finally{u.f()}var l=Object.values(this.migrations).flatMap((function(e){return e.sequence}));this.sortedMigrations=(0,v.sortMigrations)(l);var f,d=s(this.sortedMigrations);try{for(d.s();!(f=d.n()).done;){var p,g=f.value;if(null!==(p=g.dependsOn)&&void 0!==p&&p.length){var y,m=s(g.dependsOn);try{var b=function(){var e=y.value,t=l.find((function(t){return t.id===e}));(0,h.assert)(t,"Migration '".concat(g.id,"' depends on missing migration '").concat(e,"'"))};for(m.s();!(y=m.n()).done;)b()}catch(w){m.e(w)}finally{m.f()}}}}catch(w){d.e(w)}finally{d.f()}}return i(e,[{key:"validateRecord",value:function(e,t,n,r){try{var o=(0,h.getOwnProperty)(this.types,t.typeName);if(!o)throw new Error("Missing definition for record type ".concat(t.typeName));return o.validate(t,null!==r&&void 0!==r?r:void 0)}catch(i){if(this.options.onValidationFailure)return this.options.onValidationFailure({store:e,record:t,phase:n,recordBefore:r,error:i});throw i}}},{key:"getMigrationsSince",value:function(e){var t=this,n=g(e);if(!n.ok)return n;var r=n.value,o=new Set(Object.keys(r.sequences).filter((function(e){return t.migrations[e]})));for(var i in this.migrations)void 0===r.sequences[i]&&this.migrations[i].retroactive&&o.add(i);if(0===o.size)return h.Result.ok([]);var a,u=new Set,c=s(o);try{var l,f=function(){var e=a.value,n=r.sequences[e];if("number"!==typeof n&&t.migrations[e].retroactive||0===n){var o,i=s(t.migrations[e].sequence);try{for(i.s();!(o=i.n()).done;){var c=o.value;u.add(c.id)}}catch(g){i.e(g)}finally{i.f()}return 0}var l="".concat(e,"/").concat(n),f=t.migrations[e].sequence.findIndex((function(e){return e.id===l}));if(-1===f)return{v:h.Result.err("Incompatible schema?")};var d,p=s(t.migrations[e].sequence.slice(f+1));try{for(p.s();!(d=p.n()).done;){var v=d.value;u.add(v.id)}}catch(g){p.e(g)}finally{p.f()}};for(c.s();!(a=c.n()).done;)if(0!==(l=f())&&l)return l.v}catch(d){c.e(d)}finally{c.f()}return h.Result.ok(this.sortedMigrations.filter((function(e){var t=e.id;return u.has(t)})))}},{key:"migratePersistedRecord",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"up",r=this.getMigrationsSince(t);if(!r.ok)return console.error("Error migrating record",r.error),{type:"error",reason:v.MigrationFailureReason.MigrationError};var o=r.value;if(0===o.length)return{type:"success",value:e};if(o.some((function(e){return"store"===e.scope})))return{type:"error",reason:"down"===n?v.MigrationFailureReason.TargetVersionTooOld:v.MigrationFailureReason.TargetVersionTooNew};if("down"===n){if(!o.every((function(e){return e.down})))return{type:"error",reason:v.MigrationFailureReason.TargetVersionTooOld};o=o.slice().reverse()}e=(0,h.structuredClone)(e);try{var i,a=s(o);try{for(a.s();!(i=a.n()).done;){var u=i.value;if("store"===u.scope)throw new Error;if(!u.filter||u.filter(e)){var c=u[n](e);c&&(e=(0,h.structuredClone)(c))}}}catch(l){a.e(l)}finally{a.f()}}catch(f){return console.error("Error migrating record",f),{type:"error",reason:v.MigrationFailureReason.MigrationError}}return{type:"success",value:e}}},{key:"migrateStoreSnapshot",value:function(e){var t=e.store,n=this.getMigrationsSince(e.schema);if(!n.ok)return console.error("Error migrating store",n.error),{type:"error",reason:v.MigrationFailureReason.MigrationError};var r=n.value;if(0===r.length)return{type:"success",value:t};t=(0,h.structuredClone)(t);try{var o,i=s(r);try{for(i.s();!(o=i.n()).done;){var a=o.value;if("record"===a.scope)for(var c=0,l=Object.entries(t);c<l.length;c++){var f=u(l[c],2),d=f[0],p=f[1];if(!a.filter||a.filter(p)){var g=a.up(p);g&&(t[d]=(0,h.structuredClone)(g))}}else if("store"===a.scope){var y=a.up(t);y&&(t=(0,h.structuredClone)(y))}else(0,h.exhaustiveSwitchError)(a)}}catch(m){i.e(m)}finally{i.f()}}catch(b){return console.error("Error migrating store",b),{type:"error",reason:v.MigrationFailureReason.MigrationError}}return{type:"success",value:t}}},{key:"createIntegrityChecker",value:function(e){var t,n,r;return null!==(t=null===(n=(r=this.options).createIntegrityChecker)||void 0===n?void 0:n.call(r,e))&&void 0!==t?t:void 0}},{key:"serialize",value:function(){return{schemaVersion:2,sequences:Object.fromEntries(Object.values(this.migrations).map((function(e){var t=e.sequenceId,n=e.sequence;return[t,n.length?(0,v.parseMigrationId)(n.at(-1).id).version:0]})))}}},{key:"serializeEarliestVersion",value:function(){return{schemaVersion:2,sequences:Object.fromEntries(Object.values(this.migrations).map((function(e){return[e.sequenceId,0]})))}}},{key:"getType",value:function(e){var t=(0,h.getOwnProperty)(this.types,e);return(0,h.assert)(t,"record type does not exists"),t}}],[{key:"create",value:function(t,n){return new e(t,null!==n&&void 0!==n?n:{})}}])}()},8313:function(e,t,n){"use strict";var r,o=n(85715).default,i=n(17383).default,a=n(34579).default,u=n(43693).default,s=n(50883).default,c=Object.defineProperty,l=Object.getOwnPropertyDescriptor,f=Object.getOwnPropertyNames,d=Object.prototype.hasOwnProperty,p={};!function(e,t){for(var n in t)c(e,n,{get:t[n],enumerable:!0})}(p,{StoreSideEffects:function(){return h}}),e.exports=(r=p,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,i=s(f(t));try{var a=function(){var i=o.value;d.call(e,i)||i===n||c(e,i,{get:function(){return t[i]},enumerable:!(r=l(t,i))||r.enumerable})};for(i.s();!(o=i.n()).done;)a()}catch(u){i.e(u)}finally{i.f()}}return e}(c({},"__esModule",{value:!0}),r));var h=function(){return a((function e(t){i(this,e),u(this,"_beforeCreateHandlers",{}),u(this,"_afterCreateHandlers",{}),u(this,"_beforeChangeHandlers",{}),u(this,"_afterChangeHandlers",{}),u(this,"_beforeDeleteHandlers",{}),u(this,"_afterDeleteHandlers",{}),u(this,"_operationCompleteHandlers",[]),u(this,"_isEnabled",!0),this.store=t}),[{key:"isEnabled",value:function(){return this._isEnabled}},{key:"setIsEnabled",value:function(e){this._isEnabled=e}},{key:"handleBeforeCreate",value:function(e,t){if(!this._isEnabled)return e;var n=this._beforeCreateHandlers[e.typeName];if(n){var r,o=e,i=s(n);try{for(i.s();!(r=i.n()).done;){o=(0,r.value)(o,t)}}catch(a){i.e(a)}finally{i.f()}return o}return e}},{key:"handleAfterCreate",value:function(e,t){if(this._isEnabled){var n=this._afterCreateHandlers[e.typeName];if(n){var r,o=s(n);try{for(o.s();!(r=o.n()).done;){(0,r.value)(e,t)}}catch(i){o.e(i)}finally{o.f()}}}}},{key:"handleBeforeChange",value:function(e,t,n){if(!this._isEnabled)return t;var r=this._beforeChangeHandlers[t.typeName];if(r){var o,i=t,a=s(r);try{for(a.s();!(o=a.n()).done;){i=(0,o.value)(e,i,n)}}catch(u){a.e(u)}finally{a.f()}return i}return t}},{key:"handleAfterChange",value:function(e,t,n){if(this._isEnabled){var r=this._afterChangeHandlers[t.typeName];if(r){var o,i=s(r);try{for(i.s();!(o=i.n()).done;){(0,o.value)(e,t,n)}}catch(a){i.e(a)}finally{i.f()}}}}},{key:"handleBeforeDelete",value:function(e,t){if(!this._isEnabled)return!0;var n=this._beforeDeleteHandlers[e.typeName];if(n){var r,o=s(n);try{for(o.s();!(r=o.n()).done;){if(!1===(0,r.value)(e,t))return!1}}catch(i){o.e(i)}finally{o.f()}}return!0}},{key:"handleAfterDelete",value:function(e,t){if(this._isEnabled){var n=this._afterDeleteHandlers[e.typeName];if(n){var r,o=s(n);try{for(o.s();!(r=o.n()).done;){(0,r.value)(e,t)}}catch(i){o.e(i)}finally{o.f()}}}}},{key:"handleOperationComplete",value:function(e){if(this._isEnabled){var t,n=s(this._operationCompleteHandlers);try{for(n.s();!(t=n.n()).done;){(0,t.value)(e)}}catch(r){n.e(r)}finally{n.f()}}}},{key:"register",value:function(e){for(var t=[],n=0,r=Object.entries(e);n<r.length;n++){var i=o(r[n],2),a=i[0],u=i[1];null!==u&&void 0!==u&&u.beforeCreate&&t.push(this.registerBeforeCreateHandler(a,u.beforeCreate)),null!==u&&void 0!==u&&u.afterCreate&&t.push(this.registerAfterCreateHandler(a,u.afterCreate)),null!==u&&void 0!==u&&u.beforeChange&&t.push(this.registerBeforeChangeHandler(a,u.beforeChange)),null!==u&&void 0!==u&&u.afterChange&&t.push(this.registerAfterChangeHandler(a,u.afterChange)),null!==u&&void 0!==u&&u.beforeDelete&&t.push(this.registerBeforeDeleteHandler(a,u.beforeDelete)),null!==u&&void 0!==u&&u.afterDelete&&t.push(this.registerAfterDeleteHandler(a,u.afterDelete))}return function(){for(var e=0,n=t;e<n.length;e++){(0,n[e])()}}}},{key:"registerBeforeCreateHandler",value:function(e,t){var n=this;return this._beforeCreateHandlers[e]||(this._beforeCreateHandlers[e]=[]),this._beforeCreateHandlers[e].push(t),function(){return v(n._beforeCreateHandlers[e],t)}}},{key:"registerAfterCreateHandler",value:function(e,t){var n=this;return this._afterCreateHandlers[e]||(this._afterCreateHandlers[e]=[]),this._afterCreateHandlers[e].push(t),function(){return v(n._afterCreateHandlers[e],t)}}},{key:"registerBeforeChangeHandler",value:function(e,t){var n=this;return this._beforeChangeHandlers[e]||(this._beforeChangeHandlers[e]=[]),this._beforeChangeHandlers[e].push(t),function(){return v(n._beforeChangeHandlers[e],t)}}},{key:"registerAfterChangeHandler",value:function(e,t){var n=this;return this._afterChangeHandlers[e]||(this._afterChangeHandlers[e]=[]),this._afterChangeHandlers[e].push(t),function(){return v(n._afterChangeHandlers[e],t)}}},{key:"registerBeforeDeleteHandler",value:function(e,t){var n=this;return this._beforeDeleteHandlers[e]||(this._beforeDeleteHandlers[e]=[]),this._beforeDeleteHandlers[e].push(t),function(){return v(n._beforeDeleteHandlers[e],t)}}},{key:"registerAfterDeleteHandler",value:function(e,t){var n=this;return this._afterDeleteHandlers[e]||(this._afterDeleteHandlers[e]=[]),this._afterDeleteHandlers[e].push(t),function(){return v(n._afterDeleteHandlers[e],t)}}},{key:"registerOperationCompleteHandler",value:function(e){var t=this;return this._operationCompleteHandlers.push(e),function(){return v(t._operationCompleteHandlers,e)}}}])}();function v(e,t){var n=e.indexOf(t);n>=0&&e.splice(n,1)}},12593:function(e,t,n){"use strict";var r,o=n(50883).default,i=Object.defineProperty,a=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,c={};!function(e,t){for(var n in t)i(e,n,{get:t[n],enumerable:!0})}(c,{devFreeze:function(){return l}}),e.exports=(r=c,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var c,l=o(u(t));try{var f=function(){var o=c.value;s.call(e,o)||o===n||i(e,o,{get:function(){return t[o]},enumerable:!(r=a(t,o))||r.enumerable})};for(l.s();!(c=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(i({},"__esModule",{value:!0}),r));n(30645);function l(e){return e}},8332:function(e,t,n){"use strict";var r,o=n(85715).default,i=n(50883).default,a=Object.defineProperty,u=Object.getOwnPropertyDescriptor,s=Object.getOwnPropertyNames,c=Object.prototype.hasOwnProperty,l={};!function(e,t){for(var n in t)a(e,n,{get:t[n],enumerable:!0})}(l,{executeQuery:function(){return p},objectMatchesQuery:function(){return d}}),e.exports=(r=l,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,l=i(s(t));try{var f=function(){var i=o.value;c.call(e,i)||i===n||a(e,i,{get:function(){return t[i]},enumerable:!(r=u(t,i))||r.enumerable})};for(l.s();!(o=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(a({},"__esModule",{value:!0}),r));var f=n(84948);function d(e,t){for(var n=0,r=Object.entries(e);n<r.length;n++){var i=o(r[n],2),a=i[0],u=i[1],s=t[a];if("eq"in u&&s!==u.eq)return!1;if("neq"in u&&s===u.neq)return!1;if("gt"in u&&("number"!==typeof s||s<=u.gt))return!1}return!0}function p(e,t,n){for(var r=Object.fromEntries(Object.keys(n).map((function(e){return[e,new Set]}))),a=0,u=Object.entries(n);a<u.length;a++){var s=o(u[a],2),c=s[0],l=s[1];if("eq"in l){var d=e.index(t,c).get().get(l.eq);if(d){var p,h=i(d);try{for(h.s();!(p=h.n()).done;){var v=p.value;r[c].add(v)}}catch(D){h.e(D)}finally{h.f()}}}else if("neq"in l){var g,y=e.index(t,c),m=i(y.get());try{for(m.s();!(g=m.n()).done;){var b=o(g.value,2),w=b[0],S=b[1];if(w!==l.neq){var x,P=i(S);try{for(P.s();!(x=P.n()).done;){var O=x.value;r[c].add(O)}}catch(D){P.e(D)}finally{P.f()}}}}catch(D){m.e(D)}finally{m.f()}}else if("gt"in l){var k,_=e.index(t,c),j=i(_.get());try{for(j.s();!(k=j.n()).done;){var I=o(k.value,2),T=I[0],E=I[1];if(T>l.gt){var C,M=i(E);try{for(M.s();!(C=M.n()).done;){var A=C.value;r[c].add(A)}}catch(D){M.e(D)}finally{M.f()}}}}catch(D){j.e(D)}finally{j.f()}}}return(0,f.intersectSets)(Object.values(r))}},19312:function(e,t,n){"use strict";var r,o=n(85715).default,i=n(12897).default,a=n(50883).default,u=Object.defineProperty,s=Object.getOwnPropertyDescriptor,c=Object.getOwnPropertyNames,l=Object.prototype.hasOwnProperty,f={};!function(e,t){for(var n in t)u(e,n,{get:t[n],enumerable:!0})}(f,{MigrationFailureReason:function(){return P},createMigrationIds:function(){return y},createMigrationSequence:function(){return g},createRecordMigrationSequence:function(){return m},defineMigrations:function(){return h},parseMigrationId:function(){return w},sortMigrations:function(){return b},validateMigrations:function(){return x}}),e.exports=(r=f,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,i=a(c(t));try{var f=function(){var i=o.value;l.call(e,i)||i===n||u(e,i,{get:function(){return t[i]},enumerable:!(r=s(t,i))||r.enumerable})};for(i.s();!(o=i.n()).done;)f()}catch(d){i.e(d)}finally{i.f()}}return e}(u({},"__esModule",{value:!0}),r));var d=n(30645),p=!1;function h(e){var t=e.currentVersion,n=e.firstVersion,r=e.migrators,o=void 0===r?{}:r,i=e.subTypeKey,a=e.subTypeMigrations;if(p||(console.warn("The 'defineMigrations' function is deprecated and will be removed in a future release. Use the new migrations API instead. See the migration guide for more info: https://tldraw.dev/docs/persistence#Updating-legacy-shape-migrations-defineMigrations"),p=!0),"number"===typeof t&&"number"===typeof n){if(t===n)throw Error("Current version is equal to initial version.");if(t<n)throw Error("Current version is lower than initial version.")}return{firstVersion:null!==n&&void 0!==n?n:0,currentVersion:null!==t&&void 0!==t?t:0,migrators:o,subTypeKey:i,subTypeMigrations:a}}function v(e){for(var t=[],n=e.length-1;n>=0;n--){var r=e[n];if("id"in r)t.unshift(r);else{var o,a=r.dependsOn,u=t[0];if(u)t[0]=i(i({},u),{},{dependsOn:a.concat(null!==(o=u.dependsOn)&&void 0!==o?o:[])})}}return t}function g(e){var t=e.sequence,n=e.sequenceId,r=e.retroactive,o={sequenceId:n,retroactive:void 0===r||r,sequence:v(t)};return x(o),o}function y(e,t){return Object.fromEntries((0,d.objectMapEntries)(t).map((function(t){var n=o(t,2),r=n[0],i=n[1];return[r,"".concat(e,"/").concat(i)]})))}function m(e){var t;return g({sequenceId:e.sequenceId,retroactive:null===(t=e.retroactive)||void 0===t||t,sequence:e.sequence.map((function(t){return"id"in t?i(i({},t),{},{scope:"record",filter:function(n){var r,o,i,a;return n.typeName===e.recordType&&(null===(r=null===(o=t.filter)||void 0===o?void 0:o.call(t,n))||void 0===r||r)&&(null===(i=null===(a=e.filter)||void 0===a?void 0:a.call(e,n))||void 0===i||i)}}):t}))})}function b(e){var t=new Map(e.map((function(e){return[e.id,e]}))),n=new Set,r=[];function o(e){(0,d.assert)(!n.has(e.id),"Circular dependency in migrations: ".concat(e.id)),n.add(e.id);var i=w(e.id),u=i.version,s=i.sequenceId,c=t.get("".concat(s,"/").concat(u-1));if(c&&o(c),e.dependsOn){var l,f=a(e.dependsOn);try{for(f.s();!(l=f.n()).done;){var p=l.value,h=t.get(p);h&&o(h)}}catch(v){f.e(v)}finally{f.f()}}t.delete(e.id),r.push(e)}var i,u=a(t.values());try{for(u.s();!(i=u.n()).done;){o(i.value)}}catch(s){u.e(s)}finally{u.f()}return r}function w(e){var t=e.split("/"),n=o(t,2),r=n[0],i=n[1];return{sequenceId:r,version:parseInt(i)}}function S(e,t){t&&(0,d.assert)(e.startsWith(t+"/"),"Every migration in sequence '".concat(t,"' must have an id starting with '").concat(t,"/'. Got invalid id: '").concat(e,"'")),(0,d.assert)(e.match(/^(.*?)\/(0|[1-9]\d*)$/),"Invalid migration id: '".concat(e,"'"))}function x(e){if((0,d.assert)(!e.sequenceId.includes("/"),"sequenceId cannot contain a '/', got ".concat(e.sequenceId)),(0,d.assert)(e.sequenceId.length,"sequenceId must be a non-empty string"),0!==e.sequence.length){S(e.sequence[0].id,e.sequenceId);var t=w(e.sequence[0].id).version;(0,d.assert)(1===t,"Expected the first migrationId to be '".concat(e.sequenceId,"/1' but got '").concat(e.sequence[0].id,"'"));for(var n=1;n<e.sequence.length;n++){var r=e.sequence[n].id;S(r,e.sequenceId);var o=w(r).version;(0,d.assert)(o===t+1,"Migration id numbers must increase in increments of 1, expected ".concat(e.sequenceId,"/").concat(t+1," but got '").concat(e.sequence[n].id,"'")),t=o}}}var P=function(e){return e.IncompatibleSubtype="incompatible-subtype",e.UnknownType="unknown-type",e.TargetVersionTooNew="target-version-too-new",e.TargetVersionTooOld="target-version-too-old",e.MigrationError="migration-error",e.UnrecognizedSubtype="unrecognized-subtype",e}(P||{})},84948:function(e,t,n){"use strict";var r,o=n(50883).default,i=Object.defineProperty,a=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,c={};function l(e){if(0===e.length)return new Set;var t,n=e[0],r=e.slice(1),i=new Set,a=o(n);try{var u=function(){var e=t.value;r.every((function(t){return t.has(e)}))&&i.add(e)};for(a.s();!(t=a.n()).done;)u()}catch(s){a.e(s)}finally{a.f()}return i}function f(e,t){var n,r={},i=o(t);try{for(i.s();!(n=i.n()).done;){var a,u=n.value;if(!e.has(u))null!==(a=r.added)&&void 0!==a||(r.added=new Set),r.added.add(u)}}catch(d){i.e(d)}finally{i.f()}var s,c=o(e);try{for(c.s();!(s=c.n()).done;){var l,f=s.value;if(!t.has(f))null!==(l=r.removed)&&void 0!==l||(r.removed=new Set),r.removed.add(f)}}catch(d){c.e(d)}finally{c.f()}return r.added||r.removed?r:void 0}!function(e,t){for(var n in t)i(e,n,{get:t[n],enumerable:!0})}(c,{diffSets:function(){return f},intersectSets:function(){return l}}),e.exports=(r=c,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var c,l=o(u(t));try{var f=function(){var o=c.value;s.call(e,o)||o===n||i(e,o,{get:function(){return t[o]},enumerable:!(r=a(t,o))||r.enumerable})};for(l.s();!(c=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(i({},"__esModule",{value:!0}),r))},96766:function(e,t,n){"use strict";var r,o=n(12897).default,i=n(41132).default,a=n(50883).default,u=Object.defineProperty,s=Object.getOwnPropertyDescriptor,c=Object.getOwnPropertyNames,l=Object.prototype.hasOwnProperty,f={};!function(e,t){for(var n in t)u(e,n,{get:t[n],enumerable:!0})}(f,{createIntegrityChecker:function(){return x},onValidationFailure:function(){return S}}),e.exports=(r=f,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,i=a(c(t));try{var f=function(){var i=o.value;l.call(e,i)||i===n||u(e,i,{get:function(){return t[i]},enumerable:!(r=s(t,i))||r.enumerable})};for(i.s();!(o=i.n()).done;)f()}catch(d){i.e(d)}finally{i.f()}}return e}(u({},"__esModule",{value:!0}),r));var d=n(30645),p=n(79827),h=n(7617),v=n(36727),g=n(53423),y=n(84134),m=n(98263);function b(e,t){return e.index<t.index?-1:e.index>t.index?1:0}function w(e){"asset"===e.typeName&&("src"in e&&(e.src="<redacted>"),"src"in e.props&&(e.props.src="<redacted>"))}function S(e){var t=e.error,n=e.phase,r=e.record,o=e.recordBefore,i="initialize"===n;throw(0,d.annotateError)(t,{tags:{origin:"store.validateRecord",storePhase:n,isExistingValidationIssue:i},extras:{recordBefore:o?w((0,d.structuredClone)(o)):void 0,recordAfter:w((0,d.structuredClone)(r))}}),t}function x(e){var t=e.query.ids("page"),n=e.query.records("instance_page_state"),r=function(){if(!e.has(h.TLDOCUMENT_ID))return e.put([h.DocumentRecordType.create({id:h.TLDOCUMENT_ID,name:e.props.defaultName})]),r();if(!e.has(m.TLPOINTER_ID))return e.put([m.PointerRecordType.create({id:m.TLPOINTER_ID})]),r();var u=t.get();if(0===u.size)return e.put([g.PageRecordType.create({id:"page:page",name:"Page 1",index:"a1",meta:{}})]),r();var s=function(){return i(u).map((function(t){return e.get(t)})).sort(b)[0].id},c=e.get(v.TLINSTANCE_ID);if(!c)return e.put([e.schema.types.instance.create({id:v.TLINSTANCE_ID,currentPageId:s(),exportBackground:!0})]),r();if(!u.has(c.currentPageId))return e.put([o(o({},c),{},{currentPageId:s()})]),r();var l,f=new Set,d=new Set,w=a(u);try{for(w.s();!(l=w.n()).done;){var S=l.value,x=y.InstancePageStateRecordType.createId(S);e.get(x)||f.add(x);var P=p.CameraRecordType.createId(S);e.has(P)||d.add(P)}}catch(C){w.e(C)}finally{w.f()}f.size>0&&e.put(i(f).map((function(e){return y.InstancePageStateRecordType.create({id:e,pageId:y.InstancePageStateRecordType.parseId(e)})}))),d.size>0&&e.put(i(d).map((function(e){return p.CameraRecordType.create({id:e})})));var O,k=n.get(),_=a(k);try{for(_.s();!(O=_.n()).done;){var j=O.value;if(u.has(j.pageId)){if(j.croppingShapeId&&!e.has(j.croppingShapeId))return e.put([o(o({},j),{},{croppingShapeId:null})]),r();if(j.focusedGroupId&&!e.has(j.focusedGroupId))return e.put([o(o({},j),{},{focusedGroupId:null})]),r();if(j.hoveredShapeId&&!e.has(j.hoveredShapeId))return e.put([o(o({},j),{},{hoveredShapeId:null})]),r();var I=j.selectedShapeIds.filter((function(t){return e.has(t)}));if(I.length!==j.selectedShapeIds.length)return e.put([o(o({},j),{},{selectedShapeIds:I})]),r();var T=j.hintingShapeIds.filter((function(t){return e.has(t)}));if(T.length!==j.hintingShapeIds.length)return e.put([o(o({},j),{},{hintingShapeIds:T})]),r();var E=j.erasingShapeIds.filter((function(t){return e.has(t)}));if(E.length!==j.erasingShapeIds.length)return e.put([o(o({},j),{},{erasingShapeIds:E})]),r()}else e.remove([j.id])}}catch(C){_.e(C)}finally{_.f()}};return r}},82350:function(e,t,n){"use strict";var r,o=n(50883).default,i=Object.defineProperty,a=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,c={};!function(e,t){for(var n in t)i(e,n,{get:t[n],enumerable:!0})}(c,{assetIdValidator:function(){return f},createAssetValidator:function(){return d}}),e.exports=(r=c,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var c,l=o(u(t));try{var f=function(){var o=c.value;s.call(e,o)||o===n||i(e,o,{get:function(){return t[o]},enumerable:!(r=a(t,o))||r.enumerable})};for(l.s();!(c=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(i({},"__esModule",{value:!0}),r));var l=n(98556),f=(0,n(22836).idValidator)("asset");function d(e,t){return l.T.object({id:f,typeName:l.T.literal("asset"),type:l.T.literal(e),props:t,meta:l.T.jsonValue})}},14941:function(e,t,n){"use strict";var r,o=n(50883).default,i=Object.defineProperty,a=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,c={};!function(e,t){for(var n in t)i(e,n,{get:t[n],enumerable:!0})}(c,{bookmarkAssetMigrations:function(){return h},bookmarkAssetValidator:function(){return d},bookmarkAssetVersions:function(){return p}}),e.exports=(r=c,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var c,l=o(u(t));try{var f=function(){var o=c.value;s.call(e,o)||o===n||i(e,o,{get:function(){return t[o]},enumerable:!(r=a(t,o))||r.enumerable})};for(l.s();!(c=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(i({},"__esModule",{value:!0}),r));var l=n(75881),f=n(98556),d=(0,n(82350).createAssetValidator)("bookmark",f.T.object({title:f.T.string,description:f.T.string,image:f.T.string,favicon:f.T.string,src:f.T.srcUrl.nullable()})),p=(0,l.createMigrationIds)("com.tldraw.asset.bookmark",{MakeUrlsValid:1,AddFavicon:2}),h=(0,l.createRecordMigrationSequence)({sequenceId:"com.tldraw.asset.bookmark",recordType:"asset",filter:function(e){return"bookmark"===e.type},sequence:[{id:p.MakeUrlsValid,up:function(e){f.T.srcUrl.isValid(e.props.src)||(e.props.src="")},down:function(e){}},{id:p.AddFavicon,up:function(e){f.T.srcUrl.isValid(e.props.favicon)||(e.props.favicon="")},down:function(e){delete e.props.favicon}}]})},71430:function(e,t,n){"use strict";var r,o=n(50883).default,i=Object.defineProperty,a=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,c={};!function(e,t){for(var n in t)i(e,n,{get:t[n],enumerable:!0})}(c,{imageAssetMigrations:function(){return h},imageAssetValidator:function(){return d},imageAssetVersions:function(){return p}}),e.exports=(r=c,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var c,l=o(u(t));try{var f=function(){var o=c.value;s.call(e,o)||o===n||i(e,o,{get:function(){return t[o]},enumerable:!(r=a(t,o))||r.enumerable})};for(l.s();!(c=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(i({},"__esModule",{value:!0}),r));var l=n(75881),f=n(98556),d=(0,n(82350).createAssetValidator)("image",f.T.object({w:f.T.number,h:f.T.number,name:f.T.string,isAnimated:f.T.boolean,mimeType:f.T.string.nullable(),src:f.T.srcUrl.nullable(),fileSize:f.T.nonZeroNumber.optional()})),p=(0,l.createMigrationIds)("com.tldraw.asset.image",{AddIsAnimated:1,RenameWidthHeight:2,MakeUrlsValid:3,AddFileSize:4,MakeFileSizeOptional:5}),h=(0,l.createRecordMigrationSequence)({sequenceId:"com.tldraw.asset.image",recordType:"asset",filter:function(e){return"image"===e.type},sequence:[{id:p.AddIsAnimated,up:function(e){e.props.isAnimated=!1},down:function(e){delete e.props.isAnimated}},{id:p.RenameWidthHeight,up:function(e){e.props.w=e.props.width,e.props.h=e.props.height,delete e.props.width,delete e.props.height},down:function(e){e.props.width=e.props.w,e.props.height=e.props.h,delete e.props.w,delete e.props.h}},{id:p.MakeUrlsValid,up:function(e){f.T.srcUrl.isValid(e.props.src)||(e.props.src="")},down:function(e){}},{id:p.AddFileSize,up:function(e){e.props.fileSize=-1},down:function(e){delete e.props.fileSize}},{id:p.MakeFileSizeOptional,up:function(e){-1===e.props.fileSize&&(e.props.fileSize=void 0)},down:function(e){void 0===e.props.fileSize&&(e.props.fileSize=-1)}}]})},8336:function(e,t,n){"use strict";var r,o=n(50883).default,i=Object.defineProperty,a=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,c={};!function(e,t){for(var n in t)i(e,n,{get:t[n],enumerable:!0})}(c,{videoAssetMigrations:function(){return h},videoAssetValidator:function(){return d},videoAssetVersions:function(){return p}}),e.exports=(r=c,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var c,l=o(u(t));try{var f=function(){var o=c.value;s.call(e,o)||o===n||i(e,o,{get:function(){return t[o]},enumerable:!(r=a(t,o))||r.enumerable})};for(l.s();!(c=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(i({},"__esModule",{value:!0}),r));var l=n(75881),f=n(98556),d=(0,n(82350).createAssetValidator)("video",f.T.object({w:f.T.number,h:f.T.number,name:f.T.string,isAnimated:f.T.boolean,mimeType:f.T.string.nullable(),src:f.T.srcUrl.nullable(),fileSize:f.T.number.optional()})),p=(0,l.createMigrationIds)("com.tldraw.asset.video",{AddIsAnimated:1,RenameWidthHeight:2,MakeUrlsValid:3,AddFileSize:4,MakeFileSizeOptional:5}),h=(0,l.createRecordMigrationSequence)({sequenceId:"com.tldraw.asset.video",recordType:"asset",filter:function(e){return"video"===e.type},sequence:[{id:p.AddIsAnimated,up:function(e){e.props.isAnimated=!1},down:function(e){delete e.props.isAnimated}},{id:p.RenameWidthHeight,up:function(e){e.props.w=e.props.width,e.props.h=e.props.height,delete e.props.width,delete e.props.height},down:function(e){e.props.width=e.props.w,e.props.height=e.props.h,delete e.props.w,delete e.props.h}},{id:p.MakeUrlsValid,up:function(e){f.T.srcUrl.isValid(e.props.src)||(e.props.src="")},down:function(e){}},{id:p.AddFileSize,up:function(e){e.props.fileSize=-1},down:function(e){delete e.props.fileSize}},{id:p.MakeFileSizeOptional,up:function(e){-1===e.props.fileSize&&(e.props.fileSize=void 0)},down:function(e){void 0===e.props.fileSize&&(e.props.fileSize=-1)}}]})},19142:function(e,t,n){"use strict";var r,o=n(50883).default,i=Object.defineProperty,a=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,c={};!function(e,t){for(var n in t)i(e,n,{get:t[n],enumerable:!0})}(c,{arrowBindingMigrations:function(){return g},arrowBindingProps:function(){return h},arrowBindingVersions:function(){return v}}),e.exports=(r=c,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var c,l=o(u(t));try{var f=function(){var o=c.value;s.call(e,o)||o===n||i(e,o,{get:function(){return t[o]},enumerable:!(r=a(t,o))||r.enumerable})};for(l.s();!(c=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(i({},"__esModule",{value:!0}),r));var l=n(98556),f=n(21346),d=n(57267),p=n(59790),h={terminal:l.T.literalEnum("start","end"),normalizedAnchor:f.vecModelValidator,isExact:l.T.boolean,isPrecise:l.T.boolean},v={},g=(0,d.createBindingPropsMigrationSequence)({sequence:[{dependsOn:[p.arrowShapeVersions.ExtractBindings]}]})},20332:function(e,t,n){"use strict";var r,o=n(50883).default,i=Object.defineProperty,a=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,c={};!function(e,t){for(var n in t)i(e,n,{get:t[n],enumerable:!0})}(c,{bindingIdValidator:function(){return p},createBindingValidator:function(){return h}}),e.exports=(r=c,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var c,l=o(u(t));try{var f=function(){var o=c.value;s.call(e,o)||o===n||i(e,o,{get:function(){return t[o]},enumerable:!(r=a(t,o))||r.enumerable})};for(l.s();!(c=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(i({},"__esModule",{value:!0}),r));var l=n(98556),f=n(22836),d=n(48160),p=(0,f.idValidator)("binding");function h(e,t,n){return l.T.object({id:p,typeName:l.T.literal("binding"),type:l.T.literal(e),fromId:d.shapeIdValidator,toId:d.shapeIdValidator,props:t?l.T.object(t):l.T.jsonValue,meta:n?l.T.object(n):l.T.jsonValue})}},77656:function(e,t,n){"use strict";var r,o=n(12897).default,i=n(50883).default,a=Object.defineProperty,u=Object.getOwnPropertyDescriptor,s=Object.getOwnPropertyNames,c=Object.prototype.hasOwnProperty,l={};!function(e,t){for(var n in t)a(e,n,{get:t[n],enumerable:!0})}(l,{createPresenceStateDerivation:function(){return y},getDefaultUserPresence:function(){return m}}),e.exports=(r=l,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,l=i(s(t));try{var f=function(){var i=o.value;c.call(e,i)||i===n||a(e,i,{get:function(){return t[i]},enumerable:!(r=u(t,i))||r.enumerable})};for(l.s();!(o=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(a({},"__esModule",{value:!0}),r));var f=n(81501),d=n(79827),p=n(36727),h=n(84134),v=n(98263),g=n(25869);function y(e,t){return function(n){return(0,f.computed)("instancePresence",(function(){var r=e.get();if(!r)return null;var i=m(n,r);return i?g.InstancePresenceRecordType.create(o(o({},i),{},{id:null!==t&&void 0!==t?t:g.InstancePresenceRecordType.createId(n.id)})):null}))}}function m(e,t){var n,r,o=e.get(p.TLINSTANCE_ID),i=e.get(h.InstancePageStateRecordType.createId(null===o||void 0===o?void 0:o.currentPageId)),a=e.get(d.CameraRecordType.createId(null===o||void 0===o?void 0:o.currentPageId)),u=e.get(v.TLPOINTER_ID);return i&&o&&a&&u?{selectedShapeIds:i.selectedShapeIds,brush:o.brush,scribbles:o.scribbles,userId:t.id,userName:null!==(n=t.name)&&void 0!==n?n:"",followingUserId:o.followingUserId,camera:{x:a.x,y:a.y,z:a.z},color:null!==(r=t.color)&&void 0!==r?r:"#FF0000",currentPageId:o.currentPageId,cursor:{x:u.x,y:u.y,rotation:o.cursor.rotation,type:o.cursor.type},lastActivityTimestamp:u.lastActivityTimestamp,screenBounds:o.screenBounds,chatMessage:o.chatMessage,meta:{}}:null}},3968:function(e,t,n){"use strict";var r,o=n(41132).default,i=n(50883).default,a=Object.defineProperty,u=Object.getOwnPropertyDescriptor,s=Object.getOwnPropertyNames,c=Object.prototype.hasOwnProperty,l={};!function(e,t){for(var n in t)a(e,n,{get:t[n],enumerable:!0})}(l,{createTLSchema:function(){return G},defaultBindingSchemas:function(){return K},defaultShapeSchemas:function(){return H}}),e.exports=(r=l,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,l=i(s(t));try{var f=function(){var i=o.value;c.call(e,i)||i===n||a(e,i,{get:function(){return t[i]},enumerable:!(r=u(t,i))||r.enumerable})};for(l.s();!(o=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(a({},"__esModule",{value:!0}),r));var f=n(75881),d=n(30645),p=n(96766),h=n(14941),v=n(71430),g=n(8336),y=n(19142),m=n(30374),b=n(57267),w=n(79827),S=n(7617),x=n(36727),P=n(53423),O=n(84134),k=n(98263),_=n(25869),j=n(16475),I=n(17359),T=n(59790),E=n(17111),C=n(79853),M=n(65682),A=n(31222),D=n(27810),R=n(44476),N=n(11005),L=n(1446),U=n(5469),F=n(86603),B=n(69266),V=n(56176),z=n(59886),H={arrow:{migrations:T.arrowShapeMigrations,props:T.arrowShapeProps},bookmark:{migrations:E.bookmarkShapeMigrations,props:E.bookmarkShapeProps},draw:{migrations:C.drawShapeMigrations,props:C.drawShapeProps},embed:{migrations:M.embedShapeMigrations,props:M.embedShapeProps},frame:{migrations:A.frameShapeMigrations,props:A.frameShapeProps},geo:{migrations:D.geoShapeMigrations,props:D.geoShapeProps},group:{migrations:R.groupShapeMigrations,props:R.groupShapeProps},highlight:{migrations:N.highlightShapeMigrations,props:N.highlightShapeProps},image:{migrations:L.imageShapeMigrations,props:L.imageShapeProps},line:{migrations:U.lineShapeMigrations,props:U.lineShapeProps},note:{migrations:F.noteShapeMigrations,props:F.noteShapeProps},text:{migrations:B.textShapeMigrations,props:B.textShapeProps},video:{migrations:V.videoShapeMigrations,props:V.videoShapeProps}},K={arrow:{migrations:y.arrowBindingMigrations,props:y.arrowBindingProps}};function G(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.shapes,r=void 0===n?H:n,a=t.bindings,u=void 0===a?K:a,s=t.migrations,c=new Map,l=i((0,d.objectMapValues)(r));try{for(l.s();!(e=l.n()).done;){var y,T,E=e.value,C=i((0,j.getShapePropKeysByStyle)(null!==(y=E.props)&&void 0!==y?y:{}).keys());try{for(C.s();!(T=C.n()).done;){var M=T.value;if(c.has(M.id)&&c.get(M.id)!==M)throw new Error("Multiple StyleProp instances with the same id: ".concat(M.id));c.set(M.id,M)}}catch(N){C.e(N)}finally{C.f()}}}catch(N){l.e(N)}finally{l.f()}var A=(0,j.createShapeRecordType)(r),D=(0,b.createBindingRecordType)(u),R=(0,x.createInstanceRecordType)(c);return f.StoreSchema.create({asset:m.AssetRecordType,binding:D,camera:w.CameraRecordType,document:S.DocumentRecordType,instance:R,instance_page_state:O.InstancePageStateRecordType,page:P.PageRecordType,instance_presence:_.InstancePresenceRecordType,pointer:k.PointerRecordType,shape:A},{migrations:[z.storeMigrations,m.assetMigrations,w.cameraMigrations,S.documentMigrations,x.instanceMigrations,O.instancePageStateMigrations,P.pageMigrations,_.instancePresenceMigrations,k.pointerMigrations,j.rootShapeMigrations,h.bookmarkAssetMigrations,v.imageAssetMigrations,g.videoAssetMigrations].concat(o((0,I.processPropsMigrations)("shape",r)),o((0,I.processPropsMigrations)("binding",u)),o(null!==s&&void 0!==s?s:[])),onValidationFailure:p.onValidationFailure,createIntegrityChecker:p.createIntegrityChecker})}},85191:function(e,t,n){"use strict";var r,o=n(50883).default,i=Object.defineProperty,a=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,c={};!function(e,t){for(var n in t)i(e,n,{get:t[n],enumerable:!0})}(c,{ArrowShapeArrowheadEndStyle:function(){return A.ArrowShapeArrowheadEndStyle},ArrowShapeArrowheadStartStyle:function(){return A.ArrowShapeArrowheadStartStyle},AssetRecordType:function(){return P.AssetRecordType},CameraRecordType:function(){return k.CameraRecordType},DefaultColorStyle:function(){return Y.DefaultColorStyle},DefaultColorThemePalette:function(){return Y.DefaultColorThemePalette},DefaultDashStyle:function(){return X.DefaultDashStyle},DefaultFillStyle:function(){return Z.DefaultFillStyle},DefaultFontFamilies:function(){return $.DefaultFontFamilies},DefaultFontStyle:function(){return $.DefaultFontStyle},DefaultHorizontalAlignStyle:function(){return Q.DefaultHorizontalAlignStyle},DefaultSizeStyle:function(){return J.DefaultSizeStyle},DefaultTextAlignStyle:function(){return ee.DefaultTextAlignStyle},DefaultVerticalAlignStyle:function(){return te.DefaultVerticalAlignStyle},DocumentRecordType:function(){return _.DocumentRecordType},EnumStyleProp:function(){return W.EnumStyleProp},GeoShapeGeoStyle:function(){return F.GeoShapeGeoStyle},ImageShapeCrop:function(){return z.ImageShapeCrop},InstancePageStateRecordType:function(){return T.InstancePageStateRecordType},InstancePresenceRecordType:function(){return C.InstancePresenceRecordType},LANGUAGES:function(){return ne.LANGUAGES},LineShapeSplineStyle:function(){return H.LineShapeSplineStyle},PageRecordType:function(){return I.PageRecordType},PointerRecordType:function(){return E.PointerRecordType},StyleProp:function(){return W.StyleProp},TLDOCUMENT_ID:function(){return _.TLDOCUMENT_ID},TLINSTANCE_ID:function(){return j.TLINSTANCE_ID},TLPOINTER_ID:function(){return E.TLPOINTER_ID},TL_CANVAS_UI_COLOR_TYPES:function(){return g.TL_CANVAS_UI_COLOR_TYPES},TL_CURSOR_TYPES:function(){return y.TL_CURSOR_TYPES},TL_HANDLE_TYPES:function(){return m.TL_HANDLE_TYPES},TL_SCRIBBLE_STATES:function(){return w.TL_SCRIBBLE_STATES},arrowBindingMigrations:function(){return d.arrowBindingMigrations},arrowBindingProps:function(){return d.arrowBindingProps},arrowShapeMigrations:function(){return A.arrowShapeMigrations},arrowShapeProps:function(){return A.arrowShapeProps},assetIdValidator:function(){return f.assetIdValidator},assetMigrations:function(){return P.assetMigrations},assetValidator:function(){return P.assetValidator},bindingIdValidator:function(){return p.bindingIdValidator},bookmarkShapeMigrations:function(){return R.bookmarkShapeMigrations},bookmarkShapeProps:function(){return R.bookmarkShapeProps},boxModelValidator:function(){return S.boxModelValidator},canvasUiColorTypeValidator:function(){return g.canvasUiColorTypeValidator},createAssetValidator:function(){return f.createAssetValidator},createBindingId:function(){return O.createBindingId},createBindingPropsMigrationIds:function(){return O.createBindingPropsMigrationIds},createBindingPropsMigrationSequence:function(){return O.createBindingPropsMigrationSequence},createBindingValidator:function(){return p.createBindingValidator},createPresenceStateDerivation:function(){return h.createPresenceStateDerivation},createShapeId:function(){return M.createShapeId},createShapePropsMigrationIds:function(){return M.createShapePropsMigrationIds},createShapePropsMigrationSequence:function(){return M.createShapePropsMigrationSequence},createShapeValidator:function(){return D.createShapeValidator},createTLSchema:function(){return v.createTLSchema},defaultBindingSchemas:function(){return v.defaultBindingSchemas},defaultColorNames:function(){return Y.defaultColorNames},defaultShapeSchemas:function(){return v.defaultShapeSchemas},drawShapeMigrations:function(){return N.drawShapeMigrations},drawShapeProps:function(){return N.drawShapeProps},embedShapeMigrations:function(){return L.embedShapeMigrations},embedShapeProps:function(){return L.embedShapeProps},frameShapeMigrations:function(){return U.frameShapeMigrations},frameShapeProps:function(){return U.frameShapeProps},geoShapeMigrations:function(){return F.geoShapeMigrations},geoShapeProps:function(){return F.geoShapeProps},getDefaultColorTheme:function(){return Y.getDefaultColorTheme},getDefaultTranslationLocale:function(){return ne.getDefaultTranslationLocale},getDefaultUserPresence:function(){return h.getDefaultUserPresence},getShapePropKeysByStyle:function(){return M.getShapePropKeysByStyle},groupShapeMigrations:function(){return B.groupShapeMigrations},groupShapeProps:function(){return B.groupShapeProps},highlightShapeMigrations:function(){return V.highlightShapeMigrations},highlightShapeProps:function(){return V.highlightShapeProps},idValidator:function(){return x.idValidator},imageShapeMigrations:function(){return z.imageShapeMigrations},imageShapeProps:function(){return z.imageShapeProps},isBinding:function(){return O.isBinding},isBindingId:function(){return O.isBindingId},isDocument:function(){return _.isDocument},isPageId:function(){return I.isPageId},isShape:function(){return M.isShape},isShapeId:function(){return M.isShapeId},lineShapeMigrations:function(){return H.lineShapeMigrations},lineShapeProps:function(){return H.lineShapeProps},noteShapeMigrations:function(){return K.noteShapeMigrations},noteShapeProps:function(){return K.noteShapeProps},opacityValidator:function(){return b.opacityValidator},pageIdValidator:function(){return I.pageIdValidator},parentIdValidator:function(){return D.parentIdValidator},pluckPreservingValues:function(){return j.pluckPreservingValues},rootBindingMigrations:function(){return O.rootBindingMigrations},rootShapeMigrations:function(){return M.rootShapeMigrations},scribbleValidator:function(){return w.scribbleValidator},shapeIdValidator:function(){return D.shapeIdValidator},textShapeMigrations:function(){return G.textShapeMigrations},textShapeProps:function(){return G.textShapeProps},vecModelValidator:function(){return S.vecModelValidator},videoShapeMigrations:function(){return q.videoShapeMigrations},videoShapeProps:function(){return q.videoShapeProps}}),e.exports=(r=c,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var c,l=o(u(t));try{var f=function(){var o=c.value;s.call(e,o)||o===n||i(e,o,{get:function(){return t[o]},enumerable:!(r=a(t,o))||r.enumerable})};for(l.s();!(c=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(i({},"__esModule",{value:!0}),r));var l=n(30645),f=n(82350),d=n(19142),p=n(20332),h=n(77656),v=n(3968),g=n(163),y=n(95336),m=n(74340),b=n(47181),w=n(6474),S=n(21346),x=n(22836),P=n(30374),O=n(57267),k=n(79827),_=n(7617),j=n(36727),I=n(53423),T=n(84134),E=n(98263),C=n(25869),M=n(16475),A=n(59790),D=n(48160),R=n(17111),N=n(79853),L=n(65682),U=n(31222),F=n(27810),B=n(44476),V=n(11005),z=n(1446),H=n(5469),K=n(86603),G=n(69266),q=n(56176),W=n(30422),Y=n(27052),X=n(77615),Z=n(44836),$=n(8404),Q=n(58710),J=n(25700),ee=n(96981),te=n(96352),ne=n(67802);(0,l.registerTldrawLibraryVersion)("@tldraw/tlschema","3.7.2","cjs")},163:function(e,t,n){"use strict";var r,o=n(50883).default,i=Object.defineProperty,a=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,c={};!function(e,t){for(var n in t)i(e,n,{get:t[n],enumerable:!0})}(c,{TL_CANVAS_UI_COLOR_TYPES:function(){return f},canvasUiColorTypeValidator:function(){return d}}),e.exports=(r=c,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var c,l=o(u(t));try{var f=function(){var o=c.value;s.call(e,o)||o===n||i(e,o,{get:function(){return t[o]},enumerable:!(r=a(t,o))||r.enumerable})};for(l.s();!(c=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(i({},"__esModule",{value:!0}),r));var l=n(98556),f=new Set(["accent","white","black","selection-stroke","selection-fill","laser","muted-1"]),d=l.T.setEnum(f)},95336:function(e,t,n){"use strict";var r,o=n(50883).default,i=Object.defineProperty,a=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,c={};!function(e,t){for(var n in t)i(e,n,{get:t[n],enumerable:!0})}(c,{TL_CURSOR_TYPES:function(){return f},cursorTypeValidator:function(){return d},cursorValidator:function(){return p}}),e.exports=(r=c,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var c,l=o(u(t));try{var f=function(){var o=c.value;s.call(e,o)||o===n||i(e,o,{get:function(){return t[o]},enumerable:!(r=a(t,o))||r.enumerable})};for(l.s();!(c=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(i({},"__esModule",{value:!0}),r));var l=n(98556),f=new Set(["none","default","pointer","cross","grab","rotate","grabbing","resize-edge","resize-corner","text","move","ew-resize","ns-resize","nesw-resize","nwse-resize","nesw-rotate","nwse-rotate","swne-rotate","senw-rotate","zoom-in","zoom-out"]),d=l.T.setEnum(f),p=l.T.object({type:d,rotation:l.T.number})},74340:function(e,t,n){"use strict";var r,o=n(50883).default,i=Object.defineProperty,a=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,c={};!function(e,t){for(var n in t)i(e,n,{get:t[n],enumerable:!0})}(c,{TL_HANDLE_TYPES:function(){return l}}),e.exports=(r=c,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var c,l=o(u(t));try{var f=function(){var o=c.value;s.call(e,o)||o===n||i(e,o,{get:function(){return t[o]},enumerable:!(r=a(t,o))||r.enumerable})};for(l.s();!(c=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(i({},"__esModule",{value:!0}),r));var l=new Set(["vertex","virtual","create","clone"])},47181:function(e,t,n){"use strict";var r,o=n(50883).default,i=Object.defineProperty,a=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,c={};!function(e,t){for(var n in t)i(e,n,{get:t[n],enumerable:!0})}(c,{opacityValidator:function(){return f}}),e.exports=(r=c,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var c,l=o(u(t));try{var f=function(){var o=c.value;s.call(e,o)||o===n||i(e,o,{get:function(){return t[o]},enumerable:!(r=a(t,o))||r.enumerable})};for(l.s();!(c=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(i({},"__esModule",{value:!0}),r));var l=n(98556),f=l.T.number.check((function(e){if(e<0||e>1)throw new l.T.ValidationError("Opacity must be between 0 and 1")}))},6474:function(e,t,n){"use strict";var r,o=n(50883).default,i=Object.defineProperty,a=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,c={};!function(e,t){for(var n in t)i(e,n,{get:t[n],enumerable:!0})}(c,{TL_SCRIBBLE_STATES:function(){return p},scribbleValidator:function(){return h}}),e.exports=(r=c,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var c,l=o(u(t));try{var f=function(){var o=c.value;s.call(e,o)||o===n||i(e,o,{get:function(){return t[o]},enumerable:!(r=a(t,o))||r.enumerable})};for(l.s();!(c=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(i({},"__esModule",{value:!0}),r));var l=n(98556),f=n(163),d=n(21346),p=new Set(["starting","paused","active","stopping"]),h=l.T.object({id:l.T.string,points:l.T.arrayOf(d.vecModelValidator),size:l.T.positiveNumber,color:f.canvasUiColorTypeValidator,opacity:l.T.number,state:l.T.setEnum(p),delay:l.T.number,shrink:l.T.number,taper:l.T.boolean})},21346:function(e,t,n){"use strict";var r,o=n(50883).default,i=Object.defineProperty,a=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,c={};!function(e,t){for(var n in t)i(e,n,{get:t[n],enumerable:!0})}(c,{boxModelValidator:function(){return d},vecModelValidator:function(){return f}}),e.exports=(r=c,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var c,l=o(u(t));try{var f=function(){var o=c.value;s.call(e,o)||o===n||i(e,o,{get:function(){return t[o]},enumerable:!(r=a(t,o))||r.enumerable})};for(l.s();!(c=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(i({},"__esModule",{value:!0}),r));var l=n(98556),f=l.T.object({x:l.T.number,y:l.T.number,z:l.T.number.optional()}),d=l.T.object({x:l.T.number,y:l.T.number,w:l.T.number,h:l.T.number})},22836:function(e,t,n){"use strict";var r,o=n(50883).default,i=Object.defineProperty,a=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,c={};!function(e,t){for(var n in t)i(e,n,{get:t[n],enumerable:!0})}(c,{idValidator:function(){return f}}),e.exports=(r=c,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var c,l=o(u(t));try{var f=function(){var o=c.value;s.call(e,o)||o===n||i(e,o,{get:function(){return t[o]},enumerable:!(r=a(t,o))||r.enumerable})};for(l.s();!(c=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(i({},"__esModule",{value:!0}),r));var l=n(98556);function f(e){return l.T.string.refine((function(t){if(!t.startsWith("".concat(e,":")))throw new Error("".concat(e,' ID must start with "').concat(e,':"'));return t}))}},30374:function(e,t,n){"use strict";var r,o=n(50883).default,i=Object.defineProperty,a=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,c={};!function(e,t){for(var n in t)i(e,n,{get:t[n],enumerable:!0})}(c,{AssetRecordType:function(){return m},assetMigrations:function(){return y},assetValidator:function(){return v},assetVersions:function(){return g}}),e.exports=(r=c,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var c,l=o(u(t));try{var f=function(){var o=c.value;s.call(e,o)||o===n||i(e,o,{get:function(){return t[o]},enumerable:!(r=a(t,o))||r.enumerable})};for(l.s();!(c=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(i({},"__esModule",{value:!0}),r));var l=n(75881),f=n(98556),d=n(14941),p=n(71430),h=n(8336),v=f.T.model("asset",f.T.union("type",{image:p.imageAssetValidator,video:h.videoAssetValidator,bookmark:d.bookmarkAssetValidator})),g=(0,l.createMigrationIds)("com.tldraw.asset",{AddMeta:1}),y=(0,l.createRecordMigrationSequence)({sequenceId:"com.tldraw.asset",recordType:"asset",sequence:[{id:g.AddMeta,up:function(e){e.meta={}}}]}),m=(0,l.createRecordType)("asset",{validator:v,scope:"document"}).withDefaultProperties((function(){return{meta:{}}}))},57267:function(e,t,n){"use strict";var r,o=n(50883).default,i=Object.defineProperty,a=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,c={};!function(e,t){for(var n in t)i(e,n,{get:t[n],enumerable:!0})}(c,{createBindingId:function(){return m},createBindingPropsMigrationIds:function(){return w},createBindingPropsMigrationSequence:function(){return b},createBindingRecordType:function(){return S},isBinding:function(){return g},isBindingId:function(){return y},rootBindingMigrations:function(){return v},rootBindingVersions:function(){return h}}),e.exports=(r=c,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var c,l=o(u(t));try{var f=function(){var o=c.value;s.call(e,o)||o===n||i(e,o,{get:function(){return t[o]},enumerable:!(r=a(t,o))||r.enumerable})};for(l.s();!(c=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(i({},"__esModule",{value:!0}),r));var l=n(75881),f=n(30645),d=n(98556),p=n(20332),h=(0,l.createMigrationIds)("com.tldraw.binding",{}),v=(0,l.createRecordMigrationSequence)({sequenceId:"com.tldraw.binding",recordType:"binding",sequence:[]});function g(e){return!!e&&"binding"===e.typeName}function y(e){return!!e&&e.startsWith("binding:")}function m(e){return"binding:".concat(null!==e&&void 0!==e?e:(0,f.uniqueId)())}function b(e){return e}function w(e,t){return(0,f.mapObjectMapValues)(t,(function(t,n){return"com.tldraw.binding.".concat(e,"/").concat(n)}))}function S(e){return(0,l.createRecordType)("binding",{scope:"document",validator:d.T.model("binding",d.T.union("type",(0,f.mapObjectMapValues)(e,(function(e,t){var n=t.props,r=t.meta;return(0,p.createBindingValidator)(e,n,r)}))))}).withDefaultProperties((function(){return{meta:{}}}))}},79827:function(e,t,n){"use strict";var r,o=n(50883).default,i=Object.defineProperty,a=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,c={};!function(e,t){for(var n in t)i(e,n,{get:t[n],enumerable:!0})}(c,{CameraRecordType:function(){return g},cameraMigrations:function(){return v},cameraValidator:function(){return p},cameraVersions:function(){return h}}),e.exports=(r=c,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var c,l=o(u(t));try{var f=function(){var o=c.value;s.call(e,o)||o===n||i(e,o,{get:function(){return t[o]},enumerable:!(r=a(t,o))||r.enumerable})};for(l.s();!(c=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(i({},"__esModule",{value:!0}),r));var l=n(75881),f=n(98556),d=n(22836),p=f.T.model("camera",f.T.object({typeName:f.T.literal("camera"),id:(0,d.idValidator)("camera"),x:f.T.number,y:f.T.number,z:f.T.number,meta:f.T.jsonValue})),h=(0,l.createMigrationIds)("com.tldraw.camera",{AddMeta:1}),v=(0,l.createRecordMigrationSequence)({sequenceId:"com.tldraw.camera",recordType:"camera",sequence:[{id:h.AddMeta,up:function(e){e.meta={}}}]}),g=(0,l.createRecordType)("camera",{validator:p,scope:"session"}).withDefaultProperties((function(){return{x:0,y:0,z:1,meta:{}}}))},7617:function(e,t,n){"use strict";var r,o=n(50883).default,i=Object.defineProperty,a=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,c={};!function(e,t){for(var n in t)i(e,n,{get:t[n],enumerable:!0})}(c,{DocumentRecordType:function(){return g},TLDOCUMENT_ID:function(){return y},documentMigrations:function(){return v},documentValidator:function(){return d},documentVersions:function(){return h},isDocument:function(){return p}}),e.exports=(r=c,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var c,l=o(u(t));try{var f=function(){var o=c.value;s.call(e,o)||o===n||i(e,o,{get:function(){return t[o]},enumerable:!(r=a(t,o))||r.enumerable})};for(l.s();!(c=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(i({},"__esModule",{value:!0}),r));var l=n(75881),f=n(98556),d=f.T.model("document",f.T.object({typeName:f.T.literal("document"),id:f.T.literal("document:document"),gridSize:f.T.number,name:f.T.string,meta:f.T.jsonValue}));function p(e){return!!e&&"document"===e.typeName}var h=(0,l.createMigrationIds)("com.tldraw.document",{AddName:1,AddMeta:2}),v=(0,l.createRecordMigrationSequence)({sequenceId:"com.tldraw.document",recordType:"document",sequence:[{id:h.AddName,up:function(e){e.name=""},down:function(e){delete e.name}},{id:h.AddMeta,up:function(e){e.meta={}}}]}),g=(0,l.createRecordType)("document",{validator:d,scope:"document"}).withDefaultProperties((function(){return{gridSize:10,name:"",meta:{}}})),y=g.createId("document")},36727:function(e,t,n){"use strict";var r,o=n(91847).default,i=n(12897).default,a=n(85715).default,u=n(50883).default,s=["dialog"],c=["propsForNextShape"],l=["propsForNextShape"],f=["userId"],d=["opacity"],p=["propsForNextShape"],h=["propsForNextShape"],v=["color"],g=["isReadOnly"],y=["scribble"],m=["insets"],b=["duplicateProps"],w=["canMoveCamera"],S=Object.defineProperty,x=Object.getOwnPropertyDescriptor,P=Object.getOwnPropertyNames,O=Object.prototype.hasOwnProperty,k={};!function(e,t){for(var n in t)S(e,n,{get:t[n],enumerable:!0})}(k,{TLINSTANCE_ID:function(){return V},createInstanceRecordType:function(){return U},instanceIdValidator:function(){return L},instanceMigrations:function(){return B},instanceVersions:function(){return F},pluckPreservingValues:function(){return N},shouldKeyBePreservedBetweenSessions:function(){return R}}),e.exports=(r=k,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,i=u(P(t));try{var a=function(){var i=o.value;O.call(e,i)||i===n||S(e,i,{get:function(){return t[i]},enumerable:!(r=x(t,i))||r.enumerable})};for(i.s();!(o=i.n()).done;)a()}catch(s){i.e(s)}finally{i.f()}}return e}(S({},"__esModule",{value:!0}),r));var _=n(75881),j=n(30645),I=n(98556),T=n(21346),E=n(22836),C=n(95336),M=n(47181),A=n(6474),D=n(53423),R={id:!1,typeName:!1,currentPageId:!1,opacityForNextShape:!1,stylesForNextShape:!1,followingUserId:!1,highlightedUserIds:!1,brush:!1,cursor:!1,scribbles:!1,isFocusMode:!0,isDebugMode:!0,isToolLocked:!0,exportBackground:!0,screenBounds:!0,insets:!0,zoomBrush:!1,chatMessage:!1,isChatting:!1,isPenMode:!1,isGridMode:!0,isFocused:!0,devicePixelRatio:!0,isCoarsePointer:!0,isHoveringCanvas:!1,openMenus:!1,isChangingStyle:!1,isReadonly:!0,meta:!1,duplicateProps:!1};function N(e){return e?(0,j.filterEntries)(e,(function(e){return R[e]})):null}var L=(0,E.idValidator)("instance");function U(e){var t,n={},r=u(e);try{for(r.s();!(t=r.n()).done;){var o=a(t.value,2),i=o[0],s=o[1];n[i]=I.T.optional(s)}}catch(l){r.e(l)}finally{r.f()}var c=I.T.model("instance",I.T.object({typeName:I.T.literal("instance"),id:(0,E.idValidator)("instance"),currentPageId:D.pageIdValidator,followingUserId:I.T.string.nullable(),brush:T.boxModelValidator.nullable(),opacityForNextShape:M.opacityValidator,stylesForNextShape:I.T.object(n),cursor:C.cursorValidator,scribbles:I.T.arrayOf(A.scribbleValidator),isFocusMode:I.T.boolean,isDebugMode:I.T.boolean,isToolLocked:I.T.boolean,exportBackground:I.T.boolean,screenBounds:T.boxModelValidator,insets:I.T.arrayOf(I.T.boolean),zoomBrush:T.boxModelValidator.nullable(),isPenMode:I.T.boolean,isGridMode:I.T.boolean,chatMessage:I.T.string,isChatting:I.T.boolean,highlightedUserIds:I.T.arrayOf(I.T.string),isFocused:I.T.boolean,devicePixelRatio:I.T.number,isCoarsePointer:I.T.boolean,isHoveringCanvas:I.T.boolean.nullable(),openMenus:I.T.arrayOf(I.T.string),isChangingStyle:I.T.boolean,isReadonly:I.T.boolean,meta:I.T.jsonValue,duplicateProps:I.T.object({shapeIds:I.T.arrayOf((0,E.idValidator)("shape")),offset:I.T.object({x:I.T.number,y:I.T.number})}).nullable()}));return(0,_.createRecordType)("instance",{validator:c,scope:"session",ephemeralKeys:{currentPageId:!1,meta:!1,followingUserId:!0,opacityForNextShape:!0,stylesForNextShape:!0,brush:!0,cursor:!0,scribbles:!0,isFocusMode:!0,isDebugMode:!0,isToolLocked:!0,exportBackground:!0,screenBounds:!0,insets:!0,zoomBrush:!0,isPenMode:!0,isGridMode:!0,chatMessage:!0,isChatting:!0,highlightedUserIds:!0,isFocused:!0,devicePixelRatio:!0,isCoarsePointer:!0,isHoveringCanvas:!0,openMenus:!0,isChangingStyle:!0,isReadonly:!0,duplicateProps:!0}}).withDefaultProperties((function(){return{followingUserId:null,opacityForNextShape:1,stylesForNextShape:{},brush:null,scribbles:[],cursor:{type:"default",rotation:0},isFocusMode:!1,exportBackground:!1,isDebugMode:!1,isToolLocked:!1,screenBounds:{x:0,y:0,w:1080,h:720},insets:[!1,!1,!1,!1],zoomBrush:null,isGridMode:!1,isPenMode:!1,chatMessage:"",isChatting:!1,highlightedUserIds:[],isFocused:!1,devicePixelRatio:"undefined"===typeof window?1:window.devicePixelRatio,isCoarsePointer:!1,isHoveringCanvas:null,openMenus:[],isChangingStyle:!1,isReadonly:!1,meta:{},duplicateProps:null}}))}var F=(0,_.createMigrationIds)("com.tldraw.instance",{AddTransparentExportBgs:1,RemoveDialog:2,AddToolLockMode:3,RemoveExtraPropsForNextShape:4,AddLabelColor:5,AddFollowingUserId:6,RemoveAlignJustify:7,AddZoom:8,AddVerticalAlign:9,AddScribbleDelay:10,RemoveUserId:11,AddIsPenModeAndIsGridMode:12,HoistOpacity:13,AddChat:14,AddHighlightedUserIds:15,ReplacePropsForNextShapeWithStylesForNextShape:16,AddMeta:17,RemoveCursorColor:18,AddLonelyProperties:19,ReadOnlyReadonly:20,AddHoveringCanvas:21,AddScribbles:22,AddInset:23,AddDuplicateProps:24,RemoveCanMoveCamera:25}),B=(0,_.createRecordMigrationSequence)({sequenceId:"com.tldraw.instance",recordType:"instance",sequence:[{id:F.AddTransparentExportBgs,up:function(e){return i(i({},e),{},{exportBackground:!0})}},{id:F.RemoveDialog,up:function(e){e.dialog;return o(e,s)}},{id:F.AddToolLockMode,up:function(e){return i(i({},e),{},{isToolLocked:!1})}},{id:F.RemoveExtraPropsForNextShape,up:function(e){var t=e.propsForNextShape,n=o(e,c);return i(i({},n),{},{propsForNextShape:Object.fromEntries(Object.entries(t).filter((function(e){var t=a(e,1)[0];return["color","labelColor","dash","fill","size","font","align","verticalAlign","icon","geo","arrowheadStart","arrowheadEnd","spline"].includes(t)})))})}},{id:F.AddLabelColor,up:function(e){var t=e.propsForNextShape,n=o(e,l);return i(i({},n),{},{propsForNextShape:i(i({},t),{},{labelColor:"black"})})}},{id:F.AddFollowingUserId,up:function(e){return i(i({},e),{},{followingUserId:null})}},{id:F.RemoveAlignJustify,up:function(e){var t=e.propsForNextShape.align;return"justify"===t&&(t="start"),i(i({},e),{},{propsForNextShape:i(i({},e.propsForNextShape),{},{align:t})})}},{id:F.AddZoom,up:function(e){return i(i({},e),{},{zoomBrush:null})}},{id:F.AddVerticalAlign,up:function(e){return i(i({},e),{},{propsForNextShape:i(i({},e.propsForNextShape),{},{verticalAlign:"middle"})})}},{id:F.AddScribbleDelay,up:function(e){return null!==e.scribble?i(i({},e),{},{scribble:i(i({},e.scribble),{},{delay:0})}):i({},e)}},{id:F.RemoveUserId,up:function(e){e.userId;return o(e,f)}},{id:F.AddIsPenModeAndIsGridMode,up:function(e){return i(i({},e),{},{isPenMode:!1,isGridMode:!1})}},{id:F.HoistOpacity,up:function(e){var t=e.propsForNextShape,n=t.opacity,r=o(t,d),a=o(e,p);return i(i({},a),{},{opacityForNextShape:Number(null!==n&&void 0!==n?n:"1"),propsForNextShape:r})}},{id:F.AddChat,up:function(e){return i(i({},e),{},{chatMessage:"",isChatting:!1})}},{id:F.AddHighlightedUserIds,up:function(e){return i(i({},e),{},{highlightedUserIds:[]})}},{id:F.ReplacePropsForNextShapeWithStylesForNextShape,up:function(e){e.propsForNextShape;var t=o(e,h);return i(i({},t),{},{stylesForNextShape:{}})}},{id:F.AddMeta,up:function(e){return i(i({},e),{},{meta:{}})}},{id:F.RemoveCursorColor,up:function(e){var t=e.cursor,n=(t.color,o(t,v));return i(i({},e),{},{cursor:n})}},{id:F.AddLonelyProperties,up:function(e){return i(i({},e),{},{canMoveCamera:!0,isFocused:!1,devicePixelRatio:1,isCoarsePointer:!1,openMenus:[],isChangingStyle:!1,isReadOnly:!1})}},{id:F.ReadOnlyReadonly,up:function(e){var t=e.isReadOnly,n=o(e,g);return i(i({},n),{},{isReadonly:t})}},{id:F.AddHoveringCanvas,up:function(e){return i(i({},e),{},{isHoveringCanvas:null})}},{id:F.AddScribbles,up:function(e){e.scribble;var t=o(e,y);return i(i({},t),{},{scribbles:[]})}},{id:F.AddInset,up:function(e){return i(i({},e),{},{insets:[!1,!1,!1,!1]})},down:function(e){e.insets;var t=o(e,m);return i({},t)}},{id:F.AddDuplicateProps,up:function(e){return i(i({},e),{},{duplicateProps:null})},down:function(e){e.duplicateProps;var t=o(e,b);return i({},t)}},{id:F.RemoveCanMoveCamera,up:function(e){e.canMoveCamera;var t=o(e,w);return i({},t)},down:function(e){return i(i({},e),{},{canMoveCamera:!0})}}]}),V="instance:instance"},53423:function(e,t,n){"use strict";var r,o=n(50883).default,i=Object.defineProperty,a=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,c={};!function(e,t){for(var n in t)i(e,n,{get:t[n],enumerable:!0})}(c,{PageRecordType:function(){return g},isPageId:function(){return y},pageIdValidator:function(){return d},pageMigrations:function(){return v},pageValidator:function(){return p},pageVersions:function(){return h}}),e.exports=(r=c,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var c,l=o(u(t));try{var f=function(){var o=c.value;s.call(e,o)||o===n||i(e,o,{get:function(){return t[o]},enumerable:!(r=a(t,o))||r.enumerable})};for(l.s();!(c=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(i({},"__esModule",{value:!0}),r));var l=n(75881),f=n(98556),d=(0,n(22836).idValidator)("page"),p=f.T.model("page",f.T.object({typeName:f.T.literal("page"),id:d,name:f.T.string,index:f.T.indexKey,meta:f.T.jsonValue})),h=(0,l.createMigrationIds)("com.tldraw.page",{AddMeta:1}),v=(0,l.createRecordMigrationSequence)({sequenceId:"com.tldraw.page",recordType:"page",sequence:[{id:h.AddMeta,up:function(e){e.meta={}}}]}),g=(0,l.createRecordType)("page",{validator:p,scope:"document"}).withDefaultProperties((function(){return{meta:{}}}));function y(e){return g.isId(e)}},84134:function(e,t,n){"use strict";var r,o=n(50883).default,i=Object.defineProperty,a=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,c={};!function(e,t){for(var n in t)i(e,n,{get:t[n],enumerable:!0})}(c,{InstancePageStateRecordType:function(){return m},instancePageStateMigrations:function(){return y},instancePageStateValidator:function(){return v},instancePageStateVersions:function(){return g}}),e.exports=(r=c,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var c,l=o(u(t));try{var f=function(){var o=c.value;s.call(e,o)||o===n||i(e,o,{get:function(){return t[o]},enumerable:!(r=a(t,o))||r.enumerable})};for(l.s();!(c=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(i({},"__esModule",{value:!0}),r));var l=n(75881),f=n(98556),d=n(22836),p=n(48160),h=n(53423),v=f.T.model("instance_page_state",f.T.object({typeName:f.T.literal("instance_page_state"),id:(0,d.idValidator)("instance_page_state"),pageId:h.pageIdValidator,selectedShapeIds:f.T.arrayOf(p.shapeIdValidator),hintingShapeIds:f.T.arrayOf(p.shapeIdValidator),erasingShapeIds:f.T.arrayOf(p.shapeIdValidator),hoveredShapeId:p.shapeIdValidator.nullable(),editingShapeId:p.shapeIdValidator.nullable(),croppingShapeId:p.shapeIdValidator.nullable(),focusedGroupId:p.shapeIdValidator.nullable(),meta:f.T.jsonValue})),g=(0,l.createMigrationIds)("com.tldraw.instance_page_state",{AddCroppingId:1,RemoveInstanceIdAndCameraId:2,AddMeta:3,RenameProperties:4,RenamePropertiesAgain:5}),y=(0,l.createRecordMigrationSequence)({sequenceId:"com.tldraw.instance_page_state",recordType:"instance_page_state",sequence:[{id:g.AddCroppingId,up:function(e){e.croppingShapeId=null}},{id:g.RemoveInstanceIdAndCameraId,up:function(e){delete e.instanceId,delete e.cameraId}},{id:g.AddMeta,up:function(e){e.meta={}}},{id:g.RenameProperties,up:function(e){},down:function(e){}},{id:g.RenamePropertiesAgain,up:function(e){var t,n;e.selectedShapeIds=e.selectedIds,delete e.selectedIds,e.hintingShapeIds=e.hintingIds,delete e.hintingIds,e.erasingShapeIds=e.erasingIds,delete e.erasingIds,e.hoveredShapeId=e.hoveredId,delete e.hoveredId,e.editingShapeId=e.editingId,delete e.editingId,e.croppingShapeId=null!==(t=null!==(n=e.croppingShapeId)&&void 0!==n?n:e.croppingId)&&void 0!==t?t:null,delete e.croppingId,e.focusedGroupId=e.focusLayerId,delete e.focusLayerId},down:function(e){e.selectedIds=e.selectedShapeIds,delete e.selectedShapeIds,e.hintingIds=e.hintingShapeIds,delete e.hintingShapeIds,e.erasingIds=e.erasingShapeIds,delete e.erasingShapeIds,e.hoveredId=e.hoveredShapeId,delete e.hoveredShapeId,e.editingId=e.editingShapeId,delete e.editingShapeId,e.croppingId=e.croppingShapeId,delete e.croppingShapeId,e.focusLayerId=e.focusedGroupId,delete e.focusedGroupId}}]}),m=(0,l.createRecordType)("instance_page_state",{validator:v,scope:"session",ephemeralKeys:{pageId:!1,selectedShapeIds:!1,editingShapeId:!1,croppingShapeId:!1,meta:!1,hintingShapeIds:!0,erasingShapeIds:!0,hoveredShapeId:!0,focusedGroupId:!0}}).withDefaultProperties((function(){return{editingShapeId:null,croppingShapeId:null,selectedShapeIds:[],hoveredShapeId:null,erasingShapeIds:[],hintingShapeIds:[],focusedGroupId:null,meta:{}}}))},98263:function(e,t,n){"use strict";var r,o=n(50883).default,i=Object.defineProperty,a=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,c={};!function(e,t){for(var n in t)i(e,n,{get:t[n],enumerable:!0})}(c,{PointerRecordType:function(){return g},TLPOINTER_ID:function(){return y},pointerMigrations:function(){return v},pointerValidator:function(){return p},pointerVersions:function(){return h}}),e.exports=(r=c,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var c,l=o(u(t));try{var f=function(){var o=c.value;s.call(e,o)||o===n||i(e,o,{get:function(){return t[o]},enumerable:!(r=a(t,o))||r.enumerable})};for(l.s();!(c=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(i({},"__esModule",{value:!0}),r));var l=n(75881),f=n(98556),d=n(22836),p=f.T.model("pointer",f.T.object({typeName:f.T.literal("pointer"),id:(0,d.idValidator)("pointer"),x:f.T.number,y:f.T.number,lastActivityTimestamp:f.T.number,meta:f.T.jsonValue})),h=(0,l.createMigrationIds)("com.tldraw.pointer",{AddMeta:1}),v=(0,l.createRecordMigrationSequence)({sequenceId:"com.tldraw.pointer",recordType:"pointer",sequence:[{id:h.AddMeta,up:function(e){e.meta={}}}]}),g=(0,l.createRecordType)("pointer",{validator:p,scope:"session"}).withDefaultProperties((function(){return{x:0,y:0,lastActivityTimestamp:0,meta:{}}})),y=g.createId("pointer")},25869:function(e,t,n){"use strict";var r,o=n(50883).default,i=Object.defineProperty,a=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,c={};!function(e,t){for(var n in t)i(e,n,{get:t[n],enumerable:!0})}(c,{InstancePresenceRecordType:function(){return b},instancePresenceMigrations:function(){return m},instancePresenceValidator:function(){return g},instancePresenceVersions:function(){return y}}),e.exports=(r=c,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var c,l=o(u(t));try{var f=function(){var o=c.value;s.call(e,o)||o===n||i(e,o,{get:function(){return t[o]},enumerable:!(r=a(t,o))||r.enumerable})};for(l.s();!(c=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(i({},"__esModule",{value:!0}),r));var l=n(75881),f=n(98556),d=n(21346),p=n(22836),h=n(95336),v=n(6474),g=f.T.model("instance_presence",f.T.object({typeName:f.T.literal("instance_presence"),id:(0,p.idValidator)("instance_presence"),userId:f.T.string,userName:f.T.string,lastActivityTimestamp:f.T.number.nullable(),followingUserId:f.T.string.nullable(),cursor:f.T.object({x:f.T.number,y:f.T.number,type:h.cursorTypeValidator,rotation:f.T.number}).nullable(),color:f.T.string,camera:f.T.object({x:f.T.number,y:f.T.number,z:f.T.number}).nullable(),screenBounds:d.boxModelValidator.nullable(),selectedShapeIds:f.T.arrayOf((0,p.idValidator)("shape")),currentPageId:(0,p.idValidator)("page"),brush:d.boxModelValidator.nullable(),scribbles:f.T.arrayOf(v.scribbleValidator),chatMessage:f.T.string,meta:f.T.jsonValue})),y=(0,l.createMigrationIds)("com.tldraw.instance_presence",{AddScribbleDelay:1,RemoveInstanceId:2,AddChatMessage:3,AddMeta:4,RenameSelectedShapeIds:5,NullableCameraCursor:6}),m=(0,l.createRecordMigrationSequence)({sequenceId:"com.tldraw.instance_presence",recordType:"instance_presence",sequence:[{id:y.AddScribbleDelay,up:function(e){null!==e.scribble&&(e.scribble.delay=0)}},{id:y.RemoveInstanceId,up:function(e){delete e.instanceId}},{id:y.AddChatMessage,up:function(e){e.chatMessage=""}},{id:y.AddMeta,up:function(e){e.meta={}}},{id:y.RenameSelectedShapeIds,up:function(e){}},{id:y.NullableCameraCursor,up:function(e){},down:function(e){null===e.camera&&(e.camera={x:0,y:0,z:1}),null===e.lastActivityTimestamp&&(e.lastActivityTimestamp=0),null===e.cursor&&(e.cursor={type:"default",x:0,y:0,rotation:0}),null===e.screenBounds&&(e.screenBounds={x:0,y:0,w:1,h:1})}}]}),b=(0,l.createRecordType)("instance_presence",{validator:g,scope:"presence"}).withDefaultProperties((function(){return{lastActivityTimestamp:null,followingUserId:null,color:"#FF0000",camera:null,cursor:null,screenBounds:null,selectedShapeIds:[],brush:null,scribbles:[],chatMessage:"",meta:{}}}))},16475:function(e,t,n){"use strict";var r,o=n(85715).default,i=n(50883).default,a=Object.defineProperty,u=Object.getOwnPropertyDescriptor,s=Object.getOwnPropertyNames,c=Object.prototype.hasOwnProperty,l={};!function(e,t){for(var n in t)a(e,n,{get:t[n],enumerable:!0})}(l,{createShapeId:function(){return w},createShapePropsMigrationIds:function(){return P},createShapePropsMigrationSequence:function(){return x},createShapeRecordType:function(){return O},getShapePropKeysByStyle:function(){return S},isShape:function(){return m},isShapeId:function(){return b},rootShapeMigrations:function(){return y},rootShapeVersions:function(){return g}}),e.exports=(r=l,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,l=i(s(t));try{var f=function(){var i=o.value;c.call(e,i)||i===n||a(e,i,{get:function(){return t[i]},enumerable:!(r=u(t,i))||r.enumerable})};for(l.s();!(o=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(a({},"__esModule",{value:!0}),r));var f=n(75881),d=n(30645),p=n(98556),h=n(48160),v=n(30422),g=(0,f.createMigrationIds)("com.tldraw.shape",{AddIsLocked:1,HoistOpacity:2,AddMeta:3,AddWhite:4}),y=(0,f.createRecordMigrationSequence)({sequenceId:"com.tldraw.shape",recordType:"shape",sequence:[{id:g.AddIsLocked,up:function(e){e.isLocked=!1},down:function(e){delete e.isLocked}},{id:g.HoistOpacity,up:function(e){var t;e.opacity=Number(null!==(t=e.props.opacity)&&void 0!==t?t:"1"),delete e.props.opacity},down:function(e){var t=e.opacity;delete e.opacity,e.props.opacity=t<.175?"0.1":t<.375?"0.25":t<.625?"0.5":t<.875?"0.75":"1"}},{id:g.AddMeta,up:function(e){e.meta={}}},{id:g.AddWhite,up:function(e){},down:function(e){"white"===e.props.color&&(e.props.color="black")}}]});function m(e){return!!e&&"shape"===e.typeName}function b(e){return!!e&&e.startsWith("shape:")}function w(e){return"shape:".concat(null!==e&&void 0!==e?e:(0,d.uniqueId)())}function S(e){for(var t=new Map,n=0,r=Object.entries(e);n<r.length;n++){var i=o(r[n],2),a=i[0],u=i[1];if(u instanceof v.StyleProp){if(t.has(u))throw new Error("Duplicate style prop ".concat(u.id,". Each style prop can only be used once within a shape."));t.set(u,a)}}return t}function x(e){return e}function P(e,t){return(0,d.mapObjectMapValues)(t,(function(t,n){return"com.tldraw.shape.".concat(e,"/").concat(n)}))}function O(e){return(0,f.createRecordType)("shape",{scope:"document",validator:p.T.model("shape",p.T.union("type",(0,d.mapObjectMapValues)(e,(function(e,t){var n=t.props,r=t.meta;return(0,h.createShapeValidator)(e,n,r)}))))}).withDefaultProperties((function(){return{x:0,y:0,rotation:0,isLocked:!1,opacity:1,meta:{}}}))}},17359:function(e,t,n){"use strict";var r,o=n(85715).default,i=n(50883).default,a=Object.defineProperty,u=Object.getOwnPropertyDescriptor,s=Object.getOwnPropertyNames,c=Object.prototype.hasOwnProperty,l={};!function(e,t){for(var n in t)a(e,n,{get:t[n],enumerable:!0})}(l,{createPropsMigration:function(){return h},processPropsMigrations:function(){return p}}),e.exports=(r=l,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,l=i(s(t));try{var f=function(){var i=o.value;c.call(e,i)||i===n||a(e,i,{get:function(){return t[i]},enumerable:!(r=u(t,i))||r.enumerable})};for(l.s();!(o=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(a({},"__esModule",{value:!0}),r));var f=n(75881),d=n(30645);function p(e,t){for(var n=[],r=function(){var t=o(a[i],2),r=t[0],u=t[1].migrations,s="com.tldraw.".concat(e,".").concat(r);u?"sequenceId"in u?((0,d.assert)(s===u.sequenceId,"sequenceId mismatch for ".concat(r," ").concat(f.RecordType," migrations. Expected '").concat(s,"', got '").concat(u.sequenceId,"'")),n.push(u)):"sequence"in u?n.push((0,f.createMigrationSequence)({sequenceId:s,retroactive:!1,sequence:u.sequence.map((function(t){return"id"in t?h(e,r,t):t}))})):n.push((0,f.createMigrationSequence)({sequenceId:s,retroactive:!1,sequence:Object.keys(u.migrators).map((function(e){return Number(e)})).sort((function(e,t){return e-t})).map((function(t){return{id:"".concat(s,"/").concat(t),scope:"record",filter:function(t){return t.typeName===e&&t.type===r},up:function(e){var n=u.migrators[t].up(e);if(n)return n},down:function(e){var n=u.migrators[t].down(e);if(n)return n}}}))})):n.push((0,f.createMigrationSequence)({sequenceId:s,retroactive:!1,sequence:[]}))},i=0,a=Object.entries(t);i<a.length;i++)r();return n}function h(e,t,n){return{id:n.id,dependsOn:n.dependsOn,scope:"record",filter:function(n){return n.typeName===e&&n.type===t},up:function(e){var t=n.up(e.props);t&&(e.props=t)},down:"function"===typeof n.down?function(e){var t=n.down(e.props);t&&(e.props=t)}:void 0}}},59790:function(e,t,n){"use strict";var r,o=n(50883).default,i=Object.defineProperty,a=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,c={};!function(e,t){for(var n in t)i(e,n,{get:t[n],enumerable:!0})}(c,{ArrowShapeArrowheadEndStyle:function(){return O},ArrowShapeArrowheadStartStyle:function(){return P},arrowShapeMigrations:function(){return I},arrowShapeProps:function(){return k},arrowShapeVersions:function(){return _}}),e.exports=(r=c,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var c,l=o(u(t));try{var f=function(){var o=c.value;s.call(e,o)||o===n||i(e,o,{get:function(){return t[o]},enumerable:!(r=a(t,o))||r.enumerable})};for(l.s();!(c=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(i({},"__esModule",{value:!0}),r));var l=n(75881),f=n(98556),d=n(21346),p=n(57267),h=n(16475),v=n(17359),g=n(30422),y=n(27052),m=n(77615),b=n(44836),w=n(8404),S=n(25700),x=["arrow","triangle","square","dot","pipe","diamond","inverted","bar","none"],P=g.StyleProp.defineEnum("tldraw:arrowheadStart",{defaultValue:"none",values:x}),O=g.StyleProp.defineEnum("tldraw:arrowheadEnd",{defaultValue:"arrow",values:x}),k={labelColor:y.DefaultLabelColorStyle,color:y.DefaultColorStyle,fill:b.DefaultFillStyle,dash:m.DefaultDashStyle,size:S.DefaultSizeStyle,arrowheadStart:P,arrowheadEnd:O,font:w.DefaultFontStyle,start:d.vecModelValidator,end:d.vecModelValidator,bend:f.T.number,text:f.T.string,labelPosition:f.T.number,scale:f.T.nonZeroNumber},_=(0,h.createShapePropsMigrationIds)("arrow",{AddLabelColor:1,AddIsPrecise:2,AddLabelPosition:3,ExtractBindings:4,AddScale:5});function j(e){return(0,v.createPropsMigration)("shape","arrow",e)}var I=(0,l.createMigrationSequence)({sequenceId:"com.tldraw.shape.arrow",retroactive:!1,sequence:[j({id:_.AddLabelColor,up:function(e){e.labelColor="black"},down:"retired"}),j({id:_.AddIsPrecise,up:function(e){var t=e.start,n=e.end;"binding"===t.type&&(t.isPrecise=!(.5===t.normalizedAnchor.x&&.5===t.normalizedAnchor.y)),"binding"===n.type&&(n.isPrecise=!(.5===n.normalizedAnchor.x&&.5===n.normalizedAnchor.y))},down:function(e){var t=e.start,n=e.end;"binding"===t.type&&(t.isPrecise||(t.normalizedAnchor={x:.5,y:.5}),delete t.isPrecise),"binding"===n.type&&(n.isPrecise||(n.normalizedAnchor={x:.5,y:.5}),delete n.isPrecise)}}),j({id:_.AddLabelPosition,up:function(e){e.labelPosition=.5},down:function(e){delete e.labelPosition}}),{id:_.ExtractBindings,scope:"store",up:function(e){var t,n=Object.values(e).filter((function(e){return"shape"===e.typeName&&"arrow"===e.type})),r=o(n);try{for(r.s();!(t=r.n()).done;){var i=t.value,a=i.props,u=a.start,s=a.end;if("binding"===u.type){var c=(0,p.createBindingId)(),l={typeName:"binding",id:c,type:"arrow",fromId:i.id,toId:u.boundShapeId,meta:{},props:{terminal:"start",normalizedAnchor:u.normalizedAnchor,isExact:u.isExact,isPrecise:u.isPrecise}};e[c]=l,i.props.start={x:0,y:0}}else delete i.props.start.type;if("binding"===s.type){var f=(0,p.createBindingId)(),d={typeName:"binding",id:f,type:"arrow",fromId:i.id,toId:s.boundShapeId,meta:{},props:{terminal:"end",normalizedAnchor:s.normalizedAnchor,isExact:s.isExact,isPrecise:s.isPrecise}};e[f]=d,i.props.end={x:0,y:0}}else delete i.props.end.type}}catch(h){r.e(h)}finally{r.f()}}},j({id:_.AddScale,up:function(e){e.scale=1},down:function(e){delete e.scale}})]})},48160:function(e,t,n){"use strict";var r,o=n(50883).default,i=Object.defineProperty,a=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,c={};!function(e,t){for(var n in t)i(e,n,{get:t[n],enumerable:!0})}(c,{createShapeValidator:function(){return v},parentIdValidator:function(){return p},shapeIdValidator:function(){return h}}),e.exports=(r=c,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var c,l=o(u(t));try{var f=function(){var o=c.value;s.call(e,o)||o===n||i(e,o,{get:function(){return t[o]},enumerable:!(r=a(t,o))||r.enumerable})};for(l.s();!(c=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(i({},"__esModule",{value:!0}),r));var l=n(98556),f=n(47181),d=n(22836),p=l.T.string.refine((function(e){if(!e.startsWith("page:")&&!e.startsWith("shape:"))throw new Error('Parent ID must start with "page:" or "shape:"');return e})),h=(0,d.idValidator)("shape");function v(e,t,n){return l.T.object({id:h,typeName:l.T.literal("shape"),x:l.T.number,y:l.T.number,rotation:l.T.number,index:l.T.indexKey,parentId:p,type:l.T.literal(e),isLocked:l.T.boolean,opacity:f.opacityValidator,props:t?l.T.object(t):l.T.jsonValue,meta:n?l.T.object(n):l.T.jsonValue})}},17111:function(e,t,n){"use strict";var r,o=n(50883).default,i=Object.defineProperty,a=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,c={};!function(e,t){for(var n in t)i(e,n,{get:t[n],enumerable:!0})}(c,{bookmarkShapeMigrations:function(){return v},bookmarkShapeProps:function(){return p},bookmarkShapeVersions:function(){return h}}),e.exports=(r=c,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var c,l=o(u(t));try{var f=function(){var o=c.value;s.call(e,o)||o===n||i(e,o,{get:function(){return t[o]},enumerable:!(r=a(t,o))||r.enumerable})};for(l.s();!(c=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(i({},"__esModule",{value:!0}),r));var l=n(98556),f=n(82350),d=n(16475),p={w:l.T.nonZeroNumber,h:l.T.nonZeroNumber,assetId:f.assetIdValidator.nullable(),url:l.T.linkUrl},h=(0,d.createShapePropsMigrationIds)("bookmark",{NullAssetId:1,MakeUrlsValid:2}),v=(0,d.createShapePropsMigrationSequence)({sequence:[{id:h.NullAssetId,up:function(e){void 0===e.assetId&&(e.assetId=null)},down:"retired"},{id:h.MakeUrlsValid,up:function(e){l.T.linkUrl.isValid(e.url)||(e.url="")},down:function(e){}}]})},79853:function(e,t,n){"use strict";var r,o=n(50883).default,i=Object.defineProperty,a=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,c={};!function(e,t){for(var n in t)i(e,n,{get:t[n],enumerable:!0})}(c,{DrawShapeSegment:function(){return y},drawShapeMigrations:function(){return w},drawShapeProps:function(){return m},drawShapeVersions:function(){return b}}),e.exports=(r=c,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var c,l=o(u(t));try{var f=function(){var o=c.value;s.call(e,o)||o===n||i(e,o,{get:function(){return t[o]},enumerable:!(r=a(t,o))||r.enumerable})};for(l.s();!(c=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(i({},"__esModule",{value:!0}),r));var l=n(98556),f=n(21346),d=n(16475),p=n(27052),h=n(77615),v=n(44836),g=n(25700),y=l.T.object({type:l.T.literalEnum("free","straight"),points:l.T.arrayOf(f.vecModelValidator)}),m={color:p.DefaultColorStyle,fill:v.DefaultFillStyle,dash:h.DefaultDashStyle,size:g.DefaultSizeStyle,segments:l.T.arrayOf(y),isComplete:l.T.boolean,isClosed:l.T.boolean,isPen:l.T.boolean,scale:l.T.nonZeroNumber},b=(0,d.createShapePropsMigrationIds)("draw",{AddInPen:1,AddScale:2}),w=(0,d.createShapePropsMigrationSequence)({sequence:[{id:b.AddInPen,up:function(e){var t=e.segments[0].points;if(0!==t.length){var n=!(0===t[0].z||.5===t[0].z);t[1]&&(n=n&&!(0===t[1].z||.5===t[1].z)),e.isPen=n}else e.isPen=!1},down:"retired"},{id:b.AddScale,up:function(e){e.scale=1},down:function(e){delete e.scale}}]})},65682:function(e,t,n){"use strict";var r,o=n(85715).default,i=n(50883).default,a=Object.defineProperty,u=Object.getOwnPropertyDescriptor,s=Object.getOwnPropertyNames,c=Object.prototype.hasOwnProperty,l={};!function(e,t){for(var n in t)a(e,n,{get:t[n],enumerable:!0})}(l,{embedShapeMigrations:function(){return m},embedShapeProps:function(){return g},embedShapeVersions:function(){return y}}),e.exports=(r=l,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,l=i(s(t));try{var f=function(){var i=o.value;c.call(e,i)||i===n||a(e,i,{get:function(){return t[i]},enumerable:!(r=u(t,i))||r.enumerable})};for(l.s();!(o=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(a({},"__esModule",{value:!0}),r));var f=n(30645),d=n(98556),p=n(16475),h=/(^\/r\/[^/]+\/?$)/,v=[{hostnames:["beta.tldraw.com","tldraw.com","localhost:3000"],fromEmbedUrl:function(e){var t=(0,f.safeParseUrl)(e);if(t&&t.pathname.match(h))return e}},{hostnames:["figma.com"],fromEmbedUrl:function(e){var t=(0,f.safeParseUrl)(e);if(t&&t.pathname.match(/^\/embed\/?$/)){var n=t.searchParams.get("url");if(n)return n}}},{hostnames:["google.*"],fromEmbedUrl:function(e){var t=(0,f.safeParseUrl)(e);if(t&&(t.pathname.match(/^\/maps\/embed\/v1\/view\/?$/)&&t.searchParams.has("center")&&t.searchParams.get("zoom"))){var n=t.searchParams.get("zoom"),r=t.searchParams.get("center").split(","),i=o(r,2),a=i[0],u=i[1];return"https://www.google.com/maps/@".concat(a,",").concat(u,",").concat(n,"z")}}},{hostnames:["val.town"],fromEmbedUrl:function(e){var t=(0,f.safeParseUrl)(e),n=t&&t.pathname.match(/\/embed\/(.+)\/?/);if(n)return"https://www.val.town/v/".concat(n[1])}},{hostnames:["codesandbox.io"],fromEmbedUrl:function(e){var t=(0,f.safeParseUrl)(e),n=t&&t.pathname.match(/\/embed\/([^/]+)\/?/);if(n)return"https://codesandbox.io/s/".concat(n[1])}},{hostnames:["codepen.io"],fromEmbedUrl:function(e){var t=e.match(/https:\/\/codepen.io\/([^/]+)\/embed\/([^/]+)/);if(t){var n=o(t,3),r=(n[0],n[1]),i=n[2];return"https://codepen.io/".concat(r,"/pen/").concat(i)}}},{hostnames:["scratch.mit.edu"],fromEmbedUrl:function(e){var t=e.match(/https:\/\/scratch.mit.edu\/projects\/embed\/([^/]+)/);if(t){var n=o(t,2),r=(n[0],n[1]);return"https://scratch.mit.edu/projects/".concat(r)}}},{hostnames:["*.youtube.com","youtube.com","youtu.be"],fromEmbedUrl:function(e){var t=(0,f.safeParseUrl)(e);if(t&&"youtube.com"===t.hostname.replace(/^www./,"")){var n=t.pathname.match(/^\/embed\/([^/]+)\/?/);if(n)return"https://www.youtube.com/watch?v=".concat(n[1])}}},{hostnames:["calendar.google.*"],fromEmbedUrl:function(e){var t=(0,f.safeParseUrl)(e),n=null===t||void 0===t?void 0:t.searchParams.get("src");if(null!==t&&void 0!==t&&t.pathname.match(/\/calendar\/embed/)&&n){t.pathname="/calendar/u/0";for(var r=0,o=Array.from(t.searchParams.keys());r<o.length;r++){var i=o[r];t.searchParams.delete(i)}return t.searchParams.set("cid",n),t.href}}},{hostnames:["docs.google.*"],fromEmbedUrl:function(e){var t=(0,f.safeParseUrl)(e);if(null!==t&&void 0!==t&&t.pathname.match(/^\/presentation/)&&null!==t&&void 0!==t&&t.pathname.match(/\/embed\/?$/)){t.pathname=t.pathname.replace(/\/embed$/,"/pub");for(var n=0,r=Array.from(t.searchParams.keys());n<r.length;n++){var o=r[n];t.searchParams.delete(o)}return t.href}}},{hostnames:["gist.github.com"],fromEmbedUrl:function(e){var t=(0,f.safeParseUrl)(e);if(t&&t.pathname.match(/\/([^/]+)\/([^/]+)/)){if(!e.split("/").pop())return;return e}}},{hostnames:["replit.com"],fromEmbedUrl:function(e){var t=(0,f.safeParseUrl)(e);if(t&&t.pathname.match(/\/@([^/]+)\/([^/]+)/)&&t.searchParams.has("embed"))return t.searchParams.delete("embed"),t.href}},{hostnames:["felt.com"],fromEmbedUrl:function(e){var t=(0,f.safeParseUrl)(e);if(t&&t.pathname.match(/^\/embed\/map\//))return t.pathname=t.pathname.replace(/^\/embed/,""),t.href}},{hostnames:["open.spotify.com"],fromEmbedUrl:function(e){var t=(0,f.safeParseUrl)(e);if(t&&t.pathname.match(/^\/embed\/(artist|album)\//))return t.origin+t.pathname.replace(/^\/embed/,"")}},{hostnames:["vimeo.com","player.vimeo.com"],fromEmbedUrl:function(e){var t=(0,f.safeParseUrl)(e);if(t&&"player.vimeo.com"===t.hostname){var n=t.pathname.match(/^\/video\/([^/]+)\/?$/);if(n)return"https://vimeo.com/"+n[1]}}},{hostnames:["excalidraw.com"],fromEmbedUrl:function(e){var t=(0,f.safeParseUrl)(e);if(t&&t.hash.match(/#room=/))return e}},{hostnames:["observablehq.com"],fromEmbedUrl:function(e){var t=(0,f.safeParseUrl)(e);return t&&t.pathname.match(/^\/embed\/@([^/]+)\/([^/]+)\/?$/)?"".concat(t.origin).concat(t.pathname.replace("/embed",""),"#cell-*"):t&&t.pathname.match(/^\/embed\/([^/]+)\/?$/)?"".concat(t.origin).concat(t.pathname.replace("/embed","/d"),"#cell-*"):void 0}},{hostnames:["desmos.com"],fromEmbedUrl:function(e){var t=(0,f.safeParseUrl)(e);if(t&&"www.desmos.com"===t.hostname&&t.pathname.match(/^\/calculator\/([^/]+)\/?$/)&&"?embed"===t.search&&""===t.hash)return e.replace("?embed","")}}],g={w:d.T.nonZeroNumber,h:d.T.nonZeroNumber,url:d.T.string},y=(0,p.createShapePropsMigrationIds)("embed",{GenOriginalUrlInEmbed:1,RemoveDoesResize:2,RemoveTmpOldUrl:3,RemovePermissionOverrides:4}),m=(0,p.createShapePropsMigrationSequence)({sequence:[{id:y.GenOriginalUrlInEmbed,up:function(e){try{for(var t,n,r=e.url,o=new URL(r).host.replace("www.",""),i=0,a=v;i<a.length;i++){var u=a[i];if(u.hostnames.includes(o))try{n=u.fromEmbedUrl(r)}catch(s){console.warn(s)}}e.tmpOldUrl=e.url,e.url=null!==(t=n)&&void 0!==t?t:""}catch(c){e.url="",e.tmpOldUrl=e.url}},down:"retired"},{id:y.RemoveDoesResize,up:function(e){delete e.doesResize},down:"retired"},{id:y.RemoveTmpOldUrl,up:function(e){delete e.tmpOldUrl},down:"retired"},{id:y.RemovePermissionOverrides,up:function(e){delete e.overridePermissions},down:"retired"}]})},31222:function(e,t,n){"use strict";var r,o=n(50883).default,i=Object.defineProperty,a=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,c={};!function(e,t){for(var n in t)i(e,n,{get:t[n],enumerable:!0})}(c,{frameShapeMigrations:function(){return p},frameShapeProps:function(){return d}}),e.exports=(r=c,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var c,l=o(u(t));try{var f=function(){var o=c.value;s.call(e,o)||o===n||i(e,o,{get:function(){return t[o]},enumerable:!(r=a(t,o))||r.enumerable})};for(l.s();!(c=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(i({},"__esModule",{value:!0}),r));var l=n(98556),f=n(16475),d={w:l.T.nonZeroNumber,h:l.T.nonZeroNumber,name:l.T.string},p=(0,f.createShapePropsMigrationSequence)({sequence:[]})},27810:function(e,t,n){"use strict";var r,o=n(50883).default,i=Object.defineProperty,a=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,c={};!function(e,t){for(var n in t)i(e,n,{get:t[n],enumerable:!0})}(c,{GeoShapeGeoStyle:function(){return w},geoShapeMigrations:function(){return P},geoShapeProps:function(){return S},geoShapeVersions:function(){return x}}),e.exports=(r=c,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var c,l=o(u(t));try{var f=function(){var o=c.value;s.call(e,o)||o===n||i(e,o,{get:function(){return t[o]},enumerable:!(r=a(t,o))||r.enumerable})};for(l.s();!(c=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(i({},"__esModule",{value:!0}),r));var l=n(98556),f=n(16475),d=n(30422),p=n(27052),h=n(77615),v=n(44836),g=n(8404),y=n(58710),m=n(25700),b=n(96352),w=d.StyleProp.defineEnum("tldraw:geo",{defaultValue:"rectangle",values:["cloud","rectangle","ellipse","triangle","diamond","pentagon","hexagon","octagon","star","rhombus","rhombus-2","oval","trapezoid","arrow-right","arrow-left","arrow-up","arrow-down","x-box","check-box","heart"]}),S={geo:w,labelColor:p.DefaultLabelColorStyle,color:p.DefaultColorStyle,fill:v.DefaultFillStyle,dash:h.DefaultDashStyle,size:m.DefaultSizeStyle,font:g.DefaultFontStyle,align:y.DefaultHorizontalAlignStyle,verticalAlign:b.DefaultVerticalAlignStyle,url:l.T.linkUrl,w:l.T.nonZeroNumber,h:l.T.nonZeroNumber,growY:l.T.positiveNumber,text:l.T.string,scale:l.T.nonZeroNumber},x=(0,f.createShapePropsMigrationIds)("geo",{AddUrlProp:1,AddLabelColor:2,RemoveJustify:3,AddCheckBox:4,AddVerticalAlign:5,MigrateLegacyAlign:6,AddCloud:7,MakeUrlsValid:8,AddScale:9}),P=(0,f.createShapePropsMigrationSequence)({sequence:[{id:x.AddUrlProp,up:function(e){e.url=""},down:"retired"},{id:x.AddLabelColor,up:function(e){e.labelColor="black"},down:"retired"},{id:x.RemoveJustify,up:function(e){"justify"===e.align&&(e.align="start")},down:"retired"},{id:x.AddCheckBox,up:function(e){},down:"retired"},{id:x.AddVerticalAlign,up:function(e){e.verticalAlign="middle"},down:"retired"},{id:x.MigrateLegacyAlign,up:function(e){var t;switch(e.align){case"start":t="start-legacy";break;case"end":t="end-legacy";break;default:t="middle-legacy"}e.align=t},down:"retired"},{id:x.AddCloud,up:function(e){},down:"retired"},{id:x.MakeUrlsValid,up:function(e){l.T.linkUrl.isValid(e.url)||(e.url="")},down:function(e){}},{id:x.AddScale,up:function(e){e.scale=1},down:function(e){delete e.scale}}]})},44476:function(e,t,n){"use strict";var r,o=n(50883).default,i=Object.defineProperty,a=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,c={};!function(e,t){for(var n in t)i(e,n,{get:t[n],enumerable:!0})}(c,{groupShapeMigrations:function(){return d},groupShapeProps:function(){return f}}),e.exports=(r=c,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var c,l=o(u(t));try{var f=function(){var o=c.value;s.call(e,o)||o===n||i(e,o,{get:function(){return t[o]},enumerable:!(r=a(t,o))||r.enumerable})};for(l.s();!(c=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(i({},"__esModule",{value:!0}),r));var l=n(16475),f={},d=(0,l.createShapePropsMigrationSequence)({sequence:[]})},11005:function(e,t,n){"use strict";var r,o=n(50883).default,i=Object.defineProperty,a=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,c={};!function(e,t){for(var n in t)i(e,n,{get:t[n],enumerable:!0})}(c,{highlightShapeMigrations:function(){return y},highlightShapeProps:function(){return v},highlightShapeVersions:function(){return g}}),e.exports=(r=c,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var c,l=o(u(t));try{var f=function(){var o=c.value;s.call(e,o)||o===n||i(e,o,{get:function(){return t[o]},enumerable:!(r=a(t,o))||r.enumerable})};for(l.s();!(c=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(i({},"__esModule",{value:!0}),r));var l=n(98556),f=n(16475),d=n(27052),p=n(25700),h=n(79853),v={color:d.DefaultColorStyle,size:p.DefaultSizeStyle,segments:l.T.arrayOf(h.DrawShapeSegment),isComplete:l.T.boolean,isPen:l.T.boolean,scale:l.T.nonZeroNumber},g=(0,f.createShapePropsMigrationIds)("highlight",{AddScale:1}),y=(0,f.createShapePropsMigrationSequence)({sequence:[{id:g.AddScale,up:function(e){e.scale=1},down:function(e){delete e.scale}}]})},1446:function(e,t,n){"use strict";var r,o=n(50883).default,i=Object.defineProperty,a=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,c={};!function(e,t){for(var n in t)i(e,n,{get:t[n],enumerable:!0})}(c,{ImageShapeCrop:function(){return h},imageShapeMigrations:function(){return y},imageShapeProps:function(){return v},imageShapeVersions:function(){return g}}),e.exports=(r=c,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var c,l=o(u(t));try{var f=function(){var o=c.value;s.call(e,o)||o===n||i(e,o,{get:function(){return t[o]},enumerable:!(r=a(t,o))||r.enumerable})};for(l.s();!(c=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(i({},"__esModule",{value:!0}),r));var l=n(98556),f=n(82350),d=n(21346),p=n(16475),h=l.T.object({topLeft:d.vecModelValidator,bottomRight:d.vecModelValidator}),v={w:l.T.nonZeroNumber,h:l.T.nonZeroNumber,playing:l.T.boolean,url:l.T.linkUrl,assetId:f.assetIdValidator.nullable(),crop:h.nullable(),flipX:l.T.boolean,flipY:l.T.boolean},g=(0,p.createShapePropsMigrationIds)("image",{AddUrlProp:1,AddCropProp:2,MakeUrlsValid:3,AddFlipProps:4}),y=(0,p.createShapePropsMigrationSequence)({sequence:[{id:g.AddUrlProp,up:function(e){e.url=""},down:"retired"},{id:g.AddCropProp,up:function(e){e.crop=null},down:function(e){delete e.crop}},{id:g.MakeUrlsValid,up:function(e){l.T.linkUrl.isValid(e.url)||(e.url="")},down:function(e){}},{id:g.AddFlipProps,up:function(e){e.flipX=!1,e.flipY=!1},down:function(e){delete e.flipX,delete e.flipY}}]})},5469:function(e,t,n){"use strict";var r,o=n(12897).default,i=n(85715).default,a=n(50883).default,u=Object.defineProperty,s=Object.getOwnPropertyDescriptor,c=Object.getOwnPropertyNames,l=Object.prototype.hasOwnProperty,f={};!function(e,t){for(var n in t)u(e,n,{get:t[n],enumerable:!0})}(f,{LineShapeSplineStyle:function(){return b},lineShapeMigrations:function(){return P},lineShapeProps:function(){return S},lineShapeVersions:function(){return x}}),e.exports=(r=f,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,i=a(c(t));try{var f=function(){var i=o.value;l.call(e,i)||i===n||u(e,i,{get:function(){return t[i]},enumerable:!(r=s(t,i))||r.enumerable})};for(i.s();!(o=i.n()).done;)f()}catch(d){i.e(d)}finally{i.f()}}return e}(u({},"__esModule",{value:!0}),r));var d=n(30645),p=n(98556),h=n(16475),v=n(30422),g=n(27052),y=n(77615),m=n(25700),b=v.StyleProp.defineEnum("tldraw:spline",{defaultValue:"line",values:["cubic","line"]}),w=p.T.object({id:p.T.string,index:p.T.indexKey,x:p.T.number,y:p.T.number}),S={color:g.DefaultColorStyle,dash:y.DefaultDashStyle,size:m.DefaultSizeStyle,spline:b,points:p.T.dict(p.T.string,w),scale:p.T.nonZeroNumber},x=(0,h.createShapePropsMigrationIds)("line",{AddSnapHandles:1,RemoveExtraHandleProps:2,HandlesToPoints:3,PointIndexIds:4,AddScale:5}),P=(0,h.createShapePropsMigrationSequence)({sequence:[{id:x.AddSnapHandles,up:function(e){for(var t=0,n=Object.values(e.handles);t<n.length;t++){n[t].canSnap=!0}},down:"retired"},{id:x.RemoveExtraHandleProps,up:function(e){e.handles=(0,d.objectMapFromEntries)(Object.values(e.handles).map((function(e){return[e.index,{x:e.x,y:e.y}]})))},down:function(e){var t=Object.entries(e.handles).map((function(e){var t=i(e,2),n=t[0],r=t[1];return o({index:n},r)})).sort(d.sortByIndex);e.handles=Object.fromEntries(t.map((function(e,n){var r=0===n?"start":n===t.length-1?"end":"handle:".concat(e.index);return[r,{id:r,type:"vertex",canBind:!1,canSnap:!0,index:e.index,x:e.x,y:e.y}]})))}},{id:x.HandlesToPoints,up:function(e){var t=Object.entries(e.handles).map((function(e){var t=i(e,2),n=t[0],r=t[1];return{x:r.x,y:r.y,index:n}})).sort(d.sortByIndex);e.points=t.map((function(e){return{x:e.x,y:e.y}})),delete e.handles},down:function(e){var t=(0,d.getIndices)(e.points.length);e.handles=Object.fromEntries(e.points.map((function(e,n){return[t[n],{x:e.x,y:e.y}]}))),delete e.points}},{id:x.PointIndexIds,up:function(e){var t=(0,d.getIndices)(e.points.length);e.points=Object.fromEntries(e.points.map((function(e,n){var r=t[n];return[r,{id:r,index:r,x:e.x,y:e.y}]})))},down:function(e){var t=Object.values(e.points).sort(d.sortByIndex);e.points=t.map((function(e){return{x:e.x,y:e.y}}))}},{id:x.AddScale,up:function(e){e.scale=1},down:function(e){delete e.scale}}]})},86603:function(e,t,n){"use strict";var r,o=n(50883).default,i=Object.defineProperty,a=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,c={};!function(e,t){for(var n in t)i(e,n,{get:t[n],enumerable:!0})}(c,{noteShapeMigrations:function(){return b},noteShapeProps:function(){return y},noteShapeVersions:function(){return m}}),e.exports=(r=c,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var c,l=o(u(t));try{var f=function(){var o=c.value;s.call(e,o)||o===n||i(e,o,{get:function(){return t[o]},enumerable:!(r=a(t,o))||r.enumerable})};for(l.s();!(c=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(i({},"__esModule",{value:!0}),r));var l=n(98556),f=n(16475),d=n(27052),p=n(8404),h=n(58710),v=n(25700),g=n(96352),y={color:d.DefaultColorStyle,labelColor:d.DefaultLabelColorStyle,size:v.DefaultSizeStyle,font:p.DefaultFontStyle,fontSizeAdjustment:l.T.positiveNumber,align:h.DefaultHorizontalAlignStyle,verticalAlign:g.DefaultVerticalAlignStyle,growY:l.T.positiveNumber,url:l.T.linkUrl,text:l.T.string,scale:l.T.nonZeroNumber},m=(0,f.createShapePropsMigrationIds)("note",{AddUrlProp:1,RemoveJustify:2,MigrateLegacyAlign:3,AddVerticalAlign:4,MakeUrlsValid:5,AddFontSizeAdjustment:6,AddScale:7,AddLabelColor:8}),b=(0,f.createShapePropsMigrationSequence)({sequence:[{id:m.AddUrlProp,up:function(e){e.url=""},down:"retired"},{id:m.RemoveJustify,up:function(e){"justify"===e.align&&(e.align="start")},down:"retired"},{id:m.MigrateLegacyAlign,up:function(e){switch(e.align){case"start":return void(e.align="start-legacy");case"end":return void(e.align="end-legacy");default:return void(e.align="middle-legacy")}},down:"retired"},{id:m.AddVerticalAlign,up:function(e){e.verticalAlign="middle"},down:"retired"},{id:m.MakeUrlsValid,up:function(e){l.T.linkUrl.isValid(e.url)||(e.url="")},down:function(e){}},{id:m.AddFontSizeAdjustment,up:function(e){e.fontSizeAdjustment=0},down:function(e){delete e.fontSizeAdjustment}},{id:m.AddScale,up:function(e){e.scale=1},down:function(e){delete e.scale}},{id:m.AddLabelColor,up:function(e){e.labelColor="black"},down:function(e){delete e.labelColor}}]})},69266:function(e,t,n){"use strict";var r,o=n(50883).default,i=Object.defineProperty,a=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,c={};!function(e,t){for(var n in t)i(e,n,{get:t[n],enumerable:!0})}(c,{textShapeMigrations:function(){return m},textShapeProps:function(){return g},textShapeVersions:function(){return y}}),e.exports=(r=c,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var c,l=o(u(t));try{var f=function(){var o=c.value;s.call(e,o)||o===n||i(e,o,{get:function(){return t[o]},enumerable:!(r=a(t,o))||r.enumerable})};for(l.s();!(c=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(i({},"__esModule",{value:!0}),r));var l=n(98556),f=n(16475),d=n(27052),p=n(8404),h=n(25700),v=n(96981),g={color:d.DefaultColorStyle,size:h.DefaultSizeStyle,font:p.DefaultFontStyle,textAlign:v.DefaultTextAlignStyle,w:l.T.nonZeroNumber,text:l.T.string,scale:l.T.nonZeroNumber,autoSize:l.T.boolean},y=(0,f.createShapePropsMigrationIds)("text",{RemoveJustify:1,AddTextAlign:2}),m=(0,f.createShapePropsMigrationSequence)({sequence:[{id:y.RemoveJustify,up:function(e){"justify"===e.align&&(e.align="start")},down:"retired"},{id:y.AddTextAlign,up:function(e){e.textAlign=e.align,delete e.align},down:function(e){e.align=e.textAlign,delete e.textAlign}}]})},56176:function(e,t,n){"use strict";var r,o=n(50883).default,i=Object.defineProperty,a=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,c={};!function(e,t){for(var n in t)i(e,n,{get:t[n],enumerable:!0})}(c,{videoShapeMigrations:function(){return v},videoShapeProps:function(){return p},videoShapeVersions:function(){return h}}),e.exports=(r=c,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var c,l=o(u(t));try{var f=function(){var o=c.value;s.call(e,o)||o===n||i(e,o,{get:function(){return t[o]},enumerable:!(r=a(t,o))||r.enumerable})};for(l.s();!(c=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(i({},"__esModule",{value:!0}),r));var l=n(98556),f=n(82350),d=n(16475),p={w:l.T.nonZeroNumber,h:l.T.nonZeroNumber,time:l.T.number,playing:l.T.boolean,url:l.T.linkUrl,assetId:f.assetIdValidator.nullable()},h=(0,d.createShapePropsMigrationIds)("video",{AddUrlProp:1,MakeUrlsValid:2}),v=(0,d.createShapePropsMigrationSequence)({sequence:[{id:h.AddUrlProp,up:function(e){e.url=""},down:"retired"},{id:h.MakeUrlsValid,up:function(e){l.T.linkUrl.isValid(e.url)||(e.url="")},down:function(e){}}]})},59886:function(e,t,n){"use strict";var r,o=n(85715).default,i=n(50883).default,a=Object.defineProperty,u=Object.getOwnPropertyDescriptor,s=Object.getOwnPropertyNames,c=Object.prototype.hasOwnProperty,l={};!function(e,t){for(var n in t)a(e,n,{get:t[n],enumerable:!0})}(l,{storeMigrations:function(){return h},storeVersions:function(){return p}}),e.exports=(r=l,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,l=i(s(t));try{var f=function(){var i=o.value;c.call(e,i)||i===n||a(e,i,{get:function(){return t[i]},enumerable:!(r=u(t,i))||r.enumerable})};for(l.s();!(o=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(a({},"__esModule",{value:!0}),r));var f=n(75881),d=n(30645),p=(0,f.createMigrationIds)("com.tldraw.store",{RemoveCodeAndIconShapeTypes:1,AddInstancePresenceType:2,RemoveTLUserAndPresenceAndAddPointer:3,RemoveUserDocument:4}),h=(0,f.createMigrationSequence)({sequenceId:"com.tldraw.store",retroactive:!1,sequence:[{id:p.RemoveCodeAndIconShapeTypes,scope:"store",up:function(e){var t,n=i((0,d.objectMapEntries)(e));try{for(n.s();!(t=n.n()).done;){var r=o(t.value,2),a=r[0],u=r[1];"shape"!==u.typeName||"icon"!==u.type&&"code"!==u.type||delete e[a]}}catch(s){n.e(s)}finally{n.f()}}},{id:p.AddInstancePresenceType,scope:"store",up:function(e){}},{id:p.RemoveTLUserAndPresenceAndAddPointer,scope:"store",up:function(e){var t,n=i((0,d.objectMapEntries)(e));try{for(n.s();!(t=n.n()).done;){var r=o(t.value,2),a=r[0];r[1].typeName.match(/^(user|user_presence)$/)&&delete e[a]}}catch(u){n.e(u)}finally{n.f()}}},{id:p.RemoveUserDocument,scope:"store",up:function(e){var t,n=i((0,d.objectMapEntries)(e));try{for(n.s();!(t=n.n()).done;){var r=o(t.value,2),a=r[0];r[1].typeName.match("user_document")&&delete e[a]}}catch(u){n.e(u)}finally{n.f()}}}]})},30422:function(e,t,n){"use strict";var r,o=n(41132).default,i=n(18336).default,a=n(29511).default,u=n(17383).default,s=n(34579).default,c=n(50883).default,l=Object.defineProperty,f=Object.getOwnPropertyDescriptor,d=Object.getOwnPropertyNames,p=Object.prototype.hasOwnProperty,h={};!function(e,t){for(var n in t)l(e,n,{get:t[n],enumerable:!0})}(h,{EnumStyleProp:function(){return y},StyleProp:function(){return g}}),e.exports=(r=h,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,i=c(d(t));try{var a=function(){var i=o.value;p.call(e,i)||i===n||l(e,i,{get:function(){return t[i]},enumerable:!(r=f(t,i))||r.enumerable})};for(i.s();!(o=i.n()).done;)a()}catch(u){i.e(u)}finally{i.f()}}return e}(l({},"__esModule",{value:!0}),r));var v=n(98556),g=function(){function e(t,n,r){u(this,e),this.id=t,this.defaultValue=n,this.type=r}return s(e,[{key:"setDefaultValue",value:function(e){this.defaultValue=e}},{key:"validate",value:function(e){return this.type.validate(e)}},{key:"validateUsingKnownGoodVersion",value:function(e,t){return this.type.validateUsingKnownGoodVersion?this.type.validateUsingKnownGoodVersion(e,t):this.validate(t)}}],[{key:"define",value:function(t,n){var r=n.defaultValue,o=n.type;return new e(t,r,void 0===o?v.T.any:o)}},{key:"defineEnum",value:function(e,t){var n=t.defaultValue,r=t.values;return new y(e,n,r)}}])}(),y=function(e){function t(e,n,r){var a,s;return u(this,t),(s=i(this,t,[e,n,(a=v.T).literalEnum.apply(a,o(r))])).values=r,s}return a(t,e),s(t)}(g)},27052:function(e,t,n){"use strict";var r,o=n(50883).default,i=Object.defineProperty,a=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,c={};!function(e,t){for(var n in t)i(e,n,{get:t[n],enumerable:!0})}(c,{DefaultColorStyle:function(){return h},DefaultColorThemePalette:function(){return d},DefaultLabelColorStyle:function(){return v},defaultColorNames:function(){return f},getDefaultColorTheme:function(){return p}}),e.exports=(r=c,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var c,l=o(u(t));try{var f=function(){var o=c.value;s.call(e,o)||o===n||i(e,o,{get:function(){return t[o]},enumerable:!(r=a(t,o))||r.enumerable})};for(l.s();!(c=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(i({},"__esModule",{value:!0}),r));var l=n(30422),f=["black","grey","light-violet","violet","blue","light-blue","yellow","orange","green","light-green","light-red","red","white"],d={lightMode:{id:"light",text:"#000000",background:"rgb(249, 250, 251)",solid:"#fcfffe",black:{solid:"#1d1d1d",fill:"#1d1d1d",note:{fill:"#FCE19C",text:"#000000"},semi:"#e8e8e8",pattern:"#494949",highlight:{srgb:"#fddd00",p3:"color(display-p3 0.972 0.8705 0.05)"}},blue:{solid:"#4465e9",fill:"#4465e9",note:{fill:"#8AA3FF",text:"#000000"},semi:"#dce1f8",pattern:"#6681ee",highlight:{srgb:"#10acff",p3:"color(display-p3 0.308 0.6632 0.9996)"}},green:{solid:"#099268",fill:"#099268",note:{fill:"#6FC896",text:"#000000"},semi:"#d3e9e3",pattern:"#39a785",highlight:{srgb:"#00ffc8",p3:"color(display-p3 0.2536 0.984 0.7981)"}},grey:{solid:"#9fa8b2",fill:"#9fa8b2",note:{fill:"#C0CAD3",text:"#000000"},semi:"#eceef0",pattern:"#bcc3c9",highlight:{srgb:"#cbe7f1",p3:"color(display-p3 0.8163 0.9023 0.9416)"}},"light-blue":{solid:"#4ba1f1",fill:"#4ba1f1",note:{fill:"#9BC4FD",text:"#000000"},semi:"#ddedfa",pattern:"#6fbbf8",highlight:{srgb:"#00f4ff",p3:"color(display-p3 0.1512 0.9414 0.9996)"}},"light-green":{solid:"#4cb05e",fill:"#4cb05e",note:{fill:"#98D08A",text:"#000000"},semi:"#dbf0e0",pattern:"#65cb78",highlight:{srgb:"#65f641",p3:"color(display-p3 0.563 0.9495 0.3857)"}},"light-red":{solid:"#f87777",fill:"#f87777",note:{fill:"#F7A5A1",text:"#000000"},semi:"#f4dadb",pattern:"#fe9e9e",highlight:{srgb:"#ff7fa3",p3:"color(display-p3 0.9988 0.5301 0.6397)"}},"light-violet":{solid:"#e085f4",fill:"#e085f4",note:{fill:"#DFB0F9",text:"#000000"},semi:"#f5eafa",pattern:"#e9acf8",highlight:{srgb:"#ff88ff",p3:"color(display-p3 0.9676 0.5652 0.9999)"}},orange:{solid:"#e16919",fill:"#e16919",note:{fill:"#FAA475",text:"#000000"},semi:"#f8e2d4",pattern:"#f78438",highlight:{srgb:"#ffa500",p3:"color(display-p3 0.9988 0.6905 0.266)"}},red:{solid:"#e03131",fill:"#e03131",note:{fill:"#FC8282",text:"#000000"},semi:"#f4dadb",pattern:"#e55959",highlight:{srgb:"#ff636e",p3:"color(display-p3 0.9992 0.4376 0.45)"}},violet:{solid:"#ae3ec9",fill:"#ae3ec9",note:{fill:"#DB91FD",text:"#000000"},semi:"#ecdcf2",pattern:"#bd63d3",highlight:{srgb:"#c77cff",p3:"color(display-p3 0.7469 0.5089 0.9995)"}},yellow:{solid:"#f1ac4b",fill:"#f1ac4b",note:{fill:"#FED49A",text:"#000000"},semi:"#f9f0e6",pattern:"#fecb92",highlight:{srgb:"#fddd00",p3:"color(display-p3 0.972 0.8705 0.05)"}},white:{solid:"#FFFFFF",fill:"#FFFFFF",semi:"#f5f5f5",pattern:"#f9f9f9",note:{fill:"#FFFFFF",text:"#000000"},highlight:{srgb:"#ffffff",p3:"color(display-p3 1 1 1)"}}},darkMode:{id:"dark",text:"hsl(210, 17%, 98%)",background:"hsl(240, 5%, 6.5%)",solid:"#010403",black:{solid:"#f2f2f2",fill:"#f2f2f2",note:{fill:"#2c2c2c",text:"#f2f2f2"},semi:"#2c3036",pattern:"#989898",highlight:{srgb:"#d2b700",p3:"color(display-p3 0.8078 0.7225 0.0312)"}},blue:{solid:"#4f72fc",fill:"#4f72fc",note:{fill:"#2A3F98",text:"#f2f2f2"},semi:"#262d40",pattern:"#3a4b9e",highlight:{srgb:"#0079d2",p3:"color(display-p3 0.0032 0.4655 0.7991)"}},green:{solid:"#099268",fill:"#099268",note:{fill:"#014429",text:"#f2f2f2"},semi:"#253231",pattern:"#366a53",highlight:{srgb:"#009774",p3:"color(display-p3 0.0085 0.582 0.4604)"}},grey:{solid:"#9398b0",fill:"#9398b0",note:{fill:"#56595F",text:"#f2f2f2"},semi:"#33373c",pattern:"#7c8187",highlight:{srgb:"#9cb4cb",p3:"color(display-p3 0.6299 0.7012 0.7856)"}},"light-blue":{solid:"#4dabf7",fill:"#4dabf7",note:{fill:"#1F5495",text:"#f2f2f2"},semi:"#2a3642",pattern:"#4d7aa9",highlight:{srgb:"#00bdc8",p3:"color(display-p3 0.0023 0.7259 0.7735)"}},"light-green":{solid:"#40c057",fill:"#40c057",note:{fill:"#21581D",text:"#f2f2f2"},semi:"#2a3830",pattern:"#4e874e",highlight:{srgb:"#00a000",p3:"color(display-p3 0.2711 0.6172 0.0195)"}},"light-red":{solid:"#ff8787",fill:"#ff8787",note:{fill:"#923632",text:"#f2f2f2"},semi:"#3b3235",pattern:"#a56767",highlight:{srgb:"#db005b",p3:"color(display-p3 0.7849 0.0585 0.3589)"}},"light-violet":{solid:"#e599f7",fill:"#e599f7",note:{fill:"#762F8E",text:"#f2f2f2"},semi:"#383442",pattern:"#9770a9",highlight:{srgb:"#c400c7",p3:"color(display-p3 0.7024 0.0403 0.753)"}},orange:{solid:"#f76707",fill:"#f76707",note:{fill:"#843906",text:"#f2f2f2"},semi:"#3a2e2a",pattern:"#9f552d",highlight:{srgb:"#d07a00",p3:"color(display-p3 0.7699 0.4937 0.0085)"}},red:{solid:"#e03131",fill:"#e03131",note:{fill:"#89231A",text:"#f2f2f2"},semi:"#36292b",pattern:"#8f3734",highlight:{srgb:"#de002c",p3:"color(display-p3 0.7978 0.0509 0.2035)"}},violet:{solid:"#ae3ec9",fill:"#ae3ec9",note:{fill:"#681683",text:"#f2f2f2"},semi:"#31293c",pattern:"#763a8b",highlight:{srgb:"#9e00ee",p3:"color(display-p3 0.5651 0.0079 0.8986)"}},yellow:{solid:"#ffc034",fill:"#ffc034",note:{fill:"#98571B",text:"#f2f2f2"},semi:"#3c3934",pattern:"#fecb92",highlight:{srgb:"#d2b700",p3:"color(display-p3 0.8078 0.7225 0.0312)"}},white:{solid:"#f3f3f3",fill:"#f3f3f3",semi:"#f5f5f5",pattern:"#f9f9f9",note:{fill:"#eaeaea",text:"#1d1d1d"},highlight:{srgb:"#ffffff",p3:"color(display-p3 1 1 1)"}}}};function p(e){return e.isDarkMode?d.darkMode:d.lightMode}var h=l.StyleProp.defineEnum("tldraw:color",{defaultValue:"black",values:f}),v=l.StyleProp.defineEnum("tldraw:labelColor",{defaultValue:"black",values:f})},77615:function(e,t,n){"use strict";var r,o=n(50883).default,i=Object.defineProperty,a=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,c={};!function(e,t){for(var n in t)i(e,n,{get:t[n],enumerable:!0})}(c,{DefaultDashStyle:function(){return l}}),e.exports=(r=c,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var c,l=o(u(t));try{var f=function(){var o=c.value;s.call(e,o)||o===n||i(e,o,{get:function(){return t[o]},enumerable:!(r=a(t,o))||r.enumerable})};for(l.s();!(c=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(i({},"__esModule",{value:!0}),r));var l=n(30422).StyleProp.defineEnum("tldraw:dash",{defaultValue:"draw",values:["draw","solid","dashed","dotted"]})},44836:function(e,t,n){"use strict";var r,o=n(50883).default,i=Object.defineProperty,a=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,c={};!function(e,t){for(var n in t)i(e,n,{get:t[n],enumerable:!0})}(c,{DefaultFillStyle:function(){return l}}),e.exports=(r=c,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var c,l=o(u(t));try{var f=function(){var o=c.value;s.call(e,o)||o===n||i(e,o,{get:function(){return t[o]},enumerable:!(r=a(t,o))||r.enumerable})};for(l.s();!(c=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(i({},"__esModule",{value:!0}),r));var l=n(30422).StyleProp.defineEnum("tldraw:fill",{defaultValue:"none",values:["none","semi","solid","pattern","fill"]})},8404:function(e,t,n){"use strict";var r,o=n(50883).default,i=Object.defineProperty,a=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,c={};!function(e,t){for(var n in t)i(e,n,{get:t[n],enumerable:!0})}(c,{DefaultFontFamilies:function(){return f},DefaultFontStyle:function(){return l}}),e.exports=(r=c,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var c,l=o(u(t));try{var f=function(){var o=c.value;s.call(e,o)||o===n||i(e,o,{get:function(){return t[o]},enumerable:!(r=a(t,o))||r.enumerable})};for(l.s();!(c=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(i({},"__esModule",{value:!0}),r));var l=n(30422).StyleProp.defineEnum("tldraw:font",{defaultValue:"draw",values:["draw","sans","serif","mono"]}),f={draw:"'tldraw_draw', sans-serif",sans:"'tldraw_sans', sans-serif",serif:"'tldraw_serif', serif",mono:"'tldraw_mono', monospace"}},58710:function(e,t,n){"use strict";var r,o=n(50883).default,i=Object.defineProperty,a=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,c={};!function(e,t){for(var n in t)i(e,n,{get:t[n],enumerable:!0})}(c,{DefaultHorizontalAlignStyle:function(){return l}}),e.exports=(r=c,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var c,l=o(u(t));try{var f=function(){var o=c.value;s.call(e,o)||o===n||i(e,o,{get:function(){return t[o]},enumerable:!(r=a(t,o))||r.enumerable})};for(l.s();!(c=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(i({},"__esModule",{value:!0}),r));var l=n(30422).StyleProp.defineEnum("tldraw:horizontalAlign",{defaultValue:"middle",values:["start","middle","end","start-legacy","end-legacy","middle-legacy"]})},25700:function(e,t,n){"use strict";var r,o=n(50883).default,i=Object.defineProperty,a=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,c={};!function(e,t){for(var n in t)i(e,n,{get:t[n],enumerable:!0})}(c,{DefaultSizeStyle:function(){return l}}),e.exports=(r=c,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var c,l=o(u(t));try{var f=function(){var o=c.value;s.call(e,o)||o===n||i(e,o,{get:function(){return t[o]},enumerable:!(r=a(t,o))||r.enumerable})};for(l.s();!(c=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(i({},"__esModule",{value:!0}),r));var l=n(30422).StyleProp.defineEnum("tldraw:size",{defaultValue:"m",values:["s","m","l","xl"]})},96981:function(e,t,n){"use strict";var r,o=n(50883).default,i=Object.defineProperty,a=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,c={};!function(e,t){for(var n in t)i(e,n,{get:t[n],enumerable:!0})}(c,{DefaultTextAlignStyle:function(){return l}}),e.exports=(r=c,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var c,l=o(u(t));try{var f=function(){var o=c.value;s.call(e,o)||o===n||i(e,o,{get:function(){return t[o]},enumerable:!(r=a(t,o))||r.enumerable})};for(l.s();!(c=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(i({},"__esModule",{value:!0}),r));var l=n(30422).StyleProp.defineEnum("tldraw:textAlign",{defaultValue:"start",values:["start","middle","end"]})},96352:function(e,t,n){"use strict";var r,o=n(50883).default,i=Object.defineProperty,a=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,c={};!function(e,t){for(var n in t)i(e,n,{get:t[n],enumerable:!0})}(c,{DefaultVerticalAlignStyle:function(){return l}}),e.exports=(r=c,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var c,l=o(u(t));try{var f=function(){var o=c.value;s.call(e,o)||o===n||i(e,o,{get:function(){return t[o]},enumerable:!(r=a(t,o))||r.enumerable})};for(l.s();!(c=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(i({},"__esModule",{value:!0}),r));var l=n(30422).StyleProp.defineEnum("tldraw:verticalAlign",{defaultValue:"middle",values:["start","middle","end"]})},63155:function(e,t,n){"use strict";var r,o=n(50883).default,i=Object.defineProperty,a=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,c={};!function(e,t){for(var n in t)i(e,n,{get:t[n],enumerable:!0})}(c,{LANGUAGES:function(){return l}}),e.exports=(r=c,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var c,l=o(u(t));try{var f=function(){var o=c.value;s.call(e,o)||o===n||i(e,o,{get:function(){return t[o]},enumerable:!(r=a(t,o))||r.enumerable})};for(l.s();!(c=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(i({},"__esModule",{value:!0}),r));var l=[{locale:"id",label:"Bahasa Indonesia"},{locale:"ca",label:"Catal\xe0"},{locale:"cs",label:"\u010ce\u0161tina"},{locale:"da",label:"Danish"},{locale:"de",label:"Deutsch"},{locale:"en",label:"English"},{locale:"es",label:"Espa\xf1ol"},{locale:"fr",label:"Fran\xe7ais"},{locale:"gl",label:"Galego"},{locale:"hr",label:"Hrvatski"},{locale:"it",label:"Italiano"},{locale:"hu",label:"Magyar"},{locale:"no",label:"Norwegian"},{locale:"pl",label:"Polski"},{locale:"pt-br",label:"Portugu\xeas - Brasil"},{locale:"pt-pt",label:"Portugu\xeas - Europeu"},{locale:"ro",label:"Rom\xe2n\u0103"},{locale:"ru",label:"Russian"},{locale:"sl",label:"Sloven\u0161\u010dina"},{locale:"so",label:"Somali"},{locale:"fi",label:"Suomi"},{locale:"sv",label:"Svenska"},{locale:"vi",label:"Ti\u1ebfng Vi\u1ec7t"},{locale:"tr",label:"T\xfcrk\xe7e"},{locale:"uk",label:"Ukrainian"},{locale:"he",label:"\u05e2\u05d1\u05e8\u05d9\u05ea"},{locale:"ar",label:"\u0639\u0631\u0628\u064a"},{locale:"fa",label:"\u0641\u0627\u0631\u0633\u06cc"},{locale:"ku",label:"\u06a9\u0648\u0631\u062f\u06cc"},{locale:"ne",label:"\u0928\u0947\u092a\u093e\u0932\u0940"},{locale:"hi-in",label:"\u0939\u093f\u0928\u094d\u0926\u0940"},{locale:"te",label:"\u0c24\u0c46\u0c32\u0c41\u0c17\u0c41"},{locale:"th",label:"\u0e20\u0e32\u0e29\u0e32\u0e44\u0e17\u0e22"},{locale:"my",label:"\u1019\u103c\u1014\u103a\u1019\u102c\u1005\u102c"},{locale:"ko-kr",label:"\ud55c\uad6d\uc5b4"},{locale:"ja",label:"\u65e5\u672c\u8a9e"},{locale:"zh-cn",label:"\u7b80\u4f53\u4e2d\u6587"},{locale:"zh-tw",label:"\u7e41\u9ad4\u4e2d\u6587 (\u53f0\u7063)"}]},67802:function(e,t,n){"use strict";var r,o=n(85715).default,i=n(50883).default,a=Object.defineProperty,u=Object.getOwnPropertyDescriptor,s=Object.getOwnPropertyNames,c=Object.prototype.hasOwnProperty,l={};!function(e,t){for(var n in t)a(e,n,{get:t[n],enumerable:!0})}(l,{LANGUAGES:function(){return f.LANGUAGES},_getDefaultTranslationLocale:function(){return p},getDefaultTranslationLocale:function(){return d}}),e.exports=(r=l,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,l=i(s(t));try{var f=function(){var i=o.value;c.call(e,i)||i===n||a(e,i,{get:function(){return t[i]},enumerable:!(r=u(t,i))||r.enumerable})};for(l.s();!(o=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(a({},"__esModule",{value:!0}),r));var f=n(63155);function d(){var e;return p("undefined"!==typeof window&&null!==(e=window.navigator.languages)&&void 0!==e?e:["en"])}function p(e){var t,n=i(e);try{for(n.s();!(t=n.n()).done;){var r=v(t.value);if(r)return r}}catch(o){n.e(o)}finally{n.f()}return"en"}var h={zh:"zh-cn",pt:"pt-br",ko:"ko-kr",hi:"hi-in"};function v(e){var t=f.LANGUAGES.find((function(t){return t.locale===e.toLowerCase()}));if(t)return t.locale;var n=e.split(/[-_]/).map((function(e){return e.toLowerCase()})),r=o(n,2),i=r[0];if(r[1]){var a=f.LANGUAGES.find((function(e){return e.locale===i}));if(a)return a.locale}return i in h?h[i]:null}},30645:function(e,t,n){"use strict";var r,o=n(50883).default,i=Object.create,a=Object.defineProperty,u=Object.getOwnPropertyDescriptor,s=Object.getOwnPropertyNames,c=Object.getPrototypeOf,l=Object.prototype.hasOwnProperty,f=function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var i,c=o(s(t));try{var f=function(){var o=i.value;l.call(e,o)||o===n||a(e,o,{get:function(){return t[o]},enumerable:!(r=u(t,o))||r.enumerable})};for(c.s();!(i=c.n()).done;)f()}catch(d){c.e(d)}finally{c.f()}}return e},d=function(e,t,n){return n=null!=e?i(c(e)):{},f(!t&&e&&e.__esModule?n:a(n,"default",{value:e,enumerable:!0}),e)},p={};!function(e,t){for(var n in t)a(e,n,{get:t[n],enumerable:!0})}(p,{DEFAULT_SUPPORTED_IMAGE_TYPES:function(){return E.DEFAULT_SUPPORTED_IMAGE_TYPES},DEFAULT_SUPPORTED_MEDIA_TYPE_LIST:function(){return E.DEFAULT_SUPPORTED_MEDIA_TYPE_LIST},DEFAULT_SUPPORT_VIDEO_TYPES:function(){return E.DEFAULT_SUPPORT_VIDEO_TYPES},ExecutionQueue:function(){return y.ExecutionQueue},FileHelpers:function(){return k.FileHelpers},Image:function(){return M.Image},MediaHelpers:function(){return E.MediaHelpers},PerformanceTracker:function(){return m.PerformanceTracker},PngHelpers:function(){return C.PngHelpers},Result:function(){return x.Result},STRUCTURED_CLONE_OBJECT_PROTOTYPE:function(){return K.STRUCTURED_CLONE_OBJECT_PROTOTYPE},Timers:function(){return z.Timers},WeakCache:function(){return S.WeakCache},ZERO_INDEX_KEY:function(){return N.ZERO_INDEX_KEY},annotateError:function(){return O.annotateError},areArraysShallowEqual:function(){return b.areArraysShallowEqual},areObjectsShallowEqual:function(){return D.areObjectsShallowEqual},assert:function(){return x.assert},assertExists:function(){return x.assertExists},bind:function(){return w.bind},clearLocalStorage:function(){return F.clearLocalStorage},clearSessionStorage:function(){return F.clearSessionStorage},compact:function(){return b.compact},debounce:function(){return P.debounce},dedupe:function(){return b.dedupe},deleteFromLocalStorage:function(){return F.deleteFromLocalStorage},deleteFromSessionStorage:function(){return F.deleteFromSessionStorage},exhaustiveSwitchError:function(){return x.exhaustiveSwitchError},fetch:function(){return M.fetch},filterEntries:function(){return D.filterEntries},fpsThrottle:function(){return V.fpsThrottle},getErrorAnnotations:function(){return O.getErrorAnnotations},getFirstFromIterable:function(){return T.getFirstFromIterable},getFromLocalStorage:function(){return F.getFromLocalStorage},getFromSessionStorage:function(){return F.getFromSessionStorage},getHashForBuffer:function(){return j.getHashForBuffer},getHashForObject:function(){return j.getHashForObject},getHashForString:function(){return j.getHashForString},getIndexAbove:function(){return N.getIndexAbove},getIndexBelow:function(){return N.getIndexBelow},getIndexBetween:function(){return N.getIndexBetween},getIndices:function(){return N.getIndices},getIndicesAbove:function(){return N.getIndicesAbove},getIndicesBelow:function(){return N.getIndicesBelow},getIndicesBetween:function(){return N.getIndicesBetween},getOwnProperty:function(){return D.getOwnProperty},groupBy:function(){return D.groupBy},hasOwnProperty:function(){return D.hasOwnProperty},invLerp:function(){return A.invLerp},isDefined:function(){return K.isDefined},isNativeStructuredClone:function(){return K.isNativeStructuredClone},isNonNull:function(){return K.isNonNull},isNonNullish:function(){return K.isNonNullish},last:function(){return b.last},lerp:function(){return A.lerp},lns:function(){return j.lns},mapObjectMapValues:function(){return D.mapObjectMapValues},maxBy:function(){return b.maxBy},measureAverageDuration:function(){return R.measureAverageDuration},measureCbDuration:function(){return R.measureCbDuration},measureDuration:function(){return R.measureDuration},minBy:function(){return b.minBy},mockUniqueId:function(){return I.mockUniqueId},modulate:function(){return A.modulate},noop:function(){return _.noop},objectMapEntries:function(){return D.objectMapEntries},objectMapFromEntries:function(){return D.objectMapFromEntries},objectMapKeys:function(){return D.objectMapKeys},objectMapValues:function(){return D.objectMapValues},omitFromStackTrace:function(){return _.omitFromStackTrace},partition:function(){return b.partition},promiseWithResolve:function(){return x.promiseWithResolve},registerTldrawLibraryVersion:function(){return G.registerTldrawLibraryVersion},restoreUniqueId:function(){return I.restoreUniqueId},retry:function(){return L.retry},rng:function(){return A.rng},rotateArray:function(){return b.rotateArray},safeParseUrl:function(){return H.safeParseUrl},setInLocalStorage:function(){return F.setInLocalStorage},setInSessionStorage:function(){return F.setInSessionStorage},sleep:function(){return x.sleep},sortById:function(){return U.sortById},sortByIndex:function(){return N.sortByIndex},stringEnum:function(){return B.stringEnum},structuredClone:function(){return K.structuredClone},throttle:function(){return v.default},throttleToNextFrame:function(){return V.throttleToNextFrame},uniq:function(){return g.default},uniqueId:function(){return I.uniqueId},validateIndexKey:function(){return N.validateIndexKey},warnDeprecatedGetter:function(){return q.warnDeprecatedGetter},warnOnce:function(){return q.warnOnce}}),e.exports=(r=p,f(a({},"__esModule",{value:!0}),r));var h=n(38661),v=d(n(43088)),g=d(n(74201)),y=n(57304),m=n(94259),b=n(16932),w=n(22534),S=n(29627),x=n(46464),P=n(33434),O=n(54263),k=n(56951),_=n(36109),j=n(81389),I=n(27064),T=n(34591),E=n(93390),C=n(73329),M=n(81147),A=n(32984),D=n(510),R=n(28690),N=n(23368),L=n(46987),U=n(64145),F=n(44496),B=n(1249),V=n(76445),z=n(88619),H=n(5516),K=n(88044),G=n(38661),q=n(48705);(0,h.registerTldrawLibraryVersion)("@tldraw/utils","3.7.2","cjs")},57304:function(e,t,n){"use strict";var r,o=n(4633).default,i=n(29293).default,a=n(17383).default,u=n(34579).default,s=n(43693).default,c=n(50883).default,l=Object.defineProperty,f=Object.getOwnPropertyDescriptor,d=Object.getOwnPropertyNames,p=Object.prototype.hasOwnProperty,h={};!function(e,t){for(var n in t)l(e,n,{get:t[n],enumerable:!0})}(h,{ExecutionQueue:function(){return g}}),e.exports=(r=h,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,i=c(d(t));try{var a=function(){var i=o.value;p.call(e,i)||i===n||l(e,i,{get:function(){return t[i]},enumerable:!(r=f(t,i))||r.enumerable})};for(i.s();!(o=i.n()).done;)a()}catch(u){i.e(u)}finally{i.f()}}return e}(l({},"__esModule",{value:!0}),r));var v=n(46464),g=function(){return u((function e(t){a(this,e),s(this,"queue",[]),s(this,"running",!1),this.timeout=t}),[{key:"run",value:function(){var e=i(o().mark((function e(){var t;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.running){e.next=2;break}return e.abrupt("return");case 2:e.prev=2,this.running=!0;case 4:if(!this.queue.length){e.next=13;break}return t=this.queue.shift(),e.next=8,t();case 8:if(!this.timeout){e.next=11;break}return e.next=11,(0,v.sleep)(this.timeout);case 11:e.next=4;break;case 13:return e.prev=13,this.running=!1,e.finish(13);case 16:case"end":return e.stop()}}),e,this,[[2,,13,16]])})));return function(){return e.apply(this,arguments)}}()},{key:"push",value:function(){var e=i(o().mark((function e(t){var n=this;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,r){n.queue.push((function(){return Promise.resolve(t()).then(e).catch(r)})),n.run()})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"close",value:function(){this.queue=[]}}])}()},94259:function(e,t,n){"use strict";var r,o=n(17383).default,i=n(34579).default,a=n(43693).default,u=n(50883).default,s=Object.defineProperty,c=Object.getOwnPropertyDescriptor,l=Object.getOwnPropertyNames,f=Object.prototype.hasOwnProperty,d={};!function(e,t){for(var n in t)s(e,n,{get:t[n],enumerable:!0})}(d,{PerformanceTracker:function(){return h}}),e.exports=(r=d,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,i=u(l(t));try{var a=function(){var i=o.value;f.call(e,i)||i===n||s(e,i,{get:function(){return t[i]},enumerable:!(r=c(t,i))||r.enumerable})};for(i.s();!(o=i.n()).done;)a()}catch(d){i.e(d)}finally{i.f()}}return e}(s({},"__esModule",{value:!0}),r));var p=n(28690),h=function(){return i((function e(){var t=this;o(this,e),a(this,"startTime",0),a(this,"name",""),a(this,"frames",0),a(this,"started",!1),a(this,"frame",null),a(this,"recordFrame",(function(){t.frames++,t.started&&(t.frame=requestAnimationFrame(t.recordFrame))}))}),[{key:"start",value:function(e){this.name=e,this.frames=0,this.started=!0,null!==this.frame&&cancelAnimationFrame(this.frame),this.frame=requestAnimationFrame(this.recordFrame),this.startTime=performance.now()}},{key:"stop",value:function(){this.started=!1,null!==this.frame&&cancelAnimationFrame(this.frame);var e=(performance.now()-this.startTime)/1e3,t=0===e?0:Math.floor(this.frames/e),n=t>55?p.PERFORMANCE_COLORS.Good:t>30?p.PERFORMANCE_COLORS.Mid:p.PERFORMANCE_COLORS.Poor,r=n===p.PERFORMANCE_COLORS.Mid?"black":"white",o=this.name[0].toUpperCase()+this.name.slice(1);console.debug("%cPerf%c ".concat(o," %c").concat(t,"%c fps"),"color: white; background: ".concat(p.PERFORMANCE_PREFIX_COLOR,";padding: 2px;border-radius: 3px;"),"font-weight: normal","font-weight: bold; padding: 2px; background: ".concat(n,";color: ").concat(r,";"),"font-weight: normal")}},{key:"isStarted",value:function(){return this.started}}])}()},16932:function(e,t,n){"use strict";var r,o=n(50883).default,i=Object.defineProperty,a=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,c={};function l(e,t){return e.map((function(n,r){return e[(r+t)%e.length]}))}function f(e,t){var n,r=[],i=o(e);try{e:for(i.s();!(n=i.n()).done;){var a,u=n.value,s=o(r);try{for(s.s();!(a=s.n()).done;){var c=a.value;if(t?t(u,c):u===c)continue e}}catch(l){s.e(l)}finally{s.f()}r.push(u)}}catch(l){i.e(l)}finally{i.f()}return r}function d(e){return e.filter((function(e){return void 0!==e&&null!==e}))}function p(e){return e[e.length-1]}function h(e,t){var n,r,i=1/0,a=o(e);try{for(a.s();!(r=a.n()).done;){var u=r.value,s=t(u);s<i&&(n=u,i=s)}}catch(c){a.e(c)}finally{a.f()}return n}function v(e,t){var n,r,i=-1/0,a=o(e);try{for(a.s();!(r=a.n()).done;){var u=r.value,s=t(u);s>i&&(n=u,i=s)}}catch(c){a.e(c)}finally{a.f()}return n}function g(e,t){var n,r=[],i=[],a=o(e);try{for(a.s();!(n=a.n()).done;){var u=n.value;t(u)?r.push(u):i.push(u)}}catch(s){a.e(s)}finally{a.f()}return[r,i]}function y(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(!Object.is(e[n],t[n]))return!1;return!0}!function(e,t){for(var n in t)i(e,n,{get:t[n],enumerable:!0})}(c,{areArraysShallowEqual:function(){return y},compact:function(){return d},dedupe:function(){return f},last:function(){return p},maxBy:function(){return v},minBy:function(){return h},partition:function(){return g},rotateArray:function(){return l}}),e.exports=(r=c,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var c,l=o(u(t));try{var f=function(){var o=c.value;s.call(e,o)||o===n||i(e,o,{get:function(){return t[o]},enumerable:!(r=a(t,o))||r.enumerable})};for(l.s();!(c=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(i({},"__esModule",{value:!0}),r))},22534:function(e,t,n){"use strict";var r,o=n(50883).default,i=Object.defineProperty,a=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,c={};!function(e,t){for(var n in t)i(e,n,{get:t[n],enumerable:!0})}(c,{bind:function(){return f}}),e.exports=(r=c,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var c,l=o(u(t));try{var f=function(){var o=c.value;s.call(e,o)||o===n||i(e,o,{get:function(){return t[o]},enumerable:!(r=a(t,o))||r.enumerable})};for(l.s();!(c=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(i({},"__esModule",{value:!0}),r));var l=n(46464);function f(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(2!==t.length){t[0];var r=t[1],o=t[2];if(!o||"function"!==typeof o.value)throw new TypeError("Only methods can be decorated with @bind. <".concat(r,"> is not a method!"));return{configurable:!0,get:function(){var e=o.value.bind(this);return Object.defineProperty(this,r,{value:e,configurable:!0,writable:!0}),e}}}var i=t[0],a=t[1];a.addInitializer((function(){(0,l.assert)(Reflect.isExtensible(this),"Cannot bind to a non-extensible class.");var e=i.bind(this),t=Reflect.defineProperty(this,a.name,{value:e,writable:!0,configurable:!0});(0,l.assert)(t,"Cannot bind a non-configurable class method.")}))}},29627:function(e,t,n){"use strict";var r,o=n(17383).default,i=n(34579).default,a=n(43693).default,u=n(50883).default,s=Object.defineProperty,c=Object.getOwnPropertyDescriptor,l=Object.getOwnPropertyNames,f=Object.prototype.hasOwnProperty,d={};!function(e,t){for(var n in t)s(e,n,{get:t[n],enumerable:!0})}(d,{WeakCache:function(){return p}}),e.exports=(r=d,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,i=u(l(t));try{var a=function(){var i=o.value;f.call(e,i)||i===n||s(e,i,{get:function(){return t[i]},enumerable:!(r=c(t,i))||r.enumerable})};for(i.s();!(o=i.n()).done;)a()}catch(d){i.e(d)}finally{i.f()}}return e}(s({},"__esModule",{value:!0}),r));var p=function(){return i((function e(){o(this,e),a(this,"items",new WeakMap)}),[{key:"get",value:function(e,t){return this.items.has(e)||this.items.set(e,t(e)),this.items.get(e)}}])}()},46464:function(e,t,n){"use strict";var r,o=n(50883).default,i=Object.defineProperty,a=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,c={};!function(e,t){for(var n in t)i(e,n,{get:t[n],enumerable:!0})}(c,{Result:function(){return f},assert:function(){return p},assertExists:function(){return h},exhaustiveSwitchError:function(){return d},promiseWithResolve:function(){return v},sleep:function(){return g}}),e.exports=(r=c,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var c,l=o(u(t));try{var f=function(){var o=c.value;s.call(e,o)||o===n||i(e,o,{get:function(){return t[o]},enumerable:!(r=a(t,o))||r.enumerable})};for(l.s();!(c=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(i({},"__esModule",{value:!0}),r));var l=n(36109),f={ok:function(e){return{ok:!0,value:e}},err:function(e){return{ok:!1,error:e}}};function d(e,t){var n=t&&e&&"object"===typeof e&&t in e?e[t]:e;throw new Error("Unknown switch case ".concat(n))}var p=(0,l.omitFromStackTrace)((function(e,t){if(!e)throw new Error(t||"Assertion Error")})),h=(0,l.omitFromStackTrace)((function(e,t){if(null==e)throw new Error(null!==t&&void 0!==t?t:"value must be defined");return e}));function v(){var e,t,n=new Promise((function(n,r){e=n,t=r}));return Object.assign(n,{resolve:e,reject:t})}function g(e){return new Promise((function(t){return setTimeout(t,e)}))}},33434:function(e,t,n){"use strict";var r,o=n(41132).default,i=n(50883).default,a=Object.defineProperty,u=Object.getOwnPropertyDescriptor,s=Object.getOwnPropertyNames,c=Object.prototype.hasOwnProperty,l={};function f(e,t){var n=void 0,r=function(){n||((n={}).promise=new Promise((function(e,t){n.resolve=e,n.reject=t}))),clearTimeout(n.timeout);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return n.latestArgs=i,n.timeout=setTimeout((function(){var t=n;n=void 0;try{t.resolve(e.apply(void 0,o(t.latestArgs)))}catch(r){t.reject(r)}}),t),n.promise};return r.cancel=function(){n&&clearTimeout(n.timeout)},r}!function(e,t){for(var n in t)a(e,n,{get:t[n],enumerable:!0})}(l,{debounce:function(){return f}}),e.exports=(r=l,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,l=i(s(t));try{var f=function(){var i=o.value;c.call(e,i)||i===n||a(e,i,{get:function(){return t[i]},enumerable:!(r=u(t,i))||r.enumerable})};for(l.s();!(o=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(a({},"__esModule",{value:!0}),r))},54263:function(e,t,n){"use strict";var r,o=n(12897).default,i=n(50883).default,a=Object.defineProperty,u=Object.getOwnPropertyDescriptor,s=Object.getOwnPropertyNames,c=Object.prototype.hasOwnProperty,l={};!function(e,t){for(var n in t)a(e,n,{get:t[n],enumerable:!0})}(l,{annotateError:function(){return d},getErrorAnnotations:function(){return p}}),e.exports=(r=l,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,l=i(s(t));try{var f=function(){var i=o.value;c.call(e,i)||i===n||a(e,i,{get:function(){return t[i]},enumerable:!(r=u(t,i))||r.enumerable})};for(l.s();!(o=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(a({},"__esModule",{value:!0}),r));var f=new WeakMap;function d(e,t){if("object"===typeof e&&null!==e){var n=f.get(e);n||(n={tags:{},extras:{}},f.set(e,n)),t.tags&&(n.tags=o(o({},n.tags),t.tags)),t.extras&&(n.extras=o(o({},n.extras),t.extras))}}function p(e){var t;return null!==(t=f.get(e))&&void 0!==t?t:{tags:{},extras:{}}}},56951:function(e,t,n){"use strict";var r,o=n(4633).default,i=n(29293).default,a=n(17383).default,u=n(34579).default,s=n(50883).default,c=Object.defineProperty,l=Object.getOwnPropertyDescriptor,f=Object.getOwnPropertyNames,d=Object.prototype.hasOwnProperty,p={};!function(e,t){for(var n in t)c(e,n,{get:t[n],enumerable:!0})}(p,{FileHelpers:function(){return v}}),e.exports=(r=p,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,i=s(f(t));try{var a=function(){var i=o.value;d.call(e,i)||i===n||c(e,i,{get:function(){return t[i]},enumerable:!(r=l(t,i))||r.enumerable})};for(i.s();!(o=i.n()).done;)a()}catch(u){i.e(u)}finally{i.f()}}return e}(c({},"__esModule",{value:!0}),r));var h=n(81147),v=function(){return u((function e(){a(this,e)}),null,[{key:"dataUrlToArrayBuffer",value:function(){var e=i(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,h.fetch)(t).then((function(e){return e.arrayBuffer()})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"blobToDataUrl",value:function(){var e=i(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e,n){if(t){var r=new FileReader;r.onload=function(){return e(r.result)},r.onerror=function(e){return n(e)},r.onabort=function(e){return n(e)},r.readAsDataURL(t)}}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"blobToText",value:function(){var e=i(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e,n){if(t){var r=new FileReader;r.onload=function(){return e(r.result)},r.onerror=function(e){return n(e)},r.onabort=function(e){return n(e)},r.readAsText(t)}}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"rewriteMimeType",value:function(e,t){return e.type===t?e:e instanceof File?new File([e],e.name,{type:t}):new Blob([e],{type:t})}}])}()},36109:function(e,t,n){"use strict";var r,o=n(50883).default,i=Object.defineProperty,a=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,c={};function l(e){var t=function(){try{return e.apply(void 0,arguments)}catch(n){throw n instanceof Error&&Error.captureStackTrace&&Error.captureStackTrace(n,t),n}};return t}!function(e,t){for(var n in t)i(e,n,{get:t[n],enumerable:!0})}(c,{noop:function(){return f},omitFromStackTrace:function(){return l}}),e.exports=(r=c,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var c,l=o(u(t));try{var f=function(){var o=c.value;s.call(e,o)||o===n||i(e,o,{get:function(){return t[o]},enumerable:!(r=a(t,o))||r.enumerable})};for(l.s();!(c=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(i({},"__esModule",{value:!0}),r));var f=function(){}},81389:function(e,t,n){"use strict";var r,o=n(41132).default,i=n(50883).default,a=Object.defineProperty,u=Object.getOwnPropertyDescriptor,s=Object.getOwnPropertyNames,c=Object.prototype.hasOwnProperty,l={};function f(e){for(var t=0,n=0;n<e.length;n++)t=(t<<5)-t+e.charCodeAt(n),t|=0;return t+""}function d(e){return f(JSON.stringify(e))}function p(e){for(var t=new DataView(e),n=0,r=0;r<t.byteLength;r++)n=(n<<5)-n+t.getUint8(r),n|=0;return n+""}function h(e){var t=e.split("");return t.push.apply(t,o(t.splice(0,Math.round(t.length/5)))),t.push.apply(t,o(t.splice(0,Math.round(t.length/4)))),t.push.apply(t,o(t.splice(0,Math.round(t.length/3)))),t.push.apply(t,o(t.splice(0,Math.round(t.length/2)))),t.reverse().map((function(e){return+e?+e<5?+e+5:+e>5?+e-5:e:e})).join("")}!function(e,t){for(var n in t)a(e,n,{get:t[n],enumerable:!0})}(l,{getHashForBuffer:function(){return p},getHashForObject:function(){return d},getHashForString:function(){return f},lns:function(){return h}}),e.exports=(r=l,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,l=i(s(t));try{var f=function(){var i=o.value;c.call(e,i)||i===n||a(e,i,{get:function(){return t[i]},enumerable:!(r=u(t,i))||r.enumerable})};for(l.s();!(o=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(a({},"__esModule",{value:!0}),r))},27064:function(e,t,n){"use strict";var r,o=n(50883).default,i=Object.defineProperty,a=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,c={};!function(e,t){for(var n in t)i(e,n,{get:t[n],enumerable:!0})}(c,{mockUniqueId:function(){return y},restoreUniqueId:function(){return m},uniqueId:function(){return b}}),e.exports=(r=c,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var c,l=o(u(t));try{var f=function(){var o=c.value;s.call(e,o)||o===n||i(e,o,{get:function(){return t[o]},enumerable:!(r=a(t,o))||r.enumerable})};for(l.s();!(c=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(i({},"__esModule",{value:!0}),r));var l,f,d=globalThis.crypto,p="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict",h=128;function v(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:21;e=t-=0,!l||l.length<e?(l=new Uint8Array(e*h),d.getRandomValues(l),f=0):f+e>l.length&&(d.getRandomValues(l),f=0);for(var n="",r=(f+=e)-t;r<f;r++)n+=p[63&l[r]];return n}var g=v;function y(e){g=e}function m(){g=v}function b(e){return g(e)}},34591:function(e,t,n){"use strict";var r,o=n(50883).default,i=Object.defineProperty,a=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,c={};function l(e){return e.values().next().value}!function(e,t){for(var n in t)i(e,n,{get:t[n],enumerable:!0})}(c,{getFirstFromIterable:function(){return l}}),e.exports=(r=c,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var c,l=o(u(t));try{var f=function(){var o=c.value;s.call(e,o)||o===n||i(e,o,{get:function(){return t[o]},enumerable:!(r=a(t,o))||r.enumerable})};for(l.s();!(c=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(i({},"__esModule",{value:!0}),r))},23850:function(e,t,n){"use strict";var r,o=n(93325).hp,i=n(50883).default,a=Object.defineProperty,u=Object.getOwnPropertyDescriptor,s=Object.getOwnPropertyNames,c=Object.prototype.hasOwnProperty,l={};function f(e){var t=new Uint8Array(e);if(!t||!("undefined"!==typeof o&&o.isBuffer(t)||t instanceof Uint8Array)||t.length<16)return!1;if(!(137===t[0]&&80===t[1]&&78===t[2]&&71===t[3]&&13===t[4]&&10===t[5]&&26===t[6]&&10===t[7]))return!1;function n(e,t,n,r){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1024;if(!t)return-1;var i=(t=new RegExp(t,"g")).source.length,a=new TextDecoder,u=e.length;if("undefined"===typeof r&&(r=u),n>=u||r<=0||n>=r)return-1;e=e.subarray(n,r);var s=-1,c=0,l=0,f="";e:for(;c<e.length;){for(var d=c+o,p=e.subarray(c,d),h=a.decode(p,{stream:!0}),v=f+h,g=void 0,y=-1;null!==(g=t.exec(v));){s=l+(y=g.index-f.length);break e}c=d,l+=h.length;var m=y>-1?y+i:h.length-i;f=h.slice(m)}return s>=0&&(s+=n>=0?n:u+n),s}var r=n(t,"IDAT",12);return r>=12&&n(t,"acTL",8,r)>=8}!function(e,t){for(var n in t)a(e,n,{get:t[n],enumerable:!0})}(l,{isApngAnimated:function(){return f}}),e.exports=(r=l,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,l=i(s(t));try{var f=function(){var i=o.value;c.call(e,i)||i===n||a(e,i,{get:function(){return t[i]},enumerable:!(r=u(t,i))||r.enumerable})};for(l.s();!(o=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(a({},"__esModule",{value:!0}),r))},45004:function(e,t,n){"use strict";var r,o=n(50883).default,i=Object.defineProperty,a=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,c={};!function(e,t){for(var n in t)i(e,n,{get:t[n],enumerable:!0})}(c,{isAvifAnimated:function(){return l}}),e.exports=(r=c,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var c,l=o(u(t));try{var f=function(){var o=c.value;s.call(e,o)||o===n||i(e,o,{get:function(){return t[o]},enumerable:!(r=a(t,o))||r.enumerable})};for(l.s();!(c=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(i({},"__esModule",{value:!0}),r));var l=function(e){return 44===new Uint8Array(e)[3]}},89168:function(e,t,n){"use strict";var r,o=n(50883).default,i=Object.defineProperty,a=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,c={};function l(e,t){for(var n=0;e[t+n];)n+=e[t+n]+1;return n+1}function f(e){return"GIF"===new TextDecoder("ascii").decode(e.slice(0,3))}function d(e){var t,n,r=new Uint8Array(e),o=0,i=0;if(!f(e))return!1;for(t=128&r[10],n=7&r[10],o+=6,o+=7,o+=t?3*Math.pow(2,n+1):0;i<2&&o<r.length;)switch(r[o]){case 44:i+=1,t=128&r[o+9],n=7&r[o+9],o+=10,o+=t?3*Math.pow(2,n+1):0,o+=l(r,o+1)+1;break;case 33:o+=2,o+=l(r,o);break;default:o=r.length}return i>1}!function(e,t){for(var n in t)i(e,n,{get:t[n],enumerable:!0})}(c,{isGIF:function(){return f},isGifAnimated:function(){return d}}),e.exports=(r=c,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var c,l=o(u(t));try{var f=function(){var o=c.value;s.call(e,o)||o===n||i(e,o,{get:function(){return t[o]},enumerable:!(r=a(t,o))||r.enumerable})};for(l.s();!(c=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(i({},"__esModule",{value:!0}),r))},93390:function(e,t,n){"use strict";var r,o=n(4633).default,i=n(29293).default,a=n(17383).default,u=n(34579).default,s=n(41132).default,c=n(50883).default,l=Object.defineProperty,f=Object.getOwnPropertyDescriptor,d=Object.getOwnPropertyNames,p=Object.prototype.hasOwnProperty,h={};!function(e,t){for(var n in t)l(e,n,{get:t[n],enumerable:!0})}(h,{DEFAULT_SUPPORTED_ANIMATED_IMAGE_TYPES:function(){return O},DEFAULT_SUPPORTED_IMAGE_TYPES:function(){return k},DEFAULT_SUPPORTED_MEDIA_TYPE_LIST:function(){return j},DEFAULT_SUPPORTED_STATIC_IMAGE_TYPES:function(){return P},DEFAULT_SUPPORTED_VECTOR_IMAGE_TYPES:function(){return x},DEFAULT_SUPPORT_VIDEO_TYPES:function(){return _},MediaHelpers:function(){return I}}),e.exports=(r=h,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,i=c(d(t));try{var a=function(){var i=o.value;p.call(e,i)||i===n||l(e,i,{get:function(){return t[i]},enumerable:!(r=f(t,i))||r.enumerable})};for(i.s();!(o=i.n()).done;)a()}catch(u){i.e(u)}finally{i.f()}}return e}(l({},"__esModule",{value:!0}),r));var v=n(46464),g=n(81147),y=n(23850),m=n(45004),b=n(89168),w=n(73329),S=n(85346),x=Object.freeze(["image/svg+xml"]),P=Object.freeze(["image/jpeg","image/png","image/webp"]),O=Object.freeze(["image/gif","image/apng","image/avif"]),k=Object.freeze([].concat(s(P),s(x),s(O))),_=Object.freeze(["video/mp4","video/webm","video/quicktime"]),j=[].concat(s(k),s(_)).join(","),I=function(){function e(){a(this,e)}return u(e,null,[{key:"loadVideo",value:function(e){return new Promise((function(t,n){var r=document.createElement("video");r.onloadeddata=function(){return t(r)},r.onerror=function(e){console.error(e),n(new Error("Could not load video"))},r.crossOrigin="anonymous",r.src=e}))}},{key:"getVideoFrameAsDataUrl",value:function(){var e=i(o().mark((function e(t){var n,r,i,a,u,s=arguments;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=s.length>1&&void 0!==s[1]?s[1]:0,r=(0,v.promiseWithResolve)(),i=!1,a=function(){if(!i){if(!(t.readyState>=t.HAVE_METADATA))return;i=!0,t.currentTime=n}if(t.readyState>=t.HAVE_CURRENT_DATA){var e=document.createElement("canvas");e.width=t.videoWidth,e.height=t.videoHeight;var o=e.getContext("2d");if(!o)throw new Error("Could not get 2d context");o.drawImage(t,0,0),r.resolve(e.toDataURL())}},u=function(e){console.error(e),r.reject(new Error("Could not get video frame"))},t.addEventListener("loadedmetadata",a),t.addEventListener("loadeddata",a),t.addEventListener("canplay",a),t.addEventListener("seeked",a),t.addEventListener("error",u),t.addEventListener("stalled",u),a(),e.prev=12,e.next=15,r;case 15:return e.abrupt("return",e.sent);case 16:return e.prev=16,t.removeEventListener("loadedmetadata",a),t.removeEventListener("loadeddata",a),t.removeEventListener("canplay",a),t.removeEventListener("seeked",a),t.removeEventListener("error",u),t.removeEventListener("stalled",u),e.finish(16);case 24:case"end":return e.stop()}}),e,null,[[12,,16,24]])})));return function(t){return e.apply(this,arguments)}}()},{key:"loadImage",value:function(e){return new Promise((function(t,n){var r=(0,g.Image)();r.onload=function(){return t(r)},r.onerror=function(e){console.error(e),n(new Error("Could not load image"))},r.crossOrigin="anonymous",r.referrerPolicy="strict-origin-when-cross-origin",r.src=e}))}},{key:"getVideoSize",value:function(){var t=i(o().mark((function t(n){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e.usingObjectURL(n,function(){var t=i(o().mark((function t(n){var r;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.loadVideo(n);case 2:return r=t.sent,t.abrupt("return",{w:r.videoWidth,h:r.videoHeight});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},{key:"getImageSize",value:function(){var t=i(o().mark((function t(n){var r,i,a,u,s;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.usingObjectURL(n,e.loadImage);case 2:if(r=t.sent,t.prev=3,"image/png"!==n.type){t.next=17;break}return t.t0=DataView,t.next=8,n.arrayBuffer();case 8:if(t.t1=t.sent,i=new t.t0(t.t1),!w.PngHelpers.isPng(i,0)){t.next=17;break}if(!(a=w.PngHelpers.findChunk(i,"pHYs"))){t.next=17;break}if(0!==(u=w.PngHelpers.parsePhys(i,a.dataOffset)).unit||u.ppux!==u.ppuy){t.next=17;break}return s=Math.max(u.ppux/2834.5,1),t.abrupt("return",{w:Math.round(r.naturalWidth/s),h:Math.round(r.naturalHeight/s)});case 17:t.next=23;break;case 19:return t.prev=19,t.t2=t.catch(3),console.error(t.t2),t.abrupt("return",{w:r.naturalWidth,h:r.naturalHeight});case 23:return t.abrupt("return",{w:r.naturalWidth,h:r.naturalHeight});case 24:case"end":return t.stop()}}),t,null,[[3,19]])})));return function(e){return t.apply(this,arguments)}}()},{key:"isAnimated",value:function(){var e=i(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("image/gif"!==t.type){e.next=6;break}return e.t0=b.isGifAnimated,e.next=4,t.arrayBuffer();case 4:return e.t1=e.sent,e.abrupt("return",(0,e.t0)(e.t1));case 6:if("image/avif"!==t.type){e.next=12;break}return e.t2=m.isAvifAnimated,e.next=10,t.arrayBuffer();case 10:return e.t3=e.sent,e.abrupt("return",(0,e.t2)(e.t3));case 12:if("image/webp"!==t.type){e.next=18;break}return e.t4=S.isWebpAnimated,e.next=16,t.arrayBuffer();case 16:return e.t5=e.sent,e.abrupt("return",(0,e.t4)(e.t5));case 18:if("image/apng"!==t.type){e.next=24;break}return e.t6=y.isApngAnimated,e.next=22,t.arrayBuffer();case 22:return e.t7=e.sent,e.abrupt("return",(0,e.t6)(e.t7));case 24:return e.abrupt("return",!1);case 25:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"isAnimatedImageType",value:function(e){return O.includes(e||"")}},{key:"isStaticImageType",value:function(e){return P.includes(e||"")}},{key:"isVectorImageType",value:function(e){return x.includes(e||"")}},{key:"isImageType",value:function(e){return k.includes(e)}},{key:"usingObjectURL",value:function(){var e=i(o().mark((function e(t,n){var r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=URL.createObjectURL(t),e.prev=1,e.next=4,n(r);case 4:return e.abrupt("return",e.sent);case 5:return e.prev=5,URL.revokeObjectURL(r),e.finish(5);case 8:case"end":return e.stop()}}),e,null,[[1,,5,8]])})));return function(t,n){return e.apply(this,arguments)}}()}])}()},73329:function(e,t,n){"use strict";var r,o=n(17383).default,i=n(34579).default,a=n(50883).default,u=Object.defineProperty,s=Object.getOwnPropertyDescriptor,c=Object.getOwnPropertyNames,l=Object.prototype.hasOwnProperty,f={};!function(e,t){for(var n in t)u(e,n,{get:t[n],enumerable:!0})}(f,{PngHelpers:function(){return p}}),e.exports=(r=f,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,i=a(c(t));try{var f=function(){var i=o.value;l.call(e,i)||i===n||u(e,i,{get:function(){return t[i]},enumerable:!(r=s(t,i))||r.enumerable})};for(i.s();!(o=i.n()).done;)f()}catch(d){i.e(d)}finally{i.f()}}return e}(u({},"__esModule",{value:!0}),r));var d=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117];"undefined"!==typeof Int32Array&&(d=new Int32Array(d));var p=function(){function e(){o(this,e)}return i(e,null,[{key:"isPng",value:function(e,t){return 137===e.getUint8(t+0)&&80===e.getUint8(t+1)&&78===e.getUint8(t+2)&&71===e.getUint8(t+3)&&13===e.getUint8(t+4)&&10===e.getUint8(t+5)&&26===e.getUint8(t+6)&&10===e.getUint8(t+7)}},{key:"getChunkType",value:function(e,t){return[String.fromCharCode(e.getUint8(t)),String.fromCharCode(e.getUint8(t+1)),String.fromCharCode(e.getUint8(t+2)),String.fromCharCode(e.getUint8(t+3))].join("")}},{key:"readChunks",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r={};if(!e.isPng(t,n))throw new Error("Not a PNG");for(n+=8;n<=t.buffer.byteLength;){var o=n,i=t.getInt32(n);n+=4;var a=e.getChunkType(t,n);if("IDAT"===a&&r[a])n+=i+4+4;else{if("IEND"===a)break;r[a]={start:o,dataOffset:n+4,size:i},n+=i+4+4}}return r}},{key:"parsePhys",value:function(e,t){return{ppux:e.getUint32(t),ppuy:e.getUint32(t+4),unit:e.getUint8(t+4)}}},{key:"findChunk",value:function(t,n){return e.readChunks(t)[n]}},{key:"setPhysChunk",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=arguments.length>2?arguments[2]:void 0,o=46,i=0,a=e.findChunk(t,"pHYs");a&&(o=a.start,i=a.size);var u=e.findChunk(t,"IDAT");u&&(o=u.start,i=0);var s=new ArrayBuffer(21),c=new DataView(s);c.setUint32(0,9),c.setUint8(4,"p".charCodeAt(0)),c.setUint8(5,"H".charCodeAt(0)),c.setUint8(6,"Y".charCodeAt(0)),c.setUint8(7,"s".charCodeAt(0));var l=2835.5;c.setInt32(8,l*n),c.setInt32(12,l*n),c.setInt8(16,1);var f=new Uint8Array(s.slice(4,17));c.setInt32(17,function(e,t){for(var n=0===t?0:~t,r=0;r<e.length;r++)n=d[255&(n^e[r])]^n>>>8;return~n}(f));var p=t.buffer.slice(0,o),h=t.buffer.slice(o+i);return new Blob([p,s,h],r)}}])}()},85346:function(e,t,n){"use strict";var r,o=n(50883).default,i=Object.defineProperty,a=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,c={};function l(e){var t=new Uint8Array(e);return!!function(e){return!(!e||e.length<12)&&87===e[8]&&69===e[9]&&66===e[10]&&80===e[11]}(t)&&(!(!t||t.length<21)&&1===(t[20]>>1&1))}!function(e,t){for(var n in t)i(e,n,{get:t[n],enumerable:!0})}(c,{isWebpAnimated:function(){return l}}),e.exports=(r=c,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var c,l=o(u(t));try{var f=function(){var o=c.value;s.call(e,o)||o===n||i(e,o,{get:function(){return t[o]},enumerable:!(r=a(t,o))||r.enumerable})};for(l.s();!(c=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(i({},"__esModule",{value:!0}),r))},81147:function(e,t,n){"use strict";var r,o=n(4633).default,i=n(12897).default,a=n(29293).default,u=n(50883).default,s=Object.defineProperty,c=Object.getOwnPropertyDescriptor,l=Object.getOwnPropertyNames,f=Object.prototype.hasOwnProperty,d={};function p(e,t){return h.apply(this,arguments)}function h(){return(h=a(o().mark((function e(t,n){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",window.fetch(t,i({referrerPolicy:"strict-origin-when-cross-origin"},n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(e,t){for(var n in t)s(e,n,{get:t[n],enumerable:!0})}(d,{Image:function(){return v},fetch:function(){return p}}),e.exports=(r=d,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,i=u(l(t));try{var a=function(){var i=o.value;f.call(e,i)||i===n||s(e,i,{get:function(){return t[i]},enumerable:!(r=c(t,i))||r.enumerable})};for(i.s();!(o=i.n()).done;)a()}catch(d){i.e(d)}finally{i.f()}}return e}(s({},"__esModule",{value:!0}),r));var v=function(e,t){var n=new window.Image(e,t);return n.referrerPolicy="strict-origin-when-cross-origin",n}},32984:function(e,t,n){"use strict";var r,o=n(85715).default,i=n(50883).default,a=Object.defineProperty,u=Object.getOwnPropertyDescriptor,s=Object.getOwnPropertyNames,c=Object.prototype.hasOwnProperty,l={};function f(e,t,n){return e+(t-e)*n}function d(e,t,n){return(n-e)/(t-e)}function p(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=0,n=0,r=0,o=0;function i(){var e=t^t<<11;return t=n,n=r,r=o,(o^=(o>>>19^e^e>>>8)>>>0)/4294967296*2}for(var a=0;a<e.length+64;a++)t^=0|e.charCodeAt(a),i();return i}function h(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=o(t,2),a=i[0],u=i[1],s=o(n,2),c=s[0],l=s[1],f=c+(e-a)/(u-a)*(l-c);return r?c<l?Math.max(Math.min(f,l),c):Math.max(Math.min(f,c),l):f}!function(e,t){for(var n in t)a(e,n,{get:t[n],enumerable:!0})}(l,{invLerp:function(){return d},lerp:function(){return f},modulate:function(){return h},rng:function(){return p}}),e.exports=(r=l,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,l=i(s(t));try{var f=function(){var i=o.value;c.call(e,i)||i===n||a(e,i,{get:function(){return t[i]},enumerable:!(r=u(t,i))||r.enumerable})};for(l.s();!(o=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(a({},"__esModule",{value:!0}),r))},510:function(e,t,n){"use strict";var r,o=n(85715).default,i=n(50883).default,a=Object.defineProperty,u=Object.getOwnPropertyDescriptor,s=Object.getOwnPropertyNames,c=Object.prototype.hasOwnProperty,l={};function f(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function d(e,t){if(f(e,t))return e[t]}function p(e){return Object.keys(e)}function h(e){return Object.values(e)}function v(e){return Object.entries(e)}function g(e){return Object.fromEntries(e)}function y(e,t){var n,r={},a=!1,u=i(v(e));try{for(u.s();!(n=u.n()).done;){var s=o(n.value,2),c=s[0],l=s[1];t(c,l)?r[c]=l:a=!0}}catch(f){u.e(f)}finally{u.f()}return a?r:e}function m(e,t){var n,r={},a=i(v(e));try{for(a.s();!(n=a.n()).done;){var u=o(n.value,2),s=u[0],c=t(s,u[1]);r[s]=c}}catch(l){a.e(l)}finally{a.f()}return r}function b(e,t){if(e===t)return!0;var n=new Set(Object.keys(e)),r=new Set(Object.keys(t));if(n.size!==r.size)return!1;var o,a=i(n);try{for(a.s();!(o=a.n()).done;){var u=o.value;if(!r.has(u))return!1;if(!Object.is(e[u],t[u]))return!1}}catch(s){a.e(s)}finally{a.f()}return!0}function w(e,t){var n,r={},o=i(e);try{for(o.s();!(n=o.n()).done;){var a=n.value,u=t(a);r[u]||(r[u]=[]),r[u].push(a)}}catch(s){o.e(s)}finally{o.f()}return r}!function(e,t){for(var n in t)a(e,n,{get:t[n],enumerable:!0})}(l,{areObjectsShallowEqual:function(){return b},filterEntries:function(){return y},getOwnProperty:function(){return d},groupBy:function(){return w},hasOwnProperty:function(){return f},mapObjectMapValues:function(){return m},objectMapEntries:function(){return v},objectMapFromEntries:function(){return g},objectMapKeys:function(){return p},objectMapValues:function(){return h}}),e.exports=(r=l,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,l=i(s(t));try{var f=function(){var i=o.value;c.call(e,i)||i===n||a(e,i,{get:function(){return t[i]},enumerable:!(r=u(t,i))||r.enumerable})};for(l.s();!(o=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(a({},"__esModule",{value:!0}),r))},28690:function(e,t,n){"use strict";var r,o=n(50883).default,i=Object.defineProperty,a=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,c={};!function(e,t){for(var n in t)i(e,n,{get:t[n],enumerable:!0})}(c,{PERFORMANCE_COLORS:function(){return l},PERFORMANCE_PREFIX_COLOR:function(){return f},measureAverageDuration:function(){return v},measureCbDuration:function(){return d},measureDuration:function(){return p}}),e.exports=(r=c,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var c,l=o(u(t));try{var f=function(){var o=c.value;s.call(e,o)||o===n||i(e,o,{get:function(){return t[o]},enumerable:!(r=a(t,o))||r.enumerable})};for(l.s();!(c=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(i({},"__esModule",{value:!0}),r));var l={Good:"#40C057",Mid:"#FFC078",Poor:"#E03131"},f=l.Good;function d(e,t){var n=performance.now(),r=t();return console.debug("%cPerf%c ".concat(e," took ").concat(performance.now()-n,"ms"),"color: white; background: ".concat(f,";padding: 2px;border-radius: 3px;"),"font-weight: normal"),r}function p(e,t,n){var r=n.value;return n.value=function(){for(var e=performance.now(),n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];var a=r.apply(this,o);return console.debug("%cPerf%c ".concat(t," took: ").concat(performance.now()-e,"ms"),"color: white; background: ".concat(f,";padding: 2px;border-radius: 3px;"),"font-weight: normal"),a},n}var h=new Map;function v(e,t,n){var r=n.value;return n.value=function(){for(var e=performance.now(),o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];var u=r.apply(this,i),s=performance.now(),c=s-e;if(0!==c){var l=h.get(n.value),d=l.total+c,p=l.count+1;h.set(n.value,{total:d,count:p}),console.debug("%cPerf%c ".concat(t," took ").concat((s-e).toFixed(2),"ms | average ").concat((d/p).toFixed(2),"ms"),"color: white; background: ".concat(f,";padding: 2px;border-radius: 3px;"),"font-weight: normal")}return u},h.set(n.value,{total:0,count:0}),n}},23368:function(e,t,n){"use strict";var r,o=n(41132).default,i=n(50883).default,a=Object.defineProperty,u=Object.getOwnPropertyDescriptor,s=Object.getOwnPropertyNames,c=Object.prototype.hasOwnProperty,l={};!function(e,t){for(var n in t)a(e,n,{get:t[n],enumerable:!0})}(l,{ZERO_INDEX_KEY:function(){return p},getIndexAbove:function(){return b},getIndexBelow:function(){return w},getIndexBetween:function(){return m},getIndices:function(){return S},getIndicesAbove:function(){return g},getIndicesBelow:function(){return y},getIndicesBetween:function(){return v},sortByIndex:function(){return x},validateIndexKey:function(){return h}}),e.exports=(r=l,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,l=i(s(t));try{var f=function(){var i=o.value;c.call(e,i)||i===n||a(e,i,{get:function(){return t[i]},enumerable:!(r=u(t,i))||r.enumerable})};for(l.s();!(o=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(a({},"__esModule",{value:!0}),r));var f=n(63437),d=f.generateNJitteredKeysBetween,p="a0";function h(e){try{(0,f.generateJitteredKeyBetween)(e,null)}catch(t){throw new Error("invalid index: "+e)}}function v(e,t,n){return d(null!==e&&void 0!==e?e:null,null!==t&&void 0!==t?t:null,n)}function g(e,t){return d(null!==e&&void 0!==e?e:null,null,t)}function y(e,t){return d(null,null!==e&&void 0!==e?e:null,t)}function m(e,t){return d(null!==e&&void 0!==e?e:null,null!==t&&void 0!==t?t:null,1)[0]}function b(){return d(arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,null,1)[0]}function w(){return d(null,arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,1)[0]}function S(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"a1";return[t].concat(o(d(t,null,e)))}function x(e,t){return e.index<t.index?-1:e.index>t.index?1:0}},46987:function(e,t,n){"use strict";var r,o=n(4633).default,i=n(29293).default,a=n(50883).default,u=Object.defineProperty,s=Object.getOwnPropertyDescriptor,c=Object.getOwnPropertyNames,l=Object.prototype.hasOwnProperty,f={};!function(e,t){for(var n in t)u(e,n,{get:t[n],enumerable:!0})}(f,{retry:function(){return p}}),e.exports=(r=f,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,i=a(c(t));try{var f=function(){var i=o.value;l.call(e,i)||i===n||u(e,i,{get:function(){return t[i]},enumerable:!(r=s(t,i))||r.enumerable})};for(i.s();!(o=i.n()).done;)f()}catch(d){i.e(d)}finally{i.f()}}return e}(u({},"__esModule",{value:!0}),r));var d=n(46464);function p(e){return h.apply(this,arguments)}function h(){return h=i(o().mark((function e(t){var n,r,i,a,u,s,c,l,f,p=arguments;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=(n=p.length>1&&void 0!==p[1]?p[1]:{}).attempts,i=void 0===r?3:r,a=n.waitDuration,u=void 0===a?1e3:a,s=n.abortSignal,c=n.matchError,l=null,f=0;case 3:if(!(f<i)){e.next=22;break}if(null===s||void 0===s||!s.aborted){e.next=6;break}throw new Error("aborted");case 6:return e.prev=6,e.next=9,t();case 9:return e.abrupt("return",e.sent);case 12:if(e.prev=12,e.t0=e.catch(6),!c||c(e.t0)){e.next=16;break}throw e.t0;case 16:return l=e.t0,e.next=19,(0,d.sleep)(u);case 19:f++,e.next=3;break;case 22:throw l;case 23:case"end":return e.stop()}}),e,null,[[6,12]])}))),h.apply(this,arguments)}},64145:function(e,t,n){"use strict";var r,o=n(50883).default,i=Object.defineProperty,a=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,c={};function l(e,t){return e.id>t.id?1:-1}!function(e,t){for(var n in t)i(e,n,{get:t[n],enumerable:!0})}(c,{sortById:function(){return l}}),e.exports=(r=c,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var c,l=o(u(t));try{var f=function(){var o=c.value;s.call(e,o)||o===n||i(e,o,{get:function(){return t[o]},enumerable:!(r=a(t,o))||r.enumerable})};for(l.s();!(c=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(i({},"__esModule",{value:!0}),r))},44496:function(e,t,n){"use strict";var r,o=n(50883).default,i=Object.defineProperty,a=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,c={};function l(e){try{return localStorage.getItem(e)}catch(t){return null}}function f(e,t){try{localStorage.setItem(e,t)}catch(n){}}function d(e){try{localStorage.removeItem(e)}catch(t){}}function p(){try{localStorage.clear()}catch(e){}}function h(e){try{return sessionStorage.getItem(e)}catch(t){return null}}function v(e,t){try{sessionStorage.setItem(e,t)}catch(n){}}function g(e){try{sessionStorage.removeItem(e)}catch(t){}}function y(){try{sessionStorage.clear()}catch(e){}}!function(e,t){for(var n in t)i(e,n,{get:t[n],enumerable:!0})}(c,{clearLocalStorage:function(){return p},clearSessionStorage:function(){return y},deleteFromLocalStorage:function(){return d},deleteFromSessionStorage:function(){return g},getFromLocalStorage:function(){return l},getFromSessionStorage:function(){return h},setInLocalStorage:function(){return f},setInSessionStorage:function(){return v}}),e.exports=(r=c,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var c,l=o(u(t));try{var f=function(){var o=c.value;s.call(e,o)||o===n||i(e,o,{get:function(){return t[o]},enumerable:!(r=a(t,o))||r.enumerable})};for(l.s();!(c=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(i({},"__esModule",{value:!0}),r))},1249:function(e,t,n){"use strict";var r,o=n(50883).default,i=Object.defineProperty,a=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,c={};function l(){for(var e={},t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var o=0,i=n;o<i.length;o++){var a=i[o];e[a]=a}return e}!function(e,t){for(var n in t)i(e,n,{get:t[n],enumerable:!0})}(c,{stringEnum:function(){return l}}),e.exports=(r=c,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var c,l=o(u(t));try{var f=function(){var o=c.value;s.call(e,o)||o===n||i(e,o,{get:function(){return t[o]},enumerable:!(r=a(t,o))||r.enumerable})};for(l.s();!(c=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(i({},"__esModule",{value:!0}),r))},76445:function(e,t,n){"use strict";var r,o=n(85224),i=n(50883).default,a=Object.defineProperty,u=Object.getOwnPropertyDescriptor,s=Object.getOwnPropertyNames,c=Object.prototype.hasOwnProperty,l={};!function(e,t){for(var n in t)a(e,n,{get:t[n],enumerable:!0})}(l,{fpsThrottle:function(){return w},throttleToNextFrame:function(){return S}}),e.exports=(r=l,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,l=i(s(t));try{var f=function(){var i=o.value;c.call(e,i)||i===n||a(e,i,{get:function(){return t[i]},enumerable:!(r=u(t,i))||r.enumerable})};for(l.s();!(o=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(a({},"__esModule",{value:!0}),r));var f,d=function(){return"undefined"!==typeof o&&!1},p=[],h=Math.ceil(1e3/60),v=0,g=0,y=function(){var e,t=p.splice(0,p.length),n=i(t);try{for(n.s();!(e=n.n()).done;){(0,e.value)()}}catch(r){n.e(r)}finally{n.f()}};function m(){if(!f){var e=Date.now(),t=e-g;f=v+t<h?requestAnimationFrame((function(){f=void 0,m()})):requestAnimationFrame((function(){f=void 0,g=e,v=Math.min(v+t-h,10*h),y()}))}}var b=!1;function w(e){if(d())return e.cancel=function(){return f&&cancelAnimationFrame(f)},e;var t=function(){p.includes(e)||(p.push(e),b||(b=!0,g=Date.now()-h-1),m())};return t.cancel=function(){var t=p.indexOf(e);t>-1&&p.splice(t,1)},t}function S(e){return d()?(e(),function(){}):(p.includes(e)||(p.push(e),b||(b=!0,g=Date.now()-h-1),m()),function(){var t=p.indexOf(e);t>-1&&p.splice(t,1)})}},88619:function(e,t,n){"use strict";var r,o=n(41132).default,i=n(17383).default,a=n(34579).default,u=n(43693).default,s=n(50883).default,c=Object.defineProperty,l=Object.getOwnPropertyDescriptor,f=Object.getOwnPropertyNames,d=Object.prototype.hasOwnProperty,p={};!function(e,t){for(var n in t)c(e,n,{get:t[n],enumerable:!0})}(p,{Timers:function(){return h}}),e.exports=(r=p,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,i=s(f(t));try{var a=function(){var i=o.value;d.call(e,i)||i===n||c(e,i,{get:function(){return t[i]},enumerable:!(r=l(t,i))||r.enumerable})};for(i.s();!(o=i.n()).done;)a()}catch(u){i.e(u)}finally{i.f()}}return e}(c({},"__esModule",{value:!0}),r));var h=function(){return a((function e(){i(this,e),u(this,"timeouts",new Map),u(this,"intervals",new Map),u(this,"rafs",new Map),this.setTimeout=this.setTimeout.bind(this),this.setInterval=this.setInterval.bind(this),this.requestAnimationFrame=this.requestAnimationFrame.bind(this),this.dispose=this.dispose.bind(this)}),[{key:"setTimeout",value:function(e,t,n){for(var r,i=arguments.length,a=new Array(i>3?i-3:0),u=3;u<i;u++)a[u-3]=arguments[u];var s=window.setTimeout(t,n,a),c=null!==(r=this.timeouts.get(e))&&void 0!==r?r:[];return this.timeouts.set(e,[].concat(o(c),[s])),s}},{key:"setInterval",value:function(e,t,n){for(var r,i=arguments.length,a=new Array(i>3?i-3:0),u=3;u<i;u++)a[u-3]=arguments[u];var s=window.setInterval(t,n,a),c=null!==(r=this.intervals.get(e))&&void 0!==r?r:[];return this.intervals.set(e,[].concat(o(c),[s])),s}},{key:"requestAnimationFrame",value:function(e,t){var n,r=window.requestAnimationFrame(t),i=null!==(n=this.rafs.get(e))&&void 0!==n?n:[];return this.rafs.set(e,[].concat(o(i),[r])),r}},{key:"dispose",value:function(e){var t,n,r;null===(t=this.timeouts.get(e))||void 0===t||t.forEach((function(e){return clearTimeout(e)})),null===(n=this.intervals.get(e))||void 0===n||n.forEach((function(e){return clearInterval(e)})),null===(r=this.rafs.get(e))||void 0===r||r.forEach((function(e){return cancelAnimationFrame(e)})),this.timeouts.delete(e),this.intervals.delete(e),this.rafs.delete(e)}},{key:"disposeAll",value:function(){var e,t=s(this.timeouts.keys());try{for(t.s();!(e=t.n()).done;){var n=e.value;this.dispose(n)}}catch(r){t.e(r)}finally{t.f()}}},{key:"forContext",value:function(e){var t=this;return{setTimeout:function(n,r){for(var o=arguments.length,i=new Array(o>2?o-2:0),a=2;a<o;a++)i[a-2]=arguments[a];return t.setTimeout(e,n,r,i)},setInterval:function(n,r){for(var o=arguments.length,i=new Array(o>2?o-2:0),a=2;a<o;a++)i[a-2]=arguments[a];return t.setInterval(e,n,r,i)},requestAnimationFrame:function(n){return t.requestAnimationFrame(e,n)},dispose:function(){return t.dispose(e)}}}}])}()},5516:function(e,t,n){"use strict";var r,o=n(50883).default,i=Object.defineProperty,a=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,c={};!function(e,t){for(var n in t)i(e,n,{get:t[n],enumerable:!0})}(c,{safeParseUrl:function(){return l}}),e.exports=(r=c,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var c,l=o(u(t));try{var f=function(){var o=c.value;s.call(e,o)||o===n||i(e,o,{get:function(){return t[o]},enumerable:!(r=a(t,o))||r.enumerable})};for(l.s();!(c=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(i({},"__esModule",{value:!0}),r));var l=function(e,t){try{return new URL(e,t)}catch(n){return}}},88044:function(e,t,n){"use strict";var r,o=n(50883).default,i=Object.defineProperty,a=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,c={};function l(e){return void 0!==e}function f(e){return null!==e}function d(e){return null!==e&&void 0!==e}!function(e,t){for(var n in t)i(e,n,{get:t[n],enumerable:!0})}(c,{STRUCTURED_CLONE_OBJECT_PROTOTYPE:function(){return g},isDefined:function(){return l},isNativeStructuredClone:function(){return v},isNonNull:function(){return f},isNonNullish:function(){return d},structuredClone:function(){return h}}),e.exports=(r=c,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var c,l=o(u(t));try{var f=function(){var o=c.value;s.call(e,o)||o===n||i(e,o,{get:function(){return t[o]},enumerable:!(r=a(t,o))||r.enumerable})};for(l.s();!(c=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(i({},"__esModule",{value:!0}),r));var p="undefined"!==typeof globalThis&&globalThis.structuredClone?[globalThis.structuredClone,!0]:"undefined"!==typeof n.g&&n.g.structuredClone?[n.g.structuredClone,!0]:"undefined"!==typeof window&&window.structuredClone?[window.structuredClone,!0]:[function(e){return e?JSON.parse(JSON.stringify(e)):e},!1],h=p[0],v=p[1],g=Object.getPrototypeOf(h({}))},38661:function(e,t,n){"use strict";var r,o=n(85715).default,i=n(41132).default,a=n(50883).default,u=Object.defineProperty,s=Object.getOwnPropertyDescriptor,c=Object.getOwnPropertyNames,l=Object.prototype.hasOwnProperty,f={};!function(e,t){for(var n in t)u(e,n,{get:t[n],enumerable:!0})}(f,{clearRegisteredVersionsForTests:function(){return h},registerTldrawLibraryVersion:function(){return v}}),e.exports=(r=f,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,i=a(c(t));try{var f=function(){var i=o.value;l.call(e,i)||i===n||u(e,i,{get:function(){return t[i]},enumerable:!(r=s(t,i))||r.enumerable})};for(i.s();!(o=i.n()).done;)f()}catch(d){i.e(d)}finally{i.f()}}return e}(u({},"__esModule",{value:!0}),r));var d="__TLDRAW_LIBRARY_VERSIONS__";function p(){if(globalThis[d])return globalThis[d];var e={versions:[],didWarn:!1,scheduledNotice:null};return Object.defineProperty(globalThis,d,{value:e,writable:!1,configurable:!1,enumerable:!1}),e}function h(){var e=p();e.versions=[],e.didWarn=!1,e.scheduledNotice&&(clearTimeout(e.scheduledNotice),e.scheduledNotice=null)}function v(e,t,n){if(!e||!t||!n)throw new Error("Missing name/version/module system in built version of tldraw library");var r=p();if(r.versions.push({name:e,version:t,modules:n}),!r.scheduledNotice)try{r.scheduledNotice=setTimeout((function(){r.scheduledNotice=null,g(r)}),100)}catch(o){g(r)}}function g(e){if(e.versions.length&&!e.didWarn){var t,n=e.versions.sort((function(e,t){return y(e.version,t.version)})),r=n[n.length-1].version,u=new Set,s=new Map,c=a(n);try{for(c.s();!(t=c.n()).done;){var l=t.value;s.has(l.name)?(u.delete(l.name),w(s,l.name,new Set).add(l.version)):l.version===r?u.add(l.name):(u.delete(l.name),w(s,l.name,new Set).add(l.version))}}catch(_){c.e(_)}finally{c.f()}if(s.size>0){var f=["".concat(b("[tldraw]",["bold","bgRed","textWhite"])," ").concat(b("You have multiple versions of tldraw libraries installed. This can lead to bugs and unexpected behavior.",["textRed","bold"])),"","The latest version you have installed is ".concat(b("v".concat(r),["bold","textBlue"]),". The following libraries are on the latest version:")].concat(i(Array.from(u,(function(e){return"  \u2022 \u2705 ".concat(b(e,["bold"]))}))),["","The following libraries are not on the latest version, or have multiple versions installed:"],i(Array.from(s,(function(e){var t=o(e,2),n=t[0],i=t[1],a=Array.from(i).sort(y).map((function(e){return b("v".concat(e),e===r?["textGreen"]:["textRed"])}));return"  \u2022 \u274c ".concat(b(n,["bold"])," (").concat(a.join(", "),")")}))));return console.log(f.join("\n")),void(e.didWarn=!0)}var d,p=new Map,h=a(n);try{for(h.s();!(d=h.n()).done;){var v=d.value;w(p,v.name,{version:v.version,modules:[]}).modules.push(v.modules)}}catch(_){h.e(_)}finally{h.f()}var g,m=new Map,S=a(p);try{for(S.s();!(g=S.n()).done;){var x=o(g.value,2),P=x[0],O=x[1];O.modules.length>1&&m.set(P,O)}}catch(_){S.e(_)}finally{S.f()}if(m.size>0){var k=["".concat(b("[tldraw]",["bold","bgRed","textWhite"])," ").concat(b("You have multiple instances of some tldraw libraries active. This can lead to bugs and unexpected behavior. ",["textRed","bold"])),"","This usually means that your bundler is misconfigured, and is importing the same library multiple times - usually once as an ES Module, and once as a CommonJS module.","","The following libraries have been imported multiple times:"].concat(i(Array.from(m,(function(e){var t=o(e,2),n=t[0],r=t[1],i=r.modules.map((function(e,t){return"      ".concat(t+1,"esm"===e?". ES Modules":". CommonJS")})).join("\n");return"  \u2022 \u274c ".concat(b(n,["bold"])," v").concat(r.version,": \n").concat(i)}))),["","You should configure your bundler to only import one version of each library."]);return console.log(k.join("\n")),void(e.didWarn=!0)}}}function y(e,t){var n=e.match(/^(\d+)\.(\d+)\.(\d+)(?:-(\w+))?$/),r=t.match(/^(\d+)\.(\d+)\.(\d+)(?:-(\w+))?$/);return n&&r?n[1]!==r[1]?Number(n[1])-Number(r[1]):n[2]!==r[2]?Number(n[2])-Number(r[2]):n[3]!==r[3]?Number(n[3])-Number(r[3]):n[4]&&r[4]?n[4].localeCompare(r[4]):n[4]?1:r[4]?-1:0:e.localeCompare(t)}var m={bold:"1",textBlue:"94",textRed:"31",textGreen:"32",bgRed:"41",textWhite:"97"};function b(e){return"\x1b[".concat((arguments.length>1&&void 0!==arguments[1]?arguments[1]:[]).map((function(e){return m[e]})).join(";"),"m").concat(e,"\x1b[m")}function w(e,t,n){return e.has(t)?e.get(t):(e.set(t,n),n)}},48705:function(e,t,n){"use strict";var r,o=n(50883).default,i=Object.defineProperty,a=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,c={};!function(e,t){for(var n in t)i(e,n,{get:t[n],enumerable:!0})}(c,{warnDeprecatedGetter:function(){return f},warnOnce:function(){return d}}),e.exports=(r=c,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var c,l=o(u(t));try{var f=function(){var o=c.value;s.call(e,o)||o===n||i(e,o,{get:function(){return t[o]},enumerable:!(r=a(t,o))||r.enumerable})};for(l.s();!(c=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(i({},"__esModule",{value:!0}),r));var l=new Set;function f(e){d("Using '".concat(e,"' is deprecated and will be removed in the near future. Please refactor to use 'get").concat(e[0].toLocaleUpperCase()).concat(e.slice(1),"' instead."))}function d(e){l.has(e)||(l.add(e),console.warn("[tldraw] ".concat(e)))}},98556:function(e,t,n){"use strict";var r,o=n(50883).default,i=Object.create,a=Object.defineProperty,u=Object.getOwnPropertyDescriptor,s=Object.getOwnPropertyNames,c=Object.getPrototypeOf,l=Object.prototype.hasOwnProperty,f=function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var i,c=o(s(t));try{var f=function(){var o=i.value;l.call(e,o)||o===n||a(e,o,{get:function(){return t[o]},enumerable:!(r=u(t,o))||r.enumerable})};for(c.s();!(i=c.n()).done;)f()}catch(d){c.e(d)}finally{c.f()}}return e},d={};!function(e,t){for(var n in t)a(e,n,{get:t[n],enumerable:!0})}(d,{ArrayOfValidator:function(){return v.ArrayOfValidator},DictValidator:function(){return v.DictValidator},ObjectValidator:function(){return v.ObjectValidator},T:function(){return h},UnionValidator:function(){return v.UnionValidator},Validator:function(){return v.Validator}}),e.exports=(r=d,f(a({},"__esModule",{value:!0}),r));var p=n(30645),h=function(e,t,n){return n=null!=e?i(c(e)):{},f(!t&&e&&e.__esModule?n:a(n,"default",{value:e,enumerable:!0}),e)}(n(6757)),v=n(6757);(0,p.registerTldrawLibraryVersion)("@tldraw/validate","3.7.2","cjs")},6757:function(e,t,n){"use strict";var r,o=n(12897).default,i=n(85715).default,a=n(41132).default,u=n(34579).default,s=n(17383).default,c=n(18336).default,l=n(29511).default,f=n(61837).default,d=n(43693).default,p=n(50883).default,h=Object.defineProperty,v=Object.getOwnPropertyDescriptor,g=Object.getOwnPropertyNames,y=Object.prototype.hasOwnProperty,m={};!function(e,t){for(var n in t)h(e,n,{get:t[n],enumerable:!0})}(m,{ArrayOfValidator:function(){return O},DictValidator:function(){return j},ObjectValidator:function(){return k},UnionValidator:function(){return _},ValidationError:function(){return w},Validator:function(){return P},any:function(){return E},array:function(){return V},arrayOf:function(){return z},bigint:function(){return F},boolean:function(){return U},dict:function(){return X},httpUrl:function(){return se},indexKey:function(){return ce},integer:function(){return R},jsonDict:function(){return Y},jsonValue:function(){return W},linkUrl:function(){return ie},literal:function(){return B},literalEnum:function(){return ne},model:function(){return Q},nonZeroInteger:function(){return L},nonZeroNumber:function(){return D},nullable:function(){return te},number:function(){return M},numberUnion:function(){return $},object:function(){return K},optional:function(){return ee},or:function(){return le},positiveInteger:function(){return N},positiveNumber:function(){return A},setEnum:function(){return J},srcUrl:function(){return ue},string:function(){return C},union:function(){return Z},unknown:function(){return T},unknownObject:function(){return H}}),e.exports=(r=m,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,i=p(g(t));try{var a=function(){var i=o.value;y.call(e,i)||i===n||h(e,i,{get:function(){return t[i]},enumerable:!(r=v(t,i))||r.enumerable})};for(i.s();!(o=i.n()).done;)a()}catch(u){i.e(u)}finally{i.f()}}return e}(h({},"__esModule",{value:!0}),r));var b=n(30645);var w=function(e){function t(e){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];s(this,t);var o=function(e){if(!e.length)return null;var t,n="",r=p(e);try{for(r.s();!(t=r.n()).done;){var o=t.value;"number"===typeof o?n+=".".concat(o):o.startsWith("(")?n.endsWith(")")?n="".concat(n.slice(0,-1),", ").concat(o.slice(1)):n+=o:n+=".".concat(o)}}catch(i){r.e(i)}finally{r.f()}return(n=n.replace(/id = [^,]+, /,"").replace(/id = [^)]+/,"")).startsWith(".")?n.slice(1):n}(r),i=e.split("\n").map((function(e,t){return 0===t?e:"  ".concat(e)})).join("\n");return n=c(this,t,[r?"At ".concat(o,": ").concat(i):i]),d(n,"name","ValidationError"),n.rawMessage=e,n.path=r,n}return l(t,e),u(t)}(f(Error));function S(e,t){try{return t()}catch(n){if(n instanceof w)throw new w(n.rawMessage,[e].concat(a(n.path)));throw new w(n.toString(),[e])}}function x(e){if(null===e)return"null";if(Array.isArray(e))return"an array";var t=typeof e;switch(t){case"bigint":case"boolean":case"function":case"number":case"string":case"symbol":return"a ".concat(t);case"object":return"an ".concat(t);case"undefined":return"undefined";default:(0,b.exhaustiveSwitchError)(t)}}var P=function(){function e(t,n){s(this,e),this.validationFn=t,this.validateUsingKnownGoodVersionFn=n}return u(e,[{key:"validate",value:function(e){return this.validationFn(e)}},{key:"validateUsingKnownGoodVersion",value:function(e,t){return Object.is(e,t)?e:this.validateUsingKnownGoodVersionFn?this.validateUsingKnownGoodVersionFn(e,t):this.validate(t)}},{key:"isValid",value:function(e){try{return this.validate(e),!0}catch(t){return!1}}},{key:"nullable",value:function(){return te(this)}},{key:"optional",value:function(){return ee(this)}},{key:"refine",value:function(t){var n=this;return new e((function(e){return t(n.validate(e))}),(function(e,r){var o=n.validateUsingKnownGoodVersion(e,r);return Object.is(e,o)?e:t(o)}))}},{key:"check",value:function(e,t){return"string"===typeof e?this.refine((function(n){return S("(check ".concat(e,")"),(function(){return t(n)})),n})):this.refine((function(t){return e(t),t}))}}])}(),O=function(e){function t(e){var n;return s(this,t),(n=c(this,t,[function(t){for(var n=V.validate(t),r=function(t){S(t,(function(){return e.validate(n[t])}))},o=0;o<n.length;o++)r(o);return n},function(t,r){if(!e.validateUsingKnownGoodVersion)return n.validate(r);for(var o=V.validate(r),i=t.length!==o.length,a=function(n){var r=o[n];if(n>=t.length)return i=!0,S(n,(function(){return e.validate(r)})),0;if(Object.is(t[n],r))return 0;var a=S(n,(function(){return e.validateUsingKnownGoodVersion(t[n],r)}));Object.is(a,t[n])||(i=!0)},u=0;u<o.length;u++)a(u);return i?r:t}])).itemValidator=e,n}return l(t,e),u(t,[{key:"nonEmpty",value:function(){return this.check((function(e){if(0===e.length)throw new w("Expected a non-empty array")}))}},{key:"lengthGreaterThan1",value:function(){return this.check((function(e){if(e.length<=1)throw new w("Expected an array with length greater than 1")}))}}])}(P),k=function(e){function t(e){var n,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return s(this,t),(n=c(this,t,[function(t){if("object"!==typeof t||null===t)throw new w("Expected object, got ".concat(x(t)));for(var n=function(){var e=i(a[o],2),n=e[0],r=e[1];S(n,(function(){r.validate((0,b.getOwnProperty)(t,n))}))},o=0,a=Object.entries(e);o<a.length;o++)n();if(!r)for(var u=0,s=Object.keys(t);u<s.length;u++){var c=s[u];if(!(0,b.hasOwnProperty)(e,c))throw new w("Unexpected property",[c])}return t},function(t,n){if("object"!==typeof n||null===n)throw new w("Expected object, got ".concat(x(n)));for(var o=!1,a=function(){var e=i(s[u],2),r=e[0],a=e[1],c=(0,b.getOwnProperty)(t,r),l=(0,b.getOwnProperty)(n,r);if(Object.is(c,l))return 1;var f=S(r,(function(){var e=a;return e.validateUsingKnownGoodVersion?e.validateUsingKnownGoodVersion(c,l):e.validate(l)}));Object.is(f,c)||(o=!0)},u=0,s=Object.entries(e);u<s.length;u++)a();if(!r)for(var c=0,l=Object.keys(n);c<l.length;c++){var f=l[c];if(!(0,b.hasOwnProperty)(e,f))throw new w("Unexpected property",[f])}for(var d=0,p=Object.keys(t);d<p.length;d++){var h=p[d];if(!(0,b.hasOwnProperty)(n,h)){o=!0;break}}return o?n:t}])).config=e,n.shouldAllowUnknownProperties=r,n}return l(t,e),u(t,[{key:"allowUnknownProperties",value:function(){return new t(this.config,!0)}},{key:"extend",value:function(e){return new t(o(o({},this.config),e))}}])}(P),_=function(e){function t(e,n,r,o){var i;return s(this,t),(i=c(this,t,[function(t){i.expectObject(t);var n=i.getMatchingSchemaAndVariant(t),r=n.matchingSchema,o=n.variant;return void 0===r?i.unknownValueValidation(t,o):S("(".concat(e," = ").concat(o,")"),(function(){return r.validate(t)}))},function(t,n){i.expectObject(n),i.expectObject(t);var r=i.getMatchingSchemaAndVariant(n),o=r.matchingSchema,a=r.variant;return void 0===o?i.unknownValueValidation(n,a):(0,b.getOwnProperty)(t,e)!==(0,b.getOwnProperty)(n,e)?S("(".concat(e," = ").concat(a,")"),(function(){return o.validate(n)})):S("(".concat(e," = ").concat(a,")"),(function(){return o.validateUsingKnownGoodVersion?o.validateUsingKnownGoodVersion(t,n):o.validate(n)}))}])).key=e,i.config=n,i.unknownValueValidation=r,i.useNumberKeys=o,i}return l(t,e),u(t,[{key:"expectObject",value:function(e){if("object"!==typeof e||null===e)throw new w("Expected an object, got ".concat(x(e)),[])}},{key:"getMatchingSchemaAndVariant",value:function(e){var t=(0,b.getOwnProperty)(e,this.key);if(!this.useNumberKeys&&"string"!==typeof t)throw new w('Expected a string for key "'.concat(this.key,'", got ').concat(x(t)));if(this.useNumberKeys&&!Number.isFinite(Number(t)))throw new w('Expected a number for key "'.concat(this.key,'", got "').concat(t,'"'));return{matchingSchema:(0,b.hasOwnProperty)(this.config,t)?this.config[t]:void 0,variant:t}}},{key:"validateUnknownVariants",value:function(e){return new t(this.key,this.config,e,this.useNumberKeys)}}])}(P),j=function(e){function t(e,n){var r;return s(this,t),(r=c(this,t,[function(t){if("object"!==typeof t||null===t)throw new w("Expected object, got ".concat(x(t)));for(var r=function(){var t=i(a[o],2),r=t[0],u=t[1];S(r,(function(){e.validate(r),n.validate(u)}))},o=0,a=Object.entries(t);o<a.length;o++)r();return t},function(t,r){if("object"!==typeof r||null===r)throw new w("Expected object, got ".concat(x(r)));for(var o=!1,a=function(){var r=i(s[u],2),a=r[0],c=r[1];if(!(0,b.hasOwnProperty)(t,a))return o=!0,S(a,(function(){e.validate(a),n.validate(c)})),0;var l=(0,b.getOwnProperty)(t,a),f=c;if(Object.is(l,f))return 0;var d=S(a,(function(){return n.validateUsingKnownGoodVersion?n.validateUsingKnownGoodVersion(l,f):n.validate(f)}));Object.is(d,l)||(o=!0)},u=0,s=Object.entries(r);u<s.length;u++)a();for(var c=0,l=Object.keys(t);c<l.length;c++){var f=l[c];if(!(0,b.hasOwnProperty)(r,f)){o=!0;break}}return o?r:t}])).keyValidator=e,r.valueValidator=n,r}return l(t,e),u(t)}(P);function I(e){return new P((function(t){if(typeof t!==e)throw new w("Expected ".concat(e,", got ").concat(x(t)));return t}))}var T=new P((function(e){return e})),E=new P((function(e){return e})),C=I("string"),M=I("number").check((function(e){if(Number.isNaN(e))throw new w("Expected a number, got NaN");if(!Number.isFinite(e))throw new w("Expected a finite number, got ".concat(e))})),A=M.check((function(e){if(e<0)throw new w("Expected a positive number, got ".concat(e))})),D=M.check((function(e){if(e<=0)throw new w("Expected a non-zero positive number, got ".concat(e))})),R=M.check((function(e){if(!Number.isInteger(e))throw new w("Expected an integer, got ".concat(e))})),N=R.check((function(e){if(e<0)throw new w("Expected a positive integer, got ".concat(e))})),L=R.check((function(e){if(e<=0)throw new w("Expected a non-zero positive integer, got ".concat(e))})),U=I("boolean"),F=I("bigint");function B(e){return new P((function(t){if(t!==e)throw new w("Expected ".concat(e,", got ").concat(JSON.stringify(t)));return e}))}var V=new P((function(e){if(!Array.isArray(e))throw new w("Expected an array, got ".concat(x(e)));return e}));function z(e){return new O(e)}var H=new P((function(e){if("object"!==typeof e||null===e)throw new w("Expected object, got ".concat(x(e)));return e}));function K(e){return new k(e)}function G(e){return"object"===typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e)||Object.getPrototypeOf(e)===b.STRUCTURED_CLONE_OBJECT_PROTOTYPE)}function q(e){return null===e||"number"===typeof e||"string"===typeof e||"boolean"===typeof e||(Array.isArray(e)?e.every(q):!!G(e)&&Object.values(e).every(q))}var W=new P((function(e){if(q(e))return e;throw new w("Expected json serializable value, got ".concat(typeof e))}),(function(e,t){if(Array.isArray(e)&&Array.isArray(t)){for(var n=e.length!==t.length,r=0;r<t.length;r++)if(r>=e.length)n=!0,W.validate(t[r]);else{var o=e[r],i=t[r];if(!Object.is(o,i)){var a=W.validateUsingKnownGoodVersion(o,i);Object.is(a,o)||(n=!0)}}return n?t:e}if(G(e)&&G(t)){for(var u=!1,s=0,c=Object.keys(t);s<c.length;s++){var l=c[s];if((0,b.hasOwnProperty)(e,l)){var f=e[l],d=t[l];if(!Object.is(f,d)){var p=W.validateUsingKnownGoodVersion(f,d);Object.is(p,f)||(u=!0)}}else u=!0,W.validate(t[l])}for(var h=0,v=Object.keys(e);h<v.length;h++){var g=v[h];if(!(0,b.hasOwnProperty)(t,g)){u=!0;break}}return u?t:e}return W.validate(t)}));function Y(){return X(C,W)}function X(e,t){return new j(e,t)}function Z(e,t){return new _(e,t,(function(n,r){throw new w("Expected one of ".concat(Object.keys(t).map((function(e){return JSON.stringify(e)})).join(" or "),", got ").concat(JSON.stringify(r)),[e])}),!1)}function $(e,t){return new _(e,t,(function(n,r){throw new w("Expected one of ".concat(Object.keys(t).map((function(e){return JSON.stringify(e)})).join(" or "),", got ").concat(JSON.stringify(r)),[e])}),!0)}function Q(e,t){return new P((function(n){return S(e,(function(){return t.validate(n)}))}),(function(n,r){return S(e,(function(){return t.validateUsingKnownGoodVersion?t.validateUsingKnownGoodVersion(n,r):t.validate(r)}))}))}function J(e){return new P((function(t){if(!e.has(t)){var n=Array.from(e,(function(e){return JSON.stringify(e)})).join(" or ");throw new w("Expected ".concat(n,", got ").concat(t))}return t}))}function ee(e){return new P((function(t){if(void 0!==t)return e.validate(t)}),(function(t,n){if((void 0!==t||void 0!==n)&&void 0!==n)return e.validateUsingKnownGoodVersion&&void 0!==t?e.validateUsingKnownGoodVersion(t,n):e.validate(n)}))}function te(e){return new P((function(t){return null===t?null:e.validate(t)}),(function(t,n){return null===n?null:e.validateUsingKnownGoodVersion&&null!==t?e.validateUsingKnownGoodVersion(t,n):e.validate(n)}))}function ne(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return J(new Set(t))}function re(e){try{return new URL(e)}catch(t){if(e.startsWith("/")||e.startsWith("./"))try{return new URL(e,"http://example.com")}catch(n){throw new w("Expected a valid url, got ".concat(JSON.stringify(e)))}throw new w("Expected a valid url, got ".concat(JSON.stringify(e)))}}var oe=new Set(["http:","https:","mailto:"]),ie=C.check((function(e){if(""!==e){var t=re(e);if(!oe.has(t.protocol.toLowerCase()))throw new w("Expected a valid url, got ".concat(JSON.stringify(e)," (invalid protocol)"))}})),ae=new Set(["http:","https:","data:","asset:"]),ue=C.check((function(e){if(""!==e){var t=re(e);if(!ae.has(t.protocol.toLowerCase()))throw new w("Expected a valid url, got ".concat(JSON.stringify(e)," (invalid protocol)"))}})),se=C.check((function(e){if(""!==e&&!re(e).protocol.toLowerCase().match(/^https?:$/))throw new w("Expected a valid url, got ".concat(JSON.stringify(e)," (invalid protocol)"))})),ce=C.refine((function(e){try{return(0,b.validateIndexKey)(e),e}catch(t){throw new w("Expected an index key, got ".concat(JSON.stringify(e)))}}));function le(e,t){return new P((function(n){try{return e.validate(n)}catch(r){return t.validate(n)}}))}},39377:function(e,t,n){"use strict";n.d(t,{$s:function(){return r.E},OH:function(){return r.r},PF:function(){return r.e},U2:function(){return r.m},dQ:function(){return r.C},id:function(){return r.s},ky:function(){return r.w},lc:function(){return r.f},xv:function(){return r.h}});var r=n(50502)},50502:function(e,t,n){"use strict";n.d(t,{C:function(){return ae},E:function(){return ie},S:function(){return G},_:function(){return v},a:function(){return p},b:function(){return j},c:function(){return D},d:function(){return b},e:function(){return se},f:function(){return fe},h:function(){return ce},i:function(){return P},m:function(){return le},p:function(){return S},r:function(){return ue},s:function(){return de},t:function(){return x},w:function(){return pe}});var r=n(60436),o=n(39874),i=n(5182),a=n(85501),u=n(64467),s=n(23029),c=n(92901),l=n(5544),f=n(37505);function d(e){var t=function(e,t){if("object"!==typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===typeof t?t:String(t)}function p(e,t,n){return(t=d(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach((function(t){p(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var g={pointer:{start:"down",change:"move",end:"up"},mouse:{start:"down",change:"move",end:"up"},touch:{start:"start",change:"move",end:"end"},gesture:{start:"start",change:"change",end:"end"}};function y(e){return e?e[0].toUpperCase()+e.slice(1):""}var m=["enter","leave"];function b(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=g[e],o=r&&r[t]||t;return"on"+y(e)+y(o)+(function(){var e=arguments.length>1?arguments[1]:void 0;return arguments.length>0&&void 0!==arguments[0]&&arguments[0]&&!m.includes(e)}(n,o)?"Capture":"")}var w=["gotpointercapture","lostpointercapture"];function S(e){var t=e.substring(2).toLowerCase(),n=!!~t.indexOf("passive");n&&(t=t.replace("passive",""));var r=w.includes(t)?"capturecapture":"capture",o=!!~t.indexOf(r);return o&&(t=t.replace("capture","")),{device:t,capture:o,passive:n}}function x(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=g[e];return e+(n&&n[t]||t)}function P(e){return"touches"in e}function O(e){return P(e)?"touch":"pointerType"in e?e.pointerType:"mouse"}function k(e){return P(e)?function(e){return"touchend"===e.type||"touchcancel"===e.type?e.changedTouches:e.targetTouches}(e)[0]:e}function _(e,t){try{var n=t.clientX-e.clientX,r=t.clientY-e.clientY,o=(t.clientX+e.clientX)/2,i=(t.clientY+e.clientY)/2,a=Math.hypot(n,r);return{angle:-180*Math.atan2(n,r)/Math.PI,distance:a,origin:[o,i]}}catch(u){}return null}function j(e){return function(e){return Array.from(e.touches).filter((function(t){var n,r;return t.target===e.currentTarget||(null===(n=e.currentTarget)||void 0===n||null===(r=n.contains)||void 0===r?void 0:r.call(n,t.target))}))}(e).map((function(e){return e.identifier}))}function I(e,t){var n=Array.from(e.touches).filter((function(e){return t.includes(e.identifier)})),r=(0,l.default)(n,2);return _(r[0],r[1])}function T(e){var t=k(e);return P(e)?t.identifier:t.pointerId}function E(e){var t=k(e);return[t.clientX,t.clientY]}function C(e){var t=e.deltaX,n=e.deltaY,r=e.deltaMode;return 1===r?(t*=40,n*=40):2===r&&(t*=800,n*=800),[t,n]}function M(e){if("function"===typeof e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return e.apply(void 0,n)}return e}function A(){}function D(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return 0===t.length?A:1===t.length?t[0]:function(){for(var e,n=0,r=t;n<r.length;n++){e=r[n].apply(this,arguments)||e}return e}}function R(e,t){return Object.assign({},t,e||{})}var N=function(){return(0,c.default)((function e(t,n,r){(0,s.default)(this,e),this.ctrl=t,this.args=n,this.key=r,this.state||(this.state={},this.computeValues([0,0]),this.computeInitial(),this.init&&this.init(),this.reset())}),[{key:"state",get:function(){return this.ctrl.state[this.key]},set:function(e){this.ctrl.state[this.key]=e}},{key:"shared",get:function(){return this.ctrl.state.shared}},{key:"eventStore",get:function(){return this.ctrl.gestureEventStores[this.key]}},{key:"timeoutStore",get:function(){return this.ctrl.gestureTimeoutStores[this.key]}},{key:"config",get:function(){return this.ctrl.config[this.key]}},{key:"sharedConfig",get:function(){return this.ctrl.config.shared}},{key:"handler",get:function(){return this.ctrl.handlers[this.key]}},{key:"reset",value:function(){var e=this.state,t=this.shared,n=this.ingKey,r=this.args;t[n]=e._active=e.active=e._blocked=e._force=!1,e._step=[!1,!1],e.intentional=!1,e._movement=[0,0],e._distance=[0,0],e._direction=[0,0],e._delta=[0,0],e._bounds=[[-1/0,1/0],[-1/0,1/0]],e.args=r,e.axis=void 0,e.memo=void 0,e.elapsedTime=e.timeDelta=0,e.direction=[0,0],e.distance=[0,0],e.overflow=[0,0],e._movementBound=[!1,!1],e.velocity=[0,0],e.movement=[0,0],e.delta=[0,0],e.timeStamp=0}},{key:"start",value:function(e){var t=this.state,n=this.config;t._active||(this.reset(),this.computeInitial(),t._active=!0,t.target=e.target,t.currentTarget=e.currentTarget,t.lastOffset=n.from?M(n.from,t):t.offset,t.offset=t.lastOffset,t.startTime=t.timeStamp=e.timeStamp)}},{key:"computeValues",value:function(e){var t=this.state;t._values=e,t.values=this.config.transform(e)}},{key:"computeInitial",value:function(){var e=this.state;e._initial=e._values,e.initial=e.values}},{key:"compute",value:function(e){var t=this.state,n=this.config,r=this.shared;t.args=this.args;var o=0;if(e&&(t.event=e,n.preventDefault&&e.cancelable&&t.event.preventDefault(),t.type=e.type,r.touches=this.ctrl.pointerIds.size||this.ctrl.touchIds.size,r.locked=!!document.pointerLockElement,Object.assign(r,function(e){var t={};if("buttons"in e&&(t.buttons=e.buttons),"shiftKey"in e){var n=e.shiftKey,r=e.altKey,o=e.metaKey,i=e.ctrlKey;Object.assign(t,{shiftKey:n,altKey:r,metaKey:o,ctrlKey:i})}return t}(e)),r.down=r.pressed=r.buttons%2===1||r.touches>0,o=e.timeStamp-t.timeStamp,t.timeStamp=e.timeStamp,t.elapsedTime=t.timeStamp-t.startTime),t._active){var i=t._delta.map(Math.abs);f.V.addTo(t._distance,i)}this.axisIntent&&this.axisIntent(e);var a=(0,l.default)(t._movement,2),u=a[0],s=a[1],c=(0,l.default)(n.threshold,2),d=c[0],p=c[1],h=t._step,v=t.values;if(n.hasCustomTransform?(!1===h[0]&&(h[0]=Math.abs(u)>=d&&v[0]),!1===h[1]&&(h[1]=Math.abs(s)>=p&&v[1])):(!1===h[0]&&(h[0]=Math.abs(u)>=d&&Math.sign(u)*d),!1===h[1]&&(h[1]=Math.abs(s)>=p&&Math.sign(s)*p)),t.intentional=!1!==h[0]||!1!==h[1],t.intentional){var g=[0,0];if(n.hasCustomTransform){var y=(0,l.default)(v,2),m=y[0],b=y[1];g[0]=!1!==h[0]?m-h[0]:0,g[1]=!1!==h[1]?b-h[1]:0}else g[0]=!1!==h[0]?u-h[0]:0,g[1]=!1!==h[1]?s-h[1]:0;this.restrictToAxis&&!t._blocked&&this.restrictToAxis(g);var w=t.offset,S=t._active&&!t._blocked||t.active;S&&(t.first=t._active&&!t.active,t.last=!t._active&&t.active,t.active=r[this.ingKey]=t._active,e&&(t.first&&("bounds"in n&&(t._bounds=M(n.bounds,t)),this.setup&&this.setup()),t.movement=g,this.computeOffset()));var x=(0,l.default)(t.offset,2),P=x[0],O=x[1],k=(0,l.default)(t._bounds,2),_=(0,l.default)(k[0],2),j=_[0],I=_[1],T=(0,l.default)(k[1],2),E=T[0],C=T[1];t.overflow=[P<j?-1:P>I?1:0,O<E?-1:O>C?1:0],t._movementBound[0]=!!t.overflow[0]&&(!1===t._movementBound[0]?t._movement[0]:t._movementBound[0]),t._movementBound[1]=!!t.overflow[1]&&(!1===t._movementBound[1]?t._movement[1]:t._movementBound[1]);var A=t._active&&n.rubberband||[0,0];if(t.offset=(0,f.c)(t._bounds,t.offset,A),t.delta=f.V.sub(t.offset,w),this.computeMovement(),S&&(!t.last||o>32)){t.delta=f.V.sub(t.offset,w);var D=t.delta.map(Math.abs);f.V.addTo(t.distance,D),t.direction=t.delta.map(Math.sign),t._direction=t._delta.map(Math.sign),!t.first&&o>0&&(t.velocity=[D[0]/o,D[1]/o],t.timeDelta=o)}}}},{key:"emit",value:function(){var e=this.state,t=this.shared,n=this.config;if(e._active||this.clean(),!e._blocked&&e.intentional||e._force||n.triggerAllEvents){var r=this.handler(v(v(v({},t),e),{},(0,u.default)({},this.aliasKey,e.values)));void 0!==r&&(e.memo=r)}}},{key:"clean",value:function(){this.eventStore.clean(),this.timeoutStore.clean()}}])}();var L=function(e){function t(){var e;(0,s.default)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return p(e=(0,o.default)(this,t,[].concat(r)),"aliasKey","xy"),e}return(0,a.default)(t,e),(0,c.default)(t,[{key:"reset",value:function(){(0,i.A)(t,"reset",this,3)([]),this.state.axis=void 0}},{key:"init",value:function(){this.state.offset=[0,0],this.state.lastOffset=[0,0]}},{key:"computeOffset",value:function(){this.state.offset=f.V.add(this.state.lastOffset,this.state.movement)}},{key:"computeMovement",value:function(){this.state.movement=f.V.sub(this.state.offset,this.state.lastOffset)}},{key:"axisIntent",value:function(e){var t=this.state,n=this.config;if(!t.axis&&e){var r="object"===typeof n.axisThreshold?n.axisThreshold[O(e)]:n.axisThreshold;t.axis=function(e,t){var n=(0,l.default)(e,2),r=n[0],o=n[1],i=Math.abs(r),a=Math.abs(o);return i>a&&i>t?"x":a>i&&a>t?"y":void 0}(t._movement,r)}t._blocked=(n.lockDirection||!!n.axis)&&!t.axis||!!n.axis&&n.axis!==t.axis}},{key:"restrictToAxis",value:function(e){if(this.config.axis||this.config.lockDirection)switch(this.state.axis){case"x":e[1]=0;break;case"y":e[0]=0}}}])}(N),U=function(e){return e},F={enabled:function(){return!(arguments.length>0&&void 0!==arguments[0])||arguments[0]},eventOptions:function(e,t,n){return v(v({},n.shared.eventOptions),e)},preventDefault:function(){return arguments.length>0&&void 0!==arguments[0]&&arguments[0]},triggerAllEvents:function(){return arguments.length>0&&void 0!==arguments[0]&&arguments[0]},rubberband:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;switch(e){case!0:return[.15,.15];case!1:return[0,0];default:return f.V.toVector(e)}},from:function(e){return"function"===typeof e?e:null!=e?f.V.toVector(e):void 0},transform:function(e,t,n){var r=e||n.shared.transform;return this.hasCustomTransform=!!r,r||U},threshold:function(e){return f.V.toVector(e,0)}};var B=v(v({},F),{},{axis:function(e,t,n){var r=n.axis;if(this.lockDirection="lock"===r,!this.lockDirection)return r},axisThreshold:function(){return arguments.length>0&&void 0!==arguments[0]?arguments[0]:0},bounds:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if("function"===typeof e)return function(t){return B.bounds(e(t))};if("current"in e)return function(){return e.current};if("function"===typeof HTMLElement&&e instanceof HTMLElement)return e;var t=e.left,n=void 0===t?-1/0:t,r=e.right,o=void 0===r?1/0:r,i=e.top,a=void 0===i?-1/0:i,u=e.bottom;return[[n,o],[a,void 0===u?1/0:u]]}}),V={ArrowRight:function(e){return[e*(arguments.length>1&&void 0!==arguments[1]?arguments[1]:1),0]},ArrowLeft:function(e){return[-1*e*(arguments.length>1&&void 0!==arguments[1]?arguments[1]:1),0]},ArrowUp:function(e){return[0,-1*e*(arguments.length>1&&void 0!==arguments[1]?arguments[1]:1)]},ArrowDown:function(e){return[0,e*(arguments.length>1&&void 0!==arguments[1]?arguments[1]:1)]}},z=function(e){function t(){var e;(0,s.default)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return p(e=(0,o.default)(this,t,[].concat(r)),"ingKey","dragging"),e}return(0,a.default)(t,e),(0,c.default)(t,[{key:"reset",value:function(){(0,i.A)(t,"reset",this,3)([]);var e=this.state;e._pointerId=void 0,e._pointerActive=!1,e._keyboardActive=!1,e._preventScroll=!1,e._delayed=!1,e.swipe=[0,0],e.tap=!1,e.canceled=!1,e.cancel=this.cancel.bind(this)}},{key:"setup",value:function(){var e=this.state;if(e._bounds instanceof HTMLElement){var t=e._bounds.getBoundingClientRect(),n=e.currentTarget.getBoundingClientRect(),r={left:t.left-n.left+e.offset[0],right:t.right-n.right+e.offset[0],top:t.top-n.top+e.offset[1],bottom:t.bottom-n.bottom+e.offset[1]};e._bounds=B.bounds(r)}}},{key:"cancel",value:function(){var e=this,t=this.state;t.canceled||(t.canceled=!0,t._active=!1,setTimeout((function(){e.compute(),e.emit()}),0))}},{key:"setActive",value:function(){this.state._active=this.state._pointerActive||this.state._keyboardActive}},{key:"clean",value:function(){this.pointerClean(),this.state._pointerActive=!1,this.state._keyboardActive=!1,(0,i.A)(t,"clean",this,3)([])}},{key:"pointerDown",value:function(e){var t=this.config,n=this.state;if(null==e.buttons||(Array.isArray(t.pointerButtons)?t.pointerButtons.includes(e.buttons):-1===t.pointerButtons||t.pointerButtons===e.buttons)){var r=this.ctrl.setEventIds(e);t.pointerCapture&&e.target.setPointerCapture(e.pointerId),r&&r.size>1&&n._pointerActive||(this.start(e),this.setupPointer(e),n._pointerId=T(e),n._pointerActive=!0,this.computeValues(E(e)),this.computeInitial(),t.preventScrollAxis&&"mouse"!==O(e)?(n._active=!1,this.setupScrollPrevention(e)):t.delay>0?(this.setupDelayTrigger(e),t.triggerAllEvents&&(this.compute(e),this.emit())):this.startPointerDrag(e))}}},{key:"startPointerDrag",value:function(e){var t=this.state;t._active=!0,t._preventScroll=!0,t._delayed=!1,this.compute(e),this.emit()}},{key:"pointerMove",value:function(e){var t=this.state,n=this.config;if(t._pointerActive){var r=T(e);if(void 0===t._pointerId||r===t._pointerId){var o=E(e);return document.pointerLockElement===e.target?t._delta=[e.movementX,e.movementY]:(t._delta=f.V.sub(o,t._values),this.computeValues(o)),f.V.addTo(t._movement,t._delta),this.compute(e),t._delayed&&t.intentional?(this.timeoutStore.remove("dragDelay"),t.active=!1,void this.startPointerDrag(e)):n.preventScrollAxis&&!t._preventScroll?t.axis?t.axis===n.preventScrollAxis||"xy"===n.preventScrollAxis?(t._active=!1,void this.clean()):(this.timeoutStore.remove("startPointerDrag"),void this.startPointerDrag(e)):void 0:void this.emit()}}}},{key:"pointerUp",value:function(e){this.ctrl.setEventIds(e);try{this.config.pointerCapture&&e.target.hasPointerCapture(e.pointerId)&&e.target.releasePointerCapture(e.pointerId)}catch(P){0}var t=this.state,n=this.config;if(t._active&&t._pointerActive){var r=T(e);if(void 0===t._pointerId||r===t._pointerId){this.state._pointerActive=!1,this.setActive(),this.compute(e);var o=(0,l.default)(t._distance,2),i=o[0],a=o[1];if(t.tap=i<=n.tapsThreshold&&a<=n.tapsThreshold,t.tap&&n.filterTaps)t._force=!0;else{var u=(0,l.default)(t._delta,2),s=u[0],c=u[1],f=(0,l.default)(t._movement,2),d=f[0],p=f[1],h=(0,l.default)(n.swipe.velocity,2),v=h[0],g=h[1],y=(0,l.default)(n.swipe.distance,2),m=y[0],b=y[1],w=n.swipe.duration;if(t.elapsedTime<w){var S=Math.abs(s/t.timeDelta),x=Math.abs(c/t.timeDelta);S>v&&Math.abs(d)>m&&(t.swipe[0]=Math.sign(s)),x>g&&Math.abs(p)>b&&(t.swipe[1]=Math.sign(c))}}this.emit()}}}},{key:"pointerClick",value:function(e){!this.state.tap&&e.detail>0&&(e.preventDefault(),e.stopPropagation())}},{key:"setupPointer",value:function(e){var t=this.config,n=t.device;t.pointerLock&&e.currentTarget.requestPointerLock(),t.pointerCapture||(this.eventStore.add(this.sharedConfig.window,n,"change",this.pointerMove.bind(this)),this.eventStore.add(this.sharedConfig.window,n,"end",this.pointerUp.bind(this)),this.eventStore.add(this.sharedConfig.window,n,"cancel",this.pointerUp.bind(this)))}},{key:"pointerClean",value:function(){this.config.pointerLock&&document.pointerLockElement===this.state.currentTarget&&document.exitPointerLock()}},{key:"preventScroll",value:function(e){this.state._preventScroll&&e.cancelable&&e.preventDefault()}},{key:"setupScrollPrevention",value:function(e){this.state._preventScroll=!1,function(e){"persist"in e&&"function"===typeof e.persist&&e.persist()}(e);var t=this.eventStore.add(this.sharedConfig.window,"touch","change",this.preventScroll.bind(this),{passive:!1});this.eventStore.add(this.sharedConfig.window,"touch","end",t),this.eventStore.add(this.sharedConfig.window,"touch","cancel",t),this.timeoutStore.add("startPointerDrag",this.startPointerDrag.bind(this),this.config.preventScrollDelay,e)}},{key:"setupDelayTrigger",value:function(e){var t=this;this.state._delayed=!0,this.timeoutStore.add("dragDelay",(function(){t.state._step=[0,0],t.startPointerDrag(e)}),this.config.delay)}},{key:"keyDown",value:function(e){var t=V[e.key];if(t){var n=this.state,r=e.shiftKey?10:e.altKey?.1:1;this.start(e),n._delta=t(this.config.keyboardDisplacement,r),n._keyboardActive=!0,f.V.addTo(n._movement,n._delta),this.compute(e),this.emit()}}},{key:"keyUp",value:function(e){e.key in V&&(this.state._keyboardActive=!1,this.setActive(),this.compute(e),this.emit())}},{key:"bind",value:function(e){var t=this.config.device;e(t,"start",this.pointerDown.bind(this)),this.config.pointerCapture&&(e(t,"change",this.pointerMove.bind(this)),e(t,"end",this.pointerUp.bind(this)),e(t,"cancel",this.pointerUp.bind(this)),e("lostPointerCapture","",this.pointerUp.bind(this))),this.config.keys&&(e("key","down",this.keyDown.bind(this)),e("key","up",this.keyUp.bind(this))),this.config.filterTaps&&e("click","",this.pointerClick.bind(this),{capture:!0,passive:!1})}}])}(L);var H="undefined"!==typeof window&&window.document&&window.document.createElement;function K(){return H&&"ontouchstart"in window}var G={isBrowser:H,gesture:function(){try{return"constructor"in GestureEvent}catch(e){return!1}}(),touch:K(),touchscreen:K()||H&&window.navigator.maxTouchPoints>1,pointer:H&&"onpointerdown"in window,pointerLock:H&&"exitPointerLock"in window.document},q={mouse:0,touch:0,pen:8},W=v(v({},B),{},{device:function(e,t,n){var r=n.pointer,o=void 0===r?{}:r,i=o.touch,a=void 0!==i&&i,u=o.lock,s=void 0!==u&&u,c=o.mouse,l=void 0!==c&&c;return this.pointerLock=s&&G.pointerLock,G.touch&&a?"touch":this.pointerLock?"mouse":G.pointer&&!l?"pointer":G.touch?"touch":"mouse"},preventScrollAxis:function(e,t,n){var r=n.preventScroll;if(this.preventScrollDelay="number"===typeof r?r:r||void 0===r&&e?250:void 0,G.touchscreen&&!1!==r)return e||(void 0!==r?"y":void 0)},pointerCapture:function(e,t,n){var r=n.pointer,o=void 0===r?{}:r,i=o.capture,a=void 0===i||i,u=o.buttons,s=void 0===u?1:u,c=o.keys,l=void 0===c||c;return this.pointerButtons=s,this.keys=l,!this.pointerLock&&"pointer"===this.device&&a},threshold:function(e,t,n){var r=n.filterTaps,o=void 0!==r&&r,i=n.tapsThreshold,a=void 0===i?3:i,u=n.axis,s=void 0===u?void 0:u,c=f.V.toVector(e,o?a:s?1:0);return this.filterTaps=o,this.tapsThreshold=a,c},swipe:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.velocity,n=void 0===t?.5:t,r=e.distance,o=void 0===r?50:r,i=e.duration,a=void 0===i?250:i;return{velocity:this.transform(f.V.toVector(n)),distance:this.transform(f.V.toVector(o)),duration:a}},delay:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;switch(e){case!0:return 180;case!1:return 0;default:return e}},axisThreshold:function(e){return e?v(v({},q),e):q},keyboardDisplacement:function(){return arguments.length>0&&void 0!==arguments[0]?arguments[0]:10}});function Y(e){var t=(0,l.default)(e.overflow,2),n=t[0],r=t[1],o=(0,l.default)(e._delta,2),i=o[0],a=o[1],u=(0,l.default)(e._direction,2),s=u[0],c=u[1];(n<0&&i>0&&s<0||n>0&&i<0&&s>0)&&(e._movement[0]=e._movementBound[0]),(r<0&&a>0&&c<0||r>0&&a<0&&c>0)&&(e._movement[1]=e._movementBound[1])}var X=function(e){function t(){var e;(0,s.default)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return p(e=(0,o.default)(this,t,[].concat(r)),"ingKey","pinching"),p(e,"aliasKey","da"),e}return(0,a.default)(t,e),(0,c.default)(t,[{key:"init",value:function(){this.state.offset=[1,0],this.state.lastOffset=[1,0],this.state._pointerEvents=new Map}},{key:"reset",value:function(){(0,i.A)(t,"reset",this,3)([]);var e=this.state;e._touchIds=[],e.canceled=!1,e.cancel=this.cancel.bind(this),e.turns=0}},{key:"computeOffset",value:function(){var e=this.state,t=e.type,n=e.movement,r=e.lastOffset;this.state.offset="wheel"===t?f.V.add(n,r):[(1+n[0])*r[0],n[1]+r[1]]}},{key:"computeMovement",value:function(){var e=this.state,t=e.offset,n=e.lastOffset;this.state.movement=[t[0]/n[0],t[1]-n[1]]}},{key:"axisIntent",value:function(){var e=this.state,t=(0,l.default)(e._movement,2),n=t[0],r=t[1];if(!e.axis){var o=30*Math.abs(n)-Math.abs(r);o<0?e.axis="angle":o>0&&(e.axis="scale")}}},{key:"restrictToAxis",value:function(e){this.config.lockDirection&&("scale"===this.state.axis?e[1]=0:"angle"===this.state.axis&&(e[0]=0))}},{key:"cancel",value:function(){var e=this,t=this.state;t.canceled||setTimeout((function(){t.canceled=!0,t._active=!1,e.compute(),e.emit()}),0)}},{key:"touchStart",value:function(e){this.ctrl.setEventIds(e);var t=this.state,n=this.ctrl.touchIds;if((!t._active||!t._touchIds.every((function(e){return n.has(e)})))&&!(n.size<2)){this.start(e),t._touchIds=Array.from(n).slice(0,2);var r=I(e,t._touchIds);r&&this.pinchStart(e,r)}}},{key:"pointerStart",value:function(e){if(null==e.buttons||e.buttons%2===1){this.ctrl.setEventIds(e),e.target.setPointerCapture(e.pointerId);var t=this.state,n=t._pointerEvents,o=this.ctrl.pointerIds;if((!t._active||!Array.from(n.keys()).every((function(e){return o.has(e)})))&&(n.size<2&&n.set(e.pointerId,e),!(t._pointerEvents.size<2))){this.start(e);var i=_.apply(void 0,(0,r.default)(Array.from(n.values())));i&&this.pinchStart(e,i)}}}},{key:"pinchStart",value:function(e,t){this.state.origin=t.origin,this.computeValues([t.distance,t.angle]),this.computeInitial(),this.compute(e),this.emit()}},{key:"touchMove",value:function(e){if(this.state._active){var t=I(e,this.state._touchIds);t&&this.pinchMove(e,t)}}},{key:"pointerMove",value:function(e){var t=this.state._pointerEvents;if(t.has(e.pointerId)&&t.set(e.pointerId,e),this.state._active){var n=_.apply(void 0,(0,r.default)(Array.from(t.values())));n&&this.pinchMove(e,n)}}},{key:"pinchMove",value:function(e,t){var n=this.state,r=n._values[1],o=t.angle-r,i=0;Math.abs(o)>270&&(i+=Math.sign(o)),this.computeValues([t.distance,t.angle-360*i]),n.origin=t.origin,n.turns=i,n._movement=[n._values[0]/n._initial[0]-1,n._values[1]-n._initial[1]],this.compute(e),this.emit()}},{key:"touchEnd",value:function(e){var t=this;this.ctrl.setEventIds(e),this.state._active&&this.state._touchIds.some((function(e){return!t.ctrl.touchIds.has(e)}))&&(this.state._active=!1,this.compute(e),this.emit())}},{key:"pointerEnd",value:function(e){var t=this.state;this.ctrl.setEventIds(e);try{e.target.releasePointerCapture(e.pointerId)}catch(n){}t._pointerEvents.has(e.pointerId)&&t._pointerEvents.delete(e.pointerId),t._active&&t._pointerEvents.size<2&&(t._active=!1,this.compute(e),this.emit())}},{key:"gestureStart",value:function(e){e.cancelable&&e.preventDefault();var t=this.state;t._active||(this.start(e),this.computeValues([e.scale,e.rotation]),t.origin=[e.clientX,e.clientY],this.compute(e),this.emit())}},{key:"gestureMove",value:function(e){if(e.cancelable&&e.preventDefault(),this.state._active){var t=this.state;this.computeValues([e.scale,e.rotation]),t.origin=[e.clientX,e.clientY];var n=t._movement;t._movement=[e.scale-1,e.rotation],t._delta=f.V.sub(t._movement,n),this.compute(e),this.emit()}}},{key:"gestureEnd",value:function(e){this.state._active&&(this.state._active=!1,this.compute(e),this.emit())}},{key:"wheel",value:function(e){var t=this.config.modifierKey;t&&!(Array.isArray(t)?t.find((function(t){return e[t]})):e[t])||(this.state._active?this.wheelChange(e):this.wheelStart(e),this.timeoutStore.add("wheelEnd",this.wheelEnd.bind(this)))}},{key:"wheelStart",value:function(e){this.start(e),this.wheelChange(e)}},{key:"wheelChange",value:function(e){"uv"in e||e.cancelable&&e.preventDefault();var t=this.state;t._delta=[-C(e)[1]/100*t.offset[0],0],f.V.addTo(t._movement,t._delta),Y(t),this.state.origin=[e.clientX,e.clientY],this.compute(e),this.emit()}},{key:"wheelEnd",value:function(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}},{key:"bind",value:function(e){var t=this.config.device;t&&(e(t,"start",this[t+"Start"].bind(this)),e(t,"change",this[t+"Move"].bind(this)),e(t,"end",this[t+"End"].bind(this)),e(t,"cancel",this[t+"End"].bind(this)),e("lostPointerCapture","",this[t+"End"].bind(this))),this.config.pinchOnWheel&&e("wheel","",this.wheel.bind(this),{passive:!1})}}])}(N),Z=v(v({},F),{},{device:function(e,t,n){var r=n.shared,o=n.pointer,i=(void 0===o?{}:o).touch,a=void 0!==i&&i;if(r.target&&!G.touch&&G.gesture)return"gesture";if(G.touch&&a)return"touch";if(G.touchscreen){if(G.pointer)return"pointer";if(G.touch)return"touch"}},bounds:function(e,t,n){var r=n.scaleBounds,o=void 0===r?{}:r,i=n.angleBounds,a=void 0===i?{}:i,u=function(e){var t=R(M(o,e),{min:-1/0,max:1/0});return[t.min,t.max]},s=function(e){var t=R(M(a,e),{min:-1/0,max:1/0});return[t.min,t.max]};return"function"!==typeof o&&"function"!==typeof a?[u(),s()]:function(e){return[u(e),s(e)]}},threshold:function(e,t,n){this.lockDirection="lock"===n.axis;var r=f.V.toVector(e,this.lockDirection?[.1,3]:0);return r},modifierKey:function(e){return void 0===e?"ctrlKey":e},pinchOnWheel:function(){return!(arguments.length>0&&void 0!==arguments[0])||arguments[0]}}),$=function(e){function t(){var e;(0,s.default)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return p(e=(0,o.default)(this,t,[].concat(r)),"ingKey","moving"),e}return(0,a.default)(t,e),(0,c.default)(t,[{key:"move",value:function(e){this.config.mouseOnly&&"mouse"!==e.pointerType||(this.state._active?this.moveChange(e):this.moveStart(e),this.timeoutStore.add("moveEnd",this.moveEnd.bind(this)))}},{key:"moveStart",value:function(e){this.start(e),this.computeValues(E(e)),this.compute(e),this.computeInitial(),this.emit()}},{key:"moveChange",value:function(e){if(this.state._active){var t=E(e),n=this.state;n._delta=f.V.sub(t,n._values),f.V.addTo(n._movement,n._delta),this.computeValues(t),this.compute(e),this.emit()}}},{key:"moveEnd",value:function(e){this.state._active&&(this.state._active=!1,this.compute(e),this.emit())}},{key:"bind",value:function(e){e("pointer","change",this.move.bind(this)),e("pointer","leave",this.moveEnd.bind(this))}}])}(L),Q=v(v({},B),{},{mouseOnly:function(){return!(arguments.length>0&&void 0!==arguments[0])||arguments[0]}}),J=function(e){function t(){var e;(0,s.default)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return p(e=(0,o.default)(this,t,[].concat(r)),"ingKey","scrolling"),e}return(0,a.default)(t,e),(0,c.default)(t,[{key:"scroll",value:function(e){this.state._active||this.start(e),this.scrollChange(e),this.timeoutStore.add("scrollEnd",this.scrollEnd.bind(this))}},{key:"scrollChange",value:function(e){e.cancelable&&e.preventDefault();var t=this.state,n=function(e){var t,n,r=e.currentTarget,o=r.scrollX,i=r.scrollY,a=r.scrollLeft,u=r.scrollTop;return[null!==(t=null!==o&&void 0!==o?o:a)&&void 0!==t?t:0,null!==(n=null!==i&&void 0!==i?i:u)&&void 0!==n?n:0]}(e);t._delta=f.V.sub(n,t._values),f.V.addTo(t._movement,t._delta),this.computeValues(n),this.compute(e),this.emit()}},{key:"scrollEnd",value:function(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}},{key:"bind",value:function(e){e("scroll","",this.scroll.bind(this))}}])}(L),ee=B,te=function(e){function t(){var e;(0,s.default)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return p(e=(0,o.default)(this,t,[].concat(r)),"ingKey","wheeling"),e}return(0,a.default)(t,e),(0,c.default)(t,[{key:"wheel",value:function(e){this.state._active||this.start(e),this.wheelChange(e),this.timeoutStore.add("wheelEnd",this.wheelEnd.bind(this))}},{key:"wheelChange",value:function(e){var t=this.state;t._delta=C(e),f.V.addTo(t._movement,t._delta),Y(t),this.compute(e),this.emit()}},{key:"wheelEnd",value:function(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}},{key:"bind",value:function(e){e("wheel","",this.wheel.bind(this))}}])}(L),ne=B,re=function(e){function t(){var e;(0,s.default)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return p(e=(0,o.default)(this,t,[].concat(r)),"ingKey","hovering"),e}return(0,a.default)(t,e),(0,c.default)(t,[{key:"enter",value:function(e){this.config.mouseOnly&&"mouse"!==e.pointerType||(this.start(e),this.computeValues(E(e)),this.compute(e),this.emit())}},{key:"leave",value:function(e){if(!this.config.mouseOnly||"mouse"===e.pointerType){var t=this.state;if(t._active){t._active=!1;var n=E(e);t._movement=t._delta=f.V.sub(n,t._values),this.computeValues(n),this.compute(e),t.delta=t.movement,this.emit()}}}},{key:"bind",value:function(e){e("pointer","enter",this.enter.bind(this)),e("pointer","leave",this.leave.bind(this))}}])}(L),oe=v(v({},B),{},{mouseOnly:function(){return!(arguments.length>0&&void 0!==arguments[0])||arguments[0]}}),ie=new Map,ae=new Map;function ue(e){ie.set(e.key,e.engine),ae.set(e.key,e.resolver)}var se={key:"drag",engine:z,resolver:W},ce={key:"hover",engine:re,resolver:oe},le={key:"move",engine:$,resolver:Q},fe={key:"pinch",engine:X,resolver:Z},de={key:"scroll",engine:J,resolver:ee},pe={key:"wheel",engine:te,resolver:ne}},37505:function(e,t,n){"use strict";n.d(t,{V:function(){return o},c:function(){return u},r:function(){return a}});var r=n(5544);var o={toVector:function(e,t){return void 0===e&&(e=t),Array.isArray(e)?e:[e,e]},add:function(e,t){return[e[0]+t[0],e[1]+t[1]]},sub:function(e,t){return[e[0]-t[0],e[1]-t[1]]},addTo:function(e,t){e[0]+=t[0],e[1]+=t[1]},subTo:function(e,t){e[0]-=t[0],e[1]-=t[1]}};function i(e,t,n){return 0===t||Math.abs(t)===1/0?Math.pow(e,5*n):e*t*n/(t+n*e)}function a(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.15;return 0===r?function(e,t,n){return Math.max(t,Math.min(e,n))}(e,t,n):e<t?-i(t-e,n-t,r)+t:e>n?+i(e-n,n-t,r)+n:e}function u(e,t,n){var o=(0,r.default)(t,2),i=o[0],u=o[1],s=(0,r.default)(n,2),c=s[0],l=s[1],f=(0,r.default)(e,2),d=(0,r.default)(f[0],2),p=d[0],h=d[1],v=(0,r.default)(f[1],2),g=v[0],y=v[1];return[a(i,p,h,c),a(u,g,y,l)]}},53771:function(e,t,n){"use strict";n.d(t,{t:function(){return w},x:function(){return v}});var r=n(60436),o=n(24765),i=n(23029),a=n(92901),u=n(5544),s=n(50502);function c(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var l={target:function(e){if(e)return function(){return"current"in e?e.current:e}},enabled:function(){return!(arguments.length>0&&void 0!==arguments[0])||arguments[0]},window:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){return arguments.length>0&&void 0!==arguments[0]?arguments[0]:s.S.isBrowser?window:void 0})),eventOptions:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.passive,n=void 0===t||t,r=e.capture;return{passive:n,capture:void 0!==r&&r}},transform:function(e){return e}},f=["target","eventOptions","window","enabled","transform"];function d(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n={},r=0,o=Object.entries(t);r<o.length;r++){var i=(0,u.default)(o[r],2),a=i[0],s=i[1];switch(typeof s){case"function":n[a]=s.call(n,e[a],a,e);break;case"object":n[a]=d(e[a],s);break;case"boolean":s&&(n[a]=e[a])}}return n}var p=function(){return(0,a.default)((function e(t,n){(0,i.default)(this,e),(0,s.a)(this,"_listeners",new Set),this._ctrl=t,this._gestureKey=n}),[{key:"add",value:function(e,t,n,r,o){var i=this._listeners,a=(0,s.t)(t,n),u=this._gestureKey?this._ctrl.config[this._gestureKey].eventOptions:{},c=(0,s._)((0,s._)({},u),o);e.addEventListener(a,r,c);var l=function(){e.removeEventListener(a,r,c),i.delete(l)};return i.add(l),l}},{key:"clean",value:function(){this._listeners.forEach((function(e){return e()})),this._listeners.clear()}}])}(),h=function(){return(0,a.default)((function e(){(0,i.default)(this,e),(0,s.a)(this,"_timeouts",new Map)}),[{key:"add",value:function(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:140;this.remove(e);for(var o=arguments.length,i=new Array(o>3?o-3:0),a=3;a<o;a++)i[a-3]=arguments[a];this._timeouts.set(e,(n=window).setTimeout.apply(n,[t,r].concat(i)))}},{key:"remove",value:function(e){var t=this._timeouts.get(e);t&&window.clearTimeout(t)}},{key:"clean",value:function(){this._timeouts.forEach((function(e){window.clearTimeout(e)})),this._timeouts.clear()}}])}(),v=function(){return(0,a.default)((function e(t){(0,i.default)(this,e),(0,s.a)(this,"gestures",new Set),(0,s.a)(this,"_targetEventStore",new p(this)),(0,s.a)(this,"gestureEventStores",{}),(0,s.a)(this,"gestureTimeoutStores",{}),(0,s.a)(this,"handlers",{}),(0,s.a)(this,"config",{}),(0,s.a)(this,"pointerIds",new Set),(0,s.a)(this,"touchIds",new Set),(0,s.a)(this,"state",{shared:{shiftKey:!1,metaKey:!1,ctrlKey:!1,altKey:!1}}),function(e,t){t.drag&&g(e,"drag");t.wheel&&g(e,"wheel");t.scroll&&g(e,"scroll");t.move&&g(e,"move");t.pinch&&g(e,"pinch");t.hover&&g(e,"hover")}(this,t)}),[{key:"setEventIds",value:function(e){return(0,s.i)(e)?(this.touchIds=new Set((0,s.b)(e)),this.touchIds):"pointerId"in e?("pointerup"===e.type||"pointercancel"===e.type?this.pointerIds.delete(e.pointerId):"pointerdown"===e.type&&this.pointerIds.add(e.pointerId),this.pointerIds):void 0}},{key:"applyHandlers",value:function(e,t){this.handlers=e,this.nativeHandlers=t}},{key:"applyConfig",value:function(e,t){this.config=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=e,o=r.target,i=r.eventOptions,a=r.window,u=r.enabled,p=r.transform,h=c(r,f);if(n.shared=d({target:o,eventOptions:i,window:a,enabled:u,transform:p},l),t){var v=s.C.get(t);n[t]=d((0,s._)({shared:n.shared},h),v)}else for(var g in h){var y=s.C.get(g);y&&(n[g]=d((0,s._)({shared:n.shared},h[g]),y))}return n}(e,t,this.config)}},{key:"clean",value:function(){this._targetEventStore.clean();var e,t=(0,o.default)(this.gestures);try{for(t.s();!(e=t.n()).done;){var n=e.value;this.gestureEventStores[n].clean(),this.gestureTimeoutStores[n].clean()}}catch(r){t.e(r)}finally{t.f()}}},{key:"effect",value:function(){var e=this;return this.config.shared.target&&this.bind(),function(){return e._targetEventStore.clean()}}},{key:"bind",value:function(){for(var e=this,t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];var a,u=this.config.shared,c={};if(!u.target||(a=u.target())){if(u.enabled){var l,f=(0,o.default)(this.gestures);try{for(f.s();!(l=f.n()).done;){var d=l.value,p=this.config[d],h=y(c,p.eventOptions,!!a);if(p.enabled)new(s.E.get(d))(this,n,d).bind(h)}}catch(k){f.e(k)}finally{f.f()}var v=y(c,u.eventOptions,!!a),g=function(t){v(t,"",(function(r){return e.nativeHandlers[t]((0,s._)((0,s._)({},e.state.shared),{},{event:r,args:n}))}),void 0,!0)};for(var m in this.nativeHandlers)g(m)}for(var b in c)c[b]=s.c.apply(void 0,(0,r.default)(c[b]));if(!a)return c;for(var w in c){var S=(0,s.p)(w),x=S.device,P=S.capture,O=S.passive;this._targetEventStore.add(a,x,"",c[w],{capture:P,passive:O})}}}}])}();function g(e,t){e.gestures.add(t),e.gestureEventStores[t]=new p(e,t),e.gestureTimeoutStores[t]=new h}var y=function(e,t,n){return function(r,o,i){var a,u,c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},l=arguments.length>4&&void 0!==arguments[4]&&arguments[4],f=null!==(a=c.capture)&&void 0!==a?a:t.capture,d=null!==(u=c.passive)&&void 0!==u?u:t.passive,p=l?r:(0,s.d)(r,o,f);n&&d&&(p+="Passive"),e[p]=e[p]||[],e[p].push(i)}},m=/^on(Drag|Wheel|Scroll|Move|Pinch|Hover)/;function b(e,t,n,r,o,i){if(e.has(n)&&s.E.has(r)){var a=n+"Start",u=n+"End";o[r]=function(e){var r=void 0;return e.first&&a in t&&t[a](e),n in t&&(r=t[n](e)),e.last&&u in t&&t[u](e),r},i[r]=i[r]||{}}}function w(e,t){var n=function(e){var t={},n={},r=new Set;for(var o in e)m.test(o)?(r.add(RegExp.lastMatch),n[o]=e[o]):t[o]=e[o];return[n,t,r]}(e),r=(0,u.default)(n,3),o=r[0],i=r[1],a=r[2],s={};return b(a,o,"onDrag","drag",s,t),b(a,o,"onWheel","wheel",s,t),b(a,o,"onScroll","scroll",s,t),b(a,o,"onPinch","pinch",s,t),b(a,o,"onMove","move",s,t),b(a,o,"onHover","hover",s,t),{handlers:s,config:t,nativeHandlers:i}}},38865:function(){},5137:function(e,t,n){"use strict";n.d(t,{B:function(){return r.r}});var r=n(37505)},23493:function(e,t,n){"use strict";n.r(t),n.d(t,{ConfigResolverMap:function(){return o.dQ},EngineMap:function(){return o.$s},createUseGesture:function(){return m},dragAction:function(){return o.PF},hoverAction:function(){return o.xv},moveAction:function(){return o.U2},pinchAction:function(){return o.lc},registerAction:function(){return o.OH},rubberbandIfOutOfBounds:function(){return u.B},scrollAction:function(){return o.id},useDrag:function(){return d},useGesture:function(){return b},useHover:function(){return y},useMove:function(){return g},usePinch:function(){return p},useScroll:function(){return v},useWheel:function(){return h},wheelAction:function(){return o.ky}});var r=n(50502),o=n(39377),i=n(9950),a=n(53771),u=n(5137),s=n(38865),c={};for(var l in s)["default","createUseGesture","useDrag","useGesture","useHover","useMove","usePinch","useScroll","useWheel","ConfigResolverMap","EngineMap","dragAction","hoverAction","moveAction","pinchAction","registerAction","scrollAction","wheelAction","rubberbandIfOutOfBounds"].indexOf(l)<0&&(c[l]=function(e){return s[e]}.bind(0,l));function f(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,o=i.useMemo((function(){return new a.x(e)}),[]);if(o.applyHandlers(e,r),o.applyConfig(t,n),i.useEffect(o.effect.bind(o)),i.useEffect((function(){return o.clean.bind(o)}),[]),void 0===t.target)return o.bind.bind(o)}function d(e,t){return(0,r.r)(r.e),f({drag:e},t||{},"drag")}function p(e,t){return(0,r.r)(r.f),f({pinch:e},t||{},"pinch")}function h(e,t){return(0,r.r)(r.w),f({wheel:e},t||{},"wheel")}function v(e,t){return(0,r.r)(r.s),f({scroll:e},t||{},"scroll")}function g(e,t){return(0,r.r)(r.m),f({move:e},t||{},"move")}function y(e,t){return(0,r.r)(r.h),f({hover:e},t||{},"hover")}function m(e){return e.forEach(r.r),function(e,t){var n=(0,a.t)(e,t||{}),r=n.handlers,o=n.nativeHandlers;return f(r,n.config,void 0,o)}}function b(e,t){return m([r.e,r.f,r.s,r.w,r.m,r.h])(e,t||{})}n.d(t,c)},28159:function(e,t,n){"use strict";n.r(t),n.d(t,{hideOthers:function(){return l},inertOthers:function(){return f},supportsInert:function(){return d},suppressOthers:function(){return p}});var r=function(e){return"undefined"===typeof document?null:(Array.isArray(e)?e[0]:e).ownerDocument.body},o=new WeakMap,i=new WeakMap,a={},u=0,s=function(e){return e&&(e.host||s(e.parentNode))},c=function(e,t,n,r){var c=function(e,t){return t.map((function(t){if(e.contains(t))return t;var n=s(t);return n&&e.contains(n)?n:(console.error("aria-hidden",t,"in not contained inside",e,". Doing nothing"),null)})).filter((function(e){return Boolean(e)}))}(t,Array.isArray(e)?e:[e]);a[n]||(a[n]=new WeakMap);var l=a[n],f=[],d=new Set,p=new Set(c),h=function(e){e&&!d.has(e)&&(d.add(e),h(e.parentNode))};c.forEach(h);var v=function(e){e&&!p.has(e)&&Array.prototype.forEach.call(e.children,(function(e){if(d.has(e))v(e);else try{var t=e.getAttribute(r),a=null!==t&&"false"!==t,u=(o.get(e)||0)+1,s=(l.get(e)||0)+1;o.set(e,u),l.set(e,s),f.push(e),1===u&&a&&i.set(e,!0),1===s&&e.setAttribute(n,"true"),a||e.setAttribute(r,"true")}catch(c){console.error("aria-hidden: cannot operate on ",e,c)}}))};return v(t),d.clear(),u++,function(){f.forEach((function(e){var t=o.get(e)-1,a=l.get(e)-1;o.set(e,t),l.set(e,a),t||(i.has(e)||e.removeAttribute(r),i.delete(e)),a||e.removeAttribute(n)})),--u||(o=new WeakMap,o=new WeakMap,i=new WeakMap,a={})}},l=function(e,t,n){void 0===n&&(n="data-aria-hidden");var o=Array.from(Array.isArray(e)?e:[e]),i=t||r(e);return i?(o.push.apply(o,Array.from(i.querySelectorAll("[aria-live]"))),c(o,i,n,"aria-hidden")):function(){return null}},f=function(e,t,n){void 0===n&&(n="data-inert-ed");var o=t||r(e);return o?c(e,o,n,"inert"):function(){return null}},d=function(){return"undefined"!==typeof HTMLElement&&HTMLElement.prototype.hasOwnProperty("inert")},p=function(e,t,n){return void 0===n&&(n="data-suppressed"),(d()?f:l)(e,t,n)}},46676:function(e,t){"use strict";t.byteLength=function(e){var t=u(e),n=t[0],r=t[1];return 3*(n+r)/4-r},t.toByteArray=function(e){var t,n,i=u(e),a=i[0],s=i[1],c=new o(function(e,t,n){return 3*(t+n)/4-n}(0,a,s)),l=0,f=s>0?a-4:a;for(n=0;n<f;n+=4)t=r[e.charCodeAt(n)]<<18|r[e.charCodeAt(n+1)]<<12|r[e.charCodeAt(n+2)]<<6|r[e.charCodeAt(n+3)],c[l++]=t>>16&255,c[l++]=t>>8&255,c[l++]=255&t;2===s&&(t=r[e.charCodeAt(n)]<<2|r[e.charCodeAt(n+1)]>>4,c[l++]=255&t);1===s&&(t=r[e.charCodeAt(n)]<<10|r[e.charCodeAt(n+1)]<<4|r[e.charCodeAt(n+2)]>>2,c[l++]=t>>8&255,c[l++]=255&t);return c},t.fromByteArray=function(e){for(var t,r=e.length,o=r%3,i=[],a=16383,u=0,c=r-o;u<c;u+=a)i.push(s(e,u,u+a>c?c:u+a));1===o?(t=e[r-1],i.push(n[t>>2]+n[t<<4&63]+"==")):2===o&&(t=(e[r-2]<<8)+e[r-1],i.push(n[t>>10]+n[t>>4&63]+n[t<<2&63]+"="));return i.join("")};for(var n=[],r=[],o="undefined"!==typeof Uint8Array?Uint8Array:Array,i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0;a<64;++a)n[a]=i[a],r[i.charCodeAt(a)]=a;function u(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function s(e,t,r){for(var o,i,a=[],u=t;u<r;u+=3)o=(e[u]<<16&16711680)+(e[u+1]<<8&65280)+(255&e[u+2]),a.push(n[(i=o)>>18&63]+n[i>>12&63]+n[i>>6&63]+n[63&i]);return a.join("")}r["-".charCodeAt(0)]=62,r["_".charCodeAt(0)]=63},93325:function(e,t,n){"use strict";var r=n(17383).default,o=n(34579).default,i=n(18336).default,a=n(29511).default,u=n(46676),s=n(66897),c="function"===typeof Symbol&&"function"===typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;t.hp=d,t.IS=50;var l=2147483647;function f(e){if(e>l)throw new RangeError('The value "'+e+'" is invalid for option "size"');var t=new Uint8Array(e);return Object.setPrototypeOf(t,d.prototype),t}function d(e,t,n){if("number"===typeof e){if("string"===typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return v(e)}return p(e,t,n)}function p(e,t,n){if("string"===typeof e)return function(e,t){"string"===typeof t&&""!==t||(t="utf8");if(!d.isEncoding(t))throw new TypeError("Unknown encoding: "+t);var n=0|b(e,t),r=f(n),o=r.write(e,t);o!==n&&(r=r.slice(0,o));return r}(e,t);if(ArrayBuffer.isView(e))return function(e){if(J(e,Uint8Array)){var t=new Uint8Array(e);return y(t.buffer,t.byteOffset,t.byteLength)}return g(e)}(e);if(null==e)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(J(e,ArrayBuffer)||e&&J(e.buffer,ArrayBuffer))return y(e,t,n);if("undefined"!==typeof SharedArrayBuffer&&(J(e,SharedArrayBuffer)||e&&J(e.buffer,SharedArrayBuffer)))return y(e,t,n);if("number"===typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');var r=e.valueOf&&e.valueOf();if(null!=r&&r!==e)return d.from(r,t,n);var o=function(e){if(d.isBuffer(e)){var t=0|m(e.length),n=f(t);return 0===n.length||e.copy(n,0,0,t),n}if(void 0!==e.length)return"number"!==typeof e.length||ee(e.length)?f(0):g(e);if("Buffer"===e.type&&Array.isArray(e.data))return g(e.data)}(e);if(o)return o;if("undefined"!==typeof Symbol&&null!=Symbol.toPrimitive&&"function"===typeof e[Symbol.toPrimitive])return d.from(e[Symbol.toPrimitive]("string"),t,n);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function h(e){if("number"!==typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function v(e){return h(e),f(e<0?0:0|m(e))}function g(e){for(var t=e.length<0?0:0|m(e.length),n=f(t),r=0;r<t;r+=1)n[r]=255&e[r];return n}function y(e,t,n){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(n||0))throw new RangeError('"length" is outside of buffer bounds');var r;return r=void 0===t&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,t):new Uint8Array(e,t,n),Object.setPrototypeOf(r,d.prototype),r}function m(e){if(e>=l)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+l.toString(16)+" bytes");return 0|e}function b(e,t){if(d.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||J(e,ArrayBuffer))return e.byteLength;if("string"!==typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);var n=e.length,r=arguments.length>2&&!0===arguments[2];if(!r&&0===n)return 0;for(var o=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":return Z(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return $(e).length;default:if(o)return r?-1:Z(e).length;t=(""+t).toLowerCase(),o=!0}}function w(e,t,n){var r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return D(this,t,n);case"utf8":case"utf-8":return E(this,t,n);case"ascii":return M(this,t,n);case"latin1":case"binary":return A(this,t,n);case"base64":return T(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return R(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function S(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function x(e,t,n,r,o){if(0===e.length)return-1;if("string"===typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),ee(n=+n)&&(n=o?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(o)return-1;n=e.length-1}else if(n<0){if(!o)return-1;n=0}if("string"===typeof t&&(t=d.from(t,r)),d.isBuffer(t))return 0===t.length?-1:P(e,t,n,r,o);if("number"===typeof t)return t&=255,"function"===typeof Uint8Array.prototype.indexOf?o?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):P(e,[t],n,r,o);throw new TypeError("val must be string, number or Buffer")}function P(e,t,n,r,o){var i,a=1,u=e.length,s=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;a=2,u/=2,s/=2,n/=2}function c(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}if(o){var l=-1;for(i=n;i<u;i++)if(c(e,i)===c(t,-1===l?0:i-l)){if(-1===l&&(l=i),i-l+1===s)return l*a}else-1!==l&&(i-=i-l),l=-1}else for(n+s>u&&(n=u-s),i=n;i>=0;i--){for(var f=!0,d=0;d<s;d++)if(c(e,i+d)!==c(t,d)){f=!1;break}if(f)return i}return-1}function O(e,t,n,r){n=Number(n)||0;var o=e.length-n;r?(r=Number(r))>o&&(r=o):r=o;var i,a=t.length;for(r>a/2&&(r=a/2),i=0;i<r;++i){var u=parseInt(t.substr(2*i,2),16);if(ee(u))return i;e[n+i]=u}return i}function k(e,t,n,r){return Q(Z(t,e.length-n),e,n,r)}function _(e,t,n,r){return Q(function(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,r)}function j(e,t,n,r){return Q($(t),e,n,r)}function I(e,t,n,r){return Q(function(e,t){for(var n,r,o,i=[],a=0;a<e.length&&!((t-=2)<0);++a)r=(n=e.charCodeAt(a))>>8,o=n%256,i.push(o),i.push(r);return i}(t,e.length-n),e,n,r)}function T(e,t,n){return 0===t&&n===e.length?u.fromByteArray(e):u.fromByteArray(e.slice(t,n))}function E(e,t,n){n=Math.min(e.length,n);for(var r=[],o=t;o<n;){var i=e[o],a=null,u=i>239?4:i>223?3:i>191?2:1;if(o+u<=n){var s=void 0,c=void 0,l=void 0,f=void 0;switch(u){case 1:i<128&&(a=i);break;case 2:128===(192&(s=e[o+1]))&&(f=(31&i)<<6|63&s)>127&&(a=f);break;case 3:s=e[o+1],c=e[o+2],128===(192&s)&&128===(192&c)&&(f=(15&i)<<12|(63&s)<<6|63&c)>2047&&(f<55296||f>57343)&&(a=f);break;case 4:s=e[o+1],c=e[o+2],l=e[o+3],128===(192&s)&&128===(192&c)&&128===(192&l)&&(f=(15&i)<<18|(63&s)<<12|(63&c)<<6|63&l)>65535&&f<1114112&&(a=f)}}null===a?(a=65533,u=1):a>65535&&(a-=65536,r.push(a>>>10&1023|55296),a=56320|1023&a),r.push(a),o+=u}return function(e){var t=e.length;if(t<=C)return String.fromCharCode.apply(String,e);var n="",r=0;for(;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=C));return n}(r)}d.TYPED_ARRAY_SUPPORT=function(){try{var e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(n){return!1}}(),d.TYPED_ARRAY_SUPPORT||"undefined"===typeof console||"function"!==typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(d.prototype,"parent",{enumerable:!0,get:function(){if(d.isBuffer(this))return this.buffer}}),Object.defineProperty(d.prototype,"offset",{enumerable:!0,get:function(){if(d.isBuffer(this))return this.byteOffset}}),d.poolSize=8192,d.from=function(e,t,n){return p(e,t,n)},Object.setPrototypeOf(d.prototype,Uint8Array.prototype),Object.setPrototypeOf(d,Uint8Array),d.alloc=function(e,t,n){return function(e,t,n){return h(e),e<=0?f(e):void 0!==t?"string"===typeof n?f(e).fill(t,n):f(e).fill(t):f(e)}(e,t,n)},d.allocUnsafe=function(e){return v(e)},d.allocUnsafeSlow=function(e){return v(e)},d.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==d.prototype},d.compare=function(e,t){if(J(e,Uint8Array)&&(e=d.from(e,e.offset,e.byteLength)),J(t,Uint8Array)&&(t=d.from(t,t.offset,t.byteLength)),!d.isBuffer(e)||!d.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;for(var n=e.length,r=t.length,o=0,i=Math.min(n,r);o<i;++o)if(e[o]!==t[o]){n=e[o],r=t[o];break}return n<r?-1:r<n?1:0},d.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},d.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return d.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var r=d.allocUnsafe(t),o=0;for(n=0;n<e.length;++n){var i=e[n];if(J(i,Uint8Array))o+i.length>r.length?(d.isBuffer(i)||(i=d.from(i)),i.copy(r,o)):Uint8Array.prototype.set.call(r,i,o);else{if(!d.isBuffer(i))throw new TypeError('"list" argument must be an Array of Buffers');i.copy(r,o)}o+=i.length}return r},d.byteLength=b,d.prototype._isBuffer=!0,d.prototype.swap16=function(){var e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)S(this,t,t+1);return this},d.prototype.swap32=function(){var e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)S(this,t,t+3),S(this,t+1,t+2);return this},d.prototype.swap64=function(){var e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)S(this,t,t+7),S(this,t+1,t+6),S(this,t+2,t+5),S(this,t+3,t+4);return this},d.prototype.toString=function(){var e=this.length;return 0===e?"":0===arguments.length?E(this,0,e):w.apply(this,arguments)},d.prototype.toLocaleString=d.prototype.toString,d.prototype.equals=function(e){if(!d.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===d.compare(this,e)},d.prototype.inspect=function(){var e="",n=t.IS;return e=this.toString("hex",0,n).replace(/(.{2})/g,"$1 ").trim(),this.length>n&&(e+=" ... "),"<Buffer "+e+">"},c&&(d.prototype[c]=d.prototype.inspect),d.prototype.compare=function(e,t,n,r,o){if(J(e,Uint8Array)&&(e=d.from(e,e.offset,e.byteLength)),!d.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===o&&(o=this.length),t<0||n>e.length||r<0||o>this.length)throw new RangeError("out of range index");if(r>=o&&t>=n)return 0;if(r>=o)return-1;if(t>=n)return 1;if(this===e)return 0;for(var i=(o>>>=0)-(r>>>=0),a=(n>>>=0)-(t>>>=0),u=Math.min(i,a),s=this.slice(r,o),c=e.slice(t,n),l=0;l<u;++l)if(s[l]!==c[l]){i=s[l],a=c[l];break}return i<a?-1:a<i?1:0},d.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},d.prototype.indexOf=function(e,t,n){return x(this,e,t,n,!0)},d.prototype.lastIndexOf=function(e,t,n){return x(this,e,t,n,!1)},d.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"===typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(n)?(n>>>=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var o=this.length-t;if((void 0===n||n>o)&&(n=o),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var i=!1;;)switch(r){case"hex":return O(this,e,t,n);case"utf8":case"utf-8":return k(this,e,t,n);case"ascii":case"latin1":case"binary":return _(this,e,t,n);case"base64":return j(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return I(this,e,t,n);default:if(i)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),i=!0}},d.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var C=4096;function M(e,t,n){var r="";n=Math.min(e.length,n);for(var o=t;o<n;++o)r+=String.fromCharCode(127&e[o]);return r}function A(e,t,n){var r="";n=Math.min(e.length,n);for(var o=t;o<n;++o)r+=String.fromCharCode(e[o]);return r}function D(e,t,n){var r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);for(var o="",i=t;i<n;++i)o+=te[e[i]];return o}function R(e,t,n){for(var r=e.slice(t,n),o="",i=0;i<r.length-1;i+=2)o+=String.fromCharCode(r[i]+256*r[i+1]);return o}function N(e,t,n){if(e%1!==0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function L(e,t,n,r,o,i){if(!d.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>o||t<i)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function U(e,t,n,r,o){q(t,r,o,e,n,7);var i=Number(t&BigInt(4294967295));e[n++]=i,i>>=8,e[n++]=i,i>>=8,e[n++]=i,i>>=8,e[n++]=i;var a=Number(t>>BigInt(32)&BigInt(4294967295));return e[n++]=a,a>>=8,e[n++]=a,a>>=8,e[n++]=a,a>>=8,e[n++]=a,n}function F(e,t,n,r,o){q(t,r,o,e,n,7);var i=Number(t&BigInt(4294967295));e[n+7]=i,i>>=8,e[n+6]=i,i>>=8,e[n+5]=i,i>>=8,e[n+4]=i;var a=Number(t>>BigInt(32)&BigInt(4294967295));return e[n+3]=a,a>>=8,e[n+2]=a,a>>=8,e[n+1]=a,a>>=8,e[n]=a,n+8}function B(e,t,n,r,o,i){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function V(e,t,n,r,o){return t=+t,n>>>=0,o||B(e,0,n,4),s.write(e,t,n,r,23,4),n+4}function z(e,t,n,r,o){return t=+t,n>>>=0,o||B(e,0,n,8),s.write(e,t,n,r,52,8),n+8}d.prototype.slice=function(e,t){var n=this.length;(e=~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),(t=void 0===t?n:~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),t<e&&(t=e);var r=this.subarray(e,t);return Object.setPrototypeOf(r,d.prototype),r},d.prototype.readUintLE=d.prototype.readUIntLE=function(e,t,n){e>>>=0,t>>>=0,n||N(e,t,this.length);for(var r=this[e],o=1,i=0;++i<t&&(o*=256);)r+=this[e+i]*o;return r},d.prototype.readUintBE=d.prototype.readUIntBE=function(e,t,n){e>>>=0,t>>>=0,n||N(e,t,this.length);for(var r=this[e+--t],o=1;t>0&&(o*=256);)r+=this[e+--t]*o;return r},d.prototype.readUint8=d.prototype.readUInt8=function(e,t){return e>>>=0,t||N(e,1,this.length),this[e]},d.prototype.readUint16LE=d.prototype.readUInt16LE=function(e,t){return e>>>=0,t||N(e,2,this.length),this[e]|this[e+1]<<8},d.prototype.readUint16BE=d.prototype.readUInt16BE=function(e,t){return e>>>=0,t||N(e,2,this.length),this[e]<<8|this[e+1]},d.prototype.readUint32LE=d.prototype.readUInt32LE=function(e,t){return e>>>=0,t||N(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},d.prototype.readUint32BE=d.prototype.readUInt32BE=function(e,t){return e>>>=0,t||N(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},d.prototype.readBigUInt64LE=ne((function(e){W(e>>>=0,"offset");var t=this[e],n=this[e+7];void 0!==t&&void 0!==n||Y(e,this.length-8);var r=t+this[++e]*Math.pow(2,8)+this[++e]*Math.pow(2,16)+this[++e]*Math.pow(2,24),o=this[++e]+this[++e]*Math.pow(2,8)+this[++e]*Math.pow(2,16)+n*Math.pow(2,24);return BigInt(r)+(BigInt(o)<<BigInt(32))})),d.prototype.readBigUInt64BE=ne((function(e){W(e>>>=0,"offset");var t=this[e],n=this[e+7];void 0!==t&&void 0!==n||Y(e,this.length-8);var r=t*Math.pow(2,24)+this[++e]*Math.pow(2,16)+this[++e]*Math.pow(2,8)+this[++e],o=this[++e]*Math.pow(2,24)+this[++e]*Math.pow(2,16)+this[++e]*Math.pow(2,8)+n;return(BigInt(r)<<BigInt(32))+BigInt(o)})),d.prototype.readIntLE=function(e,t,n){e>>>=0,t>>>=0,n||N(e,t,this.length);for(var r=this[e],o=1,i=0;++i<t&&(o*=256);)r+=this[e+i]*o;return r>=(o*=128)&&(r-=Math.pow(2,8*t)),r},d.prototype.readIntBE=function(e,t,n){e>>>=0,t>>>=0,n||N(e,t,this.length);for(var r=t,o=1,i=this[e+--r];r>0&&(o*=256);)i+=this[e+--r]*o;return i>=(o*=128)&&(i-=Math.pow(2,8*t)),i},d.prototype.readInt8=function(e,t){return e>>>=0,t||N(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},d.prototype.readInt16LE=function(e,t){e>>>=0,t||N(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},d.prototype.readInt16BE=function(e,t){e>>>=0,t||N(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},d.prototype.readInt32LE=function(e,t){return e>>>=0,t||N(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},d.prototype.readInt32BE=function(e,t){return e>>>=0,t||N(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},d.prototype.readBigInt64LE=ne((function(e){W(e>>>=0,"offset");var t=this[e],n=this[e+7];void 0!==t&&void 0!==n||Y(e,this.length-8);var r=this[e+4]+this[e+5]*Math.pow(2,8)+this[e+6]*Math.pow(2,16)+(n<<24);return(BigInt(r)<<BigInt(32))+BigInt(t+this[++e]*Math.pow(2,8)+this[++e]*Math.pow(2,16)+this[++e]*Math.pow(2,24))})),d.prototype.readBigInt64BE=ne((function(e){W(e>>>=0,"offset");var t=this[e],n=this[e+7];void 0!==t&&void 0!==n||Y(e,this.length-8);var r=(t<<24)+this[++e]*Math.pow(2,16)+this[++e]*Math.pow(2,8)+this[++e];return(BigInt(r)<<BigInt(32))+BigInt(this[++e]*Math.pow(2,24)+this[++e]*Math.pow(2,16)+this[++e]*Math.pow(2,8)+n)})),d.prototype.readFloatLE=function(e,t){return e>>>=0,t||N(e,4,this.length),s.read(this,e,!0,23,4)},d.prototype.readFloatBE=function(e,t){return e>>>=0,t||N(e,4,this.length),s.read(this,e,!1,23,4)},d.prototype.readDoubleLE=function(e,t){return e>>>=0,t||N(e,8,this.length),s.read(this,e,!0,52,8)},d.prototype.readDoubleBE=function(e,t){return e>>>=0,t||N(e,8,this.length),s.read(this,e,!1,52,8)},d.prototype.writeUintLE=d.prototype.writeUIntLE=function(e,t,n,r){(e=+e,t>>>=0,n>>>=0,r)||L(this,e,t,n,Math.pow(2,8*n)-1,0);var o=1,i=0;for(this[t]=255&e;++i<n&&(o*=256);)this[t+i]=e/o&255;return t+n},d.prototype.writeUintBE=d.prototype.writeUIntBE=function(e,t,n,r){(e=+e,t>>>=0,n>>>=0,r)||L(this,e,t,n,Math.pow(2,8*n)-1,0);var o=n-1,i=1;for(this[t+o]=255&e;--o>=0&&(i*=256);)this[t+o]=e/i&255;return t+n},d.prototype.writeUint8=d.prototype.writeUInt8=function(e,t,n){return e=+e,t>>>=0,n||L(this,e,t,1,255,0),this[t]=255&e,t+1},d.prototype.writeUint16LE=d.prototype.writeUInt16LE=function(e,t,n){return e=+e,t>>>=0,n||L(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},d.prototype.writeUint16BE=d.prototype.writeUInt16BE=function(e,t,n){return e=+e,t>>>=0,n||L(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},d.prototype.writeUint32LE=d.prototype.writeUInt32LE=function(e,t,n){return e=+e,t>>>=0,n||L(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},d.prototype.writeUint32BE=d.prototype.writeUInt32BE=function(e,t,n){return e=+e,t>>>=0,n||L(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},d.prototype.writeBigUInt64LE=ne((function(e){return U(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,BigInt(0),BigInt("0xffffffffffffffff"))})),d.prototype.writeBigUInt64BE=ne((function(e){return F(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,BigInt(0),BigInt("0xffffffffffffffff"))})),d.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t>>>=0,!r){var o=Math.pow(2,8*n-1);L(this,e,t,n,o-1,-o)}var i=0,a=1,u=0;for(this[t]=255&e;++i<n&&(a*=256);)e<0&&0===u&&0!==this[t+i-1]&&(u=1),this[t+i]=(e/a|0)-u&255;return t+n},d.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t>>>=0,!r){var o=Math.pow(2,8*n-1);L(this,e,t,n,o-1,-o)}var i=n-1,a=1,u=0;for(this[t+i]=255&e;--i>=0&&(a*=256);)e<0&&0===u&&0!==this[t+i+1]&&(u=1),this[t+i]=(e/a|0)-u&255;return t+n},d.prototype.writeInt8=function(e,t,n){return e=+e,t>>>=0,n||L(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},d.prototype.writeInt16LE=function(e,t,n){return e=+e,t>>>=0,n||L(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},d.prototype.writeInt16BE=function(e,t,n){return e=+e,t>>>=0,n||L(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},d.prototype.writeInt32LE=function(e,t,n){return e=+e,t>>>=0,n||L(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},d.prototype.writeInt32BE=function(e,t,n){return e=+e,t>>>=0,n||L(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},d.prototype.writeBigInt64LE=ne((function(e){return U(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),d.prototype.writeBigInt64BE=ne((function(e){return F(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),d.prototype.writeFloatLE=function(e,t,n){return V(this,e,t,!0,n)},d.prototype.writeFloatBE=function(e,t,n){return V(this,e,t,!1,n)},d.prototype.writeDoubleLE=function(e,t,n){return z(this,e,t,!0,n)},d.prototype.writeDoubleBE=function(e,t,n){return z(this,e,t,!1,n)},d.prototype.copy=function(e,t,n,r){if(!d.isBuffer(e))throw new TypeError("argument should be a Buffer");if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var o=r-n;return this===e&&"function"===typeof Uint8Array.prototype.copyWithin?this.copyWithin(t,n,r):Uint8Array.prototype.set.call(e,this.subarray(n,r),t),o},d.prototype.fill=function(e,t,n,r){if("string"===typeof e){if("string"===typeof t?(r=t,t=0,n=this.length):"string"===typeof n&&(r=n,n=this.length),void 0!==r&&"string"!==typeof r)throw new TypeError("encoding must be a string");if("string"===typeof r&&!d.isEncoding(r))throw new TypeError("Unknown encoding: "+r);if(1===e.length){var o=e.charCodeAt(0);("utf8"===r&&o<128||"latin1"===r)&&(e=o)}}else"number"===typeof e?e&=255:"boolean"===typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;var i;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"===typeof e)for(i=t;i<n;++i)this[i]=e;else{var a=d.isBuffer(e)?e:d.from(e,r),u=a.length;if(0===u)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(i=0;i<n-t;++i)this[i+t]=a[i%u]}return this};var H={};function K(e,t,n){H[e]=function(n){function u(){var n;return r(this,u),n=i(this,u),Object.defineProperty(n,"message",{value:t.apply(n,arguments),writable:!0,configurable:!0}),n.name="".concat(n.name," [").concat(e,"]"),n.stack,delete n.name,n}return a(u,n),o(u,[{key:"code",get:function(){return e},set:function(e){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:e,writable:!0})}},{key:"toString",value:function(){return"".concat(this.name," [").concat(e,"]: ").concat(this.message)}}])}(n)}function G(e){for(var t="",n=e.length,r="-"===e[0]?1:0;n>=r+4;n-=3)t="_".concat(e.slice(n-3,n)).concat(t);return"".concat(e.slice(0,n)).concat(t)}function q(e,t,n,r,o,i){if(e>n||e<t){var a,u="bigint"===typeof t?"n":"";throw a=i>3?0===t||t===BigInt(0)?">= 0".concat(u," and < 2").concat(u," ** ").concat(8*(i+1)).concat(u):">= -(2".concat(u," ** ").concat(8*(i+1)-1).concat(u,") and < 2 ** ")+"".concat(8*(i+1)-1).concat(u):">= ".concat(t).concat(u," and <= ").concat(n).concat(u),new H.ERR_OUT_OF_RANGE("value",a,e)}!function(e,t,n){W(t,"offset"),void 0!==e[t]&&void 0!==e[t+n]||Y(t,e.length-(n+1))}(r,o,i)}function W(e,t){if("number"!==typeof e)throw new H.ERR_INVALID_ARG_TYPE(t,"number",e)}function Y(e,t,n){if(Math.floor(e)!==e)throw W(e,n),new H.ERR_OUT_OF_RANGE(n||"offset","an integer",e);if(t<0)throw new H.ERR_BUFFER_OUT_OF_BOUNDS;throw new H.ERR_OUT_OF_RANGE(n||"offset",">= ".concat(n?1:0," and <= ").concat(t),e)}K("ERR_BUFFER_OUT_OF_BOUNDS",(function(e){return e?"".concat(e," is outside of buffer bounds"):"Attempt to access memory outside buffer bounds"}),RangeError),K("ERR_INVALID_ARG_TYPE",(function(e,t){return'The "'.concat(e,'" argument must be of type number. Received type ').concat(typeof t)}),TypeError),K("ERR_OUT_OF_RANGE",(function(e,t,n){var r='The value of "'.concat(e,'" is out of range.'),o=n;return Number.isInteger(n)&&Math.abs(n)>Math.pow(2,32)?o=G(String(n)):"bigint"===typeof n&&(o=String(n),(n>Math.pow(BigInt(2),BigInt(32))||n<-Math.pow(BigInt(2),BigInt(32)))&&(o=G(o)),o+="n"),r+=" It must be ".concat(t,". Received ").concat(o)}),RangeError);var X=/[^+/0-9A-Za-z-_]/g;function Z(e,t){var n;t=t||1/0;for(var r=e.length,o=null,i=[],a=0;a<r;++a){if((n=e.charCodeAt(a))>55295&&n<57344){if(!o){if(n>56319){(t-=3)>-1&&i.push(239,191,189);continue}if(a+1===r){(t-=3)>-1&&i.push(239,191,189);continue}o=n;continue}if(n<56320){(t-=3)>-1&&i.push(239,191,189),o=n;continue}n=65536+(o-55296<<10|n-56320)}else o&&(t-=3)>-1&&i.push(239,191,189);if(o=null,n<128){if((t-=1)<0)break;i.push(n)}else if(n<2048){if((t-=2)<0)break;i.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;i.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;i.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return i}function $(e){return u.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(X,"")).length<2)return"";for(;e.length%4!==0;)e+="=";return e}(e))}function Q(e,t,n,r){var o;for(o=0;o<r&&!(o+n>=t.length||o>=e.length);++o)t[o+n]=e[o];return o}function J(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function ee(e){return e!==e}var te=function(){for(var e="0123456789abcdef",t=new Array(256),n=0;n<16;++n)for(var r=16*n,o=0;o<16;++o)t[r+o]=e[n]+e[o];return t}();function ne(e){return"undefined"===typeof BigInt?re:e}function re(){throw new Error("BigInt not supported")}},73027:function(e,t,n){"use strict";function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function u(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,u=[],s=!0,c=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=i.call(n)).done)&&(u.push(r.value),u.length!==t);s=!0);}catch(l){c=!0,o=l}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw o}}return u}}(e,t)||c(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e){return function(e){if(Array.isArray(e))return l(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||c(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,t){if(e){if("string"===typeof e)return l(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?l(e,t):void 0}}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function f(e){var t,n,r=e.sizes.shift(),o=Math.max(Math.ceil(r[0]),1),i=Math.max(Math.ceil(r[1]),1),a=[o-1,i-1,1,1],u=Date.now(),s="undefined"!==typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope;s?(t=new OffscreenCanvas(1,1),n=new OffscreenCanvas(o,i)):((t=document.createElement("canvas")).width=1,t.height=1,(n=document.createElement("canvas")).width=o,n.height=i);var c=t.getContext("2d"),l=n.getContext("2d");l&&(l.fillRect.apply(l,a),c.drawImage(n,o-1,i-1,1,1,0,0,1,1));var d=c&&0!==c.getImageData(0,0,1,1).data[3],p=Date.now()-u;return[t,n].forEach((function(e){e.height=0,e.width=0})),s?(postMessage({width:o,height:i,benchmark:p,isTestPass:d}),!d&&e.sizes.length&&f(e)):d?e.onSuccess(o,i,p):(e.onError(o,i,p),e.sizes.length&&f(e)),d}n.r(t),n.d(t,{default:function(){return w}});var d=[16384,14188,11402,11180,10836,8192,4096,1],p=[8388607,65535,32767,16384,8192,4096,1],h=[4194303,65535,32767,16384,8192,4096,1],v=["onError","onSuccess"],g={max:null,min:1,sizes:[],step:1024,usePromise:!1,useWorker:!1,onError:Function.prototype,onSuccess:Function.prototype},y={};function m(e){var t=e.width===e.height,n=1===e.height,r=1===e.width,o=[];if(e.width&&e.height)for(var i=e.min||g.min,a=e.step||g.step,u=Math.max(e.width,e.height);u>=i;){var s=t||n?u:1,c=t||r?u:1;o.push([s,c]),u-=a}else e.sizes.forEach((function(e){var i=t||n?e:1,a=t||r?e:1;o.push([i,a])}));return o}function b(e){var t=window&&"HTMLCanvasElement"in window,n=window&&"OffscreenCanvas"in window,r=Date.now(),i=e.onError,s=e.onSuccess,c=a(e,v),l=null;if(!t)return!1;if(e.useWorker&&n){var d="\n            var canvasTest = ".concat(f.toString(),";\n            onmessage = function(e) {\n                canvasTest(e.data);\n            };\n        "),p=new Blob([d],{type:"application/javascript"}),h=URL.createObjectURL(p);l=new Worker(h),URL.revokeObjectURL(h),l.onmessage=function(e){var t=e.data,n=t.width,o=t.height,i=t.benchmark;t.isTestPass?(y[r].onSuccess(n,o,i),delete y[r]):y[r].onError(n,o,i)}}return e.usePromise?new Promise((function(t,n){var a=o(o({},e),{},{onError:function(t,r,o){var a;if(0===e.sizes.length)a=!0;else{var s=u(e.sizes.slice(-1),1),c=u(s[0],2),l=c[0],f=c[1];a=t===l&&r===f}i(t,r,o),a&&n({width:t,height:r,benchmark:o})},onSuccess:function(e,n,r){s(e,n,r),t({width:e,height:n,benchmark:r})}});if(l){var d=a.onError,p=a.onSuccess;y[r]={onError:d,onSuccess:p},l.postMessage(c)}else f(a)})):l?(y[r]={onError:i,onSuccess:s},void l.postMessage(c)):f(e)}var w={maxArea:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=m({width:e.max,height:e.max,min:e.min,step:e.step,sizes:s(d)});return b(o(o(o({},g),e),{},{sizes:t}))},maxHeight:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=m({width:1,height:e.max,min:e.min,step:e.step,sizes:s(p)});return b(o(o(o({},g),e),{},{sizes:t}))},maxWidth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=m({width:e.max,height:1,min:e.min,step:e.step,sizes:s(h)});return b(o(o(o({},g),e),{},{sizes:t}))},test:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=o(o({},g),e);return t.sizes=s(t.sizes),t.width&&t.height&&(t.sizes=[[t.width,t.height]]),b(t)}}},63785:function(e,t){"use strict";t.parse=function(e,t){if("string"!==typeof e)throw new TypeError("argument str must be a string");for(var r={},i=t||{},u=e.split(o),s=i.decode||n,c=0;c<u.length;c++){var l=u[c],f=l.indexOf("=");if(!(f<0)){var d=l.substr(0,f).trim(),p=l.substr(++f,l.length).trim();'"'==p[0]&&(p=p.slice(1,-1)),void 0==r[d]&&(r[d]=a(p,s))}}return r},t.serialize=function(e,t,n){var o=n||{},a=o.encode||r;if("function"!==typeof a)throw new TypeError("option encode is invalid");if(!i.test(e))throw new TypeError("argument name is invalid");var u=a(t);if(u&&!i.test(u))throw new TypeError("argument val is invalid");var s=e+"="+u;if(null!=o.maxAge){var c=o.maxAge-0;if(isNaN(c))throw new Error("maxAge should be a Number");s+="; Max-Age="+Math.floor(c)}if(o.domain){if(!i.test(o.domain))throw new TypeError("option domain is invalid");s+="; Domain="+o.domain}if(o.path){if(!i.test(o.path))throw new TypeError("option path is invalid");s+="; Path="+o.path}if(o.expires){if("function"!==typeof o.expires.toUTCString)throw new TypeError("option expires is invalid");s+="; Expires="+o.expires.toUTCString()}o.httpOnly&&(s+="; HttpOnly");o.secure&&(s+="; Secure");if(o.sameSite){switch("string"===typeof o.sameSite?o.sameSite.toLowerCase():o.sameSite){case!0:s+="; SameSite=Strict";break;case"lax":s+="; SameSite=Lax";break;case"strict":s+="; SameSite=Strict";break;default:throw new TypeError("option sameSite is invalid")}}return s};var n=decodeURIComponent,r=encodeURIComponent,o=/; */,i=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/;function a(e,t){try{return t(e)}catch(n){return e}}},75438:function(e){"use strict";var t=Object.prototype.hasOwnProperty,n="~";function r(){}function o(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function i(e,t,r,i,a){if("function"!==typeof r)throw new TypeError("The listener must be a function");var u=new o(r,i||e,a),s=n?n+t:t;return e._events[s]?e._events[s].fn?e._events[s]=[e._events[s],u]:e._events[s].push(u):(e._events[s]=u,e._eventsCount++),e}function a(e,t){0===--e._eventsCount?e._events=new r:delete e._events[t]}function u(){this._events=new r,this._eventsCount=0}Object.create&&(r.prototype=Object.create(null),(new r).__proto__||(n=!1)),u.prototype.eventNames=function(){var e,r,o=[];if(0===this._eventsCount)return o;for(r in e=this._events)t.call(e,r)&&o.push(n?r.slice(1):r);return Object.getOwnPropertySymbols?o.concat(Object.getOwnPropertySymbols(e)):o},u.prototype.listeners=function(e){var t=n?n+e:e,r=this._events[t];if(!r)return[];if(r.fn)return[r.fn];for(var o=0,i=r.length,a=new Array(i);o<i;o++)a[o]=r[o].fn;return a},u.prototype.listenerCount=function(e){var t=n?n+e:e,r=this._events[t];return r?r.fn?1:r.length:0},u.prototype.emit=function(e,t,r,o,i,a){var u=n?n+e:e;if(!this._events[u])return!1;var s,c,l=this._events[u],f=arguments.length;if(l.fn){switch(l.once&&this.removeListener(e,l.fn,void 0,!0),f){case 1:return l.fn.call(l.context),!0;case 2:return l.fn.call(l.context,t),!0;case 3:return l.fn.call(l.context,t,r),!0;case 4:return l.fn.call(l.context,t,r,o),!0;case 5:return l.fn.call(l.context,t,r,o,i),!0;case 6:return l.fn.call(l.context,t,r,o,i,a),!0}for(c=1,s=new Array(f-1);c<f;c++)s[c-1]=arguments[c];l.fn.apply(l.context,s)}else{var d,p=l.length;for(c=0;c<p;c++)switch(l[c].once&&this.removeListener(e,l[c].fn,void 0,!0),f){case 1:l[c].fn.call(l[c].context);break;case 2:l[c].fn.call(l[c].context,t);break;case 3:l[c].fn.call(l[c].context,t,r);break;case 4:l[c].fn.call(l[c].context,t,r,o);break;default:if(!s)for(d=1,s=new Array(f-1);d<f;d++)s[d-1]=arguments[d];l[c].fn.apply(l[c].context,s)}}return!0},u.prototype.on=function(e,t,n){return i(this,e,t,n,!1)},u.prototype.once=function(e,t,n){return i(this,e,t,n,!0)},u.prototype.removeListener=function(e,t,r,o){var i=n?n+e:e;if(!this._events[i])return this;if(!t)return a(this,i),this;var u=this._events[i];if(u.fn)u.fn!==t||o&&!u.once||r&&u.context!==r||a(this,i);else{for(var s=0,c=[],l=u.length;s<l;s++)(u[s].fn!==t||o&&!u[s].once||r&&u[s].context!==r)&&c.push(u[s]);c.length?this._events[i]=1===c.length?c[0]:c:a(this,i)}return this},u.prototype.removeAllListeners=function(e){var t;return e?(t=n?n+e:e,this._events[t]&&a(this,t)):(this._events=new r,this._eventsCount=0),this},u.prototype.off=u.prototype.removeListener,u.prototype.addListener=u.prototype.on,u.prefixed=n,u.EventEmitter=u,e.exports=u},85520:function(e){e.exports="object"==typeof self?self.FormData:window.FormData},83665:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return k}});var r="undefined"!==typeof navigator&&navigator.userAgent.toLowerCase().indexOf("firefox")>0;function o(e,t,n,r){e.addEventListener?e.addEventListener(t,n,r):e.attachEvent&&e.attachEvent("on".concat(t),n)}function i(e,t,n,r){e.removeEventListener?e.removeEventListener(t,n,r):e.detachEvent&&e.detachEvent("on".concat(t),n)}function a(e,t){for(var n=t.slice(0,t.length-1),r=0;r<n.length;r++)n[r]=e[n[r].toLowerCase()];return n}function u(e){"string"!==typeof e&&(e="");for(var t=(e=e.replace(/\s/g,"")).split(","),n=t.lastIndexOf("");n>=0;)t[n-1]+=",",t.splice(n,1),n=t.lastIndexOf("");return t}for(var s={backspace:8,"\u232b":8,tab:9,clear:12,enter:13,"\u21a9":13,return:13,esc:27,escape:27,space:32,left:37,up:38,right:39,down:40,del:46,delete:46,ins:45,insert:45,home:36,end:35,pageup:33,pagedown:34,capslock:20,num_0:96,num_1:97,num_2:98,num_3:99,num_4:100,num_5:101,num_6:102,num_7:103,num_8:104,num_9:105,num_multiply:106,num_add:107,num_enter:108,num_subtract:109,num_decimal:110,num_divide:111,"\u21ea":20,",":188,".":190,"/":191,"`":192,"-":r?173:189,"=":r?61:187,";":r?59:186,"'":222,"[":219,"]":221,"\\":220},c={"\u21e7":16,shift:16,"\u2325":18,alt:18,option:18,"\u2303":17,ctrl:17,control:17,"\u2318":91,cmd:91,command:91},l={16:"shiftKey",18:"altKey",17:"ctrlKey",91:"metaKey",shiftKey:16,ctrlKey:17,altKey:18,metaKey:91},f={16:!1,18:!1,17:!1,91:!1},d={},p=1;p<20;p++)s["f".concat(p)]=111+p;var h=[],v=null,g="all",y=new Map,m=function(e){return s[e.toLowerCase()]||c[e.toLowerCase()]||e.toUpperCase().charCodeAt(0)};function b(e){g=e||"all"}function w(){return g||"all"}function S(e){if("undefined"===typeof e)Object.keys(d).forEach((function(e){Array.isArray(d[e])&&d[e].forEach((function(e){return x(e)})),delete d[e]})),_(null);else if(Array.isArray(e))e.forEach((function(e){e.key&&x(e)}));else if("object"===typeof e)e.key&&x(e);else if("string"===typeof e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var o=n[0],i=n[1];"function"===typeof o&&(i=o,o=""),x({key:e,scope:o,method:i,splitKey:"+"})}}var x=function(e){var t=e.key,n=e.scope,r=e.method,o=e.splitKey,i=void 0===o?"+":o;u(t).forEach((function(e){var t=e.split(i),o=t.length,u=t[o-1],s="*"===u?"*":m(u);if(d[s]){n||(n=w());var l=o>1?a(c,t):[],f=[];d[s]=d[s].filter((function(e){var t=(!r||e.method===r)&&e.scope===n&&function(e,t){for(var n=e.length>=t.length?e:t,r=e.length>=t.length?t:e,o=!0,i=0;i<n.length;i++)-1===r.indexOf(n[i])&&(o=!1);return o}(e.mods,l);return t&&f.push(e.element),!t})),f.forEach((function(e){return _(e)}))}}))};function P(e,t,n,r){var o;if(t.element===r&&(t.scope===n||"all"===t.scope)){for(var i in o=t.mods.length>0,f)Object.prototype.hasOwnProperty.call(f,i)&&(!f[i]&&t.mods.indexOf(+i)>-1||f[i]&&-1===t.mods.indexOf(+i))&&(o=!1);(0!==t.mods.length||f[16]||f[18]||f[17]||f[91])&&!o&&"*"!==t.shortcut||(t.keys=[],t.keys=t.keys.concat(h),!1===t.method(e,t)&&(e.preventDefault?e.preventDefault():e.returnValue=!1,e.stopPropagation&&e.stopPropagation(),e.cancelBubble&&(e.cancelBubble=!0)))}}function O(e,t){var n=d["*"],r=e.keyCode||e.which||e.charCode;if(k.filter.call(this,e)){if(93!==r&&224!==r||(r=91),-1===h.indexOf(r)&&229!==r&&h.push(r),["metaKey","ctrlKey","altKey","shiftKey"].forEach((function(t){var n=l[t];e[t]&&-1===h.indexOf(n)?h.push(n):!e[t]&&h.indexOf(n)>-1?h.splice(h.indexOf(n),1):"metaKey"===t&&e[t]&&(h=h.filter((function(e){return e in l||e===r})))})),r in f){for(var o in f[r]=!0,c)c[o]===r&&(k[o]=!0);if(!n)return}for(var i in f)Object.prototype.hasOwnProperty.call(f,i)&&(f[i]=e[l[i]]);e.getModifierState&&(!e.altKey||e.ctrlKey)&&e.getModifierState("AltGraph")&&(-1===h.indexOf(17)&&h.push(17),-1===h.indexOf(18)&&h.push(18),f[17]=!0,f[18]=!0);var a=w();if(n)for(var u=0;u<n.length;u++)n[u].scope===a&&("keydown"===e.type&&n[u].keydown||"keyup"===e.type&&n[u].keyup)&&P(e,n[u],a,t);if(r in d)for(var s=d[r],p=s.length,v=0;v<p;v++)if(("keydown"===e.type&&s[v].keydown||"keyup"===e.type&&s[v].keyup)&&s[v].key){for(var g=s[v],y=g.splitKey,b=g.key.split(y),S=[],x=0;x<b.length;x++)S.push(m(b[x]));S.sort().join("")===h.sort().join("")&&P(e,g,a,t)}}}function k(e,t,n){h=[];var r=u(e),i=[],s="all",l=document,p=0,g=!1,b=!0,w="+",x=!1,P=!1;for(void 0===n&&"function"===typeof t&&(n=t),"[object Object]"===Object.prototype.toString.call(t)&&(t.scope&&(s=t.scope),t.element&&(l=t.element),t.keyup&&(g=t.keyup),void 0!==t.keydown&&(b=t.keydown),void 0!==t.capture&&(x=t.capture),"string"===typeof t.splitKey&&(w=t.splitKey),!0===t.single&&(P=!0)),"string"===typeof t&&(s=t),P&&S(e,s);p<r.length;p++)i=[],(e=r[p].split(w)).length>1&&(i=a(c,e)),(e="*"===(e=e[e.length-1])?"*":m(e))in d||(d[e]=[]),d[e].push({keyup:g,keydown:b,scope:s,mods:i,shortcut:r[p],method:n,key:r[p],splitKey:w,element:l});if("undefined"!==typeof l&&window){if(!y.has(l)){var _=function(){return O(arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.event,l)},j=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.event;O(e,l),function(e){var t=e.keyCode||e.which||e.charCode,n=h.indexOf(t);if(n>=0&&h.splice(n,1),e.key&&"meta"===e.key.toLowerCase()&&h.splice(0,h.length),93!==t&&224!==t||(t=91),t in f)for(var r in f[t]=!1,c)c[r]===t&&(k[r]=!1)}(e)};y.set(l,{keydownListener:_,keyupListenr:j,capture:x}),o(l,"keydown",_,x),o(l,"keyup",j,x)}if(!v){var I=function(){h=[]};v={listener:I,capture:x},o(window,"focus",I,x)}}}function _(e){var t=Object.values(d).flat();if(t.findIndex((function(t){return t.element===e}))<0){var n=y.get(e)||{},r=n.keydownListener,o=n.keyupListenr,a=n.capture;r&&o&&(i(e,"keyup",o,a),i(e,"keydown",r,a),y.delete(e))}if((t.length<=0||y.size<=0)&&(Object.keys(y).forEach((function(e){var t=y.get(e)||{},n=t.keydownListener,r=t.keyupListenr,o=t.capture;n&&r&&(i(e,"keyup",r,o),i(e,"keydown",n,o),y.delete(e))})),y.clear(),Object.keys(d).forEach((function(e){return delete d[e]})),v)){var u=v,s=u.listener,c=u.capture;i(window,"focus",s,c),v=null}}var j={getPressedKeyString:function(){return h.map((function(e){return t=e,Object.keys(s).find((function(e){return s[e]===t}))||function(e){return Object.keys(c).find((function(t){return c[t]===e}))}(e)||String.fromCharCode(e);var t}))},setScope:b,getScope:w,deleteScope:function(e,t){var n,r;for(var o in e||(e=w()),d)if(Object.prototype.hasOwnProperty.call(d,o))for(n=d[o],r=0;r<n.length;){if(n[r].scope===e)n.splice(r,1).forEach((function(e){return _(e.element)}));else r++}w()===e&&b(t||"all")},getPressedKeyCodes:function(){return h.slice(0)},getAllKeyCodes:function(){var e=[];return Object.keys(d).forEach((function(t){d[t].forEach((function(t){var n=t.key,r=t.scope,o=t.mods,i=t.shortcut;e.push({scope:r,shortcut:i,mods:o,keys:n.split("+").map((function(e){return m(e)}))})}))})),e},isPressed:function(e){return"string"===typeof e&&(e=m(e)),-1!==h.indexOf(e)},filter:function(e){var t=e.target||e.srcElement,n=t.tagName,r=!0,o="INPUT"===n&&!["checkbox","radio","range","button","file","reset","submit","color"].includes(t.type);return(t.isContentEditable||(o||"TEXTAREA"===n||"SELECT"===n)&&!t.readOnly)&&(r=!1),r},trigger:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"all";Object.keys(d).forEach((function(n){d[n].filter((function(n){return n.scope===t&&n.shortcut===e})).forEach((function(e){e&&e.method&&e.method()}))}))},unbind:S,keyMap:s,modifier:c,modifierMap:l};for(var I in j)Object.prototype.hasOwnProperty.call(j,I)&&(k[I]=j[I]);if("undefined"!==typeof window){var T=window.hotkeys;k.noConflict=function(e){return e&&window.hotkeys===k&&(window.hotkeys=T),k},window.hotkeys=k}},66897:function(e,t){t.read=function(e,t,n,r,o){var i,a,u=8*o-r-1,s=(1<<u)-1,c=s>>1,l=-7,f=n?o-1:0,d=n?-1:1,p=e[t+f];for(f+=d,i=p&(1<<-l)-1,p>>=-l,l+=u;l>0;i=256*i+e[t+f],f+=d,l-=8);for(a=i&(1<<-l)-1,i>>=-l,l+=r;l>0;a=256*a+e[t+f],f+=d,l-=8);if(0===i)i=1-c;else{if(i===s)return a?NaN:1/0*(p?-1:1);a+=Math.pow(2,r),i-=c}return(p?-1:1)*a*Math.pow(2,i-r)},t.write=function(e,t,n,r,o,i){var a,u,s,c=8*i-o-1,l=(1<<c)-1,f=l>>1,d=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,p=r?0:i-1,h=r?1:-1,v=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(u=isNaN(t)?1:0,a=l):(a=Math.floor(Math.log(t)/Math.LN2),t*(s=Math.pow(2,-a))<1&&(a--,s*=2),(t+=a+f>=1?d/s:d*Math.pow(2,1-f))*s>=2&&(a++,s/=2),a+f>=l?(u=0,a=l):a+f>=1?(u=(t*s-1)*Math.pow(2,o),a+=f):(u=t*Math.pow(2,f-1)*Math.pow(2,o),a=0));o>=8;e[n+p]=255&u,p+=h,u/=256,o-=8);for(a=a<<o|u,c+=o;c>0;e[n+p]=255&a,p+=h,a/=256,c-=8);e[n+p-h]|=128*v}},75168:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});for(var n="undefined"!=typeof window&&/Mac|iPod|iPhone|iPad/.test(window.navigator.platform),r={alt:"altKey",control:"ctrlKey",meta:"metaKey",shift:"shiftKey"},o={add:"+",break:"pause",cmd:"meta",command:"meta",ctl:"control",ctrl:"control",del:"delete",down:"arrowdown",esc:"escape",ins:"insert",left:"arrowleft",mod:n?"meta":"control",opt:"alt",option:"alt",return:"enter",right:"arrowright",space:" ",spacebar:" ",up:"arrowup",win:"meta",windows:"meta"},i={backspace:8,tab:9,enter:13,shift:16,control:17,alt:18,pause:19,capslock:20,escape:27," ":32,pageup:33,pagedown:34,end:35,home:36,arrowleft:37,arrowup:38,arrowright:39,arrowdown:40,insert:45,delete:46,meta:91,numlock:144,scrolllock:145,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222},a=1;a<20;a++)i["f"+a]=111+a;function u(e,t,n){t&&!("byKey"in t)&&(n=t,t=null),Array.isArray(e)||(e=[e]);var r=e.map((function(e){return s(e,t)})),o=function(e){return r.some((function(t){return c(t,e)}))};return null==n?o:o(n)}function s(e,t){var n=t&&t.byKey,a={},u=(e=e.replace("++","+add")).split("+"),s=u.length;for(var c in r)a[r[c]]=!1;var d=!0,p=!1,h=void 0;try{for(var v,g=u[Symbol.iterator]();!(d=(v=g.next()).done);d=!0){var y=v.value,m=y.endsWith("?")&&y.length>1;m&&(y=y.slice(0,-1));var b=f(y),w=r[b];if(y.length>1&&!w&&!o[y]&&!i[b])throw new TypeError('Unknown modifier: "'+y+'"');1!==s&&w||(n?a.key=b:a.which=l(y)),w&&(a[w]=!m||null)}}catch(S){p=!0,h=S}finally{try{!d&&g.return&&g.return()}finally{if(p)throw h}}return a}function c(e,t){for(var n in e){var r=e[n],o=void 0;if(null!=r&&((null!=(o="key"===n&&null!=t.key?t.key.toLowerCase():"which"===n?91===r&&93===t.which?91:t.which:t[n])||!1!==r)&&o!==r))return!1}return!0}function l(e){return e=f(e),i[e]||e.toUpperCase().charCodeAt(0)}function f(e){return e=e.toLowerCase(),e=o[e]||e}t.default=u,t.isHotkey=u,t.isCodeHotkey=function(e,t){return u(e,t)},t.isKeyHotkey=function(e,t){return u(e,{byKey:!0},t)},t.parseHotkey=s,t.compareHotkey=c,t.toKeyCode=l,t.toKeyName=f},51812:function(e,t,n){e=n.nmd(e);var r="__lodash_hash_undefined__",o=9007199254740991,i="[object Arguments]",a="[object Array]",u="[object Boolean]",s="[object Date]",c="[object Error]",l="[object Function]",f="[object Map]",d="[object Number]",p="[object Object]",h="[object Promise]",v="[object RegExp]",g="[object Set]",y="[object String]",m="[object Symbol]",b="[object WeakMap]",w="[object ArrayBuffer]",S="[object DataView]",x=/^\[object .+?Constructor\]$/,P=/^(?:0|[1-9]\d*)$/,O={};O["[object Float32Array]"]=O["[object Float64Array]"]=O["[object Int8Array]"]=O["[object Int16Array]"]=O["[object Int32Array]"]=O["[object Uint8Array]"]=O["[object Uint8ClampedArray]"]=O["[object Uint16Array]"]=O["[object Uint32Array]"]=!0,O[i]=O[a]=O[w]=O[u]=O[S]=O[s]=O[c]=O[l]=O[f]=O[d]=O[p]=O[v]=O[g]=O[y]=O[b]=!1;var k="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,_="object"==typeof self&&self&&self.Object===Object&&self,j=k||_||Function("return this")(),I=t&&!t.nodeType&&t,T=I&&e&&!e.nodeType&&e,E=T&&T.exports===I,C=E&&k.process,M=function(){try{return C&&C.binding&&C.binding("util")}catch(e){}}(),A=M&&M.isTypedArray;function D(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}function R(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n}function N(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}var L,U,F=Array.prototype,B=Function.prototype,V=Object.prototype,z=j["__core-js_shared__"],H=B.toString,K=V.hasOwnProperty,G=function(){var e=/[^.]+$/.exec(z&&z.keys&&z.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),q=V.toString,W=RegExp("^"+H.call(K).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Y=E?j.Buffer:void 0,X=j.Symbol,Z=j.Uint8Array,$=V.propertyIsEnumerable,Q=F.splice,J=X?X.toStringTag:void 0,ee=Object.getOwnPropertySymbols,te=Y?Y.isBuffer:void 0,ne=(L=Object.keys,U=Object,function(e){return L(U(e))}),re=Ce(j,"DataView"),oe=Ce(j,"Map"),ie=Ce(j,"Promise"),ae=Ce(j,"Set"),ue=Ce(j,"WeakMap"),se=Ce(Object,"create"),ce=Re(re),le=Re(oe),fe=Re(ie),de=Re(ae),pe=Re(ue),he=X?X.prototype:void 0,ve=he?he.valueOf:void 0;function ge(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function ye(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function me(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function be(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new me;++t<n;)this.add(e[t])}function we(e){var t=this.__data__=new ye(e);this.size=t.size}function Se(e,t){var n=Ue(e),r=!n&&Le(e),o=!n&&!r&&Fe(e),i=!n&&!r&&!o&&Ke(e),a=n||r||o||i,u=a?function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}(e.length,String):[],s=u.length;for(var c in e)!t&&!K.call(e,c)||a&&("length"==c||o&&("offset"==c||"parent"==c)||i&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||De(c,s))||u.push(c);return u}function xe(e,t){for(var n=e.length;n--;)if(Ne(e[n][0],t))return n;return-1}function Pe(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":J&&J in Object(e)?function(e){var t=K.call(e,J),n=e[J];try{e[J]=void 0;var r=!0}catch(i){}var o=q.call(e);r&&(t?e[J]=n:delete e[J]);return o}(e):function(e){return q.call(e)}(e)}function Oe(e){return He(e)&&Pe(e)==i}function ke(e,t,n,r,o){return e===t||(null==e||null==t||!He(e)&&!He(t)?e!==e&&t!==t:function(e,t,n,r,o,l){var h=Ue(e),b=Ue(t),x=h?a:Ae(e),P=b?a:Ae(t),O=(x=x==i?p:x)==p,k=(P=P==i?p:P)==p,_=x==P;if(_&&Fe(e)){if(!Fe(t))return!1;h=!0,O=!1}if(_&&!O)return l||(l=new we),h||Ke(e)?Ie(e,t,n,r,o,l):function(e,t,n,r,o,i,a){switch(n){case S:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case w:return!(e.byteLength!=t.byteLength||!i(new Z(e),new Z(t)));case u:case s:case d:return Ne(+e,+t);case c:return e.name==t.name&&e.message==t.message;case v:case y:return e==t+"";case f:var l=R;case g:var p=1&r;if(l||(l=N),e.size!=t.size&&!p)return!1;var h=a.get(e);if(h)return h==t;r|=2,a.set(e,t);var b=Ie(l(e),l(t),r,o,i,a);return a.delete(e),b;case m:if(ve)return ve.call(e)==ve.call(t)}return!1}(e,t,x,n,r,o,l);if(!(1&n)){var j=O&&K.call(e,"__wrapped__"),I=k&&K.call(t,"__wrapped__");if(j||I){var T=j?e.value():e,E=I?t.value():t;return l||(l=new we),o(T,E,n,r,l)}}if(!_)return!1;return l||(l=new we),function(e,t,n,r,o,i){var a=1&n,u=Te(e),s=u.length,c=Te(t),l=c.length;if(s!=l&&!a)return!1;var f=s;for(;f--;){var d=u[f];if(!(a?d in t:K.call(t,d)))return!1}var p=i.get(e);if(p&&i.get(t))return p==t;var h=!0;i.set(e,t),i.set(t,e);var v=a;for(;++f<s;){var g=e[d=u[f]],y=t[d];if(r)var m=a?r(y,g,d,t,e,i):r(g,y,d,e,t,i);if(!(void 0===m?g===y||o(g,y,n,r,i):m)){h=!1;break}v||(v="constructor"==d)}if(h&&!v){var b=e.constructor,w=t.constructor;b==w||!("constructor"in e)||!("constructor"in t)||"function"==typeof b&&b instanceof b&&"function"==typeof w&&w instanceof w||(h=!1)}return i.delete(e),i.delete(t),h}(e,t,n,r,o,l)}(e,t,n,r,ke,o))}function _e(e){return!(!ze(e)||function(e){return!!G&&G in e}(e))&&(Be(e)?W:x).test(Re(e))}function je(e){if(!function(e){var t=e&&e.constructor,n="function"==typeof t&&t.prototype||V;return e===n}(e))return ne(e);var t=[];for(var n in Object(e))K.call(e,n)&&"constructor"!=n&&t.push(n);return t}function Ie(e,t,n,r,o,i){var a=1&n,u=e.length,s=t.length;if(u!=s&&!(a&&s>u))return!1;var c=i.get(e);if(c&&i.get(t))return c==t;var l=-1,f=!0,d=2&n?new be:void 0;for(i.set(e,t),i.set(t,e);++l<u;){var p=e[l],h=t[l];if(r)var v=a?r(h,p,l,t,e,i):r(p,h,l,e,t,i);if(void 0!==v){if(v)continue;f=!1;break}if(d){if(!D(t,(function(e,t){if(a=t,!d.has(a)&&(p===e||o(p,e,n,r,i)))return d.push(t);var a}))){f=!1;break}}else if(p!==h&&!o(p,h,n,r,i)){f=!1;break}}return i.delete(e),i.delete(t),f}function Te(e){return function(e,t,n){var r=t(e);return Ue(e)?r:function(e,t){for(var n=-1,r=t.length,o=e.length;++n<r;)e[o+n]=t[n];return e}(r,n(e))}(e,Ge,Me)}function Ee(e,t){var n=e.__data__;return function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}(t)?n["string"==typeof t?"string":"hash"]:n.map}function Ce(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return _e(n)?n:void 0}ge.prototype.clear=function(){this.__data__=se?se(null):{},this.size=0},ge.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},ge.prototype.get=function(e){var t=this.__data__;if(se){var n=t[e];return n===r?void 0:n}return K.call(t,e)?t[e]:void 0},ge.prototype.has=function(e){var t=this.__data__;return se?void 0!==t[e]:K.call(t,e)},ge.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=se&&void 0===t?r:t,this},ye.prototype.clear=function(){this.__data__=[],this.size=0},ye.prototype.delete=function(e){var t=this.__data__,n=xe(t,e);return!(n<0)&&(n==t.length-1?t.pop():Q.call(t,n,1),--this.size,!0)},ye.prototype.get=function(e){var t=this.__data__,n=xe(t,e);return n<0?void 0:t[n][1]},ye.prototype.has=function(e){return xe(this.__data__,e)>-1},ye.prototype.set=function(e,t){var n=this.__data__,r=xe(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this},me.prototype.clear=function(){this.size=0,this.__data__={hash:new ge,map:new(oe||ye),string:new ge}},me.prototype.delete=function(e){var t=Ee(this,e).delete(e);return this.size-=t?1:0,t},me.prototype.get=function(e){return Ee(this,e).get(e)},me.prototype.has=function(e){return Ee(this,e).has(e)},me.prototype.set=function(e,t){var n=Ee(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this},be.prototype.add=be.prototype.push=function(e){return this.__data__.set(e,r),this},be.prototype.has=function(e){return this.__data__.has(e)},we.prototype.clear=function(){this.__data__=new ye,this.size=0},we.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},we.prototype.get=function(e){return this.__data__.get(e)},we.prototype.has=function(e){return this.__data__.has(e)},we.prototype.set=function(e,t){var n=this.__data__;if(n instanceof ye){var r=n.__data__;if(!oe||r.length<199)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new me(r)}return n.set(e,t),this.size=n.size,this};var Me=ee?function(e){return null==e?[]:(e=Object(e),function(e,t){for(var n=-1,r=null==e?0:e.length,o=0,i=[];++n<r;){var a=e[n];t(a,n,e)&&(i[o++]=a)}return i}(ee(e),(function(t){return $.call(e,t)})))}:function(){return[]},Ae=Pe;function De(e,t){return!!(t=null==t?o:t)&&("number"==typeof e||P.test(e))&&e>-1&&e%1==0&&e<t}function Re(e){if(null!=e){try{return H.call(e)}catch(t){}try{return e+""}catch(t){}}return""}function Ne(e,t){return e===t||e!==e&&t!==t}(re&&Ae(new re(new ArrayBuffer(1)))!=S||oe&&Ae(new oe)!=f||ie&&Ae(ie.resolve())!=h||ae&&Ae(new ae)!=g||ue&&Ae(new ue)!=b)&&(Ae=function(e){var t=Pe(e),n=t==p?e.constructor:void 0,r=n?Re(n):"";if(r)switch(r){case ce:return S;case le:return f;case fe:return h;case de:return g;case pe:return b}return t});var Le=Oe(function(){return arguments}())?Oe:function(e){return He(e)&&K.call(e,"callee")&&!$.call(e,"callee")},Ue=Array.isArray;var Fe=te||function(){return!1};function Be(e){if(!ze(e))return!1;var t=Pe(e);return t==l||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}function Ve(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=o}function ze(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function He(e){return null!=e&&"object"==typeof e}var Ke=A?function(e){return function(t){return e(t)}}(A):function(e){return He(e)&&Ve(e.length)&&!!O[Pe(e)]};function Ge(e){return null!=(t=e)&&Ve(t.length)&&!Be(t)?Se(e):je(e);var t}e.exports=function(e,t){return ke(e,t)}},43088:function(e,t,n){var r="Expected a function",o=/^\s+|\s+$/g,i=/^[-+]0x[0-9a-f]+$/i,a=/^0b[01]+$/i,u=/^0o[0-7]+$/i,s=parseInt,c="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,l="object"==typeof self&&self&&self.Object===Object&&self,f=c||l||Function("return this")(),d=Object.prototype.toString,p=Math.max,h=Math.min,v=function(){return f.Date.now()};function g(e,t,n){var o,i,a,u,s,c,l=0,f=!1,d=!1,g=!0;if("function"!=typeof e)throw new TypeError(r);function b(t){var n=o,r=i;return o=i=void 0,l=t,u=e.apply(r,n)}function w(e){var n=e-c;return void 0===c||n>=t||n<0||d&&e-l>=a}function S(){var e=v();if(w(e))return x(e);s=setTimeout(S,function(e){var n=t-(e-c);return d?h(n,a-(e-l)):n}(e))}function x(e){return s=void 0,g&&o?b(e):(o=i=void 0,u)}function P(){var e=v(),n=w(e);if(o=arguments,i=this,c=e,n){if(void 0===s)return function(e){return l=e,s=setTimeout(S,t),f?b(e):u}(c);if(d)return s=setTimeout(S,t),b(c)}return void 0===s&&(s=setTimeout(S,t)),u}return t=m(t)||0,y(n)&&(f=!!n.leading,a=(d="maxWait"in n)?p(m(n.maxWait)||0,t):a,g="trailing"in n?!!n.trailing:g),P.cancel=function(){void 0!==s&&clearTimeout(s),l=0,o=c=i=s=void 0},P.flush=function(){return void 0===s?u:x(v())},P}function y(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function m(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&"[object Symbol]"==d.call(e)}(e))return NaN;if(y(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=y(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(o,"");var n=a.test(e);return n||u.test(e)?s(e.slice(2),n?2:8):i.test(e)?NaN:+e}e.exports=function(e,t,n){var o=!0,i=!0;if("function"!=typeof e)throw new TypeError(r);return y(n)&&(o="leading"in n?!!n.leading:o,i="trailing"in n?!!n.trailing:i),g(e,t,{leading:o,maxWait:t,trailing:i})}},74201:function(e,t,n){var r="__lodash_hash_undefined__",o="[object Function]",i="[object GeneratorFunction]",a=/^\[object .+?Constructor\]$/,u="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,s="object"==typeof self&&self&&self.Object===Object&&self,c=u||s||Function("return this")();function l(e,t){return!!(e?e.length:0)&&function(e,t,n){if(t!==t)return function(e,t,n,r){var o=e.length,i=n+(r?1:-1);for(;r?i--:++i<o;)if(t(e[i],i,e))return i;return-1}(e,d,n);var r=n-1,o=e.length;for(;++r<o;)if(e[r]===t)return r;return-1}(e,t,0)>-1}function f(e,t,n){for(var r=-1,o=e?e.length:0;++r<o;)if(n(t,e[r]))return!0;return!1}function d(e){return e!==e}function p(e,t){return e.has(t)}function h(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}var v=Array.prototype,g=Function.prototype,y=Object.prototype,m=c["__core-js_shared__"],b=function(){var e=/[^.]+$/.exec(m&&m.keys&&m.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),w=g.toString,S=y.hasOwnProperty,x=y.toString,P=RegExp("^"+w.call(S).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),O=v.splice,k=N(c,"Map"),_=N(c,"Set"),j=N(Object,"create");function I(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function T(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function E(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function C(e){var t=-1,n=e?e.length:0;for(this.__data__=new E;++t<n;)this.add(e[t])}function M(e,t){for(var n,r,o=e.length;o--;)if((n=e[o][0])===(r=t)||n!==n&&r!==r)return o;return-1}function A(e){if(!L(e)||(t=e,b&&b in t))return!1;var t,n=function(e){var t=L(e)?x.call(e):"";return t==o||t==i}(e)||function(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(n){}return t}(e)?P:a;return n.test(function(e){if(null!=e){try{return w.call(e)}catch(t){}try{return e+""}catch(t){}}return""}(e))}I.prototype.clear=function(){this.__data__=j?j(null):{}},I.prototype.delete=function(e){return this.has(e)&&delete this.__data__[e]},I.prototype.get=function(e){var t=this.__data__;if(j){var n=t[e];return n===r?void 0:n}return S.call(t,e)?t[e]:void 0},I.prototype.has=function(e){var t=this.__data__;return j?void 0!==t[e]:S.call(t,e)},I.prototype.set=function(e,t){return this.__data__[e]=j&&void 0===t?r:t,this},T.prototype.clear=function(){this.__data__=[]},T.prototype.delete=function(e){var t=this.__data__,n=M(t,e);return!(n<0)&&(n==t.length-1?t.pop():O.call(t,n,1),!0)},T.prototype.get=function(e){var t=this.__data__,n=M(t,e);return n<0?void 0:t[n][1]},T.prototype.has=function(e){return M(this.__data__,e)>-1},T.prototype.set=function(e,t){var n=this.__data__,r=M(n,e);return r<0?n.push([e,t]):n[r][1]=t,this},E.prototype.clear=function(){this.__data__={hash:new I,map:new(k||T),string:new I}},E.prototype.delete=function(e){return R(this,e).delete(e)},E.prototype.get=function(e){return R(this,e).get(e)},E.prototype.has=function(e){return R(this,e).has(e)},E.prototype.set=function(e,t){return R(this,e).set(e,t),this},C.prototype.add=C.prototype.push=function(e){return this.__data__.set(e,r),this},C.prototype.has=function(e){return this.__data__.has(e)};var D=_&&1/h(new _([,-0]))[1]==1/0?function(e){return new _(e)}:function(){};function R(e,t){var n=e.__data__;return function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}(t)?n["string"==typeof t?"string":"hash"]:n.map}function N(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return A(n)?n:void 0}function L(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}e.exports=function(e){return e&&e.length?function(e,t,n){var r=-1,o=l,i=e.length,a=!0,u=[],s=u;if(n)a=!1,o=f;else if(i>=200){var c=t?null:D(e);if(c)return h(c);a=!1,o=p,s=new C}else s=t?[]:u;e:for(;++r<i;){var d=e[r],v=t?t(d):d;if(d=n||0!==d?d:0,a&&v===v){for(var g=s.length;g--;)if(s[g]===v)continue e;t&&s.push(v),u.push(d)}else o(s,v,n)||(s!==u&&s.push(v),u.push(d))}return u}(e):[]}},80742:function(e,t,n){var r,o=function(){var e=String.fromCharCode,t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",r={};function o(e,t){if(!r[e]){r[e]={};for(var n=0;n<e.length;n++)r[e][e.charAt(n)]=n}return r[e][t]}var i={compressToBase64:function(e){if(null==e)return"";var n=i._compress(e,6,(function(e){return t.charAt(e)}));switch(n.length%4){default:case 0:return n;case 1:return n+"===";case 2:return n+"==";case 3:return n+"="}},decompressFromBase64:function(e){return null==e?"":""==e?null:i._decompress(e.length,32,(function(n){return o(t,e.charAt(n))}))},compressToUTF16:function(t){return null==t?"":i._compress(t,15,(function(t){return e(t+32)}))+" "},decompressFromUTF16:function(e){return null==e?"":""==e?null:i._decompress(e.length,16384,(function(t){return e.charCodeAt(t)-32}))},compressToUint8Array:function(e){for(var t=i.compress(e),n=new Uint8Array(2*t.length),r=0,o=t.length;r<o;r++){var a=t.charCodeAt(r);n[2*r]=a>>>8,n[2*r+1]=a%256}return n},decompressFromUint8Array:function(t){if(null===t||void 0===t)return i.decompress(t);for(var n=new Array(t.length/2),r=0,o=n.length;r<o;r++)n[r]=256*t[2*r]+t[2*r+1];var a=[];return n.forEach((function(t){a.push(e(t))})),i.decompress(a.join(""))},compressToEncodedURIComponent:function(e){return null==e?"":i._compress(e,6,(function(e){return n.charAt(e)}))},decompressFromEncodedURIComponent:function(e){return null==e?"":""==e?null:(e=e.replace(/ /g,"+"),i._decompress(e.length,32,(function(t){return o(n,e.charAt(t))})))},compress:function(t){return i._compress(t,16,(function(t){return e(t)}))},_compress:function(e,t,n){if(null==e)return"";var r,o,i,a={},u={},s="",c="",l="",f=2,d=3,p=2,h=[],v=0,g=0;for(i=0;i<e.length;i+=1)if(s=e.charAt(i),Object.prototype.hasOwnProperty.call(a,s)||(a[s]=d++,u[s]=!0),c=l+s,Object.prototype.hasOwnProperty.call(a,c))l=c;else{if(Object.prototype.hasOwnProperty.call(u,l)){if(l.charCodeAt(0)<256){for(r=0;r<p;r++)v<<=1,g==t-1?(g=0,h.push(n(v)),v=0):g++;for(o=l.charCodeAt(0),r=0;r<8;r++)v=v<<1|1&o,g==t-1?(g=0,h.push(n(v)),v=0):g++,o>>=1}else{for(o=1,r=0;r<p;r++)v=v<<1|o,g==t-1?(g=0,h.push(n(v)),v=0):g++,o=0;for(o=l.charCodeAt(0),r=0;r<16;r++)v=v<<1|1&o,g==t-1?(g=0,h.push(n(v)),v=0):g++,o>>=1}0==--f&&(f=Math.pow(2,p),p++),delete u[l]}else for(o=a[l],r=0;r<p;r++)v=v<<1|1&o,g==t-1?(g=0,h.push(n(v)),v=0):g++,o>>=1;0==--f&&(f=Math.pow(2,p),p++),a[c]=d++,l=String(s)}if(""!==l){if(Object.prototype.hasOwnProperty.call(u,l)){if(l.charCodeAt(0)<256){for(r=0;r<p;r++)v<<=1,g==t-1?(g=0,h.push(n(v)),v=0):g++;for(o=l.charCodeAt(0),r=0;r<8;r++)v=v<<1|1&o,g==t-1?(g=0,h.push(n(v)),v=0):g++,o>>=1}else{for(o=1,r=0;r<p;r++)v=v<<1|o,g==t-1?(g=0,h.push(n(v)),v=0):g++,o=0;for(o=l.charCodeAt(0),r=0;r<16;r++)v=v<<1|1&o,g==t-1?(g=0,h.push(n(v)),v=0):g++,o>>=1}0==--f&&(f=Math.pow(2,p),p++),delete u[l]}else for(o=a[l],r=0;r<p;r++)v=v<<1|1&o,g==t-1?(g=0,h.push(n(v)),v=0):g++,o>>=1;0==--f&&(f=Math.pow(2,p),p++)}for(o=2,r=0;r<p;r++)v=v<<1|1&o,g==t-1?(g=0,h.push(n(v)),v=0):g++,o>>=1;for(;;){if(v<<=1,g==t-1){h.push(n(v));break}g++}return h.join("")},decompress:function(e){return null==e?"":""==e?null:i._decompress(e.length,32768,(function(t){return e.charCodeAt(t)}))},_decompress:function(t,n,r){var o,i,a,u,s,c,l,f=[],d=4,p=4,h=3,v="",g=[],y={val:r(0),position:n,index:1};for(o=0;o<3;o+=1)f[o]=o;for(a=0,s=Math.pow(2,2),c=1;c!=s;)u=y.val&y.position,y.position>>=1,0==y.position&&(y.position=n,y.val=r(y.index++)),a|=(u>0?1:0)*c,c<<=1;switch(a){case 0:for(a=0,s=Math.pow(2,8),c=1;c!=s;)u=y.val&y.position,y.position>>=1,0==y.position&&(y.position=n,y.val=r(y.index++)),a|=(u>0?1:0)*c,c<<=1;l=e(a);break;case 1:for(a=0,s=Math.pow(2,16),c=1;c!=s;)u=y.val&y.position,y.position>>=1,0==y.position&&(y.position=n,y.val=r(y.index++)),a|=(u>0?1:0)*c,c<<=1;l=e(a);break;case 2:return""}for(f[3]=l,i=l,g.push(l);;){if(y.index>t)return"";for(a=0,s=Math.pow(2,h),c=1;c!=s;)u=y.val&y.position,y.position>>=1,0==y.position&&(y.position=n,y.val=r(y.index++)),a|=(u>0?1:0)*c,c<<=1;switch(l=a){case 0:for(a=0,s=Math.pow(2,8),c=1;c!=s;)u=y.val&y.position,y.position>>=1,0==y.position&&(y.position=n,y.val=r(y.index++)),a|=(u>0?1:0)*c,c<<=1;f[p++]=e(a),l=p-1,d--;break;case 1:for(a=0,s=Math.pow(2,16),c=1;c!=s;)u=y.val&y.position,y.position>>=1,0==y.position&&(y.position=n,y.val=r(y.index++)),a|=(u>0?1:0)*c,c<<=1;f[p++]=e(a),l=p-1,d--;break;case 2:return g.join("")}if(0==d&&(d=Math.pow(2,h),h++),f[l])v=f[l];else{if(l!==p)return null;v=i+i.charAt(0)}g.push(v),f[p++]=i+v.charAt(0),i=v,0==--d&&(d=Math.pow(2,h),h++)}}};return i}();void 0===(r=function(){return o}.call(t,n,t,e))||(e.exports=r)},26470:function(e){"use strict";var t=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable;e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(o){return!1}}()?Object.assign:function(e,o){for(var i,a,u=function(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}(e),s=1;s<arguments.length;s++){for(var c in i=Object(arguments[s]))n.call(i,c)&&(u[c]=i[c]);if(t){a=t(i);for(var l=0;l<a.length;l++)r.call(i,a[l])&&(u[a[l]]=i[a[l]])}}return u}},85224:function(e){var t,n,r=e.exports={};function o(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}function a(e){if(t===setTimeout)return setTimeout(e,0);if((t===o||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(n){try{return t.call(null,e,0)}catch(n){return t.call(this,e,0)}}}!function(){try{t="function"===typeof setTimeout?setTimeout:o}catch(e){t=o}try{n="function"===typeof clearTimeout?clearTimeout:i}catch(e){n=i}}();var u,s=[],c=!1,l=-1;function f(){c&&u&&(c=!1,u.length?s=u.concat(s):l=-1,s.length&&d())}function d(){if(!c){var e=a(f);c=!0;for(var t=s.length;t;){for(u=s,s=[];++l<t;)u&&u[l].run();l=-1,t=s.length}u=null,c=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===i||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{return n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(e)}}function p(e,t){this.fun=e,this.array=t}function h(){}r.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];s.push(new p(e,t)),1!==s.length||c||a(d)},p.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=h,r.addListener=h,r.once=h,r.off=h,r.removeListener=h,r.removeAllListeners=h,r.emit=h,r.prependListener=h,r.prependOnceListener=h,r.listeners=function(e){return[]},r.binding=function(e){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(e){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}},58801:function(e,t,n){"use strict";var r=n(85224);var o="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};var i=u(n(63785)),a=u(n(26470));function u(e){return e&&e.__esModule?e:{default:e}}var s="undefined"===typeof document||"undefined"!==typeof r&&{NODE_ENV:"production",PUBLIC_URL:"http://127.0.0.1:3000/assets/bundles",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}&&!1,c={},l=void 0;function f(){return l&&!l.headersSent}function d(e,t){var n=s?c:i.default.parse(document.cookie),r=n&&n[e];if("undefined"===typeof t&&(t=!r||"{"!==r[0]&&"["!==r[0]),!t)try{r=JSON.parse(r)}catch(o){}return r}function p(e){var t=s?c:i.default.parse(document.cookie);if("undefined"===typeof e&&(e=!t||"{"!==t[0]&&"["!==t[0]),!e)try{t=JSON.parse(t)}catch(n){}return t}function h(e){var t=s?c:i.default.parse(document.cookie);return t?e?Object.keys(t).reduce((function(n,r){if(!e.test(r))return n;var o={};return o[r]=t[r],(0,a.default)({},n,o)}),{}):t:{}}function v(e,t,n){c[e]=t,"object"===("undefined"===typeof t?"undefined":o(t))&&(c[e]=JSON.stringify(t)),s||(document.cookie=i.default.serialize(e,c[e],n)),f()&&l.cookie&&l.cookie(e,t,n)}function g(e,t){delete c[e],t="undefined"===typeof t?{}:"string"===typeof t?{path:t}:(0,a.default)({},t),"undefined"!==typeof document&&(t.expires=new Date(1970,1,1,0,0,1),t.maxAge=0,document.cookie=i.default.serialize(e,"",t)),f()&&l.clearCookie&&l.clearCookie(e,t)}function y(e){c=e?i.default.parse(e):{}}function m(e,t){return e.cookie?c=e.cookie:e.cookies?c=e.cookies:e.headers&&e.headers.cookie?y(e.headers.cookie):c={},l=t,function(){l=null,c={}}}t.Ay={setRawCookie:y,load:d,loadAll:p,select:h,save:v,remove:g,plugToRequest:m}},38345:function(e,t,n){"use strict";var r=n(9950),o=n(75340);function i(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=new Set,u={};function s(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(u[e]=t,e=0;e<t.length;e++)a.add(t[e])}var l=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),f=Object.prototype.hasOwnProperty,d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p={},h={};function v(e,t,n,r,o,i,a){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=o,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=a}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){g[e]=new v(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];g[t]=new v(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){g[e]=new v(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){g[e]=new v(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){g[e]=new v(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){g[e]=new v(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){g[e]=new v(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){g[e]=new v(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){g[e]=new v(e,5,!1,e.toLowerCase(),null,!1,!1)}));var y=/[\-:]([a-z])/g;function m(e){return e[1].toUpperCase()}function b(e,t,n,r){var o=g.hasOwnProperty(t)?g[t]:null;(null!==o?0!==o.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,o,r)&&(n=null),r||null===o?function(e){return!!f.call(h,e)||!f.call(p,e)&&(d.test(e)?h[e]=!0:(p[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):o.mustUseProperty?e[o.propertyName]=null===n?3!==o.type&&"":n:(t=o.attributeName,r=o.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(o=o.type)||4===o&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(y,m);g[t]=new v(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(y,m);g[t]=new v(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(y,m);g[t]=new v(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){g[e]=new v(e,1,!1,e.toLowerCase(),null,!1,!1)})),g.xlinkHref=new v("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){g[e]=new v(e,1,!1,e.toLowerCase(),null,!0,!0)}));var w=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,S=Symbol.for("react.element"),x=Symbol.for("react.portal"),P=Symbol.for("react.fragment"),O=Symbol.for("react.strict_mode"),k=Symbol.for("react.profiler"),_=Symbol.for("react.provider"),j=Symbol.for("react.context"),I=Symbol.for("react.forward_ref"),T=Symbol.for("react.suspense"),E=Symbol.for("react.suspense_list"),C=Symbol.for("react.memo"),M=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var A=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var D=Symbol.iterator;function R(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=D&&e[D]||e["@@iterator"])?e:null}var N,L=Object.assign;function U(e){if(void 0===N)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);N=t&&t[1]||""}return"\n"+N+e}var F=!1;function B(e,t){if(!e||F)return"";F=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var o=c.stack.split("\n"),i=r.stack.split("\n"),a=o.length-1,u=i.length-1;1<=a&&0<=u&&o[a]!==i[u];)u--;for(;1<=a&&0<=u;a--,u--)if(o[a]!==i[u]){if(1!==a||1!==u)do{if(a--,0>--u||o[a]!==i[u]){var s="\n"+o[a].replace(" at new "," at ");return e.displayName&&s.includes("<anonymous>")&&(s=s.replace("<anonymous>",e.displayName)),s}}while(1<=a&&0<=u);break}}}finally{F=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?U(e):""}function V(e){switch(e.tag){case 5:return U(e.type);case 16:return U("Lazy");case 13:return U("Suspense");case 19:return U("SuspenseList");case 0:case 2:case 15:return e=B(e.type,!1);case 11:return e=B(e.type.render,!1);case 1:return e=B(e.type,!0);default:return""}}function z(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case P:return"Fragment";case x:return"Portal";case k:return"Profiler";case O:return"StrictMode";case T:return"Suspense";case E:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case j:return(e.displayName||"Context")+".Consumer";case _:return(e._context.displayName||"Context")+".Provider";case I:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case C:return null!==(t=e.displayName||null)?t:z(e.type)||"Memo";case M:t=e._payload,e=e._init;try{return z(e(t))}catch(n){}}return null}function H(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return z(t);case 8:return t===O?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function K(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function G(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function q(e){e._valueTracker||(e._valueTracker=function(e){var t=G(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var o=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return o.call(this)},set:function(e){r=""+e,i.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function W(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=G(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Y(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function X(e,t){var n=t.checked;return L({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function Z(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=K(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function $(e,t){null!=(t=t.checked)&&b(e,"checked",t,!1)}function Q(e,t){$(e,t);var n=K(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,K(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function J(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&Y(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var o=0;o<n.length;o++)t["$"+n[o]]=!0;for(n=0;n<e.length;n++)o=t.hasOwnProperty("$"+e[n].value),e[n].selected!==o&&(e[n].selected=o),o&&r&&(e[n].defaultSelected=!0)}else{for(n=""+K(n),t=null,o=0;o<e.length;o++){if(e[o].value===n)return e[o].selected=!0,void(r&&(e[o].defaultSelected=!0));null!==t||e[o].disabled||(t=e[o])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(i(91));return L({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function oe(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(i(92));if(te(n)){if(1<n.length)throw Error(i(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:K(n)}}function ie(e,t){var n=K(t.value),r=K(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function ae(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ue(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function se(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ue(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,le,fe=(le=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return le(e,t)}))}:le);function de(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var pe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},he=["Webkit","ms","Moz","O"];function ve(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||pe.hasOwnProperty(e)&&pe[e]?(""+t).trim():t+"px"}function ge(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),o=ve(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,o):e[n]=o}}Object.keys(pe).forEach((function(e){he.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),pe[t]=pe[e]}))}));var ye=L({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function me(e,t){if(t){if(ye[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(i(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(i(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(i(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(i(62))}}function be(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var we=null;function Se(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var xe=null,Pe=null,Oe=null;function ke(e){if(e=wo(e)){if("function"!==typeof xe)throw Error(i(280));var t=e.stateNode;t&&(t=xo(t),xe(e.stateNode,e.type,t))}}function _e(e){Pe?Oe?Oe.push(e):Oe=[e]:Pe=e}function je(){if(Pe){var e=Pe,t=Oe;if(Oe=Pe=null,ke(e),t)for(e=0;e<t.length;e++)ke(t[e])}}function Ie(e,t){return e(t)}function Te(){}var Ee=!1;function Ce(e,t,n){if(Ee)return e(t,n);Ee=!0;try{return Ie(e,t,n)}finally{Ee=!1,(null!==Pe||null!==Oe)&&(Te(),je())}}function Me(e,t){var n=e.stateNode;if(null===n)return null;var r=xo(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(i(231,t,typeof n));return n}var Ae=!1;if(l)try{var De={};Object.defineProperty(De,"passive",{get:function(){Ae=!0}}),window.addEventListener("test",De,De),window.removeEventListener("test",De,De)}catch(le){Ae=!1}function Re(e,t,n,r,o,i,a,u,s){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(l){this.onError(l)}}var Ne=!1,Le=null,Ue=!1,Fe=null,Be={onError:function(e){Ne=!0,Le=e}};function Ve(e,t,n,r,o,i,a,u,s){Ne=!1,Le=null,Re.apply(Be,arguments)}function ze(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function He(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Ke(e){if(ze(e)!==e)throw Error(i(188))}function Ge(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=ze(e)))throw Error(i(188));return t!==e?null:e}for(var n=e,r=t;;){var o=n.return;if(null===o)break;var a=o.alternate;if(null===a){if(null!==(r=o.return)){n=r;continue}break}if(o.child===a.child){for(a=o.child;a;){if(a===n)return Ke(o),e;if(a===r)return Ke(o),t;a=a.sibling}throw Error(i(188))}if(n.return!==r.return)n=o,r=a;else{for(var u=!1,s=o.child;s;){if(s===n){u=!0,n=o,r=a;break}if(s===r){u=!0,r=o,n=a;break}s=s.sibling}if(!u){for(s=a.child;s;){if(s===n){u=!0,n=a,r=o;break}if(s===r){u=!0,r=a,n=o;break}s=s.sibling}if(!u)throw Error(i(189))}}if(n.alternate!==r)throw Error(i(190))}if(3!==n.tag)throw Error(i(188));return n.stateNode.current===n?e:t}(e))?qe(e):null}function qe(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=qe(e);if(null!==t)return t;e=e.sibling}return null}var We=o.unstable_scheduleCallback,Ye=o.unstable_cancelCallback,Xe=o.unstable_shouldYield,Ze=o.unstable_requestPaint,$e=o.unstable_now,Qe=o.unstable_getCurrentPriorityLevel,Je=o.unstable_ImmediatePriority,et=o.unstable_UserBlockingPriority,tt=o.unstable_NormalPriority,nt=o.unstable_LowPriority,rt=o.unstable_IdlePriority,ot=null,it=null;var at=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(ut(e)/st|0)|0},ut=Math.log,st=Math.LN2;var ct=64,lt=4194304;function ft(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function dt(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,o=e.suspendedLanes,i=e.pingedLanes,a=268435455&n;if(0!==a){var u=a&~o;0!==u?r=ft(u):0!==(i&=a)&&(r=ft(i))}else 0!==(a=n&~o)?r=ft(a):0!==i&&(r=ft(i));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&o)&&((o=r&-r)>=(i=t&-t)||16===o&&0!==(4194240&i)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)o=1<<(n=31-at(t)),r|=e[n],t&=~o;return r}function pt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function ht(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function vt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function gt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function yt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-at(t)]=n}function mt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-at(n),o=1<<r;o&t|e[r]&t&&(e[r]|=t),n&=~o}}var bt=0;function wt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var St,xt,Pt,Ot,kt,_t=!1,jt=[],It=null,Tt=null,Et=null,Ct=new Map,Mt=new Map,At=[],Dt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Rt(e,t){switch(e){case"focusin":case"focusout":It=null;break;case"dragenter":case"dragleave":Tt=null;break;case"mouseover":case"mouseout":Et=null;break;case"pointerover":case"pointerout":Ct.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Mt.delete(t.pointerId)}}function Nt(e,t,n,r,o,i){return null===e||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[o]},null!==t&&(null!==(t=wo(t))&&xt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==o&&-1===t.indexOf(o)&&t.push(o),e)}function Lt(e){var t=bo(e.target);if(null!==t){var n=ze(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=He(n)))return e.blockedOn=t,void kt(e.priority,(function(){Pt(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ut(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Xt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=wo(n))&&xt(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);we=r,n.target.dispatchEvent(r),we=null,t.shift()}return!0}function Ft(e,t,n){Ut(e)&&n.delete(t)}function Bt(){_t=!1,null!==It&&Ut(It)&&(It=null),null!==Tt&&Ut(Tt)&&(Tt=null),null!==Et&&Ut(Et)&&(Et=null),Ct.forEach(Ft),Mt.forEach(Ft)}function Vt(e,t){e.blockedOn===t&&(e.blockedOn=null,_t||(_t=!0,o.unstable_scheduleCallback(o.unstable_NormalPriority,Bt)))}function zt(e){function t(t){return Vt(t,e)}if(0<jt.length){Vt(jt[0],e);for(var n=1;n<jt.length;n++){var r=jt[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==It&&Vt(It,e),null!==Tt&&Vt(Tt,e),null!==Et&&Vt(Et,e),Ct.forEach(t),Mt.forEach(t),n=0;n<At.length;n++)(r=At[n]).blockedOn===e&&(r.blockedOn=null);for(;0<At.length&&null===(n=At[0]).blockedOn;)Lt(n),null===n.blockedOn&&At.shift()}var Ht=w.ReactCurrentBatchConfig,Kt=!0;function Gt(e,t,n,r){var o=bt,i=Ht.transition;Ht.transition=null;try{bt=1,Wt(e,t,n,r)}finally{bt=o,Ht.transition=i}}function qt(e,t,n,r){var o=bt,i=Ht.transition;Ht.transition=null;try{bt=4,Wt(e,t,n,r)}finally{bt=o,Ht.transition=i}}function Wt(e,t,n,r){if(Kt){var o=Xt(e,t,n,r);if(null===o)Kr(e,t,r,Yt,n),Rt(e,r);else if(function(e,t,n,r,o){switch(t){case"focusin":return It=Nt(It,e,t,n,r,o),!0;case"dragenter":return Tt=Nt(Tt,e,t,n,r,o),!0;case"mouseover":return Et=Nt(Et,e,t,n,r,o),!0;case"pointerover":var i=o.pointerId;return Ct.set(i,Nt(Ct.get(i)||null,e,t,n,r,o)),!0;case"gotpointercapture":return i=o.pointerId,Mt.set(i,Nt(Mt.get(i)||null,e,t,n,r,o)),!0}return!1}(o,e,t,n,r))r.stopPropagation();else if(Rt(e,r),4&t&&-1<Dt.indexOf(e)){for(;null!==o;){var i=wo(o);if(null!==i&&St(i),null===(i=Xt(e,t,n,r))&&Kr(e,t,r,Yt,n),i===o)break;o=i}null!==o&&r.stopPropagation()}else Kr(e,t,r,null,n)}}var Yt=null;function Xt(e,t,n,r){if(Yt=null,null!==(e=bo(e=Se(r))))if(null===(t=ze(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=He(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Yt=e,null}function Zt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Qe()){case Je:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var $t=null,Qt=null,Jt=null;function en(){if(Jt)return Jt;var e,t,n=Qt,r=n.length,o="value"in $t?$t.value:$t.textContent,i=o.length;for(e=0;e<r&&n[e]===o[e];e++);var a=r-e;for(t=1;t<=a&&n[r-t]===o[i-t];t++);return Jt=o.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function on(e){function t(t,n,r,o,i){for(var a in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=o,this.target=i,this.currentTarget=null,e)e.hasOwnProperty(a)&&(t=e[a],this[a]=t?t(o):o[a]);return this.isDefaultPrevented=(null!=o.defaultPrevented?o.defaultPrevented:!1===o.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return L(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var an,un,sn,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ln=on(cn),fn=L({},cn,{view:0,detail:0}),dn=on(fn),pn=L({},fn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:kn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==sn&&(sn&&"mousemove"===e.type?(an=e.screenX-sn.screenX,un=e.screenY-sn.screenY):un=an=0,sn=e),an)},movementY:function(e){return"movementY"in e?e.movementY:un}}),hn=on(pn),vn=on(L({},pn,{dataTransfer:0})),gn=on(L({},fn,{relatedTarget:0})),yn=on(L({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),mn=L({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),bn=on(mn),wn=on(L({},cn,{data:0})),Sn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},xn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Pn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function On(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Pn[e])&&!!t[e]}function kn(){return On}var _n=L({},fn,{key:function(e){if(e.key){var t=Sn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?xn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:kn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),jn=on(_n),In=on(L({},pn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Tn=on(L({},fn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:kn})),En=on(L({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Cn=L({},pn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Mn=on(Cn),An=[9,13,27,32],Dn=l&&"CompositionEvent"in window,Rn=null;l&&"documentMode"in document&&(Rn=document.documentMode);var Nn=l&&"TextEvent"in window&&!Rn,Ln=l&&(!Dn||Rn&&8<Rn&&11>=Rn),Un=String.fromCharCode(32),Fn=!1;function Bn(e,t){switch(e){case"keyup":return-1!==An.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Vn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var zn=!1;var Hn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Kn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Hn[e.type]:"textarea"===t}function Gn(e,t,n,r){_e(r),0<(t=qr(t,"onChange")).length&&(n=new ln("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var qn=null,Wn=null;function Yn(e){Ur(e,0)}function Xn(e){if(W(So(e)))return e}function Zn(e,t){if("change"===e)return t}var $n=!1;if(l){var Qn;if(l){var Jn="oninput"in document;if(!Jn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Jn="function"===typeof er.oninput}Qn=Jn}else Qn=!1;$n=Qn&&(!document.documentMode||9<document.documentMode)}function tr(){qn&&(qn.detachEvent("onpropertychange",nr),Wn=qn=null)}function nr(e){if("value"===e.propertyName&&Xn(Wn)){var t=[];Gn(t,Wn,e,Se(e)),Ce(Yn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Wn=n,(qn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function or(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Xn(Wn)}function ir(e,t){if("click"===e)return Xn(t)}function ar(e,t){if("input"===e||"change"===e)return Xn(t)}var ur="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function sr(e,t){if(ur(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var o=n[r];if(!f.call(t,o)||!ur(e[o],t[o]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function lr(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function fr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?fr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function dr(){for(var e=window,t=Y();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=Y((e=t.contentWindow).document)}return t}function pr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function hr(e){var t=dr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&fr(n.ownerDocument.documentElement,n)){if(null!==r&&pr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var o=n.textContent.length,i=Math.min(r.start,o);r=void 0===r.end?i:Math.min(r.end,o),!e.extend&&i>r&&(o=r,r=i,i=o),o=lr(n,i);var a=lr(n,r);o&&a&&(1!==e.rangeCount||e.anchorNode!==o.node||e.anchorOffset!==o.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&((t=t.createRange()).setStart(o.node,o.offset),e.removeAllRanges(),i>r?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var vr=l&&"documentMode"in document&&11>=document.documentMode,gr=null,yr=null,mr=null,br=!1;function wr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;br||null==gr||gr!==Y(r)||("selectionStart"in(r=gr)&&pr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},mr&&sr(mr,r)||(mr=r,0<(r=qr(yr,"onSelect")).length&&(t=new ln("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=gr)))}function Sr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var xr={animationend:Sr("Animation","AnimationEnd"),animationiteration:Sr("Animation","AnimationIteration"),animationstart:Sr("Animation","AnimationStart"),transitionend:Sr("Transition","TransitionEnd")},Pr={},Or={};function kr(e){if(Pr[e])return Pr[e];if(!xr[e])return e;var t,n=xr[e];for(t in n)if(n.hasOwnProperty(t)&&t in Or)return Pr[e]=n[t];return e}l&&(Or=document.createElement("div").style,"AnimationEvent"in window||(delete xr.animationend.animation,delete xr.animationiteration.animation,delete xr.animationstart.animation),"TransitionEvent"in window||delete xr.transitionend.transition);var _r=kr("animationend"),jr=kr("animationiteration"),Ir=kr("animationstart"),Tr=kr("transitionend"),Er=new Map,Cr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Mr(e,t){Er.set(e,t),s(t,[e])}for(var Ar=0;Ar<Cr.length;Ar++){var Dr=Cr[Ar];Mr(Dr.toLowerCase(),"on"+(Dr[0].toUpperCase()+Dr.slice(1)))}Mr(_r,"onAnimationEnd"),Mr(jr,"onAnimationIteration"),Mr(Ir,"onAnimationStart"),Mr("dblclick","onDoubleClick"),Mr("focusin","onFocus"),Mr("focusout","onBlur"),Mr(Tr,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),s("onBeforeInput",["compositionend","keypress","textInput","paste"]),s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Rr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Nr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Rr));function Lr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,o,a,u,s,c){if(Ve.apply(this,arguments),Ne){if(!Ne)throw Error(i(198));var l=Le;Ne=!1,Le=null,Ue||(Ue=!0,Fe=l)}}(r,t,void 0,e),e.currentTarget=null}function Ur(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],o=r.event;r=r.listeners;e:{var i=void 0;if(t)for(var a=r.length-1;0<=a;a--){var u=r[a],s=u.instance,c=u.currentTarget;if(u=u.listener,s!==i&&o.isPropagationStopped())break e;Lr(o,u,c),i=s}else for(a=0;a<r.length;a++){if(s=(u=r[a]).instance,c=u.currentTarget,u=u.listener,s!==i&&o.isPropagationStopped())break e;Lr(o,u,c),i=s}}}if(Ue)throw e=Fe,Ue=!1,Fe=null,e}function Fr(e,t){var n=t[go];void 0===n&&(n=t[go]=new Set);var r=e+"__bubble";n.has(r)||(Hr(t,e,2,!1),n.add(r))}function Br(e,t,n){var r=0;t&&(r|=4),Hr(n,e,r,t)}var Vr="_reactListening"+Math.random().toString(36).slice(2);function zr(e){if(!e[Vr]){e[Vr]=!0,a.forEach((function(t){"selectionchange"!==t&&(Nr.has(t)||Br(t,!1,e),Br(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Vr]||(t[Vr]=!0,Br("selectionchange",!1,t))}}function Hr(e,t,n,r){switch(Zt(t)){case 1:var o=Gt;break;case 4:o=qt;break;default:o=Wt}n=o.bind(null,t,n,e),o=void 0,!Ae||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(o=!0),r?void 0!==o?e.addEventListener(t,n,{capture:!0,passive:o}):e.addEventListener(t,n,!0):void 0!==o?e.addEventListener(t,n,{passive:o}):e.addEventListener(t,n,!1)}function Kr(e,t,n,r,o){var i=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var a=r.tag;if(3===a||4===a){var u=r.stateNode.containerInfo;if(u===o||8===u.nodeType&&u.parentNode===o)break;if(4===a)for(a=r.return;null!==a;){var s=a.tag;if((3===s||4===s)&&((s=a.stateNode.containerInfo)===o||8===s.nodeType&&s.parentNode===o))return;a=a.return}for(;null!==u;){if(null===(a=bo(u)))return;if(5===(s=a.tag)||6===s){r=i=a;continue e}u=u.parentNode}}r=r.return}Ce((function(){var r=i,o=Se(n),a=[];e:{var u=Er.get(e);if(void 0!==u){var s=ln,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":s=jn;break;case"focusin":c="focus",s=gn;break;case"focusout":c="blur",s=gn;break;case"beforeblur":case"afterblur":s=gn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":s=hn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":s=vn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":s=Tn;break;case _r:case jr:case Ir:s=yn;break;case Tr:s=En;break;case"scroll":s=dn;break;case"wheel":s=Mn;break;case"copy":case"cut":case"paste":s=bn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":s=In}var l=0!==(4&t),f=!l&&"scroll"===e,d=l?null!==u?u+"Capture":null:u;l=[];for(var p,h=r;null!==h;){var v=(p=h).stateNode;if(5===p.tag&&null!==v&&(p=v,null!==d&&(null!=(v=Me(h,d))&&l.push(Gr(h,v,p)))),f)break;h=h.return}0<l.length&&(u=new s(u,c,null,n,o),a.push({event:u,listeners:l}))}}if(0===(7&t)){if(s="mouseout"===e||"pointerout"===e,(!(u="mouseover"===e||"pointerover"===e)||n===we||!(c=n.relatedTarget||n.fromElement)||!bo(c)&&!c[vo])&&(s||u)&&(u=o.window===o?o:(u=o.ownerDocument)?u.defaultView||u.parentWindow:window,s?(s=r,null!==(c=(c=n.relatedTarget||n.toElement)?bo(c):null)&&(c!==(f=ze(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(s=null,c=r),s!==c)){if(l=hn,v="onMouseLeave",d="onMouseEnter",h="mouse","pointerout"!==e&&"pointerover"!==e||(l=In,v="onPointerLeave",d="onPointerEnter",h="pointer"),f=null==s?u:So(s),p=null==c?u:So(c),(u=new l(v,h+"leave",s,n,o)).target=f,u.relatedTarget=p,v=null,bo(o)===r&&((l=new l(d,h+"enter",c,n,o)).target=p,l.relatedTarget=f,v=l),f=v,s&&c)e:{for(d=c,h=0,p=l=s;p;p=Wr(p))h++;for(p=0,v=d;v;v=Wr(v))p++;for(;0<h-p;)l=Wr(l),h--;for(;0<p-h;)d=Wr(d),p--;for(;h--;){if(l===d||null!==d&&l===d.alternate)break e;l=Wr(l),d=Wr(d)}l=null}else l=null;null!==s&&Yr(a,u,s,l,!1),null!==c&&null!==f&&Yr(a,f,c,l,!0)}if("select"===(s=(u=r?So(r):window).nodeName&&u.nodeName.toLowerCase())||"input"===s&&"file"===u.type)var g=Zn;else if(Kn(u))if($n)g=ar;else{g=or;var y=rr}else(s=u.nodeName)&&"input"===s.toLowerCase()&&("checkbox"===u.type||"radio"===u.type)&&(g=ir);switch(g&&(g=g(e,r))?Gn(a,g,n,o):(y&&y(e,u,r),"focusout"===e&&(y=u._wrapperState)&&y.controlled&&"number"===u.type&&ee(u,"number",u.value)),y=r?So(r):window,e){case"focusin":(Kn(y)||"true"===y.contentEditable)&&(gr=y,yr=r,mr=null);break;case"focusout":mr=yr=gr=null;break;case"mousedown":br=!0;break;case"contextmenu":case"mouseup":case"dragend":br=!1,wr(a,n,o);break;case"selectionchange":if(vr)break;case"keydown":case"keyup":wr(a,n,o)}var m;if(Dn)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else zn?Bn(e,n)&&(b="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(b="onCompositionStart");b&&(Ln&&"ko"!==n.locale&&(zn||"onCompositionStart"!==b?"onCompositionEnd"===b&&zn&&(m=en()):(Qt="value"in($t=o)?$t.value:$t.textContent,zn=!0)),0<(y=qr(r,b)).length&&(b=new wn(b,e,null,n,o),a.push({event:b,listeners:y}),m?b.data=m:null!==(m=Vn(n))&&(b.data=m))),(m=Nn?function(e,t){switch(e){case"compositionend":return Vn(t);case"keypress":return 32!==t.which?null:(Fn=!0,Un);case"textInput":return(e=t.data)===Un&&Fn?null:e;default:return null}}(e,n):function(e,t){if(zn)return"compositionend"===e||!Dn&&Bn(e,t)?(e=en(),Jt=Qt=$t=null,zn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Ln&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=qr(r,"onBeforeInput")).length&&(o=new wn("onBeforeInput","beforeinput",null,n,o),a.push({event:o,listeners:r}),o.data=m))}Ur(a,t)}))}function Gr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function qr(e,t){for(var n=t+"Capture",r=[];null!==e;){var o=e,i=o.stateNode;5===o.tag&&null!==i&&(o=i,null!=(i=Me(e,n))&&r.unshift(Gr(e,i,o)),null!=(i=Me(e,t))&&r.push(Gr(e,i,o))),e=e.return}return r}function Wr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Yr(e,t,n,r,o){for(var i=t._reactName,a=[];null!==n&&n!==r;){var u=n,s=u.alternate,c=u.stateNode;if(null!==s&&s===r)break;5===u.tag&&null!==c&&(u=c,o?null!=(s=Me(n,i))&&a.unshift(Gr(n,s,u)):o||null!=(s=Me(n,i))&&a.push(Gr(n,s,u))),n=n.return}0!==a.length&&e.push({event:t,listeners:a})}var Xr=/\r\n?/g,Zr=/\u0000|\uFFFD/g;function $r(e){return("string"===typeof e?e:""+e).replace(Xr,"\n").replace(Zr,"")}function Qr(e,t,n){if(t=$r(t),$r(e)!==t&&n)throw Error(i(425))}function Jr(){}var eo=null,to=null;function no(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ro="function"===typeof setTimeout?setTimeout:void 0,oo="function"===typeof clearTimeout?clearTimeout:void 0,io="function"===typeof Promise?Promise:void 0,ao="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof io?function(e){return io.resolve(null).then(e).catch(uo)}:ro;function uo(e){setTimeout((function(){throw e}))}function so(e,t){var n=t,r=0;do{var o=n.nextSibling;if(e.removeChild(n),o&&8===o.nodeType)if("/$"===(n=o.data)){if(0===r)return e.removeChild(o),void zt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=o}while(n);zt(t)}function co(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function lo(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var fo=Math.random().toString(36).slice(2),po="__reactFiber$"+fo,ho="__reactProps$"+fo,vo="__reactContainer$"+fo,go="__reactEvents$"+fo,yo="__reactListeners$"+fo,mo="__reactHandles$"+fo;function bo(e){var t=e[po];if(t)return t;for(var n=e.parentNode;n;){if(t=n[vo]||n[po]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=lo(e);null!==e;){if(n=e[po])return n;e=lo(e)}return t}n=(e=n).parentNode}return null}function wo(e){return!(e=e[po]||e[vo])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function So(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(i(33))}function xo(e){return e[ho]||null}var Po=[],Oo=-1;function ko(e){return{current:e}}function _o(e){0>Oo||(e.current=Po[Oo],Po[Oo]=null,Oo--)}function jo(e,t){Oo++,Po[Oo]=e.current,e.current=t}var Io={},To=ko(Io),Eo=ko(!1),Co=Io;function Mo(e,t){var n=e.type.contextTypes;if(!n)return Io;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var o,i={};for(o in n)i[o]=t[o];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function Ao(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Do(){_o(Eo),_o(To)}function Ro(e,t,n){if(To.current!==Io)throw Error(i(168));jo(To,t),jo(Eo,n)}function No(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var o in r=r.getChildContext())if(!(o in t))throw Error(i(108,H(e)||"Unknown",o));return L({},n,r)}function Lo(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Io,Co=To.current,jo(To,e),jo(Eo,Eo.current),!0}function Uo(e,t,n){var r=e.stateNode;if(!r)throw Error(i(169));n?(e=No(e,t,Co),r.__reactInternalMemoizedMergedChildContext=e,_o(Eo),_o(To),jo(To,e)):_o(Eo),jo(Eo,n)}var Fo=null,Bo=!1,Vo=!1;function zo(e){null===Fo?Fo=[e]:Fo.push(e)}function Ho(){if(!Vo&&null!==Fo){Vo=!0;var e=0,t=bt;try{var n=Fo;for(bt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Fo=null,Bo=!1}catch(o){throw null!==Fo&&(Fo=Fo.slice(e+1)),We(Je,Ho),o}finally{bt=t,Vo=!1}}return null}var Ko=[],Go=0,qo=null,Wo=0,Yo=[],Xo=0,Zo=null,$o=1,Qo="";function Jo(e,t){Ko[Go++]=Wo,Ko[Go++]=qo,qo=e,Wo=t}function ei(e,t,n){Yo[Xo++]=$o,Yo[Xo++]=Qo,Yo[Xo++]=Zo,Zo=e;var r=$o;e=Qo;var o=32-at(r)-1;r&=~(1<<o),n+=1;var i=32-at(t)+o;if(30<i){var a=o-o%5;i=(r&(1<<a)-1).toString(32),r>>=a,o-=a,$o=1<<32-at(t)+o|n<<o|r,Qo=i+e}else $o=1<<i|n<<o|r,Qo=e}function ti(e){null!==e.return&&(Jo(e,1),ei(e,1,0))}function ni(e){for(;e===qo;)qo=Ko[--Go],Ko[Go]=null,Wo=Ko[--Go],Ko[Go]=null;for(;e===Zo;)Zo=Yo[--Xo],Yo[Xo]=null,Qo=Yo[--Xo],Yo[Xo]=null,$o=Yo[--Xo],Yo[Xo]=null}var ri=null,oi=null,ii=!1,ai=null;function ui(e,t){var n=Cc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function si(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,ri=e,oi=co(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,ri=e,oi=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Zo?{id:$o,overflow:Qo}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Cc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,ri=e,oi=null,!0);default:return!1}}function ci(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function li(e){if(ii){var t=oi;if(t){var n=t;if(!si(e,t)){if(ci(e))throw Error(i(418));t=co(n.nextSibling);var r=ri;t&&si(e,t)?ui(r,n):(e.flags=-4097&e.flags|2,ii=!1,ri=e)}}else{if(ci(e))throw Error(i(418));e.flags=-4097&e.flags|2,ii=!1,ri=e}}}function fi(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ri=e}function di(e){if(e!==ri)return!1;if(!ii)return fi(e),ii=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!no(e.type,e.memoizedProps)),t&&(t=oi)){if(ci(e))throw pi(),Error(i(418));for(;t;)ui(e,t),t=co(t.nextSibling)}if(fi(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(i(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){oi=co(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}oi=null}}else oi=ri?co(e.stateNode.nextSibling):null;return!0}function pi(){for(var e=oi;e;)e=co(e.nextSibling)}function hi(){oi=ri=null,ii=!1}function vi(e){null===ai?ai=[e]:ai.push(e)}var gi=w.ReactCurrentBatchConfig;function yi(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(i(309));var r=n.stateNode}if(!r)throw Error(i(147,e));var o=r,a=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===a?t.ref:(t=function(e){var t=o.refs;null===e?delete t[a]:t[a]=e},t._stringRef=a,t)}if("string"!==typeof e)throw Error(i(284));if(!n._owner)throw Error(i(290,e))}return e}function mi(e,t){throw e=Object.prototype.toString.call(t),Error(i(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function bi(e){return(0,e._init)(e._payload)}function wi(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function o(e,t){return(e=Ac(e,t)).index=0,e.sibling=null,e}function a(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function u(t){return e&&null===t.alternate&&(t.flags|=2),t}function s(e,t,n,r){return null===t||6!==t.tag?((t=Lc(n,e.mode,r)).return=e,t):((t=o(t,n)).return=e,t)}function c(e,t,n,r){var i=n.type;return i===P?f(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===i||"object"===typeof i&&null!==i&&i.$$typeof===M&&bi(i)===t.type)?((r=o(t,n.props)).ref=yi(e,t,n),r.return=e,r):((r=Dc(n.type,n.key,n.props,null,e.mode,r)).ref=yi(e,t,n),r.return=e,r)}function l(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Uc(n,e.mode,r)).return=e,t):((t=o(t,n.children||[])).return=e,t)}function f(e,t,n,r,i){return null===t||7!==t.tag?((t=Rc(n,e.mode,r,i)).return=e,t):((t=o(t,n)).return=e,t)}function d(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Lc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case S:return(n=Dc(t.type,t.key,t.props,null,e.mode,n)).ref=yi(e,null,t),n.return=e,n;case x:return(t=Uc(t,e.mode,n)).return=e,t;case M:return d(e,(0,t._init)(t._payload),n)}if(te(t)||R(t))return(t=Rc(t,e.mode,n,null)).return=e,t;mi(e,t)}return null}function p(e,t,n,r){var o=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==o?null:s(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case S:return n.key===o?c(e,t,n,r):null;case x:return n.key===o?l(e,t,n,r):null;case M:return p(e,t,(o=n._init)(n._payload),r)}if(te(n)||R(n))return null!==o?null:f(e,t,n,r,null);mi(e,n)}return null}function h(e,t,n,r,o){if("string"===typeof r&&""!==r||"number"===typeof r)return s(t,e=e.get(n)||null,""+r,o);if("object"===typeof r&&null!==r){switch(r.$$typeof){case S:return c(t,e=e.get(null===r.key?n:r.key)||null,r,o);case x:return l(t,e=e.get(null===r.key?n:r.key)||null,r,o);case M:return h(e,t,n,(0,r._init)(r._payload),o)}if(te(r)||R(r))return f(t,e=e.get(n)||null,r,o,null);mi(t,r)}return null}function v(o,i,u,s){for(var c=null,l=null,f=i,v=i=0,g=null;null!==f&&v<u.length;v++){f.index>v?(g=f,f=null):g=f.sibling;var y=p(o,f,u[v],s);if(null===y){null===f&&(f=g);break}e&&f&&null===y.alternate&&t(o,f),i=a(y,i,v),null===l?c=y:l.sibling=y,l=y,f=g}if(v===u.length)return n(o,f),ii&&Jo(o,v),c;if(null===f){for(;v<u.length;v++)null!==(f=d(o,u[v],s))&&(i=a(f,i,v),null===l?c=f:l.sibling=f,l=f);return ii&&Jo(o,v),c}for(f=r(o,f);v<u.length;v++)null!==(g=h(f,o,v,u[v],s))&&(e&&null!==g.alternate&&f.delete(null===g.key?v:g.key),i=a(g,i,v),null===l?c=g:l.sibling=g,l=g);return e&&f.forEach((function(e){return t(o,e)})),ii&&Jo(o,v),c}function g(o,u,s,c){var l=R(s);if("function"!==typeof l)throw Error(i(150));if(null==(s=l.call(s)))throw Error(i(151));for(var f=l=null,v=u,g=u=0,y=null,m=s.next();null!==v&&!m.done;g++,m=s.next()){v.index>g?(y=v,v=null):y=v.sibling;var b=p(o,v,m.value,c);if(null===b){null===v&&(v=y);break}e&&v&&null===b.alternate&&t(o,v),u=a(b,u,g),null===f?l=b:f.sibling=b,f=b,v=y}if(m.done)return n(o,v),ii&&Jo(o,g),l;if(null===v){for(;!m.done;g++,m=s.next())null!==(m=d(o,m.value,c))&&(u=a(m,u,g),null===f?l=m:f.sibling=m,f=m);return ii&&Jo(o,g),l}for(v=r(o,v);!m.done;g++,m=s.next())null!==(m=h(v,o,g,m.value,c))&&(e&&null!==m.alternate&&v.delete(null===m.key?g:m.key),u=a(m,u,g),null===f?l=m:f.sibling=m,f=m);return e&&v.forEach((function(e){return t(o,e)})),ii&&Jo(o,g),l}return function e(r,i,a,s){if("object"===typeof a&&null!==a&&a.type===P&&null===a.key&&(a=a.props.children),"object"===typeof a&&null!==a){switch(a.$$typeof){case S:e:{for(var c=a.key,l=i;null!==l;){if(l.key===c){if((c=a.type)===P){if(7===l.tag){n(r,l.sibling),(i=o(l,a.props.children)).return=r,r=i;break e}}else if(l.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===M&&bi(c)===l.type){n(r,l.sibling),(i=o(l,a.props)).ref=yi(r,l,a),i.return=r,r=i;break e}n(r,l);break}t(r,l),l=l.sibling}a.type===P?((i=Rc(a.props.children,r.mode,s,a.key)).return=r,r=i):((s=Dc(a.type,a.key,a.props,null,r.mode,s)).ref=yi(r,i,a),s.return=r,r=s)}return u(r);case x:e:{for(l=a.key;null!==i;){if(i.key===l){if(4===i.tag&&i.stateNode.containerInfo===a.containerInfo&&i.stateNode.implementation===a.implementation){n(r,i.sibling),(i=o(i,a.children||[])).return=r,r=i;break e}n(r,i);break}t(r,i),i=i.sibling}(i=Uc(a,r.mode,s)).return=r,r=i}return u(r);case M:return e(r,i,(l=a._init)(a._payload),s)}if(te(a))return v(r,i,a,s);if(R(a))return g(r,i,a,s);mi(r,a)}return"string"===typeof a&&""!==a||"number"===typeof a?(a=""+a,null!==i&&6===i.tag?(n(r,i.sibling),(i=o(i,a)).return=r,r=i):(n(r,i),(i=Lc(a,r.mode,s)).return=r,r=i),u(r)):n(r,i)}}var Si=wi(!0),xi=wi(!1),Pi=ko(null),Oi=null,ki=null,_i=null;function ji(){_i=ki=Oi=null}function Ii(e){var t=Pi.current;_o(Pi),e._currentValue=t}function Ti(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ei(e,t){Oi=e,_i=ki=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(bu=!0),e.firstContext=null)}function Ci(e){var t=e._currentValue;if(_i!==e)if(e={context:e,memoizedValue:t,next:null},null===ki){if(null===Oi)throw Error(i(308));ki=e,Oi.dependencies={lanes:0,firstContext:e}}else ki=ki.next=e;return t}var Mi=null;function Ai(e){null===Mi?Mi=[e]:Mi.push(e)}function Di(e,t,n,r){var o=t.interleaved;return null===o?(n.next=n,Ai(t)):(n.next=o.next,o.next=n),t.interleaved=n,Ri(e,r)}function Ri(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Ni=!1;function Li(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ui(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Fi(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Bi(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Is)){var o=r.pending;return null===o?t.next=t:(t.next=o.next,o.next=t),r.pending=t,Ri(e,n)}return null===(o=r.interleaved)?(t.next=t,Ai(r)):(t.next=o.next,o.next=t),r.interleaved=t,Ri(e,n)}function Vi(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,mt(e,n)}}function zi(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var o=null,i=null;if(null!==(n=n.firstBaseUpdate)){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===i?o=i=a:i=i.next=a,n=n.next}while(null!==n);null===i?o=i=t:i=i.next=t}else o=i=t;return n={baseState:r.baseState,firstBaseUpdate:o,lastBaseUpdate:i,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Hi(e,t,n,r){var o=e.updateQueue;Ni=!1;var i=o.firstBaseUpdate,a=o.lastBaseUpdate,u=o.shared.pending;if(null!==u){o.shared.pending=null;var s=u,c=s.next;s.next=null,null===a?i=c:a.next=c,a=s;var l=e.alternate;null!==l&&((u=(l=l.updateQueue).lastBaseUpdate)!==a&&(null===u?l.firstBaseUpdate=c:u.next=c,l.lastBaseUpdate=s))}if(null!==i){var f=o.baseState;for(a=0,l=c=s=null,u=i;;){var d=u.lane,p=u.eventTime;if((r&d)===d){null!==l&&(l=l.next={eventTime:p,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var h=e,v=u;switch(d=t,p=n,v.tag){case 1:if("function"===typeof(h=v.payload)){f=h.call(p,f,d);break e}f=h;break e;case 3:h.flags=-65537&h.flags|128;case 0:if(null===(d="function"===typeof(h=v.payload)?h.call(p,f,d):h)||void 0===d)break e;f=L({},f,d);break e;case 2:Ni=!0}}null!==u.callback&&0!==u.lane&&(e.flags|=64,null===(d=o.effects)?o.effects=[u]:d.push(u))}else p={eventTime:p,lane:d,tag:u.tag,payload:u.payload,callback:u.callback,next:null},null===l?(c=l=p,s=f):l=l.next=p,a|=d;if(null===(u=u.next)){if(null===(u=o.shared.pending))break;u=(d=u).next,d.next=null,o.lastBaseUpdate=d,o.shared.pending=null}}if(null===l&&(s=f),o.baseState=s,o.firstBaseUpdate=c,o.lastBaseUpdate=l,null!==(t=o.shared.interleaved)){o=t;do{a|=o.lane,o=o.next}while(o!==t)}else null===i&&(o.shared.lanes=0);Ns|=a,e.lanes=a,e.memoizedState=f}}function Ki(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],o=r.callback;if(null!==o){if(r.callback=null,r=n,"function"!==typeof o)throw Error(i(191,o));o.call(r)}}}var Gi={},qi=ko(Gi),Wi=ko(Gi),Yi=ko(Gi);function Xi(e){if(e===Gi)throw Error(i(174));return e}function Zi(e,t){switch(jo(Yi,t),jo(Wi,e),jo(qi,Gi),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:se(null,"");break;default:t=se(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}_o(qi),jo(qi,t)}function $i(){_o(qi),_o(Wi),_o(Yi)}function Qi(e){Xi(Yi.current);var t=Xi(qi.current),n=se(t,e.type);t!==n&&(jo(Wi,e),jo(qi,n))}function Ji(e){Wi.current===e&&(_o(qi),_o(Wi))}var ea=ko(0);function ta(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var na=[];function ra(){for(var e=0;e<na.length;e++)na[e]._workInProgressVersionPrimary=null;na.length=0}var oa=w.ReactCurrentDispatcher,ia=w.ReactCurrentBatchConfig,aa=0,ua=null,sa=null,ca=null,la=!1,fa=!1,da=0,pa=0;function ha(){throw Error(i(321))}function va(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ur(e[n],t[n]))return!1;return!0}function ga(e,t,n,r,o,a){if(aa=a,ua=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,oa.current=null===e||null===e.memoizedState?Ja:eu,e=n(r,o),fa){a=0;do{if(fa=!1,da=0,25<=a)throw Error(i(301));a+=1,ca=sa=null,t.updateQueue=null,oa.current=tu,e=n(r,o)}while(fa)}if(oa.current=Qa,t=null!==sa&&null!==sa.next,aa=0,ca=sa=ua=null,la=!1,t)throw Error(i(300));return e}function ya(){var e=0!==da;return da=0,e}function ma(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===ca?ua.memoizedState=ca=e:ca=ca.next=e,ca}function ba(){if(null===sa){var e=ua.alternate;e=null!==e?e.memoizedState:null}else e=sa.next;var t=null===ca?ua.memoizedState:ca.next;if(null!==t)ca=t,sa=e;else{if(null===e)throw Error(i(310));e={memoizedState:(sa=e).memoizedState,baseState:sa.baseState,baseQueue:sa.baseQueue,queue:sa.queue,next:null},null===ca?ua.memoizedState=ca=e:ca=ca.next=e}return ca}function wa(e,t){return"function"===typeof t?t(e):t}function Sa(e){var t=ba(),n=t.queue;if(null===n)throw Error(i(311));n.lastRenderedReducer=e;var r=sa,o=r.baseQueue,a=n.pending;if(null!==a){if(null!==o){var u=o.next;o.next=a.next,a.next=u}r.baseQueue=o=a,n.pending=null}if(null!==o){a=o.next,r=r.baseState;var s=u=null,c=null,l=a;do{var f=l.lane;if((aa&f)===f)null!==c&&(c=c.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),r=l.hasEagerState?l.eagerState:e(r,l.action);else{var d={lane:f,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};null===c?(s=c=d,u=r):c=c.next=d,ua.lanes|=f,Ns|=f}l=l.next}while(null!==l&&l!==a);null===c?u=r:c.next=s,ur(r,t.memoizedState)||(bu=!0),t.memoizedState=r,t.baseState=u,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){o=e;do{a=o.lane,ua.lanes|=a,Ns|=a,o=o.next}while(o!==e)}else null===o&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function xa(e){var t=ba(),n=t.queue;if(null===n)throw Error(i(311));n.lastRenderedReducer=e;var r=n.dispatch,o=n.pending,a=t.memoizedState;if(null!==o){n.pending=null;var u=o=o.next;do{a=e(a,u.action),u=u.next}while(u!==o);ur(a,t.memoizedState)||(bu=!0),t.memoizedState=a,null===t.baseQueue&&(t.baseState=a),n.lastRenderedState=a}return[a,r]}function Pa(){}function Oa(e,t){var n=ua,r=ba(),o=t(),a=!ur(r.memoizedState,o);if(a&&(r.memoizedState=o,bu=!0),r=r.queue,Na(ja.bind(null,n,r,e),[e]),r.getSnapshot!==t||a||null!==ca&&1&ca.memoizedState.tag){if(n.flags|=2048,Ca(9,_a.bind(null,n,r,o,t),void 0,null),null===Ts)throw Error(i(349));0!==(30&aa)||ka(n,t,o)}return o}function ka(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=ua.updateQueue)?(t={lastEffect:null,stores:null},ua.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function _a(e,t,n,r){t.value=n,t.getSnapshot=r,Ia(t)&&Ta(e)}function ja(e,t,n){return n((function(){Ia(t)&&Ta(e)}))}function Ia(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ur(e,n)}catch(r){return!0}}function Ta(e){var t=Ri(e,1);null!==t&&nc(t,e,1,-1)}function Ea(e){var t=ma();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:wa,lastRenderedState:e},t.queue=e,e=e.dispatch=Ya.bind(null,ua,e),[t.memoizedState,e]}function Ca(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=ua.updateQueue)?(t={lastEffect:null,stores:null},ua.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Ma(){return ba().memoizedState}function Aa(e,t,n,r){var o=ma();ua.flags|=e,o.memoizedState=Ca(1|t,n,void 0,void 0===r?null:r)}function Da(e,t,n,r){var o=ba();r=void 0===r?null:r;var i=void 0;if(null!==sa){var a=sa.memoizedState;if(i=a.destroy,null!==r&&va(r,a.deps))return void(o.memoizedState=Ca(t,n,i,r))}ua.flags|=e,o.memoizedState=Ca(1|t,n,i,r)}function Ra(e,t){return Aa(8390656,8,e,t)}function Na(e,t){return Da(2048,8,e,t)}function La(e,t){return Da(4,2,e,t)}function Ua(e,t){return Da(4,4,e,t)}function Fa(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Ba(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Da(4,4,Fa.bind(null,t,e),n)}function Va(){}function za(e,t){var n=ba();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&va(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Ha(e,t){var n=ba();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&va(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Ka(e,t,n){return 0===(21&aa)?(e.baseState&&(e.baseState=!1,bu=!0),e.memoizedState=n):(ur(n,t)||(n=vt(),ua.lanes|=n,Ns|=n,e.baseState=!0),t)}function Ga(e,t){var n=bt;bt=0!==n&&4>n?n:4,e(!0);var r=ia.transition;ia.transition={};try{e(!1),t()}finally{bt=n,ia.transition=r}}function qa(){return ba().memoizedState}function Wa(e,t,n){var r=tc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Xa(e))Za(t,n);else if(null!==(n=Di(e,t,n,r))){nc(n,e,r,ec()),$a(n,t,r)}}function Ya(e,t,n){var r=tc(e),o={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Xa(e))Za(t,o);else{var i=e.alternate;if(0===e.lanes&&(null===i||0===i.lanes)&&null!==(i=t.lastRenderedReducer))try{var a=t.lastRenderedState,u=i(a,n);if(o.hasEagerState=!0,o.eagerState=u,ur(u,a)){var s=t.interleaved;return null===s?(o.next=o,Ai(t)):(o.next=s.next,s.next=o),void(t.interleaved=o)}}catch(c){}null!==(n=Di(e,t,o,r))&&(nc(n,e,r,o=ec()),$a(n,t,r))}}function Xa(e){var t=e.alternate;return e===ua||null!==t&&t===ua}function Za(e,t){fa=la=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function $a(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,mt(e,n)}}var Qa={readContext:Ci,useCallback:ha,useContext:ha,useEffect:ha,useImperativeHandle:ha,useInsertionEffect:ha,useLayoutEffect:ha,useMemo:ha,useReducer:ha,useRef:ha,useState:ha,useDebugValue:ha,useDeferredValue:ha,useTransition:ha,useMutableSource:ha,useSyncExternalStore:ha,useId:ha,unstable_isNewReconciler:!1},Ja={readContext:Ci,useCallback:function(e,t){return ma().memoizedState=[e,void 0===t?null:t],e},useContext:Ci,useEffect:Ra,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Aa(4194308,4,Fa.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Aa(4194308,4,e,t)},useInsertionEffect:function(e,t){return Aa(4,2,e,t)},useMemo:function(e,t){var n=ma();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=ma();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Wa.bind(null,ua,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},ma().memoizedState=e},useState:Ea,useDebugValue:Va,useDeferredValue:function(e){return ma().memoizedState=e},useTransition:function(){var e=Ea(!1),t=e[0];return e=Ga.bind(null,e[1]),ma().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=ua,o=ma();if(ii){if(void 0===n)throw Error(i(407));n=n()}else{if(n=t(),null===Ts)throw Error(i(349));0!==(30&aa)||ka(r,t,n)}o.memoizedState=n;var a={value:n,getSnapshot:t};return o.queue=a,Ra(ja.bind(null,r,a,e),[e]),r.flags|=2048,Ca(9,_a.bind(null,r,a,n,t),void 0,null),n},useId:function(){var e=ma(),t=Ts.identifierPrefix;if(ii){var n=Qo;t=":"+t+"R"+(n=($o&~(1<<32-at($o)-1)).toString(32)+n),0<(n=da++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=pa++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},eu={readContext:Ci,useCallback:za,useContext:Ci,useEffect:Na,useImperativeHandle:Ba,useInsertionEffect:La,useLayoutEffect:Ua,useMemo:Ha,useReducer:Sa,useRef:Ma,useState:function(){return Sa(wa)},useDebugValue:Va,useDeferredValue:function(e){return Ka(ba(),sa.memoizedState,e)},useTransition:function(){return[Sa(wa)[0],ba().memoizedState]},useMutableSource:Pa,useSyncExternalStore:Oa,useId:qa,unstable_isNewReconciler:!1},tu={readContext:Ci,useCallback:za,useContext:Ci,useEffect:Na,useImperativeHandle:Ba,useInsertionEffect:La,useLayoutEffect:Ua,useMemo:Ha,useReducer:xa,useRef:Ma,useState:function(){return xa(wa)},useDebugValue:Va,useDeferredValue:function(e){var t=ba();return null===sa?t.memoizedState=e:Ka(t,sa.memoizedState,e)},useTransition:function(){return[xa(wa)[0],ba().memoizedState]},useMutableSource:Pa,useSyncExternalStore:Oa,useId:qa,unstable_isNewReconciler:!1};function nu(e,t){if(e&&e.defaultProps){for(var n in t=L({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function ru(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:L({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var ou={isMounted:function(e){return!!(e=e._reactInternals)&&ze(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=ec(),o=tc(e),i=Fi(r,o);i.payload=t,void 0!==n&&null!==n&&(i.callback=n),null!==(t=Bi(e,i,o))&&(nc(t,e,o,r),Vi(t,e,o))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=ec(),o=tc(e),i=Fi(r,o);i.tag=1,i.payload=t,void 0!==n&&null!==n&&(i.callback=n),null!==(t=Bi(e,i,o))&&(nc(t,e,o,r),Vi(t,e,o))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ec(),r=tc(e),o=Fi(n,r);o.tag=2,void 0!==t&&null!==t&&(o.callback=t),null!==(t=Bi(e,o,r))&&(nc(t,e,r,n),Vi(t,e,r))}};function iu(e,t,n,r,o,i,a){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,i,a):!t.prototype||!t.prototype.isPureReactComponent||(!sr(n,r)||!sr(o,i))}function au(e,t,n){var r=!1,o=Io,i=t.contextType;return"object"===typeof i&&null!==i?i=Ci(i):(o=Ao(t)?Co:To.current,i=(r=null!==(r=t.contextTypes)&&void 0!==r)?Mo(e,o):Io),t=new t(n,i),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=ou,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=o,e.__reactInternalMemoizedMaskedChildContext=i),t}function uu(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&ou.enqueueReplaceState(t,t.state,null)}function su(e,t,n,r){var o=e.stateNode;o.props=n,o.state=e.memoizedState,o.refs={},Li(e);var i=t.contextType;"object"===typeof i&&null!==i?o.context=Ci(i):(i=Ao(t)?Co:To.current,o.context=Mo(e,i)),o.state=e.memoizedState,"function"===typeof(i=t.getDerivedStateFromProps)&&(ru(e,t,i,n),o.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof o.getSnapshotBeforeUpdate||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||(t=o.state,"function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount(),t!==o.state&&ou.enqueueReplaceState(o,o.state,null),Hi(e,n,o,r),o.state=e.memoizedState),"function"===typeof o.componentDidMount&&(e.flags|=4194308)}function cu(e,t){try{var n="",r=t;do{n+=V(r),r=r.return}while(r);var o=n}catch(i){o="\nError generating stack: "+i.message+"\n"+i.stack}return{value:e,source:t,stack:o,digest:null}}function lu(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function fu(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var du="function"===typeof WeakMap?WeakMap:Map;function pu(e,t,n){(n=Fi(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Ks||(Ks=!0,Gs=r),fu(0,t)},n}function hu(e,t,n){(n=Fi(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var o=t.value;n.payload=function(){return r(o)},n.callback=function(){fu(0,t)}}var i=e.stateNode;return null!==i&&"function"===typeof i.componentDidCatch&&(n.callback=function(){fu(0,t),"function"!==typeof r&&(null===qs?qs=new Set([this]):qs.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function vu(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new du;var o=new Set;r.set(t,o)}else void 0===(o=r.get(t))&&(o=new Set,r.set(t,o));o.has(n)||(o.add(n),e=kc.bind(null,e,t,n),t.then(e,e))}function gu(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function yu(e,t,n,r,o){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Fi(-1,1)).tag=2,Bi(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=o,e)}var mu=w.ReactCurrentOwner,bu=!1;function wu(e,t,n,r){t.child=null===e?xi(t,null,n,r):Si(t,e.child,n,r)}function Su(e,t,n,r,o){n=n.render;var i=t.ref;return Ei(t,o),r=ga(e,t,n,r,i,o),n=ya(),null===e||bu?(ii&&n&&ti(t),t.flags|=1,wu(e,t,r,o),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o,Ku(e,t,o))}function xu(e,t,n,r,o){if(null===e){var i=n.type;return"function"!==typeof i||Mc(i)||void 0!==i.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Dc(n.type,null,r,t,t.mode,o)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=i,Pu(e,t,i,r,o))}if(i=e.child,0===(e.lanes&o)){var a=i.memoizedProps;if((n=null!==(n=n.compare)?n:sr)(a,r)&&e.ref===t.ref)return Ku(e,t,o)}return t.flags|=1,(e=Ac(i,r)).ref=t.ref,e.return=t,t.child=e}function Pu(e,t,n,r,o){if(null!==e){var i=e.memoizedProps;if(sr(i,r)&&e.ref===t.ref){if(bu=!1,t.pendingProps=r=i,0===(e.lanes&o))return t.lanes=e.lanes,Ku(e,t,o);0!==(131072&e.flags)&&(bu=!0)}}return _u(e,t,n,r,o)}function Ou(e,t,n){var r=t.pendingProps,o=r.children,i=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},jo(As,Ms),Ms|=n;else{if(0===(1073741824&n))return e=null!==i?i.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,jo(As,Ms),Ms|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==i?i.baseLanes:n,jo(As,Ms),Ms|=r}else null!==i?(r=i.baseLanes|n,t.memoizedState=null):r=n,jo(As,Ms),Ms|=r;return wu(e,t,o,n),t.child}function ku(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function _u(e,t,n,r,o){var i=Ao(n)?Co:To.current;return i=Mo(t,i),Ei(t,o),n=ga(e,t,n,r,i,o),r=ya(),null===e||bu?(ii&&r&&ti(t),t.flags|=1,wu(e,t,n,o),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o,Ku(e,t,o))}function ju(e,t,n,r,o){if(Ao(n)){var i=!0;Lo(t)}else i=!1;if(Ei(t,o),null===t.stateNode)Hu(e,t),au(t,n,r),su(t,n,r,o),r=!0;else if(null===e){var a=t.stateNode,u=t.memoizedProps;a.props=u;var s=a.context,c=n.contextType;"object"===typeof c&&null!==c?c=Ci(c):c=Mo(t,c=Ao(n)?Co:To.current);var l=n.getDerivedStateFromProps,f="function"===typeof l||"function"===typeof a.getSnapshotBeforeUpdate;f||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(u!==r||s!==c)&&uu(t,a,r,c),Ni=!1;var d=t.memoizedState;a.state=d,Hi(t,r,a,o),s=t.memoizedState,u!==r||d!==s||Eo.current||Ni?("function"===typeof l&&(ru(t,n,l,r),s=t.memoizedState),(u=Ni||iu(t,n,u,r,d,s,c))?(f||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||("function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"===typeof a.componentDidMount&&(t.flags|=4194308)):("function"===typeof a.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=s),a.props=r,a.state=s,a.context=c,r=u):("function"===typeof a.componentDidMount&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,Ui(e,t),u=t.memoizedProps,c=t.type===t.elementType?u:nu(t.type,u),a.props=c,f=t.pendingProps,d=a.context,"object"===typeof(s=n.contextType)&&null!==s?s=Ci(s):s=Mo(t,s=Ao(n)?Co:To.current);var p=n.getDerivedStateFromProps;(l="function"===typeof p||"function"===typeof a.getSnapshotBeforeUpdate)||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(u!==f||d!==s)&&uu(t,a,r,s),Ni=!1,d=t.memoizedState,a.state=d,Hi(t,r,a,o);var h=t.memoizedState;u!==f||d!==h||Eo.current||Ni?("function"===typeof p&&(ru(t,n,p,r),h=t.memoizedState),(c=Ni||iu(t,n,c,r,d,h,s)||!1)?(l||"function"!==typeof a.UNSAFE_componentWillUpdate&&"function"!==typeof a.componentWillUpdate||("function"===typeof a.componentWillUpdate&&a.componentWillUpdate(r,h,s),"function"===typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(r,h,s)),"function"===typeof a.componentDidUpdate&&(t.flags|=4),"function"===typeof a.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof a.componentDidUpdate||u===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||u===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=h),a.props=r,a.state=h,a.context=s,r=c):("function"!==typeof a.componentDidUpdate||u===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||u===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),r=!1)}return Iu(e,t,n,r,i,o)}function Iu(e,t,n,r,o,i){ku(e,t);var a=0!==(128&t.flags);if(!r&&!a)return o&&Uo(t,n,!1),Ku(e,t,i);r=t.stateNode,mu.current=t;var u=a&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&a?(t.child=Si(t,e.child,null,i),t.child=Si(t,null,u,i)):wu(e,t,u,i),t.memoizedState=r.state,o&&Uo(t,n,!0),t.child}function Tu(e){var t=e.stateNode;t.pendingContext?Ro(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Ro(0,t.context,!1),Zi(e,t.containerInfo)}function Eu(e,t,n,r,o){return hi(),vi(o),t.flags|=256,wu(e,t,n,r),t.child}var Cu,Mu,Au,Du,Ru={dehydrated:null,treeContext:null,retryLane:0};function Nu(e){return{baseLanes:e,cachePool:null,transitions:null}}function Lu(e,t,n){var r,o=t.pendingProps,a=ea.current,u=!1,s=0!==(128&t.flags);if((r=s)||(r=(null===e||null!==e.memoizedState)&&0!==(2&a)),r?(u=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(a|=1),jo(ea,1&a),null===e)return li(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(s=o.children,e=o.fallback,u?(o=t.mode,u=t.child,s={mode:"hidden",children:s},0===(1&o)&&null!==u?(u.childLanes=0,u.pendingProps=s):u=Nc(s,o,0,null),e=Rc(e,o,n,null),u.return=t,e.return=t,u.sibling=e,t.child=u,t.child.memoizedState=Nu(n),t.memoizedState=Ru,e):Uu(t,s));if(null!==(a=e.memoizedState)&&null!==(r=a.dehydrated))return function(e,t,n,r,o,a,u){if(n)return 256&t.flags?(t.flags&=-257,Fu(e,t,u,r=lu(Error(i(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(a=r.fallback,o=t.mode,r=Nc({mode:"visible",children:r.children},o,0,null),(a=Rc(a,o,u,null)).flags|=2,r.return=t,a.return=t,r.sibling=a,t.child=r,0!==(1&t.mode)&&Si(t,e.child,null,u),t.child.memoizedState=Nu(u),t.memoizedState=Ru,a);if(0===(1&t.mode))return Fu(e,t,u,null);if("$!"===o.data){if(r=o.nextSibling&&o.nextSibling.dataset)var s=r.dgst;return r=s,Fu(e,t,u,r=lu(a=Error(i(419)),r,void 0))}if(s=0!==(u&e.childLanes),bu||s){if(null!==(r=Ts)){switch(u&-u){case 4:o=2;break;case 16:o=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:o=32;break;case 536870912:o=268435456;break;default:o=0}0!==(o=0!==(o&(r.suspendedLanes|u))?0:o)&&o!==a.retryLane&&(a.retryLane=o,Ri(e,o),nc(r,e,o,-1))}return vc(),Fu(e,t,u,r=lu(Error(i(421))))}return"$?"===o.data?(t.flags|=128,t.child=e.child,t=jc.bind(null,e),o._reactRetry=t,null):(e=a.treeContext,oi=co(o.nextSibling),ri=t,ii=!0,ai=null,null!==e&&(Yo[Xo++]=$o,Yo[Xo++]=Qo,Yo[Xo++]=Zo,$o=e.id,Qo=e.overflow,Zo=t),t=Uu(t,r.children),t.flags|=4096,t)}(e,t,s,o,r,a,n);if(u){u=o.fallback,s=t.mode,r=(a=e.child).sibling;var c={mode:"hidden",children:o.children};return 0===(1&s)&&t.child!==a?((o=t.child).childLanes=0,o.pendingProps=c,t.deletions=null):(o=Ac(a,c)).subtreeFlags=14680064&a.subtreeFlags,null!==r?u=Ac(r,u):(u=Rc(u,s,n,null)).flags|=2,u.return=t,o.return=t,o.sibling=u,t.child=o,o=u,u=t.child,s=null===(s=e.child.memoizedState)?Nu(n):{baseLanes:s.baseLanes|n,cachePool:null,transitions:s.transitions},u.memoizedState=s,u.childLanes=e.childLanes&~n,t.memoizedState=Ru,o}return e=(u=e.child).sibling,o=Ac(u,{mode:"visible",children:o.children}),0===(1&t.mode)&&(o.lanes=n),o.return=t,o.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=o,t.memoizedState=null,o}function Uu(e,t){return(t=Nc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Fu(e,t,n,r){return null!==r&&vi(r),Si(t,e.child,null,n),(e=Uu(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Bu(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Ti(e.return,t,n)}function Vu(e,t,n,r,o){var i=e.memoizedState;null===i?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:o}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=o)}function zu(e,t,n){var r=t.pendingProps,o=r.revealOrder,i=r.tail;if(wu(e,t,r.children,n),0!==(2&(r=ea.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Bu(e,n,t);else if(19===e.tag)Bu(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(jo(ea,r),0===(1&t.mode))t.memoizedState=null;else switch(o){case"forwards":for(n=t.child,o=null;null!==n;)null!==(e=n.alternate)&&null===ta(e)&&(o=n),n=n.sibling;null===(n=o)?(o=t.child,t.child=null):(o=n.sibling,n.sibling=null),Vu(t,!1,o,n,i);break;case"backwards":for(n=null,o=t.child,t.child=null;null!==o;){if(null!==(e=o.alternate)&&null===ta(e)){t.child=o;break}e=o.sibling,o.sibling=n,n=o,o=e}Vu(t,!0,n,null,i);break;case"together":Vu(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Hu(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ku(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Ns|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(i(153));if(null!==t.child){for(n=Ac(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Ac(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Gu(e,t){if(!ii)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function qu(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var o=e.child;null!==o;)n|=o.lanes|o.childLanes,r|=14680064&o.subtreeFlags,r|=14680064&o.flags,o.return=e,o=o.sibling;else for(o=e.child;null!==o;)n|=o.lanes|o.childLanes,r|=o.subtreeFlags,r|=o.flags,o.return=e,o=o.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Wu(e,t,n){var r=t.pendingProps;switch(ni(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return qu(t),null;case 1:case 17:return Ao(t.type)&&Do(),qu(t),null;case 3:return r=t.stateNode,$i(),_o(Eo),_o(To),ra(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(di(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==ai&&(ac(ai),ai=null))),Mu(e,t),qu(t),null;case 5:Ji(t);var o=Xi(Yi.current);if(n=t.type,null!==e&&null!=t.stateNode)Au(e,t,n,r,o),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(i(166));return qu(t),null}if(e=Xi(qi.current),di(t)){r=t.stateNode,n=t.type;var a=t.memoizedProps;switch(r[po]=t,r[ho]=a,e=0!==(1&t.mode),n){case"dialog":Fr("cancel",r),Fr("close",r);break;case"iframe":case"object":case"embed":Fr("load",r);break;case"video":case"audio":for(o=0;o<Rr.length;o++)Fr(Rr[o],r);break;case"source":Fr("error",r);break;case"img":case"image":case"link":Fr("error",r),Fr("load",r);break;case"details":Fr("toggle",r);break;case"input":Z(r,a),Fr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!a.multiple},Fr("invalid",r);break;case"textarea":oe(r,a),Fr("invalid",r)}for(var s in me(n,a),o=null,a)if(a.hasOwnProperty(s)){var c=a[s];"children"===s?"string"===typeof c?r.textContent!==c&&(!0!==a.suppressHydrationWarning&&Qr(r.textContent,c,e),o=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==a.suppressHydrationWarning&&Qr(r.textContent,c,e),o=["children",""+c]):u.hasOwnProperty(s)&&null!=c&&"onScroll"===s&&Fr("scroll",r)}switch(n){case"input":q(r),J(r,a,!0);break;case"textarea":q(r),ae(r);break;case"select":case"option":break;default:"function"===typeof a.onClick&&(r.onclick=Jr)}r=o,t.updateQueue=r,null!==r&&(t.flags|=4)}else{s=9===o.nodeType?o:o.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ue(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=s.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=s.createElement(n,{is:r.is}):(e=s.createElement(n),"select"===n&&(s=e,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):e=s.createElementNS(e,n),e[po]=t,e[ho]=r,Cu(e,t,!1,!1),t.stateNode=e;e:{switch(s=be(n,r),n){case"dialog":Fr("cancel",e),Fr("close",e),o=r;break;case"iframe":case"object":case"embed":Fr("load",e),o=r;break;case"video":case"audio":for(o=0;o<Rr.length;o++)Fr(Rr[o],e);o=r;break;case"source":Fr("error",e),o=r;break;case"img":case"image":case"link":Fr("error",e),Fr("load",e),o=r;break;case"details":Fr("toggle",e),o=r;break;case"input":Z(e,r),o=X(e,r),Fr("invalid",e);break;case"option":default:o=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},o=L({},r,{value:void 0}),Fr("invalid",e);break;case"textarea":oe(e,r),o=re(e,r),Fr("invalid",e)}for(a in me(n,o),c=o)if(c.hasOwnProperty(a)){var l=c[a];"style"===a?ge(e,l):"dangerouslySetInnerHTML"===a?null!=(l=l?l.__html:void 0)&&fe(e,l):"children"===a?"string"===typeof l?("textarea"!==n||""!==l)&&de(e,l):"number"===typeof l&&de(e,""+l):"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&"autoFocus"!==a&&(u.hasOwnProperty(a)?null!=l&&"onScroll"===a&&Fr("scroll",e):null!=l&&b(e,a,l,s))}switch(n){case"input":q(e),J(e,r,!1);break;case"textarea":q(e),ae(e);break;case"option":null!=r.value&&e.setAttribute("value",""+K(r.value));break;case"select":e.multiple=!!r.multiple,null!=(a=r.value)?ne(e,!!r.multiple,a,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof o.onClick&&(e.onclick=Jr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return qu(t),null;case 6:if(e&&null!=t.stateNode)Du(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(i(166));if(n=Xi(Yi.current),Xi(qi.current),di(t)){if(r=t.stateNode,n=t.memoizedProps,r[po]=t,(a=r.nodeValue!==n)&&null!==(e=ri))switch(e.tag){case 3:Qr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Qr(r.nodeValue,n,0!==(1&e.mode))}a&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[po]=t,t.stateNode=r}return qu(t),null;case 13:if(_o(ea),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(ii&&null!==oi&&0!==(1&t.mode)&&0===(128&t.flags))pi(),hi(),t.flags|=98560,a=!1;else if(a=di(t),null!==r&&null!==r.dehydrated){if(null===e){if(!a)throw Error(i(318));if(!(a=null!==(a=t.memoizedState)?a.dehydrated:null))throw Error(i(317));a[po]=t}else hi(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;qu(t),a=!1}else null!==ai&&(ac(ai),ai=null),a=!0;if(!a)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&ea.current)?0===Ds&&(Ds=3):vc())),null!==t.updateQueue&&(t.flags|=4),qu(t),null);case 4:return $i(),Mu(e,t),null===e&&zr(t.stateNode.containerInfo),qu(t),null;case 10:return Ii(t.type._context),qu(t),null;case 19:if(_o(ea),null===(a=t.memoizedState))return qu(t),null;if(r=0!==(128&t.flags),null===(s=a.rendering))if(r)Gu(a,!1);else{if(0!==Ds||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(s=ta(e))){for(t.flags|=128,Gu(a,!1),null!==(r=s.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(a=n).flags&=14680066,null===(s=a.alternate)?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=s.childLanes,a.lanes=s.lanes,a.child=s.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=s.memoizedProps,a.memoizedState=s.memoizedState,a.updateQueue=s.updateQueue,a.type=s.type,e=s.dependencies,a.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return jo(ea,1&ea.current|2),t.child}e=e.sibling}null!==a.tail&&$e()>zs&&(t.flags|=128,r=!0,Gu(a,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=ta(s))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Gu(a,!0),null===a.tail&&"hidden"===a.tailMode&&!s.alternate&&!ii)return qu(t),null}else 2*$e()-a.renderingStartTime>zs&&1073741824!==n&&(t.flags|=128,r=!0,Gu(a,!1),t.lanes=4194304);a.isBackwards?(s.sibling=t.child,t.child=s):(null!==(n=a.last)?n.sibling=s:t.child=s,a.last=s)}return null!==a.tail?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=$e(),t.sibling=null,n=ea.current,jo(ea,r?1&n|2:1&n),t):(qu(t),null);case 22:case 23:return fc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Ms)&&(qu(t),6&t.subtreeFlags&&(t.flags|=8192)):qu(t),null;case 24:case 25:return null}throw Error(i(156,t.tag))}function Yu(e,t){switch(ni(t),t.tag){case 1:return Ao(t.type)&&Do(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return $i(),_o(Eo),_o(To),ra(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return Ji(t),null;case 13:if(_o(ea),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(i(340));hi()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return _o(ea),null;case 4:return $i(),null;case 10:return Ii(t.type._context),null;case 22:case 23:return fc(),null;default:return null}}Cu=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Mu=function(){},Au=function(e,t,n,r){var o=e.memoizedProps;if(o!==r){e=t.stateNode,Xi(qi.current);var i,a=null;switch(n){case"input":o=X(e,o),r=X(e,r),a=[];break;case"select":o=L({},o,{value:void 0}),r=L({},r,{value:void 0}),a=[];break;case"textarea":o=re(e,o),r=re(e,r),a=[];break;default:"function"!==typeof o.onClick&&"function"===typeof r.onClick&&(e.onclick=Jr)}for(l in me(n,r),n=null,o)if(!r.hasOwnProperty(l)&&o.hasOwnProperty(l)&&null!=o[l])if("style"===l){var s=o[l];for(i in s)s.hasOwnProperty(i)&&(n||(n={}),n[i]="")}else"dangerouslySetInnerHTML"!==l&&"children"!==l&&"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&"autoFocus"!==l&&(u.hasOwnProperty(l)?a||(a=[]):(a=a||[]).push(l,null));for(l in r){var c=r[l];if(s=null!=o?o[l]:void 0,r.hasOwnProperty(l)&&c!==s&&(null!=c||null!=s))if("style"===l)if(s){for(i in s)!s.hasOwnProperty(i)||c&&c.hasOwnProperty(i)||(n||(n={}),n[i]="");for(i in c)c.hasOwnProperty(i)&&s[i]!==c[i]&&(n||(n={}),n[i]=c[i])}else n||(a||(a=[]),a.push(l,n)),n=c;else"dangerouslySetInnerHTML"===l?(c=c?c.__html:void 0,s=s?s.__html:void 0,null!=c&&s!==c&&(a=a||[]).push(l,c)):"children"===l?"string"!==typeof c&&"number"!==typeof c||(a=a||[]).push(l,""+c):"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&(u.hasOwnProperty(l)?(null!=c&&"onScroll"===l&&Fr("scroll",e),a||s===c||(a=[])):(a=a||[]).push(l,c))}n&&(a=a||[]).push("style",n);var l=a;(t.updateQueue=l)&&(t.flags|=4)}},Du=function(e,t,n,r){n!==r&&(t.flags|=4)};var Xu=!1,Zu=!1,$u="function"===typeof WeakSet?WeakSet:Set,Qu=null;function Ju(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Oc(e,t,r)}else n.current=null}function es(e,t,n){try{n()}catch(r){Oc(e,t,r)}}var ts=!1;function ns(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var o=r=r.next;do{if((o.tag&e)===e){var i=o.destroy;o.destroy=void 0,void 0!==i&&es(t,n,i)}o=o.next}while(o!==r)}}function rs(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function os(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function is(e){var t=e.alternate;null!==t&&(e.alternate=null,is(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[po],delete t[ho],delete t[go],delete t[yo],delete t[mo])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function as(e){return 5===e.tag||3===e.tag||4===e.tag}function us(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||as(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ss(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Jr));else if(4!==r&&null!==(e=e.child))for(ss(e,t,n),e=e.sibling;null!==e;)ss(e,t,n),e=e.sibling}function cs(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(cs(e,t,n),e=e.sibling;null!==e;)cs(e,t,n),e=e.sibling}var ls=null,fs=!1;function ds(e,t,n){for(n=n.child;null!==n;)ps(e,t,n),n=n.sibling}function ps(e,t,n){if(it&&"function"===typeof it.onCommitFiberUnmount)try{it.onCommitFiberUnmount(ot,n)}catch(u){}switch(n.tag){case 5:Zu||Ju(n,t);case 6:var r=ls,o=fs;ls=null,ds(e,t,n),fs=o,null!==(ls=r)&&(fs?(e=ls,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):ls.removeChild(n.stateNode));break;case 18:null!==ls&&(fs?(e=ls,n=n.stateNode,8===e.nodeType?so(e.parentNode,n):1===e.nodeType&&so(e,n),zt(e)):so(ls,n.stateNode));break;case 4:r=ls,o=fs,ls=n.stateNode.containerInfo,fs=!0,ds(e,t,n),ls=r,fs=o;break;case 0:case 11:case 14:case 15:if(!Zu&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){o=r=r.next;do{var i=o,a=i.destroy;i=i.tag,void 0!==a&&(0!==(2&i)||0!==(4&i))&&es(n,t,a),o=o.next}while(o!==r)}ds(e,t,n);break;case 1:if(!Zu&&(Ju(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(u){Oc(n,t,u)}ds(e,t,n);break;case 21:ds(e,t,n);break;case 22:1&n.mode?(Zu=(r=Zu)||null!==n.memoizedState,ds(e,t,n),Zu=r):ds(e,t,n);break;default:ds(e,t,n)}}function hs(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new $u),t.forEach((function(t){var r=Ic.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function vs(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var o=n[r];try{var a=e,u=t,s=u;e:for(;null!==s;){switch(s.tag){case 5:ls=s.stateNode,fs=!1;break e;case 3:case 4:ls=s.stateNode.containerInfo,fs=!0;break e}s=s.return}if(null===ls)throw Error(i(160));ps(a,u,o),ls=null,fs=!1;var c=o.alternate;null!==c&&(c.return=null),o.return=null}catch(l){Oc(o,t,l)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)gs(t,e),t=t.sibling}function gs(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(vs(t,e),ys(e),4&r){try{ns(3,e,e.return),rs(3,e)}catch(g){Oc(e,e.return,g)}try{ns(5,e,e.return)}catch(g){Oc(e,e.return,g)}}break;case 1:vs(t,e),ys(e),512&r&&null!==n&&Ju(n,n.return);break;case 5:if(vs(t,e),ys(e),512&r&&null!==n&&Ju(n,n.return),32&e.flags){var o=e.stateNode;try{de(o,"")}catch(g){Oc(e,e.return,g)}}if(4&r&&null!=(o=e.stateNode)){var a=e.memoizedProps,u=null!==n?n.memoizedProps:a,s=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===s&&"radio"===a.type&&null!=a.name&&$(o,a),be(s,u);var l=be(s,a);for(u=0;u<c.length;u+=2){var f=c[u],d=c[u+1];"style"===f?ge(o,d):"dangerouslySetInnerHTML"===f?fe(o,d):"children"===f?de(o,d):b(o,f,d,l)}switch(s){case"input":Q(o,a);break;case"textarea":ie(o,a);break;case"select":var p=o._wrapperState.wasMultiple;o._wrapperState.wasMultiple=!!a.multiple;var h=a.value;null!=h?ne(o,!!a.multiple,h,!1):p!==!!a.multiple&&(null!=a.defaultValue?ne(o,!!a.multiple,a.defaultValue,!0):ne(o,!!a.multiple,a.multiple?[]:"",!1))}o[ho]=a}catch(g){Oc(e,e.return,g)}}break;case 6:if(vs(t,e),ys(e),4&r){if(null===e.stateNode)throw Error(i(162));o=e.stateNode,a=e.memoizedProps;try{o.nodeValue=a}catch(g){Oc(e,e.return,g)}}break;case 3:if(vs(t,e),ys(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{zt(t.containerInfo)}catch(g){Oc(e,e.return,g)}break;case 4:default:vs(t,e),ys(e);break;case 13:vs(t,e),ys(e),8192&(o=e.child).flags&&(a=null!==o.memoizedState,o.stateNode.isHidden=a,!a||null!==o.alternate&&null!==o.alternate.memoizedState||(Vs=$e())),4&r&&hs(e);break;case 22:if(f=null!==n&&null!==n.memoizedState,1&e.mode?(Zu=(l=Zu)||f,vs(t,e),Zu=l):vs(t,e),ys(e),8192&r){if(l=null!==e.memoizedState,(e.stateNode.isHidden=l)&&!f&&0!==(1&e.mode))for(Qu=e,f=e.child;null!==f;){for(d=Qu=f;null!==Qu;){switch(h=(p=Qu).child,p.tag){case 0:case 11:case 14:case 15:ns(4,p,p.return);break;case 1:Ju(p,p.return);var v=p.stateNode;if("function"===typeof v.componentWillUnmount){r=p,n=p.return;try{t=r,v.props=t.memoizedProps,v.state=t.memoizedState,v.componentWillUnmount()}catch(g){Oc(r,n,g)}}break;case 5:Ju(p,p.return);break;case 22:if(null!==p.memoizedState){Ss(d);continue}}null!==h?(h.return=p,Qu=h):Ss(d)}f=f.sibling}e:for(f=null,d=e;;){if(5===d.tag){if(null===f){f=d;try{o=d.stateNode,l?"function"===typeof(a=o.style).setProperty?a.setProperty("display","none","important"):a.display="none":(s=d.stateNode,u=void 0!==(c=d.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,s.style.display=ve("display",u))}catch(g){Oc(e,e.return,g)}}}else if(6===d.tag){if(null===f)try{d.stateNode.nodeValue=l?"":d.memoizedProps}catch(g){Oc(e,e.return,g)}}else if((22!==d.tag&&23!==d.tag||null===d.memoizedState||d===e)&&null!==d.child){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;null===d.sibling;){if(null===d.return||d.return===e)break e;f===d&&(f=null),d=d.return}f===d&&(f=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:vs(t,e),ys(e),4&r&&hs(e);case 21:}}function ys(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(as(n)){var r=n;break e}n=n.return}throw Error(i(160))}switch(r.tag){case 5:var o=r.stateNode;32&r.flags&&(de(o,""),r.flags&=-33),cs(e,us(e),o);break;case 3:case 4:var a=r.stateNode.containerInfo;ss(e,us(e),a);break;default:throw Error(i(161))}}catch(u){Oc(e,e.return,u)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function ms(e,t,n){Qu=e,bs(e,t,n)}function bs(e,t,n){for(var r=0!==(1&e.mode);null!==Qu;){var o=Qu,i=o.child;if(22===o.tag&&r){var a=null!==o.memoizedState||Xu;if(!a){var u=o.alternate,s=null!==u&&null!==u.memoizedState||Zu;u=Xu;var c=Zu;if(Xu=a,(Zu=s)&&!c)for(Qu=o;null!==Qu;)s=(a=Qu).child,22===a.tag&&null!==a.memoizedState?xs(o):null!==s?(s.return=a,Qu=s):xs(o);for(;null!==i;)Qu=i,bs(i,t,n),i=i.sibling;Qu=o,Xu=u,Zu=c}ws(e)}else 0!==(8772&o.subtreeFlags)&&null!==i?(i.return=o,Qu=i):ws(e)}}function ws(e){for(;null!==Qu;){var t=Qu;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Zu||rs(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Zu)if(null===n)r.componentDidMount();else{var o=t.elementType===t.type?n.memoizedProps:nu(t.type,n.memoizedProps);r.componentDidUpdate(o,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;null!==a&&Ki(t,a,r);break;case 3:var u=t.updateQueue;if(null!==u){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Ki(t,u,n)}break;case 5:var s=t.stateNode;if(null===n&&4&t.flags){n=s;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var l=t.alternate;if(null!==l){var f=l.memoizedState;if(null!==f){var d=f.dehydrated;null!==d&&zt(d)}}}break;default:throw Error(i(163))}Zu||512&t.flags&&os(t)}catch(p){Oc(t,t.return,p)}}if(t===e){Qu=null;break}if(null!==(n=t.sibling)){n.return=t.return,Qu=n;break}Qu=t.return}}function Ss(e){for(;null!==Qu;){var t=Qu;if(t===e){Qu=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Qu=n;break}Qu=t.return}}function xs(e){for(;null!==Qu;){var t=Qu;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{rs(4,t)}catch(s){Oc(t,n,s)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var o=t.return;try{r.componentDidMount()}catch(s){Oc(t,o,s)}}var i=t.return;try{os(t)}catch(s){Oc(t,i,s)}break;case 5:var a=t.return;try{os(t)}catch(s){Oc(t,a,s)}}}catch(s){Oc(t,t.return,s)}if(t===e){Qu=null;break}var u=t.sibling;if(null!==u){u.return=t.return,Qu=u;break}Qu=t.return}}var Ps,Os=Math.ceil,ks=w.ReactCurrentDispatcher,_s=w.ReactCurrentOwner,js=w.ReactCurrentBatchConfig,Is=0,Ts=null,Es=null,Cs=0,Ms=0,As=ko(0),Ds=0,Rs=null,Ns=0,Ls=0,Us=0,Fs=null,Bs=null,Vs=0,zs=1/0,Hs=null,Ks=!1,Gs=null,qs=null,Ws=!1,Ys=null,Xs=0,Zs=0,$s=null,Qs=-1,Js=0;function ec(){return 0!==(6&Is)?$e():-1!==Qs?Qs:Qs=$e()}function tc(e){return 0===(1&e.mode)?1:0!==(2&Is)&&0!==Cs?Cs&-Cs:null!==gi.transition?(0===Js&&(Js=vt()),Js):0!==(e=bt)?e:e=void 0===(e=window.event)?16:Zt(e.type)}function nc(e,t,n,r){if(50<Zs)throw Zs=0,$s=null,Error(i(185));yt(e,n,r),0!==(2&Is)&&e===Ts||(e===Ts&&(0===(2&Is)&&(Ls|=n),4===Ds&&uc(e,Cs)),rc(e,r),1===n&&0===Is&&0===(1&t.mode)&&(zs=$e()+500,Bo&&Ho()))}function rc(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,o=e.expirationTimes,i=e.pendingLanes;0<i;){var a=31-at(i),u=1<<a,s=o[a];-1===s?0!==(u&n)&&0===(u&r)||(o[a]=pt(u,t)):s<=t&&(e.expiredLanes|=u),i&=~u}}(e,t);var r=dt(e,e===Ts?Cs:0);if(0===r)null!==n&&Ye(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Ye(n),1===t)0===e.tag?function(e){Bo=!0,zo(e)}(sc.bind(null,e)):zo(sc.bind(null,e)),ao((function(){0===(6&Is)&&Ho()})),n=null;else{switch(wt(r)){case 1:n=Je;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Tc(n,oc.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function oc(e,t){if(Qs=-1,Js=0,0!==(6&Is))throw Error(i(327));var n=e.callbackNode;if(xc()&&e.callbackNode!==n)return null;var r=dt(e,e===Ts?Cs:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=gc(e,r);else{t=r;var o=Is;Is|=2;var a=hc();for(Ts===e&&Cs===t||(Hs=null,zs=$e()+500,dc(e,t));;)try{mc();break}catch(s){pc(e,s)}ji(),ks.current=a,Is=o,null!==Es?t=0:(Ts=null,Cs=0,t=Ds)}if(0!==t){if(2===t&&(0!==(o=ht(e))&&(r=o,t=ic(e,o))),1===t)throw n=Rs,dc(e,0),uc(e,r),rc(e,$e()),n;if(6===t)uc(e,r);else{if(o=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var o=n[r],i=o.getSnapshot;o=o.value;try{if(!ur(i(),o))return!1}catch(u){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(o)&&(2===(t=gc(e,r))&&(0!==(a=ht(e))&&(r=a,t=ic(e,a))),1===t))throw n=Rs,dc(e,0),uc(e,r),rc(e,$e()),n;switch(e.finishedWork=o,e.finishedLanes=r,t){case 0:case 1:throw Error(i(345));case 2:case 5:Sc(e,Bs,Hs);break;case 3:if(uc(e,r),(130023424&r)===r&&10<(t=Vs+500-$e())){if(0!==dt(e,0))break;if(((o=e.suspendedLanes)&r)!==r){ec(),e.pingedLanes|=e.suspendedLanes&o;break}e.timeoutHandle=ro(Sc.bind(null,e,Bs,Hs),t);break}Sc(e,Bs,Hs);break;case 4:if(uc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,o=-1;0<r;){var u=31-at(r);a=1<<u,(u=t[u])>o&&(o=u),r&=~a}if(r=o,10<(r=(120>(r=$e()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Os(r/1960))-r)){e.timeoutHandle=ro(Sc.bind(null,e,Bs,Hs),r);break}Sc(e,Bs,Hs);break;default:throw Error(i(329))}}}return rc(e,$e()),e.callbackNode===n?oc.bind(null,e):null}function ic(e,t){var n=Fs;return e.current.memoizedState.isDehydrated&&(dc(e,t).flags|=256),2!==(e=gc(e,t))&&(t=Bs,Bs=n,null!==t&&ac(t)),e}function ac(e){null===Bs?Bs=e:Bs.push.apply(Bs,e)}function uc(e,t){for(t&=~Us,t&=~Ls,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-at(t),r=1<<n;e[n]=-1,t&=~r}}function sc(e){if(0!==(6&Is))throw Error(i(327));xc();var t=dt(e,0);if(0===(1&t))return rc(e,$e()),null;var n=gc(e,t);if(0!==e.tag&&2===n){var r=ht(e);0!==r&&(t=r,n=ic(e,r))}if(1===n)throw n=Rs,dc(e,0),uc(e,t),rc(e,$e()),n;if(6===n)throw Error(i(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Sc(e,Bs,Hs),rc(e,$e()),null}function cc(e,t){var n=Is;Is|=1;try{return e(t)}finally{0===(Is=n)&&(zs=$e()+500,Bo&&Ho())}}function lc(e){null!==Ys&&0===Ys.tag&&0===(6&Is)&&xc();var t=Is;Is|=1;var n=js.transition,r=bt;try{if(js.transition=null,bt=1,e)return e()}finally{bt=r,js.transition=n,0===(6&(Is=t))&&Ho()}}function fc(){Ms=As.current,_o(As)}function dc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,oo(n)),null!==Es)for(n=Es.return;null!==n;){var r=n;switch(ni(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Do();break;case 3:$i(),_o(Eo),_o(To),ra();break;case 5:Ji(r);break;case 4:$i();break;case 13:case 19:_o(ea);break;case 10:Ii(r.type._context);break;case 22:case 23:fc()}n=n.return}if(Ts=e,Es=e=Ac(e.current,null),Cs=Ms=t,Ds=0,Rs=null,Us=Ls=Ns=0,Bs=Fs=null,null!==Mi){for(t=0;t<Mi.length;t++)if(null!==(r=(n=Mi[t]).interleaved)){n.interleaved=null;var o=r.next,i=n.pending;if(null!==i){var a=i.next;i.next=o,r.next=a}n.pending=r}Mi=null}return e}function pc(e,t){for(;;){var n=Es;try{if(ji(),oa.current=Qa,la){for(var r=ua.memoizedState;null!==r;){var o=r.queue;null!==o&&(o.pending=null),r=r.next}la=!1}if(aa=0,ca=sa=ua=null,fa=!1,da=0,_s.current=null,null===n||null===n.return){Ds=1,Rs=t,Es=null;break}e:{var a=e,u=n.return,s=n,c=t;if(t=Cs,s.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var l=c,f=s,d=f.tag;if(0===(1&f.mode)&&(0===d||11===d||15===d)){var p=f.alternate;p?(f.updateQueue=p.updateQueue,f.memoizedState=p.memoizedState,f.lanes=p.lanes):(f.updateQueue=null,f.memoizedState=null)}var h=gu(u);if(null!==h){h.flags&=-257,yu(h,u,s,0,t),1&h.mode&&vu(a,l,t),c=l;var v=(t=h).updateQueue;if(null===v){var g=new Set;g.add(c),t.updateQueue=g}else v.add(c);break e}if(0===(1&t)){vu(a,l,t),vc();break e}c=Error(i(426))}else if(ii&&1&s.mode){var y=gu(u);if(null!==y){0===(65536&y.flags)&&(y.flags|=256),yu(y,u,s,0,t),vi(cu(c,s));break e}}a=c=cu(c,s),4!==Ds&&(Ds=2),null===Fs?Fs=[a]:Fs.push(a),a=u;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t,zi(a,pu(0,c,t));break e;case 1:s=c;var m=a.type,b=a.stateNode;if(0===(128&a.flags)&&("function"===typeof m.getDerivedStateFromError||null!==b&&"function"===typeof b.componentDidCatch&&(null===qs||!qs.has(b)))){a.flags|=65536,t&=-t,a.lanes|=t,zi(a,hu(a,s,t));break e}}a=a.return}while(null!==a)}wc(n)}catch(w){t=w,Es===n&&null!==n&&(Es=n=n.return);continue}break}}function hc(){var e=ks.current;return ks.current=Qa,null===e?Qa:e}function vc(){0!==Ds&&3!==Ds&&2!==Ds||(Ds=4),null===Ts||0===(268435455&Ns)&&0===(268435455&Ls)||uc(Ts,Cs)}function gc(e,t){var n=Is;Is|=2;var r=hc();for(Ts===e&&Cs===t||(Hs=null,dc(e,t));;)try{yc();break}catch(o){pc(e,o)}if(ji(),Is=n,ks.current=r,null!==Es)throw Error(i(261));return Ts=null,Cs=0,Ds}function yc(){for(;null!==Es;)bc(Es)}function mc(){for(;null!==Es&&!Xe();)bc(Es)}function bc(e){var t=Ps(e.alternate,e,Ms);e.memoizedProps=e.pendingProps,null===t?wc(e):Es=t,_s.current=null}function wc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Wu(n,t,Ms)))return void(Es=n)}else{if(null!==(n=Yu(n,t)))return n.flags&=32767,void(Es=n);if(null===e)return Ds=6,void(Es=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Es=t);Es=t=e}while(null!==t);0===Ds&&(Ds=5)}function Sc(e,t,n){var r=bt,o=js.transition;try{js.transition=null,bt=1,function(e,t,n,r){do{xc()}while(null!==Ys);if(0!==(6&Is))throw Error(i(327));n=e.finishedWork;var o=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(i(177));e.callbackNode=null,e.callbackPriority=0;var a=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var o=31-at(n),i=1<<o;t[o]=0,r[o]=-1,e[o]=-1,n&=~i}}(e,a),e===Ts&&(Es=Ts=null,Cs=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Ws||(Ws=!0,Tc(tt,(function(){return xc(),null}))),a=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||a){a=js.transition,js.transition=null;var u=bt;bt=1;var s=Is;Is|=4,_s.current=null,function(e,t){if(eo=Kt,pr(e=dr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var o=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{n.nodeType,a.nodeType}catch(S){n=null;break e}var u=0,s=-1,c=-1,l=0,f=0,d=e,p=null;t:for(;;){for(var h;d!==n||0!==o&&3!==d.nodeType||(s=u+o),d!==a||0!==r&&3!==d.nodeType||(c=u+r),3===d.nodeType&&(u+=d.nodeValue.length),null!==(h=d.firstChild);)p=d,d=h;for(;;){if(d===e)break t;if(p===n&&++l===o&&(s=u),p===a&&++f===r&&(c=u),null!==(h=d.nextSibling))break;p=(d=p).parentNode}d=h}n=-1===s||-1===c?null:{start:s,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(to={focusedElem:e,selectionRange:n},Kt=!1,Qu=t;null!==Qu;)if(e=(t=Qu).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Qu=e;else for(;null!==Qu;){t=Qu;try{var v=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==v){var g=v.memoizedProps,y=v.memoizedState,m=t.stateNode,b=m.getSnapshotBeforeUpdate(t.elementType===t.type?g:nu(t.type,g),y);m.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var w=t.stateNode.containerInfo;1===w.nodeType?w.textContent="":9===w.nodeType&&w.documentElement&&w.removeChild(w.documentElement);break;default:throw Error(i(163))}}catch(S){Oc(t,t.return,S)}if(null!==(e=t.sibling)){e.return=t.return,Qu=e;break}Qu=t.return}v=ts,ts=!1}(e,n),gs(n,e),hr(to),Kt=!!eo,to=eo=null,e.current=n,ms(n,e,o),Ze(),Is=s,bt=u,js.transition=a}else e.current=n;if(Ws&&(Ws=!1,Ys=e,Xs=o),a=e.pendingLanes,0===a&&(qs=null),function(e){if(it&&"function"===typeof it.onCommitFiberRoot)try{it.onCommitFiberRoot(ot,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),rc(e,$e()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)o=t[n],r(o.value,{componentStack:o.stack,digest:o.digest});if(Ks)throw Ks=!1,e=Gs,Gs=null,e;0!==(1&Xs)&&0!==e.tag&&xc(),a=e.pendingLanes,0!==(1&a)?e===$s?Zs++:(Zs=0,$s=e):Zs=0,Ho()}(e,t,n,r)}finally{js.transition=o,bt=r}return null}function xc(){if(null!==Ys){var e=wt(Xs),t=js.transition,n=bt;try{if(js.transition=null,bt=16>e?16:e,null===Ys)var r=!1;else{if(e=Ys,Ys=null,Xs=0,0!==(6&Is))throw Error(i(331));var o=Is;for(Is|=4,Qu=e.current;null!==Qu;){var a=Qu,u=a.child;if(0!==(16&Qu.flags)){var s=a.deletions;if(null!==s){for(var c=0;c<s.length;c++){var l=s[c];for(Qu=l;null!==Qu;){var f=Qu;switch(f.tag){case 0:case 11:case 15:ns(8,f,a)}var d=f.child;if(null!==d)d.return=f,Qu=d;else for(;null!==Qu;){var p=(f=Qu).sibling,h=f.return;if(is(f),f===l){Qu=null;break}if(null!==p){p.return=h,Qu=p;break}Qu=h}}}var v=a.alternate;if(null!==v){var g=v.child;if(null!==g){v.child=null;do{var y=g.sibling;g.sibling=null,g=y}while(null!==g)}}Qu=a}}if(0!==(2064&a.subtreeFlags)&&null!==u)u.return=a,Qu=u;else e:for(;null!==Qu;){if(0!==(2048&(a=Qu).flags))switch(a.tag){case 0:case 11:case 15:ns(9,a,a.return)}var m=a.sibling;if(null!==m){m.return=a.return,Qu=m;break e}Qu=a.return}}var b=e.current;for(Qu=b;null!==Qu;){var w=(u=Qu).child;if(0!==(2064&u.subtreeFlags)&&null!==w)w.return=u,Qu=w;else e:for(u=b;null!==Qu;){if(0!==(2048&(s=Qu).flags))try{switch(s.tag){case 0:case 11:case 15:rs(9,s)}}catch(x){Oc(s,s.return,x)}if(s===u){Qu=null;break e}var S=s.sibling;if(null!==S){S.return=s.return,Qu=S;break e}Qu=s.return}}if(Is=o,Ho(),it&&"function"===typeof it.onPostCommitFiberRoot)try{it.onPostCommitFiberRoot(ot,e)}catch(x){}r=!0}return r}finally{bt=n,js.transition=t}}return!1}function Pc(e,t,n){e=Bi(e,t=pu(0,t=cu(n,t),1),1),t=ec(),null!==e&&(yt(e,1,t),rc(e,t))}function Oc(e,t,n){if(3===e.tag)Pc(e,e,n);else for(;null!==t;){if(3===t.tag){Pc(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===qs||!qs.has(r))){t=Bi(t,e=hu(t,e=cu(n,e),1),1),e=ec(),null!==t&&(yt(t,1,e),rc(t,e));break}}t=t.return}}function kc(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=ec(),e.pingedLanes|=e.suspendedLanes&n,Ts===e&&(Cs&n)===n&&(4===Ds||3===Ds&&(130023424&Cs)===Cs&&500>$e()-Vs?dc(e,0):Us|=n),rc(e,t)}function _c(e,t){0===t&&(0===(1&e.mode)?t=1:(t=lt,0===(130023424&(lt<<=1))&&(lt=4194304)));var n=ec();null!==(e=Ri(e,t))&&(yt(e,t,n),rc(e,n))}function jc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),_c(e,n)}function Ic(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,o=e.memoizedState;null!==o&&(n=o.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(i(314))}null!==r&&r.delete(t),_c(e,n)}function Tc(e,t){return We(e,t)}function Ec(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Cc(e,t,n,r){return new Ec(e,t,n,r)}function Mc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Ac(e,t){var n=e.alternate;return null===n?((n=Cc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Dc(e,t,n,r,o,a){var u=2;if(r=e,"function"===typeof e)Mc(e)&&(u=1);else if("string"===typeof e)u=5;else e:switch(e){case P:return Rc(n.children,o,a,t);case O:u=8,o|=8;break;case k:return(e=Cc(12,n,t,2|o)).elementType=k,e.lanes=a,e;case T:return(e=Cc(13,n,t,o)).elementType=T,e.lanes=a,e;case E:return(e=Cc(19,n,t,o)).elementType=E,e.lanes=a,e;case A:return Nc(n,o,a,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case _:u=10;break e;case j:u=9;break e;case I:u=11;break e;case C:u=14;break e;case M:u=16,r=null;break e}throw Error(i(130,null==e?e:typeof e,""))}return(t=Cc(u,n,t,o)).elementType=e,t.type=r,t.lanes=a,t}function Rc(e,t,n,r){return(e=Cc(7,e,r,t)).lanes=n,e}function Nc(e,t,n,r){return(e=Cc(22,e,r,t)).elementType=A,e.lanes=n,e.stateNode={isHidden:!1},e}function Lc(e,t,n){return(e=Cc(6,e,null,t)).lanes=n,e}function Uc(e,t,n){return(t=Cc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Fc(e,t,n,r,o){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gt(0),this.expirationTimes=gt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gt(0),this.identifierPrefix=r,this.onRecoverableError=o,this.mutableSourceEagerHydrationData=null}function Bc(e,t,n,r,o,i,a,u,s){return e=new Fc(e,t,n,u,s),1===t?(t=1,!0===i&&(t|=8)):t=0,i=Cc(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Li(i),e}function Vc(e){if(!e)return Io;e:{if(ze(e=e._reactInternals)!==e||1!==e.tag)throw Error(i(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ao(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(i(171))}if(1===e.tag){var n=e.type;if(Ao(n))return No(e,n,t)}return t}function zc(e,t,n,r,o,i,a,u,s){return(e=Bc(n,r,!0,e,0,i,0,u,s)).context=Vc(null),n=e.current,(i=Fi(r=ec(),o=tc(n))).callback=void 0!==t&&null!==t?t:null,Bi(n,i,o),e.current.lanes=o,yt(e,o,r),rc(e,r),e}function Hc(e,t,n,r){var o=t.current,i=ec(),a=tc(o);return n=Vc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Fi(i,a)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Bi(o,t,a))&&(nc(e,o,a,i),Vi(e,o,a)),a}function Kc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Gc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function qc(e,t){Gc(e,t),(e=e.alternate)&&Gc(e,t)}Ps=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Eo.current)bu=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return bu=!1,function(e,t,n){switch(t.tag){case 3:Tu(t),hi();break;case 5:Qi(t);break;case 1:Ao(t.type)&&Lo(t);break;case 4:Zi(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,o=t.memoizedProps.value;jo(Pi,r._currentValue),r._currentValue=o;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(jo(ea,1&ea.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Lu(e,t,n):(jo(ea,1&ea.current),null!==(e=Ku(e,t,n))?e.sibling:null);jo(ea,1&ea.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return zu(e,t,n);t.flags|=128}if(null!==(o=t.memoizedState)&&(o.rendering=null,o.tail=null,o.lastEffect=null),jo(ea,ea.current),r)break;return null;case 22:case 23:return t.lanes=0,Ou(e,t,n)}return Ku(e,t,n)}(e,t,n);bu=0!==(131072&e.flags)}else bu=!1,ii&&0!==(1048576&t.flags)&&ei(t,Wo,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Hu(e,t),e=t.pendingProps;var o=Mo(t,To.current);Ei(t,n),o=ga(null,t,r,e,o,n);var a=ya();return t.flags|=1,"object"===typeof o&&null!==o&&"function"===typeof o.render&&void 0===o.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ao(r)?(a=!0,Lo(t)):a=!1,t.memoizedState=null!==o.state&&void 0!==o.state?o.state:null,Li(t),o.updater=ou,t.stateNode=o,o._reactInternals=t,su(t,r,e,n),t=Iu(null,t,r,!0,a,n)):(t.tag=0,ii&&a&&ti(t),wu(null,t,o,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Hu(e,t),e=t.pendingProps,r=(o=r._init)(r._payload),t.type=r,o=t.tag=function(e){if("function"===typeof e)return Mc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===I)return 11;if(e===C)return 14}return 2}(r),e=nu(r,e),o){case 0:t=_u(null,t,r,e,n);break e;case 1:t=ju(null,t,r,e,n);break e;case 11:t=Su(null,t,r,e,n);break e;case 14:t=xu(null,t,r,nu(r.type,e),n);break e}throw Error(i(306,r,""))}return t;case 0:return r=t.type,o=t.pendingProps,_u(e,t,r,o=t.elementType===r?o:nu(r,o),n);case 1:return r=t.type,o=t.pendingProps,ju(e,t,r,o=t.elementType===r?o:nu(r,o),n);case 3:e:{if(Tu(t),null===e)throw Error(i(387));r=t.pendingProps,o=(a=t.memoizedState).element,Ui(e,t),Hi(t,r,null,n);var u=t.memoizedState;if(r=u.element,a.isDehydrated){if(a={element:r,isDehydrated:!1,cache:u.cache,pendingSuspenseBoundaries:u.pendingSuspenseBoundaries,transitions:u.transitions},t.updateQueue.baseState=a,t.memoizedState=a,256&t.flags){t=Eu(e,t,r,n,o=cu(Error(i(423)),t));break e}if(r!==o){t=Eu(e,t,r,n,o=cu(Error(i(424)),t));break e}for(oi=co(t.stateNode.containerInfo.firstChild),ri=t,ii=!0,ai=null,n=xi(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(hi(),r===o){t=Ku(e,t,n);break e}wu(e,t,r,n)}t=t.child}return t;case 5:return Qi(t),null===e&&li(t),r=t.type,o=t.pendingProps,a=null!==e?e.memoizedProps:null,u=o.children,no(r,o)?u=null:null!==a&&no(r,a)&&(t.flags|=32),ku(e,t),wu(e,t,u,n),t.child;case 6:return null===e&&li(t),null;case 13:return Lu(e,t,n);case 4:return Zi(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Si(t,null,r,n):wu(e,t,r,n),t.child;case 11:return r=t.type,o=t.pendingProps,Su(e,t,r,o=t.elementType===r?o:nu(r,o),n);case 7:return wu(e,t,t.pendingProps,n),t.child;case 8:case 12:return wu(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,o=t.pendingProps,a=t.memoizedProps,u=o.value,jo(Pi,r._currentValue),r._currentValue=u,null!==a)if(ur(a.value,u)){if(a.children===o.children&&!Eo.current){t=Ku(e,t,n);break e}}else for(null!==(a=t.child)&&(a.return=t);null!==a;){var s=a.dependencies;if(null!==s){u=a.child;for(var c=s.firstContext;null!==c;){if(c.context===r){if(1===a.tag){(c=Fi(-1,n&-n)).tag=2;var l=a.updateQueue;if(null!==l){var f=(l=l.shared).pending;null===f?c.next=c:(c.next=f.next,f.next=c),l.pending=c}}a.lanes|=n,null!==(c=a.alternate)&&(c.lanes|=n),Ti(a.return,n,t),s.lanes|=n;break}c=c.next}}else if(10===a.tag)u=a.type===t.type?null:a.child;else if(18===a.tag){if(null===(u=a.return))throw Error(i(341));u.lanes|=n,null!==(s=u.alternate)&&(s.lanes|=n),Ti(u,n,t),u=a.sibling}else u=a.child;if(null!==u)u.return=a;else for(u=a;null!==u;){if(u===t){u=null;break}if(null!==(a=u.sibling)){a.return=u.return,u=a;break}u=u.return}a=u}wu(e,t,o.children,n),t=t.child}return t;case 9:return o=t.type,r=t.pendingProps.children,Ei(t,n),r=r(o=Ci(o)),t.flags|=1,wu(e,t,r,n),t.child;case 14:return o=nu(r=t.type,t.pendingProps),xu(e,t,r,o=nu(r.type,o),n);case 15:return Pu(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:nu(r,o),Hu(e,t),t.tag=1,Ao(r)?(e=!0,Lo(t)):e=!1,Ei(t,n),au(t,r,o),su(t,r,o,n),Iu(null,t,r,!0,e,n);case 19:return zu(e,t,n);case 22:return Ou(e,t,n)}throw Error(i(156,t.tag))};var Wc="function"===typeof reportError?reportError:function(e){console.error(e)};function Yc(e){this._internalRoot=e}function Xc(e){this._internalRoot=e}function Zc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function $c(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Qc(){}function Jc(e,t,n,r,o){var i=n._reactRootContainer;if(i){var a=i;if("function"===typeof o){var u=o;o=function(){var e=Kc(a);u.call(e)}}Hc(t,a,e,o)}else a=function(e,t,n,r,o){if(o){if("function"===typeof r){var i=r;r=function(){var e=Kc(a);i.call(e)}}var a=zc(t,r,e,0,null,!1,0,"",Qc);return e._reactRootContainer=a,e[vo]=a.current,zr(8===e.nodeType?e.parentNode:e),lc(),a}for(;o=e.lastChild;)e.removeChild(o);if("function"===typeof r){var u=r;r=function(){var e=Kc(s);u.call(e)}}var s=Bc(e,0,!1,null,0,!1,0,"",Qc);return e._reactRootContainer=s,e[vo]=s.current,zr(8===e.nodeType?e.parentNode:e),lc((function(){Hc(t,s,n,r)})),s}(n,t,e,o,r);return Kc(a)}Xc.prototype.render=Yc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(i(409));Hc(e,t,null,null)},Xc.prototype.unmount=Yc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;lc((function(){Hc(null,e,null,null)})),t[vo]=null}},Xc.prototype.unstable_scheduleHydration=function(e){if(e){var t=Ot();e={blockedOn:null,target:e,priority:t};for(var n=0;n<At.length&&0!==t&&t<At[n].priority;n++);At.splice(n,0,e),0===n&&Lt(e)}},St=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ft(t.pendingLanes);0!==n&&(mt(t,1|n),rc(t,$e()),0===(6&Is)&&(zs=$e()+500,Ho()))}break;case 13:lc((function(){var t=Ri(e,1);if(null!==t){var n=ec();nc(t,e,1,n)}})),qc(e,1)}},xt=function(e){if(13===e.tag){var t=Ri(e,134217728);if(null!==t)nc(t,e,134217728,ec());qc(e,134217728)}},Pt=function(e){if(13===e.tag){var t=tc(e),n=Ri(e,t);if(null!==n)nc(n,e,t,ec());qc(e,t)}},Ot=function(){return bt},kt=function(e,t){var n=bt;try{return bt=e,t()}finally{bt=n}},xe=function(e,t,n){switch(t){case"input":if(Q(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var o=xo(r);if(!o)throw Error(i(90));W(r),Q(r,o)}}}break;case"textarea":ie(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ie=cc,Te=lc;var el={usingClientEntryPoint:!1,Events:[wo,So,xo,_e,je,cc]},tl={findFiberByHostInstance:bo,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},nl={bundleType:tl.bundleType,version:tl.version,rendererPackageName:tl.rendererPackageName,rendererConfig:tl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:w.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ge(e))?null:e.stateNode},findFiberByHostInstance:tl.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var rl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!rl.isDisabled&&rl.supportsFiber)try{ot=rl.inject(nl),it=rl}catch(le){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=el,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Zc(t))throw Error(i(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:x,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Zc(e))throw Error(i(299));var n=!1,r="",o=Wc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(o=t.onRecoverableError)),t=Bc(e,1,!1,null,0,n,0,r,o),e[vo]=t.current,zr(8===e.nodeType?e.parentNode:e),new Yc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(i(188));throw e=Object.keys(e).join(","),Error(i(268,e))}return e=null===(e=Ge(t))?null:e.stateNode},t.flushSync=function(e){return lc(e)},t.hydrate=function(e,t,n){if(!$c(t))throw Error(i(200));return Jc(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Zc(e))throw Error(i(405));var r=null!=n&&n.hydratedSources||null,o=!1,a="",u=Wc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(o=!0),void 0!==n.identifierPrefix&&(a=n.identifierPrefix),void 0!==n.onRecoverableError&&(u=n.onRecoverableError)),t=zc(t,null,e,1,null!=n?n:null,o,0,a,u),e[vo]=t.current,zr(e),r)for(e=0;e<r.length;e++)o=(o=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,o]:t.mutableSourceEagerHydrationData.push(n,o);return new Xc(t)},t.render=function(e,t,n){if(!$c(t))throw Error(i(200));return Jc(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!$c(e))throw Error(i(40));return!!e._reactRootContainer&&(lc((function(){Jc(null,null,e,!1,(function(){e._reactRootContainer=null,e[vo]=null}))})),!0)},t.unstable_batchedUpdates=cc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!$c(n))throw Error(i(200));if(null==e||void 0===e._reactInternals)throw Error(i(38));return Jc(e,t,n,!1,r)},t.version="18.3.1-next-f1338f8080-20240426"},1352:function(e,t,n){"use strict";var r=n(17119);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},17119:function(e,t,n){"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(38345)},86325:function(e,t,n){"use strict";n.d(t,{A:function(){return Y}});var r=function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},r.apply(this,arguments)};function o(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}Object.create;function i(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))}Object.create;"function"===typeof SuppressedError&&SuppressedError;var a=n(9950),u="right-scroll-bar-position",s="width-before-scroll-bar";function c(e,t){return"function"===typeof e?e(t):e&&(e.current=t),e}var l="undefined"!==typeof window?a.useLayoutEffect:a.useEffect,f=new WeakMap;function d(e,t){var n=function(e,t){var n=(0,a.useState)((function(){return{value:e,callback:t,facade:{get current(){return n.value},set current(e){var t=n.value;t!==e&&(n.value=e,n.callback(e,t))}}}}))[0];return n.callback=t,n.facade}(t||null,(function(t){return e.forEach((function(e){return c(e,t)}))}));return l((function(){var t=f.get(n);if(t){var r=new Set(t),o=new Set(e),i=n.current;r.forEach((function(e){o.has(e)||c(e,null)})),o.forEach((function(e){r.has(e)||c(e,i)}))}f.set(n,e)}),[e]),n}function p(e){return e}function h(e,t){void 0===t&&(t=p);var n=[],r=!1;return{read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(e){var o=t(e,r);return n.push(o),function(){n=n.filter((function(e){return e!==o}))}},assignSyncMedium:function(e){for(r=!0;n.length;){var t=n;n=[],t.forEach(e)}n={push:function(t){return e(t)},filter:function(){return n}}},assignMedium:function(e){r=!0;var t=[];if(n.length){var o=n;n=[],o.forEach(e),t=n}var i=function(){var n=t;t=[],n.forEach(e)},a=function(){return Promise.resolve().then(i)};a(),n={push:function(e){t.push(e),a()},filter:function(e){return t=t.filter(e),n}}}}}var v=function(e){void 0===e&&(e={});var t=h(null);return t.options=r({async:!0,ssr:!1},e),t}(),g=function(){},y=a.forwardRef((function(e,t){var n=a.useRef(null),i=a.useState({onScrollCapture:g,onWheelCapture:g,onTouchMoveCapture:g}),u=i[0],s=i[1],c=e.forwardProps,l=e.children,f=e.className,p=e.removeScrollBar,h=e.enabled,y=e.shards,m=e.sideCar,b=e.noIsolation,w=e.inert,S=e.allowPinchZoom,x=e.as,P=void 0===x?"div":x,O=e.gapMode,k=o(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),_=m,j=d([n,t]),I=r(r({},k),u);return a.createElement(a.Fragment,null,h&&a.createElement(_,{sideCar:v,removeScrollBar:p,shards:y,noIsolation:b,inert:w,setCallbacks:s,allowPinchZoom:!!S,lockRef:n,gapMode:O}),c?a.cloneElement(a.Children.only(l),r(r({},I),{ref:j})):a.createElement(P,r({},I,{className:f,ref:j}),l))}));y.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1},y.classNames={fullWidth:s,zeroRight:u};var m,b=function(e){var t=e.sideCar,n=o(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var i=t.read();if(!i)throw new Error("Sidecar medium not found");return a.createElement(i,r({},n))};b.isSideCarExport=!0;function w(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=m||n.nc;return t&&e.setAttribute("nonce",t),e}var S=function(){var e=0,t=null;return{add:function(n){var r,o;0==e&&(t=w())&&(o=n,(r=t).styleSheet?r.styleSheet.cssText=o:r.appendChild(document.createTextNode(o)),function(e){(document.head||document.getElementsByTagName("head")[0]).appendChild(e)}(t)),e++},remove:function(){! --e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},x=function(){var e=function(){var e=S();return function(t,n){a.useEffect((function(){return e.add(t),function(){e.remove()}}),[t&&n])}}();return function(t){var n=t.styles,r=t.dynamic;return e(n,r),null}},P={left:0,top:0,right:0,gap:0},O=function(e){return parseInt(e||"",10)||0},k=function(e){if(void 0===e&&(e="margin"),"undefined"===typeof window)return P;var t=function(e){var t=window.getComputedStyle(document.body),n=t["padding"===e?"paddingLeft":"marginLeft"],r=t["padding"===e?"paddingTop":"marginTop"],o=t["padding"===e?"paddingRight":"marginRight"];return[O(n),O(r),O(o)]}(e),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,r-n+t[2]-t[0])}},_=x(),j="data-scroll-locked",I=function(e,t,n,r){var o=e.left,i=e.top,a=e.right,c=e.gap;return void 0===n&&(n="margin"),"\n  .".concat("with-scroll-bars-hidden"," {\n   overflow: hidden ").concat(r,";\n   padding-right: ").concat(c,"px ").concat(r,";\n  }\n  body[").concat(j,"] {\n    overflow: hidden ").concat(r,";\n    overscroll-behavior: contain;\n    ").concat([t&&"position: relative ".concat(r,";"),"margin"===n&&"\n    padding-left: ".concat(o,"px;\n    padding-top: ").concat(i,"px;\n    padding-right: ").concat(a,"px;\n    margin-left:0;\n    margin-top:0;\n    margin-right: ").concat(c,"px ").concat(r,";\n    "),"padding"===n&&"padding-right: ".concat(c,"px ").concat(r,";")].filter(Boolean).join(""),"\n  }\n  \n  .").concat(u," {\n    right: ").concat(c,"px ").concat(r,";\n  }\n  \n  .").concat(s," {\n    margin-right: ").concat(c,"px ").concat(r,";\n  }\n  \n  .").concat(u," .").concat(u," {\n    right: 0 ").concat(r,";\n  }\n  \n  .").concat(s," .").concat(s," {\n    margin-right: 0 ").concat(r,";\n  }\n  \n  body[").concat(j,"] {\n    ").concat("--removed-body-scroll-bar-size",": ").concat(c,"px;\n  }\n")},T=function(){var e=parseInt(document.body.getAttribute(j)||"0",10);return isFinite(e)?e:0},E=function(e){var t=e.noRelative,n=e.noImportant,r=e.gapMode,o=void 0===r?"margin":r;a.useEffect((function(){return document.body.setAttribute(j,(T()+1).toString()),function(){var e=T()-1;e<=0?document.body.removeAttribute(j):document.body.setAttribute(j,e.toString())}}),[]);var i=a.useMemo((function(){return k(o)}),[o]);return a.createElement(_,{styles:I(i,!t,o,n?"":"!important")})},C=!1;if("undefined"!==typeof window)try{var M=Object.defineProperty({},"passive",{get:function(){return C=!0,!0}});window.addEventListener("test",M,M),window.removeEventListener("test",M,M)}catch(X){C=!1}var A=!!C&&{passive:!1},D=function(e,t){if(!(e instanceof Element))return!1;var n=window.getComputedStyle(e);return"hidden"!==n[t]&&!(n.overflowY===n.overflowX&&!function(e){return"TEXTAREA"===e.tagName}(e)&&"visible"===n[t])},R=function(e,t){var n=t.ownerDocument,r=t;do{if("undefined"!==typeof ShadowRoot&&r instanceof ShadowRoot&&(r=r.host),N(e,r)){var o=L(e,r);if(o[1]>o[2])return!0}r=r.parentNode}while(r&&r!==n.body);return!1},N=function(e,t){return"v"===e?function(e){return D(e,"overflowY")}(t):function(e){return D(e,"overflowX")}(t)},L=function(e,t){return"v"===e?[(n=t).scrollTop,n.scrollHeight,n.clientHeight]:function(e){return[e.scrollLeft,e.scrollWidth,e.clientWidth]}(t);var n},U=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},F=function(e){return[e.deltaX,e.deltaY]},B=function(e){return e&&"current"in e?e.current:e},V=function(e){return"\n  .block-interactivity-".concat(e," {pointer-events: none;}\n  .allow-interactivity-").concat(e," {pointer-events: all;}\n")},z=0,H=[];function K(e){for(var t=null;null!==e;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}var G,q=(G=function(e){var t=a.useRef([]),n=a.useRef([0,0]),r=a.useRef(),o=a.useState(z++)[0],u=a.useState(x)[0],s=a.useRef(e);a.useEffect((function(){s.current=e}),[e]),a.useEffect((function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(o));var t=i([e.lockRef.current],(e.shards||[]).map(B),!0).filter(Boolean);return t.forEach((function(e){return e.classList.add("allow-interactivity-".concat(o))})),function(){document.body.classList.remove("block-interactivity-".concat(o)),t.forEach((function(e){return e.classList.remove("allow-interactivity-".concat(o))}))}}}),[e.inert,e.lockRef.current,e.shards]);var c=a.useCallback((function(e,t){if("touches"in e&&2===e.touches.length||"wheel"===e.type&&e.ctrlKey)return!s.current.allowPinchZoom;var o,i=U(e),a=n.current,u="deltaX"in e?e.deltaX:a[0]-i[0],c="deltaY"in e?e.deltaY:a[1]-i[1],l=e.target,f=Math.abs(u)>Math.abs(c)?"h":"v";if("touches"in e&&"h"===f&&"range"===l.type)return!1;var d=R(f,l);if(!d)return!0;if(d?o=f:(o="v"===f?"h":"v",d=R(f,l)),!d)return!1;if(!r.current&&"changedTouches"in e&&(u||c)&&(r.current=o),!o)return!0;var p=r.current||o;return function(e,t,n,r,o){var i=function(e,t){return"h"===e&&"rtl"===t?-1:1}(e,window.getComputedStyle(t).direction),a=i*r,u=n.target,s=t.contains(u),c=!1,l=a>0,f=0,d=0;do{var p=L(e,u),h=p[0],v=p[1]-p[2]-i*h;(h||v)&&N(e,u)&&(f+=v,d+=h),u=u instanceof ShadowRoot?u.host:u.parentNode}while(!s&&u!==document.body||s&&(t.contains(u)||t===u));return(l&&(o&&Math.abs(f)<1||!o&&a>f)||!l&&(o&&Math.abs(d)<1||!o&&-a>d))&&(c=!0),c}(p,t,e,"h"===p?u:c,!0)}),[]),l=a.useCallback((function(e){var n=e;if(H.length&&H[H.length-1]===u){var r="deltaY"in n?F(n):U(n),o=t.current.filter((function(e){return e.name===n.type&&(e.target===n.target||n.target===e.shadowParent)&&(t=e.delta,o=r,t[0]===o[0]&&t[1]===o[1]);var t,o}))[0];if(o&&o.should)n.cancelable&&n.preventDefault();else if(!o){var i=(s.current.shards||[]).map(B).filter(Boolean).filter((function(e){return e.contains(n.target)}));(i.length>0?c(n,i[0]):!s.current.noIsolation)&&n.cancelable&&n.preventDefault()}}}),[]),f=a.useCallback((function(e,n,r,o){var i={name:e,delta:n,target:r,should:o,shadowParent:K(r)};t.current.push(i),setTimeout((function(){t.current=t.current.filter((function(e){return e!==i}))}),1)}),[]),d=a.useCallback((function(e){n.current=U(e),r.current=void 0}),[]),p=a.useCallback((function(t){f(t.type,F(t),t.target,c(t,e.lockRef.current))}),[]),h=a.useCallback((function(t){f(t.type,U(t),t.target,c(t,e.lockRef.current))}),[]);a.useEffect((function(){return H.push(u),e.setCallbacks({onScrollCapture:p,onWheelCapture:p,onTouchMoveCapture:h}),document.addEventListener("wheel",l,A),document.addEventListener("touchmove",l,A),document.addEventListener("touchstart",d,A),function(){H=H.filter((function(e){return e!==u})),document.removeEventListener("wheel",l,A),document.removeEventListener("touchmove",l,A),document.removeEventListener("touchstart",d,A)}}),[]);var v=e.removeScrollBar,g=e.inert;return a.createElement(a.Fragment,null,g?a.createElement(u,{styles:V(o)}):null,v?a.createElement(E,{gapMode:e.gapMode}):null)},v.useMedium(G),b),W=a.forwardRef((function(e,t){return a.createElement(y,r({},e,{ref:t,sideCar:q}))}));W.classNames=y.classNames;var Y=W},63859:function(e,t,n){"use strict";n.r(t),n.d(t,{RemoveScroll:function(){return r.A}});var r=n(86325)},32448:function(e,t,n){"use strict";n.r(t),n.d(t,{ENTERED:function(){return d},ENTERING:function(){return f},EXITED:function(){return l},EXITING:function(){return p},UNMOUNTED:function(){return c},default:function(){return g}});var r=n(98587),o=n(77387),i=n(9950),a=n(17119),u=!1,s=n(28555),c="unmounted",l="exited",f="entering",d="entered",p="exiting",h=function(e){function t(t,n){var r;r=e.call(this,t,n)||this;var o,i=n&&!n.isMounting?t.enter:t.appear;return r.appearStatus=null,t.in?i?(o=l,r.appearStatus=f):o=d:o=t.unmountOnExit||t.mountOnEnter?c:l,r.state={status:o},r.nextCallback=null,r}(0,o.A)(t,e),t.getDerivedStateFromProps=function(e,t){return e.in&&t.status===c?{status:l}:null};var n=t.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(e){var t=null;if(e!==this.props){var n=this.state.status;this.props.in?n!==f&&n!==d&&(t=f):n!==f&&n!==d||(t=p)}this.updateStatus(!1,t)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var e,t,n,r=this.props.timeout;return e=t=n=r,null!=r&&"number"!==typeof r&&(e=r.exit,t=r.enter,n=void 0!==r.appear?r.appear:t),{exit:e,enter:t,appear:n}},n.updateStatus=function(e,t){if(void 0===e&&(e=!1),null!==t)if(this.cancelNextCallback(),t===f){if(this.props.unmountOnExit||this.props.mountOnEnter){var n=this.props.nodeRef?this.props.nodeRef.current:a.findDOMNode(this);n&&function(e){e.scrollTop}(n)}this.performEnter(e)}else this.performExit();else this.props.unmountOnExit&&this.state.status===l&&this.setState({status:c})},n.performEnter=function(e){var t=this,n=this.props.enter,r=this.context?this.context.isMounting:e,o=this.props.nodeRef?[r]:[a.findDOMNode(this),r],i=o[0],s=o[1],c=this.getTimeouts(),l=r?c.appear:c.enter;!e&&!n||u?this.safeSetState({status:d},(function(){t.props.onEntered(i)})):(this.props.onEnter(i,s),this.safeSetState({status:f},(function(){t.props.onEntering(i,s),t.onTransitionEnd(l,(function(){t.safeSetState({status:d},(function(){t.props.onEntered(i,s)}))}))})))},n.performExit=function(){var e=this,t=this.props.exit,n=this.getTimeouts(),r=this.props.nodeRef?void 0:a.findDOMNode(this);t&&!u?(this.props.onExit(r),this.safeSetState({status:p},(function(){e.props.onExiting(r),e.onTransitionEnd(n.exit,(function(){e.safeSetState({status:l},(function(){e.props.onExited(r)}))}))}))):this.safeSetState({status:l},(function(){e.props.onExited(r)}))},n.cancelNextCallback=function(){null!==this.nextCallback&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(e,t){t=this.setNextCallback(t),this.setState(e,t)},n.setNextCallback=function(e){var t=this,n=!0;return this.nextCallback=function(r){n&&(n=!1,t.nextCallback=null,e(r))},this.nextCallback.cancel=function(){n=!1},this.nextCallback},n.onTransitionEnd=function(e,t){this.setNextCallback(t);var n=this.props.nodeRef?this.props.nodeRef.current:a.findDOMNode(this),r=null==e&&!this.props.addEndListener;if(n&&!r){if(this.props.addEndListener){var o=this.props.nodeRef?[this.nextCallback]:[n,this.nextCallback],i=o[0],u=o[1];this.props.addEndListener(i,u)}null!=e&&setTimeout(this.nextCallback,e)}else setTimeout(this.nextCallback,0)},n.render=function(){var e=this.state.status;if(e===c)return null;var t=this.props,n=t.children,o=(t.in,t.mountOnEnter,t.unmountOnExit,t.appear,t.enter,t.exit,t.timeout,t.addEndListener,t.onEnter,t.onEntering,t.onEntered,t.onExit,t.onExiting,t.onExited,t.nodeRef,(0,r.A)(t,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]));return i.createElement(s.A.Provider,{value:null},"function"===typeof n?n(e,o):i.cloneElement(i.Children.only(n),o))},t}(i.Component);function v(){}h.contextType=s.A,h.propTypes={},h.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:v,onEntering:v,onEntered:v,onExit:v,onExiting:v,onExited:v},h.UNMOUNTED=c,h.EXITED=l,h.ENTERING=f,h.ENTERED=d,h.EXITING=p;var g=h},28555:function(e,t,n){"use strict";var r=n(9950);t.A=r.createContext(null)},32654:function(e,t,n){"use strict";var r=n(9950),o=Symbol.for("react.element"),i=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,u=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,i={},c=null,l=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(l=t.ref),t)a.call(t,r)&&!s.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===i[r]&&(i[r]=t[r]);return{$$typeof:o,type:e,key:c,ref:l,props:i,_owner:u.current}}t.Fragment=i,t.jsx=c,t.jsxs=c},32049:function(e,t){"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),o=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),u=Symbol.for("react.provider"),s=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),p=Symbol.iterator;var h={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,g={};function y(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||h}function m(){}function b(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||h}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},m.prototype=y.prototype;var w=b.prototype=new m;w.constructor=b,v(w,y.prototype),w.isPureReactComponent=!0;var S=Array.isArray,x=Object.prototype.hasOwnProperty,P={current:null},O={key:!0,ref:!0,__self:!0,__source:!0};function k(e,t,r){var o,i={},a=null,u=null;if(null!=t)for(o in void 0!==t.ref&&(u=t.ref),void 0!==t.key&&(a=""+t.key),t)x.call(t,o)&&!O.hasOwnProperty(o)&&(i[o]=t[o]);var s=arguments.length-2;if(1===s)i.children=r;else if(1<s){for(var c=Array(s),l=0;l<s;l++)c[l]=arguments[l+2];i.children=c}if(e&&e.defaultProps)for(o in s=e.defaultProps)void 0===i[o]&&(i[o]=s[o]);return{$$typeof:n,type:e,key:a,ref:u,props:i,_owner:P.current}}function _(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var j=/\/+/g;function I(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function T(e,t,o,i,a){var u=typeof e;"undefined"!==u&&"boolean"!==u||(e=null);var s=!1;if(null===e)s=!0;else switch(u){case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case n:case r:s=!0}}if(s)return a=a(s=e),e=""===i?"."+I(s,0):i,S(a)?(o="",null!=e&&(o=e.replace(j,"$&/")+"/"),T(a,t,o,"",(function(e){return e}))):null!=a&&(_(a)&&(a=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(a,o+(!a.key||s&&s.key===a.key?"":(""+a.key).replace(j,"$&/")+"/")+e)),t.push(a)),1;if(s=0,i=""===i?".":i+":",S(e))for(var c=0;c<e.length;c++){var l=i+I(u=e[c],c);s+=T(u,t,o,l,a)}else if(l=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=p&&e[p]||e["@@iterator"])?e:null}(e),"function"===typeof l)for(e=l.call(e),c=0;!(u=e.next()).done;)s+=T(u=u.value,t,o,l=i+I(u,c++),a);else if("object"===u)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return s}function E(e,t,n){if(null==e)return e;var r=[],o=0;return T(e,r,"","",(function(e){return t.call(n,e,o++)})),r}function C(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var M={current:null},A={transition:null},D={ReactCurrentDispatcher:M,ReactCurrentBatchConfig:A,ReactCurrentOwner:P};function R(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:E,forEach:function(e,t,n){E(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return E(e,(function(){t++})),t},toArray:function(e){return E(e,(function(e){return e}))||[]},only:function(e){if(!_(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=y,t.Fragment=o,t.Profiler=a,t.PureComponent=b,t.StrictMode=i,t.Suspense=l,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=D,t.act=R,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var o=v({},e.props),i=e.key,a=e.ref,u=e._owner;if(null!=t){if(void 0!==t.ref&&(a=t.ref,u=P.current),void 0!==t.key&&(i=""+t.key),e.type&&e.type.defaultProps)var s=e.type.defaultProps;for(c in t)x.call(t,c)&&!O.hasOwnProperty(c)&&(o[c]=void 0===t[c]&&void 0!==s?s[c]:t[c])}var c=arguments.length-2;if(1===c)o.children=r;else if(1<c){s=Array(c);for(var l=0;l<c;l++)s[l]=arguments[l+2];o.children=s}return{$$typeof:n,type:e.type,key:i,ref:a,props:o,_owner:u}},t.createContext=function(e){return(e={$$typeof:s,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:u,_context:e},e.Consumer=e},t.createElement=k,t.createFactory=function(e){var t=k.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=_,t.lazy=function(e){return{$$typeof:d,_payload:{_status:-1,_result:e},_init:C}},t.memo=function(e,t){return{$$typeof:f,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=A.transition;A.transition={};try{e()}finally{A.transition=t}},t.unstable_act=R,t.useCallback=function(e,t){return M.current.useCallback(e,t)},t.useContext=function(e){return M.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return M.current.useDeferredValue(e)},t.useEffect=function(e,t){return M.current.useEffect(e,t)},t.useId=function(){return M.current.useId()},t.useImperativeHandle=function(e,t,n){return M.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return M.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return M.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return M.current.useMemo(e,t)},t.useReducer=function(e,t,n){return M.current.useReducer(e,t,n)},t.useRef=function(e){return M.current.useRef(e)},t.useState=function(e){return M.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return M.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return M.current.useTransition()},t.version="18.3.1"},9950:function(e,t,n){"use strict";e.exports=n(32049)},44414:function(e,t,n){"use strict";e.exports=n(32654)},31761:function(e,t){"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,o=e[r];if(!(0<i(o,t)))break e;e[r]=t,e[n]=o,n=r}}function r(e){return 0===e.length?null:e[0]}function o(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,o=e.length,a=o>>>1;r<a;){var u=2*(r+1)-1,s=e[u],c=u+1,l=e[c];if(0>i(s,n))c<o&&0>i(l,s)?(e[r]=l,e[c]=n,r=c):(e[r]=s,e[u]=n,r=u);else{if(!(c<o&&0>i(l,n)))break e;e[r]=l,e[c]=n,r=c}}}return t}function i(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var a=performance;t.unstable_now=function(){return a.now()}}else{var u=Date,s=u.now();t.unstable_now=function(){return u.now()-s}}var c=[],l=[],f=1,d=null,p=3,h=!1,v=!1,g=!1,y="function"===typeof setTimeout?setTimeout:null,m="function"===typeof clearTimeout?clearTimeout:null,b="undefined"!==typeof setImmediate?setImmediate:null;function w(e){for(var t=r(l);null!==t;){if(null===t.callback)o(l);else{if(!(t.startTime<=e))break;o(l),t.sortIndex=t.expirationTime,n(c,t)}t=r(l)}}function S(e){if(g=!1,w(e),!v)if(null!==r(c))v=!0,A(x);else{var t=r(l);null!==t&&D(S,t.startTime-e)}}function x(e,n){v=!1,g&&(g=!1,m(_),_=-1),h=!0;var i=p;try{for(w(n),d=r(c);null!==d&&(!(d.expirationTime>n)||e&&!T());){var a=d.callback;if("function"===typeof a){d.callback=null,p=d.priorityLevel;var u=a(d.expirationTime<=n);n=t.unstable_now(),"function"===typeof u?d.callback=u:d===r(c)&&o(c),w(n)}else o(c);d=r(c)}if(null!==d)var s=!0;else{var f=r(l);null!==f&&D(S,f.startTime-n),s=!1}return s}finally{d=null,p=i,h=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var P,O=!1,k=null,_=-1,j=5,I=-1;function T(){return!(t.unstable_now()-I<j)}function E(){if(null!==k){var e=t.unstable_now();I=e;var n=!0;try{n=k(!0,e)}finally{n?P():(O=!1,k=null)}}else O=!1}if("function"===typeof b)P=function(){b(E)};else if("undefined"!==typeof MessageChannel){var C=new MessageChannel,M=C.port2;C.port1.onmessage=E,P=function(){M.postMessage(null)}}else P=function(){y(E,0)};function A(e){k=e,O||(O=!0,P())}function D(e,n){_=y((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){v||h||(v=!0,A(x))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):j=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(p){case 1:case 2:case 3:var t=3;break;default:t=p}var n=p;p=t;try{return e()}finally{p=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=p;p=e;try{return t()}finally{p=n}},t.unstable_scheduleCallback=function(e,o,i){var a=t.unstable_now();switch("object"===typeof i&&null!==i?i="number"===typeof(i=i.delay)&&0<i?a+i:a:i=a,e){case 1:var u=-1;break;case 2:u=250;break;case 5:u=1073741823;break;case 4:u=1e4;break;default:u=5e3}return e={id:f++,callback:o,priorityLevel:e,startTime:i,expirationTime:u=i+u,sortIndex:-1},i>a?(e.sortIndex=i,n(l,e),null===r(c)&&e===r(l)&&(g?(m(_),_=-1):g=!0,D(S,i-a))):(e.sortIndex=u,n(c,e),v||h||(v=!0,A(x))),e},t.unstable_shouldYield=T,t.unstable_wrapCallback=function(e){var t=p;return function(){var n=p;p=t;try{return e.apply(this,arguments)}finally{p=n}}}},75340:function(e,t,n){"use strict";e.exports=n(31761)},74049:function(e,t,n){"use strict";var r,o=n(50883).default,i=Object.defineProperty,a=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,c=function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var c,l=o(u(t));try{var f=function(){var o=c.value;s.call(e,o)||o===n||i(e,o,{get:function(){return t[o]},enumerable:!(r=a(t,o))||r.enumerable})};for(l.s();!(c=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e},l={};!function(e,t){for(var n in t)i(e,n,{get:t[n],enumerable:!0})}(l,{ARROW_LABEL_FONT_SIZES:function(){return ne.ARROW_LABEL_FONT_SIZES},AlignMenuItems:function(){return me.AlignMenuItems},ArrangeMenuSubmenu:function(){return et.ArrangeMenuSubmenu},ArrowBindingUtil:function(){return O.ArrowBindingUtil},ArrowDownToolbarItem:function(){return Ye.ArrowDownToolbarItem},ArrowLeftToolbarItem:function(){return Ye.ArrowLeftToolbarItem},ArrowRightToolbarItem:function(){return Ye.ArrowRightToolbarItem},ArrowShapeTool:function(){return L.ArrowShapeTool},ArrowShapeUtil:function(){return U.ArrowShapeUtil},ArrowToolbarItem:function(){return Ye.ArrowToolbarItem},ArrowUpToolbarItem:function(){return Ye.ArrowUpToolbarItem},ArrowheadStylePickerSet:function(){return qe.ArrowheadStylePickerSet},AssetToolbarItem:function(){return Ye.AssetToolbarItem},AssetUrlsProvider:function(){return St.AssetUrlsProvider},BookmarkShapeUtil:function(){return B.BookmarkShapeUtil},BreakPointProvider:function(){return xt.BreakPointProvider},CenteredTopPanelContainer:function(){return Ze.CenteredTopPanelContainer},CheckBoxToolbarItem:function(){return Ye.CheckBoxToolbarItem},ClipboardMenuGroup:function(){return et.ClipboardMenuGroup},CloudToolbarItem:function(){return Ye.CloudToolbarItem},ColorSchemeMenu:function(){return p.ColorSchemeMenu},CommonStylePickerSet:function(){return qe.CommonStylePickerSet},ContextMenu:function(){return be.DefaultContextMenu},ConversionsMenuGroup:function(){return et.ConversionsMenuGroup},ConvertToBookmarkMenuItem:function(){return et.ConvertToBookmarkMenuItem},ConvertToEmbedMenuItem:function(){return et.ConvertToEmbedMenuItem},CopyAsMenuGroup:function(){return et.CopyAsMenuGroup},CopyMenuItem:function(){return et.CopyMenuItem},CursorChatItem:function(){return et.CursorChatItem},CutMenuItem:function(){return et.CutMenuItem},DEFAULT_EMBED_DEFINITIONS:function(){return C.DEFAULT_EMBED_DEFINITIONS},DebugFlags:function(){return xe.DebugFlags},DefaultActionsMenu:function(){return ye.DefaultActionsMenu},DefaultActionsMenuContent:function(){return me.DefaultActionsMenuContent},DefaultContextMenu:function(){return be.DefaultContextMenu},DefaultContextMenuContent:function(){return we.DefaultContextMenuContent},DefaultDebugMenu:function(){return Se.DefaultDebugMenu},DefaultDebugMenuContent:function(){return xe.DefaultDebugMenuContent},DefaultHelpMenu:function(){return Oe.DefaultHelpMenu},DefaultHelpMenuContent:function(){return ke.DefaultHelpMenuContent},DefaultHelperButtons:function(){return _e.DefaultHelperButtons},DefaultHelperButtonsContent:function(){return je.DefaultHelperButtonsContent},DefaultKeyboardShortcutsDialog:function(){return Ie.DefaultKeyboardShortcutsDialog},DefaultKeyboardShortcutsDialogContent:function(){return Te.DefaultKeyboardShortcutsDialogContent},DefaultMainMenu:function(){return Ce.DefaultMainMenu},DefaultMainMenuContent:function(){return Me.DefaultMainMenuContent},DefaultMenuPanel:function(){return Pe.DefaultMenuPanel},DefaultMinimap:function(){return Ae.DefaultMinimap},DefaultNavigationPanel:function(){return Re.DefaultNavigationPanel},DefaultPageMenu:function(){return Le.DefaultPageMenu},DefaultQuickActions:function(){return Be.DefaultQuickActions},DefaultQuickActionsContent:function(){return Ve.DefaultQuickActionsContent},DefaultSharePanel:function(){return ze.DefaultSharePanel},DefaultStylePanel:function(){return Ge.DefaultStylePanel},DefaultStylePanelContent:function(){return qe.DefaultStylePanelContent},DefaultToolbar:function(){return We.DefaultToolbar},DefaultToolbarContent:function(){return Ye.DefaultToolbarContent},DefaultTopPanel:function(){return $e.DefaultTopPanel},DefaultZoomMenu:function(){return Qe.DefaultZoomMenu},DefaultZoomMenuContent:function(){return Je.DefaultZoomMenuContent},DeleteMenuItem:function(){return et.DeleteMenuItem},DiamondToolbarItem:function(){return Ye.DiamondToolbarItem},DistributeMenuItems:function(){return me.DistributeMenuItems},DrawShapeTool:function(){return V.DrawShapeTool},DrawShapeUtil:function(){return z.DrawShapeUtil},DrawToolbarItem:function(){return Ye.DrawToolbarItem},DuplicateMenuItem:function(){return et.DuplicateMenuItem},EditLinkMenuItem:function(){return et.EditLinkMenuItem},EditMenuSubmenu:function(){return et.EditMenuSubmenu},EditSubmenu:function(){return Me.EditSubmenu},EllipseToolbarItem:function(){return Ye.EllipseToolbarItem},EmbedShapeUtil:function(){return H.EmbedShapeUtil},EraserTool:function(){return ce.EraserTool},EraserToolbarItem:function(){return Ye.EraserToolbarItem},ExampleDialog:function(){return xe.ExampleDialog},ExportFileContentSubMenu:function(){return Me.ExportFileContentSubMenu},ExtrasGroup:function(){return Me.ExtrasGroup},FONT_FAMILIES:function(){return ne.FONT_FAMILIES},FONT_SIZES:function(){return ne.FONT_SIZES},FeatureFlags:function(){return xe.FeatureFlags},FitFrameToContentMenuItem:function(){return et.FitFrameToContentMenuItem},FrameShapeTool:function(){return K.FrameShapeTool},FrameShapeUtil:function(){return G.FrameShapeUtil},FrameToolbarItem:function(){return Ye.FrameToolbarItem},GeoShapeTool:function(){return q.GeoShapeTool},GeoShapeUtil:function(){return W.GeoShapeUtil},GeoStylePickerSet:function(){return qe.GeoStylePickerSet},GroupMenuItem:function(){return et.GroupMenuItem},GroupOrUngroupMenuItem:function(){return me.GroupOrUngroupMenuItem},HandTool:function(){return le.HandTool},HandToolbarItem:function(){return Ye.HandToolbarItem},HexagonToolbarItem:function(){return Ye.HexagonToolbarItem},HighlightShapeTool:function(){return Y.HighlightShapeTool},HighlightShapeUtil:function(){return X.HighlightShapeUtil},HighlightToolbarItem:function(){return Ye.HighlightToolbarItem},ImageShapeUtil:function(){return Z.ImageShapeUtil},KeyboardShortcutsMenuItem:function(){return ke.KeyboardShortcutsMenuItem},LABEL_FONT_SIZES:function(){return ne.LABEL_FONT_SIZES},LanguageMenu:function(){return Ee.LanguageMenu},LaserTool:function(){return fe.LaserTool},LaserToolbarItem:function(){return Ye.LaserToolbarItem},LineShapeTool:function(){return $.LineShapeTool},LineShapeUtil:function(){return Q.LineShapeUtil},LineToolbarItem:function(){return Ye.LineToolbarItem},MiscMenuGroup:function(){return Me.MiscMenuGroup},MobileStylePanel:function(){return De.MobileStylePanel},MoveToPageMenu:function(){return et.MoveToPageMenu},NoteShapeTool:function(){return J.NoteShapeTool},NoteShapeUtil:function(){return ee.NoteShapeUtil},NoteToolbarItem:function(){return Ye.NoteToolbarItem},OfflineIndicator:function(){return Ne.OfflineIndicator},OpacitySlider:function(){return qe.OpacitySlider},OvalToolbarItem:function(){return Ye.OvalToolbarItem},OverflowingToolbar:function(){return Xe.OverflowingToolbar},PORTRAIT_BREAKPOINT:function(){return mt.PORTRAIT_BREAKPOINT},PageItemInput:function(){return Ue.PageItemInput},PageItemSubmenu:function(){return Fe.PageItemSubmenu},PasteMenuItem:function(){return et.PasteMenuItem},PeopleMenu:function(){return He.PeopleMenu},PreferencesGroup:function(){return Me.PreferencesGroup},PrintItem:function(){return et.PrintItem},RectangleToolbarItem:function(){return Ye.RectangleToolbarItem},RemoveFrameMenuItem:function(){return et.RemoveFrameMenuItem},ReorderMenuItems:function(){return me.ReorderMenuItems},ReorderMenuSubmenu:function(){return et.ReorderMenuSubmenu},RhombusToolbarItem:function(){return Ye.RhombusToolbarItem},RotateCWMenuItem:function(){return me.RotateCWMenuItem},STROKE_SIZES:function(){return ne.STROKE_SIZES},SelectAllMenuItem:function(){return et.SelectAllMenuItem},SelectTool:function(){return de.SelectTool},SelectToolbarItem:function(){return Ye.SelectToolbarItem},Spinner:function(){return Ke.Spinner},SplineStylePickerSet:function(){return qe.SplineStylePickerSet},StackMenuItems:function(){return me.StackMenuItems},StarToolbarItem:function(){return Ye.StarToolbarItem},TEXT_PROPS:function(){return ne.TEXT_PROPS},TLDRAW_FILE_EXTENSION:function(){return $t.TLDRAW_FILE_EXTENSION},TLV1AlignStyle:function(){return Zt.TLV1AlignStyle},TLV1AssetType:function(){return Zt.TLV1AssetType},TLV1ColorStyle:function(){return Zt.TLV1ColorStyle},TLV1DashStyle:function(){return Zt.TLV1DashStyle},TLV1Decoration:function(){return Zt.TLV1Decoration},TLV1FontStyle:function(){return Zt.TLV1FontStyle},TLV1ShapeType:function(){return Zt.TLV1ShapeType},TLV1SizeStyle:function(){return Zt.TLV1SizeStyle},TextLabel:function(){return te.TextLabel},TextShapeTool:function(){return ae.TextShapeTool},TextShapeUtil:function(){return ue.TextShapeUtil},TextStylePickerSet:function(){return qe.TextStylePickerSet},TextToolbarItem:function(){return Ye.TextToolbarItem},Tldraw:function(){return x.Tldraw},TldrawHandles:function(){return k.TldrawHandles},TldrawImage:function(){return P.TldrawImage},TldrawScribble:function(){return _.TldrawScribble},TldrawSelectionBackground:function(){return j.TldrawSelectionBackground},TldrawSelectionForeground:function(){return I.TldrawSelectionForeground},TldrawShapeIndicators:function(){return T.TldrawShapeIndicators},TldrawUi:function(){return ve.TldrawUi},TldrawUiButton:function(){return tt.TldrawUiButton},TldrawUiButtonCheck:function(){return nt.TldrawUiButtonCheck},TldrawUiButtonIcon:function(){return rt.TldrawUiButtonIcon},TldrawUiButtonLabel:function(){return ot.TldrawUiButtonLabel},TldrawUiButtonPicker:function(){return it.TldrawUiButtonPicker},TldrawUiComponentsProvider:function(){return Pt.TldrawUiComponentsProvider},TldrawUiContextProvider:function(){return bt.TldrawUiContextProvider},TldrawUiDialogBody:function(){return at.TldrawUiDialogBody},TldrawUiDialogCloseButton:function(){return at.TldrawUiDialogCloseButton},TldrawUiDialogFooter:function(){return at.TldrawUiDialogFooter},TldrawUiDialogHeader:function(){return at.TldrawUiDialogHeader},TldrawUiDialogTitle:function(){return at.TldrawUiDialogTitle},TldrawUiDialogs:function(){return h.TldrawUiDialogs},TldrawUiDialogsProvider:function(){return b.TldrawUiDialogsProvider},TldrawUiDropdownMenuCheckboxItem:function(){return ut.TldrawUiDropdownMenuCheckboxItem},TldrawUiDropdownMenuContent:function(){return ut.TldrawUiDropdownMenuContent},TldrawUiDropdownMenuGroup:function(){return ut.TldrawUiDropdownMenuGroup},TldrawUiDropdownMenuIndicator:function(){return ut.TldrawUiDropdownMenuIndicator},TldrawUiDropdownMenuItem:function(){return ut.TldrawUiDropdownMenuItem},TldrawUiDropdownMenuRoot:function(){return ut.TldrawUiDropdownMenuRoot},TldrawUiDropdownMenuSub:function(){return ut.TldrawUiDropdownMenuSub},TldrawUiDropdownMenuSubTrigger:function(){return ut.TldrawUiDropdownMenuSubTrigger},TldrawUiDropdownMenuTrigger:function(){return ut.TldrawUiDropdownMenuTrigger},TldrawUiEventsProvider:function(){return kt.TldrawUiEventsProvider},TldrawUiIcon:function(){return st.TldrawUiIcon},TldrawUiInput:function(){return ct.TldrawUiInput},TldrawUiKbd:function(){return lt.TldrawUiKbd},TldrawUiMenuActionCheckboxItem:function(){return g.TldrawUiMenuActionCheckboxItem},TldrawUiMenuActionItem:function(){return y.TldrawUiMenuActionItem},TldrawUiMenuCheckboxItem:function(){return pt.TldrawUiMenuCheckboxItem},TldrawUiMenuContextProvider:function(){return ht.TldrawUiMenuContextProvider},TldrawUiMenuGroup:function(){return vt.TldrawUiMenuGroup},TldrawUiMenuItem:function(){return gt.TldrawUiMenuItem},TldrawUiMenuSubmenu:function(){return yt.TldrawUiMenuSubmenu},TldrawUiMenuToolItem:function(){return m.TldrawUiMenuToolItem},TldrawUiPopover:function(){return ft.TldrawUiPopover},TldrawUiPopoverContent:function(){return ft.TldrawUiPopoverContent},TldrawUiPopoverTrigger:function(){return ft.TldrawUiPopoverTrigger},TldrawUiSlider:function(){return dt.TldrawUiSlider},TldrawUiToasts:function(){return v.TldrawUiToasts},TldrawUiToastsProvider:function(){return w.TldrawUiToastsProvider},TldrawUiTranslationProvider:function(){return S.TldrawUiTranslationProvider},ToggleAutoSizeMenuItem:function(){return et.ToggleAutoSizeMenuItem},ToggleDebugModeItem:function(){return et.ToggleDebugModeItem},ToggleDynamicSizeModeItem:function(){return et.ToggleDynamicSizeModeItem},ToggleEdgeScrollingItem:function(){return et.ToggleEdgeScrollingItem},ToggleFocusModeItem:function(){return et.ToggleFocusModeItem},ToggleGridItem:function(){return et.ToggleGridItem},ToggleLockMenuItem:function(){return et.ToggleLockMenuItem},TogglePasteAtCursorItem:function(){return et.TogglePasteAtCursorItem},ToggleReduceMotionItem:function(){return et.ToggleReduceMotionItem},ToggleSnapModeItem:function(){return et.ToggleSnapModeItem},ToggleToolLockItem:function(){return et.ToggleToolLockItem},ToggleTransparentBgMenuItem:function(){return et.ToggleTransparentBgMenuItem},ToggleWrapModeItem:function(){return et.ToggleWrapModeItem},ToolbarItem:function(){return Ye.ToolbarItem},TrapezoidToolbarItem:function(){return Ye.TrapezoidToolbarItem},TriangleToolbarItem:function(){return Ye.TriangleToolbarItem},UndoRedoGroup:function(){return Me.UndoRedoGroup},UngroupMenuItem:function(){return et.UngroupMenuItem},UnlockAllMenuItem:function(){return et.UnlockAllMenuItem},VideoShapeUtil:function(){return se.VideoShapeUtil},ViewSubmenu:function(){return Me.ViewSubmenu},XBoxToolbarItem:function(){return Ye.XBoxToolbarItem},ZoomOrRotateMenuItem:function(){return me.ZoomOrRotateMenuItem},ZoomTo100MenuItem:function(){return et.ZoomTo100MenuItem},ZoomToFitMenuItem:function(){return et.ZoomToFitMenuItem},ZoomToSelectionMenuItem:function(){return et.ZoomToSelectionMenuItem},ZoomTool:function(){return he.ZoomTool},buildFromV1Document:function(){return Zt.buildFromV1Document},centerSelectionAroundPoint:function(){return M.centerSelectionAroundPoint},containBoxSize:function(){return Vt.containBoxSize},copyAs:function(){return Kt.copyAs},createMediaAssetInfoSkeleton:function(){return M.getMediaAssetInfoPartial},createShapesForAssets:function(){return M.createShapesForAssets},defaultBindingUtils:function(){return E.defaultBindingUtils},defaultEditorAssetUrls:function(){return Yt.defaultEditorAssetUrls},defaultShapeTools:function(){return A.defaultShapeTools},defaultShapeUtils:function(){return D.defaultShapeUtils},defaultTools:function(){return N.defaultTools},downsizeImage:function(){return Vt.downsizeImage},embedShapePermissionDefaults:function(){return C.embedShapePermissionDefaults},exportAs:function(){return qt.exportAs},exportToBlob:function(){return Gt.exportToBlob},fitFrameToContent:function(){return Wt.fitFrameToContent},getArrowBindings:function(){return F.getArrowBindings},getArrowTerminalsInArrowSpace:function(){return F.getArrowTerminalsInArrowSpace},getEmbedInfo:function(){return Ht.getEmbedInfo},getOccludedChildren:function(){return pe.getOccludedChildren},getSvgAsImage:function(){return Gt.getSvgAsImage},kickoutOccludedShapes:function(){return pe.kickoutOccludedShapes},parseAndLoadDocument:function(){return $t.parseAndLoadDocument},parseTldrawJsonFile:function(){return $t.parseTldrawJsonFile},preloadFont:function(){return zt.preloadFont},registerDefaultExternalContentHandlers:function(){return M.registerDefaultExternalContentHandlers},registerDefaultSideEffects:function(){return R.registerDefaultSideEffects},removeFrame:function(){return Wt.removeFrame},serializeTldrawJson:function(){return $t.serializeTldrawJson},serializeTldrawJsonBlob:function(){return $t.serializeTldrawJsonBlob},setDefaultEditorAssetUrls:function(){return Yt.setDefaultEditorAssetUrls},setDefaultUiAssetUrls:function(){return ge.setDefaultUiAssetUrls},truncateStringWithEllipsis:function(){return Xt.truncateStringWithEllipsis},unwrapLabel:function(){return wt.unwrapLabel},useActions:function(){return wt.useActions},useAsset:function(){return ie.useAsset},useAssetUrls:function(){return St.useAssetUrls},useBreakpoint:function(){return xt.useBreakpoint},useCanRedo:function(){return jt.useCanRedo},useCanUndo:function(){return jt.useCanUndo},useCollaborationStatus:function(){return Ct.useCollaborationStatus},useCopyAs:function(){return Tt.useCopyAs},useCurrentTranslation:function(){return Ft.useCurrentTranslation},useDefaultColorTheme:function(){return re.useDefaultColorTheme},useDefaultHelpers:function(){return Bt.useDefaultHelpers},useDialogs:function(){return Ot.useDialogs},useEditableText:function(){return oe.useEditableText},useExportAs:function(){return Et.useExportAs},useImageOrVideoAsset:function(){return ie.useImageOrVideoAsset},useIsToolSelected:function(){return Ye.useIsToolSelected},useKeyboardShortcuts:function(){return Mt.useKeyboardShortcuts},useLocalStorageState:function(){return At.useLocalStorageState},useMenuClipboardEvents:function(){return It.useMenuClipboardEvents},useMenuIsOpen:function(){return Dt.useMenuIsOpen},useNativeClipboardEvents:function(){return It.useNativeClipboardEvents},usePrefersReducedMotion:function(){return d.usePrefersReducedMotion},usePreloadAssets:function(){return Rt.usePreloadAssets},useReadonly:function(){return Nt.useReadonly},useRelevantStyles:function(){return Lt.useRelevantStyles},useShowCollaborationUi:function(){return Ct.useShowCollaborationUi},useTldrawUiComponents:function(){return Pt.useTldrawUiComponents},useToasts:function(){return _t.useToasts},useTools:function(){return Ut.useTools},useTranslation:function(){return Ft.useTranslation},useUiEvents:function(){return kt.useUiEvents}}),e.exports=(r=l,c(i({},"__esModule",{value:!0}),r));var f=n(57777),d=n(41066),p=n(85050),h=n(21340),v=n(29225),g=n(93740),y=n(61625),m=n(25797),b=n(49489),w=n(5450),S=n(97410);!function(e,t,n){c(e,t,"default"),n&&c(n,t,"default")}(l,n(57777),e.exports);var x=n(12915),P=n(90450),O=n(17402),k=n(51563),_=n(85450),j=n(11293),I=n(70235),T=n(57931),E=n(39558),C=n(4033),M=n(6563),A=n(16016),D=n(32982),R=n(65133),N=n(45457),L=n(32216),U=n(77158),F=n(64761),B=n(64500),V=n(25410),z=n(89736),H=n(51066),K=n(65512),G=n(32694),q=n(74296),W=n(35590),Y=n(91808),X=n(15166),Z=n(86746),$=n(66486),Q=n(10148),J=n(22054),ee=n(28340),te=n(65083),ne=n(92965),re=n(38546),oe=n(56940),ie=n(61622),ae=n(1508),ue=n(19914),se=n(95182),ce=n(88656),le=n(31998),fe=n(79902),de=n(78412),pe=n(23813),he=n(26062),ve=n(54278),ge=n(43186),ye=n(74771),me=n(62282),be=n(61007),we=n(71630),Se=n(22227),xe=n(23722),Pe=n(57901),Oe=n(91815),ke=n(65574),_e=n(35493),je=n(19416),Ie=n(68091),Te=n(16210),Ee=n(79467),Ce=n(1839),Me=n(24526),Ae=n(4293),De=n(84406),Re=n(98247),Ne=n(45640),Le=n(54963),Ue=n(23642),Fe=n(81111),Be=n(89135),Ve=n(67278),ze=n(53983),He=n(42741),Ke=n(93268),Ge=n(21847),qe=n(43478),We=n(54229),Ye=n(58760),Xe=n(60388),Ze=n(24379),$e=n(67931),Qe=n(16235),Je=n(74050),et=n(53655),tt=n(61537),nt=n(51489),rt=n(67880),ot=n(95139),it=n(39636),at=n(52046),ut=n(80408),st=n(88635),ct=n(98220),lt=n(88375),ft=n(36825),dt=n(50559),pt=n(98382),ht=n(70649),vt=n(60681),gt=n(95767),yt=n(12947),mt=n(12521),bt=n(84630),wt=n(2491),St=n(39247),xt=n(77740),Pt=n(3594),Ot=n(49489),kt=n(14867),_t=n(5450),jt=n(54150),It=n(2753),Tt=n(42473),Et=n(28850),Ct=n(37454),Mt=n(51750),At=n(38831),Dt=n(80459),Rt=n(30762),Nt=n(19098),Lt=n(44867),Ut=n(48357),Ft=n(97410),Bt=n(24833),Vt=n(27236),zt=n(74904),Ht=n(55714),Kt=n(98641),Gt=n(51218),qt=n(33242),Wt=n(30750),Yt=n(94730),Xt=n(35284),Zt=n(95394),$t=n(69154);(0,f.registerTldrawLibraryVersion)("tldraw","3.7.2","cjs")},12915:function(e,t,n){"use strict";var r,o=n(41132).default,i=n(12897).default,a=n(91847).default,u=n(50883).default,s=["children","maxImageDimension","maxAssetSize","acceptedImageMimeTypes","acceptedVideoMimeTypes","onMount","components","shapeUtils","bindingUtils","tools","embeds"],c=Object.defineProperty,l=Object.getOwnPropertyDescriptor,f=Object.getOwnPropertyNames,d=Object.prototype.hasOwnProperty,p={};!function(e,t){for(var n in t)c(e,n,{get:t[n],enumerable:!0})}(p,{Tldraw:function(){return R}}),e.exports=(r=p,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,i=u(f(t));try{var a=function(){var i=o.value;d.call(e,i)||i===n||c(e,i,{get:function(){return t[i]},enumerable:!(r=l(t,i))||r.enumerable})};for(i.s();!(o=i.n()).done;)a()}catch(s){i.e(s)}finally{i.f()}}return e}(c({},"__esModule",{value:!0}),r));var h=n(44414),v=n(57777),g=n(9950),y=n(51563),m=n(85450),b=n(11293),w=n(70235),S=n(57931),x=n(39558),P=n(6563),O=n(16016),k=n(32982),_=n(65133),j=n(45457),I=n(51066),T=n(54278),E=n(3594),C=n(5450),M=n(30762),A=n(97410),D=n(94730);function R(e){var t=e.children,n=e.maxImageDimension,r=e.maxAssetSize,u=e.acceptedImageMimeTypes,c=e.acceptedVideoMimeTypes,l=e.onMount,f=e.components,d=void 0===f?{}:f,p=e.shapeUtils,P=void 0===p?[]:p,_=e.bindingUtils,E=void 0===_?[]:_,C=e.tools,A=void 0===C?[]:C,R=e.embeds,L=a(e,s),U=(0,v.useShallowObjectIdentity)(d),F=(0,g.useMemo)((function(){return i({Scribble:m.TldrawScribble,ShapeIndicators:S.TldrawShapeIndicators,CollaboratorScribble:m.TldrawScribble,SelectionForeground:w.TldrawSelectionForeground,SelectionBackground:b.TldrawSelectionBackground,Handles:y.TldrawHandles},U)}),[U]),B=(0,v.useShallowArrayIdentity)(P),V=(0,g.useMemo)((function(){return[].concat(o(k.defaultShapeUtils),o(B))}),[B]),z=(0,v.useShallowArrayIdentity)(E),H=(0,g.useMemo)((function(){return[].concat(o(x.defaultBindingUtils),o(z))}),[z]),K=(0,v.useShallowArrayIdentity)(A),G=(0,g.useMemo)((function(){return[].concat(o(j.defaultTools),o(O.defaultShapeTools),o(K))}),[K]),q=(0,v.useShallowArrayIdentity)(null!==u&&void 0!==u?u:v.DEFAULT_SUPPORTED_IMAGE_TYPES),W=(0,v.useShallowArrayIdentity)(null!==c&&void 0!==c?c:v.DEFAULT_SUPPORT_VIDEO_TYPES),Y=(0,g.useMemo)((function(){return[].concat(o(q),o(W))}),[q,W]),X=(0,D.useDefaultEditorAssetsWithOverrides)(L.assetUrls),Z=(0,M.usePreloadAssets)(X),$=Z.done;return Z.error?(0,h.jsx)(v.ErrorScreen,{children:"Could not load assets. Please refresh the page."}):$?(V.find((function(e){return"embed"===e.type}))&&R&&I.EmbedShapeUtil.setEmbedDefinitions(R),(0,h.jsx)(v.TldrawEditor,i(i({initialState:"select"},L),{},{components:F,shapeUtils:V,bindingUtils:H,tools:G,children:(0,h.jsxs)(T.TldrawUi,i(i({},L),{},{components:F,mediaMimeTypes:Y,children:[(0,h.jsx)(N,{maxImageDimension:n,maxAssetSize:r,acceptedImageMimeTypes:q,acceptedVideoMimeTypes:W,onMount:l}),t]}))}))):(0,h.jsx)(v.LoadingScreen,{children:(0,h.jsx)(v.DefaultSpinner,{})})}function N(e){var t=e.maxImageDimension,n=void 0===t?5e3:t,r=e.maxAssetSize,o=void 0===r?10485760:r,i=e.acceptedImageMimeTypes,a=void 0===i?v.DEFAULT_SUPPORTED_IMAGE_TYPES:i,u=e.acceptedVideoMimeTypes,s=void 0===u?v.DEFAULT_SUPPORT_VIDEO_TYPES:u,c=e.onMount,l=(0,v.useEditor)(),f=(0,C.useToasts)(),d=(0,A.useTranslation)();(0,v.useOnMount)((function(){var e=[];return e.push((0,_.registerDefaultSideEffects)(l)),(0,P.registerDefaultExternalContentHandlers)(l,{maxImageDimension:n,maxAssetSize:o,acceptedImageMimeTypes:a,acceptedVideoMimeTypes:s},{toasts:f,msg:d}),e.push(l.store.props.onMount(l)),e.push(null===c||void 0===c?void 0:c(l)),function(){e.forEach((function(e){return null===e||void 0===e?void 0:e()}))}}));var p=(0,v.useEditorComponents)().Canvas,g=(0,E.useTldrawUiComponents)().ContextMenu;return g?(0,h.jsx)(g,{}):p?(0,h.jsx)(p,{}):null}},90450:function(e,t,n){"use strict";var r,o=n(4633).default,i=n(29293).default,a=n(41132).default,u=n(85715).default,s=n(50883).default,c=Object.defineProperty,l=Object.getOwnPropertyDescriptor,f=Object.getOwnPropertyNames,d=Object.prototype.hasOwnProperty,p={};!function(e,t){for(var n in t)c(e,n,{get:t[n],enumerable:!0})}(p,{TldrawImage:function(){return x}}),e.exports=(r=p,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,i=s(f(t));try{var a=function(){var i=o.value;d.call(e,i)||i===n||c(e,i,{get:function(){return t[i]},enumerable:!(r=l(t,i))||r.enumerable})};for(i.s();!(o=i.n()).done;)a()}catch(u){i.e(u)}finally{i.f()}}return e}(c({},"__esModule",{value:!0}),r));var h=n(44414),v=n(57777),g=n(9950),y=n(39558),m=n(32982),b=n(30762),w=n(51218),S=n(94730),x=(0,g.memo)((function(e){var t,n,r=(0,g.useState)(null),s=u(r,2),c=s[0],l=s[1],f=(0,g.useState)(null),d=u(f,2),p=d[0],x=d[1],P=(0,v.useShallowArrayIdentity)(null!==(t=e.shapeUtils)&&void 0!==t?t:[]),O=(0,g.useMemo)((function(){return[].concat(a(m.defaultShapeUtils),a(P))}),[P]),k=(0,v.useShallowArrayIdentity)(null!==(n=e.bindingUtils)&&void 0!==n?n:[]),_=(0,g.useMemo)((function(){return[].concat(a(y.defaultBindingUtils),a(k))}),[k]),j=(0,v.useTLStore)({snapshot:e.snapshot,shapeUtils:O}),I=(0,S.useDefaultEditorAssetsWithOverrides)(e.assetUrls),T=(0,b.usePreloadAssets)(I),E=T.done,C=T.error,M=e.pageId,A=e.bounds,D=e.scale,R=e.pixelRatio,N=e.background,L=e.padding,U=e.darkMode,F=e.preserveAspectRatio,B=e.format,V=void 0===B?"svg":B,z=e.licenseKey;return(0,g.useLayoutEffect)((function(){if(p&&j&&E){var e=!1,t=document.createElement("div");p.appendChild(t),p.classList.add("tl-container","tl-theme__light");var n=new v.Editor({store:j,shapeUtils:O,bindingUtils:_,tools:[],getContainer:function(){return t},licenseKey:z});M&&n.setCurrentPage(M);var r=n.getCurrentPageShapeIds();return function(){u.apply(this,arguments)}(),function(){e=!0}}function u(){return(u=i(o().mark((function t(){var i,u,s,c,f;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.getSvgString(a(r),{bounds:A,scale:D,background:N,padding:L,darkMode:U,preserveAspectRatio:F});case 2:if(!(i=t.sent)||e){t.next=13;break}if("svg"!==V){t.next=8;break}e||(u=new Blob([i.svg],{type:"image/svg+xml"}),s=URL.createObjectURL(u),l(s)),t.next=13;break;case 8:if("png"!==V){t.next=13;break}return t.next=11,(0,w.getSvgAsImage)(n,i.svg,{type:V,width:i.width,height:i.height,pixelRatio:R});case 11:(c=t.sent)&&!e&&(f=URL.createObjectURL(c),l(f));case 13:n.dispose();case 14:case"end":return t.stop()}}),t)})))).apply(this,arguments)}}),[V,p,j,O,_,M,A,D,N,L,U,F,E,C,z,R]),C?(0,h.jsx)(v.ErrorScreen,{children:"Could not load assets."}):E?(0,h.jsx)("div",{ref:x,style:{position:"relative",width:"100%",height:"100%"},children:c&&(0,h.jsx)("img",{src:c,referrerPolicy:"strict-origin-when-cross-origin",style:{width:"100%",height:"100%"}})}):(0,h.jsx)(v.LoadingScreen,{children:(0,h.jsx)(v.DefaultSpinner,{})})}))},17402:function(e,t,n){"use strict";var r,o=n(17383).default,i=n(34579).default,a=n(18336).default,u=n(29511).default,s=n(43693).default,c=n(50883).default,l=Object.defineProperty,f=Object.getOwnPropertyDescriptor,d=Object.getOwnPropertyNames,p=Object.prototype.hasOwnProperty,h={};!function(e,t){for(var n in t)l(e,n,{get:t[n],enumerable:!0})}(h,{ArrowBindingUtil:function(){return y},updateArrowTerminal:function(){return w}}),e.exports=(r=h,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,i=c(d(t));try{var a=function(){var i=o.value;p.call(e,i)||i===n||l(e,i,{get:function(){return t[i]},enumerable:!(r=f(t,i))||r.enumerable})};for(i.s();!(o=i.n()).done;)a()}catch(u){i.e(u)}finally{i.f()}}return e}(l({},"__esModule",{value:!0}),r));var v=n(57777),g=n(64761),y=function(e){function t(){return o(this,t),a(this,t,arguments)}return u(t,e),i(t,[{key:"getDefaultProps",value:function(){return{isPrecise:!1,isExact:!1,normalizedAnchor:{x:.5,y:.5}}}},{key:"onAfterCreate",value:function(e){var t=e.binding,n=this.editor.getShape(t.fromId);n&&b(this.editor,n)}},{key:"onAfterChange",value:function(e){var t=e.bindingAfter,n=this.editor.getShape(t.fromId);n&&b(this.editor,n)}},{key:"onAfterChangeFromShape",value:function(e){var t=e.shapeAfter;b(this.editor,t)}},{key:"onAfterChangeToShape",value:function(e){var t=e.binding;m(this.editor,t.fromId)}},{key:"onBeforeIsolateFromShape",value:function(e){var t=e.binding,n=this.editor.getShape(t.fromId);n&&w({editor:this.editor,arrow:n,terminal:t.props.terminal})}}])}(v.BindingUtil);function m(e,t){var n=e.getShape(t);if(n){var r=(0,g.getArrowBindings)(e,n),o=r.start,i=r.end,a=o?e.getShape(o.toId):void 0,u=i?e.getShape(i.toId):void 0,s=e.getAncestorPageId(n);if(s){var c;if(a&&u){var l;c=null!==(l=e.findCommonAncestor([a,u]))&&void 0!==l?l:s}else{if(!a&&!u)return;var f,d=null===(f=a||u)||void 0===f?void 0:f.parentId;c=d&&d===n.parentId?n.parentId:s}c&&c!==n.parentId&&e.reparentShapes([t],c);var p=e.getShape(t);if(!p)throw Error("no reparented arrow");var h,y,m=e.getShapeNearestSibling(p,a),b=e.getShapeNearestSibling(p,u);if(m&&b)h=m.index>b.index?m:b;else if(m&&!b)h=m;else{if(!b||m)return;h=b}var w=e.getSortedChildIdsForParent(h.parentId).map((function(t){return e.getShape(t)})).filter((function(e){return e.index>h.index}));if(w.length){var S=w.find((function(e){return"arrow"!==e.type}));if(p.index>h.index&&(!S||p.index<S.index))return;y=(0,v.getIndexBetween)(h.index,w[0].index)}else y=(0,v.getIndexAbove)(h.index);y!==p.index&&e.updateShapes([{id:t,type:"arrow",index:y}])}}}function b(e,t){for(var n=(0,g.getArrowBindings)(e,t),r=0,o=["start","end"];r<o.length;r++){var i=o[r],a=n[i];if(a){var u=e.getShape(a.toId),s=e.getAncestorPageId(t)===e.getAncestorPageId(u);u&&s||w({editor:e,arrow:t,terminal:i,unbind:!0})}}m(e,t.id)}function w(e){var t=e.editor,n=e.arrow,r=e.terminal,o=e.unbind,i=void 0!==o&&o,a=e.useHandle,u=void 0!==a&&a,c=(0,g.getArrowInfo)(t,n);if(!c)throw new Error("expected arrow info");var l=u?c.start.handle:c.start.point,f=u?c.end.handle:c.end.point,d="start"===r?l:f,p={id:n.id,type:"arrow",props:s(s({},r,{x:d.x,y:d.y}),"bend",n.props.bend)};if(!c.isStraight){var h="start"===r?l:c.start.handle,y="end"===r?f:c.end.handle,m=v.Vec.Med(h,y),b=v.Vec.Sub(h,y).per().uni().mul(2*c.handleArc.radius*Math.sign(n.props.bend)),w=(0,v.intersectLineSegmentCircle)(c.handleArc.center,v.Vec.Add(m,b),c.handleArc.center,c.handleArc.radius);(0,v.assert)(1===(null===w||void 0===w?void 0:w.length));var S=v.Vec.Dist(m,w[0])*Math.sign(n.props.bend);(0,v.approximately)(S,p.props.bend)||(p.props.bend=S)}t.updateShape(p),i&&(0,g.removeArrowBinding)(t,n,r)}s(y,"type","arrow"),s(y,"props",v.arrowBindingProps),s(y,"migrations",v.arrowBindingMigrations)},99717:function(e,t,n){"use strict";var r,o=n(50883).default,i=Object.create,a=Object.defineProperty,u=Object.getOwnPropertyDescriptor,s=Object.getOwnPropertyNames,c=Object.getPrototypeOf,l=Object.prototype.hasOwnProperty,f=function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var i,c=o(s(t));try{var f=function(){var o=i.value;l.call(e,o)||o===n||a(e,o,{get:function(){return t[o]},enumerable:!(r=u(t,o))||r.enumerable})};for(c.s();!(i=c.n()).done;)f()}catch(d){c.e(d)}finally{c.f()}}return e},d={};!function(e,t){for(var n in t)a(e,n,{get:t[n],enumerable:!0})}(d,{TldrawCropHandles:function(){return g}}),e.exports=(r=d,f(a({},"__esModule",{value:!0}),r));var p=n(44414),h=n(57777),v=function(e,t,n){return n=null!=e?i(c(e)):{},f(!t&&e&&e.__esModule?n:a(n,"default",{value:e,enumerable:!0}),e)}(n(48738));function g(e){var t=e.size,n=e.width,r=e.height,o=e.hideAlternateHandles,i=(0,h.toDomPrecision)(t/3),a=i/2;return(0,p.jsxs)("svg",{className:"tl-overlays__item",children:[(0,p.jsx)("polyline",{className:"tl-corner-crop-handle",points:"\n\t\t\t\t\t\t".concat((0,h.toDomPrecision)(0-a),",").concat((0,h.toDomPrecision)(t)," \n\t\t\t\t\t\t").concat((0,h.toDomPrecision)(0-a),",").concat((0,h.toDomPrecision)(0-a)," \n\t\t\t\t\t\t").concat((0,h.toDomPrecision)(t),",").concat((0,h.toDomPrecision)(0-a)),strokeWidth:i,"data-testid":"selection.crop.top_left","aria-label":"top_left handle"}),(0,p.jsx)("line",{className:(0,v.default)("tl-corner-crop-edge-handle",{"tl-hidden":o}),x1:(0,h.toDomPrecision)(n/2-t),y1:(0,h.toDomPrecision)(0-a),x2:(0,h.toDomPrecision)(n/2+t),y2:(0,h.toDomPrecision)(0-a),strokeWidth:i,"data-testid":"selection.crop.top","aria-label":"top handle"}),(0,p.jsx)("polyline",{className:(0,v.default)("tl-corner-crop-handle",{"tl-hidden":o}),points:"\n\t\t\t\t\t\t".concat((0,h.toDomPrecision)(n-t),",").concat((0,h.toDomPrecision)(0-a)," \n\t\t\t\t\t\t").concat((0,h.toDomPrecision)(n+a),",").concat((0,h.toDomPrecision)(0-a)," \n\t\t\t\t\t\t").concat((0,h.toDomPrecision)(n+a),",").concat((0,h.toDomPrecision)(t)),strokeWidth:i,"data-testid":"selection.crop.top_right","aria-label":"top_right handle"}),(0,p.jsx)("line",{className:(0,v.default)("tl-corner-crop-edge-handle",{"tl-hidden":o}),x1:(0,h.toDomPrecision)(n+a),y1:(0,h.toDomPrecision)(r/2-t),x2:(0,h.toDomPrecision)(n+a),y2:(0,h.toDomPrecision)(r/2+t),strokeWidth:i,"data-testid":"selection.crop.right","aria-label":"right handle"}),(0,p.jsx)("polyline",{className:"tl-corner-crop-handle",points:"\n\t\t\t\t\t\t".concat((0,h.toDomPrecision)(n+a),",").concat((0,h.toDomPrecision)(r-t)," \n\t\t\t\t\t\t").concat((0,h.toDomPrecision)(n+a),",").concat((0,h.toDomPrecision)(r+a),"\n\t\t\t\t\t\t").concat((0,h.toDomPrecision)(n-t),",").concat((0,h.toDomPrecision)(r+a)),strokeWidth:i,"data-testid":"selection.crop.bottom_right","aria-label":"bottom_right handle"}),(0,p.jsx)("line",{className:(0,v.default)("tl-corner-crop-edge-handle",{"tl-hidden":o}),x1:(0,h.toDomPrecision)(n/2-t),y1:(0,h.toDomPrecision)(r+a),x2:(0,h.toDomPrecision)(n/2+t),y2:(0,h.toDomPrecision)(r+a),strokeWidth:i,"data-testid":"selection.crop.bottom","aria-label":"bottom handle"}),(0,p.jsx)("polyline",{className:(0,v.default)("tl-corner-crop-handle",{"tl-hidden":o}),points:"\n\t\t\t\t\t\t".concat((0,h.toDomPrecision)(0+t),",").concat((0,h.toDomPrecision)(r+a)," \n\t\t\t\t\t\t").concat((0,h.toDomPrecision)(0-a),",").concat((0,h.toDomPrecision)(r+a),"\n\t\t\t\t\t\t").concat((0,h.toDomPrecision)(0-a),",").concat((0,h.toDomPrecision)(r-t)),strokeWidth:i,"data-testid":"selection.crop.bottom_left","aria-label":"bottom_left handle"}),(0,p.jsx)("line",{className:(0,v.default)("tl-corner-crop-edge-handle",{"tl-hidden":o}),x1:(0,h.toDomPrecision)(0-a),y1:(0,h.toDomPrecision)(r/2-t),x2:(0,h.toDomPrecision)(0-a),y2:(0,h.toDomPrecision)(r/2+t),strokeWidth:i,"data-testid":"selection.crop.left","aria-label":"left handle"})]})}},51563:function(e,t,n){"use strict";var r,o=n(50883).default,i=Object.defineProperty,a=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,c={};!function(e,t){for(var n in t)i(e,n,{get:t[n],enumerable:!0})}(c,{TldrawHandles:function(){return d}}),e.exports=(r=c,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var c,l=o(u(t));try{var f=function(){var o=c.value;s.call(e,o)||o===n||i(e,o,{get:function(){return t[o]},enumerable:!(r=a(t,o))||r.enumerable})};for(l.s();!(c=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(i({},"__esModule",{value:!0}),r));var l=n(44414),f=n(57777);function d(e){var t=e.children,n=(0,f.useEditor)();return(0,f.useValue)("shouldDisplayHandles",(function(){if(n.isInAny("select.idle","select.pointing_handle","select.pointing_shape"))return!0;if(n.isInAny("select.editing_shape")){var e=n.getOnlySelectedShape();return e&&n.isShapeOfType(e,"note")}return!1}),[n])?(0,l.jsx)("svg",{className:"tl-user-handles tl-overlays__item",children:t}):null}},85450:function(e,t,n){"use strict";var r,o=n(50883).default,i=Object.create,a=Object.defineProperty,u=Object.getOwnPropertyDescriptor,s=Object.getOwnPropertyNames,c=Object.getPrototypeOf,l=Object.prototype.hasOwnProperty,f=function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var i,c=o(s(t));try{var f=function(){var o=i.value;l.call(e,o)||o===n||a(e,o,{get:function(){return t[o]},enumerable:!(r=u(t,o))||r.enumerable})};for(c.s();!(i=c.n()).done;)f()}catch(d){c.e(d)}finally{c.f()}}return e},d={};!function(e,t){for(var n in t)a(e,n,{get:t[n],enumerable:!0})}(d,{TldrawScribble:function(){return y}}),e.exports=(r=d,f(a({},"__esModule",{value:!0}),r));var p=n(44414),h=n(57777),v=function(e,t,n){return n=null!=e?i(c(e)):{},f(!t&&e&&e.__esModule?n:a(n,"default",{value:e,enumerable:!0}),e)}(n(48738)),g=n(29738);function y(e){var t=e.scribble,n=e.zoom,r=e.color,o=e.opacity,i=e.className;if(!t.points.length)return null;var a,u=(0,g.getStroke)(t.points,{size:t.size/n,start:{taper:t.taper,easing:h.EASINGS.linear},last:"stopping"===t.state,simulatePressure:!1,streamline:.32});if(u.length<4){var s=t.size/n/2,c=t.points[t.points.length-1],l=c.x,f=c.y;a="M ".concat(l-s,",").concat(f," a ").concat(s,",").concat(s," 0 1,0 ").concat(2*s,",0 a ").concat(s,",").concat(s," 0 1,0 ").concat(2*-s,",0")}else a=(0,h.getSvgPathFromPoints)(u);return(0,p.jsx)("svg",{className:i?(0,v.default)("tl-overlays__item",i):i,children:(0,p.jsx)("path",{className:"tl-scribble",d:a,fill:null!==r&&void 0!==r?r:"var(--color-".concat(t.color,")"),opacity:null!==o&&void 0!==o?o:t.opacity})})}},11293:function(e,t,n){"use strict";var r,o=n(50883).default,i=Object.defineProperty,a=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,c={};!function(e,t){for(var n in t)i(e,n,{get:t[n],enumerable:!0})}(c,{TldrawSelectionBackground:function(){return d}}),e.exports=(r=c,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var c,l=o(u(t));try{var f=function(){var o=c.value;s.call(e,o)||o===n||i(e,o,{get:function(){return t[o]},enumerable:!(r=a(t,o))||r.enumerable})};for(l.s();!(c=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(i({},"__esModule",{value:!0}),r));var l=n(44414),f=n(57777),d=function(e){var t=e.bounds,n=e.rotation,r=(0,f.useEditor)();return(0,f.useValue)("should display",(function(){return r.isInAny("select.idle","select.brushing","select.scribble_brushing","select.pointing_shape","select.pointing_selection","text.resizing")}),[r])?(0,l.jsx)(f.DefaultSelectionBackground,{bounds:t,rotation:n}):null}},70235:function(e,t,n){"use strict";var r,o=n(12897).default,i=n(50883).default,a=Object.create,u=Object.defineProperty,s=Object.getOwnPropertyDescriptor,c=Object.getOwnPropertyNames,l=Object.getPrototypeOf,f=Object.prototype.hasOwnProperty,d=function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,a=i(c(t));try{var l=function(){var i=o.value;f.call(e,i)||i===n||u(e,i,{get:function(){return t[i]},enumerable:!(r=s(t,i))||r.enumerable})};for(a.s();!(o=a.n()).done;)l()}catch(d){a.e(d)}finally{a.f()}}return e},p={};!function(e,t){for(var n in t)u(e,n,{get:t[n],enumerable:!0})}(p,{MobileRotateHandle:function(){return P},RotateCornerHandle:function(){return S},TldrawSelectionForeground:function(){return w}}),e.exports=(r=p,d(u({},"__esModule",{value:!0}),r));var h=n(44414),v=n(57777),g=function(e,t,n){return n=null!=e?a(l(e)):{},d(!t&&e&&e.__esModule?n:u(n,"default",{value:e,enumerable:!0}),e)}(n(48738)),y=n(9950),m=n(19098),b=n(99717),w=(0,v.track)((function(e){var t=e.bounds,n=e.rotation,r=(0,v.useEditor)(),i=(0,y.useRef)(null),a=(0,m.useReadonly)(),u=(0,v.useSelectionEvents)("top"),s=(0,v.useSelectionEvents)("right"),c=(0,v.useSelectionEvents)("bottom"),l=(0,v.useSelectionEvents)("left"),f=(0,v.useSelectionEvents)("top_left"),d=(0,v.useSelectionEvents)("top_right"),p=(0,v.useSelectionEvents)("bottom_right"),w=(0,v.useSelectionEvents)("bottom_left"),x="default"===r.getInstanceState().cursor.type,O=r.getInstanceState().isCoarsePointer,k=r.getOnlySelectedShape(),_=k&&r.isShapeOrAncestorLocked(k),j=k?r.getShapeUtil(k).expandSelectionOutlinePx(k):0,I=j instanceof v.Box?t.clone().expand(j).zeroFix():t.clone().expandBy(j).zeroFix();if((0,v.useTransform)(i,null===t||void 0===t?void 0:t.x,null===t||void 0===t?void 0:t.y,1,r.getSelectionRotation(),{x:I.x-t.x,y:I.y-t.y}),k&&r.isShapeHidden(k))return null;var T=r.getZoomLevel(),E=r.getInstanceState().isChangingStyle,C=I.width,M=I.height,A=8/T,D=C<2*A,R=M<2*A,N=C<4*A,L=M<4*A,U=C<5*A,F=M<5*A,B=O?1.75:1,V=6/T*B,z=(N?V/2:V)*(.75*B),H=(L?V/2:V)*(.75*B),K=(!k||!r.getShapeUtil(k).hideSelectionBoundsFg(k))&&!E,G=K&&r.isInAny("select.idle","select.brushing","select.scribble_brushing","select.pointing_canvas","select.pointing_selection","select.pointing_shape","select.crop.idle","select.crop.pointing_crop","select.crop.pointing_crop_handle","select.pointing_resize_handle")||K&&r.isIn("select.resizing")&&k&&r.isShapeOfType(k,"text");k&&G&&v.tlenv.isFirefox&&r.isShapeOfType(k,"embed")&&(G=!1);var q=r.isInAny("select.crop.idle","select.crop.pointing_crop","select.crop.pointing_crop_handle")&&!E&&!a,W=r.isInAny("select.idle","select.pointing_selection","select.pointing_shape","select.crop.idle")&&!E&&!a,Y=!O&&!(D||R)&&(W||q)&&(!k||!r.getShapeUtil(k).hideRotateHandle(k))&&!_,X=O&&(!N||!L)&&(W||q)&&(!k||!r.getShapeUtil(k).hideRotateHandle(k))&&!_,Z=W&&(!k||r.getShapeUtil(k).canResize(k)&&!r.getShapeUtil(k).hideResizeHandles(k))&&!q&&!_,$=D||R,Q=D&&R,J=U||F,ee=Z||q,te=!Y,ne=!W||!X,re=!W||!ee,oe=!W||!ee||$,ie=!W||!ee||$,ae=!W||!ee||Q&&!q,ue=!0,se=!0;if(q)ue=J,se=J;else if(Z){ue=$||Q||O;var ce=O&&k&&"text"===k.type;se=ue&&!ce}var le=Math.min(24/T,M-3*H),fe=W&&O&&k&&r.isShapeOfType(k,"text")&&le*T>=4;return(0,h.jsx)("svg",{className:"tl-overlays__item tl-selection__fg","data-testid":"selection-foreground",children:(0,h.jsxs)("g",{ref:i,children:[G&&(0,h.jsx)("rect",{className:"tl-selection__fg__outline",width:(0,v.toDomPrecision)(C),height:(0,v.toDomPrecision)(M)}),(0,h.jsx)(S,{"data-testid":"selection.rotate.top-left",cx:0,cy:0,targetSize:V,corner:"top_left_rotate",cursor:x?(0,v.getCursor)("nwse-rotate",n):void 0,isHidden:te}),(0,h.jsx)(S,{"data-testid":"selection.rotate.top-right",cx:C+3*V,cy:0,targetSize:V,corner:"top_right_rotate",cursor:x?(0,v.getCursor)("nesw-rotate",n):void 0,isHidden:te}),(0,h.jsx)(S,{"data-testid":"selection.rotate.bottom-left",cx:0,cy:M+3*V,targetSize:V,corner:"bottom_left_rotate",cursor:x?(0,v.getCursor)("swne-rotate",n):void 0,isHidden:te}),(0,h.jsx)(S,{"data-testid":"selection.rotate.bottom-right",cx:C+3*V,cy:M+3*V,targetSize:V,corner:"bottom_right_rotate",cursor:x?(0,v.getCursor)("senw-rotate",n):void 0,isHidden:te}),(0,h.jsx)(P,{"data-testid":"selection.rotate.mobile",cx:N?1.5*-V:C/2,cy:N?M/2:1.5*-V,size:A,isHidden:ne}),(0,h.jsx)("rect",o({className:(0,g.default)("tl-transparent",{"tl-hidden":ue}),"data-testid":"selection.resize.top","aria-label":"top target",pointerEvents:"all",x:0,y:(0,v.toDomPrecision)(0-(L?2*H:H)),width:(0,v.toDomPrecision)(C),height:(0,v.toDomPrecision)(Math.max(1,2*H)),style:x?{cursor:(0,v.getCursor)("ns-resize",n)}:void 0},u)),(0,h.jsx)("rect",o({className:(0,g.default)("tl-transparent",{"tl-hidden":se}),"data-testid":"selection.resize.right","aria-label":"right target",pointerEvents:"all",x:(0,v.toDomPrecision)(C-(N?0:z)),y:0,height:(0,v.toDomPrecision)(M),width:(0,v.toDomPrecision)(Math.max(1,2*z)),style:x?{cursor:(0,v.getCursor)("ew-resize",n)}:void 0},s)),(0,h.jsx)("rect",o({className:(0,g.default)("tl-transparent",{"tl-hidden":ue}),"data-testid":"selection.resize.bottom","aria-label":"bottom target",pointerEvents:"all",x:0,y:(0,v.toDomPrecision)(M-(L?0:H)),width:(0,v.toDomPrecision)(C),height:(0,v.toDomPrecision)(Math.max(1,2*H)),style:x?{cursor:(0,v.getCursor)("ns-resize",n)}:void 0},c)),(0,h.jsx)("rect",o({className:(0,g.default)("tl-transparent",{"tl-hidden":se}),"data-testid":"selection.resize.left","aria-label":"left target",pointerEvents:"all",x:(0,v.toDomPrecision)(0-(N?2*z:z)),y:0,height:(0,v.toDomPrecision)(M),width:(0,v.toDomPrecision)(Math.max(1,2*z)),style:x?{cursor:(0,v.getCursor)("ew-resize",n)}:void 0},l)),(0,h.jsx)("rect",o({className:(0,g.default)("tl-transparent",{"tl-hidden":re}),"data-testid":"selection.target.top-left","aria-label":"top-left target",pointerEvents:"all",x:(0,v.toDomPrecision)(0-(N?2*z:1.5*z)),y:(0,v.toDomPrecision)(0-(L?2*H:1.5*H)),width:(0,v.toDomPrecision)(3*z),height:(0,v.toDomPrecision)(3*H),style:x?{cursor:(0,v.getCursor)("nwse-resize",n)}:void 0},f)),(0,h.jsx)("rect",o({className:(0,g.default)("tl-transparent",{"tl-hidden":oe}),"data-testid":"selection.target.top-right","aria-label":"top-right target",pointerEvents:"all",x:(0,v.toDomPrecision)(C-(N?0:1.5*z)),y:(0,v.toDomPrecision)(0-(L?2*H:1.5*H)),width:(0,v.toDomPrecision)(3*z),height:(0,v.toDomPrecision)(3*H),style:x?{cursor:(0,v.getCursor)("nesw-resize",n)}:void 0},d)),(0,h.jsx)("rect",o({className:(0,g.default)("tl-transparent",{"tl-hidden":ae}),"data-testid":"selection.target.bottom-right","aria-label":"bottom-right target",pointerEvents:"all",x:(0,v.toDomPrecision)(C-(N?z:1.5*z)),y:(0,v.toDomPrecision)(M-(L?H:1.5*H)),width:(0,v.toDomPrecision)(3*z),height:(0,v.toDomPrecision)(3*H),style:x?{cursor:(0,v.getCursor)("nwse-resize",n)}:void 0},p)),(0,h.jsx)("rect",o({className:(0,g.default)("tl-transparent",{"tl-hidden":ie}),"data-testid":"selection.target.bottom-left","aria-label":"bottom-left target",pointerEvents:"all",x:(0,v.toDomPrecision)(0-(N?3*z:1.5*z)),y:(0,v.toDomPrecision)(M-(L?0:1.5*H)),width:(0,v.toDomPrecision)(3*z),height:(0,v.toDomPrecision)(3*H),style:x?{cursor:(0,v.getCursor)("nesw-resize",n)}:void 0},w)),Z&&(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)("rect",{"data-testid":"selection.resize.top-left",className:(0,g.default)("tl-corner-handle",{"tl-hidden":re}),"aria-label":"top_left handle",x:(0,v.toDomPrecision)(0-A/2),y:(0,v.toDomPrecision)(0-A/2),width:(0,v.toDomPrecision)(A),height:(0,v.toDomPrecision)(A)}),(0,h.jsx)("rect",{"data-testid":"selection.resize.top-right",className:(0,g.default)("tl-corner-handle",{"tl-hidden":oe}),"aria-label":"top_right handle",x:(0,v.toDomPrecision)(C-A/2),y:(0,v.toDomPrecision)(0-A/2),width:(0,v.toDomPrecision)(A),height:(0,v.toDomPrecision)(A)}),(0,h.jsx)("rect",{"data-testid":"selection.resize.bottom-right",className:(0,g.default)("tl-corner-handle",{"tl-hidden":ae}),"aria-label":"bottom_right handle",x:(0,v.toDomPrecision)(C-A/2),y:(0,v.toDomPrecision)(M-A/2),width:(0,v.toDomPrecision)(A),height:(0,v.toDomPrecision)(A)}),(0,h.jsx)("rect",{"data-testid":"selection.resize.bottom-left",className:(0,g.default)("tl-corner-handle",{"tl-hidden":ie}),"aria-label":"bottom_left handle",x:(0,v.toDomPrecision)(0-A/2),y:(0,v.toDomPrecision)(M-A/2),width:(0,v.toDomPrecision)(A),height:(0,v.toDomPrecision)(A)})]}),fe&&(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)("rect",{"data-testid":"selection.text-resize.left.handle",className:"tl-text-handle","aria-label":"bottom_left handle",x:(0,v.toDomPrecision)(0-A/4),y:(0,v.toDomPrecision)(M/2-le/2),rx:A/4,width:(0,v.toDomPrecision)(A/2),height:(0,v.toDomPrecision)(le)}),(0,h.jsx)("rect",{"data-testid":"selection.text-resize.right.handle",className:"tl-text-handle","aria-label":"bottom_left handle",rx:A/4,x:(0,v.toDomPrecision)(C-A/4),y:(0,v.toDomPrecision)(M/2-le/2),width:(0,v.toDomPrecision)(A/2),height:(0,v.toDomPrecision)(le)})]}),q&&(0,h.jsx)(b.TldrawCropHandles,o({},{size:A,width:C,height:M,hideAlternateHandles:J}))]})})})),S=function(e){var t=e.cx,n=e.cy,r=e.targetSize,i=e.corner,a=e.cursor,u=e.isHidden,s=e["data-testid"],c=(0,v.useSelectionEvents)(i);return(0,h.jsx)("rect",o({className:(0,g.default)("tl-transparent","tl-rotate-corner",{"tl-hidden":u}),"data-testid":s,"aria-label":"".concat(i," target"),pointerEvents:"all",x:(0,v.toDomPrecision)(t-3*r),y:(0,v.toDomPrecision)(n-3*r),width:(0,v.toDomPrecision)(Math.max(1,3*r)),height:(0,v.toDomPrecision)(Math.max(1,3*r)),cursor:a},c))},x=Math.sqrt(Math.PI),P=function(e){var t=e.cx,n=e.cy,r=e.size,i=e.isHidden,a=e["data-testid"],u=(0,v.useSelectionEvents)("mobile_rotate"),s=(0,v.useEditor)(),c=(0,v.useValue)("zoom level",(function(){return s.getZoomLevel()}),[s]),l=Math.max(1/c*14,20/Math.max(1,c));return(0,h.jsxs)("g",{children:[(0,h.jsx)("circle",o({"data-testid":a,pointerEvents:"all",className:(0,g.default)("tl-transparent","tl-mobile-rotate__bg",{"tl-hidden":i}),cx:t,cy:n,r:l},u)),(0,h.jsx)("circle",{className:(0,g.default)("tl-mobile-rotate__fg",{"tl-hidden":i}),cx:t,cy:n,r:r/x})]})}},57931:function(e,t,n){"use strict";var r,o=n(50883).default,i=Object.defineProperty,a=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,c={};!function(e,t){for(var n in t)i(e,n,{get:t[n],enumerable:!0})}(c,{TldrawShapeIndicators:function(){return d}}),e.exports=(r=c,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var c,l=o(u(t));try{var f=function(){var o=c.value;s.call(e,o)||o===n||i(e,o,{get:function(){return t[o]},enumerable:!(r=a(t,o))||r.enumerable})};for(l.s();!(c=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(i({},"__esModule",{value:!0}),r));var l=n(44414),f=n(57777);function d(){var e=(0,f.useEditor)();return(0,f.useValue)("is in a valid select state",(function(){return e.isInAny("select.idle","select.brushing","select.scribble_brushing","select.editing_shape","select.pointing_shape","select.pointing_selection","select.pointing_handle")}),[e])?(0,l.jsx)(f.DefaultShapeIndicators,{}):null}},39558:function(e,t,n){"use strict";var r,o=n(50883).default,i=Object.defineProperty,a=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,c={};!function(e,t){for(var n in t)i(e,n,{get:t[n],enumerable:!0})}(c,{defaultBindingUtils:function(){return l}}),e.exports=(r=c,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var c,l=o(u(t));try{var f=function(){var o=c.value;s.call(e,o)||o===n||i(e,o,{get:function(){return t[o]},enumerable:!(r=a(t,o))||r.enumerable})};for(l.s();!(c=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(i({},"__esModule",{value:!0}),r));var l=[n(17402).ArrowBindingUtil]},4033:function(e,t,n){"use strict";var r,o=n(85715).default,i=n(50883).default,a=Object.defineProperty,u=Object.getOwnPropertyDescriptor,s=Object.getOwnPropertyNames,c=Object.prototype.hasOwnProperty,l={};!function(e,t){for(var n in t)a(e,n,{get:t[n],enumerable:!0})}(l,{DEFAULT_EMBED_DEFINITIONS:function(){return p},embedShapePermissionDefaults:function(){return h},isCustomEmbedDefinition:function(){return y},isDefaultEmbedDefinitionType:function(){return g}}),e.exports=(r=l,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,l=i(s(t));try{var f=function(){var i=o.value;c.call(e,i)||i===n||a(e,i,{get:function(){return t[i]},enumerable:!(r=u(t,i))||r.enumerable})};for(l.s();!(o=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(a({},"__esModule",{value:!0}),r));var f=n(57777),d=/(^\/r\/[^/]+\/?$)/,p=[{type:"tldraw",title:"tldraw",hostnames:["beta.tldraw.com","tldraw.com","localhost:3000"],minWidth:300,minHeight:300,width:720,height:500,doesResize:!0,overridePermissions:{"allow-top-navigation":!0},toEmbedUrl:function(e){var t=(0,f.safeParseUrl)(e);if(t&&t.pathname.match(d))return e},fromEmbedUrl:function(e){var t=(0,f.safeParseUrl)(e);if(t&&t.pathname.match(d))return e}},{type:"figma",title:"Figma",hostnames:["figma.com"],width:720,height:500,doesResize:!0,toEmbedUrl:function(e){if(e.match(/https:\/\/([\w\.-]+\.)?figma.com\/(file|proto)\/([0-9a-zA-Z]{22,128})(?:\/.*)?$/)&&!e.includes("figma.com/embed"))return"https://www.figma.com/embed?embed_host=share&url=".concat(e)},fromEmbedUrl:function(e){var t=(0,f.safeParseUrl)(e);if(t&&t.pathname.match(/^\/embed\/?$/)){var n=t.searchParams.get("url");if(n)return n}}},{type:"google_maps",title:"Google Maps",hostnames:["google.*"],width:720,height:500,doesResize:!0,overridePermissions:{"allow-presentation":!0},toEmbedUrl:function(e){if(e.includes("/maps/embed?"))return e;if(e.includes("/maps/")){var t,n=e.match(/@(.*?),(.*?),(.*?)z/);if(n){var r=o(n,4),i=r[1],a=r[2],u=r[3],s=new URL(e).host.replace("www.","");t="https://".concat(s,"/maps/embed/v1/view?key=").concat({NODE_ENV:"production",PUBLIC_URL:"http://127.0.0.1:3000/assets/bundles",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.NEXT_PUBLIC_GC_API_KEY,"&center=").concat(i,",").concat(a,"&zoom=").concat(u)}else t="";return t}},fromEmbedUrl:function(e){var t=(0,f.safeParseUrl)(e);if(t&&(t.pathname.match(/^\/maps\/embed\/v1\/view\/?$/)&&t.searchParams.has("center")&&t.searchParams.get("zoom"))){var n=t.searchParams.get("zoom"),r=t.searchParams.get("center").split(","),i=o(r,2),a=i[0],u=i[1];return"https://www.google.com/maps/@".concat(a,",").concat(u,",").concat(n,"z")}}},{type:"val_town",title:"Val Town",hostnames:["val.town"],minWidth:260,minHeight:100,width:720,height:500,doesResize:!0,toEmbedUrl:function(e){var t=(0,f.safeParseUrl)(e),n=t&&t.pathname.match(/\/v\/(.+)\/?/);if(n)return"https://www.val.town/embed/".concat(n[1])},fromEmbedUrl:function(e){var t=(0,f.safeParseUrl)(e),n=t&&t.pathname.match(/\/embed\/(.+)\/?/);if(n)return"https://www.val.town/v/".concat(n[1])}},{type:"codesandbox",title:"CodeSandbox",hostnames:["codesandbox.io"],minWidth:300,minHeight:300,width:720,height:500,doesResize:!0,toEmbedUrl:function(e){var t=(0,f.safeParseUrl)(e),n=t&&t.pathname.match(/\/s\/([^/]+)\/?/);if(n)return"https://codesandbox.io/embed/".concat(n[1])},fromEmbedUrl:function(e){var t=(0,f.safeParseUrl)(e),n=t&&t.pathname.match(/\/embed\/([^/]+)\/?/);if(n)return"https://codesandbox.io/s/".concat(n[1])}},{type:"codepen",title:"Codepen",hostnames:["codepen.io"],minWidth:300,minHeight:300,width:520,height:400,doesResize:!0,toEmbedUrl:function(e){var t=e.match(/https:\/\/codepen.io\/([^/]+)\/pen\/([^/]+)/);if(t){var n=o(t,3),r=(n[0],n[1]),i=n[2];return"https://codepen.io/".concat(r,"/embed/").concat(i)}},fromEmbedUrl:function(e){var t=e.match(/https:\/\/codepen.io\/([^/]+)\/embed\/([^/]+)/);if(t){var n=o(t,3),r=(n[0],n[1]),i=n[2];return"https://codepen.io/".concat(r,"/pen/").concat(i)}}},{type:"scratch",title:"Scratch",hostnames:["scratch.mit.edu"],width:520,height:400,doesResize:!1,toEmbedUrl:function(e){var t=e.match(/https?:\/\/scratch.mit.edu\/projects\/([^/]+)/);if(t){var n=o(t,2),r=(n[0],n[1]);return"https://scratch.mit.edu/projects/embed/".concat(r)}},fromEmbedUrl:function(e){var t=e.match(/https:\/\/scratch.mit.edu\/projects\/embed\/([^/]+)/);if(t){var n=o(t,2),r=(n[0],n[1]);return"https://scratch.mit.edu/projects/".concat(r)}}},{type:"youtube",title:"YouTube",hostnames:["*.youtube.com","youtube.com","youtu.be"],width:800,height:450,doesResize:!0,overridePermissions:{"allow-presentation":!0,"allow-popups-to-escape-sandbox":!0},isAspectRatioLocked:!0,toEmbedUrl:function(e){var t=(0,f.safeParseUrl)(e);if(t){var n=t.hostname.replace(/^www./,"");if("youtu.be"===n){var r=t.pathname.split("/").filter(Boolean)[0];return"https://www.youtube.com/embed/".concat(r)}if(("youtube.com"===n||"m.youtube.com"===n)&&t.pathname.match(/^\/watch/)){var o=t.searchParams.get("v");return"https://www.youtube.com/embed/".concat(o)}}},fromEmbedUrl:function(e){var t=(0,f.safeParseUrl)(e);if(t&&"youtube.com"===t.hostname.replace(/^www./,"")){var n=t.pathname.match(/^\/embed\/([^/]+)\/?/);if(n)return"https://www.youtube.com/watch?v=".concat(n[1])}}},{type:"google_calendar",title:"Google Calendar",hostnames:["calendar.google.*"],width:720,height:500,minWidth:460,minHeight:360,doesResize:!0,instructionLink:"https://support.google.com/calendar/answer/41207?hl=en",overridePermissions:{"allow-popups-to-escape-sandbox":!0},toEmbedUrl:function(e){var t=(0,f.safeParseUrl)(e),n=null===t||void 0===t?void 0:t.searchParams.get("cid");if(null!==t&&void 0!==t&&t.pathname.match(/\/calendar\/u\/0/)&&n){t.pathname="/calendar/embed";for(var r=0,o=Array.from(t.searchParams.keys());r<o.length;r++){var i=o[r];t.searchParams.delete(i)}return t.searchParams.set("src",n),t.href}},fromEmbedUrl:function(e){var t=(0,f.safeParseUrl)(e),n=null===t||void 0===t?void 0:t.searchParams.get("src");if(null!==t&&void 0!==t&&t.pathname.match(/\/calendar\/embed/)&&n){t.pathname="/calendar/u/0";for(var r=0,o=Array.from(t.searchParams.keys());r<o.length;r++){var i=o[r];t.searchParams.delete(i)}return t.searchParams.set("cid",n),t.href}}},{type:"google_slides",title:"Google Slides",hostnames:["docs.google.*"],width:720,height:500,minWidth:460,minHeight:360,doesResize:!0,overridePermissions:{"allow-popups-to-escape-sandbox":!0},toEmbedUrl:function(e){var t=(0,f.safeParseUrl)(e);if(null!==t&&void 0!==t&&t.pathname.match(/^\/presentation/)&&null!==t&&void 0!==t&&t.pathname.match(/\/pub\/?$/)){t.pathname=t.pathname.replace(/\/pub$/,"/embed");for(var n=0,r=Array.from(t.searchParams.keys());n<r.length;n++){var o=r[n];t.searchParams.delete(o)}return t.href}},fromEmbedUrl:function(e){var t=(0,f.safeParseUrl)(e);if(null!==t&&void 0!==t&&t.pathname.match(/^\/presentation/)&&null!==t&&void 0!==t&&t.pathname.match(/\/embed\/?$/)){t.pathname=t.pathname.replace(/\/embed$/,"/pub");for(var n=0,r=Array.from(t.searchParams.keys());n<r.length;n++){var o=r[n];t.searchParams.delete(o)}return t.href}}},{type:"github_gist",title:"GitHub Gist",hostnames:["gist.github.com"],width:720,height:500,doesResize:!0,toEmbedUrl:function(e){var t=(0,f.safeParseUrl)(e);if(t&&t.pathname.match(/\/([^/]+)\/([0-9a-f]+)$/)){if(!e.split("/").pop())return;return e}},fromEmbedUrl:function(e){var t=(0,f.safeParseUrl)(e);if(t&&t.pathname.match(/\/([^/]+)\/([0-9a-f]+)$/)){if(!e.split("/").pop())return;return e}}},{type:"replit",title:"Replit",hostnames:["replit.com"],width:720,height:500,doesResize:!0,toEmbedUrl:function(e){var t=(0,f.safeParseUrl)(e);if(t&&t.pathname.match(/\/@([^/]+)\/([^/]+)/))return"".concat(e,"?embed=true")},fromEmbedUrl:function(e){var t=(0,f.safeParseUrl)(e);if(t&&t.pathname.match(/\/@([^/]+)\/([^/]+)/)&&t.searchParams.has("embed"))return t.searchParams.delete("embed"),t.href}},{type:"felt",title:"Felt",hostnames:["felt.com"],width:720,height:500,doesResize:!0,toEmbedUrl:function(e){var t=(0,f.safeParseUrl)(e);if(t&&t.pathname.match(/^\/map\//))return t.origin+"/embed"+t.pathname},fromEmbedUrl:function(e){var t=(0,f.safeParseUrl)(e);if(t&&t.pathname.match(/^\/embed\/map\//))return t.pathname=t.pathname.replace(/^\/embed/,""),t.href}},{type:"spotify",title:"Spotify",hostnames:["open.spotify.com"],width:720,height:500,minHeight:500,overrideOutlineRadius:12,doesResize:!0,toEmbedUrl:function(e){var t=(0,f.safeParseUrl)(e);if(t&&t.pathname.match(/^\/(artist|album)\//))return t.origin+"/embed"+t.pathname},fromEmbedUrl:function(e){var t=(0,f.safeParseUrl)(e);if(t&&t.pathname.match(/^\/embed\/(artist|album)\//))return t.origin+t.pathname.replace(/^\/embed/,"")}},{type:"vimeo",title:"Vimeo",hostnames:["vimeo.com","player.vimeo.com"],width:640,height:360,doesResize:!0,isAspectRatioLocked:!0,toEmbedUrl:function(e){var t=(0,f.safeParseUrl)(e);if(t&&"vimeo.com"===t.hostname&&t.pathname.match(/^\/[0-9]+/))return"https://player.vimeo.com/video/"+t.pathname.split("/")[1]+"?title=0&byline=0"},fromEmbedUrl:function(e){var t=(0,f.safeParseUrl)(e);if(t&&"player.vimeo.com"===t.hostname){var n=t.pathname.match(/^\/video\/([^/]+)\/?$/);if(n)return"https://vimeo.com/"+n[1]}}},{type:"excalidraw",title:"Excalidraw",hostnames:["excalidraw.com"],width:720,height:500,doesResize:!0,isAspectRatioLocked:!0,toEmbedUrl:function(e){var t=(0,f.safeParseUrl)(e);if(t&&t.hash.match(/#room=/))return e},fromEmbedUrl:function(e){var t=(0,f.safeParseUrl)(e);if(t&&t.hash.match(/#room=/))return e}},{type:"observable",title:"Observable",hostnames:["observablehq.com"],width:720,height:500,doesResize:!0,isAspectRatioLocked:!1,backgroundColor:"#fff",toEmbedUrl:function(e){var t=(0,f.safeParseUrl)(e);if(t&&t.pathname.match(/^\/@([^/]+)\/([^/]+)\/?$/))return"".concat(t.origin,"/embed").concat(t.pathname,"?cell=*");if(t&&t.pathname.match(/^\/d\/([^/]+)\/?$/)){var n=t.pathname.replace(/^\/d/,"");return"".concat(t.origin,"/embed").concat(n,"?cell=*")}},fromEmbedUrl:function(e){var t=(0,f.safeParseUrl)(e);return t&&t.pathname.match(/^\/embed\/@([^/]+)\/([^/]+)\/?$/)?"".concat(t.origin).concat(t.pathname.replace("/embed",""),"#cell-*"):t&&t.pathname.match(/^\/embed\/([^/]+)\/?$/)?"".concat(t.origin).concat(t.pathname.replace("/embed","/d"),"#cell-*"):void 0}},{type:"desmos",title:"Desmos",hostnames:["desmos.com"],width:700,height:450,doesResize:!0,toEmbedUrl:function(e){var t=(0,f.safeParseUrl)(e);if(t&&"www.desmos.com"===t.hostname&&t.pathname.match(/^\/calculator\/([^/]+)\/?$/)&&""===t.search&&""===t.hash)return"".concat(e,"?embed")},fromEmbedUrl:function(e){var t=(0,f.safeParseUrl)(e);if(t&&"www.desmos.com"===t.hostname&&t.pathname.match(/^\/calculator\/([^/]+)\/?$/)&&"?embed"===t.search&&""===t.hash)return e.replace("?embed","")}}],h={"allow-downloads-without-user-activation":!1,"allow-downloads":!1,"allow-modals":!1,"allow-orientation-lock":!1,"allow-pointer-lock":!1,"allow-popups":!0,"allow-popups-to-escape-sandbox":!1,"allow-presentation":!1,"allow-storage-access-by-user-activation":!1,"allow-top-navigation":!1,"allow-top-navigation-by-user-activation":!1,"allow-scripts":!0,"allow-same-origin":!0,"allow-forms":!0},v=p.map((function(e){return e.type}));function g(e){return v.includes(e)}function y(e){return"icon"in e}},6563:function(e,t,n){"use strict";var r,o=n(41132).default,i=n(12897).default,a=n(4633).default,u=n(29293).default,s=n(50883).default,c=Object.defineProperty,l=Object.getOwnPropertyDescriptor,f=Object.getOwnPropertyNames,d=Object.prototype.hasOwnProperty,p={};!function(e,t){for(var n in t)c(e,n,{get:t[n],enumerable:!0})}(p,{centerSelectionAroundPoint:function(){return P},createEmptyBookmarkShape:function(){return O},createShapesForAssets:function(){return S},getMediaAssetInfoPartial:function(){return b},registerDefaultExternalContentHandlers:function(){return m}}),e.exports=(r=p,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,i=s(f(t));try{var a=function(){var i=o.value;d.call(e,i)||i===n||c(e,i,{get:function(){return t[i]},enumerable:!(r=l(t,i))||r.enumerable})};for(i.s();!(o=i.n()).done;)a()}catch(u){i.e(u)}finally{i.f()}}return e}(c({},"__esModule",{value:!0}),r));var h=n(57777),v=n(92965),g=n(27236),y=n(35284);function m(e,t,n){var r=t.maxImageDimension,o=t.maxAssetSize,c=t.acceptedImageMimeTypes,l=t.acceptedVideoMimeTypes,f=n.toasts,d=n.msg;e.registerExternalAssetHandler("file",function(){var t=u(a().mark((function t(n){var i,u,s,p,v,y,m,w,S;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return u=n.file,s=n.assetId,p=c.includes(u.type),v=l.includes(u.type),p||v||f.addToast({title:d("assets.files.type-not-allowed"),severity:"error"}),(0,h.assert)(p||v,"File type not allowed: ".concat(u.type)),u.size>o&&f.addToast({title:d("assets.files.size-too-big"),severity:"error"}),(0,h.assert)(u.size<=o,"File size too big: ".concat((u.size/1024).toFixed(),"kb > ").concat((o/1024).toFixed(),"kb")),t.t0=h.getHashForBuffer,t.next=10,u.arrayBuffer();case 10:return t.t1=t.sent,y=(0,t.t0)(t.t1),s=null!==(i=s)&&void 0!==i?i:h.AssetRecordType.createId(y),t.next=15,b(u,s,p,v);case 15:return m=t.sent,isFinite(r)&&(w={w:m.props.w,h:m.props.h},S=(0,g.containBoxSize)(w,{w:r,h:r}),w!==S&&h.MediaHelpers.isStaticImageType(u.type)&&(m.props.w=S.w,m.props.h=S.h)),t.next=19,e.uploadAsset(m,u);case 19:return m.props.src=t.sent,t.abrupt("return",h.AssetRecordType.create(m));case 21:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),e.registerExternalAssetHandler("url",function(){var e=u(a().mark((function e(t){var n,r,o,i,u,s,c,l,p,v,g,y,m,b,w;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.url,e.prev=1,e.next=4,(0,h.fetch)(n,{method:"GET",mode:"no-cors"});case 4:return m=e.sent,e.next=7,m.text();case 7:b=e.sent,w=(new DOMParser).parseFromString(b,"text/html"),(r={image:null!==(o=null===(i=w.head.querySelector('meta[property="og:image"]'))||void 0===i?void 0:i.getAttribute("content"))&&void 0!==o?o:"",favicon:null!==(u=null!==(s=null===(c=w.head.querySelector('link[rel="apple-touch-icon"]'))||void 0===c?void 0:c.getAttribute("href"))&&void 0!==s?s:null===(l=w.head.querySelector('link[rel="icon"]'))||void 0===l?void 0:l.getAttribute("href"))&&void 0!==u?u:"",title:null!==(p=null===(v=w.head.querySelector('meta[property="og:title"]'))||void 0===v?void 0:v.getAttribute("content"))&&void 0!==p?p:n,description:null!==(g=null===(y=w.head.querySelector('meta[property="og:description"]'))||void 0===y?void 0:y.getAttribute("content"))&&void 0!==g?g:""}).image.startsWith("http")||(r.image=new URL(r.image,n).href),r.favicon.startsWith("http")||(r.favicon=new URL(r.favicon,n).href),e.next=19;break;case 14:e.prev=14,e.t0=e.catch(1),console.error(e.t0),f.addToast({title:d("assets.url.failed"),severity:"error"}),r={image:"",favicon:"",title:"",description:""};case 19:return e.abrupt("return",{id:h.AssetRecordType.createId((0,h.getHashForString)(n)),typeName:"asset",type:"bookmark",props:{src:n,description:r.description,image:r.image,favicon:r.favicon,title:r.title},meta:{}});case 20:case"end":return e.stop()}}),e,null,[[1,14]])})));return function(t){return e.apply(this,arguments)}}()),e.registerExternalContentHandler("svg-text",function(){var t=u(a().mark((function t(n){var r,o,i,u,s,c,l,f;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=n.point,o=n.text,i=null!==r&&void 0!==r?r:e.inputs.shiftKey?e.inputs.currentPagePoint:e.getViewportPageBounds().center,u=(new DOMParser).parseFromString(o,"image/svg+xml").querySelector("svg")){t.next=5;break}throw new Error("No <svg/> element present");case 5:return s=parseFloat(u.getAttribute("width")||"0"),c=parseFloat(u.getAttribute("height")||"0"),s&&c||(document.body.appendChild(u),l=u.getBoundingClientRect(),document.body.removeChild(u),s=l.width,c=l.height),t.next=10,e.getAssetForExternalContent({type:"file",file:new File([o],"asset.svg",{type:"image/svg+xml"})});case 10:if(f=t.sent){t.next=13;break}throw Error("Could not create an asset");case 13:S(e,[f],i);case 14:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),e.registerExternalContentHandler("embed",(function(t){var n=t.point,r=t.url,o=t.embed,i=null!==n&&void 0!==n?n:e.inputs.shiftKey?e.inputs.currentPagePoint:e.getViewportPageBounds().center,a=o.width,u=o.height,s=(0,h.createShapeId)(),c={id:s,type:"embed",x:i.x-(a||450)/2,y:i.y-(u||450)/2,props:{w:a,h:u,url:r}};e.createShapes([c]).select(s)})),e.registerExternalContentHandler("files",function(){var t=u(a().mark((function t(n){var r,p,v,g,y,m,w,x,P,O,k,_,j,I,T;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=n.point,!((p=n.files).length>e.options.maxFilesAtOnce)){t.next=3;break}throw Error("Too many files");case 3:v=null!==r&&void 0!==r?r:e.inputs.shiftKey?e.inputs.currentPagePoint:e.getViewportPageBounds().center,g=new h.Vec(v.x,v.y),y=[],m=s(p),t.prev=7,m.s();case 9:if((w=m.n()).done){t.next=39;break}if(!((x=w.value).size>o)){t.next=15;break}return f.addToast({title:d("assets.files.size-too-big"),severity:"error"}),console.warn("File size too big: ".concat((x.size/1024).toFixed(),"kb > ").concat((o/1024).toFixed(),"kb")),t.abrupt("continue",37);case 15:if(x.type){t.next=19;break}return f.addToast({title:d("assets.files.upload-failed"),severity:"error"}),console.error("No mime type"),t.abrupt("continue",37);case 19:if(c.concat(l).includes(x.type)){t.next=23;break}return f.addToast({title:d("assets.files.type-not-allowed"),severity:"error"}),console.warn("".concat(x.name," not loaded - Mime type not allowed ").concat(x.type,".")),t.abrupt("continue",37);case 23:return P=c.includes(x.type),O=l.includes(x.type),t.t0=h.getHashForBuffer,t.next=28,x.arrayBuffer();case 28:return t.t1=t.sent,k=(0,t.t0)(t.t1),_=h.AssetRecordType.createId(k),t.next=33,b(x,_,P,O);case 33:j=t.sent,I=void 0,P&&(I=e.createTemporaryAssetPreview(_,x)),y.push({asset:j,file:x,temporaryAssetPreview:I});case 37:t.next=9;break;case 39:t.next=44;break;case 41:t.prev=41,t.t2=t.catch(7),m.e(t.t2);case 44:return t.prev=44,m.f(),t.finish(44);case 47:return T=[],t.next=50,Promise.allSettled(y.map(function(){var t=u(a().mark((function t(n){var r,o;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.getAssetForExternalContent({type:"file",file:n.file});case 3:if(r=t.sent){t.next=6;break}throw Error("Could not create an asset");case 6:o=i(i({},r),{},{id:n.asset.id}),T.push(o),e.updateAssets([o]),t.next=16;break;case 11:return t.prev=11,t.t0=t.catch(0),f.addToast({title:d("assets.files.upload-failed"),severity:"error"}),console.error(t.t0),t.abrupt("return");case 16:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(e){return t.apply(this,arguments)}}()));case 50:S(e,T,g);case 51:case"end":return t.stop()}}),t,null,[[7,41,44,47]])})));return function(e){return t.apply(this,arguments)}}()),e.registerExternalContentHandler("text",function(){var t=u(a().mark((function t(n){var r,o,u,s,c,l,f,d,p,g,m,b,w,S,x;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=n.point,o=n.text,u=null!==r&&void 0!==r?r:e.inputs.shiftKey?e.inputs.currentPagePoint:e.getViewportPageBounds().center,s=e.getShapeUtil("text").getDefaultProps(),c=(0,y.cleanupText)(o),!(l=e.getOnlySelectedShape())||!("text"in l.props)){t.next=8;break}return e.updateShapes([{id:l.id,type:l.type,props:{text:c}}]),t.abrupt("return");case 8:g="middle",m=c.split("\n").length>1,b=(0,y.isRightToLeftLanguage)(c),m&&(g=m?b?"end":"start":"middle"),w=e.textMeasure.measureText(c,i(i({},v.TEXT_PROPS),{},{fontFamily:v.FONT_FAMILIES[s.font],fontSize:v.FONT_SIZES[s.size],maxWidth:null})),S=Math.min(m?.9*e.getViewportPageBounds().width:920,Math.max(200,.9*e.getViewportPageBounds().width)),w.w>S?(x=e.textMeasure.measureText(c,i(i({},v.TEXT_PROPS),{},{fontFamily:v.FONT_FAMILIES[s.font],fontSize:v.FONT_SIZES[s.size],maxWidth:S})),f=x.w,d=x.h,p=!1,g=b?"end":"start"):(f=w.w,d=w.h,p=!0),u.y-d/2<e.getViewportPageBounds().minY+40&&(u.y=e.getViewportPageBounds().minY+40+d/2),e.createShapes([{id:(0,h.createShapeId)(),type:"text",x:u.x-f/2,y:u.y-d/2,props:{text:c,textAlign:g,autoSize:p,w:f}}]);case 17:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),e.registerExternalContentHandler("url",function(){var t=u(a().mark((function t(n){var r,o,i,u,s,c,l,p,v,g;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=n.point,o=n.url,i=e.getShapeUtil("embed"),!(u=null===i||void 0===i?void 0:i.getEmbedDefinition(o))){t.next=5;break}return t.abrupt("return",e.putExternalContent({type:"embed",url:u.url,point:r,embed:u.definition}));case 5:if(s=null!==r&&void 0!==r?r:e.inputs.shiftKey?e.inputs.currentPagePoint:e.getViewportPageBounds().center,c=h.AssetRecordType.createId((0,h.getHashForString)(o)),l=O(e,o,s),p=e.getAsset(c),v=!1,p){t.next=25;break}return v=!0,t.prev=12,t.next=15,e.getAssetForExternalContent({type:"url",url:o});case 15:if(g=t.sent){t.next=18;break}throw Error("Could not create an asset");case 18:p=g,t.next=25;break;case 21:return t.prev=21,t.t0=t.catch(12),f.addToast({title:d("assets.url.failed"),severity:"error"}),t.abrupt("return");case 25:e.run((function(){v&&e.createAssets([p]),e.updateShapes([{id:l.id,type:l.type,props:{assetId:p.id}}])}));case 26:case"end":return t.stop()}}),t,null,[[12,21]])})));return function(e){return t.apply(this,arguments)}}())}function b(e,t,n,r){return w.apply(this,arguments)}function w(){return(w=u(a().mark((function e(t,n,r,o){var i,u,s,c;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=t.type,"video/quicktime"===t.type&&(i="video/mp4"),!r){e.next=8;break}return e.next=5,h.MediaHelpers.getImageSize(t);case 5:e.t0=e.sent,e.next=11;break;case 8:return e.next=10,h.MediaHelpers.getVideoSize(t);case 10:e.t0=e.sent;case 11:return u=e.t0,e.next=14,h.MediaHelpers.isAnimated(t);case 14:if(e.t1=e.sent,e.t1){e.next=17;break}e.t1=o;case 17:return s=e.t1,c={id:n,type:r?"image":"video",typeName:"asset",props:{name:t.name,src:"",w:u.w,h:u.h,fileSize:t.size,mimeType:i,isAnimated:s},meta:{}},e.abrupt("return",c);case 20:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function S(e,t,n){return x.apply(this,arguments)}function x(){return(x=u(a().mark((function e(t,n,r){var i,u,s,c;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.length){e.next=2;break}return e.abrupt("return",[]);case 2:i=h.Vec.From(r),u=[],s=0;case 5:if(!(s<n.length)){e.next=18;break}c=n[s],e.t0=c.type,e.next="image"===e.t0?10:"video"===e.t0?13:15;break;case 10:return u.push({id:(0,h.createShapeId)(),type:"image",x:i.x,y:i.y,opacity:1,props:{assetId:c.id,w:c.props.w,h:c.props.h}}),i.x+=c.props.w,e.abrupt("break",15);case 13:u.push({id:(0,h.createShapeId)(),type:"video",x:i.x,y:i.y,opacity:1,props:{assetId:c.id,w:c.props.w,h:c.props.h}}),i.x+=c.props.w;case 15:s++,e.next=5;break;case 18:return t.run((function(){var e,i=n.filter((function(e){return!t.getAsset(e.id)}));i.length&&t.createAssets(i),(e=t.createShapes(u)).select.apply(e,o(u.map((function(e){return e.id})))),P(t,r)})),e.abrupt("return",u.map((function(e){return e.id})));case 20:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function P(e,t){var n=e.getViewportPageBounds(),r=e.getSelectionPageBounds();if(r){var o=r.center.sub(t);e.updateShapes(e.getSelectedShapes().map((function(t){var n=e.getShapeParentTransform(t).decompose().rotation,r=h.Vec.Rot(o,-n);return{id:t.id,type:t.type,x:t.x-r.x,y:t.y-r.y}})))}if((r=e.getSelectionPageBounds())&&e.getInstanceState().isGridMode){var i=e.getDocumentSettings().gridSize,a=new h.Vec(r.minX,r.minY),u=a.clone().snapToGrid(i),s=h.Vec.Sub(a,u);e.updateShapes(e.getSelectedShapes().map((function(e){var t={x:e.x-s.x,y:e.y-s.y};return{id:e.id,type:e.type,x:t.x,y:t.y}})))}(r=e.getSelectionPageBounds())&&!n.contains(r)&&e.zoomToSelection({animation:{duration:e.options.animationMediumMs}})}function O(e,t,n){var r={id:(0,h.createShapeId)(),type:"bookmark",x:n.x-150,y:n.y-160,opacity:1,props:{assetId:null,url:t}};return e.run((function(){e.createShapes([r]).select(r.id),P(e,n)})),e.getShape(r.id)}},16016:function(e,t,n){"use strict";var r,o=n(50883).default,i=Object.defineProperty,a=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,c={};!function(e,t){for(var n in t)i(e,n,{get:t[n],enumerable:!0})}(c,{defaultShapeTools:function(){return y}}),e.exports=(r=c,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var c,l=o(u(t));try{var f=function(){var o=c.value;s.call(e,o)||o===n||i(e,o,{get:function(){return t[o]},enumerable:!(r=a(t,o))||r.enumerable})};for(l.s();!(c=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(i({},"__esModule",{value:!0}),r));var l=n(32216),f=n(25410),d=n(65512),p=n(74296),h=n(91808),v=n(66486),g=n(22054),y=[n(1508).TextShapeTool,f.DrawShapeTool,p.GeoShapeTool,g.NoteShapeTool,v.LineShapeTool,d.FrameShapeTool,l.ArrowShapeTool,h.HighlightShapeTool]},32982:function(e,t,n){"use strict";var r,o=n(50883).default,i=Object.defineProperty,a=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,c={};!function(e,t){for(var n in t)i(e,n,{get:t[n],enumerable:!0})}(c,{defaultShapeUtils:function(){return x}}),e.exports=(r=c,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var c,l=o(u(t));try{var f=function(){var o=c.value;s.call(e,o)||o===n||i(e,o,{get:function(){return t[o]},enumerable:!(r=a(t,o))||r.enumerable})};for(l.s();!(c=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(i({},"__esModule",{value:!0}),r));var l=n(77158),f=n(64500),d=n(89736),p=n(51066),h=n(32694),v=n(35590),g=n(15166),y=n(86746),m=n(10148),b=n(28340),w=n(19914),S=n(95182),x=[w.TextShapeUtil,f.BookmarkShapeUtil,d.DrawShapeUtil,v.GeoShapeUtil,b.NoteShapeUtil,m.LineShapeUtil,h.FrameShapeUtil,l.ArrowShapeUtil,g.HighlightShapeUtil,p.EmbedShapeUtil,y.ImageShapeUtil,S.VideoShapeUtil]},65133:function(e,t,n){"use strict";var r,o=n(50883).default,i=Object.defineProperty,a=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,c={};function l(e){return e.sideEffects.register({instance_page_state:{afterChange:function(t,n){if(t.croppingShapeId!==n.croppingShapeId){var r=e.isIn("select.crop");!t.croppingShapeId&&n.croppingShapeId?r||e.setCurrentTool("select.crop.idle"):t.croppingShapeId&&!n.croppingShapeId&&r&&e.setCurrentTool("select.idle")}if(t.editingShapeId!==n.editingShapeId)if(!t.editingShapeId&&n.editingShapeId){if(!e.isIn("select.editing_shape")){var o=e.getEditingShape();o&&"text"===o.type&&e.isInAny("text.pointing","select.resizing")&&e.getInstanceState().isToolLocked?e.setCurrentTool("select.editing_shape",{isCreatingTextWhileToolLocked:!0}):e.setCurrentTool("select.editing_shape")}}else t.editingShapeId&&!n.editingShapeId&&e.isIn("select.editing_shape")&&e.setCurrentTool("select.idle")}}})}!function(e,t){for(var n in t)i(e,n,{get:t[n],enumerable:!0})}(c,{registerDefaultSideEffects:function(){return l}}),e.exports=(r=c,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var c,l=o(u(t));try{var f=function(){var o=c.value;s.call(e,o)||o===n||i(e,o,{get:function(){return t[o]},enumerable:!(r=a(t,o))||r.enumerable})};for(l.s();!(c=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(i({},"__esModule",{value:!0}),r))},45457:function(e,t,n){"use strict";var r,o=n(50883).default,i=Object.defineProperty,a=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,c={};!function(e,t){for(var n in t)i(e,n,{get:t[n],enumerable:!0})}(c,{defaultTools:function(){return v}}),e.exports=(r=c,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var c,l=o(u(t));try{var f=function(){var o=c.value;s.call(e,o)||o===n||i(e,o,{get:function(){return t[o]},enumerable:!(r=a(t,o))||r.enumerable})};for(l.s();!(c=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(i({},"__esModule",{value:!0}),r));var l=n(88656),f=n(31998),d=n(79902),p=n(78412),h=n(26062),v=[l.EraserTool,f.HandTool,d.LaserTool,h.ZoomTool,p.SelectTool]},32216:function(e,t,n){"use strict";var r,o=n(17383).default,i=n(34579).default,a=n(18336).default,u=n(29511).default,s=n(43693).default,c=n(50883).default,l=Object.defineProperty,f=Object.getOwnPropertyDescriptor,d=Object.getOwnPropertyNames,p=Object.prototype.hasOwnProperty,h={};!function(e,t){for(var n in t)l(e,n,{get:t[n],enumerable:!0})}(h,{ArrowShapeTool:function(){return m}}),e.exports=(r=h,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,i=c(d(t));try{var a=function(){var i=o.value;p.call(e,i)||i===n||l(e,i,{get:function(){return t[i]},enumerable:!(r=f(t,i))||r.enumerable})};for(i.s();!(o=i.n()).done;)a()}catch(u){i.e(u)}finally{i.f()}}return e}(l({},"__esModule",{value:!0}),r));var v=n(57777),g=n(80617),y=n(73281),m=function(e){function t(){var e;o(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return e=a(this,t,[].concat(r)),s(e,"shapeType","arrow"),e}return u(t,e),i(t,null,[{key:"children",value:function(){return[g.Idle,y.Pointing]}}])}(v.StateNode);s(m,"id","arrow"),s(m,"initial","idle")},77158:function(e,t,n){"use strict";var r,o=n(12897).default,i=n(41132).default,a=n(17383).default,u=n(34579).default,s=n(18336).default,c=n(29511).default,l=n(43693).default,f=n(50883).default,d=Object.defineProperty,p=Object.getOwnPropertyDescriptor,h=Object.getOwnPropertyNames,v=Object.prototype.hasOwnProperty,g={};!function(e,t){for(var n in t)d(e,n,{get:t[n],enumerable:!0})}(g,{ArrowShapeUtil:function(){return E},getArrowLength:function(){return C}}),e.exports=(r=g,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,i=f(h(t));try{var a=function(){var i=o.value;v.call(e,i)||i===n||d(e,i,{get:function(){return t[i]},enumerable:!(r=p(t,i))||r.enumerable})};for(i.s();!(o=i.n()).done;)a()}catch(u){i.e(u)}finally{i.f()}}return e}(d({},"__esModule",{value:!0}),r));var y=n(44414),m=n(57777),b=n(17402),w=n(14080),S=n(23151),x=n(65083),P=n(92965),O=n(57856),k=n(38546),_=n(97997),j=n(33036),I=n(61047),T=n(64761),E=function(e){function t(){var e;a(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return e=s(this,t,[].concat(r)),l(e,"_resizeInitialBindings",new m.WeakCache),e}return c(t,e),u(t,[{key:"canEdit",value:function(){return!0}},{key:"canBind",value:function(e){return"arrow"!==e.toShapeType}},{key:"canSnap",value:function(){return!1}},{key:"hideResizeHandles",value:function(){return!0}},{key:"hideRotateHandle",value:function(){return!0}},{key:"hideSelectionBoundsBg",value:function(){return!0}},{key:"hideSelectionBoundsFg",value:function(){return!0}},{key:"canBeLaidOut",value:function(e){var t=(0,T.getArrowBindings)(this.editor,e);return!t.start&&!t.end}},{key:"getDefaultProps",value:function(){return{dash:"draw",size:"m",fill:"none",color:"black",labelColor:"black",bend:0,start:{x:0,y:0},end:{x:2,y:0},arrowheadStart:"none",arrowheadEnd:"arrow",text:"",labelPosition:.5,font:"draw",scale:1}}},{key:"getGeometry",value:function(e){var t,n=(0,T.getArrowInfo)(this.editor,e),r=[],o=n.isStraight?new m.Edge2d({start:m.Vec.From(n.start.point),end:m.Vec.From(n.end.point)}):new m.Arc2d({center:m.Vec.Cast(n.handleArc.center),start:m.Vec.Cast(n.start.point),end:m.Vec.Cast(n.end.point),sweepFlag:n.bodyArc.sweepFlag,largeArcFlag:n.bodyArc.largeArcFlag});if(e.props.text.trim()){var a=(0,_.getArrowLabelPosition)(this.editor,e);r.push.apply(r,i(a.debugGeom)),t=new m.Rectangle2d({x:a.box.x,y:a.box.y,width:a.box.w,height:a.box.h,isFilled:!0,isLabel:!0})}return new m.Group2d({children:[].concat(i(t?[o,t]:[o]),r)})}},{key:"getHandles",value:function(e){var t=(0,T.getArrowInfo)(this.editor,e);return[{id:"start",type:"vertex",index:"a0",x:t.start.handle.x,y:t.start.handle.y},{id:"middle",type:"virtual",index:"a2",x:t.middle.x,y:t.middle.y},{id:"end",type:"vertex",index:"a3",x:t.end.handle.x,y:t.end.handle.y}].filter(Boolean)}},{key:"getText",value:function(e){return e.props.text}},{key:"onHandleDrag",value:function(e,t){var n=this,r=t.handle,i=t.isPrecise,a=r.id,u=(0,T.getArrowBindings)(this.editor,e);if("middle"===a){var s=(0,T.getArrowTerminalsInArrowSpace)(this.editor,e,u),c=s.start,l=s.end,f=m.Vec.Sub(l,c),d=m.Vec.Per(f),p=m.Vec.Med(l,c),h=m.Vec.Sub(p,d),v=m.Vec.Add(p,d),g=m.Vec.NearestPointOnLineSegment(h,v,r,!1),y=m.Vec.Dist(g,p);return m.Vec.Clockwise(g,l,p)&&(y*=-1),{id:e.id,type:e.type,props:{bend:y}}}var b={id:e.id,type:"arrow",props:{}},w=u[a],S=u["start"===a?"end":"start"];if(this.editor.inputs.ctrlKey)return(0,T.removeArrowBinding)(this.editor,e,a),b.props[a]={x:r.x,y:r.y},b;var x=this.editor.getShapePageTransform(e.id).applyToPoint(r),P=this.editor.getShapeAtPoint(x,{hitInside:!0,hitFrameInside:!0,margin:0,filter:function(t){return!t.isLocked&&n.editor.canBindShapes({fromShape:e,toShape:t,binding:"arrow"})}});if(!P){(0,T.removeArrowBinding)(this.editor,e,a);var O=(0,m.maybeSnapToGrid)(new m.Vec(r.x,r.y),this.editor);return b.props[a]={x:O.x,y:O.y},b}var k=this.editor.getShapeGeometry(P),_=m.Box.ZeroFix(k.bounds),j=this.editor.getShapePageTransform(b.id).applyToPoint(r),I=this.editor.getPointInShapeSpace(P,j),E=i;E||(!w||w&&P.id!==w.toId)&&(E=this.editor.inputs.pointerVelocity.len()<.5),i||(k.isClosed||(E=!0),S&&P.id===S.toId&&S.props.isPrecise&&(E=!0));var C={x:(I.x-_.minX)/_.width,y:(I.y-_.minY)/_.height};E&&m.Vec.Dist(I,_.center)<Math.max(4,Math.min(.15*Math.min(_.width,_.height),16))/this.editor.getZoomLevel()&&(C.x=.5,C.y=.5);var M={terminal:a,normalizedAnchor:C,isPrecise:E,isExact:this.editor.inputs.altKey};(0,T.createOrUpdateArrowBinding)(this.editor,e,P.id,M),this.editor.setHintingShapes([P.id]);var A=(0,T.getArrowBindings)(this.editor,e);return A.start&&A.end&&A.start.toId===A.end.toId&&m.Vec.Equals(A.start.props.normalizedAnchor,A.end.props.normalizedAnchor)&&(0,T.createOrUpdateArrowBinding)(this.editor,e,A.end.toId,o(o({},A.end.props),{},{normalizedAnchor:{x:A.end.props.normalizedAnchor.x+.05,y:A.end.props.normalizedAnchor.y}})),b}},{key:"onTranslateStart",value:function(e){var t=(0,T.getArrowBindings)(this.editor,e),n=(0,T.getArrowTerminalsInArrowSpace)(this.editor,e,t),r=this.editor.getShapePageTransform(e.id),i=this.editor.getSelectedShapeIds();if(!(t.start&&(i.includes(t.start.toId)||this.editor.isAncestorSelected(t.start.toId))||t.end&&(i.includes(t.end.toId)||this.editor.isAncestorSelected(t.end.toId)))){D.set(e,{pagePosition:r.applyToPoint(e),terminalBindings:(0,m.mapObjectMapValues)(n,(function(e,n){var o=t[e];return o?{binding:o,shapePosition:n,pagePosition:r.applyToPoint(n)}:null}))}),t.start&&((0,b.updateArrowTerminal)({editor:this.editor,arrow:e,terminal:"start",useHandle:!0}),e=this.editor.getShape(e.id)),t.end&&(0,b.updateArrowTerminal)({editor:this.editor,arrow:e,terminal:"end",useHandle:!0});for(var a=0,u=["start","end"];a<u.length;a++){var s=t[u[a]];s&&this.editor.updateBinding(o(o({},s),{},{props:o(o({},s.props),{},{isPrecise:!0})}))}}}},{key:"onTranslate",value:function(e,t){var n=this,r=D.get(e);if(r)for(var i=this.editor.getShapePageTransform(t.id),a=m.Vec.Sub(i.applyToPoint(t),r.pagePosition),u=0,s=Object.values(r.terminalBindings);u<s.length;u++){var c=s[u];if(c){var l=m.Vec.Add(c.pagePosition,m.Vec.Mul(a,.5)),f=this.editor.getShapeAtPoint(l,{hitInside:!0,hitFrameInside:!0,margin:0,filter:function(e){return!e.isLocked&&n.editor.canBindShapes({fromShape:t,toShape:e,binding:"arrow"})}});if((null===f||void 0===f?void 0:f.id)===c.binding.toId){var d=m.Box.ZeroFix(this.editor.getShapeGeometry(f).bounds),p=this.editor.getPointInShapeSpace(f,l),h={x:(p.x-d.minX)/d.width,y:(p.y-d.minY)/d.height};(0,T.createOrUpdateArrowBinding)(this.editor,t,f.id,o(o({},c.binding.props),{},{normalizedAnchor:h,isPrecise:!0}))}else(0,T.removeArrowBinding)(this.editor,t,c.binding.props.terminal)}}}},{key:"onResize",value:function(e,t){var n=this,r=t.scaleX,i=t.scaleY,a=this._resizeInitialBindings.get(e,(function(){return(0,T.getArrowBindings)(n.editor,e)})),u=(0,T.getArrowTerminalsInArrowSpace)(this.editor,e,a),s=(0,m.structuredClone)(e.props),c=s.start,l=s.end,f=e.props.bend;a.start||(c.x=u.start.x*r,c.y=u.start.y*i),a.end||(l.x=u.end.x*r,l.y=u.end.y*i);var d=Math.abs(r),p=Math.abs(i),h=null!==a&&void 0!==a&&a.start?m.Vec.From(a.start.props.normalizedAnchor):null,v=null!==a&&void 0!==a&&a.end?m.Vec.From(a.end.props.normalizedAnchor):null;return r<0&&i>=0?(0!==f&&(f*=-1,f*=Math.max(d,p)),h&&(h.x=1-h.x),v&&(v.x=1-v.x)):r>=0&&i<0?(0!==f&&(f*=-1,f*=Math.max(d,p)),h&&(h.y=1-h.y),v&&(v.y=1-v.y)):r>=0&&i>=0?0!==f&&(f*=Math.max(d,p)):r<0&&i<0&&(0!==f&&(f*=Math.max(d,p)),h&&(h.x=1-h.x,h.y=1-h.y),v&&(v.x=1-v.x,v.y=1-v.y)),a.start&&h&&(0,T.createOrUpdateArrowBinding)(this.editor,e,a.start.toId,o(o({},a.start.props),{},{normalizedAnchor:h.toJson()})),a.end&&v&&(0,T.createOrUpdateArrowBinding)(this.editor,e,a.end.toId,o(o({},a.end.props),{},{normalizedAnchor:v.toJson()})),{props:{start:c,end:l,bend:f}}}},{key:"onDoubleClickHandle",value:function(e,t){switch(t.id){case"start":return{id:e.id,type:e.type,props:o(o({},e.props),{},{arrowheadStart:"none"===e.props.arrowheadStart?"arrow":"none"})};case"end":return{id:e.id,type:e.type,props:o(o({},e.props),{},{arrowheadEnd:"none"===e.props.arrowheadEnd?"arrow":"none"})}}}},{key:"component",value:function(e){var t=(0,k.useDefaultColorTheme)(),n=this.editor.getOnlySelectedShape(),r=this.editor.isInAny("select.idle","select.pointing_handle","select.dragging_handle","select.translating","arrow.dragging")&&!this.editor.getIsReadonly(),o=(0,T.getArrowInfo)(this.editor,e);if(null===o||void 0===o||!o.isValid)return null;var i=(0,_.getArrowLabelPosition)(this.editor,e),a=e.id===this.editor.getOnlySelectedShapeId(),u=this.editor.getEditingShapeId()===e.id||e.props.text;return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(m.SVGContainer,{style:{minWidth:50,minHeight:50},children:(0,y.jsx)(M,{shape:e,shouldDisplayHandles:r&&(null===n||void 0===n?void 0:n.id)===e.id})}),u&&(0,y.jsx)(x.TextLabel,{shapeId:e.id,classNamePrefix:"tl-arrow",type:"arrow",font:e.props.font,fontSize:(0,_.getArrowLabelFontSize)(e),lineHeight:P.TEXT_PROPS.lineHeight,align:"middle",verticalAlign:"middle",text:e.props.text,labelColor:t[e.props.labelColor].solid,textWidth:i.box.w-2*P.ARROW_LABEL_PADDING*e.props.scale,isSelected:a,padding:0,style:{transform:"translate(".concat(i.box.center.x,"px, ").concat(i.box.center.y,"px)")}})]})}},{key:"indicator",value:function(e){var t=(0,m.useIsEditing)(e.id),n=(0,m.useSharedSafeId)(e.id+"_clip"),r=(0,T.getArrowInfo)(this.editor,e);if(!r)return null;var o=(0,T.getArrowTerminalsInArrowSpace)(this.editor,e,null===r||void 0===r?void 0:r.bindings),i=o.start,a=o.end,u=this.editor.getShapeGeometry(e),s=u.bounds,c=e.props.text.trim()?u.children[1]:null;if(m.Vec.Equals(i,a))return null;var l=P.STROKE_SIZES[e.props.size]*e.props.scale,f=r.start.arrowhead&&(0,j.getArrowheadPathForType)(r,"start",l),d=r.end.arrowhead&&(0,j.getArrowheadPathForType)(r,"end",l),p=r.isStraight?(0,I.getSolidStraightArrowPath)(r):(0,I.getSolidCurvedArrowPath)(r),h=f&&"arrow"!==r.start.arrowhead||d&&"arrow"!==r.end.arrowhead||!!c;if(t&&c)return(0,y.jsx)("rect",{x:(0,m.toDomPrecision)(c.x),y:(0,m.toDomPrecision)(c.y),width:c.w,height:c.h,rx:3.5*e.props.scale,ry:3.5*e.props.scale});var v=!("none"===r.start.arrowhead||"arrow"===r.start.arrowhead),g=!("none"===r.end.arrowhead||"arrow"===r.end.arrowhead);return(0,y.jsxs)("g",{children:[h&&(0,y.jsx)("defs",{children:(0,y.jsx)(A,{hasText:e.props.text.trim().length>0,bounds:s,labelBounds:c?c.getBounds():new m.Box(0,0,0,0),as:v&&f?f:"",ae:g&&d?d:""})}),(0,y.jsxs)("g",{style:{clipPath:h?"url(#".concat(n,")"):void 0,WebkitClipPath:h?"url(#".concat(n,")"):void 0},children:[h&&(0,y.jsx)("rect",{x:s.minX-100,y:s.minY-100,width:s.width+200,height:s.height+200,opacity:0}),(0,y.jsx)("path",{d:p})]}),f&&(0,y.jsx)("path",{d:f}),d&&(0,y.jsx)("path",{d:d}),c&&(0,y.jsx)("rect",{x:(0,m.toDomPrecision)(c.x),y:(0,m.toDomPrecision)(c.y),width:c.w,height:c.h,rx:3.5,ry:3.5})]})}},{key:"onEditEnd",value:function(e){var t=e.id,n=e.type,r=e.props.text;r.trimEnd()!==e.props.text&&this.editor.updateShapes([{id:t,type:n,props:{text:r.trimEnd()}}])}},{key:"toSvg",value:function(e,t){t.addExportDef((0,O.getFillDefForExport)(e.props.fill)),e.props.text&&t.addExportDef((0,O.getFontDefForExport)(e.props.font));var n=(0,m.getDefaultColorTheme)(t),r=1/e.props.scale;return(0,y.jsxs)("g",{transform:"scale(".concat(r,")"),children:[(0,y.jsx)(M,{shape:e,shouldDisplayHandles:!1}),(0,y.jsx)(S.SvgTextLabel,{fontSize:(0,_.getArrowLabelFontSize)(e),font:e.props.font,align:"middle",verticalAlign:"middle",text:e.props.text,labelColor:n[e.props.labelColor].solid,bounds:(0,_.getArrowLabelPosition)(this.editor,e).box.clone().expandBy(-P.ARROW_LABEL_PADDING*e.props.scale),padding:0})]})}},{key:"getCanvasSvgDefs",value:function(){return[(0,O.getFillDefForCanvas)(),{key:"arrow:dot",component:R},{key:"arrow:cross",component:N}]}},{key:"getInterpolatedProps",value:function(e,t,n){return o(o({},n>.5?t.props:e.props),{},{scale:(0,m.lerp)(e.props.scale,t.props.scale,n),start:{x:(0,m.lerp)(e.props.start.x,t.props.start.x,n),y:(0,m.lerp)(e.props.start.y,t.props.start.y,n)},end:{x:(0,m.lerp)(e.props.end.x,t.props.end.x,n),y:(0,m.lerp)(e.props.end.y,t.props.end.y,n)},bend:(0,m.lerp)(e.props.bend,t.props.bend,n),labelPosition:(0,m.lerp)(e.props.labelPosition,t.props.labelPosition,n)})}}])}(m.ShapeUtil);function C(e,t){var n=(0,T.getArrowInfo)(e,t);return n.isStraight?m.Vec.Dist(n.start.handle,n.end.handle):Math.abs(n.handleArc.length)}l(E,"type","arrow"),l(E,"props",m.arrowShapeProps),l(E,"migrations",m.arrowShapeMigrations);var M=(0,m.track)((function(e){var t=e.shape,n=e.shouldDisplayHandles,r=(0,m.useEditor)(),o=(0,k.useDefaultColorTheme)(),i=(0,T.getArrowInfo)(r,t),a=m.Box.ZeroFix(r.getShapeGeometry(t).bounds),u=(0,T.getArrowBindings)(r,t),s=(0,m.useValue)("force solid",(function(){return r.getZoomLevel()<.2}),[r]),c=(0,m.useSharedSafeId)(t.id+"_clip"),l=(0,m.useSharedSafeId)("arrowhead-dot"),f=(0,m.useSharedSafeId)("arrowhead-cross");if(null===i||void 0===i||!i.isValid)return null;var d=P.STROKE_SIZES[t.props.size]*t.props.scale,p=i.start.arrowhead&&(0,j.getArrowheadPathForType)(i,"start",d),h=i.end.arrowhead&&(0,j.getArrowheadPathForType)(i,"end",d),v=i.isStraight?(0,I.getSolidStraightArrowPath)(i):(0,I.getSolidCurvedArrowPath)(i),g=null;if(n){var b=2/r.getZoomLevel(),S=(0,m.getPerfectDashProps)(C(r,t),b,{end:"skip",start:"skip",lengthRatio:2.5}),x=S.strokeDasharray,O=S.strokeDashoffset;g=u.start||u.end?(0,y.jsx)("path",{className:"tl-arrow-hint",d:i.isStraight?(0,I.getStraightArrowHandlePath)(i):(0,I.getCurvedArrowHandlePath)(i),strokeDasharray:x,strokeDashoffset:O,strokeWidth:b,markerStart:u.start?u.start.props.isExact?"":u.start.props.isPrecise?"url(#".concat(f,")"):"url(#".concat(l,")"):"",markerEnd:u.end?u.end.props.isExact?"":u.end.props.isPrecise?"url(#".concat(f,")"):"url(#".concat(l,")"):"",opacity:.16}):null}var E=(0,m.getPerfectDashProps)(i.isStraight?i.length:Math.abs(i.bodyArc.length),d,{style:t.props.dash,forceSolid:s}),M=E.strokeDasharray,D=E.strokeDashoffset,R=(0,_.getArrowLabelPosition)(r,t),N=!("none"===i.start.arrowhead||"arrow"===i.start.arrowhead),L=!("none"===i.end.arrowhead||"arrow"===i.end.arrowhead);return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)("defs",{children:(0,y.jsx)("clipPath",{id:c,children:(0,y.jsx)(A,{hasText:t.props.text.trim().length>0,bounds:a,labelBounds:R.box,as:N&&p?p:"",ae:L&&h?h:""})})}),(0,y.jsxs)("g",{fill:"none",stroke:o[t.props.color].solid,strokeWidth:d,strokeLinejoin:"round",strokeLinecap:"round",pointerEvents:"none",children:[g,(0,y.jsxs)("g",{style:{clipPath:"url(#".concat(c,")"),WebkitClipPath:"url(#".concat(c,")")},children:[(0,y.jsx)("rect",{x:(0,m.toDomPrecision)(a.minX-100),y:(0,m.toDomPrecision)(a.minY-100),width:(0,m.toDomPrecision)(a.width+200),height:(0,m.toDomPrecision)(a.height+200),opacity:0}),(0,y.jsx)("path",{d:v,strokeDasharray:M,strokeDashoffset:D})]}),p&&N&&"none"!==t.props.fill&&(0,y.jsx)(w.ShapeFill,{theme:o,d:p,color:t.props.color,fill:t.props.fill,scale:t.props.scale}),h&&L&&"none"!==t.props.fill&&(0,y.jsx)(w.ShapeFill,{theme:o,d:h,color:t.props.color,fill:t.props.fill,scale:t.props.scale}),p&&(0,y.jsx)("path",{d:p}),h&&(0,y.jsx)("path",{d:h})]})]})}));function A(e){var t=e.hasText,n=e.bounds,r=e.labelBounds,o=e.as,i=e.ae,a="M".concat((0,m.toDomPrecision)(n.minX-100),",").concat((0,m.toDomPrecision)(n.minY-100)," h").concat(n.width+200," v").concat(n.height+200," h-").concat(n.width+200," Z"),u="M".concat((0,m.toDomPrecision)(r.minX),",").concat((0,m.toDomPrecision)(r.minY)," v").concat(r.height," h").concat(r.width," v-").concat(r.height," Z");return(0,y.jsx)("path",{d:"".concat(a).concat(t?u:"").concat(o).concat(i)})}var D=new WeakMap;function R(){var e=(0,m.useSharedSafeId)("arrowhead-dot");return(0,y.jsx)("marker",{id:e,className:"tl-arrow-hint",refX:"3.0",refY:"3.0",orient:"0",children:(0,y.jsx)("circle",{cx:"3",cy:"3",r:"2",strokeDasharray:"100%"})})}function N(){var e=(0,m.useSharedSafeId)("arrowhead-cross");return(0,y.jsxs)("marker",{id:e,className:"tl-arrow-hint",refX:"3.0",refY:"3.0",orient:"auto",children:[(0,y.jsx)("line",{x1:"1.5",y1:"1.5",x2:"4.5",y2:"4.5",strokeDasharray:"100%"}),(0,y.jsx)("line",{x1:"1.5",y1:"4.5",x2:"4.5",y2:"1.5",strokeDasharray:"100%"})]})}},97997:function(e,t,n){"use strict";var r,o=n(41132).default,i=n(85715).default,a=n(12897).default,u=n(50883).default,s=Object.defineProperty,c=Object.getOwnPropertyDescriptor,l=Object.getOwnPropertyNames,f=Object.prototype.hasOwnProperty,d={};!function(e,t){for(var n in t)s(e,n,{get:t[n],enumerable:!0})}(d,{getArrowLabelFontSize:function(){return O},getArrowLabelPosition:function(){return w}}),e.exports=(r=d,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,i=u(l(t));try{var a=function(){var i=o.value;f.call(e,i)||i===n||s(e,i,{get:function(){return t[i]},enumerable:!(r=c(t,i))||r.enumerable})};for(i.s();!(o=i.n()).done;)a()}catch(d){i.e(d)}finally{i.f()}}return e}(s({},"__esModule",{value:!0}),r));var p=n(57777),h=n(92965),v=n(77158),g=n(64761),y=new p.WeakCache;function m(e,t){var n;return""===t.props.text.trim()?new p.Vec(0,0).addScalar(2*h.ARROW_LABEL_PADDING*t.props.scale):null!==(n=function(e){return y.get(e,(function(){return e.store.createComputedCache("arrowLabelSize",(function(t){var n=(0,g.getArrowInfo)(e,t),r=0,o=0,i=n.isStraight?new p.Edge2d({start:p.Vec.From(n.start.point),end:p.Vec.From(n.end.point)}):new p.Arc2d({center:p.Vec.Cast(n.handleArc.center),start:p.Vec.Cast(n.start.point),end:p.Vec.Cast(n.end.point),sweepFlag:n.bodyArc.sweepFlag,largeArcFlag:n.bodyArc.largeArcFlag});if(t.props.text.trim()){var u=i.bounds,s=O(t),c=e.textMeasure.measureText(t.props.text,a(a({},h.TEXT_PROPS),{},{fontFamily:h.FONT_FAMILIES[t.props.font],fontSize:s,maxWidth:null})),l=c.w;r=l,o=c.h;var f=!1;if(u.width>u.height?(r=Math.max(Math.min(l,64),Math.min(u.width-64,l)),f=!0):r>16*s&&(r=16*s,f=!0),f){var d=e.textMeasure.measureText(t.props.text,a(a({},h.TEXT_PROPS),{},{fontFamily:h.FONT_FAMILIES[t.props.font],fontSize:s,maxWidth:r}));r=d.w,o=d.h}}return new p.Vec(r,o).addScalar(2*h.ARROW_LABEL_PADDING*t.props.scale)}))}))}(e).get(t.id))&&void 0!==n?n:new p.Vec(0,0)}function b(e){var t=h.STROKE_SIZES[e.props.size];return(h.LABEL_TO_ARROW_PADDING+2*(t-h.STROKE_SIZES.s)+(t===h.STROKE_SIZES.xl?20:0))*e.props.scale}function w(e,t){var n,r=[],a=(0,g.getArrowInfo)(e,t),u={hasStartBinding:!!a.bindings.start,hasEndBinding:!!a.bindings.end,hasStartArrowhead:"none"!==a.start.arrowhead,hasEndArrowhead:"none"!==a.end.arrowhead};if(a.isStraight){var s=function(e,t,n){var r=m(e,t),o=b(t),a=p.Vec.Nudge(n.start.point,n.end.point,o),u=p.Vec.Nudge(n.end.point,n.start.point,o),s=(0,p.intersectLineSegmentPolygon)(a,u,p.Box.FromCenter(n.middle,r).corners);if(!s||2!==s.length)return{start:.5,end:.5};var c=i(s,2),l=c[0],f=c[1];if(p.Vec.Dist2(l,a)>p.Vec.Dist2(f,a)){var d=i(s,2);f=d[0],l=d[1]}var h=a.add(p.Vec.Sub(n.middle,l)),v=u.add(p.Vec.Sub(n.middle,f));return{start:p.Vec.Dist(n.start.point,h)/n.length,end:p.Vec.Dist(n.start.point,v)/n.length}}(e,t,a),c=S(e,t,s,u);n=p.Vec.Lrp(a.start.point,a.end.point,c)}else{var l=function(e,t,n){var r,i,a=m(e,t),u=b(t),s=Math.sign(t.props.bend),c=u/n.handleArc.radius*s,l=p.Vec.Angle(n.bodyArc.center,n.start.point)-c,f=p.Vec.Angle(n.bodyArc.center,n.end.point)+c,d=(0,p.getPointOnCircle)(n.bodyArc.center,n.bodyArc.radius,l),h=(0,p.getPointOnCircle)(n.bodyArc.center,n.bodyArc.radius,f),v=[],g=x(n.bodyArc.center,n.bodyArc.radius,l,f,s,p.Box.FromCenter(d,a).corners);v.push(new p.Polygon2d({points:p.Box.FromCenter(d,a).corners,debugColor:"lime",isFilled:!1,ignore:!0}));var y=x(n.bodyArc.center,n.bodyArc.radius,l,f,s,p.Box.FromCenter(h,a).corners);v.push(new p.Polygon2d({points:p.Box.FromCenter(h,a).corners,debugColor:"lime",isFilled:!1,ignore:!0}));for(var w=0,S=[].concat(o(null!==g&&void 0!==g?g:[]),o(null!==y&&void 0!==y?y:[]),[d,h]);w<S.length;w++){var O=S[w];v.push(new p.Circle2d({x:O.x-3,y:O.y-3,radius:3,isFilled:!1,debugColor:"magenta",ignore:!0}))}var k=null!==(r=g&&P(n.start.point,g))&&void 0!==r?r:n.middle,_=null!==(i=y&&P(n.end.point,y))&&void 0!==i?i:n.middle,j=p.Vec.Angle(n.bodyArc.center,n.start.point),I=p.Vec.Angle(n.bodyArc.center,n.end.point),T=p.Vec.Angle(n.bodyArc.center,k),E=p.Vec.Angle(n.bodyArc.center,_);if((0,p.angleDistance)(j,T,s)>(0,p.angleDistance)(j,E,s))return{start:.5,end:.5,dbg:v};var C=(0,p.angleDistance)(j,I,s);return{start:(0,p.angleDistance)(j,T,s)/C,end:(0,p.angleDistance)(j,E,s)/C,dbg:v}}(e,t,a);l.dbg&&r.push.apply(r,o(l.dbg));var f=S(e,t,l,u),d=function(e,t,n,r){var o=(0,p.angleDistance)(e,t,n);return e+o*r*n*-1}(p.Vec.Angle(a.bodyArc.center,a.start.point),p.Vec.Angle(a.bodyArc.center,a.end.point),Math.sign(t.props.bend),f);n=(0,p.getPointOnCircle)(a.bodyArc.center,a.bodyArc.radius,d)}var h=m(e,t);return{box:p.Box.FromCenter(n,h),debugGeom:r}}function S(e,t,n,r){var o=r.hasEndArrowhead,i=r.hasEndBinding,a=r.hasStartBinding,u=r.hasStartArrowhead,s=(0,v.getArrowLength)(e,t),c=(0,p.clamp)(t.props.labelPosition,u||a?n.start:0,o||i?n.end:1),l=Math.min(.02,500/s*.02);return c=c>=.5-l&&c<=.5+l?.5:c}function x(e,t,n,r,o,i){var a=(0,p.intersectCirclePolygon)(e,t,i),u=(0,p.angleDistance)(n,r,o);return null===a||void 0===a?void 0:a.filter((function(t){var r=(0,p.angleDistance)(n,p.Vec.Angle(e,t),o);return r>=0&&r<=u}))}function P(e,t){var n,r=null,o=-1/0,i=u(t);try{for(i.s();!(n=i.n()).done;){var a=n.value,s=p.Vec.Dist2(e,a);s>o&&(r=a,o=s)}}catch(c){i.e(c)}finally{i.f()}return r}function O(e){return h.ARROW_LABEL_FONT_SIZES[e.props.size]*e.props.scale}},33036:function(e,t,n){"use strict";var r,o=n(50883).default,i=Object.defineProperty,a=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,c={};!function(e,t){for(var n in t)i(e,n,{get:t[n],enumerable:!0})}(c,{getArrowheadPathForType:function(){return f}}),e.exports=(r=c,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var c,l=o(u(t));try{var f=function(){var o=c.value;s.call(e,o)||o===n||i(e,o,{get:function(){return t[o]},enumerable:!(r=a(t,o))||r.enumerable})};for(l.s();!(c=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(i({},"__esModule",{value:!0}),r));var l=n(57777);function f(e,t,n){var r="end"===t?e.end.arrowhead:e.start.arrowhead;if("none"!==r){var o=function(e,t,n){var r,o="end"===t?e.end.point:e.start.point,i="end"===t?e.start.point:e.end.point,a=e.isStraight?l.Vec.Dist(i,o):Math.abs(e.bodyArc.length),u=Math.max(Math.min(a/5,3*n),n);if(e.isStraight)r=l.Vec.Nudge(o,i,u);else{var s=(0,l.intersectCircleCircle)(o,u,e.handleArc.center,e.handleArc.radius);r="end"===t?e.handleArc.sweepFlag?s[0]:s[1]:e.handleArc.sweepFlag?s[1]:s[0]}return l.Vec.IsNaN(r)&&(r=e.start.point),{point:o,int:r}}(e,t,n);if(o){switch(r){case"bar":return function(e){var t=e.int,n=e.point,r=l.Vec.Sub(t,n).div(2),o=l.Vec.Add(n,l.Vec.Rot(r,l.HALF_PI)),i=l.Vec.Sub(n,l.Vec.Rot(r,l.HALF_PI));return"M ".concat(o.x," ").concat(o.y," L ").concat(i.x," ").concat(i.y)}(o);case"square":return function(e){var t=e.int,n=e.point,r=l.Vec.Lrp(n,t,.85),o=l.Vec.Sub(r,n).div(2),i=l.Vec.Add(n,l.Vec.Rot(o,l.HALF_PI)),a=l.Vec.Sub(n,l.Vec.Rot(o,l.HALF_PI)),u=l.Vec.Add(r,l.Vec.Rot(o,l.HALF_PI)),s=l.Vec.Sub(r,l.Vec.Rot(o,l.HALF_PI));return"M ".concat(i.x," ").concat(i.y," L ").concat(u.x," ").concat(u.y," L ").concat(s.x," ").concat(s.y," L ").concat(a.x," ").concat(a.y," Z")}(o);case"diamond":return function(e){var t=e.point,n=e.int,r=l.Vec.Lrp(t,n,.75),o=l.Vec.RotWith(r,t,l.PI/4),i=l.Vec.RotWith(r,t,-l.PI/4),a=l.Vec.Lrp(o,i,.5);return a.add(l.Vec.Sub(a,t)),"M ".concat(a.x," ").concat(a.y," L ").concat(i.x," ").concat(i.y," ").concat(t.x," ").concat(t.y," L ").concat(o.x," ").concat(o.y," Z")}(o);case"dot":return function(e){var t=e.point,n=e.int,r=l.Vec.Lrp(t,n,.45),o=l.Vec.Dist(r,t);return"M ".concat(r.x-o,",").concat(r.y,"\n  a ").concat(o,",").concat(o," 0 1,0 ").concat(2*o,",0\n  a ").concat(o,",").concat(o," 0 1,0 -").concat(2*o,",0 ")}(o);case"inverted":return function(e){var t=e.point,n=e.int,r=l.Vec.Sub(n,t).div(2),o=l.Vec.Add(t,l.Vec.Rot(r,l.HALF_PI)),i=l.Vec.Sub(t,l.Vec.Rot(r,l.HALF_PI));return"M ".concat(o.x," ").concat(o.y," L ").concat(n.x," ").concat(n.y," L ").concat(i.x," ").concat(i.y," Z")}(o);case"arrow":return function(e){var t=e.point,n=e.int,r=l.Vec.RotWith(n,t,l.PI/6),o=l.Vec.RotWith(n,t,-l.PI/6);return"M ".concat(r.x," ").concat(r.y," L ").concat(t.x," ").concat(t.y," L ").concat(o.x," ").concat(o.y)}(o);case"triangle":return function(e){var t=e.point,n=e.int,r=l.Vec.RotWith(n,t,l.PI/6),o=l.Vec.RotWith(n,t,-l.PI/6);return"M ".concat(r.x," ").concat(r.y," L ").concat(o.x," ").concat(o.y," L ").concat(t.x," ").concat(t.y," Z")}(o)}return""}}}},61047:function(e,t,n){"use strict";var r,o=n(50883).default,i=Object.defineProperty,a=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,c={};function l(e){var t=e.start,n=e.end,r=e.handleArc,o=r.radius,i=r.largeArcFlag,a=r.sweepFlag;return"M".concat(t.handle.x,",").concat(t.handle.y," A").concat(o," ").concat(o," 0 ").concat(i," ").concat(a," ").concat(n.handle.x,",").concat(n.handle.y)}function f(e){var t=e.start,n=e.end,r=e.bodyArc,o=r.radius,i=r.largeArcFlag,a=r.sweepFlag;return"M".concat(t.point.x,",").concat(t.point.y," A").concat(o," ").concat(o," 0 ").concat(i," ").concat(a," ").concat(n.point.x,",").concat(n.point.y)}function d(e,t){return"M".concat(e.x,",").concat(e.y,"L").concat(t.x,",").concat(t.y)}function p(e){return d(e.start.handle,e.end.handle)}function h(e){return d(e.start.point,e.end.point)}!function(e,t){for(var n in t)i(e,n,{get:t[n],enumerable:!0})}(c,{getCurvedArrowHandlePath:function(){return l},getSolidCurvedArrowPath:function(){return f},getSolidStraightArrowPath:function(){return h},getStraightArrowHandlePath:function(){return p}}),e.exports=(r=c,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var c,l=o(u(t));try{var f=function(){var o=c.value;s.call(e,o)||o===n||i(e,o,{get:function(){return t[o]},enumerable:!(r=a(t,o))||r.enumerable})};for(l.s();!(c=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(i({},"__esModule",{value:!0}),r))},9733:function(e,t,n){"use strict";var r,o=n(50883).default,i=Object.defineProperty,a=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,c={};!function(e,t){for(var n in t)i(e,n,{get:t[n],enumerable:!0})}(c,{getCurvedArrowInfo:function(){return p}}),e.exports=(r=c,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var c,l=o(u(t));try{var f=function(){var o=c.value;s.call(e,o)||o===n||i(e,o,{get:function(){return t[o]},enumerable:!(r=a(t,o))||r.enumerable})};for(l.s();!(c=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(i({},"__esModule",{value:!0}),r));var l=n(57777),f=n(64761),d=n(34194);function p(e,t,n){var r=t.props,o=r.arrowheadEnd,i=r.arrowheadStart,a=t.props.bend;if(Math.abs(a)>Math.abs(t.props.bend*(f.WAY_TOO_BIG_ARROW_BEND_FACTOR*t.props.scale)))return(0,d.getStraightArrowInfo)(e,t,n);var u=(0,f.getArrowTerminalsInArrowSpace)(e,t,n),s=l.Vec.Med(u.start,u.end),c=l.Vec.Sub(u.end,u.start),p=l.Vec.Len(c)?c.uni():l.Vec.From(c),v=l.Vec.Add(s,p.per().mul(-a)),g=(0,f.getBoundShapeInfoForTerminal)(e,t,"start"),y=(0,f.getBoundShapeInfoForTerminal)(e,t,"end"),m=u.start.clone(),b=u.end.clone(),w=v.clone();if(l.Vec.Equals(m,b))return{bindings:n,isStraight:!0,start:{handle:m,point:m,arrowhead:t.props.arrowheadStart},end:{handle:b,point:b,arrowhead:t.props.arrowheadEnd},middle:w,isValid:!1,length:0};var S=t.props.bend<0,x=S?l.clockwiseAngleDist:l.counterClockwiseAngleDist,P=h(m,b,w),O=l.Vec.Angle(P.center,m),k=l.Vec.Angle(P.center,b),_=x(O,k);if(0===P.length||0===P.size||!(0,l.isSafeFloat)(P.length)||!(0,l.isSafeFloat)(P.size))return(0,d.getStraightArrowInfo)(e,t,n);var j=m.clone(),I=b.clone(),T=w.clone(),E=e.getShapePageTransform(t),C=0,M=0,A=f.MIN_ARROW_LENGTH*t.props.scale;if(g&&!g.isExact){var D,R=l.Mat.applyToPoint(E,j),N=l.Mat.applyToPoint(E,P.center),L=l.Mat.applyToPoint(E,I),U=l.Mat.Inverse(g.transform),F=l.Mat.applyToPoint(U,R),B=l.Mat.applyToPoint(U,N),V=l.Mat.applyToPoint(U,L),z=g.isClosed,H=(z?l.intersectCirclePolygon:l.intersectCirclePolyline)(B,P.radius,g.outline);if(H){var K,G=B.angle(F),q=B.angle(V),W=x(G,q);H=H.filter((function(e){return x(G,B.angle(e))<=W}));var Y=.25*W;H.sort(z?function(e,t){return Math.abs(x(G,B.angle(e))-Y)<Math.abs(x(G,B.angle(t))-Y)?-1:1}:function(e,t){return x(G,B.angle(e))<x(G,B.angle(t))?-1:1}),D=null!==(K=H[0])&&void 0!==K?K:z?void 0:F}else D=z?void 0:F;if(D&&(j.setTo(e.getPointInShapeSpace(t,l.Mat.applyToPoint(g.transform,D))),g.didIntersect=!0,"none"!==i)){var X=f.STROKE_SIZES[t.props.size]/2+("size"in g.shape.props?f.STROKE_SIZES[g.shape.props.size]/2:0);C=(f.BOUND_ARROW_OFFSET+X)*t.props.scale,A+=X*t.props.scale}}if(y&&!y.isExact){var Z,$=l.Mat.applyToPoint(E,j),Q=l.Mat.applyToPoint(E,I),J=l.Mat.applyToPoint(E,P.center),ee=l.Mat.Inverse(y.transform),te=l.Mat.applyToPoint(ee,$),ne=l.Mat.applyToPoint(ee,J),re=l.Mat.applyToPoint(ee,Q),oe=y.isClosed,ie=(oe?l.intersectCirclePolygon:l.intersectCirclePolyline)(ne,P.radius,y.outline);if(ie){var ae=ne.angle(te),ue=ne.angle(re),se=x(ae,ue),ce=.75*se;(ie=ie.filter((function(e){return x(ae,ne.angle(e))<=se}))).sort(oe?function(e,t){return Math.abs(x(ae,ne.angle(e))-ce)<Math.abs(x(ae,ne.angle(t))-ce)?-1:1}:function(e,t){return x(ae,ne.angle(e))<x(ae,ne.angle(t))?-1:1}),Z=ie[0]?ie[0]:oe?void 0:re}else Z=oe?void 0:re;if(Z&&(I.setTo(e.getPointInShapeSpace(t,l.Mat.applyToPoint(y.transform,Z))),y.didIntersect=!0,"none"!==o)){var le=f.STROKE_SIZES[t.props.size]/2+("size"in y.shape.props?f.STROKE_SIZES[y.shape.props.size]/2:0);M=(f.BOUND_ARROW_OFFSET+le)*t.props.scale,A+=le*t.props.scale}}var fe=l.Vec.Angle(P.center,j),de=l.Vec.Angle(P.center,I),pe=x(fe,de),he=pe*P.radius,ve=j.clone(),ge=I.clone();if(0!==C&&ve.setTo(P.center).add(l.Vec.FromAngle(fe+pe*(C/he*(S?1:-1))).mul(P.radius)),0!==M&&ge.setTo(P.center).add(l.Vec.FromAngle(de+pe*(M/he*(S?-1:1))).mul(P.radius)),l.Vec.DistMin(ve,ge,A)&&(0!==C&&0!==M?(C*=-1.5,M*=-1.5):0!==C?C*=-2:0!==M&&(M*=-2)),0!==C&&j.setTo(P.center).add(l.Vec.FromAngle(fe+pe*(C/he*(S?1:-1))).mul(P.radius)),0!==M&&I.setTo(P.center).add(l.Vec.FromAngle(de+pe*(M/he*(S?-1:1))).mul(P.radius)),g&&y&&!g.isExact&&!y.isExact){fe=l.Vec.Angle(P.center,j),de=l.Vec.Angle(P.center,I),he=(pe=x(fe,de))*P.radius;var ye=(0,f.getBoundShapeRelationships)(e,g.shape.id,y.shape.id);"double-bound"===ye&&he<30?(j.setTo(m),I.setTo(b),T.setTo(w)):"safe"===ye&&(g&&!g.didIntersect&&j.setTo(m),(y&&!y.didIntersect||x(O,fe)>x(O,de))&&I.setTo(P.center).add(l.Vec.FromAngle(fe+pe*(Math.min(.9,f.MIN_ARROW_LENGTH*t.props.scale/he)*(S?1:-1))).mul(P.radius)))}!function(e,t,n,r,o,i,a){var u=l.Vec.Angle(e,n),s=l.Vec.Angle(e,r),c=(0,l.clockwiseAngleDist)(u,s);a||(c=l.PI2-c);if(o.setTo(e).add(l.Vec.FromAngle(u+c*(.5*(a?1:-1))).mul(t)),c>i){o.rotWith(e,l.PI);var f=r.clone();r.setTo(n),n.setTo(f)}}(P.center,P.radius,j,I,T,_,S),j.equals(I)&&(j.setTo(T.clone().addXY(1,1)),I.setTo(T.clone().subXY(1,1))),m.setTo(j),b.setTo(I),w.setTo(T);var me=h(m,b,w);return{bindings:n,isStraight:!1,start:{point:m,handle:u.start,arrowhead:t.props.arrowheadStart},end:{point:b,handle:u.end,arrowhead:t.props.arrowheadEnd},middle:w,handleArc:P,bodyArc:me,isValid:0!==me.length&&isFinite(me.center.x)&&isFinite(me.center.y)}}function h(e,t,n){var r,o=null!==(r=(0,l.centerOfCircleFromThreePoints)(e,t,n))&&void 0!==r?r:l.Vec.Med(e,t),i=l.Vec.Dist(o,e),a=+l.Vec.Clockwise(e,n,t),u=Math.pow(Math.pow(e.y-t.y,2)+Math.pow(e.x-t.x,2),.5),s=Math.pow(Math.pow(t.y-n.y,2)+Math.pow(t.x-n.x,2),.5),c=Math.pow(Math.pow(n.y-e.y,2)+Math.pow(n.x-e.x,2),.5),f=2*Math.acos((s*s+c*c-u*u)/(2*s*c)),d=+(l.PI>f),p=(l.PI2-f)*(a?1:-1);return{center:o,radius:i,size:p,length:p*i,largeArcFlag:d,sweepFlag:a}}},64761:function(e,t,n){"use strict";var r,o=n(12897).default,i=n(50883).default,a=Object.defineProperty,u=Object.getOwnPropertyDescriptor,s=Object.getOwnPropertyNames,c=Object.prototype.hasOwnProperty,l={};!function(e,t){for(var n in t)a(e,n,{get:t[n],enumerable:!0})}(l,{BOUND_ARROW_OFFSET:function(){return _},MIN_ARROW_LENGTH:function(){return k},STROKE_SIZES:function(){return I},WAY_TOO_BIG_ARROW_BEND_FACTOR:function(){return j},createOrUpdateArrowBinding:function(){return P},getArrowBindings:function(){return b},getArrowInfo:function(){return S},getArrowTerminalsInArrowSpace:function(){return x},getBoundShapeInfoForTerminal:function(){return y},getBoundShapeRelationships:function(){return T},getIsArrowStraight:function(){return g},removeArrowBinding:function(){return O}}),e.exports=(r=l,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,l=i(s(t));try{var f=function(){var i=o.value;c.call(e,i)||i===n||a(e,i,{get:function(){return t[i]},enumerable:!(r=u(t,i))||r.enumerable})};for(l.s();!(o=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(a({},"__esModule",{value:!0}),r));var f=n(57777),d=n(75881),p=n(9733),h=n(34194),v=8;function g(e){return Math.abs(e.props.bend)<v*e.props.scale}function y(e,t,n){var r=e.getBindingsFromShape(t,"arrow").find((function(e){return e.props.terminal===n}));if(r){var o=e.getShape(r.toId);if(o){var i=e.getShapePageTransform(o),a=e.getShapeGeometry(o),u=a instanceof f.Group2d?a.children[0].vertices:a.vertices;return{shape:o,transform:i,isClosed:a.isClosed,isExact:r.props.isExact,didIntersect:!1,outline:u}}}}function m(e,t,n,r){var o=e.getShape(n.toId);if(o){var i=e.getShapeGeometry(o).bounds,a=i.point,u=i.size,s=f.Vec.Add(a,f.Vec.MulV(n.props.isPrecise||r?n.props.normalizedAnchor:{x:.5,y:.5},u)),c=f.Mat.applyToPoint(e.getShapePageTransform(o),s);return f.Mat.applyToPoint(f.Mat.Inverse(t),c)}return new f.Vec(0,0)}function b(e,t){var n=e.getBindingsFromShape(t,"arrow");return{start:n.find((function(e){return"start"===e.props.terminal})),end:n.find((function(e){return"end"===e.props.terminal}))}}var w=(0,d.createComputedCache)("arrow info",(function(e,t){var n=b(e,t);return g(t)?(0,h.getStraightArrowInfo)(e,t,n):(0,p.getCurvedArrowInfo)(e,t,n)}));function S(e,t){var n="string"===typeof t?t:t.id;return w.get(e,n)}function x(e,t,n){var r,o,i=e.getShapePageTransform(t),a=T(e,null===(r=n.start)||void 0===r?void 0:r.toId,null===(o=n.end)||void 0===o?void 0:o.toId);return{start:n.start?m(e,i,n.start,"double-bound"===a||"start-contains-end"===a):f.Vec.From(t.props.start),end:n.end?m(e,i,n.end,"double-bound"===a||"end-contains-start"===a):f.Vec.From(t.props.end)}}function P(e,t,n,r){var i="string"===typeof t?t:t.id,a="string"===typeof n?n:n.id,u=e.getBindingsFromShape(i,"arrow").filter((function(e){return e.props.terminal===r.terminal}));u.length>1&&e.deleteBindings(u.slice(1));var s=u[0];s?e.updateBinding(o(o({},s),{},{toId:a,props:r})):e.createBinding({type:"arrow",fromId:i,toId:a,props:r})}function O(e,t,n){var r=e.getBindingsFromShape(t,"arrow").filter((function(e){return e.props.terminal===n}));e.deleteBindings(r)}var k=10,_=10,j=10,I={s:2,m:3.5,l:5,xl:10};function T(e,t,n){if(!t||!n)return"safe";if(t===n)return"double-bound";var r=e.getShapePageBounds(t),o=e.getShapePageBounds(n);if(r&&o){if(r.contains(o))return"start-contains-end";if(o.contains(r))return"end-contains-start"}return"safe"}},34194:function(e,t,n){"use strict";var r,o=n(50883).default,i=Object.defineProperty,a=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,c={};!function(e,t){for(var n in t)i(e,n,{get:t[n],enumerable:!0})}(c,{getStraightArrowInfo:function(){return d}}),e.exports=(r=c,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var c,l=o(u(t));try{var f=function(){var o=c.value;s.call(e,o)||o===n||i(e,o,{get:function(){return t[o]},enumerable:!(r=a(t,o))||r.enumerable})};for(l.s();!(c=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(i({},"__esModule",{value:!0}),r));var l=n(57777),f=n(64761);function d(e,t,n){var r=t.props,o=r.arrowheadStart,i=r.arrowheadEnd,a=(0,f.getArrowTerminalsInArrowSpace)(e,t,n),u=a.start.clone(),s=a.end.clone(),c=l.Vec.Med(u,s);if(l.Vec.Equals(u,s))return{bindings:n,isStraight:!0,start:{handle:u,point:u,arrowhead:t.props.arrowheadStart},end:{handle:s,point:s,arrowhead:t.props.arrowheadEnd},middle:c,isValid:!1,length:0};var d=l.Vec.Sub(s,u).uni(),h=(0,f.getBoundShapeInfoForTerminal)(e,t,"start"),v=(0,f.getBoundShapeInfoForTerminal)(e,t,"end"),g=e.getShapePageTransform(t);p(s,a.start,g,v),p(u,a.end,g,h);var y=0,m=0,b=0,w=0,S=f.MIN_ARROW_LENGTH*t.props.scale,x=h&&v&&h.shape===v.shape,P=h&&v?(0,f.getBoundShapeRelationships)(e,h.shape.id,v.shape.id):"safe";"safe"!==P||!h||!v||x||h.isExact||v.isExact||(v.didIntersect&&!h.didIntersect?h.isClosed&&u.setTo(s.clone().add(d.clone().mul(f.MIN_ARROW_LENGTH*t.props.scale))):v.didIntersect||v.isClosed&&s.setTo(u.clone().sub(d.clone().mul(f.MIN_ARROW_LENGTH*t.props.scale))));var O=l.Vec.Sub(s,u),k=l.Vec.Len(O)?O.uni():l.Vec.From(O),_=!l.Vec.Equals(k,d);x||("start-contains-end"!==P&&h&&"none"!==o&&!h.isExact&&(b=f.STROKE_SIZES[t.props.size]/2+("size"in h.shape.props?f.STROKE_SIZES[h.shape.props.size]/2:0),y=(f.BOUND_ARROW_OFFSET+b)*t.props.scale,S+=b*t.props.scale),"end-contains-start"!==P&&v&&"none"!==i&&!v.isExact&&(w=f.STROKE_SIZES[t.props.size]/2+("size"in v.shape.props?f.STROKE_SIZES[v.shape.props.size]/2:0),m=(f.BOUND_ARROW_OFFSET+w)*t.props.scale,S+=w*t.props.scale));var j=u.clone().add(k.clone().mul(y*(_?-1:1))),I=s.clone().sub(k.clone().mul(m*(_?-1:1)));l.Vec.DistMin(j,I,S)&&(0!==y&&0!==m?(y*=-1.5,m*=-1.5):0!==y?y*=-1:0!==m&&(m*=-1)),u.add(k.clone().mul(y*(_?-1:1))),s.sub(k.clone().mul(m*(_?-1:1))),_?(h&&v&&s.setTo(l.Vec.Add(u,k.clone().mul(-f.MIN_ARROW_LENGTH*t.props.scale))),c.setTo(l.Vec.Med(a.start,a.end))):c.setTo(l.Vec.Med(u,s));var T=l.Vec.Dist(u,s);return{bindings:n,isStraight:!0,start:{handle:a.start,point:u,arrowhead:t.props.arrowheadStart},end:{handle:a.end,point:s,arrowhead:t.props.arrowheadEnd},middle:c,isValid:T>0,length:T}}function p(e,t,n,r){if(void 0!==r&&!r.isExact){var o,i,a=l.Mat.applyToPoint(n,t),u=l.Mat.applyToPoint(n,e),s=l.Mat.applyToPoint(l.Mat.Inverse(r.transform),a),c=l.Mat.applyToPoint(l.Mat.Inverse(r.transform),u),f=r.isClosed,d=(f?l.intersectLineSegmentPolygon:l.intersectLineSegmentPolyline)(s,c,r.outline);if(null!==d)o=null!==(i=d.sort((function(e,t){return l.Vec.Dist2(e,s)-l.Vec.Dist2(t,s)}))[0])&&void 0!==i?i:f?void 0:c;if(void 0!==o){var p=l.Mat.applyToPoint(r.transform,o),h=l.Mat.applyToPoint(l.Mat.Inverse(n),p);e.setTo(h),r.didIntersect=!0}}}},80617:function(e,t,n){"use strict";var r,o=n(12897).default,i=n(17383).default,a=n(34579).default,u=n(18336).default,s=n(29511).default,c=n(43693).default,l=n(50883).default,f=Object.defineProperty,d=Object.getOwnPropertyDescriptor,p=Object.getOwnPropertyNames,h=Object.prototype.hasOwnProperty,v={};!function(e,t){for(var n in t)f(e,n,{get:t[n],enumerable:!0})}(v,{Idle:function(){return g}}),e.exports=(r=v,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,i=l(p(t));try{var a=function(){var i=o.value;h.call(e,i)||i===n||f(e,i,{get:function(){return t[i]},enumerable:!(r=d(t,i))||r.enumerable})};for(i.s();!(o=i.n()).done;)a()}catch(u){i.e(u)}finally{i.f()}}return e}(f({},"__esModule",{value:!0}),r));var g=function(e){function t(){return i(this,t),u(this,t,arguments)}return s(t,e),a(t,[{key:"onPointerDown",value:function(e){this.parent.transition("pointing",e)}},{key:"onEnter",value:function(){this.editor.setCursor({type:"cross",rotation:0})}},{key:"onCancel",value:function(){this.editor.setCurrentTool("select")}},{key:"onKeyUp",value:function(e){if("Enter"===e.key){if(this.editor.getIsReadonly())return null;var t,n=this.editor.getOnlySelectedShape();if(n&&this.editor.getShapeUtil(n).canEdit(n))this.editor.setCurrentTool("select"),this.editor.setEditingShape(n.id),null===(t=this.editor.root.getCurrent())||void 0===t||t.transition("editing_shape",o(o({},e),{},{target:"shape",shape:n}))}}}])}(n(57777).StateNode);c(g,"id","idle")},73281:function(e,t,n){"use strict";var r,o=n(12897).default,i=n(17383).default,a=n(34579).default,u=n(18336).default,s=n(29511).default,c=n(43693).default,l=n(50883).default,f=Object.defineProperty,d=Object.getOwnPropertyDescriptor,p=Object.getOwnPropertyNames,h=Object.prototype.hasOwnProperty,v={};!function(e,t){for(var n in t)f(e,n,{get:t[n],enumerable:!0})}(v,{Pointing:function(){return y}}),e.exports=(r=v,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,i=l(p(t));try{var a=function(){var i=o.value;h.call(e,i)||i===n||f(e,i,{get:function(){return t[i]},enumerable:!(r=d(t,i))||r.enumerable})};for(i.s();!(o=i.n()).done;)a()}catch(u){i.e(u)}finally{i.f()}}return e}(f({},"__esModule",{value:!0}),r));var g=n(57777),y=function(e){function t(){var e;i(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return e=u(this,t,[].concat(r)),c(e,"shape",void 0),c(e,"markId",""),c(e,"preciseTimeout",-1),c(e,"didTimeout",!1),e}return s(t,e),a(t,[{key:"onEnter",value:function(){var e=this;this.markId="",this.didTimeout=!1;var t=this.editor.getShapeAtPoint(this.editor.inputs.currentPagePoint,{filter:function(t){return!t.isLocked&&e.editor.canBindShapes({fromShape:"arrow",toShape:t,binding:"arrow"})},margin:0,hitInside:!0,renderingOnly:!0});t?this.editor.setHintingShapes([t.id]):this.createArrowShape(),this.startPreciseTimeout()}},{key:"onExit",value:function(){this.shape=void 0,this.editor.setHintingShapes([]),this.clearPreciseTimeout()}},{key:"onPointerMove",value:function(){if(this.editor.inputs.isDragging){if(this.shape||this.createArrowShape(),!this.shape)throw Error("expected shape");this.updateArrowShapeEndHandle(),this.editor.setCurrentTool("select.dragging_handle",{shape:this.shape,handle:{id:"end",type:"vertex",index:"a3",x:0,y:0},isCreating:!0,creatingMarkId:this.markId||void 0,onInteractionEnd:"arrow"})}}},{key:"onPointerUp",value:function(){this.cancel()}},{key:"onCancel",value:function(){this.cancel()}},{key:"onComplete",value:function(){this.cancel()}},{key:"onInterrupt",value:function(){this.cancel()}},{key:"cancel",value:function(){this.shape&&this.editor.bailToMark(this.markId),this.editor.setHintingShapes([]),this.parent.transition("idle")}},{key:"createArrowShape",value:function(){var e,t=this.editor.inputs.originPagePoint,n=(0,g.createShapeId)();this.markId=this.editor.markHistoryStoppingPoint("creating_arrow:".concat(n));var r=(0,g.maybeSnapToGrid)(t,this.editor);this.editor.createShape({id:n,type:"arrow",x:r.x,y:r.y,props:{scale:this.editor.user.getIsDynamicResizeMode()?1/this.editor.getZoomLevel():1}});var i=this.editor.getShape(n);if(!i)throw Error("expected shape");var a=this.editor.getShapeHandles(i);if(!a)throw Error("expected handles for arrow");var u=this.editor.getShapeUtil("arrow"),s=this.shape,c=a.find((function(e){return"start"===e.id})),l=null===(e=u.onHandleDrag)||void 0===e?void 0:e.call(u,i,{handle:o(o({},c),{},{x:0,y:0}),isPrecise:!0,initial:s});l&&this.editor.updateShapes([l]),this.shape=this.editor.getShape(n),this.editor.select(n)}},{key:"updateArrowShapeEndHandle",value:function(){var e=this.shape;if(!e)throw Error("expected shape");var t=this.editor.getShapeHandles(e);if(!t)throw Error("expected handles for arrow");var n,r=this.editor.getShapeUtil("arrow"),i=this.shape,a=t.find((function(e){return"start"===e.id})),u=null===(n=r.onHandleDrag)||void 0===n?void 0:n.call(r,e,{handle:o(o({},a),{},{x:0,y:0}),isPrecise:this.didTimeout,initial:i});u&&this.editor.updateShapes([u]);var s,c=this.editor.getShapeUtil("arrow"),l=this.shape,f=this.editor.getPointInShapeSpace(e,this.editor.inputs.currentPagePoint),d=t.find((function(e){return"end"===e.id})),p=null===(s=c.onHandleDrag)||void 0===s?void 0:s.call(c,this.editor.getShape(e),{handle:o(o({},d),{},{x:f.x,y:f.y}),isPrecise:!1,initial:l});p&&this.editor.updateShapes([p]),this.shape=this.editor.getShape(e.id)}},{key:"startPreciseTimeout",value:function(){var e=this;this.preciseTimeout=this.editor.timers.setTimeout((function(){e.getIsActive()&&(e.didTimeout=!0)}),320)}},{key:"clearPreciseTimeout",value:function(){clearTimeout(this.preciseTimeout)}}])}(g.StateNode);c(y,"id","pointing")},64500:function(e,t,n){"use strict";var r,o=n(4633).default,i=n(29293).default,a=n(85715).default,u=n(12897).default,s=n(17383).default,c=n(34579).default,l=n(18336).default,f=n(29511).default,d=n(43693).default,p=n(50883).default,h=Object.create,v=Object.defineProperty,g=Object.getOwnPropertyDescriptor,y=Object.getOwnPropertyNames,m=Object.getPrototypeOf,b=Object.prototype.hasOwnProperty,w=function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,i=p(y(t));try{var a=function(){var i=o.value;b.call(e,i)||i===n||v(e,i,{get:function(){return t[i]},enumerable:!(r=g(t,i))||r.enumerable})};for(i.s();!(o=i.n()).done;)a()}catch(u){i.e(u)}finally{i.f()}}return e},S={};!function(e,t){for(var n in t)v(e,n,{get:t[n],enumerable:!0})}(S,{BookmarkShapeUtil:function(){return E},getHumanReadableAddress:function(){return A}}),e.exports=(r=S,w(v({},"__esModule",{value:!0}),r));var x=n(44414),P=n(57777),O=function(e,t,n){return n=null!=e?h(m(e)):{},w(!t&&e&&e.__esModule?n:v(n,"default",{value:e,enumerable:!0}),e)}(n(48738)),k=n(9950),_=n(35284),j=n(90770),I=n(49750),T=n(65570),E=function(e){function t(){return s(this,t),l(this,t,arguments)}return f(t,e),c(t,[{key:"canResize",value:function(){return!1}},{key:"hideSelectionBoundsFg",value:function(){return!0}},{key:"getText",value:function(e){return e.props.url}},{key:"getDefaultProps",value:function(){return{url:"",w:300,h:320,assetId:null}}},{key:"component",value:function(e){return(0,x.jsx)(C,{shape:e,util:this})}},{key:"indicator",value:function(e){return(0,x.jsx)("rect",{width:(0,P.toDomPrecision)(e.props.w),height:(0,P.toDomPrecision)(e.props.h),rx:"6",ry:"6"})}},{key:"onBeforeCreate",value:function(e){return M(this.editor,e)}},{key:"onBeforeUpdate",value:function(e,t){if(e.props.url!==t.props.url){if(!P.T.linkUrl.isValid(t.props.url))return u(u({},t),{},{props:u(u({},t.props),{},{url:e.props.url})});!function(e,t){var n=t.props.url,r=P.AssetRecordType.createId((0,P.getHashForString)(n));e.getAsset(r)?t.props.assetId!==r&&e.updateShapes([{id:t.id,type:t.type,props:{assetId:r}}]):(e.updateShapes([{id:t.id,type:t.type,props:{assetId:null}}]),D(e,t))}(this.editor,t)}if(e.props.assetId!==t.props.assetId)return M(this.editor,t)}},{key:"getInterpolatedProps",value:function(e,t,n){return u(u({},n>.5?t.props:e.props),{},{w:(0,P.lerp)(e.props.w,t.props.w,n),h:(0,P.lerp)(e.props.h,t.props.h,n)})}}])}(P.BaseBoxShapeUtil);function C(e){var t=e.shape,n=e.util,r=t.props.assetId?n.editor.getAsset(t.props.assetId):null,o=!!(0,P.useSvgExportContext)()&&P.tlenv.isSafari,i=n.editor.getShapePageTransform(t).rotation(),u=A(t),s=(0,k.useState)(!0),c=a(s,2),l=c[0],f=c[1];return(0,x.jsx)(P.HTMLContainer,{children:(0,x.jsxs)("div",{className:(0,O.default)("tl-bookmark__container",o&&"tl-bookmark__container--safariExport"),style:{boxShadow:o?void 0:(0,T.getRotatedBoxShadow)(i),maxHeight:t.props.h},children:[(!r||r.props.image)&&(0,x.jsxs)("div",{className:"tl-bookmark__image_container",children:[r?(0,x.jsx)("img",{className:"tl-bookmark__image",draggable:!1,referrerPolicy:"strict-origin-when-cross-origin",src:null===r||void 0===r?void 0:r.props.image,alt:(null===r||void 0===r?void 0:r.props.title)||""}):(0,x.jsx)("div",{className:"tl-bookmark__placeholder"}),(null===r||void 0===r?void 0:r.props.image)&&(0,x.jsx)(j.HyperlinkButton,{url:t.props.url})]}),(0,x.jsxs)("div",{className:"tl-bookmark__copy_container",children:[null!==r&&void 0!==r&&r.props.title?(0,x.jsx)("h2",{className:"tl-bookmark__heading",children:(0,_.convertCommonTitleHTMLEntities)(r.props.title)}):null,null!==r&&void 0!==r&&r.props.description&&null!==r&&void 0!==r&&r.props.image?(0,x.jsx)("p",{className:"tl-bookmark__description",children:r.props.description}):null,(0,x.jsxs)("a",{className:"tl-bookmark__link",href:t.props.url||"",target:"_blank",rel:"noopener noreferrer",onPointerDown:P.stopEventPropagation,onPointerUp:P.stopEventPropagation,onClick:P.stopEventPropagation,children:[l&&null!==r&&void 0!==r&&r.props.favicon?(0,x.jsx)("img",{className:"tl-bookmark__favicon",src:null===r||void 0===r?void 0:r.props.favicon,referrerPolicy:"strict-origin-when-cross-origin",onError:function(){return f(!1)},alt:"favicon of ".concat(u)}):(0,x.jsx)("div",{className:"tl-hyperlink__icon",style:{mask:'url("'.concat(I.LINK_ICON,'") center 100% / 100% no-repeat'),WebkitMask:'url("'.concat(I.LINK_ICON,'") center 100% / 100% no-repeat')}}),(0,x.jsx)("span",{children:u})]})]})]})})}function M(e,t){var n=t.props.assetId?e.getAsset(t.props.assetId):null,r=320;return n&&(n.props.image||(r=n.props.title?101:46)),u(u({},t),{},{props:u(u({},t.props),{},{h:r})})}d(E,"type","bookmark"),d(E,"props",P.bookmarkShapeProps),d(E,"migrations",P.bookmarkShapeMigrations);var A=function(e){try{return new URL(e.props.url).hostname.replace(/^www\./,"")}catch(t){return e.props.url}};var D=(0,P.debounce)(function(){var e=i(o().mark((function e(t,n){var r,i;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.isDisposed){e.next=2;break}return e.abrupt("return");case 2:return r=n.props.url,e.next=5,t.getAssetForExternalContent({type:"url",url:r});case 5:if(i=e.sent){e.next=8;break}return e.abrupt("return");case 8:t.run((function(){t.createAssets([i]),t.updateShapes([{id:n.id,type:n.type,props:{assetId:i.id}}])}));case 9:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),500)},25410:function(e,t,n){"use strict";var r,o=n(17383).default,i=n(34579).default,a=n(18336).default,u=n(29511).default,s=n(43693).default,c=n(50883).default,l=Object.defineProperty,f=Object.getOwnPropertyDescriptor,d=Object.getOwnPropertyNames,p=Object.prototype.hasOwnProperty,h={};!function(e,t){for(var n in t)l(e,n,{get:t[n],enumerable:!0})}(h,{DrawShapeTool:function(){return m}}),e.exports=(r=h,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,i=c(d(t));try{var a=function(){var i=o.value;p.call(e,i)||i===n||l(e,i,{get:function(){return t[i]},enumerable:!(r=f(t,i))||r.enumerable})};for(i.s();!(o=i.n()).done;)a()}catch(u){i.e(u)}finally{i.f()}}return e}(l({},"__esModule",{value:!0}),r));var v=n(57777),g=n(95714),y=n(32324),m=function(e){function t(){var e;o(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return e=a(this,t,[].concat(r)),s(e,"shapeType","draw"),e}return u(t,e),i(t,[{key:"onExit",value:function(){this.children.drawing.initialShape=void 0}}],[{key:"children",value:function(){return[y.Idle,g.Drawing]}}])}(v.StateNode);s(m,"id","draw"),s(m,"initial","idle"),s(m,"isLockable",!1)},89736:function(e,t,n){"use strict";var r,o=n(12897).default,i=n(17383).default,a=n(34579).default,u=n(18336).default,s=n(29511).default,c=n(43693).default,l=n(50883).default,f=Object.defineProperty,d=Object.getOwnPropertyDescriptor,p=Object.getOwnPropertyNames,h=Object.prototype.hasOwnProperty,v={};!function(e,t){for(var n in t)f(e,n,{get:t[n],enumerable:!0})}(v,{DrawShapeUtil:function(){return j}}),e.exports=(r=v,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,i=l(p(t));try{var a=function(){var i=o.value;h.call(e,i)||i===n||f(e,i,{get:function(){return t[i]},enumerable:!(r=d(t,i))||r.enumerable})};for(i.s();!(o=i.n()).done;)a()}catch(u){i.e(u)}finally{i.f()}}return e}(f({},"__esModule",{value:!0}),r));var g=n(44414),y=n(57777),m=n(14080),b=n(92965),w=n(57856),S=n(83237),x=n(17048),P=n(82362),O=n(28040),k=n(38546),_=n(4648),j=function(e){function t(){return i(this,t),u(this,t,arguments)}return s(t,e),a(t,[{key:"hideResizeHandles",value:function(e){return T(e)}},{key:"hideRotateHandle",value:function(e){return T(e)}},{key:"hideSelectionBoundsFg",value:function(e){return T(e)}},{key:"getDefaultProps",value:function(){return{segments:[],color:"black",fill:"none",dash:"draw",size:"m",isComplete:!1,isClosed:!1,isPen:!1,scale:1}}},{key:"getGeometry",value:function(e){var t=(0,_.getPointsFromSegments)(e.props.segments),n=(b.STROKE_SIZES[e.props.size]+1)*e.props.scale;if(1===e.props.segments.length){var r=y.Box.FromPoints(t);if(r.width<2*n&&r.height<2*n)return new y.Circle2d({x:-n,y:-n,radius:n,isFilled:!0})}var o=(0,S.getStrokePoints)(t,(0,_.getFreehandOptions)(e.props,n,e.props.isPen,!0)).map((function(e){return e.point}));return e.props.isClosed?new y.Polygon2d({points:o,isFilled:"none"!==e.props.fill}):new y.Polyline2d({points:o})}},{key:"component",value:function(e){return(0,g.jsx)(y.SVGContainer,{children:(0,g.jsx)(E,{shape:e})})}},{key:"indicator",value:function(e){var t,n=(0,_.getPointsFromSegments)(e.props.segments),r=(b.STROKE_SIZES[e.props.size]+1)*e.props.scale,o=this.editor.getZoomLevel();o<.5&&o<1.5/r||e.props.isPen||"draw"!==e.props.dash||1!==n.length||(r+=(0,y.rng)(e.id)()*(r/6));var i=e.props.isComplete||"straight"===(null===(t=(0,y.last)(e.props.segments))||void 0===t?void 0:t.type),a=(0,_.getFreehandOptions)(e.props,r,i,!0),u=(0,S.getStrokePoints)(n,a),s=u.length>1?(0,x.getSvgPathFromStrokePoints)(u,e.props.isClosed):I(n[0],r);return(0,g.jsx)("path",{d:s})}},{key:"toSvg",value:function(e,t){t.addExportDef((0,w.getFillDefForExport)(e.props.fill));var n=1/e.props.scale;return(0,g.jsx)("g",{transform:"scale(".concat(n,")"),children:(0,g.jsx)(E,{shape:e,zoomOverride:1})})}},{key:"getCanvasSvgDefs",value:function(){return[(0,w.getFillDefForCanvas)()]}},{key:"onResize",value:function(e,t){var n,r=t.scaleX,i=t.scaleY,a=[],u=l(e.props.segments);try{for(u.s();!(n=u.n()).done;){var s=n.value;a.push(o(o({},s),{},{points:s.points.map((function(e){var t=e.x,n=e.y,o=e.z;return{x:(0,y.toFixed)(r*t),y:(0,y.toFixed)(i*n),z:o}}))}))}}catch(c){u.e(c)}finally{u.f()}return{props:{segments:a}}}},{key:"expandSelectionOutlinePx",value:function(e){var t="draw"===e.props.dash?1.6:1;return b.STROKE_SIZES[e.props.size]*t/2*e.props.scale}},{key:"getInterpolatedProps",value:function(e,t,n){return o(o({},n>.5?t.props:e.props),{},{segments:(0,O.interpolateSegments)(e.props.segments,t.props.segments,n),scale:(0,y.lerp)(e.props.scale,t.props.scale,n)})}}])}(y.ShapeUtil);function I(e,t){var n=.5*(t+1);return"M ".concat(e.x," ").concat(e.y," m -").concat(n,", 0 a ").concat(n,",").concat(n," 0 1,0 ").concat(2*n,",0 a ").concat(n,",").concat(n," 0 1,0 -").concat(2*n,",0")}function T(e){return 1===e.props.segments.length&&e.props.segments[0].points.length<2}function E(e){var t,n=e.shape,r=e.zoomOverride,o=(0,k.useDefaultColorTheme)(),i=(0,y.useEditor)(),a=(0,_.getPointsFromSegments)(n.props.segments),u=n.props.isComplete||"straight"===(null===(t=(0,y.last)(n.props.segments))||void 0===t?void 0:t.type),s=(b.STROKE_SIZES[n.props.size]+1)*n.props.scale,c=(0,y.useValue)("force solid",(function(){var e=null!==r&&void 0!==r?r:i.getZoomLevel();return e<.5&&e<1.5/s}),[i,s,r]),l=(0,y.useValue)("dot adjustment",(function(){return(null!==r&&void 0!==r?r:i.getZoomLevel())<.2?0:.1}),[i,r]);c||n.props.isPen||"draw"!==n.props.dash||1!==a.length||(s+=(0,y.rng)(n.id)()*(s/6));var f=(0,_.getFreehandOptions)(n.props,s,u,c);if(!c&&"draw"===n.props.dash)return(0,g.jsxs)(g.Fragment,{children:[n.props.isClosed&&n.props.fill&&a.length>1?(0,g.jsx)(m.ShapeFill,{d:(0,x.getSvgPathFromStrokePoints)((0,S.getStrokePoints)(a,f),n.props.isClosed),theme:o,color:n.props.color,fill:n.props.isClosed?n.props.fill:"none",scale:n.props.scale}):null,(0,g.jsx)("path",{d:(0,P.svgInk)(a,f),strokeLinecap:"round",fill:o[n.props.color].solid})]});var d=(0,S.getStrokePoints)(a,f),p=d.length<2,h=p?I(a[0],0):(0,x.getSvgPathFromStrokePoints)(d,n.props.isClosed);return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(m.ShapeFill,{d:h,theme:o,color:n.props.color,fill:p||n.props.isClosed?n.props.fill:"none",scale:n.props.scale}),(0,g.jsx)("path",{d:h,strokeLinecap:"round",fill:p?o[n.props.color].solid:"none",stroke:o[n.props.color].solid,strokeWidth:s,strokeDasharray:p?"none":(0,_.getDrawShapeStrokeDashArray)(n,s,l),strokeDashoffset:"0"})]})}c(j,"type","draw"),c(j,"props",y.drawShapeProps),c(j,"migrations",y.drawShapeMigrations)},4648:function(e,t,n){"use strict";var r,o=n(41132).default,i=n(12897).default,a=n(50883).default,u=Object.defineProperty,s=Object.getOwnPropertyDescriptor,c=Object.getOwnPropertyNames,l=Object.prototype.hasOwnProperty,f={};!function(e,t){for(var n in t)u(e,n,{get:t[n],enumerable:!0})}(f,{getDrawShapeStrokeDashArray:function(){return S},getFreehandOptions:function(){return b},getHighlightFreehandSettings:function(){return m},getPointsFromSegments:function(){return w}}),e.exports=(r=f,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,i=a(c(t));try{var f=function(){var i=o.value;l.call(e,i)||i===n||u(e,i,{get:function(){return t[i]},enumerable:!(r=s(t,i))||r.enumerable})};for(i.s();!(o=i.n()).done;)f()}catch(d){i.e(d)}finally{i.f()}}return e}(u({},"__esModule",{value:!0}),r));var d=n(57777),p=function(e){return.65*e+.35*(0,d.SIN)(e*d.PI/2)},h=function(e){return{size:e,thinning:.5,streamline:(0,d.modulate)(e,[9,16],[.64,.74],!0),smoothing:.62,easing:d.EASINGS.easeOutSine,simulatePressure:!0}},v=function(e){return{size:1+1.2*e,thinning:.62,streamline:.62,smoothing:.62,simulatePressure:!1,easing:p}},g=function(e){return{size:e,thinning:0,streamline:(0,d.modulate)(e,[9,16],[.64,.74],!0),smoothing:.62,simulatePressure:!1,easing:d.EASINGS.linear}},y=function(e){return{size:e,thinning:0,streamline:.62,smoothing:.62,simulatePressure:!1,easing:d.EASINGS.linear}};function m(e){var t=e.strokeWidth,n=e.showAsComplete;return{size:1+t,thinning:0,streamline:.5,smoothing:.5,simulatePressure:!1,easing:d.EASINGS.easeOutSine,last:n}}function b(e,t,n,r){var o=e.isComplete||n;return r?e.isPen?i(i({},y(t)),{},{last:o}):i(i({},g(t)),{},{last:o}):"draw"===e.dash?e.isPen?i(i({},v(t)),{},{last:o}):i(i({},h(t)),{},{last:o}):i(i({},g(t)),{},{last:o})}function w(e){var t,n=[],r=a(e);try{for(r.s();!(t=r.n()).done;){var i=t.value;if("free"===i.type||i.points.length<2)n.push.apply(n,o(i.points.map(d.Vec.Cast)));else{var u=Math.max(4,Math.floor(d.Vec.Dist(i.points[0],i.points[1])/16));n.push.apply(n,o(d.Vec.PointsBetween(i.points[0],i.points[1],u)))}}}catch(s){r.e(s)}finally{r.f()}return n}function S(e,t,n){return{draw:"none",solid:"none",dotted:"".concat(n," ").concat(2*t),dashed:"".concat(2*t," ").concat(2*t)}[e.props.dash]}},95714:function(e,t,n){"use strict";var r,o=n(12897).default,i=n(41132).default,a=n(17383).default,u=n(34579).default,s=n(18336).default,c=n(29511).default,l=n(43693).default,f=n(50883).default,d=Object.defineProperty,p=Object.getOwnPropertyDescriptor,h=Object.getOwnPropertyNames,v=Object.prototype.hasOwnProperty,g={};!function(e,t){for(var n in t)d(e,n,{get:t[n],enumerable:!0})}(g,{Drawing:function(){return b}}),e.exports=(r=g,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,i=f(h(t));try{var a=function(){var i=o.value;v.call(e,i)||i===n||d(e,i,{get:function(){return t[i]},enumerable:!(r=p(t,i))||r.enumerable})};for(i.s();!(o=i.n()).done;)a()}catch(u){i.e(u)}finally{i.f()}}return e}(d({},"__esModule",{value:!0}),r));var y=n(57777),m=n(92965),b=function(e){function t(){var e;a(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return e=s(this,t,[].concat(r)),l(e,"info",{}),l(e,"initialShape",void 0),l(e,"shapeType","highlight"===e.parent.id?"highlight":"draw"),l(e,"util",e.editor.getShapeUtil(e.shapeType)),l(e,"isPen",!1),l(e,"isPenOrStylus",!1),l(e,"segmentMode","free"),l(e,"didJustShiftClickToExtendPreviousShapeLine",!1),l(e,"pagePointWhereCurrentSegmentChanged",{}),l(e,"pagePointWhereNextSegmentChanged",null),l(e,"lastRecordedPoint",{}),l(e,"mergeNextPoint",!1),l(e,"currentLineLength",0),l(e,"markId",null),e}return c(t,e),u(t,[{key:"onEnter",value:function(e){this.markId=null,this.info=e,this.lastRecordedPoint=this.editor.inputs.currentPagePoint.clone(),this.startShape()}},{key:"onPointerMove",value:function(){var e=this.editor.inputs;if(this.isPen&&!e.isPen&&this.markId)return this.editor.bailToMark(this.markId),void this.startShape();this.isPenOrStylus?y.Vec.Dist(e.currentPagePoint,this.lastRecordedPoint)>=1/this.editor.getZoomLevel()?(this.lastRecordedPoint=e.currentPagePoint.clone(),this.mergeNextPoint=!1):this.mergeNextPoint=!0:this.mergeNextPoint=!1,this.updateDrawingShape()}},{key:"onKeyDown",value:function(e){if("Shift"===e.key)switch(this.segmentMode){case"free":this.segmentMode="starting_straight",this.pagePointWhereNextSegmentChanged=this.editor.inputs.currentPagePoint.clone();break;case"starting_free":this.segmentMode="starting_straight"}this.updateDrawingShape()}},{key:"onKeyUp",value:function(e){if("Shift"===e.key)switch(this.editor.snaps.clearIndicators(),this.segmentMode){case"straight":this.segmentMode="starting_free",this.pagePointWhereNextSegmentChanged=this.editor.inputs.currentPagePoint.clone();break;case"starting_straight":this.pagePointWhereNextSegmentChanged=null,this.segmentMode="free"}this.updateDrawingShape()}},{key:"onExit",value:function(){this.editor.snaps.clearIndicators(),this.pagePointWhereCurrentSegmentChanged=this.editor.inputs.currentPagePoint.clone()}},{key:"canClose",value:function(){return"highlight"!==this.shapeType}},{key:"getIsClosed",value:function(e,t,n){if(!this.canClose())return!1;var r=m.STROKE_SIZES[t],o=e[0].points[0],i=e[e.length-1],a=i.points[i.points.length-1];return o!==a&&this.currentLineLength>4*r*n&&y.Vec.DistMin(o,a,2*r*n)}},{key:"startShape",value:function(){var e=this.editor.inputs,t=e.originPagePoint,n=e.isPen;this.markId=this.editor.markHistoryStoppingPoint("draw start");var r=this.info.point.z,o=void 0===r?.5:r;this.isPen=n,this.isPenOrStylus=n||o>0&&o<.5||o>.5&&o<1;var a=this.isPenOrStylus?1.25*o:.5;if(this.segmentMode=this.editor.inputs.shiftKey?"straight":"free",this.didJustShiftClickToExtendPreviousShapeLine=!1,this.lastRecordedPoint=t.clone(),this.initialShape){var u=this.editor.getShape(this.initialShape.id);if(u&&"straight"===this.segmentMode){this.didJustShiftClickToExtendPreviousShapeLine=!0;var s=(0,y.last)(u.props.segments);if(!s)throw Error("Expected a previous segment!");var c=(0,y.last)(s.points);if(!c)throw Error("Expected a previous point!");var l=this.editor.getPointInShapeSpace(u,t).toFixed(),f=l.x,d=l.y,p={type:this.segmentMode,points:[{x:c.x,y:c.y,z:+a.toFixed(2)},{x:f,y:d,z:+a.toFixed(2)}]},h=y.Mat.applyToPoint(this.editor.getShapePageTransform(u.id),c);this.pagePointWhereCurrentSegmentChanged=h,this.pagePointWhereNextSegmentChanged=null;var v=[].concat(i(u.props.segments),[p]);this.currentLineLength<4*m.STROKE_SIZES[u.props.size]&&(this.currentLineLength=this.getLineLength(v));var g={id:u.id,type:this.shapeType,props:{segments:v}};return this.canClose()&&(g.props.isClosed=this.getIsClosed(v,u.props.size,u.props.scale)),void this.editor.updateShapes([g])}}this.pagePointWhereCurrentSegmentChanged=t.clone();var b=(0,y.createShapeId)();this.editor.createShapes([{id:b,type:this.shapeType,x:t.x,y:t.y,props:{isPen:this.isPenOrStylus,scale:this.editor.user.getIsDynamicResizeMode()?1/this.editor.getZoomLevel():1,segments:[{type:this.segmentMode,points:[{x:0,y:0,z:+a.toFixed(2)}]}]}}]),this.currentLineLength=0,this.initialShape=this.editor.getShape(b)}},{key:"updateDrawingShape",value:function(){var e=this.initialShape,t=this.editor.inputs;if(e){var n=e.id,r=e.props,a=r.size,u=r.scale,s=this.editor.getShape(n);if(s){var c=s.props.segments,l=this.editor.getPointInShapeSpace(s,t.currentPagePoint).toFixed(),f=l.x,d=l.y,p=l.z,h={x:f,y:d,z:this.isPenOrStylus?+(1.25*t.currentPagePoint.z).toFixed(2):.5};switch(this.segmentMode){case"starting_straight":var v=this.pagePointWhereNextSegmentChanged;if(null===v)throw Error("We should have a point where the segment changed");if(y.Vec.Dist2(v,t.currentPagePoint)>this.editor.options.dragDistanceSquared){this.pagePointWhereCurrentSegmentChanged=this.pagePointWhereNextSegmentChanged.clone(),this.pagePointWhereNextSegmentChanged=null,this.segmentMode="straight";var g=(0,y.last)(c);if(!g)throw Error("Expected a previous segment!");var b,w=(0,y.last)(g.points);if(!w)throw Error("Expected a previous last point!");var S=this.editor.getPointInShapeSpace(s,this.pagePointWhereCurrentSegmentChanged).toFixed().toJson();if("straight"===g.type){this.currentLineLength+=y.Vec.Dist(w,S),b={type:"straight",points:[o({},w),S]};var x=this.editor.getShapePageTransform(s);this.pagePointWhereCurrentSegmentChanged=y.Mat.applyToPoint(x,w)}else b={type:"straight",points:[S,h]};var P={id:n,type:this.shapeType,props:{segments:[].concat(i(c),[b])}};this.canClose()&&(P.props.isClosed=this.getIsClosed(c,a,u)),this.editor.updateShapes([P])}break;case"starting_free":var O=this.pagePointWhereNextSegmentChanged;if(null===O)throw Error("We should have a point where the segment changed");if(y.Vec.Dist2(O,t.currentPagePoint)>this.editor.options.dragDistanceSquared){this.pagePointWhereCurrentSegmentChanged=this.pagePointWhereNextSegmentChanged.clone(),this.pagePointWhereNextSegmentChanged=null,this.segmentMode="free";var k=c.slice(),_=k[k.length-1],j=(0,y.last)(_.points);if(!j)throw Error("No previous point!");var I={type:"free",points:i(y.Vec.PointsBetween(j,h,6).map((function(e){return{x:(0,y.toFixed)(e.x),y:(0,y.toFixed)(e.y),z:(0,y.toFixed)(e.z)}})))},T=[].concat(i(k),[I]);this.currentLineLength<4*m.STROKE_SIZES[s.props.size]&&(this.currentLineLength=this.getLineLength(T));var E={id:n,type:this.shapeType,props:{segments:T}};this.canClose()&&(E.props.isClosed=this.getIsClosed(T,a,u)),this.editor.updateShapes([E])}break;case"straight":var C,M=c.slice(),A=M[M.length-1],D=this.pagePointWhereCurrentSegmentChanged,R=this.editor.inputs,N=R.ctrlKey,L=R.currentPagePoint;if(!D)throw Error("We should have a point where the segment changed");var U=!1;this.didJustShiftClickToExtendPreviousShapeLine?this.editor.inputs.isDragging&&(U=!N,this.didJustShiftClickToExtendPreviousShapeLine=!1):U=!N;var F=this.editor.getPointInShapeSpace(s,L).toFixed().toJson(),B=!1,V=void 0;if((this.editor.user.getIsSnapMode()?!N:N)&&M.length>2){for(var z=void 0,H=8/this.editor.getZoomLevel(),K=0,G=c.length-2;K<G;K++){var q=c[K];if(!q)break;if("free"!==q.type){var W=q.points[0],Y=(0,y.last)(q.points);if(W&&Y){var X=y.Vec.NearestPointOnLineSegment(W,Y,F);if(y.Vec.DistMin(X,F,H)){z=X.toFixed().toJson(),H=y.Vec.Dist(X,F),V=q;break}}}}z&&(B=!0,F=z)}if(B&&V){var Z=this.editor.getShapePageTransform(s),$=V.points[0],Q=(0,y.last)(V.points);if(!Q)throw Error("Expected a last point!");var J=y.Mat.applyToPoint(Z,$),ee=y.Mat.applyToPoint(Z,Q),te=y.Mat.applyToPoint(Z,F);this.editor.snaps.setIndicators([{id:(0,y.uniqueId)(),type:"points",points:[J,te,ee]}])}else{if(this.editor.snaps.clearIndicators(),U){var ne=y.Vec.Angle(D,L),re=(0,y.snapAngle)(ne,24)-ne;C=y.Vec.RotWith(L,D,re)}else C=L;F=this.editor.getPointInShapeSpace(s,C).toFixed().toJson()}this.currentLineLength+=y.Vec.Dist(A.points[0],F),M[M.length-1]=o(o({},A),{},{type:"straight",points:[A.points[0],F]});var oe={id:n,type:this.shapeType,props:{segments:M}};this.canClose()&&(oe.props.isClosed=this.getIsClosed(c,a,u)),this.editor.updateShapes([oe]);break;case"free":var ie=c.slice(),ae=ie[ie.length-1],ue=i(ae.points);if(ue.length&&this.mergeNextPoint){var se=ue[ue.length-1].z;ue[ue.length-1]={x:h.x,y:h.y,z:se?Math.max(se,h.z):h.z}}else this.currentLineLength+=y.Vec.Dist(ue[ue.length-1],h),ue.push(h);ie[ie.length-1]=o(o({},ae),{},{points:ue}),this.currentLineLength<4*m.STROKE_SIZES[s.props.size]&&(this.currentLineLength=this.getLineLength(ie));var ce={id:n,type:this.shapeType,props:{segments:ie}};if(this.canClose()&&(ce.props.isClosed=this.getIsClosed(ie,a,u)),this.editor.updateShapes([ce]),ue.length>this.editor.options.maxPointsPerDrawShape){this.editor.updateShapes([{id:n,type:this.shapeType,props:{isComplete:!0}}]);var le=(0,y.createShapeId)(),fe=this.editor.getShape(n).props;this.editor.createShapes([{id:le,type:this.shapeType,x:(0,y.toFixed)(t.currentPagePoint.x),y:(0,y.toFixed)(t.currentPagePoint.y),props:{isPen:this.isPenOrStylus,scale:fe.scale,segments:[{type:"free",points:[{x:0,y:0,z:this.isPenOrStylus?+(1.25*p).toFixed():.5}]}]}}]),this.initialShape=(0,y.structuredClone)(this.editor.getShape(le)),this.mergeNextPoint=!1,this.lastRecordedPoint=t.currentPagePoint.clone(),this.currentLineLength=0}}}}}},{key:"getLineLength",value:function(e){var t,n=0,r=f(e);try{for(r.s();!(t=r.n()).done;)for(var o=t.value,i=0;i<o.points.length-1;i++){var a=o.points[i],u=o.points[i+1];n+=y.Vec.Dist2(u,a)}}catch(s){r.e(s)}finally{r.f()}return Math.sqrt(n)}},{key:"onPointerUp",value:function(){this.complete()}},{key:"onCancel",value:function(){this.cancel()}},{key:"onComplete",value:function(){this.complete()}},{key:"onInterrupt",value:function(){this.editor.inputs.isDragging||(this.markId&&this.editor.bailToMark(this.markId),this.cancel())}},{key:"complete",value:function(){var e=this.initialShape;e&&(this.editor.updateShapes([{id:e.id,type:e.type,props:{isComplete:!0}}]),this.parent.transition("idle"))}},{key:"cancel",value:function(){this.parent.transition("idle",this.info)}}])}(y.StateNode);l(b,"id","drawing")},32324:function(e,t,n){"use strict";var r,o=n(17383).default,i=n(34579).default,a=n(18336).default,u=n(29511).default,s=n(43693).default,c=n(50883).default,l=Object.defineProperty,f=Object.getOwnPropertyDescriptor,d=Object.getOwnPropertyNames,p=Object.prototype.hasOwnProperty,h={};!function(e,t){for(var n in t)l(e,n,{get:t[n],enumerable:!0})}(h,{Idle:function(){return v}}),e.exports=(r=h,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,i=c(d(t));try{var a=function(){var i=o.value;p.call(e,i)||i===n||l(e,i,{get:function(){return t[i]},enumerable:!(r=f(t,i))||r.enumerable})};for(i.s();!(o=i.n()).done;)a()}catch(u){i.e(u)}finally{i.f()}}return e}(l({},"__esModule",{value:!0}),r));var v=function(e){function t(){return o(this,t),a(this,t,arguments)}return u(t,e),i(t,[{key:"onPointerDown",value:function(e){this.parent.transition("drawing",e)}},{key:"onEnter",value:function(){this.editor.setCursor({type:"cross",rotation:0})}},{key:"onCancel",value:function(){this.editor.setCurrentTool("select")}}])}(n(57777).StateNode);s(v,"id","idle")},51066:function(e,t,n){"use strict";var r,o=n(12897).default,i=n(17383).default,a=n(34579).default,u=n(18336).default,s=n(29511).default,c=n(43693).default,l=n(85715).default,f=n(50883).default,d=Object.defineProperty,p=Object.getOwnPropertyDescriptor,h=Object.getOwnPropertyNames,v=Object.prototype.hasOwnProperty,g={};!function(e,t){for(var n in t)d(e,n,{get:t[n],enumerable:!0})}(g,{EmbedShapeUtil:function(){return x}}),e.exports=(r=g,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,i=f(h(t));try{var a=function(){var i=o.value;v.call(e,i)||i===n||d(e,i,{get:function(){return t[i]},enumerable:!(r=p(t,i))||r.enumerable})};for(i.s();!(o=i.n()).done;)a()}catch(u){i.e(u)}finally{i.f()}}return e}(d({},"__esModule",{value:!0}),r));var y=n(44414),m=n(57777),b=n(4033),w=n(55714),S=n(65570),x=function(e){function t(){return i(this,t),u(this,t,arguments)}return s(t,e),a(t,[{key:"getEmbedDefinitions",value:function(){return t.embedDefinitions}},{key:"getEmbedDefinition",value:function(e){return(0,w.getEmbedInfo)(t.embedDefinitions,e)}},{key:"getText",value:function(e){return e.props.url}},{key:"hideSelectionBoundsFg",value:function(e){return!this.canResize(e)}},{key:"canEdit",value:function(){return!0}},{key:"canResize",value:function(e){var t;return!(null===(t=this.getEmbedDefinition(e.props.url))||void 0===t||null===(t=t.definition)||void 0===t||!t.doesResize)}},{key:"canEditInReadOnly",value:function(){return!0}},{key:"getDefaultProps",value:function(){return{w:300,h:300,url:""}}},{key:"isAspectRatioLocked",value:function(e){var t,n=this.getEmbedDefinition(e.props.url);return null!==(t=null===n||void 0===n?void 0:n.definition.isAspectRatioLocked)&&void 0!==t&&t}},{key:"onResize",value:function(e,t){var n,r,o=this.isAspectRatioLocked(e),i=this.getEmbedDefinition(e.props.url),a=null!==(n=null===i||void 0===i?void 0:i.definition.minWidth)&&void 0!==n?n:200,u=null!==(r=null===i||void 0===i?void 0:i.definition.minHeight)&&void 0!==r?r:200;if(o){var s=e.props.w/e.props.h;s>1?a*=s:u/=s}return(0,m.resizeBox)(e,t,{minWidth:a,minHeight:u})}},{key:"component",value:function(e){var t,n,r,i,a=this,u=(0,m.useSvgExportContext)(),s=e.props,c=s.w,f=s.h,d=s.url,p=(0,m.useIsEditing)(e.id),h=this.getEmbedDefinition(d),v=(0,m.useValue)("is hovering",(function(){var e=a.editor.getCurrentPageState(),t=e.editingShapeId,n=e.hoveredShapeId;if(t&&n!==t){var r=a.editor.getShape(t);if(r&&a.editor.isShapeOfType(r,"embed"))return!0}return!1}),[]),g=this.editor.getShapePageTransform(e).rotation();if(u)return(0,y.jsx)(m.HTMLContainer,{className:"tl-embed-container",id:e.id,children:(0,y.jsx)("div",{className:"tl-embed",style:{border:0,boxShadow:(0,S.getRotatedBoxShadow)(g),borderRadius:null!==(r=null===h||void 0===h?void 0:h.definition.overrideOutlineRadius)&&void 0!==r?r:8,background:null!==(i=null===h||void 0===h?void 0:h.definition.backgroundColor)&&void 0!==i?i:"var(--color-background)",width:c,height:f}})});var w=p||v;if("undefined"!==typeof window&&(window!==window.top||window.self!==window.parent)&&"tldraw"===(null===h||void 0===h?void 0:h.definition.type))return null;if("github_gist"===(null===h||void 0===h?void 0:h.definition.type)){var x=h.url.split("/").pop();if(!x)throw Error("No gist id!");return(0,y.jsx)(m.HTMLContainer,{className:"tl-embed-container",id:e.id,children:(0,y.jsx)(P,{id:x,width:(0,m.toDomPrecision)(c),height:(0,m.toDomPrecision)(f),isInteractive:w,pageRotation:g})})}var O,k=(O=o(o({},b.embedShapePermissionDefaults),null!==(t=null===h||void 0===h?void 0:h.definition.overridePermissions)&&void 0!==t?t:{}),Object.entries(O).filter((function(e){var t=l(e,2);return t[0],t[1]})).map((function(e){return l(e,1)[0]})).join(" "));return(0,y.jsx)(m.HTMLContainer,{className:"tl-embed-container",id:e.id,children:null!==h&&void 0!==h&&h.definition?(0,y.jsx)("iframe",{className:"tl-embed",sandbox:k,src:h.embedUrl,width:(0,m.toDomPrecision)(c),height:(0,m.toDomPrecision)(f),draggable:!1,frameBorder:"0",referrerPolicy:"no-referrer-when-downgrade",style:{border:0,pointerEvents:w?"auto":"none",zIndex:w?"":"-1",boxShadow:(0,S.getRotatedBoxShadow)(g),borderRadius:null!==(n=null===h||void 0===h?void 0:h.definition.overrideOutlineRadius)&&void 0!==n?n:8,background:null===h||void 0===h?void 0:h.definition.backgroundColor}}):null})}},{key:"indicator",value:function(e){var t,n,r=this.getEmbedDefinition(e.props.url);return(0,y.jsx)("rect",{width:(0,m.toDomPrecision)(e.props.w),height:(0,m.toDomPrecision)(e.props.h),rx:null!==(t=null===r||void 0===r?void 0:r.definition.overrideOutlineRadius)&&void 0!==t?t:8,ry:null!==(n=null===r||void 0===r?void 0:r.definition.overrideOutlineRadius)&&void 0!==n?n:8})}},{key:"getInterpolatedProps",value:function(e,t,n){return o(o({},n>.5?t.props:e.props),{},{w:(0,m.lerp)(e.props.w,t.props.w,n),h:(0,m.lerp)(e.props.h,t.props.h,n)})}}],[{key:"setEmbedDefinitions",value:function(e){t.embedDefinitions=e}}])}(m.BaseBoxShapeUtil);function P(e){var t=e.id,n=e.isInteractive,r=e.width,i=e.height,a=e.style,u=e.pageRotation;if(!t.match(/^[0-9a-f]+$/))throw Error("No gist id!");return(0,y.jsx)("iframe",{className:"tl-embed",draggable:!1,width:(0,m.toDomPrecision)(r),height:(0,m.toDomPrecision)(i),frameBorder:"0",scrolling:"no",referrerPolicy:"no-referrer-when-downgrade",style:o(o({},a),{},{pointerEvents:n?"all":"none",zIndex:n?"":"-1",boxShadow:(0,S.getRotatedBoxShadow)(u)}),srcDoc:'\n\t\t\t<html>\n\t\t\t\t<head>\n\t\t\t\t\t<base target="_blank">\n\t\t\t\t</head>\n\t\t\t\t<body>\n\t\t\t\t\t<script src='.concat("https://gist.github.com/".concat(t,".js"),'><\/script>\n\t\t\t\t\t<style type="text/css">\n\t\t\t\t\t\t* { margin: 0px; }\n\t\t\t\t\t\ttable { height: 100%; background-color: red; }\n\t\t\t\t\t\t.gist { background-color: none; height: 100%;  }\n\t\t\t\t\t\t.gist .gist-file { height: calc(100vh - 2px); padding: 0px; display: grid; grid-template-rows: 1fr auto; }\n\t\t\t\t\t</style>\n\t\t\t\t</body>\n\t\t\t</html>')})}c(x,"type","embed"),c(x,"props",m.embedShapeProps),c(x,"migrations",m.embedShapeMigrations),c(x,"embedDefinitions",b.DEFAULT_EMBED_DEFINITIONS)},65512:function(e,t,n){"use strict";var r,o=n(17383).default,i=n(34579).default,a=n(18336).default,u=n(29511).default,s=n(43693).default,c=n(50883).default,l=Object.defineProperty,f=Object.getOwnPropertyDescriptor,d=Object.getOwnPropertyNames,p=Object.prototype.hasOwnProperty,h={};!function(e,t){for(var n in t)l(e,n,{get:t[n],enumerable:!0})}(h,{FrameShapeTool:function(){return v}}),e.exports=(r=h,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,i=c(d(t));try{var a=function(){var i=o.value;p.call(e,i)||i===n||l(e,i,{get:function(){return t[i]},enumerable:!(r=f(t,i))||r.enumerable})};for(i.s();!(o=i.n()).done;)a()}catch(u){i.e(u)}finally{i.f()}}return e}(l({},"__esModule",{value:!0}),r));var v=function(e){function t(){var e;o(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return e=a(this,t,[].concat(r)),s(e,"shapeType","frame"),e}return u(t,e),i(t,[{key:"onCreate",value:function(e){var t=this;if(e){var n=this.editor.getShapePageBounds(e),r=[],o=this.editor.getShapeAncestors(e).map((function(e){return e.id}));this.editor.getSortedChildIdsForParent(e.parentId).map((function(i){var a=t.editor.getShape(i);if(a&&a.id!==e.id&&!a.isLocked){var u=t.editor.getShapePageBounds(a);u&&n.contains(u)&&function(e,t,n){if(t.includes(e.id))return!1;if(e.parentId===n.parentId)return!0;return!1}(a,o,e)&&r.push(a.id)}})),this.editor.reparentShapes(r,e.id),this.editor.getInstanceState().isToolLocked?this.editor.setCurrentTool("frame"):this.editor.setCurrentTool("select.idle")}}}])}(n(57777).BaseBoxShapeTool);s(v,"id","frame"),s(v,"initial","idle")},32694:function(e,t,n){"use strict";var r,o=n(12897).default,i=n(17383).default,a=n(34579).default,u=n(18336).default,s=n(29511).default,c=n(43693).default,l=n(50883).default,f=Object.create,d=Object.defineProperty,p=Object.getOwnPropertyDescriptor,h=Object.getOwnPropertyNames,v=Object.getPrototypeOf,g=Object.prototype.hasOwnProperty,y=function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,i=l(h(t));try{var a=function(){var i=o.value;g.call(e,i)||i===n||d(e,i,{get:function(){return t[i]},enumerable:!(r=p(t,i))||r.enumerable})};for(i.s();!(o=i.n()).done;)a()}catch(u){i.e(u)}finally{i.f()}}return e},m={};!function(e,t){for(var n in t)d(e,n,{get:t[n],enumerable:!0})}(m,{FrameShapeUtil:function(){return j},defaultEmptyAs:function(){return _}}),e.exports=(r=m,y(d({},"__esModule",{value:!0}),r));var b=n(44414),w=n(57777),S=function(e,t,n){return n=null!=e?f(v(e)):{},y(!t&&e&&e.__esModule?n:d(n,"default",{value:e,enumerable:!0}),e)}(n(48738)),x=n(38147),P=n(38546),O=n(2498),k=n(5766);function _(e,t){return e.match(/^\s*$/)?t:e}var j=function(e){function t(){return i(this,t),u(this,t,arguments)}return s(t,e),a(t,[{key:"canEdit",value:function(){return!0}},{key:"getDefaultProps",value:function(){return{w:320,h:180,name:""}}},{key:"getGeometry",value:function(e){var t,n,r,o,i=this.editor,a=i.getZoomLevel(),u=(0,k.getFrameHeadingOpts)(e,"black"),s=(0,k.getFrameHeadingInfo)(i,e,u),c=(0,k.getFrameHeadingSide)(i,e),l=s.box,f=l.w,d=l.h,p=Math.min(f,e.props.w*a),h=Math.min(d,e.props.h*a);switch(c){case 0:t=-8/a,n=(-d-4)/a,r=(p+16)/a,o=d/a;break;case 1:t=(-d-4)/a,o=(h+16)/a,n=e.props.h-o+8/a,r=d/a;break;case 2:t=e.props.w-(p+8)/a,n=e.props.h+4/a,r=(h+16)/a,o=d/a;break;case 3:t=e.props.w+4/a,o=(h+16)/a,n=-8/a,r=d/a}return new w.Group2d({children:[new w.Rectangle2d({width:e.props.w,height:e.props.h,isFilled:!1}),new w.Rectangle2d({x:t,y:n,width:r,height:o,isFilled:!0,isLabel:!0})]})}},{key:"getText",value:function(e){return e.props.name}},{key:"component",value:function(e){var t=this,n=this.editor.getShapeGeometry(e).bounds,r=(0,P.useDefaultColorTheme)(),o=(0,w.useValue)("is creating this shape",(function(){var n=t.editor.getStateDescendant("select.resizing");if(!n)return!1;if(!n.getIsActive())return!1;var r=null===n||void 0===n?void 0:n.info;return!!r&&(r.isCreating&&t.editor.getOnlySelectedShapeId()===e.id)}),[e.id]);return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(w.SVGContainer,{children:(0,b.jsx)("rect",{className:(0,S.default)("tl-frame__body",{"tl-frame__creating":o}),width:n.width,height:n.height,fill:r.solid,stroke:r.text})}),o?null:(0,b.jsx)(O.FrameHeading,{id:e.id,name:e.props.name,width:n.width,height:n.height})]})}},{key:"toSvg",value:function(e,t){var n=(0,w.getDefaultColorTheme)({isDarkMode:t.isDarkMode}),r=(0,k.getFrameHeadingSide)(this.editor,e),o=(0,k.getFrameHeadingTranslation)(e,r,!0),i=(0,k.getFrameHeadingOpts)(e,n.text),a=(0,k.getFrameHeadingInfo)(this.editor,e,i),u=a.box,s=a.spans,c=(0,x.createTextJsxFromSpans)(this.editor,s,i);return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("rect",{width:e.props.w,height:e.props.h,fill:n.solid,stroke:n.black.solid,strokeWidth:1,rx:1,ry:1}),(0,b.jsxs)("g",{transform:o,children:[(0,b.jsx)("rect",{x:u.x-8,y:u.y-4,width:u.width+20,height:u.height,fill:n.background,rx:4,ry:4}),c]})]})}},{key:"indicator",value:function(e){var t=this.editor.getShapeGeometry(e).bounds;return(0,b.jsx)("rect",{width:(0,w.toDomPrecision)(t.width),height:(0,w.toDomPrecision)(t.height),className:"tl-frame-indicator"})}},{key:"canReceiveNewChildrenOfType",value:function(e,t){return!e.isLocked}},{key:"providesBackgroundForChildren",value:function(){return!0}},{key:"canDropShapes",value:function(e,t){return!e.isLocked}},{key:"onDragShapesOver",value:function(e,t){t.every((function(t){return t.parentId===e.id}))||this.editor.reparentShapes(t,e.id)}},{key:"onDragShapesOut",value:function(e,t){var n=this.editor.getShape(e.parentId);n&&this.editor.isShapeOfType(n,"group")?this.editor.reparentShapes(t,n.id):this.editor.reparentShapes(t,this.editor.getCurrentPageId())}},{key:"onResize",value:function(e,t){return(0,w.resizeBox)(e,t)}},{key:"getInterpolatedProps",value:function(e,t,n){return o(o({},n>.5?t.props:e.props),{},{w:(0,w.lerp)(e.props.w,t.props.w,n),h:(0,w.lerp)(e.props.h,t.props.h,n)})}}])}(w.BaseBoxShapeUtil);c(j,"type","frame"),c(j,"props",w.frameShapeProps),c(j,"migrations",w.frameShapeMigrations)},2498:function(e,t,n){"use strict";var r,o=n(50883).default,i=Object.defineProperty,a=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,c={};!function(e,t){for(var n in t)i(e,n,{get:t[n],enumerable:!0})}(c,{FrameHeading:function(){return v}}),e.exports=(r=c,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var c,l=o(u(t));try{var f=function(){var o=c.value;s.call(e,o)||o===n||i(e,o,{get:function(){return t[o]},enumerable:!(r=a(t,o))||r.enumerable})};for(l.s();!(c=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(i({},"__esModule",{value:!0}),r));var l=n(44414),f=n(57777),d=n(9950),p=n(5766),h=n(3492);function v(e){var t=e.id,n=e.name,r=e.width,o=e.height,i=(0,f.useEditor)(),a=(0,f.useValue)("shape rotation",(function(){var e=i.getShape(t);if(!e)return{side:0,translation:"translate(0, 0)"};var n=(0,p.getFrameHeadingSide)(i,e);return{side:n,translation:(0,p.getFrameHeadingTranslation)(e,n,!1)}}),[i,t]),u=a.side,s=a.translation,c=(0,d.useRef)(null),v=(0,f.useIsEditing)(t);return(0,d.useEffect)((function(){var e=c.current;e&&v&&(e.focus(),e.select())}),[c,v]),(0,l.jsx)("div",{className:"tl-frame-heading",style:{overflow:v?"visible":"hidden",maxWidth:"calc(var(--tl-zoom) * ".concat(0===u||2===u?Math.ceil(r):Math.ceil(o),"px + var(--space-5))"),bottom:"100%",transform:"".concat(s," scale(var(--tl-scale)) translateX(calc(-1 * var(--space-3))")},children:(0,l.jsx)("div",{className:"tl-frame-heading-hit-area",children:(0,l.jsx)(h.FrameLabelInput,{ref:c,id:t,name:n,isEditing:v})})})}},3492:function(e,t,n){"use strict";var r,o=n(50883).default,i=Object.defineProperty,a=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,c={};!function(e,t){for(var n in t)i(e,n,{get:t[n],enumerable:!0})}(c,{FrameLabelInput:function(){return h}}),e.exports=(r=c,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var c,l=o(u(t));try{var f=function(){var o=c.value;s.call(e,o)||o===n||i(e,o,{get:function(){return t[o]},enumerable:!(r=a(t,o))||r.enumerable})};for(l.s();!(c=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(i({},"__esModule",{value:!0}),r));var l=n(44414),f=n(57777),d=n(9950),p=n(32694),h=(0,d.forwardRef)((function(e,t){var n=e.id,r=e.name,o=e.isEditing,i=(0,f.useEditor)(),a=(0,d.useCallback)((function(e){"Enter"!==e.key||e.nativeEvent.isComposing||((0,f.stopEventPropagation)(e),e.currentTarget.blur(),i.setEditingShape(null))}),[i]),u=(0,d.useCallback)((function(e){var t=i.getShape(n);if(t){var r=t.props.name,o=e.currentTarget.value.trim();r!==o&&i.updateShapes([{id:n,type:"frame",props:{name:o}}])}}),[n,i]),s=(0,d.useCallback)((function(e){var t=i.getShape(n);if(t){var r=t.props.name,o=e.currentTarget.value;r!==o&&i.updateShapes([{id:n,type:"frame",props:{name:o}}])}}),[n,i]);return(0,l.jsxs)("div",{className:"tl-frame-label ".concat(o?"tl-frame-label__editing":""),children:[(0,l.jsx)("input",{className:"tl-frame-name-input",ref:t,style:{display:o?void 0:"none"},value:r,autoFocus:!0,onKeyDown:a,onBlur:u,onChange:s}),(0,p.defaultEmptyAs)(r,"Frame")+String.fromCharCode(8203)]})}))},5766:function(e,t,n){"use strict";var r,o=n(50883).default,i=Object.defineProperty,a=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,c={};!function(e,t){for(var n in t)i(e,n,{get:t[n],enumerable:!0})}(c,{getFrameHeadingInfo:function(){return p},getFrameHeadingOpts:function(){return h},getFrameHeadingSide:function(){return d},getFrameHeadingTranslation:function(){return v}}),e.exports=(r=c,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var c,l=o(u(t));try{var f=function(){var o=c.value;s.call(e,o)||o===n||i(e,o,{get:function(){return t[o]},enumerable:!(r=a(t,o))||r.enumerable})};for(l.s();!(c=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(i({},"__esModule",{value:!0}),r));var l=n(57777),f=n(32694);function d(e,t){var n=(((0,l.canonicalizeRotation)(e.getShapePageTransform(t.id).rotation())+Math.PI/4)*(2/Math.PI)+4)%4;return Math.floor(n)}function p(e,t,n){var r=e.textMeasure.measureTextSpans((0,f.defaultEmptyAs)(t.props.name,"Frame")+String.fromCharCode(8203),n),o=r[0],i=(0,l.last)(r),a=i.box.w+i.box.x-o.box.x;return{box:new l.Box(0,-n.height,a,n.height),spans:r}}function h(e,t){return{fontSize:12,fontFamily:"Inter, sans-serif",textAlign:"start",width:e.props.w,height:32,padding:0,lineHeight:1,fontStyle:"normal",fontWeight:"normal",overflow:"truncate-ellipsis",verticalTextAlign:"middle",fill:t,offsetY:-34,offsetX:2}}function v(e,t,n){var r,o=n?"":"px",i=n?"":"deg";switch(t){case 0:r="";break;case 3:r="translate(".concat((0,l.toDomPrecision)(e.props.w)).concat(o,", 0").concat(o,") rotate(90").concat(i,")");break;case 2:r="translate(".concat((0,l.toDomPrecision)(e.props.w)).concat(o,", ").concat((0,l.toDomPrecision)(e.props.h)).concat(o,") rotate(180").concat(i,")");break;case 1:r="translate(0".concat(o,", ").concat((0,l.toDomPrecision)(e.props.h)).concat(o,") rotate(270").concat(i,")");break;default:throw Error("labelSide out of bounds")}return r}},74296:function(e,t,n){"use strict";var r,o=n(17383).default,i=n(34579).default,a=n(18336).default,u=n(29511).default,s=n(43693).default,c=n(50883).default,l=Object.defineProperty,f=Object.getOwnPropertyDescriptor,d=Object.getOwnPropertyNames,p=Object.prototype.hasOwnProperty,h={};!function(e,t){for(var n in t)l(e,n,{get:t[n],enumerable:!0})}(h,{GeoShapeTool:function(){return m}}),e.exports=(r=h,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,i=c(d(t));try{var a=function(){var i=o.value;p.call(e,i)||i===n||l(e,i,{get:function(){return t[i]},enumerable:!(r=f(t,i))||r.enumerable})};for(i.s();!(o=i.n()).done;)a()}catch(u){i.e(u)}finally{i.f()}}return e}(l({},"__esModule",{value:!0}),r));var v=n(57777),g=n(94829),y=n(501),m=function(e){function t(){var e;o(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return e=a(this,t,[].concat(r)),s(e,"shapeType","geo"),e}return u(t,e),i(t,null,[{key:"children",value:function(){return[g.Idle,y.Pointing]}}])}(v.StateNode);s(m,"id","geo"),s(m,"initial","idle")},35590:function(e,t,n){"use strict";var r,o=n(12897).default,i=n(85715).default,a=n(41132).default,u=n(17383).default,s=n(34579).default,c=n(18336).default,l=n(29511).default,f=n(43693).default,d=n(50883).default,p=Object.defineProperty,h=Object.getOwnPropertyDescriptor,v=Object.getOwnPropertyNames,g=Object.prototype.hasOwnProperty,y={};!function(e,t){for(var n in t)p(e,n,{get:t[n],enumerable:!0})}(y,{GeoShapeUtil:function(){return T}}),e.exports=(r=y,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,i=d(v(t));try{var a=function(){var i=o.value;g.call(e,i)||i===n||p(e,i,{get:function(){return t[i]},enumerable:!(r=h(t,i))||r.enumerable})};for(i.s();!(o=i.n()).done;)a()}catch(u){i.e(u)}finally{i.f()}}return e}(p({},"__esModule",{value:!0}),r));var m=n(44414),b=n(57777),w=n(90770),S=n(23151),x=n(65083),P=n(92965),O=n(57856),k=n(38546),_=n(90325),j=n(18739),I=n(42315),T=function(e){function t(){return u(this,t),c(this,t,arguments)}return l(t,e),s(t,[{key:"canEdit",value:function(){return!0}},{key:"getDefaultProps",value:function(){return{w:100,h:100,geo:"rectangle",color:"black",labelColor:"black",fill:"none",dash:"draw",size:"m",font:"draw",text:"",align:"middle",verticalAlign:"middle",growY:0,url:"",scale:1}}},{key:"getGeometry",value:function(e){var t,n=Math.max(1,e.props.w),r=Math.max(1,e.props.h+e.props.growY),o=n/2,i=r/2,u="none"!==e.props.fill;switch(e.props.geo){case"cloud":t=new b.Polygon2d({points:(0,j.cloudOutline)(n,r,e.id,e.props.size,e.props.scale),isFilled:u});break;case"triangle":t=new b.Polygon2d({points:[new b.Vec(o,0),new b.Vec(n,r),new b.Vec(0,r)],isFilled:u});break;case"diamond":t=new b.Polygon2d({points:[new b.Vec(o,0),new b.Vec(n,i),new b.Vec(o,r),new b.Vec(0,i)],isFilled:u});break;case"pentagon":t=new b.Polygon2d({points:(0,b.getPolygonVertices)(n,r,5),isFilled:u});break;case"hexagon":t=new b.Polygon2d({points:(0,b.getPolygonVertices)(n,r,6),isFilled:u});break;case"octagon":t=new b.Polygon2d({points:(0,b.getPolygonVertices)(n,r,8),isFilled:u});break;case"ellipse":t=new b.Ellipse2d({width:n,height:r,isFilled:u});break;case"oval":t=new b.Stadium2d({width:n,height:r,isFilled:u});break;case"star":var s=b.PI2/5/2,c=2*Math.floor(5/4),l=10-c,f=2*Math.floor(2.5),d=Math.cos(-b.HALF_PI+c*s)*n/2,p=Math.cos(-b.HALF_PI+l*s)*n/2,h=Math.sin(-b.HALF_PI+0*s)*r/2,v=Math.sin(-b.HALF_PI+f*s)*r/2,g=n-Math.abs(d-p),y=r-Math.abs(v-h),m=(n-(n/2+p-(n/2-d)))/2,w=(r-(r/2+h-(r/2-v)))/2,S=(n+g)/2,x=(r+y)/2,O=1*S/2,k=1*x/2;t=new b.Polygon2d({points:Array.from(Array(10)).map((function(e,t){var n=-b.HALF_PI+t*s;return new b.Vec(m+(t%2?O:S)*Math.cos(n),w+(t%2?k:x)*Math.sin(n))})),isFilled:u});break;case"rhombus":var _=Math.min(.38*n,.38*r);t=new b.Polygon2d({points:[new b.Vec(_,0),new b.Vec(n,0),new b.Vec(n-_,r),new b.Vec(0,r)],isFilled:u});break;case"rhombus-2":var T=Math.min(.38*n,.38*r);t=new b.Polygon2d({points:[new b.Vec(0,0),new b.Vec(n-T,0),new b.Vec(n,r),new b.Vec(T,r)],isFilled:u});break;case"trapezoid":var C=Math.min(.38*n,.38*r);t=new b.Polygon2d({points:[new b.Vec(C,0),new b.Vec(n-C,0),new b.Vec(n,r),new b.Vec(0,r)],isFilled:u});break;case"arrow-right":var M=.38*Math.min(n,r),A=.16*r;t=new b.Polygon2d({points:[new b.Vec(0,A),new b.Vec(n-M,A),new b.Vec(n-M,0),new b.Vec(n,r/2),new b.Vec(n-M,r),new b.Vec(n-M,r-A),new b.Vec(0,r-A)],isFilled:u});break;case"arrow-left":var D=.38*Math.min(n,r),R=.16*r;t=new b.Polygon2d({points:[new b.Vec(D,0),new b.Vec(D,R),new b.Vec(n,R),new b.Vec(n,r-R),new b.Vec(D,r-R),new b.Vec(D,r),new b.Vec(0,r/2)],isFilled:u});break;case"arrow-up":var N=.16*n,L=.38*Math.min(n,r);t=new b.Polygon2d({points:[new b.Vec(n/2,0),new b.Vec(n,L),new b.Vec(n-N,L),new b.Vec(n-N,r),new b.Vec(N,r),new b.Vec(N,L),new b.Vec(0,L)],isFilled:u});break;case"arrow-down":var U=.16*n,F=.38*Math.min(n,r);t=new b.Polygon2d({points:[new b.Vec(U,0),new b.Vec(n-U,0),new b.Vec(n-U,r-F),new b.Vec(n,r-F),new b.Vec(n/2,r),new b.Vec(0,r-F),new b.Vec(U,r-F)],isFilled:u});break;case"check-box":case"x-box":case"rectangle":t=new b.Rectangle2d({width:n,height:r,isFilled:u});break;case"heart":var B=(0,j.getHeartParts)(n,r).reduce((function(e,t){return e.push.apply(e,a(t.vertices)),e}),[]);t=new b.Polygon2d({points:B,isFilled:u});break;default:(0,b.exhaustiveSwitchError)(e.props.geo)}var V=E(this.editor,e),z=n/e.props.scale,H=r/e.props.scale,K=Math.min(100,z/2),G=Math.min(P.LABEL_FONT_SIZES[e.props.size]*P.TEXT_PROPS.lineHeight+2*P.LABEL_PADDING,H/2),q=Math.min(z,Math.max(V.w,Math.min(K,Math.max(1,z-8)))),W=Math.min(H,Math.max(V.h,Math.min(G,Math.max(1,H-8)))),Y=(0,I.getLines)(e.props,P.STROKE_SIZES[e.props.size]*e.props.scale),X=Y?Y.map((function(e){return new b.Polyline2d({points:e})})):[];return new b.Group2d({children:[t,new b.Rectangle2d({x:"start"===e.props.align?0:"end"===e.props.align?(z-q)*e.props.scale:(z-q)/2*e.props.scale,y:"start"===e.props.verticalAlign?0:"end"===e.props.verticalAlign?(H-W)*e.props.scale:(H-W)/2*e.props.scale,width:q*e.props.scale,height:W*e.props.scale,isFilled:!0,isLabel:!0})].concat(a(X))})}},{key:"getHandleSnapGeometry",value:function(e){var t=this.getGeometry(e),n=t.children[0];switch(e.props.geo){case"arrow-down":case"arrow-left":case"arrow-right":case"arrow-up":case"check-box":case"diamond":case"hexagon":case"octagon":case"pentagon":case"rectangle":case"rhombus":case"rhombus-2":case"star":case"trapezoid":case"triangle":case"x-box":return{outline:n,points:[].concat(a(n.getVertices()),[t.bounds.center])};case"cloud":case"ellipse":case"heart":case"oval":return{outline:n,points:[t.bounds.center]};default:(0,b.exhaustiveSwitchError)(e.props.geo)}}},{key:"getText",value:function(e){return e.props.text}},{key:"onEditEnd",value:function(e){var t=e.id,n=e.type,r=e.props.text;r.trimEnd()!==e.props.text&&this.editor.updateShapes([{id:t,type:n,props:{text:r.trimEnd()}}])}},{key:"component",value:function(e){var t=e.id,n=e.type,r=e.props,o=r.fill,i=r.font,a=r.align,u=r.verticalAlign,s=r.size,c=r.text,l=(0,k.useDefaultColorTheme)(),f=this.editor,d=(0,b.useValue)("isGeoOnlySelected",(function(){return e.id===f.getOnlySelectedShapeId()}),[]),p=null!==f.getEditingShapeId()||e.props.text,h=(0,b.useValue)("force solid",(function(){return f.getZoomLevel()<.2}),[f]);return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(b.SVGContainer,{children:(0,m.jsx)(_.GeoShapeBody,{shape:e,shouldScale:!0,forceSolid:h})}),p&&(0,m.jsx)(b.HTMLContainer,{style:{overflow:"hidden",width:e.props.w,height:e.props.h+r.growY},children:(0,m.jsx)(x.TextLabel,{shapeId:t,type:n,font:i,fontSize:P.LABEL_FONT_SIZES[s]*e.props.scale,lineHeight:P.TEXT_PROPS.lineHeight,padding:P.LABEL_PADDING*e.props.scale,fill:o,align:a,verticalAlign:u,text:c,isSelected:d,labelColor:l[r.labelColor].solid,wrap:!0})}),e.props.url&&(0,m.jsx)(w.HyperlinkButton,{url:e.props.url})]})}},{key:"indicator",value:function(e){var t=e.id,n=e.props,r=n.w,o=n.size,a=n.h+n.growY,u=P.STROKE_SIZES[o],s=this.editor.getShapeGeometry(e);switch(n.geo){case"ellipse":return"draw"===n.dash?(0,m.jsx)("path",{d:(0,j.getEllipseDrawIndicatorPath)(t,r,a,u)}):(0,m.jsx)("path",{d:s.getSvgPathData(!0)});case"heart":return(0,m.jsx)("path",{d:(0,j.getHeartPath)(r,a)});case"oval":return(0,m.jsx)("path",{d:s.getSvgPathData(!0)});case"cloud":return(0,m.jsx)("path",{d:(0,j.getCloudPath)(r,a,t,o,e.props.scale)});default:var c,l=this.editor.getShapeGeometry(e),f=l instanceof b.Group2d?l.children[0].vertices:l.vertices;if("draw"===n.dash){var p=(0,j.getRoundedPolygonPoints)(t,f,0,2*u*e.props.scale,1);c=(0,j.getRoundedInkyPolygonPath)(p)}else c="M"+f[0]+"L"+f.slice(1)+"Z";var h=(0,I.getLines)(e.props,u);if(h){var v,g=d(h);try{for(g.s();!(v=g.n()).done;){var y=i(v.value,2),w=y[0],S=y[1];c+="M".concat(w.x,",").concat(w.y,"L").concat(S.x,",").concat(S.y)}}catch(x){g.e(x)}finally{g.f()}}return(0,m.jsx)("path",{d:c})}}},{key:"toSvg",value:function(e,t){var n,r=o(o({},e),{},{props:o(o({},e.props),{},{w:e.props.w/e.props.scale,h:e.props.h/e.props.scale})}),i=r.props;if(t.addExportDef((0,O.getFillDefForExport)(i.fill)),i.text){t.addExportDef((0,O.getFontDefForExport)(i.font));var a=(0,b.getDefaultColorTheme)(t),u=new b.Box(0,0,i.w,i.h+i.growY);n=(0,m.jsx)(S.SvgTextLabel,{fontSize:P.LABEL_FONT_SIZES[i.size],font:i.font,align:i.align,verticalAlign:i.verticalAlign,text:i.text,labelColor:a[i.labelColor].solid,bounds:u,padding:16})}return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(_.GeoShapeBody,{shouldScale:!1,shape:r,forceSolid:!1}),n]})}},{key:"getCanvasSvgDefs",value:function(){return[(0,O.getFillDefForCanvas)()]}},{key:"onResize",value:function(e,t){var n=t.handle,r=t.newPoint,i=t.scaleX,a=t.scaleY,u=t.initialShape,s=u.props.w/u.props.scale*i,c=(u.props.h/u.props.scale+u.props.growY/u.props.scale)*a,l=0,f=0,d=51;if(e.props.text.trim()){var p=Math.max(Math.abs(s),d),h=Math.max(Math.abs(c),d);p<d&&h===d&&(p=d),p===d&&h<d&&(h=d);var v=E(this.editor,o(o({},e),{},{props:o(o({},e.props),{},{w:p*e.props.scale,h:h*e.props.scale})})),g=Math.max(Math.abs(s),v.w)*Math.sign(s),y=Math.max(Math.abs(c),v.h)*Math.sign(c);l=Math.abs(g)-Math.abs(s),f=Math.abs(y)-Math.abs(c),s=g,c=y}var m=s*e.props.scale,w=c*e.props.scale,S=new b.Vec(0,0);i<0&&(S.x+=m),"left"!==n&&"top_left"!==n&&"bottom_left"!==n||(S.x+=i<0?l:-l),a<0&&(S.y+=w),"top"!==n&&"top_left"!==n&&"top_right"!==n||(S.y+=a<0?f:-f);var x=S.rot(e.rotation).add(r);return{x:x.x,y:x.y,props:{w:Math.max(Math.abs(m),1),h:Math.max(Math.abs(w),1),growY:0}}}},{key:"onBeforeCreate",value:function(e){if(!e.props.text)return e.props.growY?o(o({},e),{},{props:o(o({},e.props),{},{growY:0})}):void 0;var t=e.props.h/e.props.scale,n=E(this.editor,e).h,r=null;return n>t?r=n-t:e.props.growY&&(r=0),null!==r?o(o({},e),{},{props:o(o({},e.props),{},{growY:r*e.props.scale})}):void 0}},{key:"onBeforeUpdate",value:function(e,t){var n=e.props.text,r=t.props.text;if(n!==r||e.props.font!==t.props.font||e.props.size!==t.props.size){if(n&&!r)return o(o({},t),{},{props:o(o({},t.props),{},{growY:0})});var i=e.props.w/e.props.scale,a=e.props.h/e.props.scale,u=e.props.growY/e.props.scale,s=E(this.editor,t);if(!n&&r&&1===r.length){var c=Math.max(i,s.w),l=Math.max(a,s.h);return i<51&&a<51&&(c=Math.max(c,51),l=Math.max(l,51),c=Math.max(c,l),l=Math.max(c,l)),o(o({},t),{},{props:o(o({},t.props),{},{w:c*t.props.scale,h:l*t.props.scale,growY:0})})}var f=null;if(s.h>a?f=s.h-a:u&&(f=0),null!==f){var d=t.props.w/t.props.scale;return o(o({},t),{},{props:o(o({},t.props),{},{growY:f*t.props.scale,w:Math.max(d,s.w)*t.props.scale})})}return s.w>i?o(o({},t),{},{props:o(o({},t.props),{},{w:s.w*t.props.scale})}):void 0}}},{key:"onDoubleClick",value:function(e){if(this.editor.inputs.altKey)switch(e.props.geo){case"rectangle":return o(o({},e),{},{props:{geo:"check-box"}});case"check-box":return o(o({},e),{},{props:{geo:"rectangle"}})}}},{key:"getInterpolatedProps",value:function(e,t,n){return o(o({},n>.5?t.props:e.props),{},{w:(0,b.lerp)(e.props.w,t.props.w,n),h:(0,b.lerp)(e.props.h,t.props.h,n),scale:(0,b.lerp)(e.props.scale,t.props.scale,n)})}}])}(b.BaseBoxShapeUtil);function E(e,t){var n=t.props,r=n.text,i=n.font,a=n.size,u=n.w;if(!r)return{w:0,h:0};var s=e.textMeasure.measureText("w",o(o({},P.TEXT_PROPS),{},{fontFamily:P.FONT_FAMILIES[i],fontSize:P.LABEL_FONT_SIZES[a],maxWidth:100})),c=e.textMeasure.measureText(r,o(o({},P.TEXT_PROPS),{},{fontFamily:P.FONT_FAMILIES[i],fontSize:P.LABEL_FONT_SIZES[a],minWidth:s.w,maxWidth:Math.max(0,Math.ceil(s.w+{s:2,m:3.5,l:5,xl:10}[a]),Math.ceil(u/t.props.scale-2*P.LABEL_PADDING))}));return{w:c.w+2*P.LABEL_PADDING,h:c.h+2*P.LABEL_PADDING}}f(T,"type","geo"),f(T,"props",b.geoShapeProps),f(T,"migrations",b.geoShapeMigrations)},90325:function(e,t,n){"use strict";var r,o=n(85715).default,i=n(50883).default,a=Object.defineProperty,u=Object.getOwnPropertyDescriptor,s=Object.getOwnPropertyNames,c=Object.prototype.hasOwnProperty,l={};!function(e,t){for(var n in t)a(e,n,{get:t[n],enumerable:!0})}(l,{GeoShapeBody:function(){return m}}),e.exports=(r=l,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,l=i(s(t));try{var f=function(){var i=o.value;c.call(e,i)||i===n||a(e,i,{get:function(){return t[i]},enumerable:!(r=u(t,i))||r.enumerable})};for(l.s();!(o=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(a({},"__esModule",{value:!0}),r));var f=n(44414),d=n(57777),p=n(14080),h=n(92965),v=n(38546),g=n(18739),y=n(42315);function m(e){var t=e.shape,n=e.shouldScale,r=e.forceSolid,a=n?t.props.scale:1,u=(0,d.useEditor)(),s=(0,v.useDefaultColorTheme)(),c=t.id,l=t.props,m=l.w,b=l.color,w=l.fill,S=l.dash,x=l.growY,P=l.size,O=l.scale,k=h.STROKE_SIZES[P]*a,_=l.h+x;switch(l.geo){case"cloud":if("solid"===S){var j=(0,g.getCloudPath)(m,_,c,P,O);return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(p.ShapeFill,{theme:s,d:j,color:b,fill:w,scale:a}),(0,f.jsx)("path",{d:j,stroke:s[b].solid,strokeWidth:k,fill:"none"})]})}if("draw"===S){var I=(0,g.inkyCloudSvgPath)(m,_,c,P,O);return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(p.ShapeFill,{theme:s,d:I,color:b,fill:w,scale:a}),(0,f.jsx)("path",{d:I,stroke:s[b].solid,strokeWidth:k,fill:"none"})]})}var T=(0,g.getCloudPath)(m,_,c,P,O),E=(0,g.getCloudArcs)(m,_,c,P,O);return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(p.ShapeFill,{theme:s,d:T,color:b,fill:w,scale:a}),(0,f.jsx)("g",{strokeWidth:k,stroke:s[b].solid,fill:"none",pointerEvents:"all",children:E.map((function(e,t){var n=e.leftPoint,o=e.rightPoint,i=e.center,a=e.radius,u=i?a*(0,d.canonicalizeRotation)((0,d.canonicalizeRotation)(d.Vec.Angle(i,o))-(0,d.canonicalizeRotation)(d.Vec.Angle(i,n))):d.Vec.Dist(n,o),s=(0,d.getPerfectDashProps)(u,k,{style:S,start:"outset",end:"outset",forceSolid:r}),c=s.strokeDasharray,l=s.strokeDashoffset;return(0,f.jsx)("path",{d:i?"M".concat(n.x,",").concat(n.y,"A").concat(a,",").concat(a,",0,0,1,").concat(o.x,",").concat(o.y):"M".concat(n.x,",").concat(n.y,"L").concat(o.x,",").concat(o.y),strokeDasharray:c,strokeDashoffset:l},t)}))})]});case"ellipse":var C=n?u.getShapeGeometry(t):u.getShapeUtil(t).getGeometry(t),M=C.getSvgPathData(!0);if("dashed"===S||"dotted"===S){var A=C.length,D=(0,d.getPerfectDashProps)(A<64?2*A:A,k,{style:S,snap:4,closed:!0,forceSolid:r}),R=D.strokeDasharray,N=D.strokeDashoffset;return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(p.ShapeFill,{theme:s,d:M,color:b,fill:w,scale:a}),(0,f.jsx)("path",{d:M,strokeWidth:k,fill:"none",stroke:s[b].solid,strokeDasharray:R,strokeDashoffset:N})]})}var L=(n?u.getShapeGeometry(t):u.getShapeUtil(t).getGeometry(t)).getSvgPathData(!0);return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(p.ShapeFill,{theme:s,d:L,color:b,fill:w,scale:a}),(0,f.jsx)("path",{d:L,stroke:s[b].solid,strokeWidth:k,fill:"none"})]});case"oval":var U=n?u.getShapeGeometry(t):u.getShapeUtil(t).getGeometry(t),F=U.getSvgPathData(!0);if("dashed"===S||"dotted"===S){var B=U.getLength(),V=(0,d.getPerfectDashProps)(B<64?2*B:B,k,{style:S,snap:4,start:"outset",end:"outset",closed:!0,forceSolid:r}),z=V.strokeDasharray,H=V.strokeDashoffset;return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(p.ShapeFill,{theme:s,d:F,color:b,fill:w,scale:a}),(0,f.jsx)("path",{d:F,strokeWidth:k,fill:"none",stroke:s[b].solid,strokeDasharray:z,strokeDashoffset:H})]})}return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(p.ShapeFill,{theme:s,d:F,color:b,fill:w,scale:a}),(0,f.jsx)("path",{d:F,stroke:s[b].solid,strokeWidth:k,fill:"none"})]});case"heart":if("dashed"===S||"dotted"===S||"solid"===S){var K=(0,g.getHeartPath)(m,_),G=(0,g.getHeartParts)(m,_);return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(p.ShapeFill,{theme:s,d:K,color:b,fill:w,scale:a}),G.map((function(e,t){var n=(0,d.getPerfectDashProps)(e.length,k,{style:S,snap:1,start:"outset",end:"outset",closed:!0,forceSolid:r}),o=n.strokeDasharray,i=n.strokeDashoffset;return(0,f.jsx)("path",{d:e.getSvgPathData(),strokeWidth:k,fill:"none",stroke:s[b].solid,strokeDasharray:o,strokeDashoffset:i,pointerEvents:"all"},"curve_".concat(t))}))]})}var q=(0,g.getDrawHeartPath)(m,_,k,t.id);return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(p.ShapeFill,{theme:s,d:q,color:b,fill:w,scale:a}),(0,f.jsx)("path",{d:q,stroke:s[b].solid,strokeWidth:k,fill:"none"})]});default:var W=n?u.getShapeGeometry(t):u.getShapeUtil(t).getGeometry(t),Y=W instanceof d.Group2d?W.children[0].vertices:W.vertices,X=(0,y.getLines)(t.props,k);if("solid"===S){var Z="M"+Y[0]+"L"+Y.slice(1)+"Z";if(X){var $,Q=i(X);try{for(Q.s();!($=Q.n()).done;){var J=o($.value,2),ee=J[0],te=J[1];Z+="M".concat(ee.x,",").concat(ee.y,"L").concat(te.x,",").concat(te.y)}}catch(le){Q.e(le)}finally{Q.f()}}return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(p.ShapeFill,{theme:s,d:Z,color:b,fill:w,scale:a}),(0,f.jsx)("path",{d:Z,stroke:s[b].solid,strokeWidth:k,fill:"none"})]})}if("dashed"===S||"dotted"===S){var ne="M"+Y[0]+"L"+Y.slice(1)+"Z";return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(p.ShapeFill,{theme:s,d:ne,color:b,fill:w,scale:a}),(0,f.jsxs)("g",{strokeWidth:k,stroke:s[b].solid,fill:"none",pointerEvents:"all",children:[Array.from(Array(Y.length)).map((function(e,t){var n=d.Vec.ToFixed(Y[t]),o=d.Vec.ToFixed(Y[(t+1)%Y.length]),i=d.Vec.Dist(n,o),a=(0,d.getPerfectDashProps)(i,k,{style:S,start:"outset",end:"outset",forceSolid:r}),u=a.strokeDasharray,s=a.strokeDashoffset;return(0,f.jsx)("line",{x1:n.x,y1:n.y,x2:o.x,y2:o.y,strokeDasharray:u,strokeDashoffset:s},t)})),X&&X.map((function(e,t){var n=o(e,2),i=n[0],a=n[1],u=d.Vec.Dist(i,a),c=(0,d.getPerfectDashProps)(u,k,{style:S,start:"skip",end:"skip",snap:"dotted"===S?4:void 0,forceSolid:r}),l=c.strokeDasharray,p=c.strokeDashoffset;return(0,f.jsx)("path",{d:"M".concat(i.x,",").concat(i.y,"L").concat(a.x,",").concat(a.y),stroke:s[b].solid,strokeWidth:k,fill:"none",strokeDasharray:l,strokeDashoffset:p},"line_fg_".concat(t))}))]})]})}if("draw"===S){var re=(0,g.getRoundedInkyPolygonPath)((0,g.getRoundedPolygonPoints)(c,Y,k/3,2*k,2));if(X){var oe,ie=i(X);try{for(ie.s();!(oe=ie.n()).done;){var ae=o(oe.value,2),ue=ae[0],se=ae[1];re+="M".concat(ue.toFixed(),"L").concat(se.toFixed())}}catch(le){ie.e(le)}finally{ie.f()}}var ce=(0,g.getRoundedInkyPolygonPath)((0,g.getRoundedPolygonPoints)(c,Y,0,2*k,1));return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(p.ShapeFill,{theme:s,d:ce,color:b,fill:w,scale:a}),(0,f.jsx)("path",{d:re,stroke:s[b].solid,strokeWidth:k,fill:"none"})]})}}}},18739:function(e,t,n){"use strict";var r,o=n(41132).default,i=n(50883).default,a=Object.defineProperty,u=Object.getOwnPropertyDescriptor,s=Object.getOwnPropertyNames,c=Object.prototype.hasOwnProperty,l={};!function(e,t){for(var n in t)a(e,n,{get:t[n],enumerable:!0})}(l,{cloudOutline:function(){return j},getCloudArcs:function(){return _},getCloudPath:function(){return I},getDrawHeartPath:function(){return y},getEllipseDrawIndicatorPath:function(){return w},getEllipsePath:function(){return S},getHeartParts:function(){return b},getHeartPath:function(){return g},getHeartPoints:function(){return m},getOvalPerimeter:function(){return v},getRoundedInkyPolygonPath:function(){return x},getRoundedPolygonPoints:function(){return P},inkyCloudSvgPath:function(){return E}}),e.exports=(r=l,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,l=i(s(t));try{var f=function(){var i=o.value;c.call(e,i)||i===n||a(e,i,{get:function(){return t[i]},enumerable:!(r=u(t,i))||r.enumerable})};for(l.s();!(o=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(a({},"__esModule",{value:!0}),r));var f=n(57777),d=n(83237),p=n(17048),h=n(57777);function v(e,t){return e>t?2*(f.PI*(t/2)+(e-t)):2*(f.PI*(e/2)+(t-e))}function g(e,t){return b(e,t).map((function(e,t){return e.getSvgPathData(0===t)})).join(" ")+" Z"}function y(e,t,n,r){var o=e/4,i=t/4,a=(0,f.rng)(r),u=.75*n,s=function(e){return e.addXY(a()*u,a()*u)},c=new f.Vec(e/2,t),l=new f.Vec(0,1.2*i),d=new f.Vec(e/2,.9*i),p=new f.Vec(e,1.2*i),h=s(new f.Vec(e/2,t)),v=s(new f.Vec(0,1.2*i)),g=s(new f.Vec(e/2,.9*i)),y=s(new f.Vec(e,1.2*i));return[new f.CubicBezier2d({start:c,cp1:new f.Vec(1.5*o,3*i),cp2:new f.Vec(0,2.5*i),end:l}),new f.CubicBezier2d({start:l,cp1:new f.Vec(0,.32*-i),cp2:new f.Vec(1.85*o,.32*-i),end:d}),new f.CubicBezier2d({start:d,cp1:new f.Vec(2.15*o,.32*-i),cp2:new f.Vec(e,.32*-i),end:p}),new f.CubicBezier2d({start:p,cp1:new f.Vec(e,2.5*i),cp2:new f.Vec(2.5*o,3*i),end:h}),new f.CubicBezier2d({start:h,cp1:new f.Vec(1.5*o,3*i),cp2:new f.Vec(0,2.5*i),end:v}),new f.CubicBezier2d({start:v,cp1:new f.Vec(0,.32*-i),cp2:new f.Vec(1.85*o,.32*-i),end:g}),new f.CubicBezier2d({start:g,cp1:new f.Vec(2.15*o,.32*-i),cp2:new f.Vec(e,.32*-i),end:y}),new f.CubicBezier2d({start:y,cp1:new f.Vec(e,2.5*i),cp2:new f.Vec(2.5*o,3*i),end:c})].map((function(e,t){return e.getSvgPathData(0===t)})).join(" ")+" Z"}function m(e,t){for(var n=[],r=b(e,t),o=0;o<r.length;o++){for(var i=0;i<20;i++)n.push(f.CubicBezier2d.GetAtT(r[o],i/20));o===r.length-1&&n.push(f.CubicBezier2d.GetAtT(r[o],1))}}function b(e,t){var n=e/4,r=t/4;return[new f.CubicBezier2d({start:new f.Vec(e/2,t),cp1:new f.Vec(1.5*n,3*r),cp2:new f.Vec(0,2.5*r),end:new f.Vec(0,1.2*r)}),new f.CubicBezier2d({start:new f.Vec(0,1.2*r),cp1:new f.Vec(0,.32*-r),cp2:new f.Vec(1.85*n,.32*-r),end:new f.Vec(e/2,.9*r)}),new f.CubicBezier2d({start:new f.Vec(e/2,.9*r),cp1:new f.Vec(2.15*n,.32*-r),cp2:new f.Vec(e,.32*-r),end:new f.Vec(e,1.2*r)}),new f.CubicBezier2d({start:new f.Vec(e,1.2*r),cp1:new f.Vec(e,2.5*r),cp2:new f.Vec(2.5*n,3*r),end:new f.Vec(e/2,t)})]}function w(e,t,n,r){return(0,p.getSvgPathFromStrokePoints)(function(e,t,n,r){for(var o=(0,f.rng)(e),i=t/2,a=n/2,u=(0,f.perimeterOfEllipse)(i,a),s=[],c=f.PI2*o(),l=f.PI2+f.HALF_PI/2+Math.abs(o())*f.HALF_PI,p=Math.max(16,u/10),h=0;h<p;h++){var v=h/(p-1),g=c+v*l,y=Math.cos(g),m=Math.sin(g);s.push(new f.Vec(i*y+.5*t+.05*o(),a*m+n/2+.05*o(),Math.min(1,.5+Math.abs(.5-(o()>0?f.EASINGS.easeInOutSine(v):f.EASINGS.easeInExpo(v)))/2)))}return(0,d.getStrokePoints)(s,function(e){return{size:1+e,thinning:.25,end:{taper:e},start:{taper:e},streamline:0,smoothing:1,simulatePressure:!1}}(r))}(e,t,n,r))}function S(e,t){var n=e/2,r=t/2,o=Math.max(0,n),i=Math.max(0,r);return"M".concat(n-o,",").concat(r,"a").concat(o,",").concat(i,",0,1,1,").concat(2*o,",0a").concat(o,",").concat(i,",0,1,1,-").concat(2*o,",0")}function x(e){for(var t,n,r,o="M",i=0,a=e.length;i<a;i+=3)t=e[i],n=e[i+1],r=e[i+2],o+="".concat((0,h.precise)(t),"L").concat((0,h.precise)(n),"Q").concat((0,h.precise)(r));return o+="".concat((0,h.precise)(e[0]))}function P(e,t,n,r,o){for(var i,a=[],u=(0,f.rng)(e),s=t[0],c=t.length,l=0,d=c*o;l<d;l++){i=f.Vec.AddXY(t[(l+1)%c],u()*n,u()*n);var p=f.Vec.Sub(i,s),h=f.Vec.Len(p),v=f.Vec.Div(p,h).mul(Math.min(h/4,r));a.push(f.Vec.Add(s,v),f.Vec.Add(i,v.neg()),i),s=i}return a}var O={s:50,m:70,l:100,xl:130},k=.2;function _(e,t,n,r,o){for(var i=(0,f.rng)(n),a=v(e,t),u=Math.max(Math.ceil(a/O[r]),6,Math.ceil(a/Math.min(e,t))),s=a/u*k,c=Math.max(e-2*s,1),l=Math.max(t-2*s,1),d=v(c,l)/u,p=(e-c)/2,h=(t-l)/2,g=function(e,t,n){for(var r=Math.min(e,t)/2,o=Math.max(e,t)-2*r,i=(Math.PI*(2*r)+2*o)/n,a=e>t?[{type:"straight",start:new f.Vec(r,0),delta:new f.Vec(1,0)},{type:"arc",center:new f.Vec(e-r,r),startAngle:-f.PI/2},{type:"straight",start:new f.Vec(e-r,t),delta:new f.Vec(-1,0)},{type:"arc",center:new f.Vec(r,r),startAngle:f.PI/2}]:[{type:"straight",start:new f.Vec(e,r),delta:new f.Vec(0,1)},{type:"arc",center:new f.Vec(r,t-r),startAngle:0},{type:"straight",start:new f.Vec(0,t-r),delta:new f.Vec(0,-1)},{type:"arc",center:new f.Vec(r,r),startAngle:f.PI}],u=0,s=[],c=0;c<n;c++){var l=a[0];"straight"===l.type?s.push(f.Vec.Add(l.start,f.Vec.Mul(l.delta,u))):s.push((0,f.getPointOnCircle)(l.center,r,l.startAngle+u/r)),u+=i;for(var d="straight"===l.type?o:f.PI*r;u>d;)u-=d,a.push(a.shift()),d="straight"===a[0].type?o:f.PI*r}return s}(c,l,u).map((function(e){return e.addXY(p,h)})),y=e<20?0:.3*s,m=t<20?0:.3*s,b=g.slice(0),w=0;w<Math.floor(u/2);w++)b[w]=f.Vec.AddXY(b[w],i()*y*o,i()*m*o),b[u-w-1]=f.Vec.AddXY(b[u-w-1],i()*y*o,i()*m*o);for(var S=[],x=0;x<b.length;x++){var P=x===b.length-1?0:x+1,_=b[x],j=b[P],I=g[x],T=g[P],E=f.Vec.Dist(I,T),C=d-E,M=f.Vec.Dist(_,j)/E,A=(Math.max(p,h)+C)*M,D=f.Vec.Lrp(I,T,.5).add(f.Vec.Sub(T,I).uni().per().mul(A));D.x<0?D.x=0:D.x>e&&(D.x=e),D.y<0?D.y=0:D.y>t&&(D.y=t);var R=(0,f.centerOfCircleFromThreePoints)(_,j,D),N=f.Vec.Dist(R||f.Vec.Average([_,j]),_);S.push({leftPoint:_,rightPoint:j,arcPoint:D,center:R,radius:N})}return S}function j(e,t,n,r,a){var u,s=[],c=_(e,t,n,r,a),l=i(c);try{for(l.s();!(u=l.n()).done;){var d=u.value,p=d.center,h=d.radius,v=d.leftPoint,g=d.rightPoint;s.push.apply(s,o((0,f.getPointsOnArc)(v,g,p,h,10)))}}catch(y){l.e(y)}finally{l.f()}return s}function I(e,t,n,r,o){var a,u=_(e,t,n,r,o),s="M".concat(u[0].leftPoint.toFixed()),c=i(u);try{for(c.s();!(a=c.n()).done;){var l=a.value,d=l.leftPoint,p=l.rightPoint,h=l.radius,v=l.center;if(null!==v){var g=f.Vec.Clockwise(d,p,v)?"0":"1";s+=" A".concat((0,f.toDomPrecision)(h),",").concat((0,f.toDomPrecision)(h)," 0 ").concat(g,",1 ").concat(p.toFixed())}else s+=" L".concat(p.toFixed())}}catch(y){c.e(y)}finally{c.f()}return s+=" Z"}var T={s:.5,m:.7,l:.9,xl:1.6};function E(e,t,n,r,o){var a,u=(0,f.rng)(n),s=T[r]*o,c=_(e,t,n,r,o),l=c.reduce((function(e,t){return e+f.Vec.Dist2(t.leftPoint,t.rightPoint)}),0)/c.length,d=l>Math.pow(15*s,2)?function(e){return f.Vec.AddXY(e,u()*s*2,u()*s*2)}:function(e){return e},p="M".concat(c[0].leftPoint.toFixed()),h=d(c[0].leftPoint),v="M".concat(h.toFixed()),g=i(c);try{for(g.s();!(a=g.n()).done;){var y=a.value,m=y.leftPoint,b=y.center,w=y.rightPoint,S=y.radius,x=y.arcPoint;if(null!==b){var P=f.Vec.Clockwise(m,w,b)?"0":"1";p+=" A".concat((0,f.toDomPrecision)(S),",").concat((0,f.toDomPrecision)(S)," 0 ").concat(P,",1 ").concat(w.toFixed());var O=d(w),k=d(x),j=(0,f.centerOfCircleFromThreePoints)(h,O,k);if(j){var I=Math.abs(f.Vec.Dist(j,h));v+=" A".concat((0,f.toDomPrecision)(I),",").concat((0,f.toDomPrecision)(I)," 0 ").concat(P,",1 ").concat(O.toFixed()),h=O}else v+=" L".concat(O.toFixed()),h=O}else{p+=" L".concat(w.toFixed());var E=d(w);v+=" L".concat(E.toFixed()),h=E}}}catch(C){g.e(C)}finally{g.f()}return p+v+" Z"}},42315:function(e,t,n){"use strict";var r,o=n(50883).default,i=Object.defineProperty,a=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,c={};!function(e,t){for(var n in t)i(e,n,{get:t[n],enumerable:!0})}(c,{getLines:function(){return f}}),e.exports=(r=c,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var c,l=o(u(t));try{var f=function(){var o=c.value;s.call(e,o)||o===n||i(e,o,{get:function(){return t[o]},enumerable:!(r=a(t,o))||r.enumerable})};for(l.s();!(c=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(i({},"__esModule",{value:!0}),r));var l=n(57777);function f(e,t){switch(e.geo){case"x-box":return function(e,t,n,r){var o="draw"===r?.62:0;if("dashed"===r)return[[new l.Vec(0,0),new l.Vec(e/2,t/2)],[new l.Vec(e,t),new l.Vec(e/2,t/2)],[new l.Vec(0,t),new l.Vec(e/2,t/2)],[new l.Vec(e,0),new l.Vec(e/2,t/2)]];var i=function(t){return Math.max(0,Math.min(e,t))},a=function(e){return Math.max(0,Math.min(t,e))};return[[new l.Vec(i(n*o),a(n*o)),new l.Vec(i(e-n*o),a(t-n*o))],[new l.Vec(i(n*o),a(t-n*o)),new l.Vec(i(e-n*o),a(n*o))]]}(e.w,e.h,t,e.dash);case"check-box":return function(e,t){var n=.82*Math.min(e,t),r=(e-n)/2,o=(t-n)/2,i=function(t){return Math.max(0,Math.min(e,t))},a=function(e){return Math.max(0,Math.min(t,e))};return[[new l.Vec(i(r+.25*n),a(o+.52*n)),new l.Vec(i(r+.45*n),a(o+.82*n))],[new l.Vec(i(r+.45*n),a(o+.82*n)),new l.Vec(i(r+.82*n),a(o+.22*n))]]}(e.w,e.h);default:return}}},94829:function(e,t,n){"use strict";var r,o=n(12897).default,i=n(17383).default,a=n(34579).default,u=n(18336).default,s=n(29511).default,c=n(43693).default,l=n(50883).default,f=Object.defineProperty,d=Object.getOwnPropertyDescriptor,p=Object.getOwnPropertyNames,h=Object.prototype.hasOwnProperty,v={};!function(e,t){for(var n in t)f(e,n,{get:t[n],enumerable:!0})}(v,{Idle:function(){return g}}),e.exports=(r=v,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,i=l(p(t));try{var a=function(){var i=o.value;h.call(e,i)||i===n||f(e,i,{get:function(){return t[i]},enumerable:!(r=d(t,i))||r.enumerable})};for(i.s();!(o=i.n()).done;)a()}catch(u){i.e(u)}finally{i.f()}}return e}(f({},"__esModule",{value:!0}),r));var g=function(e){function t(){return i(this,t),u(this,t,arguments)}return s(t,e),a(t,[{key:"onPointerDown",value:function(e){this.parent.transition("pointing",e)}},{key:"onEnter",value:function(){this.editor.setCursor({type:"cross",rotation:0})}},{key:"onKeyUp",value:function(e){if("Enter"===e.key){if(this.editor.getIsReadonly())return null;var t,n=this.editor.getOnlySelectedShape();if(n&&this.editor.getShapeUtil(n).canEdit(n))this.editor.setCurrentTool("select"),this.editor.setEditingShape(n.id),null===(t=this.editor.root.getCurrent())||void 0===t||t.transition("editing_shape",o(o({},e),{},{target:"shape",shape:n}))}}},{key:"onCancel",value:function(){this.editor.setCurrentTool("select")}}])}(n(57777).StateNode);c(g,"id","idle")},501:function(e,t,n){"use strict";var r,o=n(12897).default,i=n(17383).default,a=n(34579).default,u=n(18336).default,s=n(29511).default,c=n(43693).default,l=n(50883).default,f=Object.defineProperty,d=Object.getOwnPropertyDescriptor,p=Object.getOwnPropertyNames,h=Object.prototype.hasOwnProperty,v={};!function(e,t){for(var n in t)f(e,n,{get:t[n],enumerable:!0})}(v,{Pointing:function(){return y}}),e.exports=(r=v,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,i=l(p(t));try{var a=function(){var i=o.value;h.call(e,i)||i===n||f(e,i,{get:function(){return t[i]},enumerable:!(r=d(t,i))||r.enumerable})};for(i.s();!(o=i.n()).done;)a()}catch(u){i.e(u)}finally{i.f()}}return e}(f({},"__esModule",{value:!0}),r));var g=n(57777),y=function(e){function t(){return i(this,t),u(this,t,arguments)}return s(t,e),a(t,[{key:"onPointerUp",value:function(){this.complete()}},{key:"onPointerMove",value:function(e){if(this.editor.inputs.isDragging){var t=this.editor.inputs.originPagePoint,n=(0,g.createShapeId)(),r=this.editor.markHistoryStoppingPoint("creating_geo:".concat(n)),i=(0,g.maybeSnapToGrid)(t,this.editor);this.editor.createShapes([{id:n,type:"geo",x:i.x,y:i.y,props:{w:1,h:1,geo:this.editor.getStyleForNextShape(g.GeoShapeGeoStyle),scale:this.editor.user.getIsDynamicResizeMode()?1/this.editor.getZoomLevel():1}}]).select(n).setCurrentTool("select.resizing",o(o({},e),{},{target:"selection",handle:"bottom_right",isCreating:!0,creatingMarkId:r,creationCursorOffset:{x:1,y:1},onInteractionEnd:"geo"}))}}},{key:"onCancel",value:function(){this.cancel()}},{key:"onComplete",value:function(){this.complete()}},{key:"onInterrupt",value:function(){this.cancel()}},{key:"complete",value:function(){var e=this.editor.inputs.originPagePoint,t=(0,g.createShapeId)();this.editor.markHistoryStoppingPoint("creating_geo:".concat(t));var n=this.editor.user.getIsDynamicResizeMode()?1/this.editor.getZoomLevel():1,r=this.editor.getStyleForNextShape(g.GeoShapeGeoStyle),i="star"===r?{w:200,h:190}:"cloud"===r?{w:300,h:180}:{w:200,h:200};this.editor.createShapes([{id:t,type:"geo",x:e.x,y:e.y,props:o({geo:this.editor.getStyleForNextShape(g.GeoShapeGeoStyle),scale:n},i)}]);var a=this.editor.getShape(t);if(a){var u=a.props,s=u.w,c=u.h,l=new g.Vec(s/2,c/2).mul(n),f=this.editor.getShapeParentTransform(a);f&&l.rot(-f.rotation());var d=(0,g.maybeSnapToGrid)(new g.Vec(a.x-l.x,a.y-l.y),this.editor);this.editor.select(t),this.editor.updateShape({id:a.id,type:"geo",x:d.x,y:d.y,props:{geo:this.editor.getStyleForNextShape(g.GeoShapeGeoStyle),w:s*n,h:c*n}}),this.editor.getInstanceState().isToolLocked?this.parent.transition("idle"):this.editor.setCurrentTool("select",{})}}},{key:"cancel",value:function(){this.parent.transition("idle")}}])}(g.StateNode);c(y,"id","pointing")},91808:function(e,t,n){"use strict";var r,o=n(17383).default,i=n(34579).default,a=n(18336).default,u=n(29511).default,s=n(43693).default,c=n(50883).default,l=Object.defineProperty,f=Object.getOwnPropertyDescriptor,d=Object.getOwnPropertyNames,p=Object.prototype.hasOwnProperty,h={};!function(e,t){for(var n in t)l(e,n,{get:t[n],enumerable:!0})}(h,{HighlightShapeTool:function(){return m}}),e.exports=(r=h,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,i=c(d(t));try{var a=function(){var i=o.value;p.call(e,i)||i===n||l(e,i,{get:function(){return t[i]},enumerable:!(r=f(t,i))||r.enumerable})};for(i.s();!(o=i.n()).done;)a()}catch(u){i.e(u)}finally{i.f()}}return e}(l({},"__esModule",{value:!0}),r));var v=n(57777),g=n(95714),y=n(32324),m=function(e){function t(){var e;o(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return e=a(this,t,[].concat(r)),s(e,"shapeType","highlight"),e}return u(t,e),i(t,[{key:"onExit",value:function(){this.children.drawing.initialShape=void 0}}],[{key:"children",value:function(){return[y.Idle,g.Drawing]}}])}(v.StateNode);s(m,"id","highlight"),s(m,"initial","idle"),s(m,"isLockable",!1)},15166:function(e,t,n){"use strict";var r,o=n(12897).default,i=n(17383).default,a=n(34579).default,u=n(18336).default,s=n(29511).default,c=n(43693).default,l=n(50883).default,f=Object.defineProperty,d=Object.getOwnPropertyDescriptor,p=Object.getOwnPropertyNames,h=Object.prototype.hasOwnProperty,v={};!function(e,t){for(var n in t)f(e,n,{get:t[n],enumerable:!0})}(v,{HighlightShapeUtil:function(){return j}}),e.exports=(r=v,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,i=l(p(t));try{var a=function(){var i=o.value;h.call(e,i)||i===n||f(e,i,{get:function(){return t[i]},enumerable:!(r=d(t,i))||r.enumerable})};for(i.s();!(o=i.n()).done;)a()}catch(u){i.e(u)}finally{i.f()}}return e}(f({},"__esModule",{value:!0}),r));var g=n(44414),y=n(57777),m=n(4648),b=n(92965),w=n(59645),S=n(83237),x=n(91221),P=n(17048),O=n(28040),k=n(88100),_=n(38546),j=function(e){function t(){return i(this,t),u(this,t,arguments)}return s(t,e),a(t,[{key:"hideResizeHandles",value:function(e){return E(e)}},{key:"hideRotateHandle",value:function(e){return E(e)}},{key:"hideSelectionBoundsFg",value:function(e){return E(e)}},{key:"getDefaultProps",value:function(){return{segments:[],color:"black",size:"m",isComplete:!1,isPen:!1,scale:1}}},{key:"getGeometry",value:function(e){var t=T(e);if(E(e))return new y.Circle2d({x:-t/2,y:-t/2,radius:t/2,isFilled:!0});var n=I(e,t,!0),r=n.strokePoints,o=n.sw,i=(0,m.getHighlightFreehandSettings)({strokeWidth:o,showAsComplete:!0});return(0,x.setStrokePointRadii)(r,i),new y.Polygon2d({points:(0,w.getStrokeOutlinePoints)(r,i),isFilled:!0})}},{key:"component",value:function(e){var t=M(this.editor,e),n=T(e);return(0,g.jsx)(y.SVGContainer,{children:(0,g.jsx)(C,{shape:e,forceSolid:t,strokeWidth:n,opacity:.35})})}},{key:"backgroundComponent",value:function(e){var t=M(this.editor,e),n=T(e);return(0,g.jsx)(y.SVGContainer,{children:(0,g.jsx)(C,{shape:e,forceSolid:t,strokeWidth:n,opacity:.82})})}},{key:"indicator",value:function(e){var t,n=M(this.editor,e),r=I(e,T(e),n),o=r.strokePoints,i=r.sw,a=(0,m.getPointsFromSegments)(e.props.segments);return t=o.length<2?function(e,t){var n=t/2;return"M ".concat(e.x," ").concat(e.y," m -").concat(n,", 0 a ").concat(n,",").concat(n," 0 1,0 ").concat(2*n,",0 a ").concat(n,",").concat(n," 0 1,0 -").concat(2*n,",0")}(a[0],i):(0,P.getSvgPathFromStrokePoints)(o,!1),(0,g.jsx)("path",{d:t})}},{key:"toSvg",value:function(e){var t=T(e),n=t<1.5,r=1/e.props.scale;return(0,g.jsx)("g",{transform:"scale(".concat(r,")"),children:(0,g.jsx)(C,{forceSolid:n,strokeWidth:t,shape:e,opacity:.35})})}},{key:"toBackgroundSvg",value:function(e){var t=T(e),n=t<1.5,r=1/e.props.scale;return(0,g.jsx)("g",{transform:"scale(".concat(r,")"),children:(0,g.jsx)(C,{forceSolid:n,strokeWidth:t,shape:e,opacity:.82})})}},{key:"onResize",value:function(e,t){var n,r=t.scaleX,i=t.scaleY,a=[],u=l(e.props.segments);try{for(u.s();!(n=u.n()).done;){var s=n.value;a.push(o(o({},s),{},{points:s.points.map((function(e){var t=e.x,n=e.y,o=e.z;return{x:r*t,y:i*n,z:o}}))}))}}catch(c){u.e(c)}finally{u.f()}return{props:{segments:a}}}},{key:"getInterpolatedProps",value:function(e,t,n){return o(o(o({},n>.5?t.props:e.props),t.props),{},{segments:(0,O.interpolateSegments)(e.props.segments,t.props.segments,n),scale:(0,y.lerp)(e.props.scale,t.props.scale,n)})}}])}(y.ShapeUtil);function I(e,t,n){var r,o=(0,m.getPointsFromSegments)(e.props.segments),i=e.props.isComplete||"straight"===(null===(r=(0,y.last)(e.props.segments))||void 0===r?void 0:r.type),a=t;n||e.props.isPen||1!==o.length||(a+=(0,y.rng)(e.id)()*(t/6));var u=(0,m.getHighlightFreehandSettings)({strokeWidth:a,showAsComplete:i});return{strokePoints:(0,S.getStrokePoints)(o,u),sw:a}}function T(e){return 1.12*b.FONT_SIZES[e.props.size]*e.props.scale}function E(e){return 1===e.props.segments.length&&e.props.segments[0].points.length<2}function C(e){var t,n=e.strokeWidth,r=e.forceSolid,o=e.shape,i=e.opacity,a=(0,_.useDefaultColorTheme)(),u=(0,m.getPointsFromSegments)(o.props.segments),s=n;r||o.props.isPen||1!==u.length||(s+=(0,y.rng)(o.id)()*(s/6));var c=(0,m.getHighlightFreehandSettings)({strokeWidth:s,showAsComplete:o.props.isComplete||"straight"===(null===(t=(0,y.last)(o.props.segments))||void 0===t?void 0:t.type)}),l=(0,S.getStrokePoints)(u,c),f=l.length>1?(0,P.getSvgPathFromStrokePoints)(l,!1):function(e){var t=.1;return"M ".concat(e.x," ").concat(e.y," m -").concat(t,", 0 a ").concat(t,",").concat(t," 0 1,0 ").concat(.2,",0 a ").concat(t,",").concat(t," 0 1,0 -").concat(.2,",0")}(o.props.segments[0].points[0]),d=(0,k.useColorSpace)(),p=a[o.props.color].highlight[d];return(0,g.jsx)("path",{d:f,strokeLinecap:"round",fill:"none",pointerEvents:"all",stroke:p,strokeWidth:s,opacity:i})}function M(e,t){return(0,y.useValue)("forceSolid",(function(){return T(t)/e.getZoomLevel()<1.5}),[e])}c(j,"type","highlight"),c(j,"props",y.highlightShapeProps),c(j,"migrations",y.highlightShapeMigrations)},86746:function(e,t,n){"use strict";var r,o=n(85715).default,i=n(4633).default,a=n(12897).default,u=n(17383).default,s=n(34579).default,c=n(18336).default,l=n(29511).default,f=n(43693).default,d=n(29293).default,p=n(50883).default,h=Object.create,v=Object.defineProperty,g=Object.getOwnPropertyDescriptor,y=Object.getOwnPropertyNames,m=Object.getPrototypeOf,b=Object.prototype.hasOwnProperty,w=function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,i=p(y(t));try{var a=function(){var i=o.value;b.call(e,i)||i===n||v(e,i,{get:function(){return t[i]},enumerable:!(r=g(t,i))||r.enumerable})};for(i.s();!(o=i.n()).done;)a()}catch(u){i.e(u)}finally{i.f()}}return e},S={};!function(e,t){for(var n in t)v(e,n,{get:t[n],enumerable:!0})}(S,{ImageShapeUtil:function(){return M}}),e.exports=(r=S,w(v({},"__esModule",{value:!0}),r));var x=n(44414),P=n(57777),O=function(e,t,n){return n=null!=e?h(m(e)):{},w(!t&&e&&e.__esModule?n:v(n,"default",{value:e,enumerable:!0}),e)}(n(48738)),k=n(9950),_=n(29346),j=n(90770),I=n(61622),T=n(41066);function E(e){return C.apply(this,arguments)}function C(){return(C=d(i().mark((function e(t){var n,r;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,P.fetch)(t);case 2:return n=e.sent,e.next=5,n.blob();case 5:return r=e.sent,e.abrupt("return",P.FileHelpers.blobToDataUrl(r));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var M=function(e){function t(){return u(this,t),c(this,t,arguments)}return l(t,e),s(t,[{key:"isAspectRatioLocked",value:function(){return!0}},{key:"canCrop",value:function(){return!0}},{key:"getDefaultProps",value:function(){return{w:100,h:100,assetId:null,playing:!0,url:"",crop:null,flipX:!1,flipY:!1}}},{key:"onResize",value:function(e,t){var n=(0,P.resizeBox)(e,t),r=t.initialShape.props,o=r.flipX,i=r.flipY,u=t.scaleX,s=t.scaleY,c=t.mode;if(n=a(a({},n),{},{props:a(a({},n.props),{},{flipX:u<0!==o,flipY:s<0!==i})}),!e.props.crop)return n;var l="scale_shape"===c&&-1===u||"resize_bounds"===c&&o!==n.props.flipX,f="scale_shape"===c&&-1===s||"resize_bounds"===c&&i!==n.props.flipY,d=e.props.crop,p=d.topLeft,h=d.bottomRight;return n.props.crop={topLeft:{x:l?1-h.x:p.x,y:f?1-h.y:p.y},bottomRight:{x:l?1-p.x:h.x,y:f?1-p.y:h.y}},n}},{key:"component",value:function(e){return(0,x.jsx)(A,{shape:e})}},{key:"indicator",value:function(e){return this.editor.getCroppingShapeId()===e.id?null:(0,x.jsx)("rect",{width:(0,P.toDomPrecision)(e.props.w),height:(0,P.toDomPrecision)(e.props.h)})}},{key:"toSvg",value:function(){var e=d(i().mark((function e(t){var n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.props.assetId){e.next=2;break}return e.abrupt("return",null);case 2:if(this.editor.getAsset(t.props.assetId)){e.next=5;break}return e.abrupt("return",null);case 5:return e.next=7,this.editor.resolveAssetUrl(t.props.assetId,{shouldResolveToOriginal:!0});case 7:if(n=e.sent){e.next=10;break}return e.abrupt("return",null);case 10:if(!(n.startsWith("blob:")||n.startsWith("http")||n.startsWith("/")||n.startsWith("./"))){e.next=17;break}return e.next=13,E(n);case 13:if(e.t0=e.sent,e.t0){e.next=16;break}e.t0="";case 16:n=e.t0;case 17:return e.abrupt("return",(0,x.jsx)(N,{shape:t,src:n}));case 18:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onDoubleClickEdge",value:function(e){var t=e.props;if(t&&this.editor.getCroppingShapeId()===e.id){var n=(0,P.structuredClone)(t.crop)||{topLeft:{x:0,y:0},bottomRight:{x:1,y:1}},r=1/(n.bottomRight.x-n.topLeft.x)*e.props.w,o=1/(n.bottomRight.y-n.topLeft.y)*e.props.h,i=new P.Vec(n.topLeft.x*r,n.topLeft.y*o).rot(e.rotation),a={id:e.id,type:e.type,x:e.x-i.x,y:e.y-i.y,props:{crop:{topLeft:{x:0,y:0},bottomRight:{x:1,y:1}},w:r,h:o}};this.editor.updateShapes([a])}}},{key:"getInterpolatedProps",value:function(e,t,n){return a(a({},n>.5?t.props:e.props),{},{w:(0,P.lerp)(e.props.w,t.props.w,n),h:(0,P.lerp)(e.props.h,t.props.h,n),crop:function(e,t){var r,o,i,a;if(null===e.props.crop&&null===t.props.crop)return null;var u=(null===(r=e.props.crop)||void 0===r?void 0:r.topLeft)||{x:0,y:0},s=(null===(o=e.props.crop)||void 0===o?void 0:o.bottomRight)||{x:1,y:1},c=(null===(i=t.props.crop)||void 0===i?void 0:i.topLeft)||{x:0,y:0},l=(null===(a=t.props.crop)||void 0===a?void 0:a.bottomRight)||{x:1,y:1};return{topLeft:{x:(0,P.lerp)(u.x,c.x,n),y:(0,P.lerp)(u.y,c.y,n)},bottomRight:{x:(0,P.lerp)(s.x,l.x,n),y:(0,P.lerp)(s.y,l.y,n)}}}(e,t)})}}])}(P.BaseBoxShapeUtil);f(M,"type","image"),f(M,"props",P.imageShapeProps),f(M,"migrations",P.imageShapeMigrations);var A=(0,k.memo)((function(e){var t,n=e.shape,r=(0,P.useEditor)(),i=(0,I.useImageOrVideoAsset)({shapeId:n.id,assetId:n.props.assetId}),u=i.asset,s=i.url,c=(0,T.usePrefersReducedMotion)(),l=(0,k.useState)(""),f=o(l,2),d=f[0],p=f[1],h=(0,k.useState)(null),v=o(h,2),g=v[0],y=v[1],m=function(e,t){var n=t.props.assetId?e.getAsset(t.props.assetId):void 0;return!!n&&("mimeType"in n.props&&P.MediaHelpers.isAnimatedImageType(null===n||void 0===n?void 0:n.props.mimeType)||"isAnimated"in n.props&&n.props.isAnimated)}(r,n);(0,k.useEffect)((function(){if(s&&m){var e=!1,t=(0,P.Image)();return t.onload=function(){if(!e){var n=document.createElement("canvas");n.width=t.width,n.height=t.height;var r=n.getContext("2d");r&&(r.drawImage(t,0,0),p(n.toDataURL()),y(s))}},t.crossOrigin="anonymous",t.src=s,function(){e=!0}}}),[r,m,c,s]);var b=(0,P.useValue)("show crop preview",(function(){return n.id===r.getOnlySelectedShapeId()&&r.getCroppingShapeId()===n.id&&r.isIn("select.crop")}),[r,n.id]),w=c&&((null===u||void 0===u||null===(t=u.props.mimeType)||void 0===t?void 0:t.includes("video"))||m),S=D(n),E=s===g?null:s,C=w?d:g;if(!s&&(null===u||void 0===u||!u.props.src))return(0,x.jsxs)(P.HTMLContainer,{id:n.id,style:{overflow:"hidden",width:n.props.w,height:n.props.h,color:"var(--color-text-3)",backgroundColor:"var(--color-low)",border:"1px solid var(--color-low-border)"},children:[(0,x.jsx)("div",{className:(0,O.default)("tl-image-container",u&&"tl-image-container-loading"),style:S,children:u?null:(0,x.jsx)(_.BrokenAssetIcon,{})}),"url"in n.props&&n.props.url&&(0,x.jsx)(j.HyperlinkButton,{url:n.props.url})]});var M=m?"anonymous":void 0;return(0,x.jsxs)(x.Fragment,{children:[b&&C&&(0,x.jsx)("div",{style:S,children:(0,x.jsx)("img",{className:"tl-image",style:a(a({},R(n)),{},{opacity:.1}),crossOrigin:M,src:C,referrerPolicy:"strict-origin-when-cross-origin",draggable:!1})}),(0,x.jsxs)(P.HTMLContainer,{id:n.id,style:{overflow:"hidden",width:n.props.w,height:n.props.h},children:[(0,x.jsxs)("div",{className:(0,O.default)("tl-image-container"),style:S,children:[C&&(0,x.jsx)("img",{className:"tl-image",style:R(n),crossOrigin:M,src:C,referrerPolicy:"strict-origin-when-cross-origin",draggable:!1},C),E&&(0,x.jsx)("img",{className:"tl-image",style:R(n),crossOrigin:M,src:E,referrerPolicy:"strict-origin-when-cross-origin",draggable:!1,onLoad:function(){return y(E)}},E)]}),n.props.url&&(0,x.jsx)(j.HyperlinkButton,{url:n.props.url})]})]})}));function D(e){var t=e.props.crop,n=null===t||void 0===t?void 0:t.topLeft;if(!n)return{width:e.props.w,height:e.props.h};var r=1/(t.bottomRight.x-t.topLeft.x)*e.props.w,o=1/(t.bottomRight.y-t.topLeft.y)*e.props.h,i=-n.x*r,a=-n.y*o;return{transform:"translate(".concat(i,"px, ").concat(a,"px)"),width:r,height:o}}function R(e,t){var n=e.props,r=n.flipX,o=n.flipY;if(r||o){var i="scale(".concat(r?-1:1,", ").concat(o?-1:1,")"),a=t?"translate(".concat(r?t.width:0,"px, ").concat(o?t.height:0,"px)"):"";return{transform:"".concat(a," ").concat(i),transformOrigin:t?"0 0":"center center"}}}function N(e){var t=e.shape,n=e.src,r=(0,P.useUniqueSafeId)(),o=D(t),i=t.props.crop;if(o.transform&&i){var u=o.transform,s=o.width,c=o.height,l=(i.bottomRight.x-i.topLeft.x)*s,f=(i.bottomRight.y-i.topLeft.y)*c,d=[new P.Vec(0,0),new P.Vec(l,0),new P.Vec(l,f),new P.Vec(0,f)],p=R(t,{width:s,height:c});return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)("defs",{children:(0,x.jsx)("clipPath",{id:r,children:(0,x.jsx)("polygon",{points:d.map((function(e){return"".concat(e.x,",").concat(e.y)})).join(" ")})})}),(0,x.jsx)("g",{clipPath:"url(#".concat(r,")"),children:(0,x.jsx)("image",{href:n,width:s,height:c,style:p?a(a({},p),{},{transform:"".concat(u," ").concat(p.transform)}):{transform:u}})})]})}return(0,x.jsx)("image",{href:n,width:t.props.w,height:t.props.h,style:R(t,{width:t.props.w,height:t.props.h})})}},66486:function(e,t,n){"use strict";var r,o=n(17383).default,i=n(34579).default,a=n(18336).default,u=n(29511).default,s=n(43693).default,c=n(50883).default,l=Object.defineProperty,f=Object.getOwnPropertyDescriptor,d=Object.getOwnPropertyNames,p=Object.prototype.hasOwnProperty,h={};!function(e,t){for(var n in t)l(e,n,{get:t[n],enumerable:!0})}(h,{LineShapeTool:function(){return m}}),e.exports=(r=h,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,i=c(d(t));try{var a=function(){var i=o.value;p.call(e,i)||i===n||l(e,i,{get:function(){return t[i]},enumerable:!(r=f(t,i))||r.enumerable})};for(i.s();!(o=i.n()).done;)a()}catch(u){i.e(u)}finally{i.f()}}return e}(l({},"__esModule",{value:!0}),r));var v=n(57777),g=n(14800),y=n(3252),m=function(e){function t(){var e;o(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return e=a(this,t,[].concat(r)),s(e,"shapeType","line"),e}return u(t,e),i(t,null,[{key:"children",value:function(){return[g.Idle,y.Pointing]}}])}(v.StateNode);s(m,"id","line"),s(m,"initial","idle")},10148:function(e,t,n){"use strict";var r,o=n(12897).default,i=n(85715).default,a=n(17383).default,u=n(34579).default,s=n(18336).default,c=n(29511).default,l=n(43693).default,f=n(50883).default,d=Object.defineProperty,p=Object.getOwnPropertyDescriptor,h=Object.getOwnPropertyNames,v=Object.prototype.hasOwnProperty,g={};!function(e,t){for(var n in t)d(e,n,{get:t[n],enumerable:!0})}(g,{LineShapeUtil:function(){return O},getGeometryForLineShape:function(){return _}}),e.exports=(r=g,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,i=f(h(t));try{var a=function(){var i=o.value;v.call(e,i)||i===n||d(e,i,{get:function(){return t[i]},enumerable:!(r=p(t,i))||r.enumerable})};for(i.s();!(o=i.n()).done;)a()}catch(u){i.e(u)}finally{i.f()}}return e}(d({},"__esModule",{value:!0}),r));var y=n(44414),m=n(57777),b=n(64761),w=n(38546),S=n(99937),x=n(2569),P=new m.WeakCache,O=function(e){function t(){return a(this,t),s(this,t,arguments)}return c(t,e),u(t,[{key:"hideResizeHandles",value:function(){return!0}},{key:"hideRotateHandle",value:function(){return!0}},{key:"hideSelectionBoundsFg",value:function(){return!0}},{key:"hideSelectionBoundsBg",value:function(){return!0}},{key:"getDefaultProps",value:function(){var e=(0,m.getIndices)(2),t=i(e,2),n=t[0],r=t[1];return{dash:"draw",size:"m",color:"black",spline:"line",points:l(l({},n,{id:n,index:n,x:0,y:0}),r,{id:r,index:r,x:.1,y:.1}),scale:1}}},{key:"getGeometry",value:function(e){return _(e)}},{key:"getHandles",value:function(e){return P.get(e.props,(function(){for(var t=_(e),n=k(e),r=n.map((function(e){return o(o({},e),{},{id:e.index,type:"vertex",canSnap:!0})})),i=0;i<n.length-1;i++){var a=(0,m.getIndexBetween)(n[i].index,n[i+1].index),u=t.segments[i].midPoint();r.push({id:a,type:"create",index:a,x:u.x,y:u.y,canSnap:!0})}return r.sort(m.sortByIndex)}))}},{key:"onResize",value:function(e,t){var n=t.scaleX,r=t.scaleY;return{props:{points:(0,m.mapObjectMapValues)(e.props.points,(function(e,t){var o=t.id,i=t.index,a=t.x,u=t.y;return{id:o,index:i,x:a*n,y:u*r}}))}}}},{key:"onBeforeCreate",value:function(e){var t=e.props.points,n=Object.keys(t);if(!(n.length<2)){var r=t[n[0]];if(n.every((function(e){var n=t[e];return n.x===r.x&&n.y===r.y}))){var i=n[n.length-1];return t[i]=o(o({},t[i]),{},{x:t[i].x+.1,y:t[i].y+.1}),e}}}},{key:"onHandleDrag",value:function(e,t){var n=t.handle;if("vertex"===n.type){var r=(0,m.maybeSnapToGrid)(new m.Vec(n.x,n.y),this.editor);return o(o({},e),{},{props:o(o({},e.props),{},{points:o(o({},e.props.points),{},l({},n.id,{id:n.id,index:n.index,x:r.x,y:r.y}))})})}}},{key:"component",value:function(e){return(0,y.jsx)(m.SVGContainer,{children:(0,y.jsx)(j,{shape:e})})}},{key:"indicator",value:function(e){var t,n=b.STROKE_SIZES[e.props.size]*e.props.scale,r=_(e),o=e.props.dash;if("line"===e.props.spline){var a=r.points;if("solid"===o||"dotted"===o||"dashed"===o)t="M"+a[0]+"L"+a.slice(1);else{var u=(0,x.getDrawLinePathData)(e.id,a,n);t=i(u,1)[0]}}else t=(0,S.getLineIndicatorPath)(e,r,n);return(0,y.jsx)("path",{d:t})}},{key:"toSvg",value:function(e){return(0,y.jsx)(j,{shouldScale:!0,shape:e})}},{key:"getHandleSnapGeometry",value:function(e){var t=this,n=k(e);return{points:n,getSelfSnapPoints:function(r){var o=t.getHandles(e).filter((function(e){return"vertex"===e.type})).findIndex((function(e){return e.id===r.id}));return n.filter((function(e,t){return Math.abs(t-o)>1})).map(m.Vec.From)},getSelfSnapOutline:function(n){var r=t.getHandles(e).filter((function(e){return"vertex"===e.type})).findIndex((function(e){return e.id===n.id})),o=_(e).segments.filter((function(e,t){return t!==r-1&&t!==r}));return o.length?new m.Group2d({children:o}):null}}}},{key:"getInterpolatedProps",value:function(e,t,n){var r=k(e),i=k(t),a=[],u=[],s=m.ZERO_INDEX_KEY;if(r.length>i.length)for(var c=0;c<r.length;c++)a[c]=o({},r[c]),void 0===i[c]?u[c]=o(o({},i[i.length-1]),{},{id:s}):u[c]=o(o({},i[c]),{},{id:s}),s=(0,m.getIndexAbove)(s);else if(i.length>r.length)for(var l=0;l<i.length;l++)u[l]=o({},i[l]),void 0===r[l]?a[l]=o(o({},r[r.length-1]),{},{id:s}):a[l]=o(o({},r[l]),{},{id:s}),s=(0,m.getIndexAbove)(s);else for(var f=0;f<i.length;f++)a[f]=r[f],u[f]=i[f];return o(o({},n>.5?t.props:e.props),{},{points:Object.fromEntries(a.map((function(e,t){var r=u[t];return[e.id,o(o({},e),{},{x:(0,m.lerp)(e.x,r.x,n),y:(0,m.lerp)(e.y,r.y,n)})]}))),scale:(0,m.lerp)(e.props.scale,t.props.scale,n)})}}])}(m.ShapeUtil);function k(e){return Object.values(e.props.points).sort(m.sortByIndex)}function _(e){var t=k(e).map(m.Vec.From);switch(e.props.spline){case"cubic":return new m.CubicSpline2d({points:t});case"line":return new m.Polyline2d({points:t})}}function j(e){var t=e.shape,n=e.shouldScale,r=void 0!==n&&n,o=e.forceSolid,a=void 0!==o&&o,u=(0,w.useDefaultColorTheme)(),s=_(t),c=t.props,l=c.dash,f=c.color,d=c.size,p=1/t.props.scale,h=r?p:1,v=b.STROKE_SIZES[d]*t.props.scale;if("line"===t.props.spline){if("solid"===l){var g=s.points,P="M"+g[0]+"L"+g.slice(1);return(0,y.jsx)("path",{d:P,stroke:u[f].solid,strokeWidth:v,fill:"none",transform:"scale(".concat(h,")")})}if("dashed"===l||"dotted"===l)return(0,y.jsx)("g",{stroke:u[f].solid,strokeWidth:v,transform:"scale(".concat(h,")"),children:s.segments.map((function(e,t){var n=a?{strokeDasharray:"none",strokeDashoffset:"none"}:(0,m.getPerfectDashProps)(e.length,v,{style:l,start:t>0?"outset":"none",end:t<s.segments.length-1?"outset":"none"}),r=n.strokeDasharray,o=n.strokeDashoffset;return(0,y.jsx)("path",{strokeDasharray:r,strokeDashoffset:o,d:e.getSvgPathData(!0),fill:"none"},t)}))});if("draw"===l){var O=s.points,k=(0,x.getDrawLinePathData)(t.id,O,v),j=i(k,2),I=(j[0],j[1]);return(0,y.jsx)("path",{d:I,stroke:u[f].solid,strokeWidth:v,fill:"none",transform:"scale(".concat(h,")")})}}if("cubic"===t.props.spline){var T=s.getSvgPathData();if("solid"===l)return(0,y.jsx)("path",{strokeWidth:v,stroke:u[f].solid,fill:"none",d:T,transform:"scale(".concat(h,")")});if("dashed"===l||"dotted"===l)return(0,y.jsx)("g",{stroke:u[f].solid,strokeWidth:v,transform:"scale(".concat(h,")"),children:s.segments.map((function(e,t){var n=(0,m.getPerfectDashProps)(e.length,v,{style:l,start:t>0?"outset":"none",end:t<s.segments.length-1?"outset":"none",forceSolid:a}),r=n.strokeDasharray,o=n.strokeDashoffset;return(0,y.jsx)("path",{strokeDasharray:r,strokeDashoffset:o,d:e.getSvgPathData(),fill:"none"},t)}))});if("draw"===l)return(0,y.jsx)("path",{d:(0,S.getLineDrawPath)(t,s,v),strokeWidth:1,stroke:u[f].solid,fill:u[f].solid,transform:"scale(".concat(h,")")})}}l(O,"type","line"),l(O,"props",m.lineShapeProps),l(O,"migrations",m.lineShapeMigrations)},99937:function(e,t,n){"use strict";var r,o=n(50883).default,i=Object.defineProperty,a=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,c={};!function(e,t){for(var n in t)i(e,n,{get:t[n],enumerable:!0})}(c,{getLineDrawPath:function(){return y},getLineIndicatorPath:function(){return m}}),e.exports=(r=c,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var c,l=o(u(t));try{var f=function(){var o=c.value;s.call(e,o)||o===n||i(e,o,{get:function(){return t[o]},enumerable:!(r=a(t,o))||r.enumerable})};for(l.s();!(c=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(i({},"__esModule",{value:!0}),r));var l=n(57777),f=n(59645),d=n(83237),p=n(91221),h=n(17048);function v(e){return{size:e,thinning:.4,streamline:0,smoothing:.5,simulatePressure:!0,last:!0}}function g(e,t,n){var r=t.vertices,o=v(n);return(0,d.getStrokePoints)(r,o)}function y(e,t,n){var r=function(e,t,n){var r=v(n);return(0,f.getStrokeOutlinePoints)((0,p.setStrokePointRadii)(g(0,t,n),r),r)}(0,t,n);return(0,l.getSvgPathFromPoints)(r)}function m(e,t,n){if("draw"===e.props.dash){var r=g(0,t,n);return(0,h.getSvgPathFromStrokePoints)(r)}return t.getSvgPathData()}},2569:function(e,t,n){"use strict";var r,o=n(50883).default,i=Object.defineProperty,a=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,c={};!function(e,t){for(var n in t)i(e,n,{get:t[n],enumerable:!0})}(c,{getDrawLinePathData:function(){return f}}),e.exports=(r=c,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var c,l=o(u(t));try{var f=function(){var o=c.value;s.call(e,o)||o===n||i(e,o,{get:function(){return t[o]},enumerable:!(r=a(t,o))||r.enumerable})};for(l.s();!(c=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(i({},"__esModule",{value:!0}),r));var l=n(57777);function f(e,t,n){for(var r,o,i="M ".concat((0,l.precise)(t[0]),"L"),a="M ".concat((0,l.precise)(t[0]),"L"),u=n/3,s=2*n,c=(0,l.rng)(e),f=t[0],d=t[0],p=0,h=t.length-1;p<h;p++){r=t[p+1],o=l.Vec.AddXY(t[p+1],c()*u,c()*u);var v=l.Vec.Sub(r,f),g=l.Vec.Len(v),y=l.Vec.Div(v,g).mul(Math.min(g/4,s)),m=l.Vec.Add(f,y),b=l.Vec.Add(r,y.neg()),w=l.Vec.Sub(o,d),S=l.Vec.Len(w),x=l.Vec.Div(w,S).mul(Math.min(S/4,s)),P=l.Vec.Add(d,x),O=l.Vec.Add(o,x.neg());p===h-1?(i+="".concat((0,l.precise)(m),"L ").concat((0,l.precise)(r)),a+="".concat((0,l.precise)(P),"L ").concat((0,l.precise)(o))):(i+="".concat((0,l.precise)(m),"L ").concat((0,l.precise)(b),"Q ").concat((0,l.precise)(r)),a+="".concat((0,l.precise)(P),"L ").concat((0,l.precise)(O),"Q ").concat((0,l.precise)(o)),f=r,d=o)}return[i,i+a]}},14800:function(e,t,n){"use strict";var r,o=n(17383).default,i=n(34579).default,a=n(18336).default,u=n(29511).default,s=n(43693).default,c=n(50883).default,l=Object.defineProperty,f=Object.getOwnPropertyDescriptor,d=Object.getOwnPropertyNames,p=Object.prototype.hasOwnProperty,h={};!function(e,t){for(var n in t)l(e,n,{get:t[n],enumerable:!0})}(h,{Idle:function(){return v}}),e.exports=(r=h,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,i=c(d(t));try{var a=function(){var i=o.value;p.call(e,i)||i===n||l(e,i,{get:function(){return t[i]},enumerable:!(r=f(t,i))||r.enumerable})};for(i.s();!(o=i.n()).done;)a()}catch(u){i.e(u)}finally{i.f()}}return e}(l({},"__esModule",{value:!0}),r));var v=function(e){function t(){var e;o(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return e=a(this,t,[].concat(r)),s(e,"shapeId",""),e}return u(t,e),i(t,[{key:"onEnter",value:function(e){this.shapeId=e.shapeId,this.editor.setCursor({type:"cross",rotation:0})}},{key:"onPointerDown",value:function(){this.parent.transition("pointing",{shapeId:this.shapeId})}},{key:"onCancel",value:function(){this.editor.setCurrentTool("select")}}])}(n(57777).StateNode);s(v,"id","idle")},3252:function(e,t,n){"use strict";var r,o=n(12897).default,i=n(17383).default,a=n(34579).default,u=n(18336).default,s=n(29511).default,c=n(43693).default,l=n(50883).default,f=Object.defineProperty,d=Object.getOwnPropertyDescriptor,p=Object.getOwnPropertyNames,h=Object.prototype.hasOwnProperty,v={};!function(e,t){for(var n in t)f(e,n,{get:t[n],enumerable:!0})}(v,{Pointing:function(){return y}}),e.exports=(r=v,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,i=l(p(t));try{var a=function(){var i=o.value;h.call(e,i)||i===n||f(e,i,{get:function(){return t[i]},enumerable:!(r=d(t,i))||r.enumerable})};for(i.s();!(o=i.n()).done;)a()}catch(u){i.e(u)}finally{i.f()}}return e}(f({},"__esModule",{value:!0}),r));var g=n(57777),y=function(e){function t(){var e;i(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return e=u(this,t,[].concat(r)),c(e,"shape",{}),c(e,"markId",void 0),e}return s(t,e),a(t,[{key:"onEnter",value:function(e){var t=this.editor.inputs,n=t.currentPagePoint;this.markId=void 0;var r=e.shapeId&&this.editor.getShape(e.shapeId);if(r&&t.shiftKey){this.markId=this.editor.markHistoryStoppingPoint("creating_line:".concat(r.id)),this.shape=r;var o=this.editor.getShapeHandles(this.shape);if(!o)return;var i=o.filter((function(e){return"vertex"===e.type})).sort(g.sortByIndex),a=i[i.length-1],u=i[i.length-2],s=g.Mat.applyToPoint(this.editor.getShapeParentTransform(this.shape),new g.Vec(this.shape.x,this.shape.y)),c=g.Vec.Sub(n,s).addXY(.1,.1),l=(0,g.maybeSnapToGrid)(c,this.editor),f=(0,g.structuredClone)(this.shape.props.points);if(g.Vec.DistMin(a,u,2)||g.Vec.DistMin(l,a,2))f[a.id]={id:a.id,index:a.index,x:l.x,y:l.y};else{var d=(0,g.getIndexAbove)(a.index);f[d]={id:d,index:d,x:l.x,y:l.y}}this.editor.updateShapes([{id:this.shape.id,type:this.shape.type,props:{points:f}}])}else{var p=(0,g.createShapeId)();this.markId=this.editor.markHistoryStoppingPoint("creating_line:".concat(p));var h=(0,g.maybeSnapToGrid)(n,this.editor);this.editor.createShapes([{id:p,type:"line",x:h.x,y:h.y,props:{scale:this.editor.user.getIsDynamicResizeMode()?1/this.editor.getZoomLevel():1}}]),this.editor.select(p),this.shape=this.editor.getShape(p)}}},{key:"onPointerMove",value:function(){if(this.shape&&this.editor.inputs.isDragging){var e=this.editor.getShapeHandles(this.shape);if(!e)throw this.markId&&this.editor.bailToMark(this.markId),Error("No handles found");var t=(0,g.last)(e);this.editor.setCurrentTool("select.dragging_handle",{shape:this.shape,isCreating:!0,creatingMarkId:this.markId,handle:o(o({},t),{},{x:t.x-.1,y:t.y-.1}),onInteractionEnd:"line"})}}},{key:"onPointerUp",value:function(){this.complete()}},{key:"onCancel",value:function(){this.cancel()}},{key:"onComplete",value:function(){this.complete()}},{key:"onInterrupt",value:function(){this.parent.transition("idle"),this.markId&&this.editor.bailToMark(this.markId),this.editor.snaps.clearIndicators()}},{key:"complete",value:function(){this.parent.transition("idle",{shapeId:this.shape.id}),this.editor.snaps.clearIndicators()}},{key:"cancel",value:function(){this.markId&&this.editor.bailToMark(this.markId),this.parent.transition("idle",{shapeId:this.shape.id}),this.editor.snaps.clearIndicators()}}])}(g.StateNode);c(y,"id","pointing")},22054:function(e,t,n){"use strict";var r,o=n(17383).default,i=n(34579).default,a=n(18336).default,u=n(29511).default,s=n(43693).default,c=n(50883).default,l=Object.defineProperty,f=Object.getOwnPropertyDescriptor,d=Object.getOwnPropertyNames,p=Object.prototype.hasOwnProperty,h={};!function(e,t){for(var n in t)l(e,n,{get:t[n],enumerable:!0})}(h,{NoteShapeTool:function(){return m}}),e.exports=(r=h,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,i=c(d(t));try{var a=function(){var i=o.value;p.call(e,i)||i===n||l(e,i,{get:function(){return t[i]},enumerable:!(r=f(t,i))||r.enumerable})};for(i.s();!(o=i.n()).done;)a()}catch(u){i.e(u)}finally{i.f()}}return e}(l({},"__esModule",{value:!0}),r));var v=n(57777),g=n(8410),y=n(18406),m=function(e){function t(){var e;o(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return e=a(this,t,[].concat(r)),s(e,"shapeType","note"),e}return u(t,e),i(t,null,[{key:"children",value:function(){return[g.Idle,y.Pointing]}}])}(v.StateNode);s(m,"id","note"),s(m,"initial","idle")},28340:function(e,t,n){"use strict";var r,o=n(12897).default,i=n(17383).default,a=n(34579).default,u=n(18336).default,s=n(29511).default,c=n(43693).default,l=n(50883).default,f=Object.defineProperty,d=Object.getOwnPropertyDescriptor,p=Object.getOwnPropertyNames,h=Object.prototype.hasOwnProperty,v={};!function(e,t){for(var n in t)f(e,n,{get:t[n],enumerable:!0})}(v,{NoteShapeUtil:function(){return T}}),e.exports=(r=v,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,i=l(p(t));try{var a=function(){var i=o.value;h.call(e,i)||i===n||f(e,i,{get:function(){return t[i]},enumerable:!(r=d(t,i))||r.enumerable})};for(i.s();!(o=i.n()).done;)a()}catch(u){i.e(u)}finally{i.f()}}return e}(f({},"__esModule",{value:!0}),r));var g=n(44414),y=n(57777),m=n(9950),b=n(97410),w=n(35284),S=n(90770),x=n(23151),P=n(65083),O=n(92965),k=n(57856),_=n(23813),j=n(38546),I=n(8784),T=function(e){function t(){return i(this,t),u(this,t,arguments)}return s(t,e),a(t,[{key:"canEdit",value:function(){return!0}},{key:"hideResizeHandles",value:function(){return!0}},{key:"hideSelectionBoundsFg",value:function(){return!1}},{key:"getDefaultProps",value:function(){return{color:"black",size:"m",text:"",font:"draw",align:"middle",verticalAlign:"middle",labelColor:"black",growY:0,fontSizeAdjustment:0,url:"",scale:1}}},{key:"getGeometry",value:function(e){var t=M(this.editor,e),n=t.labelHeight,r=t.labelWidth,o=e.props.scale,i=n*o,a=r*o,u=I.NOTE_SIZE*o,s=A(e);return new y.Group2d({children:[new y.Rectangle2d({width:u,height:s,isFilled:!0}),new y.Rectangle2d({x:"start"===e.props.align?0:"end"===e.props.align?u-a:(u-a)/2,y:"start"===e.props.verticalAlign?0:"end"===e.props.verticalAlign?s-i:(s-i)/2,width:a,height:i,isFilled:!0,isLabel:!0})]})}},{key:"getHandles",value:function(e){var t=e.props.scale;if(this.editor.getInstanceState().isCoarsePointer)return[];var n=this.editor.getZoomLevel();if(n*t<.25)return[];var r=A(e),o=I.NOTE_SIZE*t,i=I.CLONE_HANDLE_MARGIN/n*t;return n*t<.5?[{id:"bottom",index:"a3",type:"clone",x:o/2,y:r+i}]:[{id:"top",index:"a1",type:"clone",x:o/2,y:-i},{id:"right",index:"a2",type:"clone",x:o+i,y:r/2},{id:"bottom",index:"a3",type:"clone",x:o/2,y:r+i},{id:"left",index:"a4",type:"clone",x:-i,y:r/2}]}},{key:"getText",value:function(e){return e.props.text}},{key:"component",value:function(e){var t=this,n=e.id,r=e.type,o=e.props,i=o.labelColor,a=o.scale,u=o.color,s=o.font,c=o.size,l=o.align,f=o.text,d=o.verticalAlign,p=o.fontSizeAdjustment,h=function(e){var t=(0,y.useEditor)(),n=(0,b.useCurrentTranslation)();return(0,m.useCallback)((function(r){var o=t.getShape(e);if(o){var i="Tab"===r.key,a=(r.metaKey||r.ctrlKey)&&"Enter"===r.key;if(i||a){r.preventDefault();var u=t.getShapePageTransform(e),s=u.rotation(),c=!("rtl"!==n.dir&&!(0,w.isRightToLeftLanguage)(o.props.text)),l=(I.NOTE_SIZE+t.options.adjacentShapeMargin+(a&&!r.shiftKey?o.props.growY:0))*o.props.scale,f=new y.Vec(i?r.shiftKey!=c?-1:1:0,a?r.shiftKey?-1:1:0).mul(l).add(I.NOTE_CENTER_OFFSET.clone().mul(o.props.scale)).rot(s).add(u.point()),d=(0,I.getNoteShapeForAdjacentPosition)(t,o,f,s);d&&(t.markHistoryStoppingPoint("editing adjacent shape"),(0,_.startEditingShapeWithLabel)(t,d,!0))}}}),[e,t,n.dir])}(n),v=(0,j.useDefaultColorTheme)(),x=I.NOTE_SIZE*a,k=A(e),T=(0,y.useValue)("shape rotation",(function(){var e,r;return null!==(e=null===(r=t.editor.getShapePageTransform(n))||void 0===r?void 0:r.rotation())&&void 0!==e?e:0}),[this.editor]),E=(0,y.useValue)("zoom",(function(){return t.editor.getZoomLevel()<.35/a}),[a,this.editor]),C=(0,y.useValue)("dark mode",(function(){return t.editor.user.getIsDarkMode()}),[this.editor]),M=e.id===this.editor.getOnlySelectedShapeId();return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)("div",{id:n,className:"tl-note__container",style:{width:x,height:k,backgroundColor:v[u].note.fill,borderBottom:E?"".concat(2*a,C?"px solid rgb(20, 20, 20)":"px solid rgb(144, 144, 144)"):"none",boxShadow:E?"none":D(e.id,T,a)},children:(0,g.jsx)(P.TextLabel,{shapeId:n,type:r,font:s,fontSize:(p||O.LABEL_FONT_SIZES[c])*a,lineHeight:O.TEXT_PROPS.lineHeight,align:l,verticalAlign:d,text:f,isNote:!0,isSelected:M,labelColor:"black"===i?v[u].note.text:v[i].fill,wrap:!0,padding:16*a,onKeyDown:h})}),"url"in e.props&&e.props.url&&(0,g.jsx)(S.HyperlinkButton,{url:e.props.url})]})}},{key:"indicator",value:function(e){var t=e.props.scale;return(0,g.jsx)("rect",{rx:t,width:(0,y.toDomPrecision)(I.NOTE_SIZE*t),height:(0,y.toDomPrecision)(A(e))})}},{key:"toSvg",value:function(e,t){e.props.text&&t.addExportDef((0,k.getFontDefForExport)(e.props.font));var n=(0,y.getDefaultColorTheme)({isDarkMode:t.isDarkMode}),r=function(e){return new y.Box(0,0,I.NOTE_SIZE,I.NOTE_SIZE+e.props.growY)}(e);return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)("rect",{x:5,y:5,rx:1,width:I.NOTE_SIZE-10,height:r.h,fill:"rgba(0,0,0,.1)"}),(0,g.jsx)("rect",{rx:1,width:I.NOTE_SIZE,height:r.h,fill:n[e.props.color].note.fill}),(0,g.jsx)(x.SvgTextLabel,{fontSize:e.props.fontSizeAdjustment||O.LABEL_FONT_SIZES[e.props.size],font:e.props.font,align:e.props.align,verticalAlign:e.props.verticalAlign,text:e.props.text,labelColor:n[e.props.color].note.text,bounds:r,stroke:!1})]})}},{key:"onBeforeCreate",value:function(e){return E(this.editor,e)}},{key:"onBeforeUpdate",value:function(e,t){if(e.props.text!==t.props.text||e.props.font!==t.props.font||e.props.size!==t.props.size)return E(this.editor,t)}},{key:"onEditEnd",value:function(e){var t=e.id,n=e.type,r=e.props.text;r.trimEnd()!==e.props.text&&this.editor.updateShapes([{id:t,type:n,props:{text:r.trimEnd()}}])}},{key:"getInterpolatedProps",value:function(e,t,n){return o(o({},n>.5?t.props:e.props),{},{scale:(0,y.lerp)(e.props.scale,t.props.scale,n)})}}])}(y.ShapeUtil);function E(e,t){var n=M(e,t),r=n.labelHeight,i=n.fontSizeAdjustment,a=Math.max(0,r-I.NOTE_SIZE);if(a!==t.props.growY||i!==t.props.fontSizeAdjustment)return o(o({},t),{},{props:o(o({},t.props),{},{growY:a,fontSizeAdjustment:i})})}c(T,"type","note"),c(T,"props",y.noteShapeProps),c(T,"migrations",y.noteShapeMigrations);var C=new y.WeakCache;function M(e,t){return C.get(t,(function(){return function(e,t){var n=t.props.text;if(!n)return{labelHeight:O.LABEL_FONT_SIZES[t.props.size]*O.TEXT_PROPS.lineHeight+2*O.LABEL_PADDING,labelWidth:100,fontSizeAdjustment:0};var r=O.LABEL_FONT_SIZES[t.props.size],i=0,a=0,u=I.NOTE_SIZE,s=I.NOTE_SIZE;do{i=Math.min(r,r-a);var c=e.textMeasure.measureText(n,o(o({},O.TEXT_PROPS),{},{fontFamily:O.FONT_FAMILIES[t.props.font],fontSize:i,maxWidth:I.NOTE_SIZE-2*O.LABEL_PADDING-1,disableOverflowWrapBreaking:!0}));if(u=c.h+2*O.LABEL_PADDING,s=c.w+2*O.LABEL_PADDING,i<=14){var l=e.textMeasure.measureText(n,o(o({},O.TEXT_PROPS),{},{fontFamily:O.FONT_FAMILIES[t.props.font],fontSize:i,maxWidth:I.NOTE_SIZE-2*O.LABEL_PADDING-1}));u=l.h+2*O.LABEL_PADDING,s=l.w+2*O.LABEL_PADDING;break}if(c.scrollWidth.toFixed(0)===c.w.toFixed(0))break}while(a++<50);return{labelHeight:u,labelWidth:s,fontSizeAdjustment:i}}(e,t)}))}function A(e){return(I.NOTE_SIZE+e.props.growY)*e.props.scale}function D(e,t,n){var r=(0,y.rng)(e),o=Math.abs(r())+.5,i=Math.cos(t),a=5*n,u=4*n,s=6*n,c=7*n;return"0px ".concat(a-o,"px ").concat(a,"px -").concat(a,"px rgba(15, 23, 31, .6),\n\t0px ").concat((u+o*c)*Math.max(0,i),"px ").concat(s+o*c,"px -").concat(u+o*s,"px rgba(15, 23, 31, ").concat((.3+.1*o).toFixed(2),"), \n\t0px ").concat(48*n,"px ").concat(10*n,"px -").concat(10*n,"px inset rgba(15, 23, 44, ").concat(((.022+.005*r())*((1+i)/2)).toFixed(2),")")}},8784:function(e,t,n){"use strict";var r,o=n(12897).default,i=n(41132).default,a=n(85715).default,u=n(50883).default,s=Object.defineProperty,c=Object.getOwnPropertyDescriptor,l=Object.getOwnPropertyNames,f=Object.prototype.hasOwnProperty,d={};!function(e,t){for(var n in t)s(e,n,{get:t[n],enumerable:!0})}(d,{CLONE_HANDLE_MARGIN:function(){return h},NOTE_ADJACENT_POSITION_SNAP_RADIUS:function(){return y},NOTE_CENTER_OFFSET:function(){return g},NOTE_SIZE:function(){return v},getAvailableNoteAdjacentPositions:function(){return w},getNoteAdjacentPositions:function(){return b},getNoteShapeForAdjacentPosition:function(){return S}}),e.exports=(r=d,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,i=u(l(t));try{var a=function(){var i=o.value;f.call(e,i)||i===n||s(e,i,{get:function(){return t[i]},enumerable:!(r=c(t,i))||r.enumerable})};for(i.s();!(o=i.n()).done;)a()}catch(d){i.e(d)}finally{i.f()}}return e}(s({},"__esModule",{value:!0}),r));var p=n(57777),h=0,v=200,g=new p.Vec(v/2,v/2),y=10,m=function(e){return[[["a1"],new p.Vec(.5*v,-.5*v-e.options.adjacentShapeMargin)],[["a2"],new p.Vec(1.5*v+e.options.adjacentShapeMargin,.5*v)],[["a3"],new p.Vec(.5*v,1.5*v+e.options.adjacentShapeMargin)],[["a4"],new p.Vec(-.5*v-e.options.adjacentShapeMargin,.5*v)]]};function b(e,t,n,r,o,i){return Object.fromEntries(function(e,t){if(1===t)return m(e);var n=v*t,r=e.options.adjacentShapeMargin*t;return[[["a1"],new p.Vec(.5*n,-.5*n-r)],[["a2"],new p.Vec(1.5*n+r,.5*n)],[["a3"],new p.Vec(.5*n,1.5*n+r)],[["a4"],new p.Vec(-.5*n-r,.5*n)]]}(e,i).map((function(e,i){var u=a(e,2),s=u[0],c=u[1].clone();return 0===i&&o?c.y-=o:2===i&&r&&(c.y+=r),[s,c.rot(n).add(t)]})))}function w(e,t,n,r){var o,s=new Set(e.getSelectedShapeIds()),c=Math.pow(v+e.options.adjacentShapeMargin+r,2),l=new Map,f=[],d=u(e.getCurrentPageShapes());try{for(d.s();!(o=d.n()).done;){var h=o.value;if(e.isShapeOfType(h,"note")&&n===h.props.scale&&!s.has(h.id)){var g=e.getShapePageTransform(h.id);t===g.rotation()&&(l.set(h,e.getShapePageBounds(h).center),f.push.apply(f,i(Object.values(b(e,g.point(),t,h.props.growY,r,n)))))}}}catch(_){d.e(_)}finally{d.f()}var y,m,w=f.length,S=u(l);try{for(S.s();!(m=S.n()).done;)for(var x=a(m.value,2),P=x[0],O=x[1],k=0;k<w;k++)(y=f[k])&&(p.Vec.Dist2(O,y)>c||e.isPointInShape(P,y)&&(f[k]=void 0))}catch(_){S.e(_)}finally{S.f()}return(0,p.compact)(f)}function S(e,t,n,r){for(var i,a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],u=e.getCurrentPageShapesSorted(),s=Math.pow(v+Math.pow(e.options.adjacentShapeMargin,2),t.props.scale),c=u.length-1;c>=0;c--){var l=u[c];if("note"===l.type&&l.id!==t.id){var f=e.getShapePageBounds(l);if(f&&p.Vec.Dist2(f.center,n)<s&&e.isPointInShape(l,n)){i=l;break}}}if(e.complete(),!i||a){e.markHistoryStoppingPoint("creating note shape");var d=(0,p.createShapeId)();e.createShape({id:d,type:"note",x:n.x,y:n.y,rotation:r,opacity:t.opacity,props:o(o({},t.props),{},{text:"",growY:0,fontSizeAdjustment:0,url:""})});var h=e.getShape(d);if(!h)return;var y=e.getPointInParentSpace(h,p.Vec.Sub(n,p.Vec.Rot(g.clone().mul(h.props.scale),r)));e.updateShape({id:d,type:"note",x:y.x,y:y.y}),i=e.getShape(d)}return function(e){var t=e.getSelectionPageBounds(),n=e.getViewportPageBounds();if(t&&!n.contains(t)){var r=t.clone().expandBy(x/e.getZoomLevel()).expand(n),o=n.clone().translate({x:2*(r.center.x-n.center.x),y:2*(r.center.y-n.center.y)});e.zoomToBounds(o,{animation:{duration:e.options.animationMediumMs},inset:0})}}(e),i}var x=16},8410:function(e,t,n){"use strict";var r,o=n(17383).default,i=n(34579).default,a=n(18336).default,u=n(29511).default,s=n(43693).default,c=n(50883).default,l=Object.defineProperty,f=Object.getOwnPropertyDescriptor,d=Object.getOwnPropertyNames,p=Object.prototype.hasOwnProperty,h={};!function(e,t){for(var n in t)l(e,n,{get:t[n],enumerable:!0})}(h,{Idle:function(){return v}}),e.exports=(r=h,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,i=c(d(t));try{var a=function(){var i=o.value;p.call(e,i)||i===n||l(e,i,{get:function(){return t[i]},enumerable:!(r=f(t,i))||r.enumerable})};for(i.s();!(o=i.n()).done;)a()}catch(u){i.e(u)}finally{i.f()}}return e}(l({},"__esModule",{value:!0}),r));var v=function(e){function t(){return o(this,t),a(this,t,arguments)}return u(t,e),i(t,[{key:"onPointerDown",value:function(e){this.parent.transition("pointing",e)}},{key:"onEnter",value:function(){this.editor.setCursor({type:"cross",rotation:0})}},{key:"onCancel",value:function(){this.editor.setCurrentTool("select")}}])}(n(57777).StateNode);s(v,"id","idle")},18406:function(e,t,n){"use strict";var r,o=n(12897).default,i=n(17383).default,a=n(34579).default,u=n(18336).default,s=n(29511).default,c=n(43693).default,l=n(50883).default,f=Object.defineProperty,d=Object.getOwnPropertyDescriptor,p=Object.getOwnPropertyNames,h=Object.prototype.hasOwnProperty,v={};!function(e,t){for(var n in t)f(e,n,{get:t[n],enumerable:!0})}(v,{Pointing:function(){return m},createNoteShape:function(){return w},getNoteShapeAdjacentPositionOffset:function(){return b}}),e.exports=(r=v,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,i=l(p(t));try{var a=function(){var i=o.value;h.call(e,i)||i===n||f(e,i,{get:function(){return t[i]},enumerable:!(r=d(t,i))||r.enumerable})};for(i.s();!(o=i.n()).done;)a()}catch(u){i.e(u)}finally{i.f()}}return e}(f({},"__esModule",{value:!0}),r));var g=n(57777),y=n(8784),m=function(e){function t(){var e;i(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return e=u(this,t,[].concat(r)),c(e,"dragged",!1),c(e,"info",{}),c(e,"markId",""),c(e,"shape",{}),e}return s(t,e),a(t,[{key:"onEnter",value:function(){var e=this.editor,t=(0,g.createShapeId)();this.markId=e.markHistoryStoppingPoint("creating_note:".concat(t));var n=this.editor.inputs.originPagePoint.clone(),r=b(this.editor,n,this.editor.user.getIsDynamicResizeMode()?1/this.editor.getZoomLevel():1);r&&n.sub(r),this.shape=w(this.editor,t,n)}},{key:"onPointerMove",value:function(e){var t=this;this.editor.inputs.isDragging&&this.editor.setCurrentTool("select.translating",o(o({},e),{},{target:"shape",shape:this.shape,onInteractionEnd:"note",isCreating:!0,creatingMarkId:this.markId,onCreate:function(){t.editor.setEditingShape(t.shape.id),t.editor.setCurrentTool("select.editing_shape")}}))}},{key:"onPointerUp",value:function(){this.complete()}},{key:"onInterrupt",value:function(){this.cancel()}},{key:"onComplete",value:function(){this.complete()}},{key:"onCancel",value:function(){this.cancel()}},{key:"complete",value:function(){this.editor.getInstanceState().isToolLocked?this.parent.transition("idle"):(this.editor.setEditingShape(this.shape.id),this.editor.setCurrentTool("select.editing_shape",o(o({},this.info),{},{target:"shape",shape:this.shape})))}},{key:"cancel",value:function(){this.editor.bailToMark(this.markId),this.parent.transition("idle",this.info)}}])}(g.StateNode);function b(e,t,n){var r,o,i=y.NOTE_ADJACENT_POSITION_SNAP_RADIUS/e.getZoomLevel(),a=l((0,y.getAvailableNoteAdjacentPositions)(e,0,n,0));try{for(a.s();!(o=a.n()).done;){var u=o.value,s=g.Vec.Sub(t,u),c=s.len();c<i&&(i=c,r=s)}}catch(f){a.e(f)}finally{a.f()}return r}function w(e,t,n){e.createShape({id:t,type:"note",x:n.x,y:n.y,props:{scale:e.user.getIsDynamicResizeMode()?1/e.getZoomLevel():1}}).select(t);var r=e.getShape(t),o=e.getShapeGeometry(r).bounds,i=(0,g.maybeSnapToGrid)(new g.Vec(r.x-o.width/2,r.y-o.height/2),e);return e.updateShapes([{id:t,type:"note",x:i.x,y:i.y}]),e.getShape(t)}c(m,"id","pointing")},29346:function(e,t,n){"use strict";var r,o=n(50883).default,i=Object.defineProperty,a=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,c={};!function(e,t){for(var n in t)i(e,n,{get:t[n],enumerable:!0})}(c,{BrokenAssetIcon:function(){return f}}),e.exports=(r=c,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var c,l=o(u(t));try{var f=function(){var o=c.value;s.call(e,o)||o===n||i(e,o,{get:function(){return t[o]},enumerable:!(r=a(t,o))||r.enumerable})};for(l.s();!(c=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(i({},"__esModule",{value:!0}),r));var l=n(44414);function f(){return(0,l.jsxs)("svg",{width:"15",height:"15",viewBox:"0 0 30 30",xmlns:"http://www.w3.org/2000/svg",fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,l.jsx)("path",{d:"M3,11 L3,3 11,3",strokeWidth:"2"}),(0,l.jsx)("path",{d:"M19,27 L27,27 L27,19",strokeWidth:"2"}),(0,l.jsx)("path",{d:"M27,3 L3,27",strokeWidth:"2"})]})}},90770:function(e,t,n){"use strict";var r,o=n(50883).default,i=Object.create,a=Object.defineProperty,u=Object.getOwnPropertyDescriptor,s=Object.getOwnPropertyNames,c=Object.getPrototypeOf,l=Object.prototype.hasOwnProperty,f=function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var i,c=o(s(t));try{var f=function(){var o=i.value;l.call(e,o)||o===n||a(e,o,{get:function(){return t[o]},enumerable:!(r=u(t,o))||r.enumerable})};for(c.s();!(i=c.n()).done;)f()}catch(d){c.e(d)}finally{c.f()}}return e},d={};!function(e,t){for(var n in t)a(e,n,{get:t[n],enumerable:!0})}(d,{HyperlinkButton:function(){return y}}),e.exports=(r=d,f(a({},"__esModule",{value:!0}),r));var p=n(44414),h=n(57777),v=function(e,t,n){return n=null!=e?i(c(e)):{},f(!t&&e&&e.__esModule?n:a(n,"default",{value:e,enumerable:!0}),e)}(n(48738)),g="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='30' height='30' fill='none'%3E%3Cpath stroke='%23000' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M13 5H7a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6M19 5h6m0 0v6m0-6L13 17'/%3E%3C/svg%3E";function y(e){var t=e.url,n=(0,h.useEditor)(),r=(0,h.useValue)("zoomLevel",(function(){return n.getZoomLevel()<.32}),[n]);return(0,p.jsx)("a",{className:(0,v.default)("tl-hyperlink-button",{"tl-hyperlink-button__hidden":r}),href:t,target:"_blank",rel:"noopener noreferrer",onPointerDown:h.stopEventPropagation,onPointerUp:h.stopEventPropagation,title:t,draggable:!1,children:(0,p.jsx)("div",{className:"tl-hyperlink__icon",style:{mask:'url("'.concat(g,'") center 100% / 100% no-repeat'),WebkitMask:'url("'.concat(g,'") center 100% / 100% no-repeat')}})})}},14080:function(e,t,n){"use strict";var r,o=n(50883).default,i=Object.create,a=Object.defineProperty,u=Object.getOwnPropertyDescriptor,s=Object.getOwnPropertyNames,c=Object.getPrototypeOf,l=Object.prototype.hasOwnProperty,f=function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var i,c=o(s(t));try{var f=function(){var o=i.value;l.call(e,o)||o===n||a(e,o,{get:function(){return t[o]},enumerable:!(r=u(t,o))||r.enumerable})};for(c.s();!(i=c.n()).done;)f()}catch(d){c.e(d)}finally{c.f()}}return e},d={};!function(e,t){for(var n in t)a(e,n,{get:t[n],enumerable:!0})}(d,{PatternFill:function(){return m},ShapeFill:function(){return y}}),e.exports=(r=d,f(a({},"__esModule",{value:!0}),r));var p=n(44414),h=n(57777),v=function(e,t,n){return n=null!=e?i(c(e)):{},f(!t&&e&&e.__esModule?n:a(n,"default",{value:e,enumerable:!0}),e)}(n(9950)),g=n(57856),y=v.default.memo((function(e){var t=e.theme,n=e.d,r=e.color,o=e.fill,i=e.scale;switch(o){case"none":return null;case"solid":return(0,p.jsx)("path",{fill:t[r].semi,d:n});case"semi":return(0,p.jsx)("path",{fill:t.solid,d:n});case"fill":return(0,p.jsx)("path",{fill:t[r].fill,d:n});case"pattern":return(0,p.jsx)(m,{theme:t,color:r,fill:o,d:n,scale:i})}}));function m(e){var t=e.d,n=e.color,r=e.theme,o=(0,h.useEditor)(),i=(0,h.useSvgExportContext)(),a=(0,h.useValue)("zoomLevel",(function(){return o.getZoomLevel()}),[o]),u=(0,g.useGetHashPatternZoomName)(),s=o.getZoomLevel()<=.18;return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)("path",{fill:r[n].pattern,d:t}),(0,p.jsx)("path",{fill:i?"url(#".concat(u(1,r.id),")"):s?r[n].semi:"url(#".concat(u(a,r.id),")"),d:t})]})}},23151:function(e,t,n){"use strict";var r,o=n(50883).default,i=Object.defineProperty,a=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,c={};!function(e,t){for(var n in t)i(e,n,{get:t[n],enumerable:!0})}(c,{SvgTextLabel:function(){return g}}),e.exports=(r=c,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var c,l=o(u(t));try{var f=function(){var o=c.value;s.call(e,o)||o===n||i(e,o,{get:function(){return t[o]},enumerable:!(r=a(t,o))||r.enumerable})};for(l.s();!(c=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(i({},"__esModule",{value:!0}),r));var l=n(44414),f=n(57777),d=n(38147),p=n(92965),h=n(65483),v=n(38546);function g(e){var t=e.fontSize,n=e.font,r=e.align,o=e.verticalAlign,i=e.text,a=e.labelColor,u=e.bounds,s=e.padding,c=void 0===s?16:s,g=e.stroke,y=void 0===g||g,m=(0,f.useEditor)(),b=(0,v.useDefaultColorTheme)(),w={fontSize:t,fontFamily:f.DefaultFontFamilies[n],textAlign:r,verticalTextAlign:o,width:Math.ceil(u.width),height:Math.ceil(u.height),padding:c,lineHeight:p.TEXT_PROPS.lineHeight,fontStyle:"normal",fontWeight:"normal",overflow:"wrap",offsetX:0,offsetY:0,fill:a,stroke:void 0,strokeWidth:void 0},S=m.textMeasure.measureTextSpans(i,w),x=(0,h.getLegacyOffsetX)(r,c,S,u.width);x&&(w.offsetX=x),w.offsetX+=u.x,w.offsetY+=u.y;var P=(0,d.createTextJsxFromSpans)(m,S,w),O=null;return y&&(w.fill=b.background,w.stroke=b.background,w.strokeWidth=2,O=(0,d.createTextJsxFromSpans)(m,S,w)),(0,l.jsxs)(l.Fragment,{children:[O,P]})}},3376:function(e,t,n){"use strict";var r,o=n(17383).default,i=n(34579).default,a=n(43693).default,u=n(50883).default,s=Object.defineProperty,c=Object.getOwnPropertyDescriptor,l=Object.getOwnPropertyNames,f=Object.prototype.hasOwnProperty,d={};!function(e,t){for(var n in t)s(e,n,{get:t[n],enumerable:!0})}(d,{INDENT:function(){return p},TextHelpers:function(){return h}}),e.exports=(r=d,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,i=u(l(t));try{var a=function(){var i=o.value;f.call(e,i)||i===n||s(e,i,{get:function(){return t[i]},enumerable:!(r=c(t,i))||r.enumerable})};for(i.s();!(o=i.n()).done;)a()}catch(d){i.e(d)}finally{i.f()}}return e}(s({},"__esModule",{value:!0}),r));var p="  ",h=function(){function e(){o(this,e)}return i(e,null,[{key:"insertTextFirefox",value:function(e,t){e.setRangeText(t,e.selectionStart||0,e.selectionEnd||0,"end"),e.dispatchEvent(new InputEvent("input",{data:t,inputType:"insertText",isComposing:!1}))}},{key:"insert",value:function(t,n){var r=t.ownerDocument,o=r.activeElement;o!==t&&t.focus(),r.execCommand("insertText",!1,n)||e.insertTextFirefox(t,n),o===r.body?t.blur():o instanceof HTMLElement&&o!==t&&o.focus()}},{key:"set",value:function(t,n){t.select(),e.insert(t,n)}},{key:"getSelection",value:function(e){var t=e.selectionStart,n=e.selectionEnd;return e.value.slice(t||void 0,n||void 0)}},{key:"wrapSelection",value:function(t,n,r){var o=t.selectionStart,i=t.selectionEnd,a=e.getSelection(t);e.insert(t,n+a+(null!==r&&void 0!==r?r:n)),t.selectionStart=(o||0)+n.length,t.selectionEnd=(i||0)+n.length}},{key:"replace",value:function(t,n,r){var o=0;t.value.replace(n,(function(){for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];var u=o+i[i.length-2],s=i[0].length;t.selectionStart=u,t.selectionEnd=u+s;var c="string"===typeof r?r:r.apply(void 0,i);return e.insert(t,c),t.selectionStart=u,o+=c.length-s,c}))}},{key:"findLineEnd",value:function(e,t){var n=e.lastIndexOf("\n",t-1)+1;return"\t"!==e.charAt(n)?t:n+1}},{key:"indent",value:function(t){var n,r=t.selectionStart,o=t.selectionEnd,i=t.value,a=i.slice(r,o),u=null===(n=/\n/g.exec(a))||void 0===n?void 0:n.length;if(u&&u>0){var s=i.lastIndexOf("\n",r-1)+1,c=t.value.slice(s,o-1),l=c.replace(/^|\n/g,"$&".concat(p)),f=l.length-c.length;t.setSelectionRange(s,o-1),e.insert(t,l),t.setSelectionRange(r+1,o+f)}else e.insert(t,p)}},{key:"unindent",value:function(t){var n=t.selectionStart,r=t.selectionEnd,o=t.value,i=o.lastIndexOf("\n",n-1)+1,a=e.findLineEnd(o,r),u=t.value.slice(i,a),s=u.replace(/(^|\n)(\t| {1,2})/g,"$1"),c=u.length-s.length;t.setSelectionRange(i,a),e.insert(t,s);var l=/\t| {1,2}/.exec(o.slice(i,n)),f=l?l[0].length:0,d=n-f;t.setSelectionRange(n-f,Math.max(d,r-c))}},{key:"indentCE",value:function(e){var t,n,r,o=window.getSelection(),i=e.innerText,a=null!==(t=v(e))&&void 0!==t?t:0,u=null!==(n=v(e))&&void 0!==n?n:0,s=i.slice(a,u),c=null===(r=/\n/g.exec(s))||void 0===r?void 0:r.length;if(c&&c>0){var l=i.lastIndexOf("\n",a-1)+1,f=i.slice(l,u-1),d=f.replace(/^|\n/g,"$&".concat(p)).length-f.length;o&&o.setBaseAndExtent(e,a+1,e,u+d)}else{var h=window.getSelection();e.innerText=i.slice(0,a)+p+i.slice(a),null===h||void 0===h||h.setBaseAndExtent(e,a+1,e,a+2)}}},{key:"unindentCE",value:function(t){var n,r,o=window.getSelection(),i=t.innerText,a=null!==(n=v(t))&&void 0!==n?n:0,u=null!==(r=v(t))&&void 0!==r?r:0,s=i.lastIndexOf("\n",a-1)+1,c=e.findLineEnd(i,u),l=i.slice(s,c),f=l.replace(/(^|\n)(\t| {1,2})/g,"$1"),d=l.length-f.length;if(o){o.setBaseAndExtent(t,s,t,c);var p=/\t| {1,2}/.exec(i.slice(s,a)),h=p?p[0].length:0,g=a-h;o.setBaseAndExtent(t,a-h,t,Math.max(g,u-d))}}},{key:"normalizeText",value:function(t){return t.replace(e.fixNewLines,"\n")}},{key:"normalizeTextForDom",value:function(t){return t.replace(e.fixNewLines,"\n").split("\n").map((function(e){return e||" "})).join("\n")}}])}();function v(e){if("undefined"!==typeof window.getSelection){var t=window.getSelection();if(t){var n=0;if(0!==t.rangeCount){var r=t.getRangeAt(0),o=r.cloneRange();o.selectNodeContents(e),o.setEnd(r.endContainer,r.endOffset),n=o.toString().length}return n}}}a(h,"fixNewLines",/\r?\n|\r/g)},65083:function(e,t,n){"use strict";var r,o=n(12897).default,i=n(85715).default,a=n(91847).default,u=n(50883).default,s=["rInput","isEmpty","isEditing","isEditingAnything"],c=Object.create,l=Object.defineProperty,f=Object.getOwnPropertyDescriptor,d=Object.getOwnPropertyNames,p=Object.getPrototypeOf,h=Object.prototype.hasOwnProperty,v=function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,i=u(d(t));try{var a=function(){var i=o.value;h.call(e,i)||i===n||l(e,i,{get:function(){return t[i]},enumerable:!(r=f(t,i))||r.enumerable})};for(i.s();!(o=i.n()).done;)a()}catch(s){i.e(s)}finally{i.f()}}return e},g={};!function(e,t){for(var n in t)l(e,n,{get:t[n],enumerable:!0})}(g,{TextLabel:function(){return P}}),e.exports=(r=g,v(l({},"__esModule",{value:!0}),r));var y=n(44414),m=function(e,t,n){return n=null!=e?c(p(e)):{},v(!t&&e&&e.__esModule?n:l(n,"default",{value:e,enumerable:!0}),e)}(n(9950)),b=n(63434),w=n(3376),S=n(65483),x=n(56940),P=m.default.memo((function(e){var t=e.shapeId,n=e.type,r=e.text,u=e.labelColor,c=e.font,l=e.fontSize,f=e.lineHeight,d=e.align,p=e.verticalAlign,h=e.wrap,v=e.isSelected,g=e.padding,P=void 0===g?0:g,O=e.onKeyDown,k=e.classNamePrefix,_=e.style,j=e.textWidth,I=e.textHeight,T=(0,x.useEditableText)(t,n,r),E=T.rInput,C=T.isEmpty,M=T.isEditing,A=T.isEditingAnything,D=a(T,s),R=(0,m.useState)(r),N=i(R,2),L=N[0],U=N[1];(0,m.useEffect)((function(){M||U(r)}),[M,r]);var F=w.TextHelpers.normalizeTextForDom(r),B=F.length>0,V=(0,S.isLegacyAlign)(d);if(!M&&!B)return null;var z=k||"tl-text";return(0,y.jsx)("div",{className:"".concat(z,"-label tl-text-wrapper"),"data-font":c,"data-align":d,"data-hastext":!C,"data-isediting":M,"data-iseditinganything":A,"data-textwrap":!!h,"data-isselected":v,style:o({justifyContent:"middle"===d||V?"center":d,alignItems:"middle"===p?"center":p,padding:P},_),children:(0,y.jsxs)("div",{className:"".concat(z,"-label__inner tl-text-content__wrapper"),style:{fontSize:l,lineHeight:Math.floor(l*f)+"px",minHeight:Math.floor(l*f)+"px",minWidth:Math.ceil(j||0),color:u,width:j?Math.ceil(j):void 0,height:I?Math.ceil(I):void 0},children:[(0,y.jsx)("div",{className:"".concat(z," tl-text tl-text-content"),dir:"auto",children:F.split("\n").map((function(e,t){return(0,y.jsx)("div",{dir:"auto",children:e},t)}))}),(A||v)&&(0,y.jsx)(b.TextArea,o(o({ref:E,text:r,isEditing:M},D),{},{handleKeyDown:null!==O&&void 0!==O?O:D.handleKeyDown}),L)]})})}))},38147:function(e,t,n){"use strict";var r,o=n(50883).default,i=Object.defineProperty,a=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,c={};!function(e,t){for(var n in t)i(e,n,{get:t[n],enumerable:!0})}(c,{createTextJsxFromSpans:function(){return d}}),e.exports=(r=c,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var c,l=o(u(t));try{var f=function(){var o=c.value;s.call(e,o)||o===n||i(e,o,{get:function(){return t[o]},enumerable:!(r=a(t,o))||r.enumerable})};for(l.s();!(c=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(i({},"__esModule",{value:!0}),r));var l=n(44414),f=n(57777);function d(e,t,n){var r,i,a=n.padding,u=void 0===a?0:a;if(0===t.length)return null;var s,c=f.Box.From(t[0].box),d=o(t);try{for(d.s();!(s=d.n()).done;){var p=s.value.box;c.union(p)}}catch(O){d.e(O)}finally{d.f()}var h,v,g=u+(null!==(r=n.offsetX)&&void 0!==r?r:0),y=(null!==(i=n.offsetY)&&void 0!==i?i:0)+n.fontSize/2+("start"===n.verticalTextAlign?u:"end"===n.verticalTextAlign?n.height-u-c.height:(Math.ceil(n.height)-c.height)/2),m=null,b=[],w=o(t);try{for(w.s();!(h=w.n()).done;){var S=h.value,x=S.text,P=S.box;null!==m&&P.y>m&&b.push((0,l.jsx)("tspan",{alignmentBaseline:"mathematical",x:g,y:P.y+y,children:"\n"},b.length)),b.push((0,l.jsx)("tspan",{alignmentBaseline:"mathematical",x:P.x+g,y:P.y+y,unicodeBidi:"plaintext",children:(v=x,v.replace(/\s/g,"\xa0"))},b.length)),m=P.y}}catch(O){w.e(O)}finally{w.f()}return(0,l.jsx)("text",{fontSize:n.fontSize,fontFamily:n.fontFamily,fontStyle:n.fontStyle,fontWeight:n.fontWeight,dominantBaseline:"mathematical",alignmentBaseline:"mathematical",stroke:n.stroke,strokeWidth:n.strokeWidth,fill:n.fill,children:b})}},92965:function(e,t,n){"use strict";var r,o=n(50883).default,i=Object.defineProperty,a=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,c={};!function(e,t){for(var n in t)i(e,n,{get:t[n],enumerable:!0})}(c,{ARROW_LABEL_FONT_SIZES:function(){return h},ARROW_LABEL_PADDING:function(){return y},FONT_FAMILIES:function(){return v},FONT_SIZES:function(){return d},LABEL_FONT_SIZES:function(){return p},LABEL_PADDING:function(){return m},LABEL_TO_ARROW_PADDING:function(){return g},STROKE_SIZES:function(){return f},TEXT_PROPS:function(){return l}}),e.exports=(r=c,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var c,l=o(u(t));try{var f=function(){var o=c.value;s.call(e,o)||o===n||i(e,o,{get:function(){return t[o]},enumerable:!(r=a(t,o))||r.enumerable})};for(l.s();!(c=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(i({},"__esModule",{value:!0}),r));var l={lineHeight:1.35,fontWeight:"normal",fontVariant:"normal",fontStyle:"normal",padding:"0px"},f={s:2,m:3.5,l:5,xl:10},d={s:18,m:24,l:36,xl:44},p={s:18,m:22,l:26,xl:32},h={s:18,m:20,l:24,xl:28},v={draw:"var(--tl-font-draw)",sans:"var(--tl-font-sans)",serif:"var(--tl-font-serif)",mono:"var(--tl-font-mono)"},g=20,y=4.25,m=16},57856:function(e,t,n){"use strict";var r,o=n(85715).default,i=n(4633).default,a=n(29293).default,u=n(50883).default,s=Object.defineProperty,c=Object.getOwnPropertyDescriptor,l=Object.getOwnPropertyNames,f=Object.prototype.hasOwnProperty,d={};!function(e,t){for(var n in t)s(e,n,{get:t[n],enumerable:!0})}(d,{getFillDefForCanvas:function(){return S},getFillDefForExport:function(){return b},getFontDefForExport:function(){return y},useGetHashPatternZoomName:function(){return j}}),e.exports=(r=d,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,i=u(l(t));try{var a=function(){var i=o.value;f.call(e,i)||i===n||s(e,i,{get:function(){return t[i]},enumerable:!(r=c(t,i))||r.enumerable})};for(i.s();!(o=i.n()).done;)a()}catch(d){i.e(d)}finally{i.f()}}return e}(s({},"__esModule",{value:!0}),r));var p=n(44414),h=n(57777),v=n(9950),g=n(38546);function y(e){return{key:"".concat(h.DefaultFontStyle.id,":").concat(e),getElement:function(){return a(i().mark((function t(){var n,r,o,a,u,s;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=m(e)){t.next=3;break}return t.abrupt("return",null);case 3:return r=n.url,o=n.fontFaceRule,t.next=6,(0,h.fetch)(r);case 6:return t.next=8,t.sent.blob();case 8:return a=t.sent,t.next=11,h.FileHelpers.blobToDataUrl(a);case 11:return u=t.sent,s=o.replace(r,u),t.abrupt("return",(0,p.jsx)("style",{children:s}));case 14:case"end":return t.stop()}}),t)})))()}}}function m(e){var t,n=h.DefaultFontFamilies[e],r=u(document.fonts);try{for(r.s();!(t=r.n()).done;){var o=t.value;if(n.includes(o.family)&&"$$_url"in o&&"string"===typeof o.$$_url&&"$$_fontface"in o&&"string"===typeof o.$$_fontface)return{url:o.$$_url,fontFaceRule:o.$$_fontface}}}catch(i){r.e(i)}finally{r.f()}return null}function b(e){return{key:"".concat(h.DefaultFontStyle.id,":").concat(e),getElement:function(){return a(i().mark((function t(){return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("pattern"===e){t.next=2;break}return t.abrupt("return",null);case 2:return t.abrupt("return",(0,p.jsx)(w,{}));case 3:case"end":return t.stop()}}),t)})))()}}}function w(){var e=j(),t=(0,h.useUniqueSafeId)(),n=(0,g.useDefaultColorTheme)(),r=8/12;return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)("mask",{id:t,children:[(0,p.jsx)("rect",{x:"0",y:"0",width:"8",height:"8",fill:"white"}),(0,p.jsxs)("g",{strokeLinecap:"round",stroke:"black",children:[(0,p.jsx)("line",{x1:1*r,y1:2,x2:2,y2:1*r}),(0,p.jsx)("line",{x1:5*r,y1:7*r,x2:7*r,y2:5*r}),(0,p.jsx)("line",{x1:6,y1:11*r,x2:11*r,y2:6})]})]}),(0,p.jsx)("pattern",{id:e(1,n.id),width:"8",height:"8",patternUnits:"userSpaceOnUse",children:(0,p.jsx)("rect",{x:"0",y:"0",width:"8",height:"8",fill:n.solid,mask:"url(#".concat(t,")")})})]})}function S(){return{key:"".concat(h.DefaultFontStyle.id,":pattern"),component:E}}var x=8,P=function(e,t,n){return new Promise((function(r,o){var i=x*t*e,a=document.createElement("canvas");a.width=i,a.height=i;var u=a.getContext("2d");if(u){u.fillStyle=n?h.DefaultColorThemePalette.darkMode.solid:h.DefaultColorThemePalette.lightMode.solid,u.fillRect(0,0,i,i),u.globalCompositeOperation="destination-out",u.lineCap="round",u.lineWidth=1.25*t*e;var s=8/12,c=function(n){return n*t*e};u.beginPath(),u.moveTo(c(1*s),c(2)),u.lineTo(c(2),c(1*s)),u.moveTo(c(5*s),c(7*s)),u.lineTo(c(7*s),c(5*s)),u.moveTo(c(6),c(11*s)),u.lineTo(c(11*s),c(6)),u.stroke(),a.toBlob((function(e){!e||h.debugFlags.throwToBlob.get()?o():r(e)}))}}))},O=function(e,t){var n=document.createElement("canvas");n.width=e[0],n.height=e[1];var r=n.getContext("2d");return r?(t(r),n.toDataURL()):""},k=null;function _(e){return Math.ceil(Math.log2(Math.max(1,e)))}function j(){var e=(0,h.useSharedSafeId)("hash_pattern");return(0,v.useCallback)((function(t,n){var r=_(t);return(0,h.suffixSafeId)(e,"".concat(n,"_").concat(r))}),[e])}function I(e){for(var t=[],n=_(e),r=0;r<=n;r++)t.push(Math.pow(2,r));return t}function T(e){var t=(k||(k={white:O([1,1],(function(e){e.fillStyle="#f8f9fa",e.fillRect(0,0,1,1)})),black:O([1,1],(function(e){e.fillStyle="#212529",e.fillRect(0,0,1,1)}))}),k);return I(e).flatMap((function(e){return[{zoom:e,url:t.white,theme:"light"},{zoom:e,url:t.black,theme:"dark"}]}))}function E(){var e=(0,h.useEditor)(),t=(0,v.useRef)(null),n=function(){var e=(0,h.useEditor)(),t=(0,h.useValue)("devicePixelRatio",(function(){return e.getInstanceState().devicePixelRatio}),[e]),n=(0,h.useValue)("maxZoom",(function(){return Math.ceil((0,h.last)(e.getCameraOptions().zoomSteps))}),[e]),r=(0,v.useState)(!1),i=o(r,2),a=i[0],s=i[1],c=(0,v.useState)((function(){return T(n)})),l=o(c,2),f=l[0],d=l[1],g=j();return(0,v.useEffect)((function(){var e=Promise.all(I(n).flatMap((function(e){return[P(t,e,!1).then((function(t){return{zoom:e,theme:"light",url:URL.createObjectURL(t)}})),P(t,e,!0).then((function(t){return{zoom:e,theme:"dark",url:URL.createObjectURL(t)}}))]}))),r=!1;return e.then((function(e){r||(d(e),s(!0))})),function(){r=!0,s(!1),e.then((function(e){var t,n=u(e);try{for(n.s();!(t=n.n()).done;){var r=t.value.url;URL.revokeObjectURL(r)}}catch(o){n.e(o)}finally{n.f()}}))}}),[t,n]),{defs:(0,p.jsx)(p.Fragment,{children:f.map((function(e){var t=g(e.zoom,e.theme);return(0,p.jsx)("pattern",{id:t,width:x,height:x,patternUnits:"userSpaceOnUse",children:(0,p.jsx)("image",{href:e.url,width:x,height:x})},t)}))}),isReady:a}}(),r=n.defs,i=n.isReady;return(0,v.useEffect)((function(){if(i&&h.tlenv.isSafari){var n=C(t.current);n&&e.timers.requestAnimationFrame((function(){n.style.display="none",e.timers.requestAnimationFrame((function(){n.style.display=""}))}))}}),[e,i]),(0,p.jsx)("g",{ref:t,"data-testid":i?"ready-pattern-fill-defs":void 0,children:r})}function C(e){return e.classList.contains("tl-html-layer")?e:e.parentElement?C(e.parentElement):null}},29738:function(e,t,n){"use strict";var r,o=n(50883).default,i=Object.defineProperty,a=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,c={};!function(e,t){for(var n in t)i(e,n,{get:t[n],enumerable:!0})}(c,{getStroke:function(){return p}}),e.exports=(r=c,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var c,l=o(u(t));try{var f=function(){var o=c.value;s.call(e,o)||o===n||i(e,o,{get:function(){return t[o]},enumerable:!(r=a(t,o))||r.enumerable})};for(l.s();!(c=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(i({},"__esModule",{value:!0}),r));var l=n(59645),f=n(83237),d=n(91221);function p(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,l.getStrokeOutlinePoints)((0,d.setStrokePointRadii)((0,f.getStrokePoints)(e,t),t),t)}},59645:function(e,t,n){"use strict";var r,o=n(50883).default,i=Object.defineProperty,a=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,c={};!function(e,t){for(var n in t)i(e,n,{get:t[n],enumerable:!0})}(c,{getStrokeOutlinePoints:function(){return p},getStrokeOutlineTracks:function(){return d}}),e.exports=(r=c,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var c,l=o(u(t));try{var f=function(){var o=c.value;s.call(e,o)||o===n||i(e,o,{get:function(){return t[o]},enumerable:!(r=a(t,o))||r.enumerable})};for(l.s();!(c=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(i({},"__esModule",{value:!0}),r));var l=n(57777),f=Math.PI+1e-4;function d(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.size,r=void 0===n?16:n,o=t.smoothing,i=void 0===o?.5:o;if(0===e.length||r<=0)return{left:[],right:[]};for(var a,u=e[0],s=e[e.length-1],c=s.runningLength,d=Math.pow(r*i,2),p=[],h=[],v=e[0].vector,g=e[0].point,y=g,m=g,b=y,w=!1,S=0;S<e.length;S++){a=e[S];var x=e[S],P=x.point,O=x.vector,k=a.vector.dpr(v),_=(S<e.length-1?e[S+1]:e[S]).vector,j=S<e.length-1?_.dpr(a.vector):1,I=null!==j&&j<.2;if(k<0&&!w||I){if(j>-.62&&c-a.runningLength>a.radius){var T=v.clone().mul(a.radius);v.clone().cpr(_)<0?(m=l.Vec.Add(P,T),b=l.Vec.Sub(P,T)):(m=l.Vec.Sub(P,T),b=l.Vec.Add(P,T)),p.push(m),h.push(b)}else for(var E=v.clone().mul(a.radius).per(),C=l.Vec.Sub(a.input,E),M=1/13,A=0;A<1;A+=M)m=l.Vec.RotWith(C,a.input,f*A),p.push(m),b=l.Vec.RotWith(C,a.input,f+f*-A),h.push(b);g=m,y=b,I&&(w=!0)}else if(w=!1,a!==u&&a!==s){var D=l.Vec.Lrp(_,O,j).per().mul(a.radius);m=l.Vec.Sub(P,D),(S<=1||l.Vec.Dist2(g,m)>d)&&(p.push(m),g=m),b=l.Vec.Add(P,D),(S<=1||l.Vec.Dist2(y,b)>d)&&(h.push(b),y=b),v=O}else{var R=l.Vec.Per(O).mul(a.radius);p.push(l.Vec.Sub(P,R)),h.push(l.Vec.Add(P,R))}}return{left:p,right:h}}function p(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.size,r=void 0===n?16:n,o=t.start,i=void 0===o?{}:o,a=t.end,u=void 0===a?{}:a,s=t.last,c=void 0!==s&&s,p=i.cap,h=void 0===p||p,v=u.cap,g=void 0===v||v;if(0===e.length||r<=0)return[];var y=e[0],m=e[e.length-1],b=m.runningLength,w=!1===i.taper?0:!0===i.taper?Math.max(r,b):i.taper,S=!1===u.taper?0:!0===u.taper?Math.max(r,b):u.taper,x=d(e,t),P=x.left,O=x.right,k=y.point,_=e.length>1?e[e.length-1].point:l.Vec.AddXY(y.point,1,1);if(1===e.length&&(!w&&!S||c)){for(var j=l.Vec.Add(k,l.Vec.Sub(k,_).uni().per().mul(-y.radius)),I=[],T=1/13,E=T;E<=1;E+=T)I.push(l.Vec.RotWith(j,k,2*f*E));return I}var C=[];if(w||S&&1===e.length);else if(h)for(var M=1/8,A=M;A<=1;A+=M){var D=l.Vec.RotWith(O[0],k,f*A);C.push(D)}else{var R=l.Vec.Sub(P[0],O[0]),N=l.Vec.Mul(R,.5),L=l.Vec.Mul(R,.51);C.push(l.Vec.Sub(k,N),l.Vec.Sub(k,L),l.Vec.Add(k,L),l.Vec.Add(k,N))}var U=[],F=m.vector.clone().per().neg();if(S||w&&1===e.length)U.push(_);else if(g)for(var B=l.Vec.Add(_,l.Vec.Mul(F,m.radius)),V=1/29,z=V;z<1;z+=V)U.push(l.Vec.RotWith(B,_,3*f*z));else U.push(l.Vec.Add(_,l.Vec.Mul(F,m.radius)),l.Vec.Add(_,l.Vec.Mul(F,.99*m.radius)),l.Vec.Sub(_,l.Vec.Mul(F,.99*m.radius)),l.Vec.Sub(_,l.Vec.Mul(F,m.radius)));return P.concat(U,O.reverse(),C)}},83237:function(e,t,n){"use strict";var r,o=n(41132).default,i=n(50883).default,a=Object.defineProperty,u=Object.getOwnPropertyDescriptor,s=Object.getOwnPropertyNames,c=Object.prototype.hasOwnProperty,l={};!function(e,t){for(var n in t)a(e,n,{get:t[n],enumerable:!0})}(l,{getStrokePoints:function(){return h}}),e.exports=(r=l,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,l=i(s(t));try{var f=function(){var i=o.value;c.call(e,i)||i===n||a(e,i,{get:function(){return t[i]},enumerable:!(r=u(t,i))||r.enumerable})};for(l.s();!(o=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(a({},"__esModule",{value:!0}),r));var f=n(57777),d=.025,p=.01;function h(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.streamline,i=void 0===r?.5:r,a=n.size,u=void 0===a?16:a,s=n.simulatePressure,c=void 0!==s&&s;if(0===e.length)return[];var l=.15+.85*(1-i),h=e.map(f.Vec.From),v=0;if(!c)for(var g=h[0];g&&!(g.z>=d);)h.shift(),g=h[0];if(!c)for(var y=h[h.length-1];y&&!(y.z>=p);)h.pop(),y=h[h.length-1];if(0===h.length)return[{point:f.Vec.From(e[0]),input:f.Vec.From(e[0]),pressure:c?.5:.15,vector:new f.Vec(1,1),distance:0,runningLength:0,radius:1}];for(var m=h[1];m&&!(f.Vec.Dist2(m,h[0])>Math.pow(u/3,2));)h[0].z=Math.max(h[0].z,m.z),h.splice(1,1),m=h[1];var b=h.pop();for(m=h[h.length-1];m&&!(f.Vec.Dist2(m,b)>Math.pow(u/3,2));)h.pop(),m=h[h.length-1],v++;h.push(b);var w=n.last||!n.simulatePressure||h.length>1&&f.Vec.Dist2(h[h.length-1],h[h.length-2])<Math.pow(u,2)||v>0;if(2===h.length&&n.simulatePressure){var S=h[1];h=h.slice(0,-1);for(var x=1;x<5;x++){var P=f.Vec.Lrp(h[0],S,x/4);P.z=(h[0].z+(S.z-h[0].z))*x/4,h.push(P)}}var O,k,_=[{point:h[0],input:h[0],pressure:c?.5:h[0].z,vector:new f.Vec(1,1),distance:0,runningLength:0,radius:1}],j=0,I=_[0];w&&i>0&&h.push(h[h.length-1].clone());for(var T=1,E=h.length;T<E;T++)O=!l||n.last&&T===E-1?h[T].clone():h[T].clone().lrp(I.point,1-l),I.point.equals(O)||(j+=k=f.Vec.Dist(O,I.point),T<4&&j<u||(I={input:h[T],point:O,pressure:c?.5:h[T].z,vector:f.Vec.Sub(I.point,O).uni(),distance:k,runningLength:j,radius:1},_.push(I)));if(null!==(t=_[1])&&void 0!==t&&t.vector&&(_[0].vector=_[1].vector.clone()),j<1){var C=Math.max.apply(Math,[.5].concat(o(_.map((function(e){return e.pressure})))));_.forEach((function(e){return e.pressure=C}))}return _}},91221:function(e,t,n){"use strict";var r,o=n(50883).default,i=Object.defineProperty,a=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,c={};!function(e,t){for(var n in t)i(e,n,{get:t[n],enumerable:!0})}(c,{setStrokePointRadii:function(){return p}}),e.exports=(r=c,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var c,l=o(u(t));try{var f=function(){var o=c.value;s.call(e,o)||o===n||i(e,o,{get:function(){return t[o]},enumerable:!(r=a(t,o))||r.enumerable})};for(l.s();!(c=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(i({},"__esModule",{value:!0}),r));var l=n(57777),f=Math.min,d=.275;function p(e,t){var n,r,o=t.size,i=void 0===o?16:o,a=t.thinning,u=void 0===a?.5:a,s=t.simulatePressure,c=void 0===s||s,p=t.easing,h=void 0===p?function(e){return e}:p,v=t.start,g=void 0===v?{}:v,y=t.end,m=void 0===y?{}:y,b=g.easing,w=void 0===b?l.EASINGS.easeOutQuad:b,S=m.easing,x=void 0===S?l.EASINGS.easeOutCubic:S,P=e[e.length-1].runningLength,O=e[0].pressure;if(!c&&P<i){var k=e.reduce((function(e,t){return Math.max(e,t.pressure)}),.5);return e.forEach((function(e){e.pressure=k,e.radius=i*h(.5-u*(.5-e.pressure))})),e}for(var _,j=0,I=e.length;j<I&&!((r=e[j]).runningLength>5*i);j++){var T=f(1,r.distance/i);if(c){var E=f(1,1-T);_=f(1,O+T*d*(E-O))}else _=f(1,O+.5*(r.pressure-O));O+=.5*(_-O)}for(var C=0;C<e.length;C++){if(r=e[C],u){var M=r.pressure,A=f(1,r.distance/i);if(c){var D=f(1,1-A);M=f(1,O+A*d*(D-O))}else M=f(1,O+A*d*(M-O));r.radius=i*h(.5-u*(.5-M)),O=M}else r.radius=i/2;void 0===n&&(n=r.radius)}var R=!1===g.taper?0:!0===g.taper?Math.max(i,P):g.taper,N=!1===m.taper?0:!0===m.taper?Math.max(i,P):m.taper;if(R||N)for(var L=0;L<e.length;L++){var U=(r=e[L]).runningLength,F=U<R?w(U/R):1,B=P-U<N?x((P-U)/N):1;r.radius=Math.max(.01,r.radius*Math.min(F,B))}return e}},17048:function(e,t,n){"use strict";var r,o=n(50883).default,i=Object.defineProperty,a=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,c={};!function(e,t){for(var n in t)i(e,n,{get:t[n],enumerable:!0})}(c,{getSvgPathFromStrokePoints:function(){return f}}),e.exports=(r=c,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var c,l=o(u(t));try{var f=function(){var o=c.value;s.call(e,o)||o===n||i(e,o,{get:function(){return t[o]},enumerable:!(r=a(t,o))||r.enumerable})};for(l.s();!(c=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(i({},"__esModule",{value:!0}),r));var l=n(57777);function f(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e.length;if(n<2)return"";var r=e[0].point,o=e[1].point;if(2===n)return"M".concat((0,l.precise)(r),"L").concat((0,l.precise)(o));for(var i="",a=2,u=n-1;a<u;a++)r=e[a].point,o=e[a+1].point,i+=(0,l.average)(r,o);return t?"M".concat((0,l.average)(e[0].point,e[1].point),"Q").concat((0,l.precise)(e[1].point)).concat((0,l.average)(e[1].point,e[2].point),"T").concat(i).concat((0,l.average)(e[n-1].point,e[0].point)).concat((0,l.average)(e[0].point,e[1].point),"Z"):"M".concat((0,l.precise)(e[0].point),"Q").concat((0,l.precise)(e[1].point)).concat((0,l.average)(e[1].point,e[2].point)).concat(e.length>3?"T":"").concat(i,"L").concat((0,l.precise)(e[n-1].point))}},82362:function(e,t,n){"use strict";var r,o=n(12897).default,i=n(50883).default,a=Object.defineProperty,u=Object.getOwnPropertyDescriptor,s=Object.getOwnPropertyNames,c=Object.prototype.hasOwnProperty,l={};!function(e,t){for(var n in t)a(e,n,{get:t[n],enumerable:!0})}(l,{svgInk:function(){return v}}),e.exports=(r=l,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,l=i(s(t));try{var f=function(){var i=o.value;c.call(e,i)||i===n||a(e,i,{get:function(){return t[i]},enumerable:!(r=u(t,i))||r.enumerable})};for(l.s();!(o=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(a({},"__esModule",{value:!0}),r));var f=n(57777),d=n(59645),p=n(83237),h=n(91221);function v(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.start,r=void 0===n?{}:n,a=t.end,u=void 0===a?{}:a,s=r.cap,c=void 0===s||s,l=u.cap,d=void 0===l||l;(0,f.assert)(!r.taper&&!u.taper,"cap taper not supported here"),(0,f.assert)(!r.easing&&!u.easing,"cap easing not supported here"),(0,f.assert)(c&&d,"cap must be true");var v=(0,p.getStrokePoints)(e,t);(0,h.setStrokePointRadii)(v,t);var m,b=function(e){if(e.length<=2)return[e];for(var t,n,r,i,a,u=[],s=[e[0]],c=f.Vec.Sub(e[1].point,e[0].point).uni(),l=1,d=e.length;l<d-1;l++)if(r=e[l-1],i=e[l],a=e[l+1],t=f.Vec.Sub(a.point,i.point).uni(),n=f.Vec.Dpr(c,t),c=t,n<-.8){var p=o(o({},i),{},{point:i.input});s.push(p),u.push(g(s)),s=[p]}else s.push(i),n>.7||(f.Vec.Dist2(r.point,i.point)+f.Vec.Dist2(i.point,a.point))/Math.pow((r.radius+i.radius+a.radius)/3,2)<1.5&&(s.push(i),u.push(g(s)),s=[i]);return s.push(e[e.length-1]),u.push(g(s)),u}(v),w="",S=i(b);try{for(S.s();!(m=S.n()).done;){w+=y(m.value,t)}}catch(x){S.e(x)}finally{S.f()}return w}function g(e){for(var t,n=e[0];e.length>2&&(t=e[1],f.Vec.Dist2(n.point,t.point)<Math.pow((n.radius+t.radius)/2*.5,2));)e.splice(1,1);for(var r,i=e[e.length-1];e.length>2&&(r=e[e.length-2],f.Vec.Dist2(i.point,r.point)<Math.pow((i.radius+r.radius)/2*.5,2));)e.splice(e.length-2,1);return e.length>1&&(e[0]=o(o({},e[0]),{},{vector:f.Vec.Sub(e[0].point,e[1].point).uni()}),e[e.length-1]=o(o({},e[e.length-1]),{},{vector:f.Vec.Sub(e[e.length-2].point,e[e.length-1].point).uni()})),e}function y(e){var t,n,r,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(0===e.length)return"";if(1===e.length)return t=e[0].point.x,n=e[0].point.y,r=e[0].radius,"M "+t+" "+n+" m -"+r+", 0 a "+r+","+r+" 0 1,1 "+2*r+",0 a "+r+","+r+" 0 1,1 -"+2*r+",0";var i=(0,d.getStrokeOutlineTracks)(e,o),a=i.left,u=i.right;u.reverse();for(var s="M".concat((0,f.precise)(a[0]),"T"),c=1;c<a.length;c++)s+=(0,f.average)(a[c-1],a[c]);var l=e[e.length-1],p=l.radius,h=l.vector.clone().per().neg(),v=f.Vec.Add(l.point,f.Vec.Mul(h,p)),g=f.Vec.Add(l.point,f.Vec.Mul(h,-p));s+="".concat((0,f.precise)(v),"A").concat((0,f.toDomPrecision)(p),",").concat((0,f.toDomPrecision)(p)," 0 0 1 ").concat((0,f.precise)(g),"T");for(var y=1;y<u.length;y++)s+=(0,f.average)(u[y-1],u[y]);var m=e[0],b=m.radius,w=m.vector.clone().per(),S=f.Vec.Add(m.point,f.Vec.Mul(w,b)),x=f.Vec.Add(m.point,f.Vec.Mul(w,-b));return s+="".concat((0,f.precise)(S),"A").concat((0,f.toDomPrecision)(b),",").concat((0,f.toDomPrecision)(b)," 0 0 1 ").concat((0,f.precise)(x),"Z")}},70075:function(e,t,n){"use strict";var r,o=n(4633).default,i=n(29293).default,a=n(50883).default,u=Object.create,s=Object.defineProperty,c=Object.getOwnPropertyDescriptor,l=Object.getOwnPropertyNames,f=Object.getPrototypeOf,d=Object.prototype.hasOwnProperty,p=function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,i=a(l(t));try{var u=function(){var i=o.value;d.call(e,i)||i===n||s(e,i,{get:function(){return t[i]},enumerable:!(r=c(t,i))||r.enumerable})};for(i.s();!(o=i.n()).done;)u()}catch(f){i.e(f)}finally{i.f()}}return e},h={};!function(e,t){for(var n in t)s(e,n,{get:t[n],enumerable:!0})}(h,{clampToBrowserMaxCanvasSize:function(){return b}}),e.exports=(r=h,p(s({},"__esModule",{value:!0}),r));var v=function(e,t,n){return n=null!=e?u(f(e)):{},p(!t&&e&&e.__esModule?n:s(n,"default",{value:e,enumerable:!0}),e)}(n(73027)),g=null;function y(){return g||(g=function(){return m.apply(this,arguments)}()),g}function m(){return(m=i(o().mark((function e(){var t,n,r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.default.maxWidth({usePromise:!0});case 2:return t=e.sent,e.next=5,v.default.maxHeight({usePromise:!0});case 5:return n=e.sent,e.next=8,v.default.maxArea({usePromise:!0});case 8:return r=e.sent,e.abrupt("return",{maxWidth:t.width,maxHeight:n.height,maxArea:r.width*r.height});case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function b(e,t){return w.apply(this,arguments)}function w(){return(w=i(o().mark((function e(t,n){var r,i,a,u,s,c;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t<=8192&&n<=8192&&t*n<=16777216)){e.next=2;break}return e.abrupt("return",[t,n]);case 2:return e.next=4,y();case 4:return r=e.sent,i=r.maxWidth,a=r.maxHeight,u=r.maxArea,s=t/n,t>i&&(n=(t=i)/s),n>a&&(t=(n=a)*s),t*n>u&&(c=Math.sqrt(u/(t*n)),t*=c,n*=c),e.abrupt("return",[t,n]);case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},49750:function(e,t,n){"use strict";var r,o=n(50883).default,i=Object.defineProperty,a=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,c={};!function(e,t){for(var n in t)i(e,n,{get:t[n],enumerable:!0})}(c,{LINK_ICON:function(){return l}}),e.exports=(r=c,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var c,l=o(u(t));try{var f=function(){var o=c.value;s.call(e,o)||o===n||i(e,o,{get:function(){return t[o]},enumerable:!(r=a(t,o))||r.enumerable})};for(l.s();!(c=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(i({},"__esModule",{value:!0}),r));var l="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='30' height='30' fill='none'%3E%3Cpath stroke='%23000' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M13 5H7a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6M19 5h6m0 0v6m0-6L13 17'/%3E%3C/svg%3E"},28040:function(e,t,n){"use strict";var r,o=n(41132).default,i=n(50883).default,a=Object.defineProperty,u=Object.getOwnPropertyDescriptor,s=Object.getOwnPropertyNames,c=Object.prototype.hasOwnProperty,l={};!function(e,t){for(var n in t)a(e,n,{get:t[n],enumerable:!0})}(l,{interpolateSegments:function(){return d}}),e.exports=(r=l,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,l=i(s(t));try{var f=function(){var i=o.value;c.call(e,i)||i===n||a(e,i,{get:function(){return t[i]},enumerable:!(r=u(t,i))||r.enumerable})};for(l.s();!(o=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(a({},"__esModule",{value:!0}),r));var f=n(57777),d=function(e,t,n){var r=[],i=[];e.forEach((function(e){return r.push.apply(r,o(e.points))})),t.forEach((function(e){return i.push.apply(i,o(e.points))}));for(var a=Math.max(r.length,i.length),u=[],s=[],c=0;c<a;c++)u.push(r[c]||r[r.length-1]),s.push(i[c]||i[i.length-1]);return[{type:"free",points:u.map((function(e,t){var r=.5;return void 0!==s[t].z&&void 0!==e.z&&(r=(0,f.lerp)(e.z,s[t].z,n)),{x:(0,f.lerp)(e.x,s[t].x,n),y:(0,f.lerp)(e.y,s[t].y,n),z:r}}))}]}},65483:function(e,t,n){"use strict";var r,o=n(50883).default,i=Object.defineProperty,a=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,c={};!function(e,t){for(var n in t)i(e,n,{get:t[n],enumerable:!0})}(c,{getLegacyOffsetX:function(){return f},isLegacyAlign:function(){return d}}),e.exports=(r=c,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var c,l=o(u(t));try{var f=function(){var o=c.value;s.call(e,o)||o===n||i(e,o,{get:function(){return t[o]},enumerable:!(r=a(t,o))||r.enumerable})};for(l.s();!(c=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(i({},"__esModule",{value:!0}),r));var l=n(57777);function f(e,t,n,r){if(("start-legacy"===e||"end-legacy"===e)&&0!==n.length){var i,a=l.Box.From(n[0].box),u=o(n);try{for(u.s();!(i=u.n()).done;){var s=i.value.box;a.union(s)}}catch(c){u.e(c)}finally{u.f()}if("start-legacy"===e)return(r-2*t-a.width)/2;if("end-legacy"===e)return-(r-2*t-a.width)/2}}function d(e){return"start-legacy"===e||"middle-legacy"===e||"end-legacy"===e}},93256:function(e,t,n){"use strict";var r,o=n(50883).default,i=Object.defineProperty,a=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,c={};!function(e,t){for(var n in t)i(e,n,{get:t[n],enumerable:!0})}(c,{resizeScaled:function(){return f}}),e.exports=(r=c,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var c,l=o(u(t));try{var f=function(){var o=c.value;s.call(e,o)||o===n||i(e,o,{get:function(){return t[o]},enumerable:!(r=a(t,o))||r.enumerable})};for(l.s();!(c=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(i({},"__esModule",{value:!0}),r));var l=n(57777);function f(e,t){var n=t.initialBounds,r=t.scaleX,o=t.scaleY,i=t.newPoint,a=Math.max(.01,Math.min(Math.abs(r),Math.abs(o))),u=new l.Vec(0,0);r<0&&(u.x=-n.width*a),o<0&&(u.y=-n.height*a);var s=l.Vec.Add(i,u.rot(e.rotation));return{x:s.x,y:s.y,props:{scale:a*e.props.scale}}}},65570:function(e,t,n){"use strict";var r,o=n(50883).default,i=Object.defineProperty,a=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,c={};!function(e,t){for(var n in t)i(e,n,{get:t[n],enumerable:!0})}(c,{getRotatedBoxShadow:function(){return d}}),e.exports=(r=c,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var c,l=o(u(t));try{var f=function(){var o=c.value;s.call(e,o)||o===n||i(e,o,{get:function(){return t[o]},enumerable:!(r=a(t,o))||r.enumerable})};for(l.s();!(c=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(i({},"__esModule",{value:!0}),r));var l=n(57777),f=[{offsetX:0,offsetY:2,blur:4,spread:0,color:"#00000029"},{offsetX:0,offsetY:3,blur:6,spread:0,color:"#0000001f"}];function d(e){return f.map((function(t){var n=t.offsetX,r=t.offsetY,o=t.blur,i=t.spread,a=t.color,u=new l.Vec(n,r).rot(-e),s=u.x,c=u.y;return"".concat(s,"px ").concat(c,"px ").concat(o,"px ").concat(i,"px ").concat(a)})).join(", ")}},88100:function(e,t,n){"use strict";var r,o=n(85715).default,i=n(50883).default,a=Object.defineProperty,u=Object.getOwnPropertyDescriptor,s=Object.getOwnPropertyNames,c=Object.prototype.hasOwnProperty,l={};!function(e,t){for(var n in t)a(e,n,{get:t[n],enumerable:!0})}(l,{useColorSpace:function(){return p}}),e.exports=(r=l,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,l=i(s(t));try{var f=function(){var i=o.value;c.call(e,i)||i===n||a(e,i,{get:function(){return t[i]},enumerable:!(r=u(t,i))||r.enumerable})};for(l.s();!(o=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(a({},"__esModule",{value:!0}),r));var f=n(57777),d=n(9950);function p(){var e=(0,d.useState)(!1),t=o(e,2),n=t[0],r=t[1];return(0,d.useEffect)((function(){var e=CSS.supports("color","color(display-p3 1 1 1)"),t=matchMedia("(color-gamut: p3)");r(e&&t.matches);var n=function(){return r(e&&t.matches)};return t.addEventListener("change",n),function(){return t.removeEventListener("change",n)}}),[]),(0,f.useValue)(f.debugFlags.forceSrgb)||!n?"srgb":"p3"}},38546:function(e,t,n){"use strict";var r,o=n(50883).default,i=Object.defineProperty,a=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,c={};!function(e,t){for(var n in t)i(e,n,{get:t[n],enumerable:!0})}(c,{useDefaultColorTheme:function(){return f}}),e.exports=(r=c,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var c,l=o(u(t));try{var f=function(){var o=c.value;s.call(e,o)||o===n||i(e,o,{get:function(){return t[o]},enumerable:!(r=a(t,o))||r.enumerable})};for(l.s();!(c=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(i({},"__esModule",{value:!0}),r));var l=n(57777);function f(){return(0,l.getDefaultColorTheme)({isDarkMode:(0,l.useIsDarkMode)()})}},56940:function(e,t,n){"use strict";var r,o=n(12897).default,i=n(50883).default,a=Object.defineProperty,u=Object.getOwnPropertyDescriptor,s=Object.getOwnPropertyNames,c=Object.prototype.hasOwnProperty,l={};!function(e,t){for(var n in t)a(e,n,{get:t[n],enumerable:!0})}(l,{useEditableText:function(){return h}}),e.exports=(r=l,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,l=i(s(t));try{var f=function(){var i=o.value;c.call(e,i)||i===n||a(e,i,{get:function(){return t[i]},enumerable:!(r=u(t,i))||r.enumerable})};for(l.s();!(o=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(a({},"__esModule",{value:!0}),r));var f=n(57777),d=n(9950),p=n(3376);function h(e,t,n){var r=(0,f.useEditor)(),i=(0,d.useRef)(null),a=(0,f.useValue)("isEditing",(function(){return r.getEditingShapeId()===e}),[r]),u=(0,f.useValue)("isEditingAnything",(function(){return!!r.getEditingShapeId()}),[r]);(0,d.useEffect)((function(){function t(t){var n;t.shapeId===e&&(null===(n=i.current)||void 0===n||n.select())}return r.on("select-all-text",t),function(){r.off("select-all-text",t)}}),[r,e,a]),(0,d.useEffect)((function(){if(a){var e,t,n,o;if(document.activeElement!==i.current)null===(e=i.current)||void 0===e||e.focus();if(r.getInstanceState().isCoarsePointer)null===(t=i.current)||void 0===t||t.select();if(f.tlenv.isSafari)null===(n=i.current)||void 0===n||n.blur(),null===(o=i.current)||void 0===o||o.focus()}}),[r,a]);var s=(0,d.useCallback)((function(t){if(r.getEditingShapeId()===e&&"Enter"===t.key)(t.ctrlKey||t.metaKey)&&r.complete()}),[r,e]),c=(0,d.useCallback)((function(n){if(r.getEditingShapeId()===e){var o=p.TextHelpers.normalizeText(n.currentTarget.value),i=o.replace(/\t/g,p.INDENT);if(i!==o){var a=n.currentTarget.selectionStart;n.currentTarget.value=i,n.currentTarget.selectionStart=a+(i.length-o.length),n.currentTarget.selectionEnd=a+(i.length-o.length),o=i}r.updateShape({id:e,type:t,props:{text:o}})}}),[r,e,t]),l=(0,d.useCallback)((function(t){r.dispatch(o(o({},(0,f.getPointerInfo)(t)),{},{type:"pointer",name:"pointer_down",target:"shape",shape:r.getShape(e)})),(0,f.stopEventPropagation)(t)}),[r,e]);return{rInput:i,handleFocus:f.noop,handleBlur:f.noop,handleKeyDown:s,handleChange:c,handleInputPointerDown:l,handleDoubleClick:f.stopEventPropagation,isEmpty:0===n.trim().length,isEditing:a,isEditingAnything:u}}},61622:function(e,t,n){"use strict";var r,o=n(12897).default,i=n(85715).default,a=n(50883).default,u=Object.defineProperty,s=Object.getOwnPropertyDescriptor,c=Object.getOwnPropertyNames,l=Object.prototype.hasOwnProperty,f={};!function(e,t){for(var n in t)u(e,n,{get:t[n],enumerable:!0})}(f,{useAsset:function(){return g},useImageOrVideoAsset:function(){return h}}),e.exports=(r=f,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,i=a(c(t));try{var f=function(){var i=o.value;l.call(e,i)||i===n||u(e,i,{get:function(){return t[i]},enumerable:!(r=s(t,i))||r.enumerable})};for(i.s();!(o=i.n()).done;)f()}catch(d){i.e(d)}finally{i.f()}}return e}(u({},"__esModule",{value:!0}),r));var d=n(57777),p=n(9950);function h(e){var t=e.shapeId,n=e.assetId,r=(0,d.useEditor)(),a=!!(0,d.useSvgExportContext)(),u=(0,d.useDelaySvgExport)(),s=(0,p.useMemo)((function(){return(0,d.debounce)(v,500)}),[]),c=(0,p.useState)((function(){var e;return{asset:n&&null!==(e=r.getAsset(n))&&void 0!==e?e:null,url:null}})),l=i(c,2),f=l[0],h=l[1],g=(0,p.useRef)(!1),y=(0,p.useRef)(null);return(0,p.useEffect)((function(){if(n){var e,i=!1,c=(0,d.react)("update state",(function(){if(a||!r.getCulledShapes().has(t)){var c=r.getAsset(n);if(c){var l=r.getShape(t);if(l){if(!c.props.src){var f=r.getTemporaryAssetPreview(c.id);if(f)return void(y.current!==f&&(y.current=f,h((function(e){return o(o({},e),{},{isPlaceholder:!0,url:f})})),u()))}var d=r.getZoomLevel()*(l.props.w/c.props.w);g.current?(s(r,n,d,a,(function(e){return p(c,e)})),e=s.cancel):v(r,n,d,a,(function(e){return p(c,e)}))}}}function p(e,t){i||y.current!==t&&(g.current=!0,y.current=t,h({asset:e,url:t}),u())}}));return function(){var t;c(),null===(t=e)||void 0===t||t(),i=!0}}}),[r,n,a,u,t,s]),f}function v(e,t,n,r,o){e.resolveAssetUrl(t,{screenScale:n,shouldResolveToOriginal:r}).then((function(e){o(e)}))}var g=h},41066:function(e,t,n){"use strict";var r,o=n(85715).default,i=n(50883).default,a=Object.defineProperty,u=Object.getOwnPropertyDescriptor,s=Object.getOwnPropertyNames,c=Object.prototype.hasOwnProperty,l={};!function(e,t){for(var n in t)a(e,n,{get:t[n],enumerable:!0})}(l,{usePrefersReducedMotion:function(){return d}}),e.exports=(r=l,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,l=i(s(t));try{var f=function(){var i=o.value;c.call(e,i)||i===n||a(e,i,{get:function(){return t[i]},enumerable:!(r=u(t,i))||r.enumerable})};for(l.s();!(o=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(a({},"__esModule",{value:!0}),r));var f=n(9950);function d(){var e=(0,f.useState)(!1),t=o(e,2),n=t[0],r=t[1];return(0,f.useEffect)((function(){if("undefined"!==typeof window&&"matchMedia"in window){var e=window.matchMedia("(prefers-reduced-motion: reduce)"),t=function(){r(e.matches)};return t(),e.addEventListener("change",t),function(){return e.removeEventListener("change",t)}}}),[]),n}},63434:function(e,t,n){"use strict";var r,o=n(50883).default,i=Object.defineProperty,a=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,c={};!function(e,t){for(var n in t)i(e,n,{get:t[n],enumerable:!0})}(c,{TextArea:function(){return d}}),e.exports=(r=c,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var c,l=o(u(t));try{var f=function(){var o=c.value;s.call(e,o)||o===n||i(e,o,{get:function(){return t[o]},enumerable:!(r=a(t,o))||r.enumerable})};for(l.s();!(c=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(i({},"__esModule",{value:!0}),r));var l=n(44414),f=n(57777),d=(0,n(9950).forwardRef)((function(e,t){var n=e.isEditing,r=e.text,o=e.handleFocus,i=e.handleChange,a=e.handleKeyDown,u=e.handleBlur,s=e.handleInputPointerDown,c=e.handleDoubleClick;return(0,l.jsx)("textarea",{ref:t,className:"tl-text tl-text-input",name:"text",tabIndex:-1,readOnly:!n,autoComplete:"off",autoCapitalize:"off",autoCorrect:"off",autoSave:"off",placeholder:"",spellCheck:"true",wrap:"off",dir:"auto",defaultValue:r,onFocus:o,onChange:i,onKeyDown:a,onBlur:u,onTouchEnd:f.stopEventPropagation,onContextMenu:n?f.stopEventPropagation:void 0,onPointerDown:s,onDoubleClick:c,onDragStart:f.preventDefault})}))},1508:function(e,t,n){"use strict";var r,o=n(17383).default,i=n(34579).default,a=n(18336).default,u=n(29511).default,s=n(43693).default,c=n(50883).default,l=Object.defineProperty,f=Object.getOwnPropertyDescriptor,d=Object.getOwnPropertyNames,p=Object.prototype.hasOwnProperty,h={};!function(e,t){for(var n in t)l(e,n,{get:t[n],enumerable:!0})}(h,{TextShapeTool:function(){return m}}),e.exports=(r=h,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,i=c(d(t));try{var a=function(){var i=o.value;p.call(e,i)||i===n||l(e,i,{get:function(){return t[i]},enumerable:!(r=f(t,i))||r.enumerable})};for(i.s();!(o=i.n()).done;)a()}catch(u){i.e(u)}finally{i.f()}}return e}(l({},"__esModule",{value:!0}),r));var v=n(57777),g=n(50241),y=n(82985),m=function(e){function t(){var e;o(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return e=a(this,t,[].concat(r)),s(e,"shapeType","text"),e}return u(t,e),i(t,null,[{key:"children",value:function(){return[g.Idle,y.Pointing]}}])}(v.StateNode);s(m,"id","text"),s(m,"initial","idle")},19914:function(e,t,n){"use strict";var r,o=n(12897).default,i=n(17383).default,a=n(34579).default,u=n(18336).default,s=n(29511).default,c=n(43693).default,l=n(50883).default,f=Object.defineProperty,d=Object.getOwnPropertyDescriptor,p=Object.getOwnPropertyNames,h=Object.prototype.hasOwnProperty,v={};!function(e,t){for(var n in t)f(e,n,{get:t[n],enumerable:!0})}(v,{TextShapeUtil:function(){return j}}),e.exports=(r=v,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,i=l(p(t));try{var a=function(){var i=o.value;h.call(e,i)||i===n||f(e,i,{get:function(){return t[i]},enumerable:!(r=d(t,i))||r.enumerable})};for(i.s();!(o=i.n()).done;)a()}catch(u){i.e(u)}finally{i.f()}}return e}(f({},"__esModule",{value:!0}),r));var g=n(44414),y=n(57777),m=n(9950),b=n(23151),w=n(3376),S=n(65083),x=n(92965),P=n(57856),O=n(93256),k=n(38546),_=new y.WeakCache,j=function(e){function t(){return i(this,t),u(this,t,arguments)}return s(t,e),a(t,[{key:"getDefaultProps",value:function(){return{color:"black",size:"m",w:8,text:"",font:"draw",textAlign:"start",autoSize:!0,scale:1}}},{key:"getMinDimensions",value:function(e){var t=this;return _.get(e.props,(function(e){return I(t.editor,e)}))}},{key:"getGeometry",value:function(e){var t=e.props.scale,n=this.getMinDimensions(e),r=n.width,o=n.height;return new y.Rectangle2d({width:r*t,height:o*t,isFilled:!0,isLabel:!0})}},{key:"getText",value:function(e){return e.props.text}},{key:"canEdit",value:function(){return!0}},{key:"isAspectRatioLocked",value:function(){return!0}},{key:"component",value:function(e){var t=e.id,n=e.props,r=n.font,o=n.size,i=n.text,a=n.color,u=n.scale,s=n.textAlign,c=this.getMinDimensions(e),l=c.width,f=c.height,d=e.id===this.editor.getOnlySelectedShapeId(),p=(0,k.useDefaultColorTheme)(),h=function(e){var t=(0,y.useEditor)();return(0,m.useCallback)((function(n){if(t.getEditingShapeId()===e)switch(n.key){case"Enter":(n.ctrlKey||n.metaKey)&&t.complete();break;case"Tab":(0,y.preventDefault)(n),n.shiftKey?w.TextHelpers.unindent(n.currentTarget):w.TextHelpers.indent(n.currentTarget)}}),[t,e])}(t);return(0,g.jsx)(S.TextLabel,{shapeId:t,classNamePrefix:"tl-text-shape",type:"text",font:r,fontSize:x.FONT_SIZES[o],lineHeight:x.TEXT_PROPS.lineHeight,align:s,verticalAlign:"middle",text:i,labelColor:p[a].solid,isSelected:d,textWidth:l,textHeight:f,style:{transform:"scale(".concat(u,")"),transformOrigin:"top left"},wrap:!0,onKeyDown:h})}},{key:"indicator",value:function(e){var t=this.editor.getShapeGeometry(e).bounds,n=(0,y.useEditor)();return e.props.autoSize&&n.getEditingShapeId()===e.id?null:(0,g.jsx)("rect",{width:(0,y.toDomPrecision)(t.width),height:(0,y.toDomPrecision)(t.height)})}},{key:"toSvg",value:function(e,t){var n,r;e.props.text&&t.addExportDef((0,P.getFontDefForExport)(e.props.font));var o=this.editor.getShapeGeometry(e).bounds,i=o.width/(null!==(n=e.props.scale)&&void 0!==n?n:1),a=o.height/(null!==(r=e.props.scale)&&void 0!==r?r:1),u=(0,y.getDefaultColorTheme)(t);return(0,g.jsx)(b.SvgTextLabel,{fontSize:x.FONT_SIZES[e.props.size],font:e.props.font,align:e.props.textAlign,verticalAlign:"middle",text:e.props.text,labelColor:u[e.props.color].solid,bounds:new y.Box(0,0,i,a),padding:0})}},{key:"onResize",value:function(e,t){var n=t.newPoint,r=t.initialBounds,i=t.initialShape,a=t.scaleX,u=t.handle;if("scale_shape"===t.mode||"right"!==u&&"left"!==u)return o({id:e.id,type:e.type},(0,O.resizeScaled)(e,t));var s=Math.max(1,Math.abs(r.width*a)),c=a<0?y.Vec.Sub(n,y.Vec.FromAngle(e.rotation).mul(s)):n,l=c.x,f=c.y;return{id:e.id,type:e.type,x:l,y:f,props:{w:s/i.props.scale,autoSize:!1}}}},{key:"onEditEnd",value:function(e){var t=e.id,n=e.type,r=e.props.text,o=e.props.text.trimEnd();0===o.length?this.editor.deleteShapes([e.id]):o!==e.props.text&&this.editor.updateShapes([{id:t,type:n,props:{text:r.trimEnd()}}])}},{key:"onBeforeUpdate",value:function(e,t){if(t.props.autoSize){var n=e.props.size!==t.props.size||e.props.textAlign!==t.props.textAlign||e.props.font!==t.props.font||1!==e.props.scale&&1===t.props.scale,r=e.props.text!==t.props.text;if(n||r){var i,a=this.getMinDimensions(e),u=I(this.editor,t.props),s=a.width*e.props.scale,c=a.height*e.props.scale,l=u.width*t.props.scale,f=u.height*t.props.scale;switch(t.props.textAlign){case"middle":i=new y.Vec((l-s)/2,r?0:(f-c)/2);break;case"end":i=new y.Vec(l-s,r?0:(f-c)/2);break;default:if(r)break;i=new y.Vec(0,(f-c)/2)}if(i){i.rot(t.rotation);var d=t.x,p=t.y;return o(o({},t),{},{x:d-i.x,y:p-i.y,props:o(o({},t.props),{},{w:l})})}return o(o({},t),{},{props:o(o({},t.props),{},{w:l})})}}}}])}(y.ShapeUtil);function I(e,t){var n=t.font,r=t.text,i=t.autoSize,a=t.size,u=t.w,s=i?16:Math.max(16,u),c=x.FONT_SIZES[a],l=i?null:Math.floor(Math.max(s,u)),f=e.textMeasure.measureText(r,o(o({},x.TEXT_PROPS),{},{fontFamily:x.FONT_FAMILIES[n],fontSize:c,maxWidth:l}));return i&&(f.w+=1),{width:Math.max(s,f.w),height:Math.max(c,f.h)}}c(j,"type","text"),c(j,"props",y.textShapeProps),c(j,"migrations",y.textShapeMigrations)},50241:function(e,t,n){"use strict";var r,o=n(12897).default,i=n(17383).default,a=n(34579).default,u=n(18336).default,s=n(29511).default,c=n(43693).default,l=n(50883).default,f=Object.defineProperty,d=Object.getOwnPropertyDescriptor,p=Object.getOwnPropertyNames,h=Object.prototype.hasOwnProperty,v={};!function(e,t){for(var n in t)f(e,n,{get:t[n],enumerable:!0})}(v,{Idle:function(){return m}}),e.exports=(r=v,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,i=l(p(t));try{var a=function(){var i=o.value;h.call(e,i)||i===n||f(e,i,{get:function(){return t[i]},enumerable:!(r=d(t,i))||r.enumerable})};for(i.s();!(o=i.n()).done;)a()}catch(u){i.e(u)}finally{i.f()}}return e}(f({},"__esModule",{value:!0}),r));var g=n(57777),y=n(26795),m=function(e){function t(){return i(this,t),u(this,t,arguments)}return s(t,e),a(t,[{key:"onPointerMove",value:function(e){switch(e.target){case"shape":case"canvas":(0,y.updateHoveredShapeId)(this.editor)}}},{key:"onPointerDown",value:function(e){this.parent.transition("pointing",e)}},{key:"onEnter",value:function(){this.editor.setCursor({type:"cross",rotation:0})}},{key:"onExit",value:function(){y.updateHoveredShapeId.cancel()}},{key:"onKeyDown",value:function(e){if("Enter"===e.key){if(this.editor.getIsReadonly())return null;var t,n=this.editor.getOnlySelectedShape();if(n&&this.editor.getShapeUtil(n).canEdit(n))this.editor.setCurrentTool("select"),this.editor.setEditingShape(n.id),null===(t=this.editor.root.getCurrent())||void 0===t||t.transition("editing_shape",o(o({},e),{},{target:"shape",shape:n}))}}},{key:"onCancel",value:function(){this.editor.setCurrentTool("select")}}])}(g.StateNode);c(m,"id","idle")},82985:function(e,t,n){"use strict";var r,o=n(12897).default,i=n(17383).default,a=n(34579).default,u=n(18336).default,s=n(29511).default,c=n(43693).default,l=n(50883).default,f=Object.defineProperty,d=Object.getOwnPropertyDescriptor,p=Object.getOwnPropertyNames,h=Object.prototype.hasOwnProperty,v={};!function(e,t){for(var n in t)f(e,n,{get:t[n],enumerable:!0})}(v,{Pointing:function(){return y}}),e.exports=(r=v,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,i=l(p(t));try{var a=function(){var i=o.value;h.call(e,i)||i===n||f(e,i,{get:function(){return t[i]},enumerable:!(r=d(t,i))||r.enumerable})};for(i.s();!(o=i.n()).done;)a()}catch(u){i.e(u)}finally{i.f()}}return e}(f({},"__esModule",{value:!0}),r));var g=n(57777),y=function(e){function t(){var e;i(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return e=u(this,t,[].concat(r)),c(e,"shape",void 0),c(e,"markId",""),c(e,"enterTime",0),e}return s(t,e),a(t,[{key:"onEnter",value:function(){this.enterTime=Date.now()}},{key:"onExit",value:function(){this.editor.setHintingShapes([])}},{key:"onPointerMove",value:function(e){if(!(Date.now()-this.enterTime<150)){var t=this.editor;if(t.inputs.isPointing){var n=t.inputs,r=n.originPagePoint,i=n.currentPagePoint,a=Math.abs(r.x-i.x);if(a>6*Math.sqrt(t.getInstanceState().isCoarsePointer?t.options.coarseDragDistanceSquared:t.options.dragDistanceSquared)/t.getZoomLevel()){var u=(0,g.createShapeId)();this.markId=t.markHistoryStoppingPoint("creating_text:".concat(u));var s=this.createTextShape(u,r,!1,a);if(!s)return void this.cancel();this.shape=t.getShape(s),t.select(u),t.setCurrentTool("select.resizing",o(o({},e),{},{target:"selection",handle:"right",isCreating:!0,creatingMarkId:this.markId,creationCursorOffset:{x:a,y:1},onInteractionEnd:"text",onCreate:function(){t.setEditingShape(s.id)}}))}}}}},{key:"onPointerUp",value:function(){this.complete()}},{key:"onComplete",value:function(){this.cancel()}},{key:"onCancel",value:function(){this.cancel()}},{key:"onInterrupt",value:function(){this.cancel()}},{key:"complete",value:function(){this.editor.markHistoryStoppingPoint("creating text shape");var e=(0,g.createShapeId)(),t=this.editor.inputs.originPagePoint;this.createTextShape(e,t,!0,20)&&(this.editor.select(e),this.editor.setEditingShape(e))}},{key:"cancel",value:function(){this.parent.transition("idle"),this.editor.bailToMark(this.markId)}},{key:"createTextShape",value:function(e,t,n,r){this.editor.createShape({id:e,type:"text",x:t.x,y:t.y,props:{text:"",autoSize:n,w:r,scale:this.editor.user.getIsDynamicResizeMode()?1/this.editor.getZoomLevel():1}});var i=this.editor.getShape(e);if(i){var a=this.editor.getShapePageBounds(i),u=new g.Vec;if(n)switch(i.props.textAlign){case"start":u.x=0;break;case"middle":u.x=-a.width/2;break;case"end":u.x=-a.width}else u.x=0;if(u.y=-a.height/2,(0,g.isShapeId)(i.parentId)){var s=this.editor.getShapeParentTransform(i);u.rot(-s.rotation())}var c=i.x+u.x,l=i.y+u.y;if(this.editor.getInstanceState().isGridMode){var f=new g.Vec(c,l),d=(0,g.maybeSnapToGrid)(f,this.editor),p=g.Vec.Sub(f,d);this.editor.updateShape(o(o({},i),{},{x:c-p.x,y:l-p.y}))}else this.editor.updateShape(o(o({},i),{},{x:c,y:l}));return i}this.cancel()}}])}(g.StateNode);c(y,"id","pointing")},95182:function(e,t,n){"use strict";var r,o=n(85715).default,i=n(4633).default,a=n(29293).default,u=n(17383).default,s=n(34579).default,c=n(18336).default,l=n(29511).default,f=n(43693).default,d=n(50883).default,p=Object.create,h=Object.defineProperty,v=Object.getOwnPropertyDescriptor,g=Object.getOwnPropertyNames,y=Object.getPrototypeOf,m=Object.prototype.hasOwnProperty,b=function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,i=d(g(t));try{var a=function(){var i=o.value;m.call(e,i)||i===n||h(e,i,{get:function(){return t[i]},enumerable:!(r=v(t,i))||r.enumerable})};for(i.s();!(o=i.n()).done;)a()}catch(u){i.e(u)}finally{i.f()}}return e},w={};!function(e,t){for(var n in t)h(e,n,{get:t[n],enumerable:!0})}(w,{VideoShapeUtil:function(){return T}}),e.exports=(r=w,b(h({},"__esModule",{value:!0}),r));var S=n(44414),x=n(57777),P=function(e,t,n){return n=null!=e?p(y(e)):{},b(!t&&e&&e.__esModule?n:h(n,"default",{value:e,enumerable:!0}),e)}(n(48738)),O=n(9950),k=n(29346),_=n(90770),j=n(61622),I=n(41066),T=function(e){function t(){return u(this,t),c(this,t,arguments)}return l(t,e),s(t,[{key:"canEdit",value:function(){return!0}},{key:"isAspectRatioLocked",value:function(){return!0}},{key:"getDefaultProps",value:function(){return{w:100,h:100,assetId:null,time:0,playing:!0,url:""}}},{key:"component",value:function(e){return(0,S.jsx)(E,{shape:e})}},{key:"indicator",value:function(e){return(0,S.jsx)("rect",{width:(0,x.toDomPrecision)(e.props.w),height:(0,x.toDomPrecision)(e.props.h)})}},{key:"toSvg",value:function(){var e=a(i().mark((function e(t){var n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C(this.editor,t);case 2:if(n=e.sent){e.next=5;break}return e.abrupt("return",null);case 5:return e.abrupt("return",(0,S.jsx)("image",{href:n,width:t.props.w,height:t.props.h}));case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}])}(x.BaseBoxShapeUtil);f(T,"type","video"),f(T,"props",x.videoShapeProps),f(T,"migrations",x.videoShapeMigrations);var E=(0,O.memo)((function(e){var t=e.shape,n=(0,x.useEditor)(),r=n.getShapeGeometry(t).bounds.w*n.getZoomLevel()>=110,i=(0,x.useIsEditing)(t.id),a=(0,I.usePrefersReducedMotion)(),u=(0,x.useEditorComponents)().Spinner,s=(0,j.useImageOrVideoAsset)({shapeId:t.id,assetId:t.props.assetId}),c=s.asset,l=s.url,f=(0,O.useRef)(null),d=(0,O.useState)(!1),p=o(d,2),h=p[0],v=p[1],g=(0,O.useState)(!1),y=o(g,2),m=y[0],b=y[1];(0,O.useEffect)((function(){var e=function(){return b(document.fullscreenElement===f.current)};return document.addEventListener("fullscreenchange",e),function(){return document.removeEventListener("fullscreenchange",e)}}));var w=(0,O.useCallback)((function(e){e.currentTarget&&v(!0)}),[]);return(0,O.useEffect)((function(){var e=f.current;e&&i&&document.activeElement!==e&&e.focus()}),[i,h]),(0,O.useEffect)((function(){if(a){var e=f.current;if(!e)return;e.pause(),e.currentTime=0}}),[f,a]),(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)(x.HTMLContainer,{id:t.id,style:{color:"var(--color-text-3)",backgroundColor:c?"transparent":"var(--color-low)",border:c?"none":"1px solid var(--color-low-border)"},children:(0,S.jsx)("div",{className:"tl-counter-scaled",children:(0,S.jsx)("div",{className:"tl-video-container",children:c?u&&!c.props.src?(0,S.jsx)(u,{}):l?(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)("video",{ref:f,style:i?{pointerEvents:"all"}:h?void 0:{display:"none"},className:(0,P.default)("tl-video","tl-video-shape-".concat(t.id.split(":")[1]),{"tl-video-is-fullscreen":m}),width:"100%",height:"100%",draggable:!1,playsInline:!0,autoPlay:!0,muted:!0,loop:!0,disableRemotePlayback:!0,disablePictureInPicture:!0,controls:i&&r,onLoadedData:w,hidden:!h,children:(0,S.jsx)("source",{src:l})}),!h&&u&&(0,S.jsx)(u,{})]}):null:(0,S.jsx)(k.BrokenAssetIcon,{})})})}),"url"in t.props&&t.props.url&&(0,S.jsx)(_.HyperlinkButton,{url:t.props.url})]})}));function C(e,t){return M.apply(this,arguments)}function M(){return(M=a(i().mark((function e(t,n){var r,o;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.resolveAssetUrl(n.props.assetId,{shouldResolveToOriginal:!0});case 2:if(r=e.sent){e.next=5;break}return e.abrupt("return",null);case 5:return e.next=7,x.MediaHelpers.loadVideo(r);case 7:return o=e.sent,e.abrupt("return",x.MediaHelpers.getVideoFrameAsDataUrl(o,0));case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},49955:function(e,t,n){"use strict";var r,o=n(50883).default,i=Object.defineProperty,a=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,c={};!function(e,t){for(var n in t)i(e,n,{get:t[n],enumerable:!0})}(c,{STYLES:function(){return l}}),e.exports=(r=c,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var c,l=o(u(t));try{var f=function(){var o=c.value;s.call(e,o)||o===n||i(e,o,{get:function(){return t[o]},enumerable:!(r=a(t,o))||r.enumerable})};for(l.s();!(c=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(i({},"__esModule",{value:!0}),r));var l={color:[{value:"black",icon:"color"},{value:"grey",icon:"color"},{value:"light-violet",icon:"color"},{value:"violet",icon:"color"},{value:"blue",icon:"color"},{value:"light-blue",icon:"color"},{value:"yellow",icon:"color"},{value:"orange",icon:"color"},{value:"green",icon:"color"},{value:"light-green",icon:"color"},{value:"light-red",icon:"color"},{value:"red",icon:"color"}],fill:[{value:"none",icon:"fill-none"},{value:"semi",icon:"fill-semi"},{value:"solid",icon:"fill-solid"},{value:"pattern",icon:"fill-pattern"}],dash:[{value:"draw",icon:"dash-draw"},{value:"dashed",icon:"dash-dashed"},{value:"dotted",icon:"dash-dotted"},{value:"solid",icon:"dash-solid"}],size:[{value:"s",icon:"size-small"},{value:"m",icon:"size-medium"},{value:"l",icon:"size-large"},{value:"xl",icon:"size-extra-large"}],font:[{value:"draw",icon:"font-draw"},{value:"sans",icon:"font-sans"},{value:"serif",icon:"font-serif"},{value:"mono",icon:"font-mono"}],textAlign:[{value:"start",icon:"text-align-left"},{value:"middle",icon:"text-align-center"},{value:"end",icon:"text-align-right"}],horizontalAlign:[{value:"start",icon:"horizontal-align-start"},{value:"middle",icon:"horizontal-align-middle"},{value:"end",icon:"horizontal-align-end"}],verticalAlign:[{value:"start",icon:"vertical-align-start"},{value:"middle",icon:"vertical-align-middle"},{value:"end",icon:"vertical-align-end"}],geo:[{value:"rectangle",icon:"geo-rectangle"},{value:"ellipse",icon:"geo-ellipse"},{value:"triangle",icon:"geo-triangle"},{value:"diamond",icon:"geo-diamond"},{value:"star",icon:"geo-star"},{value:"pentagon",icon:"geo-pentagon"},{value:"hexagon",icon:"geo-hexagon"},{value:"octagon",icon:"geo-octagon"},{value:"rhombus",icon:"geo-rhombus"},{value:"rhombus-2",icon:"geo-rhombus-2"},{value:"oval",icon:"geo-oval"},{value:"trapezoid",icon:"geo-trapezoid"},{value:"arrow-left",icon:"geo-arrow-left"},{value:"arrow-up",icon:"geo-arrow-up"},{value:"arrow-down",icon:"geo-arrow-down"},{value:"arrow-right",icon:"geo-arrow-right"},{value:"cloud",icon:"geo-cloud"},{value:"x-box",icon:"geo-x-box"},{value:"check-box",icon:"geo-check-box"},{value:"heart",icon:"geo-heart"}],arrowheadStart:[{value:"none",icon:"arrowhead-none"},{value:"arrow",icon:"arrowhead-arrow"},{value:"triangle",icon:"arrowhead-triangle"},{value:"square",icon:"arrowhead-square"},{value:"dot",icon:"arrowhead-dot"},{value:"diamond",icon:"arrowhead-diamond"},{value:"inverted",icon:"arrowhead-triangle-inverted"},{value:"bar",icon:"arrowhead-bar"}],arrowheadEnd:[{value:"none",icon:"arrowhead-none"},{value:"arrow",icon:"arrowhead-arrow"},{value:"triangle",icon:"arrowhead-triangle"},{value:"square",icon:"arrowhead-square"},{value:"dot",icon:"arrowhead-dot"},{value:"diamond",icon:"arrowhead-diamond"},{value:"inverted",icon:"arrowhead-triangle-inverted"},{value:"bar",icon:"arrowhead-bar"}],spline:[{value:"line",icon:"spline-line"},{value:"cubic",icon:"spline-cubic"}]}},88656:function(e,t,n){"use strict";var r,o=n(17383).default,i=n(34579).default,a=n(18336).default,u=n(29511).default,s=n(43693).default,c=n(50883).default,l=Object.defineProperty,f=Object.getOwnPropertyDescriptor,d=Object.getOwnPropertyNames,p=Object.prototype.hasOwnProperty,h={};!function(e,t){for(var n in t)l(e,n,{get:t[n],enumerable:!0})}(h,{EraserTool:function(){return b}}),e.exports=(r=h,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,i=c(d(t));try{var a=function(){var i=o.value;p.call(e,i)||i===n||l(e,i,{get:function(){return t[i]},enumerable:!(r=f(t,i))||r.enumerable})};for(i.s();!(o=i.n()).done;)a()}catch(u){i.e(u)}finally{i.f()}}return e}(l({},"__esModule",{value:!0}),r));var v=n(57777),g=n(28474),y=n(55913),m=n(4097),b=function(e){function t(){return o(this,t),a(this,t,arguments)}return u(t,e),i(t,[{key:"onEnter",value:function(){this.editor.setCursor({type:"cross",rotation:0})}}],[{key:"children",value:function(){return[y.Idle,m.Pointing,g.Erasing]}}])}(v.StateNode);s(b,"id","eraser"),s(b,"initial","idle"),s(b,"isLockable",!1)},28474:function(e,t,n){"use strict";var r,o=n(41132).default,i=n(17383).default,a=n(34579).default,u=n(18336).default,s=n(29511).default,c=n(43693).default,l=n(50883).default,f=Object.defineProperty,d=Object.getOwnPropertyDescriptor,p=Object.getOwnPropertyNames,h=Object.prototype.hasOwnProperty,v={};!function(e,t){for(var n in t)f(e,n,{get:t[n],enumerable:!0})}(v,{Erasing:function(){return y}}),e.exports=(r=v,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,i=l(p(t));try{var a=function(){var i=o.value;h.call(e,i)||i===n||f(e,i,{get:function(){return t[i]},enumerable:!(r=d(t,i))||r.enumerable})};for(i.s();!(o=i.n()).done;)a()}catch(u){i.e(u)}finally{i.f()}}return e}(f({},"__esModule",{value:!0}),r));var g=n(57777),y=function(e){function t(){var e;i(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return e=u(this,t,[].concat(r)),c(e,"info",{}),c(e,"scribbleId","id"),c(e,"markId",""),c(e,"excludedShapeIds",new Set),e}return s(t,e),a(t,[{key:"onEnter",value:function(e){var t=this;this.markId=this.editor.markHistoryStoppingPoint("erase scribble begin"),this.info=e;var n=this.editor.inputs.originPagePoint;this.excludedShapeIds=new Set(this.editor.getCurrentPageShapes().filter((function(e){if(t.editor.isShapeOrAncestorLocked(e))return!0;if(t.editor.isShapeOfType(e,"group")||t.editor.isShapeOfType(e,"frame")){var r=t.editor.getPointInShapeSpace(e,n);return t.editor.getShapeGeometry(e).bounds.containsPoint(r)}return!1})).map((function(e){return e.id})));var r=this.editor.scribbles.addScribble({color:"muted-1",size:12});this.scribbleId=r.id,this.update()}},{key:"pushPointToScribble",value:function(){var e=this.editor.inputs.currentPagePoint,t=e.x,n=e.y;this.editor.scribbles.addPoint(this.scribbleId,t,n)}},{key:"onExit",value:function(){this.editor.setErasingShapes([]),this.editor.scribbles.stop(this.scribbleId)}},{key:"onPointerMove",value:function(){this.update()}},{key:"onPointerUp",value:function(){this.complete()}},{key:"onCancel",value:function(){this.cancel()}},{key:"onComplete",value:function(){this.complete()}},{key:"update",value:function(){var e=this.editor,t=this.excludedShapeIds,n=e.getErasingShapeIds(),r=e.getZoomLevel(),i=e.getCurrentPageRenderingShapesSorted(),a=e.inputs,u=a.currentPagePoint,s=a.previousPagePoint;this.pushPointToScribble();var c,f=new Set(n),d=this.editor.options.hitTestMargin/r,p=l(i);try{for(p.s();!(c=p.n()).done;){var h=c.value;if(!e.isShapeOfType(h,"group")){var v=e.getShapeMask(h.id);if(!v||(0,g.pointInPolygon)(u,v)){var y=e.getShapeGeometry(h),m=e.getShapePageTransform(h);if(y&&m){var b=m.clone().invert(),w=b.applyToPoint(s),S=b.applyToPoint(u),x=y.bounds;x.minX-d>Math.max(w.x,S.x)||x.minY-d>Math.max(w.y,S.y)||x.maxX+d<Math.min(w.x,S.x)||x.maxY+d<Math.min(w.y,S.y)||y.hitTestLineSegment(w,S,d)&&f.add(e.getOutermostSelectableShape(h).id)}}}}}catch(P){p.e(P)}finally{p.f()}this.editor.setErasingShapes(o(f).filter((function(e){return!t.has(e)})))}},{key:"complete",value:function(){var e=this.editor;e.deleteShapes(e.getCurrentPageState().erasingShapeIds),this.parent.transition("idle")}},{key:"cancel",value:function(){this.editor.bailToMark(this.markId),this.parent.transition("idle",this.info)}}])}(g.StateNode);c(y,"id","erasing")},55913:function(e,t,n){"use strict";var r,o=n(17383).default,i=n(34579).default,a=n(18336).default,u=n(29511).default,s=n(43693).default,c=n(50883).default,l=Object.defineProperty,f=Object.getOwnPropertyDescriptor,d=Object.getOwnPropertyNames,p=Object.prototype.hasOwnProperty,h={};!function(e,t){for(var n in t)l(e,n,{get:t[n],enumerable:!0})}(h,{Idle:function(){return v}}),e.exports=(r=h,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,i=c(d(t));try{var a=function(){var i=o.value;p.call(e,i)||i===n||l(e,i,{get:function(){return t[i]},enumerable:!(r=f(t,i))||r.enumerable})};for(i.s();!(o=i.n()).done;)a()}catch(u){i.e(u)}finally{i.f()}}return e}(l({},"__esModule",{value:!0}),r));var v=function(e){function t(){return o(this,t),a(this,t,arguments)}return u(t,e),i(t,[{key:"onPointerDown",value:function(e){this.parent.transition("pointing",e)}},{key:"onCancel",value:function(){this.editor.setCurrentTool("select")}}])}(n(57777).StateNode);s(v,"id","idle")},4097:function(e,t,n){"use strict";var r,o=n(41132).default,i=n(17383).default,a=n(34579).default,u=n(18336).default,s=n(29511).default,c=n(43693).default,l=n(50883).default,f=Object.defineProperty,d=Object.getOwnPropertyDescriptor,p=Object.getOwnPropertyNames,h=Object.prototype.hasOwnProperty,v={};!function(e,t){for(var n in t)f(e,n,{get:t[n],enumerable:!0})}(v,{Pointing:function(){return g}}),e.exports=(r=v,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,i=l(p(t));try{var a=function(){var i=o.value;h.call(e,i)||i===n||f(e,i,{get:function(){return t[i]},enumerable:!(r=d(t,i))||r.enumerable})};for(i.s();!(o=i.n()).done;)a()}catch(u){i.e(u)}finally{i.f()}}return e}(f({},"__esModule",{value:!0}),r));var g=function(e){function t(){return i(this,t),u(this,t,arguments)}return s(t,e),a(t,[{key:"onEnter",value:function(){for(var e=this.editor.getZoomLevel(),t=this.editor.getCurrentPageRenderingShapesSorted(),n=this.editor.inputs.currentPagePoint,r=new Set,i=r.size,a=t.length-1;a>=0;a--){var u=t[a];if(!this.editor.isShapeOrAncestorLocked(u)&&!this.editor.isShapeOfType(u,"group")&&this.editor.isPointInShape(u,n,{hitInside:!1,margin:this.editor.options.hitTestMargin/e})){var s=this.editor.getOutermostSelectableShape(u);if(this.editor.isShapeOfType(s,"frame")&&r.size>i)break;r.add(s.id)}}this.editor.setErasingShapes(o(r))}},{key:"onLongPress",value:function(e){this.startErasing(e)}},{key:"onExit",value:function(e,t){"erasing"!==t&&this.editor.setErasingShapes([])}},{key:"onPointerMove",value:function(e){this.editor.inputs.isDragging&&this.startErasing(e)}},{key:"onPointerUp",value:function(){this.complete()}},{key:"onCancel",value:function(){this.cancel()}},{key:"onComplete",value:function(){this.complete()}},{key:"onInterrupt",value:function(){this.cancel()}},{key:"startErasing",value:function(e){this.parent.transition("erasing",e)}},{key:"complete",value:function(){var e=this.editor.getErasingShapeIds();e.length&&(this.editor.markHistoryStoppingPoint("erase end"),this.editor.deleteShapes(e)),this.parent.transition("idle")}},{key:"cancel",value:function(){this.parent.transition("idle")}}])}(n(57777).StateNode);c(g,"id","pointing")},31998:function(e,t,n){"use strict";var r,o=n(17383).default,i=n(34579).default,a=n(18336).default,u=n(29511).default,s=n(43693).default,c=n(50883).default,l=Object.defineProperty,f=Object.getOwnPropertyDescriptor,d=Object.getOwnPropertyNames,p=Object.prototype.hasOwnProperty,h={};!function(e,t){for(var n in t)l(e,n,{get:t[n],enumerable:!0})}(h,{HandTool:function(){return b}}),e.exports=(r=h,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,i=c(d(t));try{var a=function(){var i=o.value;p.call(e,i)||i===n||l(e,i,{get:function(){return t[i]},enumerable:!(r=f(t,i))||r.enumerable})};for(i.s();!(o=i.n()).done;)a()}catch(u){i.e(u)}finally{i.f()}}return e}(l({},"__esModule",{value:!0}),r));var v=n(57777),g=n(11593),y=n(75170),m=n(77470),b=function(e){function t(){return o(this,t),a(this,t,arguments)}return u(t,e),i(t,[{key:"onDoubleClick",value:function(e){if("settle"===e.phase){var t=this.editor.inputs.currentScreenPoint;this.editor.zoomIn(t,{animation:{duration:220,easing:v.EASINGS.easeOutQuint}})}}},{key:"onTripleClick",value:function(e){if("settle"===e.phase){var t=this.editor.inputs.currentScreenPoint;this.editor.zoomOut(t,{animation:{duration:320,easing:v.EASINGS.easeOutQuint}})}}},{key:"onQuadrupleClick",value:function(e){if("settle"===e.phase){var t=this.editor.getZoomLevel(),n=this.editor.inputs.currentScreenPoint;1===t?this.editor.zoomToFit({animation:{duration:400,easing:v.EASINGS.easeOutQuint}}):this.editor.resetZoom(n,{animation:{duration:320,easing:v.EASINGS.easeOutQuint}})}}}],[{key:"children",value:function(){return[y.Idle,m.Pointing,g.Dragging]}}])}(v.StateNode);s(b,"id","hand"),s(b,"initial","idle"),s(b,"isLockable",!1)},11593:function(e,t,n){"use strict";var r,o=n(17383).default,i=n(34579).default,a=n(18336).default,u=n(29511).default,s=n(43693).default,c=n(50883).default,l=Object.defineProperty,f=Object.getOwnPropertyDescriptor,d=Object.getOwnPropertyNames,p=Object.prototype.hasOwnProperty,h={};!function(e,t){for(var n in t)l(e,n,{get:t[n],enumerable:!0})}(h,{Dragging:function(){return g}}),e.exports=(r=h,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,i=c(d(t));try{var a=function(){var i=o.value;p.call(e,i)||i===n||l(e,i,{get:function(){return t[i]},enumerable:!(r=f(t,i))||r.enumerable})};for(i.s();!(o=i.n()).done;)a()}catch(u){i.e(u)}finally{i.f()}}return e}(l({},"__esModule",{value:!0}),r));var v=n(57777),g=function(e){function t(){var e;o(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return e=a(this,t,[].concat(r)),s(e,"initialCamera",new v.Vec),e}return u(t,e),i(t,[{key:"onEnter",value:function(){this.initialCamera=v.Vec.From(this.editor.getCamera()),this.update()}},{key:"onPointerMove",value:function(){this.update()}},{key:"onPointerUp",value:function(){this.complete()}},{key:"onCancel",value:function(){this.parent.transition("idle")}},{key:"onComplete",value:function(){this.complete()}},{key:"update",value:function(){var e=this.initialCamera,t=this.editor,n=t.inputs,r=n.currentScreenPoint,o=n.originScreenPoint,i=v.Vec.Sub(r,o).div(t.getZoomLevel());0!==i.len2()&&t.setCamera(e.clone().add(i))}},{key:"complete",value:function(){var e=this.editor.inputs.pointerVelocity,t=Math.min(e.len(),2);t>.1&&this.editor.slideCamera({speed:t,direction:e}),this.parent.transition("idle")}}])}(v.StateNode);s(g,"id","dragging")},75170:function(e,t,n){"use strict";var r,o=n(17383).default,i=n(34579).default,a=n(18336).default,u=n(29511).default,s=n(43693).default,c=n(50883).default,l=Object.defineProperty,f=Object.getOwnPropertyDescriptor,d=Object.getOwnPropertyNames,p=Object.prototype.hasOwnProperty,h={};!function(e,t){for(var n in t)l(e,n,{get:t[n],enumerable:!0})}(h,{Idle:function(){return v}}),e.exports=(r=h,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,i=c(d(t));try{var a=function(){var i=o.value;p.call(e,i)||i===n||l(e,i,{get:function(){return t[i]},enumerable:!(r=f(t,i))||r.enumerable})};for(i.s();!(o=i.n()).done;)a()}catch(u){i.e(u)}finally{i.f()}}return e}(l({},"__esModule",{value:!0}),r));var v=function(e){function t(){return o(this,t),a(this,t,arguments)}return u(t,e),i(t,[{key:"onEnter",value:function(){this.editor.setCursor({type:"grab",rotation:0})}},{key:"onPointerDown",value:function(e){this.parent.transition("pointing",e)}},{key:"onCancel",value:function(){this.editor.setCurrentTool("select")}}])}(n(57777).StateNode);s(v,"id","idle")},77470:function(e,t,n){"use strict";var r,o=n(17383).default,i=n(34579).default,a=n(18336).default,u=n(29511).default,s=n(43693).default,c=n(50883).default,l=Object.defineProperty,f=Object.getOwnPropertyDescriptor,d=Object.getOwnPropertyNames,p=Object.prototype.hasOwnProperty,h={};!function(e,t){for(var n in t)l(e,n,{get:t[n],enumerable:!0})}(h,{Pointing:function(){return v}}),e.exports=(r=h,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,i=c(d(t));try{var a=function(){var i=o.value;p.call(e,i)||i===n||l(e,i,{get:function(){return t[i]},enumerable:!(r=f(t,i))||r.enumerable})};for(i.s();!(o=i.n()).done;)a()}catch(u){i.e(u)}finally{i.f()}}return e}(l({},"__esModule",{value:!0}),r));var v=function(e){function t(){return o(this,t),a(this,t,arguments)}return u(t,e),i(t,[{key:"onEnter",value:function(){this.editor.stopCameraAnimation(),this.editor.setCursor({type:"grabbing",rotation:0})}},{key:"onLongPress",value:function(){this.startDragging()}},{key:"onPointerMove",value:function(){this.editor.inputs.isDragging&&this.startDragging()}},{key:"startDragging",value:function(){this.parent.transition("dragging")}},{key:"onPointerUp",value:function(){this.complete()}},{key:"onCancel",value:function(){this.complete()}},{key:"onComplete",value:function(){this.complete()}},{key:"onInterrupt",value:function(){this.complete()}},{key:"complete",value:function(){this.parent.transition("idle")}}])}(n(57777).StateNode);s(v,"id","pointing")},79902:function(e,t,n){"use strict";var r,o=n(17383).default,i=n(34579).default,a=n(18336).default,u=n(29511).default,s=n(43693).default,c=n(50883).default,l=Object.defineProperty,f=Object.getOwnPropertyDescriptor,d=Object.getOwnPropertyNames,p=Object.prototype.hasOwnProperty,h={};!function(e,t){for(var n in t)l(e,n,{get:t[n],enumerable:!0})}(h,{LaserTool:function(){return m}}),e.exports=(r=h,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,i=c(d(t));try{var a=function(){var i=o.value;p.call(e,i)||i===n||l(e,i,{get:function(){return t[i]},enumerable:!(r=f(t,i))||r.enumerable})};for(i.s();!(o=i.n()).done;)a()}catch(u){i.e(u)}finally{i.f()}}return e}(l({},"__esModule",{value:!0}),r));var v=n(57777),g=n(99816),y=n(87419),m=function(e){function t(){return o(this,t),a(this,t,arguments)}return u(t,e),i(t,[{key:"onEnter",value:function(){this.editor.setCursor({type:"cross",rotation:0})}}],[{key:"children",value:function(){return[g.Idle,y.Lasering]}}])}(v.StateNode);s(m,"id","laser"),s(m,"initial","idle"),s(m,"isLockable",!1)},99816:function(e,t,n){"use strict";var r,o=n(17383).default,i=n(34579).default,a=n(18336).default,u=n(29511).default,s=n(43693).default,c=n(50883).default,l=Object.defineProperty,f=Object.getOwnPropertyDescriptor,d=Object.getOwnPropertyNames,p=Object.prototype.hasOwnProperty,h={};!function(e,t){for(var n in t)l(e,n,{get:t[n],enumerable:!0})}(h,{Idle:function(){return v}}),e.exports=(r=h,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,i=c(d(t));try{var a=function(){var i=o.value;p.call(e,i)||i===n||l(e,i,{get:function(){return t[i]},enumerable:!(r=f(t,i))||r.enumerable})};for(i.s();!(o=i.n()).done;)a()}catch(u){i.e(u)}finally{i.f()}}return e}(l({},"__esModule",{value:!0}),r));var v=function(e){function t(){return o(this,t),a(this,t,arguments)}return u(t,e),i(t,[{key:"onPointerDown",value:function(e){this.parent.transition("lasering",e)}}])}(n(57777).StateNode);s(v,"id","idle")},87419:function(e,t,n){"use strict";var r,o=n(17383).default,i=n(34579).default,a=n(18336).default,u=n(29511).default,s=n(43693).default,c=n(50883).default,l=Object.defineProperty,f=Object.getOwnPropertyDescriptor,d=Object.getOwnPropertyNames,p=Object.prototype.hasOwnProperty,h={};!function(e,t){for(var n in t)l(e,n,{get:t[n],enumerable:!0})}(h,{Lasering:function(){return v}}),e.exports=(r=h,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,i=c(d(t));try{var a=function(){var i=o.value;p.call(e,i)||i===n||l(e,i,{get:function(){return t[i]},enumerable:!(r=f(t,i))||r.enumerable})};for(i.s();!(o=i.n()).done;)a()}catch(u){i.e(u)}finally{i.f()}}return e}(l({},"__esModule",{value:!0}),r));var v=function(e){function t(){var e;o(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return e=a(this,t,[].concat(r)),s(e,"scribbleId","id"),e}return u(t,e),i(t,[{key:"onEnter",value:function(){var e=this.editor.scribbles.addScribble({color:"laser",opacity:.7,size:4,delay:this.editor.options.laserDelayMs,shrink:.05,taper:!0});this.scribbleId=e.id,this.pushPointToScribble()}},{key:"onExit",value:function(){this.editor.scribbles.stop(this.scribbleId)}},{key:"onPointerMove",value:function(){this.pushPointToScribble()}},{key:"onPointerUp",value:function(){this.complete()}},{key:"pushPointToScribble",value:function(){var e=this.editor.inputs.currentPagePoint,t=e.x,n=e.y;this.editor.scribbles.addPoint(this.scribbleId,t,n)}},{key:"onCancel",value:function(){this.cancel()}},{key:"onComplete",value:function(){this.complete()}},{key:"complete",value:function(){this.parent.transition("idle")}},{key:"cancel",value:function(){this.parent.transition("idle")}}])}(n(57777).StateNode);s(v,"id","lasering")},51583:function(e,t,n){"use strict";var r,o=n(85715).default,i=n(17383).default,a=n(34579).default,u=n(11303).default,s=n(50883).default,c=Object.create,l=Object.defineProperty,f=Object.getOwnPropertyDescriptor,d=Object.getOwnPropertyNames,p=Object.prototype.hasOwnProperty,h=function(e,t){return(t=Symbol[e])?t:Symbol.for("Symbol."+e)},v=function(e){throw TypeError(e)},g=function(e,t,n){return t in e?l(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},y=function(e,t){return l(e,"name",{value:t,configurable:!0})},m=["class","method","getter","setter","accessor","field","value","get","set"],b=function(e){return void 0!==e&&"function"!==typeof e?v("Function expected"):e},w=function(e,t,n,r,o){return{kind:m[e],name:t,metadata:r,addInitializer:function(e){return n._?v("Already initialized"):o.push(b(e||null))}}},S=function(e,t){return g(t,h("metadata"),e[3])},x=function(e,t,n){return g(e,"symbol"!==typeof t?t+"":t,n)},P=function(e,t,n){return t.has(e)||v("Cannot "+n)},O=function(e,t){return Object(t)!==t?v('Cannot use the "in" operator on this value'):e.has(t)},k=function(e,t,n){return P(e,t,"read from private field"),n?n.call(e):t.get(e)},_=function(e,t,n,r){return P(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n},j=function(e,t,n){return P(e,t,"access private method"),n},I={};!function(e,t){for(var n in t)l(e,n,{get:t[n],enumerable:!0})}(I,{DragAndDropManager:function(){return A}}),e.exports=(r=I,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,i=s(d(t));try{var a=function(){var i=o.value;p.call(e,i)||i===n||l(e,i,{get:function(){return t[i]},enumerable:!(r=f(t,i))||r.enumerable})};for(i.s();!(o=i.n()).done;)a()}catch(u){i.e(u)}finally{i.f()}}return e}(l({},"__esModule",{value:!0}),r));var T,E,C=n(57777),M=n(23813);T=[C.bind];var A=function(){return a((function e(t){i(this,e),this.editor=t,function(e,t,n,r){for(var o=0,i=e[t>>1],a=i&&i.length;o<a;o++)1&t?i[o].call(n):r=i[o].call(n,r)}(E,5,this),x(this,"prevDroppingShapeId",null),x(this,"droppingNodeTimer",null),x(this,"first",!0),t.disposables.add(this.dispose)}),[{key:"updateDroppingNode",value:function(e,t){var n,r,o=this;this.first&&(this.editor.setHintingShapes(e.map((function(e){return o.editor.findShapeAncestor(e,(function(e){return"group"!==e.type}))})).filter((function(e){return e}))),this.prevDroppingShapeId=null!==(n=null===(r=this.editor.getDroppingOverShape(this.editor.inputs.originPagePoint,e))||void 0===r?void 0:r.id)&&void 0!==n?n:null,this.first=!1);null===this.droppingNodeTimer?this.setDragTimer(e,20,t):this.editor.inputs.pointerVelocity.len()>.5&&(clearTimeout(this.droppingNodeTimer),this.setDragTimer(e,100,t))}},{key:"setDragTimer",value:function(e,t,n){var r=this;this.droppingNodeTimer=this.editor.timers.setTimeout((function(){r.editor.run((function(){r.handleDrag(r.editor.inputs.currentPagePoint,e,n)})),r.droppingNodeTimer=null}),t)}},{key:"handleDrag",value:function(e,t,n){var r,o,i=this;t=(0,C.compact)(t.map((function(e){return i.editor.getShape(e.id)})));var a=null!==(r=null===(o=this.editor.getDroppingOverShape(e,t))||void 0===o?void 0:o.id)&&void 0!==r?r:null;if(a!==this.prevDroppingShapeId){var u,s,c,l,f=this.prevDroppingShapeId,d=f&&this.editor.getShape(f),p=a&&this.editor.getShape(a);if(d)null===(u=(s=this.editor.getShapeUtil(d)).onDragShapesOut)||void 0===u||u.call(s,d,t);if(p)null===(c=(l=this.editor.getShapeUtil(p)).onDragShapesOver)||void 0===c||c.call(l,p,t);this.hintParents(t),null===n||void 0===n||n(),this.prevDroppingShapeId=a}else this.hintParents(t)}},{key:"hintParents",value:function(e){var t,n=new Map,r=s(e);try{for(r.s();!(t=r.n()).done;){var i=t.value,a=this.editor.findShapeAncestor(i,(function(e){return"group"!==e.type}));a&&(n.has(a.id)||n.set(a.id,[]),n.get(a.id).push(i.id))}}catch(v){r.e(v)}finally{r.f()}var u,c=[],l=s(n);try{for(l.s();!(u=l.n()).done;){var f=o(u.value,2),d=f[0],p=f[1],h=this.editor.getShape(d);h&&((0,M.getOccludedChildren)(this.editor,h).length<p.length&&c.push(h.id))}}catch(v){l.e(v)}finally{l.f()}this.editor.setHintingShapes(c)}},{key:"dropShapes",value:function(e){var t=this.prevDroppingShapeId;if(this.handleDrag(this.editor.inputs.currentPagePoint,e),t){var n,r,o=this.editor.getShape(t);if(!o)return;null===(n=(r=this.editor.getShapeUtil(o)).onDropShapesOver)||void 0===n||n.call(r,o,e)}}},{key:"clear",value:function(){this.prevDroppingShapeId=null,null!==this.droppingNodeTimer&&clearTimeout(this.droppingNodeTimer),this.droppingNodeTimer=null,this.editor.setHintingShapes([]),this.first=!0}},{key:"dispose",value:function(){this.clear()}}])}();(function(e,t,n,r,o,i){var a,s,c,d,p,h=7&t,g=!!(8&t),x=!!(16&t),P=h>3?e.length+1:h?g?1:2:0,I=m[h+5],T=h>3&&(e[P-1]=[]),E=e[P]||(e[P]=[]),C=h&&(!x&&!g&&(o=o.prototype),h<5&&(h>3||!x)&&f(h<4?o:u("set",u("get",{},n,(function(){return k(this,i)})),n,(function(e){return _(this,i,e)})),n));h?x&&h<4&&y(i,(h>2?"set ":h>1?"get ":"")+n):y(o,n);for(var M=r.length-1;M>=0;M--)d=w(h,n,c={},e[3],E),h&&(d.static=g,d.private=x,p=d.access={has:x?function(e){return O(o,e)}:function(e){return n in e}},3^h&&(p.get=x?function(e){return(1^h?k:j)(e,o,4^h?i:C.get)}:function(e){return e[n]}),h>2&&(p.set=x?function(e,t){return _(e,o,t,4^h?i:C.set)}:function(e,t){return e[n]=t})),s=(0,r[M])(h?h<4?x?i:C[I]:h>4?void 0:{get:C.get,set:C.set}:o,d),c._=1,4^h||void 0===s?b(s)&&(h>4?T.unshift(s):h?x?i=s:C[I]=s:o=s):"object"!==typeof s||null===s?v("Object expected"):(b(a=s.get)&&(C.get=a),b(a=s.set)&&(C.set=a),b(a=s.init)&&T.unshift(a));h||S(e,o),C&&l(o,n,C)})(E=function(e){var t;return[,,,c(null!==(t=null===e||void 0===e?void 0:e[h("metadata")])&&void 0!==t?t:null)]}(null),1,"dispose",T,A),S(E,A)},78412:function(e,t,n){"use strict";n(85224);var r,o=n(17383).default,i=n(34579).default,a=n(18336).default,u=n(29511).default,s=n(43693).default,c=n(50883).default,l=Object.defineProperty,f=Object.getOwnPropertyDescriptor,d=Object.getOwnPropertyNames,p=Object.prototype.hasOwnProperty,h={};!function(e,t){for(var n in t)l(e,n,{get:t[n],enumerable:!0})}(h,{SelectTool:function(){return D}}),e.exports=(r=h,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,i=c(d(t));try{var a=function(){var i=o.value;p.call(e,i)||i===n||l(e,i,{get:function(){return t[i]},enumerable:!(r=f(t,i))||r.enumerable})};for(i.s();!(o=i.n()).done;)a()}catch(u){i.e(u)}finally{i.f()}}return e}(l({},"__esModule",{value:!0}),r));var v=n(57777),g=n(31031),y=n(26354),m=n(93724),b=n(73748),w=n(19780),S=n(64202),x=n(87941),P=n(70788),O=n(30601),k=n(67579),_=n(17879),j=n(13892),I=n(18683),T=n(40932),E=n(67864),C=n(76644),M=n(23731),A=n(6442),D=function(e){function t(){var e;o(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return e=a(this,t,[].concat(r)),s(e,"reactor",void 0),e}return u(t,e),i(t,[{key:"cleanUpDuplicateProps",value:function(){var e=this.editor.getSelectedShapeIds(),t=this.editor.getInstanceState();if(t.duplicateProps){var n=new Set(t.duplicateProps.shapeIds);e.length===n.size&&e.every((function(e){return n.has(e)}))||this.editor.updateInstanceState({duplicateProps:null})}}},{key:"onEnter",value:function(){var e=this;this.reactor=(0,v.react)("clean duplicate props",(function(){try{e.cleanUpDuplicateProps()}catch(t){console.error(t)}}))}},{key:"onExit",value:function(){var e;null===(e=this.reactor)||void 0===e||e.call(this),this.editor.getCurrentPageState().editingShapeId&&this.editor.setEditingShape(null)}}],[{key:"children",value:function(){return[y.Crop,m.Cropping,x.Idle,O.PointingCanvas,T.PointingShape,A.Translating,g.Brushing,M.ScribbleBrushing,b.PointingCropHandle,I.PointingSelection,_.PointingResizeHandle,S.EditingShape,E.Resizing,C.Rotating,j.PointingRotateHandle,P.PointingArrowLabel,k.PointingHandle,w.DraggingHandle]}}])}(v.StateNode);s(D,"id","select"),s(D,"initial","idle"),s(D,"isLockable",!1)},31031:function(e,t,n){"use strict";var r,o=n(12897).default,i=n(17383).default,a=n(34579).default,u=n(18336).default,s=n(29511).default,c=n(43693).default,l=n(50883).default,f=Object.defineProperty,d=Object.getOwnPropertyDescriptor,p=Object.getOwnPropertyNames,h=Object.prototype.hasOwnProperty,v={};!function(e,t){for(var n in t)f(e,n,{get:t[n],enumerable:!0})}(v,{Brushing:function(){return y}}),e.exports=(r=v,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,i=l(p(t));try{var a=function(){var i=o.value;h.call(e,i)||i===n||f(e,i,{get:function(){return t[i]},enumerable:!(r=d(t,i))||r.enumerable})};for(i.s();!(o=i.n()).done;)a()}catch(u){i.e(u)}finally{i.f()}}return e}(f({},"__esModule",{value:!0}),r));var g=n(57777),y=function(e){function t(){var e;i(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return e=u(this,t,[].concat(r)),c(e,"info",{}),c(e,"initialSelectedShapeIds",[]),c(e,"excludedShapeIds",new Set),c(e,"isWrapMode",!1),c(e,"initialStartShape",null),e}return s(t,e),a(t,[{key:"onEnter",value:function(e){var t=this,n=this.editor.inputs,r=n.altKey,o=n.currentPagePoint;this.isWrapMode=this.editor.user.getIsWrapMode(),r?this.parent.transition("scribble_brushing",e):(this.excludedShapeIds=new Set(this.editor.getCurrentPageShapes().filter((function(e){return t.editor.isShapeOfType(e,"group")||t.editor.isShapeOrAncestorLocked(e)})).map((function(e){return e.id}))),this.info=e,this.initialSelectedShapeIds=this.editor.getSelectedShapeIds().slice(),this.initialStartShape=this.editor.getShapesAtPoint(o)[0],this.hitTestShapes())}},{key:"onExit",value:function(){this.initialSelectedShapeIds=[],this.editor.updateInstanceState({brush:null})}},{key:"onTick",value:function(e){var t=e.elapsed;this.editor.edgeScrollManager.updateEdgeScrolling(t)}},{key:"onPointerMove",value:function(){this.hitTestShapes()}},{key:"onPointerUp",value:function(){this.complete()}},{key:"onComplete",value:function(){this.complete()}},{key:"onCancel",value:function(e){this.editor.setSelectedShapes(this.initialSelectedShapeIds),this.parent.transition("idle",e)}},{key:"onKeyDown",value:function(e){this.editor.inputs.altKey?this.parent.transition("scribble_brushing",e):this.hitTestShapes()}},{key:"onKeyUp",value:function(){this.hitTestShapes()}},{key:"complete",value:function(){this.hitTestShapes(),this.parent.transition("idle")}},{key:"hitTestShapes",value:function(){var e,t,n,r,i,a,u=this.editor,s=this.excludedShapeIds,c=this.isWrapMode,l=u.inputs,f=l.originPagePoint,d=l.currentPagePoint,p=l.shiftKey,h=l.ctrlKey,v=new Set(p?this.initialSelectedShapeIds:[]),y=c?!h:h,m=g.Box.FromPoints([f,d]),b=m.corners,w=u.getCurrentPageRenderingShapesSorted(),S=u.getCurrentPageId();e:for(var x=0,P=w.length;x<P;x++)if(n=w[x],!s.has(n.id)&&!v.has(n.id)&&(r=u.getShapePageBounds(n)))if(m.contains(r))this.handleHit(n,d,S,v,b);else if(!y&&!u.isShapeOfType(n,"frame")&&m.collides(r)){if(!(i=u.getShapePageTransform(n)))continue e;a=i.clone().invert().applyToPoints(b);var O=u.getShapeGeometry(n);t:for(var k=0;k<4;k++)if(e=a[k],t=a[(k+1)%4],O.hitTestLineSegment(e,t,0)){this.handleHit(n,d,S,v,b);break t}}var _=u.getInstanceState().brush;_&&m.equals(_)||u.updateInstanceState({brush:o({},m.toJson())});var j=u.getSelectedShapeIds();(j.length!==v.size||j.some((function(e){return!v.has(e)})))&&u.setSelectedShapes(Array.from(v))}},{key:"onInterrupt",value:function(){this.editor.updateInstanceState({brush:null})}},{key:"handleHit",value:function(e,t,n,r,o){if(e.parentId!==n){var i=this.editor.getOutermostSelectableShape(e),a=this.editor.getShapeMask(i.id);(!a||(0,g.polygonsIntersect)(a,o)||(0,g.pointInPolygon)(t,a))&&r.add(i.id)}else r.add(e.id)}}])}(g.StateNode);c(y,"id","brushing")},26354:function(e,t,n){"use strict";var r,o=n(17383).default,i=n(34579).default,a=n(18336).default,u=n(29511).default,s=n(43693).default,c=n(50883).default,l=Object.defineProperty,f=Object.getOwnPropertyDescriptor,d=Object.getOwnPropertyNames,p=Object.prototype.hasOwnProperty,h={};!function(e,t){for(var n in t)l(e,n,{get:t[n],enumerable:!0})}(h,{Crop:function(){return S}}),e.exports=(r=h,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,i=c(d(t));try{var a=function(){var i=o.value;p.call(e,i)||i===n||l(e,i,{get:function(){return t[i]},enumerable:!(r=f(t,i))||r.enumerable})};for(i.s();!(o=i.n()).done;)a()}catch(u){i.e(u)}finally{i.f()}}return e}(l({},"__esModule",{value:!0}),r));var v=n(57777),g=n(93724),y=n(148),m=n(53362),b=n(73748),w=n(24827),S=function(e){function t(){var e;o(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return e=a(this,t,[].concat(r)),s(e,"markId",""),s(e,"didExit",!1),e}return u(t,e),i(t,[{key:"onEnter",value:function(){this.didExit=!1,this.markId=this.editor.markHistoryStoppingPoint("crop")}},{key:"onExit",value:function(){this.didExit||(this.didExit=!0,this.editor.squashToMark(this.markId))}},{key:"onCancel",value:function(){this.didExit||(this.didExit=!0,this.editor.bailToMark(this.markId))}}],[{key:"children",value:function(){return[y.Idle,w.TranslatingCrop,m.PointingCrop,b.PointingCropHandle,g.Cropping]}}])}(v.StateNode);s(S,"id","crop"),s(S,"initial","idle")},93724:function(e,t,n){"use strict";var r,o=n(17383).default,i=n(34579).default,a=n(18336).default,u=n(29511).default,s=n(43693).default,c=n(50883).default,l=Object.defineProperty,f=Object.getOwnPropertyDescriptor,d=Object.getOwnPropertyNames,p=Object.prototype.hasOwnProperty,h={};!function(e,t){for(var n in t)l(e,n,{get:t[n],enumerable:!0})}(h,{Cropping:function(){return b}}),e.exports=(r=h,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,i=c(d(t));try{var a=function(){var i=o.value;p.call(e,i)||i===n||l(e,i,{get:function(){return t[i]},enumerable:!(r=f(t,i))||r.enumerable})};for(i.s();!(o=i.n()).done;)a()}catch(u){i.e(u)}finally{i.f()}}return e}(l({},"__esModule",{value:!0}),r));var v=n(57777),g=n(23813),y=n(17879),m=n(32970),b=function(e){function t(){var e;o(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return e=a(this,t,[].concat(r)),s(e,"info",{}),s(e,"markId",""),s(e,"snapshot",{}),e}return u(t,e),i(t,[{key:"onEnter",value:function(e){this.info=e,this.markId=this.editor.markHistoryStoppingPoint("cropping"),this.snapshot=this.createSnapshot(),this.updateShapes()}},{key:"onPointerMove",value:function(){this.updateShapes()}},{key:"onPointerUp",value:function(){this.complete()}},{key:"onComplete",value:function(){this.complete()}},{key:"onCancel",value:function(){this.cancel()}},{key:"updateCursor",value:function(){if(this.editor.getSelectedShapes()[0]){var e=y.CursorTypeMap[this.info.handle];this.editor.setCursor({type:e,rotation:this.editor.getSelectionRotation()})}}},{key:"getDefaultCrop",value:function(){return{topLeft:{x:0,y:0},bottomRight:{x:1,y:1}}}},{key:"updateShapes",value:function(){var e,t=this.snapshot,n=t.shape,r=t.cursorHandleOffset;if(n&&this.editor.getShapeUtil("image")){var o=n.props,i=this.editor.inputs.currentPagePoint.clone().sub(r),a=this.editor.inputs.originPagePoint.clone().sub(r),u=i.clone().sub(a).rot(-n.rotation),s=null!==(e=o.crop)&&void 0!==e?e:this.getDefaultCrop(),c=(0,v.structuredClone)(s),l=new v.Vec(n.x,n.y),f=new v.Vec(0,0),d=1/(s.bottomRight.x-s.topLeft.x)*o.w,p=1/(s.bottomRight.y-s.topLeft.y)*o.h,h=!1;switch(this.info.handle){case"top":case"top_left":case"top_right":if(p<m.MIN_CROP_SIZE)break;h=!0,c.topLeft.y=c.topLeft.y+u.y/p,p*(c.bottomRight.y-c.topLeft.y)<m.MIN_CROP_SIZE?(c.topLeft.y=c.bottomRight.y-m.MIN_CROP_SIZE/p,f.y=(c.topLeft.y-s.topLeft.y)*p):c.topLeft.y<=0?(c.topLeft.y=0,f.y=(c.topLeft.y-s.topLeft.y)*p):f.y=u.y;break;case"bottom":case"bottom_left":case"bottom_right":if(p<m.MIN_CROP_SIZE)break;h=!0,c.bottomRight.y=Math.min(1,c.bottomRight.y+u.y/p),p*(c.bottomRight.y-c.topLeft.y)<m.MIN_CROP_SIZE&&(c.bottomRight.y=c.topLeft.y+m.MIN_CROP_SIZE/p)}switch(this.info.handle){case"left":case"top_left":case"bottom_left":if(d<m.MIN_CROP_SIZE)break;h=!0,c.topLeft.x=c.topLeft.x+u.x/d,d*(c.bottomRight.x-c.topLeft.x)<m.MIN_CROP_SIZE?(c.topLeft.x=c.bottomRight.x-m.MIN_CROP_SIZE/d,f.x=(c.topLeft.x-s.topLeft.x)*d):c.topLeft.x<=0?(c.topLeft.x=0,f.x=(c.topLeft.x-s.topLeft.x)*d):f.x=u.x;break;case"right":case"top_right":case"bottom_right":if(d<m.MIN_CROP_SIZE)break;h=!0,c.bottomRight.x=Math.min(1,c.bottomRight.x+u.x/d),d*(c.bottomRight.x-c.topLeft.x)<m.MIN_CROP_SIZE&&(c.bottomRight.x=c.topLeft.x+m.MIN_CROP_SIZE/d)}if(h){l.add(f.rot(n.rotation));var g={id:n.id,type:n.type,x:l.x,y:l.y,props:{crop:c,w:(c.bottomRight.x-c.topLeft.x)*d,h:(c.bottomRight.y-c.topLeft.y)*p}};this.editor.updateShapes([g]),this.updateCursor()}}}},{key:"complete",value:function(){this.updateShapes(),(0,g.kickoutOccludedShapes)(this.editor,[this.snapshot.shape.id]),this.info.onInteractionEnd?this.editor.setCurrentTool(this.info.onInteractionEnd,this.info):(this.editor.setCroppingShape(null),this.editor.setCurrentTool("select.idle"))}},{key:"cancel",value:function(){this.editor.bailToMark(this.markId),this.info.onInteractionEnd?this.editor.setCurrentTool(this.info.onInteractionEnd,this.info):(this.editor.setCroppingShape(null),this.editor.setCurrentTool("select.idle"))}},{key:"createSnapshot",value:function(){var e=this.editor.getSelectionRotation(),t=this.editor.inputs.originPagePoint,n=this.editor.getOnlySelectedShape(),r=this.editor.getSelectionRotatedPageBounds(),o=v.Vec.RotWith(r.getHandlePoint(this.info.handle),r.point,e);return{shape:n,cursorHandleOffset:v.Vec.Sub(t,o)}}}])}(v.StateNode);s(b,"id","cropping")},148:function(e,t,n){"use strict";var r,o=n(12897).default,i=n(17383).default,a=n(34579).default,u=n(18336).default,s=n(29511).default,c=n(43693).default,l=n(50883).default,f=Object.defineProperty,d=Object.getOwnPropertyDescriptor,p=Object.getOwnPropertyNames,h=Object.prototype.hasOwnProperty,v={};!function(e,t){for(var n in t)f(e,n,{get:t[n],enumerable:!0})}(v,{Idle:function(){return b}}),e.exports=(r=v,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,i=l(p(t));try{var a=function(){var i=o.value;h.call(e,i)||i===n||f(e,i,{get:function(){return t[i]},enumerable:!(r=d(t,i))||r.enumerable})};for(i.s();!(o=i.n()).done;)a()}catch(u){i.e(u)}finally{i.f()}}return e}(f({},"__esModule",{value:!0}),r));var g=n(57777),y=n(87179),m=n(11462),b=function(e){function t(){return i(this,t),u(this,t,arguments)}return s(t,e),a(t,[{key:"onEnter",value:function(){this.editor.setCursor({type:"default",rotation:0});var e=this.editor.getOnlySelectedShape();e&&this.editor.setCroppingShape(e.id)}},{key:"onExit",value:function(){this.editor.setCursor({type:"default",rotation:0})}},{key:"onCancel",value:function(){this.editor.setCroppingShape(null),this.editor.setCurrentTool("select.idle",{})}},{key:"onPointerDown",value:function(e){if(e.accelKey)return this.cancel(),void this.editor.root.handleEvent(e);switch(e.target){case"canvas":var t=(0,y.getHitShapeOnCanvasPointerDown)(this.editor);if(t&&!this.editor.isShapeOfType(t,"group"))return void this.onPointerDown(o(o({},e),{},{shape:t,target:"shape"}));this.cancel(),this.editor.root.handleEvent(e);break;case"shape":if(e.shape.id===this.editor.getCroppingShapeId())return void this.editor.setCurrentTool("select.crop.pointing_crop",e);var n;null!==(n=this.editor.getShapeUtil(e.shape))&&void 0!==n&&n.canCrop(e.shape)?(this.editor.setCroppingShape(e.shape.id),this.editor.setSelectedShapes([e.shape.id]),this.editor.setCurrentTool("select.crop.pointing_crop",e)):(this.cancel(),this.editor.root.handleEvent(e));break;case"selection":switch(e.handle){case"mobile_rotate":case"top_left_rotate":case"top_right_rotate":case"bottom_left_rotate":case"bottom_right_rotate":this.editor.setCurrentTool("select.pointing_rotate_handle",o(o({},e),{},{onInteractionEnd:"select.crop.idle"}));break;case"top":case"right":case"bottom":case"left":case"top_left":case"top_right":case"bottom_left":case"bottom_right":this.editor.setCurrentTool("select.crop.pointing_crop_handle",o(o({},e),{},{onInteractionEnd:"select.crop.idle"}));break;default:this.cancel()}}}},{key:"onDoubleClick",value:function(e){if(!this.editor.inputs.shiftKey&&"up"===e.phase){var t=this.editor.getCroppingShapeId();if(t){var n=this.editor.getShape(t);if(n){var r,o=this.editor.getShapeUtil(n);if(o)if("selection"!==e.target)this.cancel(),this.editor.root.handleEvent(e);else null===(r=o.onDoubleClickEdge)||void 0===r||r.call(o,n)}}}}},{key:"onKeyDown",value:function(){this.nudgeCroppingImage(!1)}},{key:"onKeyRepeat",value:function(){this.nudgeCroppingImage(!0)}},{key:"onKeyUp",value:function(e){if("Enter"===e.code)this.editor.setCroppingShape(null),this.editor.setCurrentTool("select.idle",{})}},{key:"cancel",value:function(){this.editor.setCroppingShape(null),this.editor.setCurrentTool("select.idle",{})}},{key:"nudgeCroppingImage",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.editor.inputs.keys,n=t.has("ShiftLeft"),r=new g.Vec(0,0);if(t.has("ArrowLeft")&&(r.x+=1),t.has("ArrowRight")&&(r.x-=1),t.has("ArrowUp")&&(r.y+=1),t.has("ArrowDown")&&(r.y-=1),!r.equals(new g.Vec(0,0))){n&&r.mul(10);var o=this.editor.getShape(this.editor.getCroppingShapeId());if(o){var i=(0,m.getTranslateCroppedImageChange)(this.editor,o,r);i&&(e||this.editor.markHistoryStoppingPoint("translate crop"),this.editor.updateShapes([i]))}}}}])}(g.StateNode);c(b,"id","idle")},53362:function(e,t,n){"use strict";var r,o=n(17383).default,i=n(34579).default,a=n(18336).default,u=n(29511).default,s=n(43693).default,c=n(50883).default,l=Object.defineProperty,f=Object.getOwnPropertyDescriptor,d=Object.getOwnPropertyNames,p=Object.prototype.hasOwnProperty,h={};!function(e,t){for(var n in t)l(e,n,{get:t[n],enumerable:!0})}(h,{PointingCrop:function(){return v}}),e.exports=(r=h,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,i=c(d(t));try{var a=function(){var i=o.value;p.call(e,i)||i===n||l(e,i,{get:function(){return t[i]},enumerable:!(r=f(t,i))||r.enumerable})};for(i.s();!(o=i.n()).done;)a()}catch(u){i.e(u)}finally{i.f()}}return e}(l({},"__esModule",{value:!0}),r));var v=function(e){function t(){return o(this,t),a(this,t,arguments)}return u(t,e),i(t,[{key:"onCancel",value:function(){this.editor.setCurrentTool("select.crop.idle",{})}},{key:"onPointerMove",value:function(e){this.editor.inputs.isDragging&&this.editor.setCurrentTool("select.crop.translating_crop",e)}},{key:"onPointerUp",value:function(e){this.editor.setCurrentTool("select.crop.idle",e)}}])}(n(57777).StateNode);s(v,"id","pointing_crop")},73748:function(e,t,n){"use strict";var r,o=n(12897).default,i=n(17383).default,a=n(34579).default,u=n(18336).default,s=n(29511).default,c=n(43693).default,l=n(50883).default,f=Object.defineProperty,d=Object.getOwnPropertyDescriptor,p=Object.getOwnPropertyNames,h=Object.prototype.hasOwnProperty,v={};!function(e,t){for(var n in t)f(e,n,{get:t[n],enumerable:!0})}(v,{PointingCropHandle:function(){return m}}),e.exports=(r=v,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,i=l(p(t));try{var a=function(){var i=o.value;h.call(e,i)||i===n||f(e,i,{get:function(){return t[i]},enumerable:!(r=d(t,i))||r.enumerable})};for(i.s();!(o=i.n()).done;)a()}catch(u){i.e(u)}finally{i.f()}}return e}(f({},"__esModule",{value:!0}),r));var g=n(57777),y=n(17879),m=function(e){function t(){var e;i(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return e=u(this,t,[].concat(r)),c(e,"info",{}),e}return s(t,e),a(t,[{key:"onEnter",value:function(e){this.info=e,this.parent.setCurrentToolIdMask(e.onInteractionEnd);var t=this.editor.getSelectedShapes()[0];if(t){var n=y.CursorTypeMap[this.info.handle];this.editor.setCursor({type:n,rotation:this.editor.getSelectionRotation()}),this.editor.setCroppingShape(t.id)}}},{key:"onExit",value:function(){this.editor.setCursor({type:"default",rotation:0}),this.parent.setCurrentToolIdMask(void 0)}},{key:"onPointerMove",value:function(){this.editor.inputs.isDragging&&this.startCropping()}},{key:"onLongPress",value:function(){this.startCropping()}},{key:"startCropping",value:function(){this.editor.getIsReadonly()||this.parent.transition("cropping",o(o({},this.info),{},{onInteractionEnd:this.info.onInteractionEnd}))}},{key:"onPointerUp",value:function(){this.info.onInteractionEnd?this.editor.setCurrentTool(this.info.onInteractionEnd,this.info):(this.editor.setCroppingShape(null),this.editor.setCurrentTool("select.idle"))}},{key:"onCancel",value:function(){this.cancel()}},{key:"onComplete",value:function(){this.cancel()}},{key:"onInterrupt",value:function(){this.cancel()}},{key:"cancel",value:function(){this.info.onInteractionEnd?this.editor.setCurrentTool(this.info.onInteractionEnd,this.info):(this.editor.setCroppingShape(null),this.editor.setCurrentTool("select.idle"))}}])}(g.StateNode);c(m,"id","pointing_crop_handle")},24827:function(e,t,n){"use strict";var r,o=n(17383).default,i=n(34579).default,a=n(18336).default,u=n(29511).default,s=n(43693).default,c=n(50883).default,l=Object.defineProperty,f=Object.getOwnPropertyDescriptor,d=Object.getOwnPropertyNames,p=Object.prototype.hasOwnProperty,h={};!function(e,t){for(var n in t)l(e,n,{get:t[n],enumerable:!0})}(h,{TranslatingCrop:function(){return y}}),e.exports=(r=h,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,i=c(d(t));try{var a=function(){var i=o.value;p.call(e,i)||i===n||l(e,i,{get:function(){return t[i]},enumerable:!(r=f(t,i))||r.enumerable})};for(i.s();!(o=i.n()).done;)a()}catch(u){i.e(u)}finally{i.f()}}return e}(l({},"__esModule",{value:!0}),r));var v=n(57777),g=n(11462),y=function(e){function t(){var e;o(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return e=a(this,t,[].concat(r)),s(e,"info",{}),s(e,"markId",""),s(e,"snapshot",{}),e}return u(t,e),i(t,[{key:"onEnter",value:function(e){this.info=e,this.snapshot=this.createSnapshot(),this.markId=this.editor.markHistoryStoppingPoint("translating_crop"),this.editor.setCursor({type:"move",rotation:0}),this.updateShapes()}},{key:"onExit",value:function(){this.editor.setCursor({type:"default",rotation:0})}},{key:"onPointerMove",value:function(){this.updateShapes()}},{key:"onPointerUp",value:function(){this.complete()}},{key:"onComplete",value:function(){this.complete()}},{key:"onCancel",value:function(){this.cancel()}},{key:"onKeyDown",value:function(e){switch(e.key){case"Alt":case"Shift":return void this.updateShapes()}}},{key:"onKeyUp",value:function(e){switch(e.key){case"Enter":return void this.complete();case"Alt":case"Shift":this.updateShapes()}}},{key:"complete",value:function(){this.updateShapes(),this.editor.setCurrentTool("select.crop.idle",this.info)}},{key:"cancel",value:function(){this.editor.bailToMark(this.markId),this.editor.setCurrentTool("select.crop.idle",this.info)}},{key:"createSnapshot",value:function(){return{shape:this.editor.getOnlySelectedShape()}}},{key:"updateShapes",value:function(){var e=this.snapshot.shape;if(e){var t=this.editor.inputs,n=t.originPagePoint,r=t.currentPagePoint.clone().sub(n),o=(0,g.getTranslateCroppedImageChange)(this.editor,e,r);o&&this.editor.updateShapes([o])}}}])}(v.StateNode);s(y,"id","translating_crop")},11462:function(e,t,n){"use strict";var r,o=n(50883).default,i=Object.defineProperty,a=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,c={};!function(e,t){for(var n in t)i(e,n,{get:t[n],enumerable:!0})}(c,{getTranslateCroppedImageChange:function(){return f}}),e.exports=(r=c,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var c,l=o(u(t));try{var f=function(){var o=c.value;s.call(e,o)||o===n||i(e,o,{get:function(){return t[o]},enumerable:!(r=a(t,o))||r.enumerable})};for(l.s();!(c=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(i({},"__esModule",{value:!0}),r));var l=n(57777);function f(e,t,n){if(!t)throw Error("Needs to translate a cropped shape!");var r=t.props.crop;if(r){var o=e.inputs.shiftKey?Math.abs(n.x)<Math.abs(n.y)?"x":"y":null;"x"===o?n.x=0:"y"===o&&(n.y=0),n.rot(-t.rotation);var i=1/(r.bottomRight.x-r.topLeft.x)*t.props.w,a=1/(r.bottomRight.y-r.topLeft.y)*t.props.h,u=r.bottomRight.y-r.topLeft.y,s=r.bottomRight.x-r.topLeft.x,c=(0,l.structuredClone)(r);return c.topLeft.x=Math.min(1-s,Math.max(0,c.topLeft.x-n.x/i)),c.topLeft.y=Math.min(1-u,Math.max(0,c.topLeft.y-n.y/a)),c.bottomRight.x=c.topLeft.x+s,c.bottomRight.y=c.topLeft.y+u,{id:t.id,type:t.type,props:{crop:c}}}}},32970:function(e,t,n){"use strict";var r,o=n(50883).default,i=Object.defineProperty,a=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,c={};!function(e,t){for(var n in t)i(e,n,{get:t[n],enumerable:!0})}(c,{MIN_CROP_SIZE:function(){return l}}),e.exports=(r=c,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var c,l=o(u(t));try{var f=function(){var o=c.value;s.call(e,o)||o===n||i(e,o,{get:function(){return t[o]},enumerable:!(r=a(t,o))||r.enumerable})};for(l.s();!(c=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(i({},"__esModule",{value:!0}),r));var l=8},19780:function(e,t,n){"use strict";var r,o=n(12897).default,i=n(17383).default,a=n(34579).default,u=n(18336).default,s=n(29511).default,c=n(43693).default,l=n(50883).default,f=Object.defineProperty,d=Object.getOwnPropertyDescriptor,p=Object.getOwnPropertyNames,h=Object.prototype.hasOwnProperty,v={};!function(e,t){for(var n in t)f(e,n,{get:t[n],enumerable:!0})}(v,{DraggingHandle:function(){return b}}),e.exports=(r=v,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,i=l(p(t));try{var a=function(){var i=o.value;h.call(e,i)||i===n||f(e,i,{get:function(){return t[i]},enumerable:!(r=d(t,i))||r.enumerable})};for(i.s();!(o=i.n()).done;)a()}catch(u){i.e(u)}finally{i.f()}}return e}(f({},"__esModule",{value:!0}),r));var g=n(57777),y=n(64761),m=n(23813),b=function(e){function t(){var e;i(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return e=u(this,t,[].concat(r)),c(e,"shapeId",""),c(e,"initialHandle",{}),c(e,"initialAdjacentHandle",null),c(e,"initialPagePoint",{}),c(e,"markId",""),c(e,"initialPageTransform",void 0),c(e,"initialPageRotation",void 0),c(e,"info",{}),c(e,"isPrecise",!1),c(e,"isPreciseId",null),c(e,"pointingId",null),c(e,"exactTimeout",-1),e}return s(t,e),a(t,[{key:"onEnter",value:function(e){var t=e.shape,n=e.isCreating,r=e.creatingMarkId,i=e.handle;if(this.info=e,this.parent.setCurrentToolIdMask(e.onInteractionEnd),this.shapeId=t.id,this.markId="",n)if(r)this.markId=r;else{var a=this.editor.getMarkIdMatching("creating:".concat(this.editor.getOnlySelectedShapeId()));a&&(this.markId=a)}else this.markId=this.editor.markHistoryStoppingPoint("dragging handle");if(this.initialHandle=(0,g.structuredClone)(i),this.editor.isShapeOfType(t,"line")&&"create"===this.initialHandle.type){this.editor.updateShape(o(o({},t),{},{props:{points:o(o({},t.props.points),{},c({},i.index,{id:i.index,index:i.index,x:i.x,y:i.y}))}}));var u=this.editor.getShapeHandles(t).find((function(e){return e.index===i.index}));this.initialHandle=(0,g.structuredClone)(u)}this.initialPageTransform=this.editor.getShapePageTransform(t),this.initialPageRotation=this.initialPageTransform.rotation(),this.initialPagePoint=this.editor.inputs.originPagePoint.clone(),this.editor.setCursor({type:n?"cross":"grabbing",rotation:0});var s=this.editor.getShapeHandles(t).sort(g.sortByIndex),l=s.findIndex((function(t){return t.id===e.handle.id}));this.initialAdjacentHandle=null;for(var f=l+1;f<s.length;f++){var d=s[f];if("vertex"===d.type&&"middle"!==d.id&&d.id!==e.handle.id){this.initialAdjacentHandle=d;break}}if(!this.initialAdjacentHandle)for(var p=s.length-1;p>=0;p--){var h=s[p];if("vertex"===h.type&&"middle"!==h.id&&h.id!==e.handle.id){this.initialAdjacentHandle=h;break}}if(this.editor.isShapeOfType(t,"arrow")){var v=(0,y.getArrowBindings)(this.editor,t)[e.handle.id];this.isPrecise=!1,v?(this.editor.setHintingShapes([v.toId]),this.isPrecise=v.props.isPrecise,this.isPrecise?this.isPreciseId=v.toId:this.resetExactTimeout()):this.editor.setHintingShapes([])}this.update(),this.editor.select(this.shapeId)}},{key:"resetExactTimeout",value:function(){var e=this;-1!==this.exactTimeout&&this.clearExactTimeout(),this.exactTimeout=this.editor.timers.setTimeout((function(){e.getIsActive()&&!e.isPrecise&&(e.isPrecise=!0,e.isPreciseId=e.pointingId,e.update()),e.exactTimeout=-1}),750)}},{key:"clearExactTimeout",value:function(){-1!==this.exactTimeout&&(clearTimeout(this.exactTimeout),this.exactTimeout=-1)}},{key:"onPointerMove",value:function(){this.update()}},{key:"onKeyDown",value:function(){this.update()}},{key:"onKeyUp",value:function(){this.update()}},{key:"onPointerUp",value:function(){this.complete()}},{key:"onComplete",value:function(){this.update(),this.complete()}},{key:"onCancel",value:function(){this.cancel()}},{key:"onExit",value:function(){this.parent.setCurrentToolIdMask(void 0),this.editor.setHintingShapes([]),this.editor.snaps.clearIndicators(),this.editor.setCursor({type:"default",rotation:0})}},{key:"complete",value:function(){this.editor.snaps.clearIndicators(),(0,m.kickoutOccludedShapes)(this.editor,[this.shapeId]);var e=this.info.onInteractionEnd;this.editor.getInstanceState().isToolLocked&&e?this.editor.setCurrentTool(e,{shapeId:this.shapeId}):this.parent.transition("idle")}},{key:"cancel",value:function(){this.editor.bailToMark(this.markId),this.editor.snaps.clearIndicators();var e=this.info.onInteractionEnd;e?this.editor.setCurrentTool(e,{shapeId:this.shapeId}):this.parent.transition("idle")}},{key:"update",value:function(){var e,t=this.editor,n=this.shapeId,r=this.initialPagePoint,i=this.initialHandle,a=this.initialPageRotation,u=this.initialAdjacentHandle,s=this.editor.getHintingShapeIds(),c=this.editor.user.getIsSnapMode(),l=t.snaps,f=t.inputs,d=f.currentPagePoint,p=f.shiftKey,h=f.ctrlKey,v=f.altKey,m=f.pointerVelocity,b=this.info.shape,w=t.getShape(n);if(w){var S=t.getShapeUtil(w),x=d.clone().sub(r).rot(-a).add(i);if(p&&u&&"middle"!==i.id){var P=g.Vec.Angle(u,x),O=(0,g.snapAngle)(P,24)-P;x=g.Vec.RotWith(x,u,O)}t.snaps.clearIndicators();var k=o(o({},i),{},{x:x.x,y:x.y});if(i.canSnap&&(c?!h:h)){if(!t.getShapePageTransform(w.id))throw Error("Expected a page transform");var _=l.handles.snapHandle({currentShapeId:n,handle:k});_&&(_.nudge.rot(-t.getShapeParentTransform(w).rotation()),x.add(_.nudge),k=o(o({},i),{},{x:x.x,y:x.y}))}var j=null===(e=S.onHandleDrag)||void 0===e?void 0:e.call(S,w,{handle:k,isPrecise:this.isPrecise||v,initial:b}),I=o({id:w.id,type:w.type},j);if("vertex"===i.type&&this.editor.isShapeOfType(w,"arrow")){var T=(0,y.getArrowBindings)(t,w)[i.id];T?s[0]!==T.toId&&(t.setHintingShapes([T.toId]),this.pointingId=T.toId,this.isPrecise=m.len()<.5||v,this.isPreciseId=this.isPrecise?T.toId:null,this.resetExactTimeout()):s.length>0&&(t.setHintingShapes([]),this.pointingId=null,this.isPrecise=!1,this.isPreciseId=null,this.resetExactTimeout())}j&&t.updateShapes([I])}}}])}(g.StateNode);c(b,"id","dragging_handle")},64202:function(e,t,n){"use strict";var r,o=n(17383).default,i=n(34579).default,a=n(18336).default,u=n(29511).default,s=n(43693).default,c=n(50883).default,l=Object.defineProperty,f=Object.getOwnPropertyDescriptor,d=Object.getOwnPropertyNames,p=Object.prototype.hasOwnProperty,h={};!function(e,t){for(var n in t)l(e,n,{get:t[n],enumerable:!0})}(h,{EditingShape:function(){return m}}),e.exports=(r=h,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,i=c(d(t));try{var a=function(){var i=o.value;p.call(e,i)||i===n||l(e,i,{get:function(){return t[i]},enumerable:!(r=f(t,i))||r.enumerable})};for(i.s();!(o=i.n()).done;)a()}catch(u){i.e(u)}finally{i.f()}}return e}(l({},"__esModule",{value:!0}),r));var v=n(57777),g=n(20490),y=n(26795),m=function(e){function t(){var e;o(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return e=a(this,t,[].concat(r)),s(e,"hitShapeForPointerUp",null),s(e,"info",{}),e}return u(t,e),i(t,[{key:"onEnter",value:function(e){var t=this.editor.getEditingShape();if(!t)throw Error("Entered editing state without an editing shape");this.hitShapeForPointerUp=null,this.info=e,e.isCreatingTextWhileToolLocked&&this.parent.setCurrentToolIdMask("text"),(0,y.updateHoveredShapeId)(this.editor),this.editor.select(t)}},{key:"onExit",value:function(){var e,t=this.editor.getCurrentPageState().editingShapeId;if(t){this.editor.setEditingShape(null),y.updateHoveredShapeId.cancel();var n=this.editor.getShape(t),r=this.editor.getShapeUtil(n);null===(e=r.onEditEnd)||void 0===e||e.call(r,n),this.info.isCreatingTextWhileToolLocked&&(this.parent.setCurrentToolIdMask(void 0),this.editor.setCurrentTool("text",{}))}}},{key:"onPointerMove",value:function(e){if(this.hitShapeForPointerUp&&this.editor.inputs.isDragging){if(this.editor.getIsReadonly())return;if(this.hitShapeForPointerUp.isLocked)return;return this.editor.select(this.hitShapeForPointerUp),this.parent.transition("translating",e),void(this.hitShapeForPointerUp=null)}switch(e.target){case"shape":case"canvas":return void(0,y.updateHoveredShapeId)(this.editor)}}},{key:"onPointerDown",value:function(e){if(this.hitShapeForPointerUp=null,"shape"===e.target){var t=e.shape,n=this.editor.getEditingShape();if(!n)throw Error("Expected an editing shape!");var r=this.editor.getShapeUtil(t).getGeometry(t),o=(0,g.getTextLabels)(r),i=1===o.length?o[0]:void 0,a=this.editor.isShapeOfType(n,"text")&&""===n.props.text.trim();if(!i||a)return t.id!==n.id?void this.parent.transition("pointing_shape",e):void(this.editor.isShapeOfType(t,"frame")&&(this.editor.setEditingShape(null),this.parent.transition("idle",e)));var u=this.editor.getPointInShapeSpace(t,this.editor.inputs.currentPagePoint);if(i.bounds.containsPoint(u,0)&&i.hitTestPoint(u))return t.id===n.id?void 0:(this.hitShapeForPointerUp=t,this.editor.markHistoryStoppingPoint("editing on pointer up"),void this.editor.select(t.id))}this.parent.transition("idle",e),this.editor.root.handleEvent(e)}},{key:"onPointerUp",value:function(e){var t=this.hitShapeForPointerUp;if(t){this.hitShapeForPointerUp=null;var n=this.editor.getShapeUtil(t);t.isLocked||(!this.editor.getIsReadonly()||n.canEditInReadOnly(t)?(this.editor.select(t.id),this.editor.setEditingShape(t.id),(0,y.updateHoveredShapeId)(this.editor)):this.parent.transition("pointing_shape",e))}}},{key:"onComplete",value:function(e){this.parent.transition("idle",e)}},{key:"onCancel",value:function(e){this.parent.transition("idle",e)}}])}(v.StateNode);s(m,"id","editing_shape")},87941:function(e,t,n){"use strict";var r,o=n(12897).default,i=n(17383).default,a=n(34579).default,u=n(18336).default,s=n(29511).default,c=n(43693).default,l=n(50883).default,f=Object.defineProperty,d=Object.getOwnPropertyDescriptor,p=Object.getOwnPropertyNames,h=Object.prototype.hasOwnProperty,v={};!function(e,t){for(var n in t)f(e,n,{get:t[n],enumerable:!0})}(v,{GRID_INCREMENT:function(){return _},Idle:function(){return P},MAJOR_NUDGE_FACTOR:function(){return O},MINOR_NUDGE_FACTOR:function(){return k}}),e.exports=(r=v,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,i=l(p(t));try{var a=function(){var i=o.value;h.call(e,i)||i===n||f(e,i,{get:function(){return t[i]},enumerable:!(r=d(t,i))||r.enumerable})};for(i.s();!(o=i.n()).done;)a()}catch(u){i.e(u)}finally{i.f()}}return e}(f({},"__esModule",{value:!0}),r));var g=n(57777),y=n(87179),m=n(38011),b=n(33752),w=n(26795),S=n(23813),x=["Delete","Backspace","[","]","Enter"," ","Shift","Tab"],P=function(e){function t(){return i(this,t),u(this,t,arguments)}return s(t,e),a(t,[{key:"onEnter",value:function(){this.parent.setCurrentToolIdMask(void 0),(0,w.updateHoveredShapeId)(this.editor),this.editor.setCursor({type:"default",rotation:0})}},{key:"onExit",value:function(){w.updateHoveredShapeId.cancel()}},{key:"onPointerMove",value:function(){(0,w.updateHoveredShapeId)(this.editor)}},{key:"onPointerDown",value:function(e){var t=e.ctrlKey&&(0,m.getShouldEnterCropMode)(this.editor);switch(e.target){case"canvas":var n=(0,y.getHitShapeOnCanvasPointerDown)(this.editor);if(n&&!n.isLocked)return void this.onPointerDown(o(o({},e),{},{shape:n,target:"shape"}));var r=this.editor.getSelectedShapeIds(),i=this.editor.getOnlySelectedShape(),a=this.editor.inputs.currentPagePoint;if((r.length>1||i&&!this.editor.getShapeUtil(i).hideSelectionBoundsBg(i))&&j(this.editor,a))return void this.onPointerDown(o(o({},e),{},{target:"selection"}));this.parent.transition("pointing_canvas",e);break;case"shape":var u=e.shape;if(this.isOverArrowLabelTest(u)){this.parent.transition("pointing_arrow_label",e);break}if(this.editor.isShapeOrAncestorLocked(u)){this.parent.transition("pointing_canvas",e);break}this.parent.transition("pointing_shape",e);break;case"handle":if(this.editor.getIsReadonly())break;this.editor.inputs.altKey?this.parent.transition("pointing_shape",e):this.parent.transition("pointing_handle",e);break;case"selection":switch(e.handle){case"mobile_rotate":case"top_left_rotate":case"top_right_rotate":case"bottom_left_rotate":case"bottom_right_rotate":if(e.accelKey){this.parent.transition("brushing",e);break}this.parent.transition("pointing_rotate_handle",e);break;case"top":case"right":case"bottom":case"left":case"top_left":case"top_right":case"bottom_left":case"bottom_right":if(t)this.parent.transition("crop.pointing_crop_handle",e);else{if(e.accelKey){this.parent.transition("brushing",e);break}this.parent.transition("pointing_resize_handle",e)}break;default:var s=this.editor.getHoveredShape();if(s&&!this.editor.getSelectedShapeIds().includes(s.id)&&!s.isLocked)return void this.onPointerDown(o(o({},e),{},{shape:s,target:"shape"}));this.parent.transition("pointing_selection",e)}}}},{key:"onDoubleClick",value:function(e){if(!this.editor.inputs.shiftKey&&"up"===e.phase&&!e.ctrlKey&&!e.shiftKey)switch(e.target){case"canvas":var t,n=this.editor.getHoveredShape(),r=n&&!this.editor.isShapeOfType(n,"group")?n:null!==(t=this.editor.getSelectedShapeAtPoint(this.editor.inputs.currentPagePoint))&&void 0!==t?t:this.editor.getShapeAtPoint(this.editor.inputs.currentPagePoint,{margin:this.editor.options.hitTestMargin/this.editor.getZoomLevel(),hitInside:!1}),i=this.editor.getFocusedGroupId();if(r){if(this.editor.isShapeOfType(r,"group"))return void(0,b.selectOnCanvasPointerUp)(this.editor,e);var a=this.editor.getShape(r.parentId);return!a||!this.editor.isShapeOfType(a,"group")||i&&a.id===i?void this.onDoubleClick(o(o({},e),{},{shape:r,target:"shape"})):void(0,b.selectOnCanvasPointerUp)(this.editor,e)}this.editor.inputs.shiftKey||this.handleDoubleClickOnCanvas(e);break;case"selection":if(this.editor.getIsReadonly())break;var u=this.editor.getOnlySelectedShape();if(u){var s=this.editor.getShapeUtil(u);if(!this.canInteractWithShapeInReadOnly(u))return;if("right"===e.handle||"left"===e.handle||"top"===e.handle||"bottom"===e.handle){var c,l=null===(c=s.onDoubleClickEdge)||void 0===c?void 0:c.call(s,u);if(l)return this.editor.markHistoryStoppingPoint("double click edge"),this.editor.updateShapes([l]),void(0,S.kickoutOccludedShapes)(this.editor,[u.id])}if(s.canCrop(u)&&!this.editor.isShapeOrAncestorLocked(u))return void this.parent.transition("crop",e);this.shouldStartEditingShape(u)&&this.startEditingShape(u,e,!0)}break;case"shape":var f,d=e.shape,p=this.editor.getShapeUtil(d);if("video"!==d.type&&"embed"!==d.type&&this.editor.getIsReadonly())break;if(p.onDoubleClick){var h,v=null===(h=p.onDoubleClick)||void 0===h?void 0:h.call(p,d);if(v)return void this.editor.updateShapes([v])}if(p.canCrop(d)&&!this.editor.isShapeOrAncestorLocked(d))return this.editor.markHistoryStoppingPoint("select and crop"),this.editor.select(null===(f=e.shape)||void 0===f?void 0:f.id),void this.parent.transition("crop",e);this.shouldStartEditingShape(d)?this.startEditingShape(d,e,!0):this.handleDoubleClickOnCanvas(e);break;case"handle":var g;if(this.editor.getIsReadonly())break;var y=e.shape,m=e.handle,w=this.editor.getShapeUtil(y),x=null===(g=w.onDoubleClickHandle)||void 0===g?void 0:g.call(w,y,m);x?this.editor.updateShapes([x]):this.shouldStartEditingShape(y)&&this.startEditingShape(y,e,!0)}}},{key:"onRightClick",value:function(e){switch(e.target){case"canvas":var t=this.editor.getHoveredShape(),n=t&&!this.editor.isShapeOfType(t,"group")?t:this.editor.getShapeAtPoint(this.editor.inputs.currentPagePoint,{margin:this.editor.options.hitTestMargin/this.editor.getZoomLevel(),hitInside:!1,hitLabels:!0,hitLocked:!0,hitFrameInside:!0,renderingOnly:!0});if(n)return void this.onRightClick(o(o({},e),{},{shape:n,target:"shape"}));var r=this.editor.getSelectedShapeIds(),i=this.editor.getOnlySelectedShape(),a=this.editor.inputs.currentPagePoint;if((r.length>1||i&&!this.editor.getShapeUtil(i).hideSelectionBoundsBg(i))&&j(this.editor,a))return void this.onRightClick(o(o({},e),{},{target:"selection"}));this.editor.selectNone();break;case"shape":var u=this.editor.getCurrentPageState().selectedShapeIds,s=e.shape,c=this.editor.getOutermostSelectableShape(s,(function(e){return!u.includes(e.id)}));u.includes(c.id)||this.editor.findShapeAncestor(c,(function(e){return u.includes(e.id)}))||(this.editor.markHistoryStoppingPoint("selecting shape"),this.editor.setSelectedShapes([c.id]))}}},{key:"onCancel",value:function(){this.editor.getFocusedGroupId()!==this.editor.getCurrentPageId()&&this.editor.getSelectedShapeIds().length>0?this.editor.popFocusedGroupId():(this.editor.markHistoryStoppingPoint("clearing selection"),this.editor.selectNone())}},{key:"onKeyDown",value:function(e){switch(e.code){case"ArrowLeft":case"ArrowRight":case"ArrowUp":case"ArrowDown":return void this.nudgeSelectedShapes(!1)}if(g.debugFlags.editOnType.get()&&!x.includes(e.key)&&!e.altKey&&!e.ctrlKey){var t=this.editor.getOnlySelectedShape();if(t&&this.editor.isShapeOfType(t,"note")&&this.shouldStartEditingShape(t))return void this.startEditingShape(t,o(o({},e),{},{target:"shape",shape:t}),!0)}}},{key:"onKeyRepeat",value:function(e){switch(e.code){case"ArrowLeft":case"ArrowRight":case"ArrowUp":case"ArrowDown":this.nudgeSelectedShapes(!0)}}},{key:"onKeyUp",value:function(e){var t=this;if("Enter"===e.code){var n=this.editor.getSelectedShapes();if(n.every((function(e){return t.editor.isShapeOfType(e,"group")})))return void this.editor.setSelectedShapes(n.flatMap((function(e){return t.editor.getSortedChildIdsForParent(e.id)})));var r=this.editor.getOnlySelectedShape();if(r&&this.shouldStartEditingShape(r))return void this.startEditingShape(r,o(o({},e),{},{target:"shape",shape:r}),!0);(0,m.getShouldEnterCropMode)(this.editor)&&this.parent.transition("crop",e)}}},{key:"shouldStartEditingShape",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.editor.getOnlySelectedShape();return!!e&&((!this.editor.isShapeOrAncestorLocked(e)||"embed"===e.type)&&(!!this.canInteractWithShapeInReadOnly(e)&&this.editor.getShapeUtil(e).canEdit(e)))}},{key:"startEditingShape",value:function(e,t,n){this.editor.isShapeOrAncestorLocked(e)&&"embed"!==e.type||(this.editor.markHistoryStoppingPoint("editing shape"),(0,S.startEditingShapeWithLabel)(this.editor,e,n),this.parent.transition("editing_shape",t))}},{key:"isOverArrowLabelTest",value:function(e){if(!e)return!1;var t=this.editor.getPointInShapeSpace(e,this.editor.inputs.currentPagePoint);if(this.editor.isShapeOfType(e,"arrow")){var n=this.editor.getShapeGeometry(e).children[1];if(n&&(0,g.pointInPolygon)(t,n.vertices))return!0}return!1}},{key:"handleDoubleClickOnCanvas",value:function(e){if(!this.editor.getIsReadonly()&&this.editor.options.createTextOnCanvasDoubleClick){this.editor.markHistoryStoppingPoint("creating text shape");var t=(0,g.createShapeId)(),n=this.editor.inputs.currentPagePoint,r=n.x,o=n.y;this.editor.createShapes([{id:t,type:"text",x:r,y:o,props:{text:"",autoSize:!0}}]);var i=this.editor.getShape(t);if(i){var a=this.editor.getShapeUtil(i);this.editor.getIsReadonly()&&!a.canEditInReadOnly(i)||(this.editor.setEditingShape(t),this.editor.select(t),this.parent.transition("editing_shape",e))}}}},{key:"nudgeSelectedShapes",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.editor.inputs.keys,n=t.has("ShiftLeft"),r=new g.Vec(0,0);if(t.has("ArrowLeft")&&(r.x-=1),t.has("ArrowRight")&&(r.x+=1),t.has("ArrowUp")&&(r.y-=1),t.has("ArrowDown")&&(r.y+=1),!r.equals(new g.Vec(0,0))){e||this.editor.markHistoryStoppingPoint("nudge shapes");var o=this.editor.getDocumentSettings().gridSize,i=this.editor.getInstanceState().isGridMode?n?o*_:o:n?O:k,a=this.editor.getSelectedShapeIds();this.editor.nudgeShapes(a,r.mul(i)),(0,S.kickoutOccludedShapes)(this.editor,a)}}},{key:"canInteractWithShapeInReadOnly",value:function(e){return!this.editor.getIsReadonly()||!!this.editor.getShapeUtil(e).canEditInReadOnly(e)}}])}(g.StateNode);c(P,"id","idle");var O=10,k=1,_=5;function j(e,t){var n=e.getSelectionRotatedPageBounds();if(!n)return!1;var r=e.getSelectionRotation();return r?(0,g.pointInPolygon)(t,n.corners.map((function(e){return g.Vec.RotWith(e,n.point,r)}))):n.containsPoint(t)}},70788:function(e,t,n){"use strict";var r,o=n(17383).default,i=n(34579).default,a=n(18336).default,u=n(29511).default,s=n(43693).default,c=n(50883).default,l=Object.defineProperty,f=Object.getOwnPropertyDescriptor,d=Object.getOwnPropertyNames,p=Object.prototype.hasOwnProperty,h={};!function(e,t){for(var n in t)l(e,n,{get:t[n],enumerable:!0})}(h,{PointingArrowLabel:function(){return y}}),e.exports=(r=h,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,i=c(d(t));try{var a=function(){var i=o.value;p.call(e,i)||i===n||l(e,i,{get:function(){return t[i]},enumerable:!(r=f(t,i))||r.enumerable})};for(i.s();!(o=i.n()).done;)a()}catch(u){i.e(u)}finally{i.f()}}return e}(l({},"__esModule",{value:!0}),r));var v=n(57777),g=n(64761),y=function(e){function t(){var e;o(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return e=a(this,t,[].concat(r)),s(e,"shapeId",""),s(e,"markId",""),s(e,"wasAlreadySelected",!1),s(e,"didDrag",!1),s(e,"didCtrlOnEnter",!1),s(e,"info",{}),s(e,"_labelDragOffset",new v.Vec(0,0)),e}return u(t,e),i(t,[{key:"updateCursor",value:function(){this.editor.setCursor({type:"grabbing",rotation:0})}},{key:"onEnter",value:function(e){var t=e.shape;this.parent.setCurrentToolIdMask(e.onInteractionEnd),this.info=e,this.shapeId=t.id,this.didDrag=!1,this.didCtrlOnEnter=e.accelKey,this.wasAlreadySelected=this.editor.getOnlySelectedShapeId()===t.id,this.updateCursor();var n=this.editor.getShapeGeometry(t).children[1];if(!n)throw Error("Expected to find an arrow label geometry for shape: ".concat(t.id));var r=this.editor.inputs.currentPagePoint,o=this.editor.getPointInShapeSpace(t,r);this._labelDragOffset=v.Vec.Sub(n.center,o),this.markId=this.editor.markHistoryStoppingPoint("label-drag start"),this.editor.setSelectedShapes([this.shapeId])}},{key:"onExit",value:function(){this.parent.setCurrentToolIdMask(void 0),this.editor.setCursor({type:"default",rotation:0})}},{key:"onPointerMove",value:function(){if(this.editor.inputs.isDragging)if(this.didCtrlOnEnter)this.parent.transition("brushing",this.info);else{var e=this.editor.getShape(this.shapeId);if(e){var t,n=(0,g.getArrowInfo)(this.editor,e),r=this.editor.getShapeGeometry(e),o=r.children[0],i=this.editor.getPointInShapeSpace(e,this.editor.inputs.currentPagePoint),a=o.nearestPoint(v.Vec.Add(i,this._labelDragOffset));if(n.isStraight){var u=v.Vec.Dist(n.start.point,n.end.point);t=1-v.Vec.Dist(n.end.point,a)/u}else{var s=r.children[0],c=s._center,l=s.measure,f=s.angleEnd,d=s.angleStart;t=(0,v.getPointInArcT)(l,d,f,c.angle(a))}isNaN(t)&&(t=.5),this.didDrag=!0,this.editor.updateShape({id:e.id,type:e.type,props:{labelPosition:t}})}}}},{key:"onPointerUp",value:function(){var e=this.editor.getShape(this.shapeId);e&&(this.didDrag||!this.wasAlreadySelected?this.complete():this.editor.getIsReadonly()||(this.editor.setEditingShape(e.id),this.editor.setCurrentTool("select.editing_shape")))}},{key:"onCancel",value:function(){this.cancel()}},{key:"onComplete",value:function(){this.cancel()}},{key:"onInterrupt",value:function(){this.cancel()}},{key:"complete",value:function(){this.info.onInteractionEnd?this.editor.setCurrentTool(this.info.onInteractionEnd,{}):this.parent.transition("idle")}},{key:"cancel",value:function(){this.editor.bailToMark(this.markId),this.info.onInteractionEnd?this.editor.setCurrentTool(this.info.onInteractionEnd,{}):this.parent.transition("idle")}}])}(v.StateNode);s(y,"id","pointing_arrow_label")},30601:function(e,t,n){"use strict";var r,o=n(17383).default,i=n(34579).default,a=n(18336).default,u=n(29511).default,s=n(43693).default,c=n(50883).default,l=Object.defineProperty,f=Object.getOwnPropertyDescriptor,d=Object.getOwnPropertyNames,p=Object.prototype.hasOwnProperty,h={};!function(e,t){for(var n in t)l(e,n,{get:t[n],enumerable:!0})}(h,{PointingCanvas:function(){return y}}),e.exports=(r=h,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,i=c(d(t));try{var a=function(){var i=o.value;p.call(e,i)||i===n||l(e,i,{get:function(){return t[i]},enumerable:!(r=f(t,i))||r.enumerable})};for(i.s();!(o=i.n()).done;)a()}catch(u){i.e(u)}finally{i.f()}}return e}(l({},"__esModule",{value:!0}),r));var v=n(57777),g=n(33752),y=function(e){function t(){return o(this,t),a(this,t,arguments)}return u(t,e),i(t,[{key:"onEnter",value:function(e){e.shiftKey||e.accelKey||this.editor.getSelectedShapeIds().length>0&&(this.editor.markHistoryStoppingPoint("selecting none"),this.editor.selectNone())}},{key:"onPointerMove",value:function(e){this.editor.inputs.isDragging&&this.parent.transition("brushing",e)}},{key:"onPointerUp",value:function(e){(0,g.selectOnCanvasPointerUp)(this.editor,e),this.complete()}},{key:"onComplete",value:function(){this.complete()}},{key:"onInterrupt",value:function(){this.parent.transition("idle")}},{key:"complete",value:function(){this.parent.transition("idle")}}])}(v.StateNode);s(y,"id","pointing_canvas")},67579:function(e,t,n){"use strict";var r,o=n(12897).default,i=n(17383).default,a=n(34579).default,u=n(18336).default,s=n(29511).default,c=n(43693).default,l=n(50883).default,f=Object.defineProperty,d=Object.getOwnPropertyDescriptor,p=Object.getOwnPropertyNames,h=Object.prototype.hasOwnProperty,v={};!function(e,t){for(var n in t)f(e,n,{get:t[n],enumerable:!0})}(v,{PointingHandle:function(){return w}}),e.exports=(r=v,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,i=l(p(t));try{var a=function(){var i=o.value;h.call(e,i)||i===n||f(e,i,{get:function(){return t[i]},enumerable:!(r=d(t,i))||r.enumerable})};for(i.s();!(o=i.n()).done;)a()}catch(u){i.e(u)}finally{i.f()}}return e}(f({},"__esModule",{value:!0}),r));var g=n(57777),y=n(64761),m=n(8784),b=n(23813),w=function(e){function t(){var e;i(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return e=u(this,t,[].concat(r)),c(e,"didCtrlOnEnter",!1),c(e,"info",{}),e}return s(t,e),a(t,[{key:"onEnter",value:function(e){this.info=e,this.didCtrlOnEnter=e.accelKey;var t=e.shape;if(this.editor.isShapeOfType(t,"arrow")){var n=(0,y.getArrowBindings)(this.editor,t)[e.handle.id];n&&this.editor.setHintingShapes([n.toId])}this.editor.setCursor({type:"grabbing",rotation:0})}},{key:"onExit",value:function(){this.editor.setHintingShapes([]),this.editor.setCursor({type:"default",rotation:0})}},{key:"onPointerUp",value:function(){var e=this.info,t=e.shape,n=e.handle;if(this.editor.isShapeOfType(t,"note")){var r=this.editor,o=S(r,t,n,!1);if(o)return void(0,b.startEditingShapeWithLabel)(r,o,!0)}this.parent.transition("idle",this.info)}},{key:"onPointerMove",value:function(e){this.editor.inputs.isDragging&&(this.didCtrlOnEnter?this.parent.transition("brushing",e):this.startDraggingHandle())}},{key:"onLongPress",value:function(){this.startDraggingHandle()}},{key:"startDraggingHandle",value:function(){var e=this.editor;if(!e.getIsReadonly()){var t=this.info,n=t.shape,r=t.handle;if(e.isShapeOfType(n,"note")){var i=S(e,n,r,!0);if(i){var a=e.getPointInParentSpace(i,e.inputs.originPagePoint).sub(g.Vec.Rot(m.NOTE_CENTER_OFFSET.clone().mul(n.props.scale),i.rotation));return e.updateShape(o(o({},i),{},{x:a.x,y:a.y})),void e.setHoveredShape(i.id).select(i.id).setCurrentTool("select.translating",o(o({},this.info),{},{target:"shape",shape:e.getShape(i),onInteractionEnd:"note",isCreating:!0,onCreate:function(){(0,b.startEditingShapeWithLabel)(e,i,!0)}}))}}this.parent.transition("dragging_handle",this.info)}}},{key:"onCancel",value:function(){this.cancel()}},{key:"onComplete",value:function(){this.cancel()}},{key:"onInterrupt",value:function(){this.cancel()}},{key:"cancel",value:function(){this.parent.transition("idle")}}])}(g.StateNode);function S(e,t,n,r){var o=e.getShapePageTransform(t.id),i=o.point(),a=o.rotation(),u=(0,m.getNoteAdjacentPositions)(e,i,a,t.props.growY,0,t.props.scale)[n.index];if(u)return(0,m.getNoteShapeForAdjacentPosition)(e,t,u,a,r)}c(w,"id","pointing_handle")},17879:function(e,t,n){"use strict";var r,o=n(17383).default,i=n(34579).default,a=n(18336).default,u=n(29511).default,s=n(43693).default,c=n(50883).default,l=Object.defineProperty,f=Object.getOwnPropertyDescriptor,d=Object.getOwnPropertyNames,p=Object.prototype.hasOwnProperty,h={};!function(e,t){for(var n in t)l(e,n,{get:t[n],enumerable:!0})}(h,{CursorTypeMap:function(){return g},PointingResizeHandle:function(){return y}}),e.exports=(r=h,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,i=c(d(t));try{var a=function(){var i=o.value;p.call(e,i)||i===n||l(e,i,{get:function(){return t[i]},enumerable:!(r=f(t,i))||r.enumerable})};for(i.s();!(o=i.n()).done;)a()}catch(u){i.e(u)}finally{i.f()}}return e}(l({},"__esModule",{value:!0}),r));var v=n(57777),g={bottom:"ns-resize",top:"ns-resize",left:"ew-resize",right:"ew-resize",bottom_left:"nesw-resize",bottom_right:"nwse-resize",top_left:"nwse-resize",top_right:"nesw-resize",bottom_left_rotate:"swne-rotate",bottom_right_rotate:"senw-rotate",top_left_rotate:"nwse-rotate",top_right_rotate:"nesw-rotate",mobile_rotate:"grabbing"},y=function(e){function t(){var e;o(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return e=a(this,t,[].concat(r)),s(e,"info",{}),e}return u(t,e),i(t,[{key:"updateCursor",value:function(){var e=this.editor.getSelectedShapes(),t=g[this.info.handle];this.editor.setCursor({type:t,rotation:1===e.length?this.editor.getSelectionRotation():0})}},{key:"onEnter",value:function(e){this.info=e,this.updateCursor()}},{key:"onPointerMove",value:function(){this.editor.inputs.isDragging&&this.startResizing()}},{key:"onLongPress",value:function(){this.startResizing()}},{key:"startResizing",value:function(){this.editor.getIsReadonly()||this.parent.transition("resizing",this.info)}},{key:"onPointerUp",value:function(){this.complete()}},{key:"onCancel",value:function(){this.cancel()}},{key:"onComplete",value:function(){this.cancel()}},{key:"onInterrupt",value:function(){this.cancel()}},{key:"complete",value:function(){this.info.onInteractionEnd?this.editor.setCurrentTool(this.info.onInteractionEnd,{}):this.parent.transition("idle")}},{key:"cancel",value:function(){this.info.onInteractionEnd?this.editor.setCurrentTool(this.info.onInteractionEnd,{}):this.parent.transition("idle")}}])}(v.StateNode);s(y,"id","pointing_resize_handle")},13892:function(e,t,n){"use strict";var r,o=n(17383).default,i=n(34579).default,a=n(18336).default,u=n(29511).default,s=n(43693).default,c=n(50883).default,l=Object.defineProperty,f=Object.getOwnPropertyDescriptor,d=Object.getOwnPropertyNames,p=Object.prototype.hasOwnProperty,h={};!function(e,t){for(var n in t)l(e,n,{get:t[n],enumerable:!0})}(h,{PointingRotateHandle:function(){return y}}),e.exports=(r=h,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,i=c(d(t));try{var a=function(){var i=o.value;p.call(e,i)||i===n||l(e,i,{get:function(){return t[i]},enumerable:!(r=f(t,i))||r.enumerable})};for(i.s();!(o=i.n()).done;)a()}catch(u){i.e(u)}finally{i.f()}}return e}(l({},"__esModule",{value:!0}),r));var v=n(57777),g=n(17879),y=function(e){function t(){var e;o(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return e=a(this,t,[].concat(r)),s(e,"info",{}),e}return u(t,e),i(t,[{key:"updateCursor",value:function(){this.editor.setCursor({type:g.CursorTypeMap[this.info.handle],rotation:this.editor.getSelectionRotation()})}},{key:"onEnter",value:function(e){this.parent.setCurrentToolIdMask(e.onInteractionEnd),this.info=e,this.updateCursor()}},{key:"onExit",value:function(){this.parent.setCurrentToolIdMask(void 0),this.editor.setCursor({type:"default",rotation:0})}},{key:"onPointerMove",value:function(){this.editor.inputs.isDragging&&this.startRotating()}},{key:"onLongPress",value:function(){this.startRotating()}},{key:"startRotating",value:function(){this.editor.getIsReadonly()||this.parent.transition("rotating",this.info)}},{key:"onPointerUp",value:function(){this.complete()}},{key:"onCancel",value:function(){this.cancel()}},{key:"onComplete",value:function(){this.cancel()}},{key:"onInterrupt",value:function(){this.cancel()}},{key:"complete",value:function(){this.info.onInteractionEnd?this.editor.setCurrentTool(this.info.onInteractionEnd,{}):this.parent.transition("idle")}},{key:"cancel",value:function(){this.info.onInteractionEnd?this.editor.setCurrentTool(this.info.onInteractionEnd,{}):this.parent.transition("idle")}}])}(v.StateNode);s(y,"id","pointing_rotate_handle")},18683:function(e,t,n){"use strict";var r,o=n(12897).default,i=n(17383).default,a=n(34579).default,u=n(18336).default,s=n(29511).default,c=n(43693).default,l=n(50883).default,f=Object.defineProperty,d=Object.getOwnPropertyDescriptor,p=Object.getOwnPropertyNames,h=Object.prototype.hasOwnProperty,v={};!function(e,t){for(var n in t)f(e,n,{get:t[n],enumerable:!0})}(v,{PointingSelection:function(){return m}}),e.exports=(r=v,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,i=l(p(t));try{var a=function(){var i=o.value;h.call(e,i)||i===n||f(e,i,{get:function(){return t[i]},enumerable:!(r=d(t,i))||r.enumerable})};for(i.s();!(o=i.n()).done;)a()}catch(u){i.e(u)}finally{i.f()}}return e}(f({},"__esModule",{value:!0}),r));var g=n(57777),y=n(33752),m=function(e){function t(){var e;i(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return e=u(this,t,[].concat(r)),c(e,"info",{}),e}return s(t,e),a(t,[{key:"onEnter",value:function(e){this.info=e}},{key:"onPointerUp",value:function(e){(0,y.selectOnCanvasPointerUp)(this.editor,e),this.parent.transition("idle",e)}},{key:"onPointerMove",value:function(e){this.editor.inputs.isDragging&&this.startTranslating(e)}},{key:"onLongPress",value:function(e){this.startTranslating(e)}},{key:"startTranslating",value:function(e){this.editor.getIsReadonly()||this.parent.transition("translating",e)}},{key:"onDoubleClick",value:function(e){var t,n,r=this.editor.getHoveredShape(),i=r&&!this.editor.isShapeOfType(r,"group")?r:this.editor.getShapeAtPoint(this.editor.inputs.currentPagePoint,{hitInside:!0,margin:0,renderingOnly:!0});if(i)return this.parent.transition("idle"),void(null===(t=(n=this.parent).onDoubleClick)||void 0===t||t.call(n,o(o({},e),{},{target:"shape",shape:this.editor.getShape(i)})))}},{key:"onCancel",value:function(){this.cancel()}},{key:"onComplete",value:function(){this.cancel()}},{key:"onInterrupt",value:function(){this.cancel()}},{key:"cancel",value:function(){this.parent.transition("idle")}}])}(g.StateNode);c(m,"id","pointing_selection")},40932:function(e,t,n){"use strict";var r,o=n(41132).default,i=n(17383).default,a=n(34579).default,u=n(18336).default,s=n(29511).default,c=n(43693).default,l=n(50883).default,f=Object.defineProperty,d=Object.getOwnPropertyDescriptor,p=Object.getOwnPropertyNames,h=Object.prototype.hasOwnProperty,v={};!function(e,t){for(var n in t)f(e,n,{get:t[n],enumerable:!0})}(v,{PointingShape:function(){return m}}),e.exports=(r=v,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,i=l(p(t));try{var a=function(){var i=o.value;h.call(e,i)||i===n||f(e,i,{get:function(){return t[i]},enumerable:!(r=d(t,i))||r.enumerable})};for(i.s();!(o=i.n()).done;)a()}catch(u){i.e(u)}finally{i.f()}}return e}(f({},"__esModule",{value:!0}),r));var g=n(57777),y=n(20490),m=function(e){function t(){var e;i(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return e=u(this,t,[].concat(r)),c(e,"hitShape",{}),c(e,"hitShapeForPointerUp",{}),c(e,"isDoubleClick",!1),c(e,"didCtrlOnEnter",!1),c(e,"didSelectOnEnter",!1),e}return s(t,e),a(t,[{key:"onEnter",value:function(e){var t=this.editor.getSelectedShapeIds(),n=this.editor.getSelectionRotatedPageBounds(),r=this.editor.getFocusedGroupId(),i=this.editor.inputs.currentPagePoint,a=e.shiftKey,u=e.altKey,s=e.accelKey;this.hitShape=e.shape,this.isDoubleClick=!1,this.didCtrlOnEnter=s;var c=this.editor.getOutermostSelectableShape(e.shape),l=this.editor.findShapeAncestor(c,(function(e){return t.includes(e.id)}));if(this.didCtrlOnEnter||this.editor.getShapeUtil(e.shape).onClick||c.id===r||t.includes(c.id)||l||t.length>1&&null!==n&&void 0!==n&&n.containsPoint(i))return this.didSelectOnEnter=!1,void(this.hitShapeForPointerUp=c);this.didSelectOnEnter=!0,a&&!u?(this.editor.cancelDoubleClick(),t.includes(c.id)||(this.editor.markHistoryStoppingPoint("shift selecting shape"),this.editor.setSelectedShapes([].concat(o(t),[c.id])))):(this.editor.markHistoryStoppingPoint("selecting shape"),this.editor.setSelectedShapes([c.id]))}},{key:"onPointerUp",value:function(e){var t,n=this,r=this.editor.getSelectedShapeIds(),i=this.editor.getFocusedGroupId(),a=this.editor.getZoomLevel(),u=this.editor.inputs.currentPagePoint,s=e.shiftKey||e.accelKey,c=null!==(t=this.editor.getShapeAtPoint(u,{margin:this.editor.options.hitTestMargin/a,hitInside:!0,renderingOnly:!0}))&&void 0!==t?t:this.hitShape,l=c?this.editor.getOutermostSelectableShape(c):this.hitShapeForPointerUp;if(l){var f=this.editor.getShapeUtil(l);if(f.onClick){var d,p=null===(d=f.onClick)||void 0===d?void 0:d.call(f,l);if(p)return this.editor.markHistoryStoppingPoint("shape on click"),this.editor.updateShapes([p]),void this.parent.transition("idle",e)}if(l.id===i)return r.length>0?(this.editor.markHistoryStoppingPoint("clearing shape ids"),this.editor.setSelectedShapes([])):this.editor.popFocusedGroupId(),void this.parent.transition("idle",e)}if(!this.didSelectOnEnter){var h=this.editor.getOutermostSelectableShape(c,(function(e){return!r.includes(e.id)}));if(r.includes(h.id))if(s)this.editor.markHistoryStoppingPoint("deselecting on pointer up"),this.editor.deselect(l);else if(r.includes(l.id)){if(1===r.length){var v=this.editor.getShapeUtil(l).getGeometry(l),g=(0,y.getTextLabels)(v),m=1===g.length?g[0]:void 0;if(m){var b=this.editor.getPointInShapeSpace(l,u);if(m.bounds.containsPoint(b,0)&&m.hitTestPoint(b))return void this.editor.run((function(){n.editor.markHistoryStoppingPoint("editing on pointer up"),n.editor.select(l.id);var e=n.editor.getShapeUtil(l);n.editor.getIsReadonly()&&!e.canEditInReadOnly(l)||(n.editor.setEditingShape(l.id),n.editor.setCurrentTool("select.editing_shape"),n.isDoubleClick&&n.editor.emit("select-all-text",{shapeId:l.id}))}))}}this.editor.markHistoryStoppingPoint("selecting on pointer up"),this.editor.select(l.id)}else this.editor.markHistoryStoppingPoint("selecting on pointer up"),this.editor.select(l);else if(s){var w=this.editor.getShapeAncestors(h);this.editor.markHistoryStoppingPoint("shift deselecting on pointer up"),this.editor.setSelectedShapes([].concat(o(this.editor.getSelectedShapeIds().filter((function(e){return!w.find((function(t){return t.id===e}))}))),[h.id]))}else this.editor.markHistoryStoppingPoint("selecting on pointer up"),this.editor.setSelectedShapes([h.id])}this.parent.transition("idle",e)}},{key:"onDoubleClick",value:function(){this.isDoubleClick=!0}},{key:"onPointerMove",value:function(e){this.editor.inputs.isDragging&&(this.didCtrlOnEnter?this.parent.transition("brushing",e):this.startTranslating(e))}},{key:"onLongPress",value:function(e){this.startTranslating(e)}},{key:"startTranslating",value:function(e){this.editor.getIsReadonly()||(this.editor.focus(),this.parent.transition("translating",e))}},{key:"onCancel",value:function(){this.cancel()}},{key:"onComplete",value:function(){this.cancel()}},{key:"onInterrupt",value:function(){this.cancel()}},{key:"cancel",value:function(){this.parent.transition("idle")}}])}(g.StateNode);c(m,"id","pointing_shape")},67864:function(e,t,n){"use strict";var r,o=n(12897).default,i=n(41132).default,a=n(17383).default,u=n(34579).default,s=n(18336).default,c=n(29511).default,l=n(43693).default,f=n(50883).default,d=Object.defineProperty,p=Object.getOwnPropertyDescriptor,h=Object.getOwnPropertyNames,v=Object.prototype.hasOwnProperty,g={};!function(e,t){for(var n in t)d(e,n,{get:t[n],enumerable:!0})}(g,{Resizing:function(){return b},rotateSelectionHandle:function(){return S}}),e.exports=(r=g,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,i=f(h(t));try{var a=function(){var i=o.value;v.call(e,i)||i===n||d(e,i,{get:function(){return t[i]},enumerable:!(r=p(t,i))||r.enumerable})};for(i.s();!(o=i.n()).done;)a()}catch(u){i.e(u)}finally{i.f()}}return e}(d({},"__esModule",{value:!0}),r));var y=n(57777),m=n(23813),b=function(e){function t(){var e;a(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return e=s(this,t,[].concat(r)),l(e,"info",{}),l(e,"markId",""),l(e,"didHoldCommand",!1),l(e,"creationCursorOffset",{x:0,y:0}),l(e,"snapshot",{}),e}return c(t,e),u(t,[{key:"onEnter",value:function(e){var t=e.isCreating,n=void 0!==t&&t,r=e.creatingMarkId,o=e.creationCursorOffset,i=void 0===o?{x:0,y:0}:o;if(this.info=e,this.didHoldCommand=!1,this.parent.setCurrentToolIdMask(e.onInteractionEnd),this.creationCursorOffset=i,this.snapshot=this._createSnapshot(),this.markId="",n)if(r)this.markId=r;else{var a=this.editor.getMarkIdMatching("creating:".concat(this.editor.getOnlySelectedShapeId()));a&&(this.markId=a)}else this.markId=this.editor.markHistoryStoppingPoint("starting resizing");n&&this.editor.setCursor({type:"cross",rotation:0}),this.handleResizeStart(),this.updateShapes()}},{key:"onTick",value:function(e){var t=e.elapsed;this.editor.edgeScrollManager.updateEdgeScrolling(t)}},{key:"onPointerMove",value:function(){this.updateShapes()}},{key:"onKeyDown",value:function(){this.updateShapes()}},{key:"onKeyUp",value:function(){this.updateShapes()}},{key:"onPointerUp",value:function(){this.complete()}},{key:"onComplete",value:function(){this.complete()}},{key:"onCancel",value:function(){this.cancel()}},{key:"cancel",value:function(){this.editor.bailToMark(this.markId),this.info.onInteractionEnd?this.editor.setCurrentTool(this.info.onInteractionEnd,{}):this.parent.transition("idle")}},{key:"complete",value:function(){var e,t;((0,m.kickoutOccludedShapes)(this.editor,this.snapshot.selectedShapeIds),this.handleResizeEnd(),this.info.isCreating&&this.info.onCreate)?null===(e=(t=this.info).onCreate)||void 0===e||e.call(t,this.editor.getOnlySelectedShape()):this.editor.getInstanceState().isToolLocked&&this.info.onInteractionEnd?this.editor.setCurrentTool(this.info.onInteractionEnd,{}):this.parent.transition("idle")}},{key:"handleResizeStart",value:function(){var e=this,t=this.snapshot.shapeSnapshots,n=[];t.forEach((function(t){var r,o=t.shape,i=e.editor.getShapeUtil(o),a=null===(r=i.onResizeStart)||void 0===r?void 0:r.call(i,o);a&&n.push(a)})),n.length>0&&this.editor.updateShapes(n)}},{key:"handleResizeEnd",value:function(){var e=this,t=this.snapshot.shapeSnapshots,n=[];t.forEach((function(t){var r,o=t.shape,i=e.editor.getShape(o.id),a=e.editor.getShapeUtil(o),u=null===(r=a.onResizeEnd)||void 0===r?void 0:r.call(a,o,i);u&&n.push(u)})),n.length>0&&this.editor.updateShapes(n)}},{key:"updateShapes",value:function(){var e=this.editor.inputs,t=e.altKey,n=e.shiftKey,r=this.snapshot,o=r.frames,a=r.shapeSnapshots,u=r.selectionBounds,s=r.cursorHandleOffset,c=r.selectedShapeIds,l=r.selectionRotation,d=r.canShapesDeform,p=n||!d;if(1===a.size){var h=i(a.values())[0];this.editor.isShapeOfType(h.shape,"text")&&(p=!("left"===this.info.handle||"right"===this.info.handle))}var v=this.editor.inputs.ctrlKey,g=this.editor.inputs.currentPagePoint.clone().sub(s).sub(this.creationCursorOffset),m=this.editor.inputs.originPagePoint.clone().sub(s);if(this.editor.getInstanceState().isGridMode&&!v){var b=this.editor.getDocumentSettings().gridSize;g.snapToGrid(b)}var w=this.info.handle,x=S(w,Math.PI);if(this.editor.snaps.clearIndicators(),(this.editor.user.getIsSnapMode()?!v:v)&&l%y.HALF_PI===0){var P=this.editor.snaps.shapeBounds.snapResizeShapes({dragDelta:y.Vec.Sub(g,m),initialSelectionPageBounds:this.snapshot.initialSelectionPageBounds,handle:S(w,l),isAspectRatioLocked:p,isResizingFromCenter:t}).nudge;g.add(P)}var O=y.Vec.RotWith(t?u.center:u.getHandlePoint(x),u.point,l),k=y.Vec.Sub(g,O).rot(-l),_=y.Vec.Sub(m,O).rot(-l),j=y.Vec.DivV(k,_);Number.isFinite(j.x)||(j.x=1),Number.isFinite(j.y)||(j.y=1);var I="top"===w||"bottom"===w,T="left"===w||"right"===w;p?T?j.y=Math.abs(j.x):I?j.x=Math.abs(j.y):Math.abs(j.x)>Math.abs(j.y)?j.y=Math.abs(j.x)*(j.y<0?-1:1):j.x=Math.abs(j.y)*(j.x<0?-1:1):(I&&(j.x=1),T&&(j.y=1)),this.info.isCreating||this.updateCursor({dragHandle:w,isFlippedX:j.x<0,isFlippedY:j.y<0,rotation:l});var E,C=f(a.keys());try{for(C.s();!(E=C.n()).done;){var M=E.value,A=a.get(M);this.editor.resizeShape(M,j,{initialShape:A.shape,initialBounds:A.bounds,initialPageTransform:A.pageTransform,dragHandle:w,mode:1===c.length&&M===c[0]?"resize_bounds":"scale_shape",scaleOrigin:O,isAspectRatioLocked:p,scaleAxisRotation:l,skipStartAndEndCallbacks:!0})}}catch(J){C.e(J)}finally{C.f()}if(this.editor.inputs.ctrlKey){this.didHoldCommand=!0;var D,R=f(o);try{for(R.s();!(D=R.n()).done;){var N=D.value,L=N.id,U=N.children;if(U.length){var F=a.get(L).shape,B=this.editor.getShape(L);if(F&&B){var V=B.x-F.x,z=B.y-F.y,H=new y.Vec(V,z).rot(-F.rotation);if(0!==H.x||0!==H.y){var K,G=f(U);try{for(G.s();!(K=G.n()).done;){var q=K.value;this.editor.updateShape({id:q.id,type:q.type,x:q.x-H.x,y:q.y-H.y})}}catch(J){G.e(J)}finally{G.f()}}}}}}catch(J){R.e(J)}finally{R.f()}}else if(this.didHoldCommand){this.didHoldCommand=!1;var W,Y=f(o);try{for(Y.s();!(W=Y.n()).done;){var X=W.value.children;if(X.length){var Z,$=f(X);try{for($.s();!(Z=$.n()).done;){var Q=Z.value;this.editor.updateShape({id:Q.id,type:Q.type,x:Q.x,y:Q.y})}}catch(J){$.e(J)}finally{$.f()}}}}catch(J){Y.e(J)}finally{Y.f()}}}},{key:"updateCursor",value:function(e){var t=e.dragHandle,n=e.isFlippedX,r=e.isFlippedY,i=e.rotation,a=o({},this.editor.getInstanceState().cursor);switch(t){case"top_left":case"bottom_right":a.type="nwse-resize",n!==r&&(a.type="nesw-resize");break;case"top_right":case"bottom_left":a.type="nesw-resize",n!==r&&(a.type="nwse-resize")}a.rotation=i,this.editor.setCursor(a)}},{key:"onExit",value:function(){this.parent.setCurrentToolIdMask(void 0),this.editor.setCursor({type:"default",rotation:0}),this.editor.snaps.clearIndicators()}},{key:"_createSnapshot",value:function(){var e=this,t=this.editor.getSelectedShapeIds(),n=this.editor.getSelectionRotation(),r=this.editor.inputs.originPagePoint,o=this.editor.getSelectionRotatedPageBounds(),a=y.Vec.RotWith(o.getHandlePoint(this.info.handle),o.point,n),u=y.Vec.Sub(r,a),s=new Map,c=[];t.forEach((function(n){var r=e.editor.getShape(n);if(r){if("frame"===r.type&&c.push({id:n,children:(0,y.compact)(e.editor.getSortedChildIdsForParent(r).map((function(t){return e.editor.getShape(t)})))}),s.set(r.id,e._createShapeSnapshot(r)),e.editor.isShapeOfType(r,"frame")&&1===t.length)return;e.editor.visitDescendants(r.id,(function(t){var n=e.editor.getShape(t);if(n&&(s.set(n.id,e._createShapeSnapshot(n)),e.editor.isShapeOfType(n,"frame")))return!1}))}}));var l=!i(s.values()).some((function(e){return!(0,y.areAnglesCompatible)(e.pageRotation,n)||e.isAspectRatioLocked}));return{shapeSnapshots:s,selectionBounds:o,cursorHandleOffset:u,selectionRotation:n,selectedShapeIds:t,canShapesDeform:l,initialSelectionPageBounds:this.editor.getSelectionPageBounds(),frames:c}}},{key:"_createShapeSnapshot",value:function(e){var t=this.editor.getShapePageTransform(e),n=this.editor.getShapeUtil(e);return{shape:e,bounds:this.editor.getShapeGeometry(e).bounds,pageTransform:t,pageRotation:y.Mat.Decompose(t).rotation,isAspectRatioLocked:n.isAspectRatioLocked(e)}}}])}(y.StateNode);l(b,"id","resizing");var w=["top","top_right","right","bottom_right","bottom","bottom_left","left","top_left"];function S(e,t){t%=y.PI2;var n=Math.round(t/(y.PI/4)),r=w.indexOf(e);return w[(r+n)%w.length]}},76644:function(e,t,n){"use strict";var r,o=n(17383).default,i=n(34579).default,a=n(18336).default,u=n(29511).default,s=n(43693).default,c=n(50883).default,l=Object.defineProperty,f=Object.getOwnPropertyDescriptor,d=Object.getOwnPropertyNames,p=Object.prototype.hasOwnProperty,h={};!function(e,t){for(var n in t)l(e,n,{get:t[n],enumerable:!0})}(h,{Rotating:function(){return b}}),e.exports=(r=h,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,i=c(d(t));try{var a=function(){var i=o.value;p.call(e,i)||i===n||l(e,i,{get:function(){return t[i]},enumerable:!(r=f(t,i))||r.enumerable})};for(i.s();!(o=i.n()).done;)a()}catch(u){i.e(u)}finally{i.f()}}return e}(l({},"__esModule",{value:!0}),r));var v=n(57777),g=n(23813),y=n(17879),m=Math.PI/180,b=function(e){function t(){var e;o(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return e=a(this,t,[].concat(r)),s(e,"snapshot",{}),s(e,"info",{}),s(e,"markId",""),e}return u(t,e),i(t,[{key:"onEnter",value:function(e){this.info=e,this.parent.setCurrentToolIdMask(e.onInteractionEnd),this.markId=this.editor.markHistoryStoppingPoint("rotate start");var t=(0,v.getRotationSnapshot)({editor:this.editor,ids:this.editor.getSelectedShapeIds()});if(!t)return this.parent.transition("idle",this.info);this.snapshot=t;var n=this._getRotationFromPointerPosition({snapToNearestDegree:!1});(0,v.applyRotationToSnapshotShapes)({editor:this.editor,delta:this._getRotationFromPointerPosition({snapToNearestDegree:!1}),snapshot:this.snapshot,stage:"start"}),this.editor.setCursor({type:y.CursorTypeMap[this.info.handle],rotation:n+this.snapshot.initialShapesRotation})}},{key:"onExit",value:function(){this.editor.setCursor({type:"default",rotation:0}),this.parent.setCurrentToolIdMask(void 0),this.snapshot={}}},{key:"onPointerMove",value:function(){this.update()}},{key:"onKeyDown",value:function(){this.update()}},{key:"onKeyUp",value:function(){this.update()}},{key:"onPointerUp",value:function(){this.complete()}},{key:"onComplete",value:function(){this.complete()}},{key:"onCancel",value:function(){this.cancel()}},{key:"update",value:function(){var e=this._getRotationFromPointerPosition({snapToNearestDegree:!1});(0,v.applyRotationToSnapshotShapes)({editor:this.editor,delta:e,snapshot:this.snapshot,stage:"update"}),this.editor.setCursor({type:y.CursorTypeMap[this.info.handle],rotation:e+this.snapshot.initialShapesRotation})}},{key:"cancel",value:function(){this.editor.bailToMark(this.markId),this.info.onInteractionEnd?this.editor.setCurrentTool(this.info.onInteractionEnd,this.info):this.parent.transition("idle",this.info)}},{key:"complete",value:function(){(0,v.applyRotationToSnapshotShapes)({editor:this.editor,delta:this._getRotationFromPointerPosition({snapToNearestDegree:!0}),snapshot:this.snapshot,stage:"end"}),(0,g.kickoutOccludedShapes)(this.editor,this.snapshot.shapeSnapshots.map((function(e){return e.shape.id}))),this.info.onInteractionEnd?this.editor.setCurrentTool(this.info.onInteractionEnd,this.info):this.parent.transition("idle",this.info)}},{key:"_getRotationFromPointerPosition",value:function(e){var t=e.snapToNearestDegree,n=this.editor.getSelectionRotation(),r=this.editor.getSelectionRotatedPageBounds(),o=this.editor.inputs,i=o.shiftKey,a=o.currentPagePoint,u=this.snapshot,s=u.initialCursorAngle,c=u.initialShapesRotation;if(!r)return c;var l=c+(r.center.clone().rotWith(r.point,n).angle(a)-s);if(i)l=(0,v.snapAngle)(l,24);else if(t&&(l=Math.round(l/m)*m,this.editor.getInstanceState().isCoarsePointer)){var f=(0,v.snapAngle)(l,4),d=(0,v.shortAngleDist)(l,f);Math.abs(d)<(0,v.degreesToRadians)(5)&&(l=f)}return l-c}}])}(v.StateNode);s(b,"id","rotating")},23731:function(e,t,n){"use strict";var r,o=n(41132).default,i=n(17383).default,a=n(34579).default,u=n(18336).default,s=n(29511).default,c=n(43693).default,l=n(50883).default,f=Object.defineProperty,d=Object.getOwnPropertyDescriptor,p=Object.getOwnPropertyNames,h=Object.prototype.hasOwnProperty,v={};!function(e,t){for(var n in t)f(e,n,{get:t[n],enumerable:!0})}(v,{ScribbleBrushing:function(){return y}}),e.exports=(r=v,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,i=l(p(t));try{var a=function(){var i=o.value;h.call(e,i)||i===n||f(e,i,{get:function(){return t[i]},enumerable:!(r=d(t,i))||r.enumerable})};for(i.s();!(o=i.n()).done;)a()}catch(u){i.e(u)}finally{i.f()}}return e}(f({},"__esModule",{value:!0}),r));var g=n(57777),y=function(e){function t(){var e;i(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return e=u(this,t,[].concat(r)),c(e,"hits",new Set),c(e,"size",0),c(e,"scribbleId","id"),c(e,"initialSelectedShapeIds",new Set),c(e,"newlySelectedShapeIds",new Set),e}return s(t,e),a(t,[{key:"onEnter",value:function(){this.initialSelectedShapeIds=new Set(this.editor.inputs.shiftKey?this.editor.getSelectedShapeIds():[]),this.newlySelectedShapeIds=new Set,this.size=0,this.hits.clear();var e=this.editor.scribbles.addScribble({color:"selection-stroke",opacity:.32,size:12});this.scribbleId=e.id,this.updateScribbleSelection(!0),this.editor.updateInstanceState({brush:null})}},{key:"onExit",value:function(){this.editor.scribbles.stop(this.scribbleId)}},{key:"onPointerMove",value:function(){this.updateScribbleSelection(!0)}},{key:"onPointerUp",value:function(){this.complete()}},{key:"onKeyDown",value:function(){this.updateScribbleSelection(!1)}},{key:"onKeyUp",value:function(){this.editor.inputs.altKey?this.updateScribbleSelection(!1):this.parent.transition("brushing")}},{key:"onCancel",value:function(){this.cancel()}},{key:"onComplete",value:function(){this.complete()}},{key:"pushPointToScribble",value:function(){var e=this.editor.inputs.currentPagePoint,t=e.x,n=e.y;this.editor.scribbles.addPoint(this.scribbleId,t,n)}},{key:"updateScribbleSelection",value:function(e){var t=this.editor,n=this.editor.getCurrentPageRenderingShapesSorted(),r=this.editor.inputs,i=r.shiftKey,a=r.originPagePoint,u=r.previousPagePoint,s=r.currentPagePoint,c=this.newlySelectedShapeIds,l=this.initialSelectedShapeIds;e&&this.pushPointToScribble();for(var f,d,p,h,v=n,y=0,m=v.length;y<m;y++)if(f=v[y],!(t.isShapeOfType(f,"group")||c.has(f.id)||t.isShapeOrAncestorLocked(f))&&(d=t.getShapeGeometry(f),!t.isShapeOfType(f,"frame")||!d.bounds.containsPoint(t.getPointInShapeSpace(f,a)))){var b=t.getShapePageTransform(f);if(d&&b){var w=b.clone().invert();p=w.applyToPoint(u),h=w.applyToPoint(s);var S=d.bounds;if(!(S.minX-0>Math.max(p.x,h.x)||S.minY-0>Math.max(p.y,h.y)||S.maxX+0<Math.min(p.x,h.x)||S.maxY+0<Math.min(p.y,h.y))&&d.hitTestLineSegment(p,h,0)){var x=this.editor.getOutermostSelectableShape(f),P=this.editor.getShapeMask(x.id);if(P)if(null!==(0,g.intersectLineSegmentPolygon)(u,s,P))if(!(0,g.pointInPolygon)(s,P))continue;c.add(x.id)}}}var O=t.getSelectedShapeIds(),k=new Set(i?[].concat(o(c),o(l)):o(c));(O.length!==k.size||O.some((function(e){return!k.has(e)})))&&this.editor.setSelectedShapes(Array.from(k))}},{key:"complete",value:function(){this.updateScribbleSelection(!0),this.parent.transition("idle")}},{key:"cancel",value:function(){this.editor.setSelectedShapes(o(this.initialSelectedShapeIds)),this.parent.transition("idle")}}])}(g.StateNode);c(y,"id","scribble_brushing")},6442:function(e,t,n){"use strict";var r,o=n(17383).default,i=n(34579).default,a=n(18336).default,u=n(29511).default,s=n(11303).default,c=n(50883).default,l=Object.create,f=Object.defineProperty,d=Object.getOwnPropertyDescriptor,p=Object.getOwnPropertyNames,h=Object.prototype.hasOwnProperty,v=function(e,t){return(t=Symbol[e])?t:Symbol.for("Symbol."+e)},g=function(e){throw TypeError(e)},y=function(e,t,n){return t in e?f(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},m=function(e,t){return f(e,"name",{value:t,configurable:!0})},b=["class","method","getter","setter","accessor","field","value","get","set"],w=function(e){return void 0!==e&&"function"!==typeof e?g("Function expected"):e},S=function(e,t,n,r,o){return{kind:b[e],name:t,metadata:r,addInitializer:function(e){return n._?g("Already initialized"):o.push(w(e||null))}}},x=function(e,t){return y(t,v("metadata"),e[3])},P=function(e,t,n){return y(e,"symbol"!==typeof t?t+"":t,n)},O=function(e,t,n){return t.has(e)||g("Cannot "+n)},k=function(e,t){return Object(t)!==t?g('Cannot use the "in" operator on this value'):e.has(t)},_=function(e,t,n){return O(e,t,"read from private field"),n?n.call(e):t.get(e)},j=function(e,t,n,r){return O(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n},I=function(e,t,n){return O(e,t,"access private method"),n},T={};!function(e,t){for(var n in t)f(e,n,{get:t[n],enumerable:!0})}(T,{Translating:function(){return L},moveShapesToPoint:function(){return F}}),e.exports=(r=T,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,i=c(p(t));try{var a=function(){var i=o.value;h.call(e,i)||i===n||f(e,i,{get:function(){return t[i]},enumerable:!(r=d(t,i))||r.enumerable})};for(i.s();!(o=i.n()).done;)a()}catch(u){i.e(u)}finally{i.f()}}return e}(f({},"__esModule",{value:!0}),r));var E,C,M,A=n(57777),D=n(8784),R=n(51583),N=n(23813),L=function(e){function t(){var e;return o(this,t),e=a(this,t,arguments),function(e,t,n,r){for(var o=0,i=e[t>>1],a=i&&i.length;o<a;o++)1&t?i[o].call(n):r=i[o].call(n,r)}(M,5,e),P(e,"info",{}),P(e,"selectionSnapshot",{}),P(e,"snapshot",{}),P(e,"markId",""),P(e,"isCloning",!1),P(e,"isCreating",!1),P(e,"dragAndDropManager",new R.DragAndDropManager(e.editor)),e}return u(t,e),i(t,[{key:"onCreate",value:function(e){}},{key:"onEnter",value:function(e){var t,n=e.isCreating,r=void 0!==n&&n,o=e.creatingMarkId,i=e.onCreate,a=void 0===i?function(){}:i;if(null!==(t=this.editor.getSelectedShapeIds())&&void 0!==t&&t.length){if(this.info=e,this.parent.setCurrentToolIdMask(e.onInteractionEnd),this.isCreating=r,this.markId="",r)if(o)this.markId=o;else{var u=this.editor.getMarkIdMatching("creating:".concat(this.editor.getOnlySelectedShapeId()));u&&(this.markId=u)}else this.markId=this.editor.markHistoryStoppingPoint("translating");this.onCreate=a,this.isCloning=!1,this.info=e,this.editor.setCursor({type:"move",rotation:0}),this.selectionSnapshot=U(this.editor),this.isCreating||!this.editor.inputs.altKey?(this.snapshot=this.selectionSnapshot,this.handleStart(),this.updateShapes()):this.startCloning()}else this.parent.transition("idle")}},{key:"onExit",value:function(){this.parent.setCurrentToolIdMask(void 0),this.selectionSnapshot={},this.snapshot={},this.editor.snaps.clearIndicators(),this.editor.setCursor({type:"default",rotation:0}),this.dragAndDropManager.clear()}},{key:"onTick",value:function(e){var t=e.elapsed,n=this.editor;this.dragAndDropManager.updateDroppingNode(this.snapshot.movingShapes,this.updateParentTransforms),n.edgeScrollManager.updateEdgeScrolling(t)}},{key:"onPointerMove",value:function(){this.updateShapes()}},{key:"onKeyDown",value:function(){!this.editor.inputs.altKey||this.isCloning?this.updateShapes():this.startCloning()}},{key:"onKeyUp",value:function(){this.editor.inputs.altKey||!this.isCloning?this.updateShapes():this.stopCloning()}},{key:"onPointerUp",value:function(){this.complete()}},{key:"onComplete",value:function(){this.complete()}},{key:"onCancel",value:function(){this.cancel()}},{key:"startCloning",value:function(){this.isCreating||(this.isCloning=!0,this.reset(),this.markId=this.editor.markHistoryStoppingPoint("translate cloning"),this.editor.duplicateShapes(Array.from(this.editor.getSelectedShapeIds())),this.snapshot=U(this.editor),this.handleStart(),this.updateShapes())}},{key:"stopCloning",value:function(){this.isCloning=!1,this.snapshot=this.selectionSnapshot,this.reset(),this.markId=this.editor.markHistoryStoppingPoint("translate"),this.updateShapes()}},{key:"reset",value:function(){this.editor.bailToMark(this.markId)}},{key:"complete",value:function(){var e;(this.updateShapes(),this.dragAndDropManager.dropShapes(this.snapshot.movingShapes),(0,N.kickoutOccludedShapes)(this.editor,this.snapshot.movingShapes.map((function(e){return e.id}))),this.handleEnd(),this.editor.getInstanceState().isToolLocked&&this.info.onInteractionEnd)?this.editor.setCurrentTool(this.info.onInteractionEnd):this.isCreating?null===(e=this.onCreate)||void 0===e||e.call(this,this.editor.getOnlySelectedShape()):this.parent.transition("idle")}},{key:"cancel",value:function(){this.reset(),this.info.onInteractionEnd?this.editor.setCurrentTool(this.info.onInteractionEnd):this.parent.transition("idle",this.info)}},{key:"handleStart",value:function(){var e=this,t=this.snapshot.movingShapes,n=[];t.forEach((function(t){var r,o=e.editor.getShapeUtil(t),i=null===(r=o.onTranslateStart)||void 0===r?void 0:r.call(o,t);i&&n.push(i)})),n.length>0&&this.editor.updateShapes(n),this.editor.setHoveredShape(null)}},{key:"handleEnd",value:function(){var e=this,t=this.snapshot.movingShapes;if(this.isCloning&&t.length>0){var n=A.Vec.Average(t.map((function(t){return e.editor.getShapePageTransform(t.id).point()}))),r=A.Vec.Sub(n,this.selectionSnapshot.averagePagePoint);A.Vec.IsNaN(r)||this.editor.updateInstanceState({duplicateProps:{shapeIds:t.map((function(e){return e.id})),offset:{x:r.x,y:r.y}}})}var o=[];t.forEach((function(t){var n,r=e.editor.getShape(t.id),i=e.editor.getShapeUtil(t),a=null===(n=i.onTranslateEnd)||void 0===n?void 0:n.call(i,t,r);a&&o.push(a)})),o.length>0&&this.editor.updateShapes(o)}},{key:"updateShapes",value:function(){var e=this,t=this.snapshot;this.dragAndDropManager.updateDroppingNode(t.movingShapes,this.updateParentTransforms),F({editor:this.editor,snapshot:t});var n=t.movingShapes,r=[];n.forEach((function(t){var n,o=e.editor.getShape(t.id),i=e.editor.getShapeUtil(t),a=null===(n=i.onTranslate)||void 0===n?void 0:n.call(i,t,o);a&&r.push(a)})),r.length>0&&this.editor.updateShapes(r)}},{key:"updateParentTransforms",value:function(){var e=this.editor,t=this.snapshot.shapeSnapshots,n=[];t.forEach((function(t){var r=e.getShape(t.shape.id);if(!r)return null;n.push(r);var o=(0,A.isPageId)(r.parentId)?null:A.Mat.Inverse(e.getShapePageTransform(r.parentId));t.parentTransform=o}))}}])}((C=A.StateNode,E=[A.bind],C));function U(e){var t,n,r=[],o=[],i=e.getSelectedShapeIds(),a=(0,A.compact)(i.map((function(t){var n=e.getShape(t);if(!n)return null;r.push(n);var i=e.getShapePageTransform(t),a=i.point(),u=i.rotation();return o.push(a),{shape:n,pagePoint:a,pageRotation:u,parentTransform:A.PageRecordType.isId(n.parentId)?null:A.Mat.Inverse(e.getShapePageTransform(n.parentId))}}))),u=e.getOnlySelectedShape(),s=[];if(u)s=e.snaps.shapeBounds.getSnapPoints(u.id);else{var c=e.getSelectionPageBounds();c&&(s=c.cornersAndCenter.map((function(e,t){return{id:"selection:"+t,x:e.x,y:e.y}})))}var l,f=e.inputs.originPagePoint,d=a.filter((function(t){return e.isShapeOfType(t.shape,"note")&&e.isPointInShape(t.shape,f)}));if(0===d.length);else if(1===d.length)n=d[0];else{var p,h=e.getCurrentPageShapesSorted();n=null===(p=d.map((function(e){return{snapshot:e,index:h.findIndex((function(t){return t.id===e.shape.id}))}})).sort((function(e,t){return t.index-e.index}))[0])||void 0===p?void 0:p.snapshot}n&&(t=(0,D.getAvailableNoteAdjacentPositions)(e,n.pageRotation,n.shape.props.scale,null!==(l=n.shape.props.growY)&&void 0!==l?l:0));return{averagePagePoint:A.Vec.Average(o),movingShapes:r,shapeSnapshots:a,initialPageBounds:e.getSelectionPageBounds(),initialSnapPoints:s,noteAdjacentPositions:t,noteSnapshot:n}}function F(e){var t=e.editor,n=e.snapshot,r=t.inputs,o=n.noteSnapshot,i=n.noteAdjacentPositions,a=n.initialPageBounds,u=n.initialSnapPoints,s=n.shapeSnapshots,l=n.averagePagePoint,f=t.getInstanceState().isGridMode,d=t.getDocumentSettings().gridSize,p=A.Vec.Sub(r.currentPagePoint,r.originPagePoint),h=t.inputs.shiftKey?Math.abs(p.x)<Math.abs(p.y)?"x":"y":null;"x"===h?p.x=0:"y"===h&&(p.y=0),t.snaps.clearIndicators();var v=!1;if((t.user.getIsSnapMode()?!r.ctrlKey:r.ctrlKey)&&t.inputs.pointerVelocity.len()<.5){var g=t.snaps.shapeBounds.snapTranslateShapes({dragDelta:p,initialSelectionPageBounds:a,lockedAxis:h,initialSelectionSnapPoints:u}).nudge;p.add(g)}else if(o&&i){var y,m=o.shape.props.scale,b=o.pagePoint.clone().add(p).add(D.NOTE_CENTER_OFFSET.clone().mul(m).rot(o.pageRotation)),w=D.NOTE_ADJACENT_POSITION_SNAP_RADIUS/t.getZoomLevel(),S=new A.Vec(0,0),x=c(i);try{for(x.s();!(y=x.n()).done;){var P=y.value,O=A.Vec.Sub(b,P),k=O.len();k<w&&(v=!0,w=k,S=O)}}catch(T){x.e(T)}finally{x.f()}p.sub(S)}var _=A.Vec.Add(l,p),j=t.snaps.getIndicators();!f||r.ctrlKey||v||0!==j.length||_.snapToGrid(d);var I=A.Vec.Sub(_,l);t.updateShapes((0,A.compact)(s.map((function(e){var t=e.shape,n=e.pagePoint,r=e.parentTransform,o=A.Vec.Add(n,I),i=r?A.Mat.applyToPoint(r,o):o;return{id:t.id,type:t.type,x:i.x,y:i.y}}))))}(function(e,t,n,r,o,i){var a,u,c,l,p,h=7&t,v=!!(8&t),y=!!(16&t),P=h>3?e.length+1:h?v?1:2:0,O=b[h+5],T=h>3&&(e[P-1]=[]),E=e[P]||(e[P]=[]),C=h&&(!y&&!v&&(o=o.prototype),h<5&&(h>3||!y)&&d(h<4?o:s("set",s("get",{},n,(function(){return _(this,i)})),n,(function(e){return j(this,i,e)})),n));h?y&&h<4&&m(i,(h>2?"set ":h>1?"get ":"")+n):m(o,n);for(var M=r.length-1;M>=0;M--)l=S(h,n,c={},e[3],E),h&&(l.static=v,l.private=y,p=l.access={has:y?function(e){return k(o,e)}:function(e){return n in e}},3^h&&(p.get=y?function(e){return(1^h?_:I)(e,o,4^h?i:C.get)}:function(e){return e[n]}),h>2&&(p.set=y?function(e,t){return j(e,o,t,4^h?i:C.set)}:function(e,t){return e[n]=t})),u=(0,r[M])(h?h<4?y?i:C[O]:h>4?void 0:{get:C.get,set:C.set}:o,l),c._=1,4^h||void 0===u?w(u)&&(h>4?T.unshift(u):h?y?i=u:C[O]=u:o=u):"object"!==typeof u||null===u?g("Object expected"):(w(a=u.get)&&(C.get=a),w(a=u.set)&&(C.set=a),w(a=u.init)&&T.unshift(a));h||x(e,o),C&&f(o,n,C)})(M=function(e){var t;return[,,,l(null!==(t=null===e||void 0===e?void 0:e[v("metadata")])&&void 0!==t?t:null)]}(C),1,"updateParentTransforms",E,L),x(M,L),P(L,"id","translating")},23813:function(e,t,n){"use strict";var r,o=n(85715).default,i=n(50883).default,a=Object.defineProperty,u=Object.getOwnPropertyDescriptor,s=Object.getOwnPropertyNames,c=Object.prototype.hasOwnProperty,l={};!function(e,t){for(var n in t)a(e,n,{get:t[n],enumerable:!0})}(l,{getOccludedChildren:function(){return p},kickoutOccludedShapes:function(){return d},startEditingShapeWithLabel:function(){return h}}),e.exports=(r=l,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,l=i(s(t));try{var f=function(){var i=o.value;c.call(e,i)||i===n||a(e,i,{get:function(){return t[i]},enumerable:!(r=u(t,i))||r.enumerable})};for(l.s();!(o=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(a({},"__esModule",{value:!0}),r));var f=n(57777);function d(e,t){var n,r=new Set,a=i(t);try{for(a.s();!(n=a.n()).done;){var u=n.value,s=e.getShape(u);if(s){e.getShapeUtil(s).onDragShapesOut&&r.add(s);var c=e.getShape(s.parentId);c&&e.getShapeUtil(c).onDragShapesOut&&r.add(c)}}}catch(k){a.e(k)}finally{a.f()}var l,d=new Map,h=i(r);try{for(h.s();!(l=h.n()).done;){var v=l.value,g=p(e,v);g.length&&d.set(v,g)}}catch(k){h.e(k)}finally{h.f()}var y,m=i(d);try{for(m.s();!(y=m.n()).done;){var b,w=o(y.value,2),S=w[0],x=w[1],P=e.getShapeUtil(S),O=(0,f.compact)(x.map((function(t){return e.getShape(t)})));null===(b=P.onDragShapesOut)||void 0===b||b.call(P,S,O)}}catch(k){m.e(k)}finally{m.f()}}function p(e,t){var n=e.getSortedChildIdsForParent(t.id);if(0===n.length)return[];var r,o,a,u=e.getShapePageBounds(t);if(!u)return[];var s,c=[],l=i(n);try{var d=function(){var n,i,l,d=s.value,p=e.getShapePageBounds(d);if(!p)return 0;if(!u.includes(p))return c.push(d),0;null!==(n=r)&&void 0!==n||(r=e.getShapeGeometry(t)),null!==(i=o)&&void 0!==i||(o=e.getShapePageTransform(t)),null!==(l=a)&&void 0!==l||(a=o.applyToPoints(r.vertices));var h=e.getShapePageTransform(d).clone().invert().applyToPoints(a),v=e.getShapeGeometry(d),g=v.vertices,y=v.isClosed;if(g.some((function(e){return(0,f.pointInPolygon)(e,h)})))return 0;if(y){if((0,f.polygonsIntersect)(h,g))return 0}else if((0,f.polygonIntersectsPolyline)(h,g))return 0;c.push(d)};for(l.s();!(s=l.n()).done;)d()}catch(p){l.e(p)}finally{l.f()}return c}function h(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];e.select(t),e.setEditingShape(t),e.setCurrentTool("select.editing_shape",{target:"shape",shape:t}),n&&e.emit("select-all-text",{shapeId:t.id})}},26062:function(e,t,n){"use strict";var r,o=n(17383).default,i=n(34579).default,a=n(18336).default,u=n(29511).default,s=n(43693).default,c=n(50883).default,l=Object.defineProperty,f=Object.getOwnPropertyDescriptor,d=Object.getOwnPropertyNames,p=Object.prototype.hasOwnProperty,h={};!function(e,t){for(var n in t)l(e,n,{get:t[n],enumerable:!0})}(h,{ZoomTool:function(){return b}}),e.exports=(r=h,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,i=c(d(t));try{var a=function(){var i=o.value;p.call(e,i)||i===n||l(e,i,{get:function(){return t[i]},enumerable:!(r=f(t,i))||r.enumerable})};for(i.s();!(o=i.n()).done;)a()}catch(u){i.e(u)}finally{i.f()}}return e}(l({},"__esModule",{value:!0}),r));var v=n(57777),g=n(65296),y=n(85300),m=n(86937),b=function(e){function t(){var e;o(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return e=a(this,t,[].concat(r)),s(e,"info",{}),e}return u(t,e),i(t,[{key:"onEnter",value:function(e){this.info=e,this.parent.setCurrentToolIdMask(e.onInteractionEnd),this.updateCursor()}},{key:"onExit",value:function(){this.parent.setCurrentToolIdMask(void 0),this.editor.updateInstanceState({zoomBrush:null,cursor:{type:"default",rotation:0}}),this.parent.setCurrentToolIdMask(void 0)}},{key:"onKeyDown",value:function(){this.updateCursor()}},{key:"onKeyUp",value:function(e){this.updateCursor(),"KeyZ"===e.code&&this.complete()}},{key:"onInterrupt",value:function(){this.complete()}},{key:"complete",value:function(){this.info.onInteractionEnd&&"select"!==this.info.onInteractionEnd?this.editor.setCurrentTool(this.info.onInteractionEnd,this.info):this.parent.transition("select")}},{key:"updateCursor",value:function(){this.editor.inputs.altKey?this.editor.setCursor({type:"zoom-out",rotation:0}):this.editor.setCursor({type:"zoom-in",rotation:0})}}],[{key:"children",value:function(){return[g.Idle,m.ZoomBrushing,y.Pointing]}}])}(v.StateNode);s(b,"id","zoom"),s(b,"initial","idle"),s(b,"isLockable",!1)},65296:function(e,t,n){"use strict";var r,o=n(17383).default,i=n(34579).default,a=n(18336).default,u=n(29511).default,s=n(43693).default,c=n(50883).default,l=Object.defineProperty,f=Object.getOwnPropertyDescriptor,d=Object.getOwnPropertyNames,p=Object.prototype.hasOwnProperty,h={};!function(e,t){for(var n in t)l(e,n,{get:t[n],enumerable:!0})}(h,{Idle:function(){return v}}),e.exports=(r=h,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,i=c(d(t));try{var a=function(){var i=o.value;p.call(e,i)||i===n||l(e,i,{get:function(){return t[i]},enumerable:!(r=f(t,i))||r.enumerable})};for(i.s();!(o=i.n()).done;)a()}catch(u){i.e(u)}finally{i.f()}}return e}(l({},"__esModule",{value:!0}),r));var v=function(e){function t(){var e;o(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return e=a(this,t,[].concat(r)),s(e,"info",{}),e}return u(t,e),i(t,[{key:"onEnter",value:function(e){this.info=e}},{key:"onPointerDown",value:function(){this.parent.transition("pointing",this.info)}}])}(n(57777).StateNode);s(v,"id","idle")},85300:function(e,t,n){"use strict";var r,o=n(17383).default,i=n(34579).default,a=n(18336).default,u=n(29511).default,s=n(43693).default,c=n(50883).default,l=Object.defineProperty,f=Object.getOwnPropertyDescriptor,d=Object.getOwnPropertyNames,p=Object.prototype.hasOwnProperty,h={};!function(e,t){for(var n in t)l(e,n,{get:t[n],enumerable:!0})}(h,{Pointing:function(){return v}}),e.exports=(r=h,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,i=c(d(t));try{var a=function(){var i=o.value;p.call(e,i)||i===n||l(e,i,{get:function(){return t[i]},enumerable:!(r=f(t,i))||r.enumerable})};for(i.s();!(o=i.n()).done;)a()}catch(u){i.e(u)}finally{i.f()}}return e}(l({},"__esModule",{value:!0}),r));var v=function(e){function t(){var e;o(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return e=a(this,t,[].concat(r)),s(e,"info",{}),e}return u(t,e),i(t,[{key:"onEnter",value:function(e){this.info=e}},{key:"onPointerUp",value:function(){this.complete()}},{key:"onPointerMove",value:function(){this.editor.inputs.isDragging&&this.parent.transition("zoom_brushing",this.info)}},{key:"onCancel",value:function(){this.cancel()}},{key:"complete",value:function(){var e=this.editor.inputs.currentScreenPoint;this.editor.inputs.altKey?this.editor.zoomOut(e,{animation:{duration:220}}):this.editor.zoomIn(e,{animation:{duration:220}}),this.parent.transition("idle",this.info)}},{key:"cancel",value:function(){this.parent.transition("idle",this.info)}}])}(n(57777).StateNode);s(v,"id","pointing")},86937:function(e,t,n){"use strict";var r,o=n(17383).default,i=n(34579).default,a=n(18336).default,u=n(29511).default,s=n(43693).default,c=n(50883).default,l=Object.defineProperty,f=Object.getOwnPropertyDescriptor,d=Object.getOwnPropertyNames,p=Object.prototype.hasOwnProperty,h={};!function(e,t){for(var n in t)l(e,n,{get:t[n],enumerable:!0})}(h,{ZoomBrushing:function(){return g}}),e.exports=(r=h,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,i=c(d(t));try{var a=function(){var i=o.value;p.call(e,i)||i===n||l(e,i,{get:function(){return t[i]},enumerable:!(r=f(t,i))||r.enumerable})};for(i.s();!(o=i.n()).done;)a()}catch(u){i.e(u)}finally{i.f()}}return e}(l({},"__esModule",{value:!0}),r));var v=n(57777),g=function(e){function t(){var e;o(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return e=a(this,t,[].concat(r)),s(e,"info",{}),s(e,"zoomBrush",new v.Box),e}return u(t,e),i(t,[{key:"onEnter",value:function(e){this.info=e,this.update()}},{key:"onExit",value:function(){this.editor.updateInstanceState({zoomBrush:null})}},{key:"onPointerMove",value:function(){this.update()}},{key:"onPointerUp",value:function(){this.complete()}},{key:"onCancel",value:function(){this.cancel()}},{key:"update",value:function(){var e=this.editor.inputs,t=e.originPagePoint,n=e.currentPagePoint;this.zoomBrush.setTo(v.Box.FromPoints([t,n])),this.editor.updateInstanceState({zoomBrush:this.zoomBrush.toJson()})}},{key:"cancel",value:function(){this.parent.transition("idle",this.info)}},{key:"complete",value:function(){var e=this.zoomBrush,t=8/this.editor.getZoomLevel();if(e.width<t&&e.height<t){var n=this.editor.inputs.currentScreenPoint;this.editor.inputs.altKey?this.editor.zoomOut(n,{animation:{duration:220}}):this.editor.zoomIn(n,{animation:{duration:220}})}else{var r=this.editor.inputs.altKey?this.editor.getZoomLevel()/2:void 0;this.editor.zoomToBounds(e,{targetZoom:r,animation:{duration:220}})}this.parent.transition("idle",this.info)}}])}(v.StateNode);s(g,"id","zoom_brushing")},87179:function(e,t,n){"use strict";var r,o=n(50883).default,i=Object.defineProperty,a=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,c={};function l(e){var t,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=e.getZoomLevel(),o=e.inputs.currentPagePoint;return null!==(t=e.getShapeAtPoint(o,{hitInside:!1,hitLabels:n,margin:e.options.hitTestMargin/r,renderingOnly:!0}))&&void 0!==t?t:e.getSelectedShapeAtPoint(o)}!function(e,t){for(var n in t)i(e,n,{get:t[n],enumerable:!0})}(c,{getHitShapeOnCanvasPointerDown:function(){return l}}),e.exports=(r=c,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var c,l=o(u(t));try{var f=function(){var o=c.value;s.call(e,o)||o===n||i(e,o,{get:function(){return t[o]},enumerable:!(r=a(t,o))||r.enumerable})};for(l.s();!(c=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(i({},"__esModule",{value:!0}),r))},38011:function(e,t,n){"use strict";var r,o=n(50883).default,i=Object.defineProperty,a=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,c={};function l(e){var t=e.getOnlySelectedShape();return!(!t||e.isShapeOrAncestorLocked(t)||!e.getShapeUtil(t).canCrop(t))}!function(e,t){for(var n in t)i(e,n,{get:t[n],enumerable:!0})}(c,{getShouldEnterCropMode:function(){return l}}),e.exports=(r=c,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var c,l=o(u(t));try{var f=function(){var o=c.value;s.call(e,o)||o===n||i(e,o,{get:function(){return t[o]},enumerable:!(r=a(t,o))||r.enumerable})};for(l.s();!(c=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(i({},"__esModule",{value:!0}),r))},33752:function(e,t,n){"use strict";var r,o=n(41132).default,i=n(50883).default,a=Object.defineProperty,u=Object.getOwnPropertyDescriptor,s=Object.getOwnPropertyNames,c=Object.prototype.hasOwnProperty,l={};!function(e,t){for(var n in t)a(e,n,{get:t[n],enumerable:!0})}(l,{selectOnCanvasPointerUp:function(){return d}}),e.exports=(r=l,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,l=i(s(t));try{var f=function(){var i=o.value;c.call(e,i)||i===n||a(e,i,{get:function(){return t[i]},enumerable:!(r=u(t,i))||r.enumerable})};for(l.s();!(o=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(a({},"__esModule",{value:!0}),r));var f=n(57777);function d(e,t){var n=e.getSelectedShapeIds(),r=e.inputs.currentPagePoint,i=t.shiftKey,a=t.altKey,u=t.accelKey,s=i||u,c=e.getShapeAtPoint(r,{hitInside:!1,margin:e.options.hitTestMargin/e.getZoomLevel(),hitLabels:!0,renderingOnly:!0,filter:function(e){return!e.isLocked}});if(c){var l=e.getOutermostSelectableShape(c);if(s&&!a)e.cancelDoubleClick(),n.includes(l.id)?(e.markHistoryStoppingPoint("deselecting shape"),e.deselect(l)):(e.markHistoryStoppingPoint("shift selecting shape"),e.setSelectedShapes([].concat(o(n),[l.id])));else{var d=void 0;(d=l===c||l.id===e.getFocusedGroupId()||n.includes(l.id)?c:l)&&!n.includes(d.id)&&(e.markHistoryStoppingPoint("selecting shape"),e.select(d.id))}}else{if(s)return;n.length>0&&(e.markHistoryStoppingPoint("selecting none"),e.selectNone());var p=e.getFocusedGroupId();if((0,f.isShapeId)(p)){var h=e.getShape(p);e.isPointInShape(h,r,{margin:0,hitInside:!0})||e.setFocusedGroup(null)}}}},26795:function(e,t,n){"use strict";var r,o=n(50883).default,i=Object.defineProperty,a=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,c={};!function(e,t){for(var n in t)i(e,n,{get:t[n],enumerable:!0})}(c,{updateHoveredShapeId:function(){return l}}),e.exports=(r=c,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var c,l=o(u(t));try{var f=function(){var o=c.value;s.call(e,o)||o===n||i(e,o,{get:function(){return t[o]},enumerable:!(r=a(t,o))||r.enumerable})};for(l.s();!(c=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(i({},"__esModule",{value:!0}),r));var l=(0,n(57777).throttle)((function(e){var t=e.getShapeAtPoint(e.inputs.currentPagePoint,{hitInside:!1,hitLabels:!1,margin:e.options.hitTestMargin/e.getZoomLevel(),renderingOnly:!0});if(!t)return e.setHoveredShape(null);var n=void 0,r=e.getOutermostSelectableShape(t);return n=r===t||r.id===e.getFocusedGroupId()||e.getSelectedShapeIds().includes(r.id)?t:r,e.setHoveredShape(n.id)}),32)},54278:function(e,t,n){"use strict";var r,o=n(12897).default,i=n(91847).default,a=n(50883).default,u=["renderDebugMenuItems","children","hideUi","components"],s=["children","hideUi"],c=Object.create,l=Object.defineProperty,f=Object.getOwnPropertyDescriptor,d=Object.getOwnPropertyNames,p=Object.getPrototypeOf,h=Object.prototype.hasOwnProperty,v=function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,i=a(d(t));try{var u=function(){var i=o.value;h.call(e,i)||i===n||l(e,i,{get:function(){return t[i]},enumerable:!(r=f(t,i))||r.enumerable})};for(i.s();!(o=i.n()).done;)u()}catch(s){i.e(s)}finally{i.f()}}return e},g=function(e,t,n){return n=null!=e?c(p(e)):{},v(!t&&e&&e.__esModule?n:l(n,"default",{value:e,enumerable:!0}),e)},y={};!function(e,t){for(var n in t)l(e,n,{get:t[n],enumerable:!0})}(y,{TldrawUi:function(){return L}}),e.exports=(r=y,v(l({},"__esModule",{value:!0}),r));var m=n(44414),b=n(57777),w=g(n(48738)),S=g(n(9950)),x=n(21340),P=n(29889),O=n(29225),k=n(61537),_=n(67880),j=n(12521),I=n(84630),T=n(2491),E=n(77740),C=n(3594),M=n(2753),A=n(25728),D=n(51750),R=n(19098),N=n(97410),L=S.default.memo((function(e){var t=e.renderDebugMenuItems,n=e.children,r=e.hideUi,a=e.components,s=i(e,u);return(0,m.jsx)(I.TldrawUiContextProvider,o(o({},s),{},{components:a,children:(0,m.jsx)(U,{hideUi:r,renderDebugMenuItems:t,children:n})}))})),U=S.default.memo((function(e){var t=e.children,n=e.hideUi,r=i(e,s);return(0,m.jsxs)(m.Fragment,{children:[t,n?null:(0,m.jsx)(F,o({},r))]})})),F=S.default.memo((function(){var e=(0,b.useEditor)(),t=(0,N.useTranslation)(),n=(0,E.useBreakpoint)(),r=(0,R.useReadonly)(),o=(0,b.useValue)("focus",(function(){return e.getInstanceState().isFocusMode}),[e]),i=(0,b.useValue)("debug",(function(){return e.getInstanceState().isDebugMode}),[e]),a=(0,C.useTldrawUiComponents)(),u=a.SharePanel,s=a.TopPanel,c=a.MenuPanel,l=a.StylePanel,f=a.Toolbar,d=a.HelpMenu,p=a.NavigationPanel,h=a.HelperButtons,v=a.DebugPanel,g=a.CursorChatBubble;(0,D.useKeyboardShortcuts)(),(0,M.useNativeClipboardEvents)(),(0,A.useEditorEvents)();var y=(0,T.useActions)()["toggle-focus-mode"];return(0,m.jsxs)("div",{className:(0,w.default)("tlui-layout",{"tlui-layout__mobile":n<j.PORTRAIT_BREAKPOINT.TABLET_SM}),"data-breakpoint":n,children:[o?(0,m.jsx)("div",{className:"tlui-layout__top",children:(0,m.jsx)(k.TldrawUiButton,{type:"icon",className:"tlui-focus-button",title:t("focus-mode.toggle-focus-mode"),onClick:function(){return y.onSelect("menu")},children:(0,m.jsx)(_.TldrawUiButtonIcon,{icon:"dot"})})}):(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)("div",{className:"tlui-layout__top",children:[(0,m.jsxs)("div",{className:"tlui-layout__top__left",children:[c&&(0,m.jsx)(c,{}),h&&(0,m.jsx)(h,{})]}),(0,m.jsx)("div",{className:"tlui-layout__top__center",children:s&&(0,m.jsx)(s,{})}),(0,m.jsxs)("div",{className:"tlui-layout__top__right",children:[u&&(0,m.jsx)(u,{}),l&&n>=j.PORTRAIT_BREAKPOINT.TABLET_SM&&!r&&(0,m.jsx)(l,{})]})]}),(0,m.jsxs)("div",{className:"tlui-layout__bottom",children:[(0,m.jsxs)("div",{className:"tlui-layout__bottom__main",children:[p&&(0,m.jsx)(p,{}),f&&(0,m.jsx)(f,{}),d&&(0,m.jsx)(d,{})]}),i&&v&&(0,m.jsx)(v,{})]})]}),(0,m.jsx)(O.TldrawUiToasts,{}),(0,m.jsx)(x.TldrawUiDialogs,{}),(0,m.jsx)(P.FollowingIndicator,{}),g&&(0,m.jsx)(g,{})]})}))},43186:function(e,t,n){"use strict";var r,o=n(12897).default,i=n(50883).default,a=Object.defineProperty,u=Object.getOwnPropertyDescriptor,s=Object.getOwnPropertyNames,c=Object.prototype.hasOwnProperty,l={};!function(e,t){for(var n in t)a(e,n,{get:t[n],enumerable:!0})}(l,{defaultUiAssetUrls:function(){return v},setDefaultUiAssetUrls:function(){return g},useDefaultUiAssetUrlsWithOverrides:function(){return y}}),e.exports=(r=l,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,l=i(s(t));try{var f=function(){var i=o.value;c.call(e,i)||i===n||a(e,i,{get:function(){return t[i]},enumerable:!(r=u(t,i))||r.enumerable})};for(l.s();!(o=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(a({},"__esModule",{value:!0}),r));var f=n(57777),d=n(4033),p=n(94730),h=n(78783),v=o(o({},p.defaultEditorAssetUrls),{},{icons:Object.fromEntries(h.iconTypes.map((function(e){return[e,"".concat((0,f.getDefaultCdnBaseUrl)(),"/icons/icon/0_merged.svg#").concat(e)]}))),translations:Object.fromEntries(f.LANGUAGES.map((function(e){return[e.locale,"".concat((0,f.getDefaultCdnBaseUrl)(),"/translations/").concat(e.locale,".json")]}))),embedIcons:Object.fromEntries(d.DEFAULT_EMBED_DEFINITIONS.map((function(e){return[e.type,"".concat((0,f.getDefaultCdnBaseUrl)(),"/embed-icons/").concat(e.type,".png")]})))});function g(e){v=e}function y(e){return e?{fonts:Object.assign(o({},v.fonts),o({},null===e||void 0===e?void 0:e.fonts)),icons:Object.assign(o({},v.icons),o({},null===e||void 0===e?void 0:e.icons)),embedIcons:Object.assign(o({},v.embedIcons),o({},null===e||void 0===e?void 0:e.embedIcons)),translations:Object.assign(o({},v.translations),o({},null===e||void 0===e?void 0:e.translations))}:v}},74771:function(e,t,n){"use strict";var r,o=n(50883).default,i=Object.defineProperty,a=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,c={};!function(e,t){for(var n in t)i(e,n,{get:t[n],enumerable:!0})}(c,{DefaultActionsMenu:function(){return x}}),e.exports=(r=c,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var c,l=o(u(t));try{var f=function(){var o=c.value;s.call(e,o)||o===n||i(e,o,{get:function(){return t[o]},enumerable:!(r=a(t,o))||r.enumerable})};for(l.s();!(c=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(i({},"__esModule",{value:!0}),r));var l=n(44414),f=n(57777),d=n(9950),p=n(12521),h=n(77740),v=n(19098),g=n(97410),y=n(61537),m=n(67880),b=n(36825),w=n(70649),S=n(62282),x=(0,d.memo)((function(e){var t=e.children,n=(0,g.useTranslation)(),r=(0,h.useBreakpoint)(),o=(0,v.useReadonly)(),i=(0,d.useRef)(null);(0,f.usePassThroughWheelEvents)(i);var a=(0,f.useEditor)(),u=(0,f.useValue)("should display quick actions when in readonly",(function(){return a.isInAny("hand","zoom")}),[a]),s=null!==t&&void 0!==t?t:(0,l.jsx)(S.DefaultActionsMenuContent,{});if(!o||u)return(0,l.jsxs)(b.TldrawUiPopover,{id:"actions-menu",children:[(0,l.jsx)(b.TldrawUiPopoverTrigger,{children:(0,l.jsx)(y.TldrawUiButton,{type:"icon","data-testid":"actions-menu.button",title:n("actions-menu.title"),children:(0,l.jsx)(m.TldrawUiButtonIcon,{icon:"dots-vertical",small:!0})})}),(0,l.jsx)(b.TldrawUiPopoverContent,{side:r>=p.PORTRAIT_BREAKPOINT.TABLET?"bottom":"top",sideOffset:6,children:(0,l.jsx)("div",{ref:i,className:"tlui-actions-menu tlui-buttons__grid","data-testid":"actions-menu.content",children:(0,l.jsx)(w.TldrawUiMenuContextProvider,{type:"icons",sourceId:"actions-menu",children:s})})})]})}))},62282:function(e,t,n){"use strict";var r,o=n(50883).default,i=Object.defineProperty,a=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,c={};!function(e,t){for(var n in t)i(e,n,{get:t[n],enumerable:!0})}(c,{AlignMenuItems:function(){return y},DefaultActionsMenuContent:function(){return g},DistributeMenuItems:function(){return m},EditLinkMenuItem:function(){return k},GroupMenuItem:function(){return j},GroupOrUngroupMenuItem:function(){return _},ReorderMenuItems:function(){return w},RotateCCWMenuItem:function(){return P},RotateCWMenuItem:function(){return O},StackMenuItems:function(){return b},UngroupMenuItem:function(){return I},ZoomOrRotateMenuItem:function(){return S},ZoomTo100MenuItem:function(){return x}}),e.exports=(r=c,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var c,l=o(u(t));try{var f=function(){var o=c.value;s.call(e,o)||o===n||i(e,o,{get:function(){return t[o]},enumerable:!(r=a(t,o))||r.enumerable})};for(l.s();!(c=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(i({},"__esModule",{value:!0}),r));var l=n(44414),f=n(57777),d=n(12521),p=n(77740),h=n(54150),v=n(61625);function g(){return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(y,{}),(0,l.jsx)(m,{}),(0,l.jsx)(b,{}),(0,l.jsx)(w,{}),(0,l.jsx)(S,{}),(0,l.jsx)(O,{}),(0,l.jsx)(k,{}),(0,l.jsx)(_,{})]})}function y(){var e=(0,h.useUnlockedSelectedShapesCount)(2),t=(0,h.useIsInSelectState)(),n=e&&t;return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(v.TldrawUiMenuActionItem,{actionId:"align-left",disabled:!n}),(0,l.jsx)(v.TldrawUiMenuActionItem,{actionId:"align-center-horizontal",disabled:!n}),(0,l.jsx)(v.TldrawUiMenuActionItem,{actionId:"align-right",disabled:!n}),(0,l.jsx)(v.TldrawUiMenuActionItem,{actionId:"stretch-horizontal",disabled:!n}),(0,l.jsx)(v.TldrawUiMenuActionItem,{actionId:"align-top",disabled:!n}),(0,l.jsx)(v.TldrawUiMenuActionItem,{actionId:"align-center-vertical",disabled:!n}),(0,l.jsx)(v.TldrawUiMenuActionItem,{actionId:"align-bottom",disabled:!n}),(0,l.jsx)(v.TldrawUiMenuActionItem,{actionId:"stretch-vertical",disabled:!n})]})}function m(){var e=(0,h.useUnlockedSelectedShapesCount)(3),t=(0,h.useIsInSelectState)(),n=e&&t;return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(v.TldrawUiMenuActionItem,{actionId:"distribute-horizontal",disabled:!n}),(0,l.jsx)(v.TldrawUiMenuActionItem,{actionId:"distribute-vertical",disabled:!n})]})}function b(){var e=(0,h.useThreeStackableItems)(),t=(0,h.useIsInSelectState)(),n=e&&t;return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(v.TldrawUiMenuActionItem,{actionId:"stack-horizontal",disabled:!n}),(0,l.jsx)(v.TldrawUiMenuActionItem,{actionId:"stack-vertical",disabled:!n})]})}function w(){var e=(0,h.useUnlockedSelectedShapesCount)(1),t=(0,h.useIsInSelectState)(),n=e&&t;return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(v.TldrawUiMenuActionItem,{actionId:"send-to-back",disabled:!n}),(0,l.jsx)(v.TldrawUiMenuActionItem,{actionId:"send-backward",disabled:!n}),(0,l.jsx)(v.TldrawUiMenuActionItem,{actionId:"bring-forward",disabled:!n}),(0,l.jsx)(v.TldrawUiMenuActionItem,{actionId:"bring-to-front",disabled:!n})]})}function S(){return(0,p.useBreakpoint)()<d.PORTRAIT_BREAKPOINT.TABLET_SM?(0,l.jsx)(x,{}):(0,l.jsx)(P,{})}function x(){var e=(0,f.useEditor)(),t=(0,f.useValue)("zoom is 1",(function(){return 1===e.getZoomLevel()}),[e]);return(0,l.jsx)(v.TldrawUiMenuActionItem,{actionId:"zoom-to-100",disabled:t})}function P(){var e=(0,h.useUnlockedSelectedShapesCount)(1),t=(0,h.useIsInSelectState)(),n=e&&t;return(0,l.jsx)(v.TldrawUiMenuActionItem,{actionId:"rotate-ccw",disabled:!n})}function O(){var e=(0,h.useUnlockedSelectedShapesCount)(1),t=(0,h.useIsInSelectState)(),n=e&&t;return(0,l.jsx)(v.TldrawUiMenuActionItem,{actionId:"rotate-cw",disabled:!n})}function k(){var e=(0,h.useHasLinkShapeSelected)(),t=(0,h.useIsInSelectState)(),n=e&&t;return(0,l.jsx)(v.TldrawUiMenuActionItem,{actionId:"edit-link",disabled:!n})}function _(){var e=(0,h.useAllowGroup)(),t=(0,h.useAllowUngroup)();return e?(0,l.jsx)(j,{}):t?(0,l.jsx)(I,{}):(0,l.jsx)(j,{})}function j(){var e=(0,h.useUnlockedSelectedShapesCount)(2),t=(0,h.useIsInSelectState)(),n=e&&t;return(0,l.jsx)(v.TldrawUiMenuActionItem,{actionId:"group",disabled:!n})}function I(){return(0,l.jsx)(v.TldrawUiMenuActionItem,{actionId:"ungroup"})}},85050:function(e,t,n){"use strict";var r,o=n(50883).default,i=Object.defineProperty,a=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,c={};!function(e,t){for(var n in t)i(e,n,{get:t[n],enumerable:!0})}(c,{ColorSchemeMenu:function(){return y}}),e.exports=(r=c,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var c,l=o(u(t));try{var f=function(){var o=c.value;s.call(e,o)||o===n||i(e,o,{get:function(){return t[o]},enumerable:!(r=a(t,o))||r.enumerable})};for(l.s();!(c=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(i({},"__esModule",{value:!0}),r));var l=n(44414),f=n(57777),d=n(14867),p=n(98382),h=n(60681),v=n(12947),g=[{colorScheme:"light",label:"theme.light"},{colorScheme:"dark",label:"theme.dark"},{colorScheme:"system",label:"theme.system"}];function y(){var e=(0,f.useEditor)(),t=(0,d.useUiEvents)(),n=(0,f.useValue)("colorScheme",(function(){var t;return null!==(t=e.user.getUserPreferences().colorScheme)&&void 0!==t?t:e.user.getIsDarkMode()?"dark":"light"}),[e]);return(0,l.jsx)(v.TldrawUiMenuSubmenu,{id:"help menu color-scheme",label:"menu.theme",children:(0,l.jsx)(h.TldrawUiMenuGroup,{id:"theme",children:g.map((function(r){var o=r.colorScheme,i=r.label;return(0,l.jsx)(p.TldrawUiMenuCheckboxItem,{id:"color-scheme-".concat(o),label:i,checked:o===n,readonlyOk:!0,onSelect:function(){e.user.updateUserPreferences({colorScheme:o}),t("color-scheme",{source:"menu",value:o})}},o)}))})})}},61007:function(e,t,n){"use strict";var r,o=n(85715).default,i=n(41132).default,a=n(50883).default,u=Object.create,s=Object.defineProperty,c=Object.getOwnPropertyDescriptor,l=Object.getOwnPropertyNames,f=Object.getPrototypeOf,d=Object.prototype.hasOwnProperty,p=function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,i=a(l(t));try{var u=function(){var i=o.value;d.call(e,i)||i===n||s(e,i,{get:function(){return t[i]},enumerable:!(r=c(t,i))||r.enumerable})};for(i.s();!(o=i.n()).done;)u()}catch(f){i.e(f)}finally{i.f()}}return e},h={};!function(e,t){for(var n in t)s(e,n,{get:t[n],enumerable:!0})}(h,{DefaultContextMenu:function(){return x}}),e.exports=(r=h,p(s({},"__esModule",{value:!0}),r));var v=n(44414),g=function(e,t,n){return n=null!=e?u(f(e)):{},p(!t&&e&&e.__esModule?n:s(n,"default",{value:e,enumerable:!0}),e)}(n(37641)),y=n(57777),m=n(9950),b=n(80459),w=n(70649),S=n(71630),x=(0,m.memo)((function(e){var t=e.children,n=e.disabled,r=void 0!==n&&n,a=(0,y.useEditor)(),u=(0,y.useEditorComponents)().Canvas,s=(0,m.useCallback)((function(e){if(e){if(a.getInstanceState().isCoarsePointer){var t=a.getSelectedShapes(),n=a.inputs.currentPagePoint,r=a.getShapesAtPoint(n);if(!a.getSelectedShapes().length||!r.some((function(e){return t.includes(e)}))){var o=r.filter((function(e){return a.isShapeOrAncestorLocked(e)}));o.length&&a.select.apply(a,i(o.map((function(e){return e.id}))))}}}else{var u=a.getOnlySelectedShape();u&&a.isShapeOrAncestorLocked(u)&&a.setSelectedShapes([])}}),[a]),c=(0,y.useContainer)(),l=(0,b.useMenuIsOpen)("context menu",s),f=o(l,2),d=f[0],p=f[1],h=null!==t&&void 0!==t?t:(0,v.jsx)(S.DefaultContextMenuContent,{});return(0,v.jsxs)(g.Root,{dir:"ltr",onOpenChange:p,modal:!1,children:[(0,v.jsx)(g.Trigger,{onContextMenu:void 0,dir:"ltr",disabled:r,children:u?(0,v.jsx)(u,{}):null}),d&&(0,v.jsx)(g.Portal,{container:c,children:(0,v.jsx)(g.Content,{className:"tlui-menu scrollable","data-testid":"context-menu",alignOffset:-4,collisionPadding:4,onContextMenu:y.preventDefault,children:(0,v.jsx)(w.TldrawUiMenuContextProvider,{type:"context-menu",sourceId:"context-menu",children:h})})})]})}))},71630:function(e,t,n){"use strict";var r,o=n(50883).default,i=Object.defineProperty,a=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,c={};!function(e,t){for(var n in t)i(e,n,{get:t[n],enumerable:!0})}(c,{DefaultContextMenuContent:function(){return v}}),e.exports=(r=c,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var c,l=o(u(t));try{var f=function(){var o=c.value;s.call(e,o)||o===n||i(e,o,{get:function(){return t[o]},enumerable:!(r=a(t,o))||r.enumerable})};for(l.s();!(c=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(i({},"__esModule",{value:!0}),r));var l=n(44414),f=n(57777),d=n(37454),p=n(53655),h=n(60681);function v(){var e=(0,f.useEditor)(),t=(0,d.useShowCollaborationUi)(),n=(0,f.useValue)("isSelectToolActive",(function(){return"select"===e.getCurrentToolId()}),[e]),r=(0,f.useValue)("isSinglePageMode",(function(){return e.options.maxPages<=1}),[e]);return n?(0,l.jsxs)(l.Fragment,{children:[t&&(0,l.jsx)(p.CursorChatItem,{}),(0,l.jsxs)(h.TldrawUiMenuGroup,{id:"modify",children:[(0,l.jsx)(p.EditMenuSubmenu,{}),(0,l.jsx)(p.ArrangeMenuSubmenu,{}),(0,l.jsx)(p.ReorderMenuSubmenu,{}),!r&&(0,l.jsx)(p.MoveToPageMenu,{})]}),(0,l.jsx)(p.ClipboardMenuGroup,{}),(0,l.jsx)(p.ConversionsMenuGroup,{}),(0,l.jsx)(h.TldrawUiMenuGroup,{id:"select-all",children:(0,l.jsx)(p.SelectAllMenuItem,{})})]}):null}},34211:function(e,t,n){"use strict";var r,o=n(85715).default,i=n(50883).default,a=Object.defineProperty,u=Object.getOwnPropertyDescriptor,s=Object.getOwnPropertyNames,c=Object.prototype.hasOwnProperty,l={};!function(e,t){for(var n in t)a(e,n,{get:t[n],enumerable:!0})}(l,{CursorChatBubble:function(){return v}}),e.exports=(r=l,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,l=i(s(t));try{var f=function(){var i=o.value;c.call(e,i)||i===n||a(e,i,{get:function(){return t[i]},enumerable:!(r=u(t,i))||r.enumerable})};for(l.s();!(o=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(a({},"__esModule",{value:!0}),r));var f=n(44414),d=n(57777),p=n(9950),h=n(97410),v=(0,d.track)((function(){var e=(0,d.useEditor)(),t=e.getInstanceState(),n=t.isChatting,r=t.chatMessage,i=(0,p.useRef)(-1),a=(0,p.useState)(""),u=o(a,2),s=u[0],c=u[1];return(0,p.useEffect)((function(){if(!n&&r||n){var t=n?5e3:2e3;i.current=e.timers.setTimeout((function(){e.updateInstanceState({chatMessage:"",isChatting:!1}),c(""),e.focus()}),t)}return function(){clearTimeout(i.current)}}),[e,r,n]),n?(0,f.jsx)(m,{value:s,setValue:c,chatMessage:r}):r.trim()?(0,f.jsx)(y,{chatMessage:r}):null}));function g(e){var t=(0,d.useEditor)();(0,p.useLayoutEffect)((function(){var n;if(e.current){var r=t.inputs.currentScreenPoint,o=r.x,i=r.y;return null===(n=e.current)||void 0===n||n.style.setProperty("transform","translate(".concat(o,"px, ").concat(i,"px)")),window.addEventListener("pointermove",a),function(){window.removeEventListener("pointermove",a)}}function a(n){var r,o=t.getViewportScreenBounds(),i=o.minX,a=o.minY;null===(r=e.current)||void 0===r||r.style.setProperty("transform","translate(".concat(n.clientX-i,"px, ").concat(n.clientY-a,"px)"))}}),[e,t])}var y=function(e){var t=e.chatMessage,n=(0,d.useEditor)(),r=(0,p.useRef)(null);return g(r),(0,f.jsx)("div",{ref:r,className:"tl-cursor-chat tl-cursor-chat__bubble",style:{backgroundColor:n.user.getColor()},children:t})},m=(0,d.track)((function(e){var t=e.chatMessage,n=e.value,r=e.setValue,o=(0,d.useEditor)(),i=(0,h.useTranslation)(),a=(0,p.useRef)(null),u=t||i("cursor-chat.type-to-chat");g(a),(0,p.useLayoutEffect)((function(){var e=a.current;if(e){var t=o.textMeasure.measureText(n||u,{fontFamily:"var(--font-body)",fontSize:12,fontWeight:"500",fontStyle:"normal",maxWidth:null,lineHeight:1,padding:"6px"});e.style.setProperty("width",t.w+"px")}}),[o,n,u]),(0,p.useLayoutEffect)((function(){var e=o.timers.requestAnimationFrame((function(){var e;null===(e=a.current)||void 0===e||e.focus()}));return function(){cancelAnimationFrame(e)}}),[o]);var s=(0,p.useCallback)((function(){o.updateInstanceState({isChatting:!1}),o.focus()}),[o]),c=(0,p.useCallback)((function(e){var t=e.target.value;r(t.slice(0,64)),o.updateInstanceState({chatMessage:t})}),[o,r]),l=(0,p.useCallback)((function(e){var t=a.current;if(t){var n=t.value;switch(e.key){case"Enter":if((0,d.preventDefault)(e),e.stopPropagation(),!n)return void s();r("");break;case"Escape":(0,d.preventDefault)(e),e.stopPropagation(),s()}}}),[s,r]),v=(0,p.useCallback)((function(e){e.stopPropagation()}),[]);return(0,f.jsx)("input",{ref:a,className:"tl-cursor-chat",style:{backgroundColor:o.user.getColor()},onBlur:s,onChange:c,onKeyDown:l,onPaste:v,value:n,placeholder:u,spellCheck:!1})}))},22227:function(e,t,n){"use strict";var r,o=n(50883).default,i=Object.defineProperty,a=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,c={};!function(e,t){for(var n in t)i(e,n,{get:t[n],enumerable:!0})}(c,{DefaultDebugMenu:function(){return g}}),e.exports=(r=c,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var c,l=o(u(t));try{var f=function(){var o=c.value;s.call(e,o)||o===n||i(e,o,{get:function(){return t[o]},enumerable:!(r=a(t,o))||r.enumerable})};for(l.s();!(c=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(i({},"__esModule",{value:!0}),r));var l=n(44414),f=n(61537),d=n(67880),p=n(80408),h=n(70649),v=n(23722);function g(e){var t=e.children,n=null!==t&&void 0!==t?t:(0,l.jsx)(v.DefaultDebugMenuContent,{});return(0,l.jsxs)(p.TldrawUiDropdownMenuRoot,{id:"debug",children:[(0,l.jsx)(p.TldrawUiDropdownMenuTrigger,{children:(0,l.jsx)(f.TldrawUiButton,{type:"icon",title:"Debug menu",children:(0,l.jsx)(d.TldrawUiButtonIcon,{icon:"dots-horizontal"})})}),(0,l.jsx)(p.TldrawUiDropdownMenuContent,{side:"top",align:"end",alignOffset:0,children:(0,l.jsx)(h.TldrawUiMenuContextProvider,{type:"menu",sourceId:"debug-panel",children:n})})]})}},23722:function(e,t,n){"use strict";var r,o=n(4633).default,i=n(29293).default,a=n(85715).default,u=n(50883).default,s=Object.create,c=Object.defineProperty,l=Object.getOwnPropertyDescriptor,f=Object.getOwnPropertyNames,d=Object.getPrototypeOf,p=Object.prototype.hasOwnProperty,h=function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,i=u(f(t));try{var a=function(){var i=o.value;p.call(e,i)||i===n||c(e,i,{get:function(){return t[i]},enumerable:!(r=l(t,i))||r.enumerable})};for(i.s();!(o=i.n()).done;)a()}catch(s){i.e(s)}finally{i.f()}}return e},v={};!function(e,t){for(var n in t)c(e,n,{get:t[n],enumerable:!0})}(v,{DebugFlags:function(){return C},DefaultDebugMenuContent:function(){return E},ExampleDialog:function(){return A},FeatureFlags:function(){return M}}),e.exports=(r=v,h(c({},"__esModule",{value:!0}),r));var g=n(44414),y=n(57777),m=function(e,t,n){return n=null!=e?s(d(e)):{},h(!t&&e&&e.__esModule?n:c(n,"default",{value:e,enumerable:!0}),e)}(n(9950)),b=n(49489),w=n(5450),S=n(97410),x=n(61537),P=n(51489),O=n(95139),k=n(52046),_=n(98382),j=n(60681),I=n(95767),T=n(12947);function E(){var e=(0,y.useEditor)(),t=(0,w.useToasts)().addToast,n=(0,b.useDialogs)().addDialog,r=m.default.useState(!1),o=a(r,2),i=o[0],u=o[1];return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsxs)(j.TldrawUiMenuGroup,{id:"items",children:[(0,g.jsx)(I.TldrawUiMenuItem,{id:"add-toast",onSelect:function(){t({id:(0,y.uniqueId)(),title:"Something good happened",description:"Hey, attend to this thing over here. It might be important!",keepOpen:!0,severity:"success"}),t({id:(0,y.uniqueId)(),title:"Something happened",description:"Hey, attend to this thing over here. It might be important!",keepOpen:!0,severity:"info",actions:[{label:"Primary",type:"primary",onClick:function(){}},{label:"Normal",type:"normal",onClick:function(){}},{label:"Danger",type:"danger",onClick:function(){}}]}),t({id:(0,y.uniqueId)(),title:"Something maybe bad happened",description:"Hey, attend to this thing over here. It might be important!",keepOpen:!0,severity:"warning",actions:[{label:"Primary",type:"primary",onClick:function(){}},{label:"Normal",type:"normal",onClick:function(){}},{label:"Danger",type:"danger",onClick:function(){}}]}),t({id:(0,y.uniqueId)(),title:"Something bad happened",severity:"error",keepOpen:!0})},label:(0,S.untranslated)("Show toast")}),(0,g.jsx)(I.TldrawUiMenuItem,{id:"show-dialog",label:"Show dialog",onSelect:function(){n({component:function(e){var t=e.onClose;return(0,g.jsx)(A,{displayDontShowAgain:!0,onCancel:function(){return t()},onContinue:function(){return t()}})},onClose:function(){}})}}),(0,g.jsx)(I.TldrawUiMenuItem,{id:"create-shapes",label:"Create 100 shapes",onSelect:function(){return function(e,t){for(var n=Array(t),r=Math.floor(Math.sqrt(t)),o=0;o<t;o++)R++,n[o]={id:(0,y.createShapeId)("box"+R),type:"geo",x:o%r*132,y:132*Math.floor(o/r)};e.run((function(){e.createShapes(n).setSelectedShapes(n.map((function(e){return e.id})))}))}(e,100)}}),(0,g.jsx)(I.TldrawUiMenuItem,{id:"count-nodes",label:"Count shapes / nodes",onSelect:function(){var t,n=e.getSelectedShapes(),r=0===n.length?e.getRenderingShapes():n;window.alert("Shapes ".concat(r.length,", DOM nodes:").concat(null===(t=document.querySelector(".tl-shapes").querySelectorAll("*"))||void 0===t?void 0:t.length))}}),function(){if(i)throw Error("oh no!");return null}(),(0,g.jsx)(I.TldrawUiMenuItem,{id:"throw-error",onSelect:function(){return u(!0)},label:"Throw error"}),(0,g.jsx)(I.TldrawUiMenuItem,{id:"hard-reset",onSelect:y.hardResetEditor,label:"Hard reset"})]}),(0,g.jsxs)(j.TldrawUiMenuGroup,{id:"flags",children:[(0,g.jsx)(C,{}),(0,g.jsx)(M,{})]})]})}function C(){var e=Object.values(y.debugFlags);return e.length?(0,g.jsx)(T.TldrawUiMenuSubmenu,{id:"debug flags",label:"Debug Flags",children:(0,g.jsx)(j.TldrawUiMenuGroup,{id:"debug flags",children:e.map((function(e){return(0,g.jsx)(D,{flag:e},e.name)}))})}):null}function M(){var e=Object.values(y.featureFlags);return e.length?(0,g.jsx)(T.TldrawUiMenuSubmenu,{id:"feature flags",label:"Feature Flags",children:(0,g.jsx)(j.TldrawUiMenuGroup,{id:"feature flags",children:e.map((function(e){return(0,g.jsx)(D,{flag:e},e.name)}))})}):null}function A(e){var t=e.title,n=void 0===t?"title":t,r=e.body,u=void 0===r?"hello hello hello":r,s=e.cancel,c=void 0===s?"Cancel":s,l=e.confirm,f=void 0===l?"Continue":l,d=e.displayDontShowAgain,p=void 0!==d&&d,h=e.onCancel,v=e.onContinue,y=m.default.useState(!1),b=a(y,2),w=b[0],S=b[1];return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsxs)(k.TldrawUiDialogHeader,{children:[(0,g.jsx)(k.TldrawUiDialogTitle,{children:n}),(0,g.jsx)(k.TldrawUiDialogCloseButton,{})]}),(0,g.jsx)(k.TldrawUiDialogBody,{style:{maxWidth:350},children:u}),(0,g.jsxs)(k.TldrawUiDialogFooter,{className:"tlui-dialog__footer__actions",children:[p&&(0,g.jsxs)(x.TldrawUiButton,{type:"normal",onClick:function(){return S(!w)},style:{marginRight:"auto"},children:[(0,g.jsx)(P.TldrawUiButtonCheck,{checked:w}),(0,g.jsx)(O.TldrawUiButtonLabel,{children:"Don\u2019t show again"})]}),(0,g.jsx)(x.TldrawUiButton,{type:"normal",onClick:h,children:(0,g.jsx)(O.TldrawUiButtonLabel,{children:c})}),(0,g.jsx)(x.TldrawUiButton,{type:"primary",onClick:function(){var e=i(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",v());case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),children:(0,g.jsx)(O.TldrawUiButtonLabel,{children:f})})]})]})}var D=(0,y.track)((function(e){var t=e.flag,n=e.onChange,r=t.get();return(0,g.jsx)(_.TldrawUiMenuCheckboxItem,{id:t.name,title:t.name,label:t.name.replace(/([a-z0-9])([A-Z])/g,(function(e){return"".concat(e[0]," ").concat(e[1].toLowerCase())})).replace(/^[a-z]/,(function(e){return e.toUpperCase()})),checked:r,onSelect:function(){t.set(!r),null===n||void 0===n||n(!r)}})})),R=0},17175:function(e,t,n){"use strict";var r,o=n(85715).default,i=n(50883).default,a=Object.defineProperty,u=Object.getOwnPropertyDescriptor,s=Object.getOwnPropertyNames,c=Object.prototype.hasOwnProperty,l={};!function(e,t){for(var n in t)a(e,n,{get:t[n],enumerable:!0})}(l,{DefaultDebugPanel:function(){return v}}),e.exports=(r=l,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,l=i(s(t));try{var f=function(){var i=o.value;c.call(e,i)||i===n||a(e,i,{get:function(){return t[i]},enumerable:!(r=u(t,i))||r.enumerable})};for(l.s();!(o=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(a({},"__esModule",{value:!0}),r));var f=n(44414),d=n(57777),p=n(9950),h=n(3594),v=(0,p.memo)((function(){var e=(0,h.useTldrawUiComponents)().DebugMenu,t=(0,p.useRef)(null);return(0,d.usePassThroughWheelEvents)(t),(0,f.jsxs)("div",{ref:t,className:"tlui-debug-panel",children:[(0,f.jsx)(g,{}),(0,f.jsx)(y,{}),e&&(0,f.jsx)(e,{})]})}));var g=(0,d.track)((function(){!function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=(0,p.useState)(0),n=o(t,2),r=(n[0],n[1]),i=(0,d.useEditor)();(0,p.useEffect)((function(){if(e){var t=function(){return r((function(e){return e+1}))};return i.on("tick",t),function(){i.off("tick",t)}}}),[i,e])}();var e=(0,d.useEditor)(),t=e.getPath(),n=e.getHoveredShape(),r=e.getOnlySelectedShape(),i="select.idle"!==t&&t.includes("select.")?r:n,a=i&&t.includes("select.")?" / ".concat(i.type||"").concat("geo"in i.props?" / "+i.props.geo:""," / [").concat(d.Vec.ToInt(e.getPointInShapeSpace(i,e.inputs.currentPagePoint)),"]"):"",u=t.startsWith("select.")&&!t.includes(".idle")?" / [".concat(d.Vec.ToInt(e.inputs.originPagePoint),"] \u2192 [").concat(d.Vec.ToInt(e.inputs.currentPagePoint),"] = ").concat(d.Vec.Dist(e.inputs.originPagePoint,e.inputs.currentPagePoint).toFixed(0)):"";return(0,f.jsx)("div",{className:"tlui-debug-panel__current-state",children:"".concat(t).concat(a).concat(u)})}));function y(){var e=(0,d.useEditor)(),t=(0,d.useValue)("show_fps",(function(){return d.debugFlags.showFps.get()}),[d.debugFlags]),n=(0,p.useRef)(null);return(0,p.useEffect)((function(){if(t){var r=250,o=0,i=-1,a=performance.now(),u=0,s=0,c=!1;return function t(){if(s++,(u=performance.now()-a)>r){var l=Math.round(s*(r/u)*4);l>o&&(o=l);var f=.75*o;(l<f&&!c||l>=f&&c)&&(c=!c),n.current.innerHTML="FPS ".concat(l.toString()),n.current.className="tlui-debug-panel__fps"+(c?" tlui-debug-panel__fps__slow":""),u-=r,s=0,a=performance.now()}i=e.timers.requestAnimationFrame(t)}(),function(){cancelAnimationFrame(i)}}}),[t,e]),t?(0,f.jsx)("div",{ref:n}):null}},57901:function(e,t,n){"use strict";var r,o=n(50883).default,i=Object.defineProperty,a=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,c={};!function(e,t){for(var n in t)i(e,n,{get:t[n],enumerable:!0})}(c,{DefaultMenuPanel:function(){return g}}),e.exports=(r=c,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var c,l=o(u(t));try{var f=function(){var o=c.value;s.call(e,o)||o===n||i(e,o,{get:function(){return t[o]},enumerable:!(r=a(t,o))||r.enumerable})};for(l.s();!(c=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(i({},"__esModule",{value:!0}),r));var l=n(44414),f=n(57777),d=n(9950),p=n(12521),h=n(77740),v=n(3594),g=(0,d.memo)((function(){var e=(0,h.useBreakpoint)(),t=(0,d.useRef)(null);(0,f.usePassThroughWheelEvents)(t);var n=(0,v.useTldrawUiComponents)(),r=n.MainMenu,o=n.QuickActions,i=n.ActionsMenu,a=n.PageMenu,u=(0,f.useEditor)(),s=(0,f.useValue)("isSinglePageMode",(function(){return u.options.maxPages<=1}),[u]),c="menu"===u.options.actionShortcutsLocation||"toolbar"!==u.options.actionShortcutsLocation&&e>=p.PORTRAIT_BREAKPOINT.TABLET;return r||a||c?(0,l.jsx)("div",{ref:t,className:"tlui-menu-zone",children:(0,l.jsxs)("div",{className:"tlui-buttons__horizontal",children:[r&&(0,l.jsx)(r,{}),a&&!s&&(0,l.jsx)(a,{}),c?(0,l.jsxs)(l.Fragment,{children:[o&&(0,l.jsx)(o,{}),i&&(0,l.jsx)(i,{})]}):null]})}):null}))},21340:function(e,t,n){"use strict";var r,o=n(12897).default,i=n(50883).default,a=Object.create,u=Object.defineProperty,s=Object.getOwnPropertyDescriptor,c=Object.getOwnPropertyNames,l=Object.getPrototypeOf,f=Object.prototype.hasOwnProperty,d=function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,a=i(c(t));try{var l=function(){var i=o.value;f.call(e,i)||i===n||u(e,i,{get:function(){return t[i]},enumerable:!(r=s(t,i))||r.enumerable})};for(a.s();!(o=a.n()).done;)l()}catch(d){a.e(d)}finally{a.f()}}return e},p={};!function(e,t){for(var n in t)u(e,n,{get:t[n],enumerable:!0})}(p,{TldrawUiDialogs:function(){return w}}),e.exports=(r=p,d(u({},"__esModule",{value:!0}),r));var h=n(44414),v=function(e,t,n){return n=null!=e?a(l(e)):{},d(!t&&e&&e.__esModule?n:u(n,"default",{value:e,enumerable:!0}),e)}(n(80318)),g=n(57777),y=n(9950),m=n(49489),b=function(e){var t=e.id,n=e.component,r=e.onClose,o=(0,m.useDialogs)().removeDialog,i=(0,g.useContainer)(),a=(0,y.useCallback)((function(e){if(!e){if(r)try{r()}catch(n){console.warn(n)}o(t)}}),[t,r,o]);return(0,h.jsx)(v.Root,{onOpenChange:a,defaultOpen:!0,children:(0,h.jsx)(v.Portal,{container:i,children:(0,h.jsx)(v.Overlay,{dir:"ltr",className:"tlui-dialog__overlay",onClick:function(e){e.target===e.currentTarget&&a(!1)},children:(0,h.jsx)(v.Content,{dir:"ltr",className:"tlui-dialog__content","aria-describedby":void 0,children:(0,h.jsx)(n,{onClose:function(){return a(!1)}})})})})})},w=(0,y.memo)((function(){var e=(0,m.useDialogs)().dialogs;return(0,g.useValue)("dialogs",(function(){return e.get()}),[e]).map((function(e){return(0,h.jsx)(b,o({},e),e.id)}))}))},31957:function(e,t,n){"use strict";var r,o=n(85715).default,i=n(50883).default,a=Object.defineProperty,u=Object.getOwnPropertyDescriptor,s=Object.getOwnPropertyNames,c=Object.prototype.hasOwnProperty,l={};!function(e,t){for(var n in t)a(e,n,{get:t[n],enumerable:!0})}(l,{EditLinkDialog:function(){return w},EditLinkDialogInner:function(){return S}}),e.exports=(r=l,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,l=i(s(t));try{var f=function(){var i=o.value;c.call(e,i)||i===n||a(e,i,{get:function(){return t[i]},enumerable:!(r=u(t,i))||r.enumerable})};for(l.s();!(o=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(a({},"__esModule",{value:!0}),r));var f=n(44414),d=n(57777),p=n(9950),h=n(97410),v=n(61537),g=n(95139),y=n(52046),m=n(98220);function b(e){return d.T.linkUrl.isValid(e)?{isValid:!0,hasProtocol:!0}:d.T.linkUrl.isValid("https://"+e)?{isValid:!0,hasProtocol:!1}:{isValid:!1,hasProtocol:!1}}var w=(0,d.track)((function(e){var t=e.onClose,n=(0,d.useEditor)().getOnlySelectedShape();return n&&"url"in n.props&&"string"===typeof n.props.url?(0,f.jsx)(S,{onClose:t,selectedShape:n}):null})),S=(0,d.track)((function(e){var t=e.onClose,n=e.selectedShape,r=(0,d.useEditor)(),i=(0,h.useTranslation)(),a=(0,p.useRef)(null);(0,p.useEffect)((function(){r.timers.requestAnimationFrame((function(){var e;return null===(e=a.current)||void 0===e?void 0:e.focus()}))}),[r]);var u=(0,p.useRef)(n.props.url),s=(0,p.useState)((function(){var e=b(n.props.url),t=!0===e.isValid?e.hasProtocol?n.props.url:"https://"+n.props.url:"https://";return{actual:t,safe:t,valid:!0}})),c=o(s,2),l=c[0],w=c[1],S=(0,p.useCallback)((function(e){var t=e.replace(/https?:\/\/(https?:\/\/)/,(function(e,t){return t})),n=b(t),r=!0===n.isValid?n.hasProtocol?t:"https://"+t:"https://";w({actual:t,safe:r,valid:n.isValid})}),[]),x=(0,p.useCallback)((function(){var e=r.getOnlySelectedShape();e&&(r.updateShapes([{id:e.id,type:e.type,props:{url:""}}]),t())}),[r,t]),P=(0,p.useCallback)((function(){var e=r.getOnlySelectedShape();e&&(e&&"url"in e.props&&e.props.url!==l.safe&&r.updateShapes([{id:e.id,type:e.type,props:{url:l.safe}}]),t())}),[r,t,l]),O=(0,p.useCallback)((function(){t()}),[t]);if(!n)return t(),null;var k=u.current&&!l.valid;return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsxs)(y.TldrawUiDialogHeader,{children:[(0,f.jsx)(y.TldrawUiDialogTitle,{children:i("edit-link-dialog.title")}),(0,f.jsx)(y.TldrawUiDialogCloseButton,{})]}),(0,f.jsx)(y.TldrawUiDialogBody,{children:(0,f.jsxs)("div",{className:"tlui-edit-link-dialog",children:[(0,f.jsx)(m.TldrawUiInput,{ref:a,className:"tlui-edit-link-dialog__input",label:"edit-link-dialog.url",autoFocus:!0,value:l.actual,onValueChange:S,onComplete:P,onCancel:O}),(0,f.jsx)("div",{children:l.valid?i("edit-link-dialog.detail"):i("edit-link-dialog.invalid-url")})]})}),(0,f.jsxs)(y.TldrawUiDialogFooter,{className:"tlui-dialog__footer__actions",children:[(0,f.jsx)(v.TldrawUiButton,{type:"normal",onClick:O,onTouchEnd:O,children:(0,f.jsx)(g.TldrawUiButtonLabel,{children:i("edit-link-dialog.cancel")})}),k?(0,f.jsx)(v.TldrawUiButton,{type:"danger",onTouchEnd:x,onClick:x,children:(0,f.jsx)(g.TldrawUiButtonLabel,{children:i("edit-link-dialog.clear")})}):(0,f.jsx)(v.TldrawUiButton,{type:"primary",disabled:!l.valid,onTouchEnd:P,onClick:P,children:(0,f.jsx)(g.TldrawUiButtonLabel,{children:i("edit-link-dialog.save")})})]})]})}))},16036:function(e,t,n){"use strict";var r,o=n(85715).default,i=n(50883).default,a=Object.defineProperty,u=Object.getOwnPropertyDescriptor,s=Object.getOwnPropertyNames,c=Object.prototype.hasOwnProperty,l={};!function(e,t){for(var n in t)a(e,n,{get:t[n],enumerable:!0})}(l,{EmbedDialog:function(){return O}}),e.exports=(r=l,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,l=i(s(t));try{var f=function(){var i=o.value;c.call(e,i)||i===n||a(e,i,{get:function(){return t[i]},enumerable:!(r=u(t,i))||r.enumerable})};for(l.s();!(o=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(a({},"__esModule",{value:!0}),r));var f=n(44414),d=n(57777),p=n(9950),h=n(4033),v=n(39247),g=n(88668),y=n(78739),m=n(97410),b=n(61537),w=n(95139),S=n(52046),x=n(88635),P=n(98220),O=(0,d.track)((function(e){var t=e.onClose,n=(0,d.useEditor)(),r=(0,m.useTranslation)(),i=(0,v.useAssetUrls)(),a=(0,p.useState)(null),u=o(a,2),s=u[0],c=u[1],l=(0,p.useState)(""),O=o(l,2),k=O[0],_=O[1],j=(0,p.useState)(null),I=o(j,2),T=I[0],E=I[1],C=(0,p.useState)(!1),M=o(C,2),A=M[0],D=M[1],R=(0,p.useRef)(-1),N=(0,y.useGetEmbedDefinitions)(),L=(0,g.useGetEmbedDefinition)();return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsxs)(S.TldrawUiDialogHeader,{children:[(0,f.jsx)(S.TldrawUiDialogTitle,{children:s?"".concat(r("embed-dialog.title")," \u2014 ").concat(s.title):r("embed-dialog.title")}),(0,f.jsx)(S.TldrawUiDialogCloseButton,{})]}),s?(0,f.jsxs)(f.Fragment,{children:[(0,f.jsxs)(S.TldrawUiDialogBody,{className:"tlui-embed-dialog__enter",children:[(0,f.jsx)(P.TldrawUiInput,{className:"tlui-embed-dialog__input",label:"embed-dialog.url",placeholder:"https://example.com",autoFocus:!0,onValueChange:function(e){_(e);var t=L(e);E(t&&t.definition.type===s.type?t:null),D(!1),clearTimeout(R.current),R.current=n.timers.setTimeout((function(){return D(!t)}),320)}}),""===k?(0,f.jsxs)("div",{className:"tlui-embed-dialog__instruction",children:[(0,f.jsx)("span",{children:r("embed-dialog.instruction")})," ",s.instructionLink&&(0,f.jsxs)("a",{target:"_blank",rel:"noopener noreferrer",href:s.instructionLink,className:"tlui-embed-dialog__instruction__link",children:["Learn more.",(0,f.jsx)(x.TldrawUiIcon,{icon:"external-link",small:!0})]})]}):(0,f.jsx)("div",{className:"tlui-embed-dialog__warning",children:A?r("embed-dialog.invalid-url"):"\xa0"})]}),(0,f.jsxs)(S.TldrawUiDialogFooter,{className:"tlui-dialog__footer__actions",children:[(0,f.jsx)(b.TldrawUiButton,{type:"normal",onClick:function(){c(null),E(null),_("")},children:(0,f.jsx)(w.TldrawUiButtonLabel,{children:r("embed-dialog.back")})}),(0,f.jsx)("div",{className:"tlui-embed__spacer"}),(0,f.jsx)(b.TldrawUiButton,{type:"normal",onClick:t,children:(0,f.jsx)(w.TldrawUiButtonLabel,{children:r("embed-dialog.cancel")})}),(0,f.jsx)(b.TldrawUiButton,{type:"primary",disabled:!T,onClick:function(){T&&(n.putExternalContent({type:"embed",url:k,point:n.getViewportPageBounds().center,embed:T.definition}),t())},children:(0,f.jsx)(w.TldrawUiButtonLabel,{children:r("embed-dialog.create")})})]})]}):(0,f.jsx)(f.Fragment,{children:(0,f.jsx)(S.TldrawUiDialogBody,{className:"tlui-embed-dialog__list",children:N.map((function(e){var t=(0,h.isDefaultEmbedDefinitionType)(e.type)?i.embedIcons[e.type]:(0,h.isCustomEmbedDefinition)(e)?e.icon:void 0;return(0,f.jsxs)(b.TldrawUiButton,{type:"menu",onClick:function(){return c(e)},children:[(0,f.jsx)(w.TldrawUiButtonLabel,{children:(0,m.untranslated)(e.title)}),t&&(0,f.jsx)("div",{className:"tlui-embed-dialog__item__image",style:{backgroundImage:"url(".concat(t,")")}})]},e.type)}))})})]})}))},29889:function(e,t,n){"use strict";var r,o=n(50883).default,i=Object.defineProperty,a=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,c={};!function(e,t){for(var n in t)i(e,n,{get:t[n],enumerable:!0})}(c,{FollowingIndicator:function(){return d}}),e.exports=(r=c,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var c,l=o(u(t));try{var f=function(){var o=c.value;s.call(e,o)||o===n||i(e,o,{get:function(){return t[o]},enumerable:!(r=a(t,o))||r.enumerable})};for(l.s();!(c=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(i({},"__esModule",{value:!0}),r));var l=n(44414),f=n(57777);function d(){var e=(0,f.useEditor)(),t=(0,f.useValue)("follow",(function(){return e.getInstanceState().followingUserId}),[e]);return t?(0,l.jsx)(p,{userId:t}):null}function p(e){var t=e.userId,n=(0,f.usePresence)(t);return n?(0,l.jsx)("div",{className:"tlui-following-indicator",style:{borderColor:n.color}}):null}},91815:function(e,t,n){"use strict";var r,o=n(50883).default,i=Object.defineProperty,a=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,c={};!function(e,t){for(var n in t)i(e,n,{get:t[n],enumerable:!0})}(c,{DefaultHelpMenu:function(){return S}}),e.exports=(r=c,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var c,l=o(u(t));try{var f=function(){var o=c.value;s.call(e,o)||o===n||i(e,o,{get:function(){return t[o]},enumerable:!(r=a(t,o))||r.enumerable})};for(l.s();!(c=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(i({},"__esModule",{value:!0}),r));var l=n(44414),f=n(57777),d=n(9950),p=n(12521),h=n(77740),v=n(97410),g=n(61537),y=n(67880),m=n(80408),b=n(70649),w=n(65574),S=(0,d.memo)((function(e){var t=e.children,n=(0,v.useTranslation)(),r=(0,h.useBreakpoint)(),o=(0,d.useRef)(null);(0,f.usePassThroughWheelEvents)(o);var i=null!==t&&void 0!==t?t:(0,l.jsx)(w.DefaultHelpMenuContent,{});return r<p.PORTRAIT_BREAKPOINT.MOBILE?null:(0,l.jsx)("div",{ref:o,className:"tlui-help-menu",children:(0,l.jsxs)(m.TldrawUiDropdownMenuRoot,{id:"help menu",children:[(0,l.jsx)(m.TldrawUiDropdownMenuTrigger,{children:(0,l.jsx)(g.TldrawUiButton,{type:"help",title:n("help-menu.title"),"data-testid":"help-menu.button",children:(0,l.jsx)(y.TldrawUiButtonIcon,{icon:"question-mark",small:!0})})}),(0,l.jsx)(m.TldrawUiDropdownMenuContent,{side:"top",align:"end",alignOffset:0,sideOffset:8,children:(0,l.jsx)(b.TldrawUiMenuContextProvider,{type:"menu",sourceId:"help-menu",children:i})})]})})}))},65574:function(e,t,n){"use strict";var r,o=n(50883).default,i=Object.defineProperty,a=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,c={};!function(e,t){for(var n in t)i(e,n,{get:t[n],enumerable:!0})}(c,{DefaultHelpMenuContent:function(){return g},KeyboardShortcutsMenuItem:function(){return y}}),e.exports=(r=c,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var c,l=o(u(t));try{var f=function(){var o=c.value;s.call(e,o)||o===n||i(e,o,{get:function(){return t[o]},enumerable:!(r=a(t,o))||r.enumerable})};for(l.s();!(c=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(i({},"__esModule",{value:!0}),r));var l=n(44414),f=n(9950),d=n(3594),p=n(49489),h=n(79467),v=n(95767);function g(){return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(h.LanguageMenu,{}),(0,l.jsx)(y,{})]})}function y(){var e=(0,d.useTldrawUiComponents)().KeyboardShortcutsDialog,t=(0,p.useDialogs)().addDialog,n=(0,f.useCallback)((function(){e&&t({component:e})}),[t,e]);return e?(0,l.jsx)(v.TldrawUiMenuItem,{id:"keyboard-shortcuts-button",label:"help-menu.keyboard-shortcuts",readonlyOk:!0,onSelect:n}):null}},58712:function(e,t,n){"use strict";var r,o=n(85715).default,i=n(50883).default,a=Object.defineProperty,u=Object.getOwnPropertyDescriptor,s=Object.getOwnPropertyNames,c=Object.prototype.hasOwnProperty,l={};!function(e,t){for(var n in t)a(e,n,{get:t[n],enumerable:!0})}(l,{BackToContent:function(){return g}}),e.exports=(r=l,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,l=i(s(t));try{var f=function(){var i=o.value;c.call(e,i)||i===n||a(e,i,{get:function(){return t[i]},enumerable:!(r=u(t,i))||r.enumerable})};for(l.s();!(o=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(a({},"__esModule",{value:!0}),r));var f=n(44414),d=n(57777),p=n(9950),h=n(2491),v=n(61625);function g(){var e=(0,d.useEditor)(),t=(0,h.useActions)(),n=(0,p.useState)(!1),r=o(n,2),i=r[0],a=r[1],u=(0,p.useRef)(!1);return(0,d.useQuickReactor)("toggle showback to content",(function(){var t=u.current,n=e.getCurrentPageShapeIds(),r=!1;n.size&&(r=n.size===e.getCulledShapes().size),t!==r&&(a(r),u.current=r)}),[e]),i?(0,f.jsx)(v.TldrawUiMenuActionItem,{actionId:"back-to-content",onSelect:function(){t["back-to-content"].onSelect("helper-buttons"),a(!1)}}):null}},35493:function(e,t,n){"use strict";var r,o=n(50883).default,i=Object.defineProperty,a=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,c={};!function(e,t){for(var n in t)i(e,n,{get:t[n],enumerable:!0})}(c,{DefaultHelperButtons:function(){return p}}),e.exports=(r=c,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var c,l=o(u(t));try{var f=function(){var o=c.value;s.call(e,o)||o===n||i(e,o,{get:function(){return t[o]},enumerable:!(r=a(t,o))||r.enumerable})};for(l.s();!(c=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(i({},"__esModule",{value:!0}),r));var l=n(44414),f=n(70649),d=n(19416);function p(e){var t=e.children,n=null!==t&&void 0!==t?t:(0,l.jsx)(d.DefaultHelperButtonsContent,{});return(0,l.jsx)("div",{className:"tlui-helper-buttons",children:(0,l.jsx)(f.TldrawUiMenuContextProvider,{type:"helper-buttons",sourceId:"helper-buttons",children:n})})}},19416:function(e,t,n){"use strict";var r,o=n(50883).default,i=Object.defineProperty,a=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,c={};!function(e,t){for(var n in t)i(e,n,{get:t[n],enumerable:!0})}(c,{DefaultHelperButtonsContent:function(){return h}}),e.exports=(r=c,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var c,l=o(u(t));try{var f=function(){var o=c.value;s.call(e,o)||o===n||i(e,o,{get:function(){return t[o]},enumerable:!(r=a(t,o))||r.enumerable})};for(l.s();!(c=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(i({},"__esModule",{value:!0}),r));var l=n(44414),f=n(58712),d=n(84983),p=n(84228);function h(){return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(d.ExitPenMode,{}),(0,l.jsx)(f.BackToContent,{}),(0,l.jsx)(p.StopFollowing,{})]})}},84983:function(e,t,n){"use strict";var r,o=n(50883).default,i=Object.defineProperty,a=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,c={};!function(e,t){for(var n in t)i(e,n,{get:t[n],enumerable:!0})}(c,{ExitPenMode:function(){return p}}),e.exports=(r=c,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var c,l=o(u(t));try{var f=function(){var o=c.value;s.call(e,o)||o===n||i(e,o,{get:function(){return t[o]},enumerable:!(r=a(t,o))||r.enumerable})};for(l.s();!(c=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(i({},"__esModule",{value:!0}),r));var l=n(44414),f=n(57777),d=n(61625);function p(){var e=(0,f.useEditor)();return(0,f.useValue)("is pen mode",(function(){return e.getInstanceState().isPenMode}),[e])?(0,l.jsx)(d.TldrawUiMenuActionItem,{actionId:"exit-pen-mode"}):null}},84228:function(e,t,n){"use strict";var r,o=n(12897).default,i=n(50883).default,a=Object.defineProperty,u=Object.getOwnPropertyDescriptor,s=Object.getOwnPropertyNames,c=Object.prototype.hasOwnProperty,l={};!function(e,t){for(var n in t)a(e,n,{get:t[n],enumerable:!0})}(l,{StopFollowing:function(){return v}}),e.exports=(r=l,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,l=i(s(t));try{var f=function(){var i=o.value;c.call(e,i)||i===n||a(e,i,{get:function(){return t[i]},enumerable:!(r=u(t,i))||r.enumerable})};for(l.s();!(o=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(a({},"__esModule",{value:!0}),r));var f=n(44414),d=n(57777),p=n(2491),h=n(95767);function v(){var e=(0,d.useEditor)(),t=(0,p.useActions)();return(0,d.useValue)("is following user",(function(){return!!e.getInstanceState().followingUserId}),[e])?(0,f.jsx)(h.TldrawUiMenuItem,o({},t["stop-following"])):null}},68091:function(e,t,n){"use strict";var r,o=n(50883).default,i=Object.create,a=Object.defineProperty,u=Object.getOwnPropertyDescriptor,s=Object.getOwnPropertyNames,c=Object.getPrototypeOf,l=Object.prototype.hasOwnProperty,f=function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var i,c=o(s(t));try{var f=function(){var o=i.value;l.call(e,o)||o===n||a(e,o,{get:function(){return t[o]},enumerable:!(r=u(t,o))||r.enumerable})};for(c.s();!(i=c.n()).done;)f()}catch(d){c.e(d)}finally{c.f()}}return e},d={};!function(e,t){for(var n in t)a(e,n,{get:t[n],enumerable:!0})}(d,{DefaultKeyboardShortcutsDialog:function(){return x}}),e.exports=(r=d,f(a({},"__esModule",{value:!0}),r));var p=n(44414),h=function(e,t,n){return n=null!=e?i(c(e)):{},f(!t&&e&&e.__esModule?n:a(n,"default",{value:e,enumerable:!0}),e)}(n(48738)),v=n(9950),g=n(12521),y=n(77740),m=n(97410),b=n(52046),w=n(70649),S=n(16210),x=(0,v.memo)((function(e){var t=e.children,n=(0,m.useTranslation)(),r=(0,y.useBreakpoint)(),o=null!==t&&void 0!==t?t:(0,p.jsx)(S.DefaultKeyboardShortcutsDialogContent,{});return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)(b.TldrawUiDialogHeader,{className:"tlui-shortcuts-dialog__header",children:[(0,p.jsx)(b.TldrawUiDialogTitle,{children:n("shortcuts-dialog.title")}),(0,p.jsx)(b.TldrawUiDialogCloseButton,{})]}),(0,p.jsx)(b.TldrawUiDialogBody,{className:(0,h.default)("tlui-shortcuts-dialog__body",{"tlui-shortcuts-dialog__body__mobile":r<=g.PORTRAIT_BREAKPOINT.MOBILE_XS,"tlui-shortcuts-dialog__body__tablet":r<=g.PORTRAIT_BREAKPOINT.TABLET}),children:(0,p.jsx)(w.TldrawUiMenuContextProvider,{type:"keyboard-shortcuts",sourceId:"kbd",children:o})}),(0,p.jsx)("div",{className:"tlui-dialog__scrim"})]})}))},16210:function(e,t,n){"use strict";var r,o=n(50883).default,i=Object.defineProperty,a=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,c={};!function(e,t){for(var n in t)i(e,n,{get:t[n],enumerable:!0})}(c,{DefaultKeyboardShortcutsDialogContent:function(){return g}}),e.exports=(r=c,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var c,l=o(u(t));try{var f=function(){var o=c.value;s.call(e,o)||o===n||i(e,o,{get:function(){return t[o]},enumerable:!(r=a(t,o))||r.enumerable})};for(l.s();!(c=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(i({},"__esModule",{value:!0}),r));var l=n(44414),f=n(37454),d=n(61625),p=n(60681),h=n(95767),v=n(25797);function g(){var e=(0,f.useShowCollaborationUi)();return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(p.TldrawUiMenuGroup,{label:"shortcuts-dialog.tools",id:"tools",children:[(0,l.jsx)(d.TldrawUiMenuActionItem,{actionId:"toggle-tool-lock"}),(0,l.jsx)(d.TldrawUiMenuActionItem,{actionId:"insert-media"}),(0,l.jsx)(v.TldrawUiMenuToolItem,{toolId:"select"}),(0,l.jsx)(v.TldrawUiMenuToolItem,{toolId:"draw"}),(0,l.jsx)(v.TldrawUiMenuToolItem,{toolId:"eraser"}),(0,l.jsx)(v.TldrawUiMenuToolItem,{toolId:"hand"}),(0,l.jsx)(v.TldrawUiMenuToolItem,{toolId:"rectangle"}),(0,l.jsx)(v.TldrawUiMenuToolItem,{toolId:"ellipse"}),(0,l.jsx)(v.TldrawUiMenuToolItem,{toolId:"arrow"}),(0,l.jsx)(v.TldrawUiMenuToolItem,{toolId:"line"}),(0,l.jsx)(v.TldrawUiMenuToolItem,{toolId:"text"}),(0,l.jsx)(v.TldrawUiMenuToolItem,{toolId:"frame"}),(0,l.jsx)(v.TldrawUiMenuToolItem,{toolId:"note"}),(0,l.jsx)(v.TldrawUiMenuToolItem,{toolId:"laser"}),(0,l.jsx)(h.TldrawUiMenuItem,{id:"pointer-down",label:"tool.pointer-down",kbd:",",onSelect:function(){}})]}),(0,l.jsxs)(p.TldrawUiMenuGroup,{label:"shortcuts-dialog.preferences",id:"preferences",children:[(0,l.jsx)(d.TldrawUiMenuActionItem,{actionId:"toggle-dark-mode"}),(0,l.jsx)(d.TldrawUiMenuActionItem,{actionId:"toggle-focus-mode"}),(0,l.jsx)(d.TldrawUiMenuActionItem,{actionId:"toggle-grid"})]}),(0,l.jsxs)(p.TldrawUiMenuGroup,{label:"shortcuts-dialog.edit",id:"edit",children:[(0,l.jsx)(d.TldrawUiMenuActionItem,{actionId:"undo"}),(0,l.jsx)(d.TldrawUiMenuActionItem,{actionId:"redo"}),(0,l.jsx)(d.TldrawUiMenuActionItem,{actionId:"cut"}),(0,l.jsx)(d.TldrawUiMenuActionItem,{actionId:"copy"}),(0,l.jsx)(d.TldrawUiMenuActionItem,{actionId:"paste"}),(0,l.jsx)(d.TldrawUiMenuActionItem,{actionId:"select-all"}),(0,l.jsx)(d.TldrawUiMenuActionItem,{actionId:"delete"}),(0,l.jsx)(d.TldrawUiMenuActionItem,{actionId:"duplicate"})]}),(0,l.jsxs)(p.TldrawUiMenuGroup,{label:"shortcuts-dialog.view",id:"view",children:[(0,l.jsx)(d.TldrawUiMenuActionItem,{actionId:"zoom-in"}),(0,l.jsx)(d.TldrawUiMenuActionItem,{actionId:"zoom-out"}),(0,l.jsx)(d.TldrawUiMenuActionItem,{actionId:"zoom-to-100"}),(0,l.jsx)(d.TldrawUiMenuActionItem,{actionId:"zoom-to-fit"}),(0,l.jsx)(d.TldrawUiMenuActionItem,{actionId:"zoom-to-selection"})]}),(0,l.jsxs)(p.TldrawUiMenuGroup,{label:"shortcuts-dialog.transform",id:"transform",children:[(0,l.jsx)(d.TldrawUiMenuActionItem,{actionId:"bring-to-front"}),(0,l.jsx)(d.TldrawUiMenuActionItem,{actionId:"bring-forward"}),(0,l.jsx)(d.TldrawUiMenuActionItem,{actionId:"send-backward"}),(0,l.jsx)(d.TldrawUiMenuActionItem,{actionId:"send-to-back"}),(0,l.jsx)(d.TldrawUiMenuActionItem,{actionId:"group"}),(0,l.jsx)(d.TldrawUiMenuActionItem,{actionId:"ungroup"}),(0,l.jsx)(d.TldrawUiMenuActionItem,{actionId:"flip-horizontal"}),(0,l.jsx)(d.TldrawUiMenuActionItem,{actionId:"flip-vertical"}),(0,l.jsx)(d.TldrawUiMenuActionItem,{actionId:"align-top"}),(0,l.jsx)(d.TldrawUiMenuActionItem,{actionId:"align-center-vertical"}),(0,l.jsx)(d.TldrawUiMenuActionItem,{actionId:"align-bottom"}),(0,l.jsx)(d.TldrawUiMenuActionItem,{actionId:"align-left"}),(0,l.jsx)(d.TldrawUiMenuActionItem,{actionId:"align-center-horizontal"}),(0,l.jsx)(d.TldrawUiMenuActionItem,{actionId:"align-right"})]}),e&&(0,l.jsx)(p.TldrawUiMenuGroup,{label:"shortcuts-dialog.collaboration",id:"collaboration",children:(0,l.jsx)(d.TldrawUiMenuActionItem,{actionId:"open-cursor-chat"})})]})}},79467:function(e,t,n){"use strict";var r,o=n(50883).default,i=Object.defineProperty,a=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,c={};!function(e,t){for(var n in t)i(e,n,{get:t[n],enumerable:!0})}(c,{LanguageMenu:function(){return g}}),e.exports=(r=c,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var c,l=o(u(t));try{var f=function(){var o=c.value;s.call(e,o)||o===n||i(e,o,{get:function(){return t[o]},enumerable:!(r=a(t,o))||r.enumerable})};for(l.s();!(c=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(i({},"__esModule",{value:!0}),r));var l=n(44414),f=n(57777),d=n(14867),p=n(98382),h=n(60681),v=n(12947);function g(){var e=(0,f.useMaybeEditor)(),t=(0,d.useUiEvents)(),n=(0,f.useValue)("locale",(function(){return null===e||void 0===e?void 0:e.user.getLocale()}),[e]);return e?(0,l.jsx)(v.TldrawUiMenuSubmenu,{id:"help menu language",label:"menu.language",children:(0,l.jsx)(h.TldrawUiMenuGroup,{id:"languages",children:f.LANGUAGES.map((function(r){var o=r.locale,i=r.label;return(0,l.jsx)(p.TldrawUiMenuCheckboxItem,{id:"language-".concat(o),title:o,label:i,checked:o===n,readonlyOk:!0,onSelect:function(){e.user.updateUserPreferences({locale:o}),t("change-language",{source:"menu",locale:o})}},o)}))})}):null}},1839:function(e,t,n){"use strict";var r,o=n(85715).default,i=n(50883).default,a=Object.create,u=Object.defineProperty,s=Object.getOwnPropertyDescriptor,c=Object.getOwnPropertyNames,l=Object.getPrototypeOf,f=Object.prototype.hasOwnProperty,d=function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,a=i(c(t));try{var l=function(){var i=o.value;f.call(e,i)||i===n||u(e,i,{get:function(){return t[i]},enumerable:!(r=s(t,i))||r.enumerable})};for(a.s();!(o=a.n()).done;)l()}catch(d){a.e(d)}finally{a.f()}}return e},p={};!function(e,t){for(var n in t)u(e,n,{get:t[n],enumerable:!0})}(p,{DefaultMainMenu:function(){return O}}),e.exports=(r=p,d(u({},"__esModule",{value:!0}),r));var h=n(44414),v=function(e,t,n){return n=null!=e?a(l(e)):{},d(!t&&e&&e.__esModule?n:u(n,"default",{value:e,enumerable:!0}),e)}(n(95549)),g=n(57777),y=n(9950),m=n(80459),b=n(97410),w=n(61537),S=n(67880),x=n(70649),P=n(24526),O=(0,y.memo)((function(e){var t=e.children,n=(0,g.useContainer)(),r=(0,m.useMenuIsOpen)("main menu"),i=o(r,2),a=i[0],u=i[1],s=(0,b.useTranslation)(),c=null!==t&&void 0!==t?t:(0,h.jsx)(P.DefaultMainMenuContent,{});return(0,h.jsxs)(v.Root,{dir:"ltr",open:a,onOpenChange:u,modal:!1,children:[(0,h.jsx)(v.Trigger,{asChild:!0,dir:"ltr",children:(0,h.jsx)(w.TldrawUiButton,{type:"icon","data-testid":"main-menu.button",title:s("menu.title"),children:(0,h.jsx)(S.TldrawUiButtonIcon,{icon:"menu",small:!0})})}),(0,h.jsx)(v.Portal,{container:n,children:(0,h.jsx)(v.Content,{className:"tlui-menu",side:"bottom",align:"start",collisionPadding:4,alignOffset:0,sideOffset:6,children:(0,h.jsx)(x.TldrawUiMenuContextProvider,{type:"menu",sourceId:"main-menu",children:c})})})]})}))},24526:function(e,t,n){"use strict";var r,o=n(50883).default,i=Object.defineProperty,a=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,c={};!function(e,t){for(var n in t)i(e,n,{get:t[n],enumerable:!0})}(c,{DefaultMainMenuContent:function(){return w},EditSubmenu:function(){return x},ExportFileContentSubMenu:function(){return S},ExtrasGroup:function(){return j},LockGroup:function(){return O},MiscMenuGroup:function(){return P},PreferencesGroup:function(){return I},UndoRedoGroup:function(){return k},ViewSubmenu:function(){return _}}),e.exports=(r=c,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var c,l=o(u(t));try{var f=function(){var o=c.value;s.call(e,o)||o===n||i(e,o,{get:function(){return t[o]},enumerable:!(r=a(t,o))||r.enumerable})};for(l.s();!(c=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(i({},"__esModule",{value:!0}),r));var l=n(44414),f=n(57777),d=n(54150),p=n(85050),h=n(65574),v=n(79467),g=n(53655),y=n(61625),m=n(60681),b=n(12947);function w(){return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(m.TldrawUiMenuGroup,{id:"basic",children:[(0,l.jsx)(x,{}),(0,l.jsx)(_,{}),(0,l.jsx)(S,{}),(0,l.jsx)(j,{})]}),(0,l.jsx)(I,{})]})}function S(){return(0,l.jsxs)(b.TldrawUiMenuSubmenu,{id:"export-all-as",label:"context-menu.export-all-as",size:"small",children:[(0,l.jsxs)(m.TldrawUiMenuGroup,{id:"export-all-as-group",children:[(0,l.jsx)(y.TldrawUiMenuActionItem,{actionId:"export-all-as-svg"}),(0,l.jsx)(y.TldrawUiMenuActionItem,{actionId:"export-all-as-png"}),(0,l.jsx)(y.TldrawUiMenuActionItem,{actionId:"export-all-as-json"})]}),(0,l.jsx)(m.TldrawUiMenuGroup,{id:"export-all-as-bg",children:(0,l.jsx)(g.ToggleTransparentBgMenuItem,{})})]})}function x(){var e=(0,f.useEditor)(),t=(0,f.useValue)("isSelectToolActive",(function(){return"select"===e.getCurrentToolId()}),[e]);return(0,l.jsxs)(b.TldrawUiMenuSubmenu,{id:"edit",label:"menu.edit",disabled:!t,children:[(0,l.jsx)(k,{}),(0,l.jsx)(g.ClipboardMenuGroup,{}),(0,l.jsx)(g.ConversionsMenuGroup,{}),(0,l.jsx)(P,{}),(0,l.jsx)(O,{}),(0,l.jsx)(m.TldrawUiMenuGroup,{id:"select-all",children:(0,l.jsx)(g.SelectAllMenuItem,{})})]})}function P(){return(0,l.jsxs)(m.TldrawUiMenuGroup,{id:"misc",children:[(0,l.jsx)(g.GroupMenuItem,{}),(0,l.jsx)(g.UngroupMenuItem,{}),(0,l.jsx)(g.EditLinkMenuItem,{}),(0,l.jsx)(g.ToggleAutoSizeMenuItem,{}),(0,l.jsx)(g.RemoveFrameMenuItem,{}),(0,l.jsx)(g.FitFrameToContentMenuItem,{}),(0,l.jsx)(g.ConvertToEmbedMenuItem,{}),(0,l.jsx)(g.ConvertToBookmarkMenuItem,{}),(0,l.jsx)(g.FlattenMenuItem,{})]})}function O(){return(0,l.jsxs)(m.TldrawUiMenuGroup,{id:"lock",children:[(0,l.jsx)(g.ToggleLockMenuItem,{}),(0,l.jsx)(g.UnlockAllMenuItem,{})]})}function k(){var e=(0,d.useCanUndo)(),t=(0,d.useCanRedo)();return(0,l.jsxs)(m.TldrawUiMenuGroup,{id:"undo-redo",children:[(0,l.jsx)(y.TldrawUiMenuActionItem,{actionId:"undo",disabled:!e}),(0,l.jsx)(y.TldrawUiMenuActionItem,{actionId:"redo",disabled:!t})]})}function _(){return(0,l.jsx)(b.TldrawUiMenuSubmenu,{id:"view",label:"menu.view",children:(0,l.jsxs)(m.TldrawUiMenuGroup,{id:"view-actions",children:[(0,l.jsx)(y.TldrawUiMenuActionItem,{actionId:"zoom-in"}),(0,l.jsx)(y.TldrawUiMenuActionItem,{actionId:"zoom-out"}),(0,l.jsx)(g.ZoomTo100MenuItem,{}),(0,l.jsx)(g.ZoomToFitMenuItem,{}),(0,l.jsx)(g.ZoomToSelectionMenuItem,{})]})})}function j(){return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(y.TldrawUiMenuActionItem,{actionId:"insert-embed"}),(0,l.jsx)(y.TldrawUiMenuActionItem,{actionId:"insert-media"})]})}function I(){return(0,l.jsxs)(m.TldrawUiMenuGroup,{id:"preferences",children:[(0,l.jsxs)(b.TldrawUiMenuSubmenu,{id:"preferences",label:"menu.preferences",children:[(0,l.jsxs)(m.TldrawUiMenuGroup,{id:"preferences-actions",children:[(0,l.jsx)(g.ToggleSnapModeItem,{}),(0,l.jsx)(g.ToggleToolLockItem,{}),(0,l.jsx)(g.ToggleGridItem,{}),(0,l.jsx)(g.ToggleWrapModeItem,{}),(0,l.jsx)(g.ToggleFocusModeItem,{}),(0,l.jsx)(g.ToggleEdgeScrollingItem,{}),(0,l.jsx)(g.ToggleReduceMotionItem,{}),(0,l.jsx)(g.ToggleDynamicSizeModeItem,{}),(0,l.jsx)(g.TogglePasteAtCursorItem,{}),(0,l.jsx)(g.ToggleDebugModeItem,{})]}),(0,l.jsx)(m.TldrawUiMenuGroup,{id:"color-scheme",children:(0,l.jsx)(p.ColorSchemeMenu,{})})]}),(0,l.jsx)(v.LanguageMenu,{}),(0,l.jsx)(h.KeyboardShortcutsMenuItem,{})]})}},4293:function(e,t,n){"use strict";var r,o=n(12897).default,i=n(50883).default,a=Object.create,u=Object.defineProperty,s=Object.getOwnPropertyDescriptor,c=Object.getOwnPropertyNames,l=Object.getPrototypeOf,f=Object.prototype.hasOwnProperty,d=function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,a=i(c(t));try{var l=function(){var i=o.value;f.call(e,i)||i===n||u(e,i,{get:function(){return t[i]},enumerable:!(r=s(t,i))||r.enumerable})};for(a.s();!(o=a.n()).done;)l()}catch(d){a.e(d)}finally{a.f()}}return e},p={};!function(e,t){for(var n in t)u(e,n,{get:t[n],enumerable:!0})}(p,{DefaultMinimap:function(){return m}}),e.exports=(r=p,d(u({},"__esModule",{value:!0}),r));var h=n(44414),v=n(57777),g=function(e,t,n){return n=null!=e?a(l(e)):{},d(!t&&e&&e.__esModule?n:u(n,"default",{value:e,enumerable:!0}),e)}(n(9950)),y=n(27995);function m(){var e=(0,v.useEditor)(),t=(0,v.useContainer)(),n=g.useRef(null),r=g.useRef(!1),i=g.useRef();g.useEffect((function(){try{var r=new y.MinimapManager(e,n.current,t);return i.current=r,i.current.close}catch(o){e.annotateError(o,{origin:"minimap",willCrashApp:!1}),e.timers.setTimeout((function(){throw o}))}}),[e,t]);var a=g.useCallback((function(t){if(e.getCurrentPageShapeIds().size&&i.current){var n=i.current.minimapScreenPointToPagePoint(t.clientX,t.clientY,!1,!1),r=i.current.minimapScreenPointToPagePoint(t.clientX,t.clientY,!1,!0);i.current.originPagePoint.setTo(r),i.current.originPageCenter.setTo(e.getViewportPageBounds().center),e.centerOnPoint(n,{animation:{duration:e.options.animationMediumMs}})}}),[e]),u=g.useCallback((function(t){if(i.current){var n=t.currentTarget;if((0,v.setPointerCapture)(n,t),e.getCurrentPageShapeIds().size){r.current=!0,i.current.isInViewport=!1;var o=i.current.minimapScreenPointToPagePoint(t.clientX,t.clientY,!1,!1),a=e.getViewportPageBounds(),u=i.current.getContentPageBounds();if(new v.Box(u.x-a.width/2,u.y-a.height/2,u.width+a.width,u.height+a.height).containsPoint(o)&&!a.containsPoint(o)){i.current.isInViewport=a.containsPoint(o);var s=v.Vec.Sub(a.center,a.point),c=v.Vec.Add(o,s);i.current.originPagePoint.setTo(c),i.current.originPageCenter.setTo(o),e.centerOnPoint(o,{animation:{duration:e.options.animationMediumMs}})}else{var l=i.current.minimapScreenPointToPagePoint(t.clientX,t.clientY,!1,!0);i.current.isInViewport=a.containsPoint(l),i.current.originPagePoint.setTo(l),i.current.originPageCenter.setTo(a.center)}document.body.addEventListener("pointerup",(function e(t){n&&(0,v.releasePointerCapture)(n,t),r.current=!1,document.body.removeEventListener("pointerup",e)}))}}}),[e]),s=g.useCallback((function(t){if(i.current){var n=i.current.minimapScreenPointToPagePoint(t.clientX,t.clientY,t.shiftKey,!0);if(r.current){if(i.current.isInViewport){var a=i.current.originPagePoint.clone().sub(i.current.originPageCenter);return void e.centerOnPoint(v.Vec.Sub(n,a))}e.centerOnPoint(n)}var u=i.current.getMinimapPagePoint(t.clientX,t.clientY),s=e.pageToScreen(u),c=o(o({type:"pointer",target:"canvas",name:"pointer_move"},(0,v.getPointerInfo)(t)),{},{point:s,isPen:e.getInstanceState().isPenMode});e.dispatch(c)}}),[e]),c=g.useCallback((function(t){var n=(0,v.normalizeWheel)(t);e.dispatch({type:"wheel",name:"wheel",delta:n,point:new v.Vec(t.clientX,t.clientY),shiftKey:t.shiftKey,altKey:t.altKey,ctrlKey:t.metaKey||t.ctrlKey,metaKey:t.metaKey,accelKey:(0,v.isAccelKey)(t)})}),[e]),l=(0,v.useIsDarkMode)();return g.useEffect((function(){e.timers.setTimeout((function(){var e,t;null===(e=i.current)||void 0===e||e.updateColors(),null===(t=i.current)||void 0===t||t.render()}))}),[l,e]),(0,h.jsx)("div",{className:"tlui-minimap",children:(0,h.jsx)("canvas",{role:"img","aria-label":"minimap",ref:n,className:"tlui-minimap__canvas",onDoubleClick:a,onPointerMove:s,onPointerDown:u,onWheelCapture:c})})}},27995:function(e,t,n){"use strict";var r,o=n(17383).default,i=n(34579).default,a=n(11303).default,u=n(50883).default,s=Object.create,c=Object.defineProperty,l=Object.getOwnPropertyDescriptor,f=Object.getOwnPropertyNames,d=Object.prototype.hasOwnProperty,p=function(e,t){return(t=Symbol[e])?t:Symbol.for("Symbol."+e)},h=function(e){throw TypeError(e)},v=function(e,t,n){return t in e?c(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},g=function(e,t){return c(e,"name",{value:t,configurable:!0})},y=["class","method","getter","setter","accessor","field","value","get","set"],m=function(e){return void 0!==e&&"function"!==typeof e?h("Function expected"):e},b=function(e,t,n,r,o){return{kind:y[e],name:t,metadata:r,addInitializer:function(e){return n._?h("Already initialized"):o.push(m(e||null))}}},w=function(e,t){return v(t,p("metadata"),e[3])},S=function(e,t,n,r,o,i){var u,s,f,d,p,v=7&t,S=!!(8&t),x=!!(16&t),P=v>3?e.length+1:v?S?1:2:0,I=y[v+5],T=v>3&&(e[P-1]=[]),E=e[P]||(e[P]=[]),C=v&&(!x&&!S&&(o=o.prototype),v<5&&(v>3||!x)&&l(v<4?o:a("set",a("get",{},n,(function(){return k(this,i)})),n,(function(e){return _(this,i,e)})),n));v?x&&v<4&&g(i,(v>2?"set ":v>1?"get ":"")+n):g(o,n);for(var M=r.length-1;M>=0;M--)d=b(v,n,f={},e[3],E),v&&(d.static=S,d.private=x,p=d.access={has:x?function(e){return O(o,e)}:function(e){return n in e}},3^v&&(p.get=x?function(e){return(1^v?k:j)(e,o,4^v?i:C.get)}:function(e){return e[n]}),v>2&&(p.set=x?function(e,t){return _(e,o,t,4^v?i:C.set)}:function(e,t){return e[n]=t})),s=(0,r[M])(v?v<4?x?i:C[I]:v>4?void 0:{get:C.get,set:C.set}:o,d),f._=1,4^v||void 0===s?m(s)&&(v>4?T.unshift(s):v?x?i=s:C[I]=s:o=s):"object"!==typeof s||null===s?h("Object expected"):(m(u=s.get)&&(C.get=u),m(u=s.set)&&(C.set=u),m(u=s.init)&&T.unshift(u));return v||w(e,o),C&&c(o,n,C),x?4^v?i:C:o},x=function(e,t,n){return v(e,"symbol"!==typeof t?t+"":t,n)},P=function(e,t,n){return t.has(e)||h("Cannot "+n)},O=function(e,t){return Object(t)!==t?h('Cannot use the "in" operator on this value'):e.has(t)},k=function(e,t,n){return P(e,t,"read from private field"),n?n.call(e):t.get(e)},_=function(e,t,n,r){return P(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n},j=function(e,t,n){return P(e,t,"access private method"),n},I={};!function(e,t){for(var n in t)c(e,n,{get:t[n],enumerable:!0})}(I,{MinimapManager:function(){return K}}),e.exports=(r=I,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,i=u(f(t));try{var a=function(){var i=o.value;d.call(e,i)||i===n||c(e,i,{get:function(){return t[i]},enumerable:!(r=l(t,i))||r.enumerable})};for(i.s();!(o=i.n()).done;)a()}catch(s){i.e(s)}finally{i.f()}}return e}(c({},"__esModule",{value:!0}),r));var T,E,C,M,A,D,R,N,L,U,F,B=n(57777),V=n(46707),z=n(89006),H=n(38349);U=[B.bind],L=[B.computed],N=[B.computed],R=[B.computed],D=[B.computed],A=[B.computed],M=[B.computed],C=[B.computed],E=[B.computed],T=[B.bind];var K=function(){return i((function e(t,n,r){o(this,e),this.editor=t,this.elem=n,this.container=r,function(e,t,n,r){for(var o=0,i=e[t>>1],a=i&&i.length;o<a;o++)1&t?i[o].call(n):r=i[o].call(n,r)}(F,5,this),x(this,"disposables",[]),x(this,"gl"),x(this,"shapeGeometryCache"),x(this,"colors"),x(this,"id",(0,B.uniqueId)()),x(this,"canvasBoundingClientRect",(0,B.atom)("canvasBoundingClientRect",new B.Box)),x(this,"originPagePoint",new B.Vec),x(this,"originPageCenter",new B.Vec),x(this,"isInViewport",!1),this.gl=(0,z.setupWebGl)(n),this.shapeGeometryCache=t.store.createComputedCache("webgl-geometry",(function(e){var n=t.getShapeMaskedPageBounds(e.id);if(!n)return null;var r=new Float32Array(12);return(0,H.rectangle)(r,0,n.x,n.y,n.w,n.h),r})),this.colors=this._getColors(),this.disposables.push(this._listenForCanvasResize(),(0,B.react)("minimap render",this.render))}),[{key:"close",value:function(){return this.disposables.forEach((function(e){return e()}))}},{key:"_getColors",value:function(){var e=getComputedStyle(this.editor.getContainer());return{shapeFill:(0,V.getRgba)(e.getPropertyValue("--color-text-3").trim()),selectFill:(0,V.getRgba)(e.getPropertyValue("--color-selected").trim()),viewportFill:(0,V.getRgba)(e.getPropertyValue("--color-muted-1").trim()),background:(0,V.getRgba)(e.getPropertyValue("--color-low").trim())}}},{key:"updateColors",value:function(){this.colors=this._getColors()}},{key:"getDpr",value:function(){return this.editor.getInstanceState().devicePixelRatio}},{key:"getContentPageBounds",value:function(){var e=this.editor.getViewportPageBounds(),t=this.editor.getCurrentPageBounds();return t?B.Box.Expand(t,e):e}},{key:"getContentScreenBounds",value:function(){var e=this.getContentPageBounds(),t=this.editor.pageToScreen(e.point),n=this.editor.pageToScreen(new B.Vec(e.maxX,e.maxY));return new B.Box(t.x,t.y,n.x-t.x,n.y-t.y)}},{key:"_getCanvasBoundingRect",value:function(){var e=this.elem.getBoundingClientRect(),t=e.x,n=e.y,r=e.width,o=e.height;return new B.Box(t,n,r,o)}},{key:"getCanvasScreenBounds",value:function(){return this.canvasBoundingClientRect.get()}},{key:"_listenForCanvasResize",value:function(){var e=this,t=new ResizeObserver((function(){var t=e._getCanvasBoundingRect();e.canvasBoundingClientRect.set(t)}));return t.observe(this.elem),t.observe(this.container),function(){return t.disconnect()}}},{key:"getCanvasSize",value:function(){var e=this.canvasBoundingClientRect.get(),t=this.getDpr();return new B.Vec(e.width*t,e.height*t)}},{key:"getCanvasClientPosition",value:function(){return this.canvasBoundingClientRect.get().point}},{key:"getCanvasPageBounds",value:function(){var e=this.getCanvasScreenBounds(),t=this.getContentPageBounds(),n=e.width/e.height,r=t.width,o=r/n;o<t.height&&(r=(o=t.height)*n);var i=new B.Box(0,0,r,o);return i.center=t.center,i}},{key:"getZoom",value:function(){return this.getCanvasPageBounds().width/this.getCanvasScreenBounds().width}},{key:"getCanvasPageBoundsArray",value:function(){var e=this.getCanvasPageBounds(),t=e.x,n=e.y,r=e.w,o=e.h;return new Float32Array([t,n,r,o])}},{key:"getMinimapPagePoint",value:function(e,t){var n=this.getCanvasPageBounds(),r=this.getCanvasScreenBounds(),o=e-r.x,i=t-r.y;return o*=n.width/r.width,i*=n.height/r.height,o+=n.minX,i+=n.minY,new B.Vec(o,i,1)}},{key:"minimapScreenPointToPagePoint",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=this.editor.getViewportPageBounds(),i=this.getMinimapPagePoint(e,t),a=i.x,u=i.y;if(r){var s,c=null!==(s=this.editor.getCurrentPageBounds())&&void 0!==s?s:new B.Box,l=c.minX-o.width/2,f=c.maxX+o.width/2,d=c.minY-o.height/2,p=c.maxY+o.height/2;a+=(Math.max(0,l+o.width-a)-Math.max(0,-(f-o.width-a)))/2,u+=(Math.max(0,d+o.height-u)-Math.max(0,-(p-o.height-u)))/2,a=(0,B.clamp)(a,l,f),u=(0,B.clamp)(u,d,p)}if(n){var h=this.originPagePoint;Math.abs(a-h.x)>Math.abs(u-h.y)?u=h.y:a=h.x}return new B.Vec(a,u)}},{key:"render",value:function(){var e=this.gl.context,t=this.getCanvasSize();this.gl.setCanvasPageBounds(this.getCanvasPageBoundsArray()),this.elem.width=t.x,this.elem.height=t.y,e.viewport(0,0,t.x,t.y),e.clearColor(this.colors.background[0],this.colors.background[1],this.colors.background[2],1),e.clear(e.COLOR_BUFFER_BIT);for(var n=new Set(this.editor.getSelectedShapeIds()),r=this.colors,o=0,i=0,a=this.editor.getCurrentPageShapeIdsSorted(),u=0,s=a.length;u<s;u++){var c=a[u],l=this.shapeGeometryCache.get(c);if(l){var f=l.length;n.has(c)?((0,z.appendVertices)(this.gl.selectedShapes,o,l),o+=f):((0,z.appendVertices)(this.gl.unselectedShapes,i,l),i+=f)}}this.drawShapes(this.gl.unselectedShapes,i,r.shapeFill),this.drawShapes(this.gl.selectedShapes,o,r.selectFill),this.drawViewport(),this.drawCollaborators()}},{key:"drawShapes",value:function(e,t,n){this.gl.prepareTriangles(e,t),this.gl.setFillColor(n),this.gl.drawTriangles(t)}},{key:"drawViewport",value:function(){var e=this.editor.getViewportPageBounds(),t=(0,H.roundedRectangle)(this.gl.viewport.vertices,e,4*this.getZoom());this.gl.prepareTriangles(this.gl.viewport,t),this.gl.setFillColor(this.colors.viewportFill),this.gl.drawTrianglesTransparently(t),B.tlenv.isSafari&&(this.gl.drawTrianglesTransparently(t),this.gl.drawTrianglesTransparently(t),this.gl.drawTrianglesTransparently(t))}},{key:"drawCollaborators",value:function(){var e=this.editor.getCollaboratorsOnCurrentPage();if(e.length){var t=120,n=t*e.length;this.gl.collaborators.vertices.length<n&&(this.gl.collaborators.vertices=new Float32Array(n));var r,o=this.gl.collaborators.vertices,i=0,a=this.getZoom(),s=u(e);try{for(s.s();!(r=s.n()).done;){var c=r.value.cursor;c&&((0,H.pie)(o,{center:B.Vec.From(c),radius:3*a,offset:i,numArcSegments:20}),i+=t)}}catch(p){s.e(p)}finally{s.f()}this.gl.prepareTriangles(this.gl.collaborators,n),i=0;var l,f=u(e);try{for(f.s();!(l=f.n()).done;){var d=l.value.color;this.gl.setFillColor((0,V.getRgba)(d)),this.gl.context.drawArrays(this.gl.context.TRIANGLES,i/2,60),i+=t}}catch(p){f.e(p)}finally{f.f()}}}}])}();S(F=function(e){var t;return[,,,s(null!==(t=null===e||void 0===e?void 0:e[p("metadata")])&&void 0!==t?t:null)]}(null),1,"close",U,K),S(F,1,"getDpr",L,K),S(F,1,"getContentPageBounds",N,K),S(F,1,"getContentScreenBounds",R,K),S(F,1,"getCanvasSize",D,K),S(F,1,"getCanvasClientPosition",A,K),S(F,1,"getCanvasPageBounds",M,K),S(F,1,"getZoom",C,K),S(F,1,"getCanvasPageBoundsArray",E,K),S(F,1,"render",T,K),w(F,K)},46707:function(e,t,n){"use strict";var r,o=n(85715).default,i=n(50883).default,a=Object.defineProperty,u=Object.getOwnPropertyDescriptor,s=Object.getOwnPropertyNames,c=Object.prototype.hasOwnProperty,l={};!function(e,t){for(var n in t)a(e,n,{get:t[n],enumerable:!0})}(l,{getRgba:function(){return d}}),e.exports=(r=l,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,l=i(s(t));try{var f=function(){var i=o.value;c.call(e,i)||i===n||a(e,i,{get:function(){return t[i]},enumerable:!(r=u(t,i))||r.enumerable})};for(l.s();!(o=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(a({},"__esModule",{value:!0}),r));var f={};function d(e){if(f[e])return f[e];var t=document.createElement("canvas").getContext("2d");t.fillStyle=e,t.fillRect(0,0,1,1);var n=o(t.getImageData(0,0,1,1).data,4),r=n[0],i=n[1],a=n[2],u=n[3],s=new Float32Array([r/255,i/255,a/255,u/255]);return f[e]=s,s}},89006:function(e,t,n){"use strict";var r,o=n(50883).default,i=Object.defineProperty,a=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,c={};!function(e,t){for(var n in t)i(e,n,{get:t[n],enumerable:!0})}(c,{appendVertices:function(){return p},setupWebGl:function(){return f}}),e.exports=(r=c,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var c,l=o(u(t));try{var f=function(){var o=c.value;s.call(e,o)||o===n||i(e,o,{get:function(){return t[o]},enumerable:!(r=a(t,o))||r.enumerable})};for(l.s();!(c=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(i({},"__esModule",{value:!0}),r));var l=n(38349);function f(e){if(!e)throw new Error("Canvas element not found");var t=e.getContext("webgl2",{premultipliedAlpha:!1});if(!t)throw new Error("Failed to get webgl2 context");var n=t.createShader(t.VERTEX_SHADER);if(!n)throw new Error("Failed to create vertex shader");if(t.shaderSource(n,"#version 300 es\n  precision mediump float;\n  \n  in vec2 shapeVertexPosition;\n\n\tuniform vec4 canvasPageBounds;\n\n\t// taken (with thanks) from\n\t// https://webglfundamentals.org/webgl/lessons/webgl-2d-matrices.html\n  void main() {\n\t\t// convert the position from pixels to 0.0 to 1.0\n\t\tvec2 zeroToOne = (shapeVertexPosition - canvasPageBounds.xy) / canvasPageBounds.zw;\n\t\n\t\t// convert from 0->1 to 0->2\n\t\tvec2 zeroToTwo = zeroToOne * 2.0;\n\t\n\t\t// convert from 0->2 to -1->+1 (clipspace)\n\t\tvec2 clipSpace = zeroToTwo - 1.0;\n\t\n\t\tgl_Position = vec4(clipSpace * vec2(1, -1), 0, 1);\n  }"),t.compileShader(n),!t.getShaderParameter(n,t.COMPILE_STATUS))throw new Error("Failed to compile vertex shader");var r=t.createShader(t.FRAGMENT_SHADER);if(!r)throw new Error("Failed to create fragment shader");if(t.shaderSource(r,"#version 300 es\n  precision mediump float;\n  \n\tuniform vec4 fillColor;\n  out vec4 outputColor;\n\n  void main() {\n\toutputColor = fillColor;\n  }"),t.compileShader(r),!t.getShaderParameter(r,t.COMPILE_STATUS))throw new Error("Failed to compile fragment shader");var o=t.createProgram();if(!o)throw new Error("Failed to create program");if(t.attachShader(o,n),t.attachShader(o,r),t.linkProgram(o),!t.getProgramParameter(o,t.LINK_STATUS))throw new Error("Failed to link program");t.useProgram(o);var i=t.getAttribLocation(o,"shapeVertexPosition");if(i<0)throw new Error("Failed to get shapeVertexPosition attribute location");t.enableVertexAttribArray(i);var a=t.getUniformLocation(o,"canvasPageBounds"),u=t.getUniformLocation(o,"fillColor");if(!t.createBuffer())throw new Error("Failed to create buffer");if(!t.createBuffer())throw new Error("Failed to create buffer");return{context:t,selectedShapes:d(t,1024),unselectedShapes:d(t,4096),viewport:d(t,l.roundedRectangleDataSize),collaborators:d(t,1024),prepareTriangles:function(e,n){t.bindBuffer(t.ARRAY_BUFFER,e.buffer),t.bufferData(t.ARRAY_BUFFER,e.vertices,t.STATIC_DRAW,0,n),t.enableVertexAttribArray(i),t.vertexAttribPointer(i,2,t.FLOAT,!1,0,0)},drawTrianglesTransparently:function(e){t.enable(t.BLEND),t.blendFunc(t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA),t.drawArrays(t.TRIANGLES,0,e/2),t.disable(t.BLEND)},drawTriangles:function(e){t.drawArrays(t.TRIANGLES,0,e/2)},setFillColor:function(e){t.uniform4fv(u,e)},setCanvasPageBounds:function(e){t.uniform4fv(a,e)}}}function d(e,t){var n=e.createBuffer();if(!n)throw new Error("Failed to create buffer");return{buffer:n,vertices:new Float32Array(t)}}function p(e,t,n){for(var r=e.vertices.length;r<t+n.length;)r*=2;if(r!=e.vertices.length){var o=new Float32Array(r);o.set(e.vertices),e.vertices=o}e.vertices.set(n,t)}},38349:function(e,t,n){"use strict";var r,o=n(50883).default,i=Object.defineProperty,a=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,c={};!function(e,t){for(var n in t)i(e,n,{get:t[n],enumerable:!0})}(c,{numArcSegmentsPerCorner:function(){return f},pie:function(){return p},rectangle:function(){return h},roundedRectangle:function(){return v},roundedRectangleDataSize:function(){return d}}),e.exports=(r=c,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var c,l=o(u(t));try{var f=function(){var o=c.value;s.call(e,o)||o===n||i(e,o,{get:function(){return t[o]},enumerable:!(r=a(t,o))||r.enumerable})};for(l.s();!(c=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(i({},"__esModule",{value:!0}),r));var l=n(57777),f=10,d=24*f+12+48;function p(e,t){for(var n=t.center,r=t.radius,o=t.numArcSegments,i=void 0===o?20:o,a=t.startAngle,u=void 0===a?0:a,s=t.endAngle,c=void 0===s?l.PI2:s,f=t.offset,d=(c-u)/i,p=void 0===f?0:f,h=u;h<c;h+=d)e[p++]=n.x,e[p++]=n.y,e[p++]=n.x+Math.cos(h)*r,e[p++]=n.y+Math.sin(h)*r,e[p++]=n.x+Math.cos(h+d)*r,e[p++]=n.y+Math.sin(h+d)*r;return e}function h(e,t,n,r,o,i){e[t++]=n,e[t++]=r,e[t++]=n,e[t++]=r+i,e[t++]=n+o,e[t++]=r,e[t++]=n+o,e[t++]=r,e[t++]=n,e[t++]=r+i,e[t++]=n+o,e[t++]=r+i}function v(e,t,n){var r=f;n=Math.min(n,Math.min(t.w,t.h)/2);var o=l.Box.ExpandBy(t,-n);if(o.w<=0||o.h<=0)return p(e,{center:t.center,radius:n,numArcSegments:4*f}),4*f*6;var i=0;return h(e,i,o.minX,o.minY,o.w,o.h),h(e,i+=12,o.minX,t.minY,o.w,n),h(e,i+=12,o.maxX,o.minY,n,o.h),h(e,i+=12,o.minX,o.maxY,o.w,n),h(e,i+=12,t.minX,o.minY,n,o.h),p(e,{numArcSegments:r,offset:i+=12,center:o.point,radius:n,startAngle:l.PI,endAngle:1.5*l.PI}),p(e,{numArcSegments:r,offset:i+=6*r,center:l.Vec.Add(o.point,new l.Vec(o.w,0)),radius:n,startAngle:1.5*l.PI,endAngle:l.PI2}),p(e,{numArcSegments:r,offset:i+=6*r,center:l.Vec.Add(o.point,o.size),radius:n,startAngle:0,endAngle:l.HALF_PI}),p(e,{numArcSegments:r,offset:i+=6*r,center:l.Vec.Add(o.point,new l.Vec(0,o.h)),radius:n,startAngle:l.HALF_PI,endAngle:l.PI}),d}},84406:function(e,t,n){"use strict";var r,o=n(50883).default,i=Object.defineProperty,a=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,c={};!function(e,t){for(var n in t)i(e,n,{get:t[n],enumerable:!0})}(c,{MobileStylePanel:function(){return b}}),e.exports=(r=c,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var c,l=o(u(t));try{var f=function(){var o=c.value;s.call(e,o)||o===n||i(e,o,{get:function(){return t[o]},enumerable:!(r=a(t,o))||r.enumerable})};for(l.s();!(c=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(i({},"__esModule",{value:!0}),r));var l=n(44414),f=n(57777),d=n(9950),p=n(3594),h=n(44867),v=n(97410),g=n(61537),y=n(67880),m=n(36825);function b(){var e=(0,f.useEditor)(),t=(0,v.useTranslation)(),n=(0,h.useRelevantStyles)(),r=null===n||void 0===n?void 0:n.get(f.DefaultColorStyle),o=(0,f.getDefaultColorTheme)({isDarkMode:e.user.getIsDarkMode()}),i=("shared"===(null===r||void 0===r?void 0:r.type)?o[r.value]:o.black).solid,a=(0,f.useValue)("disable style panel",(function(){return e.isInAny("hand","zoom","eraser","laser")}),[e]),u=(0,d.useCallback)((function(t){t||e.updateInstanceState({isChangingStyle:!1})}),[e]),s=(0,p.useTldrawUiComponents)().StylePanel;return s?(0,l.jsxs)(m.TldrawUiPopover,{id:"mobile style menu",onOpenChange:u,children:[(0,l.jsx)(m.TldrawUiPopoverTrigger,{children:(0,l.jsx)(g.TldrawUiButton,{type:"tool","data-testid":"mobile-styles.button",style:{color:a?"var(--color-muted-1)":i},title:t("style-panel.title"),disabled:a,children:(0,l.jsx)(y.TldrawUiButtonIcon,{icon:a?"blob":"mixed"===(null===r||void 0===r?void 0:r.type)?"mixed":"blob"})})}),(0,l.jsx)(m.TldrawUiPopoverContent,{side:"top",align:"end",children:s&&(0,l.jsx)(s,{isMobile:!0})})]}):null}},98247:function(e,t,n){"use strict";var r,o=n(85715).default,i=n(50883).default,a=Object.defineProperty,u=Object.getOwnPropertyDescriptor,s=Object.getOwnPropertyNames,c=Object.prototype.hasOwnProperty,l={};!function(e,t){for(var n in t)a(e,n,{get:t[n],enumerable:!0})}(l,{DefaultNavigationPanel:function(){return P}}),e.exports=(r=l,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,l=i(s(t));try{var f=function(){var i=o.value;c.call(e,i)||i===n||a(e,i,{get:function(){return t[i]},enumerable:!(r=u(t,i))||r.enumerable})};for(l.s();!(o=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(a({},"__esModule",{value:!0}),r));var f=n(44414),d=n(57777),p=n(9950),h=n(12521),v=n(2491),g=n(77740),y=n(3594),m=n(38831),b=n(97410),w=n(14591),S=n(61537),x=n(67880),P=(0,p.memo)((function(){var e=(0,v.useActions)(),t=(0,b.useTranslation)(),n=(0,g.useBreakpoint)(),r=(0,p.useRef)(null);(0,d.usePassThroughWheelEvents)(r);var i=(0,m.useLocalStorageState)("minimap",!0),a=o(i,2),u=a[0],s=a[1],c=(0,p.useCallback)((function(){s((function(e){return!e}))}),[s]),l=(0,y.useTldrawUiComponents)(),P=l.ZoomMenu,O=l.Minimap;return n<h.PORTRAIT_BREAKPOINT.MOBILE?null:(0,f.jsxs)("div",{ref:r,className:"tlui-navigation-panel",children:[(0,f.jsx)("div",{className:"tlui-buttons__horizontal",children:P&&n<h.PORTRAIT_BREAKPOINT.TABLET?(0,f.jsx)(P,{}):u?(0,f.jsxs)(f.Fragment,{children:[P&&(0,f.jsx)(P,{}),O&&(0,f.jsx)(S.TldrawUiButton,{type:"icon","data-testid":"minimap.toggle-button",title:t("navigation-zone.toggle-minimap"),className:"tlui-navigation-panel__toggle",onClick:c,children:(0,f.jsx)(x.TldrawUiButtonIcon,{icon:u?"chevrons-ne":"chevrons-sw"})})]}):(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(S.TldrawUiButton,{type:"icon","data-testid":"minimap.zoom-out",title:"".concat(t((0,v.unwrapLabel)(e["zoom-out"].label))," ").concat((0,w.kbdStr)(e["zoom-out"].kbd)),onClick:function(){return e["zoom-out"].onSelect("navigation-zone")},children:(0,f.jsx)(x.TldrawUiButtonIcon,{icon:"minus"})}),P&&(0,f.jsx)(P,{}),(0,f.jsx)(S.TldrawUiButton,{type:"icon","data-testid":"minimap.zoom-in",title:"".concat(t((0,v.unwrapLabel)(e["zoom-in"].label))," ").concat((0,w.kbdStr)(e["zoom-in"].kbd)),onClick:function(){return e["zoom-in"].onSelect("navigation-zone")},children:(0,f.jsx)(x.TldrawUiButtonIcon,{icon:"plus"})}),O&&(0,f.jsx)(S.TldrawUiButton,{type:"icon","data-testid":"minimap.toggle-button",title:t("navigation-zone.toggle-minimap"),className:"tlui-navigation-panel__toggle",onClick:c,children:(0,f.jsx)(x.TldrawUiButtonIcon,{icon:u?"chevrons-ne":"chevrons-sw"})})]})}),O&&n>=h.PORTRAIT_BREAKPOINT.TABLET&&!u&&(0,f.jsx)(O,{})]})}))},45640:function(e,t,n){"use strict";var r,o=n(50883).default,i=Object.create,a=Object.defineProperty,u=Object.getOwnPropertyDescriptor,s=Object.getOwnPropertyNames,c=Object.getPrototypeOf,l=Object.prototype.hasOwnProperty,f=function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var i,c=o(s(t));try{var f=function(){var o=i.value;l.call(e,o)||o===n||a(e,o,{get:function(){return t[o]},enumerable:!(r=u(t,o))||r.enumerable})};for(c.s();!(i=c.n()).done;)f()}catch(d){c.e(d)}finally{c.f()}}return e},d={};!function(e,t){for(var n in t)a(e,n,{get:t[n],enumerable:!0})}(d,{OfflineIndicator:function(){return y}}),e.exports=(r=d,f(a({},"__esModule",{value:!0}),r));var p=n(44414),h=function(e,t,n){return n=null!=e?i(c(e)):{},f(!t&&e&&e.__esModule?n:a(n,"default",{value:e,enumerable:!0}),e)}(n(48738)),v=n(97410),g=n(88635);function y(){var e=(0,v.useTranslation)();return(0,p.jsxs)("div",{className:(0,h.default)("tlui-offline-indicator"),children:[e("status.offline"),(0,p.jsx)(g.TldrawUiIcon,{"aria-label":"offline",icon:"status-offline",small:!0})]})}},54963:function(e,t,n){"use strict";var r,o=n(12897).default,i=n(85715).default,a=n(50883).default,u=Object.defineProperty,s=Object.getOwnPropertyDescriptor,c=Object.getOwnPropertyNames,l=Object.prototype.hasOwnProperty,f={};!function(e,t){for(var n in t)u(e,n,{get:t[n],enumerable:!0})}(f,{DefaultPageMenu:function(){return T}}),e.exports=(r=f,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,i=a(c(t));try{var f=function(){var i=o.value;l.call(e,i)||i===n||u(e,i,{get:function(){return t[i]},enumerable:!(r=s(t,i))||r.enumerable})};for(i.s();!(o=i.n()).done;)f()}catch(d){i.e(d)}finally{i.f()}}return e}(u({},"__esModule",{value:!0}),r));var d=n(44414),p=n(57777),h=n(9950),v=n(12521),g=n(77740),y=n(14867),m=n(80459),b=n(19098),w=n(97410),S=n(61537),x=n(51489),P=n(67880),O=n(95139),k=n(36825),_=n(23642),j=n(81111),I=n(2287),T=(0,h.memo)((function(){var e=(0,p.useEditor)(),t=(0,y.useUiEvents)(),n=(0,w.useTranslation)(),r=(0,g.useBreakpoint)(),a=(0,h.useCallback)((function(){return F(!1)}),[]),u=(0,m.useMenuIsOpen)("page-menu",a),s=i(u,2),c=s[0],l=s[1],f=36,T=(0,h.useRef)(null),E=(0,p.useValue)("pages",(function(){return e.getPages()}),[e]),C=(0,p.useValue)("currentPage",(function(){return e.getCurrentPage()}),[e]),M=(0,p.useValue)("currentPageId",(function(){return e.getCurrentPageId()}),[e]),A=(0,b.useReadonly)(),D=(0,p.useValue)("maxPageCountReached",(function(){return e.getPages().length>=e.options.maxPages}),[e]),R=(0,p.useValue)("isCoarsePointer",(function(){return e.getInstanceState().isCoarsePointer}),[e]),N=(0,h.useState)(!1),L=i(N,2),U=L[0],F=L[1],B=(0,h.useCallback)((function(){A||F((function(e){return!e}))}),[A]),V=(0,h.useRef)({isPointing:!1,status:"idle",pointing:null,startY:0,startIndex:0,dragIndex:0}),z=(0,h.useState)(Object.fromEntries(E.map((function(e,t){return[e.id,{y:t*f,offsetY:0,isSelected:!1}]})))),H=i(z,2),K=H[0],G=H[1];(0,h.useLayoutEffect)((function(){G(Object.fromEntries(E.map((function(e,t){return[e.id,{y:t*f,offsetY:0,isSelected:!1}]}))))}),[f,E]),(0,h.useEffect)((function(){c&&e.timers.requestAnimationFrame((function(){var e=document.querySelector('[data-testid="page-menu-item-'.concat(M,'"]'));if(e){var t=T.current;if(!t)return;var n=e.offsetTop;n<t.scrollTop&&t.scrollTo({top:n});var r=n+f;r>t.scrollTop+t.offsetHeight&&t.scrollTo({top:r-t.offsetHeight})}}))}),[f,M,c,e]);var q=(0,h.useCallback)((function(e){var t=e.clientY,n=e.currentTarget.dataset,r=n.id,o=n.index;if(r&&o){var i=V.current;(0,p.setPointerCapture)(e.currentTarget,e),i.status="pointing",i.pointing={id:r,index:+o};var a=K[r].y;i.startY=t,i.startIndex=Math.max(0,Math.min(Math.round(a/f),E.length-1))}}),[f,E.length,K]),W=(0,h.useCallback)((function(e){var t=V.current;if("pointing"===t.status){var n=e.clientY-t.startY;Math.abs(n)>5&&(t.status="dragging")}if("dragging"===t.status){var r=e.clientY-t.startY,i=K[t.pointing.id],a=t.startIndex,u=t.pointing,s=i.y+r,c=Math.max(0,Math.min(Math.round(s/f),E.length-1)),l=o({},K);if(l[u.id]={y:i.y,offsetY:r,isSelected:!0},c!==t.dragIndex){t.dragIndex=c;for(var d=0;d<E.length;d++){var p=E[d];if(p.id!==t.pointing.id){var h=l[p.id].y;c===a?h=d*f:c<a?h=c<=d&&d<a?(d+1)*f:d*f:c>a&&(h=c>=d&&d>a?(d-1)*f:d*f),h!==l[p.id].y&&(l[p.id]={y:h,offsetY:0,isSelected:!0})}}}G(l)}}),[f,E,K]),Y=(0,h.useCallback)((function(n){var r=V.current;if("dragging"===r.status){var o=r.pointing,i=o.id,a=o.index;(0,I.onMovePage)(e,i,a,r.dragIndex,t)}(0,p.releasePointerCapture)(n.currentTarget,n),r.status="idle"}),[e,t]),X=(0,h.useCallback)((function(e){var t=V.current;"Escape"===e.key&&("dragging"===t.status&&G(Object.fromEntries(E.map((function(e,t){return[e.id,{y:t*f,offsetY:0,isSelected:!1}]})))),t.status="idle")}),[f,E]),Z=(0,h.useCallback)((function(){A||(e.run((function(){e.markHistoryStoppingPoint("creating page");var t=p.PageRecordType.createId();e.createPage({name:n("page-menu.new-page-initial-name"),id:t}),e.setCurrentPage(t),F(!0)})),t("new-page",{source:"page-menu"}))}),[e,n,A,t]),$=(0,h.useCallback)((function(n){e.setCurrentPage(n),t("change-page",{source:"page-menu"})}),[e,t]),Q=(0,h.useCallback)((function(n,r){e.renamePage(n,r),t("rename-page",{source:"page-menu"})}),[e,t]);return(0,d.jsxs)(k.TldrawUiPopover,{id:"pages",onOpenChange:l,open:c,children:[(0,d.jsx)(k.TldrawUiPopoverTrigger,{"data-testid":"main.page-menu",children:(0,d.jsxs)(S.TldrawUiButton,{type:"menu",title:C.name,"data-testid":"page-menu.button",className:"tlui-page-menu__trigger",children:[(0,d.jsx)("div",{className:"tlui-page-menu__name",children:C.name}),(0,d.jsx)(P.TldrawUiButtonIcon,{icon:"chevron-down",small:!0})]})}),(0,d.jsx)(k.TldrawUiPopoverContent,{side:"bottom",align:"start",sideOffset:6,disableEscapeKeyDown:U,children:(0,d.jsxs)("div",{className:"tlui-page-menu__wrapper",children:[(0,d.jsxs)("div",{className:"tlui-page-menu__header",children:[(0,d.jsx)("div",{className:"tlui-page-menu__header__title",children:n("page-menu.title")}),!A&&(0,d.jsxs)("div",{className:"tlui-buttons__horizontal",children:[(0,d.jsx)(S.TldrawUiButton,{type:"icon","data-testid":"page-menu.edit",title:n(U?"page-menu.edit-done":"page-menu.edit-start"),onClick:B,children:(0,d.jsx)(P.TldrawUiButtonIcon,{icon:U?"check":"edit"})}),(0,d.jsx)(S.TldrawUiButton,{type:"icon","data-testid":"page-menu.create",title:n(D?"page-menu.max-page-count-reached":"page-menu.create-new-page"),disabled:D,onClick:Z,children:(0,d.jsx)(P.TldrawUiButtonIcon,{icon:"plus"})})]})]}),(0,d.jsx)("div",{"data-testid":"page-menu.list",className:"tlui-page-menu__list tlui-menu__group",style:{height:f*E.length+4},ref:T,children:E.map((function(t,o){var i,a=null!==(i=K[t.id])&&void 0!==i?i:{position:40*o,offsetY:0};return U?(0,d.jsxs)("div",{"data-testid":"page-menu.item",className:"tlui-page_menu__item__sortable",style:{zIndex:t.id===C.id?888:o,transform:"translate(0px, ".concat(a.y+a.offsetY,"px)")},children:[(0,d.jsx)(S.TldrawUiButton,{type:"icon",tabIndex:-1,className:"tlui-page_menu__item__sortable__handle",onPointerDown:q,onPointerUp:Y,onPointerMove:W,onKeyDown:X,"data-id":t.id,"data-index":o,children:(0,d.jsx)(P.TldrawUiButtonIcon,{icon:"drag-handle-dots"})}),r<v.PORTRAIT_BREAKPOINT.TABLET_SM&&R?(0,d.jsxs)(S.TldrawUiButton,{type:"normal",className:"tlui-page-menu__item__button",onClick:function(){var e=window.prompt("Rename page",t.name);e&&e!==t.name&&Q(t.id,e)},onDoubleClick:B,children:[(0,d.jsx)(x.TldrawUiButtonCheck,{checked:t.id===C.id}),(0,d.jsx)(O.TldrawUiButtonLabel,{children:t.name})]}):(0,d.jsx)("div",{className:"tlui-page_menu__item__sortable__title",style:{height:f},children:(0,d.jsx)(_.PageItemInput,{id:t.id,name:t.name,isCurrentPage:t.id===C.id,onCancel:function(){F(!1),e.menus.clearOpenMenus()}})}),!A&&(0,d.jsx)("div",{className:"tlui-page_menu__item__submenu","data-isediting":U,children:(0,d.jsx)(j.PageItemSubmenu,{index:o,item:t,listSize:E.length})})]},t.id+"_editing"):(0,d.jsxs)("div",{"data-testid":"page-menu.item",className:"tlui-page-menu__item",children:[(0,d.jsxs)(S.TldrawUiButton,{type:"normal",className:"tlui-page-menu__item__button",onClick:function(){return $(t.id)},onDoubleClick:B,title:n("page-menu.go-to-page"),children:[(0,d.jsx)(x.TldrawUiButtonCheck,{checked:t.id===C.id}),(0,d.jsx)(O.TldrawUiButtonLabel,{children:t.name})]}),!A&&(0,d.jsx)("div",{className:"tlui-page_menu__item__submenu",children:(0,d.jsx)(j.PageItemSubmenu,{index:o,item:t,listSize:E.length,onRename:function(){if(p.tlenv.isIos){var e=window.prompt("Rename page",t.name);e&&e!==t.name&&Q(t.id,e)}else F(!0),M!==t.id&&$(t.id)}})})]},t.id)}))})]})})]})}))},23642:function(e,t,n){"use strict";var r,o=n(50883).default,i=Object.defineProperty,a=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,c={};!function(e,t){for(var n in t)i(e,n,{get:t[n],enumerable:!0})}(c,{PageItemInput:function(){return v}}),e.exports=(r=c,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var c,l=o(u(t));try{var f=function(){var o=c.value;s.call(e,o)||o===n||i(e,o,{get:function(){return t[o]},enumerable:!(r=a(t,o))||r.enumerable})};for(l.s();!(c=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(i({},"__esModule",{value:!0}),r));var l=n(44414),f=n(57777),d=n(9950),p=n(14867),h=n(98220),v=function(e){var t=e.name,n=e.id,r=e.isCurrentPage,o=e.onCancel,i=(0,f.useEditor)(),a=(0,p.useUiEvents)(),u=(0,d.useRef)(null),s=(0,d.useRef)(null),c=(0,d.useCallback)((function(){s.current=i.markHistoryStoppingPoint("rename page")}),[i]),v=(0,d.useCallback)((function(e){i.renamePage(n,e||"New Page"),a("rename-page",{source:"page-menu"})}),[i,n,a]),g=(0,d.useCallback)((function(){s.current&&i.bailToMark(s.current),o()}),[i,o]);return(0,l.jsx)(h.TldrawUiInput,{className:"tlui-page-menu__item__input",ref:function(e){return u.current=e},defaultValue:t,onValueChange:v,onCancel:g,onFocus:c,shouldManuallyMaintainScrollPositionWhenFocused:!0,autoFocus:r,autoSelect:!0})}},81111:function(e,t,n){"use strict";var r,o=n(50883).default,i=Object.defineProperty,a=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,c={};!function(e,t){for(var n in t)i(e,n,{get:t[n],enumerable:!0})}(c,{PageItemSubmenu:function(){return x}}),e.exports=(r=c,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var c,l=o(u(t));try{var f=function(){var o=c.value;s.call(e,o)||o===n||i(e,o,{get:function(){return t[o]},enumerable:!(r=a(t,o))||r.enumerable})};for(l.s();!(c=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(i({},"__esModule",{value:!0}),r));var l=n(44414),f=n(57777),d=n(9950),p=n(14867),h=n(97410),v=n(61537),g=n(67880),y=n(80408),m=n(70649),b=n(60681),w=n(95767),S=n(2287),x=(0,f.track)((function(e){var t=e.index,n=e.listSize,r=e.item,o=e.onRename,i=(0,f.useEditor)(),a=(0,h.useTranslation)(),u=i.getPages(),s=(0,p.useUiEvents)(),c=(0,d.useCallback)((function(){i.markHistoryStoppingPoint("creating page");var e=f.PageRecordType.createId();i.duplicatePage(r.id,e),s("duplicate-page",{source:"page-menu"})}),[i,r,s]),x=(0,d.useCallback)((function(){(0,S.onMovePage)(i,r.id,t,t-1,s)}),[i,r,t,s]),P=(0,d.useCallback)((function(){(0,S.onMovePage)(i,r.id,t,t+1,s)}),[i,r,t,s]),O=(0,d.useCallback)((function(){i.markHistoryStoppingPoint("deleting page"),i.deletePage(r.id),s("delete-page",{source:"page-menu"})}),[i,r,s]);return(0,l.jsxs)(y.TldrawUiDropdownMenuRoot,{id:"page item submenu ".concat(t),children:[(0,l.jsx)(y.TldrawUiDropdownMenuTrigger,{children:(0,l.jsx)(v.TldrawUiButton,{type:"icon",title:a("page-menu.submenu.title"),children:(0,l.jsx)(g.TldrawUiButtonIcon,{icon:"dots-vertical",small:!0})})}),(0,l.jsx)(y.TldrawUiDropdownMenuContent,{alignOffset:0,side:"right",sideOffset:-4,children:(0,l.jsxs)(m.TldrawUiMenuContextProvider,{type:"menu",sourceId:"page-menu",children:[(0,l.jsxs)(b.TldrawUiMenuGroup,{id:"modify",children:[o&&(0,l.jsx)(w.TldrawUiMenuItem,{id:"rename",label:"page-menu.submenu.rename",onSelect:o}),(0,l.jsx)(w.TldrawUiMenuItem,{id:"duplicate",label:"page-menu.submenu.duplicate-page",onSelect:c,disabled:u.length>=i.options.maxPages}),t>0&&(0,l.jsx)(w.TldrawUiMenuItem,{id:"move-up",onSelect:x,label:"page-menu.submenu.move-up"}),t<n-1&&(0,l.jsx)(w.TldrawUiMenuItem,{id:"move-down",label:"page-menu.submenu.move-down",onSelect:P})]}),n>1&&(0,l.jsx)(b.TldrawUiMenuGroup,{id:"delete",children:(0,l.jsx)(w.TldrawUiMenuItem,{id:"delete",onSelect:O,label:"page-menu.submenu.delete"})})]})})]})}))},2287:function(e,t,n){"use strict";var r,o=n(50883).default,i=Object.defineProperty,a=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,c={};!function(e,t){for(var n in t)i(e,n,{get:t[n],enumerable:!0})}(c,{onMovePage:function(){return f}}),e.exports=(r=c,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var c,l=o(u(t));try{var f=function(){var o=c.value;s.call(e,o)||o===n||i(e,o,{get:function(){return t[o]},enumerable:!(r=a(t,o))||r.enumerable})};for(l.s();!(c=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(i({},"__esModule",{value:!0}),r));var l=n(57777),f=function(e,t,n,r,o){var i,a=e.getPages(),u=n>r?a[r-1]:a[r],s=n>r?a[r]:a[r+1];(i=u&&!s?(0,l.getIndexAbove)(u.index):!u&&s?(0,l.getIndexBelow)(a[0].index):(0,l.getIndexBetween)(u.index,s.index))!==a[n].index&&(e.markHistoryStoppingPoint("moving page"),e.updatePage({id:t,index:i}),o("move-page",{source:"page-menu"}))}},89135:function(e,t,n){"use strict";var r,o=n(50883).default,i=Object.defineProperty,a=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,c={};!function(e,t){for(var n in t)i(e,n,{get:t[n],enumerable:!0})}(c,{DefaultQuickActions:function(){return h}}),e.exports=(r=c,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var c,l=o(u(t));try{var f=function(){var o=c.value;s.call(e,o)||o===n||i(e,o,{get:function(){return t[o]},enumerable:!(r=a(t,o))||r.enumerable})};for(l.s();!(c=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(i({},"__esModule",{value:!0}),r));var l=n(44414),f=n(9950),d=n(70649),p=n(67278),h=(0,f.memo)((function(e){var t=e.children,n=null!==t&&void 0!==t?t:(0,l.jsx)(p.DefaultQuickActionsContent,{});return(0,l.jsx)(d.TldrawUiMenuContextProvider,{type:"small-icons",sourceId:"quick-actions",children:n})}))},67278:function(e,t,n){"use strict";var r,o=n(50883).default,i=Object.defineProperty,a=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,c={};!function(e,t){for(var n in t)i(e,n,{get:t[n],enumerable:!0})}(c,{DefaultQuickActionsContent:function(){return v}}),e.exports=(r=c,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var c,l=o(u(t));try{var f=function(){var o=c.value;s.call(e,o)||o===n||i(e,o,{get:function(){return t[o]},enumerable:!(r=a(t,o))||r.enumerable})};for(l.s();!(c=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(i({},"__esModule",{value:!0}),r));var l=n(44414),f=n(57777),d=n(54150),p=n(19098),h=n(61625);function v(){var e=(0,f.useEditor)(),t=(0,p.useReadonly)(),n=(0,f.useValue)("should display quick actions",(function(){return e.isInAny("select","hand","zoom")}),[e]);if(!t||n)return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(y,{}),(0,l.jsx)(g,{})]})}function g(){var e=(0,d.useUnlockedSelectedShapesCount)(1),t=(0,d.useIsInSelectState)(),n=e&&t;return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(h.TldrawUiMenuActionItem,{actionId:"delete",disabled:!n}),(0,l.jsx)(h.TldrawUiMenuActionItem,{actionId:"duplicate",disabled:!n})]})}function y(){var e=(0,d.useCanUndo)(),t=(0,d.useCanRedo)();return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(h.TldrawUiMenuActionItem,{actionId:"undo",disabled:!e}),(0,l.jsx)(h.TldrawUiMenuActionItem,{actionId:"redo",disabled:!t})]})}},53983:function(e,t,n){"use strict";var r,o=n(50883).default,i=Object.defineProperty,a=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,c={};!function(e,t){for(var n in t)i(e,n,{get:t[n],enumerable:!0})}(c,{DefaultSharePanel:function(){return d}}),e.exports=(r=c,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var c,l=o(u(t));try{var f=function(){var o=c.value;s.call(e,o)||o===n||i(e,o,{get:function(){return t[o]},enumerable:!(r=a(t,o))||r.enumerable})};for(l.s();!(c=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(i({},"__esModule",{value:!0}),r));var l=n(44414),f=n(42741);function d(){return(0,l.jsx)("div",{className:"tlui-share-zone",draggable:!1,children:(0,l.jsx)(f.PeopleMenu,{displayUserWhenAlone:!0})})}},42741:function(e,t,n){"use strict";var r,o=n(85715).default,i=n(50883).default,a=Object.create,u=Object.defineProperty,s=Object.getOwnPropertyDescriptor,c=Object.getOwnPropertyNames,l=Object.getPrototypeOf,f=Object.prototype.hasOwnProperty,d=function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,a=i(c(t));try{var l=function(){var i=o.value;f.call(e,i)||i===n||u(e,i,{get:function(){return t[i]},enumerable:!(r=s(t,i))||r.enumerable})};for(a.s();!(o=a.n()).done;)l()}catch(d){a.e(d)}finally{a.f()}}return e},p={};!function(e,t){for(var n in t)u(e,n,{get:t[n],enumerable:!0})}(p,{PeopleMenu:function(){return P}}),e.exports=(r=p,d(u({},"__esModule",{value:!0}),r));var h=n(44414),v=function(e,t,n){return n=null!=e?a(l(e)):{},d(!t&&e&&e.__esModule?n:u(n,"default",{value:e,enumerable:!0}),e)}(n(92263)),g=n(57777),y=n(80459),m=n(97410),b=n(2840),w=n(96106),S=n(85576),x=n(69122);function P(e){var t,n=e.displayUserWhenAlone,r=e.children,i=(0,m.useTranslation)(),a=(0,g.useContainer)(),u=(0,g.useEditor)(),s=(0,g.usePeerIds)(),c=(0,g.useValue)("user",(function(){return u.user.getColor()}),[u]),l=(0,g.useValue)("user",(function(){return u.user.getName()}),[u]),f=(0,y.useMenuIsOpen)("people menu"),d=o(f,2),p=d[0],P=d[1];return(0,h.jsxs)(v.Root,{onOpenChange:P,open:p,children:[(0,h.jsx)(v.Trigger,{dir:"ltr",asChild:!0,children:(0,h.jsxs)("button",{className:"tlui-people-menu__avatars-button",title:i("people-menu.title"),children:[s.length>5&&(0,h.jsx)(S.PeopleMenuMore,{count:s.length-5}),(0,h.jsxs)("div",{className:"tlui-people-menu__avatars",children:[s.slice(-5).map((function(e){return(0,h.jsx)(b.PeopleMenuAvatar,{userId:e},e)})),(n||s.length>0)&&(0,h.jsx)("div",{className:"tlui-people-menu__avatar",style:{backgroundColor:c},children:"New User"===l?"":null!==(t=l[0])&&void 0!==t?t:""})]})]})}),(0,h.jsx)(v.Portal,{container:a,children:(0,h.jsx)(v.Content,{dir:"ltr",className:"tlui-menu",side:"bottom",sideOffset:2,collisionPadding:4,onEscapeKeyDown:g.preventDefault,children:(0,h.jsxs)("div",{className:"tlui-people-menu__wrapper",children:[(0,h.jsx)("div",{className:"tlui-people-menu__section",children:(0,h.jsx)(x.UserPresenceEditor,{})}),s.length>0&&(0,h.jsx)("div",{className:"tlui-people-menu__section",children:s.map((function(e){return(0,h.jsx)(w.PeopleMenuItem,{userId:e},e+"_presence")}))}),r]})})})]})}},2840:function(e,t,n){"use strict";var r,o=n(50883).default,i=Object.defineProperty,a=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,c={};!function(e,t){for(var n in t)i(e,n,{get:t[n],enumerable:!0})}(c,{PeopleMenuAvatar:function(){return d}}),e.exports=(r=c,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var c,l=o(u(t));try{var f=function(){var o=c.value;s.call(e,o)||o===n||i(e,o,{get:function(){return t[o]},enumerable:!(r=a(t,o))||r.enumerable})};for(l.s();!(c=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(i({},"__esModule",{value:!0}),r));var l=n(44414),f=n(57777);function d(e){var t,n=e.userId,r=(0,f.usePresence)(n);return r?(0,l.jsx)("div",{className:"tlui-people-menu__avatar",style:{backgroundColor:r.color},children:"New User"===r.userName?"":null!==(t=r.userName[0])&&void 0!==t?t:""},n):null}},96106:function(e,t,n){"use strict";var r,o=n(50883).default,i=Object.defineProperty,a=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,c={};!function(e,t){for(var n in t)i(e,n,{get:t[n],enumerable:!0})}(c,{PeopleMenuItem:function(){return m}}),e.exports=(r=c,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var c,l=o(u(t));try{var f=function(){var o=c.value;s.call(e,o)||o===n||i(e,o,{get:function(){return t[o]},enumerable:!(r=a(t,o))||r.enumerable})};for(l.s();!(c=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(i({},"__esModule",{value:!0}),r));var l=n(44414),f=n(57777),d=n(9950),p=n(14867),h=n(97410),v=n(61537),g=n(67880),y=n(88635),m=(0,f.track)((function(e){var t,n=e.userId,r=(0,f.useEditor)(),o=(0,h.useTranslation)(),i=(0,p.useUiEvents)(),a=(0,f.usePresence)(n),u=(0,d.useCallback)((function(){r.getInstanceState().followingUserId===n?(r.stopFollowingUser(),i("stop-following",{source:"people-menu"})):(r.startFollowingUser(n),i("start-following",{source:"people-menu"}))}),[r,n,i]),s=(null===a||void 0===a?void 0:a.followingUserId)===r.user.getId(),c=r.getInstanceState().followingUserId===n;return a?(0,l.jsxs)("div",{className:"tlui-people-menu__item tlui-buttons__horizontal",children:[(0,l.jsxs)(v.TldrawUiButton,{type:"menu",className:"tlui-people-menu__item__button",onClick:function(){return r.zoomToUser(n)},onDoubleClick:u,children:[(0,l.jsx)(y.TldrawUiIcon,{icon:"color",color:a.color}),(0,l.jsx)("div",{className:"tlui-people-menu__name",children:null!==(t=a.userName)&&void 0!==t?t:"New User"})]}),(0,l.jsx)(v.TldrawUiButton,{type:"icon",className:"tlui-people-menu__item__follow",title:o(s?"people-menu.leading":c?"people-menu.following":"people-menu.follow"),onClick:u,disabled:s,"data-active":c||s,children:(0,l.jsx)(g.TldrawUiButtonIcon,{icon:s?"leading":c?"following":"follow"})})]}):null}))},85576:function(e,t,n){"use strict";var r,o=n(50883).default,i=Object.defineProperty,a=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,c={};!function(e,t){for(var n in t)i(e,n,{get:t[n],enumerable:!0})}(c,{PeopleMenuMore:function(){return f}}),e.exports=(r=c,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var c,l=o(u(t));try{var f=function(){var o=c.value;s.call(e,o)||o===n||i(e,o,{get:function(){return t[o]},enumerable:!(r=a(t,o))||r.enumerable})};for(l.s();!(c=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(i({},"__esModule",{value:!0}),r));var l=n(44414);function f(e){var t=e.count;return(0,l.jsx)("div",{className:"tlui-people-menu__more",children:"+"+Math.abs(t)})}},97318:function(e,t,n){"use strict";var r,o=n(85715).default,i=n(50883).default,a=Object.create,u=Object.defineProperty,s=Object.getOwnPropertyDescriptor,c=Object.getOwnPropertyNames,l=Object.getPrototypeOf,f=Object.prototype.hasOwnProperty,d=function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,a=i(c(t));try{var l=function(){var i=o.value;f.call(e,i)||i===n||u(e,i,{get:function(){return t[i]},enumerable:!(r=s(t,i))||r.enumerable})};for(a.s();!(o=a.n()).done;)l()}catch(d){a.e(d)}finally{a.f()}}return e},p=function(e,t,n){return n=null!=e?a(l(e)):{},d(!t&&e&&e.__esModule?n:u(n,"default",{value:e,enumerable:!0}),e)},h={};!function(e,t){for(var n in t)u(e,n,{get:t[n],enumerable:!0})}(h,{UserPresenceColorPicker:function(){return P}}),e.exports=(r=h,d(u({},"__esModule",{value:!0}),r));var v=n(44414),g=p(n(92263)),y=n(57777),m=p(n(9950)),b=n(14867),w=n(97410),S=n(61537),x=n(67880),P=(0,y.track)((function(){var e=(0,y.useEditor)(),t=(0,y.useContainer)(),n=(0,w.useTranslation)(),r=(0,b.useUiEvents)(),i=(0,m.useRef)(!1),a=(0,m.useState)(!1),u=o(a,2),s=u[0],c=u[1],l=(0,m.useCallback)((function(e){c(e)}),[]),f=e.user.getColor(),d=(0,m.useCallback)((function(t){e.user.updateUserPreferences({color:t}),r("set-color",{source:"people-menu"})}),[e,r]),p=m.default.useMemo((function(){var e=function(){i.current=!1,window.removeEventListener("pointerup",e)};return{handleButtonClick:function(e){var t=e.currentTarget.dataset.id;t&&f!==t&&d(t)},handleButtonPointerDown:function(t){var n=t.currentTarget.dataset.id;n&&(d(n),i.current=!0,window.addEventListener("pointerup",e))},handleButtonPointerEnter:function(e){if(i.current){var t=e.currentTarget.dataset.id;t&&d(t)}},handleButtonPointerUp:function(e){var t=e.currentTarget.dataset.id;t&&d(t)}}}),[f,d]),h=p.handleButtonClick,P=p.handleButtonPointerDown,O=p.handleButtonPointerEnter,k=p.handleButtonPointerUp;return(0,v.jsxs)(g.Root,{onOpenChange:l,open:s,children:[(0,v.jsx)(g.Trigger,{dir:"ltr",asChild:!0,children:(0,v.jsx)(S.TldrawUiButton,{type:"icon",className:"tlui-people-menu__user__color",style:{color:e.user.getColor()},title:n("people-menu.change-color"),children:(0,v.jsx)(x.TldrawUiButtonIcon,{icon:"color"})})}),(0,v.jsx)(g.Portal,{container:t,children:(0,v.jsx)(g.Content,{dir:"ltr",className:"tlui-menu tlui-people-menu__user__color-picker",align:"start",side:"left",sideOffset:8,children:(0,v.jsx)("div",{className:"tlui-buttons__grid",children:y.USER_COLORS.map((function(e){return(0,v.jsx)(S.TldrawUiButton,{type:"icon","data-id":e,"data-testid":e,"aria-label":e,"data-state":f===e?"hinted":void 0,title:e,className:"tlui-button-grid__button",style:{color:e},onPointerEnter:O,onPointerDown:P,onPointerUp:k,onClick:h,children:(0,v.jsx)(x.TldrawUiButtonIcon,{icon:"color"})},e)}))})})})]})}))},69122:function(e,t,n){"use strict";var r,o=n(85715).default,i=n(50883).default,a=Object.defineProperty,u=Object.getOwnPropertyDescriptor,s=Object.getOwnPropertyNames,c=Object.prototype.hasOwnProperty,l={};!function(e,t){for(var n in t)a(e,n,{get:t[n],enumerable:!0})}(l,{UserPresenceEditor:function(){return w}}),e.exports=(r=l,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,l=i(s(t));try{var f=function(){var i=o.value;c.call(e,i)||i===n||a(e,i,{get:function(){return t[i]},enumerable:!(r=u(t,i))||r.enumerable})};for(l.s();!(o=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(a({},"__esModule",{value:!0}),r));var f=n(44414),d=n(57777),p=n(9950),h=n(14867),v=n(97410),g=n(61537),y=n(67880),m=n(98220),b=n(97318);function w(){var e=(0,d.useEditor)(),t=(0,h.useUiEvents)(),n=(0,d.useValue)("userName",(function(){return e.user.getName()}),[]),r=(0,v.useTranslation)(),i=(0,p.useRef)(n),a=(0,p.useRef)(n),u=(0,p.useState)(!1),s=o(u,2),c=s[0],l=s[1],w=(0,p.useCallback)((function(){l((function(e){return!e}))}),[]),S=(0,p.useCallback)((function(t){a.current=t,e.user.updateUserPreferences({name:t})}),[e]),x=(0,p.useCallback)((function(){i.current!==a.current&&(t("change-user-name",{source:"people-menu"}),i.current=a.current)}),[t]),P=(0,p.useCallback)((function(){l(!1),e.user.updateUserPreferences({name:i.current}),e.menus.clearOpenMenus()}),[e]);return(0,f.jsxs)("div",{className:"tlui-people-menu__user",children:[(0,f.jsx)(b.UserPresenceColorPicker,{}),c?(0,f.jsx)(m.TldrawUiInput,{className:"tlui-people-menu__user__input",defaultValue:n,onValueChange:S,onComplete:w,onCancel:P,onBlur:x,shouldManuallyMaintainScrollPositionWhenFocused:!0,autoFocus:!0,autoSelect:!0}):(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)("div",{className:"tlui-people-menu__user__name",onDoubleClick:function(){c||l(!0)},children:n}),"New User"===n?(0,f.jsx)("div",{className:"tlui-people-menu__user__label",children:r("people-menu.user")}):null]}),(0,f.jsx)(g.TldrawUiButton,{type:"icon",className:"tlui-people-menu__user__edit","data-testid":"people-menu.change-name",title:r("people-menu.change-name"),onClick:w,children:(0,f.jsx)(y.TldrawUiButtonIcon,{icon:c?"check":"edit"})})]})}},93268:function(e,t,n){"use strict";var r,o=n(12897).default,i=n(50883).default,a=Object.defineProperty,u=Object.getOwnPropertyDescriptor,s=Object.getOwnPropertyNames,c=Object.prototype.hasOwnProperty,l={};!function(e,t){for(var n in t)a(e,n,{get:t[n],enumerable:!0})}(l,{Spinner:function(){return d}}),e.exports=(r=l,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,l=i(s(t));try{var f=function(){var i=o.value;c.call(e,i)||i===n||a(e,i,{get:function(){return t[i]},enumerable:!(r=u(t,i))||r.enumerable})};for(l.s();!(o=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(a({},"__esModule",{value:!0}),r));var f=n(44414);function d(e){return(0,f.jsx)("svg",o(o({width:16,height:16,viewBox:"0 0 16 16"},e),{},{children:(0,f.jsxs)("g",{strokeWidth:2,fill:"none",fillRule:"evenodd",children:[(0,f.jsx)("circle",{strokeOpacity:.25,cx:8,cy:8,r:7,stroke:"currentColor"}),(0,f.jsx)("path",{strokeLinecap:"round",d:"M15 8c0-4.5-4.5-7-7-7",stroke:"currentColor",children:(0,f.jsx)("animateTransform",{attributeName:"transform",type:"rotate",from:"0 8 8",to:"360 8 8",dur:"1s",repeatCount:"indefinite"})})]})}))}},21847:function(e,t,n){"use strict";var r,o=n(50883).default,i=Object.create,a=Object.defineProperty,u=Object.getOwnPropertyDescriptor,s=Object.getOwnPropertyNames,c=Object.getPrototypeOf,l=Object.prototype.hasOwnProperty,f=function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var i,c=o(s(t));try{var f=function(){var o=i.value;l.call(e,o)||o===n||a(e,o,{get:function(){return t[o]},enumerable:!(r=u(t,o))||r.enumerable})};for(c.s();!(i=c.n()).done;)f()}catch(d){c.e(d)}finally{c.f()}}return e},d={};!function(e,t){for(var n in t)a(e,n,{get:t[n],enumerable:!0})}(d,{DefaultStylePanel:function(){return b}}),e.exports=(r=d,f(a({},"__esModule",{value:!0}),r));var p=n(44414),h=n(57777),v=function(e,t,n){return n=null!=e?i(c(e)):{},f(!t&&e&&e.__esModule?n:a(n,"default",{value:e,enumerable:!0}),e)}(n(48738)),g=n(9950),y=n(44867),m=n(43478),b=(0,g.memo)((function(e){var t=e.isMobile,n=e.children,r=(0,h.useEditor)(),o=(0,g.useRef)(null);(0,h.usePassThroughWheelEvents)(o);var i=(0,y.useRelevantStyles)(),a=(0,g.useCallback)((function(){t||r.updateInstanceState({isChangingStyle:!1})}),[r,t]),u=null!==n&&void 0!==n?n:(0,p.jsx)(m.DefaultStylePanelContent,{styles:i});return(0,p.jsx)("div",{ref:o,className:(0,v.default)("tlui-style-panel",{"tlui-style-panel__wrapper":!t}),"data-ismobile":t,onPointerLeave:a,children:u})}))},43478:function(e,t,n){"use strict";var r,o=n(50883).default,i=Object.create,a=Object.defineProperty,u=Object.getOwnPropertyDescriptor,s=Object.getOwnPropertyNames,c=Object.getPrototypeOf,l=Object.prototype.hasOwnProperty,f=function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var i,c=o(s(t));try{var f=function(){var o=i.value;l.call(e,o)||o===n||a(e,o,{get:function(){return t[o]},enumerable:!(r=u(t,o))||r.enumerable})};for(c.s();!(i=c.n()).done;)f()}catch(d){c.e(d)}finally{c.f()}}return e},d={};!function(e,t){for(var n in t)a(e,n,{get:t[n],enumerable:!0})}(d,{ArrowheadStylePickerSet:function(){return M},CommonStylePickerSet:function(){return I},DefaultStylePanelContent:function(){return _},GeoStylePickerSet:function(){return E},OpacitySlider:function(){return D},SplineStylePickerSet:function(){return C},TextStylePickerSet:function(){return T}}),e.exports=(r=d,f(a({},"__esModule",{value:!0}),r));var p=n(44414),h=n(57777),v=function(e,t,n){return n=null!=e?i(c(e)):{},f(!t&&e&&e.__esModule?n:a(n,"default",{value:e,enumerable:!0}),e)}(n(9950)),g=n(49955),y=n(23813),m=n(14867),b=n(97410),w=n(61537),S=n(67880),x=n(39636),P=n(50559),O=n(82441),k=n(712);function _(e){var t=e.styles,n=(0,h.useIsDarkMode)();if(!t)return null;var r=t.get(h.GeoShapeGeoStyle),o=t.get(h.ArrowShapeArrowheadEndStyle),i=t.get(h.ArrowShapeArrowheadStartStyle),a=void 0===r,u=void 0===o&&void 0===i,s=void 0===t.get(h.LineShapeSplineStyle),c=void 0===t.get(h.DefaultFontStyle),l=(0,h.getDefaultColorTheme)({isDarkMode:n});return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(I,{theme:l,styles:t}),!c&&(0,p.jsx)(T,{theme:l,styles:t}),!(a&&u&&s)&&(0,p.jsxs)("div",{className:"tlui-style-panel__section","aria-label":"style panel styles",children:[(0,p.jsx)(E,{styles:t}),(0,p.jsx)(M,{styles:t}),(0,p.jsx)(C,{styles:t})]})]})}function j(){var e=(0,h.useEditor)(),t=(0,m.useUiEvents)();return v.default.useMemo((function(){return function(n,r){e.run((function(){e.isIn("select")&&e.setStyleForSelectedShapes(n,r),e.setStyleForNextShapes(n,r),e.updateInstanceState({isChangingStyle:!0})})),t("set-style",{source:"style-panel",id:n.id,value:r})}}),[e,t])}function I(e){var t=e.styles,n=e.theme,r=(0,b.useTranslation)(),o=(0,h.useEditor)(),i=(0,v.useCallback)((function(e){return o.markHistoryStoppingPoint(e)}),[o]),a=j(),u=t.get(h.DefaultColorStyle),s=t.get(h.DefaultFillStyle),c=t.get(h.DefaultDashStyle),l=t.get(h.DefaultSizeStyle),f=void 0!==s||void 0!==c||void 0!==l;return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)("div",{tabIndex:-1,className:"tlui-style-panel__section__common","aria-label":"style panel styles","data-testid":"style.panel",children:[void 0===u?null:(0,p.jsx)(x.TldrawUiButtonPicker,{title:r("style-panel.color"),uiType:"color",style:h.DefaultColorStyle,items:g.STYLES.color,value:u,onValueChange:a,theme:n,onHistoryMark:i}),(0,p.jsx)(D,{})]}),f&&(0,p.jsxs)("div",{className:"tlui-style-panel__section","aria-label":"style panel styles",children:[void 0===s?null:(0,p.jsx)(x.TldrawUiButtonPicker,{title:r("style-panel.fill"),uiType:"fill",style:h.DefaultFillStyle,items:g.STYLES.fill,value:s,onValueChange:a,theme:n,onHistoryMark:i}),void 0===c?null:(0,p.jsx)(x.TldrawUiButtonPicker,{title:r("style-panel.dash"),uiType:"dash",style:h.DefaultDashStyle,items:g.STYLES.dash,value:c,onValueChange:a,theme:n,onHistoryMark:i}),void 0===l?null:(0,p.jsx)(x.TldrawUiButtonPicker,{title:r("style-panel.size"),uiType:"size",style:h.DefaultSizeStyle,items:g.STYLES.size,value:l,onValueChange:function(e,t){a(e,t);var n=o.getSelectedShapeIds();n.length>0&&(0,y.kickoutOccludedShapes)(o,n)},theme:n,onHistoryMark:i})]})]})}function T(e){var t=e.theme,n=e.styles,r=(0,b.useTranslation)(),o=j(),i=(0,h.useEditor)(),a=(0,v.useCallback)((function(e){return i.markHistoryStoppingPoint(e)}),[i]),u=n.get(h.DefaultFontStyle),s=n.get(h.DefaultTextAlignStyle),c=n.get(h.DefaultHorizontalAlignStyle),l=n.get(h.DefaultVerticalAlignStyle);return void 0===u&&void 0===c?null:(0,p.jsxs)("div",{className:"tlui-style-panel__section","aria-label":"style panel text",children:[void 0===u?null:(0,p.jsx)(x.TldrawUiButtonPicker,{title:r("style-panel.font"),uiType:"font",style:h.DefaultFontStyle,items:g.STYLES.font,value:u,onValueChange:o,theme:t,onHistoryMark:a}),void 0===s?null:(0,p.jsxs)("div",{className:"tlui-style-panel__row",children:[(0,p.jsx)(x.TldrawUiButtonPicker,{title:r("style-panel.align"),uiType:"align",style:h.DefaultTextAlignStyle,items:g.STYLES.textAlign,value:s,onValueChange:o,theme:t,onHistoryMark:a}),(0,p.jsx)("div",{className:"tlui-style-panel__row__extra-button",children:(0,p.jsx)(w.TldrawUiButton,{type:"icon",title:r("style-panel.vertical-align"),"data-testid":"vertical-align",disabled:!0,children:(0,p.jsx)(S.TldrawUiButtonIcon,{icon:"vertical-align-middle"})})})]}),void 0===c?null:(0,p.jsxs)("div",{className:"tlui-style-panel__row",children:[(0,p.jsx)(x.TldrawUiButtonPicker,{title:r("style-panel.label-align"),uiType:"align",style:h.DefaultHorizontalAlignStyle,items:g.STYLES.horizontalAlign,value:c,onValueChange:o,theme:t,onHistoryMark:a}),(0,p.jsx)("div",{className:"tlui-style-panel__row__extra-button",children:void 0===l?(0,p.jsx)(w.TldrawUiButton,{type:"icon",title:r("style-panel.vertical-align"),"data-testid":"vertical-align",disabled:!0,children:(0,p.jsx)(S.TldrawUiButtonIcon,{icon:"vertical-align-middle"})}):(0,p.jsx)(k.DropdownPicker,{type:"icon",id:"geo-vertical-alignment",uiType:"verticalAlign",stylePanelType:"vertical-align",style:h.DefaultVerticalAlignStyle,items:g.STYLES.verticalAlign,value:l,onValueChange:o})})]})]})}function E(e){var t=e.styles,n=j(),r=t.get(h.GeoShapeGeoStyle);return void 0===r?null:(0,p.jsx)(k.DropdownPicker,{id:"geo",type:"menu",label:"style-panel.geo",uiType:"geo",stylePanelType:"geo",style:h.GeoShapeGeoStyle,items:g.STYLES.geo,value:r,onValueChange:n})}function C(e){var t=e.styles,n=j(),r=t.get(h.LineShapeSplineStyle);return void 0===r?null:(0,p.jsx)(k.DropdownPicker,{id:"spline",type:"menu",label:"style-panel.spline",uiType:"spline",stylePanelType:"spline",style:h.LineShapeSplineStyle,items:g.STYLES.spline,value:r,onValueChange:n})}function M(e){var t=e.styles,n=j(),r=t.get(h.ArrowShapeArrowheadEndStyle),o=t.get(h.ArrowShapeArrowheadStartStyle);return r&&o?(0,p.jsx)(O.DoubleDropdownPicker,{label:"style-panel.arrowheads",uiTypeA:"arrowheadStart",styleA:h.ArrowShapeArrowheadStartStyle,itemsA:g.STYLES.arrowheadStart,valueA:o,uiTypeB:"arrowheadEnd",styleB:h.ArrowShapeArrowheadEndStyle,itemsB:g.STYLES.arrowheadEnd,valueB:r,onValueChange:n,labelA:"style-panel.arrowhead-start",labelB:"style-panel.arrowhead-end"}):null}var A=[.1,.25,.5,.75,1];function D(){var e=(0,h.useEditor)(),t=(0,v.useCallback)((function(t){return e.markHistoryStoppingPoint(t)}),[e]),n=(0,h.useValue)("opacity",(function(){return e.getSharedOpacity()}),[e]),r=(0,m.useUiEvents)(),o=(0,b.useTranslation)(),i=v.default.useCallback((function(t){var n=A[t];e.run((function(){e.isIn("select")&&e.setOpacityForSelectedShapes(n),e.setOpacityForNextShapes(n),e.updateInstanceState({isChangingStyle:!0})})),r("set-style",{source:"style-panel",id:"opacity",value:t})}),[e,r]);if(void 0===n)return null;var a="mixed"===n.type?-1:A.indexOf((0,h.minBy)(A,(function(e){return Math.abs(e-n.value)})));return(0,p.jsx)(P.TldrawUiSlider,{"data-testid":"style.opacity",value:a>=0?a:A.length-1,label:"mixed"===n.type?"style-panel.mixed":"opacity-style.".concat(n.value),onValueChange:i,steps:A.length-1,title:o("style-panel.opacity"),onHistoryMark:t})}},82441:function(e,t,n){"use strict";var r,o=n(50883).default,i=Object.create,a=Object.defineProperty,u=Object.getOwnPropertyDescriptor,s=Object.getOwnPropertyNames,c=Object.getPrototypeOf,l=Object.prototype.hasOwnProperty,f=function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var i,c=o(s(t));try{var f=function(){var o=i.value;l.call(e,o)||o===n||a(e,o,{get:function(){return t[o]},enumerable:!(r=u(t,o))||r.enumerable})};for(c.s();!(i=c.n()).done;)f()}catch(d){c.e(d)}finally{c.f()}}return e},d={};!function(e,t){for(var n in t)a(e,n,{get:t[n],enumerable:!0})}(d,{DoubleDropdownPicker:function(){return b}}),e.exports=(r=d,f(a({},"__esModule",{value:!0}),r));var p=n(44414),h=function(e,t,n){return n=null!=e?i(c(e)):{},f(!t&&e&&e.__esModule?n:a(n,"default",{value:e,enumerable:!0}),e)}(n(9950)),v=n(97410),g=n(61537),y=n(67880),m=n(80408);var b=h.memo((function(e){var t=e.label,n=e.uiTypeA,r=e.uiTypeB,o=e.labelA,i=e.labelB,a=e.itemsA,u=e.itemsB,s=e.styleA,c=e.styleB,l=e.valueA,f=e.valueB,d=e.onValueChange,b=(0,v.useTranslation)(),w=h.useMemo((function(){var e,t;return null!==(e=null===(t=a.find((function(e){return"shared"===l.type&&l.value===e.value})))||void 0===t?void 0:t.icon)&&void 0!==e?e:"mixed"}),[a,l]),S=h.useMemo((function(){var e,t;return null!==(e=null===(t=u.find((function(e){return"shared"===f.type&&f.value===e.value})))||void 0===t?void 0:t.icon)&&void 0!==e?e:"mixed"}),[u,f]);return void 0===l&&void 0===f?null:(0,p.jsxs)("div",{className:"tlui-style-panel__double-select-picker",children:[(0,p.jsx)("div",{title:b(t),className:"tlui-style-panel__double-select-picker-label",children:b(t)}),(0,p.jsxs)("div",{className:"tlui-buttons__horizontal",children:[(0,p.jsxs)(m.TldrawUiDropdownMenuRoot,{id:"style panel ".concat(n," A"),children:[(0,p.jsx)(m.TldrawUiDropdownMenuTrigger,{children:(0,p.jsx)(g.TldrawUiButton,{type:"icon","data-testid":"style.".concat(n),title:b(o)+" \u2014 "+(null===l||"mixed"===l.type?b("style-panel.mixed"):b("".concat(n,"-style.").concat(l.value))),children:(0,p.jsx)(y.TldrawUiButtonIcon,{icon:w,small:!0,invertIcon:!0})})}),(0,p.jsx)(m.TldrawUiDropdownMenuContent,{side:"left",align:"center",sideOffset:80,alignOffset:0,children:(0,p.jsx)("div",{className:"tlui-buttons__grid",children:a.map((function(e,t){return(0,p.jsx)(m.TldrawUiDropdownMenuItem,{"data-testid":"style.".concat(n,".").concat(e.value),children:(0,p.jsx)(g.TldrawUiButton,{type:"icon",onClick:function(){return d(s,e.value)},title:"".concat(b(o)," \u2014 ").concat(b("".concat(n,"-style.").concat(e.value))),children:(0,p.jsx)(y.TldrawUiButtonIcon,{icon:e.icon,invertIcon:!0})},e.value)},t)}))})})]}),(0,p.jsxs)(m.TldrawUiDropdownMenuRoot,{id:"style panel ".concat(r),children:[(0,p.jsx)(m.TldrawUiDropdownMenuTrigger,{children:(0,p.jsx)(g.TldrawUiButton,{type:"icon","data-testid":"style.".concat(r),title:b(i)+" \u2014 "+(null===f||"mixed"===f.type?b("style-panel.mixed"):b("".concat(r,"-style.").concat(f.value))),children:(0,p.jsx)(y.TldrawUiButtonIcon,{icon:S,small:!0})})}),(0,p.jsx)(m.TldrawUiDropdownMenuContent,{side:"left",align:"center",sideOffset:116,alignOffset:0,children:(0,p.jsx)("div",{className:"tlui-buttons__grid",children:u.map((function(e){return(0,p.jsx)(m.TldrawUiDropdownMenuItem,{children:(0,p.jsx)(g.TldrawUiButton,{type:"icon",title:"".concat(b(i)," \u2014 ").concat(b("".concat(r,"-style.").concat(e.value))),"data-testid":"style.".concat(r,".").concat(e.value),onClick:function(){return d(c,e.value)},children:(0,p.jsx)(y.TldrawUiButtonIcon,{icon:e.icon})})},e.value)}))})})]})]})]})}))},712:function(e,t,n){"use strict";var r,o=n(50883).default,i=Object.create,a=Object.defineProperty,u=Object.getOwnPropertyDescriptor,s=Object.getOwnPropertyNames,c=Object.getPrototypeOf,l=Object.prototype.hasOwnProperty,f=function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var i,c=o(s(t));try{var f=function(){var o=i.value;l.call(e,o)||o===n||a(e,o,{get:function(){return t[o]},enumerable:!(r=u(t,o))||r.enumerable})};for(c.s();!(i=c.n()).done;)f()}catch(d){c.e(d)}finally{c.f()}}return e},d={};!function(e,t){for(var n in t)a(e,n,{get:t[n],enumerable:!0})}(d,{DropdownPicker:function(){return S}}),e.exports=(r=d,f(a({},"__esModule",{value:!0}),r));var p=n(44414),h=n(57777),v=function(e,t,n){return n=null!=e?i(c(e)):{},f(!t&&e&&e.__esModule?n:a(n,"default",{value:e,enumerable:!0}),e)}(n(9950)),g=n(97410),y=n(61537),m=n(67880),b=n(95139),w=n(80408);var S=v.memo((function(e){var t=e.id,n=e.label,r=e.uiType,o=e.stylePanelType,i=e.style,a=e.items,u=e.type,s=e.value,c=e.onValueChange,l=(0,g.useTranslation)(),f=(0,h.useEditor)(),d=v.useMemo((function(){var e;return null===(e=a.find((function(e){return"shared"===s.type&&e.value===s.value})))||void 0===e?void 0:e.icon}),[a,s]),S=l("style-panel.".concat(o)),x="mixed"===s.type?l("style-panel.mixed"):S+" \u2014 "+l("".concat(r,"-style.").concat(s.value)),P=n?l(n):"";return(0,p.jsxs)(w.TldrawUiDropdownMenuRoot,{id:"style panel ".concat(t),children:[(0,p.jsx)(w.TldrawUiDropdownMenuTrigger,{children:(0,p.jsxs)(y.TldrawUiButton,{type:u,"data-testid":"style.".concat(r),title:x,children:[P&&(0,p.jsx)(b.TldrawUiButtonLabel,{children:P}),(0,p.jsx)(m.TldrawUiButtonIcon,{icon:null!==d&&void 0!==d?d:"mixed"})]})}),(0,p.jsx)(w.TldrawUiDropdownMenuContent,{side:"left",align:"center",alignOffset:0,children:(0,p.jsx)("div",{className:"tlui-buttons__grid",children:a.map((function(e){return(0,p.jsx)(w.TldrawUiDropdownMenuItem,{children:(0,p.jsx)(y.TldrawUiButton,{type:"icon","data-testid":"style.".concat(r,".").concat(e.value),title:S+" \u2014 "+l("".concat(r,"-style.").concat(e.value)),onClick:function(){f.markHistoryStoppingPoint("select style dropdown item"),c(i,e.value)},children:(0,p.jsx)(m.TldrawUiButtonIcon,{icon:e.icon})})},e.value)}))})})]})}))},29225:function(e,t,n){"use strict";var r,o=n(50883).default,i=Object.create,a=Object.defineProperty,u=Object.getOwnPropertyDescriptor,s=Object.getOwnPropertyNames,c=Object.getPrototypeOf,l=Object.prototype.hasOwnProperty,f=function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var i,c=o(s(t));try{var f=function(){var o=i.value;l.call(e,o)||o===n||a(e,o,{get:function(){return t[o]},enumerable:!(r=u(t,o))||r.enumerable})};for(c.s();!(i=c.n()).done;)f()}catch(d){c.e(d)}finally{c.f()}}return e},d={};!function(e,t){for(var n in t)a(e,n,{get:t[n],enumerable:!0})}(d,{TldrawUiToasts:function(){return O}}),e.exports=(r=d,f(a({},"__esModule",{value:!0}),r));var p=n(44414),h=function(e,t,n){return n=null!=e?i(c(e)):{},f(!t&&e&&e.__esModule?n:a(n,"default",{value:e,enumerable:!0}),e)}(n(56637)),v=n(57777),g=n(9950),y=n(5450),m=n(97410),b=n(61537),w=n(95139),S=n(88635),x={success:"check-circle",warning:"warning-triangle",error:"cross-circle",info:"info-circle"};function P(e){var t,n,r=e.toast,o=(0,y.useToasts)().removeToast,i=(0,m.useTranslation)(),a=r.actions&&r.actions.length>0,u=r.icon||r.severity&&x[r.severity];return(0,p.jsxs)(h.Root,{onOpenChange:function(e){e||o(r.id)},className:"tlui-toast__container",duration:r.keepOpen?1/0:4e3,"data-severity":r.severity,children:[u&&(0,p.jsx)("div",{className:"tlui-toast__icon",children:(0,p.jsx)(S.TldrawUiIcon,{icon:u})}),(0,p.jsxs)("div",{className:"tlui-toast__main","data-title":!!r.title,"data-description":!!r.description,"data-actions":!!r.actions,children:[(0,p.jsxs)("div",{className:"tlui-toast__content",children:[r.title&&(0,p.jsx)(h.Title,{className:"tlui-toast__title",children:r.title}),r.description&&(0,p.jsx)(h.Description,{className:"tlui-toast__description",children:r.description})]}),r.actions&&(0,p.jsxs)("div",{className:"tlui-toast__actions",children:[r.actions.map((function(e,t){return(0,p.jsx)(h.Action,{altText:e.label,asChild:!0,onClick:e.onClick,children:(0,p.jsx)(b.TldrawUiButton,{type:e.type,children:(0,p.jsx)(w.TldrawUiButtonLabel,{children:e.label})})},t)})),(0,p.jsx)(h.Close,{asChild:!0,children:(0,p.jsx)(b.TldrawUiButton,{type:"normal",className:"tlui-toast__close",style:{marginLeft:"auto"},children:(0,p.jsx)(w.TldrawUiButtonLabel,{children:null!==(t=r.closeLabel)&&void 0!==t?t:i("toast.close")})})})]})]}),!a&&(0,p.jsx)(h.Close,{asChild:!0,children:(0,p.jsx)(b.TldrawUiButton,{type:"normal",className:"tlui-toast__close",children:(0,p.jsx)(w.TldrawUiButtonLabel,{children:null!==(n=r.closeLabel)&&void 0!==n?n:i("toast.close")})})})]})}var O=(0,g.memo)((function(){var e=(0,y.useToasts)().toasts,t=(0,v.useValue)("toasts",(function(){return e.get()}),[]);return(0,p.jsxs)(p.Fragment,{children:[t.map((function(e){return(0,p.jsx)(P,{toast:e},e.id)})),(0,p.jsx)(h.ToastViewport,{className:"tlui-toast__viewport"})]})}))},54229:function(e,t,n){"use strict";var r,o=n(50883).default,i=Object.defineProperty,a=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,c={};!function(e,t){for(var n in t)i(e,n,{get:t[n],enumerable:!0})}(c,{DefaultToolbar:function(){return S}}),e.exports=(r=c,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var c,l=o(u(t));try{var f=function(){var o=c.value;s.call(e,o)||o===n||i(e,o,{get:function(){return t[o]},enumerable:!(r=a(t,o))||r.enumerable})};for(l.s();!(c=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(i({},"__esModule",{value:!0}),r));var l=n(44414),f=n(57777),d=n(9950),p=n(12521),h=n(77740),v=n(3594),g=n(19098),y=n(84406),m=n(58760),b=n(60388),w=n(13609),S=(0,d.memo)((function(e){var t=e.children,n=(0,f.useEditor)(),r=(0,h.useBreakpoint)(),o=(0,g.useReadonly)(),i=(0,f.useValue)("current tool id",(function(){return n.getCurrentToolId()}),[n]),a=(0,d.useRef)(null);(0,f.usePassThroughWheelEvents)(a);var u=(0,v.useTldrawUiComponents)(),s=u.ActionsMenu,c=u.QuickActions,S="menu"!==n.options.actionShortcutsLocation&&("toolbar"===n.options.actionShortcutsLocation||r<p.PORTRAIT_BREAKPOINT.TABLET);return(0,l.jsx)("div",{ref:a,className:"tlui-toolbar",children:(0,l.jsxs)("div",{className:"tlui-toolbar__inner",children:[(0,l.jsxs)("div",{className:"tlui-toolbar__left",children:[!o&&(0,l.jsxs)("div",{className:"tlui-toolbar__extras",children:[S&&(0,l.jsxs)("div",{className:"tlui-toolbar__extras__controls tlui-buttons__horizontal",children:[c&&(0,l.jsx)(c,{}),s&&(0,l.jsx)(s,{})]}),(0,l.jsx)(w.ToggleToolLockedButton,{activeToolId:i})]}),(0,l.jsx)(b.OverflowingToolbar,{children:null!==t&&void 0!==t?t:(0,l.jsx)(m.DefaultToolbarContent,{})})]}),r<p.PORTRAIT_BREAKPOINT.TABLET_SM&&!o&&(0,l.jsx)("div",{className:"tlui-toolbar__tools",children:(0,l.jsx)(y.MobileStylePanel,{})})]})})}))},58760:function(e,t,n){"use strict";var r,o=n(50883).default,i=Object.defineProperty,a=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,c={};!function(e,t){for(var n in t)i(e,n,{get:t[n],enumerable:!0})}(c,{ArrowDownToolbarItem:function(){return V},ArrowLeftToolbarItem:function(){return F},ArrowRightToolbarItem:function(){return z},ArrowToolbarItem:function(){return S},ArrowUpToolbarItem:function(){return B},AssetToolbarItem:function(){return O},CheckBoxToolbarItem:function(){return U},CloudToolbarItem:function(){return D},DefaultToolbarContent:function(){return h},DiamondToolbarItem:function(){return j},DrawToolbarItem:function(){return b},EllipseToolbarItem:function(){return _},EraserToolbarItem:function(){return w},FrameToolbarItem:function(){return G},HandToolbarItem:function(){return m},HeartToolbarItem:function(){return M},HexagonToolbarItem:function(){return A},HighlightToolbarItem:function(){return K},LaserToolbarItem:function(){return q},LineToolbarItem:function(){return H},NoteToolbarItem:function(){return P},OvalToolbarItem:function(){return N},PentagonToolbarItem:function(){return C},RectangleToolbarItem:function(){return k},RhombusToolbarItem:function(){return E},SelectToolbarItem:function(){return y},StarToolbarItem:function(){return R},TextToolbarItem:function(){return x},ToolbarItem:function(){return g},TrapezoidToolbarItem:function(){return T},TriangleToolbarItem:function(){return I},XBoxToolbarItem:function(){return L},useIsToolSelected:function(){return v}}),e.exports=(r=c,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var c,l=o(u(t));try{var f=function(){var o=c.value;s.call(e,o)||o===n||i(e,o,{get:function(){return t[o]},enumerable:!(r=a(t,o))||r.enumerable})};for(l.s();!(c=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(i({},"__esModule",{value:!0}),r));var l=n(44414),f=n(57777),d=n(48357),p=n(25797);function h(){return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(y,{}),(0,l.jsx)(m,{}),(0,l.jsx)(b,{}),(0,l.jsx)(w,{}),(0,l.jsx)(S,{}),(0,l.jsx)(x,{}),(0,l.jsx)(P,{}),(0,l.jsx)(O,{}),(0,l.jsx)(k,{}),(0,l.jsx)(_,{}),(0,l.jsx)(I,{}),(0,l.jsx)(j,{}),(0,l.jsx)(A,{}),(0,l.jsx)(N,{}),(0,l.jsx)(E,{}),(0,l.jsx)(R,{}),(0,l.jsx)(D,{}),(0,l.jsx)(M,{}),(0,l.jsx)(L,{}),(0,l.jsx)(U,{}),(0,l.jsx)(F,{}),(0,l.jsx)(B,{}),(0,l.jsx)(V,{}),(0,l.jsx)(z,{}),(0,l.jsx)(H,{}),(0,l.jsx)(K,{}),(0,l.jsx)(q,{}),(0,l.jsx)(G,{})]})}function v(e){var t,n=(0,f.useEditor)(),r=null===(t=e.meta)||void 0===t?void 0:t.geo;return(0,f.useValue)("is tool selected",(function(){var t=n.getCurrentToolId(),o=n.getSharedStyles().getAsKnownValue(f.GeoShapeGeoStyle);return r?"geo"===t&&o===r:t===e.id}),[n,e.id,r])}function g(e){var t=e.tool,n=v((0,d.useTools)()[t]);return(0,l.jsx)(p.TldrawUiMenuToolItem,{toolId:t,isSelected:n})}function y(){return(0,l.jsx)(g,{tool:"select"})}function m(){return(0,l.jsx)(g,{tool:"hand"})}function b(){return(0,l.jsx)(g,{tool:"draw"})}function w(){return(0,l.jsx)(g,{tool:"eraser"})}function S(){return(0,l.jsx)(g,{tool:"arrow"})}function x(){return(0,l.jsx)(g,{tool:"text"})}function P(){return(0,l.jsx)(g,{tool:"note"})}function O(){return(0,l.jsx)(p.TldrawUiMenuToolItem,{toolId:"asset"})}function k(){return(0,l.jsx)(g,{tool:"rectangle"})}function _(){return(0,l.jsx)(g,{tool:"ellipse"})}function j(){return(0,l.jsx)(g,{tool:"diamond"})}function I(){return(0,l.jsx)(g,{tool:"triangle"})}function T(){return(0,l.jsx)(g,{tool:"trapezoid"})}function E(){return(0,l.jsx)(g,{tool:"rhombus"})}function C(){return(0,l.jsx)(g,{tool:"pentagon"})}function M(){return(0,l.jsx)(g,{tool:"heart"})}function A(){return(0,l.jsx)(g,{tool:"hexagon"})}function D(){return(0,l.jsx)(g,{tool:"cloud"})}function R(){return(0,l.jsx)(g,{tool:"star"})}function N(){return(0,l.jsx)(g,{tool:"oval"})}function L(){return(0,l.jsx)(g,{tool:"x-box"})}function U(){return(0,l.jsx)(g,{tool:"check-box"})}function F(){return(0,l.jsx)(g,{tool:"arrow-left"})}function B(){return(0,l.jsx)(g,{tool:"arrow-up"})}function V(){return(0,l.jsx)(g,{tool:"arrow-down"})}function z(){return(0,l.jsx)(g,{tool:"arrow-right"})}function H(){return(0,l.jsx)(g,{tool:"line"})}function K(){return(0,l.jsx)(g,{tool:"highlight"})}function G(){return(0,l.jsx)(g,{tool:"frame"})}function q(){return(0,l.jsx)(g,{tool:"laser"})}},60388:function(e,t,n){"use strict";var r,o=n(85715).default,i=n(50883).default,a=Object.create,u=Object.defineProperty,s=Object.getOwnPropertyDescriptor,c=Object.getOwnPropertyNames,l=Object.getPrototypeOf,f=Object.prototype.hasOwnProperty,d=function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,a=i(c(t));try{var l=function(){var i=o.value;f.call(e,i)||i===n||u(e,i,{get:function(){return t[i]},enumerable:!(r=s(t,i))||r.enumerable})};for(a.s();!(o=a.n()).done;)l()}catch(d){a.e(d)}finally{a.f()}}return e},p=function(e,t,n){return n=null!=e?a(l(e)):{},d(!t&&e&&e.__esModule?n:u(n,"default",{value:e,enumerable:!0}),e)},h={};!function(e,t){for(var n in t)u(e,n,{get:t[n],enumerable:!0})}(h,{IsInOverflowContext:function(){return I},OverflowingToolbar:function(){return T},isActiveTLUiToolItem:function(){return E}}),e.exports=(r=h,d(u({},"__esModule",{value:!0}),r));var v=n(44414),g=n(57777),y=p(n(48738)),m=p(n(83665)),b=n(9950),w=n(12521),S=n(77740),x=n(51750),P=n(97410),O=n(61537),k=n(67880),_=n(80408),j=n(70649),I=(0,b.createContext)(!1);function T(e){var t=e.children,n=(0,g.useEditor)(),r=(0,g.useUniqueSafeId)(),i=(0,S.useBreakpoint)(),a=(0,P.useTranslation)(),u=Math.min(8,5+i),s=(0,b.useState)(0),c=o(s,2),l=c[0],f=c[1],d=(0,b.useRef)(null),p=(0,b.useState)(null),h=o(p,2),T=h[0],E=h[1],C=(0,b.useMemo)((function(){var e=T?':not([data-value="'.concat(T,'"])'):"";return"\n\t\t\t#".concat(r,"_main > *:nth-child(n + ").concat(u+(T?1:2),")").concat(e," {\n\t\t\t\tdisplay: none;\n\t\t\t}\n\t\t\t#").concat(r,"_more > *:nth-child(-n + ").concat(u,") {\n\t\t\t\tdisplay: none;\n\t\t\t}\n        ")}),[T,r,u]),M=(0,g.useEvent)((function(){if(d.current){var e=Array.from(d.current.children);f(e.length),e.findIndex((function(e){return e.getAttribute("data-value")===T}))<=u&&E(null);var t=Array.from(d.current.children).findIndex((function(e){return"true"===e.getAttribute("aria-checked")}));-1!==t&&t>=u&&E(e[t].getAttribute("data-value"))}}));return(0,b.useLayoutEffect)((function(){M()})),(0,b.useLayoutEffect)((function(){if(d.current){var e=new MutationObserver(M);return e.observe(d.current,{childList:!0,subtree:!0,attributeFilter:["data-value","aria-checked"]}),function(){e.disconnect()}}}),[M]),(0,b.useEffect)((function(){for(var e=function(){var e=o(r[t],2),i=e[0],a=e[1];(0,m.default)(i,(function(e){var t,r;if(!(0,x.areShortcutsDisabled)(n)){(0,g.preventDefault)(e);var o=Array.from(null!==(t=null===(r=d.current)||void 0===r?void 0:r.children)&&void 0!==t?t:[]).filter((function(e){return e instanceof HTMLElement&&("button"===e.tagName.toLowerCase()&&!(!e.offsetWidth&&!e.offsetHeight))}))[a];o&&o.click()}}))},t=0,r=[["1",0],["2",1],["3",2],["4",3],["5",4],["6",5],["7",6],["8",7],["9",8],["0",9]];t<r.length;t++)e();return function(){m.default.unbind("1,2,3,4,5,6,7,8,9,0")}}),[n]),(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)("style",{children:C}),(0,v.jsxs)("div",{className:(0,y.default)("tlui-toolbar__tools",{"tlui-toolbar__tools__mobile":i<w.PORTRAIT_BREAKPOINT.TABLET_SM}),role:"radiogroup",children:[(0,v.jsx)("div",{id:"".concat(r,"_main"),ref:d,className:"tlui-toolbar__tools__list",children:(0,v.jsx)(j.TldrawUiMenuContextProvider,{type:"toolbar",sourceId:"toolbar",children:t})}),l>u+1&&(0,v.jsx)(I.Provider,{value:!0,children:(0,v.jsxs)(_.TldrawUiDropdownMenuRoot,{id:"toolbar overflow",modal:!1,children:[(0,v.jsx)(_.TldrawUiDropdownMenuTrigger,{children:(0,v.jsx)(O.TldrawUiButton,{title:a("tool-panel.more"),type:"tool",className:"tlui-toolbar__overflow","data-testid":"tools.more-button",children:(0,v.jsx)(k.TldrawUiButtonIcon,{icon:"chevron-up"})})}),(0,v.jsx)(_.TldrawUiDropdownMenuContent,{side:"top",align:"center",children:(0,v.jsx)("div",{className:"tlui-buttons__grid","data-testid":"tools.more-content",id:"".concat(r,"_more"),children:(0,v.jsx)(j.TldrawUiMenuContextProvider,{type:"toolbar-overflow",sourceId:"toolbar",children:t})})})]})})]})]})}var E=function(e,t,n){var r,o;return null!==(r=e.meta)&&void 0!==r&&r.geo?"geo"===t&&n===(null===(o=e.meta)||void 0===o?void 0:o.geo):t===e.id}},13609:function(e,t,n){"use strict";var r,o=n(50883).default,i=Object.create,a=Object.defineProperty,u=Object.getOwnPropertyDescriptor,s=Object.getOwnPropertyNames,c=Object.getPrototypeOf,l=Object.prototype.hasOwnProperty,f=function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var i,c=o(s(t));try{var f=function(){var o=i.value;l.call(e,o)||o===n||a(e,o,{get:function(){return t[o]},enumerable:!(r=u(t,o))||r.enumerable})};for(c.s();!(i=c.n()).done;)f()}catch(d){c.e(d)}finally{c.f()}}return e},d={};!function(e,t){for(var n in t)a(e,n,{get:t[n],enumerable:!0})}(d,{ToggleToolLockedButton:function(){return S}}),e.exports=(r=d,f(a({},"__esModule",{value:!0}),r));var p=n(44414),h=n(57777),v=function(e,t,n){return n=null!=e?i(c(e)):{},f(!t&&e&&e.__esModule?n:a(n,"default",{value:e,enumerable:!0}),e)}(n(48738)),g=n(12521),y=n(77740),m=n(97410),b=n(61537),w=n(67880);function S(e){var t=e.activeToolId,n=(0,h.useEditor)(),r=(0,y.useBreakpoint)(),o=(0,m.useTranslation)(),i=(0,h.useValue)("is tool locked",(function(){return n.getInstanceState().isToolLocked}),[n]),a=(0,h.useValue)("current tool",(function(){return n.getCurrentTool()}),[n]);return t&&a.isLockable?(0,p.jsx)(b.TldrawUiButton,{type:"normal",title:o("action.toggle-tool-lock"),"data-testid":"tool-lock",className:(0,v.default)("tlui-toolbar__lock-button",{"tlui-toolbar__lock-button__mobile":r<g.PORTRAIT_BREAKPOINT.TABLET_SM}),onClick:function(){return n.updateInstanceState({isToolLocked:!i})},children:(0,p.jsx)(w.TldrawUiButtonIcon,{icon:i?"lock":"unlock",small:!0})}):null}},24379:function(e,t,n){"use strict";var r,o=n(50883).default,i=Object.defineProperty,a=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,c={};!function(e,t){for(var n in t)i(e,n,{get:t[n],enumerable:!0})}(c,{CenteredTopPanelContainer:function(){return p}}),e.exports=(r=c,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var c,l=o(u(t));try{var f=function(){var o=c.value;s.call(e,o)||o===n||i(e,o,{get:function(){return t[o]},enumerable:!(r=a(t,o))||r.enumerable})};for(l.s();!(c=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(i({},"__esModule",{value:!0}),r));var l=n(44414),f=n(9950),d=n(77740);function p(e){var t=e.maxWidth,n=void 0===t?420:t,r=e.ignoreRightWidth,o=void 0===r?0:r,i=e.stylePanelWidth,a=void 0===i?148:i,u=e.marginBetweenZones,s=void 0===u?12:u,c=e.squeezeAmount,p=void 0===c?52:c,h=e.children,v=(0,f.useRef)(null),g=(0,d.useBreakpoint)(),y=(0,f.useCallback)((function(){var e=v.current;if(e){var t=e.parentElement.parentElement,r=t.querySelector(".tlui-layout__top__left"),i=t.querySelector(".tlui-layout__top__right"),u=t.offsetWidth,c=r.offsetWidth,l=i.offsetWidth,f=(u-(e.offsetWidth-o))/2;u%2!==0&&(f-=.5);var d=c+s,h=e.offsetLeft,y=Math.min(u-l-c-2*s,n),m=Math.max(f,d)-h;i.offsetWidth>a&&g<=6?e.style.setProperty("max-width",y-p+"px"):e.style.setProperty("max-width",y+"px"),e.style.setProperty("transform","translate(".concat(m,"px, 0px)"))}}),[g,o,s,n,p,a]);return(0,f.useLayoutEffect)((function(){var e=v.current;if(e){var t=e.parentElement.parentElement,n=t.querySelector(".tlui-layout__top__left"),r=t.querySelector(".tlui-layout__top__right"),o=new ResizeObserver(y);return o.observe(n),o.observe(r),o.observe(t),o.observe(e),y(),function(){o.disconnect()}}}),[y]),(0,f.useLayoutEffect)((function(){y()})),(0,l.jsx)("div",{ref:v,className:"tlui-top-panel__container",children:h})}},67931:function(e,t,n){"use strict";var r,o=n(50883).default,i=Object.defineProperty,a=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,c={};!function(e,t){for(var n in t)i(e,n,{get:t[n],enumerable:!0})}(c,{DefaultTopPanel:function(){return h}}),e.exports=(r=c,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var c,l=o(u(t));try{var f=function(){var o=c.value;s.call(e,o)||o===n||i(e,o,{get:function(){return t[o]},enumerable:!(r=a(t,o))||r.enumerable})};for(l.s();!(c=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(i({},"__esModule",{value:!0}),r));var l=n(44414),f=n(37454),d=n(45640),p=n(24379);function h(){var e="offline"===(0,f.useCollaborationStatus)();return(0,l.jsx)(p.CenteredTopPanelContainer,{children:e&&(0,l.jsx)(d.OfflineIndicator,{})})}},16235:function(e,t,n){"use strict";var r,o=n(12897).default,i=n(85715).default,a=n(50883).default,u=Object.create,s=Object.defineProperty,c=Object.getOwnPropertyDescriptor,l=Object.getOwnPropertyNames,f=Object.getPrototypeOf,d=Object.prototype.hasOwnProperty,p=function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,i=a(l(t));try{var u=function(){var i=o.value;d.call(e,i)||i===n||s(e,i,{get:function(){return t[i]},enumerable:!(r=c(t,i))||r.enumerable})};for(i.s();!(o=i.n()).done;)u()}catch(f){i.e(f)}finally{i.f()}}return e},h={};!function(e,t){for(var n in t)s(e,n,{get:t[n],enumerable:!0})}(h,{DefaultZoomMenu:function(){return _}}),e.exports=(r=h,p(s({},"__esModule",{value:!0}),r));var v=n(44414),g=function(e,t,n){return n=null!=e?u(f(e)):{},p(!t&&e&&e.__esModule?n:s(n,"default",{value:e,enumerable:!0}),e)}(n(95549)),y=n(57777),m=n(9950),b=n(12521),w=n(77740),S=n(80459),x=n(97410),P=n(61537),O=n(70649),k=n(74050),_=(0,m.memo)((function(e){var t=e.children,n=(0,y.useContainer)(),r=(0,S.useMenuIsOpen)("zoom menu"),o=i(r,2),a=o[0],u=o[1],s=null!==t&&void 0!==t?t:(0,v.jsx)(k.DefaultZoomMenuContent,{});return(0,v.jsxs)(g.Root,{dir:"ltr",open:a,onOpenChange:u,modal:!1,children:[(0,v.jsx)(g.Trigger,{asChild:!0,dir:"ltr",children:(0,v.jsx)(j,{})}),(0,v.jsx)(g.Portal,{container:n,children:(0,v.jsx)(g.Content,{className:"tlui-menu",side:"top",align:"start",alignOffset:0,sideOffset:8,collisionPadding:4,children:(0,v.jsx)(O.TldrawUiMenuContextProvider,{type:"menu",sourceId:"zoom-menu",children:s})})})]})})),j=(0,m.forwardRef)((function(e,t){var n=(0,y.useEditor)(),r=(0,w.useBreakpoint)(),i=(0,y.useValue)("zoom",(function(){return n.getZoomLevel()}),[n]),a=(0,x.useTranslation)(),u=(0,m.useCallback)((function(){n.resetZoom(n.getViewportScreenCenter(),{animation:{duration:n.options.animationMediumMs}})}),[n]);return(0,v.jsx)(P.TldrawUiButton,o(o({ref:t},e),{},{type:"icon",title:"".concat(a("navigation-zone.zoom")),"data-testid":"minimap.zoom-menu-button",className:r<b.PORTRAIT_BREAKPOINT.TABLET_SM?"tlui-zoom-menu__button":"tlui-zoom-menu__button__pct",onDoubleClick:u,children:r<b.PORTRAIT_BREAKPOINT.MOBILE?null:(0,v.jsxs)("span",{style:{flexGrow:0,textAlign:"center"},children:[Math.floor(100*i),"%"]})}))}))},74050:function(e,t,n){"use strict";var r,o=n(50883).default,i=Object.defineProperty,a=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,c={};!function(e,t){for(var n in t)i(e,n,{get:t[n],enumerable:!0})}(c,{DefaultZoomMenuContent:function(){return p}}),e.exports=(r=c,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var c,l=o(u(t));try{var f=function(){var o=c.value;s.call(e,o)||o===n||i(e,o,{get:function(){return t[o]},enumerable:!(r=a(t,o))||r.enumerable})};for(l.s();!(c=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(i({},"__esModule",{value:!0}),r));var l=n(44414),f=n(53655),d=n(61625);function p(){return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(d.TldrawUiMenuActionItem,{actionId:"zoom-in",noClose:!0}),(0,l.jsx)(d.TldrawUiMenuActionItem,{actionId:"zoom-out",noClose:!0}),(0,l.jsx)(f.ZoomTo100MenuItem,{}),(0,l.jsx)(f.ZoomToFitMenuItem,{}),(0,l.jsx)(f.ZoomToSelectionMenuItem,{})]})}},53655:function(e,t,n){"use strict";var r,o=n(50883).default,i=Object.defineProperty,a=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,c={};!function(e,t){for(var n in t)i(e,n,{get:t[n],enumerable:!0})}(c,{ArrangeMenuSubmenu:function(){return G},ClipboardMenuGroup:function(){return N},ConversionsMenuGroup:function(){return V},ConvertToBookmarkMenuItem:function(){return Z},ConvertToEmbedMenuItem:function(){return $},CopyAsMenuGroup:function(){return L},CopyMenuItem:function(){return F},CursorChatItem:function(){return le},CutMenuItem:function(){return U},DeleteMenuItem:function(){return H},DuplicateMenuItem:function(){return O},EditLinkMenuItem:function(){return P},EditMenuSubmenu:function(){return K},FitFrameToContentMenuItem:function(){return T},FlattenMenuItem:function(){return k},GroupMenuItem:function(){return _},MoveToPageMenu:function(){return X},PasteMenuItem:function(){return B},PrintItem:function(){return ce},RemoveFrameMenuItem:function(){return I},ReorderMenuSubmenu:function(){return Y},SelectAllMenuItem:function(){return z},ToggleAutoSizeMenuItem:function(){return x},ToggleDarkModeItem:function(){return ne},ToggleDebugModeItem:function(){return ae},ToggleDynamicSizeModeItem:function(){return ue},ToggleEdgeScrollingItem:function(){return oe},ToggleFocusModeItem:function(){return re},ToggleGridItem:function(){return ee},ToggleLockMenuItem:function(){return E},TogglePasteAtCursorItem:function(){return se},ToggleReduceMotionItem:function(){return ie},ToggleSnapModeItem:function(){return Q},ToggleToolLockItem:function(){return J},ToggleTransparentBgMenuItem:function(){return C},ToggleWrapModeItem:function(){return te},UngroupMenuItem:function(){return j},UnlockAllMenuItem:function(){return M},ZoomTo100MenuItem:function(){return A},ZoomToFitMenuItem:function(){return D},ZoomToSelectionMenuItem:function(){return R}}),e.exports=(r=c,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var c,l=o(u(t));try{var f=function(){var o=c.value;s.call(e,o)||o===n||i(e,o,{get:function(){return t[o]},enumerable:!(r=a(t,o))||r.enumerable})};for(l.s();!(c=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(i({},"__esModule",{value:!0}),r));var l=n(44414),f=n(57777),d=n(14867),p=n(5450),h=n(54150),v=n(88668),g=n(19098),y=n(93740),m=n(61625),b=n(60681),w=n(95767),S=n(12947);function x(){return(0,h.useShowAutoSizeToggle)()?(0,l.jsx)(m.TldrawUiMenuActionItem,{actionId:"toggle-auto-size"}):null}function P(){return(0,h.useHasLinkShapeSelected)()?(0,l.jsx)(m.TldrawUiMenuActionItem,{actionId:"edit-link"}):null}function O(){return(0,h.useUnlockedSelectedShapesCount)(1)?(0,l.jsx)(m.TldrawUiMenuActionItem,{actionId:"duplicate"}):null}function k(){var e=(0,f.useEditor)();return(0,f.useValue)("should display flatten option",(function(){if(0===e.getSelectedShapeIds().length)return!1;var t=e.getOnlySelectedShape();return!t||!e.isShapeOfType(t,"image")}),[e])?(0,l.jsx)(m.TldrawUiMenuActionItem,{actionId:"flatten-to-image"}):null}function _(){return(0,h.useAllowGroup)()?(0,l.jsx)(m.TldrawUiMenuActionItem,{actionId:"group"}):null}function j(){return(0,h.useAllowUngroup)()?(0,l.jsx)(m.TldrawUiMenuActionItem,{actionId:"ungroup"}):null}function I(){var e=(0,f.useEditor)();return(0,f.useValue)("allow unframe",(function(){var t=e.getSelectedShapes();return 0!==t.length&&t.every((function(t){return e.isShapeOfType(t,"frame")}))}),[e])?(0,l.jsx)(m.TldrawUiMenuActionItem,{actionId:"remove-frame"}):null}function T(){var e=(0,f.useEditor)();return(0,f.useValue)("allow fit frame to content",(function(){var t=e.getOnlySelectedShape();return!!t&&(e.isShapeOfType(t,"frame")&&e.getSortedChildIdsForParent(t).length>0)}),[e])?(0,l.jsx)(m.TldrawUiMenuActionItem,{actionId:"fit-frame-to-content"}):null}function E(){var e=(0,f.useEditor)();return(0,f.useValue)("selected shapes",(function(){return e.getSelectedShapes().length>0}),[e])?(0,l.jsx)(m.TldrawUiMenuActionItem,{actionId:"toggle-lock"}):null}function C(){var e=(0,f.useEditor)(),t=(0,f.useValue)("isTransparentBg",(function(){return!e.getInstanceState().exportBackground}),[e]);return(0,l.jsx)(y.TldrawUiMenuActionCheckboxItem,{actionId:"toggle-transparent",checked:t,toggle:!0})}function M(){var e=(0,f.useEditor)(),t=(0,f.useValue)("any shapes",(function(){return e.getCurrentPageShapeIds().size>0}),[e]);return(0,l.jsx)(m.TldrawUiMenuActionItem,{actionId:"unlock-all",disabled:!t})}function A(){var e=(0,f.useEditor)(),t=(0,f.useValue)("zoomed to 100",(function(){return 1===e.getZoomLevel()}),[e]);return(0,l.jsx)(m.TldrawUiMenuActionItem,{actionId:"zoom-to-100",noClose:!0,disabled:t})}function D(){var e=(0,f.useEditor)(),t=(0,f.useValue)("has shapes",(function(){return e.getCurrentPageShapeIds().size>0}),[e]);return(0,l.jsx)(m.TldrawUiMenuActionItem,{actionId:"zoom-to-fit",disabled:!t,"data-testid":"minimap.zoom-menu.zoom-to-fit",noClose:!0})}function R(){var e=(0,f.useEditor)(),t=(0,f.useValue)("has shapes",(function(){return e.getSelectedShapeIds().length>0}),[e]);return(0,l.jsx)(m.TldrawUiMenuActionItem,{actionId:"zoom-to-selection",disabled:!t,"data-testid":"minimap.zoom-menu.zoom-to-selection",noClose:!0})}function N(){return(0,l.jsxs)(b.TldrawUiMenuGroup,{id:"clipboard",children:[(0,l.jsx)(U,{}),(0,l.jsx)(F,{}),(0,l.jsx)(B,{}),(0,l.jsx)(O,{}),(0,l.jsx)(H,{})]})}function L(){var e,t=(0,f.useEditor)(),n=(0,f.useValue)("atLeastOneShapeOnPage",(function(){return t.getCurrentPageShapeIds().size>0}),[t]);return(0,l.jsxs)(S.TldrawUiMenuSubmenu,{id:"copy-as",label:"context-menu.copy-as",size:"small",disabled:!n,children:[(0,l.jsxs)(b.TldrawUiMenuGroup,{id:"copy-as-group",children:[(0,l.jsx)(m.TldrawUiMenuActionItem,{actionId:"copy-as-svg"}),Boolean(null===(e=window.navigator.clipboard)||void 0===e?void 0:e.write)&&(0,l.jsx)(m.TldrawUiMenuActionItem,{actionId:"copy-as-png"}),(0,l.jsx)(m.TldrawUiMenuActionItem,{actionId:"copy-as-json"})]}),(0,l.jsx)(b.TldrawUiMenuGroup,{id:"copy-as-bg",children:(0,l.jsx)(C,{})})]})}function U(){var e=(0,h.useUnlockedSelectedShapesCount)(1);return(0,l.jsx)(m.TldrawUiMenuActionItem,{actionId:"cut",disabled:!e})}function F(){var e=(0,h.useAnySelectedShapesCount)(1);return(0,l.jsx)(m.TldrawUiMenuActionItem,{actionId:"copy",disabled:!e})}function B(){var e=h.showMenuPaste;return(0,l.jsx)(m.TldrawUiMenuActionItem,{actionId:"paste",disabled:!e})}function V(){var e=(0,f.useEditor)();return(0,f.useValue)("atLeastOneShapeOnPage",(function(){return e.getCurrentPageShapeIds().size>0}),[e])?(0,l.jsxs)(b.TldrawUiMenuGroup,{id:"conversions",children:[(0,l.jsx)(L,{}),(0,l.jsxs)(S.TldrawUiMenuSubmenu,{id:"export-as",label:"context-menu.export-as",size:"small",children:[(0,l.jsxs)(b.TldrawUiMenuGroup,{id:"export-as-group",children:[(0,l.jsx)(m.TldrawUiMenuActionItem,{actionId:"export-as-svg"}),(0,l.jsx)(m.TldrawUiMenuActionItem,{actionId:"export-as-png"}),(0,l.jsx)(m.TldrawUiMenuActionItem,{actionId:"export-as-json"})]}),(0,l.jsx)(b.TldrawUiMenuGroup,{id:"export-as-bg",children:(0,l.jsx)(C,{})})]})]}):null}function z(){var e=(0,f.useEditor)(),t=(0,f.useValue)("atLeastOneShapeOnPage",(function(){return e.getCurrentPageShapeIds().size>0}),[e]);return(0,l.jsx)(m.TldrawUiMenuActionItem,{actionId:"select-all",disabled:!t})}function H(){var e=(0,h.useUnlockedSelectedShapesCount)(1);return(0,l.jsx)(m.TldrawUiMenuActionItem,{actionId:"delete",disabled:!e})}function K(){var e=(0,g.useReadonly)();return(0,h.useAnySelectedShapesCount)(1)?e?null:(0,l.jsxs)(S.TldrawUiMenuSubmenu,{id:"edit",label:"context-menu.edit",size:"small",children:[(0,l.jsx)(_,{}),(0,l.jsx)(j,{}),(0,l.jsx)(k,{}),(0,l.jsx)(P,{}),(0,l.jsx)(T,{}),(0,l.jsx)(I,{}),(0,l.jsx)($,{}),(0,l.jsx)(Z,{}),(0,l.jsx)(x,{}),(0,l.jsx)(E,{})]}):null}function G(){var e=(0,h.useUnlockedSelectedShapesCount)(2),t=(0,h.useOnlyFlippableShape)();return(0,g.useReadonly)()?null:e||t?(0,l.jsxs)(S.TldrawUiMenuSubmenu,{id:"arrange",label:"context-menu.arrange",size:"small",children:[e&&(0,l.jsxs)(b.TldrawUiMenuGroup,{id:"align",children:[(0,l.jsx)(m.TldrawUiMenuActionItem,{actionId:"align-left"}),(0,l.jsx)(m.TldrawUiMenuActionItem,{actionId:"align-center-horizontal"}),(0,l.jsx)(m.TldrawUiMenuActionItem,{actionId:"align-right"}),(0,l.jsx)(m.TldrawUiMenuActionItem,{actionId:"align-top"}),(0,l.jsx)(m.TldrawUiMenuActionItem,{actionId:"align-center-vertical"}),(0,l.jsx)(m.TldrawUiMenuActionItem,{actionId:"align-bottom"})]}),(0,l.jsx)(q,{}),e&&(0,l.jsxs)(b.TldrawUiMenuGroup,{id:"stretch",children:[(0,l.jsx)(m.TldrawUiMenuActionItem,{actionId:"stretch-horizontal"}),(0,l.jsx)(m.TldrawUiMenuActionItem,{actionId:"stretch-vertical"})]}),(e||t)&&(0,l.jsxs)(b.TldrawUiMenuGroup,{id:"flip",children:[(0,l.jsx)(m.TldrawUiMenuActionItem,{actionId:"flip-horizontal"}),(0,l.jsx)(m.TldrawUiMenuActionItem,{actionId:"flip-vertical"})]}),(0,l.jsx)(W,{})]}):null}function q(){return(0,h.useUnlockedSelectedShapesCount)(3)?(0,l.jsxs)(b.TldrawUiMenuGroup,{id:"distribute",children:[(0,l.jsx)(m.TldrawUiMenuActionItem,{actionId:"distribute-horizontal"}),(0,l.jsx)(m.TldrawUiMenuActionItem,{actionId:"distribute-vertical"})]}):null}function W(){var e=(0,h.useUnlockedSelectedShapesCount)(2),t=(0,h.useThreeStackableItems)();return e?(0,l.jsxs)(b.TldrawUiMenuGroup,{id:"order",children:[(0,l.jsx)(m.TldrawUiMenuActionItem,{actionId:"pack"}),t&&(0,l.jsx)(m.TldrawUiMenuActionItem,{actionId:"stack-horizontal"}),t&&(0,l.jsx)(m.TldrawUiMenuActionItem,{actionId:"stack-vertical"})]}):null}function Y(){var e=(0,g.useReadonly)(),t=(0,h.useUnlockedSelectedShapesCount)(1);return e?null:t?(0,l.jsx)(S.TldrawUiMenuSubmenu,{id:"reorder",label:"context-menu.reorder",size:"small",children:(0,l.jsxs)(b.TldrawUiMenuGroup,{id:"reorder",children:[(0,l.jsx)(m.TldrawUiMenuActionItem,{actionId:"bring-to-front"}),(0,l.jsx)(m.TldrawUiMenuActionItem,{actionId:"bring-forward"}),(0,l.jsx)(m.TldrawUiMenuActionItem,{actionId:"send-backward"}),(0,l.jsx)(m.TldrawUiMenuActionItem,{actionId:"send-to-back"})]})}):null}function X(){var e=(0,f.useEditor)(),t=(0,f.useValue)("pages",(function(){return e.getPages()}),[e]),n=(0,f.useValue)("current page id",(function(){return e.getCurrentPageId()}),[e]),r=(0,p.useToasts)().addToast,o=(0,d.useUiEvents)(),i=(0,g.useReadonly)();return(0,h.useUnlockedSelectedShapesCount)(1)?i?null:(0,l.jsxs)(S.TldrawUiMenuSubmenu,{id:"move-to-page",label:"context-menu.move-to-page",size:"small",children:[(0,l.jsx)(b.TldrawUiMenuGroup,{id:"pages",children:t.map((function(t){return(0,l.jsx)(w.TldrawUiMenuItem,{id:t.id,disabled:n===t.id,label:t.name.length>30?"".concat(t.name.slice(0,30),"\u2026"):t.name,onSelect:function(){e.markHistoryStoppingPoint("move_shapes_to_page"),e.moveShapesToPage(e.getSelectedShapeIds(),t.id);var i=e.getPage(t.id);i&&r({title:"Changed Page",description:"Moved to ".concat(i.name,"."),actions:[{label:"Go Back",type:"primary",onClick:function(){e.markHistoryStoppingPoint("change-page"),e.setCurrentPage(n)}}]}),o("move-to-page",{source:"context-menu"})}},t.id)}))}),(0,l.jsx)(b.TldrawUiMenuGroup,{id:"new-page",children:(0,l.jsx)(m.TldrawUiMenuActionItem,{actionId:"move-to-new-page"})})]}):null}function Z(){var e=(0,f.useEditor)();return(0,f.useValue)("oneEmbedSelected",(function(){var t=e.getOnlySelectedShape();return!!t&&!(!e.isShapeOfType(t,"embed")||!t.props.url||e.isShapeOrAncestorLocked(t))}),[e])?(0,l.jsx)(m.TldrawUiMenuActionItem,{actionId:"convert-to-bookmark"}):null}function $(){var e=(0,f.useEditor)(),t=(0,v.useGetEmbedDefinition)();return(0,f.useValue)("oneEmbeddableBookmarkSelected",(function(){var n=e.getOnlySelectedShape();return!!n&&!(!(e.isShapeOfType(n,"bookmark")&&n.props.url&&t(n.props.url))||e.isShapeOrAncestorLocked(n))}),[e])?(0,l.jsx)(m.TldrawUiMenuActionItem,{actionId:"convert-to-embed"}):null}function Q(){var e=(0,f.useEditor)(),t=(0,f.useValue)("isSnapMode",(function(){return e.user.getIsSnapMode()}),[e]);return(0,l.jsx)(y.TldrawUiMenuActionCheckboxItem,{actionId:"toggle-snap-mode",checked:t})}function J(){var e=(0,f.useEditor)(),t=(0,f.useValue)("isToolLock",(function(){return e.getInstanceState().isToolLocked}),[e]);return(0,l.jsx)(y.TldrawUiMenuActionCheckboxItem,{actionId:"toggle-tool-lock",checked:t})}function ee(){var e=(0,f.useEditor)(),t=(0,f.useValue)("isGridMode",(function(){return e.getInstanceState().isGridMode}),[e]);return(0,l.jsx)(y.TldrawUiMenuActionCheckboxItem,{actionId:"toggle-grid",checked:t})}function te(){var e=(0,f.useEditor)(),t=(0,f.useValue)("isWrapMode",(function(){return e.user.getIsWrapMode()}),[e]);return(0,l.jsx)(y.TldrawUiMenuActionCheckboxItem,{actionId:"toggle-wrap-mode",checked:t})}function ne(){var e=(0,f.useEditor)(),t=(0,f.useValue)("isDarkMode",(function(){return e.user.getIsDarkMode()}),[e]);return(0,l.jsx)(y.TldrawUiMenuActionCheckboxItem,{actionId:"toggle-dark-mode",checked:t})}function re(){var e=(0,f.useEditor)(),t=(0,f.useValue)("isFocusMode",(function(){return e.getInstanceState().isFocusMode}),[e]);return(0,l.jsx)(y.TldrawUiMenuActionCheckboxItem,{actionId:"toggle-focus-mode",checked:t})}function oe(){var e=(0,f.useEditor)(),t=(0,f.useValue)("edgeScrollSpeed",(function(){return e.user.getEdgeScrollSpeed()}),[e]);return(0,l.jsx)(y.TldrawUiMenuActionCheckboxItem,{actionId:"toggle-edge-scrolling",checked:1===t})}function ie(){var e=(0,f.useEditor)(),t=(0,f.useValue)("animationSpeed",(function(){return e.user.getAnimationSpeed()}),[e]);return(0,l.jsx)(y.TldrawUiMenuActionCheckboxItem,{actionId:"toggle-reduce-motion",checked:0===t})}function ae(){var e=(0,f.useEditor)(),t=(0,f.useValue)("isDebugMode",(function(){return e.getInstanceState().isDebugMode}),[e]);return(0,l.jsx)(y.TldrawUiMenuActionCheckboxItem,{actionId:"toggle-debug-mode",checked:t})}function ue(){var e=(0,f.useEditor)(),t=(0,f.useValue)("dynamic resize",(function(){return e.user.getIsDynamicResizeMode()}),[e]);return(0,l.jsx)(y.TldrawUiMenuActionCheckboxItem,{actionId:"toggle-dynamic-size-mode",checked:t})}function se(){var e=(0,f.useEditor)(),t=(0,f.useValue)("paste at cursor",(function(){return e.user.getIsPasteAtCursorMode()}),[e]);return(0,l.jsx)(y.TldrawUiMenuActionCheckboxItem,{actionId:"toggle-paste-at-cursor",checked:t})}function ce(){var e=(0,f.useEditor)(),t=(0,f.useValue)("emptyPage",(function(){return 0===e.getCurrentPageShapeIds().size}),[e]);return(0,l.jsx)(m.TldrawUiMenuActionItem,{actionId:"print",disabled:t})}function le(){var e=(0,f.useEditor)();return(0,f.useValue)("show cursor chat",(function(){return"select"===e.getCurrentToolId()&&!e.getInstanceState().isCoarsePointer}),[e])?(0,l.jsx)(m.TldrawUiMenuActionItem,{actionId:"open-cursor-chat"}):null}},61537:function(e,t,n){"use strict";var r,o=n(12897).default,i=n(91847).default,a=n(50883).default,u=["children","type"],s=Object.create,c=Object.defineProperty,l=Object.getOwnPropertyDescriptor,f=Object.getOwnPropertyNames,d=Object.getPrototypeOf,p=Object.prototype.hasOwnProperty,h=function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,i=a(f(t));try{var u=function(){var i=o.value;p.call(e,i)||i===n||c(e,i,{get:function(){return t[i]},enumerable:!(r=l(t,i))||r.enumerable})};for(i.s();!(o=i.n()).done;)u()}catch(s){i.e(s)}finally{i.f()}}return e},v=function(e,t,n){return n=null!=e?s(d(e)):{},h(!t&&e&&e.__esModule?n:c(n,"default",{value:e,enumerable:!0}),e)},g={};!function(e,t){for(var n in t)c(e,n,{get:t[n],enumerable:!0})}(g,{TldrawUiButton:function(){return b}}),e.exports=(r=g,h(c({},"__esModule",{value:!0}),r));var y=n(44414),m=v(n(48738)),b=v(n(9950)).forwardRef((function(e,t){var n=e.children,r=e.type,a=i(e,u);return(0,y.jsx)("button",o(o({ref:t,type:"button",draggable:!1},a),{},{className:(0,m.default)("tlui-button","tlui-button__".concat(r),a.className),children:n}))}))},51489:function(e,t,n){"use strict";var r,o=n(50883).default,i=Object.defineProperty,a=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,c={};!function(e,t){for(var n in t)i(e,n,{get:t[n],enumerable:!0})}(c,{TldrawUiButtonCheck:function(){return d}}),e.exports=(r=c,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var c,l=o(u(t));try{var f=function(){var o=c.value;s.call(e,o)||o===n||i(e,o,{get:function(){return t[o]},enumerable:!(r=a(t,o))||r.enumerable})};for(l.s();!(c=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(i({},"__esModule",{value:!0}),r));var l=n(44414),f=n(88635);function d(e){var t=e.checked;return(0,l.jsx)(f.TldrawUiIcon,{icon:t?"check":"none",className:"tlui-button__icon",small:!0})}},67880:function(e,t,n){"use strict";var r,o=n(50883).default,i=Object.defineProperty,a=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,c={};!function(e,t){for(var n in t)i(e,n,{get:t[n],enumerable:!0})}(c,{TldrawUiButtonIcon:function(){return d}}),e.exports=(r=c,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var c,l=o(u(t));try{var f=function(){var o=c.value;s.call(e,o)||o===n||i(e,o,{get:function(){return t[o]},enumerable:!(r=a(t,o))||r.enumerable})};for(l.s();!(c=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(i({},"__esModule",{value:!0}),r));var l=n(44414),f=n(88635);function d(e){var t=e.icon,n=e.small,r=e.invertIcon;return(0,l.jsx)(f.TldrawUiIcon,{className:"tlui-button__icon",icon:t,small:n,invertIcon:r})}},95139:function(e,t,n){"use strict";var r,o=n(50883).default,i=Object.defineProperty,a=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,c={};!function(e,t){for(var n in t)i(e,n,{get:t[n],enumerable:!0})}(c,{TldrawUiButtonLabel:function(){return f}}),e.exports=(r=c,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var c,l=o(u(t));try{var f=function(){var o=c.value;s.call(e,o)||o===n||i(e,o,{get:function(){return t[o]},enumerable:!(r=a(t,o))||r.enumerable})};for(l.s();!(c=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(i({},"__esModule",{value:!0}),r));var l=n(44414);function f(e){var t=e.children;return(0,l.jsx)("span",{className:"tlui-button__label",children:t})}},39636:function(e,t,n){"use strict";var r,o=n(50883).default,i=Object.create,a=Object.defineProperty,u=Object.getOwnPropertyDescriptor,s=Object.getOwnPropertyNames,c=Object.getPrototypeOf,l=Object.prototype.hasOwnProperty,f=function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var i,c=o(s(t));try{var f=function(){var o=i.value;l.call(e,o)||o===n||a(e,o,{get:function(){return t[o]},enumerable:!(r=u(t,o))||r.enumerable})};for(c.s();!(i=c.n()).done;)f()}catch(d){c.e(d)}finally{c.f()}}return e},d={};!function(e,t){for(var n in t)a(e,n,{get:t[n],enumerable:!0})}(d,{TldrawUiButtonPicker:function(){return w}}),e.exports=(r=d,f(a({},"__esModule",{value:!0}),r));var p=n(44414),h=n(57777),v=function(e,t,n){return n=null!=e?i(c(e)):{},f(!t&&e&&e.__esModule?n:a(n,"default",{value:e,enumerable:!0}),e)}(n(48738)),g=n(9950),y=n(97410),m=n(61537),b=n(67880),w=(0,g.memo)((function(e){var t=e.uiType,n=e.items,r=e.title,o=e.style,i=e.value,a=e.onValueChange,u=e.onHistoryMark,s=e.theme,c=(0,y.useTranslation)(),l=(0,g.useRef)(!1),f=(0,g.useRef)(null),d=(0,g.useMemo)((function(){var e=function(){l.current=!1,window.removeEventListener("pointerup",e);var t=f.current;t&&["TEXTAREA","INPUT"].includes(t.nodeName)&&t.focus(),f.current=null};return{handleButtonClick:function(e){var t=e.currentTarget.dataset.id;"shared"===i.type&&i.value===t||(null===u||void 0===u||u("point picker item"),a(o,t))},handleButtonPointerDown:function(t){var n=t.currentTarget.dataset.id;null===u||void 0===u||u("point picker item"),a(o,n),l.current=!0,f.current=document.activeElement,window.addEventListener("pointerup",e)},handleButtonPointerEnter:function(e){if(l.current){var t=e.currentTarget.dataset.id;a(o,t)}},handleButtonPointerUp:function(e){var t=e.currentTarget.dataset.id;"shared"===i.type&&i.value===t||a(o,t)}}}),[i,u,a,o]),w=d.handleButtonClick,S=d.handleButtonPointerDown,x=d.handleButtonPointerEnter,P=d.handleButtonPointerUp;return(0,p.jsx)("div",{"data-testid":"style.".concat(t),className:(0,v.default)("tlui-buttons__grid"),children:n.map((function(e){return(0,p.jsx)(m.TldrawUiButton,{type:"icon","data-id":e.value,"data-testid":"style.".concat(t,".").concat(e.value),"aria-label":e.value,"data-state":"shared"===i.type&&i.value===e.value?"hinted":void 0,title:r+" \u2014 "+c("".concat(t,"-style.").concat(e.value)),className:(0,v.default)("tlui-button-grid__button"),style:o===h.DefaultColorStyle?{color:s[e.value].solid}:void 0,onPointerEnter:x,onPointerDown:S,onPointerUp:P,onClick:w,children:(0,p.jsx)(b.TldrawUiButtonIcon,{icon:e.icon})},e.value)}))})}))},52046:function(e,t,n){"use strict";var r,o=n(50883).default,i=Object.create,a=Object.defineProperty,u=Object.getOwnPropertyDescriptor,s=Object.getOwnPropertyNames,c=Object.getPrototypeOf,l=Object.prototype.hasOwnProperty,f=function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var i,c=o(s(t));try{var f=function(){var o=i.value;l.call(e,o)||o===n||a(e,o,{get:function(){return t[o]},enumerable:!(r=u(t,o))||r.enumerable})};for(c.s();!(i=c.n()).done;)f()}catch(d){c.e(d)}finally{c.f()}}return e},d=function(e,t,n){return n=null!=e?i(c(e)):{},f(!t&&e&&e.__esModule?n:a(n,"default",{value:e,enumerable:!0}),e)},p={};!function(e,t){for(var n in t)a(e,n,{get:t[n],enumerable:!0})}(p,{TldrawUiDialogBody:function(){return x},TldrawUiDialogCloseButton:function(){return S},TldrawUiDialogFooter:function(){return P},TldrawUiDialogHeader:function(){return b},TldrawUiDialogTitle:function(){return w}}),e.exports=(r=p,f(a({},"__esModule",{value:!0}),r));var h=n(44414),v=d(n(80318)),g=d(n(48738)),y=n(61537),m=n(67880);function b(e){var t=e.className,n=e.children;return(0,h.jsx)("div",{className:(0,g.default)("tlui-dialog__header",t),children:n})}function w(e){var t=e.className,n=e.children;return(0,h.jsx)(v.DialogTitle,{dir:"ltr",className:(0,g.default)("tlui-dialog__header__title",t),children:n})}function S(){return(0,h.jsx)("div",{className:"tlui-dialog__header__close",children:(0,h.jsx)(v.DialogClose,{"data-testid":"dialog.close",dir:"ltr",asChild:!0,children:(0,h.jsx)(y.TldrawUiButton,{type:"icon","aria-label":"Close",onTouchEnd:function(e){return e.target.click()},children:(0,h.jsx)(m.TldrawUiButtonIcon,{small:!0,icon:"cross-2"})})})})}function x(e){var t=e.className,n=e.children,r=e.style;return(0,h.jsx)("div",{className:(0,g.default)("tlui-dialog__body",t),style:r,children:n})}function P(e){var t=e.className,n=e.children;return(0,h.jsx)("div",{className:(0,g.default)("tlui-dialog__footer",t),children:n})}},80408:function(e,t,n){"use strict";var r,o=n(12897).default,i=n(91847).default,a=n(85715).default,u=n(50883).default,s=["children"],c=["children","onSelect"],l=Object.create,f=Object.defineProperty,d=Object.getOwnPropertyDescriptor,p=Object.getOwnPropertyNames,h=Object.getPrototypeOf,v=Object.prototype.hasOwnProperty,g=function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,i=u(p(t));try{var a=function(){var i=o.value;v.call(e,i)||i===n||f(e,i,{get:function(){return t[i]},enumerable:!(r=d(t,i))||r.enumerable})};for(i.s();!(o=i.n()).done;)a()}catch(s){i.e(s)}finally{i.f()}}return e},y=function(e,t,n){return n=null!=e?l(h(e)):{},g(!t&&e&&e.__esModule?n:f(n,"default",{value:e,enumerable:!0}),e)},m={};!function(e,t){for(var n in t)f(e,n,{get:t[n],enumerable:!0})}(m,{TldrawUiDropdownMenuCheckboxItem:function(){return L},TldrawUiDropdownMenuContent:function(){return E},TldrawUiDropdownMenuGroup:function(){return D},TldrawUiDropdownMenuIndicator:function(){return R},TldrawUiDropdownMenuItem:function(){return N},TldrawUiDropdownMenuRoot:function(){return I},TldrawUiDropdownMenuSub:function(){return C},TldrawUiDropdownMenuSubContent:function(){return A},TldrawUiDropdownMenuSubTrigger:function(){return M},TldrawUiDropdownMenuTrigger:function(){return T}}),e.exports=(r=m,g(f({},"__esModule",{value:!0}),r));var b=n(44414),w=y(n(95549)),S=n(57777),x=y(n(48738)),P=n(80459),O=n(61537),k=n(67880),_=n(95139),j=n(88635);function I(e){var t=e.id,n=e.children,r=e.modal,o=void 0!==r&&r,i=e.debugOpen,u=void 0!==i&&i,s=(0,P.useMenuIsOpen)(t),c=a(s,2),l=c[0],f=c[1];return(0,b.jsx)(w.Root,{open:u||l,dir:"ltr",modal:o,onOpenChange:f,children:n})}function T(e){var t=e.children,n=i(e,s);return(0,b.jsx)(w.Trigger,o(o({dir:"ltr",asChild:!0,onTouchEnd:function(e){return(0,S.preventDefault)(e)}},n),{},{children:t}))}function E(e){var t=e.className,n=e.side,r=void 0===n?"bottom":n,o=e.align,i=void 0===o?"start":o,a=e.sideOffset,u=void 0===a?8:a,s=e.alignOffset,c=void 0===s?8:s,l=e.children,f=(0,S.useContainer)();return(0,b.jsx)(w.Portal,{container:f,children:(0,b.jsx)(w.Content,{className:(0,x.default)("tlui-menu",t),side:r,sideOffset:u,align:i,alignOffset:c,collisionPadding:4,children:l})})}function C(e){var t=e.id,n=e.children,r=(0,P.useMenuIsOpen)(t),o=a(r,2),i=o[0],u=o[1];return(0,b.jsx)(w.Sub,{open:i,onOpenChange:u,children:n})}function M(e){var t=e.id,n=e.label,r=e.title,o=e.disabled;return(0,b.jsx)(w.SubTrigger,{dir:"ltr",asChild:!0,disabled:o,children:(0,b.jsxs)(O.TldrawUiButton,{"data-testid":t,type:"menu",className:"tlui-menu__submenu__trigger",disabled:o,title:r,children:[(0,b.jsx)(_.TldrawUiButtonLabel,{children:n}),(0,b.jsx)(k.TldrawUiButtonIcon,{icon:"chevron-right",small:!0})]})})}function A(e){var t=e.id,n=e.alignOffset,r=void 0===n?-1:n,o=e.sideOffset,i=void 0===o?-6:o,a=e.size,u=void 0===a?"small":a,s=e.children,c=(0,S.useContainer)();return(0,b.jsx)(w.Portal,{container:c,children:(0,b.jsx)(w.SubContent,{"data-testid":t,className:"tlui-menu tlui-menu__submenu__content",alignOffset:r,sideOffset:i,collisionPadding:4,"data-size":u,children:s})})}function D(e){var t=e.children;return(0,b.jsx)(w.Group,{dir:"ltr",className:"tlui-menu__group",children:t})}function R(){return(0,b.jsx)(w.ItemIndicator,{dir:"ltr",asChild:!0,children:(0,b.jsx)(j.TldrawUiIcon,{icon:"check"})})}function N(e){var t=e.noClose,n=e.children;return(0,b.jsx)(w.Item,{dir:"ltr",asChild:!0,onClick:t?S.preventDefault:void 0,children:n})}function L(e){var t=e.children,n=e.onSelect,r=i(e,c);return(0,b.jsxs)(w.CheckboxItem,o(o({dir:"ltr",className:"tlui-button tlui-button__menu tlui-button__checkbox",onSelect:function(e){null===n||void 0===n||n(e),(0,S.preventDefault)(e)}},r),{},{children:[(0,b.jsx)("div",{className:"tlui-button__checkbox__indicator",children:(0,b.jsx)(w.ItemIndicator,{dir:"ltr",children:(0,b.jsx)(j.TldrawUiIcon,{icon:"check",small:!0})})}),t]}))}},88635:function(e,t,n){"use strict";var r,o=n(12897).default,i=n(91847).default,a=n(50883).default,u=["small","invertIcon","icon","color","className"],s=Object.create,c=Object.defineProperty,l=Object.getOwnPropertyDescriptor,f=Object.getOwnPropertyNames,d=Object.getPrototypeOf,p=Object.prototype.hasOwnProperty,h=function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,i=a(f(t));try{var u=function(){var i=o.value;p.call(e,i)||i===n||c(e,i,{get:function(){return t[i]},enumerable:!(r=l(t,i))||r.enumerable})};for(i.s();!(o=i.n()).done;)u()}catch(s){i.e(s)}finally{i.f()}}return e},v={};!function(e,t){for(var n in t)c(e,n,{get:t[n],enumerable:!0})}(v,{TldrawUiIcon:function(){return w}}),e.exports=(r=v,h(c({},"__esModule",{value:!0}),r));var g=n(44414),y=function(e,t,n){return n=null!=e?s(d(e)):{},h(!t&&e&&e.__esModule?n:c(n,"default",{value:e,enumerable:!0}),e)}(n(48738)),m=n(9950),b=n(39247),w=(0,m.memo)((function(e){var t,n=e.small,r=e.invertIcon,a=e.icon,s=e.color,c=e.className,l=i(e,u),f=(0,b.useAssetUrls)(),d=null!==(t=f.icons[a])&&void 0!==t?t:f.icons["question-mark-circle"],p=(0,m.useRef)(null);return(0,m.useLayoutEffect)((function(){d||console.error("Icon not found: ".concat(a,". Add it to the assetUrls.icons object.")),null!==p&&void 0!==p&&p.current&&(p.current.style.webkitMask="url(".concat(d,") center 100% / 100% no-repeat"))}),[p,d,a]),"none"===a?(0,g.jsx)("div",{className:(0,y.default)("tlui-icon tlui-icon__placeholder",{"tlui-icon__small":n},c)}):(0,g.jsx)("div",o(o({},l),{},{ref:p,className:(0,y.default)("tlui-icon",{"tlui-icon__small":n},c),style:{color:s,mask:"url(".concat(d,") center 100% / 100% no-repeat"),transform:r?"scale(-1, 1)":void 0}}))}))},98220:function(e,t,n){"use strict";var r,o=n(85715).default,i=n(50883).default,a=Object.create,u=Object.defineProperty,s=Object.getOwnPropertyDescriptor,c=Object.getOwnPropertyNames,l=Object.getPrototypeOf,f=Object.prototype.hasOwnProperty,d=function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,a=i(c(t));try{var l=function(){var i=o.value;f.call(e,i)||i===n||u(e,i,{get:function(){return t[i]},enumerable:!(r=s(t,i))||r.enumerable})};for(a.s();!(o=a.n()).done;)l()}catch(d){a.e(d)}finally{a.f()}}return e},p=function(e,t,n){return n=null!=e?a(l(e)):{},d(!t&&e&&e.__esModule?n:u(n,"default",{value:e,enumerable:!0}),e)},h={};!function(e,t){for(var n in t)u(e,n,{get:t[n],enumerable:!0})}(h,{TldrawUiInput:function(){return S}}),e.exports=(r=h,d(u({},"__esModule",{value:!0}),r));var v=n(44414),g=n(57777),y=p(n(48738)),m=p(n(9950)),b=n(97410),w=n(88635),S=m.forwardRef((function(e,t){var n=e.className,r=e.label,i=e.icon,a=e.iconLeft,u=e.autoSelect,s=void 0!==u&&u,c=e.autoFocus,l=void 0!==c&&c,f=e.defaultValue,d=e.placeholder,p=e.onComplete,h=e.onValueChange,S=e.onCancel,x=e.onFocus,P=e.onBlur,O=e.shouldManuallyMaintainScrollPositionWhenFocused,k=void 0!==O&&O,_=e.children,j=e.value,I=(0,g.useMaybeEditor)(),T=m.useRef(null);m.useImperativeHandle(t,(function(){return T.current}));var E=(0,b.useTranslation)(),C=m.useRef(null!==f&&void 0!==f?f:""),M=m.useRef(null!==f&&void 0!==f?f:""),A=m.useState(!1),D=o(A,2),R=D[0],N=D[1],L=m.useCallback((function(e){N(!0);var t=e.currentTarget;M.current=t.value,I?I.timers.requestAnimationFrame((function(){s&&t.select()})):g.tltime.requestAnimationFrame("anon",(function(){s&&t.select()})),null===x||void 0===x||x()}),[s,I,x]),U=m.useCallback((function(e){var t=e.currentTarget.value;M.current=t,null===h||void 0===h||h(t)}),[h]),F=m.useCallback((function(e){switch(e.key){case"Enter":e.currentTarget.blur(),(0,g.stopEventPropagation)(e),null===p||void 0===p||p(e.currentTarget.value);break;case"Escape":e.currentTarget.value=C.current,null===S||void 0===S||S(e.currentTarget.value),e.currentTarget.blur(),(0,g.stopEventPropagation)(e)}}),[p,S]),B=m.useCallback((function(e){N(!1);var t=e.currentTarget.value;null===P||void 0===P||P(t)}),[P]);return m.useEffect((function(){if(g.tlenv.isIos){var e=window.visualViewport;if(R&&k&&e){var t=function(){var e;null===(e=T.current)||void 0===e||e.scrollIntoView({block:"center"})};return e.addEventListener("resize",t),e.addEventListener("scroll",t),I?I.timers.requestAnimationFrame((function(){var e;null===(e=T.current)||void 0===e||e.scrollIntoView({block:"center"})})):g.tltime.requestAnimationFrame("anon",(function(){var e;null===(e=T.current)||void 0===e||e.scrollIntoView({block:"center"})})),function(){e.removeEventListener("resize",t),e.removeEventListener("scroll",t)}}}}),[R,I,k]),(0,v.jsxs)("div",{draggable:!1,className:"tlui-input__wrapper",children:[_,r&&(0,v.jsx)("label",{children:E(r)}),a&&(0,v.jsx)(w.TldrawUiIcon,{icon:a,className:"tlui-icon-left",small:!0}),(0,v.jsx)("input",{ref:T,className:(0,y.default)("tlui-input",n),type:"text",defaultValue:f,onKeyDownCapture:F,onChange:U,onFocus:L,onBlur:B,autoFocus:l,placeholder:d,value:j}),i&&(0,v.jsx)(w.TldrawUiIcon,{icon:i,small:!!r})]})}))},88375:function(e,t,n){"use strict";var r,o=n(50883).default,i=Object.defineProperty,a=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,c={};!function(e,t){for(var n in t)i(e,n,{get:t[n],enumerable:!0})}(c,{TldrawUiKbd:function(){return h}}),e.exports=(r=c,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var c,l=o(u(t));try{var f=function(){var o=c.value;s.call(e,o)||o===n||i(e,o,{get:function(){return t[o]},enumerable:!(r=a(t,o))||r.enumerable})};for(l.s();!(c=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(i({},"__esModule",{value:!0}),r));var l=n(44414),f=n(12521),d=n(77740),p=n(14591);function h(e){var t=e.children,n=e.visibleOnMobileLayout,r=void 0!==n&&n,o=(0,d.useBreakpoint)();return!r&&o<f.PORTRAIT_BREAKPOINT.MOBILE?null:(0,l.jsx)("kbd",{className:"tlui-kbd",children:(0,p.kbd)(t).map((function(e,t){return(0,l.jsx)("span",{children:e},t)}))})}},36825:function(e,t,n){"use strict";var r,o=n(85715).default,i=n(50883).default,a=Object.create,u=Object.defineProperty,s=Object.getOwnPropertyDescriptor,c=Object.getOwnPropertyNames,l=Object.getPrototypeOf,f=Object.prototype.hasOwnProperty,d=function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,a=i(c(t));try{var l=function(){var i=o.value;f.call(e,i)||i===n||u(e,i,{get:function(){return t[i]},enumerable:!(r=s(t,i))||r.enumerable})};for(a.s();!(o=a.n()).done;)l()}catch(d){a.e(d)}finally{a.f()}}return e},p={};!function(e,t){for(var n in t)u(e,n,{get:t[n],enumerable:!0})}(p,{TldrawUiPopover:function(){return m},TldrawUiPopoverContent:function(){return w},TldrawUiPopoverTrigger:function(){return b}}),e.exports=(r=p,d(u({},"__esModule",{value:!0}),r));var h=n(44414),v=function(e,t,n){return n=null!=e?a(l(e)):{},d(!t&&e&&e.__esModule?n:u(n,"default",{value:e,enumerable:!0}),e)}(n(92263)),g=n(57777),y=n(80459);function m(e){var t=e.id,n=e.children,r=e.onOpenChange,i=e.open,a=(0,y.useMenuIsOpen)(t,r),u=o(a,2),s=u[0],c=u[1];return(0,h.jsx)(v.Root,{onOpenChange:c,open:i||s,children:(0,h.jsx)("div",{className:"tlui-popover",children:n})})}function b(e){var t=e.children;return(0,h.jsx)(v.Trigger,{asChild:!0,dir:"ltr",children:t})}function w(e){var t=e.side,n=e.children,r=e.align,o=void 0===r?"center":r,i=e.sideOffset,a=void 0===i?8:i,u=e.alignOffset,s=void 0===u?0:u,c=e.disableEscapeKeyDown,l=void 0!==c&&c,f=(0,g.useContainer)();return(0,h.jsx)(v.Portal,{container:f,children:(0,h.jsx)(v.Content,{className:"tlui-popover__content",side:t,sideOffset:a,align:o,alignOffset:s,dir:"ltr",onEscapeKeyDown:function(e){return l&&e.preventDefault()},children:n})})}},50559:function(e,t,n){"use strict";var r,o=n(50883).default,i=Object.defineProperty,a=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,c={};!function(e,t){for(var n in t)i(e,n,{get:t[n],enumerable:!0})}(c,{TldrawUiSlider:function(){return h}}),e.exports=(r=c,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var c,l=o(u(t));try{var f=function(){var o=c.value;s.call(e,o)||o===n||i(e,o,{get:function(){return t[o]},enumerable:!(r=a(t,o))||r.enumerable})};for(l.s();!(c=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(i({},"__esModule",{value:!0}),r));var l=n(44414),f=n(46369),d=n(9950),p=n(97410),h=(0,d.memo)((function(e){var t=e.onHistoryMark,n=e.title,r=e.steps,o=e.value,i=e.label,a=e.onValueChange,u=e["data-testid"],s=(0,p.useTranslation)(),c=(0,d.useCallback)((function(e){a(e[0])}),[a]),h=(0,d.useCallback)((function(){t("click slider")}),[t]),v=(0,d.useCallback)((function(){o&&a(o)}),[o,a]);return(0,l.jsx)("div",{className:"tlui-slider__container",children:(0,l.jsxs)(f.Root,{"data-testid":u,className:"tlui-slider","area-label":"Opacity",dir:"ltr",min:0,max:r,step:1,value:o?[o]:void 0,onPointerDown:h,onValueChange:c,onPointerUp:v,title:n+" \u2014 "+s(i),children:[(0,l.jsx)(f.Track,{className:"tlui-slider__track",dir:"ltr",children:null!==o&&(0,l.jsx)(f.Range,{className:"tlui-slider__range",dir:"ltr"})}),null!==o&&(0,l.jsx)(f.Thumb,{className:"tlui-slider__thumb",dir:"ltr"})]})})}))},93740:function(e,t,n){"use strict";var r,o=n(12897).default,i=n(91847).default,a=n(50883).default,u=["actionId"],s=Object.defineProperty,c=Object.getOwnPropertyDescriptor,l=Object.getOwnPropertyNames,f=Object.prototype.hasOwnProperty,d={};!function(e,t){for(var n in t)s(e,n,{get:t[n],enumerable:!0})}(d,{TldrawUiMenuActionCheckboxItem:function(){return g}}),e.exports=(r=d,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,i=a(l(t));try{var u=function(){var i=o.value;f.call(e,i)||i===n||s(e,i,{get:function(){return t[i]},enumerable:!(r=c(t,i))||r.enumerable})};for(i.s();!(o=i.n()).done;)u()}catch(d){i.e(d)}finally{i.f()}}return e}(s({},"__esModule",{value:!0}),r));var p=n(44414),h=n(2491),v=n(98382);function g(e){var t=e.actionId,n=void 0===t?"":t,r=i(e,u),a=(0,h.useActions)()[n];return a?(0,p.jsx)(v.TldrawUiMenuCheckboxItem,o(o({},a),r)):null}},61625:function(e,t,n){"use strict";var r,o=n(12897).default,i=n(91847).default,a=n(50883).default,u=["actionId"],s=Object.defineProperty,c=Object.getOwnPropertyDescriptor,l=Object.getOwnPropertyNames,f=Object.prototype.hasOwnProperty,d={};!function(e,t){for(var n in t)s(e,n,{get:t[n],enumerable:!0})}(d,{TldrawUiMenuActionItem:function(){return g}}),e.exports=(r=d,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,i=a(l(t));try{var u=function(){var i=o.value;f.call(e,i)||i===n||s(e,i,{get:function(){return t[i]},enumerable:!(r=c(t,i))||r.enumerable})};for(i.s();!(o=i.n()).done;)u()}catch(d){i.e(d)}finally{i.f()}}return e}(s({},"__esModule",{value:!0}),r));var p=n(44414),h=n(2491),v=n(95767);function g(e){var t=e.actionId,n=void 0===t?"":t,r=i(e,u),a=(0,h.useActions)()[n];return a?(0,p.jsx)(v.TldrawUiMenuItem,o(o({},a),r)):null}},98382:function(e,t,n){"use strict";var r,o=n(50883).default,i=Object.create,a=Object.defineProperty,u=Object.getOwnPropertyDescriptor,s=Object.getOwnPropertyNames,c=Object.getPrototypeOf,l=Object.prototype.hasOwnProperty,f=function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var i,c=o(s(t));try{var f=function(){var o=i.value;l.call(e,o)||o===n||a(e,o,{get:function(){return t[o]},enumerable:!(r=u(t,o))||r.enumerable})};for(c.s();!(i=c.n()).done;)f()}catch(d){c.e(d)}finally{c.f()}}return e},d=function(e,t,n){return n=null!=e?i(c(e)):{},f(!t&&e&&e.__esModule?n:a(n,"default",{value:e,enumerable:!0}),e)},p={};!function(e,t){for(var n in t)a(e,n,{get:t[n],enumerable:!0})}(p,{TldrawUiMenuCheckboxItem:function(){return O}}),e.exports=(r=p,f(a({},"__esModule",{value:!0}),r));var h=n(44414),v=d(n(37641)),g=d(n(95549)),y=n(57777),m=n(2491),b=n(19098),w=n(97410),S=n(88635),x=n(88375),P=n(70649);function O(e){var t=e.id,n=e.kbd,r=e.label,o=e.readonlyOk,i=e.onSelect,a=e.toggle,u=void 0!==a&&a,s=e.disabled,c=void 0!==s&&s,l=e.checked,f=void 0!==l&&l,d=(0,P.useTldrawUiMenuContext)(),p=d.type,O=d.sourceId,k=(0,b.useReadonly)(),_=(0,w.useTranslation)();if(k&&!o)return null;var j=(0,m.unwrapLabel)(r,p),I=j?_(j):void 0;switch(p){case"menu":return(0,h.jsxs)(g.CheckboxItem,{dir:"ltr",className:"tlui-button tlui-button__menu tlui-button__checkbox",title:I,onSelect:function(e){null===i||void 0===i||i(O),(0,y.preventDefault)(e)},disabled:c,checked:f,children:[(0,h.jsx)(S.TldrawUiIcon,{small:!0,icon:u?f?"toggle-on":"toggle-off":f?"check":"none"}),I&&(0,h.jsx)("span",{className:"tlui-button__label",draggable:!1,children:I}),n&&(0,h.jsx)(x.TldrawUiKbd,{children:n})]});case"context-menu":return(0,h.jsxs)(v.CheckboxItem,{className:"tlui-button tlui-button__menu tlui-button__checkbox",dir:"ltr",title:I,onSelect:function(e){i(O),(0,y.preventDefault)(e)},disabled:c,checked:f,children:[(0,h.jsx)(S.TldrawUiIcon,{small:!0,icon:u?f?"toggle-on":"toggle-off":f?"check":"none"}),I&&(0,h.jsx)("span",{className:"tlui-button__label",draggable:!1,children:I}),n&&(0,h.jsx)(x.TldrawUiKbd,{children:n})]},t);default:return null}}},70649:function(e,t,n){"use strict";var r,o=n(50883).default,i=Object.defineProperty,a=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,c={};!function(e,t){for(var n in t)i(e,n,{get:t[n],enumerable:!0})}(c,{TldrawUiMenuContextProvider:function(){return h},useTldrawUiMenuContext:function(){return p}}),e.exports=(r=c,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var c,l=o(u(t));try{var f=function(){var o=c.value;s.call(e,o)||o===n||i(e,o,{get:function(){return t[o]},enumerable:!(r=a(t,o))||r.enumerable})};for(l.s();!(c=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(i({},"__esModule",{value:!0}),r));var l=n(44414),f=n(9950),d=(0,f.createContext)(null);function p(){var e=(0,f.useContext)(d);if(!e)throw new Error("useTldrawUiMenuContext must be used within a TldrawUiMenuContextProvider");return e}function h(e){var t=e.type,n=e.sourceId,r=e.children;return(0,l.jsx)(d.Provider,{value:{type:t,sourceId:n},children:r})}},60681:function(e,t,n){"use strict";var r,o=n(50883).default,i=Object.defineProperty,a=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,c={};!function(e,t){for(var n in t)i(e,n,{get:t[n],enumerable:!0})}(c,{TldrawUiMenuGroup:function(){return g}}),e.exports=(r=c,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var c,l=o(u(t));try{var f=function(){var o=c.value;s.call(e,o)||o===n||i(e,o,{get:function(){return t[o]},enumerable:!(r=a(t,o))||r.enumerable})};for(l.s();!(c=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(i({},"__esModule",{value:!0}),r));var l=n(44414),f=n(37641),d=n(2491),p=n(97410),h=n(80408),v=n(70649);function g(e){var t=e.id,n=e.label,r=e.children,o=(0,v.useTldrawUiMenuContext)(),i=o.type,a=o.sourceId,u=(0,p.useTranslation)(),s=(0,d.unwrapLabel)(n,i),c=s?u(s):void 0;switch(i){case"panel":return(0,l.jsx)("div",{className:"tlui-menu__group","data-testid":"".concat(a,"-group.").concat(t),children:r});case"menu":return(0,l.jsx)(h.TldrawUiDropdownMenuGroup,{"data-testid":"".concat(a,"-group.").concat(t),children:r});case"context-menu":return(0,l.jsx)(f.ContextMenuGroup,{dir:"ltr",className:"tlui-menu__group","data-testid":"".concat(a,"-group.").concat(t),children:r});case"keyboard-shortcuts":return(0,l.jsxs)("div",{className:"tlui-shortcuts-dialog__group","data-testid":"".concat(a,"-group.").concat(t),children:[(0,l.jsx)("h2",{className:"tlui-shortcuts-dialog__group__title",children:c}),(0,l.jsx)("div",{className:"tlui-shortcuts-dialog__group__content",children:r})]});default:return r}}},95767:function(e,t,n){"use strict";var r,o=n(85715).default,i=n(50883).default,a=Object.defineProperty,u=Object.getOwnPropertyDescriptor,s=Object.getOwnPropertyNames,c=Object.prototype.hasOwnProperty,l={};!function(e,t){for(var n in t)a(e,n,{get:t[n],enumerable:!0})}(l,{TldrawUiMenuItem:function(){return _}}),e.exports=(r=l,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,l=i(s(t));try{var f=function(){var i=o.value;c.call(e,i)||i===n||a(e,i,{get:function(){return t[i]},enumerable:!(r=u(t,i))||r.enumerable})};for(l.s();!(o=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(a({},"__esModule",{value:!0}),r));var f=n(44414),d=n(37641),p=n(57777),h=n(9950),v=n(2491),g=n(19098),y=n(97410),m=n(14591),b=n(93268),w=n(61537),S=n(67880),x=n(95139),P=n(80408),O=n(88375),k=n(70649);function _(e){var t=e.disabled,n=void 0!==t&&t,r=e.spinner,i=void 0!==r&&r,a=e.readonlyOk,u=void 0!==a&&a,s=e.id,c=e.kbd,l=e.label,_=e.icon,j=e.onSelect,I=e.noClose,T=e.isSelected,E=(0,k.useTldrawUiMenuContext)(),C=E.type,M=E.sourceId,A=(0,y.useTranslation)(),D=(0,h.useState)(!1),R=o(D,2),N=R[0],L=R[1];if((0,g.useReadonly)()&&!u)return null;var U=(0,v.unwrapLabel)(l,C),F=c?(0,m.kbdStr)(c):void 0,B=U?A(U):void 0,V=B&&F?"".concat(B," ").concat(F):B;switch(C){case"menu":return(0,f.jsx)(P.TldrawUiDropdownMenuItem,{children:(0,f.jsxs)(w.TldrawUiButton,{type:"menu","data-testid":"".concat(M,".").concat(s),disabled:n,title:V,onClick:function(e){I&&(0,p.preventDefault)(e),N?L(!1):j(M)},children:[(0,f.jsx)(x.TldrawUiButtonLabel,{children:B}),c&&(0,f.jsx)(O.TldrawUiKbd,{children:c})]})});case"context-menu":return n?null:(0,f.jsxs)(d.ContextMenuItem,{dir:"ltr",title:V,draggable:!1,className:"tlui-button tlui-button__menu","data-testid":"".concat(M,".").concat(s),onSelect:function(e){I&&(0,p.preventDefault)(e),N?L(!1):j(M)},children:[(0,f.jsx)("span",{className:"tlui-button__label",draggable:!1,children:B}),c&&(0,f.jsx)(O.TldrawUiKbd,{children:c}),i&&(0,f.jsx)(b.Spinner,{})]});case"panel":return(0,f.jsxs)(w.TldrawUiButton,{"data-testid":"".concat(M,".").concat(s),type:"menu",title:V,disabled:n,onClick:function(){return j(M)},children:[(0,f.jsx)(x.TldrawUiButtonLabel,{children:B}),i?(0,f.jsx)(b.Spinner,{}):_&&(0,f.jsx)(S.TldrawUiButtonIcon,{icon:_})]});case"small-icons":case"icons":return(0,f.jsx)(w.TldrawUiButton,{"data-testid":"".concat(M,".").concat(s),type:"icon",title:V,disabled:n,onClick:function(){return j(M)},children:(0,f.jsx)(S.TldrawUiButtonIcon,{icon:_,small:"small-icons"===C})});case"keyboard-shortcuts":return c?(0,f.jsxs)("div",{className:"tlui-shortcuts-dialog__key-pair","data-testid":"".concat(M,".").concat(s),children:[(0,f.jsx)("div",{className:"tlui-shortcuts-dialog__key-pair__key",children:B}),(0,f.jsx)("div",{className:"tlui-shortcuts-dialog__key-pair__value",children:(0,f.jsx)(O.TldrawUiKbd,{visibleOnMobileLayout:!0,children:c})})]}):(console.warn("Menu item '".concat(l,"' isn't shown in the keyboard shortcuts dialog because it doesn't have a keyboard shortcut.")),null);case"helper-buttons":return(0,f.jsxs)(w.TldrawUiButton,{type:"low",onClick:function(){return j(M)},children:[(0,f.jsx)(S.TldrawUiButtonIcon,{icon:_}),(0,f.jsx)(x.TldrawUiButtonLabel,{children:B})]});case"toolbar":return(0,f.jsx)(w.TldrawUiButton,{type:"tool","data-testid":"tools.".concat(s),"aria-label":U,"data-value":s,onClick:function(){return j("toolbar")},title:V,disabled:n,onTouchStart:function(e){(0,p.preventDefault)(e),j("toolbar")},role:"radio","aria-checked":T?"true":"false",children:(0,f.jsx)(S.TldrawUiButtonIcon,{icon:_})});case"toolbar-overflow":return(0,f.jsx)(P.TldrawUiDropdownMenuItem,{"aria-label":l,children:(0,f.jsx)(w.TldrawUiButton,{type:"icon",className:"tlui-button-grid__button",onClick:function(){j("toolbar")},"data-testid":"tools.more.".concat(s),title:V,disabled:n,role:"radio","aria-checked":T?"true":"false","data-value":s,children:(0,f.jsx)(S.TldrawUiButtonIcon,{icon:_})})});default:throw(0,p.exhaustiveSwitchError)(C)}}},12947:function(e,t,n){"use strict";var r,o=n(85715).default,i=n(50883).default,a=Object.defineProperty,u=Object.getOwnPropertyDescriptor,s=Object.getOwnPropertyNames,c=Object.prototype.hasOwnProperty,l={};!function(e,t){for(var n in t)a(e,n,{get:t[n],enumerable:!0})}(l,{ContextMenuSubWithMenu:function(){return x},TldrawUiMenuSubmenu:function(){return S}}),e.exports=(r=l,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,l=i(s(t));try{var f=function(){var i=o.value;c.call(e,i)||i===n||a(e,i,{get:function(){return t[i]},enumerable:!(r=u(t,i))||r.enumerable})};for(l.s();!(o=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(a({},"__esModule",{value:!0}),r));var f=n(44414),d=n(37641),p=n(57777),h=n(80459),v=n(97410),g=n(61537),y=n(67880),m=n(95139),b=n(80408),w=n(70649);function S(e){var t,n=e.id,r=e.disabled,o=void 0!==r&&r,i=e.label,a=e.size,u=void 0===a?"small":a,s=e.children,c=(0,w.useTldrawUiMenuContext)(),l=c.type,h=c.sourceId,S=(0,p.useContainer)(),P=(0,v.useTranslation)(),O=i?"string"===typeof i?i:null!==(t=i[l])&&void 0!==t?t:i.default:void 0,k=O?P(O):void 0;switch(l){case"menu":return(0,f.jsxs)(b.TldrawUiDropdownMenuSub,{id:"".concat(h,"-sub.").concat(n),children:[(0,f.jsx)(b.TldrawUiDropdownMenuSubTrigger,{id:"".concat(h,"-sub.").concat(n,"-button"),disabled:o,label:k,title:k}),(0,f.jsx)(b.TldrawUiDropdownMenuSubContent,{id:"".concat(h,"-sub.").concat(n,"-content"),size:u,children:s})]});case"context-menu":return o?null:(0,f.jsxs)(x,{id:"".concat(h,"-sub.").concat(n),children:[(0,f.jsx)(d.ContextMenuSubTrigger,{dir:"ltr",disabled:o,asChild:!0,children:(0,f.jsxs)(g.TldrawUiButton,{"data-testid":"".concat(h,"-sub.").concat(n,"-button"),type:"menu",className:"tlui-menu__submenu__trigger",children:[(0,f.jsx)(m.TldrawUiButtonLabel,{children:k}),(0,f.jsx)(y.TldrawUiButtonIcon,{icon:"chevron-right",small:!0})]})}),(0,f.jsx)(d.ContextMenuPortal,{container:S,children:(0,f.jsx)(d.ContextMenuSubContent,{"data-testid":"".concat(h,"-sub.").concat(n,"-content"),className:"tlui-menu tlui-menu__submenu__content",alignOffset:-1,sideOffset:-4,collisionPadding:4,"data-size":u,children:s})})]});default:return s}}function x(e){var t=e.id,n=e.children,r=(0,h.useMenuIsOpen)(t),i=o(r,2),a=i[0],u=i[1];return(0,f.jsx)(d.ContextMenuSub,{open:a,onOpenChange:u,children:n})}},25797:function(e,t,n){"use strict";var r,o=n(12897).default,i=n(91847).default,a=n(50883).default,u=["toolId"],s=Object.defineProperty,c=Object.getOwnPropertyDescriptor,l=Object.getOwnPropertyNames,f=Object.prototype.hasOwnProperty,d={};!function(e,t){for(var n in t)s(e,n,{get:t[n],enumerable:!0})}(d,{TldrawUiMenuToolItem:function(){return g}}),e.exports=(r=d,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,i=a(l(t));try{var u=function(){var i=o.value;f.call(e,i)||i===n||s(e,i,{get:function(){return t[i]},enumerable:!(r=c(t,i))||r.enumerable})};for(i.s();!(o=i.n()).done;)u()}catch(d){i.e(d)}finally{i.f()}}return e}(s({},"__esModule",{value:!0}),r));var p=n(44414),h=n(48357),v=n(95767);function g(e){var t=e.toolId,n=void 0===t?"":t,r=i(e,u),a=(0,h.useTools)()[n];return a?(0,p.jsx)(v.TldrawUiMenuItem,o(o({},a),r)):null}},12521:function(e,t,n){"use strict";var r,o=n(50883).default,i=Object.defineProperty,a=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,c={};!function(e,t){for(var n in t)i(e,n,{get:t[n],enumerable:!0})}(c,{PORTRAIT_BREAKPOINT:function(){return f},PORTRAIT_BREAKPOINTS:function(){return l}}),e.exports=(r=c,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var c,l=o(u(t));try{var f=function(){var o=c.value;s.call(e,o)||o===n||i(e,o,{get:function(){return t[o]},enumerable:!(r=a(t,o))||r.enumerable})};for(l.s();!(c=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(i({},"__esModule",{value:!0}),r));var l=[0,389,436,476,580,640,840,1023],f=function(e){return e[e.ZERO=0]="ZERO",e[e.MOBILE_XXS=1]="MOBILE_XXS",e[e.MOBILE_XS=2]="MOBILE_XS",e[e.MOBILE_SM=3]="MOBILE_SM",e[e.MOBILE=4]="MOBILE",e[e.TABLET_SM=5]="TABLET_SM",e[e.TABLET=6]="TABLET",e[e.DESKTOP=7]="DESKTOP",e}(f||{})},84630:function(e,t,n){"use strict";var r,o=n(50883).default,i=Object.defineProperty,a=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,c={};!function(e,t){for(var n in t)i(e,n,{get:t[n],enumerable:!0})}(c,{TldrawUiContextProvider:function(){return O}}),e.exports=(r=c,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var c,l=o(u(t));try{var f=function(){var o=c.value;s.call(e,o)||o===n||i(e,o,{get:function(){return t[o]},enumerable:!(r=a(t,o))||r.enumerable})};for(l.s();!(c=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(i({},"__esModule",{value:!0}),r));var l=n(44414),f=n(57777),d=n(43186),p=n(29037),h=n(48357),v=n(97410),g=n(24833),y=n(2491),m=n(39247),b=n(77740),w=n(3594),S=n(49489),x=n(14867),P=n(5450),O=(0,f.track)((function(e){var t,n=e.overrides,r=e.components,o=e.assetUrls,i=e.onUiEvent,a=e.forceMobile,u=e.mediaMimeTypes,s=e.children,c=(0,f.useMaybeEditor)();return(0,l.jsx)(p.MimeTypeContext.Provider,{value:u,children:(0,l.jsx)(m.AssetUrlsProvider,{assetUrls:(0,d.useDefaultUiAssetUrlsWithOverrides)(o),children:(0,l.jsx)(v.TldrawUiTranslationProvider,{overrides:(0,g.useMergedTranslationOverrides)(n),locale:null!==(t=null===c||void 0===c?void 0:c.user.getLocale())&&void 0!==t?t:f.defaultUserPreferences.locale,children:(0,l.jsx)(x.TldrawUiEventsProvider,{onEvent:i,children:(0,l.jsx)(P.TldrawUiToastsProvider,{children:(0,l.jsx)(S.TldrawUiDialogsProvider,{context:null===c||void 0===c?void 0:c.contextId,children:(0,l.jsx)(b.BreakPointProvider,{forceMobile:a,children:(0,l.jsx)(w.TldrawUiComponentsProvider,{overrides:r,children:c?(0,l.jsx)(k,{overrides:n,children:s}):s})})})})})})})})}));function k(e){var t=e.overrides,n=e.children,r=(0,g.useMergedOverrides)(t);return(0,l.jsx)(y.ActionsProvider,{overrides:r.actions,children:(0,l.jsx)(h.ToolsProvider,{overrides:r.tools,children:n})})}},2491:function(e,t,n){"use strict";var r,o=n(4633).default,i=n(29293).default,a=n(12897).default,u=n(43693).default,s=n(50883).default,c=Object.create,l=Object.defineProperty,f=Object.getOwnPropertyDescriptor,d=Object.getOwnPropertyNames,p=Object.getPrototypeOf,h=Object.prototype.hasOwnProperty,v=function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,i=s(d(t));try{var a=function(){var i=o.value;h.call(e,i)||i===n||l(e,i,{get:function(){return t[i]},enumerable:!(r=f(t,i))||r.enumerable})};for(i.s();!(o=i.n()).done;)a()}catch(u){i.e(u)}finally{i.f()}}return e},g={};!function(e,t){for(var n in t)l(e,n,{get:t[n],enumerable:!0})}(g,{ActionsContext:function(){return I},ActionsProvider:function(){return E},unwrapLabel:function(){return M},useActions:function(){return C}}),e.exports=(r=g,v(l({},"__esModule",{value:!0}),r));var y=n(44414),m=n(57777),b=function(e,t,n){return n=null!=e?c(p(e)):{},v(!t&&e&&e.__esModule?n:l(n,"default",{value:e,enumerable:!0}),e)}(n(9950)),w=n(23813),S=n(30750),x=n(31957),P=n(16036),O=n(5184),k=n(37454),_=n(24833),j=n(14867),I=b.createContext(null);function T(e,t){if(0===e.getSelectedShapes().length)return e.getDocumentSettings().name||t}function E(e){var t=e.overrides,n=e.children,r=(0,m.useEditor)(),c=(0,k.useShowCollaborationUi)(),l=(0,_.useDefaultHelpers)(),f=(0,j.useUiEvents)(),d=l.msg("document.default-name"),p=b.useMemo((function(){function e(){return r.isIn("select")||(r.complete(),r.setCurrentTool("select")),!1}function n(){return r.isIn("select")&&r.getSelectedShapeIds().length>0}var p=[{id:"edit-link",label:"action.edit-link",icon:"link",onSelect:function(t){n()&&(e()||(f("edit-link",{source:t}),r.markHistoryStoppingPoint("edit-link"),l.addDialog({component:x.EditLinkDialog})))}},{id:"insert-embed",label:"action.insert-embed",kbd:"$i",onSelect:function(e){f("insert-embed",{source:e}),l.addDialog({component:P.EmbedDialog})}},{id:"insert-media",label:"action.insert-media",kbd:"$u",onSelect:function(e){f("insert-media",{source:e}),l.insertMedia()}},{id:"undo",label:"action.undo",icon:"undo",kbd:"$z",onSelect:function(e){f("undo",{source:e}),r.undo()}},{id:"redo",label:"action.redo",icon:"redo",kbd:"$!z",onSelect:function(e){f("redo",{source:e}),r.redo()}},{id:"export-as-svg",label:u({default:"action.export-as-svg",menu:"action.export-as-svg.short"},"context-menu","action.export-as-svg.short"),readonlyOk:!0,onSelect:function(e){var t=r.getSelectedShapeIds();0===t.length&&(t=Array.from(r.getCurrentPageShapeIds().values())),0!==t.length&&(f("export-as",{format:"svg",source:e}),l.exportAs(t,"svg",T(r,d)))}},{id:"export-as-png",label:u({default:"action.export-as-png",menu:"action.export-as-png.short"},"context-menu","action.export-as-png.short"),readonlyOk:!0,onSelect:function(e){var t=r.getSelectedShapeIds();0===t.length&&(t=Array.from(r.getCurrentPageShapeIds().values())),0!==t.length&&(f("export-as",{format:"png",source:e}),l.exportAs(t,"png",T(r,d)))}},{id:"export-as-json",label:u({default:"action.export-as-json",menu:"action.export-as-json.short"},"context-menu","action.export-as-json.short"),readonlyOk:!0,onSelect:function(e){var t=r.getSelectedShapeIds();0===t.length&&(t=Array.from(r.getCurrentPageShapeIds().values())),0!==t.length&&(f("export-as",{format:"json",source:e}),l.exportAs(t,"json",T(r,d)))}},{id:"export-all-as-svg",label:u({default:"action.export-all-as-svg",menu:"action.export-all-as-svg.short"},"context-menu","action.export-all-as-svg.short"),readonlyOk:!0,onSelect:function(e){var t=r.getSelectedShapeIds();0===t.length&&(t=Array.from(r.getCurrentPageShapeIds().values())),0!==t.length&&(f("export-all-as",{format:"svg",source:e}),l.exportAs(Array.from(r.getCurrentPageShapeIds()),"svg",T(r,d)))}},{id:"export-all-as-png",label:u({default:"action.export-all-as-png",menu:"action.export-all-as-png.short"},"context-menu","action.export-all-as-png.short"),readonlyOk:!0,onSelect:function(e){var t=Array.from(r.getCurrentPageShapeIds().values());0!==t.length&&(f("export-all-as",{format:"png",source:e}),l.exportAs(t,"png",T(r,d)))}},{id:"export-all-as-json",label:u({default:"action.export-all-as-json",menu:"action.export-all-as-json.short"},"context-menu","action.export-all-as-json.short"),readonlyOk:!0,onSelect:function(e){var t=Array.from(r.getCurrentPageShapeIds().values());0!==t.length&&(f("export-all-as",{format:"json",source:e}),l.exportAs(t,"json",T(r,d)))}},{id:"copy-as-svg",label:u({default:"action.copy-as-svg",menu:"action.copy-as-svg.short"},"context-menu","action.copy-as-svg.short"),kbd:"$!c",readonlyOk:!0,onSelect:function(e){var t=r.getSelectedShapeIds();0===t.length&&(t=Array.from(r.getCurrentPageShapeIds().values())),0!==t.length&&(f("copy-as",{format:"svg",source:e}),l.copyAs(t,"svg"))}},{id:"copy-as-png",label:u({default:"action.copy-as-png",menu:"action.copy-as-png.short"},"context-menu","action.copy-as-png.short"),readonlyOk:!0,onSelect:function(e){var t=r.getSelectedShapeIds();0===t.length&&(t=Array.from(r.getCurrentPageShapeIds().values())),0!==t.length&&(f("copy-as",{format:"png",source:e}),l.copyAs(t,"png"))}},{id:"copy-as-json",label:u({default:"action.copy-as-json",menu:"action.copy-as-json.short"},"context-menu","action.copy-as-json.short"),readonlyOk:!0,onSelect:function(e){var t=r.getSelectedShapeIds();0===t.length&&(t=Array.from(r.getCurrentPageShapeIds().values())),0!==t.length&&(f("copy-as",{format:"json",source:e}),l.copyAs(t,"json"))}},{id:"toggle-auto-size",label:"action.toggle-auto-size",onSelect:function(t){if(n()&&!e()){f("toggle-auto-size",{source:t}),r.markHistoryStoppingPoint("toggling auto size");var o=r.getSelectedShapes().filter((function(e){return r.isShapeOfType(e,"text")&&!1===e.props.autoSize}));r.updateShapes(o.map((function(e){return{id:e.id,type:e.type,props:a(a({},e.props),{},{w:8,autoSize:!0})}}))),(0,w.kickoutOccludedShapes)(r,o.map((function(e){return e.id})))}}},{id:"open-embed-link",label:"action.open-embed-link",readonlyOk:!0,onSelect:function(e){f("open-embed-link",{source:e});var t=r.getSelectedShapeIds(),n="No embed shapes selected";if(1===t.length){var o=r.getShape(t[0]);o&&r.isShapeOfType(o,"embed")?(0,m.openWindow)(o.props.url,"_blank"):console.error(n)}else console.error(n)}},{id:"select-zoom-tool",readonlyOk:!0,kbd:"z",onSelect:function(e){var t;if("zoom"!==(null===(t=r.root.getCurrent())||void 0===t?void 0:t.id)&&(f("zoom-tool",{source:e}),!r.inputs.shiftKey&&!r.inputs.ctrlKey)){var n,o=r.root.getCurrent();o&&"idle"===(null===(n=o.getCurrent())||void 0===n?void 0:n.id)&&r.setCurrentTool("zoom",{onInteractionEnd:o.id,maskAs:"zoom"})}}},{id:"convert-to-bookmark",label:"action.convert-to-bookmark",onSelect:function(t){n()&&(e()||r.run((function(){f("convert-to-bookmark",{source:t});var e,n=r.getSelectedShapes(),o=[],i=[],a=s(n);try{for(a.s();!(e=a.n()).done;){var u=e.value;if(u&&r.isShapeOfType(u,"embed")&&u.props.url){var c=new m.Vec(u.x,u.y);c.rot(-u.rotation),c.add(new m.Vec(u.props.w/2-150,u.props.h/2-160)),c.rot(u.rotation);var l={id:(0,m.createShapeId)(),type:"bookmark",rotation:u.rotation,x:c.x,y:c.y,opacity:1,props:{url:u.props.url}};o.push(l),i.push(u.id)}}}catch(d){a.e(d)}finally{a.f()}r.markHistoryStoppingPoint("convert shapes to bookmark"),r.deleteShapes(i),r.createShapes(o)})))}},{id:"convert-to-embed",label:"action.convert-to-embed",onSelect:function(t){n()&&(e()||(f("convert-to-embed",{source:t}),r.run((function(){var e,t=r.getSelectedShapeIds(),n=(0,m.compact)(t.map((function(e){return r.getShape(e)}))),o=[],i=[],a=s(n);try{for(a.s();!(e=a.n()).done;){var u=e.value;if(r.isShapeOfType(u,"bookmark")){var c=u.props.url,f=l.getEmbedDefinition(c);if(f&&f.definition){var d=f.definition,p=d.width,h=d.height,v=new m.Vec(u.x,u.y);v.rot(-u.rotation),v.add(new m.Vec(u.props.w/2-p/2,u.props.h/2-h/2)),v.rot(u.rotation);var g={id:(0,m.createShapeId)(),type:"embed",x:v.x,y:v.y,rotation:u.rotation,props:{url:c,w:p,h:h}};o.push(g),i.push(u.id)}}}}catch(y){a.e(y)}finally{a.f()}r.markHistoryStoppingPoint("convert shapes to embed"),r.deleteShapes(i),r.createShapes(o)}))))}},{id:"duplicate",kbd:"$d",label:"action.duplicate",icon:"duplicate",onSelect:function(t){if(n()&&!e()){f("duplicate-shapes",{source:t});var o,i,u=r.getInstanceState();if(u.duplicateProps)o=u.duplicateProps.shapeIds,i=u.duplicateProps.offset;else{o=r.getSelectedShapeIds();var s=m.Box.Common((0,m.compact)(o.map((function(e){return r.getShapePageBounds(e)}))));i=r.getCameraOptions().isLocked?{x:r.options.adjacentShapeMargin,y:r.options.adjacentShapeMargin}:{x:s.width+r.options.adjacentShapeMargin,y:0}}r.markHistoryStoppingPoint("duplicate shapes"),r.duplicateShapes(o,i),u.duplicateProps&&r.updateInstanceState({duplicateProps:a(a({},u.duplicateProps),{},{shapeIds:r.getSelectedShapeIds()})})}}},{id:"ungroup",label:"action.ungroup",kbd:"$!g",icon:"ungroup",onSelect:function(t){n()&&(e()||(f("ungroup-shapes",{source:t}),r.markHistoryStoppingPoint("ungroup"),r.ungroupShapes(r.getSelectedShapeIds())))}},{id:"group",label:"action.group",kbd:"$g",icon:"group",onSelect:function(t){if(n()&&!e()){f("group-shapes",{source:t});var o=r.getOnlySelectedShape();o&&r.isShapeOfType(o,"group")?(r.markHistoryStoppingPoint("ungroup"),r.ungroupShapes(r.getSelectedShapeIds())):(r.markHistoryStoppingPoint("group"),r.groupShapes(r.getSelectedShapeIds()))}}},{id:"remove-frame",label:"action.remove-frame",kbd:"$!f",onSelect:function(e){if(n()){f("remove-frame",{source:e});var t=r.getSelectedShapes();t.length>0&&t.every((function(e){return r.isShapeOfType(e,"frame")}))&&(r.markHistoryStoppingPoint("remove-frame"),(0,S.removeFrame)(r,t.map((function(e){return e.id}))))}}},{id:"fit-frame-to-content",label:"action.fit-frame-to-content",onSelect:function(e){if(n()){f("fit-frame-to-content",{source:e});var t=r.getOnlySelectedShape();t&&r.isShapeOfType(t,"frame")&&(r.markHistoryStoppingPoint("fit-frame-to-content"),(0,S.fitFrameToContent)(r,t.id))}}},{id:"align-left",label:"action.align-left",kbd:"?A",icon:"align-left",onSelect:function(t){if(n()&&!e()){f("align-shapes",{operation:"left",source:t}),r.markHistoryStoppingPoint("align left");var o=r.getSelectedShapeIds();r.alignShapes(o,"left"),(0,w.kickoutOccludedShapes)(r,o)}}},{id:"align-center-horizontal",label:u({default:"action.align-center-horizontal"},"context-menu","action.align-center-horizontal.short"),kbd:"?H",icon:"align-center-horizontal",onSelect:function(t){if(n()&&!e()){f("align-shapes",{operation:"center-horizontal",source:t}),r.markHistoryStoppingPoint("align center horizontal");var o=r.getSelectedShapeIds();r.alignShapes(o,"center-horizontal"),(0,w.kickoutOccludedShapes)(r,o)}}},{id:"align-right",label:"action.align-right",kbd:"?D",icon:"align-right",onSelect:function(t){if(n()&&!e()){f("align-shapes",{operation:"right",source:t}),r.markHistoryStoppingPoint("align right");var o=r.getSelectedShapeIds();r.alignShapes(o,"right"),(0,w.kickoutOccludedShapes)(r,o)}}},{id:"align-center-vertical",label:u({default:"action.align-center-vertical"},"context-menu","action.align-center-vertical.short"),kbd:"?V",icon:"align-center-vertical",onSelect:function(t){if(n()&&!e()){f("align-shapes",{operation:"center-vertical",source:t}),r.markHistoryStoppingPoint("align center vertical");var o=r.getSelectedShapeIds();r.alignShapes(o,"center-vertical"),(0,w.kickoutOccludedShapes)(r,o)}}},{id:"align-top",label:"action.align-top",icon:"align-top",kbd:"?W",onSelect:function(t){if(n()&&!e()){f("align-shapes",{operation:"top",source:t}),r.markHistoryStoppingPoint("align top");var o=r.getSelectedShapeIds();r.alignShapes(o,"top"),(0,w.kickoutOccludedShapes)(r,o)}}},{id:"align-bottom",label:"action.align-bottom",icon:"align-bottom",kbd:"?S",onSelect:function(t){if(n()&&!e()){f("align-shapes",{operation:"bottom",source:t}),r.markHistoryStoppingPoint("align bottom");var o=r.getSelectedShapeIds();r.alignShapes(o,"bottom"),(0,w.kickoutOccludedShapes)(r,o)}}},{id:"distribute-horizontal",label:u({default:"action.distribute-horizontal"},"context-menu","action.distribute-horizontal.short"),icon:"distribute-horizontal",kbd:"?!h",onSelect:function(t){if(n()&&!e()){f("distribute-shapes",{operation:"horizontal",source:t}),r.markHistoryStoppingPoint("distribute horizontal");var o=r.getSelectedShapeIds();r.distributeShapes(o,"horizontal"),(0,w.kickoutOccludedShapes)(r,o)}}},{id:"distribute-vertical",label:u({default:"action.distribute-vertical"},"context-menu","action.distribute-vertical.short"),icon:"distribute-vertical",kbd:"?!V",onSelect:function(t){if(n()&&!e()){f("distribute-shapes",{operation:"vertical",source:t}),r.markHistoryStoppingPoint("distribute vertical");var o=r.getSelectedShapeIds();r.distributeShapes(o,"vertical"),(0,w.kickoutOccludedShapes)(r,o)}}},{id:"stretch-horizontal",label:u({default:"action.stretch-horizontal"},"context-menu","action.stretch-horizontal.short"),icon:"stretch-horizontal",onSelect:function(t){if(n()&&!e()){f("stretch-shapes",{operation:"horizontal",source:t}),r.markHistoryStoppingPoint("stretch horizontal");var o=r.getSelectedShapeIds();r.stretchShapes(o,"horizontal"),(0,w.kickoutOccludedShapes)(r,o)}}},{id:"stretch-vertical",label:u({default:"action.stretch-vertical"},"context-menu","action.stretch-vertical.short"),icon:"stretch-vertical",onSelect:function(t){if(n()&&!e()){f("stretch-shapes",{operation:"vertical",source:t}),r.markHistoryStoppingPoint("stretch vertical");var o=r.getSelectedShapeIds();r.stretchShapes(o,"vertical"),(0,w.kickoutOccludedShapes)(r,o)}}},{id:"flip-horizontal",label:u({default:"action.flip-horizontal"},"context-menu","action.flip-horizontal.short"),kbd:"!h",onSelect:function(t){if(n()&&!e()){f("flip-shapes",{operation:"horizontal",source:t}),r.markHistoryStoppingPoint("flip horizontal");var o=r.getSelectedShapeIds();r.flipShapes(o,"horizontal"),(0,w.kickoutOccludedShapes)(r,o)}}},{id:"flip-vertical",label:u({default:"action.flip-vertical"},"context-menu","action.flip-vertical.short"),kbd:"!v",onSelect:function(t){if(n()&&!e()){f("flip-shapes",{operation:"vertical",source:t}),r.markHistoryStoppingPoint("flip vertical");var o=r.getSelectedShapeIds();r.flipShapes(o,"vertical"),(0,w.kickoutOccludedShapes)(r,o)}}},{id:"pack",label:"action.pack",icon:"pack",onSelect:function(t){if(n()&&!e()){f("pack-shapes",{source:t}),r.markHistoryStoppingPoint("pack");var o=r.getSelectedShapeIds();r.packShapes(o,r.options.adjacentShapeMargin),(0,w.kickoutOccludedShapes)(r,o)}}},{id:"stack-vertical",label:u({default:"action.stack-vertical"},"context-menu","action.stack-vertical.short"),icon:"stack-vertical",onSelect:function(t){if(n()&&!e()){f("stack-shapes",{operation:"vertical",source:t}),r.markHistoryStoppingPoint("stack-vertical");var o=r.getSelectedShapeIds();r.stackShapes(o,"vertical",16),(0,w.kickoutOccludedShapes)(r,o)}}},{id:"stack-horizontal",label:u({default:"action.stack-horizontal"},"context-menu","action.stack-horizontal.short"),icon:"stack-horizontal",onSelect:function(t){if(n()&&!e()){f("stack-shapes",{operation:"horizontal",source:t}),r.markHistoryStoppingPoint("stack-horizontal");var o=r.getSelectedShapeIds();r.stackShapes(o,"horizontal",16),(0,w.kickoutOccludedShapes)(r,o)}}},{id:"bring-to-front",label:"action.bring-to-front",kbd:"]",icon:"bring-to-front",onSelect:function(t){n()&&(e()||(f("reorder-shapes",{operation:"toFront",source:t}),r.markHistoryStoppingPoint("bring to front"),r.bringToFront(r.getSelectedShapeIds())))}},{id:"bring-forward",label:"action.bring-forward",icon:"bring-forward",kbd:"?]",onSelect:function(t){n()&&(e()||(f("reorder-shapes",{operation:"forward",source:t}),r.markHistoryStoppingPoint("bring forward"),r.bringForward(r.getSelectedShapeIds())))}},{id:"send-backward",label:"action.send-backward",icon:"send-backward",kbd:"?[",onSelect:function(t){n()&&(e()||(f("reorder-shapes",{operation:"backward",source:t}),r.markHistoryStoppingPoint("send backward"),r.sendBackward(r.getSelectedShapeIds())))}},{id:"send-to-back",label:"action.send-to-back",icon:"send-to-back",kbd:"[",onSelect:function(t){n()&&(e()||(f("reorder-shapes",{operation:"toBack",source:t}),r.markHistoryStoppingPoint("send to back"),r.sendToBack(r.getSelectedShapeIds())))}},{id:"cut",label:"action.cut",kbd:"$x",onSelect:function(t){n()&&(e()||(r.markHistoryStoppingPoint("cut"),l.cut(t)))}},{id:"copy",label:"action.copy",kbd:"$c",readonlyOk:!0,onSelect:function(t){n()&&(e()||l.copy(t))}},{id:"paste",label:"action.paste",kbd:"$v",onSelect:function(e){var t;null===(t=navigator.clipboard)||void 0===t||t.read().then((function(t){l.paste(t,e,"context-menu"===e?r.inputs.currentPagePoint:void 0)})).catch((function(){l.addToast({title:l.msg("action.paste-error-title"),description:l.msg("action.paste-error-description"),severity:"error"})}))}},{id:"select-all",label:"action.select-all",kbd:"$a",readonlyOk:!0,onSelect:function(t){r.run((function(){e()||(f("select-all-shapes",{source:t}),r.markHistoryStoppingPoint("select all kbd"),r.selectAll())}))}},{id:"select-none",label:"action.select-none",readonlyOk:!0,onSelect:function(t){n()&&(e()||(f("select-none-shapes",{source:t}),r.markHistoryStoppingPoint("select none"),r.selectNone()))}},{id:"delete",label:"action.delete",kbd:"\u232b,del,backspace",icon:"trash",onSelect:function(t){n()&&(e()||(f("delete-shapes",{source:t}),r.markHistoryStoppingPoint("delete"),r.deleteShapes(r.getSelectedShapeIds())))}},{id:"rotate-cw",label:"action.rotate-cw",icon:"rotate-cw",onSelect:function(t){if(n()&&!e()){f("rotate-cw",{source:t}),r.markHistoryStoppingPoint("rotate-cw");var o=r.getSelectionRotation()%(m.HALF_PI/2),i=(0,m.approximately)(o,0)||(0,m.approximately)(o,m.HALF_PI/2),a=r.getSelectedShapeIds();r.rotateShapesBy(a,m.HALF_PI/2-(i?0:o)),(0,w.kickoutOccludedShapes)(r,a)}}},{id:"rotate-ccw",label:"action.rotate-ccw",icon:"rotate-ccw",onSelect:function(t){if(n()&&!e()){f("rotate-ccw",{source:t}),r.markHistoryStoppingPoint("rotate-ccw");var o=r.getSelectionRotation()%(m.HALF_PI/2),i=(0,m.approximately)(o,0),a=r.getSelectedShapeIds();r.rotateShapesBy(a,i?-m.HALF_PI/2:-o),(0,w.kickoutOccludedShapes)(r,a)}}},{id:"zoom-in",label:"action.zoom-in",kbd:"$=,=",readonlyOk:!0,onSelect:function(e){f("zoom-in",{source:e}),r.zoomIn(void 0,{animation:{duration:r.options.animationMediumMs}})}},{id:"zoom-out",label:"action.zoom-out",kbd:"$-,-",readonlyOk:!0,onSelect:function(e){f("zoom-out",{source:e}),r.zoomOut(void 0,{animation:{duration:r.options.animationMediumMs}})}},{id:"zoom-to-100",label:"action.zoom-to-100",icon:"reset-zoom",kbd:"!0",readonlyOk:!0,onSelect:function(e){f("reset-zoom",{source:e}),r.resetZoom(void 0,{animation:{duration:r.options.animationMediumMs}})}},{id:"zoom-to-fit",label:"action.zoom-to-fit",kbd:"!1",readonlyOk:!0,onSelect:function(e){f("zoom-to-fit",{source:e}),r.zoomToFit({animation:{duration:r.options.animationMediumMs}})}},{id:"zoom-to-selection",label:"action.zoom-to-selection",kbd:"!2",readonlyOk:!0,onSelect:function(t){n()&&(e()||(f("zoom-to-selection",{source:t}),r.zoomToSelection({animation:{duration:r.options.animationMediumMs}})))}},{id:"toggle-snap-mode",label:{default:"action.toggle-snap-mode",menu:"action.toggle-snap-mode.menu"},onSelect:function(e){f("toggle-snap-mode",{source:e}),r.user.updateUserPreferences({isSnapMode:!r.user.getIsSnapMode()})},checkbox:!0},{id:"toggle-dark-mode",label:{default:"action.toggle-dark-mode",menu:"action.toggle-dark-mode.menu"},kbd:"$/",readonlyOk:!0,onSelect:function(e){var t=r.user.getIsDarkMode()?"light":"dark";f("color-scheme",{source:e,value:t}),r.user.updateUserPreferences({colorScheme:t})},checkbox:!0},{id:"toggle-wrap-mode",label:{default:"action.toggle-wrap-mode",menu:"action.toggle-wrap-mode.menu"},readonlyOk:!0,onSelect:function(e){f("toggle-wrap-mode",{source:e}),r.user.updateUserPreferences({isWrapMode:!r.user.getIsWrapMode()})},checkbox:!0},{id:"toggle-dynamic-size-mode",label:{default:"action.toggle-dynamic-size-mode",menu:"action.toggle-dynamic-size-mode.menu"},readonlyOk:!1,onSelect:function(e){f("toggle-dynamic-size-mode",{source:e}),r.user.updateUserPreferences({isDynamicSizeMode:!r.user.getIsDynamicResizeMode()})},checkbox:!0},{id:"toggle-paste-at-cursor",label:{default:"action.toggle-paste-at-cursor",menu:"action.toggle-paste-at-cursor.menu"},readonlyOk:!1,onSelect:function(e){f("toggle-paste-at-cursor",{source:e}),r.user.updateUserPreferences({isPasteAtCursorMode:!r.user.getIsPasteAtCursorMode()})},checkbox:!0},{id:"toggle-reduce-motion",label:{default:"action.toggle-reduce-motion",menu:"action.toggle-reduce-motion.menu"},readonlyOk:!0,onSelect:function(e){f("toggle-reduce-motion",{source:e}),r.user.updateUserPreferences({animationSpeed:0===r.user.getAnimationSpeed()?1:0})},checkbox:!0},{id:"toggle-edge-scrolling",label:{default:"action.toggle-edge-scrolling",menu:"action.toggle-edge-scrolling.menu"},readonlyOk:!0,onSelect:function(e){f("toggle-edge-scrolling",{source:e}),r.user.updateUserPreferences({edgeScrollSpeed:0===r.user.getEdgeScrollSpeed()?1:0})},checkbox:!0},{id:"toggle-transparent",label:u({default:"action.toggle-transparent",menu:"action.toggle-transparent.menu"},"context-menu","action.toggle-transparent.context-menu"),readonlyOk:!0,onSelect:function(e){f("toggle-transparent",{source:e}),r.updateInstanceState({exportBackground:!r.getInstanceState().exportBackground})},checkbox:!0},{id:"toggle-tool-lock",label:{default:"action.toggle-tool-lock",menu:"action.toggle-tool-lock.menu"},kbd:"q",onSelect:function(e){f("toggle-tool-lock",{source:e}),r.updateInstanceState({isToolLocked:!r.getInstanceState().isToolLocked})},checkbox:!0},{id:"unlock-all",label:"action.unlock-all",onSelect:function(e){f("unlock-all",{source:e});var t,n=[],o=s(r.getCurrentPageShapes());try{for(o.s();!(t=o.n()).done;){var i=t.value;i.isLocked&&n.push({id:i.id,type:i.type,isLocked:!1})}}catch(a){o.e(a)}finally{o.f()}n.length>0&&r.updateShapes(n)}},{id:"toggle-focus-mode",label:{default:"action.toggle-focus-mode",menu:"action.toggle-focus-mode.menu"},readonlyOk:!0,kbd:"$.",checkbox:!0,onSelect:function(e){r.timers.requestAnimationFrame((function(){r.run((function(){f("toggle-focus-mode",{source:e}),l.clearDialogs(),l.clearToasts(),r.updateInstanceState({isFocusMode:!r.getInstanceState().isFocusMode})}))}))}},{id:"toggle-grid",label:{default:"action.toggle-grid",menu:"action.toggle-grid.menu"},readonlyOk:!0,kbd:"$'",onSelect:function(e){f("toggle-grid-mode",{source:e}),r.updateInstanceState({isGridMode:!r.getInstanceState().isGridMode})},checkbox:!0},{id:"toggle-debug-mode",label:{default:"action.toggle-debug-mode",menu:"action.toggle-debug-mode.menu"},readonlyOk:!0,onSelect:function(e){f("toggle-debug-mode",{source:e}),r.updateInstanceState({isDebugMode:!r.getInstanceState().isDebugMode})},checkbox:!0},{id:"print",label:"action.print",kbd:"$p",readonlyOk:!0,onSelect:function(e){f("print",{source:e}),l.printSelectionOrPages()}},{id:"exit-pen-mode",label:"action.exit-pen-mode",icon:"cross-2",readonlyOk:!0,onSelect:function(e){f("exit-pen-mode",{source:e}),r.updateInstanceState({isPenMode:!1})}},{id:"stop-following",label:"action.stop-following",icon:"cross-2",readonlyOk:!0,onSelect:function(e){f("stop-following",{source:e}),r.stopFollowingUser()}},{id:"back-to-content",label:"action.back-to-content",icon:"arrow-left",readonlyOk:!0,onSelect:function(e){var t;f("zoom-to-content",{source:e});var n=null!==(t=r.getSelectionPageBounds())&&void 0!==t?t:r.getCurrentPageBounds();n&&r.zoomToBounds(n,{targetZoom:Math.min(1,r.getZoomLevel()),animation:{duration:220}})}},{id:"toggle-lock",label:"action.toggle-lock",kbd:"!l",onSelect:function(e){r.markHistoryStoppingPoint("locking"),f("toggle-lock",{source:e}),r.toggleLock(r.getSelectedShapeIds())}},{id:"move-to-new-page",label:"context.pages.new-page",onSelect:function(e){var t=m.PageRecordType.createId(),n=r.getSelectedShapeIds();r.run((function(){r.markHistoryStoppingPoint("move_shapes_to_page"),r.createPage({name:l.msg("page-menu.new-page-initial-name"),id:t}),r.moveShapesToPage(n,t)})),f("move-to-new-page",{source:e})}},{id:"select-white-color",label:"color-style.white",kbd:"?t",onSelect:function(e){var t=m.DefaultColorStyle;r.run((function(){r.markHistoryStoppingPoint("change-color"),r.isIn("select")&&r.setStyleForSelectedShapes(t,"white"),r.setStyleForNextShapes(t,"white")})),f("set-style",{source:e,id:t.id,value:"white"})}},{id:"select-fill-fill",label:"fill-style.fill",kbd:"?f",onSelect:function(e){var t=m.DefaultFillStyle;r.run((function(){r.markHistoryStoppingPoint("change-fill"),r.isIn("select")&&r.setStyleForSelectedShapes(t,"fill"),r.setStyleForNextShapes(t,"fill")})),f("set-style",{source:e,id:t.id,value:"fill"})}},{id:"flatten-to-image",label:"action.flatten-to-image",kbd:"!f",onSelect:function(){var e=i(o().mark((function e(t){var n,i;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==(n=r.getSelectedShapeIds()).length){e.next=3;break}return e.abrupt("return");case 3:return r.markHistoryStoppingPoint("flattening to image"),f("flatten-to-image",{source:t}),e.next=7,(0,O.flattenShapesToImages)(r,n,r.options.flattenImageBoundsExpand);case 7:null!==(i=e.sent)&&void 0!==i&&i.length&&r.setSelectedShapes(i);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}];c&&p.push({id:"open-cursor-chat",label:"action.open-cursor-chat",readonlyOk:!0,kbd:"/",onSelect:function(e){f("open-cursor-chat",{source:e}),r.getInstanceState().isCoarsePointer||r.timers.requestAnimationFrame((function(){r.updateInstanceState({isChatting:!0})}))}});var h=function(e){return Object.fromEntries(e.map((function(e){return[e.id,e]})))}(p);return t?t(r,h,l):h}),[l,r,f,t,d,c]);return(0,y.jsx)(I.Provider,{value:p,children:n})}function C(){var e=b.useContext(I);if(!e)throw new Error("useTools must be used within a ToolProvider");return e}function M(e,t){var n;return e?"string"===typeof e?e:t?null!==(n=e[t])&&void 0!==n?n:e.default:void 0:void 0}},39247:function(e,t,n){"use strict";var r,o=n(50883).default,i=Object.defineProperty,a=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,c={};!function(e,t){for(var n in t)i(e,n,{get:t[n],enumerable:!0})}(c,{AssetUrlsProvider:function(){return h},useAssetUrls:function(){return v}}),e.exports=(r=c,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var c,l=o(u(t));try{var f=function(){var o=c.value;s.call(e,o)||o===n||i(e,o,{get:function(){return t[o]},enumerable:!(r=a(t,o))||r.enumerable})};for(l.s();!(c=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(i({},"__esModule",{value:!0}),r));var l=n(44414),f=n(57777),d=n(9950),p=(0,d.createContext)(null);function h(e){var t=e.assetUrls,n=e.children;return(0,d.useEffect)((function(){for(var e=0,n=Object.values(t.icons);e<n.length;e++){var r=n[e],o=(0,f.Image)();o.src=r,o.decode()}for(var i=0,a=Object.values(t.embedIcons);i<a.length;i++){var u=a[i],s=(0,f.Image)();s.src=u,s.decode()}}),[t]),(0,l.jsx)(p.Provider,{value:t,children:n})}function v(){var e=(0,d.useContext)(p);if(!e)throw new Error("useAssetUrls must be used within an AssetUrlsProvider");return e}},77740:function(e,t,n){"use strict";var r,o=n(50883).default,i=Object.create,a=Object.defineProperty,u=Object.getOwnPropertyDescriptor,s=Object.getOwnPropertyNames,c=Object.getPrototypeOf,l=Object.prototype.hasOwnProperty,f=function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var i,c=o(s(t));try{var f=function(){var o=i.value;l.call(e,o)||o===n||a(e,o,{get:function(){return t[o]},enumerable:!(r=u(t,o))||r.enumerable})};for(c.s();!(i=c.n()).done;)f()}catch(d){c.e(d)}finally{c.f()}}return e},d={};!function(e,t){for(var n in t)a(e,n,{get:t[n],enumerable:!0})}(d,{BreakPointProvider:function(){return m},useBreakpoint:function(){return b}}),e.exports=(r=d,f(a({},"__esModule",{value:!0}),r));var p=n(44414),h=n(57777),v=function(e,t,n){return n=null!=e?i(c(e)):{},f(!t&&e&&e.__esModule?n:a(n,"default",{value:e,enumerable:!0}),e)}(n(9950)),g=n(12521),y=v.default.createContext(null);function m(e){var t=e.forceMobile,n=void 0!==t&&t,r=e.children,o=(0,h.useMaybeEditor)(),i=(0,h.useValue)("breakpoint",(function(){for(var e,t=(null!==(e=null===o||void 0===o?void 0:o.getViewportScreenBounds())&&void 0!==e?e:{width:window.innerWidth}).width,r=n?g.PORTRAIT_BREAKPOINT.MOBILE_SM:g.PORTRAIT_BREAKPOINTS.length-1,i=0;i<r;i++)if(t>g.PORTRAIT_BREAKPOINTS[i]&&t<=g.PORTRAIT_BREAKPOINTS[i+1])return i;return r}),[o]);return(0,p.jsx)(y.Provider,{value:i,children:r})}function b(){var e=(0,v.useContext)(y);if(null===e)throw new Error("useBreakpoint must be used inside of the <BreakpointProvider /> component");return e}},3594:function(e,t,n){"use strict";var r,o=n(12897).default,i=n(50883).default,a=Object.defineProperty,u=Object.getOwnPropertyDescriptor,s=Object.getOwnPropertyNames,c=Object.prototype.hasOwnProperty,l={};!function(e,t){for(var n in t)a(e,n,{get:t[n],enumerable:!0})}(l,{TldrawUiComponentsProvider:function(){return D},useTldrawUiComponents:function(){return R}}),e.exports=(r=l,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,l=i(s(t));try{var f=function(){var i=o.value;c.call(e,i)||i===n||a(e,i,{get:function(){return t[i]},enumerable:!(r=u(t,i))||r.enumerable})};for(l.s();!(o=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(a({},"__esModule",{value:!0}),r));var f=n(44414),d=n(57777),p=n(9950),h=n(74771),v=n(61007),g=n(34211),y=n(22227),m=n(17175),b=n(57901),w=n(35493),S=n(68091),x=n(1839),P=n(4293),O=n(98247),k=n(54963),_=n(89135),j=n(53983),I=n(21847),T=n(54229),E=n(67931),C=n(16235),M=n(37454),A=(0,p.createContext)(null);function D(e){var t=e.overrides,n=void 0===t?{}:t,r=e.children,i=(0,d.useShallowObjectIdentity)(n),a=(0,M.useShowCollaborationUi)();return(0,f.jsx)(A.Provider,{value:(0,p.useMemo)((function(){return o({ContextMenu:v.DefaultContextMenu,ActionsMenu:h.DefaultActionsMenu,HelpMenu:null,ZoomMenu:C.DefaultZoomMenu,MainMenu:x.DefaultMainMenu,Minimap:P.DefaultMinimap,StylePanel:I.DefaultStylePanel,PageMenu:k.DefaultPageMenu,NavigationPanel:O.DefaultNavigationPanel,Toolbar:T.DefaultToolbar,KeyboardShortcutsDialog:S.DefaultKeyboardShortcutsDialog,QuickActions:_.DefaultQuickActions,HelperButtons:w.DefaultHelperButtons,DebugPanel:m.DefaultDebugPanel,DebugMenu:y.DefaultDebugMenu,MenuPanel:b.DefaultMenuPanel,SharePanel:a?j.DefaultSharePanel:null,CursorChatBubble:a?g.CursorChatBubble:null,TopPanel:a?E.DefaultTopPanel:null},i)}),[i,a]),children:r})}function R(){var e=(0,p.useContext)(A);if(!e)throw new Error("useTldrawUiComponents must be used within a TldrawUiComponentsProvider");return e}},49489:function(e,t,n){"use strict";var r,o=n(12897).default,i=n(41132).default,a=n(50883).default,u=Object.defineProperty,s=Object.getOwnPropertyDescriptor,c=Object.getOwnPropertyNames,l=Object.prototype.hasOwnProperty,f={};!function(e,t){for(var n in t)u(e,n,{get:t[n],enumerable:!0})}(f,{DialogsContext:function(){return g},TldrawUiDialogsProvider:function(){return y},useDialogs:function(){return m}}),e.exports=(r=f,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,i=a(c(t));try{var f=function(){var i=o.value;l.call(e,i)||i===n||u(e,i,{get:function(){return t[i]},enumerable:!(r=s(t,i))||r.enumerable})};for(i.s();!(o=i.n()).done;)f()}catch(d){i.e(d)}finally{i.f()}}return e}(u({},"__esModule",{value:!0}),r));var d=n(44414),p=n(57777),h=n(9950),v=n(14867),g=(0,h.createContext)(null);function y(e){var t=e.context,n=e.children,r=(0,v.useUiEvents)(),a=(0,p.useAtom)("dialogs",[]),u=(0,h.useMemo)((function(){return{dialogs:a,addDialog:function(e){var n,u=null!==(n=e.id)&&void 0!==n?n:(0,p.uniqueId)();return a.update((function(t){return[].concat(i(t.filter((function(t){return t.id!==e.id}))),[o(o({},e),{},{id:u})])})),r("open-menu",{source:"dialog",id:u}),p.tlmenus.addOpenMenu(u,t),u},removeDialog:function(e){var n,o=a.get().find((function(t){return t.id===e}));o&&(null===(n=o.onClose)||void 0===n||n.call(o),r("close-menu",{source:"dialog",id:e}),p.tlmenus.deleteOpenMenu(e,t),a.update((function(e){return e.filter((function(e){return e!==o}))})));return e},clearDialogs:function(){var e=a.get();0!==e.length&&(e.forEach((function(e){var n;null===(n=e.onClose)||void 0===n||n.call(e),r("close-menu",{source:"dialog",id:e.id}),p.tlmenus.deleteOpenMenu(e.id,t)})),a.set([]))}}}),[r,a,t]);return(0,d.jsx)(g.Provider,{value:u,children:n})}function m(){var e=(0,h.useContext)(g);if(!e)throw new Error("useDialogs must be used within a DialogsProvider");return e}},14867:function(e,t,n){"use strict";var r,o=n(50883).default,i=Object.create,a=Object.defineProperty,u=Object.getOwnPropertyDescriptor,s=Object.getOwnPropertyNames,c=Object.getPrototypeOf,l=Object.prototype.hasOwnProperty,f=function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var i,c=o(s(t));try{var f=function(){var o=i.value;l.call(e,o)||o===n||a(e,o,{get:function(){return t[o]},enumerable:!(r=u(t,o))||r.enumerable})};for(c.s();!(i=c.n()).done;)f()}catch(d){c.e(d)}finally{c.f()}}return e},d={};!function(e,t){for(var n in t)a(e,n,{get:t[n],enumerable:!0})}(d,{EventsContext:function(){return g},TldrawUiEventsProvider:function(){return y},useUiEvents:function(){return m}}),e.exports=(r=d,f(a({},"__esModule",{value:!0}),r));var p=n(44414),h=function(e,t,n){return n=null!=e?i(c(e)):{},f(!t&&e&&e.__esModule?n:a(n,"default",{value:e,enumerable:!0}),e)}(n(9950)),v=function(){},g=h.createContext(null);function y(e){var t=e.onEvent,n=e.children;return(0,p.jsx)(g.Provider,{value:null!==t&&void 0!==t?t:v,children:n})}function m(){var e=h.useContext(g);return null!==e&&void 0!==e?e:v}},5450:function(e,t,n){"use strict";var r,o=n(12897).default,i=n(41132).default,a=n(50883).default,u=Object.defineProperty,s=Object.getOwnPropertyDescriptor,c=Object.getOwnPropertyNames,l=Object.prototype.hasOwnProperty,f={};!function(e,t){for(var n in t)u(e,n,{get:t[n],enumerable:!0})}(f,{TldrawUiToastsProvider:function(){return y},ToastsContext:function(){return g},useToasts:function(){return m}}),e.exports=(r=f,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,i=a(c(t));try{var f=function(){var i=o.value;l.call(e,i)||i===n||u(e,i,{get:function(){return t[i]},enumerable:!(r=s(t,i))||r.enumerable})};for(i.s();!(o=i.n()).done;)f()}catch(d){i.e(d)}finally{i.f()}}return e}(u({},"__esModule",{value:!0}),r));var d=n(44414),p=n(56637),h=n(57777),v=n(9950),g=(0,v.createContext)(null);function y(e){var t=e.children,n=(0,h.useAtom)("toasts",[]),r=(0,v.useMemo)((function(){return{toasts:n,addToast:function(e){var t,r=null!==(t=e.id)&&void 0!==t?t:(0,h.uniqueId)();return n.update((function(t){return[].concat(i(t.filter((function(t){return t.id!==e.id}))),[o(o({},e),{},{id:r})])})),r},removeToast:function(e){return n.update((function(t){return t.filter((function(t){return t.id!==e}))})),e},clearToasts:function(){n.set([])}}}),[n]);return(0,d.jsx)(p.ToastProvider,{children:(0,d.jsx)(g.Provider,{value:r,children:t})})}function m(){var e=(0,v.useContext)(g);if(!e)throw new Error("useToasts must be used within a ToastsProvider");return e}},87740:function(e,t,n){"use strict";var r,o=n(85715).default,i=n(4633).default,a=n(12897).default,u=n(29293).default,s=n(50883).default,c=Object.defineProperty,l=Object.getOwnPropertyDescriptor,f=Object.getOwnPropertyNames,d=Object.prototype.hasOwnProperty,p={};!function(e,t){for(var n in t)c(e,n,{get:t[n],enumerable:!0})}(p,{pasteExcalidrawContent:function(){return v}}),e.exports=(r=p,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,i=s(f(t));try{var a=function(){var i=o.value;d.call(e,i)||i===n||c(e,i,{get:function(){return t[i]},enumerable:!(r=l(t,i))||r.enumerable})};for(i.s();!(o=i.n()).done;)a()}catch(u){i.e(u)}finally{i.f()}}return e}(c({},"__esModule",{value:!0}),r));var h=n(57777);function v(e,t,n){return g.apply(this,arguments)}function g(){return(g=u(i().mark((function e(t,n,r){var u,c,l,f,d,p,v,g,b,x,P,k,_,A,D,R,N,L,U,F,B,V,z,H,K,G;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:u=n.elements,c=n.files,l={shapes:[],bindings:[],rootShapeIds:[],assets:[],schema:t.store.schema.serialize()},f=new Map,d=new Map,p=t.getCurrentPageId(),v=new Map,g=[],b=new Set,u.forEach((function(e){if(v.set(e.id,(0,h.createShapeId)()),null!==e.boundElements){var t,n=s(e.boundElements);try{for(n.s();!(t=n.n()).done;){var r=t.value;"text"===r.type&&b.add(r.id)}}catch(o){n.e(o)}finally{n.f()}}})),x=h.ZERO_INDEX_KEY,P=s(u),e.prev=11,_=i().mark((function e(){var t,n,r,P,_,A,D,R,N,L,U,F,B,V,z,H,K,G,q,W,Y,X,Z,$,Q,J,ee,te,ne,re,oe,ie,ae,ue,se,ce,le,fe;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=k.value,!b.has(t.id)){e.next=3;break}return e.abrupt("return",1);case 3:n=v.get(t.id),r={id:n,typeName:"shape",parentId:p,index:x,x:t.x,y:t.y,rotation:0,isLocked:t.locked,opacity:y(t.opacity),meta:{}},0!==t.angle&&d.set(n,t.angle),t.groupIds&&t.groupIds.length>0?f.has(t.groupIds[0])?null===(P=f.get(t.groupIds[0]))||void 0===P||P.push(n):f.set(t.groupIds[0],[n]):g.push(n),e.t0=t.type,e.next="rectangle"===e.t0||"ellipse"===e.t0||"diamond"===e.t0?10:"freedraw"===e.t0?32:"line"===e.t0?34:"arrow"===e.t0?40:"text"===e.t0?66:"image"===e.t0?69:75;break;case 10:if(R="",N="middle",null===t.boundElements){e.next=29;break}L=s(t.boundElements),e.prev=14,F=i().mark((function e(){var t,n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:"text"===(t=U.value).type&&(n=u.find((function(e){return e.id===t.id})))&&(R=n.text,N=j[n.textAlign]);case 2:case"end":return e.stop()}}),e)})),L.s();case 17:if((U=L.n()).done){e.next=21;break}return e.delegateYield(F(),"t1",19);case 19:e.next=17;break;case 21:e.next=26;break;case 23:e.prev=23,e.t2=e.catch(14),L.e(e.t2);case 26:return e.prev=26,L.f(),e.finish(26);case 29:return B="transparent"===t.backgroundColor?t.strokeColor:t.backgroundColor,l.shapes.push(a(a({},r),{},{type:"geo",props:{geo:t.type,url:null!==(_=t.link)&&void 0!==_?_:"",w:t.width,h:t.height,size:null!==(A=m[t.strokeWidth])&&void 0!==A?A:"draw",color:null!==(D=O[B])&&void 0!==D?D:"black",text:R,align:N,dash:C(t),fill:M(t)}})),e.abrupt("break",75);case 32:return l.shapes.push(a(a({},r),{},{type:"draw",props:{dash:C(t),size:m[t.strokeWidth],color:null!==(V=O[t.strokeColor])&&void 0!==V?V:"black",segments:[{type:"free",points:t.points.map((function(e){var t=o(e,3),n=t[0],r=t[1],i=t[2];return{x:n,y:r,z:void 0===i?.5:i}}))}]}})),e.abrupt("break",75);case 34:if(!(t.points.slice().length<2)){e.next=37;break}return e.abrupt("break",75);case 37:return H=(0,h.getIndices)(t.points.length),l.shapes.push(a(a({},r),{},{type:"line",props:{dash:C(t),size:m[t.strokeWidth],color:null!==(z=O[t.strokeColor])&&void 0!==z?z:"black",spline:t.roundness?"cubic":"line",points:a({},Object.fromEntries(t.points.map((function(e,t){var n=o(e,2),r=n[0],i=n[1],a=H[t];return[a,{id:a,index:a,x:r,y:i}]}))))}})),e.abrupt("break",75);case 40:if(Z="",null===t.boundElements){e.next=58;break}$=s(t.boundElements),e.prev=43,J=i().mark((function e(){var t,n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:"text"===(t=Q.value).type&&(n=u.find((function(e){return e.id===t.id})))&&(Z=n.text);case 2:case"end":return e.stop()}}),e)})),$.s();case 46:if((Q=$.n()).done){e.next=50;break}return e.delegateYield(J(),"t3",48);case 48:e.next=46;break;case 50:e.next=55;break;case 52:e.prev=52,e.t4=e.catch(43),$.e(e.t4);case 55:return e.prev=55,$.f(),e.finish(55);case 58:return ee=t.points[0],te=t.points[t.points.length-1],ne=v.get(null===(K=t.startBinding)||void 0===K?void 0:K.elementId),re=v.get(null===(G=t.endBinding)||void 0===G?void 0:G.elementId),l.shapes.push(a(a({},r),{},{type:"arrow",props:{text:Z,bend:E(t,ee,te),dash:C(t),size:null!==(q=m[t.strokeWidth])&&void 0!==q?q:"m",color:null!==(W=O[t.strokeColor])&&void 0!==W?W:"black",start:{x:ee[0],y:ee[1]},end:{x:te[0],y:te[1]},arrowheadEnd:null!==(Y=T[t.endArrowhead])&&void 0!==Y?Y:"none",arrowheadStart:null!==(X=T[t.startArrowhead])&&void 0!==X?X:"none"}})),ne&&l.bindings.push({id:(0,h.createBindingId)(),typeName:"binding",type:"arrow",fromId:n,toId:ne,props:{terminal:"start",normalizedAnchor:{x:.5,y:.5},isPrecise:!1,isExact:!1},meta:{}}),re&&l.bindings.push({id:(0,h.createBindingId)(),typeName:"binding",type:"arrow",fromId:n,toId:re,props:{terminal:"end",normalizedAnchor:{x:.5,y:.5},isPrecise:!1,isExact:!1},meta:{}}),e.abrupt("break",75);case 66:return ae=w(t.fontSize),ue=ae.size,se=ae.scale,l.shapes.push(a(a({},r),{},{type:"text",props:{size:ue,scale:se,font:null!==(oe=S[t.fontFamily])&&void 0!==oe?oe:"draw",color:null!==(ie=O[t.strokeColor])&&void 0!==ie?ie:"black",text:t.text,textAlign:I[t.textAlign]}})),e.abrupt("break",75);case 69:if(le=c[t.fileId]){e.next=72;break}return e.abrupt("break",75);case 72:fe=h.AssetRecordType.createId(),l.assets.push({id:fe,typeName:"asset",type:"image",props:{w:t.width,h:t.height,fileSize:le.size,name:null!==(ce=t.id)&&void 0!==ce?ce:"Untitled",isAnimated:!1,mimeType:le.mimeType,src:le.dataURL},meta:{}}),l.shapes.push(a(a({},r),{},{type:"image",props:{w:t.width,h:t.height,assetId:fe}}));case 75:x=(0,h.getIndexAbove)(x);case 76:case"end":return e.stop()}}),e,null,[[14,23,26,29],[43,52,55,58]])})),P.s();case 14:if((k=P.n()).done){e.next=20;break}return e.delegateYield(_(),"t0",16);case 16:if(!e.t0){e.next=18;break}return e.abrupt("continue",18);case 18:e.next=14;break;case 20:e.next=25;break;case 22:e.prev=22,e.t1=e.catch(11),P.e(e.t1);case 25:return e.prev=25,P.f(),e.finish(25);case 28:A=null!==r&&void 0!==r?r:t.inputs.shiftKey?t.inputs.currentPagePoint:void 0,t.markHistoryStoppingPoint("paste"),t.putContentOntoCurrentPage(l,{point:A,select:!1,preserveIds:!0}),D=s(f.values());try{for(D.s();!(R=D.n()).done;)(N=R.value).length>1&&(t.groupShapes(N),null!==(L=t.getShape(N[0]))&&void 0!==L&&L.parentId&&(0,h.isShapeId)(L.parentId)&&g.push(L.parentId))}catch(q){D.e(q)}finally{D.f()}U=s(d);try{for(U.s();!(F=U.n()).done;)B=o(F.value,2),V=B[0],z=B[1],t.select(V),t.rotateShapesBy([V],z)}catch(q){U.e(q)}finally{U.f()}H=(0,h.compact)(g.map((function(e){return t.getShape(e)}))),K=h.Box.Common(H.map((function(e){return t.getShapePageBounds(e)}))),G=t.getViewportPageBounds().center,t.updateShapes(H.map((function(e){var t,n,r=(null!==(t=e.x)&&void 0!==t?t:0)-(K.x+K.w/2),o=(null!==(n=e.y)&&void 0!==n?n:0)-(K.y+K.h/2);return{id:e.id,type:e.type,x:G.x+r,y:G.y+o}}))),t.setSelectedShapes(g);case 40:case"end":return e.stop()}}),e,null,[[11,22,25,28]])})))).apply(this,arguments)}var y=function(e){var t=e/100;return t<.2?.1:t<.4?.25:t<.6?.5:t<.8?.75:1},m={1:"s",2:"m",3:"l",4:"xl"},b={16:"s",20:"m",28:"l",36:"xl"};function w(e){var t=b[e];return t?{size:t,scale:1}:e<16?{size:"s",scale:e/16}:e>36?{size:"xl",scale:e/36}:{size:"m",scale:1}}var S={1:"draw",2:"sans",3:"mono"},x={gray:["#f8f9fa","#e9ecef","#ced4da","#868e96","#343a40"],red:["#fff5f5","#ffc9c9","#ff8787","#fa5252","#e03131"],pink:["#fff0f6","#fcc2d7","#f783ac","#e64980","#c2255c"],grape:["#f8f0fc","#eebefa","#da77f2","#be4bdb","#9c36b5"],violet:["#f3f0ff","#d0bfff","#9775fa","#7950f2","#6741d9"],indigo:["#edf2ff","#bac8ff","#748ffc","#4c6ef5","#3b5bdb"],blue:["#e7f5ff","#a5d8ff","#4dabf7","#228be6","#1971c2"],cyan:["#e3fafc","#99e9f2","#3bc9db","#15aabf","#0c8599"],teal:["#e6fcf5","#96f2d7","#38d9a9","#12b886","#099268"],green:["#ebfbee","#b2f2bb","#69db7c","#40c057","#2f9e44"],lime:["#f4fce3","#d8f5a2","#a9e34b","#82c91e","#66a80f"],yellow:["#fff9db","#ffec99","#ffd43b","#fab005","#f08c00"],orange:["#fff4e6","#ffd8a8","#ffa94d","#fd7e14","#e8590c"]};function P(e,t,n){var r=[0,1,2,3,4].map((function(t){return x[e][t]}));return Object.fromEntries(r.map((function(e,r){return[e,r<3?t:n]})))}var O=a(a(a(a(a(a(a(a(a(a(a({},P("gray","grey","black")),P("red","light-red","red")),P("pink","light-red","red")),P("grape","light-violet","violet")),P("blue","light-blue","blue")),P("cyan","light-blue","blue")),P("teal","light-green","green")),P("green","light-green","green")),P("yellow","yellow","orange")),P("orange","yellow","orange")),{},{"#ffffff":"white","#000000":"black"}),k={solid:"draw",dashed:"dashed",dotted:"dotted"},_={"cross-hatch":"pattern",hachure:"pattern",solid:"solid"},j={left:"start",center:"middle",right:"end"},I={left:"start",center:"middle",right:"end"},T={arrow:"arrow",dot:"dot",triangle:"triangle",bar:"pipe"};function E(e,t,n){var r=0;if(e.points.length>2){var o=new h.Vec(t[0],t[1]),i=new h.Vec(n[0],n[1]),a=new h.Vec(e.points[1][0],e.points[1][1]),u=h.Vec.Sub(i,o),s=h.Vec.Per(u),c=h.Vec.Med(i,o),l=h.Vec.Sub(c,s),f=h.Vec.Add(c,s),d=h.Vec.NearestPointOnLineSegment(l,f,a,!1);r=h.Vec.Dist(d,c),h.Vec.Clockwise(d,i,c)&&(r*=-1)}return r}var C=function(e){var t,n=null!==(t=k[e.strokeStyle])&&void 0!==t?t:"draw";return"draw"===n&&0===e.roughness&&(n="solid"),n},M=function(e){var t;return"transparent"===e.backgroundColor?"none":null!==(t=_[e.fillStyle])&&void 0!==t?t:"solid"}},33674:function(e,t,n){"use strict";var r,o=n(4633).default,i=n(29293).default,a=n(50883).default,u=Object.defineProperty,s=Object.getOwnPropertyDescriptor,c=Object.getOwnPropertyNames,l=Object.prototype.hasOwnProperty,f={};function d(e,t,n,r){return p.apply(this,arguments)}function p(){return(p=i(o().mark((function e(t,n,r,i){var a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.map((function(e){return e instanceof File?e:new File([e],"tldrawFile",{type:e.type})})),t.markHistoryStoppingPoint("paste"),e.next=4,t.putExternalContent({type:"files",files:a,point:r,ignoreParent:!1,sources:i});case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(e,t){for(var n in t)u(e,n,{get:t[n],enumerable:!0})}(f,{pasteFiles:function(){return d}}),e.exports=(r=f,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,i=a(c(t));try{var f=function(){var i=o.value;l.call(e,i)||i===n||u(e,i,{get:function(){return t[i]},enumerable:!(r=s(t,i))||r.enumerable})};for(i.s();!(o=i.n()).done;)f()}catch(d){i.e(d)}finally{i.f()}}return e}(u({},"__esModule",{value:!0}),r))},61198:function(e,t,n){"use strict";var r,o=n(50883).default,i=Object.defineProperty,a=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,c={};function l(e,t,n){var r=e.getSelectionPageBounds();e.markHistoryStoppingPoint("paste"),e.putContentOntoCurrentPage(t,{point:n,select:!0});var o=e.getSelectionPageBounds();r&&o&&null!==r&&void 0!==r&&r.collides(o)&&(e.updateInstanceState({isChangingStyle:!0}),e.timers.setTimeout((function(){e.updateInstanceState({isChangingStyle:!1})}),150))}!function(e,t){for(var n in t)i(e,n,{get:t[n],enumerable:!0})}(c,{pasteTldrawContent:function(){return l}}),e.exports=(r=c,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var c,l=o(u(t));try{var f=function(){var o=c.value;s.call(e,o)||o===n||i(e,o,{get:function(){return t[o]},enumerable:!(r=a(t,o))||r.enumerable})};for(l.s();!(c=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(i({},"__esModule",{value:!0}),r))},8708:function(e,t,n){"use strict";var r,o=n(4633).default,i=n(29293).default,a=n(50883).default,u=Object.defineProperty,s=Object.getOwnPropertyDescriptor,c=Object.getOwnPropertyNames,l=Object.prototype.hasOwnProperty,f={};function d(e,t,n,r){return p.apply(this,arguments)}function p(){return(p=i(o().mark((function e(t,n,r,i){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.markHistoryStoppingPoint("paste"),e.next=3,t.putExternalContent({type:"url",point:r,url:n,sources:i});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(e,t){for(var n in t)u(e,n,{get:t[n],enumerable:!0})}(f,{pasteUrl:function(){return d}}),e.exports=(r=f,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,i=a(c(t));try{var f=function(){var i=o.value;l.call(e,i)||i===n||u(e,i,{get:function(){return t[i]},enumerable:!(r=s(t,i))||r.enumerable})};for(i.s();!(o=i.n()).done;)f()}catch(d){i.e(d)}finally{i.f()}}return e}(u({},"__esModule",{value:!0}),r))},54150:function(e,t,n){"use strict";var r,o=n(50883).default,i=Object.defineProperty,a=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,c={};!function(e,t){for(var n in t)i(e,n,{get:t[n],enumerable:!0})}(c,{showMenuPaste:function(){return g},useAllowGroup:function(){return h},useAllowUngroup:function(){return v},useAnySelectedShapesCount:function(){return y},useCanRedo:function(){return x},useCanUndo:function(){return P},useHasLinkShapeSelected:function(){return w},useIsInSelectState:function(){return p},useOnlyFlippableShape:function(){return S},useShowAutoSizeToggle:function(){return b},useThreeStackableItems:function(){return d},useUnlockedSelectedShapesCount:function(){return m}}),e.exports=(r=c,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var c,l=o(u(t));try{var f=function(){var o=c.value;s.call(e,o)||o===n||i(e,o,{get:function(){return t[o]},enumerable:!(r=a(t,o))||r.enumerable})};for(l.s();!(c=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(i({},"__esModule",{value:!0}),r));var l=n(57777),f=n(64761);var d=function(){var e=(0,l.useEditor)();return(0,l.useValue)("threeStackableItems",(function(){return function(e){return e.getSelectedShapeIds().map((function(t){return e.getShape(t)})).filter((function(t){if(!t)return!1;if(e.isShapeOfType(t,"arrow")){var n=(0,f.getArrowBindings)(e,t);if(n.start||n.end)return!1}return!0}))}(e).length>2}),[e])},p=function(){var e=(0,l.useEditor)();return(0,l.useValue)("isInSelectState",(function(){return e.isIn("select")}),[e])},h=function(){var e=(0,l.useEditor)();return(0,l.useValue)("allow group",(function(){var t=e.getSelectedShapes();if(t.length<2)return!1;var n,r=o(t);try{var i,a=function(){var r=n.value;if(e.isShapeOfType(r,"arrow")){var o=(0,f.getArrowBindings)(e,r);if(o.start&&!t.some((function(e){return e.id===o.start.toId})))return{v:!1};if(o.end&&!t.some((function(e){return e.id===o.end.toId})))return{v:!1}}};for(r.s();!(n=r.n()).done;)if(i=a())return i.v}catch(u){r.e(u)}finally{r.f()}return!0}),[e])},v=function(){var e=(0,l.useEditor)();return(0,l.useValue)("allowUngroup",(function(){return e.getSelectedShapeIds().some((function(t){var n;return"group"===(null===(n=e.getShape(t))||void 0===n?void 0:n.type)}))}),[e])},g="undefined"!==typeof window&&"navigator"in window&&Boolean(navigator.clipboard)&&Boolean(navigator.clipboard.read);function y(e,t){var n=(0,l.useEditor)();return(0,l.useValue)("selectedShapes",(function(){var r=n.getSelectedShapes().length;return void 0===e?void 0===t?r:r<=t:void 0===t?r>=e:r>=e&&r<=t}),[n,e,t])}function m(e,t){var n=(0,l.useEditor)();return(0,l.useValue)("selectedShapes",(function(){var r=n.getSelectedShapes().filter((function(e){return!n.isShapeOrAncestorLocked(e)})).length;return void 0===e?void 0===t?r:r<=t:void 0===t?r>=e:r>=e&&r<=t}),[n])}function b(){var e=(0,l.useEditor)();return(0,l.useValue)("showAutoSizeToggle",(function(){var t=e.getSelectedShapes();return 1===t.length&&e.isShapeOfType(t[0],"text")&&!1===t[0].props.autoSize}),[e])}function w(){var e=(0,l.useEditor)();return(0,l.useValue)("hasLinkShapeSelected",(function(){var t=e.getOnlySelectedShape();return!(!t||"embed"===t.type||!("url"in t.props)||t.isLocked)}),[e])}function S(){var e=(0,l.useEditor)();return(0,l.useValue)("onlyFlippableShape",(function(){var t=e.getOnlySelectedShape();return t&&(e.isShapeOfType(t,"group")||e.isShapeOfType(t,"image")||e.isShapeOfType(t,"arrow")||e.isShapeOfType(t,"line")||e.isShapeOfType(t,"draw"))}),[e])}function x(){var e=(0,l.useEditor)();return(0,l.useValue)("useCanRedo",(function(){return e.getCanRedo()}),[e])}function P(){var e=(0,l.useEditor)();return(0,l.useValue)("useCanUndo",(function(){return e.getCanUndo()}),[e])}},2753:function(e,t,n){"use strict";var r,o=n(41132).default,i=n(4633).default,a=n(29293).default,u=n(50883).default,s=Object.create,c=Object.defineProperty,l=Object.getOwnPropertyDescriptor,f=Object.getOwnPropertyNames,d=Object.getPrototypeOf,p=Object.prototype.hasOwnProperty,h=function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,i=u(f(t));try{var a=function(){var i=o.value;p.call(e,i)||i===n||c(e,i,{get:function(){return t[i]},enumerable:!(r=l(t,i))||r.enumerable})};for(i.s();!(o=i.n()).done;)a()}catch(s){i.e(s)}finally{i.f()}}return e},v={};!function(e,t){for(var n in t)c(e,n,{get:t[n],enumerable:!0})}(v,{isValidHttpURL:function(){return j},useMenuClipboardEvents:function(){return N},useNativeClipboardEvents:function(){return L}}),e.exports=(r=v,h(c({},"__esModule",{value:!0}),r));var g=n(57777),y=function(e,t,n){return n=null!=e?s(d(e)):{},h(!t&&e&&e.__esModule?n:c(n,"default",{value:e,enumerable:!0}),e)}(n(80742)),m=n(9950),b=n(13633),w=n(14867),S=n(87740),x=n(33674),P=n(61198),O=n(8708),k=[b.TLDRAW_CUSTOM_PNG_MIME_TYPE,"image/png","image/jpeg","image/webp","image/svg+xml"];function _(e){var t=document.implementation.createHTMLDocument("");return t.documentElement.innerHTML=e.trim(),t.body.textContent||t.body.innerText||""}var j=function(e){try{var t=new URL(e);return"http:"===t.protocol||"https:"===t.protocol}catch(n){return!1}},I=["input","select","textarea"];function T(e){var t=document.activeElement;return e.menus.hasAnyOpenMenus()||t&&(t.getAttribute("contenteditable")||I.indexOf(t.tagName.toLowerCase())>-1)}var E=function(e,t,n,r){var o=function(e){var t,n=e.split(/[\n\s]/),r=u(n);try{for(r.s();!(t=r.n()).done;){var o=t.value;try{var i=new URL(o);if("http:"!==i.protocol&&"https:"!==i.protocol)return}catch(a){return}}}catch(s){r.e(s)}finally{r.f()}return(0,g.uniq)(n)}(t);if(o){var i,a=u(o);try{for(a.s();!(i=a.n()).done;){var s=i.value;(0,O.pasteUrl)(e,s,n)}}catch(c){a.e(c)}finally{a.f()}}else j(t)?(0,O.pasteUrl)(e,t,n):/^<svg/.test(t)?(e.markHistoryStoppingPoint("paste"),e.putExternalContent({type:"svg-text",text:t,point:n,sources:r})):(e.markHistoryStoppingPoint("paste"),e.putExternalContent({type:"text",text:t,point:n,sources:r}))},C=function(){var e=a(i().mark((function e(t,n,r){var o,a,u,s;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===t.getEditingShapeId()){e.next=2;break}return e.abrupt("return");case 2:if(n){e.next=4;break}throw Error("No clipboard data");case 4:o=[],a=i().mark((function e(){var t;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=s[u],e.t0=t.kind,e.next="file"===e.t0?4:"string"===e.t0?6:8;break;case 4:return o.push({type:"file",source:new Promise((function(e){return e(t.getAsFile())}))}),e.abrupt("break",8);case 6:return"text/html"===t.type?o.push({type:"html",source:new Promise((function(e){return t.getAsString(e)}))}):"text/plain"===t.type?o.push({type:"text",source:new Promise((function(e){return t.getAsString(e)}))}):o.push({type:t.type,source:new Promise((function(e){return t.getAsString(e)}))}),e.abrupt("break",8);case 8:case"end":return e.stop()}}),e)})),u=0,s=Object.values(n.items);case 7:if(!(u<s.length)){e.next=12;break}return e.delegateYield(a(),"t0",9);case 9:u++,e.next=7;break;case 12:A(t,o,r);case 13:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),M=function(){var e=a(i().mark((function e(t){var n,r,s,c,l,f,d,p;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.editor,r=t.clipboardItems,s=t.point,c=t.fallbackFiles,l=[],f=u(r),e.prev=3,p=i().mark((function e(){var t,n,r,o;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=d.value,n=i().mark((function e(){var n,a;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=o[r],!t.types.includes(n)){e.next=5;break}return a=t.getType(n).then((function(e){return g.FileHelpers.rewriteMimeType(e,(0,b.getCanonicalClipboardReadType)(n))})),l.push({type:"blob",source:a}),e.abrupt("return",1);case 5:case"end":return e.stop()}}),e)})),r=0,o=k;case 3:if(!(r<o.length)){e.next=10;break}return e.delegateYield(n(),"t0",5);case 5:if(!e.t0){e.next=7;break}return e.abrupt("break",10);case 7:r++,e.next=3;break;case 10:t.types.includes("text/html")&&l.push({type:"html",source:a(i().mark((function e(){var n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getType("text/html");case 2:return n=e.sent,e.next=5,g.FileHelpers.blobToText(n);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})))()}),t.types.includes("text/uri-list")&&l.push({type:"url",source:a(i().mark((function e(){var n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getType("text/uri-list");case 2:return n=e.sent,e.next=5,g.FileHelpers.blobToText(n);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})))()}),t.types.includes("text/plain")&&l.push({type:"text",source:a(i().mark((function e(){var n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getType("text/plain");case 2:return n=e.sent,e.next=5,g.FileHelpers.blobToText(n);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})))()});case 13:case"end":return e.stop()}}),e)})),f.s();case 6:if((d=f.n()).done){e.next=10;break}return e.delegateYield(p(),"t0",8);case 8:e.next=6;break;case 10:e.next=15;break;case 12:e.prev=12,e.t1=e.catch(3),f.e(e.t1);case 15:return e.prev=15,f.f(),e.finish(15);case 18:return c&&1===l.length&&"text"===l[0].type&&(l.pop(),l.push.apply(l,o(c.map((function(e){return{type:"file",source:Promise.resolve(e)}}))))),e.next=21,A(n,l,s);case 21:return e.abrupt("return",e.sent);case 22:case"end":return e.stop()}}),e,null,[[3,12,15,18]])})));return function(t){return e.apply(this,arguments)}}();function A(e,t,n){return D.apply(this,arguments)}function D(){return(D=a(i().mark((function e(t,n,r){var o,a,s,c,l,f,d,p,h,v,m,b,w,k,j,I,T,C,M,A,D,R,N,L;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(o=n.filter((function(e){return("file"===e.type||"blob"===e.type)&&null!==e.source}))).length){e.next=12;break}if(!(o.length>t.options.maxFilesAtOnce)){e.next=4;break}throw Error("Too many files");case 4:return e.t0=g.compact,e.next=7,Promise.all(o.map((function(e){return e.source})));case 7:return e.t1=e.sent,a=(0,e.t0)(e.t1),e.next=11,(0,x.pasteFiles)(t,a,r);case 11:return e.abrupt("return",e.sent);case 12:return e.next=14,Promise.all(n.filter((function(e){return"file"!==e.type})).map((function(e){return new Promise((function(t){var n=e;"file"!==n.type?n.source.then((function(e){var r,o=null===(r=e.match(/<div data-tldraw[^>]*>(.*)<\/div>/))||void 0===r?void 0:r[1];if(o)try{var i=y.default.decompressFromBase64(o);if(null===i)return void t({type:"error",data:i,reason:"found tldraw data comment but could not parse base64"});var a=JSON.parse(i);return"application/tldraw"!==a.type&&t({type:"error",data:a,reason:"found tldraw data comment but JSON was of a different type: ".concat(a.type)}),"string"===typeof a.data?void t({type:"error",data:a,reason:"found tldraw json but data was a string instead of a TLClipboardModel object"}):void t({type:"tldraw",data:a.data})}catch(s){return void t({type:"error",data:o,reason:"found tldraw json but data was a string instead of a TLClipboardModel object"})}else{if("html"===n.type)return void t({type:"text",data:e,subtype:"html"});if("url"===n.type)return void t({type:"text",data:e,subtype:"url"});try{var u=JSON.parse(e);return"excalidraw/clipboard"===u.type?void t({type:"excalidraw",data:u}):void t({type:"text",data:e,subtype:"json"})}catch(c){return void t({type:"text",data:e,subtype:"text"})}}t({type:"error",data:e,reason:"unhandled case"})})):t({type:"error",data:null,reason:"unexpected file"})}))})));case 14:s=e.sent,c=u(s),e.prev=16,c.s();case 18:if((l=c.n()).done){e.next=25;break}if("tldraw"!==(f=l.value).type){e.next=23;break}return(0,P.pasteTldrawContent)(t,f.data,r),e.abrupt("return");case 23:e.next=18;break;case 25:e.next=30;break;case 27:e.prev=27,e.t2=e.catch(16),c.e(e.t2);case 30:return e.prev=30,c.f(),e.finish(30);case 33:d=u(s),e.prev=34,d.s();case 36:if((p=d.n()).done){e.next=43;break}if("excalidraw"!==(h=p.value).type){e.next=41;break}return(0,S.pasteExcalidrawContent)(t,h.data,r),e.abrupt("return");case 41:e.next=36;break;case 43:e.next=48;break;case 45:e.prev=45,e.t3=e.catch(34),d.e(e.t3);case 48:return e.prev=48,d.f(),e.finish(48);case 51:v=u(s),e.prev=52,v.s();case 54:if((m=v.n()).done){e.next=77;break}if("text"!==(b=m.value).type||"html"!==b.subtype){e.next=67;break}if(w=(new DOMParser).parseFromString(b.data,"text/html"),k=w.querySelector("body"),!(k&&1===Array.from(k.children).filter((function(e){return 1===e.nodeType})).length&&k.firstElementChild&&"A"===k.firstElementChild.tagName&&k.firstElementChild.hasAttribute("href")&&""!==k.firstElementChild.getAttribute("href"))){e.next=64;break}return j=k.firstElementChild.getAttribute("href"),E(t,j,r,s),e.abrupt("return");case 64:if(s.some((function(e){return"text"===e.type&&"html"!==e.subtype}))||!b.data.trim()){e.next=67;break}return E(t,_(b.data),r,s),e.abrupt("return");case 67:if("text"!==b.type||"text"!==b.subtype||!b.data.startsWith("<iframe ")){e.next=75;break}if(I=(new DOMParser).parseFromString(b.data,"text/html"),T=I.querySelector("body"),!(T&&1===Array.from(T.children).filter((function(e){return 1===e.nodeType})).length&&T.firstElementChild&&"IFRAME"===T.firstElementChild.tagName&&T.firstElementChild.hasAttribute("src")&&""!==T.firstElementChild.getAttribute("src"))){e.next=75;break}return C=T.firstElementChild.getAttribute("src"),E(t,C,r,s),e.abrupt("return");case 75:e.next=54;break;case 77:e.next=82;break;case 79:e.prev=79,e.t4=e.catch(52),v.e(e.t4);case 82:return e.prev=82,v.f(),e.finish(82);case 85:M=u(s),e.prev=86,M.s();case 88:if((A=M.n()).done){e.next=95;break}if("text"!==(D=A.value).type||"url"!==D.subtype){e.next=93;break}return(0,O.pasteUrl)(t,D.data,r,s),e.abrupt("return");case 93:e.next=88;break;case 95:e.next=100;break;case 97:e.prev=97,e.t5=e.catch(86),M.e(e.t5);case 100:return e.prev=100,M.f(),e.finish(100);case 103:R=u(s),e.prev=104,R.s();case 106:if((N=R.n()).done){e.next=113;break}if("text"!==(L=N.value).type||"text"!==L.subtype||!L.data.trim()){e.next=111;break}return E(t,L.data,r,s),e.abrupt("return");case 111:e.next=106;break;case 113:e.next=118;break;case 115:e.prev=115,e.t6=e.catch(104),R.e(e.t6);case 118:return e.prev=118,R.f(),e.finish(118);case 121:case"end":return e.stop()}}),e,null,[[16,27,30,33],[34,45,48,51],[52,79,82,85],[86,97,100,103],[104,115,118,121]])})))).apply(this,arguments)}var R=function(){var e=a(i().mark((function e(t){var n,r,o,a,u,s;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.resolveAssetsInContent(t.getContentFromCurrentPage(t.getSelectedShapeIds()));case 2:if(n=e.sent){e.next=6;break}return navigator&&navigator.clipboard&&navigator.clipboard.writeText(""),e.abrupt("return");case 6:if(r=y.default.compressToBase64(JSON.stringify({type:"application/tldraw",kind:"content",data:n})),"undefined"!==typeof navigator){e.next=11;break}return e.abrupt("return");case 11:a=n.shapes.map((function(e){return t.getShapeUtil(e).getText(e)})).filter(g.isDefined),null!==(o=navigator.clipboard)&&void 0!==o&&o.write?(u=new Blob(["<div data-tldraw>".concat(r,"</div>")],{type:"text/html"}),""===(s=a.join(" "))&&(s=" "),navigator.clipboard.write([new ClipboardItem({"text/html":u,"text/plain":new Blob([s],{type:"text/plain"})})])):navigator.clipboard.writeText&&navigator.clipboard.writeText("<div data-tldraw>".concat(r,"</div>"));case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function N(){var e=(0,g.useEditor)(),t=(0,w.useUiEvents)(),n=(0,m.useCallback)(function(){var n=a(i().mark((function n(r){return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(0!==e.getSelectedShapeIds().length){n.next=2;break}return n.abrupt("return");case 2:return n.next=4,R(e);case 4:t("copy",{source:r});case 5:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),[e,t]),r=(0,m.useCallback)(function(){var n=a(i().mark((function n(r){return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(0!==e.getSelectedShapeIds().length){n.next=2;break}return n.abrupt("return");case 2:return n.next=4,R(e);case 4:e.deleteShapes(e.getSelectedShapeIds()),t("cut",{source:r});case 6:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),[e,t]),o=(0,m.useCallback)(function(){var n=a(i().mark((function n(r,a,u){return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(null===e.getEditingShapeId()){n.next=2;break}return n.abrupt("return");case 2:Array.isArray(r)&&r[0]instanceof ClipboardItem?(M({editor:e,clipboardItems:r,point:u}),t("paste",{source:"menu"})):navigator.clipboard.read().then((function(e){o(e,a,u)}));case 3:case"end":return n.stop()}}),n)})));return function(e,t,r){return n.apply(this,arguments)}}(),[e,t]);return{copy:n,cut:r,paste:o}}function L(){var e=(0,g.useEditor)(),t=(0,w.useUiEvents)(),n=(0,g.useValue)("editor.isFocused",(function(){return e.getInstanceState().isFocused}),[e]);(0,m.useEffect)((function(){if(n){var r=function(){var n=a(i().mark((function n(r){return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(0!==e.getSelectedShapeIds().length&&null===e.getEditingShapeId()&&!T(e)){n.next=2;break}return n.abrupt("return");case 2:return(0,g.preventDefault)(r),n.next=5,R(e);case 5:t("copy",{source:"kbd"});case 6:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),o=!1,u=function(t){1===t.button&&(o=!0,e.timers.requestAnimationFrame((function(){o=!1})))},s=function(n){var r;if(o)(0,g.stopEventPropagation)(n);else if(null===e.getEditingShapeId()&&!T(e)){var i=void 0,a=!1;e.inputs.shiftKey&&(a=!0),e.user.getIsPasteAtCursorMode()&&(a=!a),a&&(i=e.inputs.currentPagePoint);var u=function(){n.clipboardData&&C(e,n.clipboardData,i)};if(null!==(r=navigator.clipboard)&&void 0!==r&&r.read){var s,c=Array.from((null===(s=n.clipboardData)||void 0===s?void 0:s.files)||[]);navigator.clipboard.read().then((function(t){Array.isArray(t)&&t[0]instanceof ClipboardItem&&M({editor:e,clipboardItems:t,point:i,fallbackFiles:c})}),(function(){u()}))}else u();(0,g.preventDefault)(n),t("paste",{source:"kbd"})}};return document.addEventListener("copy",r),document.addEventListener("cut",c),document.addEventListener("paste",s),document.addEventListener("pointerup",u),function(){document.removeEventListener("copy",r),document.removeEventListener("cut",c),document.removeEventListener("paste",s),document.removeEventListener("pointerup",u)}}function c(e){return l.apply(this,arguments)}function l(){return(l=a(i().mark((function n(r){return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(0!==e.getSelectedShapeIds().length&&null===e.getEditingShapeId()&&!T(e)){n.next=2;break}return n.abrupt("return");case 2:return(0,g.preventDefault)(r),n.next=5,R(e);case 5:e.deleteShapes(e.getSelectedShapeIds()),t("cut",{source:"kbd"});case 7:case"end":return n.stop()}}),n)})))).apply(this,arguments)}}),[e,t,n])}},42473:function(e,t,n){"use strict";var r,o=n(50883).default,i=Object.defineProperty,a=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,c={};!function(e,t){for(var n in t)i(e,n,{get:t[n],enumerable:!0})}(c,{useCopyAs:function(){return v}}),e.exports=(r=c,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var c,l=o(u(t));try{var f=function(){var o=c.value;s.call(e,o)||o===n||i(e,o,{get:function(){return t[o]},enumerable:!(r=a(t,o))||r.enumerable})};for(l.s();!(c=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(i({},"__esModule",{value:!0}),r));var l=n(57777),f=n(9950),d=n(98641),p=n(5450),h=n(97410);function v(){var e=(0,l.useEditor)(),t=(0,p.useToasts)().addToast,n=(0,h.useTranslation)();return(0,f.useCallback)((function(r){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"svg";(0,d.copyAs)(e,r,o).catch((function(){t({id:"copy-fail",severity:"warning",title:n("toast.error.copy-fail.title"),description:n("toast.error.copy-fail.desc")})}))}),[e,t,n])}},25728:function(e,t,n){"use strict";var r,o=n(50883).default,i=Object.defineProperty,a=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,c={};!function(e,t){for(var n in t)i(e,n,{get:t[n],enumerable:!0})}(c,{useEditorEvents:function(){return p}}),e.exports=(r=c,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var c,l=o(u(t));try{var f=function(){var o=c.value;s.call(e,o)||o===n||i(e,o,{get:function(){return t[o]},enumerable:!(r=a(t,o))||r.enumerable})};for(l.s();!(c=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(i({},"__esModule",{value:!0}),r));var l=n(57777),f=n(9950),d=n(5450);function p(){var e=(0,l.useEditor)(),t=(0,d.useToasts)().addToast;(0,f.useEffect)((function(){function n(e){var n=e.name,r=e.count;t({title:"Maximum Shapes Reached",description:"You've reached the maximum number of shapes allowed on ".concat(n," (").concat(r,"). Please delete some shapes or move to a different page to continue."),severity:"warning"})}return e.addListener("max-shapes",n),function(){e.removeListener("max-shapes",n)}}),[e,t])}},28850:function(e,t,n){"use strict";var r,o=n(50883).default,i=Object.defineProperty,a=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,c={};!function(e,t){for(var n in t)i(e,n,{get:t[n],enumerable:!0})}(c,{useExportAs:function(){return v}}),e.exports=(r=c,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var c,l=o(u(t));try{var f=function(){var o=c.value;s.call(e,o)||o===n||i(e,o,{get:function(){return t[o]},enumerable:!(r=a(t,o))||r.enumerable})};for(l.s();!(c=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(i({},"__esModule",{value:!0}),r));var l=n(57777),f=n(9950),d=n(33242),p=n(5450),h=n(97410);function v(){var e=(0,l.useEditor)(),t=(0,p.useToasts)().addToast,n=(0,h.useTranslation)();return(0,f.useCallback)((function(r){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"png",i=arguments.length>2?arguments[2]:void 0;(0,d.exportAs)(e,r,o,i,{scale:1,background:e.getInstanceState().exportBackground}).catch((function(e){console.error(e.message),t({id:"export-fail",title:n("toast.error.export-fail.title"),description:n("toast.error.export-fail.desc"),severity:"error"})}))}),[e,t,n])}},5184:function(e,t,n){"use strict";var r,o=n(4633).default,i=n(12897).default,a=n(29293).default,u=n(50883).default,s=Object.defineProperty,c=Object.getOwnPropertyDescriptor,l=Object.getOwnPropertyNames,f=Object.prototype.hasOwnProperty,d={};!function(e,t){for(var n in t)s(e,n,{get:t[n],enumerable:!0})}(d,{flattenShapesToImages:function(){return v},useFlatten:function(){return y}}),e.exports=(r=d,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,i=u(l(t));try{var a=function(){var i=o.value;f.call(e,i)||i===n||s(e,i,{get:function(){return t[i]},enumerable:!(r=c(t,i))||r.enumerable})};for(i.s();!(o=i.n()).done;)a()}catch(d){i.e(d)}finally{i.f()}}return e}(s({},"__esModule",{value:!0}),r));var p=n(57777),h=n(9950);function v(e,t,n){return g.apply(this,arguments)}function g(){return(g=a(o().mark((function e(t,n,r){var a,s,c,l,f,d,h,v,g,y,m,b,w,S,x,P,O,k,_;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=(0,p.compact)(n.map((function(e){var n=t.getShape(e);if(n&&void 0!==t.getShapeUtil(n.type).toSvg)return n}))),0!==a.length){e.next=3;break}return e.abrupt("return");case 3:if(1!==a.length){e.next=9;break}if(s=a[0]){e.next=7;break}return e.abrupt("return");case 7:if(!t.isShapeOfType(s,"image")){e.next=9;break}return e.abrupt("return");case 9:if(c=[],void 0===r){e.next=45;break}l=a.map((function(e){return{shape:e,bounds:t.getShapeMaskedPageBounds(e).clone().expandBy(r)}})),f=0;case 13:if(!(f<l.length)){e.next=43;break}if(d=l[f],0!==f){e.next=18;break}return c[0]={shapes:[d.shape],bounds:d.bounds},e.abrupt("continue",40);case 18:h=!1,v=u(c),e.prev=20,v.s();case 22:if((g=v.n()).done){e.next=31;break}if(!(y=g.value).bounds.includes(d.bounds)){e.next=29;break}return y.shapes.push(d.shape),y.bounds.expand(d.bounds),h=!0,e.abrupt("break",31);case 29:e.next=22;break;case 31:e.next=36;break;case 33:e.prev=33,e.t0=e.catch(20),v.e(e.t0);case 36:return e.prev=36,v.f(),e.finish(36);case 39:h||c.push({shapes:[d.shape],bounds:d.bounds});case 40:f++,e.next=13;break;case 43:e.next=47;break;case 45:m=p.Box.Common(a.map((function(e){return t.getShapeMaskedPageBounds(e)}))),c.push({shapes:a,bounds:m});case 47:b=t.options.flattenImageBoundsPadding,w=0,S=c;case 49:if(!(w<S.length)){e.next=67;break}return x=S[w],void 0!==r&&x.bounds.expandBy(-r),e.next=54,t.getSvgString(x.shapes,{padding:b});case 54:if(null!==(P=e.sent)&&void 0!==P&&P.svg){e.next=57;break}return e.abrupt("continue",64);case 57:return O=new Blob([P.svg],{type:"image/svg+xml"}),e.next=60,t.getAssetForExternalContent({type:"file",file:new File([O],"asset.svg",{type:"image/svg+xml"})});case 60:if(k=e.sent){e.next=63;break}return e.abrupt("continue",64);case 63:x.asset=k;case 64:w++,e.next=49;break;case 67:return _=[],(0,p.transact)((function(){for(var e=0,n=c;e<n.length;e++){var r,o=n[e],a=o.asset,s=o.bounds,l=o.shapes;if(a){var f=null!==(r=t.findCommonAncestor(l))&&void 0!==r?r:t.getCurrentPageId();if(f){var d,h="a1",v=u(l);try{for(v.s();!(d=v.n()).done;){var g=d.value;if(g.parentId===f){g.index>h&&(h=g.index);break}}}catch(O){v.e(O)}finally{v.f()}var y=void 0,m=void 0,w=void 0;if((0,p.isShapeId)(f)){var S=t.getShape(f);if(!S)continue;var x=t.getPointInShapeSpace(S,{x:s.x,y:s.y});w=t.getShapePageTransform(f).rotation(),x.sub(new p.Vec(b,b).rot(-w)),y=x.x,m=x.y}else y=s.x-b,m=s.y-b,w=0;t.deleteShapes(l),t.createAssets([i(i({},a),{},{id:a.id})]);var P=(0,p.createShapeId)();t.createShape({id:P,type:"image",index:h,parentId:f,x:y,y:m,rotation:-w,props:{assetId:a.id,w:s.w+2*b,h:s.h+2*b}}),_.push(P)}}}})),e.abrupt("return",_);case 70:case"end":return e.stop()}}),e,null,[[20,33,36,39]])})))).apply(this,arguments)}function y(){var e=(0,p.useEditor)();return(0,h.useCallback)((function(t){return v(e,t)}),[e])}},88668:function(e,t,n){"use strict";var r,o=n(50883).default,i=Object.defineProperty,a=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,c={};!function(e,t){for(var n in t)i(e,n,{get:t[n],enumerable:!0})}(c,{useGetEmbedDefinition:function(){return d},useGetEmbedShapeUtil:function(){return f}}),e.exports=(r=c,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var c,l=o(u(t));try{var f=function(){var o=c.value;s.call(e,o)||o===n||i(e,o,{get:function(){return t[o]},enumerable:!(r=a(t,o))||r.enumerable})};for(l.s();!(c=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(i({},"__esModule",{value:!0}),r));var l=n(57777);function f(){return(0,l.useEditor)().getShapeUtil("embed")}function d(){var e=f();return function(t){return e?e.getEmbedDefinition(t):void 0}}},78739:function(e,t,n){"use strict";var r,o=n(50883).default,i=Object.defineProperty,a=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,c={};!function(e,t){for(var n in t)i(e,n,{get:t[n],enumerable:!0})}(c,{useGetEmbedDefinitions:function(){return f}}),e.exports=(r=c,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var c,l=o(u(t));try{var f=function(){var o=c.value;s.call(e,o)||o===n||i(e,o,{get:function(){return t[o]},enumerable:!(r=a(t,o))||r.enumerable})};for(l.s();!(c=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(i({},"__esModule",{value:!0}),r));var l=n(88668);function f(){var e=(0,l.useGetEmbedShapeUtil)();return e?e.getEmbedDefinitions():[]}},29037:function(e,t,n){"use strict";var r,o=n(4633).default,i=n(29293).default,a=n(50883).default,u=Object.create,s=Object.defineProperty,c=Object.getOwnPropertyDescriptor,l=Object.getOwnPropertyNames,f=Object.getPrototypeOf,d=Object.prototype.hasOwnProperty,p=function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,i=a(l(t));try{var u=function(){var i=o.value;d.call(e,i)||i===n||s(e,i,{get:function(){return t[i]},enumerable:!(r=c(t,i))||r.enumerable})};for(i.s();!(o=i.n()).done;)u()}catch(f){i.e(f)}finally{i.f()}}return e},h={};!function(e,t){for(var n in t)s(e,n,{get:t[n],enumerable:!0})}(h,{MimeTypeContext:function(){return y},useInsertMedia:function(){return m}}),e.exports=(r=h,p(s({},"__esModule",{value:!0}),r));var v=n(57777),g=function(e,t,n){return n=null!=e?u(f(e)):{},p(!t&&e&&e.__esModule?n:s(n,"default",{value:e,enumerable:!0}),e)}(n(9950)),y=g.default.createContext([]);function m(){var e=(0,v.useEditor)(),t=(0,g.useRef)(),n=(0,v.useShallowArrayIdentity)(g.default.useContext(y));return(0,g.useEffect)((function(){var r,a=window.document.createElement("input");function u(e){return s.apply(this,arguments)}function s(){return(s=i(o().mark((function t(n){var r;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if((r=n.target.files)&&0!==r.length){t.next=3;break}return t.abrupt("return");case 3:return e.markHistoryStoppingPoint("insert media"),t.next=6,e.putExternalContent({type:"files",files:Array.from(r),point:e.getViewportPageBounds().center,ignoreParent:!1});case 6:a.value="";case 7:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return a.type="file",a.accept=null!==(r=null===n||void 0===n?void 0:n.join(","))&&void 0!==r?r:v.DEFAULT_SUPPORTED_MEDIA_TYPE_LIST,a.multiple=!0,t.current=a,a.addEventListener("change",u),function(){t.current=void 0,a.removeEventListener("change",u)}}),[e,n]),(0,g.useCallback)((function(){var e;null===(e=t.current)||void 0===e||e.click()}),[t])}},37454:function(e,t,n){"use strict";var r,o=n(50883).default,i=Object.defineProperty,a=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,c={};!function(e,t){for(var n in t)i(e,n,{get:t[n],enumerable:!0})}(c,{useCollaborationStatus:function(){return d},useShowCollaborationUi:function(){return f}}),e.exports=(r=c,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var c,l=o(u(t));try{var f=function(){var o=c.value;s.call(e,o)||o===n||i(e,o,{get:function(){return t[o]},enumerable:!(r=a(t,o))||r.enumerable})};for(l.s();!(c=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(i({},"__esModule",{value:!0}),r));var l=n(57777);function f(){var e=(0,l.useMaybeEditor)();return void 0!==(null===e||void 0===e?void 0:e.store.props.collaboration)}function d(){var e=(0,l.useMaybeEditor)();return(0,l.useValue)("sync status",(function(){var t;return null!==e&&void 0!==e&&null!==(t=e.store.props.collaboration)&&void 0!==t&&t.status?e.store.props.collaboration.status.get():null}),[e])}},51750:function(e,t,n){"use strict";var r,o=n(50883).default,i=Object.create,a=Object.defineProperty,u=Object.getOwnPropertyDescriptor,s=Object.getOwnPropertyNames,c=Object.getPrototypeOf,l=Object.prototype.hasOwnProperty,f=function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var i,c=o(s(t));try{var f=function(){var o=i.value;l.call(e,o)||o===n||a(e,o,{get:function(){return t[o]},enumerable:!(r=u(t,o))||r.enumerable})};for(c.s();!(i=c.n()).done;)f()}catch(d){c.e(d)}finally{c.f()}}return e},d={};!function(e,t){for(var n in t)a(e,n,{get:t[n],enumerable:!0})}(d,{areShortcutsDisabled:function(){return x},useKeyboardShortcuts:function(){return w}}),e.exports=(r=d,f(a({},"__esModule",{value:!0}),r));var p=n(57777),h=function(e,t,n){return n=null!=e?i(c(e)):{},f(!t&&e&&e.__esModule?n:a(n,"default",{value:e,enumerable:!0}),e)}(n(83665)),v=n(9950),g=n(2491),y=n(19098),m=n(48357),b=["copy","cut","paste","asset"];function w(){var e=(0,p.useEditor)(),t=(0,y.useReadonly)(),n=(0,g.useActions)(),r=(0,m.useTools)(),o=(0,p.useValue)("is focused",(function(){return e.getInstanceState().isFocused}),[e]);(0,v.useEffect)((function(){if(o){for(var i=new Array,a=function(e,t){(0,h.default)(e,{element:document.body},t),i.push((function(){h.default.unbind(e,t)}))},u=function(){var n=c[s];return n.kbd?t&&!n.readonlyOk||b.includes(n.id)?0:void a(S(n.kbd),(function(t){x(e)||((0,p.preventDefault)(t),n.onSelect("kbd"))})):0},s=0,c=Object.values(n);s<c.length;s++)u();for(var l,f,d=function(){var t=g[v];return!t.kbd||!t.readonlyOk&&e.getIsReadonly()||b.includes(t.id)?0:void a(S(t.kbd),(function(n){x(e)||((0,p.preventDefault)(n),t.onSelect("kbd"))}))},v=0,g=Object.values(r);v<g.length;v++)d();return a(",",(function(t){if(!x(e)&&!e.inputs.keys.has("Comma")){(0,p.preventDefault)(t),e.focus(),e.inputs.keys.add("Comma");var n=e.inputs.currentPagePoint,r=n.x,o=n.y,i=n.z,a=e.pageToScreen({x:r,y:o}),u={type:"pointer",name:"pointer_down",point:{x:a.x,y:a.y,z:i},shiftKey:t.shiftKey,altKey:t.altKey,ctrlKey:t.metaKey||t.ctrlKey,metaKey:t.metaKey,accelKey:(0,p.isAccelKey)(t),pointerId:0,button:0,isPen:e.getInstanceState().isPenMode,target:"canvas"};e.dispatch(u)}})),l=",",f=function(t){if(!x(e)&&e.inputs.keys.has("Comma")){e.inputs.keys.delete("Comma");var n=e.inputs.currentScreenPoint,r={type:"pointer",name:"pointer_up",point:{x:n.x,y:n.y,z:n.z},shiftKey:t.shiftKey,altKey:t.altKey,ctrlKey:t.metaKey||t.ctrlKey,metaKey:t.metaKey,accelKey:(0,p.isAccelKey)(t),pointerId:0,button:0,isPen:e.getInstanceState().isPenMode,target:"canvas"};e.dispatch(r)}},(0,h.default)(l,{element:document.body,keyup:!0,keydown:!1},f),i.push((function(){h.default.unbind(l,f)})),function(){i.forEach((function(e){return e()}))}}}),[n,r,t,e,o])}function S(e){return function(e){"string"!==typeof e&&(e="");for(var t=(e=e.replace(/\s/g,"")).split(","),n=t.lastIndexOf("");n>=0;)t[n-1]+=",",t.splice(n,1),n=t.lastIndexOf("");return t}(e).map((function(e){var t=e.split("");return 1===t.length?t[0]:"!"===t[0]?"shift+".concat(t[1]):"?"===t[0]?3===t.length&&"!"===t[1]?"alt+shift+".concat(t[2]):"alt+".concat(t[1]):"$"===t[0]?"!"===t[1]?"cmd+shift+".concat(t[2],",ctrl+shift+").concat(t[2]):"?"===t[1]?"cmd+\u2325+".concat(t[2],",ctrl+alt+").concat(t[2]):"cmd+".concat(t[1],",ctrl+").concat(t[1]):e})).join(",")}function x(e){return e.menus.hasAnyOpenMenus()||null!==e.getEditingShapeId()||e.getCrashingError()}},38831:function(e,t,n){"use strict";var r,o=n(85715).default,i=n(50883).default,a=Object.create,u=Object.defineProperty,s=Object.getOwnPropertyDescriptor,c=Object.getOwnPropertyNames,l=Object.getPrototypeOf,f=Object.prototype.hasOwnProperty,d=function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,a=i(c(t));try{var l=function(){var i=o.value;f.call(e,i)||i===n||u(e,i,{get:function(){return t[i]},enumerable:!(r=s(t,i))||r.enumerable})};for(a.s();!(o=a.n()).done;)l()}catch(d){a.e(d)}finally{a.f()}}return e},p={};!function(e,t){for(var n in t)u(e,n,{get:t[n],enumerable:!0})}(p,{useLocalStorageState:function(){return g}}),e.exports=(r=p,d(u({},"__esModule",{value:!0}),r));var h=n(57777),v=function(e,t,n){return n=null!=e?a(l(e)):{},d(!t&&e&&e.__esModule?n:u(n,"default",{value:e,enumerable:!0}),e)}(n(9950));function g(e,t){var n=v.default.useState(t),r=o(n,2),i=r[0],a=r[1];return v.default.useLayoutEffect((function(){var t=(0,h.getFromLocalStorage)(e);if(t)try{a(JSON.parse(t))}catch(n){console.error("Could not restore value ".concat(e," from local storage."))}}),[e]),[i,v.default.useCallback((function(t){a((function(n){var r="function"===typeof t?t(n):t;return(0,h.setInLocalStorage)(e,JSON.stringify(r)),r}))}),[e])]}},80459:function(e,t,n){"use strict";var r,o=n(50883).default,i=Object.defineProperty,a=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,c={};!function(e,t){for(var n in t)i(e,n,{get:t[n],enumerable:!0})}(c,{useMenuIsOpen:function(){return p}}),e.exports=(r=c,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var c,l=o(u(t));try{var f=function(){var o=c.value;s.call(e,o)||o===n||i(e,o,{get:function(){return t[o]},enumerable:!(r=a(t,o))||r.enumerable})};for(l.s();!(c=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(i({},"__esModule",{value:!0}),r));var l=n(57777),f=n(9950),d=n(14867);function p(e,t){var n=(0,l.useMaybeEditor)(),r=(0,f.useCallback)((function(e){e&&(null===n||void 0===n||n.complete()),null===t||void 0===t||t(e)}),[n,t]),o=(0,d.useUiEvents)(),i=(0,f.useCallback)((function(t){o(t,{source:"unknown",id:e})}),[e,o]);return(0,l.useGlobalMenuIsOpen)(n?"".concat(e,"-").concat(n.contextId):e,r,i)}},30762:function(e,t,n){"use strict";var r,o=n(85715).default,i=n(50883).default,a=Object.defineProperty,u=Object.getOwnPropertyDescriptor,s=Object.getOwnPropertyNames,c=Object.prototype.hasOwnProperty,l={};!function(e,t){for(var n in t)a(e,n,{get:t[n],enumerable:!0})}(l,{usePreloadAssets:function(){return h}}),e.exports=(r=l,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,l=i(s(t));try{var f=function(){var i=o.value;c.call(e,i)||i===n||a(e,i,{get:function(){return t[i]},enumerable:!(r=u(t,i))||r.enumerable})};for(l.s();!(o=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(a({},"__esModule",{value:!0}),r));var f=n(9950),d=n(74904),p=function(e,t){var n=(0,f.useState)(2),r=o(n,2),i=r[0],a=r[1];return(0,f.useEffect)((function(){var n=!1;return a(2),(0,d.preloadFont)(e,t).then((function(){n||a(0)})).catch((function(e){n||(console.error(e),a(1))})),function(){n=!0}}),[e,t]),i};function h(e){var t=(0,f.useMemo)((function(){return function(e){return{draw:{url:e.fonts.draw,format:e.fonts.draw.split(".").pop()},serif:{url:e.fonts.serif,format:e.fonts.serif.split(".").pop()},sansSerif:{url:e.fonts.sansSerif,format:e.fonts.sansSerif.split(".").pop()},monospace:{url:e.fonts.monospace,format:e.fonts.monospace.split(".").pop()}}}(e)}),[e]),n=[p("tldraw_draw",t.draw),p("tldraw_serif",t.serif),p("tldraw_sans",t.sansSerif),p("tldraw_mono",t.monospace)];return{error:n.some((function(e){return 1===e})),done:!n.some((function(e){return 2===e}))}}},12237:function(e,t,n){"use strict";var r,o=n(4633).default,i=n(29293).default,a=n(50883).default,u=Object.defineProperty,s=Object.getOwnPropertyDescriptor,c=Object.getOwnPropertyNames,l=Object.prototype.hasOwnProperty,f={};!function(e,t){for(var n in t)u(e,n,{get:t[n],enumerable:!0})}(f,{usePrint:function(){return h}}),e.exports=(r=f,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,i=a(c(t));try{var f=function(){var i=o.value;l.call(e,i)||i===n||u(e,i,{get:function(){return t[i]},enumerable:!(r=s(t,i))||r.enumerable})};for(i.s();!(o=i.n()).done;)f()}catch(d){i.e(d)}finally{i.f()}}return e}(u({},"__esModule",{value:!0}),r));var d=n(57777),p=n(9950);function h(){var e=(0,d.useEditor)(),t=(0,p.useRef)(null),n=(0,p.useRef)(null);return(0,p.useCallback)(function(){var r=i(o().mark((function r(){var i,a,u,s,c,l,f,p,h,v,g,y,m,b,w,S,x,P,O,k;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(h=function(){d.tlenv.isChromeForIos?(l(),window.print()):d.tlenv.isSafari?(l(),document.execCommand("print",!1)):window.print()},p=function(e,t,n){try{i.innerHTML+='<div class="'.concat(s,'__item">\n        <div class="').concat(s,'__item__header">\n          ').concat(e.replace(/</g,"&lt;").replace(/>/g,"&gt;"),'\n        </div>\n        <div class="').concat(s,'__item__main">\n          ').concat(n,'\n        </div>\n        <div class="').concat(s,"__item__footer ").concat(s,"__item__footer__").concat(t?"":"hide",'">\n          ').concat(null!==t&&void 0!==t?t:"","\n        </div>\n      </div>")}catch(r){console.error(r)}},i=document.createElement("div"),a=document.createElement("style"),(u=function(e,t){e&&(e.innerHTML=""),t&&document.head.contains(t)&&document.head.removeChild(t),e&&document.body.contains(e)&&document.body.removeChild(e)})(t.current,n.current),t.current=i,n.current=a,s="tl-print-surface-".concat((0,d.uniqueId)()),i.className=s,c=!1,a.innerHTML="\n\t\t\t.".concat(s," {\n\t\t\t\tdisplay: none;\n\t\t\t}\n\n\t\t\t.").concat(s," svg {\n\t\t\t\tmax-width: 100%;\n\t\t\t\theight: 100%;\n\t\t\t\tdisplay: block;\n\t\t\t}\n\n\t\t\t@media print {\t\t\t\t  \n\t\t\t\thtml, body {\n\t\t\t\t\tmin-height: 100%;\n\t\t\t\t\theight: 100%;\n\t\t\t\t\tmargin: 0;\n\t\t\t\t}\n\n\t\t\t\tbody {\n\t\t\t\t\tposition: relative;\n\t\t\t\t}\n\n\t\t\t\tbody > * {\n\t\t\t\t\tdisplay: none;\n\t\t\t\t}\n\n\t\t\t\t.tldraw__editor {\n\t\t\t\t\tdisplay: none;\n\t\t\t\t}\n\n\t\t\t\t.").concat(s," {\n\t\t\t\t\tdisplay: block !important;\n\t\t\t\t\tbackground: white;\n\t\t\t\t\tmin-height: 100%;\n\t\t\t\t\theight: 100%;\n\t\t\t\t\tmax-width: 100%;\n\t\t\t\t}\n\n\t\t\t\t.").concat(s,"__item {\n\t\t\t\t\tpadding: 10mm;\n\t\t\t\t\tdisplay: flex;\n\t\t\t\t\tmin-height: 100%;\n\t\t\t\t\tflex-direction: column;\n\t\t\t\t\tpage-break-after: always;\n\t\t\t\t\tposition: relative;\n\t\t\t\t\toverflow: hidden;\n\t\t\t\t\theight: 100%;\n\t\t\t\t}\n\n\t\t\t\t.").concat(s,"__item__main {\n\t\t\t\t\tflex: 1;\n\t\t\t\t\tdisplay: flex;\n\t\t\t\t\talign-items: center;\n\t\t\t\t\tjustify-content: center;\n\t\t\t\t\tmax-height: 100%;\n\t\t\t\t}\n\n\t\t\t\t.").concat(s,"__item__header {\n\t\t\t\t\tdisplay: none;\n\t\t\t\t}\n\n\t\t\t\t.").concat(s,"__item__footer {\n\t\t\t\t\tdisplay: none;\n\t\t\t\t\ttext-align: right;\n\t\t\t\t}\n\n\t\t\t\t.").concat(s,"__item__footer__hide {\n\t\t\t\t\tdisplay: none;\n\t\t\t\t}\n\n\t\t\t\t").concat("","\n\t\t\t}\n\n\t\t"),l=function(){document.head.appendChild(a),document.body.appendChild(i)},f=function(){e.once("tick",(function(){u(i,a)}))},window.addEventListener("beforeprint",l),window.addEventListener("afterprint",f),v=e.getSelectedShapeIds(),g=e.getCurrentPageId(),y=e.getPages(),m={scale:1,background:!1,darkMode:!1,preserveAspectRatio:"xMidYMid meet"},!(e.getSelectedShapeIds().length>0)){r.next=29;break}return r.next=25,e.getSvgString(v,m);case 25:(b=r.sent)&&(w=y.find((function(e){return e.id===g})),p("tldraw \u2014 ".concat(null===w||void 0===w?void 0:w.name),null,b.svg),h()),r.next=48;break;case 29:if(!c){r.next=43;break}S=0;case 31:if(!(S<y.length)){r.next=40;break}return x=y[S],r.next=35,e.getSvgString(e.getSortedChildIdsForParent(x.id),m);case 35:(P=r.sent)&&p("tldraw \u2014 ".concat(x.name),"".concat(S,"/").concat(y.length),P.svg);case 37:S++,r.next=31;break;case 40:h(),r.next=48;break;case 43:return O=e.getCurrentPage(),r.next=46,e.getSvgString(e.getSortedChildIdsForParent(O.id),m);case 46:(k=r.sent)&&(p("tldraw \u2014 ".concat(O.name),null,k.svg),h());case 48:window.removeEventListener("beforeprint",l),window.removeEventListener("afterprint",f);case 50:case"end":return r.stop()}}),r)})));return function(){return r.apply(this,arguments)}}(),[e])}},19098:function(e,t,n){"use strict";var r,o=n(50883).default,i=Object.defineProperty,a=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,c={};!function(e,t){for(var n in t)i(e,n,{get:t[n],enumerable:!0})}(c,{useReadonly:function(){return f}}),e.exports=(r=c,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var c,l=o(u(t));try{var f=function(){var o=c.value;s.call(e,o)||o===n||i(e,o,{get:function(){return t[o]},enumerable:!(r=a(t,o))||r.enumerable})};for(l.s();!(c=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(i({},"__esModule",{value:!0}),r));var l=n(57777);function f(){var e=(0,l.useMaybeEditor)();return(0,l.useValue)("isReadonlyMode",(function(){return!(null===e||void 0===e||!e.getIsReadonly())}),[e])}},44867:function(e,t,n){"use strict";var r,o=n(50883).default,i=Object.defineProperty,a=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,c={};!function(e,t){for(var n in t)i(e,n,{get:t[n],enumerable:!0})}(c,{useRelevantStyles:function(){return d}}),e.exports=(r=c,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var c,l=o(u(t));try{var f=function(){var o=c.value;s.call(e,o)||o===n||i(e,o,{get:function(){return t[o]},enumerable:!(r=a(t,o))||r.enumerable})};for(l.s();!(c=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(i({},"__esModule",{value:!0}),r));var l=n(57777),f=Object.freeze([l.DefaultColorStyle,l.DefaultDashStyle,l.DefaultFillStyle,l.DefaultSizeStyle]);function d(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,t=(0,l.useEditor)();return(0,l.useValue)("getRelevantStyles",(function(){var n,r=new l.SharedStyleMap(t.getSharedStyles()),i=!(null===(n=t.root.getCurrent())||void 0===n||!n.shapeType),a=t.isIn("select")&&t.getSelectedShapeIds().length>0;if(0===r.size&&t.isIn("select")&&0===t.getSelectedShapeIds().length){var u,s=o(e);try{for(s.s();!(u=s.n()).done;){var c=u.value;r.applyValue(c,t.getStyleForNextShape(c))}}catch(f){s.e(f)}finally{s.f()}}return i||a||r.size>0?r:null}),[t])}},48357:function(e,t,n){"use strict";var r,o=n(41132).default,i=n(50883).default,a=Object.create,u=Object.defineProperty,s=Object.getOwnPropertyDescriptor,c=Object.getOwnPropertyNames,l=Object.getPrototypeOf,f=Object.prototype.hasOwnProperty,d=function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,a=i(c(t));try{var l=function(){var i=o.value;f.call(e,i)||i===n||u(e,i,{get:function(){return t[i]},enumerable:!(r=s(t,i))||r.enumerable})};for(a.s();!(o=a.n()).done;)l()}catch(d){a.e(d)}finally{a.f()}}return e},p={};!function(e,t){for(var n in t)u(e,n,{get:t[n],enumerable:!0})}(p,{ToolsContext:function(){return w},ToolsProvider:function(){return S},useTools:function(){return x}}),e.exports=(r=p,d(u({},"__esModule",{value:!0}),r));var h=n(44414),v=n(57777),g=function(e,t,n){return n=null!=e?a(l(e)):{},d(!t&&e&&e.__esModule?n:u(n,"default",{value:e,enumerable:!0}),e)}(n(9950)),y=n(16036),m=n(14867),b=n(24833),w=g.createContext(null);function S(e){var t=e.overrides,n=e.children,r=(0,v.useEditor)(),i=(0,m.useUiEvents)(),a=(0,b.useDefaultHelpers)(),u=g.useMemo((function(){var e=[{id:"select",label:"tool.select",icon:"tool-pointer",kbd:"v",readonlyOk:!0,onSelect:function(e){if(r.isIn("select")){var t=r.root.getCurrent();t.exit({},t.id),t.enter({},t.id)}r.setCurrentTool("select"),i("select-tool",{source:e,id:"select"})}},{id:"hand",label:"tool.hand",icon:"tool-hand",kbd:"h",readonlyOk:!0,onSelect:function(e){r.setCurrentTool("hand"),i("select-tool",{source:e,id:"hand"})}},{id:"eraser",label:"tool.eraser",icon:"tool-eraser",kbd:"e",onSelect:function(e){r.setCurrentTool("eraser"),i("select-tool",{source:e,id:"eraser"})}},{id:"draw",label:"tool.draw",icon:"tool-pencil",kbd:"d,b,x",onSelect:function(e){r.setCurrentTool("draw"),i("select-tool",{source:e,id:"draw"})}}].concat(o(o(v.GeoShapeGeoStyle.values).map((function(e){return{id:e,label:"tool.".concat(e),meta:{geo:e},kbd:"rectangle"===e?"r":"ellipse"===e?"o":void 0,icon:"geo-"+e,onSelect:function(t){r.run((function(){r.setStyleForNextShapes(v.GeoShapeGeoStyle,e),r.setCurrentTool("geo"),i("select-tool",{source:t,id:"geo-".concat(e)})}))}}}))),[{id:"arrow",label:"tool.arrow",icon:"tool-arrow",kbd:"a",onSelect:function(e){r.setCurrentTool("arrow"),i("select-tool",{source:e,id:"arrow"})}},{id:"line",label:"tool.line",icon:"tool-line",kbd:"l",onSelect:function(e){r.setCurrentTool("line"),i("select-tool",{source:e,id:"line"})}},{id:"frame",label:"tool.frame",icon:"tool-frame",kbd:"f",onSelect:function(e){r.setCurrentTool("frame"),i("select-tool",{source:e,id:"frame"})}},{id:"text",label:"tool.text",icon:"tool-text",kbd:"t",onSelect:function(e){r.setCurrentTool("text"),i("select-tool",{source:e,id:"text"})}},{id:"asset",label:"tool.asset",icon:"tool-media",kbd:"$u",onSelect:function(e){a.insertMedia(),i("select-tool",{source:e,id:"media"})}},{id:"note",label:"tool.note",icon:"tool-note",kbd:"n",onSelect:function(e){r.setCurrentTool("note"),i("select-tool",{source:e,id:"note"})}},{id:"laser",label:"tool.laser",readonlyOk:!0,icon:"tool-laser",kbd:"k",onSelect:function(e){r.setCurrentTool("laser"),i("select-tool",{source:e,id:"laser"})}},{id:"embed",label:"tool.embed",icon:"dot",onSelect:function(e){a.addDialog({component:y.EmbedDialog}),i("select-tool",{source:e,id:"embed"})}},{id:"highlight",label:"tool.highlight",icon:"tool-highlight",kbd:"!d",onSelect:function(e){r.setCurrentTool("highlight"),i("select-tool",{source:e,id:"highlight"})}}]);e.push();var n=Object.fromEntries(e.map((function(e){return[e.id,e]})));return t?t(r,n,a):n}),[t,r,i,a]);return(0,h.jsx)(w.Provider,{value:u,children:n})}function x(){var e=g.useContext(w);if(!e)throw new Error("useTools must be used within a ToolProvider");return e}},24080:function(e,t,n){"use strict";var r,o=n(50883).default,i=Object.defineProperty,a=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,c={};!function(e,t){for(var n in t)i(e,n,{get:t[n],enumerable:!0})}(c,{DEFAULT_TRANSLATION:function(){return l}}),e.exports=(r=c,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var c,l=o(u(t));try{var f=function(){var o=c.value;s.call(e,o)||o===n||i(e,o,{get:function(){return t[o]},enumerable:!(r=a(t,o))||r.enumerable})};for(l.s();!(c=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(i({},"__esModule",{value:!0}),r));var l={"action.convert-to-bookmark":"Convert to Bookmark","action.convert-to-embed":"Convert to Embed","action.open-embed-link":"Open link","action.align-bottom":"Align bottom","action.align-center-horizontal":"Align horizontally","action.align-center-vertical":"Align vertically","action.align-center-horizontal.short":"Align H","action.align-center-vertical.short":"Align V","action.align-left":"Align left","action.align-right":"Align right","action.align-top":"Align top","action.back-to-content":"Back to content","action.bring-forward":"Bring forward","action.bring-to-front":"Bring to front","action.copy-as-json.short":"JSON","action.copy-as-json":"Copy as JSON","action.copy-as-png.short":"PNG","action.copy-as-png":"Copy as PNG","action.copy-as-svg.short":"SVG","action.copy-as-svg":"Copy as SVG","action.copy":"Copy","action.cut":"Cut","action.delete":"Delete","action.unlock-all":"Unlock all","action.distribute-horizontal":"Distribute horizontally","action.distribute-vertical":"Distribute vertically","action.distribute-horizontal.short":"Distribute H","action.distribute-vertical.short":"Distribute V","action.duplicate":"Duplicate","action.edit-link":"Edit link","action.exit-pen-mode":"Exit pen mode","action.export-as-json.short":"JSON","action.export-as-json":"Export as JSON","action.export-as-png.short":"PNG","action.export-as-png":"Export as PNG","action.export-as-svg.short":"SVG","action.export-as-svg":"Export as SVG","action.export-all-as-json.short":"JSON","action.export-all-as-json":"Export as JSON","action.export-all-as-png.short":"PNG","action.export-all-as-png":"Export as PNG","action.export-all-as-svg.short":"SVG","action.export-all-as-svg":"Export as SVG","action.fit-frame-to-content":"Fit to content","action.flip-horizontal":"Flip horizontally","action.flip-vertical":"Flip vertically","action.flip-horizontal.short":"Flip H","action.flip-vertical.short":"Flip V","action.fork-project":"Fork this project","action.fork-project-on-tldraw":"Fork project on tldraw","action.group":"Group","action.insert-embed":"Insert embed","action.insert-media":"Upload media","action.leave-shared-project":"Leave shared project","action.new-project":"New project","action.new-shared-project":"New shared project","action.open-cursor-chat":"Cursor chat","action.open-file":"Open file","action.pack":"Pack","action.paste":"Paste","action.paste-error-title":"Pasting failed","action.paste-error-description":"Could not paste due to missing clipboard permissions. Please enable the permissions and try again.","action.print":"Print","action.redo":"Redo","action.remove-frame":"Remove frame","action.rename":"Rename","action.rotate-ccw":"Rotate counterclockwise","action.rotate-cw":"Rotate clockwise","action.save-copy":"Save a copy","action.select-all":"Select all","action.select-none":"Select none","action.send-backward":"Send backward","action.send-to-back":"Send to back","action.share-project":"Share this project","action.stack-horizontal":"Stack horizontally","action.stack-vertical":"Stack vertically","action.stack-horizontal.short":"Stack H","action.stack-vertical.short":"Stack V","action.stop-following":"Stop following","action.stretch-horizontal":"Stretch horizontally","action.stretch-vertical":"Stretch vertically","action.stretch-horizontal.short":"Stretch H","action.stretch-vertical.short":"Stretch V","action.toggle-auto-size":"Toggle auto size","action.toggle-dark-mode.menu":"Dark mode","action.toggle-dark-mode":"Toggle dark mode","action.toggle-paste-at-cursor.menu":"Paste at cursor","action.toggle-paste-at-cursor":"Toggle paste at cursor","action.toggle-wrap-mode.menu":"Select on wrap","action.toggle-wrap-mode":"Toggle Select on wrap","action.toggle-reduce-motion.menu":"Reduce motion","action.toggle-reduce-motion":"Toggle reduce motion","action.toggle-edge-scrolling.menu":"Edge scrolling","action.toggle-edge-scrolling":"Toggle edge scrolling","action.toggle-debug-mode.menu":"Debug mode","action.toggle-debug-mode":"Toggle debug mode","action.toggle-focus-mode.menu":"Focus mode","action.toggle-focus-mode":"Toggle focus mode","action.toggle-dynamic-size-mode.menu":"Dynamic size","action.toggle-dynamic-size-mode":"Toggle dynamic size","action.toggle-grid.menu":"Show grid","action.toggle-grid":"Toggle grid","action.toggle-lock":"Toggle locked","action.flatten-to-image":"Flatten","action.toggle-snap-mode.menu":"Always snap","action.toggle-snap-mode":"Toggle always snap","action.toggle-tool-lock.menu":"Tool lock","action.toggle-tool-lock":"Toggle tool lock","action.toggle-transparent.context-menu":"Transparent","action.toggle-transparent.menu":"Transparent","action.toggle-transparent":"Toggle transparent background","action.undo":"Undo","action.ungroup":"Ungroup","action.zoom-in":"Zoom in","action.zoom-out":"Zoom out","action.zoom-to-100":"Zoom to 100%","action.zoom-to-fit":"Zoom to fit","action.zoom-to-selection":"Zoom to selection","assets.files.size-too-big":"File size is too big","assets.files.type-not-allowed":"File type is not allowed","assets.files.upload-failed":"Upload failed","assets.url.failed":"Couldn't load URL preview","theme.dark":"Dark","theme.light":"Light","theme.system":"System","color-style.white":"White","color-style.black":"Black","color-style.blue":"Blue","color-style.green":"Green","color-style.grey":"Grey","color-style.light-blue":"Light blue","color-style.light-green":"Light green","color-style.light-red":"Light red","color-style.light-violet":"Light violet","color-style.orange":"Orange","color-style.red":"Red","color-style.violet":"Violet","color-style.yellow":"Yellow","fill-style.none":"None","document.default-name":"Untitled","fill-style.semi":"Semi","fill-style.solid":"Solid","fill-style.pattern":"Pattern","fill-style.fill":"Fill","dash-style.dashed":"Dashed","dash-style.dotted":"Dotted","dash-style.draw":"Draw","dash-style.solid":"Solid","size-style.s":"Small","size-style.m":"Medium","size-style.l":"Large","size-style.xl":"Extra large","opacity-style.0.1":"10%","opacity-style.0.25":"25%","opacity-style.0.5":"50%","opacity-style.0.75":"75%","opacity-style.1":"100%","font-style.draw":"Draw","font-style.sans":"Sans","font-style.serif":"Serif","font-style.mono":"Mono","align-style.start":"Start","align-style.middle":"Middle","align-style.end":"End","align-style.justify":"Justify","verticalAlign-style.start":"Top","verticalAlign-style.middle":"Middle","verticalAlign-style.end":"Bottom","geo-style.arrow-down":"Arrow down","geo-style.arrow-left":"Arrow left","geo-style.arrow-right":"Arrow right","geo-style.arrow-up":"Arrow up","geo-style.diamond":"Diamond","geo-style.ellipse":"Ellipse","geo-style.hexagon":"Hexagon","geo-style.octagon":"Octagon","geo-style.oval":"Oval","geo-style.cloud":"Cloud","geo-style.pentagon":"Pentagon","geo-style.rectangle":"Rectangle","geo-style.rhombus-2":"Rhombus 2","geo-style.rhombus":"Rhombus","geo-style.star":"Star","geo-style.trapezoid":"Trapezoid","geo-style.triangle":"Triangle","geo-style.x-box":"X box","geo-style.check-box":"Check box","arrowheadStart-style.none":"None","arrowheadStart-style.arrow":"Arrow","arrowheadStart-style.bar":"Bar","arrowheadStart-style.diamond":"Diamond","arrowheadStart-style.dot":"Dot","arrowheadStart-style.inverted":"Inverted","arrowheadStart-style.pipe":"Pipe","arrowheadStart-style.square":"Square","arrowheadStart-style.triangle":"Triangle","arrowheadEnd-style.none":"None","arrowheadEnd-style.arrow":"Arrow","arrowheadEnd-style.bar":"Bar","arrowheadEnd-style.diamond":"Diamond","arrowheadEnd-style.dot":"Dot","arrowheadEnd-style.inverted":"Inverted","arrowheadEnd-style.pipe":"Pipe","arrowheadEnd-style.square":"Square","arrowheadEnd-style.triangle":"Triangle","spline-style.line":"Line","spline-style.cubic":"Cubic","tool.select":"Select","tool.hand":"Hand","tool.draw":"Draw","tool.eraser":"Eraser","tool.arrow-down":"Arrow down","tool.arrow-left":"Arrow left","tool.arrow-right":"Arrow right","tool.arrow-up":"Arrow up","tool.arrow":"Arrow","tool.cloud":"Cloud","tool.diamond":"Diamond","tool.ellipse":"Ellipse","tool.hexagon":"Hexagon","tool.highlight":"Highlight","tool.line":"Line","tool.octagon":"Octagon","tool.oval":"Oval","tool.pentagon":"Pentagon","tool.rectangle":"Rectangle","tool.rhombus":"Rhombus","tool.star":"Star","tool.trapezoid":"Trapezoid","tool.triangle":"Triangle","tool.x-box":"X box","tool.check-box":"Check box","tool.asset":"Asset","tool.frame":"Frame","tool.note":"Note","tool.laser":"Laser","tool.embed":"Embed","tool.text":"Text","tool.pointer-down":"Pointer down","menu.title":"Menu","menu.theme":"Theme","menu.copy-as":"Copy as","menu.edit":"Edit","menu.export-as":"Export as","menu.file":"File","menu.language":"Language","menu.preferences":"Preferences","menu.help":"Help","menu.view":"View","context-menu.edit":"Edit","context-menu.arrange":"Arrange","context-menu.copy-as":"Copy as","context-menu.export-as":"Export as","context-menu.export-all-as":"Export","context-menu.move-to-page":"Move to page","context-menu.reorder":"Reorder","page-menu.title":"Pages","page-menu.create-new-page":"Create new page","page-menu.max-page-count-reached":"Max pages reached","page-menu.new-page-initial-name":"Page 1","page-menu.edit-start":"Edit","page-menu.edit-done":"Done","page-menu.go-to-page":"Go to page","page-menu.submenu.rename":"Rename","page-menu.submenu.duplicate-page":"Duplicate","page-menu.submenu.title":"Menu","page-menu.submenu.move-down":"Move down","page-menu.submenu.move-up":"Move up","page-menu.submenu.delete":"Delete","share-menu.title":"Share","share-menu.save-note":"Download this project to your computer as a .tldr file.","share-menu.fork-note":"Create a new shared project based on this snapshot.","share-menu.share-project":"Share this project","share-menu.default-project-name":"Shared Project","share-menu.copy-link":"Copy editor link","share-menu.readonly-link":"Read-only","share-menu.create-snapshot-link":"Copy snapshot link","share-menu.snapshot-link-note":"Capture and share this project as a read-only snapshot link.","share-menu.copy-readonly-link":"Copy viewer link","share-menu.offline-note":"Create a new shared project based on your current project.","share-menu.copy-link-note":"Anyone with the link will be able to view and edit this project.","share-menu.copy-readonly-link-note":"Anyone with the link will be able to access this project.","share-menu.project-too-large":"Sorry, this project can't be shared because it's too large. We're working on it!","share-menu.upload-failed":"Sorry, we couldn't upload your project at the moment. Please try again or let us know if the problem persists.","share-menu.creating-project":"Creating the new project\u2026","share-menu.copied":"Copied link","document-name-menu.copy-link":"Copy link","status.offline":"Offline","status.online":"Online","people-menu.title":"People","people-menu.change-name":"Change name","people-menu.change-color":"Change color","people-menu.follow":"Following","people-menu.following":"Following","people-menu.leading":"Following You","people-menu.user":"(You)","people-menu.invite":"Invite others","help-menu.import-tldr-file":"Import file...","help-menu.title":"Help and resources","help-menu.about":"About tldraw","help-menu.docs":"Documentation & API","help-menu.discord":"Discord","help-menu.github":"GitHub","help-menu.keyboard-shortcuts":"Keyboard shortcuts","help-menu.twitter":"Twitter","help-menu.terms":"Terms of service","help-menu.privacy":"Privacy policy","actions-menu.title":"Actions","edit-link-dialog.title":"Edit link","edit-link-dialog.invalid-url":"A link must be a valid URL.","edit-link-dialog.detail":"Links will open in a new tab.","edit-link-dialog.url":"URL","edit-link-dialog.clear":"Clear","edit-link-dialog.save":"Continue","edit-link-dialog.cancel":"Cancel","embed-dialog.title":"Insert embed","embed-dialog.back":"Back","embed-dialog.create":"Create","embed-dialog.cancel":"Cancel","embed-dialog.url":"URL","embed-dialog.instruction":"Paste in the site's URL to create the embed.","embed-dialog.invalid-url":"We could not create an embed from that URL.","edit-pages-dialog.move-down":"Move down","edit-pages-dialog.move-up":"Move up","shortcuts-dialog.title":"Keyboard shortcuts","shortcuts-dialog.edit":"Edit","shortcuts-dialog.file":"File","shortcuts-dialog.preferences":"Preferences","shortcuts-dialog.tools":"Tools","shortcuts-dialog.transform":"Transform","shortcuts-dialog.view":"View","shortcuts-dialog.collaboration":"Collaboration","home-project-dialog.title":"Home project","home-project-dialog.description":"This is your local home project. It's just for you!","rename-project-dialog.title":"Rename project","rename-project-dialog.cancel":"Cancel","rename-project-dialog.rename":"Rename","home-project-dialog.ok":"Ok","style-panel.title":"Styles","style-panel.align":"Align","style-panel.label-align":"Label align","style-panel.vertical-align":"Vertical align","style-panel.position":"Position","style-panel.arrowheads":"Arrows","style-panel.arrowhead-start":"Start","style-panel.arrowhead-end":"End","style-panel.color":"Color","style-panel.dash":"Dash","style-panel.fill":"Fill","style-panel.font":"Font","style-panel.geo":"Shape","style-panel.mixed":"Mixed","style-panel.opacity":"Opacity","style-panel.size":"Size","style-panel.spline":"Spline","tool-panel.drawing":"Drawing","tool-panel.shapes":"Shapes","tool-panel.more":"More","debug-panel.more":"More","navigation-zone.toggle-minimap":"Toggle minimap","navigation-zone.zoom":"Zoom","focus-mode.toggle-focus-mode":"Toggle focus mode","toast.close":"Close","file-system.file-open-error.title":"Could not open file","file-system.file-open-error.not-a-tldraw-file":"The file you tried to open doesn't look like a tldraw file.","file-system.file-open-error.file-format-version-too-new":"The file you tried to open is from a newer version of tldraw. Please reload the page and try again.","file-system.file-open-error.generic-corrupted-file":"The file you tried to open is corrupted.","file-system.confirm-open.title":"Overwrite current project?","file-system.confirm-open.description":"Opening a file will replace your current project and any unsaved changes will be lost. Are you sure you want to continue?","file-system.confirm-open.cancel":"Cancel","file-system.confirm-open.open":"Open file","file-system.confirm-open.dont-show-again":"Don't ask again","file-system.confirm-clear.title":"Clear current project?","file-system.confirm-clear.description":"Creating a new project will clear your current project and any unsaved changes will be lost. Are you sure you want to continue?","file-system.confirm-clear.cancel":"Cancel","file-system.confirm-clear.continue":"Continue","file-system.confirm-clear.dont-show-again":"Don't ask again","file-system.shared-document-file-open-error.title":"Could not open file","file-system.shared-document-file-open-error.description":"Opening files from shared projects is not supported.","sharing.confirm-leave.title":"Leave current project?","sharing.confirm-leave.description":"Are you sure you want to leave this shared project? You can return to it by navigating to its URL.","sharing.confirm-leave.cancel":"Cancel","sharing.confirm-leave.leave":"Leave","sharing.confirm-leave.dont-show-again":"Don't ask again","toast.error.export-fail.title":"Failed export","toast.error.export-fail.desc":"Failed to export image","toast.error.copy-fail.title":"Failed copy","toast.error.copy-fail.desc":"Failed to copy image","context.pages.new-page":"New page","vscode.file-open.desc":"We've updated this document to work with the current version of tldraw. If you'd like to keep the original version (which will work on old.tldraw.com), click below to create a backup.","vscode.file-open.open":"Continue","vscode.file-open.backup":"Backup","vscode.file-open.backup-saved":"Backup saved","vscode.file-open.backup-failed":"Backup failed: this is not a .tldr file.","vscode.file-open.dont-show-again":"Don't ask again","cursor-chat.type-to-chat":"Type to chat..."}},90300:function(e,t,n){"use strict";var r,o=n(4633).default,i=n(12897).default,a=n(29293).default,u=n(50883).default,s=Object.defineProperty,c=Object.getOwnPropertyDescriptor,l=Object.getOwnPropertyNames,f=Object.prototype.hasOwnProperty,d={};!function(e,t){for(var n in t)s(e,n,{get:t[n],enumerable:!0})}(d,{RTL_LANGUAGES:function(){return v},fetchTranslation:function(){return y}}),e.exports=(r=d,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,i=u(l(t));try{var a=function(){var i=o.value;f.call(e,i)||i===n||s(e,i,{get:function(){return t[i]},enumerable:!(r=c(t,i))||r.enumerable})};for(i.s();!(o=i.n()).done;)a()}catch(d){i.e(d)}finally{i.f()}}return e}(s({},"__esModule",{value:!0}),r));var p=n(57777),h=n(24080),v=new Set(["ar","fa","he","ur","ku"]),g={locale:"en",label:"English",messages:h.DEFAULT_TRANSLATION,dir:"ltr"};function y(e,t){return m.apply(this,arguments)}function m(){return(m=a(o().mark((function e(t,n){var r,a,u,s,c;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,p.fetch)(n.translations.en);case 2:if(e.sent.ok){e.next=6;break}return console.warn("No main translations found."),e.abrupt("return",g);case 6:if("en"!==t){e.next=8;break}return e.abrupt("return",g);case 8:if(r=p.LANGUAGES.find((function(e){return e.locale===t}))){e.next=12;break}return console.warn("No translation found for locale ".concat(t)),e.abrupt("return",g);case 12:return e.next=14,(0,p.fetch)(n.translations[r.locale]);case 14:return a=e.sent,e.next=17,a.json();case 17:if(u=e.sent){e.next=21;break}return console.warn("No messages found for locale ".concat(t)),e.abrupt("return",g);case 21:for(c in s=[],g.messages)u[c]||s.push(c);return s.length,e.abrupt("return",{locale:t,label:r.label,dir:v.has(r.locale)?"rtl":"ltr",messages:i(i({},g.messages),u)});case 25:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},97410:function(e,t,n){"use strict";var r,o=n(4633).default,i=n(29293).default,a=n(12897).default,u=n(85715).default,s=n(50883).default,c=Object.create,l=Object.defineProperty,f=Object.getOwnPropertyDescriptor,d=Object.getOwnPropertyNames,p=Object.getPrototypeOf,h=Object.prototype.hasOwnProperty,v=function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,i=s(d(t));try{var a=function(){var i=o.value;h.call(e,i)||i===n||l(e,i,{get:function(){return t[i]},enumerable:!(r=f(t,i))||r.enumerable})};for(i.s();!(o=i.n()).done;)a()}catch(u){i.e(u)}finally{i.f()}}return e},g={};!function(e,t){for(var n in t)l(e,n,{get:t[n],enumerable:!0})}(g,{TldrawUiTranslationProvider:function(){return O},untranslated:function(){return _},useCurrentTranslation:function(){return P},useTranslation:function(){return k}}),e.exports=(r=g,v(l({},"__esModule",{value:!0}),r));var y=n(44414),m=function(e,t,n){return n=null!=e?c(p(e)):{},v(!t&&e&&e.__esModule?n:l(n,"default",{value:e,enumerable:!0}),e)}(n(9950)),b=n(39247),w=n(24080),S=n(90300),x=m.createContext(null);function P(){var e=m.useContext(x);if(!e)throw new Error("useCurrentTranslation must be used inside of <TldrawUiContextProvider />");return e}function O(e){var t=e.overrides,n=e.locale,r=e.children,s=(0,b.useAssetUrls)(),c=m.useState((function(){return t&&t.en?{locale:"en",label:"English",dir:"ltr",messages:a(a({},w.DEFAULT_TRANSLATION),t.en)}:{locale:"en",label:"English",dir:"ltr",messages:w.DEFAULT_TRANSLATION}})),l=u(c,2),f=l[0],d=l[1];return m.useEffect((function(){var e=!1;function r(){return(r=i(o().mark((function r(){var i;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,(0,S.fetchTranslation)(n,s);case 2:(i=r.sent)&&!e&&(t&&t[n]?d(a(a({},i),{},{messages:a(a({},i.messages),t[n])})):d(i));case 4:case"end":return r.stop()}}),r)})))).apply(this,arguments)}return function(){r.apply(this,arguments)}(),function(){e=!0}}),[s,n,t]),(0,y.jsx)(x.Provider,{value:f,children:r})}function k(){var e=P();return m.useCallback((function(t){var n;return null!==(n=e.messages[t])&&void 0!==n?n:t}),[e])}function _(e){return e}},78783:function(e,t,n){"use strict";var r,o=n(50883).default,i=Object.defineProperty,a=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,c={};!function(e,t){for(var n in t)i(e,n,{get:t[n],enumerable:!0})}(c,{iconTypes:function(){return l}}),e.exports=(r=c,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var c,l=o(u(t));try{var f=function(){var o=c.value;s.call(e,o)||o===n||i(e,o,{get:function(){return t[o]},enumerable:!(r=a(t,o))||r.enumerable})};for(l.s();!(c=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(i({},"__esModule",{value:!0}),r));var l=["align-bottom","align-center-horizontal","align-center-vertical","align-left","align-right","align-top","arrow-left","arrowhead-arrow","arrowhead-bar","arrowhead-diamond","arrowhead-dot","arrowhead-none","arrowhead-square","arrowhead-triangle-inverted","arrowhead-triangle","blob","bring-forward","bring-to-front","broken","check-circle","check","chevron-down","chevron-left","chevron-right","chevron-up","chevrons-ne","chevrons-sw","clipboard-copied","clipboard-copy","color","cross-2","cross-circle","dash-dashed","dash-dotted","dash-draw","dash-solid","disconnected","discord","distribute-horizontal","distribute-vertical","dot","dots-horizontal","dots-vertical","drag-handle-dots","duplicate","edit","external-link","fill-fill","fill-none","fill-pattern","fill-semi","fill-solid","follow","following","font-draw","font-mono","font-sans","font-serif","geo-arrow-down","geo-arrow-left","geo-arrow-right","geo-arrow-up","geo-check-box","geo-cloud","geo-diamond","geo-ellipse","geo-heart","geo-hexagon","geo-octagon","geo-oval","geo-pentagon","geo-rectangle","geo-rhombus-2","geo-rhombus","geo-star","geo-trapezoid","geo-triangle","geo-x-box","github","group","horizontal-align-end","horizontal-align-middle","horizontal-align-start","info-circle","leading","link","lock","menu","minus","mixed","pack","plus","question-mark-circle","question-mark","redo","reset-zoom","rotate-ccw","rotate-cw","send-backward","send-to-back","share-1","size-extra-large","size-large","size-medium","size-small","spline-cubic","spline-line","stack-horizontal","stack-vertical","status-offline","stretch-horizontal","stretch-vertical","text-align-center","text-align-left","text-align-right","toggle-off","toggle-on","tool-arrow","tool-eraser","tool-frame","tool-hand","tool-highlight","tool-laser","tool-line","tool-media","tool-note","tool-pencil","tool-pointer","tool-screenshot","tool-text","trash","twitter","undo","ungroup","unlock","vertical-align-end","vertical-align-middle","vertical-align-start","warning-triangle","zoom-in","zoom-out"]},14591:function(e,t,n){"use strict";var r,o=n(50883).default,i=Object.defineProperty,a=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,c={};!function(e,t){for(var n in t)i(e,n,{get:t[n],enumerable:!0})}(c,{kbd:function(){return p},kbdStr:function(){return h}}),e.exports=(r=c,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var c,l=o(u(t));try{var f=function(){var o=c.value;s.call(e,o)||o===n||i(e,o,{get:function(){return t[o]},enumerable:!(r=a(t,o))||r.enumerable})};for(l.s();!(c=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(i({},"__esModule",{value:!0}),r));var l=n(57777),f=l.tlenv.isDarwin?"\u2318":"Ctrl",d=l.tlenv.isDarwin?"\u2325":"Alt";function p(e){return","===e?[","]:e.split(",")[0].split("").map((function(e){var t=e.replace(/\$/g,f).replace(/\?/g,d).replace(/!/g,"\u21e7");return t[0].toUpperCase()+t.slice(1)}))}function h(e){return"\u2014 "+p(e).join("\u2009")}},24833:function(e,t,n){"use strict";var r,o=n(85715).default,i=n(12897).default,a=n(50883).default,u=Object.defineProperty,s=Object.getOwnPropertyDescriptor,c=Object.getOwnPropertyNames,l=Object.prototype.hasOwnProperty,f={};!function(e,t){for(var n in t)u(e,n,{get:t[n],enumerable:!0})}(f,{mergeOverrides:function(){return _},useDefaultHelpers:function(){return k},useMergedOverrides:function(){return T},useMergedTranslationOverrides:function(){return I}}),e.exports=(r=f,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,i=a(c(t));try{var f=function(){var i=o.value;l.call(e,i)||i===n||u(e,i,{get:function(){return t[i]},enumerable:!(r=s(t,i))||r.enumerable})};for(i.s();!(o=i.n()).done;)f()}catch(d){i.e(d)}finally{i.f()}}return e}(u({},"__esModule",{value:!0}),r));var d=n(57777),p=n(9950),h=n(12521),v=n(77740),g=n(49489),y=n(5450),m=n(2753),b=n(42473),w=n(28850),S=n(88668),x=n(29037),P=n(12237),O=n(97410);function k(){var e=(0,y.useToasts)(),t=e.addToast,n=e.removeToast,r=e.clearToasts,o=(0,g.useDialogs)(),i=o.addDialog,a=o.clearDialogs,u=o.removeDialog,s=(0,O.useTranslation)(),c=(0,x.useInsertMedia)(),l=(0,P.usePrint)(),f=(0,m.useMenuClipboardEvents)(),d=f.cut,k=f.copy,_=f.paste,j=(0,b.useCopyAs)(),I=(0,w.useExportAs)(),T=(0,S.useGetEmbedDefinition)(),E=(0,v.useBreakpoint)()<h.PORTRAIT_BREAKPOINT.TABLET_SM;return(0,p.useMemo)((function(){return{addToast:t,removeToast:n,clearToasts:r,addDialog:i,removeDialog:u,clearDialogs:a,msg:s,isMobile:E,insertMedia:c,printSelectionOrPages:l,cut:d,copy:k,paste:_,copyAs:j,exportAs:I,getEmbedDefinition:T}}),[t,n,r,i,u,a,s,E,c,l,d,k,_,j,I,T])}function _(e,t){var n,r={},u=a(e);try{for(u.s();!(n=u.n()).done;){var s=n.value;if(s.translations){var c,l=a((0,d.objectMapEntries)(s.translations));try{for(l.s();!(c=l.n()).done;){var f=o(c.value,2),p=f[0],h=f[1],v=r[p];v||(v=r[p]={}),Object.assign(v,h)}}catch(g){l.e(g)}finally{l.f()}}}}catch(g){u.e(g)}finally{u.f()}return{actions:function(t,n,r){var o,i=a(e);try{for(i.s();!(o=i.n()).done;){var u=o.value;u.actions&&(n=u.actions(t,n,r))}}catch(g){i.e(g)}finally{i.f()}return n},tools:function(n,r,o){var u,s=a(e);try{for(s.s();!(u=s.n()).done;){var c=u.value;c.tools&&(r=c.tools(n,r,i(i({},t),o)))}}catch(g){s.e(g)}finally{s.f()}return r},translations:r}}function j(e){return(0,p.useMemo)((function(){return e}),e)}function I(e){var t=j(null==e?[]:Array.isArray(e)?e:[e]);return(0,p.useMemo)((function(){var e,n={},r=a(t);try{for(r.s();!(e=r.n()).done;){var i=e.value;if(i.translations){var u,s=a((0,d.objectMapEntries)(i.translations));try{for(s.s();!(u=s.n()).done;){var c=o(u.value,2),l=c[0],f=c[1],p=n[l];p||(p=n[l]={}),Object.assign(p,f)}}catch(h){s.e(h)}finally{s.f()}}}}catch(h){r.e(h)}finally{r.f()}return n}),[t])}function T(e){var t=k(),n=j(null==e?[]:Array.isArray(e)?e:[e]);return(0,p.useMemo)((function(){return _(n,t)}),[n,t])}},27236:function(e,t,n){"use strict";var r,o=n(4633).default,i=n(85715).default,a=n(29293).default,u=n(50883).default,s=Object.defineProperty,c=Object.getOwnPropertyDescriptor,l=Object.getOwnPropertyNames,f=Object.prototype.hasOwnProperty,d={};!function(e,t){for(var n in t)s(e,n,{get:t[n],enumerable:!0})}(d,{containBoxSize:function(){return v},downsizeImage:function(){return g}}),e.exports=(r=d,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,i=u(l(t));try{var a=function(){var i=o.value;f.call(e,i)||i===n||s(e,i,{get:function(){return t[i]},enumerable:!(r=c(t,i))||r.enumerable})};for(i.s();!(o=i.n()).done;)a()}catch(d){i.e(d)}finally{i.f()}}return e}(s({},"__esModule",{value:!0}),r));var p=n(57777),h=n(70075);function v(e,t){var n=e.w/t.w,r=e.h/t.h;return n<=1&&r<=1?e:n>r?{w:e.w/n,h:e.h/n}:{w:e.w/r,h:e.h/r}}function g(e,t,n){return y.apply(this,arguments)}function y(){return y=a(o().mark((function e(t,n,r){var a,u,s,c,l,f,d,v,g,y,m,b,w=arguments;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=w.length>3&&void 0!==w[3]?w[3]:{},e.next=3,p.MediaHelpers.usingObjectURL(t,p.MediaHelpers.loadImage);case 3:return u=e.sent,s=a.type,c=void 0===s?t.type:s,l=a.quality,f=void 0===l?.85:l,e.next=7,(0,h.clampToBrowserMaxCanvasSize)(Math.min(2*n,u.naturalWidth),Math.min(2*r,u.naturalHeight));case 7:return d=e.sent,v=i(d,2),g=v[0],y=v[1],(m=document.createElement("canvas")).width=g,m.height=y,(b=(0,p.assertExists)(m.getContext("2d",{willReadFrequently:!0}),"Could not get canvas context")).imageSmoothingEnabled=!0,b.imageSmoothingQuality="high",b.drawImage(u,0,0,g,y),e.abrupt("return",new Promise((function(e,t){m.toBlob((function(n){n?e(n):t(new Error("Could not resize image"))}),c,f)})));case 19:case"end":return e.stop()}}),e)}))),y.apply(this,arguments)}},74904:function(e,t,n){"use strict";var r,o=n(4633).default,i=n(29293).default,a=n(50883).default,u=Object.defineProperty,s=Object.getOwnPropertyDescriptor,c=Object.getOwnPropertyNames,l=Object.prototype.hasOwnProperty,f={};function d(e,t){return p.apply(this,arguments)}function p(){return(p=i(o().mark((function e(t,n){var r,i,a,u,s,c,l,f,d,p,h,v,g;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.url,i=n.style,a=void 0===i?"normal":i,u=n.weight,s=void 0===u?"500":u,c=n.display,l=n.featureSettings,f=n.stretch,d=n.unicodeRange,p=n.variant,h=n.format,v={style:a,weight:s,display:c,featureSettings:l,stretch:f,unicodeRange:d,variant:p},g=new FontFace(t,"url(".concat(r,")"),v),e.next=5,g.load();case 5:return document.fonts.add(g),g.$$_url=r,g.$$_fontface="\n@font-face {\n\tfont-family: ".concat(g.family,";\n\tfont-stretch: ").concat(g.stretch,";\n\tfont-weight: ").concat(g.weight,";\n\tfont-style: ").concat(g.style,';\n\tsrc: url("').concat(r,'") format("').concat(h,'")\n}'),e.abrupt("return",g);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(e,t){for(var n in t)u(e,n,{get:t[n],enumerable:!0})}(f,{preloadFont:function(){return d}}),e.exports=(r=f,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,i=a(c(t));try{var f=function(){var i=o.value;l.call(e,i)||i===n||u(e,i,{get:function(){return t[i]},enumerable:!(r=s(t,i))||r.enumerable})};for(i.s();!(o=i.n()).done;)f()}catch(d){i.e(d)}finally{i.f()}}return e}(u({},"__esModule",{value:!0}),r))},13633:function(e,t,n){"use strict";var r,o=n(4633).default,i=n(29293).default,a=n(85715).default,u=n(43693).default,s=n(50883).default,c=Object.defineProperty,l=Object.getOwnPropertyDescriptor,f=Object.getOwnPropertyNames,d=Object.prototype.hasOwnProperty,p={};!function(e,t){for(var n in t)c(e,n,{get:t[n],enumerable:!0})}(p,{TLDRAW_CUSTOM_PNG_MIME_TYPE:function(){return v},clipboardWrite:function(){return S},doesClipboardSupportType:function(){return w},getAdditionalClipboardWriteType:function(){return m},getCanonicalClipboardReadType:function(){return b}}),e.exports=(r=p,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,i=s(f(t));try{var a=function(){var i=o.value;d.call(e,i)||i===n||c(e,i,{get:function(){return t[i]},enumerable:!(r=l(t,i))||r.enumerable})};for(i.s();!(o=i.n()).done;)a()}catch(u){i.e(u)}finally{i.f()}}return e}(c({},"__esModule",{value:!0}),r));var h=n(57777),v="web image/vnd.tldraw+png",g={"image/png":v},y=u({},v,"image/png");function m(e){var t;return null!==(t=(0,h.getOwnProperty)(g,e))&&void 0!==t?t:null}function b(e){var t;return null!==(t=(0,h.getOwnProperty)(y,e))&&void 0!==t?t:e}function w(e){return"undefined"!==typeof ClipboardItem&&"supports"in ClipboardItem&&ClipboardItem.supports(e)}function S(e){for(var t=Object.entries(e),n=0,r=t;n<r.length;n++){var u=a(r[n],2);u[0];u[1].catch((function(e){return console.error(e)}))}return navigator.clipboard.write([new ClipboardItem(e)]).catch((function(e){return console.error(e),Promise.all(t.map(function(){var e=i(o().mark((function e(t){var n,r,i;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a(t,2),r=n[0],i=n[1],e.t0=r,e.next=4,i;case 4:return e.t1=e.sent,e.abrupt("return",[e.t0,e.t1]);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())).then((function(e){var t=(0,h.objectMapFromEntries)(e);return navigator.clipboard.write([new ClipboardItem(t)])}))}))}},55714:function(e,t,n){"use strict";var r,o=n(50883).default,i=Object.defineProperty,a=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,c={};!function(e,t){for(var n in t)i(e,n,{get:t[n],enumerable:!0})}(c,{getEmbedInfo:function(){return v},matchEmbedUrl:function(){return f},matchUrl:function(){return h}}),e.exports=(r=c,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var c,l=o(u(t));try{var f=function(){var o=c.value;s.call(e,o)||o===n||i(e,o,{get:function(){return t[o]},enumerable:!(r=a(t,o))||r.enumerable})};for(l.s();!(c=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(i({},"__esModule",{value:!0}),r));var l=n(57777);function f(e,t){var n=(0,l.safeParseUrl)(t);if(n){var r,i=n.host.replace("www.",""),a=o(e);try{for(a.s();!(r=a.n()).done;){var u=r.value;if(p(u.hostnames,i)){var s=u.fromEmbedUrl(t);if(s)return{definition:u,url:s,embedUrl:t}}}}catch(c){a.e(c)}finally{a.f()}}}var d=function(e){return e.split("*").map((function(e){return function(e){if("string"!==typeof e)throw new TypeError("Expected a string");return e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}(e)})).join(".+")},p=function(e,t){return!!e.find((function(e){var n=new RegExp(d(e));return t.match(n)}))};function h(e,t){var n=(0,l.safeParseUrl)(t);if(n){var r,i=n.host.replace("www.",""),a=o(e);try{for(a.s();!(r=a.n()).done;){var u=r.value;if(p(u.hostnames,i)){var s=u.toEmbedUrl(t);if(s)return{definition:u,embedUrl:s,url:t}}}}catch(c){a.e(c)}finally{a.f()}}}function v(e,t){try{var n;return null!==(n=h(e,t))&&void 0!==n?n:f(e,t)}catch(r){return}}},98641:function(e,t,n){"use strict";var r,o=n(4633).default,i=n(29293).default,a=n(43693).default,u=n(50883).default,s=Object.defineProperty,c=Object.getOwnPropertyDescriptor,l=Object.getOwnPropertyNames,f=Object.prototype.hasOwnProperty,d={};!function(e,t){for(var n in t)s(e,n,{get:t[n],enumerable:!0})}(d,{copyAs:function(){return g}}),e.exports=(r=d,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,i=u(l(t));try{var a=function(){var i=o.value;f.call(e,i)||i===n||s(e,i,{get:function(){return t[i]},enumerable:!(r=c(t,i))||r.enumerable})};for(i.s();!(o=i.n()).done;)a()}catch(d){i.e(d)}finally{i.f()}}return e}(s({},"__esModule",{value:!0}),r));var p=n(57777),h=n(13633),v=n(51218);function g(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"svg",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(!navigator.clipboard)return Promise.reject(new Error("Copy not supported"));if(navigator.clipboard.write){var u=(0,v.exportToBlobPromise)(e,t,n,r),s=u.blobPromise,c=u.mimeType,l=a({},c,s),f=(0,h.getAdditionalClipboardWriteType)(c);return f&&(0,h.doesClipboardSupportType)(f)&&(l[f]=s.then((function(e){return p.FileHelpers.rewriteMimeType(e,f)}))),(0,h.clipboardWrite)(l)}switch(n){case"json":case"svg":return function(e){return y.apply(this,arguments)}(i(o().mark((function i(){return o().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",(0,v.exportToString)(e,t,n,r));case 1:case"end":return o.stop()}}),i)}))));case"jpeg":case"png":throw new Error("Copy not supported");default:(0,p.exhaustiveSwitchError)(n)}}function y(){return(y=i(o().mark((function e(t){var n,r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==(n=navigator.clipboard)&&void 0!==n&&null!==(r=n.writeText)&&void 0!==r){e.next=4;break}e.t0=void 0,e.next=10;break;case 4:return e.t1=r,e.t2=n,e.next=8,t();case 8:e.t3=e.sent,e.t0=e.t1.call.call(e.t1,e.t2,e.t3);case 10:return e.next=12,e.t0;case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},51218:function(e,t,n){"use strict";var r,o=n(12897).default,i=n(41132).default,a=n(4633).default,u=n(85715).default,s=n(29293).default,c=n(50883).default,l=Object.defineProperty,f=Object.getOwnPropertyDescriptor,d=Object.getOwnPropertyNames,p=Object.prototype.hasOwnProperty,h={};!function(e,t){for(var n in t)l(e,n,{get:t[n],enumerable:!0})}(h,{exportToBlob:function(){return P},exportToBlobPromise:function(){return _},exportToString:function(){return S},getSvgAsImage:function(){return y}}),e.exports=(r=h,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,i=c(d(t));try{var a=function(){var i=o.value;p.call(e,i)||i===n||l(e,i,{get:function(){return t[i]},enumerable:!(r=f(t,i))||r.enumerable})};for(i.s();!(o=i.n()).done;)a()}catch(u){i.e(u)}finally{i.f()}}return e}(l({},"__esModule",{value:!0}),r));var v=n(57777),g=n(70075);function y(e,t,n){return m.apply(this,arguments)}function m(){return(m=s(a().mark((function e(t,n,r){var o,i,c,l,f,d,p,h,y,m,b,w,S,x,P,O;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=r.type,i=r.width,c=r.height,l=r.quality,f=void 0===l?1:l,d=r.pixelRatio,p=void 0===d?2:d,e.next=3,(0,g.clampToBrowserMaxCanvasSize)(i*p,c*p);case 3:return h=e.sent,y=u(h,2),m=y[0],b=y[1],m=Math.floor(m),b=Math.floor(b),w=m/i,e.next=12,v.FileHelpers.blobToDataUrl(new Blob([n],{type:"image/svg+xml"}));case 12:return S=e.sent,e.next=15,new Promise((function(e){var t=(0,v.Image)();t.crossOrigin="anonymous",t.onload=s(a().mark((function n(){var r,o;return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!v.tlenv.isSafari){n.next=3;break}return n.next=3,(0,v.sleep)(250);case 3:r=document.createElement("canvas"),o=r.getContext("2d"),r.width=m,r.height=b,o.imageSmoothingEnabled=!0,o.imageSmoothingQuality="high",o.drawImage(t,0,0,m,b),URL.revokeObjectURL(S),e(r);case 12:case"end":return n.stop()}}),n)}))),t.onerror=function(){e(null)},t.src=S}));case 15:if(x=e.sent){e.next=18;break}return e.abrupt("return",null);case 18:return e.next=20,new Promise((function(e){return x.toBlob((function(t){t&&!v.debugFlags.throwToBlob.get()||e(null),e(t)}),"image/"+o,f)}));case 20:if(P=e.sent){e.next=23;break}return e.abrupt("return",null);case 23:if("png"!==o){e.next=32;break}return e.t0=DataView,e.next=27,P.arrayBuffer();case 27:return e.t1=e.sent,O=new e.t0(e.t1),e.abrupt("return",v.PngHelpers.setPhysChunk(O,w,{type:"image/"+o}));case 32:return e.abrupt("return",P);case 33:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function b(e,t,n){return w.apply(this,arguments)}function w(){return(w=s(a().mark((function e(t,n,r){var u,s;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getSvgString(null!==n&&void 0!==n&&n.length?n:i(t.getCurrentPageShapeIds()),o({scale:null!==(u=r.scale)&&void 0!==u?u:1,background:t.getInstanceState().exportBackground},r));case 2:if(s=e.sent){e.next=5;break}throw new Error("Could not construct SVG.");case 5:return e.abrupt("return",s);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function S(e,t,n){return x.apply(this,arguments)}function x(){return x=s(a().mark((function e(t,n,r){var o,i,u,s=arguments;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o=s.length>3&&void 0!==s[3]?s[3]:{},e.t0=r,e.next="svg"===e.t0?4:"json"===e.t0?16:20;break;case 4:return e.next=6,b(t,n,o);case 6:if(e.t2=i=e.sent,e.t1=null===e.t2,e.t1){e.next=10;break}e.t1=void 0===i;case 10:if(!e.t1){e.next=14;break}e.t3=void 0,e.next=15;break;case 14:e.t3=i.svg;case 15:return e.abrupt("return",e.t3);case 16:return e.next=18,t.resolveAssetsInContent(t.getContentFromCurrentPage(n));case 18:return u=e.sent,e.abrupt("return",JSON.stringify(u));case 20:(0,v.exhaustiveSwitchError)(r);case 21:case"end":return e.stop()}}),e)}))),x.apply(this,arguments)}function P(e){return O.apply(this,arguments)}function O(){return(O=s(a().mark((function e(t){var n,r,o,i,u,s,c;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.editor,r=t.ids,o=t.format,i=t.opts,u=void 0===i?{}:i,e.t0=o,e.next="svg"===e.t0?4:"json"===e.t0?11:"jpeg"===e.t0||"png"===e.t0||"webp"===e.t0?18:29;break;case 4:return e.t1=Blob,e.next=7,S(n,r,"svg",u);case 7:return e.t2=e.sent,e.t3=[e.t2],e.t4={type:"text/plain"},e.abrupt("return",new e.t1(e.t3,e.t4));case 11:return e.t5=Blob,e.next=14,S(n,r,"json",u);case 14:return e.t6=e.sent,e.t7=[e.t6],e.t8={type:"text/plain"},e.abrupt("return",new e.t5(e.t7,e.t8));case 18:return e.next=20,b(n,r,u);case 20:if(s=e.sent){e.next=23;break}throw new Error("Could not construct image.");case 23:return e.next=25,y(n,s.svg,{type:o,quality:u.quality,pixelRatio:u.pixelRatio,width:s.width,height:s.height});case 25:if(c=e.sent){e.next=28;break}throw new Error("Could not construct image.");case 28:return e.abrupt("return",c);case 29:(0,v.exhaustiveSwitchError)(o);case 30:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var k={jpeg:"image/jpeg",png:"image/png",webp:"image/webp",json:"text/plain",svg:"text/plain"};function _(e,t,n){return{blobPromise:P({editor:e,ids:t,format:n,opts:arguments.length>3&&void 0!==arguments[3]?arguments[3]:{}}),mimeType:k[n]}}},33242:function(e,t,n){"use strict";var r,o=n(4633).default,i=n(29293).default,a=n(50883).default,u=Object.defineProperty,s=Object.getOwnPropertyDescriptor,c=Object.getOwnPropertyNames,l=Object.prototype.hasOwnProperty,f={};!function(e,t){for(var n in t)u(e,n,{get:t[n],enumerable:!0})}(f,{exportAs:function(){return h}}),e.exports=(r=f,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,i=a(c(t));try{var f=function(){var i=o.value;l.call(e,i)||i===n||u(e,i,{get:function(){return t[i]},enumerable:!(r=s(t,i))||r.enumerable})};for(i.s();!(o=i.n()).done;)f()}catch(d){i.e(d)}finally{i.f()}}return e}(u({},"__esModule",{value:!0}),r));var d=n(57777),p=n(51218);function h(e,t){return v.apply(this,arguments)}function v(){return v=i(o().mark((function e(t,n){var r,i,a,u,s,c=arguments;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>2&&void 0!==c[2]?c[2]:"png",a=c.length>4&&void 0!==c[4]?c[4]:{},(i=c.length>3?c[3]:void 0)||(i="shapes at ".concat(g()),1===n.length&&(u=t.getShape(n[0]),i=t.isShapeOfType(u,"frame")?u.props.name||"frame":"".concat((0,d.sanitizeId)(u.id)," at ").concat(g()))),i+=".".concat(r),e.next=7,(0,p.exportToBlob)({editor:t,ids:n,format:r,opts:a});case 7:s=e.sent,y(new File([s],i,{type:s.type}));case 10:case"end":return e.stop()}}),e)}))),v.apply(this,arguments)}function g(){var e=new Date,t=String(e.getFullYear()).slice(2),n=String(e.getMonth()+1).padStart(2,"0"),r=String(e.getDate()).padStart(2,"0"),o=String(e.getHours()).padStart(2,"0"),i=String(e.getMinutes()).padStart(2,"0"),a=String(e.getSeconds()).padStart(2,"0");return"".concat(t,"-").concat(n,"-").concat(r," ").concat(o,".").concat(i,".").concat(a)}function y(e){var t=document.createElement("a"),n=URL.createObjectURL(e);t.href=n,t.download=e.name,t.click(),URL.revokeObjectURL(n)}},30750:function(e,t,n){"use strict";var r,o=n(41132).default,i=n(50883).default,a=Object.defineProperty,u=Object.getOwnPropertyDescriptor,s=Object.getOwnPropertyNames,c=Object.prototype.hasOwnProperty,l={};!function(e,t){for(var n in t)a(e,n,{get:t[n],enumerable:!0})}(l,{DEFAULT_FRAME_PADDING:function(){return p},fitFrameToContent:function(){return h},removeFrame:function(){return d}}),e.exports=(r=l,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,l=i(s(t));try{var f=function(){var i=o.value;c.call(e,i)||i===n||a(e,i,{get:function(){return t[i]},enumerable:!(r=u(t,i))||r.enumerable})};for(l.s();!(o=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(a({},"__esModule",{value:!0}),r));var f=n(57777);function d(e,t){var n=(0,f.compact)(t.map((function(t){return e.getShape(t)})).filter((function(t){return t&&e.isShapeOfType(t,"frame")})));if(n.length){var r=[];e.run((function(){n.map((function(t){var n=e.getSortedChildIdsForParent(t.id);n.length&&(e.reparentShapes(n,t.parentId,t.index),r.push.apply(r,o(n)))})),e.setSelectedShapes(r),e.deleteShapes(t)}))}}var p=50;function h(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=e.getShape(t);if(r){var o=e.getSortedChildIdsForParent(r.id),i=(0,f.compact)(o.map((function(t){return e.getShape(t)})));if(i.length){var a=f.Box.FromPoints(i.flatMap((function(t){var n=e.getShapeGeometry(t.id);return e.getShapeLocalTransform(t).applyToPoints(n.vertices)}))),u=n.padding,s=void 0===u?p:u,c=a.w+2*s,l=a.h+2*s,d=s-a.minX,h=s-a.minY;if(0!==d||0!==h||r.props.w!==c||r.props.h!==l){var v=new f.Vec(d,h).rot(r.rotation);e.run((function(){var t=o.map((function(t){var n=e.getShape(t);return{id:n.id,type:n.type,x:n.x+d,y:n.y+h}}));t.push({id:r.id,type:r.type,x:r.x-v.x,y:r.y-v.y,props:{w:c,h:l}}),e.updateShapes(t)}))}}}}},20490:function(e,t,n){"use strict";var r,o=n(50883).default,i=Object.defineProperty,a=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,c={};!function(e,t){for(var n in t)i(e,n,{get:t[n],enumerable:!0})}(c,{getTextLabels:function(){return f}}),e.exports=(r=c,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var c,l=o(u(t));try{var f=function(){var o=c.value;s.call(e,o)||o===n||i(e,o,{get:function(){return t[o]},enumerable:!(r=a(t,o))||r.enumerable})};for(l.s();!(c=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(i({},"__esModule",{value:!0}),r));var l=n(57777);function f(e){return e.isLabel?[e]:e instanceof l.Group2d?e.children.filter((function(e){return e.isLabel})):[]}},94730:function(e,t,n){"use strict";var r,o=n(12897).default,i=n(50883).default,a=Object.defineProperty,u=Object.getOwnPropertyDescriptor,s=Object.getOwnPropertyNames,c=Object.prototype.hasOwnProperty,l={};!function(e,t){for(var n in t)a(e,n,{get:t[n],enumerable:!0})}(l,{defaultEditorAssetUrls:function(){return p},setDefaultEditorAssetUrls:function(){return h},useDefaultEditorAssetsWithOverrides:function(){return v}}),e.exports=(r=l,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,l=i(s(t));try{var f=function(){var i=o.value;c.call(e,i)||i===n||a(e,i,{get:function(){return t[i]},enumerable:!(r=u(t,i))||r.enumerable})};for(l.s();!(o=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(a({},"__esModule",{value:!0}),r));var f=n(57777),d=n(9950),p={fonts:{draw:"".concat((0,f.getDefaultCdnBaseUrl)(),"/fonts/Shantell_Sans-Tldrawish.woff2"),serif:"".concat((0,f.getDefaultCdnBaseUrl)(),"/fonts/IBMPlexSerif-Medium.woff2"),sansSerif:"".concat((0,f.getDefaultCdnBaseUrl)(),"/fonts/IBMPlexSans-Medium.woff2"),monospace:"".concat((0,f.getDefaultCdnBaseUrl)(),"/fonts/IBMPlexMono-Medium.woff2")}};function h(e){p=e}function v(e){return(0,d.useMemo)((function(){return e?{fonts:o(o({},p.fonts),null===e||void 0===e?void 0:e.fonts)}:p}),[e])}},35284:function(e,t,n){"use strict";var r,o=n(50883).default,i=Object.defineProperty,a=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,c={};!function(e,t){for(var n in t)i(e,n,{get:t[n],enumerable:!0})}(c,{cleanupText:function(){return g},convertCommonTitleHTMLEntities:function(){return v},isRightToLeftLanguage:function(){return d},truncateStringWithEllipsis:function(){return y}}),e.exports=(r=c,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var c,l=o(u(t));try{var f=function(){var o=c.value;s.call(e,o)||o===n||i(e,o,{get:function(){return t[o]},enumerable:!(r=a(t,o))||r.enumerable})};for(l.s();!(c=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}}return e}(i({},"__esModule",{value:!0}),r));var l=n(3376),f=/[\u0590-\u05FF\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]/;function d(e){return f.test(e)}var p={"&amp;":"&","&quot;":'"',"&apos;":"'","&#34;":'"',"&#38;":"&","&#39;":"'","&#8211;":"\u2013","&#8212;":"\u2014","&#8216;":"\u2018","&#8217;":"\u2019","&#8220;":"\u201c","&#8221;":"\u201d","&#8230;":"\u2026"},h=new RegExp(Object.keys(p).join("|"),"g");function v(e){return e.replace(h,(function(e){return p[e]}))}function g(e){return function(e){return e.replace(/[ \t]+$/gm,"").replace(/\n+$/,"")}(function(e){for(var t=e.split("\n");t[0]&&0===t[0].trim().length;)t.shift();var n,r=1/0,i=o(t);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a.trim().length>0){var u=a.length-a.trimStart().length;r=Math.min(r,u)}}}catch(s){i.e(s)}finally{i.f()}return t.map((function(e){return e.slice(r)})).join("\n")}(function(e){return e.replace(/\t/g,l.INDENT)}(e)))}var y=function(e,t){return e.length<=t?e:e.substring(0,t-3)+"..."}},95394:function(e,t,n){"use strict";var r,o,i=n(4633).default,a=n(43693).default,u=n(85715).default,s=n(29293).default,c=n(12897).default,l=n(50883).default,f=Object.defineProperty,d=Object.getOwnPropertyDescriptor,p=Object.getOwnPropertyNames,h=Object.prototype.hasOwnProperty,v={};!function(e,t){for(var n in t)f(e,n,{get:t[n],enumerable:!0})}(v,{TLV1AlignStyle:function(){return j},TLV1AssetType:function(){return E},TLV1ColorStyle:function(){return O},TLV1DashStyle:function(){return _},TLV1Decoration:function(){return T},TLV1FontStyle:function(){return I},TLV1ShapeType:function(){return P},TLV1SizeStyle:function(){return k},buildFromV1Document:function(){return b}}),e.exports=(o=v,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,i=l(p(t));try{var a=function(){var i=o.value;h.call(e,i)||i===n||f(e,i,{get:function(){return t[i]},enumerable:!(r=d(t,i))||r.enumerable})};for(i.s();!(o=i.n()).done;)a()}catch(u){i.e(u)}finally{i.f()}}return e}(f({},"__esModule",{value:!0}),o));var g=n(57777),y=n(64761),m=15.5;function b(e,t){var n=t;e.run((function(){var t,r,o;n=function(e,t){var n=e.version,r=void 0===n?0:n;e.assets||(e.assets={});var o=new Set;Object.values(e.pages).forEach((function(e){return Object.values(e.shapes).forEach((function(t){var n=t.parentId,r=t.children,i=t.assetId;i&&o.add(i),n===e.id||e.shapes[n]||(console.warn("Encountered a shape with a missing parent!"),t.parentId=e.id),"group"===t.type&&r&&r.forEach((function(n){e.shapes[n]||(console.warn("Encountered a parent with a missing child!",t.id,n),null===r||void 0===r||r.splice(r.indexOf(n),1))}))}))})),Object.keys(e.assets).forEach((function(t){o.has(t)||delete e.assets[t]})),r!==t&&(r<14&&Object.values(e.pages).forEach((function(e){Object.values(e.shapes).filter((function(e){return"text"===e.type})).forEach((function(e){void 0===e.style.font&&(e.style.font="script")}))})),r<=13&&Object.values(e.pages).forEach((function(e){Object.values(e.bindings).forEach((function(e){Object.assign(e,e.meta)})),Object.values(e.shapes).forEach((function(e){Object.entries(e.style).forEach((function(t){var n=u(t,2),r=n[0],o=n[1];"string"===typeof o&&(e.style[r]=o.toLowerCase())})),"arrow"===e.type&&e.decorations&&Object.entries(e.decorations).forEach((function(t){var n=u(t,2),r=n[0];"Arrow"===n[1]&&(e.decorations=c(c({},e.decorations),{},a({},r,"arrow")))}))}))})),r<=13.1&&null==e.name&&(e.name="New Document"),r<15&&null==e.assets&&(e.assets={}),Object.values(e.pages).forEach((function(e){Object.values(e.shapes).forEach((function(e){r<15.2&&("image"!==e.type&&"video"!==e.type||null!=e.style.isFilled||(e.style.isFilled=!0)),r<15.3&&("rectangle"!==e.type&&"triangle"!==e.type&&"ellipse"!==e.type&&"arrow"!==e.type||("text"in e&&"string"===typeof e.text&&(e.label=e.text),e.label||(e.label=""),e.labelPoint||(e.labelPoint=[.5,.5])))}))})));return Object.values(e.pageStates).forEach((function(t){t.selectedIds=t.selectedIds.filter((function(n){return void 0!==e.pages[t.id].shapes[n]})),t.bindingId=void 0,t.editingId=void 0,t.hoveredId=void 0,t.pointedId=void 0})),e.version=t,e}(n,m),e.cancel().cancel().cancel().cancel();var i=e.getPages()[0].id;e.setCurrentPage(i);var s,f=l(e.getPages().slice(1));try{for(f.s();!(s=f.n()).done;){var d=s.value;e.deletePage(d.id)}}catch(b){f.e(b)}finally{f.f()}e.selectAll(),e.deleteShapes(e.getSelectedShapeIds());var p=new Map;Object.values(null!==(t=n.assets)&&void 0!==t?t:{}).forEach((function(t){switch(t.type){case"image":var n,r=g.AssetRecordType.createId();p.set(t.id,r);var o={id:r,typeName:"asset",type:"image",props:{w:S(t.size[0]),h:S(t.size[1]),name:null!==(n=t.fileName)&&void 0!==n?n:"Untitled",isAnimated:!1,mimeType:null,src:t.src},meta:{}};e.createAssets([o]),function(e,t){x.apply(this,arguments)}(e,o);break;case"video":var i,a=g.AssetRecordType.createId();p.set(t.id,a),e.createAssets([{id:a,typeName:"asset",type:"video",props:{w:S(t.size[0]),h:S(t.size[1]),name:null!==(i=t.fileName)&&void 0!==i?i:"Untitled",isAnimated:!0,mimeType:null,src:t.src},meta:{}}])}}));var h=new Map;Object.values(null!==(r=n.pages)&&void 0!==r?r:{}).sort((function(e,t){var n,r;return(null!==(n=e.childIndex)&&void 0!==n?n:1)<(null!==(r=t.childIndex)&&void 0!==r?r:1)?-1:1})).forEach((function(t,n){if(0===n)h.set(t.id,e.getCurrentPageId());else{var r,o=g.PageRecordType.createId();h.set(t.id,o),e.createPage({name:null!==(r=t.name)&&void 0!==r?r:"Page",id:o})}})),Object.values(null!==(o=n.pages)&&void 0!==o?o:{}).sort((function(e,t){var n,r;return(null!==(n=e.childIndex)&&void 0!==n?n:1)<(null!==(r=t.childIndex)&&void 0!==r?r:1)?-1:1})).forEach((function(t){var n;e.setCurrentPage(h.get(t.id));var r=new Map,o=new Map,i=Object.values(null!==(n=t.shapes)&&void 0!==n?n:{}).sort((function(e,t){return e.childIndex<t.childIndex?-1:1})).slice(0,e.options.maxShapesPerPage);i.forEach((function(e){if("group"===e.type){var t=(0,g.createShapeId)();r.set(e.id,t),o.set(e.id,[])}})),i.forEach((function(n){if("group"!==n.type){var i=(0,g.createShapeId)();r.set(n.id,i),n.parentId!==t.id&&(o.has(n.parentId)?o.get(n.parentId).push(n.id):console.warn("parent does not exist",n));var a={id:i,parentId:h.get(t.id),x:w(n.point[0]),y:w(n.point[1]),rotation:0,isLocked:!!n.isLocked};switch(n.type){case"sticky":var u;e.createShapes([c(c({},a),{},{type:"note",props:{text:null!==(u=n.text)&&void 0!==u?u:"",color:U(n.style.color),size:H(n.style.size),font:F(n.style.font),align:B(n.style.textAlign)}})]);break;case"rectangle":var s,l;e.createShapes([c(c({},a),{},{type:"geo",props:{geo:"rectangle",w:S(n.size[0]),h:S(n.size[1]),text:null!==(s=n.label)&&void 0!==s?s:"",fill:W(n.style.isFilled,n.style.color),labelColor:U(n.style.color),color:U(n.style.color),size:H(n.style.size),font:F(n.style.font),dash:K(n.style.dash),align:"middle"}})]);var f=e.getShapePageBounds(a.id);if(e.updateShapes([{id:a.id,type:"geo",props:{text:null!==(l=n.label)&&void 0!==l?l:""}}]),f.width===f.height){var d=e.getShape(a.id),v=d.props.growY,y=S(d.props.w),m=S(d.props.h),b=y+v/2,x=m+v/2;e.updateShapes([{id:a.id,type:"geo",x:w(d.x)-(b-y)/2,y:w(d.y)-(x-m)/2,props:{w:b,h:x}}])}break;case"triangle":var P;e.createShapes([c(c({},a),{},{type:"geo",props:{geo:"triangle",w:S(n.size[0]),h:S(n.size[1]),fill:W(n.style.isFilled,n.style.color),labelColor:U(n.style.color),color:U(n.style.color),size:H(n.style.size),font:F(n.style.font),dash:K(n.style.dash),align:"middle"}})]);var O=e.getShapePageBounds(a.id);if(e.updateShapes([{id:a.id,type:"geo",props:{text:null!==(P=n.label)&&void 0!==P?P:""}}]),O.width===O.height){var k=e.getShape(a.id),_=k.props.growY,j=S(k.props.w),I=S(k.props.h),T=j+_/2,E=I+_/2;e.updateShapes([{id:a.id,type:"geo",x:w(k.x)-(T-j)/2,y:w(k.y)-(E-I)/2,props:{w:T,h:E}}])}break;case"ellipse":var C;e.createShapes([c(c({},a),{},{type:"geo",props:{geo:"ellipse",w:2*S(n.radius[0]),h:2*S(n.radius[1]),fill:W(n.style.isFilled,n.style.color),labelColor:U(n.style.color),color:U(n.style.color),size:H(n.style.size),font:F(n.style.font),dash:K(n.style.dash),align:"middle"}})]);var M=e.getShapePageBounds(a.id);if(e.updateShapes([{id:a.id,type:"geo",props:{text:null!==(C=n.label)&&void 0!==C?C:""}}]),M.width===M.height){var A=e.getShape(a.id),D=A.props.growY,R=S(A.props.w),N=S(A.props.h),L=R+D/2,Y=N+D/2;e.updateShapes([{id:a.id,type:"geo",x:w(A.x)-(L-R)/2,y:w(A.y)-(Y-N)/2,props:{w:L,h:Y}}])}break;case"draw":if(0===n.points.length){!function(e){if(r.delete(e.id),o.has(e.parentId)){var t=o.get(e.parentId).filter((function(t){return t!==e.id}));o.set(e.parentId,t)}}(n);break}e.createShapes([c(c({},a),{},{type:"draw",props:{fill:W(n.style.isFilled,n.style.color),color:U(n.style.color),size:H(n.style.size),dash:K(n.style.dash),isPen:!1,isComplete:n.isComplete,segments:[{type:"free",points:n.points.map(G)}]}})]);break;case"arrow":var X,Z,$,Q=w(n.bend),J=G(n.handles.start.point),ee=G(n.handles.end.point),te=g.Vec.Dist(J,ee)*-Q/2;e.createShapes([c(c({},a),{},{type:"arrow",props:{text:null!==(X=n.label)&&void 0!==X?X:"",color:U(n.style.color),labelColor:U(n.style.color),size:H(n.style.size),font:F(n.style.font),dash:K(n.style.dash),arrowheadStart:q(null===(Z=n.decorations)||void 0===Z?void 0:Z.start),arrowheadEnd:q(null===($=n.decorations)||void 0===$?void 0:$.end),start:{x:w(n.handles.start.point[0]),y:w(n.handles.start.point[1])},end:{x:w(n.handles.end.point[0]),y:w(n.handles.end.point[1])},bend:te}})]);break;case"text":var ne,re;e.createShapes([c(c({},a),{},{type:"text",props:{text:null!==(ne=n.text)&&void 0!==ne?ne:" ",color:U(n.style.color),size:z(n.style.size),font:F(n.style.font),textAlign:V(n.style.textAlign),scale:null!==(re=n.style.scale)&&void 0!==re?re:1}})]);break;case"image":var oe=p.get(n.assetId);if(!oe)return void console.warn("Could not find asset id",n.assetId);e.createShapes([c(c({},a),{},{type:"image",props:{w:S(n.size[0]),h:S(n.size[1]),assetId:oe}})]);break;case"video":var ie=p.get(n.assetId);if(!ie)return void console.warn("Could not find asset id",n.assetId);e.createShapes([c(c({},a),{},{type:"video",props:{w:S(n.size[0]),h:S(n.size[1]),assetId:ie}})])}var ae=w(n.rotation);0!==ae&&(e.select(i),e.rotateShapesBy([i],ae))}})),o.forEach((function(n,o){var i=n.map((function(e){return r.get(e)})),a=r.get(o);e.groupShapes(i,{groupId:a});var u=w(t.shapes[o].rotation);0!==u&&(e.select(a),e.rotateShapesBy([a],u))})),i.forEach((function(n){if("arrow"===n.type){var o=r.get(n.id),i=e.getShapeUtil("arrow");e.inputs.ctrlKey=!1;for(var a=function(){var a=s[u],l=n.handles[a].bindingId;if(l){var f=t.bindings[l];if(!f)return 0;var d=r.get(f.toId);if(!e.getShape(d))return 0;if(d){var p=e.getShapePageBounds(d),h=e.getShape(o),v=(0,g.clamp)((w(f.point[0])+.5)/2,.2,.8),m=(0,g.clamp)((w(f.point[1])+.5)/2,.2,.8),b=e.getPointInShapeSpace(h,{x:p.minX+p.width*v,y:p.minY+p.height*m}),S=e.getShapeHandles(h),x=i.onHandleDrag(h,{handle:c(c({},S.find((function(e){return e.id===a}))),{},{x:b.x,y:b.y}),isPrecise:.5!==b.x||.5!==b.y});x&&e.updateShape(x);var P=(0,y.getArrowBindings)(e,e.getShape(o))[a];if(P){var O=(0,g.structuredClone)(P);0===f.distance&&(O.props.isExact=!0),O.toId!==d&&(O.toId=d,O.props.normalizedAnchor={x:v,y:m}),e.updateBinding(O)}}}},u=0,s=["start","end"];u<s.length;u++)a()}}))})),e.setCurrentPage(i),e.clearHistory(),e.selectNone();var v=e.getCurrentPageBounds();v&&e.zoomToBounds(v,{targetZoom:1})}))}function w(e){return"number"!==typeof e||Number.isNaN(e)?0:Number.isFinite(e)?e:0}function S(e){var t=w(e);return t<=0?1:t}function x(){return(x=s(i().mark((function e(t,n){var r,o,a,u,s;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,"bookmark"!==n.type&&n.props.src){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,(0,g.fetch)(n.props.src);case 5:if((a=e.sent).ok){e.next=8;break}return e.abrupt("return");case 8:return e.t0=File,e.next=11,a.blob();case 11:return e.t1=e.sent,e.t2=[e.t1],e.t3=n.props.name,e.t4={type:null!==(r=null!==(o=a.headers.get("content-type"))&&void 0!==o?o:n.props.mimeType)&&void 0!==r?r:void 0},u=new e.t0(e.t2,e.t3,e.t4),e.next=18,t.getAssetForExternalContent({type:"file",file:u});case 18:if(s=e.sent){e.next=21;break}throw new Error("Could not get asset for external content");case 21:if("bookmark"!==s.type){e.next=23;break}return e.abrupt("return");case 23:t.updateAssets([{id:n.id,type:n.type,props:c(c({},s.props),{},{name:n.props.name})}]),e.next=28;break;case 26:e.prev=26,e.t5=e.catch(0);case 28:case"end":return e.stop()}}),e,null,[[0,26]])})))).apply(this,arguments)}var P=function(e){return e.Sticky="sticky",e.Ellipse="ellipse",e.Rectangle="rectangle",e.Triangle="triangle",e.Draw="draw",e.Arrow="arrow",e.Text="text",e.Group="group",e.Image="image",e.Video="video",e}(P||{}),O=function(e){return e.White="white",e.LightGray="lightGray",e.Gray="gray",e.Black="black",e.Green="green",e.Cyan="cyan",e.Blue="blue",e.Indigo="indigo",e.Violet="violet",e.Red="red",e.Orange="orange",e.Yellow="yellow",e}(O||{}),k=function(e){return e.Small="small",e.Medium="medium",e.Large="large",e}(k||{}),_=function(e){return e.Draw="draw",e.Solid="solid",e.Dashed="dashed",e.Dotted="dotted",e}(_||{}),j=function(e){return e.Start="start",e.Middle="middle",e.End="end",e.Justify="justify",e}(j||{}),I=function(e){return e.Script="script",e.Sans="sans",e.Serif="serif",e.Mono="mono",e}(I||{}),T=function(e){return e.Arrow="arrow",e}(T||{}),E=function(e){return e.Image="image",e.Video="video",e}(E||{}),C=(a(a(a(a(a(a(a(a(a(a(r={},"white","black"),"black","black"),"lightGray","grey"),"gray","grey"),"green","light-green"),"cyan","green"),"blue","light-blue"),"indigo","blue"),"orange","orange"),"yellow","yellow"),a(a(r,"red","red"),"violet","light-violet")),M=a(a(a(a({},"mono","mono"),"sans","sans"),"script","draw"),"serif","serif"),A=a(a(a(a({},"start","start"),"middle","middle"),"end","end"),"justify","start"),D=a(a(a(a({},"start","start"),"middle","middle"),"end","end"),"justify","start"),R=a(a(a({},"small","s"),"medium","l"),"large","xl"),N=a(a(a({},"small","m"),"medium","l"),"large","xl"),L=a(a(a(a({},"solid","solid"),"dashed","dashed"),"dotted","dotted"),"draw","draw");function U(e){var t;return e&&null!==(t=C[e])&&void 0!==t?t:"black"}function F(e){var t;return e&&null!==(t=M[e])&&void 0!==t?t:"draw"}function B(e){var t;return e&&null!==(t=A[e])&&void 0!==t?t:"middle"}function V(e){var t;return e&&null!==(t=D[e])&&void 0!==t?t:"middle"}function z(e){var t;return e&&null!==(t=R[e])&&void 0!==t?t:"m"}function H(e){var t;return e&&null!==(t=N[e])&&void 0!==t?t:"l"}function K(e){var t;return e&&null!==(t=L[e])&&void 0!==t?t:"draw"}function G(e){return{x:w(e[0]),y:w(e[1]),z:null==e[2]?.5:w(e[2])}}function q(e){return"arrow"===e?"arrow":"none"}function W(e,t){return e?"black"===t||"white"===t?"semi":"solid":"none"}},69154:function(e,t,n){"use strict";var r,o=n(4633).default,i=n(12897).default,a=n(29293).default,u=n(50883).default,s=Object.defineProperty,c=Object.getOwnPropertyDescriptor,l=Object.getOwnPropertyNames,f=Object.prototype.hasOwnProperty,d={};!function(e,t){for(var n in t)s(e,n,{get:t[n],enumerable:!0})}(d,{TLDRAW_FILE_EXTENSION:function(){return g},TLDRAW_FILE_MIMETYPE:function(){return v},isV1File:function(){return S},parseAndLoadDocument:function(){return I},parseTldrawJsonFile:function(){return x},serializeTldrawJson:function(){return O},serializeTldrawJsonBlob:function(){return _}}),e.exports=(r=d,function(e,t,n,r){if(t&&"object"===typeof t||"function"===typeof t){var o,i=u(l(t));try{var a=function(){var i=o.value;f.call(e,i)||i===n||s(e,i,{get:function(){return t[i]},enumerable:!(r=c(t,i))||r.enumerable})};for(i.s();!(o=i.n()).done;)a()}catch(d){i.e(d)}finally{i.f()}}return e}(s({},"__esModule",{value:!0}),r));var p=n(57777),h=n(95394),v="application/vnd.tldraw+json",g=".tldr",y=1,m=p.T.object({schemaVersion:p.T.literal(1),storeVersion:p.T.positiveInteger,recordVersions:p.T.dict(p.T.string,p.T.object({version:p.T.positiveInteger,subTypeVersions:p.T.dict(p.T.string,p.T.positiveInteger).optional(),subTypeKey:p.T.string.optional()}))}),b=p.T.object({schemaVersion:p.T.literal(2),sequences:p.T.dict(p.T.string,p.T.positiveInteger)}),w=p.T.object({tldrawFileFormatVersion:p.T.nonZeroInteger,schema:p.T.numberUnion("schemaVersion",{1:m,2:b}),records:p.T.arrayOf(p.T.object({id:p.T.string,typeName:p.T.string}).allowUnknownProperties())});function S(e){try{var t;return!(null===(t=e.document)||void 0===t||!t.version)}catch(n){return!1}}function x(e){var t,n,r,o=e.json,i=e.schema;try{t=w.validate(JSON.parse(o))}catch(u){try{if(S(t=JSON.parse(o)))return p.Result.err({type:"v1File",data:t})}catch(s){}return p.Result.err({type:"notATldrawFile",cause:u})}if(t.tldrawFileFormatVersion>y)return p.Result.err({type:"fileFormatVersionTooNew",version:t.tldrawFileFormatVersion});try{var a=P(t.records);r=Object.fromEntries(a.map((function(e){return[e.id,e]}))),n=i.migrateStoreSnapshot({store:r,schema:t.schema})}catch(u){return p.Result.err({type:"invalidRecords",cause:u})}if("error"===n.type)return p.Result.err({type:"migrationFailed",reason:n.reason});try{return p.Result.ok((0,p.createTLStore)({snapshot:{store:r,schema:t.schema},schema:i}))}catch(u){return p.Result.err({type:"invalidRecords",cause:u})}}function P(e){var t,n=new Set,r=u(e);try{for(r.s();!(t=r.n()).done;){var o=t.value;"shape"===o.typeName&&"assetId"in o.props&&o.props.assetId&&n.add(o.props.assetId)}}catch(i){r.e(i)}finally{r.f()}return e.filter((function(e){return"asset"!==e.typeName||n.has(e.id)}))}function O(e){return k.apply(this,arguments)}function k(){return(k=a(o().mark((function e(t){var n,r,a,s,c,l;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=[],r=u(t.store.allRecords()),e.prev=2,r.s();case 4:if((a=r.n()).done){e.next=43;break}s=a.value,e.t0=s.typeName,e.next="asset"===e.t0?9:39;break;case 9:if("bookmark"===s.type||!s.props.src||s.props.src.startsWith("data:")){e.next=37;break}if(c=void 0,e.prev=11,(l=s.props.src).startsWith("http")){e.next=20;break}return e.next=16,t.resolveAssetUrl(s.id,{shouldResolveToOriginal:!0});case 16:if(e.t1=e.sent,e.t1){e.next=19;break}e.t1="";case 19:l=e.t1;case 20:return e.t2=p.FileHelpers,e.next=23,(0,p.fetch)(l);case 23:return e.next=25,e.sent.blob();case 25:return e.t3=e.sent,e.next=28,e.t2.blobToDataUrl.call(e.t2,e.t3);case 28:c=e.sent,e.next=34;break;case 31:e.prev=31,e.t4=e.catch(11),c=s.props.src;case 34:n.push(i(i({},s),{},{props:i(i({},s.props),{},{src:c})})),e.next=38;break;case 37:n.push(s);case 38:return e.abrupt("break",41);case 39:return n.push(s),e.abrupt("break",41);case 41:e.next=4;break;case 43:e.next=48;break;case 45:e.prev=45,e.t5=e.catch(2),r.e(e.t5);case 48:return e.prev=48,r.f(),e.finish(48);case 51:return e.abrupt("return",JSON.stringify({tldrawFileFormatVersion:y,schema:t.store.schema.serialize(),records:P(n)}));case 52:case"end":return e.stop()}}),e,null,[[2,45,48,51],[11,31]])})))).apply(this,arguments)}function _(e){return j.apply(this,arguments)}function j(){return(j=a(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=Blob,e.next=3,O(t);case 3:return e.t1=e.sent,e.t2=[e.t1],e.t3={type:v},e.abrupt("return",new e.t0(e.t2,e.t3));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function I(e,t,n,r,o,i){return T.apply(this,arguments)}function T(){return(T=a(o().mark((function e(t,n,r,i,a,u){var s,c;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((s=x({schema:t.store.schema,json:n})).ok){e.next=23;break}e.t0=s.error.type,e.next="notATldrawFile"===e.t0?5:"fileFormatVersionTooNew"===e.t0?9:"migrationFailed"===e.t0?11:"invalidRecords"===e.t0?13:"v1File"===e.t0?17:20;break;case 5:return t.annotateError(s.error.cause,{origin:"file-system.open.parse",willCrashApp:!1,tags:{parseErrorType:s.error.type}}),reportError(s.error.cause),c=r("file-system.file-open-error.not-a-tldraw-file"),e.abrupt("break",21);case 9:return c=r("file-system.file-open-error.file-format-version-too-new"),e.abrupt("break",21);case 11:return c=s.error.reason===p.MigrationFailureReason.TargetVersionTooNew?r("file-system.file-open-error.file-format-version-too-new"):r("file-system.file-open-error.generic-corrupted-file"),e.abrupt("break",21);case 13:return t.annotateError(s.error.cause,{origin:"file-system.open.parse",willCrashApp:!1,tags:{parseErrorType:s.error.type}}),reportError(s.error.cause),c=r("file-system.file-open-error.generic-corrupted-file"),e.abrupt("break",21);case 17:return(0,h.buildFromV1Document)(t,s.error.data.document),null===a||void 0===a||a(),e.abrupt("return");case 20:(0,p.exhaustiveSwitchError)(s.error,"type");case 21:return i({title:r("file-system.file-open-error.title"),description:c,severity:"error"}),e.abrupt("return");case 23:(0,p.transact)((function(){t.loadSnapshot(s.value.getStoreSnapshot()),t.clearHistory();var e=t.getCurrentPageBounds();e&&t.zoomToBounds(e,{targetZoom:1,immediate:!0})})),u&&t.user.updateUserPreferences({colorScheme:"dark"});case 25:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},4310:function(e,t,n){"use strict";n.r(t),t.default={}},1848:function(e,t,n){"use strict";n.r(t),t.default={}},52425:function(e,t,n){"use strict";n.r(t),t.default={}},25172:function(e){e.exports=function(e,t){this.v=e,this.k=t},e.exports.__esModule=!0,e.exports.default=e.exports},70079:function(e){e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r},e.exports.__esModule=!0,e.exports.default=e.exports},92987:function(e){e.exports=function(e){if(Array.isArray(e))return e},e.exports.__esModule=!0,e.exports.default=e.exports},5901:function(e,t,n){var r=n(70079);e.exports=function(e){if(Array.isArray(e))return r(e)},e.exports.__esModule=!0,e.exports.default=e.exports},12475:function(e){e.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e},e.exports.__esModule=!0,e.exports.default=e.exports},29293:function(e){function t(e,t,n,r,o,i,a){try{var u=e[i](a),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}e.exports=function(e){return function(){var n=this,r=arguments;return new Promise((function(o,i){var a=e.apply(n,r);function u(e){t(a,o,i,u,s,"next",e)}function s(e){t(a,o,i,u,s,"throw",e)}u(void 0)}))}},e.exports.__esModule=!0,e.exports.default=e.exports},18336:function(e,t,n){var r=n(63072),o=n(27550),i=n(28452);e.exports=function(e,t,n){return t=r(t),i(e,o()?Reflect.construct(t,n||[],r(e).constructor):t.apply(e,n))},e.exports.__esModule=!0,e.exports.default=e.exports},17383:function(e){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},e.exports.__esModule=!0,e.exports.default=e.exports},59646:function(e,t,n){var r=n(27550),o=n(95636);e.exports=function(e,t,n){if(r())return Reflect.construct.apply(null,arguments);var i=[null];i.push.apply(i,t);var a=new(e.bind.apply(e,i));return n&&o(a,n.prototype),a},e.exports.__esModule=!0,e.exports.default=e.exports},34579:function(e,t,n){var r=n(77736);function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,r(o.key),o)}}e.exports=function(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e},e.exports.__esModule=!0,e.exports.default=e.exports},50883:function(e,t,n){var r=n(17122);e.exports=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=r(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0,i=function(){};return{s:i,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,u=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return u=e.done,e},e:function(e){s=!0,a=e},f:function(){try{u||null==n.return||n.return()}finally{if(s)throw a}}}},e.exports.__esModule=!0,e.exports.default=e.exports},11303:function(e){e.exports=function(e,t,n,r){var o={configurable:!0,enumerable:!0};return o[e]=r,Object.defineProperty(t,n,o)},e.exports.__esModule=!0,e.exports.default=e.exports},43693:function(e,t,n){var r=n(77736);e.exports=function(e,t,n){return(t=r(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},e.exports.__esModule=!0,e.exports.default=e.exports},63072:function(e){function t(n){return e.exports=t=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},e.exports.__esModule=!0,e.exports.default=e.exports,t(n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},29511:function(e,t,n){var r=n(95636);e.exports=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&r(e,t)},e.exports.__esModule=!0,e.exports.default=e.exports},24994:function(e){e.exports=function(e){return e&&e.__esModule?e:{default:e}},e.exports.__esModule=!0,e.exports.default=e.exports},6305:function(e,t,n){var r=n(73738).default;function o(t,n){if("function"==typeof WeakMap)var i=new WeakMap,a=new WeakMap;return(e.exports=o=function(e,t){if(!t&&e&&e.__esModule)return e;var n,o,u={__proto__:null,default:e};if(null===e||"object"!=r(e)&&"function"!=typeof e)return u;if(n=t?a:i){if(n.has(e))return n.get(e);n.set(e,u)}for(var s in e)"default"!==s&&{}.hasOwnProperty.call(e,s)&&((o=(n=Object.defineProperty)&&Object.getOwnPropertyDescriptor(e,s))&&(o.get||o.set)?n(u,s,o):u[s]=e[s]);return u},e.exports.__esModule=!0,e.exports.default=e.exports)(t,n)}e.exports=o,e.exports.__esModule=!0,e.exports.default=e.exports},40691:function(e){e.exports=function(e){try{return-1!==Function.toString.call(e).indexOf("[native code]")}catch(t){return"function"==typeof e}},e.exports.__esModule=!0,e.exports.default=e.exports},27550:function(e){function t(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(n){}return(e.exports=t=function(){return!!n},e.exports.__esModule=!0,e.exports.default=e.exports)()}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},99291:function(e){e.exports=function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)},e.exports.__esModule=!0,e.exports.default=e.exports},81156:function(e){e.exports=function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,u=[],s=!0,c=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=i.call(n)).done)&&(u.push(r.value),u.length!==t);s=!0);}catch(e){c=!0,o=e}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw o}}return u}},e.exports.__esModule=!0,e.exports.default=e.exports},47752:function(e){e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.__esModule=!0,e.exports.default=e.exports},41869:function(e){e.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.__esModule=!0,e.exports.default=e.exports},12897:function(e,t,n){var r=n(43693);function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}e.exports=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e},e.exports.__esModule=!0,e.exports.default=e.exports},91847:function(e,t,n){var r=n(54893);e.exports=function(e,t){if(null==e)return{};var n,o,i=r(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)n=a[o],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i},e.exports.__esModule=!0,e.exports.default=e.exports},54893:function(e){e.exports=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n},e.exports.__esModule=!0,e.exports.default=e.exports},28452:function(e,t,n){var r=n(73738).default,o=n(12475);e.exports=function(e,t){if(t&&("object"==r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return o(e)},e.exports.__esModule=!0,e.exports.default=e.exports},15407:function(e){e.exports=function(e){throw new TypeError('"'+e+'" is read-only')},e.exports.__esModule=!0,e.exports.default=e.exports},16993:function(e,t,n){var r=n(75546);function o(){var t,n,i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",u=i.toStringTag||"@@toStringTag";function s(e,o,i,a){var u=o&&o.prototype instanceof l?o:l,s=Object.create(u.prototype);return r(s,"_invoke",function(e,r,o){var i,a,u,s=0,l=o||[],f=!1,d={p:0,n:0,v:t,a:p,f:p.bind(t,4),d:function(e,n){return i=e,a=0,u=t,d.n=n,c}};function p(e,r){for(a=e,u=r,n=0;!f&&s&&!o&&n<l.length;n++){var o,i=l[n],p=d.p,h=i[2];e>3?(o=h===r)&&(u=i[(a=i[4])?5:(a=3,3)],i[4]=i[5]=t):i[0]<=p&&((o=e<2&&p<i[1])?(a=0,d.v=r,d.n=i[1]):p<h&&(o=e<3||i[0]>r||r>h)&&(i[4]=e,i[5]=r,d.n=h,a=0))}if(o||e>1)return c;throw f=!0,r}return function(o,l,h){if(s>1)throw TypeError("Generator is already running");for(f&&1===l&&p(l,h),a=l,u=h;(n=a<2?t:u)||!f;){i||(a?a<3?(a>1&&(d.n=-1),p(a,u)):d.n=u:d.v=u);try{if(s=2,i){if(a||(o="next"),n=i[o]){if(!(n=n.call(i,u)))throw TypeError("iterator result is not an object");if(!n.done)return n;u=n.value,a<2&&(a=0)}else 1===a&&(n=i.return)&&n.call(i),a<2&&(u=TypeError("The iterator does not provide a '"+o+"' method"),a=1);i=t}else if((n=(f=d.n<0)?u:e.call(r,d))!==c)break}catch(n){i=t,a=1,u=n}finally{s=1}}return{value:n,done:f}}}(e,i,a),!0),s}var c={};function l(){}function f(){}function d(){}n=Object.getPrototypeOf;var p=[][a]?n(n([][a]())):(r(n={},a,(function(){return this})),n),h=d.prototype=l.prototype=Object.create(p);function v(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,r(e,u,"GeneratorFunction")),e.prototype=Object.create(h),e}return f.prototype=d,r(h,"constructor",d),r(d,"constructor",f),f.displayName="GeneratorFunction",r(d,u,"GeneratorFunction"),r(h),r(h,u,"Generator"),r(h,a,(function(){return this})),r(h,"toString",(function(){return"[object Generator]"})),(e.exports=o=function(){return{w:s,m:v}},e.exports.__esModule=!0,e.exports.default=e.exports)()}e.exports=o,e.exports.__esModule=!0,e.exports.default=e.exports},55869:function(e,t,n){var r=n(887);e.exports=function(e,t,n,o,i){var a=r(e,t,n,o,i);return a.next().then((function(e){return e.done?e.value:a.next()}))},e.exports.__esModule=!0,e.exports.default=e.exports},887:function(e,t,n){var r=n(16993),o=n(11791);e.exports=function(e,t,n,i,a){return new o(r().w(e,t,n,i),a||Promise)},e.exports.__esModule=!0,e.exports.default=e.exports},11791:function(e,t,n){var r=n(25172),o=n(75546);e.exports=function e(t,n){function i(e,o,a,u){try{var s=t[e](o),c=s.value;return c instanceof r?n.resolve(c.v).then((function(e){i("next",e,a,u)}),(function(e){i("throw",e,a,u)})):n.resolve(c).then((function(e){s.value=e,a(s)}),(function(e){return i("throw",e,a,u)}))}catch(t){u(t)}}var a;this.next||(o(e.prototype),o(e.prototype,"function"==typeof Symbol&&Symbol.asyncIterator||"@asyncIterator",(function(){return this}))),o(this,"_invoke",(function(e,t,r){function o(){return new n((function(t,n){i(e,r,t,n)}))}return a=a?a.then(o,o):o()}),!0)},e.exports.__esModule=!0,e.exports.default=e.exports},75546:function(e){function t(n,r,o,i){var a=Object.defineProperty;try{a({},"",{})}catch(n){a=0}e.exports=t=function(e,n,r,o){if(n)a?a(e,n,{value:r,enumerable:!o,configurable:!o,writable:!o}):e[n]=r;else{var i=function(n,r){t(e,n,(function(e){return this._invoke(n,r,e)}))};i("next",0),i("throw",1),i("return",2)}},e.exports.__esModule=!0,e.exports.default=e.exports,t(n,r,o,i)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},4373:function(e){e.exports=function(e){var t=Object(e),n=[];for(var r in t)n.unshift(r);return function e(){for(;n.length;)if((r=n.pop())in t)return e.value=r,e.done=!1,e;return e.done=!0,e}},e.exports.__esModule=!0,e.exports.default=e.exports},4633:function(e,t,n){var r=n(25172),o=n(16993),i=n(55869),a=n(887),u=n(11791),s=n(4373),c=n(30579);function l(){"use strict";var t=o(),n=t.m(l),f=(Object.getPrototypeOf?Object.getPrototypeOf(n):n.__proto__).constructor;function d(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))}var p={throw:1,return:2,break:3,continue:3};function h(e){var t,n;return function(r){t||(t={stop:function(){return n(r.a,2)},catch:function(){return r.v},abrupt:function(e,t){return n(r.a,p[e],t)},delegateYield:function(e,o,i){return t.resultName=o,n(r.d,c(e),i)},finish:function(e){return n(r.f,e)}},n=function(e,n,o){r.p=t.prev,r.n=t.next;try{return e(n,o)}finally{t.next=r.n}}),t.resultName&&(t[t.resultName]=r.v,t.resultName=void 0),t.sent=r.v,t.next=r.n;try{return e.call(this,t)}finally{r.p=t.prev,r.n=t.next}}}return(e.exports=l=function(){return{wrap:function(e,n,r,o){return t.w(h(e),n,r,o&&o.reverse())},isGeneratorFunction:d,mark:t.m,awrap:function(e,t){return new r(e,t)},AsyncIterator:u,async:function(e,t,n,r,o){return(d(t)?a:i)(h(e),t,n,r,o)},keys:s,values:c}},e.exports.__esModule=!0,e.exports.default=e.exports)()}e.exports=l,e.exports.__esModule=!0,e.exports.default=e.exports},30579:function(e,t,n){var r=n(73738).default;e.exports=function(e){if(null!=e){var t=e["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],n=0;if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length))return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}}}throw new TypeError(r(e)+" is not iterable")},e.exports.__esModule=!0,e.exports.default=e.exports},95636:function(e){function t(n,r){return e.exports=t=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},e.exports.__esModule=!0,e.exports.default=e.exports,t(n,r)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},85715:function(e,t,n){var r=n(92987),o=n(81156),i=n(17122),a=n(47752);e.exports=function(e,t){return r(e)||o(e,t)||i(e,t)||a()},e.exports.__esModule=!0,e.exports.default=e.exports},8053:function(e,t,n){var r=n(92987),o=n(99291),i=n(17122),a=n(47752);e.exports=function(e){return r(e)||o(e)||i(e)||a()},e.exports.__esModule=!0,e.exports.default=e.exports},41132:function(e,t,n){var r=n(5901),o=n(99291),i=n(17122),a=n(41869);e.exports=function(e){return r(e)||o(e)||i(e)||a()},e.exports.__esModule=!0,e.exports.default=e.exports},89045:function(e,t,n){var r=n(73738).default;e.exports=function(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!=r(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)},e.exports.__esModule=!0,e.exports.default=e.exports},77736:function(e,t,n){var r=n(73738).default,o=n(89045);e.exports=function(e){var t=o(e,"string");return"symbol"==r(t)?t:t+""},e.exports.__esModule=!0,e.exports.default=e.exports},73738:function(e){function t(n){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},17122:function(e,t,n){var r=n(70079);e.exports=function(e,t){if(e){if("string"==typeof e)return r(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}},e.exports.__esModule=!0,e.exports.default=e.exports},61837:function(e,t,n){var r=n(63072),o=n(95636),i=n(40691),a=n(59646);function u(t){var n="function"==typeof Map?new Map:void 0;return e.exports=u=function(e){if(null===e||!i(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==n){if(n.has(e))return n.get(e);n.set(e,t)}function t(){return a(e,arguments,r(this).constructor)}return t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),o(t,e)},e.exports.__esModule=!0,e.exports.default=e.exports,u(t)}e.exports=u,e.exports.__esModule=!0,e.exports.default=e.exports},80091:function(e,t,n){"use strict";n(58609);var r=n(47481);e.exports=r("Array","at")},56558:function(e,t,n){"use strict";n(92672),n(59939);var r=n(47481);e.exports=r("Array","flatMap")},59185:function(e,t,n){"use strict";n(1851),n(84384);var r=n(47481);e.exports=r("Array","flat")},43709:function(e,t,n){"use strict";n(98931);var r=n(47481);e.exports=r("String","at")},88244:function(e,t,n){"use strict";n(37525),n(31342),n(10304);var r=n(47481);e.exports=r("String","replaceAll")},70032:function(e,t,n){"use strict";var r=n(97347),o=n(75505),i=TypeError;e.exports=function(e){if(r(e))return e;throw new i(o(e)+" is not a function")}},74751:function(e,t,n){"use strict";var r=n(64729),o=n(54850),i=n(9283).f,a=r("unscopables"),u=Array.prototype;void 0===u[a]&&i(u,a,{configurable:!0,value:o(null)}),e.exports=function(e){u[a][e]=!0}},80571:function(e,t,n){"use strict";var r=n(5305).charAt;e.exports=function(e,t,n){return t+(n?r(e,t).length:1)}},28093:function(e,t,n){"use strict";var r=n(7808),o=String,i=TypeError;e.exports=function(e){if(r(e))return e;throw new i(o(e)+" is not an object")}},46211:function(e,t,n){"use strict";var r=n(59959),o=n(71160),i=n(57336),a=function(e){return function(t,n,a){var u=r(t),s=i(u);if(0===s)return!e&&-1;var c,l=o(a,s);if(e&&n!==n){for(;s>l;)if((c=u[l++])!==c)return!0}else for(;s>l;l++)if((e||l in u)&&u[l]===n)return e||l||0;return!e&&-1}};e.exports={includes:a(!0),indexOf:a(!1)}},39951:function(e,t,n){"use strict";var r=n(63050),o=n(37127),i=n(7808),a=n(64729)("species"),u=Array;e.exports=function(e){var t;return r(e)&&(t=e.constructor,(o(t)&&(t===u||r(t.prototype))||i(t)&&null===(t=t[a]))&&(t=void 0)),void 0===t?u:t}},18719:function(e,t,n){"use strict";var r=n(39951);e.exports=function(e,t){return new(r(e))(0===t?0:t)}},38694:function(e,t,n){"use strict";var r=n(22546),o=r({}.toString),i=r("".slice);e.exports=function(e){return i(o(e),8,-1)}},77353:function(e,t,n){"use strict";var r=n(87642),o=n(97347),i=n(38694),a=n(64729)("toStringTag"),u=Object,s="Arguments"===i(function(){return arguments}());e.exports=r?i:function(e){var t,n,r;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(n){}}(t=u(e),a))?n:s?i(t):"Object"===(r=i(t))&&o(t.callee)?"Arguments":r}},65966:function(e,t,n){"use strict";var r=n(75123),o=n(70209),i=n(84409),a=n(9283);e.exports=function(e,t,n){for(var u=o(t),s=a.f,c=i.f,l=0;l<u.length;l++){var f=u[l];r(e,f)||n&&r(n,f)||s(e,f,c(t,f))}}},5525:function(e,t,n){"use strict";var r=n(32198),o=n(9283),i=n(89186);e.exports=r?function(e,t,n){return o.f(e,t,i(1,n))}:function(e,t,n){return e[t]=n,e}},89186:function(e){"use strict";e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},72130:function(e,t,n){"use strict";var r=n(97347),o=n(9283),i=n(27777),a=n(25527);e.exports=function(e,t,n,u){u||(u={});var s=u.enumerable,c=void 0!==u.name?u.name:t;if(r(n)&&i(n,c,u),u.global)s?e[t]=n:a(t,n);else{try{u.unsafe?e[t]&&(s=!0):delete e[t]}catch(l){}s?e[t]=n:o.f(e,t,{value:n,enumerable:!1,configurable:!u.nonConfigurable,writable:!u.nonWritable})}return e}},25527:function(e,t,n){"use strict";var r=n(74642),o=Object.defineProperty;e.exports=function(e,t){try{o(r,e,{value:t,configurable:!0,writable:!0})}catch(n){r[e]=t}return t}},32198:function(e,t,n){"use strict";var r=n(68801);e.exports=!r((function(){return 7!==Object.defineProperty({},1,{get:function(){return 7}})[1]}))},52497:function(e,t,n){"use strict";var r=n(74642),o=n(7808),i=r.document,a=o(i)&&o(i.createElement);e.exports=function(e){return a?i.createElement(e):{}}},3787:function(e){"use strict";var t=TypeError;e.exports=function(e){if(e>9007199254740991)throw t("Maximum allowed index exceeded");return e}},47481:function(e,t,n){"use strict";var r=n(74642),o=n(22546);e.exports=function(e,t){return o(r[e].prototype[t])}},21293:function(e){"use strict";e.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},45869:function(e,t,n){"use strict";var r=n(74642).navigator,o=r&&r.userAgent;e.exports=o?String(o):""},24421:function(e,t,n){"use strict";var r,o,i=n(74642),a=n(45869),u=i.process,s=i.Deno,c=u&&u.versions||s&&s.version,l=c&&c.v8;l&&(o=(r=l.split("."))[0]>0&&r[0]<4?1:+(r[0]+r[1])),!o&&a&&(!(r=a.match(/Edge\/(\d+)/))||r[1]>=74)&&(r=a.match(/Chrome\/(\d+)/))&&(o=+r[1]),e.exports=o},45052:function(e,t,n){"use strict";var r=n(74642),o=n(84409).f,i=n(5525),a=n(72130),u=n(25527),s=n(65966),c=n(7554);e.exports=function(e,t){var n,l,f,d,p,h=e.target,v=e.global,g=e.stat;if(n=v?r:g?r[h]||u(h,{}):r[h]&&r[h].prototype)for(l in t){if(d=t[l],f=e.dontCallGetSet?(p=o(n,l))&&p.value:n[l],!c(v?l:h+(g?".":"#")+l,e.forced)&&void 0!==f){if(typeof d==typeof f)continue;s(d,f)}(e.sham||f&&f.sham)&&i(d,"sham",!0),a(n,l,d,e)}}},68801:function(e){"use strict";e.exports=function(e){try{return!!e()}catch(t){return!0}}},41126:function(e,t,n){"use strict";n(37525);var r=n(57415),o=n(72130),i=n(36345),a=n(68801),u=n(64729),s=n(5525),c=u("species"),l=RegExp.prototype;e.exports=function(e,t,n,f){var d=u(e),p=!a((function(){var t={};return t[d]=function(){return 7},7!==""[e](t)})),h=p&&!a((function(){var t=!1,n=/a/;return"split"===e&&((n={}).constructor={},n.constructor[c]=function(){return n},n.flags="",n[d]=/./[d]),n.exec=function(){return t=!0,null},n[d](""),!t}));if(!p||!h||n){var v=/./[d],g=t(d,""[e],(function(e,t,n,o,a){var u=t.exec;return u===i||u===l.exec?p&&!a?{done:!0,value:r(v,t,n,o)}:{done:!0,value:r(e,n,t,o)}:{done:!1}}));o(String.prototype,e,g[0]),o(l,d,g[1])}f&&s(l[d],"sham",!0)}},52473:function(e,t,n){"use strict";var r=n(63050),o=n(57336),i=n(3787),a=n(66602),u=function(e,t,n,s,c,l,f,d){for(var p,h,v=c,g=0,y=!!f&&a(f,d);g<s;)g in n&&(p=y?y(n[g],g,t):n[g],l>0&&r(p)?(h=o(p),v=u(e,t,p,h,v,l-1)-1):(i(v+1),e[v]=p),v++),g++;return v};e.exports=u},92851:function(e,t,n){"use strict";var r=n(77226),o=Function.prototype,i=o.apply,a=o.call;e.exports="object"==typeof Reflect&&Reflect.apply||(r?a.bind(i):function(){return a.apply(i,arguments)})},66602:function(e,t,n){"use strict";var r=n(354),o=n(70032),i=n(77226),a=r(r.bind);e.exports=function(e,t){return o(e),void 0===t?e:i?a(e,t):function(){return e.apply(t,arguments)}}},77226:function(e,t,n){"use strict";var r=n(68801);e.exports=!r((function(){var e=function(){}.bind();return"function"!=typeof e||e.hasOwnProperty("prototype")}))},57415:function(e,t,n){"use strict";var r=n(77226),o=Function.prototype.call;e.exports=r?o.bind(o):function(){return o.apply(o,arguments)}},87256:function(e,t,n){"use strict";var r=n(32198),o=n(75123),i=Function.prototype,a=r&&Object.getOwnPropertyDescriptor,u=o(i,"name"),s=u&&"something"===function(){}.name,c=u&&(!r||r&&a(i,"name").configurable);e.exports={EXISTS:u,PROPER:s,CONFIGURABLE:c}},354:function(e,t,n){"use strict";var r=n(38694),o=n(22546);e.exports=function(e){if("Function"===r(e))return o(e)}},22546:function(e,t,n){"use strict";var r=n(77226),o=Function.prototype,i=o.call,a=r&&o.bind.bind(i,i);e.exports=r?a:function(e){return function(){return i.apply(e,arguments)}}},22313:function(e,t,n){"use strict";var r=n(74642),o=n(97347);e.exports=function(e,t){return arguments.length<2?(n=r[e],o(n)?n:void 0):r[e]&&r[e][t];var n}},30828:function(e,t,n){"use strict";var r=n(70032),o=n(45239);e.exports=function(e,t){var n=e[t];return o(n)?void 0:r(n)}},51852:function(e,t,n){"use strict";var r=n(22546),o=n(46067),i=Math.floor,a=r("".charAt),u=r("".replace),s=r("".slice),c=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,l=/\$([$&'`]|\d{1,2})/g;e.exports=function(e,t,n,r,f,d){var p=n+e.length,h=r.length,v=l;return void 0!==f&&(f=o(f),v=c),u(d,v,(function(o,u){var c;switch(a(u,0)){case"$":return"$";case"&":return e;case"`":return s(t,0,n);case"'":return s(t,p);case"<":c=f[s(u,1,-1)];break;default:var l=+u;if(0===l)return o;if(l>h){var d=i(l/10);return 0===d?o:d<=h?void 0===r[d-1]?a(u,1):r[d-1]+a(u,1):o}c=r[l-1]}return void 0===c?"":c}))}},74642:function(e,t,n){"use strict";var r=function(e){return e&&e.Math===Math&&e};e.exports=r("object"==typeof globalThis&&globalThis)||r("object"==typeof window&&window)||r("object"==typeof self&&self)||r("object"==typeof n.g&&n.g)||r("object"==typeof this&&this)||function(){return this}()||Function("return this")()},75123:function(e,t,n){"use strict";var r=n(22546),o=n(46067),i=r({}.hasOwnProperty);e.exports=Object.hasOwn||function(e,t){return i(o(e),t)}},23771:function(e){"use strict";e.exports={}},40707:function(e,t,n){"use strict";var r=n(22313);e.exports=r("document","documentElement")},39039:function(e,t,n){"use strict";var r=n(32198),o=n(68801),i=n(52497);e.exports=!r&&!o((function(){return 7!==Object.defineProperty(i("div"),"a",{get:function(){return 7}}).a}))},71793:function(e,t,n){"use strict";var r=n(22546),o=n(68801),i=n(38694),a=Object,u=r("".split);e.exports=o((function(){return!a("z").propertyIsEnumerable(0)}))?function(e){return"String"===i(e)?u(e,""):a(e)}:a},98796:function(e,t,n){"use strict";var r=n(22546),o=n(97347),i=n(33375),a=r(Function.toString);o(i.inspectSource)||(i.inspectSource=function(e){return a(e)}),e.exports=i.inspectSource},14443:function(e,t,n){"use strict";var r,o,i,a=n(59260),u=n(74642),s=n(7808),c=n(5525),l=n(75123),f=n(33375),d=n(27865),p=n(23771),h="Object already initialized",v=u.TypeError,g=u.WeakMap;if(a||f.state){var y=f.state||(f.state=new g);y.get=y.get,y.has=y.has,y.set=y.set,r=function(e,t){if(y.has(e))throw new v(h);return t.facade=e,y.set(e,t),t},o=function(e){return y.get(e)||{}},i=function(e){return y.has(e)}}else{var m=d("state");p[m]=!0,r=function(e,t){if(l(e,m))throw new v(h);return t.facade=e,c(e,m,t),t},o=function(e){return l(e,m)?e[m]:{}},i=function(e){return l(e,m)}}e.exports={set:r,get:o,has:i,enforce:function(e){return i(e)?o(e):r(e,{})},getterFor:function(e){return function(t){var n;if(!s(t)||(n=o(t)).type!==e)throw new v("Incompatible receiver, "+e+" required");return n}}}},63050:function(e,t,n){"use strict";var r=n(38694);e.exports=Array.isArray||function(e){return"Array"===r(e)}},97347:function(e){"use strict";var t="object"==typeof document&&document.all;e.exports="undefined"==typeof t&&void 0!==t?function(e){return"function"==typeof e||e===t}:function(e){return"function"==typeof e}},37127:function(e,t,n){"use strict";var r=n(22546),o=n(68801),i=n(97347),a=n(77353),u=n(22313),s=n(98796),c=function(){},l=u("Reflect","construct"),f=/^\s*(?:class|function)\b/,d=r(f.exec),p=!f.test(c),h=function(e){if(!i(e))return!1;try{return l(c,[],e),!0}catch(t){return!1}},v=function(e){if(!i(e))return!1;switch(a(e)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return p||!!d(f,s(e))}catch(t){return!0}};v.sham=!0,e.exports=!l||o((function(){var e;return h(h.call)||!h(Object)||!h((function(){e=!0}))||e}))?v:h},7554:function(e,t,n){"use strict";var r=n(68801),o=n(97347),i=/#|\.prototype\./,a=function(e,t){var n=s[u(e)];return n===l||n!==c&&(o(t)?r(t):!!t)},u=a.normalize=function(e){return String(e).replace(i,".").toLowerCase()},s=a.data={},c=a.NATIVE="N",l=a.POLYFILL="P";e.exports=a},45239:function(e){"use strict";e.exports=function(e){return null===e||void 0===e}},7808:function(e,t,n){"use strict";var r=n(97347);e.exports=function(e){return"object"==typeof e?null!==e:r(e)}},19629:function(e){"use strict";e.exports=!1},80170:function(e,t,n){"use strict";var r=n(7808),o=n(38694),i=n(64729)("match");e.exports=function(e){var t;return r(e)&&(void 0!==(t=e[i])?!!t:"RegExp"===o(e))}},12935:function(e,t,n){"use strict";var r=n(22313),o=n(97347),i=n(13927),a=n(67526),u=Object;e.exports=a?function(e){return"symbol"==typeof e}:function(e){var t=r("Symbol");return o(t)&&i(t.prototype,u(e))}},57336:function(e,t,n){"use strict";var r=n(72908);e.exports=function(e){return r(e.length)}},27777:function(e,t,n){"use strict";var r=n(22546),o=n(68801),i=n(97347),a=n(75123),u=n(32198),s=n(87256).CONFIGURABLE,c=n(98796),l=n(14443),f=l.enforce,d=l.get,p=String,h=Object.defineProperty,v=r("".slice),g=r("".replace),y=r([].join),m=u&&!o((function(){return 8!==h((function(){}),"length",{value:8}).length})),b=String(String).split("String"),w=e.exports=function(e,t,n){"Symbol("===v(p(t),0,7)&&(t="["+g(p(t),/^Symbol\(([^)]*)\).*$/,"$1")+"]"),n&&n.getter&&(t="get "+t),n&&n.setter&&(t="set "+t),(!a(e,"name")||s&&e.name!==t)&&(u?h(e,"name",{value:t,configurable:!0}):e.name=t),m&&n&&a(n,"arity")&&e.length!==n.arity&&h(e,"length",{value:n.arity});try{n&&a(n,"constructor")&&n.constructor?u&&h(e,"prototype",{writable:!1}):e.prototype&&(e.prototype=void 0)}catch(o){}var r=f(e);return a(r,"source")||(r.source=y(b,"string"==typeof t?t:"")),e};Function.prototype.toString=w((function(){return i(this)&&d(this).source||c(this)}),"toString")},22591:function(e){"use strict";var t=Math.ceil,n=Math.floor;e.exports=Math.trunc||function(e){var r=+e;return(r>0?n:t)(r)}},54850:function(e,t,n){"use strict";var r,o=n(28093),i=n(35375),a=n(21293),u=n(23771),s=n(40707),c=n(52497),l=n(27865),f="prototype",d="script",p=l("IE_PROTO"),h=function(){},v=function(e){return"<"+d+">"+e+"</"+d+">"},g=function(e){e.write(v("")),e.close();var t=e.parentWindow.Object;return e=null,t},y=function(){try{r=new ActiveXObject("htmlfile")}catch(t){}y="undefined"!=typeof document?document.domain&&r?g(r):function(){var e,t=c("iframe"),n="java"+d+":";return t.style.display="none",s.appendChild(t),t.src=String(n),(e=t.contentWindow.document).open(),e.write(v("document.F=Object")),e.close(),e.F}():g(r);for(var e=a.length;e--;)delete y[f][a[e]];return y()};u[p]=!0,e.exports=Object.create||function(e,t){var n;return null!==e?(h[f]=o(e),n=new h,h[f]=null,n[p]=e):n=y(),void 0===t?n:i.f(n,t)}},35375:function(e,t,n){"use strict";var r=n(32198),o=n(95152),i=n(9283),a=n(28093),u=n(59959),s=n(19666);t.f=r&&!o?Object.defineProperties:function(e,t){a(e);for(var n,r=u(t),o=s(t),c=o.length,l=0;c>l;)i.f(e,n=o[l++],r[n]);return e}},9283:function(e,t,n){"use strict";var r=n(32198),o=n(39039),i=n(95152),a=n(28093),u=n(34047),s=TypeError,c=Object.defineProperty,l=Object.getOwnPropertyDescriptor,f="enumerable",d="configurable",p="writable";t.f=r?i?function(e,t,n){if(a(e),t=u(t),a(n),"function"===typeof e&&"prototype"===t&&"value"in n&&p in n&&!n[p]){var r=l(e,t);r&&r[p]&&(e[t]=n.value,n={configurable:d in n?n[d]:r[d],enumerable:f in n?n[f]:r[f],writable:!1})}return c(e,t,n)}:c:function(e,t,n){if(a(e),t=u(t),a(n),o)try{return c(e,t,n)}catch(r){}if("get"in n||"set"in n)throw new s("Accessors not supported");return"value"in n&&(e[t]=n.value),e}},84409:function(e,t,n){"use strict";var r=n(32198),o=n(57415),i=n(82371),a=n(89186),u=n(59959),s=n(34047),c=n(75123),l=n(39039),f=Object.getOwnPropertyDescriptor;t.f=r?f:function(e,t){if(e=u(e),t=s(t),l)try{return f(e,t)}catch(n){}if(c(e,t))return a(!o(i.f,e,t),e[t])}},52478:function(e,t,n){"use strict";var r=n(43198),o=n(21293).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return r(e,o)}},44947:function(e,t){"use strict";t.f=Object.getOwnPropertySymbols},13927:function(e,t,n){"use strict";var r=n(22546);e.exports=r({}.isPrototypeOf)},43198:function(e,t,n){"use strict";var r=n(22546),o=n(75123),i=n(59959),a=n(46211).indexOf,u=n(23771),s=r([].push);e.exports=function(e,t){var n,r=i(e),c=0,l=[];for(n in r)!o(u,n)&&o(r,n)&&s(l,n);for(;t.length>c;)o(r,n=t[c++])&&(~a(l,n)||s(l,n));return l}},19666:function(e,t,n){"use strict";var r=n(43198),o=n(21293);e.exports=Object.keys||function(e){return r(e,o)}},82371:function(e,t){"use strict";var n={}.propertyIsEnumerable,r=Object.getOwnPropertyDescriptor,o=r&&!n.call({1:2},1);t.f=o?function(e){var t=r(this,e);return!!t&&t.enumerable}:n},1684:function(e,t,n){"use strict";var r=n(57415),o=n(97347),i=n(7808),a=TypeError;e.exports=function(e,t){var n,u;if("string"===t&&o(n=e.toString)&&!i(u=r(n,e)))return u;if(o(n=e.valueOf)&&!i(u=r(n,e)))return u;if("string"!==t&&o(n=e.toString)&&!i(u=r(n,e)))return u;throw new a("Can't convert object to primitive value")}},70209:function(e,t,n){"use strict";var r=n(22313),o=n(22546),i=n(52478),a=n(44947),u=n(28093),s=o([].concat);e.exports=r("Reflect","ownKeys")||function(e){var t=i.f(u(e)),n=a.f;return n?s(t,n(e)):t}},76276:function(e,t,n){"use strict";var r=n(57415),o=n(28093),i=n(97347),a=n(38694),u=n(36345),s=TypeError;e.exports=function(e,t){var n=e.exec;if(i(n)){var c=r(n,e,t);return null!==c&&o(c),c}if("RegExp"===a(e))return r(u,e,t);throw new s("RegExp#exec called on incompatible receiver")}},36345:function(e,t,n){"use strict";var r=n(57415),o=n(22546),i=n(86525),a=n(88373),u=n(62275),s=n(80575),c=n(54850),l=n(14443).get,f=n(31877),d=n(21512),p=s("native-string-replace",String.prototype.replace),h=RegExp.prototype.exec,v=h,g=o("".charAt),y=o("".indexOf),m=o("".replace),b=o("".slice),w=function(){var e=/a/,t=/b*/g;return r(h,e,"a"),r(h,t,"a"),0!==e.lastIndex||0!==t.lastIndex}(),S=u.BROKEN_CARET,x=void 0!==/()??/.exec("")[1];(w||x||S||f||d)&&(v=function(e){var t,n,o,u,s,f,d,P=this,O=l(P),k=i(e),_=O.raw;if(_)return _.lastIndex=P.lastIndex,t=r(v,_,k),P.lastIndex=_.lastIndex,t;var j=O.groups,I=S&&P.sticky,T=r(a,P),E=P.source,C=0,M=k;if(I&&(T=m(T,"y",""),-1===y(T,"g")&&(T+="g"),M=b(k,P.lastIndex),P.lastIndex>0&&(!P.multiline||P.multiline&&"\n"!==g(k,P.lastIndex-1))&&(E="(?: "+E+")",M=" "+M,C++),n=new RegExp("^(?:"+E+")",T)),x&&(n=new RegExp("^"+E+"$(?!\\s)",T)),w&&(o=P.lastIndex),u=r(h,I?n:P,M),I?u?(u.input=b(u.input,C),u[0]=b(u[0],C),u.index=P.lastIndex,P.lastIndex+=u[0].length):P.lastIndex=0:w&&u&&(P.lastIndex=P.global?u.index+u[0].length:o),x&&u&&u.length>1&&r(p,u[0],n,(function(){for(s=1;s<arguments.length-2;s++)void 0===arguments[s]&&(u[s]=void 0)})),u&&j)for(u.groups=f=c(null),s=0;s<j.length;s++)f[(d=j[s])[0]]=u[d[1]];return u}),e.exports=v},88373:function(e,t,n){"use strict";var r=n(28093);e.exports=function(){var e=r(this),t="";return e.hasIndices&&(t+="d"),e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.unicodeSets&&(t+="v"),e.sticky&&(t+="y"),t}},18128:function(e,t,n){"use strict";var r=n(57415),o=n(75123),i=n(13927),a=n(88373),u=RegExp.prototype;e.exports=function(e){var t=e.flags;return void 0!==t||"flags"in u||o(e,"flags")||!i(u,e)?t:r(a,e)}},62275:function(e,t,n){"use strict";var r=n(68801),o=n(74642).RegExp,i=r((function(){var e=o("a","y");return e.lastIndex=2,null!==e.exec("abcd")})),a=i||r((function(){return!o("a","y").sticky})),u=i||r((function(){var e=o("^r","gy");return e.lastIndex=2,null!==e.exec("str")}));e.exports={BROKEN_CARET:u,MISSED_STICKY:a,UNSUPPORTED_Y:i}},31877:function(e,t,n){"use strict";var r=n(68801),o=n(74642).RegExp;e.exports=r((function(){var e=o(".","s");return!(e.dotAll&&e.test("\n")&&"s"===e.flags)}))},21512:function(e,t,n){"use strict";var r=n(68801),o=n(74642).RegExp;e.exports=r((function(){var e=o("(?<a>b)","g");return"b"!==e.exec("b").groups.a||"bc"!=="b".replace(e,"$<a>c")}))},3576:function(e,t,n){"use strict";var r=n(45239),o=TypeError;e.exports=function(e){if(r(e))throw new o("Can't call method on "+e);return e}},27865:function(e,t,n){"use strict";var r=n(80575),o=n(8290),i=r("keys");e.exports=function(e){return i[e]||(i[e]=o(e))}},33375:function(e,t,n){"use strict";var r=n(19629),o=n(74642),i=n(25527),a="__core-js_shared__",u=e.exports=o[a]||i(a,{});(u.versions||(u.versions=[])).push({version:"3.40.0",mode:r?"pure":"global",copyright:"\xa9 2014-2025 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.40.0/LICENSE",source:"https://github.com/zloirock/core-js"})},80575:function(e,t,n){"use strict";var r=n(33375);e.exports=function(e,t){return r[e]||(r[e]=t||{})}},5305:function(e,t,n){"use strict";var r=n(22546),o=n(59669),i=n(86525),a=n(3576),u=r("".charAt),s=r("".charCodeAt),c=r("".slice),l=function(e){return function(t,n){var r,l,f=i(a(t)),d=o(n),p=f.length;return d<0||d>=p?e?"":void 0:(r=s(f,d))<55296||r>56319||d+1===p||(l=s(f,d+1))<56320||l>57343?e?u(f,d):r:e?c(f,d,d+2):l-56320+(r-55296<<10)+65536}};e.exports={codeAt:l(!1),charAt:l(!0)}},82917:function(e,t,n){"use strict";var r=n(24421),o=n(68801),i=n(74642).String;e.exports=!!Object.getOwnPropertySymbols&&!o((function(){var e=Symbol("symbol detection");return!i(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&r&&r<41}))},71160:function(e,t,n){"use strict";var r=n(59669),o=Math.max,i=Math.min;e.exports=function(e,t){var n=r(e);return n<0?o(n+t,0):i(n,t)}},59959:function(e,t,n){"use strict";var r=n(71793),o=n(3576);e.exports=function(e){return r(o(e))}},59669:function(e,t,n){"use strict";var r=n(22591);e.exports=function(e){var t=+e;return t!==t||0===t?0:r(t)}},72908:function(e,t,n){"use strict";var r=n(59669),o=Math.min;e.exports=function(e){var t=r(e);return t>0?o(t,9007199254740991):0}},46067:function(e,t,n){"use strict";var r=n(3576),o=Object;e.exports=function(e){return o(r(e))}},5835:function(e,t,n){"use strict";var r=n(57415),o=n(7808),i=n(12935),a=n(30828),u=n(1684),s=n(64729),c=TypeError,l=s("toPrimitive");e.exports=function(e,t){if(!o(e)||i(e))return e;var n,s=a(e,l);if(s){if(void 0===t&&(t="default"),n=r(s,e,t),!o(n)||i(n))return n;throw new c("Can't convert object to primitive value")}return void 0===t&&(t="number"),u(e,t)}},34047:function(e,t,n){"use strict";var r=n(5835),o=n(12935);e.exports=function(e){var t=r(e,"string");return o(t)?t:t+""}},87642:function(e,t,n){"use strict";var r={};r[n(64729)("toStringTag")]="z",e.exports="[object z]"===String(r)},86525:function(e,t,n){"use strict";var r=n(77353),o=String;e.exports=function(e){if("Symbol"===r(e))throw new TypeError("Cannot convert a Symbol value to a string");return o(e)}},75505:function(e){"use strict";var t=String;e.exports=function(e){try{return t(e)}catch(n){return"Object"}}},8290:function(e,t,n){"use strict";var r=n(22546),o=0,i=Math.random(),a=r(1..toString);e.exports=function(e){return"Symbol("+(void 0===e?"":e)+")_"+a(++o+i,36)}},67526:function(e,t,n){"use strict";var r=n(82917);e.exports=r&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},95152:function(e,t,n){"use strict";var r=n(32198),o=n(68801);e.exports=r&&o((function(){return 42!==Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype}))},59260:function(e,t,n){"use strict";var r=n(74642),o=n(97347),i=r.WeakMap;e.exports=o(i)&&/native code/.test(String(i))},64729:function(e,t,n){"use strict";var r=n(74642),o=n(80575),i=n(75123),a=n(8290),u=n(82917),s=n(67526),c=r.Symbol,l=o("wks"),f=s?c.for||c:c&&c.withoutSetter||a;e.exports=function(e){return i(l,e)||(l[e]=u&&i(c,e)?c[e]:f("Symbol."+e)),l[e]}},58609:function(e,t,n){"use strict";var r=n(45052),o=n(46067),i=n(57336),a=n(59669),u=n(74751);r({target:"Array",proto:!0},{at:function(e){var t=o(this),n=i(t),r=a(e),u=r>=0?r:n+r;return u<0||u>=n?void 0:t[u]}}),u("at")},92672:function(e,t,n){"use strict";var r=n(45052),o=n(52473),i=n(70032),a=n(46067),u=n(57336),s=n(18719);r({target:"Array",proto:!0},{flatMap:function(e){var t,n=a(this),r=u(n);return i(e),(t=s(n,0)).length=o(t,n,n,r,0,1,e,arguments.length>1?arguments[1]:void 0),t}})},1851:function(e,t,n){"use strict";var r=n(45052),o=n(52473),i=n(46067),a=n(57336),u=n(59669),s=n(18719);r({target:"Array",proto:!0},{flat:function(){var e=arguments.length?arguments[0]:void 0,t=i(this),n=a(t),r=s(t,0);return r.length=o(r,t,t,n,0,void 0===e?1:u(e)),r}})},59939:function(e,t,n){"use strict";n(74751)("flatMap")},84384:function(e,t,n){"use strict";n(74751)("flat")},37525:function(e,t,n){"use strict";var r=n(45052),o=n(36345);r({target:"RegExp",proto:!0,forced:/./.exec!==o},{exec:o})},98931:function(e,t,n){"use strict";var r=n(45052),o=n(22546),i=n(3576),a=n(59669),u=n(86525),s=n(68801),c=o("".charAt);r({target:"String",proto:!0,forced:s((function(){return"\ud842"!=="\ud842\udfb7".at(-2)}))},{at:function(e){var t=u(i(this)),n=t.length,r=a(e),o=r>=0?r:n+r;return o<0||o>=n?void 0:c(t,o)}})},10304:function(e,t,n){"use strict";var r=n(45052),o=n(57415),i=n(22546),a=n(3576),u=n(97347),s=n(45239),c=n(80170),l=n(86525),f=n(30828),d=n(18128),p=n(51852),h=n(64729),v=n(19629),g=h("replace"),y=TypeError,m=i("".indexOf),b=i("".replace),w=i("".slice),S=Math.max;r({target:"String",proto:!0},{replaceAll:function(e,t){var n,r,i,h,x,P,O,k,_,j,I=a(this),T=0,E="";if(!s(e)){if((n=c(e))&&(r=l(a(d(e))),!~m(r,"g")))throw new y("`.replaceAll` does not allow non-global regexes");if(i=f(e,g))return o(i,e,I,t);if(v&&n)return b(l(I),e,t)}for(h=l(I),x=l(e),(P=u(t))||(t=l(t)),O=x.length,k=S(1,O),_=m(h,x);-1!==_;)j=P?l(t(x,_,h)):p(x,h,_,[],void 0,t),E+=w(h,T,_)+j,T=_+O,_=_+k>h.length?-1:m(h,x,_+k);return T<h.length&&(E+=w(h,T)),E}})},31342:function(e,t,n){"use strict";var r=n(92851),o=n(57415),i=n(22546),a=n(41126),u=n(68801),s=n(28093),c=n(97347),l=n(45239),f=n(59669),d=n(72908),p=n(86525),h=n(3576),v=n(80571),g=n(30828),y=n(51852),m=n(76276),b=n(64729)("replace"),w=Math.max,S=Math.min,x=i([].concat),P=i([].push),O=i("".indexOf),k=i("".slice),_="$0"==="a".replace(/./,"$0"),j=!!/./[b]&&""===/./[b]("a","$0");a("replace",(function(e,t,n){var i=j?"$":"$0";return[function(e,n){var r=h(this),i=l(e)?void 0:g(e,b);return i?o(i,e,r,n):o(t,p(r),e,n)},function(e,o){var a=s(this),u=p(e);if("string"==typeof o&&-1===O(o,i)&&-1===O(o,"$<")){var l=n(t,a,u,o);if(l.done)return l.value}var h=c(o);h||(o=p(o));var g,b=a.global;b&&(g=a.unicode,a.lastIndex=0);for(var _,j=[];null!==(_=m(a,u))&&(P(j,_),b);){""===p(_[0])&&(a.lastIndex=v(u,d(a.lastIndex),g))}for(var I,T="",E=0,C=0;C<j.length;C++){for(var M,A=p((_=j[C])[0]),D=w(S(f(_.index),u.length),0),R=[],N=1;N<_.length;N++)P(R,void 0===(I=_[N])?I:String(I));var L=_.groups;if(h){var U=x([A],R,D,u);void 0!==L&&P(U,L),M=p(r(o,void 0,U))}else M=y(A,u,D,R,L,o);D>=E&&(T+=k(u,E,D)+M,E=D+A.length)}return T+k(u,E)}]}),!!u((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")}))||!_||j)},70294:function(e,t,n){"use strict";var r=n(80091);e.exports=r},55039:function(e,t,n){"use strict";var r=n(56558);e.exports=r},27900:function(e,t,n){"use strict";var r=n(59185);e.exports=r},69198:function(e,t,n){"use strict";var r=n(43709);e.exports=r},81589:function(e,t,n){"use strict";var r=n(88244);e.exports=r},48738:function(e,t){var n;!function(){"use strict";var r={}.hasOwnProperty;function o(){for(var e="",t=0;t<arguments.length;t++){var n=arguments[t];n&&(e=a(e,i(n)))}return e}function i(e){if("string"===typeof e||"number"===typeof e)return e;if("object"!==typeof e)return"";if(Array.isArray(e))return o.apply(null,e);if(e.toString!==Object.prototype.toString&&!e.toString.toString().includes("[native code]"))return e.toString();var t="";for(var n in e)r.call(e,n)&&e[n]&&(t=a(t,n));return t}function a(e,t){return t?e?e+" "+t:e+t:e}e.exports?(o.default=o,e.exports=o):void 0===(n=function(){return o}.apply(t,[]))||(e.exports=n)}()},63437:function(e){var t,n=Object.defineProperty,r=Object.getOwnPropertyDescriptor,o=Object.getOwnPropertyNames,i=Object.prototype.hasOwnProperty,a={};function u(e){const t=function(e){const t={},n={},r=e.length;for(let o=0;o<r;o++){const r=e[o];t[o]=r,n[r]=o}return{byCode:t,byChar:n,length:r}}(e.chars),n=function(e,t,n,r){const o=t?e.byChar[t]:Math.ceil(e.length/2),i=n?e.byChar[n]:e.length-1,a=r?e.byChar[r]:0;if(void 0===o||void 0===i||void 0===a)throw new Error("invalid charSet");if(i-o<3)throw new Error("mostPositive must be at least 3 characters away from neutral");if(o-a<3)throw new Error("mostNegative must be at least 3 characters away from neutral");return{firstPositive:e.byCode[o],mostPositive:e.byCode[i],firstNegative:e.byCode[o-1],mostNegative:e.byCode[a]}}(t,e.firstPositive,e.mostPositive,e.mostNegative),r=e.jitterRange??Math.floor(Math.pow(t.length,3)/5),o=function(e,t){const n={};for(let r=0;r<100&&(n[r]=Math.pow(t,r),!(n[r]>e));r++);return n}(r,t.length);return{chars:e.chars,byChar:t.byChar,byCode:t.byCode,length:t.length,first:t.byCode[0],last:t.byCode[t.length-1],firstPositive:n.firstPositive,mostPositive:n.mostPositive,firstNegative:n.firstNegative,mostNegative:n.mostNegative,jitterRange:r,paddingDict:o}}((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(a,{IndexGenerator:()=>R,base62CharSet:()=>c,generateJitteredKeyBetween:()=>M,generateKeyBetween:()=>E,generateNJitteredKeysBetween:()=>A,generateNKeysBetween:()=>C,indexCharacterSet:()=>u}),e.exports=(t=a,((e,t,a,u)=>{if(t&&"object"===typeof t||"function"===typeof t)for(let s of o(t))i.call(e,s)||s===a||n(e,s,{get:()=>t[s],enumerable:!(u=r(t,s))||u.enumerable});return e})(n({},"__esModule",{value:!0}),t));var s=null;function c(){return s||(s=u({chars:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",firstPositive:"a",mostPositive:"z",mostNegative:"A"}))}function l(e,t,n){const r=n.byChar[e],o=n.byChar[t];return Math.abs(r-o)}function f(e,t){const n=e[0];if(n>t.mostPositive||n<t.mostNegative)throw new Error("invalid firstChar on key");if(n===t.mostPositive){return l(n,t.firstPositive,t)+1+d(e.slice(1),"positive",t)}if(n===t.mostNegative){return l(n,t.firstNegative,t)+1+d(e.slice(1),"negative",t)}return n>=t.firstPositive?l(n,t.firstPositive,t)+2:l(n,t.firstNegative,t)+2}function d(e,t,n){const r=e[0];if(r>n.mostPositive||r<n.mostNegative)throw new Error("invalid firstChar on key");if(r===n.mostPositive&&"positive"===t){return l(r,n.mostNegative,n)+1+d(e.slice(1),t,n)}if(r===n.mostNegative&&"negative"===t){return l(r,n.mostPositive,n)+1+d(e.slice(1),t,n)}return"positive"===t?l(r,n.mostNegative,n)+2:l(r,n.mostPositive,n)+2}function p(e,t,n,r,o){const i=o??Math.max(e.length,t.length);return"start"===n?[e.padStart(i,r),t.padStart(i,r)]:[e.padEnd(i,r),t.padEnd(i,r)]}function h(e,t,n){const[r,o]=p(e,t,"end",n.first).sort();return function(e,t){let n=0;const r=e.length,o=t.length;for(let i=0;i<r;i++)n+=t.byChar[e[i]]*Math.pow(o,r-i-1);return n}(g(o,r,n),n)}function v(e,t,n){const r=n.length,[o,i]=p(e,t,"start",n.first),a=[];let u=0;for(let s=o.length-1;s>=0;s--){const e=n.byChar[o[s]]+n.byChar[i[s]]+u;u=Math.floor(e/r);const t=e%r;a.unshift(n.byCode[t])}return u>0&&a.unshift(n.byCode[u]),a.join("")}function g(e,t,n){const r=n.length,[o,i]=p(e,t,"start",n.first),a=[];let u=0;for(let s=o.length-1;s>=0;s--){let e=n.byChar[o[s]];const t=n.byChar[i[s]]+u;e<t?(u=1,e+=r):u=0;const c=e-t;a.unshift(n.byCode[c])}if(u>0)throw new Error("Subtraction result is negative. Ensure a is greater than or equal to b.");for(;a.length>1&&a[0]===n.byCode[0];)a.shift();return a.join("")}function y(e,t){return v(e,t.byCode[1],t)}function m(e,t){return g(e,t.byCode[1],t)}function b(e,t){if(0===e)return t.byCode[0];let n="";const r=t.length;for(;e>0;)n=t.byCode[e%r]+n,e=Math.floor(e/r);return n}function w(e,t){S(e,t)}function S(e,t){const n=f(k(e,t),t);if(n>e.length)throw new Error("invalid order key length: "+e);return e.slice(0,n)}function x(e,t){if(!function(e,t){return f(e,t)===e.length}(e,t))throw new Error("invalid integer length: "+e)}function P(e,t){x(e,t);const[n,r]=_(e,t);if(r.split("").some((e=>e!==t.byCode[t.length-1]))){return n+y(r,t)}const o=function(e,t){const n=e>=t.firstPositive,r=y(e,t),o=e[e.length-1]===t.mostPositive,i=r[r.length-1]===t.mostPositive;if(n&&i)return r+t.mostNegative;if(!n&&o)return e.slice(0,e.length-1);return r}(n,t);return j(o,"lower",t)}function O(e,t){x(e,t);const[n,r]=_(e,t);if(r.split("").some((e=>e!==t.byCode[0]))){return n+m(r,t)}const o=function(e,t){const n=e>=t.firstPositive,r=e[e.length-1]===t.mostNegative;if(n&&r){return m(e.slice(0,e.length-1),t)}if(!n&&r)return e+t.mostPositive;return m(e,t)}(n,t);return j(o,"upper",t)}function k(e,t){let n=0;if(e[0]===t.mostPositive)for(;e[n]===t.mostPositive;)n+=1;if(e[0]===t.mostNegative)for(;e[n]===t.mostNegative;)n+=1;return e.slice(0,n+1)}function _(e,t){const n=k(e,t);return[n,e.slice(n.length)]}function j(e,t,n){const r=f(e,n);return e+("upper"===t?n.byCode[n.length-1]:n.byCode[0]).repeat(r-e.length)}function I(e,t){return v(e,b(Math.floor(Math.random()*t.jitterRange),t),t)}function T(e,t){const n=t.jitterRange-e,r=Object.entries(t.paddingDict).find((([e,t])=>t>n));return r?parseInt(r[0]):0}function E(e,t,n=c()){if(null!==e&&w(e,n),null!==t&&w(t,n),null===e&&null===t)return function(e){return e.firstPositive+e.byCode[0]}(n);if(null===e){return O(S(t,n),n)}if(null===t){return P(S(e,n),n)}if(e>=t)throw new Error(e+" >= "+t);return function(e,t,n){let[r,o]=p(e,t,"end",n.first),i=h(r,o,n);return 1===i&&(r=r.padEnd(r.length+1,n.first),i=n.length),v(r,b(Math.floor(i/2),n),n)}(e,t,n)}function C(e,t,n,r=c()){return D(e,t,n,r,E,C)}function M(e,t,n=c()){const r=E(e,t,n),o=function(e,t,n){const r=P(S(e,n),n);let o=0;if(null!==t){const r=h(e,t,n);r<n.jitterRange+1&&(o=Math.max(o,T(r,n)))}const i=h(e,r,n);return i<n.jitterRange+1&&(o=Math.max(o,T(i,n))),o}(r,t,n);return o?function(e,t,n){return I(e.padEnd(e.length+t,n.first),n)}(r,o,n):I(r,n)}function A(e,t,n,r=c()){return D(e,t,n,r,M,A)}function D(e,t,n,r,o,i){if(0===n)return[];if(1===n)return[o(e,t,r)];if(null==t){let i=o(e,t,r);const a=[i];for(let e=0;e<n-1;e++)i=o(i,t,r),a.push(i);return a}if(null==e){let i=o(e,t,r);const a=[i];for(let t=0;t<n-1;t++)i=o(e,i,r),a.push(i);return a.reverse(),a}const a=Math.floor(n/2),u=o(e,t,r);return[...i(e,u,a,r),u,...i(u,t,n-a-1,r)]}var R=class{charSet;useJitter;list;useGroups;groupIdLength;constructor(e,t={}){this.charSet=t.charSet??c(),this.useJitter=t.useJitter??!0,this.list=e,this.useGroups=!!t.groupIdLength&&t.groupIdLength>0,this.groupIdLength=t.groupIdLength??0}updateList(e){this.list=[...e].sort()}nKeysStart(e,t){return this.validateGroupId(t),this.generateNKeysBetween(null,this.firstOfGroup(t),e,t)}keyStart(e){return this.validateGroupId(e),this.nKeysStart(1,e)[0]}nKeysEnd(e,t){return this.validateGroupId(t),this.generateNKeysBetween(this.lastOfGroup(t),null,e,t)}keyEnd(e){return this.validateGroupId(e),this.nKeysEnd(1,e)[0]}nKeysAfter(e,t){const n=this.getKeyAfter(e);return this.generateNKeysBetween(e,n,t,this.groupId(e))}keyAfter(e){return this.nKeysAfter(e,1)[0]}nKeysBefore(e,t){const n=this.getKeyBefore(e);return this.generateNKeysBetween(n,e,t,this.groupId(e))}keyBefore(e){return this.nKeysBefore(e,1)[0]}generateNKeysBetween(e,t,n,r){const o=this.groupLessKey(e),i=this.groupLessKey(t),a=this.useJitter?A(o,i,n,this.charSet):C(o,i,n,this.charSet);return r?a.map((e=>r+e)):a}getKeyBefore(e){const t=this.list.indexOf(e);if(-1===t)throw new Error("orderKey is not in the list");const n=this.list[t-1];return n&&this.isSameGroup(e,n)?n:null}getKeyAfter(e){const t=this.list.indexOf(e);if(-1===t)throw new Error("orderKey is not in the list");const n=this.list[t+1];return n&&this.isSameGroup(e,n)?n:null}firstOfGroup(e){if(!this.useGroups)return this.list[0]??null;return this.list.find((t=>this.isPartOfGroup(t,e)))??null}lastOfGroup(e){if(!this.useGroups)return this.list[this.list.length-1]??null;const t=this.list.filter((t=>this.isPartOfGroup(t,e)));return t[t.length-1]??null}validateGroupId(e){if(this.useGroups){if(!e)throw new Error("groupId is required when using groups");if(e.length!==this.groupIdLength)throw new Error("groupId must be the lenght supplied in the options")}else e&&console.warn("groupId should not used when not using groups")}groupId(e){if(this.useGroups)return this.splitIntoGroupIdAndOrderKey(e)[0]}groupLessKey(e){return this.useGroups?this.splitIntoGroupIdAndOrderKey(e)[1]:e}splitIntoGroupIdAndOrderKey(e){if(!this.useGroups||!e)return[void 0,e];return[e.substring(0,this.groupIdLength),e.substring(this.groupIdLength)]}isSameGroup(e,t){if(!this.useGroups)return!0;const[n]=this.splitIntoGroupIdAndOrderKey(e),[r]=this.splitIntoGroupIdAndOrderKey(t);return n===r}isPartOfGroup(e,t){if(!this.useGroups)return!0;const[n]=this.splitIntoGroupIdAndOrderKey(e);return n===t}}},27106:function(e,t,n){"use strict";function r(e,t){this.v=e,this.k=t}n.d(t,{A:function(){return r}})},43145:function(e,t,n){"use strict";function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}n.d(t,{A:function(){return r}})},96369:function(e,t,n){"use strict";function r(e){if(Array.isArray(e))return e}n.d(t,{A:function(){return r}})},9417:function(e,t,n){"use strict";function r(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}n.d(t,{A:function(){return r}})},10467:function(e,t,n){"use strict";function r(e,t,n,r,o,i,a){try{var u=e[i](a),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function o(e){return function(){var t=this,n=arguments;return new Promise((function(o,i){var a=e.apply(t,n);function u(e){r(a,o,i,u,s,"next",e)}function s(e){r(a,o,i,u,s,"throw",e)}u(void 0)}))}}n.r(t),n.d(t,{default:function(){return o}})},39874:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return a}});var r=n(53954),o=n(52176),i=n(56822);function a(e,t,n){return t=(0,r.A)(t),(0,i.A)(e,(0,o.A)()?Reflect.construct(t,n||[],(0,r.A)(e).constructor):t.apply(e,n))}},23029:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n.r(t),n.d(t,{default:function(){return r}})},92901:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return i}});var r=n(20816);function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,(0,r.A)(o.key),o)}}function i(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}},24765:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return o}});var r=n(27800);function o(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=(0,r.A)(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0,i=function(){};return{s:i,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,u=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return u=e.done,e},e:function(e){s=!0,a=e},f:function(){try{u||null==n.return||n.return()}finally{if(s)throw a}}}}},64467:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return o}});var r=n(20816);function o(e,t,n){return(t=(0,r.A)(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},53954:function(e,t,n){"use strict";function r(e){return r=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},r(e)}n.d(t,{A:function(){return r}})},85501:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return o}});var r=n(63662);function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&(0,r.A)(e,t)}},77387:function(e,t,n){"use strict";n.d(t,{A:function(){return o}});var r=n(63662);function o(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,(0,r.A)(e,t)}},52176:function(e,t,n){"use strict";function r(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(r=function(){return!!e})()}n.d(t,{A:function(){return r}})},73893:function(e,t,n){"use strict";function r(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}n.d(t,{A:function(){return r}})},76562:function(e,t,n){"use strict";function r(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}n.d(t,{A:function(){return r}})},89379:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return i}});var r=n(64467);function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){(0,r.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}},80045:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return o}});var r=n(98587);function o(e,t){if(null==e)return{};var n,o,i=(0,r.A)(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)n=a[o],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}},98587:function(e,t,n){"use strict";function r(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}n.d(t,{A:function(){return r}})},56822:function(e,t,n){"use strict";n.d(t,{A:function(){return i}});var r=n(82284),o=n(9417);function i(e,t){if(t&&("object"==(0,r.A)(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return(0,o.A)(e)}},36755:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return d}});var r=n(27106);function o(e,t,n,r){var i=Object.defineProperty;try{i({},"",{})}catch(e){i=0}o=function(e,t,n,r){if(t)i?i(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{var a=function(t,n){o(e,t,(function(e){return this._invoke(t,n,e)}))};a("next",0),a("throw",1),a("return",2)}},o(e,t,n,r)}function i(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",a=n.toStringTag||"@@toStringTag";function u(n,r,i,a){var u=r&&r.prototype instanceof c?r:c,l=Object.create(u.prototype);return o(l,"_invoke",function(n,r,o){var i,a,u,c=0,l=o||[],f=!1,d={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,n){return i=t,a=0,u=e,d.n=n,s}};function p(n,r){for(a=n,u=r,t=0;!f&&c&&!o&&t<l.length;t++){var o,i=l[t],p=d.p,h=i[2];n>3?(o=h===r)&&(u=i[(a=i[4])?5:(a=3,3)],i[4]=i[5]=e):i[0]<=p&&((o=n<2&&p<i[1])?(a=0,d.v=r,d.n=i[1]):p<h&&(o=n<3||i[0]>r||r>h)&&(i[4]=n,i[5]=r,d.n=h,a=0))}if(o||n>1)return s;throw f=!0,r}return function(o,l,h){if(c>1)throw TypeError("Generator is already running");for(f&&1===l&&p(l,h),a=l,u=h;(t=a<2?e:u)||!f;){i||(a?a<3?(a>1&&(d.n=-1),p(a,u)):d.n=u:d.v=u);try{if(c=2,i){if(a||(o="next"),t=i[o]){if(!(t=t.call(i,u)))throw TypeError("iterator result is not an object");if(!t.done)return t;u=t.value,a<2&&(a=0)}else 1===a&&(t=i.return)&&t.call(i),a<2&&(u=TypeError("The iterator does not provide a '"+o+"' method"),a=1);i=e}else if((t=(f=d.n<0)?u:n.call(r,d))!==s)break}catch(t){i=e,a=1,u=t}finally{c=1}}return{value:t,done:f}}}(n,i,a),!0),l}var s={};function c(){}function l(){}function f(){}t=Object.getPrototypeOf;var d=[][r]?t(t([][r]())):(o(t={},r,(function(){return this})),t),p=f.prototype=c.prototype=Object.create(d);function h(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,f):(e.__proto__=f,o(e,a,"GeneratorFunction")),e.prototype=Object.create(p),e}return l.prototype=f,o(p,"constructor",f),o(f,"constructor",l),l.displayName="GeneratorFunction",o(f,a,"GeneratorFunction"),o(p),o(p,a,"Generator"),o(p,r,(function(){return this})),o(p,"toString",(function(){return"[object Generator]"})),(i=function(){return{w:u,m:h}})()}function a(e,t){function n(o,i,a,u){try{var s=e[o](i),c=s.value;return c instanceof r.A?t.resolve(c.v).then((function(e){n("next",e,a,u)}),(function(e){n("throw",e,a,u)})):t.resolve(c).then((function(e){s.value=e,a(s)}),(function(e){return n("throw",e,a,u)}))}catch(e){u(e)}}var i;this.next||(o(a.prototype),o(a.prototype,"function"==typeof Symbol&&Symbol.asyncIterator||"@asyncIterator",(function(){return this}))),o(this,"_invoke",(function(e,r,o){function a(){return new t((function(t,r){n(e,o,t,r)}))}return i=i?i.then(a,a):a()}),!0)}function u(e,t,n,r,o){return new a(i().w(e,t,n,r),o||Promise)}function s(e,t,n,r,o){var i=u(e,t,n,r,o);return i.next().then((function(e){return e.done?e.value:i.next()}))}function c(e){var t=Object(e),n=[];for(var r in t)n.unshift(r);return function e(){for(;n.length;)if((r=n.pop())in t)return e.value=r,e.done=!1,e;return e.done=!0,e}}var l=n(82284);function f(e){if(null!=e){var t=e["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],n=0;if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length))return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}}}throw new TypeError((0,l.A)(e)+" is not iterable")}function d(){var e=i(),t=e.m(d),n=(Object.getPrototypeOf?Object.getPrototypeOf(t):t.__proto__).constructor;function o(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===n||"GeneratorFunction"===(t.displayName||t.name))}var l={throw:1,return:2,break:3,continue:3};function p(e){var t,n;return function(r){t||(t={stop:function(){return n(r.a,2)},catch:function(){return r.v},abrupt:function(e,t){return n(r.a,l[e],t)},delegateYield:function(e,o,i){return t.resultName=o,n(r.d,f(e),i)},finish:function(e){return n(r.f,e)}},n=function(e,n,o){r.p=t.prev,r.n=t.next;try{return e(n,o)}finally{t.next=r.n}}),t.resultName&&(t[t.resultName]=r.v,t.resultName=void 0),t.sent=r.v,t.next=r.n;try{return e.call(this,t)}finally{r.p=t.prev,r.n=t.next}}}return(d=function(){return{wrap:function(t,n,r,o){return e.w(p(t),n,r,o&&o.reverse())},isGeneratorFunction:o,mark:e.m,awrap:function(e,t){return new r.A(e,t)},AsyncIterator:a,async:function(e,t,n,r,i){return(o(t)?u:s)(p(e),t,n,r,i)},keys:c,values:f}})()}},63662:function(e,t,n){"use strict";function r(e,t){return r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},r(e,t)}n.d(t,{A:function(){return r}})},5544:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return a}});var r=n(96369);var o=n(27800),i=n(76562);function a(e,t){return(0,r.A)(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,u=[],s=!0,c=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=i.call(n)).done)&&(u.push(r.value),u.length!==t);s=!0);}catch(e){c=!0,o=e}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw o}}return u}}(e,t)||(0,o.A)(e,t)||(0,i.A)()}},5182:function(e,t,n){"use strict";n.d(t,{A:function(){return i}});var r=n(53954);function o(){return o="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var o=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=(0,r.A)(e)););return e}(e,t);if(o){var i=Object.getOwnPropertyDescriptor(o,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},o.apply(null,arguments)}function i(e,t,n,i){var a=o((0,r.A)(1&i?e.prototype:e),t,n);return 2&i&&"function"==typeof a?function(e){return a.apply(n,e)}:a}},87695:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return u}});var r=n(96369),o=n(73893),i=n(27800),a=n(76562);function u(e){return(0,r.A)(e)||(0,o.A)(e)||(0,i.A)(e)||(0,a.A)()}},60436:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return a}});var r=n(43145);var o=n(73893),i=n(27800);function a(e){return function(e){if(Array.isArray(e))return(0,r.A)(e)}(e)||(0,o.A)(e)||(0,i.A)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},20816:function(e,t,n){"use strict";n.d(t,{A:function(){return o}});var r=n(82284);function o(e){var t=function(e,t){if("object"!=(0,r.A)(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!=(0,r.A)(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==(0,r.A)(t)?t:t+""}},82284:function(e,t,n){"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}n.d(t,{A:function(){return r}})},27800:function(e,t,n){"use strict";n.d(t,{A:function(){return o}});var r=n(43145);function o(e,t){if(e){if("string"==typeof e)return(0,r.A)(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?(0,r.A)(e,t):void 0}}},32910:function(e,t,n){"use strict";n.d(t,{UE:function(){return Pe},RK:function(){return me},ll:function(){return ve},rD:function(){return _e},__:function(){return ge},UU:function(){return we},jD:function(){return xe},mG:function(){return Oe},ER:function(){return ke},cY:function(){return ye},iD:function(){return pe},BN:function(){return be},Ej:function(){return Se}});var r=n(5544),o=n(89379),i=n(36755),a=n(10467),u=n(60436),s=["top","right","bottom","left"],c=["start","end"],l=s.reduce((function(e,t){return e.concat(t,t+"-"+c[0],t+"-"+c[1])}),[]),f=Math.min,d=Math.max,p=Math.round,h=Math.floor,v=function(e){return{x:e,y:e}},g={left:"right",right:"left",bottom:"top",top:"bottom"},y={start:"end",end:"start"};function m(e,t,n){return d(e,f(t,n))}function b(e,t){return"function"===typeof e?e(t):e}function w(e){return e.split("-")[0]}function S(e){return e.split("-")[1]}function x(e){return"x"===e?"y":"x"}function P(e){return"y"===e?"height":"width"}function O(e){return["top","bottom"].includes(w(e))?"y":"x"}function k(e){return x(O(e))}function _(e,t,n){void 0===n&&(n=!1);var r=S(e),o=k(e),i=P(o),a="x"===o?r===(n?"end":"start")?"right":"left":"start"===r?"bottom":"top";return t.reference[i]>t.floating[i]&&(a=E(a)),[a,E(a)]}function j(e){var t=E(e);return[I(e),t,I(t)]}function I(e){return e.replace(/start|end/g,(function(e){return y[e]}))}function T(e,t,n,r){var o=S(e),i=function(e,t,n){var r=["left","right"],o=["right","left"];switch(e){case"top":case"bottom":return n?t?o:r:t?r:o;case"left":case"right":return t?["top","bottom"]:["bottom","top"];default:return[]}}(w(e),"start"===n,r);return o&&(i=i.map((function(e){return e+"-"+o})),t&&(i=i.concat(i.map(I)))),i}function E(e){return e.replace(/left|right|bottom|top/g,(function(e){return g[e]}))}function C(e){return"number"!==typeof e?function(e){return(0,o.default)({top:0,right:0,bottom:0,left:0},e)}(e):{top:e,right:e,bottom:e,left:e}}function M(e){var t=e.x,n=e.y,r=e.width,o=e.height;return{width:r,height:o,top:n,left:t,right:t+r,bottom:n+o,x:t,y:n}}var A=n(80045),D=n(64467),R=["crossAxis","alignment","allowedPlacements","autoAlignment"],N=["mainAxis","crossAxis","fallbackPlacements","fallbackStrategy","fallbackAxisSideDirection","flipAlignment"],L=["strategy"],U=["mainAxis","crossAxis","limiter"],F=["apply"];function B(e,t,n){var r,o=e.reference,i=e.floating,a=O(t),u=k(t),s=P(u),c=w(t),l="y"===a,f=o.x+o.width/2-i.width/2,d=o.y+o.height/2-i.height/2,p=o[s]/2-i[s]/2;switch(c){case"top":r={x:f,y:o.y-i.height};break;case"bottom":r={x:f,y:o.y+o.height};break;case"right":r={x:o.x+o.width,y:d};break;case"left":r={x:o.x-i.width,y:d};break;default:r={x:o.x,y:o.y}}switch(S(t)){case"start":r[u]-=p*(n&&l?-1:1);break;case"end":r[u]+=p*(n&&l?-1:1)}return r}var V=function(){var e=(0,a.default)((0,i.default)().mark((function e(t,n,r){var a,u,s,c,l,f,d,p,h,v,g,y,m,b,w,S,x,P,O,k,_,j,I,T,E,C;return(0,i.default)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.placement,u=void 0===a?"bottom":a,s=r.strategy,c=void 0===s?"absolute":s,l=r.middleware,f=void 0===l?[]:l,d=r.platform,p=f.filter(Boolean),e.next=4,null==d.isRTL?void 0:d.isRTL(n);case 4:return h=e.sent,e.next=7,d.getElementRects({reference:t,floating:n,strategy:c});case 7:v=e.sent,g=B(v,u,h),y=g.x,m=g.y,b=u,w={},S=0,x=0;case 13:if(!(x<p.length)){e.next=45;break}return P=p[x],O=P.name,k=P.fn,e.next=17,k({x:y,y:m,initialPlacement:u,placement:b,strategy:c,middlewareData:w,rects:v,platform:d,elements:{reference:t,floating:n}});case 17:if(_=e.sent,j=_.x,I=_.y,T=_.data,E=_.reset,y=null!=j?j:y,m=null!=I?I:m,w=(0,o.default)((0,o.default)({},w),{},(0,D.default)({},O,(0,o.default)((0,o.default)({},w[O]),T))),!(E&&S<=50)){e.next=42;break}if(S++,"object"!==typeof E){e.next=41;break}if(E.placement&&(b=E.placement),!E.rects){e.next=38;break}if(!0!==E.rects){e.next=36;break}return e.next=33,d.getElementRects({reference:t,floating:n,strategy:c});case 33:e.t0=e.sent,e.next=37;break;case 36:e.t0=E.rects;case 37:v=e.t0;case 38:C=B(v,b,h),y=C.x,m=C.y;case 41:x=-1;case 42:x++,e.next=13;break;case 45:return e.abrupt("return",{x:y,y:m,placement:b,strategy:c,middlewareData:w});case 46:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}();function z(e,t){return H.apply(this,arguments)}function H(){return H=(0,a.default)((0,i.default)().mark((function e(t,n){var r,o,a,u,s,c,l,f,d,p,h,v,g,y,m,w,S,x,P,O,k,_,j,I,T;return(0,i.default)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===n&&(n={}),o=t.x,a=t.y,u=t.platform,s=t.rects,c=t.elements,l=t.strategy,f=b(n,t),d=f.boundary,p=void 0===d?"clippingAncestors":d,h=f.rootBoundary,v=void 0===h?"viewport":h,g=f.elementContext,y=void 0===g?"floating":g,m=f.altBoundary,w=void 0!==m&&m,S=f.padding,x=C(void 0===S?0:S),P="floating"===y?"reference":"floating",O=c[w?P:y],e.t0=M,e.t1=u,e.next=10,null==u.isElement?void 0:u.isElement(O);case 10:if(e.t2=r=e.sent,null==e.t2){e.next=15;break}e.t3=r,e.next=16;break;case 15:e.t3=!0;case 16:if(!e.t3){e.next=20;break}e.t4=O,e.next=26;break;case 20:if(e.t5=O.contextElement,e.t5){e.next=25;break}return e.next=24,null==u.getDocumentElement?void 0:u.getDocumentElement(c.floating);case 24:e.t5=e.sent;case 25:e.t4=e.t5;case 26:return e.t6=e.t4,e.t7=p,e.t8=v,e.t9=l,e.t10={element:e.t6,boundary:e.t7,rootBoundary:e.t8,strategy:e.t9},e.next=33,e.t1.getClippingRect.call(e.t1,e.t10);case 33:return e.t11=e.sent,k=(0,e.t0)(e.t11),_="floating"===y?{x:o,y:a,width:s.floating.width,height:s.floating.height}:s.reference,e.next=38,null==u.getOffsetParent?void 0:u.getOffsetParent(c.floating);case 38:return j=e.sent,e.next=41,null==u.isElement?void 0:u.isElement(j);case 41:if(!e.sent){e.next=50;break}return e.next=44,null==u.getScale?void 0:u.getScale(j);case 44:if(e.t13=e.sent,e.t13){e.next=47;break}e.t13={x:1,y:1};case 47:e.t12=e.t13,e.next=51;break;case 50:e.t12={x:1,y:1};case 51:if(I=e.t12,e.t14=M,!u.convertOffsetParentRelativeRectToViewportRelativeRect){e.next=59;break}return e.next=56,u.convertOffsetParentRelativeRectToViewportRelativeRect({elements:c,rect:_,offsetParent:j,strategy:l});case 56:e.t15=e.sent,e.next=60;break;case 59:e.t15=_;case 60:return e.t16=e.t15,T=(0,e.t14)(e.t16),e.abrupt("return",{top:(k.top-T.top+x.top)/I.y,bottom:(T.bottom-k.bottom+x.bottom)/I.y,left:(k.left-T.left+x.left)/I.x,right:(T.right-k.right+x.right)/I.x});case 63:case"end":return e.stop()}}),e)}))),H.apply(this,arguments)}function K(e,t,n){return(e?[].concat((0,u.default)(n.filter((function(t){return S(t)===e}))),(0,u.default)(n.filter((function(t){return S(t)!==e})))):n.filter((function(e){return w(e)===e}))).filter((function(n){return!e||(S(n)===e||!!t&&I(n)!==n)}))}function G(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function q(e){return s.some((function(t){return e[t]>=0}))}function W(e){var t=f.apply(void 0,(0,u.default)(e.map((function(e){return e.left})))),n=f.apply(void 0,(0,u.default)(e.map((function(e){return e.top}))));return{x:t,y:n,width:d.apply(void 0,(0,u.default)(e.map((function(e){return e.right}))))-t,height:d.apply(void 0,(0,u.default)(e.map((function(e){return e.bottom}))))-n}}function Y(e){for(var t=e.slice().sort((function(e,t){return e.y-t.y})),n=[],r=null,o=0;o<t.length;o++){var i=t[o];!r||i.y-r.y>r.height/2?n.push([i]):n[n.length-1].push(i),r=i}return n.map((function(e){return M(W(e))}))}function X(e,t){return Z.apply(this,arguments)}function Z(){return Z=(0,a.default)((0,i.default)().mark((function e(t,n){var r,o,a,u,s,c,l,f,d,p,h,v,g,y;return(0,i.default)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.placement,o=t.platform,a=t.elements,e.next=3,null==o.isRTL?void 0:o.isRTL(a.floating);case 3:return u=e.sent,s=w(r),c=S(r),l="y"===O(r),f=["left","top"].includes(s)?-1:1,d=u&&l?-1:1,p=b(n,t),h="number"===typeof p?{mainAxis:p,crossAxis:0,alignmentAxis:null}:{mainAxis:p.mainAxis||0,crossAxis:p.crossAxis||0,alignmentAxis:p.alignmentAxis},v=h.mainAxis,g=h.crossAxis,y=h.alignmentAxis,c&&"number"===typeof y&&(g="end"===c?-1*y:y),e.abrupt("return",l?{x:g*d,y:v*f}:{x:v*f,y:g*d});case 13:case"end":return e.stop()}}),e)}))),Z.apply(this,arguments)}var $=n(97339);function Q(e){var t=(0,$.L9)(e),n=parseFloat(t.width)||0,r=parseFloat(t.height)||0,o=(0,$.sb)(e),i=o?e.offsetWidth:n,a=o?e.offsetHeight:r,u=p(n)!==i||p(r)!==a;return u&&(n=i,r=a),{width:n,height:r,$:u}}function J(e){return(0,$.vq)(e)?e:e.contextElement}function ee(e){var t=J(e);if(!(0,$.sb)(t))return v(1);var n=t.getBoundingClientRect(),r=Q(t),o=r.width,i=r.height,a=r.$,u=(a?p(n.width):n.width)/o,s=(a?p(n.height):n.height)/i;return u&&Number.isFinite(u)||(u=1),s&&Number.isFinite(s)||(s=1),{x:u,y:s}}var te=v(0);function ne(e){var t=(0,$.zk)(e);return(0,$.Tc)()&&t.visualViewport?{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}:te}function re(e,t,n,r){void 0===t&&(t=!1),void 0===n&&(n=!1);var o=e.getBoundingClientRect(),i=J(e),a=v(1);t&&(r?(0,$.vq)(r)&&(a=ee(r)):a=ee(e));var u=function(e,t,n){return void 0===t&&(t=!1),!(!n||t&&n!==(0,$.zk)(e))&&t}(i,n,r)?ne(i):v(0),s=(o.left+u.x)/a.x,c=(o.top+u.y)/a.y,l=o.width/a.x,f=o.height/a.y;if(i)for(var d=(0,$.zk)(i),p=r&&(0,$.vq)(r)?(0,$.zk)(r):r,h=d,g=(0,$._m)(h);g&&r&&p!==h;){var y=ee(g),m=g.getBoundingClientRect(),b=(0,$.L9)(g),w=m.left+(g.clientLeft+parseFloat(b.paddingLeft))*y.x,S=m.top+(g.clientTop+parseFloat(b.paddingTop))*y.y;s*=y.x,c*=y.y,l*=y.x,f*=y.y,s+=w,c+=S,h=(0,$.zk)(g),g=(0,$._m)(h)}return M({width:l,height:f,x:s,y:c})}function oe(e,t){var n=(0,$.CP)(e).scrollLeft;return t?t.left+n:re((0,$.ep)(e)).left+n}function ie(e,t,n){void 0===n&&(n=!1);var r=e.getBoundingClientRect();return{x:r.left+t.scrollLeft-(n?0:oe(e,r)),y:r.top+t.scrollTop}}function ae(e,t,n){var r;if("viewport"===t)r=function(e,t){var n=(0,$.zk)(e),r=(0,$.ep)(e),o=n.visualViewport,i=r.clientWidth,a=r.clientHeight,u=0,s=0;if(o){i=o.width,a=o.height;var c=(0,$.Tc)();(!c||c&&"fixed"===t)&&(u=o.offsetLeft,s=o.offsetTop)}return{width:i,height:a,x:u,y:s}}(e,n);else if("document"===t)r=function(e){var t=(0,$.ep)(e),n=(0,$.CP)(e),r=e.ownerDocument.body,o=d(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),i=d(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight),a=-n.scrollLeft+oe(e),u=-n.scrollTop;return"rtl"===(0,$.L9)(r).direction&&(a+=d(t.clientWidth,r.clientWidth)-o),{width:o,height:i,x:a,y:u}}((0,$.ep)(e));else if((0,$.vq)(t))r=function(e,t){var n=re(e,!0,"fixed"===t),r=n.top+e.clientTop,o=n.left+e.clientLeft,i=(0,$.sb)(e)?ee(e):v(1);return{width:e.clientWidth*i.x,height:e.clientHeight*i.y,x:o*i.x,y:r*i.y}}(t,n);else{var o=ne(e);r={x:t.x-o.x,y:t.y-o.y,width:t.width,height:t.height}}return M(r)}function ue(e,t){var n=(0,$.$4)(e);return!(n===t||!(0,$.vq)(n)||(0,$.eu)(n))&&("fixed"===(0,$.L9)(n).position||ue(n,t))}function se(e,t,n){var r=(0,$.sb)(t),o=(0,$.ep)(t),i="fixed"===n,a=re(e,!0,i,t),u={scrollLeft:0,scrollTop:0},s=v(0);if(r||!r&&!i)if(("body"!==(0,$.mq)(t)||(0,$.ZU)(o))&&(u=(0,$.CP)(t)),r){var c=re(t,!0,i,t);s.x=c.x+t.clientLeft,s.y=c.y+t.clientTop}else o&&(s.x=oe(o));var l=!o||r||i?v(0):ie(o,u);return{x:a.left+u.scrollLeft-s.x-l.x,y:a.top+u.scrollTop-s.y-l.y,width:a.width,height:a.height}}function ce(e){return"static"===(0,$.L9)(e).position}function le(e,t){if(!(0,$.sb)(e)||"fixed"===(0,$.L9)(e).position)return null;if(t)return t(e);var n=e.offsetParent;return(0,$.ep)(e)===n&&(n=n.ownerDocument.body),n}function fe(e,t){var n=(0,$.zk)(e);if((0,$.Tf)(e))return n;if(!(0,$.sb)(e)){for(var r=(0,$.$4)(e);r&&!(0,$.eu)(r);){if((0,$.vq)(r)&&!ce(r))return r;r=(0,$.$4)(r)}return n}for(var o=le(e,t);o&&(0,$.Lv)(o)&&ce(o);)o=le(o,t);return o&&(0,$.eu)(o)&&ce(o)&&!(0,$.sQ)(o)?n:o||(0,$.gJ)(e)||n}var de=function(){var e=(0,a.default)((0,i.default)().mark((function e(t){var n,r,o;return(0,i.default)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.getOffsetParent||fe,r=this.getDimensions,e.next=4,r(t.floating);case 4:return o=e.sent,e.t0=se,e.t1=t.reference,e.next=9,n(t.floating);case 9:return e.t2=e.sent,e.t3=t.strategy,e.t4=(0,e.t0)(e.t1,e.t2,e.t3),e.t5={x:0,y:0,width:o.width,height:o.height},e.abrupt("return",{reference:e.t4,floating:e.t5});case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}();var pe={convertOffsetParentRelativeRectToViewportRelativeRect:function(e){var t=e.elements,n=e.rect,r=e.offsetParent,o="fixed"===e.strategy,i=(0,$.ep)(r),a=!!t&&(0,$.Tf)(t.floating);if(r===i||a&&o)return n;var u={scrollLeft:0,scrollTop:0},s=v(1),c=v(0),l=(0,$.sb)(r);if((l||!l&&!o)&&(("body"!==(0,$.mq)(r)||(0,$.ZU)(i))&&(u=(0,$.CP)(r)),(0,$.sb)(r))){var f=re(r);s=ee(r),c.x=f.x+r.clientLeft,c.y=f.y+r.clientTop}var d=!i||l||o?v(0):ie(i,u,!0);return{width:n.width*s.x,height:n.height*s.y,x:n.x*s.x-u.scrollLeft*s.x+c.x+d.x,y:n.y*s.y-u.scrollTop*s.y+c.y+d.y}},getDocumentElement:$.ep,getClippingRect:function(e){var t=e.element,n=e.boundary,r=e.rootBoundary,o=e.strategy,i="clippingAncestors"===n?(0,$.Tf)(t)?[]:function(e,t){var n=t.get(e);if(n)return n;for(var r=(0,$.v9)(e,[],!1).filter((function(e){return(0,$.vq)(e)&&"body"!==(0,$.mq)(e)})),o=null,i="fixed"===(0,$.L9)(e).position,a=i?(0,$.$4)(e):e;(0,$.vq)(a)&&!(0,$.eu)(a);){var u=(0,$.L9)(a),s=(0,$.sQ)(a);s||"fixed"!==u.position||(o=null),(i?!s&&!o:!s&&"static"===u.position&&o&&["absolute","fixed"].includes(o.position)||(0,$.ZU)(a)&&!s&&ue(e,a))?r=r.filter((function(e){return e!==a})):o=u,a=(0,$.$4)(a)}return t.set(e,r),r}(t,this._c):[].concat(n),a=[].concat((0,u.default)(i),[r]),s=a[0],c=a.reduce((function(e,n){var r=ae(t,n,o);return e.top=d(r.top,e.top),e.right=f(r.right,e.right),e.bottom=f(r.bottom,e.bottom),e.left=d(r.left,e.left),e}),ae(t,s,o));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}},getOffsetParent:fe,getElementRects:de,getClientRects:function(e){return Array.from(e.getClientRects())},getDimensions:function(e){var t=Q(e);return{width:t.width,height:t.height}},getScale:ee,isElement:$.vq,isRTL:function(e){return"rtl"===(0,$.L9)(e).direction}};function he(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function ve(e,t,n,i){void 0===i&&(i={});var a=i,s=a.ancestorScroll,c=void 0===s||s,l=a.ancestorResize,p=void 0===l||l,v=a.elementResize,g=void 0===v?"function"===typeof ResizeObserver:v,y=a.layoutShift,m=void 0===y?"function"===typeof IntersectionObserver:y,b=a.animationFrame,w=void 0!==b&&b,S=J(e),x=c||p?[].concat((0,u.default)(S?(0,$.v9)(S):[]),(0,u.default)((0,$.v9)(t))):[];x.forEach((function(e){c&&e.addEventListener("scroll",n,{passive:!0}),p&&e.addEventListener("resize",n)}));var P,O=S&&m?function(e,t){var n,r=null,i=(0,$.ep)(e);function a(){var e;clearTimeout(n),null==(e=r)||e.disconnect(),r=null}return function u(s,c){void 0===s&&(s=!1),void 0===c&&(c=1),a();var l=e.getBoundingClientRect(),p=l.left,v=l.top,g=l.width,y=l.height;if(s||t(),g&&y){var m={rootMargin:-h(v)+"px "+-h(i.clientWidth-(p+g))+"px "+-h(i.clientHeight-(v+y))+"px "+-h(p)+"px",threshold:d(0,f(1,c))||1},b=!0;try{r=new IntersectionObserver(w,(0,o.default)((0,o.default)({},m),{},{root:i.ownerDocument}))}catch(S){r=new IntersectionObserver(w,m)}r.observe(e)}function w(t){var r=t[0].intersectionRatio;if(r!==c){if(!b)return u();r?u(!1,r):n=setTimeout((function(){u(!1,1e-7)}),1e3)}1!==r||he(l,e.getBoundingClientRect())||u(),b=!1}}(!0),a}(S,n):null,k=-1,_=null;g&&(_=new ResizeObserver((function(e){var o=(0,r.default)(e,1)[0];o&&o.target===S&&_&&(_.unobserve(t),cancelAnimationFrame(k),k=requestAnimationFrame((function(){var e;null==(e=_)||e.observe(t)}))),n()})),S&&!w&&_.observe(S),_.observe(t));var j=w?re(e):null;return w&&function t(){var r=re(e);j&&!he(j,r)&&n();j=r,P=requestAnimationFrame(t)}(),n(),function(){var e;x.forEach((function(e){c&&e.removeEventListener("scroll",n),p&&e.removeEventListener("resize",n)})),null==O||O(),null==(e=_)||e.disconnect(),_=null,w&&cancelAnimationFrame(P)}}var ge=z,ye=function(e){return void 0===e&&(e=0),{name:"offset",options:e,fn:function(t){return(0,a.default)((0,i.default)().mark((function n(){var r,a,u,s,c,l,f;return(0,i.default)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return u=t.x,s=t.y,c=t.placement,l=t.middlewareData,n.next=3,X(t,e);case 3:if(f=n.sent,c!==(null==(r=l.offset)?void 0:r.placement)||null==(a=l.arrow)||!a.alignmentOffset){n.next=6;break}return n.abrupt("return",{});case 6:return n.abrupt("return",{x:u+f.x,y:s+f.y,data:(0,o.default)((0,o.default)({},f),{},{placement:c})});case 7:case"end":return n.stop()}}),n)})))()}}},me=function(e){return void 0===e&&(e={}),{name:"autoPlacement",options:e,fn:function(t){return(0,a.default)((0,i.default)().mark((function n(){var r,o,a,s,c,f,d,p,h,v,g,y,m,x,P,O,k,j,I,T,E,C,M,D,N,L,U,F;return(0,i.default)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return s=t.rects,c=t.middlewareData,f=t.placement,d=t.platform,p=t.elements,h=b(e,t),v=h.crossAxis,g=void 0!==v&&v,y=h.alignment,m=h.allowedPlacements,x=void 0===m?l:m,P=h.autoAlignment,O=void 0===P||P,k=(0,A.default)(h,R),j=void 0!==y||x===l?K(y||null,O,x):x,n.next=5,z(t,k);case 5:if(I=n.sent,T=(null==(r=c.autoPlacement)?void 0:r.index)||0,null!=(E=j[T])){n.next=10;break}return n.abrupt("return",{});case 10:return n.t0=_,n.t1=E,n.t2=s,n.next=15,null==d.isRTL?void 0:d.isRTL(p.floating);case 15:if(n.t3=n.sent,C=(0,n.t0)(n.t1,n.t2,n.t3),f===E){n.next=19;break}return n.abrupt("return",{reset:{placement:j[0]}});case 19:if(M=[I[w(E)],I[C[0]],I[C[1]]],D=[].concat((0,u.default)((null==(o=c.autoPlacement)?void 0:o.overflows)||[]),[{placement:E,overflows:M}]),!(N=j[T+1])){n.next=24;break}return n.abrupt("return",{data:{index:T+1,overflows:D},reset:{placement:N}});case 24:if(L=D.map((function(e){var t=S(e.placement);return[e.placement,t&&g?e.overflows.slice(0,2).reduce((function(e,t){return e+t}),0):e.overflows[0],e.overflows]})).sort((function(e,t){return e[1]-t[1]})),U=L.filter((function(e){return e[2].slice(0,S(e[0])?2:3).every((function(e){return e<=0}))})),(F=(null==(a=U[0])?void 0:a[0])||L[0][0])===f){n.next=29;break}return n.abrupt("return",{data:{index:T+1,overflows:D},reset:{placement:F}});case 29:return n.abrupt("return",{});case 30:case"end":return n.stop()}}),n)})))()}}},be=function(e){return void 0===e&&(e={}),{name:"shift",options:e,fn:function(t){return(0,a.default)((0,i.default)().mark((function n(){var r,a,u,s,c,l,f,d,p,h,v,g,y,S,P,k,_,j,I,T,E,C,M,R;return(0,i.default)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=t.x,a=t.y,u=t.placement,s=b(e,t),c=s.mainAxis,l=void 0===c||c,f=s.crossAxis,d=void 0!==f&&f,p=s.limiter,h=void 0===p?{fn:function(e){return{x:e.x,y:e.y}}}:p,v=(0,A.default)(s,U),g={x:r,y:a},n.next=5,z(t,v);case 5:return y=n.sent,S=O(w(u)),P=x(S),k=g[P],_=g[S],l&&(j="y"===P?"bottom":"right",I=k+y["y"===P?"top":"left"],T=k-y[j],k=m(I,k,T)),d&&(E="y"===S?"bottom":"right",C=_+y["y"===S?"top":"left"],M=_-y[E],_=m(C,_,M)),R=h.fn((0,o.default)((0,o.default)({},t),{},(0,D.default)((0,D.default)({},P,k),S,_))),n.abrupt("return",(0,o.default)((0,o.default)({},R),{},{data:{x:R.x-r,y:R.y-a,enabled:(0,D.default)((0,D.default)({},P,l),S,d)}}));case 14:case"end":return n.stop()}}),n)})))()}}},we=function(e){return void 0===e&&(e={}),{name:"flip",options:e,fn:function(t){return(0,a.default)((0,i.default)().mark((function n(){var r,o,a,s,c,l,f,d,p,h,v,g,y,m,S,x,P,k,I,C,M,D,R,L,U,F,B,V,H,K,G,q,W,Y,X,Z,$,Q,J;return(0,i.default)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(a=t.placement,s=t.middlewareData,c=t.rects,l=t.initialPlacement,f=t.platform,d=t.elements,p=b(e,t),h=p.mainAxis,v=void 0===h||h,g=p.crossAxis,y=void 0===g||g,m=p.fallbackPlacements,S=p.fallbackStrategy,x=void 0===S?"bestFit":S,P=p.fallbackAxisSideDirection,k=void 0===P?"none":P,I=p.flipAlignment,C=void 0===I||I,M=(0,A.default)(p,N),null==(r=s.arrow)||!r.alignmentOffset){n.next=4;break}return n.abrupt("return",{});case 4:return D=w(a),R=O(l),L=w(l)===l,n.next=9,null==f.isRTL?void 0:f.isRTL(d.floating);case 9:return U=n.sent,F=m||(L||!C?[E(l)]:j(l)),B="none"!==k,!m&&B&&F.push.apply(F,(0,u.default)(T(l,C,k,U))),V=[l].concat((0,u.default)(F)),n.next=16,z(t,M);case 16:if(H=n.sent,K=[],G=(null==(o=s.flip)?void 0:o.overflows)||[],v&&K.push(H[D]),y&&(q=_(a,c,U),K.push(H[q[0]],H[q[1]])),G=[].concat((0,u.default)(G),[{placement:a,overflows:K}]),K.every((function(e){return e<=0}))){n.next=39;break}if(X=((null==(W=s.flip)?void 0:W.index)||0)+1,!(Z=V[X])){n.next=27;break}return n.abrupt("return",{data:{index:X,overflows:G},reset:{placement:Z}});case 27:if($=null==(Y=G.filter((function(e){return e.overflows[0]<=0})).sort((function(e,t){return e.overflows[1]-t.overflows[1]}))[0])?void 0:Y.placement){n.next=37;break}n.t0=x,n.next="bestFit"===n.t0?32:"initialPlacement"===n.t0?35:37;break;case 32:return J=null==(Q=G.filter((function(e){if(B){var t=O(e.placement);return t===R||"y"===t}return!0})).map((function(e){return[e.placement,e.overflows.filter((function(e){return e>0})).reduce((function(e,t){return e+t}),0)]})).sort((function(e,t){return e[1]-t[1]}))[0])?void 0:Q[0],J&&($=J),n.abrupt("break",37);case 35:return $=l,n.abrupt("break",37);case 37:if(a===$){n.next=39;break}return n.abrupt("return",{reset:{placement:$}});case 39:return n.abrupt("return",{});case 40:case"end":return n.stop()}}),n)})))()}}},Se=function(e){return void 0===e&&(e={}),{name:"size",options:e,fn:function(t){return(0,a.default)((0,i.default)().mark((function n(){var r,a,u,s,c,l,p,h,v,g,y,m,x,P,k,_,j,I,T,E,C,M,D,R,N,L,U,B,V,H,K;return(0,i.default)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return u=t.placement,s=t.rects,c=t.platform,l=t.elements,p=b(e,t),h=p.apply,v=void 0===h?function(){}:h,g=(0,A.default)(p,F),n.next=4,z(t,g);case 4:if(y=n.sent,m=w(u),x=S(u),P="y"===O(u),k=s.floating,_=k.width,j=k.height,"top"!==m&&"bottom"!==m){n.next=28;break}return I=m,n.t0=x,n.next=14,null==c.isRTL?void 0:c.isRTL(l.floating);case 14:if(!n.sent){n.next=18;break}n.t1="start",n.next=19;break;case 18:n.t1="end";case 19:if(n.t2=n.t1,n.t0!==n.t2){n.next=24;break}n.t3="left",n.next=25;break;case 24:n.t3="right";case 25:T=n.t3,n.next=30;break;case 28:T=m,I="end"===x?"top":"bottom";case 30:return E=j-y.top-y.bottom,C=_-y.left-y.right,M=f(j-y[I],E),D=f(_-y[T],C),R=!t.middlewareData.shift,N=M,L=D,null!=(r=t.middlewareData.shift)&&r.enabled.x&&(L=C),null!=(a=t.middlewareData.shift)&&a.enabled.y&&(N=E),R&&!x&&(U=d(y.left,0),B=d(y.right,0),V=d(y.top,0),H=d(y.bottom,0),P?L=_-2*(0!==U||0!==B?U+B:d(y.left,y.right)):N=j-2*(0!==V||0!==H?V+H:d(y.top,y.bottom))),n.next=42,v((0,o.default)((0,o.default)({},t),{},{availableWidth:L,availableHeight:N}));case 42:return n.next=44,c.getDimensions(l.floating);case 44:if(K=n.sent,_===K.width&&j===K.height){n.next=47;break}return n.abrupt("return",{reset:{rects:!0}});case 47:return n.abrupt("return",{});case 48:case"end":return n.stop()}}),n)})))()}}},xe=function(e){return void 0===e&&(e={}),{name:"hide",options:e,fn:function(t){return(0,a.default)((0,i.default)().mark((function n(){var r,a,u,s,c,l,f,d,p;return(0,i.default)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:r=t.rects,a=b(e,t),u=a.strategy,s=void 0===u?"referenceHidden":u,c=(0,A.default)(a,L),n.t0=s,n.next="referenceHidden"===n.t0?5:"escaped"===n.t0?10:15;break;case 5:return n.next=7,z(t,(0,o.default)((0,o.default)({},c),{},{elementContext:"reference"}));case 7:return l=n.sent,f=G(l,r.reference),n.abrupt("return",{data:{referenceHiddenOffsets:f,referenceHidden:q(f)}});case 10:return n.next=12,z(t,(0,o.default)((0,o.default)({},c),{},{altBoundary:!0}));case 12:return d=n.sent,p=G(d,r.floating),n.abrupt("return",{data:{escapedOffsets:p,escaped:q(p)}});case 15:return n.abrupt("return",{});case 16:case"end":return n.stop()}}),n)})))()}}},Pe=function(e){return{name:"arrow",options:e,fn:function(t){return(0,a.default)((0,i.default)().mark((function n(){var r,a,u,s,c,l,d,p,h,v,g,y,w,x,O,_,j,I,T,E,M,A,R,N,L,U,F,B,V,z,H,K,G,q;return(0,i.default)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r=t.x,a=t.y,u=t.placement,s=t.rects,c=t.platform,l=t.elements,d=t.middlewareData,p=b(e,t)||{},h=p.element,v=p.padding,g=void 0===v?0:v,null!=h){n.next=4;break}return n.abrupt("return",{});case 4:return y=C(g),w={x:r,y:a},x=k(u),O=P(x),n.next=10,c.getDimensions(h);case 10:return _=n.sent,I=(j="y"===x)?"top":"left",T=j?"bottom":"right",E=j?"clientHeight":"clientWidth",M=s.reference[O]+s.reference[x]-w[x]-s.floating[O],A=w[x]-s.reference[x],n.next=19,null==c.getOffsetParent?void 0:c.getOffsetParent(h);case 19:if(R=n.sent,N=R?R[E]:0,n.t0=!N,n.t0){n.next=26;break}return n.next=25,null==c.isElement?void 0:c.isElement(R);case 25:n.t0=!n.sent;case 26:if(!n.t0){n.next=28;break}N=l.floating[E]||s.floating[O];case 28:return L=M/2-A/2,U=N/2-_[O]/2-1,F=f(y[I],U),B=f(y[T],U),V=F,z=N-_[O]-B,H=N/2-_[O]/2+L,K=m(V,H,z),G=!d.arrow&&null!=S(u)&&H!==K&&s.reference[O]/2-(H<V?F:B)-_[O]/2<0,q=G?H<V?H-V:H-z:0,n.abrupt("return",(0,D.default)((0,D.default)((0,D.default)({},x,w[x]+q),"data",(0,o.default)((0,D.default)((0,D.default)({},x,K),"centerOffset",H-K-q),G&&{alignmentOffset:q})),"reset",G));case 39:case"end":return n.stop()}}),n)})))()}}},Oe=function(e){return void 0===e&&(e={}),{name:"inline",options:e,fn:function(t){return(0,a.default)((0,i.default)().mark((function n(){var r,o,a,s,c,l,p,h,v,g,y,m,S,x,P,k;return(0,i.default)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return P=function(){if(2===m.length&&m[0].left>m[1].right&&null!=v&&null!=g)return m.find((function(e){return v>e.left-x.left&&v<e.right+x.right&&g>e.top-x.top&&g<e.bottom+x.bottom}))||S;if(m.length>=2){if("y"===O(r)){var e=m[0],t=m[m.length-1],n="top"===w(r),o=e.top,i=t.bottom,a=n?e.left:t.left,s=n?e.right:t.right;return{top:o,bottom:i,left:a,right:s,width:s-a,height:i-o,x:a,y:o}}var c="left"===w(r),l=d.apply(void 0,(0,u.default)(m.map((function(e){return e.right})))),p=f.apply(void 0,(0,u.default)(m.map((function(e){return e.left})))),h=m.filter((function(e){return c?e.left===p:e.right===l})),y=h[0].top,b=h[h.length-1].bottom;return{top:y,bottom:b,left:p,right:l,width:l-p,height:b-y,x:p,y:y}}return S},r=t.placement,o=t.elements,a=t.rects,s=t.platform,c=t.strategy,l=b(e,t),p=l.padding,h=void 0===p?2:p,v=l.x,g=l.y,n.t0=Array,n.next=6,null==s.getClientRects?void 0:s.getClientRects(o.reference);case 6:if(n.t1=n.sent,n.t1){n.next=9;break}n.t1=[];case 9:return n.t2=n.t1,y=n.t0.from.call(n.t0,n.t2),m=Y(y),S=M(W(y)),x=C(h),n.next=16,s.getElementRects({reference:{getBoundingClientRect:P},floating:o.floating,strategy:c});case 16:if(k=n.sent,a.reference.x===k.reference.x&&a.reference.y===k.reference.y&&a.reference.width===k.reference.width&&a.reference.height===k.reference.height){n.next=19;break}return n.abrupt("return",{reset:{rects:k}});case 19:return n.abrupt("return",{});case 20:case"end":return n.stop()}}),n)})))()}}},ke=function(e){return void 0===e&&(e={}),{options:e,fn:function(t){var n=t.x,r=t.y,i=t.placement,a=t.rects,u=t.middlewareData,s=b(e,t),c=s.offset,l=void 0===c?0:c,f=s.mainAxis,d=void 0===f||f,p=s.crossAxis,h=void 0===p||p,v={x:n,y:r},g=O(i),y=x(g),m=v[y],S=v[g],P=b(l,t),k="number"===typeof P?{mainAxis:P,crossAxis:0}:(0,o.default)({mainAxis:0,crossAxis:0},P);if(d){var _="y"===y?"height":"width",j=a.reference[y]-a.floating[_]+k.mainAxis,I=a.reference[y]+a.reference[_]-k.mainAxis;m<j?m=j:m>I&&(m=I)}if(h){var T,E,C="y"===y?"width":"height",M=["top","left"].includes(w(i)),A=a.reference[g]-a.floating[C]+(M&&(null==(T=u.offset)?void 0:T[g])||0)+(M?0:k.crossAxis),R=a.reference[g]+a.reference[C]+(M?0:(null==(E=u.offset)?void 0:E[g])||0)-(M?k.crossAxis:0);S<A?S=A:S>R&&(S=R)}return(0,D.default)((0,D.default)({},y,m),g,S)}}},_e=function(e,t,n){var r=new Map,i=(0,o.default)({platform:pe},n),a=(0,o.default)((0,o.default)({},i.platform),{},{_c:r});return V(e,t,(0,o.default)((0,o.default)({},i),{},{platform:a}))}},97339:function(e,t,n){"use strict";function r(){return"undefined"!==typeof window}function o(e){return u(e)?(e.nodeName||"").toLowerCase():"#document"}function i(e){var t;return(null==e||null==(t=e.ownerDocument)?void 0:t.defaultView)||window}function a(e){var t;return null==(t=(u(e)?e.ownerDocument:e.document)||window.document)?void 0:t.documentElement}function u(e){return!!r()&&(e instanceof Node||e instanceof i(e).Node)}function s(e){return!!r()&&(e instanceof Element||e instanceof i(e).Element)}function c(e){return!!r()&&(e instanceof HTMLElement||e instanceof i(e).HTMLElement)}function l(e){return!(!r()||"undefined"===typeof ShadowRoot)&&(e instanceof ShadowRoot||e instanceof i(e).ShadowRoot)}function f(e){var t=m(e),n=t.overflow,r=t.overflowX,o=t.overflowY,i=t.display;return/auto|scroll|overlay|hidden|clip/.test(n+o+r)&&!["inline","contents"].includes(i)}function d(e){return["table","td","th"].includes(o(e))}function p(e){return[":popover-open",":modal"].some((function(t){try{return e.matches(t)}catch(n){return!1}}))}function h(e){var t=g(),n=s(e)?m(e):e;return["transform","translate","scale","rotate","perspective"].some((function(e){return!!n[e]&&"none"!==n[e]}))||!!n.containerType&&"normal"!==n.containerType||!t&&!!n.backdropFilter&&"none"!==n.backdropFilter||!t&&!!n.filter&&"none"!==n.filter||["transform","translate","scale","rotate","perspective","filter"].some((function(e){return(n.willChange||"").includes(e)}))||["paint","layout","strict","content"].some((function(e){return(n.contain||"").includes(e)}))}function v(e){for(var t=w(e);c(t)&&!y(t);){if(h(t))return t;if(p(t))return null;t=w(t)}return null}function g(){return!("undefined"===typeof CSS||!CSS.supports)&&CSS.supports("-webkit-backdrop-filter","none")}function y(e){return["html","body","#document"].includes(o(e))}function m(e){return i(e).getComputedStyle(e)}function b(e){return s(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function w(e){if("html"===o(e))return e;var t=e.assignedSlot||e.parentNode||l(e)&&e.host||a(e);return l(t)?t.host:t}function S(e){var t=w(e);return y(t)?e.ownerDocument?e.ownerDocument.body:e.body:c(t)&&f(t)?t:S(t)}function x(e,t,n){var r;void 0===t&&(t=[]),void 0===n&&(n=!0);var o=S(e),a=o===(null==(r=e.ownerDocument)?void 0:r.body),u=i(o);if(a){var s=P(u);return t.concat(u,u.visualViewport||[],f(o)?o:[],s&&n?x(s):[])}return t.concat(o,x(o,[],n))}function P(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}n.d(t,{$4:function(){return w},CP:function(){return b},L9:function(){return m},Lv:function(){return d},Tc:function(){return g},Tf:function(){return p},ZU:function(){return f},_m:function(){return P},ep:function(){return a},eu:function(){return y},gJ:function(){return v},mq:function(){return o},sQ:function(){return h},sb:function(){return c},v9:function(){return x},vq:function(){return s},zk:function(){return i}})},90287:function(e,t,n){"use strict";n.d(t,{A:function(){return Bt}});var r={};n.r(r),n.d(r,{hasBrowserEnv:function(){return ge},hasStandardBrowserEnv:function(){return me},hasStandardBrowserWebWorkerEnv:function(){return be},navigator:function(){return ye},origin:function(){return we}});var o=n(5544);function i(e,t){return function(){return e.apply(t,arguments)}}var a,u=n(85224),s=Object.prototype.toString,c=Object.getPrototypeOf,l=(a=Object.create(null),function(e){var t=s.call(e);return a[t]||(a[t]=t.slice(8,-1).toLowerCase())}),f=function(e){return e=e.toLowerCase(),function(t){return l(t)===e}},d=function(e){return function(t){return typeof t===e}},p=Array.isArray,h=d("undefined");var v=f("ArrayBuffer");var g=d("string"),y=d("function"),m=d("number"),b=function(e){return null!==e&&"object"===typeof e},w=function(e){if("object"!==l(e))return!1;var t=c(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},S=f("Date"),x=f("File"),P=f("Blob"),O=f("FileList"),k=f("URLSearchParams"),_=["ReadableStream","Request","Response","Headers"].map(f),j=(0,o.default)(_,4),I=j[0],T=j[1],E=j[2],C=j[3];function M(e,t){var n,r,o=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).allOwnKeys,i=void 0!==o&&o;if(null!==e&&"undefined"!==typeof e)if("object"!==typeof e&&(e=[e]),p(e))for(n=0,r=e.length;n<r;n++)t.call(null,e[n],n,e);else{var a,u=i?Object.getOwnPropertyNames(e):Object.keys(e),s=u.length;for(n=0;n<s;n++)a=u[n],t.call(null,e[a],a,e)}}function A(e,t){t=t.toLowerCase();for(var n,r=Object.keys(e),o=r.length;o-- >0;)if(t===(n=r[o]).toLowerCase())return n;return null}var D="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:"undefined"!==typeof window?window:global,R=function(e){return!h(e)&&e!==D};var N,L=(N="undefined"!==typeof Uint8Array&&c(Uint8Array),function(e){return N&&e instanceof N}),U=f("HTMLFormElement"),F=function(){var e=Object.prototype.hasOwnProperty;return function(t,n){return e.call(t,n)}}(),B=f("RegExp"),V=function(e,t){var n=Object.getOwnPropertyDescriptors(e),r={};M(n,(function(n,o){var i;!1!==(i=t(n,o,e))&&(r[o]=i||n)})),Object.defineProperties(e,r)};var z=f("AsyncFunction"),H=function(e,t){return e?setImmediate:t?(n="axios@".concat(Math.random()),r=[],D.addEventListener("message",(function(e){var t=e.source,o=e.data;t===D&&o===n&&r.length&&r.shift()()}),!1),function(e){r.push(e),D.postMessage(n,"*")}):function(e){return setTimeout(e)};var n,r}("function"===typeof setImmediate,y(D.postMessage)),K="undefined"!==typeof queueMicrotask?queueMicrotask.bind(D):"undefined"!==typeof u&&u.nextTick||H,G={isArray:p,isArrayBuffer:v,isBuffer:function(e){return null!==e&&!h(e)&&null!==e.constructor&&!h(e.constructor)&&y(e.constructor.isBuffer)&&e.constructor.isBuffer(e)},isFormData:function(e){var t;return e&&("function"===typeof FormData&&e instanceof FormData||y(e.append)&&("formdata"===(t=l(e))||"object"===t&&y(e.toString)&&"[object FormData]"===e.toString()))},isArrayBufferView:function(e){return"undefined"!==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&v(e.buffer)},isString:g,isNumber:m,isBoolean:function(e){return!0===e||!1===e},isObject:b,isPlainObject:w,isReadableStream:I,isRequest:T,isResponse:E,isHeaders:C,isUndefined:h,isDate:S,isFile:x,isBlob:P,isRegExp:B,isFunction:y,isStream:function(e){return b(e)&&y(e.pipe)},isURLSearchParams:k,isTypedArray:L,isFileList:O,forEach:M,merge:function e(){for(var t=(R(this)&&this||{}).caseless,n={},r=function(r,o){var i=t&&A(n,o)||o;w(n[i])&&w(r)?n[i]=e(n[i],r):w(r)?n[i]=e({},r):p(r)?n[i]=r.slice():n[i]=r},o=0,i=arguments.length;o<i;o++)arguments[o]&&M(arguments[o],r);return n},extend:function(e,t,n){return M(t,(function(t,r){n&&y(t)?e[r]=i(t,n):e[r]=t}),{allOwnKeys:(arguments.length>3&&void 0!==arguments[3]?arguments[3]:{}).allOwnKeys}),e},trim:function(e){return e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")},stripBOM:function(e){return 65279===e.charCodeAt(0)&&(e=e.slice(1)),e},inherits:function(e,t,n,r){e.prototype=Object.create(t.prototype,r),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},toFlatObject:function(e,t,n,r){var o,i,a,u={};if(t=t||{},null==e)return t;do{for(i=(o=Object.getOwnPropertyNames(e)).length;i-- >0;)a=o[i],r&&!r(a,e,t)||u[a]||(t[a]=e[a],u[a]=!0);e=!1!==n&&c(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},kindOf:l,kindOfTest:f,endsWith:function(e,t,n){e=String(e),(void 0===n||n>e.length)&&(n=e.length),n-=t.length;var r=e.indexOf(t,n);return-1!==r&&r===n},toArray:function(e){if(!e)return null;if(p(e))return e;var t=e.length;if(!m(t))return null;for(var n=new Array(t);t-- >0;)n[t]=e[t];return n},forEachEntry:function(e,t){for(var n,r=(e&&e[Symbol.iterator]).call(e);(n=r.next())&&!n.done;){var o=n.value;t.call(e,o[0],o[1])}},matchAll:function(e,t){for(var n,r=[];null!==(n=e.exec(t));)r.push(n);return r},isHTMLForm:U,hasOwnProperty:F,hasOwnProp:F,reduceDescriptors:V,freezeMethods:function(e){V(e,(function(t,n){if(y(e)&&-1!==["arguments","caller","callee"].indexOf(n))return!1;var r=e[n];y(r)&&(t.enumerable=!1,"writable"in t?t.writable=!1:t.set||(t.set=function(){throw Error("Can not rewrite read-only method '"+n+"'")}))}))},toObjectSet:function(e,t){var n={},r=function(e){e.forEach((function(e){n[e]=!0}))};return p(e)?r(e):r(String(e).split(t)),n},toCamelCase:function(e){return e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,(function(e,t,n){return t.toUpperCase()+n}))},noop:function(){},toFiniteNumber:function(e,t){return null!=e&&Number.isFinite(e=+e)?e:t},findKey:A,global:D,isContextDefined:R,isSpecCompliantForm:function(e){return!!(e&&y(e.append)&&"FormData"===e[Symbol.toStringTag]&&e[Symbol.iterator])},toJSONObject:function(e){var t=new Array(10),n=function(e,r){if(b(e)){if(t.indexOf(e)>=0)return;if(!("toJSON"in e)){t[r]=e;var o=p(e)?[]:{};return M(e,(function(e,t){var i=n(e,r+1);!h(i)&&(o[t]=i)})),t[r]=void 0,o}}return e};return n(e,0)},isAsyncFn:z,isThenable:function(e){return e&&(b(e)||y(e))&&y(e.then)&&y(e.catch)},setImmediate:H,asap:K},q=n(36755),W=n(10467),Y=n(23029),X=n(92901);function Z(e,t,n,r,o){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),r&&(this.request=r),o&&(this.response=o,this.status=o.status?o.status:null)}G.inherits(Z,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:G.toJSONObject(this.config),code:this.code,status:this.status}}});var $=Z.prototype,Q={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach((function(e){Q[e]={value:e}})),Object.defineProperties(Z,Q),Object.defineProperty($,"isAxiosError",{value:!0}),Z.from=function(e,t,n,r,o,i){var a=Object.create($);return G.toFlatObject(e,a,(function(e){return e!==Error.prototype}),(function(e){return"isAxiosError"!==e})),Z.call(a,e.message,t,n,r,o),a.cause=e,a.name=e.name,i&&Object.assign(a,i),a};var J=Z,ee=n(93325).hp;function te(e){return G.isPlainObject(e)||G.isArray(e)}function ne(e){return G.endsWith(e,"[]")?e.slice(0,-2):e}function re(e,t,n){return e?e.concat(t).map((function(e,t){return e=ne(e),!n&&t?"["+e+"]":e})).join(n?".":""):t}var oe=G.toFlatObject(G,{},null,(function(e){return/^is[A-Z]/.test(e)}));var ie=function(e,t,n){if(!G.isObject(e))throw new TypeError("target must be an object");t=t||new FormData;var r=(n=G.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,(function(e,t){return!G.isUndefined(t[e])}))).metaTokens,o=n.visitor||c,i=n.dots,a=n.indexes,u=(n.Blob||"undefined"!==typeof Blob&&Blob)&&G.isSpecCompliantForm(t);if(!G.isFunction(o))throw new TypeError("visitor must be a function");function s(e){if(null===e)return"";if(G.isDate(e))return e.toISOString();if(!u&&G.isBlob(e))throw new J("Blob is not supported. Use a Buffer instead.");return G.isArrayBuffer(e)||G.isTypedArray(e)?u&&"function"===typeof Blob?new Blob([e]):ee.from(e):e}function c(e,n,o){var u=e;if(e&&!o&&"object"===typeof e)if(G.endsWith(n,"{}"))n=r?n:n.slice(0,-2),e=JSON.stringify(e);else if(G.isArray(e)&&function(e){return G.isArray(e)&&!e.some(te)}(e)||(G.isFileList(e)||G.endsWith(n,"[]"))&&(u=G.toArray(e)))return n=ne(n),u.forEach((function(e,r){!G.isUndefined(e)&&null!==e&&t.append(!0===a?re([n],r,i):null===a?n:n+"[]",s(e))})),!1;return!!te(e)||(t.append(re(o,n,i),s(e)),!1)}var l=[],f=Object.assign(oe,{defaultVisitor:c,convertValue:s,isVisitable:te});if(!G.isObject(e))throw new TypeError("data must be an object");return function e(n,r){if(!G.isUndefined(n)){if(-1!==l.indexOf(n))throw Error("Circular reference detected in "+r.join("."));l.push(n),G.forEach(n,(function(n,i){!0===(!(G.isUndefined(n)||null===n)&&o.call(t,n,G.isString(i)?i.trim():i,r,f))&&e(n,r?r.concat(i):[i])})),l.pop()}}(e),t};function ae(e){var t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,(function(e){return t[e]}))}function ue(e,t){this._pairs=[],e&&ie(e,this,t)}var se=ue.prototype;se.append=function(e,t){this._pairs.push([e,t])},se.toString=function(e){var t=e?function(t){return e.call(this,t,ae)}:ae;return this._pairs.map((function(e){return t(e[0])+"="+t(e[1])}),"").join("&")};var ce=ue;function le(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function fe(e,t,n){if(!t)return e;var r=n&&n.encode||le;G.isFunction(n)&&(n={serialize:n});var o,i=n&&n.serialize;if(o=i?i(t,n):G.isURLSearchParams(t)?t.toString():new ce(t,n).toString(r)){var a=e.indexOf("#");-1!==a&&(e=e.slice(0,a)),e+=(-1===e.indexOf("?")?"?":"&")+o}return e}var de=function(){return(0,X.default)((function e(){(0,Y.default)(this,e),this.handlers=[]}),[{key:"use",value:function(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1}},{key:"eject",value:function(e){this.handlers[e]&&(this.handlers[e]=null)}},{key:"clear",value:function(){this.handlers&&(this.handlers=[])}},{key:"forEach",value:function(e){G.forEach(this.handlers,(function(t){null!==t&&e(t)}))}}])}(),pe={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},he=n(89379),ve={isBrowser:!0,classes:{URLSearchParams:"undefined"!==typeof URLSearchParams?URLSearchParams:ce,FormData:"undefined"!==typeof FormData?FormData:null,Blob:"undefined"!==typeof Blob?Blob:null},protocols:["http","https","file","blob","url","data"]},ge="undefined"!==typeof window&&"undefined"!==typeof document,ye="object"===typeof navigator&&navigator||void 0,me=ge&&(!ye||["ReactNative","NativeScript","NS"].indexOf(ye.product)<0),be="undefined"!==typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"===typeof self.importScripts,we=ge&&window.location.href||"http://localhost",Se=(0,he.default)((0,he.default)({},r),ve);var xe=function(e){function t(e,n,r,o){var i=e[o++];if("__proto__"===i)return!0;var a=Number.isFinite(+i),u=o>=e.length;return i=!i&&G.isArray(r)?r.length:i,u?(G.hasOwnProp(r,i)?r[i]=[r[i],n]:r[i]=n,!a):(r[i]&&G.isObject(r[i])||(r[i]=[]),t(e,n,r[i],o)&&G.isArray(r[i])&&(r[i]=function(e){var t,n,r={},o=Object.keys(e),i=o.length;for(t=0;t<i;t++)r[n=o[t]]=e[n];return r}(r[i])),!a)}if(G.isFormData(e)&&G.isFunction(e.entries)){var n={};return G.forEachEntry(e,(function(e,r){t(function(e){return G.matchAll(/\w+|\[(\w*)]/g,e).map((function(e){return"[]"===e[0]?"":e[1]||e[0]}))}(e),r,n,0)})),n}return null};var Pe={transitional:pe,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){var n,r=t.getContentType()||"",o=r.indexOf("application/json")>-1,i=G.isObject(e);if(i&&G.isHTMLForm(e)&&(e=new FormData(e)),G.isFormData(e))return o?JSON.stringify(xe(e)):e;if(G.isArrayBuffer(e)||G.isBuffer(e)||G.isStream(e)||G.isFile(e)||G.isBlob(e)||G.isReadableStream(e))return e;if(G.isArrayBufferView(e))return e.buffer;if(G.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();if(i){if(r.indexOf("application/x-www-form-urlencoded")>-1)return function(e,t){return ie(e,new Se.classes.URLSearchParams,Object.assign({visitor:function(e,t,n,r){return Se.isNode&&G.isBuffer(e)?(this.append(t,e.toString("base64")),!1):r.defaultVisitor.apply(this,arguments)}},t))}(e,this.formSerializer).toString();if((n=G.isFileList(e))||r.indexOf("multipart/form-data")>-1){var a=this.env&&this.env.FormData;return ie(n?{"files[]":e}:e,a&&new a,this.formSerializer)}}return i||o?(t.setContentType("application/json",!1),function(e,t,n){if(G.isString(e))try{return(t||JSON.parse)(e),G.trim(e)}catch(r){if("SyntaxError"!==r.name)throw r}return(n||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){var t=this.transitional||Pe.transitional,n=t&&t.forcedJSONParsing,r="json"===this.responseType;if(G.isResponse(e)||G.isReadableStream(e))return e;if(e&&G.isString(e)&&(n&&!this.responseType||r)){var o=!(t&&t.silentJSONParsing)&&r;try{return JSON.parse(e)}catch(i){if(o){if("SyntaxError"===i.name)throw J.from(i,J.ERR_BAD_RESPONSE,this,null,this.response);throw i}}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Se.classes.FormData,Blob:Se.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};G.forEach(["delete","get","head","post","put","patch"],(function(e){Pe.headers[e]={}}));var Oe=Pe,ke=n(24765),_e=G.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),je=Symbol("internals");function Ie(e){return e&&String(e).trim().toLowerCase()}function Te(e){return!1===e||null==e?e:G.isArray(e)?e.map(Te):String(e)}function Ee(e,t,n,r,o){return G.isFunction(r)?r.call(this,t,n):(o&&(t=n),G.isString(t)?G.isString(r)?-1!==t.indexOf(r):G.isRegExp(r)?r.test(t):void 0:void 0)}var Ce=function(){return(0,X.default)((function e(t){(0,Y.default)(this,e),t&&this.set(t)}),[{key:"set",value:function(e,t,n){var r=this;function i(e,t,n){var o=Ie(t);if(!o)throw new Error("header name must be a non-empty string");var i=G.findKey(r,o);(!i||void 0===r[i]||!0===n||void 0===n&&!1!==r[i])&&(r[i||t]=Te(e))}var a=function(e,t){return G.forEach(e,(function(e,n){return i(e,n,t)}))};if(G.isPlainObject(e)||e instanceof this.constructor)a(e,t);else if(G.isString(e)&&(e=e.trim())&&!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim()))a(function(e){var t,n,r,o={};return e&&e.split("\n").forEach((function(e){r=e.indexOf(":"),t=e.substring(0,r).trim().toLowerCase(),n=e.substring(r+1).trim(),!t||o[t]&&_e[t]||("set-cookie"===t?o[t]?o[t].push(n):o[t]=[n]:o[t]=o[t]?o[t]+", "+n:n)})),o}(e),t);else if(G.isHeaders(e)){var u,s=(0,ke.default)(e.entries());try{for(s.s();!(u=s.n()).done;){var c=(0,o.default)(u.value,2),l=c[0];i(c[1],l,n)}}catch(f){s.e(f)}finally{s.f()}}else null!=e&&i(t,e,n);return this}},{key:"get",value:function(e,t){if(e=Ie(e)){var n=G.findKey(this,e);if(n){var r=this[n];if(!t)return r;if(!0===t)return function(e){for(var t,n=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;t=r.exec(e);)n[t[1]]=t[2];return n}(r);if(G.isFunction(t))return t.call(this,r,n);if(G.isRegExp(t))return t.exec(r);throw new TypeError("parser must be boolean|regexp|function")}}}},{key:"has",value:function(e,t){if(e=Ie(e)){var n=G.findKey(this,e);return!(!n||void 0===this[n]||t&&!Ee(0,this[n],n,t))}return!1}},{key:"delete",value:function(e,t){var n=this,r=!1;function o(e){if(e=Ie(e)){var o=G.findKey(n,e);!o||t&&!Ee(0,n[o],o,t)||(delete n[o],r=!0)}}return G.isArray(e)?e.forEach(o):o(e),r}},{key:"clear",value:function(e){for(var t=Object.keys(this),n=t.length,r=!1;n--;){var o=t[n];e&&!Ee(0,this[o],o,e,!0)||(delete this[o],r=!0)}return r}},{key:"normalize",value:function(e){var t=this,n={};return G.forEach(this,(function(r,o){var i=G.findKey(n,o);if(i)return t[i]=Te(r),void delete t[o];var a=e?function(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(function(e,t,n){return t.toUpperCase()+n}))}(o):String(o).trim();a!==o&&delete t[o],t[a]=Te(r),n[a]=!0})),this}},{key:"concat",value:function(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=this.constructor).concat.apply(e,[this].concat(n))}},{key:"toJSON",value:function(e){var t=Object.create(null);return G.forEach(this,(function(n,r){null!=n&&!1!==n&&(t[r]=e&&G.isArray(n)?n.join(", "):n)})),t}},{key:Symbol.iterator,value:function(){return Object.entries(this.toJSON())[Symbol.iterator]()}},{key:"toString",value:function(){return Object.entries(this.toJSON()).map((function(e){var t=(0,o.default)(e,2);return t[0]+": "+t[1]})).join("\n")}},{key:Symbol.toStringTag,get:function(){return"AxiosHeaders"}}],[{key:"from",value:function(e){return e instanceof this?e:new this(e)}},{key:"concat",value:function(e){for(var t=new this(e),n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return r.forEach((function(e){return t.set(e)})),t}},{key:"accessor",value:function(e){var t=(this[je]=this[je]={accessors:{}}).accessors,n=this.prototype;function r(e){var r=Ie(e);t[r]||(!function(e,t){var n=G.toCamelCase(" "+t);["get","set","has"].forEach((function(r){Object.defineProperty(e,r+n,{value:function(e,n,o){return this[r].call(this,t,e,n,o)},configurable:!0})}))}(n,e),t[r]=!0)}return G.isArray(e)?e.forEach(r):r(e),this}}])}();Ce.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),G.reduceDescriptors(Ce.prototype,(function(e,t){var n=e.value,r=t[0].toUpperCase()+t.slice(1);return{get:function(){return n},set:function(e){this[r]=e}}})),G.freezeMethods(Ce);var Me=Ce;function Ae(e,t){var n=this||Oe,r=t||n,o=Me.from(r.headers),i=r.data;return G.forEach(e,(function(e){i=e.call(n,i,o.normalize(),t?t.status:void 0)})),o.normalize(),i}function De(e){return!(!e||!e.__CANCEL__)}function Re(e,t,n){J.call(this,null==e?"canceled":e,J.ERR_CANCELED,t,n),this.name="CanceledError"}G.inherits(Re,J,{__CANCEL__:!0});var Ne=Re;function Le(e,t,n){var r=n.config.validateStatus;n.status&&r&&!r(n.status)?t(new J("Request failed with status code "+n.status,[J.ERR_BAD_REQUEST,J.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n)):e(n)}var Ue=n(64467);var Fe=function(e,t){e=e||10;var n,r=new Array(e),o=new Array(e),i=0,a=0;return t=void 0!==t?t:1e3,function(u){var s=Date.now(),c=o[a];n||(n=s),r[i]=u,o[i]=s;for(var l=a,f=0;l!==i;)f+=r[l++],l%=e;if((i=(i+1)%e)===a&&(a=(a+1)%e),!(s-n<t)){var d=c&&s-c;return d?Math.round(1e3*f/d):void 0}}};var Be=function(e,t){var n,r,o=0,i=1e3/t,a=function(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Date.now();o=i,n=null,r&&(clearTimeout(r),r=null),e.apply(null,t)};return[function(){for(var e=Date.now(),t=e-o,u=arguments.length,s=new Array(u),c=0;c<u;c++)s[c]=arguments[c];t>=i?a(s,e):(n=s,r||(r=setTimeout((function(){r=null,a(n)}),i-t)))},function(){return n&&a(n)}]},Ve=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3,r=0,o=Fe(50,250);return Be((function(n){var i=n.loaded,a=n.lengthComputable?n.total:void 0,u=i-r,s=o(u),c=i<=a;r=i;var l=(0,Ue.default)({loaded:i,total:a,progress:a?i/a:void 0,bytes:u,rate:s||void 0,estimated:s&&a&&c?(a-i)/s:void 0,event:n,lengthComputable:null!=a},t?"download":"upload",!0);e(l)}),n)},ze=function(e,t){var n=null!=e;return[function(r){return t[0]({lengthComputable:n,total:e,loaded:r})},t[1]]},He=function(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return G.asap((function(){return e.apply(void 0,n)}))}},Ke=n(60436),Ge=n(87695),qe=Se.hasStandardBrowserEnv?function(e,t){return function(n){return n=new URL(n,Se.origin),e.protocol===n.protocol&&e.host===n.host&&(t||e.port===n.port)}}(new URL(Se.origin),Se.navigator&&/(msie|trident)/i.test(Se.navigator.userAgent)):function(){return!0},We=Se.hasStandardBrowserEnv?{write:function(e,t,n,r,o,i){var a=[e+"="+encodeURIComponent(t)];G.isNumber(n)&&a.push("expires="+new Date(n).toGMTString()),G.isString(r)&&a.push("path="+r),G.isString(o)&&a.push("domain="+o),!0===i&&a.push("secure"),document.cookie=a.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}};function Ye(e,t,n){var r=!/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t);return e&&r||0==n?function(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}(e,t):t}var Xe=function(e){return e instanceof Me?(0,he.default)({},e):e};function Ze(e,t){t=t||{};var n={};function r(e,t,n,r){return G.isPlainObject(e)&&G.isPlainObject(t)?G.merge.call({caseless:r},e,t):G.isPlainObject(t)?G.merge({},t):G.isArray(t)?t.slice():t}function o(e,t,n,o){return G.isUndefined(t)?G.isUndefined(e)?void 0:r(void 0,e,0,o):r(e,t,0,o)}function i(e,t){if(!G.isUndefined(t))return r(void 0,t)}function a(e,t){return G.isUndefined(t)?G.isUndefined(e)?void 0:r(void 0,e):r(void 0,t)}function u(n,o,i){return i in t?r(n,o):i in e?r(void 0,n):void 0}var s={url:i,method:i,data:i,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,withXSRFToken:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:u,headers:function(e,t,n){return o(Xe(e),Xe(t),0,!0)}};return G.forEach(Object.keys(Object.assign({},e,t)),(function(r){var i=s[r]||o,a=i(e[r],t[r],r);G.isUndefined(a)&&i!==u||(n[r]=a)})),n}var $e=function(e){var t,n=Ze({},e),r=n.data,o=n.withXSRFToken,i=n.xsrfHeaderName,a=n.xsrfCookieName,u=n.headers,s=n.auth;if(n.headers=u=Me.from(u),n.url=fe(Ye(n.baseURL,n.url),e.params,e.paramsSerializer),s&&u.set("Authorization","Basic "+btoa((s.username||"")+":"+(s.password?unescape(encodeURIComponent(s.password)):""))),G.isFormData(r))if(Se.hasStandardBrowserEnv||Se.hasStandardBrowserWebWorkerEnv)u.setContentType(void 0);else if(!1!==(t=u.getContentType())){var c=t?t.split(";").map((function(e){return e.trim()})).filter(Boolean):[],l=(0,Ge.default)(c),f=l[0],d=l.slice(1);u.setContentType([f||"multipart/form-data"].concat((0,Ke.default)(d)).join("; "))}if(Se.hasStandardBrowserEnv&&(o&&G.isFunction(o)&&(o=o(n)),o||!1!==o&&qe(n.url))){var p=i&&a&&We.read(a);p&&u.set(i,p)}return n},Qe="undefined"!==typeof XMLHttpRequest&&function(e){return new Promise((function(t,n){var r,i,a,u,s,c=$e(e),l=c.data,f=Me.from(c.headers).normalize(),d=c.responseType,p=c.onUploadProgress,h=c.onDownloadProgress;function v(){u&&u(),s&&s(),c.cancelToken&&c.cancelToken.unsubscribe(r),c.signal&&c.signal.removeEventListener("abort",r)}var g=new XMLHttpRequest;function y(){if(g){var r=Me.from("getAllResponseHeaders"in g&&g.getAllResponseHeaders());Le((function(e){t(e),v()}),(function(e){n(e),v()}),{data:d&&"text"!==d&&"json"!==d?g.response:g.responseText,status:g.status,statusText:g.statusText,headers:r,config:e,request:g}),g=null}}if(g.open(c.method.toUpperCase(),c.url,!0),g.timeout=c.timeout,"onloadend"in g?g.onloadend=y:g.onreadystatechange=function(){g&&4===g.readyState&&(0!==g.status||g.responseURL&&0===g.responseURL.indexOf("file:"))&&setTimeout(y)},g.onabort=function(){g&&(n(new J("Request aborted",J.ECONNABORTED,e,g)),g=null)},g.onerror=function(){n(new J("Network Error",J.ERR_NETWORK,e,g)),g=null},g.ontimeout=function(){var t=c.timeout?"timeout of "+c.timeout+"ms exceeded":"timeout exceeded",r=c.transitional||pe;c.timeoutErrorMessage&&(t=c.timeoutErrorMessage),n(new J(t,r.clarifyTimeoutError?J.ETIMEDOUT:J.ECONNABORTED,e,g)),g=null},void 0===l&&f.setContentType(null),"setRequestHeader"in g&&G.forEach(f.toJSON(),(function(e,t){g.setRequestHeader(t,e)})),G.isUndefined(c.withCredentials)||(g.withCredentials=!!c.withCredentials),d&&"json"!==d&&(g.responseType=c.responseType),h){var m=Ve(h,!0),b=(0,o.default)(m,2);a=b[0],s=b[1],g.addEventListener("progress",a)}if(p&&g.upload){var w=Ve(p),S=(0,o.default)(w,2);i=S[0],u=S[1],g.upload.addEventListener("progress",i),g.upload.addEventListener("loadend",u)}(c.cancelToken||c.signal)&&(r=function(t){g&&(n(!t||t.type?new Ne(null,e,g):t),g.abort(),g=null)},c.cancelToken&&c.cancelToken.subscribe(r),c.signal&&(c.signal.aborted?r():c.signal.addEventListener("abort",r)));var x=function(e){var t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}(c.url);x&&-1===Se.protocols.indexOf(x)?n(new J("Unsupported protocol "+x+":",J.ERR_BAD_REQUEST,e)):g.send(l||null)}))},Je=function(e,t){var n=(e=e?e.filter(Boolean):[]).length;if(t||n){var r,o=new AbortController,i=function(e){if(!r){r=!0,u();var t=e instanceof Error?e:this.reason;o.abort(t instanceof J?t:new Ne(t instanceof Error?t.message:t))}},a=t&&setTimeout((function(){a=null,i(new J("timeout ".concat(t," of ms exceeded"),J.ETIMEDOUT))}),t),u=function(){e&&(a&&clearTimeout(a),a=null,e.forEach((function(e){e.unsubscribe?e.unsubscribe(i):e.removeEventListener("abort",i)})),e=null)};e.forEach((function(e){return e.addEventListener("abort",i)}));var s=o.signal;return s.unsubscribe=function(){return G.asap(u)},s}},et=n(27106);function tt(e){return function(){return new nt(e.apply(this,arguments))}}function nt(e){var t,n;function r(t,n){try{var i=e[t](n),a=i.value,u=a instanceof et.A;Promise.resolve(u?a.v:a).then((function(n){if(u){var s="return"===t?"return":"next";if(!a.k||n.done)return r(s,n);n=e[s](n).value}o(i.done?"return":"normal",n)}),(function(e){r("throw",e)}))}catch(e){o("throw",e)}}function o(e,o){switch(e){case"return":t.resolve({value:o,done:!0});break;case"throw":t.reject(o);break;default:t.resolve({value:o,done:!1})}(t=t.next)?r(t.key,t.arg):n=null}this._invoke=function(e,o){return new Promise((function(i,a){var u={key:e,arg:o,resolve:i,reject:a,next:null};n?n=n.next=u:(t=n=u,r(e,o))}))},"function"!=typeof e.return&&(this.return=void 0)}function rt(e){return new et.A(e,0)}function ot(e){var t={},n=!1;function r(t,r){return n=!0,r=new Promise((function(n){n(e[t](r))})),{done:!1,value:new et.A(r,1)}}return t["undefined"!=typeof Symbol&&Symbol.iterator||"@@iterator"]=function(){return this},t.next=function(e){return n?(n=!1,e):r("next",e)},"function"==typeof e.throw&&(t.throw=function(e){if(n)throw n=!1,e;return r("throw",e)}),"function"==typeof e.return&&(t.return=function(e){return n?(n=!1,e):r("return",e)}),t}function it(e){var t,n,r,o=2;for("undefined"!=typeof Symbol&&(n=Symbol.asyncIterator,r=Symbol.iterator);o--;){if(n&&null!=(t=e[n]))return t.call(e);if(r&&null!=(t=e[r]))return new at(t.call(e));n="@@asyncIterator",r="@@iterator"}throw new TypeError("Object is not async iterable")}function at(e){function t(e){if(Object(e)!==e)return Promise.reject(new TypeError(e+" is not an object."));var t=e.done;return Promise.resolve(e.value).then((function(e){return{value:e,done:t}}))}return at=function(e){this.s=e,this.n=e.next},at.prototype={s:null,n:null,next:function(){return t(this.n.apply(this.s,arguments))},return:function(e){var n=this.s.return;return void 0===n?Promise.resolve({value:e,done:!0}):t(n.apply(this.s,arguments))},throw:function(e){var n=this.s.return;return void 0===n?Promise.reject(e):t(n.apply(this.s,arguments))}},new at(e)}nt.prototype["function"==typeof Symbol&&Symbol.asyncIterator||"@@asyncIterator"]=function(){return this},nt.prototype.next=function(e){return this._invoke("next",e)},nt.prototype.throw=function(e){return this._invoke("throw",e)},nt.prototype.return=function(e){return this._invoke("return",e)};var ut,st,ct=(0,q.default)().mark((function e(t,n){var r,o,i;return(0,q.default)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.byteLength,n&&!(r<n)){e.next=5;break}return e.next=4,t;case 4:return e.abrupt("return");case 5:o=0;case 6:if(!(o<r)){e.next=13;break}return i=o+n,e.next=10,t.slice(o,i);case 10:o=i,e.next=6;break;case 13:case"end":return e.stop()}}),e)})),lt=function(){var e=tt((0,q.default)().mark((function e(t,n){var r,o,i,a,u,s;return(0,q.default)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=!1,o=!1,e.prev=2,a=it(ft(t));case 4:return e.next=6,rt(a.next());case 6:if(!(r=!(u=e.sent).done)){e.next=12;break}return s=u.value,e.delegateYield(ot(it(ct(s,n))),"t0",9);case 9:r=!1,e.next=4;break;case 12:e.next=18;break;case 14:e.prev=14,e.t1=e.catch(2),o=!0,i=e.t1;case 18:if(e.prev=18,e.prev=19,!r||null==a.return){e.next=23;break}return e.next=23,rt(a.return());case 23:if(e.prev=23,!o){e.next=26;break}throw i;case 26:return e.finish(23);case 27:return e.finish(18);case 28:case"end":return e.stop()}}),e,null,[[2,14,18,28],[19,,23,27]])})));return function(t,n){return e.apply(this,arguments)}}(),ft=function(){var e=tt((0,q.default)().mark((function e(t){var n,r,o,i;return(0,q.default)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t[Symbol.asyncIterator]){e.next=3;break}return e.delegateYield(ot(it(t)),"t0",2);case 2:return e.abrupt("return");case 3:n=t.getReader(),e.prev=4;case 5:return e.next=7,rt(n.read());case 7:if(r=e.sent,o=r.done,i=r.value,!o){e.next=12;break}return e.abrupt("break",16);case 12:return e.next=14,i;case 14:e.next=5;break;case 16:return e.prev=16,e.next=19,rt(n.cancel());case 19:return e.finish(16);case 20:case"end":return e.stop()}}),e,null,[[4,,16,20]])})));return function(t){return e.apply(this,arguments)}}(),dt=function(e,t,n,r){var o,i=lt(e,t),a=0,u=function(e){o||(o=!0,r&&r(e))};return new ReadableStream({pull:function(e){return(0,W.default)((0,q.default)().mark((function t(){var r,o,s,c,l;return(0,q.default)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,i.next();case 3:if(r=t.sent,o=r.done,s=r.value,!o){t.next=10;break}return u(),e.close(),t.abrupt("return");case 10:c=s.byteLength,n&&(l=a+=c,n(l)),e.enqueue(new Uint8Array(s)),t.next=19;break;case 15:throw t.prev=15,t.t0=t.catch(0),u(t.t0),t.t0;case 19:case"end":return t.stop()}}),t,null,[[0,15]])})))()},cancel:function(e){return u(e),i.return()}},{highWaterMark:2})},pt="function"===typeof fetch&&"function"===typeof Request&&"function"===typeof Response,ht=pt&&"function"===typeof ReadableStream,vt=pt&&("function"===typeof TextEncoder?(ut=new TextEncoder,function(e){return ut.encode(e)}):function(){var e=(0,W.default)((0,q.default)().mark((function e(t){return(0,q.default)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=Uint8Array,e.next=3,new Response(t).arrayBuffer();case 3:return e.t1=e.sent,e.abrupt("return",new e.t0(e.t1));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),gt=function(e){try{for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return!!e.apply(void 0,n)}catch(o){return!1}},yt=ht&&gt((function(){var e=!1,t=new Request(Se.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t})),mt=ht&&gt((function(){return G.isReadableStream(new Response("").body)})),bt={stream:mt&&function(e){return e.body}};pt&&(st=new Response,["text","arrayBuffer","blob","formData","stream"].forEach((function(e){!bt[e]&&(bt[e]=G.isFunction(st[e])?function(t){return t[e]()}:function(t,n){throw new J("Response type '".concat(e,"' is not supported"),J.ERR_NOT_SUPPORT,n)})})));var wt=function(){var e=(0,W.default)((0,q.default)().mark((function e(t){var n;return(0,q.default)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=t){e.next=2;break}return e.abrupt("return",0);case 2:if(!G.isBlob(t)){e.next=4;break}return e.abrupt("return",t.size);case 4:if(!G.isSpecCompliantForm(t)){e.next=9;break}return n=new Request(Se.origin,{method:"POST",body:t}),e.next=8,n.arrayBuffer();case 8:case 15:return e.abrupt("return",e.sent.byteLength);case 9:if(!G.isArrayBufferView(t)&&!G.isArrayBuffer(t)){e.next=11;break}return e.abrupt("return",t.byteLength);case 11:if(G.isURLSearchParams(t)&&(t+=""),!G.isString(t)){e.next=16;break}return e.next=15,vt(t);case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),St=function(){var e=(0,W.default)((0,q.default)().mark((function e(t,n){var r;return(0,q.default)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=G.toFiniteNumber(t.getContentLength()),e.abrupt("return",null==r?wt(n):r);case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),xt=pt&&function(){var e=(0,W.default)((0,q.default)().mark((function e(t){var n,r,i,a,u,s,c,l,f,d,p,h,v,g,y,m,b,w,S,x,P,O,k,_,j,I,T,E,C,M,A,D,R,N;return(0,q.default)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=$e(t),r=n.url,i=n.method,a=n.data,u=n.signal,s=n.cancelToken,c=n.timeout,l=n.onDownloadProgress,f=n.onUploadProgress,d=n.responseType,p=n.headers,h=n.withCredentials,v=void 0===h?"same-origin":h,g=n.fetchOptions,d=d?(d+"").toLowerCase():"text",y=Je([u,s&&s.toAbortSignal()],c),b=y&&y.unsubscribe&&function(){y.unsubscribe()},e.prev=4,e.t0=f&&yt&&"get"!==i&&"head"!==i,!e.t0){e.next=11;break}return e.next=9,St(p,a);case 9:e.t1=w=e.sent,e.t0=0!==e.t1;case 11:if(!e.t0){e.next=15;break}S=new Request(r,{method:"POST",body:a,duplex:"half"}),G.isFormData(a)&&(x=S.headers.get("content-type"))&&p.setContentType(x),S.body&&(P=ze(w,Ve(He(f))),O=(0,o.default)(P,2),k=O[0],_=O[1],a=dt(S.body,65536,k,_));case 15:return G.isString(v)||(v=v?"include":"omit"),j="credentials"in Request.prototype,m=new Request(r,(0,he.default)((0,he.default)({},g),{},{signal:y,method:i.toUpperCase(),headers:p.normalize().toJSON(),body:a,duplex:"half",credentials:j?v:void 0})),e.next=20,fetch(m);case 20:return I=e.sent,T=mt&&("stream"===d||"response"===d),mt&&(l||T&&b)&&(E={},["status","statusText","headers"].forEach((function(e){E[e]=I[e]})),C=G.toFiniteNumber(I.headers.get("content-length")),M=l&&ze(C,Ve(He(l),!0))||[],A=(0,o.default)(M,2),D=A[0],R=A[1],I=new Response(dt(I.body,65536,D,(function(){R&&R(),b&&b()})),E)),d=d||"text",e.next=26,bt[G.findKey(bt,d)||"text"](I,t);case 26:return N=e.sent,!T&&b&&b(),e.next=30,new Promise((function(e,n){Le(e,n,{data:N,headers:Me.from(I.headers),status:I.status,statusText:I.statusText,config:t,request:m})}));case 30:return e.abrupt("return",e.sent);case 33:if(e.prev=33,e.t2=e.catch(4),b&&b(),!e.t2||"TypeError"!==e.t2.name||!/fetch/i.test(e.t2.message)){e.next=38;break}throw Object.assign(new J("Network Error",J.ERR_NETWORK,t,m),{cause:e.t2.cause||e.t2});case 38:throw J.from(e.t2,e.t2&&e.t2.code,t,m);case 39:case"end":return e.stop()}}),e,null,[[4,33]])})));return function(t){return e.apply(this,arguments)}}(),Pt={http:null,xhr:Qe,fetch:xt};G.forEach(Pt,(function(e,t){if(e){try{Object.defineProperty(e,"name",{value:t})}catch(n){}Object.defineProperty(e,"adapterName",{value:t})}}));var Ot=function(e){return"- ".concat(e)},kt=function(e){return G.isFunction(e)||null===e||!1===e},_t=function(e){for(var t,n,r=(e=G.isArray(e)?e:[e]).length,i={},a=0;a<r;a++){var u=void 0;if(n=t=e[a],!kt(t)&&void 0===(n=Pt[(u=String(t)).toLowerCase()]))throw new J("Unknown adapter '".concat(u,"'"));if(n)break;i[u||"#"+a]=n}if(!n){var s=Object.entries(i).map((function(e){var t=(0,o.default)(e,2),n=t[0],r=t[1];return"adapter ".concat(n," ")+(!1===r?"is not supported by the environment":"is not available in the build")})),c=r?s.length>1?"since :\n"+s.map(Ot).join("\n"):" "+Ot(s[0]):"as no adapter specified";throw new J("There is no suitable adapter to dispatch the request "+c,"ERR_NOT_SUPPORT")}return n};function jt(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Ne(null,e)}function It(e){return jt(e),e.headers=Me.from(e.headers),e.data=Ae.call(e,e.transformRequest),-1!==["post","put","patch"].indexOf(e.method)&&e.headers.setContentType("application/x-www-form-urlencoded",!1),_t(e.adapter||Oe.adapter)(e).then((function(t){return jt(e),t.data=Ae.call(e,e.transformResponse,t),t.headers=Me.from(t.headers),t}),(function(t){return De(t)||(jt(e),t&&t.response&&(t.response.data=Ae.call(e,e.transformResponse,t.response),t.response.headers=Me.from(t.response.headers))),Promise.reject(t)}))}var Tt="1.8.2",Et={};["object","boolean","number","function","string","symbol"].forEach((function(e,t){Et[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}}));var Ct={};Et.transitional=function(e,t,n){function r(e,t){return"[Axios v1.8.2] Transitional option '"+e+"'"+t+(n?". "+n:"")}return function(n,o,i){if(!1===e)throw new J(r(o," has been removed"+(t?" in "+t:"")),J.ERR_DEPRECATED);return t&&!Ct[o]&&(Ct[o]=!0,console.warn(r(o," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(n,o,i)}},Et.spelling=function(e){return function(t,n){return console.warn("".concat(n," is likely a misspelling of ").concat(e)),!0}};var Mt={assertOptions:function(e,t,n){if("object"!==typeof e)throw new J("options must be an object",J.ERR_BAD_OPTION_VALUE);for(var r=Object.keys(e),o=r.length;o-- >0;){var i=r[o],a=t[i];if(a){var u=e[i],s=void 0===u||a(u,i,e);if(!0!==s)throw new J("option "+i+" must be "+s,J.ERR_BAD_OPTION_VALUE)}else if(!0!==n)throw new J("Unknown option "+i,J.ERR_BAD_OPTION)}},validators:Et},At=Mt.validators,Dt=function(){return(0,X.default)((function e(t){(0,Y.default)(this,e),this.defaults=t,this.interceptors={request:new de,response:new de}}),[{key:"request",value:function(){var e=(0,W.default)((0,q.default)().mark((function e(t,n){var r,o;return(0,q.default)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this._request(t,n);case 3:return e.abrupt("return",e.sent);case 6:if(e.prev=6,e.t0=e.catch(0),e.t0 instanceof Error){r={},Error.captureStackTrace?Error.captureStackTrace(r):r=new Error,o=r.stack?r.stack.replace(/^.+\n/,""):"";try{e.t0.stack?o&&!String(e.t0.stack).endsWith(o.replace(/^.+\n.+\n/,""))&&(e.t0.stack+="\n"+o):e.t0.stack=o}catch(i){}}throw e.t0;case 10:case"end":return e.stop()}}),e,this,[[0,6]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_request",value:function(e,t){"string"===typeof e?(t=t||{}).url=e:t=e||{};var n=t=Ze(this.defaults,t),r=n.transitional,o=n.paramsSerializer,i=n.headers;void 0!==r&&Mt.assertOptions(r,{silentJSONParsing:At.transitional(At.boolean),forcedJSONParsing:At.transitional(At.boolean),clarifyTimeoutError:At.transitional(At.boolean)},!1),null!=o&&(G.isFunction(o)?t.paramsSerializer={serialize:o}:Mt.assertOptions(o,{encode:At.function,serialize:At.function},!0)),void 0!==t.allowAbsoluteUrls||(void 0!==this.defaults.allowAbsoluteUrls?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),Mt.assertOptions(t,{baseUrl:At.spelling("baseURL"),withXsrfToken:At.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();var a=i&&G.merge(i.common,i[t.method]);i&&G.forEach(["delete","get","head","post","put","patch","common"],(function(e){delete i[e]})),t.headers=Me.concat(a,i);var u=[],s=!0;this.interceptors.request.forEach((function(e){"function"===typeof e.runWhen&&!1===e.runWhen(t)||(s=s&&e.synchronous,u.unshift(e.fulfilled,e.rejected))}));var c,l=[];this.interceptors.response.forEach((function(e){l.push(e.fulfilled,e.rejected)}));var f,d=0;if(!s){var p=[It.bind(this),void 0];for(p.unshift.apply(p,u),p.push.apply(p,l),f=p.length,c=Promise.resolve(t);d<f;)c=c.then(p[d++],p[d++]);return c}f=u.length;var h=t;for(d=0;d<f;){var v=u[d++],g=u[d++];try{h=v(h)}catch(y){g.call(this,y);break}}try{c=It.call(this,h)}catch(y){return Promise.reject(y)}for(d=0,f=l.length;d<f;)c=c.then(l[d++],l[d++]);return c}},{key:"getUri",value:function(e){return fe(Ye((e=Ze(this.defaults,e)).baseURL,e.url,e.allowAbsoluteUrls),e.params,e.paramsSerializer)}}])}();G.forEach(["delete","get","head","options"],(function(e){Dt.prototype[e]=function(t,n){return this.request(Ze(n||{},{method:e,url:t,data:(n||{}).data}))}})),G.forEach(["post","put","patch"],(function(e){function t(t){return function(n,r,o){return this.request(Ze(o||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:n,data:r}))}}Dt.prototype[e]=t(),Dt.prototype[e+"Form"]=t(!0)}));var Rt=Dt,Nt=function(){function e(t){if((0,Y.default)(this,e),"function"!==typeof t)throw new TypeError("executor must be a function.");var n;this.promise=new Promise((function(e){n=e}));var r=this;this.promise.then((function(e){if(r._listeners){for(var t=r._listeners.length;t-- >0;)r._listeners[t](e);r._listeners=null}})),this.promise.then=function(e){var t,n=new Promise((function(e){r.subscribe(e),t=e})).then(e);return n.cancel=function(){r.unsubscribe(t)},n},t((function(e,t,o){r.reason||(r.reason=new Ne(e,t,o),n(r.reason))}))}return(0,X.default)(e,[{key:"throwIfRequested",value:function(){if(this.reason)throw this.reason}},{key:"subscribe",value:function(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]}},{key:"unsubscribe",value:function(e){if(this._listeners){var t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}}},{key:"toAbortSignal",value:function(){var e=this,t=new AbortController,n=function(e){t.abort(e)};return this.subscribe(n),t.signal.unsubscribe=function(){return e.unsubscribe(n)},t.signal}}],[{key:"source",value:function(){var t;return{token:new e((function(e){t=e})),cancel:t}}}])}();var Lt={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Lt).forEach((function(e){var t=(0,o.default)(e,2),n=t[0],r=t[1];Lt[r]=n}));var Ut=Lt;var Ft=function e(t){var n=new Rt(t),r=i(Rt.prototype.request,n);return G.extend(r,Rt.prototype,n,{allOwnKeys:!0}),G.extend(r,n,null,{allOwnKeys:!0}),r.create=function(n){return e(Ze(t,n))},r}(Oe);Ft.Axios=Rt,Ft.CanceledError=Ne,Ft.CancelToken=Nt,Ft.isCancel=De,Ft.VERSION=Tt,Ft.toFormData=ie,Ft.AxiosError=J,Ft.Cancel=Ft.CanceledError,Ft.all=function(e){return Promise.all(e)},Ft.spread=function(e){return function(t){return e.apply(null,t)}},Ft.isAxiosError=function(e){return G.isObject(e)&&!0===e.isAxiosError},Ft.mergeConfig=Ze,Ft.AxiosHeaders=Me,Ft.formToJSON=function(e){return xe(G.isHTMLForm(e)?new FormData(e):e)},Ft.getAdapter=_t,Ft.HttpStatusCode=Ut,Ft.default=Ft;var Bt=Ft},44272:function(e,t,n){"use strict";n.r(t),n.d(t,{deleteDB:function(){return w},openDB:function(){return b},unwrap:function(){return m},wrap:function(){return y}});var r,o,i=n(89379),a=n(36755),u=n(10467),s=function(e,t){return t.some((function(t){return e instanceof t}))};var c=new WeakMap,l=new WeakMap,f=new WeakMap,d=new WeakMap,p=new WeakMap;var h={get:function(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return l.get(e);if("objectStoreNames"===t)return e.objectStoreNames||f.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return y(e[t])},set:function(e,t,n){return e[t]=n,!0},has:function(e,t){return e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e}};function v(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(o||(o=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(m(this),n),y(c.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return y(e.apply(m(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];var i=e.call.apply(e,[m(this),t].concat(r));return f.set(i,t.sort?t.sort():[t]),y(i)}}function g(e){return"function"===typeof e?v(e):(e instanceof IDBTransaction&&function(e){if(!l.has(e)){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("complete",o),e.removeEventListener("error",i),e.removeEventListener("abort",i)},o=function(){t(),r()},i=function(){n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",o),e.addEventListener("error",i),e.addEventListener("abort",i)}));l.set(e,t)}}(e),s(e,r||(r=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(e,h):e)}function y(e){if(e instanceof IDBRequest)return function(e){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("success",o),e.removeEventListener("error",i)},o=function(){t(y(e.result)),r()},i=function(){n(e.error),r()};e.addEventListener("success",o),e.addEventListener("error",i)}));return t.then((function(t){t instanceof IDBCursor&&c.set(t,e)})).catch((function(){})),p.set(t,e),t}(e);if(d.has(e))return d.get(e);var t=g(e);return t!==e&&(d.set(e,t),p.set(t,e)),t}var m=function(e){return p.get(e)};function b(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.blocked,o=n.upgrade,i=n.blocking,a=n.terminated,u=indexedDB.open(e,t),s=y(u);return o&&u.addEventListener("upgradeneeded",(function(e){o(y(u.result),e.oldVersion,e.newVersion,y(u.transaction),e)})),r&&u.addEventListener("blocked",(function(e){return r(e.oldVersion,e.newVersion,e)})),s.then((function(e){a&&e.addEventListener("close",(function(){return a()})),i&&e.addEventListener("versionchange",(function(e){return i(e.oldVersion,e.newVersion,e)}))})).catch((function(){})),s}function w(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).blocked,n=indexedDB.deleteDatabase(e);return t&&n.addEventListener("blocked",(function(e){return t(e.oldVersion,e)})),y(n).then((function(){}))}var S=["get","getKey","getAll","getAllKeys","count"],x=["put","add","delete","clear"],P=new Map;function O(e,t){if(e instanceof IDBDatabase&&!(t in e)&&"string"===typeof t){if(P.get(t))return P.get(t);var n=t.replace(/FromIndex$/,""),r=t!==n,o=x.includes(n);if(n in(r?IDBIndex:IDBObjectStore).prototype&&(o||S.includes(n))){var i=function(){var e=(0,u.default)((0,a.default)().mark((function e(t){var i,u,s,c,l,f,d=arguments;return(0,a.default)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(u=this.transaction(t,o?"readwrite":"readonly"),s=u.store,c=d.length,l=new Array(c>1?c-1:0),f=1;f<c;f++)l[f-1]=d[f];return r&&(s=s.index(l.shift())),e.next=6,Promise.all([(i=s)[n].apply(i,l),o&&u.done]);case 6:return e.abrupt("return",e.sent[0]);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}();return P.set(t,i),i}}}h=function(e){return(0,i.default)((0,i.default)({},e),{},{get:function(t,n,r){return O(t,n)||e.get(t,n,r)},has:function(t,n){return!!O(t,n)||e.has(t,n)}})}(h)}},function(e){var t;t=62523,e(e.s=t)}]);