(this["webpackJsonpseahub-frontend"]=this["webpackJsonpseahub-frontend"]||[]).push([[11],{1267:function(e,t,a){e.exports=a(1300)},1268:function(e,t,a){},1300:function(e,t,a){"use strict";a.r(t);var n=a(5),r=a(6),s=a(8),o=a(7),l=a(0),i=a.n(l),c=a(23),m=a.n(c),u=a(16),p=a(1),d=a(70),g=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(){var e;Object(n.a)(this,a);for(var r=arguments.length,s=new Array(r),o=0;o<r;o++)s[o]=arguments[o];return(e=t.call.apply(t,[this].concat(s))).getActiveClass=function(t){return e.props.currentTab==t?"active":""},e.tabItemClick=function(t){e.props.tabItemClick(t)},e}return Object(r.a)(a,[{key:"render",value:function(){var e=this;return i.a.createElement("div",{className:"side-panel ".concat(this.props.isSidePanelClosed?"":"left-zero")},i.a.createElement("div",{className:"side-panel-north"},i.a.createElement(d.a,{onCloseSidePanel:this.props.onCloseSidePanel})),i.a.createElement("div",{className:"side-panel-center"},i.a.createElement("div",{className:"side-nav"},i.a.createElement("div",{className:"side-nav-con"},i.a.createElement("h3",{className:"sf-heading",style:{color:"#f7941d"}},Object(p.nb)("Admin")),i.a.createElement("ul",{className:"nav nav-pills flex-column nav-container"},i.a.createElement("li",{className:"nav-item"},i.a.createElement(u.a,{className:"nav-link ellipsis ".concat(this.getActiveClass("orgmanage")),to:p.lc+"org/orgmanage/",onClick:function(){return e.tabItemClick("orgmanage")}},i.a.createElement("span",{className:"sf2-icon-info"}),i.a.createElement("span",{className:"nav-text"},Object(p.nb)("Info")))),i.a.createElement("li",{className:"nav-item"},i.a.createElement(u.a,{className:"nav-link ellipsis ".concat(this.getActiveClass("repoadmin")),to:p.lc+"org/repoadmin/",onClick:function(){return e.tabItemClick("repoadmin")}},i.a.createElement("span",{className:"sf2-icon-library"}),i.a.createElement("span",{className:"nav-text"},Object(p.nb)("Libraries")))),i.a.createElement("li",{className:"nav-item"},i.a.createElement(u.a,{className:"nav-link ellipsis ".concat(this.getActiveClass("users")||this.getActiveClass("admins")),to:p.lc+"org/useradmin/",onClick:function(){return e.tabItemClick("users")}},i.a.createElement("span",{className:"sf2-icon-user"}),i.a.createElement("span",{className:"nav-text"},Object(p.nb)("Users")))),i.a.createElement("li",{className:"nav-item"},i.a.createElement(u.a,{className:"nav-link ellipsis ".concat(this.getActiveClass("groupadmin")),to:p.lc+"org/groupadmin/",onClick:function(){return e.tabItemClick("groupadmin")}},i.a.createElement("span",{className:"sf2-icon-group"}),i.a.createElement("span",{className:"nav-text"},Object(p.nb)("Groups")))),i.a.createElement("li",{className:"nav-item"},i.a.createElement(u.a,{className:"nav-link ellipsis ".concat(this.getActiveClass("departmentadmin")),to:p.lc+"org/departmentadmin/",onClick:function(){return e.tabItemClick("departmentadmin")}},i.a.createElement("span",{className:"sf2-icon-organization"}),i.a.createElement("span",{className:"nav-text"},Object(p.nb)("Departments")))),i.a.createElement("li",{className:"nav-item"},i.a.createElement(u.a,{className:"nav-link ellipsis ".concat(this.getActiveClass("publinkadmin")),to:p.lc+"org/publinkadmin/",onClick:function(){return e.tabItemClick("publinkadmin")}},i.a.createElement("span",{className:"sf2-icon-link"}),i.a.createElement("span",{className:"nav-text"},Object(p.nb)("Links")))),i.a.createElement("li",{className:"nav-item"},i.a.createElement(u.a,{className:"nav-link ellipsis ".concat(this.getActiveClass("logadmin")||this.getActiveClass("file-update")||this.getActiveClass("perm-audit")),to:p.lc+"org/logadmin/",onClick:function(){return e.tabItemClick("logadmin")}},i.a.createElement("span",{className:"sf2-icon-clock"}),i.a.createElement("span",{className:"nav-text"},Object(p.nb)("Logs")))))))))}}]),a}(i.a.Component),h=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).navItems=[{name:"all",urlPart:"useradmin",text:Object(p.nb)("All")},{name:"admins",urlPart:"useradmin/admins",text:Object(p.nb)("Admin")}],r}return Object(r.a)(a,[{key:"render",value:function(){var e=this.props.currentItem;return i.a.createElement("div",{className:"cur-view-path tab-nav-container"},i.a.createElement("ul",{className:"nav"},this.navItems.map((function(t,a){return i.a.createElement("li",{className:"nav-item",key:a},i.a.createElement(u.a,{to:"".concat(p.lc,"org/").concat(t.urlPart,"/"),className:"nav-link".concat(e==t.name?" active":"")},t.text))}))))}}]),a}(i.a.Component),b=a(3),f=a(9),E=a(4),v=a(10),O=a(78),w=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(){var e;Object(n.a)(this,a);for(var r=arguments.length,s=new Array(r),o=0;o<r;o++)s[o]=arguments[o];return(e=t.call.apply(t,[this].concat(s))).translateStatus=function(e){return"active"===e?Object(p.nb)("Active"):"inactive"===e?Object(p.nb)("Inactive"):void 0},e}return Object(r.a)(a,[{key:"render",value:function(){return i.a.createElement(O.a,{isTextMode:this.props.isTextMode,isEditIconShow:this.props.isEditIconShow,options:this.props.statusArray,currentOption:this.props.currentStatus,onOptionChanged:this.props.onStatusChanged,translateOption:this.translateStatus})}}]),a}(i.a.Component),D=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).onMouseEnter=function(){r.props.isItemFreezed||r.setState({showMenu:!0,highlight:!0})},r.onMouseLeave=function(){r.props.isItemFreezed||r.setState({showMenu:!1,highlight:!1})},r.toggleDelete=function(){var e=r.props.user.email;r.props.toggleDelete(e)},r.toggleResetPW=function(){var e=r.props.user,t=e.email,a=e.name;v.a.success(Object(p.nb)("Resetting user's password, please wait for a moment.")),f.a.orgAdminResetOrgUserPassword(p.Rb,t).then((function(e){var t;t=(t=(t=Object(p.nb)("Successfully reset password to %(passwd)s for user %(user)s.")).replace("%(passwd)s",e.data.new_password)).replace("%(user)s",a),v.a.success(t,{duration:15})})).catch((function(e){var t=E.a.getErrorMsg(e);v.a.danger(t)}))},r.toggleRevokeAdmin=function(){var e=r.props.user.email;r.props.toggleRevokeAdmin(e)},r.changeStatus=function(e){var t;t="active"==e?"true":"false",f.a.orgAdminChangeOrgUserStatus(p.Rb,r.props.user.email,t).then((function(e){r.setState({currentStatus:"true"==t?"active":"inactive",highlight:!1,showMenu:!1}),v.a.success(Object(p.nb)("Edit succeeded."))})).catch((function(e){var t=E.a.getErrorMsg(e);t===Object(p.nb)("Error")&&(t=Object(p.nb)("Edit failed.")),v.a.danger(t)}))},r.onDropdownToggleClick=function(e){e.preventDefault(),r.toggleOperationMenu(e)},r.toggleOperationMenu=function(e){e.stopPropagation(),r.setState({isItemMenuShow:!r.state.isItemMenuShow},(function(){r.state.isItemMenuShow?r.props.onFreezedItem():(r.setState({highlight:!1,showMenu:!1}),r.props.onUnfreezedItem())}))},r.getQuotaTotal=function(e){switch(e){case-1:return Object(p.nb)("Failed");case-2:return"--";default:return E.a.formatSize({bytes:e})}},r.state={highlight:!1,showMenu:!1,currentStatus:r.props.user.is_active?"active":"inactive",isItemMenuShow:!1},r.statusArray=["active","inactive"],r}return Object(r.a)(a,[{key:"render",value:function(){var e=this.props,t=e.user,a=e.currentTab,n=p.lc+"org/useradmin/info/"+encodeURIComponent(t.email)+"/",r=t.email!==p.wc&&this.state.showMenu,s=r;return i.a.createElement("tr",{className:this.state.highlight?"tr-highlight":"",onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave},i.a.createElement("td",null,i.a.createElement("a",{href:n},t.name)),i.a.createElement("td",null,i.a.createElement(w,{isTextMode:!0,isEditIconShow:s,currentStatus:this.state.currentStatus,statusArray:this.statusArray,onStatusChanged:this.changeStatus})),i.a.createElement("td",null,"".concat(E.a.formatSize({bytes:t.quota_usage})," / ").concat(this.getQuotaTotal(t.quota_total))),i.a.createElement("td",null,t.ctime," /",i.a.createElement("br",null),t.last_login?t.last_login:"--"),i.a.createElement("td",{className:"text-center cursor-pointer"},r&&i.a.createElement(b.l,{isOpen:this.state.isItemMenuShow,toggle:this.toggleOperationMenu},i.a.createElement(b.o,{tag:"a",className:"attr-action-icon fas fa-ellipsis-v",title:Object(p.nb)("More Operations"),"data-toggle":"dropdown","aria-expanded":this.state.isItemMenuShow,onClick:this.onDropdownToggleClick}),i.a.createElement(b.n,null,i.a.createElement(b.m,{onClick:this.toggleDelete},Object(p.nb)("Delete")),i.a.createElement(b.m,{onClick:this.toggleResetPW},Object(p.nb)("ResetPwd")),"admins"==a&&i.a.createElement(b.m,{onClick:this.toggleRevokeAdmin},Object(p.nb)("Revoke Admin"))))))}}]),a}(i.a.Component),j=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).onFreezedItem=function(){r.setState({isItemFreezed:!0})},r.onUnfreezedItem=function(){r.setState({isItemFreezed:!1})},r.onChangePageNum=function(e,t){e.preventDefault();var a=r.props.page;1==t?a+=1:a-=1,r.props.initOrgUsersData(a)},r.sortByQuotaUsage=function(e){e.preventDefault(),r.props.sortByQuotaUsage()},r.state={isItemFreezed:!1},r}return Object(r.a)(a,[{key:"render",value:function(){var e,t=this,a=this.props,n=a.sortBy,r=a.sortOrder;e=""==n?i.a.createElement("span",{className:"fas fa-sort"}):i.a.createElement("span",{className:"fas ".concat("asc"==r?"fa-caret-up":"fa-caret-down")});var s=this.props,o=s.orgUsers,l=s.page,c=s.pageNext;return i.a.createElement("div",{className:"cur-view-content"},i.a.createElement("table",null,i.a.createElement("thead",null,i.a.createElement("tr",null,i.a.createElement("th",{width:"30%"},Object(p.nb)("Name")),i.a.createElement("th",{width:"15%"},Object(p.nb)("Status")),i.a.createElement("th",{width:"20%"},i.a.createElement("a",{className:"d-inline-block table-sort-op",href:"#",onClick:this.sortByQuotaUsage},Object(p.nb)("Space Used")," ",e)," / ",Object(p.nb)("Quota")),i.a.createElement("th",{width:"25%"},Object(p.nb)("Created At")," / ",Object(p.nb)("Last Login")),i.a.createElement("th",{width:"10%"}))),i.a.createElement("tbody",null,o.map((function(e,a){return i.a.createElement(D,{key:a,user:e,currentTab:"users",isItemFreezed:t.state.isItemFreezed,toggleDelete:t.props.toggleDelete,onFreezedItem:t.onFreezedItem,onUnfreezedItem:t.onUnfreezedItem})})))),i.a.createElement("div",{className:"paginator"},1!=l&&i.a.createElement("a",{href:"#",onClick:function(e){return t.onChangePageNum(e,-1)}},Object(p.nb)("Previous")),1!=l&&c&&i.a.createElement("span",null," | "),c&&i.a.createElement("a",{href:"#",onClick:function(e){return t.onChangePageNum(e,1)}},Object(p.nb)("Next"))))}}]),a}(i.a.Component),S=a(51),N=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(){return Object(n.a)(this,a),t.apply(this,arguments)}return Object(r.a)(a,[{key:"render",value:function(){return i.a.createElement("div",{className:"main-panel-north ".concat(this.props.children?"border-left-show":"")},i.a.createElement("div",{className:"cur-view-toolbar"},i.a.createElement("span",{className:"sf2-icon-menu side-nav-toggle hidden-md-up d-md-none",title:"Side Nav Menu"}),i.a.createElement("div",{className:"operation"},this.props.children)),i.a.createElement("div",{className:"common-toolbar"},i.a.createElement(S.a,{isAdminPanel:!0})))}}]),a}(l.Component),C=a(18),I=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).handleSubmit=function(){if(r.validateInputParams()){var e=r.state,t=e.email,a=e.name,n=e.password;r.setState({isAddingUser:!0}),r.props.handleSubmit(t,a.trim(),n)}},r.handleKeyPress=function(e){e.preventDefault(),"Enter"==e.key&&r.handleSubmit(e)},r.togglePasswordVisible=function(){r.setState({isPasswordVisible:!r.state.isPasswordVisible},(function(){r.state.isPasswordVisible?(r.passwdInput.type="password",r.passwdNewInput.type="password"):(r.passwdInput.type="text",r.passwdNewInput.type="text")}))},r.generatePassword=function(){var e=Math.random().toString(36).substr(5);r.setState({password:e,passwdnew:e,isPasswordVisible:!1},(function(){r.passwdInput.type="text",r.passwdNewInput.type="text"}))},r.inputEmail=function(e){var t=e.target.value.trim();r.setState({email:t})},r.inputName=function(e){var t=e.target.value;r.setState({name:t})},r.inputPassword=function(e){var t=e.target.value.trim();r.setState({password:t},(function(){r.state.isPasswordVisible&&(r.passwdInput.type="password",r.passwdNewInput.type="password")}))},r.inputPasswordNew=function(e){var t=e.target.value.trim();r.setState({passwdnew:t},(function(){r.state.isPasswordVisible&&(r.passwdInput.type="password",r.passwdNewInput.type="password")}))},r.toggle=function(){r.props.toggle()},r.state={isPasswordVisible:!0,email:"",name:"",password:"",passwdnew:"",errMessage:"",isAddingUser:!1},r.passwdInput=i.a.createRef(),r.passwdNewInput=i.a.createRef(),r}return Object(r.a)(a,[{key:"validateInputParams",value:function(){var e;if(!this.state.email.length)return e=Object(p.nb)("email is required"),this.setState({errMessage:e}),!1;if(!this.state.name.trim().length)return e=Object(p.nb)("Name is required"),this.setState({errMessage:e}),!1;var t=this.state.password,a=this.state.passwdnew;return t.length?a.length?t===a||(e=Object(p.nb)("Passwords don't match"),this.setState({errMessage:e}),!1):(e=Object(p.nb)("Please enter the password again"),this.setState({errMessage:e}),!1):(e=Object(p.nb)("Please enter password"),this.setState({errMessage:e}),!1)}},{key:"render",value:function(){var e=this;return i.a.createElement(b.x,{isOpen:!0,toggle:this.toggle},i.a.createElement(b.A,{toggle:this.toggle},Object(p.nb)("Add User")),i.a.createElement(b.y,null,i.a.createElement(b.p,null,i.a.createElement(b.q,null,i.a.createElement(b.w,{for:"userEmail"},Object(p.nb)("Email")),i.a.createElement(b.s,{id:"userEmail",value:this.state.email||"",onChange:this.inputEmail})),i.a.createElement(b.q,null,i.a.createElement(b.w,{for:"userName"},Object(p.nb)("Name")),i.a.createElement(b.s,{id:"userName",value:this.state.name||"",onChange:this.inputName})),i.a.createElement(b.q,null,i.a.createElement(b.w,{for:"userPwd"},Object(p.nb)("Password")),i.a.createElement(b.t,{className:"passwd"},i.a.createElement(b.s,{id:"userPwd",innerRef:function(t){e.passwdInput=t},value:this.state.password||"",onChange:this.inputPassword}),i.a.createElement(b.u,{addonType:"append"},i.a.createElement(b.c,{onClick:this.togglePasswordVisible},i.a.createElement("i",{className:"link-operation-icon fas ".concat(this.state.isPasswordVisible?"fa-eye-slash":"fa-eye")})),i.a.createElement(b.c,{onClick:this.generatePassword},i.a.createElement("i",{className:"link-operation-icon fas fa-magic"}))))),i.a.createElement(b.q,null,i.a.createElement(b.w,{for:"userPwdNew"},Object(p.nb)("Confirm Password")),i.a.createElement(b.s,{id:"userPwdNew",innerRef:function(t){e.passwdNewInput=t},className:"passwd",value:this.state.passwdnew||"",onChange:this.inputPasswordNew}))),this.state.errMessage&&i.a.createElement(b.w,{className:"err-message"},this.state.errMessage)),i.a.createElement(b.z,null,i.a.createElement(b.c,{color:"primary",disabled:this.state.isAddingUser,onClick:this.handleSubmit,className:this.state.isAddingUser?"btn-loading":""},Object(p.nb)("Submit"))))}}]),a}(i.a.Component),M=a(101),y=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).copyLink=function(){Object(M.a)(r.props.invitationLink),r.props.toggle();var e=Object(p.nb)("Internal link has been copied to clipboard");v.a.success(e)},r}return Object(r.a)(a,[{key:"render",value:function(){return i.a.createElement(b.x,{isOpen:!0},i.a.createElement(b.A,{toggle:this.props.toggle},Object(p.nb)("Invite user")),i.a.createElement(b.y,null,i.a.createElement("p",null,Object(p.nb)("Send the invitation link to the others, and they will be able to join the organization via scanning the QR code.")),i.a.createElement("p",null,this.props.invitationLink)),i.a.createElement(b.z,null,i.a.createElement(b.c,{color:"primary",onClick:this.copyLink},Object(p.nb)("Copy"))))}}]),a}(i.a.Component),k=a(12),_=a.n(k);_.a.locale(p.Bb);var A=function e(t){Object(n.a)(this,e),this.id=t.id,this.name=t.name,this.email=t.email,this.contact_email=t.owner_contact_email,this.is_active=t.is_active,this.quota_usage=t.quota_usage,this.quota_total=t.quota_total,this.last_login=t.last_login?_()(t.last_login).fromNow():"--",this.ctime=_()(t.ctime).format("YYYY-MM-DD HH:mm:ss")},R=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).sortByQuotaUsage=function(){r.setState({sortBy:"quota_usage",sortOrder:"asc"==r.state.sortOrder?"desc":"asc",page:1},(function(){var e=new URL(location.href),t=new URLSearchParams(e.search),a=r.state,n=a.page,s=a.sortBy,o=a.sortOrder;t.set("page",n),t.set("order_by",s),t.set("direction",o),e.search=t.toString(),Object(u.c)(e.toString()),r.initOrgUsersData(n)}))},r.toggleAddOrgUser=function(){r.setState({isShowAddOrgUserDialog:!r.state.isShowAddOrgUserDialog})},r.toggleInviteUserDialog=function(){r.setState({isInviteUserDialogOpen:!r.state.isInviteUserDialogOpen})},r.initOrgUsersData=function(e){var t=r.state,a=t.sortBy,n=t.sortOrder;f.a.orgAdminListOrgUsers(p.Rb,"",e,a,n).then((function(e){var t=e.data.user_list.map((function(e){return new A(e)}));r.setState({orgUsers:t,pageNext:e.data.page_next,page:e.data.page})})).catch((function(e){var t=E.a.getErrorMsg(e);v.a.danger(t)}))},r.addOrgUser=function(e,t,a){f.a.orgAdminAddOrgUser(p.Rb,e,t,a).then((function(t){var a=new A(t.data);r.state.orgUsers.unshift(a),r.setState({orgUsers:r.state.orgUsers}),r.toggleAddOrgUser();var n=Object(p.nb)("successfully added user %s.");n=n.replace("%s",e),v.a.success(n)})).catch((function(e){var t=E.a.getErrorMsg(e);v.a.danger(t),r.toggleAddOrgUser()}))},r.toggleOrgUsersDelete=function(e){f.a.orgAdminDeleteOrgUser(p.Rb,e).then((function(t){var a=r.state.orgUsers.filter((function(t){return t.email!=e}));r.setState({orgUsers:a});var n=Object(p.nb)("Successfully deleted %s");n=n.replace("%s",e),v.a.success(n)})).catch((function(e){var t=E.a.getErrorMsg(e);v.a.danger(t)}))},r.state={orgUsers:[],page:1,pageNext:!1,sortBy:"",sortOrder:"asc",isShowAddOrgUserDialog:!1,isInviteUserDialogOpen:!1},r}return Object(r.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=new URL(window.location).searchParams,a=this.state,n=a.page,r=a.sortBy,s=a.sortOrder;this.setState({page:parseInt(t.get("page")||n),sortBy:t.get("order_by")||r,sortOrder:t.get("direction")||s},(function(){e.initOrgUsersData(e.state.page)}))}},{key:"render",value:function(){var e,t="btn btn-secondary operation-item";return e=i.a.createElement(l.Fragment,null,i.a.createElement("button",{className:t,title:Object(p.nb)("Add user"),onClick:this.toggleAddOrgUser},i.a.createElement("i",{className:"fas fa-plus-square text-secondary mr-1"}),Object(p.nb)("Add user")),p.tb&&i.a.createElement("button",{className:t,title:Object(p.nb)("Invite user"),onClick:this.toggleInviteUserDialog},i.a.createElement("i",{className:"fas fa-plus-square text-secondary mr-1"}),Object(p.nb)("Invite user")),this.state.isShowAddOrgUserDialog&&i.a.createElement(C.a,null,i.a.createElement(I,{handleSubmit:this.addOrgUser,toggle:this.toggleAddOrgUser})),this.state.isInviteUserDialogOpen&&i.a.createElement(C.a,null,i.a.createElement(y,{invitationLink:p.tb,toggle:this.toggleInviteUserDialog}))),i.a.createElement(l.Fragment,null,i.a.createElement(N,{children:e}),i.a.createElement("div",{className:"main-panel-center flex-row"},i.a.createElement("div",{className:"cur-view-container"},i.a.createElement(h,{currentItem:"all"}),i.a.createElement(j,{initOrgUsersData:this.initOrgUsersData,toggleDelete:this.toggleOrgUsersDelete,orgUsers:this.state.orgUsers,page:this.state.page,pageNext:this.state.pageNext,sortBy:this.state.sortBy,sortOrder:this.state.sortOrder,sortByQuotaUsage:this.sortByQuotaUsage}))))}}]),a}(l.Component),U=(a(1268),function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).onFreezedItem=function(){r.setState({isItemFreezed:!0})},r.onUnfreezedItem=function(){r.setState({isItemFreezed:!1})},r.state={isItemFreezed:!1},r}return Object(r.a)(a,[{key:"componentDidMount",value:function(){this.props.initOrgAdmin()}},{key:"render",value:function(){var e=this,t=this.props.orgAdminUsers;return i.a.createElement("div",{className:"cur-view-content"},i.a.createElement("table",null,i.a.createElement("thead",null,i.a.createElement("tr",null,i.a.createElement("th",{width:"30%"},Object(p.nb)("Name")),i.a.createElement("th",{width:"15%"},Object(p.nb)("Status")),i.a.createElement("th",{width:"20%"},Object(p.nb)("Space Used")," / ",Object(p.nb)("Quota")),i.a.createElement("th",{width:"25%"},Object(p.nb)("Created At")," / ",Object(p.nb)("Last Login")),i.a.createElement("th",{width:"10%"}))),i.a.createElement("tbody",null,t.map((function(t){return i.a.createElement(D,{key:t.index,user:t,currentTab:"admins",isItemFreezed:e.state.isItemFreezed,toggleDelete:e.props.toggleDelete,toggleRevokeAdmin:e.props.toggleRevokeAdmin,onFreezedItem:e.onFreezedItem,onUnfreezedItem:e.onUnfreezedItem})})))))}}]),a}(i.a.Component)),L=a(43),z=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).handleSelectChange=function(e){r.setState({selectedOption:e,errMessage:""}),r.options=[]},r.addOrgAdmin=function(){if(r.state.selectedOption){var e=r.state.selectedOption.email;f.a.orgAdminSetOrgAdmin(p.Rb,e,!0).then((function(e){var t=new A(e.data);r.props.onAddedOrgAdmin(t)})).catch((function(e){var t=E.a.getErrorMsg(e);v.a.danger(t)}))}},r.toggle=function(){r.props.toggle()},r.state={selectedOption:null,errMessage:""},r.options=[],r}return Object(r.a)(a,[{key:"render",value:function(){return i.a.createElement(b.x,{isOpen:!0,toggle:this.toggle},i.a.createElement(b.A,{toggle:this.toggle},Object(p.nb)("Add Admins")),i.a.createElement(b.y,null,i.a.createElement(L.a,{ref:"userSelect",isMulti:!1,className:"reviewer-select",placeholder:Object(p.nb)("Select a user as admin..."),onSelectChange:this.handleSelectChange}),this.state.errMessage&&i.a.createElement(b.a,{color:"danger",className:"mt-2"},this.state.errMessage)),i.a.createElement(b.z,null,i.a.createElement(b.c,{color:"secondary",onClick:this.toggle},Object(p.nb)("Close")),i.a.createElement(b.c,{color:"primary",onClick:this.addOrgAdmin},Object(p.nb)("Submit"))))}}]),a}(i.a.Component),x=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).toggleAddOrgAdmin=function(){r.setState({isShowAddOrgAdminDialog:!r.state.isShowAddOrgAdminDialog})},r.initOrgAdmin=function(){f.a.orgAdminListOrgUsers(p.Rb,!0).then((function(e){var t=e.data.user_list.map((function(e){return new A(e)}));r.setState({orgAdminUsers:t})})).catch((function(e){var t=E.a.getErrorMsg(e);v.a.danger(t)}))},r.toggleOrgAdminDelete=function(e){f.a.orgAdminDeleteOrgUser(p.Rb,e).then((function(t){r.setState({orgAdminUsers:r.state.orgAdminUsers.filter((function(t){return t.email!=e}))});var a=Object(p.nb)("Successfully deleted %s");a=a.replace("%s",e),v.a.success(a)})).catch((function(e){var t=E.a.getErrorMsg(e);v.a.danger(t)}))},r.toggleRevokeAdmin=function(e){f.a.orgAdminSetOrgAdmin(p.Rb,e,!1).then((function(t){r.setState({orgAdminUsers:r.state.orgAdminUsers.filter((function(t){return t.email!=e}))});var a=Object(p.nb)("Successfully revoke the admin permission of %s");a=a.replace("%s",t.data.name),v.a.success(a)})).catch((function(e){var t=E.a.getErrorMsg(e);v.a.danger(t)}))},r.onAddedOrgAdmin=function(e){r.state.orgAdminUsers.unshift(e),r.setState({orgAdminUsers:r.state.orgAdminUsers});var t=Object(p.nb)("Successfully set %s as admin.");t=t.replace("%s",e.email),v.a.success(t),r.toggleAddOrgAdmin()},r.state={orgAdminUsers:[],isShowAddOrgAdminDialog:!1},r}return Object(r.a)(a,[{key:"render",value:function(){var e;return e=i.a.createElement(l.Fragment,null,i.a.createElement("button",{className:"btn btn-secondary operation-item",title:Object(p.nb)("Add admin"),onClick:this.toggleAddOrgAdmin},i.a.createElement("i",{className:"fas fa-plus-square text-secondary mr-1"}),Object(p.nb)("Add admin")),this.state.isShowAddOrgAdminDialog&&i.a.createElement(C.a,null,i.a.createElement(z,{toggle:this.toggleAddOrgAdmin,onAddedOrgAdmin:this.onAddedOrgAdmin}))),i.a.createElement(l.Fragment,null,i.a.createElement(N,{children:e}),i.a.createElement("div",{className:"main-panel-center flex-row"},i.a.createElement("div",{className:"cur-view-container"},i.a.createElement(h,{currentItem:"admins"}),i.a.createElement(U,{currentTab:"admins",toggleDelete:this.toggleOrgAdminDelete,toggleRevokeAdmin:this.toggleRevokeAdmin,orgAdminUsers:this.state.orgAdminUsers,initOrgAdmin:this.initOrgAdmin}))))}}]),a}(l.Component),F=a(15),P=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(){return Object(n.a)(this,a),t.apply(this,arguments)}return Object(r.a)(a,[{key:"render",value:function(){var e=this.props,t=e.email,a=e.currentItem,n="".concat(p.lc,"org/useradmin/info/").concat(encodeURIComponent(t),"/");return i.a.createElement("div",{className:"cur-view-path org-admin-user-nav"},i.a.createElement("ul",{className:"nav"},i.a.createElement("li",{className:"nav-item"},i.a.createElement(u.a,{to:n,className:"nav-link".concat("profile"==a?" active":"")},Object(p.nb)("Profile"))),i.a.createElement("li",{className:"nav-item"},i.a.createElement(u.a,{to:"".concat(n,"repos/"),className:"nav-link".concat("owned-repos"==a?" active":"")},Object(p.nb)("Owned Libraries"))),i.a.createElement("li",{className:"nav-item"},i.a.createElement(u.a,{to:"".concat(n,"shared-repos/"),className:"nav-link".concat("shared-repos"==a?" active":"")},Object(p.nb)("Shared Libraries")))))}}]),a}(i.a.Component),T=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).handleInputChange=function(e){r.setState({inputValue:e.target.value})},r.formSubmit=function(){var e=r.props,t=e.orgID,a=e.email,n=r.state.inputValue.trim();r.setState({submitBtnDisabled:!0}),f.a.orgAdminSetOrgUserName(t,a,n).then((function(e){var t=n?e.data.name:"";r.props.updateName(t),r.props.toggleDialog()})).catch((function(e){var t=E.a.getErrorMsg(e);r.setState({formErrorMsg:t,submitBtnDisabled:!1})}))},r.state={inputValue:r.props.name,submitBtnDisabled:!1},r}return Object(r.a)(a,[{key:"render",value:function(){var e=this.state,t=e.inputValue,a=e.formErrorMsg,n=e.submitBtnDisabled;return i.a.createElement(b.x,{isOpen:!0,centered:!0,toggle:this.props.toggleDialog},i.a.createElement(b.A,{toggle:this.props.toggleDialog},Object(p.nb)("Set user name")),i.a.createElement(b.y,null,i.a.createElement(i.a.Fragment,null,i.a.createElement("input",{type:"text",className:"form-control",value:t,onChange:this.handleInputChange}),a&&i.a.createElement("p",{className:"error m-0 mt-2"},a))),i.a.createElement(b.z,null,i.a.createElement("button",{className:"btn btn-secondary",onClick:this.props.toggleDialog},Object(p.nb)("Cancel")),i.a.createElement("button",{className:"btn btn-primary",disabled:n,onClick:this.formSubmit},Object(p.nb)("Submit"))))}}]),a}(i.a.Component),G=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).handleInputChange=function(e){r.setState({inputValue:e.target.value})},r.formSubmit=function(){var e=r.props,t=e.orgID,a=e.email,n=r.state.inputValue.trim();r.setState({submitBtnDisabled:!0}),f.a.orgAdminSetOrgUserContactEmail(t,a,n).then((function(e){var t=n?e.data.contact_email:"";r.props.updateContactEmail(t),r.props.toggleDialog()})).catch((function(e){var t=E.a.getErrorMsg(e);r.setState({formErrorMsg:t,submitBtnDisabled:!1})}))},r.state={inputValue:r.props.contactEmail,submitBtnDisabled:!1},r}return Object(r.a)(a,[{key:"render",value:function(){var e=this.state,t=e.inputValue,a=e.formErrorMsg,n=e.submitBtnDisabled;return i.a.createElement(b.x,{isOpen:!0,centered:!0,toggle:this.props.toggleDialog},i.a.createElement(b.A,{toggle:this.props.toggleDialog},Object(p.nb)("Set user contact email")),i.a.createElement(b.y,null,i.a.createElement(i.a.Fragment,null,i.a.createElement("input",{type:"text",className:"form-control",value:t,onChange:this.handleInputChange}),a&&i.a.createElement("p",{className:"error m-0 mt-2"},a))),i.a.createElement(b.z,null,i.a.createElement("button",{className:"btn btn-secondary",onClick:this.props.toggleDialog},Object(p.nb)("Cancel")),i.a.createElement("button",{className:"btn btn-primary",disabled:n,onClick:this.formSubmit},Object(p.nb)("Submit"))))}}]),a}(i.a.Component),B=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){var r;Object(n.a)(this,a),(r=t.call(this,e)).handleInputChange=function(e){r.setState({inputValue:e.target.value})},r.formSubmit=function(){var e=r.props,t=e.orgID,a=e.email,n=r.state.inputValue.trim();if(!n)return r.setState({formErrorMsg:Object(p.nb)("It is required.")}),!1;r.setState({submitBtnDisabled:!0}),f.a.orgAdminSetOrgUserQuota(t,a,n).then((function(e){r.props.updateQuota(e.data.quota_total),r.props.toggleDialog()})).catch((function(e){var t=E.a.getErrorMsg(e);r.setState({formErrorMsg:t,submitBtnDisabled:!1})}))};var s=r.props.quotaTotal<0?"":r.props.quotaTotal/1e6;return r.state={inputValue:s,submitBtnDisabled:!1},r}return Object(r.a)(a,[{key:"render",value:function(){var e=this.state,t=e.inputValue,a=e.formErrorMsg,n=e.submitBtnDisabled;return i.a.createElement(b.x,{isOpen:!0,centered:!0,toggle:this.props.toggleDialog},i.a.createElement(b.A,{toggle:this.props.toggleDialog},Object(p.nb)("Set user quota")),i.a.createElement(b.y,null,i.a.createElement(i.a.Fragment,null,i.a.createElement(b.t,null,i.a.createElement("input",{type:"text",className:"form-control",value:t,onChange:this.handleInputChange}),i.a.createElement(b.u,{addonType:"append"},i.a.createElement(b.v,null,"MB"))),i.a.createElement("p",{className:"small text-secondary mt-2 mb-2"},Object(p.nb)("Tip: 0 means default limit")),a&&i.a.createElement("p",{className:"error m-0 mt-2"},a))),i.a.createElement(b.z,null,i.a.createElement("button",{className:"btn btn-secondary",onClick:this.props.toggleDialog},Object(p.nb)("Cancel")),i.a.createElement("button",{className:"btn btn-primary",disabled:n,onClick:this.formSubmit},Object(p.nb)("Submit"))))}}]),a}(i.a.Component),Q=(a(183),window.org.pageOptions),q=Q.orgID,Y=Q.orgName,H=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).updateName=function(e){r.setState({name:e})},r.updateContactEmail=function(e){r.setState({contact_email:e})},r.updateQuota=function(e){r.setState({quota_total:e})},r.state={loading:!0,errorMsg:""},r}return Object(r.a)(a,[{key:"componentDidMount",value:function(){var e=this;f.a.orgAdminGetOrgUserInfo(q,this.props.email).then((function(t){e.setState(Object.assign({loading:!1},t.data))})).catch((function(t){e.setState({loading:!1,errorMsg:E.a.getErrorMsg(t,!0)})}))}},{key:"render",value:function(){return i.a.createElement(l.Fragment,null,i.a.createElement(N,null),i.a.createElement("div",{className:"main-panel-center flex-row"},i.a.createElement("div",{className:"cur-view-container"},i.a.createElement(P,{email:this.props.email,currentItem:"profile"}),i.a.createElement("div",{className:"cur-view-content"},i.a.createElement(V,{data:this.state,updateName:this.updateName,updateContactEmail:this.updateContactEmail,updateQuota:this.updateQuota})))))}}]),a}(l.Component),V=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).toggleSetNameDialog=function(){r.setState({isSetNameDialogOpen:!r.state.isSetNameDialogOpen})},r.toggleSetContactEmailDialog=function(){r.setState({isSetContactEmailDialogOpen:!r.state.isSetContactEmailDialogOpen})},r.toggleSetQuotaDialog=function(){r.setState({isSetQuotaDialogOpen:!r.state.isSetQuotaDialogOpen})},r.state={isSetNameDialogOpen:!1,isSetContactEmailDialogOpen:!1,isSetQuotaDialogOpen:!1},r}return Object(r.a)(a,[{key:"render",value:function(){var e=this.props.data,t=e.loading,a=e.errorMsg,n=e.avatar_url,r=e.email,s=e.contact_email,o=e.name,c=e.quota_total,m=e.quota_usage,u=this.state,d=u.isSetNameDialogOpen,g=u.isSetContactEmailDialogOpen,h=u.isSetQuotaDialogOpen;return t?i.a.createElement(F.a,null):a?i.a.createElement("p",{className:"error text-center"},a):i.a.createElement(l.Fragment,null,i.a.createElement("dl",null,i.a.createElement("dt",null,Object(p.nb)("Avatar")),i.a.createElement("dd",null,i.a.createElement("img",{src:n,width:"48",height:"48",className:"rounded",alt:""})),i.a.createElement("dt",null,"ID"),i.a.createElement("dd",null,r),i.a.createElement("dt",null,Object(p.nb)("Name")),i.a.createElement("dd",null,o||"--",i.a.createElement("span",{title:Object(p.nb)("Edit"),className:"attr-action-icon fa fa-pencil-alt",onClick:this.toggleSetNameDialog})),i.a.createElement("dt",null,Object(p.nb)("Contact Email")),i.a.createElement("dd",null,s||"--",i.a.createElement("span",{title:Object(p.nb)("Edit"),className:"attr-action-icon fa fa-pencil-alt",onClick:this.toggleSetContactEmailDialog})),i.a.createElement("dt",null,Object(p.nb)("Organization")),i.a.createElement("dd",null,Y),i.a.createElement("dt",null,Object(p.nb)("Space Used / Quota")),i.a.createElement("dd",null,"".concat(E.a.bytesToSize(m)).concat(c>0?" / "+E.a.bytesToSize(c):""),i.a.createElement("span",{title:Object(p.nb)("Edit"),className:"attr-action-icon fa fa-pencil-alt",onClick:this.toggleSetQuotaDialog}))),d&&i.a.createElement(T,{orgID:q,email:r,name:o,updateName:this.props.updateName,toggleDialog:this.toggleSetNameDialog}),g&&i.a.createElement(G,{orgID:q,email:r,contactEmail:s,updateContactEmail:this.props.updateContactEmail,toggleDialog:this.toggleSetContactEmailDialog}),h&&i.a.createElement(B,{orgID:q,email:r,quotaTotal:c,updateQuota:this.props.updateQuota,toggleDialog:this.toggleSetQuotaDialog}))}}]),a}(l.Component),K=H,W=a(114),J=window.org.pageOptions.orgID,$=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).state={loading:!0,errorMsg:""},r}return Object(r.a)(a,[{key:"componentDidMount",value:function(){var e=this;f.a.orgAdminGetOrgUserOwnedRepos(J,this.props.email).then((function(t){e.setState(Object.assign({loading:!1},t.data))})).catch((function(t){e.setState({loading:!1,errorMsg:E.a.getErrorMsg(t,!0)})}))}},{key:"render",value:function(){return i.a.createElement(l.Fragment,null,i.a.createElement(N,null),i.a.createElement("div",{className:"main-panel-center flex-row"},i.a.createElement("div",{className:"cur-view-container"},i.a.createElement(P,{email:this.props.email,currentItem:"owned-repos"}),i.a.createElement("div",{className:"cur-view-content"},i.a.createElement(X,{data:this.state})))))}}]),a}(l.Component),X=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){return Object(n.a)(this,a),t.call(this,e)}return Object(r.a)(a,[{key:"render",value:function(){var e=this.props.data,t=e.loading,a=e.errorMsg,n=e.repo_list;return t?i.a.createElement(F.a,null):a?i.a.createElement("p",{className:"error text-center"},a):i.a.createElement(l.Fragment,null,i.a.createElement("table",{className:"table-hover"},i.a.createElement("thead",null,i.a.createElement("tr",null,i.a.createElement("th",{width:"4%"}),i.a.createElement("th",{width:"35%"},Object(p.nb)("Name")),i.a.createElement("th",{width:"16%"},Object(p.nb)("Size")),i.a.createElement("th",{width:"25%"},Object(p.nb)("Last Update")),i.a.createElement("th",{width:"20%"}))),i.a.createElement("tbody",null,n.map((function(e,t){return i.a.createElement(Z,{key:t,data:e})})))))}}]),a}(l.Component),Z=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).handleMouseOver=function(){r.setState({isOpIconShown:!0})},r.handleMouseOut=function(){r.setState({isOpIconShown:!1})},r.handleDeleteIconClick=function(e){e.preventDefault(),r.toggleDeleteRepoDialog()},r.toggleDeleteRepoDialog=function(){r.setState({isDeleteRepoDialogOpen:!r.state.isDeleteRepoDialogOpen})},r.deleteRepo=function(){var e=r.props.data;f.a.orgAdminDeleteOrgRepo(J,e.repo_id).then((function(t){r.setState({deleted:!0,isRepoDeleted:!0});var a=Object(p.nb)("Successfully deleted {name}.").replace("{name}",e.repo_name);v.a.success(a)})).catch((function(e){var t=E.a.getErrorMsg(e);v.a.danger(t),r.setState({isRepoDeleted:!1})}))},r.state={isOpIconShown:!1,deleted:!1,isDeleteRepoDialogOpen:!1,isRepoDeleted:!1},r}return Object(r.a)(a,[{key:"render",value:function(){var e=this.state,t=e.deleted,a=e.isOpIconShown,n=e.isDeleteRepoDialogOpen,r=this.props.data;return t?null:i.a.createElement(l.Fragment,null,i.a.createElement("tr",{onMouseOver:this.handleMouseOver,onMouseOut:this.handleMouseOut},i.a.createElement("td",null,i.a.createElement("img",{src:E.a.getLibIconUrl(r,!1),alt:E.a.getLibIconTitle(r),title:E.a.getLibIconTitle(r),width:"24"})),i.a.createElement("td",null,r.repo_name),i.a.createElement("td",null,E.a.bytesToSize(r.size)),i.a.createElement("td",{title:_()(r.last_modified).format("LLLL")},_()(r.last_modified).format("YYYY-MM-DD")),i.a.createElement("td",null,i.a.createElement("a",{href:"#",className:"action-icon sf2-icon-delete".concat(a?"":" invisible"),title:Object(p.nb)("Delete"),onClick:this.handleDeleteIconClick}))),n&&i.a.createElement(W.a,{repo:r,isRepoDeleted:this.state.isRepoDeleted,onDeleteRepo:this.deleteRepo,toggle:this.toggleDeleteRepoDialog}))}}]),a}(l.Component),ee=$,te=window.org.pageOptions.orgID,ae=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).state={loading:!0,errorMsg:""},r}return Object(r.a)(a,[{key:"componentDidMount",value:function(){var e=this;f.a.orgAdminGetOrgUserBesharedRepos(te,this.props.email).then((function(t){e.setState(Object.assign({loading:!1},t.data))})).catch((function(t){e.setState({loading:!1,errorMsg:E.a.getErrorMsg(t,!0)})}))}},{key:"render",value:function(){return i.a.createElement(l.Fragment,null,i.a.createElement(N,null),i.a.createElement("div",{className:"main-panel-center flex-row"},i.a.createElement("div",{className:"cur-view-container"},i.a.createElement(P,{email:this.props.email,currentItem:"shared-repos"}),i.a.createElement("div",{className:"cur-view-content"},i.a.createElement(ne,{data:this.state})))))}}]),a}(l.Component),ne=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){return Object(n.a)(this,a),t.call(this,e)}return Object(r.a)(a,[{key:"render",value:function(){var e=this.props.data,t=e.loading,a=e.errorMsg,n=e.repo_list;return t?i.a.createElement(F.a,null):a?i.a.createElement("p",{className:"error text-center"},a):i.a.createElement("table",{className:"table-hover"},i.a.createElement("thead",null,i.a.createElement("tr",null,i.a.createElement("th",{width:"4%"}),i.a.createElement("th",{width:"30%"},Object(p.nb)("Name")),i.a.createElement("th",{width:"26%"},Object(p.nb)("Owner")),i.a.createElement("th",{width:"15%"},Object(p.nb)("Size")),i.a.createElement("th",{width:"25%"},Object(p.nb)("Last Update")))),i.a.createElement("tbody",null,n.map((function(e,t){return i.a.createElement(re,{key:t,data:e})}))))}}]),a}(l.Component),re=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){return Object(n.a)(this,a),t.call(this,e)}return Object(r.a)(a,[{key:"render",value:function(){var e=this.props.data;return i.a.createElement("tr",null,i.a.createElement("td",null,i.a.createElement("img",{src:E.a.getLibIconUrl(e,!1),alt:E.a.getLibIconTitle(e),title:E.a.getLibIconTitle(e),width:"24"})),i.a.createElement("td",null,e.repo_name),i.a.createElement("td",null,e.owner_name),i.a.createElement("td",null,E.a.bytesToSize(e.size)),i.a.createElement("td",{title:_()(e.last_modified).format("LLLL")},_()(e.last_modified).format("YYYY-MM-DD")))}}]),a}(l.Component),se=ae;_.a.locale(p.Bb);var oe=function e(t){Object(n.a)(this,e),this.id=t.id,this.groupName=t.group_name,this.creatorName=t.creator_name,this.creatorEmail=t.creator_email,this.creatorContactEmail=t.creator_contact_email,this.ctime=_()(t.ctime).format("YYYY-MM-DD HH:mm:ss")},le=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).initData=function(e){f.a.orgAdminListOrgGroups(p.Rb,e).then((function(e){var t=e.data.groups.map((function(e){return new oe(e)}));r.setState({orgGroups:t,pageNext:e.data.page_next,page:e.data.page})})).catch((function(e){var t=E.a.getErrorMsg(e);v.a.danger(t)}))},r.onChangePageNum=function(e,t){e.preventDefault();var a=r.state.page;1==t?a+=1:a-=1,r.initData(a)},r.onFreezedItem=function(){r.setState({isItemFreezed:!0})},r.onUnfreezedItem=function(){r.setState({isItemFreezed:!1})},r.deleteGroupItem=function(e){f.a.orgAdminDeleteOrgGroup(p.Rb,e.id).then((function(t){r.setState({orgGroups:r.state.orgGroups.filter((function(t){return t.id!=e.id}))});var a=Object(p.nb)("Successfully deleted {name}");a=a.replace("{name}",e.groupName),v.a.success(a)})).catch((function(e){var t=E.a.getErrorMsg(e);v.a.danger(t)}))},r.state={page:1,pageNext:!1,orgGroups:[],isItemFreezed:!1},r}return Object(r.a)(a,[{key:"componentDidMount",value:function(){var e=this.state.page;this.initData(e)}},{key:"render",value:function(){var e=this,t=this.state.orgGroups;return i.a.createElement(l.Fragment,null,i.a.createElement(N,null),i.a.createElement("div",{className:"main-panel-center flex-row"},i.a.createElement("div",{className:"cur-view-container"},i.a.createElement("div",{className:"cur-view-path"},i.a.createElement("h3",{className:"sf-heading"},Object(p.nb)("All Groups"))),i.a.createElement("div",{className:"cur-view-content"},i.a.createElement("table",null,i.a.createElement("thead",null,i.a.createElement("tr",null,i.a.createElement("th",{width:"30%"},Object(p.nb)("Name")),i.a.createElement("th",{width:"35%"},Object(p.nb)("Creator")),i.a.createElement("th",{width:"23%"},Object(p.nb)("Created At")),i.a.createElement("th",{width:"12%",className:"text-center"},Object(p.nb)("Operations")))),i.a.createElement("tbody",null,t.map((function(t){return i.a.createElement(ie,{key:t.id,group:t,isItemFreezed:e.state.isItemFreezed,onFreezedItem:e.onFreezedItem,onUnfreezedItem:e.onUnfreezedItem,deleteGroupItem:e.deleteGroupItem})})))),i.a.createElement("div",{className:"paginator"},1!=this.state.page&&i.a.createElement("a",{href:"#",onClick:function(t){return e.onChangePageNum(t,-1)}},Object(p.nb)("Previous")),1!=this.state.page&&this.state.pageNext&&i.a.createElement("span",null," | "),this.state.pageNext&&i.a.createElement("a",{href:"#",onClick:function(t){return e.onChangePageNum(t,1)}},Object(p.nb)("Next")))))))}}]),a}(l.Component),ie=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).onMouseEnter=function(){r.props.isItemFreezed||r.setState({showMenu:!0,highlight:!0})},r.onMouseLeave=function(){r.props.isItemFreezed||r.setState({showMenu:!1,highlight:!1})},r.onDropdownToggleClick=function(e){e.preventDefault(),r.toggleOperationMenu(e)},r.toggleOperationMenu=function(e){e.stopPropagation(),r.setState({isItemMenuShow:!r.state.isItemMenuShow},(function(){r.state.isItemMenuShow?r.props.onFreezedItem():(r.setState({highlight:!1,showMenu:!1}),r.props.onUnfreezedItem())}))},r.toggleDelete=function(){r.props.deleteGroupItem(r.props.group)},r.renderGroupHref=function(e){return"system admin"==e.creatorName?p.lc+"org/departmentadmin/groups/"+e.id+"/":p.lc+"org/groupadmin/"+e.id+"/"},r.renderGroupCreator=function(e){var t=p.lc+"org/useradmin/info/"+e.creatorEmail+"/";return"system admin"==e.creatorName?i.a.createElement("td",null," -- "):i.a.createElement("td",null,i.a.createElement("a",{href:t,className:"font-weight-normal"},e.creatorName))},r.state={highlight:!1,showMenu:!1,isItemMenuShow:!1},r}return Object(r.a)(a,[{key:"render",value:function(){var e=this.props.group,t="system admin"!=e.creatorName&&this.state.showMenu;return i.a.createElement("tr",{className:this.state.highlight?"tr-highlight":"",onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave},i.a.createElement("td",null,i.a.createElement("a",{href:this.renderGroupHref(e),className:"font-weight-normal"},e.groupName)),this.renderGroupCreator(e),i.a.createElement("td",null,e.ctime),i.a.createElement("td",{className:"text-center cursor-pointer"},t&&i.a.createElement(b.l,{isOpen:this.state.isItemMenuShow,toggle:this.toggleOperationMenu},i.a.createElement(b.o,{tag:"a",className:"attr-action-icon fas fa-ellipsis-v",title:Object(p.nb)("More Operations"),"data-toggle":"dropdown","aria-expanded":this.state.isItemMenuShow,onClick:this.onDropdownToggleClick}),i.a.createElement(b.n,null,i.a.createElement(b.m,{onClick:this.toggleDelete},Object(p.nb)("Delete"))))))}}]),a}(i.a.Component),ce=le,me=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(){return Object(n.a)(this,a),t.apply(this,arguments)}return Object(r.a)(a,[{key:"render",value:function(){var e=this.props,t=e.groupID,a=e.currentItem,n="".concat(p.lc,"org/groupadmin/").concat(t,"/");return i.a.createElement("div",{className:"cur-view-path org-admin-user-nav"},i.a.createElement("ul",{className:"nav"},i.a.createElement("li",{className:"nav-item"},i.a.createElement(u.a,{to:n,className:"nav-link".concat("info"==a?" active":"")},Object(p.nb)("Group Info"))),i.a.createElement("li",{className:"nav-item"},i.a.createElement(u.a,{to:"".concat(n,"repos/"),className:"nav-link".concat("repos"==a?" active":"")},Object(p.nb)("Libraries"))),i.a.createElement("li",{className:"nav-item"},i.a.createElement(u.a,{to:"".concat(n,"members/"),className:"nav-link".concat("members"==a?" active":"")},Object(p.nb)("Members")))))}}]),a}(i.a.Component),ue=window.org.pageOptions.orgID,pe=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).state={loading:!0,errorMsg:""},r}return Object(r.a)(a,[{key:"componentDidMount",value:function(){var e=this;f.a.orgAdminGetGroup(ue,this.props.groupID).then((function(t){e.setState(Object.assign({loading:!1},t.data))})).catch((function(t){e.setState({loading:!1,errorMsg:E.a.getErrorMsg(t,!0)})}))}},{key:"render",value:function(){return i.a.createElement(l.Fragment,null,i.a.createElement(N,null),i.a.createElement("div",{className:"main-panel-center flex-row"},i.a.createElement("div",{className:"cur-view-container"},i.a.createElement(me,{groupID:this.props.groupID,currentItem:"info"}),i.a.createElement("div",{className:"cur-view-content"},i.a.createElement(de,{data:this.state})))))}}]),a}(l.Component),de=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).state={},r}return Object(r.a)(a,[{key:"render",value:function(){var e=this.props.data,t=e.loading,a=e.errorMsg,n=e.group_name,r=e.creator_email,s=e.creator_name;return t?i.a.createElement(F.a,null):a?i.a.createElement("p",{className:"error text-center mt-2"},a):i.a.createElement("dl",null,i.a.createElement("dt",null,Object(p.nb)("Name")),i.a.createElement("dd",null,n),i.a.createElement("dt",null,Object(p.nb)("Creator")),i.a.createElement("dd",null,i.a.createElement(u.a,{to:"".concat(p.lc,"org/useradmin/info/").concat(encodeURIComponent(r),"/")},s)))}}]),a}(l.Component),ge=pe,he=window.org.pageOptions.orgID,be=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).state={loading:!0,errorMsg:""},r}return Object(r.a)(a,[{key:"componentDidMount",value:function(){var e=this;f.a.orgAdminListGroupRepos(he,this.props.groupID).then((function(t){e.setState(Object.assign({loading:!1},t.data))})).catch((function(t){e.setState({loading:!1,errorMsg:E.a.getErrorMsg(t,!0)})}))}},{key:"render",value:function(){return i.a.createElement(l.Fragment,null,i.a.createElement(N,null),i.a.createElement("div",{className:"main-panel-center flex-row"},i.a.createElement("div",{className:"cur-view-container"},i.a.createElement(me,{groupID:this.props.groupID,currentItem:"repos"}),i.a.createElement("div",{className:"cur-view-content"},i.a.createElement(fe,{data:this.state})))))}}]),a}(l.Component),fe=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){return Object(n.a)(this,a),t.call(this,e)}return Object(r.a)(a,[{key:"render",value:function(){var e=this.props.data,t=e.loading,a=e.errorMsg,n=e.libraries;return t?i.a.createElement(F.a,null):a?i.a.createElement("p",{className:"error text-center mt-2"},a):i.a.createElement(l.Fragment,null,i.a.createElement("table",{className:"table-hover"},i.a.createElement("thead",null,i.a.createElement("tr",null,i.a.createElement("th",{width:"4%"}),i.a.createElement("th",{width:"35%"},Object(p.nb)("Name")),i.a.createElement("th",{width:"20%"},Object(p.nb)("Size")),i.a.createElement("th",{width:"26%"},Object(p.nb)("Shared By")),i.a.createElement("th",{width:"15%"}))),i.a.createElement("tbody",null,n.map((function(e,t){return i.a.createElement(Ee,{key:t,data:e})})))))}}]),a}(l.Component),Ee=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).handleMouseOver=function(){r.setState({isOpIconShown:!0})},r.handleMouseOut=function(){r.setState({isOpIconShown:!1})},r.handleDeleteIconClick=function(e){e.preventDefault(),r.toggleDeleteRepoDialog()},r.toggleDeleteRepoDialog=function(){r.setState({isDeleteRepoDialogOpen:!r.state.isDeleteRepoDialogOpen})},r.deleteRepo=function(){var e=r.props.data;f.a.orgAdminDeleteOrgRepo(he,e.repo_id).then((function(t){r.setState({deleted:!0,isRepoDeleted:!0});var a=Object(p.nb)("Successfully deleted {name}.").replace("{name}",e.name);v.a.success(a)})).catch((function(e){var t=E.a.getErrorMsg(e);v.a.danger(t),r.setState({isRepoDeleted:!1})}))},r.state={isOpIconShown:!1,deleted:!1,isDeleteRepoDialogOpen:!1,isRepoDeleted:!1},r}return Object(r.a)(a,[{key:"render",value:function(){var e=this.state,t=e.deleted,a=e.isOpIconShown,n=e.isDeleteRepoDialogOpen,r=this.props.data;return t?null:i.a.createElement(l.Fragment,null,i.a.createElement("tr",{onMouseOver:this.handleMouseOver,onMouseOut:this.handleMouseOut},i.a.createElement("td",null,i.a.createElement("img",{src:E.a.getLibIconUrl(r,!1),alt:E.a.getLibIconTitle(r),title:E.a.getLibIconTitle(r),width:"24"})),i.a.createElement("td",null,r.name),i.a.createElement("td",null,E.a.bytesToSize(r.size)),i.a.createElement("td",null,i.a.createElement(u.a,{to:"".concat(p.lc,"org/useradmin/info/").concat(encodeURIComponent(r.shared_by),"/")},r.shared_by_name)),i.a.createElement("td",null,i.a.createElement("a",{href:"#",className:"action-icon sf2-icon-delete".concat(a?"":" invisible"),title:Object(p.nb)("Delete"),onClick:this.handleDeleteIconClick}))),n&&i.a.createElement(W.a,{repo:r,isRepoDeleted:this.state.isRepoDeleted,onDeleteRepo:this.deleteRepo,toggle:this.toggleDeleteRepoDialog}))}}]),a}(l.Component),ve=be,Oe=window.org.pageOptions.orgID,we=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).state={loading:!0,errorMsg:""},r}return Object(r.a)(a,[{key:"componentDidMount",value:function(){var e=this;f.a.orgAdminListGroupMembers(Oe,this.props.groupID).then((function(t){e.setState(Object.assign({loading:!1},t.data))})).catch((function(t){e.setState({loading:!1,errorMsg:E.a.getErrorMsg(t,!0)})}))}},{key:"render",value:function(){return i.a.createElement(l.Fragment,null,i.a.createElement(N,null),i.a.createElement("div",{className:"main-panel-center flex-row"},i.a.createElement("div",{className:"cur-view-container"},i.a.createElement(me,{groupID:this.props.groupID,currentItem:"members"}),i.a.createElement("div",{className:"cur-view-content"},i.a.createElement(De,{data:this.state})))))}}]),a}(l.Component),De=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){return Object(n.a)(this,a),t.call(this,e)}return Object(r.a)(a,[{key:"render",value:function(){var e=this.props.data,t=e.loading,a=e.errorMsg,n=e.members;return t?i.a.createElement(F.a,null):a?i.a.createElement("p",{className:"error text-center mt-2"},a):i.a.createElement(l.Fragment,null,i.a.createElement("table",{className:"table-hover"},i.a.createElement("thead",null,i.a.createElement("tr",null,i.a.createElement("th",{width:"10%"}),i.a.createElement("th",{width:"50%"},Object(p.nb)("Name")),i.a.createElement("th",{width:"40%"},Object(p.nb)("Role")))),i.a.createElement("tbody",null,n.map((function(e,t){return i.a.createElement(je,{key:t,data:e})})))))}}]),a}(l.Component),je=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){return Object(n.a)(this,a),t.call(this,e)}return Object(r.a)(a,[{key:"getRoleText",value:function(){switch(this.props.data.role){case"Owner":return Object(p.nb)("Owner");case"Admin":return Object(p.nb)("Admin");case"Member":return Object(p.nb)("Member")}}},{key:"render",value:function(){var e=this.props.data;return i.a.createElement(l.Fragment,null,i.a.createElement("tr",null,i.a.createElement("td",{className:"text-center"},i.a.createElement("img",{src:e.avatar_url,alt:"",className:"avatar",width:"32"})),i.a.createElement("td",null,i.a.createElement(u.a,{to:"".concat(p.lc,"org/useradmin/info/").concat(encodeURIComponent(e.email),"/")},e.name)),i.a.createElement("td",null,this.getRoleText())))}}]),a}(l.Component),Se=we,Ne=function e(t){Object(n.a)(this,e),this.repoID=t.repo_id,this.repoName=t.repo_name,this.ownerName=t.owner_name,this.ownerEmail=t.owner_email,this.size=t.size,this.file_count=t.file_count,this.encrypted=t.encrypted,this.isDepartmentRepo=t.is_department_repo,this.groupID=t.group_id},Ce=a(141),Ie=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).listRepos=function(e){f.a.orgAdminListOrgRepos(p.Rb,e,r.state.sortBy).then((function(e){var t=e.data.repo_list.map((function(e){return new Ne(e)}));r.setState({orgRepos:t,pageNext:e.data.page_next,page:e.data.page})})).catch((function(e){var t=E.a.getErrorMsg(e);v.a.danger(t)}))},r.onChangePageNum=function(e,t){e.preventDefault();var a=r.state.page;1==t?a+=1:a-=1,r.listRepos(a)},r.onFreezedItem=function(){r.setState({isItemFreezed:!0})},r.onUnfreezedItem=function(){r.setState({isItemFreezed:!1})},r.deleteRepoItem=function(e){f.a.orgAdminDeleteOrgRepo(p.Rb,e.repoID).then((function(t){r.setState({orgRepos:r.state.orgRepos.filter((function(t){return t.repoID!=e.repoID}))});var a=Object(p.nb)("Successfully deleted {name}");a=a.replace("{name}",e.repoName),v.a.success(a)})).catch((function(e){var t=E.a.getErrorMsg(e);v.a.danger(t)}))},r.transferRepoItem=function(e,t){r.setState({orgRepos:r.state.orgRepos.map((function(a){return a.repoID==e&&(a.ownerEmail=t.email,a.ownerName=t.value),a}))})},r.sortItems=function(e){r.setState({page:1,sortBy:e},(function(){var e=new URL(location.href),t=new URLSearchParams(e.search),a=r.state,n=a.page,s=a.sortBy;t.set("page",n),t.set("order_by",s),e.search=t.toString(),Object(u.c)(e.toString()),r.listRepos(n)}))},r.sortByFileCount=function(e){e.preventDefault(),r.sortItems("file_count")},r.sortBySize=function(e){e.preventDefault(),r.sortItems("size")},r.state={page:1,pageNext:!1,orgRepos:[],sortBy:"",isItemFreezed:!1},r}return Object(r.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=new URL(window.location).searchParams,a=this.state,n=a.page,r=a.sortBy;this.setState({sortBy:t.get("order_by")||r,page:parseInt(t.get("page")||n)},(function(){e.listRepos(e.state.page)}))}},{key:"render",value:function(){var e=this,t=this.state,a=t.orgRepos,n=t.sortBy,r=i.a.createElement("span",{className:"fas fa-sort"}),s=i.a.createElement("span",{className:"fas fa-caret-down"});return i.a.createElement(l.Fragment,null,i.a.createElement(N,null),i.a.createElement("div",{className:"main-panel-center flex-row"},i.a.createElement("div",{className:"cur-view-container"},i.a.createElement("div",{className:"cur-view-path"},i.a.createElement("h3",{className:"sf-heading"},Object(p.nb)("All Libraries"))),i.a.createElement("div",{className:"cur-view-content"},i.a.createElement("table",null,i.a.createElement("thead",null,i.a.createElement("tr",null,i.a.createElement("th",{width:"5%"}),i.a.createElement("th",{width:"25%"},Object(p.nb)("Name")),i.a.createElement("th",{width:"15%"},i.a.createElement("a",{className:"d-inline-block table-sort-op",href:"#",onClick:this.sortByFileCount},Object(p.nb)("Files")," ","file_count"==n?s:r)," / ",i.a.createElement("a",{className:"d-inline-block table-sort-op",href:"#",onClick:this.sortBySize},Object(p.nb)("Size")," ","size"==n?s:r)),i.a.createElement("th",{width:"32%"},"ID"),i.a.createElement("th",{width:"18%"},Object(p.nb)("Owner")),i.a.createElement("th",{width:"5%"}))),i.a.createElement("tbody",null,a.map((function(t){return i.a.createElement(Me,{key:t.repoID,repo:t,isItemFreezed:e.state.isItemFreezed,onFreezedItem:e.onFreezedItem,onUnfreezedItem:e.onUnfreezedItem,deleteRepoItem:e.deleteRepoItem,transferRepoItem:e.transferRepoItem})})))),i.a.createElement("div",{className:"paginator"},1!=this.state.page&&i.a.createElement("a",{href:"#",onClick:function(t){return e.onChangePageNum(t,-1)}},Object(p.nb)("Previous")),1!=this.state.page&&this.state.pageNext&&i.a.createElement("span",null," | "),this.state.pageNext&&i.a.createElement("a",{href:"#",onClick:function(t){return e.onChangePageNum(t,1)}},Object(p.nb)("Next")))))))}}]),a}(l.Component),Me=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).onMouseEnter=function(){r.props.isItemFreezed||r.setState({showMenu:!0,highlight:!0})},r.onMouseLeave=function(){r.props.isItemFreezed||r.setState({showMenu:!1,highlight:!1})},r.onDropdownToggleClick=function(e){e.preventDefault(),r.toggleOperationMenu(e)},r.toggleOperationMenu=function(e){e.stopPropagation(),r.setState({isItemMenuShow:!r.state.isItemMenuShow},(function(){r.state.isItemMenuShow?r.props.onFreezedItem():(r.setState({highlight:!1,showMenu:!1}),r.props.onUnfreezedItem())}))},r.toggleDelete=function(){r.props.deleteRepoItem(r.props.repo)},r.toggleTransfer=function(){r.props.transferRepoItem(r.props.repo)},r.renderLibIcon=function(e){var t,a;return e.encrypted?(t=p.Mb+"img/lib/48/lib-encrypted.png",a=Object(p.nb)("Encrypted library")):(t=p.Mb+"img/lib/48/lib.png",a=Object(p.nb)("Read-Write library")),i.a.createElement("img",{src:t,title:a,alt:a,width:"24"})},r.renderRepoOwnerHref=function(e){return e.isDepartmentRepo?p.lc+"org/admin/#address-book/groups/"+e.groupID+"/":p.lc+"org/useradmin/info/"+e.ownerEmail+"/"},r.toggleTransfer=function(){r.setState({isTransferDialogShow:!r.state.isTransferDialogShow})},r.onTransferRepo=function(e){var t=r.props.repo;f.a.orgAdminTransferOrgRepo(p.Rb,t.repoID,e.email).then((function(a){r.props.transferRepoItem(t.repoID,e);var n=Object(p.nb)("Successfully transferred the library.");v.a.success(n)})).catch((function(e){var t=E.a.getErrorMsg(e);v.a.danger(t)})),r.toggleTransfer()},r.state={highlight:!1,showMenu:!1,isItemMenuShow:!1,isTransferDialogShow:!1},r}return Object(r.a)(a,[{key:"render",value:function(){var e=this.props.repo,t=this.state.showMenu&&!e.isDepartmentRepo;return i.a.createElement(l.Fragment,null,i.a.createElement("tr",{className:this.state.highlight?"tr-highlight":"",onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave},i.a.createElement("td",null,this.renderLibIcon(e)),i.a.createElement("td",null,e.repoName),i.a.createElement("td",null,"".concat(e.file_count," / ").concat(E.a.bytesToSize(e.size))),i.a.createElement("td",null,e.repoID),i.a.createElement("td",null,i.a.createElement("a",{href:this.renderRepoOwnerHref(e)},e.ownerName)),i.a.createElement("td",{className:"text-center cursor-pointer"},t&&i.a.createElement(b.l,{isOpen:this.state.isItemMenuShow,toggle:this.toggleOperationMenu},i.a.createElement(b.o,{tag:"a",className:"attr-action-icon fas fa-ellipsis-v",title:Object(p.nb)("More Operations"),"data-toggle":"dropdown","aria-expanded":this.state.isItemMenuShow,onClick:this.onDropdownToggleClick}),i.a.createElement(b.n,null,i.a.createElement(b.m,{onClick:this.toggleDelete},Object(p.nb)("Delete")),i.a.createElement(b.m,{onClick:this.toggleTransfer},Object(p.nb)("Transfer")))))),this.state.isTransferDialogShow&&i.a.createElement(C.a,null,i.a.createElement(Ce.a,{itemName:e.repoName,submit:this.onTransferRepo,toggleDialog:this.toggleTransfer})))}}]),a}(i.a.Component),ye=Ie,ke=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).state={storage_quota:0,storage_usage:0,member_quota:0,member_usage:0,active_members:0},r}return Object(r.a)(a,[{key:"componentDidMount",value:function(){var e=this;f.a.orgAdminGetOrgInfo().then((function(t){e.setState({storage_quota:t.data.storage_quota,storage_usage:t.data.storage_usage,member_quota:t.data.member_quota,member_usage:t.data.member_usage,active_members:t.data.active_members})}))}},{key:"render",value:function(){return i.a.createElement(l.Fragment,null,i.a.createElement(N,null),i.a.createElement("div",{className:"main-panel-center flex-row"},i.a.createElement("div",{className:"cur-view-container"},i.a.createElement("div",{className:"cur-view-path"},i.a.createElement("h3",{className:"sf-heading"},Object(p.nb)("Info"))),i.a.createElement("div",{className:"cur-view-content"},i.a.createElement("dl",null,i.a.createElement("dt",null,Object(p.nb)("Space Used")),this.state.storage_quota>0?i.a.createElement("dd",null,E.a.bytesToSize(this.state.storage_usage)," / ",E.a.bytesToSize(this.state.storage_quota)):i.a.createElement("dd",null,E.a.bytesToSize(this.state.storage_usage)),p.Sb?i.a.createElement("dt",null,Object(p.nb)("Active Users")," / ",Object(p.nb)("Total Users")," / ",Object(p.nb)("Limits")):i.a.createElement("dt",null,Object(p.nb)("Active Users")," / ",Object(p.nb)("Total Users")),p.Sb?i.a.createElement("dd",null,this.state.active_members>0?this.state.active_members:"--"," / ",this.state.member_usage>0?this.state.member_usage:"--"," / ",this.state.member_quota>0?this.state.member_quota:"--"):i.a.createElement("dd",null,this.state.active_members>0?this.state.active_members:"--"," / ",this.state.member_usage>0?this.state.member_usage:"--"))))))}}]),a}(l.Component),_e=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).copyToClipBoard=function(){Object(M.a)(r.props.currentLinkHref);var e=Object(p.nb)("Link has been copied to clipboard");v.a.success(e),r.props.toggle()},r}return Object(r.a)(a,[{key:"render",value:function(){var e=this.props.currentLinkHref;return i.a.createElement(b.x,{isOpen:!0,toggle:this.props.toggle},i.a.createElement(b.A,{toggle:this.props.toggle},Object(p.nb)("Link")),i.a.createElement(b.y,null,i.a.createElement("p",null,i.a.createElement("a",{target:"_blank",href:e},e))),i.a.createElement(b.z,null,i.a.createElement(b.c,{color:"secondary",onClick:this.props.toggle},Object(p.nb)("Cancel"))," ",i.a.createElement(b.c,{color:"primary",onClick:this.copyToClipBoard},Object(p.nb)("Copy"))))}}]),a}(i.a.Component),Ae=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).listOrgLinks=function(e){f.a.orgAdminListOrgLinks(r.state.page).then((function(e){var t=e.data;r.setState({linkList:t.link_list,page:t.page,pageNext:t.page_next})}))},r.onFreezedItem=function(){r.setState({isItemFreezed:!0})},r.onUnfreezedItem=function(){r.setState({isItemFreezed:!1})},r.onChangePageNum=function(e,t){e.preventDefault();var a=r.state.page;1==t?a+=1:a-=1,r.listOrgLinks(a)},r.deleteOrgLink=function(e){f.a.orgAdminDeleteOrgLink(e).then((function(e){!0===e.data.success&&r.listOrgLinks(r.state.page)})).catch((function(e){var t=E.a.getErrorMsg(e);v.a.danger(t)}))},r.openLinkDialog=function(e){var t;t=e.name.indexOf("/")>-1?p.cc+"/d/"+e.token+"/":p.cc+"/f/"+e.token+"/",r.setState({currentLinkHref:t}),r.toggleLinkDialog()},r.toggleLinkDialog=function(){r.setState({isShowLinkDialog:!r.state.isShowLinkDialog})},r.state={linkList:null,page:1,pageNext:!1,isItemFreezed:!1,isShowLinkDialog:!1,currentLinkHref:""},r}return Object(r.a)(a,[{key:"componentDidMount",value:function(){this.listOrgLinks(this.state.page)}},{key:"render",value:function(){var e=this,t=this.state.linkList;return i.a.createElement(l.Fragment,null,i.a.createElement(N,null),i.a.createElement("div",{className:"main-panel-center flex-row"},i.a.createElement("div",{className:"cur-view-container"},i.a.createElement("div",{className:"cur-view-path"},i.a.createElement("h3",{className:"sf-heading"},Object(p.nb)("All Public Links"))),i.a.createElement("div",{className:"cur-view-content"},i.a.createElement("table",null,i.a.createElement("thead",null,i.a.createElement("tr",null,i.a.createElement("th",{width:"50%"},Object(p.nb)("Name")),i.a.createElement("th",{width:"15%"},Object(p.nb)("Owner")),i.a.createElement("th",{width:"15%"},Object(p.nb)("Created At")),i.a.createElement("th",{width:"10%"},Object(p.nb)("Count")),i.a.createElement("th",{width:"10%"}))),i.a.createElement("tbody",null,t&&t.map((function(t,a){return i.a.createElement(i.a.Fragment,{key:a},i.a.createElement(Re,{link:t,isItemFreezed:e.state.isItemFreezed,onFreezedItem:e.onFreezedItem,onUnfreezedItem:e.onUnfreezedItem,deleteOrgLink:e.deleteOrgLink,openLinkDialog:e.openLinkDialog}))})))),i.a.createElement("div",{className:"paginator"},1!=this.state.page&&i.a.createElement("a",{href:"#",onClick:function(t){return e.onChangePageNum(t,-1)}},Object(p.nb)("Previous")),1!=this.state.page&&this.state.pageNext&&i.a.createElement("span",null," | "),this.state.pageNext&&i.a.createElement("a",{href:"#",onClick:function(t){return e.onChangePageNum(t,1)}},Object(p.nb)("Next")))))),this.state.isShowLinkDialog&&i.a.createElement(_e,{currentLinkHref:this.state.currentLinkHref,toggle:this.toggleLinkDialog}))}}]),a}(i.a.Component),Re=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).onMouseEnter=function(){r.props.isItemFreezed||r.setState({showMenu:!0,highlight:!0})},r.onMouseLeave=function(){r.props.isItemFreezed||r.setState({showMenu:!1,highlight:!1})},r.onDropdownToggleClick=function(e){e.preventDefault(),r.toggleOperationMenu(e)},r.toggleOperationMenu=function(e){e.stopPropagation(),r.setState({isItemMenuShow:!r.state.isItemMenuShow},(function(){r.state.isItemMenuShow?r.props.onFreezedItem():(r.setState({highlight:!1,showMenu:!1}),r.props.onUnfreezedItem())}))},r.state={highlight:!1,showMenu:!1,isItemMenuShow:!1},r}return Object(r.a)(a,[{key:"render",value:function(){var e=this.props,t=e.link,a=e.deleteOrgLink,n=p.lc+"org/useradmin/info/"+encodeURIComponent(t.owner_email)+"/";return i.a.createElement("tr",{className:this.state.highlight?"tr-highlight":"",onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave},i.a.createElement("td",null,t.name),i.a.createElement("td",null,i.a.createElement("a",{href:n},t.owner_name)),i.a.createElement("td",null,_()(t.created_time).fromNow()),i.a.createElement("td",null,t.view_count),i.a.createElement("td",{className:"cursor-pointer text-center"},this.state.showMenu&&i.a.createElement(b.l,{isOpen:this.state.isItemMenuShow,toggle:this.toggleOperationMenu},i.a.createElement(b.o,{tag:"a",className:"attr-action-icon fas fa-ellipsis-v",title:Object(p.nb)("More Operations"),"data-toggle":"dropdown","aria-expanded":this.state.isItemMenuShow,onClick:this.onDropdownToggleClick}),i.a.createElement(b.n,null,i.a.createElement(b.m,{onClick:a.bind(this,t.token)},Object(p.nb)("Delete")),i.a.createElement(b.m,{onClick:this.props.openLinkDialog.bind(this,t)},Object(p.nb)("View Link"))))))}}]),a}(i.a.Component),Ue=Ae,Le=(a(160),function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){return Object(n.a)(this,a),t.call(this,e)}return Object(r.a)(a,[{key:"render",value:function(){return i.a.createElement("div",{className:"h-100 org-departments"},this.props.children)}}]),a}(i.a.Component)),ze=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).handleSubmit=function(){if(r.validateName()){var e=-1;r.props.parentGroupID&&(e=r.props.parentGroupID),f.a.orgAdminAddDepartGroup(p.Rb,e,r.state.departName.trim()).then((function(e){r.props.toggle(),r.props.onDepartChanged()})).catch((function(e){var t=Object(p.nb)(e.response.data.error_msg);r.setState({errMessage:t})}))}},r.validateName=function(){var e="";return!!r.state.departName.trim().length||(e=Object(p.nb)("Name is required"),r.setState({errMessage:e}),!1)},r.handleChange=function(e){r.setState({departName:e.target.value})},r.handleKeyPress=function(e){"Enter"===e.key&&(r.handleSubmit(),e.preventDefault())},r.state={departName:"",errMessage:""},r.newInput=i.a.createRef(),r}return Object(r.a)(a,[{key:"componentDidMount",value:function(){this.newInput.focus(),this.newInput.setSelectionRange(0,0)}},{key:"render",value:function(){var e=this,t=this.props.parentGroupID?Object(p.nb)("New Sub-department"):Object(p.nb)("New Department");return i.a.createElement(b.x,{isOpen:!0,toggle:this.props.toggle},i.a.createElement(b.A,{toggle:this.props.toggle},t),i.a.createElement(b.y,null,i.a.createElement(b.p,null,i.a.createElement(b.q,null,i.a.createElement(b.w,{for:"departName"},Object(p.nb)("Name")),i.a.createElement(b.s,{id:"departName",onKeyPress:this.handleKeyPress,value:this.state.departName,onChange:this.handleChange,innerRef:function(t){e.newInput=t}}))),this.state.errMessage&&i.a.createElement("p",{className:"error"},this.state.errMessage)),i.a.createElement(b.z,null,i.a.createElement(b.c,{color:"primary",onClick:this.handleSubmit},Object(p.nb)("Submit"))))}}]),a}(i.a.Component),xe=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).deleteDepart=function(){r.props.toggle(),f.a.orgAdminDeleteDepartGroup(p.Rb,r.props.groupID).then((function(e){r.props.onDepartChanged()})).catch((function(e){var t=E.a.getErrorMsg(e);v.a.danger(t)}))},r}return Object(r.a)(a,[{key:"render",value:function(){var e=Object(p.nb)("Are you sure you want to delete {placeholder} ?");return e=e.replace("{placeholder}",'<span class="op-target">'+E.a.HTMLescape(this.props.groupName)+"</span>"),i.a.createElement(b.x,{isOpen:!0,toggle:this.props.toggle},i.a.createElement(b.A,{toggle:this.props.toggle},Object(p.nb)("Delete Department")),i.a.createElement(b.y,null,i.a.createElement("p",{dangerouslySetInnerHTML:{__html:e}})),i.a.createElement(b.z,null,i.a.createElement(b.c,{color:"secondary",onClick:this.props.toggle},Object(p.nb)("Cancel")),i.a.createElement(b.c,{color:"primary",onClick:this.deleteDepart},Object(p.nb)("Delete"))))}}]),a}(i.a.Component),Fe=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).setGroupQuota=function(){var e=r.state.quota;if(e.length&&/^[1-9]\d*$/im.test(e)||-2==e){r.setState({errMessage:""});var t=-2==r.state.quota?r.state.quota:1e6*r.state.quota;f.a.orgAdminSetGroupQuota(p.Rb,r.props.groupID,t).then((function(e){r.props.toggle(),r.props.onDepartChanged()})).catch((function(e){var t=E.a.getErrorMsg(e);v.a.danger(t)}))}else{var a=Object(p.nb)("Quota is invalid.");r.setState({errMessage:a})}},r.handleChange=function(e){var t=e.target.value.trim();r.setState({quota:t})},r.handleKeyPress=function(e){"Enter"===e.key&&(r.setGroupQuota(),e.preventDefault())},r.state={quota:"",errMessage:""},r.newInput=i.a.createRef(),r}return Object(r.a)(a,[{key:"componentDidMount",value:function(){this.newInput.focus(),this.newInput.setSelectionRange(0,0)}},{key:"render",value:function(){var e=this;return i.a.createElement(b.x,{isOpen:!0,toggle:this.props.toggle},i.a.createElement(b.A,{toggle:this.props.toggle},Object(p.nb)("Set Quota")),i.a.createElement(b.y,null,i.a.createElement(b.t,null,i.a.createElement(b.s,{onKeyPress:this.handleKeyPress,value:this.state.quota,onChange:this.handleChange,innerRef:function(t){e.newInput=t}}),i.a.createElement(b.u,{addonType:"append"},"MB")),i.a.createElement("p",{className:"tip"},i.a.createElement("br",null),i.a.createElement("span",null,Object(p.nb)("An integer that is greater than 0 or equal to -2.")),i.a.createElement("br",null),i.a.createElement("span",null,Object(p.nb)("Tip: -2 means no limit."))),this.state.errMessage&&i.a.createElement("p",{className:"error"},this.state.errMessage)),i.a.createElement(b.z,null,i.a.createElement(b.c,{color:"primary",onClick:this.setGroupQuota},Object(p.nb)("Submit"))))}}]),a}(i.a.Component);_.a.locale(p.Bb);var Pe=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).listDepartGroups=function(){f.a.orgAdminListDepartGroups(p.Rb).then((function(e){r.setState({groups:e.data.data})}))},r.showDeleteDepartDialog=function(e){r.setState({showDeleteDepartDialog:!0,groupID:e.id,groupName:e.name})},r.showSetGroupQuotaDialog=function(e){r.setState({showSetGroupQuotaDialog:!0,groupID:e})},r.toggleAddDepartDialog=function(){r.setState({isShowAddDepartDialog:!r.state.isShowAddDepartDialog})},r.toggleCancel=function(){r.setState({showDeleteDepartDialog:!1,showSetGroupQuotaDialog:!1})},r.onDepartChanged=function(){r.listDepartGroups()},r.state={groups:null,groupID:"",groupName:"",showDeleteDepartDialog:!1,showSetGroupQuotaDialog:!1,isShowAddDepartDialog:!1},r}return Object(r.a)(a,[{key:"componentDidMount",value:function(){this.listDepartGroups()}},{key:"render",value:function(){var e=this,t=this.state.groups,a=i.a.createElement(l.Fragment,null,i.a.createElement("button",{className:"btn btn-secondary operation-item",title:Object(p.nb)("New Department"),onClick:this.toggleAddDepartDialog},Object(p.nb)("New Department")),this.state.isShowAddDepartDialog&&i.a.createElement(C.a,null,i.a.createElement(ze,{onDepartChanged:this.onDepartChanged,groupID:this.state.groupID,toggle:this.toggleAddDepartDialog})));return i.a.createElement(l.Fragment,null,i.a.createElement(N,{children:a}),i.a.createElement("div",{className:"main-panel-center flex-row h-100"},i.a.createElement("div",{className:"cur-view-container o-auto"},i.a.createElement("div",{className:"cur-view-path"},i.a.createElement("div",{className:"fleft"},i.a.createElement("h3",{className:"sf-heading"},Object(p.nb)("Departments")))),i.a.createElement("div",{className:"cur-view-content"},t&&t.length>0?i.a.createElement("table",null,i.a.createElement("thead",null,i.a.createElement("tr",null,i.a.createElement("th",{width:"40%"},Object(p.nb)("Name")),i.a.createElement("th",{width:"25%"},Object(p.nb)("Created At")),i.a.createElement("th",{width:"20%"},Object(p.nb)("Quota")),i.a.createElement("th",{width:"15%"}))),i.a.createElement("tbody",null,t.map((function(t,a){return i.a.createElement(i.a.Fragment,{key:t.id},i.a.createElement(Te,{group:t,showDeleteDepartDialog:e.showDeleteDepartDialog,showSetGroupQuotaDialog:e.showSetGroupQuotaDialog}))})))):i.a.createElement("p",{className:"no-group"},Object(p.nb)("No departments"))),i.a.createElement(i.a.Fragment,null,this.state.showDeleteDepartDialog&&i.a.createElement(C.a,null,i.a.createElement(xe,{toggle:this.toggleCancel,groupID:this.state.groupID,groupName:this.state.groupName,onDepartChanged:this.onDepartChanged})),this.state.showSetGroupQuotaDialog&&i.a.createElement(C.a,null,i.a.createElement(Fe,{toggle:this.toggleCancel,groupID:this.state.groupID,onDepartChanged:this.onDepartChanged}))))))}}]),a}(i.a.Component),Te=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).onMouseEnter=function(){r.setState({highlight:!0})},r.onMouseLeave=function(){r.setState({highlight:!1})},r.state={highlight:!1},r}return Object(r.a)(a,[{key:"render",value:function(){var e=this.props.group,t=this.state.highlight,a=p.lc+"org/departmentadmin/groups/"+e.id+"/";return i.a.createElement("tr",{className:t?"tr-highlight":"",onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave},i.a.createElement("td",null,i.a.createElement(u.a,{to:a},e.name)),i.a.createElement("td",null,_()(e.created_at).fromNow()),i.a.createElement("td",{onClick:this.props.showSetGroupQuotaDialog.bind(this,e.id)},E.a.bytesToSize(e.quota)," ",i.a.createElement("span",{title:"Edit Quota",className:"fa fa-pencil-alt attr-action-icon ".concat(t?"":"vh")})),i.a.createElement("td",{className:"cursor-pointer text-center",onClick:this.props.showDeleteDepartDialog.bind(this,e)},i.a.createElement("span",{className:"sf2-icon-delete action-icon  ".concat(t?"":"vh"),title:"Delete"})))}}]),a}(i.a.Component),Ge=Pe,Be=a(196),Qe=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).handleSelectChange=function(e){r.setState({selectedOption:e}),r.Options=[]},r.handleSubmit=function(){if(r.state.selectedOption){var e=r.state.selectedOption.email;r.refs.orgSelect.clearSelect(),r.setState({errMessage:[]}),f.a.orgAdminAddGroupMember(p.Rb,r.props.groupID,e).then((function(e){r.setState({selectedOption:null}),e.data.failed.length>0&&r.setState({errMessage:e.data.failed[0].error_msg}),e.data.success.length>0&&(r.props.onMemberChanged(),r.props.toggle())})).catch((function(e){var t=E.a.getErrorMsg(e);v.a.danger(t)}))}},r.state={selectedOption:null,errMessage:""},r.Options=[],r}return Object(r.a)(a,[{key:"render",value:function(){return i.a.createElement(b.x,{isOpen:!0,toggle:this.props.toggle},i.a.createElement(b.A,{toggle:this.props.toggle},Object(p.nb)("Add Member")),i.a.createElement(b.y,null,i.a.createElement(L.a,{placeholder:Object(p.nb)("Search users..."),onSelectChange:this.handleSelectChange,ref:"orgSelect",isMulti:!1,className:"org-add-member-select"}),this.state.errMessage&&i.a.createElement("p",{className:"error"},this.state.errMessage)),i.a.createElement(b.z,null,i.a.createElement(b.c,{color:"primary",onClick:this.handleSubmit},Object(p.nb)("Submit")),i.a.createElement(b.c,{color:"secondary",onClick:this.props.toggle},Object(p.nb)("Cancel"))))}}]),a}(i.a.Component),qe=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).deleteMember=function(){var e=r.props.member.email;f.a.orgAdminDeleteGroupMember(p.Rb,r.props.groupID,e).then((function(e){e.data.success&&(r.props.onMemberChanged(),r.props.toggle())})).catch((function(e){var t=E.a.getErrorMsg(e);v.a.danger(t)}))},r}return Object(r.a)(a,[{key:"render",value:function(){var e=Object(p.nb)("Are you sure you want to delete {placeholder} ?");return e=e.replace("{placeholder}",'<span class="op-target">'+E.a.HTMLescape(this.props.member.name)+"</span>"),i.a.createElement(b.x,{isOpen:!0,toggle:this.props.toggle},i.a.createElement(b.A,{toggle:this.props.toggle},Object(p.nb)("Delete Member")),i.a.createElement(b.y,null,i.a.createElement("div",{dangerouslySetInnerHTML:{__html:e}})),i.a.createElement(b.z,null,i.a.createElement(b.c,{color:"primary",onClick:this.deleteMember},Object(p.nb)("Delete")),i.a.createElement(b.c,{color:"secondary",onClick:this.props.toggle},Object(p.nb)("Cancel"))))}}]),a}(i.a.Component),Ye=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).handleSubmit=function(){r.validateName()&&f.a.orgAdminAddDepartmentRepo(p.Rb,r.props.groupID,r.state.repoName.trim()).then((function(e){r.props.toggle(),r.props.onRepoChanged()})).catch((function(e){var t=E.a.getErrorMsg(e);r.setState({errMessage:t})}))},r.validateName=function(){var e="";return!!r.state.repoName.trim().length||(e=Object(p.nb)("Name is required"),r.setState({errMessage:e}),!1)},r.handleChange=function(e){r.setState({repoName:e.target.value})},r.handleKeyPress=function(e){"Enter"===e.key&&(r.handleSubmit(),e.preventDefault())},r.state={repoName:"",errMessage:""},r.newInput=i.a.createRef(),r}return Object(r.a)(a,[{key:"componentDidMount",value:function(){this.newInput.focus(),this.newInput.setSelectionRange(0,0)}},{key:"render",value:function(){var e=this;return i.a.createElement(b.x,{isOpen:!0,toggle:this.props.toggle},i.a.createElement(b.A,{toggle:this.props.toggle},Object(p.nb)("New Library")),i.a.createElement(b.y,null,i.a.createElement(b.p,null,i.a.createElement(b.q,null,i.a.createElement(b.w,{for:"repoName"},Object(p.nb)("Name")),i.a.createElement(b.s,{id:"repoName",onKeyPress:this.handleKeyPress,value:this.state.repoName,onChange:this.handleChange,innerRef:function(t){e.newInput=t}}))),this.state.errMessage&&i.a.createElement("p",{className:"error"},this.state.errMessage)),i.a.createElement(b.z,null,i.a.createElement(b.c,{color:"primary",onClick:this.handleSubmit},Object(p.nb)("Submit"))))}}]),a}(i.a.Component),He=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).deleteRepo=function(){f.a.orgAdminDeleteDepartmentRepo(p.Rb,r.props.groupID,r.props.repo.repo_id).then((function(e){e.data.success&&(r.props.onRepoChanged(),r.props.toggle())})).catch((function(e){var t=E.a.getErrorMsg(e);v.a.danger(t)}))},r}return Object(r.a)(a,[{key:"render",value:function(){var e=Object(p.nb)("Are you sure you want to delete {placeholder} ?");return e=e.replace("{placeholder}",'<span class="op-target">'+E.a.HTMLescape(this.props.repo.name)+"</span>"),i.a.createElement(b.x,{isOpen:!0,toggle:this.props.toggle},i.a.createElement(b.A,{toggle:this.props.toggle},Object(p.nb)("Delete Library")),i.a.createElement(b.y,null,i.a.createElement("div",{dangerouslySetInnerHTML:{__html:e}})),i.a.createElement(b.z,null,i.a.createElement(b.c,{color:"primary",onClick:this.deleteRepo},Object(p.nb)("Delete")),i.a.createElement(b.c,{color:"secondary",onClick:this.props.toggle},Object(p.nb)("Cancel"))))}}]),a}(i.a.Component);_.a.locale(p.Bb);var Ve=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).listOrgGroupRepo=function(e){f.a.orgAdminListGroupRepos(p.Rb,e).then((function(e){r.setState({repos:e.data.libraries})})).catch((function(e){var t=E.a.getErrorMsg(e);v.a.danger(t)}))},r.listOrgMembers=function(e){f.a.orgAdminListGroupInfo(p.Rb,e,!0).then((function(e){r.setState({members:e.data.members,groups:e.data.groups,ancestorGroups:e.data.ancestor_groups,groupName:e.data.name})})).catch((function(e){var t=E.a.getErrorMsg(e);v.a.danger(t)}))},r.listSubDepartGroups=function(e){f.a.orgAdminListGroupInfo(p.Rb,e,!0).then((function(e){r.setState({groups:e.data.groups})})).catch((function(e){var t=E.a.getErrorMsg(e);v.a.danger(t)}))},r.toggleCancel=function(){r.setState({showDeleteMemberDialog:!1,showDeleteRepoDialog:!1,showDeleteDepartDialog:!1,showSetGroupQuotaDialog:!1})},r.onSubDepartChanged=function(){r.listSubDepartGroups(r.props.groupID)},r.onRepoChanged=function(){r.listOrgGroupRepo(r.props.groupID)},r.onMemberChanged=function(){r.listOrgMembers(r.props.groupID)},r.toggleItemFreezed=function(e){r.setState({isItemFreezed:e})},r.showDeleteMemberDialog=function(e){r.setState({showDeleteMemberDialog:!0,deletedMember:e})},r.showDeleteRepoDialog=function(e){r.setState({showDeleteRepoDialog:!0,deletedRepo:e})},r.toggleAddRepoDialog=function(){r.setState({isShowAddRepoDialog:!r.state.isShowAddRepoDialog})},r.toggleAddMemberDialog=function(){r.setState({isShowAddMemberDialog:!r.state.isShowAddMemberDialog})},r.toggleAddDepartDialog=function(){r.setState({isShowAddDepartDialog:!r.state.isShowAddDepartDialog})},r.showDeleteDepartDialog=function(e){r.setState({showDeleteDepartDialog:!0,subGroupID:e.id,subGroupName:e.name})},r.showSetGroupQuotaDialog=function(e){r.setState({showSetGroupQuotaDialog:!0,subGroupID:e})},r.state={groupName:"",isItemFreezed:!1,ancestorGroups:[],members:[],deletedMember:{},isShowAddMemberDialog:!1,showDeleteMemberDialog:!1,repos:[],deletedRepo:{},isShowAddRepoDialog:!1,showDeleteRepoDialog:!1,groups:[],subGroupID:"",subGroupName:"",isShowAddDepartDialog:!1,showDeleteDepartDialog:!1,showSetGroupQuotaDialog:!1},r}return Object(r.a)(a,[{key:"componentDidMount",value:function(){var e=this.props.groupID;this.listOrgGroupRepo(e),this.listOrgMembers(e)}},{key:"componentWillReceiveProps",value:function(e){this.props.groupID!==e.groupID&&(this.listOrgGroupRepo(e.groupID),this.listOrgMembers(e.groupID))}},{key:"render",value:function(){var e=this,t=this.state,a=t.members,n=t.repos,r=t.groups,s=this.props.groupID,o="btn btn-secondary operation-item",c=i.a.createElement(l.Fragment,null,s&&i.a.createElement("button",{className:o,title:Object(p.nb)("New Sub-department"),onClick:this.toggleAddDepartDialog},Object(p.nb)("New Sub-department")),s&&i.a.createElement("button",{className:o,title:Object(p.nb)("Add Member"),onClick:this.toggleAddMemberDialog},Object(p.nb)("Add Member")),s&&i.a.createElement("button",{className:o,onClick:this.toggleAddRepoDialog,title:Object(p.nb)("New Library")},Object(p.nb)("New Library")),this.state.isShowAddMemberDialog&&i.a.createElement(C.a,null,i.a.createElement(Qe,{toggle:this.toggleAddMemberDialog,onMemberChanged:this.onMemberChanged,groupID:s})),this.state.isShowAddRepoDialog&&i.a.createElement(C.a,null,i.a.createElement(Ye,{toggle:this.toggleAddRepoDialog,onRepoChanged:this.onRepoChanged,groupID:s})),this.state.isShowAddDepartDialog&&i.a.createElement(C.a,null,i.a.createElement(ze,{onDepartChanged:this.onSubDepartChanged,parentGroupID:s,toggle:this.toggleAddDepartDialog})));return i.a.createElement(l.Fragment,null,i.a.createElement(N,{children:c}),i.a.createElement("div",{className:"main-panel-center flex-row h-100"},i.a.createElement("div",{className:"cur-view-container o-auto"},i.a.createElement("div",{className:"cur-view-path"},i.a.createElement("div",{className:"fleft"},i.a.createElement("h3",{className:"sf-heading"},s?i.a.createElement(u.a,{to:p.lc+"org/departmentadmin/"},Object(p.nb)("Departments")):i.a.createElement("span",null,Object(p.nb)("Departments")),this.state.ancestorGroups.map((function(e){var t=p.lc+"org/departmentadmin/groups/"+e.id+"/";return i.a.createElement("span",{key:e.id}," / ",i.a.createElement(u.a,{to:t},e.name))})),s&&i.a.createElement("span",null," / ",this.state.groupName)))),i.a.createElement("div",{className:"cur-view-subcontainer org-groups"},i.a.createElement("div",{className:"cur-view-path"},i.a.createElement("div",{className:"fleft"},i.a.createElement("h3",{className:"sf-heading"},Object(p.nb)("Sub-departments")))),i.a.createElement("div",{className:"cur-view-content"},r&&r.length>0?i.a.createElement("table",null,i.a.createElement("thead",null,i.a.createElement("tr",null,i.a.createElement("th",{width:"40%"},Object(p.nb)("Name")),i.a.createElement("th",{width:"25%"},Object(p.nb)("Created At")),i.a.createElement("th",{width:"20%"},Object(p.nb)("Quota")),i.a.createElement("th",{width:"15%"}))),i.a.createElement("tbody",null,r.map((function(t,a){return i.a.createElement(i.a.Fragment,{key:t.id},i.a.createElement(Je,{group:t,showDeleteDepartDialog:e.showDeleteDepartDialog,showSetGroupQuotaDialog:e.showSetGroupQuotaDialog}))})))):i.a.createElement("p",{className:"no-group"},Object(p.nb)("No sub-departments")))),i.a.createElement("div",{className:"cur-view-subcontainer org-members"},i.a.createElement("div",{className:"cur-view-path"},i.a.createElement("div",{className:"fleft"},i.a.createElement("h3",{className:"sf-heading"},Object(p.nb)("Members")))),i.a.createElement("div",{className:"cur-view-content"},a&&0!==a.length?i.a.createElement("table",null,i.a.createElement("thead",null,i.a.createElement("tr",null,i.a.createElement("th",{width:"5%"}),i.a.createElement("th",{width:"50%"},Object(p.nb)("Name")),i.a.createElement("th",{width:"15%"},Object(p.nb)("Role")),i.a.createElement("th",{width:"30%"}))),i.a.createElement("tbody",null,a.map((function(t,a){return i.a.createElement(i.a.Fragment,{key:a},i.a.createElement(Ke,{member:t,showDeleteMemberDialog:e.showDeleteMemberDialog,isItemFreezed:e.state.isItemFreezed,onMemberChanged:e.onMemberChanged,toggleItemFreezed:e.toggleItemFreezed,groupID:s}))})))):i.a.createElement("p",{className:"no-member"},Object(p.nb)("No members")))),i.a.createElement("div",{className:"cur-view-subcontainer org-libriries"},i.a.createElement("div",{className:"cur-view-path"},i.a.createElement("div",{className:"fleft"},i.a.createElement("h3",{className:"sf-heading"},Object(p.nb)("Libraries")))),n.length>0?i.a.createElement("div",{className:"cur-view-content"},i.a.createElement("table",null,i.a.createElement("thead",null,i.a.createElement("tr",null,i.a.createElement("th",{width:"5%"}),i.a.createElement("th",{width:"50%"},Object(p.nb)("Name")),i.a.createElement("th",{width:"30%"},Object(p.nb)("Size")),i.a.createElement("th",{width:"15%"}))),i.a.createElement("tbody",null,n.map((function(t,a){return i.a.createElement(i.a.Fragment,{key:a},i.a.createElement(We,{repo:t,showDeleteRepoDialog:e.showDeleteRepoDialog}))}))))):i.a.createElement("p",{className:"no-libraty"},Object(p.nb)("No libraries")))),i.a.createElement(i.a.Fragment,null,this.state.showDeleteMemberDialog&&i.a.createElement(C.a,null,i.a.createElement(qe,{toggle:this.toggleCancel,onMemberChanged:this.onMemberChanged,member:this.state.deletedMember,groupID:s})),this.state.showDeleteRepoDialog&&i.a.createElement(C.a,null,i.a.createElement(He,{toggle:this.toggleCancel,onRepoChanged:this.onRepoChanged,repo:this.state.deletedRepo,groupID:s})),this.state.showDeleteDepartDialog&&i.a.createElement(C.a,null,i.a.createElement(xe,{toggle:this.toggleCancel,groupID:this.state.subGroupID,groupName:this.state.subGroupName,onDepartChanged:this.onSubDepartChanged})),this.state.showSetGroupQuotaDialog&&i.a.createElement(C.a,null,i.a.createElement(Fe,{toggle:this.toggleCancel,groupID:this.state.subGroupID,onDepartChanged:this.onSubDepartChanged})))))}}]),a}(i.a.Component),Ke=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).onMouseEnter=function(){r.props.isItemFreezed||r.setState({highlight:!0})},r.onMouseLeave=function(){r.props.isItemFreezed||r.setState({highlight:!1})},r.toggleMemberRoleMenu=function(){r.setState({showRoleMenu:!r.state.showRoleMenu})},r.onChangeUserRole=function(e){var t="Admin"===e;f.a.orgAdminSetGroupMemberRole(p.Rb,r.props.groupID,r.props.member.email,t).then((function(e){r.props.onMemberChanged()})).catch((function(e){var t=E.a.getErrorMsg(e);v.a.danger(t)})),r.setState({highlight:!1})},r.state={highlight:!1,showRoleMenu:!1},r.roles=["Admin","Member"],r}return Object(r.a)(a,[{key:"render",value:function(){var e=this.props.member,t=this.state.highlight,a=p.cc+"/org/useradmin/info/"+e.email+"/";return"Owner"===e.role?null:i.a.createElement("tr",{className:t?"tr-highlight":"",onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave},i.a.createElement("td",null,i.a.createElement("img",{src:e.avatar_url,alt:"member-header",width:"24",className:"avatar"})),i.a.createElement("td",null,i.a.createElement("a",{href:a},e.name)),i.a.createElement("td",null,i.a.createElement(Be.a,{isTextMode:!0,isEditIconShow:t,currentRole:e.role,roles:this.roles,onRoleChanged:this.onChangeUserRole,toggleItemFreezed:this.props.toggleItemFreezed})),this.props.isItemFreezed?i.a.createElement("td",null):i.a.createElement("td",{className:"cursor-pointer text-center",onClick:this.props.showDeleteMemberDialog.bind(this,e)},i.a.createElement("span",{className:"sf2-icon-x3 action-icon ".concat(t?"":"vh"),title:"Delete"})))}}]),a}(i.a.Component),We=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).onMouseEnter=function(){r.setState({highlight:!0})},r.onMouseLeave=function(){r.setState({highlight:!1})},r.state={highlight:!1},r}return Object(r.a)(a,[{key:"render",value:function(){var e=this.props.repo,t=this.state.highlight,a=E.a.getLibIconUrl(e);return i.a.createElement("tr",{className:t?"tr-highlight":"",onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave},i.a.createElement("td",null,i.a.createElement("img",{src:a,width:"24",alt:Object(p.nb)("icon")})),i.a.createElement("td",null,e.name),i.a.createElement("td",null,E.a.bytesToSize(e.size)," "),i.a.createElement("td",{className:"cursor-pointer text-center",onClick:this.props.showDeleteRepoDialog.bind(this,e)},i.a.createElement("span",{className:"sf2-icon-delete action-icon ".concat(t?"":"vh"),title:"Delete"})))}}]),a}(i.a.Component),Je=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).onMouseEnter=function(){r.setState({highlight:!0})},r.onMouseLeave=function(){r.setState({highlight:!1})},r.state={highlight:!1},r}return Object(r.a)(a,[{key:"render",value:function(){var e=this.props.group,t=this.state.highlight,a=p.lc+"org/departmentadmin/groups/"+e.id+"/";return i.a.createElement("tr",{className:t?"tr-highlight":"",onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave},i.a.createElement("td",null,i.a.createElement(u.a,{to:a},e.name)),i.a.createElement("td",null,_()(e.created_at).fromNow()),i.a.createElement("td",{onClick:this.props.showSetGroupQuotaDialog.bind(this,e.id)},E.a.bytesToSize(e.quota)," ",i.a.createElement("span",{title:"Edit Quota",className:"fa fa-pencil-alt attr-action-icon ".concat(t?"":"vh")})),i.a.createElement("td",{className:"cursor-pointer text-center",onClick:this.props.showDeleteDepartDialog.bind(this,e)},i.a.createElement("span",{className:"sf2-icon-delete action-icon ".concat(t?"":"vh"),title:"Delete"})))}}]),a}(i.a.Component),$e=Ve,Xe=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).tabItemClick=function(e){r.props.tabItemClick(e)},r}return Object(r.a)(a,[{key:"render",value:function(){var e=this;return i.a.createElement(l.Fragment,null,i.a.createElement(N,null),i.a.createElement("div",{className:"main-panel-center flex-row"},i.a.createElement("div",{className:"cur-view-container"},i.a.createElement("div",{className:"cur-view-path org-user-nav"},i.a.createElement("ul",{className:"nav"},i.a.createElement("li",{className:"nav-item",onClick:function(){return e.tabItemClick("logadmin")}},i.a.createElement(u.a,{className:"nav-link ".concat("logadmin"===this.props.currentTab?"active":""),to:p.lc+"org/logadmin/",title:Object(p.nb)("File Access")},Object(p.nb)("File Access"))),i.a.createElement("li",{className:"nav-item",onClick:function(){return e.tabItemClick("file-update")}},i.a.createElement(u.a,{className:"nav-link ".concat("file-update"===this.props.currentTab?"active":""),to:p.lc+"org/logadmin/file-update/",title:Object(p.nb)("File Update")},Object(p.nb)("File Update"))),i.a.createElement("li",{className:"nav-item",onClick:function(){return e.tabItemClick("perm-audit")}},i.a.createElement(u.a,{className:"nav-link ".concat("perm-audit"===this.props.currentTab?"active":""),to:p.lc+"org/logadmin/perm-audit/",title:Object(p.nb)("Permission")},Object(p.nb)("Permission"))))),this.props.children)))}}]),a}(l.Component),Ze=a(26);_.a.locale(p.Bb);var et=function e(t){Object(n.a)(this,e),this.ip=t.ip,this.type=t.type,this.device=t.device,this.repo_id=t.repo_id,this.repo_name=t.repo_name,this.file_name=t.file_name,this.file_path=t.file_path,this.user_name=t.user_name,this.user_email=t.user_email,this.user_contact_email=t.user_contact_email,this.time=_()(t.time).format("YYYY-MM-DD HH:mm:ss")};a(431);_.a.locale(p.Bb);var tt=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).initData=function(e,t,a){f.a.orgAdminListFileAudit(e,t,a).then((function(e){var t=e.data.log_list.map((function(e){return new et(e)}));r.setState({eventList:t,pageNext:e.data.page_next,page:e.data.page,userSelected:e.data.user_selected,repoSelected:e.data.repo_selected})})).catch((function(e){var t=E.a.getErrorMsg(e);v.a.danger(t)}))},r.onChangePageNum=function(e,t){e.preventDefault();var a=r.state.page;1==t?a+=1:a-=1;var n=r.state.userSelected,s=r.state.repoSelected;r.initData(n,s,a)},r.filterUser=function(e){r.setState({userSelected:e})},r.filterRepo=function(e){r.setState({repoSelected:e})},r.state={page:1,pageNext:!1,eventList:[],userSelected:"",repoSelected:"",isItemFreezed:!1},r}return Object(r.a)(a,[{key:"componentDidMount",value:function(){var e=this.state.page,t=this.state.userSelected,a=this.state.repoSelected;this.initData(t,a,e)}},{key:"render",value:function(){var e=this,t=this.state.eventList;return i.a.createElement("div",{className:"cur-view-content"},(this.state.userSelected||this.state.repoSelected)&&i.a.createElement(i.a.Fragment,null,this.state.userSelected&&i.a.createElement("span",{className:"audit-unselect-item",onClick:this.filterUser.bind(this,null)},i.a.createElement("span",{className:"no-deco"},this.state.userSelected)," \u2716"),this.state.repoSelected&&i.a.createElement("span",{className:"audit-unselect-item",onClick:this.filterRepo.bind(this,null)},i.a.createElement("span",{className:"no-deco"},this.state.repoSelected)," \u2716")),i.a.createElement("table",null,i.a.createElement("thead",null,i.a.createElement("tr",null,i.a.createElement("th",{width:"24%"},Object(p.nb)("User")),i.a.createElement("th",{width:"10%"},Object(p.nb)("Type")),i.a.createElement("th",{width:"13%"},Object(p.nb)("IP")),i.a.createElement("th",{width:"17%"},Object(p.nb)("Date")),i.a.createElement("th",{width:"18%"},Object(p.nb)("Library")),i.a.createElement("th",{width:"18%"},Object(p.nb)("File")))),i.a.createElement("tbody",null,t.map((function(t,a){return i.a.createElement(at,{key:a,fileEvent:t,isItemFreezed:e.state.isItemFreezed,filterUser:e.filterUser,filterRepo:e.filterRepo,userSelected:e.state.userSelected,repoSelected:e.state.repoSelected})})))),i.a.createElement("div",{className:"paginator"},1!=this.state.page&&i.a.createElement("a",{href:"#",onClick:function(t){return e.onChangePageNum(t,-1)}},Object(p.nb)("Previous")),1!=this.state.page&&this.state.pageNext&&i.a.createElement("span",null," | "),this.state.pageNext&&i.a.createElement("a",{href:"#",onClick:function(t){return e.onChangePageNum(t,1)}},Object(p.nb)("Next"))))}}]),a}(i.a.Component),at=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).onMouseEnter=function(){r.props.isItemFreezed||r.setState({showMenu:!0,highlight:!0})},r.onMouseLeave=function(){r.props.isItemFreezed||r.setState({showMenu:!1,highlight:!1})},r.toggleUserDropdown=function(){r.setState({userDropdownOpen:!r.state.userDropdownOpen})},r.renderUser=function(e){return e.user_email?i.a.createElement("span",null,i.a.createElement("a",{href:p.lc+"org/useradmin/info/"+e.user_email+"/"},e.user_name)," ",i.a.createElement(b.l,{size:"sm",isOpen:r.state.userDropdownOpen,toggle:r.toggleUserDropdown,className:r.state.highlight?"":"vh",tag:"span"},i.a.createElement(b.o,{tag:"i",className:"sf-dropdown-toggle sf2-icon-caret-down"}),i.a.createElement(b.n,null,i.a.createElement(b.m,{onClick:r.props.filterUser.bind(Object(Ze.a)(r),e.user_email)},Object(p.nb)("Only Show")," ",i.a.createElement("span",{className:"font-weight-bold"},e.user_name))))):Object(p.nb)("Anonymous User")},r.renderType=function(e){return-1!=e.indexOf("web")&&(e="web"),-1!=e.indexOf("api")&&(e="api"),-1!=e.indexOf("share-link")&&(e="share link"),e},r.toggleRepoDropdown=function(){r.setState({repoDropdownOpen:!r.state.repoDropdownOpen})},r.renderRepo=function(e){var t="Deleted";return e.repo_name&&(t=e.repo_name),i.a.createElement("span",null,i.a.createElement("span",null,t),e.repo_name&&i.a.createElement(b.l,{size:"sm",isOpen:r.state.repoDropdownOpen,toggle:r.toggleRepoDropdown,className:r.state.highlight?"":"vh"},i.a.createElement(b.o,{tag:"i",className:"sf-dropdown-toggle sf2-icon-caret-down"}),i.a.createElement(b.n,null,i.a.createElement(b.m,{size:"sm",onClick:r.props.filterRepo.bind(Object(Ze.a)(r),e.repo_name)},Object(p.nb)("Only Show")," ",i.a.createElement("span",{className:"font-weight-bold"},e.repo_name)))))},r.state={highlight:!1,showMenu:!1,isItemMenuShow:!1,userDropdownOpen:!1,repoDropdownOpen:!1},r}return Object(r.a)(a,[{key:"render",value:function(){var e=this.props.fileEvent;return this.props.userSelected&&e.user_email!==this.props.userSelected||this.props.repoSelected&&e.repo_name!==this.props.repoSelected?null:i.a.createElement("tr",{className:this.state.highlight?"tr-highlight":"",onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave},i.a.createElement("td",null,this.renderUser(e)),i.a.createElement("td",null,this.renderType(e.type)),i.a.createElement("td",null,e.ip),i.a.createElement("td",null,_()(e.time).format("YYYY-MM-DD HH:mm:ss")),i.a.createElement("td",null,this.renderRepo(e)),i.a.createElement("td",null,i.a.createElement("span",{title:e.file_path},e.file_name)))}}]),a}(i.a.Component),nt=tt;_.a.locale(p.Bb);var rt=function e(t){Object(n.a)(this,e),this.repo_id=t.repo_id,this.description=t.description,this.repo_name=t.repo_name,this.user_name=t.user_name,this.user_email=t.user_email,this.repo_encrypted=t.repo_encrypted,this.repo_commit_id=t.repo_commit_id,this.user_contact_email=t.user_contact_email,this.time=_()(t.time).format("YYYY-MM-DD HH:mm:ss")},st=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).renderContentItem=function(e){var t="";t+='<ul class="list-group list-group-flush">';for(var a=0,n=e.length;a<n;a++)t+='<li class="list-group-item">'+e[a]+"</li>";return{__html:t+="</ul>"}},r.renderContent=function(){return r.state.newfile.length>0?i.a.createElement("div",null,i.a.createElement("h4",null,Object(p.nb)("New files")),i.a.createElement("p",null,r.state.time),i.a.createElement("div",{dangerouslySetInnerHTML:r.renderContentItem(r.state.newfile)})):r.state.removed.length>0?i.a.createElement("div",null,i.a.createElement("h4",null,Object(p.nb)("Deleted files")),i.a.createElement("p",null,r.state.time),i.a.createElement("div",{dangerouslySetInnerHTML:r.renderContentItem(r.state.removed)})):r.state.renamed.length>0?i.a.createElement("div",null,i.a.createElement("h4",null,Object(p.nb)("Renamed or Moved files")),i.a.createElement("p",null,r.state.time),i.a.createElement("div",{dangerouslySetInnerHTML:r.renderContentItem(r.state.renamed)})):r.state.modified.length>0?i.a.createElement("div",null,i.a.createElement("h4",null,Object(p.nb)("Modified files")),i.a.createElement("p",null,r.state.time),i.a.createElement("div",{dangerouslySetInnerHTML:r.renderContentItem(r.state.modified)})):r.state.newdir.length>0?i.a.createElement("div",null,i.a.createElement("h4",null,Object(p.nb)("New directories")),i.a.createElement("p",null,r.state.time),i.a.createElement("div",{dangerouslySetInnerHTML:r.renderContentItem(r.state.newdir)})):r.state.deldir.length>0?i.a.createElement("div",null,i.a.createElement("h4",null,Object(p.nb)("Deleted directories")),i.a.createElement("p",null,r.state.time),i.a.createElement("div",{dangerouslySetInnerHTML:r.renderContentItem(r.state.deldir)})):void 0},r.state={time:"",renamed:[],deldir:[],modified:[],newdir:[],newfile:[],removed:[]},r}return Object(r.a)(a,[{key:"componentDidMount",value:function(){var e=this;f.a.orgAdminGetFileUpdateDetail(this.props.repoID,this.props.commitID).then((function(t){e.setState({time:t.data.date_time,renamed:e.state.renamed.concat(t.data.renamed),deldir:e.state.deldir.concat(t.data.deldir),modified:e.state.modified.concat(t.data.modified),newdir:e.state.newdir.concat(t.data.newdir),newfile:e.state.newfile.concat(t.data.new),removed:e.state.removed.concat(t.data.removed)})})).catch((function(e){var t=E.a.getErrorMsg(e);v.a.danger(t)}))}},{key:"render",value:function(){return i.a.createElement(b.x,{isOpen:!0,toggle:this.props.toggleCancel},i.a.createElement(b.A,{toggle:this.props.toggleCancel},Object(p.nb)("Modification Details")),i.a.createElement(b.y,null,this.renderContent()))}}]),a}(i.a.Component);_.a.locale(p.Bb);var ot=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).initData=function(e,t,a){f.a.orgAdminListFileUpdate(e,t,a).then((function(e){var t=e.data.log_list.map((function(e){return new rt(e)}));r.setState({eventList:t,pageNext:e.data.page_next,page:e.data.page})})).catch((function(e){var t=E.a.getErrorMsg(e);v.a.danger(t)}))},r.onChangePageNum=function(e,t){e.preventDefault();var a=r.state.page;1==t?a+=1:a-=1;var n=r.state.userSelected,s=r.state.repoSelected;r.initData(n,s,a)},r.toggleCancelDetail=function(){r.setState({showDetails:!r.state.showDetails})},r.onDetails=function(e,t){e.preventDefault(),r.setState({showDetails:!r.state.showDetails,repoID:t.repo_id,commitID:t.repo_commit_id})},r.filterUser=function(e){r.setState({userSelected:e})},r.filterRepo=function(e){r.setState({repoSelected:e})},r.state={page:1,pageNext:!1,eventList:[],userSelected:"",repoSelected:"",isItemFreezed:!1,showDetails:!1,repoID:"",commitID:""},r}return Object(r.a)(a,[{key:"componentDidMount",value:function(){var e=this.state.page,t=this.state.userSelected,a=this.state.repoSelected;this.initData(t,a,e)}},{key:"render",value:function(){var e=this,t=this.state.eventList;return i.a.createElement("div",{className:"cur-view-content"},(this.state.userSelected||this.state.repoSelected)&&i.a.createElement(i.a.Fragment,null,this.state.userSelected&&i.a.createElement("span",{className:"audit-unselect-item",onClick:this.filterUser.bind(this,null)},i.a.createElement("span",{className:"no-deco"},this.state.userSelected)," \u2716"),this.state.repoSelected&&i.a.createElement("span",{className:"audit-unselect-item",onClick:this.filterRepo.bind(this,null)},i.a.createElement("span",{className:"no-deco"},this.state.repoSelected)," \u2716")),i.a.createElement("table",null,i.a.createElement("thead",null,i.a.createElement("tr",null,i.a.createElement("th",{width:"25%"},Object(p.nb)("User")),i.a.createElement("th",{width:"17%"},Object(p.nb)("Date")),i.a.createElement("th",{width:"25%"},Object(p.nb)("Library")),i.a.createElement("th",{width:"33%"},Object(p.nb)("Action")))),i.a.createElement("tbody",null,t.map((function(t,a){return i.a.createElement(lt,{key:a,fileEvent:t,isItemFreezed:e.state.isItemFreezed,onDetails:e.onDetails,filterUser:e.filterUser,filterRepo:e.filterRepo,userSelected:e.state.userSelected,repoSelected:e.state.repoSelected})})))),i.a.createElement("div",{className:"paginator"},1!=this.state.page&&i.a.createElement("a",{href:"#",onClick:function(t){return e.onChangePageNum(t,-1)}},Object(p.nb)("Previous")),1!=this.state.page&&this.state.pageNext&&i.a.createElement("span",null," | "),this.state.pageNext&&i.a.createElement("a",{href:"#",onClick:function(t){return e.onChangePageNum(t,1)}},Object(p.nb)("Next"))),this.state.showDetails&&i.a.createElement(C.a,null,i.a.createElement(st,{repoID:this.state.repoID,commitID:this.state.commitID,toggleCancel:this.toggleCancelDetail})))}}]),a}(l.Component),lt=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).onMouseEnter=function(){r.props.isItemFreezed||r.setState({showMenu:!0,highlight:!0})},r.onMouseLeave=function(){r.props.isItemFreezed||r.setState({showMenu:!1,highlight:!1})},r.toggleUserDropdown=function(){r.setState({userDropdownOpen:!r.state.userDropdownOpen})},r.renderUser=function(e){return e.user_email?i.a.createElement("span",null,i.a.createElement("a",{href:p.lc+"org/useradmin/info/"+e.user_email+"/"},e.user_name)," ",i.a.createElement(b.l,{size:"sm",isOpen:r.state.userDropdownOpen,toggle:r.toggleUserDropdown,className:r.state.highlight?"":"vh",tag:"span"},i.a.createElement(b.o,{tag:"i",className:"sf-dropdown-toggle sf2-icon-caret-down"}),i.a.createElement(b.n,null,i.a.createElement(b.m,{onClick:r.props.filterUser.bind(Object(Ze.a)(r),e.user_email)},Object(p.nb)("Only Show")," ",i.a.createElement("span",{className:"font-weight-bold"},e.user_name))))):Object(p.nb)("Anonymous User")},r.toggleRepoDropdown=function(){r.setState({repoDropdownOpen:!r.state.repoDropdownOpen})},r.renderRepo=function(e){var t="Deleted";return e.repo_name&&(t=e.repo_name),i.a.createElement("span",null,i.a.createElement("span",null,t),e.repo_name&&i.a.createElement(b.l,{size:"sm",isOpen:r.state.repoDropdownOpen,toggle:r.toggleRepoDropdown,className:r.state.highlight?"":"vh"},i.a.createElement(b.o,{tag:"i",className:"sf-dropdown-toggle sf2-icon-caret-down"}),i.a.createElement(b.n,null,i.a.createElement(b.m,{size:"sm",onClick:r.props.filterRepo.bind(Object(Ze.a)(r),e.repo_name)},Object(p.nb)("Only Show")," ",i.a.createElement("span",{className:"font-weight-bold"},e.repo_name)))))},r.renderAction=function(e){return e.repo_encrypted||!e.repo_id?i.a.createElement("td",null,e.description):i.a.createElement("td",null,e.description,i.a.createElement("a",{className:"font-weight-normal text-muted ml-1",href:"#",onClick:function(t){return r.props.onDetails(t,e)}},Object(p.nb)("Details")))},r.state={highlight:!1,showMenu:!1,isItemMenuShow:!1,userDropdownOpen:!1,repoDropdownOpen:!1},r}return Object(r.a)(a,[{key:"render",value:function(){var e=this.props.fileEvent;return this.props.userSelected&&e.user_email!==this.props.userSelected||this.props.repoSelected&&e.repo_name!==this.props.repoSelected?null:i.a.createElement("tr",{className:this.state.highlight?"tr-highlight":"",onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave},i.a.createElement("td",null,this.renderUser(e)),i.a.createElement("td",null,_()(e.time).format("YYYY-MM-DD HH:mm:ss")),i.a.createElement("td",null,this.renderRepo(e)),this.renderAction(e))}}]),a}(i.a.Component),it=ot;_.a.locale(p.Bb);var ct=function e(t){Object(n.a)(this,e),this.from_user_name=t.from_user_name,this.from_user_email=t.from_user_email,this.from_user_contact_email=t.from_user_contact_email,this.to_user_email=t.to_user_email,this.to_user_name=t.to_user_name,this.to_user_contact_email=t.to_user_contact_email,this.to_group_name=t.to_group_name,this.to_group_id=t.to_group_id,this.type=t.type,this.repo_id=t.repo_id,this.repo_name=t.repo_name,this.folder_name=t.folder_name,this.folder_path=t.folder_path,this.time=_()(t.time).format("YYYY-MM-DD HH:mm:ss"),this.permission=t.permission};_.a.locale(p.Bb);var mt=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).initData=function(e,t,a){f.a.orgAdminListPermAudit(e,t,a).then((function(e){var t=e.data.log_list.map((function(e){return new ct(e)}));r.setState({eventList:t,pageNext:e.data.page_next,page:e.data.page})})).catch((function(e){var t=E.a.getErrorMsg(e);v.a.danger(t)}))},r.onChangePageNum=function(e,t){e.preventDefault();var a=r.state.page;1==t?a+=1:a-=1,r.initData(a)},r.filterUser=function(e){r.setState({userSelected:e})},r.state={page:1,pageNext:!1,eventList:[],userSelected:"",repoSelected:"",isItemFreezed:!1},r}return Object(r.a)(a,[{key:"componentDidMount",value:function(){var e=this.state.page,t=this.state.userSelected,a=this.state.repoSelected;this.initData(t,a,e)}},{key:"render",value:function(){var e=this,t=this.state.eventList;return i.a.createElement("div",{className:"cur-view-content"},this.state.userSelected&&i.a.createElement("span",{className:"audit-unselect-item",onClick:this.filterUser.bind(this,null)},i.a.createElement("span",{className:"no-deco"},this.state.userSelected)," \u2716"),i.a.createElement("table",null,i.a.createElement("thead",null,i.a.createElement("tr",null,i.a.createElement("th",{width:"18%"},Object(p.nb)("Share From")),i.a.createElement("th",{width:"15%"},Object(p.nb)("Share To")),i.a.createElement("th",{width:"8%"},Object(p.nb)("Actions")),i.a.createElement("th",{width:"13%"},Object(p.nb)("Permission")),i.a.createElement("th",{width:"15%"},Object(p.nb)("Library")),i.a.createElement("th",{width:"15%"},Object(p.nb)("Folder")),i.a.createElement("th",{width:"16%"},Object(p.nb)("Date")))),i.a.createElement("tbody",null,t.map((function(t,a){return i.a.createElement(ut,{key:a,permEvent:t,isItemFreezed:e.state.isItemFreezed,filterUser:e.filterUser,userSelected:e.state.userSelected})})))),i.a.createElement("div",{className:"paginator"},1!=this.state.page&&i.a.createElement("a",{href:"#",onClick:function(t){return e.onChangePageNum(t,-1)}},Object(p.nb)("Previous")),1!=this.state.page&&this.state.pageNext&&i.a.createElement("span",null," | "),this.state.pageNext&&i.a.createElement("a",{href:"#",onClick:function(t){return e.onChangePageNum(t,1)}},Object(p.nb)("Next"))))}}]),a}(l.Component),ut=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).onMouseEnter=function(){r.props.isItemFreezed||r.setState({showMenu:!0,highlight:!0})},r.onMouseLeave=function(){r.props.isItemFreezed||r.setState({showMenu:!1,highlight:!1})},r.renderFromUser=function(e){return e.from_user_email?i.a.createElement("span",null,i.a.createElement("a",{href:p.lc+"org/useradmin/info/"+e.from_user_email+"/"},e.from_user_name)," ",i.a.createElement(b.l,{size:"sm",isOpen:r.state.userDropdownOpen,toggle:r.toggleUserDropdown,className:r.state.highlight?"":"vh",tag:"span"},i.a.createElement(b.o,{tag:"i",className:"sf-dropdown-toggle sf2-icon-caret-down"}),i.a.createElement(b.n,null,i.a.createElement(b.m,{onClick:r.props.filterUser.bind(Object(Ze.a)(r),e.from_user_email)},Object(p.nb)("Only Show")," ",i.a.createElement("span",{className:"font-weight-bold"},e.from_user_name))))):Object(p.nb)("Anonymous User")},r.toggleUserDropdown=function(){r.setState({userDropdownOpen:!r.state.userDropdownOpen})},r.renderToUser=function(e){return-1!=e.type.indexOf("public")?i.a.createElement("a",{href:p.lc+"org/"},Object(p.nb)("Organization")):-1!=e.type.indexOf("group")?e.to_group_name?i.a.createElement("a",{href:p.lc+"org/groupadmin/"+e.to_group_id+"/"},e.to_group_name):"Deleted":-1!=e.type.indexOf("user")?i.a.createElement("a",{href:p.lc+"org/useradmin/info/"+e.to_user_email+"/"},e.to_user_name):void 0},r.renderType=function(e){return-1!=e.indexOf("add")&&(e="Add"),-1!=e.indexOf("modify")&&(e="Modify"),-1!=e.indexOf("delete")&&(e="Delete"),e},r.renderRepo=function(e){var t="Deleted";return e.repo_name&&(t=e.repo_name),t},r.renderFolder=function(e){var t="/";return e&&(t=e),t},r.state={highlight:!1,showMenu:!1,isItemMenuShow:!1,userDropdownOpen:!1},r}return Object(r.a)(a,[{key:"render",value:function(){var e=this.props.permEvent;return this.props.userSelected&&e.from_user_email!==this.props.userSelected?null:i.a.createElement("tr",{className:this.state.highlight?"tr-highlight":"",onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave},i.a.createElement("td",null,this.renderFromUser(e)),i.a.createElement("td",null,this.renderToUser(e)),i.a.createElement("td",null,this.renderType(e.type)),i.a.createElement("td",null,E.a.sharePerms(e.permission)),i.a.createElement("td",null,this.renderRepo(e)),i.a.createElement("td",null,this.renderFolder(e.folder_name)),i.a.createElement("td",null,_()(e.time).format("YYYY-MM-DD HH:mm:ss")))}}]),a}(i.a.Component),pt=mt,dt=(a(137),a(94),function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).onCloseSidePanel=function(){r.setState({isSidePanelClosed:!r.state.isSidePanelClosed})},r.tabItemClick=function(e){r.setState({currentTab:e})},r.state={isSidePanelClosed:!1,currentTab:"users"},r}return Object(r.a)(a,[{key:"componentDidMount",value:function(){var e=window.location.href.split("/"),t=e[e.length-2];-1!=location.href.indexOf("".concat(p.lc,"org/useradmin"))&&(t="users"),-1!=location.href.indexOf("".concat(p.lc,"org/groupadmin"))&&(t="groupadmin"),-1!=location.href.indexOf("".concat(p.lc,"org/departmentadmin"))&&(t="departmentadmin"),this.setState({currentTab:t})}},{key:"render",value:function(){var e=this.state,t=e.isSidePanelClosed,a=e.currentTab;return i.a.createElement("div",{id:"main"},i.a.createElement(g,{isSidePanelClosed:t,onCloseSidePanel:this.onCloseSidePanel,currentTab:a,tabItemClick:this.tabItemClick}),i.a.createElement("div",{className:"main-panel o-hidden"},i.a.createElement(u.b,{className:"reach-router"},i.a.createElement(ke,{path:p.lc+"org/orgmanage"}),i.a.createElement(R,{path:p.lc+"org/useradmin"}),i.a.createElement(x,{path:p.lc+"org/useradmin/admins/"}),i.a.createElement(K,{path:p.lc+"org/useradmin/info/:email/"}),i.a.createElement(ee,{path:p.lc+"org/useradmin/info/:email/repos/"}),i.a.createElement(se,{path:p.lc+"org/useradmin/info/:email/shared-repos/"}),i.a.createElement(ce,{path:p.lc+"org/groupadmin"}),i.a.createElement(ge,{path:p.lc+"org/groupadmin/:groupID/"}),i.a.createElement(ve,{path:p.lc+"org/groupadmin/:groupID/repos/"}),i.a.createElement(Se,{path:p.lc+"org/groupadmin/:groupID/members/"}),i.a.createElement(ye,{path:p.lc+"org/repoadmin"}),i.a.createElement(Ue,{path:p.lc+"org/publinkadmin"}),i.a.createElement(Le,{path:p.lc+"org/departmentadmin"},i.a.createElement(Ge,{path:"/"}),i.a.createElement($e,{path:"groups/:groupID"})),i.a.createElement(Xe,{path:p.lc+"org/logadmin",currentTab:a,tabItemClick:this.tabItemClick},i.a.createElement(nt,{path:"/"}),i.a.createElement(it,{path:"file-update"}),i.a.createElement(pt,{path:"perm-audit"})))))}}]),a}(i.a.Component));m.a.render(i.a.createElement(dt,null),document.getElementById("wrapper"))},160:function(e,t,a){},183:function(e,t,a){},431:function(e,t,a){}},[[1267,1,0]]]);
//# sourceMappingURL=orgAdmin.chunk.js.map