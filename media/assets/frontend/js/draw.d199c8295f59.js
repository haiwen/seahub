!function(e){function t(n){if(r[n])return r[n].exports;var i=r[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var r={};t.m=e,t.c=r,t.d=function(e,r,n){t.o(e,r)||Object.defineProperty(e,r,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=1300)}({101:function(e,t){!function(e){"use strict";function t(e){if("string"!==typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function r(e){return"string"!==typeof e&&(e=String(e)),e}function n(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return g.iterable&&(t[Symbol.iterator]=function(){return t}),t}function i(e){this.map={},e instanceof i?e.forEach(function(e,t){this.append(t,e)},this):Array.isArray(e)?e.forEach(function(e){this.append(e[0],e[1])},this):e&&Object.getOwnPropertyNames(e).forEach(function(t){this.append(t,e[t])},this)}function o(e){if(e.bodyUsed)return Promise.reject(new TypeError("Already read"));e.bodyUsed=!0}function a(e){return new Promise(function(t,r){e.onload=function(){t(e.result)},e.onerror=function(){r(e.error)}})}function s(e){var t=new FileReader,r=a(t);return t.readAsArrayBuffer(e),r}function u(e){var t=new FileReader,r=a(t);return t.readAsText(e),r}function p(e){for(var t=new Uint8Array(e),r=new Array(t.length),n=0;n<t.length;n++)r[n]=String.fromCharCode(t[n]);return r.join("")}function d(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function l(){return this.bodyUsed=!1,this._initBody=function(e){if(this._bodyInit=e,e)if("string"===typeof e)this._bodyText=e;else if(g.blob&&Blob.prototype.isPrototypeOf(e))this._bodyBlob=e;else if(g.formData&&FormData.prototype.isPrototypeOf(e))this._bodyFormData=e;else if(g.searchParams&&URLSearchParams.prototype.isPrototypeOf(e))this._bodyText=e.toString();else if(g.arrayBuffer&&g.blob&&y(e))this._bodyArrayBuffer=d(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!g.arrayBuffer||!ArrayBuffer.prototype.isPrototypeOf(e)&&!b(e))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=d(e)}else this._bodyText="";this.headers.get("content-type")||("string"===typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):g.searchParams&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},g.blob&&(this.blob=function(){var e=o(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?o(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(s)}),this.text=function(){var e=o(this);if(e)return e;if(this._bodyBlob)return u(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(p(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},g.formData&&(this.formData=function(){return this.text().then(h)}),this.json=function(){return this.text().then(JSON.parse)},this}function c(e){var t=e.toUpperCase();return k.indexOf(t)>-1?t:e}function f(e,t){t=t||{};var r=t.body;if(e instanceof f){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new i(e.headers)),this.method=e.method,this.mode=e.mode,r||null==e._bodyInit||(r=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"omit",!t.headers&&this.headers||(this.headers=new i(t.headers)),this.method=c(t.method||this.method||"GET"),this.mode=t.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&r)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(r)}function h(e){var t=new FormData;return e.trim().split("&").forEach(function(e){if(e){var r=e.split("="),n=r.shift().replace(/\+/g," "),i=r.join("=").replace(/\+/g," ");t.append(decodeURIComponent(n),decodeURIComponent(i))}}),t}function v(e){var t=new i;return e.split(/\r?\n/).forEach(function(e){var r=e.split(":"),n=r.shift().trim();if(n){var i=r.join(":").trim();t.append(n,i)}}),t}function w(e,t){t||(t={}),this.type="default",this.status="status"in t?t.status:200,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in t?t.statusText:"OK",this.headers=new i(t.headers),this.url=t.url||"",this._initBody(e)}if(!e.fetch){var g={searchParams:"URLSearchParams"in e,iterable:"Symbol"in e&&"iterator"in Symbol,blob:"FileReader"in e&&"Blob"in e&&function(){try{return new Blob,!0}catch(e){return!1}}(),formData:"FormData"in e,arrayBuffer:"ArrayBuffer"in e};if(g.arrayBuffer)var m=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],y=function(e){return e&&DataView.prototype.isPrototypeOf(e)},b=ArrayBuffer.isView||function(e){return e&&m.indexOf(Object.prototype.toString.call(e))>-1};i.prototype.append=function(e,n){e=t(e),n=r(n);var i=this.map[e];this.map[e]=i?i+","+n:n},i.prototype.delete=function(e){delete this.map[t(e)]},i.prototype.get=function(e){return e=t(e),this.has(e)?this.map[e]:null},i.prototype.has=function(e){return this.map.hasOwnProperty(t(e))},i.prototype.set=function(e,n){this.map[t(e)]=r(n)},i.prototype.forEach=function(e,t){for(var r in this.map)this.map.hasOwnProperty(r)&&e.call(t,this.map[r],r,this)},i.prototype.keys=function(){var e=[];return this.forEach(function(t,r){e.push(r)}),n(e)},i.prototype.values=function(){var e=[];return this.forEach(function(t){e.push(t)}),n(e)},i.prototype.entries=function(){var e=[];return this.forEach(function(t,r){e.push([r,t])}),n(e)},g.iterable&&(i.prototype[Symbol.iterator]=i.prototype.entries);var k=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];f.prototype.clone=function(){return new f(this,{body:this._bodyInit})},l.call(f.prototype),l.call(w.prototype),w.prototype.clone=function(){return new w(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new i(this.headers),url:this.url})},w.error=function(){var e=new w(null,{status:0,statusText:""});return e.type="error",e};var _=[301,302,303,307,308];w.redirect=function(e,t){if(-1===_.indexOf(t))throw new RangeError("Invalid status code");return new w(null,{status:t,headers:{location:e}})},e.Headers=i,e.Request=f,e.Response=w,e.fetch=function(e,t){return new Promise(function(r,n){var i=new f(e,t),o=new XMLHttpRequest;o.onload=function(){var e={status:o.status,statusText:o.statusText,headers:v(o.getAllResponseHeaders()||"")};e.url="responseURL"in o?o.responseURL:e.headers.get("X-Request-URL");var t="response"in o?o.response:o.responseText;r(new w(t,e))},o.onerror=function(){n(new TypeError("Network request failed"))},o.ontimeout=function(){n(new TypeError("Network request failed"))},o.open(i.method,i.url,!0),"include"===i.credentials&&(o.withCredentials=!0),"responseType"in o&&g.blob&&(o.responseType="blob"),i.headers.forEach(function(e,t){o.setRequestHeader(t,e)}),o.send("undefined"===typeof i._bodyInit?null:i._bodyInit)})},e.fetch.polyfill=!0}}("undefined"!==typeof self?self:this)},104:function(e,t,r){"use strict";"undefined"===typeof Promise&&(r(105).enable(),window.Promise=r(107)),r(101),Object.assign=r(13)},105:function(e,t,r){"use strict";function n(){p=!1,s._47=null,s._71=null}function i(e){function t(t){(e.allRejections||a(l[t].error,e.whitelist||u))&&(l[t].displayId=d++,e.onUnhandled?(l[t].logged=!0,e.onUnhandled(l[t].displayId,l[t].error)):(l[t].logged=!0,o(l[t].displayId,l[t].error)))}function r(t){l[t].logged&&(e.onHandled?e.onHandled(l[t].displayId,l[t].error):l[t].onUnhandled||(console.warn("Promise Rejection Handled (id: "+l[t].displayId+"):"),console.warn('  This means you can ignore any previous messages of the form "Possible Unhandled Promise Rejection" with id '+l[t].displayId+".")))}e=e||{},p&&n(),p=!0;var i=0,d=0,l={};s._47=function(e){2===e._83&&l[e._56]&&(l[e._56].logged?r(e._56):clearTimeout(l[e._56].timeout),delete l[e._56])},s._71=function(e,r){0===e._75&&(e._56=i++,l[e._56]={displayId:null,error:r,timeout:setTimeout(t.bind(null,e._56),a(r,u)?100:2e3),logged:!1})}}function o(e,t){console.warn("Possible Unhandled Promise Rejection (id: "+e+"):"),((t&&(t.stack||t))+"").split("\n").forEach(function(e){console.warn("  "+e)})}function a(e,t){return t.some(function(t){return e instanceof t})}var s=r(32),u=[ReferenceError,TypeError,RangeError],p=!1;t.disable=n,t.enable=i},106:function(e,t,r){"use strict";(function(t){function r(e){a.length||(o(),s=!0),a[a.length]=e}function n(){for(;u<a.length;){var e=u;if(u+=1,a[e].call(),u>p){for(var t=0,r=a.length-u;t<r;t++)a[t]=a[t+u];a.length-=u,u=0}}a.length=0,u=0,s=!1}function i(e){return function(){function t(){clearTimeout(r),clearInterval(n),e()}var r=setTimeout(t,0),n=setInterval(t,50)}}e.exports=r;var o,a=[],s=!1,u=0,p=1024,d="undefined"!==typeof t?t:self,l=d.MutationObserver||d.WebKitMutationObserver;o="function"===typeof l?function(e){var t=1,r=new l(e),n=document.createTextNode("");return r.observe(n,{characterData:!0}),function(){t=-t,n.data=t}}(n):i(n),r.requestFlush=o,r.makeRequestCallFromTimer=i}).call(t,r(12))},107:function(e,t,r){"use strict";function n(e){var t=new i(i._44);return t._83=1,t._18=e,t}var i=r(32);e.exports=i;var o=n(!0),a=n(!1),s=n(null),u=n(void 0),p=n(0),d=n("");i.resolve=function(e){if(e instanceof i)return e;if(null===e)return s;if(void 0===e)return u;if(!0===e)return o;if(!1===e)return a;if(0===e)return p;if(""===e)return d;if("object"===typeof e||"function"===typeof e)try{var t=e.then;if("function"===typeof t)return new i(t.bind(e))}catch(e){return new i(function(t,r){r(e)})}return n(e)},i.all=function(e){var t=Array.prototype.slice.call(e);return new i(function(e,r){function n(a,s){if(s&&("object"===typeof s||"function"===typeof s)){if(s instanceof i&&s.then===i.prototype.then){for(;3===s._83;)s=s._18;return 1===s._83?n(a,s._18):(2===s._83&&r(s._18),void s.then(function(e){n(a,e)},r))}var u=s.then;if("function"===typeof u){return void new i(u.bind(s)).then(function(e){n(a,e)},r)}}t[a]=s,0===--o&&e(t)}if(0===t.length)return e([]);for(var o=t.length,a=0;a<t.length;a++)n(a,t[a])})},i.reject=function(e){return new i(function(t,r){r(e)})},i.race=function(e){return new i(function(t,r){e.forEach(function(e){i.resolve(e).then(t,r)})})},i.prototype.catch=function(e){return this.then(null,e)}},12:function(e,t){var r;r=function(){return this}();try{r=r||Function("return this")()||(0,eval)("this")}catch(e){"object"===typeof window&&(r=window)}e.exports=r},121:function(e,t,r){"use strict";function n(e,t){if("string"!==typeof e)throw new TypeError("argument str must be a string");for(var r={},n=t||{},i=e.split(u),s=n.decode||a,p=0;p<i.length;p++){var d=i[p],l=d.indexOf("=");if(!(l<0)){var c=d.substr(0,l).trim(),f=d.substr(++l,d.length).trim();'"'==f[0]&&(f=f.slice(1,-1)),void 0==r[c]&&(r[c]=o(f,s))}}return r}function i(e,t,r){var n=r||{},i=n.encode||s;if("function"!==typeof i)throw new TypeError("option encode is invalid");if(!p.test(e))throw new TypeError("argument name is invalid");var o=i(t);if(o&&!p.test(o))throw new TypeError("argument val is invalid");var a=e+"="+o;if(null!=n.maxAge){var u=n.maxAge-0;if(isNaN(u))throw new Error("maxAge should be a Number");a+="; Max-Age="+Math.floor(u)}if(n.domain){if(!p.test(n.domain))throw new TypeError("option domain is invalid");a+="; Domain="+n.domain}if(n.path){if(!p.test(n.path))throw new TypeError("option path is invalid");a+="; Path="+n.path}if(n.expires){if("function"!==typeof n.expires.toUTCString)throw new TypeError("option expires is invalid");a+="; Expires="+n.expires.toUTCString()}if(n.httpOnly&&(a+="; HttpOnly"),n.secure&&(a+="; Secure"),n.sameSite){switch("string"===typeof n.sameSite?n.sameSite.toLowerCase():n.sameSite){case!0:a+="; SameSite=Strict";break;case"lax":a+="; SameSite=Lax";break;case"strict":a+="; SameSite=Strict";break;default:throw new TypeError("option sameSite is invalid")}}return a}function o(e,t){try{return t(e)}catch(t){return e}}t.parse=n,t.serialize=i;var a=decodeURIComponent,s=encodeURIComponent,u=/; */,p=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/},122:function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=r(90),a=r(140),s=function(){function e(){n(this,e)}return i(e,[{key:"init",value:function(e){var t=e.server,r=e.username,n=e.password,i=e.token;return this.server=t,this.username=r,this.password=n,this.token=i,this.token&&this.server&&(this.req=o.create({baseURL:this.server,headers:{Authorization:"Token "+this.token}})),this}},{key:"initForSeahubUsage",value:function(e){var t=e.siteRoot,r=e.xcsrfHeaders;if(t&&"/"===t.charAt(t.length-1)){var n=t.substring(0,t.length-1);this.server=n}else this.server=t;return this.req=o.create({headers:{"X-CSRFToken":r}}),this}},{key:"_sendPostRequest",value:function(e,t){return t.getHeaders?this.req.post(e,t,{headers:t.getHeaders()}):this.req.post(e,t)}},{key:"getToken",value:function(){var e=this,t=this.server+"/api2/auth-token/";o.post(t,{username:this.username,password:this.password}).then(function(t){return e.token=t.data,e.token})}},{key:"login",value:function(){var e=this,t=this.server+"/api2/auth-token/";return o.post(t,{username:this.username,password:this.password}).then(function(t){e.token=t.data.token,e.req=o.create({baseURL:e.server,headers:{Authorization:"Token "+e.token}})})}},{key:"authPing",value:function(){var e=this.server+"/api2/auth/ping/";return this.req.get(e)}},{key:"getAccountInfo",value:function(){var e=this.server+"/api2/account/info/";return this.req.get(e)}},{key:"listGroups",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t={with_repos:e?1:0},r=this.server+"/api/v2.1/groups/";return this.req.get(r,{params:t})}},{key:"listGroupRepos",value:function(e){var t=this.server+"/api/v2.1/groups/"+e+"/libraries/";return this.req.get(t)}},{key:"getGroup",value:function(e){var t=this.server+"/api/v2.1/groups/"+e+"/";return this.req.get(t)}},{key:"createGroup",value:function(e){var t=this.server+"/api/v2.1/groups/",r=new a;return r.append("name",e),this._sendPostRequest(t,r)}},{key:"renameGroup",value:function(e,t){var r=this.server+"/api/v2.1/groups/"+e+"/",n={name:t};return this.req.put(r,n)}},{key:"deleteGroup",value:function(e){var t=this.server+"/api/v2.1/groups/"+e+"/";return this.req.delete(t)}},{key:"transferGroup",value:function(e,t){var r=this.server+"/api/v2.1/groups/"+e+"/",n={owner:t};return this.req.put(r,n)}},{key:"quitGroup",value:function(e,t){var r=encodeURIComponent(t),n=this.server+"/api/v2.1/groups/"+e+"/members/"+r+"/";return this.req.delete(n)}},{key:"listGroupMembers",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:64,n=this.server+"/api/v2.1/groups/"+e+"/members/?avatar_size="+r+"&is_admin="+t;return this.req.get(n)}},{key:"addGroupMember",value:function(e,t){var r=this.server+"/api/v2.1/groups/"+e+"/members/",n={email:t};return this.req.post(r,n)}},{key:"addGroupMembers",value:function(e,t){var r=this.server+"/api/v2.1/groups/"+e+"/members/bulk/",n=new a;return n.append("emails",t.join(",")),this._sendPostRequest(r,n)}},{key:"deleteGroupMember",value:function(e,t){var r=encodeURIComponent(t),n=this.server+"/api/v2.1/groups/"+e+"/members/"+r+"/";return this.req.delete(n)}},{key:"setGroupAdmin",value:function(e,t,r){var n=encodeURIComponent(t),i=this.server+"/api/v2.1/groups/"+e+"/members/"+n+"/",o={is_admin:r};return this.req.put(i,o)}},{key:"createGroupOwnedLibrary",value:function(e,t){var r=t.repo_name,n=t.permission?n:"rw",i=this.server+"/api/v2.1/groups/"+e+"/group-owned-libraries/",o=new a;return o.append("name",r),o.append("permission",n),this._sendPostRequest(i,o)}},{key:"deleteGroupOwnedLibrary",value:function(e,t){var r=this.server+"/api/v2.1/groups/"+e+"/group-owned-libraries/"+t+"/";return this.req.delete(r)}},{key:"renameGroupOwnedLibrary",value:function(e,t,r){var n=this.server+"/api/v2.1/groups/"+e+"/group-owned-libraries/"+t+"/",i=new a;return i.append("name",r),this.req.put(n,i)}},{key:"shareGroupOwnedRepoToUser",value:function(e,t,r){var n=this.server+"/api/v2.1/group-owned-libraries/"+e+"/user-share/",i=new a;return i.append("permission",t),Array.isArray(r)?r.forEach(function(e){i.append("username",e)}):i.append("username",r),this._sendPostRequest(n,i)}},{key:"modifyGroupOwnedRepoUserSharedPermission",value:function(e,t,r){var n=this.server+"/api/v2.1/group-owned-libraries/"+e+"/user-share/",i=new a;return i.append("permission",t),i.append("username",r),this.req.put(n,i)}},{key:"deleteGroupOwnedRepoSharedUserItem",value:function(e,t){var r=this.server+"/api/v2.1/group-owned-libraries/"+e+"/user-share/",n={username:t};return this.req.delete(r,{data:n})}},{key:"shareGroupOwnedRepoToGroup",value:function(e,t,r){var n=this.server+"/api/v2.1/group-owned-libraries/"+e+"/group-share/",i=new a;return i.append("permission",t),Array.isArray(r)?r.forEach(function(e){i.append("group_id",e)}):i.append("group_id",r),this._sendPostRequest(n,i)}},{key:"modifyGroupOwnedRepoGroupSharedPermission",value:function(e,t,r){var n=this.server+"/api/v2.1/group-owned-libraries/"+e+"/group-share/",i=new a;return i.append("permission",t),i.append("group_id",r),this.req.put(n,i)}},{key:"deleteGroupOwnedRepoSharedGroupItem",value:function(e,t){var r=this.server+"/api/v2.1/group-owned-libraries/"+e+"/group-share/",n={group_id:t};return this.req.delete(r,{data:n})}},{key:"listShareLinks",value:function(){var e=this.server+"/api/v2.1/share-links/";return this.req.get(e)}},{key:"listAllShareLinks",value:function(){var e=this.server+"/api/v2.1/share-links/";return this.req.get(e)}},{key:"listRepoShareLinks",value:function(e){var t=this.server+"/api/v2.1/share-links/?repo_id="+e;return this.req.get(t)}},{key:"getShareLink",value:function(e,t){var r=encodeURIComponent(t),n=this.server+"/api/v2.1/share-links/?repo_id="+e+"&path="+r;return this.req.get(n)}},{key:"createShareLink",value:function(e,t,r,n,i){var o=this.server+"/api/v2.1/share-links/",s=new a;return s.append("path",t),s.append("repo_id",e),s.append("permissions",i),r&&s.append("password",r),n&&s.append("expire_days",n),this._sendPostRequest(o,s)}},{key:"deleteShareLink",value:function(e){var t=this.server+"/api/v2.1/share-links/"+e+"/";return this.req.delete(t)}},{key:"listSharedRepos",value:function(){var e=this.server+"/api/v2.1/shared-repos/";return this.req.get(e)}},{key:"listUploadLinks",value:function(){var e=this.server+"/api/v2.1/upload-links/";return this.req.get(e)}},{key:"getUploadLinks",value:function(e,t){var r=this.server+"/api/v2.1/upload-links/?repo_id="+e+"&path="+t;return this.req.get(r)}},{key:"createUploadLink",value:function(e,t,r){var n=this.server+"/api/v2.1/upload-links/",i=new a;return i.append("path",t),i.append("repo_id",e),r&&i.append("password",r),this._sendPostRequest(n,i)}},{key:"deleteUploadLink",value:function(e){var t=this.server+"/api/v2.1/upload-links/"+e+"/";return this.req.delete(t)}},{key:"listSharedItems",value:function(e,t,r){t=encodeURIComponent(t);var n=this.server+"/api2/repos/"+e+"/dir/shared_items/?p="+t+"&share_type="+r;return this.req.get(n)}},{key:"getBeSharedRepos",value:function(){var e=this.server+"/api2/beshared-repos/";return this.req.get(e)}},{key:"leaveShareRepo",value:function(e,t){var r=this.server+"/api2/beshared-repos/"+e+"/";return this.req.delete(r,{params:t})}},{key:"deleteShareToUserItem",value:function(e,t,r,n){t=encodeURIComponent(t);var i=this.server+"/api2/repos/"+e+"/dir/shared_items/?p="+t+"&share_type="+r+"&username="+n;return this.req.delete(i)}},{key:"updateShareToUserItemPermission",value:function(e,t,r,n,i){t=encodeURIComponent(t);var o=this.server+"/api2/repos/"+e+"/dir/shared_items/?p="+t+"&share_type="+r+"&username="+n,s=new a;return s.append("permission",i),this._sendPostRequest(o,s)}},{key:"deleteShareToGroupItem",value:function(e,t,r,n){t=encodeURIComponent(t);var i=this.server+"/api2/repos/"+e+"/dir/shared_items/?p="+t+"&share_type="+r+"&group_id="+n;return this.req.delete(i)}},{key:"updateShareToGroupItemPermission",value:function(e,t,r,n,i){t=encodeURIComponent(t);var o=this.server+"/api2/repos/"+e+"/dir/shared_items/?p="+t+"&share_type="+r+"&group_id="+n,s=new a;return s.append("permission",i),this._sendPostRequest(o,s)}},{key:"leaveShareGroupOwnedRepo",value:function(e){var t=this.server+"/api/v2.1/group-owned-libraries/user-share-in-libraries/"+e+"/";return this.req.delete(t)}},{key:"shareableGroups",value:function(){var e=this.server+"/api/v2.1/shareable-groups/";return this.req.get(e)}},{key:"getSharedRepos",value:function(){var e=this.server+"/api2/shared-repos/";return this.req.get(e)}},{key:"updateRepoSharePerm",value:function(e,t){var r=this.server+"/api/v2.1/shared-repos/"+e+"/";return this.req.put(r,t)}},{key:"unshareRepo",value:function(e,t){var r=this.server+"/api/v2.1/shared-repos/"+e+"/";return this.req.delete(r,{params:t})}},{key:"shareFolder",value:function(e,t,r,n,i){t=encodeURIComponent(t);var o=new a;if(o.append("share_type",r),o.append("permission",n),"user"==r)for(var s=0;s<i.length;s++)o.append("username",i[s]);else for(var u=0;u<i.length;u++)o.append("group_id",i[u]);var p=this.server+"/api2/repos/"+e+"/dir/shared_items/?p="+t;return this.req.put(p,o)}},{key:"listSharedFolders",value:function(){var e=this.server+"/api/v2.1/shared-folders/";return this.req.get(e)}},{key:"updateFolderSharePerm",value:function(e,t,r){var n=this.server+"/api2/repos/"+e+"/dir/shared_items/";return this.req.post(n,t,{params:r})}},{key:"unshareFolder",value:function(e,t){var r=this.server+"/api2/repos/"+e+"/dir/shared_items/";return this.req.delete(r,{params:t})}},{key:"createMineRepo",value:function(e){var t=this.server+"/api2/repos/?from=web";return this.req.post(t,e)}},{key:"createGroupRepo",value:function(e,t){var r=this.server+"/api/v2.1/groups/"+e+"/libraries/",n=new a;return n.append("repo_name",t.repo_name),t.password&&n.append("password",t.password),n.append("permission",t.permission),this._sendPostRequest(r,n)}},{key:"listRepos",value:function(e){var t=this.server+"/api/v2.1/repos/";return e?this.req.get(t,{params:e,paramsSerializer:function(e){var t=[];for(var r in e)if(Array.isArray(e[r]))for(var n=0,i=e[r].length;n<i;n++)t.push(r+"="+encodeURIComponent(e[r][n]));else t.push(r+"="+encodeURIComponent(e[r]));return t.join("&")}}):this.req.get(t)}},{key:"getRepoInfo",value:function(e){var t=this.server+"/api/v2.1/repos/"+e+"/";return this.req.get(t)}},{key:"getRepoHistoryLimit",value:function(e){var t=this.server+"/api2/repos/"+e+"/history-limit/";return this.req.get(t)}},{key:"setRepoHistoryLimit",value:function(e,t){var r=this.server+"/api2/repos/"+e+"/history-limit/",n=new a;return n.append("keep_days",t),this.req.put(r,n)}},{key:"resetAndSendEncryptedRepoPassword",value:function(e){var t=this.server+"/api/v2.1/repos/"+e+"/send-new-password/",r=new a;return this._sendPostRequest(t,r)}},{key:"deleteRepo",value:function(e){var t=this.server+"/api/v2.1/repos/"+e+"/";return this.req.delete(t)}},{key:"renameRepo",value:function(e,t){var r=this.server+"/api2/repos/"+e+"/?op=rename",n=new a;return n.append("repo_name",t),this._sendPostRequest(r,n)}},{key:"transferRepo",value:function(e,t){var r=this.server+"/api2/repos/"+e+"/owner/",n=new a;return n.append("owner",t),this.req.put(r,n)}},{key:"setRepoDecryptPassword",value:function(e,t){var r=this.server+"/api/v2.1/repos/"+e+"/set-password/",n=new a;return n.append("password",t),this._sendPostRequest(r,n)}},{key:"changeEncryptedRepoPassword",value:function(e,t,r){var n=this.server+"/api/v2.1/repos/"+e+"/set-password/",i={old_password:t,new_password:r};return this.req.put(n,i)}},{key:"createPublicRepo",value:function(e){var t=this.server+"/api2/repos/public/";return this.req.post(t,e)}},{key:"selectOwnedRepoToPublic",value:function(e,t){var r=this.server+"/api/v2.1/shared-repos/"+e+"/";return this.req.put(r,t)}},{key:"getSource",value:function(){return o.CancelToken.source()}},{key:"searchFiles",value:function(e,t){var r=this.server+"/api2/search/";return this.req.get(r,{params:e,cancelToken:t})}},{key:"listDeletedRepo",value:function(){var e=this.server+"/api/v2.1/deleted-repos/";return this.req.get(e)}},{key:"restoreDeletedRepo",value:function(e){var t=this.server+"/api/v2.1/deleted-repos/",r=new a;return r.append("repo_id",e),this._sendPostRequest(t,r)}},{key:"listDir",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=r.recursive,i=void 0!==n&&n,o=r.type,a=void 0===o?"":o,s=r.with_thumbnail,u=void 0!==s&&s,p=r.with_parents,d=void 0!==p&&p,l=this.server+"/api/v2.1/repos/"+e+"/dir/",c={};return c.p=t,i&&(c.recursive=i?1:0),a&&(c.t=a),u&&(c.with_thumbnail=u),d&&(c.with_parents=d),this.req.get(l,{params:c})}},{key:"listWikiDir",value:function(e,t,r){var n=encodeURIComponent(t),i=this.server+"/api/v2.1/wikis/"+e+"/dir/?p="+n;return r&&(i=this.server+"/api/v2.1/wikis/"+e+"/dir/?p="+n+"&with_parents="+r),this.req.get(i)}},{key:"getDirInfo",value:function(e,t){var r=encodeURIComponent(t),n=this.server+"/api/v2.1/repos/"+e+"/dir/detail/?path="+r;return this.req.get(n)}},{key:"createDir",value:function(e,t){var r=encodeURIComponent(t),n=this.server+"/api2/repos/"+e+"/dir/?p="+r,i=new a;return i.append("operation","mkdir"),this._sendPostRequest(n,i)}},{key:"renameDir",value:function(e,t,r){var n=encodeURIComponent(t),i=this.server+"/api2/repos/"+e+"/dir/?p="+n,o=new a;return o.append("operation","rename"),o.append("newname",r),this._sendPostRequest(i,o)}},{key:"deleteDir",value:function(e,t){var r=encodeURIComponent(t),n=this.server+"/api2/repos/"+e+"/dir/?p="+r;return this.req.delete(n)}},{key:"copyDir",value:function(e,t,r,n,i){var o=i;if(Array.isArray(i)){o="";for(var s=0;s<i.length;s++)s<i.length-1?o+=i[s]+":":o+=i[s]}var u=encodeURIComponent(n),p=this.server+"/api2/repos/"+e+"/fileops/copy/?p="+u,d=new a;return d.append("dst_repo",t),d.append("dst_dir",r),d.append("file_names",o),this._sendPostRequest(p,d)}},{key:"moveDir",value:function(e,t,r,n,i){var o=i;if(Array.isArray(i)){o="";for(var s=0;s<i.length;s++)s<i.length-1?o+=i[s]+":":o+=i[s]}var u=encodeURIComponent(n),p=this.server+"/api2/repos/"+e+"/fileops/move/?p="+u,d=new a;return d.append("dst_repo",t),d.append("dst_dir",r),d.append("file_names",o),this._sendPostRequest(p,d)}},{key:"deleteMutipleDirents",value:function(e,t,r){for(var n="",i=0;i<r.length;i++)i<r.length-1?n+=r[i]+":":n+=r[i];var o=encodeURIComponent(t),s=this.server+"/api2/repos/"+e+"/fileops/delete/?p="+o,u=new a;return u.append("file_names",n),this._sendPostRequest(s,u)}},{key:"zipDownload",value:function(e,t,r){var n="";if(Array.isArray(r)){for(var i="",o=0;o<r.length;o++)i+="&dirents="+r[o];n=this.server+"/api/v2.1/repos/"+e+"/zip-task/?parent_dir="+t+i}else n=this.server+"/api/v2.1/repos/"+e+"/zip-task/?parent_dir="+t+"&dirents="+r;return this.req.get(n)}},{key:"queryZipProgress",value:function(e){var t=this.server+"/api/v2.1/query-zip-progress/?token="+e;return this.req.get(t)}},{key:"cancelZipTask",value:function(e){var t=this.server+"/api/v2.1/cancel-zip-task/",r=new a;return r.append("token",e),this.req.post(t,r)}},{key:"getFileInfo",value:function(e,t){var r=encodeURIComponent(t),n=this.server+"/api2/repos/"+e+"/file/detail/?p="+r;return this.req.get(n)}},{key:"getFileHistory",value:function(e,t){var r=this.server+"/api2/repos/"+e+"/file/history/?p="+t;return this.req.get(r)}},{key:"getFileDownloadLink",value:function(e,t){var r=encodeURIComponent(t),n=this.server+"/api2/repos/"+e+"/file/?p="+r+"&reuse=1";return this.req.get(n)}},{key:"getFileContent",value:function(e){return o.create().get(e)}},{key:"createFile",value:function(e,t,r){var n=encodeURIComponent(t),i=this.server+"/api/v2.1/repos/"+e+"/file/?p="+n,o=new a;return o.append("operation","create"),o.append("is_draft",r),this._sendPostRequest(i,o)}},{key:"renameFile",value:function(e,t,r){var n=encodeURIComponent(t),i=this.server+"/api/v2.1/repos/"+e+"/file/?p="+n,o=new a;return o.append("operation","rename"),o.append("newname",r),this._sendPostRequest(i,o)}},{key:"lockfile",value:function(e,t){var r=this.server+"/api/v2.1/repos/"+e+"/file/?p="+encodeURIComponent(t),n=new a;return n.append("operation","lock"),this.req.put(r,n)}},{key:"unlockfile",value:function(e,t){var r=this.server+"/api/v2.1/repos/"+e+"/file/?p="+encodeURIComponent(t),n=new a;return n.append("operation","unlock"),this.req.put(r,n)}},{key:"revertFile",value:function(e,t,r){var n=this.server+"/api/v2.1/repos/"+e+"/file/?p="+t,i=new a;return i.append("operation","revert"),i.append("commit_id",r),this._sendPostRequest(n,i)}},{key:"deleteFile",value:function(e,t){var r=encodeURIComponent(t),n=this.server+"/api2/repos/"+e+"/file/?p="+r;return this.req.delete(n)}},{key:"getUploadLink",value:function(e,t){var r=this.server+"/api2/repos/"+e+"/upload-link/?p="+t+"&from=web";return this.req.get(r)}},{key:"getFileUploadedBytes",value:function(e,t,r){var n=this.server+"/api/v2.1/repos/"+e+"/file-uploaded-bytes/",i={parent_dir:t,file_name:r};return this.req.get(n,{params:i})}},{key:"uploadImage",value:function(e,t){return o.create()({method:"post",data:t,url:e})}},{key:"getUpdateLink",value:function(e,t){var r=this.server+"/api2/repos/"+e+"/update-link/?p="+t;return this.req.get(r)}},{key:"updateFile",value:function(e,t,r,n){var i=new a;i.append("target_file",t),i.append("filename",r);var s=new Blob([n],{type:"text/plain"});return i.append("file",s),o.create()({method:"post",url:e,data:i})}},{key:"listFileHistoryRecords",value:function(e,t,r,n){var i=this.server+"/api/v2.1/repos/"+e+"/file/new_history/",o={path:t,page:r,per_page:n};return this.req.get(i,{params:o})}},{key:"getFileRevision",value:function(e,t,r){var n=this.server+"/api2/repos/"+e+"/file/revision/?p="+r+"&commit_id="+t;return this.req.get(n)}},{key:"deleteComment",value:function(e,t){var r=this.server+"/api2/repos/"+e+"/file/comments/"+t+"/";return this.req.delete(r)}},{key:"listComments",value:function(e,t,r){var n=encodeURIComponent(t),i=this.server+"/api2/repos/"+e+"/file/comments/?p="+n;return r&&(i=i+"&resolved="+r),this.req.get(i)}},{key:"postComment",value:function(e,t,r,n){var i=encodeURIComponent(t),o=this.server+"/api2/repos/"+e+"/file/comments/?p="+i,s=new a;return s.append("comment",r),n&&s.append("detail",n),this._sendPostRequest(o,s)}},{key:"getCommentsNumber",value:function(e,t){var r=encodeURIComponent(t),n=this.server+"/api2/repos/"+e+"/file/comments/counts/?p="+r;return this.req.get(n)}},{key:"updateComment",value:function(e,t,r,n,i){var o=this.server+"/api2/repos/"+e+"/file/comments/"+t+"/",a={};return r&&(a.resolved=r),n&&(a.detail=n),i&&(a.comment=i),this.req.put(o,a)}},{key:"getRepoDraftCounts",value:function(e){var t=this.server+"/api/v2.1/repo/"+e+"/draft-counts/";return this.req.get(t)}},{key:"listRepoDrafts",value:function(e){var t=this.server+"/api/v2.1/repo/"+e+"/drafts/";return this.req.get(t)}},{key:"getDraft",value:function(e){var t=this.server+"/api/v2.1/drafts/"+e+"/";return this.req.get(t)}},{key:"listDrafts",value:function(){var e=this.server+"/api/v2.1/drafts";return this.req.get(e)}},{key:"createDraft",value:function(e,t){var r=this.server+"/api/v2.1/drafts/",n=new a;return n.append("repo_id",e),n.append("file_path",t),this.req.post(r,n)}},{key:"deleteDraft",value:function(e){var t=this.server+"/api/v2.1/drafts/"+e+"/";return this.req.delete(t)}},{key:"publishDraft",value:function(e){var t=this.server+"/api/v2.1/drafts/"+e+"/",r={operation:"publish"};return this.req.put(t,r)}},{key:"listDraftReviewers",value:function(e){var t=this.server+"/api/v2.1/drafts/"+e+"/reviewer/";return this.req.get(t)}},{key:"addDraftReviewers",value:function(e,t){for(var r=this.server+"/api/v2.1/drafts/"+e+"/reviewer/",n=new a,i=0;i<t.length;i++)n.append("reviewer",t[i]);return this._sendPostRequest(r,n)}},{key:"deleteDraftReviewer",value:function(e,t){var r=this.server+"/api/v2.1/drafts/"+e+"/reviewer/?username="+t;return this.req.delete(r)}},{key:"listStarredItems",value:function(){var e=this.server+"/api/v2.1/starred-items/";return this.req.get(e)}},{key:"starItem",value:function(e,t){var r=this.server+"/api/v2.1/starred-items/",n=new a;return n.append("repo_id",e),n.append("path",t),this._sendPostRequest(r,n)}},{key:"unStarItem",value:function(e,t){var r=this.server+"/api/v2.1/starred-items/?repo_id="+e+"&path="+t;return this.req.delete(r)}},{key:"listRepoTags",value:function(e){var t=this.server+"/api/v2.1/repos/"+e+"/repo-tags/";return this.req.get(t)}},{key:"createRepoTag",value:function(e,t,r){var n=this.server+"/api/v2.1/repos/"+e+"/repo-tags/",i=new a;return i.append("name",t),i.append("color",r),this._sendPostRequest(n,i)}},{key:"deleteRepoTag",value:function(e,t){var r=this.server+"/api/v2.1/repos/"+e+"/repo-tags/"+t+"/";return this.req.delete(r)}},{key:"updateRepoTag",value:function(e,t,r,n){var i=this.server+"/api/v2.1/repos/"+e+"/repo-tags/"+t+"/",o={name:r,color:n};return this.req.put(i,o)}},{key:"listTaggedFiles",value:function(e,t){var r=this.server+"/api/v2.1/repos/"+e+"/tagged-files/"+t+"/";return this.req.get(r)}},{key:"listFileTags",value:function(e,t){var r=encodeURIComponent(t),n=this.server+"/api/v2.1/repos/"+e+"/file-tags/?file_path="+r;return this.req.get(n)}},{key:"addFileTag",value:function(e,t,r){var n=new a;n.append("file_path",t),n.append("repo_tag_id",r);var i=this.server+"/api/v2.1/repos/"+e+"/file-tags/";return this._sendPostRequest(i,n)}},{key:"deleteFileTag",value:function(e,t){var r=this.server+"/api/v2.1/repos/"+e+"/file-tags/"+t+"/";return this.req.delete(r)}},{key:"listRelatedFiles",value:function(e,t){var r=encodeURIComponent(t),n=this.server+"/api/v2.1/related-files/?repo_id="+e+"&file_path="+r;return this.req.get(n)}},{key:"addRelatedFile",value:function(e,t,r,n){var i=new a;i.append("o_repo_id",e),i.append("r_repo_id",t),i.append("o_path",r),i.append("r_path",n);var o=this.server+"/api/v2.1/related-files/";return this._sendPostRequest(o,i)}},{key:"deleteRelatedFile",value:function(e,t,r){var n=this.server+"/api/v2.1/related-files/"+r+"/",i={repo_id:e,file_path:t};return this.req.delete(n,{data:i})}},{key:"saveSharedFile",value:function(e,t,r){var n=this.server+"/share/link/save/?t="+r,i=new a;return i.append("dst_repo",e),i.append("dst_path",t),i.append("s_token",r),this._sendPostRequest(n,i)}},{key:"getInternalLink",value:function(e,t){var r=encodeURIComponent(t),n=this.server+"/api/v2.1/smart-link/?repo_id="+e+"&path="+r+"&is_dir=false";return this.req.get(n)}},{key:"getWikiFileContent",value:function(e,t){var r=encodeURIComponent(t),n=(new Date).getTime(),i=this.server+"/api/v2.1/wikis/"+e+"/content/?p="+r+"&_="+n;return this.req.get(i)}},{key:"getUserAvatar",value:function(e,t){var r=this.server+"/api2/avatars/user/"+e+"/resized/"+t+"/";return this.req.get(r)}},{key:"listPopupNotices",value:function(){var e=this.server+"/ajax/get_popup_notices/";return this.req.get(e,{headers:{"X-Requested-With":"XMLHttpRequest"}})}},{key:"updateNotifications",value:function(){var e=this.server+"/api/v2.1/notifications/";return this.req.put(e)}},{key:"getUnseenNotificationCount",value:function(){var e=this.server+"/api/v2.1/notifications/";return this.req.get(e)}},{key:"listLinkedDevices",value:function(){var e=this.server+"/api2/devices/";return this.req.get(e)}},{key:"unlinkDevice",value:function(e,t){var r=this.server+"/api2/devices/",n={platform:e,device_id:t};return this.req.delete(r,{data:n})}},{key:"listActivities",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:36,r=this.server+"/api/v2.1/activities/?page="+e+"&avatar_size="+t;return this.req.get(r)}},{key:"createThumbnail",value:function(e,t,r){var n=this.server+"/thumbnail/"+e+"/create/?path="+encodeURIComponent(t)+"&size="+r;return this.req.get(n,{headers:{"X-Requested-With":"XMLHttpRequest"}})}},{key:"searchUsers",value:function(e){var t=this.server+"/api2/search-user/?q="+encodeURIComponent(e);return this.req.get(t)}},{key:"listWikis",value:function(e){var t=this.server+"/api/v2.1/wikis/";return e?this.req.get(t,{params:e,paramsSerializer:function(e){var t=[];for(var r in e)if(Array.isArray(e[r]))for(var n=0,i=e[r].length;n<i;n++)t.push(r+"="+encodeURIComponent(e[r][n]));else t.push(r+"="+encodeURIComponent(e[r]));return t.join("&")}}):this.req.get(t)}},{key:"addWiki",value:function(e,t,r){var n=this.server+"/api/v2.1/wikis/",i=new a;return i.append("use_exist_repo",e),i.append("repo_id",r),i.append("name",t),this._sendPostRequest(n,i)}},{key:"renameWiki",value:function(e,t){var r=this.server+"/api/v2.1/wikis/"+e+"/",n=new a;return n.append("wiki_name",t),this._sendPostRequest(r,n)}},{key:"updateWikiPermission",value:function(e,t){var r=this.server+"/api/v2.1/wikis/"+e+"/",n={permission:t};return this.req.put(r,n)}},{key:"deleteWiki",value:function(e){var t=this.server+"/api/v2.1/wikis/"+e+"/";return this.req.delete(t)}},{key:"fileMetaData",value:function(e,t){var r=this.server+"/api2/repos/"+e+"/file/metadata/?p="+t;return this.req.get(r)}},{key:"dirMetaData",value:function(e,t){var r=this.server+"/api2/repos/"+e+"/dir/metadata/?p="+t;return this.req.get(r)}},{key:"orgAdminGetOrgInfo",value:function(){var e=this.server+"/api/v2.1/org/admin/info/";return this.req.get(e)}},{key:"listOrgUsers",value:function(e,t,r){var n=this.server+"/api/v2.1/org/"+e+"/admin/users/?is_staff="+t+"&page="+r;return this.req.get(n)}},{key:"deleteOrgUser",value:function(e,t){var r=this.server+"/api/v2.1/org/"+e+"/admin/users/"+encodeURIComponent(t)+"/";return this.req.delete(r)}},{key:"resetOrgUserPassword",value:function(e,t){var r=this.server+"/api/v2.1/org/"+e+"/admin/users/"+encodeURIComponent(t)+"/set-password/";return this.req.put(r)}},{key:"changeOrgUserStatus",value:function(e,t){var r=this.server+"/org/useradmin/toggle_status/"+e+"/",n=new a;return n.append("s",t),this.req.post(r,n,{headers:{"X-Requested-With":"XMLHttpRequest"}})}},{key:"addOrgUser",value:function(e,t,r,n){var i=this.server+"/api/v2.1/org/"+e+"/admin/users/",o=new a;return o.append("email",t),o.append("name",r),o.append("password",n),this._sendPostRequest(i,o)}},{key:"setOrgAdmin",value:function(e,t,r){var n=this.server+"/api/v2.1/org/"+e+"/admin/users/"+encodeURIComponent(t)+"/",i=new a;return i.append("is_staff",r),this.req.put(n,i)}},{key:"listOrgGroups",value:function(e,t){var r=this.server+"/api/v2.1/org/"+e+"/admin/groups/?page="+t;return this.req.get(r)}},{key:"deleteOrgGroup",value:function(e,t){var r=this.server+"/api/v2.1/org/"+e+"/admin/groups/"+t+"/";return this.req.delete(r)}},{key:"listOrgRepos",value:function(e,t){var r=this.server+"/api/v2.1/org/"+e+"/admin/repos/?page="+t;return this.req.get(r)}},{key:"deleteOrgRepo",value:function(e,t){var r=this.server+"/api/v2.1/org/"+e+"/admin/repos/"+t+"/";return this.req.delete(r)}},{key:"transferOrgRepo",value:function(e,t,r){var n=this.server+"/api/v2.1/org/"+e+"/admin/repos/"+t+"/",i=new a;return i.append("email",r),this.req.put(n,i)}},{key:"markdownLint",value:function(e){var t=this.server+"/api/v2.1/markdown-lint/",r=new a;return r.append("slate",e),this._sendPostRequest(t,r)}},{key:"listFileScanRecords",value:function(){var e=this.server+"/api/v2.1/admin/file-scan-records/";return this.req.get(e)}},{key:"queryDocumentConvertStatus",value:function(e,t,r,n){var i=this.server+"/office-convert/status/",o={repo_id:e,commit_id:t,path:r,doctype:"document"};return n&&(o.token=n),this.req.get(i,{headers:{"X-Requested-With":"XMLHttpRequest"},params:o})}}]),e}();t.SeafileAPI=s},123:function(e,t,r){"use strict";function n(e){var t=new a(e),r=o(a.prototype.request,t);return i.extend(r,a.prototype,t),i.extend(r,t),r}var i=r(4),o=r(38),a=r(124),s=r(22),u=n(s);u.Axios=a,u.create=function(e){return n(i.merge(s,e))},u.Cancel=r(42),u.CancelToken=r(138),u.isCancel=r(41),u.all=function(e){return Promise.all(e)},u.spread=r(139),e.exports=u,e.exports.default=u},124:function(e,t,r){"use strict";function n(e){this.defaults=e,this.interceptors={request:new a,response:new a}}var i=r(22),o=r(4),a=r(133),s=r(134);n.prototype.request=function(e){"string"===typeof e&&(e=o.merge({url:arguments[0]},arguments[1])),e=o.merge(i,{method:"get"},this.defaults,e),e.method=e.method.toLowerCase();var t=[s,void 0],r=Promise.resolve(e);for(this.interceptors.request.forEach(function(e){t.unshift(e.fulfilled,e.rejected)}),this.interceptors.response.forEach(function(e){t.push(e.fulfilled,e.rejected)});t.length;)r=r.then(t.shift(),t.shift());return r},o.forEach(["delete","get","head","options"],function(e){n.prototype[e]=function(t,r){return this.request(o.merge(r||{},{method:e,url:t}))}}),o.forEach(["post","put","patch"],function(e){n.prototype[e]=function(t,r,n){return this.request(o.merge(n||{},{method:e,url:t,data:r}))}}),e.exports=n},125:function(e,t,r){"use strict";var n=r(4);e.exports=function(e,t){n.forEach(e,function(r,n){n!==t&&n.toUpperCase()===t.toUpperCase()&&(e[t]=r,delete e[n])})}},126:function(e,t,r){"use strict";var n=r(40);e.exports=function(e,t,r){var i=r.config.validateStatus;r.status&&i&&!i(r.status)?t(n("Request failed with status code "+r.status,r.config,null,r.request,r)):e(r)}},127:function(e,t,r){"use strict";e.exports=function(e,t,r,n,i){return e.config=t,r&&(e.code=r),e.request=n,e.response=i,e}},128:function(e,t,r){"use strict";function n(e){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var i=r(4);e.exports=function(e,t,r){if(!t)return e;var o;if(r)o=r(t);else if(i.isURLSearchParams(t))o=t.toString();else{var a=[];i.forEach(t,function(e,t){null!==e&&"undefined"!==typeof e&&(i.isArray(e)?t+="[]":e=[e],i.forEach(e,function(e){i.isDate(e)?e=e.toISOString():i.isObject(e)&&(e=JSON.stringify(e)),a.push(n(t)+"="+n(e))}))}),o=a.join("&")}return o&&(e+=(-1===e.indexOf("?")?"?":"&")+o),e}},129:function(e,t,r){"use strict";var n=r(4),i=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];e.exports=function(e){var t,r,o,a={};return e?(n.forEach(e.split("\n"),function(e){if(o=e.indexOf(":"),t=n.trim(e.substr(0,o)).toLowerCase(),r=n.trim(e.substr(o+1)),t){if(a[t]&&i.indexOf(t)>=0)return;a[t]="set-cookie"===t?(a[t]?a[t]:[]).concat([r]):a[t]?a[t]+", "+r:r}}),a):a}},13:function(e,t,r){"use strict";function n(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}var i=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable;e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},r=0;r<10;r++)t["_"+String.fromCharCode(r)]=r;if("0123456789"!==Object.getOwnPropertyNames(t).map(function(e){return t[e]}).join(""))return!1;var n={};return"abcdefghijklmnopqrst".split("").forEach(function(e){n[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},n)).join("")}catch(e){return!1}}()?Object.assign:function(e,t){for(var r,s,u=n(e),p=1;p<arguments.length;p++){r=Object(arguments[p]);for(var d in r)o.call(r,d)&&(u[d]=r[d]);if(i){s=i(r);for(var l=0;l<s.length;l++)a.call(r,s[l])&&(u[s[l]]=r[s[l]])}}return u}},130:function(e,t,r){"use strict";var n=r(4);e.exports=n.isStandardBrowserEnv()?function(){function e(e){var t=e;return r&&(i.setAttribute("href",t),t=i.href),i.setAttribute("href",t),{href:i.href,protocol:i.protocol?i.protocol.replace(/:$/,""):"",host:i.host,search:i.search?i.search.replace(/^\?/,""):"",hash:i.hash?i.hash.replace(/^#/,""):"",hostname:i.hostname,port:i.port,pathname:"/"===i.pathname.charAt(0)?i.pathname:"/"+i.pathname}}var t,r=/(msie|trident)/i.test(navigator.userAgent),i=document.createElement("a");return t=e(window.location.href),function(r){var i=n.isString(r)?e(r):r;return i.protocol===t.protocol&&i.host===t.host}}():function(){return function(){return!0}}()},1300:function(e,t,r){r(104),e.exports=r(1301)},1301:function(e,t,r){"use strict";function n(e){return o.seafileAPI.getFileContent(window.app.config.rawPath).then(function(t){var r=window.mxUtils.parseXml(t.data);e.editor.setGraphXml(r.documentElement),e.editor.setModified(!1),e.editor.undoManager.clear()})}function i(e){return o.seafileAPI.getUpdateLink(window.app.config.repoID,window.app.config.parentDir).then(function(t){return o.seafileAPI.updateFile(t.data,window.app.config.path,window.app.config.filename,e)})}var o=r(5),a=r(1302),s=function(e){return e&&e.__esModule?e:{default:e}}(a);window.loadFile=n,window.saveFile=i,window.DrawViewer=s.default},1302:function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=r(5),a=window.mxRectangle,s=window.mxGraph,u=window.mxCodec,p=window.mxUtils,d=function(){function e(t){n(this,e),this.graph=t,t.setEnabled(!1)}return i(e,[{key:"loadFile",value:function(){var e=this;o.seafileAPI.getFileContent(window.app.config.rawPath).then(function(t){var r=p.parseXml(t.data);console.log(r.documentElement),e.setGraphXml(r.documentElement)})}},{key:"readGraphState",value:function(e){this.graph.gridEnabled=!1,this.graph.gridSize=parseFloat(e.getAttribute("gridSize"))||window.mxGraph.prototype.gridSize,this.graph.graphHandler.guidesEnabled="0"!=e.getAttribute("guides"),this.graph.setTooltips("0"!=e.getAttribute("tooltips")),this.graph.setConnectable("0"!=e.getAttribute("connect")),this.graph.connectionArrowsEnabled="0"!=e.getAttribute("arrows"),this.graph.foldingEnabled="0"!=e.getAttribute("fold"),this.graph.foldingEnabled&&(this.graph.foldingEnabled=!1,this.graph.cellRenderer.forceControlClickHandler=this.graph.foldingEnabled);var t=e.getAttribute("pageScale");this.graph.pageScale=null!=t?t:window.mxGraph.prototype.pageScale,this.graph.pageVisible=!1,this.graph.pageBreaksVisible=this.graph.pageVisible,this.graph.preferPageSize=this.graph.pageBreaksVisible;var r=e.getAttribute("pageWidth"),n=e.getAttribute("pageHeight");null!=r&&null!=n&&(this.graph.pageFormat=new a(0,0,parseFloat(r),parseFloat(n)));var i=e.getAttribute("background");null!=i&&i.length>0?this.graph.background=i:this.graph.background=this.graph.defaultGraphBackground}},{key:"setGraphXml",value:function(e){if(null!=e){var t=new u(e.ownerDocument);if("mxGraphModel"==e.nodeName){this.graph.model.beginUpdate();try{this.graph.model.clear(),this.graph.view.scale=1,this.readGraphState(e),this.updateGraphComponents(),t.decode(e,this.graph.getModel())}finally{this.graph.model.endUpdate()}}}else this.resetGraph(),this.graph.model.clear()}},{key:"updateGraphComponents",value:function(){var e=this.graph;null!=e.container&&(e.view.validateBackground(),e.container.style.overflow=e.scrollbars?"auto":"hidden")}},{key:"resetGraph",value:function(){this.graph.gridEnabled=!1,this.graph.graphHandler.guidesEnabled=!0,this.graph.setTooltips(!0),this.graph.setConnectable(!0),this.graph.foldingEnabled=!0,this.graph.scrollbars=this.graph.defaultScrollbars,this.graph.pageVisible=this.graph.defaultPageVisible,this.graph.pageBreaksVisible=this.graph.pageVisible,this.graph.preferPageSize=this.graph.pageBreaksVisible,this.graph.background=this.graph.defaultGraphBackground,this.graph.pageScale=s.prototype.pageScale,this.graph.pageFormat=s.prototype.pageFormat,this.graph.currentScale=1,this.graph.currentTranslate.x=0,this.graph.currentTranslate.y=0,this.updateGraphComponents(),this.graph.view.setScale(1)}}]),e}();t.default=d},131:function(e,t,r){"use strict";function n(){this.message="String contains an invalid character"}function i(e){for(var t,r,i=String(e),a="",s=0,u=o;i.charAt(0|s)||(u="=",s%1);a+=u.charAt(63&t>>8-s%1*8)){if((r=i.charCodeAt(s+=.75))>255)throw new n;t=t<<8|r}return a}var o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";n.prototype=new Error,n.prototype.code=5,n.prototype.name="InvalidCharacterError",e.exports=i},132:function(e,t,r){"use strict";var n=r(4);e.exports=n.isStandardBrowserEnv()?function(){return{write:function(e,t,r,i,o,a){var s=[];s.push(e+"="+encodeURIComponent(t)),n.isNumber(r)&&s.push("expires="+new Date(r).toGMTString()),n.isString(i)&&s.push("path="+i),n.isString(o)&&s.push("domain="+o),!0===a&&s.push("secure"),document.cookie=s.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}()},133:function(e,t,r){"use strict";function n(){this.handlers=[]}var i=r(4);n.prototype.use=function(e,t){return this.handlers.push({fulfilled:e,rejected:t}),this.handlers.length-1},n.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},n.prototype.forEach=function(e){i.forEach(this.handlers,function(t){null!==t&&e(t)})},e.exports=n},134:function(e,t,r){"use strict";function n(e){e.cancelToken&&e.cancelToken.throwIfRequested()}var i=r(4),o=r(135),a=r(41),s=r(22),u=r(136),p=r(137);e.exports=function(e){return n(e),e.baseURL&&!u(e.url)&&(e.url=p(e.baseURL,e.url)),e.headers=e.headers||{},e.data=o(e.data,e.headers,e.transformRequest),e.headers=i.merge(e.headers.common||{},e.headers[e.method]||{},e.headers||{}),i.forEach(["delete","get","head","post","put","patch","common"],function(t){delete e.headers[t]}),(e.adapter||s.adapter)(e).then(function(t){return n(e),t.data=o(t.data,t.headers,e.transformResponse),t},function(t){return a(t)||(n(e),t&&t.response&&(t.response.data=o(t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)})}},135:function(e,t,r){"use strict";var n=r(4);e.exports=function(e,t,r){return n.forEach(r,function(r){e=r(e,t)}),e}},136:function(e,t,r){"use strict";e.exports=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)}},137:function(e,t,r){"use strict";e.exports=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}},138:function(e,t,r){"use strict";function n(e){if("function"!==typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise(function(e){t=e});var r=this;e(function(e){r.reason||(r.reason=new i(e),t(r.reason))})}var i=r(42);n.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},n.source=function(){var e;return{token:new n(function(t){e=t}),cancel:e}},e.exports=n},139:function(e,t,r){"use strict";e.exports=function(e){return function(t){return e.apply(null,t)}}},14:function(e,t){function r(){throw new Error("setTimeout has not been defined")}function n(){throw new Error("clearTimeout has not been defined")}function i(e){if(d===setTimeout)return setTimeout(e,0);if((d===r||!d)&&setTimeout)return d=setTimeout,setTimeout(e,0);try{return d(e,0)}catch(t){try{return d.call(null,e,0)}catch(t){return d.call(this,e,0)}}}function o(e){if(l===clearTimeout)return clearTimeout(e);if((l===n||!l)&&clearTimeout)return l=clearTimeout,clearTimeout(e);try{return l(e)}catch(t){try{return l.call(null,e)}catch(t){return l.call(this,e)}}}function a(){v&&f&&(v=!1,f.length?h=f.concat(h):w=-1,h.length&&s())}function s(){if(!v){var e=i(a);v=!0;for(var t=h.length;t;){for(f=h,h=[];++w<t;)f&&f[w].run();w=-1,t=h.length}f=null,v=!1,o(e)}}function u(e,t){this.fun=e,this.array=t}function p(){}var d,l,c=e.exports={};!function(){try{d="function"===typeof setTimeout?setTimeout:r}catch(e){d=r}try{l="function"===typeof clearTimeout?clearTimeout:n}catch(e){l=n}}();var f,h=[],v=!1,w=-1;c.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];h.push(new u(e,t)),1!==h.length||v||i(s)},u.prototype.run=function(){this.fun.apply(null,this.array)},c.title="browser",c.browser=!0,c.env={},c.argv=[],c.version="",c.versions={},c.on=p,c.addListener=p,c.once=p,c.off=p,c.removeListener=p,c.removeAllListeners=p,c.emit=p,c.prependListener=p,c.prependOnceListener=p,c.listeners=function(e){return[]},c.binding=function(e){throw new Error("process.binding is not supported")},c.cwd=function(){return"/"},c.chdir=function(e){throw new Error("process.chdir is not supported")},c.umask=function(){return 0}},140:function(e,t){e.exports="object"==typeof self?self.FormData:window.FormData},22:function(e,t,r){"use strict";(function(t){function n(e,t){!i.isUndefined(e)&&i.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var i=r(4),o=r(125),a={"Content-Type":"application/x-www-form-urlencoded"},s={adapter:function(){var e;return"undefined"!==typeof XMLHttpRequest?e=r(39):"undefined"!==typeof t&&(e=r(39)),e}(),transformRequest:[function(e,t){return o(t,"Content-Type"),i.isFormData(e)||i.isArrayBuffer(e)||i.isBuffer(e)||i.isStream(e)||i.isFile(e)||i.isBlob(e)?e:i.isArrayBufferView(e)?e.buffer:i.isURLSearchParams(e)?(n(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):i.isObject(e)?(n(t,"application/json;charset=utf-8"),JSON.stringify(e)):e}],transformResponse:[function(e){if("string"===typeof e)try{e=JSON.parse(e)}catch(e){}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,validateStatus:function(e){return e>=200&&e<300}};s.headers={common:{Accept:"application/json, text/plain, */*"}},i.forEach(["delete","get","head"],function(e){s.headers[e]={}}),i.forEach(["post","put","patch"],function(e){s.headers[e]=i.merge(a)}),e.exports=s}).call(t,r(14))},3:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.dirPath="/",t.gettext=window.gettext,t.siteRoot=window.app.config.siteRoot,t.loginUrl=window.app.config.loginUrl,t.avatarInfo=window.app.config.avatarInfo,t.logoPath=window.app.config.logoPath,t.mediaUrl=window.app.config.mediaUrl,t.siteTitle=window.app.config.siteTitle,t.siteName=window.app.config.siteName,t.logoWidth=window.app.config.logoWidth,t.logoHeight=window.app.config.logoHeight,t.isPro="True"===window.app.config.isPro,t.lang=window.app.config.lang,t.fileServerRoot=window.app.config.fileServerRoot,t.seafileVersion=window.app.config.seafileVersion,t.serviceURL=window.app.config.serviceURL,t.seafileCollabServer=window.app.pageOptions.seafileCollabServer,t.name=window.app.pageOptions.name,t.contactEmail=window.app.pageOptions.contactEmail,t.username=window.app.pageOptions.username,t.canAddRepo=window.app.pageOptions.canAddRepo,t.canGenerateShareLink=window.app.pageOptions.canGenerateShareLink,t.canGenerateUploadLink=!!window.app.pageOptions.canGenerateUploadLink,t.canViewOrg="True"===window.app.pageOptions.canViewOrg,t.fileAuditEnabled=!!window.app.pageOptions.fileAuditEnabled,t.enableFileComment=!!window.app.pageOptions.enableFileComment,t.folderPermEnabled="True"===window.app.pageOptions.folderPermEnabled,t.enableResetEncryptedRepoPassword="True"===window.app.pageOptions.enableResetEncryptedRepoPassword,t.isEmailConfigured="True"===window.app.pageOptions.isEmailConfigured,t.enableUploadFolder="True"===window.app.pageOptions.enableUploadFolder,t.enableResumableFileUpload="True"===window.app.pageOptions.enableResumableFileUpload,t.storages=window.app.pageOptions.storages,t.enableRepoSnapshotLabel=window.app.pageOptions.enableRepoSnapshotLabel,t.shareLinkExpireDaysMin=window.app.pageOptions.shareLinkExpireDaysMin,t.shareLinkExpireDaysMax=window.app.pageOptions.shareLinkExpireDaysMax,t.maxFileName=window.app.pageOptions.maxFileName,t.enableWiki=window.app.pageOptions.enableWiki,t.enableEncryptedLibrary="1"===window.app.pageOptions.enableEncryptedLibrary,t.enableRepoHistorySetting="1"===window.app.pageOptions.enableRepoHistorySetting,t.isSystemStaff=window.app.pageOptions.isSystemStaff,t.thumbnailSizeForOriginal=window.app.pageOptions.thumbnailSizeForOriginal,t.repoPasswordMinLength=window.app.pageOptions.repoPasswordMinLength,t.curNoteMsg=window.app.pageOptions.curNoteMsg,t.curNoteID=window.app.pageOptions.curNoteID,t.slug=window.wiki?window.wiki.config.slug:"",t.repoID=window.wiki?window.wiki.config.repoId:"",t.initialPath=window.wiki?window.wiki.config.initial_path:"",t.permission=window.wiki?"True"===window.wiki.config.permission:"",t.isDir=window.wiki?window.wiki.config.isDir:"",t.serviceUrl=window.wiki?window.wiki.config.serviceUrl:"",t.isPublicWiki=window.wiki?"True"===window.wiki.config.isPublicWiki:"",t.PER_PAGE=25,t.historyRepoID=window.fileHistory?window.fileHistory.pageOptions.repoID:"",t.repoName=window.fileHistory?window.fileHistory.pageOptions.repoName:"",t.filePath=window.fileHistory?window.fileHistory.pageOptions.filePath:"",t.fileName=window.fileHistory?window.fileHistory.pageOptions.fileName:"",t.draftFilePath=window.draft?window.draft.config.draftFilePath:"",t.draftOriginFilePath=window.draft?window.draft.config.draftOriginFilePath:"",t.draftFileName=window.draft?window.draft.config.draftFileName:"",t.draftID=window.draft?window.draft.config.draftID:"",t.draftRepoID=window.draft?window.draft.config.draftRepoID:"",t.author=window.draft?window.draft.config.author:"",t.authorAvatar=window.draft?window.draft.config.authorAvatar:"",t.originFileExists=window.draft?window.draft.config.originFileExists:"",t.draftFileExists=window.draft?window.draft.config.draftFileExists:"",t.draftStatus=window.draft?window.draft.config.draftStatus:"",t.draftPublishVersion=window.draft?window.draft.config.draftPublishVersion:"",t.originFileVersion=window.draft?window.draft.config.originFileVersion:"",t.orgID=window.org?window.org.pageOptions.orgID:"",t.invitationLink=window.org?window.org.pageOptions.invitationLink:"",t.orgMemberQuotaEnabled=window.org?window.org.pageOptions.orgMemberQuotaEnabled:"",t.constanceEnabled=window.sysadmin?window.sysadmin.pageOptions.constance_enabled:"",t.multiTenancy=window.sysadmin?window.sysadmin.pageOptions.multi_tenancy:"",t.multiInstitution=window.sysadmin?window.sysadmin.pageOptions.multi_institution:"",t.sysadminExtraEnabled=window.sysadmin?window.sysadmin.pageOptions.sysadmin_extra_enabled:"",t.enableGuestInvitation=window.sysadmin?window.sysadmin.pageOptions.enable_guest_invitation:"",t.enableTermsAndConditions=window.sysadmin?window.sysadmin.pageOptions.enable_terms_and_conditions:"",t.isDefaultAdmin=window.sysadmin?window.sysadmin.pageOptions.is_default_admin:"",t.enableFileScan=window.sysadmin?window.sysadmin.pageOptions.enable_file_scan:"",t.canViewSystemInfo=window.sysadmin?window.sysadmin.pageOptions.admin_permissions.can_view_system_info:"",t.canViewStatistic=window.sysadmin?window.sysadmin.pageOptions.admin_permissions.can_view_statistic:"",t.canConfigSystem=window.sysadmin?window.sysadmin.pageOptions.admin_permissions.can_config_system:"",t.canManageLibrary=window.sysadmin?window.sysadmin.pageOptions.admin_permissions.can_manage_library:"",t.canManageUser=window.sysadmin?window.sysadmin.pageOptions.admin_permissions.can_manage_user:"",t.canManageGroup=window.sysadmin?window.sysadmin.pageOptions.admin_permissions.can_manage_group:"",t.canViewUserLog=window.sysadmin?window.sysadmin.pageOptions.admin_permissions.can_view_user_log:"",t.canViewAdminLog=window.sysadmin?window.sysadmin.pageOptions.admin_permissions.can_view_admin_log:""},32:function(e,t,r){"use strict";function n(){}function i(e){try{return e.then}catch(e){return g=e,m}}function o(e,t){try{return e(t)}catch(e){return g=e,m}}function a(e,t,r){try{e(t,r)}catch(e){return g=e,m}}function s(e){if("object"!==typeof this)throw new TypeError("Promises must be constructed via new");if("function"!==typeof e)throw new TypeError("Promise constructor's argument is not a function");this._75=0,this._83=0,this._18=null,this._38=null,e!==n&&v(e,this)}function u(e,t,r){return new e.constructor(function(i,o){var a=new s(n);a.then(i,o),p(e,new h(t,r,a))})}function p(e,t){for(;3===e._83;)e=e._18;if(s._47&&s._47(e),0===e._83)return 0===e._75?(e._75=1,void(e._38=t)):1===e._75?(e._75=2,void(e._38=[e._38,t])):void e._38.push(t);d(e,t)}function d(e,t){w(function(){var r=1===e._83?t.onFulfilled:t.onRejected;if(null===r)return void(1===e._83?l(t.promise,e._18):c(t.promise,e._18));var n=o(r,e._18);n===m?c(t.promise,g):l(t.promise,n)})}function l(e,t){if(t===e)return c(e,new TypeError("A promise cannot be resolved with itself."));if(t&&("object"===typeof t||"function"===typeof t)){var r=i(t);if(r===m)return c(e,g);if(r===e.then&&t instanceof s)return e._83=3,e._18=t,void f(e);if("function"===typeof r)return void v(r.bind(t),e)}e._83=1,e._18=t,f(e)}function c(e,t){e._83=2,e._18=t,s._71&&s._71(e,t),f(e)}function f(e){if(1===e._75&&(p(e,e._38),e._38=null),2===e._75){for(var t=0;t<e._38.length;t++)p(e,e._38[t]);e._38=null}}function h(e,t,r){this.onFulfilled="function"===typeof e?e:null,this.onRejected="function"===typeof t?t:null,this.promise=r}function v(e,t){var r=!1,n=a(e,function(e){r||(r=!0,l(t,e))},function(e){r||(r=!0,c(t,e))});r||n!==m||(r=!0,c(t,g))}var w=r(106),g=null,m={};e.exports=s,s._47=null,s._71=null,s._44=n,s.prototype.then=function(e,t){if(this.constructor!==s)return u(this,e,t);var r=new s(n);return p(this,new h(e,t,r)),r}},38:function(e,t,r){"use strict";e.exports=function(e,t){return function(){for(var r=new Array(arguments.length),n=0;n<r.length;n++)r[n]=arguments[n];return e.apply(t,r)}}},39:function(e,t,r){"use strict";var n=r(4),i=r(126),o=r(128),a=r(129),s=r(130),u=r(40),p="undefined"!==typeof window&&window.btoa&&window.btoa.bind(window)||r(131);e.exports=function(e){return new Promise(function(t,d){var l=e.data,c=e.headers;n.isFormData(l)&&delete c["Content-Type"];var f=new XMLHttpRequest,h="onreadystatechange",v=!1;if("undefined"===typeof window||!window.XDomainRequest||"withCredentials"in f||s(e.url)||(f=new window.XDomainRequest,h="onload",v=!0,f.onprogress=function(){},f.ontimeout=function(){}),e.auth){var w=e.auth.username||"",g=e.auth.password||"";c.Authorization="Basic "+p(w+":"+g)}if(f.open(e.method.toUpperCase(),o(e.url,e.params,e.paramsSerializer),!0),f.timeout=e.timeout,f[h]=function(){if(f&&(4===f.readyState||v)&&(0!==f.status||f.responseURL&&0===f.responseURL.indexOf("file:"))){var r="getAllResponseHeaders"in f?a(f.getAllResponseHeaders()):null,n=e.responseType&&"text"!==e.responseType?f.response:f.responseText,o={data:n,status:1223===f.status?204:f.status,statusText:1223===f.status?"No Content":f.statusText,headers:r,config:e,request:f};i(t,d,o),f=null}},f.onerror=function(){d(u("Network Error",e,null,f)),f=null},f.ontimeout=function(){d(u("timeout of "+e.timeout+"ms exceeded",e,"ECONNABORTED",f)),f=null},n.isStandardBrowserEnv()){var m=r(132),y=(e.withCredentials||s(e.url))&&e.xsrfCookieName?m.read(e.xsrfCookieName):void 0;y&&(c[e.xsrfHeaderName]=y)}if("setRequestHeader"in f&&n.forEach(c,function(e,t){"undefined"===typeof l&&"content-type"===t.toLowerCase()?delete c[t]:f.setRequestHeader(t,e)}),e.withCredentials&&(f.withCredentials=!0),e.responseType)try{f.responseType=e.responseType}catch(t){if("json"!==e.responseType)throw t}"function"===typeof e.onDownloadProgress&&f.addEventListener("progress",e.onDownloadProgress),"function"===typeof e.onUploadProgress&&f.upload&&f.upload.addEventListener("progress",e.onUploadProgress),e.cancelToken&&e.cancelToken.promise.then(function(e){f&&(f.abort(),d(e),f=null)}),void 0===l&&(l=null),f.send(l)})}},4:function(e,t,r){"use strict";function n(e){return"[object Array]"===q.call(e)}function i(e){return"[object ArrayBuffer]"===q.call(e)}function o(e){return"undefined"!==typeof FormData&&e instanceof FormData}function a(e){return"undefined"!==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&e.buffer instanceof ArrayBuffer}function s(e){return"string"===typeof e}function u(e){return"number"===typeof e}function p(e){return"undefined"===typeof e}function d(e){return null!==e&&"object"===typeof e}function l(e){return"[object Date]"===q.call(e)}function c(e){return"[object File]"===q.call(e)}function f(e){return"[object Blob]"===q.call(e)}function h(e){return"[object Function]"===q.call(e)}function v(e){return d(e)&&h(e.pipe)}function w(e){return"undefined"!==typeof URLSearchParams&&e instanceof URLSearchParams}function g(e){return e.replace(/^\s*/,"").replace(/\s*$/,"")}function m(){return("undefined"===typeof navigator||"ReactNative"!==navigator.product)&&("undefined"!==typeof window&&"undefined"!==typeof document)}function y(e,t){if(null!==e&&"undefined"!==typeof e)if("object"!==typeof e&&(e=[e]),n(e))for(var r=0,i=e.length;r<i;r++)t.call(null,e[r],r,e);else for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.call(null,e[o],o,e)}function b(){function e(e,r){"object"===typeof t[r]&&"object"===typeof e?t[r]=b(t[r],e):t[r]=e}for(var t={},r=0,n=arguments.length;r<n;r++)y(arguments[r],e);return t}function k(e,t,r){return y(t,function(t,n){e[n]=r&&"function"===typeof t?_(t,r):t}),e}var _=r(38),R=r(72),q=Object.prototype.toString;e.exports={isArray:n,isArrayBuffer:i,isBuffer:R,isFormData:o,isArrayBufferView:a,isString:s,isNumber:u,isObject:d,isUndefined:p,isDate:l,isFile:c,isBlob:f,isFunction:h,isStream:v,isURLSearchParams:w,isStandardBrowserEnv:m,forEach:y,merge:b,extend:k,trim:g}},40:function(e,t,r){"use strict";var n=r(127);e.exports=function(e,t,r,i,o){var a=new Error(e);return n(a,t,r,i,o)}},41:function(e,t,r){"use strict";e.exports=function(e){return!(!e||!e.__CANCEL__)}},42:function(e,t,r){"use strict";function n(e){this.message=e}n.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},n.prototype.__CANCEL__=!0,e.exports=n},5:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.seafileAPI=void 0;var n=r(83),i=function(e){return e&&e.__esModule?e:{default:e}}(n),o=r(122),a=r(3),s=new o.SeafileAPI,u=i.default.load("sfcsrftoken");s.initForSeahubUsage({siteRoot:a.siteRoot,xcsrfHeaders:u}),t.seafileAPI=s},72:function(e,t){function r(e){return!!e.constructor&&"function"===typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}function n(e){return"function"===typeof e.readFloatLE&&"function"===typeof e.slice&&r(e.slice(0,0))}e.exports=function(e){return null!=e&&(r(e)||n(e)||!!e._isBuffer)}},83:function(e,t,r){"use strict";(function(e){function n(e){return e&&e.__esModule?e:{default:e}}function i(){return y&&!y.headersSent}function o(e,t){var r=g?m:h.default.parse(document.cookie),n=r&&r[e];if("undefined"===typeof t&&(t=!n||"{"!==n[0]&&"["!==n[0]),!t)try{n=JSON.parse(n)}catch(e){}return n}function a(e){var t=g?m:h.default.parse(document.cookie),r=t;if("undefined"===typeof e&&(e=!r||"{"!==r[0]&&"["!==r[0]),!e)try{r=JSON.parse(r)}catch(e){}return r}function s(e){var t=g?m:h.default.parse(document.cookie);return t?e?Object.keys(t).reduce(function(r,n){if(!e.test(n))return r;var i={};return i[n]=t[n],(0,w.default)({},r,i)},{}):t:{}}function u(e,t,r){m[e]=t,"object"===("undefined"===typeof t?"undefined":c(t))&&(m[e]=JSON.stringify(t)),g||(document.cookie=h.default.serialize(e,m[e],r)),i()&&y.cookie&&y.cookie(e,t,r)}function p(e,t){delete m[e],t="undefined"===typeof t?{}:"string"===typeof t?{path:t}:(0,w.default)({},t),"undefined"!==typeof document&&(t.expires=new Date(1970,1,1,0,0,1),t.maxAge=0,document.cookie=h.default.serialize(e,"",t)),i()&&y.clearCookie&&y.clearCookie(e,t)}function d(e){m=e?h.default.parse(e):{}}function l(e,t){return e.cookie?m=e.cookie:e.cookies?m=e.cookies:e.headers&&e.headers.cookie?d(e.headers.cookie):m={},y=t,function(){y=null,m={}}}Object.defineProperty(t,"__esModule",{value:!0});var c="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.load=o,t.loadAll=a,t.select=s,t.save=u,t.remove=p,t.setRawCookie=d,t.plugToRequest=l;var f=r(121),h=n(f),v=r(13),w=n(v),g="undefined"===typeof document||e&&Object({NODE_ENV:"production",PUBLIC_URL:"/media/seafile-editor"})&&!1,m={},y=void 0;t.default={setRawCookie:d,load:o,loadAll:a,select:s,save:u,remove:p,plugToRequest:l}}).call(t,r(14))},90:function(e,t,r){e.exports=r(123)}});
//# sourceMappingURL=draw.js.map