{% extends 'base_for_backbone.html' %}
{% load seahub_tags avatar_tags i18n %}
{% load url from future %}

{% block sub_title %}{% trans "Organization" %} - {% endblock %}

{% block extra_style %}
<style type="text/css">
/* lib view */
.repo-file-list .dirent-name {
    width:260px;
}
.repo-file-list .dirent-size {
    width:114px;
}
.repo-file-list .dirent-update {
    width:123px;
}
.repo-file-list .dirent-op {
    width:110px;
}
</style>
{% endblock %}

{% block left_panel %}
<div class="side-tabnav">
    <h3 class="hd">{% trans "Organization" %}</h3>
    <ul class="side-tabnav-tabs">
        <li class="tab tab-cur"><a href="{% url 'pubrepo' %}" class="lib">{% trans "Libraries" %}</a></li>
        <li class="tab {% block cur_grp %}{% endblock %}"><a href="{% url 'pubgrp' %}" class="group">{% trans "Groups" %}</a></li>
        <li class="tab {% block cur_user %}{% endblock %}"><a href="{% url 'pubuser' %}" class="members">{% trans "Members" %}</a></li>
    </ul>
</div>
{% endblock %}

{% block right_panel %}
<div id="organization-repos">
    <div class="hd ovhd">
        <h3 class="fleft">{% trans "Libraries" %}</h3>
        <button id="repo-create" class="fright"><img src="{{ MEDIA_URL }}img/add.png" alt="" class="add vam" /><span class="vam">{% trans "New Library"%}</span></button>
    </div>

    <table class="repo-list hide">
    <thead>
        <tr>
            <th width="4%"></th>
            <th width="20%">{% trans "Name"%} <span id="pub-repo-list-name-down" class="icon-caret-up cspt"></span> <span id="pub-repo-list-name-up" class="icon-caret-down cspt hide"></span></th>
            <th width="20%">{% trans "Description"%}</th>
            <th width="20%">{% trans "Last Update"%} <span id="pub-repo-list-time-up" class="icon-caret-up cspt hide"></span> <span id="pub-repo-list-time-down" class="icon-caret-down cspt"></span></th>
            <th width="20%">{% trans "Share From"%}</th>
            <th width="16%">{% trans "Operations"%}</th>
        </tr>
    </thead>
    <tbody>
    </tbody>
    </table>
    <img src="{{MEDIA_URL}}img/loading-icon.gif" alt="" class="loading-tip" />
    <div class="empty-tips hide">
        <h2 class="alc">{% trans "No public library" %}</h2>
        <p>{% blocktrans %}You can create a public library by clicking "New Library" button, others can view and download this library.{% endblocktrans %}</p>
    </div>
</div>

<div id="dir-view" class="hide">
  <div class="repo-file-list-topbar">
    <p class="path"></p>
    <div class="repo-op"></div>
  </div>
  <table class="repo-file-list">
    <thead>
    <tr>
      <th class="select">
        <span class="checkbox"><input type="checkbox" class="checkbox-orig" /></span>
      </th>
      <th class="star"></th>
      <th class="dirent-icon"></th>
      <th><span class="dirent-name">{% trans "Name"%} <span id="by-name" class="icon-caret-up cspt"></span></span></th>
      <th class="dirent-size">{% trans "Size"%}</th>
      <th class="dirent-update">{% trans "Last Update" %} <span id="by-time" class="icon-caret-down cspt"></span></th>
      <th class="dirent-op">{% trans "Operations"%}</th>
    </tr>
    </thead>
    <tbody>
    </tbody>
  </table>
  <img class="loading-tip" src="{{MEDIA_URL}}img/loading-icon.gif" alt="{% trans 'Loading...' %}" />
</div>

{% endblock %}

{% block extra_script %}
{% include "js/lib-op-popups.html" %}
<script>
app["pageOptions"] = {
    site_root: "{{ SITE_ROOT }}",
    base_url: "{{ SITE_ROOT }}" + "home/my/",
    reposUrl: "{% url 'api2-repos' %}",
    current_user: "{{ request.user.username }}",
    is_staff: {% if request.user.is_staff %} true {% else %} false {% endif %}
};
</script>
<script data-main="{{ MEDIA_URL }}scripts/organization" src="{{ MEDIA_URL }}scripts/lib/require.js"></script>
{% endblock %}
