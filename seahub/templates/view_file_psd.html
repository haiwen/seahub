{% extends 'view_file_base.html' %}
{% load seahub_tags avatar_tags group_avatar_tags i18n staticfiles %}
{% load i18n %}
{% load url from future %}

{% block extra_style %}{{block.super}}
<style type="text/css">
body { overflow:hidden; }
#file-view { text-align:center; padding:30px 0; height:10000px; position:relative; }
</style>

{% endblock %}

{% block file_view %}
	<span id="loading" class="loading-icon"></span>
	<div id="image-view" style="margin: 0 auto">
	</div>
{% endblock %}

{% block extra_script %}{{ block.super }}

<script src='{% static "scripts/lib/psd.min.js" %}'></script> 
<script type="text/javascript">
var PSD = require('psd');

// Load from URL
PSD.fromURL("{{raw_path}}").then(function(psd) {
	document.getElementById('image-view').appendChild(psd.image.toPng());
	$("#loading").attr("class","")	 
	$("#image-view").width(psd.tree().export().document.width );
});

</script>
{% endblock %}
