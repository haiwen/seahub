{% extends 'view_file_base.html' %}
{% load i18n %}
{% load url from future %}

{% block extra_style %}{{block.super}}
<style type="text/css">
html { overflow:hidden; }
#file-view { 
    text-align:center;
    padding:30px 0;
    position:relative;
}
.loading-tip {
    position: absolute;
    top: 0;
    bottom: 0;
    left: 0;
    right: 0;
    margin: auto;
}
</style>
{% endblock %}

{% block file_view %}
<img src="{{MEDIA_URL}}img/loading-icon.gif" alt="{% trans "Loading..." %}" class="loading-tip" />
<img src="{{ raw_path }}" alt="{{ u_filename}}" id="image-view" />
{% endblock %}

{% block extra_script %}{{ block.super }}

<script type="text/javascript">
function setImgMaxHeight() {
    var file_view = $('#file-view');
    file_view.outerHeight($(window).height() - file_view.offset().top);
    $('#image-view').css({
        'max-height': $(window).height() - file_view.offset().top - parseInt(file_view.css('padding-top')) - parseInt(file_view.css('padding-bottom'))
    });
}
$(function() {
    setImgMaxHeight();
});
$(window).resize(setImgMaxHeight);
$('#image-view').load(function() {
    $('#file-view .loading-tip').hide();
});
</script>
{% endblock %}
